{"pr_number": 3157, "pr_title": "DROOLS-5058: [DMN Designer] Impossible to open a decision if another opened DMN is editing a decision", "pr_createdAt": "2020-02-13T12:09:49Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3157", "timeline": [{"oid": "453596b7cb0d9ffb6895062397a8e0d0a5fc7137", "url": "https://github.com/kiegroup/kie-wb-common/commit/453596b7cb0d9ffb6895062397a8e0d0a5fc7137", "message": "DROOLS-5058: [DMN Designer] Impossible to open a decision if another opened DMN is editing a decision", "committedDate": "2020-02-13T11:55:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkzNDQ5Mw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3157#discussion_r378934493", "bodyText": "Is there a way in Errai to avoid CDI Events propagation and better scope the firing?\nThis mechanism is quite error prone because even if this class is Dependent it seems to receive all the events so we need to remember to add this kind of filters everywhere.\nWdyt? Am I missing something?", "author": "danielezonca", "createdAt": "2020-02-13T15:30:59Z", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/expressions/ExpressionEditorControlImpl.java", "diffHunk": "@@ -132,7 +132,11 @@ protected void doDestroy() {\n \n     @SuppressWarnings(\"unused\")\n     public void onCanvasFocusedSelectionEvent(final @Observes CanvasSelectionEvent event) {\n-        expressionEditor.ifPresent(ExpressionEditorView.Presenter::exit);\n+        session.ifPresent(s -> {\n+            if (Objects.equals(s.getCanvasHandler(), event.getCanvasHandler())) {\n+                expressionEditor.ifPresent(ExpressionEditorView.Presenter::exit);\n+            }\n+        });", "originalCommit": "453596b7cb0d9ffb6895062397a8e0d0a5fc7137", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk0MjI0OA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3157#discussion_r378942248", "bodyText": "You're not missing anything...\nI asked the Errai people, a long time ago, if it was possible to add support for predicates on the event firing mechanism, so events would only be dispatched to observes if the predicate was met. It fell on silence (I guess it's not part of the CDI specification).\nThat said, you will see in Stunner, copious amounts of code along the lines of if(isSameSession(session, sessionManager.getCurrentSession()) {...", "author": "manstis", "createdAt": "2020-02-13T15:42:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkzNDQ5Mw=="}], "type": "inlineReview"}]}