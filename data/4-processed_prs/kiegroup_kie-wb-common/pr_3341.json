{"pr_number": 3341, "pr_title": "RHPAM-2990 / RHPAM-3015 - Variable Data Type related problems", "pr_createdAt": "2020-06-22T16:40:16Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3341", "timeline": [{"oid": "d1b115db8fd703de1b3b9a89da447a9c150490df", "url": "https://github.com/kiegroup/kie-wb-common/commit/d1b115db8fd703de1b3b9a89da447a9c150490df", "message": "JBPM-9182 - Error message when creating Global Variable without Data Type\n\nGlobal Variables accept empty data type values without problems.", "committedDate": "2020-06-22T14:34:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzgzOTkzMw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3341#discussion_r443839933", "bodyText": "what's the reason for moving from private to protected access?", "author": "romartin", "createdAt": "2020-06-22T21:36:01Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-backend/src/main/java/org/kie/workbench/common/stunner/bpmn/backend/converters/customproperties/elements/GlobalVariablesElement.java", "diffHunk": "@@ -49,13 +49,7 @@ public void setValue(BaseElement element, String value) {\n         setStringValue(element, value);\n     }\n \n-    private void setStringValue(BaseElement element, String value) {\n-        Stream.of(value.split(\",\"))\n-                .map(this::extensionOf)\n-                .forEach(getExtensionElements(element)::add);\n-    }\n-\n-    private Optional<String> getStringValue(BaseElement element) {\n+    protected Optional<String> getStringValue(BaseElement element) {", "originalCommit": "d1b115db8fd703de1b3b9a89da447a9c150490df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg0MDEwOQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3341#discussion_r443840109", "bodyText": "can it be private?", "author": "romartin", "createdAt": "2020-06-22T21:36:27Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-backend/src/main/java/org/kie/workbench/common/stunner/bpmn/backend/converters/customproperties/elements/GlobalVariablesElement.java", "diffHunk": "@@ -68,16 +62,18 @@ private void setStringValue(BaseElement element, String value) {\n                 .collect(Collectors.toList());\n \n         String globalVariables = globalExtensions.stream()\n-                .filter(globalType -> globalType.getIdentifier() != null &&\n-                        globalType.getIdentifier().length() > 0 &&\n-                        globalType.getType() != null &&\n-                        globalType.getType().length() > 0)\n                 .map(globalType -> globalType.getIdentifier() + \":\" + globalType.getType())\n                 .collect(Collectors.joining(\",\"));\n \n         return Optional.ofNullable(globalVariables);\n     }\n \n+    protected void setStringValue(BaseElement element, String value) {", "originalCommit": "d1b115db8fd703de1b3b9a89da447a9c150490df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg0MDY2NQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3341#discussion_r443840665", "bodyText": "can it be static and private?", "author": "romartin", "createdAt": "2020-06-22T21:37:39Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-marshalling/src/main/java/org/kie/workbench/common/stunner/bpmn/client/marshall/converters/customproperties/elements/GlobalVariablesElement.java", "diffHunk": "@@ -70,25 +63,28 @@ protected void setStringValue(BaseElement element, String value) {\n                 .collect(Collectors.toList());\n \n         String globalVariables = globalExtensions.stream()\n-                .filter(globalType -> globalType.getIdentifier() != null &&\n-                        globalType.getIdentifier().length() > 0 &&\n-                        globalType.getType() != null &&\n-                        globalType.getType().length() > 0)\n                 .map(globalType -> globalType.getIdentifier() + \":\" + globalType.getType())\n                 .collect(Collectors.joining(\",\"));\n \n         return Optional.ofNullable(globalVariables);\n     }\n \n-    private FeatureMap.Entry extensionOf(String variable) {\n+    @Override\n+    protected void setStringValue(BaseElement element, String value) {\n+        Stream.of(value.split(\",\"))\n+                .map(this::extensionOf)\n+                .forEach(getExtensionElements(element)::add);\n+    }\n+\n+    protected FeatureMap.Entry extensionOf(String variable) {", "originalCommit": "d1b115db8fd703de1b3b9a89da447a9c150490df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg0MDY5MA==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3341#discussion_r443840690", "bodyText": "can it be static and private?", "author": "romartin", "createdAt": "2020-06-22T21:37:42Z", "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-marshalling/src/main/java/org/kie/workbench/common/stunner/bpmn/client/marshall/converters/customproperties/elements/GlobalVariablesElement.java", "diffHunk": "@@ -70,25 +63,28 @@ protected void setStringValue(BaseElement element, String value) {\n                 .collect(Collectors.toList());\n \n         String globalVariables = globalExtensions.stream()\n-                .filter(globalType -> globalType.getIdentifier() != null &&\n-                        globalType.getIdentifier().length() > 0 &&\n-                        globalType.getType() != null &&\n-                        globalType.getType().length() > 0)\n                 .map(globalType -> globalType.getIdentifier() + \":\" + globalType.getType())\n                 .collect(Collectors.joining(\",\"));\n \n         return Optional.ofNullable(globalVariables);\n     }\n \n-    private FeatureMap.Entry extensionOf(String variable) {\n+    @Override\n+    protected void setStringValue(BaseElement element, String value) {\n+        Stream.of(value.split(\",\"))\n+                .map(this::extensionOf)\n+                .forEach(getExtensionElements(element)::add);\n+    }\n+\n+    protected FeatureMap.Entry extensionOf(String variable) {\n         return new EStructuralFeatureImpl.SimpleFeatureMapEntry(\n                 (EStructuralFeature.Internal) DOCUMENT_ROOT__GLOBAL,\n                 globalTypeDataOf(variable));\n     }\n \n-    private GlobalType globalTypeDataOf(String variable) {\n+    protected GlobalType globalTypeDataOf(String variable) {", "originalCommit": "d1b115db8fd703de1b3b9a89da447a9c150490df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3c22155af298eb0679e86e7129458cc8f8e50e37", "url": "https://github.com/kiegroup/kie-wb-common/commit/3c22155af298eb0679e86e7129458cc8f8e50e37", "message": "RHPAM-2990 - Requested changes, expanded test coverage, eliminated possible code-smells.", "committedDate": "2020-06-23T02:59:39Z", "type": "commit"}]}