{"pr_number": 1529, "pr_title": "[HUDI-800] fix Metrics getReporter().close() throws NPE when MetricsR\u2026", "pr_createdAt": "2020-04-18T15:36:25Z", "pr_url": "https://github.com/apache/hudi/pull/1529", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc5NjQ2MA==", "url": "https://github.com/apache/hudi/pull/1529#discussion_r410796460", "bodyText": "How about changing the error level to warn?", "author": "leesf", "createdAt": "2020-04-19T02:34:28Z", "path": "hudi-client/src/main/java/org/apache/hudi/metrics/Metrics.java", "diffHunk": "@@ -52,9 +52,11 @@ private Metrics(HoodieWriteConfig metricConfig) {\n     Runtime.getRuntime().addShutdownHook(new Thread(() -> {\n       try {\n         reporter.report();\n-        getReporter().close();\n+        if (getReporter() != null) {\n+          getReporter().close();\n+        }\n       } catch (Exception e) {\n-        e.printStackTrace();\n+        LOG.error(\"Error while closing reporter\", e);", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg5ODMwMw==", "url": "https://github.com/apache/hudi/pull/1529#discussion_r410898303", "bodyText": "got it", "author": "lw309637554", "createdAt": "2020-04-19T12:55:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc5NjQ2MA=="}], "type": "inlineReview"}, {"oid": "7165a3d29a87a47e94c13e620352dde81e1c0d39", "url": "https://github.com/apache/hudi/commit/7165a3d29a87a47e94c13e620352dde81e1c0d39", "message": "[HUDI-800] fix Metrics getReporter().close() throws NPE when MetricsReporter is InMemoryMetricsReporter.", "committedDate": "2020-04-19T12:45:40Z", "type": "commit"}, {"oid": "7165a3d29a87a47e94c13e620352dde81e1c0d39", "url": "https://github.com/apache/hudi/commit/7165a3d29a87a47e94c13e620352dde81e1c0d39", "message": "[HUDI-800] fix Metrics getReporter().close() throws NPE when MetricsReporter is InMemoryMetricsReporter.", "committedDate": "2020-04-19T12:45:40Z", "type": "forcePushed"}]}