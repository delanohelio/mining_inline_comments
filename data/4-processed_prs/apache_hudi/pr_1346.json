{"pr_number": 1346, "pr_title": "[HUDI-554] Cleanup package structure in hudi-client", "pr_createdAt": "2020-02-21T09:51:41Z", "pr_url": "https://github.com/apache/hudi/pull/1346", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNTE5MQ==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383115191", "bodyText": "Is the original indent the right one?", "author": "yanghua", "createdAt": "2020-02-24T07:41:05Z", "path": "hudi-client/src/main/java/org/apache/hudi/table/rollback/RollbackExecutor.java", "diffHunk": "@@ -69,7 +69,7 @@ public RollbackExecutor(HoodieTableMetaClient metaClient, HoodieWriteConfig conf\n    * Performs all rollback actions that we have collected in parallel.\n    */\n   public List<HoodieRollbackStat> performRollback(JavaSparkContext jsc, HoodieInstant instantToRollback,\n-      List<RollbackRequest> rollbackRequests) {\n+                                           List<RollbackRequest> rollbackRequests) {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ2NzkxNA==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383467914", "bodyText": "yes.. will revert. dont know how it got changed", "author": "vinothchandar", "createdAt": "2020-02-24T19:29:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNTE5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNjk4NA==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383116984", "bodyText": "IMO, org.apache.hudi is a very common( or say generic) level. It would be better to make the specific classes host in a detailed package that can represent his location. WDYT?", "author": "yanghua", "createdAt": "2020-02-24T07:48:06Z", "path": "hudi-client/src/test/java/org/apache/hudi/TestUpdateSchemaEvolution.java", "diffHunk": "@@ -16,10 +16,9 @@\n  * limitations under the License.\n  */\n \n-package org.apache.hudi.func;\n+package org.apache.hudi;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ2MjA0Ng==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383462046", "bodyText": "+1", "author": "n3nash", "createdAt": "2020-02-24T19:18:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNjk4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ2NzY5Mw==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383467693", "bodyText": "I will move classes out to specific packages.. The test files I left out there are kind of cross functional across packages.. But agree. let me make one more pass", "author": "vinothchandar", "createdAt": "2020-02-24T19:29:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNjk4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNzQ1Nw==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383117457", "bodyText": "ditto, can we place it into e.g. org.apache.hudi.write.common.WriteStatus?", "author": "yanghua", "createdAt": "2020-02-24T07:49:40Z", "path": "hudi-client/src/test/java/org/apache/hudi/client/TestHoodieClientBase.java", "diffHunk": "@@ -16,8 +16,10 @@\n  * limitations under the License.\n  */\n \n-package org.apache.hudi;\n+package org.apache.hudi.client;\n \n+import org.apache.hudi.common.HoodieClientTestHarness;\n+import org.apache.hudi.WriteStatus;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ2NzI2Mg==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383467262", "bodyText": "Actually, top level API classes e.g SparkContext can be placed under the root package right.?  That was my reasoning at-least.. This is the object we return back to the user and made sense to leave at the top level. WDYT", "author": "vinothchandar", "createdAt": "2020-02-24T19:28:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNzQ1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzYzMzYzNw==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383633637", "bodyText": "Actually, I agree with the context like SparkContext can be placed under the top-level package.  However, IMO, the WriteStatus is not as important as SparkContext. It is not been used anywhere. Hudi support write and read operation. We should make them a pair relationship.", "author": "yanghua", "createdAt": "2020-02-25T02:57:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNzQ1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzYzNzA5NQ==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383637095", "bodyText": "It is not been used anywhere.\n\nRDD level APIs have return types like this and projects like uber's marmaray , hudi's deltastramer do use them. Since, you feel strongly, let me move it. :)", "author": "vinothchandar", "createdAt": "2020-02-25T03:13:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzExNzQ1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ2MTYyNA==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383461624", "bodyText": "This looks like there should be an Executor<> interface if we are going to move to *executor style of naming ? Do you have plans to introduce one later ?", "author": "n3nash", "createdAt": "2020-02-24T19:17:41Z", "path": "hudi-client/src/main/java/org/apache/hudi/table/CleanExecutor.java", "diffHunk": "@@ -60,17 +59,17 @@\n  * <p>\n  * TODO: Should all cleaning be done based on {@link HoodieCommitMetadata}\n  */\n-public class HoodieCleanHelper<T extends HoodieRecordPayload<T>> implements Serializable {\n+public class CleanExecutor<T extends HoodieRecordPayload<T>> implements Serializable {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ2NTc1Mw==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383465753", "bodyText": "Agree.. Renamed this to stay consistent with RollbackExecutor.. but may be we should rename that to RollbackHelper.  Will take a pass and rename both consistently.", "author": "vinothchandar", "createdAt": "2020-02-24T19:25:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ2MTYyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzY5NTI0Mw==", "url": "https://github.com/apache/hudi/pull/1346#discussion_r383695243", "bodyText": "My personal feeling, XXXHelper usually means a utility class that contains some static helper methods. I would prefer the old one.", "author": "yanghua", "createdAt": "2020-02-25T07:17:41Z", "path": "hudi-client/src/main/java/org/apache/hudi/table/CleanHelper.java", "diffHunk": "@@ -59,17 +59,17 @@\n  * <p>\n  * TODO: Should all cleaning be done based on {@link HoodieCommitMetadata}\n  */\n-public class CleanExecutor<T extends HoodieRecordPayload<T>> implements Serializable {\n+public class CleanHelper<T extends HoodieRecordPayload<T>> implements Serializable {", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8053e908ebf0db6883c2f755d998d35c40bfc6ff", "url": "https://github.com/apache/hudi/commit/8053e908ebf0db6883c2f755d998d35c40bfc6ff", "message": "[HUDI-554] Cleanup package structure in hudi-client\n\n - Just package, class moves and renames with the following intent\n - `client` now has all the various client classes, that do the transaction management\n - `func` renamed to `execution` and some helpers moved to `client/utils`\n - All compaction code under `io` now under `table/compact`\n - Rollback code under `table/rollback` and in general all code for individual operations under `table`\n - `exception` `config`, `metrics` left untouched\n - Moved the tests also accordingly", "committedDate": "2020-02-26T00:51:44Z", "type": "commit"}, {"oid": "a9de4988c8c434e1158af07a752210931904648a", "url": "https://github.com/apache/hudi/commit/a9de4988c8c434e1158af07a752210931904648a", "message": "Code review comments", "committedDate": "2020-02-26T00:51:45Z", "type": "commit"}, {"oid": "bea34dd686d8b6a92a6d8914abac07aad75dc3a5", "url": "https://github.com/apache/hudi/commit/bea34dd686d8b6a92a6d8914abac07aad75dc3a5", "message": "Fix flaky tests", "committedDate": "2020-02-26T00:51:45Z", "type": "commit"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "5b20891619380a66e2a62c9e57fb28c4f5ed948b", "url": "https://github.com/apache/hudi/commit/5b20891619380a66e2a62c9e57fb28c4f5ed948b", "message": "Fix checkstyle", "committedDate": "2020-02-27T06:10:53Z", "type": "commit"}, {"oid": "5b20891619380a66e2a62c9e57fb28c4f5ed948b", "url": "https://github.com/apache/hudi/commit/5b20891619380a66e2a62c9e57fb28c4f5ed948b", "message": "Fix checkstyle", "committedDate": "2020-02-27T06:10:53Z", "type": "forcePushed"}]}