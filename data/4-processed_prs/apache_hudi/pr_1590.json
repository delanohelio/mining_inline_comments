{"pr_number": 1590, "pr_title": "[HUDI-812] Migrate hudi common tests to JUnit 5", "pr_createdAt": "2020-05-04T02:27:06Z", "pr_url": "https://github.com/apache/hudi/pull/1590", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "8c5e15818117688ab8425eeee7c56cdccb919bf8", "url": "https://github.com/apache/hudi/commit/8c5e15818117688ab8425eeee7c56cdccb919bf8", "message": "[HUDI-812] Migrate hudi-common tests to JUnit 5", "committedDate": "2020-05-04T15:52:25Z", "type": "commit"}, {"oid": "37fcab9c967d27c9e422440c2ff971bcc6a87273", "url": "https://github.com/apache/hudi/commit/37fcab9c967d27c9e422440c2ff971bcc6a87273", "message": "update checkstyle rules", "committedDate": "2020-05-04T15:52:25Z", "type": "commit"}, {"oid": "37fcab9c967d27c9e422440c2ff971bcc6a87273", "url": "https://github.com/apache/hudi/commit/37fcab9c967d27c9e422440c2ff971bcc6a87273", "message": "update checkstyle rules", "committedDate": "2020-05-04T15:52:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIyNzc2MA==", "url": "https://github.com/apache/hudi/pull/1590#discussion_r419227760", "bodyText": "\"system-rules\" is the only Junit 4 extension needed for setting env vars to run a test case in this class. It works fine with Junit 5. Hence these 2 imports ( org.junit.Rule and org.junit.contrib.*) are still here. Also exclude this in checkstyle.xml", "author": "xushiyan", "createdAt": "2020-05-04T06:09:52Z", "path": "hudi-common/src/test/java/org/apache/hudi/common/fs/TestFSUtils.java", "diffHunk": "@@ -18,25 +18,25 @@\n \n package org.apache.hudi.common.fs;\n \n-import org.apache.hudi.common.HoodieCommonTestHarness;\n import org.apache.hudi.common.model.HoodieLogFile;\n import org.apache.hudi.common.model.HoodieTestUtils;\n import org.apache.hudi.common.table.HoodieTableMetaClient;\n import org.apache.hudi.common.table.timeline.HoodieInstant;\n import org.apache.hudi.common.table.timeline.HoodieTimeline;\n+import org.apache.hudi.common.testutils.HoodieCommonTestHarness;\n import org.apache.hudi.exception.HoodieException;\n \n import org.apache.hadoop.conf.Configuration;\n import org.apache.hadoop.fs.Path;\n-import org.junit.Assert;\n-import org.junit.Before;\n import org.junit.Rule;\n-import org.junit.Test;\n import org.junit.contrib.java.lang.system.EnvironmentVariables;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU0Mjg5NQ==", "url": "https://github.com/apache/hudi/pull/1590#discussion_r419542895", "bodyText": "https://github.com/junit-pioneer/junit-pioneer\ntried this but didn't work. its reflection logic caused env var contains null kv pair which led to error.", "author": "xushiyan", "createdAt": "2020-05-04T15:57:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIyNzc2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIzMTc0Mg==", "url": "https://github.com/apache/hudi/pull/1590#discussion_r419231742", "bodyText": "Change to a RuntimeException in Junit 5", "author": "xushiyan", "createdAt": "2020-05-04T06:25:02Z", "path": "hudi-hive-sync/src/test/java/org/apache/hudi/hive/TestUtil.java", "diffHunk": "@@ -59,7 +59,7 @@\n import org.joda.time.DateTime;\n import org.joda.time.format.DateTimeFormat;\n import org.joda.time.format.DateTimeFormatter;\n-import org.junit.runners.model.InitializationError;\n+import org.junit.platform.commons.JUnitException;", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}