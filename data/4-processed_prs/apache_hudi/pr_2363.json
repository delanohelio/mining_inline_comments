{"pr_number": 2363, "pr_title": "[HUDI-1484] Escape the partition value in HiveSyncTool", "pr_createdAt": "2020-12-22T12:51:02Z", "pr_url": "https://github.com/apache/hudi/pull/2363", "timeline": [{"oid": "b98a58abfbf14937739ab09c3f85f3232af16380", "url": "https://github.com/apache/hudi/commit/b98a58abfbf14937739ab09c3f85f3232af16380", "message": "[HUDI-1484] Escape the partition value in HiveSyncTool\n\nfix test case", "committedDate": "2020-12-22T13:45:37Z", "type": "forcePushed"}, {"oid": "01548c20602040d268ccfe47089ad45585f55ea0", "url": "https://github.com/apache/hudi/commit/01548c20602040d268ccfe47089ad45585f55ea0", "message": "[HUDI-1484] Escape the partition value in HiveSyncTool\n\nfix test case\n\nfix test case\n\nfix test case", "committedDate": "2020-12-22T16:27:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc1NTk2Mg==", "url": "https://github.com/apache/hudi/pull/2363#discussion_r547755962", "bodyText": "It seems we already have a val named DEFAULT_URL_ENCODE_PARTITIONING_OPT_VAL in DataSourceOptions, how about using this one, avoid importing KeyGeneratorOptions", "author": "wangxianghu", "createdAt": "2020-12-23T07:34:26Z", "path": "hudi-spark-datasource/hudi-spark/src/main/scala/org/apache/hudi/HoodieSparkSqlWriter.scala", "diffHunk": "@@ -364,6 +365,9 @@ private[hudi] object HoodieSparkSqlWriter {\n     hiveSyncConfig.partitionValueExtractorClass = parameters(HIVE_PARTITION_EXTRACTOR_CLASS_OPT_KEY)\n     hiveSyncConfig.useJdbc = parameters(HIVE_USE_JDBC_OPT_KEY).toBoolean\n     hiveSyncConfig.supportTimestamp = parameters.get(HIVE_SUPPORT_TIMESTAMP).exists(r => r.toBoolean)\n+    hiveSyncConfig.decodePartition =\n+      parameters.getOrElse(URL_ENCODE_PARTITIONING_OPT_KEY,\n+        KeyGeneratorOptions.DEFAULT_URL_ENCODE_PARTITIONING_OPT_VAL).toBoolean", "originalCommit": "01548c20602040d268ccfe47089ad45585f55ea0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkwNzEyNw==", "url": "https://github.com/apache/hudi/pull/2363#discussion_r547907127", "bodyText": "Thanks for your suggestion @wangxianghu . Fix this!", "author": "pengzhiwei2018", "createdAt": "2020-12-23T11:13:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc1NTk2Mg=="}], "type": "inlineReview"}, {"oid": "ae565ee37f41e43eec483b422f0478693356b39f", "url": "https://github.com/apache/hudi/commit/ae565ee37f41e43eec483b422f0478693356b39f", "message": "[HUDI-1484] Escape the partition value in HiveSyncTool\n\nfix test case\n\nfix test case\n\nfix test case\n\nremove unused import", "committedDate": "2020-12-23T11:16:46Z", "type": "forcePushed"}, {"oid": "8cd2540ac32d1ebbfc22a3fa8d9a8d1e9079aa3d", "url": "https://github.com/apache/hudi/commit/8cd2540ac32d1ebbfc22a3fa8d9a8d1e9079aa3d", "message": "[HUDI-1484] Escape the partition value in HiveSyncTool\n\nfix test case\n\nfix test case\n\nfix test case\n\nremove unused import", "committedDate": "2020-12-23T12:47:43Z", "type": "commit"}, {"oid": "8cd2540ac32d1ebbfc22a3fa8d9a8d1e9079aa3d", "url": "https://github.com/apache/hudi/commit/8cd2540ac32d1ebbfc22a3fa8d9a8d1e9079aa3d", "message": "[HUDI-1484] Escape the partition value in HiveSyncTool\n\nfix test case\n\nfix test case\n\nfix test case\n\nremove unused import", "committedDate": "2020-12-23T12:47:43Z", "type": "forcePushed"}]}