{"pr_number": 2129, "pr_title": "[HUDI-1302] Add support for timestamp field in HiveSync", "pr_createdAt": "2020-09-29T00:41:13Z", "pr_url": "https://github.com/apache/hudi/pull/2129", "timeline": [{"oid": "86965e6031a38cf85be3a056be3c58521cd38eba", "url": "https://github.com/apache/hudi/commit/86965e6031a38cf85be3a056be3c58521cd38eba", "message": "[HUDI-1302] Add support for timestamp field in HiveSync", "committedDate": "2020-09-29T20:41:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3MTU5Mg==", "url": "https://github.com/apache/hudi/pull/2129#discussion_r498571592", "bodyText": "I think we need to add this option into DataSourceOptions, DataSourceUtils, and HoodieSparkSqlWriter\nsomething like?\n\"hoodie.datasource.hive_sync.support_timestamp\"", "author": "bschell", "createdAt": "2020-10-02T00:21:05Z", "path": "hudi-sync/hudi-dla-sync/src/main/java/org/apache/hudi/dla/DLASyncConfig.java", "diffHunk": "@@ -68,6 +68,9 @@\n   @Parameter(names = {\"--help\", \"-h\"}, help = true)\n   public Boolean help = false;\n \n+  @Parameter(names = {\"--support-timestamp\"}, description = \"If true, converts int64(timestamp_micros) to timestamp type\")\n+  public Boolean supportTimestamp = false;", "originalCommit": "86965e6031a38cf85be3a056be3c58521cd38eba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTEwMTA0Ng==", "url": "https://github.com/apache/hudi/pull/2129#discussion_r499101046", "bodyText": "@bschell  thank you for pointing this out. We only use standalone mode, so I missed this DataSourceOptions. Fixed now. PTAL.", "author": "satishkotha", "createdAt": "2020-10-03T01:01:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3MTU5Mg=="}], "type": "inlineReview"}, {"oid": "e0e1ae8757f0ba5968088d9b392f675173c61f44", "url": "https://github.com/apache/hudi/commit/e0e1ae8757f0ba5968088d9b392f675173c61f44", "message": "[HUDI-1302] Add support for timestamp field in HiveSync", "committedDate": "2020-10-02T05:33:35Z", "type": "commit"}, {"oid": "e0e1ae8757f0ba5968088d9b392f675173c61f44", "url": "https://github.com/apache/hudi/commit/e0e1ae8757f0ba5968088d9b392f675173c61f44", "message": "[HUDI-1302] Add support for timestamp field in HiveSync", "committedDate": "2020-10-02T05:33:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTM4Mzg3Ng==", "url": "https://github.com/apache/hudi/pull/2129#discussion_r499383876", "bodyText": "Could you please explain what happens now if the originalType  == OriginalType.TIMESTAMP_MICROS ?", "author": "n3nash", "createdAt": "2020-10-05T07:11:11Z", "path": "hudi-sync/hudi-hive-sync/src/main/java/org/apache/hudi/hive/util/HiveSchemaUtil.java", "diffHunk": "@@ -167,7 +173,10 @@ private static String convertField(final Type parquetType) {\n             .append(decimalMetadata.getScale()).append(\")\").toString();\n       } else if (originalType == OriginalType.DATE) {\n         return field.append(\"DATE\").toString();\n+      } else if (supportTimestamp && originalType == OriginalType.TIMESTAMP_MICROS) {", "originalCommit": "e0e1ae8757f0ba5968088d9b392f675173c61f44", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0NzYxMA==", "url": "https://github.com/apache/hudi/pull/2129#discussion_r499747610", "bodyText": "@n3nash without this change, we get 'bigint' for hive type (goes into parquetPrimitiveTypeName.convert -> convertINT64 method)", "author": "satishkotha", "createdAt": "2020-10-05T17:08:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTM4Mzg3Ng=="}], "type": "inlineReview"}]}