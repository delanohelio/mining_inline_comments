{"pr_number": 1567, "pr_title": "[HUDI-840]Clean blank file created by HoodieLogFormatWriter", "pr_createdAt": "2020-04-27T07:25:23Z", "pr_url": "https://github.com/apache/hudi/pull/1567", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkyMzkxNA==", "url": "https://github.com/apache/hudi/pull/1567#discussion_r416923914", "bodyText": "@hddong : Any possible reasons why blank file is created in the first place ?", "author": "bvaradar", "createdAt": "2020-04-28T21:08:52Z", "path": "hudi-common/src/main/java/org/apache/hudi/common/table/log/HoodieLogFormatWriter.java", "diffHunk": "@@ -210,6 +210,14 @@ public void close() throws IOException {\n     flush();\n     output.close();\n     output = null;\n+    Path path = logFile.getPath();", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA0NzI4MA==", "url": "https://github.com/apache/hudi/pull/1567#discussion_r417047280", "bodyText": "@hddong : Any possible reasons why blank file is created in the first place ?\n\nCreate blank file for appendBlock when new HoodieLogFormatWriter\nhttps://github.com/apache/incubator-hudi/blob/f1592be629c3f9762f62d4e1dbf3be54f213d92d/hudi-common/src/main/java/org/apache/hudi/common/table/log/HoodieLogFormatWriter.java#L105-L108\nBut there is a special case,  when roll over is true(block size is past the threshold), we will close the old writer and create a new writer . And if we close a new writer created by rolloverIfNeeded , there will left a blank file.", "author": "hddong", "createdAt": "2020-04-29T03:27:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkyMzkxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIzMDQ5NQ==", "url": "https://github.com/apache/hudi/pull/1567#discussion_r459230495", "bodyText": "fair enough. but this is effectively doing an extra RPC every close, just to handle this corner case. what is the actual  issue caused by the empty file? does the query/writing fail or get stuck?", "author": "vinothchandar", "createdAt": "2020-07-23T06:04:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkyMzkxNA=="}], "type": "inlineReview"}, {"oid": "fb2bf16c372ae9f0b2f14b99483286532a36d35e", "url": "https://github.com/apache/hudi/commit/fb2bf16c372ae9f0b2f14b99483286532a36d35e", "message": "Clean blank file created by HoodieLogFormatWriter", "committedDate": "2020-07-10T02:09:10Z", "type": "forcePushed"}, {"oid": "54b0ed4227ae09a174f866bc90e3eb84082c325f", "url": "https://github.com/apache/hudi/commit/54b0ed4227ae09a174f866bc90e3eb84082c325f", "message": "[HUDI-840]Clean blank file created by HoodieLogFormatWriter", "committedDate": "2020-09-25T04:35:19Z", "type": "forcePushed"}, {"oid": "96adac4ce820c5c2a8658b376712cb0b062175f6", "url": "https://github.com/apache/hudi/commit/96adac4ce820c5c2a8658b376712cb0b062175f6", "message": "[HUDI-840]Clean blank file created by HoodieLogFormatWriter", "committedDate": "2020-09-25T06:05:39Z", "type": "commit"}, {"oid": "96adac4ce820c5c2a8658b376712cb0b062175f6", "url": "https://github.com/apache/hudi/commit/96adac4ce820c5c2a8658b376712cb0b062175f6", "message": "[HUDI-840]Clean blank file created by HoodieLogFormatWriter", "committedDate": "2020-09-25T06:05:39Z", "type": "forcePushed"}]}