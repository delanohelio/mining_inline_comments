{"pr_number": 1769, "pr_title": "[DOC] Add document for the use of metrics system in Hudi.", "pr_createdAt": "2020-06-27T11:21:09Z", "pr_url": "https://github.com/apache/hudi/pull/1769", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwMzE0NQ==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r453203145", "bodyText": "will sets the Datadog API site, -> will set the Datadog API site.", "author": "leesf", "createdAt": "2020-07-11T15:01:33Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n+\n+### JmxMetricsReporter\n+\n+JmxMetricsReporter is a implementation of Jmx reporter, which used to report jmx metric.\n+\n+#### Configurations\n+The following is an example of configuration as JXM. The detailed configuration can refer to [here](configurations.html#jmx).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=JMX\n+  hoodie.metrics.jmx.host=192.168.0.106\n+  hoodie.metrics.jmx.port=4001\n+  ```\n+\n+#### Demo\n+As configuration above, Hudi metrics will started JMX server on port 4001. Then we can start jconsole to connect to 192.168.0.106:4001. Below is a sample of monitoring hudi jmx metrics through jconsole.\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_jxm_metrics.png\" alt=\"hudi_jxm_metrics.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+### MetricsGraphiteReporter\n+\n+MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.\n+\n+#### Configurations\n+The following is an example of configuration as GRAPHITE. The detailed configuration can refer to [here](configurations.html#graphite).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=GRAPHITE\n+  hoodie.metrics.graphite.host=192.168.0.106\n+  hoodie.metrics.graphite.port=2003\n+  hoodie.metrics.graphite.metric.prefix=<your metrics prefix>\n+  ```\n+#### Demo\n+As configuration above, we should first start graphite server on host 192.168.0.106 and port 2003, Hudi metrics will connect to graphite server, and report Hudi metrics to graphite server. Below is a sample of monitoring hudi metrics through graphite.\n+  <figure>\n+      <img class=\"docimage\" src=\"/assets/images/hudi_graphite_metrics.png\" alt=\"hudi_graphite_metrics.png\" style=\"max-width: 100%\" />\n+  </figure>\n+\n+### DatadogMetricsReporter\n+\n+DatadogMetricsReporter is a implementation of Datadog reporter.\n+A reporter which publishes metric values to Datadog monitoring service via Datadog HTTP API.\n+\n+#### Configurations\n+The following is an example of configuration as Datadog. The detailed configuration can refer to [here](configurations.html#datadog).\n+\n+```properties\n+hoodie.metrics.on=true\n+hoodie.metrics.reporter.type=DATADOG\n+hoodie.metrics.datadog.api.site=EU # or US\n+hoodie.metrics.datadog.api.key=<your api key>\n+hoodie.metrics.datadog.metric.prefix=<your metrics prefix>\n+```\n+\n+ * `hoodie.metrics.datadog.api.site` will sets the Datadog API site, It determines whether the requests will be sent to api.datadoghq.eu (EU) or api.datadoghq.com (US). Set this according to your Datadog account settings.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwMzIwMg==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r453203202", "bodyText": "will set set the api key. -> will set the api key.", "author": "leesf", "createdAt": "2020-07-11T15:02:03Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n+\n+### JmxMetricsReporter\n+\n+JmxMetricsReporter is a implementation of Jmx reporter, which used to report jmx metric.\n+\n+#### Configurations\n+The following is an example of configuration as JXM. The detailed configuration can refer to [here](configurations.html#jmx).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=JMX\n+  hoodie.metrics.jmx.host=192.168.0.106\n+  hoodie.metrics.jmx.port=4001\n+  ```\n+\n+#### Demo\n+As configuration above, Hudi metrics will started JMX server on port 4001. Then we can start jconsole to connect to 192.168.0.106:4001. Below is a sample of monitoring hudi jmx metrics through jconsole.\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_jxm_metrics.png\" alt=\"hudi_jxm_metrics.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+### MetricsGraphiteReporter\n+\n+MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.\n+\n+#### Configurations\n+The following is an example of configuration as GRAPHITE. The detailed configuration can refer to [here](configurations.html#graphite).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=GRAPHITE\n+  hoodie.metrics.graphite.host=192.168.0.106\n+  hoodie.metrics.graphite.port=2003\n+  hoodie.metrics.graphite.metric.prefix=<your metrics prefix>\n+  ```\n+#### Demo\n+As configuration above, we should first start graphite server on host 192.168.0.106 and port 2003, Hudi metrics will connect to graphite server, and report Hudi metrics to graphite server. Below is a sample of monitoring hudi metrics through graphite.\n+  <figure>\n+      <img class=\"docimage\" src=\"/assets/images/hudi_graphite_metrics.png\" alt=\"hudi_graphite_metrics.png\" style=\"max-width: 100%\" />\n+  </figure>\n+\n+### DatadogMetricsReporter\n+\n+DatadogMetricsReporter is a implementation of Datadog reporter.\n+A reporter which publishes metric values to Datadog monitoring service via Datadog HTTP API.\n+\n+#### Configurations\n+The following is an example of configuration as Datadog. The detailed configuration can refer to [here](configurations.html#datadog).\n+\n+```properties\n+hoodie.metrics.on=true\n+hoodie.metrics.reporter.type=DATADOG\n+hoodie.metrics.datadog.api.site=EU # or US\n+hoodie.metrics.datadog.api.key=<your api key>\n+hoodie.metrics.datadog.metric.prefix=<your metrics prefix>\n+```\n+\n+ * `hoodie.metrics.datadog.api.site` will sets the Datadog API site, It determines whether the requests will be sent to api.datadoghq.eu (EU) or api.datadoghq.com (US). Set this according to your Datadog account settings.\n+ * `hoodie.metrics.datadog.api.key` will set set the api key.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwMzI1MA==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r453203250", "bodyText": "helps -> help  and one blank before Note that", "author": "leesf", "createdAt": "2020-07-11T15:02:28Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n+\n+### JmxMetricsReporter\n+\n+JmxMetricsReporter is a implementation of Jmx reporter, which used to report jmx metric.\n+\n+#### Configurations\n+The following is an example of configuration as JXM. The detailed configuration can refer to [here](configurations.html#jmx).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=JMX\n+  hoodie.metrics.jmx.host=192.168.0.106\n+  hoodie.metrics.jmx.port=4001\n+  ```\n+\n+#### Demo\n+As configuration above, Hudi metrics will started JMX server on port 4001. Then we can start jconsole to connect to 192.168.0.106:4001. Below is a sample of monitoring hudi jmx metrics through jconsole.\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_jxm_metrics.png\" alt=\"hudi_jxm_metrics.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+### MetricsGraphiteReporter\n+\n+MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.\n+\n+#### Configurations\n+The following is an example of configuration as GRAPHITE. The detailed configuration can refer to [here](configurations.html#graphite).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=GRAPHITE\n+  hoodie.metrics.graphite.host=192.168.0.106\n+  hoodie.metrics.graphite.port=2003\n+  hoodie.metrics.graphite.metric.prefix=<your metrics prefix>\n+  ```\n+#### Demo\n+As configuration above, we should first start graphite server on host 192.168.0.106 and port 2003, Hudi metrics will connect to graphite server, and report Hudi metrics to graphite server. Below is a sample of monitoring hudi metrics through graphite.\n+  <figure>\n+      <img class=\"docimage\" src=\"/assets/images/hudi_graphite_metrics.png\" alt=\"hudi_graphite_metrics.png\" style=\"max-width: 100%\" />\n+  </figure>\n+\n+### DatadogMetricsReporter\n+\n+DatadogMetricsReporter is a implementation of Datadog reporter.\n+A reporter which publishes metric values to Datadog monitoring service via Datadog HTTP API.\n+\n+#### Configurations\n+The following is an example of configuration as Datadog. The detailed configuration can refer to [here](configurations.html#datadog).\n+\n+```properties\n+hoodie.metrics.on=true\n+hoodie.metrics.reporter.type=DATADOG\n+hoodie.metrics.datadog.api.site=EU # or US\n+hoodie.metrics.datadog.api.key=<your api key>\n+hoodie.metrics.datadog.metric.prefix=<your metrics prefix>\n+```\n+\n+ * `hoodie.metrics.datadog.api.site` will sets the Datadog API site, It determines whether the requests will be sent to api.datadoghq.eu (EU) or api.datadoghq.com (US). Set this according to your Datadog account settings.\n+ * `hoodie.metrics.datadog.api.key` will set set the api key.\n+ * `hoodie.metrics.datadog.metric.prefix` will helps segregate metrics by setting different prefixes for different jobs.Note that it will use `.` to delimit the prefix and the metric name. For example, if the prefix is set to foo, then foo. will be prepended to the metric name.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIwMzM1NQ==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r453203355", "bodyText": "turn on -> turned on", "author": "leesf", "createdAt": "2020-07-11T15:03:59Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n+\n+### JmxMetricsReporter\n+\n+JmxMetricsReporter is a implementation of Jmx reporter, which used to report jmx metric.\n+\n+#### Configurations\n+The following is an example of configuration as JXM. The detailed configuration can refer to [here](configurations.html#jmx).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=JMX\n+  hoodie.metrics.jmx.host=192.168.0.106\n+  hoodie.metrics.jmx.port=4001\n+  ```\n+\n+#### Demo\n+As configuration above, Hudi metrics will started JMX server on port 4001. Then we can start jconsole to connect to 192.168.0.106:4001. Below is a sample of monitoring hudi jmx metrics through jconsole.\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_jxm_metrics.png\" alt=\"hudi_jxm_metrics.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+### MetricsGraphiteReporter\n+\n+MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.\n+\n+#### Configurations\n+The following is an example of configuration as GRAPHITE. The detailed configuration can refer to [here](configurations.html#graphite).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=GRAPHITE\n+  hoodie.metrics.graphite.host=192.168.0.106\n+  hoodie.metrics.graphite.port=2003\n+  hoodie.metrics.graphite.metric.prefix=<your metrics prefix>\n+  ```\n+#### Demo\n+As configuration above, we should first start graphite server on host 192.168.0.106 and port 2003, Hudi metrics will connect to graphite server, and report Hudi metrics to graphite server. Below is a sample of monitoring hudi metrics through graphite.\n+  <figure>\n+      <img class=\"docimage\" src=\"/assets/images/hudi_graphite_metrics.png\" alt=\"hudi_graphite_metrics.png\" style=\"max-width: 100%\" />\n+  </figure>\n+\n+### DatadogMetricsReporter\n+\n+DatadogMetricsReporter is a implementation of Datadog reporter.\n+A reporter which publishes metric values to Datadog monitoring service via Datadog HTTP API.\n+\n+#### Configurations\n+The following is an example of configuration as Datadog. The detailed configuration can refer to [here](configurations.html#datadog).\n+\n+```properties\n+hoodie.metrics.on=true\n+hoodie.metrics.reporter.type=DATADOG\n+hoodie.metrics.datadog.api.site=EU # or US\n+hoodie.metrics.datadog.api.key=<your api key>\n+hoodie.metrics.datadog.metric.prefix=<your metrics prefix>\n+```\n+\n+ * `hoodie.metrics.datadog.api.site` will sets the Datadog API site, It determines whether the requests will be sent to api.datadoghq.eu (EU) or api.datadoghq.com (US). Set this according to your Datadog account settings.\n+ * `hoodie.metrics.datadog.api.key` will set set the api key.\n+ * `hoodie.metrics.datadog.metric.prefix` will helps segregate metrics by setting different prefixes for different jobs.Note that it will use `.` to delimit the prefix and the metric name. For example, if the prefix is set to foo, then foo. will be prepended to the metric name.\n+\n+#### Demo\n+In this demo, we ran a `HoodieDeltaStreamer` job with metrics turn on and other configurations set properly.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MjI3Ng==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456772276", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n          \n          \n            \n            In this section, we will introduce `HoodieMetrics` and `MetricsReporter` in Hudi. You can view the metrics-related configurations [here](configurations.html#metrics-configs).", "author": "xushiyan", "createdAt": "2020-07-18T09:45:59Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MzI3MA==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456773270", "bodyText": "you meant to introduce HoodieMetrics right?", "author": "xushiyan", "createdAt": "2020-07-18T09:58:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MjI3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg1MjAyMA==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456852020", "bodyText": "Yes, thanks for you comments, I will fix it.", "author": "shenh062326", "createdAt": "2020-07-19T03:04:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MjI3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MjU4MA==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456772580", "bodyText": "configured with the right table and environment for metrics\n\nDo you think it'll be clearer to illustrate how to achieve this before moving on to the followings?", "author": "xushiyan", "createdAt": "2020-07-18T09:49:48Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3Mjc2MQ==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456772761", "bodyText": "produces the following graphite metrics\n\nWhy is it graphite metrics? this is implementation-agnostic metrics right?", "author": "xushiyan", "createdAt": "2020-07-18T09:51:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MjU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg1OTY1OA==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456859658", "bodyText": "configured with the right table and environment for metrics\n\nDo you think it'll be clearer to illustrate how to achieve this before moving on to the followings?\n\nI will move this part to the end.", "author": "shenh062326", "createdAt": "2020-07-19T04:55:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MjU4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MzMyNw==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456773327", "bodyText": "Did you mean to introduce HoodieMetrics ? if so, please align on the class name for the section", "author": "xushiyan", "createdAt": "2020-07-18T09:59:09Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg1OTc4OQ==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456859789", "bodyText": "Yes, I will use HoodieMetrics instand of Metrics.", "author": "shenh062326", "createdAt": "2020-07-19T04:57:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MzMyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MzQ4MQ==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456773481", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n          \n          \n            \n             - **Commit Duration** - the amount of time it took to successfully commit a batch of records", "author": "xushiyan", "createdAt": "2020-07-18T10:00:54Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MzU4OQ==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456773589", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n          \n          \n            \n             - **Rollback Duration** - Similarly, the amount of time taken to undo partial data left over by a failed commit (rollback happens automatically after a failing write)", "author": "xushiyan", "createdAt": "2020-07-18T10:02:07Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3Mzg1Mw==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456773853", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * `hoodie.metrics.datadog.api.site` will set the Datadog API site, It determines whether the requests will be sent to api.datadoghq.eu (EU) or api.datadoghq.com (US). Set this according to your Datadog account settings.\n          \n          \n            \n             * `hoodie.metrics.datadog.api.site` will set the Datadog API site, which determines whether the requests will be sent to api.datadoghq.eu (EU) or api.datadoghq.com (US). Set this according to your Datadog account settings.", "author": "xushiyan", "createdAt": "2020-07-18T10:05:11Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n+\n+### JmxMetricsReporter\n+\n+JmxMetricsReporter is a implementation of Jmx reporter, which used to report jmx metric.\n+\n+#### Configurations\n+The following is an example of configuration as JXM. The detailed configuration can refer to [here](configurations.html#jmx).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=JMX\n+  hoodie.metrics.jmx.host=192.168.0.106\n+  hoodie.metrics.jmx.port=4001\n+  ```\n+\n+#### Demo\n+As configuration above, Hudi metrics will started JMX server on port 4001. Then we can start jconsole to connect to 192.168.0.106:4001. Below is a sample of monitoring hudi jmx metrics through jconsole.\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_jxm_metrics.png\" alt=\"hudi_jxm_metrics.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+### MetricsGraphiteReporter\n+\n+MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.\n+\n+#### Configurations\n+The following is an example of configuration as GRAPHITE. The detailed configuration can refer to [here](configurations.html#graphite).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=GRAPHITE\n+  hoodie.metrics.graphite.host=192.168.0.106\n+  hoodie.metrics.graphite.port=2003\n+  hoodie.metrics.graphite.metric.prefix=<your metrics prefix>\n+  ```\n+#### Demo\n+As configuration above, we should first start graphite server on host 192.168.0.106 and port 2003, Hudi metrics will connect to graphite server, and report Hudi metrics to graphite server. Below is a sample of monitoring hudi metrics through graphite.\n+  <figure>\n+      <img class=\"docimage\" src=\"/assets/images/hudi_graphite_metrics.png\" alt=\"hudi_graphite_metrics.png\" style=\"max-width: 100%\" />\n+  </figure>\n+\n+### DatadogMetricsReporter\n+\n+DatadogMetricsReporter is a implementation of Datadog reporter.\n+A reporter which publishes metric values to Datadog monitoring service via Datadog HTTP API.\n+\n+#### Configurations\n+The following is an example of configuration as Datadog. The detailed configuration can refer to [here](configurations.html#datadog).\n+\n+```properties\n+hoodie.metrics.on=true\n+hoodie.metrics.reporter.type=DATADOG\n+hoodie.metrics.datadog.api.site=EU # or US\n+hoodie.metrics.datadog.api.key=<your api key>\n+hoodie.metrics.datadog.metric.prefix=<your metrics prefix>\n+```\n+\n+ * `hoodie.metrics.datadog.api.site` will set the Datadog API site, It determines whether the requests will be sent to api.datadoghq.eu (EU) or api.datadoghq.com (US). Set this according to your Datadog account settings.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3MzkzMA==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456773930", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * `hoodie.metrics.datadog.metric.prefix` will help segregate metrics by setting different prefixes for different jobs.Note that it will use `.` to delimit the prefix and the metric name. For example, if the prefix is set to foo, then foo. will be prepended to the metric name.\n          \n          \n            \n             * `hoodie.metrics.datadog.metric.prefix` will help segregate metrics by setting different prefixes for different jobs. Note that it will use `.` to delimit the prefix and the metric name. For example, if the prefix is set to `foo`, then `foo.` will be prepended to the metric name.", "author": "xushiyan", "createdAt": "2020-07-18T10:06:04Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n+\n+### JmxMetricsReporter\n+\n+JmxMetricsReporter is a implementation of Jmx reporter, which used to report jmx metric.\n+\n+#### Configurations\n+The following is an example of configuration as JXM. The detailed configuration can refer to [here](configurations.html#jmx).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=JMX\n+  hoodie.metrics.jmx.host=192.168.0.106\n+  hoodie.metrics.jmx.port=4001\n+  ```\n+\n+#### Demo\n+As configuration above, Hudi metrics will started JMX server on port 4001. Then we can start jconsole to connect to 192.168.0.106:4001. Below is a sample of monitoring hudi jmx metrics through jconsole.\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_jxm_metrics.png\" alt=\"hudi_jxm_metrics.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+### MetricsGraphiteReporter\n+\n+MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.\n+\n+#### Configurations\n+The following is an example of configuration as GRAPHITE. The detailed configuration can refer to [here](configurations.html#graphite).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=GRAPHITE\n+  hoodie.metrics.graphite.host=192.168.0.106\n+  hoodie.metrics.graphite.port=2003\n+  hoodie.metrics.graphite.metric.prefix=<your metrics prefix>\n+  ```\n+#### Demo\n+As configuration above, we should first start graphite server on host 192.168.0.106 and port 2003, Hudi metrics will connect to graphite server, and report Hudi metrics to graphite server. Below is a sample of monitoring hudi metrics through graphite.\n+  <figure>\n+      <img class=\"docimage\" src=\"/assets/images/hudi_graphite_metrics.png\" alt=\"hudi_graphite_metrics.png\" style=\"max-width: 100%\" />\n+  </figure>\n+\n+### DatadogMetricsReporter\n+\n+DatadogMetricsReporter is a implementation of Datadog reporter.\n+A reporter which publishes metric values to Datadog monitoring service via Datadog HTTP API.\n+\n+#### Configurations\n+The following is an example of configuration as Datadog. The detailed configuration can refer to [here](configurations.html#datadog).\n+\n+```properties\n+hoodie.metrics.on=true\n+hoodie.metrics.reporter.type=DATADOG\n+hoodie.metrics.datadog.api.site=EU # or US\n+hoodie.metrics.datadog.api.key=<your api key>\n+hoodie.metrics.datadog.metric.prefix=<your metrics prefix>\n+```\n+\n+ * `hoodie.metrics.datadog.api.site` will set the Datadog API site, It determines whether the requests will be sent to api.datadoghq.eu (EU) or api.datadoghq.com (US). Set this according to your Datadog account settings.\n+ * `hoodie.metrics.datadog.api.key` will set the api key.\n+ * `hoodie.metrics.datadog.metric.prefix` will help segregate metrics by setting different prefixes for different jobs.Note that it will use `.` to delimit the prefix and the metric name. For example, if the prefix is set to foo, then foo. will be prepended to the metric name.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3NDA1Mg==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456774052", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.\n          \n          \n            \n            MetricsGraphiteReporter is an implementation of Graphite reporter, which connects to a Graphite server and send metrics to it.", "author": "xushiyan", "createdAt": "2020-07-18T10:07:55Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n+\n+### JmxMetricsReporter\n+\n+JmxMetricsReporter is a implementation of Jmx reporter, which used to report jmx metric.\n+\n+#### Configurations\n+The following is an example of configuration as JXM. The detailed configuration can refer to [here](configurations.html#jmx).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=JMX\n+  hoodie.metrics.jmx.host=192.168.0.106\n+  hoodie.metrics.jmx.port=4001\n+  ```\n+\n+#### Demo\n+As configuration above, Hudi metrics will started JMX server on port 4001. Then we can start jconsole to connect to 192.168.0.106:4001. Below is a sample of monitoring hudi jmx metrics through jconsole.\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_jxm_metrics.png\" alt=\"hudi_jxm_metrics.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+### MetricsGraphiteReporter\n+\n+MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3NDE1OA==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456774158", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The following is an example of configuration as GRAPHITE. The detailed configuration can refer to [here](configurations.html#graphite).\n          \n          \n            \n            The following is an example of `MetricsGraphiteReporter`. More detailed configurations can be referenced [here](configurations.html#graphite).", "author": "xushiyan", "createdAt": "2020-07-18T10:09:15Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n+\n+### JmxMetricsReporter\n+\n+JmxMetricsReporter is a implementation of Jmx reporter, which used to report jmx metric.\n+\n+#### Configurations\n+The following is an example of configuration as JXM. The detailed configuration can refer to [here](configurations.html#jmx).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=JMX\n+  hoodie.metrics.jmx.host=192.168.0.106\n+  hoodie.metrics.jmx.port=4001\n+  ```\n+\n+#### Demo\n+As configuration above, Hudi metrics will started JMX server on port 4001. Then we can start jconsole to connect to 192.168.0.106:4001. Below is a sample of monitoring hudi jmx metrics through jconsole.\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_jxm_metrics.png\" alt=\"hudi_jxm_metrics.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+### MetricsGraphiteReporter\n+\n+MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.\n+\n+#### Configurations\n+The following is an example of configuration as GRAPHITE. The detailed configuration can refer to [here](configurations.html#graphite).", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3NDcwMA==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456774700", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            As configuration above, we should first start graphite server on host 192.168.0.106 and port 2003, Hudi metrics will connect to graphite server, and report Hudi metrics to graphite server. Below is a sample of monitoring hudi metrics through graphite.\n          \n          \n            \n            As configured above, assuming a Graphite server is running on host 192.168.0.106 and port 2003, a running Hudi job will connect and report metrics data to it. Below is an illustration of monitoring Hudi metrics through Graphite.", "author": "xushiyan", "createdAt": "2020-07-18T10:15:51Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n+\n+### JmxMetricsReporter\n+\n+JmxMetricsReporter is a implementation of Jmx reporter, which used to report jmx metric.\n+\n+#### Configurations\n+The following is an example of configuration as JXM. The detailed configuration can refer to [here](configurations.html#jmx).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=JMX\n+  hoodie.metrics.jmx.host=192.168.0.106\n+  hoodie.metrics.jmx.port=4001\n+  ```\n+\n+#### Demo\n+As configuration above, Hudi metrics will started JMX server on port 4001. Then we can start jconsole to connect to 192.168.0.106:4001. Below is a sample of monitoring hudi jmx metrics through jconsole.\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_jxm_metrics.png\" alt=\"hudi_jxm_metrics.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+### MetricsGraphiteReporter\n+\n+MetricsGraphiteReporter is a implementation of Graphite reporter, which connects to the Graphite server, and send metrics to that server.\n+\n+#### Configurations\n+The following is an example of configuration as GRAPHITE. The detailed configuration can refer to [here](configurations.html#graphite).\n+\n+  ```properties\n+  hoodie.metrics.on=true\n+  hoodie.metrics.reporter.type=GRAPHITE\n+  hoodie.metrics.graphite.host=192.168.0.106\n+  hoodie.metrics.graphite.port=2003\n+  hoodie.metrics.graphite.metric.prefix=<your metrics prefix>\n+  ```\n+#### Demo\n+As configuration above, we should first start graphite server on host 192.168.0.106 and port 2003, Hudi metrics will connect to graphite server, and report Hudi metrics to graphite server. Below is a sample of monitoring hudi metrics through graphite.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc3NDg4Ng==", "url": "https://github.com/apache/hudi/pull/1769#discussion_r456774886", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.\n          \n          \n            \n            MetricsReporter provides APIs for reporting metrics to user-specified backends. Currently, the implementations include InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.", "author": "xushiyan", "createdAt": "2020-07-18T10:18:29Z", "path": "docs/_docs/2_8_metrics.md", "diffHunk": "@@ -0,0 +1,108 @@\n+---\n+title: Metrics Guide\n+keywords: hudi, administration, operation, devops, metrics\n+permalink: /docs/metrics.html\n+summary: This section offers an overview of metrics in Hudi\n+toc: true\n+last_modified_at: 2020-06-20T15:59:57-04:00\n+---\n+\n+In this section, We will introduce the metrics and metricsReporter in Hudi. You can view the metrics configuration [here](configurations.html#metrics-configs).\n+\n+## Metrics\n+\n+Once the Hudi writer is configured with the right table and environment for metrics, it produces the following graphite metrics, that aid in debugging hudi tables\n+\n+ - **Commit Duration** - This is amount of time it took to successfully commit a batch of records\n+ - **Rollback Duration** - Similarly, amount of time taken to undo partial data left over by a failed commit (happens everytime automatically after a failing write)\n+ - **File Level metrics** - Shows the amount of new files added, versions, deleted (cleaned) in each commit\n+ - **Record Level Metrics** - Total records inserted/updated etc per commit\n+ - **Partition Level metrics** - number of partitions upserted (super useful to understand sudden spikes in commit duration)\n+\n+These metrics can then be plotted on a standard tool like grafana. Below is a sample commit duration chart.\n+\n+<figure>\n+    <img class=\"docimage\" src=\"/assets/images/hudi_commit_duration.png\" alt=\"hudi_commit_duration.png\" style=\"max-width: 100%\" />\n+</figure>\n+\n+## MetricsReporter\n+\n+MetricsReporter is a interface for report metrics to user specified place. Currently, it's implementations has InMemoryMetricsReporter, JmxMetricsReporter, MetricsGraphiteReporter and DatadogMetricsReporter. Since InMemoryMetricsReporter is only used for testing, we will introduce the other three implementations.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8b6d2c8ceae45c32897b3f5189d305bd9257a4e4", "url": "https://github.com/apache/hudi/commit/8b6d2c8ceae45c32897b3f5189d305bd9257a4e4", "message": "[DOC] Add document for the use of metrics system in Hudi.", "committedDate": "2020-07-19T05:28:33Z", "type": "commit"}, {"oid": "8b6d2c8ceae45c32897b3f5189d305bd9257a4e4", "url": "https://github.com/apache/hudi/commit/8b6d2c8ceae45c32897b3f5189d305bd9257a4e4", "message": "[DOC] Add document for the use of metrics system in Hudi.", "committedDate": "2020-07-19T05:28:33Z", "type": "forcePushed"}]}