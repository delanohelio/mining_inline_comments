{"pr_number": 2278, "pr_title": "[HUDI-1412] Make HoodieWriteConfig support setting different default \u2026", "pr_createdAt": "2020-11-24T14:40:33Z", "pr_url": "https://github.com/apache/hudi/pull/2278", "timeline": [{"oid": "40c6d2374dabac1586fc50d56659c36b907735e1", "url": "https://github.com/apache/hudi/commit/40c6d2374dabac1586fc50d56659c36b907735e1", "message": "[HUDI-1412] Make HoodieWriteConfig support setting different default value according to engine type", "committedDate": "2020-11-24T14:44:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU0NjQzNQ==", "url": "https://github.com/apache/hudi/pull/2278#discussion_r531546435", "bodyText": "Can we put this definition into hudi-client-common?", "author": "yanghua", "createdAt": "2020-11-27T11:30:24Z", "path": "hudi-common/src/main/java/org/apache/hudi/common/model/EngineType.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.hudi.common.model;\n+\n+/**\n+ * Hoodie data processing engine. support only Apache Spark and Apache Flink for now.\n+ */\n+public enum EngineType {", "originalCommit": "40c6d2374dabac1586fc50d56659c36b907735e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTgzMDU2Ng==", "url": "https://github.com/apache/hudi/pull/2278#discussion_r531830566", "bodyText": "@yanghua EngineType is an attribute of DefaultHoodieConfig, should be place in hudi-common", "author": "wangxianghu", "createdAt": "2020-11-28T03:53:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU0NjQzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTg5NDYyNg==", "url": "https://github.com/apache/hudi/pull/2278#discussion_r535894626", "bodyText": "Can we put this definition into hudi-client-common?\n\nplease take another look when free", "author": "wangxianghu", "createdAt": "2020-12-04T07:39:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU0NjQzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjIwMDE5MA==", "url": "https://github.com/apache/hudi/pull/2278#discussion_r532200190", "bodyText": "Are there other configurations that are different in different engines, and if there are many, are they easy to implement in this way?", "author": "shenh062326", "createdAt": "2020-11-29T12:06:22Z", "path": "hudi-client/hudi-client-common/src/main/java/org/apache/hudi/config/HoodieIndexConfig.java", "diffHunk": "@@ -278,5 +299,16 @@ public HoodieIndexConfig build() {\n       HoodieIndex.IndexType.valueOf(props.getProperty(INDEX_TYPE_PROP));\n       return config;\n     }\n+\n+    private String getDefaultIndexType(EngineType engineType) {\n+      switch (engineType) {", "originalCommit": "40c6d2374dabac1586fc50d56659c36b907735e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjIwNTA4OA==", "url": "https://github.com/apache/hudi/pull/2278#discussion_r532205088", "bodyText": "Are there other configurations that are different in different engines, and if there are many, are they easy to implement in this way?\n\nCurrently, I recognized this only as I am working on flink index.\nI think it is simple, just add a check step before initialized it.\nthis way should be ok.", "author": "wangxianghu", "createdAt": "2020-11-29T12:47:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjIwMDE5MA=="}], "type": "inlineReview"}, {"oid": "58ef8d6b8bbcda89adfe6d2e54e73ddbe9c994a1", "url": "https://github.com/apache/hudi/commit/58ef8d6b8bbcda89adfe6d2e54e73ddbe9c994a1", "message": "[HUDI-1412] Make HoodieWriteConfig support setting different default value according to engine type", "committedDate": "2020-12-04T08:06:41Z", "type": "commit"}, {"oid": "f1d818e49c7f7f47e2655eac69b17594ded5b502", "url": "https://github.com/apache/hudi/commit/f1d818e49c7f7f47e2655eac69b17594ded5b502", "message": "move EngineType to hudi-client-common modeule", "committedDate": "2020-12-04T08:10:31Z", "type": "commit"}, {"oid": "f1d818e49c7f7f47e2655eac69b17594ded5b502", "url": "https://github.com/apache/hudi/commit/f1d818e49c7f7f47e2655eac69b17594ded5b502", "message": "move EngineType to hudi-client-common modeule", "committedDate": "2020-12-04T08:10:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjE0ODg0NA==", "url": "https://github.com/apache/hudi/pull/2278#discussion_r536148844", "bodyText": "how about adding a method withEngineType() instead of making it a Builder constructor param?", "author": "leesf", "createdAt": "2020-12-04T14:43:58Z", "path": "hudi-client/hudi-client-common/src/main/java/org/apache/hudi/config/HoodieWriteConfig.java", "diffHunk": "@@ -789,6 +809,14 @@ public Long getMaxMemoryPerPartitionMerge() {\n     private boolean isConsistencyGuardSet = false;\n     private boolean isCallbackConfigSet = false;\n \n+    public Builder() {\n+      this(EngineType.SPARK);\n+    }\n+\n+    public Builder(EngineType engineType) {", "originalCommit": "f1d818e49c7f7f47e2655eac69b17594ded5b502", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjUyMjcwNw==", "url": "https://github.com/apache/hudi/pull/2278#discussion_r536522707", "bodyText": "how about adding a method withEngineType() instead of making it a Builder constructor param?\n\ndone", "author": "wangxianghu", "createdAt": "2020-12-05T05:59:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjE0ODg0NA=="}], "type": "inlineReview"}, {"oid": "2d1275ff8ec12d50239dbc2ae4f6aad4127171fb", "url": "https://github.com/apache/hudi/commit/2d1275ff8ec12d50239dbc2ae4f6aad4127171fb", "message": "add withEngineType to Builder", "committedDate": "2020-12-05T06:04:46Z", "type": "commit"}, {"oid": "2d1275ff8ec12d50239dbc2ae4f6aad4127171fb", "url": "https://github.com/apache/hudi/commit/2d1275ff8ec12d50239dbc2ae4f6aad4127171fb", "message": "add withEngineType to Builder", "committedDate": "2020-12-05T06:04:46Z", "type": "forcePushed"}]}