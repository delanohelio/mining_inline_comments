{"pr_number": 1792, "pr_title": "[HUDI-802] Fixing deletes for inserts in same batch in write path", "pr_createdAt": "2020-07-04T14:00:53Z", "pr_url": "https://github.com/apache/hudi/pull/1792", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM0MzAzMg==", "url": "https://github.com/apache/hudi/pull/1792#discussion_r450343032", "bodyText": "Trying to understand what we are really fixing here...\nIf there were an insert and delete in the same batch, precombining favors delete, then we actually skip the record and not do the insert?", "author": "vinothchandar", "createdAt": "2020-07-06T16:32:59Z", "path": "hudi-common/src/main/java/org/apache/hudi/common/model/OverwriteWithLatestAvroPayload.java", "diffHunk": "@@ -59,24 +59,28 @@ public OverwriteWithLatestAvroPayload preCombine(OverwriteWithLatestAvroPayload\n \n   @Override\n   public Option<IndexedRecord> combineAndGetUpdateValue(IndexedRecord currentValue, Schema schema) throws IOException {\n+    return getInsertValue(schema);\n+  }\n \n-    Option<IndexedRecord> recordOption = getInsertValue(schema);\n-    if (!recordOption.isPresent()) {\n+  @Override\n+  public Option<IndexedRecord> getInsertValue(Schema schema) throws IOException {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU4MzM3OA==", "url": "https://github.com/apache/hudi/pull/1792#discussion_r451583378", "bodyText": "have updated the description.", "author": "nsivabalan", "createdAt": "2020-07-08T14:21:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM0MzAzMg=="}], "type": "inlineReview"}, {"oid": "28264931067eb20064e58452144a2bee448fcf13", "url": "https://github.com/apache/hudi/commit/28264931067eb20064e58452144a2bee448fcf13", "message": "Fixing deletes for inserts in same batch in write path", "committedDate": "2020-07-10T11:46:56Z", "type": "forcePushed"}, {"oid": "34f31c4d68f21a0fb239f0508d0374e4d2ea3924", "url": "https://github.com/apache/hudi/commit/34f31c4d68f21a0fb239f0508d0374e4d2ea3924", "message": "Fixing deletes for inserts in same batch in write path", "committedDate": "2020-07-22T03:23:48Z", "type": "commit"}, {"oid": "c170bf35c122c2d4bb60fe4ed22ef8e9d6512245", "url": "https://github.com/apache/hudi/commit/c170bf35c122c2d4bb60fe4ed22ef8e9d6512245", "message": "Fixing delta streamer tests", "committedDate": "2020-07-22T03:23:53Z", "type": "commit"}, {"oid": "d18b4096e82e31b34be73cf406b316296ee29f8f", "url": "https://github.com/apache/hudi/commit/d18b4096e82e31b34be73cf406b316296ee29f8f", "message": "Adding tests for OverwriteWithLatestAvroPayload", "committedDate": "2020-07-22T03:23:53Z", "type": "forcePushed"}, {"oid": "fa21405d06b884664a98a5d37ffec720214f5881", "url": "https://github.com/apache/hudi/commit/fa21405d06b884664a98a5d37ffec720214f5881", "message": "Adding tests for OverwriteWithLatestAvroPayload", "committedDate": "2020-07-22T11:15:22Z", "type": "commit"}, {"oid": "fa21405d06b884664a98a5d37ffec720214f5881", "url": "https://github.com/apache/hudi/commit/fa21405d06b884664a98a5d37ffec720214f5881", "message": "Adding tests for OverwriteWithLatestAvroPayload", "committedDate": "2020-07-22T11:15:22Z", "type": "forcePushed"}]}