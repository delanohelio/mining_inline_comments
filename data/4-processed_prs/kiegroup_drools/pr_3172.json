{"pr_number": 3172, "pr_title": "DROOLS-5740 Fix CMEs when building KieBase", "pr_createdAt": "2020-10-19T13:42:47Z", "pr_url": "https://github.com/kiegroup/drools/pull/3172", "timeline": [{"oid": "0ecf1a3aab90e305c113d18b926c97c22b3db46d", "url": "https://github.com/kiegroup/drools/commit/0ecf1a3aab90e305c113d18b926c97c22b3db46d", "message": "DROOLS-5740 Fix CME in DrlxParseUtil.getAccessor()", "committedDate": "2020-10-19T13:40:07Z", "type": "commit"}, {"oid": "6e17328a9268f80b9b6595e1c2a235f05bc29d90", "url": "https://github.com/kiegroup/drools/commit/6e17328a9268f80b9b6595e1c2a235f05bc29d90", "message": "DROOLS-5740 Fix CME in CanonicalKieModule", "committedDate": "2020-10-19T13:41:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MjU5OA==", "url": "https://github.com/kiegroup/drools/pull/3172#discussion_r507782598", "bodyText": "@triceo I understand that you need the other Map to be a concurrent one since it is static and than the same for all threads, but if you're building different projects in parallel you should have different instances of the CanonicalKieModule and then of this Map. Am I missing something? Did you experience concurrency problems also here?", "author": "mariofusco", "createdAt": "2020-10-19T14:13:01Z", "path": "drools-model/drools-model-compiler/src/main/java/org/drools/modelcompiler/CanonicalKieModule.java", "diffHunk": "@@ -116,7 +117,7 @@\n     };\n \n     private final InternalKieModule internalKieModule;\n-    private final Map<String, CanonicalKiePackages> pkgsInKbase = new HashMap<>();\n+    private final ConcurrentMap<String, CanonicalKiePackages> pkgsInKbase = new ConcurrentHashMap<>();", "originalCommit": "6e17328a9268f80b9b6595e1c2a235f05bc29d90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MzIwNQ==", "url": "https://github.com/kiegroup/drools/pull/3172#discussion_r507783205", "bodyText": "Yes, I have, see the JIRA for stack trace.", "author": "triceo", "createdAt": "2020-10-19T14:13:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc4MjU5OA=="}], "type": "inlineReview"}]}