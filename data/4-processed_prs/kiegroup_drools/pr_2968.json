{"pr_number": 2968, "pr_title": "[DROOLS-5410] Externalize lambda for accumulate", "pr_createdAt": "2020-07-01T08:52:37Z", "pr_url": "https://github.com/kiegroup/drools/pull/2968", "timeline": [{"oid": "5ae23415962e5d38046b72532cea75e9130ee4d2", "url": "https://github.com/kiegroup/drools/commit/5ae23415962e5d38046b72532cea75e9130ee4d2", "message": "[DROOLS-5410] Externalize lambda for accumulate", "committedDate": "2020-07-01T08:48:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIxODQzOA==", "url": "https://github.com/kiegroup/drools/pull/2968#discussion_r448218438", "bodyText": "This is the main fix. Just to add a type so that ExecModelLambdaPostProcessor can externalize the lambda later.", "author": "tkobayas", "createdAt": "2020-07-01T08:55:31Z", "path": "drools-model/drools-model-compiler/src/main/java/org/drools/modelcompiler/builder/generator/visitor/accumulate/AccumulateVisitor.java", "diffHunk": "@@ -475,7 +476,7 @@ private String getRootNodeName(DrlxParseUtil.RemoveRootNodeResult methodCallWith\n     Expression buildConstraintExpression(Expression expr, Collection<String> usedDeclarations) {\n         LambdaExpr lambdaExpr = new LambdaExpr();\n         lambdaExpr.setEnclosingParameters(true);\n-        usedDeclarations.stream().map(s -> new Parameter(new UnknownType(), s)).forEach(lambdaExpr::addParameter);\n+        usedDeclarations.stream().map(s -> new Parameter(context.getDelarationType(s), s)).forEach(lambdaExpr::addParameter);", "originalCommit": "5ae23415962e5d38046b72532cea75e9130ee4d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ed2221c666cf9d7a48b9260fb2f55359b208018d", "url": "https://github.com/kiegroup/drools/commit/ed2221c666cf9d7a48b9260fb2f55359b208018d", "message": "- Fixed code smells", "committedDate": "2020-07-02T09:46:42Z", "type": "commit"}, {"oid": "bc42bb123fc213e6723ac5404603dd5c9c444be5", "url": "https://github.com/kiegroup/drools/commit/bc42bb123fc213e6723ac5404603dd5c9c444be5", "message": "Merge branch 'master' into DROOLS-5410", "committedDate": "2020-07-03T05:57:16Z", "type": "commit"}]}