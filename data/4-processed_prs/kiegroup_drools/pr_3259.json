{"pr_number": 3259, "pr_title": "[DROOLS-5849] Fix jdk11 jaxb configuration for kie-dmn-pmml-tests-trusty", "pr_createdAt": "2020-11-23T19:41:50Z", "pr_url": "https://github.com/kiegroup/drools/pull/3259", "timeline": [{"oid": "f8a4b7695aee29164619911ecf3db8040c334e7d", "url": "https://github.com/kiegroup/drools/commit/f8a4b7695aee29164619911ecf3db8040c334e7d", "message": "Fix jaxb configuration for jdk-11", "committedDate": "2020-11-23T19:36:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAyMzYyOA==", "url": "https://github.com/kiegroup/drools/pull/3259#discussion_r529023628", "bodyText": "I'm not sure I understand this fix, shouldn't the usual 4 dependencies be included if JDK detected is a >=11 ?", "author": "tarilabs", "createdAt": "2020-11-23T22:00:10Z", "path": "kie-dmn/kie-dmn-pmml-tests-parent/kie-dmn-pmml-tests-trusty/pom.xml", "diffHunk": "@@ -89,4 +67,19 @@\n       </dependency>\n     </dependencies>\n   </dependencyManagement>\n+\n+  <profiles>\n+    <profile>\n+      <id>java11-pmml</id>\n+      <activation>\n+        <jdk>[11,)</jdk>\n+      </activation>\n+      <dependencies>\n+        <dependency>\n+          <groupId>org.glassfish.jaxb</groupId>\n+          <artifactId>jaxb-runtime</artifactId>", "originalCommit": "f8a4b7695aee29164619911ecf3db8040c334e7d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTI5MjQ3MA==", "url": "https://github.com/kiegroup/drools/pull/3259#discussion_r529292470", "bodyText": "The problem is that both com.sun.xml.bind:jaxb-impl and org.glassfish.jaxb:jaxb-runtime provide jaxb interfaces and impl needed in jdk11 so the enforcer fails because of duplicated classes. kie-pmml-trusty already brings in the glassfish one so the possible fixes are:\n\nexclude transitive dependency from kie-pmml-trusty and keep here jaxb-impl etc: not sure it if works because as far as I remember kie-pmml-trusty works only with glassfish impl (probably because of jpmml-model but not sure)\nremove everything from this module and leverage the transitive dependency from kie-pmml-trusty: I prefer to declare external transitive dependencies\nchange glassfish dependency from kie-pmml-trusty to be not transitive (i.e. provided): this will require many more changes because ~all kie-pmml-trusty test modules need to be changed so I prefer to postpone a similar change to a future ticket\ndeclare here the same glassfish dependency to avoid the duplication that is what I did\n\nI also make this dependency active only if jdk>=11", "author": "danielezonca", "createdAt": "2020-11-24T08:36:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAyMzYyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU0NDU3Nw==", "url": "https://github.com/kiegroup/drools/pull/3259#discussion_r529544577", "bodyText": "i think it would be good to have the same profile name/id for jdk11 instead of java11_pmml", "author": "mareknovotny", "createdAt": "2020-11-24T13:29:07Z", "path": "kie-dmn/kie-dmn-pmml-tests-parent/kie-dmn-pmml-tests-trusty/pom.xml", "diffHunk": "@@ -89,4 +67,19 @@\n       </dependency>\n     </dependencies>\n   </dependencyManagement>\n+\n+  <profiles>\n+    <profile>\n+      <id>java11-pmml</id>", "originalCommit": "f8a4b7695aee29164619911ecf3db8040c334e7d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ0MDg5OQ==", "url": "https://github.com/kiegroup/drools/pull/3259#discussion_r531440899", "bodyText": "Done", "author": "danielezonca", "createdAt": "2020-11-27T08:13:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU0NDU3Nw=="}], "type": "inlineReview"}, {"oid": "7ce5c3563fcc8665be6b39dde61ab1cb37f8fd9f", "url": "https://github.com/kiegroup/drools/commit/7ce5c3563fcc8665be6b39dde61ab1cb37f8fd9f", "message": "Update pom.xml", "committedDate": "2020-11-27T08:12:51Z", "type": "commit"}]}