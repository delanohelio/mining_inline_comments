{"pr_number": 3097, "pr_title": "KOGITO-2277 fix OpenAPI schema for temporals", "pr_createdAt": "2020-09-14T10:39:51Z", "pr_url": "https://github.com/kiegroup/drools/pull/3097", "timeline": [{"oid": "e235f86f594b2a5a50c888d24c533d4e68d8bfd3", "url": "https://github.com/kiegroup/drools/commit/e235f86f594b2a5a50c888d24c533d4e68d8bfd3", "message": ".", "committedDate": "2020-09-11T16:58:20Z", "type": "commit"}, {"oid": "735ecfe92ead75682764b00b2076bc977d967a76", "url": "https://github.com/kiegroup/drools/commit/735ecfe92ead75682764b00b2076bc977d967a76", "message": "basic supports", "committedDate": "2020-09-11T19:49:18Z", "type": "commit"}, {"oid": "b3a7d284a5117ee587afbbb21f2857725f707199", "url": "https://github.com/kiegroup/drools/commit/b3a7d284a5117ee587afbbb21f2857725f707199", "message": "Support Swagger/OpenAPI for ARRAY<temporal>", "committedDate": "2020-09-12T13:03:02Z", "type": "commit"}, {"oid": "fdc6737c1189c1cd20e2369705bdaf344c9989e5", "url": "https://github.com/kiegroup/drools/commit/fdc6737c1189c1cd20e2369705bdaf344c9989e5", "message": "Support for io.swagger OAS v3 annotations", "committedDate": "2020-09-14T08:09:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzg1MDExMA==", "url": "https://github.com/kiegroup/drools/pull/3097#discussion_r487850110", "bodyText": "This if is too big for my taste, can you extract a method?", "author": "lucamolteni", "createdAt": "2020-09-14T11:47:36Z", "path": "kie-dmn/kie-dmn-core/src/main/java/org/kie/dmn/typesafe/DMNDeclaredField.java", "diffHunk": "@@ -114,6 +105,59 @@ public String getInitExpr() {\n             Optional<Class<?>> as = index.getJacksonDeserializeAs(fieldDMNType);\n             as.ifPresent(asClass -> annotations.add(new SimpleAnnotationDefinition(\"com.fasterxml.jackson.databind.annotation.JsonDeserialize\").addValue(\"as\", asClass.getCanonicalName() + \".class\")));\n         }\n+        if (codeGenConfig.isWithMPOpenApiAnnotation() || codeGenConfig.isWithIOSwaggerOASv3Annotation()) {\n+            if (getObjectType().equals(\"java.lang.String\") && fieldDMNType.getAllowedValues() != null && !fieldDMNType.getAllowedValues().isEmpty()) {\n+                String enumeration = fieldDMNType.getAllowedValues().stream()\n+                                                 .map(UnaryTestImpl.class::cast)\n+                                                 .map(UnaryTestImpl::toString)\n+                                                 .collect(Collectors.joining(\",\"));\n+                if (codeGenConfig.isWithMPOpenApiAnnotation()) {\n+                    annotations.add(new SimpleAnnotationDefinition(\"org.eclipse.microprofile.openapi.annotations.media.Schema\").addValue(\"name\", \"\\\"\" + originalMapKey + \"\\\"\")\n+                                                                                                                               .addValue(\"enumeration\", \"{\" + enumeration + \"}\"));\n+                }\n+                if (codeGenConfig.isWithIOSwaggerOASv3Annotation()) {\n+                    annotations.add(new SimpleAnnotationDefinition(\"io.swagger.v3.oas.annotations.media.Schema\").addValue(\"name\", \"\\\"\" + originalMapKey + \"\\\"\")\n+                                                                                                                .addValue(\"allowableValues\", \"{\" + enumeration + \"}\"));\n+                }\n+            } else {\n+                boolean isTemporal = DMNTypeUtils.isFEELBuiltInType(fieldDMNType) &&", "originalCommit": "fdc6737c1189c1cd20e2369705bdaf344c9989e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzg5MTAzMQ==", "url": "https://github.com/kiegroup/drools/pull/3097#discussion_r487891031", "bodyText": "commit 998e148 should implement as requested \ud83d\udc4d", "author": "tarilabs", "createdAt": "2020-09-14T12:57:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzg1MDExMA=="}], "type": "inlineReview"}, {"oid": "998e148462abde893c9cf658e964c0d9e2a59880", "url": "https://github.com/kiegroup/drools/commit/998e148462abde893c9cf658e964c0d9e2a59880", "message": "implement code review feedback", "committedDate": "2020-09-14T12:51:03Z", "type": "commit"}, {"oid": "697f095b0c74b7559a99c6bdec010698e9d133d6", "url": "https://github.com/kiegroup/drools/commit/697f095b0c74b7559a99c6bdec010698e9d133d6", "message": "implement code review feedback", "committedDate": "2020-09-14T16:22:09Z", "type": "commit"}]}