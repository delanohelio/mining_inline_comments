{"pr_number": 1970, "pr_title": "HADOOP-17004. ABFS: Improve the ABFS driver documentation", "pr_createdAt": "2020-04-20T19:13:33Z", "pr_url": "https://github.com/apache/hadoop/pull/1970", "timeline": [{"oid": "7d0660ab2eed6346185a863c7e0be1a4351126bf", "url": "https://github.com/apache/hadoop/commit/7d0660ab2eed6346185a863c7e0be1a4351126bf", "message": "ABFS; Improving documentation", "committedDate": "2020-04-20T19:10:42Z", "type": "commit"}, {"oid": "235fb1fd6f8fe3529368989061d4d8bb00e3ce69", "url": "https://github.com/apache/hadoop/commit/235fb1fd6f8fe3529368989061d4d8bb00e3ce69", "message": "Added 2 more configs", "committedDate": "2020-04-21T10:14:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA5Mjc2Mg==", "url": "https://github.com/apache/hadoop/pull/1970#discussion_r412092762", "bodyText": "account key config is already explained with an example in the above shared key section. Please cross check with the details above and if needed more comments can be added in respective place.", "author": "snvijaya", "createdAt": "2020-04-21T11:12:37Z", "path": "hadoop-tools/hadoop-azure/src/site/markdown/abfs.md", "diffHunk": "@@ -665,6 +665,79 @@ performance issues.\n Config `fs.azure.enable.check.access` needs to be set true to enable\n  the AzureBlobFileSystem.access().\n \n+### <a name=\"authconfigoptions\"></a> Auth Options\n+`fs.azure.account.key`: To set the account access key. Access keys can be used to authenticate the requests made from the ABFS driver to the Azure storage account.", "originalCommit": "235fb1fd6f8fe3529368989061d4d8bb00e3ce69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA5NjI2Ng==", "url": "https://github.com/apache/hadoop/pull/1970#discussion_r412096266", "bodyText": "Comment holds for other configs too, please check.", "author": "snvijaya", "createdAt": "2020-04-21T11:18:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA5Mjc2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ5NjQzNg==", "url": "https://github.com/apache/hadoop/pull/1970#discussion_r414496436", "bodyText": "Done", "author": "bilaharith", "createdAt": "2020-04-24T11:16:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA5Mjc2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjEwMDMwNQ==", "url": "https://github.com/apache/hadoop/pull/1970#discussion_r412100305", "bodyText": "Maybe provide more context to the feature and then list the relevant configs.", "author": "snvijaya", "createdAt": "2020-04-21T11:25:08Z", "path": "hadoop-tools/hadoop-azure/src/site/markdown/abfs.md", "diffHunk": "@@ -665,6 +665,79 @@ performance issues.\n Config `fs.azure.enable.check.access` needs to be set true to enable\n  the AzureBlobFileSystem.access().\n \n+### <a name=\"authconfigoptions\"></a> Auth Options\n+`fs.azure.account.key`: To set the account access key. Access keys can be used to authenticate the requests made from the ABFS driver to the Azure storage account.\n+\n+`fs.azure.account.keyprovider`: If a key provider class is provided the same will be used to get Storage Account key. Else the Simple key provider will be used which will use the given key from the config.\n+\n+`fs.azure.shellkeyprovider.script`: ShellDecryptionKeyProvider class invokes an external script that will perform the key decryption. The script path has to be set via this config.\n+\n+`fs.azure.enable.delegation.token`: To enable delegation token manager. Instantiates the class declared in fs.azure.delegation.token.provider.type and issues tokens from the same.\n+\n+`fs.azure.delegation.token.provider.type`: In case delegation token manager is enabled the AbfsDelegationTokenManager implementation specified in this config will be used as the AbfsDelegationTokenManager implementation.\n+\n+`fs.azure.sas.token.provider.type`: If the auth type is AuthType.SAS, instantiates the class declared in fs.azure.sas.token.provider.type and issues tokens from it.\n+\n+`fs.azure.account.auth.type`: To set the auth type to be used. Possible values:   SharedKey, OAuth, Custom, SAS.\n+\n+`fs.azure.account.oauth.provider.type`: To set the auth provider class to be used.\n+\n+`fs.azure.account.oauth2.client.id`: To set the OAuth AAD client id when ClientCredsTokenProvider is used.\n+\n+`fs.azure.account.oauth2.client.secret`: To set the OAuth AAD client secret when ClientCredsTokenProvider is used.\n+\n+`fs.azure.account.oauth2.client.endpoint`: To set the OAuth AAD client endpoint when ClientCredsTokenProvider is used.\n+\n+`fs.azure.account.oauth2.msi.tenant`: To set OAuth MSI tenant id when MSITokenProvider is used.\n+\n+`fs.azure.account.oauth2.msi.endpoint`: To set OAuth MSI endpoint when MSITokenProvider is used.\n+\n+`fs.azure.account.oauth2.msi.authority`: To set OAuth MSI authority when MSITokenProvider is used.\n+\n+`fs.azure.account.oauth2.user.name`: To set username when UserPasswordTokenProvider is used.\n+\n+`fs.azure.account.oauth2.user.password`: To set password when UserPasswordTokenProvider is used.\n+\n+`fs.azure.account.oauth2.refresh.token`: To set OAuth refreshtoken when RefreshTokenBasedTokenProvider is used.\n+\n+`fs.azure.account.oauth2.refresh.token.endpoint`: To set OAuth refresh token end point when RefreshTokenBasedTokenProvider is used.\n+\n+### <a name=\"featureconfigoptions\"></a> Feature Options", "originalCommit": "235fb1fd6f8fe3529368989061d4d8bb00e3ce69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQ5NjQ4OA==", "url": "https://github.com/apache/hadoop/pull/1970#discussion_r414496488", "bodyText": "Done", "author": "bilaharith", "createdAt": "2020-04-24T11:17:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjEwMDMwNQ=="}], "type": "inlineReview"}, {"oid": "6bc1f6eee013ce5be308cd1e6cca6ec29f9eec20", "url": "https://github.com/apache/hadoop/commit/6bc1f6eee013ce5be308cd1e6cca6ec29f9eec20", "message": "Addressing review comments", "committedDate": "2020-04-23T11:20:38Z", "type": "commit"}, {"oid": "7b0b64c7f477df19ba0710523c19f7d02b8213c5", "url": "https://github.com/apache/hadoop/commit/7b0b64c7f477df19ba0710523c19f7d02b8213c5", "message": "Improving the statements", "committedDate": "2020-04-23T11:58:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDQxMDQzMA==", "url": "https://github.com/apache/hadoop/pull/1970#discussion_r414410430", "bodyText": "indentation.", "author": "snvijaya", "createdAt": "2020-04-24T08:55:23Z", "path": "hadoop-tools/hadoop-azure/src/site/markdown/abfs.md", "diffHunk": "@@ -539,6 +563,20 @@ token when its `getAccessToken()` method is invoked.\n The declared class must implement `org.apache.hadoop.fs.azurebfs.extensions.CustomTokenProviderAdaptee`\n and optionally `org.apache.hadoop.fs.azurebfs.extensions.BoundDTExtension`.\n \n+#### <a name=\"delegationtokensupportconfigoptions\"></a> Delegation token support\n+\n+Delegation token support can be achieved by making the following config true\n+ `fs.azure.enable.delegation.token` and specifying the config\n+  CustomDelegationTokenManager to be used with the config `fs.azure.delegation.token.provider.type`.", "originalCommit": "7b0b64c7f477df19ba0710523c19f7d02b8213c5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "67e083c63a92308245b715cf8f517d6e1d3d3b93", "url": "https://github.com/apache/hadoop/commit/67e083c63a92308245b715cf8f517d6e1d3d3b93", "message": "Intendation fixes", "committedDate": "2020-04-24T13:32:15Z", "type": "commit"}, {"oid": "1fe72c03ac12181d27cb49207065b0228eef9bda", "url": "https://github.com/apache/hadoop/commit/1fe72c03ac12181d27cb49207065b0228eef9bda", "message": "Merge branch 'trunk' into HADOOP-17004-documentation", "committedDate": "2020-04-24T13:36:37Z", "type": "commit"}, {"oid": "1749c90dd983e3384a61dde60153891ecca8e62a", "url": "https://github.com/apache/hadoop/commit/1749c90dd983e3384a61dde60153891ecca8e62a", "message": "Merge branch 'trunk' into HADOOP-17004-documentation", "committedDate": "2020-04-27T09:58:55Z", "type": "commit"}, {"oid": "69f290f879a2bcb0170bc6aaa1ab74a1064db49c", "url": "https://github.com/apache/hadoop/commit/69f290f879a2bcb0170bc6aaa1ab74a1064db49c", "message": "checkstyle fix", "committedDate": "2020-04-27T10:26:58Z", "type": "commit"}, {"oid": "0ac08308199249c6ddb68819a014d74b03462603", "url": "https://github.com/apache/hadoop/commit/0ac08308199249c6ddb68819a014d74b03462603", "message": "Checkstyle fixes", "committedDate": "2020-04-27T16:07:29Z", "type": "commit"}, {"oid": "45860490c9b7bf9e746c7faa2b5258009044f57c", "url": "https://github.com/apache/hadoop/commit/45860490c9b7bf9e746c7faa2b5258009044f57c", "message": "Fixed tab issues", "committedDate": "2020-05-12T17:23:16Z", "type": "commit"}, {"oid": "857ef38e3ab2ce87d22adc97e3b614827be7299c", "url": "https://github.com/apache/hadoop/commit/857ef38e3ab2ce87d22adc97e3b614827be7299c", "message": "Merge branch 'trunk' into HADOOP-17004-documentation", "committedDate": "2020-05-13T06:30:12Z", "type": "commit"}]}