{"pr_number": 2077, "pr_title": "MAPREDUCE-7281. Fix NoClassDefFoundError on 'mapred minicluster'.", "pr_createdAt": "2020-06-17T08:10:17Z", "pr_url": "https://github.com/apache/hadoop/pull/2077", "timeline": [{"oid": "c5b95fd2456eace908fb9dddfc0eba0e614b7c0f", "url": "https://github.com/apache/hadoop/commit/c5b95fd2456eace908fb9dddfc0eba0e614b7c0f", "message": "MAPREDUCE-7281. Fix NoClassDefFoundError on 'mapred minicluster'.", "committedDate": "2020-06-17T08:08:13Z", "type": "commit"}, {"oid": "0f37a885d1f013f766028643eab77c424798c1cf", "url": "https://github.com/apache/hadoop/commit/0f37a885d1f013f766028643eab77c424798c1cf", "message": "fix for HADOOP_TOOLS_LIB_JARS_DIR containing whitespace.", "committedDate": "2020-06-17T10:51:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk1NjY2Mw==", "url": "https://github.com/apache/hadoop/pull/2077#discussion_r441956663", "bodyText": "I think echo is not required and the following is sufficient:\njunitjar=\"${HADOOP_TOOLS_LIB_JARS_DIR}/junit-[0-9]*.jar\"\n\ntesting:\nbash-5.0$ arg1=\"foo bar\"\nbash-5.0$ echo \"$arg1\"\nfoo bar\nbash-5.0$ arg2=\"${arg1}/junit-[0-9]*.jar\"\nbash-5.0$ echo \"$arg2\"\nfoo bar/junit-[0-9]*.jar\n\n${junitjar} must be double-quoted.", "author": "aajisaka", "createdAt": "2020-06-18T04:06:12Z", "path": "hadoop-mapreduce-project/bin/mapred", "diffHunk": "@@ -105,6 +105,8 @@ function mapredcmd_case\n     minicluster)\n       hadoop_add_classpath \"${HADOOP_YARN_HOME}/${YARN_DIR}/timelineservice\"'/*'\n       hadoop_add_classpath \"${HADOOP_YARN_HOME}/${YARN_DIR}/test\"'/*'\n+      junitjar=$(echo \"${HADOOP_TOOLS_LIB_JARS_DIR}\"/junit-[0-9]*.jar)", "originalCommit": "0f37a885d1f013f766028643eab77c424798c1cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk2MDEyMg==", "url": "https://github.com/apache/hadoop/pull/2077#discussion_r441960122", "bodyText": "Sorry, echo is required to resolve the jar file.", "author": "aajisaka", "createdAt": "2020-06-18T04:22:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk1NjY2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk3MDA3OA==", "url": "https://github.com/apache/hadoop/pull/2077#discussion_r441970078", "bodyText": "We need shell filename expansion before adding the path to CLASSPATH. Java only accepts /path/to/* wildcard.", "author": "iwasakims", "createdAt": "2020-06-18T05:04:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk1NjY2Mw=="}], "type": "inlineReview"}]}