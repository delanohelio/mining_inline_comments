{"pr_number": 2051, "pr_title": "HDFS-15385 Upgrade boost library to 1.72", "pr_createdAt": "2020-06-03T16:30:20Z", "pr_url": "https://github.com/apache/hadoop/pull/2051", "timeline": [{"oid": "12f58aeda4b176b5b8220f9007e5231ec4659439", "url": "https://github.com/apache/hadoop/commit/12f58aeda4b176b5b8220f9007e5231ec4659439", "message": "HDFS-15385 Upgrade boost library", "committedDate": "2020-06-04T06:37:03Z", "type": "forcePushed"}, {"oid": "988edced0943a2b66f096b2cbedb1129fc1d741e", "url": "https://github.com/apache/hadoop/commit/988edced0943a2b66f096b2cbedb1129fc1d741e", "message": "HDFS-15385 Upgrade boost library", "committedDate": "2020-06-04T12:58:09Z", "type": "forcePushed"}, {"oid": "82e1acec87c022f2011c6428591d05a693fb2ad3", "url": "https://github.com/apache/hadoop/commit/82e1acec87c022f2011c6428591d05a693fb2ad3", "message": "HDFS-15385 Upgrade boost library", "committedDate": "2020-06-04T14:20:44Z", "type": "forcePushed"}, {"oid": "53b5944529d8de50c49d0fedd02733addec2fac4", "url": "https://github.com/apache/hadoop/commit/53b5944529d8de50c49d0fedd02733addec2fac4", "message": "HDFS-15385 Upgrade boost library", "committedDate": "2020-06-04T17:54:10Z", "type": "forcePushed"}, {"oid": "857ee1bd851522f83cae3502537f59cb55ad4a16", "url": "https://github.com/apache/hadoop/commit/857ee1bd851522f83cae3502537f59cb55ad4a16", "message": "HDFS-15385 Upgrade boost library", "committedDate": "2020-06-06T16:29:55Z", "type": "forcePushed"}, {"oid": "74340c7a10160458470a491831ddf5f01e19be73", "url": "https://github.com/apache/hadoop/commit/74340c7a10160458470a491831ddf5f01e19be73", "message": "HDFS-15385 Upgrade boost library\n\n* Upgraded boost library to version 1.76.\n* Removed the asio-1.10.2 that was\n  checked in under libhdfspp/third_party\n  directory.", "committedDate": "2020-06-07T06:11:31Z", "type": "forcePushed"}, {"oid": "6fad8ff2a0e1b584496616440ca05cee4625649a", "url": "https://github.com/apache/hadoop/commit/6fad8ff2a0e1b584496616440ca05cee4625649a", "message": "HDFS-15385 Upgrade boost library\n\n* Upgraded boost library to version 1.76.\n* Removed the asio-1.10.2 that was\n  checked in under libhdfspp/third_party\n  directory.", "committedDate": "2020-06-07T11:57:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYyODc3Nw==", "url": "https://github.com/apache/hadoop/pull/2051#discussion_r442628777", "bodyText": "Would you add (if compiling native code), as well as Protocol Buffers, CMake, and so on?", "author": "aajisaka", "createdAt": "2020-06-19T04:48:50Z", "path": "BUILDING.txt", "diffHunk": "@@ -6,6 +6,7 @@ Requirements:\n * Unix System\n * JDK 1.8\n * Maven 3.3 or later\n+* Boost 1.76", "originalCommit": "6fad8ff2a0e1b584496616440ca05cee4625649a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYyOTE3NQ==", "url": "https://github.com/apache/hadoop/pull/2051#discussion_r442629175", "bodyText": "The versions are not consistent. The comment says boost 1.76 but downloads boost 1.72.", "author": "aajisaka", "createdAt": "2020-06-19T04:50:37Z", "path": "dev-support/docker/Dockerfile", "diffHunk": "@@ -86,6 +86,15 @@ RUN apt-get -q update \\\n     && apt-get clean \\\n     && rm -rf /var/lib/apt/lists/*\n \n+#######\n+# Boost 1.76 (1.65 ships with Bionic)\n+#######\n+WORKDIR /root/boost-library\n+RUN curl -L https://sourceforge.net/projects/boost/files/boost/1.72.0/boost_1_72_0.tar.bz2/download > boost_1_72_0.tar.bz2 \\\n+    && tar --bzip2 -xf boost_1_72_0.tar.bz2\n+WORKDIR /root/boost-library/boost_1_72_0", "originalCommit": "6fad8ff2a0e1b584496616440ca05cee4625649a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYzMDUxNQ==", "url": "https://github.com/apache/hadoop/pull/2051#discussion_r442630515", "bodyText": "Is there any specific reason to use the latest version of boost? If not, the version provided and maintained in Ubuntu Bionic is better.", "author": "aajisaka", "createdAt": "2020-06-19T04:56:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYyOTE3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYzMzEzOQ==", "url": "https://github.com/apache/hadoop/pull/2051#discussion_r442633139", "bodyText": "The versions are not consistent. The comment says boost 1.76 but downloads boost 1.72.\n\nThanks for the catch @aajisaka. I've rectified it.", "author": "GauthamBanasandra", "createdAt": "2020-06-19T05:08:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYyOTE3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYzNDQ0MQ==", "url": "https://github.com/apache/hadoop/pull/2051#discussion_r442634441", "bodyText": "Is there any specific reason to use the latest version of boost? If not, the version provided and maintained in Ubuntu Bionic is better.\n\nYes @aajisaka. As part of the upgrade, I needed to use boost::asio::system_executor - 4dcc89a#diff-365634cc5fad269ad19308bd99357403R43. It's available in Boost 1.72 but not in Boost 1.65.\n(Also, it saves us from having to upgrade from 1.65 to 1.7x in the future \ud83d\ude01)", "author": "GauthamBanasandra", "createdAt": "2020-06-19T05:13:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYyOTE3NQ=="}], "type": "inlineReview"}, {"oid": "4dcc89a170ec5bdb98960c20ba40d8ce05871071", "url": "https://github.com/apache/hadoop/commit/4dcc89a170ec5bdb98960c20ba40d8ce05871071", "message": "HDFS-15385 Upgrade boost library\n\n* Upgraded boost library to version 1.72.\n* Removed the asio-1.10.2 that was\n  checked in under libhdfspp/third_party\n  directory.", "committedDate": "2020-06-19T05:02:48Z", "type": "commit"}, {"oid": "9af2c172a55fa826659ae3a2257520aff9b6442d", "url": "https://github.com/apache/hadoop/commit/9af2c172a55fa826659ae3a2257520aff9b6442d", "message": "Fix Boost version in comment\n\n* Changed version 1.76 to 1.72\n  in the comments.", "committedDate": "2020-06-19T05:04:37Z", "type": "commit"}, {"oid": "9af2c172a55fa826659ae3a2257520aff9b6442d", "url": "https://github.com/apache/hadoop/commit/9af2c172a55fa826659ae3a2257520aff9b6442d", "message": "Fix Boost version in comment\n\n* Changed version 1.76 to 1.72\n  in the comments.", "committedDate": "2020-06-19T05:04:37Z", "type": "forcePushed"}, {"oid": "5b460beeb0511b5c48ca4b63f90e155526bdaeae", "url": "https://github.com/apache/hadoop/commit/5b460beeb0511b5c48ca4b63f90e155526bdaeae", "message": "Merge branch 'trunk' of https://gitbox.apache.org/repos/asf/hadoop into upgrade-boost", "committedDate": "2020-06-19T05:32:48Z", "type": "commit"}, {"oid": "e362cb37aa39f0d0c16dc19b54623e06d2c6b6cc", "url": "https://github.com/apache/hadoop/commit/e362cb37aa39f0d0c16dc19b54623e06d2c6b6cc", "message": "Increase CI timeout to 20 hours\n\n* The CI run was timing out, hence\n  increasing it to 20 hours.", "committedDate": "2020-06-22T07:23:20Z", "type": "commit"}, {"oid": "259f286879a7178a091bd17009de78756ff96ca2", "url": "https://github.com/apache/hadoop/commit/259f286879a7178a091bd17009de78756ff96ca2", "message": "Fix C++11 warning in hadoop-mapreduce-project", "committedDate": "2020-06-27T15:00:37Z", "type": "commit"}, {"oid": "ae5a066d6bd0292da5c1340ff0455159825f97c0", "url": "https://github.com/apache/hadoop/commit/ae5a066d6bd0292da5c1340ff0455159825f97c0", "message": "Merge branch 'trunk' of https://gitbox.apache.org/repos/asf/hadoop into upgrade-boost", "committedDate": "2020-06-28T06:17:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ2ODcxNg==", "url": "https://github.com/apache/hadoop/pull/2051#discussion_r453468716", "bodyText": "WORKDIR is /root in other places. Would you remove the overrides?", "author": "aajisaka", "createdAt": "2020-07-13T07:03:49Z", "path": "dev-support/docker/Dockerfile", "diffHunk": "@@ -84,6 +84,16 @@ RUN apt-get -q update \\\n     && apt-get clean \\\n     && rm -rf /var/lib/apt/lists/*\n \n+#######\n+# Boost 1.72 (1.65 ships with Bionic)\n+#######\n+WORKDIR /root/boost-library", "originalCommit": "259f286879a7178a091bd17009de78756ff96ca2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc5NDcwNg==", "url": "https://github.com/apache/hadoop/pull/2051#discussion_r453794706", "bodyText": "Done @aajisaka. I've removed the WORKDIR overrides.", "author": "GauthamBanasandra", "createdAt": "2020-07-13T16:59:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ2ODcxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ5MDY0MA==", "url": "https://github.com/apache/hadoop/pull/2051#discussion_r453490640", "bodyText": "I think these changes in the mapreduce module are not related to this issue.", "author": "aajisaka", "createdAt": "2020-07-13T08:45:52Z", "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-nativetask/src/main/native/src/util/StringUtil.cc", "diffHunk": "@@ -36,19 +36,19 @@ string StringUtil::ToString(uint32_t v) {\n \n string StringUtil::ToString(int64_t v) {\n   char tmp[32];\n-  snprintf(tmp, 32, \"%\"PRId64, v);\n+  snprintf(tmp, 32, \"%\" PRId64, v);\n   return tmp;\n }\n \n string StringUtil::ToString(int64_t v, char pad, int64_t len) {\n   char tmp[32];\n-  snprintf(tmp, 32, \"%%%c%\"PRId64\"\"PRId64, pad, len);\n+  snprintf(tmp, 32, \"%%%c%\" PRId64 \"\" PRId64, pad, len);\n   return Format(tmp, v);\n }\n \n string StringUtil::ToString(uint64_t v) {\n   char tmp[32];\n-  snprintf(tmp, 32, \"%\"PRIu64, v);\n+  snprintf(tmp, 32, \"%\" PRIu64, v);\n   return tmp;\n }", "originalCommit": "259f286879a7178a091bd17009de78756ff96ca2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzcyMjM5NA==", "url": "https://github.com/apache/hadoop/pull/2051#discussion_r453722394", "bodyText": "Done @aajisaka. I've removed these.", "author": "GauthamBanasandra", "createdAt": "2020-07-13T15:11:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ5MDY0MA=="}], "type": "inlineReview"}, {"oid": "94b11ef3f3d45c613ca176a29c72ca5a8aedb489", "url": "https://github.com/apache/hadoop/commit/94b11ef3f3d45c613ca176a29c72ca5a8aedb489", "message": "Merge branch 'trunk' of https://gitbox.apache.org/repos/asf/hadoop into upgrade-boost", "committedDate": "2020-07-13T14:29:47Z", "type": "commit"}, {"oid": "52657412251a9e97f69ea91db090f65eead7b7be", "url": "https://github.com/apache/hadoop/commit/52657412251a9e97f69ea91db090f65eead7b7be", "message": "Remove WORKDIR overrides\n\n* WORKDIR is set to /root\n  and must not be overridden.\n  Using cd command instead.", "committedDate": "2020-07-13T15:03:06Z", "type": "commit"}, {"oid": "8050a3ec87b8edbdecf85b23f544b2019dd17122", "url": "https://github.com/apache/hadoop/commit/8050a3ec87b8edbdecf85b23f544b2019dd17122", "message": "Remove unrelated changes", "committedDate": "2020-07-13T15:07:46Z", "type": "commit"}, {"oid": "dd79b9fefe564bda73475e0d47672c82cd64103e", "url": "https://github.com/apache/hadoop/commit/dd79b9fefe564bda73475e0d47672c82cd64103e", "message": "Suppress hadolint warnings\n\n* Suppressing the warning\n  DL3003 that is caused by\n  Boost.", "committedDate": "2020-07-14T09:51:30Z", "type": "commit"}]}