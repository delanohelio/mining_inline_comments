{"pr_number": 2121, "pr_title": "HDFS-15449. Optionally ignore port number in mount-table name when picking from initialized uri.", "pr_createdAt": "2020-07-04T04:50:01Z", "pr_url": "https://github.com/apache/hadoop/pull/2121", "timeline": [{"oid": "eb34bd4afe53ca413e4ca924065be2a717daf06e", "url": "https://github.com/apache/hadoop/commit/eb34bd4afe53ca413e4ca924065be2a717daf06e", "message": "HDFS-15449. Optionally ignore port number in mount-table name when picking from initialized uri", "committedDate": "2020-07-04T04:48:31Z", "type": "commit"}, {"oid": "f1c6277b3c3988319b7b192a36a95d566d4657ff", "url": "https://github.com/apache/hadoop/commit/f1c6277b3c3988319b7b192a36a95d566d4657ff", "message": "Fixed a checkstyle and test failues", "committedDate": "2020-07-06T16:08:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwMjgwMQ==", "url": "https://github.com/apache/hadoop/pull/2121#discussion_r450502801", "bodyText": "nit: \"the initialized uri's hostname only..\" -> \"only the initialized uri's hostname..\"", "author": "virajith", "createdAt": "2020-07-06T22:02:08Z", "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystemOverloadScheme.java", "diffHunk": "@@ -85,9 +87,14 @@\n  * Op3: Create file s3a://bucketA/salesDB/dbfile will go to\n  *      s3a://bucketA/salesDB/dbfile\n  *\n- * Note: In ViewFileSystemOverloadScheme, by default the mount links will be\n+ * Note:\n+ * (1) In ViewFileSystemOverloadScheme, by default the mount links will be\n  * represented as non-symlinks. If you want to change this behavior, please see\n  * {@link ViewFileSystem#listStatus(Path)}\n+ * (2) In ViewFileSystemOverloadScheme, the initialized uri's hostname only will", "originalCommit": "f1c6277b3c3988319b7b192a36a95d566d4657ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUyNDcwNg==", "url": "https://github.com/apache/hadoop/pull/2121#discussion_r450524706", "bodyText": "Yes, I reread that. Fixed. Thank you!", "author": "umamaheswararao", "createdAt": "2020-07-06T23:10:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwMjgwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwMzUzMw==", "url": "https://github.com/apache/hadoop/pull/2121#discussion_r450503533", "bodyText": "nit: \"considers only hostname..\" -> \"only consider the hostname..\"", "author": "virajith", "createdAt": "2020-07-06T22:04:08Z", "path": "hadoop-hdfs-project/hadoop-hdfs/src/site/markdown/ViewFsOverloadScheme.md", "diffHunk": "@@ -28,7 +28,11 @@ View File System Overload Scheme\n \n ### Details\n \n-The View File System Overload Scheme is an extension to the View File System. This will allow users to continue to use their existing fs.defaultFS configured scheme or any new scheme name instead of using scheme `viewfs`. Mount link configurations key, value formats are same as in [ViewFS Guide](./ViewFs.html). If a user wants to continue use the same fs.defaultFS and wants to have more mount points, then mount link configurations should have the current fs.defaultFS authority name as mount table name. Example if fs.defaultFS is `hdfs://mycluster`, then the mount link configuration key name should be like in the following format `fs.viewfs.mounttable.*mycluster*.link.<mountLinkPath>`. We will discuss more example configurations in following sections.\n+The View File System Overload Scheme is an extension to the View File System. This will allow users to continue to use their existing fs.defaultFS configured scheme or any new scheme name instead of using scheme `viewfs`.\n+Mount link configurations key, value formats are same as in [ViewFS Guide](./ViewFs.html).\n+If a user wants to continue use the same fs.defaultFS and wants to have more mount points, then mount link configurations should have the ViewFileSystemOverloadScheme initialized uri's hostname as the mount table name.\n+Example if fs.defaultFS is `hdfs://mycluster`, then the mount link configuration key name should be like in the following format `fs.viewfs.mounttable.*mycluster*.link.<mountLinkPath>`.\n+Even if the initialized fs uri has hostname:port, it will simply ignore the port number and considers only hostname as mount table name.  We will discuss more example configurations in following sections.", "originalCommit": "f1c6277b3c3988319b7b192a36a95d566d4657ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUyNDc0NA==", "url": "https://github.com/apache/hadoop/pull/2121#discussion_r450524744", "bodyText": "done.", "author": "umamaheswararao", "createdAt": "2020-07-06T23:10:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwMzUzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwNTUxMQ==", "url": "https://github.com/apache/hadoop/pull/2121#discussion_r450505511", "bodyText": "nit: remove space after LOCAL_FOLDER", "author": "virajith", "createdAt": "2020-07-06T22:09:47Z", "path": "hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/tools/TestViewFileSystemOverloadSchemeWithDFSAdmin.java", "diffHunk": "@@ -215,7 +214,7 @@ public void testSafeModeWithWrongFS() throws Exception {\n    */\n   @Test\n   public void testSafeModeShouldFailOnLocalTargetFS() throws Exception {\n-    addMountLinks(defaultFSURI.getAuthority(), new String[] {LOCAL_FOLDER },\n+    addMountLinks(defaultFSURI.getHost(), new String[] {LOCAL_FOLDER },", "originalCommit": "f1c6277b3c3988319b7b192a36a95d566d4657ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUyNDgwNQ==", "url": "https://github.com/apache/hadoop/pull/2121#discussion_r450524805", "bodyText": "Done", "author": "umamaheswararao", "createdAt": "2020-07-06T23:10:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDUwNTUxMQ=="}], "type": "inlineReview"}, {"oid": "3f8251ed3895eb539a257d714e9a734490c700e7", "url": "https://github.com/apache/hadoop/commit/3f8251ed3895eb539a257d714e9a734490c700e7", "message": "Fixed few review comments", "committedDate": "2020-07-06T23:09:40Z", "type": "commit"}]}