{"pr_number": 2103, "pr_title": "HADOOP-17084 Update Dockerfile_aarch64 to use Bionic", "pr_createdAt": "2020-06-26T17:26:03Z", "pr_url": "https://github.com/apache/hadoop/pull/2103", "timeline": [{"oid": "d7647e04fdc7695867cad994111825c4585b1cf2", "url": "https://github.com/apache/hadoop/commit/d7647e04fdc7695867cad994111825c4585b1cf2", "message": "HADOOP-17084 Update Dockerfile_aarch64 to use Bionic", "committedDate": "2020-06-26T17:16:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU5MDcyMw==", "url": "https://github.com/apache/hadoop/pull/2103#discussion_r446590723", "bodyText": "Nice, JAVA_HOME point to java 8.\nLGTM", "author": "kiwik", "createdAt": "2020-06-28T02:26:42Z", "path": "dev-support/docker/Dockerfile_aarch64", "diffHunk": "@@ -74,47 +79,24 @@ RUN apt-get -q update \\\n         python-setuptools \\\n         python-wheel \\\n         rsync \\\n+        shellcheck \\\n         software-properties-common \\\n-        snappy \\\n         sudo \\\n         valgrind \\\n         zlib1g-dev \\\n     && apt-get clean \\\n     && rm -rf /var/lib/apt/lists/*\n \n-\n-#######\n-# OpenJDK 8\n-#######\n-# hadolint ignore=DL3008\n-RUN apt-get -q update \\\n-    && apt-get -q install -y --no-install-recommends openjdk-8-jdk libbcprov-java \\\n-    && apt-get clean \\\n-    && rm -rf /var/lib/apt/lists/*\n-\n-\n ######\n-# Install cmake 3.1.0 (3.5.1 ships with Xenial)\n-# There is no cmake binary available for aarch64. Build from source.\n+# Set env vars required to build Hadoop\n ######\n-# hadolint ignore=DL3003\n-RUN mkdir -p /opt/cmake/src \\\n-    && curl -L -s -S \\\n-      https://cmake.org/files/v3.1/cmake-3.1.0-1-src.tar.bz2 \\\n-      -o /opt/cmake/cmake-src.tar.bz2 \\\n-    && tar xvjf /opt/cmake/cmake-src.tar.bz2 -C /opt/cmake/src \\\n-    && cd /opt/cmake/src \\\n-    && tar xvjf cmake-3.1.0.tar.bz2 \\\n-    && cd cmake-3.1.0 && patch -p0 -i ../cmake-3.1.0-1.patch && mkdir .build && cd .build \\\n-    && ../bootstrap --parallel=2 \\\n-    && make -j2 && ./bin/cpack \\\n-    && tar xzf cmake-3.1.0-Linux-aarch64.tar.gz --strip-components 1 -C /opt/cmake \\\n-    && cd /opt/cmake && rm -rf /opt/cmake/src\n-ENV CMAKE_HOME /opt/cmake\n-ENV PATH \"${PATH}:/opt/cmake/bin\"\n+ENV MAVEN_HOME /usr\n+# JAVA_HOME must be set in Maven >= 3.5.0 (MNG-6003)\n+ENV JAVA_HOME /usr/lib/jvm/java-8-openjdk-arm64", "originalCommit": "d7647e04fdc7695867cad994111825c4585b1cf2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}