{"pr_number": 3396, "pr_title": "refactor: introduce ModificationStatus for better readability", "pr_createdAt": "2020-06-06T08:24:55Z", "pr_url": "https://github.com/INRIA/spoon/pull/3396", "timeline": [{"oid": "5af1204616a596de0af42c376b6663726dd48b69", "url": "https://github.com/INRIA/spoon/commit/5af1204616a596de0af42c376b6663726dd48b69", "message": "up", "committedDate": "2020-06-06T06:30:27Z", "type": "commit"}, {"oid": "aa259840c0a25b9b8f9c16ccbbd437bd8914716a", "url": "https://github.com/INRIA/spoon/commit/aa259840c0a25b9b8f9c16ccbbd437bd8914716a", "message": "up", "committedDate": "2020-06-06T08:23:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwMzc2OA==", "url": "https://github.com/INRIA/spoon/pull/3396#discussion_r436303768", "bodyText": "update comment, null value is not returned anymore?", "author": "MartinWitt", "createdAt": "2020-06-06T21:57:13Z", "path": "src/main/java/spoon/support/sniper/internal/AbstractSourceFragmentPrinter.java", "diffHunk": "@@ -133,29 +133,29 @@ protected void printSpaces(int fragmentIndex) {\n \t * \tfalse if whole `fragment` is not modified.\n \t * \tnull if it is not possible to detect it here. Then it will be detected later.", "originalCommit": "aa259840c0a25b9b8f9c16ccbbd437bd8914716a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM5OTYwMA==", "url": "https://github.com/INRIA/spoon/pull/3396#discussion_r436399600", "bodyText": "done, thanks.", "author": "monperrus", "createdAt": "2020-06-07T20:37:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwMzc2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwNDM0OQ==", "url": "https://github.com/INRIA/spoon/pull/3396#discussion_r436304349", "bodyText": "shouldn't this be abstract and all Enum constants implement this? Otherwise every new enum item would need a change in this method.", "author": "MartinWitt", "createdAt": "2020-06-06T22:07:24Z", "path": "src/main/java/spoon/support/sniper/internal/ModificationStatus.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/**\n+ * SPDX-License-Identifier: (MIT OR CECILL-C)\n+ *\n+ * Copyright (C) 2006-2019 INRIA and contributors\n+ *\n+ * Spoon is available either under the terms of the MIT License (see LICENSE-MIT.txt) of the Cecill-C License (see LICENSE-CECILL-C.txt). You as the user are entitled to choose the terms under which to adopt Spoon.\n+ */\n+package spoon.support.sniper.internal;\n+\n+/** represents whether a {@link spoon.support.sniper.internal.SourceFragment} has been modified, and should be reprinted as is or with the normal pretty-printer */\n+public enum ModificationStatus {\n+\tUNKNOWN,\n+\tMODIFIED,\n+\tNOT_MODIFIED;\n+\n+\tpublic static ModificationStatus fromBoolean(Boolean b) {\n+\t\tif (b) {\n+\t\t\treturn MODIFIED;\n+\t\t}\n+\t\treturn NOT_MODIFIED;\n+\t}\n+\n+\tpublic boolean toBoolean() {\n+\t\tif (this == MODIFIED) {\n+\t\t\treturn true;\n+\t\t}\n+\t\tif (this == NOT_MODIFIED) {\n+\t\t\treturn false;\n+\t\t}\n+\t\tthrow new IllegalStateException();", "originalCommit": "aa259840c0a25b9b8f9c16ccbbd437bd8914716a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM5OTY0Mw==", "url": "https://github.com/INRIA/spoon/pull/3396#discussion_r436399643", "bodyText": "that's not necessary to over-engineer, this enum is very unlikely to change", "author": "monperrus", "createdAt": "2020-06-07T20:37:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwNDM0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwNDQxNQ==", "url": "https://github.com/INRIA/spoon/pull/3396#discussion_r436304415", "bodyText": "update comment, null value is not returned anymore?", "author": "MartinWitt", "createdAt": "2020-06-06T22:08:22Z", "path": "src/main/java/spoon/support/sniper/internal/AbstractSourceFragmentContextCollection.java", "diffHunk": "@@ -69,10 +69,10 @@ public boolean knowsHowToPrint(PrinterEvent event) {\n \t}\n \n \t@Override\n-\tprotected Boolean isFragmentModified(SourceFragment fragment) {\n+\tprotected ModificationStatus isFragmentModified(SourceFragment fragment) {\n \t\t//we cannot fast detect if it is modified using our changeResolver.\n \t\t//So return null. The code later will detect it including modified roles.", "originalCommit": "aa259840c0a25b9b8f9c16ccbbd437bd8914716a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjM5OTU5OQ==", "url": "https://github.com/INRIA/spoon/pull/3396#discussion_r436399599", "bodyText": "done, thanks.", "author": "monperrus", "createdAt": "2020-06-07T20:37:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwNDQxNQ=="}], "type": "inlineReview"}, {"oid": "3bc27bf33d873d5407b5f0e41095ffee00022168", "url": "https://github.com/INRIA/spoon/commit/3bc27bf33d873d5407b5f0e41095ffee00022168", "message": "@monperrus at work", "committedDate": "2020-06-07T20:20:12Z", "type": "commit"}, {"oid": "a34b8a0a5d89045c9e91d563ad8c3fecae064042", "url": "https://github.com/INRIA/spoon/commit/a34b8a0a5d89045c9e91d563ad8c3fecae064042", "message": "up", "committedDate": "2020-06-07T20:34:53Z", "type": "commit"}, {"oid": "3d79e6a564fb3d0c7fa33c457ae07ea0c387428c", "url": "https://github.com/INRIA/spoon/commit/3d79e6a564fb3d0c7fa33c457ae07ea0c387428c", "message": "up", "committedDate": "2020-06-07T20:36:57Z", "type": "commit"}, {"oid": "2f29b32169140a1de460c16a78ed6cb698695384", "url": "https://github.com/INRIA/spoon/commit/2f29b32169140a1de460c16a78ed6cb698695384", "message": "@monperrus at work", "committedDate": "2020-06-07T20:49:17Z", "type": "commit"}, {"oid": "fa53315bfed34e6e2a0c9865052d3115188989eb", "url": "https://github.com/INRIA/spoon/commit/fa53315bfed34e6e2a0c9865052d3115188989eb", "message": "@monperrus at work", "committedDate": "2020-06-07T20:57:00Z", "type": "commit"}, {"oid": "77185cfab6fd43582eebb25bd0bff0dc8c1d0442", "url": "https://github.com/INRIA/spoon/commit/77185cfab6fd43582eebb25bd0bff0dc8c1d0442", "message": "delete SourceFragmentContextSet", "committedDate": "2020-06-07T21:11:10Z", "type": "commit"}, {"oid": "129ab647cfa4670f3e752f087ab0137c894972fc", "url": "https://github.com/INRIA/spoon/commit/129ab647cfa4670f3e752f087ab0137c894972fc", "message": "@monperrus at work", "committedDate": "2020-06-07T21:42:28Z", "type": "commit"}, {"oid": "cb0aa18f317745032b83d78e56e5f907f479781c", "url": "https://github.com/INRIA/spoon/commit/cb0aa18f317745032b83d78e56e5f907f479781c", "message": "@monperrus at work", "committedDate": "2020-06-08T07:23:41Z", "type": "commit"}]}