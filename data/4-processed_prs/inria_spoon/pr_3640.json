{"pr_number": 3640, "pr_title": "fix(CtLineElementComparator): one can add two values to an annotation", "pr_createdAt": "2020-10-07T08:38:38Z", "pr_url": "https://github.com/INRIA/spoon/pull/3640", "timeline": [{"oid": "29fe59fd6b8ab73c24223dede85c096ecb3a72d6", "url": "https://github.com/INRIA/spoon/commit/29fe59fd6b8ab73c24223dede85c096ecb3a72d6", "message": "fix(CtLineElementComparator): element with NoSourcePosition are no ordered (arbitrarily)", "committedDate": "2020-10-07T08:32:43Z", "type": "commit"}, {"oid": "562d31fe584180c50122ad4c6b01d7415d4e9d0e", "url": "https://github.com/INRIA/spoon/commit/562d31fe584180c50122ad4c6b01d7415d4e9d0e", "message": "up", "committedDate": "2020-10-07T08:33:35Z", "type": "commit"}, {"oid": "01cfb2855d710d4107f18249b341f3c2de7af92f", "url": "https://github.com/INRIA/spoon/commit/01cfb2855d710d4107f18249b341f3c2de7af92f", "message": "gnagnagna checkstyle", "committedDate": "2020-10-07T09:08:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDkxOTczNg==", "url": "https://github.com/INRIA/spoon/pull/3640#discussion_r500919736", "bodyText": "If you want to respect the antisymetric property, this line could be replaced with\nreturn o1.equals(o2) ? 0 : ((o1.hashCode() < o2.hashCode()) ? -1 : 1);", "author": "nharrand", "createdAt": "2020-10-07T10:55:23Z", "path": "src/main/java/spoon/support/comparator/CtLineElementComparator.java", "diffHunk": "@@ -19,14 +19,14 @@\n public class CtLineElementComparator implements Comparator<CtElement>, Serializable {\n \n \t/**\n-\t * Returns 0 if o1 has the same position as o2, or both positions are invalid.\n-\t * Returns -1 if o1 is before o2 in the file, or o1 has no valid position.\n+\t * Returns 0 if o1 has the same position as o2, or both positions are invalid and o1.equals(o2).\n+\t * Returns -1 if o1 is before o2 in the file, or o1 has no valid position or both positions are invalid !o1.equals(o2).\n \t * Returns 1 if o2 is after o1 in the file, or o2 has no valid position.\n \t */\n \t@Override\n \tpublic int compare(CtElement o1, CtElement o2) {\n \t\tif (!o1.getPosition().isValidPosition() && !o2.getPosition().isValidPosition()) {\n-\t\t\treturn 0;\n+\t\t\treturn o1.equals(o2) ? 0 : -1;", "originalCommit": "01cfb2855d710d4107f18249b341f3c2de7af92f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDkyNDE5Mw==", "url": "https://github.com/INRIA/spoon/pull/3640#discussion_r500924193", "bodyText": "Nice fix. At first glance I see no problem with transitive and antisymmetric property. LGTM.", "author": "MartinWitt", "createdAt": "2020-10-07T11:03:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDkxOTczNg=="}], "type": "inlineReview"}, {"oid": "84e5848cedf668e343af03f4cf8433cda43a2074", "url": "https://github.com/INRIA/spoon/commit/84e5848cedf668e343af03f4cf8433cda43a2074", "message": "Update CtLineElementComparator.java", "committedDate": "2020-10-07T10:56:19Z", "type": "commit"}, {"oid": "cdf611f2d7a6c3708efa567f1ba5dd2bc4a9c240", "url": "https://github.com/INRIA/spoon/commit/cdf611f2d7a6c3708efa567f1ba5dd2bc4a9c240", "message": "Update CtLineElementComparator.java", "committedDate": "2020-10-07T11:01:07Z", "type": "commit"}]}