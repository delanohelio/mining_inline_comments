{"pr_number": 815, "pr_title": "ci: Rearrange workflows to be more logical", "pr_createdAt": "2020-05-21T21:43:05Z", "pr_url": "https://github.com/returntocorp/semgrep/pull/815", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzMjg0NQ==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428932845", "bodyText": "Moved to lint.yml", "author": "brendongo", "createdAt": "2020-05-21T21:43:24Z", "path": ".github/workflows/bento.yml", "diffHunk": "@@ -1,15 +0,0 @@\n-jobs:", "originalCommit": "d8d8178bc84e2993848fb588f2148af0b32115c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzMzE5Nw==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428933197", "bodyText": "Removed. This cant be helped in this repository anyway and is part of https://github.com/returntocorp/homebrew-semgrep CI. Will make that GHA run on cron.", "author": "brendongo", "createdAt": "2020-05-21T21:44:20Z", "path": ".github/workflows/brew-test.yml", "diffHunk": "@@ -1,16 +0,0 @@\n-name: homebrew-test", "originalCommit": "d8d8178bc84e2993848fb588f2148af0b32115c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzMzQwMg==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428933402", "bodyText": "Moved to release.yml", "author": "brendongo", "createdAt": "2020-05-21T21:44:50Z", "path": ".github/workflows/build-wheels.yaml", "diffHunk": "@@ -1,71 +0,0 @@\n-name: build-wheels", "originalCommit": "d8d8178bc84e2993848fb588f2148af0b32115c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzMzQ5Ng==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428933496", "bodyText": "Moved to tests.yml", "author": "brendongo", "createdAt": "2020-05-21T21:45:02Z", "path": ".github/workflows/build.yml", "diffHunk": "@@ -1,34 +0,0 @@\n-name: ci-build", "originalCommit": "d8d8178bc84e2993848fb588f2148af0b32115c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzMzU3OA==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428933578", "bodyText": "Moved to lint.yml", "author": "brendongo", "createdAt": "2020-05-21T21:45:14Z", "path": ".github/workflows/changelog-reminder.yml", "diffHunk": "@@ -1,31 +0,0 @@\n-name: Changelog Reminder", "originalCommit": "d8d8178bc84e2993848fb588f2148af0b32115c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzMzg5OA==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428933898", "bodyText": "Moved to tests.yml", "author": "brendongo", "createdAt": "2020-05-21T21:45:57Z", "path": ".github/workflows/mac-build.yml", "diffHunk": "@@ -1,24 +0,0 @@\n-name: mac-build", "originalCommit": "d8d8178bc84e2993848fb588f2148af0b32115c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzMzk2MQ==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428933961", "bodyText": "Moved to lint.yml", "author": "brendongo", "createdAt": "2020-05-21T21:46:05Z", "path": ".github/workflows/pre-commit.yml", "diffHunk": "@@ -1,20 +0,0 @@\n-name: pre-commit", "originalCommit": "d8d8178bc84e2993848fb588f2148af0b32115c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNDEwMQ==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428934101", "bodyText": "Moved to tests.yml", "author": "brendongo", "createdAt": "2020-05-21T21:46:31Z", "path": ".github/workflows/tox-tests.yml", "diffHunk": "@@ -1,34 +0,0 @@\n-name: Semgrep Python Tests", "originalCommit": "d8d8178bc84e2993848fb588f2148af0b32115c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNDE5OA==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428934198", "bodyText": "Moved to lint.yml", "author": "brendongo", "createdAt": "2020-05-21T21:46:45Z", "path": ".github/workflows/semgrep.yml", "diffHunk": "@@ -1,34 +0,0 @@\n-name: Semgrep", "originalCommit": "d8d8178bc84e2993848fb588f2148af0b32115c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTk5Mg==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r428935992", "bodyText": "moved to release.yml", "author": "brendongo", "createdAt": "2020-05-21T21:51:33Z", "path": ".github/workflows/do-release.yml", "diffHunk": "@@ -1,192 +0,0 @@\n-on:", "originalCommit": "db9a580abf5e15999996c853c086b1b9a1297865", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ2MzA5MQ==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r429463091", "bodyText": "Can pull_request just be a naked key without any value?", "author": "mschwager", "createdAt": "2020-05-22T21:40:44Z", "path": ".github/workflows/docker.yml", "diffHunk": "@@ -1,8 +1,10 @@\n name: docker-push-pr\n \n on:\n+  push:\n+    branches:\n+      - develop\n   pull_request:", "originalCommit": "6aee166528efaadc5afbfe004815eed166c8f302", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ4MDQzMw==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r429480433", "bodyText": "Yep it matches to all pull requests", "author": "brendongo", "createdAt": "2020-05-22T22:37:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ2MzA5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ2MzQ0OQ==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r429463449", "bodyText": "Looks like the only branch we're using is develop, do we still need to check github.ref == 'develop'?\nMight not be necessary, but maybe it's a good safeguard in case anything changes in the future.", "author": "mschwager", "createdAt": "2020-05-22T21:42:10Z", "path": ".github/workflows/docker.yml", "diffHunk": "@@ -11,7 +13,16 @@ jobs:\n       - uses: actions/checkout@v2\n       - name: Build the Docker image\n         run: docker build .\n-      - name: build-and-push\n+      - name: Push Develop Image if on develop branch\n+        if: ${{ github.event_name == 'push' && github.ref == 'develop' }}", "originalCommit": "6aee166528efaadc5afbfe004815eed166c8f302", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ4MDQ3NQ==", "url": "https://github.com/returntocorp/semgrep/pull/815#discussion_r429480475", "bodyText": "Yeah in case someone changes then this GHA runs don't want to push a develop tag on a different branch :D", "author": "brendongo", "createdAt": "2020-05-22T22:37:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ2MzQ0OQ=="}], "type": "inlineReview"}, {"oid": "6f94f4fdfdbe9ce42e89b765e122dfe31df9bb50", "url": "https://github.com/returntocorp/semgrep/commit/6f94f4fdfdbe9ce42e89b765e122dfe31df9bb50", "message": "ci: Rearrange workflows to be more logical", "committedDate": "2020-05-22T22:42:39Z", "type": "commit"}, {"oid": "1b4fbab585c0abb0d5eab9a71d63f0a0257d8d13", "url": "https://github.com/returntocorp/semgrep/commit/1b4fbab585c0abb0d5eab9a71d63f0a0257d8d13", "message": "fixup! ci: Rearrange workflows to be more logical", "committedDate": "2020-05-22T22:42:39Z", "type": "commit"}, {"oid": "b92e6180a6f0fde408941fd091e8f38420d16626", "url": "https://github.com/returntocorp/semgrep/commit/b92e6180a6f0fde408941fd091e8f38420d16626", "message": "fixup! ci: Rearrange workflows to be more logical", "committedDate": "2020-05-22T22:42:39Z", "type": "commit"}, {"oid": "a80016e2fa2c35df7253670953d69101dde556a6", "url": "https://github.com/returntocorp/semgrep/commit/a80016e2fa2c35df7253670953d69101dde556a6", "message": "fixup! ci: Rearrange workflows to be more logical", "committedDate": "2020-05-22T22:42:39Z", "type": "commit"}, {"oid": "fd5eb8f73d46c7d49f5a13b4ee0e9b552cb813fa", "url": "https://github.com/returntocorp/semgrep/commit/fd5eb8f73d46c7d49f5a13b4ee0e9b552cb813fa", "message": "Use container with correct git version", "committedDate": "2020-05-22T22:42:39Z", "type": "commit"}, {"oid": "1f1a2f015c503685ada27edf718904b286f7ecaa", "url": "https://github.com/returntocorp/semgrep/commit/1f1a2f015c503685ada27edf718904b286f7ecaa", "message": "revert original build steps", "committedDate": "2020-05-22T22:42:39Z", "type": "commit"}, {"oid": "0a9b126980dbbc21b82ea560e9eb0e177cb52593", "url": "https://github.com/returntocorp/semgrep/commit/0a9b126980dbbc21b82ea560e9eb0e177cb52593", "message": "fixup! revert original build steps", "committedDate": "2020-05-22T22:42:39Z", "type": "commit"}, {"oid": "fd86b3e3372391c5538fdf7f94fd823fe823a9f8", "url": "https://github.com/returntocorp/semgrep/commit/fd86b3e3372391c5538fdf7f94fd823fe823a9f8", "message": "Combine docker GHA", "committedDate": "2020-05-22T22:42:39Z", "type": "commit"}, {"oid": "1a43ea7ca43b298db9e4daf69a13852b5e358e71", "url": "https://github.com/returntocorp/semgrep/commit/1a43ea7ca43b298db9e4daf69a13852b5e358e71", "message": "opam install deps only", "committedDate": "2020-05-22T22:44:29Z", "type": "forcePushed"}, {"oid": "b8ea8ed993a452c5ecace4970b23b9c2ead91bd8", "url": "https://github.com/returntocorp/semgrep/commit/b8ea8ed993a452c5ecace4970b23b9c2ead91bd8", "message": "release: opam install deps only", "committedDate": "2020-05-22T23:04:21Z", "type": "forcePushed"}, {"oid": "13beb98b80c247f1e0ec8049f090020243c6d750", "url": "https://github.com/returntocorp/semgrep/commit/13beb98b80c247f1e0ec8049f090020243c6d750", "message": "release: opam install deps only.", "committedDate": "2020-05-22T23:19:49Z", "type": "forcePushed"}, {"oid": "bd4078c6da7b82d962472e6391b8789e05303148", "url": "https://github.com/returntocorp/semgrep/commit/bd4078c6da7b82d962472e6391b8789e05303148", "message": "release: opam install deps only", "committedDate": "2020-05-23T01:41:52Z", "type": "forcePushed"}, {"oid": "63ba6ffb15ea7133c84eadd8286c9127dabe2958", "url": "https://github.com/returntocorp/semgrep/commit/63ba6ffb15ea7133c84eadd8286c9127dabe2958", "message": "release: opam install deps only", "committedDate": "2020-05-23T01:43:33Z", "type": "commit"}, {"oid": "63ba6ffb15ea7133c84eadd8286c9127dabe2958", "url": "https://github.com/returntocorp/semgrep/commit/63ba6ffb15ea7133c84eadd8286c9127dabe2958", "message": "release: opam install deps only", "committedDate": "2020-05-23T01:43:33Z", "type": "forcePushed"}]}