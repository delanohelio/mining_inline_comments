{"pr_number": 1034, "pr_title": "output: ParseErrors less scary looking", "pr_createdAt": "2020-06-16T20:52:42Z", "pr_url": "https://github.com/returntocorp/semgrep/pull/1034", "timeline": [{"oid": "4880d7677848f230ab8e66aab37b405f9795556d", "url": "https://github.com/returntocorp/semgrep/commit/4880d7677848f230ab8e66aab37b405f9795556d", "message": "output: ParseErrors less scary looking\n\nAggregate ParseError output and only show all parse errors when\nverbose flag is on.", "committedDate": "2020-06-16T21:56:47Z", "type": "commit"}, {"oid": "279c7bfee2883e4c41ac0d84a53ec6b63af83c91", "url": "https://github.com/returntocorp/semgrep/commit/279c7bfee2883e4c41ac0d84a53ec6b63af83c91", "message": "Add to changelog", "committedDate": "2020-06-16T21:57:17Z", "type": "commit"}, {"oid": "279c7bfee2883e4c41ac0d84a53ec6b63af83c91", "url": "https://github.com/returntocorp/semgrep/commit/279c7bfee2883e4c41ac0d84a53ec6b63af83c91", "message": "Add to changelog", "committedDate": "2020-06-16T21:57:17Z", "type": "forcePushed"}, {"oid": "d812a9429f53bf0b26fe0e9d63803f34fa4bcef2", "url": "https://github.com/returntocorp/semgrep/commit/d812a9429f53bf0b26fe0e9d63803f34fa4bcef2", "message": "Tell user about --strict", "committedDate": "2020-06-16T22:34:58Z", "type": "commit"}, {"oid": "ed3544d62287d74d5dbed8bff67073bbc395cc6f", "url": "https://github.com/returntocorp/semgrep/commit/ed3544d62287d74d5dbed8bff67073bbc395cc6f", "message": "fixup! output: ParseErrors less scary looking", "committedDate": "2020-06-16T23:28:45Z", "type": "commit"}, {"oid": "066bf382bb4e89bb5f7a84d70a7927f1642038c3", "url": "https://github.com/returntocorp/semgrep/commit/066bf382bb4e89bb5f7a84d70a7927f1642038c3", "message": "fixup! output: ParseErrors less scary looking", "committedDate": "2020-06-16T23:51:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIwNzkzMA==", "url": "https://github.com/returntocorp/semgrep/pull/1034#discussion_r441207930", "bodyText": "nit: file(s) if we're not doing plural/singular logic", "author": "dlukeomalley", "createdAt": "2020-06-17T00:06:19Z", "path": "semgrep/semgrep/output.py", "diffHunk": "@@ -247,9 +250,32 @@ def handle_semgrep_core_errors(self, semgrep_errors: List[Dict[str, Any]]) -> No\n         \"\"\"\n         self.semgrep_core_errors += semgrep_errors\n         if self.settings.output_format == OutputFormat.TEXT:\n-            for error in semgrep_errors:\n+            parse_errors, other_errors = partition(\n+                lambda e: e[\"check_id\"] == \"ParseError\", semgrep_errors\n+            )\n+\n+            for error in other_errors:\n                 print_error(pretty_error(error))\n \n+            if len(parse_errors) > 0:\n+                files_with_parse_errors: Set[str] = set(\n+                    e.get(\"path\") for e in parse_errors if \"path\" in e\n+                )\n+\n+                print_error(\n+                    f\"{len(files_with_parse_errors)} files failed to parse: {', '.join(files_with_parse_errors)}\"", "originalCommit": "066bf382bb4e89bb5f7a84d70a7927f1642038c3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b252c1ee42e762fd5cb47b5a009a42a7a36d7f91", "url": "https://github.com/returntocorp/semgrep/commit/b252c1ee42e762fd5cb47b5a009a42a7a36d7f91", "message": "fixup! output: ParseErrors less scary looking", "committedDate": "2020-06-17T04:35:49Z", "type": "commit"}, {"oid": "b252c1ee42e762fd5cb47b5a009a42a7a36d7f91", "url": "https://github.com/returntocorp/semgrep/commit/b252c1ee42e762fd5cb47b5a009a42a7a36d7f91", "message": "fixup! output: ParseErrors less scary looking", "committedDate": "2020-06-17T04:35:49Z", "type": "forcePushed"}]}