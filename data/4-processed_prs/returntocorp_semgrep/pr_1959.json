{"pr_number": 1959, "pr_title": "Fix not running multiple configs.", "pr_createdAt": "2020-11-04T04:38:33Z", "pr_url": "https://github.com/returntocorp/semgrep/pull/1959", "timeline": [{"oid": "68362a023bd35da107bbde9baf526c9d88a81735", "url": "https://github.com/returntocorp/semgrep/commit/68362a023bd35da107bbde9baf526c9d88a81735", "message": "Fix https://github.com/returntocorp/semgrep/issues/1912. Patch 'config_id' with an incrementally increasing integer. Added unit test to make sure two configs are resolved.", "committedDate": "2020-11-04T04:37:57Z", "type": "commit"}, {"oid": "84f3d0edfb6668389d1a8358105588247d577c42", "url": "https://github.com/returntocorp/semgrep/commit/84f3d0edfb6668389d1a8358105588247d577c42", "message": "Fix issue where Semgrep would error if it couldn't find a valid config on the path. Now properly reports 0 configs found instead", "committedDate": "2020-11-04T19:51:16Z", "type": "commit"}, {"oid": "c0b5fbd6681895a7158f584928f4408c7cf78bb0", "url": "https://github.com/returntocorp/semgrep/commit/c0b5fbd6681895a7158f584928f4408c7cf78bb0", "message": "Add e2e tests for multiple configs", "committedDate": "2020-11-04T20:29:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI1Mzk0Mg==", "url": "https://github.com/returntocorp/semgrep/pull/1959#discussion_r518253942", "bodyText": "Can we push the fix down to resolve_config level? I think it just makes the key a constant when downloading but we can add some part of the url to the key?", "author": "brendongo", "createdAt": "2020-11-05T18:01:04Z", "path": "semgrep/semgrep/config_resolver.py", "diffHunk": "@@ -82,9 +82,23 @@ def from_config_list(\n             except SemgrepError as e:\n                 errors.append(e)\n \n-        for config in configs:\n+        for i, config in enumerate(configs):\n             try:\n-                config_dict.update(resolve_config(config))\n+                # Patch config_id to fix https://github.com/returntocorp/semgrep/issues/1912\n+                resolved_config = resolve_config(config)", "originalCommit": "c0b5fbd6681895a7158f584928f4408c7cf78bb0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI3MTA2Mw==", "url": "https://github.com/returntocorp/semgrep/pull/1959#discussion_r518271063", "bodyText": "Yeah, but we also have to do it for files, dirs, etc.\nI do agree that moving it down is cleaner. I'll spend 15 minutes looking at it to see if an easy implementation jumps out; otherwise I'll merge as-is.", "author": "minusworld", "createdAt": "2020-11-05T18:27:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI1Mzk0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM0NjA4Mg==", "url": "https://github.com/returntocorp/semgrep/pull/1959#discussion_r518346082", "bodyText": "I gave it another shot pushing the fix down; something about doing so caused the rule_ids not to be output properly...\n\nMerging as-is.", "author": "minusworld", "createdAt": "2020-11-05T20:30:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI1Mzk0Mg=="}], "type": "inlineReview"}]}