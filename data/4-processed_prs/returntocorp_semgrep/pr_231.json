{"pr_number": 231, "pr_title": "improve parsing error for invalid types in valid yaml", "pr_createdAt": "2020-03-03T04:11:01Z", "pr_url": "https://github.com/returntocorp/semgrep/pull/231", "timeline": [{"oid": "c70eb2e2a465c11fea6e7d7f8e82bb3545f74267", "url": "https://github.com/returntocorp/semgrep/commit/c70eb2e2a465c11fea6e7d7f8e82bb3545f74267", "message": "improve parsing error for invalid types in valid yaml", "committedDate": "2020-03-03T04:10:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc5MDIzNA==", "url": "https://github.com/returntocorp/semgrep/pull/231#discussion_r386790234", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            f\"invalid type for pattern {pattern}: {type(pattern)} is not a dict\"\n          \n          \n            \n                            f\"invalid type for pattern {pattern}: {type(pattern)} is not a dict; perhaps you are missing a `-` before {pattern}?\"", "author": "ievans", "createdAt": "2020-03-03T04:13:04Z", "path": "sgrep_lint/evaluation.py", "diffHunk": "@@ -32,7 +32,15 @@ def _parse_boolean_expression(\n     \"\"\"\n     Move through the expression from the YML, yielding tuples of (operator, unique-id-for-pattern, pattern)\n     \"\"\"\n+    if not isinstance(rule_patterns, list):\n+        raise InvalidRuleSchema(\n+            f\"invalid type for pattern {rule_patterns}: {type(rule_patterns)} is not a list\"\n+        )\n     for pattern in rule_patterns:\n+        if not isinstance(pattern, dict):\n+            raise InvalidRuleSchema(\n+                f\"invalid type for pattern {pattern}: {type(pattern)} is not a dict\"", "originalCommit": "c70eb2e2a465c11fea6e7d7f8e82bb3545f74267", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "854e438e92b6414b46b37c916e5edd3f25b06e1f", "url": "https://github.com/returntocorp/semgrep/commit/854e438e92b6414b46b37c916e5edd3f25b06e1f", "message": "Update sgrep_lint/evaluation.py\n\nCo-Authored-By: Isaac Evans <409041+ievans@users.noreply.github.com>", "committedDate": "2020-03-03T04:13:25Z", "type": "commit"}, {"oid": "ba30c43911fdb690b06c886a7bf16c88f5bc3482", "url": "https://github.com/returntocorp/semgrep/commit/ba30c43911fdb690b06c886a7bf16c88f5bc3482", "message": "bad yaml, not dict", "committedDate": "2020-03-03T04:14:27Z", "type": "commit"}, {"oid": "fb21277232ba52ec8289acfbdc111379f54364ed", "url": "https://github.com/returntocorp/semgrep/commit/fb21277232ba52ec8289acfbdc111379f54364ed", "message": "Update evaluation.py", "committedDate": "2020-03-03T04:15:34Z", "type": "commit"}]}