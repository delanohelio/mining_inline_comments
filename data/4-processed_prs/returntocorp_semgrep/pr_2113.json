{"pr_number": 2113, "pr_title": "Do not follow symlinks", "pr_createdAt": "2020-11-23T17:44:59Z", "pr_url": "https://github.com/returntocorp/semgrep/pull/2113", "timeline": [{"oid": "f0321ddbc0bc550b8736587052e3af8dd6d277da", "url": "https://github.com/returntocorp/semgrep/commit/f0321ddbc0bc550b8736587052e3af8dd6d277da", "message": "Do not follow symlinks\n\nSymlinks break semgrep, as they often point outside of the path actually\nmounted into the core library, or are otherwise unresolveable by the\ncore.\n\nIn the tradition of comparable UNIX tools (such as ripgrep), we disable\nlink following.\n\nIn the future, we may want to add a switch to allow link following, but\nlet's wait until this is actually needed to avoid flag bloat in the\nimmediate.\n\nFixes #2005.", "committedDate": "2020-11-23T17:44:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg5OTc3NA==", "url": "https://github.com/returntocorp/semgrep/pull/2113#discussion_r528899774", "bodyText": "Should we apply the same logic to the _parse_output loop above? That way we have the same behavior between git tracked files and not.\nAlso, should we lift is_file into _is_valid?", "author": "mschwager", "createdAt": "2020-11-23T18:07:26Z", "path": "semgrep/semgrep/target_manager.py", "diffHunk": "@@ -171,7 +175,11 @@ def _find_files_with_extention(\n             \"\"\"\n             Return set of all files in curr_dir with given extension\n             \"\"\"\n-            return set(p for p in curr_dir.rglob(f\"*{extension}\") if p.is_file())\n+            return {", "originalCommit": "f0321ddbc0bc550b8736587052e3af8dd6d277da", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgzMjc2MA==", "url": "https://github.com/returntocorp/semgrep/pull/2113#discussion_r532832760", "bodyText": "There's another branch that follows directories, so we don't want to include is_file", "author": "nbrahms", "createdAt": "2020-11-30T19:07:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg5OTc3NA=="}], "type": "inlineReview"}, {"oid": "a10f599fd2d60527ae4ffab31377f6f60fe6eec6", "url": "https://github.com/returntocorp/semgrep/commit/a10f599fd2d60527ae4ffab31377f6f60fe6eec6", "message": "fixup! Do not follow symlinks", "committedDate": "2020-11-30T19:51:35Z", "type": "commit"}]}