{"pr_number": 972, "pr_title": "Added some niceties to indicate what semgrep is about to do.", "pr_createdAt": "2020-06-11T01:47:32Z", "pr_url": "https://github.com/returntocorp/semgrep/pull/972", "timeline": [{"oid": "0d5044db78a739c3e573e32811ef8f76105c0349", "url": "https://github.com/returntocorp/semgrep/commit/0d5044db78a739c3e573e32811ef8f76105c0349", "message": "Added some niceties to indicate to the user that Semgrep is doing work.\n- Added in a message indicating how many rules will be run.\n- Added 'progress dots' while semgrep scans code.\n- Added a message that semgrep found no results if there are no results.", "committedDate": "2020-06-11T01:46:52Z", "type": "commit"}, {"oid": "915f421cdead89085bedabaeb4ed1b310ab610f5", "url": "https://github.com/returntocorp/semgrep/commit/915f421cdead89085bedabaeb4ed1b310ab610f5", "message": "Merge branch 'develop' into cli-communication-updates", "committedDate": "2020-06-11T01:49:01Z", "type": "commit"}, {"oid": "c36b4e075d6649dcb9d5d17a733e165af3c86d94", "url": "https://github.com/returntocorp/semgrep/commit/c36b4e075d6649dcb9d5d17a733e165af3c86d94", "message": "Updated StoppableProgressWriter to use a spinner instead of a continuous stream of dots. It also includes an accompanying message for elapsed time.", "committedDate": "2020-06-11T19:32:37Z", "type": "commit"}, {"oid": "584adcb58adee722c5bfbd9fb459e727a091a07b", "url": "https://github.com/returntocorp/semgrep/commit/584adcb58adee722c5bfbd9fb459e727a091a07b", "message": "use isatty() instead of isatty", "committedDate": "2020-06-11T20:38:26Z", "type": "commit"}, {"oid": "d76c893ea0af8e1ab10f1fb2597fdae3dca76121", "url": "https://github.com/returntocorp/semgrep/commit/d76c893ea0af8e1ab10f1fb2597fdae3dca76121", "message": "Placate no-mutable-default-args", "committedDate": "2020-06-11T20:42:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA4MTMwNA==", "url": "https://github.com/returntocorp/semgrep/pull/972#discussion_r439081304", "bodyText": "Can drop this comment since we're no longer using dots, and the class/function names are descriptive enough we probably don't need the comments anyway.", "author": "mschwager", "createdAt": "2020-06-11T21:31:21Z", "path": "semgrep/semgrep/semgrep_main.py", "diffHunk": "@@ -277,21 +315,32 @@ def main(\n             f\"running {len(all_rules)} rules from {len(valid_configs)} config{plural} {config_id_if_single} {invalid_msg}\"\n         )\n \n+        notify_user_of_work(all_rules, include, include_dir, exclude, exclude_dir)\n+\n         if len(valid_configs) == 0:\n             raise SemgrepError(\n                 f\"no valid configuration file found ({len(invalid_configs)} configs were invalid)\",\n                 code=MISSING_CONFIG_EXIT_CODE,\n             )\n \n-    # actually invoke semgrep\n-    rule_matches_by_rule, debug_steps_by_rule, semgrep_errors = CoreRunner(\n-        allow_exec=dangerously_allow_arbitrary_code_execution_from_rules,\n-        jobs=jobs,\n-        exclude=exclude,\n-        include=include,\n-        exclude_dir=exclude_dir,\n-        include_dir=include_dir,\n-    ).invoke_semgrep(targets, all_rules)\n+    # Start a progress writer. This will print dots until .stop() is called.", "originalCommit": "d76c893ea0af8e1ab10f1fb2597fdae3dca76121", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "519fc8f74384a8e76345de156fe53cf10c10bced", "url": "https://github.com/returntocorp/semgrep/commit/519fc8f74384a8e76345de156fe53cf10c10bced", "message": "Add isatty check in .stop() to keep it from outputting in this case as well.", "committedDate": "2020-06-11T21:54:04Z", "type": "commit"}, {"oid": "b5235aa65faabe883bd83a4ca768e8ddf2af30d8", "url": "https://github.com/returntocorp/semgrep/commit/b5235aa65faabe883bd83a4ca768e8ddf2af30d8", "message": "Update qa tests", "committedDate": "2020-06-11T23:07:11Z", "type": "commit"}, {"oid": "e404f2c04512ffe9e6ee9a161820da1229ff8bfa", "url": "https://github.com/returntocorp/semgrep/commit/e404f2c04512ffe9e6ee9a161820da1229ff8bfa", "message": "Merge remote-tracking branch 'origin' into cli-communication-updates", "committedDate": "2020-06-11T23:33:31Z", "type": "commit"}, {"oid": "5132dcf22a000f15b7e89457de520cef83f8235e", "url": "https://github.com/returntocorp/semgrep/commit/5132dcf22a000f15b7e89457de520cef83f8235e", "message": "Add filter for semgrep.live config URLs to allow clicking through to the display page instead of raw YAML", "committedDate": "2020-06-12T00:22:48Z", "type": "commit"}, {"oid": "1d36bd3cd6f15f0de08ceb65a0048bf6a62a0c0f", "url": "https://github.com/returntocorp/semgrep/commit/1d36bd3cd6f15f0de08ceb65a0048bf6a62a0c0f", "message": "Remove StoppableProgressWriter in favor of a solution incorporating https://github.com/returntocorp/semgrep/pull/946", "committedDate": "2020-06-12T00:23:28Z", "type": "commit"}, {"oid": "2be8df2fad248e5112aa0993712ee7778d8eea5c", "url": "https://github.com/returntocorp/semgrep/commit/2be8df2fad248e5112aa0993712ee7778d8eea5c", "message": "Remove unused imports", "committedDate": "2020-06-12T00:34:05Z", "type": "commit"}, {"oid": "dd16dc116572758f972c7df9769c910d75bf0dd8", "url": "https://github.com/returntocorp/semgrep/commit/dd16dc116572758f972c7df9769c910d75bf0dd8", "message": "Fix conflicts with develop after output_handler refactor", "committedDate": "2020-06-12T19:41:21Z", "type": "commit"}, {"oid": "ffd5d0b0fbee2115c86b5249e44a0ba185b057fb", "url": "https://github.com/returntocorp/semgrep/commit/ffd5d0b0fbee2115c86b5249e44a0ba185b057fb", "message": "Regen test snapshots", "committedDate": "2020-06-12T20:16:47Z", "type": "commit"}]}