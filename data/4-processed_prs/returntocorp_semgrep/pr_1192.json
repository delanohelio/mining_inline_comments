{"pr_number": 1192, "pr_title": "Fix #1191, #438, use '/src' as Docker code volume", "pr_createdAt": "2020-07-02T15:39:16Z", "pr_url": "https://github.com/returntocorp/semgrep/pull/1192", "timeline": [{"oid": "fe03a5225a88edfecfdadc61417bf6d8464c1b82", "url": "https://github.com/returntocorp/semgrep/commit/fe03a5225a88edfecfdadc61417bf6d8464c1b82", "message": "Fix #1191, #438, use '/src' as Docker code volume", "committedDate": "2020-07-02T15:34:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTcyODM0NQ==", "url": "https://github.com/returntocorp/semgrep/pull/1192#discussion_r451728345", "bodyText": "we should just symlink for now and warn?", "author": "DrewDennison", "createdAt": "2020-07-08T17:58:55Z", "path": "semgrep/semgrep/config_resolver.py", "diffHunk": "@@ -72,17 +73,19 @@ def resolve_targets(targets: List[str]) -> List[Path]:\n     ]\n \n \n-def adjust_for_docker(in_precommit: bool = False) -> None:\n-    repo_home = REPO_HOME_DOCKER_PRECOMMIT if in_precommit else REPO_HOME_DOCKER\n-\n+def adjust_for_docker() -> None:\n     # change into this folder so that all paths are relative to it\n     if IN_DOCKER and not IN_GH_ACTION:\n-        if not Path(repo_home).exists():\n+        if OLD_SRC_DIRECTORY.exists():\n+            raise SemgrepError(", "originalCommit": "fe03a5225a88edfecfdadc61417bf6d8464c1b82", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTcyODkyOA==", "url": "https://github.com/returntocorp/semgrep/pull/1192#discussion_r451728928", "bodyText": "hmm I would be surprised if a tool dropped files in my home folder. I would expect /tmp", "author": "DrewDennison", "createdAt": "2020-07-08T17:59:55Z", "path": "semgrep/semgrep/version.py", "diffHunk": "@@ -21,8 +21,7 @@\n )\n VERSION_CACHE_PATH = Path(\n     os.environ.get(\n-        \"SEMGREP_VERSION_CACHE_PATH\",\n-        Path(os.path.expanduser(\"~\")) / \".cache\" / \"semgrep_version\",\n+        \"SEMGREP_VERSION_CACHE_PATH\", Path.home() / \".cache\" / \"semgrep_version\",", "originalCommit": "fe03a5225a88edfecfdadc61417bf6d8464c1b82", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}