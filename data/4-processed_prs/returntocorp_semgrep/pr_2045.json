{"pr_number": 2045, "pr_title": "Set default timeout of 30 seconds on semgrep-core calls from semgrep", "pr_createdAt": "2020-11-14T01:48:47Z", "pr_url": "https://github.com/returntocorp/semgrep/pull/2045", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM0MzU4Nw==", "url": "https://github.com/returntocorp/semgrep/pull/2045#discussion_r524343587", "bodyText": "Weird that you have to specify the default value here and in the main() function in semgrep_main.py\n@nbrahms some Python tricks to avoid the duplication?", "author": "aryx", "createdAt": "2020-11-16T15:16:42Z", "path": "semgrep/semgrep/cli.py", "diffHunk": "@@ -159,9 +160,9 @@ def cli() -> None:\n     config.add_argument(\n         \"--timeout\",\n         type=int,\n-        default=0,\n+        default=DEFAULT_TIMEOUT,", "originalCommit": "c6a0c1380ce02c77551473918280c4b339211454", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDUwNzIyMg==", "url": "https://github.com/returntocorp/semgrep/pull/2045#discussion_r524507222", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            DEFAULT_TIMEOUT = 5  # seconds\n          \n          \n            \n            DEFAULT_TIMEOUT = 30  # seconds", "author": "DrewDennison", "createdAt": "2020-11-16T19:07:53Z", "path": "semgrep/semgrep/constants.py", "diffHunk": "@@ -17,6 +17,8 @@\n DEFAULT_CONFIG_FILE = f\".{DEFAULT_SEMGREP_CONFIG_NAME}.yml\"\n DEFAULT_CONFIG_FOLDER = f\".{DEFAULT_SEMGREP_CONFIG_NAME}\"\n \n+DEFAULT_TIMEOUT = 5  # seconds", "originalCommit": "c6a0c1380ce02c77551473918280c4b339211454", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fd664a2f805af1a5696e1c66bdfeb492ae206e16", "url": "https://github.com/returntocorp/semgrep/commit/fd664a2f805af1a5696e1c66bdfeb492ae206e16", "message": "Update changelog", "committedDate": "2020-11-16T19:28:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDUzMTQwMg==", "url": "https://github.com/returntocorp/semgrep/pull/2045#discussion_r524531402", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"Maximum time to spend running a rule on a single file in seconds. If set to 0 will not have time limit. Defaults to {} s.\".format(DEFAULT_TIMEOUT)\n          \n          \n            \n                        f\"Maximum time to spend running a rule on a single file in seconds. If set to 0 will not have time limit. Defaults to {DEFAULT_TIMEOUT} s.\"", "author": "brendongo", "createdAt": "2020-11-16T19:50:33Z", "path": "semgrep/semgrep/cli.py", "diffHunk": "@@ -159,9 +160,9 @@ def cli() -> None:\n     config.add_argument(\n         \"--timeout\",\n         type=int,\n-        default=0,\n+        default=DEFAULT_TIMEOUT,\n         help=(\n-            \"Maximum time to spend running a rule on a single file in seconds. If set to 0 will not have time limit. Defaults to 0.\"\n+            \"Maximum time to spend running a rule on a single file in seconds. If set to 0 will not have time limit. Defaults to {} s.\".format(DEFAULT_TIMEOUT)", "originalCommit": "fd664a2f805af1a5696e1c66bdfeb492ae206e16", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDUzMTY4MA==", "url": "https://github.com/returntocorp/semgrep/pull/2045#discussion_r524531680", "bodyText": "Should go under # Next not 0.31.1", "author": "brendongo", "createdAt": "2020-11-16T19:51:04Z", "path": "CHANGELOG.md", "diffHunk": "@@ -6,6 +6,10 @@ This project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html\n \n ## [0.31.1](https://github.com/returntocorp/semgrep/releases/tag/v0.31.1) - 2020-11-11\n \n+### Changed", "originalCommit": "fd664a2f805af1a5696e1c66bdfeb492ae206e16", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "057c3f09f20840471a053db559892bc75e8a17ca", "url": "https://github.com/returntocorp/semgrep/commit/057c3f09f20840471a053db559892bc75e8a17ca", "message": "Honor timeout for spacegrep calls.\nFixes https://github.com/returntocorp/semgrep/issues/2046", "committedDate": "2020-11-16T19:56:23Z", "type": "forcePushed"}, {"oid": "661e1030cc560a6ef066a42aca1bd642db8a1828", "url": "https://github.com/returntocorp/semgrep/commit/661e1030cc560a6ef066a42aca1bd642db8a1828", "message": "Fix changelog order", "committedDate": "2020-11-18T03:12:59Z", "type": "forcePushed"}, {"oid": "028f4e1e74ad88c7e409e51f0aee3595aba61d14", "url": "https://github.com/returntocorp/semgrep/commit/028f4e1e74ad88c7e409e51f0aee3595aba61d14", "message": "Two tests on minified files now pass, presumably because of the new\n30s timeout and because a timeout doesn't result in a failure.", "committedDate": "2020-11-18T04:31:47Z", "type": "forcePushed"}, {"oid": "bb5e11348590b08f5bc0d7443525bc0d4032546b", "url": "https://github.com/returntocorp/semgrep/commit/bb5e11348590b08f5bc0d7443525bc0d4032546b", "message": "Two tests on minified files now pass, presumably because of the new\n30s timeout and because a timeout doesn't result in a failure.", "committedDate": "2020-11-18T04:42:39Z", "type": "forcePushed"}, {"oid": "6e55d5ff0abc0cac5ec0ef577921cec905e57cfb", "url": "https://github.com/returntocorp/semgrep/commit/6e55d5ff0abc0cac5ec0ef577921cec905e57cfb", "message": "Set default timeout of 5 seconds on semgrep-core calls from semgrep\ninstead of no timeout.\n\nIncrease default timeout to 30 seconds (per file)\n\nCo-authored-by: Drew Dennison <drew@returntocorp.com>\n\nUpdate changelog\n\nHonor timeout for spacegrep calls.\nFixes https://github.com/returntocorp/semgrep/issues/2046\n\nFix changelog order\n\nTwo tests on minified files now pass, presumably because of the new\n30s timeout and because a timeout doesn't result in a failure.", "committedDate": "2020-11-18T04:53:33Z", "type": "forcePushed"}, {"oid": "85c5600e5deb7c4153d58605ff74801933a0d9c6", "url": "https://github.com/returntocorp/semgrep/commit/85c5600e5deb7c4153d58605ff74801933a0d9c6", "message": "Set default timeout of 5 seconds on semgrep-core calls from semgrep\ninstead of no timeout.\n\nIncrease default timeout to 30 seconds (per file)\n\nCo-authored-by: Drew Dennison <drew@returntocorp.com>\n\nUpdate changelog\n\nHonor timeout for spacegrep calls.\nFixes https://github.com/returntocorp/semgrep/issues/2046\n\nFix changelog order\n\nTwo tests on minified files now pass, presumably because of the new\n30s timeout and because a timeout doesn't result in a failure.", "committedDate": "2020-11-18T04:58:13Z", "type": "commit"}, {"oid": "85c5600e5deb7c4153d58605ff74801933a0d9c6", "url": "https://github.com/returntocorp/semgrep/commit/85c5600e5deb7c4153d58605ff74801933a0d9c6", "message": "Set default timeout of 5 seconds on semgrep-core calls from semgrep\ninstead of no timeout.\n\nIncrease default timeout to 30 seconds (per file)\n\nCo-authored-by: Drew Dennison <drew@returntocorp.com>\n\nUpdate changelog\n\nHonor timeout for spacegrep calls.\nFixes https://github.com/returntocorp/semgrep/issues/2046\n\nFix changelog order\n\nTwo tests on minified files now pass, presumably because of the new\n30s timeout and because a timeout doesn't result in a failure.", "committedDate": "2020-11-18T04:58:13Z", "type": "forcePushed"}]}