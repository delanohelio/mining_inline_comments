{"pr_number": 4779, "pr_title": "DHFPROD-5997: Can now exclude items already processed by a step", "pr_createdAt": "2020-10-28T00:18:58Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4779", "timeline": [{"oid": "2ed7805a559bc5b6a3f67fc0769d639ee2c98fbb", "url": "https://github.com/marklogic/marklogic-data-hub/commit/2ed7805a559bc5b6a3f67fc0769d639ee2c98fbb", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database.", "committedDate": "2020-10-28T01:02:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE2MzY2OQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4779#discussion_r513163669", "bodyText": "Another option here is options.excludeAlreadyProcessed && xs.boolean(options.excludeAlreadyProcessed)", "author": "ryanjdew", "createdAt": "2020-10-28T03:48:27Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/flow.sjs", "diffHunk": "@@ -139,6 +139,12 @@ class Flow {\n     let uris = null;\n     if (options.uris) {\n       uris = this.datahub.hubUtils.normalizeToArray(options.uris);\n+\n+      if (true === options.excludeAlreadyProcessed || \"true\" === options.excludeAlreadyProcessed) {", "originalCommit": "2ed7805a559bc5b6a3f67fc0769d639ee2c98fbb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5OTU5MA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4779#discussion_r513399590", "bodyText": "Thanks, I'll make that change. I initially only had the boolean true value there, but felt like supporting \"true\" was worthwhile in case a user accidentally puts in \"true\" in their options - seems expected that that would still work.", "author": "rjrudin", "createdAt": "2020-10-28T12:23:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE2MzY2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQxMTc2Mw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4779#discussion_r513411763", "bodyText": "Made the change, and also added a new trace event so that the impact of this feature can be logged.", "author": "rjrudin", "createdAt": "2020-10-28T12:44:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE2MzY2OQ=="}], "type": "inlineReview"}, {"oid": "5acef676cfc5d4c44e51526a1e37b0fd9d7f3fe1", "url": "https://github.com/marklogic/marklogic-data-hub/commit/5acef676cfc5d4c44e51526a1e37b0fd9d7f3fe1", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database.", "committedDate": "2020-10-28T12:42:27Z", "type": "forcePushed"}, {"oid": "f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213", "url": "https://github.com/marklogic/marklogic-data-hub/commit/f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database.", "committedDate": "2020-10-28T12:44:02Z", "type": "commit"}, {"oid": "f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213", "url": "https://github.com/marklogic/marklogic-data-hub/commit/f9fc48fb77a7d9cecb0df56141c0d6cfc07ac213", "message": "DHFPROD-5997: Can now exclude items already processed by a step\n\nThis introduces a new step option named \"excludeAlreadyProcessed\" that depends on some enhancements to Batch documents and a new range index in the jobs database.", "committedDate": "2020-10-28T12:44:02Z", "type": "forcePushed"}]}