{"pr_number": 4165, "pr_title": "DHFPROD-5066: Add routes and links for handling tile view", "pr_createdAt": "2020-06-29T16:40:33Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4165", "timeline": [{"oid": "a688e2e2021011de81383f7074236425fa56895c", "url": "https://github.com/marklogic/marklogic-data-hub/commit/a688e2e2021011de81383f7074236425fa56895c", "message": "DHFPROD-5066: Add routes and links for handling tile view\n\n- Refactored routing in Add.tsx to add routes for the different tile views.\n- Made the tool buttons links to the new routes to enable \"open in new window\" clicking etc.\n- Refactored user-context to remove props no longer needed (redirect, etc).\n- Removed some routes that are no longer relevant.\n- Refactored add-step-to-flow feature based on new routes.", "committedDate": "2020-06-29T16:43:57Z", "type": "forcePushed"}, {"oid": "b3ff2878772e30a2a1eab8a1e74fa5c542999759", "url": "https://github.com/marklogic/marklogic-data-hub/commit/b3ff2878772e30a2a1eab8a1e74fa5c542999759", "message": "DHFPROD-5066: Add routes and links for handling tile view\n\n- Refactored routing in Add.tsx to add routes for the different tile views.\n- Made the tool buttons links to the new routes to enable \"open in new window\" clicking etc.\n- Refactored user-context to remove props no longer needed (redirect, etc).\n- Removed some routes that are no longer relevant.\n- Refactored add-step-to-flow feature based on new routes.", "committedDate": "2020-06-29T17:05:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE0MjIzMA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447142230", "bodyText": "@wooldridge, the default view for explorer should be zerostate page, right now if you click on explorer icon from the toolbar it is being redirected to overview page. I did some debugging and adding this code inside the useEffect in tilesview.tsx file is fixing the issue. Please push those changes and I will test them again, also let me know if you run into any issues regarding this.\nif(props.id == 'explore')\n                setView(views[props.id], true)\n            else\n                setView(views[props.id])", "author": "Sanjeevani19", "createdAt": "2020-06-29T17:41:02Z", "path": "marklogic-data-hub-central/ui/src/pages/TilesView.tsx", "diffHunk": "@@ -83,8 +87,6 @@ const TilesView = (props) => {\n             setView(views[id])\n     }\n \n-    const location: any = useLocation();\n-\n     useEffect(() => {", "originalCommit": "b3ff2878772e30a2a1eab8a1e74fa5c542999759", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE0NDE3Ng==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447144176", "bodyText": "@Sanjeevani19, thanks so much for checking this! Thanks, @briantang, too!", "author": "wooldridge", "createdAt": "2020-06-29T17:44:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE0MjIzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE1MTY4NA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447151684", "bodyText": "Are these tests supposed to be skipped?", "author": "bsrikan", "createdAt": "2020-06-29T17:57:31Z", "path": "marklogic-data-hub-central/ui/src/pages/TilesView.test.tsx", "diffHunk": "@@ -35,7 +35,7 @@ describe('Tiles View component tests for Developer user', () => {\n         cleanup();\n     })\n \n-    test('Verify TilesView renders with the toolbar', async () => {\n+    xtest('Verify TilesView renders with the toolbar', async () => {", "originalCommit": "b3ff2878772e30a2a1eab8a1e74fa5c542999759", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE5MDYwMA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447190600", "bodyText": "@bsrikan, those xtests should be removed, thanks. Now those tests are failing so I need to update those tests. :-(", "author": "wooldridge", "createdAt": "2020-06-29T19:06:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE1MTY4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIwMDk0MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447200941", "bodyText": "Do we still need setView(views[props.id]); before the if condition?", "author": "bsrikan", "createdAt": "2020-06-29T19:26:04Z", "path": "marklogic-data-hub-central/ui/src/pages/TilesView.tsx", "diffHunk": "@@ -93,6 +93,10 @@ const TilesView = (props) => {\n             setCurrentNode(props.id); // TODO Handle multiple with nested objects\n             setOptions(tiles[props.id]);\n             setView(views[props.id]);\n+            if(props.id == 'explore')", "originalCommit": "e2c8622054ed8285c51e308dcaef81d95eb36f92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIxNTYzOA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447215638", "bodyText": "@bsrikan I don't think so we need the setView before if condition", "author": "Sanjeevani19", "createdAt": "2020-06-29T19:53:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIwMDk0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIyODIwNw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447228207", "bodyText": "Also what if we just call setView(views[props.id], true) instead of \"if\" condition?", "author": "bsrikan", "createdAt": "2020-06-29T20:17:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIwMDk0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIzMzEzMg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447233132", "bodyText": "@bsrikan The boolean parameter holds true only for explorer tile, for all other tiles we don't need the second parameter hence we need that condition", "author": "Sanjeevani19", "createdAt": "2020-06-29T20:26:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIwMDk0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIzNTcyMQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447235721", "bodyText": "True and exactly for the same reason -- \"zeroState: true\", wont impact other tiles -- I thought we can achieve the behavior we want with 1 line change.", "author": "bsrikan", "createdAt": "2020-06-29T20:31:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIwMDk0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIzNTc3Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447235777", "bodyText": "@wooldridge I see that we are no longer using onSelect function in tilesview.tsx ? do we still need that for anything ?", "author": "Sanjeevani19", "createdAt": "2020-06-29T20:31:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIwMDk0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI0MDQ5OA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447240498", "bodyText": "True and exactly for the same reason -- \"zeroState: true\", wont impact other tiles -- I thought we can achieve the behavior we want with 1 line change.\n\n@bsrikan right that works.", "author": "Sanjeevani19", "createdAt": "2020-06-29T20:40:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIwMDk0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM0Nzk2MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4165#discussion_r447347961", "bodyText": "@Sanjeevani19 I'll remove onSelect(), thanks! And I will update the setView().", "author": "wooldridge", "createdAt": "2020-06-30T01:08:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIwMDk0MQ=="}], "type": "inlineReview"}, {"oid": "809a90ab47eb5c0a8d6a3e119ed5cd3c9c83be24", "url": "https://github.com/marklogic/marklogic-data-hub/commit/809a90ab47eb5c0a8d6a3e119ed5cd3c9c83be24", "message": "DHFPROD-5066: Add routes and links for handling tile view\n\n- Refactored routing in Add.tsx to add routes for the different tile views.\n- Made the tool buttons links to the new routes to enable \"open in new window\" clicking etc.\n- Refactored user-context to remove props no longer needed (redirect, etc).\n- Removed some routes that are no longer relevant.\n- Refactored add-step-to-flow feature based on new routes.\n\nDHFPROD-5066: Fix setView method for Explorer\n\nDHFPROD-5066: fix xtests, remove onSelect(), fix setView()\n\nDHFPROD-5066: fix tiles view tests", "committedDate": "2020-06-30T07:48:47Z", "type": "forcePushed"}, {"oid": "1a9a38dfb06bf013f4282dcdc96321ac9a6016dc", "url": "https://github.com/marklogic/marklogic-data-hub/commit/1a9a38dfb06bf013f4282dcdc96321ac9a6016dc", "message": "DHFPROD-5066: Add routes and links for handling tile view\n\n- Refactored routing in Add.tsx to add routes for the different tile views.\n- Made the tool buttons links to the new routes to enable \"open in new window\" clicking etc.\n- Refactored user-context to remove props no longer needed (redirect, etc).\n- Removed some routes that are no longer relevant.\n- Refactored add-step-to-flow feature based on new routes.\n\nDHFPROD-5066: Fix setView method for Explorer\n\nDHFPROD-5066: fix xtests, remove onSelect(), fix setView()\n\nDHFPROD-5066: fix tiles view tests", "committedDate": "2020-06-30T16:56:13Z", "type": "commit"}, {"oid": "1a9a38dfb06bf013f4282dcdc96321ac9a6016dc", "url": "https://github.com/marklogic/marklogic-data-hub/commit/1a9a38dfb06bf013f4282dcdc96321ac9a6016dc", "message": "DHFPROD-5066: Add routes and links for handling tile view\n\n- Refactored routing in Add.tsx to add routes for the different tile views.\n- Made the tool buttons links to the new routes to enable \"open in new window\" clicking etc.\n- Refactored user-context to remove props no longer needed (redirect, etc).\n- Removed some routes that are no longer relevant.\n- Refactored add-step-to-flow feature based on new routes.\n\nDHFPROD-5066: Fix setView method for Explorer\n\nDHFPROD-5066: fix xtests, remove onSelect(), fix setView()\n\nDHFPROD-5066: fix tiles view tests", "committedDate": "2020-06-30T16:56:13Z", "type": "forcePushed"}]}