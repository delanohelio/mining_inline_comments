{"pr_number": 4455, "pr_title": "DHFPROD-5781: Selected facets display with the entity name when refreshing page.", "pr_createdAt": "2020-08-20T18:18:25Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4455", "timeline": [{"oid": "bfd396d14d8e62f8df4f4fa36be936bdf7428a54", "url": "https://github.com/marklogic/marklogic-data-hub/commit/bfd396d14d8e62f8df4f4fa36be936bdf7428a54", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page.", "committedDate": "2020-08-20T18:29:49Z", "type": "forcePushed"}, {"oid": "98b693a0767299c689d55d15f6c19652e196709b", "url": "https://github.com/marklogic/marklogic-data-hub/commit/98b693a0767299c689d55d15f6c19652e196709b", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page.", "committedDate": "2020-08-20T18:32:45Z", "type": "forcePushed"}, {"oid": "0ed5c1d3f52a5557fe5aae557d43d4ecda4bee63", "url": "https://github.com/marklogic/marklogic-data-hub/commit/0ed5c1d3f52a5557fe5aae557d43d4ecda4bee63", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page.", "committedDate": "2020-08-20T18:34:20Z", "type": "forcePushed"}, {"oid": "3a9ad43e0db5778e15cbb1fd83bd878fb211154d", "url": "https://github.com/marklogic/marklogic-data-hub/commit/3a9ad43e0db5778e15cbb1fd83bd878fb211154d", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page.", "committedDate": "2020-08-20T18:36:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIxMDQ2NA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#discussion_r474210464", "bodyText": "verify source view of the document test is already testing for browser refresh. Can we pls add couple of steps there to verify this instead.", "author": "bsrikan", "createdAt": "2020-08-20T19:11:19Z", "path": "marklogic-data-hub-central/ui/e2e/cypress/integration/explorer/scenarios.json.tsx", "diffHunk": "@@ -200,6 +200,23 @@ describe('json scenario for snippet on browse documents page', () => {\n     cy.contains('Show the processed data').should('be.visible');\n   });\n \n+  it('verify selected facet name persist after refreshing the page', () => {\n+    browsePage.selectEntity('Person');\n+    browsePage.getSelectedEntity().should('contain', 'Person');\n+    browsePage.getFacetItemCheckbox('fname', 'Alexandra').click();\n+    browsePage.getGreySelectedFacets('Alexandra').should('exist');\n+    browsePage.getFacetApplyButton().click();\n+    browsePage.getFacetItemCheckbox('fname', 'Alexandra').should('be.checked');\n+    browsePage.getFacetSearchSelectionCount('fname').should('contain', '1');\n+    cy.reload();", "originalCommit": "3a9ad43e0db5778e15cbb1fd83bd878fb211154d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxODg5Mw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#discussion_r474318893", "bodyText": "Fixed. Thanks.", "author": "timur-isangulov", "createdAt": "2020-08-20T23:05:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIxMDQ2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIxMjk5MA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#discussion_r474212990", "bodyText": "Can we make use of data-testid when its available. I want to ultimately get rid of all data-cy, since data-testid can work both in e2e and RTL tests.\n\nAnd since this is a button, can you try if .contains(\"text\") work.", "author": "bsrikan", "createdAt": "2020-08-20T19:15:57Z", "path": "marklogic-data-hub-central/ui/e2e/cypress/support/pages/browse.tsx", "diffHunk": "@@ -140,6 +140,10 @@ class BrowsePage {\n     return cy.get('#selected-facets [data-cy=\"clear-' + facet + '\"]');\n   }\n \n+  getAppliedFacetName(facet: string) {", "originalCommit": "3a9ad43e0db5778e15cbb1fd83bd878fb211154d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxOTkyOQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4455#discussion_r474319929", "bodyText": "Changed to data-testid locator. We shouldn't use contains() for this step because the exact string needs to be verified. e.g. expected \"email: coleadams39@nutralab.com\" not \"Customer.email: coleadams39@nutralab.com\"", "author": "timur-isangulov", "createdAt": "2020-08-20T23:09:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIxMjk5MA=="}], "type": "inlineReview"}, {"oid": "6215fce9250b7ab179cebe991cd923938089fb4e", "url": "https://github.com/marklogic/marklogic-data-hub/commit/6215fce9250b7ab179cebe991cd923938089fb4e", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page.", "committedDate": "2020-08-20T23:04:49Z", "type": "commit"}, {"oid": "6215fce9250b7ab179cebe991cd923938089fb4e", "url": "https://github.com/marklogic/marklogic-data-hub/commit/6215fce9250b7ab179cebe991cd923938089fb4e", "message": "DHFPROD-5781: Selected facets display with the entity name when refreshing page.", "committedDate": "2020-08-20T23:04:49Z", "type": "forcePushed"}]}