{"pr_number": 4396, "pr_title": "DHFPROD-5391: Improper position of spinner in explorer tile results view", "pr_createdAt": "2020-08-13T18:09:44Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4396", "timeline": [{"oid": "4ad650b32d74eace05edefd05a4a75609e84502e", "url": "https://github.com/marklogic/marklogic-data-hub/commit/4ad650b32d74eace05edefd05a4a75609e84502e", "message": "DHFPROD-5391: Improper position of spinner in explorer tile results view", "committedDate": "2020-08-13T18:13:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1NzY2NQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396#discussion_r470157665", "bodyText": "I think we can remove beforeEach and the enzyme test lines 35-51, since the RTL test below verifies the same test better.", "author": "bsrikan", "createdAt": "2020-08-13T18:22:59Z", "path": "marklogic-data-hub-central/ui/src/components/sidebar/sidebar.test.tsx", "diffHunk": "@@ -4,47 +4,70 @@ import Sidebar from './sidebar';\n import { entityFromJSON, entityParser } from '../../util/data-conversion';\n import modelResponse from '../../assets/mock-data/model-response';\n import searchPayloadFacets from '../../assets/mock-data/search-payload-facets';\n+import { render, fireEvent } from '@testing-library/react';\n+\n \n describe(\"Sidebar component\", () => {\n-    let wrapper;\n-    const parsedModelData = entityFromJSON(modelResponse);\n-    const entityDefArray = entityParser(parsedModelData);\n-\n-    describe('All Entities Dropdown Option', () => {\n-      beforeEach(() => {\n-        wrapper = shallow(\n-          <Sidebar\n-            entityDefArray={entityDefArray}\n-            facets={searchPayloadFacets}\n-            selectedEntities={[]}\n-            facetRender = {jest.fn()}\n-            checkFacetRender = {jest.fn()}\n-          />\n-        )\n-      });\n+  let wrapper;\n+  const parsedModelData = entityFromJSON(modelResponse);\n+  const entityDefArray = entityParser(parsedModelData);\n \n-      it('should render only Hub Properties Panel', () => {\n-        expect(wrapper.exists('#hub-properties')).toBe(true);\n-        expect(wrapper.exists('#entity-properties')).toBe(false);\n-      });\n+  describe('All Entities Dropdown Option', () => {\n+    beforeEach(() => {\n+      wrapper = shallow(\n+        <Sidebar\n+          entityDefArray={entityDefArray}\n+          facets={searchPayloadFacets}\n+          selectedEntities={[]}\n+          facetRender={jest.fn()}\n+          checkFacetRender={jest.fn()}\n+        />\n+      )\n     });\n \n-    describe('An Entity is selected', () => {\n-      beforeEach(() => {\n-        wrapper = shallow(\n-          <Sidebar\n-            entityDefArray={entityDefArray}\n-            facets={searchPayloadFacets}\n-            selectedEntities={['Customer']}\n-            facetRender = {jest.fn()}\n-            checkFacetRender = {jest.fn()}\n-          />\n-        )\n-      });\n+    it('should render only Hub Properties Panel', () => {\n+      expect(wrapper.exists('#hub-properties')).toBe(true);\n+      expect(wrapper.exists('#entity-properties')).toBe(false);\n+    });\n+  });\n \n-      it('should render both Entity and Hub Properties panel', () => {\n-        expect(wrapper.exists('#hub-properties')).toBe(true);\n-        expect(wrapper.exists('#entity-properties')).toBe(true);\n-      });\n+  describe('An Entity is selected', () => {\n+    beforeEach(() => {\n+      wrapper = shallow(\n+        <Sidebar\n+          entityDefArray={entityDefArray}\n+          facets={searchPayloadFacets}\n+          selectedEntities={['Customer']}\n+          facetRender={jest.fn()}\n+          checkFacetRender={jest.fn()}\n+        />\n+      )\n     });\n+\n+    it('should render both Entity and Hub Properties panel', () => {\n+      expect(wrapper.exists('#hub-properties')).toBe(true);\n+      expect(wrapper.exists('#entity-properties')).toBe(true);\n+    });\n+  });\n+", "originalCommit": "4ad650b32d74eace05edefd05a4a75609e84502e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIwOTcxNg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396#discussion_r470209716", "bodyText": "Done. Thanks.", "author": "timur-isangulov", "createdAt": "2020-08-13T19:53:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1NzY2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1OTc3NA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396#discussion_r470159774", "bodyText": "We can delete this suite as well lines 15-32. and the suite below with enzyme test.\nThe 2 tests here is when an entity is selected and when All Entities is selected and I think we can have 2 tests in 1 describe, than having 2 describes within a describe.\n@timur-isangulov can you pls clean this up a little and add an RTL test for All entities similar to your RTL test for Customer.", "author": "bsrikan", "createdAt": "2020-08-13T18:26:54Z", "path": "marklogic-data-hub-central/ui/src/components/sidebar/sidebar.test.tsx", "diffHunk": "@@ -4,47 +4,70 @@ import Sidebar from './sidebar';\n import { entityFromJSON, entityParser } from '../../util/data-conversion';\n import modelResponse from '../../assets/mock-data/model-response';\n import searchPayloadFacets from '../../assets/mock-data/search-payload-facets';\n+import { render, fireEvent } from '@testing-library/react';\n+\n \n describe(\"Sidebar component\", () => {\n-    let wrapper;\n-    const parsedModelData = entityFromJSON(modelResponse);\n-    const entityDefArray = entityParser(parsedModelData);\n-\n-    describe('All Entities Dropdown Option', () => {\n-      beforeEach(() => {\n-        wrapper = shallow(\n-          <Sidebar\n-            entityDefArray={entityDefArray}\n-            facets={searchPayloadFacets}\n-            selectedEntities={[]}\n-            facetRender = {jest.fn()}\n-            checkFacetRender = {jest.fn()}\n-          />\n-        )\n-      });\n+  let wrapper;\n+  const parsedModelData = entityFromJSON(modelResponse);\n+  const entityDefArray = entityParser(parsedModelData);\n \n-      it('should render only Hub Properties Panel', () => {\n-        expect(wrapper.exists('#hub-properties')).toBe(true);\n-        expect(wrapper.exists('#entity-properties')).toBe(false);\n-      });\n+  describe('All Entities Dropdown Option', () => {\n+    beforeEach(() => {\n+      wrapper = shallow(\n+        <Sidebar\n+          entityDefArray={entityDefArray}\n+          facets={searchPayloadFacets}\n+          selectedEntities={[]}\n+          facetRender={jest.fn()}\n+          checkFacetRender={jest.fn()}\n+        />\n+      )\n     });\n \n-    describe('An Entity is selected', () => {\n-      beforeEach(() => {\n-        wrapper = shallow(\n-          <Sidebar\n-            entityDefArray={entityDefArray}\n-            facets={searchPayloadFacets}\n-            selectedEntities={['Customer']}\n-            facetRender = {jest.fn()}\n-            checkFacetRender = {jest.fn()}\n-          />\n-        )\n-      });\n+    it('should render only Hub Properties Panel', () => {\n+      expect(wrapper.exists('#hub-properties')).toBe(true);\n+      expect(wrapper.exists('#entity-properties')).toBe(false);\n+    });\n+  });", "originalCommit": "4ad650b32d74eace05edefd05a4a75609e84502e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIwOTgyMw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4396#discussion_r470209823", "bodyText": "Done. Thanks.", "author": "timur-isangulov", "createdAt": "2020-08-13T19:54:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1OTc3NA=="}], "type": "inlineReview"}, {"oid": "3498f84a0e1d8b9f6aae78052bedf7ab82002dfb", "url": "https://github.com/marklogic/marklogic-data-hub/commit/3498f84a0e1d8b9f6aae78052bedf7ab82002dfb", "message": "DHFPROD-5391: Improper position of spinner in explorer tile results view", "committedDate": "2020-08-13T19:52:54Z", "type": "commit"}, {"oid": "3498f84a0e1d8b9f6aae78052bedf7ab82002dfb", "url": "https://github.com/marklogic/marklogic-data-hub/commit/3498f84a0e1d8b9f6aae78052bedf7ab82002dfb", "message": "DHFPROD-5391: Improper position of spinner in explorer tile results view", "committedDate": "2020-08-13T19:52:54Z", "type": "forcePushed"}]}