{"pr_number": 4212, "pr_title": "DHFPROD-5288: Handle a case where / character is present in the prima\u2026", "pr_createdAt": "2020-07-13T23:34:01Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4212", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY0OTc3MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4212#discussion_r454649771", "bodyText": "Is this necessary to get this to work? Triple equal is better for strict equality checks.", "author": "brucean52", "createdAt": "2020-07-14T21:15:19Z", "path": "marklogic-data-hub-central/ui/src/components/detail-header/detail-header.tsx", "diffHunk": "@@ -46,7 +46,7 @@ const DetailHeader: React.FC<Props> = (props) => {\n           Object.keys(props.document.envelope.instance).forEach(instance => {\n             if (instance !== 'info') {\n               Object.keys(props.document.envelope.instance[instance]).forEach(function (key) {\n-                if (props.primaryKey === props.document.envelope.instance[instance][key]) {\n+                if (props.primaryKey == props.document.envelope.instance[instance][key]) {", "originalCommit": "c9e682e1a2f9819755f6c00473a38edbab10c62b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY1OTA1MA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4212#discussion_r454659050", "bodyText": "They are not the same datatype.", "author": "timur-isangulov", "createdAt": "2020-07-14T21:34:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY0OTc3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY3MzAwMw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4212#discussion_r454673003", "bodyText": "Why are we using primaryKeyValue within the function encodeURI ? If 'encodeURI' is a generic function to encode any property then should we rename it to something like 'encodeProperty' ?", "author": "xnikhil08", "createdAt": "2020-07-14T22:05:47Z", "path": "marklogic-data-hub-central/ui/src/components/results-tabular-view/results-tabular-view.tsx", "diffHunk": "@@ -154,7 +154,7 @@ const ResultsTabularView = (props) => {\n         let primaryKeyValue = item.primaryKey?.propertyValue;\n         let isUri = item.primaryKey?.propertyPath === 'uri';\n         let uri = encodeURIComponent(item.uri);\n-        let path = { pathname: `/detail/${isUri ? '-' : primaryKeyValue}/${uri}` };\n+        let path = { pathname: `/detail/${isUri ? '-' : encodeURI(primaryKeyValue)}/${uri}` };", "originalCommit": "c9e682e1a2f9819755f6c00473a38edbab10c62b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY3OTM4NQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4212#discussion_r454679385", "bodyText": "encodeURI is a standard method to code a string for URL use. But since it's a string and not the full URL, the method should be encodeURIComponent.", "author": "brucean52", "createdAt": "2020-07-14T22:22:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY3MzAwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY3OTUyNA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4212#discussion_r454679524", "bodyText": "It actually should be encodeURIComponent not encodeURI. Thanks for noticing that. It's JS global function.", "author": "timur-isangulov", "createdAt": "2020-07-14T22:22:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY3MzAwMw=="}], "type": "inlineReview"}, {"oid": "244d431396e277792f402b1965151a3d28ce95b1", "url": "https://github.com/marklogic/marklogic-data-hub/commit/244d431396e277792f402b1965151a3d28ce95b1", "message": "DHFPROD-5288: Handle a case where / character is present in the primary key value", "committedDate": "2020-07-14T22:17:18Z", "type": "forcePushed"}, {"oid": "c9ed299281b62f0a4a74add6fc12fb5cb4f9e60e", "url": "https://github.com/marklogic/marklogic-data-hub/commit/c9ed299281b62f0a4a74add6fc12fb5cb4f9e60e", "message": "DHFPROD-5288: Handle a case where / character is present in the primary key value", "committedDate": "2020-07-14T22:33:43Z", "type": "forcePushed"}, {"oid": "c446493718091d93bde898298b4201e1ad3efb10", "url": "https://github.com/marklogic/marklogic-data-hub/commit/c446493718091d93bde898298b4201e1ad3efb10", "message": "DHFPROD-5288: Handle a case where / character is present in the primary key value", "committedDate": "2020-07-15T17:42:16Z", "type": "forcePushed"}, {"oid": "52d1863be63f95f7aa25ca9312567b47827c59c1", "url": "https://github.com/marklogic/marklogic-data-hub/commit/52d1863be63f95f7aa25ca9312567b47827c59c1", "message": "DHFPROD-5288: Handle a case where / character is present in the primary key value", "committedDate": "2020-07-15T17:47:00Z", "type": "forcePushed"}, {"oid": "e4c472e9699ee80118c4794c066bd9aa3df6359a", "url": "https://github.com/marklogic/marklogic-data-hub/commit/e4c472e9699ee80118c4794c066bd9aa3df6359a", "message": "DHFPROD-5288: Handle a case where / character is present in the primary key value", "committedDate": "2020-07-15T23:02:33Z", "type": "forcePushed"}, {"oid": "cc842a68f3221cb9ed779205ebcfae17c9fb78fa", "url": "https://github.com/marklogic/marklogic-data-hub/commit/cc842a68f3221cb9ed779205ebcfae17c9fb78fa", "message": "DHFPROD-5288: Handle a case where / character is present in the primary key value", "committedDate": "2020-07-15T23:10:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQyNjIxMw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4212#discussion_r455426213", "bodyText": "@timur-isangulov we no longer need wait times, the tests pass without wait times with the new methods srikanth added. I have made changes to all the tests to work without wait times.", "author": "Sanjeevani19", "createdAt": "2020-07-15T23:40:51Z", "path": "marklogic-data-hub-central/ui/e2e/cypress/integration/explorer/scenarios.json.tsx", "diffHunk": "@@ -153,17 +167,14 @@ xdescribe('json scenario for table on browse documents page', () => {\n     cy.visit('/');\n     cy.contains(Application.title);\n     cy.loginAsDeveloper().withRequest();\n-    // temporary change as tile is not working\n-    homePage.getTitle().click();\n-    cy.wait(500);\n-    // temporary change end here\n-    homePage.getBrowseEntities().click();\n-    cy.wait(2000);\n-    browsePage.clickTableView();\n-    browsePage.selectEntity('All Entities');\n+    cy.location('pathname', { timeout: 10000 }).should('include', '/tiles');\n+    cy.wait(200);", "originalCommit": "cc842a68f3221cb9ed779205ebcfae17c9fb78fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTgyNzM3NA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4212#discussion_r455827374", "bodyText": "Removed. Thanks.", "author": "timur-isangulov", "createdAt": "2020-07-16T14:25:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQyNjIxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQyNjQ3MA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4212#discussion_r455426470", "bodyText": "@timur-isangulov the default view is table so we don't need this line to test table scenarios", "author": "Sanjeevani19", "createdAt": "2020-07-15T23:41:43Z", "path": "marklogic-data-hub-central/ui/e2e/cypress/integration/explorer/scenarios.json.tsx", "diffHunk": "@@ -153,17 +167,14 @@ xdescribe('json scenario for table on browse documents page', () => {\n     cy.visit('/');\n     cy.contains(Application.title);\n     cy.loginAsDeveloper().withRequest();\n-    // temporary change as tile is not working\n-    homePage.getTitle().click();\n-    cy.wait(500);\n-    // temporary change end here\n-    homePage.getBrowseEntities().click();\n-    cy.wait(2000);\n-    browsePage.clickTableView();\n-    browsePage.selectEntity('All Entities');\n+    cy.location('pathname', { timeout: 10000 }).should('include', '/tiles');\n+    cy.wait(200);\n+    cy.waitUntil(() => toolbar.getExploreToolbarIcon()).click();\n+    cy.waitUntil(() => browsePage.getExploreButton()).click();\n+    browsePage.getTableView();", "originalCommit": "cc842a68f3221cb9ed779205ebcfae17c9fb78fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTgyNzUwNA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4212#discussion_r455827504", "bodyText": "Removed. Thanks.", "author": "timur-isangulov", "createdAt": "2020-07-16T14:25:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTQyNjQ3MA=="}], "type": "inlineReview"}, {"oid": "08950d068f0a2db8a343767b58a915d59e5a8fff", "url": "https://github.com/marklogic/marklogic-data-hub/commit/08950d068f0a2db8a343767b58a915d59e5a8fff", "message": "DHFPROD-5288: Handle a case where / character is present in the primary key value", "committedDate": "2020-07-16T14:24:55Z", "type": "commit"}, {"oid": "08950d068f0a2db8a343767b58a915d59e5a8fff", "url": "https://github.com/marklogic/marklogic-data-hub/commit/08950d068f0a2db8a343767b58a915d59e5a8fff", "message": "DHFPROD-5288: Handle a case where / character is present in the primary key value", "committedDate": "2020-07-16T14:24:55Z", "type": "forcePushed"}]}