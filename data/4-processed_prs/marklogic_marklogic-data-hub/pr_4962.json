{"pr_number": 4962, "pr_title": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions", "pr_createdAt": "2020-12-08T21:02:50Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4962", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgxNDQwOQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#discussion_r538814409", "bodyText": "@srinathgit  Can you test one more thing - see what happens if the step module is present but has a compilation error in it. I think we may get the same error, in which case we really ought to include \"e.stack\" at the end of the message - e.g. \"; cause: ${e.stack}\".", "author": "rjrudin", "createdAt": "2020-12-08T21:18:17Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/step.sjs", "diffHunk": "@@ -116,7 +116,7 @@ class Step {\n     try {\n       stepModule = this.hubUtils.retrieveModuleLibrary(moduleUri);\n     } catch (e) {\n-      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read permission to this module.`);\n+      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read and execute permission to this module`);", "originalCommit": "75e8eebd91c13648752e9dd77874b66b1a6efcee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk0MzA5MA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#discussion_r538943090", "bodyText": "We cannot have the same message if there is compilation error right ? I have changed the message to\n`Unable to run module: ${moduleUri}; cause: ${e.stack}`\n\nLet me know if that's ok.", "author": "srinathgit", "createdAt": "2020-12-09T01:50:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgxNDQwOQ=="}], "type": "inlineReview"}, {"oid": "83b07f8e06e9964c5207ffc26c423e4607ab25e6", "url": "https://github.com/marklogic/marklogic-data-hub/commit/83b07f8e06e9964c5207ffc26c423e4607ab25e6", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions", "committedDate": "2020-12-09T01:50:06Z", "type": "forcePushed"}, {"oid": "98736bc18aa7fc85a86aab7ce3e6bf3a53e95d54", "url": "https://github.com/marklogic/marklogic-data-hub/commit/98736bc18aa7fc85a86aab7ce3e6bf3a53e95d54", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions", "committedDate": "2020-12-09T02:14:34Z", "type": "forcePushed"}, {"oid": "09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd", "url": "https://github.com/marklogic/marklogic-data-hub/commit/09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions", "committedDate": "2020-12-09T03:13:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTMxMjI4Mw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4962#discussion_r539312283", "bodyText": "That looks good to me.", "author": "rjrudin", "createdAt": "2020-12-09T13:38:10Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/step.sjs", "diffHunk": "@@ -116,7 +116,10 @@ class Step {\n     try {\n       stepModule = this.hubUtils.retrieveModuleLibrary(moduleUri);\n     } catch (e) {\n-      httpUtils.throwBadRequest(`Unable to access module: ${moduleUri}. Verify that this module is in your modules database and that your user account has a role that grants read permission to this module.`);\n+      if(e.stack && e.stack.includes(\"XDMP-MODNOTFOUND\")){", "originalCommit": "09ea88c3d270b6ceaeaac8d62d1e4adddd68d4bd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b26cad28ae756972b6edb33c4fdf691893322425", "url": "https://github.com/marklogic/marklogic-data-hub/commit/b26cad28ae756972b6edb33c4fdf691893322425", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions", "committedDate": "2020-12-09T18:20:42Z", "type": "commit"}, {"oid": "b26cad28ae756972b6edb33c4fdf691893322425", "url": "https://github.com/marklogic/marklogic-data-hub/commit/b26cad28ae756972b6edb33c4fdf691893322425", "message": "DHFPROD-4947:Provide info when main.sjs is not found or user doesn't required permissions", "committedDate": "2020-12-09T18:20:42Z", "type": "forcePushed"}]}