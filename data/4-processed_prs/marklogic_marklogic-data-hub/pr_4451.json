{"pr_number": 4451, "pr_title": "DHFPROD-5771: Stabilize e2e and handle async XHR requests", "pr_createdAt": "2020-08-20T05:45:58Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4451", "timeline": [{"oid": "7933d8f7862f506962374f201c65cd0b50c3bba2", "url": "https://github.com/marklogic/marklogic-data-hub/commit/7933d8f7862f506962374f201c65cd0b50c3bba2", "message": "DHFPROD-5771: Stabilize e2e and handle async XHR requests", "committedDate": "2020-08-20T05:44:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI4MTY4Mw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4451#discussion_r474281683", "bodyText": "@bsrikan I remember adding this line fixed some of the scenarios.json and xml e2e tests because some times it's hard to find the expand icon while the page is still loading and the test fails on click, that's the reason we thought of clicking on hub properties text. Any reason for this change ?", "author": "Sanjeevani19", "createdAt": "2020-08-20T21:25:51Z", "path": "marklogic-data-hub-central/ui/e2e/cypress/support/pages/browse.tsx", "diffHunk": "@@ -185,7 +186,7 @@ class BrowsePage {\n   }\n \n   getHubPropertiesExpanded() {\n-    return cy.get(\"#hub-properties > div\").eq(1).invoke('show').click();", "originalCommit": "7933d8f7862f506962374f201c65cd0b50c3bba2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI4ODI5Ng==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4451#discussion_r474288296", "bodyText": "This PR fixes the \"page is still loading and the test fails on click\" issue and so the change is now working consistently\ncy.get(\"#hub-properties > div\").eq(1).invoke('show').click(); performs click action on the first div instead of hub-properties text. There were other tests failing in Timur's PR with this locator where click was performed on 2nd div which is inactive\n\n\n3. Earlier Cypress was indicating that the click was being attempted on an invisible element in the Command Log. Now it doesnt\n\nTo summarize, this PR is fixing the root cause and it enables us to use simple locators.", "author": "bsrikan", "createdAt": "2020-08-20T21:40:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI4MTY4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI5MDQxMw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4451#discussion_r474290413", "bodyText": "Added info: I could have changed it to use data-testid=\"toggle\", but there is a duplicate data-testid for entity properties, which should be fixed, since locator id should be unique.", "author": "bsrikan", "createdAt": "2020-08-20T21:45:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDI4MTY4Mw=="}], "type": "inlineReview"}]}