{"pr_number": 3912, "pr_title": "DHFPROD-4768:Fix route changes", "pr_createdAt": "2020-05-04T20:56:22Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/3912", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczMjk1OA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r419732958", "bodyText": "This was '/api/environment/project' earlier. Should this be project-info now?", "author": "bsrikan", "createdAt": "2020-05-04T21:14:53Z", "path": "marklogic-data-hub-central/ui/src/App.tsx", "diffHunk": "@@ -77,6 +77,16 @@ const App: React.FC<Props> = ({history, location}) => {\n \n   }, [user]);\n \n+  useEffect(() => {\n+    // On route change...\n+    axios.get('/api/environment/project-info')", "originalCommit": "50d1523a0f43484c70cb7d8a024040dd4b56b313", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczNjc1Mg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r419736752", "bodyText": "yeah I believe this snippet is meant for route change (which I had removed in my earlier PR).  It should just call a valid endpoint. If user is logged out due to session expiry, this will enable the page to be redirected to login page. @wooldridge can you please confirm if that is the case", "author": "srinathgit", "createdAt": "2020-05-04T21:22:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczMjk1OA=="}], "type": "inlineReview"}, {"oid": "6e51cf1b896dc2ca75e01810ff40f11ef217a404", "url": "https://github.com/marklogic/marklogic-data-hub/commit/6e51cf1b896dc2ca75e01810ff40f11ef217a404", "message": "DHFPROD-4768:Remove artifact write permission for 'admin' and fix redirect", "committedDate": "2020-05-05T18:25:54Z", "type": "forcePushed"}, {"oid": "73f6ef58d55ec8c428ed5e4016609f47d3e5af8a", "url": "https://github.com/marklogic/marklogic-data-hub/commit/73f6ef58d55ec8c428ed5e4016609f47d3e5af8a", "message": "DHFPROD-4768:Fix route changes", "committedDate": "2020-05-05T20:00:45Z", "type": "commit"}, {"oid": "73f6ef58d55ec8c428ed5e4016609f47d3e5af8a", "url": "https://github.com/marklogic/marklogic-data-hub/commit/73f6ef58d55ec8c428ed5e4016609f47d3e5af8a", "message": "DHFPROD-4768:Fix route changes", "committedDate": "2020-05-05T20:00:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc1NzQ0Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r420757447", "bodyText": "When would this be called? I don't understand the concept of \"reset environment\" in HC on DHS, as the user has no control over the environment.", "author": "rjrudin", "createdAt": "2020-05-06T12:39:41Z", "path": "marklogic-data-hub-central/ui/src/util/environment.tsx", "diffHunk": "@@ -32,4 +30,8 @@ export function getEnvironment():any {\n     }\n }\n \n-export default { setEnvironment, getEnvironment };\n+export function resetEnvironment() {", "originalCommit": "73f6ef58d55ec8c428ed5e4016609f47d3e5af8a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg2MzIwNQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r420863205", "bodyText": "The function resetEnvironment() ensures the project name header link (currently hardcoded to \"Data Hub Project\") in the UI is not displayed when user logs out.", "author": "srinathgit", "createdAt": "2020-05-06T15:02:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc1NzQ0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg5MDY0OA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r420890648", "bodyText": "That name will soon be the DHS service name, which is intended to be a meaningful identifier to the user. I think it makes sense to have that displayed in the login page so the user knows which DHS instance they're logging into. Seems like a requirements question, check with @sbayatpur .", "author": "rjrudin", "createdAt": "2020-05-06T15:38:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc1NzQ0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDkzODE3OA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3912#discussion_r420938178", "bodyText": "Yeah, that's a different story that will probably taken up next sprint. In this PR, I am just adding back the snippet I had removed inadvertently in my previous PR for removing unwanted code from HC", "author": "srinathgit", "createdAt": "2020-05-06T16:46:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc1NzQ0Nw=="}], "type": "inlineReview"}]}