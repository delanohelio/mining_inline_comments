{"pr_number": 4744, "pr_title": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x", "pr_createdAt": "2020-10-21T17:17:24Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4744", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ3Mzk3Mg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744#discussion_r509473972", "bodyText": "We will not be able to get temporal collections and the docs will be written to regular collections, but that's what happens in 5.2.x anyways but will this not ensure that writing temporal docs doesn't work for dh-operator in 5.3.0 as well ?", "author": "srinathgit", "createdAt": "2020-10-21T17:26:35Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/marklogic-data-hub-spark-connector/bulkIngester.sjs", "diffHunk": "@@ -30,22 +30,22 @@ const HubUtils = require(\"/data-hub/5/impl/hub-utils.sjs\");\n const state = fn.head(xdmp.fromJSON(endpointState));\n \n const temporal = require(\"/MarkLogic/temporal.xqy\");\n-const temporalLib = require(\"/data-hub/5/temporal/hub-temporal.sjs\");\n \n const work = fn.head(xdmp.fromJSON(workUnit));\n \n const uriPrefix = work.uriprefix != null ? work.uriprefix : \"\";\n \n const collections = work.collections != null ? work.collections.split(',') : [];\n-const temporalCollections = temporalLib.getTemporalCollections().toArray().reduce((acc, col) => {\n+\n+const temporalCollections = temporal.collections().toArray().reduce((acc, col) => {", "originalCommit": "b1a314d31f015d2124e3155cb8bcde27aee5eade", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTUxNTY3OA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4744#discussion_r509515678", "bodyText": "That's correct. We have to defer to something that works on 5.2. If Ernie wants to do temporal document insertion and that doesn't depend on the user having the temporal-admin role, he'll need to provide his own custom endpoint.", "author": "rjrudin", "createdAt": "2020-10-21T17:55:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ3Mzk3Mg=="}], "type": "inlineReview"}, {"oid": "49fd3292983e85cfee6ec813573e7f3d8e5a231a", "url": "https://github.com/marklogic/marklogic-data-hub/commit/49fd3292983e85cfee6ec813573e7f3d8e5a231a", "message": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x", "committedDate": "2020-10-22T13:02:52Z", "type": "forcePushed"}, {"oid": "c81e27cd986cf0ba53087a306d610bda4bc03f92", "url": "https://github.com/marklogic/marklogic-data-hub/commit/c81e27cd986cf0ba53087a306d610bda4bc03f92", "message": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x", "committedDate": "2020-10-22T13:03:09Z", "type": "commit"}, {"oid": "c81e27cd986cf0ba53087a306d610bda4bc03f92", "url": "https://github.com/marklogic/marklogic-data-hub/commit/c81e27cd986cf0ba53087a306d610bda4bc03f92", "message": "DHFPROD-6095: Fixing Spark connector so it runs on DHF 5.2.x", "committedDate": "2020-10-22T13:03:09Z", "type": "forcePushed"}]}