{"pr_number": 4851, "pr_title": "DHFPROD-6227: Explorer failing cypress tests.", "pr_createdAt": "2020-11-11T22:58:10Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4851", "timeline": [{"oid": "aa2e3265384c78d40d59c7d362bb443ec325852f", "url": "https://github.com/marklogic/marklogic-data-hub/commit/aa2e3265384c78d40d59c7d362bb443ec325852f", "message": "DHFPROD-6227: Explorer failing cypress tests", "committedDate": "2020-11-11T23:00:44Z", "type": "forcePushed"}, {"oid": "6a4e56b567b4fe738f6e11598bb9642d6217028e", "url": "https://github.com/marklogic/marklogic-data-hub/commit/6a4e56b567b4fe738f6e11598bb9642d6217028e", "message": "DHFPROD-6227: Explorer failing cypress tests", "committedDate": "2020-11-12T16:53:35Z", "type": "commit"}, {"oid": "6a4e56b567b4fe738f6e11598bb9642d6217028e", "url": "https://github.com/marklogic/marklogic-data-hub/commit/6a4e56b567b4fe738f6e11598bb9642d6217028e", "message": "DHFPROD-6227: Explorer failing cypress tests", "committedDate": "2020-11-12T16:53:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI3ODIzMA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4851#discussion_r523278230", "bodyText": "Did we try adding waitUntil on the next line? Since browsePage.getSortIndicatorDesc() might be returning a cy.get() output so we can add a waitUntil() there, forcing the browser to wait until it fetches the element.\nBasically the goal is to exploit every possible scenario before adding explicit waits in our test cases since there would always be 1 out of 100 or 1000 cases when it might fail because of timeout delay more than the wait time limit.", "author": "xnikhil08", "createdAt": "2020-11-13T23:07:49Z", "path": "marklogic-data-hub-central/ui/e2e/cypress/integration/explore/scenarios.queries.tsx", "diffHunk": "@@ -382,6 +383,7 @@ describe('save/manage queries scenarios, developer role', () => {\n         browsePage.selectQuery('reset-query');\n         cy.waitForAsyncRequest();\n         browsePage.getAppliedFacets('Adams Cole').should('exist');\n+        cy.wait(500)", "originalCommit": "6a4e56b567b4fe738f6e11598bb9642d6217028e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc2MzU3Ng==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4851#discussion_r524763576", "bodyText": "Yes I did try to add waitUntil but it didn't help reliably while running tests on DHS.", "author": "timur-isangulov", "createdAt": "2020-11-16T23:43:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI3ODIzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI3ODYzNw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4851#discussion_r523278637", "bodyText": "Same comment as earlier. Let's try to add waitUntil on the next get statement and see if it works, so that the explicit waits can be avoided.", "author": "xnikhil08", "createdAt": "2020-11-13T23:09:21Z", "path": "marklogic-data-hub-central/ui/e2e/cypress/support/pages/browse.tsx", "diffHunk": "@@ -293,6 +293,7 @@ class BrowsePage {\n   }\n \n   clickColumnTitle(index: number) {\n+    cy.wait(500);", "originalCommit": "6a4e56b567b4fe738f6e11598bb9642d6217028e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc2NTYwNw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4851#discussion_r524765607", "bodyText": "I had to add explicit wait here also to fix random failure. I did try to add waitUntil but it didn't help to fix random failure issue on DHS.", "author": "timur-isangulov", "createdAt": "2020-11-16T23:45:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI3ODYzNw=="}], "type": "inlineReview"}]}