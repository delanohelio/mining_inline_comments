{"pr_number": 4327, "pr_title": "DHFPROD-5325:Add link from Hub Central to documentation site", "pr_createdAt": "2020-07-31T22:33:33Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4327", "timeline": [{"oid": "776d3f8913b8ae384f10fe8ad7d0bb33683dbfbd", "url": "https://github.com/marklogic/marklogic-data-hub/commit/776d3f8913b8ae384f10fe8ad7d0bb33683dbfbd", "message": "DHFPROD-5325:Add link from Hub Central to documentation site", "committedDate": "2020-07-31T22:45:05Z", "type": "forcePushed"}, {"oid": "b9151cb3b0eb380074415e9db5d28ff42fd0bbdc", "url": "https://github.com/marklogic/marklogic-data-hub/commit/b9151cb3b0eb380074415e9db5d28ff42fd0bbdc", "message": "DHFPROD-5325:Add link from Hub Central to documentation site", "committedDate": "2020-08-03T05:17:47Z", "type": "forcePushed"}, {"oid": "4ebf8c37201f2b3fa196a5f239fc32fa425bc0cf", "url": "https://github.com/marklogic/marklogic-data-hub/commit/4ebf8c37201f2b3fa196a5f239fc32fa425bc0cf", "message": "DHFPROD-5325:Add link from Hub Central to documentation site", "committedDate": "2020-08-03T20:11:37Z", "type": "forcePushed"}, {"oid": "c728507b35f3103de1fa466366a23c96490f8af6", "url": "https://github.com/marklogic/marklogic-data-hub/commit/c728507b35f3103de1fa466366a23c96490f8af6", "message": "DHFPROD-5325:Add link from Hub Central to documentation site", "committedDate": "2020-08-03T22:02:07Z", "type": "forcePushed"}, {"oid": "6d03c66d4c06791c80ed6a22d5a8681c4b1ce040", "url": "https://github.com/marklogic/marklogic-data-hub/commit/6d03c66d4c06791c80ed6a22d5a8681c4b1ce040", "message": "DHFPROD-5325:Add link from Hub Central to documentation site", "committedDate": "2020-08-03T22:07:05Z", "type": "forcePushed"}, {"oid": "d2b45589f02816ef9ca1ed5ecc55eceff5065d1b", "url": "https://github.com/marklogic/marklogic-data-hub/commit/d2b45589f02816ef9ca1ed5ecc55eceff5065d1b", "message": "DHFPROD-5325:Add link from Hub Central to documentation site", "committedDate": "2020-08-03T22:10:41Z", "type": "commit"}, {"oid": "d2b45589f02816ef9ca1ed5ecc55eceff5065d1b", "url": "https://github.com/marklogic/marklogic-data-hub/commit/d2b45589f02816ef9ca1ed5ecc55eceff5065d1b", "message": "DHFPROD-5325:Add link from Hub Central to documentation site", "committedDate": "2020-08-03T22:10:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczODM4Ng==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4327#discussion_r464738386", "bodyText": "This is ok for now. Next time you make a PR, pls try and use rerender to test with different variable options in the same test.", "author": "bsrikan", "createdAt": "2020-08-04T00:56:52Z", "path": "marklogic-data-hub-central/ui/src/components/header/header.test.tsx", "diffHunk": "@@ -15,36 +15,60 @@ describe('Header component', () => {\n \n     const { getByText, getByLabelText, queryByText } = render(\n       <Router>\n-        <UserContext.Provider value={userNotAuthenticated}>\n-          <Header environment={data.environment}/>\n-        </UserContext.Provider>\n+        <Header environment={data.environment}/>\n       </Router>\n     )\n-\n+    \n     expect(getByLabelText('header-logo')).toBeInTheDocument();\n     expect(getByText(Application.title)).toBeInTheDocument();\n     expect(getByLabelText('icon: question-circle')).toBeInTheDocument();\n     expect(queryByText('icon: user')).not.toBeInTheDocument();\n-\n+    //unauthenticated users get sent to default Marklogic docs \n+    expect(document.querySelector('#help-link')).toHaveAttribute('href', 'https://docs.marklogic.com/datahub/')\n   });\n \n   test('should render correctly when a user is logged in', async () => {\n \n     const { getByText, getByLabelText } = render(\n       <Router>\n         <UserContext.Provider value={userAuthenticated}>\n-          <Header environment={data.environment}/>\n+          <Header environment = {{...data.environment, dataHubVersion: '5.3-SNAPSHOT'}}/>\n         </UserContext.Provider>\n       </Router>\n     )\n-\n     expect(getByLabelText('header-logo')).toBeInTheDocument();\n     expect(getByText(Application.title)).toBeInTheDocument();\n     expect(getByText(data.environment.serviceName)).toBeInTheDocument();\n     // expect(getByLabelText('icon: search')).toBeInTheDocument();\n     expect(getByLabelText('icon: question-circle')).toBeInTheDocument();\n+    //test version specific link is correct when environment hub version data is set to '5.3-SNAPSHOT'\n+    expect(document.querySelector('#help-link')).toHaveAttribute('href', 'https://docs.marklogic.com/datahub/5.3');\n     // expect(getByLabelText('icon: setting')).toBeInTheDocument();\n     expect(getByLabelText('icon: user')).toBeInTheDocument();\n   });\n \n-});\n+  test('Verify proper version link given specific release dataHub release version', async () => {\n+    const {} = render(\n+      <Router>\n+        <UserContext.Provider value={userAuthenticated}>\n+          <Header environment = {{...data.environment, dataHubVersion: '5.2.1'}}/>\n+        </UserContext.Provider>\n+      </Router>\n+    )\n+    expect(document.querySelector('#help-link')).toHaveAttribute('href', 'https://docs.marklogic.com/datahub/5.2');\n+\n+  });\n+\n+  test('Verify proper version link given scenario with multi-digit dataHub versions', async () => {\n+    const {} = render(\n+      <Router>\n+        <UserContext.Provider value={userAuthenticated}>\n+          <Header environment = {{...data.environment, dataHubVersion: '5.64.123456'}}/>\n+        </UserContext.Provider>", "originalCommit": "d2b45589f02816ef9ca1ed5ecc55eceff5065d1b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc2NDc2NA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4327#discussion_r464764764", "bodyText": "Thanks @bsrikan . Was looking for a way to do that, did not know about rerender. Will refactor and sneak that into my next PR.", "author": "briantang", "createdAt": "2020-08-04T02:39:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczODM4Ng=="}], "type": "inlineReview"}]}