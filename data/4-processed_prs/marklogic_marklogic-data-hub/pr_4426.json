{"pr_number": 4426, "pr_title": "DHFPROD-5728: Sort entities based on datatype-specific index", "pr_createdAt": "2020-08-18T06:15:49Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4426", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjExMDg0MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4426#discussion_r472110841", "bodyText": "Got a typo here - should be \"property\" - but let's call this \"indexable-datatype\", because I think \"property-datatype\" implies that it's the datatype as defined in the property definition. Also, use \"datatype\" throughout for consistency instead of \"data-type\".", "author": "rjrudin", "createdAt": "2020-08-18T11:35:46Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/impl/hub-entities.xqy", "diffHunk": "@@ -255,14 +255,13 @@ declare %private function hent:build-sort-operator(\n {\n   let $states :=\n     for $path-expression in map:keys($sortable-properties)\n-    let $state-name-prefix :=\n-      let $sort-info := map:get($sortable-properties, $path-expression)\n-      return fn:concat(map:get($sort-info, \"entity-title\"), \"_\", map:get($sort-info, \"property-name\"))\n-\n+    let $sort-info := map:get($sortable-properties, $path-expression)\n+    let $propert-data-type := hent:get-indexable-datatype(map:get($sort-info, \"property-data-type\"))", "originalCommit": "33017ab2cc323ac35a14506dd0b627e3ba00fba1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2b1e2df8e3b25630944d07da56ede5ead00ef81d", "url": "https://github.com/marklogic/marklogic-data-hub/commit/2b1e2df8e3b25630944d07da56ede5ead00ef81d", "message": "DHFPROD-5728: Sort entities based on datatype-specific index", "committedDate": "2020-08-18T14:25:04Z", "type": "commit"}, {"oid": "2b1e2df8e3b25630944d07da56ede5ead00ef81d", "url": "https://github.com/marklogic/marklogic-data-hub/commit/2b1e2df8e3b25630944d07da56ede5ead00ef81d", "message": "DHFPROD-5728: Sort entities based on datatype-specific index", "committedDate": "2020-08-18T14:25:04Z", "type": "forcePushed"}]}