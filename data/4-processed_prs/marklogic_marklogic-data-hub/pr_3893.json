{"pr_number": 3893, "pr_title": "DHFPROD-4830: Check for false positives on search for multiple merge \u2026", "pr_createdAt": "2020-04-29T22:30:40Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/3893", "timeline": [{"oid": "203f7264a271aaaef5f5782d4653cc6ffd76c83b", "url": "https://github.com/marklogic/marklogic-data-hub/commit/203f7264a271aaaef5f5782d4653cc6ffd76c83b", "message": "DHFPROD-4830: Check for false positives on search for multiple merge actions on document", "committedDate": "2020-04-29T22:29:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4NjQ3MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3893#discussion_r418086471", "bodyText": "I think there should be an assertion here on the results of this, because shouldn't those be different now? I Otherwise, the reader has to analyze the test documents to figure out the scenario and why things are working now, which I wasn't able to do.", "author": "rjrudin", "createdAt": "2020-04-30T15:14:19Z", "path": "marklogic-data-hub/src/test/ml-modules/root/test/suites/data-hub/5/builtins/steps/mastering/default/merging/falsePositivesForOtherMerges.sjs", "diffHunk": "@@ -0,0 +1,12 @@\n+const merging = require(\"/data-hub/5/builtins/steps/mastering/default/merging.sjs\");\n+const test = require(\"/test/test-helper.xqy\");\n+\n+const assertions = [];\n+let caughtException = null;\n+try {\n+    merging.main({uri: '/merge-with-doc1.json'}, {mergeOptions: {}});", "originalCommit": "203f7264a271aaaef5f5782d4653cc6ffd76c83b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE2NTc5Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3893#discussion_r418165797", "bodyText": "No, the results won't differ, really. The only difference that is patch is making is that in one corner case it will no longer throw an exception.\nIt was hitting a null pointer error due to a false positive when looking for another match summary document that has other merge actions for the same document.", "author": "ryanjdew", "createdAt": "2020-04-30T17:17:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4NjQ3MQ=="}], "type": "inlineReview"}]}