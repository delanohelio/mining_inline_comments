{"pr_number": 3874, "pr_title": "DHFPROD-4864: updates to reference-entity-model project with flows", "pr_createdAt": "2020-04-25T01:07:39Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/3874", "timeline": [{"oid": "d030302e7105aae88235c5194b847a3dbbaf8cf3", "url": "https://github.com/marklogic/marklogic-data-hub/commit/d030302e7105aae88235c5194b847a3dbbaf8cf3", "message": "DHFPROD-4864: updates to reference-entity-model project with flows", "committedDate": "2020-04-25T01:07:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NDA0NQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415084045", "bodyText": "We don't need nor want separate entity files. The approach for 5.3.0 is that each model file has one \"primary\" entity whose name is the same as info.title. Each other entity definition is considered a structured type.\nIs there a particular feature that is requiring Address and Zip to be duplicated in separate files?", "author": "rjrudin", "createdAt": "2020-04-25T15:24:37Z", "path": "examples/reference-entity-model/entities/Address.entity.json", "diffHunk": "@@ -0,0 +1,46 @@\n+{", "originalCommit": "d030302e7105aae88235c5194b847a3dbbaf8cf3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTEzNzg5Mw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415137893", "bodyText": "Mapping doesnt seem to work without them and complains about missing target entitiy.", "author": "bsrikan", "createdAt": "2020-04-25T20:29:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NDA0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTEzODEwNw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415138107", "bodyText": "We can get them updated later to include merge matches. This is just so the nightly instance will have something for the team to build their demo and can be enhanced later.", "author": "bsrikan", "createdAt": "2020-04-25T20:30:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NDA0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTE1MDg5NQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415150895", "bodyText": "Hmm - that's a concern, I'll try it out locally.", "author": "rjrudin", "createdAt": "2020-04-25T21:46:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NDA0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM3MTIwMg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415371202", "bodyText": "I verified that the mapping tool in HC is using \"Customer\" instead of the full entityTypeId. The backend does not yet support mappings that use just entityName and then try to refer to other entity definitions. I'll open a bug for this, as we do not want to go down the path of duplicating entity types again in HC.", "author": "rjrudin", "createdAt": "2020-04-26T18:31:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NDA0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NDUyNQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415084525", "bodyText": "I don't think it's worth checking this in, because everyone will either need to modify mlHost in this file or remember to add -PmlHost= to the command line. I think for now, it's better for this file to be gitignored.\nWhat we may want to add as a testing convenience is an e.g. \"hubUseDhsDefaults=true\" property so that people don't need to define the dozen or so properties below. That would make life easier in a number of ways.", "author": "rjrudin", "createdAt": "2020-04-25T15:26:50Z", "path": "examples/reference-entity-model/gradle-dhs.properties", "diffHunk": "@@ -0,0 +1,19 @@\n+mlHost=", "originalCommit": "d030302e7105aae88235c5194b847a3dbbaf8cf3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTEzODQxMg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415138412", "bodyText": "We would use this project to spin up a DHS instance and make this project available in HC running against a DHS. Hence the dhs environment property file.", "author": "bsrikan", "createdAt": "2020-04-25T20:32:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NDUyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NDY2MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415084661", "bodyText": "I like have sample files, but let's not use abbreviations - just call it \"customer1.json\".", "author": "rjrudin", "createdAt": "2020-04-25T15:27:43Z", "path": "examples/reference-entity-model/input/json/Cust1.json", "diffHunk": "@@ -0,0 +1,33 @@\n+{\n+    \"CustomerID\": 101,", "originalCommit": "d030302e7105aae88235c5194b847a3dbbaf8cf3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NDc4Ng==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415084786", "bodyText": "Same thing, let's do customer1.xml", "author": "rjrudin", "createdAt": "2020-04-25T15:28:21Z", "path": "examples/reference-entity-model/input/xml/CustXMLDoc1.xml", "diffHunk": "@@ -0,0 +1,32 @@\n+  <CustOrders xmlns=\"custOrderInfo\">", "originalCommit": "d030302e7105aae88235c5194b847a3dbbaf8cf3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NTQyNg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415085426", "bodyText": "I'd like to encourage a naming practice for steps - which are processes - that are verb-oriented instead of a set of nouns. So let's do \"loadCustomerJSON\" and \"mapCustomerJSON\". I think customers should follow the same practice, so we should demonstrate that in our examples.\nEven better would be to have names for the datasets other than \"JSON\" and \"XML\", as in the real world, users are likely to have e.g. \"loadAbcCustomers\" and \"loadXyzCustomers\". I think we can go with JSON and XML for now, but ideally we can have real data source names here and not just use data formats.", "author": "rjrudin", "createdAt": "2020-04-25T15:31:44Z", "path": "examples/reference-entity-model/loadData/CustomerLoadJSON.loadData.json", "diffHunk": "@@ -0,0 +1 @@\n+{\"name\":\"CustomerLoadJSON\",\"description\":\"\",\"sourceFormat\":\"json\",\"targetFormat\":\"json\",\"outputURIReplacement\":\".*CustomerLoadJSON,'/customer'\",\"inputFilePath\":\"data-sets/CustomerLoadJSON\"}", "originalCommit": "d030302e7105aae88235c5194b847a3dbbaf8cf3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTEzOTIwNw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3874#discussion_r415139207", "bodyText": "I agree with all the suggestions Anyone from the team can later enhance this to be standardized. For now this is just aimed at getting a project together for upcoming demo that can be run in an instance that is not localhost as we had discussed in Friday's standup.", "author": "bsrikan", "createdAt": "2020-04-25T20:37:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA4NTQyNg=="}], "type": "inlineReview"}]}