{"pr_number": 3752, "pr_title": "DHFPROD-4621: Only upload data once", "pr_createdAt": "2020-03-25T00:23:25Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/3752", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3OTU3Mw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3752#discussion_r398179573", "bodyText": "This looks good @ryanjdew . Can we clear the mocks after a test is done?", "author": "bsrikan", "createdAt": "2020-03-25T21:25:30Z", "path": "one-ui/ui/src/components/load-data/new-data-load-dialog/new-data-load-dialog.test.tsx", "diffHunk": "@@ -1,9 +1,89 @@\n import React from 'react';\n-import { shallow } from 'enzyme';\n+import { act, render, fireEvent, waitForElement } from '@testing-library/react';\n+import '@testing-library/jest-dom/extend-expect';\n import NewDataLoadDialog from './new-data-load-dialog';\n+import {BrowserRouter} from \"react-router-dom\";\n+import axiosMock from 'axios'\n \n-describe('New/Edit data load component', () => {\n-  it('should render correctly', () => {\n-    shallow(<NewDataLoadDialog data/>);\n+jest.mock('axios');\n+\n+axiosMock.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.post.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+axiosMock.get.mockImplementation(jest.fn(() => Promise.resolve({ status: 200, data: {} })));\n+", "originalCommit": "83ff50fe84543bd22dbffd0ce2cfbf128216b77c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIyOTU0MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3752#discussion_r398229541", "bodyText": "@bsrikan Do you mean something like below to clear the counts?\nafterEach(() => {\n  jest.clearAllMocks();\n});", "author": "ryanjdew", "createdAt": "2020-03-25T23:22:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3OTU3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODI1MzM3NA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3752#discussion_r398253374", "bodyText": "Right. So it doesnt bleed into other tests that may use those mocks.", "author": "bsrikan", "createdAt": "2020-03-26T00:39:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3OTU3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MzQ2NQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3752#discussion_r398843465", "bodyText": "@bsrikan Ok. Added the snippet above and rebased.", "author": "ryanjdew", "createdAt": "2020-03-26T19:40:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3OTU3Mw=="}], "type": "inlineReview"}, {"oid": "96a16c296c3b18dea1c2e4805a0bfaa62cf1324f", "url": "https://github.com/marklogic/marklogic-data-hub/commit/96a16c296c3b18dea1c2e4805a0bfaa62cf1324f", "message": "DHFPROD-4621: Only upload data once", "committedDate": "2020-03-26T19:34:23Z", "type": "commit"}, {"oid": "96a16c296c3b18dea1c2e4805a0bfaa62cf1324f", "url": "https://github.com/marklogic/marklogic-data-hub/commit/96a16c296c3b18dea1c2e4805a0bfaa62cf1324f", "message": "DHFPROD-4621: Only upload data once", "committedDate": "2020-03-26T19:34:23Z", "type": "forcePushed"}]}