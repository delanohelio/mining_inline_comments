{"pr_number": 3861, "pr_title": "DHFPROD-4197: Create manage queries view", "pr_createdAt": "2020-04-22T21:53:43Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/3861", "timeline": [{"oid": "c2d73454c188ee47e43c682a3ad190516d0ccd66", "url": "https://github.com/marklogic/marklogic-data-hub/commit/c2d73454c188ee47e43c682a3ad190516d0ccd66", "message": "DHFPROD-4197: Create manage queries view", "committedDate": "2020-04-22T22:02:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM3NzUzMw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413377533", "bodyText": "@timur-isangulov, I see there are two useEffects in this file, Any reason for using two useEffects calling the same function ?", "author": "Sanjeevani19", "createdAt": "2020-04-22T22:32:23Z", "path": "marklogic-data-hub-central/ui/src/components/queries/managing/manage-query.tsx", "diffHunk": "@@ -0,0 +1,224 @@\n+import React, { useState, useEffect, useContext } from 'react';\n+import { Modal, Button, Table } from 'antd';\n+import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n+import { faPencilAlt, faFileExport, faLink, faTrashAlt, faListOl } from \"@fortawesome/free-solid-svg-icons\";\n+import { UserContext } from '../../../util/user-context';\n+import { queryDateConverter } from '../../../util/date-conversion';\n+import EditQueryDialog from './edit-query-dialog/edit-query-dialog'\n+import { SearchContext } from '../../../util/search-context';\n+import styles from './manage-query.module.scss';\n+import { fetchQueries, updateQuery, removeQuery } from '../../../api/queries'\n+\n+\n+const QueryModal: React.FC = () => {\n+\n+    const [queries, setQueries] = useState([]);\n+    const { handleError, resetSessionTime } = useContext(UserContext);\n+    const { applyQuery } = useContext(SearchContext);\n+    const [mainModalVisibility, setMainModalVisibility] = useState(false);\n+    const [editModalVisibility, setEditModalVisibility] = useState(false);\n+    const [deleteModalVisibility, setDeleteModalVisibility] = useState(false);\n+    const [selectedQuery, setSelectedQuery] = useState({});\n+    const [queryName, setQueryName] = useState('');\n+    const data = new Array();\n+\n+    useEffect(() => {\n+        getQueries();\n+    }, []);\n+", "originalCommit": "c2d73454c188ee47e43c682a3ad190516d0ccd66", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM4Njg1Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413386857", "bodyText": "Not needed, removed.", "author": "timur-isangulov", "createdAt": "2020-04-22T22:53:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM3NzUzMw=="}], "type": "inlineReview"}, {"oid": "3f59eea3991081c09a0552925b28b1a0dcf72caf", "url": "https://github.com/marklogic/marklogic-data-hub/commit/3f59eea3991081c09a0552925b28b1a0dcf72caf", "message": "DHFPROD-4197: Create manage queries view", "committedDate": "2020-04-22T22:52:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM4ODk2Mw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413388963", "bodyText": "@timur-isangulov , I don't see any integration or unit tests for edit or deleting a query, Any reason for that ?", "author": "Sanjeevani19", "createdAt": "2020-04-22T22:58:26Z", "path": "marklogic-data-hub-central/ui/e2e/cypress/support/components/query/edit-queries-modal.tsx", "diffHunk": "@@ -0,0 +1,6 @@\n+class EditQuery {\n+\n+", "originalCommit": "3f59eea3991081c09a0552925b28b1a0dcf72caf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM5MTg1MA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413391850", "bodyText": "There is currently no functionality to add query on the unit test level or via UI because save query story is in development. I will add all the tests later when save query related stories are completed.", "author": "timur-isangulov", "createdAt": "2020-04-22T23:05:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM4ODk2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM5NDAzNQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413394035", "bodyText": "Okay, makes sense to me, I see that you have created a seperate file for all the query api's, once your PR is merged I can add additional api's to that file. That would be helpful for mocking api's as well. So approving the PR.", "author": "Sanjeevani19", "createdAt": "2020-04-22T23:11:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM4ODk2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk0NjE5Mw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413946193", "bodyText": "This alert color should be applied globally at the theme level.", "author": "brucean52", "createdAt": "2020-04-23T16:31:12Z", "path": "marklogic-data-hub-central/ui/src/App.scss", "diffHunk": "@@ -145,3 +145,11 @@ div#error-list div.ant-collapse div.ant-collapse-item div.ant-collapse-content d\n   background: #44499C;\n   color: #fff;\n }\n+\n+.has-error .ant-input, .has-error .ant-input:focus{\n+  border-color: #B32424;", "originalCommit": "3f59eea3991081c09a0552925b28b1a0dcf72caf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk4MDkyMg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413980922", "bodyText": "Fixed. Thanks.", "author": "timur-isangulov", "createdAt": "2020-04-23T17:20:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk0NjE5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk2MTMzMQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3861#discussion_r413961331", "bodyText": "MMM should be MM", "author": "brucean52", "createdAt": "2020-04-23T16:52:07Z", "path": "marklogic-data-hub-central/ui/src/util/date-conversion.tsx", "diffHunk": "@@ -8,3 +8,7 @@ export const relativeTimeConverter = (date:string) => {\n   return moment(date).fromNow();\n }\n \n+export const queryDateConverter = (date:string) => {\n+  return moment(date).format(\"DD-MMM-YY HH:mm\");", "originalCommit": "3f59eea3991081c09a0552925b28b1a0dcf72caf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "321c5df1b83e214a97162d240a4aa44eb8b72008", "url": "https://github.com/marklogic/marklogic-data-hub/commit/321c5df1b83e214a97162d240a4aa44eb8b72008", "message": "DHFPROD-4197: Create manage queries view", "committedDate": "2020-04-23T17:18:33Z", "type": "commit"}, {"oid": "321c5df1b83e214a97162d240a4aa44eb8b72008", "url": "https://github.com/marklogic/marklogic-data-hub/commit/321c5df1b83e214a97162d240a4aa44eb8b72008", "message": "DHFPROD-4197: Create manage queries view", "committedDate": "2020-04-23T17:18:33Z", "type": "forcePushed"}]}