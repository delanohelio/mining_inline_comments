{"pr_number": 4936, "pr_title": "DHFPROD-6311: Fix for intermittently failing GetRecordTest", "pr_createdAt": "2020-12-03T22:35:37Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4936", "timeline": [{"oid": "dba5de5b035de430d1caed5487a2e1f99a90805f", "url": "https://github.com/marklogic/marklogic-data-hub/commit/dba5de5b035de430d1caed5487a2e1f99a90805f", "message": "DHFPROD-6311: Fix for intermittently failing GetRecordTest", "committedDate": "2020-12-03T22:27:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTY5NDk3MA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4936#discussion_r535694970", "bodyText": "Is this the fix then - that the pop() call was occurring within the for loop?", "author": "rjrudin", "createdAt": "2020-12-03T22:38:16Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/entities/entity-search-lib.sjs", "diffHunk": "@@ -586,20 +582,13 @@ function findFlowAndStepNameFromProvenanceRecords(provenanceRecord, stepNames, s\n       associatedWith[associatedWith.length-1] = artifactTobeRemoved;\n       break;\n     }\n-    associatedWith.pop();\n   }\n-  console.log(\"associatedWith array after finding flowName: \" + associatedWith);\n+  associatedWith.pop();", "originalCommit": "dba5de5b035de430d1caed5487a2e1f99a90805f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTcxMjY5Mg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4936#discussion_r535712692", "bodyText": "If the associatedWith was something like this [\"inline\", \"map\", \"entity-services-mapping\"], then the test runs fine.\nThe test fails when the associatedWith is something like this [\"entity-services-mapping\", \"inline\", \"map\"].\nThe pop should happen after breaking out of the for loop.", "author": "rahulvudutala", "createdAt": "2020-12-03T23:07:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTY5NDk3MA=="}], "type": "inlineReview"}]}