{"pr_number": 4082, "pr_title": "DHFPROD-5063: Enhancements to clearing user data", "pr_createdAt": "2020-06-10T20:59:02Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4082", "timeline": [{"oid": "e058c91ffe496f5d9d08816247a763040c0d2559", "url": "https://github.com/marklogic/marklogic-data-hub/commit/e058c91ffe496f5d9d08816247a763040c0d2559", "message": "DHFPROD-5063: Enhancements to clearing user data\n\nThe ClearUserDataTest was effectively updated by adding a legacy mapping to the project, which caused the test to fail until DataHubImpl was modified.", "committedDate": "2020-06-10T20:57:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ1MDg4OA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4082#discussion_r438450888", "bodyText": "This is somewhat outside of this ticket, but thoughts about an \"are you sure?\" prompt that defaults to no instead of the -Pconfirm=true argument for confirmable tasks?\nI'm not sure what that would entail, but I'm pretty sure the most likely scenario for me mistakenly running a task would be due to using history completion in the shell and if that is the case, it will likely have \"-Pconfirm=true\" as part of that history completion.", "author": "ryanjdew", "createdAt": "2020-06-10T22:54:36Z", "path": "ml-data-hub-plugin/src/main/groovy/com/marklogic/gradle/DataHubPlugin.groovy", "diffHunk": "@@ -183,7 +183,8 @@ class DataHubPlugin implements Plugin<Project> {\n \n         project.task(\"hubClearUserData\", type: ClearUserDataTask, group: deployGroup,\n             description: \"Clears user data in the staging, final, and job databases, only leaving behind hub and user \" +\n-                \"artifacts. Requires sufficient privilege to be able to clear each of the databases.\")\n+                \"artifacts. Requires sufficient privilege to be able to clear each of the databases. \" +\n+                \"Requires -Pconfirm=true to be set so this isn't accidentally executed.\")", "originalCommit": "e058c91ffe496f5d9d08816247a763040c0d2559", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ3NzA5Mg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4082#discussion_r438477092", "bodyText": "It's an interesting idea, though I've used this \"confirm\" mechanism in ml-gradle for a few years now, and I haven't received any feedback about problems with it yet.", "author": "rjrudin", "createdAt": "2020-06-11T00:24:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ1MDg4OA=="}], "type": "inlineReview"}]}