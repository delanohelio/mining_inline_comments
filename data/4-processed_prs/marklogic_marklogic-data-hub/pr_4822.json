{"pr_number": 4822, "pr_title": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view", "pr_createdAt": "2020-11-03T22:15:29Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4822", "timeline": [{"oid": "3759c4dd99eab07bc3fe8d101adcaefc1c71d95b", "url": "https://github.com/marklogic/marklogic-data-hub/commit/3759c4dd99eab07bc3fe8d101adcaefc1c71d95b", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view", "committedDate": "2020-11-03T22:29:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MDMzOA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#discussion_r516990338", "bodyText": "Action is a click event but the comment says 'Hover over...'.\nLet's update the comments as well in such cases since they help to understand the related code better.", "author": "xnikhil08", "createdAt": "2020-11-03T22:22:59Z", "path": "marklogic-data-hub-central/ui/src/components/load/load-list.test.tsx", "diffHunk": "@@ -193,9 +193,9 @@ describe('Load data component', () => {\n     //Check if the list is rendered properly\n     expect(getByText('testLoadXML')).toBeInTheDocument();\n \n-    fireEvent.mouseOver(getByLabelText('testLoadXML-add-icon')); // Hover over the Add to Flow Icon to get more options\n+    fireEvent.click(getByLabelText('testLoadXML-add-icon')); // Hover over the Add to Flow Icon to get more options", "originalCommit": "acc912857225443e903a827affbfec5f6c50e752", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MDYxNQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#discussion_r516990615", "bodyText": "same here. Update the misleading comment to match the click action.", "author": "xnikhil08", "createdAt": "2020-11-03T22:23:37Z", "path": "marklogic-data-hub-central/ui/src/components/load/load-list.test.tsx", "diffHunk": "@@ -233,9 +233,9 @@ describe('Load data component', () => {\n       </MemoryRouter>\n     )\n \n-    fireEvent.mouseOver(getByLabelText('testLoadXML-add-icon')); // Hover over the Add to Flow Icon to get more options\n+    fireEvent.click(getByLabelText('testLoadXML-add-icon')); // Hover over the Add to Flow Icon to get more options", "originalCommit": "acc912857225443e903a827affbfec5f6c50e752", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MjkxMA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#discussion_r516992910", "bodyText": "Can we shift the styles to its related module.scss file, to be consistent ?", "author": "xnikhil08", "createdAt": "2020-11-03T22:29:01Z", "path": "marklogic-data-hub-central/ui/src/components/load/load-list.tsx", "diffHunk": "@@ -135,13 +156,46 @@ const LoadList: React.FC<Props> = (props) => {\n         >\n             <div aria-label=\"add-step-confirmation\" style={{fontSize: '16px', padding: '10px'}}>\n                 { isStepInFlow(loadArtifactName, flowName) ?\n-                    <p aria-label=\"step-in-flow\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Add another instance of the step?</p> :\n-                    <p aria-label=\"step-not-in-flow\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong>?</p>\n+                    !addRun ? <p aria-label=\"step-in-flow\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Would you like to add another instance?</p> : <p aria-label=\"step-in-flow-run\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Would you like to add another instance and run it?</p>\n+                    : !addRun ? <p aria-label=\"step-not-in-flow\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong>?</p> : <p aria-label=\"step-not-in-flow-run\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong> and run it?</p> \n                 }\n             </div>\n         </Modal>\n     );\n \n+    const runMenu = (name) => (\n+        <Menu style={{right: '80px'}}>", "originalCommit": "acc912857225443e903a827affbfec5f6c50e752", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5NDA3MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4822#discussion_r516994071", "bodyText": "Same here. Let's move the css to module.scss file and just refer the classname here.", "author": "xnikhil08", "createdAt": "2020-11-03T22:31:43Z", "path": "marklogic-data-hub-central/ui/src/components/load/load-list.tsx", "diffHunk": "@@ -135,13 +156,46 @@ const LoadList: React.FC<Props> = (props) => {\n         >\n             <div aria-label=\"add-step-confirmation\" style={{fontSize: '16px', padding: '10px'}}>\n                 { isStepInFlow(loadArtifactName, flowName) ?\n-                    <p aria-label=\"step-in-flow\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Add another instance of the step?</p> :\n-                    <p aria-label=\"step-not-in-flow\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong>?</p>\n+                    !addRun ? <p aria-label=\"step-in-flow\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Would you like to add another instance?</p> : <p aria-label=\"step-in-flow-run\">The step <strong>{loadArtifactName}</strong> is already in the flow <strong>{flowName}</strong>. Would you like to add another instance and run it?</p>\n+                    : !addRun ? <p aria-label=\"step-not-in-flow\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong>?</p> : <p aria-label=\"step-not-in-flow-run\">Are you sure you want to add the step <strong>{loadArtifactName}</strong> to the flow <strong>{flowName}</strong> and run it?</p> \n                 }\n             </div>\n         </Modal>\n     );\n \n+    const runMenu = (name) => (\n+        <Menu style={{right: '80px'}}>\n+            <Menu.Item key=\"0\">\n+                { <Link data-testid=\"link\" id=\"tiles-run-add\" to={\n+                                        {pathname: '/tiles/run/add-run',\n+                                        state: {\n+                                            stepToAdd : name,\n+                                            stepDefinitionType : 'ingestion',\n+                                            existingFlow : false\n+                                        }}}><div className={styles.stepLink} data-testid={`${name}-run-toNewFlow`}>Run step in a new flow</div></Link>}\n+            </Menu.Item>\n+            <Menu.Item key=\"1\">\n+                <div className={styles.stepLinkExisting} data-testid={`${name}-run-toExistingFlow`}>Run step in an existing flow\n+                    <div className={styles.stepLinkSelect} onClick={(event) => { event.stopPropagation(); event.preventDefault(); }}>\n+                        <Select\n+                            style={{ width: '100%' }}", "originalCommit": "3759c4dd99eab07bc3fe8d101adcaefc1c71d95b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cb7ef30c27813b4325d474ee90711c25861fa1d9", "url": "https://github.com/marklogic/marklogic-data-hub/commit/cb7ef30c27813b4325d474ee90711c25861fa1d9", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view", "committedDate": "2020-11-03T22:33:04Z", "type": "forcePushed"}, {"oid": "0c3a5ffd5d401f83f0dfac523a9adf84191900ce", "url": "https://github.com/marklogic/marklogic-data-hub/commit/0c3a5ffd5d401f83f0dfac523a9adf84191900ce", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view", "committedDate": "2020-11-04T00:07:57Z", "type": "forcePushed"}, {"oid": "37299c773fe8770ff1816d06010eff9cb068c654", "url": "https://github.com/marklogic/marklogic-data-hub/commit/37299c773fe8770ff1816d06010eff9cb068c654", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view", "committedDate": "2020-11-04T00:11:31Z", "type": "commit"}, {"oid": "37299c773fe8770ff1816d06010eff9cb068c654", "url": "https://github.com/marklogic/marklogic-data-hub/commit/37299c773fe8770ff1816d06010eff9cb068c654", "message": "DHFPROD-6099: Add run icon and 'run in flow' menu to Load TABLE view", "committedDate": "2020-11-04T00:11:31Z", "type": "forcePushed"}]}