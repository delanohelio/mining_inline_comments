{"pr_number": 3895, "pr_title": "DHFPROD-4887: Generating Swagger docs dynamically via springfox", "pr_createdAt": "2020-04-30T14:52:18Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/3895", "timeline": [{"oid": "37e962345bb8896fc9ad79268b85bea8d28d6b42", "url": "https://github.com/marklogic/marklogic-data-hub/commit/37e962345bb8896fc9ad79268b85bea8d28d6b42", "message": "DHFPROD-4887: Generating Swagger docs dynamically via springfox\n\nAdded jsonSchema2Pojo Gradle task to generate Java classes from ./specs/models. Where possible, these are being used for documentation purposes in controllers. I renamed some of these to not have \".v1\" in their name, so e.g. \"ModelDescriptorV1\" seemed like a funky class name. I imagine we'll get rid of \".v1\" in all the filenames soon, and replace it either with \".schema\" or with nothing.\n\nThe README is updated to point to the new endpoint for Swagger docs. It also points to the Application class for more information on how to configure annotations on endpoints. Existing endpoints are a good source of info as well.\n\nI tried to document every endpoint possible; some are using anyObject in mocks.json today, so I didn't make Java classes for some of those. We can gradually fill in those gaps.\n\nIf all looks good, I'll submit a separate PR to remove the existing mocks support in the ./ui folder.", "committedDate": "2020-04-30T14:39:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIyMDU2NQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3895#discussion_r418220565", "bodyText": "So, all the classes in com.marklogic.hub.central.schemas were generated by running this gradle task ?", "author": "srinathgit", "createdAt": "2020-04-30T18:53:25Z", "path": "marklogic-data-hub-central/build.gradle", "diffHunk": "@@ -85,6 +91,26 @@ dependencies {\n // We need this to access test resources such as \"entity-reference-model\" project from core data hub project\n sourceSets.test.resources.srcDir \"../marklogic-data-hub/src/test/resources\"\n \n+// jsonSchema2Pojo is used to generate Java classes that are then used in Swagger annotations for documentation purposes\n+// See more at https://github.com/joelittlejohn/jsonschema2pojo/tree/master/jsonschema2pojo-gradle-plugin\n+jsonSchema2Pojo {\n+    source = files(\"../specs/models\")\n+    targetDirectory = file(\"src/main/java\")\n+    targetPackage = \"com.marklogic.hub.central.schemas\"\n+}\n+\n+task deleteSchemaPojos(type: Delete) {\n+    delete fileTree(\"src/main/java/com/marklogic/hub/central/schemas\") {\n+        include \"*.java\"\n+    }\n+}\n+generateJsonSchema2Pojo.mustRunAfter deleteSchemaPojos\n+\n+task generateSchemaPojos {", "originalCommit": "37e962345bb8896fc9ad79268b85bea8d28d6b42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIyMTgwMg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3895#discussion_r418221802", "bodyText": "Correct. Unfortunately, the generateJsonSchema2Pojo library doesn't add comments to the classes indicating that they were auto-generated, like the ones generated by the ML DS plugin. That's why I added a README.md file to that schemas package.", "author": "rjrudin", "createdAt": "2020-04-30T18:55:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIyMDU2NQ=="}], "type": "inlineReview"}]}