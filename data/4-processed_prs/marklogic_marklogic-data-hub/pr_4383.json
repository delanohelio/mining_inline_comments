{"pr_number": 4383, "pr_title": "DHFPROD-4145: Ability to show multiple values in the table view when it conflicts with the associated property definition", "pr_createdAt": "2020-08-11T04:35:41Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4383", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUzMzc0Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4383#discussion_r468533747", "bodyText": "Are these functions really testing anything? Our current expectation of getEntityInstance is that it simply fetches the instance from the document, nothing more. So I don't think we need these tests, because we expect the instance to be returned as-is - we don't have any reason to think that the instance would be modified by getEntityInstance. If getEntityInstance were performing some logic on the instance, then we'd want tests, but that's not the case.", "author": "rjrudin", "createdAt": "2020-08-11T12:13:37Z", "path": "marklogic-data-hub/src/test/ml-modules/root/test/suites/data-hub/5/entities/search/getEntityInstance.sjs", "diffHunk": "@@ -160,14 +160,39 @@ function getInstanceFromTextDocument() {\n   ]\n }\n \n+function getInstanceFromMergedJsonDocument() {", "originalCommit": "2ea1be25aa652df86cf57d27e8a707dcaecaa65c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY3MTQ0MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4383#discussion_r468671441", "bodyText": "@rjrudin In getEntityInstance.sjs, we are validating if es:instance-json-from-document is returning the instance in various scenarios such as a mapped document with namespace, instance without info, instance with nonexistent modelName. Similarly, I added a test case for a merged document too.\nShould I remove this test case or this test file?", "author": "rahulvudutala", "createdAt": "2020-08-11T15:30:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUzMzc0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY4MDgxOQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4383#discussion_r468680819", "bodyText": "I don't believe there's any difference in how the instance is obtained for a merged entity vs a non-merged entity - i.e. the instance is still at /:envelope/:instance. So I don't think a test is needed. We'd need one if a merged document instead had something like /:envelope/:merged/*:instance.", "author": "rjrudin", "createdAt": "2020-08-11T15:44:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUzMzc0Nw=="}], "type": "inlineReview"}, {"oid": "ad3670e1f0f982df18e85f75ce68510a623134eb", "url": "https://github.com/marklogic/marklogic-data-hub/commit/ad3670e1f0f982df18e85f75ce68510a623134eb", "message": "DHFPROD-4145: Ability to show multiple values in the table view when it conflicts with the associated property definition", "committedDate": "2020-08-11T16:18:41Z", "type": "forcePushed"}, {"oid": "0eee4ec6148ceb9b56e32453bbfdf99e498019f9", "url": "https://github.com/marklogic/marklogic-data-hub/commit/0eee4ec6148ceb9b56e32453bbfdf99e498019f9", "message": "DHFPROD-4145: Ability to show multiple values in the table view when it conflicts with the associated property definition", "committedDate": "2020-08-11T18:05:28Z", "type": "commit"}, {"oid": "0eee4ec6148ceb9b56e32453bbfdf99e498019f9", "url": "https://github.com/marklogic/marklogic-data-hub/commit/0eee4ec6148ceb9b56e32453bbfdf99e498019f9", "message": "DHFPROD-4145: Ability to show multiple values in the table view when it conflicts with the associated property definition", "committedDate": "2020-08-11T18:05:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc5OTg1Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4383#discussion_r468799857", "bodyText": "@rahulvudutala  We still don't need this test :) - I was just raising a hypothetical. Though I'm curious - does es.instanceJsonFromDocument actually return the instance when \"es:instance\" is at any depth?\nI would normally say - there's no need to support \"/:envelope//es:instance\". But if es.instanceJsonFromDocument can handle that, then I suppose it's okay to include.", "author": "rjrudin", "createdAt": "2020-08-11T19:00:02Z", "path": "marklogic-data-hub/src/test/ml-modules/root/test/suites/data-hub/5/entities/search/getEntityInstance.sjs", "diffHunk": "@@ -160,14 +160,19 @@ function getInstanceFromTextDocument() {\n   ]\n }\n \n+function getInstanceWithInstanceInDifferentXpath() {", "originalCommit": "0eee4ec6148ceb9b56e32453bbfdf99e498019f9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgyODE3Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4383#discussion_r468828177", "bodyText": "@rjrudin es.instanceJsonFromDocument is returning the instance when \"es:instance\" is at any depth\nI tried on the document which has the path /es:envelope/es:merged/es:instance. The instance is returned (There is no  /es:envelope/es:instance in the document)", "author": "rahulvudutala", "createdAt": "2020-08-11T19:54:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc5OTg1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg3MDY5Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4383#discussion_r468870697", "bodyText": "Huh - well I guess that's good? Definitely surprising behavior, but I don't think there's a real downside to it.", "author": "rjrudin", "createdAt": "2020-08-11T21:18:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODc5OTg1Nw=="}], "type": "inlineReview"}]}