{"pr_number": 3614, "pr_title": "DHFPROD-4308: add/modify test cases for mapping artifact api ", "pr_createdAt": "2020-02-26T00:00:20Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/3614", "timeline": [{"oid": "fce7d561121684f18b43434b90c466bf7ce9ab2e", "url": "https://github.com/marklogic/marklogic-data-hub/commit/fce7d561121684f18b43434b90c466bf7ce9ab2e", "message": "DHFPROD-4308: add/modify test cases for mapping artifact api", "committedDate": "2020-02-25T17:55:14Z", "type": "commit"}, {"oid": "e33a5360c797777aa4fc1989591053b4711c8a9f", "url": "https://github.com/marklogic/marklogic-data-hub/commit/e33a5360c797777aa4fc1989591053b4711c8a9f", "message": "DHFPROD-4308: rename from getEntityNames to getEntityTitles", "committedDate": "2020-02-25T17:55:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI0MjI5MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#discussion_r384242291", "bodyText": "This is fine here - just an FYI, we'll soon have a library for functions pertaining to entity models, and this will be refactored to use that library.", "author": "rjrudin", "createdAt": "2020-02-26T02:22:46Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/artifacts/core.sjs", "diffHunk": "@@ -249,7 +249,7 @@ function deleteArtifactSettings(artifactType, artifactName, artifactVersion = 'l\n     return { success: true };\n }\n \n-function getEntityNames() {\n+function getEntityTitles() {", "originalCommit": "e33a5360c797777aa4fc1989591053b4711c8a9f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI0Mjg1Nw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#discussion_r384242857", "bodyText": "You don't need to do this - just toss the content into a file under ./test-data/entities in the test file directory, and then call hub-test:load-entities($test:CALLER_FILE) (search for references to that for an example).\nThough I did notice you're writing to staging - any reason for that? We usually run the unit tests against the final app server.", "author": "rjrudin", "createdAt": "2020-02-26T02:24:55Z", "path": "marklogic-data-hub/src/test/ml-modules/root/test/suites/data-hub/5/data-services/artifacts/suiteSetup.sjs", "diffHunk": "@@ -0,0 +1,35 @@\n+const DataHubSingleton = require('/data-hub/5/datahub-singleton.sjs');\n+const dataHub = DataHubSingleton.instance();\n+\n+const permissions = [xdmp.permission('data-hub-entity-model-writer', 'update'), xdmp.permission('data-hub-entity-model-reader', 'read')];\n+\n+dataHub.hubUtils.writeDocument('/entities/TestEntity-NoMappingConfig', {", "originalCommit": "e33a5360c797777aa4fc1989591053b4711c8a9f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI0MjkxNw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/3614#discussion_r384242917", "bodyText": "Don't need to do this either, just call hub-test:delete-artifacts($test:CALLER_FILE)", "author": "rjrudin", "createdAt": "2020-02-26T02:25:11Z", "path": "marklogic-data-hub/src/test/ml-modules/root/test/suites/data-hub/5/data-services/artifacts/suiteTeardown.sjs", "diffHunk": "@@ -0,0 +1,5 @@\n+const DataHubSingleton = require('/data-hub/5/datahub-singleton.sjs');\n+const dataHub = DataHubSingleton.instance();\n+\n+dataHub.hubUtils.deleteDocument('/entities/TestEntity-NoMappingConfig', dataHub.config.STAGINGDATABASE);", "originalCommit": "e33a5360c797777aa4fc1989591053b4711c8a9f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8423c504220ddb333f675a38206c764c6c441d34", "url": "https://github.com/marklogic/marklogic-data-hub/commit/8423c504220ddb333f675a38206c764c6c441d34", "message": "DHFPROD-4308: load test data from files and xquery util", "committedDate": "2020-02-26T06:16:19Z", "type": "commit"}]}