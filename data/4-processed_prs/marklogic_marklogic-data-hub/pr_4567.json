{"pr_number": 4567, "pr_title": "DHFPROD-5907: Fix Cypress WebSocket errors", "pr_createdAt": "2020-09-14T19:12:38Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4567", "timeline": [{"oid": "7821865d3bc540a72e9d8e5471e07c26748f9901", "url": "https://github.com/marklogic/marklogic-data-hub/commit/7821865d3bc540a72e9d8e5471e07c26748f9901", "message": "DHFPROD-5907: Fix Cypress WebSocket errors", "committedDate": "2020-09-14T19:11:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI2MDU2NA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4567#discussion_r488260564", "bodyText": "should this be console.error?", "author": "bsrikan", "createdAt": "2020-09-14T22:20:13Z", "path": "marklogic-data-hub-central/ui/src/util/stomp.ts", "diffHunk": "@@ -203,31 +208,44 @@ export class STOMPService {\n     // Resolve our Promise to the caller\n     this.resolvePromise();\n \n+    // for Cypress tests only\n+    if ((window as any).Cypress) {\n+      (window as any).stompClientConnected = true;\n+    }\n+\n     // Clear callback\n     this.resolvePromise = () => {};\n   }\n \n   // Handle errors from stomp.js\n-  public onError = (error: string) => {\n-\n-    console.error('Error: ' + error);\n-\n+  public onError = async (error: string, ...other: any[]) => {\n+    console.log('STOMP error:', error, other);", "originalCommit": "7821865d3bc540a72e9d8e5471e07c26748f9901", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5Mzk4MA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4567#discussion_r488293980", "bodyText": "I changed it to log as it can occur for a range of reasons, like network connection going down. I don't think it merits an error output.", "author": "ryanjdew", "createdAt": "2020-09-14T23:31:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI2MDU2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5NDMyNA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4567#discussion_r488294324", "bodyText": "Thanks Ryan.", "author": "bsrikan", "createdAt": "2020-09-14T23:32:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI2MDU2NA=="}], "type": "inlineReview"}]}