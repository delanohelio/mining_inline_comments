{"pr_number": 4435, "pr_title": "DHFPROD-5762: Adding sources object in Entity Headers to search result", "pr_createdAt": "2020-08-18T23:27:48Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4435", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU3Mjk0OA==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4435#discussion_r472572948", "bodyText": "What's the actual requirement here? The JIRA ticket mentions that \"headers are not extracted\", and this function is called \"getEntityInstanceHeaders\", but the code is specifically interested in the sources part of headers.\nWhat is the UI looking to do with the sources?\nIf the intent is to provide an array of sources for an entity instance, I think this function should be called \"getEntitySources\" (I think the word 'instance' adds a little confusion because 'instance' and 'headers' are two separate parts of the envelope).", "author": "rjrudin", "createdAt": "2020-08-19T00:53:43Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/entities/entity-search-lib.sjs", "diffHunk": "@@ -263,12 +264,28 @@ function getEntityInstance(docUri) {\n }\n \n function getEntityInstanceHeaders(docUri) {\n-    let doc = cts.doc(docUri);\n+  const doc = cts.doc(docUri);", "originalCommit": "6aacaf214a04b84800f41076c317b23163067c2f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzA3MTM3Mg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4435#discussion_r473071372", "bodyText": "Sources are displayed in the instance and snippet view in the Explorer tile\nUpdated the function name to getEntitySources as suggested", "author": "rahulvudutala", "createdAt": "2020-08-19T14:26:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU3Mjk0OA=="}], "type": "inlineReview"}, {"oid": "1f34d0cb55f4577613c816d520ca0e1853448cc0", "url": "https://github.com/marklogic/marklogic-data-hub/commit/1f34d0cb55f4577613c816d520ca0e1853448cc0", "message": "DHFPROD-5762: Adding sources object in Entity Headers to search result", "committedDate": "2020-08-19T14:22:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzA3Nzg3MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4435#discussion_r473077871", "bodyText": "You can remove the \"?\" operator here because getEntitySources always returns an array, right?", "author": "rjrudin", "createdAt": "2020-08-19T14:34:53Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/entities/entity-search-lib.sjs", "diffHunk": "@@ -370,7 +387,7 @@ function addEntitySpecificProperties(result, entityInfo, selectedPropertyMetadat\n     console.log(`Unable to obtain document with URI '${result.uri}'; will not add document metadata to its search result`);\n   }\n   result.entityInstance = entityInstance;\n-  result.sources = getEntityInstanceHeaders(result.uri) ? getEntityInstanceHeaders(result.uri) : result.sources;\n+  result.sources = getEntitySources(result.uri) ? getEntitySources(result.uri) : result.sources;", "originalCommit": "1f34d0cb55f4577613c816d520ca0e1853448cc0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzA3Nzk5Ng==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4435#discussion_r473077996", "bodyText": "Same here, don't need the \"?\".", "author": "rjrudin", "createdAt": "2020-08-19T14:35:01Z", "path": "marklogic-data-hub/src/main/resources/ml-modules/root/data-hub/5/entities/entity-search-lib.sjs", "diffHunk": "@@ -423,7 +440,7 @@ function addGenericEntityProperties(result) {\n     \"propertyValue\": identifierValue\n   };\n   result.entityInstance = entityInstance;\n-  result.sources = getEntityInstanceHeaders(result.uri) ? getEntityInstanceHeaders(result.uri) : result.sources;\n+  result.sources = getEntitySources(result.uri) ? getEntitySources(result.uri) : result.sources;", "originalCommit": "1f34d0cb55f4577613c816d520ca0e1853448cc0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d58e91c983393d3e6c59d3f4a0a9adb0ce196db8", "url": "https://github.com/marklogic/marklogic-data-hub/commit/d58e91c983393d3e6c59d3f4a0a9adb0ce196db8", "message": "DHFPROD-5762: Adding sources object in Entity Headers to search result", "committedDate": "2020-08-19T15:22:55Z", "type": "commit"}, {"oid": "d58e91c983393d3e6c59d3f4a0a9adb0ce196db8", "url": "https://github.com/marklogic/marklogic-data-hub/commit/d58e91c983393d3e6c59d3f4a0a9adb0ce196db8", "message": "DHFPROD-5762: Adding sources object in Entity Headers to search result", "committedDate": "2020-08-19T15:22:55Z", "type": "forcePushed"}]}