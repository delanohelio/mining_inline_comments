{"pr_number": 4982, "pr_title": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View.", "pr_createdAt": "2020-12-10T19:47:55Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4982", "timeline": [{"oid": "f2e576697880ec0c6432fd98d35e6d3c877e6c81", "url": "https://github.com/marklogic/marklogic-data-hub/commit/f2e576697880ec0c6432fd98d35e6d3c877e6c81", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View", "committedDate": "2020-12-10T19:50:00Z", "type": "forcePushed"}, {"oid": "28c0ba4d7665b12db53e2515dd4453e394c72eb1", "url": "https://github.com/marklogic/marklogic-data-hub/commit/28c0ba4d7665b12db53e2515dd4453e394c72eb1", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View", "committedDate": "2020-12-10T20:01:45Z", "type": "forcePushed"}, {"oid": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "url": "https://github.com/marklogic/marklogic-data-hub/commit/c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View", "committedDate": "2020-12-10T20:02:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1MzQzOQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#discussion_r541153439", "bodyText": "It would be better if we place the custom response in a separate file, may be under \"assets/mock-data/explore/\" in a response file specifically for Non-Entity documents.", "author": "xnikhil08", "createdAt": "2020-12-11T18:45:27Z", "path": "marklogic-data-hub-central/ui/src/components/detail-page-non-entity/detail-page-non-entity.test.tsx", "diffHunk": "@@ -1,12 +1,62 @@\n import React from \"react\";\n-import {render} from \"@testing-library/react\";\n+import {render, fireEvent, waitForElement} from \"@testing-library/react\";\n import {BrowserRouter as Router} from \"react-router-dom\";\n import DetailPageNonEntity from \"./detail-page-non-entity\";\n import testData from \"../../assets/mock-data/explore/Non-entity-document-payload\";\n import userEvent from \"@testing-library/user-event\";\n+import axiosMock from \"axios\";\n+\n+jest.mock(\"axios\");\n \n describe(\"Detail page for non-entity view component\", () => {\n \n+  afterEach(() => {\n+    jest.clearAllMocks();\n+  });\n+\n+  const response =", "originalCommit": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1NzUzMg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#discussion_r541157532", "bodyText": "Any axios call should be moved out to the /api folder (may be create a new file for explorer there ?) and then the function can be imported here, to follow similar code pattern as other components.", "author": "xnikhil08", "createdAt": "2020-12-11T18:52:43Z", "path": "marklogic-data-hub-central/ui/src/components/detail-page-non-entity/detail-page-non-entity.tsx", "diffHunk": "@@ -173,6 +174,34 @@ const DetailPageNonEntity = (props) => {\n     }\n   };\n \n+  const download = async () => {\n+    try {\n+      const response = await axios({", "originalCommit": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1OTIwMg==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#discussion_r541159202", "bodyText": "This can also be moved to the same \"non-entity-document-response.tsx\" file that we can create to store the previous response , as mentioned in my earlier comment", "author": "xnikhil08", "createdAt": "2020-12-11T18:55:38Z", "path": "marklogic-data-hub-central/ui/src/components/record-view/record-view.test.tsx", "diffHunk": "@@ -3,9 +3,80 @@ import {render, fireEvent, waitForElement} from \"@testing-library/react\";\n import {entitySearch} from \"../../assets/mock-data/explore/entity-search\";\n import {BrowserRouter as Router} from \"react-router-dom\";\n import RecordCardView from \"./record-view\";\n+import axiosMock from \"axios\";\n+import {MemoryRouter} from \"react-router-dom\";\n+import {SearchContext} from \"../../util/search-context\";\n+\n+jest.mock(\"axios\");\n \n describe(\"Raw data card view component\", () => {\n \n+  const defaultSearchOptions = {\n+    query: \"\",\n+    entityTypeIds: [],\n+    nextEntityType: \"\",\n+    start: 1,\n+    pageNumber: 1,\n+    pageLength: 20,\n+    pageSize: 20,\n+    selectedFacets: {},\n+    maxRowsPerPage: 100,\n+    selectedQuery: \"select a query\",\n+    zeroState: false,\n+    manageQueryModal: false,\n+    selectedTableProperties: [],\n+    view: null,\n+    sortOrder: [],\n+    database: \"final\",\n+  };\n+\n+  const response =", "originalCommit": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE2MTIxNw==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4982#discussion_r541161217", "bodyText": "Same comment as above. Moving this axios call to /api folder would make it reusable at both the places.", "author": "xnikhil08", "createdAt": "2020-12-11T18:58:05Z", "path": "marklogic-data-hub-central/ui/src/components/record-view/record-view.tsx", "diffHunk": "@@ -133,6 +134,34 @@ const RecordCardView = (props) => {\n     return linkObject;\n   };\n \n+  const download = async (docUri) => {\n+    try {\n+      const response = await axios({", "originalCommit": "c9d41c94f256ca439a6dd63c3f8300a85d3be6e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "69e5ab4dde46e335b17159eba88065d8e283cb9a", "url": "https://github.com/marklogic/marklogic-data-hub/commit/69e5ab4dde46e335b17159eba88065d8e283cb9a", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View", "committedDate": "2020-12-11T20:02:05Z", "type": "commit"}, {"oid": "69e5ab4dde46e335b17159eba88065d8e283cb9a", "url": "https://github.com/marklogic/marklogic-data-hub/commit/69e5ab4dde46e335b17159eba88065d8e283cb9a", "message": "DHFPROD-6332: FE Implementation: Download a record or artifact from All Data View", "committedDate": "2020-12-11T20:02:05Z", "type": "forcePushed"}]}