{"pr_number": 4828, "pr_title": "DHFPROD-6209: Convert reference project match/merge steps to HubCentr\u2026", "pr_createdAt": "2020-11-04T23:25:48Z", "pr_url": "https://github.com/marklogic/marklogic-data-hub/pull/4828", "timeline": [{"oid": "7960389f52b84b19f7108dd501828190b03ad388", "url": "https://github.com/marklogic/marklogic-data-hub/commit/7960389f52b84b19f7108dd501828190b03ad388", "message": "DHFPROD-6209: Convert reference project match/merge steps to HubCentral format", "committedDate": "2020-11-04T23:23:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcxODY3MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4828#discussion_r517718671", "bodyText": "@ryanjdew  @fsnow  Two thoughts on seeing this side-by-side with the \"before\" config:\n\nThis is much easier to read\nI feel like there should be a top-level property that contains \"matchRulesets\" and \"thresholds\" - e.g. \"matchConfig\" . That makes it easy to grab all of the match config in a step, as opposed to having to know what properties constitute the match config and which ones do not.\n\nThoughts on #2?", "author": "rjrudin", "createdAt": "2020-11-05T00:54:58Z", "path": "examples/reference-entity-model/steps/matching/match-customers.step.json", "diffHunk": "@@ -7,32 +7,21 @@\n   \"targetEntity\" : \"Customer\",\n   \"sourceDatabase\" : \"data-hub-FINAL\",\n   \"collections\" : [ \"matched-customers\", \"match-customers\" ],\n-  \"matchOptions\" : {\n-    \"dataFormat\" : \"json\",\n-    \"propertyDefs\" : {\n-      \"property\" : [ {\n-        \"localname\" : \"customerId\",\n-        \"name\" : \"customerId\"\n-      } ]\n-    },\n-    \"scoring\" : {\n-      \"add\" : [ {\n-        \"propertyName\" : \"customerId\",\n-        \"weight\" : \"10\"\n-      } ]\n-    },\n-    \"thresholds\" : {\n-      \"threshold\" : [ {\n-        \"above\" : \"10\",\n-        \"label\" : \"Definitive Match\",\n-        \"action\" : \"merge\"\n-      } ]\n-    },\n-    \"tuning\" : {\n-      \"maxScan\" : 200\n-    }\n-  },\n   \"targetDatabase\" : \"data-hub-FINAL\",\n   \"targetFormat\" : \"json\",\n-  \"stepId\" : \"match-customers-matching\"\n+  \"stepId\" : \"match-customers-matching\",", "originalCommit": "7960389f52b84b19f7108dd501828190b03ad388", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcyMjI1MQ==", "url": "https://github.com/marklogic/marklogic-data-hub/pull/4828#discussion_r517722251", "bodyText": "@rjrudin We don't group feature specific properties for mapping steps, granted it is only \"namespaces\" and \"properties\".  Also, having the properties at the top-level can have the added benefit of the front-end being able to only push updates to thresholds, or matchRulesets, etc. I'm not sure if the front-end was planning on using that approach or not.\nIt may be worth drafting a ticket and getting feedback. At this point, it would probably be best to make such a change after the current work is completed and it can be changed across the board to avoid disruption.", "author": "ryanjdew", "createdAt": "2020-11-05T01:06:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcxODY3MQ=="}], "type": "inlineReview"}]}