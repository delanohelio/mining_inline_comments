{"pr_number": 474, "pr_title": "disallow adding a map to itself", "pr_createdAt": "2020-08-14T15:33:12Z", "pr_url": "https://github.com/HubSpot/jinjava/pull/474", "timeline": [{"oid": "0e06886bea30decb8d700029231089409f252522", "url": "https://github.com/HubSpot/jinjava/commit/0e06886bea30decb8d700029231089409f252522", "message": "disallow adding a map to itself", "committedDate": "2020-08-14T15:31:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDcwNDkwMg==", "url": "https://github.com/HubSpot/jinjava/pull/474#discussion_r470704902", "bodyText": "Since you are iterating the entries, can you just call put(key, value) for each of the entry, and skip the scope.putAll(m)?", "author": "hs-lsong", "createdAt": "2020-08-14T15:43:12Z", "path": "src/main/java/com/hubspot/jinjava/util/ScopeMap.java", "diffHunk": "@@ -120,7 +126,18 @@ public V remove(Object key) {\n   }\n \n   @Override\n-  public void putAll(Map<? extends K, ? extends V> m) {\n+  public void putAll(@Nonnull Map<? extends K, ? extends V> m) {\n+    for (Entry<? extends K, ? extends V> entry : m.entrySet()) {", "originalCommit": "0e06886bea30decb8d700029231089409f252522", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDcyNDcwNA==", "url": "https://github.com/HubSpot/jinjava/pull/474#discussion_r470724704", "bodyText": "The HashMap implementation of putAll has some optimizations for inserting multiple entries, so I didn't want to override that.", "author": "boulter", "createdAt": "2020-08-14T16:20:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDcwNDkwMg=="}], "type": "inlineReview"}]}