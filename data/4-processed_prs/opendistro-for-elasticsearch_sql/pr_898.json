{"pr_number": 898, "pr_title": "Fix for ExprValueFactory construct issue", "pr_createdAt": "2020-12-08T06:06:25Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/sql/pull/898", "timeline": [{"oid": "fe02ece35503bc29ae3a9d0d6ea9bc691dd89e08", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/fe02ece35503bc29ae3a9d0d6ea9bc691dd89e08", "message": "add date & time", "committedDate": "2020-12-03T18:20:35Z", "type": "commit"}, {"oid": "9f9c29dd88e016a76c6c51e69672135c494b9f5d", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/9f9c29dd88e016a76c6c51e69672135c494b9f5d", "message": "Merge branch 'develop' of https://github.com/rupal-bq/sql into expr-value-construct", "committedDate": "2020-12-07T19:22:38Z", "type": "commit"}, {"oid": "d996cd13c28e86a271e25e2b67e6e679a0072c5f", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/d996cd13c28e86a271e25e2b67e6e679a0072c5f", "message": "add datetime", "committedDate": "2020-12-07T20:18:03Z", "type": "commit"}, {"oid": "5982c091eab3ef8493a29fe1b179669694efc69b", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/5982c091eab3ef8493a29fe1b179669694efc69b", "message": "try comparison test", "committedDate": "2020-12-07T22:08:03Z", "type": "commit"}, {"oid": "0eebbf9fcfddfb2512521185dc56349e667d3316", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/0eebbf9fcfddfb2512521185dc56349e667d3316", "message": "add manual IT", "committedDate": "2020-12-07T23:01:40Z", "type": "commit"}, {"oid": "103862ade6bec3ff509db419e4d0e8c746dd7632", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/103862ade6bec3ff509db419e4d0e8c746dd7632", "message": "add integration test for issue #867", "committedDate": "2020-12-08T18:44:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgwNTU2Ng==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/898#discussion_r538805566", "bodyText": "Quesiton,  In which case the field will in type of DATA/TIME/DATETIME?\nThe main purpose of ExprValueFactory is extract data from Elasticsearch response. Elasticsearch only support date type and it is mapped to TIMESTAMP.", "author": "penghuo", "createdAt": "2020-12-08T21:02:55Z", "path": "elasticsearch/src/main/java/com/amazon/opendistroforelasticsearch/sql/elasticsearch/data/value/ElasticsearchExprValueFactory.java", "diffHunk": "@@ -177,14 +183,22 @@ public ExprValue construct(String field, Object value) {\n       return constructString((String) value);\n     } else if (type.equals(BOOLEAN)) {\n       return constructBoolean((Boolean) value);\n-    } else if (type.equals(TIMESTAMP)) {\n+    } else if (type.equals(TIMESTAMP) || type.equals(DATE) || type.equals(TIME)", "originalCommit": "103862ade6bec3ff509db419e4d0e8c746dd7632", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgxMTQ3MA==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/898#discussion_r538811470", "bodyText": "Never mind, this is the aggregation result. I see the problem.", "author": "penghuo", "createdAt": "2020-12-08T21:13:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgwNTU2Ng=="}], "type": "inlineReview"}]}