{"pr_number": 943, "pr_title": "Fix workbench issue in backported 1.11 branch: error message cannot display", "pr_createdAt": "2020-12-16T21:14:27Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/sql/pull/943", "timeline": [{"oid": "4585c69bc89803f1278697c1a88a474ebfc6b18b", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/4585c69bc89803f1278697c1a88a474ebfc6b18b", "message": "fixed error message cannot display issue", "committedDate": "2020-12-16T21:08:50Z", "type": "commit"}, {"oid": "c573b3c1de86099befa44ec14321e0244219e3f5", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/c573b3c1de86099befa44ec14321e0244219e3f5", "message": "Merge branch 'backport-7.9' into fix-error-msg", "committedDate": "2020-12-16T21:10:03Z", "type": "commit"}, {"oid": "166d2795cccb1e418881297d76361c76944f6f9a", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/166d2795cccb1e418881297d76361c76944f6f9a", "message": "update", "committedDate": "2020-12-16T21:13:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYzMDA5Nw==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/943#discussion_r544630097", "bodyText": "Do we need to leave these comments in?", "author": "davidcui1225", "createdAt": "2020-12-16T21:18:55Z", "path": "workbench/public/components/Main/main.tsx", "diffHunk": "@@ -260,13 +261,17 @@ export class Main extends React.Component<MainProps, MainState> {\n       }\n     }\n     if (!response.data.ok) {\n+      // Error message in JSON format from backend is wrapped in response data\n+      // response.data: IHttpResponse<ResponseData> \n+      const error: IHttpResponse<ResponseData> = response.data;\n       return {\n         fulfilled: false,\n-        errorMessage: response.data.resp,\n-        data: response.data.body,\n+        errorMessage: error.data.resp,\n+        data: error.data.body,\n       };\n     }\n \n+    // response: IHttpResponse<ResponseData> ", "originalCommit": "166d2795cccb1e418881297d76361c76944f6f9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYzMjQ5Ng==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/943#discussion_r544632496", "bodyText": "Yes I added this comment here to remind us that the responses of success and error are of different types", "author": "chloe-zh", "createdAt": "2020-12-16T21:23:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYzMDA5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYzNDIxNw==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/943#discussion_r544634217", "bodyText": "unnecessary console.log?", "author": "joshuali925", "createdAt": "2020-12-16T21:26:11Z", "path": "workbench/public/components/Main/main.tsx", "diffHunk": "@@ -251,7 +251,8 @@ export class Main extends React.Component<MainProps, MainState> {\n     };\n   }\n \n-  processQueryResponse(response: IHttpResponse<ResponseData>): ResponseDetail<string> {\n+  processQueryResponse(response: any): ResponseDetail<string> {\n+    console.log(response)", "originalCommit": "166d2795cccb1e418881297d76361c76944f6f9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYzNjEyMQ==", "url": "https://github.com/opendistro-for-elasticsearch/sql/pull/943#discussion_r544636121", "bodyText": "removed, thanks!", "author": "chloe-zh", "createdAt": "2020-12-16T21:29:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDYzNDIxNw=="}], "type": "inlineReview"}, {"oid": "ce958d2971edd9016e387ed125a95d5546a3d5ec", "url": "https://github.com/opendistro-for-elasticsearch/sql/commit/ce958d2971edd9016e387ed125a95d5546a3d5ec", "message": "removed redundant lines", "committedDate": "2020-12-16T21:28:19Z", "type": "commit"}]}