{"pr_number": 4112, "pr_title": "[Bug] Fix bug that tablet meta lock twice", "pr_createdAt": "2020-07-17T04:32:57Z", "pr_url": "https://github.com/apache/incubator-doris/pull/4112", "timeline": [{"oid": "27aa7d65b81a3c9f72817853ae2bfcb77baa2dbe", "url": "https://github.com/apache/incubator-doris/commit/27aa7d65b81a3c9f72817853ae2bfcb77baa2dbe", "message": "[Bug] Fix bug that tablet meta lock twice\n\nThe tablet meta load may already be hold before calling\ngenerate_tablet_meta_copy(), so we need provide a unlocked\nversion of generate_tablet_meta_copy()", "committedDate": "2020-07-17T04:26:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIzMDk2MA==", "url": "https://github.com/apache/incubator-doris/pull/4112#discussion_r456230960", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // caller should hold the _meta_load before calling this method\n          \n          \n            \n                // caller should hold the _meta_lock before calling this method", "author": "caiconghui", "createdAt": "2020-07-17T05:46:43Z", "path": "be/src/olap/tablet.h", "diffHunk": "@@ -222,6 +222,8 @@ class Tablet : public BaseTablet {\n     void build_tablet_report_info(TTabletInfo* tablet_info);\n \n     void generate_tablet_meta_copy(TabletMetaSharedPtr new_tablet_meta) const;\n+    // caller should hold the _meta_load before calling this method", "originalCommit": "27aa7d65b81a3c9f72817853ae2bfcb77baa2dbe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njc5NTQ4MQ==", "url": "https://github.com/apache/incubator-doris/pull/4112#discussion_r456795481", "bodyText": "done", "author": "morningman", "createdAt": "2020-07-18T14:31:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIzMDk2MA=="}], "type": "inlineReview"}, {"oid": "55f10a43d13054bfd760bf7e23866453c6fccac6", "url": "https://github.com/apache/incubator-doris/commit/55f10a43d13054bfd760bf7e23866453c6fccac6", "message": "fix typo", "committedDate": "2020-07-17T15:24:53Z", "type": "commit"}]}