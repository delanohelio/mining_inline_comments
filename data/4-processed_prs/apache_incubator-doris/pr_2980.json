{"pr_number": 2980, "pr_title": "[Conf]Make default_storage_medium configurable", "pr_createdAt": "2020-02-24T09:03:45Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2980", "timeline": [{"oid": "819d078872032a980e4f836c340cedb7fc0e0040", "url": "https://github.com/apache/incubator-doris/commit/819d078872032a980e4f836c340cedb7fc0e0040", "message": "[Conf]Make default_storage_medium configurable", "committedDate": "2020-02-24T08:43:52Z", "type": "commit"}, {"oid": "a41a00c2d022521106cce5d66a70102adff1f496", "url": "https://github.com/apache/incubator-doris/commit/a41a00c2d022521106cce5d66a70102adff1f496", "message": "update doc", "committedDate": "2020-02-24T10:06:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA1MjYzMA==", "url": "https://github.com/apache/incubator-doris/pull/2980#discussion_r387052630", "bodyText": "Here will be a problem.\nFor now, DataProperty.DEFAULT_DATA_PROPERTY is configuration, so here, it is all possible to write true or false. And when reading, true may point to HDD, may point to SSD, depends on the config.", "author": "morningman", "createdAt": "2020-03-03T14:25:09Z", "path": "fe/src/main/java/org/apache/doris/catalog/PartitionInfo.java", "diffHunk": "@@ -127,7 +127,7 @@ public void write(DataOutput out) throws IOException {\n         out.writeInt(idToDataProperty.size());\n         for (Map.Entry<Long, DataProperty> entry : idToDataProperty.entrySet()) {\n             out.writeLong(entry.getKey());\n-            if (entry.getValue() == DataProperty.DEFAULT_HDD_DATA_PROPERTY) {\n+            if (entry.getValue() == DataProperty.DEFAULT_DATA_PROPERTY) {", "originalCommit": "a41a00c2d022521106cce5d66a70102adff1f496", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUzMzU2Mg==", "url": "https://github.com/apache/incubator-doris/pull/2980#discussion_r387533562", "bodyText": "I am confused why we should add a judge whether the DataProperty is default, can we just write entry.getValue().write(out);  and read as DataProperty.read(in). I think the idToDataProperty's values can't be null?", "author": "WingsGo", "createdAt": "2020-03-04T09:12:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA1MjYzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA2ODAyMg==", "url": "https://github.com/apache/incubator-doris/pull/2980#discussion_r388068022", "bodyText": "If we need to compatible with old version, I can chnage it to entry.getValue() == new DataProperty(TStorageMedium.HDD)", "author": "WingsGo", "createdAt": "2020-03-05T04:03:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA1MjYzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI1NTA0MQ==", "url": "https://github.com/apache/incubator-doris/pull/2980#discussion_r392255041", "bodyText": "You are righ, it is a little bit confused..\nYou can change it as you said.", "author": "morningman", "createdAt": "2020-03-13T14:17:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA1MjYzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI5NjUyMg==", "url": "https://github.com/apache/incubator-doris/pull/2980#discussion_r392296522", "bodyText": "done", "author": "WingsGo", "createdAt": "2020-03-13T15:23:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzA1MjYzMA=="}], "type": "inlineReview"}, {"oid": "09e49f7c8e43116b280e742346a0e4c35caf207c", "url": "https://github.com/apache/incubator-doris/commit/09e49f7c8e43116b280e742346a0e4c35caf207c", "message": "fix change ssd to hdd", "committedDate": "2020-03-04T09:00:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI1NjM1OA==", "url": "https://github.com/apache/incubator-doris/pull/2980#discussion_r392256358", "bodyText": "Change the log print is HDD:", "author": "morningman", "createdAt": "2020-03-13T14:19:44Z", "path": "fe/src/main/java/org/apache/doris/catalog/PartitionInfo.java", "diffHunk": "@@ -170,7 +170,7 @@ public String toString() {\n \n         for (Map.Entry<Long, DataProperty> entry : idToDataProperty.entrySet()) {\n             buff.append(entry.getKey()).append(\"is HDD: \");;\n-            if (entry.getValue() == DataProperty.DEFAULT_HDD_DATA_PROPERTY) {\n+            if (entry.getValue() == DataProperty.DEFAULT_DATA_PROPERTY) {", "originalCommit": "09e49f7c8e43116b280e742346a0e4c35caf207c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI5NjQ2MQ==", "url": "https://github.com/apache/incubator-doris/pull/2980#discussion_r392296461", "bodyText": "done", "author": "WingsGo", "createdAt": "2020-03-13T15:23:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI1NjM1OA=="}], "type": "inlineReview"}, {"oid": "d4ce9a5bf28d6d365f5356b7aa7afff773279aff", "url": "https://github.com/apache/incubator-doris/commit/d4ce9a5bf28d6d365f5356b7aa7afff773279aff", "message": "fix", "committedDate": "2020-03-13T15:23:14Z", "type": "commit"}]}