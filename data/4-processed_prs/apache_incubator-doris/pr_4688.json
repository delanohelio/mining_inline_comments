{"pr_number": 4688, "pr_title": "[LRUCache] Expose LRU Cache status to metrics", "pr_createdAt": "2020-09-29T04:11:25Z", "pr_url": "https://github.com/apache/incubator-doris/pull/4688", "timeline": [{"oid": "e620c7017c5ae8f6e34774c8d3a98215430d856c", "url": "https://github.com/apache/incubator-doris/commit/e620c7017c5ae8f6e34774c8d3a98215430d856c", "message": "fix", "committedDate": "2020-10-15T11:31:18Z", "type": "forcePushed"}, {"oid": "84a83c8ca937bcd03a8bab4c87f222caca70184c", "url": "https://github.com/apache/incubator-doris/commit/84a83c8ca937bcd03a8bab4c87f222caca70184c", "message": "[LRUCache] Expose LRU Cache status to metrics\n\nExpose LRU Cache status to metrics would be helpful to diagnose\nproblems like high usage, low hit rate.", "committedDate": "2020-10-15T15:01:57Z", "type": "forcePushed"}, {"oid": "2b6e569c29dfbd7d28b824248c5635e4cbedb8be", "url": "https://github.com/apache/incubator-doris/commit/2b6e569c29dfbd7d28b824248c5635e4cbedb8be", "message": "[LRUCache] Expose LRU Cache status to metrics\n\nExpose LRU Cache status to metrics would be helpful to diagnose\nproblems like high usage, low hit rate.", "committedDate": "2020-10-18T14:47:14Z", "type": "forcePushed"}, {"oid": "8e4d69429f24eef8be8e5fab48768c3d79e3f164", "url": "https://github.com/apache/incubator-doris/commit/8e4d69429f24eef8be8e5fab48768c3d79e3f164", "message": "[LRUCache] Expose LRU Cache status to metrics\n\nExpose LRU Cache status to metrics would be helpful to diagnose\nproblems like high usage, low hit rate.", "committedDate": "2020-10-20T05:48:46Z", "type": "commit"}, {"oid": "b337c00498a072ef6493af901850813251bd5393", "url": "https://github.com/apache/incubator-doris/commit/b337c00498a072ef6493af901850813251bd5393", "message": "init member", "committedDate": "2020-10-20T05:48:46Z", "type": "commit"}, {"oid": "b337c00498a072ef6493af901850813251bd5393", "url": "https://github.com/apache/incubator-doris/commit/b337c00498a072ef6493af901850813251bd5393", "message": "init member", "committedDate": "2020-10-20T05:48:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk0OTExNQ==", "url": "https://github.com/apache/incubator-doris/pull/4688#discussion_r508949115", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return _last_id.fetch_add(1, std::memory_order_relaxed);;\n          \n          \n            \n                return _last_id.fetch_add(1, std::memory_order_relaxed);", "author": "morningman", "createdAt": "2020-10-21T02:21:06Z", "path": "be/src/olap/lru_cache.cpp", "diffHunk": "@@ -420,8 +425,7 @@ Slice ShardedLRUCache::value_slice(Handle* handle) {\n }\n \n uint64_t ShardedLRUCache::new_id() {\n-    MutexLock l(&_id_mutex);\n-    return ++(_last_id);\n+    return _last_id.fetch_add(1, std::memory_order_relaxed);;", "originalCommit": "b337c00498a072ef6493af901850813251bd5393", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c0148596492e51e1a4f94e75e194e7cf79d8cc3a", "url": "https://github.com/apache/incubator-doris/commit/c0148596492e51e1a4f94e75e194e7cf79d8cc3a", "message": "Update be/src/olap/lru_cache.cpp\n\nCo-authored-by: Mingyu Chen <morningman.cmy@gmail.com>", "committedDate": "2020-10-21T02:44:50Z", "type": "commit"}]}