{"pr_number": 2685, "pr_title": "add cpp connect sample", "pr_createdAt": "2020-01-07T06:29:48Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2685", "timeline": [{"oid": "6241d2a9f377c711260211773957e12e8379de70", "url": "https://github.com/apache/incubator-doris/commit/6241d2a9f377c711260211773957e12e8379de70", "message": "add cpp connect sample", "committedDate": "2020-01-07T06:21:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNDgyNA==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363624824", "bodyText": "You can write supported mysql version like mysql 5.1, 5.2", "author": "chaoyli", "createdAt": "2020-01-07T07:47:41Z", "path": "samples/connect/cpp/MyDB.h", "diffHunk": "@@ -0,0 +1,38 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef _MYDB_H\n+#define _MYDB_H\n+#include<iostream>\n+#include<string>\n+#include<mysql/mysql.h>\n+using namespace std;\n+\n+class MyDB", "originalCommit": "6241d2a9f377c711260211773957e12e8379de70", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNDkwMQ==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363624901", "bodyText": "const string& sql", "author": "chaoyli", "createdAt": "2020-01-07T07:48:00Z", "path": "samples/connect/cpp/MyDB.cpp", "diffHunk": "@@ -0,0 +1,154 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n+        2. ./MyDB\n+************************************************************************/\n+\n+#include<iostream>\n+#include<string>\n+#include \"MyDB.h\"\n+\n+using namespace std;\n+\n+MyDB::MyDB()\n+{\n+    mysql=mysql_init(NULL);   //init connection\n+    if(mysql==NULL)\n+    {\n+        cout<<\"Error:\"<<mysql_error(mysql);\n+    }\n+}\n+\n+MyDB::~MyDB()\n+{\n+    if(mysql!=NULL)  //close connection\n+    {\n+        mysql_close(mysql);\n+    }\n+}\n+\n+bool MyDB::initDB(string host, string user, string passwd, string db_name, int port, string sock)\n+{\n+    // create connection\n+    mysql = mysql_real_connect(mysql, host.c_str(), user.c_str(), passwd.c_str(),\n+            db_name.c_str(), port, sock.c_str(), 0);\n+    if(mysql == NULL)\n+    {\n+        cout << \"Error: \" << mysql_error(mysql);\n+        return false;\n+    }\n+    return true;\n+}\n+\n+bool MyDB::exeSQL(string sql)", "originalCommit": "6241d2a9f377c711260211773957e12e8379de70", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNDk0Nw==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363624947", "bodyText": "const string& host, const string& user", "author": "chaoyli", "createdAt": "2020-01-07T07:48:10Z", "path": "samples/connect/cpp/MyDB.cpp", "diffHunk": "@@ -0,0 +1,154 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n+        2. ./MyDB\n+************************************************************************/\n+\n+#include<iostream>\n+#include<string>\n+#include \"MyDB.h\"\n+\n+using namespace std;\n+\n+MyDB::MyDB()\n+{\n+    mysql=mysql_init(NULL);   //init connection\n+    if(mysql==NULL)\n+    {\n+        cout<<\"Error:\"<<mysql_error(mysql);\n+    }\n+}\n+\n+MyDB::~MyDB()\n+{\n+    if(mysql!=NULL)  //close connection\n+    {\n+        mysql_close(mysql);\n+    }\n+}\n+\n+bool MyDB::initDB(string host, string user, string passwd, string db_name, int port, string sock)", "originalCommit": "6241d2a9f377c711260211773957e12e8379de70", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNTQ2Nw==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363625467", "bodyText": "using std::string instead, C++ style not recommend using namespace", "author": "chaoyli", "createdAt": "2020-01-07T07:50:03Z", "path": "samples/connect/cpp/MyDB.cpp", "diffHunk": "@@ -0,0 +1,154 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n+        2. ./MyDB\n+************************************************************************/\n+\n+#include<iostream>\n+#include<string>\n+#include \"MyDB.h\"\n+\n+using namespace std;", "originalCommit": "6241d2a9f377c711260211773957e12e8379de70", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNjIwNw==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363626207", "bodyText": "mysql = mysql_init(NULL);\nif (mysql == NULL) {\nstd::cout << \"Error:\" << mysql_error(mysql);\n}", "author": "chaoyli", "createdAt": "2020-01-07T07:52:45Z", "path": "samples/connect/cpp/MyDB.cpp", "diffHunk": "@@ -0,0 +1,154 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n+        2. ./MyDB\n+************************************************************************/\n+\n+#include<iostream>\n+#include<string>\n+#include \"MyDB.h\"\n+\n+using namespace std;\n+\n+MyDB::MyDB()\n+{\n+    mysql=mysql_init(NULL);   //init connection", "originalCommit": "6241d2a9f377c711260211773957e12e8379de70", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNjQ4NA==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363626484", "bodyText": "#ifndef SAMPLES_CONNECT_CPP_MYDB_H\n#define SAMPLES_CONNECT_CPP_MYDB_H", "author": "chaoyli", "createdAt": "2020-01-07T07:53:46Z", "path": "samples/connect/cpp/MyDB.h", "diffHunk": "@@ -0,0 +1,38 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef _MYDB_H", "originalCommit": "6241d2a9f377c711260211773957e12e8379de70", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYyNjUyOA==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363626528", "bodyText": "#include \n#include", "author": "chaoyli", "createdAt": "2020-01-07T07:53:59Z", "path": "samples/connect/cpp/MyDB.h", "diffHunk": "@@ -0,0 +1,38 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef _MYDB_H\n+#define _MYDB_H\n+#include<iostream>", "originalCommit": "6241d2a9f377c711260211773957e12e8379de70", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "34f9b0b39ad295fff64b2700b3e2bc93ff9d032c", "url": "https://github.com/apache/incubator-doris/commit/34f9b0b39ad295fff64b2700b3e2bc93ff9d032c", "message": "add cpp connect sample", "committedDate": "2020-01-07T10:55:00Z", "type": "commit"}, {"oid": "97c3a65f3072a256d38ad3757840a7f67e308169", "url": "https://github.com/apache/incubator-doris/commit/97c3a65f3072a256d38ad3757840a7f67e308169", "message": "add cpp connect sample", "committedDate": "2020-01-07T11:01:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc1OTkxMA==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r363759910", "bodyText": "maybe better to print the num_rows?", "author": "morningman", "createdAt": "2020-01-07T14:00:22Z", "path": "samples/connect/cpp/my_doris.cpp", "diffHunk": "@@ -0,0 +1,156 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ my_doris.cpp -o my_doris `mysql_config --cflags --libs`\n+        2. ./my_doris\n+> Comment: Supported mysql version: 5.6, 5.7, 8.0\n+************************************************************************/\n+\n+#include <iostream>\n+#include <string>\n+#include \"doris.h\"\n+\n+using std::string;\n+\n+Doris::Doris()\n+{\n+    doris = mysql_init(NULL);   //init connection\n+    if (doris == NULL)\n+    {\n+        std::cout << \"Error:\" << mysql_error(doris);\n+    }\n+}\n+\n+Doris::~Doris()\n+{\n+    if (doris != NULL)  //close connection\n+    {\n+        mysql_close(doris);\n+    }\n+}\n+\n+bool Doris::initDoris(const string& host, const string& user, const string& passwd,\n+                      const string& db_name, int port, const string& sock)\n+{\n+    // create connection\n+    doris = mysql_real_connect(doris, host.c_str(), user.c_str(), passwd.c_str(),\n+            db_name.c_str(), port, sock.c_str(), 0);\n+    if (doris == NULL)\n+    {\n+        std::cout << \"Error: \" << mysql_error(doris);\n+        return false;\n+    }\n+    return true;\n+}\n+\n+bool Doris::exeSQL(const string& sql)\n+{\n+    if (mysql_query(doris, sql.c_str()))\n+    {\n+        std::cout << \"Query Error: \" << mysql_error(doris);\n+        return false;\n+    }\n+    else\n+    {\n+        result = mysql_store_result(doris);\n+        if (result)\n+        {\n+           int num_fields = mysql_num_fields(result);\n+           int num_rows = mysql_num_rows(result);\n+           for (int i = 0; i < num_rows; i++)\n+            {\n+                row = mysql_fetch_row(result);\n+                if (row < 0) break;\n+\n+                for (int j = 0; j < num_fields; j++)\n+                {\n+                    std::cout << row[j] << \"\\t\";\n+                }\n+                std::cout << std::endl;\n+            }\n+\n+        }\n+        else\n+        {\n+            if (mysql_field_count(doris) == 0)\n+            {\n+                int num_rows = mysql_affected_rows(doris);", "originalCommit": "97c3a65f3072a256d38ad3757840a7f67e308169", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAzMTUwNQ==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364031505", "bodyText": "Doris::Doris() {\n}\nlike this style", "author": "chaoyli", "createdAt": "2020-01-08T01:38:30Z", "path": "samples/connect/cpp/my_doris.cpp", "diffHunk": "@@ -17,82 +17,84 @@\n \n /*************************************************************************\n > Useage:\n-        1. g++ MyDB.cpp -o MyDb `mysql_config --cflags --libs`\n-        2. ./MyDB\n+        1. g++ my_doris.cpp -o my_doris `mysql_config --cflags --libs`\n+        2. ./my_doris\n+> Comment: Supported mysql version: 5.6, 5.7, 8.0\n ************************************************************************/\n \n-#include<iostream>\n-#include<string>\n-#include \"MyDB.h\"\n+#include <iostream>\n+#include <string>\n+#include \"doris.h\"\n \n-using namespace std;\n+using std::string;\n \n-MyDB::MyDB()\n+Doris::Doris()\n {", "originalCommit": "97c3a65f3072a256d38ad3757840a7f67e308169", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAzMTU5Mg==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364031592", "bodyText": "MYSQL* doris;\nMYSQL_RES* result;", "author": "chaoyli", "createdAt": "2020-01-08T01:38:56Z", "path": "samples/connect/cpp/doris.h", "diffHunk": "@@ -15,24 +15,26 @@\n // specific language governing permissions and limitations\n // under the License.\n \n-#ifndef _MYDB_H\n-#define _MYDB_H\n-#include<iostream>\n-#include<string>\n-#include<mysql/mysql.h>\n-using namespace std;\n+#ifndef SAMPLES_CONNECT_CPP_DORIS_H\n+#define SAMPLES_CONNECT_CPP_DORIS_H\n+#include <iostream>\n+#include <string>\n+#include <mysql/mysql.h>\n \n-class MyDB\n+using std::string;\n+\n+class Doris\n {\n     public:\n-        MyDB();\n-        ~MyDB();\n-        bool initDB(string host,string user,string passwd,string db_name,int port,string sock); // connect to mysql\n-        bool exeSQL(string sql);   // excute sql\n+        Doris();\n+        ~Doris();\n+        bool initDoris(const string& host, const string& user, const string& passwd,\n+                      const string& db_name, int port, const string& sock); // connect to doris\n+        bool exeSQL(const string& sql);   // excute sql\n     private:\n-        MYSQL *mysql;\n-        MYSQL_RES *result;\n-        MYSQL_ROW row;\n+        MYSQL *doris;     // mysql handle", "originalCommit": "97c3a65f3072a256d38ad3757840a7f67e308169", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7c1e26d47e336cafcba1ee6e523188bda1ae27b7", "url": "https://github.com/apache/incubator-doris/commit/7c1e26d47e336cafcba1ee6e523188bda1ae27b7", "message": "fix code style", "committedDate": "2020-01-08T02:27:28Z", "type": "commit"}, {"oid": "3bd1298359d49be54821f715331477f8655943b9", "url": "https://github.com/apache/incubator-doris/commit/3bd1298359d49be54821f715331477f8655943b9", "message": "fix code style", "committedDate": "2020-01-08T02:52:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDE4Nw==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124187", "bodyText": "better to rename it to DorisClient", "author": "imay", "createdAt": "2020-01-08T09:03:01Z", "path": "samples/connect/cpp/doris_client.cpp", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ doris_client.cpp -o doris_client `mysql_config --cflags --libs`\n+        2. ./doris_client\n+> Comment: Supported mysql version: 5.6, 5.7, 8.0\n+************************************************************************/\n+\n+#include \"doris_client.h\"\n+\n+#include <iostream>\n+#include <string>\n+\n+using std::string;\n+\n+Doris::Doris() {", "originalCommit": "3bd1298359d49be54821f715331477f8655943b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDIwNw==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124207", "bodyText": "no need to have this else", "author": "imay", "createdAt": "2020-01-08T09:03:04Z", "path": "samples/connect/cpp/doris_client.cpp", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ doris_client.cpp -o doris_client `mysql_config --cflags --libs`\n+        2. ./doris_client\n+> Comment: Supported mysql version: 5.6, 5.7, 8.0\n+************************************************************************/\n+\n+#include \"doris_client.h\"\n+\n+#include <iostream>\n+#include <string>\n+\n+using std::string;\n+\n+Doris::Doris() {\n+    //init connection\n+    doris = mysql_init(NULL);\n+    if (doris == NULL) {\n+        std::cout << \"Error:\" << mysql_error(doris);\n+    }\n+}\n+\n+Doris::~Doris() {\n+    //close connection\n+    if (doris != NULL) {\n+        mysql_close(doris);\n+    }\n+}\n+\n+bool Doris::initDoris(const string& host, const string& user, const string& passwd,\n+                      const string& db_name, int port, const string& sock) {\n+    // create connection\n+    doris = mysql_real_connect(doris, host.c_str(), user.c_str(), passwd.c_str(),\n+            db_name.c_str(), port, sock.c_str(), 0);\n+    if (doris == NULL) {\n+        std::cout << \"Error: \" << mysql_error(doris);\n+        return false;\n+    }\n+    return true;\n+}\n+\n+bool Doris::exeSQL(const string& sql) {\n+    if (mysql_query(doris, sql.c_str())) {\n+        std::cout << \"Query Error: \" << mysql_error(doris);\n+        return false;\n+    } else {", "originalCommit": "3bd1298359d49be54821f715331477f8655943b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDQ1Mg==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124452", "bodyText": "better to give a defalut value and this can rename doris to _client.\nWe prefer a leading _ for member variable name", "author": "imay", "createdAt": "2020-01-08T09:03:40Z", "path": "samples/connect/cpp/doris_client.h", "diffHunk": "@@ -0,0 +1,46 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+#define SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+\n+#include <iostream>\n+#include <string>\n+\n+#include <mysql/mysql.h>\n+\n+using std::string;\n+\n+class Doris {\n+public:\n+    Doris();\n+    ~Doris();\n+    // connect to doris\n+    bool initDoris(const string& host, const string& user, const string& passwd,\n+                  const string& db_name, int port, const string& sock);\n+    // excute sql\n+    bool exeSQL(const string& sql);\n+private:\n+    // mysql handle\n+    MYSQL* doris;", "originalCommit": "3bd1298359d49be54821f715331477f8655943b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDYyMw==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124623", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                bool initDoris(const string& host, const string& user, const string& passwd,\n          \n          \n            \n                bool init(const string& host, const string& user, const string& passwd,", "author": "imay", "createdAt": "2020-01-08T09:04:08Z", "path": "samples/connect/cpp/doris_client.h", "diffHunk": "@@ -0,0 +1,46 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+#define SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+\n+#include <iostream>\n+#include <string>\n+\n+#include <mysql/mysql.h>\n+\n+using std::string;\n+\n+class Doris {\n+public:\n+    Doris();\n+    ~Doris();\n+    // connect to doris\n+    bool initDoris(const string& host, const string& user, const string& passwd,", "originalCommit": "3bd1298359d49be54821f715331477f8655943b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNDY2Mg==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364124662", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                bool exeSQL(const string& sql);\n          \n          \n            \n                bool exec(const string& sql);", "author": "imay", "createdAt": "2020-01-08T09:04:15Z", "path": "samples/connect/cpp/doris_client.h", "diffHunk": "@@ -0,0 +1,46 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+#define SAMPLES_CONNECT_CPP_DORIS_CLIENT_H\n+\n+#include <iostream>\n+#include <string>\n+\n+#include <mysql/mysql.h>\n+\n+using std::string;\n+\n+class Doris {\n+public:\n+    Doris();\n+    ~Doris();\n+    // connect to doris\n+    bool initDoris(const string& host, const string& user, const string& passwd,\n+                  const string& db_name, int port, const string& sock);\n+    // excute sql\n+    bool exeSQL(const string& sql);", "originalCommit": "3bd1298359d49be54821f715331477f8655943b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEyNTkyNA==", "url": "https://github.com/apache/incubator-doris/pull/2685#discussion_r364125924", "bodyText": "Should tell users what will this program do.", "author": "imay", "createdAt": "2020-01-08T09:07:18Z", "path": "samples/connect/cpp/doris_client.cpp", "diffHunk": "@@ -0,0 +1,147 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+/*************************************************************************\n+> Useage:\n+        1. g++ doris_client.cpp -o doris_client `mysql_config --cflags --libs`\n+        2. ./doris_client", "originalCommit": "3bd1298359d49be54821f715331477f8655943b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1daa286cb17fa3966d6078c1b5f0815e488ae417", "url": "https://github.com/apache/incubator-doris/commit/1daa286cb17fa3966d6078c1b5f0815e488ae417", "message": "fix code style", "committedDate": "2020-01-08T12:07:42Z", "type": "commit"}, {"oid": "1751038bb7b148cfe33bc740d6d58aa29d81b888", "url": "https://github.com/apache/incubator-doris/commit/1751038bb7b148cfe33bc740d6d58aa29d81b888", "message": "fix code style", "committedDate": "2020-01-08T12:16:19Z", "type": "commit"}, {"oid": "f3f2ad1894548b3c9b4970c6222bb134a3af37f6", "url": "https://github.com/apache/incubator-doris/commit/f3f2ad1894548b3c9b4970c6222bb134a3af37f6", "message": "fix code style", "committedDate": "2020-01-08T12:35:14Z", "type": "commit"}]}