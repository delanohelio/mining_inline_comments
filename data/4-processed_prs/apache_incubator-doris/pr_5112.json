{"pr_number": 5112, "pr_title": "[Enhancement] Add more comprehensive prometheus jvm thread metrics on fe", "pr_createdAt": "2020-12-22T03:40:32Z", "pr_url": "https://github.com/apache/incubator-doris/pull/5112", "timeline": [{"oid": "f8f0f66aa246d26b1094294f4b8c6bbbc11d7d3c", "url": "https://github.com/apache/incubator-doris/commit/f8f0f66aa246d26b1094294f4b8c6bbbc11d7d3c", "message": "add comprehensive jvm thread metrics on fe", "committedDate": "2020-12-22T03:33:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzk0MDg2OQ==", "url": "https://github.com/apache/incubator-doris/pull/5112#discussion_r547940869", "bodyText": "Please update docs of fe metrics include every new metrics and means of metrics", "author": "EmmyMiao87", "createdAt": "2020-12-23T12:43:19Z", "path": "fe/fe-core/src/main/java/org/apache/doris/common/proc/JvmProcDir.java", "diffHunk": "@@ -94,6 +94,12 @@ public ProcResult fetchResult() throws AnalysisException {\n         Threads threads = jvmStats.getThreads();\n         result.addRow(genRow(\"threads count\", threads.getCount()));\n         result.addRow(genRow(\"threads peak count\", threads.getPeakCount()));\n+        result.addRow(genRow(\"threads new count\", threads.getThreadsNewCount()));", "originalCommit": "f8f0f66aa246d26b1094294f4b8c6bbbc11d7d3c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM2MTU2Ng==", "url": "https://github.com/apache/incubator-doris/pull/5112#discussion_r548361566", "bodyText": "Jvm Thread State is an enum type. A thread can be in one of the following states: NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING, TERMINATED.\nA fe thread can be in only one state at a given point in time. The new metrics mean how many fe threads in a specific state now. I think this will be useful when we want to analysis fe whole running status.", "author": "Dam1029", "createdAt": "2020-12-24T03:05:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzk0MDg2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM2MzU3Ng==", "url": "https://github.com/apache/incubator-doris/pull/5112#discussion_r548363576", "bodyText": "FE\u76d1\u63a7\u9879: http://doris.apache.org/master/zh-CN/administrator-guide/operation/monitor-metrics/fe-metrics.html#%E6%9F%A5%E7%9C%8B%E7%9B%91%E6%8E%A7%E9%A1%B9\nCurrently, the docs about metrics contains PrometheusMetrics and SystemMetrics.  The doris_fe_snmp belong to SystemMetrics, and the new metrics I added belong to PrometheusMetrics. I want to confirm did I need to add new metrics in this page?", "author": "Dam1029", "createdAt": "2020-12-24T03:16:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzk0MDg2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk3MTc2OQ==", "url": "https://github.com/apache/incubator-doris/pull/5112#discussion_r550971769", "bodyText": "It is ok to add them in this doc.\nwe will reorganized this doc later.", "author": "morningman", "createdAt": "2021-01-03T08:05:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzk0MDg2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjQzNjYxNA==", "url": "https://github.com/apache/incubator-doris/pull/5112#discussion_r552436614", "bodyText": "Thank you for your reply. I have update the docs of fe metrics.", "author": "Dam1029", "createdAt": "2021-01-06T08:36:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzk0MDg2OQ=="}], "type": "inlineReview"}, {"oid": "a8f16552d32f11c931b89f38f087a2fe925aa952", "url": "https://github.com/apache/incubator-doris/commit/a8f16552d32f11c931b89f38f087a2fe925aa952", "message": "Merge branch 'master' of github.com:apache/incubator-doris into add_fe_thread_metrics", "committedDate": "2021-01-06T03:26:42Z", "type": "commit"}, {"oid": "07cb9dd1f9b82471fe79807e47c6a3418fc0fdad", "url": "https://github.com/apache/incubator-doris/commit/07cb9dd1f9b82471fe79807e47c6a3418fc0fdad", "message": "update docs of fe metrics", "committedDate": "2021-01-06T04:32:53Z", "type": "commit"}]}