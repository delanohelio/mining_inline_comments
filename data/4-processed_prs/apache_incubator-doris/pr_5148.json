{"pr_number": 5148, "pr_title": "[Feature] Implementation of histogram metric", "pr_createdAt": "2020-12-25T03:46:15Z", "pr_url": "https://github.com/apache/incubator-doris/pull/5148", "timeline": [{"oid": "f76ee2b59e949d88fcb3b50c0093d183900f9ab0", "url": "https://github.com/apache/incubator-doris/commit/f76ee2b59e949d88fcb3b50c0093d183900f9ab0", "message": "Implementation of histogram metric", "committedDate": "2020-12-25T03:44:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODgyMTk3NA==", "url": "https://github.com/apache/incubator-doris/pull/5148#discussion_r548821974", "bodyText": "No need to clear() in constructor?", "author": "acelyc111", "createdAt": "2020-12-25T07:22:45Z", "path": "be/src/util/metrics.h", "diffHunk": "@@ -159,6 +160,35 @@ class CoreLocalCounter : public Metric {\n     CoreLocalValue<T> _value;\n };\n \n+class HistogramMetric : public Metric {\n+public:\n+    HistogramMetric() { clear(); }", "originalCommit": "f76ee2b59e949d88fcb3b50c0093d183900f9ab0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODgyODgwNg==", "url": "https://github.com/apache/incubator-doris/pull/5148#discussion_r548828806", "bodyText": "Yes, the _stat.clear() will be called in HistogramStat 's constructor. I will remove it.", "author": "Skysheepwang", "createdAt": "2020-12-25T08:05:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODgyMTk3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODgyMzAxOQ==", "url": "https://github.com/apache/incubator-doris/pull/5148#discussion_r548823019", "bodyText": "These code are almost copied from rocksdb, we have to update LICENSE.txt", "author": "acelyc111", "createdAt": "2020-12-25T07:28:41Z", "path": "be/src/util/histogram.h", "diffHunk": "@@ -0,0 +1,113 @@\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#pragma once\n+\n+#include <string>\n+#include <vector>\n+#include <map>\n+#include <atomic>\n+\n+#include \"common/logging.h\"\n+\n+namespace doris {\n+\n+// Histogram data structure implementation:", "originalCommit": "f76ee2b59e949d88fcb3b50c0093d183900f9ab0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ea9222b11380e282a767a81b3d145554cff08e15", "url": "https://github.com/apache/incubator-doris/commit/ea9222b11380e282a767a81b3d145554cff08e15", "message": "update LICENSE", "committedDate": "2020-12-25T07:46:08Z", "type": "commit"}, {"oid": "fefe09bf2ef10c384e95f899cb53825bff271adc", "url": "https://github.com/apache/incubator-doris/commit/fefe09bf2ef10c384e95f899cb53825bff271adc", "message": "remove clear() in constructor", "committedDate": "2020-12-25T08:04:03Z", "type": "commit"}]}