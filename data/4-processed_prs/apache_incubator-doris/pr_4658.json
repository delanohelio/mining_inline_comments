{"pr_number": 4658, "pr_title": "[Bug] Fix that the partitions of a dynamic-partitioned table has not been created at the time of load or insert", "pr_createdAt": "2020-09-23T08:12:51Z", "pr_url": "https://github.com/apache/incubator-doris/pull/4658", "timeline": [{"oid": "08cd71bb5a356c83dbf55beacd043df97e696dca", "url": "https://github.com/apache/incubator-doris/commit/08cd71bb5a356c83dbf55beacd043df97e696dca", "message": "save code", "committedDate": "2020-09-23T07:15:22Z", "type": "commit"}, {"oid": "2f9f97c2cd7256a910d76eca1cc444ce605d85a6", "url": "https://github.com/apache/incubator-doris/commit/2f9f97c2cd7256a910d76eca1cc444ce605d85a6", "message": "add ut", "committedDate": "2020-09-23T08:10:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzMzOTQ1OA==", "url": "https://github.com/apache/incubator-doris/pull/4658#discussion_r493339458", "bodyText": "It is best to guide users in the prompt to wait for a while because of dynamic partitioning", "author": "EmmyMiao87", "createdAt": "2020-09-23T09:00:50Z", "path": "fe/fe-core/src/main/java/org/apache/doris/load/loadv2/LoadingTaskPlanner.java", "diffHunk": "@@ -182,6 +182,13 @@ public String getTimezone() {\n             }\n         }\n \n+        // If this is a dynamic partitioned table, it will take some time to create the partition after the\n+        // table is created, a exception needs to be thrown here\n+        if (partitionIds.isEmpty()) {\n+            throw new LoadException(\"data cannot be inserted into table with emtpy partition. \" +", "originalCommit": "2f9f97c2cd7256a910d76eca1cc444ce605d85a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ2NDU1Mw==", "url": "https://github.com/apache/incubator-doris/pull/4658#discussion_r495464553", "bodyText": "I agree. I think we can change the error msg like:\ndata cannot be inserted into table with emtpy partition... Use `SHOW PARTITIONS FROM tbl` to see the currenty partitions of this table. \n\nAnd also change the msg in error code ERR_EMPTY_PARTITION_IN_TABLE", "author": "morningman", "createdAt": "2020-09-26T14:57:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzMzOTQ1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ2OTM1MA==", "url": "https://github.com/apache/incubator-doris/pull/4658#discussion_r495469350", "bodyText": "ok. I will change the error msg.", "author": "xy720", "createdAt": "2020-09-26T15:51:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzMzOTQ1OA=="}], "type": "inlineReview"}, {"oid": "5ec937c1dfa15c4c2fcd4de845248ad1d4c90182", "url": "https://github.com/apache/incubator-doris/commit/5ec937c1dfa15c4c2fcd4de845248ad1d4c90182", "message": "change error msg", "committedDate": "2020-09-26T15:39:40Z", "type": "commit"}, {"oid": "1a2e223f90841c593a092394070347e5935c5ce4", "url": "https://github.com/apache/incubator-doris/commit/1a2e223f90841c593a092394070347e5935c5ce4", "message": "ut", "committedDate": "2020-09-26T15:47:02Z", "type": "commit"}]}