{"pr_number": 4751, "pr_title": "[Refactor] Remove objects which are only used for unit test", "pr_createdAt": "2020-10-15T14:58:04Z", "pr_url": "https://github.com/apache/incubator-doris/pull/4751", "timeline": [{"oid": "db61d3ef7a6a438e2d6b708633c5c6373f6905ae", "url": "https://github.com/apache/incubator-doris/commit/db61d3ef7a6a438e2d6b708633c5c6373f6905ae", "message": "[Refactor] Remove objects which are only used for unit test", "committedDate": "2020-10-15T11:40:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTk3OTM2OQ==", "url": "https://github.com/apache/incubator-doris/pull/4751#discussion_r505979369", "bodyText": "This will lead memory leak in unit test", "author": "imay", "createdAt": "2020-10-16T01:58:01Z", "path": "be/src/olap/page_cache.cpp", "diffHunk": "@@ -19,15 +19,10 @@\n \n namespace doris {\n \n-// This should only be used in unit test. 1GB\n-static StoragePageCache s_ut_cache(1073741824);\n-\n-StoragePageCache* StoragePageCache::_s_instance = &s_ut_cache;\n+StoragePageCache* StoragePageCache::_s_instance = nullptr;\n \n void StoragePageCache::create_global_cache(size_t capacity) {\n-    if (_s_instance == &s_ut_cache) {\n-        _s_instance = new StoragePageCache(capacity);\n-    }\n+    _s_instance = new StoragePageCache(capacity);", "originalCommit": "6e59983189d7783725c525aa27d903b7be0f405f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "82e7a25de5ad95c1296ebcd328473e35ba92eeef", "url": "https://github.com/apache/incubator-doris/commit/82e7a25de5ad95c1296ebcd328473e35ba92eeef", "message": "fix memory leak suspect", "committedDate": "2020-10-16T02:56:04Z", "type": "commit"}, {"oid": "82e7a25de5ad95c1296ebcd328473e35ba92eeef", "url": "https://github.com/apache/incubator-doris/commit/82e7a25de5ad95c1296ebcd328473e35ba92eeef", "message": "fix memory leak suspect", "committedDate": "2020-10-16T02:56:04Z", "type": "forcePushed"}]}