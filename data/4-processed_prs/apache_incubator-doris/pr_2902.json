{"pr_number": 2902, "pr_title": "bitmap_union_count support window function", "pr_createdAt": "2020-02-14T06:26:51Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2902", "timeline": [{"oid": "cddb26c4576b9d40545a7566dd4002997153071c", "url": "https://github.com/apache/incubator-doris/commit/cddb26c4576b9d40545a7566dd4002997153071c", "message": "bitmap_union_count support window function", "committedDate": "2020-02-15T09:58:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMzEwNQ==", "url": "https://github.com/apache/incubator-doris/pull/2902#discussion_r379903105", "bodyText": "How about bitmap_get_cardinality ?", "author": "morningman", "createdAt": "2020-02-16T13:24:48Z", "path": "be/src/exprs/bitmap_function.h", "diffHunk": "@@ -46,6 +46,9 @@ class BitmapFunctions {\n     // the input src's ptr need to point a BitmapValue, this function will release the\n     // BitmapValue memory\n     static BigIntVal bitmap_finalize(FunctionContext* ctx, const StringVal& src);\n+    // Get the bitmap cardinality, the difference from bitmap_finalize method is\n+    // bitmap_get_value method doesn't free memory\n+    static BigIntVal bitmap_get_value(FunctionContext* ctx, const StringVal& src);", "originalCommit": "cddb26c4576b9d40545a7566dd4002997153071c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk3OTgzMg==", "url": "https://github.com/apache/incubator-doris/pull/2902#discussion_r379979832", "bodyText": "If fact, bitmap_finalize and bitmap_get_value both compute bitmap cardinality, like hll_finalize and hll_get_value.  Use get_value as function name, because I want the fucntion name keep consistent with _get_value_fn in BE AggFnEvaluator and getValueFnSymbol in FE AggregateFunction.\nI will update the comment to emphasize this point.", "author": "kangkaisen", "createdAt": "2020-02-17T04:18:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMzEwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIzMTY2NA==", "url": "https://github.com/apache/incubator-doris/pull/2902#discussion_r380231664", "bodyText": "OK", "author": "morningman", "createdAt": "2020-02-17T15:03:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkwMzEwNQ=="}], "type": "inlineReview"}, {"oid": "f04808a6019bfe13015115647079c0696a6aea1c", "url": "https://github.com/apache/incubator-doris/commit/f04808a6019bfe13015115647079c0696a6aea1c", "message": "bitmap_union_count support window function", "committedDate": "2020-02-18T02:51:33Z", "type": "forcePushed"}, {"oid": "6a0ea09584ac5c82d49c7be25c4139c55712c7fb", "url": "https://github.com/apache/incubator-doris/commit/6a0ea09584ac5c82d49c7be25c4139c55712c7fb", "message": "bitmap_union_count support window function", "committedDate": "2020-02-19T06:25:44Z", "type": "commit"}, {"oid": "6a0ea09584ac5c82d49c7be25c4139c55712c7fb", "url": "https://github.com/apache/incubator-doris/commit/6a0ea09584ac5c82d49c7be25c4139c55712c7fb", "message": "bitmap_union_count support window function", "committedDate": "2020-02-19T06:25:44Z", "type": "forcePushed"}]}