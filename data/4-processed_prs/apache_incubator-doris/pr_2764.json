{"pr_number": 2764, "pr_title": "[Doc] Add en doc for dynamic partition feature", "pr_createdAt": "2020-01-14T13:31:23Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2764", "timeline": [{"oid": "bec4ddfec5de5b542b0a6ca192ea09716969584f", "url": "https://github.com/apache/incubator-doris/commit/bec4ddfec5de5b542b0a6ca192ea09716969584f", "message": "add dynamic partition en doc", "committedDate": "2020-01-14T13:30:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQwNzY5Mg==", "url": "https://github.com/apache/incubator-doris/pull/2764#discussion_r366407692", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In some scenarios, the user will create partitions for the table according to the day and perform routine tasks regularly every day.In this case, the user needs to manually manage the partition, otherwise the data import may fail because the partition is forgot to create, which brings additional maintenance costs to the user.\n          \n          \n            \n            In some scenarios, the user will create partitions for the table according to the day and perform routine tasks regularly every day. In this case, the user needs to manually manage the partition, otherwise the data import may fail because the partition is forgot to create, which brings additional maintenance costs to the user.", "author": "morningman", "createdAt": "2020-01-14T15:35:14Z", "path": "docs/documentation/en/administrator-guide/dynamic-partition_EN.md", "diffHunk": "@@ -0,0 +1,182 @@\n+<!-- \n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# Dynamic Partition\n+\n+Dynamic partition is a new feature introduced in Doris verion 0.12. It's designed to manage partition's Time-to-Life (TTL), reducing the burden on users.\n+\n+The original design, implementation and effect can be referred to [ISSUE 2262](https://github.com/apache/incubator-doris/issues/2262)\u3002\n+\n+Currently, the function of adding partitions dynamically is implemented, and the next version will support removing partitions dynamically.\n+\n+## Noun Interpretation\n+\n+* FE: Frontend, the front-end node of Doris. Responsible for metadata management and request access.\n+* BE: Backend, Doris's back-end node. Responsible for query execution and data storage.\n+\n+## Principle\n+\n+In some scenarios, the user will create partitions for the table according to the day and perform routine tasks regularly every day.In this case, the user needs to manually manage the partition, otherwise the data import may fail because the partition is forgot to create, which brings additional maintenance costs to the user.", "originalCommit": "bec4ddfec5de5b542b0a6ca192ea09716969584f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQwODE1OA==", "url": "https://github.com/apache/incubator-doris/pull/2764#discussion_r366408158", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The design of implementation is that FE will starts a background thread that determines whether or not to start the thread and the scheduling frequency of the thread based on the parameters' dynamic_partition_enable 'and' dynamic_partition_check_interval_seconds' in fe.conf.\n          \n          \n            \n            The design of implementation is that FE will starts a background thread that determines whether or not to start the thread and the scheduling frequency of the thread based on the parameters `dynamic_partition_enable` and `dynamic_partition_check_interval_seconds` in `fe.conf`.", "author": "morningman", "createdAt": "2020-01-14T15:35:59Z", "path": "docs/documentation/en/administrator-guide/dynamic-partition_EN.md", "diffHunk": "@@ -0,0 +1,182 @@\n+<!-- \n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# Dynamic Partition\n+\n+Dynamic partition is a new feature introduced in Doris verion 0.12. It's designed to manage partition's Time-to-Life (TTL), reducing the burden on users.\n+\n+The original design, implementation and effect can be referred to [ISSUE 2262](https://github.com/apache/incubator-doris/issues/2262)\u3002\n+\n+Currently, the function of adding partitions dynamically is implemented, and the next version will support removing partitions dynamically.\n+\n+## Noun Interpretation\n+\n+* FE: Frontend, the front-end node of Doris. Responsible for metadata management and request access.\n+* BE: Backend, Doris's back-end node. Responsible for query execution and data storage.\n+\n+## Principle\n+\n+In some scenarios, the user will create partitions for the table according to the day and perform routine tasks regularly every day.In this case, the user needs to manually manage the partition, otherwise the data import may fail because the partition is forgot to create, which brings additional maintenance costs to the user.\n+\n+The design of implementation is that FE will starts a background thread that determines whether or not to start the thread and the scheduling frequency of the thread based on the parameters' dynamic_partition_enable 'and' dynamic_partition_check_interval_seconds' in fe.conf.", "originalCommit": "bec4ddfec5de5b542b0a6ca192ea09716969584f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQwOTA2OA==", "url": "https://github.com/apache/incubator-doris/pull/2764#discussion_r366409068", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When create a olap table, the dynamic_partition properties will be assigned, FE will parse dynamic_partition properties and check the legitimacy of the input parameters firstly, and then persist the properties to FE metadata, register the table to the list of dynamic partition at the same time. Daemon thread will scan the dynamic partition list periodically according to the configuration parameters, \n          \n          \n            \n            When create a olap table, the `dynamic_partition` properties will be assigned. FE will parse `dynamic_partition` properties and check the legitimacy of the input parameters firstly, and then persist the properties to FE metadata, register the table to the list of dynamic partition at the same time. Daemon thread will scan the dynamic partition list periodically according to the configuration parameters,", "author": "morningman", "createdAt": "2020-01-14T15:37:35Z", "path": "docs/documentation/en/administrator-guide/dynamic-partition_EN.md", "diffHunk": "@@ -0,0 +1,182 @@\n+<!-- \n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# Dynamic Partition\n+\n+Dynamic partition is a new feature introduced in Doris verion 0.12. It's designed to manage partition's Time-to-Life (TTL), reducing the burden on users.\n+\n+The original design, implementation and effect can be referred to [ISSUE 2262](https://github.com/apache/incubator-doris/issues/2262)\u3002\n+\n+Currently, the function of adding partitions dynamically is implemented, and the next version will support removing partitions dynamically.\n+\n+## Noun Interpretation\n+\n+* FE: Frontend, the front-end node of Doris. Responsible for metadata management and request access.\n+* BE: Backend, Doris's back-end node. Responsible for query execution and data storage.\n+\n+## Principle\n+\n+In some scenarios, the user will create partitions for the table according to the day and perform routine tasks regularly every day.In this case, the user needs to manually manage the partition, otherwise the data import may fail because the partition is forgot to create, which brings additional maintenance costs to the user.\n+\n+The design of implementation is that FE will starts a background thread that determines whether or not to start the thread and the scheduling frequency of the thread based on the parameters' dynamic_partition_enable 'and' dynamic_partition_check_interval_seconds' in fe.conf.\n+\n+When create a olap table, the dynamic_partition properties will be assigned, FE will parse dynamic_partition properties and check the legitimacy of the input parameters firstly, and then persist the properties to FE metadata, register the table to the list of dynamic partition at the same time. Daemon thread will scan the dynamic partition list periodically according to the configuration parameters, ", "originalCommit": "bec4ddfec5de5b542b0a6ca192ea09716969584f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQxMDM0Mg==", "url": "https://github.com/apache/incubator-doris/pull/2764#discussion_r366410342", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            (if the partition is existed, the task will be ignored), partition name respectively according to the specified prefix ` p20200108 ` ` p20200109 ` ` p20200110 ` ` p20200111 `, each partition to 32 the number of points barrels, each partition scope is as follows:\n          \n          \n            \n            (if the partition is existed, the task will be ignored), partition name respectively according to the specified prefix `p20200108` `p20200109` `p20200110` `p20200111`, each partition to 32 the number of points barrels, each partition scope is as follows:", "author": "morningman", "createdAt": "2020-01-14T15:39:35Z", "path": "docs/documentation/en/administrator-guide/dynamic-partition_EN.md", "diffHunk": "@@ -0,0 +1,182 @@\n+<!-- \n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# Dynamic Partition\n+\n+Dynamic partition is a new feature introduced in Doris verion 0.12. It's designed to manage partition's Time-to-Life (TTL), reducing the burden on users.\n+\n+The original design, implementation and effect can be referred to [ISSUE 2262](https://github.com/apache/incubator-doris/issues/2262)\u3002\n+\n+Currently, the function of adding partitions dynamically is implemented, and the next version will support removing partitions dynamically.\n+\n+## Noun Interpretation\n+\n+* FE: Frontend, the front-end node of Doris. Responsible for metadata management and request access.\n+* BE: Backend, Doris's back-end node. Responsible for query execution and data storage.\n+\n+## Principle\n+\n+In some scenarios, the user will create partitions for the table according to the day and perform routine tasks regularly every day.In this case, the user needs to manually manage the partition, otherwise the data import may fail because the partition is forgot to create, which brings additional maintenance costs to the user.\n+\n+The design of implementation is that FE will starts a background thread that determines whether or not to start the thread and the scheduling frequency of the thread based on the parameters' dynamic_partition_enable 'and' dynamic_partition_check_interval_seconds' in fe.conf.\n+\n+When create a olap table, the dynamic_partition properties will be assigned, FE will parse dynamic_partition properties and check the legitimacy of the input parameters firstly, and then persist the properties to FE metadata, register the table to the list of dynamic partition at the same time. Daemon thread will scan the dynamic partition list periodically according to the configuration parameters, \n+read dynamic partition properties of the table, and doing the task of adding partitions. The scheduling information of each time will be kept in the memory of FE. You can check whether the scheduling task is successful through `SHOW DYNAMIC PARTITION TABLES`.\n+\n+## Usage\n+\n+### Establishment of tables\n+\n+When creating a table, you can specify the attribute `dynamic_partition` in `PROPERTIES`, which means that the table is a dynamic partition table.\n+    \n+Examples:\n+\n+```\n+CREATE TABLE example_db.dynamic_partition\n+(\n+k1 DATE,\n+k2 INT,\n+k3 SMALLINT,\n+v1 VARCHAR(2048),\n+v2 DATETIME DEFAULT \"2014-02-04 15:36:00\"\n+)\n+ENGINE=olap\n+DUPLICATE KEY(k1, k2, k3)\n+PARTITION BY RANGE (k1)\n+(\n+PARTITION p1 VALUES LESS THAN (\"2014-01-01\"),\n+PARTITION p2 VALUES LESS THAN (\"2014-06-01\"),\n+PARTITION p3 VALUES LESS THAN (\"2014-12-01\")\n+)\n+DISTRIBUTED BY HASH(k2) BUCKETS 32\n+PROPERTIES(\n+\"storage_medium\" = \"SSD\",\n+\"dynamic_partition.enable\" = \"true\"\n+\"dynamic_partition.time_unit\" = \"DAY\",\n+\"dynamic_partition.end\" = \"3\",\n+\"dynamic_partition.prefix\" = \"p\",\n+\"dynamic_partition.buckets\" = \"32\"\n+ );\n+```\n+Create a dynamic partition table, specify enable dynamic partition features, take today is 2020-01-08 for example, at every time of scheduling, will create today and after 3 days in advance of four partitions \n+(if the partition is existed, the task will be ignored), partition name respectively according to the specified prefix ` p20200108 ` ` p20200109 ` ` p20200110 ` ` p20200111 `, each partition to 32 the number of points barrels, each partition scope is as follows:", "originalCommit": "bec4ddfec5de5b542b0a6ca192ea09716969584f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQxODgwNg==", "url": "https://github.com/apache/incubator-doris/pull/2764#discussion_r366418806", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            2. If you need to add dynamic partitioning properties to a table prior to version 0.12, you need to modify the properties of the table with the following command\n          \n          \n            \n            2. If you need to add dynamic partitioning properties to a table prior to version 0.12, you need to modify the properties of the table with the following command", "author": "morningman", "createdAt": "2020-01-14T15:53:16Z", "path": "docs/documentation/en/administrator-guide/dynamic-partition_EN.md", "diffHunk": "@@ -0,0 +1,182 @@\n+<!-- \n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# Dynamic Partition\n+\n+Dynamic partition is a new feature introduced in Doris verion 0.12. It's designed to manage partition's Time-to-Life (TTL), reducing the burden on users.\n+\n+The original design, implementation and effect can be referred to [ISSUE 2262](https://github.com/apache/incubator-doris/issues/2262)\u3002\n+\n+Currently, the function of adding partitions dynamically is implemented, and the next version will support removing partitions dynamically.\n+\n+## Noun Interpretation\n+\n+* FE: Frontend, the front-end node of Doris. Responsible for metadata management and request access.\n+* BE: Backend, Doris's back-end node. Responsible for query execution and data storage.\n+\n+## Principle\n+\n+In some scenarios, the user will create partitions for the table according to the day and perform routine tasks regularly every day.In this case, the user needs to manually manage the partition, otherwise the data import may fail because the partition is forgot to create, which brings additional maintenance costs to the user.\n+\n+The design of implementation is that FE will starts a background thread that determines whether or not to start the thread and the scheduling frequency of the thread based on the parameters' dynamic_partition_enable 'and' dynamic_partition_check_interval_seconds' in fe.conf.\n+\n+When create a olap table, the dynamic_partition properties will be assigned, FE will parse dynamic_partition properties and check the legitimacy of the input parameters firstly, and then persist the properties to FE metadata, register the table to the list of dynamic partition at the same time. Daemon thread will scan the dynamic partition list periodically according to the configuration parameters, \n+read dynamic partition properties of the table, and doing the task of adding partitions. The scheduling information of each time will be kept in the memory of FE. You can check whether the scheduling task is successful through `SHOW DYNAMIC PARTITION TABLES`.\n+\n+## Usage\n+\n+### Establishment of tables\n+\n+When creating a table, you can specify the attribute `dynamic_partition` in `PROPERTIES`, which means that the table is a dynamic partition table.\n+    \n+Examples:\n+\n+```\n+CREATE TABLE example_db.dynamic_partition\n+(\n+k1 DATE,\n+k2 INT,\n+k3 SMALLINT,\n+v1 VARCHAR(2048),\n+v2 DATETIME DEFAULT \"2014-02-04 15:36:00\"\n+)\n+ENGINE=olap\n+DUPLICATE KEY(k1, k2, k3)\n+PARTITION BY RANGE (k1)\n+(\n+PARTITION p1 VALUES LESS THAN (\"2014-01-01\"),\n+PARTITION p2 VALUES LESS THAN (\"2014-06-01\"),\n+PARTITION p3 VALUES LESS THAN (\"2014-12-01\")\n+)\n+DISTRIBUTED BY HASH(k2) BUCKETS 32\n+PROPERTIES(\n+\"storage_medium\" = \"SSD\",\n+\"dynamic_partition.enable\" = \"true\"\n+\"dynamic_partition.time_unit\" = \"DAY\",\n+\"dynamic_partition.end\" = \"3\",\n+\"dynamic_partition.prefix\" = \"p\",\n+\"dynamic_partition.buckets\" = \"32\"\n+ );\n+```\n+Create a dynamic partition table, specify enable dynamic partition features, take today is 2020-01-08 for example, at every time of scheduling, will create today and after 3 days in advance of four partitions \n+(if the partition is existed, the task will be ignored), partition name respectively according to the specified prefix ` p20200108 ` ` p20200109 ` ` p20200110 ` ` p20200111 `, each partition to 32 the number of points barrels, each partition scope is as follows:\n+```\n+[types: [DATE]; keys: [2020-01-08]; \u2025types: [DATE]; keys: [2020-01-09]; )\n+[types: [DATE]; keys: [2020-01-09]; \u2025types: [DATE]; keys: [2020-01-10]; )\n+[types: [DATE]; keys: [2020-01-10]; \u2025types: [DATE]; keys: [2020-01-11]; )\n+[types: [DATE]; keys: [2020-01-11]; \u2025types: [DATE]; keys: [2020-01-12]; )\n+```\n+    \n+### Enable Dynamic Partition Feature\n+\n+1. First of all, `dynamic_partition_enable=true` needs to be set in fe.conf, which can be specified by modifying the configuration file when the cluster starts up, or dynamically modified by HTTP interface at run time\n+\n+2. If you need to add dynamic partitioning properties to a table prior to version 0.12, you need to modify the properties of the table with the following command", "originalCommit": "bec4ddfec5de5b542b0a6ca192ea09716969584f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "919493ed73a71aebc72008d6adb689732d71f38b", "url": "https://github.com/apache/incubator-doris/commit/919493ed73a71aebc72008d6adb689732d71f38b", "message": "fix last review", "committedDate": "2020-01-15T01:40:54Z", "type": "commit"}]}