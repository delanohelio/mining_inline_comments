{"pr_number": 5022, "pr_title": "Push down predicate on value column of unique table  to base rowset", "pr_createdAt": "2020-12-04T07:21:25Z", "pr_url": "https://github.com/apache/incubator-doris/pull/5022", "timeline": [{"oid": "741c27ba9500514a70a9187c58bda724ee2a79a7", "url": "https://github.com/apache/incubator-doris/commit/741c27ba9500514a70a9187c58bda724ee2a79a7", "message": "push down predicte on unique", "committedDate": "2020-12-04T02:00:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkwMTU1NQ==", "url": "https://github.com/apache/incubator-doris/pull/5022#discussion_r535901555", "bodyText": "Better add comment to explain the logic here.\nThe fact that \"version[0-1] has no data\" is a very tricky and important reason, should let other code reviewers know.", "author": "morningman", "createdAt": "2020-12-04T07:53:37Z", "path": "be/src/exec/olap_scanner.cpp", "diffHunk": "@@ -164,8 +164,14 @@ Status OlapScanner::_init_params(const std::vector<OlapScanRange*>& key_ranges,\n     // TODO(zc)\n     _params.profile = _profile;\n     _params.runtime_state = _runtime_state;\n-\n-    if (_aggregation) {\n+    bool single_version =", "originalCommit": "741c27ba9500514a70a9187c58bda724ee2a79a7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkwNTQyOQ==", "url": "https://github.com/apache/incubator-doris/pull/5022#discussion_r535905429", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // value column predicate in AGG/UNIQUE table\n          \n          \n            \n                // value column predicate in UNIQUE table", "author": "morningman", "createdAt": "2020-12-04T08:01:01Z", "path": "be/src/olap/rowset/rowset_reader_context.h", "diffHunk": "@@ -47,6 +47,8 @@ struct RowsetReaderContext {\n     // column name -> column predicate\n     // adding column_name for predicate to make use of column selectivity\n     const std::vector<ColumnPredicate*>* predicates = nullptr;\n+    // value column predicate in AGG/UNIQUE table", "originalCommit": "741c27ba9500514a70a9187c58bda724ee2a79a7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "35282311c083880cdc5c7e4ce8d206331b1949a2", "url": "https://github.com/apache/incubator-doris/commit/35282311c083880cdc5c7e4ce8d206331b1949a2", "message": "fix unittest", "committedDate": "2020-12-04T10:12:06Z", "type": "commit"}]}