{"pr_number": 5130, "pr_title": "Update outfile(en) to support cos.md", "pr_createdAt": "2020-12-23T06:40:18Z", "pr_url": "https://github.com/apache/incubator-doris/pull/5130", "timeline": [{"oid": "fbcb5de94ad8e258806d65818bc56a11da439086", "url": "https://github.com/apache/incubator-doris/commit/fbcb5de94ad8e258806d65818bc56a11da439086", "message": "Update outfile(en) to support cos.md\n\nupdate doc to add how to export query result on cos", "committedDate": "2020-12-23T06:39:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc1MDczMg==", "url": "https://github.com/apache/incubator-doris/pull/5130#discussion_r547750732", "bodyText": "Notes\u5c31\u884c\u4e86 \u522b\u8fd9\u4e48\u786c", "author": "wuyunfeng", "createdAt": "2020-12-23T07:27:17Z", "path": "docs/en/administrator-guide/outfile.md", "diffHunk": "@@ -156,7 +156,35 @@ WITH BROKER `broker_name`\n     If the result is less than 1GB, file will be: `result_0.parquet`.\n     \n     If larger than 1GB, may be: `result_0.parquet, result_1.parquet, ...`.\n+\n+4. Example 4\n+\n+    Export simple query results to the file `cos://${bucket_name}/path/result.txt`. Specify the export format as CSV.\n+    \n+    ```\n+   select k1,k2,v1 from tbl1 limit 100000\n+   into outfile \"s3a://my_bucket/export/my_file_\"\n+   FORMAT AS CSV\n+   PROPERTIES\n+   (\n+       \"broker.name\" = \"hdfs_broker\",\n+       \"broker.fs.s3a.access.key\" = \"xxx\",\n+       \"broker.fs.s3a.secret.key\" = \"xxxx\",\n+       \"broker.fs.s3a.endpoint\" = \"https://cos.xxxxxx.myqcloud.com/\",\n+       \"column_separator\" = \",\",\n+       \"line_delimiter\" = \"\\n\",\n+       \"max_file_size\" = \"1024MB\"\n+    )\n+    ```\n+    \n+    If the result is less than 1GB, file will be: `my_file_0.csv`.\n     \n+    If larger than 1GB, may be: `my_file_0.csv, result_1.csv, ...`.\n+    \n+    Some notes: ", "originalCommit": "fbcb5de94ad8e258806d65818bc56a11da439086", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc1OTEwOQ==", "url": "https://github.com/apache/incubator-doris/pull/5130#discussion_r547759109", "bodyText": "\u5e2e\u6211\u76f4\u63a5comments\u5373\u53ef\u3002\u6211\u8fd9\u8fb9\u53ef\u4ee5\u76f4\u63a5commit", "author": "blackfox1983", "createdAt": "2020-12-23T07:38:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc1MDczMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc1MTI2Nw==", "url": "https://github.com/apache/incubator-doris/pull/5130#discussion_r547751267", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                2. These parameters(access.key/secret.key/endpointneed) need to be confirmed with cos. In particular, the value of endpoint does not need to be filled in bucket_name\u3002\n          \n          \n            \n                2. These parameters(access.key/secret.key/endpointneed) need to be confirmed with `Tecent Cloud COS`. In particular, the value of endpoint does not need to be filled in bucket_name\u3002", "author": "wuyunfeng", "createdAt": "2020-12-23T07:27:57Z", "path": "docs/en/administrator-guide/outfile.md", "diffHunk": "@@ -156,7 +156,35 @@ WITH BROKER `broker_name`\n     If the result is less than 1GB, file will be: `result_0.parquet`.\n     \n     If larger than 1GB, may be: `result_0.parquet, result_1.parquet, ...`.\n+\n+4. Example 4\n+\n+    Export simple query results to the file `cos://${bucket_name}/path/result.txt`. Specify the export format as CSV.\n+    \n+    ```\n+   select k1,k2,v1 from tbl1 limit 100000\n+   into outfile \"s3a://my_bucket/export/my_file_\"\n+   FORMAT AS CSV\n+   PROPERTIES\n+   (\n+       \"broker.name\" = \"hdfs_broker\",\n+       \"broker.fs.s3a.access.key\" = \"xxx\",\n+       \"broker.fs.s3a.secret.key\" = \"xxxx\",\n+       \"broker.fs.s3a.endpoint\" = \"https://cos.xxxxxx.myqcloud.com/\",\n+       \"column_separator\" = \",\",\n+       \"line_delimiter\" = \"\\n\",\n+       \"max_file_size\" = \"1024MB\"\n+    )\n+    ```\n+    \n+    If the result is less than 1GB, file will be: `my_file_0.csv`.\n     \n+    If larger than 1GB, may be: `my_file_0.csv, result_1.csv, ...`.\n+    \n+    Some notes: \n+    1. Paths that do not exist are automatically created.\n+    2. These parameters(access.key/secret.key/endpointneed) need to be confirmed with cos. In particular, the value of endpoint does not need to be filled in bucket_name\u3002", "originalCommit": "fbcb5de94ad8e258806d65818bc56a11da439086", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fbb48e300d4af6335ebcd74d4ef080f7c6b7dcda", "url": "https://github.com/apache/incubator-doris/commit/fbb48e300d4af6335ebcd74d4ef080f7c6b7dcda", "message": "Update docs/en/administrator-guide/outfile.md\n\nCo-authored-by: Yunfeng,Wu <wyfsky888@126.com>", "committedDate": "2020-12-23T07:35:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc1ODU4OQ==", "url": "https://github.com/apache/incubator-doris/pull/5130#discussion_r547758589", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Some notes: \n          \n          \n            \n                Please Note:", "author": "wuyunfeng", "createdAt": "2020-12-23T07:37:44Z", "path": "docs/en/administrator-guide/outfile.md", "diffHunk": "@@ -156,7 +156,35 @@ WITH BROKER `broker_name`\n     If the result is less than 1GB, file will be: `result_0.parquet`.\n     \n     If larger than 1GB, may be: `result_0.parquet, result_1.parquet, ...`.\n+\n+4. Example 4\n+\n+    Export simple query results to the file `cos://${bucket_name}/path/result.txt`. Specify the export format as CSV.\n+    \n+    ```\n+   select k1,k2,v1 from tbl1 limit 100000\n+   into outfile \"s3a://my_bucket/export/my_file_\"\n+   FORMAT AS CSV\n+   PROPERTIES\n+   (\n+       \"broker.name\" = \"hdfs_broker\",\n+       \"broker.fs.s3a.access.key\" = \"xxx\",\n+       \"broker.fs.s3a.secret.key\" = \"xxxx\",\n+       \"broker.fs.s3a.endpoint\" = \"https://cos.xxxxxx.myqcloud.com/\",\n+       \"column_separator\" = \",\",\n+       \"line_delimiter\" = \"\\n\",\n+       \"max_file_size\" = \"1024MB\"\n+    )\n+    ```\n+    \n+    If the result is less than 1GB, file will be: `my_file_0.csv`.\n     \n+    If larger than 1GB, may be: `my_file_0.csv, result_1.csv, ...`.\n+    \n+    Some notes: ", "originalCommit": "fbb48e300d4af6335ebcd74d4ef080f7c6b7dcda", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2a6253785cc80affcbfc8701521f43f36696880e", "url": "https://github.com/apache/incubator-doris/commit/2a6253785cc80affcbfc8701521f43f36696880e", "message": "Update docs/en/administrator-guide/outfile.md", "committedDate": "2020-12-23T07:38:02Z", "type": "commit"}]}