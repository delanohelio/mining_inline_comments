{"pr_number": 2944, "pr_title": "create pprof_profile_dir before heap profiling", "pr_createdAt": "2020-02-19T05:38:07Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2944", "timeline": [{"oid": "18ee0eb0867d3a7540d3538daa1b184dd64c5369", "url": "https://github.com/apache/incubator-doris/commit/18ee0eb0867d3a7540d3538daa1b184dd64c5369", "message": "create pprof_profile_dir before heap profiling", "committedDate": "2020-02-19T05:19:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwMjAyMQ==", "url": "https://github.com/apache/incubator-doris/pull/2944#discussion_r381102021", "bodyText": "better to use {} to enclose the operation\nbetter to use FileUtils instead of boost", "author": "imay", "createdAt": "2020-02-19T06:42:26Z", "path": "be/src/http/action/pprof_actions.cpp", "diffHunk": "@@ -243,23 +242,20 @@ void SymbolAction::handle(HttpRequest* req) {\n }\n \n Status PprofActions::setup(ExecEnv* exec_env, EvHttpServer* http_server) {\n-    http_server->register_handler(HttpMethod::GET, \"/pprof/heap\",\n-                                  new HeapAction());\n-    http_server->register_handler(HttpMethod::GET, \"/pprof/growth\",\n-                                  new GrowthAction());\n-    http_server->register_handler(HttpMethod::GET, \"/pprof/profile\",\n-                                  new ProfileAction());\n-    http_server->register_handler(HttpMethod::GET, \"/pprof/pmuprofile\",\n-                                  new PmuProfileAction());\n-    http_server->register_handler(HttpMethod::GET, \"/pprof/contention\",\n-                                  new ContentionAction());\n-    http_server->register_handler(HttpMethod::GET, \"/pprof/cmdline\",\n-                                  new CmdlineAction());\n+    if (!config::pprof_profile_dir.empty())\n+        boost::filesystem::create_directories(config::pprof_profile_dir);", "originalCommit": "18ee0eb0867d3a7540d3538daa1b184dd64c5369", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9ff47c6ce1ceb3024f773c013d64023ed5657ecd", "url": "https://github.com/apache/incubator-doris/commit/9ff47c6ce1ceb3024f773c013d64023ed5657ecd", "message": "delete heap_profile_dir", "committedDate": "2020-02-19T10:51:15Z", "type": "commit"}, {"oid": "2d7a7d7067b61af147965d29b9e6077a04507afd", "url": "https://github.com/apache/incubator-doris/commit/2d7a7d7067b61af147965d29b9e6077a04507afd", "message": "use FileUtils::create_dir", "committedDate": "2020-02-19T10:54:55Z", "type": "commit"}, {"oid": "66bc2020237f19544774e97791a5efac7168811d", "url": "https://github.com/apache/incubator-doris/commit/66bc2020237f19544774e97791a5efac7168811d", "message": "add include", "committedDate": "2020-02-19T15:39:01Z", "type": "commit"}]}