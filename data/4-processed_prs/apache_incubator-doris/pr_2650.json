{"pr_number": 2650, "pr_title": "Fix incompatibility with arm architecture in util and gutil #2645", "pr_createdAt": "2020-01-03T07:34:11Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2650", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE2NzQ4Ng==", "url": "https://github.com/apache/incubator-doris/pull/2650#discussion_r363167486", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            be/src/util/utf8_check.h: MIT license\n          \n          \n            \n            be/src/util/utf8_check.cpp: MIT license", "author": "imay", "createdAt": "2020-01-06T06:00:12Z", "path": "LICENSE.txt", "diffHunk": "@@ -599,3 +599,26 @@ be/src/util/minizip/* :  Condition of use and distribution are the same than zli\n \n --------------------------------------------------------------------------------\n \n+be/src/util/utf8_check.h: MIT license", "originalCommit": "7e6cac33ca026818743874e4010971495584166d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE2NzczMQ==", "url": "https://github.com/apache/incubator-doris/pull/2650#discussion_r363167731", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            int utf8_naive(const char *data, int len);\n          \n          \n            \n            bool utf8_naive(const char *data, size_t len);", "author": "imay", "createdAt": "2020-01-06T06:01:39Z", "path": "be/src/util/utf8_check.h", "diffHunk": "@@ -0,0 +1,33 @@\n+\n+// Licensed to the Apache Software Foundation (ASF) under one\n+// or more contributor license agreements.  See the NOTICE file\n+// distributed with this work for additional information\n+// regarding copyright ownership.  The ASF licenses this file\n+// to you under the Apache License, Version 2.0 (the\n+// \"License\"); you may not use this file except in compliance\n+// with the License.  You may obtain a copy of the License at\n+//\n+//   http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+#ifndef DORIS_BE_SRC_UTIL_UTF8_CHECK_H\n+#define DORIS_BE_SRC_UTIL_UTF8_CHECK_H\n+\n+#include <cstddef>\n+\n+namespace doris {\n+// check utf8 code using simd instructions\n+// Return true - success,  false fail\n+bool validate_utf8(const char *src, size_t len);\n+// chech utf8 use naive c++\n+// Return 0 - success,  >0 - index(1 based) of first error char\n+int utf8_naive(const char *data, int len);", "originalCommit": "7e6cac33ca026818743874e4010971495584166d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0d1187dac24e16a644847405f816ce33d98e6740", "url": "https://github.com/apache/incubator-doris/commit/0d1187dac24e16a644847405f816ce33d98e6740", "message": "Fix incompatibility with arm architecture in util and gutil #2645", "committedDate": "2020-01-06T08:58:42Z", "type": "commit"}, {"oid": "0d1187dac24e16a644847405f816ce33d98e6740", "url": "https://github.com/apache/incubator-doris/commit/0d1187dac24e16a644847405f816ce33d98e6740", "message": "Fix incompatibility with arm architecture in util and gutil #2645", "committedDate": "2020-01-06T08:58:42Z", "type": "forcePushed"}]}