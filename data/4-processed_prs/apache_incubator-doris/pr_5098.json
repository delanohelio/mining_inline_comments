{"pr_number": 5098, "pr_title": "add BE udf bitmap xor", "pr_createdAt": "2020-12-17T03:01:33Z", "pr_url": "https://github.com/apache/incubator-doris/pull/5098", "timeline": [{"oid": "cd4684262e3c0146f4c70877b8f90b9b0fddaeff", "url": "https://github.com/apache/incubator-doris/commit/cd4684262e3c0146f4c70877b8f90b9b0fddaeff", "message": "bitmap_xor", "committedDate": "2020-12-02T14:40:32Z", "type": "commit"}, {"oid": "8d633ef7a49cb9b98df36b0c2c2f18f9a11f6c3d", "url": "https://github.com/apache/incubator-doris/commit/8d633ef7a49cb9b98df36b0c2c2f18f9a11f6c3d", "message": "bitmap_xor", "committedDate": "2020-12-03T06:19:34Z", "type": "commit"}, {"oid": "7b927c50013125d0b617ebde13a986965d9b3d23", "url": "https://github.com/apache/incubator-doris/commit/7b927c50013125d0b617ebde13a986965d9b3d23", "message": "bitmap_xor", "committedDate": "2020-12-05T14:28:34Z", "type": "commit"}, {"oid": "f02890f3a8bc843a24bda76f82e6eb883997d633", "url": "https://github.com/apache/incubator-doris/commit/f02890f3a8bc843a24bda76f82e6eb883997d633", "message": "fix bitmap_xor bug", "committedDate": "2020-12-05T14:41:00Z", "type": "commit"}, {"oid": "e1d94037c8d838a2f17dd6698aed3b436a9374af", "url": "https://github.com/apache/incubator-doris/commit/e1d94037c8d838a2f17dd6698aed3b436a9374af", "message": "bitmap_xor", "committedDate": "2020-12-06T00:37:56Z", "type": "commit"}, {"oid": "bd35f7692df7039bbe5220be4deec705f96cda3b", "url": "https://github.com/apache/incubator-doris/commit/bd35f7692df7039bbe5220be4deec705f96cda3b", "message": "bitmap_xor", "committedDate": "2020-12-07T02:47:12Z", "type": "commit"}, {"oid": "f1e4ebf110b66b996cf5a9948baa095d7a8c4ce2", "url": "https://github.com/apache/incubator-doris/commit/f1e4ebf110b66b996cf5a9948baa095d7a8c4ce2", "message": "add bitmap_xor function document", "committedDate": "2020-12-23T03:47:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk3OTI4Ng==", "url": "https://github.com/apache/incubator-doris/pull/5098#discussion_r548979286", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            StringVal BitmapFunctions::bitmap_xor(FunctionContext* ctx, const StringVal&  lhs,\n          \n          \n            \n            StringVal BitmapFunctions::bitmap_xor(FunctionContext* ctx, const StringVal& lhs,", "author": "morningman", "createdAt": "2020-12-26T12:44:42Z", "path": "be/src/exprs/bitmap_function.cpp", "diffHunk": "@@ -477,6 +477,27 @@ StringVal BitmapFunctions::bitmap_and(FunctionContext* ctx, const StringVal& lhs\n     return serialize(ctx, &bitmap);\n }\n \n+StringVal BitmapFunctions::bitmap_xor(FunctionContext* ctx, const StringVal&  lhs,", "originalCommit": "f1e4ebf110b66b996cf5a9948baa095d7a8c4ce2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk3OTI5NA==", "url": "https://github.com/apache/incubator-doris/pull/5098#discussion_r548979294", "bodyText": "Why delete this file?", "author": "morningman", "createdAt": "2020-12-26T12:44:54Z", "path": ".rat-excludes", "diffHunk": "@@ -1,33 +0,0 @@\n-.*json", "originalCommit": "f1e4ebf110b66b996cf5a9948baa095d7a8c4ce2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk4NTQ4NA==", "url": "https://github.com/apache/incubator-doris/pull/5098#discussion_r548985484", "bodyText": "Sorry, I accidentally deleted", "author": "lihuigang", "createdAt": "2020-12-26T13:59:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk3OTI5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTE5MzUzMQ==", "url": "https://github.com/apache/incubator-doris/pull/5098#discussion_r549193531", "bodyText": "\u60a8\u597d\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5df2\u7ecf\u6062\u590d\u4e86~", "author": "lihuigang", "createdAt": "2020-12-28T02:24:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk3OTI5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODk3OTQ5OQ==", "url": "https://github.com/apache/incubator-doris/pull/5098#discussion_r548979499", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    }else{\n          \n          \n            \n                                    } else {", "author": "morningman", "createdAt": "2020-12-26T12:46:37Z", "path": "be/src/util/bitmap_value.h", "diffHunk": "@@ -1087,6 +1088,63 @@ class BitmapValue {\n         return *this;\n     }\n \n+    // Compute the symmetric union between the current bitmap and the provided bitmap.\n+    // Possible type transitions are:\n+    // SINGLE -> EMPTY\n+    // BITMAP -> EMPTY\n+    // BITMAP -> SINGLE\n+    BitmapValue& operator^=(const BitmapValue& rhs) {\n+        switch (rhs._type) {\n+            case EMPTY:\n+                break;\n+            case SINGLE:\n+                switch (_type) {\n+                    case EMPTY:\n+                        add(rhs._sv);\n+                        break;\n+                    case SINGLE:\n+                        if (_sv == rhs._sv) {\n+                            _type = EMPTY;\n+                            _bitmap.clear();\n+                        }else{", "originalCommit": "f1e4ebf110b66b996cf5a9948baa095d7a8c4ce2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a5628a1727f121a240b12dcf71c9c5ce98af9e81", "url": "https://github.com/apache/incubator-doris/commit/a5628a1727f121a240b12dcf71c9c5ce98af9e81", "message": "recover .rat-excludes", "committedDate": "2020-12-26T13:39:15Z", "type": "commit"}, {"oid": "7e774c40a4beca6856ba499b98b2448bf9cfd3ae", "url": "https://github.com/apache/incubator-doris/commit/7e774c40a4beca6856ba499b98b2448bf9cfd3ae", "message": "Update be/src/util/bitmap_value.h\r\n\r\nthanks\n\nCo-authored-by: Mingyu Chen <morningman.cmy@gmail.com>", "committedDate": "2020-12-26T14:01:36Z", "type": "commit"}, {"oid": "4a0bf8f11cb028d6cda4e7917b11d60ad218230d", "url": "https://github.com/apache/incubator-doris/commit/4a0bf8f11cb028d6cda4e7917b11d60ad218230d", "message": "Update be/src/exprs/bitmap_function.cpp\r\n\r\nthanks\n\nCo-authored-by: Mingyu Chen <morningman.cmy@gmail.com>", "committedDate": "2020-12-26T14:02:08Z", "type": "commit"}, {"oid": "ce69a112f5202a8121b5fef26dfc658f073e3afe", "url": "https://github.com/apache/incubator-doris/commit/ce69a112f5202a8121b5fef26dfc658f073e3afe", "message": "remove blank lines", "committedDate": "2020-12-27T08:40:37Z", "type": "commit"}, {"oid": "15b89d687da12c51b2870b4ffd66e7a3f3179ccb", "url": "https://github.com/apache/incubator-doris/commit/15b89d687da12c51b2870b4ffd66e7a3f3179ccb", "message": "Modify format", "committedDate": "2020-12-29T02:58:49Z", "type": "commit"}, {"oid": "859aeb54666e215e78d7b11c8936d78eaffd269a", "url": "https://github.com/apache/incubator-doris/commit/859aeb54666e215e78d7b11c8936d78eaffd269a", "message": "Merge remote-tracking branch 'origin/master' into lihuigang-bitmap_xor", "committedDate": "2020-12-29T02:59:53Z", "type": "commit"}]}