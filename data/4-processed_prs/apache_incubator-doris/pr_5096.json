{"pr_number": 5096, "pr_title": "[Feature] Add a http interface to acquire the tablets distribution between different disks", "pr_createdAt": "2020-12-16T10:19:40Z", "pr_url": "https://github.com/apache/incubator-doris/pull/5096", "timeline": [{"oid": "32cd99273f7c9dd6bcd80d659ab8ad238008911d", "url": "https://github.com/apache/incubator-doris/commit/32cd99273f7c9dd6bcd80d659ab8ad238008911d", "message": "get tablets distribution between different disks on BE", "committedDate": "2020-12-17T06:30:56Z", "type": "commit"}, {"oid": "187b11a72f0eaf4a8b171f9b3a11fc108571fb3f", "url": "https://github.com/apache/incubator-doris/commit/187b11a72f0eaf4a8b171f9b3a11fc108571fb3f", "message": "get tablets distribution between different disks on BE", "committedDate": "2020-12-17T06:30:56Z", "type": "commit"}, {"oid": "cacc331765acfc525b0b71e70432776b06c1eca0", "url": "https://github.com/apache/incubator-doris/commit/cacc331765acfc525b0b71e70432776b06c1eca0", "message": "get tablets distribution between different disks on BE", "committedDate": "2020-12-17T06:30:56Z", "type": "commit"}, {"oid": "5319a735bd19f6eacbfe0a7f7d086a36eef060b6", "url": "https://github.com/apache/incubator-doris/commit/5319a735bd19f6eacbfe0a7f7d086a36eef060b6", "message": "get tablets distribution between different disks on BE", "committedDate": "2020-12-17T06:30:56Z", "type": "commit"}, {"oid": "643901e8c46e489535bdb687c40b8c74983afe57", "url": "https://github.com/apache/incubator-doris/commit/643901e8c46e489535bdb687c40b8c74983afe57", "message": "get tablets distribution between different disks on BE", "committedDate": "2020-12-17T06:30:56Z", "type": "commit"}, {"oid": "ee8b95a095d761d28e525e0e3bf4f6dca34fc577", "url": "https://github.com/apache/incubator-doris/commit/ee8b95a095d761d28e525e0e3bf4f6dca34fc577", "message": "get tablets distribution between different disks on BE", "committedDate": "2020-12-17T06:30:56Z", "type": "commit"}, {"oid": "89ba840677e8f8c7508e3648a6f88a214ace800e", "url": "https://github.com/apache/incubator-doris/commit/89ba840677e8f8c7508e3648a6f88a214ace800e", "message": "get tablets distribution between different disks on BE", "committedDate": "2020-12-17T06:30:56Z", "type": "commit"}, {"oid": "89ba840677e8f8c7508e3648a6f88a214ace800e", "url": "https://github.com/apache/incubator-doris/commit/89ba840677e8f8c7508e3648a6f88a214ace800e", "message": "get tablets distribution between different disks on BE", "committedDate": "2020-12-17T06:30:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTg1NjIzOA==", "url": "https://github.com/apache/incubator-doris/pull/5096#discussion_r555856238", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -X GET http://be_host:webserver_port/tablets_distribution\uff1fpartition_id=xxx\n          \n          \n            \n            curl -X GET http://be_host:webserver_port/tablets_distribution?partition_id=xxx", "author": "morningman", "createdAt": "2021-01-12T15:25:37Z", "path": "docs/zh-CN/administrator-guide/http-actions/tablets_distribution.md", "diffHunk": "@@ -0,0 +1,124 @@\n+---\n+{\n+    \"title\": \"GET TABLETS DISTRIBUTION BETWEEN DIFFERENT DISKS\",\n+    \"language\": \"zh-CN\"\n+}\n+---\n+\n+<!-- \n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# GET TABLETS DISTRIBUTION BETWEEN DIFFERENT DISKS\n+   \n+\u83b7\u53d6BE\u8282\u70b9\u4e0a\u6bcf\u4e00\u4e2apartition\u4e0b\u7684tablet\u5728\u4e0d\u540c\u78c1\u76d8\u4e0a\u7684\u5206\u5e03\u60c5\u51b5\n+\n+```\n+curl -X GET http://be_host:webserver_port/tablets_distribution\n+```\n+\n+\u8fd4\u56de\u503c\u5c31\u662fBE\u8282\u70b9\u4e0a\u6bcf\u4e00\u4e2apartition\u4e0b\u7684tablet\u5728\u5404\u4e2a\u78c1\u76d8\u4e0a\u7684\u6570\u91cf\u5206\u5e03\uff0c\u53ea\u5305\u542btablet\u6570\u91cf\u3002\n+\n+```\n+{\n+    msg: \"OK\",\n+    code: 0,\n+    data: {\n+        host: \"***\",\n+        tablets_distribution: [\n+            {\n+                partition_id:***,\n+                disks:[\n+                    {\n+                        disk_path:\"***\",\n+                        tablets_num:***,\n+                    },\n+                    {\n+                        disk_path:\"***\",\n+                        tablets_num:***,\n+                    },\n+\n+                    ...\n+\n+                ]\n+            },\n+            {\n+                partition_id:***,\n+                disks:[\n+                    {\n+                        disk_path:\"***\",\n+                        tablets_num:***,\n+                    },\n+                    {\n+                        disk_path:\"***\",\n+                        tablets_num:***,\n+                    },\n+\n+                    ...\n+\n+                ]\n+            },\n+\n+            ...\n+\n+        ]\n+    },\n+    count: ***\n+}\n+```\n+\n+```\n+curl -X GET http://be_host:webserver_port/tablets_distribution\uff1fpartition_id=xxx", "originalCommit": "89ba840677e8f8c7508e3648a6f88a214ace800e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjQ4NTY4NA==", "url": "https://github.com/apache/incubator-doris/pull/5096#discussion_r556485684", "bodyText": "Thanks for your review.", "author": "weizuo93", "createdAt": "2021-01-13T12:31:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTg1NjIzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTg1ODI3Mg==", "url": "https://github.com/apache/incubator-doris/pull/5096#discussion_r555858272", "bodyText": "How about:\n/tablets_distribution?group_by=partition\n/tablets_distribution?group_by=partition&partition_id=10000\nso that we can extent this api in future with some other kind of \"group by\"?", "author": "morningman", "createdAt": "2021-01-12T15:27:01Z", "path": "docs/zh-CN/administrator-guide/http-actions/tablets_distribution.md", "diffHunk": "@@ -0,0 +1,124 @@\n+---\n+{\n+    \"title\": \"GET TABLETS DISTRIBUTION BETWEEN DIFFERENT DISKS\",\n+    \"language\": \"zh-CN\"\n+}\n+---\n+\n+<!-- \n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+# GET TABLETS DISTRIBUTION BETWEEN DIFFERENT DISKS\n+   \n+\u83b7\u53d6BE\u8282\u70b9\u4e0a\u6bcf\u4e00\u4e2apartition\u4e0b\u7684tablet\u5728\u4e0d\u540c\u78c1\u76d8\u4e0a\u7684\u5206\u5e03\u60c5\u51b5\n+\n+```\n+curl -X GET http://be_host:webserver_port/tablets_distribution", "originalCommit": "89ba840677e8f8c7508e3648a6f88a214ace800e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjQ4NjU3OA==", "url": "https://github.com/apache/incubator-doris/pull/5096#discussion_r556486578", "bodyText": "How about:\n/tablets_distribution?group_by=partition\n/tablets_distribution?group_by=partition&partition_id=10000\nso that we can extent this api in future with some other kind of \"group by\"?\n\nOK. I will modify the API.", "author": "weizuo93", "createdAt": "2021-01-13T12:33:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTg1ODI3Mg=="}], "type": "inlineReview"}, {"oid": "1d320a9070ff7a8d680926b3038d23172e741b04", "url": "https://github.com/apache/incubator-doris/commit/1d320a9070ff7a8d680926b3038d23172e741b04", "message": "get tablets distribution between different disks on BE", "committedDate": "2021-01-13T13:15:41Z", "type": "commit"}]}