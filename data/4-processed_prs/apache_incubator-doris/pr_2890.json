{"pr_number": 2890, "pr_title": "Add disable_storage_page_cache config", "pr_createdAt": "2020-02-12T09:16:33Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2890", "timeline": [{"oid": "6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0", "url": "https://github.com/apache/incubator-doris/commit/6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0", "message": "Add disable_storage_page_cache config", "committedDate": "2020-02-12T12:29:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODMxOTg2Mg==", "url": "https://github.com/apache/incubator-doris/pull/2890#discussion_r378319862", "bodyText": "It is better to use an argument for this function.\nBesides the configuration, some operation don't need cache either, such as compaction.\nSo the good way is that let the caller judge whether the cache is used.", "author": "imay", "createdAt": "2020-02-12T15:22:13Z", "path": "be/src/olap/rowset/segment_v2/column_reader.cpp", "diffHunk": "@@ -97,7 +97,7 @@ Status ColumnReader::read_page(RandomAccessFile* file, const PagePointer& pp,\n     auto cache = StoragePageCache::instance();\n     PageCacheHandle cache_handle;\n     StoragePageCache::CacheKey cache_key(file->file_name(), pp.offset);\n-    if (cache->lookup(cache_key, &cache_handle)) {\n+    if (!config::disable_storage_page_cache && cache->lookup(cache_key, &cache_handle)) {", "originalCommit": "6d3c4eafe44e6ccb07d9f02b423c0242de8c4df0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODYzODA5Ng==", "url": "https://github.com/apache/incubator-doris/pull/2890#discussion_r378638096", "bodyText": "OK, I agree with you.", "author": "kangkaisen", "createdAt": "2020-02-13T03:48:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODMxOTg2Mg=="}], "type": "inlineReview"}, {"oid": "981f999d6574fd7dcd906257c39e05aa613d9480", "url": "https://github.com/apache/incubator-doris/commit/981f999d6574fd7dcd906257c39e05aa613d9480", "message": "Add disable_storage_page_cache config", "committedDate": "2020-02-13T06:09:18Z", "type": "forcePushed"}, {"oid": "1fd2014747a61ce7f62159429a8a65a5cedf013b", "url": "https://github.com/apache/incubator-doris/commit/1fd2014747a61ce7f62159429a8a65a5cedf013b", "message": "Add disable_storage_page_cache config", "committedDate": "2020-02-16T09:59:18Z", "type": "commit"}, {"oid": "1fd2014747a61ce7f62159429a8a65a5cedf013b", "url": "https://github.com/apache/incubator-doris/commit/1fd2014747a61ce7f62159429a8a65a5cedf013b", "message": "Add disable_storage_page_cache config", "committedDate": "2020-02-16T09:59:18Z", "type": "forcePushed"}]}