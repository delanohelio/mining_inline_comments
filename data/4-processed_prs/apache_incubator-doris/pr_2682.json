{"pr_number": 2682, "pr_title": "Fix incompatibility with arm architecture in olap #2645", "pr_createdAt": "2020-01-07T04:56:18Z", "pr_url": "https://github.com/apache/incubator-doris/pull/2682", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU5ODU0MA==", "url": "https://github.com/apache/incubator-doris/pull/2682#discussion_r363598540", "bodyText": "uesless?", "author": "imay", "createdAt": "2020-01-07T05:42:55Z", "path": "be/src/olap/storage_engine.h", "diffHunk": "@@ -310,6 +308,8 @@ class StorageEngine {\n     uint32_t _min_percentage_of_error_disk;\n     Cache* _file_descriptor_lru_cache;\n     Cache* _index_stream_lru_cache;\n+    uint32_t _max_base_compaction_task_per_disk;\n+    uint32_t _max_cumulative_compaction_task_per_disk;", "originalCommit": "25d0118bfd8be2bb4eabf1140b545e74b2a09094", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYwNTY4Nw==", "url": "https://github.com/apache/incubator-doris/pull/2682#discussion_r363605687", "bodyText": "done", "author": "yangzhg", "createdAt": "2020-01-07T06:22:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU5ODU0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU5ODg1NQ==", "url": "https://github.com/apache/incubator-doris/pull/2682#discussion_r363598855", "bodyText": "prefer std::atomic<int32_t>.", "author": "imay", "createdAt": "2020-01-07T05:44:56Z", "path": "be/src/olap/rowset/segment_group.h", "diffHunk": "@@ -291,7 +291,7 @@ class SegmentGroup {\n     PUniqueId _load_id;                // load id for segmentgroup\n     int32_t _num_segments;             // number of segments in this segmentgroup\n     bool _index_loaded;                // whether the segmentgroup has been read\n-    atomic_t _ref_count;               // reference count\n+    base::subtle::Atomic64 _ref_count; // reference count", "originalCommit": "25d0118bfd8be2bb4eabf1140b545e74b2a09094", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYwNTY1Nw==", "url": "https://github.com/apache/incubator-doris/pull/2682#discussion_r363605657", "bodyText": "gutil/atomicops need this type", "author": "yangzhg", "createdAt": "2020-01-07T06:21:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU5ODg1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzU5OTExMA==", "url": "https://github.com/apache/incubator-doris/pull/2682#discussion_r363599110", "bodyText": "Is this can be unified through CpuInfo?", "author": "imay", "createdAt": "2020-01-07T05:46:26Z", "path": "be/src/olap/bhp_lib.h", "diffHunk": "@@ -789,6 +790,11 @@ inline int check_sse4_2() {\n     );\n     return ret;\n }\n+#else\n+inline int check_sse4_2() {", "originalCommit": "25d0118bfd8be2bb4eabf1140b545e74b2a09094", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8adf260d8db371632125bd3e36e1595db3ec7bff", "url": "https://github.com/apache/incubator-doris/commit/8adf260d8db371632125bd3e36e1595db3ec7bff", "message": "fix by comment", "committedDate": "2020-01-07T06:43:17Z", "type": "forcePushed"}, {"oid": "c6c0dc22a9747f3014237c75a625e3e3a987b11e", "url": "https://github.com/apache/incubator-doris/commit/c6c0dc22a9747f3014237c75a625e3e3a987b11e", "message": "Fix incompatibility with arm architecture in olap #2645", "committedDate": "2020-01-07T07:10:37Z", "type": "forcePushed"}, {"oid": "30bdb03edcd426f57d227f80249dc2a2524e7ddb", "url": "https://github.com/apache/incubator-doris/commit/30bdb03edcd426f57d227f80249dc2a2524e7ddb", "message": "Fix incompatibility with arm architecture in olap #2645", "committedDate": "2020-01-07T07:24:14Z", "type": "commit"}, {"oid": "30bdb03edcd426f57d227f80249dc2a2524e7ddb", "url": "https://github.com/apache/incubator-doris/commit/30bdb03edcd426f57d227f80249dc2a2524e7ddb", "message": "Fix incompatibility with arm architecture in olap #2645", "committedDate": "2020-01-07T07:24:14Z", "type": "forcePushed"}, {"oid": "4e9a8665717e8462f6c45d6cac4496cb50f58261", "url": "https://github.com/apache/incubator-doris/commit/4e9a8665717e8462f6c45d6cac4496cb50f58261", "message": "using std::atomic instead of atomicops", "committedDate": "2020-01-07T07:57:21Z", "type": "commit"}, {"oid": "47a0c4101f24ac896433c864452c5e52d26fe555", "url": "https://github.com/apache/incubator-doris/commit/47a0c4101f24ac896433c864452c5e52d26fe555", "message": "using std::atomic instead of atomicops", "committedDate": "2020-01-07T08:01:35Z", "type": "commit"}]}