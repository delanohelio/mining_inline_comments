{"pr_number": 3858, "pr_title": "[Running_Profile] Fix all counter in DataStreamRecv and change the image path in docs", "pr_createdAt": "2020-06-13T17:11:46Z", "pr_url": "https://github.com/apache/incubator-doris/pull/3858", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEyMDI0MQ==", "url": "https://github.com/apache/incubator-doris/pull/3858#discussion_r440120241", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                std::map<google::protobuf::Closure*, MonotonicStopWatch> _closere_clock_map;\n          \n          \n            \n                std::map<google::protobuf::Closure*, MonotonicStopWatch> _closure_clock_map;", "author": "morningman", "createdAt": "2020-06-15T11:50:54Z", "path": "be/src/runtime/data_stream_recvr.h", "diffHunk": "@@ -163,6 +163,7 @@ class DataStreamRecvr {\n     // receiver and placed in _sender_queue_pool.\n     std::vector<SenderQueue*> _sender_queues;\n \n+    std::map<google::protobuf::Closure*, MonotonicStopWatch> _closere_clock_map;", "originalCommit": "e12f6946e3ca32fda43dd64fe8b395781a6b8c96", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTM4ODIzNA==", "url": "https://github.com/apache/incubator-doris/pull/3858#discussion_r441388234", "bodyText": "Fragment -> 1\u4e2ainstance", "author": "wutiangan", "createdAt": "2020-06-17T08:52:38Z", "path": "docs/zh-CN/administrator-guide/running-profile.md", "diffHunk": "@@ -92,18 +92,23 @@ BE\u7aef\u6536\u96c6\u7684\u7edf\u8ba1\u4fe1\u606f\u8f83\u591a\uff0c\u4e0b\u9762\u5217\u51fa\u4e86\u5404\u4e2a\u53c2\u6570\u7684\u5bf9\u5e94\u542b\u4e49\uff1a\n    - AverageThreadTokens: \u6267\u884cFragment\u4f7f\u7528\u7ebf\u7a0b\u6570\u76ee\uff0c\u4e0d\u5305\u542b\u7ebf\u7a0b\u6c60\u7684\u4f7f\u7528\u60c5\u51b5\n    - Buffer Pool PeakReservation: Buffer Pool\u4f7f\u7528\u7684\u5185\u5b58\u7684\u5cf0\u503c\n    - MemoryLimit: \u67e5\u8be2\u65f6\u7684\u5185\u5b58\u9650\u5236\n-   - PeakMemoryUsage: \u5185\u5b58\u4f7f\u7528\u7684\u5cf0\u503c  \n+   - PeakMemoryUsage: \u6574\u4e2aFragment\u5728\u67e5\u8be2\u65f6\u5185\u5b58\u4f7f\u7528\u7684\u5cf0\u503c", "originalCommit": "67d4c2f295e8c852327b4a6526dcc595b7528ae0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwMTcyOQ==", "url": "https://github.com/apache/incubator-doris/pull/3858#discussion_r442601729", "bodyText": "ok", "author": "HappenLee", "createdAt": "2020-06-19T02:43:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTM4ODIzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQyMzgyMg==", "url": "https://github.com/apache/incubator-doris/pull/3858#discussion_r441423822", "bodyText": "DataStreamRecv\u653e\u5728exchangeNode\u91cc\u9762", "author": "wutiangan", "createdAt": "2020-06-17T09:49:41Z", "path": "docs/zh-CN/administrator-guide/running-profile.md", "diffHunk": "@@ -92,18 +92,23 @@ BE\u7aef\u6536\u96c6\u7684\u7edf\u8ba1\u4fe1\u606f\u8f83\u591a\uff0c\u4e0b\u9762\u5217\u51fa\u4e86\u5404\u4e2a\u53c2\u6570\u7684\u5bf9\u5e94\u542b\u4e49\uff1a\n    - AverageThreadTokens: \u6267\u884cFragment\u4f7f\u7528\u7ebf\u7a0b\u6570\u76ee\uff0c\u4e0d\u5305\u542b\u7ebf\u7a0b\u6c60\u7684\u4f7f\u7528\u60c5\u51b5\n    - Buffer Pool PeakReservation: Buffer Pool\u4f7f\u7528\u7684\u5185\u5b58\u7684\u5cf0\u503c\n    - MemoryLimit: \u67e5\u8be2\u65f6\u7684\u5185\u5b58\u9650\u5236\n-   - PeakMemoryUsage: \u5185\u5b58\u4f7f\u7528\u7684\u5cf0\u503c  \n+   - PeakMemoryUsage: \u6574\u4e2aFragment\u5728\u67e5\u8be2\u65f6\u5185\u5b58\u4f7f\u7528\u7684\u5cf0\u503c\n    - RowsProduced: \u5904\u7406\u5217\u7684\u884c\u6570\n-   - BytesReceived: \u901a\u8fc7\u7f51\u7edc\u63a5\u6536\u7684Bytes\u5927\u5c0f\n-   - DeserializeRowBatchTimer: \u53cd\u5e8f\u5217\u5316\u7684\u8017\u65f6\n \n #### `BlockMgr`\n-  - BlocksCreated: \u843d\u76d8\u65f6\u521b\u5efa\u7684Blocks\u6570\u76ee\n+  - BlocksCreated: BlockMgr\u521b\u5efa\u7684Blocks\u6570\u76ee\n   - BlocksRecycled: \u91cd\u7528\u7684Blocks\u6570\u76ee\n   - BytesWritten: \u603b\u7684\u843d\u76d8\u5199\u6570\u636e\u91cf\n   - MaxBlockSize: \u5355\u4e2aBlock\u7684\u5927\u5c0f\n   - TotalReadBlockTime: \u8bfbBlock\u7684\u603b\u8017\u65f6\n \n+#### `DataStreamRecvr`\n+  - BytesReceived: \u901a\u8fc7\u7f51\u7edc\u63a5\u6536\u7684\u6570\u636e\u91cf\u5927\u5c0f\n+  - DataArrivalWaitTime: \u7b49\u5f85Sender\u53d1\u9001\u6570\u636e\u7684\u603b\u65f6\u95f4\n+  - FirstBatchArrivalWaitTime: \u7b49\u5f85\u7b2c\u4e00\u4e2abatch\u4eceSender\u83b7\u53d6\u7684\u65f6\u95f4\n+  - DeserializeRowBatchTimer: \u53cd\u5e8f\u5217\u5316\u7f51\u7edc\u6570\u636e\u7684\u8017\u65f6\n+  - SendersBlockedTotalTimer(*): DataStreamRecv\u7684\u961f\u5217\u7684\u5185\u5b58\u88ab\u6253\u6ee1\uff0cSender\u7aef\u7b49\u5f85\u7684\u8017\u65f6\n+", "originalCommit": "67d4c2f295e8c852327b4a6526dcc595b7528ae0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwMTY2Nw==", "url": "https://github.com/apache/incubator-doris/pull/3858#discussion_r442601667", "bodyText": "ok", "author": "HappenLee", "createdAt": "2020-06-19T02:43:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQyMzgyMg=="}], "type": "inlineReview"}, {"oid": "43fe3c3d58f6253d79ff7202caf8aa78d17613b3", "url": "https://github.com/apache/incubator-doris/commit/43fe3c3d58f6253d79ff7202caf8aa78d17613b3", "message": "1. Change DataStreamRecv to EXCHANGE NODE\n2. Revise the docs\n3. Fix the bug of memory leak of spill_sorter", "committedDate": "2020-06-19T07:43:16Z", "type": "forcePushed"}, {"oid": "7685097c672a3191b59d7272578d92600088acca", "url": "https://github.com/apache/incubator-doris/commit/7685097c672a3191b59d7272578d92600088acca", "message": "[Running_Profile] Fix all counter in DataStreamRecv and change the image path in docs", "committedDate": "2020-06-21T13:44:06Z", "type": "commit"}, {"oid": "7cf23a85f02e756d8627eed8430ebf935d7a12f2", "url": "https://github.com/apache/incubator-doris/commit/7cf23a85f02e756d8627eed8430ebf935d7a12f2", "message": "fix the misspelling", "committedDate": "2020-06-21T13:44:06Z", "type": "commit"}, {"oid": "2404d34621ca6930917a0a26a7c90aa33367b881", "url": "https://github.com/apache/incubator-doris/commit/2404d34621ca6930917a0a26a7c90aa33367b881", "message": "1. Change DataStreamRecv to EXCHANGE NODE\n2. Revise the docs\n3. Fix the bug of memory leak of spill_sorter", "committedDate": "2020-06-21T13:44:06Z", "type": "commit"}, {"oid": "0cb10c4d72a585f140f7c9418b6249a8a1a49373", "url": "https://github.com/apache/incubator-doris/commit/0cb10c4d72a585f140f7c9418b6249a8a1a49373", "message": "1. Change DataStreamRecv to EXCHANGE NODE\n2. Revise the docs\n3. Fix the bug of memory leak of spill_sorter", "committedDate": "2020-06-21T13:44:46Z", "type": "commit"}, {"oid": "0cb10c4d72a585f140f7c9418b6249a8a1a49373", "url": "https://github.com/apache/incubator-doris/commit/0cb10c4d72a585f140f7c9418b6249a8a1a49373", "message": "1. Change DataStreamRecv to EXCHANGE NODE\n2. Revise the docs\n3. Fix the bug of memory leak of spill_sorter", "committedDate": "2020-06-21T13:44:46Z", "type": "forcePushed"}]}