{"pr_number": 3676, "pr_title": "[Stmt] Add rowCount column to SHOW DATA stmt", "pr_createdAt": "2020-05-23T16:27:24Z", "pr_url": "https://github.com/apache/incubator-doris/pull/3676", "timeline": [{"oid": "2d7f4857f4eb6047e1373de285cd3788fdbbed76", "url": "https://github.com/apache/incubator-doris/commit/2d7f4857f4eb6047e1373de285cd3788fdbbed76", "message": "[Stmt] Add rowCount column to SHOW DATA stmt\n\nUser can see the row count of all materialized indexes of a table.\n\n```\nmysql> show data from test;\n+-----------+-----------+-----------+--------------+----------+\n| TableName | IndexName | Size      | ReplicaCount | RowCount |\n+-----------+-----------+-----------+--------------+----------+\n| test2     | r1        | 10.000MB  | 30           | 10000    |\n|           | r2        | 20.000MB  | 30           | 20000    |\n|           | test2     | 50.000MB  | 30           | 50000    |\n|           | Total     | 80.000    | 90           |          |\n+-----------+-----------+-----------+--------------+----------+\n```", "committedDate": "2020-05-23T16:22:38Z", "type": "commit"}, {"oid": "8ff6c3594d5d080f8dad11a63e39f7bd465ed650", "url": "https://github.com/apache/incubator-doris/commit/8ff6c3594d5d080f8dad11a63e39f7bd465ed650", "message": "fix ut", "committedDate": "2020-05-24T11:32:23Z", "type": "commit"}, {"oid": "8ff6c3594d5d080f8dad11a63e39f7bd465ed650", "url": "https://github.com/apache/incubator-doris/commit/8ff6c3594d5d080f8dad11a63e39f7bd465ed650", "message": "fix ut", "committedDate": "2020-05-24T11:32:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0NzA5Mg==", "url": "https://github.com/apache/incubator-doris/pull/3676#discussion_r429647092", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \u8be5\u8bed\u53e5\u7528\u4e8e\u5c55\u793a\u6570\u636e\u91cf\u3001\u526f\u672c\u6570\u91cf\u5df2\u7ecf\u7edf\u8ba1\u884c\u6570\u3002\n          \n          \n            \n            \u8be5\u8bed\u53e5\u7528\u4e8e\u5c55\u793a\u6570\u636e\u91cf\u3001\u526f\u672c\u6570\u91cf\u4ee5\u53ca\u7edf\u8ba1\u884c\u6570\u3002", "author": "kangkaisen", "createdAt": "2020-05-24T15:18:30Z", "path": "docs/zh-CN/sql-reference/sql-statements/Data Manipulation/SHOW DATA.md", "diffHunk": "@@ -25,23 +25,65 @@ under the License.\n -->\n \n # SHOW DATA\n+\n ## description\n-    \u8be5\u8bed\u53e5\u7528\u4e8e\u5c55\u793a\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\n-    \u8bed\u6cd5\uff1a\n-        SHOW DATA [FROM db_name[.table_name]];\n-        \n-    \u8bf4\u660e\uff1a\n-        1. \u5982\u679c\u4e0d\u6307\u5b9a FROM \u5b50\u53e5\uff0c\u4f7f\u7528\u5c55\u793a\u5f53\u524d db \u4e0b\u7ec6\u5206\u5230\u5404\u4e2a table \u7684\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\n-        2. \u5982\u679c\u6307\u5b9a FROM \u5b50\u53e5\uff0c\u5219\u5c55\u793a table \u4e0b\u7ec6\u5206\u5230\u5404\u4e2a index \u7684\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\n-        3. \u5982\u679c\u60f3\u67e5\u770b\u5404\u4e2a Partition \u7684\u5927\u5c0f\uff0c\u8bf7\u53c2\u9605 help show partitions\n+\n+\u8be5\u8bed\u53e5\u7528\u4e8e\u5c55\u793a\u6570\u636e\u91cf\u3001\u526f\u672c\u6570\u91cf\u5df2\u7ecf\u7edf\u8ba1\u884c\u6570\u3002", "originalCommit": "8ff6c3594d5d080f8dad11a63e39f7bd465ed650", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTcyOTU5Mg==", "url": "https://github.com/apache/incubator-doris/pull/3676#discussion_r429729592", "bodyText": "Done", "author": "morningman", "createdAt": "2020-05-25T04:47:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0NzA5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0NzE2NA==", "url": "https://github.com/apache/incubator-doris/pull/3676#discussion_r429647164", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            2. \u5c55\u793a\u6307\u5b9a db \u7684\u4e0b\u6307\u5b9a\u8868\u7684\u7ec6\u5206\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\n          \n          \n            \n            2. \u5c55\u793a\u6307\u5b9a db \u7684\u4e0b\u6307\u5b9a\u8868\u7684\u7ec6\u5206\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\u548c\u7edf\u8ba1\u884c\u6570", "author": "kangkaisen", "createdAt": "2020-05-24T15:19:31Z", "path": "docs/zh-CN/sql-reference/sql-statements/Data Manipulation/SHOW DATA.md", "diffHunk": "@@ -25,23 +25,65 @@ under the License.\n -->\n \n # SHOW DATA\n+\n ## description\n-    \u8be5\u8bed\u53e5\u7528\u4e8e\u5c55\u793a\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\n-    \u8bed\u6cd5\uff1a\n-        SHOW DATA [FROM db_name[.table_name]];\n-        \n-    \u8bf4\u660e\uff1a\n-        1. \u5982\u679c\u4e0d\u6307\u5b9a FROM \u5b50\u53e5\uff0c\u4f7f\u7528\u5c55\u793a\u5f53\u524d db \u4e0b\u7ec6\u5206\u5230\u5404\u4e2a table \u7684\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\n-        2. \u5982\u679c\u6307\u5b9a FROM \u5b50\u53e5\uff0c\u5219\u5c55\u793a table \u4e0b\u7ec6\u5206\u5230\u5404\u4e2a index \u7684\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\n-        3. \u5982\u679c\u60f3\u67e5\u770b\u5404\u4e2a Partition \u7684\u5927\u5c0f\uff0c\u8bf7\u53c2\u9605 help show partitions\n+\n+\u8be5\u8bed\u53e5\u7528\u4e8e\u5c55\u793a\u6570\u636e\u91cf\u3001\u526f\u672c\u6570\u91cf\u5df2\u7ecf\u7edf\u8ba1\u884c\u6570\u3002\n+\n+\u8bed\u6cd5\uff1a\n+\n+```\n+SHOW DATA [FROM db_name[.table_name]];\n+```\n+    \n+\u8bf4\u660e\uff1a\n+\n+1. \u5982\u679c\u4e0d\u6307\u5b9a FROM \u5b50\u53e5\uff0c\u5219\u5c55\u793a\u5f53\u524d db \u4e0b\u7ec6\u5206\u5230\u5404\u4e2a table \u7684\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\u3002\u5176\u4e2d\u6570\u636e\u91cf\u4e3a\u6240\u6709\u526f\u672c\u7684\u603b\u6570\u636e\u91cf\u3002\u800c\u526f\u672c\u6570\u91cf\u4e3a\u8868\u7684\u6240\u6709\u5206\u533a\u4ee5\u53ca\u6240\u6709\u7269\u5316\u89c6\u56fe\u7684\u526f\u672c\u6570\u91cf\u3002\n+\n+2. \u5982\u679c\u6307\u5b9a FROM \u5b50\u53e5\uff0c\u5219\u5c55\u793a table \u4e0b\u7ec6\u5206\u5230\u5404\u4e2a\u7269\u5316\u89c6\u56fe\u7684\u6570\u636e\u91cf\u3001\u526f\u672c\u6570\u91cf\u548c\u7edf\u8ba1\u884c\u6570\u3002\u5176\u4e2d\u6570\u636e\u91cf\u4e3a\u6240\u6709\u526f\u672c\u7684\u603b\u6570\u636e\u91cf\u3002\u526f\u672c\u6570\u91cf\u4e3a\u5bf9\u5e94\u7269\u5316\u89c6\u56fe\u7684\u6240\u6709\u5206\u533a\u7684\u526f\u672c\u6570\u91cf\u3002\u7edf\u8ba1\u884c\u6570\u4e3a\u5bf9\u5e94\u7269\u5316\u89c6\u56fe\u7684\u6240\u6709\u5206\u533a\u7edf\u8ba1\u884c\u6570\u3002\n+\n+3. \u7edf\u8ba1\u884c\u6570\u65f6\uff0c\u4ee5\u591a\u4e2a\u526f\u672c\u4e2d\uff0c\u884c\u6570\u6700\u5927\u7684\u90a3\u4e2a\u526f\u672c\u4e3a\u51c6\u3002\n+\n+4. \u7ed3\u679c\u96c6\u4e2d\u7684 `Total` \u884c\u8868\u793a\u6c47\u603b\u884c\u3002`Quota` \u884c\u8868\u793a\u5f53\u524d\u6570\u636e\u5e93\u8bbe\u7f6e\u7684\u914d\u989d\u3002`Left` \u884c\u8868\u793a\u5269\u4f59\u914d\u989d\u3002\n+\n+5. \u5982\u679c\u60f3\u67e5\u770b\u5404\u4e2a Partition \u7684\u5927\u5c0f\uff0c\u8bf7\u53c2\u9605 `help show partitions`\u3002\n \n ## example\n-    1. \u5c55\u793a\u9ed8\u8ba4 db \u7684\u5404\u4e2a table \u7684\u6570\u636e\u91cf\uff0c\u526f\u672c\u6570\u91cf\uff0c\u6c47\u603b\u6570\u636e\u91cf\u548c\u6c47\u603b\u526f\u672c\u6570\u91cf\u3002\n-        SHOW DATA;\n-        \n-    2. \u5c55\u793a\u6307\u5b9a db \u7684\u4e0b\u6307\u5b9a\u8868\u7684\u7ec6\u5206\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf\n-        SHOW DATA FROM example_db.table_name;\n+\n+1. \u5c55\u793a\u9ed8\u8ba4 db \u7684\u5404\u4e2a table \u7684\u6570\u636e\u91cf\uff0c\u526f\u672c\u6570\u91cf\uff0c\u6c47\u603b\u6570\u636e\u91cf\u548c\u6c47\u603b\u526f\u672c\u6570\u91cf\u3002\n+    \n+    ```\n+    SHOW DATA;\n+    ```\n+    \n+    ```\n+    +-----------+-------------+--------------+\n+    | TableName | Size        | ReplicaCount |\n+    +-----------+-------------+--------------+\n+    | tbl1      | 900.000 B   | 6            |\n+    | tbl2      | 500.000 B   | 3            |\n+    | Total     | 1.400 KB    | 9            |\n+    | Quota     | 1024.000 GB | 1073741824   |\n+    | Left      | 1021.921 GB | 1073741815   |\n+    +-----------+-------------+--------------+\n+    ```\n+    \n+2. \u5c55\u793a\u6307\u5b9a db \u7684\u4e0b\u6307\u5b9a\u8868\u7684\u7ec6\u5206\u6570\u636e\u91cf\u548c\u526f\u672c\u6570\u91cf", "originalCommit": "8ff6c3594d5d080f8dad11a63e39f7bd465ed650", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTcyOTcwMw==", "url": "https://github.com/apache/incubator-doris/pull/3676#discussion_r429729703", "bodyText": "Done", "author": "morningman", "createdAt": "2020-05-25T04:48:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTY0NzE2NA=="}], "type": "inlineReview"}, {"oid": "3c0e1518d75be474171ef0c7f10b1c93f21a0b51", "url": "https://github.com/apache/incubator-doris/commit/3c0e1518d75be474171ef0c7f10b1c93f21a0b51", "message": "fix typo", "committedDate": "2020-05-25T04:48:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgxNjU5MA==", "url": "https://github.com/apache/incubator-doris/pull/3676#discussion_r429816590", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This statement is used to show the amount of data, the number of replica and num of rows.\n          \n          \n            \n            This statement is used to show the amount of data, the number of replica and the number of rows.", "author": "wutiangan", "createdAt": "2020-05-25T08:54:49Z", "path": "docs/en/sql-reference/sql-statements/Data Manipulation/SHOW DATA.md", "diffHunk": "@@ -25,22 +25,62 @@ under the License.\n -->\n \n # SHOW DATA\n+\n ## Description\n-This statement is used to show the amount of data and the number of replica\n-Grammar:\n+\n+This statement is used to show the amount of data, the number of replica and num of rows.", "originalCommit": "3c0e1518d75be474171ef0c7f10b1c93f21a0b51", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIyMTY3NQ==", "url": "https://github.com/apache/incubator-doris/pull/3676#discussion_r430221675", "bodyText": "I will modify this is another PR", "author": "morningman", "createdAt": "2020-05-26T07:52:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgxNjU5MA=="}], "type": "inlineReview"}]}