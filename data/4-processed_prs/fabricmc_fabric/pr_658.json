{"pr_number": 658, "pr_title": "1.16 mixin fix for nether biomes", "pr_createdAt": "2020-06-03T11:30:39Z", "pr_url": "https://github.com/FabricMC/fabric/pull/658", "timeline": [{"oid": "294545f2fb2f11c8e0b4ed4df4ded1648ce57c09", "url": "https://github.com/FabricMC/fabric/commit/294545f2fb2f11c8e0b4ed4df4ded1648ce57c09", "message": "20w22a support for nether biomes", "committedDate": "2020-06-03T11:27:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDUwODU2OQ==", "url": "https://github.com/FabricMC/fabric/pull/658#discussion_r434508569", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t@Inject(at = @At(\"RETURN\"), method = \"method_28467\", cancellable = true)\n          \n          \n            \n            \t@Inject(method = \"method_28467\", at = @At(\"RETURN\"), cancellable = true)", "author": "Earthcomputer", "createdAt": "2020-06-03T11:51:05Z", "path": "fabric-biomes-v1/src/main/java/net/fabricmc/fabric/mixin/biome/MixinTheNetherDimension.java", "diffHunk": "@@ -16,27 +16,27 @@\n \n package net.fabricmc.fabric.mixin.biome;\n \n-import java.util.ArrayList;\n-import java.util.List;\n-\n import com.google.common.collect.ImmutableList;\n import com.mojang.datafixers.util.Pair;\n-import org.spongepowered.asm.mixin.Mixin;\n-import org.spongepowered.asm.mixin.injection.At;\n-import org.spongepowered.asm.mixin.injection.ModifyArg;\n-\n+import net.fabricmc.fabric.impl.biome.InternalBiomeData;\n import net.minecraft.world.biome.Biome;\n import net.minecraft.world.biome.source.MultiNoiseBiomeSource;\n+import org.spongepowered.asm.mixin.Mixin;\n+import org.spongepowered.asm.mixin.injection.At;\n+import org.spongepowered.asm.mixin.injection.Inject;\n+import org.spongepowered.asm.mixin.injection.callback.CallbackInfoReturnable;\n \n-import net.fabricmc.fabric.impl.biome.InternalBiomeData;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Optional;\n \n @Mixin(MultiNoiseBiomeSource.class)\n public class MixinTheNetherDimension {\n-\t@ModifyArg(method = \"method_28467\", at = @At(value = \"INVOKE\", target = \"Lnet/minecraft/world/biome/source/MultiNoiseBiomeSource;<init>(JLjava/util/List;Ljava/util/Optional;)V\"))\n-\tprivate static List<Pair<Biome.MixedNoisePoint, Biome>> modifyNetherBiomes(List<Pair<Biome.MixedNoisePoint, Biome>> list) {\n-\t\t// the provided set is immutable, so we construct our own\n-\t\tList<Pair<Biome.MixedNoisePoint, Biome>> newList = new ArrayList<>(list);\n-\t\tnewList.addAll(InternalBiomeData.getNetherBiomes().stream().flatMap((biome) -> biome.streamNoises().map((point) -> Pair.of(point, biome))).collect(ImmutableList.toImmutableList()));\n-\t\treturn newList;\n+\t@Inject(at = @At(\"RETURN\"), method = \"method_28467\", cancellable = true)", "originalCommit": "294545f2fb2f11c8e0b4ed4df4ded1648ce57c09", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDUwOTAxNg==", "url": "https://github.com/FabricMC/fabric/pull/658#discussion_r434509016", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tpublic TestCrimsonForestBiome()\n          \n          \n            \n            \t{\n          \n          \n            \n            \t\tsuper();\n          \n          \n            \n            \t}", "author": "Earthcomputer", "createdAt": "2020-06-03T11:51:59Z", "path": "fabric-biomes-v1/src/testmod/java/net/fabricmc/fabric/test/biome/TestCrimsonForestBiome.java", "diffHunk": "@@ -0,0 +1,11 @@\n+package net.fabricmc.fabric.test.biome;\n+\n+import net.minecraft.world.biome.CrimsonForestBiome;\n+\n+public class TestCrimsonForestBiome extends CrimsonForestBiome\n+{\n+\tpublic TestCrimsonForestBiome()\n+\t{\n+\t\tsuper();\n+\t}", "originalCommit": "294545f2fb2f11c8e0b4ed4df4ded1648ce57c09", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4a3fdb4d7edd5d5871367a17c2c81127ea439d3c", "url": "https://github.com/FabricMC/fabric/commit/4a3fdb4d7edd5d5871367a17c2c81127ea439d3c", "message": "Apply suggestions from code review\n\nCo-authored-by: Joseph Burton <burtonjae@hotmail.co.uk>", "committedDate": "2020-06-03T12:37:26Z", "type": "commit"}, {"oid": "cb7db10794c0557c789692d3e9b00e0dab5f03ee", "url": "https://github.com/FabricMC/fabric/commit/cb7db10794c0557c789692d3e9b00e0dab5f03ee", "message": "Checked style and bumped version", "committedDate": "2020-06-03T19:53:05Z", "type": "commit"}, {"oid": "f424f1af0e5c7eb42babc17cf8d09de1ec1da1a1", "url": "https://github.com/FabricMC/fabric/commit/f424f1af0e5c7eb42babc17cf8d09de1ec1da1a1", "message": "Fixed some testmods", "committedDate": "2020-06-03T20:01:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDgyNjIwMA==", "url": "https://github.com/FabricMC/fabric/pull/658#discussion_r434826200", "bodyText": "This could almost jsut be an inner class in FabricBiomeTest", "author": "modmuss50", "createdAt": "2020-06-03T20:12:31Z", "path": "fabric-biomes-v1/src/testmod/java/net/fabricmc/fabric/test/biome/biome/TestCrimsonForestBiome.java", "diffHunk": "@@ -0,0 +1,22 @@\n+/*\n+ * Copyright (c) 2016, 2017, 2018, 2019 FabricMC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package net.fabricmc.fabric.test.biome.biome;\n+\n+import net.minecraft.world.biome.CrimsonForestBiome;\n+\n+public class TestCrimsonForestBiome extends CrimsonForestBiome {", "originalCommit": "f424f1af0e5c7eb42babc17cf8d09de1ec1da1a1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDgyOTExNQ==", "url": "https://github.com/FabricMC/fabric/pull/658#discussion_r434829115", "bodyText": "Alright, done", "author": "Hugman76", "createdAt": "2020-06-03T20:18:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDgyNjIwMA=="}], "type": "inlineReview"}, {"oid": "4996a2c8dcc7821f487c0c1e9f3a5094e8ba2175", "url": "https://github.com/FabricMC/fabric/commit/4996a2c8dcc7821f487c0c1e9f3a5094e8ba2175", "message": "Made TestCrimsonForestBiome an inner class in FabricBiomeTest", "committedDate": "2020-06-03T20:16:53Z", "type": "commit"}, {"oid": "a2d635637be34a9b4007fecebf7e2d78be0e524b", "url": "https://github.com/FabricMC/fabric/commit/a2d635637be34a9b4007fecebf7e2d78be0e524b", "message": "Merge branch '1.16' into pr/658", "committedDate": "2020-06-04T20:42:30Z", "type": "commit"}]}