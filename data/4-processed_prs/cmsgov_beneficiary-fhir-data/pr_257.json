{"pr_number": 257, "pr_title": "BFD-Insights initial PR", "pr_createdAt": "2020-04-21T17:56:06Z", "pr_url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257", "timeline": [{"oid": "d2cd85d0c206d57a4c7d0f41361db7cff3f19359", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/d2cd85d0c206d57a4c7d0f41361db7cff3f19359", "message": "Initial check-in\n\n- prod-lake\n- groups\n- common modules\n- docs", "committedDate": "2020-04-18T19:37:28Z", "type": "commit"}, {"oid": "fa90b4b8cb679912f8c524489bbae16cc052c0ca", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/fa90b4b8cb679912f8c524489bbae16cc052c0ca", "message": "Add the foodtruck project", "committedDate": "2020-04-20T14:03:47Z", "type": "commit"}, {"oid": "339d121c9509343b87421e938c168729fb0c8745", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/339d121c9509343b87421e938c168729fb0c8745", "message": "Update to deploy firehose, database, and table\n\n- foodtruck\n- new database/table/ organizatoin", "committedDate": "2020-04-21T13:58:39Z", "type": "commit"}, {"oid": "940470357f293d1f313a1ec7e7cffb046e7b3675", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/940470357f293d1f313a1ec7e7cffb046e7b3675", "message": "Small improvments\n\n- timestamp format in purchases\n- Analysts permissions\n- Documentation in organization", "committedDate": "2020-04-21T17:54:19Z", "type": "commit"}, {"oid": "2f71b9bed3543225c8f6b733bccd9ae9783d6442", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/2f71b9bed3543225c8f6b733bccd9ae9783d6442", "message": "Fixup ignores", "committedDate": "2020-04-21T18:04:26Z", "type": "commit"}, {"oid": "86f185fac1f011eb732d34b9615e0753e73d97da", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/86f185fac1f011eb732d34b9615e0753e73d97da", "message": "Remove PipLock", "committedDate": "2020-04-21T18:07:25Z", "type": "commit"}, {"oid": "366e05fd4360196843780026a152482d656a7158", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/366e05fd4360196843780026a152482d656a7158", "message": "Update documentation", "committedDate": "2020-04-21T19:13:53Z", "type": "commit"}, {"oid": "058ad1b2d6820587fad5b1ca93dfb0dc285fdd5e", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/058ad1b2d6820587fad5b1ca93dfb0dc285fdd5e", "message": "Add dataflow diagram", "committedDate": "2020-04-21T19:37:48Z", "type": "commit"}, {"oid": "7376dcec3910249e0c6558c447044a5db3e7f07e", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/7376dcec3910249e0c6558c447044a5db3e7f07e", "message": "Remove the unecessary KMS policy", "committedDate": "2020-04-21T20:06:58Z", "type": "commit"}, {"oid": "f6ce557e4f95f4a629a281aca8ee56534fc2778a", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/f6ce557e4f95f4a629a281aca8ee56534fc2778a", "message": "Made groups for the backend.tf convention", "committedDate": "2020-04-21T20:09:26Z", "type": "commit"}, {"oid": "7739273726fea75c8321a02160b9f06c49bef1bd", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/7739273726fea75c8321a02160b9f06c49bef1bd", "message": "Fix broken link", "committedDate": "2020-04-21T20:10:33Z", "type": "commit"}, {"oid": "df9d28a0e69eeb0228971e8280b50585fac41049", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/df9d28a0e69eeb0228971e8280b50585fac41049", "message": "Update BFD-Insights-Workflow.png", "committedDate": "2020-04-22T12:03:44Z", "type": "commit"}, {"oid": "8a0bc82b6d7e477362c98726ae58d110b89e39f1", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/8a0bc82b6d7e477362c98726ae58d110b89e39f1", "message": "Add AB2D project", "committedDate": "2020-04-22T21:27:34Z", "type": "commit"}, {"oid": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/2ff98ba0b63ad5c647bd9755d8f18303e5370c92", "message": "Added the Authors role\n\n- Sarah Tully as an author\n- Adjusted permissions for readers and authors", "committedDate": "2020-04-24T16:11:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgzNTU5OQ==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414835599", "bodyText": "There was some discussion here as to whether the pipfile standard was being maintained: #187", "author": "njdister", "createdAt": "2020-04-24T20:12:47Z", "path": "insights/scripts/foodtruck/Pipfile", "diffHunk": "@@ -0,0 +1,13 @@\n+[[source]]\n+name = \"pypi\"\n+url = \"https://pypi.org/simple\"\n+verify_ssl = true\n+\n+[dev-packages]\n+pylint = \"*\"\n+\n+[packages]\n+boto3 = \"*\"\n+\n+[requires]\n+python_version = \"3.8\"", "originalCommit": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4Mjg2OQ==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415882869", "bodyText": "Interesting. I've been using pipenv because it is similar to NPM. Nevertheless, I'll go to requirements.txt.", "author": "RickHawesUSDS", "createdAt": "2020-04-27T14:54:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgzNTU5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk3NTkzNw==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415975937", "bodyText": "Added a requirements.txt file.", "author": "RickHawesUSDS", "createdAt": "2020-04-27T16:45:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgzNTU5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0MTA0NA==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414841044", "bodyText": "Shouldn't this be a resource rather than a data source (since these groups don't currently exist) or am I misunderstanding how this works?", "author": "njdister", "createdAt": "2020-04-24T20:23:30Z", "path": "insights/terraform/groups/main.tf", "diffHunk": "@@ -0,0 +1,59 @@\n+locals {\n+  # Add new group members here\n+  member_map  = {\n+    analysts  = [\"HWRI\", \"SKKH\"]\n+    authors   = [\"TUVE\"]\n+    readers   = []\n+  }\n+}\n+\n+# Add to the IAM groups\n+\n+data \"aws_iam_group\" \"groups\" {", "originalCommit": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0NzI0MA==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414847240", "bodyText": "Nevermind, it took me slightly longer to reason that groups and group memberships were managed in separate places", "author": "njdister", "createdAt": "2020-04-24T20:35:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0MTA0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODU1MQ==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414848551", "bodyText": "Any reason to go with AES over KMS?", "author": "njdister", "createdAt": "2020-04-24T20:37:47Z", "path": "insights/terraform/modules/bucket/main.tf", "diffHunk": "@@ -0,0 +1,39 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+resource \"aws_s3_bucket\" \"main\" {\n+  bucket    = \"bfd-insights-${var.sensitivity}-${data.aws_caller_identity.current.account_id}\"\n+  acl       = \"private\"\n+  tags      = merge({sensitivity = var.sensitivity}, var.tags)\n+\n+  server_side_encryption_configuration {\n+    rule {\n+      apply_server_side_encryption_by_default {\n+        sse_algorithm     = \"AES256\"", "originalCommit": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk3OTAyMQ==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415979021", "bodyText": "This is a judgment call. AES uses the KMS, so fundamentally the security offered is the same. AWS does rotate keys more frequently than us, so that is an advantage. From a configuration point of view, it is difficult to get all the components in the workflow to use a CMK stored in KMS. I couldn't get it to work on with Athena, for example. Every BFD partner will need access to PutObjects into this bucket, so the cross-account permissions will are already complex without the complexity of KMS permissions.", "author": "RickHawesUSDS", "createdAt": "2020-04-27T16:49:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODIxNDI1NA==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r418214254", "bodyText": "Look at the new changes. Switched to a CMK.", "author": "RickHawesUSDS", "createdAt": "2020-04-30T18:41:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODU1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MjY0MA==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414852640", "bodyText": "The module takes in a sensitivity var, but moderate is hardcoded here.  Is this intended?", "author": "njdister", "createdAt": "2020-04-24T20:45:42Z", "path": "insights/terraform/modules/database/main.tf", "diffHunk": "@@ -0,0 +1,37 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+data \"aws_s3_bucket\" \"moderate_bucket\" {\n+  bucket      = \"bfd-insights-moderate-${data.aws_caller_identity.current.account_id}\"", "originalCommit": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk3OTU5Nw==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415979597", "bodyText": "Yes. We may refactor when a second bucket is introduced, but that is few weeks away.", "author": "RickHawesUSDS", "createdAt": "2020-04-27T16:50:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MjY0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MzIzNg==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414853236", "bodyText": "The module takes in a sensitivity var, but moderate is hardcoded here. Is this intended?", "author": "njdister", "createdAt": "2020-04-24T20:46:37Z", "path": "insights/terraform/modules/firehose/main.tf", "diffHunk": "@@ -0,0 +1,63 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+data \"aws_s3_bucket\" \"moderate_bucket\" {\n+  bucket      = \"bfd-insights-moderate-${data.aws_caller_identity.current.account_id}\"", "originalCommit": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MzgwOA==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r414853808", "bodyText": "The module takes in a sensitivity var, but moderate is hardcoded here. Is this intended?", "author": "njdister", "createdAt": "2020-04-24T20:47:57Z", "path": "insights/terraform/modules/table/main.tf", "diffHunk": "@@ -0,0 +1,59 @@\n+data \"aws_caller_identity\" \"current\" {}\n+\n+data \"aws_s3_bucket\" \"moderate_bucket\" {\n+  bucket      = \"bfd-insights-moderate-${data.aws_caller_identity.current.account_id}\"", "originalCommit": "2ff98ba0b63ad5c647bd9755d8f18303e5370c92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk3OTg4NA==", "url": "https://github.com/CMSgov/beneficiary-fhir-data/pull/257#discussion_r415979884", "bodyText": "See previous answer", "author": "RickHawesUSDS", "createdAt": "2020-04-27T16:50:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MzgwOA=="}], "type": "inlineReview"}, {"oid": "e966052a20d9cf5e22e381cb56af3e47fb13cefc", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/e966052a20d9cf5e22e381cb56af3e47fb13cefc", "message": "Replace PipFile with Requirements.txt", "committedDate": "2020-04-27T16:45:04Z", "type": "commit"}, {"oid": "247c0a50af966f9deec1a6c47145204f5698fd78", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/247c0a50af966f9deec1a6c47145204f5698fd78", "message": "Add BFD and Partner Account boundaries", "committedDate": "2020-04-28T16:34:41Z", "type": "commit"}, {"oid": "3a36731aed9ec0dcf0ef7c74e5886fa96c9c42be", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/3a36731aed9ec0dcf0ef7c74e5886fa96c9c42be", "message": "Update security doc again", "committedDate": "2020-04-28T18:57:57Z", "type": "commit"}, {"oid": "99cbce85a58a5b2bbf4f9bd33137dd23a530812d", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/99cbce85a58a5b2bbf4f9bd33137dd23a530812d", "message": "Refactor to have independent S3 bucket\n\n- one bucket per project\n- group and cross-account policies per bucket\n- Update of documentation", "committedDate": "2020-04-29T01:00:44Z", "type": "commit"}, {"oid": "e58997b855c8f3ac5d5973086e670cc732642bf7", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/e58997b855c8f3ac5d5973086e670cc732642bf7", "message": "Enable GZIP firehose delivery", "committedDate": "2020-04-29T10:43:30Z", "type": "commit"}, {"oid": "543e6c473f56bf1d0afc33c16a95c11002a13a0c", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/543e6c473f56bf1d0afc33c16a95c11002a13a0c", "message": "Switch to SSE-KMS S3 encryption", "committedDate": "2020-04-30T18:04:16Z", "type": "commit"}, {"oid": "cc518eebb7984d8e16e4c65a161fdfed70a1dfc7", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/cc518eebb7984d8e16e4c65a161fdfed70a1dfc7", "message": "AB2D Updated to use CMK", "committedDate": "2020-04-30T19:21:45Z", "type": "commit"}, {"oid": "f60fdd856d734ab319a180f2d118cfad18e5fef7", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/f60fdd856d734ab319a180f2d118cfad18e5fef7", "message": "Workgroup module", "committedDate": "2020-05-01T12:43:14Z", "type": "commit"}, {"oid": "eb50c67a0b2639e6dfb53aac49efa50386f96187", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/eb50c67a0b2639e6dfb53aac49efa50386f96187", "message": "CMK policy improvements", "committedDate": "2020-05-01T12:43:32Z", "type": "commit"}, {"oid": "d547288c770547ac4122676b541f7dab2fdaaac6", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/d547288c770547ac4122676b541f7dab2fdaaac6", "message": "Lessons Learned doc", "committedDate": "2020-05-01T12:43:47Z", "type": "commit"}, {"oid": "2916f2d89b35dba09ce5de9a0b5e5a0885a697cf", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/2916f2d89b35dba09ce5de9a0b5e5a0885a697cf", "message": "Clean up for AB2D onboarding", "committedDate": "2020-05-01T15:31:19Z", "type": "commit"}, {"oid": "0731d62dd9f97568974feedc14f915af42517926", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/0731d62dd9f97568974feedc14f915af42517926", "message": "Better comments in workflow doc", "committedDate": "2020-05-06T13:31:43Z", "type": "commit"}, {"oid": "7c82bfec14a3ac18a6fe765915c732567c03c0c4", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/7c82bfec14a3ac18a6fe765915c732567c03c0c4", "message": "Added 'Z' to timestamps", "committedDate": "2020-05-06T21:35:34Z", "type": "commit"}, {"oid": "dc0e3a5f3e434d457214f19362a574b95d036f9d", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/dc0e3a5f3e434d457214f19362a574b95d036f9d", "message": "AB2D tables and roles", "committedDate": "2020-05-06T21:35:51Z", "type": "commit"}, {"oid": "378fd021b10daf2b40d6a86bbb310496a02cc9e9", "url": "https://github.com/CMSgov/beneficiary-fhir-data/commit/378fd021b10daf2b40d6a86bbb310496a02cc9e9", "message": "More Diagrams", "committedDate": "2020-05-06T22:51:33Z", "type": "commit"}]}