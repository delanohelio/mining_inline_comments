{"pr_number": 4127, "pr_title": "Block (un)loader major improvements", "pr_createdAt": "2020-12-26T09:32:03Z", "pr_url": "https://github.com/Anuken/Mindustry/pull/4127", "timeline": [{"oid": "d06b6e5aca1a33d00eae81bad712d9bd35e1432f", "url": "https://github.com/Anuken/Mindustry/commit/d06b6e5aca1a33d00eae81bad712d9bd35e1432f", "message": "make it consider consVaild", "committedDate": "2020-12-26T09:12:54Z", "type": "commit"}, {"oid": "0403a94726333eae48044ac585d1394fde099121", "url": "https://github.com/Anuken/Mindustry/commit/0403a94726333eae48044ac585d1394fde099121", "message": "make this too", "committedDate": "2020-12-26T09:13:54Z", "type": "commit"}, {"oid": "d6446aebabeb28b3b7c26ce644657658eac4400c", "url": "https://github.com/Anuken/Mindustry/commit/d6446aebabeb28b3b7c26ce644657658eac4400c", "message": "pattern style and max block size", "committedDate": "2020-12-26T09:27:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAwMDU5Mg==", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549000592", "bodyText": "Instead of checking for consValid(), you should take efficiency into account. 50% power should mean 50% unload speed.", "author": "Anuken", "createdAt": "2020-12-26T14:50:31Z", "path": "core/src/mindustry/world/blocks/experimental/BlockLoader.java", "diffHunk": "@@ -99,7 +100,7 @@ public void updateTile(){\n \n                 //load up items\n                 if(payload.block().hasItems && items.any()){\n-                    if(timer(timerLoad, loadTime)){\n+                    if(consValid() && timer(timerLoad, loadTime)){", "originalCommit": "d6446aebabeb28b3b7c26ce644657658eac4400c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAwOTE2Ng==", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549009166", "bodyText": "did a hacky math, at least it should work.", "author": "sk7725", "createdAt": "2020-12-26T16:36:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAwMDU5Mg=="}], "type": "inlineReview"}, {"oid": "25322870f78f4ec3f9f10006e28260a3a05d8818", "url": "https://github.com/Anuken/Mindustry/commit/25322870f78f4ec3f9f10006e28260a3a05d8818", "message": "Is there a better way to do this?", "committedDate": "2020-12-26T16:34:29Z", "type": "commit"}, {"oid": "c4a6bf07466a49552196febe0f809b572b3f548d", "url": "https://github.com/Anuken/Mindustry/commit/c4a6bf07466a49552196febe0f809b572b3f548d", "message": "Update BlockUnloader.java", "committedDate": "2020-12-26T16:34:48Z", "type": "commit"}, {"oid": "cda016fedecaba8172549a0680383cb2dc539262", "url": "https://github.com/Anuken/Mindustry/commit/cda016fedecaba8172549a0680383cb2dc539262", "message": "do not the /0", "committedDate": "2020-12-26T16:37:47Z", "type": "commit"}, {"oid": "dde6aca9fcb98a15b2be855912033c617cf2eade", "url": "https://github.com/Anuken/Mindustry/commit/dde6aca9fcb98a15b2be855912033c617cf2eade", "message": "prevent /0", "committedDate": "2020-12-26T16:38:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMDIzMA==", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549010230", "bodyText": "consValid() check seems redundant when you're already checking for efficiency.", "author": "Anuken", "createdAt": "2020-12-26T16:49:17Z", "path": "core/src/mindustry/world/blocks/experimental/BlockLoader.java", "diffHunk": "@@ -99,7 +100,7 @@ public void updateTile(){\n \n                 //load up items\n                 if(payload.block().hasItems && items.any()){\n-                    if(timer(timerLoad, loadTime)){\n+                    if(consValid() && efficiency() > 0.01f && timer(timerLoad, loadTime / efficiency())){", "originalCommit": "dde6aca9fcb98a15b2be855912033c617cf2eade", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA0NTk4NA==", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549045984", "bodyText": "enabled check, or is the enabled also already counted in the efficiency()?\nLet me try it and see.", "author": "sk7725", "createdAt": "2020-12-27T00:21:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMDIzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTA1MDIzOQ==", "url": "https://github.com/Anuken/Mindustry/pull/4127#discussion_r549050239", "bodyText": "it works", "author": "sk7725", "createdAt": "2020-12-27T01:21:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTAxMDIzMA=="}], "type": "inlineReview"}, {"oid": "da6fcc0e58b859141b3a2a098907870462dfdfaa", "url": "https://github.com/Anuken/Mindustry/commit/da6fcc0e58b859141b3a2a098907870462dfdfaa", "message": "test 1", "committedDate": "2020-12-27T00:22:48Z", "type": "commit"}, {"oid": "9953ece6cf82483223ca93a75b7de9d3c9734aca", "url": "https://github.com/Anuken/Mindustry/commit/9953ece6cf82483223ca93a75b7de9d3c9734aca", "message": "yup it works for enabled", "committedDate": "2020-12-27T01:21:07Z", "type": "commit"}]}