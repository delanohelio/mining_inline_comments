{"pr_number": 1015, "pr_title": "trigger unchecking all selected items after running a batch action", "pr_createdAt": "2020-06-15T12:14:43Z", "pr_url": "https://github.com/UNC-Libraries/box-c/pull/1015", "timeline": [{"oid": "747cfd4004e9a53c7dd8822b8433b325c1f4fa4b", "url": "https://github.com/UNC-Libraries/box-c/commit/747cfd4004e9a53c7dd8822b8433b325c1f4fa4b", "message": "trigger unchecking all selected items when running a batch action", "committedDate": "2020-06-12T18:08:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkyMDAwMQ==", "url": "https://github.com/UNC-Libraries/box-c/pull/1015#discussion_r440920001", "bodyText": "Why does the behavior of the select_all button need to be redefined here? It is already defined here to do the exact same thing:\nhttps://github.com/UNC-Libraries/Carolina-Digital-Repository/blob/fcrepo4/static/js/admin/src/ResultTableView.js#L397", "author": "bbpennel", "createdAt": "2020-06-16T15:00:22Z", "path": "static/js/admin/src/action/AjaxCallbackAction.js", "diffHunk": "@@ -125,9 +125,21 @@ define('AjaxCallbackAction', [ 'jquery', 'jquery-ui', 'RemoteStateChangeMonitor'\n \t\t\t\t\top.context.target.setState(\"idle\");\n \t\t\t\top.complete(data);\n \t\t\t}\n-\t\t}).fail(function(data) {\n-\t\t\top.alertHandler.alertHandler('error', textStatus + \", \" + error);\n-\t\t\tconsole.error(textStatus, error);\n+\n+\t\t\t// Trigger unchecking all checked objects when action completes\n+\t\t\t$(\".select_all\").trigger('click', function(){", "originalCommit": "747cfd4004e9a53c7dd8822b8433b325c1f4fa4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk2NTU3OQ==", "url": "https://github.com/UNC-Libraries/box-c/pull/1015#discussion_r440965579", "bodyText": "In the init method it's only bound to the select_all checkbox. So, the user needs to manually click the checkbox for it to run. Maybe we can break it out into a helper?", "author": "lfarrell", "createdAt": "2020-06-16T15:59:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkyMDAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk4NTI2Mw==", "url": "https://github.com/UNC-Libraries/box-c/pull/1015#discussion_r440985263", "bodyText": "Not sure I follow, its being called on the same selector in both cases, $(\".select_all\"). Could we update ResultTableView to cover both cases? It'd be nice to be able to trigger an \"unselect all\" event/action without having to go through hitting the checkbox, but that may not be practical\nI guess this version does have one difference, which is var checkbox = $(this).children(\"input\").prop(\"checked\", false); I'm kind of unclear on what that's doing right before toggling the checkbox", "author": "bbpennel", "createdAt": "2020-06-16T16:30:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkyMDAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA2Mjk2MA==", "url": "https://github.com/UNC-Libraries/box-c/pull/1015#discussion_r441062960", "bodyText": "I reduced it a bit. resultObjects and and selectionUpdated only seem to be in scope when wrapped in an event.", "author": "lfarrell", "createdAt": "2020-06-16T18:36:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkyMDAwMQ=="}], "type": "inlineReview"}, {"oid": "eac890c3b3749c6552ff17304aa17b52c908c214", "url": "https://github.com/UNC-Libraries/box-c/commit/eac890c3b3749c6552ff17304aa17b52c908c214", "message": "Remove unneeded lines", "committedDate": "2020-06-16T18:32:37Z", "type": "commit"}]}