{"pr_number": 5007, "pr_title": "Make git repository support file: URI prefix for clone-directory and private-key-path", "pr_createdAt": "2020-12-06T02:54:18Z", "pr_url": "https://github.com/apereo/cas/pull/5007", "timeline": [{"oid": "81ec7df401d1673bf9c2cf2d0b022817e18d95ea", "url": "https://github.com/apereo/cas/commit/81ec7df401d1673bf9c2cf2d0b022817e18d95ea", "message": "support resource for git repo", "committedDate": "2020-12-04T14:15:13Z", "type": "commit"}, {"oid": "899b425220d1a3e61566bb91057b194d9ab0c907", "url": "https://github.com/apereo/cas/commit/899b425220d1a3e61566bb91057b194d9ab0c907", "message": "support resource for git repo", "committedDate": "2020-12-05T18:02:51Z", "type": "commit"}, {"oid": "717fe135025edc61cbbe4aa1412f06596b958d88", "url": "https://github.com/apereo/cas/commit/717fe135025edc61cbbe4aa1412f06596b958d88", "message": "support resource for git repo", "committedDate": "2020-12-06T02:32:08Z", "type": "commit"}, {"oid": "5a45f558f776bf238baa56a79646b9539f891279", "url": "https://github.com/apereo/cas/commit/5a45f558f776bf238baa56a79646b9539f891279", "message": "support resource for git repo", "committedDate": "2020-12-06T04:07:51Z", "type": "commit"}, {"oid": "c0c664be583f2ba1536f06881876c463303b562e", "url": "https://github.com/apereo/cas/commit/c0c664be583f2ba1536f06881876c463303b562e", "message": "checkstyle", "committedDate": "2020-12-06T04:11:17Z", "type": "commit"}, {"oid": "07eab1c2e81f8bdb0c05e62d4a000076c654af17", "url": "https://github.com/apereo/cas/commit/07eab1c2e81f8bdb0c05e62d4a000076c654af17", "message": "make Resource transient", "committedDate": "2020-12-06T04:13:46Z", "type": "commit"}, {"oid": "81ef066c8bbc7b0eaa87ba76ef425e2565702caf", "url": "https://github.com/apereo/cas/commit/81ef066c8bbc7b0eaa87ba76ef425e2565702caf", "message": "allow turning off strict host checking", "committedDate": "2020-12-06T06:08:38Z", "type": "commit"}, {"oid": "d953421f165d448aed08ab8d4702d0b0c9d72722", "url": "https://github.com/apereo/cas/commit/d953421f165d448aed08ab8d4702d0b0c9d72722", "message": "uss https for clone", "committedDate": "2020-12-06T16:21:36Z", "type": "commit"}, {"oid": "bd1dd2c40b60355648a1eef1cc4f3a228a53c168", "url": "https://github.com/apereo/cas/commit/bd1dd2c40b60355648a1eef1cc4f3a228a53c168", "message": "uss https for clone", "committedDate": "2020-12-06T16:27:59Z", "type": "commit"}, {"oid": "26c949bc246fabe23c71ca82b3028ea93fe45ec9", "url": "https://github.com/apereo/cas/commit/26c949bc246fabe23c71ca82b3028ea93fe45ec9", "message": "add comment", "committedDate": "2020-12-06T16:32:47Z", "type": "commit"}, {"oid": "64697cbaf187cc4737e56a97b33243ed9727c71e", "url": "https://github.com/apereo/cas/commit/64697cbaf187cc4737e56a97b33243ed9727c71e", "message": "allow privatekeypath to be resource too", "committedDate": "2020-12-06T16:58:09Z", "type": "commit"}, {"oid": "b7503bfc823e5da0749b2f9b1e211db166a19996", "url": "https://github.com/apereo/cas/commit/b7503bfc823e5da0749b2f9b1e211db166a19996", "message": "make private key path transient", "committedDate": "2020-12-06T19:06:05Z", "type": "commit"}, {"oid": "29b8750316e8f160242305bdf84b4a8433fe7c34", "url": "https://github.com/apereo/cas/commit/29b8750316e8f160242305bdf84b4a8433fe7c34", "message": "increase coverage and support saml repos that end in .git", "committedDate": "2020-12-08T04:21:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI0ODAwOA==", "url": "https://github.com/apereo/cas/pull/5007#discussion_r538248008", "bodyText": "use SpringResourceProperties", "author": "mmoayyed", "createdAt": "2020-12-08T11:06:54Z", "path": "api/cas-server-core-api-configuration-model/src/main/java/org/apereo/cas/configuration/model/support/git/services/BaseGitProperties.java", "diffHunk": "@@ -62,14 +64,16 @@\n     private boolean signCommits;\n \n     /**\n-     * Path to the SSH private key identity.\n+     * Password for the SSH private key.\n      */\n     private String privateKeyPassphrase;\n \n     /**\n-     * Password for the SSH private key.\n+     * Path to the SSH private key identity.\n+     * Must be a resource that can resolve to an absolute file on disk due to Jsch library needing String path.\n+     * Classpath resource would work if file on disk rather than inside archive.\n      */\n-    private File privateKeyPath;\n+    private transient Resource privateKeyPath;", "originalCommit": "29b8750316e8f160242305bdf84b4a8433fe7c34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQwMzY4NA==", "url": "https://github.com/apereo/cas/pull/5007#discussion_r538403684", "bodyText": "When using SpringResourceProperties does it mean the property has to end in .location?", "author": "hdeadman", "createdAt": "2020-12-08T14:00:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI0ODAwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI0ODE3Mg==", "url": "https://github.com/apereo/cas/pull/5007#discussion_r538248172", "bodyText": "use SpringResourceProperties; initialize the ctor if possible.", "author": "mmoayyed", "createdAt": "2020-12-08T11:07:09Z", "path": "api/cas-server-core-api-configuration-model/src/main/java/org/apereo/cas/configuration/model/support/git/services/BaseGitProperties.java", "diffHunk": "@@ -86,5 +96,5 @@\n     /**\n      * Directory into which the repository would be cloned.\n      */\n-    private File cloneDirectory = new File(FileUtils.getTempDirectory(), \"cas-git-clone\");\n+    private transient Resource cloneDirectory = new FileSystemResource(new File(FileUtils.getTempDirectory(), \"cas-git-clone\"));", "originalCommit": "29b8750316e8f160242305bdf84b4a8433fe7c34", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI0ODg0NA==", "url": "https://github.com/apereo/cas/pull/5007#discussion_r538248844", "bodyText": "Move the annotation next to the method name, with comments above it.", "author": "mmoayyed", "createdAt": "2020-12-08T11:08:14Z", "path": "support/cas-server-support-git-core/src/test/java/org/apereo/cas/git/GitRepositoryBuilderTests.java", "diffHunk": "@@ -32,16 +34,50 @@\n     private CasConfigurationProperties casProperties;\n \n     @Test", "originalCommit": "29b8750316e8f160242305bdf84b4a8433fe7c34", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "57676185880f8620e2c97948039964115ae64e8c", "url": "https://github.com/apereo/cas/commit/57676185880f8620e2c97948039964115ae64e8c", "message": "change properties to SpringResourceProperties", "committedDate": "2020-12-09T02:55:58Z", "type": "commit"}, {"oid": "a36cd3c5dc9b9237e13e3121f529ea077b787bdc", "url": "https://github.com/apereo/cas/commit/a36cd3c5dc9b9237e13e3121f529ea077b787bdc", "message": "change properties to SpringResourceProperties", "committedDate": "2020-12-09T03:19:36Z", "type": "commit"}, {"oid": "15f4306d5dcc2ac66032add0602c4f933c5416b1", "url": "https://github.com/apereo/cas/commit/15f4306d5dcc2ac66032add0602c4f933c5416b1", "message": "fix test", "committedDate": "2020-12-10T01:26:08Z", "type": "commit"}, {"oid": "e9eefaf0e77b0d98b2c692b3307bb876b2955029", "url": "https://github.com/apereo/cas/commit/e9eefaf0e77b0d98b2c692b3307bb876b2955029", "message": "fix test", "committedDate": "2020-12-10T05:03:03Z", "type": "commit"}, {"oid": "c302c9762417e92ce5aca00e6e69d85c1082fe73", "url": "https://github.com/apereo/cas/commit/c302c9762417e92ce5aca00e6e69d85c1082fe73", "message": "fix test", "committedDate": "2020-12-10T21:02:32Z", "type": "commit"}, {"oid": "0c952253225de8021a6f5dfa60c3acd127de2bfb", "url": "https://github.com/apereo/cas/commit/0c952253225de8021a6f5dfa60c3acd127de2bfb", "message": "update tomcat to 9.0.41 b/c CI failing to download", "committedDate": "2020-12-11T01:53:48Z", "type": "commit"}, {"oid": "20e92e9f80995635d85874cd33750c365fe1e732", "url": "https://github.com/apereo/cas/commit/20e92e9f80995635d85874cd33750c365fe1e732", "message": "remove extra delete directory", "committedDate": "2020-12-12T01:33:43Z", "type": "commit"}]}