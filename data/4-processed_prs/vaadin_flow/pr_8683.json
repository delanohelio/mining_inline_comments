{"pr_number": 8683, "pr_title": "Clear client-side validation and visits on .reset() and .clear()", "pr_createdAt": "2020-07-02T22:16:36Z", "pr_url": "https://github.com/vaadin/flow/pull/8683", "timeline": [{"oid": "1b7faa7463d92b15f0ba89a2cfb3bcbd39e294d6", "url": "https://github.com/vaadin/flow/commit/1b7faa7463d92b15f0ba89a2cfb3bcbd39e294d6", "message": "Clear client-side validation and visits on .reset() and .clear()", "committedDate": "2020-07-02T22:15:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTM5MTg1OQ==", "url": "https://github.com/vaadin/flow/pull/8683#discussion_r449391859", "bodyText": "It looks like the defaultValue setter is going to be called twice: once at this.defaultValue = this[emptyValueSymbol], and then second time at this.reset() -> this.defaultValue = this[defaultValueSymbol]. Is this intentional?", "author": "vlukashov", "createdAt": "2020-07-03T06:05:18Z", "path": "flow-client/src/main/resources/META-INF/resources/frontend/form/Binder.ts", "diffHunk": "@@ -78,15 +83,14 @@ export class Binder<T, M extends AbstractModel<T>> extends BinderNode<T, M> {\n     this.updateValidation();\n   }\n \n-  reset(defaultValue?: T) {\n-    if (defaultValue !== undefined) {\n-      this.defaultValue = defaultValue;\n-    }\n+  reset(defaultValue: T = this[defaultValueSymbol]) {\n+    this.defaultValue = defaultValue;\n     this.value = this.defaultValue;\n   }\n \n   clear() {\n-    this.value = this[emptyValueSymbol];\n+    this.defaultValue = this[emptyValueSymbol];\n+    this.reset();", "originalCommit": "1b7faa7463d92b15f0ba89a2cfb3bcbd39e294d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTUyMDI5Nw==", "url": "https://github.com/vaadin/flow/pull/8683#discussion_r449520297", "bodyText": "Not intentional, removed.", "author": "platosha", "createdAt": "2020-07-03T10:52:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTM5MTg1OQ=="}], "type": "inlineReview"}, {"oid": "86989289c9d80ea65b008df7ec4786d52b33b70c", "url": "https://github.com/vaadin/flow/commit/86989289c9d80ea65b008df7ec4786d52b33b70c", "message": "Prevent extra updates on .clear()", "committedDate": "2020-07-03T10:19:01Z", "type": "commit"}, {"oid": "42b46dadfdf4b261c2db4161d2dfe7ce6c216d0f", "url": "https://github.com/vaadin/flow/commit/42b46dadfdf4b261c2db4161d2dfe7ce6c216d0f", "message": "Remove extra defaultValue setter call on clear()", "committedDate": "2020-07-03T10:52:33Z", "type": "commit"}]}