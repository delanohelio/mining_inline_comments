{"pr_number": 8772, "pr_title": "Use fake iframe element to check reload result and replace on success.", "pr_createdAt": "2020-07-23T12:38:26Z", "pr_url": "https://github.com/vaadin/flow/pull/8772", "timeline": [{"oid": "2b3d58369435b74cf669f31f1b91f2b7afdd0a77", "url": "https://github.com/vaadin/flow/commit/2b3d58369435b74cf669f31f1b91f2b7afdd0a77", "message": "Use fake iframe element to check reload result and replace on success.\n\nAvoid reload() method whose usage may lead to showing a blank page\nbecause server is not yet restarted. Instead use a fake iframe element\ninside gizmo which refers to the same URL. Its window may be reloaded\nsafely and the result can be checked before applying it to the main\ndocument. If reload was successful (page is initialized with Vaadin JS)\nthen replace the document content  with the content of iframe.\n\nFixes #8728", "committedDate": "2020-07-23T12:38:27Z", "type": "commit"}, {"oid": "e212e9bd97c9f10d3df94e554a8b6c7c35687fbe", "url": "https://github.com/vaadin/flow/commit/e212e9bd97c9f10d3df94e554a8b6c7c35687fbe", "message": "Make code works also for V14 bootstrap mode", "committedDate": "2020-07-24T08:44:48Z", "type": "commit"}, {"oid": "e212e9bd97c9f10d3df94e554a8b6c7c35687fbe", "url": "https://github.com/vaadin/flow/commit/e212e9bd97c9f10d3df94e554a8b6c7c35687fbe", "message": "Make code works also for V14 bootstrap mode", "committedDate": "2020-07-24T08:44:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk0OTIxNw==", "url": "https://github.com/vaadin/flow/pull/8772#discussion_r459949217", "bodyText": "This looks wrong.", "author": "joheriks", "createdAt": "2020-07-24T09:32:07Z", "path": "flow-client/src/main/resources/META-INF/resources/frontend/VaadinDevmodeGizmo.js", "diffHunk": "@@ -974,7 +1029,7 @@ class VaadinDevmodeGizmo extends LitElement {\n               <input id=\"toggle\" type=\"checkbox\"\n                   ?disabled=${this.status === VaadinDevmodeGizmo.UNAVAILABLE || this.status === VaadinDevmodeGizmo.ERROR}\n                   ?checked=\"${this.status === VaadinDevmodeGizmo.ACTIVE}\"\n-                  @change=${e => this.setActive(e.target.checked)}/>\n+                  @ch   ange=${e => this.setActive(e.target.checked)}/>", "originalCommit": "e212e9bd97c9f10d3df94e554a8b6c7c35687fbe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1c1e486f04c6894884240692e6b3c63469d538eb", "url": "https://github.com/vaadin/flow/commit/1c1e486f04c6894884240692e6b3c63469d538eb", "message": "Revert back unexpected change", "committedDate": "2020-07-24T09:34:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk0OTgxMw==", "url": "https://github.com/vaadin/flow/pull/8772#discussion_r459949813", "bodyText": "Not used?", "author": "joheriks", "createdAt": "2020-07-24T09:33:33Z", "path": "flow-client/src/main/resources/META-INF/resources/frontend/VaadinDevmodeGizmo.js", "diffHunk": "@@ -551,7 +551,8 @@ class VaadinDevmodeGizmo extends LitElement {\n       status: {type: String},\n       reloadConnectionBaseUri: {type: String},\n       liveReloadBackend: {type: String},\n-      springBootDevToolsPort: {type: Number}\n+      springBootDevToolsPort: {type: Number},\n+      reloadURL: {type: String}", "originalCommit": "e212e9bd97c9f10d3df94e554a8b6c7c35687fbe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk1MTE2OQ==", "url": "https://github.com/vaadin/flow/pull/8772#discussion_r459951169", "bodyText": "Looks like superflous \" there at position 107.", "author": "joheriks", "createdAt": "2020-07-24T09:36:36Z", "path": "flow-client/src/main/resources/META-INF/resources/frontend/VaadinDevmodeGizmo.js", "diffHunk": "@@ -1004,7 +1059,8 @@ class VaadinDevmodeGizmo extends LitElement {\n       ? html`<span class=\"status-description\">${this.splashMessage}</span></div>`\n       : html`<span class=\"status-description\">Live reload ${this.status} </span><span class=\"ahreflike\">Details</span></div>`\n     }\n-    </div>`;\n+    </div>\n+    <iframe style='display: none;' width='0px' height='0px' src='${window.location.href}' id='reload-frame'\"></iframe>`;", "originalCommit": "e212e9bd97c9f10d3df94e554a8b6c7c35687fbe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk1OTQ1NQ==", "url": "https://github.com/vaadin/flow/pull/8772#discussion_r459959455", "bodyText": "Thanks.", "author": "denis-anisimov", "createdAt": "2020-07-24T09:54:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk1MTE2OQ=="}], "type": "inlineReview"}, {"oid": "f08ea31f515d75ce4f4fa8829bc2f5f656dc2336", "url": "https://github.com/vaadin/flow/commit/f08ea31f515d75ce4f4fa8829bc2f5f656dc2336", "message": "Correct typos and forgotten code.", "committedDate": "2020-07-24T09:54:21Z", "type": "commit"}, {"oid": "f64e6315c07fe19e125fc782bce760faa04af3a8", "url": "https://github.com/vaadin/flow/commit/f64e6315c07fe19e125fc782bce760faa04af3a8", "message": "Remove extra property.", "committedDate": "2020-07-24T10:00:52Z", "type": "commit"}]}