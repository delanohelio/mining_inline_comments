{"pr_number": 8480, "pr_title": "Throw a meaningfull exception on change property/attribute of Text", "pr_createdAt": "2020-06-02T10:18:23Z", "pr_url": "https://github.com/vaadin/flow/pull/8480", "timeline": [{"oid": "1dfc81041258c0cd83ee3960f788295d18edd469", "url": "https://github.com/vaadin/flow/commit/1dfc81041258c0cd83ee3960f788295d18edd469", "message": "Throw a meaningfull exception on change property/attribute of Text\n\nFixes #7686", "committedDate": "2020-06-02T10:17:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI4MTUwOQ==", "url": "https://github.com/vaadin/flow/pull/8480#discussion_r435281509", "bodyText": "Typo: \"visibiltiy\" -> \"visibility\".", "author": "joheriks", "createdAt": "2020-06-04T14:01:35Z", "path": "flow-server/src/main/java/com/vaadin/flow/component/Text.java", "diffHunk": "@@ -59,4 +59,20 @@ public String getText() {\n         return getElement().getText();\n     }\n \n+    @Override\n+    protected <T> void set(PropertyDescriptor<T, ?> descriptor, T value) {\n+        throw new UnsupportedOperationException(\"Cannot set '\"\n+                + descriptor.getPropertyName() + \"' property to the \"\n+                + getClass().getSimpleName() + \" component because it doesn't \"\n+                + \"represent an HTML Element but a text Node on the client side.\");\n+    }\n+\n+    @Override\n+    public void setVisible(boolean visible) {\n+        throw new UnsupportedOperationException(\"Cannot change \"\n+                + getClass().getSimpleName()\n+                + \" component visibiltiy because it doesn't \"", "originalCommit": "1dfc81041258c0cd83ee3960f788295d18edd469", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI4NDI4MQ==", "url": "https://github.com/vaadin/flow/pull/8480#discussion_r435284281", "bodyText": "Unnecessary redundant strings adds maintenance burden, could the test just check for UnsupportedOperationException agnostic about message contents?", "author": "joheriks", "createdAt": "2020-06-04T14:05:04Z", "path": "flow-server/src/test/java/com/vaadin/flow/component/TextTest.java", "diffHunk": "@@ -44,4 +48,41 @@ public void setGetText() {\n         Assert.assertEquals(\"Simple\", new Text(\"Simple\").getText());\n         Assert.assertEquals(\"\u00e5\u00e4\u00f6 \u20ac#%\u00b0#\", new Text(\"\u00e5\u00e4\u00f6 \u20ac#%\u00b0#\").getText());\n     }\n+\n+    @Test\n+    public void setId_throwsWithMeaningfulMessage() {\n+        assertExceptionOnSetProperty(\"id\");\n+\n+        new Text(\"\").setId(\"foo\");\n+    }\n+\n+    @Test\n+    public void setFooProperty_throwsWithMeaningfulMessage() {\n+        assertExceptionOnSetProperty(\"foo\");\n+\n+        new Text(\"\").set(PropertyDescriptors.propertyWithDefault(\"foo\", true),\n+                false);\n+    }\n+\n+    @Test\n+    public void setVisibility_throwsWithMeaningfulMessage() {\n+        exception.expect(UnsupportedOperationException.class);\n+\n+        exception.expectMessage(CoreMatchers.allOf(\n+                CoreMatchers.containsString(\n+                        \"Cannot change Text component visibiltiy\"),\n+                CoreMatchers.containsString(\n+                        \"because it doesn't represent an HTML Element\")));", "originalCommit": "1dfc81041258c0cd83ee3960f788295d18edd469", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEzODk3Ng==", "url": "https://github.com/vaadin/flow/pull/8480#discussion_r437138976", "bodyText": "Unfortunately no.\nI agree that it's better to avoid checking the exception messages .\nBut the original ticket is exactly about \"Unsupported operation exception\".\nSo if I don't check anything then I cannot be sure that the behavior is fixed.\nUnsupported exception is thrown in the same way as it already has been thrown previously.\nThe only change is meaningful message in the exception.", "author": "denis-anisimov", "createdAt": "2020-06-09T05:03:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI4NDI4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE2ODQ5NQ==", "url": "https://github.com/vaadin/flow/pull/8480#discussion_r437168495", "bodyText": "Alright.", "author": "joheriks", "createdAt": "2020-06-09T06:35:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI4NDI4MQ=="}], "type": "inlineReview"}, {"oid": "cacda976972f0eb60d96ba241f8da5e963de60f3", "url": "https://github.com/vaadin/flow/commit/cacda976972f0eb60d96ba241f8da5e963de60f3", "message": "Correct typo", "committedDate": "2020-06-09T05:29:16Z", "type": "commit"}, {"oid": "cacda976972f0eb60d96ba241f8da5e963de60f3", "url": "https://github.com/vaadin/flow/commit/cacda976972f0eb60d96ba241f8da5e963de60f3", "message": "Correct typo", "committedDate": "2020-06-09T05:29:16Z", "type": "forcePushed"}]}