{"pr_number": 8527, "pr_title": "Make repeat iterate BinderNode instances for array models", "pr_createdAt": "2020-06-08T12:30:03Z", "pr_url": "https://github.com/vaadin/flow/pull/8527", "timeline": [{"oid": "67b5c4800d633d8ade5721ee8c38b83184c9724b", "url": "https://github.com/vaadin/flow/commit/67b5c4800d633d8ade5721ee8c38b83184c9724b", "message": "--wip-- [skip ci]", "committedDate": "2020-06-10T06:32:42Z", "type": "forcePushed"}, {"oid": "0d08b459a7d25b5b3cc5edade6bbd5a94d5602a9", "url": "https://github.com/vaadin/flow/commit/0d08b459a7d25b5b3cc5edade6bbd5a94d5602a9", "message": "Add the array binding support\n\nFixes #8131", "committedDate": "2020-06-11T06:14:30Z", "type": "forcePushed"}, {"oid": "08ab161ec35faf36ce482cc642d984c6cbf2ec20", "url": "https://github.com/vaadin/flow/commit/08ab161ec35faf36ce482cc642d984c6cbf2ec20", "message": "Add the array binding support\n\nFixes #8131", "committedDate": "2020-06-11T06:17:07Z", "type": "forcePushed"}, {"oid": "f4aeec02a3135e78178c91a4a53e5f43b94c047d", "url": "https://github.com/vaadin/flow/commit/f4aeec02a3135e78178c91a4a53e5f43b94c047d", "message": "Add the array binding support\n\nFixes #8131", "committedDate": "2020-06-11T10:31:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM0NzQxMQ==", "url": "https://github.com/vaadin/flow/pull/8527#discussion_r439347411", "bodyText": "I noticed in https://github.com/vaadin/ts-forms-demo/pull/4/files#diff-766915b446ddcf464dc22465c8163a4dL184-R183 you changed this kind of line to other style. Should this be preferred everywhere or is there a difference?\nShould this be like?:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <button id=\"add\" @click=${() => appendItem(this.binder.model.products)}>+</button>\n          \n          \n            \n                <button id=\"add\" @click=${() => this.binder.for(this.binder.model.products).appendItem()}>+</button>\n          \n      \n    \n    \n  \n\nThere's also one test below which uses appendItem() twice. I tried updating these and then removing the unused import of appendItem and tests still pass.", "author": "Haprog", "createdAt": "2020-06-12T10:50:07Z", "path": "flow-client/src/test/frontend/form/ValidationTests.ts", "diffHunk": "@@ -42,9 +43,9 @@ class OrderView extends LitElement {\n     <input id=\"fullName\" ...=\"${field(this.binder.model.customer.fullName)}\" />\n     <input id=\"nickName\" ...=\"${field(this.binder.model.customer.nickName)}\" />\n     <button id=\"add\" @click=${() => appendItem(this.binder.model.products)}>+</button>", "originalCommit": "f4aeec02a3135e78178c91a4a53e5f43b94c047d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM1MTkwOQ==", "url": "https://github.com/vaadin/flow/pull/8527#discussion_r439351909", "bodyText": "Minor nit: These lines could be shortened a bit by destructuring the model to local variables to avoid repeating this.binder.model. a lot.\nFor example:\n  render() {\n    const binder = this.binder;\n    const { notes, products, customer: { fullName, nickName } } = binder.model;\n    return html`\n    <input id=\"notes\" ...=\"${field(notes)}\" />\n    <input id=\"fullName\" ...=\"${field(fullName)}\" />\n    <input id=\"nickName\" ...=\"${field(nickName)}\" />\n    <button id=\"add\" @click=${() => binder.for(products).appendItem()}>+</button>\n    ${repeat(products, (productNode, index) => html`<div>\n        <input id=\"description${index}\" ...=\"${field(productNode.model.description)}\" />\n        <input id=\"price${index}\" ...=\"${field(productNode.model.price)}\">\n      </div>`)}\n    `;\n  }\nThough maybe the nested destructure is a bit over the top. Maybe this would be nicer and easier to read?:\n  render() {\n    const binder = this.binder;\n    const { notes, products, customer } = binder.model;\n    return html`\n    <input id=\"notes\" ...=\"${field(notes)}\" />\n    <input id=\"fullName\" ...=\"${field(customer.fullName)}\" />\n    <input id=\"nickName\" ...=\"${field(customer.nickName)}\" />\n    <button id=\"add\" @click=${() => binder.for(products).appendItem()}>+</button>\n    ${repeat(products, (productNode, index) => html`<div>\n        <input id=\"description${index}\" ...=\"${field(productNode.model.description)}\" />\n        <input id=\"price${index}\" ...=\"${field(productNode.model.price)}\">\n      </div>`)}\n    `;\n  }", "author": "Haprog", "createdAt": "2020-06-12T10:59:22Z", "path": "flow-client/src/test/frontend/form/ValidationTests.ts", "diffHunk": "@@ -42,9 +43,9 @@ class OrderView extends LitElement {\n     <input id=\"fullName\" ...=\"${field(this.binder.model.customer.fullName)}\" />", "originalCommit": "f4aeec02a3135e78178c91a4a53e5f43b94c047d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5123d06f1f148e68dad845a51cd89a757f4ce587", "url": "https://github.com/vaadin/flow/commit/5123d06f1f148e68dad845a51cd89a757f4ce587", "message": "Add the array binding support\n\nFixes #8131", "committedDate": "2020-06-15T13:06:48Z", "type": "commit"}, {"oid": "5123d06f1f148e68dad845a51cd89a757f4ce587", "url": "https://github.com/vaadin/flow/commit/5123d06f1f148e68dad845a51cd89a757f4ce587", "message": "Add the array binding support\n\nFixes #8131", "committedDate": "2020-06-15T13:06:48Z", "type": "forcePushed"}]}