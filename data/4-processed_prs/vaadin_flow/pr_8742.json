{"pr_number": 8742, "pr_title": "Rename binder.reset(value) to binder.read(value)", "pr_createdAt": "2020-07-20T11:36:50Z", "pr_url": "https://github.com/vaadin/flow/pull/8742", "timeline": [{"oid": "84b3ea3be0e3812ef5b4af25d96cf7001c6cdb4d", "url": "https://github.com/vaadin/flow/commit/84b3ea3be0e3812ef5b4af25d96cf7001c6cdb4d", "message": "Rename binder.reset(value) to binder.read(value)", "committedDate": "2020-07-20T11:36:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMwOTcwNQ==", "url": "https://github.com/vaadin/flow/pull/8742#discussion_r457309705", "bodyText": "Do we now have a test for reset() method? I guess all existing tests are now verifying read() method?", "author": "mshabarov", "createdAt": "2020-07-20T11:47:29Z", "path": "flow-client/src/main/resources/META-INF/resources/frontend/form/Binder.ts", "diffHunk": "@@ -78,29 +78,33 @@ export class Binder<T, M extends AbstractModel<T>> extends BinderNode<T, M> {\n   }\n \n   /**\n-   * Reset the form value to default value and clear validation errors\n+   * Read the given value into the form and clear validation errors\n    *\n-   * @param defaultValue When present, sets the argument as the new default\n+   * @param value Sets the argument as the new default\n    * value before resetting, otherwise the previous default is used.\n    */\n-  reset(defaultValue: T = this[defaultValueSymbol]) {\n-    this.defaultValue = defaultValue;\n+  read(value: T) {\n+    this.defaultValue = value;\n     if (\n       // Skip when no value is set yet (e. g., invoked from constructor)\n       this.value\n       // Clear validation state, then proceed if update is needed\n       && this.clearValidation()\n       // When value is dirty, another update is coming from invoking the value\n       // setter below, so we skip this one to prevent duplicate updates\n-      && this.value === defaultValue) {\n+      && this.value === value) {\n       this.update(this.value);\n     }\n \n     this.value = this.defaultValue;\n   }\n \n+  reset(){", "originalCommit": "84b3ea3be0e3812ef5b4af25d96cf7001c6cdb4d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMxNTUzMQ==", "url": "https://github.com/vaadin/flow/pull/8742#discussion_r457315531", "bodyText": "Yes, there are tests for reset() method, for example, in BinderTests.ts, we have\ntest(\"should reset to default value\", () => {\n      binder.for(binder.model.notes).value = \"foo\";\n      binder.for(binder.model.customer.fullName).value = \"foo\";\n      requestUpdateStub.reset();\n\n      binder.reset();\n\n      assert.equal(binder.value.notes, \"\");\n      assert.equal(binder.value.customer.fullName, \"\");\n      sinon.assert.calledOnce(requestUpdateStub);\n    });\n\nThis PR basically just splits the original reset methods to 2 parts, the one with an argument is now renamed to read, the one without arguments stays the same. They have all been tested, so no need to add more, the tests which were using binder.reset(value) have been renamed to binder.read(value) accordingly.", "author": "haijian-vaadin", "createdAt": "2020-07-20T11:55:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMwOTcwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMxNjI4NQ==", "url": "https://github.com/vaadin/flow/pull/8742#discussion_r457316285", "bodyText": "Understood, thanks!", "author": "mshabarov", "createdAt": "2020-07-20T11:57:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMwOTcwNQ=="}], "type": "inlineReview"}]}