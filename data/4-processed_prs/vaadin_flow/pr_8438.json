{"pr_number": 8438, "pr_title": "Cherry picks for 3.1", "pr_createdAt": "2020-05-28T05:05:16Z", "pr_url": "https://github.com/vaadin/flow/pull/8438", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY5MDIyMA==", "url": "https://github.com/vaadin/flow/pull/8438#discussion_r431690220", "bodyText": "Reduce this lambda expression number of lines from 21 to at most 20.", "author": "vaadin-bot", "createdAt": "2020-05-28T09:06:02Z", "path": "flow-server/src/main/java/com/vaadin/flow/component/ShortcutRegistration.java", "diffHunk": "@@ -70,17 +71,40 @@\n \n     private ShortcutEventListener eventListener;\n \n+    private List<Registration> registrations = new ArrayList<>();\n+\n     // beforeClientResponse callback\n     private final SerializableConsumer<ExecutionContext> beforeClientResponseConsumer = executionContext -> {", "originalCommit": "6fd9045fe2e8c7097384b4ca055b35f855a276a6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a3ec879c4e6868614356e128cc1a6db8e2ec56d4", "url": "https://github.com/vaadin/flow/commit/a3ec879c4e6868614356e128cc1a6db8e2ec56d4", "message": "fix: check for TypeVariable in the ExplicitNullableTypeChecker (#8316)", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "5ad9aeaef293021b36d003d25cbc4f079719e435", "url": "https://github.com/vaadin/flow/commit/5ad9aeaef293021b36d003d25cbc4f079719e435", "message": "fix: custom connect client breaks endpoints mapping\n\nPresence of absence of a custom Connect client in `frontend/connect-client.ts` should not affect the URL mapping of the endpoint calls handler on the backend (the way to configure that mapping is to use the `vaadin.endpoint.prefix` application property). There is no need to parse the `connect-client.ts` and try to determine the URL mapping from there.\n\nEarlier, when the support for a custom Connect client was added in https://github.com/vaadin/flow/pull/7944, the code that tried to determine the endpoint handler URL mapping from a custom `connect-client.ts` file had a bug that resulted in an incorrect URL mapping configuration.\n\nThis commit completely removes the link between a custom Connect client and the endpoint handler URL mapping config.\n\nFixes #8364", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "5ed9c483c6407ecca6a0f3db6f38ba5a5b072ed6", "url": "https://github.com/vaadin/flow/commit/5ed9c483c6407ecca6a0f3db6f38ba5a5b072ed6", "message": "remove unused import", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "7b072f2aaf5954c925b300586b7832704867e431", "url": "https://github.com/vaadin/flow/commit/7b072f2aaf5954c925b300586b7832704867e431", "message": "Update chrome version to 83 (#8417)", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "a29d3c8a24e97566063925e15bdcaa57098cfbdd", "url": "https://github.com/vaadin/flow/commit/a29d3c8a24e97566063925e15bdcaa57098cfbdd", "message": "Merge branch 'master' of github.com:vaadin/flow\n\n* 'master' of github.com:vaadin/flow: (191 commits)\n  Fix regression in @Push when running in client bootstrapping (#8435)\n  Don't override initial value of hidden HTML Element attribute. (#8419)\n  Cherry pick from 2.2 to master and fix postpone and forward with CCDM\n(#8342) (#8359)\n  Moved init parameters to new class\ncom.vaadin.flow.server.InitParameters (#8409)\n  Update chrome version to 83 (#8417)\n  Listen detach events on \"listenOn\" components in shortcut registration\n(#8391)\n  Correct Javadocs for adding JS and Stylesheets programatically.\n(#8392)\n  Close client app on change location (#8334)\n  Close UI after refreshing the page in PreserveOnRefresh case and mark\nit (#8365)\n  remove unused import\n  fix: custom connect client breaks endpoints mapping\n  Wait for intermediate page to load completely in @PreserveOnRefresh IT\n(#8338)\n  Properly encoded URIs use %20 (#8271)\n  Removed unnecessary private method (#8357)\n  Extract live reload ITs into separate test module (#8324)\n  fix: check for TypeVariable in the ExplicitNullableTypeChecker (#8316)\n  Live reload show message on error (#8206) (#8304)\n  Clarify message about blocking with the session locked (#8312)\n  Url parameter template support. (#7608)\n  Store vaadin hash to node_modules (#8282)\n  ...\n\n# Conflicts:\n#\t.gitignore\n#\tflow-client/src/main/java/com/vaadin/client/ApplicationConnection.java\n#\tflow-client/src/main/resources/META-INF/resources/frontend/Flow.ts\n#\tflow-client/src/test/frontend/FlowTests.ts\n#\tflow-maven-plugin/src/main/java/com/vaadin/flow/plugin/maven/BuildFrontendMojo.java\n#\tflow-maven-plugin/src/main/java/com/vaadin/flow/plugin/maven/FlowModeAbstractMojo.java\n#\tflow-maven-plugin/src/main/java/com/vaadin/flow/plugin/maven/PrepareFrontendMojo.java\n#\tflow-maven-plugin/src/test/java/com/vaadin/flow/plugin/maven/BuildFrontendMojoTest.java\n#\tflow-maven-plugin/src/test/java/com/vaadin/flow/plugin/maven/PrepareFrontendMojoTest.java\n#\tflow-server/src/main/java/com/vaadin/flow/function/DeploymentConfiguration.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/Constants.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/DefaultDeploymentConfiguration.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/DeploymentConfigurationFactory.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/DevModeHandler.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/connect/VaadinConnectController.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/frontend/FrontendUtils.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/frontend/NodeTasks.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/frontend/NodeUpdater.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/frontend/TaskGenerateTsConfig.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/frontend/TaskRunNpmInstall.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/frontend/VersionsJsonConverter.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/startup/AbstractRouteRegistryInitializer.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/startup/DevModeInitializer.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/startup/ServletDeployer.java\n#\tflow-server/src/main/java/com/vaadin/flow/server/startup/VaadinAppShellInitializer.java\n#\tflow-server/src/main/java/com/vaadin/flow/shared/ApplicationConstants.java\n#\tflow-server/src/main/resources/pnpmfile.js\n#\tflow-server/src/main/resources/webpack.generated.js\n#\tflow-server/src/test/java/com/vaadin/flow/server/DefaultDeploymentConfigurationTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/DeploymentConfigurationFactoryTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/communication/WebComponentBootstrapHandlerTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/connect/VaadinConnectControllerTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/connect/rest/EndpointWithRestControllerTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/frontend/FrontendUtilsTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/frontend/TaskRunNpmInstallTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/frontend/TaskRunPnpmInstallTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/frontend/VersionsJsonConverterTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/startup/AbstractRouteRegistryInitializerTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/startup/DevModeInitializerTest.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/startup/DevModeInitializerTestBase.java\n#\tflow-server/src/test/java/com/vaadin/flow/server/startup/VaadinAppShellInitializerTest.java\n#\tflow-server/src/test/resources/versions/no_vaadin_package.json\n#\tflow-server/src/test/resources/versions/package.json\n#\tflow-server/src/test/resources/versions/user_package.json\n#\tflow-server/src/test/resources/versions/user_versions.json\n#\tflow-server/src/test/resources/versions/versions.json\n#\tflow-test-util/src/main/java/com/vaadin/flow/testutil/AbstractTestBenchTest.java\n#\tflow-tests/pom.xml\n#\tflow-tests/test-npm-only-features/test-npm-performance-regression/src/test/java/com/vaadin/flow/testnpmonlyfeatures/performanceregression/StartupPerformanceIT.java\n#\tflow-tests/test-root-context/src/main/java/com/vaadin/flow/uitest/ui/PushWithPreserveOnRefreshView.java\n#\tflow-tests/test-root-context/src/main/java/com/vaadin/flow/uitest/ui/StreamResourceView.java\n#\tflow-tests/test-root-context/src/test/java/com/vaadin/flow/VerifyBrowserVersionIT.java\n#\tflow-tests/test-root-context/src/test/java/com/vaadin/flow/uitest/ui/NavigationTriggerIT.java\n#\tflow-tests/test-root-context/src/test/java/com/vaadin/flow/uitest/ui/PushWithPreserveOnRefreshIT.java\n#\tflow-tests/test-root-context/src/test/java/com/vaadin/flow/uitest/ui/RequestParametersIT.java\n#\tflow-tests/test-root-context/src/test/java/com/vaadin/flow/uitest/ui/RouterSessionExpirationIT.java\n#\tflow-tests/test-root-context/src/test/java/com/vaadin/flow/uitest/ui/StreamResourceIT.java\n#\tflow-tests/test-root-ui-context/src/main/java/com/vaadin/flow/uitest/servlet/ApplicationRunnerServlet.java\n#\tflow-tests/test-root-ui-context/src/test/java/com/vaadin/flow/uitest/ui/push/ReconnectLongPollingIT.java\n#\tflow-tests/test-router-custom-context/src/test/java/com/vaadin/flow/contexttest/ui/PushIT.java", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "cc0642a6c11defce3d658f451cde7f40a1191808", "url": "https://github.com/vaadin/flow/commit/cc0642a6c11defce3d658f451cde7f40a1191808", "message": "Close client app on change location (#8334)\n\nFixes #8177", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "2258bc49b9a9e91fba138431c17c48839ac30300", "url": "https://github.com/vaadin/flow/commit/2258bc49b9a9e91fba138431c17c48839ac30300", "message": "Correct Javadocs for adding JS and Stylesheets programatically. (#8392)\n\n* Correct Javadocs for adding JS and Stylesheets programatically.\r\n\r\nFixes #8320", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "a5157237da996959897a1f541dc72080fa2d70dd", "url": "https://github.com/vaadin/flow/commit/a5157237da996959897a1f541dc72080fa2d70dd", "message": "Listen detach events on \"listenOn\" components in shortcut registration (#8391)\n\nFixes #8247", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "a37c7cd86f22abd76c565e1a6e00fd3efa7f81e7", "url": "https://github.com/vaadin/flow/commit/a37c7cd86f22abd76c565e1a6e00fd3efa7f81e7", "message": "Don't override initial value of hidden HTML Element attribute. (#8419)\n\nFixes #8100", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "972c56415879c919ebad96ad1e1a1b1440ed7c98", "url": "https://github.com/vaadin/flow/commit/972c56415879c919ebad96ad1e1a1b1440ed7c98", "message": "Properly encoded URIs use %20 (#8271)\n\nfixes #5360", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "fdacb38252f4998da2100e71c311f208cfa3ee93", "url": "https://github.com/vaadin/flow/commit/fdacb38252f4998da2100e71c311f208cfa3ee93", "message": "Fix issue with Push unsubscribe URL. (#8330)\n\nRelated to #8177", "committedDate": "2020-05-28T13:30:52Z", "type": "commit"}, {"oid": "fdacb38252f4998da2100e71c311f208cfa3ee93", "url": "https://github.com/vaadin/flow/commit/fdacb38252f4998da2100e71c311f208cfa3ee93", "message": "Fix issue with Push unsubscribe URL. (#8330)\n\nRelated to #8177", "committedDate": "2020-05-28T13:30:52Z", "type": "forcePushed"}]}