{"pr_number": 8794, "pr_title": "ListDataView: addItemAfter doesn't work with filter", "pr_createdAt": "2020-07-30T05:56:49Z", "pr_url": "https://github.com/vaadin/flow/pull/8794", "timeline": [{"oid": "06963207ec02074edeb2ca96b273ea1d83a85839", "url": "https://github.com/vaadin/flow/commit/06963207ec02074edeb2ca96b273ea1d83a85839", "message": "ListDataView: addItemAfter doesn't work with filter", "committedDate": "2020-07-30T05:54:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NjYxMQ==", "url": "https://github.com/vaadin/flow/pull/8794#discussion_r462766611", "bodyText": "Please avoid one letter variable", "author": "denis-anisimov", "createdAt": "2020-07-30T06:37:16Z", "path": "flow-data/src/main/java/com/vaadin/flow/data/provider/AbstractListDataView.java", "diffHunk": "@@ -267,11 +268,11 @@ protected void validateItemIndex(int itemIndex) {\n         return this;\n     }\n \n-    private int getItemIndex(T item) {\n+    private int getItemIndex(T item, Stream<T> stream) {\n         Objects.requireNonNull(item, NULL_ITEM_ERROR_MESSAGE);\n         AtomicInteger index = new AtomicInteger(-1);\n         //@formatter:off\n-        if (!getItems().peek(t -> index.incrementAndGet())\n+        if (!stream.peek(t -> index.incrementAndGet())", "originalCommit": "06963207ec02074edeb2ca96b273ea1d83a85839", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NzcxMg==", "url": "https://github.com/vaadin/flow/pull/8794#discussion_r462767712", "bodyText": "Also : it's an existing code but I'm a bit uncomfortable with using peek which should not have side effects but it has here.\nThis is minor.", "author": "denis-anisimov", "createdAt": "2020-07-30T06:39:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NjYxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgwODk2OA==", "url": "https://github.com/vaadin/flow/pull/8794#discussion_r462808968", "bodyText": "Please avoid one letter variable\n\nDone.\n\npeek which should not have side effects but it has here\n\nWell, this was done as a simple solution to count the items while the other terminate method is expected (findFirst()). The side effect here (counter increment) is intend. I don't know how to do that in more elegant way.", "author": "mshabarov", "createdAt": "2020-07-30T07:41:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NjYxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgxODE4MQ==", "url": "https://github.com/vaadin/flow/pull/8794#discussion_r462818181", "bodyText": "There is always a way to use forEach  and implement the code in other way.\nBut it's minor as I said.", "author": "denis-anisimov", "createdAt": "2020-07-30T07:57:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NjYxMQ=="}], "type": "inlineReview"}, {"oid": "e4fe8c810496c14a64922a3cc781189dbcb9142a", "url": "https://github.com/vaadin/flow/commit/e4fe8c810496c14a64922a3cc781189dbcb9142a", "message": "Removes one-letter variable names", "committedDate": "2020-07-30T07:35:47Z", "type": "commit"}]}