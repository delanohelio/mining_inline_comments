{"pr_number": 910, "pr_title": "Implement Unrefreshed Certificates Notification", "pr_createdAt": "2020-03-17T16:53:56Z", "pr_url": "https://github.com/AthenZ/athenz/pull/910", "timeline": [{"oid": "117a13d8b3cfcf7d8adf4af7b7d63a5a735a76b7", "url": "https://github.com/AthenZ/athenz/commit/117a13d8b3cfcf7d8adf4af7b7d63a5a735a76b7", "message": "Implement Unrefreshed Certificates Notification", "committedDate": "2020-03-17T17:24:24Z", "type": "forcePushed"}, {"oid": "ba9bce6219f9fa940e9bed69b13449c42d4ee221", "url": "https://github.com/AthenZ/athenz/commit/ba9bce6219f9fa940e9bed69b13449c42d4ee221", "message": "Implement Unrefreshed Certificates Notification", "committedDate": "2020-03-17T17:30:33Z", "type": "forcePushed"}, {"oid": "0428cfcb6bfe9dd4cb4dbea0ada305854191d916", "url": "https://github.com/AthenZ/athenz/commit/0428cfcb6bfe9dd4cb4dbea0ada305854191d916", "message": "Implement Unrefreshed Certificates Notification", "committedDate": "2020-03-17T22:29:55Z", "type": "forcePushed"}, {"oid": "daac3ca0d4ab1436ced508fd7ff4720460af8d59", "url": "https://github.com/AthenZ/athenz/commit/daac3ca0d4ab1436ced508fd7ff4720460af8d59", "message": "Implement Unrefreshed Certificates Notification", "committedDate": "2020-03-18T09:38:36Z", "type": "commit"}, {"oid": "daac3ca0d4ab1436ced508fd7ff4720460af8d59", "url": "https://github.com/AthenZ/athenz/commit/daac3ca0d4ab1436ced508fd7ff4720460af8d59", "message": "Implement Unrefreshed Certificates Notification", "committedDate": "2020-03-18T09:38:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI4ODMwMg==", "url": "https://github.com/AthenZ/athenz/pull/910#discussion_r394288302", "bodyText": "As you can see, I have added the new notification in a similar manner to the other notifications. I have noticed that the EmailNotificationService requires similar refactoring to the NotificationManager (separating the notification specific logic from this class) but it will increase this pull request complexity substantially.\nI have decided it is best to leave it as-is for now. I can refactor this class after this pull request is merged or on a later date that might be more suitable (maybe when we start working on adding Yamas notifications).", "author": "OferLevi85", "createdAt": "2020-03-18T11:48:59Z", "path": "libs/java/server_common/src/main/java/com/yahoo/athenz/common/server/notification/impl/EmailNotificationService.java", "diffHunk": "@@ -161,6 +167,9 @@ String getBody(String type, Map<String, String> details) {\n             case NOTIFICATION_TYPE_PRINCIPAL_EXPIRY_REMINDER:\n                 body = getPrincipalExpiryBody(details);\n                 break;\n+            case NOTIFICATION_TYPE_UNREFRESHED_CERTS:\n+                body = getUnrefreshedCertsBody(details);", "originalCommit": "daac3ca0d4ab1436ced508fd7ff4720460af8d59", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}