{"pr_number": 1222, "pr_title": "Update docker image and deployment", "pr_createdAt": "2020-12-22T09:34:57Z", "pr_url": "https://github.com/AthenZ/athenz/pull/1222", "timeline": [{"oid": "571d938c20f9ef39b3caa492c8e939974cdd3715", "url": "https://github.com/AthenZ/athenz/commit/571d938c20f9ef39b3caa492c8e939974cdd3715", "message": "helm chart POC", "committedDate": "2020-06-13T05:51:31Z", "type": "commit"}, {"oid": "c432384626c90dee6707265a258788b3285f0c25", "url": "https://github.com/AthenZ/athenz/commit/c432384626c90dee6707265a258788b3285f0c25", "message": "update version", "committedDate": "2020-06-13T05:51:31Z", "type": "commit"}, {"oid": "908d3330dca4b7a712ca08ae870a1d43972aae72", "url": "https://github.com/AthenZ/athenz/commit/908d3330dca4b7a712ca08ae870a1d43972aae72", "message": "add charts", "committedDate": "2020-06-13T05:51:31Z", "type": "commit"}, {"oid": "fb1c1d415e9500717ea54425f1155e5f74fc73be", "url": "https://github.com/AthenZ/athenz/commit/fb1c1d415e9500717ea54425f1155e5f74fc73be", "message": "add ignore", "committedDate": "2020-06-13T05:51:31Z", "type": "commit"}, {"oid": "e746f941dddf873329479632daa8f1b5e0582119", "url": "https://github.com/AthenZ/athenz/commit/e746f941dddf873329479632daa8f1b5e0582119", "message": "remove links", "committedDate": "2020-06-13T05:51:31Z", "type": "commit"}, {"oid": "fbbbbd2a1eee6df77c3ec71ff62370f3d118215e", "url": "https://github.com/AthenZ/athenz/commit/fbbbbd2a1eee6df77c3ec71ff62370f3d118215e", "message": "Revert \"add charts\"\n\nThis reverts commit 27d57c7f169be181fa1f89acd1d6a8e04e671e6b.", "committedDate": "2020-06-13T05:51:31Z", "type": "commit"}, {"oid": "b31de0c4e8b5af6faf532dca659a303345f5693c", "url": "https://github.com/AthenZ/athenz/commit/b31de0c4e8b5af6faf532dca659a303345f5693c", "message": "update doc", "committedDate": "2020-06-13T05:51:31Z", "type": "commit"}, {"oid": "31754e181b3b0aef1d4d40af32fdaa0959e7cfe9", "url": "https://github.com/AthenZ/athenz/commit/31754e181b3b0aef1d4d40af32fdaa0959e7cfe9", "message": "fix files", "committedDate": "2020-06-13T05:52:42Z", "type": "commit"}, {"oid": "3ac076962182f0958227612bb7f1f7da51785c2c", "url": "https://github.com/AthenZ/athenz/commit/3ac076962182f0958227612bb7f1f7da51785c2c", "message": "update docs", "committedDate": "2020-06-13T10:05:44Z", "type": "commit"}, {"oid": "b4fdb4f2dc706485c27fbff4fad454820f28e2e9", "url": "https://github.com/AthenZ/athenz/commit/b4fdb4f2dc706485c27fbff4fad454820f28e2e9", "message": "fix doc", "committedDate": "2020-06-15T06:30:28Z", "type": "commit"}, {"oid": "d6a33d7e99d4470257a691931848419bf8f15a51", "url": "https://github.com/AthenZ/athenz/commit/d6a33d7e99d4470257a691931848419bf8f15a51", "message": "Merge branch 'master' into helm-charts\n\n* master: (223 commits)\n  Fix blockers for Role UI (#1207)\n  fixing build and updating dependencies (#1206)\n  improve error message for token requests (#1204)\n  Add member justification if role review enabled (#1205)\n  match principal validation with rdl definitions (#1203)\n  Bump jetty.version in /examples/java/instance-provider/provider (#1202)\n  Add zts statuschecker (#1201)\n  removing old ui files (#1200)\n  ui build fix (#1199)\n  extend schema to allow role lookup for groups (#1197)\n  Fix unit test snapshots (#1198)\n  Enable swagger cache (#1196)\n  [maven-release-plugin] prepare for next development iteration\n  [maven-release-plugin] prepare release v1.9.25\n  updated jetty + aws dependencies (#1195)\n  [Merge after #1192] Swagger description for methods and arguments (#1193)\n  Enforce autentication for swagger endpoints (#1192)\n  Overload allowAccess in ZPE (doesn't require specifying role (#1194)\n  Fix typo in code of conduct section (#1190)\n  defaulting spiffe to true for zts-rolecert and zts-svccert (#1189)\n  ...", "committedDate": "2020-12-07T07:34:58Z", "type": "commit"}, {"oid": "5dd012008cb97be99e2c594cca9dc08eeaed7b80", "url": "https://github.com/AthenZ/athenz/commit/5dd012008cb97be99e2c594cca9dc08eeaed7b80", "message": "sync properties\n\n(cherry picked from commit d793a76e1ff9b20ae7defe1cc9d47efbe54f122e)", "committedDate": "2020-12-07T07:43:14Z", "type": "commit"}, {"oid": "9dec89b479b48b05b1ef283828c6b4b8e20591b3", "url": "https://github.com/AthenZ/athenz/commit/9dec89b479b48b05b1ef283828c6b4b8e20591b3", "message": "fix link to build-athenz page\n\n(cherry picked from commit fbe52a605e998d270667da4dfdb98be5882d90b7)", "committedDate": "2020-12-07T07:43:33Z", "type": "commit"}, {"oid": "07796abcd4120d89be282967965c2bfd7f4a33f7", "url": "https://github.com/AthenZ/athenz/commit/07796abcd4120d89be282967965c2bfd7f4a33f7", "message": "fix athenz version in doc", "committedDate": "2020-12-07T07:57:32Z", "type": "commit"}, {"oid": "7d23300d3c43524c88a6e5170ed8c4746d3b5b7a", "url": "https://github.com/AthenZ/athenz/commit/7d23300d3c43524c88a6e5170ed8c4746d3b5b7a", "message": "Update prometheus/pom.xml", "committedDate": "2020-12-10T00:22:20Z", "type": "commit"}, {"oid": "deea427942977a75f044f4d5896d299023d295f1", "url": "https://github.com/AthenZ/athenz/commit/deea427942977a75f044f4d5896d299023d295f1", "message": "Update prometheus/pom.xml", "committedDate": "2020-12-10T00:33:42Z", "type": "commit"}, {"oid": "a4187f799d88131218c755a261b0b0ae8a96c949", "url": "https://github.com/AthenZ/athenz/commit/a4187f799d88131218c755a261b0b0ae8a96c949", "message": "fix zts.properties after package path update", "committedDate": "2020-12-14T05:44:55Z", "type": "commit"}, {"oid": "d626fbdf38430cc2a5be48b75cfe44080240ba23", "url": "https://github.com/AthenZ/athenz/commit/d626fbdf38430cc2a5be48b75cfe44080240ba23", "message": "sync athenz version to 1.9.25 & fix doc", "committedDate": "2020-12-14T06:02:47Z", "type": "commit"}, {"oid": "48f4d3c091fc8a8cc6b948afe604cc49a2ca5289", "url": "https://github.com/AthenZ/athenz/commit/48f4d3c091fc8a8cc6b948afe604cc49a2ca5289", "message": "fix TOC attribute", "committedDate": "2020-12-14T06:03:10Z", "type": "commit"}, {"oid": "a9bdffd205b3d108675f3382e90d3eef6de8261c", "url": "https://github.com/AthenZ/athenz/commit/a9bdffd205b3d108675f3382e90d3eef6de8261c", "message": "Update Deploy ZMS DB", "committedDate": "2020-12-14T06:46:15Z", "type": "commit"}, {"oid": "9db202d7c8f40b2aabee4155534e4253e8fdb114", "url": "https://github.com/AthenZ/athenz/commit/9db202d7c8f40b2aabee4155534e4253e8fdb114", "message": "fix docker version to latest", "committedDate": "2020-12-14T07:42:06Z", "type": "commit"}, {"oid": "59119ca3a09d41997b33e23c543244f18fec774f", "url": "https://github.com/AthenZ/athenz/commit/59119ca3a09d41997b33e23c543244f18fec774f", "message": "Removed metrics section from doc", "committedDate": "2020-12-15T02:41:54Z", "type": "commit"}, {"oid": "0f5f409a434e1c06eb2f6f70f1d6ef6ac29ead20", "url": "https://github.com/AthenZ/athenz/commit/0f5f409a434e1c06eb2f6f70f1d6ef6ac29ead20", "message": "Updated deploy doc: setup ZMS & ZTS database", "committedDate": "2020-12-15T05:01:03Z", "type": "commit"}, {"oid": "f952422690679b60e4aa2b3badba1fc295e98319", "url": "https://github.com/AthenZ/athenz/commit/f952422690679b60e4aa2b3badba1fc295e98319", "message": "fix ZMS & ZTS DB setup steps", "committedDate": "2020-12-15T05:34:42Z", "type": "commit"}, {"oid": "eb9049a90bcb17709fec663616a5884371342b3a", "url": "https://github.com/AthenZ/athenz/commit/eb9049a90bcb17709fec663616a5884371342b3a", "message": "Add athenz conf download, fix link", "committedDate": "2020-12-15T06:39:51Z", "type": "commit"}, {"oid": "ec3282ef61cd425706474109b02d6449ed4eec40", "url": "https://github.com/AthenZ/athenz/commit/ec3282ef61cd425706474109b02d6449ed4eec40", "message": "Add charts", "committedDate": "2020-12-15T06:55:50Z", "type": "commit"}, {"oid": "0580f3a5d9dfc09e2229c5e5230b526267f1135f", "url": "https://github.com/AthenZ/athenz/commit/0580f3a5d9dfc09e2229c5e5230b526267f1135f", "message": "Update deploy-using-helm.md", "committedDate": "2020-12-15T07:08:20Z", "type": "commit"}, {"oid": "5b42e5edbbcd0c26210c7c5c1243bcdf99458688", "url": "https://github.com/AthenZ/athenz/commit/5b42e5edbbcd0c26210c7c5c1243bcdf99458688", "message": "Update deploy-using-helm.md", "committedDate": "2020-12-15T07:18:26Z", "type": "commit"}, {"oid": "d24a48ab418d1d5ad5afca358fe630704572d79b", "url": "https://github.com/AthenZ/athenz/commit/d24a48ab418d1d5ad5afca358fe630704572d79b", "message": "add step to update properties and image repo", "committedDate": "2020-12-15T07:52:59Z", "type": "commit"}, {"oid": "b74ab17066fd5ff8ddcd0540ba5687de267cf08a", "url": "https://github.com/AthenZ/athenz/commit/b74ab17066fd5ff8ddcd0540ba5687de267cf08a", "message": "fix helm repo URL", "committedDate": "2020-12-15T07:59:29Z", "type": "commit"}, {"oid": "5e043a860799b9e9174e28c7f6f2594cf486f298", "url": "https://github.com/AthenZ/athenz/commit/5e043a860799b9e9174e28c7f6f2594cf486f298", "message": "Fix schema download URL", "committedDate": "2020-12-15T08:20:59Z", "type": "commit"}, {"oid": "da10e495913a3e27c10143e0e93a0d3d41ef683e", "url": "https://github.com/AthenZ/athenz/commit/da10e495913a3e27c10143e0e93a0d3d41ef683e", "message": "fix port", "committedDate": "2020-12-17T02:49:45Z", "type": "commit"}, {"oid": "7a0f04a99036eefe7bf515157b7096436aedcd65", "url": "https://github.com/AthenZ/athenz/commit/7a0f04a99036eefe7bf515157b7096436aedcd65", "message": "fix grep", "committedDate": "2020-12-17T02:55:21Z", "type": "commit"}, {"oid": "4e47aa42e7aa8732bdfe5f3d5cfd41dcfbea95be", "url": "https://github.com/AthenZ/athenz/commit/4e47aa42e7aa8732bdfe5f3d5cfd41dcfbea95be", "message": "Fix documents", "committedDate": "2020-12-21T04:36:11Z", "type": "commit"}, {"oid": "f64aef52c25d3cb8e8ebb4ce4080dd194f85bfb6", "url": "https://github.com/AthenZ/athenz/commit/f64aef52c25d3cb8e8ebb4ce4080dd194f85bfb6", "message": "Delete wait-for-mysql for zms", "committedDate": "2020-12-21T04:49:41Z", "type": "commit"}, {"oid": "5458f84c84ac7cd021619df78b235e2426227018", "url": "https://github.com/AthenZ/athenz/commit/5458f84c84ac7cd021619df78b235e2426227018", "message": "Delete wait-for-mysql for zts", "committedDate": "2020-12-21T04:52:50Z", "type": "commit"}, {"oid": "3b8bdec13af9e1e282b35e68bb6391c0f2e27fdc", "url": "https://github.com/AthenZ/athenz/commit/3b8bdec13af9e1e282b35e68bb6391c0f2e27fdc", "message": "Update charts", "committedDate": "2020-12-21T04:54:40Z", "type": "commit"}, {"oid": "fd78c1160c55148b093bae26724eb46542d51200", "url": "https://github.com/AthenZ/athenz/commit/fd78c1160c55148b093bae26724eb46542d51200", "message": "Update charts", "committedDate": "2020-12-21T05:00:44Z", "type": "commit"}, {"oid": "f00f2de6facb2d58e58d4b7cccf0ce17dfd4e9a4", "url": "https://github.com/AthenZ/athenz/commit/f00f2de6facb2d58e58d4b7cccf0ce17dfd4e9a4", "message": "fix typo", "committedDate": "2020-12-21T05:45:30Z", "type": "commit"}, {"oid": "b2858975c7d2046e5f67967806c3ce23fe450c2c", "url": "https://github.com/AthenZ/athenz/commit/b2858975c7d2046e5f67967806c3ce23fe450c2c", "message": "fix athenz version", "committedDate": "2020-12-21T05:46:01Z", "type": "commit"}, {"oid": "5dc02d80b337f6b0aa3274b7e71c8f0875bc0d9e", "url": "https://github.com/AthenZ/athenz/commit/5dc02d80b337f6b0aa3274b7e71c8f0875bc0d9e", "message": "fix athenz version under k8s", "committedDate": "2020-12-21T05:54:12Z", "type": "commit"}, {"oid": "35c22d8f1c2ba69af34b3874e54726898277000d", "url": "https://github.com/AthenZ/athenz/commit/35c22d8f1c2ba69af34b3874e54726898277000d", "message": "Remove unnecessary lines", "committedDate": "2020-12-21T06:35:49Z", "type": "commit"}, {"oid": "c5b9cc4760e38894f94911120fc65dcb6e391eca", "url": "https://github.com/AthenZ/athenz/commit/c5b9cc4760e38894f94911120fc65dcb6e391eca", "message": "fix doc", "committedDate": "2020-12-21T07:29:53Z", "type": "commit"}, {"oid": "6f467aa047b2818b883c4c3f05f7c17ef5988c68", "url": "https://github.com/AthenZ/athenz/commit/6f467aa047b2818b883c4c3f05f7c17ef5988c68", "message": "fix TOC", "committedDate": "2020-12-21T07:48:07Z", "type": "commit"}, {"oid": "d3da9a95ba072999d58afcb343efe92df625c99c", "url": "https://github.com/AthenZ/athenz/commit/d3da9a95ba072999d58afcb343efe92df625c99c", "message": "Fix sample value", "committedDate": "2020-12-22T05:55:14Z", "type": "commit"}, {"oid": "69175958bc39efe28b6ce9b4d34552cc2ef4fb19", "url": "https://github.com/AthenZ/athenz/commit/69175958bc39efe28b6ce9b4d34552cc2ef4fb19", "message": "revert hard-coded athenz version", "committedDate": "2020-12-22T06:34:00Z", "type": "commit"}, {"oid": "609340aca8b13adac3abbc0e6267f151cd554fcd", "url": "https://github.com/AthenZ/athenz/commit/609340aca8b13adac3abbc0e6267f151cd554fcd", "message": "Merge tag 'v1.9.26' into helm-charts\n\n[maven-release-plugin] copy for tag v1.9.26", "committedDate": "2020-12-22T07:08:15Z", "type": "commit"}, {"oid": "5447e0feefcdcade558d9319fb879443795a5bc4", "url": "https://github.com/AthenZ/athenz/commit/5447e0feefcdcade558d9319fb879443795a5bc4", "message": "Update helm charts", "committedDate": "2020-12-22T07:29:19Z", "type": "commit"}, {"oid": "b94e9a1caef5925c74d5466002e7de4813672b78", "url": "https://github.com/AthenZ/athenz/commit/b94e9a1caef5925c74d5466002e7de4813672b78", "message": "Update index.yaml", "committedDate": "2020-12-22T07:52:02Z", "type": "commit"}, {"oid": "9ed00c367a748b25fe038dbb34837efc57e64f73", "url": "https://github.com/AthenZ/athenz/commit/9ed00c367a748b25fe038dbb34837efc57e64f73", "message": "change package", "committedDate": "2020-12-22T08:50:02Z", "type": "commit"}, {"oid": "220b469221957f798d130612a57cb2ad2c4913a6", "url": "https://github.com/AthenZ/athenz/commit/220b469221957f798d130612a57cb2ad2c4913a6", "message": "Update helm charts", "committedDate": "2020-12-22T08:52:32Z", "type": "commit"}, {"oid": "436b7ebbdf647fe4d8705ab7c08cbeeda91b88ad", "url": "https://github.com/AthenZ/athenz/commit/436b7ebbdf647fe4d8705ab7c08cbeeda91b88ad", "message": "Updated helm doc", "committedDate": "2020-12-22T09:02:04Z", "type": "commit"}, {"oid": "3f6fbeb67f2f4f96a775b1b82ba86df6133112a9", "url": "https://github.com/AthenZ/athenz/commit/3f6fbeb67f2f4f96a775b1b82ba86df6133112a9", "message": "Update charts", "committedDate": "2020-12-22T09:18:45Z", "type": "commit"}, {"oid": "5b8d89bd866495e5c3242cc52c562ac5173a1dd9", "url": "https://github.com/AthenZ/athenz/commit/5b8d89bd866495e5c3242cc52c562ac5173a1dd9", "message": "Delete kubernetes", "committedDate": "2020-12-22T09:24:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ2Mzc5Mg==", "url": "https://github.com/AthenZ/athenz/pull/1222#discussion_r547463792", "bodyText": "@WindzCUHK I changed this value to 364 since chrome enforces maximum expiry on certificates now and it doesnt like 10 year valid certificate, when zms is used from browser for the UI", "author": "abvaidya", "createdAt": "2020-12-22T19:24:11Z", "path": "docker/sample/zms/create-self-signed-certs.sh", "diffHunk": "@@ -8,14 +8,14 @@ cd \"$(dirname \"$0\")\"\n echo 'running...'\n \n # create CSR\n-CN='Sample Self Signed ZMS' SAN=\"${ZMS_HOST}\" openssl req -nodes \\\n+CN='Sample Self Signed ZMS' SAN=\"${ZMS_HOST}\" IPSAN=\"${HOST_EXTERNAL_IP}\" openssl req -nodes \\\n   -config \"${SELF_SIGN_CNF_PATH}\" \\\n   -reqexts v3_req -extensions usr_cert \\\n   -newkey rsa:4096 \\\n   -keyout \"${DEV_ZMS_CERT_KEY_PATH}\" \\\n   -out \"${DEV_ZMS_CSR_PATH}\" 2> /dev/null\n # sign request\n-SAN=\"${ZMS_HOST}\" openssl x509 -req -days 364 \\", "originalCommit": "5b8d89bd866495e5c3242cc52c562ac5173a1dd9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU4NTUxMw==", "url": "https://github.com/AthenZ/athenz/pull/1222#discussion_r547585513", "bodyText": "I changed this parameter to 364 days.", "author": "falz-tino", "createdAt": "2020-12-23T01:08:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ2Mzc5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ2NDA2Nw==", "url": "https://github.com/AthenZ/athenz/pull/1222#discussion_r547464067", "bodyText": "same as above", "author": "abvaidya", "createdAt": "2020-12-22T19:24:29Z", "path": "docker/sample/zts/create-self-signed-certs.sh", "diffHunk": "@@ -10,14 +10,14 @@ echo 'running...'\n ### ----------------------------------------------------------------\n # ZTS server certificate\n # create CSR\n-CN='Sample Self Signed ZTS' SAN=\"${ZTS_HOST}\" openssl req -nodes \\\n+CN='Sample Self Signed ZTS' SAN=\"${ZTS_HOST}\" IPSAN=\"${HOST_EXTERNAL_IP}\" openssl req -nodes \\\n   -config \"${SELF_SIGN_CNF_PATH}\" \\\n   -reqexts v3_req -extensions usr_cert \\\n   -newkey rsa:4096 \\\n   -keyout \"${DEV_ZTS_CERT_KEY_PATH}\" \\\n   -out \"${DEV_ZTS_CSR_PATH}\" 2> /dev/null\n # sign request\n-SAN=\"${ZTS_HOST}\" openssl x509 -req -days 364 \\", "originalCommit": "5b8d89bd866495e5c3242cc52c562ac5173a1dd9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU4NTUzNg==", "url": "https://github.com/AthenZ/athenz/pull/1222#discussion_r547585536", "bodyText": "I changed this parameter to 364 days.", "author": "falz-tino", "createdAt": "2020-12-23T01:08:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ2NDA2Nw=="}], "type": "inlineReview"}, {"oid": "02505c3b5f7acdf944aedac12d021ee37b19dd4a", "url": "https://github.com/AthenZ/athenz/commit/02505c3b5f7acdf944aedac12d021ee37b19dd4a", "message": "Changed certificate expiration to 364 days", "committedDate": "2020-12-23T01:07:28Z", "type": "commit"}]}