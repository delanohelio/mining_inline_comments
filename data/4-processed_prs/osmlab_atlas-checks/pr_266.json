{"pr_number": 266, "pr_title": "OceanBleedingCheck new check", "pr_createdAt": "2020-03-03T20:32:51Z", "pr_url": "https://github.com/osmlab/atlas-checks/pull/266", "timeline": [{"oid": "2f9a1ffbd453db10a6ff297eff56993af1563171", "url": "https://github.com/osmlab/atlas-checks/commit/2f9a1ffbd453db10a6ff297eff56993af1563171", "message": "intital commit ocean bleeding check", "committedDate": "2020-02-06T20:32:55Z", "type": "commit"}, {"oid": "eb9ccd632bd3cee1decffb18fa1c7d5bbd66d506", "url": "https://github.com/osmlab/atlas-checks/commit/eb9ccd632bd3cee1decffb18fa1c7d5bbd66d506", "message": "add invalid ocean tags", "committedDate": "2020-02-12T21:48:45Z", "type": "commit"}, {"oid": "ceb5518293a6d6d84caa517dfe6b638c3bf1edb3", "url": "https://github.com/osmlab/atlas-checks/commit/ceb5518293a6d6d84caa517dfe6b638c3bf1edb3", "message": "Merge https://github.com/osmlab/atlas-checks into waterBleederCheck", "committedDate": "2020-03-03T01:00:32Z", "type": "commit"}, {"oid": "c6c5dd2220fb4749aac226411efc69335552c8f1", "url": "https://github.com/osmlab/atlas-checks/commit/c6c5dd2220fb4749aac226411efc69335552c8f1", "message": "Merge https://github.com/osmlab/atlas-checks into waterBleederCheck", "committedDate": "2020-03-03T18:01:30Z", "type": "commit"}, {"oid": "142072f4b238b746b7ccf4aa6db96e40b1469f37", "url": "https://github.com/osmlab/atlas-checks/commit/142072f4b238b746b7ccf4aa6db96e40b1469f37", "message": "add LCWB config data; update OceanBleedingCheck", "committedDate": "2020-03-03T18:02:29Z", "type": "commit"}, {"oid": "392b4baeb5fbeb28051e2218ef89666c288be55f", "url": "https://github.com/osmlab/atlas-checks/commit/392b4baeb5fbeb28051e2218ef89666c288be55f", "message": "OceanBleeding check make configurable items", "committedDate": "2020-03-03T18:33:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMwMTUzMg==", "url": "https://github.com/osmlab/atlas-checks/pull/266#discussion_r387301532", "bodyText": "Could you also add the md doc for this check and update the available_checks.md file to include this check?", "author": "sayas01", "createdAt": "2020-03-03T21:23:25Z", "path": "config/configuration.json", "diffHunk": "@@ -964,5 +969,20 @@\n       \"difficulty\":\"NORMAL\",\n       \"defaultPriority\":\"MEDIUM\"\n     }\n+  },\n+  \"OceanBleedingCheck\": {", "originalCommit": "392b4baeb5fbeb28051e2218ef89666c288be55f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg3OTY5OQ==", "url": "https://github.com/osmlab/atlas-checks/pull/266#discussion_r387879699", "bodyText": "nit: this could be\n\"ocean\" : {\n     \"valid\": \n     \"invalid\":\n  }", "author": "sayas01", "createdAt": "2020-03-04T19:19:12Z", "path": "config/configuration.json", "diffHunk": "@@ -964,5 +969,20 @@\n       \"difficulty\":\"NORMAL\",\n       \"defaultPriority\":\"MEDIUM\"\n     }\n+  },\n+  \"OceanBleedingCheck\": {\n+    \"ocean.valid\": \"natural->strait,channel,fjord,sound,bay|harbour->*&harbour->!no|estuary->*&estuary->!no|bay->*&bay->!no|place->sea|seamark:type->harbour,harbour_basin,sea_area|water->bay,cove,harbour|waterway->artificial,dock\",", "originalCommit": "392b4baeb5fbeb28051e2218ef89666c288be55f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk1ODYyNA==", "url": "https://github.com/osmlab/atlas-checks/pull/266#discussion_r387958624", "bodyText": "That's more readable, agreed", "author": "seancoulter", "createdAt": "2020-03-04T21:56:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg3OTY5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg4MjM1OQ==", "url": "https://github.com/osmlab/atlas-checks/pull/266#discussion_r387882359", "bodyText": "Could you also add a check with non empty config?", "author": "sayas01", "createdAt": "2020-03-04T19:24:03Z", "path": "src/test/java/org/openstreetmap/atlas/checks/validation/intersections/OceanBleedingCheckTest.java", "diffHunk": "@@ -0,0 +1,61 @@\n+package org.openstreetmap.atlas.checks.validation.intersections;\n+\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.openstreetmap.atlas.checks.configuration.ConfigurationResolver;\n+import org.openstreetmap.atlas.checks.validation.verifier.ConsumerBasedExpectedCheckVerifier;\n+\n+/**\n+ * Unit tests for {@link OceanBleedingCheck}\n+ *\n+ * @author seancoulter\n+ */\n+public class OceanBleedingCheckTest\n+{\n+    @Rule\n+    public OceanBleedingCheckTestRule setup = new OceanBleedingCheckTestRule();\n+\n+    @Rule\n+    public ConsumerBasedExpectedCheckVerifier verifier = new ConsumerBasedExpectedCheckVerifier();\n+\n+    @Test\n+    public void invalidBuildingBleedingIntoOcean()", "originalCommit": "392b4baeb5fbeb28051e2218ef89666c288be55f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk1ODUxOA==", "url": "https://github.com/osmlab/atlas-checks/pull/266#discussion_r387958518", "bodyText": "Done, see ed33586", "author": "seancoulter", "createdAt": "2020-03-04T21:56:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg4MjM1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzkzOTY4MA==", "url": "https://github.com/osmlab/atlas-checks/pull/266#discussion_r387939680", "bodyText": "Do \"offending\" and \"invalid\" have the same definitions? If so, we should stick to one naming convention", "author": "danielduhh", "createdAt": "2020-03-04T21:17:51Z", "path": "config/configuration.json", "diffHunk": "@@ -964,5 +969,20 @@\n       \"difficulty\":\"NORMAL\",\n       \"defaultPriority\":\"MEDIUM\"\n     }\n+  },\n+  \"OceanBleedingCheck\": {\n+    \"ocean.valid\": \"natural->strait,channel,fjord,sound,bay|harbour->*&harbour->!no|estuary->*&estuary->!no|bay->*&bay->!no|place->sea|seamark:type->harbour,harbour_basin,sea_area|water->bay,cove,harbour|waterway->artificial,dock\",\n+    \"ocean.invalid\": \"man_made->breakwater,pier|natural->beach,marsh,swamp|water->marsh|wetland->bog,fen,mangrove,marsh,saltern,saltmarsh,string_bog,swamp,wet_meadow|landuse->*\",\n+    \"highway.minimum\": \"path\",\n+    \"highways.exclude\": [\n+      \"bus_guideway\"\n+    ],\n+    \"lineItems.offending\": \"railway->rail,narrow_gauge,preserved,subway,disused,monorail,tram,light_rail,funicular,construction,miniature\",", "originalCommit": "392b4baeb5fbeb28051e2218ef89666c288be55f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk0OTg5MA==", "url": "https://github.com/osmlab/atlas-checks/pull/266#discussion_r387949890", "bodyText": "They're not quite the same--offending refers to tags that must be found on a lineItem for it to be considered bleeding into the ocean. But if it were called valid/invalid I think that would make it less clear if they should be considered or not\nInvalid refers to tags that cannot be found on an ocean for that ocean to be considered for the check.", "author": "seancoulter", "createdAt": "2020-03-04T21:39:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzkzOTY4MA=="}], "type": "inlineReview"}, {"oid": "ed3358632b6fcdb4074a1a80d0a354fb5f74dc97", "url": "https://github.com/osmlab/atlas-checks/commit/ed3358632b6fcdb4074a1a80d0a354fb5f74dc97", "message": "add readme, update unit tests", "committedDate": "2020-03-04T21:54:53Z", "type": "commit"}, {"oid": "9fbfb620ad93bc1ad06df92e26fe4af279629087", "url": "https://github.com/osmlab/atlas-checks/commit/9fbfb620ad93bc1ad06df92e26fe4af279629087", "message": "Merge https://github.com/osmlab/atlas-checks into waterBleederCheck", "committedDate": "2020-03-04T21:59:04Z", "type": "commit"}, {"oid": "f6aeadcde2bb808e16f589ba815f027ade6de017", "url": "https://github.com/osmlab/atlas-checks/commit/f6aeadcde2bb808e16f589ba815f027ade6de017", "message": "spotlessApply", "committedDate": "2020-03-04T21:59:43Z", "type": "commit"}, {"oid": "a985be2217811194a0da3bdb93f98c3760120cad", "url": "https://github.com/osmlab/atlas-checks/commit/a985be2217811194a0da3bdb93f98c3760120cad", "message": "revert change", "committedDate": "2020-03-04T22:01:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk2ODQ0NA==", "url": "https://github.com/osmlab/atlas-checks/pull/266#discussion_r387968444", "bodyText": "This could be\nhighway:{\nminimum: path,\nexclude: []\n}", "author": "danielduhh", "createdAt": "2020-03-04T22:17:51Z", "path": "config/configuration.json", "diffHunk": "@@ -964,5 +969,22 @@\n       \"difficulty\":\"NORMAL\",\n       \"defaultPriority\":\"MEDIUM\"\n     }\n+  },\n+  \"OceanBleedingCheck\": {\n+    \"ocean\": {\n+      \"valid\": \"natural->strait,channel,fjord,sound,bay|harbour->*&harbour->!no|estuary->*&estuary->!no|bay->*&bay->!no|place->sea|seamark:type->harbour,harbour_basin,sea_area|water->bay,cove,harbour|waterway->artificial,dock\",\n+      \"invalid\": \"man_made->breakwater,pier|natural->beach,marsh,swamp|water->marsh|wetland->bog,fen,mangrove,marsh,saltern,saltmarsh,string_bog,swamp,wet_meadow|landuse->*\"\n+    },\n+    \"highway.minimum\": \"path\",", "originalCommit": "a985be2217811194a0da3bdb93f98c3760120cad", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2e3f51a0670c742739175a5236a52d824ac1d5f9", "url": "https://github.com/osmlab/atlas-checks/commit/2e3f51a0670c742739175a5236a52d824ac1d5f9", "message": "update config value name", "committedDate": "2020-03-04T22:31:02Z", "type": "commit"}]}