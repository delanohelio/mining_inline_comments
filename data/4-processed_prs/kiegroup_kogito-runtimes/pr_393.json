{"pr_number": 393, "pr_title": "[KOGITO-783] [KOGITO-786] Quarkus/Spring Boot archetypes - provide Swagger OpenApi on the confi\u2026", "pr_createdAt": "2020-03-26T12:49:05Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/393", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1MjkzNQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398552935", "bodyText": "@tiagodolphine can you include kogito.service.url in here. Default value would be http://localhost:8080", "author": "cristianonicolai", "createdAt": "2020-03-26T13:01:19Z", "path": "archetypes/kogito-quarkus-archetype/src/main/resources/archetype-resources/src/main/resources/application.properties", "diffHunk": "@@ -0,0 +1,19 @@\n+#\n+# Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+", "originalCommit": "45eba207fd18dd4923ed5ec3174b897c536b1e21", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2MDU3Mg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398560572", "bodyText": "+1", "author": "tiagodolphine", "createdAt": "2020-03-26T13:13:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1MjkzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1MzIzNA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398553234", "bodyText": "same here for kogito.service.url.", "author": "cristianonicolai", "createdAt": "2020-03-26T13:01:48Z", "path": "archetypes/kogito-springboot-archetype/src/main/resources/archetype-resources/src/main/resources/application.properties", "diffHunk": "@@ -1,5 +1,6 @@\n server.address=0.0.0.0\n ", "originalCommit": "45eba207fd18dd4923ed5ec3174b897c536b1e21", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2MDY2NA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398560664", "bodyText": "+1", "author": "tiagodolphine", "createdAt": "2020-03-26T13:13:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1MzIzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1NDQ3NQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398554475", "bodyText": "would prefer something more creative than test, but not sure perhaps, kogito or myprocess??", "author": "cristianonicolai", "createdAt": "2020-03-26T13:03:53Z", "path": "archetypes/kogito-quarkus-archetype/src/main/resources/archetype-resources/README.md", "diffHunk": "@@ -21,7 +21,7 @@\n Generated application comes with sample test process that allows you to verify if the application is working as expected. Simply execute following command to try it out\n \n ```sh\n-curl -d '{}' -H \"Content-Type: application/json\" -X POST http://localhost:8080/tests                                                                                                    \n+curl -d '{}' -H \"Content-Type: application/json\" -X POST http://localhost:8080/test", "originalCommit": "45eba207fd18dd4923ed5ec3174b897c536b1e21", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2MzA5MQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398563091", "bodyText": "no problem, we just need to decide a process id then I change it on the .bpmn2 and the README.\nI think we can use some more domain approach to show the value of kogito providing the endpoints based on this, myprocess seems not to give this domain approach, WDYT?", "author": "tiagodolphine", "createdAt": "2020-03-26T13:17:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1NDQ3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2NjUxMg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398566512", "bodyText": "yeah, agree to that, any suggestion?", "author": "cristianonicolai", "createdAt": "2020-03-26T13:22:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1NDQ3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODc2NjgyNw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398766827", "bodyText": "Not very creative either, but maybe \"/hello-kogito\" .... as the process simply has a 'System.out.println(\"Hello World.\");\" ....", "author": "DuncanDoyle", "createdAt": "2020-03-26T17:42:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1NDQ3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODc3Mzk0Nw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398773947", "bodyText": "what about \"greetings\"?", "author": "tiagodolphine", "createdAt": "2020-03-26T17:52:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1NDQ3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAxODMyNA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r399018324", "bodyText": "+1", "author": "cristianonicolai", "createdAt": "2020-03-27T03:40:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1NDQ3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTIzODMzMA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r399238330", "bodyText": "done", "author": "tiagodolphine", "createdAt": "2020-03-27T12:46:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1NDQ3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2MjM2OA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398562368", "bodyText": "with the backslashes the oneliner should not be necessary", "author": "evacchi", "createdAt": "2020-03-26T13:16:13Z", "path": "archetypes/kogito-quarkus-archetype/README.md", "diffHunk": "@@ -1,18 +1,18 @@\n # Generate KaaS project based on Quarkus runtime\n \n-To generate new project for KaaS (Kjar as a Service) based on Quarkus use following command\n+To generate new project for KaaS (Kjar as a Service) based on [Quarkus](https://quarkus.io/) use following command\n \n     ```\n-     mvn archetype:generate \n-    -DarchetypeGroupId=org.kie.kogito\n-    -DarchetypeArtifactId=kogito-quarkus-archetype\n-    -DarchetypeVersion=8.0.0-SNAPSHOT \n-    -DgroupId=com.company \n-    -DartifactId=sample-kogito     \n+     mvn archetype:generate \\\n+    -DarchetypeGroupId=org.kie.kogito \\\n+    -DarchetypeArtifactId=kogito-quarkus-archetype \\\n+    -DarchetypeVersion=8.0.0-SNAPSHOT \\\n+    -DgroupId=com.company \\\n+    -DartifactId=sample-kogito\n     ```\n \n or cut/paste this one-liner\n \n     ```\n-     mvn archetype:generate -DarchetypeGroupId=org.kie.kogito -DarchetypeArtifactId=kogito-quarkus-archetype -DarchetypeVersion=8.0.0-SNAPSHOT -DgroupId=com.company -DartifactId=sample-kogito     \n+     mvn archetype:generate -DarchetypeGroupId=org.kie.kogito -DarchetypeArtifactId=kogito-quarkus-archetype -DarchetypeVersion=8.0.0-SNAPSHOT -DgroupId=com.company -DartifactId=sample-kogito", "originalCommit": "45eba207fd18dd4923ed5ec3174b897c536b1e21", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODc3NDM3Mg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r398774372", "bodyText": "+1 we can remove the oneliner", "author": "tiagodolphine", "createdAt": "2020-03-26T17:52:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2MjM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTIzODI5Mw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r399238293", "bodyText": "done", "author": "tiagodolphine", "createdAt": "2020-03-27T12:46:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2MjM2OA=="}], "type": "inlineReview"}, {"oid": "e9849bb2753e8b00e5982a90584d6e7f1b8468ef", "url": "https://github.com/kiegroup/kogito-runtimes/commit/e9849bb2753e8b00e5982a90584d6e7f1b8468ef", "message": "Quarkus/Spring Boot archetypes - provide Swagger OpenApi on the configured path, enable Swagger-UI, fiz README, inserintg application.properties, Fix process ID to test\n\nChanging sample process id to greetings, apply other PR comments", "committedDate": "2020-03-27T12:16:35Z", "type": "commit"}, {"oid": "e9849bb2753e8b00e5982a90584d6e7f1b8468ef", "url": "https://github.com/kiegroup/kogito-runtimes/commit/e9849bb2753e8b00e5982a90584d6e7f1b8468ef", "message": "Quarkus/Spring Boot archetypes - provide Swagger OpenApi on the configured path, enable Swagger-UI, fiz README, inserintg application.properties, Fix process ID to test\n\nChanging sample process id to greetings, apply other PR comments", "committedDate": "2020-03-27T12:16:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5NDM0MA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r400094340", "bodyText": "@cristianonicolai / @tiagodolphine just a question about this property. What is the difference between this and server.servlet.context-path? Won't it map all application endpoints to /docs?", "author": "MarianMacik", "createdAt": "2020-03-30T10:43:18Z", "path": "archetypes/kogito-springboot-archetype/src/main/resources/archetype-resources/src/main/resources/application.properties", "diffHunk": "@@ -1,5 +1,8 @@\n server.address=0.0.0.0\n \n+#static content generated by swagger-maven-plugin\n spring.mvc.servlet.path=/docs", "originalCommit": "e9849bb2753e8b00e5982a90584d6e7f1b8468ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc2MTQyNA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/393#discussion_r401761424", "bodyText": "@MarianMacik ok, let me explain because I had the same question :)\nThe current approach is to generate the endpoints based on JAX-RS (for Spring and Quarkus), in the case of Spring it is not the default behavior, so we need to add the reasteasy implementation. So in this way, the endpoints are generated based on the reasteasy.\nWhen providing static content on Spring, it uses the Spring Web MVC, and we need to provide static content since the swagger plugin generates the json file during the build time, and to expose it we need to have the Spring Web MVC configured on some path, that should be different from resteasy (the root /) that is used on the endpoints with JAX-RS.\nSo, if we change the server.servlet.context-path it will change the resteasy to path, not the spring mvc path. It is confusing I know, but it is the way it works now, and IMO the right approach is to generate the endpoints code for Spring based on the Spring Web APIs not on JAX-RS, this will allow many benefits like removing this config, like embedding a Swagger-UI and removing the swagger-plugin to generate the static json, because we can rely on Spring Fox to generate it.\nWell in summary that is it.", "author": "tiagodolphine", "createdAt": "2020-04-01T16:49:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5NDM0MA=="}], "type": "inlineReview"}]}