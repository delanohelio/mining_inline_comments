{"pr_number": 492, "pr_title": "KOGITO-1895 Setup CI Build against Drools SNAPSHOT", "pr_createdAt": "2020-05-06T13:50:36Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/492", "timeline": [{"oid": "c52c1144426176cf78a4bac0dfa76b5562d1a234", "url": "https://github.com/kiegroup/kogito-runtimes/commit/c52c1144426176cf78a4bac0dfa76b5562d1a234", "message": "KOGITO-1895 Setup CI Build against Drools SNAPSHOT", "committedDate": "2020-05-06T13:46:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzNDUwNA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r420834504", "bodyText": "just noticed ... we could put that as environment var (between options and stages part)\nenvironment {\n    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=7.37.0-SNAPSHOT\"\n}\n\nand then modify the command:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)\n          \n          \n            \n                                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n          \n      \n    \n    \n  \n\nNote the double quotes instead of single quote\nthat would avoid to repeat each time the correct version", "author": "radtriste", "createdAt": "2020-05-06T14:26:28Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,50 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)", "originalCommit": "c52c1144426176cf78a4bac0dfa76b5562d1a234", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg3MTA2MA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r420871060", "bodyText": "That should do, otherwise, you could look into https://www.mojohaus.org/versions-maven-plugin/examples/advancing-dependency-versions.html\nuse-latest-snapshots seems that could do the trick to keep the job always up-to-date.", "author": "cristianonicolai", "createdAt": "2020-05-06T15:12:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzNDUwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA1MzM4MQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422053381", "bodyText": "@cristianonicolai", "author": "evacchi", "createdAt": "2020-05-08T09:51:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgzNDUwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg2ODE0MQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r420868141", "bodyText": "@evacchi also add the post-build notifications, see https://github.com/kiegroup/kogito-runtimes/blob/master/Jenkinsfile.deploy#L56", "author": "cristianonicolai", "createdAt": "2020-05-06T15:08:41Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,50 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings('clean install -Dversion.org.kie7=7.37.0-SNAPSHOT', false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        always {", "originalCommit": "c52c1144426176cf78a4bac0dfa76b5562d1a234", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4f5563bb06341be1519b51e65c132938cf29f138", "url": "https://github.com/kiegroup/kogito-runtimes/commit/4f5563bb06341be1519b51e65c132938cf29f138", "message": "use 'mvn versions:display-property-updates' to get latest version", "committedDate": "2020-05-08T10:42:20Z", "type": "commit"}, {"oid": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "url": "https://github.com/kiegroup/kogito-runtimes/commit/8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "message": "postbuild", "committedDate": "2020-05-08T10:43:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NjY2OQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796669", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n          \n          \n            \n                        emailext body: 'Kogito daily Drools #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "author": "cristianonicolai", "createdAt": "2020-05-11T05:53:56Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "originalCommit": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NjczMA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796730", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                 subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n          \n          \n            \n                                 subject: 'Kogito daily Drools #${BRANCH_NAME}',", "author": "cristianonicolai", "createdAt": "2020-05-11T05:54:06Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                    'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',", "originalCommit": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Njc3Ng==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796776", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n          \n          \n            \n                        emailext body: 'Kogito daily Drools #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "author": "cristianonicolai", "createdAt": "2020-05-11T05:54:15Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                    'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n+                     to: env.KOGITO_CI_EMAIL_TO\n+        }\n+        unstable {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +", "originalCommit": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NjgyMA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422796820", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                 subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n          \n          \n            \n                                 subject: 'Kogito daily Drools #${BRANCH_NAME}',", "author": "cristianonicolai", "createdAt": "2020-05-11T05:54:23Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-examples.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-examples']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-examples.git']]])\n+                dir(\"kogito-examples\") {\n+                    script {\n+                         maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+\n+    }\n+    post {\n+        failure {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                    'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',\n+                     to: env.KOGITO_CI_EMAIL_TO\n+        }\n+        unstable {\n+            emailext body: 'Kogito daily snapshot deploy #${BUILD_NUMBER} was: ' + \"${currentBuild.currentResult}\" +  '\\n' +\n+                     'Please look here: ${BUILD_URL} ',\n+                     subject: 'Kogito daily snapshot deploy #${BRANCH_NAME}',", "originalCommit": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5NzcyOA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422797728", "bodyText": "because the Jenkins file is in kogito-runtimes, it will automatically checkout kogito-runtimes already, see https://github.com/kiegroup/kogito-runtimes/blob/master/Jenkinsfile.deploy#L27.", "author": "cristianonicolai", "createdAt": "2020-05-11T05:57:00Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])", "originalCommit": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Nzc2OQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422797769", "bodyText": "missing kogito-apps?", "author": "cristianonicolai", "createdAt": "2020-05-11T05:57:09Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {\n+                    MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                checkout([$class: 'GitSCM', branches: [[name: 'master']], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-runtimes.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-runtimes']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-runtimes.git']]])\n+                dir(\"kogito-runtimes\") {\n+                    script {\n+                        maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                    }\n+                }\n+            }\n+        }\n+        stage('Build kogito-examples') {", "originalCommit": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTM3MQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422889371", "bodyText": "do we need to test kogito-apps against drools ?", "author": "radtriste", "createdAt": "2020-05-11T08:58:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Nzc2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg5NTk4NQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422895985", "bodyText": "probably not, but I would keep for the sake of consistency across builds.", "author": "cristianonicolai", "createdAt": "2020-05-11T09:09:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Nzc2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAzODA2OQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423038069", "bodyText": "ok that was intended, but I will bring it back -- it's daily after all", "author": "evacchi", "createdAt": "2020-05-11T13:27:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5Nzc2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5ODA3Nw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422798077", "bodyText": "this is nice, I would just suggest merging with Build kogito_runtimes stage", "author": "cristianonicolai", "createdAt": "2020-05-11T05:57:56Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (", "originalCommit": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4ODY4OA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422888688", "bodyText": "This can be done in environment in fact. See https://www.jenkins.io/doc/book/pipeline/jenkinsfile/#setting-environment-variables-dynamically", "author": "radtriste", "createdAt": "2020-05-11T08:57:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5ODA3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0MzY1OA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423043658", "bodyText": "@cristianonicolai I think I'd rather keep it in the first stage so that it's easier to read. But we can move it...", "author": "evacchi", "createdAt": "2020-05-11T13:35:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc5ODA3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTE4NQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r422889185", "bodyText": "This should be put under stages parent, not here ...", "author": "radtriste", "createdAt": "2020-05-11T08:58:14Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,70 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                DROOLS_VERSION = sh (\n+                    // query mvn to get the latest version\n+                    script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+                    returnStdout: true).trim()\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+                environment {", "originalCommit": "8c15ef901279a1bff9a956d437f3ef3e97a08fd1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NDI5NQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423044295", "bodyText": "you mean right under stages {} ?", "author": "evacchi", "createdAt": "2020-05-11T13:36:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTE4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NzIxMQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423047211", "bodyText": "it should be look better now (it's under pipelines, like the main Jenkinsfile)", "author": "evacchi", "createdAt": "2020-05-11T13:40:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTE4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1MjMyNA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423052324", "bodyText": "yeah I meant under pipeline ...", "author": "radtriste", "createdAt": "2020-05-11T13:48:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg4OTE4NQ=="}], "type": "inlineReview"}, {"oid": "8c812f3809f8b31ba94ce8325760c0254da687db", "url": "https://github.com/kiegroup/kogito-runtimes/commit/8c812f3809f8b31ba94ce8325760c0254da687db", "message": "Update Jenkinsfile.drools\n\nCo-authored-by: Cristiano Nicolai <cristiano.nicolai@gmail.com>", "committedDate": "2020-05-11T13:26:33Z", "type": "commit"}, {"oid": "331e6e310847df6a198853b823c0abe744074566", "url": "https://github.com/kiegroup/kogito-runtimes/commit/331e6e310847df6a198853b823c0abe744074566", "message": "Update Jenkinsfile.drools\n\nCo-authored-by: Cristiano Nicolai <cristiano.nicolai@gmail.com>", "committedDate": "2020-05-11T13:26:55Z", "type": "commit"}, {"oid": "cf49fa4ee467bfee4f769529e09d8cf21b8663ac", "url": "https://github.com/kiegroup/kogito-runtimes/commit/cf49fa4ee467bfee4f769529e09d8cf21b8663ac", "message": "Update Jenkinsfile.drools\n\nCo-authored-by: Cristiano Nicolai <cristiano.nicolai@gmail.com>", "committedDate": "2020-05-11T13:27:03Z", "type": "commit"}, {"oid": "3a04ef72d9c3bb1435da3619bd9a9467cad33f54", "url": "https://github.com/kiegroup/kogito-runtimes/commit/3a04ef72d9c3bb1435da3619bd9a9467cad33f54", "message": "Update Jenkinsfile.drools\n\nCo-authored-by: Cristiano Nicolai <cristiano.nicolai@gmail.com>", "committedDate": "2020-05-11T13:28:18Z", "type": "commit"}, {"oid": "9b4336f2114e2712c96e0e21e375d484501963fa", "url": "https://github.com/kiegroup/kogito-runtimes/commit/9b4336f2114e2712c96e0e21e375d484501963fa", "message": "fixes", "committedDate": "2020-05-11T13:40:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1NjczNQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423056735", "bodyText": "This is no PR check or ?\nwe should not have the CHANGE_* vars here", "author": "radtriste", "createdAt": "2020-05-11T13:54:40Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,92 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {\n+            steps {\n+                script {\n+                    mailer.buildLogScriptPR()\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                script {\n+                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                }\n+            }\n+        }\n+        stage('Build kogito-apps') {\n+            steps {\n+                dir(\"kogito-apps\") {\n+                    script {\n+                        githubscm.checkoutIfExists('kogito-apps', \"$CHANGE_AUTHOR\", \"$CHANGE_BRANCH\", 'kiegroup', \"$CHANGE_TARGET\")", "originalCommit": "9b4336f2114e2712c96e0e21e375d484501963fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA5NTc1MA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423095750", "bodyText": "pushed change", "author": "evacchi", "createdAt": "2020-05-11T14:49:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA1NjczNQ=="}], "type": "inlineReview"}, {"oid": "33da37897f59e12beef59a9fddf2f88769b7da6d", "url": "https://github.com/kiegroup/kogito-runtimes/commit/33da37897f59e12beef59a9fddf2f88769b7da6d", "message": "use alt checkout syntax", "committedDate": "2020-05-11T14:48:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNDM1Ng==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423514356", "bodyText": "we dont need this step. the email notification on zulip should be enough.", "author": "cristianonicolai", "createdAt": "2020-05-12T07:19:37Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {", "originalCommit": "33da37897f59e12beef59a9fddf2f88769b7da6d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNDg4MA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423514880", "bodyText": "@evacchi I mentioning removing this step because there is no point on doing sh 'printenv', I believe that was only for debugging.", "author": "cristianonicolai", "createdAt": "2020-05-12T07:20:35Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'", "originalCommit": "33da37897f59e12beef59a9fddf2f88769b7da6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU3NDg2Ng==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423574866", "bodyText": "oh ok", "author": "evacchi", "createdAt": "2020-05-12T08:58:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNDg4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU3MzA5Ng==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/492#discussion_r423573096", "bodyText": "checkout should be outside the dir, else the folder might not exists", "author": "radtriste", "createdAt": "2020-05-12T08:55:33Z", "path": "Jenkinsfile.drools", "diffHunk": "@@ -0,0 +1,96 @@\n+@Library('jenkins-pipeline-shared-libraries')_\n+\n+pipeline {\n+    agent {\n+        label 'kie-rhel7 && kie-mem16g'\n+    }\n+    tools {\n+        maven 'kie-maven-3.6.2'\n+        jdk 'kie-jdk11'\n+    }\n+    triggers {\n+        cron ('H 10 * * *')\n+    }\n+    options {\n+        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n+        timeout(time: 90, unit: 'MINUTES')\n+    }\n+    environment {\n+        KOGITO_CI_EMAIL_TO = credentials('KOGITO_CI_EMAIL_TO')\n+        // query mvn to get the latest version\n+        DROOLS_VERSION = \"\"\"${sh (\n+            script: '$(mvn versions:display-property-updates -DincludeProperties=version.org.kie7 -DallowSnapshots -N  | grep version.org.kie7| cut -d\" \" -f8))'\n+            returnStdout: true).trim()}\"\"\"\n+        MAVEN_EXTRA_ARGS=\"-Dversion.org.kie7=${DROOLS_VERSION}\"\n+    }\n+    stages {\n+        stage('Initialize') {\n+            steps {\n+                sh 'printenv'\n+                echo \"Latest kie7 verson is: ${DROOLS_VERSION}\"\n+            }\n+        }\n+        stage('build sh script') {\n+            steps {\n+                script {\n+                    mailer.buildLogScriptPR()\n+                }\n+            }\n+        }\n+        stage('Build kogito-runtimes') {\n+            steps {\n+                script {\n+                    maven.runMavenWithSubmarineSettings(\"clean install ${MAVEN_EXTRA_ARGS}\", false)\n+                }\n+            }\n+        }\n+        stage('Build kogito-apps') {\n+            steps {\n+                dir(\"kogito-apps\") {\n+                    script {\n+                        checkout([$class: 'GitSCM', branches: [[name: env.BRANCH_NAME]], browser: [$class: 'GithubWeb', repoUrl: 'git@github.com:kiegroup/kogito-apps.git'], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'RelativeTargetDirectory', relativeTargetDir: 'kogito-apps']], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'kie-ci-user-key', url: 'git@github.com:kiegroup/kogito-apps.git']]])", "originalCommit": "33da37897f59e12beef59a9fddf2f88769b7da6d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8d2038b94573605ee7a1db9b3fef98b4ed458d38", "url": "https://github.com/kiegroup/kogito-runtimes/commit/8d2038b94573605ee7a1db9b3fef98b4ed458d38", "message": "fixes", "committedDate": "2020-05-12T13:19:38Z", "type": "commit"}]}