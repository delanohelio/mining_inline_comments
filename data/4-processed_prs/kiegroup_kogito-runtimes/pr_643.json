{"pr_number": 643, "pr_title": "KOGITO-2788 DMN endpoint for model introspection", "pr_createdAt": "2020-07-21T08:00:47Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/643", "timeline": [{"oid": "cf6c3585652b34c81f429a176583499b5e035f80", "url": "https://github.com/kiegroup/kogito-runtimes/commit/cf6c3585652b34c81f429a176583499b5e035f80", "message": "update kogito-codegen test file count, consistent with .dmn_nologic gen", "committedDate": "2020-07-21T11:20:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc2ODA5Mw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/643#discussion_r460768093", "bodyText": "To be honest I think RESOURCE was intended for the same use case but it is only used for autogenerated Grafana dashboards that are not needed to be visible at runtime so we had not faced this problem but they are already generated resources done \"after generate-resources maven phase\".\nThus, what about update RESOURCE behavior to match your need? (/cc @r00ta )", "author": "danielezonca", "createdAt": "2020-07-27T09:37:15Z", "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/GeneratedFile.java", "diffHunk": "@@ -36,6 +36,10 @@\n         MESSAGE_CONSUMER( false ),\n         MESSAGE_PRODUCER( false ),\n         RESOURCE(false),\n+        /** Represent a cp resource automatically generated during codegen, so after generate-resources maven phase.\n+         * For Quarkus it will be added to target/classes and subject of GeneratedResourceBuildItem and NativeImageResourceBuildItem\n+         * When using the kogito-maven-plugin (and SB), it will be added to target/classes */\n+        GENERATED_CP_RESOURCE(false),", "originalCommit": "cf6c3585652b34c81f429a176583499b5e035f80", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc2OTk1OA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/643#discussion_r460769958", "bodyText": "Can't, since the behaviour is different.\nIf you remember, I asked this very question, and the response I got was that the Grafana resources are not \"classpath resources\" but are used for Containers.\nHence the reason why the behaviour for GENERATED_CP_RESOURCE is different of the one for RESOURCE .", "author": "tarilabs", "createdAt": "2020-07-27T09:40:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc2ODA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDgzNTY2MA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/643#discussion_r460835660", "bodyText": "Yes but @r00ta realized that there will be the same issue now with the operator: it has to access them in some way while for now in the example we use maven to \"provision\" the files ( https://github.com/kiegroup/kogito-examples/blob/stable/dmn-drools-quarkus-metrics/pom.xml#L100 ).", "author": "danielezonca", "createdAt": "2020-07-27T11:52:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc2ODA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDU5NQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/643#discussion_r460844595", "bodyText": "yet, it is a different use-case, it's not a classpath resource since it's not accessed from Java code", "author": "tarilabs", "createdAt": "2020-07-27T12:10:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc2ODA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg5NjAyNg==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/643#discussion_r460896026", "bodyText": "Hi @tarilabs @danielezonca , last week I started experimenting a bit the operator thing and one option would be to expose the generated dashboards with an endpoint in the kogito-runtime application. The endpoint might be exposed with the monitoring-addon, so that the operator can fetch them and do what is needed. If we want to go in that direction, we will have to turn the dashboards into classpath resources. I still have to close some tasks before that one, and I'd like to show a little demo to the operator's guys before moving forward.\nIf it's ok for you, if we will go into that direction I would refactor the runtime and rename GENERATED_CP_RESOURCE with RESOURCE so that we remove the possibility that a generated resource is outside the jar", "author": "r00ta", "createdAt": "2020-07-27T13:39:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc2ODA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyMjQ4Nw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/643#discussion_r460922487", "bodyText": "good for me, so we are not blocking this PR for future eventual work.\nI have no objection if later you will be refactoring out both resource variant as one, when you will work on it as part of the operator dashboard.", "author": "tarilabs", "createdAt": "2020-07-27T14:16:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc2ODA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NjA3MA==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/643#discussion_r462076070", "bodyText": "https://issues.redhat.com/browse/KOGITO-2901", "author": "danielezonca", "createdAt": "2020-07-29T06:50:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc2ODA5Mw=="}], "type": "inlineReview"}, {"oid": "2d9bcfdb1fb8a0d5d42484c7e3d17e31b54e7aeb", "url": "https://github.com/kiegroup/kogito-runtimes/commit/2d9bcfdb1fb8a0d5d42484c7e3d17e31b54e7aeb", "message": "WIP\nworking\n.\n.\n.\n.\nupdate kogito-codegen test file count, consistent with .dmn_nologic gen", "committedDate": "2020-07-29T14:17:06Z", "type": "forcePushed"}, {"oid": "fb78c209997226bbc366f39f64faee85bb9a5148", "url": "https://github.com/kiegroup/kogito-runtimes/commit/fb78c209997226bbc366f39f64faee85bb9a5148", "message": "WIP\nworking\n.\n.\n.\n.\nupdate kogito-codegen test file count, consistent with .dmn_nologic gen\n.", "committedDate": "2020-07-29T14:23:07Z", "type": "commit"}, {"oid": "fb78c209997226bbc366f39f64faee85bb9a5148", "url": "https://github.com/kiegroup/kogito-runtimes/commit/fb78c209997226bbc366f39f64faee85bb9a5148", "message": "WIP\nworking\n.\n.\n.\n.\nupdate kogito-codegen test file count, consistent with .dmn_nologic gen\n.", "committedDate": "2020-07-29T14:23:07Z", "type": "forcePushed"}, {"oid": "eba8ec1d952dcdf65377bdb2053e6294d9ead06b", "url": "https://github.com/kiegroup/kogito-runtimes/commit/eba8ec1d952dcdf65377bdb2053e6294d9ead06b", "message": "Align to FAI-215: Model definition endpoint - event publication (#621)\n\n18ec525", "committedDate": "2020-07-29T14:25:57Z", "type": "commit"}, {"oid": "2bd917c1c9563fb707f71898790151c353cce715", "url": "https://github.com/kiegroup/kogito-runtimes/commit/2bd917c1c9563fb707f71898790151c353cce715", "message": "align with\n\nhttps://github.com/kiegroup/kogito-runtimes/commit/18ec525f530b1ff1bddcf18c0083f14f86aff171#diff-edd3a09d62dc627ee10fe37925944217R53", "committedDate": "2020-07-29T15:33:51Z", "type": "commit"}, {"oid": "000ec32f56312204733d188459a2e6497576b501", "url": "https://github.com/kiegroup/kogito-runtimes/commit/000ec32f56312204733d188459a2e6497576b501", "message": "Generify FAI-215 test (#621) generated file order", "committedDate": "2020-07-30T07:41:49Z", "type": "commit"}]}