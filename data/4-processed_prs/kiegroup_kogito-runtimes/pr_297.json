{"pr_number": 297, "pr_title": "KOGITO-888: Use properties to configure rules", "pr_createdAt": "2020-01-29T13:21:43Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/297", "timeline": [{"oid": "b5ff901517ee5369a592acc31f36a262af135d55", "url": "https://github.com/kiegroup/kogito-runtimes/commit/b5ff901517ee5369a592acc31f36a262af135d55", "message": "KOGITO-888: Use properties to configure rules", "committedDate": "2020-01-29T09:39:09Z", "type": "commit"}, {"oid": "723c4d41f88bf75d3f3728c9d3425c8b87a968e2", "url": "https://github.com/kiegroup/kogito-runtimes/commit/723c4d41f88bf75d3f3728c9d3425c8b87a968e2", "message": "parse config with test", "committedDate": "2020-01-29T10:49:23Z", "type": "commit"}, {"oid": "72e851d9d86675a62a9844c28e3e394407323dcb", "url": "https://github.com/kiegroup/kogito-runtimes/commit/72e851d9d86675a62a9844c28e3e394407323dcb", "message": "remove fields from StaticRuleConfig", "committedDate": "2020-01-29T13:34:06Z", "type": "commit"}, {"oid": "235e076977e2b42cc20d810f04db9988e9e88801", "url": "https://github.com/kiegroup/kogito-runtimes/commit/235e076977e2b42cc20d810f04db9988e9e88801", "message": "handle I/O error in Maven plugin", "committedDate": "2020-01-30T08:16:54Z", "type": "commit"}, {"oid": "96fa127697bfffde45ed04fe84704bbceb62b3e5", "url": "https://github.com/kiegroup/kogito-runtimes/commit/96fa127697bfffde45ed04fe84704bbceb62b3e5", "message": "use build context", "committedDate": "2020-01-30T09:32:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDcyOTIwNw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/297#discussion_r374729207", "bodyText": "You should get the config from the map and override this is it is present.", "author": "mariofusco", "createdAt": "2020-02-04T15:11:51Z", "path": "kogito-codegen/src/main/java/org/kie/kogito/codegen/rules/IncrementalRuleCodegen.java", "diffHunk": "@@ -295,31 +308,26 @@ public ApplicationSection section() {\n         return generatedFiles;\n     }\n \n-    private void addUnitConfToKieModule( RuleUnitDescription ruleUnitDescription ) {\n+    private void addUnitConfToKieModule(RuleUnitDescription ruleUnitDescription) {\n         KieBaseModel unitKieBaseModel = kieModuleModel.newKieBaseModel(ruleUnit2KieBaseName(ruleUnitDescription.getCanonicalName()));\n         unitKieBaseModel.setEventProcessingMode(org.kie.api.conf.EventProcessingOption.CLOUD);\n         unitKieBaseModel.addPackage(ruleUnitDescription.getPackageName());\n \n-        // fixme config should go in the description as well\n-        Class<?> ruleUnit = ruleUnitDescription.getRuleUnitClass();\n-        if (ruleUnit != null) {\n-            SessionsPool sessionsPoolAnn = ruleUnit.getAnnotation(SessionsPool.class);\n-            if (sessionsPoolAnn != null && sessionsPoolAnn.value() > 0) {\n-                unitKieBaseModel.setSessionsPool(SessionsPoolOption.get(sessionsPoolAnn.value()));\n-            }\n-            EventProcessing eventAnn = ruleUnit.getAnnotation(EventProcessing.class);\n-            if (eventAnn != null && eventAnn.value() == EventProcessing.Type.STREAM) {\n-                unitKieBaseModel.setEventProcessingMode(EventProcessingOption.STREAM);\n-            }\n+        RuleUnitConfig config = ruleUnitDescription.getConfig();", "originalCommit": "96fa127697bfffde45ed04fe84704bbceb62b3e5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ac0f7e4658a4660b22462e3f5b0f61ae5442419b", "url": "https://github.com/kiegroup/kogito-runtimes/commit/ac0f7e4658a4660b22462e3f5b0f61ae5442419b", "message": "support merging configs", "committedDate": "2020-02-05T14:13:17Z", "type": "commit"}]}