{"pr_number": 871, "pr_title": "[KOGITO-3783] Make more components optional in StaticServiceRegistry", "pr_createdAt": "2020-11-06T10:56:21Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/871", "timeline": [{"oid": "06ff542c5845970bec31232a031cd7c7811d9f09", "url": "https://github.com/kiegroup/kogito-runtimes/commit/06ff542c5845970bec31232a031cd7c7811d9f09", "message": "[KOGITO-3783] Make more components optional in StaticServiceRegistry", "committedDate": "2020-11-06T10:55:29Z", "type": "commit"}, {"oid": "f7ec928d2165bedacaaeb491bff4299b9c230623", "url": "https://github.com/kiegroup/kogito-runtimes/commit/f7ec928d2165bedacaaeb491bff4299b9c230623", "message": "[KOGITO-3783] Make more components optional in StaticServiceRegistry", "committedDate": "2020-11-06T12:24:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgzOTE5Nw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/871#discussion_r518839197", "bodyText": "Minor: you're always replacing the class with its name even when not strictly necessary like in this case. If we need the name I'd prefer to have something like KieResources.class.getCanonicalName() instead of the hardcoded String.", "author": "mariofusco", "createdAt": "2020-11-06T15:49:57Z", "path": "drools/drools-core-static/src/main/java/org/drools/statics/StaticServiceRegistry.java", "diffHunk": "@@ -53,15 +47,15 @@\n     }\n \n     private void wireServices() {\n-        serviceMap.put(org.kie.api.io.KieResources.class, SimpleInstanceCreator.instance(\"org.drools.core.io.impl.ResourceFactoryServiceImpl\"));\n-        serviceMap.put(org.kie.api.concurrent.KieExecutors.class, SimpleInstanceCreator.instance(\"org.drools.core.concurrent.ExecutorProviderImpl\"));\n-        serviceMap.put(org.kie.api.KieServices.class, SimpleInstanceCreator.instance(\"org.drools.compiler.kie.builder.impl.KieServicesImpl\"));\n-        serviceMap.put(org.kie.internal.builder.KnowledgeBuilderFactoryService.class, SimpleInstanceCreator.instance(\"org.drools.compiler.builder.impl.KnowledgeBuilderFactoryServiceImpl\"));\n-        serviceMap.put(org.kie.kogito.rules.DataSource.Factory.class, SimpleInstanceCreator.instance(\"org.kie.kogito.rules.units.impl.DataSourceFactoryImpl\"));\n-        serviceMap.put(org.kie.internal.ruleunit.RuleUnitComponentFactory.class, SimpleInstanceCreator.instance(\"org.kie.kogito.rules.units.impl.RuleUnitComponentFactoryImpl\"));\n-        serviceMap.put(KieAssemblers.class, new StaticKieAssemblers());\n-        serviceMap.put(KieRuntimes.class, SimpleInstanceCreator.instance(\"org.kie.internal.services.KieRuntimesImpl\"));\n-        serviceMap.put(KieWeavers.class, new KieWeaversImpl());\n+        registerService(\"org.kie.api.io.KieResources\", \"org.drools.core.io.impl.ResourceFactoryServiceImpl\", true);", "originalCommit": "f7ec928d2165bedacaaeb491bff4299b9c230623", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg3ODU3Mw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/871#discussion_r518878573", "bodyText": "I used a string so that if we want to make it optional just updating the flag", "author": "danielezonca", "createdAt": "2020-11-06T16:54:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgzOTE5Nw=="}], "type": "inlineReview"}]}