{"pr_number": 940, "pr_title": "[KOGITO-3034][BXMSPROD-1094] Setup Jenkins DSL scripts", "pr_createdAt": "2020-12-16T08:43:00Z", "pr_url": "https://github.com/kiegroup/kogito-runtimes/pull/940", "timeline": [{"oid": "eeb96ae95f7a879422a7dfca2a2b583bdbc53f7a", "url": "https://github.com/kiegroup/kogito-runtimes/commit/eeb96ae95f7a879422a7dfca2a2b583bdbc53f7a", "message": "Use JOB_BRANCH_FOLDER", "committedDate": "2020-12-18T17:02:25Z", "type": "forcePushed"}, {"oid": "eef7d3fc3378c1b2c3cb5ae341753d1bf66e20e0", "url": "https://github.com/kiegroup/kogito-runtimes/commit/eef7d3fc3378c1b2c3cb5ae341753d1bf66e20e0", "message": "Use JOB_BRANCH_FOLDER", "committedDate": "2020-12-18T17:03:28Z", "type": "forcePushed"}, {"oid": "52dd576b736d83bcb92d70633935ede99a598160", "url": "https://github.com/kiegroup/kogito-runtimes/commit/52dd576b736d83bcb92d70633935ede99a598160", "message": "Use JOB_BRANCH_FOLDER", "committedDate": "2020-12-21T14:30:33Z", "type": "forcePushed"}, {"oid": "444101874548caba4513cb2285067d09595f79cf", "url": "https://github.com/kiegroup/kogito-runtimes/commit/444101874548caba4513cb2285067d09595f79cf", "message": "GIT_BRANCH => GIT_BRANCH_NAME", "committedDate": "2020-12-21T16:17:20Z", "type": "forcePushed"}, {"oid": "28635551219107fb68ec4db9f712ae4ce9edd5fd", "url": "https://github.com/kiegroup/kogito-runtimes/commit/28635551219107fb68ec4db9f712ae4ce9edd5fd", "message": "Setup DSL scripts", "committedDate": "2020-12-21T16:20:12Z", "type": "forcePushed"}, {"oid": "76149c5d974cefd47b3deec78eef3100009c6599", "url": "https://github.com/kiegroup/kogito-runtimes/commit/76149c5d974cefd47b3deec78eef3100009c6599", "message": "corrected promote file", "committedDate": "2021-01-05T08:51:46Z", "type": "forcePushed"}, {"oid": "76149c5d974cefd47b3deec78eef3100009c6599", "url": "https://github.com/kiegroup/kogito-runtimes/commit/76149c5d974cefd47b3deec78eef3100009c6599", "message": "corrected promote file", "committedDate": "2021-01-05T08:51:46Z", "type": "forcePushed"}, {"oid": "3330b1403c028d25254116b486446faf24b7d2a8", "url": "https://github.com/kiegroup/kogito-runtimes/commit/3330b1403c028d25254116b486446faf24b7d2a8", "message": "Setup DSL scripts", "committedDate": "2021-01-06T16:54:12Z", "type": "forcePushed"}, {"oid": "357c450d09f388e05f3c9bf2a5eadec16dab591b", "url": "https://github.com/kiegroup/kogito-runtimes/commit/357c450d09f388e05f3c9bf2a5eadec16dab591b", "message": "Setup DSL scripts", "committedDate": "2021-01-12T12:08:06Z", "type": "forcePushed"}, {"oid": "20584d41c676e4984bb845ff650ccc1573f0e1de", "url": "https://github.com/kiegroup/kogito-runtimes/commit/20584d41c676e4984bb845ff650ccc1573f0e1de", "message": "Setup DSL scripts", "committedDate": "2021-01-12T12:10:43Z", "type": "forcePushed"}, {"oid": "178973cf2990fc592535da3bc8bfa8167490e4fa", "url": "https://github.com/kiegroup/kogito-runtimes/commit/178973cf2990fc592535da3bc8bfa8167490e4fa", "message": "Setup DSL scripts", "committedDate": "2021-01-18T12:47:08Z", "type": "forcePushed"}, {"oid": "8efffce32520731b5f17b19b8fb57fb2b757ce26", "url": "https://github.com/kiegroup/kogito-runtimes/commit/8efffce32520731b5f17b19b8fb57fb2b757ce26", "message": "Setup DSL scripts", "committedDate": "2021-01-21T13:35:12Z", "type": "forcePushed"}, {"oid": "de711799f25cad4d2017e5577f076c16725ac65a", "url": "https://github.com/kiegroup/kogito-runtimes/commit/de711799f25cad4d2017e5577f076c16725ac65a", "message": "Setup DSL scripts", "committedDate": "2021-01-21T14:08:36Z", "type": "forcePushed"}, {"oid": "00334d1068d05552081ee747c4ab65b25d50c087", "url": "https://github.com/kiegroup/kogito-runtimes/commit/00334d1068d05552081ee747c4ab65b25d50c087", "message": "Setup DSL scripts", "committedDate": "2021-01-21T14:47:02Z", "type": "forcePushed"}, {"oid": "34b49a20962af8bd39b1d80fbd6048d83f078f02", "url": "https://github.com/kiegroup/kogito-runtimes/commit/34b49a20962af8bd39b1d80fbd6048d83f078f02", "message": "Setup DSL scripts", "committedDate": "2021-01-21T17:01:24Z", "type": "forcePushed"}, {"oid": "44767943ad3f835f00c8ea196bc85a0b74189870", "url": "https://github.com/kiegroup/kogito-runtimes/commit/44767943ad3f835f00c8ea196bc85a0b74189870", "message": "Setup DSL scripts", "committedDate": "2021-01-22T09:11:25Z", "type": "forcePushed"}, {"oid": "8b209cadcaa925fa81e706f225ab12855647d3bc", "url": "https://github.com/kiegroup/kogito-runtimes/commit/8b209cadcaa925fa81e706f225ab12855647d3bc", "message": "Setup DSL scripts", "committedDate": "2021-01-22T09:58:21Z", "type": "forcePushed"}, {"oid": "16d67f80536151ae95d697939dfc317b61998e8a", "url": "https://github.com/kiegroup/kogito-runtimes/commit/16d67f80536151ae95d697939dfc317b61998e8a", "message": "Setup DSL scripts", "committedDate": "2021-01-22T11:06:00Z", "type": "forcePushed"}, {"oid": "6b1c048e2b5aae5aebf1a883adbd5592f5a96f73", "url": "https://github.com/kiegroup/kogito-runtimes/commit/6b1c048e2b5aae5aebf1a883adbd5592f5a96f73", "message": "Setup DSL scripts", "committedDate": "2021-01-22T11:42:56Z", "type": "forcePushed"}, {"oid": "4e19153fa8b74cab6605c127b78b17f1d6980fe6", "url": "https://github.com/kiegroup/kogito-runtimes/commit/4e19153fa8b74cab6605c127b78b17f1d6980fe6", "message": "Setup DSL scripts", "committedDate": "2021-01-22T16:01:56Z", "type": "forcePushed"}, {"oid": "49655df2170e28d463a8819c97fbe3f0a55825f0", "url": "https://github.com/kiegroup/kogito-runtimes/commit/49655df2170e28d463a8819c97fbe3f0a55825f0", "message": "Setup DSL scripts", "committedDate": "2021-01-22T17:03:31Z", "type": "forcePushed"}, {"oid": "45c2daf7555190f0d005f3c9a9fb9d367d0562bf", "url": "https://github.com/kiegroup/kogito-runtimes/commit/45c2daf7555190f0d005f3c9a9fb9d367d0562bf", "message": "Setup DSL scripts", "committedDate": "2021-01-22T17:11:53Z", "type": "forcePushed"}, {"oid": "0646e6eb5fd171e2bfe4e68a46c5b2fd5d6a79eb", "url": "https://github.com/kiegroup/kogito-runtimes/commit/0646e6eb5fd171e2bfe4e68a46c5b2fd5d6a79eb", "message": "Setup DSL scripts", "committedDate": "2021-01-22T17:17:08Z", "type": "forcePushed"}, {"oid": "a2a1304fb48cd9880d690cb258051fe287d34b99", "url": "https://github.com/kiegroup/kogito-runtimes/commit/a2a1304fb48cd9880d690cb258051fe287d34b99", "message": "Setup DSL scripts", "committedDate": "2021-01-22T18:50:06Z", "type": "forcePushed"}, {"oid": "7702a9522ac1058224ff098b7778ef402c21ae7e", "url": "https://github.com/kiegroup/kogito-runtimes/commit/7702a9522ac1058224ff098b7778ef402c21ae7e", "message": "Setup DSL scripts", "committedDate": "2021-01-25T09:54:50Z", "type": "forcePushed"}, {"oid": "7331b8f7aefc755c67316af1bd10f07ba3ab41dd", "url": "https://github.com/kiegroup/kogito-runtimes/commit/7331b8f7aefc755c67316af1bd10f07ba3ab41dd", "message": "Setup DSL scripts", "committedDate": "2021-01-26T12:38:25Z", "type": "forcePushed"}, {"oid": "0ad5a14e1d5bf1c6fa66be02742cabb869ed8b4d", "url": "https://github.com/kiegroup/kogito-runtimes/commit/0ad5a14e1d5bf1c6fa66be02742cabb869ed8b4d", "message": "Setup DSL scripts", "committedDate": "2021-01-26T12:47:28Z", "type": "forcePushed"}, {"oid": "6e9be1ef4a036503a9d72761b35b466ef02b04b9", "url": "https://github.com/kiegroup/kogito-runtimes/commit/6e9be1ef4a036503a9d72761b35b466ef02b04b9", "message": "Setup DSL scripts", "committedDate": "2021-01-26T12:58:06Z", "type": "forcePushed"}, {"oid": "5a042ea62bdbff23817c04829e69832c8cac8e8b", "url": "https://github.com/kiegroup/kogito-runtimes/commit/5a042ea62bdbff23817c04829e69832c8cac8e8b", "message": "Setup DSL scripts", "committedDate": "2021-01-26T13:02:47Z", "type": "forcePushed"}, {"oid": "a9127af1a11349aae0264f8306f4b5ca5c46f721", "url": "https://github.com/kiegroup/kogito-runtimes/commit/a9127af1a11349aae0264f8306f4b5ca5c46f721", "message": "Setup DSL scripts", "committedDate": "2021-01-26T13:43:09Z", "type": "forcePushed"}, {"oid": "a2a2af4b669d299a014914dbc9109b72ce9b470c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/a2a2af4b669d299a014914dbc9109b72ce9b470c", "message": "Setup DSL scripts", "committedDate": "2021-01-28T10:09:41Z", "type": "forcePushed"}, {"oid": "a1d5d98617725f56eb7382c602f0d3674b26e788", "url": "https://github.com/kiegroup/kogito-runtimes/commit/a1d5d98617725f56eb7382c602f0d3674b26e788", "message": "Setup DSL scripts", "committedDate": "2021-01-28T12:23:17Z", "type": "forcePushed"}, {"oid": "4759a0f7694e037081928a08e9062778d84332d9", "url": "https://github.com/kiegroup/kogito-runtimes/commit/4759a0f7694e037081928a08e9062778d84332d9", "message": "Setup DSL scripts", "committedDate": "2021-01-29T13:29:21Z", "type": "forcePushed"}, {"oid": "a008b275a66c44215b77b372c3ab7a65a9da7079", "url": "https://github.com/kiegroup/kogito-runtimes/commit/a008b275a66c44215b77b372c3ab7a65a9da7079", "message": "Setup DSL scripts", "committedDate": "2021-01-29T14:22:50Z", "type": "forcePushed"}, {"oid": "6cc90a172ff76866b70ecb75f28725ecf3ed3ab9", "url": "https://github.com/kiegroup/kogito-runtimes/commit/6cc90a172ff76866b70ecb75f28725ecf3ed3ab9", "message": "Setup DSL scripts", "committedDate": "2021-01-29T14:57:39Z", "type": "forcePushed"}, {"oid": "1648c7fc9d54d4189a3ebade56959f92abd4869a", "url": "https://github.com/kiegroup/kogito-runtimes/commit/1648c7fc9d54d4189a3ebade56959f92abd4869a", "message": "Setup DSL scripts", "committedDate": "2021-01-29T15:58:43Z", "type": "forcePushed"}, {"oid": "e12ca06c5526826709e572f48d4f9cae23d20e1d", "url": "https://github.com/kiegroup/kogito-runtimes/commit/e12ca06c5526826709e572f48d4f9cae23d20e1d", "message": "Setup DSL scripts", "committedDate": "2021-01-29T16:09:19Z", "type": "forcePushed"}, {"oid": "e12ca06c5526826709e572f48d4f9cae23d20e1d", "url": "https://github.com/kiegroup/kogito-runtimes/commit/e12ca06c5526826709e572f48d4f9cae23d20e1d", "message": "Setup DSL scripts", "committedDate": "2021-01-29T16:09:19Z", "type": "forcePushed"}, {"oid": "e12ca06c5526826709e572f48d4f9cae23d20e1d", "url": "https://github.com/kiegroup/kogito-runtimes/commit/e12ca06c5526826709e572f48d4f9cae23d20e1d", "message": "Setup DSL scripts", "committedDate": "2021-01-29T16:09:19Z", "type": "forcePushed"}, {"oid": "ffdaadc0476ac548d423ba2529584517316755be", "url": "https://github.com/kiegroup/kogito-runtimes/commit/ffdaadc0476ac548d423ba2529584517316755be", "message": "Setup DSL scripts", "committedDate": "2021-02-04T10:34:37Z", "type": "forcePushed"}, {"oid": "e086521a8afec398eeb02412cac3515274cf2ff7", "url": "https://github.com/kiegroup/kogito-runtimes/commit/e086521a8afec398eeb02412cac3515274cf2ff7", "message": "Setup DSL scripts", "committedDate": "2021-02-04T10:35:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTUzNzU3MQ==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/940#discussion_r569537571", "bodyText": "Should this be createPRJob so that it has a GitHub trigger? But, it should also have a different trigger phrase for BDD tests.", "author": "Kevin-Mok", "createdAt": "2021-02-03T16:03:57Z", "path": ".jenkins/dsl/jobs.groovy", "diffHunk": "@@ -0,0 +1,223 @@\n+import org.kie.jenkins.jobdsl.templates.KogitoJobTemplate\n+import org.kie.jenkins.jobdsl.KogitoConstants\n+import org.kie.jenkins.jobdsl.Utils\n+import org.kie.jenkins.jobdsl.KogitoJobType\n+\n+boolean isMainBranch() {\n+    return \"${GIT_BRANCH}\" == \"${GIT_MAIN_BRANCH}\"\n+}\n+\n+def getDefaultJobParams() {\n+    return [\n+        job: [\n+            name: 'kogito-runtimes'\n+        ],\n+        git: [\n+            author: \"${GIT_AUTHOR_NAME}\",\n+            branch: \"${GIT_BRANCH}\",\n+            repository: 'kogito-runtimes',\n+            credentials: \"${GIT_AUTHOR_CREDENTIALS_ID}\",\n+            token_credentials: \"${GIT_AUTHOR_TOKEN_CREDENTIALS_ID}\"\n+        ]\n+    ]\n+}\n+\n+def getJobParams(String jobName, String jobFolder, String jenkinsfileName, String jobDescription = '') {\n+    def jobParams = getDefaultJobParams()\n+    jobParams.job.name = jobName\n+    jobParams.job.folder = jobFolder\n+    jobParams.jenkinsfile = jenkinsfileName\n+    if (jobDescription) {\n+        jobParams.job.description = jobDescription\n+    }\n+    return jobParams\n+}\n+\n+def bddRuntimesPrFolder = \"${KogitoConstants.KOGITO_DSL_PULLREQUEST_FOLDER}/${KogitoConstants.KOGITO_DSL_RUNTIMES_BDD_FOLDER}\"\n+def nightlyBranchFolder = \"${KogitoConstants.KOGITO_DSL_NIGHTLY_FOLDER}/${JOB_BRANCH_FOLDER}\"\n+def releaseBranchFolder = \"${KogitoConstants.KOGITO_DSL_RELEASE_FOLDER}/${JOB_BRANCH_FOLDER}\"\n+\n+if (isMainBranch()) {\n+    folder(KogitoConstants.KOGITO_DSL_PULLREQUEST_FOLDER)\n+\n+    setupPrJob(KogitoConstants.KOGITO_DSL_PULLREQUEST_FOLDER)\n+\n+    setupDroolsJob(nightlyBranchFolder)\n+    setupQuarkusJob(nightlyBranchFolder)\n+\n+    // For BDD runtimes PR job\n+    folder(bddRuntimesPrFolder)\n+\n+    setupDeployJob(bddRuntimesPrFolder, KogitoJobType.PR)", "originalCommit": "9c93af70d20f7c8c12b70ac29fa8791031589210", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MDMyMzM3Nw==", "url": "https://github.com/kiegroup/kogito-runtimes/pull/940#discussion_r570323377", "bodyText": "The PR job with GH trigger is created in kogito-pipelines. Here we are just providing the deploy job to that pullrequest/kogito-runtimes.bdd so it can call the deploy job with correct setup.\nSee https://rhba-jenkins.rhev-ci-vms.eng.rdu2.redhat.com/job/custom/job/tradisso/job/dsl_test/job/pullrequest/job/kogito-runtimes.bdd/ for example", "author": "radtriste", "createdAt": "2021-02-04T15:38:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTUzNzU3MQ=="}], "type": "inlineReview"}, {"oid": "e35b944d4f53beb6ad88f35a5ed29021f29b461b", "url": "https://github.com/kiegroup/kogito-runtimes/commit/e35b944d4f53beb6ad88f35a5ed29021f29b461b", "message": "Setup DSL scripts", "committedDate": "2021-02-04T15:36:14Z", "type": "forcePushed"}, {"oid": "fdc9f14293abb1ea564b75c5e174dddf9594fc5e", "url": "https://github.com/kiegroup/kogito-runtimes/commit/fdc9f14293abb1ea564b75c5e174dddf9594fc5e", "message": "Setup DSL scripts", "committedDate": "2021-02-05T16:23:56Z", "type": "forcePushed"}, {"oid": "2c33bd2f7e2f8dec5c3daf03aafa75bd6fec9065", "url": "https://github.com/kiegroup/kogito-runtimes/commit/2c33bd2f7e2f8dec5c3daf03aafa75bd6fec9065", "message": "Setup DSL scripts", "committedDate": "2021-02-08T14:09:37Z", "type": "forcePushed"}, {"oid": "4e7f51022f8db8f43b984494c80bab7e131edd0c", "url": "https://github.com/kiegroup/kogito-runtimes/commit/4e7f51022f8db8f43b984494c80bab7e131edd0c", "message": "Setup DSL scripts", "committedDate": "2021-02-08T14:18:06Z", "type": "forcePushed"}, {"oid": "832ce4cce678fb8f5ca3e1ff0ea867d276113972", "url": "https://github.com/kiegroup/kogito-runtimes/commit/832ce4cce678fb8f5ca3e1ff0ea867d276113972", "message": "Setup DSL scripts", "committedDate": "2021-02-08T14:21:58Z", "type": "forcePushed"}, {"oid": "1f9664eddbdfebad14883062800b1cc83f6dccbf", "url": "https://github.com/kiegroup/kogito-runtimes/commit/1f9664eddbdfebad14883062800b1cc83f6dccbf", "message": "Setup DSL scripts", "committedDate": "2021-02-08T16:55:30Z", "type": "forcePushed"}, {"oid": "7be54c73cd255c6dd7409349efbd659746ea7885", "url": "https://github.com/kiegroup/kogito-runtimes/commit/7be54c73cd255c6dd7409349efbd659746ea7885", "message": "Setup DSL scripts", "committedDate": "2021-02-08T17:15:24Z", "type": "forcePushed"}, {"oid": "f6add372cd4a7ccd04f908d98d9c6be80879ff2e", "url": "https://github.com/kiegroup/kogito-runtimes/commit/f6add372cd4a7ccd04f908d98d9c6be80879ff2e", "message": "Setup DSL scripts", "committedDate": "2021-02-08T17:31:27Z", "type": "forcePushed"}, {"oid": "68ab9ee4279b6fe6a93e67c68d34995cc8817b6b", "url": "https://github.com/kiegroup/kogito-runtimes/commit/68ab9ee4279b6fe6a93e67c68d34995cc8817b6b", "message": "Setup DSL scripts", "committedDate": "2021-02-09T15:34:09Z", "type": "forcePushed"}, {"oid": "9f17ca71783dc3d2bd69e907a75a379c137a2973", "url": "https://github.com/kiegroup/kogito-runtimes/commit/9f17ca71783dc3d2bd69e907a75a379c137a2973", "message": "Setup DSL scripts", "committedDate": "2021-02-09T16:04:35Z", "type": "forcePushed"}, {"oid": "fd986ef4ff4e2371815595f7c38191dfcde509bc", "url": "https://github.com/kiegroup/kogito-runtimes/commit/fd986ef4ff4e2371815595f7c38191dfcde509bc", "message": "Setup DSL scripts", "committedDate": "2021-02-09T17:06:58Z", "type": "forcePushed"}, {"oid": "2ab9932f75a2528b74b43b61bc78eee227496d25", "url": "https://github.com/kiegroup/kogito-runtimes/commit/2ab9932f75a2528b74b43b61bc78eee227496d25", "message": "Setup DSL scripts", "committedDate": "2021-02-09T17:09:19Z", "type": "forcePushed"}, {"oid": "38b5f28345c158a46af38ae328531e6d84db237e", "url": "https://github.com/kiegroup/kogito-runtimes/commit/38b5f28345c158a46af38ae328531e6d84db237e", "message": "Setup DSL scripts", "committedDate": "2021-02-09T17:21:20Z", "type": "commit"}, {"oid": "38b5f28345c158a46af38ae328531e6d84db237e", "url": "https://github.com/kiegroup/kogito-runtimes/commit/38b5f28345c158a46af38ae328531e6d84db237e", "message": "Setup DSL scripts", "committedDate": "2021-02-09T17:21:20Z", "type": "forcePushed"}]}