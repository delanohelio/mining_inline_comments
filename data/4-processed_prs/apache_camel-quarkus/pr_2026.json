{"pr_number": 2026, "pr_title": "Solr native support fixes #1703", "pr_createdAt": "2020-11-24T15:48:29Z", "pr_url": "https://github.com/apache/camel-quarkus/pull/2026", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg3MTczNw==", "url": "https://github.com/apache/camel-quarkus/pull/2026#discussion_r529871737", "bodyText": "The comment is maybe a leftover and can be removed?", "author": "ppalaga", "createdAt": "2020-11-24T20:55:15Z", "path": "integration-tests/solr/pom.xml", "diffHunk": "@@ -80,4 +98,52 @@\n         </dependency>\n     </dependencies>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <configuration>\n+                    <systemPropertyVariables>\n+                        <!-- force the locale as we want to explicitly test message interpolation -->", "originalCommit": "360953001da973b44e09a7c575eb6b9c2781f87d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIyMzQ5MQ==", "url": "https://github.com/apache/camel-quarkus/pull/2026#discussion_r530223491", "bodyText": "yes I'll do that", "author": "zbendhiba", "createdAt": "2020-11-25T09:26:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg3MTczNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIyNjY2Mw==", "url": "https://github.com/apache/camel-quarkus/pull/2026#discussion_r530226663", "bodyText": "done !!", "author": "zbendhiba", "createdAt": "2020-11-25T09:31:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg3MTczNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg3NzA1Mg==", "url": "https://github.com/apache/camel-quarkus/pull/2026#discussion_r529877052", "bodyText": "This will not work OotB on the platform, where the tests are run from test jars and the local resources are not available. I see that this also cannot be configured to pull the trust store from the jar, because the system property expects a local file. Hence a special step will be needed on the platform to unpack the test jar and set the trust store accordingly. Maybe we could make creating that preprocessing step easier by some changes here. Let me file a followup for that.", "author": "ppalaga", "createdAt": "2020-11-24T21:05:29Z", "path": "integration-tests/solr/pom.xml", "diffHunk": "@@ -80,4 +98,52 @@\n         </dependency>\n     </dependencies>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <configuration>\n+                    <systemPropertyVariables>\n+                        <!-- force the locale as we want to explicitly test message interpolation -->\n+                        <javax.net.ssl.trustStore>${solr.trust-store}</javax.net.ssl.trustStore>", "originalCommit": "360953001da973b44e09a7c575eb6b9c2781f87d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg3ODg0MA==", "url": "https://github.com/apache/camel-quarkus/pull/2026#discussion_r529878840", "bodyText": "Is there any reason not to put this as quarkus.native.additional-build-args to application.properties? Maybe because the local path has to be absolute?", "author": "ppalaga", "createdAt": "2020-11-24T21:08:56Z", "path": "integration-tests/solr/pom.xml", "diffHunk": "@@ -80,4 +98,52 @@\n         </dependency>\n     </dependencies>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <configuration>\n+                    <systemPropertyVariables>\n+                        <!-- force the locale as we want to explicitly test message interpolation -->\n+                        <javax.net.ssl.trustStore>${solr.trust-store}</javax.net.ssl.trustStore>\n+                        <javax.net.ssl.trustStorePassword>${solr.trust-store-password}</javax.net.ssl.trustStorePassword>\n+                    </systemPropertyVariables>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+    <profiles>\n+        <profile>\n+            <id>native</id>\n+            <activation>\n+                <property>\n+                    <name>native</name>\n+                </property>\n+            </activation>\n+            <properties>\n+                <quarkus.package.type>native</quarkus.package.type>\n+                <quarkus.native.additional-build-args>-H:IncludeResources=.*ssl/.*,-J-Djavax.net.ssl.trustStore=${solr.trust-store},\n+                    -J-Djavax.net.ssl.trustStorePassword=${solr.trust-store-password}</quarkus.native.additional-build-args>", "originalCommit": "360953001da973b44e09a7c575eb6b9c2781f87d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIyMzM4Nw==", "url": "https://github.com/apache/camel-quarkus/pull/2026#discussion_r530223387", "bodyText": "yes!! that's the problem. I've actually copied that way of adding these attribute from one of the tests in quarkus project", "author": "zbendhiba", "createdAt": "2020-11-25T09:26:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg3ODg0MA=="}], "type": "inlineReview"}, {"oid": "9a54998f744a1139569b81e2163f64f7b1d11d83", "url": "https://github.com/apache/camel-quarkus/commit/9a54998f744a1139569b81e2163f64f7b1d11d83", "message": "Solr native support fixes #1703", "committedDate": "2020-11-25T09:30:15Z", "type": "forcePushed"}, {"oid": "b289cebfacd7681fe1512a553fccad89c434551f", "url": "https://github.com/apache/camel-quarkus/commit/b289cebfacd7681fe1512a553fccad89c434551f", "message": "Solr native support fixes #1703", "committedDate": "2020-12-02T11:13:40Z", "type": "commit"}, {"oid": "b289cebfacd7681fe1512a553fccad89c434551f", "url": "https://github.com/apache/camel-quarkus/commit/b289cebfacd7681fe1512a553fccad89c434551f", "message": "Solr native support fixes #1703", "committedDate": "2020-12-02T11:13:40Z", "type": "forcePushed"}]}