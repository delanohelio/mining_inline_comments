{"pr_number": 1031, "pr_title": "Fix intermittent failure of messaging tests", "pr_createdAt": "2020-04-03T15:22:49Z", "pr_url": "https://github.com/apache/camel-quarkus/pull/1031", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA==", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403095004", "bodyText": "Maybe this should be replaced by slf4j ? (I think there is a facility from testcontainers)", "author": "lburgazzoli", "createdAt": "2020-04-03T15:40:38Z", "path": "integration-tests/messaging/src/test/java/org/apache/camel/quarkus/component/messaging/it/ActiveMQTestResource.java", "diffHunk": "@@ -43,6 +45,13 @@\n         try {\n             container = new GenericContainer(ACTIVEMQ_IMAGE)\n                     .withExposedPorts(ACTIVEMQ_PORT)\n+                    .withLogConsumer(new Consumer<OutputFrame>() {\n+                        @Override\n+                        public void accept(OutputFrame outputFrame) {\n+                            System.out.println(outputFrame.getUtf8String());", "originalCommit": "7ce4646bc0d01c8cdbb05a7b60ee4888d32e0439", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5ODA5OA==", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403098098", "bodyText": "Yeah but most of the content coming back from the container is already log formatted. So it gets messy if you wrap it in more formatting. Hence I just write it as-is.", "author": "jamesnetherton", "createdAt": "2020-04-03T15:45:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5ODk2Mg==", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403098962", "bodyText": "I can remove the logging altogether if you'd prefer. It's just useful for debugging if we hit issues.", "author": "jamesnetherton", "createdAt": "2020-04-03T15:47:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEwMDI0Mg==", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403100242", "bodyText": "I meant this one that should properly handle the output frame.", "author": "lburgazzoli", "createdAt": "2020-04-03T15:49:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEwMjI4OA==", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403102288", "bodyText": "I can remove the logging altogether if you'd prefer. It's just useful for debugging if we hit issues.\n\nNo worries we can keep it, was just wondering if we can make it gogin to the logger so we can control it from properties, but not a huge issue", "author": "lburgazzoli", "createdAt": "2020-04-03T15:52:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzExNTgzNg==", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403115836", "bodyText": "Latest commit uses Slf4jLogConsumer \ud83d\udc4d", "author": "jamesnetherton", "createdAt": "2020-04-03T16:13:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzExNjM5Mw==", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403116393", "bodyText": "does it work as advertised ?", "author": "lburgazzoli", "createdAt": "2020-04-03T16:13:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzExOTI4Mw==", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403119283", "bodyText": "Works ok. Everything gets prefixed with STDOUT:, so at least it's clear what's coming from the container and what isn't.", "author": "jamesnetherton", "createdAt": "2020-04-03T16:16:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEyMTIzMA==", "url": "https://github.com/apache/camel-quarkus/pull/1031#discussion_r403121230", "bodyText": "Ah yeah, that issue ... I think I did implement my own version some time ago, maybe I'll copy over this repo, if only I could remember where it it", "author": "lburgazzoli", "createdAt": "2020-04-03T16:19:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NTAwNA=="}], "type": "inlineReview"}, {"oid": "57e6a718c1021d6e949b4284cb8fe74679f9e548", "url": "https://github.com/apache/camel-quarkus/commit/57e6a718c1021d6e949b4284cb8fe74679f9e548", "message": "Fix intermittent failure of messaging tests\n\nFixes #1023", "committedDate": "2020-04-03T16:12:13Z", "type": "forcePushed"}, {"oid": "f2b1b1223abb9a568453702c40bf6b09f5e2f8f0", "url": "https://github.com/apache/camel-quarkus/commit/f2b1b1223abb9a568453702c40bf6b09f5e2f8f0", "message": "Fix intermittent failure of messaging tests\n\nFixes #1023", "committedDate": "2020-04-06T06:40:39Z", "type": "commit"}, {"oid": "f2b1b1223abb9a568453702c40bf6b09f5e2f8f0", "url": "https://github.com/apache/camel-quarkus/commit/f2b1b1223abb9a568453702c40bf6b09f5e2f8f0", "message": "Fix intermittent failure of messaging tests\n\nFixes #1023", "committedDate": "2020-04-06T06:40:39Z", "type": "forcePushed"}]}