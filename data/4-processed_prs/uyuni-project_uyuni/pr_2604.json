{"pr_number": 2604, "pr_title": "QA Workaround: Refresh the pillar data before retrieve values, after save the formula with changes", "pr_createdAt": "2020-09-15T12:23:00Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2604", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY0NzcxNA==", "url": "https://github.com/uyuni-project/uyuni/pull/2604#discussion_r488647714", "bodyText": "Then maybe", "author": "Bischoff", "createdAt": "2020-09-15T13:02:02Z", "path": "testsuite/features/secondary/min_salt_formulas_advanced.feature", "diffHunk": "@@ -99,6 +99,7 @@ Feature: Use advanced features of Salt formulas\n      And I click on \"Clear values\" and confirm\n      And I click on \"Save Formula\"\n      Then I should see a \"Formula saved\" text\n+     When I refresh the pillar data\n      And the pillar data for \"testing:str\" should be \"\" on \"sle_minion\"", "originalCommit": "5c7e3e4e3a4edff901ad0dfd44ed37150b88544e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY1Njc5OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2604#discussion_r488656798", "bodyText": "Ok, I will change in all of the steps bellow the refresh.", "author": "srbarrios", "createdAt": "2020-09-15T13:14:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY0NzcxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY0ODEzMw==", "url": "https://github.com/uyuni-project/uyuni/pull/2604#discussion_r488648133", "bodyText": "'\\n' to make rubocop happy", "author": "Bischoff", "createdAt": "2020-09-15T13:02:34Z", "path": "testsuite/features/step_definitions/salt_steps.rb", "diffHunk": "@@ -547,6 +547,7 @@\n   if verb == 'be' && value == ''\n     raise \"Output has more than one line: #{output}\" unless output.split(\"\\n\").length == 1\n   elsif verb == 'be'\n+    raise \"Output value not found : #{output}\" unless output.split(\"\\n\") > 1", "originalCommit": "5c7e3e4e3a4edff901ad0dfd44ed37150b88544e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY1NjI0MQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2604#discussion_r488656241", "bodyText": "Incorrect, if we use single quotes it will not work.\nIf rubocop complains, must be due to something else.", "author": "srbarrios", "createdAt": "2020-09-15T13:14:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY0ODEzMw=="}], "type": "inlineReview"}, {"oid": "9d1f5a2206ed3b2914d3a9dd1967aaf366bef573", "url": "https://github.com/uyuni-project/uyuni/commit/9d1f5a2206ed3b2914d3a9dd1967aaf366bef573", "message": "QA: Refresh the pillar data before retrieve values", "committedDate": "2020-09-15T13:17:51Z", "type": "commit"}, {"oid": "9d1f5a2206ed3b2914d3a9dd1967aaf366bef573", "url": "https://github.com/uyuni-project/uyuni/commit/9d1f5a2206ed3b2914d3a9dd1967aaf366bef573", "message": "QA: Refresh the pillar data before retrieve values", "committedDate": "2020-09-15T13:17:51Z", "type": "forcePushed"}]}