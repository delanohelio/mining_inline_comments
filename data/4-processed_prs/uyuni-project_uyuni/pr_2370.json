{"pr_number": 2370, "pr_title": "Fix spacewalk-java jar symlinks on openSUSE Leap 15.2", "pr_createdAt": "2020-06-29T16:14:49Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2370", "timeline": [{"oid": "7436a12e94f092b1e53fcc6315bd10cafd1cc29e", "url": "https://github.com/uyuni-project/uyuni/commit/7436a12e94f092b1e53fcc6315bd10cafd1cc29e", "message": "Fix spacewalk-java jar symlinks on OpenSUSE Leap 15.2", "committedDate": "2020-06-29T16:10:34Z", "type": "commit"}, {"oid": "68b28d9fae67d9ebc433d39abf54caaace789474", "url": "https://github.com/uyuni-project/uyuni/commit/68b28d9fae67d9ebc433d39abf54caaace789474", "message": "fixup! Fix spacewalk-java jar symlinks on OpenSUSE Leap 15.2", "committedDate": "2020-06-29T16:16:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA5NTY3OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2370#discussion_r447095679", "bodyText": "Is this really correct? I would have expected an \"/\" instead of \"_\" here. But I'm not a java developer :)", "author": "mantel", "createdAt": "2020-06-29T16:22:31Z", "path": "java/spacewalk-java.spec", "diffHunk": "@@ -666,14 +666,21 @@ chown tomcat:%{apache_group} /var/log/rhn/gatherer.log\n %{jardir}/dom4j.jar\n %{jardir}/dwr.jar\n \n-%{jardir}/google-gson.jar\n %{jardir}/snakeyaml.jar\n # SUSE extra runtime dependencies: spark, jade4j, salt API client + dependencies\n %{jardir}/commons-jexl.jar\n %{jardir}/commons-lang3.jar\n+%if 0%{?is_opensuse}\n+%{jardir}/google-gson_google-gsongson.jar\n+%{jardir}/httpcomponents_httpclient.jar\n+%{jardir}/httpcomponents_httpcore.jar\n+%{jardir}/httpcomponents_httpcore-nio.jar", "originalCommit": "68b28d9fae67d9ebc433d39abf54caaace789474", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA5OTE1Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/2370#discussion_r447099153", "bodyText": "The name of the symlinks is generated automatically by build-jar-repository from the directory name + the jar name.", "author": "mateiw", "createdAt": "2020-06-29T16:27:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA5NTY3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzEwMDQ3OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2370#discussion_r447100478", "bodyText": "I was expecting something like that...", "author": "mantel", "createdAt": "2020-06-29T16:30:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA5NTY3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA5NjI0Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/2370#discussion_r447096246", "bodyText": "So if I understand correctly, the symlinks will not change, but in the code you are accessing them via the new path now. Right?", "author": "mantel", "createdAt": "2020-06-29T16:23:26Z", "path": "java/spacewalk-java.changes", "diffHunk": "@@ -1,3 +1,5 @@\n+- Fix symlinks for gson, httcomponents on Leap 15.2\n+", "originalCommit": "68b28d9fae67d9ebc433d39abf54caaace789474", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzEwMjcwNw==", "url": "https://github.com/uyuni-project/uyuni/pull/2370#discussion_r447102707", "bodyText": "So, the build will use the gson and httpcomponets jars from Leap instead of the same jars from Uyuni (which have been removed anyways). Previously the build used the gson and httpcomponents packages from Uyuni but at install time the packages from Leap were installed.\nTomcat and Taskomatic load the jars referenced via the symlinks in /srv/tomcat/webapps/rhn/WEB-INF/lib and /usr/share/spacewalk/taskomatic. Since the symlinks for these jars were broken both Tomcat and Taskomatic failed to start.", "author": "mateiw", "createdAt": "2020-06-29T16:33:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA5NjI0Ng=="}], "type": "inlineReview"}]}