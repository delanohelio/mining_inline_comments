{"pr_number": 2264, "pr_title": "Add docker logout step", "pr_createdAt": "2020-05-28T08:34:40Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2264", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM2NDc2OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2264#discussion_r439364768", "bodyText": "I'm not sure this would work as we want. The problem here is that we have to consider that minions might be not up-to-date, so they could have a Salt 2019.2.0 version installed where the docker.logout method is not yet available.\nMaybe something like this would be better:\n{% if 'docker.logout' in salt %}\n...\n{% endif %}", "author": "meaksh", "createdAt": "2020-06-12T11:29:59Z", "path": "susemanager-utils/susemanager-sls/salt/images/docker.sls", "diffHunk": "@@ -35,6 +35,18 @@ mgr_pushimage:\n       - module: mgr_buildimage\n       - module: mgr_registries_login\n \n+{% if grains['saltversioninfo'][0] >= 2019 %}", "originalCommit": "11226c8d4e235c4bfc25bb1e32aa1501b5b60754", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM3OTMyMg==", "url": "https://github.com/uyuni-project/uyuni/pull/2264#discussion_r439379322", "bodyText": "Right, minions could be on 2019.2.0 but not on the MU that adds docker.logout. I'll try your suggestion.", "author": "agraul", "createdAt": "2020-06-12T12:06:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM2NDc2OA=="}], "type": "inlineReview"}, {"oid": "abc8cc4a224734e6a4e46196a0a4c24ebff470ed", "url": "https://github.com/uyuni-project/uyuni/commit/abc8cc4a224734e6a4e46196a0a4c24ebff470ed", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state.", "committedDate": "2020-06-15T15:16:05Z", "type": "forcePushed"}, {"oid": "6500b39bb6d16d8c682ea43c08e08f9e6850c680", "url": "https://github.com/uyuni-project/uyuni/commit/6500b39bb6d16d8c682ea43c08e08f9e6850c680", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state.", "committedDate": "2020-06-16T08:28:22Z", "type": "forcePushed"}, {"oid": "ed699794135f740a9b07454e5a119e5faa05b14a", "url": "https://github.com/uyuni-project/uyuni/commit/ed699794135f740a9b07454e5a119e5faa05b14a", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state.", "committedDate": "2020-07-13T11:40:57Z", "type": "forcePushed"}, {"oid": "860e69aad903f14ef079496eba31ff882127c6ec", "url": "https://github.com/uyuni-project/uyuni/commit/860e69aad903f14ef079496eba31ff882127c6ec", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state.", "committedDate": "2020-07-13T11:58:17Z", "type": "commit"}, {"oid": "860e69aad903f14ef079496eba31ff882127c6ec", "url": "https://github.com/uyuni-project/uyuni/commit/860e69aad903f14ef079496eba31ff882127c6ec", "message": "Add docker logout step\n\nAs a last step of the docker build process, docker.logout is called from\nthe Salt states. This ensures no registry credentials are left on the\nbuild host that executes the state.", "committedDate": "2020-07-13T11:58:17Z", "type": "forcePushed"}]}