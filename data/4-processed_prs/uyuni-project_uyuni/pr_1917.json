{"pr_number": 1917, "pr_title": "Support Debian 9/10 as clients", "pr_createdAt": "2020-02-14T10:47:18Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/1917", "timeline": [{"oid": "7c2151eb30afc2cf4878587a9b4490cf8103cf4e", "url": "https://github.com/uyuni-project/uyuni/commit/7c2151eb30afc2cf4878587a9b4490cf8103cf4e", "message": "Update mgr_bootstrap_data.py\n\nadded debian 9 and 10 packages and repos", "committedDate": "2020-02-14T10:26:16Z", "type": "commit"}, {"oid": "ffbe9ac08272bec5ca3e7cc05945cf88f9f8ce44", "url": "https://github.com/uyuni-project/uyuni/commit/ffbe9ac08272bec5ca3e7cc05945cf88f9f8ce44", "message": "Update mgr_bootstrap_data.py\n\ndebian 9 and 10 packages and repos - indentation corrected", "committedDate": "2020-02-14T10:28:02Z", "type": "commit"}, {"oid": "9912372a0afff872f99ee81f6d0a846dae621489", "url": "https://github.com/uyuni-project/uyuni/commit/9912372a0afff872f99ee81f6d0a846dae621489", "message": "Update init.sls\n\ndebian 9-10 onboarding - attempt unsuccessful throws the following error on the UI:\r\n\r\npkg_|-salt-minion-package_|-salt-minion_|-latest(retcode=2): No information found for 'salt-minion'. file_|-/etc/salt/minion_id_|-/etc/salt/minion_id_|-managed(retcode=2): One or more requisite failed: bootstrap.salt-minion-package file_|-/etc/salt/pki/minion/minion.pem_|-/etc/salt/pki/minion/minion.pem_|-managed(retcode=2): One or more requisite failed: bootstrap.salt-minion-package service_|-salt-minion_|-salt-minion_|-running(retcode=2): One or more requisite failed: bootstrap.salt-minion-package, bootstrap./etc/salt/minion.d/susemanager.conf, bootstrap./etc/salt/pki/minion/minion.pem, bootstrap./etc/salt/minion_id, bootstrap./etc/salt/pki/minion/minion.pub file_|-/etc/salt/minion.d/susemanager.conf_|-/etc/salt/minion.d/susemanager.conf_|-managed(retcode=2): One or more requisite failed: bootstrap.salt-minion-package file_|-/etc/salt/pki/minion/minion.pub_|-/etc/salt/pki/minion/minion.pub_|-managed(retcode=2): One or more requisite failed: bootstrap.salt-minion-package", "committedDate": "2020-02-14T10:40:55Z", "type": "commit"}, {"oid": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe", "url": "https://github.com/uyuni-project/uyuni/commit/24134b7b75e3fba4cee6644cd4c0681ec08f42fe", "message": "Debian 9 and 10 onboarding support (NOTE debian 10 not fully tested yet):\n- mgr_bootstrap_data.py added debian 9 and 10 required packages and \nbasechannels\n- susemanager-sls corrected jinja to remove minor version from URL - no \nnecessary on debian systems and added python3-apt and \napt-transport-https to the list of basic pkgs\n- rhn_bootstrap_strings.py removed minor version from the URL and \nmodified so now apt-transport-https gets installed before using debian \nsystems with the bootstrap script", "committedDate": "2020-02-16T17:36:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MDc3Mg==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379940772", "bodyText": "Do not include the 'astra' changes. I will do it on my PR.\nThis should look like as:\n     if [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\nCLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n     else\nCLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n    fi\n\nAlso review the spacing, just in case (quickly retry the script).", "author": "juliogonzalez", "createdAt": "2020-02-16T22:52:51Z", "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then", "originalCommit": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNDAwNA==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380404004", "bodyText": "committed changes ;)", "author": "gnuninu", "createdAt": "2020-02-18T00:15:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MDc3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941283", "bodyText": "Making the calculation outside the if doesn't make too much sense, it would be better having it inside.\nHowever I also wonder if adding the bootstrap repository wouldn't be a better alternative, so you don't need to look for the package (the path could change).\n@mcalmer any opinion?", "author": "juliogonzalez", "createdAt": "2020-02-16T23:00:39Z", "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,12 +622,26 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    if [ \"${{A_CLIENT_CODE_BASE}}\" == \"astra\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_VARIANT_ID}}/bootstrap\"\n+      # Debian does not need minor version in the bootstrap repo URL\n+     elif [ \"${{A_CLIENT_CODE_BASE}}\" == \"debian\" ]; then\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap\"\n+     else\n+        CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    fi\n     CLIENT_REPO_NAME=\"susemanager_bootstrap\"\n     CLIENT_REPO_FILE=\"/etc/apt/sources.list.d/$CLIENT_REPO_NAME.list\"\n \n     setup_deb_bootstrap_repo\n \n+    # Debian vanilla install requires apt-transport-https prior salt-minion installation otherwise will fail\n+    APT_TRANSPORT_HTTPS_DEB=$(wget -O - http://$HOSTNAME/pub/repositories/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/bootstrap/pool/main/a/apt/ /dev/null 2>&1 |grep apt-transport-https|cut -d '\"' -f 6)", "originalCommit": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA1NTYxMw==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380055613", "bodyText": "yes, I would put it into the if as it is only used there.", "author": "mcalmer", "createdAt": "2020-02-17T09:04:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA1OTk0Mg==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380059942", "bodyText": "@mcalmer I was rather asking about adding the bootstrap repo here, instead of doing magic to look for the package :-)\nBTW, if this package is needed, we'd need it as well at susemanager-utils/susemanager-sls/salt/bootstrap/ for people using WebUI to bootstrap.", "author": "juliogonzalez", "createdAt": "2020-02-17T09:13:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA2Nzk2OA==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380067968", "bodyText": "It seems the problem is, that you cannot do HTTPS without this packagwe? To get this package you must do plain HTTP. If the bootstrap repo is setup with HTTPS, you habe a chicken/egg problem. Solution could be to hard code HTTP for the bootstrap repo in case of Debian.\nAnd then we need to add this package to the other packages which should be installed.", "author": "mcalmer", "createdAt": "2020-02-17T09:29:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA2OTQ0MQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380069441", "bodyText": "Well, IIUC, you could add here the bootstrap repo with HTTP and leave it as it is, because later the script will disable all repositories and add the one for bootstrap with HTTPS, right?", "author": "juliogonzalez", "createdAt": "2020-02-17T09:31:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA3NzI3Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380077276", "bodyText": "Please only for debian in this case. We have customers blocking port 80.\nThey cannot do this when they want to have debian. But for the other OSes it would be better to support HTTPS from the first interaction.", "author": "mcalmer", "createdAt": "2020-02-17T09:46:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA3OTk2OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380079969", "bodyText": "@mcalmer I don't understand what you mean. I am not saying we do it for all OS.\nI am saying we could add the here (for Debian) the bootstrap repo with HTTP, install the package, and then the script will take care of disabling this one and enabling the one with HTTPS .", "author": "juliogonzalez", "createdAt": "2020-02-17T09:51:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM1ODc4MA==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380358780", "bodyText": "Hi guys, thanks for the feedback. I can have a look to achieve what Julio proposed. I am assuming a similar approach would be recommended for the web UI bootstrap as well?", "author": "gnuninu", "createdAt": "2020-02-17T20:39:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTI4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTMzMg==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941332", "bodyText": "Leave only:\n- Enable support for bootstrapping Debian 9 and 10\n\nAnd let's test Debian 10 :-)", "author": "juliogonzalez", "createdAt": "2020-02-16T23:01:19Z", "path": "susemanager-utils/susemanager-sls/susemanager-sls.changes", "diffHunk": "@@ -1,3 +1,4 @@\n+- Enable support for bootstrapping Debian 9 and 10 (debian 10 yet to be fully tested) (gnuninu) - nicola.dimarzo@suse.com", "originalCommit": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTM4Mg==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941382", "bodyText": "Same.", "author": "juliogonzalez", "createdAt": "2020-02-16T23:01:56Z", "path": "susemanager/susemanager.changes", "diffHunk": "@@ -1,3 +1,4 @@\n+- Enable support for bootstrapping Debian 9 and 10 (debian 10 yet to be fully tested) (gnuninu) - nicola.dimarzo@suse.com", "originalCommit": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTQxOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941419", "bodyText": "I hope autobuild will not complain about this cleanup. FMPOV it's OK :-)", "author": "juliogonzalez", "createdAt": "2020-02-16T23:02:28Z", "path": "susemanager/susemanager.changes", "diffHunk": "@@ -142,7 +143,7 @@ Wed Jan 16 12:26:43 CET 2019 - jgonzalez@suse.com\n \n - version 4.0.4-1\n - ensure POSTGRES_LANG is correctly set (bsc#1121787)\n-- add bootstrap repo definition for OES 2018 SP1 (bsc#1116826) \n+- add bootstrap repo definition for OES 2018 SP1 (bsc#1116826)", "originalCommit": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTUxNw==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r379941517", "bodyText": "To be honest, if we are going to have debian9-amd64-uyuni here, I wonder if we shouldn't have the uyuni prefix at spacewalk-common-channels repositories as well, in preparation for a future Debian support at SUSE Manager.\n@paususe?", "author": "juliogonzalez", "createdAt": "2020-02-16T23:03:41Z", "path": "susemanager/src/mgr_bootstrap_data.py", "diffHunk": "@@ -893,5 +997,15 @@\n         'BASECHANNEL' : 'ubuntu-18.04-pool-amd64-uyuni', 'PKGLIST' : PKGLISTUBUNTU1804,\n         'DEST' : '/srv/www/htdocs/pub/repositories/ubuntu/18/4/bootstrap/',\n         'TYPE' : 'deb'\n-    }\n+    },\n+    'debian9-amd64-uyuni' : {", "originalCommit": "24134b7b75e3fba4cee6644cd4c0681ec08f42fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDMwNTAwMw==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380305003", "bodyText": "Yes", "author": "paususe", "createdAt": "2020-02-17T17:34:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDM5OTk1Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r380399953", "bodyText": "just to clarify, shall we leave the suffix -uyuni as it is in mgr_bootstrap_data.py, is it ok?", "author": "gnuninu", "createdAt": "2020-02-17T23:48:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3MTgzMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r388171831", "bodyText": "yes!", "author": "juliogonzalez", "createdAt": "2020-03-05T09:30:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk0MTUxNw=="}], "type": "inlineReview"}, {"oid": "cec65b5a9f1e0ea10a68d9a56630c768caca6081", "url": "https://github.com/uyuni-project/uyuni/commit/cec65b5a9f1e0ea10a68d9a56630c768caca6081", "message": "required changes applied ref: Debian9/10 poc #1917", "committedDate": "2020-02-18T00:12:05Z", "type": "commit"}, {"oid": "54d67aab47d93d39146b27a0af1cc5288a646f28", "url": "https://github.com/uyuni-project/uyuni/commit/54d67aab47d93d39146b27a0af1cc5288a646f28", "message": "Removed code to install apt-transport-https on debian 9 install", "committedDate": "2020-02-19T23:57:27Z", "type": "commit"}, {"oid": "450feb0c9e386892666d0a0c7eccd67e6001b99d", "url": "https://github.com/uyuni-project/uyuni/commit/450feb0c9e386892666d0a0c7eccd67e6001b99d", "message": "Debian 9 and 10 onboarding successfully tested from the UI and scripts", "committedDate": "2020-03-03T11:24:18Z", "type": "commit"}, {"oid": "b60a757daa0c0017f04ce791d10e7415ed04409e", "url": "https://github.com/uyuni-project/uyuni/commit/b60a757daa0c0017f04ce791d10e7415ed04409e", "message": "final commit - debian 9 and 10 onboarding support fully tested", "committedDate": "2020-03-03T23:12:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3MjYxMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r388172611", "bodyText": "Please add a changelog entry at spacewalk-certs-tools.changes.", "author": "juliogonzalez", "createdAt": "2020-03-05T09:31:43Z", "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -622,7 +622,12 @@ def getRegistrationStackSh(saltEnabled):\n     getA_MISSING\n \n     CLIENT_REPOS_ROOT=\"${{CLIENT_REPOS_ROOT:-${{HTTPS_PUB_DIRECTORY}}/repositories}}\"\n-    CLIENT_REPO_URL=\"${{CLIENT_REPOS_ROOT}}/${{A_CLIENT_CODE_BASE}}/${{A_CLIENT_CODE_MAJOR_VERSION}}/${{A_CLIENT_CODE_MINOR_VERSION}}/bootstrap\"\n+    # Debian does not need minor version in the bootstrap repo URL", "originalCommit": "b60a757daa0c0017f04ce791d10e7415ed04409e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3NDIyOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r388174229", "bodyText": "As in the end we are adding -uyuni  suffix to bootstrap to support Debian both now on Uyuni and on SUSE Manager later, may I suggest you duplocate Debian 9 and Debian 10 here, and you add -uyuni to the labels and names, just as we do for Ubuntu above?\nThis will also require a change at susemanager/src/mgr_bootstrap_data.py and the doc for PR.", "author": "juliogonzalez", "createdAt": "2020-03-05T09:34:35Z", "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -1332,6 +1332,24 @@ checksum = sha256\n base_channels = debian-9-pool-amd64\n repo_url = http://security-cdn.debian.org/debian-security/dists/stretch/updates/main/binary-amd64/\n \n+[debian-9-amd64-uyuni-client-master]\n+label    = debian-9-amd64-uyuni-client-master\n+name     = Uyuni Master Client Tools for Debian 9 Stretch AMD64\n+archs    = amd64-deb\n+repo_type = deb\n+checksum = sha256\n+base_channels = debian-9-pool-amd64\n+repo_url = https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Master:/Debian9-Uyuni-Client-Tools/Debian_9/\n+\n+[debian-9-amd64-uyuni-client-stable]\n+label    = debian-9-amd64-uyuni-client-stable\n+name     = Uyuni Stable Client Tools for Debian 9 Stretch AMD64\n+archs    = amd64-deb\n+repo_type = deb\n+checksum = sha256\n+base_channels = debian-9-pool-amd64\n+repo_url = https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Stable:/Debian9-Uyuni-Client-Tools/Debian_9/\n+\n [debian-10-pool-amd64]", "originalCommit": "b60a757daa0c0017f04ce791d10e7415ed04409e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIwNDYwNQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r388204605", "bodyText": "no probs will do that", "author": "gnuninu", "createdAt": "2020-03-05T10:28:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE3NDIyOQ=="}], "type": "inlineReview"}, {"oid": "8af42b7841fd8a0a2696b80a12c4ec66bc82f155", "url": "https://github.com/uyuni-project/uyuni/commit/8af42b7841fd8a0a2696b80a12c4ec66bc82f155", "message": "adedd -uyuni suffix to debian 9 and 10 repo + changlog updated", "committedDate": "2020-03-09T00:10:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r389519778", "bodyText": "Mmmmm, why do we have this and the next channel, if we already have debian-10-amd64-uyuni-client-stable and debian-10-amd64-uyuni-client-master below?\nAlso, despite it was not changed by this PR, can we change -master to -devel as we have for all other OS, and remove -stable as we have for all other OS?", "author": "juliogonzalez", "createdAt": "2020-03-09T08:37:14Z", "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -1379,13 +1426,60 @@ checksum = sha256\n base_channels = debian-10-pool-amd64\n repo_url = http://security-cdn.debian.org/debian-security/dists/buster/updates/main/binary-amd64/\n \n+[debian-10-amd64-client-master]", "originalCommit": "8af42b7841fd8a0a2696b80a12c4ec66bc82f155", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2OTQ4NA==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r389569484", "bodyText": "why do we have this and the next channel, if we already have debian-10-amd64-uyuni-client-stable and debian-10-amd64-uyuni-client-master below?\n\nbecause i assumed we want to have these repo duplicated without -uyuni suffix for later SUMA support?\n\nAlso, despite it was not changed by this PR, can we change -master to -devel as we have for all other OS, and remove -stable as we have for all other OS\n\n.\nYeah fine.\nI have noticed something else, we need to add for Uyuni also in the  name line otherwise spacewalk-common-channels complains it exists.", "author": "gnuninu", "createdAt": "2020-03-09T10:18:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU4NTMxMA==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r389585310", "bodyText": "because i assumed we want to have these repo duplicated without -uyuni suffix for later SUMA support?\n\nNot really. SUSE Manager would have its own client tools on SCC, without using `spacewalk-common-channels' :-)\nHowever we still need the other stuff (not the clients) as SCC would not provide Debian repositories.", "author": "juliogonzalez", "createdAt": "2020-03-09T10:50:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU4ODA3NA==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r389588074", "bodyText": "gotcha!\nlet me wrap up and send over\ndoc updated already", "author": "gnuninu", "createdAt": "2020-03-09T10:55:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM4MzQ2Nw==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r390383467", "bodyText": "done the changes. let me know if it's ok", "author": "gnuninu", "createdAt": "2020-03-10T15:05:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTc3OA=="}], "type": "inlineReview"}, {"oid": "f6e6f3f88273af822e0676d477643be46007adeb", "url": "https://github.com/uyuni-project/uyuni/commit/f6e6f3f88273af822e0676d477643be46007adeb", "message": "Changed suffix -devel and update name entry", "committedDate": "2020-03-10T00:28:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODcwNw==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r391528707", "bodyText": "@gnuninu why is this commented?\nLooks to me that without this, Ubuntu won't work, as it uses osrelease[0] and osrelease[1]\nOr am I missing anything?", "author": "juliogonzalez", "createdAt": "2020-03-12T10:30:47Z", "path": "susemanager-utils/susemanager-sls/salt/bootstrap/init.sls", "diffHunk": "@@ -33,11 +33,11 @@ mgr_server_localhost_alias_absent:\n {% set bootstrap_repo_url = 'https://' ~ salt['pillar.get']('mgr_server') ~ '/pub/repositories/' ~ os_base ~ '/' ~ grains['osmajorrelease'] ~ '/bootstrap/' %}\n {% endif %}\n {%- elif grains['os_family'] == 'Debian' %}\n-{%- set osrelease = grains['osrelease'].split('.') %}\n+#{%- set osrelease = grains['osrelease'].split('.') %}", "originalCommit": "f6e6f3f88273af822e0676d477643be46007adeb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk1Mjk3Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r391952973", "bodyText": "@gnuninu why is this commented?\n\nthat change was probably inherited by the first tests i ran to fix the URL for Debian, indeed it's necessary for Ubuntu so i am removing the comment.\n\nLooks to me that without this, Ubuntu won't work, as it uses osrelease[0] and osrelease[1]\n\nyes Correct because it sets osrelease with the python string method split('.')", "author": "gnuninu", "createdAt": "2020-03-12T23:13:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODcwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODk2OA==", "url": "https://github.com/uyuni-project/uyuni/pull/1917#discussion_r391528968", "bodyText": "Don't add your email to the changelog entry.", "author": "juliogonzalez", "createdAt": "2020-03-12T10:31:18Z", "path": "susemanager/susemanager.changes", "diffHunk": "@@ -1,3 +1,4 @@\n+- Enable support for bootstrapping Debian 9 and 10 - nicola.dimarzo@suse.com", "originalCommit": "f6e6f3f88273af822e0676d477643be46007adeb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1a65f6c782ab828288b0a7067338cd79a7d3b303", "url": "https://github.com/uyuni-project/uyuni/commit/1a65f6c782ab828288b0a7067338cd79a7d3b303", "message": "removed comment for ubuntu bootstrap sls", "committedDate": "2020-03-12T23:16:31Z", "type": "commit"}, {"oid": "5caaab73ffec803bd6aeaf1e0e78eb09c2a2efd8", "url": "https://github.com/uyuni-project/uyuni/commit/5caaab73ffec803bd6aeaf1e0e78eb09c2a2efd8", "message": "removed email", "committedDate": "2020-03-12T23:31:58Z", "type": "commit"}, {"oid": "857933e69d6e054fb682e8ef040f94d612442d2c", "url": "https://github.com/uyuni-project/uyuni/commit/857933e69d6e054fb682e8ef040f94d612442d2c", "message": "Merge branch 'master' into debian9-10-poc", "committedDate": "2020-03-13T11:19:21Z", "type": "commit"}]}