{"pr_number": 2931, "pr_title": "Fix loading indicator for tables using SimpleDataProvider", "pr_createdAt": "2020-11-30T10:17:00Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2931", "timeline": [{"oid": "3f563c6b28210d6bf5d8856788419534b277489b", "url": "https://github.com/uyuni-project/uyuni/commit/3f563c6b28210d6bf5d8856788419534b277489b", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-11-30T12:53:51Z", "type": "forcePushed"}, {"oid": "e1b9944ff5e6787af63a0fa28478468996a46ef4", "url": "https://github.com/uyuni-project/uyuni/commit/e1b9944ff5e6787af63a0fa28478468996a46ef4", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-11-30T12:58:41Z", "type": "forcePushed"}, {"oid": "aeea922f72ecb0e5a745774025c9e3ef41a87d9f", "url": "https://github.com/uyuni-project/uyuni/commit/aeea922f72ecb0e5a745774025c9e3ef41a87d9f", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-11-30T13:02:47Z", "type": "forcePushed"}, {"oid": "4f6df72151a63c2d27c0485c56033888c1decde6", "url": "https://github.com/uyuni-project/uyuni/commit/4f6df72151a63c2d27c0485c56033888c1decde6", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-11-30T13:41:29Z", "type": "forcePushed"}, {"oid": "b9e97d89c966669b4bc2803ff9f1e454653e64da", "url": "https://github.com/uyuni-project/uyuni/commit/b9e97d89c966669b4bc2803ff9f1e454653e64da", "message": "Fix loading indicator for tables using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-12-01T15:15:55Z", "type": "commit"}, {"oid": "ad30277183a9d52d1974bf637d732bbb91907f45", "url": "https://github.com/uyuni-project/uyuni/commit/ad30277183a9d52d1974bf637d732bbb91907f45", "message": "Unit test loading indicator using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-12-01T15:20:42Z", "type": "forcePushed"}, {"oid": "9497fe9838e7dc6de5c8012da2445f98ea0e6cca", "url": "https://github.com/uyuni-project/uyuni/commit/9497fe9838e7dc6de5c8012da2445f98ea0e6cca", "message": "Unit test loading indicator using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-12-01T15:26:28Z", "type": "commit"}, {"oid": "9497fe9838e7dc6de5c8012da2445f98ea0e6cca", "url": "https://github.com/uyuni-project/uyuni/commit/9497fe9838e7dc6de5c8012da2445f98ea0e6cca", "message": "Unit test loading indicator using SimpleDataProvider\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-12-01T15:26:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUxOTg1NA==", "url": "https://github.com/uyuni-project/uyuni/pull/2931#discussion_r533519854", "bodyText": "Realistically this is redundant with the waitForElementToBeRemoved, but I think it's completely fine to be verbose here with the intention. Looks good to me. \ud83d\udc4d\nIn the long run, I would hope a smoother abstraction around loading will emerge as we write more tests for the table, but time will tell.", "author": "Etheryte", "createdAt": "2020-12-01T15:51:19Z", "path": "web/html/src/components/table/Table.test.js", "diffHunk": "@@ -117,4 +117,28 @@ describe(\"Table component\", () => {\n       })\n     ).not.toBe(null);\n   });\n+\n+  test(\"loading indicator for tables using SimpleDataProvider\", async () => {\n+    const data = [{value: \"Value 0\"}];\n+\n+    const { rerender } = render(\n+      <Table {...baseProps} loading={true} />\n+    );\n+\n+    // Check if loading indicator appears\n+    expect(screen.queryByText(baseProps.loadingText)).not.toBe(null);\n+\n+    rerender(\n+      <Table {...baseProps} data={data} loading={false} >\n+        <Column columnKey=\"value\" cell={item => item.value} />\n+      </Table>\n+    );\n+    await waitForElementToBeRemoved(() =>\n+      screen.queryByText(baseProps.loadingText)\n+    );\n+\n+    // Check if loading indicator disappears and data is displayed\n+    expect(screen.queryByText(baseProps.loadingText)).toBe(null);", "originalCommit": "9497fe9838e7dc6de5c8012da2445f98ea0e6cca", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}