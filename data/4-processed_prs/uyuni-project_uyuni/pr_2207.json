{"pr_number": 2207, "pr_title": "Testsuite - misleading error messages changed", "pr_createdAt": "2020-05-13T08:44:39Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2207", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzMDc2MA==", "url": "https://github.com/uyuni-project/uyuni/pull/2207#discussion_r424330760", "bodyText": "I think this is not really right, because we have two possibilities.\nOne is: you could connect.\nThe other is: you could connect, but the hostname was empty.\nThis should change to something like:\n raise \"Cannot connect to #{node} to get its hostname. Response code: #{code}\" if code.nonzero?\n raise \"No hostname for #{node}. Response code: #{code}\" if hostname.empty?\n\nAnd the same for FQDN below.", "author": "juliogonzalez", "createdAt": "2020-05-13T10:20:10Z", "path": "testsuite/features/support/twopence_init.rb", "diffHunk": "@@ -84,14 +84,14 @@\n   next if node.nil?\n \n   hostname, _local, _remote, code = node.test_and_store_results_together('hostname', 'root', 500)\n-  raise \"Cannot get hostname for node. Response code: #{code}\" if code.nonzero? || hostname.empty?\n+  raise \"Cannot connect to #{node} to get its hostname. Response code: #{code}\" if code.nonzero? || hostname.empty?", "originalCommit": "d384ca83c3f5ace79d1cd5e812ee02f45845b307", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM2NTU2MA==", "url": "https://github.com/uyuni-project/uyuni/pull/2207#discussion_r424365560", "bodyText": "Agreed, I will modify it.", "author": "lkotek", "createdAt": "2020-05-13T11:30:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzMDc2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM4MDE1OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2207#discussion_r424380159", "bodyText": "done", "author": "lkotek", "createdAt": "2020-05-13T11:58:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzMDc2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM4MzEzMw==", "url": "https://github.com/uyuni-project/uyuni/pull/2207#discussion_r424383133", "bodyText": "Why are not showing the node name again?\nI'd add #{node} (or whatever has the node name) to all messages otherwise we never know about what node the error is.", "author": "juliogonzalez", "createdAt": "2020-05-13T12:03:54Z", "path": "testsuite/features/support/twopence_init.rb", "diffHunk": "@@ -84,14 +84,16 @@\n   next if node.nil?\n \n   hostname, _local, _remote, code = node.test_and_store_results_together('hostname', 'root', 500)\n-  raise \"Cannot get hostname for node. Response code: #{code}\" if code.nonzero? || hostname.empty?\n+  raise \"Cannot connect to get client's hostname. Response code: #{code}\" if code.nonzero?", "originalCommit": "a7761e06b68759fb22a38354179fa01e68cab4d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM4NTI1MA==", "url": "https://github.com/uyuni-project/uyuni/pull/2207#discussion_r424385250", "bodyText": "I wasn't exact about the content of node variable before. It is based on FQDN, but it is not simple string, it is instance of Twopence. Simple said it is egg and chicken problem, we cannot get hostname or FQDN before it is initialized :-/ It is probably reason, why it wasn't here before.", "author": "lkotek", "createdAt": "2020-05-13T12:08:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM4MzEzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQyMjI4Mg==", "url": "https://github.com/uyuni-project/uyuni/pull/2207#discussion_r424422282", "bodyText": "Yep, I fall it to the same case sometime ago, I went even to the C code of Twopence to see what it was there, and I couldn't find a way to show here the name.\nI'm wondering if Twopence it's really bringing something extra comparing to an easy Ruby class for the remote nodes, like the one I implemented here:\nhttps://github.com/srbarrios/cucumber-ruby-skeleton/blob/master/features/support/remote_node.rb", "author": "srbarrios", "createdAt": "2020-05-13T13:07:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM4MzEzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ2Njg5Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/2207#discussion_r424466893", "bodyText": "@srbarrios I am glad I am not the only one ;-) I listed all available methods for Twopence and it just wasn't there. I also checked C source, but I still thought I had to miss it I expect something like that must be part of basic Twopence functionality.", "author": "lkotek", "createdAt": "2020-05-13T14:08:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM4MzEzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE3MzIzMA==", "url": "https://github.com/uyuni-project/uyuni/pull/2207#discussion_r425173230", "bodyText": "@srbarrios What do you think about current solution, please? (I just couldn't get it out of my head.) I will understand if you consider it as a workaround, but it works ;-)", "author": "lkotek", "createdAt": "2020-05-14T14:18:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM4MzEzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQ2MzkwOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2207#discussion_r426463909", "bodyText": "You are right @lkotek, it's a chicken and egg problem and it's the reason why it was not solved before.", "author": "Bischoff", "createdAt": "2020-05-18T08:45:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM4MzEzMw=="}], "type": "inlineReview"}, {"oid": "16a1752d4d8411ac48624f11d70d078f350a2950", "url": "https://github.com/uyuni-project/uyuni/commit/16a1752d4d8411ac48624f11d70d078f350a2950", "message": "preserve node fqdn before initialization", "committedDate": "2020-05-14T14:13:48Z", "type": "forcePushed"}, {"oid": "7efa12f2a753585f4e9833398b85b6f428dba23c", "url": "https://github.com/uyuni-project/uyuni/commit/7efa12f2a753585f4e9833398b85b6f428dba23c", "message": "missleading error messages changed", "committedDate": "2020-05-20T11:42:51Z", "type": "commit"}, {"oid": "7efa12f2a753585f4e9833398b85b6f428dba23c", "url": "https://github.com/uyuni-project/uyuni/commit/7efa12f2a753585f4e9833398b85b6f428dba23c", "message": "missleading error messages changed", "committedDate": "2020-05-20T11:42:51Z", "type": "forcePushed"}]}