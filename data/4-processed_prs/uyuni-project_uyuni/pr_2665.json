{"pr_number": 2665, "pr_title": "Virt boot using ISO and Cobbler", "pr_createdAt": "2020-09-28T14:58:30Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2665", "timeline": [{"oid": "1840c6d5fb0f69877c43fe3d127890c71b8ff86f", "url": "https://github.com/uyuni-project/uyuni/commit/1840c6d5fb0f69877c43fe3d127890c71b8ff86f", "message": "Watch for VM first reboot\n\nWhen creating a new VM using a CDROM ISO or a cobbler profile, we have\nto force the VM to shutdown at the first reboot. This is done using\nlibvirt's <on_reboot>destroy</on_reboot> configuration on the VM.\nHowever after this, the user would have to manually start the VM again.\n\nIn order to avoid the user to care about the manual restart, in the slt\nreactor we are detecting VMs defined with the on_reboot set to destroy,\nand then add those to a list of VMs to be watched. When the stopped\nevent is trapped we can then start it again.", "committedDate": "2020-09-30T14:47:41Z", "type": "forcePushed"}, {"oid": "e2e47968c733b8c3978c17200c0173bce90106d2", "url": "https://github.com/uyuni-project/uyuni/commit/e2e47968c733b8c3978c17200c0173bce90106d2", "message": "Watch for VM first reboot\n\nWhen creating a new VM using a CDROM ISO or a cobbler profile, we have\nto force the VM to shutdown at the first reboot. This is done using\nlibvirt's <on_reboot>destroy</on_reboot> configuration on the VM.\nHowever after this, the user would have to manually start the VM again.\n\nIn order to avoid the user to care about the manual restart, in the slt\nreactor we are detecting VMs defined with the on_reboot set to destroy,\nand then add those to a list of VMs to be watched. When the stopped\nevent is trapped we can then start it again.", "committedDate": "2020-10-01T13:01:18Z", "type": "forcePushed"}, {"oid": "f5bf17c0f994fd0312bcb3ffe6bff1684b2156b7", "url": "https://github.com/uyuni-project/uyuni/commit/f5bf17c0f994fd0312bcb3ffe6bff1684b2156b7", "message": "Watch for VM first reboot\n\nWhen creating a new VM using a CDROM ISO or a cobbler profile, we have\nto force the VM to shutdown at the first reboot. This is done using\nlibvirt's <on_reboot>destroy</on_reboot> configuration on the VM.\nHowever after this, the user would have to manually start the VM again.\n\nIn order to avoid the user to care about the manual restart, in the slt\nreactor we are detecting VMs defined with the on_reboot set to destroy,\nand then add those to a list of VMs to be watched. When the stopped\nevent is trapped we can then start it again.", "committedDate": "2020-10-01T14:57:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDMxMDM1OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r500310358", "bodyText": "I wonder if we should make these names more general as they are now also used for installing a new instance.\nBut maybe not in this PR.", "author": "mcalmer", "createdAt": "2020-10-06T14:05:12Z", "path": "java/code/src/com/suse/manager/webui/services/SaltServerActionService.java", "diffHunk": "@@ -1715,12 +1731,26 @@ else if (state.equals(\"rebooted\") && ((VirtualizationRebootGuestAction)action).i\n         KickstartableTree tree = KickstartFactory.lookupKickstartTreeByLabel(nameParts.get(0),\n                 OrgFactory.lookupById(Long.valueOf(nameParts.get(1))));\n         tree.createOrUpdateSaltFS();\n-        String kOpts = buildKernelOptions(system, profile, dist, host);\n-        Map<String, Object> pillar = new HashMap<>();\n+        String kOpts = buildKernelOptions(system, profile, dist, kickstartHost);\n+        Map<String, String> pillar = new HashMap<>();\n         pillar.put(\"uyuni-reinstall-kernel\", saltFSKernel);\n         pillar.put(\"uyuni-reinstall-initrd\", saltFSInitrd);\n         pillar.put(\"uyuni-reinstall-kopts\", kOpts);\n+\n+        return pillar;", "originalCommit": "f5bf17c0f994fd0312bcb3ffe6bff1684b2156b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDA4NTU4OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510085588", "bodyText": "it's a quick thing to do. Will add it to this PR", "author": "cbosdo", "createdAt": "2020-10-22T11:28:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDMxMDM1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQxMzkzMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r500413931", "bodyText": "i'm not really sure about this the methods in here seem to only serve this one purpose and its kind of an ugly implementation detail that we have to do this anyway. My suggestion would be to move the tracking into the\nLibvirtEngineDomainLifecycleMessageAction.", "author": "lucidd", "createdAt": "2020-10-06T15:57:00Z", "path": "java/code/src/com/suse/manager/virtualization/VirtualMachineRestarterSalt.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/**\n+ * Copyright (c) 2020 SUSE LLC\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+package com.suse.manager.virtualization;\n+\n+import com.suse.manager.webui.services.iface.VirtManager;\n+import com.suse.manager.webui.services.iface.VirtualMachineRestarter;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * Salt implementation for the VM restart handler\n+ */\n+public class VirtualMachineRestarterSalt implements VirtualMachineRestarter {", "originalCommit": "f5bf17c0f994fd0312bcb3ffe6bff1684b2156b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg2NDU4NA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r500864584", "bodyText": "I was unsure of where to put it... I'll try it this way.", "author": "cbosdo", "createdAt": "2020-10-07T09:21:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQxMzkzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1Njg3OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r500856878", "bodyText": "you can just lock use the ArrayList object as lock and don't need a separate object.", "author": "lucidd", "createdAt": "2020-10-07T09:09:28Z", "path": "java/code/src/com/suse/manager/virtualization/VirtualMachineRestarterSalt.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/**\n+ * Copyright (c) 2020 SUSE LLC\n+ *\n+ * This software is licensed to you under the GNU General Public License,\n+ * version 2 (GPLv2). There is NO WARRANTY for this software, express or\n+ * implied, including the implied warranties of MERCHANTABILITY or FITNESS\n+ * FOR A PARTICULAR PURPOSE. You should have received a copy of GPLv2\n+ * along with this software; if not, see\n+ * http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt.\n+ *\n+ * Red Hat trademarks are not licensed under GPLv2. No permission is\n+ * granted to use or replicate Red Hat trademarks that are incorporated\n+ * in this software or its documentation.\n+ */\n+package com.suse.manager.virtualization;\n+\n+import com.suse.manager.webui.services.iface.VirtManager;\n+import com.suse.manager.webui.services.iface.VirtualMachineRestarter;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * Salt implementation for the VM restart handler\n+ */\n+public class VirtualMachineRestarterSalt implements VirtualMachineRestarter {\n+\n+    private static VirtualMachineRestarterSalt instance;\n+\n+    private final VirtManager virtManager;\n+    private final Object lock = new Object();", "originalCommit": "f5bf17c0f994fd0312bcb3ffe6bff1684b2156b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg2MTQ0Nw==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r500861447", "bodyText": "Indeed, will change that", "author": "cbosdo", "createdAt": "2020-10-07T09:16:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1Njg3OA=="}], "type": "inlineReview"}, {"oid": "60afd666593ed71f97a8f7ae4603c86fbc2d1c09", "url": "https://github.com/uyuni-project/uyuni/commit/60afd666593ed71f97a8f7ae4603c86fbc2d1c09", "message": "Watch for VM first reboot\n\nWhen creating a new VM using a CDROM ISO or a cobbler profile, we have\nto force the VM to shutdown at the first reboot. This is done using\nlibvirt's <on_reboot>destroy</on_reboot> configuration on the VM.\nHowever after this, the user would have to manually start the VM again.\n\nIn order to avoid the user to care about the manual restart, in the slt\nreactor we are detecting VMs defined with the on_reboot set to destroy,\nand then add those to a list of VMs to be watched. When the stopped\nevent is trapped we can then start it again.", "committedDate": "2020-10-07T15:19:49Z", "type": "forcePushed"}, {"oid": "8fe24ef697491f4bbabe807907c0952b2aac5a52", "url": "https://github.com/uyuni-project/uyuni/commit/8fe24ef697491f4bbabe807907c0952b2aac5a52", "message": "Watch for VM first reboot\n\nWhen creating a new VM using a CDROM ISO or a cobbler profile, we have\nto force the VM to shutdown at the first reboot. This is done using\nlibvirt's <on_reboot>destroy</on_reboot> configuration on the VM.\nHowever after this, the user would have to manually start the VM again.\n\nIn order to avoid the user to care about the manual restart, in the slt\nreactor we are detecting VMs defined with the on_reboot set to destroy,\nand then add those to a list of VMs to be watched. When the stopped\nevent is trapped we can then start it again.", "committedDate": "2020-10-08T07:11:18Z", "type": "forcePushed"}, {"oid": "fc7516f409b3c6537110c50bf2a54cc7e057fa6f", "url": "https://github.com/uyuni-project/uyuni/commit/fc7516f409b3c6537110c50bf2a54cc7e057fa6f", "message": "Watch for VM first reboot\n\nWhen creating a new VM using a CDROM ISO or a cobbler profile, we have\nto force the VM to shutdown at the first reboot. This is done using\nlibvirt's <on_reboot>destroy</on_reboot> configuration on the VM.\nHowever after this, the user would have to manually start the VM again.\n\nIn order to avoid the user to care about the manual restart, in the slt\nreactor we are detecting VMs defined with the on_reboot set to destroy,\nand then add those to a list of VMs to be watched. When the stopped\nevent is trapped we can then start it again.", "committedDate": "2020-10-09T13:21:19Z", "type": "forcePushed"}, {"oid": "551ec325c83b0acdef828a21fb4a0e72608c9342", "url": "https://github.com/uyuni-project/uyuni/commit/551ec325c83b0acdef828a21fb4a0e72608c9342", "message": "testsuite: test VM provisioning on salt", "committedDate": "2020-10-16T07:08:18Z", "type": "forcePushed"}, {"oid": "4344eecc4850ad58d3f5146ef5218417230d3cfe", "url": "https://github.com/uyuni-project/uyuni/commit/4344eecc4850ad58d3f5146ef5218417230d3cfe", "message": "testsuite: test VM provisioning on salt", "committedDate": "2020-10-19T13:31:58Z", "type": "forcePushed"}, {"oid": "9fa7f6fa68d518ec0bcc6e485362ba5194210252", "url": "https://github.com/uyuni-project/uyuni/commit/9fa7f6fa68d518ec0bcc6e485362ba5194210252", "message": "testsuite: test VM provisioning on salt", "committedDate": "2020-10-19T14:32:35Z", "type": "forcePushed"}, {"oid": "4edb92c8b36a3d4c4e58d65b6e25666d065d4c23", "url": "https://github.com/uyuni-project/uyuni/commit/4edb92c8b36a3d4c4e58d65b6e25666d065d4c23", "message": "testsuite: test VM provisioning on salt", "committedDate": "2020-10-19T15:21:04Z", "type": "forcePushed"}, {"oid": "dfa3f09f073239840386a3410631a43dcbee9043", "url": "https://github.com/uyuni-project/uyuni/commit/dfa3f09f073239840386a3410631a43dcbee9043", "message": "testsuite: test VM provisioning on salt", "committedDate": "2020-10-19T16:24:19Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2OTY2OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508269668", "bodyText": "What makes the difference in this scenario to need the special tag of long_test, comparing with the other scenarios?\nI would say we don't need it here.", "author": "srbarrios", "createdAt": "2020-10-20T07:28:47Z", "path": "testsuite/features/reposync/srv_sync_products.feature", "diffHunk": "@@ -57,3 +57,21 @@ Feature: Synchronize products in the products page of the Setup Wizard\n     And I click the Add Product button\n     And I wait until I see \"SUSE Linux Enterprise Server 15 x86_64\" product has been added\n     Then the SLE15 products should be added\n+\n+@long_test", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwMDU2NA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508300564", "bodyText": "it's just that we don't need to fully sync that product if we don't run the long tests", "author": "cbosdo", "createdAt": "2020-10-20T08:17:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2OTY2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxMDEyOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508310129", "bodyText": "Well, it will also mean that we will not run this scenario if we don't run the long tests, is that what we want? This product will be only necessary when running long tests? Otherwise, I would remove the tag from that one.", "author": "srbarrios", "createdAt": "2020-10-20T08:31:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2OTY2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIzMDg5OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510230899", "bodyText": "Ok, as we only need at the same scenarios that we also have the tag, let's keep it here for now.", "author": "srbarrios", "createdAt": "2020-10-22T14:56:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2OTY2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIzMTEwMA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510231100", "bodyText": "As of today it's not needed anywhere else.", "author": "cbosdo", "createdAt": "2020-10-22T14:56:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2OTY2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MTQzNA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508271434", "bodyText": "If we need it, it might be interesting to have a step here waiting for that channel to be fully synched \ud83e\udd14\nBetter than just guess than it had enough time to synch.", "author": "srbarrios", "createdAt": "2020-10-20T07:31:41Z", "path": "testsuite/features/secondary/minkvm_guests.feature", "diffHunk": "@@ -342,6 +342,95 @@ Feature: Be able to manage KVM virtual machines via the GUI\n     Then I wait until I do not see \"test-net1\" text\n     And I should not see a \"test-net1\" virtual network on \"kvm_server\"\n \n+# Start provisioning scenarios\n+\n+# This scenario needs the 15-SP2 base system channel to be synchronized", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwMTEwOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508301109", "bodyText": "We already wait for the channel sync in the step killing (or not) the repo syncs", "author": "cbosdo", "createdAt": "2020-10-20T08:18:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MTQzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxMTQ0Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508311446", "bodyText": "Which is in another feature file right? :)\nBetter to add an extra pre-condition than to have dependencies with other feature files.", "author": "srbarrios", "createdAt": "2020-10-20T08:32:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MTQzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIwODUxMg==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510208512", "bodyText": "Added", "author": "cbosdo", "createdAt": "2020-10-22T14:28:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MTQzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MjA5Nw==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508272097", "bodyText": "I'm not sure we need this step Given I am on the Systems page to navigate to Distributions.", "author": "srbarrios", "createdAt": "2020-10-20T07:32:44Z", "path": "testsuite/features/secondary/minkvm_guests.feature", "diffHunk": "@@ -342,6 +342,95 @@ Feature: Be able to manage KVM virtual machines via the GUI\n     Then I wait until I do not see \"test-net1\" text\n     And I should not see a \"test-net1\" virtual network on \"kvm_server\"\n \n+# Start provisioning scenarios\n+\n+# This scenario needs the 15-SP2 base system channel to be synchronized\n+@long_test\n+@virthost_kvm\n+@scc_credentials\n+  Scenario: Create auto installation distribution\n+    Given I am on the Systems page", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwMTQxMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508301411", "bodyText": "it failed to work without it IIRC", "author": "cbosdo", "createdAt": "2020-10-20T08:18:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MjA5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwNzc0OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508307748", "bodyText": "Probably what you need is something like Given I am authorized as admin admin", "author": "srbarrios", "createdAt": "2020-10-20T08:27:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MjA5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIwODcxNQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510208715", "bodyText": "Worked, changed", "author": "cbosdo", "createdAt": "2020-10-22T14:29:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MjA5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MzU4OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508273588", "bodyText": "Instead of a comment, if we really want to advise about what it's doing here, I would prefer a new Scenario, with a title of \"Test the VM boot params\"", "author": "srbarrios", "createdAt": "2020-10-20T07:35:20Z", "path": "testsuite/features/secondary/minkvm_guests.feature", "diffHunk": "@@ -342,6 +342,95 @@ Feature: Be able to manage KVM virtual machines via the GUI\n     Then I wait until I do not see \"test-net1\" text\n     And I should not see a \"test-net1\" virtual network on \"kvm_server\"\n \n+# Start provisioning scenarios\n+\n+# This scenario needs the 15-SP2 base system channel to be synchronized\n+@long_test\n+@virthost_kvm\n+@scc_credentials\n+  Scenario: Create auto installation distribution\n+    Given I am on the Systems page\n+    When I follow the left menu \"Systems > Autoinstallation > Distributions\"\n+    And I follow \"Create Distribution\"\n+    And I enter \"SLE-15-SP2-TFTP\" as \"label\"\n+    And I enter \"/usr/share/tftpboot-installation/SLE-15-SP2-x86_64\" as \"basepath\"\n+    And I select \"SLE-Product-SLES15-SP2-Pool for x86_64\" from \"channelid\"\n+    And I select \"SUSE Linux Enterprise 15\" from \"installtype\"\n+    And I enter \"useonlinerepo insecure=1\" as \"kernelopts\"\n+    And I click on \"Create Autoinstallable Distribution\"\n+    Then I should see a \"Autoinstallable Distributions\" text\n+    And I should see a \"SLE-15-SP2-TFTP\" link\n+\n+@long_test\n+@virthost_kvm\n+@scc_credentials\n+  Scenario: Create auto installation profile\n+    Given I am on the Systems page\n+    And I follow the left menu \"Systems > Autoinstallation > Profiles\"\n+    And I follow \"Upload Kickstart/Autoyast File\"\n+    When I enter \"15-sp2-kvm\" as \"kickstartLabel\"\n+    And I select \"SLE-15-SP2-TFTP\" from \"kstreeId\"\n+    And I select \"KVM Virtualized Guest\" from \"virtualizationTypeLabel\"\n+    And I attach the file \"/sle-15-sp2-autoyast.xml\" to \"fileUpload\"\n+    And I click on \"Create\"\n+    Then I should see a \"Autoinstallation: 15-sp2-kvm\" text\n+    And I should see a \"Autoinstallation Details\" text\n+    When I enter \"self_update=0\" as \"kernel_options\"\n+    And I click on \"Update\"\n+    And I follow \"Variables\"\n+    And I enter \"distrotree=SLE-15-SP2-TFTP\\nregistration_key=1-SUSE-PKG-x86_64\" as \"variables\" text area\n+    And I click on \"Update Variables\"\n+    And I follow \"Autoinstallation File\"\n+    Then I should see a \"SLE-15-SP2-TFTP\" text\n+\n+@long_test\n+@virthost_kvm\n+@scc_credentials\n+  Scenario: Create an auto installing KVM virtual machine\n+    Given I am on the \"Virtualization\" page of this \"kvm_server\"\n+    When I follow \"Create Guest\"\n+    And I wait until I see \"General\" text\n+    And I enter \"test-vm2\" as \"name\"\n+    And I select \"15-sp2-kvm\" from \"cobbler_profile\"\n+    And I click on \"Create\"\n+    Then I should see a \"Hosted Virtual Systems\" text\n+    When I wait until I see \"test-vm2\" text\n+    And I wait until table row for \"test-vm2\" contains button \"Stop\"\n+    # Test the VM boot params", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwMTk0Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508301943", "bodyText": "yeah right, but that doesn't tell the reader what we expect", "author": "cbosdo", "createdAt": "2020-10-20T08:19:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MzU4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NDc0OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508274748", "bodyText": "Well... as you have the info already... why not offer the valures of those booleans into the raised message?", "author": "srbarrios", "createdAt": "2020-10-20T07:37:23Z", "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1201,6 +1201,38 @@\n   end\n end\n \n+Then(/^\"([^\"]*)\" virtual machine on \"([^\"]*)\" should boot using autoyast$/) do |vm, host|\n+  node = get_target(host)\n+  output, _code = node.run(\"virsh dumpxml #{vm}\")\n+  tree = Nokogiri::XML(output)\n+  has_kernel = tree.xpath(\"//os/kernel\").size == 1\n+  has_initrd = tree.xpath(\"//os/initrd\").size == 1\n+  has_autoyast = tree.xpath(\"//os/cmdline\")[0].to_s.include? ' autoyast='\n+  raise 'Wrong kernel/initrd/cmdline configuration' unless has_kernel && \\", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwMjIwNQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508302205", "bodyText": "good point", "author": "cbosdo", "createdAt": "2020-10-20T08:20:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NDc0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NTMxNA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508275314", "bodyText": "Use single quotes if there is nothing to escape or a variable involved.", "author": "srbarrios", "createdAt": "2020-10-20T07:38:22Z", "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1201,6 +1201,38 @@\n   end\n end\n \n+Then(/^\"([^\"]*)\" virtual machine on \"([^\"]*)\" should boot using autoyast$/) do |vm, host|\n+  node = get_target(host)\n+  output, _code = node.run(\"virsh dumpxml #{vm}\")\n+  tree = Nokogiri::XML(output)\n+  has_kernel = tree.xpath(\"//os/kernel\").size == 1\n+  has_initrd = tree.xpath(\"//os/initrd\").size == 1\n+  has_autoyast = tree.xpath(\"//os/cmdline\")[0].to_s.include? ' autoyast='\n+  raise 'Wrong kernel/initrd/cmdline configuration' unless has_kernel && \\\n+                                                           has_initrd && has_autoyast\n+end\n+\n+Then(/^\"([^\"]*)\" virtual machine on \"([^\"]*)\" should boot on hard disk at next start$/) do |vm, host|\n+  node = get_target(host)\n+  output, _code = node.run(\"virsh dumpxml --inactive #{vm}\")\n+  tree = Nokogiri::XML(output)\n+  has_kernel = tree.xpath(\"//os/kernel\").size == 1\n+  has_initrd = tree.xpath(\"//os/initrd\").size == 1\n+  has_cmdline = tree.xpath(\"//os/cmdline\").size == 1\n+  raise 'Virtual machine will not boot on hard disk at next start' unless !has_kernel && \\\n+                                                                          !has_initrd && !has_cmdline\n+end\n+\n+Then(/^\"([^\"]*)\" virtual machine on \"([^\"]*)\" should (not stop|stop) on reboot((?: at next start)?)$/) do |vm, host, stop, next_start|\n+  node = get_target(host)\n+  inactive = next_start == \" at next start\" ? \"--inactive\" : \"\"", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI0OTU3OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510249578", "bodyText": "fixed", "author": "cbosdo", "createdAt": "2020-10-22T15:21:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NTMxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NjM0Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508276346", "bodyText": "Same here, we have information to provide the users to better understand why we raised that error, let's offer on_reboot value.", "author": "srbarrios", "createdAt": "2020-10-20T07:40:10Z", "path": "testsuite/features/step_definitions/command_steps.rb", "diffHunk": "@@ -1201,6 +1201,38 @@\n   end\n end\n \n+Then(/^\"([^\"]*)\" virtual machine on \"([^\"]*)\" should boot using autoyast$/) do |vm, host|\n+  node = get_target(host)\n+  output, _code = node.run(\"virsh dumpxml #{vm}\")\n+  tree = Nokogiri::XML(output)\n+  has_kernel = tree.xpath(\"//os/kernel\").size == 1\n+  has_initrd = tree.xpath(\"//os/initrd\").size == 1\n+  has_autoyast = tree.xpath(\"//os/cmdline\")[0].to_s.include? ' autoyast='\n+  raise 'Wrong kernel/initrd/cmdline configuration' unless has_kernel && \\\n+                                                           has_initrd && has_autoyast\n+end\n+\n+Then(/^\"([^\"]*)\" virtual machine on \"([^\"]*)\" should boot on hard disk at next start$/) do |vm, host|\n+  node = get_target(host)\n+  output, _code = node.run(\"virsh dumpxml --inactive #{vm}\")\n+  tree = Nokogiri::XML(output)\n+  has_kernel = tree.xpath(\"//os/kernel\").size == 1\n+  has_initrd = tree.xpath(\"//os/initrd\").size == 1\n+  has_cmdline = tree.xpath(\"//os/cmdline\").size == 1\n+  raise 'Virtual machine will not boot on hard disk at next start' unless !has_kernel && \\\n+                                                                          !has_initrd && !has_cmdline\n+end\n+\n+Then(/^\"([^\"]*)\" virtual machine on \"([^\"]*)\" should (not stop|stop) on reboot((?: at next start)?)$/) do |vm, host, stop, next_start|\n+  node = get_target(host)\n+  inactive = next_start == \" at next start\" ? \"--inactive\" : \"\"\n+  output, _code = node.run(\"virsh dumpxml #{inactive} #{vm}\")\n+  tree = Nokogiri::XML(output)\n+  on_reboot = tree.xpath(\"//on_reboot\")[0].to_s\n+  raise \"Invalid reboot configuration #{next_start}\" unless />destroy</.match(on_reboot) && stop == \"stop\" || \\", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI0OTcwNg==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510249706", "bodyText": "fixed", "author": "cbosdo", "createdAt": "2020-10-22T15:21:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NjM0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3NjYzNQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508276635", "bodyText": "very nice thanks :)", "author": "srbarrios", "createdAt": "2020-10-20T07:40:39Z", "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -456,10 +456,10 @@\n   find(css).set(PACKAGE_BY_CLIENT[client])\n end\n \n-When(/^I select \"([^\\\"]*)\" as a product$/) do |product|\n+When(/^I (deselect|select) \"([^\\\"]*)\" as a product$/) do |select, product|", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4MDA2Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508280066", "bodyText": "I'm not very happy with this way of checking added channels, but... not for this PR.\nI would instead have a unique step definition, with a product name variable, then a map, where the product is the key and the list of channels are the value, and we just iterate on them.", "author": "srbarrios", "createdAt": "2020-10-20T07:46:06Z", "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -546,6 +546,14 @@\n   raise unless output[:stdout].include? '[I] SLE-Module-Server-Applications15-Pool for x86_64 Server Applications Module 15 x86_64 [sle-module-server-applications15-pool-x86_64]'\n end\n \n+Then(/^the SLE15SP2 base products should be added$/) do", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIwOTA2Mg==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510209062", "bodyText": "I'll let you implement that change later then \ud83d\ude09", "author": "cbosdo", "createdAt": "2020-10-22T14:29:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4MDA2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIzNTE4Nw==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510235187", "bodyText": "SUSE/spacewalk#12837", "author": "srbarrios", "createdAt": "2020-10-22T15:02:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4MDA2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4MjI4Mg==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508282282", "bodyText": "Take into account it will the default timeout on this find. Probably good, but just saying.", "author": "srbarrios", "createdAt": "2020-10-20T07:49:40Z", "path": "testsuite/features/step_definitions/navigation_steps.rb", "diffHunk": "@@ -112,12 +112,23 @@\n \n Then(/^I wait until I see the (VNC|spice) graphical console$/) do |type|\n   repeat_until_timeout(message: \"The #{type} graphical console didn't load\") do\n-    break unless has_xpath?('.//canvas')\n+    break if find(:xpath, '//canvas')", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwMzE3Nw==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508303177", "bodyText": "that should give the time for the connection to be prepared and the canvas to appear", "author": "cbosdo", "createdAt": "2020-10-20T08:21:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4MjI4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4MzMxOA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508283318", "bodyText": "#{Failed to connect} very strange. What's that? A variable?", "author": "srbarrios", "createdAt": "2020-10-20T07:51:17Z", "path": "testsuite/features/step_definitions/navigation_steps.rb", "diffHunk": "@@ -112,12 +112,23 @@\n \n Then(/^I wait until I see the (VNC|spice) graphical console$/) do |type|\n   repeat_until_timeout(message: \"The #{type} graphical console didn't load\") do\n-    break unless has_xpath?('.//canvas')\n+    break if find(:xpath, '//canvas')\n+\n+    # If the connection failed try reloading since the VM may not have been ready\n+    if find(:xpath, \"//*[contains(@class, \\\"modal-title\\\") and text() = '#{Failed to connect}']\")", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwMzYxNA==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508303614", "bodyText": "arf, no... it's a reminder of a previous step iteration: I'll make it a real string", "author": "cbosdo", "createdAt": "2020-10-20T08:22:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4MzMxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4NTEwOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508285109", "bodyText": "I discourage the use of direct URI, if there is a way to navigate through the menus, better use it, if not then fine.", "author": "srbarrios", "createdAt": "2020-10-20T07:53:59Z", "path": "testsuite/features/step_definitions/navigation_steps.rb", "diffHunk": "@@ -549,6 +564,10 @@\n   visit(\"https://#{$server.full_hostname}/rhn/kickstart/KickstartOverview.do\")\n end\n \n+When(/^I am on Autoinstallation Distributions page$/) do\n+  visit(\"https://#{$server.full_hostname}/rhn/kickstart/ViewTrees.do\")", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwMzkxMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508303911", "bodyText": "Just copy pasted from another test :)", "author": "cbosdo", "createdAt": "2020-10-20T08:22:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4NTEwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDA5NjcyNg==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r510096726", "bodyText": "This is a remnant from a previous attempt, will remove the step as it's no longer used", "author": "cbosdo", "createdAt": "2020-10-22T11:49:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4NTEwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI4NjE3Mg==", "url": "https://github.com/uyuni-project/uyuni/pull/2665#discussion_r508286172", "bodyText": "Many thanks! :)", "author": "srbarrios", "createdAt": "2020-10-20T07:55:43Z", "path": "testsuite/features/support/twopence_init.rb", "diffHunk": "@@ -129,6 +129,9 @@ def get_target(host)\n # * for the PXE booted clients, it is derived from the branch name, the hardware type,\n #   and a fingerprint, e.g. example.Intel-Genuine-None-d6df84cca6f478cdafe824e35bbb6e3b\n def get_system_name(host)\n+  # If the system is not known, just return the parameter", "originalCommit": "dfa3f09f073239840386a3410631a43dcbee9043", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "98c66da1a514a2d3159c22cb635bd367b7ad35e9", "url": "https://github.com/uyuni-project/uyuni/commit/98c66da1a514a2d3159c22cb635bd367b7ad35e9", "message": "Better VM changes notifications in VirtualInstanceManager\n\nSo far VM refresh events where sent only when the plan was applied in\nVirtualInstanceManager. Send the refresh event in the functions actually\nadding / deleting / updating the VM in the database.", "committedDate": "2020-10-22T14:27:18Z", "type": "forcePushed"}, {"oid": "34b03d8c7a09f08d8461cd761932cbcbccce6121", "url": "https://github.com/uyuni-project/uyuni/commit/34b03d8c7a09f08d8461cd761932cbcbccce6121", "message": "testsuite: test VM provisioning on salt", "committedDate": "2020-10-22T14:34:28Z", "type": "forcePushed"}, {"oid": "95e21563fa7d72295df816dd004d6ba0efe16607", "url": "https://github.com/uyuni-project/uyuni/commit/95e21563fa7d72295df816dd004d6ba0efe16607", "message": "testsuite: test VM provisioning on salt", "committedDate": "2020-10-22T15:21:12Z", "type": "forcePushed"}, {"oid": "5ecd66d5d9065e73d3d2520cc9a8612917ca1136", "url": "https://github.com/uyuni-project/uyuni/commit/5ecd66d5d9065e73d3d2520cc9a8612917ca1136", "message": "Allow creating cobbler system profiles without an associated action\n\nWhen provisioning a virtual machine on a Salt minion, there will be no\nkickstart action associated with the CobblerVirtualSystemCommand object.\n\nIn such a case we don't need to set the VM hardware settings in the\nprofile since that will be handled by a Salt state rather than by the\ncobbler/koan pair.", "committedDate": "2020-10-22T16:36:09Z", "type": "commit"}, {"oid": "351ae7c853a4ff957e13343db6a6b4008ca365fc", "url": "https://github.com/uyuni-project/uyuni/commit/351ae7c853a4ff957e13343db6a6b4008ca365fc", "message": "Extract reusable code from SaltServerActionService.autoinstallInitAction", "committedDate": "2020-10-22T16:36:09Z", "type": "commit"}, {"oid": "d93d40132845f60b5560ea1dd43e4c2330a896c1", "url": "https://github.com/uyuni-project/uyuni/commit/d93d40132845f60b5560ea1dd43e4c2330a896c1", "message": "Allow backend to create VM using cobbler on Salt minions\n\nEnhance the VirtualizationCreateGuestAction to handle the creation of\nVMs using a cobbler profile.\n\nAlso improve the Salt state to force the VM to stop at the first reboot\nin order to avoid running the automated installation for ever.\n\nNote: this commit requires Salt minion to have the on_reboot parameter\non the virt.running state.", "committedDate": "2020-10-22T16:36:48Z", "type": "commit"}, {"oid": "ff6a9d2e5f2ba66ce28908607a0beac190e04b92", "url": "https://github.com/uyuni-project/uyuni/commit/ff6a9d2e5f2ba66ce28908607a0beac190e04b92", "message": "Enhance VM creation UI to boot using a cobbler profile", "committedDate": "2020-10-22T16:37:04Z", "type": "commit"}, {"oid": "4e3465bf93f9326ce05b0e41933065a12bb89dc6", "url": "https://github.com/uyuni-project/uyuni/commit/4e3465bf93f9326ce05b0e41933065a12bb89dc6", "message": "Guess VM boot devices\n\nIn order to boot from a CDROM ISO or using PXE, guess the boot devices order to set on the VM", "committedDate": "2020-10-22T16:37:05Z", "type": "commit"}, {"oid": "c33fa5061179433ba0ff8d2434b10b2433869ce0", "url": "https://github.com/uyuni-project/uyuni/commit/c33fa5061179433ba0ff8d2434b10b2433869ce0", "message": "Watch for VM first reboot\n\nWhen creating a new VM using a CDROM ISO or a cobbler profile, we have\nto force the VM to shutdown at the first reboot. This is done using\nlibvirt's <on_reboot>destroy</on_reboot> configuration on the VM.\nHowever after this, the user would have to manually start the VM again.\n\nIn order to avoid the user to care about the manual restart, in the slt\nreactor we are detecting VMs defined with the on_reboot set to destroy,\nand then add those to a list of VMs to be watched. When the stopped\nevent is trapped we can then start it again.", "committedDate": "2020-10-22T16:37:05Z", "type": "commit"}, {"oid": "f572cb92524ca612be0374cfe7e2270dccc8e0a4", "url": "https://github.com/uyuni-project/uyuni/commit/f572cb92524ca612be0374cfe7e2270dccc8e0a4", "message": "testsuite: handle unknown twopence nodes in get_system_name", "committedDate": "2020-10-22T16:37:05Z", "type": "commit"}, {"oid": "4e22d506bc2fea4f31e960f8fe77dc0f65dc4612", "url": "https://github.com/uyuni-project/uyuni/commit/4e22d506bc2fea4f31e960f8fe77dc0f65dc4612", "message": "testsuite: fix compute_list_to_leave_running os_version tests", "committedDate": "2020-10-22T16:37:05Z", "type": "commit"}, {"oid": "e9822ab63caaf8a50177a7395621c7962e1ebf38", "url": "https://github.com/uyuni-project/uyuni/commit/e9822ab63caaf8a50177a7395621c7962e1ebf38", "message": "testsuite: add step to deselect a product", "committedDate": "2020-10-22T16:37:05Z", "type": "commit"}, {"oid": "877288070e1f36b7b2ae343b9db93bd2b22c64a6", "url": "https://github.com/uyuni-project/uyuni/commit/877288070e1f36b7b2ae343b9db93bd2b22c64a6", "message": "testsuite: fix graphical console tests\n\nThe graphical console tests were inverted, and thus not testing the\nfeature itself.", "committedDate": "2020-10-22T16:37:05Z", "type": "commit"}, {"oid": "9a9595065d8440f6ee8d3e00fe9c8e8c9dc341fb", "url": "https://github.com/uyuni-project/uyuni/commit/9a9595065d8440f6ee8d3e00fe9c8e8c9dc341fb", "message": "remove non-virt related feature from virtualization run_set", "committedDate": "2020-10-22T16:37:06Z", "type": "commit"}, {"oid": "e6c20bdf6158016b9c92c41f0abde27a203045a7", "url": "https://github.com/uyuni-project/uyuni/commit/e6c20bdf6158016b9c92c41f0abde27a203045a7", "message": "testsuite: add step entering text with newlines in text area\n\nIn order to be able to set a text in a field with a new line character,\nwe need to use Javascript. Since this is normally only done in text\nareas, add a text area related step for this. This also avoids\npotentially breaking the other uses of the existing step.", "committedDate": "2020-10-22T16:37:06Z", "type": "commit"}, {"oid": "561845118815451fda43677f205e1219706c13ac", "url": "https://github.com/uyuni-project/uyuni/commit/561845118815451fda43677f205e1219706c13ac", "message": "testsuite: add @long_test flag", "committedDate": "2020-10-22T16:37:06Z", "type": "commit"}, {"oid": "b9774cf5d723f54d41931dbbcc46991ca1f151b7", "url": "https://github.com/uyuni-project/uyuni/commit/b9774cf5d723f54d41931dbbcc46991ca1f151b7", "message": "testsuite: reposync the sle 15-sp2 minimal products\n\nIn order to test the provisioning of VMs which will use the TFTP image\ninstalled on the server, we need the basesystem and manager tool repos\nmatching this OS version to be synced.", "committedDate": "2020-10-22T16:37:06Z", "type": "commit"}, {"oid": "a58a3c4f7f66eaec9c928d99bb8af11d894ea8ef", "url": "https://github.com/uyuni-project/uyuni/commit/a58a3c4f7f66eaec9c928d99bb8af11d894ea8ef", "message": "testsuite: test VM provisioning on salt", "committedDate": "2020-10-22T16:37:06Z", "type": "commit"}, {"oid": "a58a3c4f7f66eaec9c928d99bb8af11d894ea8ef", "url": "https://github.com/uyuni-project/uyuni/commit/a58a3c4f7f66eaec9c928d99bb8af11d894ea8ef", "message": "testsuite: test VM provisioning on salt", "committedDate": "2020-10-22T16:37:06Z", "type": "forcePushed"}]}