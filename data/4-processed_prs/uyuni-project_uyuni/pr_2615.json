{"pr_number": 2615, "pr_title": "Fix: handle version comparison corner cases in Ubuntu packages", "pr_createdAt": "2020-09-16T14:31:34Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2615", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxMDAxMg==", "url": "https://github.com/uyuni-project/uyuni/pull/2615#discussion_r489510012", "bodyText": "You adapted the check to test explicit of ~ not found, but no of this tests here has a case where a tilde exists.\nCan you add such a test?", "author": "mcalmer", "createdAt": "2020-09-16T15:04:14Z", "path": "java/code/src/com/redhat/rhn/common/util/test/RpmVersionComparatorTest.java", "diffHunk": "@@ -168,6 +168,11 @@ public void testUbuntuBugzilla1150113() {\n     public void testBugzilla1173201() {\n         assertCompareSymm(-1, \"1.27+1.3.9\", \"1.27.1ubuntu1+1.3.9\");\n         assertCompareSymm(-1, \"1.27+1.3.9\", \"1.27.1+1.3.9\");\n+        assertCompareSymm(-1, \"1.27+1.3.9\", \"1.27.1ubuntu2+1.3.11\");\n+        assertCompareSymm(1, \"1.27+1.3.9\", \"1.3.11\");\n+        assertCompareSymm(1, \"1.27\", \"1.3.11\");\n+        assertCompareSymm(1, \"1.27+1.3.9\", \"1.3.9\");\n+        assertCompareSymm(-1, \"1.27+1.3.9\", \"5.18.4.1\");", "originalCommit": "95604f376a819e60d44905b549b19a580003ca65", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUzMzk5MQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2615#discussion_r489533991", "bodyText": "Fixed", "author": "mbologna", "createdAt": "2020-09-16T15:36:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxMDAxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxMjI0Mg==", "url": "https://github.com/uyuni-project/uyuni/pull/2615#discussion_r489512242", "bodyText": "Not sure if this should go into the uyuni release which is currently prepared.\nIf yes, please change the number of the script as we already have a 100-... .\nIf not, you need to change the directory as it will be released for 4.2.1-to-4.2.2", "author": "mcalmer", "createdAt": "2020-09-16T15:07:06Z", "path": "schema/susemanager-schema-4.2.0-to-susemanager-schema-4.2.1/100-rpm.pkb.sql", "diffHunk": "@@ -0,0 +1,255 @@\n+-- oracle equivalent source sha1 539cb03eb177b7e87992701071488bbb32bb0624", "originalCommit": "95604f376a819e60d44905b549b19a580003ca65", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxMzUwMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2615#discussion_r489513501", "bodyText": "You are right - this time I deducted the right dir but I was not considering the release. Adjusting with the nextver dir.", "author": "mbologna", "createdAt": "2020-09-16T15:08:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxMjI0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTU1NzMxNA==", "url": "https://github.com/uyuni-project/uyuni/pull/2615#discussion_r489557314", "bodyText": "@mcalmer I'd say 4.2.0-to-4.2.1. The current spec on master is '4.2.0' and I still didn't tag for the Uyuni 2020.09 release.\nWhat am I missing?", "author": "juliogonzalez", "createdAt": "2020-09-16T16:09:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxMjI0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTU1ODkxMg==", "url": "https://github.com/uyuni-project/uyuni/pull/2615#discussion_r489558912", "bodyText": "Maybe you were thinking about the CVE? We'll not do a full release for that. Instead we'll release a set of packages to be installed on top of Uyuni 2020.07: https://github.com/uyuni-project/uyuni/wiki/Releasing-Uyuni-patches\nThis is nothing we are going to do frequently at all, but I created the mechanism for important situations such as this CVE.", "author": "juliogonzalez", "createdAt": "2020-09-16T16:12:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUxMjI0Mg=="}], "type": "inlineReview"}, {"oid": "222e7c6b29d04a3c1876e86127928752e32d5dd4", "url": "https://github.com/uyuni-project/uyuni/commit/222e7c6b29d04a3c1876e86127928752e32d5dd4", "message": "Chore: populate .changes", "committedDate": "2020-09-16T15:35:25Z", "type": "forcePushed"}, {"oid": "717b2e2b77d0f9ee5deed5212d574911039926be", "url": "https://github.com/uyuni-project/uyuni/commit/717b2e2b77d0f9ee5deed5212d574911039926be", "message": "Chore: populate .changes", "committedDate": "2020-09-16T16:11:48Z", "type": "forcePushed"}, {"oid": "8cde4906926869a66a817e07010ec5171e887673", "url": "https://github.com/uyuni-project/uyuni/commit/8cde4906926869a66a817e07010ec5171e887673", "message": "Test: add JUnit to cover Ubuntu package comparison", "committedDate": "2020-09-22T14:31:00Z", "type": "commit"}, {"oid": "10a3ae6f782f3813298d1022aad6cdfe9402c84e", "url": "https://github.com/uyuni-project/uyuni/commit/10a3ae6f782f3813298d1022aad6cdfe9402c84e", "message": "Test: add database tests to cover Ubuntu pkg cmp", "committedDate": "2020-09-22T14:31:00Z", "type": "commit"}, {"oid": "388f61fed23ba2b282aa5bfd1ade42e19dde6a13", "url": "https://github.com/uyuni-project/uyuni/commit/388f61fed23ba2b282aa5bfd1ade42e19dde6a13", "message": "Fix: handle cmp w/Ubuntu pkgs containing '+' (Java)", "committedDate": "2020-09-22T14:31:00Z", "type": "commit"}, {"oid": "1aeec09a92506a74de593337ed8069ddf190bb39", "url": "https://github.com/uyuni-project/uyuni/commit/1aeec09a92506a74de593337ed8069ddf190bb39", "message": "Chore: populate .changes", "committedDate": "2020-09-22T14:32:20Z", "type": "forcePushed"}, {"oid": "e0f5723a5e17b8ece456a2a84a010e50ffa1bcdd", "url": "https://github.com/uyuni-project/uyuni/commit/e0f5723a5e17b8ece456a2a84a010e50ffa1bcdd", "message": "Fix: handle cmp w/Ubuntu pkgs containing '+' (db)", "committedDate": "2020-09-22T14:46:20Z", "type": "commit"}, {"oid": "b6d33a266f7dff3dfda2a4aca822688169a49279", "url": "https://github.com/uyuni-project/uyuni/commit/b6d33a266f7dff3dfda2a4aca822688169a49279", "message": "Chore: populate .changes", "committedDate": "2020-09-22T14:46:20Z", "type": "commit"}, {"oid": "f17f7a9d1375d206bd85deb6bff34fccd5592add", "url": "https://github.com/uyuni-project/uyuni/commit/f17f7a9d1375d206bd85deb6bff34fccd5592add", "message": "Chore: move SQL migration script", "committedDate": "2020-09-22T14:46:20Z", "type": "commit"}, {"oid": "f17f7a9d1375d206bd85deb6bff34fccd5592add", "url": "https://github.com/uyuni-project/uyuni/commit/f17f7a9d1375d206bd85deb6bff34fccd5592add", "message": "Chore: move SQL migration script", "committedDate": "2020-09-22T14:46:20Z", "type": "forcePushed"}]}