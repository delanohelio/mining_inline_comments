{"pr_number": 2182, "pr_title": "Enable support for syncing and bootstrapping Ubuntu 20.04 LTS", "pr_createdAt": "2020-05-04T15:09:46Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2182", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTUxMjIwNg==", "url": "https://github.com/uyuni-project/uyuni/pull/2182#discussion_r419512206", "bodyText": "There will be more packages, don't panic.\nI want to start from scratch instead of reusing stuff from Ubuntu 18.04, so we can have only the packages we really need for a really minimal Ubuntu installation (I am trying with Ubuntu Server without anything preinstalled but the openssh server).", "author": "juliogonzalez", "createdAt": "2020-05-04T15:14:07Z", "path": "susemanager/src/mgr_bootstrap_data.py", "diffHunk": "@@ -538,6 +538,11 @@\n     \"dmidecode\",\n ]\n \n+PKGLISTUBUNTU2004 = [\n+    \"salt-common\",\n+    \"salt-minion\",", "originalCommit": "76b2d9bb7f39deb969be40de2c4ac4620066bc4d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI0MDY5MQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2182#discussion_r420240691", "bodyText": "Ok, so I tried this and... looks just too good. I was able to bootstrap a minimal Ubuntu 20.04 minion only with this. No need to copy anything at all from Universe.\nToo good to be true. I need to review this tomorrow.", "author": "juliogonzalez", "createdAt": "2020-05-05T16:26:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTUxMjIwNg=="}], "type": "inlineReview"}, {"oid": "2e882fa294ea5533c0d5dd09d657509ff0f3ea01", "url": "https://github.com/uyuni-project/uyuni/commit/2e882fa294ea5533c0d5dd09d657509ff0f3ea01", "message": "Enable support for syncing and bootstrapping Ubuntu 20.04 LTS", "committedDate": "2020-05-04T15:45:13Z", "type": "forcePushed"}, {"oid": "7bd341b269e9bc17f2380e6c77f5dfe6fdcbb6a7", "url": "https://github.com/uyuni-project/uyuni/commit/7bd341b269e9bc17f2380e6c77f5dfe6fdcbb6a7", "message": "Enable support for syncing and bootstrapping Ubuntu 20.04 LTS", "committedDate": "2020-05-06T11:48:09Z", "type": "forcePushed"}, {"oid": "275a5dd9542c454706d9dcfb0089077401214b2a", "url": "https://github.com/uyuni-project/uyuni/commit/275a5dd9542c454706d9dcfb0089077401214b2a", "message": "Enable support for syncing and bootstrapping Ubuntu 20.04 LTS", "committedDate": "2020-05-06T16:06:35Z", "type": "forcePushed"}, {"oid": "432645213857878eeb4b3901095b752514ede348", "url": "https://github.com/uyuni-project/uyuni/commit/432645213857878eeb4b3901095b752514ede348", "message": "Enable support for syncing and bootstrapping Ubuntu 20.04 LTS", "committedDate": "2020-05-07T08:56:05Z", "type": "forcePushed"}, {"oid": "e643cd41816bba72da36bca03b5cb129442cd3a2", "url": "https://github.com/uyuni-project/uyuni/commit/e643cd41816bba72da36bca03b5cb129442cd3a2", "message": "Enable support for syncing and bootstrapping Ubuntu 20.04 LTS", "committedDate": "2020-05-07T09:58:46Z", "type": "forcePushed"}, {"oid": "c49978535e2f1c9070740d6ea3ea0ffc43787511", "url": "https://github.com/uyuni-project/uyuni/commit/c49978535e2f1c9070740d6ea3ea0ffc43787511", "message": "Enable support for syncing and bootstrapping Ubuntu 20.04 LTS", "committedDate": "2020-05-07T10:42:17Z", "type": "commit"}, {"oid": "c49978535e2f1c9070740d6ea3ea0ffc43787511", "url": "https://github.com/uyuni-project/uyuni/commit/c49978535e2f1c9070740d6ea3ea0ffc43787511", "message": "Enable support for syncing and bootstrapping Ubuntu 20.04 LTS", "committedDate": "2020-05-07T10:42:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQxMjMyMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2182#discussion_r421412321", "bodyText": "This prevents getting extra \"recommended\" dependencies: debconf-utils, python3-tz and python3-croniter. I got the same test results with or without them. Even if we discover that they are really needed, then we should make them required on salt.\nWhy I did this? Because debconf-utils is a problem. The package is at universe, so for SUSE Manager I had to add it to the client tools. But the package that creates it is debconf (which is on main), and FMPOV doing that is really dangerous.", "author": "juliogonzalez", "createdAt": "2020-05-07T10:47:25Z", "path": "spacewalk/certs-tools/rhn_bootstrap_strings.py", "diffHunk": "@@ -664,7 +664,7 @@ def getRegistrationStackSh(saltEnabled):\n \t        apt-get purge salt-common\n \t        rm -rf /etc/salt/minion.d/\n         fi\n-        apt-get --yes install $A_MISSING\n+        apt-get --yes install --no-install-recommends $A_MISSING", "originalCommit": "c49978535e2f1c9070740d6ea3ea0ffc43787511", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQxMjgyNg==", "url": "https://github.com/uyuni-project/uyuni/pull/2182#discussion_r421412826", "bodyText": "NOTE: This only works for apt-based systems (see https://docs.saltstack.com/en/latest/ref/states/all/salt.states.pkg.html)", "author": "juliogonzalez", "createdAt": "2020-05-07T10:48:22Z", "path": "susemanager-utils/susemanager-sls/salt/bootstrap/init.sls", "diffHunk": "@@ -131,6 +131,7 @@ trust_suse_manager_tools_deb_gpg_key:\n salt-minion-package:\n   pkg.latest:\n     - name: salt-minion\n+    - install_recommends: False", "originalCommit": "c49978535e2f1c9070740d6ea3ea0ffc43787511", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQxMzEwMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2182#discussion_r421413101", "bodyText": "Missing from this PR: the SUSE Manager repo. Can't add them until SCC channels for Ubuntu 20.04 are ready.", "author": "juliogonzalez", "createdAt": "2020-05-07T10:48:52Z", "path": "susemanager/src/mgr_bootstrap_data.py", "diffHunk": "@@ -1142,6 +1156,11 @@\n         'DEST' : '/srv/www/htdocs/pub/repositories/ubuntu/18/4/bootstrap/',\n         'TYPE' : 'deb'\n     },\n+    'ubuntu-20.04-amd64-uyuni' : {", "originalCommit": "c49978535e2f1c9070740d6ea3ea0ffc43787511", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}