{"pr_number": 1995, "pr_title": "show a warning when missing the SUSE Manager Tools Channel", "pr_createdAt": "2020-03-07T15:43:48Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/1995", "timeline": [{"oid": "b6c0db22caf168f8c4fbcfd6b46e2cd24340eac1", "url": "https://github.com/uyuni-project/uyuni/commit/b6c0db22caf168f8c4fbcfd6b46e2cd24340eac1", "message": "show a warning when missing the SUSE Manager Tools Channel", "committedDate": "2020-03-07T15:54:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQwNzI4Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/1995#discussion_r389407286", "bodyText": "It is better to set the state everything at once. I'd just move these lines right before setState few lines above and preparing a variable to populate with messages. Something like the following:\nlet resultMessages = [];\n      if (currentObject.state.noToolsChannelSubscription && currentObject.state.issMaster) {\n        resultMessages = MessagesUtils.warning(t(\"No SUSE Manager Server Subscription availabel. Products requiring Client Tools Channel will not be shown.\"))\n      }\ncurrentObject.setState({\n          serverData: data[_DATA_ROOT_ID],\n          errors: resultMessages,\n          loading: false,\n          selectedItems: [],\n          scheduleResyncItems: [],\n          scheduledItems: [],\n        });", "author": "ncounter", "createdAt": "2020-03-08T21:33:28Z", "path": "web/html/src/manager/admin/setup/products/products.js", "diffHunk": "@@ -118,6 +119,11 @@ class ProductsPageWrapper extends React.Component {\n           scheduleResyncItems: [],\n           scheduledItems: [],\n         });\n+        if (currentObject.state.noToolsChannelSubscription && currentObject.state.issMaster) {", "originalCommit": "a99d9b364d9e71d7bdc9bc25bf4bf1883a1cdfb6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUyNTE4MA==", "url": "https://github.com/uyuni-project/uyuni/pull/1995#discussion_r389525180", "bodyText": "done", "author": "mcalmer", "createdAt": "2020-03-09T08:49:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQwNzI4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTQxOTEwOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1995#discussion_r389419109", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        errors: MessagesUtils.warning(t(\"No SUSE Manager Server Subscription availabel. Products requiring Client Tools Channel will not be shown.\"))\n          \n          \n            \n                        errors: MessagesUtils.warning(t(\"No SUSE Manager Server Subscription available. Products requiring Client Tools Channel will not be shown.\"))", "author": "Loquacity", "createdAt": "2020-03-08T23:41:21Z", "path": "web/html/src/manager/admin/setup/products/products.js", "diffHunk": "@@ -118,6 +119,11 @@ class ProductsPageWrapper extends React.Component {\n           scheduleResyncItems: [],\n           scheduledItems: [],\n         });\n+        if (currentObject.state.noToolsChannelSubscription && currentObject.state.issMaster) {\n+          currentObject.setState({\n+            errors: MessagesUtils.warning(t(\"No SUSE Manager Server Subscription availabel. Products requiring Client Tools Channel will not be shown.\"))", "originalCommit": "a99d9b364d9e71d7bdc9bc25bf4bf1883a1cdfb6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dd07c6b79603f192cc8cbb0193a19fa7cf52e6b6", "url": "https://github.com/uyuni-project/uyuni/commit/dd07c6b79603f192cc8cbb0193a19fa7cf52e6b6", "message": "show a warning when missing the SUSE Manager Tools Channel", "committedDate": "2020-03-09T13:15:49Z", "type": "commit"}, {"oid": "46f7633e24a21e128486ab53c72cf7ba4dec2714", "url": "https://github.com/uyuni-project/uyuni/commit/46f7633e24a21e128486ab53c72cf7ba4dec2714", "message": "update changelog", "committedDate": "2020-03-09T13:15:49Z", "type": "commit"}, {"oid": "da527d9a7e403e95d9318df4b47940f3c04c2927", "url": "https://github.com/uyuni-project/uyuni/commit/da527d9a7e403e95d9318df4b47940f3c04c2927", "message": "add warning to logfile when no SUSE Manager Subscription is available", "committedDate": "2020-03-09T13:15:49Z", "type": "commit"}, {"oid": "3718c2d4323e403cf5c1edcf5bf387b816cdee71", "url": "https://github.com/uyuni-project/uyuni/commit/3718c2d4323e403cf5c1edcf5bf387b816cdee71", "message": "unit test hasToolsChannelSubscription()", "committedDate": "2020-03-09T13:15:58Z", "type": "commit"}, {"oid": "3718c2d4323e403cf5c1edcf5bf387b816cdee71", "url": "https://github.com/uyuni-project/uyuni/commit/3718c2d4323e403cf5c1edcf5bf387b816cdee71", "message": "unit test hasToolsChannelSubscription()", "committedDate": "2020-03-09T13:15:58Z", "type": "forcePushed"}]}