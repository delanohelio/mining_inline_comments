{"pr_number": 2181, "pr_title": "Reposync bugfixes", "pr_createdAt": "2020-05-02T20:31:55Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2181", "timeline": [{"oid": "5b00656b832d7caa393e209fb61af5cb6ad16d79", "url": "https://github.com/uyuni-project/uyuni/commit/5b00656b832d7caa393e209fb61af5cb6ad16d79", "message": "bugfix: correct number of processes in reposync\n\nThis will use two processes per logical CPU, up to a maximum of 32.", "committedDate": "2020-05-02T20:29:44Z", "type": "commit"}, {"oid": "70adabb8374f12dc948d4aead0a0adb8472a01db", "url": "https://github.com/uyuni-project/uyuni/commit/70adabb8374f12dc948d4aead0a0adb8472a01db", "message": "bugfix: prevent traceback if element is None\n\nFollowing traceback would be produced for certain repos:\n\n```\n...\n  File \"/usr/lib/python3.6/site-packages/spacewalk/server/importlib/\nbackend.py\", line 671, in lookupEVRs\n    for evr in sorted(evrHash.keys(), key=lambda x: (x[0] if x[0] != '' else\nNone, x[1], x[2])):\nTypeError: '<' not supported between instances of 'int' and 'NoneType'\n```", "committedDate": "2020-05-04T21:32:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg2NDQxMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2181#discussion_r419864411", "bodyText": "(k or 0) sounds wrong. Should it be (k[0] or 0) ?", "author": "mcalmer", "createdAt": "2020-05-05T05:01:38Z", "path": "backend/server/importlib/backend.py", "diffHunk": "@@ -668,7 +669,7 @@ def lookupErrataSeverityId(self, erratum):\n     def lookupEVRs(self, evrHash):\n         sql = \"select LOOKUP_EVR(:epoch, :version, :release) id from dual\"\n         h = self.dbmodule.prepare(sql)\n-        for evr in sorted(evrHash.keys(), key=lambda x: (x[0] if x[0] != '' else None, x[1], x[2])):\n+        for evr in sorted(evrHash.keys(), key=lambda k: (str(k or 0), k[1], k[2])):", "originalCommit": "70adabb8374f12dc948d4aead0a0adb8472a01db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA3MDMxOA==", "url": "https://github.com/uyuni-project/uyuni/pull/2181#discussion_r420070318", "bodyText": "Right, addressed", "author": "moio", "createdAt": "2020-05-05T12:29:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg2NDQxMQ=="}], "type": "inlineReview"}, {"oid": "2fabe95e2e24ad1e9d00f766a88802f3ba440ded", "url": "https://github.com/uyuni-project/uyuni/commit/2fabe95e2e24ad1e9d00f766a88802f3ba440ded", "message": "bugfix: prevent traceback if element is None\n\nFollowing traceback would be produced for certain repos:\n\n```\n...\n  File \"/usr/lib/python3.6/site-packages/spacewalk/server/importlib/\nbackend.py\", line 671, in lookupEVRs\n    for evr in sorted(evrHash.keys(), key=lambda x: (x[0] if x[0] != '' else\nNone, x[1], x[2])):\nTypeError: '<' not supported between instances of 'int' and 'NoneType'\n```", "committedDate": "2020-05-05T12:28:26Z", "type": "commit"}, {"oid": "2fabe95e2e24ad1e9d00f766a88802f3ba440ded", "url": "https://github.com/uyuni-project/uyuni/commit/2fabe95e2e24ad1e9d00f766a88802f3ba440ded", "message": "bugfix: prevent traceback if element is None\n\nFollowing traceback would be produced for certain repos:\n\n```\n...\n  File \"/usr/lib/python3.6/site-packages/spacewalk/server/importlib/\nbackend.py\", line 671, in lookupEVRs\n    for evr in sorted(evrHash.keys(), key=lambda x: (x[0] if x[0] != '' else\nNone, x[1], x[2])):\nTypeError: '<' not supported between instances of 'int' and 'NoneType'\n```", "committedDate": "2020-05-05T12:28:26Z", "type": "forcePushed"}]}