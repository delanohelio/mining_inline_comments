{"pr_number": 2921, "pr_title": "Fix file download links", "pr_createdAt": "2020-11-27T19:21:41Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2921", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTczOTQ2OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2921#discussion_r531739468", "bodyText": "@ncounter @moio We should discuss this next week.", "author": "ricardoasmarques", "createdAt": "2020-11-27T19:23:29Z", "path": "java/code/webapp/WEB-INF/pages/common/fragments/configuration/files/contents.jspf", "diffHunk": "@@ -27,8 +27,9 @@\n                         <bean:message key=\"filedetails.contents.jspf.toolarge-edit\" arg0=\"${requestScope.maxEditBytes}\"/>\n \n                         <strong><bean:message key=\"filedetails.contents.jspf.download-header\"/></strong><br />\n+                        <%-- TODO Shouldn't we add the 'data-senna-off=\"true\"' on 'StringResource_*.xml' files directly, instead of injecting it here? --%>", "originalCommit": "e0a0608e67e00526e3fd6586389d82142521d852", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a6d5706d8dccd39e27b3389c0da6a98679e46078", "url": "https://github.com/uyuni-project/uyuni/commit/a6d5706d8dccd39e27b3389c0da6a98679e46078", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-11-30T10:07:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ4MDAxMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2921#discussion_r532480011", "bodyText": "Shouldn't we add the data-senna-off=\"true\" on StringResource_*.xml files directly, instead of injecting it here?", "author": "ricardoasmarques", "createdAt": "2020-11-30T10:09:48Z", "path": "java/code/webapp/WEB-INF/pages/common/fragments/configuration/files/contents.jspf", "diffHunk": "@@ -28,7 +28,7 @@\n \n                         <strong><bean:message key=\"filedetails.contents.jspf.download-header\"/></strong><br />\n                         <bean:message key=\"filedetails.contents.jspf.download\"\n-                                arg0=\"/rhn/configuration/file/FileDownload.do?crid=${revision.id}&amp;cfid=${revision.configFile.id}\"\n+                                arg0=\"/rhn/configuration/file/FileDownload.do?crid=${revision.id}&amp;cfid=${revision.configFile.id}\\\" data-senna-off=\\\"true\"", "originalCommit": "a6d5706d8dccd39e27b3389c0da6a98679e46078", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUyMjcxMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2921#discussion_r532522711", "bodyText": "Done, data-senna-off=\"true\" was now moved to StringResource_en_US.xml.", "author": "ricardoasmarques", "createdAt": "2020-11-30T11:19:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ4MDAxMQ=="}], "type": "inlineReview"}, {"oid": "851afd5c899e53bf4d396767ce5412786cd9605f", "url": "https://github.com/uyuni-project/uyuni/commit/851afd5c899e53bf4d396767ce5412786cd9605f", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-11-30T11:13:56Z", "type": "forcePushed"}, {"oid": "64b23718349f0f3ac1e32cde8ac5569c4127fd4a", "url": "https://github.com/uyuni-project/uyuni/commit/64b23718349f0f3ac1e32cde8ac5569c4127fd4a", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-11-30T11:21:44Z", "type": "forcePushed"}, {"oid": "039dac4e74fef78bb28028e8ada6235b5661b15f", "url": "https://github.com/uyuni-project/uyuni/commit/039dac4e74fef78bb28028e8ada6235b5661b15f", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-11-30T11:22:52Z", "type": "forcePushed"}, {"oid": "b9fe210e7934afd19ab7e5c848ccc35b4523976a", "url": "https://github.com/uyuni-project/uyuni/commit/b9fe210e7934afd19ab7e5c848ccc35b4523976a", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-11-30T11:48:52Z", "type": "forcePushed"}, {"oid": "ecdc77955e734cc94c160aa56ddadb779186f769", "url": "https://github.com/uyuni-project/uyuni/commit/ecdc77955e734cc94c160aa56ddadb779186f769", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-11-30T12:33:18Z", "type": "forcePushed"}, {"oid": "46e64a4597cff31af465e25185d75153cfc50e5d", "url": "https://github.com/uyuni-project/uyuni/commit/46e64a4597cff31af465e25185d75153cfc50e5d", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-12-04T09:42:30Z", "type": "forcePushed"}, {"oid": "eb40da32abdbb0516bb47c558a47a3191a249f0e", "url": "https://github.com/uyuni-project/uyuni/commit/eb40da32abdbb0516bb47c558a47a3191a249f0e", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-12-04T19:28:21Z", "type": "forcePushed"}, {"oid": "8908e6bd2daaf0e3c6e2fe093438c9ef102c43ab", "url": "https://github.com/uyuni-project/uyuni/commit/8908e6bd2daaf0e3c6e2fe093438c9ef102c43ab", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-12-04T19:32:10Z", "type": "forcePushed"}, {"oid": "2272003b383f848ba002cd88ac987665e57fedd4", "url": "https://github.com/uyuni-project/uyuni/commit/2272003b383f848ba002cd88ac987665e57fedd4", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-12-09T18:09:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA0Mzc3MQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2921#discussion_r540043771", "bodyText": "I think ${HOME} is more correct here.. I'll test it and update PR accordingly if works.", "author": "ricardoasmarques", "createdAt": "2020-12-10T10:14:38Z", "path": "testsuite/features/secondary/min_action_chain.feature", "diffHunk": "@@ -92,6 +92,16 @@ Feature: Action chains on Salt minions\n     Then I should see a \"Revision 1 of /etc/action-chain.cnf from channel Action Chain Channel\" text\n     And I should see a \"Update Configuration File\" button\n \n+  Scenario: Download the configuration file from configuration channel\n+    Given I am authorized as \"admin\" with password \"admin\"\n+    When I follow the left menu \"Configuration > Channels\"\n+    And I follow \"Action Chain Channel\"\n+    And I follow \"List/Remove Files\"\n+    And I follow \"/etc/action-chain.cnf\"\n+    And I follow \"Download File\"\n+    And I wait until file \"${PWD}/action-chain.cnf\" exists on \"localhost\"", "originalCommit": "2272003b383f848ba002cd88ac987665e57fedd4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA5Nzc2Nw==", "url": "https://github.com/uyuni-project/uyuni/pull/2921#discussion_r540097767", "bodyText": "I've now confirmed that the file is downloaded to the current working directory, which is /root, so I've changed location to /root explicitly, instead of relying on env variables.", "author": "ricardoasmarques", "createdAt": "2020-12-10T11:36:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA0Mzc3MQ=="}], "type": "inlineReview"}, {"oid": "ed9eb621c67d59414952d63ae826200f73cc08a1", "url": "https://github.com/uyuni-project/uyuni/commit/ed9eb621c67d59414952d63ae826200f73cc08a1", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-12-10T11:35:18Z", "type": "forcePushed"}, {"oid": "d8a609ca058f8220812f4b0f193135953d175d4b", "url": "https://github.com/uyuni-project/uyuni/commit/d8a609ca058f8220812f4b0f193135953d175d4b", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-12-10T11:38:00Z", "type": "forcePushed"}, {"oid": "648a859e687c84d1b9c4e155f2f542f1094812ed", "url": "https://github.com/uyuni-project/uyuni/commit/648a859e687c84d1b9c4e155f2f542f1094812ed", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-12-10T13:23:20Z", "type": "forcePushed"}, {"oid": "17195c54ee2e532d231fb27c17bad8401edcb326", "url": "https://github.com/uyuni-project/uyuni/commit/17195c54ee2e532d231fb27c17bad8401edcb326", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-12-10T14:08:57Z", "type": "commit"}, {"oid": "17195c54ee2e532d231fb27c17bad8401edcb326", "url": "https://github.com/uyuni-project/uyuni/commit/17195c54ee2e532d231fb27c17bad8401edcb326", "message": "Fix file download links\n\nFile download links are broken since \"senna.js\" integration.\n\nFixes: https://bugzilla.suse.com/show_bug.cgi?id=1179324\n\nSigned-off-by: Ricardo Marques <rimarques@suse.com>", "committedDate": "2020-12-10T14:08:57Z", "type": "forcePushed"}]}