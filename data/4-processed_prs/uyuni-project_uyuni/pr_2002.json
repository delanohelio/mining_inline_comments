{"pr_number": 2002, "pr_title": "Recurring actions improvements", "pr_createdAt": "2020-03-10T14:40:22Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2002", "timeline": [{"oid": "9bb6be418a37112b4fe50be491457711d7b3818f", "url": "https://github.com/uyuni-project/uyuni/commit/9bb6be418a37112b4fe50be491457711d7b3818f", "message": "Add cron expr validation\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-12T08:18:13Z", "type": "forcePushed"}, {"oid": "8881b629f0703fd80763f9dfa05bdcd2956b857d", "url": "https://github.com/uyuni-project/uyuni/commit/8881b629f0703fd80763f9dfa05bdcd2956b857d", "message": "Fix: Other orgs actions not listed as sat admin\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-12T14:59:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEzNTEyMg==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r392135122", "bodyText": "Please remove", "author": "parlt91", "createdAt": "2020-03-13T10:07:49Z", "path": "web/html/src/manager/state/recurring-states.js", "diffHunk": "@@ -112,50 +112,43 @@ class RecurringStates extends React.Component {\n             \"/rhn/manager/api/recurringactions/save\",\n             JSON.stringify(schedule),\n             \"application/json\"\n-        ).promise.then((data) => {\n-            let newMsgs = [];\n-            const decorator = data.success ? MessagesUtils.info : MessagesUtils.error;\n-            if (data.messages === undefined || data.messages.length === 0) {\n-                // no explicit messages from the server -> let's display a generic one\n-                const defaultMsg = data.success\n-                      ? <span>{t(\"Schedule successfully\" + (this.state.action === \"create\" ? \" created.\" : \" updated.\"))}</span>\n-                      : <span>{t(\"Error on saving schedule.\")}</span>;\n-                newMsgs = decorator(defaultMsg);\n-            }\n-            else {\n-                // messages from the recurringactions are already localized\n-                newMsgs = decorator.apply(null, data.messages);\n-            }\n-\n-            const msgs = this.state.messages.concat(newMsgs);\n+        ).promise.then((_) => {\n+            const successMsg = <span>{t(\"Schedule successfully\" + (this.state.action === \"create\" ? \" created.\" : \" updated.\"))}</span>\n+            const msgs = this.state.messages.concat(MessagesUtils.info(successMsg));\n \n             while (msgs.length > messagesCounterLimit) {\n                 msgs.shift();\n             }\n \n-            this.onMessageChanged(msgs);\n+            this.onMessageChanged(msgs); // todo remove - unneeded\n             this.setState({\n                 messages: msgs\n             });\n \n-            if (data.success) {\n-                this.handleForwardAction();\n-            } else {\n-                this.handleResponseError();\n-            }\n-\n+            this.handleForwardAction();\n         }).catch(this.handleResponseError);\n     }\n+//\n \n     deleteSchedule(item) {\n         return Network.del(\"/rhn/manager/api/recurringactions/\" + item.recurringActionId + \"/delete\")\n-            .promise.then(data => {\n-                this.handleForwardAction();\n+            .promise.then((_) => {\n                 this.setState({\n                     messages: MessagesUtils.info(\"Schedule \\'\" + item.scheduleName + \"\\' has been deleted.\")\n                 });\n+                this.handleForwardAction();\n             })\n-            .catch(this.handleResponseError);\n+            .catch(data => {\n+                const taskoErrorMsg = MessagesUtils.error(\n+                    t(\"Error when scheduling the action. Check if Taskomatic is running\"));\n+                let messages = (data && data.status === 503)\n+                    ? taskoErrorMsg\n+                    : Network.responseErrorMessage(jqXHR);\n+                console.log(messages);", "originalCommit": "b1063544e0b055ec3ae94578a49051eebf6d20c1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEzNTcxOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r392135719", "bodyText": "We should put ... when deleting the ... here instead", "author": "parlt91", "createdAt": "2020-03-13T10:09:00Z", "path": "web/html/src/manager/state/recurring-states.js", "diffHunk": "@@ -112,50 +112,43 @@ class RecurringStates extends React.Component {\n             \"/rhn/manager/api/recurringactions/save\",\n             JSON.stringify(schedule),\n             \"application/json\"\n-        ).promise.then((data) => {\n-            let newMsgs = [];\n-            const decorator = data.success ? MessagesUtils.info : MessagesUtils.error;\n-            if (data.messages === undefined || data.messages.length === 0) {\n-                // no explicit messages from the server -> let's display a generic one\n-                const defaultMsg = data.success\n-                      ? <span>{t(\"Schedule successfully\" + (this.state.action === \"create\" ? \" created.\" : \" updated.\"))}</span>\n-                      : <span>{t(\"Error on saving schedule.\")}</span>;\n-                newMsgs = decorator(defaultMsg);\n-            }\n-            else {\n-                // messages from the recurringactions are already localized\n-                newMsgs = decorator.apply(null, data.messages);\n-            }\n-\n-            const msgs = this.state.messages.concat(newMsgs);\n+        ).promise.then((_) => {\n+            const successMsg = <span>{t(\"Schedule successfully\" + (this.state.action === \"create\" ? \" created.\" : \" updated.\"))}</span>\n+            const msgs = this.state.messages.concat(MessagesUtils.info(successMsg));\n \n             while (msgs.length > messagesCounterLimit) {\n                 msgs.shift();\n             }\n \n-            this.onMessageChanged(msgs);\n+            this.onMessageChanged(msgs); // todo remove - unneeded\n             this.setState({\n                 messages: msgs\n             });\n \n-            if (data.success) {\n-                this.handleForwardAction();\n-            } else {\n-                this.handleResponseError();\n-            }\n-\n+            this.handleForwardAction();\n         }).catch(this.handleResponseError);\n     }\n+//\n \n     deleteSchedule(item) {\n         return Network.del(\"/rhn/manager/api/recurringactions/\" + item.recurringActionId + \"/delete\")\n-            .promise.then(data => {\n-                this.handleForwardAction();\n+            .promise.then((_) => {\n                 this.setState({\n                     messages: MessagesUtils.info(\"Schedule \\'\" + item.scheduleName + \"\\' has been deleted.\")\n                 });\n+                this.handleForwardAction();\n             })\n-            .catch(this.handleResponseError);\n+            .catch(data => {\n+                const taskoErrorMsg = MessagesUtils.error(\n+                    t(\"Error when scheduling the action. Check if Taskomatic is running\"));", "originalCommit": "b1063544e0b055ec3ae94578a49051eebf6d20c1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjE0NjQxMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r392146411", "bodyText": "Good point. Another option would be ... unscheduling ... . Let me think about it and fix it!", "author": "hustodemon", "createdAt": "2020-03-13T10:30:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEzNTcxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEzNzg2NA==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r392137864", "bodyText": "This commit looks very good from the technical POV (apart of the variable naming: when we have a List of Org, the variable should be called orgs), but I think we shouldn't display everything for the SAT admin:\n\nin the list of all systems, SAT admin can't see systems of other organizations (only his/her own)\nsame goes for the system groups (they can only see groups in their org)\n\nI think displaying recurring actions for servers/groups that the user can't see would be confusing and therefore I suggest reverting this commit.", "author": "hustodemon", "createdAt": "2020-03-13T10:13:26Z", "path": "java/code/src/com/redhat/rhn/domain/recurringactions/RecurringActionFactory.java", "diffHunk": "@@ -86,24 +88,31 @@\n      * @return the list of {@link RecurringAction}s\n      */\n     public static List<? extends RecurringAction> listAllRecurringActions(User user) {\n-        Org org = user.getOrg();\n+        List<Org> org;", "originalCommit": "8881b629f0703fd80763f9dfa05bdcd2956b857d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjE5NzMyMg==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r392197322", "bodyText": "Adapted to just show other Organizations schedules.", "author": "parlt91", "createdAt": "2020-03-13T12:28:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEzNzg2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjE0MTEwMw==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r392141103", "bodyText": "I just want to add: despite my comment in the previous commit, this commit makes sense as SAT_ADMIN really has rights to access/edit the action. This fix is very important for the XMLRPC API, btw.", "author": "hustodemon", "createdAt": "2020-03-13T10:20:06Z", "path": "java/code/src/com/redhat/rhn/domain/recurringactions/OrgRecurringAction.java", "diffHunk": "@@ -80,7 +80,8 @@ public OrgRecurringAction(boolean testMode, boolean active, Org org, User creato\n      */\n     @Override\n     public boolean canAccess(User user) {\n-        return user.hasRole(RoleFactory.ORG_ADMIN) && user.getOrg().equals(getOrg());\n+        return (user.hasRole(RoleFactory.ORG_ADMIN) && user.getOrg().equals(getOrg())) ||", "originalCommit": "2cef72f2d1f376784028d4de949cb24ff86fd136", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "474a18db461f591a4405cd59d4ab5fd043bea5cc", "url": "https://github.com/uyuni-project/uyuni/commit/474a18db461f591a4405cd59d4ab5fd043bea5cc", "message": "Address review comments", "committedDate": "2020-03-13T12:20:08Z", "type": "forcePushed"}, {"oid": "5f6ab9e5850699c93e8e4ccadcfd1a3e9f0777d2", "url": "https://github.com/uyuni-project/uyuni/commit/5f6ab9e5850699c93e8e4ccadcfd1a3e9f0777d2", "message": "Address review comments", "committedDate": "2020-03-13T12:24:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIzMjIxMw==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r392232213", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /**  Name of the Organization **/\n          \n          \n            \n                /**  Name of the Organization - only applicable for OrgRecurringAction **/", "author": "hustodemon", "createdAt": "2020-03-13T13:38:34Z", "path": "java/code/src/com/suse/manager/webui/utils/gson/RecurringStateScheduleJson.java", "diffHunk": "@@ -56,6 +56,9 @@\n     /**  Login of the schedule creator **/\n     private String creatorLogin;\n \n+    /**  Name of the Organization **/", "originalCommit": "fa384b83f50cf8222ba3d85a9916af36b9e68fda", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b6f25ff3b9158ba1e3db7490f35a312200419abf", "url": "https://github.com/uyuni-project/uyuni/commit/b6f25ff3b9158ba1e3db7490f35a312200419abf", "message": "Add suggested changes\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-13T14:06:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMTg0NQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393131845", "bodyText": "Please remove commented code", "author": "ncounter", "createdAt": "2020-03-16T15:59:17Z", "path": "web/html/src/manager/state/recurring-states-list.js", "diffHunk": "@@ -116,25 +62,86 @@ class RecurringStatesList extends React.Component {\n                                 <h3>Schedules</h3>\n                             </div>\n                         </div>\n-                        <div className=\"panel-body\">\n-                            <table className=\"table table-striped\">\n-                                <thead>\n-                                <tr>\n-                                    <th>{t(\"Active\")}</th>\n-                                    <th className=\"text-center\">{t(\"Schedule Name\")}</th>\n-                                    <th className=\"text-center\">{t(\"Frequency\")}</th>\n-                                    {targetType}\n-                                    <th className=\"text-right\">{t(\"Actions\")}</th>\n-                                </tr>\n-                                </thead>\n-                                {this.tableBody()}\n-                            </table>\n-                            <DeleteDialog\n-                                id=\"delete-modal\"\n-                                title={t(\"Delete Recurring State Schedule\")}\n-                                content={<span>{t(\"Are you sure you want to delete the selected item?\")}</span>}\n-                                onConfirm={() => this.props.onDelete(this.state.itemToDelete)}\n-                                onClosePopUp={() => this.selectToDelete(null)}\n+                        <div>\n+                            <Table\n+                                data={this.props.data}\n+                                identifier={action => action.recurringActionId}\n+                                //initialSortColumnKey=\"scheduleName\"", "originalCommit": "a99b94e63e8acd19756c7d678bf6e9a91f9d28eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE4OTk3MA==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393189970", "bodyText": "Already removed in a later commit ;-)", "author": "parlt91", "createdAt": "2020-03-16T17:22:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMTg0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzNzA5NQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393137095", "bodyText": "Maybe out of scope but, what was the reason for having this column optional? Can't we keep the same number of column, and maybe empty or grayed out content?", "author": "ncounter", "createdAt": "2020-03-16T16:06:56Z", "path": "web/html/src/manager/state/recurring-states-list.js", "diffHunk": "@@ -116,25 +62,86 @@ class RecurringStatesList extends React.Component {\n                                 <h3>Schedules</h3>\n                             </div>\n                         </div>\n-                        <div className=\"panel-body\">\n-                            <table className=\"table table-striped\">\n-                                <thead>\n-                                <tr>\n-                                    <th>{t(\"Active\")}</th>\n-                                    <th className=\"text-center\">{t(\"Schedule Name\")}</th>\n-                                    <th className=\"text-center\">{t(\"Frequency\")}</th>\n-                                    {targetType}\n-                                    <th className=\"text-right\">{t(\"Actions\")}</th>\n-                                </tr>\n-                                </thead>\n-                                {this.tableBody()}\n-                            </table>\n-                            <DeleteDialog\n-                                id=\"delete-modal\"\n-                                title={t(\"Delete Recurring State Schedule\")}\n-                                content={<span>{t(\"Are you sure you want to delete the selected item?\")}</span>}\n-                                onConfirm={() => this.props.onDelete(this.state.itemToDelete)}\n-                                onClosePopUp={() => this.selectToDelete(null)}\n+                        <div>\n+                            <Table\n+                                data={this.props.data}\n+                                identifier={action => action.recurringActionId}\n+                                //initialSortColumnKey=\"scheduleName\"\n+                                initialItemsPerPage={this.props.disableCreate ? userPrefPageSize : 0}\n+                                emptyText={t(\"No schedules created.\" + (this.props.disableCreate ? \"\" : \" Use Create to add a schedule.\"))}\n+                            >\n+                                <Column\n+                                    columnKey=\"active\"\n+                                    header={t('Active')}\n+                                    cell={(row, criteria) => {return (\n+                                        <Toggler\n+                                            value={row.active}\n+                                            className=\"btn\"\n+                                            handler={() => this.props.onToggleActive(row)}\n+                                        />\n+                                    );\n+                                    }}\n+                                />\n+                                <Column\n+                                    columnClass=\"text-center\"\n+                                    headerClass=\"text-center\"\n+                                    columnKey=\"scheduleName\"\n+                                    header={t('Schedule Name')}\n+                                    cell={(row, criteria) => row.scheduleName}\n+                                />\n+                                <Column\n+                                    columnClass=\"text-center\"\n+                                    headerClass=\"text-center\"\n+                                    columnKey=\"frequency\"\n+                                    header={t('Frequency')}\n+                                    cell={(row, criteria) => row.cron}\n+                                />\n+                                { this.props.disableCreate ?", "originalCommit": "a99b94e63e8acd19756c7d678bf6e9a91f9d28eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE4OTI0Mg==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393189242", "bodyText": "I just thought it would be redundant information in those cases, since you already know that e.g. the actions you look at are minion actions if you have selected a system.\nBut I am not opposed to displaying that unconditionally, if you think it's the better aproach.", "author": "parlt91", "createdAt": "2020-03-16T17:21:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzNzA5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU1ODE1NA==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393558154", "bodyText": "Yeah, I see your POV and it makes sense generally speaking, but in the end it does not take a lot of space and it does not hijack the focus of it so, I'd say better to keep the consistency (which we lack a lot of cross the entire product) and keep the column always as they are. \ud83d\ude09", "author": "ncounter", "createdAt": "2020-03-17T09:51:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzNzA5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE0NTQ2OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393145468", "bodyText": "I don't think we need a span wrapping here as it end up being used here", "author": "ncounter", "createdAt": "2020-03-16T16:19:03Z", "path": "web/html/src/manager/state/recurring-states-list.js", "diffHunk": "@@ -116,25 +62,86 @@ class RecurringStatesList extends React.Component {\n                                 <h3>Schedules</h3>\n                             </div>\n                         </div>\n-                        <div className=\"panel-body\">\n-                            <table className=\"table table-striped\">\n-                                <thead>\n-                                <tr>\n-                                    <th>{t(\"Active\")}</th>\n-                                    <th className=\"text-center\">{t(\"Schedule Name\")}</th>\n-                                    <th className=\"text-center\">{t(\"Frequency\")}</th>\n-                                    {targetType}\n-                                    <th className=\"text-right\">{t(\"Actions\")}</th>\n-                                </tr>\n-                                </thead>\n-                                {this.tableBody()}\n-                            </table>\n-                            <DeleteDialog\n-                                id=\"delete-modal\"\n-                                title={t(\"Delete Recurring State Schedule\")}\n-                                content={<span>{t(\"Are you sure you want to delete the selected item?\")}</span>}\n-                                onConfirm={() => this.props.onDelete(this.state.itemToDelete)}\n-                                onClosePopUp={() => this.selectToDelete(null)}\n+                        <div>\n+                            <Table\n+                                data={this.props.data}\n+                                identifier={action => action.recurringActionId}\n+                                //initialSortColumnKey=\"scheduleName\"\n+                                initialItemsPerPage={this.props.disableCreate ? userPrefPageSize : 0}\n+                                emptyText={t(\"No schedules created.\" + (this.props.disableCreate ? \"\" : \" Use Create to add a schedule.\"))}\n+                            >\n+                                <Column\n+                                    columnKey=\"active\"\n+                                    header={t('Active')}\n+                                    cell={(row, criteria) => {return (\n+                                        <Toggler\n+                                            value={row.active}\n+                                            className=\"btn\"\n+                                            handler={() => this.props.onToggleActive(row)}\n+                                        />\n+                                    );\n+                                    }}\n+                                />\n+                                <Column\n+                                    columnClass=\"text-center\"\n+                                    headerClass=\"text-center\"\n+                                    columnKey=\"scheduleName\"\n+                                    header={t('Schedule Name')}\n+                                    cell={(row, criteria) => row.scheduleName}\n+                                />\n+                                <Column\n+                                    columnClass=\"text-center\"\n+                                    headerClass=\"text-center\"\n+                                    columnKey=\"frequency\"\n+                                    header={t('Frequency')}\n+                                    cell={(row, criteria) => row.cron}\n+                                />\n+                                { this.props.disableCreate ?\n+                                    <Column\n+                                        columnClass=\"text-center\"\n+                                        headerClass=\"text-center\"\n+                                        columnKey=\"targetType\"\n+                                        header={t('Target Type')}\n+                                        cell={(row, criteria) => targetTypeToString(row.targetType)}\n+                                    />\n+                                    : null }\n+                                <Column\n+                                    columnClass=\"text-right\"\n+                                    headerClass=\"text-right\"\n+                                    header={t('Actions')}\n+                                    cell={(row, criteria) => {\n+                                        return (\n+                                            <div className=\"btn-group\">\n+                                                <Button\n+                                                    className=\"btn-default btn-sm\"\n+                                                    title={t(\"Details\")}\n+                                                    icon=\"fa-list\"\n+                                                    handler={() => {this.props.onSelect(row)}}\n+                                                />\n+                                                <Button\n+                                                    className=\"btn-default btn-sm\"\n+                                                    title={t(\"Edit\")}\n+                                                    icon=\"fa-edit\"\n+                                                    handler={() => {this.props.onEdit(row)}}\n+                                                />\n+                                                <ModalButton\n+                                                    className=\"btn-default btn-sm\"\n+                                                    title={t(\"Delete\")}\n+                                                    icon=\"fa-trash\"\n+                                                    target=\"delete-modal\"\n+                                                    item={row}\n+                                                    onClick={i => this.selectToDelete(i)}\n+                                                />\n+                                            </div>\n+                                        );\n+                                    }}\n+                                />\n+                            </Table>\n+                            <DeleteDialog id=\"delete-modal\"\n+                                          title={t(\"Delete Recurring State Schedule\")}\n+                                          content={<span>{t(\"Are you sure you want to delete the selected item?\")}</span>}", "originalCommit": "a99b94e63e8acd19756c7d678bf6e9a91f9d28eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE0ODU2OA==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393148568", "bodyText": "IIUC this is in the aim of cleaning up the state from staging the current item next to be deleted: I like it \ud83d\udc4d", "author": "ncounter", "createdAt": "2020-03-16T16:23:48Z", "path": "web/html/src/manager/state/recurring-states-list.js", "diffHunk": "@@ -116,25 +62,86 @@ class RecurringStatesList extends React.Component {\n                                 <h3>Schedules</h3>\n                             </div>\n                         </div>\n-                        <div className=\"panel-body\">\n-                            <table className=\"table table-striped\">\n-                                <thead>\n-                                <tr>\n-                                    <th>{t(\"Active\")}</th>\n-                                    <th className=\"text-center\">{t(\"Schedule Name\")}</th>\n-                                    <th className=\"text-center\">{t(\"Frequency\")}</th>\n-                                    {targetType}\n-                                    <th className=\"text-right\">{t(\"Actions\")}</th>\n-                                </tr>\n-                                </thead>\n-                                {this.tableBody()}\n-                            </table>\n-                            <DeleteDialog\n-                                id=\"delete-modal\"\n-                                title={t(\"Delete Recurring State Schedule\")}\n-                                content={<span>{t(\"Are you sure you want to delete the selected item?\")}</span>}\n-                                onConfirm={() => this.props.onDelete(this.state.itemToDelete)}\n-                                onClosePopUp={() => this.selectToDelete(null)}\n+                        <div>\n+                            <Table\n+                                data={this.props.data}\n+                                identifier={action => action.recurringActionId}\n+                                //initialSortColumnKey=\"scheduleName\"\n+                                initialItemsPerPage={this.props.disableCreate ? userPrefPageSize : 0}\n+                                emptyText={t(\"No schedules created.\" + (this.props.disableCreate ? \"\" : \" Use Create to add a schedule.\"))}\n+                            >\n+                                <Column\n+                                    columnKey=\"active\"\n+                                    header={t('Active')}\n+                                    cell={(row, criteria) => {return (\n+                                        <Toggler\n+                                            value={row.active}\n+                                            className=\"btn\"\n+                                            handler={() => this.props.onToggleActive(row)}\n+                                        />\n+                                    );\n+                                    }}\n+                                />\n+                                <Column\n+                                    columnClass=\"text-center\"\n+                                    headerClass=\"text-center\"\n+                                    columnKey=\"scheduleName\"\n+                                    header={t('Schedule Name')}\n+                                    cell={(row, criteria) => row.scheduleName}\n+                                />\n+                                <Column\n+                                    columnClass=\"text-center\"\n+                                    headerClass=\"text-center\"\n+                                    columnKey=\"frequency\"\n+                                    header={t('Frequency')}\n+                                    cell={(row, criteria) => row.cron}\n+                                />\n+                                { this.props.disableCreate ?\n+                                    <Column\n+                                        columnClass=\"text-center\"\n+                                        headerClass=\"text-center\"\n+                                        columnKey=\"targetType\"\n+                                        header={t('Target Type')}\n+                                        cell={(row, criteria) => targetTypeToString(row.targetType)}\n+                                    />\n+                                    : null }\n+                                <Column\n+                                    columnClass=\"text-right\"\n+                                    headerClass=\"text-right\"\n+                                    header={t('Actions')}\n+                                    cell={(row, criteria) => {\n+                                        return (\n+                                            <div className=\"btn-group\">\n+                                                <Button\n+                                                    className=\"btn-default btn-sm\"\n+                                                    title={t(\"Details\")}\n+                                                    icon=\"fa-list\"\n+                                                    handler={() => {this.props.onSelect(row)}}\n+                                                />\n+                                                <Button\n+                                                    className=\"btn-default btn-sm\"\n+                                                    title={t(\"Edit\")}\n+                                                    icon=\"fa-edit\"\n+                                                    handler={() => {this.props.onEdit(row)}}\n+                                                />\n+                                                <ModalButton\n+                                                    className=\"btn-default btn-sm\"\n+                                                    title={t(\"Delete\")}\n+                                                    icon=\"fa-trash\"\n+                                                    target=\"delete-modal\"\n+                                                    item={row}\n+                                                    onClick={i => this.selectToDelete(i)}\n+                                                />\n+                                            </div>\n+                                        );\n+                                    }}\n+                                />\n+                            </Table>\n+                            <DeleteDialog id=\"delete-modal\"\n+                                          title={t(\"Delete Recurring State Schedule\")}\n+                                          content={<span>{t(\"Are you sure you want to delete the selected item?\")}</span>}\n+                                          onConfirm={() => this.props.onDelete(this.state.itemToDelete)}\n+                                          onClosePopUp={() => this.selectToDelete(null)}", "originalCommit": "a99b94e63e8acd19756c7d678bf6e9a91f9d28eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1MDk2Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393150966", "bodyText": "I think we don't need the { return ( wrapping here, isn't it?", "author": "ncounter", "createdAt": "2020-03-16T16:27:23Z", "path": "web/html/src/manager/state/recurring-states-list.js", "diffHunk": "@@ -116,25 +62,86 @@ class RecurringStatesList extends React.Component {\n                                 <h3>Schedules</h3>\n                             </div>\n                         </div>\n-                        <div className=\"panel-body\">\n-                            <table className=\"table table-striped\">\n-                                <thead>\n-                                <tr>\n-                                    <th>{t(\"Active\")}</th>\n-                                    <th className=\"text-center\">{t(\"Schedule Name\")}</th>\n-                                    <th className=\"text-center\">{t(\"Frequency\")}</th>\n-                                    {targetType}\n-                                    <th className=\"text-right\">{t(\"Actions\")}</th>\n-                                </tr>\n-                                </thead>\n-                                {this.tableBody()}\n-                            </table>\n-                            <DeleteDialog\n-                                id=\"delete-modal\"\n-                                title={t(\"Delete Recurring State Schedule\")}\n-                                content={<span>{t(\"Are you sure you want to delete the selected item?\")}</span>}\n-                                onConfirm={() => this.props.onDelete(this.state.itemToDelete)}\n-                                onClosePopUp={() => this.selectToDelete(null)}\n+                        <div>\n+                            <Table\n+                                data={this.props.data}\n+                                identifier={action => action.recurringActionId}\n+                                //initialSortColumnKey=\"scheduleName\"\n+                                initialItemsPerPage={this.props.disableCreate ? userPrefPageSize : 0}\n+                                emptyText={t(\"No schedules created.\" + (this.props.disableCreate ? \"\" : \" Use Create to add a schedule.\"))}\n+                            >\n+                                <Column\n+                                    columnKey=\"active\"\n+                                    header={t('Active')}\n+                                    cell={(row, criteria) => {return (", "originalCommit": "a99b94e63e8acd19756c7d678bf6e9a91f9d28eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIxMDUyMA==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393210520", "bodyText": "You are right, we don't. There is another occurrence down below \ud83d\udc4d", "author": "parlt91", "createdAt": "2020-03-16T17:57:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1MDk2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1MjExOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393152119", "bodyText": "This comment is valid for all the Columns here: I think we can omit the criteria parameter as it is never used, am I missing something?", "author": "ncounter", "createdAt": "2020-03-16T16:29:11Z", "path": "web/html/src/manager/state/recurring-states-list.js", "diffHunk": "@@ -116,25 +62,86 @@ class RecurringStatesList extends React.Component {\n                                 <h3>Schedules</h3>\n                             </div>\n                         </div>\n-                        <div className=\"panel-body\">\n-                            <table className=\"table table-striped\">\n-                                <thead>\n-                                <tr>\n-                                    <th>{t(\"Active\")}</th>\n-                                    <th className=\"text-center\">{t(\"Schedule Name\")}</th>\n-                                    <th className=\"text-center\">{t(\"Frequency\")}</th>\n-                                    {targetType}\n-                                    <th className=\"text-right\">{t(\"Actions\")}</th>\n-                                </tr>\n-                                </thead>\n-                                {this.tableBody()}\n-                            </table>\n-                            <DeleteDialog\n-                                id=\"delete-modal\"\n-                                title={t(\"Delete Recurring State Schedule\")}\n-                                content={<span>{t(\"Are you sure you want to delete the selected item?\")}</span>}\n-                                onConfirm={() => this.props.onDelete(this.state.itemToDelete)}\n-                                onClosePopUp={() => this.selectToDelete(null)}\n+                        <div>\n+                            <Table\n+                                data={this.props.data}\n+                                identifier={action => action.recurringActionId}\n+                                //initialSortColumnKey=\"scheduleName\"\n+                                initialItemsPerPage={this.props.disableCreate ? userPrefPageSize : 0}\n+                                emptyText={t(\"No schedules created.\" + (this.props.disableCreate ? \"\" : \" Use Create to add a schedule.\"))}\n+                            >\n+                                <Column\n+                                    columnKey=\"active\"\n+                                    header={t('Active')}\n+                                    cell={(row, criteria) => {return (\n+                                        <Toggler\n+                                            value={row.active}\n+                                            className=\"btn\"\n+                                            handler={() => this.props.onToggleActive(row)}\n+                                        />\n+                                    );\n+                                    }}\n+                                />\n+                                <Column\n+                                    columnClass=\"text-center\"\n+                                    headerClass=\"text-center\"\n+                                    columnKey=\"scheduleName\"\n+                                    header={t('Schedule Name')}\n+                                    cell={(row, criteria) => row.scheduleName}", "originalCommit": "a99b94e63e8acd19756c7d678bf6e9a91f9d28eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE4OTU0Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/2002#discussion_r393189543", "bodyText": "No you are not, I will just remove them", "author": "parlt91", "createdAt": "2020-03-16T17:21:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE1MjExOQ=="}], "type": "inlineReview"}, {"oid": "55c856af750a113a53595c8c51d05546d456600a", "url": "https://github.com/uyuni-project/uyuni/commit/55c856af750a113a53595c8c51d05546d456600a", "message": "Add suggested changes\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-16T18:32:57Z", "type": "forcePushed"}, {"oid": "0bf7581ce196d9e37a89663969157f4463f2ee0e", "url": "https://github.com/uyuni-project/uyuni/commit/0bf7581ce196d9e37a89663969157f4463f2ee0e", "message": "Add suggested changes\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-17T15:49:10Z", "type": "forcePushed"}, {"oid": "863c7d070607b6b0d421d6c9c0f307d41ea581f0", "url": "https://github.com/uyuni-project/uyuni/commit/863c7d070607b6b0d421d6c9c0f307d41ea581f0", "message": "Add suggested changes\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-20T08:07:09Z", "type": "forcePushed"}, {"oid": "739507ff3e3530e4213bf321da1518a461bfd6ef", "url": "https://github.com/uyuni-project/uyuni/commit/739507ff3e3530e4213bf321da1518a461bfd6ef", "message": "Add suggested changes\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-20T13:16:34Z", "type": "forcePushed"}, {"oid": "d9d1a37631ea6b4f6bbffeaa31fe76b16567b930", "url": "https://github.com/uyuni-project/uyuni/commit/d9d1a37631ea6b4f6bbffeaa31fe76b16567b930", "message": "Move recurring-event-picker to its own directory\n\nMainly to add a custom css file\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:17Z", "type": "commit"}, {"oid": "10970c5c30763b0b79fd8a0032dd99f402170bd4", "url": "https://github.com/uyuni-project/uyuni/commit/10970c5c30763b0b79fd8a0032dd99f402170bd4", "message": "Replace Asterisk with help icons\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:17Z", "type": "commit"}, {"oid": "d3fc3688a12f0cf677c6cfb4464278e08d7d8c7d", "url": "https://github.com/uyuni-project/uyuni/commit/d3fc3688a12f0cf677c6cfb4464278e08d7d8c7d", "message": "Improve alignment of elements in the picker\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:17Z", "type": "commit"}, {"oid": "5b7a87e44437c72f99f4d6869e09be398093b524", "url": "https://github.com/uyuni-project/uyuni/commit/5b7a87e44437c72f99f4d6869e09be398093b524", "message": "Unify naming terminology in UI and urls\n\nMove the positoion `Recurring States` so that the default is in first\nplace.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:17Z", "type": "commit"}, {"oid": "0f4d24227acfb98a9f03bb116f4ec295b9b93018", "url": "https://github.com/uyuni-project/uyuni/commit/0f4d24227acfb98a9f03bb116f4ec295b9b93018", "message": "Minor: Include the action name in RecurringAction.toString()", "committedDate": "2020-03-23T09:11:17Z", "type": "commit"}, {"oid": "3306536d09702d60ea3a59bcc3d6551497cc6136", "url": "https://github.com/uyuni-project/uyuni/commit/3306536d09702d60ea3a59bcc3d6551497cc6136", "message": "Extract RecurringAction validation to a public method", "committedDate": "2020-03-23T09:11:17Z", "type": "commit"}, {"oid": "3e6ff7fb05693b1bfbbca54cc6333762690840e4", "url": "https://github.com/uyuni-project/uyuni/commit/3e6ff7fb05693b1bfbbca54cc6333762690840e4", "message": "Explicitly validate RecurringAction in Controller before saving", "committedDate": "2020-03-23T09:11:17Z", "type": "commit"}, {"oid": "5cad236b040eb70e72b2aec36023c78db5421474", "url": "https://github.com/uyuni-project/uyuni/commit/5cad236b040eb70e72b2aec36023c78db5421474", "message": "Validate empty action name", "committedDate": "2020-03-23T09:11:17Z", "type": "commit"}, {"oid": "a4ad3c2a3a7e2ef6647c57bd7f845722c8b42875", "url": "https://github.com/uyuni-project/uyuni/commit/a4ad3c2a3a7e2ef6647c57bd7f845722c8b42875", "message": "Minor: Extract value to variable to improve readability and style", "committedDate": "2020-03-23T09:11:17Z", "type": "commit"}, {"oid": "6cf77e154fcc782df2b402b4170339670b8644d7", "url": "https://github.com/uyuni-project/uyuni/commit/6cf77e154fcc782df2b402b4170339670b8644d7", "message": "Fix wrong actions showing in Admin > Orgs\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "14faebd14fd79e362dd3ed0407a5d3c970a0b490", "url": "https://github.com/uyuni-project/uyuni/commit/14faebd14fd79e362dd3ed0407a5d3c970a0b490", "message": "Localize messages", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "2776e0d7b2334b475ec067398ad00aa5ec137a14", "url": "https://github.com/uyuni-project/uyuni/commit/2776e0d7b2334b475ec067398ad00aa5ec137a14", "message": "Fix the localization tool\n\nIt was generating extra spaces in single line '<source>bla</source>'\nsnippets.", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "771fc75af92cd957a10b64d6391fe35f506bbaf2", "url": "https://github.com/uyuni-project/uyuni/commit/771fc75af92cd957a10b64d6391fe35f506bbaf2", "message": "Add the localization messages for other languages", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "3031868f841e0d6a03516d305d73455720c9f4f5", "url": "https://github.com/uyuni-project/uyuni/commit/3031868f841e0d6a03516d305d73455720c9f4f5", "message": "Remove the unused localization string for 'Recurring Actions'", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "b087e38ca191d2e9a52028906de6bdf47616314e", "url": "https://github.com/uyuni-project/uyuni/commit/b087e38ca191d2e9a52028906de6bdf47616314e", "message": "Do not use an explicit component when creating a recurring state from the highstate view\n\n...but use a link instead", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "6acce70f5f9c0cf941ea43718a10b439e5321c54", "url": "https://github.com/uyuni-project/uyuni/commit/6acce70f5f9c0cf941ea43718a10b439e5321c54", "message": "Remove unused code", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "a46d0b46fa79e89cc5b78962d276db8098969a61", "url": "https://github.com/uyuni-project/uyuni/commit/a46d0b46fa79e89cc5b78962d276db8098969a61", "message": "Add cron expr validation\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "ccf109473d33f8051d4f1a4592822b608234e0d5", "url": "https://github.com/uyuni-project/uyuni/commit/ccf109473d33f8051d4f1a4592822b608234e0d5", "message": "Show recurring states creator in details\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "fcd1abadaf02278c1db0366baf5f108e668392c2", "url": "https://github.com/uyuni-project/uyuni/commit/fcd1abadaf02278c1db0366baf5f108e668392c2", "message": "Replace html table with Table component\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "ab9f06e0abebf4340e9de4171e2dc10be7af0258", "url": "https://github.com/uyuni-project/uyuni/commit/ab9f06e0abebf4340e9de4171e2dc10be7af0258", "message": "Fix: Other orgs actions not listed as sat admin\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "10b1920a27ecf8018f6fe361ad9fb4359786a7c8", "url": "https://github.com/uyuni-project/uyuni/commit/10b1920a27ecf8018f6fe361ad9fb4359786a7c8", "message": "Allow sat admin to modify other orgs actions\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "0a678f6165035d140c21b0102500e5c643741514", "url": "https://github.com/uyuni-project/uyuni/commit/0a678f6165035d140c21b0102500e5c643741514", "message": "Backend: Recurring Actions: Use HTTP error codes to propagate errors to frontend", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "aec190ca19133fea3d8e6d67dffd261423d428ad", "url": "https://github.com/uyuni-project/uyuni/commit/aec190ca19133fea3d8e6d67dffd261423d428ad", "message": "Frontend: Recurring Actions: Use HTTP errors on frontend\n\nNote: The body of DELETE does not seem to get to the client if the HTTP\nstatus is not 200.", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "a0bb5d943e0aecf04adbbbeba1b5c089e3a39c91", "url": "https://github.com/uyuni-project/uyuni/commit/a0bb5d943e0aecf04adbbbeba1b5c089e3a39c91", "message": "Remove unused function", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "db1c0b36eef29badd0400c51cf88e5c2a8d239ea", "url": "https://github.com/uyuni-project/uyuni/commit/db1c0b36eef29badd0400c51cf88e5c2a8d239ea", "message": "Enable the spinner for AsyncButtor when creating/updating recurring action", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "5af3696d3b1b68ebadce6e3434363bcb01a4b1c3", "url": "https://github.com/uyuni-project/uyuni/commit/5af3696d3b1b68ebadce6e3434363bcb01a4b1c3", "message": "Explicitly mention that the back button leads to the list in recurring actions create/edit", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "417c17586be7780b4198c8cfbf3b1ffff108f764", "url": "https://github.com/uyuni-project/uyuni/commit/417c17586be7780b4198c8cfbf3b1ffff108f764", "message": "Address review comments", "committedDate": "2020-03-23T09:11:18Z", "type": "commit"}, {"oid": "b3982a9f655682d0be678f94338d1ed120d99b88", "url": "https://github.com/uyuni-project/uyuni/commit/b3982a9f655682d0be678f94338d1ed120d99b88", "message": "Show org name for org actions\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:19Z", "type": "commit"}, {"oid": "69f73c424d49af939c194b58a715a64db5c5e2db", "url": "https://github.com/uyuni-project/uyuni/commit/69f73c424d49af939c194b58a715a64db5c5e2db", "message": "Show org name only in list of all schedules\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:19Z", "type": "commit"}, {"oid": "943c6655d8d5fd3068bdf7a4bd28858ec8dc33a0", "url": "https://github.com/uyuni-project/uyuni/commit/943c6655d8d5fd3068bdf7a4bd28858ec8dc33a0", "message": "Hide highstate display in list of all schedules\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:19Z", "type": "commit"}, {"oid": "8ac8e220d55b70491a1f41f987463cc72befc8e2", "url": "https://github.com/uyuni-project/uyuni/commit/8ac8e220d55b70491a1f41f987463cc72befc8e2", "message": "Add suggested changes\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:19Z", "type": "commit"}, {"oid": "8ac8e220d55b70491a1f41f987463cc72befc8e2", "url": "https://github.com/uyuni-project/uyuni/commit/8ac8e220d55b70491a1f41f987463cc72befc8e2", "message": "Add suggested changes\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-03-23T09:11:19Z", "type": "forcePushed"}]}