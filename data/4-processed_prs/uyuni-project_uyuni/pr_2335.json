{"pr_number": 2335, "pr_title": "Add aarch64 for openSUSE Leap 15.1 and Leap 15.2 on Uyuni", "pr_createdAt": "2020-06-18T11:10:02Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2335", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE0OTEzOA==", "url": "https://github.com/uyuni-project/uyuni/pull/2335#discussion_r442149138", "bodyText": "Since we do the same (using the same DEST for all SLE architectures), I guess this should be fine. However I wonder we shouldn't document at the doc something. As if someone recreates the repo with --flush the other architectures will be gone.", "author": "juliogonzalez", "createdAt": "2020-06-18T11:11:16Z", "path": "susemanager/src/mgr_bootstrap_data.py", "diffHunk": "@@ -1098,6 +1098,10 @@\n         'BASECHANNEL' : 'opensuse_leap15_1-x86_64', 'PKGLIST' : PKGLIST15_TRAD + PKGLIST15_SALT + PKGLIST15SP0SP1_SALT + PKGLIST15_X86_ARM,\n         'DEST' : '/srv/www/htdocs/pub/repositories/opensuse/15/1/bootstrap/'\n     },\n+    'openSUSE-Leap-15.1-aarch64-uyuni' : {\n+        'BASECHANNEL' : 'opensuse_leap15_1-aarch64', 'PKGLIST' : PKGLIST15_TRAD + PKGLIST15_SALT + PKGLIST15SP0SP1_SALT + PKGLIST15_X86_ARM,\n+        'DEST' : '/srv/www/htdocs/pub/repositories/opensuse/15/1/bootstrap/'", "originalCommit": "8ec6e64ae10d78cd093daa2f3f7f5966065a7572", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc0OTE5Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/2335#discussion_r442749196", "bodyText": "Hmm, this reminds me of a problem with the automatic re-creation of bootstrap repos.", "author": "mcalmer", "createdAt": "2020-06-19T10:01:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE0OTEzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQzODAyNQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2335#discussion_r443438025", "bodyText": "Now I see the other PR, but still... should we document this?\nEven if automatic bootstrap repo generation works for the *-uyunichannels (does it?), there's still the risk of having the user generating them.\nI understand that if you have the bootstrap repo created and if you do not use --flush, the packages will be added, and things should work, right?", "author": "juliogonzalez", "createdAt": "2020-06-22T09:40:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE0OTEzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE0OTY0NQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2335#discussion_r442149645", "bodyText": "As far as I can understand, since the URLs are different and they don't have a common pattern for x86_64 and aarch64, we just need different sets of repositories.", "author": "juliogonzalez", "createdAt": "2020-06-18T11:12:12Z", "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -901,6 +901,62 @@ gpgkey_id = %(_uyuni_gpgkey_id)s\n gpgkey_fingerprint = %(_uyuni_gpgkey_fingerprint)s\n repo_url = https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Master:/openSUSE_Leap_15-Uyuni-Client-Tools/openSUSE_Leap_15.0/\n \n+[opensuse_leap15_1-aarch64]", "originalCommit": "8ec6e64ae10d78cd093daa2f3f7f5966065a7572", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc1MDE4Nw==", "url": "https://github.com/uyuni-project/uyuni/pull/2335#discussion_r442750187", "bodyText": "as long as the channel name and label is different, it is ok.", "author": "mcalmer", "createdAt": "2020-06-19T10:03:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE0OTY0NQ=="}], "type": "inlineReview"}, {"oid": "8cf4dc538c0d205187893bd1c8554e91bb7867ae", "url": "https://github.com/uyuni-project/uyuni/commit/8cf4dc538c0d205187893bd1c8554e91bb7867ae", "message": "Add aarch64 for openSUSE Leap 15.1 and Leap 15.2 on Uyuni", "committedDate": "2020-06-18T11:18:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE1NzQ0Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/2335#discussion_r442157443", "bodyText": "But since here we have this I wonder: @mcalmer, should we add a set of repositories for the ports? Only problem, of course, is that not all of them are supported right now, so maybe it's best if we do it as in this PR.", "author": "juliogonzalez", "createdAt": "2020-06-18T11:28:31Z", "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -901,6 +901,46 @@ gpgkey_id = %(_uyuni_gpgkey_id)s\n gpgkey_fingerprint = %(_uyuni_gpgkey_fingerprint)s\n repo_url = https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Master:/openSUSE_Leap_15-Uyuni-Client-Tools/openSUSE_Leap_15.0/\n \n+[opensuse_leap15_1-aarch64]\n+checksum = sha256\n+archs    = aarch64\n+name     = openSUSE Leap 15.1 (%(arch)s)\n+gpgkey_url =  http://download.opensuse.org/ports/aarch64/distribution/leap/15.1/repo/oss/repodata/repomd.xml.key\n+gpgkey_id = 3DBDC284\n+gpgkey_fingerprint = 22C0 7BA5 3417 8CD0 2EFE  22AA B88B 2FD4 3DBD C284\n+repo_url = http://download.opensuse.org/distribution/leap/15.1/repo/oss/\n+dist_map_release = 15.1\n+\n+[opensuse_leap15_1-updates-aarch64]\n+label    = %(base_channel)s-updates\n+name     = openSUSE Leap 15.1 Updates (%(arch)s)\n+archs    = aarch64\n+checksum = sha256\n+base_channels = opensuse_leap15_1-%(arch)s\n+repo_url = http://download.opensuse.org/ports/update/leap/15.1/", "originalCommit": "8cf4dc538c0d205187893bd1c8554e91bb7867ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc1MTMwMw==", "url": "https://github.com/uyuni-project/uyuni/pull/2335#discussion_r442751303", "bodyText": "hmm, multiarch repo. I hope it still works.", "author": "mcalmer", "createdAt": "2020-06-19T10:05:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE1NzQ0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc1MjMzNA==", "url": "https://github.com/uyuni-project/uyuni/pull/2335#discussion_r442752334", "bodyText": "Maybe we get problems when you want to use this URL for other archs. When this comes and cause problems, we may need to fix spacewalk-common-channels", "author": "mcalmer", "createdAt": "2020-06-19T10:08:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE1NzQ0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE1NzU5NQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2335#discussion_r442157595", "bodyText": "Also keep in mind: I could not find non-oss repositories for the ports.", "author": "juliogonzalez", "createdAt": "2020-06-18T11:28:49Z", "path": "utils/spacewalk-common-channels.ini", "diffHunk": "@@ -901,6 +901,46 @@ gpgkey_id = %(_uyuni_gpgkey_id)s\n gpgkey_fingerprint = %(_uyuni_gpgkey_fingerprint)s\n repo_url = https://download.opensuse.org/repositories/systemsmanagement:/Uyuni:/Master:/openSUSE_Leap_15-Uyuni-Client-Tools/openSUSE_Leap_15.0/\n \n+[opensuse_leap15_1-aarch64]\n+checksum = sha256\n+archs    = aarch64\n+name     = openSUSE Leap 15.1 (%(arch)s)\n+gpgkey_url =  http://download.opensuse.org/ports/aarch64/distribution/leap/15.1/repo/oss/repodata/repomd.xml.key\n+gpgkey_id = 3DBDC284\n+gpgkey_fingerprint = 22C0 7BA5 3417 8CD0 2EFE  22AA B88B 2FD4 3DBD C284\n+repo_url = http://download.opensuse.org/distribution/leap/15.1/repo/oss/\n+dist_map_release = 15.1\n+", "originalCommit": "8cf4dc538c0d205187893bd1c8554e91bb7867ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4319dbdc414ae4ef73449e9e62c5f4a0a3e25a7a", "url": "https://github.com/uyuni-project/uyuni/commit/4319dbdc414ae4ef73449e9e62c5f4a0a3e25a7a", "message": "Add aarch64 for openSUSE Leap 15.1 and Leap 15.2 on Uyuni", "committedDate": "2020-07-09T08:16:43Z", "type": "commit"}, {"oid": "4319dbdc414ae4ef73449e9e62c5f4a0a3e25a7a", "url": "https://github.com/uyuni-project/uyuni/commit/4319dbdc414ae4ef73449e9e62c5f4a0a3e25a7a", "message": "Add aarch64 for openSUSE Leap 15.1 and Leap 15.2 on Uyuni", "committedDate": "2020-07-09T08:16:43Z", "type": "forcePushed"}]}