{"pr_number": 2351, "pr_title": "Fix recurring actions shown in Task Schedules UI", "pr_createdAt": "2020-06-23T15:43:04Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2351", "timeline": [{"oid": "f5b63f9b999e785335ee0afad006b2f4781944f6", "url": "https://github.com/uyuni-project/uyuni/commit/f5b63f9b999e785335ee0afad006b2f4781944f6", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-06-23T15:47:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY1NjM4NQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2351#discussion_r444656385", "bodyText": "As for your question in the PR discussion: I think adjusting a hibernate queries is ok here. The only thing that rings a bell, is the situation, when :filter is an empty collection. Can you make sure, that the query would work in that case too? The query should be robust enough to handle that too.", "author": "hustodemon", "createdAt": "2020-06-24T05:41:52Z", "path": "java/code/src/com/redhat/rhn/taskomatic/domain/TaskoSchedule.hbm.xml", "diffHunk": "@@ -77,15 +77,15 @@ PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n         </query>\n \n         <query name=\"TaskoSchedule.listActiveByOrg\">\n-            <![CDATA[FROM com.redhat.rhn.taskomatic.domain.TaskoSchedule WHERE orgId = :org_id AND (activeFrom < :timestamp AND (activeTill is null OR :timestamp < activeTill))]]>\n+            <![CDATA[FROM com.redhat.rhn.taskomatic.domain.TaskoSchedule WHERE orgId = :org_id AND (activeFrom < :timestamp AND (activeTill is null OR :timestamp < activeTill)) AND bunch.name NOT IN :filter]]>", "originalCommit": "f5b63f9b999e785335ee0afad006b2f4781944f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc2MDQ5OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2351#discussion_r444760499", "bodyText": "Right thanks for pointing that out. I should have tried that. Putting an empty Array in the query won't work.\nI decided to adapt the method calling the query instead (using the removeIf(...) approach I used in the other case)", "author": "parlt91", "createdAt": "2020-06-24T09:19:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY1NjM4NQ=="}], "type": "inlineReview"}, {"oid": "13a648c6eefba7482a6c8c505d11840031d5a6e2", "url": "https://github.com/uyuni-project/uyuni/commit/13a648c6eefba7482a6c8c505d11840031d5a6e2", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-06-24T09:14:46Z", "type": "forcePushed"}, {"oid": "3b4a9c33ac8b44ece7983a5dd03c326dae3a17d7", "url": "https://github.com/uyuni-project/uyuni/commit/3b4a9c33ac8b44ece7983a5dd03c326dae3a17d7", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-06-25T08:43:29Z", "type": "forcePushed"}, {"oid": "6e38f895d92d04d742463f901bdd04e5f55e1689", "url": "https://github.com/uyuni-project/uyuni/commit/6e38f895d92d04d742463f901bdd04e5f55e1689", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-06-26T13:16:53Z", "type": "commit"}, {"oid": "6e38f895d92d04d742463f901bdd04e5f55e1689", "url": "https://github.com/uyuni-project/uyuni/commit/6e38f895d92d04d742463f901bdd04e5f55e1689", "message": "Fix recurring actions shown in Task Schedules UI\n\nSince recurring actions have their own place in the webUI they where not\nsupposed to show up in the `Admin` -> `Task Schedules` list.\n\nSigned-off-by: Pascal Arlt <parlt@suse.com>", "committedDate": "2020-06-26T13:16:53Z", "type": "forcePushed"}]}