{"pr_number": 2873, "pr_title": "Testsuite: Fix srv_content_lifecycle tests", "pr_createdAt": "2020-11-19T12:47:16Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2873", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MjQzOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2873#discussion_r526862439", "bodyText": "Just to easy maintain those steps, I would use the same method to click in all of them, so if find_button works, let's use it in the three methods.", "author": "srbarrios", "createdAt": "2020-11-19T13:01:41Z", "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -1187,15 +1187,17 @@ def server_secret\n \n # content lifecycle steps\n When(/^I click the environment build button$/) do\n-  raise \"Click on environment build failed\" unless find(:xpath, '//*[@id=\"cm-build-modal-save-button\"]').click\n+  raise 'Click on environment build failed' unless find(:xpath, '//*[@id=\"cm-build-modal-save-button\"]').click", "originalCommit": "e03699e68ec351f264500750d84960741d335824", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MzMyNw==", "url": "https://github.com/uyuni-project/uyuni/pull/2873#discussion_r526863327", "bodyText": "I wonder if just to set a \"wait: XXX\" parameter in the find method, with a big value, could make the same result avoiding one extra step.", "author": "srbarrios", "createdAt": "2020-11-19T13:03:08Z", "path": "testsuite/features/step_definitions/common_steps.rb", "diffHunk": "@@ -1187,15 +1187,17 @@ def server_secret\n \n # content lifecycle steps\n When(/^I click the environment build button$/) do\n-  raise \"Click on environment build failed\" unless find(:xpath, '//*[@id=\"cm-build-modal-save-button\"]').click\n+  raise 'Click on environment build failed' unless find(:xpath, '//*[@id=\"cm-build-modal-save-button\"]').click\n end\n \n When(/^I click promote from Development to QA$/) do\n-  raise \"Click on promote from Development failed\" unless find(:xpath, '//*[@id=\"dev_name-promote-modal-link\"]').click\n+  step %(I wait until button \"dev_name-promote-modal-link\" becomes enabled)", "originalCommit": "e03699e68ec351f264500750d84960741d335824", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjkxNzcxMA==", "url": "https://github.com/uyuni-project/uyuni/pull/2873#discussion_r526917710", "bodyText": "You are right; it works nicely ;-)", "author": "calancha", "createdAt": "2020-11-19T14:13:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MzMyNw=="}], "type": "inlineReview"}, {"oid": "60d4b0ceb4af8805313bf7d9fe43ca5063f609ce", "url": "https://github.com/uyuni-project/uyuni/commit/60d4b0ceb4af8805313bf7d9fe43ca5063f609ce", "message": "Testsuite: Fix srv_content_lifecycle tests\n\nSearch for the text messages in the specific environment where\nthey appear.\nWait until a target button is enabled before to click it.\n\n- testsuite/features/secondary/srv_content_lifecycle.feature:\nEnsure we search for the expected text in the right environment.\n\n- testsuite/features/step_definitions/common_steps.rb:\nAdd step to wait a custom number of seconds until a target string\nshows up in the target envitonment.", "committedDate": "2020-11-19T12:35:34Z", "type": "forcePushed"}, {"oid": "a5f303cc97c614115a83488784b48062da6204fb", "url": "https://github.com/uyuni-project/uyuni/commit/a5f303cc97c614115a83488784b48062da6204fb", "message": "Testsuite: Fix srv_content_lifecycle tests\n\nSearch for the text messages in the specific environment where\nthey appear.\nWait until a target button is enabled before to click it.\n\n- testsuite/features/secondary/srv_content_lifecycle.feature:\nEnsure we search for the expected text in the right environment.\n\n- testsuite/features/step_definitions/common_steps.rb:\nAdd step to wait a custom number of seconds until a target string\nshows up in the target envitonment.", "committedDate": "2020-11-19T14:26:36Z", "type": "commit"}, {"oid": "a5f303cc97c614115a83488784b48062da6204fb", "url": "https://github.com/uyuni-project/uyuni/commit/a5f303cc97c614115a83488784b48062da6204fb", "message": "Testsuite: Fix srv_content_lifecycle tests\n\nSearch for the text messages in the specific environment where\nthey appear.\nWait until a target button is enabled before to click it.\n\n- testsuite/features/secondary/srv_content_lifecycle.feature:\nEnsure we search for the expected text in the right environment.\n\n- testsuite/features/step_definitions/common_steps.rb:\nAdd step to wait a custom number of seconds until a target string\nshows up in the target envitonment.", "committedDate": "2020-11-19T14:26:36Z", "type": "forcePushed"}]}