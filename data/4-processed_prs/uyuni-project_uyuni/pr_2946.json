{"pr_number": 2946, "pr_title": "spacewalk-setup: Updated SPEC for RHEL.", "pr_createdAt": "2020-12-01T06:28:36Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/2946", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI2ODczMA==", "url": "https://github.com/uyuni-project/uyuni/pull/2946#discussion_r533268730", "bodyText": "Maybe it is time to drop this as well. Uyuni will not work anymore with cobbler20. We switched everything to cobbler 3.", "author": "mcalmer", "createdAt": "2020-12-01T10:09:04Z", "path": "spacewalk/setup/spacewalk-setup.spec", "diffHunk": "@@ -97,18 +97,14 @@ Requires:       perl-Satcon\n Requires:       spacewalk-admin\n Requires:       spacewalk-backend-tools\n Requires:       spacewalk-certs-tools\n-%if 0%{?suse_version}\n %if 0%{?build_py3}\n-Requires:       python3-PyYAML\n+Requires:       (python3-PyYAML or python3-pyyaml)\n %else\n-Requires:       python-PyYAML\n+Requires:       (python-PyYAML or PyYAML)\n %endif\n-%else\n %if 0%{?fedora} >= 22\n Recommends:     cobbler20", "originalCommit": "e7235ab60f447561a31ca4bd8c974ef57577b7b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI5NDkxOA==", "url": "https://github.com/uyuni-project/uyuni/pull/2946#discussion_r533294918", "bodyText": "Can we keep this in for time being and put it into a cobbler 2 cleanup project? I fixed some cobbler code in #2883 which I also believe referenced some other files.", "author": "sbluhm", "createdAt": "2020-12-01T10:30:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI2ODczMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMzOTMzOA==", "url": "https://github.com/uyuni-project/uyuni/pull/2946#discussion_r533339338", "bodyText": "sure, no problem", "author": "mcalmer", "createdAt": "2020-12-01T11:31:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI2ODczMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI3NjEwMQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2946#discussion_r533276101", "bodyText": "There is also $DEFAULT_DOC_ROOT = \"/srv/www/htdocs\" defined.\nI wonder if it would make more sense to put this difference in the code instead of using sed to replace it.\nWe have in bin/spacewalk-setup already a function is_suse_like() which read os-release.", "author": "mcalmer", "createdAt": "2020-12-01T10:15:24Z", "path": "spacewalk/setup/spacewalk-setup.spec", "diffHunk": "@@ -130,6 +126,9 @@ setup tasks, re-installation, and upgrades.\n %setup -q\n \n %build\n+%if 0%{?rhel} || 0%{?fedora}\n+sed -i 's#/etc/pki/trust/anchors#/etc/pki/ca-trust/source/anchors#' lib/Spacewalk/Setup.pm", "originalCommit": "e7235ab60f447561a31ca4bd8c974ef57577b7b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzMwOTE0OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/2946#discussion_r533309149", "bodyText": "Let me move the logic there.", "author": "sbluhm", "createdAt": "2020-12-01T10:42:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI3NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzM0MDI5Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/2946#discussion_r533340293", "bodyText": "Did you do this already? Then you missed to add the files to this commit. Or do you plan this for the future in a different PR?", "author": "mcalmer", "createdAt": "2020-12-01T11:33:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI3NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUwNjA4Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/2946#discussion_r542506083", "bodyText": "New PR. For reference #3019", "author": "sbluhm", "createdAt": "2020-12-14T16:08:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI3NjEwMQ=="}], "type": "inlineReview"}, {"oid": "c7bdd8d1b257aa241cea36d393eaa30af3412226", "url": "https://github.com/uyuni-project/uyuni/commit/c7bdd8d1b257aa241cea36d393eaa30af3412226", "message": "spacewalk-setup: Updated SPEC for RHEL.", "committedDate": "2020-12-01T10:45:30Z", "type": "commit"}, {"oid": "c7bdd8d1b257aa241cea36d393eaa30af3412226", "url": "https://github.com/uyuni-project/uyuni/commit/c7bdd8d1b257aa241cea36d393eaa30af3412226", "message": "spacewalk-setup: Updated SPEC for RHEL.", "committedDate": "2020-12-01T10:45:30Z", "type": "forcePushed"}, {"oid": "09aa322a07677e8a2054df0c0f885bda3cf7c539", "url": "https://github.com/uyuni-project/uyuni/commit/09aa322a07677e8a2054df0c0f885bda3cf7c539", "message": "Merge branch 'master' into sbluhm-spacewalk-setup", "committedDate": "2020-12-04T12:44:35Z", "type": "commit"}]}