{"pr_number": 1895, "pr_title": "Show proxy info in system list", "pr_createdAt": "2020-02-10T12:58:19Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/1895", "timeline": [{"oid": "9fc0a76b5e73714be208a18d4cf35e51b3c17a39", "url": "https://github.com/uyuni-project/uyuni/commit/9fc0a76b5e73714be208a18d4cf35e51b3c17a39", "message": "Show proxy icon info in system list", "committedDate": "2020-02-27T13:05:47Z", "type": "forcePushed"}, {"oid": "2622c6eb57beabebdbca58f97a2fde7cac929748", "url": "https://github.com/uyuni-project/uyuni/commit/2622c6eb57beabebdbca58f97a2fde7cac929748", "message": "Show proxy icon info in system list", "committedDate": "2020-02-27T13:25:25Z", "type": "forcePushed"}, {"oid": "6f2a0592fcb076d89f545997f3be2b61552d566d", "url": "https://github.com/uyuni-project/uyuni/commit/6f2a0592fcb076d89f545997f3be2b61552d566d", "message": "Show proxy icon info in system list", "committedDate": "2020-02-27T13:29:35Z", "type": "forcePushed"}, {"oid": "3074ab81c33f4031acb19ea37619d3f6507b8310", "url": "https://github.com/uyuni-project/uyuni/commit/3074ab81c33f4031acb19ea37619d3f6507b8310", "message": "Add proxy flag to the rhnServerOverview database view and fetch it", "committedDate": "2020-02-27T13:59:06Z", "type": "forcePushed"}, {"oid": "1e7fd6f075bde7318ecd95e0a6abd5e94d171dc2", "url": "https://github.com/uyuni-project/uyuni/commit/1e7fd6f075bde7318ecd95e0a6abd5e94d171dc2", "message": "Add proxy flag to the rhnServerOverview database view and fetch it", "committedDate": "2020-02-27T14:16:43Z", "type": "forcePushed"}, {"oid": "626bc692eb73ca1c234351af2d1e49e64de19f23", "url": "https://github.com/uyuni-project/uyuni/commit/626bc692eb73ca1c234351af2d1e49e64de19f23", "message": "Add proxy flag to the rhnServerOverview database view and fetch it", "committedDate": "2020-02-27T14:23:29Z", "type": "forcePushed"}, {"oid": "38f691bd323808910d592b5af8ed6096bfd42994", "url": "https://github.com/uyuni-project/uyuni/commit/38f691bd323808910d592b5af8ed6096bfd42994", "message": "Add proxy flag to the rhnServerOverview database view and fetch it", "committedDate": "2020-02-27T16:14:22Z", "type": "forcePushed"}, {"oid": "1ef9c7ca948fbf7855978d09f902768a442085cc", "url": "https://github.com/uyuni-project/uyuni/commit/1ef9c7ca948fbf7855978d09f902768a442085cc", "message": "Fix indentation to improve readability", "committedDate": "2020-03-02T09:37:02Z", "type": "commit"}, {"oid": "24d08d5f7c15c1d8f77b4f4ec494ccef03aaf6e5", "url": "https://github.com/uyuni-project/uyuni/commit/24d08d5f7c15c1d8f77b4f4ec494ccef03aaf6e5", "message": "Show proxy icon info in system list", "committedDate": "2020-03-02T09:37:07Z", "type": "commit"}, {"oid": "3103d502450be0fca0a845dffebb45171c8c7284", "url": "https://github.com/uyuni-project/uyuni/commit/3103d502450be0fca0a845dffebb45171c8c7284", "message": "Changelog", "committedDate": "2020-03-02T09:37:33Z", "type": "forcePushed"}, {"oid": "779766a8df0225ee263d7a54064d70f430a345f4", "url": "https://github.com/uyuni-project/uyuni/commit/779766a8df0225ee263d7a54064d70f430a345f4", "message": "Add proper icon title text", "committedDate": "2020-03-02T10:28:30Z", "type": "forcePushed"}, {"oid": "9ab09988c5f7d72307accf9bab2713ad40e59e7d", "url": "https://github.com/uyuni-project/uyuni/commit/9ab09988c5f7d72307accf9bab2713ad40e59e7d", "message": "Add proxy flag to the rhnServerOverview database view and fetch it", "committedDate": "2020-03-02T10:42:29Z", "type": "commit"}, {"oid": "0d2235eb9de057a17541de7b1b630ef1ebc13301", "url": "https://github.com/uyuni-project/uyuni/commit/0d2235eb9de057a17541de7b1b630ef1ebc13301", "message": "Add proper icon title text", "committedDate": "2020-03-02T10:42:30Z", "type": "commit"}, {"oid": "0d2235eb9de057a17541de7b1b630ef1ebc13301", "url": "https://github.com/uyuni-project/uyuni/commit/0d2235eb9de057a17541de7b1b630ef1ebc13301", "message": "Add proper icon title text", "committedDate": "2020-03-02T10:42:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM0NTAwOQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386345009", "bodyText": "I think you need to use coalesce here as well. In case it is not a proxy you would get \"NULL\".\nAs far as I can see, the jsp did not work wil NULL value here. Or did you test it?\nDo you really need the ID, or just a \"yes/no\". As you use this value with PROXY_ID AS IS_RHN_PROXY\nit sounds like 1/0 would be enough.", "author": "mcalmer", "createdAt": "2020-03-02T11:43:16Z", "path": "schema/spacewalk/common/views/rhnServerOverview.sql", "diffHunk": "@@ -109,7 +110,8 @@ select\n     os,\n     release,\n     ( select name from rhnServerArch where id = s.server_arch_id),\n-    coalesce((select 1 from rhnServerLock SL WHERE SL.server_id = S.id), 0)\n+    coalesce((select 1 from rhnServerLock SL WHERE SL.server_id = S.id), 0),\n+    ( select pxy.server_Id from rhnProxyInfo pxy where pxy.server_id = S.id)", "originalCommit": "9ab09988c5f7d72307accf9bab2713ad40e59e7d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM3NDEzMg==", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386374132", "bodyText": "Yes, I tested, the screenshot was taken from a properly working setup with this patch. The reason why I fetch the info in this way is because it was already designed to be like that, you can see it here : this is the DTO used to be populated by the rhnServerOverview view called from here", "author": "ncounter", "createdAt": "2020-03-02T12:52:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM0NTAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQxNDk3Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386414976", "bodyText": "ok", "author": "mcalmer", "createdAt": "2020-03-02T14:13:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM0NTAwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM0NjQxNQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386346415", "bodyText": "Not sure if this works when current.rhnProxy is empty. Have you tested it?", "author": "mcalmer", "createdAt": "2020-03-02T11:46:37Z", "path": "java/code/webapp/WEB-INF/pages/common/fragments/systems/system_list_fragment.jspf", "diffHunk": "@@ -14,6 +15,10 @@\n   </c:otherwise>\n </c:choose>\n \n+<c:if test=\"${current.rhnProxy}\">", "originalCommit": "24d08d5f7c15c1d8f77b4f4ec494ccef03aaf6e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM3NDkxOA==", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386374918", "bodyText": "Yes, like the other comment, it was tested manually and the screenshot taken from it. The reason is because of the DTO format I didn't want to change", "author": "ncounter", "createdAt": "2020-03-02T12:54:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM0NjQxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQxNTA5OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386415099", "bodyText": "ok", "author": "mcalmer", "createdAt": "2020-03-02T14:13:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM0NjQxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQxNzI4MQ==", "url": "https://github.com/uyuni-project/uyuni/pull/1895#discussion_r386417281", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            drop view rhnServerOverview;\n          \n          \n            \n            drop view if exists rhnServerOverview;", "author": "mcalmer", "createdAt": "2020-03-02T14:17:16Z", "path": "schema/spacewalk/upgrade/susemanager-schema-4.1.3-to-susemanager-schema-4.1.4/005-rhnServerOverview.sql", "diffHunk": "@@ -0,0 +1,101 @@\n+drop view rhnServerOverview;", "originalCommit": "0d2235eb9de057a17541de7b1b630ef1ebc13301", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9edcb8be0b3604955bb44015aa22c109eb000570", "url": "https://github.com/uyuni-project/uyuni/commit/9edcb8be0b3604955bb44015aa22c109eb000570", "message": "Fix rhnServerOverview migration\n\nCo-Authored-By: Michael Calmer <Michael.Calmer@suse.de>", "committedDate": "2020-03-02T14:31:20Z", "type": "commit"}]}