{"pr_number": 3015, "pr_title": "mgr-cfg: Updated Python definitions for RHEL8 and quoted text comparisons.", "pr_createdAt": "2020-12-14T07:32:09Z", "pr_url": "https://github.com/uyuni-project/uyuni/pull/3015", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNjk3OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/3015#discussion_r542206979", "bodyText": "On SLE12 this result in an \"unresolvable: nothing provides python2\".\nJust do this %if for rhel only. At SUSE we have the definition python == python2 .", "author": "mcalmer", "createdAt": "2020-12-14T08:48:13Z", "path": "client/tools/mgr-cfg/mgr-cfg.spec", "diffHunk": "@@ -125,16 +126,24 @@ Obsoletes:      python-%{name} < %{oldversion}\n Provides:       python2-%{oldname} = %{oldversion}\n Obsoletes:      python2-%{oldname} < %{oldversion}\n Requires:       %{name} = %{version}-%{release}\n+%if 0%{?suse_version} || 0%{?rhel} >= 8\n+Requires:       python2", "originalCommit": "be5644d1ecfa1e1ca144c2133fe1762269649ac2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI0OTg0Ng==", "url": "https://github.com/uyuni-project/uyuni/pull/3015#discussion_r542249846", "bodyText": "ok, I think I need more understanding on this as I hit this before.\nMy understanding (and tests on LEAP 15.2), SUSE detects the required Python version. so if you put\nRequires: python\nit will either resolve to python2 or python3. On my test builds, the package failed because of missing Python 2 (3 was installed instead). This is why I am forcing Python 2 by using Requires: python2.\nOr should I also include the actual SUSE version number? (I noticed you wrote SLE12).", "author": "sbluhm", "createdAt": "2020-12-14T09:51:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNjk3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwNzE4OQ==", "url": "https://github.com/uyuni-project/uyuni/pull/3015#discussion_r542307189", "bodyText": "This would be new to me. In SLE and AFAIK also in Leap python is always python2.\nhttps://build.opensuse.org/package/binary/openSUSE:Leap:15.2/python/standard/x86_64/python-2.7.17-lp152.2.17.x86_64.rpm\nThe package name in Leap is really only \"python\". python2 is a \"Provides\" value.\nAhh, but our \"python3\" package \"Provides: python = 3.x\".\nSo if you found problems, we can say\nRequires: python < 3", "author": "mcalmer", "createdAt": "2020-12-14T11:19:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNjk3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMxNzcxNA==", "url": "https://github.com/uyuni-project/uyuni/pull/3015#discussion_r542317714", "bodyText": "THANK YOU! I love your approach. This makes it a lot simpler. I believe I have to revisit one or two of my previous submissions for this.", "author": "sbluhm", "createdAt": "2020-12-14T11:37:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNjk3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUzMjgxMA==", "url": "https://github.com/uyuni-project/uyuni/pull/3015#discussion_r542532810", "bodyText": "No, I think it will not work on SLE12.", "author": "mcalmer", "createdAt": "2020-12-14T16:41:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNjk3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUzMzc4Mw==", "url": "https://github.com/uyuni-project/uyuni/pull/3015#discussion_r542533783", "bodyText": "We build this package also for RHEL6 and SLES11. So keep the python2 for rhel >= 8 only, please.", "author": "mcalmer", "createdAt": "2020-12-14T16:43:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNjk3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNzIwNw==", "url": "https://github.com/uyuni-project/uyuni/pull/3015#discussion_r542207207", "bodyText": "same as above: just remove the suse_version here.", "author": "mcalmer", "createdAt": "2020-12-14T08:48:36Z", "path": "client/tools/mgr-cfg/mgr-cfg.spec", "diffHunk": "@@ -125,16 +126,24 @@ Obsoletes:      python-%{name} < %{oldversion}\n Provides:       python2-%{oldname} = %{oldversion}\n Obsoletes:      python2-%{oldname} < %{oldversion}\n Requires:       %{name} = %{version}-%{release}\n+%if 0%{?suse_version} || 0%{?rhel} >= 8\n+Requires:       python2\n+%else\n Requires:       python\n+%endif\n Requires:       python2-rhn-client-tools >= 2.8.4\n Requires:       rhnlib >= 2.8.3\n Requires:       python2-uyuni-common-libs\n %if 0%{?rhel} && 0%{?rhel} <= 5\n Requires:       python-hashlib\n %endif\n+%if 0%{?suse_version} || 0%{?rhel} >= 8\n+BuildRequires:  python2", "originalCommit": "be5644d1ecfa1e1ca144c2133fe1762269649ac2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "19101ec3481a4ad3fe293421d63a9e3eb7484494", "url": "https://github.com/uyuni-project/uyuni/commit/19101ec3481a4ad3fe293421d63a9e3eb7484494", "message": "SPEC: Updated Python definitions for RHEL8 and quoted text comparisons.", "committedDate": "2020-12-14T17:50:22Z", "type": "commit"}, {"oid": "19101ec3481a4ad3fe293421d63a9e3eb7484494", "url": "https://github.com/uyuni-project/uyuni/commit/19101ec3481a4ad3fe293421d63a9e3eb7484494", "message": "SPEC: Updated Python definitions for RHEL8 and quoted text comparisons.", "committedDate": "2020-12-14T17:50:22Z", "type": "forcePushed"}]}