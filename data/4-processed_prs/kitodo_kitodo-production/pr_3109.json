{"pr_number": 3109, "pr_title": "fix search result page", "pr_createdAt": "2020-01-28T18:14:10Z", "pr_url": "https://github.com/kitodo/kitodo-production/pull/3109", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk3OTQ3Ng==", "url": "https://github.com/kitodo/kitodo-production/pull/3109#discussion_r371979476", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    <p:commandLink id=\"deleteProcess\" action=\"#{SearchResultForm.deleteProcess(process)}\" title=\"#{msgs.delete}\"\n          \n          \n            \n                                    <p:commandLink id=\"deleteProcess\"\n          \n          \n            \n                                                   action=\"#{SearchResultForm.deleteProcess(process)}\"\n          \n          \n            \n                                                   title=\"#{msgs.delete}\"", "author": "oliver-stoehr", "createdAt": "2020-01-28T18:28:46Z", "path": "Kitodo/src/main/webapp/pages/searchResult.xhtml", "diffHunk": "@@ -111,14 +111,21 @@\n                             <h:outputText><i class=\"fa fa-list-alt\"/></h:outputText>\n                         </h:link>\n \n-                        <p:commandLink id=\"download\" action=\"#{ProcessForm.downloadToHome}\" title=\"#{msgs.linkHomeDirectory}\"\n+                        <p:commandLink id=\"download\"\n+                                       action=\"#{SearchResultForm.downloadToHome(process.id)}\"\n+                                       title=\"#{msgs.linkHomeDirectory}\"\n                                        rendered=\"#{SecurityAccessController.hasAuthorityToEditProcessImages()}\">\n                             <h:outputText><i class=\"fa fa-download\"/></h:outputText>\n-                            <f:setPropertyActionListener value=\"#{process.id}\" target=\"#{ProcessForm.processByID}\"/>\n                             <!-- TODO: add separate message in case it already exists and alert -->\n                         </p:commandLink>\n \n-                        <p:commandLink id=\"deleteProcess\" action=\"#{SearchResultForm.delete(process)}\" title=\"#{msgs.delete}\"\n+                        <h:commandLink action=\"#{SearchResultForm.exportMets(process.id)}\"\n+                                       id=\"exportMets\"\n+                                       title=\"#{msgs.exportMets}\"\n+                                       rendered=\"#{SecurityAccessController.hasAuthorityToExportProcess()}\">\n+                            <h:outputText><i class=\"fa fa-file-code-o\"/></h:outputText>\n+                        </h:commandLink>\n+                        <p:commandLink id=\"deleteProcess\" action=\"#{SearchResultForm.deleteProcess(process)}\" title=\"#{msgs.delete}\"", "originalCommit": "044c4a494f535a213e80d657e156e72da5df567f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk4MDU2MQ==", "url": "https://github.com/kitodo/kitodo-production/pull/3109#discussion_r371980561", "bodyText": "Suggested change", "author": "oliver-stoehr", "createdAt": "2020-01-28T18:30:57Z", "path": "Kitodo/src/main/java/org/kitodo/production/forms/SearchResultForm.java", "diffHunk": "@@ -158,19 +164,44 @@ private void refreshFilteredList() {\n     }\n \n     /**\n-     * delete process.\n-     * \n-     * @param processDTO\n-     *            to delete\n+     * Delete given Process 'process'.\n+     *\n+     * @param processDTO Process to delete\n      */\n-    public void delete(ProcessDTO processDTO) {\n+    public void deleteProcess(ProcessDTO processDTO) {\n         try {\n-            ProcessForm processForm = new ProcessForm();\n-            processForm.setProcess(ServiceManager.getProcessService().getById(processDTO.getId()));\n-            processForm.delete();\n+            ProcessService.deleteProcess(processDTO.getId());\n             filteredList.remove(processDTO);\n+        } catch (DataException | DAOException e) {\n+            Helper.setErrorMessage(ERROR_DELETING, new Object[] {ObjectType.PROCESS.getTranslationSingular() },\n+                    logger, e);\n+        }\n+    }\n+\n+", "originalCommit": "044c4a494f535a213e80d657e156e72da5df567f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fa433a78949495eb8c834407b9607ae52e7be8f0", "url": "https://github.com/kitodo/kitodo-production/commit/fa433a78949495eb8c834407b9607ae52e7be8f0", "message": "fix search result page", "committedDate": "2020-01-29T20:27:51Z", "type": "commit"}, {"oid": "fa433a78949495eb8c834407b9607ae52e7be8f0", "url": "https://github.com/kitodo/kitodo-production/commit/fa433a78949495eb8c834407b9607ae52e7be8f0", "message": "fix search result page", "committedDate": "2020-01-29T20:27:51Z", "type": "forcePushed"}]}