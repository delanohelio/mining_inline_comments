{"pr_number": 9747, "pr_title": "KAFKA-10852: AlterIsr should not be throttled", "pr_createdAt": "2020-12-14T15:01:38Z", "pr_url": "https://github.com/apache/kafka/pull/9747", "timeline": [{"oid": "6cae9e792f0505e86c2baa72bfa6036517e90f39", "url": "https://github.com/apache/kafka/commit/6cae9e792f0505e86c2baa72bfa6036517e90f39", "message": "KAFKA-10852: AlterIsr should be a cluster action\n\nThis ensures it won't get throttled.", "committedDate": "2020-12-14T15:01:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MjcyNw==", "url": "https://github.com/apache/kafka/pull/9747#discussion_r542452727", "bodyText": "We have to decide whether we want to do this or remove the throttle time ms from AlterIsr before 2.7.0.", "author": "ijuma", "createdAt": "2020-12-14T15:02:29Z", "path": "clients/src/test/java/org/apache/kafka/common/protocol/ApiKeysTest.java", "diffHunk": "@@ -55,11 +61,14 @@ public void schemaVersionOutOfRange() {\n      */\n     @Test\n     public void testResponseThrottleTime() {\n-        List<ApiKeys> authenticationKeys = Arrays.asList(ApiKeys.SASL_HANDSHAKE, ApiKeys.SASL_AUTHENTICATE);\n+        Set<ApiKeys> authenticationKeys = EnumSet.of(ApiKeys.SASL_HANDSHAKE, ApiKeys.SASL_AUTHENTICATE);\n+        // Newer protocol apis include throttle time ms even for cluster actions\n+        Set<ApiKeys> clusterActionsWithThrottleTimeMs = EnumSet.of(ApiKeys.ALTER_ISR);", "originalCommit": "6cae9e792f0505e86c2baa72bfa6036517e90f39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MjgyNA==", "url": "https://github.com/apache/kafka/pull/9747#discussion_r542452824", "bodyText": "cc @bbejeck", "author": "ijuma", "createdAt": "2020-12-14T15:02:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MjcyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc1MTIxNg==", "url": "https://github.com/apache/kafka/pull/9747#discussion_r542751216", "bodyText": "We decided this is not a blocker.", "author": "ijuma", "createdAt": "2020-12-14T20:32:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MjcyNw=="}], "type": "inlineReview"}, {"oid": "75343d95a12fc29c92af29915ed3a9d2beaf9b1b", "url": "https://github.com/apache/kafka/commit/75343d95a12fc29c92af29915ed3a9d2beaf9b1b", "message": "Don't throttle alter isr for now", "committedDate": "2020-12-14T20:41:51Z", "type": "commit"}, {"oid": "e49d24b0967700e2ed5bdf6432854726555a674d", "url": "https://github.com/apache/kafka/commit/e49d24b0967700e2ed5bdf6432854726555a674d", "message": "Fix failing test", "committedDate": "2020-12-15T03:33:15Z", "type": "commit"}, {"oid": "c48d02085f61a5bc43b3069a18132d129ae7b020", "url": "https://github.com/apache/kafka/commit/c48d02085f61a5bc43b3069a18132d129ae7b020", "message": "Clean-ups", "committedDate": "2020-12-15T03:33:57Z", "type": "commit"}]}