{"pr_number": 8390, "pr_title": "MINOR: Fix Scala 2.13 compiler warnings", "pr_createdAt": "2020-03-30T19:31:01Z", "pr_url": "https://github.com/apache/kafka/pull/8390", "timeline": [{"oid": "3a6b026701e889864a5469691d52961efdf62917", "url": "https://github.com/apache/kafka/commit/3a6b026701e889864a5469691d52961efdf62917", "message": "Remove @Deprecated annotation from internal request classes", "committedDate": "2020-03-31T02:07:19Z", "type": "commit"}, {"oid": "82507c4d40c7bc8be5f00aa7af2fa49d4031d258", "url": "https://github.com/apache/kafka/commit/82507c4d40c7bc8be5f00aa7af2fa49d4031d258", "message": "Class.newInstance is deprecated in favor of Class.getConstructor().newInstance", "committedDate": "2020-03-31T02:07:19Z", "type": "commit"}, {"oid": "84cafd0cbb76f2614b76e9a862772be8a55fb85a", "url": "https://github.com/apache/kafka/commit/84cafd0cbb76f2614b76e9a862772be8a55fb85a", "message": "Replace deprecated JavaConversions with CollectionConverters", "committedDate": "2020-03-31T02:08:38Z", "type": "commit"}, {"oid": "63029927e9283947b0b6e98a2ce97a434ae3fd6b", "url": "https://github.com/apache/kafka/commit/63029927e9283947b0b6e98a2ce97a434ae3fd6b", "message": "Remove unused kafka.cluster.Cluster", "committedDate": "2020-03-31T02:08:38Z", "type": "commit"}, {"oid": "e079dc57399636964d06e94af2282ae1fe3ec7f7", "url": "https://github.com/apache/kafka/commit/e079dc57399636964d06e94af2282ae1fe3ec7f7", "message": "Don't use Map and Set methods deprecated in 2.13\n\n* collection.Map +, ++, -, --, mapValues, filterKeys, retain\n* collection.Set +, ++, -, --", "committedDate": "2020-03-31T02:08:38Z", "type": "commit"}, {"oid": "31fa96e584b1a9785edebbefcc4be189caf62f39", "url": "https://github.com/apache/kafka/commit/31fa96e584b1a9785edebbefcc4be189caf62f39", "message": "Add scala-collection-compat dependency to streams-scala\n\nAnd update the versionn to 2.1.4.", "committedDate": "2020-03-31T02:08:38Z", "type": "commit"}, {"oid": "80b4eb518fed4dc3e0be1385c0724ec8201b582e", "url": "https://github.com/apache/kafka/commit/80b4eb518fed4dc3e0be1385c0724ec8201b582e", "message": "Replace usages of deprecated Either.get and Either.right", "committedDate": "2020-03-31T02:08:38Z", "type": "commit"}, {"oid": "f1824879e061f11bd6a603c0dd1640eeda9a12bb", "url": "https://github.com/apache/kafka/commit/f1824879e061f11bd6a603c0dd1640eeda9a12bb", "message": "Replace usage of deprecated Integer(String) constructor", "committedDate": "2020-03-31T02:08:38Z", "type": "commit"}, {"oid": "a99d0cc2b4bf90348bc236d9e7eb71142dcb27f3", "url": "https://github.com/apache/kafka/commit/a99d0cc2b4bf90348bc236d9e7eb71142dcb27f3", "message": "`import scala.language.implicitConversions` is not needed in Scala 2.13", "committedDate": "2020-03-31T02:08:38Z", "type": "commit"}, {"oid": "cc337a0aeda95a7e1b1015eeb66b520be087aece", "url": "https://github.com/apache/kafka/commit/cc337a0aeda95a7e1b1015eeb66b520be087aece", "message": "Replace usage of deprecated `toIterator`, `Traversable`, `seq`, `reverseMap`, `hasDefiniteSize`", "committedDate": "2020-03-31T02:08:38Z", "type": "commit"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "f12e50f317ce2af3b31766da994e46f6e8d07a8e", "url": "https://github.com/apache/kafka/commit/f12e50f317ce2af3b31766da994e46f6e8d07a8e", "message": "Replace usage of deprecated alterConfigs with incrementalAlterConfigs where possible", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "f5d37c1a405480de215b2b46076219dce3556d41", "url": "https://github.com/apache/kafka/commit/f5d37c1a405480de215b2b46076219dce3556d41", "message": "Fix implicit widening conversions from Long/Int to Double/Float", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "8101cccdd6d59c2f9bf74110b419eac4ceb36a16", "url": "https://github.com/apache/kafka/commit/8101cccdd6d59c2f9bf74110b419eac4ceb36a16", "message": "Avoid implicit conversions to String", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "4d6d58cc0ea7b0efd2f02f6193092787d4479bd8", "url": "https://github.com/apache/kafka/commit/4d6d58cc0ea7b0efd2f02f6193092787d4479bd8", "message": "Eliminate usage of deprecated procedure syntax", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "9573b83aa9a51968f4451562f2357821803f541e", "url": "https://github.com/apache/kafka/commit/9573b83aa9a51968f4451562f2357821803f541e", "message": "Remove test `println`", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "f399ce168c04bfece9f78098746e1e9c28b3ca14", "url": "https://github.com/apache/kafka/commit/f399ce168c04bfece9f78098746e1e9c28b3ca14", "message": "Eliminate implicit conversion from Array to Seq", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "5fb834df2311e3f985358f609ce705d646477eb1", "url": "https://github.com/apache/kafka/commit/5fb834df2311e3f985358f609ce705d646477eb1", "message": "Remove unnecessary usage of 3 argument assertEquals", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "b5ef0eb5bfbda2aa415bca1489175130b4361b84", "url": "https://github.com/apache/kafka/commit/b5ef0eb5bfbda2aa415bca1489175130b4361b84", "message": "Replace `toStream` with `iterator`", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "c572bbcbd09dc18eb9656126fbf17af38b03a88a", "url": "https://github.com/apache/kafka/commit/c572bbcbd09dc18eb9656126fbf17af38b03a88a", "message": "Do not use deprecated SaslConfigs.DEFAULT_SASL_ENABLED_MECHANISMS", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "057019a01f125a6a8ec06f0c98eb9b1080903cdb", "url": "https://github.com/apache/kafka/commit/057019a01f125a6a8ec06f0c98eb9b1080903cdb", "message": "Replace StringBuilder.newBuilder with new StringBuilder", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "70089fc632a951efdf0750e8aca5f1487c26af15", "url": "https://github.com/apache/kafka/commit/70089fc632a951efdf0750e8aca5f1487c26af15", "message": "Rename AclBuffers to AclSeqs and remove usage of `filterKeys`", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "d0eaa966780c2237dcd6403ca41b6f632c07455a", "url": "https://github.com/apache/kafka/commit/d0eaa966780c2237dcd6403ca41b6f632c07455a", "message": "More consistent usage of Set/Map in Controller classes\n\nThis also fixes deprecated warnings with Scala 2.13.", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "44012dfa1d3f84567bdc8976f5075591f775e5c7", "url": "https://github.com/apache/kafka/commit/44012dfa1d3f84567bdc8976f5075591f775e5c7", "message": "Add spotBugs exclusion due to Scala 2.12 inlining artifact", "committedDate": "2020-03-31T02:33:04Z", "type": "commit"}, {"oid": "44012dfa1d3f84567bdc8976f5075591f775e5c7", "url": "https://github.com/apache/kafka/commit/44012dfa1d3f84567bdc8976f5075591f775e5c7", "message": "Add spotBugs exclusion due to Scala 2.12 inlining artifact", "committedDate": "2020-03-31T02:33:04Z", "type": "forcePushed"}, {"oid": "f9566888f7a5d5887fe24204a5e7d99f558784aa", "url": "https://github.com/apache/kafka/commit/f9566888f7a5d5887fe24204a5e7d99f558784aa", "message": "Tweak implementation of `removeExpiredProducers`", "committedDate": "2020-03-31T06:13:04Z", "type": "commit"}, {"oid": "3624366fb119ef0408d13dbba8f1684f07f8cb4f", "url": "https://github.com/apache/kafka/commit/3624366fb119ef0408d13dbba8f1684f07f8cb4f", "message": "Fix ReassignPartitionsUnitTest test failures with Scala 2.12", "committedDate": "2020-03-31T06:36:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NzcyNw==", "url": "https://github.com/apache/kafka/pull/8390#discussion_r400977727", "bodyText": "Pardon me, I failed to catch the point of this change.", "author": "chia7712", "createdAt": "2020-03-31T14:52:23Z", "path": "core/src/main/scala/kafka/log/LogCleanerManager.scala", "diffHunk": "@@ -410,7 +410,7 @@ private[log] class LogCleanerManager(val logDirs: Seq[File],\n         if (checkpoint != null) {\n           val existing = checkpoint.read()\n           if (existing.getOrElse(topicPartition, 0L) > offset)\n-            checkpoint.write(existing + (topicPartition -> offset))\n+            checkpoint.write(mutable.Map() ++= existing += topicPartition -> offset)", "originalCommit": "3624366fb119ef0408d13dbba8f1684f07f8cb4f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTAxNjAyMA==", "url": "https://github.com/apache/kafka/pull/8390#discussion_r401016020", "bodyText": "scala.collection.Map.+ is deprecated.", "author": "ijuma", "createdAt": "2020-03-31T15:41:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk3NzcyNw=="}], "type": "inlineReview"}]}