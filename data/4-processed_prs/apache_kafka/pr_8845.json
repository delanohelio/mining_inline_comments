{"pr_number": 8845, "pr_title": "KAFKA-10126:Add a warning message for ConsumerPerformance", "pr_createdAt": "2020-06-10T09:57:30Z", "pr_url": "https://github.com/apache/kafka/pull/8845", "timeline": [{"oid": "378e3ef1ae5f8209a8b4feff391e1df633058940", "url": "https://github.com/apache/kafka/commit/378e3ef1ae5f8209a8b4feff391e1df633058940", "message": "KAFKA-10126:Warn unused ConsumerPerformance optons\n\nOption numThreadsOpt and numFetchersOpt are unused in ConsumerPerformance.\nAccording to comments from https://issues.apache.org/jira/browse/KAFKA-10126,\nadd a warning when invoking these options which should be recognized\n\nChange-Id: Iae34b11210a361373eda42274ebfc153b636a989\nSigned-off-by: Jiamei Xie <jiamei.xie@arm.com>", "committedDate": "2020-06-10T09:54:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI2NzMwOA==", "url": "https://github.com/apache/kafka/pull/8845#discussion_r438267308", "bodyText": "https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/tools/GetOffsetShell.scala#L55 had similar issue and we can follow its style. i.e DEPRECATED AND IGNORED:", "author": "chia7712", "createdAt": "2020-06-10T16:46:18Z", "path": "core/src/main/scala/kafka/tools/ConsumerPerformance.scala", "diffHunk": "@@ -232,12 +232,12 @@ object ConsumerPerformance extends LazyLogging {\n       .describedAs(\"size\")\n       .ofType(classOf[java.lang.Integer])\n       .defaultsTo(2 * 1024 * 1024)\n-    val numThreadsOpt = parser.accepts(\"threads\", \"Number of processing threads.\")\n+    val numThreadsOpt = parser.accepts(\"threads\", \"Number of processing threads. It has not been implemented.\")", "originalCommit": "378e3ef1ae5f8209a8b4feff391e1df633058940", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyMDk3Mg==", "url": "https://github.com/apache/kafka/pull/8845#discussion_r438320972", "bodyText": "+1", "author": "abbccdda", "createdAt": "2020-06-10T18:17:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI2NzMwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyMDg4NA==", "url": "https://github.com/apache/kafka/pull/8845#discussion_r438320884", "bodyText": "has not been implemented -> have been deprecated", "author": "abbccdda", "createdAt": "2020-06-10T18:17:22Z", "path": "core/src/main/scala/kafka/tools/ConsumerPerformance.scala", "diffHunk": "@@ -256,6 +256,10 @@ object ConsumerPerformance extends LazyLogging {\n       .defaultsTo(10000)\n \n     options = parser.parse(args: _*)\n+\n+    if(options.has(numThreadsOpt) || options.has(numFetchersOpt))\n+      println(\"WARNING: option threads and num-fetch-threads has not been implemented.\")", "originalCommit": "378e3ef1ae5f8209a8b4feff391e1df633058940", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7711fa83c856a55b97efea40232ada34c0496f22", "url": "https://github.com/apache/kafka/commit/7711fa83c856a55b97efea40232ada34c0496f22", "message": "KAFKA-10126:Add a warning message for ConsumerPerformance\n\nConsumerPerformance has not implemented options numThreadsOpt and numFetchersOpt as so far.\nThis patch adds a warning message when used these options according to comments from\nhttps://issues.apache.org/jira/browse/KAFKA-10126 . Once these two options are implemented,\nthis warning message should be removed.\n\nSigned-off-by: Jiamei Xie <jiamei.xie@arm.com>", "committedDate": "2020-06-11T01:59:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg3NzM3Ng==", "url": "https://github.com/apache/kafka/pull/8845#discussion_r439877376", "bodyText": "nit: add square brackets to the options, like:\n\"WARNING: option [threads] and [num-fetch-threads] have been deprecated and will be ignored by the test\"", "author": "abbccdda", "createdAt": "2020-06-14T23:15:33Z", "path": "core/src/main/scala/kafka/tools/ConsumerPerformance.scala", "diffHunk": "@@ -256,6 +256,10 @@ object ConsumerPerformance extends LazyLogging {\n       .defaultsTo(10000)\n \n     options = parser.parse(args: _*)\n+\n+    if(options.has(numThreadsOpt) || options.has(numFetchersOpt))\n+      println(\"WARNING: option threads and num-fetch-threads have been deprecated and ignored\")", "originalCommit": "7711fa83c856a55b97efea40232ada34c0496f22", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0dcb06df7a41b9f82f1e4d197454755766bf7fe8", "url": "https://github.com/apache/kafka/commit/0dcb06df7a41b9f82f1e4d197454755766bf7fe8", "message": "Change warning message\n\nSigned-off-by: Jiamei Xie <jiamei.xie@arm.com>", "committedDate": "2020-06-15T02:14:31Z", "type": "commit"}]}