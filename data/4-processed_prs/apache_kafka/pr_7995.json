{"pr_number": 7995, "pr_title": "KAFKA-9462: Correct exception message in DistributedHerder", "pr_createdAt": "2020-01-22T00:10:55Z", "pr_url": "https://github.com/apache/kafka/pull/7995", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQxNjkwNA==", "url": "https://github.com/apache/kafka/pull/7995#discussion_r370416904", "bodyText": "This change is a good suggestion.", "author": "rhauch", "createdAt": "2020-01-23T23:58:13Z", "path": "connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java", "diffHunk": "@@ -699,7 +699,7 @@ public void deleteConnectorConfig(final String connName, final Callback<Created<\n                     public Void call() throws Exception {\n                         log.trace(\"Handling connector config request {}\", connName);\n                         if (!isLeader()) {\n-                            callback.onCompletion(new NotLeaderException(\"Only the leader can set connector configs.\", leaderUrl()), null);\n+                            callback.onCompletion(new NotLeaderException(\"Only the leader can delete connector configs.\", leaderUrl()), null);", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQxNzYwMg==", "url": "https://github.com/apache/kafka/pull/7995#discussion_r370417602", "bodyText": "I think this change is actually less clear. Workers (members of the cluster) can be leaders, while connectors and tasks are assigned to workers. But connectors/tasks are not workers (members), so it's actually incorrect to say \"Cannot restart task since it [the task] is not a leader\".\nAbout the only improvement to the original message that adds value is to change \"member\" to \"worker\", though the value is debatable since we do sometimes use \"member\" in other log messages (including in this class!).", "author": "rhauch", "createdAt": "2020-01-24T00:01:08Z", "path": "connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java", "diffHunk": "@@ -946,7 +946,7 @@ public Void call() throws Exception {\n                 } else if (isLeader()) {\n                     callback.onCompletion(new NotAssignedException(\"Cannot restart task since it is not assigned to this member\", member.ownerUrl(id)), null);\n                 } else {\n-                    callback.onCompletion(new NotLeaderException(\"Cannot restart task since it is not assigned to this member\", leaderUrl()), null);\n+                    callback.onCompletion(new NotLeaderException(\"Cannot restart task since it is not leader\", leaderUrl()), null);", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQxOTIyOA==", "url": "https://github.com/apache/kafka/pull/7995#discussion_r370419228", "bodyText": "I dropped the 2nd and 3rd hunks since it is not clear how to make the messages more helpful.\nPlease take another look.", "author": "tedyu", "createdAt": "2020-01-24T00:07:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQxNzYwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQxNzY2OA==", "url": "https://github.com/apache/kafka/pull/7995#discussion_r370417668", "bodyText": "Same concern here about this change being less clear, as mentioned in my other comment.", "author": "rhauch", "createdAt": "2020-01-24T00:01:23Z", "path": "connect/runtime/src/main/java/org/apache/kafka/connect/runtime/distributed/DistributedHerder.java", "diffHunk": "@@ -908,7 +908,7 @@ public Void call() throws Exception {\n                 } else if (isLeader()) {\n                     callback.onCompletion(new NotAssignedException(\"Cannot restart connector since it is not assigned to this member\", member.ownerUrl(connName)), null);\n                 } else {\n-                    callback.onCompletion(new NotLeaderException(\"Cannot restart connector since it is not assigned to this member\", leaderUrl()), null);\n+                    callback.onCompletion(new NotLeaderException(\"Cannot restart connector since it is not leader\", leaderUrl()), null);", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "570109a9da76a1aa26d581f309e278c4d73d1cc0", "url": "https://github.com/apache/kafka/commit/570109a9da76a1aa26d581f309e278c4d73d1cc0", "message": "Correct exception message in DistributedHerder", "committedDate": "2020-01-24T00:06:22Z", "type": "commit"}, {"oid": "570109a9da76a1aa26d581f309e278c4d73d1cc0", "url": "https://github.com/apache/kafka/commit/570109a9da76a1aa26d581f309e278c4d73d1cc0", "message": "Correct exception message in DistributedHerder", "committedDate": "2020-01-24T00:06:22Z", "type": "forcePushed"}]}