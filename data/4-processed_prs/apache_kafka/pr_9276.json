{"pr_number": 9276, "pr_title": "KAFKA-10473: Add docs on partition size-on-disk, and other log-related metrics", "pr_createdAt": "2020-09-09T22:20:40Z", "pr_url": "https://github.com/apache/kafka/pull/9276", "timeline": [{"oid": "fd48631bbbf290fb3ac8642d93a289f69e83b679", "url": "https://github.com/apache/kafka/commit/fd48631bbbf290fb3ac8642d93a289f69e83b679", "message": "Add docs on the following JMX metrics\n\nkafka.log,type=Log,name=Size\nkafka.log,type=Log,name=NumLogSegments\nkafka.log,type=Log,name=LogStartOffset\nkafka.log,type=Log,name=LogEndOffset", "committedDate": "2020-09-09T22:14:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk1NTI2Ng==", "url": "https://github.com/apache/kafka/pull/9276#discussion_r485955266", "bodyText": "I wasn't sure what information to add for this column of \"normal value\".\n\nFor date-based retention topics, it should roughly be sizeOfTopic/segmentSize\nBut for compacted topics, that isn't the case\nIf this is too high, it will mean more file handles.\nIf it is too high, it might inefficient (is this true?)\n\nAnyway, I wasn't sure what to put, so I left it simple.", "author": "wushujames", "createdAt": "2020-09-09T22:24:24Z", "path": "docs/ops.html", "diffHunk": "@@ -1129,6 +1128,26 @@ <h4><a id=\"remote_jmx\" href=\"#remote_jmx\">Security Considerations for Remote Mon\n         <td>kafka.server:type=BrokerTopicMetrics,name=ReassignmentBytesInPerSec</td>\n         <td></td>\n       </tr>\n+      <tr>\n+        <td>Size of a partition on disk (in bytes)</td>\n+        <td>kafka.log:type=Log,name=Size,topic=([-.\\w]+),partition=([0-9]+)</td>\n+        <td>The size of a partition on disk, measured in bytes.</td>\n+      </tr>\n+      <tr>\n+        <td>Number of log segments in a partition</td>\n+        <td>kafka.log:type=Log,name=NumLogSegments,topic=([-.\\w]+),partition=([0-9]+)</td>\n+        <td>The number of log segments in a partition.</td>", "originalCommit": "fd48631bbbf290fb3ac8642d93a289f69e83b679", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUxMTQwOQ==", "url": "https://github.com/apache/kafka/pull/9276#discussion_r535511409", "bodyText": "I think this is fine :)", "author": "guozhangwang", "createdAt": "2020-12-03T19:16:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk1NTI2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk1NTU2Nw==", "url": "https://github.com/apache/kafka/pull/9276#discussion_r485955567", "bodyText": "Is this the last committed offset? Or, is it uncommitted offsets? Meaning, if a producer appends a record there but the followers haven't yet acked it, will this value get incremented?\nDoes that level of detail matter, in the docs?", "author": "wushujames", "createdAt": "2020-09-09T22:25:18Z", "path": "docs/ops.html", "diffHunk": "@@ -1129,6 +1128,26 @@ <h4><a id=\"remote_jmx\" href=\"#remote_jmx\">Security Considerations for Remote Mon\n         <td>kafka.server:type=BrokerTopicMetrics,name=ReassignmentBytesInPerSec</td>\n         <td></td>\n       </tr>\n+      <tr>\n+        <td>Size of a partition on disk (in bytes)</td>\n+        <td>kafka.log:type=Log,name=Size,topic=([-.\\w]+),partition=([0-9]+)</td>\n+        <td>The size of a partition on disk, measured in bytes.</td>\n+      </tr>\n+      <tr>\n+        <td>Number of log segments in a partition</td>\n+        <td>kafka.log:type=Log,name=NumLogSegments,topic=([-.\\w]+),partition=([0-9]+)</td>\n+        <td>The number of log segments in a partition.</td>\n+      </tr>\n+      <tr>\n+        <td>First offset in a partition</td>\n+        <td>kafka.log:type=Log,name=LogStartOffset,topic=([-.\\w]+),partition=([0-9]+)</td>\n+        <td>The first offset in a partition.</td>\n+      </tr>\n+      <tr>\n+        <td>Last offset in a partition</td>\n+        <td>kafka.log:type=Log,name=LogEndOffset,topic=([-.\\w]+),partition=([0-9]+)</td>\n+        <td>The last offset in a partition.</td>", "originalCommit": "fd48631bbbf290fb3ac8642d93a289f69e83b679", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk1NjA2Mg==", "url": "https://github.com/apache/kafka/pull/9276#discussion_r485956062", "bodyText": "Tag @hachikuji", "author": "wushujames", "createdAt": "2020-09-09T22:26:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk1NTU2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUxMDk1OA==", "url": "https://github.com/apache/kafka/pull/9276#discussion_r535510958", "bodyText": "This is the last uncomitted offset: after the local append it would be incremented, not waiting for other replicas to ack.", "author": "guozhangwang", "createdAt": "2020-12-03T19:16:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk1NTU2Nw=="}], "type": "inlineReview"}, {"oid": "93d93a0686e04fc22ecf70a046f936d55ba2d16f", "url": "https://github.com/apache/kafka/commit/93d93a0686e04fc22ecf70a046f936d55ba2d16f", "message": "Merge remote-tracking branch 'origin/trunk' into add-to-docs-kafka-log-metrics", "committedDate": "2020-09-23T22:01:31Z", "type": "commit"}, {"oid": "062c134a833857e13dcd3099c01e42c7e25dced5", "url": "https://github.com/apache/kafka/commit/062c134a833857e13dcd3099c01e42c7e25dced5", "message": "Merge remote-tracking branch 'origin/trunk' into add-to-docs-kafka-log-metrics", "committedDate": "2020-10-09T18:42:24Z", "type": "commit"}, {"oid": "01bd15304026399663abed54702d40351c0ca7b2", "url": "https://github.com/apache/kafka/commit/01bd15304026399663abed54702d40351c0ca7b2", "message": "Merge remote-tracking branch 'upstream/trunk' into add-to-docs-kafka-log-metrics", "committedDate": "2020-12-03T01:53:21Z", "type": "commit"}]}