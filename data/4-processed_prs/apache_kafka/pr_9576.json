{"pr_number": 9576, "pr_title": "KAFKA-10685: strictly parsing the date/time format", "pr_createdAt": "2020-11-09T10:21:55Z", "pr_url": "https://github.com/apache/kafka/pull/9576", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDM5Nzg5Ng==", "url": "https://github.com/apache/kafka/pull/9576#discussion_r520397896", "bodyText": "It'll never be null or empty for the secondPart because we split(\"T\") without the 2nd argument, and it'll call with split(\"T\", 0). And from the javadoc:\n\nIf n is zero then the pattern will be applied as many times as possible, the array can have any length, and trailing empty strings will be discarded.\n\nhttps://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-", "author": "showuon", "createdAt": "2020-11-10T09:05:43Z", "path": "clients/src/main/java/org/apache/kafka/common/utils/Utils.java", "diffHunk": "@@ -1281,30 +1281,36 @@ private static byte checkRange(final byte i) {\n \n     /**\n      * Convert timestamp to an epoch value\n-     * @param timestamp to be converted\n-     * @return epoch value of a given timestamp\n-     * @throws ParseException for timestamp that doesn't follow ISO8601 format\n-     */\n-    public static long getDateTime(String timestamp) throws ParseException {\n+     * @param timestamp the timestamp to be converted, the accepted formats are: 2020-11-10T16:51:38.145, 2020-11-10T16:51:38.198+0800,\n+     *                  2020-11-10T16:51:38.198+08, 2020-11-10T16:51:38.199+0800, and 2020-11-10T16:51:38.199+08:00\n+     * @return epoch value of a given timestamp (i.e. the number of milliseconds since January 1, 1970, 00:00:00 GMT)\n+     * @throws ParseException for timestamp that doesn't follow ISO8601 format or the format is not expected\n+     */\n+    public static long getDateTime(String timestamp) throws ParseException, IllegalArgumentException {\n+        if (timestamp == null) {\n+            throw new IllegalArgumentException(\"Error parsing timestamp with null value\");\n+        }\n+\n         final String[] timestampParts = timestamp.split(\"T\");\n         if (timestampParts.length < 2) {\n             throw new ParseException(\"Error parsing timestamp. It does not contain a 'T' according to ISO8601 format\", timestamp.length());\n         }\n \n         final String secondPart = timestampParts[1];\n-        if (secondPart == null || secondPart.isEmpty()) {\n-            throw new ParseException(\"Error parsing timestamp. Time part after 'T' is null or empty\", timestamp.length());", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "8e2e4fae98112cd175aae8f3a140550e459d535d", "url": "https://github.com/apache/kafka/commit/8e2e4fae98112cd175aae8f3a140550e459d535d", "message": "KAFKA-10685: strictly parsing the date/time format", "committedDate": "2020-11-10T14:10:24Z", "type": "commit"}, {"oid": "8e2e4fae98112cd175aae8f3a140550e459d535d", "url": "https://github.com/apache/kafka/commit/8e2e4fae98112cd175aae8f3a140550e459d535d", "message": "KAFKA-10685: strictly parsing the date/time format", "committedDate": "2020-11-10T14:10:24Z", "type": "forcePushed"}]}