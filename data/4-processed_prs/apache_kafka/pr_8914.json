{"pr_number": 8914, "pr_title": "MINOR: Do not swallow exception when collecting PIDs", "pr_createdAt": "2020-06-23T11:08:11Z", "pr_url": "https://github.com/apache/kafka/pull/8914", "timeline": [{"oid": "64611b6f52fc1bf0badaac602759eb47e9858e7d", "url": "https://github.com/apache/kafka/commit/64611b6f52fc1bf0badaac602759eb47e9858e7d", "message": "MINOR: Do not swallow exception when collecting PIDs\n\nDuring Streams' system tests the PIDs of the Streams\nclients are collected. The method the collects the PIDs\nswallows any exception that might be thrown by the\n`ssh_capture()` function. Swallowing any exceptions\nmight make the investigation of failures harder,\nbecause no information about what happened are recorded.", "committedDate": "2020-06-23T10:57:36Z", "type": "commit"}, {"oid": "2c318afd6877587671ccde3c61a9b77a2fc09aec", "url": "https://github.com/apache/kafka/commit/2c318afd6877587671ccde3c61a9b77a2fc09aec", "message": "Log exception on DEBUG level", "committedDate": "2020-06-25T11:53:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTUxMDU3NQ==", "url": "https://github.com/apache/kafka/pull/8914#discussion_r445510575", "bodyText": "I need to do this because otherwise the callback int will throw a cast exception when an error occurred in ssh_capture() that returned an error message.", "author": "cadonna", "createdAt": "2020-06-25T12:11:04Z", "path": "tests/kafkatest/services/streams.py", "diffHunk": "@@ -215,8 +216,11 @@ def node(self):\n \n     def pids(self, node):\n         try:\n-            return [pid for pid in node.account.ssh_capture(\"cat \" + self.PID_FILE, callback=int)]\n-        except:\n+            pids = [pid for pid in node.account.ssh_capture(\"cat \" + self.PID_FILE, callback=str)]\n+            return [int(pid) for pid in pids]", "originalCommit": "2c318afd6877587671ccde3c61a9b77a2fc09aec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "911b7a2f0ab716750bd3875852e155e877b9c348", "url": "https://github.com/apache/kafka/commit/911b7a2f0ab716750bd3875852e155e877b9c348", "message": "Improve log message", "committedDate": "2020-06-25T12:11:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTUxMjAxMw==", "url": "https://github.com/apache/kafka/pull/8914#discussion_r445512013", "bodyText": "We just log the exception on debug level. I do not know how much this will help, but it is better than nothing.", "author": "cadonna", "createdAt": "2020-06-25T12:14:04Z", "path": "tests/kafkatest/services/streams.py", "diffHunk": "@@ -215,8 +216,10 @@ def node(self):\n \n     def pids(self, node):\n         try:\n-            return [pid for pid in node.account.ssh_capture(\"cat \" + self.PID_FILE, callback=int)]\n-        except:\n+            pids = [pid for pid in node.account.ssh_capture(\"cat \" + self.PID_FILE, callback=str)]\n+            return [int(pid) for pid in pids]\n+        except Exception, exception:\n+            self.logger.debug(str(exception))", "originalCommit": "911b7a2f0ab716750bd3875852e155e877b9c348", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}