{"pr_number": 9264, "pr_title": "KAFKA-5636: Add Sliding Windows documentation", "pr_createdAt": "2020-09-08T14:24:35Z", "pr_url": "https://github.com/apache/kafka/pull/9264", "timeline": [{"oid": "5001f2c71df450aca100ac77a2e6e1db2306ea4b", "url": "https://github.com/apache/kafka/commit/5001f2c71df450aca100ac77a2e6e1db2306ea4b", "message": "Adding sliding windows to docs", "committedDate": "2020-09-08T14:03:43Z", "type": "commit"}, {"oid": "69235312b1a1dca6a0031eb405e5182a8671d12c", "url": "https://github.com/apache/kafka/commit/69235312b1a1dca6a0031eb405e5182a8671d12c", "message": "SlidingWindows fixes", "committedDate": "2020-09-08T14:12:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMxNDcxMw==", "url": "https://github.com/apache/kafka/pull/9264#discussion_r485314713", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        <code class=\"docutils literal\"><span class=\"pre\">JoinWindows</span></code> class, and windowed aggregations, specified by using the code class=\"docutils literal\"><span class=\"pre\">SlidingWindows</span></code> class.</p>\n          \n          \n            \n                                        <code class=\"docutils literal\"><span class=\"pre\">JoinWindows</span></code> class, and windowed aggregations, specified by using the <code class=\"docutils literal\"><span class=\"pre\">SlidingWindows</span></code> class.</p>", "author": "ableegoldman", "createdAt": "2020-09-09T03:26:19Z", "path": "docs/streams/developer-guide/dsl-api.html", "diffHunk": "@@ -3286,13 +3306,33 @@ <h5><a class=\"toc-backref\" href=\"#id34\">KTable-KTable Foreign-Key\n                     <div class=\"section\" id=\"sliding-time-windows\">\n                         <span id=\"windowing-sliding\"></span><h5><a class=\"toc-backref\" href=\"#id22\">Sliding time windows</a><a class=\"headerlink\" href=\"#sliding-time-windows\" title=\"Permalink to this headline\"></a></h5>\n                         <p>Sliding windows are actually quite different from hopping and tumbling windows.  In Kafka Streams, sliding windows\n-                            are used only for <a class=\"reference internal\" href=\"#streams-developer-guide-dsl-joins\"><span class=\"std std-ref\">join operations</span></a>, and can be specified through the\n-                            <code class=\"docutils literal\"><span class=\"pre\">JoinWindows</span></code> class.</p>\n-                        <p>A sliding window models a fixed-size window that slides continuously over the time axis; here, two data records are\n+                            are used for <a class=\"reference internal\" href=\"#streams-developer-guide-dsl-joins\"><span class=\"std std-ref\">join operations</span></a>, specified by using the\n+                            <code class=\"docutils literal\"><span class=\"pre\">JoinWindows</span></code> class, and windowed aggregations, specified by using the code class=\"docutils literal\"><span class=\"pre\">SlidingWindows</span></code> class.</p>", "originalCommit": "69235312b1a1dca6a0031eb405e5182a8671d12c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMxNTEwNQ==", "url": "https://github.com/apache/kafka/pull/9264#discussion_r485315105", "bodyText": "I rendered the site locally and there's something weird going on here. Seems like you can't use literal \". Look at what the other captions do, seems like it might be &#8220;", "author": "ableegoldman", "createdAt": "2020-09-09T03:27:50Z", "path": "docs/streams/developer-guide/dsl-api.html", "diffHunk": "@@ -3286,13 +3306,33 @@ <h5><a class=\"toc-backref\" href=\"#id34\">KTable-KTable Foreign-Key\n                     <div class=\"section\" id=\"sliding-time-windows\">\n                         <span id=\"windowing-sliding\"></span><h5><a class=\"toc-backref\" href=\"#id22\">Sliding time windows</a><a class=\"headerlink\" href=\"#sliding-time-windows\" title=\"Permalink to this headline\"></a></h5>\n                         <p>Sliding windows are actually quite different from hopping and tumbling windows.  In Kafka Streams, sliding windows\n-                            are used only for <a class=\"reference internal\" href=\"#streams-developer-guide-dsl-joins\"><span class=\"std std-ref\">join operations</span></a>, and can be specified through the\n-                            <code class=\"docutils literal\"><span class=\"pre\">JoinWindows</span></code> class.</p>\n-                        <p>A sliding window models a fixed-size window that slides continuously over the time axis; here, two data records are\n+                            are used for <a class=\"reference internal\" href=\"#streams-developer-guide-dsl-joins\"><span class=\"std std-ref\">join operations</span></a>, specified by using the\n+                            <code class=\"docutils literal\"><span class=\"pre\">JoinWindows</span></code> class, and windowed aggregations, specified by using the code class=\"docutils literal\"><span class=\"pre\">SlidingWindows</span></code> class.</p>\n+                        <p>A sliding window models a fixed-size window that slides continuously over the time axis. In this model, two data records are\n                             said to be included in the same window if (in the case of symmetric windows) the difference of their timestamps is\n-                            within the window size.  Thus, sliding windows are not aligned to the epoch, but to the data record timestamps.  In\n-                            contrast to hopping and tumbling windows, the lower and upper window time interval bounds of sliding windows are\n-                            <em>both inclusive</em>.</p>\n+                            within the window size. As a sliding window moves along the time axis, records may fall into multiple snapshots of\n+                            the sliding window, but each unique combination of records appears only in one sliding window snapshot.</p>\n+                        <p>The following code defines a sliding window with a time difference of 10 minutes and a grace period of 30 minutes:</p>\n+                        <div class=\"highlight-java\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">org.apache.kafka.streams.kstream.SlidingWindows</span><span class=\"o\">;</span>\n+\n+<span class=\"c1\">// A sliding time window with a time difference of 10 minutes and grace period of 30 minutes</span>\n+<span class=\"kt\">Duration</span> <span class=\"n\">timeDifferenceMs</span> <span class=\"o\">=</span> <span class=\"n\">Duration</span><span class=\"o\">.</span><span class=\"na\">ofMinutes</span><span class=\"o\">(</span><span class=\"mi\">10</span><span class=\"o\">);</span>\n+<span class=\"kt\">Duration</span> <span class=\"n\">gracePeriodMs</span> <span class=\"o\">=</span> <span class=\"n\">Duration</span><span class=\"o\">.</span><span class=\"na\">ofMinutes</span><span class=\"o\">(</span><span class=\"mi\">30</span><span class=\"o\">);</span>\n+<span class=\"n\">SlidingWindows</span><span class=\"o\">.</span><span class=\"na\">withTimeDifferenceAndGrace</span><span class=\"o\">(</span><span class=\"n\">timeDifferenceMs</span><span class=\"o\">,</span><span class=\"n\">gracePeriodMs</span><span class=\"o\">);</span>\n+</pre></div>\n+                         <div class=\"admonition note\">\n+                             <p><b>Note</b></p>\n+                             <p>Sliding windows <em>require</em> that you set a grace period, as shown above. For time windows and session windows,\n+                                 setting the grace period is optional and defaults to 24 hours.</p>\n+                         </div>\n+                         <div class=\"figure align-center\" id=\"id35\">\n+                             <img class=\"centered\" src=\"/{{version}}/images/streams-sliding-windows.png\">\n+                             <p class=\"caption\"><span class=\"caption-text\">This diagram shows windowing a stream of data records with sliding windows. The overlap of\n+                                 the sliding window snapshots varies depending on the record times. In this diagram, the time numbers represent miliseconds. For example,\n+                                 t=5 means \u201cat the five milisecond mark\u201d.</span></p>", "originalCommit": "69235312b1a1dca6a0031eb405e5182a8671d12c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "502663f44addef2c15c3c2957ae0442e1c135d4e", "url": "https://github.com/apache/kafka/commit/502663f44addef2c15c3c2957ae0442e1c135d4e", "message": "Sliding windows in upgrade guide + sophie's fixes", "committedDate": "2020-09-09T14:12:26Z", "type": "commit"}]}