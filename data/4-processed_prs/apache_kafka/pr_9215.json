{"pr_number": 9215, "pr_title": "KAFKA-10133: MM2 readme update on config", "pr_createdAt": "2020-08-24T21:34:14Z", "pr_url": "https://github.com/apache/kafka/pull/9215", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3MDY1NQ==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r476170655", "bodyText": "I think you are referring to the default values of the Connect configuration properties -- maybe use \"default\" in this sentence to make that more clear.", "author": "ryannedolan", "createdAt": "2020-08-25T04:47:58Z", "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+### General Kafka Connect Config\n+All Kafka Connect, Source Connector, Sink Connector configs, as defined in [Kafka official doc] (https://kafka.apache.org/documentation/#connectconfigs), can be \n+directly used in MM2 configuration without prefix in the configuration name. As the starting point, most of these configs may work well with the exception of `tasks.max`.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU2NzU5OQ==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r476567599", "bodyText": "done", "author": "ning2008wisc", "createdAt": "2020-08-25T16:10:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjE3MDY1NQ=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODMwNzEyNw==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478307127", "bodyText": "We should mention this describes configuring MM2 in driver mode?", "author": "mimaison", "createdAt": "2020-08-27T10:09:27Z", "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU4MzE0NQ==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478583145", "bodyText": "\"driver mode\" means dedicated MM2 cluster? If yes, any difference on configuration name (e.g. prefix) between running dedicated MM2 cluster or MM2 on existing KC cluster?", "author": "ning2008wisc", "createdAt": "2020-08-27T17:32:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODMwNzEyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE5NTk4Ng==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r482195986", "bodyText": "Yes driver mode is dedicated.\nIn Kafka Connect mode, the configuration is a bit different as you can't use the backup->primary syntax.", "author": "mimaison", "createdAt": "2020-09-02T16:16:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODMwNzEyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIxNDAzNQ==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r482214035", "bodyText": "added 2 sentences as below for clarification. If need for a separate note each section about config example on KC, please let me know :)", "author": "ning2008wisc", "createdAt": "2020-09-02T16:45:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODMwNzEyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNTAyMg==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478425022", "bodyText": "Can we also cover Admin here?", "author": "mimaison", "createdAt": "2020-08-27T13:37:31Z", "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+### General Kafka Connect Config\n+All Kafka Connect, Source Connector, Sink Connector configs, as defined in [Kafka official doc] (https://kafka.apache.org/documentation/#connectconfigs), can be \n+directly used in MM2 configuration without prefix in the configuration name. As the starting point, most of these default configs may work well with the exception of `tasks.max`.\n+\n+In order to evenly distribute the workload across more than one MM2 instance, it is advised to set `tasks.max` at least to 2 or even larger depending on the hardware resources\n+and the total number partitions to be replicated.\n+\n+### Kafka Connect Config for a Specific Connector\n+If needed, Kafka Connect worker-level configs could be even specified \"per connector\", which needs to follow the format of `cluster_alias.config_name` in MM2 configuration. For example,\n+ \n+    backup.ssl.truststore.location = /usr/lib/jvm/zulu-8-amd64/jre/lib/security/cacerts // SSL cert location\n+    backup.security.protocol = SSL // if target cluster needs SSL to send message\n+    \n+### MM2 configs for a Specific Connector\n+MM2 itself has many configs to control how MM2 behaves. To override those default values, add the config name by the format of `source_cluster_alias->target_cluster_alias.config_name` in MM2 configuration. For example,\n+    \n+    backup->primary.enabled = false // set to false if one-way replication is desired\n+    primary->backup.topics.blacklist = topics_to_blacklist\n+    primary->backup.emit.heartbeats.enabled = false\n+    primary->backup.sync.group.offsets = true \n+\n+### Producer / Consumer Config used by MM2", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU4MzEwNw==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478583107", "bodyText": "covered Admin in the latest commit", "author": "ning2008wisc", "createdAt": "2020-08-27T17:32:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNTAyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNTQxNw==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478425417", "bodyText": "We can replace the 2nd MM2 by it", "author": "mimaison", "createdAt": "2020-08-27T13:38:06Z", "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+### General Kafka Connect Config\n+All Kafka Connect, Source Connector, Sink Connector configs, as defined in [Kafka official doc] (https://kafka.apache.org/documentation/#connectconfigs), can be \n+directly used in MM2 configuration without prefix in the configuration name. As the starting point, most of these default configs may work well with the exception of `tasks.max`.\n+\n+In order to evenly distribute the workload across more than one MM2 instance, it is advised to set `tasks.max` at least to 2 or even larger depending on the hardware resources\n+and the total number partitions to be replicated.\n+\n+### Kafka Connect Config for a Specific Connector\n+If needed, Kafka Connect worker-level configs could be even specified \"per connector\", which needs to follow the format of `cluster_alias.config_name` in MM2 configuration. For example,\n+ \n+    backup.ssl.truststore.location = /usr/lib/jvm/zulu-8-amd64/jre/lib/security/cacerts // SSL cert location\n+    backup.security.protocol = SSL // if target cluster needs SSL to send message\n+    \n+### MM2 configs for a Specific Connector\n+MM2 itself has many configs to control how MM2 behaves. To override those default values, add the config name by the format of `source_cluster_alias->target_cluster_alias.config_name` in MM2 configuration. For example,", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU4MzA3OA==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478583078", "bodyText": "done", "author": "ning2008wisc", "createdAt": "2020-08-27T17:31:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNTQxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQzMDkwMQ==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478430901", "bodyText": "The link does not render correctly, remove the space between ] (", "author": "mimaison", "createdAt": "2020-08-27T13:45:50Z", "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,38 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+### General Kafka Connect Config\n+All Kafka Connect, Source Connector, Sink Connector configs, as defined in [Kafka official doc] (https://kafka.apache.org/documentation/#connectconfigs), can be ", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU4MzA3Ng==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r478583076", "bodyText": "done", "author": "ning2008wisc", "createdAt": "2020-08-27T17:31:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQzMDkwMQ=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY5ODYyMg==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r483698622", "bodyText": "The link does not render, it's missing the opening [.\nAlso the correct link to the KIP is https://cwiki.apache.org/confluence/display/KAFKA/KIP-382%3A+MirrorMaker+2.0", "author": "mimaison", "createdAt": "2020-09-04T15:37:51Z", "path": "connect/mirror/README.md", "diffHunk": "@@ -141,7 +141,40 @@ nearby clusters.\n N.B. that the `--clusters` parameter is not technically required here. MM2 will work fine without it; however, throughput may suffer from \"producer lag\" between\n data centers, and you may incur unnecessary data transfer costs.\n \n-## Shared configuration\n+## Configuration\n+The following sections target for dedicated MM2 cluster. If running MM2 in a Connect cluster, please refer to KIP-382: MirrorMaker 2.0](https://cwiki.apache.org/confluence/display/KAFKA/KIP-382) for guidance.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzcyNzc4OA==", "url": "https://github.com/apache/kafka/pull/9215#discussion_r483727788", "bodyText": "resolved", "author": "ning2008wisc", "createdAt": "2020-09-04T16:26:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY5ODYyMg=="}], "type": "inlineReview"}, {"oid": "0cd9c9ec6bcd70ad00b62126a0caa409df2bfb19", "url": "https://github.com/apache/kafka/commit/0cd9c9ec6bcd70ad00b62126a0caa409df2bfb19", "message": "KAFKA-10133: MM2 readme update on config", "committedDate": "2020-09-04T16:25:26Z", "type": "commit"}, {"oid": "0cd9c9ec6bcd70ad00b62126a0caa409df2bfb19", "url": "https://github.com/apache/kafka/commit/0cd9c9ec6bcd70ad00b62126a0caa409df2bfb19", "message": "KAFKA-10133: MM2 readme update on config", "committedDate": "2020-09-04T16:25:26Z", "type": "forcePushed"}]}