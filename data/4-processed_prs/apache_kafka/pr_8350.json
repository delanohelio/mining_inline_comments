{"pr_number": 8350, "pr_title": "KAFKA-9760: Add KIP-447 protocol change to upgrade notes", "pr_createdAt": "2020-03-25T17:28:00Z", "pr_url": "https://github.com/apache/kafka/pull/8350", "timeline": [{"oid": "f093179a62e1b86f341af909bbdd6b50d2494ef1", "url": "https://github.com/apache/kafka/commit/f093179a62e1b86f341af909bbdd6b50d2494ef1", "message": "447 protocol change", "committedDate": "2020-03-25T17:23:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxOTcxOQ==", "url": "https://github.com/apache/kafka/pull/8350#discussion_r398219719", "bodyText": "into a changelog stream -> into a KTable ?", "author": "mjsax", "createdAt": "2020-03-25T22:54:18Z", "path": "docs/upgrade.html", "diffHunk": "@@ -30,6 +30,15 @@ <h5><a id=\"upgrade_250_notable\" href=\"#upgrade_250_notable\">Notable changes in 2\n         <code>zookeeper.session.timeout.ms</code> has been increased from 6s to 18s and\n         <code>replica.lag.time.max.ms</code> from 10s to 30s.</li>\n     <li>New DSL operator <code>cogroup()</code> has been added for aggregating multiple streams together at once.</li>\n+    <li>Added a new <code>KStream.toTable()</code> API to translate an input event stream into a changelog stream.</li>", "originalCommit": "f093179a62e1b86f341af909bbdd6b50d2494ef1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxOTgzOA==", "url": "https://github.com/apache/kafka/pull/8350#discussion_r398219838", "bodyText": "It this worth calling out in the top level notes?", "author": "mjsax", "createdAt": "2020-03-25T22:54:40Z", "path": "docs/upgrade.html", "diffHunk": "@@ -30,6 +30,15 @@ <h5><a id=\"upgrade_250_notable\" href=\"#upgrade_250_notable\">Notable changes in 2\n         <code>zookeeper.session.timeout.ms</code> has been increased from 6s to 18s and\n         <code>replica.lag.time.max.ms</code> from 10s to 30s.</li>\n     <li>New DSL operator <code>cogroup()</code> has been added for aggregating multiple streams together at once.</li>\n+    <li>Added a new <code>KStream.toTable()</code> API to translate an input event stream into a changelog stream.</li>\n+    <li>Added a new Serde type <code>Void</code> to represent null keys or null values from input topic.</li>", "originalCommit": "f093179a62e1b86f341af909bbdd6b50d2494ef1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcwODg3Ng==", "url": "https://github.com/apache/kafka/pull/8350#discussion_r398708876", "bodyText": "Well, I guess it does no harm either. At least, KIP changes are normally considered major.", "author": "abbccdda", "createdAt": "2020-03-26T16:24:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxOTgzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcyMDU3NA==", "url": "https://github.com/apache/kafka/pull/8350#discussion_r398720574", "bodyText": "We never listed all KIPs at the top-level summary in the past. Only in the Streams upgrade docs we list all KS related KIPs. But if you think it's important for Kafka users in general we can also keep it.", "author": "mjsax", "createdAt": "2020-03-26T16:39:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIxOTgzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIyMDA4MQ==", "url": "https://github.com/apache/kafka/pull/8350#discussion_r398220081", "bodyText": "semantic[s]\nremove \"in Kafka\" (where else :) )", "author": "mjsax", "createdAt": "2020-03-25T22:55:19Z", "path": "docs/upgrade.html", "diffHunk": "@@ -30,6 +30,15 @@ <h5><a id=\"upgrade_250_notable\" href=\"#upgrade_250_notable\">Notable changes in 2\n         <code>zookeeper.session.timeout.ms</code> has been increased from 6s to 18s and\n         <code>replica.lag.time.max.ms</code> from 10s to 30s.</li>\n     <li>New DSL operator <code>cogroup()</code> has been added for aggregating multiple streams together at once.</li>\n+    <li>Added a new <code>KStream.toTable()</code> API to translate an input event stream into a changelog stream.</li>\n+    <li>Added a new Serde type <code>Void</code> to represent null keys or null values from input topic.</li>\n+    <li>Deprecated <code>UsePreviousTimeOnInvalidTimestamp</code> and replaced it with <code>UsePartitionTimeOnInvalidTimeStamp</code>.</li>\n+    <li>In Kafka 2.5.0, we improved EOS semantic in Kafka by adding a pending offset fencing mechanism and stronger transactional commit", "originalCommit": "f093179a62e1b86f341af909bbdd6b50d2494ef1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIyMDg2Nw==", "url": "https://github.com/apache/kafka/pull/8350#discussion_r398220867", "bodyText": "The impact is that now a consumer-producer group could use the subscription mode to collaborate under EOS instead of manual partition assignment.\nThis is a quite complex sentence. Can we reword it? What is \"subscription mode\"", "author": "mjsax", "createdAt": "2020-03-25T22:57:27Z", "path": "docs/upgrade.html", "diffHunk": "@@ -30,6 +30,15 @@ <h5><a id=\"upgrade_250_notable\" href=\"#upgrade_250_notable\">Notable changes in 2\n         <code>zookeeper.session.timeout.ms</code> has been increased from 6s to 18s and\n         <code>replica.lag.time.max.ms</code> from 10s to 30s.</li>\n     <li>New DSL operator <code>cogroup()</code> has been added for aggregating multiple streams together at once.</li>\n+    <li>Added a new <code>KStream.toTable()</code> API to translate an input event stream into a changelog stream.</li>\n+    <li>Added a new Serde type <code>Void</code> to represent null keys or null values from input topic.</li>\n+    <li>Deprecated <code>UsePreviousTimeOnInvalidTimestamp</code> and replaced it with <code>UsePartitionTimeOnInvalidTimeStamp</code>.</li>\n+    <li>In Kafka 2.5.0, we improved EOS semantic in Kafka by adding a pending offset fencing mechanism and stronger transactional commit\n+        consistency check. The impact is that now a consumer-producer group could use the subscription mode to collaborate", "originalCommit": "f093179a62e1b86f341af909bbdd6b50d2494ef1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIyMTM4Nw==", "url": "https://github.com/apache/kafka/pull/8350#discussion_r398221387", "bodyText": "nit: don't use EOS but exaclty-once semantics\nskeleton -> example\nmaybe replace under <code>examples</code> folder with a link to GitHub file?", "author": "mjsax", "createdAt": "2020-03-25T22:58:54Z", "path": "docs/upgrade.html", "diffHunk": "@@ -30,6 +30,15 @@ <h5><a id=\"upgrade_250_notable\" href=\"#upgrade_250_notable\">Notable changes in 2\n         <code>zookeeper.session.timeout.ms</code> has been increased from 6s to 18s and\n         <code>replica.lag.time.max.ms</code> from 10s to 30s.</li>\n     <li>New DSL operator <code>cogroup()</code> has been added for aggregating multiple streams together at once.</li>\n+    <li>Added a new <code>KStream.toTable()</code> API to translate an input event stream into a changelog stream.</li>\n+    <li>Added a new Serde type <code>Void</code> to represent null keys or null values from input topic.</li>\n+    <li>Deprecated <code>UsePreviousTimeOnInvalidTimestamp</code> and replaced it with <code>UsePartitionTimeOnInvalidTimeStamp</code>.</li>\n+    <li>In Kafka 2.5.0, we improved EOS semantic in Kafka by adding a pending offset fencing mechanism and stronger transactional commit\n+        consistency check. The impact is that now a consumer-producer group could use the subscription mode to collaborate\n+        under EOS instead of manual partition assignment. We also added a new EOS skeleton code under <code>examples</code> folder, feel", "originalCommit": "f093179a62e1b86f341af909bbdd6b50d2494ef1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODIyMjAwNw==", "url": "https://github.com/apache/kafka/pull/8350#discussion_r398222007", "bodyText": "feel free to have a try and use it as a starting point (I would remove this -- upgrade note should be written in a neutral / fact style manner) -- and examples always have this purpose.", "author": "mjsax", "createdAt": "2020-03-25T23:00:35Z", "path": "docs/upgrade.html", "diffHunk": "@@ -30,6 +30,15 @@ <h5><a id=\"upgrade_250_notable\" href=\"#upgrade_250_notable\">Notable changes in 2\n         <code>zookeeper.session.timeout.ms</code> has been increased from 6s to 18s and\n         <code>replica.lag.time.max.ms</code> from 10s to 30s.</li>\n     <li>New DSL operator <code>cogroup()</code> has been added for aggregating multiple streams together at once.</li>\n+    <li>Added a new <code>KStream.toTable()</code> API to translate an input event stream into a changelog stream.</li>\n+    <li>Added a new Serde type <code>Void</code> to represent null keys or null values from input topic.</li>\n+    <li>Deprecated <code>UsePreviousTimeOnInvalidTimestamp</code> and replaced it with <code>UsePartitionTimeOnInvalidTimeStamp</code>.</li>\n+    <li>In Kafka 2.5.0, we improved EOS semantic in Kafka by adding a pending offset fencing mechanism and stronger transactional commit\n+        consistency check. The impact is that now a consumer-producer group could use the subscription mode to collaborate\n+        under EOS instead of manual partition assignment. We also added a new EOS skeleton code under <code>examples</code> folder, feel\n+        free to have a try and use it as a starting point. Check out", "originalCommit": "f093179a62e1b86f341af909bbdd6b50d2494ef1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8e26e334d9b6fa9e99ffcaa2ff86ee6fc267779d", "url": "https://github.com/apache/kafka/commit/8e26e334d9b6fa9e99ffcaa2ff86ee6fc267779d", "message": "address comments", "committedDate": "2020-03-26T16:31:02Z", "type": "commit"}]}