{"pr_number": 8482, "pr_title": "KAFKA-9863: update the deprecated --zookeeper option in the documentation into --bootstrap-server", "pr_createdAt": "2020-04-14T11:28:19Z", "pr_url": "https://github.com/apache/kafka/pull/8482", "timeline": [{"oid": "392c6406692a4b9649aa1a7602a11657d13bed46", "url": "https://github.com/apache/kafka/commit/392c6406692a4b9649aa1a7602a11657d13bed46", "message": "update the deprecated --zookeeper option in the documentation into --bootstrap-server", "committedDate": "2020-04-14T11:22:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE2MTIzNg==", "url": "https://github.com/apache/kafka/pull/8482#discussion_r408161236", "bodyText": "This specific change should not be made because the paragraph above is referring specifically to configuration \"before starting brokers for bootstrapping\".  However, since it is talking about storing sensitive information, it is likely that this would be a TLS-enabled Zookeeper quorum.  So I would suggest:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              &gt; bin/kafka-configs.sh --zookeeper localhost:2181 --entity-type brokers --entity-name 0 --alter --add-config\n          \n          \n            \n              &gt; bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-name 0 --alter --add-config\n          \n          \n            \n              &gt; bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --entity-type brokers --entity-name 0 --alter --add-config", "author": "rondagostino", "createdAt": "2020-04-14T14:03:03Z", "path": "docs/configuration.html", "diffHunk": "@@ -100,7 +100,7 @@ <h5>Updating Password Configs in ZooKeeper Before Starting Brokers</h5>\n   on broker 0:\n \n   <pre class=\"brush: bash;\">\n-  &gt; bin/kafka-configs.sh --zookeeper localhost:2181 --entity-type brokers --entity-name 0 --alter --add-config\n+  &gt; bin/kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-name 0 --alter --add-config", "originalCommit": "392c6406692a4b9649aa1a7602a11657d13bed46", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2NjM1OQ==", "url": "https://github.com/apache/kafka/pull/8482#discussion_r408666359", "bodyText": "Updated. Thanks.", "author": "showuon", "createdAt": "2020-04-15T08:23:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE2MTIzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4NDAwOA==", "url": "https://github.com/apache/kafka/pull/8482#discussion_r408184008", "bodyText": "Same thing here and the examples below: this is about bootstrapping credentials.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                > bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice\n          \n          \n            \n                > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice\n          \n          \n            \n                > bin/kafka-configs.sh --zookeeper localhost:2182 --zk-tls-config-file zk_tls_config.properties --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice", "author": "rondagostino", "createdAt": "2020-04-14T14:32:32Z", "path": "docs/security.html", "diffHunk": "@@ -754,22 +754,22 @@ <h3><a id=\"security_sasl\" href=\"#security_sasl\">7.3 Authentication using SASL</a\n         credentials will be used to authenticate new connections.</p>\n         <p>Create SCRAM credentials for user <i>alice</i> with password <i>alice-secret</i>:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice", "originalCommit": "392c6406692a4b9649aa1a7602a11657d13bed46", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2NjQzMw==", "url": "https://github.com/apache/kafka/pull/8482#discussion_r408666433", "bodyText": "Updated. Thanks.", "author": "showuon", "createdAt": "2020-04-15T08:23:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4NDAwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4NDU2MQ==", "url": "https://github.com/apache/kafka/pull/8482#discussion_r408184561", "bodyText": "And here...", "author": "rondagostino", "createdAt": "2020-04-14T14:33:14Z", "path": "docs/security.html", "diffHunk": "@@ -754,22 +754,22 @@ <h3><a id=\"security_sasl\" href=\"#security_sasl\">7.3 Authentication using SASL</a\n         credentials will be used to authenticate new connections.</p>\n         <p>Create SCRAM credentials for user <i>alice</i> with password <i>alice-secret</i>:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice\n         </pre>\n         <p>The default iteration count of 4096 is used if iterations are not specified. A random salt is created\n         and the SCRAM identity consisting of salt, iterations, StoredKey and ServerKey are stored in Zookeeper.\n         See <a href=\"https://tools.ietf.org/html/rfc5802\">RFC 5802</a> for details on SCRAM identity and the individual fields.\n         <p>The following examples also require a user <i>admin</i> for inter-broker communication which can be created using:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config 'SCRAM-SHA-256=[password=admin-secret],SCRAM-SHA-512=[password=admin-secret]' --entity-type users --entity-name admin\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-256=[password=admin-secret],SCRAM-SHA-512=[password=admin-secret]' --entity-type users --entity-name admin", "originalCommit": "392c6406692a4b9649aa1a7602a11657d13bed46", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4NTAxNQ==", "url": "https://github.com/apache/kafka/pull/8482#discussion_r408185015", "bodyText": "And here...", "author": "rondagostino", "createdAt": "2020-04-14T14:33:50Z", "path": "docs/security.html", "diffHunk": "@@ -754,22 +754,22 @@ <h3><a id=\"security_sasl\" href=\"#security_sasl\">7.3 Authentication using SASL</a\n         credentials will be used to authenticate new connections.</p>\n         <p>Create SCRAM credentials for user <i>alice</i> with password <i>alice-secret</i>:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice\n         </pre>\n         <p>The default iteration count of 4096 is used if iterations are not specified. A random salt is created\n         and the SCRAM identity consisting of salt, iterations, StoredKey and ServerKey are stored in Zookeeper.\n         See <a href=\"https://tools.ietf.org/html/rfc5802\">RFC 5802</a> for details on SCRAM identity and the individual fields.\n         <p>The following examples also require a user <i>admin</i> for inter-broker communication which can be created using:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config 'SCRAM-SHA-256=[password=admin-secret],SCRAM-SHA-512=[password=admin-secret]' --entity-type users --entity-name admin\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-256=[password=admin-secret],SCRAM-SHA-512=[password=admin-secret]' --entity-type users --entity-name admin\n         </pre>\n         <p>Existing credentials may be listed using the <i>--describe</i> option:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --describe --entity-type users --entity-name alice\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users --entity-name alice", "originalCommit": "392c6406692a4b9649aa1a7602a11657d13bed46", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2NjQ3Ng==", "url": "https://github.com/apache/kafka/pull/8482#discussion_r408666476", "bodyText": "Updated. Thanks.", "author": "showuon", "createdAt": "2020-04-15T08:23:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4NTAxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4NTEyOQ==", "url": "https://github.com/apache/kafka/pull/8482#discussion_r408185129", "bodyText": "...and here.", "author": "rondagostino", "createdAt": "2020-04-14T14:33:59Z", "path": "docs/security.html", "diffHunk": "@@ -754,22 +754,22 @@ <h3><a id=\"security_sasl\" href=\"#security_sasl\">7.3 Authentication using SASL</a\n         credentials will be used to authenticate new connections.</p>\n         <p>Create SCRAM credentials for user <i>alice</i> with password <i>alice-secret</i>:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-256=[iterations=8192,password=alice-secret],SCRAM-SHA-512=[password=alice-secret]' --entity-type users --entity-name alice\n         </pre>\n         <p>The default iteration count of 4096 is used if iterations are not specified. A random salt is created\n         and the SCRAM identity consisting of salt, iterations, StoredKey and ServerKey are stored in Zookeeper.\n         See <a href=\"https://tools.ietf.org/html/rfc5802\">RFC 5802</a> for details on SCRAM identity and the individual fields.\n         <p>The following examples also require a user <i>admin</i> for inter-broker communication which can be created using:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config 'SCRAM-SHA-256=[password=admin-secret],SCRAM-SHA-512=[password=admin-secret]' --entity-type users --entity-name admin\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --add-config 'SCRAM-SHA-256=[password=admin-secret],SCRAM-SHA-512=[password=admin-secret]' --entity-type users --entity-name admin\n         </pre>\n         <p>Existing credentials may be listed using the <i>--describe</i> option:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --describe --entity-type users --entity-name alice\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --describe --entity-type users --entity-name alice\n         </pre>\n         <p>Credentials may be deleted for one or more SCRAM mechanisms using the <i>--delete</i> option:\n         <pre class=\"brush: bash;\">\n-    > bin/kafka-configs.sh --zookeeper localhost:2181 --alter --delete-config 'SCRAM-SHA-512' --entity-type users --entity-name alice\n+    > bin/kafka-configs.sh --bootstrap-server localhost:9092 --alter --delete-config 'SCRAM-SHA-512' --entity-type users --entity-name alice", "originalCommit": "392c6406692a4b9649aa1a7602a11657d13bed46", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY2NjUxNA==", "url": "https://github.com/apache/kafka/pull/8482#discussion_r408666514", "bodyText": "Updated. Thanks.", "author": "showuon", "createdAt": "2020-04-15T08:23:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE4NTEyOQ=="}], "type": "inlineReview"}, {"oid": "bcc815508e75b8b9ed9b277e9e9d937d0ea1ca29", "url": "https://github.com/apache/kafka/commit/bcc815508e75b8b9ed9b277e9e9d937d0ea1ca29", "message": "address reviewer's comments\n\n1. keep --zookeeper argument in the places that is talking about configure zk before broker up\n2. use --zookeeper --zk-tls-config-file when doing some security related action, ex: update password", "committedDate": "2020-04-15T08:16:27Z", "type": "commit"}]}