{"pr_number": 9459, "pr_title": "MINOR: Add some class javadoc to Admin client", "pr_createdAt": "2020-10-20T13:13:14Z", "pr_url": "https://github.com/apache/kafka/pull/9459", "timeline": [{"oid": "266bfa333399fdc7c6dcc95c8105ef47584b01e3", "url": "https://github.com/apache/kafka/commit/266bfa333399fdc7c6dcc95c8105ef47584b01e3", "message": "MINOR: Add some class javadoc to Admin client", "committedDate": "2020-10-20T13:12:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUwMzU3Nw==", "url": "https://github.com/apache/kafka/pull/9459#discussion_r508503577", "bodyText": "request \"got\" re-sent to the control", "author": "chia7712", "createdAt": "2020-10-20T13:30:40Z", "path": "clients/src/main/java/org/apache/kafka/clients/admin/Admin.java", "diffHunk": "@@ -45,15 +45,75 @@\n /**\n  * The administrative client for Kafka, which supports managing and inspecting topics, brokers, configurations and ACLs.\n  * <p>\n+ * Instances returned from the {@code create} methods of this interface are guaranteed to be thread safe.\n+ * <p>\n+ * The operations exposed by Admin follow a consistent pattern:\n+ * <ul>\n+ *     <li>Admin instances should be created using {@link Admin#create(Properties)} or {@link Admin#create(Map)}</li>\n+ *     <li>Each operation typically has two overloaded methods, one which uses a default set of options and an\n+ *     overloaded method where the last parameter is an explicit options object.\n+ *     <li>The operation method's first parameter is a {@code Collection} of items to perform\n+ *     the operation on. Batching multiple requests into a single call is more efficient and should be\n+ *     preferred over multiple calls to the same method.\n+ *     <li>The operation methods execute asynchronously.\n+ *     <li>Each {@code xxx} operation method returns an {@code XxxResult} class with methods which expose\n+ *     {@link org.apache.kafka.common.KafkaFuture KafkaFutures}\n+ *     for accessing the result(s) of the operation.\n+ *     <li>Typically an {@code all()} method is provided for getting the overall success/failure of the batch and a\n+ *     {@code values()} method provided access to each item in a request batch.\n+ *     Other methods may also be provided.\n+ *     <li>For synchronous behaviour use {@link org.apache.kafka.common.KafkaFuture#get}\n+ * <p>\n+ * Here is a simple example of using an Admin client instance to create a new topic:\n+ * <pre>\n+ * {@code\n+ * Properties props = new Properties();\n+ * props.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, \"localhost:9092\");\n+ *\n+ * try (Admin admin = Admin.create(props)) {\n+ *   String topicName = \"my-topic\";\n+ *   int partitions = 12;\n+ *   short replicationFactor = 3;\n+ *   // Create a compacted topic\n+ *   CreateTopicsResult result = admin.createTopics(Collections.singleton(\n+ *     new NewTopic(topicName, partitions, replicationFactor)\n+ *       .configs(Collections.singletonMap(TopicConfig.CLEANUP_POLICY_CONFIG, TopicConfig.CLEANUP_POLICY_COMPACT)));\n+ *\n+ *   // Call values() to get the result for a specific topic\n+ *   KafkaFuture future = result.values().get(topicName);\n+ *\n+ *   // Call get() to block until the topic creation is complete or has failed\n+ *   // if creation failed the ExecutionException wraps the underlying cause.\n+ *   future.get();\n+ * }\n+ * </pre>\n+ *\n+ * <h3>Bootstrap and balancing</h3>\n+ * <p>\n+ * The {@code bootstrap.servers} config in the {@code Map} or {@code Properties} passed\n+ * to {@link Admin#create(Properties)} is only used for discovering the brokers in the cluster,\n+ * which the client will then connect to as needed.\n+ * As such, it is sufficient to include only two or three broker addresses to cope with the possibility of brokers\n+ * being unavailable.\n+ * <p>\n+ * Different operations necessitate requests being sent to different nodes in the cluster. For example\n+ * {@link #createTopics(Collection)} communicates with the controller, but {@link #describeTopics(Collection)}\n+ * can talk to any broker. When the recipient does not matter the instance will try to use the broker with the\n+ * fewest outstanding requests.\n+ * <p>\n+ * The client will transparently retry certain errors which are usually transient.\n+ * For example if the request for {@code createTopics()} got sent to a node which was not the controller\n+ * the metadata would be refreshed and the request re-sent to the controller.", "originalCommit": "266bfa333399fdc7c6dcc95c8105ef47584b01e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUwODA4Ng==", "url": "https://github.com/apache/kafka/pull/9459#discussion_r508508086", "bodyText": "{@link org.apache.kafka.common.KafkaFuture}", "author": "chia7712", "createdAt": "2020-10-20T13:36:02Z", "path": "clients/src/main/java/org/apache/kafka/clients/admin/Admin.java", "diffHunk": "@@ -45,15 +45,75 @@\n /**\n  * The administrative client for Kafka, which supports managing and inspecting topics, brokers, configurations and ACLs.\n  * <p>\n+ * Instances returned from the {@code create} methods of this interface are guaranteed to be thread safe.\n+ * <p>\n+ * The operations exposed by Admin follow a consistent pattern:\n+ * <ul>\n+ *     <li>Admin instances should be created using {@link Admin#create(Properties)} or {@link Admin#create(Map)}</li>\n+ *     <li>Each operation typically has two overloaded methods, one which uses a default set of options and an\n+ *     overloaded method where the last parameter is an explicit options object.\n+ *     <li>The operation method's first parameter is a {@code Collection} of items to perform\n+ *     the operation on. Batching multiple requests into a single call is more efficient and should be\n+ *     preferred over multiple calls to the same method.\n+ *     <li>The operation methods execute asynchronously.\n+ *     <li>Each {@code xxx} operation method returns an {@code XxxResult} class with methods which expose\n+ *     {@link org.apache.kafka.common.KafkaFuture KafkaFutures}", "originalCommit": "266bfa333399fdc7c6dcc95c8105ef47584b01e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUwOTA5NA==", "url": "https://github.com/apache/kafka/pull/9459#discussion_r508509094", "bodyText": "this line can be added to tail of above line", "author": "chia7712", "createdAt": "2020-10-20T13:36:55Z", "path": "clients/src/main/java/org/apache/kafka/clients/admin/Admin.java", "diffHunk": "@@ -45,15 +45,75 @@\n /**\n  * The administrative client for Kafka, which supports managing and inspecting topics, brokers, configurations and ACLs.\n  * <p>\n+ * Instances returned from the {@code create} methods of this interface are guaranteed to be thread safe.\n+ * <p>\n+ * The operations exposed by Admin follow a consistent pattern:\n+ * <ul>\n+ *     <li>Admin instances should be created using {@link Admin#create(Properties)} or {@link Admin#create(Map)}</li>\n+ *     <li>Each operation typically has two overloaded methods, one which uses a default set of options and an\n+ *     overloaded method where the last parameter is an explicit options object.\n+ *     <li>The operation method's first parameter is a {@code Collection} of items to perform\n+ *     the operation on. Batching multiple requests into a single call is more efficient and should be\n+ *     preferred over multiple calls to the same method.\n+ *     <li>The operation methods execute asynchronously.\n+ *     <li>Each {@code xxx} operation method returns an {@code XxxResult} class with methods which expose\n+ *     {@link org.apache.kafka.common.KafkaFuture KafkaFutures}\n+ *     for accessing the result(s) of the operation.", "originalCommit": "266bfa333399fdc7c6dcc95c8105ef47584b01e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODUzMDMzNw==", "url": "https://github.com/apache/kafka/pull/9459#discussion_r508530337", "bodyText": "lose a curly bracket?", "author": "chia7712", "createdAt": "2020-10-20T13:58:49Z", "path": "clients/src/main/java/org/apache/kafka/clients/admin/Admin.java", "diffHunk": "@@ -45,15 +45,75 @@\n /**\n  * The administrative client for Kafka, which supports managing and inspecting topics, brokers, configurations and ACLs.\n  * <p>\n+ * Instances returned from the {@code create} methods of this interface are guaranteed to be thread safe.\n+ * <p>\n+ * The operations exposed by Admin follow a consistent pattern:\n+ * <ul>\n+ *     <li>Admin instances should be created using {@link Admin#create(Properties)} or {@link Admin#create(Map)}</li>\n+ *     <li>Each operation typically has two overloaded methods, one which uses a default set of options and an\n+ *     overloaded method where the last parameter is an explicit options object.\n+ *     <li>The operation method's first parameter is a {@code Collection} of items to perform\n+ *     the operation on. Batching multiple requests into a single call is more efficient and should be\n+ *     preferred over multiple calls to the same method.\n+ *     <li>The operation methods execute asynchronously.\n+ *     <li>Each {@code xxx} operation method returns an {@code XxxResult} class with methods which expose\n+ *     {@link org.apache.kafka.common.KafkaFuture KafkaFutures}\n+ *     for accessing the result(s) of the operation.\n+ *     <li>Typically an {@code all()} method is provided for getting the overall success/failure of the batch and a\n+ *     {@code values()} method provided access to each item in a request batch.\n+ *     Other methods may also be provided.\n+ *     <li>For synchronous behaviour use {@link org.apache.kafka.common.KafkaFuture#get}\n+ * <p>\n+ * Here is a simple example of using an Admin client instance to create a new topic:\n+ * <pre>\n+ * {@code", "originalCommit": "266bfa333399fdc7c6dcc95c8105ef47584b01e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1007851caec08b36fab69587f147f1154393b46f", "url": "https://github.com/apache/kafka/commit/1007851caec08b36fab69587f147f1154393b46f", "message": "Review comments", "committedDate": "2020-10-20T14:56:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk2MDc3MQ==", "url": "https://github.com/apache/kafka/pull/9459#discussion_r508960771", "bodyText": "{@link org.apache.kafka.common.KafkaFuture#get} => {@link org.apache.kafka.common.KafkaFuture#get()}", "author": "chia7712", "createdAt": "2020-10-21T03:04:53Z", "path": "clients/src/main/java/org/apache/kafka/clients/admin/Admin.java", "diffHunk": "@@ -45,15 +45,76 @@\n /**\n  * The administrative client for Kafka, which supports managing and inspecting topics, brokers, configurations and ACLs.\n  * <p>\n+ * Instances returned from the {@code create} methods of this interface are guaranteed to be thread safe.\n+ * <p>\n+ * The operations exposed by Admin follow a consistent pattern:\n+ * <ul>\n+ *     <li>Admin instances should be created using {@link Admin#create(Properties)} or {@link Admin#create(Map)}</li>\n+ *     <li>Each operation typically has two overloaded methods, one which uses a default set of options and an\n+ *     overloaded method where the last parameter is an explicit options object.\n+ *     <li>The operation method's first parameter is a {@code Collection} of items to perform\n+ *     the operation on. Batching multiple requests into a single call is more efficient and should be\n+ *     preferred over multiple calls to the same method.\n+ *     <li>The operation methods execute asynchronously.\n+ *     <li>Each {@code xxx} operation method returns an {@code XxxResult} class with methods which expose\n+ *     {@link org.apache.kafka.common.KafkaFuture} for accessing the result(s) of the operation.\n+ *     <li>Typically an {@code all()} method is provided for getting the overall success/failure of the batch and a\n+ *     {@code values()} method provided access to each item in a request batch.\n+ *     Other methods may also be provided.\n+ *     <li>For synchronous behaviour use {@link org.apache.kafka.common.KafkaFuture#get}", "originalCommit": "1007851caec08b36fab69587f147f1154393b46f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d9d2cb31afb363f09c227f45a0449ee6827a3119", "url": "https://github.com/apache/kafka/commit/d9d2cb31afb363f09c227f45a0449ee6827a3119", "message": "Review comment and remove two erroneous throws", "committedDate": "2020-10-21T07:52:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA2NzY0OQ==", "url": "https://github.com/apache/kafka/pull/9459#discussion_r509067649", "bodyText": "@dongjinleekr Could you please take a look at this throws? It was added by your PR (#7083).", "author": "chia7712", "createdAt": "2020-10-21T07:58:47Z", "path": "clients/src/main/java/org/apache/kafka/clients/admin/Admin.java", "diffHunk": "@@ -519,7 +519,6 @@ AlterConfigsResult incrementalAlterConfigs(Map<ConfigResource,\n      *\n      * @param replicaAssignment     The replicas with their log directory absolute path\n      * @return                      The AlterReplicaLogDirsResult\n-     * @throws InterruptedException Interrupted while joining I/O thread", "originalCommit": "d9d2cb31afb363f09c227f45a0449ee6827a3119", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTE1ODIyNQ==", "url": "https://github.com/apache/kafka/pull/9459#discussion_r509158225", "bodyText": "@chia7712 Okay. Let me see. \ud83d\ude03", "author": "dongjinleekr", "createdAt": "2020-10-21T10:13:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA2NzY0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDAxMjQ1OA==", "url": "https://github.com/apache/kafka/pull/9459#discussion_r510012458", "bodyText": "@chia7712 InterruptedException is not thrown anymore; This method does not call KafkaFutureImpl#get method anymore. It's safe to remove it.", "author": "dongjinleekr", "createdAt": "2020-10-22T09:23:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA2NzY0OQ=="}], "type": "inlineReview"}]}