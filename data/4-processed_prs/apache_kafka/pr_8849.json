{"pr_number": 8849, "pr_title": "KAFKA-10144: clean up corrupted standby tasks before attempting a commit", "pr_createdAt": "2020-06-11T02:24:51Z", "pr_url": "https://github.com/apache/kafka/pull/8849", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUxNDE4MQ==", "url": "https://github.com/apache/kafka/pull/8849#discussion_r438514181", "bodyText": "nit: just simplify to throws Exception", "author": "mjsax", "createdAt": "2020-06-11T02:53:40Z", "path": "streams/src/test/java/org/apache/kafka/streams/integration/StandbyTaskEOSIntegrationTest.java", "diffHunk": "@@ -92,7 +92,7 @@ public void createTopics() throws Exception {\n     }\n \n     @Test\n-    public void surviveWithOneTaskAsStandby() throws ExecutionException, InterruptedException, IOException {\n+    public void surviveWithOneTaskAsStandby() throws InterruptedException, IOException {", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUyNDc5OA==", "url": "https://github.com/apache/kafka/pull/8849#discussion_r438524798", "bodyText": "Just tried to consolidate the log messages between active/standby tasks (and demoted these to debug)", "author": "ableegoldman", "createdAt": "2020-06-11T03:38:42Z", "path": "streams/src/main/java/org/apache/kafka/streams/processor/internals/StandbyTask.java", "diffHunk": "@@ -137,7 +137,7 @@ public void resume() {\n     public Map<TopicPartition, OffsetAndMetadata> prepareCommit() {\n         if (state() == State.RUNNING || state() == State.SUSPENDED) {\n             stateMgr.flush();\n-            log.info(\"Task ready for committing\");\n+            log.debug(\"Prepared task for committing\");", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "95dd8fe548980077bb11ed958aef7015aa3d2ad5", "url": "https://github.com/apache/kafka/commit/95dd8fe548980077bb11ed958aef7015aa3d2ad5", "message": "clean up standbys", "committedDate": "2020-06-12T00:43:23Z", "type": "commit"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "9d93b48995dc740648689d0d90e939c9ddc018d2", "url": "https://github.com/apache/kafka/commit/9d93b48995dc740648689d0d90e939c9ddc018d2", "message": "add new tests", "committedDate": "2020-06-12T00:46:45Z", "type": "commit"}, {"oid": "9d93b48995dc740648689d0d90e939c9ddc018d2", "url": "https://github.com/apache/kafka/commit/9d93b48995dc740648689d0d90e939c9ddc018d2", "message": "add new tests", "committedDate": "2020-06-12T00:46:45Z", "type": "forcePushed"}]}