{"pr_number": 9659, "pr_title": "KAFKA-10770: Remove duplicate defination of Metrics#getTags", "pr_createdAt": "2020-11-27T22:41:26Z", "pr_url": "https://github.com/apache/kafka/pull/9659", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTg3NjI5Mw==", "url": "https://github.com/apache/kafka/pull/9659#discussion_r531876293", "bodyText": "Could you set the initial capability?", "author": "chia7712", "createdAt": "2020-11-28T05:03:14Z", "path": "clients/src/main/java/org/apache/kafka/common/metrics/internals/MetricsUtils.java", "diffHunk": "@@ -43,4 +47,20 @@ public static double convert(long timeMs, TimeUnit unit) {\n                 throw new IllegalStateException(\"Unknown unit: \" + unit);\n         }\n     }\n+\n+    /**\n+     * Create a set of tags using the supplied key and value pairs. The order of the tags will be kept.\n+     *\n+     * @param keyValue the key and value pairs for the tags; must be an even number\n+     * @return the map of tags that can be supplied to the {@link Metrics} methods; never null\n+     */\n+    public static Map<String, String> getTags(String... keyValue) {\n+        if ((keyValue.length % 2) != 0)\n+            throw new IllegalArgumentException(\"keyValue needs to be specified in pairs\");\n+        Map<String, String> tags = new LinkedHashMap<>();", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyODA0Mg==", "url": "https://github.com/apache/kafka/pull/9659#discussion_r532128042", "bodyText": "Sure!", "author": "ArunParthiban-ST", "createdAt": "2020-11-29T01:29:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTg3NjI5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTg3NzQyNQ==", "url": "https://github.com/apache/kafka/pull/9659#discussion_r531877425", "bodyText": "Could you use assertThrows?", "author": "chia7712", "createdAt": "2020-11-28T05:04:50Z", "path": "clients/src/test/java/org/apache/kafka/common/metrics/internals/MetricsUtilsTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.kafka.common.metrics.internals;\n+\n+import org.junit.Test;\n+\n+import java.util.Map;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+public class MetricsUtilsTest {\n+\n+    @Test\n+    public void testCreatingTags() {\n+        Map<String, String> tags = MetricsUtils.getTags(\"k1\", \"v1\", \"k2\", \"v2\");\n+        assertEquals(\"v1\", tags.get(\"k1\"));\n+        assertEquals(\"v2\", tags.get(\"k2\"));\n+        assertEquals(2, tags.size());\n+    }\n+\n+    @Test(expected = IllegalArgumentException.class)\n+    public void testCreatingTagsWithOddNumberOfTags() {\n+        MetricsUtils.getTags(\"k1\", \"v1\", \"k2\", \"v2\", \"extra\");", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyODAwOQ==", "url": "https://github.com/apache/kafka/pull/9659#discussion_r532128009", "bodyText": "Done", "author": "ArunParthiban-ST", "createdAt": "2020-11-29T01:29:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTg3NzQyNQ=="}], "type": "inlineReview"}, {"oid": "beee3809be987e0ed62332bba818c7903161b976", "url": "https://github.com/apache/kafka/commit/beee3809be987e0ed62332bba818c7903161b976", "message": "KAFKA-10770: Remove duplicate defination of Metrics#getTags", "committedDate": "2020-11-29T03:38:03Z", "type": "commit"}, {"oid": "2c0322d4e7c93bed2ca2f7be0fd475a0c3cf66b5", "url": "https://github.com/apache/kafka/commit/2c0322d4e7c93bed2ca2f7be0fd475a0c3cf66b5", "message": "KAFKA-10770: Use assertThrows in test", "committedDate": "2020-11-29T03:38:03Z", "type": "commit"}, {"oid": "90b104e4d51f8f1356d6d53982f39bfff0b2e375", "url": "https://github.com/apache/kafka/commit/90b104e4d51f8f1356d6d53982f39bfff0b2e375", "message": "KAFKA-10770: Set initial capacity", "committedDate": "2020-11-29T03:38:03Z", "type": "commit"}, {"oid": "90b104e4d51f8f1356d6d53982f39bfff0b2e375", "url": "https://github.com/apache/kafka/commit/90b104e4d51f8f1356d6d53982f39bfff0b2e375", "message": "KAFKA-10770: Set initial capacity", "committedDate": "2020-11-29T03:38:03Z", "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}]}