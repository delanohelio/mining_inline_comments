{"pr_number": 9102, "pr_title": "KAFKA-10326 Both serializer and deserializer should be able to see th\u2026", "pr_createdAt": "2020-07-30T04:24:35Z", "pr_url": "https://github.com/apache/kafka/pull/9102", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkyMDYyMg==", "url": "https://github.com/apache/kafka/pull/9102#discussion_r463920622", "bodyText": "s/originals/copyWithOverride?", "author": "abbccdda", "createdAt": "2020-08-01T04:32:51Z", "path": "clients/src/main/java/org/apache/kafka/common/config/AbstractConfig.java", "diffHunk": "@@ -228,6 +228,13 @@ public Password getPassword(String key) {\n         return copy;\n     }\n \n+    public Map<String, Object> originals(Map<String, Object> configOverrides) {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkzMDQzMA==", "url": "https://github.com/apache/kafka/pull/9102#discussion_r463930430", "bodyText": "Will copy that", "author": "chia7712", "createdAt": "2020-08-01T06:35:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkyMDYyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDIxNjY5OA==", "url": "https://github.com/apache/kafka/pull/9102#discussion_r464216698", "bodyText": "I have updated the method name.", "author": "chia7712", "createdAt": "2020-08-03T06:27:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzkyMDYyMg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzNDU0MQ==", "url": "https://github.com/apache/kafka/pull/9102#discussion_r466034541", "bodyText": "This seems beyond the scope of this PR. Why do we also need to let deserializer see whether given consumer instance is auto commit enabled?", "author": "abbccdda", "createdAt": "2020-08-05T22:15:42Z", "path": "clients/src/test/java/org/apache/kafka/clients/consumer/KafkaConsumerTest.java", "diffHunk": "@@ -2511,4 +2511,39 @@ public void testEnforceRebalanceTriggersRebalanceOnNextPoll() {\n \n         assertEquals(countingRebalanceListener.revokedCount, 1);\n     }\n+\n+    @Test\n+    public void deserializerShouldSeeGeneratedConfigs() {\n+        Properties props = new Properties();\n+        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, \"localhost:9999\");\n+        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, DeserializerForClientId.class.getName());\n+        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, DeserializerForClientId.class.getName());\n+\n+        KafkaConsumer<byte[], byte[]> consumer = new KafkaConsumer<>(props);\n+\n+        assertEquals(2, DeserializerForClientId.CLIENT_IDS.size());\n+        assertEquals(DeserializerForClientId.CLIENT_IDS.get(0), consumer.getClientId());\n+        assertEquals(DeserializerForClientId.CLIENT_IDS.get(1), consumer.getClientId());\n+\n+        assertEquals(2, DeserializerForClientId.AUTO_COMMIT_FLAGS.size());\n+        assertEquals(DeserializerForClientId.AUTO_COMMIT_FLAGS.get(0), consumer.isAutoCommitEnabled());", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA5MjAxNg==", "url": "https://github.com/apache/kafka/pull/9102#discussion_r466092016", "bodyText": "This flag is included by reason of this comment #9102 (comment)\nI\u2019m ok to revert it if it is overkill", "author": "chia7712", "createdAt": "2020-08-06T01:26:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzNDU0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg5MjI0NQ==", "url": "https://github.com/apache/kafka/pull/9102#discussion_r474892245", "bodyText": "Sorry for the delay, I suggest we revert this part to properly scope this PR.", "author": "abbccdda", "createdAt": "2020-08-21T19:28:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzNDU0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA0MTcwMA==", "url": "https://github.com/apache/kafka/pull/9102#discussion_r475041700", "bodyText": "@abbccdda thanks for suggestion. I have reverted it.", "author": "chia7712", "createdAt": "2020-08-22T03:48:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzNDU0MQ=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "a85593fa2d31807f0a4feff6e8b21fce4627f6e8", "url": "https://github.com/apache/kafka/commit/a85593fa2d31807f0a4feff6e8b21fce4627f6e8", "message": "KAFKA-10326 Both serializer and deserializer should be able to see the generated client id", "committedDate": "2020-09-28T15:48:14Z", "type": "commit"}, {"oid": "02dedd974246cd820972a7a5c034b951769e4c60", "url": "https://github.com/apache/kafka/commit/02dedd974246cd820972a7a5c034b951769e4c60", "message": "KAFKA-10326 address review comments", "committedDate": "2020-09-28T16:18:10Z", "type": "commit"}, {"oid": "696543bfdc32cac43300096384db5de28391b818", "url": "https://github.com/apache/kafka/commit/696543bfdc32cac43300096384db5de28391b818", "message": "KAFKA-10326 correct test", "committedDate": "2020-09-28T16:18:11Z", "type": "commit"}, {"oid": "d94f96b95331415a633c247e340c758b3b453db1", "url": "https://github.com/apache/kafka/commit/d94f96b95331415a633c247e340c758b3b453db1", "message": "Revert \"KAFKA-10326 correct test\"\n\nThis reverts commit 23313aa03e1e27c648d3c2786fb7bd0ea7df9fdf.", "committedDate": "2020-09-28T16:18:11Z", "type": "commit"}, {"oid": "93cf8845128943c2de9e04c55dcfbbf78747e23c", "url": "https://github.com/apache/kafka/commit/93cf8845128943c2de9e04c55dcfbbf78747e23c", "message": "Revert \"KAFKA-10326 address review comments\"\n\nThis reverts commit d6af4789a69ecd8c5c361351deab178a2b09e500.", "committedDate": "2020-09-28T16:39:20Z", "type": "commit"}, {"oid": "93cf8845128943c2de9e04c55dcfbbf78747e23c", "url": "https://github.com/apache/kafka/commit/93cf8845128943c2de9e04c55dcfbbf78747e23c", "message": "Revert \"KAFKA-10326 address review comments\"\n\nThis reverts commit d6af4789a69ecd8c5c361351deab178a2b09e500.", "committedDate": "2020-09-28T16:39:20Z", "type": "forcePushed"}]}