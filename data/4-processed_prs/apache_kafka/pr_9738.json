{"pr_number": 9738, "pr_title": "KAFKA-8744: Update Scala API to give names to processors", "pr_createdAt": "2020-12-12T20:35:02Z", "pr_url": "https://github.com/apache/kafka/pull/9738", "timeline": [{"oid": "c2d7456dface66291e2872b479e67c99ba9cc665", "url": "https://github.com/apache/kafka/commit/c2d7456dface66291e2872b479e67c99ba9cc665", "message": "KStream API + test", "committedDate": "2021-01-27T11:02:43Z", "type": "commit"}, {"oid": "cb17d15bca7e866d42de08363b0ca0f10e1d1414", "url": "https://github.com/apache/kafka/commit/cb17d15bca7e866d42de08363b0ca0f10e1d1414", "message": "KTable api\n\nKTable api", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "3d060c30befe0fe3e8ebcbc2a39a2aa3c612e738", "url": "https://github.com/apache/kafka/commit/3d060c30befe0fe3e8ebcbc2a39a2aa3c612e738", "message": "CogroupedKStream api", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "a6fafa6375123af0036858292b07ae69e891bc6d", "url": "https://github.com/apache/kafka/commit/a6fafa6375123af0036858292b07ae69e891bc6d", "message": "KGroupedStream api", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "61df345e2d281ad73d7ce6d0372131ec044220f3", "url": "https://github.com/apache/kafka/commit/61df345e2d281ad73d7ce6d0372131ec044220f3", "message": "KGroupedTable api", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "f4b24b79f21e9e98112535de3ca2b72278fbd32e", "url": "https://github.com/apache/kafka/commit/f4b24b79f21e9e98112535de3ca2b72278fbd32e", "message": "SessionWindowedCogroupedKStream api", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "5f982b8240897fcf447be6acc879de3e7713fdcc", "url": "https://github.com/apache/kafka/commit/5f982b8240897fcf447be6acc879de3e7713fdcc", "message": "SessionWindowedKStream api", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "bd891d6b3ed6102951e49630997e33afeffe9d79", "url": "https://github.com/apache/kafka/commit/bd891d6b3ed6102951e49630997e33afeffe9d79", "message": "TimeWindowedKStream and TimeWindowedCogroupedKStream api", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "c2fca391555b2fe1ccbdc2c42f85456f55bd0a1e", "url": "https://github.com/apache/kafka/commit/c2fca391555b2fe1ccbdc2c42f85456f55bd0a1e", "message": "code format", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "63a4583a017564be07c1098df29556e4272d6bf0", "url": "https://github.com/apache/kafka/commit/63a4583a017564be07c1098df29556e4272d6bf0", "message": "fix unwanted reformatting", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "30a6a1122564f73a72b7810eccb6bc45f9a20b2f", "url": "https://github.com/apache/kafka/commit/30a6a1122564f73a72b7810eccb6bc45f9a20b2f", "message": "stylecheck", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "b7128ae8a96310ead6f655f5014dcf2746d1d944", "url": "https://github.com/apache/kafka/commit/b7128ae8a96310ead6f655f5014dcf2746d1d944", "message": "scala compat", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "b1af0027a84ccb42f7786de45aacda03d9466491", "url": "https://github.com/apache/kafka/commit/b1af0027a84ccb42f7786de45aacda03d9466491", "message": "fix ci warning", "committedDate": "2021-01-27T11:02:44Z", "type": "commit"}, {"oid": "f84302904e0659c5b1f40bf09c00986d396c64dc", "url": "https://github.com/apache/kafka/commit/f84302904e0659c5b1f40bf09c00986d396c64dc", "message": "refactor KStream named join for API consistency", "committedDate": "2021-01-27T12:25:44Z", "type": "commit"}, {"oid": "b4d7fea312edabd90688e813296d33f9899ce7df", "url": "https://github.com/apache/kafka/commit/b4d7fea312edabd90688e813296d33f9899ce7df", "message": "additional tests", "committedDate": "2021-01-27T12:25:44Z", "type": "commit"}, {"oid": "b4d7fea312edabd90688e813296d33f9899ce7df", "url": "https://github.com/apache/kafka/commit/b4d7fea312edabd90688e813296d33f9899ce7df", "message": "additional tests", "committedDate": "2021-01-27T12:25:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTM3MTIzOQ==", "url": "https://github.com/apache/kafka/pull/9738#discussion_r565371239", "bodyText": "shouldn't this line verify the countNode name?", "author": "bbejeck", "createdAt": "2021-01-27T14:53:06Z", "path": "streams/streams-scala/src/test/scala/org/apache/kafka/streams/scala/kstream/KTableTest.scala", "diffHunk": "@@ -391,4 +390,57 @@ class KTableTest extends FlatSpec with Matchers with TestDriver {\n \n     testDriver.close()\n   }\n+\n+  \"setting a name on a filter processor\" should \"pass the name to the topology\" in {\n+    val builder = new StreamsBuilder()\n+    val sourceTopic = \"source\"\n+    val sinkTopic = \"sink\"\n+\n+    val table = builder.stream[String, String](sourceTopic).groupBy((key, _) => key).count()\n+    table\n+      .filter((key, value) => key.equals(\"a\") && value == 1, Named.as(\"my-name\"))\n+      .toStream\n+      .to(sinkTopic)\n+\n+    import scala.jdk.CollectionConverters._\n+\n+    val filterNode = builder.build().describe().subtopologies().asScala.toList(1).nodes().asScala.toList(3)\n+    filterNode.name() shouldBe \"my-name\"\n+  }\n+\n+  \"setting a name on a count processor\" should \"pass the name to the topology\" in {\n+    val builder = new StreamsBuilder()\n+    val sourceTopic = \"source\"\n+    val sinkTopic = \"sink\"\n+\n+    val table = builder.stream[String, String](sourceTopic).groupBy((key, _) => key).count(Named.as(\"my-name\"))\n+    table.toStream.to(sinkTopic)\n+\n+    import scala.jdk.CollectionConverters._\n+\n+    val filterNode = builder.build().describe().subtopologies().asScala.toList(1).nodes().asScala.toList(1)\n+    filterNode.name() shouldBe \"my-name\"", "originalCommit": "b4d7fea312edabd90688e813296d33f9899ce7df", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTQ5NzA0NA==", "url": "https://github.com/apache/kafka/pull/9738#discussion_r565497044", "bodyText": "bad copy-paste of variable name.", "author": "mdespriee", "createdAt": "2021-01-27T17:28:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTM3MTIzOQ=="}], "type": "inlineReview"}, {"oid": "71143f82d1a2cb26b9e9a998bfeaecc8c9e99003", "url": "https://github.com/apache/kafka/commit/71143f82d1a2cb26b9e9a998bfeaecc8c9e99003", "message": "fix bad copy-pasted name", "committedDate": "2021-01-27T17:27:07Z", "type": "commit"}]}