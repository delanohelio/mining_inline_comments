{"pr_number": 9681, "pr_title": "MINOR: Fix flaky test shouldQueryOnlyActivePartitionStoresByDefault", "pr_createdAt": "2020-12-03T15:03:09Z", "pr_url": "https://github.com/apache/kafka/pull/9681", "timeline": [{"oid": "64d5ba426ecb604974cb035ba57f5dcf7e1c009e", "url": "https://github.com/apache/kafka/commit/64d5ba426ecb604974cb035ba57f5dcf7e1c009e", "message": "MINOR: Fix flaky test shouldQueryOnlyActivePartitionStoresByDefault", "committedDate": "2020-12-03T15:01:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMxMDkzOQ==", "url": "https://github.com/apache/kafka/pull/9681#discussion_r535310939", "bodyText": "Last time we forgot to move this line into the try-catch-clause.", "author": "cadonna", "createdAt": "2020-12-03T15:04:34Z", "path": "streams/src/test/java/org/apache/kafka/streams/integration/StoreQueryIntegrationTest.java", "diffHunk": "@@ -136,13 +136,13 @@ public void shouldQueryOnlyActivePartitionStoresByDefault() throws Exception {\n \n             final boolean kafkaStreams1IsActive = (keyQueryMetadata.activeHost().port() % 2) == 1;\n \n-            // Assert that only active is able to query for a key by default\n-            assertThat(kafkaStreams1IsActive ? store1.get(key) : store2.get(key), is(notNullValue()));", "originalCommit": "64d5ba426ecb604974cb035ba57f5dcf7e1c009e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMxMTMzMw==", "url": "https://github.com/apache/kafka/pull/9681#discussion_r535311333", "bodyText": "I thought this is easier readable.", "author": "cadonna", "createdAt": "2020-12-03T15:05:04Z", "path": "streams/src/test/java/org/apache/kafka/streams/integration/StoreQueryIntegrationTest.java", "diffHunk": "@@ -136,13 +136,13 @@ public void shouldQueryOnlyActivePartitionStoresByDefault() throws Exception {\n \n             final boolean kafkaStreams1IsActive = (keyQueryMetadata.activeHost().port() % 2) == 1;\n \n-            // Assert that only active is able to query for a key by default\n-            assertThat(kafkaStreams1IsActive ? store1.get(key) : store2.get(key), is(notNullValue()));\n             try {\n                 if (kafkaStreams1IsActive) {\n+                    assertThat(store1.get(key), is(notNullValue()));\n                     assertThat(store2.get(key), is(nullValue()));\n                 } else {\n                     assertThat(store1.get(key), is(nullValue()));\n+                    assertThat(store2.get(key), is(notNullValue()));\n                 }", "originalCommit": "64d5ba426ecb604974cb035ba57f5dcf7e1c009e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}