{"pr_number": 8391, "pr_title": "MINOR: reduce garbage in operation and resource java conversions", "pr_createdAt": "2020-03-31T05:27:56Z", "pr_url": "https://github.com/apache/kafka/pull/8391", "timeline": [{"oid": "cee2749aa3b88972b2070ac7754b3dfc13c09a54", "url": "https://github.com/apache/kafka/commit/cee2749aa3b88972b2070ac7754b3dfc13c09a54", "message": "MINOR: unnecessary regex replace and string matching in operation\nconversions", "committedDate": "2020-03-31T05:22:58Z", "type": "commit"}, {"oid": "6e84e48d87f2887235dfc741b3e535d4ff7d7999", "url": "https://github.com/apache/kafka/commit/6e84e48d87f2887235dfc741b3e535d4ff7d7999", "message": "operation -> resourceType", "committedDate": "2020-03-31T05:28:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4MzA1OQ==", "url": "https://github.com/apache/kafka/pull/8391#discussion_r400683059", "bodyText": "nit: Can we use error message similar to fromString method?", "author": "omkreddy", "createdAt": "2020-03-31T06:58:11Z", "path": "core/src/main/scala/kafka/security/auth/Operation.scala", "diffHunk": "@@ -91,7 +91,22 @@ object Operation {\n     op.getOrElse(throw new KafkaException(operation + \" not a valid operation name. The valid names are \" + values.mkString(\",\")))\n   }\n \n-  def fromJava(operation: AclOperation): Operation = fromString(operation.toString.replaceAll(\"_\", \"\"))\n+  def fromJava(operation: AclOperation): Operation = {\n+    operation match {\n+      case AclOperation.READ => Read\n+      case AclOperation.WRITE => Write\n+      case AclOperation.CREATE => Create\n+      case AclOperation.DELETE => Delete\n+      case AclOperation.ALTER => Alter\n+      case AclOperation.DESCRIBE => Describe\n+      case AclOperation.CLUSTER_ACTION => ClusterAction\n+      case AclOperation.ALTER_CONFIGS => AlterConfigs\n+      case AclOperation.DESCRIBE_CONFIGS => DescribeConfigs\n+      case AclOperation.IDEMPOTENT_WRITE => IdempotentWrite\n+      case AclOperation.ALL => All\n+      case _ => throw new KafkaException(\"Unexpected conversion of operation \" + operation)", "originalCommit": "6e84e48d87f2887235dfc741b3e535d4ff7d7999", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTAzMjUyOQ==", "url": "https://github.com/apache/kafka/pull/8391#discussion_r401032529", "bodyText": "I've made the error messages close to each other.", "author": "lbradstreet", "createdAt": "2020-03-31T16:03:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4MzA1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4MzEzMw==", "url": "https://github.com/apache/kafka/pull/8391#discussion_r400683133", "bodyText": "nit: Can we use error message similar to fromString method?", "author": "omkreddy", "createdAt": "2020-03-31T06:58:21Z", "path": "core/src/main/scala/kafka/security/auth/ResourceType.scala", "diffHunk": "@@ -80,5 +80,14 @@ object ResourceType {\n \n   def values: Seq[ResourceType] = List(Topic, Group, Cluster, TransactionalId, DelegationToken)\n \n-  def fromJava(operation: JResourceType): ResourceType = fromString(operation.toString.replaceAll(\"_\", \"\"))\n+  def fromJava(resourceType: JResourceType): ResourceType = {\n+    resourceType match {\n+      case JResourceType.TOPIC => Topic\n+      case JResourceType.GROUP => Group\n+      case JResourceType.CLUSTER => Cluster\n+      case JResourceType.TRANSACTIONAL_ID => TransactionalId\n+      case JResourceType.DELEGATION_TOKEN => DelegationToken\n+      case _ => throw new KafkaException(\"Unexpected conversion of operation \" + resourceType)", "originalCommit": "6e84e48d87f2887235dfc741b3e535d4ff7d7999", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTAzMzAxNA==", "url": "https://github.com/apache/kafka/pull/8391#discussion_r401033014", "bodyText": "I've made the error messages close to each other.", "author": "lbradstreet", "createdAt": "2020-03-31T16:03:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY4MzEzMw=="}], "type": "inlineReview"}, {"oid": "f0434b329bb9dc8db0e3a3a0d0dec065c6c3ce1f", "url": "https://github.com/apache/kafka/commit/f0434b329bb9dc8db0e3a3a0d0dec065c6c3ce1f", "message": "Improve error message", "committedDate": "2020-03-31T16:03:39Z", "type": "commit"}]}