{"pr_number": 8675, "pr_title": "KAFKA-10004: ConfigCommand fails to find default broker configs without ZK", "pr_createdAt": "2020-05-15T14:03:22Z", "pr_url": "https://github.com/apache/kafka/pull/8675", "timeline": [{"oid": "a01c65bcff613031c2aff841587617c64de8c14a", "url": "https://github.com/apache/kafka/commit/a01c65bcff613031c2aff841587617c64de8c14a", "message": "fix the default broker name into empty string", "committedDate": "2020-05-15T09:05:44Z", "type": "commit"}, {"oid": "a4e615b0c669cac8d33e66d01ac3e1bea0de55f0", "url": "https://github.com/apache/kafka/commit/a4e615b0c669cac8d33e66d01ac3e1bea0de55f0", "message": "add unit test for describe broker without entity name case", "committedDate": "2020-05-15T13:52:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgyNDg1OA==", "url": "https://github.com/apache/kafka/pull/8675#discussion_r425824858", "bodyText": "reorder this test case to put the verifyAlterBrokerConfig test suits together. Note: the previous test is also test with verifyAlterBrokerConfig", "author": "showuon", "createdAt": "2020-05-15T14:04:53Z", "path": "core/src/test/scala/unit/kafka/admin/ConfigCommandTest.scala", "diffHunk": "@@ -736,6 +731,12 @@ class ConfigCommandTest extends ZooKeeperTestHarness with Logging {\n     verifyAlterBrokerConfig(node, \"\", List(\"--entity-default\"))\n   }\n \n+  @Test\n+  def shouldAddBrokerDynamicConfig(): Unit = {\n+    val node = new Node(1, \"localhost\", 9092)\n+    verifyAlterBrokerConfig(node, \"1\", List(\"--entity-name\", \"1\"))\n+  }", "originalCommit": "a4e615b0c669cac8d33e66d01ac3e1bea0de55f0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgyNTI2Mg==", "url": "https://github.com/apache/kafka/pull/8675#discussion_r425825262", "bodyText": "fix the wrong zk connection info", "author": "showuon", "createdAt": "2020-05-15T14:05:25Z", "path": "core/src/test/scala/unit/kafka/admin/ConfigCommandTest.scala", "diffHunk": "@@ -646,7 +641,7 @@ class ConfigCommandTest extends ZooKeeperTestHarness with Logging {\n \n   @Test\n   def testNoSpecifiedEntityOptionWithDescribeBrokersInZKIsAllowed(): Unit = {\n-    val optsList = List(\"--zookeeper\", \"localhost:9092\",\n+    val optsList = List(\"--zookeeper\", zkConnect,", "originalCommit": "a4e615b0c669cac8d33e66d01ac3e1bea0de55f0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgzNTM1Mg==", "url": "https://github.com/apache/kafka/pull/8675#discussion_r425835352", "bodyText": "Please substitute \"\" for BrokerDefaultEntityName in the match below, as well as in getResourceConfig.", "author": "bdbyrne", "createdAt": "2020-05-15T14:20:58Z", "path": "core/src/main/scala/kafka/admin/ConfigCommand.scala", "diffHunk": "@@ -424,7 +425,7 @@ object ConfigCommand extends Config {\n         case ConfigType.Topic =>\n           adminClient.listTopics(new ListTopicsOptions().listInternal(true)).names().get().asScala.toSeq\n         case ConfigType.Broker | BrokerLoggerConfigType =>\n-          adminClient.describeCluster(new DescribeClusterOptions()).nodes().get().asScala.map(_.idString).toSeq :+ ConfigEntityName.Default\n+          adminClient.describeCluster(new DescribeClusterOptions()).nodes().get().asScala.map(_.idString).toSeq :+ BrokerDefaultEntityName", "originalCommit": "a4e615b0c669cac8d33e66d01ac3e1bea0de55f0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEzMTQ5NA==", "url": "https://github.com/apache/kafka/pull/8675#discussion_r426131494", "bodyText": "Thanks @bdbyrne . Good suggestion. I've updated it in this commit 83cc232. Thank you.", "author": "showuon", "createdAt": "2020-05-16T08:15:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgzNTM1Mg=="}], "type": "inlineReview"}, {"oid": "83cc2328099ef1424c3cea492156bd4a82f3fe65", "url": "https://github.com/apache/kafka/commit/83cc2328099ef1424c3cea492156bd4a82f3fe65", "message": "KAFKA-1004: address reviewer's comments", "committedDate": "2020-05-16T08:08:05Z", "type": "commit"}]}