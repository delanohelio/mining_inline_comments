{"pr_number": 8510, "pr_title": "MINOR: cleanup RocksDBStore tests ", "pr_createdAt": "2020-04-18T03:56:40Z", "pr_url": "https://github.com/apache/kafka/pull/8510", "timeline": [{"oid": "74859e114064a177713d3668a2b107b80db56f3d", "url": "https://github.com/apache/kafka/commit/74859e114064a177713d3668a2b107b80db56f3d", "message": "use temp dir", "committedDate": "2020-04-18T03:48:43Z", "type": "commit"}, {"oid": "695005647c2cbaf2b299beecbb07047fd149cc39", "url": "https://github.com/apache/kafka/commit/695005647c2cbaf2b299beecbb07047fd149cc39", "message": "remove unused import", "committedDate": "2020-04-18T03:49:45Z", "type": "commit"}, {"oid": "1ff249bd1519f4fa933bce0305f30c2a244e5701", "url": "https://github.com/apache/kafka/commit/1ff249bd1519f4fa933bce0305f30c2a244e5701", "message": "undo static import", "committedDate": "2020-04-18T03:58:22Z", "type": "commit"}, {"oid": "e33832531c88179e7da42b4436c6f0f6a40f0b00", "url": "https://github.com/apache/kafka/commit/e33832531c88179e7da42b4436c6f0f6a40f0b00", "message": "fix uo", "committedDate": "2020-04-18T04:09:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MzM5Mw==", "url": "https://github.com/apache/kafka/pull/8510#discussion_r410743393", "bodyText": "nit: for line 147 could we use the rocksDBStore as well?", "author": "guozhangwang", "createdAt": "2020-04-18T19:56:47Z", "path": "streams/src/test/java/org/apache/kafka/streams/state/internals/RocksDBStoreTest.java", "diffHunk": "@@ -137,62 +142,57 @@ private InternalMockProcessorContext getProcessorContext(final RecordingLevel re\n         return getProcessorContext(streamsProps);\n     }\n \n-    @After\n-    public void tearDown() {\n-        rocksDBStore.close();\n-    }\n-\n     @Test\n     public void shouldAddStatisticsToInjectedMetricsRecorderWhenRecordingLevelIsDebug() {\n         final RocksDBStore store = getRocksDBStoreWithRocksDBMetricsRecorder();\n-        final InternalMockProcessorContext mockContext = getProcessorContext(RecordingLevel.DEBUG);\n+        context = getProcessorContext(RecordingLevel.DEBUG);", "originalCommit": "e33832531c88179e7da42b4436c6f0f6a40f0b00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc1MDA4Mw==", "url": "https://github.com/apache/kafka/pull/8510#discussion_r410750083", "bodyText": "I left it out intentionally because we always cause #close on this rocksDBStore and this causes this test to fail.\nIt's just because of the mock, so we could instead add some expect... lines at the end of the test, but it seemed cleaner to just use a local RocksDBStore here", "author": "ableegoldman", "createdAt": "2020-04-18T20:59:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MzM5Mw=="}], "type": "inlineReview"}]}