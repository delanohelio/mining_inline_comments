{"pr_number": 8999, "pr_title": "MINOR; Return timed out connections as a List instead of a Set", "pr_createdAt": "2020-07-09T07:57:01Z", "pr_url": "https://github.com/apache/kafka/pull/8999", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA0MDQyNA==", "url": "https://github.com/apache/kafka/pull/8999#discussion_r452040424", "bodyText": "@dajac Won't this create a list regardless of whether there are timed out entries? Let's see whether this addresses @ijuma 's concern on the other PR.", "author": "rajinisivaram", "createdAt": "2020-07-09T08:09:54Z", "path": "clients/src/main/java/org/apache/kafka/clients/ClusterConnectionStates.java", "diffHunk": "@@ -443,13 +444,13 @@ public boolean isConnectionSetupTimeout(String id, long now) {\n     }\n \n     /**\n-     * Return the Set of nodes whose connection setup has timed out.\n+     * Return the List of nodes whose connection setup has timed out.\n      * @param now the current time in ms\n      */\n-    public Set<String> nodesWithConnectionSetupTimeout(long now) {\n+    public List<String> nodesWithConnectionSetupTimeout(long now) {\n         return connectingNodes.stream()\n             .filter(id -> isConnectionSetupTimeout(id, now))\n-            .collect(Collectors.toSet());\n+            .collect(Collectors.toCollection(LinkedList::new));", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA1Mjk1MQ==", "url": "https://github.com/apache/kafka/pull/8999#discussion_r452052951", "bodyText": "@rajinisivaram Yes, it does as an empty list is returned if there are no timed out entries. This was true with the Set as well btw.", "author": "dajac", "createdAt": "2020-07-09T08:31:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA0MDQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM0OTM0Ng==", "url": "https://github.com/apache/kafka/pull/8999#discussion_r452349346", "bodyText": "Why are we using LinkedList? It's very rare where it should be used.", "author": "ijuma", "createdAt": "2020-07-09T16:39:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA0MDQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM5MzU4Nw==", "url": "https://github.com/apache/kafka/pull/8999#discussion_r452393587", "bodyText": "We only add elements to the List and then iterate over it. A LinkedList seems slightly better for this case.", "author": "dajac", "createdAt": "2020-07-09T17:57:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA0MDQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM5NTk2NA==", "url": "https://github.com/apache/kafka/pull/8999#discussion_r452395964", "bodyText": "Not at all. This is a perfect case for ArrayList. LinkedList iteration is very slow due to pointer chasing (in comparison).", "author": "ijuma", "createdAt": "2020-07-09T18:02:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA0MDQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM5NjQ3MQ==", "url": "https://github.com/apache/kafka/pull/8999#discussion_r452396471", "bodyText": "FYI https://twitter.com/joshbloch/status/583813919019573248 :)", "author": "ijuma", "createdAt": "2020-07-09T18:03:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA0MDQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQwMDc1OQ==", "url": "https://github.com/apache/kafka/pull/8999#discussion_r452400759", "bodyText": "That\u2019s good to know. I always thought that the iteration was more or less equivalent. I have learnt something today. Let me update that.", "author": "dajac", "createdAt": "2020-07-09T18:11:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA0MDQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQ0MDQ4Mw==", "url": "https://github.com/apache/kafka/pull/8999#discussion_r452440483", "bodyText": "Done.", "author": "dajac", "createdAt": "2020-07-09T19:25:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA0MDQyNA=="}], "type": "inlineReview"}, {"oid": "936182f0e12a36a469c6e9f7bff7ffe08d2a77e6", "url": "https://github.com/apache/kafka/commit/936182f0e12a36a469c6e9f7bff7ffe08d2a77e6", "message": "MINOR; Return timed out connections as a List instead of a Set", "committedDate": "2020-10-19T18:49:35Z", "type": "commit"}, {"oid": "936182f0e12a36a469c6e9f7bff7ffe08d2a77e6", "url": "https://github.com/apache/kafka/commit/936182f0e12a36a469c6e9f7bff7ffe08d2a77e6", "message": "MINOR; Return timed out connections as a List instead of a Set", "committedDate": "2020-10-19T18:49:35Z", "type": "forcePushed"}]}