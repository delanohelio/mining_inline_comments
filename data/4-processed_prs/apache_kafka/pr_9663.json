{"pr_number": 9663, "pr_title": "MINOR: Small cleanups in `AlterIsr` handling logic", "pr_createdAt": "2020-11-30T23:09:22Z", "pr_url": "https://github.com/apache/kafka/pull/9663", "timeline": [{"oid": "facb3f8e9646c60d011ff3f0e9ab546346be8fba", "url": "https://github.com/apache/kafka/commit/facb3f8e9646c60d011ff3f0e9ab546346be8fba", "message": "MINOR: Small cleanups in `AlterIsr` handling logic", "committedDate": "2020-11-30T23:06:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzEyNjc0NQ==", "url": "https://github.com/apache/kafka/pull/9663#discussion_r533126745", "bodyText": "Could we rewrite it by currying?\nBefore\n    val callbackPartial = handleAlterIsrResponse(proposedIsrState, _ : Either[Errors, LeaderAndIsr])\n\n    if (!alterIsrManager.enqueue(AlterIsrItem(topicPartition, newLeaderAndIsr, callbackPartial))) {\n      throw new IllegalStateException(s\"Failed to enqueue `AlterIsr` request with state \" +\n        s\"$newLeaderAndIsr for partition $topicPartition\")\n    }\nAfter\n    if (!alterIsrManager.enqueue(AlterIsrItem(topicPartition, newLeaderAndIsr, handleAlterIsrResponse(proposedIsrState)))) {\n      throw new IllegalStateException(s\"Failed to enqueue `AlterIsr` request with state \" +\n        s\"$newLeaderAndIsr for partition $topicPartition\")\n    }", "author": "chia7712", "createdAt": "2020-12-01T07:39:20Z", "path": "core/src/main/scala/kafka/cluster/Partition.scala", "diffHunk": "@@ -1372,23 +1390,27 @@ class Partition(val topicPartition: TopicPartition,\n    * Since our error was non-retryable we are okay staying in this state until we see new metadata from UpdateMetadata\n    * or LeaderAndIsr\n    */\n-  private def handleAlterIsrResponse(proposedIsr: Set[Int], result: Either[Errors, LeaderAndIsr]): Unit = {\n+  private def handleAlterIsrResponse(proposedIsrState: IsrState, result: Either[Errors, LeaderAndIsr]): Unit = {", "originalCommit": "facb3f8e9646c60d011ff3f0e9ab546346be8fba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a799073309c9612fba9e2d4e987597aedb149ddc", "url": "https://github.com/apache/kafka/commit/a799073309c9612fba9e2d4e987597aedb149ddc", "message": "Use curryed `handleAlterIsrResponse`", "committedDate": "2020-12-01T16:35:50Z", "type": "commit"}]}