{"pr_number": 9486, "pr_title": "KAFKA-9381: Fix publishing valid scaladoc for streams-scala", "pr_createdAt": "2020-10-23T17:28:01Z", "pr_url": "https://github.com/apache/kafka/pull/9486", "timeline": [{"oid": "deec3cad53a99c19ccb44b8a9ab4bf84e99a72a7", "url": "https://github.com/apache/kafka/commit/deec3cad53a99c19ccb44b8a9ab4bf84e99a72a7", "message": "KAFKA-9381: Fix releaseTarGz to publish valid scaladoc files", "committedDate": "2020-10-23T17:20:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA3Mzc0NA==", "url": "https://github.com/apache/kafka/pull/9486#discussion_r511073744", "bodyText": "Hmm, seems weird to require scaladoc when building jars.", "author": "ijuma", "createdAt": "2020-10-23T18:38:57Z", "path": "build.gradle", "diffHunk": "@@ -1439,7 +1440,7 @@ project(':streams:streams-scala') {\n   }\n \n   jar {\n-    dependsOn 'copyDependantLibs'\n+    dependsOn 'copyDependantLibs' , 'scaladocJar'", "originalCommit": "deec3cad53a99c19ccb44b8a9ab4bf84e99a72a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA4MjM1OA==", "url": "https://github.com/apache/kafka/pull/9486#discussion_r511082358", "bodyText": "@ijuma good point, I've removed it and still get the required doc jars", "author": "bbejeck", "createdAt": "2020-10-23T18:52:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA3Mzc0NA=="}], "type": "inlineReview"}, {"oid": "d7889fee4bc9718df0140818e4089c9983a701f8", "url": "https://github.com/apache/kafka/commit/d7889fee4bc9718df0140818e4089c9983a701f8", "message": "KAFKA-9381: remove require scaladoc from building jars", "committedDate": "2020-10-23T18:51:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTEzNTkxNA==", "url": "https://github.com/apache/kafka/pull/9486#discussion_r511135914", "bodyText": "Do we actually need to do this? I don't see any other line here that would copy JavaDocs-jar into the lib directory?\n\\cc @ijuma", "author": "mjsax", "createdAt": "2020-10-23T20:17:38Z", "path": "build.gradle", "diffHunk": "@@ -942,6 +942,7 @@ project(':core') {\n     from(project(':streams').jar) { into(\"libs/\") }\n     from(project(':streams').configurations.runtime) { into(\"libs/\") }\n     from(project(':streams:streams-scala').jar) { into(\"libs/\") }\n+    from(project(':streams:streams-scala').configurations.archives.artifacts.files.filter { file -> file.name.matches(\".*scaladoc.*\")}) { into(\"libs/\") }", "originalCommit": "d7889fee4bc9718df0140818e4089c9983a701f8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "894c88be81da27eefb616fdfbf7734658d2efb32", "url": "https://github.com/apache/kafka/commit/894c88be81da27eefb616fdfbf7734658d2efb32", "message": "KAFKA-9381: don't publish core scaladoc files", "committedDate": "2020-10-23T20:31:58Z", "type": "commit"}, {"oid": "39561df53abdc246a9029a3720baa1b5d8876ab6", "url": "https://github.com/apache/kafka/commit/39561df53abdc246a9029a3720baa1b5d8876ab6", "message": "KAFKA-9381: remove adding docs jars to releaseTarGz", "committedDate": "2020-10-23T22:07:33Z", "type": "commit"}, {"oid": "a23d3cb74beffee24dd44abeaeac51ef948184a3", "url": "https://github.com/apache/kafka/commit/a23d3cb74beffee24dd44abeaeac51ef948184a3", "message": "KAFKA-9381: disable scaladoc for core", "committedDate": "2020-10-23T22:36:36Z", "type": "commit"}, {"oid": "b9fb1d799dabf3e5fd1e768b03ffbdfe07793fdd", "url": "https://github.com/apache/kafka/commit/b9fb1d799dabf3e5fd1e768b03ffbdfe07793fdd", "message": "KAFKA-9381: only generate scaladoc jar files for streams-scala", "committedDate": "2020-10-26T15:59:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0MDI1MQ==", "url": "https://github.com/apache/kafka/pull/9486#discussion_r512140251", "bodyText": "Do we still need this with your latest change? Also, can you please check the indenting generally? It should be two spaces.", "author": "ijuma", "createdAt": "2020-10-26T17:26:17Z", "path": "build.gradle", "diffHunk": "@@ -731,6 +728,9 @@ project(':core') {\n   println \"Building project 'core' with Scala version ${versions.scala}\"\n \n   apply plugin: 'scala'\n+  scaladoc {\n+      enabled = false\n+  }", "originalCommit": "b9fb1d799dabf3e5fd1e768b03ffbdfe07793fdd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0NTc2Mg==", "url": "https://github.com/apache/kafka/pull/9486#discussion_r512145762", "bodyText": "Do we still need this with your latest change?\n\nI thought about taking it out, but I left it in as a fail-safe, thinking that if the build file changes somehow enabling scaladoc for all submodules, core will only provide the scaladoc jar file with the license and manifest.\nI don't have a strong opinion on this, so I can remove if you want me to.\nAck on the indenting", "author": "bbejeck", "createdAt": "2020-10-26T17:34:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0MDI1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3ODM0OQ==", "url": "https://github.com/apache/kafka/pull/9486#discussion_r512178349", "bodyText": "ok, let's maybe add a comment explaining it then.", "author": "ijuma", "createdAt": "2020-10-26T18:26:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0MDI1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIzMTcyNA==", "url": "https://github.com/apache/kafka/pull/9486#discussion_r512231724", "bodyText": "ack", "author": "bbejeck", "createdAt": "2020-10-26T19:59:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0MDI1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjI0NDUxNQ==", "url": "https://github.com/apache/kafka/pull/9486#discussion_r512244515", "bodyText": "I tweaked it a bit", "author": "ijuma", "createdAt": "2020-10-26T20:22:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE0MDI1MQ=="}], "type": "inlineReview"}, {"oid": "c20873300373ff5a58d496f245ee473e4eb37c1a", "url": "https://github.com/apache/kafka/commit/c20873300373ff5a58d496f245ee473e4eb37c1a", "message": "KAFKA-9381: spacing fixes", "committedDate": "2020-10-26T17:56:10Z", "type": "commit"}, {"oid": "b7023a163b38f58e786c31d03416fd02f2edd779", "url": "https://github.com/apache/kafka/commit/b7023a163b38f58e786c31d03416fd02f2edd779", "message": "KAFKA-9381: Add comment about why we have the scaladoc disabled block.", "committedDate": "2020-10-26T19:58:40Z", "type": "commit"}, {"oid": "a5b9e6e65cb3d7b2918c3bb07ff76b9820e15704", "url": "https://github.com/apache/kafka/commit/a5b9e6e65cb3d7b2918c3bb07ff76b9820e15704", "message": "Minor tweaks", "committedDate": "2020-10-26T20:22:11Z", "type": "commit"}]}