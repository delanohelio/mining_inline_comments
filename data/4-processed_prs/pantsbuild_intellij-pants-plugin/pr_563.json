{"pr_number": 563, "pr_title": "Run \"fastpass amend\" in background", "pr_createdAt": "2020-09-01T11:35:00Z", "pr_url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/563", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA4MDkyNg==", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/563#discussion_r481080926", "bodyText": "Can we also edit the text \"Create new BSP project based on this Pants project\"? It doesn't appear in this property file.", "author": "olafurpg", "createdAt": "2020-09-01T11:54:56Z", "path": "common/com/twitter/intellij/pants/PantsBundle.properties", "diffHunk": "@@ -58,7 +58,7 @@ pants.settings.text.use.intellij.compiler=Use the IntelliJ compiler [Experimenta\n pants.settings.text.use.intellij.compiler.help.messasge=If your project does not work with IntelliJ compiler out of the box, please try to conform the code structure to 1:1:1.\n pants.settings.text.use.intellij.compiler.help.messasge.link=https://www.pantsbuild.org/build_files.html#target-granularity\n \n-pants.bsp.select.targets=Amend BSP Project\n+pants.bsp.select.targets=Amend Fastpass Project", "originalCommit": "47154167a3a3c242973349908e4998d23b808cc5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA4MzA1OA==", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/563#discussion_r481083058", "bodyText": "nit: can we use a Executors.newSingleThreadScheduledExecutor() and .scheduleWithFixedDelay(...) instead? Feel free to ignore, not sure what's the idiomatic way to achieve this.", "author": "olafurpg", "createdAt": "2020-09-01T11:58:47Z", "path": "src/com/twitter/intellij/pants/bsp/FastpassUtils.java", "diffHunk": "@@ -248,4 +207,32 @@ private static String toString(InputStream process) throws IOException {\n         ))\n     );\n   }\n+\n+  /**\n+   * Instead of of JDK9's CompletableFuture::onExit\n+   */\n+  @NotNull\n+  public static CompletableFuture<Process> onExit(@NotNull Process process) {\n+    return CompletableFuture.supplyAsync(() -> {", "originalCommit": "47154167a3a3c242973349908e4998d23b808cc5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTEwNTU3OQ==", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/563#discussion_r481105579", "bodyText": "I don't need this delay at all, I just used it for debugging, nvm", "author": "tpasternak", "createdAt": "2020-09-01T12:39:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA4MzA1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA4Mzg0NQ==", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/563#discussion_r481083845", "bodyText": "Feel free to ignore this suggestion\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Thread.sleep(15000);\n          \n          \n            \n                    Thread.sleep(java.util.concurrent.TimeUnit.SECONDS.toMillis(15));", "author": "olafurpg", "createdAt": "2020-09-01T12:00:06Z", "path": "src/com/twitter/intellij/pants/bsp/FastpassUtils.java", "diffHunk": "@@ -248,4 +207,32 @@ private static String toString(InputStream process) throws IOException {\n         ))\n     );\n   }\n+\n+  /**\n+   * Instead of of JDK9's CompletableFuture::onExit\n+   */\n+  @NotNull\n+  public static CompletableFuture<Process> onExit(@NotNull Process process) {\n+    return CompletableFuture.supplyAsync(() -> {\n+      try {\n+        Thread.sleep(15000);", "originalCommit": "47154167a3a3c242973349908e4998d23b808cc5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA4NjIyNw==", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/563#discussion_r481086227", "bodyText": "Can you explain why we sleep 15 seconds? What happens if the amend process completes faster than 15 seconds?", "author": "olafurpg", "createdAt": "2020-09-01T12:04:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA4Mzg0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA5ODA5NA==", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/563#discussion_r481098094", "bodyText": "Oh, sorry, I used it only for debugging! It should be removed", "author": "tpasternak", "createdAt": "2020-09-01T12:26:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA4Mzg0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTkxMDc4Nw==", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/563#discussion_r481910787", "bodyText": "For consistency with other commands\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          text=\"Create new fastpass project based on this Pants project\">\n          \n          \n            \n                          text=\"Create new Fastpass project based on this Pants project\">", "author": "olafurpg", "createdAt": "2020-09-02T08:58:35Z", "path": "resources/META-INF/plugin.xml", "diffHunk": "@@ -64,7 +64,7 @@\n       </action>\n       <action id=\"com.twitter.intellij.pants.ui.PantsToBspProjectAction\"\n               class=\"com.twitter.intellij.pants.ui.PantsToBspProjectAction\"\n-              text=\"Create new BSP project based on this Pants project\">\n+              text=\"Create new fastpass project based on this Pants project\">", "originalCommit": "2d52d9f2b427f8fc2cfa600e1182a8b25fb77709", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTkxMDg4OQ==", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/563#discussion_r481910889", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            pants.message.amend.in.progress=Fastpass Amend already in progress\n          \n          \n            \n            pants.message.amend.in.progress=Fastpass amend already in progress", "author": "olafurpg", "createdAt": "2020-09-02T08:58:40Z", "path": "common/com/twitter/intellij/pants/PantsBundle.properties", "diffHunk": "@@ -77,3 +77,4 @@ pants.bsp.msg.box.amend.title=BSP Amend\n pants.bsp.msg.box.specs.unchanged.content=Unchanged target specs, no import necessary\n pants.bsp.file.editor.amend.notification.title=To edit this file, convert ''{0}'' to source dependency\n pants.bsp.editor.convert.button=Convert\n+pants.message.amend.in.progress=Fastpass Amend already in progress", "originalCommit": "2d52d9f2b427f8fc2cfa600e1182a8b25fb77709", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "78e91a5b580a2cd3f0ff86f12537258d59d3e8db", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/78e91a5b580a2cd3f0ff86f12537258d59d3e8db", "message": "Run \"Fastpass amend\" in background", "committedDate": "2020-09-02T16:08:50Z", "type": "commit"}, {"oid": "6176fe029ff3dcbf1a75309342cab8f7e92883b1", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/6176fe029ff3dcbf1a75309342cab8f7e92883b1", "message": "Label modifications", "committedDate": "2020-09-02T16:08:50Z", "type": "commit"}, {"oid": "c9ce1160075837b309bc2379017e95c65310dbf9", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/c9ce1160075837b309bc2379017e95c65310dbf9", "message": "Change fastpass -> Fastpass in label\n\nCo-authored-by: \u00d3lafur P\u00e1ll Geirsson <olafurpg@gmail.com>", "committedDate": "2020-09-02T19:04:42Z", "type": "commit"}, {"oid": "3f7b4d505aafc3afe6d453bc2d9ddb81424c9238", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/3f7b4d505aafc3afe6d453bc2d9ddb81424c9238", "message": "Change Amend -> amend in label\n\nCo-authored-by: \u00d3lafur P\u00e1ll Geirsson <olafurpg@gmail.com>", "committedDate": "2020-09-02T19:05:00Z", "type": "commit"}]}