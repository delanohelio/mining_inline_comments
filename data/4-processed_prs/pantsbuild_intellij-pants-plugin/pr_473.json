{"pr_number": 473, "pr_title": "Contribute available build target types for completions inside of BUILD files", "pr_createdAt": "2020-01-08T13:45:10Z", "pr_url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/473", "timeline": [{"oid": "3f31abd0f6dce9def1a07ba68465d6b5e0994130", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/3f31abd0f6dce9def1a07ba68465d6b5e0994130", "message": "Contribute avaialable build target types for completions inside of BUILD files.", "committedDate": "2020-01-08T10:14:16Z", "type": "commit"}, {"oid": "af478bc194e1846ee342106aac91e9758a8f862e", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/af478bc194e1846ee342106aac91e9758a8f862e", "message": "Check based on context if both dependencies contributions and target ones are elegible", "committedDate": "2020-01-08T10:14:16Z", "type": "commit"}, {"oid": "84fd1c573c0d88e401e8d45a25b5924ba032ee86", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/84fd1c573c0d88e401e8d45a25b5924ba032ee86", "message": "Replace target path with full addresses", "committedDate": "2020-01-09T15:15:45Z", "type": "forcePushed"}, {"oid": "8f760e88f95a2f7f91ef97bf7a631049869ed338", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/8f760e88f95a2f7f91ef97bf7a631049869ed338", "message": "Replace target path with full addresses", "committedDate": "2020-01-09T15:16:25Z", "type": "forcePushed"}, {"oid": "13332313c95e9b1a682873c19766680fe02ea8c2", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/13332313c95e9b1a682873c19766680fe02ea8c2", "message": "Replace target path with full addresses", "committedDate": "2020-01-09T15:24:24Z", "type": "commit"}, {"oid": "13332313c95e9b1a682873c19766680fe02ea8c2", "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/13332313c95e9b1a682873c19766680fe02ea8c2", "message": "Replace target path with full addresses", "committedDate": "2020-01-09T15:24:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3Njk1NA==", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/473#discussion_r364976954", "bodyText": "Thanks for the doc!", "author": "wisechengyi", "createdAt": "2020-01-09T21:50:22Z", "path": "src/com/twitter/intellij/pants/index/PantsAddressesIndex.java", "diffHunk": "@@ -0,0 +1,114 @@\n+// Copyright 2016 Pants project contributors (see CONTRIBUTORS.md).\n+// Licensed under the Apache License, Version 2.0 (see LICENSE).\n+\n+package com.twitter.intellij.pants.index;\n+\n+import com.intellij.openapi.fileTypes.UnknownFileType;\n+import com.intellij.openapi.util.io.FileUtil;\n+import com.intellij.openapi.vfs.VirtualFile;\n+import com.intellij.psi.PsiFile;\n+import com.intellij.util.indexing.DataIndexer;\n+import com.intellij.util.indexing.FileBasedIndex;\n+import com.intellij.util.indexing.FileContent;\n+import com.intellij.util.indexing.ID;\n+import com.intellij.util.indexing.ScalarIndexExtension;\n+import com.intellij.util.io.EnumeratorStringDescriptor;\n+import com.intellij.util.io.KeyDescriptor;\n+import com.twitter.intellij.pants.model.PantsTargetAddress;\n+import com.twitter.intellij.pants.util.PantsPsiUtil;\n+import com.twitter.intellij.pants.util.PantsUtil;\n+import org.jetbrains.annotations.NotNull;\n+\n+import java.io.File;\n+import java.util.Collection;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;\n+\n+public class PantsAddressesIndex extends ScalarIndexExtension<String> {\n+  public static final ID<String, Void> NAME = ID.create(\"PantsAddressesIndex\");\n+\n+  public static Collection<String> getAddresses(@NotNull PsiFile file) {\n+    // We need to make sure that the files really belong to the project.\n+    // As stated in http://www.jetbrains.org/intellij/sdk/docs/basics/indexing_and_psi_stubs/file_based_indexes.html#accessing-a-file-based-index\n+    // it \"may also contain additional keys not currently found in the project.\"", "originalCommit": "13332313c95e9b1a682873c19766680fe02ea8c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}