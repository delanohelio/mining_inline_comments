{"pr_number": 639, "pr_title": "SO-4219: Create performance test for comparing sets", "pr_createdAt": "2020-08-17T15:34:36Z", "pr_url": "https://github.com/b2ihealthcare/snow-owl/pull/639", "timeline": [{"oid": "c865f922e648550e206fe203fc88c39e6b458029", "url": "https://github.com/b2ihealthcare/snow-owl/commit/c865f922e648550e206fe203fc88c39e6b458029", "message": "SO-4219: add performance test for comparing sets", "committedDate": "2020-08-17T15:31:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA0MjA5NQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/639#discussion_r472042095", "bodyText": "Since you are already using the Java API, which supports timeouts, let's use that for the test case, specify the desired 1 second execution time here with getSync(1, TimeUnit.SECONDS).", "author": "cmark", "createdAt": "2020-08-18T09:25:13Z", "path": "snomed/com.b2international.snowowl.snomed.core.rest.tests/src/com/b2international/snowowl/snomed/core/rest/compare/SnomedMapTypeReferenceSetCompareTest.java", "diffHunk": "@@ -122,6 +123,23 @@ public void compareDifferentSimpleMapTypeReferenceSets() {\n \t\tassertThat(result.getChangedMembers().values()).anyMatch(m -> TARGET_CODE_3.equals(m.getTargetComponentURI().identifier()));\n \t}\n \t\n+\t@Test\n+\tpublic void compareLargeSimpleMapTypeReferenceSets() {\n+\t\tlong startTime = StopWatch.time();\n+\t\tfinal String baseSimpleMapReferenceSet = \"900000000000497000\";\n+\t\tfinal String  compareSimpleMapReferenceSet = \"447562003\";\n+\t\tComponentURI baseURI = ComponentURI.of(SnomedTerminologyComponentConstants.SNOMED_SHORT_NAME, SnomedTerminologyComponentConstants.REFSET_NUMBER, baseSimpleMapReferenceSet);\n+\t\tComponentURI compareURI = ComponentURI.of(SnomedTerminologyComponentConstants.SNOMED_SHORT_NAME, SnomedTerminologyComponentConstants.REFSET_NUMBER, compareSimpleMapReferenceSet);\n+\t\t\n+\t\tCodeSystemRequests.prepareConceptMapCompare(baseURI, compareURI)\n+\t\t\t\t.build(codeSystemURI)\n+\t\t\t\t.execute(getBus())\n+\t\t\t\t.getSync();", "originalCommit": "c865f922e648550e206fe203fc88c39e6b458029", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA0OTA1NQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/639#discussion_r472049055", "bodyText": "Done", "author": "molnarlaura", "createdAt": "2020-08-18T09:37:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA0MjA5NQ=="}], "type": "inlineReview"}, {"oid": "84c0eefb0307e168f29199cc8a0386795b233c83", "url": "https://github.com/b2ihealthcare/snow-owl/commit/84c0eefb0307e168f29199cc8a0386795b233c83", "message": "SO-4219: use timeout when preparing compare request", "committedDate": "2020-08-18T09:36:32Z", "type": "commit"}, {"oid": "09c4728622eb48db0744992a4f672d2644df9dac", "url": "https://github.com/b2ihealthcare/snow-owl/commit/09c4728622eb48db0744992a4f672d2644df9dac", "message": "SO-4219: remove stopwatch when using timeout", "committedDate": "2020-08-18T09:53:01Z", "type": "commit"}]}