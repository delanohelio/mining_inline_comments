{"pr_number": 715, "pr_title": "SO-4477: Filter by ComponentURI instead of code only in ConceptMap and RefSetMemberSearch API", "pr_createdAt": "2020-11-16T16:02:53Z", "pr_url": "https://github.com/b2ihealthcare/snow-owl/pull/715", "timeline": [{"oid": "b899fd4ea673fdc54d5de6f1dfb43bc74d3ca52e", "url": "https://github.com/b2ihealthcare/snow-owl/commit/b899fd4ea673fdc54d5de6f1dfb43bc74d3ca52e", "message": "SO-4477: filter on ComponentURI instead of code only", "committedDate": "2020-11-16T14:50:18Z", "type": "commit"}, {"oid": "7855c4d3d3f7b5321ae123fd375600c211199a74", "url": "https://github.com/b2ihealthcare/snow-owl/commit/7855c4d3d3f7b5321ae123fd375600c211199a74", "message": "SO-4477: fix test case", "committedDate": "2020-11-16T15:24:36Z", "type": "commit"}, {"oid": "369cffa73672cb8d28c684406ccfaa23199da349", "url": "https://github.com/b2ihealthcare/snow-owl/commit/369cffa73672cb8d28c684406ccfaa23199da349", "message": "SO-4477: filter by componentUri's code system if present", "committedDate": "2020-11-16T15:56:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQyMTQ5OQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#discussion_r524421499", "bodyText": "I would add a String argument version as well, just to make it easier to filter without parsing into a bunch of ComponentURIs.", "author": "cmark", "createdAt": "2020-11-16T16:57:24Z", "path": "core/com.b2international.snowowl.core/src/com/b2international/snowowl/core/request/ConceptMapMappingSearchRequestBuilder.java", "diffHunk": "@@ -53,12 +54,8 @@ public ConceptMapMappingSearchRequestBuilder filterByMapTargets(Iterable<String>\n \t\treturn addOption(OptionKey.MAP_TARGET, mapTargets);\n \t}\n \t\n-\tpublic ConceptMapMappingSearchRequestBuilder filterByComponentId(String componentId) {\n-\t\treturn addOption(OptionKey.COMPONENT, componentId);\n-\t}\n-\t\n-\tpublic ConceptMapMappingSearchRequestBuilder filterByComponentIds(Iterable<String> componentIds) {\n-\t\treturn addOption(OptionKey.COMPONENT, componentIds);\n+\tpublic ConceptMapMappingSearchRequestBuilder filterByComponentUri(ComponentURI uri) {", "originalCommit": "369cffa73672cb8d28c684406ccfaa23199da349", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzIyMzM1Mg==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#discussion_r527223352", "bodyText": "But you still parse it into ComponentURIs. That is not actually necessary since you will be deserializing into a String to match the field in the index. Could you please use raw Strings instead? Thanks!", "author": "cmark", "createdAt": "2020-11-19T21:46:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQyMTQ5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQyMjAzNQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#discussion_r524422035", "bodyText": "This option should still support multi-valued search.", "author": "cmark", "createdAt": "2020-11-16T16:58:08Z", "path": "snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/datastore/request/SnomedConceptMapSearchRequestEvaluator.java", "diffHunk": "@@ -264,7 +266,7 @@ private SnomedReferenceSetMembers fetchRefsetMembers(CodeSystemURI uri, BranchCo\n \t\tfinal String searchAfter = search.get(OptionKey.AFTER, String.class);\n \t\tfinal List<ExtendedLocale> locales = search.getList(OptionKey.LOCALES, ExtendedLocale.class);\n \t\tfinal Collection<String> referencedComponentIds = search.containsKey(OptionKey.REFERENCED_COMPONENT) ? search.getCollection(OptionKey.REFERENCED_COMPONENT, String.class) : null;\n-\t\tfinal Collection<String> componentIds = search.containsKey(OptionKey.COMPONENT) ? search.getCollection(OptionKey.COMPONENT, String.class) : null;\n+\t\tfinal ComponentURI componentUri = search.containsKey(OptionKey.COMPONENT_URI) ? search.get(OptionKey.COMPONENT_URI, ComponentURI.class) : null;", "originalCommit": "369cffa73672cb8d28c684406ccfaa23199da349", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "109c4f27ce67bae93ff7587fff29243f0d5067e0", "url": "https://github.com/b2ihealthcare/snow-owl/commit/109c4f27ce67bae93ff7587fff29243f0d5067e0", "message": "SO-4477: support filtering on multiple componentUris", "committedDate": "2020-11-17T13:45:40Z", "type": "commit"}, {"oid": "fd8dd721421074c31630536169170984bc2c0ccc", "url": "https://github.com/b2ihealthcare/snow-owl/commit/fd8dd721421074c31630536169170984bc2c0ccc", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4477-supply-component-uri-in-all-map-page", "committedDate": "2020-11-17T14:11:47Z", "type": "commit"}, {"oid": "c0224d513cd93dc03f80488069be178a371e4d81", "url": "https://github.com/b2ihealthcare/snow-owl/commit/c0224d513cd93dc03f80488069be178a371e4d81", "message": "SO-4477: use collection instead of List", "committedDate": "2020-11-17T14:18:40Z", "type": "commit"}, {"oid": "def601e248a7af9dddca4e37750d3b8bd03f58d8", "url": "https://github.com/b2ihealthcare/snow-owl/commit/def601e248a7af9dddca4e37750d3b8bd03f58d8", "message": "SO-4477: if refset's map target terminology contains more than 1\n\ncodeSystem consider as unspecified", "committedDate": "2020-11-17T15:20:49Z", "type": "commit"}, {"oid": "badc52dff78a8fdb4b9953aedefd8a637881abf2", "url": "https://github.com/b2ihealthcare/snow-owl/commit/badc52dff78a8fdb4b9953aedefd8a637881abf2", "message": "SO-4477: add test on filtering by multiple componentUri", "committedDate": "2020-11-17T15:21:14Z", "type": "commit"}, {"oid": "f89726fb069f0e134c594c32cb66553cc7f9fef7", "url": "https://github.com/b2ihealthcare/snow-owl/commit/f89726fb069f0e134c594c32cb66553cc7f9fef7", "message": "SO-4477: use assertEquals when asserting total result", "committedDate": "2020-11-17T15:36:22Z", "type": "commit"}, {"oid": "1b4a3215fbd0ed298546fa61bfb54b4266c0fb27", "url": "https://github.com/b2ihealthcare/snow-owl/commit/1b4a3215fbd0ed298546fa61bfb54b4266c0fb27", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4477-supply-component-uri-in-all-map-page", "committedDate": "2020-11-19T16:28:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzIyMzUyNQ==", "url": "https://github.com/b2ihealthcare/snow-owl/pull/715#discussion_r527223525", "bodyText": "Same here.", "author": "cmark", "createdAt": "2020-11-19T21:46:59Z", "path": "snomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/datastore/request/SnomedRefSetMemberSearchRequestBuilder.java", "diffHunk": "@@ -91,11 +92,19 @@ public SnomedRefSetMemberSearchRequestBuilder filterByReferencedComponentTypes(I\n \t\treturn addOption(OptionKey.REFERENCED_COMPONENT_TYPE, referencedComponentTypes);\n \t}\n \t\n+\tpublic SnomedRefSetMemberSearchRequestBuilder filterByComponentUri(String uri) {\n+\t\treturn filterByComponentUri(ComponentURI.of(uri));", "originalCommit": "1b4a3215fbd0ed298546fa61bfb54b4266c0fb27", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b59f456f0aa0e15858f24d160e7bc296462f3383", "url": "https://github.com/b2ihealthcare/snow-owl/commit/b59f456f0aa0e15858f24d160e7bc296462f3383", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4477-supply-component-uri-in-all-map-page", "committedDate": "2020-11-20T15:04:27Z", "type": "commit"}, {"oid": "7a29a4fa133618ff7a4d5fd54a602003d435d55e", "url": "https://github.com/b2ihealthcare/snow-owl/commit/7a29a4fa133618ff7a4d5fd54a602003d435d55e", "message": "SO-4477: store components String representation and rename methods", "committedDate": "2020-11-20T15:20:14Z", "type": "commit"}, {"oid": "13518ce7521dce9dc47e2ca6cd696653e326ea00", "url": "https://github.com/b2ihealthcare/snow-owl/commit/13518ce7521dce9dc47e2ca6cd696653e326ea00", "message": "SO-4477: rename method parameters", "committedDate": "2020-11-20T15:24:57Z", "type": "commit"}, {"oid": "7f4f7c1b29151f2f48ead0d04d18e3c357a36cd2", "url": "https://github.com/b2ihealthcare/snow-owl/commit/7f4f7c1b29151f2f48ead0d04d18e3c357a36cd2", "message": "SO-4477: fix test cases", "committedDate": "2020-11-20T16:13:59Z", "type": "commit"}, {"oid": "d5fbc552c34954032b7f1b19e7b8c3cb34ad7782", "url": "https://github.com/b2ihealthcare/snow-owl/commit/d5fbc552c34954032b7f1b19e7b8c3cb34ad7782", "message": "SO-4477: rename method parameters", "committedDate": "2020-11-20T16:18:32Z", "type": "commit"}, {"oid": "61432eab258aa86b55bf4a22e6028790eb454cc7", "url": "https://github.com/b2ihealthcare/snow-owl/commit/61432eab258aa86b55bf4a22e6028790eb454cc7", "message": "SO-4477: apply filter properly", "committedDate": "2020-11-20T16:27:24Z", "type": "commit"}, {"oid": "66bd2d3a4739cfa3a13bfaf0e70baed7f5118a38", "url": "https://github.com/b2ihealthcare/snow-owl/commit/66bd2d3a4739cfa3a13bfaf0e70baed7f5118a38", "message": "SO-4477: remove unnecessary builder", "committedDate": "2020-11-20T16:30:46Z", "type": "commit"}, {"oid": "1a6b12a4cb84960947348ffc4fe76c3fa1d9898c", "url": "https://github.com/b2ihealthcare/snow-owl/commit/1a6b12a4cb84960947348ffc4fe76c3fa1d9898c", "message": "SO-4477: remove whitespace", "committedDate": "2020-11-20T16:31:37Z", "type": "commit"}, {"oid": "bcfcd8edaabe237f1b552926470a7caa5cd447cd", "url": "https://github.com/b2ihealthcare/snow-owl/commit/bcfcd8edaabe237f1b552926470a7caa5cd447cd", "message": "Merge remote-tracking branch 'origin/7.x' into issue/SO-4477-supply-component-uri-in-all-map-page", "committedDate": "2020-11-20T16:42:46Z", "type": "commit"}, {"oid": "f725c7ca28592b73d71ca4761c89652bb4893a63", "url": "https://github.com/b2ihealthcare/snow-owl/commit/f725c7ca28592b73d71ca4761c89652bb4893a63", "message": "Merge branch '7.x' into\nissue/SO-4477-supply-component-uri-in-all-map-page\n\nConflicts:\n\tsnomed/com.b2international.snowowl.snomed.datastore/src/com/b2international/snowowl/snomed/datastore/request/SnomedConceptMapSearchRequestEvaluator.java", "committedDate": "2020-11-22T17:00:42Z", "type": "commit"}]}