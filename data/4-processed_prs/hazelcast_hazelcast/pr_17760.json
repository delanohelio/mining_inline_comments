{"pr_number": 17760, "pr_title": "Fixes for compatibility tests", "pr_createdAt": "2020-10-26T10:37:05Z", "pr_url": "https://github.com/hazelcast/hazelcast/pull/17760", "timeline": [{"oid": "bdab769515eef3e118c998b5fc785abaed2c8a35", "url": "https://github.com/hazelcast/hazelcast/commit/bdab769515eef3e118c998b5fc785abaed2c8a35", "message": "Do not reference CacheEntryEvents which do not matter\n\nIn SimpleEntryListener for tests, we only care about\ncounting the number of events. Referencing each\nCacheEntryEvent breaks compatibility tests due to\ncurrent inability to reference CacheEntryEvents\nacross classloaders. So instead of performing a\nfor-each loop, we just use the iterator interface and\nincrement the respective counters.", "committedDate": "2020-10-26T10:13:06Z", "type": "commit"}, {"oid": "09f26f5144eeaa6beb8fff1db74839a8f6907f1a", "url": "https://github.com/hazelcast/hazelcast/commit/09f26f5144eeaa6beb8fff1db74839a8f6907f1a", "message": "Moves agent implementation to hazelcast-build-utils\n\nWhen the FinalRemovalAgent is attached at runtime,\nit is possible that some classes may have already been\nloaded, resulting in random test failures in\ncompatibility tests. The hazelcast-build-utils\nartifact declares the agent in its manifest\nso it can be used with java -javaagent on the\ncommand line.", "committedDate": "2020-10-26T10:19:06Z", "type": "commit"}, {"oid": "bba82180352154ce19a9e96f24c6ab63bdd93143", "url": "https://github.com/hazelcast/hazelcast/commit/bba82180352154ce19a9e96f24c6ab63bdd93143", "message": "Adds AbstractInvocationFuture#join to final methods\n\nfor processing by FinalRemovalAgent.", "committedDate": "2020-10-26T10:21:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ3Mzc1Mw==", "url": "https://github.com/hazelcast/hazelcast/pull/17760#discussion_r512473753", "bodyText": "minor: URLClassLoader.getURLs()?", "author": "taburet", "createdAt": "2020-10-27T07:46:59Z", "path": "hazelcast/src/test/java/com/hazelcast/test/starter/HazelcastAPIDelegatingClassloader.java", "diffHunk": "@@ -50,6 +51,7 @@\n \n     static final Set<String> DELEGATION_WHITE_LIST;\n \n+    private final URL[] urls;", "originalCommit": "bba82180352154ce19a9e96f24c6ab63bdd93143", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5NTY5Mw==", "url": "https://github.com/hazelcast/hazelcast/pull/17760#discussion_r512495693", "bodyText": "good catch", "author": "vbekiaris", "createdAt": "2020-10-27T08:27:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ3Mzc1Mw=="}], "type": "inlineReview"}, {"oid": "2f159148ccd63d4491bc24f28a93f6ff08da31a6", "url": "https://github.com/hazelcast/hazelcast/commit/2f159148ccd63d4491bc24f28a93f6ff08da31a6", "message": "do not introduce HazelcastAPIDelegatingClassloader#urls field", "committedDate": "2020-10-27T08:26:22Z", "type": "commit"}]}