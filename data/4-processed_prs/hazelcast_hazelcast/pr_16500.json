{"pr_number": 16500, "pr_title": "Handle login exception when logging out", "pr_createdAt": "2020-01-20T09:01:41Z", "pr_url": "https://github.com/hazelcast/hazelcast/pull/16500", "timeline": [{"oid": "8c5b5ea4ff536a96ef937a031dd5901f4fc8be69", "url": "https://github.com/hazelcast/hazelcast/commit/8c5b5ea4ff536a96ef937a031dd5901f4fc8be69", "message": "Handle login exception when logging out\n\nMade logout last so that all steps are done even when an exception\nthrown form logout method.\n\nTests are on the enterprise repo.\n\nrelated to https://github.com/hazelcast/hazelcast/issues/16482", "committedDate": "2020-01-20T08:53:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODUxNTU3Nw==", "url": "https://github.com/hazelcast/hazelcast/pull/16500#discussion_r368515577", "bodyText": "try-catch?", "author": "kwart", "createdAt": "2020-01-20T12:10:23Z", "path": "hazelcast/src/main/java/com/hazelcast/client/impl/ClientEndpointImpl.java", "diffHunk": "@@ -215,19 +215,22 @@ public void destroy() throws LoginException {\n         destroyed = true;\n         nodeEngine.onClientDisconnected(getUuid());", "originalCommit": "8c5b5ea4ff536a96ef937a031dd5901f4fc8be69", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODUxNTYzMg==", "url": "https://github.com/hazelcast/hazelcast/pull/16500#discussion_r368515632", "bodyText": "try-catch?", "author": "kwart", "createdAt": "2020-01-20T12:10:30Z", "path": "hazelcast/src/main/java/com/hazelcast/client/impl/ClientEndpointImpl.java", "diffHunk": "@@ -215,19 +215,22 @@ public void destroy() throws LoginException {\n         destroyed = true;\n         nodeEngine.onClientDisconnected(getUuid());\n \n-        LoginContext lc = loginContext;\n-        if (lc != null) {\n-            lc.logout();\n-        }\n-\n         for (UUID registrationId : removeListenerActions.keySet()) {\n             removeAndCallRemoveAction(registrationId);", "originalCommit": "8c5b5ea4ff536a96ef937a031dd5901f4fc8be69", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODUxNTc0Nw==", "url": "https://github.com/hazelcast/hazelcast/pull/16500#discussion_r368515747", "bodyText": "try-catch?", "author": "kwart", "createdAt": "2020-01-20T12:10:48Z", "path": "hazelcast/src/main/java/com/hazelcast/client/impl/ClientEndpointImpl.java", "diffHunk": "@@ -215,19 +215,22 @@ public void destroy() throws LoginException {\n         destroyed = true;\n         nodeEngine.onClientDisconnected(getUuid());\n \n-        LoginContext lc = loginContext;\n-        if (lc != null) {\n-            lc.logout();\n-        }\n-\n         for (UUID registrationId : removeListenerActions.keySet()) {\n             removeAndCallRemoveAction(registrationId);\n         }\n \n         for (UUID txnId : transactionContextMap.keySet()) {\n             removedAndRollbackTransactionContext(txnId);", "originalCommit": "8c5b5ea4ff536a96ef937a031dd5901f4fc8be69", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}