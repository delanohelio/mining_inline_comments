{"pr_number": 830, "pr_title": "Update DinD Example", "pr_createdAt": "2020-08-31T20:29:33Z", "pr_url": "https://github.com/jenkinsci/kubernetes-plugin/pull/830", "timeline": [{"oid": "93f7f85ef78960a2605b01efa1fa106c7a38a7b2", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/93f7f85ef78960a2605b01efa1fa106c7a38a7b2", "message": "fix: the command needs to know which Dockerfile to build", "committedDate": "2020-08-31T14:41:34Z", "type": "commit"}, {"oid": "cfc2db616dea325c819ba853a2164dd1773a2e70", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/cfc2db616dea325c819ba853a2164dd1773a2e70", "message": "use writeFile instead of git", "committedDate": "2020-08-31T19:56:42Z", "type": "commit"}, {"oid": "ab2199402d73bfa67b6e1378f97a18168fcd1014", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/ab2199402d73bfa67b6e1378f97a18168fcd1014", "message": "prefer sharing a volume over using tls", "committedDate": "2020-08-31T20:21:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM4NTU4OQ==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/830#discussion_r480385589", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    writeFile encoding: 'UTF-8', file: 'Dockerfile', text: 'FROM scratch'\n          \n          \n            \n                    writeFile file: 'Dockerfile', text: 'FROM scratch'\n          \n      \n    \n    \n  \n\nunnecessary", "author": "jglick", "createdAt": "2020-08-31T20:38:18Z", "path": "examples/dind.groovy", "diffHunk": "@@ -10,26 +10,29 @@ podTemplate(yaml: '''\n apiVersion: v1\n kind: Pod\n spec:\n+  volumes:\n+  - name: docker-socket\n+    emptyDir: {}\n   containers:\n   - name: docker\n     image: docker:19.03.1\n     command:\n     - sleep\n     args:\n     - 99d\n-    env:\n-      - name: DOCKER_HOST\n-        value: tcp://localhost:2375\n+    volumeMounts:\n+    - name: docker-socket\n+      mountPath: /var/run\n   - name: docker-daemon\n     image: docker:19.03.1-dind\n     securityContext:\n       privileged: true\n-    env:\n-      - name: DOCKER_TLS_CERTDIR\n-        value: \"\"\n+    volumeMounts:\n+    - name: docker-socket\n+      mountPath: /var/run\n ''') {\n     node(POD_LABEL) {\n-        git 'https://github.com/jenkinsci/docker-jnlp-slave.git'\n+        writeFile encoding: 'UTF-8', file: 'Dockerfile', text: 'FROM scratch'", "originalCommit": "ab2199402d73bfa67b6e1378f97a18168fcd1014", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1b8c2156bcdef333c8a3cdfbab87ea80e101dfd5", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/1b8c2156bcdef333c8a3cdfbab87ea80e101dfd5", "message": "Update examples/dind.groovy\n\nCo-authored-by: Jesse Glick <jglick@cloudbees.com>", "committedDate": "2020-08-31T20:40:15Z", "type": "commit"}]}