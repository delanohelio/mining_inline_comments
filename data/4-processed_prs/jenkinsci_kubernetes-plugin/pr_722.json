{"pr_number": 722, "pr_title": "[JENKINS-60133] Remove openshift-specific behaviour", "pr_createdAt": "2020-02-27T09:36:17Z", "pr_url": "https://github.com/jenkinsci/kubernetes-plugin/pull/722", "timeline": [{"oid": "59b1274bf6293c60def54577201329efb5f2547e", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/59b1274bf6293c60def54577201329efb5f2547e", "message": "[JENKINS-60133] Remove openshift-specific behaviour", "committedDate": "2020-02-26T14:00:33Z", "type": "commit"}, {"oid": "409c7f2465a27c594f4a32f086e5256f046e3736", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/409c7f2465a27c594f4a32f086e5256f046e3736", "message": "[JENKINS-60133] Add a note in README about running in OpenShift", "committedDate": "2020-02-27T14:37:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQyNDU2Ng==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/722#discussion_r385424566", "bodyText": "A (yaml or Groovy-oriented) code sample would be appreciated here.", "author": "jglick", "createdAt": "2020-02-27T23:12:05Z", "path": "README.md", "diffHunk": "@@ -573,6 +573,21 @@ containerLog 'mongodb'\n \n Also see the online help and [examples/containerLog.groovy](examples/containerLog.groovy).\n \n+# Running on OpenShift\n+\n+OpenShift runs containers using a 'random' UID that is overriding what is specified in Docker images.\n+For this reason, you may end up with the following warning in your build\n+\n+```\n+[WARNING] HOME is set to / in the jnlp container. You may encounter troubles when using tools or ssh client. This usually happens if the uid doesnt have any entry in /etc/passwd. Please add a user to your Dockerfile or set the HOME environment variable to a valid directory in the pod template definition.\n+```\n+\n+At the moment the jenkinsci agent image is not built for OpenShift and will issue this warning.\n+\n+This issue can be circumvented in various ways:\n+* build a docker image for OpenShift in order to behave when running using an arbitrary uid.\n+* override HOME environment variable in the pod spec to use `/home/jenkins` and mount a volume to `/home/jenkins` to ensure the user running the container can write to it", "originalCommit": "409c7f2465a27c594f4a32f086e5256f046e3736", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8c8af31473b6688c42247058933661c55e47c6cb", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/8c8af31473b6688c42247058933661c55e47c6cb", "message": "Add an example for openshift", "committedDate": "2020-03-02T09:29:24Z", "type": "commit"}]}