{"pr_number": 716, "pr_title": "Adding generic setup configuration to the README.md", "pr_createdAt": "2020-02-20T22:16:08Z", "pr_url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5Nzg5Nw==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382297897", "bodyText": "Unless Jenkins is running in Kubernetes in which case the defaults work.", "author": "jglick", "createdAt": "2020-02-20T22:37:42Z", "path": "README.md", "diffHunk": "@@ -25,6 +25,30 @@ Tested with [`jenkins/jnlp-slave`](https://hub.docker.com/r/jenkins/jnlp-slave),\n see the [Docker image source code](https://github.com/jenkinsci/docker-jnlp-slave).\n \n It is not required to run the Jenkins master inside Kubernetes. \n+# Generic Setup\n+### Prerequisites\n+* A running Kubernetes cluster\n+* An instances of Jenkins installed\n+* The Jenkins Kubernetes plugin installed\n+\n+Fill in the Kubernetes plugin configuration. In order to do that, you will open the Jenkins UI and navigate to \n+\u201cManage Jenkins -> Configure System -> Cloud -> Kubernetes\u201d and enter in the \u2018Kubernetes URL\u2019 and \u2018Jenkins URL\u2019 ", "originalCommit": "6c568220e60c1a9e413c54420a816e06e74aa027", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMwNTc1NQ==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382305755", "bodyText": "I will add that point", "author": "markyjackson-taulia", "createdAt": "2020-02-20T22:57:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5Nzg5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5Nzk4Mw==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382297983", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            appropriately. To test this connection is successful you can use the `Test Connection` button to ensure there is \n          \n          \n            \n            appropriately. To test this connection is successful you can use the **Test Connection** button to ensure there is", "author": "jglick", "createdAt": "2020-02-20T22:37:57Z", "path": "README.md", "diffHunk": "@@ -25,6 +25,30 @@ Tested with [`jenkins/jnlp-slave`](https://hub.docker.com/r/jenkins/jnlp-slave),\n see the [Docker image source code](https://github.com/jenkinsci/docker-jnlp-slave).\n \n It is not required to run the Jenkins master inside Kubernetes. \n+# Generic Setup\n+### Prerequisites\n+* A running Kubernetes cluster\n+* An instances of Jenkins installed\n+* The Jenkins Kubernetes plugin installed\n+\n+Fill in the Kubernetes plugin configuration. In order to do that, you will open the Jenkins UI and navigate to \n+\u201cManage Jenkins -> Configure System -> Cloud -> Kubernetes\u201d and enter in the \u2018Kubernetes URL\u2019 and \u2018Jenkins URL\u2019 \n+appropriately. To test this connection is successful you can use the `Test Connection` button to ensure there is ", "originalCommit": "6c568220e60c1a9e413c54420a816e06e74aa027", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5ODEyMQ==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382298121", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In addition to that, in the \u2018Kubernetes Pod Template\u2019 section, we need to configure the image that will be used to \n          \n          \n            \n            In addition to that, in the **Kubernetes Pod Template** section, we need to configure the image that will be used to", "author": "jglick", "createdAt": "2020-02-20T22:38:17Z", "path": "README.md", "diffHunk": "@@ -25,6 +25,30 @@ Tested with [`jenkins/jnlp-slave`](https://hub.docker.com/r/jenkins/jnlp-slave),\n see the [Docker image source code](https://github.com/jenkinsci/docker-jnlp-slave).\n \n It is not required to run the Jenkins master inside Kubernetes. \n+# Generic Setup\n+### Prerequisites\n+* A running Kubernetes cluster\n+* An instances of Jenkins installed\n+* The Jenkins Kubernetes plugin installed\n+\n+Fill in the Kubernetes plugin configuration. In order to do that, you will open the Jenkins UI and navigate to \n+\u201cManage Jenkins -> Configure System -> Cloud -> Kubernetes\u201d and enter in the \u2018Kubernetes URL\u2019 and \u2018Jenkins URL\u2019 \n+appropriately. To test this connection is successful you can use the `Test Connection` button to ensure there is \n+adequate communication from Jenkins to the Kubernetes cluster, as seen below\n+\n+![image](Screen%20Shot%202020-02-20%20at%202.00.28%20PM.png)\n+\n+In addition to that, in the \u2018Kubernetes Pod Template\u2019 section, we need to configure the image that will be used to ", "originalCommit": "6c568220e60c1a9e413c54420a816e06e74aa027", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5OTI1Mg==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382299252", "bodyText": "This is all pretty off base I think.\nFirst of all, we do not recommend overriding the jnlp container except under unusual circumstances. You pretty much always just use the default one. For actual build steps, you use separate containers, which can be anything, and the container step.\nSecond, it is generally discouraged to even use the global pod template configuration. Better to use the podTemplate step and define your requirements directly inside the job\u2014or via some library etc.\nThe existing samples, for example in #707, show these things in action. No global configuration or custom images are required.", "author": "jglick", "createdAt": "2020-02-20T22:40:56Z", "path": "README.md", "diffHunk": "@@ -25,6 +25,30 @@ Tested with [`jenkins/jnlp-slave`](https://hub.docker.com/r/jenkins/jnlp-slave),\n see the [Docker image source code](https://github.com/jenkinsci/docker-jnlp-slave).\n \n It is not required to run the Jenkins master inside Kubernetes. \n+# Generic Setup\n+### Prerequisites\n+* A running Kubernetes cluster\n+* An instances of Jenkins installed\n+* The Jenkins Kubernetes plugin installed\n+\n+Fill in the Kubernetes plugin configuration. In order to do that, you will open the Jenkins UI and navigate to \n+\u201cManage Jenkins -> Configure System -> Cloud -> Kubernetes\u201d and enter in the \u2018Kubernetes URL\u2019 and \u2018Jenkins URL\u2019 \n+appropriately. To test this connection is successful you can use the `Test Connection` button to ensure there is \n+adequate communication from Jenkins to the Kubernetes cluster, as seen below\n+\n+![image](Screen%20Shot%202020-02-20%20at%202.00.28%20PM.png)\n+\n+In addition to that, in the \u2018Kubernetes Pod Template\u2019 section, we need to configure the image that will be used to \n+spin up the agent pod. If you have some custom requirements for your agent, you can build one more dockerfile with the \n+appropriate changes the same way we did for the Jenkins control plane. On the other hand, if you don\u2019t have unique \n+requirements \n+for your agent, you can use the default Jenkins agent image available on the official Docker hub repository. In the ", "originalCommit": "6c568220e60c1a9e413c54420a816e06e74aa027", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMwNTU4Mw==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382305583", "bodyText": "Okay, I will remove that in favor of the base jnlp container.\nAs for the podTemplate, would it make sense to give the user (in terms of steps) both options?", "author": "markyjackson-taulia", "createdAt": "2020-02-20T22:57:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5OTI1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMyMDc0Ng==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382320746", "bodyText": "I guess. The main reason to use the global pod template definition is to migrate a huge corpus of existing projects (incl. freestyle) to run on Kubernetes without changing job definitions. New users setting up new Kubernetes builds should use the podTemplate step as shown in the example snippets.", "author": "jglick", "createdAt": "2020-02-20T23:38:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5OTI1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMyMTA5NA==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382321094", "bodyText": "okay, I will add that line of wording.\nThank you for helping", "author": "markyjackson-taulia", "createdAt": "2020-02-20T23:40:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5OTI1Mg=="}], "type": "inlineReview"}, {"oid": "b133302035372cd1f8bca8eb8ce02d6ef2bf697e", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/b133302035372cd1f8bca8eb8ce02d6ef2bf697e", "message": "Adding generic setup configuration to the README.md\n\nSigned-off-by: markyjackson-taulia <marky.r.jackson@gmail.com>\n\nUpdate README.md\n\nCo-Authored-By: Jesse Glick <jglick@cloudbees.com>\n\nUpdate README.md\n\nCo-Authored-By: Jesse Glick <jglick@cloudbees.com>\n\nResolving some of @jglick comments\n\nSigned-off-by: markyjackson-taulia <marky.r.jackson@gmail.com>\n\nResolving some of @jglick comments\n\nSigned-off-by: markyjackson-taulia <marky.r.jackson@gmail.com>", "committedDate": "2020-02-20T23:48:15Z", "type": "commit"}, {"oid": "b133302035372cd1f8bca8eb8ce02d6ef2bf697e", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/b133302035372cd1f8bca8eb8ce02d6ef2bf697e", "message": "Adding generic setup configuration to the README.md\n\nSigned-off-by: markyjackson-taulia <marky.r.jackson@gmail.com>\n\nUpdate README.md\n\nCo-Authored-By: Jesse Glick <jglick@cloudbees.com>\n\nUpdate README.md\n\nCo-Authored-By: Jesse Glick <jglick@cloudbees.com>\n\nResolving some of @jglick comments\n\nSigned-off-by: markyjackson-taulia <marky.r.jackson@gmail.com>\n\nResolving some of @jglick comments\n\nSigned-off-by: markyjackson-taulia <marky.r.jackson@gmail.com>", "committedDate": "2020-02-20T23:48:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU4Njg0MA==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382586840", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * An instances of Jenkins installed\n          \n          \n            \n            * A Jenkins instance installed", "author": "Vlatombe", "createdAt": "2020-02-21T13:43:01Z", "path": "README.md", "diffHunk": "@@ -25,6 +25,32 @@ Tested with [`jenkins/jnlp-slave`](https://hub.docker.com/r/jenkins/jnlp-slave),\n see the [Docker image source code](https://github.com/jenkinsci/docker-jnlp-slave).\n \n It is not required to run the Jenkins master inside Kubernetes. \n+# Generic Setup\n+### Prerequisites\n+* A running Kubernetes cluster\n+* An instances of Jenkins installed", "originalCommit": "b133302035372cd1f8bca8eb8ce02d6ef2bf697e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU4NzE3OA==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382587178", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            It first should be noted that the main reason to use the global pod template definition is to migrate a huge corpus of \n          \n          \n            \n            It should be noted that the main reason to use the global pod template definition is to migrate a huge corpus of", "author": "Vlatombe", "createdAt": "2020-02-21T13:43:40Z", "path": "README.md", "diffHunk": "@@ -25,6 +25,32 @@ Tested with [`jenkins/jnlp-slave`](https://hub.docker.com/r/jenkins/jnlp-slave),\n see the [Docker image source code](https://github.com/jenkinsci/docker-jnlp-slave).\n \n It is not required to run the Jenkins master inside Kubernetes. \n+# Generic Setup\n+### Prerequisites\n+* A running Kubernetes cluster\n+* An instances of Jenkins installed\n+* The Jenkins Kubernetes plugin installed\n+\n+It first should be noted that the main reason to use the global pod template definition is to migrate a huge corpus of ", "originalCommit": "b133302035372cd1f8bca8eb8ce02d6ef2bf697e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjU4ODAwOQ==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r382588009", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            for your agent, you can use the default Jenkins agent image available on the official Docker hub repository. In the \n          \n          \n            \n            for your agent, you can use the default Jenkins agent image available in [Docker Hub](https://hub.docker.com). In the", "author": "Vlatombe", "createdAt": "2020-02-21T13:45:27Z", "path": "README.md", "diffHunk": "@@ -25,6 +25,32 @@ Tested with [`jenkins/jnlp-slave`](https://hub.docker.com/r/jenkins/jnlp-slave),\n see the [Docker image source code](https://github.com/jenkinsci/docker-jnlp-slave).\n \n It is not required to run the Jenkins master inside Kubernetes. \n+# Generic Setup\n+### Prerequisites\n+* A running Kubernetes cluster\n+* An instances of Jenkins installed\n+* The Jenkins Kubernetes plugin installed\n+\n+It first should be noted that the main reason to use the global pod template definition is to migrate a huge corpus of \n+existing projects (incl. freestyle) to run on Kubernetes without changing job definitions. New users setting up new \n+Kubernetes builds should use the podTemplate step as shown in the example snippets [here](https://github.com/jenkinsci/kubernetes-plugin/pull/707)\n+\n+Fill in the Kubernetes plugin configuration. In order to do that, you will open the Jenkins UI and navigate to \n+\u201cManage Jenkins -> Configure System -> Cloud -> Kubernetes\u201d and enter in the \u2018Kubernetes URL\u2019 and \u2018Jenkins URL\u2019 \n+appropriately, this is unless Jenkins is running in Kubernetes in which case the defaults work. To test this connection is successful you can use the **Test Connection** button to ensure there is \n+adequate communication from Jenkins to the Kubernetes cluster, as seen below\n+\n+![image](Screen%20Shot%202020-02-20%20at%202.00.28%20PM.png)\n+\n+In addition to that, in the **Kubernetes Pod Template** section, we need to configure the image that will be used to \n+spin up the agent pod. We do not recommend overriding the `jnlp` container except under unusual circumstances. \n+for your agent, you can use the default Jenkins agent image available on the official Docker hub repository. In the ", "originalCommit": "b133302035372cd1f8bca8eb8ce02d6ef2bf697e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "850c75aa01a8f3617bcb617359667781ec543b4f", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/850c75aa01a8f3617bcb617359667781ec543b4f", "message": "Update README.md\n\nCo-Authored-By: Vincent Latombe <vincent@latombe.net>", "committedDate": "2020-02-21T21:53:31Z", "type": "commit"}, {"oid": "4681e912a8a9126ce29aeb54baa9fe9fafc750cb", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/4681e912a8a9126ce29aeb54baa9fe9fafc750cb", "message": "Update README.md\n\nCo-Authored-By: Vincent Latombe <vincent@latombe.net>", "committedDate": "2020-02-21T21:53:41Z", "type": "commit"}, {"oid": "612cb9332158da53d82d567686feed7314b09ddb", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/612cb9332158da53d82d567686feed7314b09ddb", "message": "Update README.md\n\nCo-Authored-By: Vincent Latombe <vincent@latombe.net>", "committedDate": "2020-02-21T21:53:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMxMjg5Mg==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r383312892", "bodyText": "Can we rename these images please, so that the filenames are descriptive and do not use dangerous characters?", "author": "jglick", "createdAt": "2020-02-24T14:56:53Z", "path": "README.md", "diffHunk": "@@ -25,6 +25,32 @@ Tested with [`jenkins/jnlp-slave`](https://hub.docker.com/r/jenkins/jnlp-slave),\n see the [Docker image source code](https://github.com/jenkinsci/docker-jnlp-slave).\n \n It is not required to run the Jenkins master inside Kubernetes. \n+# Generic Setup\n+### Prerequisites\n+* A running Kubernetes cluster\n+* A Jenkins instance installed\n+* The Jenkins Kubernetes plugin installed\n+\n+It should be noted that the main reason to use the global pod template definition is to migrate a huge corpus of \n+existing projects (incl. freestyle) to run on Kubernetes without changing job definitions. New users setting up new \n+Kubernetes builds should use the podTemplate step as shown in the example snippets [here](https://github.com/jenkinsci/kubernetes-plugin/pull/707)\n+\n+Fill in the Kubernetes plugin configuration. In order to do that, you will open the Jenkins UI and navigate to \n+\u201cManage Jenkins -> Configure System -> Cloud -> Kubernetes\u201d and enter in the \u2018Kubernetes URL\u2019 and \u2018Jenkins URL\u2019 \n+appropriately, this is unless Jenkins is running in Kubernetes in which case the defaults work. To test this connection is successful you can use the **Test Connection** button to ensure there is \n+adequate communication from Jenkins to the Kubernetes cluster, as seen below\n+\n+![image](Screen%20Shot%202020-02-20%20at%202.00.28%20PM.png)\n+\n+In addition to that, in the **Kubernetes Pod Template** section, we need to configure the image that will be used to \n+spin up the agent pod. We do not recommend overriding the `jnlp` container except under unusual circumstances. \n+for your agent, you can use the default Jenkins agent image available in [Docker Hub](https://hub.docker.com). In the \n+\u2018Kubernetes Pod Template\u2019 section you need to specify the following (the rest of the configuration is up to you):\n+Kubernetes Pod Template Name - can be any and will be shown as a prefix for unique generated agent\u2019 names, which will \n+be run automatically during builds\n+Docker image - the docker image name that will be used as a reference to spin up a new Jenkins agent, as seen below\n+\n+![image](Screen%20Shot%202020-02-20%20at%202.01.48%20PM.png)", "originalCommit": "612cb9332158da53d82d567686feed7314b09ddb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMxNzU0Ng==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/716#discussion_r383317546", "bodyText": "Already done.", "author": "Vlatombe", "createdAt": "2020-02-24T15:04:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMxMjg5Mg=="}], "type": "inlineReview"}]}