{"pr_number": 1768, "pr_title": "[BAQE-1534] Update all test cases across jbpm regarding persistence for DB Jenkins matrix job", "pr_createdAt": "2020-10-05T13:32:50Z", "pr_url": "https://github.com/kiegroup/jbpm/pull/1768", "timeline": [{"oid": "233e010af58f11779e1a91741e494cfab0dcb2f0", "url": "https://github.com/kiegroup/jbpm/commit/233e010af58f11779e1a91741e494cfab0dcb2f0", "message": "[BAQE-1534] Update all test cases across jbpm regarding persistence for DB Jenkins matrix job", "committedDate": "2020-10-05T13:37:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMxMTE0Mw==", "url": "https://github.com/kiegroup/jbpm/pull/1768#discussion_r524311143", "bodyText": "This is missing in the jbpm-human-task-audit persistence.xml and others in this PR. Is it even needed? But if it works as is, it's fine for me.", "author": "MarianMacik", "createdAt": "2020-11-16T14:33:30Z", "path": "jbpm-case-mgmt/jbpm-case-mgmt-impl/src/test/filtered-resources/META-INF/persistence.xml", "diffHunk": "@@ -76,9 +76,10 @@\n     \n     <!-- error handling -->\n     <class>org.jbpm.runtime.manager.impl.jpa.ExecutionErrorInfo</class>\n-    \n+\n     <properties>\n-      <property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.PostgreSQLDialect\" />\n+      <property name=\"hibernate.dialect\" value=\"${maven.hibernate.dialect}\" />\n+      <property name=\"hibernate.default_schema\" value=\"${maven.jdbc.schema}\"/>", "originalCommit": "233e010af58f11779e1a91741e494cfab0dcb2f0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY5NTE3OA==", "url": "https://github.com/kiegroup/jbpm/pull/1768#discussion_r526695178", "bodyText": "Nice catch.\nSeems it might be used depending on the db we're using - see https://github.com/kiegroup/jbpm/blob/master/jbpm-container-test/jbpm-remote-ejb-test/jbpm-remote-ejb-test-app/src/main/resources/META-INF/persistence.xml#L64\nAs per hibernate doc, it's used for qualifying tables in queries... so I will keep them and add it where it's missing just in case\nAlso I notice below properties in datasource.properties files are not used anywhere in the code, so I'm removing them:\n\ndefaultSchema\nmakeBaseDb\ntestMarshalling", "author": "afalhambra", "createdAt": "2020-11-19T09:00:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMxMTE0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMxODU0Ng==", "url": "https://github.com/kiegroup/jbpm/pull/1768#discussion_r524318546", "bodyText": "Maybe just add in the docs that it will use the default datasource.properties file.", "author": "MarianMacik", "createdAt": "2020-11-16T14:43:15Z", "path": "jbpm-test-util/src/main/java/org/jbpm/test/persistence/util/PersistenceUtil.java", "diffHunk": "@@ -187,6 +187,15 @@ public static PoolingDataSourceWrapper setupPoolingDataSource(Properties dsProps\n         return DataSourceFactory.setupPoolingDataSource(datasourceName, dsProps);\n     }\n \n+    /**\n+     * Sets up a PoolingDataSourceWrapper with the specified datasource.\n+     *\n+     * @return PoolingDataSourceWrapper that has been set up but _not_ initialized.\n+     */\n+    public static PoolingDataSourceWrapper setupPoolingDataSource(String datasourceName){", "originalCommit": "233e010af58f11779e1a91741e494cfab0dcb2f0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY5NDY3NA==", "url": "https://github.com/kiegroup/jbpm/pull/1768#discussion_r526694674", "bodyText": "done", "author": "afalhambra", "createdAt": "2020-11-19T08:59:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMxODU0Ng=="}], "type": "inlineReview"}, {"oid": "49df2e3ba1d40861475b7e97dbb1be240a7656f6", "url": "https://github.com/kiegroup/jbpm/commit/49df2e3ba1d40861475b7e97dbb1be240a7656f6", "message": "[BAQE-1534] Update all test cases across jbpm regarding persistence for DB Jenkins matrix job", "committedDate": "2020-11-19T08:59:16Z", "type": "commit"}, {"oid": "49df2e3ba1d40861475b7e97dbb1be240a7656f6", "url": "https://github.com/kiegroup/jbpm/commit/49df2e3ba1d40861475b7e97dbb1be240a7656f6", "message": "[BAQE-1534] Update all test cases across jbpm regarding persistence for DB Jenkins matrix job", "committedDate": "2020-11-19T08:59:16Z", "type": "forcePushed"}]}