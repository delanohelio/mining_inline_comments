{"pr_number": 986, "pr_title": "Remove dependencies from gradle", "pr_createdAt": "2020-04-07T20:08:10Z", "pr_url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986", "timeline": [{"oid": "43ec23320f94540bcb1f51c547f5be6942670709", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/43ec23320f94540bcb1f51c547f5be6942670709", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest", "committedDate": "2020-04-07T20:10:34Z", "type": "forcePushed"}, {"oid": "ec8a93251ad717033763c6b71ca99f273e3c57b5", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/ec8a93251ad717033763c6b71ca99f273e3c57b5", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest", "committedDate": "2020-04-07T20:51:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTExMTQwOQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#discussion_r405111409", "bodyText": "This can be an info, as it it isn't an error if  they don't have that class in their app.", "author": "jkasten2", "createdAt": "2020-04-07T21:03:34Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSSystemConditionController.java", "diffHunk": "@@ -30,9 +30,13 @@ boolean systemConditionsAvailable() {\n             return false;\n         }\n \n-        if (isDialogFragmentShowing(ActivityLifecycleHandler.curActivity)) {\n-            OneSignal.onesignalLog(OneSignal.LOG_LEVEL.WARN, \"OSSystemConditionObserver dialog fragment detected\");\n-            return false;\n+        try {\n+            if (isDialogFragmentShowing(ActivityLifecycleHandler.curActivity)) {\n+                OneSignal.onesignalLog(OneSignal.LOG_LEVEL.WARN, \"OSSystemConditionObserver dialog fragment detected\");\n+                return false;\n+            }\n+        } catch (NoClassDefFoundError exception) {\n+            OneSignal.onesignalLog(OneSignal.LOG_LEVEL.ERROR, \"isDialogFragmentShowing AppCompatActivity not imported either used: \" + exception);", "originalCommit": "ec8a93251ad717033763c6b71ca99f273e3c57b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTczOTE0NQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#discussion_r405739145", "bodyText": "@Jeasmine This line is still using OneSignal.LOG_LEVEL.ERROR. Should be INFO.", "author": "jkasten2", "createdAt": "2020-04-08T18:47:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTExMTQwOQ=="}], "type": "inlineReview"}, {"oid": "e0146a0f91886ab51e90add9fb242b4f0a54be35", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/e0146a0f91886ab51e90add9fb242b4f0a54be35", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest", "committedDate": "2020-04-07T21:05:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNTY5OA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#discussion_r405135698", "bodyText": "Even if we remove com.android.support:support-v4 from here it is still being included through other dependencies.\n+--- com.google.firebase:firebase-messaging:[10.2.1, 17.3.99] -> 17.3.4\n|    +--- com.google.android.gms:play-services-basement:16.0.1\n|    |    \\--- com.android.support:support-v4:26.1.0\n\nBy adding the following to your build.gradle you will observe errors in the OneSignal code base due to force removing this dependency.\nconfigurations.all {\n    exclude group: 'com.android.support', module: 'support-v4'\n}", "author": "jkasten2", "createdAt": "2020-04-07T21:52:54Z", "path": "OneSignalSDK/onesignal/build.gradle", "diffHunk": "@@ -61,9 +61,10 @@ dependencies {\n     // Also note, firebase & gms libraries use android.support:26.\n     //   - They never refer to 27 or 28\n     api 'com.android.support:cardview-v7:[26.0.0, 27.99.99]'\n-    api 'com.android.support:support-v4:[26.0.0, 27.99.99]'", "originalCommit": "e0146a0f91886ab51e90add9fb242b4f0a54be35", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNjA3Mw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#discussion_r405136073", "bodyText": "It looks like however we might be able to get away with  api 'com.android.support:support-fragment: instead if we want to switch to that. It seems to include everything we need.", "author": "jkasten2", "createdAt": "2020-04-07T21:53:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNTY5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNzAwNg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/986#discussion_r405137006", "bodyText": "One last note with dependencies, any OneSignal code that directly uses a library it should be top level in this file as the fundamentally matches up.", "author": "jkasten2", "createdAt": "2020-04-07T21:55:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEzNTY5OA=="}], "type": "inlineReview"}, {"oid": "6ffcce4303dc309a793ae7d06f255c353134c0a3", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/6ffcce4303dc309a793ae7d06f255c353134c0a3", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest", "committedDate": "2020-04-08T15:52:22Z", "type": "forcePushed"}, {"oid": "1b0a4752fffdf620ccf8e1358fda683673434ce9", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/1b0a4752fffdf620ccf8e1358fda683673434ce9", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest", "committedDate": "2020-04-08T18:54:49Z", "type": "forcePushed"}, {"oid": "40349f16dcfe64f2d73fc7172193602d6f5c6919", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/40349f16dcfe64f2d73fc7172193602d6f5c6919", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest", "committedDate": "2020-04-08T18:57:46Z", "type": "commit"}, {"oid": "40349f16dcfe64f2d73fc7172193602d6f5c6919", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/40349f16dcfe64f2d73fc7172193602d6f5c6919", "message": "Remove dependencies from gradle\n\n   * Remove appcompat-v4 dependency\n   * Change from runtime to compileOnly appcompat-v7 dependency\n   * Add log for when no location permissions added on Manifest", "committedDate": "2020-04-08T18:57:46Z", "type": "forcePushed"}]}