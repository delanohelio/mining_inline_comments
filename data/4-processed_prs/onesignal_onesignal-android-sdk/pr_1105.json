{"pr_number": 1105, "pr_title": "Fix IAM showing bug with Android 6 API 23", "pr_createdAt": "2020-07-30T19:27:43Z", "pr_url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1105", "timeline": [{"oid": "f65ae0bb322617abe0eb5b8a52fb7c49ddef6c42", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/f65ae0bb322617abe0eb5b8a52fb7c49ddef6c42", "message": "Fix IAM showing bug with Android 6 API 23\n* `CardView` class can not be animated with a elevation (drop shadow) set beyond 0\n  * Solution is setting the elevation of the `CardView` to 0 if detected device using API 23\n  * At end of the animation we then add back the elevation necessary to show the drop shadow\n  * For all other devices, elevation is set from start", "committedDate": "2020-07-30T19:26:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIzNzcwNA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1105#discussion_r463237704", "bodyText": "shoudn't we set this only for Android 6? Since its the only case that we will listen for changes", "author": "Jeasmine", "createdAt": "2020-07-30T19:59:13Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/InAppMessageView.java", "diffHunk": "@@ -475,62 +485,83 @@ private void dereferenceViews() {\n     }\n \n     private void animateInAppMessage(WebViewManager.Position displayLocation, View messageView, View backgroundView) {\n+        final CardView messageViewCardView = messageView.findViewWithTag(IN_APP_MESSAGE_CARD_VIEW_TAG);\n+        Animation.AnimationListener cardViewAnimCallback = createAnimationListenerForAndroidApi23Elevation(messageViewCardView);", "originalCommit": "f65ae0bb322617abe0eb5b8a52fb7c49ddef6c42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIzODM0NA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1105#discussion_r463238344", "bodyText": "Ahh true good point, ill add a check for this", "author": "mikechoch", "createdAt": "2020-07-30T20:00:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIzNzcwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0MDA2Mg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/1105#discussion_r463240062", "bodyText": "Fixed!", "author": "mikechoch", "createdAt": "2020-07-30T20:03:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIzNzcwNA=="}], "type": "inlineReview"}, {"oid": "6d232cf9be8167e71489dc7d68977b9c76f2b0e8", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/6d232cf9be8167e71489dc7d68977b9c76f2b0e8", "message": "Added extra check for API 23\n* No need to add the `AnimationListener` to other Android API devices", "committedDate": "2020-07-30T20:03:31Z", "type": "commit"}]}