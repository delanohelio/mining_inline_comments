{"pr_number": 967, "pr_title": "Add push prompt handling for IAM clicks", "pr_createdAt": "2020-03-06T02:02:05Z", "pr_url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE4NjcyMg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r389186722", "bodyText": "Create a class that handles this and use the constructor for it here and replace this with a one liner", "author": "mikechoch", "createdAt": "2020-03-06T23:07:07Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageAction.java", "diffHunk": "@@ -89,6 +99,15 @@\n \n         if (json.has(TAGS))\n             tags = new OSInAppMessageTag(json.getJSONObject(TAGS));\n+\n+        if (json.has(PROMPTS)) {\n+            JSONArray promptsJsonArray = json.getJSONArray(PROMPTS);", "originalCommit": "af0bf22f474fd3fadd1dde505101ca7c04f07c88", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ3MTcwNQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r390471705", "bodyText": "Uhm I don't believe that the handling from a JSONArray to a List needs a class, I will put it in a method though, to avoid that much constructions on the OSINAppMessageAction constructor", "author": "Jeasmine", "createdAt": "2020-03-10T17:06:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE4NjcyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU4Mzc1Nw==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r394583757", "bodyText": "I just wanted to it to look similar to tags", "author": "mikechoch", "createdAt": "2020-03-18T19:18:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE4NjcyMg=="}], "type": "inlineReview"}, {"oid": "d82ec95da9487e5ff9b3d40716ab66590b2e5c90", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/d82ec95da9487e5ff9b3d40716ab66590b2e5c90", "message": "Add push prompt handling for IAM clicks\n\n  * Add prompt to IAM action\n  * Show iOS prompt for location permission\n  * Add test for prompt", "committedDate": "2020-03-10T17:09:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU3OTM0MQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r394579341", "bodyText": "rename to showPrompts?", "author": "mikechoch", "createdAt": "2020-03-18T19:09:59Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -286,6 +287,19 @@ void onMessageActionOccurredOnPreview(@NonNull final OSInAppMessage message, @No\n         fireClickAction(action);\n     }\n \n+    private void firePrompt(OSInAppMessage message, final List<OSInAppMessagePrompt> prompts) {", "originalCommit": "d82ec95da9487e5ff9b3d40716ab66590b2e5c90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU3OTUwOQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r394579509", "bodyText": "Don't we need to reevaluate IAMs here if no more prompts are left?", "author": "mikechoch", "createdAt": "2020-03-18T19:10:19Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OSInAppMessageController.java", "diffHunk": "@@ -286,6 +287,19 @@ void onMessageActionOccurredOnPreview(@NonNull final OSInAppMessage message, @No\n         fireClickAction(action);\n     }\n \n+    private void firePrompt(OSInAppMessage message, final List<OSInAppMessagePrompt> prompts) {\n+        for (OSInAppMessagePrompt prompt : prompts) {\n+            // TODO until we don't fix the activity going forward or back dismissing the IAM, we need to auto dismiss\n+            messageWasDismissed(message);\n+            prompt.handlePrompt(new OneSignal.OperationCompletedCallback() {\n+                @Override\n+                public void completed(boolean result) {\n+                    // TODO take care of multiple prompts", "originalCommit": "d82ec95da9487e5ff9b3d40716ab66590b2e5c90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU4MDM4OQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r394580389", "bodyText": "Rename to one of these:\nOSPromptCompletionCallback or\nOSPromptActionCompletionCallback or\nOSInAppMessagePromptCompletionCallback or\nOSInAppMessagePromptActionCallback", "author": "mikechoch", "createdAt": "2020-03-18T19:11:57Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "diffHunk": "@@ -3206,4 +3212,7 @@ private static boolean isValidOutcomeEntry(String name) {\n     * End OneSignalOutcome module\n     */\n \n+   interface OperationCompletedCallback {", "originalCommit": "d82ec95da9487e5ff9b3d40716ab66590b2e5c90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU4MTc3Ng==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r394581776", "bodyText": "Is the boolean result necessary?", "author": "mikechoch", "createdAt": "2020-03-18T19:14:47Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/OneSignal.java", "diffHunk": "@@ -3206,4 +3212,7 @@ private static boolean isValidOutcomeEntry(String name) {\n     * End OneSignalOutcome module\n     */\n \n+   interface OperationCompletedCallback {\n+      void completed(boolean result);", "originalCommit": "d82ec95da9487e5ff9b3d40716ab66590b2e5c90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU4Mjc5NQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r394582795", "bodyText": "If so change name to accepted", "author": "mikechoch", "createdAt": "2020-03-18T19:16:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU4MTc3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY4NDMxOQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r394684319", "bodyText": "no rly, just wanted to be like on iOS, what do you think @mikechoch ?", "author": "Jeasmine", "createdAt": "2020-03-18T22:52:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU4MTc3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY4NTc0Mg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r394685742", "bodyText": "its fine, just rename it so its like iOS", "author": "mikechoch", "createdAt": "2020-03-18T22:56:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDU4MTc3Ng=="}], "type": "inlineReview"}, {"oid": "1b86e1ab4094c76f9e139f4064624bac00442b63", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/1b86e1ab4094c76f9e139f4064624bac00442b63", "message": "Add multiple prompt handling", "committedDate": "2020-03-20T16:24:27Z", "type": "forcePushed"}, {"oid": "c05a0b7562431aa76a9d952e093db63e07a3e466", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/c05a0b7562431aa76a9d952e093db63e07a3e466", "message": "Add multiple prompt handling", "committedDate": "2020-03-20T18:23:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkyODkwOA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395928908", "bodyText": "Rename to\ndismissCurrentIam or\ndismissCurrentInAppMessage\n?", "author": "mikechoch", "createdAt": "2020-03-20T23:18:14Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/WebViewManager.java", "diffHunk": "@@ -115,6 +115,13 @@ public void run() {\n         }, IN_APP_MESSAGE_INIT_DELAY);\n     }\n \n+    static void dismissCurrentIAM() {", "originalCommit": "c05a0b7562431aa76a9d952e093db63e07a3e466", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkyOTEwMA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395929100", "bodyText": "Lets create a PermissionUtils eventually and put everything global or constant based in there, just so we keep PermissionsActivity clean", "author": "mikechoch", "createdAt": "2020-03-20T23:19:07Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/PermissionsActivity.java", "diffHunk": "@@ -32,13 +32,15 @@\n import android.content.pm.PackageManager;\n import android.os.Build;\n import android.os.Bundle;\n+import android.os.Handler;\n import android.support.annotation.NonNull;\n \n import com.onesignal.AndroidSupportV4Compat.ActivityCompat;\n \n public class PermissionsActivity extends Activity {\n \n    private static final String TAG = PermissionsActivity.class.getCanonicalName();\n+   private static final int DELAY_TIME_CALLBACK_CALL = 500;\n    private static final int REQUEST_LOCATION = 2;", "originalCommit": "c05a0b7562431aa76a9d952e093db63e07a3e466", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMDA4MA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395930080", "bodyText": "Perfect, addresses my concerns haha we will improve in future", "author": "mikechoch", "createdAt": "2020-03-20T23:24:34Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/PermissionsActivity.java", "diffHunk": "@@ -84,17 +86,29 @@ private void requestPermission() {\n    }\n \n    @Override\n-   public void onRequestPermissionsResult(int requestCode, @NonNull String permissions[], @NonNull int[] grantResults) {\n+   public void onRequestPermissionsResult(final int requestCode, @NonNull String permissions[], @NonNull final int[] grantResults) {\n       answered = true;\n       waiting = false;\n \n+      // TODO improve this method\n+      // TODO after we remove IAM from being an activity window we may be able to remove this handler\n+      // This is not a good solution!\n+      // Current problem: IAM depends on an activity, because of prompt permission the evaluation of IAM\n+      // is being called before the prompt activity dismisses, so it's attaching the IAM to PermissionActivity\n+      // We need to wait for other activity to show", "originalCommit": "c05a0b7562431aa76a9d952e093db63e07a3e466", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMDEyMg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395930122", "bodyText": "units please in name or as comment", "author": "mikechoch", "createdAt": "2020-03-20T23:24:49Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/PermissionsActivity.java", "diffHunk": "@@ -32,13 +32,15 @@\n import android.content.pm.PackageManager;\n import android.os.Build;\n import android.os.Bundle;\n+import android.os.Handler;\n import android.support.annotation.NonNull;\n \n import com.onesignal.AndroidSupportV4Compat.ActivityCompat;\n \n public class PermissionsActivity extends Activity {\n \n    private static final String TAG = PermissionsActivity.class.getCanonicalName();\n+   private static final int DELAY_TIME_CALLBACK_CALL = 500;", "originalCommit": "c05a0b7562431aa76a9d952e093db63e07a3e466", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMDg2NQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395930865", "bodyText": "Can you comment the cases being handled here, lots of if and else that might not be intuitive to someone who hasn't seen the codebase", "author": "mikechoch", "createdAt": "2020-03-20T23:28:20Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -158,18 +191,24 @@ else if (permissionList.contains(\"android.permission.ACCESS_COARSE_LOCATION\")) {\n                      requestPermission = \"android.permission.ACCESS_COARSE_LOCATION\";\n                }\n \n-               if (requestPermission != null && promptLocation)\n+               if (requestPermission != null && promptLocation) {", "originalCommit": "c05a0b7562431aa76a9d952e093db63e07a3e466", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NTU3MA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r396755570", "bodyText": "Still needs comments I think", "author": "mikechoch", "createdAt": "2020-03-23T21:04:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMDg2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMTAyNQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395931025", "bodyText": "good synchronized on the promptHandlers", "author": "mikechoch", "createdAt": "2020-03-20T23:29:10Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -85,51 +86,82 @@\n       void complete(LocationPoint point);\n    }\n \n+   abstract static class LocationAndPromptHandler implements LocationHandler {\n+      void onPromptHandle(boolean accepted) {}\n+   }\n+\n    private static ConcurrentHashMap<CALLBACK_TYPE, LocationHandler> locationHandlers = new ConcurrentHashMap<>();\n+   private static final List<LocationAndPromptHandler> promptHandlers = new ArrayList<>();\n \n    private static Thread fallbackFailThread;\n \n    private static boolean locationCoarse;\n-   \n+\n    static boolean scheduleUpdate(Context context) {\n       if (!hasLocationPermission(context) || !OneSignal.shareLocation)\n          return false;\n-      \n+\n       long lastTime = System.currentTimeMillis() - getLastLocationTime();\n       long minTime = 1_000 * (OneSignal.isForeground() ? TIME_FOREGROUND_SEC : TIME_BACKGROUND_SEC);\n       long scheduleTime = minTime - lastTime;\n-      \n+\n       OneSignalSyncServiceUtils.scheduleLocationUpdateTask(context, scheduleTime);\n       return true;\n    }\n-   \n+\n    private static void setLastLocationTime(long time) {\n       OneSignalPrefs.saveLong(OneSignalPrefs.PREFS_ONESIGNAL,\n               OneSignalPrefs.PREFS_OS_LAST_LOCATION_TIME,time);\n    }\n-   \n+\n    private static long getLastLocationTime() {\n       return OneSignalPrefs.getLong(\n                OneSignalPrefs.PREFS_ONESIGNAL,\n                OneSignalPrefs.PREFS_OS_LAST_LOCATION_TIME,\n                TIME_BACKGROUND_SEC * -1_000\n       );\n    }\n-   \n+\n    private static boolean hasLocationPermission(Context context) {\n       return ContextCompat.checkSelfPermission(context, \"android.permission.ACCESS_FINE_LOCATION\") == PackageManager.PERMISSION_GRANTED\n           || ContextCompat.checkSelfPermission(context, \"android.permission.ACCESS_COARSE_LOCATION\") == PackageManager.PERMISSION_GRANTED;\n    }\n \n+   static void addPromptHandlerIfAvailable(LocationHandler handler) {\n+      if (handler instanceof LocationAndPromptHandler) {\n+         synchronized (promptHandlers) {", "originalCommit": "c05a0b7562431aa76a9d952e093db63e07a3e466", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMTIzMA==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395931230", "bodyText": "Can you explain what you mean by Location And PromptHandler? Can we call this LocationPromptCompletionHandler?", "author": "mikechoch", "createdAt": "2020-03-20T23:30:10Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -85,51 +86,82 @@\n       void complete(LocationPoint point);\n    }\n \n+   abstract static class LocationAndPromptHandler implements LocationHandler {", "originalCommit": "c05a0b7562431aa76a9d952e093db63e07a3e466", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzOTc3OQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395939779", "bodyText": "actually yeah \ud83d\ude02", "author": "Jeasmine", "createdAt": "2020-03-21T00:16:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMTIzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMTUxMQ==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395931511", "bodyText": "Rename to onAnswered  to make more sense when calling locationPromptHandler.onAnswered(boolean)", "author": "mikechoch", "createdAt": "2020-03-20T23:31:24Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -85,51 +86,82 @@\n       void complete(LocationPoint point);\n    }\n \n+   abstract static class LocationAndPromptHandler implements LocationHandler {\n+      void onPromptHandle(boolean accepted) {}", "originalCommit": "c05a0b7562431aa76a9d952e093db63e07a3e466", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTkzMjM1Mg==", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/pull/967#discussion_r395932352", "bodyText": "Can we pleaseeeee change the name CALLBACK_TYPE to PermissionType or something. more relevant and not all capitol... Should be camel case, I know you didnt make this but it hurt my soul finding it...", "author": "mikechoch", "createdAt": "2020-03-20T23:35:30Z", "path": "OneSignalSDK/onesignal/src/main/java/com/onesignal/LocationGMS.java", "diffHunk": "@@ -85,51 +86,82 @@\n       void complete(LocationPoint point);\n    }\n \n+   abstract static class LocationAndPromptHandler implements LocationHandler {\n+      void onPromptHandle(boolean accepted) {}\n+   }\n+\n    private static ConcurrentHashMap<CALLBACK_TYPE, LocationHandler> locationHandlers = new ConcurrentHashMap<>();", "originalCommit": "c05a0b7562431aa76a9d952e093db63e07a3e466", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2e43690494ef157d820ccbb7e7520757c40022f5", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/2e43690494ef157d820ccbb7e7520757c40022f5", "message": "Add multiple prompt handling", "committedDate": "2020-03-21T00:34:59Z", "type": "forcePushed"}, {"oid": "52eebae688b15c1af747f8e060a0530fafd93bf2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/52eebae688b15c1af747f8e060a0530fafd93bf2", "message": "Add push prompt handling for IAM clicks\n\n  * Add prompt to IAM action\n  * Show iOS prompt for location permission\n  * Add test for prompt", "committedDate": "2020-03-23T18:48:08Z", "type": "commit"}, {"oid": "30422f36d48fe759e2edf2019494abc4c78f2bf2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/30422f36d48fe759e2edf2019494abc4c78f2bf2", "message": "Add multiple prompt handling", "committedDate": "2020-03-23T18:51:10Z", "type": "commit"}, {"oid": "30422f36d48fe759e2edf2019494abc4c78f2bf2", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/30422f36d48fe759e2edf2019494abc4c78f2bf2", "message": "Add multiple prompt handling", "committedDate": "2020-03-23T18:51:10Z", "type": "forcePushed"}, {"oid": "dd4978f57b2955e4104fe01eee7f187d5290214e", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/dd4978f57b2955e4104fe01eee7f187d5290214e", "message": "Add new features to IAM preview\n\n   * Add prompt to IAM preview\n   * Add logs for tags and outcomes\n   * Redisplay, tags, outcomes, impression should not be included on IAM preview", "committedDate": "2020-03-23T21:23:26Z", "type": "forcePushed"}, {"oid": "a45df4a6ce1b5a1f869d3fed9264dd424109e900", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/a45df4a6ce1b5a1f869d3fed9264dd424109e900", "message": "Add new features to IAM preview\n\n   * Add prompt to IAM preview\n   * Add logs for tags and outcomes\n   * Redisplay, tags, outcomes, impression should not be included on IAM preview", "committedDate": "2020-03-23T21:24:59Z", "type": "forcePushed"}, {"oid": "5bbe668cae94a5e33c0f468d628166aa180c30c7", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/5bbe668cae94a5e33c0f468d628166aa180c30c7", "message": "Add new features to IAM preview\n\n   * Add prompt to IAM preview\n   * Add logs for tags and outcomes\n   * Redisplay, tags, outcomes, impression should not be included on IAM preview", "committedDate": "2020-03-23T21:25:40Z", "type": "forcePushed"}, {"oid": "27432031626a25396954f1e31eb37ccfdd947980", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/27432031626a25396954f1e31eb37ccfdd947980", "message": "Add new features to IAM preview\n\n   * Add prompt to IAM preview\n   * Add logs for tags and outcomes\n   * Redisplay, tags, outcomes, impression should not be included on IAM preview", "committedDate": "2020-03-23T21:27:56Z", "type": "commit"}, {"oid": "27432031626a25396954f1e31eb37ccfdd947980", "url": "https://github.com/OneSignal/OneSignal-Android-SDK/commit/27432031626a25396954f1e31eb37ccfdd947980", "message": "Add new features to IAM preview\n\n   * Add prompt to IAM preview\n   * Add logs for tags and outcomes\n   * Redisplay, tags, outcomes, impression should not be included on IAM preview", "committedDate": "2020-03-23T21:27:56Z", "type": "forcePushed"}]}