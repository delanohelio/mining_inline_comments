{"pr_number": 6502, "pr_title": "PLV name adjustment", "pr_createdAt": "2020-04-21T08:55:15Z", "pr_url": "https://github.com/metasfresh/metasfresh/pull/6502", "timeline": [{"oid": "58a5b5da43a0ea91f1b9048a774321c677974e3a", "url": "https://github.com/metasfresh/metasfresh/commit/58a5b5da43a0ea91f1b9048a774321c677974e3a", "message": "Hide PriceListVersion.Name from webui; Update PLV identifier\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T05:57:39Z", "type": "commit"}, {"oid": "0845969547d3ea1fbfff075aedb0fb2a3e09ba3c", "url": "https://github.com/metasfresh/metasfresh/commit/0845969547d3ea1fbfff075aedb0fb2a3e09ba3c", "message": "Add Model Interceptor for updating all PLV names\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T07:23:03Z", "type": "commit"}, {"oid": "f9b1b2c1f413f7aed9212b9f0781ae1a2389c96d", "url": "https://github.com/metasfresh/metasfresh/commit/f9b1b2c1f413f7aed9212b9f0781ae1a2389c96d", "message": "Add Model Interceptor for updating a single PLV name\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T08:39:28Z", "type": "commit"}, {"oid": "4f122e1e4cd3ec00589c5d2d8a1853c675dedf65", "url": "https://github.com/metasfresh/metasfresh/commit/4f122e1e4cd3ec00589c5d2d8a1853c675dedf65", "message": "Using `ModelValidator.TYPE_BEFORE_CHANGE` doesn't seem to work.\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T08:54:25Z", "type": "commit"}, {"oid": "004151b3e60da95c99686918de0a8f94a2c8b65b", "url": "https://github.com/metasfresh/metasfresh/commit/004151b3e60da95c99686918de0a8f94a2c8b65b", "message": "Callout is not working\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T08:56:35Z", "type": "commit"}, {"oid": "4a0a94d2e097eba78b65feba46b39a9dbe51e5e0", "url": "https://github.com/metasfresh/metasfresh/commit/4a0a94d2e097eba78b65feba46b39a9dbe51e5e0", "message": "For debugging\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T08:57:36Z", "type": "commit"}, {"oid": "4600ad419207a5175c6150f1fc7eac010f642e3d", "url": "https://github.com/metasfresh/metasfresh/commit/4600ad419207a5175c6150f1fc7eac010f642e3d", "message": "Updates work\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T09:59:48Z", "type": "commit"}, {"oid": "846b43aace90e5f4a66790a392ebcd1d75afba6d", "url": "https://github.com/metasfresh/metasfresh/commit/846b43aace90e5f4a66790a392ebcd1d75afba6d", "message": "Fix compilation\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T10:01:30Z", "type": "commit"}, {"oid": "73ad6f9933677a500695180ab755b2a6545a8f87", "url": "https://github.com/metasfresh/metasfresh/commit/73ad6f9933677a500695180ab755b2a6545a8f87", "message": "Move methods to BL from DAO\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T10:07:42Z", "type": "commit"}, {"oid": "d097d595c971174aeb72c58dff61e02d4adef9e8", "url": "https://github.com/metasfresh/metasfresh/commit/d097d595c971174aeb72c58dff61e02d4adef9e8", "message": "Warnings, nullability\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T10:08:34Z", "type": "commit"}, {"oid": "25089114546b0da18830a2f2b14f008c70ad43b3", "url": "https://github.com/metasfresh/metasfresh/commit/25089114546b0da18830a2f2b14f008c70ad43b3", "message": "Update trl\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T12:22:17Z", "type": "commit"}, {"oid": "2e97c2bf5da1134c7704008dac7b48fd56220768", "url": "https://github.com/metasfresh/metasfresh/commit/2e97c2bf5da1134c7704008dac7b48fd56220768", "message": "Invalidate cache for the updated records\n\nhttps://github.com/metasfresh/metasfresh/issues/6485", "committedDate": "2020-04-21T12:22:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0MjI5OQ==", "url": "https://github.com/metasfresh/metasfresh/pull/6502#discussion_r412242299", "bodyText": "Actually invoking it as callout method is AFAIU not needed. We would only need that if we had to updated it (on ValidFrom-Change) which the PLV was noch yet saved.\nAlthough i guess it also doesn't hurt..", "author": "metas-ts", "createdAt": "2020-04-21T14:37:12Z", "path": "de.metas.business/src/main/java/de/metas/pricing/interceptor/M_PriceList_Version.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * #%L\n+ * de.metas.business\n+ * %%\n+ * Copyright (C) 2020 metas GmbH\n+ * %%\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as\n+ * published by the Free Software Foundation, either version 2 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public\n+ * License along with this program. If not, see\n+ * <http://www.gnu.org/licenses/gpl-2.0.html>.\n+ * #L%\n+ */\n+\n+package de.metas.pricing.interceptor;\n+\n+import de.metas.pricing.PriceListId;\n+import de.metas.pricing.service.IPriceListBL;\n+import de.metas.pricing.service.IPriceListDAO;\n+import de.metas.util.Services;\n+import lombok.NonNull;\n+import org.adempiere.ad.callout.annotations.Callout;\n+import org.adempiere.ad.callout.annotations.CalloutMethod;\n+import org.adempiere.ad.callout.spi.IProgramaticCalloutProvider;\n+import org.adempiere.ad.modelvalidator.annotations.Init;\n+import org.adempiere.ad.modelvalidator.annotations.Interceptor;\n+import org.adempiere.ad.modelvalidator.annotations.ModelChange;\n+import org.compiere.model.I_M_PriceList;\n+import org.compiere.model.I_M_PriceList_Version;\n+import org.compiere.model.ModelValidator;\n+import org.compiere.util.TimeUtil;\n+import org.springframework.stereotype.Component;\n+\n+import java.time.LocalDate;\n+\n+@Callout(I_M_PriceList_Version.class)\n+@Interceptor(I_M_PriceList_Version.class)\n+@Component\n+public class M_PriceList_Version\n+{\n+\t@Init\n+\tpublic void registerCallouts()\n+\t{\n+\t\tServices.get(IProgramaticCalloutProvider.class).registerAnnotatedCallout(this);\n+\t}\n+\n+\t@CalloutMethod(columnNames = I_M_PriceList_Version.COLUMNNAME_ValidFrom)", "originalCommit": "2e97c2bf5da1134c7704008dac7b48fd56220768", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}