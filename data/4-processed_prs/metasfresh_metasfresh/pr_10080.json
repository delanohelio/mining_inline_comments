{"pr_number": 10080, "pr_title": "#10079", "pr_createdAt": "2020-10-07T14:06:18Z", "pr_url": "https://github.com/metasfresh/metasfresh/pull/10080", "timeline": [{"oid": "57c3e68c16ebb29f340f44a5bf0af2afdd469cfb", "url": "https://github.com/metasfresh/metasfresh/commit/57c3e68c16ebb29f340f44a5bf0af2afdd469cfb", "message": "#10079\n - Added 2 new windows to webui\n - Marked column as key so we can show view in window", "committedDate": "2020-10-07T14:03:27Z", "type": "commit"}, {"oid": "e16b54fdcf99556ed65d93a70c3bb5b25dd70f2b", "url": "https://github.com/metasfresh/metasfresh/commit/e16b54fdcf99556ed65d93a70c3bb5b25dd70f2b", "message": "#10079\n - Added a new column to be used as key in the view.\n - Updated scripts so that first the adjustments to the view are made.", "committedDate": "2020-10-08T11:15:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY2ODczMQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10080#discussion_r501668731", "bodyText": "no urls of private repos pls", "author": "metas-ts", "createdAt": "2020-10-08T12:09:11Z", "path": "backend/de.metas.adempiere.adempiere/migration/src/main/sql/postgresql/system/10-de.metas.adempiere/5569920_sys_gh10079ModifyRV_Missing_Counter_Documents.sql", "diffHunk": "@@ -0,0 +1,133 @@\n+\n+\n+DROP VIEW IF EXISTS RV_Missing_Counter_Documents;\n+\n+\n+-- This view is made for C_Order entries and their counter-documents\n+-- If we start supporting other kind of counter documents in the fututre, this view will have to be updated with the logic on those tables, using unions\n+\n+CREATE VIEW RV_Missing_Counter_Documents\n+AS\n+\n+\n+SELECT\n+    -- In the future, if we will add support for other documents (i.e: invoices), we will have to update the id column's logic using a case when logic.\n+    -- https://github.com/metasfresh/mf15/issues/318", "originalCommit": "e16b54fdcf99556ed65d93a70c3bb5b25dd70f2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY3MTQzOQ==", "url": "https://github.com/metasfresh/metasfresh/pull/10080#discussion_r501671439", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    WHEN doc.Record_ID IS NOT NULL THEN (doc.Record_ID * 10) + 1\n          \n          \n            \n                    WHEN doc.C_OrderLine_ID IS NOT NULL THEN (doc.Record_ID * 10) + 1\n          \n      \n    \n    \n  \n\ni wrote\n\nexplicitly return the C_OrderLine_ID which has the missing counter doc from the doc subselect, together with the Record_ID\n\nexactly for the purpose of using it in RV_Missing_Counter_Document_ID\nif we later add e.g. C_Invoice_Lines with missing-counter-docs then it will also be aliased to Record_ID, so using doc.Record_ID does not make sense", "author": "metas-ts", "createdAt": "2020-10-08T12:13:32Z", "path": "backend/de.metas.adempiere.adempiere/migration/src/main/sql/postgresql/system/10-de.metas.adempiere/5569920_sys_gh10079ModifyRV_Missing_Counter_Documents.sql", "diffHunk": "@@ -0,0 +1,133 @@\n+\n+\n+DROP VIEW IF EXISTS RV_Missing_Counter_Documents;\n+\n+\n+-- This view is made for C_Order entries and their counter-documents\n+-- If we start supporting other kind of counter documents in the fututre, this view will have to be updated with the logic on those tables, using unions\n+\n+CREATE VIEW RV_Missing_Counter_Documents\n+AS\n+\n+\n+SELECT\n+    -- In the future, if we will add support for other documents (i.e: invoices), we will have to update the id column's logic using a case when logic.\n+    -- https://github.com/metasfresh/mf15/issues/318\n+    CASE\n+        WHEN doc.Record_ID IS NOT NULL THEN (doc.Record_ID * 10) + 1", "originalCommit": "e16b54fdcf99556ed65d93a70c3bb5b25dd70f2b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY3NTEzMA==", "url": "https://github.com/metasfresh/metasfresh/pull/10080#discussion_r501675130", "bodyText": "I thought the invoicelines would be handled in a different left join after looking at the sql and the doc one would only remain for orderlines., but I see now that we could also expand the view by joining with the invoice and invoiceline tables on the 'doc' select. Implemented the changes! \ud83d\ude13", "author": "dragospodariu96", "createdAt": "2020-10-08T12:19:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY3MTQzOQ=="}], "type": "inlineReview"}, {"oid": "ba714d0e5356a748ab5524285733f62ba73bfed4", "url": "https://github.com/metasfresh/metasfresh/commit/ba714d0e5356a748ab5524285733f62ba73bfed4", "message": "#10079\n - Implemented review notes.", "committedDate": "2020-10-08T12:17:38Z", "type": "commit"}]}