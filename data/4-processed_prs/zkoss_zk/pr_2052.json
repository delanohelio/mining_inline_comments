{"pr_number": 2052, "pr_title": "refine ZK-4494: Treeitem/Treerow visible issue and add information cl\u2026", "pr_createdAt": "2020-07-13T09:53:05Z", "pr_url": "https://github.com/zkoss/zk/pull/2052", "timeline": [{"oid": "d318bae6436120f34ed36eb735bcd717413cf039", "url": "https://github.com/zkoss/zk/commit/d318bae6436120f34ed36eb735bcd717413cf039", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line", "committedDate": "2020-07-13T09:54:52Z", "type": "forcePushed"}, {"oid": "daba14d8375aa5f16603bba76d482a8784fb15ff", "url": "https://github.com/zkoss/zk/commit/daba14d8375aa5f16603bba76d482a8784fb15ff", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line", "committedDate": "2020-07-13T10:03:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA2NjkyMQ==", "url": "https://github.com/zkoss/zk/pull/2052#discussion_r454066921", "bodyText": "lineClass", "author": "scribetw", "createdAt": "2020-07-14T02:50:55Z", "path": "zul/src/archive/web/js/zul/sel/Treecell.js", "diffHunk": "@@ -180,8 +180,14 @@ zul.sel.Treecell = zk.$extends(zul.LabelImageWidget, {\n \t\t\t}\n \t\t\tvar iconScls = tree ? tree.getZclass() : '',\n \t\t\t\tpitems = this._getTreeitems(item, tree);\n-\t\t\tfor (var j = 0, k = pitems.length; j < k; ++j)\n-\t\t\t\tthis._appendIcon(sb, iconScls, 'spacer', false, j == k - 1); // ZK-4494: provide line anchor information to draw tree lines\n+\t\t\tfor (var j = 0, k = pitems.length; j < k; ++j) {\n+\t\t\t\tvar lineAnchor = '';\n+\t\t\t\tif (j == k - 1) // last meaningful line in structure\n+\t\t\t\t\tlineAnchor = '-line-anchor';", "originalCommit": "daba14d8375aa5f16603bba76d482a8784fb15ff", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA2ODYyNg==", "url": "https://github.com/zkoss/zk/pull/2052#discussion_r454068626", "bodyText": "reverse order find visible child", "author": "scribetw", "createdAt": "2020-07-14T02:57:09Z", "path": "zul/src/archive/web/js/zul/sel/Treechildren.js", "diffHunk": "@@ -261,6 +261,16 @@ zul.sel.Treechildren = zk.$extends(zul.Widget, {\n \t\t\tjq(n).replaceWith(content);\n \t\t}\n \t\tchild.bind(desktop, skipper);\n+\t},\n+\tgetLastVisibleItem_: function () { // ZK-4494: provide line anchor information to draw tree lines\n+\t\tvar items = [];\n+\t\tfor (var w = this.firstChild; w; w = w.nextSibling)", "originalCommit": "daba14d8375aa5f16603bba76d482a8784fb15ff", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA2OTcxNw==", "url": "https://github.com/zkoss/zk/pull/2052#discussion_r454069717", "bodyText": "return treechildren && treechildren.getLastVisibleItem_() == treeitem;", "author": "scribetw", "createdAt": "2020-07-14T03:01:14Z", "path": "zul/src/archive/web/js/zul/sel/Treerow.js", "diffHunk": "@@ -92,5 +92,13 @@ zul.sel.Treerow = zk.$extends(zul.Widget, {\n \t},\n \tdeferRedrawHTML_: function (out) {\n \t\tout.push('<tr', this.domAttrs_({domClass: 1}), ' class=\"z-renderdefer\"></tr>');\n+\t},\n+\tisLastVisibleChild_: function () {\n+\t\tvar result = false,\n+\t\t\ttreeitem = this.parent,\n+\t\t\ttreechildren = treeitem.parent;\n+\t\tif (treechildren)\n+\t\t\tresult = treechildren.getLastVisibleItem_() == treeitem;", "originalCommit": "daba14d8375aa5f16603bba76d482a8784fb15ff", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e5a8d67ebe4b7b1916e0a2ecf63905f203dcacb8", "url": "https://github.com/zkoss/zk/commit/e5a8d67ebe4b7b1916e0a2ecf63905f203dcacb8", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line", "committedDate": "2020-07-14T03:29:56Z", "type": "commit"}, {"oid": "e5a8d67ebe4b7b1916e0a2ecf63905f203dcacb8", "url": "https://github.com/zkoss/zk/commit/e5a8d67ebe4b7b1916e0a2ecf63905f203dcacb8", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line", "committedDate": "2020-07-14T03:29:56Z", "type": "forcePushed"}]}