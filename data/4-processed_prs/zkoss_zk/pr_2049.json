{"pr_number": 2049, "pr_title": "ZK-4476: Height calculation error when using vFlex = \"min\" in hlayout\u2026", "pr_createdAt": "2020-07-10T07:38:23Z", "pr_url": "https://github.com/zkoss/zk/pull/2049", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0NDA1OQ==", "url": "https://github.com/zkoss/zk/pull/2049#discussion_r452744059", "bodyText": "test div height instead", "author": "scribetw", "createdAt": "2020-07-10T09:52:04Z", "path": "zktest/src/archive/test2/B95-ZK-4476.zul", "diffHunk": "@@ -0,0 +1,31 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<!--\n+B95-ZK-4476.zul\n+\n+\tPurpose:\n+\t\t\n+\tDescription:\n+\t\t\n+\tHistory:\n+\t\tTue, Jul 2, 2020  02:48:18 PM, Created by jameschu\n+\n+Copyright (C) 2020 Potix Corporation. All Rights Reserved.\n+\n+-->\n+<zk xmlns:w=\"client\">\n+\t<hlayout hflex=\"1\" vflex=\"1\">\n+\t\t<borderlayout hflex=\"1\" vflex=\"min\">\n+\t\t\t<north>\n+\t\t\t\t<div vflex=\"min\" style=\"background:yellow;\">", "originalCommit": "5d4c598196310dd0329163c09d92d84ad2b1c115", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ff06286e4bc9c24804ba2b4ef9d29726b852721c", "url": "https://github.com/zkoss/zk/commit/ff06286e4bc9c24804ba2b4ef9d29726b852721c", "message": "ZK-4476: Height calculation error when using vFlex = \"min\" in hlayout and borderlayout", "committedDate": "2020-07-10T10:26:14Z", "type": "forcePushed"}, {"oid": "d109b72a4d446fb5720022695a2043b5f438c626", "url": "https://github.com/zkoss/zk/commit/d109b72a4d446fb5720022695a2043b5f438c626", "message": "ZK-4476: Height calculation error when using vFlex = \"min\" in hlayout and borderlayout", "committedDate": "2020-07-15T08:36:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM1MTAwNA==", "url": "https://github.com/zkoss/zk/pull/2049#discussion_r456351004", "bodyText": "divide by 0", "author": "scribetw", "createdAt": "2020-07-17T10:10:32Z", "path": "zul/src/archive/web/js/zul/box/Hlayout.js", "diffHunk": "@@ -50,5 +58,36 @@ zul.box.Hlayout = zk.$extends(zul.box.Layout, {\n \t},\n \tgetFlexDirection_: function () {\n \t\treturn 'row';\n+\t},\n+\t//ZK-4476\n+\tbeforeSize: function () {\n+\t\tvar xc = this.firstChild,\n+\t\t\ttotalWd = this.$n().offsetWidth,\n+\t\t\tflexCnt = 0,\n+\t\t\tflexWgts = [];\n+\t\tfor (; xc; xc = xc.nextSibling) {\n+\t\t\tif (xc.isVisible() && !(zkc = zk(xc)).hasVParent()) {\n+\t\t\t\tvar nhflex = xc._nhflex,\n+\t\t\t\t\tnXc = xc.$n();\n+\t\t\t\tif (nhflex) {\n+\t\t\t\t\tflexWgts.push({wgt: xc, flex: nhflex});\n+\t\t\t\t\tflexCnt += nhflex;\n+\t\t\t\t} else if (nXc) {\n+\t\t\t\t\tvar xcOffsetWidth = nXc.offsetWidth;\n+\t\t\t\t\ttotalWd -= xcOffsetWidth;\n+\t\t\t\t\txc.$n('chdex').style.width = jq.px0(xcOffsetWidth);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t\tvar perWd = totalWd / flexCnt;", "originalCommit": "d109b72a4d446fb5720022695a2043b5f438c626", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "650435f3b86368e9e5ecbb999052b45e75856fbe", "url": "https://github.com/zkoss/zk/commit/650435f3b86368e9e5ecbb999052b45e75856fbe", "message": "ZK-4476: Height calculation error when using vFlex = \"min\" in hlayout and borderlayout", "committedDate": "2020-07-17T10:27:25Z", "type": "commit"}, {"oid": "650435f3b86368e9e5ecbb999052b45e75856fbe", "url": "https://github.com/zkoss/zk/commit/650435f3b86368e9e5ecbb999052b45e75856fbe", "message": "ZK-4476: Height calculation error when using vFlex = \"min\" in hlayout and borderlayout", "committedDate": "2020-07-17T10:27:25Z", "type": "forcePushed"}]}