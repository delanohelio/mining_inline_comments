{"pr_number": 1999, "pr_title": "ZK-4544: Radio/Checkbox provide a status class name for more easier theme cust\u2026", "pr_createdAt": "2020-05-14T02:57:31Z", "pr_url": "https://github.com/zkoss/zk/pull/1999", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkzNDc2MA==", "url": "https://github.com/zkoss/zk/pull/1999#discussion_r424934760", "bodyText": "this.$s('checked')", "author": "plijyfes", "createdAt": "2020-05-14T07:46:13Z", "path": "zul/src/archive/web/js/zul/wgt/Radio.js", "diffHunk": "@@ -90,6 +90,7 @@ zul.wgt.Radio = zk.$extends(zul.wgt.Checkbox, {\n \t\t\tif (n) {\n \t\t\t\tn.checked = checked || false;\n \t\t\t\tchecked ? jq(n).attr('checked','checked') : jq(n).removeAttr('checked');\n+\t\t\t\tjq(this.$n()).toggleClass(this.$s() + '-checked', checked);", "originalCommit": "878d87533fc96ec39de9f4325b6f5e49388795de", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkzNTI3Nw==", "url": "https://github.com/zkoss/zk/pull/1999#discussion_r424935277", "bodyText": "add remove class name test", "author": "plijyfes", "createdAt": "2020-05-14T07:47:10Z", "path": "zktest/test/java/org/zkoss/zktest/zats/test2/F91_ZK_4544Test.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/* F91_ZK_4544Test.java\n+\n+\t\tPurpose:\n+\t\t\n+\t\tDescription:\n+\t\t\n+\t\tHistory:\n+\t\t\t\tThu May 14 10:23:07 CST 2020, Created by leon\n+\n+Copyright (C) 2020 Potix Corporation. All Rights Reserved.\n+*/\n+package org.zkoss.zktest.zats.test2;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.zkoss.zktest.zats.WebDriverTestCase;\n+\n+public class F91_ZK_4544Test extends WebDriverTestCase {\n+\t@Test\n+\tpublic void test() {\n+\t\tconnect();\n+\t\tclick(jq(\".z-radio-content\").eq(0));\n+\t\twaitResponse();\n+\t\tAssert.assertTrue(jq(\".z-radio\").eq(0).hasClass(\"z-radio-checked\"));", "originalCommit": "878d87533fc96ec39de9f4325b6f5e49388795de", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkzODc3MA==", "url": "https://github.com/zkoss/zk/pull/1999#discussion_r424938770", "bodyText": "checkbox default", "author": "plijyfes", "createdAt": "2020-05-14T07:53:03Z", "path": "zkdoc/release-note", "diffHunk": "@@ -8,6 +8,7 @@ ZK 9.1.0\n   ZK-4552: Simplify MVVM syntax\n   ZK-4560: Theme customization improvement - avoid patch.less\n   ZK-4562: Introduce OWASP Dependency-Check", "originalCommit": "878d87533fc96ec39de9f4325b6f5e49388795de", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9286bed7ddd215e3b2a4b718712e4233e6f813db", "url": "https://github.com/zkoss/zk/commit/9286bed7ddd215e3b2a4b718712e4233e6f813db", "message": "ZK-4544: Radio/Checkbox provide a status class name for more easier theme customization", "committedDate": "2020-05-15T03:02:55Z", "type": "forcePushed"}, {"oid": "be5120a979704af12430f41d98cd0d2da4810fe3", "url": "https://github.com/zkoss/zk/commit/be5120a979704af12430f41d98cd0d2da4810fe3", "message": "ZK-4544: Radio/Checkbox provide a status class name for more easier theme customization", "committedDate": "2020-05-15T03:16:17Z", "type": "forcePushed"}, {"oid": "388c902c240934f7398aa4a88506a6a897635f21", "url": "https://github.com/zkoss/zk/commit/388c902c240934f7398aa4a88506a6a897635f21", "message": "ZK-4544: Radio/Checkbox provide a status class name for more easier theme customization", "committedDate": "2020-05-15T03:40:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzg1NTU5Nw==", "url": "https://github.com/zkoss/zk/pull/1999#discussion_r427855597", "bodyText": "getMoldPrefix_", "author": "plijyfes", "createdAt": "2020-05-20T09:05:50Z", "path": "zul/src/archive/web/js/zul/wgt/Checkbox.ts", "diffHunk": "@@ -362,21 +360,27 @@ zul.wgt.Checkbox = zk.$extends(zul.LabelImageWidget, {\n \t\t\t}\r\n \t\t}\r\n \t},\r\n+\t_getMoldPrefix(): string {\r", "originalCommit": "388c902c240934f7398aa4a88506a6a897635f21", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzg1NTkyNg==", "url": "https://github.com/zkoss/zk/pull/1999#discussion_r427855926", "bodyText": "clearStateClassName_", "author": "plijyfes", "createdAt": "2020-05-20T09:06:23Z", "path": "zul/src/archive/web/js/zul/wgt/Checkbox.ts", "diffHunk": "@@ -362,21 +360,27 @@ zul.wgt.Checkbox = zk.$extends(zul.LabelImageWidget, {\n \t\t\t}\r\n \t\t}\r\n \t},\r\n+\t_getMoldPrefix(): string {\r\n+\t\tif (this._isDefaultMold())\r\n+\t\t\treturn '';\r\n+\t\telse\r\n+\t\t\treturn this.getMold() + '-';\r\n+\t},\r\n \t_getClassNameByState(): string {\r\n-\t\tlet mold = this.getMold();\r\n+\t\tlet moldPrefix = this._getMoldPrefix();\r\n \t\tif (this._indeterminate) {\r\n-\t\t\treturn this.$s(mold + '-indeterminate');\r\n+\t\t\treturn this.$s(moldPrefix + 'indeterminate');\r\n \t\t} else {\r\n-\t\t\treturn this.$s(mold + (this._checked ? '-on' : '-off'));\r\n+\t\t\treturn this.$s(moldPrefix + (this._checked ? 'on' : 'off'));\r\n \t\t}\r\n \t},\r\n \t_clearStateClassName() {\r", "originalCommit": "388c902c240934f7398aa4a88506a6a897635f21", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzg1NzE1OA==", "url": "https://github.com/zkoss/zk/pull/1999#discussion_r427857158", "bodyText": "test default on/off for both radio and checkbox", "author": "plijyfes", "createdAt": "2020-05-20T09:08:23Z", "path": "zktest/test/java/org/zkoss/zktest/zats/test2/F91_ZK_4544Test.java", "diffHunk": "@@ -0,0 +1,73 @@\n+/* F91_ZK_4544Test.java\n+\n+\t\tPurpose:\n+\t\t\n+\t\tDescription:\n+\t\t\n+\t\tHistory:\n+\t\t\t\tThu May 14 10:23:07 CST 2020, Created by leon\n+\n+Copyright (C) 2020 Potix Corporation. All Rights Reserved.\n+*/\n+package org.zkoss.zktest.zats.test2;\n+\n+import org.junit.Assert;\n+import org.junit.Test;\n+import org.zkoss.zktest.zats.WebDriverTestCase;\n+import org.zkoss.zktest.zats.ztl.JQuery;\n+\n+public class F91_ZK_4544Test extends WebDriverTestCase {\n+\t@Test\n+\tpublic void radioTest() {\n+\t\tconnect();\n+\t\t\n+\t\tJQuery radio = jq(\".z-radio\").eq(0);\n+\t\tJQuery radioDisabledButton = jq(\"@button\").eq(0);\n+\t\t\n+\t\tAssert.assertTrue(radio.hasClass(\"z-radio-off\"));\n+\t\t\n+\t\tclick(jq(\".z-radio-content\").eq(0));\n+\t\twaitResponse();\n+\t\tAssert.assertTrue(radio.hasClass(\"z-radio-on\"));\n+\t\t\n+\t\tclick(jq(\".z-radio-content\").eq(1));\n+\t\twaitResponse();\n+\t\tAssert.assertFalse(radio.hasClass(\"z-radio-on\"));\n+\t\tAssert.assertTrue(jq(\".z-radio\").eq(1).hasClass(\"z-radio-on\"));\n+\t\t\n+\t\tclick(radioDisabledButton);\n+\t\twaitResponse();\n+\t\tAssert.assertTrue(radio.hasClass(\"z-radio-disabled\"));\n+\t\t\n+\t\tclick(radioDisabledButton);\n+\t\twaitResponse();\n+\t\tAssert.assertFalse(radio.hasClass(\"z-radio-disabled\"));\n+\t}\n+\t\n+\t@Test\n+\tpublic void checkboxTest() {\n+\t\tconnect();\n+\t\t\n+\t\tJQuery checkbox = jq(\".z-checkbox\").eq(0);\n+\t\tJQuery checkboxContent = jq(\".z-checkbox-content\").eq(0);\n+\t\tJQuery checkboxDisabledButton = jq(\"@button\").eq(1);\n+\t\t\n+\t\tAssert.assertTrue(checkbox.hasClass(\"z-checkbox-off\"));", "originalCommit": "388c902c240934f7398aa4a88506a6a897635f21", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cde95bd52ede90aa142827393a34dfcdd3948a67", "url": "https://github.com/zkoss/zk/commit/cde95bd52ede90aa142827393a34dfcdd3948a67", "message": "ZK-4544: Radio/Checkbox provide a status class name for more easier theme customization", "committedDate": "2020-05-20T10:11:28Z", "type": "commit"}, {"oid": "cde95bd52ede90aa142827393a34dfcdd3948a67", "url": "https://github.com/zkoss/zk/commit/cde95bd52ede90aa142827393a34dfcdd3948a67", "message": "ZK-4544: Radio/Checkbox provide a status class name for more easier theme customization", "committedDate": "2020-05-20T10:11:28Z", "type": "forcePushed"}]}