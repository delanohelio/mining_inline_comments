{"pr_number": 833, "pr_title": "Fix shared poller OOM", "pr_createdAt": "2020-06-18T05:31:03Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/833", "timeline": [{"oid": "87e88d5ea0630e65f65eb023a0c1ee57a586a7f6", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/87e88d5ea0630e65f65eb023a0c1ee57a586a7f6", "message": "Fix shared poller OOM\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-06-18T05:30:37Z", "type": "commit"}, {"oid": "2c9e5f8f51f87ed342048430c7de347a631cf97e", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/2c9e5f8f51f87ed342048430c7de347a631cf97e", "message": "Fix Marketplace\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-06-18T19:36:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUxMTkxMg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/833#discussion_r442511912", "bodyText": "You should be able to reduce this to just `docker push \"${registry}/deployer\" since you tagged it during build. All the tags should pushed along", "author": "Nana-EC", "createdAt": "2020-06-18T21:26:34Z", "path": "charts/marketplace/gcp/release.sh", "diffHunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env bash\n+set -ex\n+\n+if [[ \"$#\" -ne 1 ]]; then\n+  echo \"You must provide the Mirror Node image tag\"\n+  exit 1\n+fi\n+\n+tag=\"${1}\"\n+tag_minor=\"${tag%\\.*}\"\n+bats_tag=\"latest\"\n+postgresql_tag=\"latest\"\n+registry=\"gcr.io/mirror-node-public/hedera-mirror-node\"\n+\n+function retag() {\n+  local source=${1}\n+  local image=${2}\n+  local target=\"${registry}/${image}\"\n+\n+  # Main image\n+  if [[ -z \"${image}\" ]]; then\n+    target=\"${registry}\"\n+  fi\n+\n+  docker pull \"${source}\"\n+  docker tag \"${source}\" \"${target}:${tag}\"\n+  docker tag \"${source}\" \"${target}:${tag_minor}\"\n+  docker push \"${target}:${tag}\"\n+  docker push \"${target}:${tag_minor}\"\n+}\n+\n+# Build Marketplace deployer image\n+docker build -f ./Dockerfile -t \"${registry}/deployer:${tag}\" -t \"${registry}/deployer:${tag_minor}\" --build-arg tag=${tag} ../..\n+docker push \"${registry}/deployer:${tag}\"", "originalCommit": "2c9e5f8f51f87ed342048430c7de347a631cf97e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY1MjAzMg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/833#discussion_r443652032", "bodyText": "I originally had that, but then it also pushed a rc1 that I had locally. I would prefer we explicitly specify the tags to push so we don't accidentally push anything else like pre-release builds.", "author": "steven-sheehy", "createdAt": "2020-06-22T15:40:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUxMTkxMg=="}], "type": "inlineReview"}, {"oid": "f523ad7a48de897f56067f0ce20f3ea575ea4598", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/f523ad7a48de897f56067f0ce20f3ea575ea4598", "message": "Merge master\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-06-22T15:53:21Z", "type": "commit"}]}