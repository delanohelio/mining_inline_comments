{"pr_number": 727, "pr_title": "Port running hash version to V0.10", "pr_createdAt": "2020-04-30T03:38:22Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/727", "timeline": [{"oid": "689a8cdb70bc02a25517ef13215710acc7931b0e", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/689a8cdb70bc02a25517ef13215710acc7931b0e", "message": "Pull in Hedera Protobuf 0.4.2 for r5-rc4 update (#721)\n\n* Pull in Hedera Protobug 0.4.2 for r5-rc4 update\r\nDetailed description:\r\nThe r5-rc4 update contained a few changes and additions.\r\nThis change\r\n\r\nupdates hedera-protobuf-java-api to v0.4.2\r\nadd migration v1.23 which updates t_transaction_types and t_transaction_results tables\r\nUpdates TransactionTypeEnum, TransactionHandlerFactory, RecordItemParser with updated Claim => LiveHash change\r\nUpdates tests with appropriate change logic\r\nWhich issue(s) this PR fixes:\r\nFixes #722\r\n\r\n\r\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\r\n\r\n* Addressed feedback\r\n\r\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\r\n\r\n* Fixed arrangement\r\n\r\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\r\n\r\n* minor variable rename\r\n\r\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-30T01:11:33Z", "type": "commit"}, {"oid": "daefc161c583c3d1f3b9479307c4a691a6e6a934", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/daefc161c583c3d1f3b9479307c4a691a6e6a934", "message": "Bump version for v0.10.0.rc2\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-30T01:28:00Z", "type": "commit"}, {"oid": "348973809f50cdf929238b80015ad95840aa4c14", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/348973809f50cdf929238b80015ad95840aa4c14", "message": "Added running_hash_version migration (#726)\n\n* Migrate db to add runningHashVersion\nDetailed description:\nThe r5-rc4 update contained a few changes and additions.\nThis change\n\nAdds the running_hash_version column to the topic_message table\nSets running_hash_version of topic_message table if null. Based on comparison of consensus_timestamp with r5-rc4 deployDate it will be set to default\nSets default running hash version as configureable value\nWhich issue(s) this PR fixes:\nFixes #688\n\nSpecial notes for your reviewer:\nRan migration locally to verify cases of\n\nNo running_hash_version with messages pre and post deploy date\nrunning_hash_version column present with empty values\nrunning_hash_version column present and set\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\n\n* Set time to May 5th, at 19:00 UTC and updated config name\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\n\n* Address feedback on naming and constraints\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\n\n* Fixed repeated runing_hash column\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>\n\n* Removed value of topicRunningHashV2AddedTimestamp to enforce deployment time set\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-30T02:40:19Z", "type": "commit"}, {"oid": "a7588d0ab72c0b04432333825ec838966d3a51f6", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/a7588d0ab72c0b04432333825ec838966d3a51f6", "message": "Updated topicRunningHashV2AddedTimestamp comment\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-30T16:18:20Z", "type": "commit"}, {"oid": "9da4d8eeab4643f857ceae258b7405189c449e00", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/9da4d8eeab4643f857ceae258b7405189c449e00", "message": "Corrected topicRunningHashV2AddedTimestamp  comment for current migration logic\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-30T16:22:13Z", "type": "commit"}, {"oid": "a10e009fc0e6a81353a7c0659bb42f8bf4240b42", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/a10e009fc0e6a81353a7c0659bb42f8bf4240b42", "message": "Helm chart dependency upgrades\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-30T19:49:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI0OTI0Nw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/727#discussion_r418249247", "bodyText": "These are indented wrong and will be ignored. Please undo", "author": "steven-sheehy", "createdAt": "2020-04-30T19:48:08Z", "path": "hedera-mirror-importer/src/main/resources/application.yml", "diffHunk": "@@ -63,14 +66,15 @@ spring:\n       api-user: ${hedera.mirror.db.api-username}\n       db-name: ${hedera.mirror.db.name}\n       db-user: ${hedera.mirror.db.username}\n-  jpa:\n-    properties:\n-      hibernate:\n-        generate_statistics: true\n-  task:\n-    scheduling:\n-      pool:\n-        size: 6\n-  test:\n-    database:\n-      replace: NONE\n+      topicRunningHashV2AddedTimestamp: ${hedera.mirror.topicRunningHashV2AddedTimestamp}\n+jpa:", "originalCommit": "9da4d8eeab4643f857ceae258b7405189c449e00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI2NTU3Mw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/727#discussion_r418265573", "bodyText": "Fixed", "author": "Nana-EC", "createdAt": "2020-04-30T20:20:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI0OTI0Nw=="}], "type": "inlineReview"}, {"oid": "55d1606c12bf18311aacc07b5ce12b20e2dfe478", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/55d1606c12bf18311aacc07b5ce12b20e2dfe478", "message": "Fixed indentation of spring jpa, task and test\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-30T20:19:35Z", "type": "commit"}]}