{"pr_number": 994, "pr_title": "Fixing acceptance tests so that the jar is not always built (#967)", "pr_createdAt": "2020-08-28T05:20:51Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/994", "timeline": [{"oid": "672326b7e72c187a2b84f7b8ac6e1e1d39e49d27", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/672326b7e72c187a2b84f7b8ac6e1e1d39e49d27", "message": "Fixing acceptance tests so that the jar is not always built (#967)\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-08-28T04:52:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQzMzMyMg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/994#discussion_r479433322", "bodyText": "Not sure I agree with the approach. Regardless of packaging, these are considered integration tests and they make sense in this phase. Also, this is a breaking change for ops. It would be more appropriate that the pom.xml switched from jar to pom packaging and surefire plugin is set to skipped.", "author": "steven-sheehy", "createdAt": "2020-08-28T17:11:48Z", "path": "hedera-mirror-test/pom.xml", "diffHunk": "@@ -201,14 +201,6 @@\n                                 </log4j.configurationFile>\n                             </systemPropertyVariables>\n                         </configuration>", "originalCommit": "672326b7e72c187a2b84f7b8ac6e1e1d39e49d27", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1NDg5NQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/994#discussion_r479454895", "bodyText": "From what I've read and seen with experiments, switching the packaging to pom will switch to a different lifecycle that only executes the package, install, and deploy phases, so we would have to manually specify all of the phases needed to run the tests.  Here's an example of what it does currently when switching to pom\n[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------< com.hedera:hedera-mirror-test >--------------------\n[INFO] Building Hedera Mirror Node Test 0.18.0-rc1\n[INFO] --------------------------------[ pom ]---------------------------------\n[INFO]\n[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ hedera-mirror-test ---\n[INFO] Deleting /Users/ianjungmann/dev/hedera-mirror-node/hedera-mirror-test/target\n[INFO]\n[INFO] --- maven-surefire-plugin:3.0.0-M5:test (this-is-my-integration-test-phase) @ hedera-mirror-test ---\n[INFO] No tests to run.\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.476 s\n[INFO] Finished at: 2020-08-28T12:55:37-05:00\n[INFO] ------------------------------------------------------------------------", "author": "ijungmann", "createdAt": "2020-08-28T17:56:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQzMzMyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1NjMwOQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/994#discussion_r479456309", "bodyText": "One other option I've played with is to configure the maven jar phase to not actually execute by removing the plugin from the phase, that would allow us to keep the tests in the integration-test phase without actually building the jar.  It's a slightly hacky approach but it seems to work.", "author": "ijungmann", "createdAt": "2020-08-28T17:59:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQzMzMyMg=="}], "type": "inlineReview"}, {"oid": "d9ccb549a1f6e8ea0864f5906342eb100b0a088c", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/d9ccb549a1f6e8ea0864f5906342eb100b0a088c", "message": "Revert \"Fixing acceptance tests so that the jar is not always built (#967)\"\n\nReverting changes for first attempt as it's easier to restart from the baseline than undo changes\n\nThis reverts commit 672326b7e72c187a2b84f7b8ac6e1e1d39e49d27.\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-08-28T21:06:56Z", "type": "commit"}, {"oid": "cdae1ecbb9b7c5950cb9ebd10dd12a33007fa599", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/cdae1ecbb9b7c5950cb9ebd10dd12a33007fa599", "message": "Forcing jar to not build and surefire to run as part of integratio-test phase during acceptance tests\n\nSigned-off-by: Ian Jungmann <ian.jungmann@hedera.com>", "committedDate": "2020-08-28T21:17:05Z", "type": "commit"}]}