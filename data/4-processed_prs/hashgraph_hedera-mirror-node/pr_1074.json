{"pr_number": 1074, "pr_title": "stateproof: download record file from stored node", "pr_createdAt": "2020-09-22T21:11:56Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074", "timeline": [{"oid": "e616c4010e4747550b2083a1b158fd1cc731c7c6", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/e616c4010e4747550b2083a1b158fd1cc731c7c6", "message": "stateproof: download record file from the node used for download and verification in importer\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>", "committedDate": "2020-09-22T21:06:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAzNzI5Mw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074#discussion_r493037293", "bodyText": "address the issue config is overridden but not restored after a test case finishes. the issue was introduced in a previous ticket limiting address books to the one current to the queried transaction's consensus time", "author": "xin-hedera", "createdAt": "2020-09-22T21:13:46Z", "path": "hedera-mirror-rest/__tests__/integration.test.js", "diffHunk": "@@ -367,6 +371,19 @@ describe('DB integration test - spec based', () => {\n     }\n \n     _.merge(config, override);\n+    configOverriden = true;\n+  };\n+\n+  const restoreConfig = () => {\n+    if (configOverriden) {\n+      Object.assign(config, configClone);\n+      Object.keys(config).forEach((key) => {\n+        if (!(key in configClone)) {\n+          delete config[key];\n+        }\n+      });\n+      configOverriden = false;\n+    }", "originalCommit": "e616c4010e4747550b2083a1b158fd1cc731c7c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzcxODEyNg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074#discussion_r493718126", "bodyText": "This description mentions 2019-10-11T13_32_41.443132Z.rcd while the error mentions 2019-10-11T13_35_45.120768Z.rcd. Guessing description is wrong?", "author": "steven-sheehy", "createdAt": "2020-09-23T16:12:26Z", "path": "hedera-mirror-rest/__tests__/specs/stateproof-09-no-record-file-found-from-0.0.4.spec.json", "diffHunk": "@@ -0,0 +1,27 @@\n+{\n+  \"description\": \"Stateproof api calls with valid transaction ID but no record file found from node 0.0.4\",\n+  \"extendedDescription\": [\n+    \"When querying stateproof for transaction 0.0.111152-1570800932-629451400, expect to find it in record file \",\n+    \"2019-10-11T13_32_41.443132Z.rcd with stored node account id 0.0.4 and all 4 signature files exist. However, \",", "originalCommit": "e616c4010e4747550b2083a1b158fd1cc731c7c6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzczMjkzMw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/1074#discussion_r493732933", "bodyText": "yes good catch, the description is wrong", "author": "xin-hedera", "createdAt": "2020-09-23T16:34:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzcxODEyNg=="}], "type": "inlineReview"}, {"oid": "7db5d3e4dfbb083d4b51ad471bc5f887df942a5f", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/7db5d3e4dfbb083d4b51ad471bc5f887df942a5f", "message": "fix record file name in description of stateproof-09-no-record-file-found-from-0.0.4.spec.json\n\nSigned-off-by: Xin Li <xin.li@swirlds.com>", "committedDate": "2020-09-23T16:38:06Z", "type": "commit"}]}