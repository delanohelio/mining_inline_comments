{"pr_number": 944, "pr_title": "Continuously deploy to development", "pr_createdAt": "2020-08-10T22:01:36Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/944", "timeline": [{"oid": "18fe93cc1907087606bfdd683e6f9ba9a629ab8f", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/18fe93cc1907087606bfdd683e6f9ba9a629ab8f", "message": "Continuously deploy to development\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-08-10T21:44:42Z", "type": "commit"}, {"oid": "c5ec5eab174c4e8f06006f2af7c2b8fd130c0fa3", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c5ec5eab174c4e8f06006f2af7c2b8fd130c0fa3", "message": "Update documentation with new Helm chart repo\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-08-10T22:06:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIzNjg1Nw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468236857", "bodyText": "Q: Is this the load balancer IP. Should it be configureable?", "author": "Nana-EC", "createdAt": "2020-08-10T23:17:00Z", "path": "hedera-mirror-rest/Dockerfile", "diffHunk": "@@ -1,11 +1,16 @@\n-FROM node:13.12.0-alpine3.11 as build\n-WORKDIR /usr/src/app\n-COPY package*.json ./\n-RUN npm install --no-package-lock\n+FROM node:14.7.0-alpine3.12\n+LABEL maintainer=\"mirrornode@hedera.com\"\n \n-FROM node:13.12.0-alpine3.11\n-WORKDIR /usr/src/app\n-COPY --from=build /usr/src/app .\n-COPY . ./\n+# Setup\n+WORKDIR /home/node/app/\n+RUN chown -R node:node .\n+COPY --chown=node:node . ./\n USER node\n-CMD npm start --no-update-notifier\n+\n+# Build\n+ENV NODE_ENV production\n+RUN npm ci --only=production && npm cache clean --force --loglevel=error\n+\n+# Run\n+EXPOSE 5551", "originalCommit": "c5ec5eab174c4e8f06006f2af7c2b8fd130c0fa3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI0NjkwNQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468246905", "bodyText": "It's the default port in the config. It's not used by Kubernetes at all. If they're using straight Docker/Docker Compose they can still map it to another port. It's basically used only for documentation purpose and does not actually publish any port.", "author": "steven-sheehy", "createdAt": "2020-08-10T23:49:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIzNjg1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1MDg2Mw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468250863", "bodyText": "Gotcha", "author": "Nana-EC", "createdAt": "2020-08-11T00:02:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIzNjg1Nw=="}], "type": "inlineReview"}, {"oid": "745249350e138967482fc6190319e7179b9eef75", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/745249350e138967482fc6190319e7179b9eef75", "message": "Remove unused env variable\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-08-10T23:56:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1MDYwNw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468250607", "bodyText": "nit: missing an s\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTest\n          \n          \n            \n                      command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTests", "author": "Nana-EC", "createdAt": "2020-08-11T00:01:36Z", "path": ".circleci/config.yml", "diffHunk": "@@ -352,7 +352,7 @@ jobs:\n       - restore_maven_cache\n       - run:\n           name: Running maven deploy\n-          command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTests ${DOCKER_TAG_OVERRIDE}\n+          command: ./mvnw ${MAVEN_CLI_OPTS} deploy -DskipTest", "originalCommit": "745249350e138967482fc6190319e7179b9eef75", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODMxNjU4Nw==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/944#discussion_r468316587", "bodyText": "Thanks, fixed", "author": "steven-sheehy", "createdAt": "2020-08-11T04:16:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1MDYwNw=="}], "type": "inlineReview"}, {"oid": "20c86dae1da4f59ef38963bf84d92c76bce5611f", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/20c86dae1da4f59ef38963bf84d92c76bce5611f", "message": "Fix circle config\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-08-11T04:16:07Z", "type": "commit"}, {"oid": "4f801fe75e0f67750ac0685bcc16be0ab69bb376", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/4f801fe75e0f67750ac0685bcc16be0ab69bb376", "message": "Change back to master tag\n\nSigned-off-by: Steven Sheehy <steven.sheehy@hedera.com>", "committedDate": "2020-08-11T14:26:56Z", "type": "commit"}]}