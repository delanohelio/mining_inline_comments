{"pr_number": 710, "pr_title": "Utilize plural rest api endpoints without breaking support", "pr_createdAt": "2020-04-23T00:22:40Z", "pr_url": "https://github.com/hashgraph/hedera-mirror-node/pull/710", "timeline": [{"oid": "c25a9d15672fa1f7489d3366f1a1127613531353", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/c25a9d15672fa1f7489d3366f1a1127613531353", "message": "Utilize plural rest api endpoints without breaking support\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-23T00:14:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ2NDExNQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/710#discussion_r413464115", "bodyText": "When do we plan to remove '?' regex match?\nNo need for backward compatibility - that's the whole premise everyone agreed on when adding these apis. I intend to use it.\nThere should be only 2 users for these apis. Let's talk to atul, get in touch with these guys, notify them and remove '?' in 0.12.0.", "author": "apeksharma", "createdAt": "2020-04-23T02:32:32Z", "path": "hedera-mirror-rest/server.js", "diffHunk": "@@ -101,20 +101,21 @@ if (config.api.metrics.enabled) {\n \n let apiPrefix = '/api/v1';\n \n-// routes\n-app.getAsync(apiPrefix + '/transactions', transactions.getTransactions);\n-app.getAsync(apiPrefix + '/transactions/:id', transactions.getOneTransaction);\n-app.getAsync(apiPrefix + '/balances', balances.getBalances);\n+// accounts routes\n app.getAsync(apiPrefix + '/accounts', accounts.getAccounts);\n app.getAsync(apiPrefix + '/accounts/:id', accounts.getOneAccount);\n-app.getAsync(apiPrefix + '/topic/message/:consensusTimestamp', topicmessage.getMessageByConsensusTimestamp);\n \n-// support singular and plural resource naming for single topic message via id and sequence\n-app.getAsync(apiPrefix + '/topic/:id/message/:sequencenumber', topicmessage.getMessageByTopicAndSequenceRequest);\n-app.getAsync(apiPrefix + '/topics/:id/messages/:sequencenumber', topicmessage.getMessageByTopicAndSequenceRequest);\n+// balances routes\n+app.getAsync(apiPrefix + '/balances', balances.getBalances);\n+\n+// transactions routes\n+app.getAsync(apiPrefix + '/transactions', transactions.getTransactions);\n+app.getAsync(apiPrefix + '/transactions/:id', transactions.getOneTransaction);\n \n-app.getAsync(apiPrefix + '/topics/:id/messages', topicmessage.getTopicMessages);\n-app.getAsync(apiPrefix + '/topic/:id/messages', topicmessage.getTopicMessages);\n+// topics routes\n+app.getAsync(apiPrefix + '/topics/:id/messages?', topicmessage.getTopicMessages);", "originalCommit": "c25a9d15672fa1f7489d3366f1a1127613531353", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzgzMzQ2MQ==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/710#discussion_r413833461", "bodyText": "Agreed. I'm happy to not use '?' added it as @steven-sheehy had concerns of us breaking customers back to back.\nI like the option of removing in 0.12.0 after notifying the 2 users.", "author": "Nana-EC", "createdAt": "2020-04-23T14:16:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ2NDExNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA5MDE5Mg==", "url": "https://github.com/hashgraph/hedera-mirror-node/pull/710#discussion_r414090192", "bodyText": "Reached out to customer and verified with logs usage of other endpoints. For now just support the concensustimestamp singular till v0.12.0", "author": "Nana-EC", "createdAt": "2020-04-23T20:09:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ2NDExNQ=="}], "type": "inlineReview"}, {"oid": "b4f2272b0204d14848909b51be4627353342e226", "url": "https://github.com/hashgraph/hedera-mirror-node/commit/b4f2272b0204d14848909b51be4627353342e226", "message": "Only backwards support the ConsensusTimestamp endpoint\n\nSigned-off-by: Nana-EC <56320167+Nana-EC@users.noreply.github.com>", "committedDate": "2020-04-23T20:08:01Z", "type": "commit"}]}