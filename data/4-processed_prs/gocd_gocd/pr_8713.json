{"pr_number": 8713, "pr_title": "Fix issues related to autoUpdate UI", "pr_createdAt": "2020-11-02T05:48:49Z", "pr_url": "https://github.com/gocd/gocd/pull/8713", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc3ODM0Nw==", "url": "https://github.com/gocd/gocd/pull/8713#discussion_r515778347", "bodyText": "Hmm, looking at RadioField, it doesn't seem to render errorText on its own. Should we just add <ErrorText/> to RadioField like all the other input components? Seems like it may have been an oversight in its initial impl?", "author": "marques-work", "createdAt": "2020-11-02T07:23:21Z", "path": "server/src/main/webapp/WEB-INF/rails/webpack/views/pages/pipelines/material_auto_update_toggle.tsx", "diffHunk": "@@ -32,19 +32,22 @@ interface Attrs {\n \n export class MaterialAutoUpdateToggle extends MithrilViewComponent<Attrs> {\n   view(vnode: m.Vnode<Attrs>) {\n-    const { noun, toggle, errors } = withDefaults(vnode.attrs);\n-    const autoUpdate = this.radioState(toggle);\n+    const {noun, toggle, errors} = withDefaults(vnode.attrs);\n+    const autoUpdate             = this.radioState(toggle);\n \n-    return <RadioField<AutoUpdateRadioOptions>\n-      label={`${_.capitalize(noun)} polling behavior:`}\n-      property={autoUpdate}\n-      readonly={!!vnode.attrs.disabled}\n-      errorText={errors?.errorsForDisplay(\"autoUpdate\")}\n-      dataTestId=\"material-auto-update\"\n-      possibleValues={[\n-        {label: `Regularly fetch updates to this ${noun}`, value: \"auto\"},\n-        {label: `Fetch updates to this ${noun} only on webhook or manual trigger`, value: \"manual\"},\n-      ]}/>;\n+    return [\n+      <RadioField<AutoUpdateRadioOptions>\n+        label={`${_.capitalize(noun)} polling behavior:`}\n+        property={autoUpdate}\n+        readonly={!!vnode.attrs.disabled}\n+        errorText={errors?.errorsForDisplay(\"autoUpdate\")}\n+        dataTestId=\"material-auto-update\"\n+        possibleValues={[\n+          {label: `Regularly fetch updates to this ${noun}`, value: \"auto\"},\n+          {label: `Fetch updates to this ${noun} only on webhook or manual trigger`, value: \"manual\"},\n+        ]}/>,\n+      <ErrorText errorText={errors?.errorsForDisplay(\"autoUpdate\")} errorId={`material-auto-update-error`}/>", "originalCommit": "64aa6813d673a3f727e429290b96ec71d64ac173", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc3ODY3Ng==", "url": "https://github.com/gocd/gocd/pull/8713#discussion_r515778676", "bodyText": "Unless there is a good case for not showing errors normally, but I'd find that to be odd.", "author": "marques-work", "createdAt": "2020-11-02T07:24:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc3ODM0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc5NjM5NQ==", "url": "https://github.com/gocd/gocd/pull/8713#discussion_r515796395", "bodyText": "Hmm sounds right to me. I will make the change.", "author": "kritika-singh3", "createdAt": "2020-11-02T08:06:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc3ODM0Nw=="}], "type": "inlineReview"}, {"oid": "b11a7f747d41e0c272dbdfde965e9e6c323469e1", "url": "https://github.com/gocd/gocd/commit/b11a7f747d41e0c272dbdfde965e9e6c323469e1", "message": "Showcase error text w.r.t. material auto update toggle widget", "committedDate": "2020-11-02T08:21:35Z", "type": "commit"}, {"oid": "f6c21666c6c61e84886944b09e46e1bafdacaf25", "url": "https://github.com/gocd/gocd/commit/f6c21666c6c61e84886944b09e46e1bafdacaf25", "message": "The foundation hax styles were applying which caused an additional 1em margin bottom to the radio input.\nRectified that by explicitly setting margin to zero.", "committedDate": "2020-11-02T08:21:35Z", "type": "commit"}, {"oid": "f6c21666c6c61e84886944b09e46e1bafdacaf25", "url": "https://github.com/gocd/gocd/commit/f6c21666c6c61e84886944b09e46e1bafdacaf25", "message": "The foundation hax styles were applying which caused an additional 1em margin bottom to the radio input.\nRectified that by explicitly setting margin to zero.", "committedDate": "2020-11-02T08:21:35Z", "type": "forcePushed"}]}