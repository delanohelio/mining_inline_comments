{"pr_number": 369, "pr_title": "Some improvements to the RCAIt", "pr_createdAt": "2020-08-13T01:57:06Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/369", "timeline": [{"oid": "db9fd92ffd24c4864472419ee4e9153198014648", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/db9fd92ffd24c4864472419ee4e9153198014648", "message": "Some improvements to the RCAIt\n\n1. Now we should be able to run a test method from Intellij\n2. The validations checks for no ERROR in logs. The test fails if some errors are generated.\n3. An ability to run all the integration tests using the target ./gradlew rcaIt\n4. Some code cleanups.", "committedDate": "2020-08-13T01:49:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDEwNjA3NQ==", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/369#discussion_r470106075", "bodyText": "remove this line ?", "author": "rguo-aws", "createdAt": "2020-08-13T17:14:05Z", "path": "build.gradle", "diffHunk": "@@ -183,6 +183,16 @@ task rcaTest(type: Test) {\n     testLogging.showStandardStreams = true\n }\n \n+task rcaIt(type: Test) {\n+    dependsOn checkstyleMain\n+    dependsOn checkstyleTest\n+    dependsOn spotbugsMain\n+    useJUnit {\n+        includeCategories 'com.amazon.opendistro.elasticsearch.performanceanalyzer.rca.integTests.framework.RcaItMarker'\n+    }\n+    //testLogging.showStandardStreams = true", "originalCommit": "db9fd92ffd24c4864472419ee4e9153198014648", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE0ODMzMg==", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/369#discussion_r470148332", "bodyText": "Wanted to keep it so than people can enable it if they want stdout ?", "author": "yojs", "createdAt": "2020-08-13T18:06:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDEwNjA3NQ=="}], "type": "inlineReview"}, {"oid": "a3b61b8e6df14f1874790cfc1a9a27cc3c82bd56", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/commit/a3b61b8e6df14f1874790cfc1a9a27cc3c82bd56", "message": "Addressed style check failures", "committedDate": "2020-08-13T18:03:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1MjYxOQ==", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/369#discussion_r470152619", "bodyText": "maybe we can make the command a verb like other gradle tasks? runRcaIt?", "author": "ktkrg", "createdAt": "2020-08-13T18:13:29Z", "path": "docs/rcait.md", "diffHunk": "@@ -75,7 +79,57 @@ of 60 seconds.\n     \n A test class can get access to the programmaticAPI to get information about hosts in the cluster\n or a particular host then the test class can declare a method with name `setTestApi(final TestApi api)`\n-and the test runer will call this setter to give a reference of the TEestApi to the testClass. \n+and the test runner will call this setter to give a reference of the TestApi to the testClass.\n+\n+### Cluster Types\n+The integration test framework let's us create three kinds of clusters as mentioned above. But\n+you need to know the hostTags to pick a host that would publish certain metrics or its the\n+hostTag by which you identify a host to make a REST request to. This section tells you what are\n+the different hostTags available for different cluster types.\n+\n+__Dedicated Master Cluster__\n+\n+This cluster type is composed of three master nodes and 2 data nodes.\n+\n+Host Ids | Host Tags\n+---------|----------\n+0 | HostTag.ELECTED_MASTER\n+1 | HostTag.STANDBY_MASTER_0\n+2 | HostTag.STANDBY_MASTER_1\n+3 | HostTag.DATA_0\n+4 | HostTag.DATA_1\n+\n+__ Co-located Master Cluster __\n+A co-located master cluster is one where all the data-nodes are master eligible. In the\n+test framework, this is composed of two nodes.\n+\n+Host IDs | Host Tags\n+---------|----------\n+0 | HostTag.ELECTED_MASTER\n+1 | HostTag.DATA_0\n+\n+\n+__ Single Node Cluster__\n+There is just one node in a single node cluster which is tagged as `HostTag.DATA_0`.\n+\n+Host IDs | Host Tags\n+---------|----------\n+0 | HostTag.DATA_0\n+\n+### Examples\n+\n+Some of the examples for how to write the integ tests can be found here:\n+`src/test/java/com/amazon/opendistro/elasticsearch/performanceanalyzer/rca/integTests/tests/poc/*`\n+\n+### Running the integ tests\n+1. All integration tests written using this framework can be run by using the command\n+`./gradlew rcaIt`", "originalCommit": "a3b61b8e6df14f1874790cfc1a9a27cc3c82bd56", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1MzA3Mw==", "url": "https://github.com/opendistro-for-elasticsearch/performance-analyzer-rca/pull/369#discussion_r470153073", "bodyText": "Maybe we can make this a verb like other gradle tasks(build, assemble, etc) runRcaIt?", "author": "ktkrg", "createdAt": "2020-08-13T18:14:17Z", "path": "build.gradle", "diffHunk": "@@ -183,6 +183,16 @@ task rcaTest(type: Test) {\n     testLogging.showStandardStreams = true\n }\n \n+task rcaIt(type: Test) {", "originalCommit": "a3b61b8e6df14f1874790cfc1a9a27cc3c82bd56", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}