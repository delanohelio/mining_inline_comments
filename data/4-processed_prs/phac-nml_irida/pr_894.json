{"pr_number": 894, "pr_title": "Update IRIDA documentation publishing strategy", "pr_createdAt": "2020-12-21T20:50:15Z", "pr_url": "https://github.com/phac-nml/irida/pull/894", "timeline": [{"oid": "aceb1e7e7e649c373eb8d6ef21bc5e67718c9016", "url": "https://github.com/phac-nml/irida/commit/aceb1e7e7e649c373eb8d6ef21bc5e67718c9016", "message": "removing jekyll from the mvn site build.  it'll get done separately now", "committedDate": "2020-11-19T20:32:04Z", "type": "commit"}, {"oid": "70576d50c85d78df03f5ebcdf6fc30e1f74715f2", "url": "https://github.com/phac-nml/irida/commit/70576d50c85d78df03f5ebcdf6fc30e1f74715f2", "message": "clearing up some unneeded files iwth new formats", "committedDate": "2020-11-20T15:49:48Z", "type": "commit"}, {"oid": "7c24511b6ec1306639c810248af1b40927dcd529", "url": "https://github.com/phac-nml/irida/commit/7c24511b6ec1306639c810248af1b40927dcd529", "message": "Merge branch 'development' into externalize-docs", "committedDate": "2020-11-27T21:30:23Z", "type": "commit"}, {"oid": "f33388c37394c518316a7d30140d87f282bb938d", "url": "https://github.com/phac-nml/irida/commit/f33388c37394c518316a7d30140d87f282bb938d", "message": "moved the apidocs location under the main developer location instead of\nin _site", "committedDate": "2020-11-27T21:45:08Z", "type": "commit"}, {"oid": "e0dedb453fc9760219764e94b209731a2dbb9f09", "url": "https://github.com/phac-nml/irida/commit/e0dedb453fc9760219764e94b209731a2dbb9f09", "message": "changed apidocs output location to target", "committedDate": "2020-12-08T21:19:14Z", "type": "commit"}, {"oid": "83e4454c1373824e8998eeaac6924a058216ae65", "url": "https://github.com/phac-nml/irida/commit/83e4454c1373824e8998eeaac6924a058216ae65", "message": "updated instuctions to build docs for pages", "committedDate": "2020-12-08T21:48:50Z", "type": "commit"}, {"oid": "719919ea477ec9c982a139b7629fe8154da0b203", "url": "https://github.com/phac-nml/irida/commit/719919ea477ec9c982a139b7629fe8154da0b203", "message": "Merge branch 'development' into externalize-docs", "committedDate": "2020-12-15T21:04:00Z", "type": "commit"}, {"oid": "ec5d8b6a9904d596ffba3e783c1eb04182c9fbce", "url": "https://github.com/phac-nml/irida/commit/ec5d8b6a9904d596ffba3e783c1eb04182c9fbce", "message": "moved the apidocs build directory to the main docs", "committedDate": "2020-12-17T16:01:10Z", "type": "commit"}, {"oid": "14a4499b74442aec90ea3be592a2d80a9cc1d732", "url": "https://github.com/phac-nml/irida/commit/14a4499b74442aec90ea3be592a2d80a9cc1d732", "message": "moved to a python script to build the docs", "committedDate": "2020-12-17T16:01:37Z", "type": "commit"}, {"oid": "9cace3c2b2b12614fe59a45064608b731b81d656", "url": "https://github.com/phac-nml/irida/commit/9cace3c2b2b12614fe59a45064608b731b81d656", "message": "Merge branch 'development' into externalize-docs", "committedDate": "2020-12-17T16:11:26Z", "type": "commit"}, {"oid": "d4f33276821e82468c20d827ec950b221267446f", "url": "https://github.com/phac-nml/irida/commit/d4f33276821e82468c20d827ec950b221267446f", "message": "changed doc building docs to run build-docs.py script", "committedDate": "2020-12-17T16:25:24Z", "type": "commit"}, {"oid": "62c78496960be1bd33f0cfaeae7990239ed09e02", "url": "https://github.com/phac-nml/irida/commit/62c78496960be1bd33f0cfaeae7990239ed09e02", "message": "changed docs build testing to use the jekyll build", "committedDate": "2020-12-17T16:29:42Z", "type": "commit"}, {"oid": "8e69c34a63799fd7496ef15474bb8807bcab7b3f", "url": "https://github.com/phac-nml/irida/commit/8e69c34a63799fd7496ef15474bb8807bcab7b3f", "message": "fixed doc directory", "committedDate": "2020-12-17T16:30:51Z", "type": "commit"}, {"oid": "f3d1bbb05d54396e1f6fde316fe9f01684405ae7", "url": "https://github.com/phac-nml/irida/commit/f3d1bbb05d54396e1f6fde316fe9f01684405ae7", "message": "added comments in build-docs", "committedDate": "2020-12-17T19:55:38Z", "type": "commit"}, {"oid": "dc9f78cc2c59335c077d7dda90815ad7bdbd393d", "url": "https://github.com/phac-nml/irida/commit/dc9f78cc2c59335c077d7dda90815ad7bdbd393d", "message": "Merge branch 'development' into externalize-docs", "committedDate": "2020-12-21T14:59:08Z", "type": "commit"}, {"oid": "3291c5c851b4a57fe24ac6901091904fc9e8ef60", "url": "https://github.com/phac-nml/irida/commit/3291c5c851b4a57fe24ac6901091904fc9e8ef60", "message": "changed doc link root", "committedDate": "2020-12-21T15:56:51Z", "type": "commit"}, {"oid": "e18d61c7d02836c246d1281b3e24520459c29ea1", "url": "https://github.com/phac-nml/irida/commit/e18d61c7d02836c246d1281b3e24520459c29ea1", "message": "updated changelog and readme with new docs locations", "committedDate": "2020-12-21T20:55:22Z", "type": "commit"}, {"oid": "9742726e0eb92b1ff51cbaa4fcdec70b186157c1", "url": "https://github.com/phac-nml/irida/commit/9742726e0eb92b1ff51cbaa4fcdec70b186157c1", "message": "added dev readme to the docs", "committedDate": "2020-12-21T21:02:35Z", "type": "commit"}, {"oid": "bc46ca0672bc097eff08e1f07f4e15f199de76e7", "url": "https://github.com/phac-nml/irida/commit/bc46ca0672bc097eff08e1f07f4e15f199de76e7", "message": "removed old build docs script", "committedDate": "2020-12-21T21:04:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwMTcyOA==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548301728", "bodyText": "Typo in documentation", "author": "deepsidhu85", "createdAt": "2020-12-23T22:36:32Z", "path": "build-docs.py", "diffHunk": "@@ -0,0 +1,72 @@\n+import os\n+import sys\n+import shutil\n+import time\n+\n+################################################################################\n+# This script is used to build documentation for IRIDA for deployment.  It will\n+# build the IRIDA javadoc and transfer all the documentation directories to an\n+# external documentation repository.  See below for usage.\n+################################################################################\n+\n+# If no args, print usage statement\n+if len(sys.argv) == 1:\n+    print(\"IRIDA documentation deployment script.\")\n+    print(\"Usage: build-docs.py TARGET_DIRECTORY\")\n+    print(\"TARGET_DIRECTORY should be the 'irida-documentation/docs' directory\")\n+    exit(0)\n+\n+pom_file = 'pom.xml'\n+result_dir = sys.argv[1]\n+doc_dir = 'doc/'\n+\n+# Check if we're in the irida directory\n+if not os.path.exists(pom_file):\n+    print(\"Cannot find pom file.  This script must be run in the base directory of the IRIDA repository.\")\n+    exit(1)\n+\n+if not os.path.isdir(doc_dir):\n+    print(\"Cannot find `/doc` directory.  This script must be run in the base directory of the IRIDA repository.\")\n+    exit(1)\n+\n+# check if the argument is the irida-documentation/docs directory\n+if not (result_dir.endswith('docs') or result_dir.endswith('docs/')) or not os.path.isdir(result_dir):\n+    print(\"The target directory doesn't appear to be the irida-docuemtation repository's `/docs` directory.\")", "originalCommit": "bc46ca0672bc097eff08e1f07f4e15f199de76e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzNjEzNw==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548536137", "bodyText": "Fixed in 6351ffb", "author": "tom114", "createdAt": "2020-12-24T13:51:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwMTcyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwNDIxNg==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548304216", "bodyText": "Typo in continue", "author": "deepsidhu85", "createdAt": "2020-12-23T22:40:06Z", "path": "build-docs.py", "diffHunk": "@@ -0,0 +1,72 @@\n+import os\n+import sys\n+import shutil\n+import time\n+\n+################################################################################\n+# This script is used to build documentation for IRIDA for deployment.  It will\n+# build the IRIDA javadoc and transfer all the documentation directories to an\n+# external documentation repository.  See below for usage.\n+################################################################################\n+\n+# If no args, print usage statement\n+if len(sys.argv) == 1:\n+    print(\"IRIDA documentation deployment script.\")\n+    print(\"Usage: build-docs.py TARGET_DIRECTORY\")\n+    print(\"TARGET_DIRECTORY should be the 'irida-documentation/docs' directory\")\n+    exit(0)\n+\n+pom_file = 'pom.xml'\n+result_dir = sys.argv[1]\n+doc_dir = 'doc/'\n+\n+# Check if we're in the irida directory\n+if not os.path.exists(pom_file):\n+    print(\"Cannot find pom file.  This script must be run in the base directory of the IRIDA repository.\")\n+    exit(1)\n+\n+if not os.path.isdir(doc_dir):\n+    print(\"Cannot find `/doc` directory.  This script must be run in the base directory of the IRIDA repository.\")\n+    exit(1)\n+\n+# check if the argument is the irida-documentation/docs directory\n+if not (result_dir.endswith('docs') or result_dir.endswith('docs/')) or not os.path.isdir(result_dir):\n+    print(\"The target directory doesn't appear to be the irida-docuemtation repository's `/docs` directory.\")\n+    exit(1)\n+\n+# first run mvn site to build the javadoc\n+print(\"========== Building documentation pages\")\n+retval = os.system('mvn clean site')\n+\n+# ensure it built correctly\n+if retval != 0:\n+    print(\"========== Docs construction failed.  See above for error messages\")\n+    exit(1)\n+\n+\n+print(\"========== Documentation built successfully\")\n+\n+# Give the user 5 seconds to chicken out\n+print(\"========== WARNING: this script will now replace the existing docs directory {} with the docs built above\".format(result_dir))\n+print(\"========== This process will contine in 5 seconds...\")", "originalCommit": "bc46ca0672bc097eff08e1f07f4e15f199de76e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzNjEyNw==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548536127", "bodyText": "Fixed in 6351ffb", "author": "tom114", "createdAt": "2020-12-24T13:51:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwNDIxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwNDc2MA==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548304760", "bodyText": "Provide the user with the command to exit out if they do not want to continue", "author": "deepsidhu85", "createdAt": "2020-12-23T22:42:24Z", "path": "build-docs.py", "diffHunk": "@@ -0,0 +1,72 @@\n+import os\n+import sys\n+import shutil\n+import time\n+\n+################################################################################\n+# This script is used to build documentation for IRIDA for deployment.  It will\n+# build the IRIDA javadoc and transfer all the documentation directories to an\n+# external documentation repository.  See below for usage.\n+################################################################################\n+\n+# If no args, print usage statement\n+if len(sys.argv) == 1:\n+    print(\"IRIDA documentation deployment script.\")\n+    print(\"Usage: build-docs.py TARGET_DIRECTORY\")\n+    print(\"TARGET_DIRECTORY should be the 'irida-documentation/docs' directory\")\n+    exit(0)\n+\n+pom_file = 'pom.xml'\n+result_dir = sys.argv[1]\n+doc_dir = 'doc/'\n+\n+# Check if we're in the irida directory\n+if not os.path.exists(pom_file):\n+    print(\"Cannot find pom file.  This script must be run in the base directory of the IRIDA repository.\")\n+    exit(1)\n+\n+if not os.path.isdir(doc_dir):\n+    print(\"Cannot find `/doc` directory.  This script must be run in the base directory of the IRIDA repository.\")\n+    exit(1)\n+\n+# check if the argument is the irida-documentation/docs directory\n+if not (result_dir.endswith('docs') or result_dir.endswith('docs/')) or not os.path.isdir(result_dir):\n+    print(\"The target directory doesn't appear to be the irida-docuemtation repository's `/docs` directory.\")\n+    exit(1)\n+\n+# first run mvn site to build the javadoc\n+print(\"========== Building documentation pages\")\n+retval = os.system('mvn clean site')\n+\n+# ensure it built correctly\n+if retval != 0:\n+    print(\"========== Docs construction failed.  See above for error messages\")\n+    exit(1)\n+\n+\n+print(\"========== Documentation built successfully\")\n+\n+# Give the user 5 seconds to chicken out\n+print(\"========== WARNING: this script will now replace the existing docs directory {} with the docs built above\".format(result_dir))\n+print(\"========== This process will contine in 5 seconds...\")", "originalCommit": "bc46ca0672bc097eff08e1f07f4e15f199de76e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzNjEyNQ==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548536125", "bodyText": "Fixed in 6351ffb", "author": "tom114", "createdAt": "2020-12-24T13:51:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwNDc2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwNTg3NA==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548305874", "bodyText": "Typo in checkout", "author": "deepsidhu85", "createdAt": "2020-12-23T22:46:01Z", "path": "doc/developer/getting-started/index.md", "diffHunk": "@@ -263,24 +263,44 @@ mvn clean package -DskipTests\n This will create the `.war` and `.zip` files for IRIDA release under the `target/` directory.\n \n #### Building IRIDA documentation\n+IRIDA documentation can be found in the <https://github.com/phac-nml/irida-docs> GitHub project.  IRIDA's documentation is built using [Jekyll][] and [GitHub Pages](https://pages.github.com/).  Jekyll allows us to write documentation in Markdown format and it will convert the pages to HTML.  We can use Jekyll both for viewing the documentation locally and for publishing to GitHub Pages.  The current documentation can be found at <https://phac-nml.github.io/irida-docs>.\n \n-IRIDA documentation can be found in the `doc/` directory in the IRIDA root directory.  IRIDA's documentation is built using [Jekyll][].  Jekyll allows us to write documentation in Markdown format and it will convert the pages to HTML for releasing to the web.  The documentation at [http://irida.corefacility.ca/documentation](http://irida.corefacility.ca/documentation) is all generated using this tool.\n+##### Testing IRIDA documentation locally\n+To view the documentation locally or make changes, you can checkou the above GitHub project and make changes.  To run the server locally you can run Jekyll to generate the pages.", "originalCommit": "bc46ca0672bc097eff08e1f07f4e15f199de76e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzNjExNQ==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548536115", "bodyText": "Fixed in 6351ffb", "author": "tom114", "createdAt": "2020-12-24T13:51:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwNTg3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwNjEzNQ==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548306135", "bodyText": "Change First you can to just First", "author": "deepsidhu85", "createdAt": "2020-12-23T22:46:54Z", "path": "doc/developer/getting-started/index.md", "diffHunk": "@@ -263,24 +263,44 @@ mvn clean package -DskipTests\n This will create the `.war` and `.zip` files for IRIDA release under the `target/` directory.\n \n #### Building IRIDA documentation\n+IRIDA documentation can be found in the <https://github.com/phac-nml/irida-docs> GitHub project.  IRIDA's documentation is built using [Jekyll][] and [GitHub Pages](https://pages.github.com/).  Jekyll allows us to write documentation in Markdown format and it will convert the pages to HTML.  We can use Jekyll both for viewing the documentation locally and for publishing to GitHub Pages.  The current documentation can be found at <https://phac-nml.github.io/irida-docs>.\n \n-IRIDA documentation can be found in the `doc/` directory in the IRIDA root directory.  IRIDA's documentation is built using [Jekyll][].  Jekyll allows us to write documentation in Markdown format and it will convert the pages to HTML for releasing to the web.  The documentation at [http://irida.corefacility.ca/documentation](http://irida.corefacility.ca/documentation) is all generated using this tool.\n+##### Testing IRIDA documentation locally\n+To view the documentation locally or make changes, you can checkou the above GitHub project and make changes.  To run the server locally you can run Jekyll to generate the pages.\n \n-To test any documentation changes, you can `cd` into the `doc/` directory and run the following command:\n+First you can `cd` into the `docs/` directory and run the following command:", "originalCommit": "bc46ca0672bc097eff08e1f07f4e15f199de76e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzNjEwMw==", "url": "https://github.com/phac-nml/irida/pull/894#discussion_r548536103", "bodyText": "Fixed in 6351ffb", "author": "tom114", "createdAt": "2020-12-24T13:51:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODMwNjEzNQ=="}], "type": "inlineReview"}, {"oid": "6351ffb32aa1e6fd5d164861e02e3beff9890559", "url": "https://github.com/phac-nml/irida/commit/6351ffb32aa1e6fd5d164861e02e3beff9890559", "message": "changed some typos", "committedDate": "2020-12-24T13:51:28Z", "type": "commit"}, {"oid": "4e102213c9821aecbff368ed7ea7bc4df18b8b26", "url": "https://github.com/phac-nml/irida/commit/4e102213c9821aecbff368ed7ea7bc4df18b8b26", "message": "Merge branch 'development' into externalize-docs", "committedDate": "2020-12-24T14:12:01Z", "type": "commit"}, {"oid": "f54e30355b226466b11c3c4aa562778178f0e85b", "url": "https://github.com/phac-nml/irida/commit/f54e30355b226466b11c3c4aa562778178f0e85b", "message": "small change to changelog (but really just to get tests to run again)", "committedDate": "2020-12-24T16:22:31Z", "type": "commit"}, {"oid": "5cc4ed84f6d6e98a5f450ea23198b0d082af835d", "url": "https://github.com/phac-nml/irida/commit/5cc4ed84f6d6e98a5f450ea23198b0d082af835d", "message": "added java libary install back since its needed to run mvn site", "committedDate": "2020-12-24T16:43:39Z", "type": "commit"}, {"oid": "ce98d65769d3c1db69ab5512c8b421a638acba85", "url": "https://github.com/phac-nml/irida/commit/ce98d65769d3c1db69ab5512c8b421a638acba85", "message": "fixed broken yaml formatting", "committedDate": "2020-12-24T18:30:23Z", "type": "commit"}, {"oid": "e4ce6911fe87aacbcf610c80ef414960f153f79b", "url": "https://github.com/phac-nml/irida/commit/e4ce6911fe87aacbcf610c80ef414960f153f79b", "message": "moved and fixed some links for broken images", "committedDate": "2020-12-24T20:09:41Z", "type": "commit"}, {"oid": "87e7a5d662e89857624968d30a210db108b4e300", "url": "https://github.com/phac-nml/irida/commit/87e7a5d662e89857624968d30a210db108b4e300", "message": "removed old fontawesome css that doesn't exist anymore", "committedDate": "2020-12-24T20:16:22Z", "type": "commit"}, {"oid": "d93f01ce14b2a101f70869c5c3ea6923f8f544ee", "url": "https://github.com/phac-nml/irida/commit/d93f01ce14b2a101f70869c5c3ea6923f8f544ee", "message": "Merge branch 'development' into externalize-docs", "committedDate": "2020-12-24T20:25:37Z", "type": "commit"}, {"oid": "db07230634524f71b6126ac35d07c335d66ee1d8", "url": "https://github.com/phac-nml/irida/commit/db07230634524f71b6126ac35d07c335d66ee1d8", "message": "Merge branch 'development' into externalize-docs", "committedDate": "2021-01-04T18:22:18Z", "type": "commit"}]}