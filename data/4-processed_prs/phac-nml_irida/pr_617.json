{"pr_number": 617, "pr_title": "Analysis/ move output file preview", "pr_createdAt": "2020-03-07T23:45:56Z", "pr_url": "https://github.com/phac-nml/irida/pull/617", "timeline": [{"oid": "cd2464d017f993c500a4cecb1f1876a325f608af", "url": "https://github.com/phac-nml/irida/commit/cd2464d017f993c500a4cecb1f1876a325f608af", "message": "Moved output files from biohansel and phylogenetic tree view and replaced with output files tab", "committedDate": "2020-03-07T23:30:47Z", "type": "commit"}, {"oid": "53b85a3c6bc44c6ad46863d9f207291a8fccec27", "url": "https://github.com/phac-nml/irida/commit/53b85a3c6bc44c6ad46863d9f207291a8fccec27", "message": "Merged branch and fixed merge conflict", "committedDate": "2020-03-07T23:41:41Z", "type": "commit"}, {"oid": "e2c3910778fa540f9c7bc5ba785efe22a690022d", "url": "https://github.com/phac-nml/irida/commit/e2c3910778fa540f9c7bc5ba785efe22a690022d", "message": "Merge branch 'analysis/_base_results' into analysis/_move-output-file-preview", "committedDate": "2020-03-09T15:08:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTkzNTk2Mw==", "url": "https://github.com/phac-nml/irida/pull/617#discussion_r389935963", "bodyText": "You needed the br element because you used a span (inline) element.  If you used a div (block) element the break would already be there.", "author": "joshsadam", "createdAt": "2020-03-09T20:15:16Z", "path": "src/main/webapp/resources/js/pages/analysis/components/AnalysisBioHansel.jsx", "diffHunk": "@@ -67,57 +57,88 @@ export default function AnalysisBioHansel() {\n     }\n   }\n \n-  return (\n-    <Layout>\n-      <Sider width={200} style={{ background: grey1 }}>\n-        <Location>\n-          {props => {\n-            const keyname = props.location.pathname.match(pathRegx);\n-            return (\n-              <Menu\n-                mode=\"vertical\"\n-                selectedKeys={[keyname ? keyname[1] : BIOHANSEL.INFO]}\n-              >\n-                <Menu.Item key=\"info\">\n-                  <Link to={`${DEFAULT_URL}/${BIOHANSEL.INFO}`}>\n-                    {i18n(\"AnalysisBioHansel.bioHanselInformation\")}\n-                  </Link>\n-                </Menu.Item>\n-                <Menu.Item key=\"file_preview\">\n-                  <Link to={`${DEFAULT_URL}/${BIOHANSEL.FILE_PREVIEW}`}>\n-                    {i18n(\"AnalysisOutputs.outputFilePreview\")}\n-                  </Link>\n-                </Menu.Item>\n-              </Menu>\n-            );\n-          }}\n-        </Location>\n-      </Sider>\n+  const biohanselResults = [\n+    {\n+      title: i18n(\"AnalysisBioHansel.sampleName\"),\n+      desc: bioHanselResults ? bioHanselResults.sample : \"\"\n+    },\n+    {\n+      title: `${i18n(\"AnalysisBioHansel.schemeName\")} (v${i18n(\n+        \"AnalysisBioHansel.schemeVersion\"\n+      )})`,\n+      desc: bioHanselResults\n+        ? `${bioHanselResults.scheme} (${bioHanselResults.scheme_version})`\n+        : \"\"\n+    },\n+    {\n+      title: i18n(\"AnalysisBioHansel.subtype\"),\n+      desc: bioHanselResults ? bioHanselResults.subtype : \"\"\n+    },\n+    {\n+      title: i18n(\"AnalysisBioHansel.averageTileFrequency\"),\n+      desc:\n+        bioHanselResults && bioHanselResults.avg_tile_coverage\n+          ? bioHanselResults.avg_tile_coverage.toString()\n+          : \"\"\n+    },\n+    {\n+      title: i18n(\"AnalysisBioHansel.qualityControlStatus\"),\n+      desc: bioHanselResults ? (\n+        bioHanselResults.qc_status === \"PASS\" ? (\n+          <Success\n+            message={bioHanselResults.qc_status}\n+          />\n+        ) : bioHanselResults.qc_status === \"FAIL\" ? (\n+          <Error\n+            message={formatQcMessage(\n+              bioHanselResults.qc_status,\n+              bioHanselResults.qc_message\n+            )}\n+          />\n+        ) : (\n+          <Warning\n+            message={formatQcMessage(\n+              bioHanselResults.qc_status,\n+              bioHanselResults.qc_message\n+            )}\n+          />\n+        )\n+      ) : (\n+        \"\"\n+      )\n+    }\n+  ];\n \n-      <Layout style={{ paddingLeft: SPACE_MD, backgroundColor: grey1 }}>\n-        <Content>\n-          {typeof bioHanselResults === \"undefined\" ? (\n-            <WarningAlert\n-              message={i18n(\"AnalysisBioHansel.resultsUnavailable\")}\n-            />\n-          ) : bioHanselResults !== null ? (\n-            <Suspense fallback={<ContentLoading />}>\n-              <Router>\n-                <BioHanselInfo\n-                  bioHanselResults={bioHanselResults}\n-                  path={`${DEFAULT_URL}/${BIOHANSEL.INFO}`}\n-                  default\n-                />\n-                <OutputFilePreview\n-                  path={`${DEFAULT_URL}/${BIOHANSEL.FILE_PREVIEW}`}\n-                />\n-              </Router>\n-            </Suspense>\n-          ) : (\n-            <ContentLoading />\n-          )}\n-        </Content>\n-      </Layout>\n+  /*\n+   * Formats the QC status and QC messages to display\n+   * in a list.\n+   */\n+  function formatQcMessage(qc_status, qc_message) {\n+    let msgs = [];\n+    if (qc_message) {\n+      msgs = qc_message.trim().split(\"|\");\n+    }\n+\n+    return (\n+      <>\n+        <span>{qc_status}</span>\n+        <br />", "originalCommit": "e2c3910778fa540f9c7bc5ba785efe22a690022d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}