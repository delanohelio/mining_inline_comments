{"pr_number": 739, "pr_title": "Remove gravatar", "pr_createdAt": "2020-06-24T12:39:43Z", "pr_url": "https://github.com/phac-nml/irida/pull/739", "timeline": [{"oid": "b830ea9708ae3213e77b15d53ca950806b3c78d8", "url": "https://github.com/phac-nml/irida/commit/b830ea9708ae3213e77b15d53ca950806b3c78d8", "message": ":heavy_minus_sign: Removed jgravatar dependency from pom.xml", "committedDate": "2020-06-24T11:24:34Z", "type": "commit"}, {"oid": "54b59ff4d7e34e89d1973103e02c6bdde311441b", "url": "https://github.com/phac-nml/irida/commit/54b59ff4d7e34e89d1973103e02c6bdde311441b", "message": ":construction: Removed gravatar from UI.", "committedDate": "2020-06-24T12:38:24Z", "type": "commit"}, {"oid": "11762d04640269926a127665aa9f5e145b920ab1", "url": "https://github.com/phac-nml/irida/commit/11762d04640269926a127665aa9f5e145b920ab1", "message": ":memo: Fixed the one image that directly references the icon.", "committedDate": "2020-06-24T12:47:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg3NTc0Mw==", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444875743", "bodyText": "Its ok that these are getting set as final, but I think your formatter is running amok again.", "author": "tom114", "createdAt": "2020-06-24T13:01:55Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/security/LoginSuccessHandler.java", "diffHunk": "@@ -1,35 +1,32 @@\n package ca.corefacility.bioinformatics.irida.ria.security;\n \n-import ca.corefacility.bioinformatics.irida.model.user.User;\n-import ca.corefacility.bioinformatics.irida.repositories.user.UserRepository;\n-import com.timgroup.jgravatar.Gravatar;\n-import com.timgroup.jgravatar.GravatarDefaultImage;\n-import com.timgroup.jgravatar.GravatarRating;\n+import java.io.IOException;\n+import java.util.Date;\n+import java.util.Locale;\n+\n+import javax.servlet.ServletException;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import javax.servlet.http.HttpSession;\n+\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n import org.springframework.security.core.Authentication;\n import org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler;\n import org.springframework.web.servlet.LocaleResolver;\n \n-import javax.servlet.ServletException;\n-import javax.servlet.http.HttpServletRequest;\n-import javax.servlet.http.HttpServletResponse;\n-import javax.servlet.http.HttpSession;\n-import java.io.IOException;\n-import java.util.Date;\n-import java.util.Locale;\n+import ca.corefacility.bioinformatics.irida.model.user.User;\n+import ca.corefacility.bioinformatics.irida.repositories.user.UserRepository;\n \n /**\n  * Handles actions for when a user is successfully logged in.\n  */\n public class LoginSuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {\n \tprivate static final Logger logger = LoggerFactory.getLogger(LoginSuccessHandler.class);\n \n-\tprivate static final String GRAVATAR_ATTRIBUTE = \"gravatar\";\n-\n-\tprivate UserRepository userRepository;\n+\tprivate final UserRepository userRepository;\n \n-\tprivate LocaleResolver localeResolver;\n+\tprivate final LocaleResolver localeResolver;", "originalCommit": "11762d04640269926a127665aa9f5e145b920ab1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg3ODYwNQ==", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444878605", "bodyText": "Wasn't the plan to use this library as a replacement? https://ant.design/components/avatar/", "author": "tom114", "createdAt": "2020-06-24T13:06:45Z", "path": "CHANGELOG.md", "diffHunk": "@@ -13,6 +14,7 @@ Changes\n * [UI]: Fixed bug when creating/modifying a metadata template the user could not search for a field. (20.05.1)\n * [UI]: Fixed bug where managers could not load Users listing page. (20.05.1)\n * [UI]: Added functionality for users to synchronize assembly data from remote APIs.\n+* [UI]: Removed gravatar and replaced with user icon.", "originalCommit": "11762d04640269926a127665aa9f5e145b920ab1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg5MjI3OQ==", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444892279", "bodyText": "It will be eventually, I just wanted to get gravatar out in a simple merge request. \u00a0I have another branch I am working on that is a full menu bar re-write, but it won't be ready for a little bit. \u00a0This is a baby step. \u00a0The full replacement bar should be done by the next release, but that will be big enough.", "author": "joshsadam", "createdAt": "2020-06-24T13:27:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg3ODYwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg4MTkyNA==", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444881924", "bodyText": "If the style is changing this drastically, pictures in the docs that focus on the user icon should be redone.  At first look I can find this one: https://irida.corefacility.ca/documentation/user/user/dashboard/#user-settings", "author": "tom114", "createdAt": "2020-06-24T13:11:54Z", "path": "doc/user/user/dashboard/index.md", "diffHunk": "@@ -124,7 +124,7 @@ You will be shown a confirmation and your browser will reload the current page.\n User Settings\n -------------\n \n-The settings menu allows you to view and edit the details of your own user account. This menu also allows you to update your email subscription preferences.  You can find the settings menu in the top, right-hand corner of the page, if you have a [Gravatar](https://en.gravatar.com/) account associated with your email in IRIDA, your gravatar will be displayed:\n+The settings menu allows you to view and edit the details of your own user account. This menu also allows you to update your email subscription preferences.  You can find the settings menu in the top, right-hand corner of the page under the user icon:", "originalCommit": "11762d04640269926a127665aa9f5e145b920ab1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg5MzgwNg==", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444893806", "bodyText": "Isn't the one you referenced this one that I already replaced? \u00a0As I stated in my previous reply, this is just a baby step to replacing the full menu bar, so all the images will have to be replaced at that time.", "author": "joshsadam", "createdAt": "2020-06-24T13:29:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg4MTkyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkwODMwMQ==", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444908301", "bodyText": "The only one I would definitely like changed is the image immediately below this comment.  Its directly focusing on the icon which now looks different.  Whatever icon we choose should be in this screenshot please.", "author": "tom114", "createdAt": "2020-06-24T13:50:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg4MTkyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkyMTMzMQ==", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444921331", "bodyText": "I think the correct image has been updated with the solid icon.", "author": "joshsadam", "createdAt": "2020-06-24T14:09:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDg4MTkyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkwNjQ3NQ==", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444906475", "bodyText": "Thoughts on using a circle style icon instead so the style stays a bit more familiar until we get the new topbar done?  If we used something like this we can get by without a whole bunch of docs changes.  https://fontawesome.com/icons/user-circle?style=solid", "author": "tom114", "createdAt": "2020-06-24T13:48:06Z", "path": "src/main/webapp/pages/template/main-navigation.html", "diffHunk": "@@ -212,15 +212,15 @@\n                         </ul>\n                     </li>\n                     <li class=\"dropdown\">\n-                        <a href=\"#\" class=\"dropdown-toggle nav-gravatar-wrapper\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\"\n+                        <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\"\n                            aria-expanded=\"false\">\n-                            <img class=\"nav-gravatar\" th:src=\"${session.gravatar}\" alt=\"User Icon\"/>\n+                            <i class=\"far fa-user nav-icon\"></i>", "originalCommit": "11762d04640269926a127665aa9f5e145b920ab1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkxNzMzMQ==", "url": "https://github.com/phac-nml/irida/pull/739#discussion_r444917331", "bodyText": "Updated icon in 70f5272", "author": "joshsadam", "createdAt": "2020-06-24T14:03:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDkwNjQ3NQ=="}], "type": "inlineReview"}, {"oid": "70f5272a1e2d1e50b3594b0ed453dd24905b7c4d", "url": "https://github.com/phac-nml/irida/commit/70f5272a1e2d1e50b3594b0ed453dd24905b7c4d", "message": ":construction: Updated to be a solid user", "committedDate": "2020-06-24T14:02:26Z", "type": "commit"}, {"oid": "aa43827bb4d7235fdaa4f1f82ec7ef5e54dd2d2e", "url": "https://github.com/phac-nml/irida/commit/aa43827bb4d7235fdaa4f1f82ec7ef5e54dd2d2e", "message": ":memo: Updated image for user accounts", "committedDate": "2020-06-24T14:07:04Z", "type": "commit"}, {"oid": "acfc8cf342ab49cbbeb25cba877aae93a7707f46", "url": "https://github.com/phac-nml/irida/commit/acfc8cf342ab49cbbeb25cba877aae93a7707f46", "message": ":memo: Updated images", "committedDate": "2020-06-24T14:24:43Z", "type": "commit"}, {"oid": "8d88bc8f51bb86656bb56703e1ab50b4258e21be", "url": "https://github.com/phac-nml/irida/commit/8d88bc8f51bb86656bb56703e1ab50b4258e21be", "message": "Merge branch 'development' into remove-gravatar\n\n# Conflicts:\n#\tCHANGELOG.md", "committedDate": "2020-06-24T18:29:03Z", "type": "commit"}]}