{"pr_number": 659, "pr_title": "Move project details to settings", "pr_createdAt": "2020-04-17T16:47:53Z", "pr_url": "https://github.com/phac-nml/irida/pull/659", "timeline": [{"oid": "46245c9d6834737d9f24132905aa3bc139638168", "url": "https://github.com/phac-nml/irida/commit/46245c9d6834737d9f24132905aa3bc139638168", "message": "\ud83d\udd28\ufe0f Moving details into the setting panel", "committedDate": "2020-04-16T17:16:31Z", "type": "commit"}, {"oid": "9725fbc372de3be6754572ca9a15884091852f12", "url": "https://github.com/phac-nml/irida/commit/9725fbc372de3be6754572ca9a15884091852f12", "message": "Merge branch 'development' into metadata-details-to-settings", "committedDate": "2020-04-16T17:32:40Z", "type": "commit"}, {"oid": "08ba2e53335eae093aece6e04b44f45e5e627eb4", "url": "https://github.com/phac-nml/irida/commit/08ba2e53335eae093aece6e04b44f45e5e627eb4", "message": "\u2728\ufe0f Moving project details into the settings tab", "committedDate": "2020-04-16T20:25:24Z", "type": "commit"}, {"oid": "56903e52c285a01495c17612cae55f17539a6f4e", "url": "https://github.com/phac-nml/irida/commit/56903e52c285a01495c17612cae55f17539a6f4e", "message": "\ud83d\udd28\ufe0f Work on updating UI and showing server response", "committedDate": "2020-04-17T10:27:39Z", "type": "commit"}, {"oid": "0d86ef355ecde98c8d0e740a9332a04da9880a85", "url": "https://github.com/phac-nml/irida/commit/0d86ef355ecde98c8d0e740a9332a04da9880a85", "message": "Merge branch 'development' into metadata-details-to-settings", "committedDate": "2020-04-17T12:59:06Z", "type": "commit"}, {"oid": "b5726a8e210589b61ba8711d9af6c366c1e049d7", "url": "https://github.com/phac-nml/irida/commit/b5726a8e210589b61ba8711d9af6c366c1e049d7", "message": "\ud83d\udd28\ufe0f Working organism select", "committedDate": "2020-04-17T16:46:32Z", "type": "commit"}, {"oid": "56e1f8a353d1086bbc83781314db2dee31a6feb1", "url": "https://github.com/phac-nml/irida/commit/56e1f8a353d1086bbc83781314db2dee31a6feb1", "message": "Merge branch 'development' into metadata-base", "committedDate": "2020-04-17T17:42:21Z", "type": "commit"}, {"oid": "2daa9eb3ab8cab1d8c3abbd97e6f0e91dd1a29b1", "url": "https://github.com/phac-nml/irida/commit/2daa9eb3ab8cab1d8c3abbd97e6f0e91dd1a29b1", "message": "Merge branch 'metadata-base' into metadata-details-to-settings", "committedDate": "2020-04-17T17:42:40Z", "type": "commit"}, {"oid": "8798d3bacdc3ee48d98e8518a2f26c790ecf4fc4", "url": "https://github.com/phac-nml/irida/commit/8798d3bacdc3ee48d98e8518a2f26c790ecf4fc4", "message": "\ud83d\udd28\ufe0f Focus on the select when editing an organism", "committedDate": "2020-04-17T18:16:35Z", "type": "commit"}, {"oid": "adb6d923a18019b3e6e01c01c207c58d5b6c8965", "url": "https://github.com/phac-nml/irida/commit/adb6d923a18019b3e6e01c01c207c58d5b6c8965", "message": "\ud83d\udd28\ufe0f Made code more generic for any ontology", "committedDate": "2020-04-17T19:11:50Z", "type": "commit"}, {"oid": "a398a73fc8197f5267e80cb7569f32809e0f13dd", "url": "https://github.com/phac-nml/irida/commit/a398a73fc8197f5267e80cb7569f32809e0f13dd", "message": "\ud83d\udca1\ufe0f Update JavaDoc", "committedDate": "2020-04-17T19:13:40Z", "type": "commit"}, {"oid": "11648e1a4f046cdc1ac3cf5de968b1898a3ec76e", "url": "https://github.com/phac-nml/irida/commit/11648e1a4f046cdc1ac3cf5de968b1898a3ec76e", "message": "\ud83d\udca1\ufe0f Updated JSDoc on ontology searching", "committedDate": "2020-04-20T09:48:41Z", "type": "commit"}, {"oid": "e0d54d98e1898cc664b465874df85311eb592d91", "url": "https://github.com/phac-nml/irida/commit/e0d54d98e1898cc664b465874df85311eb592d91", "message": "Merge branch 'development' into metadata-details-to-settings", "committedDate": "2020-04-20T09:49:06Z", "type": "commit"}, {"oid": "813ca37cb8dee887c16b02598fd68fad8c8adf58", "url": "https://github.com/phac-nml/irida/commit/813ca37cb8dee887c16b02598fd68fad8c8adf58", "message": "\ud83d\udd28\ufe0f Made the Editable Paragraph componet more generic", "committedDate": "2020-04-20T12:32:15Z", "type": "commit"}, {"oid": "0a8d0291c7a0786e903aecf8e26ccd221a3b8099", "url": "https://github.com/phac-nml/irida/commit/0a8d0291c7a0786e903aecf8e26ccd221a3b8099", "message": "\ud83d\udca1\ufe0f Added JavaDoc to TaxonomyEntry", "committedDate": "2020-04-20T12:38:36Z", "type": "commit"}, {"oid": "251a35964fc22763f4e3de71918a2022a7b276e6", "url": "https://github.com/phac-nml/irida/commit/251a35964fc22763f4e3de71918a2022a7b276e6", "message": "\ud83d\udca1\ufe0f Update Javadoc", "committedDate": "2020-04-20T12:46:27Z", "type": "commit"}, {"oid": "401ee74b2d4e12ac927dd03b26d63140b2dfd80c", "url": "https://github.com/phac-nml/irida/commit/401ee74b2d4e12ac927dd03b26d63140b2dfd80c", "message": "\ud83d\udca1\ufe0f Update Javadoc", "committedDate": "2020-04-20T12:49:34Z", "type": "commit"}, {"oid": "8db6ca7f26e89fadd87f8856fd5a48ce205dc31a", "url": "https://github.com/phac-nml/irida/commit/8db6ca7f26e89fadd87f8856fd5a48ce205dc31a", "message": "Merge remote-tracking branch 'origin/metadata-details-to-settings' into metadata-details-to-settings", "committedDate": "2020-04-20T12:49:57Z", "type": "commit"}, {"oid": "b44d6989f2f97892c606ab0b6e68a4b9fc0166f2", "url": "https://github.com/phac-nml/irida/commit/b44d6989f2f97892c606ab0b6e68a4b9fc0166f2", "message": "\ud83d\udca1\ufe0f Added JavaDoc to the UpdateProjectAttributeRequest", "committedDate": "2020-04-20T13:10:36Z", "type": "commit"}, {"oid": "aa0cf704c9f26c74f910999ba7c1ad8d95de255b", "url": "https://github.com/phac-nml/irida/commit/aa0cf704c9f26c74f910999ba7c1ad8d95de255b", "message": "\ud83d\udca1\ufe0f Update JSDoc on project api", "committedDate": "2020-04-20T13:29:54Z", "type": "commit"}, {"oid": "8d0f693d36b348365e56066ed9ffbf822a9a3707", "url": "https://github.com/phac-nml/irida/commit/8d0f693d36b348365e56066ed9ffbf822a9a3707", "message": "\ud83d\udd28\ufe0f Code cleanup and added more JSDoc", "committedDate": "2020-04-20T14:38:16Z", "type": "commit"}, {"oid": "8eff64b9fb9aaded05d60b09ee3ee23ab6240361", "url": "https://github.com/phac-nml/irida/commit/8eff64b9fb9aaded05d60b09ee3ee23ab6240361", "message": "\ud83d\udd28\ufe0f Code cleanup and JSDoc", "committedDate": "2020-04-20T14:45:30Z", "type": "commit"}, {"oid": "4317a6b88b01201d9445d645e50f13430cf2547e", "url": "https://github.com/phac-nml/irida/commit/4317a6b88b01201d9445d645e50f13430cf2547e", "message": "\ud83d\udd28\ufe0f Fixed default export issue", "committedDate": "2020-04-21T11:17:33Z", "type": "commit"}, {"oid": "fc7167d10445a8e4b1ebc649c2beecc1dc54e551", "url": "https://github.com/phac-nml/irida/commit/fc7167d10445a8e4b1ebc649c2beecc1dc54e551", "message": "\ud83d\udd28\ufe0f Removed old links and dead code", "committedDate": "2020-04-21T11:50:02Z", "type": "commit"}, {"oid": "dbe0eb3e46a96fc7cb0e84c44834b0d8e9969a58", "url": "https://github.com/phac-nml/irida/commit/dbe0eb3e46a96fc7cb0e84c44834b0d8e9969a58", "message": "\ud83d\udea8\ufe0f Added unit tests", "committedDate": "2020-04-21T12:35:17Z", "type": "commit"}, {"oid": "973386e980cfebcc6e77fab3379946719050466e", "url": "https://github.com/phac-nml/irida/commit/973386e980cfebcc6e77fab3379946719050466e", "message": "\ud83d\udd28\ufe0f Made it so project members cannot update details", "committedDate": "2020-04-21T16:28:43Z", "type": "commit"}, {"oid": "b208298750ad0775816a6fbb4e22e6d2e906f3cc", "url": "https://github.com/phac-nml/irida/commit/b208298750ad0775816a6fbb4e22e6d2e906f3cc", "message": "\ud83d\udd28\ufe0f Removed unused imports and annotated for who can update details", "committedDate": "2020-04-21T16:39:08Z", "type": "commit"}, {"oid": "a0b8cb75ef88893a5039fd43d5de8f6f2ec6c206", "url": "https://github.com/phac-nml/irida/commit/a0b8cb75ef88893a5039fd43d5de8f6f2ec6c206", "message": "\ud83d\udea8\ufe0f Fixed path expected on redirect", "committedDate": "2020-04-21T19:35:36Z", "type": "commit"}, {"oid": "532445feb203c162df26bb996ce771640d8566b2", "url": "https://github.com/phac-nml/irida/commit/532445feb203c162df26bb996ce771640d8566b2", "message": "\ud83d\udea8\ufe0f Test code fixes for new details pate.", "committedDate": "2020-04-22T16:15:21Z", "type": "commit"}, {"oid": "8bab51c6e1c88e922e70bd4d0ee1e75cafc66b17", "url": "https://github.com/phac-nml/irida/commit/8bab51c6e1c88e922e70bd4d0ee1e75cafc66b17", "message": "\ud83d\udd28\ufe0f Cleaned up layouts", "committedDate": "2020-04-22T16:37:28Z", "type": "commit"}, {"oid": "34b3f6a3df14468159e765728a3d2f55d99b2ec3", "url": "https://github.com/phac-nml/irida/commit/34b3f6a3df14468159e765728a3d2f55d99b2ec3", "message": "\ud83d\udea8\ufe0f Fixed broken tests", "committedDate": "2020-04-23T09:58:30Z", "type": "commit"}, {"oid": "aaa012bb79522f11fb16003a236f07f74d458ec8", "url": "https://github.com/phac-nml/irida/commit/aaa012bb79522f11fb16003a236f07f74d458ec8", "message": "\ud83d\udd28\ufe0f Template was missing variable", "committedDate": "2020-04-24T11:36:15Z", "type": "commit"}, {"oid": "b167248ce1a0a21aef993908a8714fd12f4cbcd4", "url": "https://github.com/phac-nml/irida/commit/b167248ce1a0a21aef993908a8714fd12f4cbcd4", "message": "\u2714\ufe0f Fixed broken test due to missing page attribute", "committedDate": "2020-04-24T13:30:20Z", "type": "commit"}, {"oid": "07c0f3de3e53a39d0dd730316b92816c11c24abd", "url": "https://github.com/phac-nml/irida/commit/07c0f3de3e53a39d0dd730316b92816c11c24abd", "message": "Updated CHANGELOG", "committedDate": "2020-04-24T14:36:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3NTcxOA==", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r414775718", "bodyText": "We should probably move this into a context What do you think?", "author": "deepsidhu85", "createdAt": "2020-04-24T18:23:31Z", "path": "src/main/webapp/resources/js/pages/projects/details/ProjectDetails.jsx", "diffHunk": "@@ -0,0 +1,142 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import {\n+  getProjectDetails,\n+  updateProjectAttribute,\n+} from \"../../../apis/projects/projects\";\n+import { notification, Typography } from \"antd\";\n+import { BasicList } from \"../../../components/lists\";\n+import { formatInternationalizedDateTime } from \"../../../utilities/date-utilities\";\n+import { EditableParagraph } from \"../../../components/ant.design\";\n+import { OntologySelect } from \"../../../components/ontology\";\n+import { TAXONOMY } from \"../../../apis/ontology/taxonomy\";\n+\n+const { Paragraph, Title } = Typography;\n+\n+/**\n+ * Reducer for the state of the project details.", "originalCommit": "07c0f3de3e53a39d0dd730316b92816c11c24abd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTcwNjQzMA==", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r415706430", "bodyText": "Context really only helps if you are doing a lot of props drilling (passing props down through a lot of components), it won't help in this situation.  Eventually we might need it if you move all code encapsulating a project into a \"single page react app\" but we can reconsider that when we get there.", "author": "joshsadam", "createdAt": "2020-04-27T10:45:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3NTcxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTgzNTAxNQ==", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r415835015", "bodyText": "Sounds good. Thanks!", "author": "deepsidhu85", "createdAt": "2020-04-27T13:57:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3NTcxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODY2MA==", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r414848660", "bodyText": "Probably add a check to make sure a value was actually changed and only make a server call if there was a change detected", "author": "deepsidhu85", "createdAt": "2020-04-24T20:38:01Z", "path": "src/main/webapp/resources/js/pages/projects/details/ProjectDetails.jsx", "diffHunk": "@@ -0,0 +1,142 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import {\n+  getProjectDetails,\n+  updateProjectAttribute,\n+} from \"../../../apis/projects/projects\";\n+import { notification, Typography } from \"antd\";\n+import { BasicList } from \"../../../components/lists\";\n+import { formatInternationalizedDateTime } from \"../../../utilities/date-utilities\";\n+import { EditableParagraph } from \"../../../components/ant.design\";\n+import { OntologySelect } from \"../../../components/ontology\";\n+import { TAXONOMY } from \"../../../apis/ontology/taxonomy\";\n+\n+const { Paragraph, Title } = Typography;\n+\n+/**\n+ * Reducer for the state of the project details.\n+ *\n+ * @param {object} state - current state of the project details\n+ * @param {object} action - include type and payload\n+ * @returns {object}\n+ */\n+function reducer(state, action) {\n+  switch (action.type) {\n+    case \"LOADED\":\n+      return { ...state, ...action.payload, loading: false };\n+    case \"UPDATE\":\n+      return { ...state, ...action.payload };\n+    default:\n+      return { ...state };\n+  }\n+}\n+\n+/**\n+ * React component for render the basic information about a project.\n+ * @returns {*}\n+ * @constructor\n+ */\n+export function ProjectDetails() {\n+  const [state, dispatch] = useReducer(reducer, { loading: true });\n+\n+  /*\n+  When this component is rendered, query the api for the specific details\n+  about this project.\n+   */\n+  useEffect(() => {\n+    getProjectDetails(window.project.id).then((data) =>\n+      dispatch({ type: \"LOADED\", payload: data })\n+    );\n+  }, []);\n+\n+  /**\n+   * When a field is updated, submitted it to the server to be saved.\n+   * Display a notification on the result of the update, and then update the\n+   * UI accordingly.\n+   *\n+   * @param {string} field to be updated\n+   * @param {string} value to be store in the field\n+   */\n+  const updateField = (field, value) => {", "originalCommit": "07c0f3de3e53a39d0dd730316b92816c11c24abd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTcwNTQ0OQ==", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r415705449", "bodyText": "Updated in c6f2992, also added a check to ensure that the project label met the requirements for length.", "author": "joshsadam", "createdAt": "2020-04-27T10:43:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODY2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MjQyMw==", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r414852423", "bodyText": "Internationalize the text", "author": "deepsidhu85", "createdAt": "2020-04-24T20:45:14Z", "path": "src/main/webapp/pages/projects/settings/pages/details.html", "diffHunk": "@@ -0,0 +1,21 @@\n+<!DOCTYPE html>\n+<html\n+  lang=\"en\"\n+  xmlns:th=\"http://www.thymeleaf.org\"\n+  xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n+  data-layout-decorate=\"~{projects/settings/_base}\"\n+>\n+  <head>\n+    <meta charset=\"UTF-8\" />\n+    <title>Title</title>\n+    <link rel=\"stylesheet\" href=\"/dist/css/project-details.bundle.css\">\n+  </head>\n+  <body>\n+    <div id=\"details-root\" layout:fragment=\"settings-content\" >\n+      <div>LOADING ...</div>", "originalCommit": "07c0f3de3e53a39d0dd730316b92816c11c24abd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTcwNTYwOQ==", "url": "https://github.com/phac-nml/irida/pull/659#discussion_r415705609", "bodyText": "Updated in dea2b04", "author": "joshsadam", "createdAt": "2020-04-27T10:43:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1MjQyMw=="}], "type": "inlineReview"}, {"oid": "c6f2992620113f18985e05705da2089dbff7745a", "url": "https://github.com/phac-nml/irida/commit/c6f2992620113f18985e05705da2089dbff7745a", "message": "\ud83d\udd28\ufe0f Make sure the value has changed and check for errors", "committedDate": "2020-04-27T10:40:07Z", "type": "commit"}, {"oid": "dea2b0460f709bf2d12e16db08482f38c7a98642", "url": "https://github.com/phac-nml/irida/commit/dea2b0460f709bf2d12e16db08482f38c7a98642", "message": "\ud83d\udc7d\ufe0f Updated internationalization", "committedDate": "2020-04-27T10:43:01Z", "type": "commit"}, {"oid": "9ace8ffc73ddae007ae4452ad086dc6e0ac87648", "url": "https://github.com/phac-nml/irida/commit/9ace8ffc73ddae007ae4452ad086dc6e0ac87648", "message": "Fixed page title", "committedDate": "2020-04-27T15:31:31Z", "type": "commit"}]}