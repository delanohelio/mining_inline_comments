{"pr_number": 570, "pr_title": "Clients ant design table to replace Datatables", "pr_createdAt": "2020-01-17T15:42:57Z", "pr_url": "https://github.com/phac-nml/irida/pull/570", "timeline": [{"oid": "d88bd4bdc1cbd7ba12552fde128a5380cf003141", "url": "https://github.com/phac-nml/irida/commit/d88bd4bdc1cbd7ba12552fde128a5380cf003141", "message": "Working table and external search", "committedDate": "2020-01-16T21:06:53Z", "type": "commit"}, {"oid": "ffbdab11bd4f2c2562465afbc0d8b1a0da980686", "url": "https://github.com/phac-nml/irida/commit/ffbdab11bd4f2c2562465afbc0d8b1a0da980686", "message": "Working table and tests", "committedDate": "2020-01-17T15:37:16Z", "type": "commit"}, {"oid": "7278a3e3c662e865a3f51fad607a9b47f3aaa62d", "url": "https://github.com/phac-nml/irida/commit/7278a3e3c662e865a3f51fad607a9b47f3aaa62d", "message": "Removed commented out code", "committedDate": "2020-01-17T16:50:40Z", "type": "commit"}, {"oid": "7161af9f974ddf304b41f84acde15fccb68ab687", "url": "https://github.com/phac-nml/irida/commit/7161af9f974ddf304b41f84acde15fccb68ab687", "message": "Added comment about where the base code can be found.", "committedDate": "2020-01-17T17:11:01Z", "type": "commit"}, {"oid": "cb4a33986595fddab50d64e26db0498da479251e", "url": "https://github.com/phac-nml/irida/commit/cb4a33986595fddab50d64e26db0498da479251e", "message": "Seperated code into cleaned up modules.", "committedDate": "2020-01-17T17:11:15Z", "type": "commit"}, {"oid": "354a0d40d1e1985a010de441b77acc1ae3b7b548", "url": "https://github.com/phac-nml/irida/commit/354a0d40d1e1985a010de441b77acc1ae3b7b548", "message": "Updated comments.  Cleaned up buttons style", "committedDate": "2020-01-17T17:27:07Z", "type": "commit"}, {"oid": "359e25c26fabf860f7801b7a83ae2bc7b272a79d", "url": "https://github.com/phac-nml/irida/commit/359e25c26fabf860f7801b7a83ae2bc7b272a79d", "message": "Add missing method comment.", "committedDate": "2020-01-17T17:33:51Z", "type": "commit"}, {"oid": "e1c19a43a4bb068e53424b0c8e55c98d0403bed9", "url": "https://github.com/phac-nml/irida/commit/e1c19a43a4bb068e53424b0c8e55c98d0403bed9", "message": "Updated JavaDoc", "committedDate": "2020-01-17T18:24:40Z", "type": "commit"}, {"oid": "c588890c50c1661b3f0d7933001671dc52203745", "url": "https://github.com/phac-nml/irida/commit/c588890c50c1661b3f0d7933001671dc52203745", "message": "Fixed JavaDoc error", "committedDate": "2020-01-17T19:51:16Z", "type": "commit"}, {"oid": "3367816e57069af4bbdb8fd648cc1dda2a9a74fa", "url": "https://github.com/phac-nml/irida/commit/3367816e57069af4bbdb8fd648cc1dda2a9a74fa", "message": "Updated CHANGELOG.md", "committedDate": "2020-01-20T14:47:09Z", "type": "commit"}, {"oid": "97b344c98c2c6c30a8961d8acb4609907411ef4b", "url": "https://github.com/phac-nml/irida/commit/97b344c98c2c6c30a8961d8acb4609907411ef4b", "message": "Updated documentation images.", "committedDate": "2020-01-20T15:06:05Z", "type": "commit"}, {"oid": "2703a72ac60f401ad3122df4900b8f43eed8f485", "url": "https://github.com/phac-nml/irida/commit/2703a72ac60f401ad3122df4900b8f43eed8f485", "message": "Removed commented out code.", "committedDate": "2020-01-20T20:33:22Z", "type": "commit"}, {"oid": "186c9277c5c256f07f67f65f199d5923e405cdb0", "url": "https://github.com/phac-nml/irida/commit/186c9277c5c256f07f67f65f199d5923e405cdb0", "message": "Updated revoke token button to match other table buttons", "committedDate": "2020-01-21T16:06:23Z", "type": "commit"}, {"oid": "2efcf5496ba2c1e0e5b1e91ffd029a72b18393b1", "url": "https://github.com/phac-nml/irida/commit/2efcf5496ba2c1e0e5b1e91ffd029a72b18393b1", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tsrc/main/webapp/yarn.lock", "committedDate": "2020-01-23T19:41:09Z", "type": "commit"}, {"oid": "f0a6714fb491c972bc720ab97c9090f3e5386350", "url": "https://github.com/phac-nml/irida/commit/f0a6714fb491c972bc720ab97c9090f3e5386350", "message": "Cleaned up icon to match table.", "committedDate": "2020-01-23T19:51:37Z", "type": "commit"}, {"oid": "d5c2d300cb086768a8af3f722c81d7e380e7f611", "url": "https://github.com/phac-nml/irida/commit/d5c2d300cb086768a8af3f722c81d7e380e7f611", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tsrc/main/webapp/yarn.lock", "committedDate": "2020-01-24T14:17:49Z", "type": "commit"}, {"oid": "e890c54699bb2c892d8354f43a368125719099fb", "url": "https://github.com/phac-nml/irida/commit/e890c54699bb2c892d8354f43a368125719099fb", "message": "Updated revoke icon.", "committedDate": "2020-01-24T14:28:37Z", "type": "commit"}, {"oid": "394324401331dbb504ee75a2824cab0d1abc6b57", "url": "https://github.com/phac-nml/irida/commit/394324401331dbb504ee75a2824cab0d1abc6b57", "message": "Merge branch 'development' into clients-ant-design", "committedDate": "2020-01-27T20:52:09Z", "type": "commit"}, {"oid": "a1da18e9e77d64e5bf3487613c26e82db6ec5175", "url": "https://github.com/phac-nml/irida/commit/a1da18e9e77d64e5bf3487613c26e82db6ec5175", "message": "Updated revoke icon", "committedDate": "2020-01-28T15:45:24Z", "type": "commit"}, {"oid": "cdfebe96c839f4093d436832a02c5f50cb8c964a", "url": "https://github.com/phac-nml/irida/commit/cdfebe96c839f4093d436832a02c5f50cb8c964a", "message": "Added debounce to prevent flickering during search.", "committedDate": "2020-01-28T15:47:30Z", "type": "commit"}, {"oid": "5d350dc119f990f93985a3b42f41c64812d42c4b", "url": "https://github.com/phac-nml/irida/commit/5d350dc119f990f93985a3b42f41c64812d42c4b", "message": "Merge branch 'development' into clients-ant-design", "committedDate": "2020-01-29T19:02:46Z", "type": "commit"}, {"oid": "504678358f933d2246db7f209738caad3010ca86", "url": "https://github.com/phac-nml/irida/commit/504678358f933d2246db7f209738caad3010ca86", "message": "Updated CHANGELOG.md", "committedDate": "2020-01-29T19:05:13Z", "type": "commit"}, {"oid": "870453e8296486686d2ef17c73cf48f31054125f", "url": "https://github.com/phac-nml/irida/commit/870453e8296486686d2ef17c73cf48f31054125f", "message": "Updated CHANGELOG.md", "committedDate": "2020-01-29T19:15:33Z", "type": "commit"}, {"oid": "8b9272694cb66b8655a0a4892dc98150c984a601", "url": "https://github.com/phac-nml/irida/commit/8b9272694cb66b8655a0a4892dc98150c984a601", "message": "Merge branch 'development' into clients-ant-design", "committedDate": "2020-01-31T15:42:08Z", "type": "commit"}, {"oid": "1e1f2aee4ef926d6953b7988e1c8e7ce19c97bf7", "url": "https://github.com/phac-nml/irida/commit/1e1f2aee4ef926d6953b7988e1c8e7ce19c97bf7", "message": "Updated CHANGELOG.md to reflect next release cycle.", "committedDate": "2020-01-31T15:43:41Z", "type": "commit"}, {"oid": "abfb6ee0e078cbaa7b8ab2c8b7d0c3c87fbff7e1", "url": "https://github.com/phac-nml/irida/commit/abfb6ee0e078cbaa7b8ab2c8b7d0c3c87fbff7e1", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tCHANGELOG.md", "committedDate": "2020-02-03T14:13:37Z", "type": "commit"}, {"oid": "ce622722d000a4b89e8da9d41db3e912ec2b2bd8", "url": "https://github.com/phac-nml/irida/commit/ce622722d000a4b89e8da9d41db3e912ec2b2bd8", "message": "Updated to use reducer and add pagedConfig.", "committedDate": "2020-02-03T16:00:21Z", "type": "commit"}, {"oid": "a946351b2af5c9d1961d2c5c5bcb26fda0a3d12a", "url": "https://github.com/phac-nml/irida/commit/a946351b2af5c9d1961d2c5c5bcb26fda0a3d12a", "message": "Applying PagedTable to AnalysesTable.jsx", "committedDate": "2020-02-03T17:49:34Z", "type": "commit"}, {"oid": "e408287c7b591c08621dbc03fbc9dcb10a1f3286", "url": "https://github.com/phac-nml/irida/commit/e408287c7b591c08621dbc03fbc9dcb10a1f3286", "message": "Updated sequencing runs to use new PagedTable.jsx", "committedDate": "2020-02-03T17:58:02Z", "type": "commit"}, {"oid": "eed3605c60eea4f3ccce840823b1c34cadd58522", "url": "https://github.com/phac-nml/irida/commit/eed3605c60eea4f3ccce840823b1c34cadd58522", "message": "Cleaned up icon for AnalysisState.jsx", "committedDate": "2020-02-04T14:07:28Z", "type": "commit"}, {"oid": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f", "url": "https://github.com/phac-nml/irida/commit/aeed3555893e930dc26a1fbc33be10f0f59b6f4f", "message": "Cleaned up imports for PagedTable", "committedDate": "2020-02-04T14:19:39Z", "type": "commit"}, {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6", "url": "https://github.com/phac-nml/irida/commit/55f986e166b087636001c75989a6934bc5e2e2d6", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tCHANGELOG.md", "committedDate": "2020-02-10T20:18:11Z", "type": "commit"}, {"oid": "55f986e166b087636001c75989a6934bc5e2e2d6", "url": "https://github.com/phac-nml/irida/commit/55f986e166b087636001c75989a6934bc5e2e2d6", "message": "Merge branch 'development' into clients-ant-design\n\n# Conflicts:\n#\tCHANGELOG.md", "committedDate": "2020-02-10T20:18:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2Njk0Ng==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377266946", "bodyText": "This method is nearly a carbon copy to the method above.  Can this be refactored?", "author": "tom114", "createdAt": "2020-02-10T19:24:05Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/clients/ClientsController.java", "diffHunk": "@@ -148,6 +150,16 @@ public String revokeTokens(@RequestParam Long id) {\n \t\treturn \"redirect:/clients/\" + id;\n \t}\n \n+\t/**\n+\t * Revoke access tokens for a specific client.\n+\t * @param id - identifier for a client\n+\t */\n+\t@RequestMapping(value = \"/ajax/revoke\", method = RequestMethod.PUT)\n+\tpublic void revokeClientTokens(@RequestParam Long id) {", "originalCommit": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkyNjk4OA==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378926988", "bodyText": "So it could, but it would only be creating another function that does the revoking that both call since I do not want the redirect in the new function.  I don't think that is worth it.", "author": "joshsadam", "createdAt": "2020-02-13T15:20:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2Njk0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ5MzYzNQ==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379493635", "bodyText": "I just don't like these 2 methods with pretty much the same name doing pretty much the same thing.  I see the comments, but revokeClientTokens and revokeTokens is a bit too much.\nCan you at least rename the other one to something like revokeTokensAndRedirect so it's more clear why we have the same thing side-by-side?\nAlso, a PUT is bad HTTP grammer here.  It should likely be DELETE.", "author": "tom114", "createdAt": "2020-02-14T15:31:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2Njk0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTUzMDI1MQ==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379530251", "bodyText": "Updated in 401c7b7", "author": "joshsadam", "createdAt": "2020-02-14T16:38:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI2Njk0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3MzY1OA==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377273658", "bodyText": "Thanks for this", "author": "tom114", "createdAt": "2020-02-10T19:37:28Z", "path": "src/main/webapp/pages/clients/list.html", "diffHunk": "@@ -1,40 +1,19 @@\n <!DOCTYPE html>\n-<html xmlns:th=\"http://www.thymeleaf.org\"\n-      xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n-      data-layout-decorate=\"~{template/page}\">\n-<head>\n+<html\n+  xmlns:th=\"http://www.thymeleaf.org\"\n+  xmlns:layout=\"http://www.ultraq.net.nz/thymeleaf/layout\"\n+  data-layout-decorate=\"~{template/page}\"\n+>\n+  <head>\n     <title th:text=\"#{clients.title}\">_Clients_</title>\n-    <link rel=\"stylesheet\" th:href=\"@{/dist/css/clients-list.bundle.css}\">\n-</head>\n-<body>\n-<th:block layout:fragment=\"page\">\n-    <div class=\"col-md-12\">\n-        <main role=\"main\" property=\"mainContentOfPage\">\n-            <h1 th:text=\"#{clients.title}\">_Clients_</h1>\n-            <a id=\"add-link\" href=\"/clients/create\" th:href=\"@{/clients/create}\" th:text=\"#{clients.add}\"\n-               class=\"btn btn-sm btn-default hidden\">_Add\n-                Client_</a>\n-            <table id=\"clientsTable\" class=\"table table-striped table-hover\"\n-                   data:clients=\"@{/clients/}\"\n-                   data:url=\"@{/clients/ajax/list}\">\n-                <thead>\n-                <tr th:inline=\"text\">\n-                    <th data-data=\"id\" width=\"20\" id=\"id-header\">[[#{iridaThing.id}]]</th>\n-                    <th data-data=\"clientId\" width=\"160\" id=\"clientid-header\">[[#{client.clientid}]]</th>\n-                    <th data-data=\"grants\" data-orderable=\"false\" id=\"grants-header\">[[#{client.grant-types}]]</th>\n-                    <th data-data=\"createdDate\" id=\"created-header\">[[#{iridaThing.timestamp}]]</th>\n-                    <th data-data=\"tokens\" id=\"tokens-header\" data-orderable=\"false\">\n-                        [[#{client.details.token.active}]]\n-                    </th>\n-                </tr>\n-                </thead>\n-                <tbody id=\"client-table-body\"></tbody>\n-            </table>\n-        </main>\n+    <link rel=\"stylesheet\" th:href=\"@{/dist/css/clients-list.bundle.css}\" />\n+  </head>\n+  <body>\n+    <div layout:fragment=\"page\" id=\"client-root\" style=\"height: 100%;\">\n+      <!-- Base react component found at : /webapp/resources/js/pages/clients/listing/ClientListingPage.jsx -->", "originalCommit": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkyNzE2MQ==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378927161", "bodyText": "You're welcome, I will try to add these in the future.", "author": "joshsadam", "createdAt": "2020-02-13T15:20:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3MzY1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3NDAzNA==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377274034", "bodyText": "This doesn't need a new tab opened.", "author": "tom114", "createdAt": "2020-02-10T19:38:18Z", "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "diffHunk": "@@ -0,0 +1,104 @@\n+import React, { useContext } from \"react\";\n+import {\n+  PagedTable,\n+  PagedTableContext\n+} from \"../../../components/ant.design/PagedTable\";\n+import { Button, Popconfirm, Tag } from \"antd\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { dateColumnFormat } from \"../../../components/ant.design/table-renderers\";\n+import { revokeClientTokens } from \"../../../apis/clients/clients\";\n+import { StopOutlined } from \"@ant-design/icons\";\n+\n+/**\n+ * Table for displaying a list of clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+export function ClientsTable() {\n+  const { updateTable } = useContext(PagedTableContext);\n+\n+  const columns = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      width: 80,\n+      dataIndex: \"id\",\n+      sorter: true\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      dataIndex: \"name\",\n+      ellipsis: true,\n+      sorter: true,\n+      render(text, item) {\n+        return (\n+          <a\n+            className=\"t-client-name\"\n+            target=\"_blank\"", "originalCommit": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkzMjc4MQ==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378932781", "bodyText": "Updated in 2f13204", "author": "joshsadam", "createdAt": "2020-02-13T15:28:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI3NDAzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI4OTgyNg==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377289826", "bodyText": "Should this be here?  Could be that something doesn't have a createdDate or should default to a different sort.  Maybe this should be set by the page.  That will make it more general.", "author": "tom114", "createdAt": "2020-02-10T20:10:26Z", "path": "src/main/webapp/resources/js/components/ant.design/PagedTable/PagedTableContext.js", "diffHunk": "@@ -0,0 +1,158 @@\n+import React, { useEffect, useReducer } from \"react\";\n+import { fetchPageTableUpdate } from \"../../../apis/paged-table/paged-table\";\n+import debounce from \"lodash/debounce\";\n+\n+let PagedTableContext;\n+const { Provider, Consumer } = (PagedTableContext = React.createContext());\n+\n+const initialState = {\n+  dataSource: undefined,\n+  loading: true,\n+  search: \"\",\n+  current: 1,\n+  pageSize: 10,\n+  order: \"descend\",\n+  column: \"createdDate\",", "originalCommit": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA2NDgyOA==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379064828", "bodyText": "Updated in 09b40ea.  They default to created date but can be set to whatever the table needs.", "author": "joshsadam", "createdAt": "2020-02-13T19:15:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI4OTgyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI5MDYzMA==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r377290630", "bodyText": "refresh_token will also be a common one.", "author": "tom114", "createdAt": "2020-02-10T20:12:07Z", "path": "src/main/webapp/resources/js/pages/clients/listing/ClientsTables.jsx", "diffHunk": "@@ -0,0 +1,104 @@\n+import React, { useContext } from \"react\";\n+import {\n+  PagedTable,\n+  PagedTableContext\n+} from \"../../../components/ant.design/PagedTable\";\n+import { Button, Popconfirm, Tag } from \"antd\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { dateColumnFormat } from \"../../../components/ant.design/table-renderers\";\n+import { revokeClientTokens } from \"../../../apis/clients/clients\";\n+import { StopOutlined } from \"@ant-design/icons\";\n+\n+/**\n+ * Table for displaying a list of clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+export function ClientsTable() {\n+  const { updateTable } = useContext(PagedTableContext);\n+\n+  const columns = [\n+    {\n+      title: i18n(\"iridaThing.id\"),\n+      width: 80,\n+      dataIndex: \"id\",\n+      sorter: true\n+    },\n+    {\n+      title: i18n(\"client.clientid\"),\n+      dataIndex: \"name\",\n+      ellipsis: true,\n+      sorter: true,\n+      render(text, item) {\n+        return (\n+          <a\n+            className=\"t-client-name\"\n+            target=\"_blank\"\n+            rel=\"noreferrer noopener\"\n+            href={setBaseUrl(`clients/${item.id}`)}\n+          >\n+            {text}\n+          </a>\n+        );\n+      }\n+    },\n+    {\n+      title: i18n(\"client.grant-types\"),\n+      dataIndex: \"grants\",\n+      render(grants) {\n+        const colors = { password: \"purple\", authorization_code: \"volcano\" };", "originalCommit": "aeed3555893e930dc26a1fbc33be10f0f59b6f4f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA2NTg1MA==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379065850", "bodyText": "Updated in a2a61d0", "author": "joshsadam", "createdAt": "2020-02-13T19:17:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI5MDYzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTc0NQ==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378441745", "bodyText": "Should we make this a generic class instead of having the ? extends TableModel here?  That way when we're using this anywhere in java code we can know what the TableModel class is.  That might make it easier for testing too.  Come chat with me if you want more on this.", "author": "tom114", "createdAt": "2020-02-12T18:45:01Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/models/tables/TableResponse.java", "diffHunk": "@@ -1,20 +1,20 @@\n-package ca.corefacility.bioinformatics.irida.ria.web.models;\n+package ca.corefacility.bioinformatics.irida.ria.web.models.tables;\n \n import java.util.List;\n \n /**\n  * Response sent when items are requested for a table.\n  */\n public class TableResponse {\n-\tprivate List<TableModel> dataSource;\n+\tprivate List<? extends TableModel> dataSource;\n \tprivate Long total;\n \n-\tpublic TableResponse(List<TableModel> dataSource, Long total) {\n+\tpublic TableResponse(List<? extends TableModel> dataSource, Long total) {", "originalCommit": "55f986e166b087636001c75989a6934bc5e2e2d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTA4MjY0Ng==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379082646", "bodyText": "I think I got this figured out.  Please see 0b3345b and let me know.", "author": "joshsadam", "createdAt": "2020-02-13T19:49:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTc0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTk0Nw==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378441947", "bodyText": "Do we still want this icons v4 in here since the rest of the ant v4 stuff is on hold?", "author": "tom114", "createdAt": "2020-02-12T18:45:27Z", "path": "src/main/webapp/package.json", "diffHunk": "@@ -21,6 +21,7 @@\n     \"last 2 Opera versions\"\n   ],\n   \"dependencies\": {\n+    \"@ant-design/icons\": \"^4.0.0-rc.0\",", "originalCommit": "55f986e166b087636001c75989a6934bc5e2e2d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwMDQ0Nw==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378500447", "bodyText": "Yes, this is actually the v4 icon pack", "author": "joshsadam", "createdAt": "2020-02-12T20:41:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MTk0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjMzNQ==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378442335", "bodyText": "Is this URL going to work in a context path?", "author": "tom114", "createdAt": "2020-02-12T18:46:09Z", "path": "src/main/webapp/resources/js/apis/clients/clients.js", "diffHunk": "@@ -0,0 +1,10 @@\n+import axios from \"axios\";\n+\n+/**\n+ * Revoke all tokens for a given client by identifier.\n+ * @param {number} id for the client\n+ * @return {Promise<AxiosResponse<T>>}\n+ */\n+export async function revokeClientTokens(id) {\n+  return await axios.put(`clients/ajax/revoke?id=${id}`);", "originalCommit": "55f986e166b087636001c75989a6934bc5e2e2d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwMTE1NQ==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378501155", "bodyText": "Yes, it gets handled automatically by as the request leaves.   You can find the code for that on line 71 of app.js.  Developers do not need to set the context path now (but it does not fail if they do).", "author": "joshsadam", "createdAt": "2020-02-12T20:42:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjMzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjgzNA==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378442834", "bodyText": "Same in this class, will these URLs work in a context path?", "author": "tom114", "createdAt": "2020-02-12T18:47:08Z", "path": "src/main/webapp/resources/js/pages/clients/listing/ClientListingPage.jsx", "diffHunk": "@@ -0,0 +1,33 @@\n+import React from \"react\";\n+import { render } from \"react-dom\";\n+import { PageWrapper } from \"../../../components/page/PageWrapper\";\n+import { PagedTableProvider } from \"../../../components/ant.design/PagedTable\";\n+import { ClientsTable } from \"./ClientsTables\";\n+import { setBaseUrl } from \"../../../utilities/url-utilities\";\n+import { Button } from \"antd\";\n+import { PlusCircleTwoTone } from \"@ant-design/icons\";\n+\n+/**\n+ * Page for displaying the list of all clients.\n+ * @return {*}\n+ * @constructor\n+ */\n+function ClientListingPage() {\n+  return (\n+    <PageWrapper\n+      title={i18n(\"clients.title\")}\n+      headerExtras={\n+        <Button type={\"primary\"} href={setBaseUrl(`clients/create`)}>\n+          <PlusCircleTwoTone />\n+          {i18n(\"clients.add\")}\n+        </Button>\n+      }\n+    >\n+      <PagedTableProvider url={setBaseUrl(\"clients/ajax/list\")}>", "originalCommit": "55f986e166b087636001c75989a6934bc5e2e2d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODUwMTMwNg==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r378501306", "bodyText": "Same as above", "author": "joshsadam", "createdAt": "2020-02-12T20:43:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MjgzNA=="}], "type": "inlineReview"}, {"oid": "2f13204433b070c278f7f3d7524c71767691262e", "url": "https://github.com/phac-nml/irida/commit/2f13204433b070c278f7f3d7524c71767691262e", "message": "Do not open the client on a new tab.", "committedDate": "2020-02-13T15:27:45Z", "type": "commit"}, {"oid": "09b40ea52f41a09644e789244d5f4881f2739133", "url": "https://github.com/phac-nml/irida/commit/09b40ea52f41a09644e789244d5f4881f2739133", "message": "Allow developer to set sort column and direction.", "committedDate": "2020-02-13T19:14:38Z", "type": "commit"}, {"oid": "a2a61d073452146087f820ab6d7f73bf2f3dab31", "url": "https://github.com/phac-nml/irida/commit/a2a61d073452146087f820ab6d7f73bf2f3dab31", "message": "Added refresh_token as a default grant type tag.", "committedDate": "2020-02-13T19:17:25Z", "type": "commit"}, {"oid": "0b3345beb955af75451a1fedbf8465ecd553b233", "url": "https://github.com/phac-nml/irida/commit/0b3345beb955af75451a1fedbf8465ecd553b233", "message": "Updated TableModel to be a generic class.", "committedDate": "2020-02-13T19:48:50Z", "type": "commit"}, {"oid": "d8c122bc615993fdf7b8aaa759634a942eee857c", "url": "https://github.com/phac-nml/irida/commit/d8c122bc615993fdf7b8aaa759634a942eee857c", "message": "Update how the generics are used.", "committedDate": "2020-02-13T20:23:04Z", "type": "commit"}, {"oid": "4dc570c140086592ee662e7ab450eb9ebe35743a", "url": "https://github.com/phac-nml/irida/commit/4dc570c140086592ee662e7ab450eb9ebe35743a", "message": "Fixed JavaDoc in TableResponse.java", "committedDate": "2020-02-14T13:58:00Z", "type": "commit"}, {"oid": "48df41904653e6bf7c61e598be6976d85decd22b", "url": "https://github.com/phac-nml/irida/commit/48df41904653e6bf7c61e598be6976d85decd22b", "message": "Updated husky and prettier precommit", "committedDate": "2020-02-14T15:49:14Z", "type": "commit"}, {"oid": "401c7b79cd22a9e00b3ed61bd3d7f0a71212a567", "url": "https://github.com/phac-nml/irida/commit/401c7b79cd22a9e00b3ed61bd3d7f0a71212a567", "message": "Updated revoke tokens to use delete", "committedDate": "2020-02-14T16:37:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODA0NA==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379548044", "bodyText": "This should be parameterized <...>", "author": "tom114", "createdAt": "2020-02-14T17:14:27Z", "path": "src/main/java/ca/corefacility/bioinformatics/irida/ria/web/sequencingRuns/SequencingRunAjaxController.java", "diffHunk": "@@ -47,11 +47,12 @@ public TableResponse listSequencingRuns(@RequestBody SequencingRunsListRequest s\n \t\tPage<SequencingRun> list = sequencingRunService.list(sequencingRunsListRequest.getCurrent(),\n \t\t\t\tsequencingRunsListRequest.getPageSize(), sequencingRunsListRequest.getSort());\n \n-\t\tList<TableModel> runs = list.getContent()\n-\t\t\t\t.stream()\n-\t\t\t\t.map(s -> new SequencingRunModel(s, messageSource.getMessage(\"sequencingruns.status.\" + s.getUploadStatus()\n-\t\t\t\t\t\t.toString(), new Object[] {}, locale)))\n-\t\t\t\t.collect(Collectors.toList());\n+\t\tList<TableModel> runs = new ArrayList<>();\n+\t\tfor (SequencingRun run : list.getContent()) {\n+\t\t\truns.add(new SequencingRunModel(run, messageSource.getMessage(\n+\t\t\t\t\t\"sequencingruns.status.\" + run.getUploadStatus()\n+\t\t\t\t\t\t\t.toString(), new Object[] {}, locale)));\n+\t\t}\n \n \t\treturn new TableResponse(runs, list.getTotalElements());", "originalCommit": "401c7b79cd22a9e00b3ed61bd3d7f0a71212a567", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODExMQ==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r379548111", "bodyText": "Along with the method signature.", "author": "tom114", "createdAt": "2020-02-14T17:14:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODA0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcwMDY2Nw==", "url": "https://github.com/phac-nml/irida/pull/570#discussion_r380700667", "bodyText": "Fixed in f1b356d", "author": "joshsadam", "createdAt": "2020-02-18T14:21:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU0ODA0NA=="}], "type": "inlineReview"}, {"oid": "f1b356de18f58d0f98e1bb9bc8873c9f3be62be3", "url": "https://github.com/phac-nml/irida/commit/f1b356de18f58d0f98e1bb9bc8873c9f3be62be3", "message": "Added generic type", "committedDate": "2020-02-14T19:45:59Z", "type": "commit"}, {"oid": "9d933ba9ce432db093d013d83da6224ff142cb81", "url": "https://github.com/phac-nml/irida/commit/9d933ba9ce432db093d013d83da6224ff142cb81", "message": "Fixed issue with sort columns", "committedDate": "2020-02-14T21:04:53Z", "type": "commit"}, {"oid": "7e6359577e471fdce68fe40942ae6fabc21c04b2", "url": "https://github.com/phac-nml/irida/commit/7e6359577e471fdce68fe40942ae6fabc21c04b2", "message": "Made autowired components final.", "committedDate": "2020-02-18T14:27:17Z", "type": "commit"}]}