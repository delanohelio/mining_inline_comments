{"pr_number": 636, "pr_title": "Upload assemblies through the IRIDA UI", "pr_createdAt": "2020-03-23T10:38:10Z", "pr_url": "https://github.com/phac-nml/irida/pull/636", "timeline": [{"oid": "01bf1a1ead4d0b95648199a6f804b1686405d2f9", "url": "https://github.com/phac-nml/irida/commit/01bf1a1ead4d0b95648199a6f804b1686405d2f9", "message": "chore: Removed logging statement", "committedDate": "2020-03-19T14:52:36Z", "type": "commit"}, {"oid": "845d9ea42c7ccdde7ebf1ed39814ce0975eb4d26", "url": "https://github.com/phac-nml/irida/commit/845d9ea42c7ccdde7ebf1ed39814ce0975eb4d26", "message": "refactor: Working new sequence file upload", "committedDate": "2020-03-19T20:21:05Z", "type": "commit"}, {"oid": "e77c191658c8ecebec258539ec64a15b4c7bce51", "url": "https://github.com/phac-nml/irida/commit/e77c191658c8ecebec258539ec64a15b4c7bce51", "message": "chore: Updated code comments", "committedDate": "2020-03-19T20:29:26Z", "type": "commit"}, {"oid": "9c8f68d7928fbd0961f14d0e46cb720922e17216", "url": "https://github.com/phac-nml/irida/commit/9c8f68d7928fbd0961f14d0e46cb720922e17216", "message": "chore: Added messages for successful upload or error", "committedDate": "2020-03-20T10:10:18Z", "type": "commit"}, {"oid": "a9293f3e4b500ee94e7618050b27cfdd4d6f2cd6", "url": "https://github.com/phac-nml/irida/commit/a9293f3e4b500ee94e7618050b27cfdd4d6f2cd6", "message": "tests: Fixed tests", "committedDate": "2020-03-20T13:08:07Z", "type": "commit"}, {"oid": "1e12d56511dd1266f4b2f906f07578104bf6f272", "url": "https://github.com/phac-nml/irida/commit/1e12d56511dd1266f4b2f906f07578104bf6f272", "message": "tests: All tests passing locally", "committedDate": "2020-03-20T16:32:26Z", "type": "commit"}, {"oid": "873f6f9133c038b9a180c87d231ff5af096fbb26", "url": "https://github.com/phac-nml/irida/commit/873f6f9133c038b9a180c87d231ff5af096fbb26", "message": "feature: Working assembly uploader", "committedDate": "2020-03-20T18:28:33Z", "type": "commit"}, {"oid": "c36582e06b78f4628f80e8f0e88ea96b7e027383", "url": "https://github.com/phac-nml/irida/commit/c36582e06b78f4628f80e8f0e88ea96b7e027383", "message": "fix: Missing quote", "committedDate": "2020-03-20T19:27:18Z", "type": "commit"}, {"oid": "eb7009fc899f3afd8870a2ab01919d8a97581405", "url": "https://github.com/phac-nml/irida/commit/eb7009fc899f3afd8870a2ab01919d8a97581405", "message": "feature: Working progress bars for uploads", "committedDate": "2020-03-20T20:46:32Z", "type": "commit"}, {"oid": "f54b2a26b905aa474583a15ce73973b8d965e2b8", "url": "https://github.com/phac-nml/irida/commit/f54b2a26b905aa474583a15ce73973b8d965e2b8", "message": "styles: Updated position of buttons", "committedDate": "2020-03-23T10:29:56Z", "type": "commit"}, {"oid": "e8a028058d95cb63b5c20214b501caab134e719d", "url": "https://github.com/phac-nml/irida/commit/e8a028058d95cb63b5c20214b501caab134e719d", "message": "fix: Updated JavaDoc", "committedDate": "2020-03-23T11:57:40Z", "type": "commit"}, {"oid": "95cf2bdaac4b4058c135f4382d2294256ed3132c", "url": "https://github.com/phac-nml/irida/commit/95cf2bdaac4b4058c135f4382d2294256ed3132c", "message": "test: Updated tests for assembly files", "committedDate": "2020-03-23T13:55:48Z", "type": "commit"}, {"oid": "02bb3a293ace74d8a2c95ea4359904d32c25bff0", "url": "https://github.com/phac-nml/irida/commit/02bb3a293ace74d8a2c95ea4359904d32c25bff0", "message": "chore: Updated changelog", "committedDate": "2020-03-23T14:08:54Z", "type": "commit"}, {"oid": "a8e72599a08998b1e8bb304c75790541cbbe557b", "url": "https://github.com/phac-nml/irida/commit/a8e72599a08998b1e8bb304c75790541cbbe557b", "message": "feature: Working cancelling of upload", "committedDate": "2020-03-24T00:27:15Z", "type": "commit"}, {"oid": "ee9d853d05ef0048b7074d5902a2aebb06c2a863", "url": "https://github.com/phac-nml/irida/commit/ee9d853d05ef0048b7074d5902a2aebb06c2a863", "message": "Disable uploads after starting the upload", "committedDate": "2020-03-24T16:06:04Z", "type": "commit"}, {"oid": "b04bdf80175c9f8abed63e2a8846ed60c5780ec4", "url": "https://github.com/phac-nml/irida/commit/b04bdf80175c9f8abed63e2a8846ed60c5780ec4", "message": "Removed logging statements", "committedDate": "2020-03-24T16:26:24Z", "type": "commit"}, {"oid": "b2ca38bd17af2bfa79bf84598f6fedfc7dec1f41", "url": "https://github.com/phac-nml/irida/commit/b2ca38bd17af2bfa79bf84598f6fedfc7dec1f41", "message": "Update JSDoc", "committedDate": "2020-03-25T10:21:27Z", "type": "commit"}, {"oid": "e4bc9ae1c07f02e00fd15048288420714edde660", "url": "https://github.com/phac-nml/irida/commit/e4bc9ae1c07f02e00fd15048288420714edde660", "message": "test: Added check to ensure page translations were being loaded", "committedDate": "2020-03-25T12:03:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkxODAwOQ==", "url": "https://github.com/phac-nml/irida/pull/636#discussion_r397918009", "bodyText": "Can we have a full variable name here instead of a shorthand?", "author": "tom114", "createdAt": "2020-03-25T14:53:32Z", "path": "src/main/webapp/pages/samples/sample_files.html", "diffHunk": "@@ -6,64 +6,18 @@\n \t<title th:text=\"#{samples.files.title(${sample.label})}\">THIS IS SOMETHING WRONG</title>\n \t<link rel=\"stylesheet\" th:href=\"@{/dist/css/sample-files.bundle.css}\">\n \t<script th:inline=\"javascript\">\n-\t\tvar PAGE = {\n-\t\t\tsample: {\n-\t\t\t\tid: /*[[${sample.getId()}]]*/ '1'\n-\t\t\t},\n-\t\t  \tURLS: {\n-\t\t\t  upload: /*[[@{/samples/{id}/sequenceFiles/upload(id=${sample.getId()})}]]*/ ''\n-\t\t\t}\n+\t\twindow.PAGE = {\n+\t\t\tid: /*[[${sample.getId()}]]*/ '1',\n+\t\t\t__cm: /*[[${canManageSample}]]*/ false", "originalCommit": "e4bc9ae1c07f02e00fd15048288420714edde660", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk1Mjk1NQ==", "url": "https://github.com/phac-nml/irida/pull/636#discussion_r397952955", "bodyText": "I gave it an shorthand name so that if someone was looking at the code they would not know exactly what it was.  But I can definitely give it a full name.", "author": "joshsadam", "createdAt": "2020-03-25T15:37:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkxODAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDIxMTE1MA==", "url": "https://github.com/phac-nml/irida/pull/636#discussion_r400211150", "bodyText": "That's a good strategy.  Need to keep keep things confusing.", "author": "tom114", "createdAt": "2020-03-30T13:55:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkxODAwOQ=="}], "type": "inlineReview"}, {"oid": "04268527dff0a100f5ec09049219afb7e5627f68", "url": "https://github.com/phac-nml/irida/commit/04268527dff0a100f5ec09049219afb7e5627f68", "message": "Updated canManage variable name", "committedDate": "2020-03-25T15:38:14Z", "type": "commit"}, {"oid": "f0911f32c5c99e4826cd1073940fdc864321a7bb", "url": "https://github.com/phac-nml/irida/commit/f0911f32c5c99e4826cd1073940fdc864321a7bb", "message": "Remove close icon from notification", "committedDate": "2020-03-25T15:57:15Z", "type": "commit"}, {"oid": "fb3543fdcc8761285bd070122ea93806e7c54570", "url": "https://github.com/phac-nml/irida/commit/fb3543fdcc8761285bd070122ea93806e7c54570", "message": "Updated broken internationalization test", "committedDate": "2020-03-25T16:01:14Z", "type": "commit"}, {"oid": "34fc3188245e53353362ecdcc8a0ed6a5cb56f89", "url": "https://github.com/phac-nml/irida/commit/34fc3188245e53353362ecdcc8a0ed6a5cb56f89", "message": "Merge branch 'development' into ui-assembly-uploads\n\n# Conflicts:\n#\tCHANGELOG.md\n#\tsrc/main/webapp/resources/js/pages/samples/sample-files.js", "committedDate": "2020-03-25T17:48:18Z", "type": "commit"}, {"oid": "c6ad280e45424fbbf4a497339e3e1588406c80c8", "url": "https://github.com/phac-nml/irida/commit/c6ad280e45424fbbf4a497339e3e1588406c80c8", "message": "Working confirm if user tries to leave during upload", "committedDate": "2020-03-25T19:22:21Z", "type": "commit"}, {"oid": "02861487e2b76ce5bea36f64c3e31fced09eb010", "url": "https://github.com/phac-nml/irida/commit/02861487e2b76ce5bea36f64c3e31fced09eb010", "message": "Working tests and upload", "committedDate": "2020-03-25T19:39:26Z", "type": "commit"}, {"oid": "d3ad19ce41083ccb682b78d5da9e9de47abf0d36", "url": "https://github.com/phac-nml/irida/commit/d3ad19ce41083ccb682b78d5da9e9de47abf0d36", "message": "Internationalizes warning", "committedDate": "2020-03-25T19:41:04Z", "type": "commit"}, {"oid": "e310fc9ebc8d5d66151838457a22016a3a30e2c0", "url": "https://github.com/phac-nml/irida/commit/e310fc9ebc8d5d66151838457a22016a3a30e2c0", "message": "Comments and removed logging statement", "committedDate": "2020-03-25T19:43:08Z", "type": "commit"}, {"oid": "f00f82097c832549daae9332041b64c25a8e7ec5", "url": "https://github.com/phac-nml/irida/commit/f00f82097c832549daae9332041b64c25a8e7ec5", "message": "Merge branch 'development' into ui-assembly-uploads", "committedDate": "2020-03-30T11:23:33Z", "type": "commit"}, {"oid": "c7a3c14510845fd35b347ec65e5051877d85e638", "url": "https://github.com/phac-nml/irida/commit/c7a3c14510845fd35b347ec65e5051877d85e638", "message": "\ud83d\udc84\ufe0fFixed styles on progress and cancel file upload", "committedDate": "2020-03-30T12:28:18Z", "type": "commit"}, {"oid": "134093c02d2f9fe2dd24db8a078b89c1545b4596", "url": "https://github.com/phac-nml/irida/commit/134093c02d2f9fe2dd24db8a078b89c1545b4596", "message": "Cleaned up cancel icon and adjusted layout of notification", "committedDate": "2020-03-30T12:49:41Z", "type": "commit"}, {"oid": "f137bd9629d01452dbaed6ae704654427a81d242", "url": "https://github.com/phac-nml/irida/commit/f137bd9629d01452dbaed6ae704654427a81d242", "message": "Uploaded documentation to include assemblies", "committedDate": "2020-03-30T13:00:20Z", "type": "commit"}, {"oid": "bc1ceb70d83135c2191ddd4f2103ed20b4a01aa3", "url": "https://github.com/phac-nml/irida/commit/bc1ceb70d83135c2191ddd4f2103ed20b4a01aa3", "message": "Merge remote-tracking branch 'origin/upload-assemblies' into ui-assembly-uploads", "committedDate": "2020-03-30T13:37:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDIxMjc0NQ==", "url": "https://github.com/phac-nml/irida/pull/636#discussion_r400212745", "bodyText": "Comments for what this file is for please.", "author": "tom114", "createdAt": "2020-03-30T13:57:53Z", "path": "src/main/webapp/resources/js/components/MenuBar.jsx", "diffHunk": "@@ -0,0 +1,6 @@\n+import React from \"react\";\n+import { SPACE_XS } from \"../styles/spacing\";\n+\n+export function MenuBar({ children }) {", "originalCommit": "bc1ceb70d83135c2191ddd4f2103ed20b4a01aa3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDMyNTkwOQ==", "url": "https://github.com/phac-nml/irida/pull/636#discussion_r400325909", "bodyText": "Updated in ade001f", "author": "joshsadam", "createdAt": "2020-03-30T16:25:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDIxMjc0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI4NzMwMQ==", "url": "https://github.com/phac-nml/irida/pull/636#discussion_r400287301", "bodyText": "Concatenate files image below here is still the old style.", "author": "tom114", "createdAt": "2020-03-30T15:32:57Z", "path": "doc/_includes/tutorials/common/uploading-sample-files.md", "diffHunk": "@@ -1,11 +1,17 @@\n-Sequence files can be uploaded by clicking on the \"Upload Sequence Files\" button, on the left hand side side of the sequence file table.  Files must have the extension `.fastq` or `.fastq.gz`, all other formats will be ignored.\n+### Sequence Files\n+\n+Sequence files can be uploaded by hovering over the \"Upload Files\" above the sequence file table, and select the \"Upload Sequence Files\" drop down option. Files must have the extension `.fastq` or `.fastq.gz`, all other formats will be ignored.\n \n ![Upload sequence file.]({{ site.baseurl }}/images/tutorials/common/samples/upload-sample-file-btn.png)\n \n-You can select single or multiple files in the system file selection window.\n+You can select single or multiple files in the system file selection window.  If you are uploading paired end data, ensure they are selected in the same upload.\n \n-![Upload File Selection.]({{ site.baseurl }}/images/tutorials/common/samples/upload-sample-file-selection.png)\n+![Cancel upload]({{ site.baseurl }}/images/tutorials/common/samples/upload-sample-progress-cancel.png)\n \n-Files will upload immediately and a progress bar will be displayed.  If you need to cancel an upload click the <img class=\"inline\" src=\"{{ site.baseurl }}/images/tutorials/common/samples/upload-sample-cancel-btn.png\" alt=\"Cancel Upload Button\" /> button.\n+Files will upload will begin immediately.  A notification will open in the bottom right corner of the screen displaying the status of the upload.  If you need to cancel an upload click the <img class=\"inline\" src=\"{{ site.baseurl }}/images/tutorials/common/samples/upload-sample-cancel-btn.png\" alt=\"Cancel Upload Button\" /> button.  **Do not leave or refresh the page as this will cancel the upload**, a warning will be display if you attempt to do this.\n \n-![Cancel upload]({{ site.baseurl }}/images/tutorials/common/samples/upload-sample-progress-cancel.png)\n+### Assembly Files\n+\n+Assembly files can be uploading the same way as sequence files, using the \"Upload Files\" drop down above the sequence files table.  Select the \"Upload Assembly\" drop down option.  Assembly files must have the extension `.fasta` or `.fna`, all other formats will be ignored.\n+\n+![Upload assembly.]({{ site.baseurl }}/images/tutorials/common/samples/upload-assembly.png)", "originalCommit": "bc1ceb70d83135c2191ddd4f2103ed20b4a01aa3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDMyNjA3Nw==", "url": "https://github.com/phac-nml/irida/pull/636#discussion_r400326077", "bodyText": "Updated in d7be512", "author": "joshsadam", "createdAt": "2020-03-30T16:26:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI4NzMwMQ=="}], "type": "inlineReview"}, {"oid": "ade001fd243872c437de97f05fa4a8681b7f892c", "url": "https://github.com/phac-nml/irida/commit/ade001fd243872c437de97f05fa4a8681b7f892c", "message": "Update JSDoc for MenuBar", "committedDate": "2020-03-30T16:20:01Z", "type": "commit"}, {"oid": "d7be5124f282eee310baffc0bffe627033cfcc86", "url": "https://github.com/phac-nml/irida/commit/d7be5124f282eee310baffc0bffe627033cfcc86", "message": "Updated concatenate image", "committedDate": "2020-03-30T16:24:45Z", "type": "commit"}]}