{"pr_number": 3144, "pr_title": "Use redux toolkit for dependencies page", "pr_createdAt": "2020-07-11T12:02:16Z", "pr_url": "https://github.com/openzipkin/zipkin/pull/3144", "timeline": [{"oid": "de156fe65e92fb2c1c14d1949bc03d9646c77082", "url": "https://github.com/openzipkin/zipkin/commit/de156fe65e92fb2c1c14d1949bc03d9646c77082", "message": "Change dependencies page's directory structure", "committedDate": "2020-07-11T10:48:28Z", "type": "commit"}, {"oid": "9a48577e74fef90ed3907f9eae070a46edffcccd", "url": "https://github.com/openzipkin/zipkin/commit/9a48577e74fef90ed3907f9eae070a46edffcccd", "message": "Show alert snackbar when failed to load dependencies", "committedDate": "2020-07-11T11:40:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE4ODI5NQ==", "url": "https://github.com/openzipkin/zipkin/pull/3144#discussion_r453188295", "bodyText": "10 seconds seemed a bit long for me.", "author": "tacigar", "createdAt": "2020-07-11T12:03:13Z", "path": "zipkin-lens/src/components/App/AlertSnackbar.tsx", "diffHunk": "@@ -32,7 +32,7 @@ const AlertSnackbar: React.FC = () => {\n   return (\n     <Snackbar\n       open={alertOpen}\n-      autoHideDuration={10000}", "originalCommit": "9a48577e74fef90ed3907f9eae070a46edffcccd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE4ODM0Nw==", "url": "https://github.com/openzipkin/zipkin/pull/3144#discussion_r453188347", "bodyText": "All import statements are sorted alphabetically.", "author": "tacigar", "createdAt": "2020-07-11T12:04:07Z", "path": "zipkin-lens/src/features/dependencies/DependenciesGraph.tsx", "diffHunk": "@@ -11,17 +11,26 @@\n  * or implied. See the License for the specific language governing permissions and limitations under\n  * the License.\n  */\n+\n /* eslint-disable no-shadow */\n+\n+import {\n+  Box,\n+  Grid,\n+  Theme,\n+  createStyles,\n+  makeStyles,\n+  useTheme,\n+} from '@material-ui/core';\n+import moment from 'moment';", "originalCommit": "9a48577e74fef90ed3907f9eae070a46edffcccd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE4ODM3NA==", "url": "https://github.com/openzipkin/zipkin/pull/3144#discussion_r453188374", "bodyText": "Show AlertSnackbar when failed to load dependencies.", "author": "tacigar", "createdAt": "2020-07-11T12:04:40Z", "path": "zipkin-lens/src/features/dependencies/DependenciesPage.tsx", "diffHunk": "@@ -132,10 +139,23 @@ const DependenciesPage: React.FC<DependenciesPageProps> = ({\n   });\n   useFetchDependencies(timeRange);\n \n-  const { isLoading, dependencies } = useSelector(\n+  const { isLoading, dependencies, error } = useSelector(\n     (state: RootState) => state.dependencies,\n   );\n \n+  useEffect(() => {\n+    if (error) {\n+      dispatch(\n+        setAlert({\n+          message: 'Failed to load dependencies...',\n+          severity: 'error',\n+        }),\n+      );\n+    } else {\n+      dispatch(clearAlert());\n+    }\n+  }, [error, dispatch]);", "originalCommit": "9a48577e74fef90ed3907f9eae070a46edffcccd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a5e77b91e49b203345066e99806ac6a203a5cb2a", "url": "https://github.com/openzipkin/zipkin/commit/a5e77b91e49b203345066e99806ac6a203a5cb2a", "message": "Refactor", "committedDate": "2020-07-11T12:07:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE4ODY5Mw==", "url": "https://github.com/openzipkin/zipkin/pull/3144#discussion_r453188693", "bodyText": "Edge was defined in NodeDetailData.tsx, but it is now in a separate file Transferred.", "author": "tacigar", "createdAt": "2020-07-11T12:08:27Z", "path": "zipkin-lens/src/features/dependencies/Edge.ts", "diffHunk": "@@ -11,8 +11,14 @@\n  * or implied. See the License for the specific language governing permissions and limitations under\n  * the License.\n  */\n-import createReducer from '../reducers';\n \n-type RootState = ReturnType<ReturnType<typeof createReducer>>;\n+type Edge = {", "originalCommit": "9a48577e74fef90ed3907f9eae070a46edffcccd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE4ODc3Mw==", "url": "https://github.com/openzipkin/zipkin/pull/3144#discussion_r453188773", "bodyText": "I defined AppThunk in the same file as RootState.", "author": "tacigar", "createdAt": "2020-07-11T12:09:36Z", "path": "zipkin-lens/src/store/index.ts", "diffHunk": "@@ -12,6 +12,16 @@\n  * the License.\n  */\n \n+import { Action } from 'redux';\n+import { ThunkAction } from 'redux-thunk';\n+\n import createReducer from '../reducers';\n \n export type RootState = ReturnType<ReturnType<typeof createReducer>>;\n+\n+export type AppThunk<ReturnType = void> = ThunkAction<", "originalCommit": "9a48577e74fef90ed3907f9eae070a46edffcccd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c7c0caa230cd9671199424c7ea43d9c8fd8ca44d", "url": "https://github.com/openzipkin/zipkin/commit/c7c0caa230cd9671199424c7ea43d9c8fd8ca44d", "message": "Use redux-toolkit's createAsyncThunk and change the directory structure", "committedDate": "2020-08-01T19:20:35Z", "type": "commit"}]}