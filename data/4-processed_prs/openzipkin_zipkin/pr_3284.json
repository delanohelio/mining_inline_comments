{"pr_number": 3284, "pr_title": "Removes root dependency management", "pr_createdAt": "2020-11-04T03:50:42Z", "pr_url": "https://github.com/openzipkin/zipkin/pull/3284", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzA4NDY1NQ==", "url": "https://github.com/openzipkin/zipkin/pull/3284#discussion_r517084655", "bodyText": "here's the important text", "author": "codefromthecrypt", "createdAt": "2020-11-04T03:58:26Z", "path": "pom.xml", "diffHunk": "@@ -155,233 +160,72 @@\n   </issueManagement>\n \n   <dependencyManagement>\n-    <dependencies>\n-      <dependency>\n-        <groupId>io.netty</groupId>\n-        <artifactId>netty-bom</artifactId>\n-        <version>${netty.version}</version>\n-        <type>pom</type>\n-        <scope>import</scope>\n-      </dependency>\n-      <dependency>\n-        <groupId>javax.annotation</groupId>\n-        <artifactId>javax.annotation-api</artifactId>\n-        <version>1.3.1</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.jooq</groupId>\n-        <artifactId>jooq</artifactId>\n-        <version>${jooq.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>${armeria.groupId}</groupId>\n-        <artifactId>armeria-spring-boot2-autoconfigure</artifactId>\n-        <version>${armeria.version}</version>\n-        <exclusions>\n-          <exclusion>\n-            <groupId>${armeria.groupId}</groupId>\n-            <artifactId>armeria-logback</artifactId>\n-          </exclusion>\n-          <exclusion>\n-            <groupId>javax.validation</groupId>\n-            <artifactId>validation-api</artifactId>\n-          </exclusion>\n-        </exclusions>\n-      </dependency>\n-\n-      <!-- Makes sure spring doesn't eagerly bind tomcat or slf4j -->\n-      <dependency>\n-        <groupId>org.springframework.boot</groupId>\n-        <artifactId>spring-boot-starter</artifactId>\n-        <version>${spring-boot.version}</version>\n-        <exclusions>\n-          <exclusion>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-logging</artifactId>\n-          </exclusion>\n-        </exclusions>\n-      </dependency>\n-      <dependency>\n-        <groupId>org.springframework.boot</groupId>\n-        <artifactId>spring-boot-starter-actuator</artifactId>\n-        <version>${spring-boot.version}</version>\n-        <exclusions>\n-          <exclusion>\n-            <groupId>org.springframework.boot</groupId>\n-            <artifactId>spring-boot-starter-logging</artifactId>\n-          </exclusion>\n-        </exclusions>\n-      </dependency>\n-      <!-- End spring-boot-dependencies overrides -->\n-\n-      <dependency>\n-        <groupId>com.google.auto.value</groupId>\n-        <artifactId>auto-value-annotations</artifactId>\n-        <version>${auto-value.version}</version>\n-      </dependency>\n-      <dependency>\n-        <groupId>com.google.auto.value</groupId>\n-        <artifactId>auto-value</artifactId>\n-        <version>${auto-value.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.slf4j</groupId>\n-        <artifactId>slf4j-api</artifactId>\n-        <version>${slf4j.version}</version>\n-      </dependency>\n-      <dependency>\n-        <groupId>org.slf4j</groupId>\n-        <artifactId>jul-to-slf4j</artifactId>\n-        <version>${slf4j.version}</version>\n-      </dependency>\n-      <dependency>\n-        <groupId>org.slf4j</groupId>\n-        <artifactId>log4j-over-slf4j</artifactId>\n-        <version>${slf4j.version}</version>\n-      </dependency>\n-      <dependency>\n-        <groupId>org.slf4j</groupId>\n-        <artifactId>slf4j-simple</artifactId>\n-        <version>${slf4j.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>com.fasterxml.jackson</groupId>\n-        <artifactId>jackson-bom</artifactId>\n-        <version>${jackson.version}</version>\n-        <type>pom</type>\n-        <scope>import</scope>\n-      </dependency>\n-\n-      <!-- for testing flink -->\n-      <dependency>\n-        <groupId>com.esotericsoftware</groupId>\n-        <artifactId>kryo</artifactId>\n-        <version>5.0.0-RC9</version>\n-      </dependency>\n-\n-      <!-- Internal classes used in SpanBytesDecoder.JSON_V[12] -->\n-      <dependency>\n-        <groupId>com.google.code.gson</groupId>\n-        <artifactId>gson</artifactId>\n-        <version>2.8.6</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>junit</groupId>\n-        <artifactId>junit</artifactId>\n-        <version>${junit.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.junit.jupiter</groupId>\n-        <artifactId>junit-jupiter</artifactId>\n-        <version>${junit-jupiter.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.junit.vintage</groupId>\n-        <artifactId>junit-vintage-engine</artifactId>\n-        <version>${junit-jupiter.version}</version>\n-      </dependency>\n-\n-      <!--\n-      Current versions of JUnit5 provide the above junit-jupiter artifact for convenience but we may\n-      still have transitive dependencies on these older artifacts and have to make sure they're all\n-      using the same version.\n-      -->\n-      <dependency>\n-        <groupId>org.junit.jupiter</groupId>\n-        <artifactId>junit-jupiter-api</artifactId>\n-        <version>${junit-jupiter.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.junit.jupiter</groupId>\n-        <artifactId>junit-jupiter-engine</artifactId>\n-        <version>${junit-jupiter.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.assertj</groupId>\n-        <artifactId>assertj-core</artifactId>\n-        <version>${assertj.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.awaitility</groupId>\n-        <artifactId>awaitility</artifactId>\n-        <version>${awaitility.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.mockito</groupId>\n-        <artifactId>mockito-core</artifactId>\n-        <version>${mockito.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.testcontainers</groupId>\n-        <artifactId>testcontainers</artifactId>\n-        <version>${testcontainers.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.testcontainers</groupId>\n-        <artifactId>mysql</artifactId>\n-        <version>${testcontainers.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>org.mariadb.jdbc</groupId>\n-        <artifactId>mariadb-java-client</artifactId>\n-        <version>${mariadb-java-client.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>com.zaxxer</groupId>\n-        <artifactId>HikariCP</artifactId>\n-        <version>${HikariCP.version}</version>\n-      </dependency>\n-\n-      <dependency>\n-        <groupId>io.zipkin.proto3</groupId>\n-        <artifactId>zipkin-proto3</artifactId>\n-        <version>0.2.2</version>\n-      </dependency>\n-      <dependency>\n-        <groupId>com.squareup.wire</groupId>\n-        <artifactId>wire-runtime</artifactId>\n-        <version>${wire.version}</version>\n-      </dependency>\n-    </dependencies>\n+    <!-- Be careful here, especially to not import BOMs as io.zipkin.zipkin2:zipkin has this parent.", "originalCommit": "12f91a73e1315cb84e7ce6bae3b4c6db39fbeacd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bdcd9b2394b9c20fe745e8098c6d9a45d91c5e55", "url": "https://github.com/openzipkin/zipkin/commit/bdcd9b2394b9c20fe745e8098c6d9a45d91c5e55", "message": "Removes root dependency management\n\nBefore, we imported BOMs at the root-most scope. This implies any\nconsumer of any library imports the same BOM. For example, I noticed\nafter clean installing brave-opentracing, that it was importing Netty's\nBOM.\n\nRoot-level dependency management tempts us to accidentally add\ndependencies to Zipkin's most core library. The convenience is not worth\nthe risk. Hence, this pushes out dependency management nearer to where\nthey are used.", "committedDate": "2020-11-04T04:08:32Z", "type": "commit"}, {"oid": "bdcd9b2394b9c20fe745e8098c6d9a45d91c5e55", "url": "https://github.com/openzipkin/zipkin/commit/bdcd9b2394b9c20fe745e8098c6d9a45d91c5e55", "message": "Removes root dependency management\n\nBefore, we imported BOMs at the root-most scope. This implies any\nconsumer of any library imports the same BOM. For example, I noticed\nafter clean installing brave-opentracing, that it was importing Netty's\nBOM.\n\nRoot-level dependency management tempts us to accidentally add\ndependencies to Zipkin's most core library. The convenience is not worth\nthe risk. Hence, this pushes out dependency management nearer to where\nthey are used.", "committedDate": "2020-11-04T04:08:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcwODI3Ng==", "url": "https://github.com/openzipkin/zipkin/pull/3284#discussion_r517708276", "bodyText": "Sorry, a bit late with my comment, wouldn't it be better to define javax.annotation-api version in the parent pom.xml? I see it being used in a few places.", "author": "reta", "createdAt": "2020-11-05T00:19:47Z", "path": "zipkin-collector/scribe/pom.xml", "diffHunk": "@@ -50,6 +50,7 @@\n     <dependency>\n       <groupId>javax.annotation</groupId>\n       <artifactId>javax.annotation-api</artifactId>\n+      <version>1.3.1</version>", "originalCommit": "bdcd9b2394b9c20fe745e8098c6d9a45d91c5e55", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcxMDgxMg==", "url": "https://github.com/openzipkin/zipkin/pull/3284#discussion_r517710812", "bodyText": "sure. want to raise a PR to add that property? and use it in the few?", "author": "codefromthecrypt", "createdAt": "2020-11-05T00:28:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcwODI3Ng=="}], "type": "inlineReview"}]}