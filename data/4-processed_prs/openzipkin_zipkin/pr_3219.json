{"pr_number": 3219, "pr_title": "Migrates builder to Alpine JDK 15", "pr_createdAt": "2020-09-30T07:40:00Z", "pr_url": "https://github.com/openzipkin/zipkin/pull/3219", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzMwNDMzMw==", "url": "https://github.com/openzipkin/zipkin/pull/3219#discussion_r497304333", "bodyText": "I couldn't see where this layer was used..", "author": "codefromthecrypt", "createdAt": "2020-09-30T07:40:50Z", "path": "docker/Dockerfile", "diffHunk": "@@ -35,11 +35,6 @@ RUN ./mvnw -q --batch-mode -DskipTests --also-make -pl zipkin-server install\n RUN mkdir -p /zipkin && cp zipkin-server/target/zipkin-server-*-exec.jar /zipkin && cd /zipkin && jar xf *.jar && rm *.jar\n RUN mkdir -p /zipkin-slim && cp zipkin-server/target/zipkin-server-*-slim.jar /zipkin-slim && cd /zipkin-slim && jar xf *.jar && rm *.jar\n \n-FROM maven:3-openjdk-14-slim as zipkin-builder", "originalCommit": "b84bb5f079e1fed083415ce7db8631704f952a11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzMwNjI1MA==", "url": "https://github.com/openzipkin/zipkin/pull/3219#discussion_r497306250", "bodyText": "It's used here in a hook\n\n  \n    \n      zipkin/docker/hooks/post_push\n    \n    \n         Line 38\n      in\n      206abbc\n    \n    \n    \n    \n\n        \n          \n           docker build -f \"$DOCKERFILE_PATH\" -t openzipkin/zipkin-builder --target zipkin-builder . \n        \n    \n  \n\n\nIt's the only way to have these cache across builds with docker hub that I could find.", "author": "anuraaga", "createdAt": "2020-09-30T07:44:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzMwNDMzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzMxMTE1OA==", "url": "https://github.com/openzipkin/zipkin/pull/3219#discussion_r497311158", "bodyText": "ic, I was actually wondering why we are explicitly caching in the image when we can do stuff like that in travis and github actions..\nsomething to think about, and don't have a better plan at the moment. it is a pity to have copy/pasta..", "author": "codefromthecrypt", "createdAt": "2020-09-30T07:52:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzMwNDMzMw=="}], "type": "inlineReview"}, {"oid": "a816ae0d6d1a1e7b3f75d17dde7b111424f70b4e", "url": "https://github.com/openzipkin/zipkin/commit/a816ae0d6d1a1e7b3f75d17dde7b111424f70b4e", "message": "Prepares for migration of builder to Alpine\n\nThis makes things easier once #3218 is addressed", "committedDate": "2020-10-01T12:20:09Z", "type": "commit"}, {"oid": "f9e6bf135263784b9d0d2a528a4af8b6bd38fd0c", "url": "https://github.com/openzipkin/zipkin/commit/f9e6bf135263784b9d0d2a528a4af8b6bd38fd0c", "message": "Works around lack of musl support in maven-frontend-plugin", "committedDate": "2020-10-02T01:13:46Z", "type": "commit"}, {"oid": "f9e6bf135263784b9d0d2a528a4af8b6bd38fd0c", "url": "https://github.com/openzipkin/zipkin/commit/f9e6bf135263784b9d0d2a528a4af8b6bd38fd0c", "message": "Works around lack of musl support in maven-frontend-plugin", "committedDate": "2020-10-02T01:13:46Z", "type": "forcePushed"}, {"oid": "87f8695105e411eb175ca73dcbc6f9db44683325", "url": "https://github.com/openzipkin/zipkin/commit/87f8695105e411eb175ca73dcbc6f9db44683325", "message": "Think I got it", "committedDate": "2020-10-02T02:06:05Z", "type": "commit"}, {"oid": "f260a37ceb092a23f917ec315935d56281cfa80e", "url": "https://github.com/openzipkin/zipkin/commit/f260a37ceb092a23f917ec315935d56281cfa80e", "message": "a little cleaner", "committedDate": "2020-10-02T02:09:46Z", "type": "commit"}, {"oid": "78c4531e83dc0b74b56cdbceb6dcadfaf150937e", "url": "https://github.com/openzipkin/zipkin/commit/78c4531e83dc0b74b56cdbceb6dcadfaf150937e", "message": "shellcheck", "committedDate": "2020-10-02T02:13:49Z", "type": "commit"}, {"oid": "1322c0e24662c49fd2dea971b91903143cf44e8e", "url": "https://github.com/openzipkin/zipkin/commit/1322c0e24662c49fd2dea971b91903143cf44e8e", "message": "finishing touches", "committedDate": "2020-10-02T04:15:14Z", "type": "commit"}, {"oid": "8ff4d76233350d0305dea2102a73b54ee9347689", "url": "https://github.com/openzipkin/zipkin/commit/8ff4d76233350d0305dea2102a73b54ee9347689", "message": "too much pasta", "committedDate": "2020-10-02T04:23:40Z", "type": "commit"}]}