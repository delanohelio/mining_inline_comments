{"pr_number": 3182, "pr_title": "Slims down Kafka by removing libs only needed for streams and connect", "pr_createdAt": "2020-08-21T05:56:37Z", "pr_url": "https://github.com/openzipkin/zipkin/pull/3182", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQyNDI5NQ==", "url": "https://github.com/openzipkin/zipkin/pull/3182#discussion_r474424295", "bodyText": "we could simplify downloads further by inlining shell scripts and log config, but I think it is not an issue really", "author": "codefromthecrypt", "createdAt": "2020-08-21T05:57:29Z", "path": "docker/collector/kafka/install.sh", "diffHunk": "@@ -16,9 +16,7 @@\n set -eux\n \n echo \"*** Installing Kafka and dependencies\"\n-apk add --update --no-cache jq curl\n-\n-APACHE_MIRROR=$(curl --stderr /dev/null https://www.apache.org/dyn/closer.cgi\\?as_json\\=1 | jq -r '.preferred')\n+APACHE_MIRROR=$(curl --stderr /dev/null https://www.apache.org/dyn/closer.cgi\\?as_json\\=1 |sed -n '/preferred/s/.*\"\\(.*\\)\"/\\1/gp')\n \n # download kafka binaries\n curl -sSL $APACHE_MIRROR/kafka/$KAFKA_VERSION/kafka_$SCALA_VERSION-$KAFKA_VERSION.tgz | tar xz", "originalCommit": "50873dd0bbd6aa4fd495659d45e90647cb6045a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQzMjE5MQ==", "url": "https://github.com/openzipkin/zipkin/pull/3182#discussion_r474432191", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            APACHE_MIRROR=$(curl --stderr /dev/null https://www.apache.org/dyn/closer.cgi\\?as_json\\=1 |sed -n '/preferred/s/.*\"\\(.*\\)\"/\\1/gp')\n          \n          \n            \n            APACHE_MIRROR=$(curl --stderr /dev/null https://www.apache.org/dyn/closer.cgi\\?as_json\\=1 | sed -n '/preferred/s/.*\"\\(.*\\)\"/\\1/gp')", "author": "codefromthecrypt", "createdAt": "2020-08-21T06:23:15Z", "path": "docker/collector/kafka/install.sh", "diffHunk": "@@ -16,9 +16,7 @@\n set -eux\n \n echo \"*** Installing Kafka and dependencies\"\n-apk add --update --no-cache jq curl\n-\n-APACHE_MIRROR=$(curl --stderr /dev/null https://www.apache.org/dyn/closer.cgi\\?as_json\\=1 | jq -r '.preferred')\n+APACHE_MIRROR=$(curl --stderr /dev/null https://www.apache.org/dyn/closer.cgi\\?as_json\\=1 |sed -n '/preferred/s/.*\"\\(.*\\)\"/\\1/gp')", "originalCommit": "50873dd0bbd6aa4fd495659d45e90647cb6045a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ca30e0093748e0005fc36b7ab4216559004e1b46", "url": "https://github.com/openzipkin/zipkin/commit/ca30e0093748e0005fc36b7ab4216559004e1b46", "message": "Slims down Kafka by removing libs only needed for streams and connect\n\nThis takes another 33M off the image (which is half its size over our base image)\n\n```\nopenzipkin/zipkin-kafka       test                    3513b24c41c6        6 minutes ago       133MB\nopenzipkin/zipkin-kafka       latest                  6bf053880509        2 weeks ago         166MB\n```", "committedDate": "2020-08-23T00:23:05Z", "type": "commit"}, {"oid": "d08b9de32012d5ee78877a44f8f5bc6dd6624952", "url": "https://github.com/openzipkin/zipkin/commit/d08b9de32012d5ee78877a44f8f5bc6dd6624952", "message": "Update docker/collector/kafka/install.sh", "committedDate": "2020-08-23T00:23:05Z", "type": "commit"}, {"oid": "ed4fc37720860940570a118cee582837f910b3bf", "url": "https://github.com/openzipkin/zipkin/commit/ed4fc37720860940570a118cee582837f910b3bf", "message": "massive cleanups", "committedDate": "2020-08-23T01:19:09Z", "type": "commit"}, {"oid": "ed4fc37720860940570a118cee582837f910b3bf", "url": "https://github.com/openzipkin/zipkin/commit/ed4fc37720860940570a118cee582837f910b3bf", "message": "massive cleanups", "committedDate": "2020-08-23T01:19:09Z", "type": "forcePushed"}, {"oid": "f0e43118fa4c345ab2698ee8e46973f41ddc8587", "url": "https://github.com/openzipkin/zipkin/commit/f0e43118fa4c345ab2698ee8e46973f41ddc8587", "message": "updates comment", "committedDate": "2020-08-24T00:32:41Z", "type": "commit"}]}