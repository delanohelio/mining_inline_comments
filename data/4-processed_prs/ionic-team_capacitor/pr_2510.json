{"pr_number": 2510, "pr_title": "Formatting MessageHandler", "pr_createdAt": "2020-03-03T07:54:44Z", "pr_url": "https://github.com/ionic-team/capacitor/pull/2510", "timeline": [{"oid": "943b3d40bc4e747a30f89e13119433502c647c6a", "url": "https://github.com/ionic-team/capacitor/commit/943b3d40bc4e747a30f89e13119433502c647c6a", "message": "Formatting MessageHandler", "committedDate": "2020-03-03T07:50:22Z", "type": "commit"}, {"oid": "534c253ec63e0e872ba65a929dbdf5bf2b175a6b", "url": "https://github.com/ionic-team/capacitor/commit/534c253ec63e0e872ba65a929dbdf5bf2b175a6b", "message": "Merge branch 'master' of github.com:ionic-team/capacitor into formatting-message-handler", "committedDate": "2020-06-23T22:54:47Z", "type": "commit"}, {"oid": "8d51b443ebfa58720ad21b07ace4d8ba308948a5", "url": "https://github.com/ionic-team/capacitor/commit/8d51b443ebfa58720ad21b07ace4d8ba308948a5", "message": "Drop gradle files", "committedDate": "2020-06-23T22:56:22Z", "type": "commit"}, {"oid": "6d86fd278400c6e057e9cf31e3f9aca9a7b47a1c", "url": "https://github.com/ionic-team/capacitor/commit/6d86fd278400c6e057e9cf31e3f9aca9a7b47a1c", "message": "Drop gradle files", "committedDate": "2020-06-23T22:56:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1ODQwNg==", "url": "https://github.com/ionic-team/capacitor/pull/2510#discussion_r444958406", "bodyText": "Did you mean to use the new isJavaScriptError bool here?", "author": "carlpoole", "createdAt": "2020-06-24T14:57:42Z", "path": "android/capacitor/src/main/java/com/getcapacitor/MessageHandler.java", "diffHunk": "@@ -35,40 +35,36 @@ public void postMessage(String jsonStr) {\n \n       String type = postData.getString(\"type\");\n \n-      if (type != null && type.equals(\"cordova\")) {\n-        String callbackId = postData.getString(\"callbackId\");\n+      boolean typeIsNotNull = type != null;\n+      boolean isCordovaPlugin = typeIsNotNull && type.equals(\"cordova\");\n+      boolean isJavaScriptError = typeIsNotNull && type.equals(\"js.error\");\n+\n+      String callbackId = postData.getString(\"callbackId\");\n+\n+      if (isCordovaPlugin) {\n         String service = postData.getString(\"service\");\n         String action = postData.getString(\"action\");\n         String actionArgs = postData.getString(\"actionArgs\");\n-        Logger.verbose(Logger.tags(\"Plugin\"), \"To native (Cordova plugin): callbackId: \" + callbackId + \", service: \" + service +\n-          \", action: \" + action + \", actionArgs: \" + actionArgs);\n+\n+        Logger.verbose(Logger.tags(\"Plugin\"), \"To native (Cordova plugin): callbackId: \" + callbackId + \", service: \" + service + \", action: \" + action + \", actionArgs: \" + actionArgs);\n+\n         this.callCordovaPluginMethod(callbackId, service, action, actionArgs);\n       } else if (type != null && type.equals(\"js.error\")) {", "originalCommit": "6d86fd278400c6e057e9cf31e3f9aca9a7b47a1c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAzNDIzMg==", "url": "https://github.com/ionic-team/capacitor/pull/2510#discussion_r445034232", "bodyText": "Good spot, fixed!", "author": "imjacobclark", "createdAt": "2020-06-24T16:50:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk1ODQwNg=="}], "type": "inlineReview"}, {"oid": "7daf9edfcf1c70c8eb0db6914a3ad19af27e31a1", "url": "https://github.com/ionic-team/capacitor/commit/7daf9edfcf1c70c8eb0db6914a3ad19af27e31a1", "message": "Update MessageHandler.java", "committedDate": "2020-06-24T16:50:23Z", "type": "commit"}]}