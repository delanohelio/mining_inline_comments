{"pr_number": 3673, "pr_title": "feat: unified errors and error codes", "pr_createdAt": "2020-10-13T20:25:30Z", "pr_url": "https://github.com/ionic-team/capacitor/pull/3673", "timeline": [{"oid": "fb58dfaf2362f93cba851eaac367182037b5736e", "url": "https://github.com/ionic-team/capacitor/commit/fb58dfaf2362f93cba851eaac367182037b5736e", "message": "feat: UNIMPLEMENTED/UNAVAILABLE error codes", "committedDate": "2020-10-13T20:23:26Z", "type": "commit"}, {"oid": "54162cc22220c4cd715f19697bc9ec2c55ba8e38", "url": "https://github.com/ionic-team/capacitor/commit/54162cc22220c4cd715f19697bc9ec2c55ba8e38", "message": "Merge branch 'main' into except", "committedDate": "2020-10-13T20:32:06Z", "type": "commit"}, {"oid": "aa6f30f32b39973bff9aa7e781c7918708621313", "url": "https://github.com/ionic-team/capacitor/commit/aa6f30f32b39973bff9aa7e781c7918708621313", "message": "Merge branch 'main' into except", "committedDate": "2020-10-14T18:03:00Z", "type": "commit"}, {"oid": "fbe366b0ce5b6ac2272a27fd76aea9ceb291b099", "url": "https://github.com/ionic-team/capacitor/commit/fbe366b0ce5b6ac2272a27fd76aea9ceb291b099", "message": "Merge branch 'main' into except", "committedDate": "2020-10-15T12:20:41Z", "type": "commit"}, {"oid": "275710fd6c1b6c5c8857354892aaa01a44a4f8bc", "url": "https://github.com/ionic-team/capacitor/commit/275710fd6c1b6c5c8857354892aaa01a44a4f8bc", "message": "chore(deps-dev): bump typedoc from 0.14.2 to 0.19.2 (#3684)", "committedDate": "2020-10-16T19:00:57Z", "type": "commit"}, {"oid": "68e872d3f845116ad0202dcd4e42673032b63092", "url": "https://github.com/ionic-team/capacitor/commit/68e872d3f845116ad0202dcd4e42673032b63092", "message": "feat(cli): add `capacitor run` command (#3599)", "committedDate": "2020-10-16T19:00:57Z", "type": "commit"}, {"oid": "e964471f2a8565023966b11d9e246a8bd2c2ba4e", "url": "https://github.com/ionic-team/capacitor/commit/e964471f2a8565023966b11d9e246a8bd2c2ba4e", "message": "add unavailable to swift plugin call helper", "committedDate": "2020-10-16T19:00:57Z", "type": "commit"}, {"oid": "b09f65704de3748a637f1cce217c6cf82f9af5b9", "url": "https://github.com/ionic-team/capacitor/commit/b09f65704de3748a637f1cce217c6cf82f9af5b9", "message": "allow message params", "committedDate": "2020-10-16T19:00:57Z", "type": "commit"}, {"oid": "835bceaa12b39a5953816a444cb4006c595a0a31", "url": "https://github.com/ionic-team/capacitor/commit/835bceaa12b39a5953816a444cb4006c595a0a31", "message": "make it work for objc", "committedDate": "2020-10-16T19:00:57Z", "type": "commit"}, {"oid": "b83bc77d149612839a7ab3c0df26541a70c20a0e", "url": "https://github.com/ionic-team/capacitor/commit/b83bc77d149612839a7ab3c0df26541a70c20a0e", "message": "remove unsupported browser exception in favor of unimplemented/unavailable helpers", "committedDate": "2020-10-16T19:00:57Z", "type": "commit"}, {"oid": "fe63476ba9766904bc16d099ff1d922bcd54f5a2", "url": "https://github.com/ionic-team/capacitor/commit/fe63476ba9766904bc16d099ff1d922bcd54f5a2", "message": "Merge branch 'main' into except", "committedDate": "2020-10-16T19:03:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3NzQ2Mw==", "url": "https://github.com/ionic-team/capacitor/pull/3673#discussion_r507677463", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              new (message: string, code: ExceptionCode): CapacitorException;\n          \n          \n            \n              new (message: string, code?: ExceptionCode): CapacitorException;\n          \n      \n    \n    \n  \n\nIf we plan to make all errors thrown by Capacitor to be Capacitor.Exception, then code should be optional.\nWith current implementation and this changes, all native Capacitor errors thrown are Capacitor.Exception, but only unimplemented and unavailable have codes, other errors have undefined code. But on web we can't create Capacitor.Exception errors without a code", "author": "jcesarmobile", "createdAt": "2020-10-19T11:38:37Z", "path": "core/src/definitions.ts", "diffHunk": "@@ -72,7 +72,37 @@ export interface PluginConfig {\n   name: string;\n }\n \n+export enum ExceptionCode {\n+  /**\n+   * API is not implemented.\n+   *\n+   * This means the API can't be used because:\n+   *   - it is not implemented at all\n+   *   - it is not implemented for the current platform\n+   */\n+  Unimplemented = 'UNIMPLEMENTED',\n+\n+  /**\n+   * API is not available.\n+   *\n+   * This means the API can't be used right now because:\n+   *   - it is currently missing a prerequisite, such as network connectivity\n+   *   - it requires a particular platform or browser version\n+   */\n+  Unavailable = 'UNAVAILABLE',\n+}\n+\n+export interface CapacitorException extends Error {\n+  code: ExceptionCode;\n+}\n+\n+declare const CapacitorException: {\n+  prototype: CapacitorException;\n+  new (message: string, code: ExceptionCode): CapacitorException;", "originalCommit": "fe63476ba9766904bc16d099ff1d922bcd54f5a2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3ODUzOQ==", "url": "https://github.com/ionic-team/capacitor/pull/3673#discussion_r507678539", "bodyText": "I don't think this will ever be the case (not implemented at all), when it's not implemented it's just because it's not possible in one or more platforms, but if it's not possible on any platform the method should just not exist.", "author": "jcesarmobile", "createdAt": "2020-10-19T11:40:44Z", "path": "core/src/definitions.ts", "diffHunk": "@@ -72,7 +72,37 @@ export interface PluginConfig {\n   name: string;\n }\n \n+export enum ExceptionCode {\n+  /**\n+   * API is not implemented.\n+   *\n+   * This means the API can't be used because:\n+   *   - it is not implemented at all", "originalCommit": "fe63476ba9766904bc16d099ff1d922bcd54f5a2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a3b6a32b24e95d000ac679f97210e24aae41be70", "url": "https://github.com/ionic-team/capacitor/commit/a3b6a32b24e95d000ac679f97210e24aae41be70", "message": "reword", "committedDate": "2020-10-19T17:29:29Z", "type": "commit"}, {"oid": "aa30bbcc2fcd6f0ce22175c48e29b07cf50f9562", "url": "https://github.com/ionic-team/capacitor/commit/aa30bbcc2fcd6f0ce22175c48e29b07cf50f9562", "message": "make code optional", "committedDate": "2020-10-19T17:30:06Z", "type": "commit"}, {"oid": "7edd3610c6dfd217641caa9813bb262685d44be5", "url": "https://github.com/ionic-team/capacitor/commit/7edd3610c6dfd217641caa9813bb262685d44be5", "message": "Merge branch 'main' into except", "committedDate": "2020-10-19T17:37:45Z", "type": "commit"}]}