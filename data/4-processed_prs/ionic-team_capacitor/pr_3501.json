{"pr_number": 3501, "pr_title": "refactor(cli): cleanup log messages", "pr_createdAt": "2020-09-02T23:20:52Z", "pr_url": "https://github.com/ionic-team/capacitor/pull/3501", "timeline": [{"oid": "e009f927667a0f0d18649ac3e213aafbbca4a7e2", "url": "https://github.com/ionic-team/capacitor/commit/e009f927667a0f0d18649ac3e213aafbbca4a7e2", "message": "refactor(log): cleanup messages", "committedDate": "2020-09-02T23:13:10Z", "type": "commit"}, {"oid": "dfb99f1e83ea0bec68cd38ecb4e85962bb602a79", "url": "https://github.com/ionic-team/capacitor/commit/dfb99f1e83ea0bec68cd38ecb4e85962bb602a79", "message": "use new output.write method", "committedDate": "2020-09-02T23:23:31Z", "type": "commit"}, {"oid": "93a10d0dfd2f6c8678fb28c6e952b5a30b59f1ea", "url": "https://github.com/ionic-team/capacitor/commit/93a10d0dfd2f6c8678fb28c6e952b5a30b59f1ea", "message": "colorize, consistent voice, etc", "committedDate": "2020-09-04T20:10:57Z", "type": "commit"}, {"oid": "794b7d514de8c056456a83779bb7cb78b1110ff5", "url": "https://github.com/ionic-team/capacitor/commit/794b7d514de8c056456a83779bb7cb78b1110ff5", "message": "task changes", "committedDate": "2020-09-04T22:03:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDgyNDc2OA==", "url": "https://github.com/ionic-team/capacitor/pull/3501#discussion_r484824768", "bodyText": "gradlew is for unix based OS, in windows it uses gradle.bat.\nI don't think we need to show this, but if we do, it should be accurate.", "author": "jcesarmobile", "createdAt": "2020-09-08T10:47:16Z", "path": "cli/src/android/add.ts", "diffHunk": "@@ -20,7 +22,7 @@ export async function addAndroid(config: Config) {\n     },\n   );\n \n-  await runTask(`Syncing Gradle`, async () => {\n+  await runTask(`Syncing Gradle with ${c.input('./gradlew')}`, async () => {", "originalCommit": "794b7d514de8c056456a83779bb7cb78b1110ff5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAwODc3Ng==", "url": "https://github.com/ionic-team/capacitor/pull/3501#discussion_r485008776", "bodyText": "Thanks, updated.\nI think we should show it because we do something similar for iOS (Updating iOS native dependencies with pod install), and it aligns with the goal that the Capacitor CLI should be more transparent/informative.", "author": "imhoffd", "createdAt": "2020-09-08T15:26:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDgyNDc2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDgzOTI2Mg==", "url": "https://github.com/ionic-team/capacitor/pull/3501#discussion_r484839262", "bodyText": "this message is different from the others, all should look the same", "author": "jcesarmobile", "createdAt": "2020-09-08T11:16:17Z", "path": "cli/src/ios/update.ts", "diffHunk": "@@ -117,9 +118,10 @@ export function generatePodFile(config: Config, plugins: Plugin[]) {\n   const capacitoriOSPath = resolveNode(config, '@capacitor/ios');\n   if (!capacitoriOSPath) {\n     logFatal(\n-      `Unable to find node_modules/@capacitor/ios. Are you sure @capacitor/ios is installed? This file is currently required for Capacitor to function.`,\n+      `Unable to find ${c.strong(\n+        '@capacitor/ios',\n+      )} in your project. Is it installed?`,", "originalCommit": "794b7d514de8c056456a83779bb7cb78b1110ff5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e4796b672ff284bc2ad0bacae48448fd2d9bdcd8", "url": "https://github.com/ionic-team/capacitor/commit/e4796b672ff284bc2ad0bacae48448fd2d9bdcd8", "message": "update \"unable to find\" messages for consistency", "committedDate": "2020-09-08T15:21:43Z", "type": "commit"}, {"oid": "326b37fd0b48f7c41391c553765c42fefc989bda", "url": "https://github.com/ionic-team/capacitor/commit/326b37fd0b48f7c41391c553765c42fefc989bda", "message": "use gradlew.bat for windows", "committedDate": "2020-09-08T15:24:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAxOTI5OQ==", "url": "https://github.com/ionic-team/capacitor/pull/3501#discussion_r485019299", "bodyText": "createLocalProperties does more than running gradlew, so if you want to specify what's going on, the new message is still not correct. Anyway, I don't see the point of extending this message and add this complexity to say that it's running gradlew\nalso, not related to the PR, but it made me realize that we run gradlew in several places, but that won't work on windows", "author": "jcesarmobile", "createdAt": "2020-09-08T15:42:08Z", "path": "cli/src/android/add.ts", "diffHunk": "@@ -22,9 +22,14 @@ export async function addAndroid(config: Config) {\n     },\n   );\n \n-  await runTask(`Syncing Gradle with ${c.input('./gradlew')}`, async () => {\n-    return createLocalProperties(config.android.platformDir);\n-  });\n+  await runTask(\n+    `Syncing Gradle with ${c.input(\n+      process.platform === 'win32' ? 'gradlew.bat' : './gradlew',\n+    )}`,", "originalCommit": "326b37fd0b48f7c41391c553765c42fefc989bda", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA0MDQzNQ==", "url": "https://github.com/ionic-team/capacitor/pull/3501#discussion_r485040435", "bodyText": "Good point. Maybe \"Syncing Gradle\" isn't the best message? In any case, I'll revert for now.\n\nwe run gradlew in several places, but that won't work on windows\n\nYeah, I noticed as well. We also aren't using cross-spawn which is necessary once subprocess invocations become more complex.", "author": "imhoffd", "createdAt": "2020-09-08T16:14:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTAxOTI5OQ=="}], "type": "inlineReview"}, {"oid": "a51065878434e75afaedf3918cbd06d907e9abea", "url": "https://github.com/ionic-team/capacitor/commit/a51065878434e75afaedf3918cbd06d907e9abea", "message": "revert to \"Syncing Gradle\"", "committedDate": "2020-09-08T16:14:36Z", "type": "commit"}]}