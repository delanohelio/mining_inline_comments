{"pr_number": 3241, "pr_title": "Plugin Template updates", "pr_createdAt": "2020-07-10T21:16:48Z", "pr_url": "https://github.com/ionic-team/capacitor/pull/3241", "timeline": [{"oid": "b7e62220c8b2245d6fe1865834344529502612a5", "url": "https://github.com/ionic-team/capacitor/commit/b7e62220c8b2245d6fe1865834344529502612a5", "message": "more clear examples", "committedDate": "2020-07-09T18:55:02Z", "type": "commit"}, {"oid": "a9a63e0063a311023c66ebdc8b11ec27e2b8767b", "url": "https://github.com/ionic-team/capacitor/commit/a9a63e0063a311023c66ebdc8b11ec27e2b8767b", "message": "fix whitespace", "committedDate": "2020-07-09T18:55:16Z", "type": "commit"}, {"oid": "e097bf73037b89d722c1ae4937fb3c238e2ff716", "url": "https://github.com/ionic-team/capacitor/commit/e097bf73037b89d722c1ae4937fb3c238e2ff716", "message": "lock in typescript version", "committedDate": "2020-07-10T22:04:19Z", "type": "commit"}, {"oid": "3feb678acbc94e3aa18b155161052af66774a781", "url": "https://github.com/ionic-team/capacitor/commit/3feb678acbc94e3aa18b155161052af66774a781", "message": "tsconfig cleanup", "committedDate": "2020-07-10T22:08:34Z", "type": "commit"}, {"oid": "4c5804595aca13600c5a90e7f0086a0d684c55ae", "url": "https://github.com/ionic-team/capacitor/commit/4c5804595aca13600c5a90e7f0086a0d684c55ae", "message": "rollup", "committedDate": "2020-07-10T22:37:03Z", "type": "commit"}, {"oid": "77ec74db4c112400be1e7cd075d926143da7c999", "url": "https://github.com/ionic-team/capacitor/commit/77ec74db4c112400be1e7cd075d926143da7c999", "message": "newlines", "committedDate": "2020-07-10T22:51:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzkwNzAyNA==", "url": "https://github.com/ionic-team/capacitor/pull/3241#discussion_r453907024", "bodyText": "The swift version can be bumped since 5.1 is the oldest version supported by Xcode 11.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              s.swift_version = '5.0'\n          \n          \n            \n              s.swift_version = '5.1'", "author": "ikeith", "createdAt": "2020-07-13T20:18:18Z", "path": "cli/src/tasks/new-plugin.ts", "diffHunk": "@@ -167,24 +167,24 @@ async function createIosPlugin(config: Config, pluginPath: string, domain: strin\n }\n \n function generatePodspec(config: Config, answers: NewPluginAnswers) {\n-  return `\n-  require 'json'\n-\n-  package = JSON.parse(File.read(File.join(__dir__, 'package.json')))\n-\n-  Pod::Spec.new do |s|\n-    s.name = '${fixName(answers.name)}'\n-    s.version = package['version']\n-    s.summary = package['description']\n-    s.license = package['license']\n-    s.homepage = package['repository']['url']\n-    s.author = package['author']\n-    s.source = { :git => package['repository']['url'], :tag => s.version.to_s }\n-    s.source_files = 'ios/Plugin/**/*.{swift,h,m,c,cc,mm,cpp}'\n-    s.ios.deployment_target  = '${config.ios.minVersion}'\n-    s.dependency 'Capacitor'\n-    s.swift_version = '5.0'\n-  end`;\n+  return `require 'json'\n+\n+package = JSON.parse(File.read(File.join(__dir__, 'package.json')))\n+\n+Pod::Spec.new do |s|\n+  s.name = '${fixName(answers.name)}'\n+  s.version = package['version']\n+  s.summary = package['description']\n+  s.license = package['license']\n+  s.homepage = package['repository']['url']\n+  s.author = package['author']\n+  s.source = { :git => package['repository']['url'], :tag => s.version.to_s }\n+  s.source_files = 'ios/Plugin/**/*.{swift,h,m,c,cc,mm,cpp}'\n+  s.ios.deployment_target  = '${config.ios.minVersion}'\n+  s.dependency 'Capacitor'\n+  s.swift_version = '5.0'", "originalCommit": "4c5804595aca13600c5a90e7f0086a0d684c55ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6f7f9c39f13762c1ccf9395794b2f48bff638601", "url": "https://github.com/ionic-team/capacitor/commit/6f7f9c39f13762c1ccf9395794b2f48bff638601", "message": "implement prettier", "committedDate": "2020-07-13T21:06:26Z", "type": "commit"}, {"oid": "240df53ebef94b6057141d0cc647540862c5f9c0", "url": "https://github.com/ionic-team/capacitor/commit/240df53ebef94b6057141d0cc647540862c5f9c0", "message": "Update cli/src/tasks/new-plugin.ts\n\nCo-authored-by: Ian Keith <iankeith@gmail.com>", "committedDate": "2020-07-13T21:20:35Z", "type": "commit"}, {"oid": "be5ab92ac891d0ec26c6370bcdbdc708745f790d", "url": "https://github.com/ionic-team/capacitor/commit/be5ab92ac891d0ec26c6370bcdbdc708745f790d", "message": "implement swiftlint", "committedDate": "2020-07-13T23:04:52Z", "type": "commit"}, {"oid": "69e7d5a7f7254076d2603da0039ac12f194072b5", "url": "https://github.com/ionic-team/capacitor/commit/69e7d5a7f7254076d2603da0039ac12f194072b5", "message": "Merge branch 'master' into plugin-template-updates", "committedDate": "2020-07-14T18:11:36Z", "type": "commit"}, {"oid": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a", "url": "https://github.com/ionic-team/capacitor/commit/6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a", "message": "Merge branch 'master' into plugin-template-updates", "committedDate": "2020-07-14T21:46:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTExOTc4Nw==", "url": "https://github.com/ionic-team/capacitor/pull/3241#discussion_r455119787", "bodyText": "isn't too much example?", "author": "jcesarmobile", "createdAt": "2020-07-15T14:58:11Z", "path": "cli/src/tasks/new-plugin.ts", "diffHunk": "@@ -46,19 +46,19 @@ export async function newPlugin(config: Config) {\n     {\n       type: 'input',\n       name: 'name',\n-      message: 'Plugin NPM name (kebab-case):',\n+      message: 'Plugin npm name (kebab-case. ex: capacitor-plugin-example):',\n       validate: requiredInput\n     },\n     {\n       type: 'input',\n       name: 'domain',\n-      message: 'Plugin id (domain-style syntax. ex: com.example.plugin)',\n+      message: 'Plugin id (domain-style syntax. ex: com.example.plugins.example)',", "originalCommit": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyMTAwMw==", "url": "https://github.com/ionic-team/capacitor/pull/3241#discussion_r455121003", "bodyText": "since you are wrapping everything with '', shouldn't src be wrapped too?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    src: 'ios',\n          \n          \n            \n                    'src': 'ios',", "author": "jcesarmobile", "createdAt": "2020-07-15T14:59:57Z", "path": "cli/src/tasks/new-plugin.ts", "diffHunk": "@@ -221,47 +221,61 @@ function generateAndroidManifest(domain: string, pluginPath: string) {\n \n function generatePackageJSON(answers: NewPluginAnswers, cliVersion: string) {\n   return {\n-    name: answers.name,\n-    version: '0.0.1',\n-    description: answers.description,\n-    main: 'dist/esm/index.js',\n-    types: 'dist/esm/index.d.ts',\n-    scripts: {\n-      'build': 'npm run clean && tsc',\n+    'name': answers.name,\n+    'version': '0.0.1',\n+    'description': answers.description,\n+    'main': 'dist/plugin.js',\n+    'module': 'dist/esm/index.js',\n+    'types': 'dist/esm/index.d.ts',\n+    'scripts': {\n+      'lint': 'npm run prettier -- --check && npm run swiftlint -- lint',\n+      'prettier': 'prettier \"**/*.{css,html,ts,js,java}\"',\n+      'swiftlint': 'swiftlint',\n+      'build': 'npm run clean && tsc && rollup -c rollup.config.js',\n       'clean': 'rimraf ./dist',\n       'watch': 'tsc --watch',\n       'prepublishOnly': 'npm run build'\n     },\n-    author: answers.author,\n-    license: answers.license,\n-    dependencies: {\n-      '@capacitor/core': `^${cliVersion}`\n-    },\n-    devDependencies: {\n-      'rimraf': '^3.0.0',\n-      'typescript': '^3.2.4',\n+    'author': answers.author,\n+    'license': answers.license,\n+    'devDependencies': {\n+      '@capacitor/android': `^${cliVersion}`,\n+      '@capacitor/core': `^${cliVersion}`,\n       '@capacitor/ios': `^${cliVersion}`,\n-      '@capacitor/android': `^${cliVersion}`\n+      '@ionic/prettier-config': '^1.0.0',\n+      '@ionic/swiftlint-config': '^1.0.0',\n+      '@rollup/plugin-node-resolve': '^8.1.0',\n+      'prettier': '^2.0.5',\n+      'prettier-plugin-java': '^0.8.0',\n+      'rimraf': '^3.0.0',\n+      'rollup': '^2.21.0',\n+      'swiftlint': '^0.39.4',\n+      'typescript': '~3.8.3'\n+    },\n+    'peerDependencies': {\n+      '@capacitor/core': `^${cliVersion}`\n     },\n-    files: [\n+    'files': [\n       'dist/',\n       'ios/',\n       'android/',\n       `${fixName(answers.name)}.podspec`\n     ],\n-    keywords: [\n+    'keywords': [\n       'capacitor',\n       'plugin',\n       'native'\n     ],\n-    capacitor: {\n-      ios: {\n+    'capacitor': {\n+      'ios': {\n         src: 'ios',", "originalCommit": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyMjAwNg==", "url": "https://github.com/ionic-team/capacitor/pull/3241#discussion_r455122006", "bodyText": "Not related to the PR itself, but if the () is not really needed (tested and seems to work fine without it), we should probably remove it from all our core plugins, they all have it", "author": "jcesarmobile", "createdAt": "2020-07-15T15:01:27Z", "path": "plugin-template/android/Plugin.java", "diffHunk": "@@ -6,10 +6,10 @@\n import com.getcapacitor.PluginCall;\n import com.getcapacitor.PluginMethod;\n \n-@NativePlugin()\n+@NativePlugin", "originalCommit": "6987cfdd93a3b7a3c9cdfe11c4ba87c14ccd8f0a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE2MTU1Ng==", "url": "https://github.com/ionic-team/capacitor/pull/3241#discussion_r455161556", "bodyText": "Prettier will remove them automatically as it did for the plugin template", "author": "imhoffd", "createdAt": "2020-07-15T16:00:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTEyMjAwNg=="}], "type": "inlineReview"}, {"oid": "f38bed2e2d28300586be9da25f181e8d7e8f918c", "url": "https://github.com/ionic-team/capacitor/commit/f38bed2e2d28300586be9da25f181e8d7e8f918c", "message": "wrap src with single quotes", "committedDate": "2020-07-15T16:03:44Z", "type": "commit"}, {"oid": "5db61c7f4a9cc526904a457d9a2759f1fd812ae4", "url": "https://github.com/ionic-team/capacitor/commit/5db61c7f4a9cc526904a457d9a2759f1fd812ae4", "message": "use mycompany for domain name", "committedDate": "2020-07-15T16:03:44Z", "type": "commit"}, {"oid": "77c9391b4b13c3cee8bcbe86bb660105d8910d60", "url": "https://github.com/ionic-team/capacitor/commit/77c9391b4b13c3cee8bcbe86bb660105d8910d60", "message": "update swiftlint", "committedDate": "2020-07-16T18:12:44Z", "type": "commit"}]}