{"pr_number": 3409, "pr_title": "Remove npm/yarn", "pr_createdAt": "2020-08-11T21:49:31Z", "pr_url": "https://github.com/ionic-team/capacitor/pull/3409", "timeline": [{"oid": "8ac41fb6743ac58eeb51b254ec3eeeb27be8cff4", "url": "https://github.com/ionic-team/capacitor/commit/8ac41fb6743ac58eeb51b254ec3eeeb27be8cff4", "message": "wip", "committedDate": "2020-08-10T21:50:59Z", "type": "commit"}, {"oid": "64141f4ae4f13e7547cd20d86ca22d61336ec07b", "url": "https://github.com/ionic-team/capacitor/commit/64141f4ae4f13e7547cd20d86ca22d61336ec07b", "message": "wip", "committedDate": "2020-08-11T21:23:38Z", "type": "commit"}, {"oid": "3202a1a5eaab7cb2144d64301474914be4558a49", "url": "https://github.com/ionic-team/capacitor/commit/3202a1a5eaab7cb2144d64301474914be4558a49", "message": "update tests to install platform", "committedDate": "2020-08-11T21:58:33Z", "type": "commit"}, {"oid": "4054104c7f6ecfb036c0e13eb533226ccce2a331", "url": "https://github.com/ionic-team/capacitor/commit/4054104c7f6ecfb036c0e13eb533226ccce2a331", "message": "install for create", "committedDate": "2020-08-11T23:48:09Z", "type": "commit"}, {"oid": "c29b361d180c52f108b2207c3daaac7c3dbf5134", "url": "https://github.com/ionic-team/capacitor/commit/c29b361d180c52f108b2207c3daaac7c3dbf5134", "message": "install platforms", "committedDate": "2020-08-12T00:12:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQzMDE0NQ==", "url": "https://github.com/ionic-team/capacitor/pull/3409#discussion_r471430145", "bodyText": "can we make this not be hardcoded?", "author": "jcesarmobile", "createdAt": "2020-08-17T11:59:22Z", "path": "app-template/package.json", "diffHunk": "@@ -3,13 +3,19 @@\n   \"version\": \"1.0.0\",\n   \"description\": \"An Amazing Capacitor App\",\n   \"main\": \"index.js\",\n-  \"scripts\": {\n-    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n-  },\n   \"keywords\": [\n     \"capacitor\",\n     \"mobile\"\n   ],\n+  \"scripts\": {\n+    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n+  },\n+  \"dependencies\": {\n+    \"@capacitor/core\": \"^3.0.0-alpha.0\"", "originalCommit": "c29b361d180c52f108b2207c3daaac7c3dbf5134", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTY2MTQyOA==", "url": "https://github.com/ionic-team/capacitor/pull/3409#discussion_r471661428", "bodyText": "I plan to do this in #3416", "author": "imhoffd", "createdAt": "2020-08-17T17:53:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQzMDE0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQzMTAxMw==", "url": "https://github.com/ionic-team/capacitor/pull/3409#discussion_r471431013", "bodyText": "we shouldn't tell users to use npm to install the missing package", "author": "jcesarmobile", "createdAt": "2020-08-17T12:01:05Z", "path": "cli/src/common.ts", "diffHunk": "@@ -62,6 +62,26 @@ export async function checkPackage(_config: Config): Promise<string | null> {\n   return null;\n }\n \n+export async function checkCapacitorPackage(\n+  config: Config,\n+  packageName: string,\n+): Promise<string | null> {\n+  const pkg = await getCapacitorPackage(config, packageName);\n+\n+  if (!pkg) {\n+    return (\n+      `Could not find the ${chalk.bold(\n+        packageName,\n+      )} platform. Does it need to be installed?\\n\\n` +\n+      `    ${chalk.bold(`npm install @capacitor/${packageName}`)}${chalk.dim(", "originalCommit": "c29b361d180c52f108b2207c3daaac7c3dbf5134", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTY2MjY1MQ==", "url": "https://github.com/ionic-team/capacitor/pull/3409#discussion_r471662651", "bodyText": "We need some way of telling them to install the dependency. A vast majority of people will be able to copy/paste the command to resolve the issue, and the rest can translate the npm commands to their package manager of choice.", "author": "imhoffd", "createdAt": "2020-08-17T17:56:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQzMTAxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTY2ODU2Mw==", "url": "https://github.com/ionic-team/capacitor/pull/3409#discussion_r471668563", "bodyText": "But a lot of people just use whatever their framework uses, not their choice, if you tell them to npm install, they will npm install despite they might be using other thing.\nYou can see a lot of people running ionic cordova plugin add plugin-id in capacitor projects because they read it in ionic docs that's how you install a Cordova plugin. But that's not really the way of installing Cordova plugins in Capacitor projects.", "author": "jcesarmobile", "createdAt": "2020-08-17T18:06:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQzMTAxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQzMTUwMQ==", "url": "https://github.com/ionic-team/capacitor/pull/3409#discussion_r471431501", "bodyText": "same, we shouldn't tell to npm install", "author": "jcesarmobile", "createdAt": "2020-08-17T12:02:04Z", "path": "cli/src/common.ts", "diffHunk": "@@ -432,10 +421,12 @@ export async function printNextSteps(config: Config, appDir: string) {\n   if (appDir !== '') {\n     log(`Next steps:`);\n     log('');\n-    log(chalk`cd {bold ./${appDir}}`);\n+    log(chalk`  cd {bold ./${appDir}}`);\n+    log(`  npm install`);", "originalCommit": "c29b361d180c52f108b2207c3daaac7c3dbf5134", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4ba4438899dc7da4053b2d24b045fa31afec828f", "url": "https://github.com/ionic-team/capacitor/commit/4ba4438899dc7da4053b2d24b045fa31afec828f", "message": "don't provide example install command", "committedDate": "2020-08-17T20:32:38Z", "type": "commit"}, {"oid": "1c103934c90a61bb60896ce06760a2638f042c23", "url": "https://github.com/ionic-team/capacitor/commit/1c103934c90a61bb60896ce06760a2638f042c23", "message": "generalize npm install", "committedDate": "2020-08-17T20:37:24Z", "type": "commit"}, {"oid": "774cc23eaffb9b94e8c51912cf162fc4705f9b42", "url": "https://github.com/ionic-team/capacitor/commit/774cc23eaffb9b94e8c51912cf162fc4705f9b42", "message": "more generalization", "committedDate": "2020-08-17T20:40:08Z", "type": "commit"}, {"oid": "75bd07eb8e1dff302b1e182a655260c15d744ec1", "url": "https://github.com/ionic-team/capacitor/commit/75bd07eb8e1dff302b1e182a655260c15d744ec1", "message": "add latest deps", "committedDate": "2020-08-17T20:45:46Z", "type": "commit"}, {"oid": "aad8858d1cab7bf0575006b59d334389e588a983", "url": "https://github.com/ionic-team/capacitor/commit/aad8858d1cab7bf0575006b59d334389e588a983", "message": "Merge branch 'main' into remove-npm", "committedDate": "2020-08-17T21:58:28Z", "type": "commit"}]}