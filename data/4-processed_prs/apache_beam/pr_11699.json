{"pr_number": 11699, "pr_title": "Update the range for pyarrow to qualify pyarrow 0.17.x", "pr_createdAt": "2020-05-13T21:14:12Z", "pr_url": "https://github.com/apache/beam/pull/11699", "timeline": [{"oid": "ff98ec521305967e58dcef8fe326a209032ce3bd", "url": "https://github.com/apache/beam/commit/ff98ec521305967e58dcef8fe326a209032ce3bd", "message": "Update the range for pyarrow to qualify pyarrow 0.17.x", "committedDate": "2020-05-13T21:05:50Z", "type": "commit"}, {"oid": "be41f42ddadf199c3d81d08006cd830d227261c7", "url": "https://github.com/apache/beam/commit/be41f42ddadf199c3d81d08006cd830d227261c7", "message": "fixed a bug in parquetio: buffers() could return Nones", "committedDate": "2020-05-13T23:13:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4ODIwOA==", "url": "https://github.com/apache/beam/pull/11699#discussion_r424788208", "bodyText": "Thanks for tracking this down!\nI wonder what changed in 0.17 to reveal this. Maybe the parquet writer (which we use to generate test data) wasn't eliding the null buffer before?", "author": "TheNeuralBit", "createdAt": "2020-05-13T23:30:15Z", "path": "sdks/python/apache_beam/io/parquetio.py", "diffHunk": "@@ -567,5 +567,6 @@ def _flush_buffer(self):\n     size = 0\n     for x in arrays:\n       for b in x.buffers():\n-        size = size + b.size\n+        if b is not None:\n+          size = size + b.size", "originalCommit": "be41f42ddadf199c3d81d08006cd830d227261c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg1NTMyMA==", "url": "https://github.com/apache/beam/pull/11699#discussion_r424855320", "bodyText": "Maybe the array factory function (pa.array()) is smarter (x there was created just several lines ago, using that factory function)", "author": "brills", "createdAt": "2020-05-14T03:50:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4ODIwOA=="}], "type": "inlineReview"}]}