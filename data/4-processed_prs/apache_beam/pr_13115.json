{"pr_number": 13115, "pr_title": "Update go protocol buffers to v2.", "pr_createdAt": "2020-10-14T19:37:22Z", "pr_url": "https://github.com/apache/beam/pull/13115", "timeline": [{"oid": "653b5dab2e3b7407a3cb5039293b248908180151", "url": "https://github.com/apache/beam/commit/653b5dab2e3b7407a3cb5039293b248908180151", "message": "Update go protocol buffers to v2.", "committedDate": "2020-10-19T18:46:56Z", "type": "commit"}, {"oid": "ee98cac0f9a990eb003a2182f41f635c405c9f74", "url": "https://github.com/apache/beam/commit/ee98cac0f9a990eb003a2182f41f635c405c9f74", "message": "Update Go SDK Harness with renamed proto.", "committedDate": "2020-10-19T18:46:56Z", "type": "commit"}, {"oid": "ee98cac0f9a990eb003a2182f41f635c405c9f74", "url": "https://github.com/apache/beam/commit/ee98cac0f9a990eb003a2182f41f635c405c9f74", "message": "Update Go SDK Harness with renamed proto.", "committedDate": "2020-10-19T18:46:56Z", "type": "forcePushed"}, {"oid": "cb9499ed61242a7ebf25bdcbe419e56c0c2ec04a", "url": "https://github.com/apache/beam/commit/cb9499ed61242a7ebf25bdcbe419e56c0c2ec04a", "message": "!fixup", "committedDate": "2020-10-19T18:59:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODAxMzM4MQ==", "url": "https://github.com/apache/beam/pull/13115#discussion_r508013381", "bodyText": "not really a go expert, is this valid? Or did you replace the string incorrectly?", "author": "ajamato", "createdAt": "2020-10-19T19:36:22Z", "path": "model/pipeline/src/main/proto/standard_window_fns.proto", "diffHunk": "@@ -25,7 +25,7 @@ syntax = \"proto3\";\n \n package org.apache.beam.model.pipeline.v1;\n \n-option go_package = \"pipeline_v1\";\n+option go_package = \"github.com/apache/beam/sdks/go/pkg/beam/model/pipeline_v1;pipeline_v1\";", "originalCommit": "cb9499ed61242a7ebf25bdcbe419e56c0c2ec04a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODAxNjM2OQ==", "url": "https://github.com/apache/beam/pull/13115#discussion_r508016369", "bodyText": "This is valid, but it's not go, it's proto option syntax. Unfortunately it's only used in places and never fully described AFAICT and I don't want to dig into the C++ source to find out.\nYou can see an example of it here, and search for \"go_package\": https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.descriptor.pb?hl=en", "author": "lostluck", "createdAt": "2020-10-19T19:40:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODAxMzM4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODAxODI2MA==", "url": "https://github.com/apache/beam/pull/13115#discussion_r508018260", "bodyText": "If you look bit further you can see the actual protocol buffer field for go_package (cus apparently Protos are self describing on multiple levels).\nPart of the reason this change is so big is because in the last year the implementation of Go protocol buffers changed dramatically, and apparently they're moving to recommending the full package path for go_packages now. This is overall good since it means it will be able to work with Go Modules eventually. Who knows, Maybe it eventually saves us from needing to regenerate them.", "author": "lostluck", "createdAt": "2020-10-19T19:44:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODAxMzM4MQ=="}], "type": "inlineReview"}]}