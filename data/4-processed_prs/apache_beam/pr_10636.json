{"pr_number": 10636, "pr_title": "[BEAM-9184] Add ToSet combiner", "pr_createdAt": "2020-01-18T16:09:49Z", "pr_url": "https://github.com/apache/beam/pull/10636", "timeline": [{"oid": "12dce74f163fa220405d17c05bd13145c0974d05", "url": "https://github.com/apache/beam/commit/12dce74f163fa220405d17c05bd13145c0974d05", "message": "Add ToSet combiner.", "committedDate": "2020-01-18T15:48:31Z", "type": "commit"}, {"oid": "008826110a3e1d40dfe5aa8b06f53edf38f7b591", "url": "https://github.com/apache/beam/commit/008826110a3e1d40dfe5aa8b06f53edf38f7b591", "message": "Fix extra list brackets.", "committedDate": "2020-01-18T16:06:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MjM1NA==", "url": "https://github.com/apache/beam/pull/10636#discussion_r369662354", "bodyText": "Is this pylint directive still required with the version of pylint Beam is using today?", "author": "tvalentyn", "createdAt": "2020-01-22T16:23:27Z", "path": "sdks/python/apache_beam/transforms/combiners.py", "diffHunk": "@@ -802,6 +804,35 @@ def extract_output(self, accumulator):\n     return accumulator\n \n \n+class ToSet(ptransform.PTransform):\n+  \"\"\"A global CombineFn that condenses a PCollection into a set.\"\"\"\n+\n+  def __init__(self, label='ToSet'):  # pylint: disable=useless-super-delegation", "originalCommit": "008826110a3e1d40dfe5aa8b06f53edf38f7b591", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2NDQyNg==", "url": "https://github.com/apache/beam/pull/10636#discussion_r369664426", "bodyText": "Copied from line 775 (now line 777). Do you want me to experiment? A change removing this seems like it should be a separate change.", "author": "sorensenjs", "createdAt": "2020-01-22T16:26:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MjM1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgwMjMwNA==", "url": "https://github.com/apache/beam/pull/10636#discussion_r369802304", "bodyText": "Removing this produces\n************* Module apache_beam.transforms.combiners\napache_beam/transforms/combiners.py:810:2: W0235: Useless super delegation in method 'init' (useless-super-delegation)", "author": "sorensenjs", "createdAt": "2020-01-22T21:04:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MjM1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg0OTM5Ng==", "url": "https://github.com/apache/beam/pull/10636#discussion_r369849396", "bodyText": "Thanks for checking.", "author": "tvalentyn", "createdAt": "2020-01-22T22:51:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MjM1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU0NDk2Ng==", "url": "https://github.com/apache/beam/pull/10636#discussion_r370544966", "bodyText": "Saw this in JIRA and made the exact same implementation before I realised the PR was already out :)\nSmall comment: there's a tiny typo here that doesn't really matter. Should be 'to set'.", "author": "EDjur", "createdAt": "2020-01-24T09:41:58Z", "path": "sdks/python/apache_beam/transforms/combiners_test.py", "diffHunk": "@@ -346,6 +346,18 @@ def match(actual):\n     assert_that(result, matcher())\n     pipeline.run()\n \n+  def test_to_set(self):\n+    pipeline = TestPipeline()\n+    the_list = [6, 3, 1, 1, 9, 1, 5, 2, 0, 6]\n+    pcoll = pipeline | 'start' >> Create(the_list)\n+    result = pcoll | 'to list' >> combine.ToSet()", "originalCommit": "008826110a3e1d40dfe5aa8b06f53edf38f7b591", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c57e25c019af3b77549d24c1273ea233c52453e3", "url": "https://github.com/apache/beam/commit/c57e25c019af3b77549d24c1273ea233c52453e3", "message": "Address cut/paste comment issue.", "committedDate": "2020-01-24T11:30:06Z", "type": "commit"}]}