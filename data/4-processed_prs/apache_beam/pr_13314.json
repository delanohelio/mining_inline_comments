{"pr_number": 13314, "pr_title": "[BEAM-11253] Account for overheads for small/empty Dataframes and fix ReBatch.", "pr_createdAt": "2020-11-12T02:07:17Z", "pr_url": "https://github.com/apache/beam/pull/13314", "timeline": [{"oid": "538179b111385536af69e27bd501c56b15327acf", "url": "https://github.com/apache/beam/commit/538179b111385536af69e27bd501c56b15327acf", "message": "Account for overheads for small/empty PCollections.", "committedDate": "2020-11-12T02:07:27Z", "type": "commit"}, {"oid": "538179b111385536af69e27bd501c56b15327acf", "url": "https://github.com/apache/beam/commit/538179b111385536af69e27bd501c56b15327acf", "message": "Account for overheads for small/empty PCollections.", "committedDate": "2020-11-12T02:07:27Z", "type": "forcePushed"}, {"oid": "1bd31334c9fdd7503cf1ad29af12928dd8421e6e", "url": "https://github.com/apache/beam/commit/1bd31334c9fdd7503cf1ad29af12928dd8421e6e", "message": "Actually flush batches in rebatch.\n\nThough this does not impact correctness, it causes memory issues\nas batches were not acutally flushed until the end of the bundle.", "committedDate": "2020-11-12T16:36:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI2MDYzOQ==", "url": "https://github.com/apache/beam/pull/13314#discussion_r522260639", "bodyText": "I assume this was determined empirically?", "author": "TheNeuralBit", "createdAt": "2020-11-12T16:55:35Z", "path": "sdks/python/apache_beam/dataframe/transforms.py", "diffHunk": "@@ -45,6 +45,7 @@\n MAX_PARTITIONS = 1000\n DEFAULT_PARTITIONS = 100\n MIN_PARTITIONS = 10\n+PER_COL_OVERHEAD = 1000", "originalCommit": "1bd31334c9fdd7503cf1ad29af12928dd8421e6e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI3MjY4Mg==", "url": "https://github.com/apache/beam/pull/13314#discussion_r522272682", "bodyText": "Yeah. To within an order of magnitude at least, rounded up.", "author": "robertwb", "createdAt": "2020-11-12T17:12:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI2MDYzOQ=="}], "type": "inlineReview"}]}