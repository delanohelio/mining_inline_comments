{"pr_number": 11507, "pr_title": "[BEAM-7923] Support docker screendiff integration tests", "pr_createdAt": "2020-04-23T18:07:13Z", "pr_url": "https://github.com/apache/beam/pull/11507", "timeline": [{"oid": "82d17fada08602bfc16a0350e3882fc3bf39b845", "url": "https://github.com/apache/beam/commit/82d17fada08602bfc16a0350e3882fc3bf39b845", "message": "[BEAM-7923] Support docker screendiff integration tests\n\n1. Added 2 more chrome options so that the tests work within docker.\n2. Updated the golden screenshot.\n\nChange-Id: I9973b53d4aefec94898b55ac3a3625b7b6dcc263", "committedDate": "2020-04-23T18:00:53Z", "type": "commit"}, {"oid": "58d24fb9d4f7640f33e0ad92e447e708df88e0ae", "url": "https://github.com/apache/beam/commit/58d24fb9d4f7640f33e0ad92e447e708df88e0ae", "message": "Added explicit wait for facets elements to be rendered and updated the golden image.", "committedDate": "2020-04-23T20:27:47Z", "type": "commit"}, {"oid": "ee14564c84f9c947ad305bbebbaad5970ec9befd", "url": "https://github.com/apache/beam/commit/ee14564c84f9c947ad305bbebbaad5970ec9befd", "message": "fix lint", "committedDate": "2020-04-23T21:21:05Z", "type": "commit"}, {"oid": "e6870d67a80a017b69e9cf3c0de5d1a2eea10f87", "url": "https://github.com/apache/beam/commit/e6870d67a80a017b69e9cf3c0de5d1a2eea10f87", "message": "Updated to use a fixed version of PIL and updated the golden image", "committedDate": "2020-04-24T00:06:02Z", "type": "commit"}, {"oid": "bbeef11f9f0ac01b8f359cba9bc96610dee493b5", "url": "https://github.com/apache/beam/commit/bbeef11f9f0ac01b8f359cba9bc96610dee493b5", "message": "Enforce a fixed color profile for chrome.", "committedDate": "2020-04-24T01:41:22Z", "type": "commit"}, {"oid": "2052beb1160aa9179ab749beb6c4f328adce52b6", "url": "https://github.com/apache/beam/commit/2052beb1160aa9179ab749beb6c4f328adce52b6", "message": "Updated golden screenshot once Roboto Mono font is installed.", "committedDate": "2020-04-24T04:25:21Z", "type": "commit"}, {"oid": "d9953dc223f249028b70c9dbbce9cd3573704b2b", "url": "https://github.com/apache/beam/commit/d9953dc223f249028b70c9dbbce9cd3573704b2b", "message": "Added a threshold for fuzzy match.\n\nChange-Id: I32202d7a959c0df8571621a75f9c564f641fc5b9", "committedDate": "2020-04-24T04:58:05Z", "type": "commit"}, {"oid": "014873d0693e79f8b09918c60ff744b2f95a9b3f", "url": "https://github.com/apache/beam/commit/014873d0693e79f8b09918c60ff744b2f95a9b3f", "message": "Added support of MacOS(Darwin) and Linux screen diff.\n\nChange-Id: I8397eb0b9ada041a78c455d1afba83e5a9b696e4", "committedDate": "2020-04-24T19:16:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgyMDM5NQ==", "url": "https://github.com/apache/beam/pull/11507#discussion_r414820395", "bodyText": "why?", "author": "aaltay", "createdAt": "2020-04-24T19:43:59Z", "path": "sdks/python/setup.py", "diffHunk": "@@ -229,6 +229,8 @@ def get_version():\n     'selenium>=3.141.0,<4',\n     'needle>=0.5.0,<1',\n     'chromedriver-binary>=80,<81',\n+    # use a fixed version of PIL for different python versions\n+    'pillow==7.1.1',", "originalCommit": "014873d0693e79f8b09918c60ff744b2f95a9b3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgyMTYxMQ==", "url": "https://github.com/apache/beam/pull/11507#discussion_r414821611", "bodyText": "Python comes with PIL, but different versions of Python has different PIL versions.\nTo rule out the difference when taking screenshot, we use a fixed version of PIL explicitly for testing.", "author": "KevinGG", "createdAt": "2020-04-24T19:46:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgyMDM5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0NzUwMQ==", "url": "https://github.com/apache/beam/pull/11507#discussion_r414847501", "bodyText": "Do we need to pin it? Pinning usually results in other issues. Maybe less so here because it is a test dependency.", "author": "aaltay", "createdAt": "2020-04-24T20:35:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgyMDM5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk5OTg4OA==", "url": "https://github.com/apache/beam/pull/11507#discussion_r415999888", "bodyText": "I've made it any version under a major version >=7,<8.", "author": "KevinGG", "createdAt": "2020-04-27T17:18:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgyMDM5NQ=="}], "type": "inlineReview"}, {"oid": "8bad5b0b887f13cacf781d5187aacc50e6f703ef", "url": "https://github.com/apache/beam/commit/8bad5b0b887f13cacf781d5187aacc50e6f703ef", "message": "Update the golden for Linux platform.", "committedDate": "2020-04-25T01:38:46Z", "type": "commit"}, {"oid": "174dc41f215ff7c63bf6fb9a3e3a7a68d05053c3", "url": "https://github.com/apache/beam/commit/174dc41f215ff7c63bf6fb9a3e3a7a68d05053c3", "message": "Allow installing pillow in a range of versions.\n\nChange-Id: Iecd3800a0944501baa8b9cd4931b3afc4aeb41a0", "committedDate": "2020-04-27T16:54:34Z", "type": "commit"}]}