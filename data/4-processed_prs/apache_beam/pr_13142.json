{"pr_number": 13142, "pr_title": "[BEAM-5939] - Deduplicate constants", "pr_createdAt": "2020-10-19T22:24:49Z", "pr_url": "https://github.com/apache/beam/pull/13142", "timeline": [{"oid": "ea4400c460485ecbe7a5523598ad5736bccd9efc", "url": "https://github.com/apache/beam/commit/ea4400c460485ecbe7a5523598ad5736bccd9efc", "message": "[BEAM-5939] - Deduplicate constants", "committedDate": "2020-10-21T14:09:50Z", "type": "forcePushed"}, {"oid": "0ea7d44d9a472549b2b1dd49a2c6c74c82527b7e", "url": "https://github.com/apache/beam/commit/0ea7d44d9a472549b2b1dd49a2c6c74c82527b7e", "message": "#5939 fix linting errors", "committedDate": "2020-10-21T07:27:07Z", "type": "forcePushed"}, {"oid": "720e1f965a29bb54359b81c49c605c0d3348eb40", "url": "https://github.com/apache/beam/commit/720e1f965a29bb54359b81c49c605c0d3348eb40", "message": "[BEAM-5939] - Deduplicate constants\n\n[BEAM-5939] - Deduplicate constants", "committedDate": "2020-10-21T14:16:23Z", "type": "forcePushed"}, {"oid": "846b3839a93813fcea739ea29d2c33fb68635f06", "url": "https://github.com/apache/beam/commit/846b3839a93813fcea739ea29d2c33fb68635f06", "message": "[BEAM-5939] - Deduplicate constants", "committedDate": "2020-10-28T08:09:05Z", "type": "commit"}, {"oid": "846b3839a93813fcea739ea29d2c33fb68635f06", "url": "https://github.com/apache/beam/commit/846b3839a93813fcea739ea29d2c33fb68635f06", "message": "[BEAM-5939] - Deduplicate constants", "committedDate": "2020-10-28T08:09:05Z", "type": "forcePushed"}, {"oid": "846b3839a93813fcea739ea29d2c33fb68635f06", "url": "https://github.com/apache/beam/commit/846b3839a93813fcea739ea29d2c33fb68635f06", "message": "[BEAM-5939] - Deduplicate constants", "committedDate": "2020-10-28T08:09:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc5MzU3Mw==", "url": "https://github.com/apache/beam/pull/13142#discussion_r513793573", "bodyText": "Let's rename this to:\nSTAGED_SDK_SOURCES_FILENAME = 'dataflow_python_sdk.tar'  # Current value is hardcoded in Dataflow internal infrastructure; please don't change without a review from Dataflow maintainers.", "author": "tvalentyn", "createdAt": "2020-10-28T22:13:59Z", "path": "sdks/python/apache_beam/runners/internal/names.py", "diffHunk": "@@ -20,8 +20,11 @@\n # All constants are for internal use only; no backwards-compatibility\n # guarantees.\n \n+DATAFLOW_SDK_TARBALL_FILE = 'dataflow_python_sdk.tar'", "originalCommit": "846b3839a93813fcea739ea29d2c33fb68635f06", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgwMjMwNg==", "url": "https://github.com/apache/beam/pull/13142#discussion_r513802306", "bodyText": "I think we could avoid importing all of these except for PICKLED_MAIN_SESSION_FILE, and update all references in Beam codeabase to use apache_beam.runners.internal.names instead, similar what we do in apiclient.py.\n# pylint: disable=unused-import\n# Used by Dataflow legacy worker. \nfrom apache_beam.runners.internal.names import PICKLED_MAIN_SESSION_FILE", "author": "tvalentyn", "createdAt": "2020-10-28T22:35:28Z", "path": "sdks/python/apache_beam/runners/dataflow/internal/names.py", "diffHunk": "@@ -27,7 +27,13 @@\n # Standard file names used for staging files.\n from builtins import object\n \n-DATAFLOW_SDK_TARBALL_FILE = 'dataflow_python_sdk.tar'\n+# pylint: disable=unused-import\n+from apache_beam.runners.internal.names import DATAFLOW_SDK_TARBALL_FILE\n+from apache_beam.runners.internal.names import PICKLED_MAIN_SESSION_FILE", "originalCommit": "846b3839a93813fcea739ea29d2c33fb68635f06", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDE4MTQxMg==", "url": "https://github.com/apache/beam/pull/13142#discussion_r514181412", "bodyText": "@tvalentyn  Thank you for your help. Are recent changes ok?", "author": "tszerszen", "createdAt": "2020-10-29T11:16:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgwMjMwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDUwNTU5NQ==", "url": "https://github.com/apache/beam/pull/13142#discussion_r514505595", "bodyText": "Please add the  comment # Referenced by Dataflow legacy worker.  before from apache_beam.runners.internal.names import PICKLED_MAIN_SESSION_FILE", "author": "tvalentyn", "createdAt": "2020-10-29T19:16:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzgwMjMwNg=="}], "type": "inlineReview"}, {"oid": "8e6346d132c362770fc72ce04e684600eb006529", "url": "https://github.com/apache/beam/commit/8e6346d132c362770fc72ce04e684600eb006529", "message": "[BEAM-5939] - Deduplicate constants", "committedDate": "2020-10-29T07:28:21Z", "type": "commit"}, {"oid": "762cb65fbf49d3ee9dd9cf29527e91e92cb25c38", "url": "https://github.com/apache/beam/commit/762cb65fbf49d3ee9dd9cf29527e91e92cb25c38", "message": "[BEAM-5939] - Deduplicate constants", "committedDate": "2020-10-29T09:48:29Z", "type": "commit"}, {"oid": "57df93a21803e1d06abeee2669e78a45c46ef95e", "url": "https://github.com/apache/beam/commit/57df93a21803e1d06abeee2669e78a45c46ef95e", "message": "[BEAM-5939] - Deduplicate constants", "committedDate": "2020-10-30T10:27:51Z", "type": "commit"}]}