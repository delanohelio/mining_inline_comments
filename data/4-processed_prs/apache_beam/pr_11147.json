{"pr_number": 11147, "pr_title": "[BEAM-7923] Support dict and iterable PCollections in show", "pr_createdAt": "2020-03-17T19:20:28Z", "pr_url": "https://github.com/apache/beam/pull/11147", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkyMDMwOA==", "url": "https://github.com/apache/beam/pull/11147#discussion_r393920308", "bodyText": "It may be good to throw a ValueError or the TypeError? WDYT?", "author": "pabloem", "createdAt": "2020-03-17T19:31:48Z", "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -276,6 +284,21 @@ def show(*pcolls, **configs):\n       # PCollection `square` and PCollection `cube`, then visualizes them.\n       show(square, cube)\n   \"\"\"\n+  flatten_pcolls = []\n+  for pcoll_container in pcolls:\n+    if isinstance(pcoll_container, dict):\n+      flatten_pcolls.extend(pcoll_container.values())\n+    elif isinstance(pcoll_container, beam.pvalue.PCollection):\n+      flatten_pcolls.append(pcoll_container)\n+    else:\n+      try:\n+        flatten_pcolls.extend(iter(pcoll_container))\n+      except TypeError:\n+        _LOGGER.warning(\n+            'The given pcoll %s is not a dict, an iterable or a PCollection.',\n+            pcoll_container)\n+        return", "originalCommit": "7afbb02dc72664c0260016a4957f51120dc9acc3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkyMjU4NQ==", "url": "https://github.com/apache/beam/pull/11147#discussion_r393922585", "bodyText": "Yes, we could raise a ValueError. Changing it!", "author": "KevinGG", "createdAt": "2020-03-17T19:36:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzkyMDMwOA=="}], "type": "inlineReview"}, {"oid": "36edbd41ed4d4d1a85f177067e27f4830b9d7874", "url": "https://github.com/apache/beam/commit/36edbd41ed4d4d1a85f177067e27f4830b9d7874", "message": "[BEAM-7923] Support dict and iterable PCollections in show\n\n1. Added support of dict and iterable of PCollections as *args in the\nshow API.\n2. Added typehints for show.\n3. Added tests for the new support.", "committedDate": "2020-03-17T20:09:16Z", "type": "commit"}, {"oid": "171601e1e6f8df3daec8e76c18eea5241bcb516f", "url": "https://github.com/apache/beam/commit/171601e1e6f8df3daec8e76c18eea5241bcb516f", "message": "Change logging to raising ValueError.", "committedDate": "2020-03-17T20:09:16Z", "type": "commit"}, {"oid": "171601e1e6f8df3daec8e76c18eea5241bcb516f", "url": "https://github.com/apache/beam/commit/171601e1e6f8df3daec8e76c18eea5241bcb516f", "message": "Change logging to raising ValueError.", "committedDate": "2020-03-17T20:09:16Z", "type": "forcePushed"}, {"oid": "983f5b6a6a0a5158c380a2e776cde43272ba278f", "url": "https://github.com/apache/beam/commit/983f5b6a6a0a5158c380a2e776cde43272ba278f", "message": "fix a docstring, asterisk has special meaning in docstrings, removed it.", "committedDate": "2020-03-17T21:35:17Z", "type": "commit"}]}