{"pr_number": 13123, "pr_title": "[BEAM-10959] Fix circle buffer.", "pr_createdAt": "2020-10-15T02:09:26Z", "pr_url": "https://github.com/apache/beam/pull/13123", "timeline": [{"oid": "9402a8761c41e176e91356a82964a0b0d7bc6f40", "url": "https://github.com/apache/beam/commit/9402a8761c41e176e91356a82964a0b0d7bc6f40", "message": "[BEAM-10959] Fix circle buffer.", "committedDate": "2020-10-15T02:07:01Z", "type": "commit"}, {"oid": "cd6bc938809c93aa407796fd255c859dd16401d1", "url": "https://github.com/apache/beam/commit/cd6bc938809c93aa407796fd255c859dd16401d1", "message": "[BEAM-10959] abstract out circle buffer and test it.", "committedDate": "2020-10-15T02:36:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE0NzkxMQ==", "url": "https://github.com/apache/beam/pull/13123#discussion_r505147911", "bodyText": "nit: This comment doesn't make sense anymore because there's no indication that this map is for inactive plans. Can probably adjust these comments a bit, maybe delete this one and amend the one below to refer to \"buf\" instead of \"inactive map\".", "author": "youngoli", "createdAt": "2020-10-15T03:49:23Z", "path": "sdks/go/pkg/beam/core/runtime/harness/harness.go", "diffHunk": "@@ -158,6 +158,60 @@ func Main(ctx context.Context, loggingEndpoint, controlEndpoint string) error {\n type bundleDescriptorID string\n type instructionID string\n \n+const circleBufferCap = 1000\n+\n+// circleBuffer is an ordered eviction buffer\n+type circleBuffer struct {\n+\t// a plan that's either about to start or has finished recently", "originalCommit": "cd6bc938809c93aa407796fd255c859dd16401d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE1NDYxOQ==", "url": "https://github.com/apache/beam/pull/13123#discussion_r505154619", "bodyText": "Ah! good catch. Thanks!", "author": "lostluck", "createdAt": "2020-10-15T04:19:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE0NzkxMQ=="}], "type": "inlineReview"}, {"oid": "2f81c1c8aaa8552cf59c0d04a43a1507528c6ee4", "url": "https://github.com/apache/beam/commit/2f81c1c8aaa8552cf59c0d04a43a1507528c6ee4", "message": "Fix documentation on circleBuffer fields.", "committedDate": "2020-10-15T04:20:36Z", "type": "commit"}]}