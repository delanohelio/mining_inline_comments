{"pr_number": 10856, "pr_title": "[BEAM-8335] Update StreamingCache with new Protos", "pr_createdAt": "2020-02-13T23:40:33Z", "pr_url": "https://github.com/apache/beam/pull/10856", "timeline": [{"oid": "b7fa6e38f275ac6ebdc5badd15578ae6f95abb44", "url": "https://github.com/apache/beam/commit/b7fa6e38f275ac6ebdc5badd15578ae6f95abb44", "message": "update StreamingCache with new protos\n\nChange-Id: Id7afe89f21221e7fa98ef9066805549493005bc9", "committedDate": "2020-02-13T23:39:26Z", "type": "commit"}, {"oid": "bac82cc3549aaeab38237d098b79cbc8229fe584", "url": "https://github.com/apache/beam/commit/bac82cc3549aaeab38237d098b79cbc8229fe584", "message": "lint and yapf\n\nChange-Id: I8c92ab9bc98e1885a29f756ea8021c7fd2f3ee8a", "committedDate": "2020-02-14T00:23:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE5Njc2NA==", "url": "https://github.com/apache/beam/pull/10856#discussion_r379196764", "bodyText": "this would be much more readable if we used typing.NamedTuple", "author": "lukecwik", "createdAt": "2020-02-14T00:38:52Z", "path": "sdks/python/apache_beam/runners/interactive/caching/streaming_cache.py", "diffHunk": "@@ -79,23 +76,23 @@ def _test_stream_events_before_target(self, target_timestamp):\n         if self._stream_times[tag] >= target_timestamp:\n           continue\n         try:\n-          record = next(r)\n-          records.append((tag, record))\n-          self._stream_times[tag] = Timestamp.from_proto(record.processing_time)\n+          record = next(r).recorded_event\n+          if record.HasField('processing_time_event'):\n+            self._stream_times[tag] += timestamp.Duration(\n+                micros=record.processing_time_event.advance_duration)\n+          records.append((tag, record, self._stream_times[tag]))", "originalCommit": "b7fa6e38f275ac6ebdc5badd15578ae6f95abb44", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}