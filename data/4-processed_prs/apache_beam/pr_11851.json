{"pr_number": 11851, "pr_title": "[BEAM-10144] Update PipelineOptions snippets for best practices", "pr_createdAt": "2020-05-28T18:44:21Z", "pr_url": "https://github.com/apache/beam/pull/11851", "timeline": [{"oid": "58427194c5832a9a0ed3e5e378b6bc483fdbd97f", "url": "https://github.com/apache/beam/commit/58427194c5832a9a0ed3e5e378b6bc483fdbd97f", "message": "[BEAM-10144] Update PipelineOptions snippets for best practices", "committedDate": "2020-05-28T18:46:53Z", "type": "forcePushed"}, {"oid": "87df7a41ae2d751d66b9d87476408902e073f441", "url": "https://github.com/apache/beam/commit/87df7a41ae2d751d66b9d87476408902e073f441", "message": "[BEAM-10144] Update PipelineOptions snippets for best practices", "committedDate": "2020-05-28T18:47:46Z", "type": "commit"}, {"oid": "87df7a41ae2d751d66b9d87476408902e073f441", "url": "https://github.com/apache/beam/commit/87df7a41ae2d751d66b9d87476408902e073f441", "message": "[BEAM-10144] Update PipelineOptions snippets for best practices", "committedDate": "2020-05-28T18:47:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjA0OTY4NQ==", "url": "https://github.com/apache/beam/pull/11851#discussion_r432049685", "bodyText": "Note: This is commented out because if we leave it uncommented, even if it doesn't do anything, it makes the test fail with an error. But I still wanted it here for reference.\nsubprocess.CalledProcessError: Command '['/Users/dcavazos/src/beam/env/bin/python', '-m', 'pip', 'download', '--dest', '/var/folders/z2/zp_k4l5n2cq84fsn4y633mg400dsyy/T/tmpdv09ddqk', 'apache-beam==2.22.0.dev0', '--no-deps', '--no-binary', ':all:']' returned non-zero exit status 1.\n\nPip install failed for package: apache-beam==2.22.0.dev0           \nOutput from execution of subprocess: b''\n\nERROR: Could not find a version that satisfies the requirement apache-beam==2.22.0.dev0 (from versions: 0.6.0, 2.0.0, 2.1.0, 2.1.1, 2.2.0, 2.11.0, 2.12.0, 2.13.0, 2.14.0, 2.15.0, 2.16.0, 2.17.0, 2.18.0, 2.19.0, 2.20.0, 2.21.0)\nERROR: No matching distribution found for apache-beam==2.22.0.dev0", "author": "davidcavazos", "createdAt": "2020-05-28T18:51:30Z", "path": "sdks/python/apache_beam/examples/snippets/snippets.py", "diffHunk": "@@ -226,35 +227,33 @@ def _add_argparse_args(cls, parser):\n \n   # [END pipeline_options_define_custom]\n \n-  from apache_beam.options.pipeline_options import GoogleCloudOptions\n-  from apache_beam.options.pipeline_options import StandardOptions\n-\n   # [START pipeline_options_dataflow_service]\n-  # Create and set your PipelineOptions.\n-  options = PipelineOptions(flags=argv)\n+  import apache_beam as beam\n+  from apache_beam.options.pipeline_options import PipelineOptions\n \n+  # Create and set your PipelineOptions.\n   # For Cloud execution, specify DataflowRunner and set the Cloud Platform\n-  # project, job name, staging file location, temp file location, and region.\n-  options.view_as(StandardOptions).runner = 'DataflowRunner'\n-  google_cloud_options = options.view_as(GoogleCloudOptions)\n-  google_cloud_options.project = 'my-project-id'\n-  google_cloud_options.job_name = 'myjob'\n-  google_cloud_options.staging_location = 'gs://my-bucket/binaries'\n-  google_cloud_options.temp_location = 'gs://my-bucket/temp'\n-  google_cloud_options.region = 'us-central1'\n+  # project, job name, temporary files location, and region.\n+  # For more information about regions, check:\n+  # https://cloud.google.com/dataflow/docs/concepts/regional-endpoints\n+  options = PipelineOptions(\n+      flags=argv,\n+      runner='DataflowRunner',\n+      project='my-project-id',\n+      job_name='unique-job-name',\n+      temp_location='gs://my-bucket/temp',\n+      region='us-central1')\n \n   # Create the Pipeline with the specified options.\n-  p = Pipeline(options=options)\n+  # with beam.Pipeline(options=options) as pipeline:", "originalCommit": "87df7a41ae2d751d66b9d87476408902e073f441", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dc54f292beb42233e4c6235901475c872a0ab1f1", "url": "https://github.com/apache/beam/commit/dc54f292beb42233e4c6235901475c872a0ab1f1", "message": "Merge branch 'master' of https://github.com/apache/beam into snippets-pipeline-options", "committedDate": "2020-06-09T17:48:23Z", "type": "commit"}, {"oid": "fc1e57f681ef69d12cc2ab78ca454fc682d5dff3", "url": "https://github.com/apache/beam/commit/fc1e57f681ef69d12cc2ab78ca454fc682d5dff3", "message": "Use argv to parse the pipeline options in pipeline_options_local", "committedDate": "2020-06-09T17:49:41Z", "type": "commit"}]}