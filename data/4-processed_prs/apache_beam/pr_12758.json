{"pr_number": 12758, "pr_title": "[BEAM-9898] Move snowflake.py from apache_beam.io to apache_beam.io.external for backwards compatibility", "pr_createdAt": "2020-09-02T10:24:59Z", "pr_url": "https://github.com/apache/beam/pull/12758", "timeline": [{"oid": "c80daff5812c10cdf9400dbd40b36f73e8c42d5a", "url": "https://github.com/apache/beam/commit/c80daff5812c10cdf9400dbd40b36f73e8c42d5a", "message": "[BEAM-9898] Move info about snowflake cross-language and write dispositions in CHANGES.md from 2.23 to 2.24", "committedDate": "2020-09-02T16:15:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc4NDA1MQ==", "url": "https://github.com/apache/beam/pull/12758#discussion_r482784051", "bodyText": "@youngoli Could I also ask you to change these lines in CHANGES.md (103, 104, 140, 141)? I've noticed that snowflake dispositions and cross-language read was added in 2.24, not 2.23 (it was pushed at 2.23 but was merged after the 2.23 release) and it's a bit mess.\nIt would also be great to move snowflake.py from apache_beam.io.external to apache_beam.io to avoid backward compatibility issues, it's just moving this file, there are no other files that depend on it (integration tests and cross-language write are in 2.25.0).\nOn the other hand we could add apache_beam/io/snowflake.py and apache_beam/io/external/xlang_snowflakeio_it_test.py from the current master to the 2.24.0 RC and remove apache_beam/io/external/snowflake.py - it would be not a lot more work, these tests don't run on jenkins, so they won't break anything. We would have snowflake read and write for python at once in 2.24 without much work.\nBut I probably am asking for too much at once - I don't know how much are you willing to do so I understand if you decide to stop at 1). 2) would be of similiar complexity and could avoid backwards compatibility issues. 3) would require to take files from the current master but there are just 2 whole files to be moved.\nTL;DR - choose one of them:\n\njust remove lines 140-141 and add 103-104\ndo 1) and move apache_beam/io/external/snowflake.py to apache_beam/io/snowflake.py - then in  CHANGES.md:104 should be apache_beam.io.snowflake instead of apache_beam.io.external.snowflake\nTake following from current master apache_beam/io/snowflake.py and apache_beam/io/external/xlang_snowflakeio_it_test.py, remove apache_beam/io/external/snowflake.py and do 1), but in CHANGES.md:104 paste\n* Add cross-language support to SnowflakeIO now available in the Python module `apache_beam.io.snowflake` ([BEAM-9897](https://issues.apache.org/jira/browse/BEAM-9897), [BEAM-9898](https://issues.apache.org/jira/browse/BEAM-9898)).\n\nSorry for the troubles and thanks in advance! Whatever option you choose it will save users a lot of confusion!", "author": "piotr-szuberski", "createdAt": "2020-09-03T08:00:08Z", "path": "CHANGES.md", "diffHunk": "@@ -100,6 +100,8 @@\n * Support for X source added (Java/Python) ([BEAM-X](https://issues.apache.org/jira/browse/BEAM-X)).\n * Add streaming support to SnowflakeIO in Java SDK ([BEAM-9896](https://issues.apache.org/jira/browse/BEAM-9896  ))\n * Support reading and writing to Google Healthcare DICOM APIs in Python SDK ([BEAM-10601](https://issues.apache.org/jira/browse/BEAM-10601))\n+* Add dispositions for SnowflakeIO.write ([BEAM-10343](https://issues.apache.org/jira/browse/BEAM-10343))", "originalCommit": "c80daff5812c10cdf9400dbd40b36f73e8c42d5a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI1ODI2Mg==", "url": "https://github.com/apache/beam/pull/12758#discussion_r483258262", "bodyText": "Hey Piotr. Option 1 is easily doable, but option 2 and 3 are not so much. Even though the changes are small and unlikely to break anything, adding them now would require building an entirely new RC. But moreso, the Beam release guide has some pretty strict expectations for a cherry-pick and I don't think this fits (https://beam.apache.org/contribute/release-guide/#review-cherry-picks). In particular, this doesn't seem to be a regression from a previous release, and it seems to be an update to a new feature, which can wait until 2.25. If there's an urgent reason to get it in ASAP that I'm missing, then let me know, but otherwise I think I'll limit the release changes to just fixing the changelog.", "author": "youngoli", "createdAt": "2020-09-03T21:15:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc4NDA1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQyMTIzNQ==", "url": "https://github.com/apache/beam/pull/12758#discussion_r483421235", "bodyText": "No problem at all - as I said option 1) is fully sufficient. Thanks! :)", "author": "piotr-szuberski", "createdAt": "2020-09-04T06:48:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc4NDA1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQzMTY3Mg==", "url": "https://github.com/apache/beam/pull/12758#discussion_r483431672", "bodyText": "I see them in f47574a\nThanks a lot again!", "author": "piotr-szuberski", "createdAt": "2020-09-04T07:13:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc4NDA1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk3Nzc5MA==", "url": "https://github.com/apache/beam/pull/12758#discussion_r484977790", "bodyText": "apache_beam.io.snowflake ?", "author": "chamikaramj", "createdAt": "2020-09-08T14:45:26Z", "path": "CHANGES.md", "diffHunk": "@@ -100,6 +101,8 @@\n * Support for X source added (Java/Python) ([BEAM-X](https://issues.apache.org/jira/browse/BEAM-X)).\n * Add streaming support to SnowflakeIO in Java SDK ([BEAM-9896](https://issues.apache.org/jira/browse/BEAM-9896  ))\n * Support reading and writing to Google Healthcare DICOM APIs in Python SDK ([BEAM-10601](https://issues.apache.org/jira/browse/BEAM-10601))\n+* Add dispositions for SnowflakeIO.write ([BEAM-10343](https://issues.apache.org/jira/browse/BEAM-10343))\n+* Add cross-language support to SnowflakeIO.Read now available in the Python module `apache_beam.io.external.snowflake` ([BEAM-9897](https://issues.apache.org/jira/browse/BEAM-9897)).", "originalCommit": "0651b25b324ca07f321a9d787f9193e5033c310a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM2MTY2MQ==", "url": "https://github.com/apache/beam/pull/12758#discussion_r485361661", "bodyText": "Unfortunately Read was merged in apache_beam.io.external.snowflake\nIt's been moved to apache_beam.io.snowflake along with Write, that's why there is a need for backwards compatibility. I added the deprecation info to 2.25 notes.", "author": "piotr-szuberski", "createdAt": "2020-09-09T06:13:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDk3Nzc5MA=="}], "type": "inlineReview"}, {"oid": "00ac9be6aa079aa0f6fd91d69f2c35ca3ab45d47", "url": "https://github.com/apache/beam/commit/00ac9be6aa079aa0f6fd91d69f2c35ca3ab45d47", "message": "Add deprecation about ReadFromSnowflake to CHANGES.md", "committedDate": "2020-09-10T06:00:14Z", "type": "forcePushed"}, {"oid": "36ed52a7fd275b5b8e715ae3407354276ff6e6da", "url": "https://github.com/apache/beam/commit/36ed52a7fd275b5b8e715ae3407354276ff6e6da", "message": "[BEAM-9898] Add stub with imports to apache_beam.io.snowflake.ReadFromSnowflake", "committedDate": "2020-09-11T11:00:03Z", "type": "forcePushed"}, {"oid": "ded8d4159bdfe84e512ac86824b14dfcf740db14", "url": "https://github.com/apache/beam/commit/ded8d4159bdfe84e512ac86824b14dfcf740db14", "message": "[BEAM-9898] Add stub with imports to apache_beam.io.snowflake", "committedDate": "2020-09-15T06:55:36Z", "type": "commit"}, {"oid": "ded8d4159bdfe84e512ac86824b14dfcf740db14", "url": "https://github.com/apache/beam/commit/ded8d4159bdfe84e512ac86824b14dfcf740db14", "message": "[BEAM-9898] Add stub with imports to apache_beam.io.snowflake", "committedDate": "2020-09-15T06:55:36Z", "type": "forcePushed"}]}