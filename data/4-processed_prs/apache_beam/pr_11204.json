{"pr_number": 11204, "pr_title": "[BEAM-9579] Fix numpy logic operators", "pr_createdAt": "2020-03-24T04:02:42Z", "pr_url": "https://github.com/apache/beam/pull/11204", "timeline": [{"oid": "71b84f8a02def4931e6fe938291078fb546ad6f5", "url": "https://github.com/apache/beam/commit/71b84f8a02def4931e6fe938291078fb546ad6f5", "message": "[BEAM-9579] Fix numpy logic operators", "committedDate": "2020-03-24T03:55:38Z", "type": "commit"}, {"oid": "c72a72626e201e71ba31cd794c652d837ae1c8cf", "url": "https://github.com/apache/beam/commit/c72a72626e201e71ba31cd794c652d837ae1c8cf", "message": "added changelog message", "committedDate": "2020-03-24T04:01:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMwNDc5NQ==", "url": "https://github.com/apache/beam/pull/11204#discussion_r397304795", "bodyText": "@amaliujia - Should we wrap up the 2.20 release section and start a new section. This is the first release we are trying out changes.md, so we may need to figure out a good point where we need to update this file.\nMaybe we can do it after release branch cut. What do you think?", "author": "aaltay", "createdAt": "2020-03-24T16:47:05Z", "path": "CHANGES.md", "diffHunk": "@@ -116,6 +116,7 @@\n \n ## Bugfixes\n \n+* Fixed numpy operators in ApproximateQuantiles (Python) ([BEAM-9579](https://issues.apache.org/jira/browse/BEAM-9579)).", "originalCommit": "c72a72626e201e71ba31cd794c652d837ae1c8cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE1MTU3MA==", "url": "https://github.com/apache/beam/pull/11204#discussion_r398151570", "bodyText": "Yep. Release branch cut is a good cut point. Later when there is blocker JIRA that adds changes to release branch, release manager can ask to add something to changes.md.", "author": "amaliujia", "createdAt": "2020-03-25T20:34:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMwNDc5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMwNTE0Nw==", "url": "https://github.com/apache/beam/pull/11204#discussion_r397305147", "bodyText": "Maybe I am missing something here, but I think here we use - to get +1, 0 or -1 and ^ operator would not give us.", "author": "aaltay", "createdAt": "2020-03-24T16:47:31Z", "path": "sdks/python/apache_beam/transforms/stats.py", "diffHunk": "@@ -430,11 +430,11 @@ class ApproximateQuantilesCombineFn(CombineFn):\n   def __init__(\n       self, num_quantiles, buffer_size, num_buffers, key=None, reverse=False):\n     if key:\n-      self._comparator = lambda a, b: (key(a) < key(b)) - (key(a) > key(b)) \\\n-        if reverse else (key(a) > key(b)) - (key(a) < key(b))\n+      self._comparator = lambda a, b: (key(a) < key(b)) ^ (key(a) > key(b)) \\", "originalCommit": "c72a72626e201e71ba31cd794c652d837ae1c8cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzM3NzU4NQ==", "url": "https://github.com/apache/beam/pull/11204#discussion_r397377585", "bodyText": "good catch! fixed.", "author": "chrisgorgo", "createdAt": "2020-03-24T18:36:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMwNTE0Nw=="}], "type": "inlineReview"}, {"oid": "ed755557113db1b42ece43d8e62a98d07b1fbffc", "url": "https://github.com/apache/beam/commit/ed755557113db1b42ece43d8e62a98d07b1fbffc", "message": "refactor", "committedDate": "2020-03-24T18:35:38Z", "type": "commit"}]}