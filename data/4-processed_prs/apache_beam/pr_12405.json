{"pr_number": 12405, "pr_title": "[BEAM-10599] Add documentation about CI on GitHub Action", "pr_createdAt": "2020-07-29T09:44:18Z", "pr_url": "https://github.com/apache/beam/pull/12405", "timeline": [{"oid": "1df251d179b257c9715a17731eb7440158af38d1", "url": "https://github.com/apache/beam/commit/1df251d179b257c9715a17731eb7440158af38d1", "message": "Add documentation about CI on GitHub Action", "committedDate": "2020-07-29T14:01:32Z", "type": "commit"}, {"oid": "1df251d179b257c9715a17731eb7440158af38d1", "url": "https://github.com/apache/beam/commit/1df251d179b257c9715a17731eb7440158af38d1", "message": "Add documentation about CI on GitHub Action", "committedDate": "2020-07-29T14:01:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ2ODEyNw==", "url": "https://github.com/apache/beam/pull/12405#discussion_r462468127", "bodyText": "\"2019/202\" -> \"2019/2020\"", "author": "aaltay", "createdAt": "2020-07-29T17:31:33Z", "path": "CI.md", "diffHunk": "@@ -0,0 +1,104 @@\n+<!--\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+-->\n+\n+# Apache Beam\n+\n+## CI Environment\n+\n+Continuous Integration is important component of making Apache Beam robust and stable.\n+\n+Our execution environment for CI is mainly the Jenkins which is available at \n+[https://ci-beam.apache.org/](https://ci-beam.apache.org/). See \n+[.test-infra/jenkins/README](.test-infra/jenkins/README.md)\n+for trigger phrase, status and link of all Jenkins jobs. See Apache Beam Developer Guide for \n+[Jenkins Tips](https://cwiki.apache.org/confluence/display/BEAM/Jenkins+Tips).\n+\n+An additional execution environment for CI is [GitHub Actions](https://github.com/features/actions). GitHub Actions\n+(GA) are very well integrated with GitHub code and Workflow and it has evolved fast in 2019/202 to become", "originalCommit": "1df251d179b257c9715a17731eb7440158af38d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk0NjAwNQ==", "url": "https://github.com/apache/beam/pull/12405#discussion_r462946005", "bodyText": "Thanks. Fixed.", "author": "TobKed", "createdAt": "2020-07-30T12:00:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ2ODEyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ2ODYyNQ==", "url": "https://github.com/apache/beam/pull/12405#discussion_r462468625", "bodyText": "We are doing more than \"so we decided to use it for building python source\ndistribution and wheels.\". Running windows tests for example.", "author": "aaltay", "createdAt": "2020-07-29T17:32:19Z", "path": "CI.md", "diffHunk": "@@ -0,0 +1,104 @@\n+<!--\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+-->\n+\n+# Apache Beam\n+\n+## CI Environment\n+\n+Continuous Integration is important component of making Apache Beam robust and stable.\n+\n+Our execution environment for CI is mainly the Jenkins which is available at \n+[https://ci-beam.apache.org/](https://ci-beam.apache.org/). See \n+[.test-infra/jenkins/README](.test-infra/jenkins/README.md)\n+for trigger phrase, status and link of all Jenkins jobs. See Apache Beam Developer Guide for \n+[Jenkins Tips](https://cwiki.apache.org/confluence/display/BEAM/Jenkins+Tips).\n+\n+An additional execution environment for CI is [GitHub Actions](https://github.com/features/actions). GitHub Actions\n+(GA) are very well integrated with GitHub code and Workflow and it has evolved fast in 2019/202 to become\n+a fully-fledged CI environment, easy to use and develop for, so we decided to use it for building python source", "originalCommit": "1df251d179b257c9715a17731eb7440158af38d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk1MjM4MA==", "url": "https://github.com/apache/beam/pull/12405#discussion_r462952380", "bodyText": "I agree, however additional tests are during development in other PR #12318. I will add info about them in mentioned PR (after merge of this one). I want to avoid discrepancy between documentation and workflow.", "author": "TobKed", "createdAt": "2020-07-30T12:13:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ2ODYyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ3MDEzMw==", "url": "https://github.com/apache/beam/pull/12405#discussion_r462470133", "bodyText": "Should we add windows tests to this list?", "author": "aaltay", "createdAt": "2020-07-29T17:35:02Z", "path": "CI.md", "diffHunk": "@@ -0,0 +1,104 @@\n+<!--\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+-->\n+\n+# Apache Beam\n+\n+## CI Environment\n+\n+Continuous Integration is important component of making Apache Beam robust and stable.\n+\n+Our execution environment for CI is mainly the Jenkins which is available at \n+[https://ci-beam.apache.org/](https://ci-beam.apache.org/). See \n+[.test-infra/jenkins/README](.test-infra/jenkins/README.md)\n+for trigger phrase, status and link of all Jenkins jobs. See Apache Beam Developer Guide for \n+[Jenkins Tips](https://cwiki.apache.org/confluence/display/BEAM/Jenkins+Tips).\n+\n+An additional execution environment for CI is [GitHub Actions](https://github.com/features/actions). GitHub Actions\n+(GA) are very well integrated with GitHub code and Workflow and it has evolved fast in 2019/202 to become\n+a fully-fledged CI environment, easy to use and develop for, so we decided to use it for building python source\n+distribution and wheels.\n+\n+## GitHub Actions\n+\n+### GitHub actions run types\n+\n+The following GA CI Job runs are currently run for Apache Beam, and each of the runs have different\n+purpose and context.\n+\n+#### Pull request run\n+\n+Those runs are results of PR\u00a0from the forks made by contributors. Most builds for Apache Beam fall\n+into this category. They are executed in the context of the \"Fork\", not main\n+Beam Code Repository which means that they have only \"read\" permission to all the GitHub resources\n+(container registry, code repository). This is necessary as the code in those PRs (including CI job\n+definition) might be modified by people who are not committers for the Apache Beam Code Repository.\n+\n+The main purpose of those jobs is to check if PR builds cleanly, if the test run properly and if\n+the PR is ready to review and merge.\n+\n+#### Direct Push/Merge Run\n+\n+Those runs are results of direct pushes done by the committers or as result of merge of a Pull Request\n+by the committers. Those runs execute in the context of the Apache Beam Code Repository and have also\n+write permission for GitHub resources (container registry, code repository).\n+The main purpose for the run\u00a0is to check if the code after merge still holds all the assertions - like\n+whether it still builds, all tests are green.\n+\n+This is needed because some of the conflicting changes from multiple PRs might cause build and test failures\n+after merge even if they do not fail in isolation.\n+\n+#### Scheduled runs\n+\n+Those runs are results of (nightly) triggered job - only for `master`\u00a0branch. The\n+main purpose of the job is to check if there was no impact of external dependency changes on the Apache\n+Beam code (for example transitive dependencies released that fail the build). Another reason for the nightly \n+build is that the builds tags most recent master with `nightly-master`.\n+\n+All runs consist of the same jobs, but the jobs behave slightly differently or they are skipped in different\n+run categories. Here is a summary of the run categories with regards of the jobs they are running.\n+Those jobs often have matrix run strategy which runs several different variations of the jobs\n+(with different platform type / Python version to run for example)\n+\n+| Job                                             | Description                                                                                                                                                                                                                                                        | Pull Request Run | Direct Push/Merge Run | Scheduled Run | Requires GCP Credentials |", "originalCommit": "1df251d179b257c9715a17731eb7440158af38d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk1MzA1Mg==", "url": "https://github.com/apache/beam/pull/12405#discussion_r462953052", "bodyText": "As I mentioned in comment above, I will add them in PR which introduce them to avoid discrepancy.", "author": "TobKed", "createdAt": "2020-07-30T12:15:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQ3MDEzMw=="}], "type": "inlineReview"}, {"oid": "1d9f8cb558e59a8e7daff0955d0f3aa5fd017762", "url": "https://github.com/apache/beam/commit/1d9f8cb558e59a8e7daff0955d0f3aa5fd017762", "message": "fixup! Add documentation about CI on GitHub Action", "committedDate": "2020-07-30T11:52:06Z", "type": "commit"}]}