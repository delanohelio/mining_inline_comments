{"pr_number": 13124, "pr_title": "Make streaming and \"auto\" Dataflow ValidatesRunner jobs have different titles", "pr_createdAt": "2020-10-15T03:31:32Z", "pr_url": "https://github.com/apache/beam/pull/13124", "timeline": [{"oid": "252732ec52a44d2a15db6fb243aeb3f90c3fa76d", "url": "https://github.com/apache/beam/commit/252732ec52a44d2a15db6fb243aeb3f90c3fa76d", "message": "Make streaming and \"auto\" Dataflow ValidatesRunner jobs have different titles", "committedDate": "2020-10-15T03:30:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg3NDE5OQ==", "url": "https://github.com/apache/beam/pull/13124#discussion_r507874199", "bodyText": "Why is this also streaming? What does 'auto' mean?", "author": "tysonjh", "createdAt": "2020-10-19T16:06:02Z", "path": ".test-infra/jenkins/job_PostCommit_Java_ValidatesRunner_Dataflow.groovy", "diffHunk": "@@ -23,7 +23,7 @@ import PostcommitJobBuilder\n // This job runs the suite of ValidatesRunner tests against the Dataflow\n // runner.\n PostcommitJobBuilder.postCommitJob('beam_PostCommit_Java_ValidatesRunner_Dataflow',\n-    'Run Dataflow ValidatesRunner', 'Google Cloud Dataflow Runner ValidatesRunner Tests', this) {\n+    'Run Dataflow ValidatesRunner', 'Google Cloud Dataflow Runner ValidatesRunner Tests (streaming/batch auto)', this) {", "originalCommit": "252732ec52a44d2a15db6fb243aeb3f90c3fa76d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg3ODgxMw==", "url": "https://github.com/apache/beam/pull/13124#discussion_r508878813", "bodyText": "When --streaming=true is not specified, this happens:\n\n  \n    \n      beam/runners/google-cloud-dataflow-java/src/main/java/org/apache/beam/runners/dataflow/DataflowRunner.java\n    \n    \n        Lines 869 to 871\n      in\n      996c8d2\n    \n    \n    \n    \n\n        \n          \n           if (containsUnboundedPCollection(pipeline)) { \n        \n\n        \n          \n             options.setStreaming(true); \n        \n\n        \n          \n           } \n        \n    \n  \n\n\nSo the unmodified ValidatesRunner test suite uses batch mode when possible and streaming when necessary. We expect essentially all users to use the unmodified form and let it \"just work\". But very few of our ValidatesRunner tests have unbounded PCollections so streaming is largely untested in this mode.\nIt may be overkill to change this title. I got worried it would be confused for a \"batch only\" mode, which it is not.", "author": "kennknowles", "createdAt": "2020-10-20T22:31:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg3NDE5OQ=="}], "type": "inlineReview"}]}