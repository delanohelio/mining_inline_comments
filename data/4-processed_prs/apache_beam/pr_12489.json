{"pr_number": 12489, "pr_title": "[BEAM-6064] Add an option to avoid insert_ids on BQ in exchange for faster insertions", "pr_createdAt": "2020-08-06T22:35:22Z", "pr_url": "https://github.com/apache/beam/pull/12489", "timeline": [{"oid": "6ac5356c611b029d1a4e0645a7ead46b1785d543", "url": "https://github.com/apache/beam/commit/6ac5356c611b029d1a4e0645a7ead46b1785d543", "message": "[BEAM-6064] Improvements to BQ streaming insert performance", "committedDate": "2020-08-06T20:57:20Z", "type": "commit"}, {"oid": "52b08843adaa753efaa76d49e01018ecc272ef85", "url": "https://github.com/apache/beam/commit/52b08843adaa753efaa76d49e01018ecc272ef85", "message": "Fixup", "committedDate": "2020-08-06T20:58:32Z", "type": "commit"}, {"oid": "ca0857b6c38abc71b557c27a359b1a4711222835", "url": "https://github.com/apache/beam/commit/ca0857b6c38abc71b557c27a359b1a4711222835", "message": "Fixup", "committedDate": "2020-08-06T20:59:51Z", "type": "commit"}, {"oid": "90fe07100d77ae6fa1b61acc2f230ab7353bf58f", "url": "https://github.com/apache/beam/commit/90fe07100d77ae6fa1b61acc2f230ab7353bf58f", "message": "Adding support for high-throughput lower-guarantees BQ inserts", "committedDate": "2020-08-06T23:16:22Z", "type": "commit"}, {"oid": "b022edadbeee67e57063cc30fe79f806f68374b2", "url": "https://github.com/apache/beam/commit/b022edadbeee67e57063cc30fe79f806f68374b2", "message": "Fixup", "committedDate": "2020-08-06T23:21:45Z", "type": "commit"}, {"oid": "e3ca79d1a40c47e80eb34ed786b78060af9417a6", "url": "https://github.com/apache/beam/commit/e3ca79d1a40c47e80eb34ed786b78060af9417a6", "message": "Fixup", "committedDate": "2020-08-06T23:27:42Z", "type": "commit"}, {"oid": "2b6c0bf4488a2cfdc42c77c5ad231790ede40506", "url": "https://github.com/apache/beam/commit/2b6c0bf4488a2cfdc42c77c5ad231790ede40506", "message": "Fixup", "committedDate": "2020-08-07T19:10:08Z", "type": "commit"}, {"oid": "b2b548f5c64ee709b56b65fc4d752fbf43e74c4b", "url": "https://github.com/apache/beam/commit/b2b548f5c64ee709b56b65fc4d752fbf43e74c4b", "message": "Fixup", "committedDate": "2020-08-07T22:29:04Z", "type": "commit"}, {"oid": "e149b9b29fded1d872ec74e6855062a7dee57709", "url": "https://github.com/apache/beam/commit/e149b9b29fded1d872ec74e6855062a7dee57709", "message": "Merge branch 'BQ-better-reshuffle' into BQ-no-insert-ids", "committedDate": "2020-08-07T22:36:44Z", "type": "commit"}, {"oid": "ad922386540f1ea3c6c411227fc9e2f73eb545ba", "url": "https://github.com/apache/beam/commit/ad922386540f1ea3c6c411227fc9e2f73eb545ba", "message": "fixup", "committedDate": "2020-08-07T22:43:01Z", "type": "commit"}, {"oid": "4825c5dc040f4ada20acc5be9cecca252af349b5", "url": "https://github.com/apache/beam/commit/4825c5dc040f4ada20acc5be9cecca252af349b5", "message": "Merge branch 'BQ-better-reshuffle' into BQ-no-insert-ids", "committedDate": "2020-08-07T22:43:34Z", "type": "commit"}, {"oid": "1e075755b871ee99454580fc17d0ff9b89c42dc9", "url": "https://github.com/apache/beam/commit/1e075755b871ee99454580fc17d0ff9b89c42dc9", "message": "fixup", "committedDate": "2020-08-07T22:48:45Z", "type": "commit"}, {"oid": "76ea50cfcd0a4922392fbb4ba050cd114eb45feb", "url": "https://github.com/apache/beam/commit/76ea50cfcd0a4922392fbb4ba050cd114eb45feb", "message": "Merge branch 'BQ-better-reshuffle' into BQ-no-insert-ids", "committedDate": "2020-08-07T22:49:30Z", "type": "commit"}, {"oid": "4eddac06c587854fa853f404c75f0974b9a8a9c4", "url": "https://github.com/apache/beam/commit/4eddac06c587854fa853f404c75f0974b9a8a9c4", "message": "Fixup", "committedDate": "2020-08-10T17:06:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI3OTk4Mg==", "url": "https://github.com/apache/beam/pull/12489#discussion_r468279982", "bodyText": "Seems like this will conflict with #12485 ?", "author": "chamikaramj", "createdAt": "2020-08-11T01:49:13Z", "path": "sdks/python/apache_beam/io/gcp/bigquery.py", "diffHunk": "@@ -304,6 +308,8 @@ def compute_table_name(row):\n NOTE: This job name template does not have backwards compatibility guarantees.\n \"\"\"\n BQ_JOB_NAME_TEMPLATE = \"beam_bq_job_{job_type}_{job_id}_{step_id}{random}\"\n+\"\"\"The number of shards per destination when writing via streaming inserts.\"\"\"\n+DEFAULT_SHARDS_PER_DESTINATION = 500", "originalCommit": "4eddac06c587854fa853f404c75f0974b9a8a9c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODgyNTk0MA==", "url": "https://github.com/apache/beam/pull/12489#discussion_r468825940", "bodyText": "yeah, this needs to fix conflicts with them.", "author": "pabloem", "createdAt": "2020-08-11T19:50:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI3OTk4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI4MDM0MQ==", "url": "https://github.com/apache/beam/pull/12489#discussion_r468280341", "bodyText": "Let's refer to 'https://cloud.google.com/bigquery/streaming-data-into-bigquery#disabling_best_effort_de-duplication' similar to Java.", "author": "chamikaramj", "createdAt": "2020-08-11T01:50:39Z", "path": "sdks/python/apache_beam/io/gcp/bigquery.py", "diffHunk": "@@ -1048,6 +1055,11 @@ def __init__(\n         to be passed when creating a BigQuery table. These are passed when\n         triggering a load job for FILE_LOADS, and when creating a new table for\n         STREAMING_INSERTS.\n+      with_insert_ids: When using the STREAMING_INSERTS method to write data to", "originalCommit": "4eddac06c587854fa853f404c75f0974b9a8a9c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg0MzEyMg==", "url": "https://github.com/apache/beam/pull/12489#discussion_r468843122", "bodyText": "I've renamed the option to match the name in Java SDK", "author": "pabloem", "createdAt": "2020-08-11T20:24:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI4MDM0MQ=="}], "type": "inlineReview"}, {"oid": "3e475fc637ce073df82d93a71bab0b5bf1e4e5ab", "url": "https://github.com/apache/beam/commit/3e475fc637ce073df82d93a71bab0b5bf1e4e5ab", "message": "Renaming option for consistency with Java", "committedDate": "2020-08-11T20:20:58Z", "type": "commit"}, {"oid": "0f40822c305c00ad34efcd21723d157278857f14", "url": "https://github.com/apache/beam/commit/0f40822c305c00ad34efcd21723d157278857f14", "message": "Merge remote-tracking branch 'origin' into BQ-no-insert-ids", "committedDate": "2020-08-11T20:44:19Z", "type": "commit"}, {"oid": "a2bca8684ee113ca2b73e7093e30527f47f39317", "url": "https://github.com/apache/beam/commit/a2bca8684ee113ca2b73e7093e30527f47f39317", "message": "Merge remote-tracking branch 'origin' into BQ-no-insert-ids", "committedDate": "2020-08-11T20:45:38Z", "type": "commit"}, {"oid": "837717a122f984061a1a2d41f31b330830705f97", "url": "https://github.com/apache/beam/commit/837717a122f984061a1a2d41f31b330830705f97", "message": "fixup", "committedDate": "2020-08-11T23:29:08Z", "type": "commit"}]}