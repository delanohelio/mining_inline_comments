{"pr_number": 10901, "pr_title": "[BEAM-8965] Remove duplicate sideinputs in ConsumerTrackingPipelineVisitor", "pr_createdAt": "2020-02-19T04:54:47Z", "pr_url": "https://github.com/apache/beam/pull/10901", "timeline": [{"oid": "ea9103676d1da54a10a61e68c96efc2dcf106fbe", "url": "https://github.com/apache/beam/commit/ea9103676d1da54a10a61e68c96efc2dcf106fbe", "message": "Remove duplicate sideinputs in ConsumerTrackingPipelineVisitor", "committedDate": "2020-02-19T03:58:10Z", "type": "commit"}, {"oid": "a8828018cbd0bf9d2e3637b7d4b14ad5436060f3", "url": "https://github.com/apache/beam/commit/a8828018cbd0bf9d2e3637b7d4b14ad5436060f3", "message": "Reduce variable numbers", "committedDate": "2020-02-19T04:52:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE0MTgzNA==", "url": "https://github.com/apache/beam/pull/10901#discussion_r384141834", "bodyText": "Here we may want to only append rather than rebuild all of self.views?\nAn idea is that we may want to keep self._views = set(), add views to the set, and add a @property that returns the set as a list? (no need to implement this way, but we do want to make sure that we are not dropping elements from 'views' that we appended in previous visit_transform calls", "author": "pabloem", "createdAt": "2020-02-25T21:39:17Z", "path": "sdks/python/apache_beam/runners/direct/consumer_tracking_pipeline_visitor.py", "diffHunk": "@@ -65,5 +66,10 @@ def visit_transform(self, applied_ptransform):\n       self.root_transforms.add(applied_ptransform)\n     self.step_names[applied_ptransform] = 's%d' % (self._num_transforms)\n     self._num_transforms += 1\n+\n     for side_input in applied_ptransform.side_inputs:\n-      self.views.append(side_input)\n+      if side_input not in self._side_input_views:\n+        self._side_input_views[side_input] = side_input\n+    self.views = [", "originalCommit": "a8828018cbd0bf9d2e3637b7d4b14ad5436060f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1487fc51ca1cd9abbbfce90539ac52b4e4e8ca43", "url": "https://github.com/apache/beam/commit/1487fc51ca1cd9abbbfce90539ac52b4e4e8ca43", "message": "Address comment and fix linting", "committedDate": "2020-02-26T01:34:44Z", "type": "commit"}]}