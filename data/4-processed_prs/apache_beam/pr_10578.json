{"pr_number": 10578, "pr_title": "[BEAM-9030] Migrate Beam to use beam-vendor-grpc-1_26_0", "pr_createdAt": "2020-01-14T08:33:01Z", "pr_url": "https://github.com/apache/beam/pull/10578", "timeline": [{"oid": "dca34e2ad77ef124bb4f443069f295685d87a3ad", "url": "https://github.com/apache/beam/commit/dca34e2ad77ef124bb4f443069f295685d87a3ad", "message": "[BEAM-9030] Migrate Beam to use beam-vendor-grpc-1_26_0", "committedDate": "2020-01-14T08:30:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5NjI0Ng==", "url": "https://github.com/apache/beam/pull/10578#discussion_r366496246", "bodyText": "I don't think you want to update the non-vendored gRPC version.", "author": "lukecwik", "createdAt": "2020-01-14T18:18:15Z", "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -372,7 +372,7 @@ class BeamModulePlugin implements Plugin<Project> {\n     def google_cloud_bigdataoss_version = \"1.9.16\"\n     def google_cloud_core_version = \"1.61.0\"\n     def google_cloud_spanner_version = \"1.6.0\"\n-    def grpc_version = \"1.17.1\"\n+    def grpc_version = \"1.26.0\"", "originalCommit": "dca34e2ad77ef124bb4f443069f295685d87a3ad", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ5Nzg2NA==", "url": "https://github.com/apache/beam/pull/10578#discussion_r366497864", "bodyText": "This is also for the non-vendored gRPC version. I also believe it should be $grpc_version and the protoc should be $protobuf_version.", "author": "lukecwik", "createdAt": "2020-01-14T18:21:51Z", "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -1444,7 +1444,7 @@ class BeamModulePlugin implements Plugin<Project> {\n           // An artifact spec for a protoc plugin, with \"grpc\" as\n           // the identifier, which can be referred to in the \"plugins\"\n           // container of the \"generateProtoTasks\" closure.\n-          grpc { artifact = \"io.grpc:protoc-gen-grpc-java:1.13.1\" }\n+          grpc { artifact = \"io.grpc:protoc-gen-grpc-java:1.26.0\" }", "originalCommit": "dca34e2ad77ef124bb4f443069f295685d87a3ad", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjUwMDY5Nw==", "url": "https://github.com/apache/beam/pull/10578#discussion_r366500697", "bodyText": "Can we expose the protobuf and guava version from GrpcVendoring_1_26_0.groovy so its obvious that we want to use the versions related to our vendored gRPC.", "author": "lukecwik", "createdAt": "2020-01-14T18:27:50Z", "path": "vendor/sdks-java-extensions-protobuf/build.gradle", "diffHunk": "@@ -23,7 +23,7 @@ applyJavaNature(\n   shadowClosure: {\n     dependencies {\n         include(dependency('com.google.guava:guava:26.0-jre'))\n-        include(dependency('com.google.protobuf:protobuf-java:3.7.1'))\n+        include(dependency('com.google.protobuf:protobuf-java:3.11.0'))", "originalCommit": "dca34e2ad77ef124bb4f443069f295685d87a3ad", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "130b402fada823e7c6c17e6f5eb20e2bee20db54", "url": "https://github.com/apache/beam/commit/130b402fada823e7c6c17e6f5eb20e2bee20db54", "message": "fixup! [BEAM-9030] Migrate Beam to use beam-vendor-grpc-1_26_0", "committedDate": "2020-01-15T03:39:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzExNTE1MQ==", "url": "https://github.com/apache/beam/pull/10578#discussion_r367115151", "bodyText": "applyPortabilityNature uses the vendored grpc artifacts and should use protoc/protoc-gen-grpc-java related to the vendored grpc version.", "author": "lukecwik", "createdAt": "2020-01-15T21:25:26Z", "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -1515,14 +1515,14 @@ class BeamModulePlugin implements Plugin<Project> {\n       project.protobuf {\n         protoc {\n           // The artifact spec for the Protobuf Compiler\n-          artifact = \"com.google.protobuf:protoc:3.11.0\" }\n+          artifact = \"com.google.protobuf:protoc:$protobuf_version\" }", "originalCommit": "130b402fada823e7c6c17e6f5eb20e2bee20db54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzExNTY3NQ==", "url": "https://github.com/apache/beam/pull/10578#discussion_r367115675", "bodyText": "applyGrpcNature works on the unvendored gRPC version and as such is correct in using $protobuf_version and $grpc_version.", "author": "lukecwik", "createdAt": "2020-01-15T21:26:44Z", "path": "buildSrc/src/main/groovy/org/apache/beam/gradle/BeamModulePlugin.groovy", "diffHunk": "@@ -1437,14 +1437,14 @@ class BeamModulePlugin implements Plugin<Project> {\n       project.protobuf {\n         protoc {\n           // The artifact spec for the Protobuf Compiler\n-          artifact = \"com.google.protobuf:protoc:3.6.0\" }\n+          artifact = \"com.google.protobuf:protoc:$protobuf_version\" }", "originalCommit": "130b402fada823e7c6c17e6f5eb20e2bee20db54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}