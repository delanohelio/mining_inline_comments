{"pr_number": 11484, "pr_title": "[BEAM-9778] remove temp directory & add docker-pull-licenses to release scripts", "pr_createdAt": "2020-04-21T20:52:24Z", "pr_url": "https://github.com/apache/beam/pull/11484", "timeline": [{"oid": "e58c2f171a3e08913283f4cdfcb3627a4a28b270", "url": "https://github.com/apache/beam/commit/e58c2f171a3e08913283f4cdfcb3627a4a28b270", "message": "remove temp dir", "committedDate": "2020-04-22T02:25:53Z", "type": "commit"}, {"oid": "01b3df6aee1931f66006d53874c920c49e7aacbd", "url": "https://github.com/apache/beam/commit/01b3df6aee1931f66006d53874c920c49e7aacbd", "message": "add urls for fmpp-0.9.14 and jpam-1.1", "committedDate": "2020-04-22T02:26:02Z", "type": "commit"}, {"oid": "efd6a88e07e25c0aa1a45242e2b4465d65ed1f4c", "url": "https://github.com/apache/beam/commit/efd6a88e07e25c0aa1a45242e2b4465d65ed1f4c", "message": "add docker-pull-licenses to release scripts", "committedDate": "2020-04-22T02:26:02Z", "type": "commit"}, {"oid": "efd6a88e07e25c0aa1a45242e2b4465d65ed1f4c", "url": "https://github.com/apache/beam/commit/efd6a88e07e25c0aa1a45242e2b4465d65ed1f4c", "message": "add docker-pull-licenses to release scripts", "committedDate": "2020-04-22T02:26:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk4MTczMw==", "url": "https://github.com/apache/beam/pull/11484#discussion_r412981733", "bodyText": "Why pull this out into a global variable?", "author": "ibzib", "createdAt": "2020-04-22T13:27:51Z", "path": "sdks/java/container/build.gradle", "diffHunk": "@@ -94,8 +86,12 @@ licenseReport {\n task copyThirdPartyLicenses(type: Copy) {\n   from (\"third_party_licenses\")\n   into \"build/target/third_party_licenses\"\n+  doLast {\n+    file('third_party_licenses').deleteDir()\n+  }\n }\n \n+def Boolean pull_licenses", "originalCommit": "efd6a88e07e25c0aa1a45242e2b4465d65ed1f4c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzIxMTg2MA==", "url": "https://github.com/apache/beam/pull/11484#discussion_r413211860", "bodyText": "when we pass docker-pull-licenses to :sdks:java:container:docker, generateThirdPartyLicenses task doesn't understand it. In order to pass the tag from docker task to generateThirdPartyLicenses, we need a global value to share it.", "author": "Hannah-Jiang", "createdAt": "2020-04-22T18:17:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk4MTczMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzIyOTA0OA==", "url": "https://github.com/apache/beam/pull/11484#discussion_r413229048", "bodyText": "I tried changing generateThirdPartyLicenses to read project.rootProject.hasProperty([\"docker-pull-licenses\"]) directly, and it seemed to work fine when I called ./gradlew :sdks:java:container:docker -Pdocker-pull-licenses.", "author": "ibzib", "createdAt": "2020-04-22T18:43:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk4MTczMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzIzMDA4Mg==", "url": "https://github.com/apache/beam/pull/11484#discussion_r413230082", "bodyText": "(Sorry for picking nits by the way, I'm just trying to understand Gradle better \ud83d\ude05)", "author": "ibzib", "createdAt": "2020-04-22T18:44:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk4MTczMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzI0NDUxNg==", "url": "https://github.com/apache/beam/pull/11484#discussion_r413244516", "bodyText": "That was the behavior I observed when I implement it. But yesterday, when I try it again, it didn't work as expected. So I introduced the pull_licenses variable. But today, as you pointed out, I tried again, it worked! I reversed to original code.", "author": "Hannah-Jiang", "createdAt": "2020-04-22T19:04:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk4MTczMw=="}], "type": "inlineReview"}, {"oid": "624badc7f248361e98c48e679890a4cdce7e6c75", "url": "https://github.com/apache/beam/commit/624badc7f248361e98c48e679890a4cdce7e6c75", "message": "fix", "committedDate": "2020-04-22T19:02:42Z", "type": "commit"}]}