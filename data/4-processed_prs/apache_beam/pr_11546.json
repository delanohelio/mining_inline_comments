{"pr_number": 11546, "pr_title": "[BEAM-9832] Ensuring tags are not added to ProcessBundleDescriptors o\u2026", "pr_createdAt": "2020-04-28T01:58:31Z", "pr_url": "https://github.com/apache/beam/pull/11546", "timeline": [{"oid": "f553d56b72c55b52b05984adf84d6cae94faca9f", "url": "https://github.com/apache/beam/commit/f553d56b72c55b52b05984adf84d6cae94faca9f", "message": "[BEAM-9832] Ensuring tags are not added to ProcessBundleDescriptors on the worker-side", "committedDate": "2020-04-28T01:58:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI3NDgwNg==", "url": "https://github.com/apache/beam/pull/11546#discussion_r416274806", "bodyText": "It would be weird that accessing the dict adds the entry in this case but if this is the solution then it would be better we created a copy of the dict we pass from here:\n\n  \n    \n      beam/sdks/python/apache_beam/runners/worker/bundle_processor.py\n    \n    \n         Line 1038\n      in\n      2434d49\n    \n    \n    \n    \n\n        \n          \n           tag_to_pcollection_id = self.process_bundle_descriptor.transforms[", "author": "lukecwik", "createdAt": "2020-04-28T02:10:29Z", "path": "sdks/python/apache_beam/runners/worker/operations.py", "diffHunk": "@@ -724,6 +724,8 @@ def pcollection_count_monitoring_infos(self, tag_to_pcollection_id):\n \n     if self.tagged_receivers:\n       for tag, receiver in self.tagged_receivers.items():\n+        if str(tag) not in tag_to_pcollection_id:", "originalCommit": "f553d56b72c55b52b05984adf84d6cae94faca9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI3NTk3OA==", "url": "https://github.com/apache/beam/pull/11546#discussion_r416275978", "bodyText": "you're  right, but that causes another error. I might be looking at the wrog thing entirely.", "author": "pabloem", "createdAt": "2020-04-28T02:14:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI3NDgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI4NDU3Ng==", "url": "https://github.com/apache/beam/pull/11546#discussion_r416284576", "bodyText": "We should be able to drop the if pcollection_id check below", "author": "lukecwik", "createdAt": "2020-04-28T02:41:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI3NDgwNg=="}], "type": "inlineReview"}, {"oid": "91782d3cb6ea04ff2e77bbae03cd94809935ab32", "url": "https://github.com/apache/beam/commit/91782d3cb6ea04ff2e77bbae03cd94809935ab32", "message": "trying out fix", "committedDate": "2020-04-28T02:13:21Z", "type": "commit"}, {"oid": "7e1ca10508f5cbe9cce3eead478601e0b4e906fe", "url": "https://github.com/apache/beam/commit/7e1ca10508f5cbe9cce3eead478601e0b4e906fe", "message": "fixup", "committedDate": "2020-04-28T02:38:35Z", "type": "commit"}, {"oid": "58e580fa03d4e25541aa0a666410c2a974701ad2", "url": "https://github.com/apache/beam/commit/58e580fa03d4e25541aa0a666410c2a974701ad2", "message": "fixup", "committedDate": "2020-04-28T02:45:11Z", "type": "commit"}, {"oid": "dbd9ebd0b2fd9b5c544352c11ada387f34230a0d", "url": "https://github.com/apache/beam/commit/dbd9ebd0b2fd9b5c544352c11ada387f34230a0d", "message": "fix formatter", "committedDate": "2020-04-28T02:50:36Z", "type": "commit"}]}