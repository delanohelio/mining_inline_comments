{"pr_number": 11177, "pr_title": "[BEAM-9562] Add Timer to Elements proto representation.", "pr_createdAt": "2020-03-20T03:24:40Z", "pr_url": "https://github.com/apache/beam/pull/11177", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNjAyOA==", "url": "https://github.com/apache/beam/pull/11177#discussion_r395426028", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              // A descriptor describing the end  point to use for Data API to use user\n          \n          \n            \n              // timers.\n          \n          \n            \n              // A descriptor describing the end point to use for Data API for user timers.\n          \n          \n            \n              // Required if the ProcessBundleDescriptor contains any transforms that have user timers.", "author": "lukecwik", "createdAt": "2020-03-20T03:35:28Z", "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -164,6 +164,11 @@ message ProcessBundleDescriptor {\n   // data plane or if any of the transforms rely on user state or side inputs.\n   org.apache.beam.model.pipeline.v1.ApiServiceDescriptor\n       state_api_service_descriptor = 7;\n+\n+  // A descriptor describing the end  point to use for Data API to use user\n+  // timers.", "originalCommit": "5caedc4b3fe56aa2244246be4ae63e5b72c588fd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNjEzOA==", "url": "https://github.com/apache/beam/pull/11177#discussion_r395426138", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                string instruction_id = 1;\n          \n          \n            \n                string instruction_id = 1;", "author": "lukecwik", "createdAt": "2020-03-20T03:36:02Z", "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -533,8 +538,33 @@ message Elements {\n     bytes data = 3;\n   }\n \n+  // Represent the encoded user timer for a given instruction, transform and\n+  // timer id.\n+  message Timer {\n+    // (Required) A reference to an active instruction request with the given\n+    // instruction id.\n+    string instruction_id = 1;", "originalCommit": "5caedc4b3fe56aa2244246be4ae63e5b72c588fd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNjE2MQ==", "url": "https://github.com/apache/beam/pull/11177#discussion_r395426161", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                string transform_id = 2;\n          \n          \n            \n                string transform_id = 2;", "author": "lukecwik", "createdAt": "2020-03-20T03:36:11Z", "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -533,8 +538,33 @@ message Elements {\n     bytes data = 3;\n   }\n \n+  // Represent the encoded user timer for a given instruction, transform and\n+  // timer id.\n+  message Timer {\n+    // (Required) A reference to an active instruction request with the given\n+    // instruction id.\n+    string instruction_id = 1;\n+    // (Required) A definition representing a consumer or producer of this data.\n+    // If received by a harness, this represents the consumer within that\n+    // harness that should consume these bytes. If sent by a harness, this\n+    // represents the producer of these bytes.\n+    string transform_id = 2;", "originalCommit": "5caedc4b3fe56aa2244246be4ae63e5b72c588fd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNjE4Mg==", "url": "https://github.com/apache/beam/pull/11177#discussion_r395426182", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                string timer_id = 3;\n          \n          \n            \n                string timer_id = 3;", "author": "lukecwik", "createdAt": "2020-03-20T03:36:18Z", "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -533,8 +538,33 @@ message Elements {\n     bytes data = 3;\n   }\n \n+  // Represent the encoded user timer for a given instruction, transform and\n+  // timer id.\n+  message Timer {\n+    // (Required) A reference to an active instruction request with the given\n+    // instruction id.\n+    string instruction_id = 1;\n+    // (Required) A definition representing a consumer or producer of this data.\n+    // If received by a harness, this represents the consumer within that\n+    // harness that should consume these bytes. If sent by a harness, this\n+    // represents the producer of these bytes.\n+    string transform_id = 2;\n+    // (Optional) The local timer name which can be mapped to\n+    // timer specification.\n+    string timer_id = 3;", "originalCommit": "5caedc4b3fe56aa2244246be4ae63e5b72c588fd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNjMwMQ==", "url": "https://github.com/apache/beam/pull/11177#discussion_r395426301", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // harness that should consume these bytes. If sent by a harness, this\n          \n          \n            \n                // represents the producer of these bytes.\n          \n          \n            \n                // harness that should consume these timers. If sent by a harness, this\n          \n          \n            \n                // represents the producer of these timers.", "author": "lukecwik", "createdAt": "2020-03-20T03:36:58Z", "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -533,8 +538,33 @@ message Elements {\n     bytes data = 3;\n   }\n \n+  // Represent the encoded user timer for a given instruction, transform and\n+  // timer id.\n+  message Timer {\n+    // (Required) A reference to an active instruction request with the given\n+    // instruction id.\n+    string instruction_id = 1;\n+    // (Required) A definition representing a consumer or producer of this data.\n+    // If received by a harness, this represents the consumer within that\n+    // harness that should consume these bytes. If sent by a harness, this\n+    // represents the producer of these bytes.", "originalCommit": "5caedc4b3fe56aa2244246be4ae63e5b72c588fd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNjU4OA==", "url": "https://github.com/apache/beam/pull/11177#discussion_r395426588", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // (Optional) The local timer name which can be mapped to\n          \n          \n            \n                // timer specification.\n          \n          \n            \n                // (Optional) The local timer name used to identify the associated timer specification.", "author": "lukecwik", "createdAt": "2020-03-20T03:38:34Z", "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -533,8 +538,33 @@ message Elements {\n     bytes data = 3;\n   }\n \n+  // Represent the encoded user timer for a given instruction, transform and\n+  // timer id.\n+  message Timer {\n+    // (Required) A reference to an active instruction request with the given\n+    // instruction id.\n+    string instruction_id = 1;\n+    // (Required) A definition representing a consumer or producer of this data.\n+    // If received by a harness, this represents the consumer within that\n+    // harness that should consume these bytes. If sent by a harness, this\n+    // represents the producer of these bytes.\n+    string transform_id = 2;\n+    // (Optional) The local timer name which can be mapped to\n+    // timer specification.", "originalCommit": "5caedc4b3fe56aa2244246be4ae63e5b72c588fd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQyNjY1OA==", "url": "https://github.com/apache/beam/pull/11177#discussion_r395426658", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              // (Required) A list containing parts of logical byte streams.\n          \n          \n            \n              // (Optional) A list containing parts of logical byte streams.", "author": "lukecwik", "createdAt": "2020-03-20T03:38:59Z", "path": "model/fn-execution/src/main/proto/beam_fn_api.proto", "diffHunk": "@@ -533,8 +538,33 @@ message Elements {\n     bytes data = 3;\n   }\n \n+  // Represent the encoded user timer for a given instruction, transform and\n+  // timer id.\n+  message Timer {\n+    // (Required) A reference to an active instruction request with the given\n+    // instruction id.\n+    string instruction_id = 1;\n+    // (Required) A definition representing a consumer or producer of this data.\n+    // If received by a harness, this represents the consumer within that\n+    // harness that should consume these bytes. If sent by a harness, this\n+    // represents the producer of these bytes.\n+    string transform_id = 2;\n+    // (Optional) The local timer name which can be mapped to\n+    // timer specification.\n+    string timer_id = 3;\n+    // (Optional) Represents a logical byte stream of a timer. Encoded according\n+    // to the coder in the timer spec.\n+    // An empty data block represents the end of stream for the given\n+    // instruction and transform.\n+    bytes timer = 4;\n+  }\n+\n+\n   // (Required) A list containing parts of logical byte streams.", "originalCommit": "5caedc4b3fe56aa2244246be4ae63e5b72c588fd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dde6dc3976700ed2d05bc05020dc7c61075c72d7", "url": "https://github.com/apache/beam/commit/dde6dc3976700ed2d05bc05020dc7c61075c72d7", "message": "Add Timer to Elements proto representation.", "committedDate": "2020-03-20T17:04:23Z", "type": "commit"}, {"oid": "dde6dc3976700ed2d05bc05020dc7c61075c72d7", "url": "https://github.com/apache/beam/commit/dde6dc3976700ed2d05bc05020dc7c61075c72d7", "message": "Add Timer to Elements proto representation.", "committedDate": "2020-03-20T17:04:23Z", "type": "forcePushed"}]}