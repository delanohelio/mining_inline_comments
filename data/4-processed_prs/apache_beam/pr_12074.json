{"pr_number": 12074, "pr_title": "[BEAM-10313] Add without_defaults to built-in Combiners in Python", "pr_createdAt": "2020-06-24T16:28:50Z", "pr_url": "https://github.com/apache/beam/pull/12074", "timeline": [{"oid": "697d02709224e841433cd46f15e035ca11094ca9", "url": "https://github.com/apache/beam/commit/697d02709224e841433cd46f15e035ca11094ca9", "message": "Add without_defaults to mean combiner", "committedDate": "2020-06-24T16:18:39Z", "type": "commit"}, {"oid": "5b3d5c73a9d94a29aa4098f425e95675136b7516", "url": "https://github.com/apache/beam/commit/5b3d5c73a9d94a29aa4098f425e95675136b7516", "message": "Add without_defaults to built-in combiners", "committedDate": "2020-06-24T16:53:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMxNzczOQ==", "url": "https://github.com/apache/beam/pull/12074#discussion_r447317739", "bodyText": "In the spirit of not modifying self, and instead creating a new instance, you can return the subclass:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              def with_defaults(self, has_defaults=True):\n          \n          \n            \n                self.has_defaults = has_defaults\n          \n          \n            \n                return self\n          \n          \n            \n              def with_defaults(self, has_defaults=True):\n          \n          \n            \n                  new = copy.copy(self)\n          \n          \n            \n                  new.has_defaults = has_defaults\n          \n          \n            \n                  return new", "author": "pabloem", "createdAt": "2020-06-29T23:33:38Z", "path": "sdks/python/apache_beam/transforms/combiners.py", "diffHunk": "@@ -62,26 +62,28 @@\n TimestampType = Union[int, float, Timestamp, Duration]\n \n \n+class CombinerWithoutDefaults(ptransform.PTransform):\n+  def __init__(self, has_defaults=True):\n+    self.has_defaults = has_defaults\n+\n+  def with_defaults(self, has_defaults=True):\n+    self.has_defaults = has_defaults\n+    return self", "originalCommit": "5b3d5c73a9d94a29aa4098f425e95675136b7516", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI4NTcyNg==", "url": "https://github.com/apache/beam/pull/12074#discussion_r454285726", "bodyText": "This looks very nice, I wanted to return a new instance by wasn't sure how, copy is a very clever way, thanks.\nCommited", "author": "InigoSJ", "createdAt": "2020-07-14T11:22:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMxNzczOQ=="}], "type": "inlineReview"}, {"oid": "b7b785a12a12088a81beec0623129bac712d1b01", "url": "https://github.com/apache/beam/commit/b7b785a12a12088a81beec0623129bac712d1b01", "message": "Add without_defaults to built-in combiners", "committedDate": "2020-07-14T12:20:16Z", "type": "commit"}, {"oid": "4fc39f77b175ccc2c3fdcf4a0eceae2d246c22a3", "url": "https://github.com/apache/beam/commit/4fc39f77b175ccc2c3fdcf4a0eceae2d246c22a3", "message": "Add without_defaults to built-in combiners", "committedDate": "2020-07-14T12:21:10Z", "type": "commit"}, {"oid": "675499b2cc0cc1d81539a9d9a89fb111d55f70a5", "url": "https://github.com/apache/beam/commit/675499b2cc0cc1d81539a9d9a89fb111d55f70a5", "message": "Add without_defaults to built-in combiners", "committedDate": "2020-07-15T18:20:57Z", "type": "commit"}, {"oid": "9fdbff8c5e1930892bfeedacee43943fb30ebacf", "url": "https://github.com/apache/beam/commit/9fdbff8c5e1930892bfeedacee43943fb30ebacf", "message": "Add without_defaults to built-in combiners", "committedDate": "2020-07-15T18:23:39Z", "type": "commit"}, {"oid": "56f0e89b0d6dda6d753d735abefa31d61f0885b0", "url": "https://github.com/apache/beam/commit/56f0e89b0d6dda6d753d735abefa31d61f0885b0", "message": "Add without_defaults to built-in combiners", "committedDate": "2020-07-15T19:43:13Z", "type": "commit"}]}