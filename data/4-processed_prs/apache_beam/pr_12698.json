{"pr_number": 12698, "pr_title": "[BEAM-10672] Add Python Combine Load Tests for streaming on Flink", "pr_createdAt": "2020-08-27T15:45:12Z", "pr_url": "https://github.com/apache/beam/pull/12698", "timeline": [{"oid": "43bb6220cf5d1fe14ea88f296a2bac893722eca4", "url": "https://github.com/apache/beam/commit/43bb6220cf5d1fe14ea88f296a2bac893722eca4", "message": "[BEAM-10672] Update Load tests jobs README", "committedDate": "2020-09-02T11:10:09Z", "type": "forcePushed"}, {"oid": "380547cfdd34291864ca13d26725f91377657cc0", "url": "https://github.com/apache/beam/commit/380547cfdd34291864ca13d26725f91377657cc0", "message": "[BEAM-10672] Update Load tests jobs README", "committedDate": "2020-09-03T10:47:47Z", "type": "forcePushed"}, {"oid": "07384e14a44172221c03de17726c226e67ec18d1", "url": "https://github.com/apache/beam/commit/07384e14a44172221c03de17726c226e67ec18d1", "message": "[BEAM-10672] Update Load tests jobs README", "committedDate": "2020-09-03T13:44:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA4NzgxNg==", "url": "https://github.com/apache/beam/pull/12698#discussion_r483087816", "bodyText": "The jobs had issues with direct memory being too low. This setting solved the problem.", "author": "kamilwu", "createdAt": "2020-09-03T15:59:31Z", "path": ".test-infra/dataproc/init-actions/flink.sh", "diffHunk": "@@ -160,10 +156,10 @@ jobmanager.rpc.address: ${master_hostname}\n jobmanager.heap.mb: ${flink_jobmanager_memory}\n taskmanager.memory.process.size: \"${flink_taskmanager_memory} mb\"\n taskmanager.memory.jvm-metaspace.size: 512 mb\n+taskmanager.memory.task.off-heap.size: 256 mb", "originalCommit": "07384e14a44172221c03de17726c226e67ec18d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUwMDU1Ng==", "url": "https://github.com/apache/beam/pull/12698#discussion_r484500556", "bodyText": "Sounds good!", "author": "mxm", "createdAt": "2020-09-07T15:46:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA4NzgxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE0MzM4Nw==", "url": "https://github.com/apache/beam/pull/12698#discussion_r483143387", "bodyText": "Is this the right place to put this? Should this be in sdks/python/apache_beam/testing/synthetic_pipeline.py?", "author": "mxm", "createdAt": "2020-09-03T17:30:44Z", "path": "sdks/python/apache_beam/testing/load_tests/load_test.py", "diffHunk": "@@ -183,3 +189,66 @@ def get_option_or_default(self, opt_name, default=0):\n       return type(default)(option)\n     except:\n       raise\n+\n+\n+class StatefulLoadGenerator(beam.PTransform):", "originalCommit": "07384e14a44172221c03de17726c226e67ec18d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQ5MjQ1Ng==", "url": "https://github.com/apache/beam/pull/12698#discussion_r483492456", "bodyText": "Hm, good point. I wasn't sure about that. I'll put this in sdks/python/apache_beam/testing/synthetic_pipeline.py", "author": "kamilwu", "createdAt": "2020-09-04T09:10:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE0MzM4Nw=="}], "type": "inlineReview"}, {"oid": "2579d489c2e6d587f78b04389dd807de38c20895", "url": "https://github.com/apache/beam/commit/2579d489c2e6d587f78b04389dd807de38c20895", "message": "[BEAM-10672] Move StatefulLoadGenerator from pardo_test.py", "committedDate": "2020-09-04T09:25:36Z", "type": "commit"}, {"oid": "27df907014f5dbb2fc9938699210f8f7673028df", "url": "https://github.com/apache/beam/commit/27df907014f5dbb2fc9938699210f8f7673028df", "message": "[BEAM-10672] Several fixes to init actions for Dataproc cluster\n\n* Increase Task Off-Heap Memory size for TaskExecutors\n* Delete `taskmanager.network.numberOfBuffers` option, removed in Flink 1.10\n* Bump up Docker credential helper version\n* Add --retry parameter for curl to reduce flakiness", "committedDate": "2020-09-04T09:25:36Z", "type": "commit"}, {"oid": "66458f2ff40214c7ef15bc07391f45afcf3c84d3", "url": "https://github.com/apache/beam/commit/66458f2ff40214c7ef15bc07391f45afcf3c84d3", "message": "[BEAM-10672] Add Python Combine Load Tests for streaming on Flink", "committedDate": "2020-09-04T09:25:36Z", "type": "commit"}, {"oid": "b59e8af250c45278a788db9162a9b94e5d6c65f7", "url": "https://github.com/apache/beam/commit/b59e8af250c45278a788db9162a9b94e5d6c65f7", "message": "[BEAM-10672] Use customized image tags\n\nBefore the change, every Docker image for testing had been built with the 'latest' tag. That could lead to unexpected results when multiple Jenkins jobs were triggered at the same time.", "committedDate": "2020-09-04T09:25:36Z", "type": "commit"}, {"oid": "051fbc8ab33d4937a01f0283ea00b194c9ec20c3", "url": "https://github.com/apache/beam/commit/051fbc8ab33d4937a01f0283ea00b194c9ec20c3", "message": "[BEAM-10672] Update Load tests jobs README", "committedDate": "2020-09-04T09:25:36Z", "type": "commit"}, {"oid": "051fbc8ab33d4937a01f0283ea00b194c9ec20c3", "url": "https://github.com/apache/beam/commit/051fbc8ab33d4937a01f0283ea00b194c9ec20c3", "message": "[BEAM-10672] Update Load tests jobs README", "committedDate": "2020-09-04T09:25:36Z", "type": "forcePushed"}, {"oid": "9f3a894372baf9a4beeb226e778625c10d15ae2a", "url": "https://github.com/apache/beam/commit/9f3a894372baf9a4beeb226e778625c10d15ae2a", "message": "fix: separate job for building Docker images", "committedDate": "2020-09-04T14:06:37Z", "type": "commit"}, {"oid": "9f3a894372baf9a4beeb226e778625c10d15ae2a", "url": "https://github.com/apache/beam/commit/9f3a894372baf9a4beeb226e778625c10d15ae2a", "message": "fix: separate job for building Docker images", "committedDate": "2020-09-04T14:06:37Z", "type": "forcePushed"}]}