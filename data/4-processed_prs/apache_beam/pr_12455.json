{"pr_number": 12455, "pr_title": "[BEAM-10630] Include data from load tests in the release process", "pr_createdAt": "2020-08-03T16:39:48Z", "pr_url": "https://github.com/apache/beam/pull/12455", "timeline": [{"oid": "166b0366f07af9eef9f5a4884345795ba6360025", "url": "https://github.com/apache/beam/commit/166b0366f07af9eef9f5a4884345795ba6360025", "message": "[BEAM-10630] Include data from load tests in the release process\n\nIn the past, we have seen performance regressions in releases. We should make\nsure that the release guide includes checking available performance\nmeasurements.", "committedDate": "2020-08-03T16:38:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU2OTE4MA==", "url": "https://github.com/apache/beam/pull/12455#discussion_r464569180", "bodyText": "Who could be the owner of doing a first investigation? Release manager could file issues but may not be in a position to understand the cause of the regressions.\nOne suggestion for the list of all benchmarks above we add a first point of contact? Would that be reasonable?", "author": "aaltay", "createdAt": "2020-08-03T17:49:09Z", "path": "website/www/site/content/en/contribute/release-guide.md", "diffHunk": "@@ -244,7 +247,21 @@ __Attention__: Only PMC has permission to perform this. If you are not a PMC, pl\n **********\n \n \n-## 2. Create a release branch in apache/beam repository\n+## 3. Investigate performance regressions\n+\n+Check the Beam load tests for possible performance regressions. Measurements are available on [metrics.beam.apache.org](http://metrics.beam.apache.org).\n+\n+All Runners which publish data should be checked for the following, in both *batch* and *streaming* mode:\n+\n+- [ParDo](http://metrics.beam.apache.org/d/MOi-kf3Zk/pardo-load-tests) and [GBK](http://metrics.beam.apache.org/d/UYZ-oJ3Zk/gbk-load-test): Runtime, latency, checkpoint duration\n+- [Nexmark](http://metrics.beam.apache.org/d/ahuaA_zGz/nexmark): Query runtime for all queries\n+- [IO](http://metrics.beam.apache.org/d/bnlHKP3Wz/java-io-it-tests-dataflow): Runtime\n+\n+If regressions are found, the release branch can still be created, but the regressions should be investigated and fixed as part of the release process.\n+JIRA issues should be created for each regression with the 'Fix Version' set to the to-be-released version.", "originalCommit": "166b0366f07af9eef9f5a4884345795ba6360025", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk3MTg1Mg==", "url": "https://github.com/apache/beam/pull/12455#discussion_r464971852", "bodyText": "I thought the release manager would be responsible for identifying and filing the issues in JIRA. After that, they are part of the open issues for the release. The release manager oversees those, but relies on community members to fix them.\nIt is reasonable to add a point of contact. Problem with these list of contacts is that they tend to become stale (like some of the OWNERS files we have). Perhaps we could just link to the existing OWNERS files? That way, we wouldn't introduce any additional lists.", "author": "mxm", "createdAt": "2020-08-04T11:05:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU2OTE4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIyMDg2NA==", "url": "https://github.com/apache/beam/pull/12455#discussion_r465220864", "bodyText": "I thought the release manager would be responsible for identifying and filing the issues in JIRA. After that, they are part of the open issues for the release. The release manager oversees those, but relies on community members to fix them.\n\nI agree.\n\nIt is reasonable to add a point of contact. Problem with these list of contacts is that they tend to become stale (like some of the OWNERS files we have).\n\nMy assumption is that if the benchmark exists in this list, it would mean that some people in the community care about it. If nobody is interested in a specific benchmark, and nobody can triage it, it does not need to be listed as one of the release gating important benchmarks list.\n\nPerhaps we could just link to the existing OWNERS files? That way, we wouldn't introduce any additional lists.\n\nThis sounds reasonable to me. I was not was aware that we had OWNERS files and I actually do not know if they are up-to-date.\nAlternatively, if a benchmark regression gets no attention during the release process after the release manager filed a jira, and shared in an email etc. we can remove the specific benchmark from this list. What do you think about that? If we do that, we do not need to list specific owners here.", "author": "aaltay", "createdAt": "2020-08-04T17:42:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU2OTE4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1OTg5NQ==", "url": "https://github.com/apache/beam/pull/12455#discussion_r465959895", "bodyText": "I'd like to try filing regression JIRA issues for all listed benchmarks. Hopefully, that should not be too many. Like you said, the issues will be triaged. If there is nobody taking care of an issue, then ultimately we can think about removing the associated benchmark.", "author": "mxm", "createdAt": "2020-08-05T19:41:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU2OTE4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU3MDE5OA==", "url": "https://github.com/apache/beam/pull/12455#discussion_r464570198", "bodyText": "Do we want to spell out what to do after filing the issues? Or do we want to use the same process as any other jira issues tagged for that release (i.e. triage then decide blocker or not)?", "author": "aaltay", "createdAt": "2020-08-03T17:51:04Z", "path": "website/www/site/content/en/contribute/release-guide.md", "diffHunk": "@@ -244,7 +247,21 @@ __Attention__: Only PMC has permission to perform this. If you are not a PMC, pl\n **********\n \n \n-## 2. Create a release branch in apache/beam repository\n+## 3. Investigate performance regressions\n+\n+Check the Beam load tests for possible performance regressions. Measurements are available on [metrics.beam.apache.org](http://metrics.beam.apache.org).\n+\n+All Runners which publish data should be checked for the following, in both *batch* and *streaming* mode:\n+\n+- [ParDo](http://metrics.beam.apache.org/d/MOi-kf3Zk/pardo-load-tests) and [GBK](http://metrics.beam.apache.org/d/UYZ-oJ3Zk/gbk-load-test): Runtime, latency, checkpoint duration\n+- [Nexmark](http://metrics.beam.apache.org/d/ahuaA_zGz/nexmark): Query runtime for all queries\n+- [IO](http://metrics.beam.apache.org/d/bnlHKP3Wz/java-io-it-tests-dataflow): Runtime\n+\n+If regressions are found, the release branch can still be created, but the regressions should be investigated and fixed as part of the release process.\n+JIRA issues should be created for each regression with the 'Fix Version' set to the to-be-released version.\n+Next, the mailing list should be informed to allow fixing the regressions in the course of the release.", "originalCommit": "166b0366f07af9eef9f5a4884345795ba6360025", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk3MTg3MQ==", "url": "https://github.com/apache/beam/pull/12455#discussion_r464971871", "bodyText": "I think we can follow the same process as for other issues marked with the \"Fix Version\" of the upcoming release.\nGenerally speaking, it could be good to spell out how the release manager informs the community about the release process. This could include an email with all the pending issues, e.g. bugs, performance regressions, untriaged issues.", "author": "mxm", "createdAt": "2020-08-04T11:05:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU3MDE5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIxODczNQ==", "url": "https://github.com/apache/beam/pull/12455#discussion_r465218735", "bodyText": "I think we can follow the same process as for other issues marked with the \"Fix Version\" of the upcoming release.\n\nThis sounds good. If that is the case we can leave this as is. Or if this is not obvious to others we can explicit add that sentence in to the document.\n\nGenerally speaking, it could be good to spell out how the release manager informs the community about the release process. This could include an email with all the pending issues, e.g. bugs, performance regressions, untriaged issues.\n\n+1. We can at least at this as a place holder and fill it later.", "author": "aaltay", "createdAt": "2020-08-04T17:38:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU3MDE5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk2ODI4Ng==", "url": "https://github.com/apache/beam/pull/12455#discussion_r465968286", "bodyText": "I've pushed two more commits to address these two points.", "author": "mxm", "createdAt": "2020-08-05T19:57:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU3MDE5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYzNDc4NQ==", "url": "https://github.com/apache/beam/pull/12455#discussion_r464634785", "bodyText": "(Minor question.) Does markdown not support automatic numbering?", "author": "robertwb", "createdAt": "2020-08-03T20:07:04Z", "path": "website/www/site/content/en/contribute/release-guide.md", "diffHunk": "@@ -1163,7 +1180,7 @@ Use reporter.apache.org to seed the information about the release into future pr\n **********\n \n \n-## 9. Promote the release\n+## 11. Promote the release", "originalCommit": "166b0366f07af9eef9f5a4884345795ba6360025", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk3MTg5Mw==", "url": "https://github.com/apache/beam/pull/12455#discussion_r464971893", "bodyText": "It does. We use that feature in the table of contents. (You simply always specify 1. as the number).\nI don't know why we don't use it for the actual sections. I guess to keep it plain-text readable. Either way, it would make sense to stick to just one of the two approaches.", "author": "mxm", "createdAt": "2020-08-04T11:05:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYzNDc4NQ=="}], "type": "inlineReview"}, {"oid": "36e06b830c4426e4b1e4d8ea705582eb3f01748e", "url": "https://github.com/apache/beam/commit/36e06b830c4426e4b1e4d8ea705582eb3f01748e", "message": "Address PR comments", "committedDate": "2020-08-05T19:52:30Z", "type": "commit"}, {"oid": "d285c5855c1dd02180762c8e3848822b24eba572", "url": "https://github.com/apache/beam/commit/d285c5855c1dd02180762c8e3848822b24eba572", "message": "Add note about informing the mailing list after creating the release branch", "committedDate": "2020-08-05T19:56:56Z", "type": "commit"}]}