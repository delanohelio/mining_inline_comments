{"pr_number": 12776, "pr_title": "[BEAM-9456] Upgrade Gradle to 6.6.1 (smaller version of #12568)", "pr_createdAt": "2020-09-04T03:57:51Z", "pr_url": "https://github.com/apache/beam/pull/12776", "timeline": [{"oid": "ae7f4d03c4414797cc4107c639a19d8ff25018d5", "url": "https://github.com/apache/beam/commit/ae7f4d03c4414797cc4107c639a19d8ff25018d5", "message": "[BEAM-9456] Upgrade Gradle to 6.6.1 (smaller version of #12568)", "committedDate": "2020-09-04T05:03:20Z", "type": "forcePushed"}, {"oid": "39809f8529d912b081fcbc9eaa549bbd4d051271", "url": "https://github.com/apache/beam/commit/39809f8529d912b081fcbc9eaa549bbd4d051271", "message": "[BEAM-9456] Upgrade Gradle to 6.6.1 (smaller version of #12568)", "committedDate": "2020-09-04T08:26:56Z", "type": "forcePushed"}, {"oid": "f777d9331e6796421fb37e88e7a42f1fc50253f4", "url": "https://github.com/apache/beam/commit/f777d9331e6796421fb37e88e7a42f1fc50253f4", "message": "[BEAM-9456] Upgrade Gradle to 6.6.1 (smaller version of #12568)", "committedDate": "2020-09-04T08:43:34Z", "type": "forcePushed"}, {"oid": "f1ce4590641e3ce9edb777a9a0240cc4948a3429", "url": "https://github.com/apache/beam/commit/f1ce4590641e3ce9edb777a9a0240cc4948a3429", "message": "[BEAM-9456] Upgrade Gradle to 6.6.1 (smaller version of #12568)", "committedDate": "2020-09-04T16:28:28Z", "type": "commit"}, {"oid": "f1ce4590641e3ce9edb777a9a0240cc4948a3429", "url": "https://github.com/apache/beam/commit/f1ce4590641e3ce9edb777a9a0240cc4948a3429", "message": "[BEAM-9456] Upgrade Gradle to 6.6.1 (smaller version of #12568)", "committedDate": "2020-09-04T16:28:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgwMzQ1Ng==", "url": "https://github.com/apache/beam/pull/12776#discussion_r485803456", "bodyText": "I recall that flink_runner.gradle is imported as a build script to the different flink version builds. Using this file just to do a spotless scan seems fine, but it does split the config and maybe create confusion that nothing is built here.\n@mxm @tweise maybe know more about this set up.", "author": "kennknowles", "createdAt": "2020-09-09T17:44:25Z", "path": "runners/flink/build.gradle", "diffHunk": "@@ -0,0 +1,32 @@\n+/*", "originalCommit": "f1ce4590641e3ce9edb777a9a0240cc4948a3429", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkxMDA0OQ==", "url": "https://github.com/apache/beam/pull/12776#discussion_r485910049", "bodyText": "Is this merely an optimization to avoid running Spotless for each Flink version? If so, probably not worth splitting the config as the overhead for running spotless on the Flink sources multiple times is very low.", "author": "mxm", "createdAt": "2020-09-09T20:42:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgwMzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkxMDk2MA==", "url": "https://github.com/apache/beam/pull/12776#discussion_r485910960", "bodyText": "Besides, I think the spotless task should be part of the actual Flink project, e.g. runners/flink/1.10 (not runners/flink).", "author": "mxm", "createdAt": "2020-09-09T20:44:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgwMzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkxNjIyMQ==", "url": "https://github.com/apache/beam/pull/12776#discussion_r485916221", "bodyText": "This is an optimization, but it is also required in order to update the spotless version which is required in order to bump the Gradle version.\nIn the new version of spotless, all target files must be in the project root which means they can't be added to the buildscripts in the runners/flink/1.10 subdirectories.\nhttps://github.com/diffplug/spotless/blob/main/plugin-gradle/src/main/java/com/diffplug/gradle/spotless/SpotlessTaskImpl.java#L106\nSee this PR for more info and this build scan for the error happening after bumping the spotless version", "author": "runningcode", "createdAt": "2020-09-09T20:54:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgwMzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMwMDE5OQ==", "url": "https://github.com/apache/beam/pull/12776#discussion_r486300199", "bodyText": "Thanks for pointers! Just checking, do we spotless-check both runners/flink/src/** and runners/flink/{1.8,1.9,1.10,1.11}/src/**? It looks like the latter is now covered by the default project settings inherited from BeamModulePlugin.", "author": "mxm", "createdAt": "2020-09-10T12:35:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgwMzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMwMTMxNQ==", "url": "https://github.com/apache/beam/pull/12776#discussion_r486301315", "bodyText": "That is correct. I verified in my branch that formatting errors in runners/flink/src/** and runners/flink/1.11/src/** were caught by spotless.", "author": "runningcode", "createdAt": "2020-09-10T12:37:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgwMzQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMwMzAyOA==", "url": "https://github.com/apache/beam/pull/12776#discussion_r486303028", "bodyText": "Great, thanks! LGTM then.", "author": "mxm", "createdAt": "2020-09-10T12:40:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgwMzQ1Ng=="}], "type": "inlineReview"}]}