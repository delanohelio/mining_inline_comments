{"pr_number": 12804, "pr_title": "Fix translations.optimize_pipeline() failure on empty pipelines", "pr_createdAt": "2020-09-10T00:42:47Z", "pr_url": "https://github.com/apache/beam/pull/12804", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY3OTY5Mg==", "url": "https://github.com/apache/beam/pull/12804#discussion_r486679692", "bodyText": "The convention in Beam is to use ()'s rather than backslashes for multi-line statements.", "author": "robertwb", "createdAt": "2020-09-10T23:01:17Z", "path": "sdks/python/apache_beam/runners/portability/fn_api_runner/translations.py", "diffHunk": "@@ -478,8 +478,10 @@ def leaf_transform_stages(\n     if root.spec.urn in known_composites:\n       yield Stage(root_id, [root], parent=parent)\n     elif not root.subtransforms:\n-      # Make sure its outputs are not a subset of its inputs.\n-      if set(root.outputs.values()) - set(root.inputs.values()):\n+      # Yield if its outputs are not a subset of its inputs,\n+      # or if it has no inputs and no outputs.\n+      if set(root.outputs.values()) - set(root.inputs.values()) or \\", "originalCommit": "930120a6eb5e03f060c56bf0fc7625426bed7c75", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDUwNjkyMw==", "url": "https://github.com/apache/beam/pull/12804#discussion_r494506923", "bodyText": "I decided to solve this in a different way, which removes this line and also fixes the test failures.", "author": "yifanmai", "createdAt": "2020-09-24T17:57:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY3OTY5Mg=="}], "type": "inlineReview"}, {"oid": "945140ce518acabfd617690b65d5711af63fa599", "url": "https://github.com/apache/beam/commit/945140ce518acabfd617690b65d5711af63fa599", "message": "Change test name", "committedDate": "2020-09-23T16:37:29Z", "type": "forcePushed"}, {"oid": "182f589f508de567dc63179fdae1b686f73eef72", "url": "https://github.com/apache/beam/commit/182f589f508de567dc63179fdae1b686f73eef72", "message": "Fix tests", "committedDate": "2020-09-24T17:54:43Z", "type": "commit"}, {"oid": "182f589f508de567dc63179fdae1b686f73eef72", "url": "https://github.com/apache/beam/commit/182f589f508de567dc63179fdae1b686f73eef72", "message": "Fix tests", "committedDate": "2020-09-24T17:54:43Z", "type": "forcePushed"}, {"oid": "2e641bc1be1a2a7e77015959ad0c70341ae44fac", "url": "https://github.com/apache/beam/commit/2e641bc1be1a2a7e77015959ad0c70341ae44fac", "message": "Lint", "committedDate": "2020-09-24T17:58:33Z", "type": "commit"}, {"oid": "4c083ba6e391cd5cabbd2a39e10c10b60dc55952", "url": "https://github.com/apache/beam/commit/4c083ba6e391cd5cabbd2a39e10c10b60dc55952", "message": "lint", "committedDate": "2020-09-24T20:15:33Z", "type": "commit"}]}