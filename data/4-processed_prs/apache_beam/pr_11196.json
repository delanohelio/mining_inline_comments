{"pr_number": 11196, "pr_title": "[BEAM-9574] Ensure that instances of generated NamedTuple classes can be pickled", "pr_createdAt": "2020-03-23T17:23:23Z", "pr_url": "https://github.com/apache/beam/pull/11196", "timeline": [{"oid": "bb3295bcc60f83d0959dc3cece582c3be6656879", "url": "https://github.com/apache/beam/commit/bb3295bcc60f83d0959dc3cece582c3be6656879", "message": "Ensure that instances of generated namedtuple classes can be pickled", "committedDate": "2020-03-23T19:27:37Z", "type": "forcePushed"}, {"oid": "e2c371130d67fe26a62a2be4e9a7455d42d895bb", "url": "https://github.com/apache/beam/commit/e2c371130d67fe26a62a2be4e9a7455d42d895bb", "message": "Ensure that instances of generated namedtuple classes can be pickled", "committedDate": "2020-03-24T00:04:47Z", "type": "forcePushed"}, {"oid": "96af8e48864a24865f27656b856a1ee401057dad", "url": "https://github.com/apache/beam/commit/96af8e48864a24865f27656b856a1ee401057dad", "message": "Ensure that instances of generated namedtuple classes can be pickled", "committedDate": "2020-03-25T17:41:39Z", "type": "commit"}, {"oid": "96af8e48864a24865f27656b856a1ee401057dad", "url": "https://github.com/apache/beam/commit/96af8e48864a24865f27656b856a1ee401057dad", "message": "Ensure that instances of generated namedtuple classes can be pickled", "committedDate": "2020-03-25T17:41:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgyMDcxNQ==", "url": "https://github.com/apache/beam/pull/11196#discussion_r398820715", "bodyText": "Does it makes sense to memoize this?", "author": "robertwb", "createdAt": "2020-03-26T19:01:58Z", "path": "sdks/python/apache_beam/typehints/schemas.py", "diffHunk": "@@ -205,6 +218,11 @@ def typing_from_runner_api(fieldtype_proto):\n     pass  # TODO\n \n \n+def _hydrate_namedtuple_instance(encoded_schema, values):\n+  return named_tuple_from_schema(\n+      proto_utils.parse_Bytes(encoded_schema, schema_pb2.Schema))(*values)\n+\n+\n def named_tuple_from_schema(schema):", "originalCommit": "96af8e48864a24865f27656b856a1ee401057dad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NTA2OQ==", "url": "https://github.com/apache/beam/pull/11196#discussion_r398895069", "bodyText": "It's effectively memoized with SCHEMA_REGISTRY inside typing_from_runner_api. We could short-circuit it here as well though", "author": "TheNeuralBit", "createdAt": "2020-03-26T21:10:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgyMDcxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk3MTY3Nw==", "url": "https://github.com/apache/beam/pull/11196#discussion_r398971677", "bodyText": "I went ahead and merged this, let me know if you think this should be tweaked and I can do it separately.", "author": "TheNeuralBit", "createdAt": "2020-03-27T00:35:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgyMDcxNQ=="}], "type": "inlineReview"}]}