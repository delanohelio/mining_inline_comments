{"pr_number": 12384, "pr_title": "Fix various issues in release instructions and scripts observed while preparing 2.23.0.", "pr_createdAt": "2020-07-28T00:27:30Z", "pr_url": "https://github.com/apache/beam/pull/12384", "timeline": [{"oid": "dadf1900033be3582b133af7195a2fdd3e4e24a7", "url": "https://github.com/apache/beam/commit/dadf1900033be3582b133af7195a2fdd3e4e24a7", "message": "Build Py3.8 docker containers.", "committedDate": "2020-07-27T23:31:08Z", "type": "commit"}, {"oid": "b0748a5ef20669c9a1f039e2dabbf7dc89a447ed", "url": "https://github.com/apache/beam/commit/b0748a5ef20669c9a1f039e2dabbf7dc89a447ed", "message": "Correct docs tox task.", "committedDate": "2020-07-27T23:32:21Z", "type": "commit"}, {"oid": "0aa52d13f1e2c31ffe73b026ccb9cb49030570e3", "url": "https://github.com/apache/beam/commit/0aa52d13f1e2c31ffe73b026ccb9cb49030570e3", "message": "Correct the commit hash used in docs generation.", "committedDate": "2020-07-27T23:36:35Z", "type": "commit"}, {"oid": "0e99293d66c6cd13add73ad2cbaa162ebd4fc15a", "url": "https://github.com/apache/beam/commit/0e99293d66c6cd13add73ad2cbaa162ebd4fc15a", "message": "Exit gracefully when docs PR was created on previous RC.", "committedDate": "2020-07-27T23:40:01Z", "type": "commit"}, {"oid": "990d63203d65b9e09a05d6344a93a783511c2399", "url": "https://github.com/apache/beam/commit/990d63203d65b9e09a05d6344a93a783511c2399", "message": "Add Py38 Postcommits to the list of suites to trigger.", "committedDate": "2020-07-27T23:41:27Z", "type": "commit"}, {"oid": "2d2a4278e17ac0b1c013961c4531ddace66fa61f", "url": "https://github.com/apache/beam/commit/2d2a4278e17ac0b1c013961c4531ddace66fa61f", "message": "Removes unclear instruction.", "committedDate": "2020-07-27T23:45:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY4MDY3NQ==", "url": "https://github.com/apache/beam/pull/12384#discussion_r461680675", "bodyText": "Is this approach generally preferred over virtualenv --python=python3 (just asking for my own edification)?", "author": "TheNeuralBit", "createdAt": "2020-07-28T15:40:15Z", "path": "release/src/main/scripts/build_release_candidate.sh", "diffHunk": "@@ -288,14 +288,15 @@ if [[ $confirmation = \"y\" ]]; then\n   mkdir -p ${LOCAL_WEBSITE_REPO}\n \n   echo \"------------------Building Python Doc------------------------\"\n-  virtualenv ${LOCAL_PYTHON_VIRTUALENV}\n-  source ${LOCAL_PYTHON_VIRTUALENV}/bin/activate\n+  python3 -m venv \"${LOCAL_PYTHON_VIRTUALENV}\"", "originalCommit": "2d2a4278e17ac0b1c013961c4531ddace66fa61f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg1OTMxNA==", "url": "https://github.com/apache/beam/pull/12384#discussion_r461859314", "bodyText": "The new apprach works starting from Py3 as venv became released as part of the standard library and is now documented in Python docs: https://docs.python.org/3/library/venv.html. Old approach also works if virtualenv is installed.", "author": "tvalentyn", "createdAt": "2020-07-28T20:30:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY4MDY3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY4MzIxNg==", "url": "https://github.com/apache/beam/pull/12384#discussion_r461683216", "bodyText": "Good catch", "author": "TheNeuralBit", "createdAt": "2020-07-28T15:43:55Z", "path": "release/src/main/scripts/build_release_candidate.sh", "diffHunk": "@@ -288,14 +288,15 @@ if [[ $confirmation = \"y\" ]]; then\n   mkdir -p ${LOCAL_WEBSITE_REPO}\n \n   echo \"------------------Building Python Doc------------------------\"\n-  virtualenv ${LOCAL_PYTHON_VIRTUALENV}\n-  source ${LOCAL_PYTHON_VIRTUALENV}/bin/activate\n+  python3 -m venv \"${LOCAL_PYTHON_VIRTUALENV}\"\n+  source \"${LOCAL_PYTHON_VIRTUALENV}/bin/activate\"\n   cd ${LOCAL_PYTHON_DOC}\n   pip install tox\n   git clone ${GIT_REPO_URL}\n   cd ${BEAM_ROOT_DIR}\n   git checkout ${RELEASE_BRANCH}\n-  cd sdks/python && pip install -r build-requirements.txt && tox -e py37-docs\n+  RELEASE_COMMIT=$(git rev-parse --verify ${RELEASE_BRANCH})", "originalCommit": "2d2a4278e17ac0b1c013961c4531ddace66fa61f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}