{"pr_number": 11809, "pr_title": "[BEAM-10073] Add pubsub performance tests results to the grafana dashboards", "pr_createdAt": "2020-05-25T13:33:11Z", "pr_url": "https://github.com/apache/beam/pull/11809", "timeline": [{"oid": "384761ae349c0d443a42c89a37fcab023de3828c", "url": "https://github.com/apache/beam/commit/384761ae349c0d443a42c89a37fcab023de3828c", "message": "[BEAM-10073] Fix typo in pubsub io performance test job metrics table", "committedDate": "2020-05-25T14:04:04Z", "type": "commit"}, {"oid": "6e77377d176d1ecad692a713b09081149eb9753d", "url": "https://github.com/apache/beam/commit/6e77377d176d1ecad692a713b09081149eb9753d", "message": "[BEAM-10073] Add InfluxDB params to pubsub performance tests", "committedDate": "2020-05-25T14:04:42Z", "type": "commit"}, {"oid": "6e49397cdfc97be5e86d7b985cc9ff272037df0f", "url": "https://github.com/apache/beam/commit/6e49397cdfc97be5e86d7b985cc9ff272037df0f", "message": "[BEAM-10073] Add PubsubIO dashboard to load tests in grafana", "committedDate": "2020-05-25T14:07:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxNTM5MA==", "url": "https://github.com/apache/beam/pull/11809#discussion_r430015390", "bodyText": "Is there any particular reason why \"15\"?", "author": "kamilwu", "createdAt": "2020-05-25T16:44:38Z", "path": ".test-infra/metrics/grafana/dashboards/perftests_metrics/Python_IO_IT_Tests_Dataflow.json", "diffHunk": "@@ -35,7 +35,7 @@\n       },\n       \"hiddenSeries\": false,\n       \"id\": 2,\n-      \"interval\": \"\",\n+      \"interval\": \"15h\",", "originalCommit": "dfbb5588cae1db1f4d3890d6bb5488da6276d6a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAyMjE4NQ==", "url": "https://github.com/apache/beam/pull/11809#discussion_r430022185", "bodyText": "I chose 15h because this interval is set to the AutoJob in jenkins. The java FileBased dashboards have it set to this value (in this case 6h)", "author": "piotr-szuberski", "createdAt": "2020-05-25T17:08:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxNTM5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI2OTg0NA==", "url": "https://github.com/apache/beam/pull/11809#discussion_r430269844", "bodyText": "\"H 15 * * *\" means the job is executed daily at 15:00 (3 p.m.) UTC. So the interval should be 24h", "author": "kamilwu", "createdAt": "2020-05-26T09:14:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxNTM5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI3MTY4MQ==", "url": "https://github.com/apache/beam/pull/11809#discussion_r430271681", "bodyText": "Take a look at the job history: https://builds.apache.org/view/A-D/view/Beam/view/All/job/beam_PubsubIO_Performance_Test_Python/", "author": "kamilwu", "createdAt": "2020-05-26T09:17:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxNTM5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI5NDAyNg==", "url": "https://github.com/apache/beam/pull/11809#discussion_r430294026", "bodyText": "I didn't dig into it and was distracted by other jobs that indeed run every few hours. But now the syntax of schedules is clear. I changed to 24h", "author": "piotr-szuberski", "createdAt": "2020-05-26T09:54:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxNTM5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxNTgxOQ==", "url": "https://github.com/apache/beam/pull/11809#discussion_r430015819", "bodyText": "We should also specify that the test is a streaming job and uses a native Dataflow IO. These are very important information for everyone seeing that chart.", "author": "kamilwu", "createdAt": "2020-05-25T16:45:53Z", "path": ".test-infra/metrics/grafana/dashboards/perftests_metrics/Python_IO_IT_Tests_Dataflow.json", "diffHunk": "@@ -261,6 +261,250 @@\n         \"align\": false,\n         \"alignLevel\": null\n       }\n+    },\n+    {\n+      \"aliasColors\": {},\n+      \"bars\": false,\n+      \"cacheTimeout\": null,\n+      \"dashLength\": 10,\n+      \"dashes\": false,\n+      \"datasource\": \"BeamInfluxDB\",\n+      \"fill\": 1,\n+      \"fillGradient\": 0,\n+      \"gridPos\": {\n+        \"h\": 9,\n+        \"w\": 12,\n+        \"x\": 0,\n+        \"y\": 9\n+      },\n+      \"hiddenSeries\": false,\n+      \"id\": 4,\n+      \"interval\": \"15h\",\n+      \"legend\": {\n+        \"avg\": false,\n+        \"current\": false,\n+        \"max\": false,\n+        \"min\": false,\n+        \"show\": false,\n+        \"total\": false,\n+        \"values\": false\n+      },\n+      \"lines\": true,\n+      \"linewidth\": 2,\n+      \"links\": [],\n+      \"nullPointMode\": \"connected\",\n+      \"options\": {\n+        \"dataLinks\": []\n+      },\n+      \"percentage\": false,\n+      \"pluginVersion\": \"6.7.2\",\n+      \"pointradius\": 2,\n+      \"points\": true,\n+      \"renderer\": \"flot\",\n+      \"seriesOverrides\": [],\n+      \"spaceLength\": 10,\n+      \"stack\": false,\n+      \"steppedLine\": false,\n+      \"targets\": [\n+        {\n+          \"alias\": \"read_time\",\n+          \"groupBy\": [\n+            {\n+              \"params\": [\n+                \"$__interval\"\n+              ],\n+              \"type\": \"time\"\n+            }\n+          ],\n+          \"measurement\": \"python_bqio_read\",\n+          \"orderByTime\": \"ASC\",\n+          \"policy\": \"default\",\n+          \"query\": \"SELECT mean(\\\"value\\\") FROM \\\"python_psio_2GB_results\\\" WHERE \\\"metric\\\" = \\\"pubsub_io_perf_read_runtime\\\" AND $timeFilter GROUP BY time($__interval), \\\"metric\\\"\",\n+          \"rawQuery\": true,\n+          \"refId\": \"A\",\n+          \"resultFormat\": \"time_series\",\n+          \"select\": [\n+            [\n+              {\n+                \"params\": [\n+                  \"value\"\n+                ],\n+                \"type\": \"field\"\n+              },\n+              {\n+                \"params\": [],\n+                \"type\": \"mean\"\n+              }\n+            ]\n+          ],\n+          \"tags\": []\n+        }\n+      ],\n+      \"thresholds\": [],\n+      \"timeFrom\": null,\n+      \"timeRegions\": [],\n+      \"timeShift\": null,\n+      \"title\": \"Reading 2GB of data | Pubsub IO\",", "originalCommit": "dfbb5588cae1db1f4d3890d6bb5488da6276d6a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAyNTkyOQ==", "url": "https://github.com/apache/beam/pull/11809#discussion_r430025929", "bodyText": "Done", "author": "piotr-szuberski", "createdAt": "2020-05-25T17:23:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDAxNTgxOQ=="}], "type": "inlineReview"}, {"oid": "144de27e2b147b8351556869de5c8e698f4f0f7b", "url": "https://github.com/apache/beam/commit/144de27e2b147b8351556869de5c8e698f4f0f7b", "message": "[BEAM-10073] Add PubsubIO performance tests to grafana dashboard", "committedDate": "2020-05-25T17:22:25Z", "type": "forcePushed"}, {"oid": "09a3a82d8eec86acb3c8d31a990bb0cb12a64422", "url": "https://github.com/apache/beam/commit/09a3a82d8eec86acb3c8d31a990bb0cb12a64422", "message": "[BEAM-10073] Add PubsubIO performance tests to grafana dashboard", "committedDate": "2020-05-26T09:48:54Z", "type": "commit"}, {"oid": "09a3a82d8eec86acb3c8d31a990bb0cb12a64422", "url": "https://github.com/apache/beam/commit/09a3a82d8eec86acb3c8d31a990bb0cb12a64422", "message": "[BEAM-10073] Add PubsubIO performance tests to grafana dashboard", "committedDate": "2020-05-26T09:48:54Z", "type": "forcePushed"}, {"oid": "53e6cfab866a4ae30662b9163802c88a97863cd0", "url": "https://github.com/apache/beam/commit/53e6cfab866a4ae30662b9163802c88a97863cd0", "message": "Update Grafana's image tag", "committedDate": "2020-05-26T11:20:04Z", "type": "commit"}]}