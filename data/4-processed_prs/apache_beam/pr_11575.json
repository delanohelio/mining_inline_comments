{"pr_number": 11575, "pr_title": "[BEAM-9699] Add test verifying we can use ZetaSQL in Python SqlTransform", "pr_createdAt": "2020-04-30T00:54:15Z", "pr_url": "https://github.com/apache/beam/pull/11575", "timeline": [{"oid": "7aca5df2034f2611138977a8f3391427b779339f", "url": "https://github.com/apache/beam/commit/7aca5df2034f2611138977a8f3391427b779339f", "message": "Add zetasql to SQL expansion service", "committedDate": "2020-05-04T21:17:01Z", "type": "forcePushed"}, {"oid": "fd0ef426fd3bb3bf8f2581d364fb085d82878fa7", "url": "https://github.com/apache/beam/commit/fd0ef426fd3bb3bf8f2581d364fb085d82878fa7", "message": "Add zetasql to SQL expansion service", "committedDate": "2020-05-14T00:10:23Z", "type": "commit"}, {"oid": "9e016264e665ba5576a7940ade70938c8c1c73ac", "url": "https://github.com/apache/beam/commit/9e016264e665ba5576a7940ade70938c8c1c73ac", "message": "Add support for ZetaSQL in Python SqlTransform\n\nplumbs through queryPlannerClassName param", "committedDate": "2020-05-14T00:24:21Z", "type": "commit"}, {"oid": "9e016264e665ba5576a7940ade70938c8c1c73ac", "url": "https://github.com/apache/beam/commit/9e016264e665ba5576a7940ade70938c8c1c73ac", "message": "Add support for ZetaSQL in Python SqlTransform\n\nplumbs through queryPlannerClassName param", "committedDate": "2020-05-14T00:24:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ4NTgxNQ==", "url": "https://github.com/apache/beam/pull/11575#discussion_r427485815", "bodyText": "I wonder if it would make more sense for this mapping to live on the Java side, and to have this parameter by called \"dialect\" or similar.", "author": "robertwb", "createdAt": "2020-05-19T17:45:19Z", "path": "sdks/python/apache_beam/transforms/sql.py", "diffHunk": "@@ -31,8 +31,15 @@\n \n __all__ = ['SqlTransform']\n \n+_SQL_PLANNERS = {\n+    'zetasql': 'org.apache.beam.sdk.extensions.sql.zetasql.ZetaSQLQueryPlanner',", "originalCommit": "9e016264e665ba5576a7940ade70938c8c1c73ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE5ODU1MA==", "url": "https://github.com/apache/beam/pull/11575#discussion_r428198550", "bodyText": "Yeah I think that makes sense. Pushed a commit that moves it into the Java side. The only caveat is I had to move the external transform code out of SqlTransform itself (and into the expansion-service package) so that we can reference ZetaSQL.", "author": "TheNeuralBit", "createdAt": "2020-05-20T17:50:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ4NTgxNQ=="}], "type": "inlineReview"}, {"oid": "71b9af1d6d32f3a130682e912a1a8707a3d73744", "url": "https://github.com/apache/beam/commit/71b9af1d6d32f3a130682e912a1a8707a3d73744", "message": "Move dialect -> planner class resolution to Java\n\nRequires moving ExternalTransform classes to\nextensions/sql/expansion-service so we can reference ZetaSQL", "committedDate": "2020-05-20T17:45:16Z", "type": "commit"}, {"oid": "7f2ec9857ab895d54c163c524bfef1f5dcac79c8", "url": "https://github.com/apache/beam/commit/7f2ec9857ab895d54c163c524bfef1f5dcac79c8", "message": "add expansion-service package-info (checkstyle)", "committedDate": "2020-05-20T18:27:55Z", "type": "commit"}]}