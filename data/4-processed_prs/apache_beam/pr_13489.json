{"pr_number": 13489, "pr_title": "Workaround for incremental in read_json.", "pr_createdAt": "2020-12-04T19:02:31Z", "pr_url": "https://github.com/apache/beam/pull/13489", "timeline": [{"oid": "5e97503685f0f99c1af16639b2a41ff107bb0228", "url": "https://github.com/apache/beam/commit/5e97503685f0f99c1af16639b2a41ff107bb0228", "message": "Workaround for incremental in read_json.", "committedDate": "2020-12-04T19:02:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTM5Nzc0MA==", "url": "https://github.com/apache/beam/pull/13489#discussion_r541397740", "bodyText": "The motivation isn't clear to me from that issue, could you clarify?", "author": "TheNeuralBit", "createdAt": "2020-12-11T23:15:47Z", "path": "sdks/python/apache_beam/dataframe/io.py", "diffHunk": "@@ -59,6 +59,11 @@ def read_fwf(path, *args, **kwargs):\n \n \n def read_json(path, *args, **kwargs):\n+  if 'nrows' in kwargs:\n+    raise NotImplementedError('nrows not yet supported')\n+  elif kwargs.get('lines', False):\n+    # Work around https://github.com/pandas-dev/pandas/issues/34548.\n+    kwargs = dict(kwargs, nrows=1 << 63)", "originalCommit": "5e97503685f0f99c1af16639b2a41ff107bb0228", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQyNTcyNg==", "url": "https://github.com/apache/beam/pull/13489#discussion_r541425726", "bodyText": "Due to a bug in the code, the entire file is read into memory all at once unless both chunksize and nrows are set.", "author": "robertwb", "createdAt": "2020-12-11T23:48:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTM5Nzc0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ2MjY5OA==", "url": "https://github.com/apache/beam/pull/13489#discussion_r541462698", "bodyText": "Ah ok, thanks", "author": "TheNeuralBit", "createdAt": "2020-12-12T01:02:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTM5Nzc0MA=="}], "type": "inlineReview"}]}