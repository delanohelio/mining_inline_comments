{"pr_number": 13080, "pr_title": "[BEAM-11056] Fix warning message and rename old APIs", "pr_createdAt": "2020-10-12T23:16:58Z", "pr_url": "https://github.com/apache/beam/pull/13080", "timeline": [{"oid": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "url": "https://github.com/apache/beam/commit/ac9772ee7a0b985e2642740e2f5165d4482539fb", "message": "[BEAM-11056] Fix warning message and rename old APIs\n\n1. Replaced `capture` with `record` in top level APIs accessible by\n   users.\n2. Fixed some formatting in the loggings.", "committedDate": "2020-10-12T23:12:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzQ3OQ==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607479", "bodyText": "\"Background caching job\" -> \"Background source recording job\". Please check all occurrences.", "author": "davidyan74", "createdAt": "2020-10-13T00:48:54Z", "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -19,21 +19,21 @@\n \n For internal use only; no backwards-compatibility guarantees.\n \n-A background caching job is a job that captures events for all capturable\n+A background caching job is a job that records events for all recordable", "originalCommit": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYxNzExMw==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503617113", "bodyText": "Switched to background source recording jobs for all the comments.", "author": "KevinGG", "createdAt": "2020-10-13T01:30:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzQ3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzYwOA==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607608", "bodyText": "recording", "author": "davidyan74", "createdAt": "2020-10-13T00:49:27Z", "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -19,21 +19,21 @@\n \n For internal use only; no backwards-compatibility guarantees.\n \n-A background caching job is a job that captures events for all capturable\n+A background caching job is a job that records events for all recordable\n sources of a given pipeline. With Interactive Beam, one such job is started when\n a pipeline run happens (which produces a main job in contrast to the background\n caching job) and meets the following conditions:\n \n-  #. The pipeline contains capturable sources, configured through\n-     interactive_beam.options.capturable_sources.\n+  #. The pipeline contains recordable sources, configured through\n+     interactive_beam.options.recordable_sources.\n   #. No such background job is running.\n   #. No such background job has completed successfully and the cached events are\n-     still valid (invalidated when capturable sources change in the pipeline).\n+     still valid (invalidated when recordable sources change in the pipeline).\n \n Once started, the background caching job runs asynchronously until it hits some\n-capture limit configured in interactive_beam.options. Meanwhile, the main job\n+record limit configured in interactive_beam.options. Meanwhile, the main job", "originalCommit": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYxNzI3Mw==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503617273", "bodyText": "Switched from record to recording", "author": "KevinGG", "createdAt": "2020-10-13T01:30:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzYwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzczNg==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607736", "bodyText": "recording", "author": "davidyan74", "createdAt": "2020-10-13T00:50:05Z", "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -56,7 +56,7 @@ class BackgroundCachingJob(object):\n   \"\"\"A simple abstraction that controls necessary components of a timed and\n   space limited background caching job.\n \n-  A background caching job successfully completes source data capture in 2\n+  A background caching job successfully completes source data record in 2", "originalCommit": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzc4NQ==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607785", "bodyText": "recording", "author": "davidyan74", "createdAt": "2020-10-13T00:50:16Z", "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -165,9 +165,9 @@ def is_background_caching_job_needed(user_pipeline):\n   # If this is True, we can invalidate a previous done/running job if there is\n   # one.\n   cache_changed = is_source_to_cache_changed(user_pipeline)\n-  # When capture replay is disabled, cache is always needed for capturable\n+  # When record replay is disabled, cache is always needed for recordable", "originalCommit": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzg3OA==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607878", "bodyText": "enable_recording_replay", "author": "davidyan74", "createdAt": "2020-10-13T00:50:43Z", "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -165,9 +165,9 @@ def is_background_caching_job_needed(user_pipeline):\n   # If this is True, we can invalidate a previous done/running job if there is\n   # one.\n   cache_changed = is_source_to_cache_changed(user_pipeline)\n-  # When capture replay is disabled, cache is always needed for capturable\n+  # When record replay is disabled, cache is always needed for recordable\n   # sources (if any).\n-  if need_cache and not ie.current_env().options.enable_capture_replay:\n+  if need_cache and not ie.current_env().options.enable_record_replay:", "originalCommit": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzkwOA==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607908", "bodyText": "recording_duration", "author": "davidyan74", "createdAt": "2020-10-13T00:50:56Z", "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -301,13 +301,13 @@ def sizeof_fmt(num, suffix='B'):\n             'In order to have a deterministic replay, a segment of data will '\n             'be recorded from all sources for %s seconds or until a total of '\n             '%s have been written to disk.',\n-            options.capture_duration.total_seconds(),\n-            sizeof_fmt(options.capture_size_limit))\n+            options.record_duration.total_seconds(),", "originalCommit": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwNzkzOQ==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503607939", "bodyText": "recording_size_limit", "author": "davidyan74", "createdAt": "2020-10-13T00:51:05Z", "path": "sdks/python/apache_beam/runners/interactive/background_caching_job.py", "diffHunk": "@@ -301,13 +301,13 @@ def sizeof_fmt(num, suffix='B'):\n             'In order to have a deterministic replay, a segment of data will '\n             'be recorded from all sources for %s seconds or until a total of '\n             '%s have been written to disk.',\n-            options.capture_duration.total_seconds(),\n-            sizeof_fmt(options.capture_size_limit))\n+            options.record_duration.total_seconds(),\n+            sizeof_fmt(options.record_size_limit))", "originalCommit": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYwODE5MA==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503608190", "bodyText": "enable_recording_replay. Basically, if \"capture\" is used as a noun, change it to \"recording\" instead of \"record\", since \"record\" used as a noun usually means an individual record instead of the act of recording. Please check all occurrences.", "author": "davidyan74", "createdAt": "2020-10-13T00:52:00Z", "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -52,98 +53,116 @@\n class Options(interactive_options.InteractiveOptions):\n   \"\"\"Options that guide how Interactive Beam works.\"\"\"\n   @property\n-  def enable_capture_replay(self):\n-    \"\"\"Whether replayable source data capture should be replayed for multiple\n-    PCollection evaluations and pipeline runs as long as the data captured is\n+  def enable_record_replay(self):", "originalCommit": "ac9772ee7a0b985e2642740e2f5165d4482539fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "06ede36b4bda68503217862450b1c1975234da37", "url": "https://github.com/apache/beam/commit/06ede36b4bda68503217862450b1c1975234da37", "message": "Changes based on comments.", "committedDate": "2020-10-13T01:29:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYxNzg1NA==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503617854", "bodyText": "background source recording job", "author": "davidyan74", "createdAt": "2020-10-13T01:33:25Z", "path": "sdks/python/apache_beam/runners/interactive/interactive_beam.py", "diffHunk": "@@ -91,23 +91,23 @@ def recordable_sources(self):\n     return self.capture_control._capturable_sources\n \n   @property\n-  def record_duration(self):\n-    \"\"\"The data record of sources ends as soon as the background caching job\n+  def recording_duration(self):\n+    \"\"\"The data recording of sources ends as soon as the background caching job", "originalCommit": "06ede36b4bda68503217862450b1c1975234da37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYyMjU0MQ==", "url": "https://github.com/apache/beam/pull/13080#discussion_r503622541", "bodyText": "Done.", "author": "KevinGG", "createdAt": "2020-10-13T01:53:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzYxNzg1NA=="}], "type": "inlineReview"}, {"oid": "3314f5ebd97f256b1f0508eb5600c04b514ff117", "url": "https://github.com/apache/beam/commit/3314f5ebd97f256b1f0508eb5600c04b514ff117", "message": "Some additional fixes.", "committedDate": "2020-10-13T01:43:44Z", "type": "commit"}, {"oid": "dffb31814473814ee3dfb6277da17d57a06e2217", "url": "https://github.com/apache/beam/commit/dffb31814473814ee3dfb6277da17d57a06e2217", "message": "Fixed line too long.", "committedDate": "2020-10-13T02:01:48Z", "type": "commit"}]}