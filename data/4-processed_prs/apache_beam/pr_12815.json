{"pr_number": 12815, "pr_title": "[BEAM-9561] Improve WontImplement reporting.", "pr_createdAt": "2020-09-10T20:03:16Z", "pr_url": "https://github.com/apache/beam/pull/12815", "timeline": [{"oid": "40cdaf608c66ade0b1705a7d345d44b68aa7c155", "url": "https://github.com/apache/beam/commit/40cdaf608c66ade0b1705a7d345d44b68aa7c155", "message": "[BEAM-9561] Improve WontImplement reporting.\n\nOnly track as WontImplement those tests that are actually raising WontImplement errors.\n\nAlso report summary on failure.", "committedDate": "2020-09-10T20:02:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY3MjYwMg==", "url": "https://github.com/apache/beam/pull/12815#discussion_r486672602", "bodyText": "I assume all the errors here are under the precondition that WontImplementError is seen thus even the regex is not matched we know it is following WontImplementError?", "author": "y1chi", "createdAt": "2020-09-10T22:39:47Z", "path": "sdks/python/apache_beam/dataframe/doctests.py", "diffHunk": "@@ -319,25 +319,24 @@ def run(self, test, **kwargs):\n         # Don't fail doctests that raise this error.\n         example.exc_msg = (\n             'apache_beam.dataframe.frame_base.WontImplementError: ...')\n-        self.wont_implement += 1\n     with self._test_env.context():\n       result = super(BeamDataframeDoctestRunner, self).run(test, **kwargs)\n       return result\n \n   def report_success(self, out, test, example, got):\n     def extract_concise_reason(got):\n-      m = re.search(r\"(WontImplementError:.*)\\n$\", got)\n+      m = re.search(r\"WontImplementError:\\s+(.*)\\n$\", got)\n       if m:\n         return m.group(1)\n       elif \"NameError\" in got:\n-        return \"NameError\"\n+        return \"NameError following WontImplementError\"", "originalCommit": "40cdaf608c66ade0b1705a7d345d44b68aa7c155", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzIzMDk0MA==", "url": "https://github.com/apache/beam/pull/12815#discussion_r487230940", "bodyText": "Correct.", "author": "robertwb", "createdAt": "2020-09-11T18:57:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY3MjYwMg=="}], "type": "inlineReview"}]}