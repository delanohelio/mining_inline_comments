{"pr_number": 10714, "pr_title": "[BEAM-8691] bigtable-client-core dependency upgrade", "pr_createdAt": "2020-01-29T19:02:45Z", "pr_url": "https://github.com/apache/beam/pull/10714", "timeline": [{"oid": "13872419a108e5685f897f56dd6f66e807394594", "url": "https://github.com/apache/beam/commit/13872419a108e5685f897f56dd6f66e807394594", "message": "bigtable-client-core 1.13.0 and exclusion and gax", "committedDate": "2020-01-29T17:29:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjU3NTQyMw==", "url": "https://github.com/apache/beam/pull/10714#discussion_r372575423", "bodyText": "The exposed API surface reduced.", "author": "suztomo", "createdAt": "2020-01-29T19:08:50Z", "path": "sdks/java/io/google-cloud-platform/src/test/java/org/apache/beam/sdk/io/gcp/GcpApiSurfaceTest.java", "diffHunk": "@@ -61,11 +61,9 @@ public void testGcpApiSurface() throws Exception {\n             classesInPackage(\"com.google.api.client.util\"),\n             classesInPackage(\"com.google.api.services.bigquery.model\"),\n             classesInPackage(\"com.google.auth\"),\n-            classesInPackage(\"com.google.bigtable.admin.v2\"),", "originalCommit": "478baf61f17d99ebeaaa0aa4a1161dfdc9292959", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8f97dba6508823ba51f9fb9df785b499019c82d4", "url": "https://github.com/apache/beam/commit/8f97dba6508823ba51f9fb9df785b499019c82d4", "message": "Controlling grpc-grpclb and grpc-core", "committedDate": "2020-01-29T20:21:14Z", "type": "commit"}, {"oid": "8f97dba6508823ba51f9fb9df785b499019c82d4", "url": "https://github.com/apache/beam/commit/8f97dba6508823ba51f9fb9df785b499019c82d4", "message": "Controlling grpc-grpclb and grpc-core", "committedDate": "2020-01-29T20:21:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDIxOTcwMQ==", "url": "https://github.com/apache/beam/pull/10714#discussion_r374219701", "bodyText": "Why are these exclusions needed?\nThe maven pom that this module will generate has grpc-core and grpclb as top level dependencies and maven resolution rules will choose those over the ones specified by bigtable-client-core or google-cloud-core-grpc so I would have expected that we wouldn't need the exclusions.", "author": "lukecwik", "createdAt": "2020-02-03T16:56:24Z", "path": "sdks/java/io/google-cloud-platform/build.gradle", "diffHunk": "@@ -41,9 +41,14 @@ dependencies {\n   compile library.java.google_auth_library_credentials\n   compile library.java.google_auth_library_oauth2_http\n   compile library.java.google_cloud_bigquery_storage\n-  compile library.java.google_cloud_bigtable_client_core\n+  compile(library.java.google_cloud_bigtable_client_core) {", "originalCommit": "8f97dba6508823ba51f9fb9df785b499019c82d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDIzMDE0MQ==", "url": "https://github.com/apache/beam/pull/10714#discussion_r374230141", "bodyText": "These exclusions are for Maven's version range constraint. The dependency was transitively requesting io.grpc:grpc-core:jar:[1.26.0,1.26.0], while another dependency requests io.grpc:grpc-core:jar:[1.25.0,1.25.0]. This version range conflict would fail the build before Maven's dependency mediation (that would choose the closest one) happens. Detail in https://issues.apache.org/jira/browse/BEAM-8691?focusedCommentId=17025456&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17025456", "author": "suztomo", "createdAt": "2020-02-03T17:16:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDIxOTcwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM2MTU0NA==", "url": "https://github.com/apache/beam/pull/10714#discussion_r374361544", "bodyText": "I wasn't aware that the build would fail before the dependency mediation kicked in.", "author": "lukecwik", "createdAt": "2020-02-03T21:51:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDIxOTcwMQ=="}], "type": "inlineReview"}]}