{"pr_number": 11623, "pr_title": "[BEAM-9908] Fix Python build failures in release script.", "pr_createdAt": "2020-05-06T19:34:41Z", "pr_url": "https://github.com/apache/beam/pull/11623", "timeline": [{"oid": "5971d779cdaa307211e236dda985e2230fb1727b", "url": "https://github.com/apache/beam/commit/5971d779cdaa307211e236dda985e2230fb1727b", "message": "[BEAM-9908] Fix Python build failures in release script.", "committedDate": "2020-05-06T19:33:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA1MDQ2NQ==", "url": "https://github.com/apache/beam/pull/11623#discussion_r421050465", "bodyText": "this is interesting cause I thought this script uses python2, and then in this PR tox -e py37-docs looks like work with python2", "author": "amaliujia", "createdAt": "2020-05-06T19:49:55Z", "path": "release/src/main/scripts/build_release_candidate.sh", "diffHunk": "@@ -275,7 +276,7 @@ if [[ $confirmation = \"y\" ]]; then\n   git clone ${GIT_REPO_URL}\n   cd ${BEAM_ROOT_DIR}\n   git checkout ${RELEASE_BRANCH}\n-  cd sdks/python && tox -e docs\n+  cd sdks/python && pip install -r build-requirements.txt && tox -e py37-docs", "originalCommit": "5971d779cdaa307211e236dda985e2230fb1727b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4NjgwNw==", "url": "https://github.com/apache/beam/pull/11623#discussion_r421086807", "bodyText": "There are 2 virtualenvs here. The one in line 272 will use the default python version, and the one created by tox will use python3.7.\nTox runs \"python setup.py sdist\" in the first virtualenv and installs the tarball in the second.", "author": "udim", "createdAt": "2020-05-06T20:56:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA1MDQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA5NzEyNw==", "url": "https://github.com/apache/beam/pull/11623#discussion_r421097127", "bodyText": "Thanks for clarifying this.", "author": "amaliujia", "createdAt": "2020-05-06T21:15:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA1MDQ2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4ODA5MQ==", "url": "https://github.com/apache/beam/pull/11623#discussion_r421088091", "bodyText": "Please also update the release guide:\nhttps://github.com/apache/beam/blame/master/website/src/contribute/release-guide.md#L783", "author": "udim", "createdAt": "2020-05-06T20:58:59Z", "path": "release/src/main/scripts/build_release_candidate.sh", "diffHunk": "@@ -275,7 +276,7 @@ if [[ $confirmation = \"y\" ]]; then\n   git clone ${GIT_REPO_URL}\n   cd ${BEAM_ROOT_DIR}\n   git checkout ${RELEASE_BRANCH}\n-  cd sdks/python && tox -e docs\n+  cd sdks/python && pip install -r build-requirements.txt && tox -e py37-docs", "originalCommit": "5971d779cdaa307211e236dda985e2230fb1727b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4OTM1Mw==", "url": "https://github.com/apache/beam/pull/11623#discussion_r421089353", "bodyText": "I can do that.. but I hope we get rid of the \"manual\" steps in the future. They add no utility over the script and make the release guide hard to read.", "author": "ibzib", "createdAt": "2020-05-06T21:01:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4ODA5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA5MjU1Nw==", "url": "https://github.com/apache/beam/pull/11623#discussion_r421092557", "bodyText": "Done", "author": "ibzib", "createdAt": "2020-05-06T21:06:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4ODA5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA5MjY2MQ==", "url": "https://github.com/apache/beam/pull/11623#discussion_r421092661", "bodyText": "Done", "author": "ibzib", "createdAt": "2020-05-06T21:06:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4ODA5MQ=="}], "type": "inlineReview"}, {"oid": "3c8e188e5bc0255f1c99c726c7783ac1e7471696", "url": "https://github.com/apache/beam/commit/3c8e188e5bc0255f1c99c726c7783ac1e7471696", "message": "Update instructions in release guide.", "committedDate": "2020-05-06T21:06:04Z", "type": "commit"}]}