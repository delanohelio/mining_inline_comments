{"pr_number": 12905, "pr_title": "[BEAM-8660] Use PortableOptions.artifact_endpoint if provided over value reported from jobserver", "pr_createdAt": "2020-09-22T17:15:55Z", "pr_url": "https://github.com/apache/beam/pull/12905", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAwNDk3NA==", "url": "https://github.com/apache/beam/pull/12905#discussion_r493004974", "bodyText": "You will need to correct the formatting here:\n12:35:40 -    artifact_endpoint = (self.artifact_endpoint\n12:35:40 -                         or prepare_response.artifact_staging_endpoint.url)\n12:35:40 +    artifact_endpoint = (\n12:35:40 +        self.artifact_endpoint or\n12:35:40 +        prepare_response.artifact_staging_endpoint.url)", "author": "ibzib", "createdAt": "2020-09-22T20:12:31Z", "path": "sdks/python/apache_beam/runners/portability/portable_runner.py", "diffHunk": "@@ -105,9 +106,11 @@ def submit(self, proto_pipeline):\n     Submit and run the pipeline defined by `proto_pipeline`.\n     \"\"\"\n     prepare_response = self.prepare(proto_pipeline)\n+    artifact_endpoint = (self.artifact_endpoint", "originalCommit": "3f7d0434bde993189e1210f0fdec72cdd7bee49f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzkyMDI2OQ==", "url": "https://github.com/apache/beam/pull/12905#discussion_r493920269", "bodyText": "Ah thanks, sorry forgot to run the lint", "author": "sambvfx", "createdAt": "2020-09-23T22:01:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAwNDk3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAwNTA3MQ==", "url": "https://github.com/apache/beam/pull/12905#discussion_r493005071", "bodyText": "Can we add a test for this to prevent future regressions?", "author": "ibzib", "createdAt": "2020-09-22T20:12:45Z", "path": "sdks/python/apache_beam/runners/portability/portable_runner.py", "diffHunk": "@@ -105,9 +106,11 @@ def submit(self, proto_pipeline):\n     Submit and run the pipeline defined by `proto_pipeline`.\n     \"\"\"\n     prepare_response = self.prepare(proto_pipeline)\n+    artifact_endpoint = (self.artifact_endpoint", "originalCommit": "3f7d0434bde993189e1210f0fdec72cdd7bee49f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzcyNjExMw==", "url": "https://github.com/apache/beam/pull/12905#discussion_r493726113", "bodyText": "Sure thing I'll come up with something.", "author": "sambvfx", "createdAt": "2020-09-23T16:24:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAwNTA3MQ=="}], "type": "inlineReview"}, {"oid": "935d1d8e87356a8ac98bd938b5ff4c90291877b5", "url": "https://github.com/apache/beam/commit/935d1d8e87356a8ac98bd938b5ff4c90291877b5", "message": "[BEAM-8660] Use PortableOptions.artifact_endpoint if provided over endpoint reported from jobserver", "committedDate": "2020-09-23T21:59:55Z", "type": "commit"}, {"oid": "abc5e7fab90e66defd1b7cfd1aeb7ef9012416ab", "url": "https://github.com/apache/beam/commit/abc5e7fab90e66defd1b7cfd1aeb7ef9012416ab", "message": "Add artifact_endpoint to TestJobServicePlan", "committedDate": "2020-09-23T21:59:55Z", "type": "commit"}, {"oid": "300d38d70d701a370707de7865608141d936e9ba", "url": "https://github.com/apache/beam/commit/300d38d70d701a370707de7865608141d936e9ba", "message": "Add simple test for artifact_endpoint", "committedDate": "2020-09-23T21:59:55Z", "type": "commit"}, {"oid": "300d38d70d701a370707de7865608141d936e9ba", "url": "https://github.com/apache/beam/commit/300d38d70d701a370707de7865608141d936e9ba", "message": "Add simple test for artifact_endpoint", "committedDate": "2020-09-23T21:59:55Z", "type": "forcePushed"}]}