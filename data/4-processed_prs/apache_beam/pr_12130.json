{"pr_number": 12130, "pr_title": "[BEAM-10381] Increase retries in pull_licenses_java.py from 3 to 9.", "pr_createdAt": "2020-06-30T05:17:51Z", "pr_url": "https://github.com/apache/beam/pull/12130", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzgwMzg3OA==", "url": "https://github.com/apache/beam/pull/12130#discussion_r447803878", "bodyText": "There is an exponential weight on L47. With 9 retries it will wait for a long time. I do not know what is the multiplier, but even with a multiplier of 1, this will be almost 10 minutes wait before the last retry.\nShould we change retry number? Or the exponential multiplier?", "author": "aaltay", "createdAt": "2020-06-30T16:09:34Z", "path": "sdks/java/container/license_scripts/pull_licenses_java.py", "diffHunk": "@@ -39,7 +39,7 @@\n from urllib.request import urlopen, URLError, HTTPError\n \n SOURCE_CODE_REQUIRED_LICENSES = ['lgpl', 'glp', 'cddl', 'mpl']\n-RETRY_NUM = 3\n+RETRY_NUM = 9", "originalCommit": "f61da836181cf295d03d8e6cb21141f8117f0363", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkxNjQxNw==", "url": "https://github.com/apache/beam/pull/12130#discussion_r447916417", "bodyText": "I suggest we use wait_fixed(5) instead of the wait_exponential. Since we were only setting retries to 3 before it should have been waiting:\n2s, 4s, 8s.\nwait_fixed(5) will spend about a minute max on each url. I don't want to make it wait much more. I believe the test will time out if we make it too long.\nwait: 5s, 5s, 5s, 5s, 5s, 5s, 5s, 5s, 5s\nI suggest we try this first. WDYT? Here are the tenacity docs:\nhttps://tenacity.readthedocs.io/en/latest/", "author": "ajamato", "createdAt": "2020-06-30T19:06:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzgwMzg3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkzMDYzOA==", "url": "https://github.com/apache/beam/pull/12130#discussion_r447930638", "bodyText": "Sounds good.", "author": "aaltay", "createdAt": "2020-06-30T19:33:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzgwMzg3OA=="}], "type": "inlineReview"}, {"oid": "6657de019b235a4821dc93c0b997ad76849e1cb2", "url": "https://github.com/apache/beam/commit/6657de019b235a4821dc93c0b997ad76849e1cb2", "message": "[BEAM-10381] Increase retries in pull_licenses_java.py from 3 to 9.", "committedDate": "2020-06-30T18:59:11Z", "type": "forcePushed"}, {"oid": "9ca80ae9a0bfc527a39eeab717cc923e66bda793", "url": "https://github.com/apache/beam/commit/9ca80ae9a0bfc527a39eeab717cc923e66bda793", "message": "[BEAM-10381] Increase retries in pull_licenses_java.py from 3 to 9.", "committedDate": "2020-06-30T19:12:36Z", "type": "commit"}, {"oid": "9ca80ae9a0bfc527a39eeab717cc923e66bda793", "url": "https://github.com/apache/beam/commit/9ca80ae9a0bfc527a39eeab717cc923e66bda793", "message": "[BEAM-10381] Increase retries in pull_licenses_java.py from 3 to 9.", "committedDate": "2020-06-30T19:12:36Z", "type": "forcePushed"}]}