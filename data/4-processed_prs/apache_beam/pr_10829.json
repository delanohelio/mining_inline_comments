{"pr_number": 10829, "pr_title": "[BEAM-9291] Upload graph option in dataflow's python sdk", "pr_createdAt": "2020-02-11T13:37:51Z", "pr_url": "https://github.com/apache/beam/pull/10829", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg5NDQyMA==", "url": "https://github.com/apache/beam/pull/10829#discussion_r377894420", "bodyText": "Looking at the Java implementation (#7047), this is an experiment and not a top level option.\nI believe you can handle this similar to other experiments in internal/apiclient.py", "author": "aaltay", "createdAt": "2020-02-11T20:58:43Z", "path": "sdks/python/apache_beam/options/pipeline_options.py", "diffHunk": "@@ -562,6 +562,12 @@ def _add_argparse_args(cls, parser):\n         default=None,\n         choices=['COST_OPTIMIZED', 'SPEED_OPTIMIZED'],\n         help='Set the Flexible Resource Scheduling mode')\n+    parser.add_argument(", "originalCommit": "3d970e2e85aebc5e6f15672618484146cd7067a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAwNjQ5NQ==", "url": "https://github.com/apache/beam/pull/10829#discussion_r378006495", "bodyText": "Re option, ok, I will handle it as experiment.", "author": "stankiewicz", "createdAt": "2020-02-12T02:13:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg5NDQyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg5NDY2Mg==", "url": "https://github.com/apache/beam/pull/10829#discussion_r377894662", "bodyText": "Similarly, this staging can happen in apiclient.py if the experiment is present.", "author": "aaltay", "createdAt": "2020-02-11T20:59:12Z", "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "diffHunk": "@@ -539,6 +541,15 @@ def run_pipeline(self, pipeline, options):\n     # Get a Dataflow API client and set its options\n     self.dataflow_client = apiclient.DataflowApplicationClient(options)\n \n+    if self.job.options.view_as(GoogleCloudOptions).upload_graph:", "originalCommit": "3d970e2e85aebc5e6f15672618484146cd7067a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAwNjc2MA==", "url": "https://github.com/apache/beam/pull/10829#discussion_r378006760", "bodyText": "Re hiding it in apiclient - in first commit I've implemented it that way then I've noticed java implementation where it is implemented  in runner instead of apiclient and decided to move.  Will move again and rewrite tests.", "author": "stankiewicz", "createdAt": "2020-02-12T02:14:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg5NDY2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU1OTc2Nw==", "url": "https://github.com/apache/beam/pull/10829#discussion_r378559767", "bodyText": "Could you revert the change to this file?", "author": "aaltay", "createdAt": "2020-02-12T22:52:48Z", "path": "sdks/python/apache_beam/options/pipeline_options.py", "diffHunk": "@@ -563,6 +563,7 @@ def _add_argparse_args(cls, parser):\n         choices=['COST_OPTIMIZED', 'SPEED_OPTIMIZED'],\n         help='Set the Flexible Resource Scheduling mode')\n \n+", "originalCommit": "bd46ab6fe35a7251d56017898705289e5499f4c9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU1OTc4NQ==", "url": "https://github.com/apache/beam/pull/10829#discussion_r378559785", "bodyText": "Could you revert the change to this file?", "author": "aaltay", "createdAt": "2020-02-12T22:52:50Z", "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "diffHunk": "@@ -539,6 +539,7 @@ def run_pipeline(self, pipeline, options):\n     # Get a Dataflow API client and set its options\n     self.dataflow_client = apiclient.DataflowApplicationClient(options)\n \n+", "originalCommit": "bd46ab6fe35a7251d56017898705289e5499f4c9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9f61d0f88fcf413409205ebb58e11d6e0d5aa13d", "url": "https://github.com/apache/beam/commit/9f61d0f88fcf413409205ebb58e11d6e0d5aa13d", "message": "lint, move functionality to apiclient\nyapf", "committedDate": "2020-02-13T15:37:33Z", "type": "forcePushed"}, {"oid": "fff1d04c30b26ef47d23247fb1e18dc5a3502e7f", "url": "https://github.com/apache/beam/commit/fff1d04c30b26ef47d23247fb1e18dc5a3502e7f", "message": "upload graph fuctionality\nlint, move functionality to apiclient\nyapf", "committedDate": "2020-02-13T15:39:16Z", "type": "commit"}, {"oid": "fff1d04c30b26ef47d23247fb1e18dc5a3502e7f", "url": "https://github.com/apache/beam/commit/fff1d04c30b26ef47d23247fb1e18dc5a3502e7f", "message": "upload graph fuctionality\nlint, move functionality to apiclient\nyapf", "committedDate": "2020-02-13T15:39:16Z", "type": "forcePushed"}, {"oid": "5e2cfe7b891305300835b82243273ed92946cb86", "url": "https://github.com/apache/beam/commit/5e2cfe7b891305300835b82243273ed92946cb86", "message": "Update apiclient.py", "committedDate": "2020-02-13T20:58:07Z", "type": "commit"}]}