{"pr_number": 11452, "pr_title": "[BEAM-9692] Move apply_Read to PTransformOverride", "pr_createdAt": "2020-04-17T19:37:45Z", "pr_url": "https://github.com/apache/beam/pull/11452", "timeline": [{"oid": "311ee71fd91f8349a985932e3bf58a220880682d", "url": "https://github.com/apache/beam/commit/311ee71fd91f8349a985932e3bf58a220880682d", "message": "replace read\n\nChange-Id: I3f922f955883f02e8d9d6f34c0f4e1e2188da09c", "committedDate": "2020-04-17T19:40:02Z", "type": "forcePushed"}, {"oid": "666326487beb7950412ae353528b4fb1d000e945", "url": "https://github.com/apache/beam/commit/666326487beb7950412ae353528b4fb1d000e945", "message": "[BEAM-9692] Replace the apply_read with a PTransformOverride\n\nChange-Id: Ie61304cb1ccd4e1f8d1c93ad547968cd36ff4910", "committedDate": "2020-04-22T00:11:17Z", "type": "forcePushed"}, {"oid": "44cd1175f128074a2fec85c69409a341ccc8ac37", "url": "https://github.com/apache/beam/commit/44cd1175f128074a2fec85c69409a341ccc8ac37", "message": "[BEAM-9692] Replace the apply_read with a PTransformOverride\n\nChange-Id: Ie61304cb1ccd4e1f8d1c93ad547968cd36ff4910", "committedDate": "2020-04-22T00:14:00Z", "type": "commit"}, {"oid": "44cd1175f128074a2fec85c69409a341ccc8ac37", "url": "https://github.com/apache/beam/commit/44cd1175f128074a2fec85c69409a341ccc8ac37", "message": "[BEAM-9692] Replace the apply_read with a PTransformOverride\n\nChange-Id: Ie61304cb1ccd4e1f8d1c93ad547968cd36ff4910", "committedDate": "2020-04-22T00:14:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ3MTQyMw==", "url": "https://github.com/apache/beam/pull/11452#discussion_r417471423", "bodyText": "@ananvay we should look at how these interact with auto-opt-in at the service.", "author": "robertwb", "createdAt": "2020-04-29T17:03:00Z", "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner.py", "diffHunk": "@@ -117,13 +117,15 @@ class DataflowRunner(PipelineRunner):\n   # TODO: Remove the apache_beam.pipeline dependency in CreatePTransformOverride\n   from apache_beam.runners.dataflow.ptransform_overrides import CombineValuesPTransformOverride\n   from apache_beam.runners.dataflow.ptransform_overrides import CreatePTransformOverride\n-  from apache_beam.runners.dataflow.ptransform_overrides import ReadPTransformOverride\n   from apache_beam.runners.dataflow.ptransform_overrides import JrhReadPTransformOverride\n+  from apache_beam.runners.dataflow.ptransform_overrides import ReadPTransformOverride\n+  from apache_beam.runners.dataflow.ptransform_overrides import NativeReadPTransformOverride\n \n-  # Thesse overrides should be applied before the proto representation of the\n+  # These overrides should be applied before the proto representation of the\n   # graph is created.\n   _PTRANSFORM_OVERRIDES = [\n-      CombineValuesPTransformOverride()\n+      CombineValuesPTransformOverride(),", "originalCommit": "44cd1175f128074a2fec85c69409a341ccc8ac37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzUxMjc0Nw==", "url": "https://github.com/apache/beam/pull/11452#discussion_r417512747", "bodyText": "+1. To get some context, what do these overrides do differently for JRH vs. UW?", "author": "ananvay", "createdAt": "2020-04-29T18:09:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ3MTQyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzUxNTE1Nw==", "url": "https://github.com/apache/beam/pull/11452#discussion_r417515157", "bodyText": "Looking at other parts, seems like this would be the same for both? And the only difference would be the JRH_PTRANSFORM_OVERRIDES section below (which basically is JrhReadPTransformOverride)? I'm not sure why that Read override is needed differently for JRH...", "author": "ananvay", "createdAt": "2020-04-29T18:13:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ3MTQyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY2MTg2Ng==", "url": "https://github.com/apache/beam/pull/11452#discussion_r417661866", "bodyText": "I'm not sure that it will have any effect on the service side. The v1b3 Job graph that is produced is the same.", "author": "rohdesamuel", "createdAt": "2020-04-29T23:01:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ3MTQyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY5NDUxMw==", "url": "https://github.com/apache/beam/pull/11452#discussion_r418694513", "bodyText": "Correct, this change does not change the existing behavior, but the concern is that the existing behavior might be sub-optimal.", "author": "robertwb", "createdAt": "2020-05-01T19:15:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ3MTQyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ3MzQzNg==", "url": "https://github.com/apache/beam/pull/11452#discussion_r417473436", "bodyText": "These three feel very redundant; can a common helper method be used here?", "author": "robertwb", "createdAt": "2020-04-29T17:06:09Z", "path": "sdks/python/apache_beam/runners/dataflow/dataflow_runner_test.py", "diffHunk": "@@ -594,6 +594,121 @@ def test_combine_values_translation(self):\n     self.assertIn(\n         u'CombineValues', set(step[u'kind'] for step in job_dict[u'steps']))\n \n+  def test_read_create_translation(self):", "originalCommit": "44cd1175f128074a2fec85c69409a341ccc8ac37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzY1ODYyMg==", "url": "https://github.com/apache/beam/pull/11452#discussion_r417658622", "bodyText": "Done, moved to a single expect method.", "author": "rohdesamuel", "createdAt": "2020-04-29T22:52:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ3MzQzNg=="}], "type": "inlineReview"}, {"oid": "73088bfcd42d9b8b3c08958d6086d7df3ac8a8da", "url": "https://github.com/apache/beam/commit/73088bfcd42d9b8b3c08958d6086d7df3ac8a8da", "message": "move redundant testing pieces to function\n\nChange-Id: Ia8feb7885729ee3cb52d5197899170d549dd5930", "committedDate": "2020-04-29T22:51:21Z", "type": "commit"}, {"oid": "6c78c795e4015f5a2b968f270c5c0a840651a85c", "url": "https://github.com/apache/beam/commit/6c78c795e4015f5a2b968f270c5c0a840651a85c", "message": "Test simplification.", "committedDate": "2020-05-01T19:25:32Z", "type": "commit"}]}