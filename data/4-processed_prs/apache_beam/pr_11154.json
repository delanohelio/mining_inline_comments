{"pr_number": 11154, "pr_title": "[BEAM-1819] Key should be available in @OnTimer methods", "pr_createdAt": "2020-03-18T11:21:14Z", "pr_url": "https://github.com/apache/beam/pull/11154", "timeline": [{"oid": "2e4880a38e885a1936b17b7d96db5c28976fd517", "url": "https://github.com/apache/beam/commit/2e4880a38e885a1936b17b7d96db5c28976fd517", "message": "Adding test case", "committedDate": "2020-03-02T13:32:03Z", "type": "commit"}, {"oid": "2de0744ecd574477d964a74f4cb5d0e2f8dca7a8", "url": "https://github.com/apache/beam/commit/2de0744ecd574477d964a74f4cb5d0e2f8dca7a8", "message": "Adding Key Parameter with String return type", "committedDate": "2020-03-06T14:10:24Z", "type": "commit"}, {"oid": "018d8198b5f4eadbb489b8c18d88a94b6b1d76d4", "url": "https://github.com/apache/beam/commit/018d8198b5f4eadbb489b8c18d88a94b6b1d76d4", "message": "Adding Key Parameter with String return type", "committedDate": "2020-03-10T10:09:46Z", "type": "commit"}, {"oid": "cc1d7b8dce9dd17fe82c3841cbddc2901014bb14", "url": "https://github.com/apache/beam/commit/cc1d7b8dce9dd17fe82c3841cbddc2901014bb14", "message": "Test TimerSpec update", "committedDate": "2020-03-11T10:32:20Z", "type": "commit"}, {"oid": "1d9a1267c60756ed6f1d87f965b475acaf0834b0", "url": "https://github.com/apache/beam/commit/1d9a1267c60756ed6f1d87f965b475acaf0834b0", "message": "Added Type Matching Functionality of Key Parameter", "committedDate": "2020-03-11T14:57:54Z", "type": "commit"}, {"oid": "f54bab5cb7e27718754f42b03d90c28f2b788351", "url": "https://github.com/apache/beam/commit/f54bab5cb7e27718754f42b03d90c28f2b788351", "message": "Added Type Matching Test Case", "committedDate": "2020-03-12T11:58:22Z", "type": "commit"}, {"oid": "e921447f0faf28d24b0973d9e18921152bef3dc3", "url": "https://github.com/apache/beam/commit/e921447f0faf28d24b0973d9e18921152bef3dc3", "message": "Merge branch 'master' into feature/BEAM-1819\n\n# Conflicts:\n#\trunners/core-java/src/main/java/org/apache/beam/runners/core/SimpleDoFnRunner.java", "committedDate": "2020-03-12T12:13:41Z", "type": "commit"}, {"oid": "552f26ca3220f6aa21c7bccc9b095ab004420f16", "url": "https://github.com/apache/beam/commit/552f26ca3220f6aa21c7bccc9b095ab004420f16", "message": "Generic name update", "committedDate": "2020-03-12T12:19:19Z", "type": "commit"}, {"oid": "e2be35d15582a7624e8a73ff9db20e2470a80160", "url": "https://github.com/apache/beam/commit/e2be35d15582a7624e8a73ff9db20e2470a80160", "message": "Merge branch 'master' into feature/BEAM-1819\n\n# Conflicts:\n#\tsdks/java/core/src/main/java/org/apache/beam/sdk/transforms/DoFnTester.java\n#\tsdks/java/core/src/main/java/org/apache/beam/sdk/transforms/reflect/DoFnSignatures.java", "committedDate": "2020-03-16T08:23:00Z", "type": "commit"}, {"oid": "2daf158aac74e77db9d1afc61a96a2b8a4e71a15", "url": "https://github.com/apache/beam/commit/2daf158aac74e77db9d1afc61a96a2b8a4e71a15", "message": "Updating DoFnSignatures", "committedDate": "2020-03-16T08:33:15Z", "type": "commit"}, {"oid": "976602184c6a36b568244182f0458729800f349c", "url": "https://github.com/apache/beam/commit/976602184c6a36b568244182f0458729800f349c", "message": "Updating Test Cases", "committedDate": "2020-03-18T08:26:30Z", "type": "commit"}, {"oid": "00c6e6c5e3b43bda3d1e320532df81ed8cd90c1f", "url": "https://github.com/apache/beam/commit/00c6e6c5e3b43bda3d1e320532df81ed8cd90c1f", "message": "Merge branch 'master' into feature/BEAM-1819", "committedDate": "2020-03-18T08:31:47Z", "type": "commit"}, {"oid": "42b5bea1611e60e6a34c3b77efc13ef613963dc3", "url": "https://github.com/apache/beam/commit/42b5bea1611e60e6a34c3b77efc13ef613963dc3", "message": "Removing extra ontimer constructor", "committedDate": "2020-03-18T08:38:45Z", "type": "commit"}, {"oid": "72e230d7d47a50fc0f5150e54fca16101fddb01e", "url": "https://github.com/apache/beam/commit/72e230d7d47a50fc0f5150e54fca16101fddb01e", "message": "Spotless", "committedDate": "2020-03-18T09:10:52Z", "type": "commit"}, {"oid": "6f42b6f36fc43ff3648bf04e9a32c970d1c511eb", "url": "https://github.com/apache/beam/commit/6f42b6f36fc43ff3648bf04e9a32c970d1c511eb", "message": "Added UsesKey Tag", "committedDate": "2020-03-18T10:33:08Z", "type": "commit"}, {"oid": "fe35a20d6b81e0e7a43b546a422e9304ce365a7f", "url": "https://github.com/apache/beam/commit/fe35a20d6b81e0e7a43b546a422e9304ce365a7f", "message": "Adding empty string as default key parameter in onTimer", "committedDate": "2020-03-18T12:15:41Z", "type": "commit"}, {"oid": "6009b3923aaddb8f6ffa8172b440c11e6be2ccc6", "url": "https://github.com/apache/beam/commit/6009b3923aaddb8f6ffa8172b440c11e6be2ccc6", "message": "Changing Key annotation to KeyId", "committedDate": "2020-03-18T12:30:29Z", "type": "commit"}, {"oid": "118cb52fba2fb2bbf73dd6636a12b7e8f84f2738", "url": "https://github.com/apache/beam/commit/118cb52fba2fb2bbf73dd6636a12b7e8f84f2738", "message": "Adding empty string as default in pushbackDoFnRunner", "committedDate": "2020-03-18T12:45:01Z", "type": "commit"}, {"oid": "7b2ef5320d3666ab88d7f179b13b54072e4ebc79", "url": "https://github.com/apache/beam/commit/7b2ef5320d3666ab88d7f179b13b54072e4ebc79", "message": "Merge branch 'master' into feature/BEAM-1819", "committedDate": "2020-03-19T09:22:53Z", "type": "commit"}, {"oid": "c693d534579e9b97189d3e8d709da4b50c7c03d3", "url": "https://github.com/apache/beam/commit/c693d534579e9b97189d3e8d709da4b50c7c03d3", "message": "Updating CHANGES.md", "committedDate": "2020-03-19T09:35:32Z", "type": "commit"}, {"oid": "58cf89c92d990daf5ab32ec06ede3662603dc368", "url": "https://github.com/apache/beam/commit/58cf89c92d990daf5ab32ec06ede3662603dc368", "message": "Updating validations in DoFnSignatures, Excluding flink runner", "committedDate": "2020-03-19T17:00:30Z", "type": "commit"}, {"oid": "42fa4fb17add9568e9bb1269370e95944db8e640", "url": "https://github.com/apache/beam/commit/42fa4fb17add9568e9bb1269370e95944db8e640", "message": "Merge branch 'master' into feature/BEAM-1819\n\n# Conflicts:\n#\trunners/core-java/src/main/java/org/apache/beam/runners/core/OutputAndTimeBoundedSplittableProcessElementInvoker.java", "committedDate": "2020-03-19T17:06:03Z", "type": "commit"}, {"oid": "3c36afa3a8e40cc9a4b0305b0d56ebec2c1b9541", "url": "https://github.com/apache/beam/commit/3c36afa3a8e40cc9a4b0305b0d56ebec2c1b9541", "message": "Adding support for DataFlow", "committedDate": "2020-03-20T13:08:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYzMzE1NQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r395633155", "bodyText": "you'll need the change to StreamingDataflowWorker as well, without it, the key will always be null.", "author": "steveniemitz", "createdAt": "2020-03-20T13:25:19Z", "path": "runners/google-cloud-dataflow-java/worker/src/main/java/org/apache/beam/runners/dataflow/worker/SimpleParDoFn.java", "diffHunk": "@@ -361,6 +361,7 @@ private void processUserTimer(TimerData timer) throws Exception {\n       fnRunner.onTimer(\n           timer.getTimerId(),\n           timer.getTimerFamilyId(),\n+          this.stepContext.stateInternals().getKey(),", "originalCommit": "3c36afa3a8e40cc9a4b0305b0d56ebec2c1b9541", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY0NDU1Mg==", "url": "https://github.com/apache/beam/pull/11154#discussion_r395644552", "bodyText": "@steveniemitz added.", "author": "rehmanmuradali", "createdAt": "2020-03-20T13:44:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTYzMzE1NQ=="}], "type": "inlineReview"}, {"oid": "1b2f738ed152be677d5cf3bb2350dae0615df08c", "url": "https://github.com/apache/beam/commit/1b2f738ed152be677d5cf3bb2350dae0615df08c", "message": "Adding support for DataFlow", "committedDate": "2020-03-20T13:31:18Z", "type": "commit"}, {"oid": "0dd289bd9599bfd27a42d0fd4e4981938dd2891e", "url": "https://github.com/apache/beam/commit/0dd289bd9599bfd27a42d0fd4e4981938dd2891e", "message": "Added test case that support Generic Key type", "committedDate": "2020-03-20T13:42:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg5NjA5MQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r395896091", "bodyText": "should this instead return KeyT?", "author": "reuvenlax", "createdAt": "2020-03-20T21:23:01Z", "path": "runners/core-java/src/main/java/org/apache/beam/runners/core/SimpleDoFnRunner.java", "diffHunk": "@@ -686,6 +697,11 @@ public TimeDomain timeDomain() {\n       return timeDomain;\n     }\n \n+    @Override\n+    public Object key() {", "originalCommit": "0dd289bd9599bfd27a42d0fd4e4981938dd2891e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzUyODkyNw==", "url": "https://github.com/apache/beam/pull/11154#discussion_r397528927", "bodyText": "Done", "author": "rehmanmuradali", "createdAt": "2020-03-24T23:46:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg5NjA5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg5Njk1Mg==", "url": "https://github.com/apache/beam/pull/11154#discussion_r395896952", "bodyText": "It looks like it should be easy to set the correct key here.", "author": "reuvenlax", "createdAt": "2020-03-20T21:25:28Z", "path": "runners/flink/src/main/java/org/apache/beam/runners/flink/translation/functions/FlinkStatefulDoFnFunction.java", "diffHunk": "@@ -218,6 +218,7 @@ private void fireTimer(TimerInternals.TimerData timer, DoFnRunner<KV<K, V>, Outp\n     doFnRunner.onTimer(\n         timer.getTimerId(),\n         timer.getTimerFamilyId(),\n+        \"\",", "originalCommit": "0dd289bd9599bfd27a42d0fd4e4981938dd2891e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzUyOTAxMg==", "url": "https://github.com/apache/beam/pull/11154#discussion_r397529012", "bodyText": "Done", "author": "rehmanmuradali", "createdAt": "2020-03-24T23:46:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg5Njk1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg5NzMwOA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r395897308", "bodyText": "Also should be easy to do here.", "author": "reuvenlax", "createdAt": "2020-03-20T21:26:20Z", "path": "runners/flink/src/main/java/org/apache/beam/runners/flink/translation/wrappers/streaming/DoFnOperator.java", "diffHunk": "@@ -847,6 +847,7 @@ protected void fireTimer(InternalTimer<ByteBuffer, TimerData> timer) {\n     pushbackDoFnRunner.onTimer(\n         timerData.getTimerId(),\n         timerData.getTimerFamilyId(),\n+        \"\",", "originalCommit": "0dd289bd9599bfd27a42d0fd4e4981938dd2891e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzUyOTA2MA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r397529060", "bodyText": "Done", "author": "rehmanmuradali", "createdAt": "2020-03-24T23:47:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTg5NzMwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU5NDI4OQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r396594289", "bodyText": "I'm not sure I understand why this is needed.", "author": "reuvenlax", "createdAt": "2020-03-23T16:42:09Z", "path": "runners/google-cloud-dataflow-java/worker/src/main/java/org/apache/beam/runners/dataflow/worker/StreamingDataflowWorker.java", "diffHunk": "@@ -1155,6 +1156,10 @@ public Instant getStateStartTime() {\n     // Note that TimerOrElementCoder is a backwards-compatibility class\n     // that is really a FakeKeyedWorkItemCoder\n     Coder<?> valueCoder = ((WindowedValueCoder<?>) readCoder).getValueCoder();\n+\n+    if (valueCoder instanceof KvCoder<?, ?>) {\n+      return ((KvCoder<?, ?>) valueCoder).getKeyCoder();\n+    }", "originalCommit": "0dd289bd9599bfd27a42d0fd4e4981938dd2891e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjYwNDI3OA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r396604278", "bodyText": "without it, the key passed into the WindmillStateInternals constructor is always null.  This coder is used to deserialize the user key from the work item key here:\nhttps://github.com/apache/beam/blob/master/runners/google-cloud-dataflow-java/worker/src/main/java/org/apache/beam/runners/dataflow/worker/StreamingDataflowWorker.java#L1340\nIt doesn't look like it was ever really used before other than for debug messages.", "author": "steveniemitz", "createdAt": "2020-03-23T16:55:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU5NDI4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU5NTg3NQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r396595875", "bodyText": "I think should just be named Key, not KeyId.\nAlso I wouldn't reference OnTimer here, as @key also makes sense in processElement (instead of getting a KV you should be able to get they key and the value in separate parameters.", "author": "reuvenlax", "createdAt": "2020-03-23T16:44:15Z", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/DoFn.java", "diffHunk": "@@ -481,6 +481,12 @@ public Duration getAllowedTimestampSkew() {\n     String value();\n   }\n \n+  /** Parameter annotation for the input element key for {@link OnTimer} methods. */", "originalCommit": "0dd289bd9599bfd27a42d0fd4e4981938dd2891e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzUyOTIyNQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r397529225", "bodyText": "Done", "author": "rehmanmuradali", "createdAt": "2020-03-24T23:47:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU5NTg3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU5NjY1Nw==", "url": "https://github.com/apache/beam/pull/11154#discussion_r396596657", "bodyText": "Need javadoc", "author": "reuvenlax", "createdAt": "2020-03-23T16:45:23Z", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/reflect/DoFnInvoker.java", "diffHunk": "@@ -167,6 +167,8 @@ void invokeOnTimer(\n     /** Provide a reference to the input element. */\n     InputT element(DoFn<InputT, OutputT> doFn);\n \n+    Object key();", "originalCommit": "0dd289bd9599bfd27a42d0fd4e4981938dd2891e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzUyOTMwMg==", "url": "https://github.com/apache/beam/pull/11154#discussion_r397529302", "bodyText": "Added", "author": "rehmanmuradali", "createdAt": "2020-03-24T23:47:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU5NjY1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU5NzUxNQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r396597515", "bodyText": "I think we also need to verify that the input type is a KV", "author": "reuvenlax", "createdAt": "2020-03-23T16:46:33Z", "path": "sdks/java/core/src/main/java/org/apache/beam/sdk/transforms/reflect/DoFnSignatures.java", "diffHunk": "@@ -1282,6 +1283,14 @@ private static Parameter analyzeExtraParameter(\n           rawType.equals(Instant.class),\n           \"@Timestamp argument must have type org.joda.time.Instant.\");\n       return Parameter.timestampParameter();\n+    } else if (hasAnnotation(DoFn.KeyId.class, param.getAnnotations())) {\n+      Type keyType = ((ParameterizedType) inputT.getType()).getActualTypeArguments()[0];", "originalCommit": "0dd289bd9599bfd27a42d0fd4e4981938dd2891e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzUyOTUzNg==", "url": "https://github.com/apache/beam/pull/11154#discussion_r397529536", "bodyText": "@reuvenlax , Added with a test case", "author": "rehmanmuradali", "createdAt": "2020-03-24T23:48:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjU5NzUxNQ=="}], "type": "inlineReview"}, {"oid": "e9af6015fecb4e09a17ece8df37e44433cee01aa", "url": "https://github.com/apache/beam/commit/e9af6015fecb4e09a17ece8df37e44433cee01aa", "message": "Merge branch 'master' into feature/BEAM-1819", "committedDate": "2020-03-24T09:10:37Z", "type": "commit"}, {"oid": "1bc07aaccf50fb656380438bd5550576883aa840", "url": "https://github.com/apache/beam/commit/1bc07aaccf50fb656380438bd5550576883aa840", "message": "Updaing KeyId annotation to Key", "committedDate": "2020-03-24T12:09:11Z", "type": "commit"}, {"oid": "d4a91f414e27db74736ba84be00ca7649c557327", "url": "https://github.com/apache/beam/commit/d4a91f414e27db74736ba84be00ca7649c557327", "message": "Updaing KeyId annotation to Key", "committedDate": "2020-03-24T12:09:49Z", "type": "commit"}, {"oid": "d128aca779b389f0f9da99d3f8f612fefe4472b8", "url": "https://github.com/apache/beam/commit/d128aca779b389f0f9da99d3f8f612fefe4472b8", "message": "Added Flink Support", "committedDate": "2020-03-24T12:10:24Z", "type": "commit"}, {"oid": "09c252ebd78175ce8c1901e6aa5e3afb59452be4", "url": "https://github.com/apache/beam/commit/09c252ebd78175ce8c1901e6aa5e3afb59452be4", "message": "Added javadoc", "committedDate": "2020-03-24T13:02:33Z", "type": "commit"}, {"oid": "1e3f379bf49c5caf2da525db0496ff839970c375", "url": "https://github.com/apache/beam/commit/1e3f379bf49c5caf2da525db0496ff839970c375", "message": "Added validations of KV pair", "committedDate": "2020-03-24T14:02:58Z", "type": "commit"}, {"oid": "20bff9557052ee5fda0557c3b48b3c56901bfa23", "url": "https://github.com/apache/beam/commit/20bff9557052ee5fda0557c3b48b3c56901bfa23", "message": "Merge branch 'master' into feature/BEAM-1819\n\n# Conflicts:\n#\tCHANGES.md", "committedDate": "2020-03-26T13:03:56Z", "type": "commit"}, {"oid": "688c0791fe42e6af61c381d7d4e94b1eace17f30", "url": "https://github.com/apache/beam/commit/688c0791fe42e6af61c381d7d4e94b1eace17f30", "message": "Including Flink Runner", "committedDate": "2020-04-01T07:10:54Z", "type": "commit"}, {"oid": "1f82e74f39c4bad228b44753c616f2065a3742bc", "url": "https://github.com/apache/beam/commit/1f82e74f39c4bad228b44753c616f2065a3742bc", "message": "Change default as null, Removing TestStream, Checkstyle", "committedDate": "2020-04-02T11:47:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjYxMTY2NQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r402611665", "bodyText": "Can we pass the key through here?  We might need to include it in the coder for BufferedElements.Timer", "author": "reuvenlax", "createdAt": "2020-04-02T21:39:30Z", "path": "runners/flink/src/main/java/org/apache/beam/runners/flink/translation/wrappers/streaming/stableinput/BufferedElements.java", "diffHunk": "@@ -90,7 +90,8 @@ public int hashCode() {\n \n     @Override\n     public void processWith(DoFnRunner doFnRunner) {\n-      doFnRunner.onTimer(timerId, timerFamilyId, window, timestamp, outputTimestamp, timeDomain);", "originalCommit": "1f82e74f39c4bad228b44753c616f2065a3742bc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5NzMxMQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r403097311", "bodyText": "@reuvenlax  done", "author": "rehmanmuradali", "createdAt": "2020-04-03T15:44:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjYxMTY2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY5ODAyNA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r402698024", "bodyText": "the changes in this file don't seem necessary. We've got rid of an import but introduced a fully qualified class name for the same import instead.", "author": "shehzaadn-vd", "createdAt": "2020-04-03T02:12:22Z", "path": "examples/java/src/main/java/org/apache/beam/examples/complete/AutoComplete.java", "diffHunk": "@@ -386,7 +385,8 @@ public FormatForDatastore(String kind, String ancestorKey) {\n     @ProcessElement\n     public void processElement(ProcessContext c) {\n       Entity.Builder entityBuilder = Entity.newBuilder();\n-      Key key = makeKey(makeKey(kind, ancestorKey).build(), kind, c.element().getKey()).build();\n+      com.google.datastore.v1.Key key =\n+          makeKey(makeKey(kind, ancestorKey).build(), kind, c.element().getKey()).build();\n ", "originalCommit": "1f82e74f39c4bad228b44753c616f2065a3742bc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA5ODMwNQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r403098305", "bodyText": "The mentioned Key was conflicting with our DoFn.Key interface.", "author": "rehmanmuradali", "createdAt": "2020-04-03T15:45:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY5ODAyNA=="}], "type": "inlineReview"}, {"oid": "9ac020cdfceefa245e8fc7aadbfff4fb7b573a63", "url": "https://github.com/apache/beam/commit/9ac020cdfceefa245e8fc7aadbfff4fb7b573a63", "message": "Adding Key in BufferedElements", "committedDate": "2020-04-03T10:14:43Z", "type": "commit"}, {"oid": "9105984b1f7d934c2f78f8f7d814c624ec1d0f12", "url": "https://github.com/apache/beam/commit/9105984b1f7d934c2f78f8f7d814c624ec1d0f12", "message": "Minor Test case fix", "committedDate": "2020-04-03T11:50:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzU0OTY3Mg==", "url": "https://github.com/apache/beam/pull/11154#discussion_r403549672", "bodyText": "On a closer look, I think adding to the Coder is the wrong way to preserve the key. DoFnOperator has a stateInternals() which should provide access to the current key, and that way we don't have to encode the key again.\nSorry for the bad suggestion.", "author": "reuvenlax", "createdAt": "2020-04-04T22:37:03Z", "path": "runners/flink/src/main/java/org/apache/beam/runners/flink/translation/wrappers/streaming/stableinput/BufferingDoFnRunner.java", "diffHunk": "@@ -125,8 +129,8 @@ public void processElement(WindowedValue<InputT> elem) {\n       Instant outputTimestamp,\n       TimeDomain timeDomain) {\n     currentBufferingElementsHandler.buffer(\n-        new BufferedElements.Timer(\n-            timerId, timerFamilyId, window, timestamp, outputTimestamp, timeDomain));\n+        new BufferedElements.Timer<>(\n+            timerId, timerFamilyId, key, window, timestamp, outputTimestamp, timeDomain));", "originalCommit": "9ac020cdfceefa245e8fc7aadbfff4fb7b573a63", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDIzNDY1Mg==", "url": "https://github.com/apache/beam/pull/11154#discussion_r404234652", "bodyText": "@reuvenlax  done", "author": "rehmanmuradali", "createdAt": "2020-04-06T16:41:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzU0OTY3Mg=="}], "type": "inlineReview"}, {"oid": "1d3c1ffeb764d95011080123b272351228c48c2f", "url": "https://github.com/apache/beam/commit/1d3c1ffeb764d95011080123b272351228c48c2f", "message": "Removing encoding and decoding of Key in BufferedElements", "committedDate": "2020-04-06T10:58:43Z", "type": "commit"}, {"oid": "ec224289eafa9bbcef99c533d6d5bc6ec75a8620", "url": "https://github.com/apache/beam/commit/ec224289eafa9bbcef99c533d6d5bc6ec75a8620", "message": "Merge branch 'master' into feature/BEAM-1819", "committedDate": "2020-04-10T09:19:47Z", "type": "commit"}, {"oid": "b739efac41563432feb685e7c5af649191202ca2", "url": "https://github.com/apache/beam/commit/b739efac41563432feb685e7c5af649191202ca2", "message": "Compilation Fix in DoFnOperator", "committedDate": "2020-04-10T10:29:20Z", "type": "commit"}, {"oid": "faad2a321e729b1135f555d71741631c5dad87cf", "url": "https://github.com/apache/beam/commit/faad2a321e729b1135f555d71741631c5dad87cf", "message": "DoFnOperatorTest failing Fix", "committedDate": "2020-04-13T09:51:23Z", "type": "commit"}, {"oid": "0df57baac11258587cb66c23ffd7a0dfe740bf13", "url": "https://github.com/apache/beam/commit/0df57baac11258587cb66c23ffd7a0dfe740bf13", "message": "Merge branch 'master' into feature/BEAM-1819", "committedDate": "2020-04-14T09:10:58Z", "type": "commit"}, {"oid": "703f84dc824c598a92896534e6e59cf4b7775d29", "url": "https://github.com/apache/beam/commit/703f84dc824c598a92896534e6e59cf4b7775d29", "message": "Portable Flink Key implementation", "committedDate": "2020-04-14T09:50:28Z", "type": "commit"}, {"oid": "0cb32299b1627a91cbe174ebb1fe0dfcbb3f4d8e", "url": "https://github.com/apache/beam/commit/0cb32299b1627a91cbe174ebb1fe0dfcbb3f4d8e", "message": "Flink Validates Runner Fix", "committedDate": "2020-04-15T13:27:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r409681355", "bodyText": "@mxm Can you take a quick look and verify that this key handling is correct here?", "author": "reuvenlax", "createdAt": "2020-04-16T16:15:29Z", "path": "runners/flink/src/main/java/org/apache/beam/runners/flink/translation/wrappers/streaming/DoFnOperator.java", "diffHunk": "@@ -837,11 +837,15 @@ public void onProcessingTime(InternalTimer<ByteBuffer, TimerData> timer) {\n \n   // allow overriding this in ExecutableStageDoFnOperator to set the key context\n   protected void fireTimerInternal(Object key, TimerData timerData) {\n-    fireTimer(timerData);\n+    if (key instanceof java.nio.ByteBuffer) {\n+      key = FlinkKeyUtils.decodeKey((ByteBuffer) key, keyCoder);", "originalCommit": "0cb32299b1627a91cbe174ebb1fe0dfcbb3f4d8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5NjUwOQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r410196509", "bodyText": "The key is always stored as ByteBuffer. This is also reflected in the method calls to this method. Please change the signature of the method to be\nvoid fireTimerInternal(ByteBuffer key, TimerData timerdata)", "author": "mxm", "createdAt": "2020-04-17T12:43:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIyNDE4NQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r410224185", "bodyText": "@mxm, upon debugging, I noticed that timer.getKey() returns String, Integer, as well as ByteBuffer. That's why when I changed the method signature, DoFnOperatorTest failed with ClassCastException. And I have added an instanceof check", "author": "rehmanmuradali", "createdAt": "2020-04-17T13:32:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIzOTY1Mw==", "url": "https://github.com/apache/beam/pull/11154#discussion_r410239653", "bodyText": "Isn't timer.getKey() a new interface? Keys are always internally stored encoded as ByteBuffer. The keys itself can of course be of any type. The test might not instrument the code correctly.", "author": "mxm", "createdAt": "2020-04-17T13:55:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI1MDYzOA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r410250638", "bodyText": "@mxm should I use a different interface to get the encoded key? Isn't timer.getKey was supposed to return ByteBuffer always?", "author": "rehmanmuradali", "createdAt": "2020-04-17T14:13:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMxMjg4Ng==", "url": "https://github.com/apache/beam/pull/11154#discussion_r411312886", "bodyText": "The key is always encoded at this point. The issue is that some unit tests use a non-encoded key which is incorrect. We have to fix this to change the method signature to ByteBuffer here. As a workaround you could use keyedStateInternals.getCurrentKey() which will return a decoded version of the key.", "author": "mxm", "createdAt": "2020-04-20T11:47:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMxMzM2Mw==", "url": "https://github.com/apache/beam/pull/11154#discussion_r411313363", "bodyText": "If you do, please add a // TODO comment alongside with it.", "author": "mxm", "createdAt": "2020-04-20T11:48:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM0NTE1OA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r411345158", "bodyText": "keyStateInternal.getKey() internally assumes that the key is of type ByteBuffer and tries to decode it. Since we have some test that uses decoded key, we get ClassCastException here as well. To prevent it I have added a key instanceof java.nio.ByteBuffer check on timer.getKey(). This will let me know when to decode, as a workaround. @mxm", "author": "rehmanmuradali", "createdAt": "2020-04-20T12:42:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM3Mjg1OQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r411372859", "bodyText": "Yes, it assumes that the key is of type ByteBuffer because the key type we pass to Flink is always ByteBuffer. We shouldn't be adding instanceof checks to the main code in order for tests to pass. Let's adapt the tests instead. You need to ensure that the KeySelector used in the tests returns ByteBuffer. I can help you in case you get stuck.", "author": "mxm", "createdAt": "2020-04-20T13:23:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0Nzk4OQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r412247989", "bodyText": "Thanks for providing the lead. I am on it.", "author": "rehmanmuradali", "createdAt": "2020-04-21T14:43:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY4MTM1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5NzU0OQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r410197549", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              protected void fireTimerInternal(Object key, TimerData timerData) {\n          \n          \n            \n              protected void fireTimerInternal(ByteBuffer key, TimerData timerData) {", "author": "mxm", "createdAt": "2020-04-17T12:45:16Z", "path": "runners/flink/src/main/java/org/apache/beam/runners/flink/translation/wrappers/streaming/DoFnOperator.java", "diffHunk": "@@ -837,11 +837,15 @@ public void onProcessingTime(InternalTimer<ByteBuffer, TimerData> timer) {\n \n   // allow overriding this in ExecutableStageDoFnOperator to set the key context\n   protected void fireTimerInternal(Object key, TimerData timerData) {", "originalCommit": "0cb32299b1627a91cbe174ebb1fe0dfcbb3f4d8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzI1ODMxOQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r413258319", "bodyText": "Can we change this to ByteBuffer now? Same in ExecutableStageDoFnOperator where it is overridden.", "author": "mxm", "createdAt": "2020-04-22T19:26:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5NzU0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5Nzc3MA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r410197770", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              protected void fireTimer(Object key, TimerData timerData) {\n          \n          \n            \n              protected void fireTimer(ByteBuffer key, TimerData timerData) {", "author": "mxm", "createdAt": "2020-04-17T12:45:39Z", "path": "runners/flink/src/main/java/org/apache/beam/runners/flink/translation/wrappers/streaming/DoFnOperator.java", "diffHunk": "@@ -837,11 +837,15 @@ public void onProcessingTime(InternalTimer<ByteBuffer, TimerData> timer) {\n \n   // allow overriding this in ExecutableStageDoFnOperator to set the key context\n   protected void fireTimerInternal(Object key, TimerData timerData) {\n-    fireTimer(timerData);\n+    if (key instanceof java.nio.ByteBuffer) {\n+      key = FlinkKeyUtils.decodeKey((ByteBuffer) key, keyCoder);\n+    }\n+\n+    fireTimer(key, timerData);\n   }\n \n   // allow overriding this in WindowDoFnOperator\n-  protected void fireTimer(TimerData timerData) {\n+  protected void fireTimer(Object key, TimerData timerData) {", "originalCommit": "0cb32299b1627a91cbe174ebb1fe0dfcbb3f4d8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5OTc4OA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r410199788", "bodyText": "If you decide the decode the key already in the calling method, then use the key type here.", "author": "mxm", "createdAt": "2020-04-17T12:49:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5Nzc3MA=="}], "type": "inlineReview"}, {"oid": "0ab54b47cd0de0d97bcb2784ce4f3e2c90b16c5b", "url": "https://github.com/apache/beam/commit/0ab54b47cd0de0d97bcb2784ce4f3e2c90b16c5b", "message": "Added TODO to change method signature", "committedDate": "2020-04-20T16:22:24Z", "type": "commit"}, {"oid": "4d00f3aa69b152236603bbf1254a4706019a8254", "url": "https://github.com/apache/beam/commit/4d00f3aa69b152236603bbf1254a4706019a8254", "message": "testStateRestore Fix", "committedDate": "2020-04-21T13:21:11Z", "type": "commit"}, {"oid": "7cffd991b3bc60c40c8c0f972377cd8509acf030", "url": "https://github.com/apache/beam/commit/7cffd991b3bc60c40c8c0f972377cd8509acf030", "message": "testTimerRestore Fix", "committedDate": "2020-04-21T13:29:21Z", "type": "commit"}, {"oid": "a674b9529e66c13de0af27f12a0a8b20adf4d41f", "url": "https://github.com/apache/beam/commit/a674b9529e66c13de0af27f12a0a8b20adf4d41f", "message": "keyedParDoSideInputCheckpointing Fix", "committedDate": "2020-04-22T09:38:54Z", "type": "commit"}, {"oid": "ffd50734065343dc5f7d66e4a25210d8987c0053", "url": "https://github.com/apache/beam/commit/ffd50734065343dc5f7d66e4a25210d8987c0053", "message": "testWatermarkContract Fix", "committedDate": "2020-04-22T09:47:25Z", "type": "commit"}, {"oid": "4aedb68155ed14429f6754d06a1a8393fc8e0042", "url": "https://github.com/apache/beam/commit/4aedb68155ed14429f6754d06a1a8393fc8e0042", "message": "testLateDroppingForStatefulFn Fix", "committedDate": "2020-04-22T09:58:32Z", "type": "commit"}, {"oid": "1c9851ae7472b87b260cc59326447b839a2f95e5", "url": "https://github.com/apache/beam/commit/1c9851ae7472b87b260cc59326447b839a2f95e5", "message": "testStateGCForStatefulFn Fix", "committedDate": "2020-04-22T10:29:51Z", "type": "commit"}, {"oid": "106bea888413d29ce195dfd6d7d8b81cdd1e663b", "url": "https://github.com/apache/beam/commit/106bea888413d29ce195dfd6d7d8b81cdd1e663b", "message": "keyedParDoPushbackDataCheckpointing Fix", "committedDate": "2020-04-22T11:38:51Z", "type": "commit"}, {"oid": "80bcbc36cd93b68f17445964288304a7afd41315", "url": "https://github.com/apache/beam/commit/80bcbc36cd93b68f17445964288304a7afd41315", "message": "testKeyedParDoSideInputs Fix", "committedDate": "2020-04-22T11:50:04Z", "type": "commit"}, {"oid": "c27d1c069c5fc96e700fbb0c9e32c4113249736f", "url": "https://github.com/apache/beam/commit/c27d1c069c5fc96e700fbb0c9e32c4113249736f", "message": "Minor Fix", "committedDate": "2020-04-22T12:26:45Z", "type": "commit"}, {"oid": "55439e3e9cf00bbe3a97a133b5b276b4d33fb787", "url": "https://github.com/apache/beam/commit/55439e3e9cf00bbe3a97a133b5b276b4d33fb787", "message": "Merge branch 'master' into feature/BEAM-1819", "committedDate": "2020-04-22T13:24:35Z", "type": "commit"}, {"oid": "4c4ef9604faa8761e2159e4b13a2ed2791646a27", "url": "https://github.com/apache/beam/commit/4c4ef9604faa8761e2159e4b13a2ed2791646a27", "message": "fireTimerInternal method signature changes", "committedDate": "2020-04-22T19:36:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAyMzA4MA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r416023080", "bodyText": "The intent of these context objects was to not create a new one when processing each element/timer and instead to reference a member variable as can be seen in:\n\n  \n    \n      beam/sdks/java/harness/src/main/java/org/apache/beam/fn/harness/FnApiDoFnRunner.java\n    \n    \n         Line 1468\n      in\n      591de34\n    \n    \n    \n    \n\n        \n          \n           return pipelineOptions; \n        \n    \n  \n\n\n\n  \n    \n      beam/sdks/java/harness/src/main/java/org/apache/beam/fn/harness/FnApiDoFnRunner.java\n    \n    \n         Line 1506\n      in\n      591de34\n    \n    \n    \n    \n\n        \n          \n           return currentElement.getValue(); \n        \n    \n  \n\n\nIt would have made more sense to have OnTimerContext just return currentTimer.getUserKey()", "author": "lukecwik", "createdAt": "2020-04-27T17:49:55Z", "path": "sdks/java/harness/src/main/java/org/apache/beam/fn/harness/FnApiDoFnRunner.java", "diffHunk": "@@ -560,7 +560,6 @@ public Instant timestamp(DoFn<InputT, OutputT> doFn) {\n         throw new IllegalStateException(\n             String.format(\"Unknown URN %s\", pTransform.getSpec().getUrn()));\n     }\n-    this.onTimerContext = new OnTimerContext();", "originalCommit": "4c4ef9604faa8761e2159e4b13a2ed2791646a27", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAzODk2MA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r416038960", "bodyText": "+1 Let's fix these in a follow-up.", "author": "mxm", "createdAt": "2020-04-27T18:12:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAyMzA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI4MjIzMw==", "url": "https://github.com/apache/beam/pull/11154#discussion_r416282233", "bodyText": "And document the intent.", "author": "kennknowles", "createdAt": "2020-04-28T02:34:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAyMzA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ0NTg5Ng==", "url": "https://github.com/apache/beam/pull/11154#discussion_r416445896", "bodyText": "And document the intent.\n\n! :)\n@rehmanmuradali Do you have time to look into this?", "author": "mxm", "createdAt": "2020-04-28T08:55:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAyMzA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ3ODgxOA==", "url": "https://github.com/apache/beam/pull/11154#discussion_r416478818", "bodyText": "+1 worth to create a JIRA to track it.", "author": "iemejia", "createdAt": "2020-04-28T09:46:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAyMzA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ4MDQ5OQ==", "url": "https://github.com/apache/beam/pull/11154#discussion_r416480499", "bodyText": "@mxm  I am currently working on BEAM-1589, BEAM-8543. I will get back to it after that. The Jira is filed here: https://issues.apache.org/jira/browse/BEAM-9839", "author": "rehmanmuradali", "createdAt": "2020-04-28T09:48:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAyMzA4MA=="}], "type": "inlineReview"}]}