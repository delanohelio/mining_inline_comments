{"pr_number": 13542, "pr_title": "[BEAM-11456] Fix flaky table provider IT tests (Kafka and Pubsub)", "pr_createdAt": "2020-12-14T12:49:44Z", "pr_url": "https://github.com/apache/beam/pull/13542", "timeline": [{"oid": "cbaf5a8b3c5d5b08f8699f6994a4f8c14325d515", "url": "https://github.com/apache/beam/commit/cbaf5a8b3c5d5b08f8699f6994a4f8c14325d515", "message": "[BEAM-11456] Fix flaky table provider tests (Kafka and Pubsub)", "committedDate": "2020-12-14T12:50:03Z", "type": "forcePushed"}, {"oid": "72ac0d37f7a3400e846c9063dc8322efeaa8e5c6", "url": "https://github.com/apache/beam/commit/72ac0d37f7a3400e846c9063dc8322efeaa8e5c6", "message": "[BEAM-11456] Fix flaky table provider tests (Kafka and Pubsub)", "committedDate": "2020-12-14T13:32:49Z", "type": "forcePushed"}, {"oid": "9e12d4a02e3b869b4118764f19724263e11ca6fa", "url": "https://github.com/apache/beam/commit/9e12d4a02e3b869b4118764f19724263e11ca6fa", "message": "[BEAM-11456] Fix flaky table provider tests (Kafka and Pubsub)", "committedDate": "2020-12-15T08:33:23Z", "type": "forcePushed"}, {"oid": "51bbfd3dbfddcf652030d387730b89707076ce44", "url": "https://github.com/apache/beam/commit/51bbfd3dbfddcf652030d387730b89707076ce44", "message": "[BEAM-11456] Fix flaky table provider tests (Kafka and Pubsub)", "committedDate": "2020-12-15T08:35:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQyMTI4Nw==", "url": "https://github.com/apache/beam/pull/13542#discussion_r543421287", "bodyText": "Can we keep the Kafka test in a separate non-parallel task so the other ITs can still run in parallel?", "author": "TheNeuralBit", "createdAt": "2020-12-15T15:01:09Z", "path": "sdks/java/extensions/sql/build.gradle", "diffHunk": "@@ -177,16 +177,6 @@ task runPojoExample(type: JavaExec) {\n   args = [\"--runner=DirectRunner\"]\n }\n \n-// These tests become flaky when run in parallel at more than 3 threads so run them in a separate task\n-task runKafkaTableProviderIT(type: Test) {\n-  outputs.upToDateWhen { false }\n-  include '**/KafkaTableProvider*IT.class'\n-  maxParallelForks 2\n-  classpath = project(\":sdks:java:extensions:sql\").sourceSets.test.runtimeClasspath\n-  testClassesDirs = files(project(\":sdks:java:extensions:sql\").sourceSets.test.output.classesDirs)\n-  useJUnit { }\n-}\n-", "originalCommit": "51bbfd3dbfddcf652030d387730b89707076ce44", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE4NjIzNQ==", "url": "https://github.com/apache/beam/pull/13542#discussion_r544186235", "bodyText": "I'll replace the inheritance with parameterized tests, then there shouldn't be need for a separate Kafka task. The same problem was with Pubsub IT tests so the task would have to receive GCP credentials as well to be able to run these as well.", "author": "piotr-szuberski", "createdAt": "2020-12-16T10:31:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzQyMTI4Nw=="}], "type": "inlineReview"}, {"oid": "334f3f83a2a5e3513f2680a959e73b48ebad849c", "url": "https://github.com/apache/beam/commit/334f3f83a2a5e3513f2680a959e73b48ebad849c", "message": "[BEAM-11456] Fix flaky table provider tests (Kafka and Pubsub)", "committedDate": "2020-12-16T10:26:18Z", "type": "forcePushed"}, {"oid": "cfa959e4eaf8ed686ad0ce504efadff6d9109385", "url": "https://github.com/apache/beam/commit/cfa959e4eaf8ed686ad0ce504efadff6d9109385", "message": "[BEAM-11456] Fix flaky table provider tests (Kafka and Pubsub)", "committedDate": "2020-12-16T10:41:01Z", "type": "forcePushed"}, {"oid": "66892999bd5bafc3671ef1a56a3db5816d7f69e2", "url": "https://github.com/apache/beam/commit/66892999bd5bafc3671ef1a56a3db5816d7f69e2", "message": "[BEAM-11456] Fix flaky table provider tests (Kafka and Pubsub)", "committedDate": "2020-12-16T10:59:19Z", "type": "commit"}, {"oid": "66892999bd5bafc3671ef1a56a3db5816d7f69e2", "url": "https://github.com/apache/beam/commit/66892999bd5bafc3671ef1a56a3db5816d7f69e2", "message": "[BEAM-11456] Fix flaky table provider tests (Kafka and Pubsub)", "committedDate": "2020-12-16T10:59:19Z", "type": "forcePushed"}]}