{"pr_number": 10747, "pr_title": "[BEAM-6857] Recategorize UsesTimerMap tests to ValidatesRunner", "pr_createdAt": "2020-02-02T09:34:35Z", "pr_url": "https://github.com/apache/beam/pull/10747", "timeline": [{"oid": "c053277b2df52e3a7c63ebe1e63f2c9f02901b11", "url": "https://github.com/apache/beam/commit/c053277b2df52e3a7c63ebe1e63f2c9f02901b11", "message": "[BEAM-6857] Recategorize UsesTimerMap tests to ValidatesRunner\n\nNeedsRunner tests are not run with all runners so we need to\nrecategorize `UsesTimerMap` tests so we can validate the runners\nimplementations", "committedDate": "2020-02-02T13:23:24Z", "type": "forcePushed"}, {"oid": "9502d79247aec98bf80f7f59434bb248b0fde10f", "url": "https://github.com/apache/beam/commit/9502d79247aec98bf80f7f59434bb248b0fde10f", "message": "[BEAM-6857] Recategorize UsesTimerMap tests to ValidatesRunner\n\nNeedsRunner tests are not run with all runners so we need to\nrecategorize `UsesTimerMap` tests so we can validate the runners\nimplementations", "committedDate": "2020-02-02T13:28:20Z", "type": "commit"}, {"oid": "9502d79247aec98bf80f7f59434bb248b0fde10f", "url": "https://github.com/apache/beam/commit/9502d79247aec98bf80f7f59434bb248b0fde10f", "message": "[BEAM-6857] Recategorize UsesTimerMap tests to ValidatesRunner\n\nNeedsRunner tests are not run with all runners so we need to\nrecategorize `UsesTimerMap` tests so we can validate the runners\nimplementations", "committedDate": "2020-02-02T13:28:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQ3MDM5Ng==", "url": "https://github.com/apache/beam/pull/10747#discussion_r374470396", "bodyText": "do we need to exclude for Dataflow?", "author": "reuvenlax", "createdAt": "2020-02-04T04:35:06Z", "path": "runners/google-cloud-dataflow-java/build.gradle", "diffHunk": "@@ -137,6 +137,7 @@ def commonExcludeCategories = [\n   'org.apache.beam.sdk.testing.UsesGaugeMetrics',\n   'org.apache.beam.sdk.testing.UsesSetState',\n   'org.apache.beam.sdk.testing.UsesMapState',\n+  'org.apache.beam.sdk.testing.UsesTimerMap',", "originalCommit": "9502d79247aec98bf80f7f59434bb248b0fde10f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQ3NjEzNA==", "url": "https://github.com/apache/beam/pull/10747#discussion_r374476134", "bodyText": "If it was broken, we need to fix. Support for this was added for Dataflow, though it now appears that the test was never being run :(", "author": "reuvenlax", "createdAt": "2020-02-04T05:07:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQ3MDM5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDUyNjA5OQ==", "url": "https://github.com/apache/beam/pull/10747#discussion_r374526099", "bodyText": "Yes, My first approach was to enable for Dataflow but then the build fail on the UsesTimerMap tests:\nhttps://builds.apache.org/job/beam_PostCommit_Java_ValidatesRunner_Dataflow_PR/210/\nhttps://builds.apache.org/job/beam_PostCommit_Java_ValidatesRunner_PortabilityApi_Dataflow_PR/76/", "author": "iemejia", "createdAt": "2020-02-04T08:17:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQ3MDM5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQ3MDUwMQ==", "url": "https://github.com/apache/beam/pull/10747#discussion_r374470501", "bodyText": "Good catch - I missed this in the code review.", "author": "reuvenlax", "createdAt": "2020-02-04T04:35:41Z", "path": "sdks/java/core/src/test/java/org/apache/beam/sdk/transforms/ParDoTest.java", "diffHunk": "@@ -4292,7 +4292,7 @@ public void onTimer(OutputReceiver<String> r, @TimerId(\"timer\") Timer timer) {\n   public static class TimerFamilyTests extends SharedTestBase implements Serializable {\n \n     @Test\n-    @Category({NeedsRunner.class, UsesTimersInParDo.class, UsesTimerMap.class})\n+    @Category({ValidatesRunner.class, UsesTimersInParDo.class, UsesTimerMap.class})", "originalCommit": "9502d79247aec98bf80f7f59434bb248b0fde10f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}