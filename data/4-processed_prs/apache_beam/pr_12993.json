{"pr_number": 12993, "pr_title": "[BEAM-10991] Cherrypick #12980 to 2.25.0: Revert \"[BEAM-8543] Dataflow streaming timers are not strictly time ordered when set earlier mid-bundle (#11924)\"", "pr_createdAt": "2020-10-01T23:08:17Z", "pr_url": "https://github.com/apache/beam/pull/12993", "timeline": [{"oid": "2696d624cf85f3d92e60dbecd20ddfe81acda180", "url": "https://github.com/apache/beam/commit/2696d624cf85f3d92e60dbecd20ddfe81acda180", "message": "Revert \"[BEAM-8543] Dataflow streaming timers are not strictly time ordered when set earlier mid-bundle (#11924)\"\n\nThis reverts commit 88acc5267f759d81e9836a9db17b9e0ee521c785.\n\nThere is a bug in this commit that causes deleted timers to not clear their\nwatermark holds, resulting in stuck pipelines. See\nhttps://issues.apache.org/jira/browse/BEAM-10991", "committedDate": "2020-10-01T22:50:05Z", "type": "commit"}, {"oid": "1f24fec70462fcdbcac0f14ef42d812cc81791eb", "url": "https://github.com/apache/beam/commit/1f24fec70462fcdbcac0f14ef42d812cc81791eb", "message": "[BEAM-10991] Adjust CHANGES.md to indicate rollback of fix for BEAM-8543", "committedDate": "2020-10-02T02:26:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1NDUwOQ==", "url": "https://github.com/apache/beam/pull/12993#discussion_r499754509", "bodyText": "Are we missing one line here?\nIn #12997 we have\nDataflow streaming timers are not strictly time ordered when set earlier mid-bundle ([BEAM-8543](https://issues.apache.org/jira/browse/BEAM-8543)).", "author": "robinyqiu", "createdAt": "2020-10-05T17:20:45Z", "path": "CHANGES.md", "diffHunk": "@@ -131,6 +132,9 @@\n   --temp_location, or pass method=\"STREAMING_INSERTS\" to WriteToBigQuery ([BEAM-6928](https://issues.apache.org/jira/browse/BEAM-6928)).\n * Python SDK now understands `typing.FrozenSet` type hints, which are not interchangeable with `typing.Set`. You may need to update your pipelines if type checking fails. ([BEAM-10197](https://issues.apache.org/jira/browse/BEAM-10197))\n \n+## Known issues\n+\n+* When a timer fires but is reset prior to being executed, a watermark hold may be leaked, causing a stuck pipeline [BEAM-10991](https://issues.apache.org/jira/browse/BEAM-10991).\n ", "originalCommit": "1f24fec70462fcdbcac0f14ef42d812cc81791eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg5MTQxNQ==", "url": "https://github.com/apache/beam/pull/12993#discussion_r499891415", "bodyText": "Thorough review! Actually I did a pure revert in #12980 so I reverted that line from CHANGES.md. Then in #12997 I added it back. If you \"view file\" at this commit you will see it is there, because on the release branch it was not accidentally reverted.", "author": "kennknowles", "createdAt": "2020-10-05T21:48:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1NDUwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkwOTU1Mg==", "url": "https://github.com/apache/beam/pull/12993#discussion_r499909552", "bodyText": "Ah I see. I didn't see this line was reverted. Thanks!", "author": "robinyqiu", "createdAt": "2020-10-05T22:37:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1NDUwOQ=="}], "type": "inlineReview"}]}