{"pr_number": 181, "pr_title": "KSQL Hopping Windows", "pr_createdAt": "2020-01-16T04:40:50Z", "pr_url": "https://github.com/confluentinc/kafka-tutorials/pull/181", "timeline": [{"oid": "edcb3447181e1a6041acfc614aa5cb27e5573406", "url": "https://github.com/confluentinc/kafka-tutorials/commit/edcb3447181e1a6041acfc614aa5cb27e5573406", "message": "ksql-hopping-windows-first-commit", "committedDate": "2020-01-16T04:35:34Z", "type": "commit"}, {"oid": "d1c8dffc45d8c7f8968cae51a9571884b648ec8e", "url": "https://github.com/confluentinc/kafka-tutorials/commit/d1c8dffc45d8c7f8968cae51a9571884b648ec8e", "message": "Changed the code and narrative to ilustrate minutes instead of seconds", "committedDate": "2020-01-16T16:01:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ5Nzg1MA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/181#discussion_r367497850", "bodyText": "Let's use CP 5.3.2 for all docker images", "author": "colinhicks", "createdAt": "2020-01-16T15:53:25Z", "path": "_includes/tutorials/hopping-windows/ksql/code/docker-compose.yml", "diffHunk": "@@ -0,0 +1,80 @@\n+---\n+version: '2'\n+\n+services:\n+  zookeeper:\n+    image: confluentinc/cp-zookeeper:5.3.0", "originalCommit": "edcb3447181e1a6041acfc614aa5cb27e5573406", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ5OTUwNw==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/181#discussion_r367499507", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To start off the implementation of this scenario, you need to create a stream that will represents the temperature readings coming from the sensors. Since we will be handling time in this scenario, it is important that each reading contains a timestamp indicating when that reading was taken. The field `TIMESTAMP` will be used for this purpose.\n          \n          \n            \n            To start off the implementation of this scenario, you need to create a stream that represents the temperature readings coming from the sensors. Since we will be handling time in this scenario, it is important that each reading contains a timestamp indicating when that reading was taken. The field `TIMESTAMP` will be used for this purpose.", "author": "colinhicks", "createdAt": "2020-01-16T15:55:49Z", "path": "_includes/tutorials/hopping-windows/ksql/markup/dev/create-inputs.adoc", "diffHunk": "@@ -0,0 +1,5 @@\n+To start off the implementation of this scenario, you need to create a stream that will represents the temperature readings coming from the sensors. Since we will be handling time in this scenario, it is important that each reading contains a timestamp indicating when that reading was taken. The field `TIMESTAMP` will be used for this purpose.", "originalCommit": "edcb3447181e1a6041acfc614aa5cb27e5573406", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQ5OTgwNg==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/181#discussion_r367499806", "bodyText": "Let's use CP 5.3.2 for the docker images.", "author": "colinhicks", "createdAt": "2020-01-16T15:56:16Z", "path": "_includes/tutorials/hopping-windows/ksql/code/docker-compose.yml", "diffHunk": "@@ -0,0 +1,80 @@\n+---\n+version: '2'\n+\n+services:\n+  zookeeper:\n+    image: confluentinc/cp-zookeeper:5.3.0", "originalCommit": "edcb3447181e1a6041acfc614aa5cb27e5573406", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUwMjA4NA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/181#discussion_r367502084", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Note that we called the query that detects the temperature drop as `TRIGGERED_ALERTS` and we modeled as a table, since we are performing some aggregations in the query. But just like the temperature readings, alerts can happen continuously as well in a form of a stream of events -- therefore we transform the table back to a stream so we can have multiple alerts throughout time. Finally, also note that we rekeyed the stream to use the `ID` field as key.\n          \n          \n            \n            Note that we called the query that detects the temperature drop as `TRIGGERED_ALERTS` and we modeled as a table, since we are performing some aggregations in the query. But just like the temperature readings, alerts can happen continuously \u2013 therefore we transform the table back to a stream so we can have multiple alerts throughout time. Finally, also note that we rekeyed the stream to use the `ID` field as key.", "author": "colinhicks", "createdAt": "2020-01-16T15:59:45Z", "path": "_includes/tutorials/hopping-windows/ksql/markup/dev/transient-query.adoc", "diffHunk": "@@ -0,0 +1,11 @@\n+Note that we called the query that detects the temperature drop as `TRIGGERED_ALERTS` and we modeled as a table, since we are performing some aggregations in the query. But just like the temperature readings, alerts can happen continuously as well in a form of a stream of events -- therefore we transform the table back to a stream so we can have multiple alerts throughout time. Finally, also note that we rekeyed the stream to use the `ID` field as key.", "originalCommit": "edcb3447181e1a6041acfc614aa5cb27e5573406", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUwMzc3Mw==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/181#discussion_r367503773", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Now here comes the fun part. We need to create a query capable of detecting when the temperature drops below 45F for a period of 10 seconds. However, since our sensor emits readings every 5 seconds, we need to come up with a way to detect this even if the drop goes beyond the interval of 10 seconds. Hence why we are using hopping windows for this scenario. Since hopping windows are possibly-overlapping, we may have situations in which the temperature dropped across multiple 10 second windows.\n          \n          \n            \n            Now here comes the fun part. We need to create a query capable of detecting when the temperature drops below 45 \u00b0F for a period of 10 seconds. However, since our sensor emits readings every 5 seconds, we need to come up with a way to detect this even if the drop goes beyond the interval of 10 seconds. Hence why we are using hopping windows for this scenario. Since hopping windows may overlap, we may have situations in which the temperature dropped across multiple 10 second windows.", "author": "colinhicks", "createdAt": "2020-01-16T16:02:11Z", "path": "_includes/tutorials/hopping-windows/ksql/markup/dev/transient-window.adoc", "diffHunk": "@@ -0,0 +1,13 @@\n+Now here comes the fun part. We need to create a query capable of detecting when the temperature drops below 45F for a period of 10 seconds. However, since our sensor emits readings every 5 seconds, we need to come up with a way to detect this even if the drop goes beyond the interval of 10 seconds. Hence why we are using hopping windows for this scenario. Since hopping windows are possibly-overlapping, we may have situations in which the temperature dropped across multiple 10 second windows.", "originalCommit": "edcb3447181e1a6041acfc614aa5cb27e5573406", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUwODYxMQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/181#discussion_r367508611", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Along with the implementation of a hopping window, we will based off our logic in the average temperature within the detected period, and we will show this period through two different fields called `START_PERIOD` and `END_PERIOD`. This may come in handy if your alert system needs to have the information of when the temperature drop happened, besides of course doing the alerting.\n          \n          \n            \n            Along with implementing a hopping window, we will base our logic on the average temperature within the detected period, and we will show this period through two different fields called `START_PERIOD` and `END_PERIOD`. This may come in handy if your alert system needs to display the specific time period associated with each alert.", "author": "colinhicks", "createdAt": "2020-01-16T16:10:17Z", "path": "_includes/tutorials/hopping-windows/ksql/markup/dev/transient-window.adoc", "diffHunk": "@@ -0,0 +1,13 @@\n+Now here comes the fun part. We need to create a query capable of detecting when the temperature drops below 45F for a period of 10 seconds. However, since our sensor emits readings every 5 seconds, we need to come up with a way to detect this even if the drop goes beyond the interval of 10 seconds. Hence why we are using hopping windows for this scenario. Since hopping windows are possibly-overlapping, we may have situations in which the temperature dropped across multiple 10 second windows.\n+\n+Along with the implementation of a hopping window, we will based off our logic in the average temperature within the detected period, and we will show this period through two different fields called `START_PERIOD` and `END_PERIOD`. This may come in handy if your alert system needs to have the information of when the temperature drop happened, besides of course doing the alerting.", "originalCommit": "edcb3447181e1a6041acfc614aa5cb27e5573406", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUwODg4MA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/181#discussion_r367508880", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This should query should produce the following output:\n          \n          \n            \n            This query should produce the following output:", "author": "colinhicks", "createdAt": "2020-01-16T16:10:44Z", "path": "_includes/tutorials/hopping-windows/ksql/markup/dev/transient-window.adoc", "diffHunk": "@@ -0,0 +1,13 @@\n+Now here comes the fun part. We need to create a query capable of detecting when the temperature drops below 45F for a period of 10 seconds. However, since our sensor emits readings every 5 seconds, we need to come up with a way to detect this even if the drop goes beyond the interval of 10 seconds. Hence why we are using hopping windows for this scenario. Since hopping windows are possibly-overlapping, we may have situations in which the temperature dropped across multiple 10 second windows.\n+\n+Along with the implementation of a hopping window, we will based off our logic in the average temperature within the detected period, and we will show this period through two different fields called `START_PERIOD` and `END_PERIOD`. This may come in handy if your alert system needs to have the information of when the temperature drop happened, besides of course doing the alerting.\n+\n++++++\n+<pre class=\"snippet\"><code class=\"sql\">{% include_raw tutorials/hopping-windows/ksql/code/tutorial-steps/dev/transient-window.sql %}</code></pre>\n++++++\n+\n+This should query should produce the following output:", "originalCommit": "edcb3447181e1a6041acfc614aa5cb27e5573406", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzUxMDM4OQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/181#discussion_r367510389", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              introduction: \"You want to build an alerting system that automatically detects if the temperature of a room consistently drops. In this tutorial, we'll write a program that monitors a stream of temperature readings and detect when the temperature consistently drops below 45F for a period of 10 seconds.\"\n          \n          \n            \n              introduction: \"You want to build an alerting system that automatically detects if the temperature of a room consistently drops. In this tutorial, we'll write a program that monitors a stream of temperature readings and detects when the temperature drops below 45 \u00b0F for a period of 10 seconds.\"", "author": "colinhicks", "createdAt": "2020-01-16T16:13:15Z", "path": "_data/tutorials.yaml", "diffHunk": "@@ -100,7 +100,15 @@ tumbling-windows:\n   introduction: \"Suppose you have a topic with events that represent ratings of movies. In this tutorial, we'll write a program that maintains tumbling windows counting the total number of ratings that each movie has received.\"\n   status:\n     ksql: enabled\n-    kstreams: enabled\n+\n+hopping-windows:\n+  title: \"How to create hopping windows\"\n+  meta-description: \"Learn to create hopping windows\"\n+  slug: \"/create-hopping-windows\"\n+  problem: \"you have time-series events in a Kafka topic, and you want to group them into fixed-size, possibly-overlapping, contiguous time intervals to identify an specific scenario.\"\n+  introduction: \"You want to build an alerting system that automatically detects if the temperature of a room consistently drops. In this tutorial, we'll write a program that monitors a stream of temperature readings and detect when the temperature consistently drops below 45F for a period of 10 seconds.\"", "originalCommit": "edcb3447181e1a6041acfc614aa5cb27e5573406", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9ae17139a1e385070fc49a7560e9d1310c4899fb", "url": "https://github.com/confluentinc/kafka-tutorials/commit/9ae17139a1e385070fc49a7560e9d1310c4899fb", "message": "Update _includes/tutorials/hopping-windows/ksql/markup/dev/create-inputs.adoc\n\nCo-Authored-By: Colin Hicks <colin.hicks@confluent.io>", "committedDate": "2020-01-16T16:16:39Z", "type": "commit"}, {"oid": "5a93b2620ac7d66969a48f09a92373ff8b260d10", "url": "https://github.com/confluentinc/kafka-tutorials/commit/5a93b2620ac7d66969a48f09a92373ff8b260d10", "message": "Update _includes/tutorials/hopping-windows/ksql/markup/dev/transient-query.adoc\n\nCo-Authored-By: Colin Hicks <colin.hicks@confluent.io>", "committedDate": "2020-01-16T16:17:09Z", "type": "commit"}, {"oid": "47c63bb2f7f7ea3b9473dd203a4c2b51a1ad264c", "url": "https://github.com/confluentinc/kafka-tutorials/commit/47c63bb2f7f7ea3b9473dd203a4c2b51a1ad264c", "message": "Update _includes/tutorials/hopping-windows/ksql/markup/dev/transient-window.adoc\n\nCo-Authored-By: Colin Hicks <colin.hicks@confluent.io>", "committedDate": "2020-01-16T16:17:23Z", "type": "commit"}, {"oid": "da44d5d96d4aa8319b06814171a5d62340383166", "url": "https://github.com/confluentinc/kafka-tutorials/commit/da44d5d96d4aa8319b06814171a5d62340383166", "message": "Update _includes/tutorials/hopping-windows/ksql/markup/dev/transient-window.adoc\n\nCo-Authored-By: Colin Hicks <colin.hicks@confluent.io>", "committedDate": "2020-01-16T16:17:34Z", "type": "commit"}, {"oid": "7fa274ef3d17c6413ef84a5466aca74659d60654", "url": "https://github.com/confluentinc/kafka-tutorials/commit/7fa274ef3d17c6413ef84a5466aca74659d60654", "message": "Updated Docker images for CP 5.3.2", "committedDate": "2020-01-16T16:18:44Z", "type": "commit"}, {"oid": "f58050dee49514aadce1da6eb495fa820e826cc0", "url": "https://github.com/confluentinc/kafka-tutorials/commit/f58050dee49514aadce1da6eb495fa820e826cc0", "message": "implementing Colin's suggestions 1", "committedDate": "2020-01-16T16:21:48Z", "type": "commit"}, {"oid": "891f66c2e75c3c4e5a7d324d285da94e9be43399", "url": "https://github.com/confluentinc/kafka-tutorials/commit/891f66c2e75c3c4e5a7d324d285da94e9be43399", "message": "implementing Colin's suggestions 2", "committedDate": "2020-01-16T16:22:50Z", "type": "commit"}]}