{"pr_number": 423, "pr_title": "update connect tutorial inline with changes to ksqlDB master", "pr_createdAt": "2020-06-05T10:30:23Z", "pr_url": "https://github.com/confluentinc/kafka-tutorials/pull/423", "timeline": [{"oid": "d9049ad222f83870acba2bb481ed46be67071efa", "url": "https://github.com/confluentinc/kafka-tutorials/commit/d9049ad222f83870acba2bb481ed46be67071efa", "message": "update connect tutorial inline with changes to ksqlDB master\n\nThis includes adding a new SMT to remove the `city_id` from the value. This is needed if we want to name the primary key in ksqlDB `city_id`. Without it, there would be a name clash with the PK and the `city_id` column in the value schema.\n\nAlso added some details of _what_ the SMTs are doing, as its not necessarily clear to users.", "committedDate": "2020-06-05T10:29:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk1MTk4OQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/423#discussion_r435951989", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            1. The `transforms` stanza which is responsible for setting the key to the value of the `city_id` field. They run in the order define by `transforms`:\n          \n          \n            \n            1. The `transforms` stanza, which is responsible for setting the key to the value of the `city_id` field. They run in the order defined by `transforms`:", "author": "colinhicks", "createdAt": "2020-06-05T14:16:12Z", "path": "_includes/tutorials/connect-add-key-to-source/ksql/markup/dev/create-connector.adoc", "diffHunk": "@@ -7,7 +7,10 @@ Launch the ksqlDB CLI:\n \n From the ksqlDB prompt you can create the JDBC source connector. There are a couple of points to note: \n \n-1. The `transforms` stanza which is responsible for setting the key to the value of the `city_id` field\n+1. The `transforms` stanza which is responsible for setting the key to the value of the `city_id` field. They run in the order define by `transforms`:", "originalCommit": "d9049ad222f83870acba2bb481ed46be67071efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk1MjI4Ng==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/423#discussion_r435952286", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                * - `removeKeyFromValue` removes the `city_id` from the message value, as its now stored in the message key.\n          \n          \n            \n                * - `removeKeyFromValue` removes the `city_id` from the message value, as it's now stored in the message key.", "author": "colinhicks", "createdAt": "2020-06-05T14:16:42Z", "path": "_includes/tutorials/connect-add-key-to-source/ksql/markup/dev/create-connector.adoc", "diffHunk": "@@ -7,7 +7,10 @@ Launch the ksqlDB CLI:\n \n From the ksqlDB prompt you can create the JDBC source connector. There are a couple of points to note: \n \n-1. The `transforms` stanza which is responsible for setting the key to the value of the `city_id` field\n+1. The `transforms` stanza which is responsible for setting the key to the value of the `city_id` field. They run in the order define by `transforms`:\n+    * - `copyFieldToKey` sets the key to a struct containing the `city_id` field from the value.\n+    * - `extractKeyFromStruct` sets the key to just the `city_id` field of the struct set by the previous step.\n+    * - `removeKeyFromValue` removes the `city_id` from the message value, as its now stored in the message key.", "originalCommit": "d9049ad222f83870acba2bb481ed46be67071efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk1MjkxNQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/423#discussion_r435952915", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            We only need to specify the datatype of the table's key (`CITY_ID`)- the rest of the schema is picked up automagically from the Schema Registry since we're using Avro to serialize the value part of the payload.\n          \n          \n            \n            We only need to specify the datatype of the table's key (`CITY_ID`) \u2013 the rest of the schema is picked up automagically from the Schema Registry since we're using Avro to serialize the value part of the payload.", "author": "colinhicks", "createdAt": "2020-06-05T14:17:41Z", "path": "_includes/tutorials/connect-add-key-to-source/ksql/markup/dev/create-table.adoc", "diffHunk": "@@ -1,6 +1,6 @@\n Now that we have a topic with data in from the source system and the keys appropriately set, we can declare a ksqlDB table over the topic.\n \n-We only need to specify the datatype of the table's key (`ROWKEY`) - the rest of the schema is picked up automagically from the Schema Registry since we're using Avro to serialize the value part of the payload. \n+We only need to specify the datatype of the table's key (`CITY_ID`)- the rest of the schema is picked up automagically from the Schema Registry since we're using Avro to serialize the value part of the payload.", "originalCommit": "d9049ad222f83870acba2bb481ed46be67071efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6cef952b8bf2ca1076d1f867df4ce91076b0d024", "url": "https://github.com/confluentinc/kafka-tutorials/commit/6cef952b8bf2ca1076d1f867df4ce91076b0d024", "message": "Update _includes/tutorials/connect-add-key-to-source/ksql/markup/dev/create-connector.adoc\n\nCo-authored-by: Colin Hicks <colin.hicks@gmail.com>", "committedDate": "2020-06-08T12:34:03Z", "type": "commit"}, {"oid": "ea3216358cafabc42ed075ef55a1fbb6f6f2d7ab", "url": "https://github.com/confluentinc/kafka-tutorials/commit/ea3216358cafabc42ed075ef55a1fbb6f6f2d7ab", "message": "Update _includes/tutorials/connect-add-key-to-source/ksql/markup/dev/create-connector.adoc\n\nCo-authored-by: Colin Hicks <colin.hicks@gmail.com>", "committedDate": "2020-06-08T12:34:12Z", "type": "commit"}, {"oid": "44bf862fc02348885c22b0e42b978e2cd82246dc", "url": "https://github.com/confluentinc/kafka-tutorials/commit/44bf862fc02348885c22b0e42b978e2cd82246dc", "message": "Update _includes/tutorials/connect-add-key-to-source/ksql/markup/dev/create-table.adoc\n\nCo-authored-by: Colin Hicks <colin.hicks@gmail.com>", "committedDate": "2020-06-08T12:34:22Z", "type": "commit"}]}