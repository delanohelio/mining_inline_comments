{"pr_number": 496, "pr_title": "GH-451: Run kafka-connect-datagen to Confluent Cloud", "pr_createdAt": "2020-08-04T12:50:51Z", "pr_url": "https://github.com/confluentinc/kafka-tutorials/pull/496", "timeline": [{"oid": "2022ba10ee1125641d0f1c6bb0c481dd053efd91", "url": "https://github.com/confluentinc/kafka-tutorials/commit/2022ba10ee1125641d0f1c6bb0c481dd053efd91", "message": "Initial checkin", "committedDate": "2020-08-03T11:42:47Z", "type": "commit"}, {"oid": "8a99b4cdc6562a87da466354c206594ffc1cb3f4", "url": "https://github.com/confluentinc/kafka-tutorials/commit/8a99b4cdc6562a87da466354c206594ffc1cb3f4", "message": "Checkpoint", "committedDate": "2020-08-03T12:01:59Z", "type": "commit"}, {"oid": "2c085c0769c2efd03a195b5234d6dc39e816e7ab", "url": "https://github.com/confluentinc/kafka-tutorials/commit/2c085c0769c2efd03a195b5234d6dc39e816e7ab", "message": "Add new steps", "committedDate": "2020-08-03T12:25:05Z", "type": "commit"}, {"oid": "2a496f2e484d7565f085f523821db34e11db5680", "url": "https://github.com/confluentinc/kafka-tutorials/commit/2a496f2e484d7565f085f523821db34e11db5680", "message": "Add hyperlinks", "committedDate": "2020-08-03T13:05:58Z", "type": "commit"}, {"oid": "1ed0f419f2ae5957ca273c518908ff0a2dbbf217", "url": "https://github.com/confluentinc/kafka-tutorials/commit/1ed0f419f2ae5957ca273c518908ff0a2dbbf217", "message": "Edit commands and output", "committedDate": "2020-08-03T15:55:48Z", "type": "commit"}, {"oid": "d200708a51e9f3b653ddfdd7f47f52b9de8c9772", "url": "https://github.com/confluentinc/kafka-tutorials/commit/d200708a51e9f3b653ddfdd7f47f52b9de8c9772", "message": "Add steps and output; verified", "committedDate": "2020-08-04T12:06:40Z", "type": "commit"}, {"oid": "300bf4a93793251e3f3c7b1bd9cef0952896a668", "url": "https://github.com/confluentinc/kafka-tutorials/commit/300bf4a93793251e3f3c7b1bd9cef0952896a668", "message": "Update Makefile", "committedDate": "2020-08-04T12:49:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2MTIzMA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465061230", "bodyText": "Just suggesting getting the code closer to the instructions for signing up and not after the CLI reminder:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If this is your first time using link:https://confluent.cloud[Confluent Cloud], follow the manual steps in the link:https://docs.confluent.io/current/quickstart/cloud-quickstart/index.html[Confluent Cloud Quick Start].\n          \n          \n            \n            Be sure to also install the link:https://docs.confluent.io/current/cloud/cli/install.html[Confluent Cloud CLI].\n          \n          \n            \n            Use the promo code `CC100KTS` to receive an additional $100 free usage (https://www.confluent.io/confluent-cloud-promo-disclaimer[details]).\n          \n          \n            \n            If this is your first time using link:https://confluent.cloud[Confluent Cloud], follow the manual steps in the link:https://docs.confluent.io/current/quickstart/cloud-quickstart/index.html[Confluent Cloud Quick Start]. When signing up, use the promo code `CC100KTS` to receive an additional $100 free usage (https://www.confluent.io/confluent-cloud-promo-disclaimer[details]).\n          \n          \n            \n            \n          \n          \n            \n            Be sure to install the link:https://docs.confluent.io/current/cloud/cli/install.html[Confluent Cloud CLI].", "author": "rspurgeon", "createdAt": "2020-08-04T13:46:02Z", "path": "_includes/tutorials/kafka-connect-datagen-ccloud/kafka/markup/dev/setup-ccloud.adoc", "diffHunk": "@@ -0,0 +1,5 @@\n+If this is your first time using link:https://confluent.cloud[Confluent Cloud], follow the manual steps in the link:https://docs.confluent.io/current/quickstart/cloud-quickstart/index.html[Confluent Cloud Quick Start].\n+Be sure to also install the link:https://docs.confluent.io/current/cloud/cli/install.html[Confluent Cloud CLI].\n+Use the promo code `CC100KTS` to receive an additional $100 free usage (https://www.confluent.io/confluent-cloud-promo-disclaimer[details]).", "originalCommit": "300bf4a93793251e3f3c7b1bd9cef0952896a668", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c1e79d526d88e92865ddca0f2b5d441d45d24eee", "url": "https://github.com/confluentinc/kafka-tutorials/commit/c1e79d526d88e92865ddca0f2b5d441d45d24eee", "message": "Update _includes/tutorials/kafka-connect-datagen-ccloud/kafka/markup/dev/setup-ccloud.adoc\n\nCo-authored-by: Rick Spurgeon <rspurgeon@users.noreply.github.com>", "committedDate": "2020-08-04T13:48:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2NTY2Mg==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465065662", "bodyText": "For someone totally new to our demos, the link takes them to the examples repo subpage for ccloud-stack. That page lacks some initial direction for \"clone examples, cd to ccloud/ccloud-stack\".  IMO somone landing there very new might get stuck.  Just making an observation that the page isn't toally independent and maybe we should add those additional steps there (or here).  WDYT?", "author": "rspurgeon", "createdAt": "2020-08-04T13:52:22Z", "path": "_includes/tutorials/kafka-connect-datagen-ccloud/kafka/markup/dev/setup-ccloud.adoc", "diffHunk": "@@ -0,0 +1,5 @@\n+If this is your first time using link:https://confluent.cloud[Confluent Cloud], follow the manual steps in the link:https://docs.confluent.io/current/quickstart/cloud-quickstart/index.html[Confluent Cloud Quick Start].\n+Be sure to also install the link:https://docs.confluent.io/current/cloud/cli/install.html[Confluent Cloud CLI].\n+Use the promo code `CC100KTS` to receive an additional $100 free usage (https://www.confluent.io/confluent-cloud-promo-disclaimer[details]).\n+\n+If you are already a Confluent Cloud user, consider running the link:https://github.com/confluentinc/examples/tree/latest/ccloud/ccloud-stack[ccloud-stack utility] to create a new stack in Confluent Cloud for this tutorial.", "originalCommit": "300bf4a93793251e3f3c7b1bd9cef0952896a668", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2ODQ2Mw==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465068463", "bodyText": "@rspurgeon very good question that we haven't discussed yet but worth to sync on, especially if there will be other Confluent Cloud tutorials.\nThere are a few options:\n\nPoint users to ccloud-stack and that's it (as done here). If the ccloud-stack README.md needs steps like clone/cd, I can add that in.\nRemove mention of ccloud-stack completely\nPull into the KT all required steps to run ccloud-stack.   But couldn't the same argument be made when telling users to follow the Confluent Cloud Quick start (it's a link to docs).\nOther?\n\nNote: later this quarter, ccloud-stack documentation will be augmented and moved from GH to docs", "author": "ybyzek", "createdAt": "2020-08-04T13:56:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2NTY2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTEwMTA4NQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465101085", "bodyText": "For students wishing to do things point and click manually, the quick start seems good IMO.\nOne possibility: For others wanting something automated, we could suggest an automated approach (in additon to the quickstart way) by integrating ccloud-stack either by duplication or introducing a script that does it for the student as part of the ccloud tutorials.    Something like (pseudo): wget http://gitdata/confluentinc/examples/latest/ccloud/ccloud_stack.sh and then use the script from there and have that be in a script the student runs.", "author": "rspurgeon", "createdAt": "2020-08-04T14:39:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2NTY2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE2MjA0MA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465162040", "bodyText": "Yeah, the description you wrote is what I meant by option 3 above. The advantages of going this route include:\n\nHelps users with more guidance on how to run ccloud-stack\nEliminates problems with user errors related to wrong credentials, no ACLs for service accounts, etc (the whole class of user errors we encountered in our other demos due to environment not being set properly)\nPotentially.....more easily allows for future automation to validate the tutorial\n\n@rspurgeon so if this is your leaning as well, I'll implement (wget library, run code).  WDYT?", "author": "ybyzek", "createdAt": "2020-08-04T16:05:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2NTY2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE5OTc5Nw==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465199797", "bodyText": "I think it would be a nice addition, but maybe we should confer w/ the broader KT team to ensure they are ok w/ bringing that into the fold?  Your call", "author": "rspurgeon", "createdAt": "2020-08-04T17:05:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2NTY2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA2OTY4MA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465069680", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            First, create a file called `datagen-source-config.json` with the connector configuration for the Kafka Connect Datagen source connector for Confluent Cloud.\n          \n          \n            \n            First, create a file called `datagen-source-config.json` with the below connector configuration for the Kafka Connect Datagen source connector for Confluent Cloud.", "author": "rspurgeon", "createdAt": "2020-08-04T13:57:51Z", "path": "_includes/tutorials/kafka-connect-datagen-ccloud/kafka/markup/dev/create-connector-config.adoc", "diffHunk": "@@ -0,0 +1,11 @@\n+You can provision the Kafka Connect Datagen connector through the Confluent Cloud UI, but this tutorial uses the Confluent Cloud CLI.\n+\n+First, create a file called `datagen-source-config.json` with the connector configuration for the Kafka Connect Datagen source connector for Confluent Cloud.", "originalCommit": "300bf4a93793251e3f3c7b1bd9cef0952896a668", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA3MjEwNQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465072105", "bodyText": "FYC\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In this sample configuration, the connector produces JSON data with a schema specification called link:https://github.com/confluentinc/kafka-connect-datagen/blob/master/src/main/resources/pageviews_schema.avro[PAGEVIEWS] to a Kafka topic called `mytopic`.\n          \n          \n            \n            In this sample configuration, the connector uses the PAGEVIEWS quickstart to produce JSON records simulating website pageviews. The records will be formatted with a schema specification called link:https://github.com/confluentinc/kafka-connect-datagen/blob/master/src/main/resources/pageviews_schema.avro[PAGEVIEWS] to a Kafka topic called `mytopic`.", "author": "rspurgeon", "createdAt": "2020-08-04T14:01:05Z", "path": "_includes/tutorials/kafka-connect-datagen-ccloud/kafka/markup/dev/create-connector-config.adoc", "diffHunk": "@@ -0,0 +1,11 @@\n+You can provision the Kafka Connect Datagen connector through the Confluent Cloud UI, but this tutorial uses the Confluent Cloud CLI.\n+\n+First, create a file called `datagen-source-config.json` with the connector configuration for the Kafka Connect Datagen source connector for Confluent Cloud.\n+Substitute `<API KEY>` and `<API SECRET>` with your credentials.\n+\n+In this sample configuration, the connector produces JSON data with a schema specification called link:https://github.com/confluentinc/kafka-connect-datagen/blob/master/src/main/resources/pageviews_schema.avro[PAGEVIEWS] to a Kafka topic called `mytopic`.", "originalCommit": "300bf4a93793251e3f3c7b1bd9cef0952896a668", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA3NzY0MA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465077640", "bodyText": "FWIW I got tripped up here because my \"current\" kafka cluster was not set to the proper one I had created the key for.  Maybe we need to add an explicit ccloud kafka cluster use <your-cluster-id> in a previous step to ensure the user gets that (even though it might be implied in some linked instructions above).   Additionally, we have them delete resources in the cleanup section so this might help avoid unintended deletions for students.", "author": "rspurgeon", "createdAt": "2020-08-04T14:08:39Z", "path": "_includes/tutorials/kafka-connect-datagen-ccloud/kafka/markup/dev/provision-connector.adoc", "diffHunk": "@@ -0,0 +1,6 @@\n+Provision the Kafka Connect Datagen source connector with the following command.\n+Notice that it references the connector configuration file `datagen-source-config.json` that you created in the previous step.", "originalCommit": "c1e79d526d88e92865ddca0f2b5d441d45d24eee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE2MjUwNQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465162505", "bodyText": "If we go the ccloud-stack route, this will no longer be an issue.", "author": "ybyzek", "createdAt": "2020-08-04T16:05:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA3NzY0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA4MDA4Nw==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r465080087", "bodyText": "FYC\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Wait a minute for the connector to start. It will change state from `PROVISIONING` to `RUNNING` when it is ready.\n          \n          \n            \n            After a minute or two, rerun this command to get the updated Status, it will change from `PROVISIONING` to `RUNNING` when the Connector is ready.", "author": "rspurgeon", "createdAt": "2020-08-04T14:11:59Z", "path": "_includes/tutorials/kafka-connect-datagen-ccloud/kafka/markup/dev/check-connector.adoc", "diffHunk": "@@ -0,0 +1,11 @@\n+Check the status of the connector:\n+\n++++++\n+<pre class=\"snippet\"><code class=\"shell\">{% include_raw tutorials/kafka-connect-datagen-ccloud/kafka/code/tutorial-steps/dev/check-connector.sh %}</code></pre>\n++++++\n+\n+Wait a minute for the connector to start. It will change state from `PROVISIONING` to `RUNNING` when it is ready.", "originalCommit": "c1e79d526d88e92865ddca0f2b5d441d45d24eee", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a486de5383b4d4f97b1b63631798de9c8b55e65a", "url": "https://github.com/confluentinc/kafka-tutorials/commit/a486de5383b4d4f97b1b63631798de9c8b55e65a", "message": "Apply suggestions from code review\n\nCo-authored-by: Rick Spurgeon <rspurgeon@users.noreply.github.com>", "committedDate": "2020-08-04T16:06:04Z", "type": "commit"}, {"oid": "00387451c63d491ae72b34e8f412805dc8870ca4", "url": "https://github.com/confluentinc/kafka-tutorials/commit/00387451c63d491ae72b34e8f412805dc8870ca4", "message": "Use ccloud-stack", "committedDate": "2020-08-05T19:58:53Z", "type": "commit"}, {"oid": "7015673300cc28e9548e424e6b6dc12366d2dcb7", "url": "https://github.com/confluentinc/kafka-tutorials/commit/7015673300cc28e9548e424e6b6dc12366d2dcb7", "message": "Tweak", "committedDate": "2020-08-05T20:06:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2OTMyMQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r467169321", "bodyText": "This step failed for me:\n\u279c cat stack-configs/demo-env-*.cfg\n\nzsh: no matches found: stack-configs/demo-env-*.cfg\n\n\u279c cat stack-configs/java-service-account-96968.config\n# --------------------------------------\n# Confluent Cloud connection information\n# --------------------------------------\n...", "author": "rspurgeon", "createdAt": "2020-08-07T17:19:01Z", "path": "_includes/tutorials/kafka-connect-datagen-ccloud/kafka/code/tutorial-steps/dev/view-ccloud-config.sh", "diffHunk": "@@ -0,0 +1 @@\n+cat stack-configs/demo-env-*.cfg", "originalCommit": "7015673300cc28e9548e424e6b6dc12366d2dcb7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIyMDczMQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r467220731", "bodyText": "@rspurgeon good catch, fixed.", "author": "ybyzek", "createdAt": "2020-08-07T19:07:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2OTMyMQ=="}], "type": "inlineReview"}, {"oid": "50ae2352840038dd6e5444af10112eb796e8480d", "url": "https://github.com/confluentinc/kafka-tutorials/commit/50ae2352840038dd6e5444af10112eb796e8480d", "message": "Update cat command", "committedDate": "2020-08-07T19:07:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg1NzE1MA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r468857150", "bodyText": "FYC - add text showing the result of successful topic creation.", "author": "bbejeck", "createdAt": "2020-08-11T20:51:07Z", "path": "_includes/tutorials/kafka-connect-datagen-ccloud/kafka/markup/dev/create-topic.adoc", "diffHunk": "@@ -0,0 +1,5 @@\n+Create a Kafka topic called `mytopic` in Confluent Cloud.\n+\n++++++\n+<pre class=\"snippet\"><code class=\"shell\">{% include_raw tutorials/kafka-connect-datagen-ccloud/kafka/code/tutorial-steps/dev/create-topic.sh %}</code></pre>\n++++++", "originalCommit": "50ae2352840038dd6e5444af10112eb796e8480d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTMzMDE4NQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r469330185", "bodyText": "Ack, resolved in 5d3dd56", "author": "ybyzek", "createdAt": "2020-08-12T15:06:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg1NzE1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg1ODQyMQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r468858421", "bodyText": "FYC - remove  --from-beginning flag, it's a lot of data on the terminal", "author": "bbejeck", "createdAt": "2020-08-11T20:53:36Z", "path": "_includes/tutorials/kafka-connect-datagen-ccloud/kafka/code/tutorial-steps/dev/harness-console-consumer-keys.sh", "diffHunk": "@@ -0,0 +1 @@\n+ccloud kafka topic consume mytopic --print-key --from-beginning ", "originalCommit": "50ae2352840038dd6e5444af10112eb796e8480d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTMzMDExMA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/496#discussion_r469330110", "bodyText": "Ack, resolved in 5d3dd56", "author": "ybyzek", "createdAt": "2020-08-12T15:06:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODg1ODQyMQ=="}], "type": "inlineReview"}, {"oid": "5d3dd56cb80808f3662e3794a54cd93feb7fc212", "url": "https://github.com/confluentinc/kafka-tutorials/commit/5d3dd56cb80808f3662e3794a54cd93feb7fc212", "message": "Address feedback from Bill", "committedDate": "2020-08-12T15:06:15Z", "type": "commit"}]}