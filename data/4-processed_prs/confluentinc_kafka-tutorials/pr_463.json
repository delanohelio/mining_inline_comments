{"pr_number": 463, "pr_title": "DEVX-1883: First kafka consumer application [Kafka 101 Series]", "pr_createdAt": "2020-06-29T23:27:20Z", "pr_url": "https://github.com/confluentinc/kafka-tutorials/pull/463", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDMyMDMwNw==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/463#discussion_r450320307", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            But your first, you're going to open a shell on the docker broker contaniner.\n          \n          \n            \n            But first, you're going to open a shell on the broker docker container.", "author": "rspurgeon", "createdAt": "2020-07-06T15:56:14Z", "path": "_includes/tutorials/kafka-consumer-application/kafka/markup/dev/create-topic.adoc", "diffHunk": "@@ -0,0 +1,17 @@\n+\n+In this step we're going to create a topic for use during this tutorial.\n+\n+But your first, you're going to open a shell on the docker broker contaniner.", "originalCommit": "aca116bd56c063a547786e68da31c8c78b554fa3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkwNjYzNA==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/463#discussion_r458906634", "bodyText": "ack", "author": "bbejeck", "createdAt": "2020-07-22T16:06:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDMyMDMwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDMyMzY2OQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/463#discussion_r450323669", "bodyText": "The mix of the Header (Deserializers) and the formatted text as header looks a little odd in my opinion.  Maybe you could remove the headers from each and just reference the properties in each paragraph.  Possibly add bullet points if that would look good.", "author": "rspurgeon", "createdAt": "2020-07-06T16:01:44Z", "path": "_includes/tutorials/kafka-consumer-application/kafka/markup/dev/make-dev-file.adoc", "diffHunk": "@@ -0,0 +1,19 @@\n+Then create a development configuration file at `configuration/dev.properties`:\n+\n++++++\n+<pre class=\"snippet\"><code class=\"shell\">{% include_raw tutorials/kafka-consumer-application/kafka/code/configuration/dev.properties %}</code></pre>\n++++++\n+\n+Let's do a quick overview of some of the more important properties here:\n+\n+Deserilizers:: The `key.deserializer` and `value.deserializer` properties provide a class implementing the `Deserializer` interface for converting `byte` arrays into the expected object type of the key and value respectively.\n+\n+`max.poll.interval.ms`:: The `max.poll.interval.ms` is the maximum amount of time a consumer may take between calls to `Consumer.poll()`.  If a consumer instance takes longer than the specified time, it's considered non-reponsive and removed from the consumer-group triggering a rebalance.\n+\n+`enable.auto.commit`:: Setting this configuration to `true` enables the Kafka consumer to handle commiting offsets automatically for you.  The default setting is `true`, but it's included here to make it explicit.  When you enable auto commit, you need to ensure you've processed all records _**before**_ the consumer calls `poll` again.  Once there is a subsequent call to `poll`, all the records returned from the previous call are considered processed and the consumer commits the offsets.\n+\n+`auto.offset.reset`::  If a consumer instance can't locate any offsets for its topic-partition assignment(s), it will resume processing from the _**earliest**_ available offset.\n+\n+`group.id`:: Kafka uses the concept of a consumer-group which is used to represent a logical single group.  A consumer-group can be made up of mulitple members all sharing the same `group.id` configuration.  As members leave or join the consumer-group, the group-coordinator triggres a rebalance which causes topic-partion reassignment among active members of the group.\n+", "originalCommit": "aca116bd56c063a547786e68da31c8c78b554fa3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkwODY0Ng==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/463#discussion_r458908646", "bodyText": "Yep will do.  Good call.", "author": "bbejeck", "createdAt": "2020-07-22T16:08:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDMyMzY2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM0MDQzMg==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/463#discussion_r450340432", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In this tutorial you'll inject the dependencies in the `KafkaConsumerApplication.main()` method, but in practice you'll may use some depnendency injection code such as the  https://spring.io/projects/spring-framework[Spring Framework].\n          \n          \n            \n            In this tutorial you'll inject the dependencies in the `KafkaConsumerApplication.main()` method, but in practice you may want to use a dependency injection framework library, such as the https://spring.io/projects/spring-framework[Spring Framework].", "author": "rspurgeon", "createdAt": "2020-07-06T16:28:42Z", "path": "_includes/tutorials/kafka-consumer-application/kafka/markup/dev/make-consumer-app.adoc", "diffHunk": "@@ -0,0 +1,62 @@\n+////\n+In this file you describe the Kafka streams topology, and should cover the main points of the tutorial.\n+The text assumes a method buildTopology exists and constructs the Kafka Streams application.  Feel free to modify the text below to suit your needs.\n+////\n+\n+To complete this tutorial, you'll build a main application class and a helper class\n+\n+\n+First, you'll create the main application,`KafkaConsumerApplication`, which is the focal point of this tutorial; consuming records from a Kafka topic.\n+\n+\n+Let's go over some of the key parts of the `KafkaConsumerApplication` starting with the constructor:\n+\n+[source, java]\n+.KafkaConsumerApplication constructor\n+----\n+public KafkaConsumerApplication(final Consumer<String, String> consumer,\n+                                final ConsumerRecordsHandler<String, String> recordsHandler) { // <1>\n+    this.consumer = consumer;\n+    this.recordsHandler = recordsHandler;\n+}\n+----\n+\n+<1> Here you're suppling instances of the `Consumer` and `ConsumerRecordsHandler` via constructor parameters.\n+\n+By using interfaces vs. concreate implentations you can more easily test the `KafkaConsumerApplication` class by swapping in a `MockConsumer` for the test.  We'll cover testing in an upcoming section.  Also, interfaces make it simple to change `ConsumerRecord` handling at run-time.\n+\n+In this tutorial you'll inject the dependencies in the `KafkaConsumerApplication.main()` method, but in practice you'll may use some depnendency injection code such as the  https://spring.io/projects/spring-framework[Spring Framework].", "originalCommit": "aca116bd56c063a547786e68da31c8c78b554fa3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkxMjgxOQ==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/463#discussion_r458912819", "bodyText": "ack", "author": "bbejeck", "createdAt": "2020-07-22T16:14:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM0MDQzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM0ODY3Mg==", "url": "https://github.com/confluentinc/kafka-tutorials/pull/463#discussion_r450348672", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Run this command to print the results to the console:\n          \n          \n            \n            In a new terminal, run this command to print the results to the console:", "author": "rspurgeon", "createdAt": "2020-07-06T16:42:12Z", "path": "_includes/tutorials/kafka-consumer-application/kafka/markup/dev/print-consumer-file-results.adoc", "diffHunk": "@@ -0,0 +1,19 @@\n+////\n+  This is a sample content file for how to include a console consumer to the tutorial, probably a good idea so the end user can watch the results\n+  of the tutorial.  Change the text as needed.\n+\n+////\n+\n+Your consumer application should have consumed all the records sent and written them out to a file.\n+\n+Run this command to print the results to the console:", "originalCommit": "aca116bd56c063a547786e68da31c8c78b554fa3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d2e093848605afee4d93b48fe23f9cfedd820ac5", "url": "https://github.com/confluentinc/kafka-tutorials/commit/d2e093848605afee4d93b48fe23f9cfedd820ac5", "message": "Breakout code to two sections add test for helper classes", "committedDate": "2020-07-21T22:46:51Z", "type": "forcePushed"}, {"oid": "81a3a59ff2f349cd6350fcf57c8ccfa58f64d433", "url": "https://github.com/confluentinc/kafka-tutorials/commit/81a3a59ff2f349cd6350fcf57c8ccfa58f64d433", "message": "initial commit for consumer application", "committedDate": "2020-07-22T20:11:49Z", "type": "commit"}, {"oid": "3a1d8b73e6f8435b15758818843a7fee86c18d93", "url": "https://github.com/confluentinc/kafka-tutorials/commit/3a1d8b73e6f8435b15758818843a7fee86c18d93", "message": "Changes for adding kafka consumer application tutorial", "committedDate": "2020-07-22T20:12:49Z", "type": "commit"}, {"oid": "dd1affcf88e2715d554b9bb94c79854349d59fcc", "url": "https://github.com/confluentinc/kafka-tutorials/commit/dd1affcf88e2715d554b9bb94c79854349d59fcc", "message": "started adding narrative and docker shell steps", "committedDate": "2020-07-22T20:12:49Z", "type": "commit"}, {"oid": "04eb7e0faa81cdc23aaada1a99a98cb790741a6e", "url": "https://github.com/confluentinc/kafka-tutorials/commit/04eb7e0faa81cdc23aaada1a99a98cb790741a6e", "message": "final work for adding consumer application tutorial", "committedDate": "2020-07-22T20:13:38Z", "type": "commit"}, {"oid": "c3acada595e756acf981a29483293f997f1e2d12", "url": "https://github.com/confluentinc/kafka-tutorials/commit/c3acada595e756acf981a29483293f997f1e2d12", "message": "Remove unnecessary file", "committedDate": "2020-07-22T20:13:38Z", "type": "commit"}, {"oid": "d4446f0c100630260a131e0ef440eed7383a3954", "url": "https://github.com/confluentinc/kafka-tutorials/commit/d4446f0c100630260a131e0ef440eed7383a3954", "message": "clean up files", "committedDate": "2020-07-22T20:13:38Z", "type": "commit"}, {"oid": "586019fa3054610fc30fff88e514feca75c9c815", "url": "https://github.com/confluentinc/kafka-tutorials/commit/586019fa3054610fc30fff88e514feca75c9c815", "message": "Fix harness file", "committedDate": "2020-07-22T20:13:38Z", "type": "commit"}, {"oid": "696662f938067aa83d7282da3f3aea843120cacd", "url": "https://github.com/confluentinc/kafka-tutorials/commit/696662f938067aa83d7282da3f3aea843120cacd", "message": "Breakout code to two sections add test for helper classes", "committedDate": "2020-07-22T20:13:38Z", "type": "commit"}, {"oid": "7437f07849a23464de4b2b122dbf8404a0a536ca", "url": "https://github.com/confluentinc/kafka-tutorials/commit/7437f07849a23464de4b2b122dbf8404a0a536ca", "message": "Updates per comments", "committedDate": "2020-07-22T20:13:38Z", "type": "commit"}, {"oid": "7437f07849a23464de4b2b122dbf8404a0a536ca", "url": "https://github.com/confluentinc/kafka-tutorials/commit/7437f07849a23464de4b2b122dbf8404a0a536ca", "message": "Updates per comments", "committedDate": "2020-07-22T20:13:38Z", "type": "forcePushed"}]}