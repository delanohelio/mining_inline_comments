{"pr_number": 1719, "pr_title": "Support to batch poll system tasks", "pr_createdAt": "2020-06-02T23:46:11Z", "pr_url": "https://github.com/Netflix/conductor/pull/1719", "timeline": [{"oid": "d7bf12fc5afaf075675b611d459a7da9a43c8784", "url": "https://github.com/Netflix/conductor/commit/d7bf12fc5afaf075675b611d459a7da9a43c8784", "message": "Add support to poll multiple system tasks", "committedDate": "2020-05-27T00:09:03Z", "type": "commit"}, {"oid": "1b7f70d8e8c2306aa3c4431602e9b103be01b2ff", "url": "https://github.com/Netflix/conductor/commit/1b7f70d8e8c2306aa3c4431602e9b103be01b2ff", "message": "Fix bug in acquiring permits", "committedDate": "2020-05-27T16:33:35Z", "type": "commit"}, {"oid": "f2031577f9d9b52548374f95adad189103d4f86d", "url": "https://github.com/Netflix/conductor/commit/f2031577f9d9b52548374f95adad189103d4f86d", "message": "Fix bug in releasing permit", "committedDate": "2020-05-30T01:25:50Z", "type": "commit"}, {"oid": "71f610012369d65ba7679d192e4aec5e9ec4567c", "url": "https://github.com/Netflix/conductor/commit/71f610012369d65ba7679d192e4aec5e9ec4567c", "message": "Minor refactoring", "committedDate": "2020-06-02T22:07:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA2NDUxOQ==", "url": "https://github.com/Netflix/conductor/pull/1719#discussion_r437064519", "bodyText": "Does this need to be a separate method? This could be rolled into the methods defined above where numSlots=1.", "author": "apanicker-nflx", "createdAt": "2020-06-09T00:00:28Z", "path": "core/src/main/java/com/netflix/conductor/core/utils/SemaphoreUtil.java", "diffHunk": "@@ -62,4 +63,23 @@ public int availableSlots() {\n         LOGGER.debug(\"Number of available permits: {}\", available);\n         return available;\n     }\n+\n+    /**\n+     * Signals if processing is allowed based on whether specified number of permits can be acquired.\n+     *\n+     * @param numSlots the number of permits to acquire\n+     * @return {@code true} - if permit is acquired\n+     * {@code false} - if permit could not be acquired\n+     */\n+    public boolean acquireSlots(int numSlots) {", "originalCommit": "71f610012369d65ba7679d192e4aec5e9ec4567c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk2MTAwNw==", "url": "https://github.com/Netflix/conductor/pull/1719#discussion_r439961007", "bodyText": "Thanks for the suggestion. Using the extended method with numSlots=1 now.", "author": "mdepak", "createdAt": "2020-06-15T06:46:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA2NDUxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA2NDY3Mg==", "url": "https://github.com/Netflix/conductor/pull/1719#discussion_r437064672", "bodyText": "same as above.", "author": "apanicker-nflx", "createdAt": "2020-06-09T00:00:58Z", "path": "core/src/main/java/com/netflix/conductor/core/utils/SemaphoreUtil.java", "diffHunk": "@@ -62,4 +63,23 @@ public int availableSlots() {\n         LOGGER.debug(\"Number of available permits: {}\", available);\n         return available;\n     }\n+\n+    /**\n+     * Signals if processing is allowed based on whether specified number of permits can be acquired.\n+     *\n+     * @param numSlots the number of permits to acquire\n+     * @return {@code true} - if permit is acquired\n+     * {@code false} - if permit could not be acquired\n+     */\n+    public boolean acquireSlots(int numSlots) {\n+        return semaphore.tryAcquire(numSlots);\n+    }\n+\n+    /**\n+     * Signals that processing is complete and the specified number of permits can be released.\n+     */\n+    public void completeProcessing(int numSlots) {", "originalCommit": "71f610012369d65ba7679d192e4aec5e9ec4567c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTk2MTA0OA==", "url": "https://github.com/Netflix/conductor/pull/1719#discussion_r439961048", "bodyText": "Fixed it.", "author": "mdepak", "createdAt": "2020-06-15T06:46:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA2NDY3Mg=="}], "type": "inlineReview"}, {"oid": "6c5c978591b043d08f7387a33e040cbef8ddd662", "url": "https://github.com/Netflix/conductor/commit/6c5c978591b043d08f7387a33e040cbef8ddd662", "message": "Incorporate review comments", "committedDate": "2020-06-15T06:44:16Z", "type": "commit"}]}