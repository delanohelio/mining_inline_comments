{"pr_number": 3226, "pr_title": "Make Armeria server can shutdown before unmanaged tomcat in springboot.", "pr_createdAt": "2020-12-15T11:53:41Z", "pr_url": "https://github.com/line/armeria/pull/3226", "timeline": [{"oid": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "url": "https://github.com/line/armeria/commit/6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "message": "Separate server bean and smartlicecycle wrapping.", "committedDate": "2020-12-15T15:31:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzMzQ5NQ==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544833495", "bodyText": "nit: Wraps {@link Server}", "author": "ikhoon", "createdAt": "2020-12-17T06:01:50Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/AbstractArmeriaAutoConfiguration.java", "diffHunk": "@@ -128,6 +129,14 @@ public Server armeriaServer(\n         return server;\n     }\n \n+    /**\n+     * Wrap server with {@link SmartLifecycle}.", "originalCommit": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzNDc1MQ==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544834751", "bodyText": "nit: final?\nCould move to internal package?", "author": "ikhoon", "createdAt": "2020-12-17T06:05:33Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+\n+/**\n+ * Make Armeria Server utilize spring's SmartLifecycle feature.\n+ * So Armeria will shutdown before other web servers and beans in the context.\n+ */\n+public class ArmeriaServerGracefulShutdownLifecycle implements SmartLifecycle {", "originalCommit": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzNDg0NQ==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544834845", "bodyText": "nit: {@link Server}?", "author": "ikhoon", "createdAt": "2020-12-17T06:05:50Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+\n+/**\n+ * Make Armeria Server utilize spring's SmartLifecycle feature.", "originalCommit": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzNTQzMg==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544835432", "bodyText": "This method looks like dead code. Could be removed?", "author": "ikhoon", "createdAt": "2020-12-17T06:07:26Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+\n+/**\n+ * Make Armeria Server utilize spring's SmartLifecycle feature.\n+ * So Armeria will shutdown before other web servers and beans in the context.\n+ */\n+public class ArmeriaServerGracefulShutdownLifecycle implements SmartLifecycle {\n+    /**\n+     * {@link Server} created by {@link ArmeriaAutoConfiguration}. .\n+     */\n+    private final Server server;\n+\n+    /**\n+     * Creates a new instance.\n+     */\n+    public ArmeriaServerGracefulShutdownLifecycle(Server server) {\n+        this.server = server;\n+    }\n+\n+    /**\n+     * Return the created {@link Server}.\n+     */\n+    public Server getServer() {", "originalCommit": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzNzcxMQ==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544837711", "bodyText": "This is not called frequently. JFYI, (AFAIK) the performance of whenComplete() in Java8 is poorer than handle().", "author": "ikhoon", "createdAt": "2020-12-17T06:14:06Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+\n+/**\n+ * Make Armeria Server utilize spring's SmartLifecycle feature.\n+ * So Armeria will shutdown before other web servers and beans in the context.\n+ */\n+public class ArmeriaServerGracefulShutdownLifecycle implements SmartLifecycle {\n+    /**\n+     * {@link Server} created by {@link ArmeriaAutoConfiguration}. .\n+     */\n+    private final Server server;\n+\n+    /**\n+     * Creates a new instance.\n+     */\n+    public ArmeriaServerGracefulShutdownLifecycle(Server server) {\n+        this.server = server;\n+    }\n+\n+    /**\n+     * Return the created {@link Server}.\n+     */\n+    public Server getServer() {\n+        return server;\n+    }\n+\n+    /**\n+     * Start this component.\n+     * Currently AbstractArmeriaAutoConfiguration help starting the server.\n+     */\n+    @Override\n+    public void start() {\n+    }\n+\n+    /**\n+     * Stop this component. This class implements {@link SmartLifecycle}, so don't need to support sync stop.\n+     */\n+    @Override\n+    public void stop() {\n+        throw new UnsupportedOperationException(\"Stop must not be invoked directly\");\n+    }\n+\n+    /**\n+     * Stop this component.\n+     */\n+    @Override\n+    public void stop(Runnable callback) {\n+        server.stop().whenComplete((unused, throwable) -> callback.run());", "originalCommit": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDg3NDMwOQ==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544874309", "bodyText": "I see, due to not frequently, maybe let me keep whenComplete for just calling callback without returning/rethrow.", "author": "kojilin", "createdAt": "2020-12-17T07:43:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzNzcxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzODM4OA==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544838388", "bodyText": "Returns?", "author": "ikhoon", "createdAt": "2020-12-17T06:15:46Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+\n+/**\n+ * Make Armeria Server utilize spring's SmartLifecycle feature.\n+ * So Armeria will shutdown before other web servers and beans in the context.\n+ */\n+public class ArmeriaServerGracefulShutdownLifecycle implements SmartLifecycle {\n+    /**\n+     * {@link Server} created by {@link ArmeriaAutoConfiguration}. .\n+     */\n+    private final Server server;\n+\n+    /**\n+     * Creates a new instance.\n+     */\n+    public ArmeriaServerGracefulShutdownLifecycle(Server server) {\n+        this.server = server;\n+    }\n+\n+    /**\n+     * Return the created {@link Server}.\n+     */\n+    public Server getServer() {\n+        return server;\n+    }\n+\n+    /**\n+     * Start this component.\n+     * Currently AbstractArmeriaAutoConfiguration help starting the server.\n+     */\n+    @Override\n+    public void start() {\n+    }\n+\n+    /**\n+     * Stop this component. This class implements {@link SmartLifecycle}, so don't need to support sync stop.\n+     */\n+    @Override\n+    public void stop() {\n+        throw new UnsupportedOperationException(\"Stop must not be invoked directly\");\n+    }\n+\n+    /**\n+     * Stop this component.\n+     */\n+    @Override\n+    public void stop(Runnable callback) {\n+        server.stop().whenComplete((unused, throwable) -> callback.run());\n+    }\n+\n+    /**\n+     * Return the phase that this lifecycle object is supposed to run in.", "originalCommit": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA1NjcyMg==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544056722", "bodyText": "missing final?\nShouldn't we move this class to the internal package because a user does not use this class?", "author": "minwoox", "createdAt": "2020-12-16T07:08:46Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+\n+/**\n+ * Make Armeria Server utilize spring's SmartLifecycle feature.\n+ * So Armeria will shutdown before other web servers and beans in the context.\n+ */\n+public class ArmeriaServerGracefulShutdownLifecycle implements SmartLifecycle {", "originalCommit": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA1Njg5Mw==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544056893", "bodyText": "Could remove this?", "author": "minwoox", "createdAt": "2020-12-16T07:08:58Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+\n+/**\n+ * Make Armeria Server utilize spring's SmartLifecycle feature.\n+ * So Armeria will shutdown before other web servers and beans in the context.\n+ */\n+public class ArmeriaServerGracefulShutdownLifecycle implements SmartLifecycle {\n+    /**\n+     * {@link Server} created by {@link ArmeriaAutoConfiguration}. .\n+     */\n+    private final Server server;\n+\n+    /**\n+     * Creates a new instance.\n+     */\n+    public ArmeriaServerGracefulShutdownLifecycle(Server server) {\n+        this.server = server;\n+    }\n+\n+    /**\n+     * Return the created {@link Server}.\n+     */\n+    public Server getServer() {", "originalCommit": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544065495", "bodyText": "question: Should we put the logic for building a server in AbstractArmeriaAutoConfiguration.armeriaServer() {...} in this method?", "author": "minwoox", "createdAt": "2020-12-16T07:18:57Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+\n+/**\n+ * Make Armeria Server utilize spring's SmartLifecycle feature.\n+ * So Armeria will shutdown before other web servers and beans in the context.\n+ */\n+public class ArmeriaServerGracefulShutdownLifecycle implements SmartLifecycle {\n+    /**\n+     * {@link Server} created by {@link ArmeriaAutoConfiguration}. .\n+     */\n+    private final Server server;\n+\n+    /**\n+     * Creates a new instance.\n+     */\n+    public ArmeriaServerGracefulShutdownLifecycle(Server server) {\n+        this.server = server;\n+    }\n+\n+    /**\n+     * Return the created {@link Server}.\n+     */\n+    public Server getServer() {\n+        return server;\n+    }\n+\n+    /**\n+     * Start this component.\n+     * Currently AbstractArmeriaAutoConfiguration help starting the server.\n+     */\n+    @Override\n+    public void start() {", "originalCommit": "6d18186cd3a25e7746c6f85bf8d52ca73841c57c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDg4MjExOA==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544882118", "bodyText": "I think you mean to start the server part. Both are ok for me.  Make isAutoStartup return true & put Server#start here or  Make isAutoStartup return false & leave this empty.", "author": "kojilin", "createdAt": "2020-12-17T07:58:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDkwNjEyMA==", "url": "https://github.com/line/armeria/pull/3226#discussion_r544906120", "bodyText": "Because the server is stopped from the stop() method in this class, I think it's good to have the start logic in start() method to make it symmetrical. \ud83e\udd14", "author": "minwoox", "createdAt": "2020-12-17T08:39:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTA0ODgyNw==", "url": "https://github.com/line/armeria/pull/3226#discussion_r545048827", "bodyText": "The test failure reminds maybe we should not change the behavior? Like some places where need to inject Server may think it's already started.  Do we have this concern?\nThe current failure is Server -> AbstractArmeriaBeanPostProcessor -> Then start. So maybe it's not possible to let Server#start at SmartLifeCycle start phase.", "author": "kojilin", "createdAt": "2020-12-17T12:22:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY0MjgzMw==", "url": "https://github.com/line/armeria/pull/3226#discussion_r545642833", "bodyText": "I don't have any idea how to make it work at the moment. \ud83d\ude05 So I guess it's fine as it is. I might try later to figure that out.", "author": "minwoox", "createdAt": "2020-12-18T08:22:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIwNzA1Mg==", "url": "https://github.com/line/armeria/pull/3226#discussion_r546207052", "bodyText": "In the current structure, SmartLifeCycle is handled after bean injection by Spring. I also want this to be, but I don't come up with a clear idea. \ud83d\ude2d", "author": "heowc", "createdAt": "2020-12-19T07:45:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTEyMDM4MA==", "url": "https://github.com/line/armeria/pull/3226#discussion_r549120380", "bodyText": "I made another PR(#3245).\nI think we can fix this by modifying this. There was some misunderstanding when I added this feature. \ud83d\ude05", "author": "heowc", "createdAt": "2020-12-27T14:33:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTE4NDk5NA==", "url": "https://github.com/line/armeria/pull/3226#discussion_r549184994", "bodyText": "Maybe the problem is AbstractArmeriaBeanPostProcessor provides a port after the server start. So even we fix the test, still we can't inject/create all the beans which need port before the server starts?\nOr we can change the AbstractArmeriaBeanPostProcessor inject ports from config but not server's activePorts?", "author": "kojilin", "createdAt": "2020-12-28T01:12:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTIwMTE3NQ==", "url": "https://github.com/line/armeria/pull/3226#discussion_r549201175", "bodyText": "Hmmm... I think we don't have to provide this.\nSpring's @LocalServerPort also throws an exception when injected into the bean. WDYT?\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @Configuration\n    static class Config {\n\n        @LocalServerPort\n        private Integer port;\n\n        public Integer port() {\n            return port;\n        }\n    }\n}\njava.lang.IllegalStateException: Failed to load ApplicationContext\n\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123)\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98)\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341)\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346)\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:313)\n\tat java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:743)\n\tat java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:742)\n\tat java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:647)\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340)\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263)\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256)\n\tat java.util.Optional.orElseGet(Optional.java:267)\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255)\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29)\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108)\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107)\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springTempApplication.Config': Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'local.server.port' in value \"${local.server.port}\"\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:405)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1422)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:895)\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:878)\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\n\t... 64 more\nCaused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'local.server.port' in value \"${local.server.port}\"\n\tat org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:178)\n\tat org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:124)\n\tat org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:236)\n\tat org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:210)\n\tat org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:175)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:912)\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1247)\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1226)\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:130)\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)", "author": "heowc", "createdAt": "2020-12-28T03:19:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTIyMDc3Ng==", "url": "https://github.com/line/armeria/pull/3226#discussion_r549220776", "bodyText": "Does it mean we don't need to support the production environment(@LocalServerPort and @LocalArmeriaPort is for testing)?\nBut if test code using the AbstractArmeriaAutoConfiguration, it means we can't inject still. e.g. LocalArmeriaPortHttpsTest.", "author": "kojilin", "createdAt": "2020-12-28T05:33:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTI0OTMwMg==", "url": "https://github.com/line/armeria/pull/3226#discussion_r549249302", "bodyText": "Does it mean we don't need to support the production environment(@LocalServerPort and @LocalArmeriaPort is for testing)?\n\nYes, that's right.\nFrom what I've been looking for, the injection way is slightly different.\nCreating a bean and injecting an object occurs in the process of refreshing the context.\nInjecting the object in the test is injected by the DependencyInjectionTestExecutionListener after the context is created. I don't think this is a problem because the webserver is running and injected.\nIf we want to do this, we need to modify the ArmeriaServerGracefulShutdownLifecycle a bit.", "author": "heowc", "createdAt": "2020-12-28T07:51:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTI1OTE0OA==", "url": "https://github.com/line/armeria/pull/3226#discussion_r549259148", "bodyText": "I simply changed the code. \ud83e\udd14", "author": "heowc", "createdAt": "2020-12-28T08:27:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDA2NTQ5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY0MjI5MA==", "url": "https://github.com/line/armeria/pull/3226#discussion_r545642290", "bodyText": "I realized that we could just move this class to com.linecorp.armeria.spring package and make it package-private. \ud83d\ude05  Sorry about it.", "author": "minwoox", "createdAt": "2020-12-18T08:21:44Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/internal/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,92 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.internal.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+import com.linecorp.armeria.spring.ArmeriaAutoConfiguration;\n+\n+/**\n+ * Make Armeria {@link Server} utilize spring's SmartLifecycle feature.\n+ * So Armeria will shutdown before other web servers and beans in the context.\n+ */\n+public final class ArmeriaServerGracefulShutdownLifecycle implements SmartLifecycle {", "originalCommit": "24a0719fa100da3f6d773131be5c8ede020be2e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcxNjE3NQ==", "url": "https://github.com/line/armeria/pull/3226#discussion_r545716175", "bodyText": "I think this should be SmartLifecycle. \ud83e\udd14", "author": "minwoox", "createdAt": "2020-12-18T09:42:58Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/AbstractArmeriaAutoConfiguration.java", "diffHunk": "@@ -134,7 +133,7 @@ public Server armeriaServer(\n      * Wrap {@link Server} with {@link SmartLifecycle}.\n      */\n     @Bean\n-    public SmartLifecycle armeriaServerGracefulShutdownLifecycle(Server server) {\n+    public ArmeriaServerGracefulShutdownLifecycle armeriaServerGracefulShutdownLifecycle(Server server) {", "originalCommit": "2ef898d9310fd27836ec98057045fb17e2a46e0d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f60bfdf14bacb72eceed8b26e4b4dee5bbc5fe83", "url": "https://github.com/line/armeria/commit/f60bfdf14bacb72eceed8b26e4b4dee5bbc5fe83", "message": "Make Armeria Server created from ArmeriaAutoConfiguration start/shutdown", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "27aeb1f2ab82cc051b27c8af112ca3623aa96ede", "url": "https://github.com/line/armeria/commit/27aeb1f2ab82cc051b27c8af112ca3623aa96ede", "message": "Separate server bean and smartlicecycle wrapping.", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "69bd8058c17a261f317c412564a72647525a5fb9", "url": "https://github.com/line/armeria/commit/69bd8058c17a261f317c412564a72647525a5fb9", "message": "Follow the suggestion.", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "59d9457297c54483ba0554d6d5ddf0db78a3e2d0", "url": "https://github.com/line/armeria/commit/59d9457297c54483ba0554d6d5ddf0db78a3e2d0", "message": "Move back to public api.", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "3b8a43180b2fa293799549d25c3d964843a717aa", "url": "https://github.com/line/armeria/commit/3b8a43180b2fa293799549d25c3d964843a717aa", "message": "Follow the comments.", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "a98e1276a4edbeac839ae0e1c32459d7593e7d17", "url": "https://github.com/line/armeria/commit/a98e1276a4edbeac839ae0e1c32459d7593e7d17", "message": "Revert \"Follow the comments.\"\n\nThis reverts commit 5dd31686", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "54da55af1cf13052d3507d8462f063698edd1ac4", "url": "https://github.com/line/armeria/commit/54da55af1cf13052d3507d8462f063698edd1ac4", "message": "Move to internal", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "bf2315eecf39ceb07bd73c6508768b9cd29fe2d1", "url": "https://github.com/line/armeria/commit/bf2315eecf39ceb07bd73c6508768b9cd29fe2d1", "message": "Move to internal", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "b1de46e7f869527cabfcda1e86d0b852a7f035f1", "url": "https://github.com/line/armeria/commit/b1de46e7f869527cabfcda1e86d0b852a7f035f1", "message": "Follow the comment.\n\nUsing package private.", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "fd6a966a84652fa95da226d515ac1a6273b2d5a9", "url": "https://github.com/line/armeria/commit/fd6a966a84652fa95da226d515ac1a6273b2d5a9", "message": "Using interface instead of concrete class.", "committedDate": "2020-12-18T13:42:31Z", "type": "commit"}, {"oid": "fd6a966a84652fa95da226d515ac1a6273b2d5a9", "url": "https://github.com/line/armeria/commit/fd6a966a84652fa95da226d515ac1a6273b2d5a9", "message": "Using interface instead of concrete class.", "committedDate": "2020-12-18T13:42:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM4NzU1MA==", "url": "https://github.com/line/armeria/pull/3226#discussion_r548387550", "bodyText": "Let's remove all Javadocs for the field and methods because it's a package-private class now. \ud83d\ude04", "author": "minwoox", "createdAt": "2020-12-24T05:24:48Z", "path": "spring/boot2-autoconfigure/src/main/java/com/linecorp/armeria/spring/ArmeriaServerGracefulShutdownLifecycle.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.spring;\n+\n+import org.springframework.context.SmartLifecycle;\n+\n+import com.linecorp.armeria.server.Server;\n+\n+/**\n+ * Make Armeria {@link Server} utilize spring's SmartLifecycle feature.\n+ * So Armeria will shutdown before other web servers and beans in the context.\n+ */\n+final class ArmeriaServerGracefulShutdownLifecycle implements SmartLifecycle {\n+    /**\n+     * {@link Server} created by {@link ArmeriaAutoConfiguration}. .\n+     */", "originalCommit": "fd6a966a84652fa95da226d515ac1a6273b2d5a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQzMzMzOQ==", "url": "https://github.com/line/armeria/pull/3226#discussion_r548433339", "bodyText": "I find the class Javadoc, stop(), start(), getPhase() and isAutoStartup() useful, so maybe better removing only what's already specified in SmartLifecycle.", "author": "trustin", "createdAt": "2020-12-24T07:45:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM4NzU1MA=="}], "type": "inlineReview"}, {"oid": "2bd38b9c8e354608a63e67caa0236b70eb0f0a61", "url": "https://github.com/line/armeria/commit/2bd38b9c8e354608a63e67caa0236b70eb0f0a61", "message": "Update javadoc.", "committedDate": "2020-12-24T09:15:41Z", "type": "commit"}]}