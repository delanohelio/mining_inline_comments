{"pr_number": 2543, "pr_title": "Remove, hide or unstablize deprecated API", "pr_createdAt": "2020-02-28T10:14:42Z", "pr_url": "https://github.com/line/armeria/pull/2543", "timeline": [{"oid": "95d854305af873d0c7014f0d692a798394c103d8", "url": "https://github.com/line/armeria/commit/95d854305af873d0c7014f0d692a798394c103d8", "message": "Remove, hide or unstablize deprecated API\n\n- Removed all deprecated API if possible.\n- Hid all deprecated API if possible.\n- Made some previously deprecated API unstable:\n  - `DefaultHttpRequest` and `DefaultHttpResponse`\n    - Cannot be instantiated directly now. Only useful for subclasses.\n- Renamed `DefaultRpcResponse` to `CompletableRpcResponse` and left only\n  the default constructor.\n- Removed `http` from `RequestContextExporter` and its related classes,\n  e.g. `httpRequestHeaders` -> `requestHeaders`\n- Fixed bugs where `RequestContextAware{Future,Promise,ProgressivePromise}`\n  does not return itself but its delegate.\n  - `removeListener(s)` now throws `UnsupportedOperationException`,\n    because there's no way to remove the wrapped listener by reference.\n- Moved `RequestContext.makeContextAware(GenericFutureListener)` to\n  `RequestContextAwareFutureListener` and `RequestContextAwareProgressiveFutureListener`.", "committedDate": "2020-02-28T10:14:15Z", "type": "commit"}, {"oid": "12d6466d066157b16ab522388760156ed0f4fc55", "url": "https://github.com/line/armeria/commit/12d6466d066157b16ab522388760156ed0f4fc55", "message": "Move `DefaultHttp{Request,Response}` to `internal.common`", "committedDate": "2020-02-28T10:28:36Z", "type": "commit"}, {"oid": "cc09bc128f7f5b728dbfd6b18e36e0f88b43a101", "url": "https://github.com/line/armeria/commit/cc09bc128f7f5b728dbfd6b18e36e0f88b43a101", "message": "Fix Javadoc", "committedDate": "2020-02-28T10:39:08Z", "type": "commit"}, {"oid": "44e24ad48085654bbdac9a974ffe9e7b6d5191da", "url": "https://github.com/line/armeria/commit/44e24ad48085654bbdac9a974ffe9e7b6d5191da", "message": "Add `UnstableApi` annotation to inner classes", "committedDate": "2020-02-28T10:48:38Z", "type": "commit"}, {"oid": "65316abac0860a5a7d887e95da35df639641a0d8", "url": "https://github.com/line/armeria/commit/65316abac0860a5a7d887e95da35df639641a0d8", "message": "Merge branch 'master' into zap_deprecated_methods", "committedDate": "2020-02-28T12:09:37Z", "type": "commit"}, {"oid": "86c732f3e84f4eb930fcefdc1d2830a6b6822de4", "url": "https://github.com/line/armeria/commit/86c732f3e84f4eb930fcefdc1d2830a6b6822de4", "message": "Fix assertion", "committedDate": "2020-02-28T12:27:42Z", "type": "commit"}, {"oid": "f1d089bf0dd6a7da6994a94c316a67a6f81f2375", "url": "https://github.com/line/armeria/commit/f1d089bf0dd6a7da6994a94c316a67a6f81f2375", "message": "Remove `http` from `RequestContextExporter` et al", "committedDate": "2020-02-28T12:39:58Z", "type": "commit"}, {"oid": "e84431a7f4b3ad97d835f93804e69bb395765f42", "url": "https://github.com/line/armeria/commit/e84431a7f4b3ad97d835f93804e69bb395765f42", "message": "Fix a bug where `RequestContextExporter.attributes()` throws an exception.", "committedDate": "2020-02-28T12:50:16Z", "type": "commit"}, {"oid": "c4d5ddfbc981e48a86602f1a120f33e46ceb643c", "url": "https://github.com/line/armeria/commit/c4d5ddfbc981e48a86602f1a120f33e46ceb643c", "message": "Checkstyle", "committedDate": "2020-02-28T12:53:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY4MDA3MQ==", "url": "https://github.com/line/armeria/pull/2543#discussion_r385680071", "bodyText": "\ud83d\udc4d", "author": "ikhoon", "createdAt": "2020-02-28T12:55:26Z", "path": "core/src/main/java/com/linecorp/armeria/common/logging/RequestContextExporterBuilder.java", "diffHunk": "@@ -316,7 +221,7 @@ public RequestContextExporterBuilder addKeyPattern(String keyPattern) {\n         }\n \n         if (exportKey == null) {\n-            exportKey = components[0].substring(PREFIX_ATTRS.length());\n+            exportKey = components[0];", "originalCommit": "c4d5ddfbc981e48a86602f1a120f33e46ceb643c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5fa5217ea6bd5a7c0ec1947e2bf81bd4cbf58db9", "url": "https://github.com/line/armeria/commit/5fa5217ea6bd5a7c0ec1947e2bf81bd4cbf58db9", "message": "Checkstyle", "committedDate": "2020-02-28T12:55:52Z", "type": "commit"}]}