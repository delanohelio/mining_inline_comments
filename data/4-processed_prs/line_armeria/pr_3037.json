{"pr_number": 3037, "pr_title": "Add `RequiredDependencies` component", "pr_createdAt": "2020-08-31T04:38:22Z", "pr_url": "https://github.com/line/armeria/pull/3037", "timeline": [{"oid": "878125e416103748e260843569198c85054a3d92", "url": "https://github.com/line/armeria/commit/878125e416103748e260843569198c85054a3d92", "message": "Add `RequiredDependencies` component\nMotivation:\nIt's cumbersome to add the same dependencies for Gradle and Maven respectively, in the documentation.\nIf we add a React component which shows the dependencies for Gradle and Maven by just defining the dependencies,\nit would be a lot easier.\n\nModifications:\n- Add `RequriedDependencies` React component.\n- Add required dependencies in the documentation\n  - I didn't add one for gRPC and Thrift because\n    - we have a link to the example which shows the build script.\n    - there are a lot of more stuffs to add except the dependencies so I want to users rather find the example and use it.\n\nResult:\n- Close #3027", "committedDate": "2020-08-31T04:37:35Z", "type": "commit"}, {"oid": "986c8c43049a53f20fd21f7c6e7300a04e291fdd", "url": "https://github.com/line/armeria/commit/986c8c43049a53f20fd21f7c6e7300a04e291fdd", "message": "Address the comment by @ikhoon", "committedDate": "2020-08-31T07:23:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkyOTk2OA==", "url": "https://github.com/line/armeria/pull/3037#discussion_r479929968", "bodyText": "? \ud83d\ude09\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  return `    implementation platform('${bom.groupId}:${bom.artifactId}:${versions[key]}')`;\n          \n          \n            \n                  return `    implementation platform('${key}:${versions[key]}')`;", "author": "ikhoon", "createdAt": "2020-08-31T06:50:11Z", "path": "site/src/components/required-dependencies.tsx", "diffHunk": "@@ -0,0 +1,96 @@\n+import React from 'react';\n+import { Tabs as AntdTabs } from 'antd';\n+import CodeBlock from './code-block';\n+import versionsJson from '../../gen-src/versions.json';\n+\n+const versions: any = versionsJson;\n+\n+interface Dependency {\n+  groupId: string;\n+  artifactId: string;\n+}\n+\n+interface RequiredDependenciesProps {\n+  boms?: Dependency[];\n+  dependencies: Dependency[];\n+}\n+\n+function groovyBom(boms: Dependency[]) {\n+  return `${boms\n+    .map((bom) => {\n+      const key = `${bom.groupId}:${bom.artifactId}`;\n+      return `    implementation platform('${bom.groupId}:${bom.artifactId}:${versions[key]}')`;", "originalCommit": "878125e416103748e260843569198c85054a3d92", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkzODgxMA==", "url": "https://github.com/line/armeria/pull/3037#discussion_r479938810", "bodyText": "Could use key name without quote\"?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              boms={[{\"groupId\":\"com.linecorp.armeria\", \"artifactId\":\"armeria-bom\"},\n          \n          \n            \n              boms={[{groupId:\"com.linecorp.armeria\", artifactId:\"armeria-bom\"},", "author": "ikhoon", "createdAt": "2020-08-31T07:10:54Z", "path": "site/src/pages/docs/advanced-dropwizard-integration.mdx", "diffHunk": "@@ -24,47 +24,10 @@ application integrates with Armeria, you can leverage the following:\n Armeria can be plugged in as the underlying HTTP server for a Dropwizard application by adding\n the following dependency:\n \n-<Tabs>\n-  <TabPane tab=\"Gradle\" key=\"gradle\">\n-    <CodeBlock language=\"groovy\" filename=\"build.gradle\">{`\n-      dependencyManagement {\n-          imports {\n-              mavenBom 'com.linecorp.armeria:armeria-bom:${versions['com.linecorp.armeria:armeria-bom']}'\n-              mavenBom 'io.dropwizard:dropwizard-bom:${versions['io.dropwizard:dropwizard-core']}'\n-          }\n-      }\\n\n-      dependencies {\n-          implementation 'com.linecorp.armeria:armeria-dropwizard2'\n-      }\n-    `}</CodeBlock>\n-  </TabPane>\n-  <TabPane tab=\"Maven\" key=\"maven\">\n-    <CodeBlock language=\"xml\" filename=\"pom.xml\">{`\n-      <dependencyManagement>\n-        <dependencies>\n-          <dependency>\n-            <groupId>com.linecorp.armeria</groupId>\n-            <artifactId>armeria-bom</artifactId>\n-            <version>${versions['com.linecorp.armeria:armeria-bom']}</version>\n-            <type>pom</type>\n-            <scope>import</scope>\n-          </dependency>\n-          <dependency>\n-            <groupId>io.dropwizard</groupId>\n-            <artifactId>dropwizard-bom</artifactId>\n-            <version>${versions['io.dropwizard:dropwizard-core']}</version>\n-            <type>pom</type>\n-            <scope>import</scope>\n-          </dependency>\n-        </dependencies>\n-      </dependencyManagement>\\n\n-      <dependency>\n-          <groupId>com.linecorp.armeria</groupId>\n-          <artifactId>armeria-dropwizard2</artifactId>\n-      </dependency>\n-    `}</CodeBlock>\n-  </TabPane>\n-</Tabs>\n+<RequiredDependencies\n+  boms={[{\"groupId\":\"com.linecorp.armeria\", \"artifactId\":\"armeria-bom\"},", "originalCommit": "878125e416103748e260843569198c85054a3d92", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk0MjEzNA==", "url": "https://github.com/line/armeria/pull/3037#discussion_r479942134", "bodyText": "\ud83d\udc4d", "author": "ikhoon", "createdAt": "2020-08-31T07:18:38Z", "path": "site/src/pages/docs/server-thrift.mdx", "diffHunk": "@@ -1,5 +1,11 @@\n # Running a Thrift service\n \n+<Tip>\n+\n+Visit [armeria-examples](https://github.com/line/armeria-examples) to find a fully working example.", "originalCommit": "878125e416103748e260843569198c85054a3d92", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk0MjcyMQ==", "url": "https://github.com/line/armeria/pull/3037#discussion_r479942721", "bodyText": "nit: suspending function?\nhttps://kotlinlang.org/docs/reference/coroutines/composing-suspending-functions.html", "author": "ikhoon", "createdAt": "2020-08-31T07:20:00Z", "path": "site/src/pages/docs/server-annotated-service.mdx", "diffHunk": "@@ -1432,14 +1432,13 @@ for more information about RPC and HTTP service names, and how to use it.\n ## Kotlin coroutines support\n \n You can implement annotated services with [Kotlin coroutines](https://kotlinlang.org/docs/reference/coroutines-overview.html)\n-by adding the following dependencies.\n+by adding the following dependency:\n \n-```groovy\n-dependencies {\n-    implementation 'com.linecorp.armeria:armeria'\n-    implementation 'com.linecorp.armeria:armeria-kotlin'\n-}\n-```\n+<RequiredDependencies\n+   boms={[{\"groupId\":\"com.linecorp.armeria\", \"artifactId\":\"armeria-bom\"}]}\n+   dependencies={[{\"groupId\":\"com.linecorp.armeria\", \"artifactId\":\"armeria-kotlin\"}]} />\n+\n+Then, define the suspend function:", "originalCommit": "878125e416103748e260843569198c85054a3d92", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "195548db3b7e1166bdb32e90a7196258c8caff2c", "url": "https://github.com/line/armeria/commit/195548db3b7e1166bdb32e90a7196258c8caff2c", "message": "Address comments by @ikhoon", "committedDate": "2020-08-31T07:58:22Z", "type": "commit"}, {"oid": "e57e9ad2bb8eb71913f3188cce8d16e9e4b14bde", "url": "https://github.com/line/armeria/commit/e57e9ad2bb8eb71913f3188cce8d16e9e4b14bde", "message": "Remove unused imports", "committedDate": "2020-08-31T12:04:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIyMjQzOA==", "url": "https://github.com/line/armeria/pull/3037#discussion_r484222438", "bodyText": "groovy -> gradle", "author": "trustin", "createdAt": "2020-09-07T07:05:36Z", "path": "site/src/components/required-dependencies.tsx", "diffHunk": "@@ -0,0 +1,109 @@\n+import React from 'react';\n+import { Tabs as AntdTabs } from 'antd';\n+import CodeBlock from './code-block';\n+import versionsJson from '../../gen-src/versions.json';\n+\n+const versions: any = versionsJson;\n+\n+interface Dependency {\n+  groupId: string;\n+  artifactId: string;\n+  version?: string;\n+}\n+\n+interface RequiredDependenciesProps {\n+  boms?: Dependency[];\n+  dependencies: Dependency[];\n+}\n+\n+function groovyBom(boms: Dependency[]) {", "originalCommit": "e57e9ad2bb8eb71913f3188cce8d16e9e4b14bde", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIyMjk3Mw==", "url": "https://github.com/line/armeria/pull/3037#discussion_r484222973", "bodyText": "Global comment: Perhaps better formatting like eslint would?", "author": "trustin", "createdAt": "2020-09-07T07:06:57Z", "path": "site/src/pages/docs/advanced-dropwizard-integration.mdx", "diffHunk": "@@ -24,47 +24,10 @@ application integrates with Armeria, you can leverage the following:\n Armeria can be plugged in as the underlying HTTP server for a Dropwizard application by adding\n the following dependency:\n \n-<Tabs>\n-  <TabPane tab=\"Gradle\" key=\"gradle\">\n-    <CodeBlock language=\"groovy\" filename=\"build.gradle\">{`\n-      dependencyManagement {\n-          imports {\n-              mavenBom 'com.linecorp.armeria:armeria-bom:${versions['com.linecorp.armeria:armeria-bom']}'\n-              mavenBom 'io.dropwizard:dropwizard-bom:${versions['io.dropwizard:dropwizard-core']}'\n-          }\n-      }\\n\n-      dependencies {\n-          implementation 'com.linecorp.armeria:armeria-dropwizard2'\n-      }\n-    `}</CodeBlock>\n-  </TabPane>\n-  <TabPane tab=\"Maven\" key=\"maven\">\n-    <CodeBlock language=\"xml\" filename=\"pom.xml\">{`\n-      <dependencyManagement>\n-        <dependencies>\n-          <dependency>\n-            <groupId>com.linecorp.armeria</groupId>\n-            <artifactId>armeria-bom</artifactId>\n-            <version>${versions['com.linecorp.armeria:armeria-bom']}</version>\n-            <type>pom</type>\n-            <scope>import</scope>\n-          </dependency>\n-          <dependency>\n-            <groupId>io.dropwizard</groupId>\n-            <artifactId>dropwizard-bom</artifactId>\n-            <version>${versions['io.dropwizard:dropwizard-core']}</version>\n-            <type>pom</type>\n-            <scope>import</scope>\n-          </dependency>\n-        </dependencies>\n-      </dependencyManagement>\\n\n-      <dependency>\n-          <groupId>com.linecorp.armeria</groupId>\n-          <artifactId>armeria-dropwizard2</artifactId>\n-      </dependency>\n-    `}</CodeBlock>\n-  </TabPane>\n-</Tabs>\n+<RequiredDependencies\n+  boms={[{groupId:\"com.linecorp.armeria\", artifactId:\"armeria-bom\"},\n+         {groupId:\"io.dropwizard\", artifactId:\"dropwizard-bom\", version:`${versions['io.dropwizard:dropwizard-core']}`}]}\n+  dependencies={[{groupId:\"com.linecorp.armeria\", artifactId:\"armeria-dropwizard2\"}]} />", "originalCommit": "e57e9ad2bb8eb71913f3188cce8d16e9e4b14bde", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYxOTk4Ng==", "url": "https://github.com/line/armeria/pull/3037#discussion_r487619986", "bodyText": "All fixed. PTAL. \ud83d\ude04", "author": "minwoox", "createdAt": "2020-09-14T02:28:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIyMjk3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIyMzE3MQ==", "url": "https://github.com/line/armeria/pull/3037#discussion_r484223171", "bodyText": "The above configuration defines ?", "author": "trustin", "createdAt": "2020-09-07T07:07:23Z", "path": "site/src/pages/docs/advanced-logging.mdx", "diffHunk": "@@ -41,7 +47,7 @@ For example, the following configuration:\n </configuration>\n ```\n \n-will define an appender called `RCEA` which exports the following:\n+The configuration defines an appender called `RCEA` which exports the following:", "originalCommit": "e57e9ad2bb8eb71913f3188cce8d16e9e4b14bde", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f34c17b8054d41b0defe892f5e71ca44f80bf523", "url": "https://github.com/line/armeria/commit/f34c17b8054d41b0defe892f5e71ca44f80bf523", "message": "Address comments by @trustin", "committedDate": "2020-09-14T02:12:06Z", "type": "commit"}, {"oid": "e10d0b221efa0394eb43c221342021bd943bfc40", "url": "https://github.com/line/armeria/commit/e10d0b221efa0394eb43c221342021bd943bfc40", "message": "Merge branch 'master' into requiredDependencies", "committedDate": "2020-09-14T02:12:21Z", "type": "commit"}, {"oid": "c66c39134b86f9b23f4b1a35956d64b35687a98b", "url": "https://github.com/line/armeria/commit/c66c39134b86f9b23f4b1a35956d64b35687a98b", "message": "Add dependencies for zookeeper and eureka", "committedDate": "2020-09-14T02:27:32Z", "type": "commit"}, {"oid": "fb2f78a38ec8181ca7c122ddd37c1f96b5ae1ae7", "url": "https://github.com/line/armeria/commit/fb2f78a38ec8181ca7c122ddd37c1f96b5ae1ae7", "message": "Fix lint", "committedDate": "2020-09-14T06:27:23Z", "type": "commit"}]}