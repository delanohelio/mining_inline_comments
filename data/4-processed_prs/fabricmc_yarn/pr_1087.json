{"pr_number": 1087, "pr_title": "Biome internal mappings (not new biome types)", "pr_createdAt": "2020-02-05T18:34:55Z", "pr_url": "https://github.com/FabricMC/yarn/pull/1087", "timeline": [{"oid": "99e9af3a284236e6b1a3a07293bfbe20d8f32468", "url": "https://github.com/FabricMC/yarn/commit/99e9af3a284236e6b1a3a07293bfbe20d8f32468", "message": "Biome internal mappings (not new biome types)\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2020-02-05T18:33:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0MjE1OQ==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375442159", "bodyText": "Whats so special? Why not BiomeEffects?", "author": "modmuss50", "createdAt": "2020-02-05T18:51:38Z", "path": "mappings/net/minecraft/world/biome/BiomeSpecialEffects.mapping", "diffHunk": "@@ -0,0 +1,28 @@\n+CLASS net/minecraft/class_4763 net/minecraft/world/biome/BiomeSpecialEffects", "originalCommit": "99e9af3a284236e6b1a3a07293bfbe20d8f32468", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ2MzU4Ng==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375463586", "bodyText": "moj call them special effects. yep should just use effects, will fix", "author": "liach", "createdAt": "2020-02-05T19:32:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0MjE1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYzNzQyNw==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375637427", "bodyText": "well they're specifically visual effects, which are often called special effects.", "author": "Prospector", "createdAt": "2020-02-06T04:39:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0MjE1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTk5MzY5Mw==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375993693", "bodyText": "I will just go with effects. Don't think fog color or water color is that \"special\".", "author": "liach", "createdAt": "2020-02-06T18:01:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0MjE1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0NTAzNA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375445034", "bodyText": "getSquaredDistance", "author": "Earthcomputer", "createdAt": "2020-02-05T18:57:18Z", "path": "mappings/net/minecraft/world/biome/Biome.mapping", "diffHunk": "@@ -154,3 +166,9 @@ CLASS net/minecraft/class_1959 net/minecraft/world/biome/Biome\n \t\t\tARG 2 weight\n \t\t\tARG 3 minGroupSize\n \t\t\tARG 4 maxGroupSize\n+\tCLASS class_4762 Noise\n+\t\tFIELD field_22047 reduction F\n+\t\tMETHOD <init> (FFFFF)V\n+\t\t\tARG 5 reduction\n+\t\tMETHOD method_24381 getDistance (Lnet/minecraft/class_1959$class_4762;)F", "originalCommit": "99e9af3a284236e6b1a3a07293bfbe20d8f32468", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ2NDExMQ==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375464111", "bodyText": "this is conceptual distance and notice that - before reduction square, so not sqr dist.", "author": "liach", "createdAt": "2020-02-05T19:33:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0NTAzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0NjM1MA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375446350", "bodyText": "unpackRgb", "author": "Earthcomputer", "createdAt": "2020-02-05T18:59:51Z", "path": "mappings/net/minecraft/util/math/Vec3d.mapping", "diffHunk": "@@ -50,3 +50,5 @@ CLASS net/minecraft/class_243 net/minecraft/util/math/Vec3d\n \tMETHOD method_18806 multiply (Lnet/minecraft/class_243;)Lnet/minecraft/class_243;\n \t\tARG 1 mult\n \tMETHOD method_22882 negate ()Lnet/minecraft/class_243;\n+\tMETHOD method_24457 breakDownRgb (I)Lnet/minecraft/class_243;", "originalCommit": "99e9af3a284236e6b1a3a07293bfbe20d8f32468", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0NzAwNg==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375447006", "bodyText": "This sounds like it's changing the fog color of the biome, rather than the biome applying its tweaks. How about something like applyBiomeColorModifier?", "author": "Earthcomputer", "createdAt": "2020-02-05T19:01:08Z", "path": "mappings/net/minecraft/world/dimension/Dimension.mapping", "diffHunk": "@@ -14,7 +14,8 @@ CLASS net/minecraft/class_2869 net/minecraft/world/dimension/Dimension\n \t\tARG 1 x\n \t\tARG 2 z\n \t\tARG 3 checkMobSpawnValidity\n-\tMETHOD method_12445 getFogColor (IF)Lnet/minecraft/class_243;\n+\tMETHOD method_12445 tweakFogColor (IF)Lnet/minecraft/class_243;", "originalCommit": "99e9af3a284236e6b1a3a07293bfbe20d8f32468", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ2NTQzMg==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375465432", "bodyText": "it is like dim shifting fog color, e.g. overworld shift white and blue by tiny bit, nether keep it same, end shift it black significantly", "author": "liach", "createdAt": "2020-02-05T19:36:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0NzAwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ5NjU1NA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375496554", "bodyText": "Yeah but the name you have there seems to suggest that this is a weirdly named setter for the fog color. What the method actually does is apply a modifier to the input color, and return the result.", "author": "Earthcomputer", "createdAt": "2020-02-05T20:42:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ0NzAwNg=="}], "type": "inlineReview"}, {"oid": "83cb1676691d286d5f329f69e68764fc2799508a", "url": "https://github.com/FabricMC/yarn/commit/83cb1676691d286d5f329f69e68764fc2799508a", "message": "SpecialEffects -> Effects\nunpackRgb", "committedDate": "2020-02-05T20:36:42Z", "type": "commit"}, {"oid": "192c03447fa4387ebf86de154f10239b29f9a0da", "url": "https://github.com/FabricMC/yarn/commit/192c03447fa4387ebf86de154f10239b29f9a0da", "message": "Better names, I guess\n\nThis time mojang teaches us 4-D cartesian plane and hyperbola\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2020-02-05T22:17:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0Mjc4NA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375542784", "bodyText": "oh no", "author": "valoeghese", "createdAt": "2020-02-05T22:25:19Z", "path": "mappings/net/minecraft/world/biome/Biome.mapping", "diffHunk": "@@ -1,6 +1,8 @@\n CLASS net/minecraft/class_1959 net/minecraft/world/biome/Biome\n \tFIELD field_20335 temperatureCache Ljava/lang/ThreadLocal;\n \tFIELD field_21806 skyColor I\n+\tFIELD field_22039 specialEffects Lnet/minecraft/class_4763;\n+\tFIELD field_22040 noises Ljava/util/List;", "originalCommit": "192c03447fa4387ebf86de154f10239b29f9a0da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MjkzMw==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375542933", "bodyText": "\"noise penalty\"?", "author": "valoeghese", "createdAt": "2020-02-05T22:25:39Z", "path": "mappings/net/minecraft/world/biome/Biome.mapping", "diffHunk": "@@ -25,6 +27,11 @@ CLASS net/minecraft/class_1959 net/minecraft/world/biome/Biome\n \tMETHOD method_21740 getTemperature (Lnet/minecraft/class_2338;)F\n \t\tARG 1 blockPos\n \tMETHOD method_24218 calculateSkyColor ()I\n+\tMETHOD method_24374 getNoisePenalty (Lnet/minecraft/class_1959$class_4762;)F", "originalCommit": "192c03447fa4387ebf86de154f10239b29f9a0da", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MzI0OA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375543248", "bodyText": "yeah, like penalty between a generator selected noise point and a biome. lowest penalty got picked by the gen", "author": "liach", "createdAt": "2020-02-05T22:26:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MjkzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0NDE5Mw==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375544193", "bodyText": "yeah but why call it penalty", "author": "valoeghese", "createdAt": "2020-02-05T22:28:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MjkzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0NzkwOQ==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375547909", "bodyText": "make it something chance related, show it's a relative rarity to the target", "author": "valoeghese", "createdAt": "2020-02-05T22:38:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MjkzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MzA3NQ==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375543075", "bodyText": "took them long enough to add this", "author": "valoeghese", "createdAt": "2020-02-05T22:26:05Z", "path": "mappings/net/minecraft/world/biome/Biome.mapping", "diffHunk": "@@ -25,6 +27,11 @@ CLASS net/minecraft/class_1959 net/minecraft/world/biome/Biome\n \tMETHOD method_21740 getTemperature (Lnet/minecraft/class_2338;)F\n \t\tARG 1 blockPos\n \tMETHOD method_24218 calculateSkyColor ()I\n+\tMETHOD method_24374 getNoisePenalty (Lnet/minecraft/class_1959$class_4762;)F\n+\t\tARG 1 noise\n+\tMETHOD method_24376 getFogColor ()I", "originalCommit": "192c03447fa4387ebf86de154f10239b29f9a0da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MzUxNg==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375543516", "bodyText": "if we're basing names off of the biome settings then this should be scale", "author": "valoeghese", "createdAt": "2020-02-05T22:27:09Z", "path": "mappings/net/minecraft/world/biome/Biome.mapping", "diffHunk": "@@ -154,3 +166,26 @@ CLASS net/minecraft/class_1959 net/minecraft/world/biome/Biome\n \t\t\tARG 2 weight\n \t\t\tARG 3 minGroupSize\n \t\t\tARG 4 maxGroupSize\n+\tCLASS class_4762 MixedNoisePoint\n+\t\tCOMMENT Represents a point in a multi-dimensional cartesian plane. Mixed-noise\n+\t\tCOMMENT biome generator picks the closest noise point from its selected point\n+\t\tCOMMENT and choose the biome associated to that closest point. Another factor,\n+\t\tCOMMENT influence, allows a farther point\n+\t\tFIELD field_22043 heat F\n+\t\tFIELD field_22044 humidity F\n+\t\tFIELD field_22045 hilliness F", "originalCommit": "192c03447fa4387ebf86de154f10239b29f9a0da", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0NzI4OA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375547288", "bodyText": "scale? or depth?", "author": "liach", "createdAt": "2020-02-05T22:36:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MzUxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4NDkzMA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375584930", "bodyText": "I see no need to be consistent with biome setting names here. These names represent our best guess on what these values are supposed to mean based on the values that different biomes have them set for. Ultimately they aren't really related to the values in biome settings, and can hold different, even contradictory values (see the badlands biome). These names are fine as they are.", "author": "Earthcomputer", "createdAt": "2020-02-06T00:33:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MzUxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU0MzYwNg==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r375543606", "bodyText": "similarly this should be temperature, as per the biome settings", "author": "valoeghese", "createdAt": "2020-02-05T22:27:24Z", "path": "mappings/net/minecraft/world/biome/Biome.mapping", "diffHunk": "@@ -154,3 +166,26 @@ CLASS net/minecraft/class_1959 net/minecraft/world/biome/Biome\n \t\t\tARG 2 weight\n \t\t\tARG 3 minGroupSize\n \t\t\tARG 4 maxGroupSize\n+\tCLASS class_4762 MixedNoisePoint\n+\t\tCOMMENT Represents a point in a multi-dimensional cartesian plane. Mixed-noise\n+\t\tCOMMENT biome generator picks the closest noise point from its selected point\n+\t\tCOMMENT and choose the biome associated to that closest point. Another factor,\n+\t\tCOMMENT influence, allows a farther point\n+\t\tFIELD field_22043 heat F", "originalCommit": "192c03447fa4387ebf86de154f10239b29f9a0da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "235589b4fcbf9365c06d6e271277d2f7c4deed24", "url": "https://github.com/FabricMC/yarn/commit/235589b4fcbf9365c06d6e271277d2f7c4deed24", "message": "Bit more stuff\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2020-02-05T22:37:55Z", "type": "commit"}, {"oid": "1fbe3db9659c416098ad7297f5a11ef07b9c68a5", "url": "https://github.com/FabricMC/yarn/commit/1fbe3db9659c416098ad7297f5a11ef07b9c68a5", "message": "penalty -> distance\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2020-02-06T17:58:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAxOTM5OA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r376019398", "bodyText": "style?", "author": "Juuxel", "createdAt": "2020-02-06T18:54:29Z", "path": "mappings/net/minecraft/world/biome/Biome.mapping", "diffHunk": "@@ -154,3 +166,40 @@ CLASS net/minecraft/class_1959 net/minecraft/world/biome/Biome\n \t\t\tARG 2 weight\n \t\t\tARG 3 minGroupSize\n \t\t\tARG 4 maxGroupSize\n+\tCLASS class_4762 MixedNoisePoint\n+\t\tCOMMENT Represents a point in a multi-dimensional cartesian plane. Mixed-noise\n+\t\tCOMMENT biome generator picks the closest noise point from its selected point\n+\t\tCOMMENT and choose the biome associated to that closest point. Another factor,\n+\t\tCOMMENT rarity potential, favors larger differences in values instead, contrary\n+\t\tCOMMENT to other point values.\n+\t\tFIELD field_22043 temperature F\n+\t\tFIELD field_22044 humidity F\n+\t\tFIELD field_22045 hilliness F\n+\t\tFIELD field_22046 style F", "originalCommit": "1fbe3db9659c416098ad7297f5a11ef07b9c68a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAxOTU4MA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r376019580", "bodyText": "Something like a style/theme. Similar theme is favored.", "author": "liach", "createdAt": "2020-02-06T18:54:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAxOTM5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAxOTc0OA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r376019748", "bodyText": "What does it do? Edit: yes, I should read these responses better lol", "author": "Juuxel", "createdAt": "2020-02-06T18:55:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAxOTM5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAyMDEzMA==", "url": "https://github.com/FabricMC/yarn/pull/1087#discussion_r376020130", "bodyText": "Dunno, actually all 5 names are arbitrary guesses from hardcoded values given in mojang code and we aren't sure if any of them is correct at all", "author": "liach", "createdAt": "2020-02-06T18:55:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAxOTM5OA=="}], "type": "inlineReview"}]}