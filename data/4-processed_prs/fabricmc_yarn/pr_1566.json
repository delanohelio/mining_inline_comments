{"pr_number": 1566, "pr_title": "TypeConsumer is actually a visitor", "pr_createdAt": "2020-07-09T02:05:47Z", "pr_url": "https://github.com/FabricMC/yarn/pull/1566", "timeline": [{"oid": "f465789d685a3fd0186fff8736720b4f717162e2", "url": "https://github.com/FabricMC/yarn/commit/f465789d685a3fd0186fff8736720b4f717162e2", "message": "TypeConsumer is actually a visitor\n\nAnd map that one bootstrap method that uses the visitor", "committedDate": "2020-07-09T02:04:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkyOTQyOA==", "url": "https://github.com/FabricMC/yarn/pull/1566#discussion_r451929428", "bodyText": "I would name this accept or acceptAll, elements typically use accept(visitor) to call visitor.visitXY(element).", "author": "sfPlayer1", "createdAt": "2020-07-09T02:32:50Z", "path": "mappings/net/minecraft/world/GameRules.mapping", "diffHunk": "@@ -38,8 +38,9 @@ CLASS net/minecraft/class_1928 net/minecraft/world/GameRules\n \tFIELD field_9197 RULE_TYPES Ljava/util/Map;\n \tMETHOD <init> (Ljava/util/Map;)V\n \t\tARG 1 rules\n-\tMETHOD method_20744 forEachType (Lnet/minecraft/class_1928$class_4311;)V\n-\t\tARG 0 action\n+\tMETHOD method_20744 visit (Lnet/minecraft/class_1928$class_4311;)V", "originalCommit": "f465789d685a3fd0186fff8736720b4f717162e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkzMDMyNw==", "url": "https://github.com/FabricMC/yarn/pull/1566#discussion_r451930327", "bodyText": "This needs to be passive form, the visitor is visiting, not GameRules. Something like Make the visitor visit all game rules.\\n\\n<p>The visitation involves calling both visitor.accept() and visitor.acceptX() for every game rule, where X is the current rule's concrete type such as Boolean.", "author": "sfPlayer1", "createdAt": "2020-07-09T02:36:20Z", "path": "mappings/net/minecraft/world/GameRules.mapping", "diffHunk": "@@ -38,8 +38,9 @@ CLASS net/minecraft/class_1928 net/minecraft/world/GameRules\n \tFIELD field_9197 RULE_TYPES Ljava/util/Map;\n \tMETHOD <init> (Ljava/util/Map;)V\n \t\tARG 1 rules\n-\tMETHOD method_20744 forEachType (Lnet/minecraft/class_1928$class_4311;)V\n-\t\tARG 0 action\n+\tMETHOD method_20744 visit (Lnet/minecraft/class_1928$class_4311;)V\n+\t\tCOMMENT Visits all registered game rules using the supplied visitor.", "originalCommit": "f465789d685a3fd0186fff8736720b4f717162e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fa8800cc3b139e4773940b43f4255fb19a29b509", "url": "https://github.com/FabricMC/yarn/commit/fa8800cc3b139e4773940b43f4255fb19a29b509", "message": "Use a more passive form, use accept and use \"visit\" name in the right spots.\n\nAnd fix it to be standard with naming.", "committedDate": "2020-07-09T02:46:21Z", "type": "commit"}, {"oid": "fdee0f27b9b96a4106838b050d1e79e665b1a7c7", "url": "https://github.com/FabricMC/yarn/commit/fdee0f27b9b96a4106838b050d1e79e665b1a7c7", "message": "Indentation", "committedDate": "2020-07-09T04:03:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjUzMDY1NQ==", "url": "https://github.com/FabricMC/yarn/pull/1566#discussion_r452530655", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tCOMMENT <p>Note {@link #accept(GameRules.Key, GameRules.Type)} will be called before this method is visited.\n          \n          \n            \n            \t\t\tCOMMENT <p>Note {@link #accept(GameRules.Key, GameRules.Type)} will be called before this method.", "author": "shartte", "createdAt": "2020-07-09T22:47:11Z", "path": "mappings/net/minecraft/world/GameRules.mapping", "diffHunk": "@@ -104,14 +107,24 @@ CLASS net/minecraft/class_1928 net/minecraft/world/GameRules\n \t\tMETHOD method_20760 create (ZLjava/util/function/BiConsumer;)Lnet/minecraft/class_1928$class_4314;\n \t\t\tARG 0 initialValue\n \t\t\tARG 1 changeCallback\n-\tCLASS class_4311 TypeConsumer\n-\t\tMETHOD method_20762 accept (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\tCLASS class_4311 Visitor\n+\t\tCOMMENT A visitor used to visit all game rules.\n+\t\tMETHOD method_20762 visit (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\t\t\tCOMMENT Visit a game rule.\n+\t\t\tCOMMENT\n+\t\t\tCOMMENT <p>It is expected all game rules regardless of type will be visited using this method.\n \t\t\tARG 1 key\n \t\t\tARG 2 type\n-\t\tMETHOD method_27329 acceptBoolean (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\t\tMETHOD method_27329 visitBoolean (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\t\t\tCOMMENT Visit a boolean rule.\n+\t\t\tCOMMENT\n+\t\t\tCOMMENT <p>Note {@link #accept(GameRules.Key, GameRules.Type)} will be called before this method is visited.", "originalCommit": "fdee0f27b9b96a4106838b050d1e79e665b1a7c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjUzMDczMQ==", "url": "https://github.com/FabricMC/yarn/pull/1566#discussion_r452530731", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tCOMMENT <p>Note {@link #accept(GameRules.Key, GameRules.Type)} will be called before this method is visited.\n          \n          \n            \n            \t\t\tCOMMENT <p>Note {@link #accept(GameRules.Key, GameRules.Type)} will be called before this method.", "author": "shartte", "createdAt": "2020-07-09T22:47:23Z", "path": "mappings/net/minecraft/world/GameRules.mapping", "diffHunk": "@@ -104,14 +107,24 @@ CLASS net/minecraft/class_1928 net/minecraft/world/GameRules\n \t\tMETHOD method_20760 create (ZLjava/util/function/BiConsumer;)Lnet/minecraft/class_1928$class_4314;\n \t\t\tARG 0 initialValue\n \t\t\tARG 1 changeCallback\n-\tCLASS class_4311 TypeConsumer\n-\t\tMETHOD method_20762 accept (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\tCLASS class_4311 Visitor\n+\t\tCOMMENT A visitor used to visit all game rules.\n+\t\tMETHOD method_20762 visit (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\t\t\tCOMMENT Visit a game rule.\n+\t\t\tCOMMENT\n+\t\t\tCOMMENT <p>It is expected all game rules regardless of type will be visited using this method.\n \t\t\tARG 1 key\n \t\t\tARG 2 type\n-\t\tMETHOD method_27329 acceptBoolean (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\t\tMETHOD method_27329 visitBoolean (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\t\t\tCOMMENT Visit a boolean rule.\n+\t\t\tCOMMENT\n+\t\t\tCOMMENT <p>Note {@link #accept(GameRules.Key, GameRules.Type)} will be called before this method is visited.\n \t\t\tARG 1 key\n \t\t\tARG 2 type\n-\t\tMETHOD method_27330 acceptInt (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\t\tMETHOD method_27330 visitInt (Lnet/minecraft/class_1928$class_4313;Lnet/minecraft/class_1928$class_4314;)V\n+\t\t\tCOMMENT Visit an integer rule.\n+\t\t\tCOMMENT\n+\t\t\tCOMMENT <p>Note {@link #accept(GameRules.Key, GameRules.Type)} will be called before this method is visited.", "originalCommit": "fdee0f27b9b96a4106838b050d1e79e665b1a7c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fae0cc4de832d9faf3bc6baeab747ed0ef299188", "url": "https://github.com/FabricMC/yarn/commit/fae0cc4de832d9faf3bc6baeab747ed0ef299188", "message": "Update mappings/net/minecraft/world/GameRules.mapping\n\nCo-authored-by: shartte <shartte@users.noreply.github.com>", "committedDate": "2020-07-09T22:47:44Z", "type": "commit"}, {"oid": "24a8550784df141c255bd2d3d39b050340b0f812", "url": "https://github.com/FabricMC/yarn/commit/24a8550784df141c255bd2d3d39b050340b0f812", "message": "Update mappings/net/minecraft/world/GameRules.mapping\n\nCo-authored-by: shartte <shartte@users.noreply.github.com>", "committedDate": "2020-07-09T22:47:52Z", "type": "commit"}]}