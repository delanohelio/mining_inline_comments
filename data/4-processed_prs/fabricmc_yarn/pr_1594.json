{"pr_number": 1594, "pr_title": "Fixes mapping issues in LevelInfo", "pr_createdAt": "2020-07-19T21:18:38Z", "pr_url": "https://github.com/FabricMC/yarn/pull/1594", "timeline": [{"oid": "3e2ea662f70e5a6d0f6c8d4489f4e434cdd5140b", "url": "https://github.com/FabricMC/yarn/commit/3e2ea662f70e5a6d0f6c8d4489f4e434cdd5140b", "message": "Fixes mapping issues in LevelInfo", "committedDate": "2020-07-19T21:17:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUxMzQ5Mw==", "url": "https://github.com/FabricMC/yarn/pull/1594#discussion_r457513493", "bodyText": "Is each LevelInfo immutable? If yes withDefaultGameRules might be better.", "author": "liach", "createdAt": "2020-07-20T15:50:46Z", "path": "mappings/net/minecraft/world/level/LevelInfo.mapping", "diffHunk": "@@ -2,14 +2,30 @@ CLASS net/minecraft/class_1940 net/minecraft/world/level/LevelInfo\n \tFIELD field_24105 name Ljava/lang/String;\n \tFIELD field_24106 difficulty Lnet/minecraft/class_1267;\n \tFIELD field_24107 gameRules Lnet/minecraft/class_1928;\n+\tFIELD field_25403 dataPackSettings Lnet/minecraft/class_5359;\n \tFIELD field_9257 gameMode Lnet/minecraft/class_1934;\n-\tFIELD field_9261 hardcore Z\n-\tFIELD field_9262 structures Z\n+\tFIELD field_9261 allowCommands Z\n+\tFIELD field_9262 hardcore Z\n \tMETHOD <init> (Ljava/lang/String;Lnet/minecraft/class_1934;ZLnet/minecraft/class_1267;ZLnet/minecraft/class_1928;Lnet/minecraft/class_5359;)V\n \t\tARG 1 name\n+\t\tARG 2 gameMode\n+\t\tARG 3 hardcore\n+\t\tARG 4 difficulty\n+\t\tARG 5 allowCommands\n+\t\tARG 6 gameRules\n+\t\tARG 7 dataPackSettings\n \tMETHOD method_27339 getLevelName ()Ljava/lang/String;\n \tMETHOD method_27340 getDifficulty ()Lnet/minecraft/class_1267;\n \tMETHOD method_27341 getGameRules ()Lnet/minecraft/class_1928;\n+\tMETHOD method_28381 withDifficulty (Lnet/minecraft/class_1267;)Lnet/minecraft/class_1940;\n+\t\tARG 1 difficulty\n+\tMETHOD method_28382 withGameMode (Lnet/minecraft/class_1934;)Lnet/minecraft/class_1940;\n+\t\tARG 1 mode\n+\tMETHOD method_28383 fromDynamic (Lcom/mojang/serialization/Dynamic;Lnet/minecraft/class_5359;)Lnet/minecraft/class_1940;\n+\tMETHOD method_28385 withNewGameRules ()Lnet/minecraft/class_1940;", "originalCommit": "3e2ea662f70e5a6d0f6c8d4489f4e434cdd5140b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzU4NzMxOA==", "url": "https://github.com/FabricMC/yarn/pull/1594#discussion_r457587318", "bodyText": "It copies the current game rules attached to it though. I honestly didn't check further, but that only seemed to make sense if the LevelInfo was immutable, but the GameRules weren't. (I'll recheck though)", "author": "shartte", "createdAt": "2020-07-20T17:50:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUxMzQ5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYxMzExMQ==", "url": "https://github.com/FabricMC/yarn/pull/1594#discussion_r457613111", "bodyText": "Yes after rechecking: GameRules seem to be mutable, while LevelInfo is not, so \"withNewGameRules\" might be used if one wants to have the same levelinfo, but with different rules", "author": "shartte", "createdAt": "2020-07-20T18:36:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUxMzQ5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM0ODg2MA==", "url": "https://github.com/FabricMC/yarn/pull/1594#discussion_r458348860", "bodyText": "How about withCopiedGameRules? this sounds like creating a new level info with vanilla's default game rules", "author": "liach", "createdAt": "2020-07-21T19:51:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUxMzQ5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQwMDYxNQ==", "url": "https://github.com/FabricMC/yarn/pull/1594#discussion_r458400615", "bodyText": "Done", "author": "shartte", "createdAt": "2020-07-21T21:31:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUxMzQ5Mw=="}], "type": "inlineReview"}, {"oid": "ae99e5a291c6774d77e7694793e627cf1e419aa0", "url": "https://github.com/FabricMC/yarn/commit/ae99e5a291c6774d77e7694793e627cf1e419aa0", "message": "Clarify comment on copied game rules", "committedDate": "2020-07-21T21:31:38Z", "type": "commit"}]}