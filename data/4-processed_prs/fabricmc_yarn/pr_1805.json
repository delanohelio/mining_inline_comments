{"pr_number": 1805, "pr_title": "Add a simple `decompileCFR` task", "pr_createdAt": "2020-10-13T19:28:57Z", "pr_url": "https://github.com/FabricMC/yarn/pull/1805", "timeline": [{"oid": "cc6a1879637403d2d8f87715384cf348b0d4b996", "url": "https://github.com/FabricMC/yarn/commit/cc6a1879637403d2d8f87715384cf348b0d4b996", "message": "Add a simple `decompileCFR` task", "committedDate": "2020-10-13T19:26:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNzM2Ng==", "url": "https://github.com/FabricMC/yarn/pull/1805#discussion_r504207366", "bodyText": "An option should be exposed to change the output path from something other than ./src.", "author": "haykam821", "createdAt": "2020-10-13T19:35:41Z", "path": "build.gradle", "diffHunk": "@@ -667,6 +675,17 @@ task genFakeSource(dependsOn: [\"buildYarnTiny\", \"mapNamedJar\"]) {\n \t}\n }\n \n+task decompileCFR(type: JavaExec, dependsOn: \"mapNamedJar\") {\n+\tclasspath = configurations.decompileClasspath\n+\tmain = \"org.benf.cfr.reader.Main\"\n+\n+\targs namedJar.getAbsolutePath(), \"--outputdir\", file(\"src\").absolutePath", "originalCommit": "cc6a1879637403d2d8f87715384cf348b0d4b996", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNzg0MA==", "url": "https://github.com/FabricMC/yarn/pull/1805#discussion_r504207840", "bodyText": "I dont think thats needed, adds added compliexity for something that I dont think has a lot of gain.", "author": "modmuss50", "createdAt": "2020-10-13T19:36:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNzM2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIxMDEzMw==", "url": "https://github.com/FabricMC/yarn/pull/1805#discussion_r504210133", "bodyText": "If there's already an existing src, this is what users will have to use without an option:\nmv src tempSrc\n./gradlew decompileCFR\nmv src minecraftSrc\nmv tempSrc src", "author": "haykam821", "createdAt": "2020-10-13T19:40:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNzM2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNzQ5Mw==", "url": "https://github.com/FabricMC/yarn/pull/1805#discussion_r504207493", "bodyText": "Shouldn't this be minecraftSrc or similar to be in line with remappedSrc, and in certain scenarios, not overwrite an existing src folder?", "author": "haykam821", "createdAt": "2020-10-13T19:35:56Z", "path": "build.gradle", "diffHunk": "@@ -667,6 +675,17 @@ task genFakeSource(dependsOn: [\"buildYarnTiny\", \"mapNamedJar\"]) {\n \t}\n }\n \n+task decompileCFR(type: JavaExec, dependsOn: \"mapNamedJar\") {\n+\tclasspath = configurations.decompileClasspath\n+\tmain = \"org.benf.cfr.reader.Main\"\n+\n+\targs namedJar.getAbsolutePath(), \"--outputdir\", file(\"src\").absolutePath\n+\n+\tdoFirst {\n+\t\tfile(\"src\").deleteDir()", "originalCommit": "cc6a1879637403d2d8f87715384cf348b0d4b996", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwODU2Mw==", "url": "https://github.com/FabricMC/yarn/pull/1805#discussion_r504208563", "bodyText": "there isnt an existing src, I did kinda think of dumping it in src/main/java and making it importable into an ide so you could explore the code a bit easier but thats prob not needed.\nI think what we have here is fine? What do others think?", "author": "modmuss50", "createdAt": "2020-10-13T19:38:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNzQ5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwOTYyNw==", "url": "https://github.com/FabricMC/yarn/pull/1805#discussion_r504209627", "bodyText": "on 2nd throughts, remappedSrc does make more sense. I will change this", "author": "modmuss50", "createdAt": "2020-10-13T19:39:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNzQ5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIxMDAyNA==", "url": "https://github.com/FabricMC/yarn/pull/1805#discussion_r504210024", "bodyText": "Another solution would be to potentially halt the process if src already exists.", "author": "haykam821", "createdAt": "2020-10-13T19:40:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNzQ5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIxMDY3Nw==", "url": "https://github.com/FabricMC/yarn/pull/1805#discussion_r504210677", "bodyText": "changed to namedSrc to follow the jar.", "author": "modmuss50", "createdAt": "2020-10-13T19:41:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNzQ5Mw=="}], "type": "inlineReview"}, {"oid": "584b15d3bad96939cc0c163852afacc03144cef3", "url": "https://github.com/FabricMC/yarn/commit/584b15d3bad96939cc0c163852afacc03144cef3", "message": "namedSrc", "committedDate": "2020-10-13T19:41:14Z", "type": "commit"}]}