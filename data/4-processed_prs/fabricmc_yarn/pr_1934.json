{"pr_number": 1934, "pr_title": "Switch to mappingpoet 0.2.0", "pr_createdAt": "2020-12-23T21:19:49Z", "pr_url": "https://github.com/FabricMC/yarn/pull/1934", "timeline": [{"oid": "dabda29a22fc3f05b3c03ca7d6761678584e97d9", "url": "https://github.com/FabricMC/yarn/commit/dabda29a22fc3f05b3c03ca7d6761678584e97d9", "message": "Switch to mappingpoet 0.2.0\n\nNow includes obf name in javadoc. Though it takes longer to generate\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2020-12-23T22:57:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1MzU1OA==", "url": "https://github.com/FabricMC/yarn/pull/1934#discussion_r548353558", "bodyText": "I think this is good for now, we can look at enforcing java 11 in a while, possibly along with engima.", "author": "modmuss50", "createdAt": "2020-12-24T02:26:10Z", "path": "build.gradle", "diffHunk": "@@ -23,6 +22,30 @@ plugins {\n \tid 'java' // for jd gen\n }\n \n+def toolchainLanguageVersion = JavaLanguageVersion.of(11)\n+\n+if (!JavaVersion.current().isCompatibleWith(JavaVersion.toVersion(toolchainLanguageVersion))) {\n+\tlogger.warn \":The current Java Version ${JavaVersion.current()} is too old.\"\n+\tlogger.warn \":Gradle may download newer Java online and the build may be slower.\"", "originalCommit": "dabda29a22fc3f05b3c03ca7d6761678584e97d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1NDA1NQ==", "url": "https://github.com/FabricMC/yarn/pull/1934#discussion_r548354055", "bodyText": "This does use java 11 when using 15 for example, might be worth moving this to only apply when running on java versions bellow 11 (same time as the warning).", "author": "modmuss50", "createdAt": "2020-12-24T02:28:28Z", "path": "build.gradle", "diffHunk": "@@ -23,6 +22,30 @@ plugins {\n \tid 'java' // for jd gen\n }\n \n+def toolchainLanguageVersion = JavaLanguageVersion.of(11)\n+\n+if (!JavaVersion.current().isCompatibleWith(JavaVersion.toVersion(toolchainLanguageVersion))) {\n+\tlogger.warn \":The current Java Version ${JavaVersion.current()} is too old.\"\n+\tlogger.warn \":Gradle may download newer Java online and the build may be slower.\"\n+}\n+\n+java.toolchain { // defined in JavaPluginExtension\n+\tlanguageVersion = toolchainLanguageVersion\n+}\n+\n+// currently gradle does not yet propagate that version above, so\n+tasks.withType(JavaExec) {\n+\tjavaLauncher = javaToolchains.launcherFor {\n+\t\tlanguageVersion = toolchainLanguageVersion\n+\t}\n+}\n+\n+tasks.withType(Javadoc) {\n+\tjavadocTool = javaToolchains.javadocToolFor {\n+\t\tlanguageVersion = toolchainLanguageVersion\n+\t}\n+}", "originalCommit": "dabda29a22fc3f05b3c03ca7d6761678584e97d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM4NzEyNA==", "url": "https://github.com/FabricMC/yarn/pull/1934#discussion_r548387124", "bodyText": "I will just set the current java language version as the toolchain language version if it can compile or run the minimum version (this case 11). Done in last forced update.", "author": "liach", "createdAt": "2020-12-24T05:23:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM1NDA1NQ=="}], "type": "inlineReview"}, {"oid": "545a4a15d0e0c7789d46ad7a98fcb2fa3949028d", "url": "https://github.com/FabricMC/yarn/commit/545a4a15d0e0c7789d46ad7a98fcb2fa3949028d", "message": "Switch to mappingpoet 0.2.0\n\nNow includes obf name in javadoc. Though it takes longer to generate\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2020-12-24T05:19:20Z", "type": "forcePushed"}, {"oid": "688f6fb58626d51750ca6d5cc60bfc4ec0bb3072", "url": "https://github.com/FabricMC/yarn/commit/688f6fb58626d51750ca6d5cc60bfc4ec0bb3072", "message": "Move copy on click js to yarn\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2021-01-08T07:41:43Z", "type": "forcePushed"}, {"oid": "4c68c290e3eb8d4ffa257f49cd4b611e89153727", "url": "https://github.com/FabricMC/yarn/commit/4c68c290e3eb8d4ffa257f49cd4b611e89153727", "message": "Switch to mappingpoet 0.2.0\n\nNow includes obf name in javadoc. Though it takes longer to generate\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2021-01-20T20:06:57Z", "type": "commit"}, {"oid": "cd9b41fe8fd27bd5f0adb348f1ecd0e8eca99007", "url": "https://github.com/FabricMC/yarn/commit/cd9b41fe8fd27bd5f0adb348f1ecd0e8eca99007", "message": "removed the global toolchain version requirement\n\nenable a few superstrict doclints (won't fail build) and we are now compliant!\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2021-01-20T23:24:51Z", "type": "forcePushed"}, {"oid": "e2412bf09cb07743eae39be929df2efe0f315496", "url": "https://github.com/FabricMC/yarn/commit/e2412bf09cb07743eae39be929df2efe0f315496", "message": "removed the global toolchain version requirement\n\nenable a few superstrict doclints (won't fail build) and we are now compliant!\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2021-01-20T23:26:00Z", "type": "forcePushed"}, {"oid": "e2412bf09cb07743eae39be929df2efe0f315496", "url": "https://github.com/FabricMC/yarn/commit/e2412bf09cb07743eae39be929df2efe0f315496", "message": "removed the global toolchain version requirement\n\nenable a few superstrict doclints (won't fail build) and we are now compliant!\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2021-01-20T23:26:00Z", "type": "commit"}]}