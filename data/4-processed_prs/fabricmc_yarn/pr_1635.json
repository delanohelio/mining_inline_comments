{"pr_number": 1635, "pr_title": "Text-related refactors & new text things", "pr_createdAt": "2020-07-30T08:25:49Z", "pr_url": "https://github.com/FabricMC/yarn/pull/1635", "timeline": [{"oid": "047edbf243013140f121929248e3c1455e96a18e", "url": "https://github.com/FabricMC/yarn/commit/047edbf243013140f121929248e3c1455e96a18e", "message": "may be very controversial\n- Change StringRenderable to StringVisitable\n- OrderedText (I don't know about this but I can't think of a better one tbh, I'll throw in some more: CharacterVisitable, OrderedString, OrderedTextProvider)\n- ReorderingUtils\n- TextReorderingProcessor\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>", "committedDate": "2020-07-30T08:23:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkyOTA2OA==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r462929068", "bodyText": "Maybe this should be ReorderingUtil? See #1108", "author": "Juuxel", "createdAt": "2020-07-30T11:23:51Z", "path": "mappings/net/minecraft/client/resource/language/ReorderingUtils.mapping", "diffHunk": "@@ -0,0 +1,6 @@\n+CLASS net/minecraft/class_5491 net/minecraft/client/resource/language/ReorderingUtils", "originalCommit": "047edbf243013140f121929248e3c1455e96a18e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkzMDI3MQ==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r462930271", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tMETHOD method_30937 getOrderedText ()Lnet/minecraft/class_5481;\n          \n          \n            \n            \tMETHOD method_30937 asOrderedText ()Lnet/minecraft/class_5481;\n          \n      \n    \n    \n  \n\nto match asString, asTruncatedString and similar conversion methods in other classes", "author": "Juuxel", "createdAt": "2020-07-30T11:26:25Z", "path": "mappings/net/minecraft/text/Text.mapping", "diffHunk": "@@ -42,6 +42,7 @@ CLASS net/minecraft/class_2561 net/minecraft/text/Text\n \t\tCOMMENT <p>A shallow copy is made for the siblings.</p>\n \tMETHOD method_27662 copy ()Lnet/minecraft/class_5250;\n \t\tCOMMENT Copies the text itself, excluding the styles or siblings.\n+\tMETHOD method_30937 getOrderedText ()Lnet/minecraft/class_5481;", "originalCommit": "047edbf243013140f121929248e3c1455e96a18e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkzMDUzOQ==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r462930539", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tARG 0 renderable\n          \n          \n            \n            \t\tARG 0 visitable\n          \n      \n    \n    \n  \n\nTo match StringVisitable. (This could possibly also be just text?)", "author": "Juuxel", "createdAt": "2020-07-30T11:26:55Z", "path": "mappings/net/minecraft/client/resource/language/ReorderingUtils.mapping", "diffHunk": "@@ -0,0 +1,6 @@\n+CLASS net/minecraft/class_5491 net/minecraft/client/resource/language/ReorderingUtils\n+\tMETHOD method_30921 shapeArabic (Ljava/lang/String;)Ljava/lang/String;\n+\t\tARG 0 string\n+\tMETHOD method_30922 reorder (Lnet/minecraft/class_5348;Z)Lnet/minecraft/class_5481;\n+\t\tARG 0 renderable", "originalCommit": "047edbf243013140f121929248e3c1455e96a18e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkzMTU4Nw==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r462931587", "bodyText": "The mapper parameters are a bit unclear on the non-map methods. Maybe codePointMapper would be better since it maps code points?", "author": "Juuxel", "createdAt": "2020-07-30T11:29:05Z", "path": "mappings/net/minecraft/text/OrderedText.mapping", "diffHunk": "@@ -0,0 +1,32 @@\n+CLASS net/minecraft/class_5481 net/minecraft/text/OrderedText", "originalCommit": "047edbf243013140f121929248e3c1455e96a18e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkzMTY1NQ==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r462931655", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tARG 2 visiter\n          \n          \n            \n            \t\tARG 2 visitor", "author": "Juuxel", "createdAt": "2020-07-30T11:29:13Z", "path": "mappings/net/minecraft/text/OrderedText.mapping", "diffHunk": "@@ -0,0 +1,32 @@\n+CLASS net/minecraft/class_5481 net/minecraft/text/OrderedText\n+\tFIELD field_26385 EMPTY Lnet/minecraft/class_5481;\n+\tMETHOD accept (Lnet/minecraft/class_5224;)Z\n+\t\tARG 1 visitor\n+\tMETHOD method_30741 styled (ILnet/minecraft/class_2583;)Lnet/minecraft/class_5481;\n+\t\tARG 0 codePoint\n+\t\tARG 1 style\n+\tMETHOD method_30742 concat (Lnet/minecraft/class_5481;Lnet/minecraft/class_5481;)Lnet/minecraft/class_5481;\n+\t\tARG 0 first\n+\t\tARG 1 second\n+\tMETHOD method_30745 map (Lnet/minecraft/class_5224;Lit/unimi/dsi/fastutil/ints/Int2IntFunction;)Lnet/minecraft/class_5224;\n+\t\tARG 0 visitor\n+\t\tARG 1 mapper\n+\tMETHOD method_30746 (Lnet/minecraft/class_5224;Lit/unimi/dsi/fastutil/ints/Int2IntFunction;ILnet/minecraft/class_2583;I)Z\n+\t\tARG 2 charIndex\n+\t\tARG 3 style\n+\t\tARG 4 charPoint\n+\tMETHOD method_30747 styledString (Ljava/lang/String;Lnet/minecraft/class_2583;)Lnet/minecraft/class_5481;\n+\t\tARG 0 string\n+\t\tARG 1 style\n+\tMETHOD method_30748 (Ljava/lang/String;Lnet/minecraft/class_2583;Lit/unimi/dsi/fastutil/ints/Int2IntFunction;Lnet/minecraft/class_5224;)Z\n+\t\tARG 3 visitor\n+\tMETHOD method_30749 concat (Ljava/util/List;)Lnet/minecraft/class_5481;\n+\t\tARG 0 visitables\n+\tMETHOD method_30751 (Lnet/minecraft/class_2583;ILnet/minecraft/class_5224;)Z\n+\t\tARG 2 visitor\n+\tMETHOD method_30753 (Ljava/lang/String;Lnet/minecraft/class_2583;Lnet/minecraft/class_5224;)Z\n+\t\tARG 2 visiter", "originalCommit": "047edbf243013140f121929248e3c1455e96a18e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkzMjA4NA==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r462932084", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tARG 1 renderables\n          \n          \n            \n            \tMETHOD method_30934 reorder (Lnet/minecraft/class_5348;)Lnet/minecraft/class_5481;\n          \n          \n            \n            \t\tARG 1 renderable\n          \n          \n            \n            \t\tARG 1 visitables\n          \n          \n            \n            \tMETHOD method_30934 reorder (Lnet/minecraft/class_5348;)Lnet/minecraft/class_5481;\n          \n          \n            \n            \t\tARG 1 visitable", "author": "Juuxel", "createdAt": "2020-07-30T11:30:07Z", "path": "mappings/net/minecraft/util/Language.mapping", "diffHunk": "@@ -11,6 +11,10 @@ CLASS net/minecraft/class_2477 net/minecraft/util/Language\n \t\tARG 0 language\n \tMETHOD method_29428 isRightToLeft ()Z\n \tMETHOD method_29429 create ()Lnet/minecraft/class_2477;\n+\tMETHOD method_30933 reorder (Ljava/util/List;)Ljava/util/List;\n+\t\tARG 1 renderables\n+\tMETHOD method_30934 reorder (Lnet/minecraft/class_5348;)Lnet/minecraft/class_5481;\n+\t\tARG 1 renderable", "originalCommit": "047edbf243013140f121929248e3c1455e96a18e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "38870ec471e80bc47cc3298562600c38e571e393", "url": "https://github.com/FabricMC/yarn/commit/38870ec471e80bc47cc3298562600c38e571e393", "message": "improvements\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>", "committedDate": "2020-07-30T15:50:01Z", "type": "commit"}, {"oid": "3079da92e258a60b5ed132f33a147ca32b8c9da4", "url": "https://github.com/FabricMC/yarn/commit/3079da92e258a60b5ed132f33a147ca32b8c9da4", "message": "improvements\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>", "committedDate": "2020-07-30T16:14:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0ODAyMQ==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r463248021", "bodyText": "Is this a static method? concat should be enough. If this is not static this should be like append", "author": "liach", "createdAt": "2020-07-30T20:19:55Z", "path": "mappings/net/minecraft/text/OrderedText.mapping", "diffHunk": "@@ -21,12 +23,19 @@ CLASS net/minecraft/class_5481 net/minecraft/text/OrderedText\n \tMETHOD method_30748 (Ljava/lang/String;Lnet/minecraft/class_2583;Lit/unimi/dsi/fastutil/ints/Int2IntFunction;Lnet/minecraft/class_5224;)Z\n \t\tARG 3 visitor\n \tMETHOD method_30749 concat (Ljava/util/List;)Lnet/minecraft/class_5481;\n-\t\tARG 0 visitables\n+\t\tARG 0 texts\n+\tMETHOD method_30750 (Ljava/util/List;Lnet/minecraft/class_5224;)Z\n+\t\tARG 1 visitor\n \tMETHOD method_30751 (Lnet/minecraft/class_2583;ILnet/minecraft/class_5224;)Z\n \t\tARG 2 visitor\n+\tMETHOD method_30752 concatTwo (Lnet/minecraft/class_5481;Lnet/minecraft/class_5481;)Lnet/minecraft/class_5481;", "originalCommit": "38870ec471e80bc47cc3298562600c38e571e393", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQyNjA2Ng==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r463426066", "bodyText": "it's a duplicate method of contact, concat calls this but only concat calls this", "author": "shedaniel", "createdAt": "2020-07-31T06:20:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQzMzIyNw==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r463433227", "bodyText": "Then the instance version of concat should be append.", "author": "liach", "createdAt": "2020-07-31T06:43:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0MDE0Ng==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r463440146", "bodyText": "it's static", "author": "shedaniel", "createdAt": "2020-07-31T07:03:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0MDQzOQ==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r463440439", "bodyText": "Then what's the difference between 30742 and 30752? Any difference by usage or by implementation?", "author": "liach", "createdAt": "2020-07-31T07:04:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0MDc5Nw==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r463440797", "bodyText": "no, but 30742 calls 30752 and only 30742 calls 30752", "author": "shedaniel", "createdAt": "2020-07-31T07:05:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0MzcyOA==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r463443728", "bodyText": "After looking I'd say this 30752 is an internal method only called from this class. (unfortunately interface static methods can only be public in java 8, so that's why). Maybe choose an internalish-name?", "author": "liach", "createdAt": "2020-07-31T07:13:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0ODAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0NDMwMw==", "url": "https://github.com/FabricMC/yarn/pull/1635#discussion_r463444303", "bodyText": "innerConcat?", "author": "shedaniel", "createdAt": "2020-07-31T07:14:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI0ODAyMQ=="}], "type": "inlineReview"}, {"oid": "a97b84e02e65b19e43bf908ea02662ef27b5417e", "url": "https://github.com/FabricMC/yarn/commit/a97b84e02e65b19e43bf908ea02662ef27b5417e", "message": "innerConcat\n\nSigned-off-by: shedaniel <daniel@shedaniel.me>", "committedDate": "2020-07-31T07:17:13Z", "type": "commit"}, {"oid": "32e694537e2df636e0b2eb26967d8063f81dcc24", "url": "https://github.com/FabricMC/yarn/commit/32e694537e2df636e0b2eb26967d8063f81dcc24", "message": "Merge remote-tracking branch 'upstream/1.16.2-pre1' into 1.16.2-pre1\n\n# Conflicts:\n#\tmappings/net/minecraft/text/Text.mapping", "committedDate": "2020-08-01T07:53:44Z", "type": "commit"}]}