{"pr_number": 1177, "pr_title": "BlockPos mappings", "pr_createdAt": "2020-03-12T15:10:32Z", "pr_url": "https://github.com/FabricMC/yarn/pull/1177", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAwNjQ3MA==", "url": "https://github.com/FabricMC/yarn/pull/1177#discussion_r392006470", "bodyText": "I think a better name is iterateOutwardsManhattan, which makes it very clear what it does.", "author": "Runemoro", "createdAt": "2020-03-13T02:59:28Z", "path": "mappings/net/minecraft/util/math/BlockPos.mapping", "diffHunk": "@@ -69,28 +69,89 @@ CLASS net/minecraft/class_2338 net/minecraft/util/math/BlockPos\n \tMETHOD method_10093 offset (Lnet/minecraft/class_2350;)Lnet/minecraft/class_2338;\n \t\tARG 1 direction\n \tMETHOD method_10094 iterate (IIIIII)Ljava/lang/Iterable;\n+\t\tARG 0 startX\n+\t\tARG 1 startY\n+\t\tARG 2 startZ\n+\t\tARG 3 endX\n+\t\tARG 4 endY\n+\t\tARG 5 endZ\n \tMETHOD method_10095 north ()Lnet/minecraft/class_2338;\n \tMETHOD method_10096 add (JIII)J\n \t\tARG 0 value\n \t\tARG 2 x\n \t\tARG 3 y\n \t\tARG 4 z\n \tMETHOD method_10097 iterate (Lnet/minecraft/class_2338;Lnet/minecraft/class_2338;)Ljava/lang/Iterable;\n-\t\tARG 0 pos1\n-\t\tARG 1 pos2\n+\t\tARG 0 start\n+\t\tARG 1 end\n \tMETHOD method_17962 stream (IIIIII)Ljava/util/stream/Stream;\n+\t\tARG 0 startX\n+\t\tARG 1 startY\n+\t\tARG 2 startZ\n+\t\tARG 3 endX\n+\t\tARG 4 endY\n+\t\tARG 5 endZ\n \tMETHOD method_19438 deserialize (Lcom/mojang/datafixers/Dynamic;)Lnet/minecraft/class_2338;\n \t\tARG 0 dynamic\n \tMETHOD method_20437 stream (Lnet/minecraft/class_2338;Lnet/minecraft/class_2338;)Ljava/util/stream/Stream;\n-\t\tARG 0 pos1\n-\t\tARG 1 pos2\n+\t\tARG 0 start\n+\t\tARG 1 end\n \tMETHOD method_23627 stream (Lnet/minecraft/class_3341;)Ljava/util/stream/Stream;\n \t\tARG 0 box\n \tMETHOD method_25503 mutableCopy ()Lnet/minecraft/class_2338$class_2339;\n+\tMETHOD method_25996 manhattanIterate (Lnet/minecraft/class_2338;III)Ljava/lang/Iterable;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAwOTc5OQ==", "url": "https://github.com/FabricMC/yarn/pull/1177#discussion_r392009799", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tMETHOD method_25996 manhattanIterate (Lnet/minecraft/class_2338;III)Ljava/lang/Iterable;\n          \n          \n            \n            \tMETHOD method_25996 iterateOutwards (Lnet/minecraft/class_2338;III)Ljava/lang/Iterable;", "author": "liach", "createdAt": "2020-03-13T03:08:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAwNjQ3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAwNzQ3OA==", "url": "https://github.com/FabricMC/yarn/pull/1177#discussion_r392007478", "bodyText": "streamOutwardsManhattan", "author": "Runemoro", "createdAt": "2020-03-13T03:01:14Z", "path": "mappings/net/minecraft/util/math/BlockPos.mapping", "diffHunk": "@@ -69,28 +69,89 @@ CLASS net/minecraft/class_2338 net/minecraft/util/math/BlockPos\n \tMETHOD method_10093 offset (Lnet/minecraft/class_2350;)Lnet/minecraft/class_2338;\n \t\tARG 1 direction\n \tMETHOD method_10094 iterate (IIIIII)Ljava/lang/Iterable;\n+\t\tARG 0 startX\n+\t\tARG 1 startY\n+\t\tARG 2 startZ\n+\t\tARG 3 endX\n+\t\tARG 4 endY\n+\t\tARG 5 endZ\n \tMETHOD method_10095 north ()Lnet/minecraft/class_2338;\n \tMETHOD method_10096 add (JIII)J\n \t\tARG 0 value\n \t\tARG 2 x\n \t\tARG 3 y\n \t\tARG 4 z\n \tMETHOD method_10097 iterate (Lnet/minecraft/class_2338;Lnet/minecraft/class_2338;)Ljava/lang/Iterable;\n-\t\tARG 0 pos1\n-\t\tARG 1 pos2\n+\t\tARG 0 start\n+\t\tARG 1 end\n \tMETHOD method_17962 stream (IIIIII)Ljava/util/stream/Stream;\n+\t\tARG 0 startX\n+\t\tARG 1 startY\n+\t\tARG 2 startZ\n+\t\tARG 3 endX\n+\t\tARG 4 endY\n+\t\tARG 5 endZ\n \tMETHOD method_19438 deserialize (Lcom/mojang/datafixers/Dynamic;)Lnet/minecraft/class_2338;\n \t\tARG 0 dynamic\n \tMETHOD method_20437 stream (Lnet/minecraft/class_2338;Lnet/minecraft/class_2338;)Ljava/util/stream/Stream;\n-\t\tARG 0 pos1\n-\t\tARG 1 pos2\n+\t\tARG 0 start\n+\t\tARG 1 end\n \tMETHOD method_23627 stream (Lnet/minecraft/class_3341;)Ljava/util/stream/Stream;\n \t\tARG 0 box\n \tMETHOD method_25503 mutableCopy ()Lnet/minecraft/class_2338$class_2339;\n+\tMETHOD method_25996 manhattanIterate (Lnet/minecraft/class_2338;III)Ljava/lang/Iterable;\n+\t\tCOMMENT Iterates block positions around the {@code center}. The iteration order\n+\t\tCOMMENT is mainly based on the manhattan distance of the position from the\n+\t\tCOMMENT center.\n+\t\tCOMMENT\n+\t\tCOMMENT <p>For the same manhattan distance, the positions are iterated by y\n+\t\tCOMMENT offset, from negative to positive. For the same y offset, the positions\n+\t\tCOMMENT are iterated by x offset, from negative to positive. For the two\n+\t\tCOMMENT positions with the same x and y offsets and the same manhattan distance,\n+\t\tCOMMENT the one with a positive z offset is visited first before the one with a\n+\t\tCOMMENT negative z offset.\n+\t\tARG 0 center\n+\t\t\tCOMMENT the center of iteration\n+\t\tARG 1 xRadius\n+\t\t\tCOMMENT the maximum x difference for iteration\n+\t\tARG 2 yRadius\n+\t\t\tCOMMENT the maximum y difference for iteration\n+\t\tARG 3 zRadius\n+\t\t\tCOMMENT the maximum z difference for iteration\n+\tMETHOD method_25997 findClosest (Lnet/minecraft/class_2338;IILjava/util/function/Predicate;)Ljava/util/Optional;\n+\t\tARG 0 pos\n+\t\tARG 1 horizontalRange\n+\t\tARG 2 verticalRange\n+\t\tARG 3 condition\n+\tMETHOD method_25998 manhattanStream (Lnet/minecraft/class_2338;III)Ljava/util/stream/Stream;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAwOTc1Mw==", "url": "https://github.com/FabricMC/yarn/pull/1177#discussion_r392009753", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tMETHOD method_25998 manhattanStream (Lnet/minecraft/class_2338;III)Ljava/util/stream/Stream;\n          \n          \n            \n            \tMETHOD method_25998 streamOutwards (Lnet/minecraft/class_2338;III)Ljava/util/stream/Stream;", "author": "liach", "createdAt": "2020-03-13T03:08:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAwNzQ3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAwODIwNA==", "url": "https://github.com/FabricMC/yarn/pull/1177#discussion_r392008204", "bodyText": "move can be understood as moving to the given possition. offset or shift would be clearer.", "author": "Runemoro", "createdAt": "2020-03-13T03:02:27Z", "path": "mappings/net/minecraft/util/math/BlockPos.mapping", "diffHunk": "@@ -69,28 +69,89 @@ CLASS net/minecraft/class_2338 net/minecraft/util/math/BlockPos\n \tMETHOD method_10093 offset (Lnet/minecraft/class_2350;)Lnet/minecraft/class_2338;\n \t\tARG 1 direction\n \tMETHOD method_10094 iterate (IIIIII)Ljava/lang/Iterable;\n+\t\tARG 0 startX\n+\t\tARG 1 startY\n+\t\tARG 2 startZ\n+\t\tARG 3 endX\n+\t\tARG 4 endY\n+\t\tARG 5 endZ\n \tMETHOD method_10095 north ()Lnet/minecraft/class_2338;\n \tMETHOD method_10096 add (JIII)J\n \t\tARG 0 value\n \t\tARG 2 x\n \t\tARG 3 y\n \t\tARG 4 z\n \tMETHOD method_10097 iterate (Lnet/minecraft/class_2338;Lnet/minecraft/class_2338;)Ljava/lang/Iterable;\n-\t\tARG 0 pos1\n-\t\tARG 1 pos2\n+\t\tARG 0 start\n+\t\tARG 1 end\n \tMETHOD method_17962 stream (IIIIII)Ljava/util/stream/Stream;\n+\t\tARG 0 startX\n+\t\tARG 1 startY\n+\t\tARG 2 startZ\n+\t\tARG 3 endX\n+\t\tARG 4 endY\n+\t\tARG 5 endZ\n \tMETHOD method_19438 deserialize (Lcom/mojang/datafixers/Dynamic;)Lnet/minecraft/class_2338;\n \t\tARG 0 dynamic\n \tMETHOD method_20437 stream (Lnet/minecraft/class_2338;Lnet/minecraft/class_2338;)Ljava/util/stream/Stream;\n-\t\tARG 0 pos1\n-\t\tARG 1 pos2\n+\t\tARG 0 start\n+\t\tARG 1 end\n \tMETHOD method_23627 stream (Lnet/minecraft/class_3341;)Ljava/util/stream/Stream;\n \t\tARG 0 box\n \tMETHOD method_25503 mutableCopy ()Lnet/minecraft/class_2338$class_2339;\n+\tMETHOD method_25996 manhattanIterate (Lnet/minecraft/class_2338;III)Ljava/lang/Iterable;\n+\t\tCOMMENT Iterates block positions around the {@code center}. The iteration order\n+\t\tCOMMENT is mainly based on the manhattan distance of the position from the\n+\t\tCOMMENT center.\n+\t\tCOMMENT\n+\t\tCOMMENT <p>For the same manhattan distance, the positions are iterated by y\n+\t\tCOMMENT offset, from negative to positive. For the same y offset, the positions\n+\t\tCOMMENT are iterated by x offset, from negative to positive. For the two\n+\t\tCOMMENT positions with the same x and y offsets and the same manhattan distance,\n+\t\tCOMMENT the one with a positive z offset is visited first before the one with a\n+\t\tCOMMENT negative z offset.\n+\t\tARG 0 center\n+\t\t\tCOMMENT the center of iteration\n+\t\tARG 1 xRadius\n+\t\t\tCOMMENT the maximum x difference for iteration\n+\t\tARG 2 yRadius\n+\t\t\tCOMMENT the maximum y difference for iteration\n+\t\tARG 3 zRadius\n+\t\t\tCOMMENT the maximum z difference for iteration\n+\tMETHOD method_25997 findClosest (Lnet/minecraft/class_2338;IILjava/util/function/Predicate;)Ljava/util/Optional;\n+\t\tARG 0 pos\n+\t\tARG 1 horizontalRange\n+\t\tARG 2 verticalRange\n+\t\tARG 3 condition\n+\tMETHOD method_25998 manhattanStream (Lnet/minecraft/class_2338;III)Ljava/util/stream/Stream;\n+\t\tARG 0 center\n+\t\tARG 1 maxX\n+\t\tARG 2 maxY\n+\t\tARG 3 maxZ\n+\tCLASS 1\n+\t\tFIELD field_23094 maxDistance I\n+\t\tFIELD field_23095 maxX I\n+\t\tFIELD field_23096 maxY I\n+\t\tFIELD field_23097 maxZ I\n+\t\tFIELD field_23098 center Lnet/minecraft/class_2338;\n+\t\tFIELD field_23099 manhattanDistance I\n+\t\tFIELD field_23100 limitX I\n+\t\tFIELD field_23101 limitY I\n+\t\tFIELD field_23102 dx I\n+\t\tFIELD field_23103 dy I\n+\t\tFIELD field_23104 pendingOpposite Lnet/minecraft/class_2338;\n+\tCLASS 2\n+\t\tFIELD field_23105 size I\n+\t\tFIELD field_23106 sizeX I\n+\t\tFIELD field_23107 sizeY I\n+\t\tFIELD field_23108 startX I\n+\t\tFIELD field_23109 startY I\n+\t\tFIELD field_23110 startZ I\n+\t\tFIELD field_23111 index I\n \tCLASS class_2339 Mutable\n-\t\tMETHOD method_10098 setOffset (Lnet/minecraft/class_2350;)Lnet/minecraft/class_2338$class_2339;\n+\t\tMETHOD method_10098 move (Lnet/minecraft/class_2350;)Lnet/minecraft/class_2338$class_2339;\n \t\t\tARG 1 direction\n-\t\tMETHOD method_10100 setOffset (III)Lnet/minecraft/class_2338$class_2339;\n+\t\tMETHOD method_10100 move (III)Lnet/minecraft/class_2338$class_2339;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAwOTcwNg==", "url": "https://github.com/FabricMC/yarn/pull/1177#discussion_r392009706", "bodyText": "It is moving by the given parameters. moveTo would be understand as set instead.", "author": "liach", "createdAt": "2020-03-13T03:08:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAwODIwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAxMTgzNQ==", "url": "https://github.com/FabricMC/yarn/pull/1177#discussion_r392011835", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tARG 1 x\n          \n          \n            \n            \t\t\tARG 2 y\n          \n          \n            \n            \t\t\tARG 3 z\n          \n          \n            \n            \t\t\tARG 1 dx\n          \n          \n            \n            \t\t\tARG 2 dy\n          \n          \n            \n            \t\t\tARG 3 dz", "author": "liach", "createdAt": "2020-03-13T03:18:43Z", "path": "mappings/net/minecraft/util/math/BlockPos.mapping", "diffHunk": "@@ -69,28 +69,89 @@ CLASS net/minecraft/class_2338 net/minecraft/util/math/BlockPos\n \tMETHOD method_10093 offset (Lnet/minecraft/class_2350;)Lnet/minecraft/class_2338;\n \t\tARG 1 direction\n \tMETHOD method_10094 iterate (IIIIII)Ljava/lang/Iterable;\n+\t\tARG 0 startX\n+\t\tARG 1 startY\n+\t\tARG 2 startZ\n+\t\tARG 3 endX\n+\t\tARG 4 endY\n+\t\tARG 5 endZ\n \tMETHOD method_10095 north ()Lnet/minecraft/class_2338;\n \tMETHOD method_10096 add (JIII)J\n \t\tARG 0 value\n \t\tARG 2 x\n \t\tARG 3 y\n \t\tARG 4 z\n \tMETHOD method_10097 iterate (Lnet/minecraft/class_2338;Lnet/minecraft/class_2338;)Ljava/lang/Iterable;\n-\t\tARG 0 pos1\n-\t\tARG 1 pos2\n+\t\tARG 0 start\n+\t\tARG 1 end\n \tMETHOD method_17962 stream (IIIIII)Ljava/util/stream/Stream;\n+\t\tARG 0 startX\n+\t\tARG 1 startY\n+\t\tARG 2 startZ\n+\t\tARG 3 endX\n+\t\tARG 4 endY\n+\t\tARG 5 endZ\n \tMETHOD method_19438 deserialize (Lcom/mojang/datafixers/Dynamic;)Lnet/minecraft/class_2338;\n \t\tARG 0 dynamic\n \tMETHOD method_20437 stream (Lnet/minecraft/class_2338;Lnet/minecraft/class_2338;)Ljava/util/stream/Stream;\n-\t\tARG 0 pos1\n-\t\tARG 1 pos2\n+\t\tARG 0 start\n+\t\tARG 1 end\n \tMETHOD method_23627 stream (Lnet/minecraft/class_3341;)Ljava/util/stream/Stream;\n \t\tARG 0 box\n \tMETHOD method_25503 mutableCopy ()Lnet/minecraft/class_2338$class_2339;\n+\tMETHOD method_25996 iterateOutwards (Lnet/minecraft/class_2338;III)Ljava/lang/Iterable;\n+\t\tCOMMENT Iterates block positions around the {@code center}. The iteration order\n+\t\tCOMMENT is mainly based on the manhattan distance of the position from the\n+\t\tCOMMENT center.\n+\t\tCOMMENT\n+\t\tCOMMENT <p>For the same manhattan distance, the positions are iterated by y\n+\t\tCOMMENT offset, from negative to positive. For the same y offset, the positions\n+\t\tCOMMENT are iterated by x offset, from negative to positive. For the two\n+\t\tCOMMENT positions with the same x and y offsets and the same manhattan distance,\n+\t\tCOMMENT the one with a positive z offset is visited first before the one with a\n+\t\tCOMMENT negative z offset.\n+\t\tARG 0 center\n+\t\t\tCOMMENT the center of iteration\n+\t\tARG 1 xRadius\n+\t\t\tCOMMENT the maximum x difference for iteration\n+\t\tARG 2 yRadius\n+\t\t\tCOMMENT the maximum y difference for iteration\n+\t\tARG 3 zRadius\n+\t\t\tCOMMENT the maximum z difference for iteration\n+\tMETHOD method_25997 findClosest (Lnet/minecraft/class_2338;IILjava/util/function/Predicate;)Ljava/util/Optional;\n+\t\tARG 0 pos\n+\t\tARG 1 horizontalRange\n+\t\tARG 2 verticalRange\n+\t\tARG 3 condition\n+\tMETHOD method_25998 streamOutwards (Lnet/minecraft/class_2338;III)Ljava/util/stream/Stream;\n+\t\tARG 0 center\n+\t\tARG 1 maxX\n+\t\tARG 2 maxY\n+\t\tARG 3 maxZ\n+\tCLASS 1\n+\t\tFIELD field_23094 maxDistance I\n+\t\tFIELD field_23095 maxX I\n+\t\tFIELD field_23096 maxY I\n+\t\tFIELD field_23097 maxZ I\n+\t\tFIELD field_23098 center Lnet/minecraft/class_2338;\n+\t\tFIELD field_23099 manhattanDistance I\n+\t\tFIELD field_23100 limitX I\n+\t\tFIELD field_23101 limitY I\n+\t\tFIELD field_23102 dx I\n+\t\tFIELD field_23103 dy I\n+\t\tFIELD field_23104 pendingOpposite Lnet/minecraft/class_2338;\n+\tCLASS 2\n+\t\tFIELD field_23105 size I\n+\t\tFIELD field_23106 sizeX I\n+\t\tFIELD field_23107 sizeY I\n+\t\tFIELD field_23108 startX I\n+\t\tFIELD field_23109 startY I\n+\t\tFIELD field_23110 startZ I\n+\t\tFIELD field_23111 index I\n \tCLASS class_2339 Mutable\n-\t\tMETHOD method_10098 setOffset (Lnet/minecraft/class_2350;)Lnet/minecraft/class_2338$class_2339;\n+\t\tMETHOD method_10098 move (Lnet/minecraft/class_2350;)Lnet/minecraft/class_2338$class_2339;\n \t\t\tARG 1 direction\n-\t\tMETHOD method_10100 setOffset (III)Lnet/minecraft/class_2338$class_2339;\n+\t\tMETHOD method_10100 move (III)Lnet/minecraft/class_2338$class_2339;\n \t\t\tARG 1 x\n \t\t\tARG 2 y\n \t\t\tARG 3 z", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7500370b0b38327fd2a2e0b446b3c23f2320b8e6", "url": "https://github.com/FabricMC/yarn/commit/7500370b0b38327fd2a2e0b446b3c23f2320b8e6", "message": "BlockPos mappings\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2020-03-14T01:58:37Z", "type": "commit"}, {"oid": "791fc75dea4f2d77c09c09182abd472eb7572efb", "url": "https://github.com/FabricMC/yarn/commit/791fc75dea4f2d77c09c09182abd472eb7572efb", "message": "iterate/stream manhattan -> iterate/stream outwards", "committedDate": "2020-03-14T01:58:37Z", "type": "commit"}, {"oid": "f1d55641c68850ee71a8c519131764eeb0fdee7e", "url": "https://github.com/FabricMC/yarn/commit/f1d55641c68850ee71a8c519131764eeb0fdee7e", "message": "Update mappings/net/minecraft/util/math/BlockPos.mapping", "committedDate": "2020-03-14T01:58:37Z", "type": "commit"}, {"oid": "f1d55641c68850ee71a8c519131764eeb0fdee7e", "url": "https://github.com/FabricMC/yarn/commit/f1d55641c68850ee71a8c519131764eeb0fdee7e", "message": "Update mappings/net/minecraft/util/math/BlockPos.mapping", "committedDate": "2020-03-14T01:58:37Z", "type": "forcePushed"}, {"oid": "65a27a2073b16c6439f234931441e4c35228ca35", "url": "https://github.com/FabricMC/yarn/commit/65a27a2073b16c6439f234931441e4c35228ca35", "message": "Comments on block pos\n\nSigned-off-by: liach <liach@users.noreply.github.com>", "committedDate": "2020-03-14T02:25:23Z", "type": "commit"}]}