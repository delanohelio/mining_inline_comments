{"pr_number": 5837, "pr_title": "[2.19.x] DDF-96 Start with default value in result forms", "pr_createdAt": "2020-02-14T18:09:17Z", "pr_url": "https://github.com/codice/ddf/pull/5837", "timeline": [{"oid": "47b2bda6ef7ecaf1b38dcec48d2988f473e3daa4", "url": "https://github.com/codice/ddf/commit/47b2bda6ef7ecaf1b38dcec48d2988f473e3daa4", "message": "DDF-96 Start with default value in attribute forms", "committedDate": "2020-02-14T18:08:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY0NDY0OQ==", "url": "https://github.com/codice/ddf/pull/5837#discussion_r379644649", "bodyText": "Just curious, what value is shown if allowedValues[0] is false?", "author": "mojogitoverhere", "createdAt": "2020-02-14T21:07:30Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/result-form/result-form.view.js", "diffHunk": "@@ -53,24 +53,28 @@ module.exports = Marionette.LayoutView.extend({\n   },\n   setupAttributeSpecific() {\n     let excludedList = metacardDefinitions.getMetacardStartingTypes()\n+    const allowedValues = _.filter(\n+      metacardDefinitions.sortedMetacardTypes,\n+      type => !metacardDefinitions.isHiddenTypeExceptThumbnail(type.id)\n+    )\n+      .filter(type => !properties.isHidden(type.id))\n+      .filter(type => !excludedList.hasOwnProperty(type.id))\n+      .map(metacardType => ({\n+        label: metacardType.alias || metacardType.id,\n+        value: metacardType.id,\n+      }))\n     this.basicAttributeSpecific.show(\n       new PropertyView({\n         model: new Property({\n           enumFiltering: true,\n           showValidationIssues: true,\n           enumMulti: true,\n-          enum: _.filter(\n-            metacardDefinitions.sortedMetacardTypes,\n-            type => !metacardDefinitions.isHiddenTypeExceptThumbnail(type.id)\n-          )\n-            .filter(type => !properties.isHidden(type.id))\n-            .filter(type => !excludedList.hasOwnProperty(type.id))\n-            .map(metacardType => ({\n-              label: metacardType.alias || metacardType.id,\n-              value: metacardType.id,\n-            })),\n+          enum: allowedValues,\n           values: this.model.get('descriptors'),\n-          value: [this.model.get('descriptors')],\n+          value:\n+            [this.model.get('descriptors')].size > 0\n+              ? [this.model.get('descriptors')]\n+              : [[allowedValues[0] && allowedValues[0].label]],", "originalCommit": "47b2bda6ef7ecaf1b38dcec48d2988f473e3daa4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NzI2NQ==", "url": "https://github.com/codice/ddf/pull/5837#discussion_r379667265", "bodyText": "Nothing - which makes sense, since there would be nothing in the dropdown. Also, you can't submit the form in that case.", "author": "aj-brooks", "createdAt": "2020-02-14T22:08:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY0NDY0OQ=="}], "type": "inlineReview"}]}