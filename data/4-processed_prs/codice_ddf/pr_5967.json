{"pr_number": 5967, "pr_title": "[2.19.x] DDF-UI-153 readonly result forms", "pr_createdAt": "2020-04-08T14:24:49Z", "pr_url": "https://github.com/codice/ddf/pull/5967", "timeline": [{"oid": "7dc6fc48caacce2cad0f3b465268578061a68c21", "url": "https://github.com/codice/ddf/commit/7dc6fc48caacce2cad0f3b465268578061a68c21", "message": "DDF-UI-153 use readonly property", "committedDate": "2020-04-02T18:28:29Z", "type": "commit"}, {"oid": "de1d1d3ec58fc1bc811997304db6dc35c2521839", "url": "https://github.com/codice/ddf/commit/de1d1d3ec58fc1bc811997304db6dc35c2521839", "message": "DDF-UI-153 handle system forms", "committedDate": "2020-04-06T16:35:46Z", "type": "commit"}, {"oid": "717267870e26af40db00af30761c28de5742f125", "url": "https://github.com/codice/ddf/commit/717267870e26af40db00af30761c28de5742f125", "message": "DDF-UI-153 hide action buttons if read only", "committedDate": "2020-04-08T20:30:03Z", "type": "commit"}, {"oid": "0112ca208be357cbf3065db0404900045d069f96", "url": "https://github.com/codice/ddf/commit/0112ca208be357cbf3065db0404900045d069f96", "message": "DDF-UI-153 remove unnecessary code", "committedDate": "2020-04-08T20:41:28Z", "type": "commit"}, {"oid": "a3e12dd64446e504e04141dc07b599a387055fe7", "url": "https://github.com/codice/ddf/commit/a3e12dd64446e504e04141dc07b599a387055fe7", "message": "DDF-UI-153 rename for consistency", "committedDate": "2020-04-10T16:07:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcyNDIyNg==", "url": "https://github.com/codice/ddf/pull/5967#discussion_r407724226", "bodyText": "consider moving || this.model.get('createdBy') === 'system' into canWrite", "author": "rymach", "createdAt": "2020-04-13T21:12:20Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/result-form/result-forms.view.js", "diffHunk": "@@ -18,28 +18,16 @@ const lightboxResultInstance = require('../lightbox/result/lightbox.result.view.\n const lightboxInstance = lightboxResultInstance.generateNewLightbox()\n const QueryResult = require('./result-form.view.js')\n const user = require('../singletons/user-instance')\n-const announcement = require('../announcement')\n \n module.exports = SearchFormViews.extend({\n   initialize() {\n     SearchFormViews.prototype.initialize.call(this)\n   },\n   changeView() {\n-    if (!user.canWrite(this.model)) {\n-      announcement.announce(\n-        {\n-          title: 'Error',\n-          message:\n-            'You have read-only permission on result form ' +\n-            this.model.get('title') +\n-            '.',\n-          type: 'error',\n-        },\n-        3000\n-      )\n-      return\n-    }\n-\n+    this.model.set({\n+      readOnly:\n+        !user.canWrite(this.model) || this.model.get('createdBy') === 'system',", "originalCommit": "a3e12dd64446e504e04141dc07b599a387055fe7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "74627508cd9c221a32d5a1766b203da29914140a", "url": "https://github.com/codice/ddf/commit/74627508cd9c221a32d5a1766b203da29914140a", "message": "DDF-UI-153 move system logic into canWrite", "committedDate": "2020-04-14T13:24:15Z", "type": "commit"}, {"oid": "8ac77b3697a755753691fd52604b0f2632229b0b", "url": "https://github.com/codice/ddf/commit/8ac77b3697a755753691fd52604b0f2632229b0b", "message": "DDF-UI-153 formatting", "committedDate": "2020-04-14T13:41:47Z", "type": "commit"}]}