{"pr_number": 6413, "pr_title": "[2.26.x] Skip all itests for OWASP scan and only run aggregate goal for CI", "pr_createdAt": "2020-11-10T22:02:10Z", "pr_url": "https://github.com/codice/ddf/pull/6413", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzNjg1NQ==", "url": "https://github.com/codice/ddf/pull/6413#discussion_r520936855", "bodyText": "We can get by now without skipping all ITs and it will pass since we are using a settings file in right location. \ud83d\udc4d", "author": "shaundmorris", "createdAt": "2020-11-10T23:21:12Z", "path": "Jenkinsfile", "diffHunk": "@@ -69,14 +69,14 @@ pipeline {\n                 // -DskipITs is temporary to skip all the tests that were failing at the time. See https://github.com/codice/ddf/issues/5777\n                 withMaven(maven: 'maven-latest', globalMavenSettingsConfig: 'default-global-settings', mavenSettingsConfig: 'codice-maven-settings', mavenOpts: '${LARGE_MVN_OPTS} ${LINUX_MVN_RANDOM}') {\n                     sh 'mvn install -B -DskipStatic=true -DskipTests=true $DISABLE_DOWNLOAD_PROGRESS_OPTS'\n-                    sh 'mvn clean install -B -DskipITs -pl !$ITESTS -Dgib.enabled=true -Dgib.referenceBranch=/refs/remotes/origin/$CHANGE_TARGET $DISABLE_DOWNLOAD_PROGRESS_OPTS'\n+                    sh 'mvn clean install -B -P !itests -Dgib.enabled=true -Dgib.referenceBranch=/refs/remotes/origin/$CHANGE_TARGET $DISABLE_DOWNLOAD_PROGRESS_OPTS'", "originalCommit": "38ce26ea9157088e08ed0a2ebe21211ee3421ea7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzNzE5MQ==", "url": "https://github.com/codice/ddf/pull/6413#discussion_r520937191", "bodyText": "This should be fine. At one point we considered splitting core and itests into separate stages so that we could track stability between the set of tests a little easier.", "author": "shaundmorris", "createdAt": "2020-11-10T23:22:11Z", "path": "Jenkinsfile", "diffHunk": "@@ -100,7 +100,7 @@ pipeline {\n                 withMaven(maven: 'maven-latest', globalMavenSettingsConfig: 'default-global-settings', mavenSettingsConfig: 'codice-maven-settings', mavenOpts: '${LARGE_MVN_OPTS} ${LINUX_MVN_RANDOM}') {\n                     sh '''\n                         unset JAVA_TOOL_OPTIONS\n-                        mvn install -B -pl $ITESTS -nsu $DISABLE_DOWNLOAD_PROGRESS_OPTS\n+                        mvn install -B -pl $ITESTS,!$ITCORE -amd -nsu $DISABLE_DOWNLOAD_PROGRESS_OPTS", "originalCommit": "38ce26ea9157088e08ed0a2ebe21211ee3421ea7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk0MTI2Nw==", "url": "https://github.com/codice/ddf/pull/6413#discussion_r520941267", "bodyText": "Oh thanks for pointing that out. I copied these changes from master, where the stages are separate. But that must have been changed after the 2.26.x branch was made, because they're all run in one step here.\nI'll need to correct this since $ITCORE isn't even defined in this Jenkinsfile", "author": "SmithJosh", "createdAt": "2020-11-10T23:33:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzNzE5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk0MTg1OQ==", "url": "https://github.com/codice/ddf/pull/6413#discussion_r520941859", "bodyText": "Oh yeah good call. I totally missed it wasn't defined here, but we would have figured that out fast :-)", "author": "shaundmorris", "createdAt": "2020-11-10T23:34:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzNzE5MQ=="}], "type": "inlineReview"}, {"oid": "5322f5537ddecdcdd844019aaaa9b3542a0c61f8", "url": "https://github.com/codice/ddf/commit/5322f5537ddecdcdd844019aaaa9b3542a0c61f8", "message": "Skip all itests for OWASP scan and only run aggregate goal for CI", "committedDate": "2020-12-17T17:43:31Z", "type": "commit"}, {"oid": "b78a68dbca97bfd6f2938915fa62078562e7736b", "url": "https://github.com/codice/ddf/commit/b78a68dbca97bfd6f2938915fa62078562e7736b", "message": "Fix itests Jenkins build stage", "committedDate": "2020-12-17T17:43:31Z", "type": "commit"}, {"oid": "b78a68dbca97bfd6f2938915fa62078562e7736b", "url": "https://github.com/codice/ddf/commit/b78a68dbca97bfd6f2938915fa62078562e7736b", "message": "Fix itests Jenkins build stage", "committedDate": "2020-12-17T17:43:31Z", "type": "forcePushed"}]}