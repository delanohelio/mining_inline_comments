{"pr_number": 5861, "pr_title": "[2.16.x] DDF-5946 Subject identity fix", "pr_createdAt": "2020-02-27T18:45:15Z", "pr_url": "https://github.com/codice/ddf/pull/5861", "timeline": [{"oid": "2f67110efd32cde6a0b59ffee91e383f6f3f344f", "url": "https://github.com/codice/ddf/commit/2f67110efd32cde6a0b59ffee91e383f6f3f344f", "message": "DDF-5946 Use unique id for metacard owner and permissions", "committedDate": "2020-04-13T19:46:48Z", "type": "commit"}, {"oid": "4995bdb7eb315b4c5063fd7351f3e39fe6b176b6", "url": "https://github.com/codice/ddf/commit/4995bdb7eb315b4c5063fd7351f3e39fe6b176b6", "message": "DDF-5946 Remove guest claims before selecting subject identifier", "committedDate": "2020-04-13T19:47:05Z", "type": "commit"}, {"oid": "4995bdb7eb315b4c5063fd7351f3e39fe6b176b6", "url": "https://github.com/codice/ddf/commit/4995bdb7eb315b4c5063fd7351f3e39fe6b176b6", "message": "DDF-5946 Remove guest claims before selecting subject identifier", "committedDate": "2020-04-13T19:47:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQyNzM2NQ==", "url": "https://github.com/codice/ddf/pull/5861#discussion_r412427365", "bodyText": "\u2753 Did you mean to remove this?", "author": "bakejeyner", "createdAt": "2020-04-21T19:21:02Z", "path": "platform/security/sts/security-sts-guestclaimshandler/pom.xml", "diffHunk": "@@ -53,7 +53,7 @@\n                     <instructions>\n                         <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>\n                         <Embed-Dependency>httpclient,httpcore</Embed-Dependency>\n-                        <Export-Package />\n+<!--                        <Export-Package />-->", "originalCommit": "4995bdb7eb315b4c5063fd7351f3e39fe6b176b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3ODYzNA==", "url": "https://github.com/codice/ddf/pull/5861#discussion_r412478634", "bodyText": "Yep, removed", "author": "SmithJosh", "createdAt": "2020-04-21T20:44:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQyNzM2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQzMDczOQ==", "url": "https://github.com/codice/ddf/pull/5861#discussion_r412430739", "bodyText": "\u270f\ufe0f I was a little confused by what the getSubjectAttribute method is doing. It might be useful to rename that method to something like getSubjectIdentityAttribute.", "author": "bakejeyner", "createdAt": "2020-04-21T19:26:09Z", "path": "platform/security/core/security-core-services/src/main/java/ddf/security/impl/SubjectIdentityImpl.java", "diffHunk": "@@ -34,9 +41,21 @@\n    */\n   @Override\n   public String getUniqueIdentifier(Subject subject) {\n-    Optional<String> owner = getSubjectAttribute(subject).stream().findFirst();\n-    if (owner.isPresent()) {\n-      return owner.get();\n+    SortedSet<String> subjectAttribute = getSubjectAttribute(subject);", "originalCommit": "4995bdb7eb315b4c5063fd7351f3e39fe6b176b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3OTE3MQ==", "url": "https://github.com/codice/ddf/pull/5861#discussion_r412479171", "bodyText": "I don't disagree, but it's like this in the later DDF versions too, so I'm going to keep it as-is for consistency", "author": "SmithJosh", "createdAt": "2020-04-21T20:45:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQzMDczOQ=="}], "type": "inlineReview"}, {"oid": "86d61434299477bdda9195e2a5634b872218aa48", "url": "https://github.com/codice/ddf/commit/86d61434299477bdda9195e2a5634b872218aa48", "message": "DDF-5946 Remove commented line", "committedDate": "2020-04-21T20:43:52Z", "type": "commit"}]}