{"pr_number": 6010, "pr_title": "Enable longitude wrapping on the indexed Solr geo field", "pr_createdAt": "2020-04-21T23:25:32Z", "pr_url": "https://github.com/codice/ddf/pull/6010", "timeline": [{"oid": "526f8f281272c068fb04694cf4c281e53250b330", "url": "https://github.com/codice/ddf/commit/526f8f281272c068fb04694cf4c281e53250b330", "message": "Enable longitude wrapping on the indexed Solr geo field\n\nRunning a DWITHIN query (i.e., a buffered geometry) near the\nantimeridian often results in a Solr error because the resulting\ngeometry contains points outside the valid longitude range of [-180,180].\nThe SolrFilterDelegate uses JTS to calculate the buffered geometry but\ndoes not enforce the longitude range on the result so it is passed to\nSolr with out-of-range values. Enabling normWrapLongitude means that\nSolr will wrap longitudes outside of the range into it.", "committedDate": "2020-04-21T22:20:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjU2MzgxNA==", "url": "https://github.com/codice/ddf/pull/6010#discussion_r412563814", "bodyText": "\u270f\ufe0f Looks like this option has been Deprecated for 4 years but I do not seen an alternative way to enable it.\nhttps://github.com/locationtech/spatial4j/blob/236b633/src/main/java/org/locationtech/spatial4j/context/SpatialContext.java#L151-L152", "author": "pklinef", "createdAt": "2020-04-21T23:36:47Z", "path": "platform/solr/solr-schema/src/main/resources/solr/conf/schema.xml", "diffHunk": "@@ -119,7 +119,8 @@\n                distanceUnits=\"degrees\"\n                format=\"WKT\"\n                autoIndex=\"true\"\n-               allowMultiOverlap=\"true\" />\n+               allowMultiOverlap=\"true\"\n+               normWrapLongitude=\"true\" />", "originalCommit": "526f8f281272c068fb04694cf4c281e53250b330", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}