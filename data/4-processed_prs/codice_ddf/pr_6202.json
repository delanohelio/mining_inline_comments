{"pr_number": 6202, "pr_title": "[2.19.x] DDF-UI-294 G-8763 G-8787 fix Unable to remove results filters", "pr_createdAt": "2020-07-29T23:58:48Z", "pr_url": "https://github.com/codice/ddf/pull/6202", "timeline": [{"oid": "6b4627fb02bcb7b1b766dc7c78b84096776525b6", "url": "https://github.com/codice/ddf/commit/6b4627fb02bcb7b1b766dc7c78b84096776525b6", "message": "DDF-UI-294 G-8763 fix Unable to remove results filters", "committedDate": "2020-07-30T19:39:52Z", "type": "commit"}, {"oid": "6b4627fb02bcb7b1b766dc7c78b84096776525b6", "url": "https://github.com/codice/ddf/commit/6b4627fb02bcb7b1b766dc7c78b84096776525b6", "message": "DDF-UI-294 G-8763 fix Unable to remove results filters", "committedDate": "2020-07-30T19:39:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzMzIyOQ==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r464433229", "bodyText": "can we verify that the verification stuff still works? i know it calls this function to show those toast error messages for anyGeo", "author": "cassandrabailey293", "createdAt": "2020-08-03T14:01:58Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/result-filter/result-filter.view.js", "diffHunk": "@@ -64,7 +63,7 @@ module.exports = Marionette.LayoutView.extend({\n     this.handleFilter()\n   },\n   getFilter() {\n-    return this.editorProperties.currentView.transformToCql()\n+    return this.editorProperties.currentView.getFilters()", "originalCommit": "6b4627fb02bcb7b1b766dc7c78b84096776525b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ4MDYzNg==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r464480636", "bodyText": "The inline errors are showing, but it doesn't seem to be preventing the save for invalid geos. But it doesn't seem to be happening on 2.19.x either, was it previously preventing the save?", "author": "andrewzimmer", "createdAt": "2020-08-03T15:16:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzMzIyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ4MjM1MQ==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r464482351", "bodyText": "by the \"save\" do you mean when you try to run the search? or something different? we were preventing it there, i don't recall if we were preventing it in the form editors is that's what you mean", "author": "cassandrabailey293", "createdAt": "2020-08-03T15:19:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzMzIyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ4ODA5Ng==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r464488096", "bodyText": "This is for the result-filter component which only has the save or remove options, you can currently save it with an invalid geo", "author": "andrewzimmer", "createdAt": "2020-08-03T15:28:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzMzIyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUwNDc4MQ==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r464504781", "bodyText": "got it added", "author": "andrewzimmer", "createdAt": "2020-08-03T15:55:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQzMzIyOQ=="}], "type": "inlineReview"}, {"oid": "c959fd645a207b60dc97d60be3a0367ecd65549c", "url": "https://github.com/codice/ddf/commit/c959fd645a207b60dc97d60be3a0367ecd65549c", "message": "DDF-UI-294 prevent saving invlaid geo", "committedDate": "2020-08-03T15:54:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0MjA2MQ==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r464642061", "bodyText": "this is weird; we convert it and convert it again?", "author": "bdeining", "createdAt": "2020-08-03T20:23:07Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/visualization/maps/map.view.js", "diffHunk": "@@ -459,7 +459,12 @@ const View = Marionette.LayoutView.extend({\n       .get('preferences')\n       .get('resultFilter')\n     if (resultFilter) {\n-      this.handleFilter(CQLUtils.transformCQLToFilter(resultFilter), '#c89600')\n+      this.handleFilter(\n+        CQLUtils.transformCQLToFilter(", "originalCommit": "c959fd645a207b60dc97d60be3a0367ecd65549c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0MzMyMA==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r464643320", "bodyText": "see these comments #5436 (comment)", "author": "andrewzimmer", "createdAt": "2020-08-03T20:25:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0MjA2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIzMjA5MQ==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r465232091", "bodyText": "Might be good to add a comment summarizing the previous discussion", "author": "mojogitoverhere", "createdAt": "2020-08-04T18:01:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0MjA2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIzMTA5NQ==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r465231095", "bodyText": "Looks like this isn't used anywhere. Is it still needed?", "author": "mojogitoverhere", "createdAt": "2020-08-04T18:00:06Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/filter-builder/filter-builder.view.js", "diffHunk": "@@ -183,6 +183,9 @@ module.exports = Marionette.LayoutView.extend({\n     this.filterOperator.currentView.turnOffEditing()\n     this.filterContents.currentView.turnOffEditing()\n   },\n+  turnOffNesting: function() {", "originalCommit": "c959fd645a207b60dc97d60be3a0367ecd65549c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIzMzY1Mw==", "url": "https://github.com/codice/ddf/pull/6202#discussion_r465233653", "bodyText": "its currently being used here https://github.com/codice/ddf/pull/6202/files#diff-1c0b76b4e9e8b174dea0eae50b692807L63", "author": "andrewzimmer", "createdAt": "2020-08-04T18:04:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIzMTA5NQ=="}], "type": "inlineReview"}]}