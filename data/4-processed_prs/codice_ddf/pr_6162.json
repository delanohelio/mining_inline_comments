{"pr_number": 6162, "pr_title": "[2.19.x] DDF-UI-261 Add control to add a new visual tab from the tabs similar to a browser", "pr_createdAt": "2020-07-07T15:03:10Z", "pr_url": "https://github.com/codice/ddf/pull/6162", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkyMjY2NA==", "url": "https://github.com/codice/ddf/pull/6162#discussion_r458922664", "bodyText": "\u2753 Not sure if it matters or not, but are there any problems with rebinding these functions on every itemCreated / itemDestroyed event?", "author": "mojogitoverhere", "createdAt": "2020-07-22T16:27:09Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/golden-layout/golden-layout.view.js", "diffHunk": "@@ -241,6 +237,14 @@ module.exports = Marionette.LayoutView.extend({\n       'initialised',\n       this.handleGoldenLayoutInitialised.bind(this)\n     )\n+    this.goldenLayout.on(\n+      'itemCreated',\n+      this.handleGoldenLayoutTabCreated.bind(this)", "originalCommit": "41c061bc2e2c451883fca00da1df81dbbcf6491e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkyNzEwOQ==", "url": "https://github.com/codice/ddf/pull/6162#discussion_r458927109", "bodyText": "\u2753 Just curious, why do we need to manually calculate the tab widths and remove / re-add the add visualization button when a tab is updated?", "author": "mojogitoverhere", "createdAt": "2020-07-22T16:32:16Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/golden-layout/golden-layout.view.js", "diffHunk": "@@ -263,15 +267,58 @@ module.exports = Marionette.LayoutView.extend({\n     this.$el.toggleClass('is-maximised', isMaximised(this.goldenLayout.root))\n   },\n   detectIfGoldenLayoutEmpty() {\n-    this.$el.toggleClass(\n-      'is-empty',\n-      this.goldenLayout.root.contentItems.length === 0\n-    )\n+    const isEmpty = this.goldenLayout.root.contentItems.length === 0\n+    this.$el.toggleClass('is-empty', isEmpty)\n+    if (isEmpty) {\n+      this.addEmptyVisualizationTab()\n+    }\n   },\n   handleGoldenLayoutInitialised() {\n     this.detectIfGoldenLayoutMaximised()\n     this.detectIfGoldenLayoutEmpty()\n   },\n+  handleGoldenLayoutTabCreated() {\n+    this.handleTabUpdate(1)\n+  },\n+  handleGoldenLayoutTabDestroyed() {\n+    this.handleTabUpdate(-1)\n+  },\n+  handleTabUpdate(i) {\n+    if (\n+      this.goldenLayout.root.contentItems.length > 0 &&\n+      this.goldenLayout.root.contentItems[0].header\n+    ) {\n+      const items = this.goldenLayout.root.contentItems[0].header.tabs.length\n+      const width =\n+        (this.goldenLayout.container.find('.lm_tabs').width() / items) *\n+        (items + i)\n+      this.addVisualizationTab(width)\n+    }\n+  },\n+  addVisualizationTab(width) {", "originalCommit": "41c061bc2e2c451883fca00da1df81dbbcf6491e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTAzOTI4Ng==", "url": "https://github.com/codice/ddf/pull/6162#discussion_r459039286", "bodyText": "Thought this was necessary because of the way golden-layout was rendering their tabs, but looking at it again I realized I was overcomplicating the issue. Styling has been updating and it is no longer manually doing this", "author": "andrewzimmer", "createdAt": "2020-07-22T19:42:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODkyNzEwOQ=="}], "type": "inlineReview"}, {"oid": "5529eec4e14b4a3b88362299bfbd03f471d9d267", "url": "https://github.com/codice/ddf/commit/5529eec4e14b4a3b88362299bfbd03f471d9d267", "message": "DDF-UI-261 Add control to add a new visual tab from the tabs similar to a browser", "committedDate": "2020-07-22T22:17:01Z", "type": "commit"}, {"oid": "f2566774fd4579fa1671d1a84210ec177b7bcf22", "url": "https://github.com/codice/ddf/commit/f2566774fd4579fa1671d1a84210ec177b7bcf22", "message": "DDF-UI-261 fix name", "committedDate": "2020-07-22T22:17:01Z", "type": "commit"}, {"oid": "7166ab9c072d176ea5821d5cf92a62890395d745", "url": "https://github.com/codice/ddf/commit/7166ab9c072d176ea5821d5cf92a62890395d745", "message": "DDF-UI-261 fix everything", "committedDate": "2020-07-22T22:17:01Z", "type": "commit"}, {"oid": "27f928012f717e2e5816474c3b49366bb36f24c1", "url": "https://github.com/codice/ddf/commit/27f928012f717e2e5816474c3b49366bb36f24c1", "message": "DDF-UI-261 fix empty add", "committedDate": "2020-07-22T22:17:01Z", "type": "commit"}, {"oid": "97b1ea49a0075fc673e94c10ace821f49f63c582", "url": "https://github.com/codice/ddf/commit/97b1ea49a0075fc673e94c10ace821f49f63c582", "message": "DDF-UI-261 fix issues", "committedDate": "2020-07-27T19:11:02Z", "type": "commit"}, {"oid": "97b1ea49a0075fc673e94c10ace821f49f63c582", "url": "https://github.com/codice/ddf/commit/97b1ea49a0075fc673e94c10ace821f49f63c582", "message": "DDF-UI-261 fix issues", "committedDate": "2020-07-27T19:11:02Z", "type": "forcePushed"}]}