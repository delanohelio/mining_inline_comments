{"pr_number": 5883, "pr_title": "BR-101 Add error trapping for SonarCloud stage", "pr_createdAt": "2020-03-05T19:52:13Z", "pr_url": "https://github.com/codice/ddf/pull/5883", "timeline": [{"oid": "e681ed838a9098f62d4f2332b810e6d5e1a73a39", "url": "https://github.com/codice/ddf/commit/e681ed838a9098f62d4f2332b810e6d5e1a73a39", "message": "BR-101 Add error trapping for SonarCloud stage", "committedDate": "2020-03-05T15:24:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUyODM4NA==", "url": "https://github.com/codice/ddf/pull/5883#discussion_r388528384", "bodyText": "\u2754 Do you think it is worth a comment here on why we are adding this? Basically we are seeing the stage fail when trying to upload the analysis.", "author": "shaundmorris", "createdAt": "2020-03-05T19:55:45Z", "path": "Jenkinsfile", "diffHunk": "@@ -166,10 +166,12 @@ pipeline {\n                 SONAR_TOKEN = credentials('sonarqube-token')\n             }\n             steps {\n-                // -DskipITs is temporary to skip all the tests that were failing at the time. See https://github.com/codice/ddf/issues/5777\n-                withMaven(maven: 'M35', jdk: 'jdk8-latest', globalMavenSettingsConfig: 'default-global-settings', mavenSettingsConfig: 'codice-maven-settings', mavenOpts: '${LARGE_MVN_OPTS} ${LINUX_MVN_RANDOM}') {\n-                    script {\n-                        sh 'mvn -q -B -DskipITs -Dcheckstyle.skip=true org.jacoco:jacoco-maven-plugin:prepare-agent sonar:sonar -Dsonar.host.url=https://sonarcloud.io -Dsonar.login=$SONAR_TOKEN  -Dsonar.organization=codice -Dsonar.projectKey=ddf -Dsonar.exclusions=${COVERAGE_EXCLUSIONS} -pl !$DOCS,!$ITESTS $DISABLE_DOWNLOAD_PROGRESS_OPTS'\n+                catchError(buildResult: 'SUCCESS', stageResult: 'FAILURE') {", "originalCommit": "e681ed838a9098f62d4f2332b810e6d5e1a73a39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUzNDI4Ng==", "url": "https://github.com/codice/ddf/pull/5883#discussion_r388534286", "bodyText": "\u2754 Wouldn't null be better here, if the build is marked unstable in an earlier stage catchError will fail because it can't set the buildResult higher than what it was before catchError.", "author": "AdamBurstynski", "createdAt": "2020-03-05T20:07:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUyODM4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUzNTYwMg==", "url": "https://github.com/codice/ddf/pull/5883#discussion_r388535602", "bodyText": "Hmm, didn't think about that. Good point. Wasn't sure if it would override a previous stage buildResult. That wouldn't be ideal either.", "author": "shaundmorris", "createdAt": "2020-03-05T20:10:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUyODM4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODU5MzEwOA==", "url": "https://github.com/codice/ddf/pull/5883#discussion_r388593108", "bodyText": "comment added for clarity\nstageResult changed to null, should buildResult be changed to null as well?", "author": "TonyMorrison", "createdAt": "2020-03-05T22:01:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUyODM4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgwNjQwOA==", "url": "https://github.com/codice/ddf/pull/5883#discussion_r389806408", "bodyText": "made buildResult null and stageResult 'FAILURE'", "author": "TonyMorrison", "createdAt": "2020-03-09T16:27:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUyODM4NA=="}], "type": "inlineReview"}, {"oid": "4e5b455732220fbbfe206188338b85417bd90b7e", "url": "https://github.com/codice/ddf/commit/4e5b455732220fbbfe206188338b85417bd90b7e", "message": "BR-101 Add error trapping for SonarCloud stage", "committedDate": "2020-03-05T21:57:33Z", "type": "commit"}, {"oid": "7769648b4413a497646141d39b7ff6e0f8cd9af2", "url": "https://github.com/codice/ddf/commit/7769648b4413a497646141d39b7ff6e0f8cd9af2", "message": "Add error trapping for SonarCloud stage", "committedDate": "2020-03-09T16:24:28Z", "type": "commit"}]}