{"pr_number": 5957, "pr_title": "[2.19.x] DDF-UI-145 default result form", "pr_createdAt": "2020-03-31T18:11:27Z", "pr_url": "https://github.com/codice/ddf/pull/5957", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE1ODkyNg==", "url": "https://github.com/codice/ddf/pull/5957#discussion_r401158926", "bodyText": "you will need to toggle this class https://github.com/codice/ddf/pull/5957/files#diff-1af92a3d1da92776b5779e1e855b8c24R114 if the current result form is default, otherwise the clear default option that calls this function will never show", "author": "andrewzimmer", "createdAt": "2020-03-31T19:25:14Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/search-form-interactions/search-form-interactions.view.js", "diffHunk": "@@ -213,10 +219,16 @@ Anyone who has access to this search ${formTitleLowerCase} will subsequently los\n     )\n   },\n   handleClearDefault() {", "originalCommit": "226c242458effa64f80a218d666967bcf6b0841e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE2NjM5OQ==", "url": "https://github.com/codice/ddf/pull/5957#discussion_r401166399", "bodyText": "I think it would be simpler if we moved this to query-setting's initialize method. then we could set up the listener like\nthis.listenTo(user.getQuerySettings(),\n      'change:defaultResultFormId',\n     () => this.renderResultForms(this.resultFormCollection.filteredList)\n    )\n\nand we won't need to set the default id to the model, we could access it directly from the user QuerySettings in renderResultForms method", "author": "andrewzimmer", "createdAt": "2020-03-31T19:38:42Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/query-add/query-add.view.js", "diffHunk": "@@ -54,6 +54,11 @@ module.exports = Marionette.LayoutView.extend({\n     this.listenTo(user.getQuerySettings(), 'change:template', querySettings =>\n       this.updateCurrentQuery(querySettings)\n     )\n+    this.listenTo(", "originalCommit": "226c242458effa64f80a218d666967bcf6b0841e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI4MTUzNg==", "url": "https://github.com/codice/ddf/pull/5957#discussion_r401281536", "bodyText": "I don't think I have reference to user inside query-settings", "author": "cassandrabailey293", "createdAt": "2020-03-31T23:57:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE2NjM5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY5MTY0MA==", "url": "https://github.com/codice/ddf/pull/5957#discussion_r401691640", "bodyText": "user is a singleton instance that can be imported in query-settings just as it is here https://github.com/codice/ddf/pull/5957/files#diff-5f1ab184f26124726515c4d001db1faaR28", "author": "andrewzimmer", "createdAt": "2020-04-01T15:10:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE2NjM5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc0NDI5OA==", "url": "https://github.com/codice/ddf/pull/5957#discussion_r401744298", "bodyText": "you should be able to remove all the changes in this file, user is a single instance that is shared by all the components so we do not need to set it again.\nIn this method currentQuerySettings and user.getQuerySettings() are referencing the same model", "author": "andrewzimmer", "createdAt": "2020-04-01T16:23:35Z", "path": "ui/packages/catalog-ui-search/src/main/webapp/component/query-add/query-add.view.js", "diffHunk": "@@ -63,6 +68,11 @@ module.exports = Marionette.LayoutView.extend({\n   updateCurrentQuery(currentQuerySettings) {\n     const searchForm = new SearchForm(currentQuerySettings.get('template'))\n     const sharedAttributes = searchForm.transformToQueryStructure()\n+    if (currentQuerySettings.get('defaultResultFormId')) {", "originalCommit": "0f558b4e513b72e292bb5aef8d07d4e9ed3628cd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bab7dd6bac1785879327bbab399f6829024e21aa", "url": "https://github.com/codice/ddf/commit/bab7dd6bac1785879327bbab399f6829024e21aa", "message": "DDF-UI-145 allow setting of default result form", "committedDate": "2020-04-07T16:54:46Z", "type": "commit"}, {"oid": "92e66346ecd74c8471cda5bea6bf5463c2d6b3b4", "url": "https://github.com/codice/ddf/commit/92e66346ecd74c8471cda5bea6bf5463c2d6b3b4", "message": "DDF-UI-145 use the search form's result form first", "committedDate": "2020-04-07T16:54:47Z", "type": "commit"}, {"oid": "edae46a3fd734f5fa7fd4816a57e98d859e1a6bd", "url": "https://github.com/codice/ddf/commit/edae46a3fd734f5fa7fd4816a57e98d859e1a6bd", "message": "DDF-UI-145 update default result form on change", "committedDate": "2020-04-07T16:54:47Z", "type": "commit"}, {"oid": "1b85b832a0e7bbca1d137174aafbf686c753d91f", "url": "https://github.com/codice/ddf/commit/1b85b832a0e7bbca1d137174aafbf686c753d91f", "message": "DDF-UI-145 update view so default star appears immediately", "committedDate": "2020-04-07T16:54:48Z", "type": "commit"}, {"oid": "d744bfe50243823dbe484f654557d2e77cd0f158", "url": "https://github.com/codice/ddf/commit/d744bfe50243823dbe484f654557d2e77cd0f158", "message": "DDF-UI-145 formatting", "committedDate": "2020-04-07T16:55:30Z", "type": "commit"}, {"oid": "3f2e3c95e47ee728d559b152814041da852e52b4", "url": "https://github.com/codice/ddf/commit/3f2e3c95e47ee728d559b152814041da852e52b4", "message": "DDF-UI-145 toggle make/clear default form options", "committedDate": "2020-04-07T16:55:32Z", "type": "commit"}, {"oid": "35a0fda89a514413f461e0560c5cf92531a74283", "url": "https://github.com/codice/ddf/commit/35a0fda89a514413f461e0560c5cf92531a74283", "message": "DDF-UI-145 refactor", "committedDate": "2020-04-07T16:55:32Z", "type": "commit"}, {"oid": "f506ec45601e2fa616ebfed9fe3426302440f600", "url": "https://github.com/codice/ddf/commit/f506ec45601e2fa616ebfed9fe3426302440f600", "message": "DDF-UI-145 address comments", "committedDate": "2020-04-07T16:55:33Z", "type": "commit"}, {"oid": "07a2e60feec713cfbe4457ccb3267757ab564f1e", "url": "https://github.com/codice/ddf/commit/07a2e60feec713cfbe4457ccb3267757ab564f1e", "message": "DDF-UI-145 formatting", "committedDate": "2020-04-07T16:55:33Z", "type": "commit"}, {"oid": "07a2e60feec713cfbe4457ccb3267757ab564f1e", "url": "https://github.com/codice/ddf/commit/07a2e60feec713cfbe4457ccb3267757ab564f1e", "message": "DDF-UI-145 formatting", "committedDate": "2020-04-07T16:55:33Z", "type": "forcePushed"}, {"oid": "4c7a69ee8c83bc0ccf480fd29ef29fdcae124bbe", "url": "https://github.com/codice/ddf/commit/4c7a69ee8c83bc0ccf480fd29ef29fdcae124bbe", "message": "DDF-UI-145 use All Results if detail level is undefined", "committedDate": "2020-04-07T17:19:51Z", "type": "commit"}, {"oid": "7e1f8f6f6346f27763f8b77d59f3b7fa5c89e26b", "url": "https://github.com/codice/ddf/commit/7e1f8f6f6346f27763f8b77d59f3b7fa5c89e26b", "message": "DDF-UI-145 clear the detail level when none is specified", "committedDate": "2020-04-07T20:28:49Z", "type": "commit"}, {"oid": "13ac77387f05d3b5b151aaf8cc5f8753619379d8", "url": "https://github.com/codice/ddf/commit/13ac77387f05d3b5b151aaf8cc5f8753619379d8", "message": "DDF-UI-145 formatting", "committedDate": "2020-04-07T20:50:39Z", "type": "commit"}, {"oid": "341e4b7da86476bc9bc9e3731ec8a69e4e69e846", "url": "https://github.com/codice/ddf/commit/341e4b7da86476bc9bc9e3731ec8a69e4e69e846", "message": "DDF-UI-145 fix detail level logic", "committedDate": "2020-04-14T00:26:58Z", "type": "commit"}, {"oid": "c6a68e6e7dd7c710aee2d20514e7a63ee7894c9e", "url": "https://github.com/codice/ddf/commit/c6a68e6e7dd7c710aee2d20514e7a63ee7894c9e", "message": "DDF-UI-145 dont use default result form automatically in edited searches", "committedDate": "2020-04-14T16:18:03Z", "type": "commit"}, {"oid": "2e5cc4c901f4774e13a07ebb0dea2c13150cafd3", "url": "https://github.com/codice/ddf/commit/2e5cc4c901f4774e13a07ebb0dea2c13150cafd3", "message": "DDF-UI-145 build issue", "committedDate": "2020-04-14T22:11:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU4MDE3NQ==", "url": "https://github.com/codice/ddf/pull/5957#discussion_r408580175", "bodyText": "\u2753 Was the Jenkinsfile intentionally modified as part of a UI feature? Are we just throwing a separate fix onto this PR? I'm not picky just making sure we want to commit this. And looking for background on what it does.", "author": "Lambeaux", "createdAt": "2020-04-15T04:54:38Z", "path": "Jenkinsfile", "diffHunk": "@@ -49,7 +49,7 @@ pipeline {\n         stage('Validate Poms') {\n             steps {\n                 retry(3) {\n-                    checkout scm\n+                    checkout([$class: 'GitSCM', branches: [[name: \"refs/heads/${BRANCH_NAME}\"]], doGenerateSubmoduleConfigurations: false, extensions: [[$class: 'WipeWorkspace'], [$class: 'LocalBranch', localBranch: \"${BRANCH_NAME}\"], [$class: 'CloneOption', timeout: 30, shallow: true]], submoduleCfg: [], userRemoteConfigs: scm.userRemoteConfigs ])", "originalCommit": "2e5cc4c901f4774e13a07ebb0dea2c13150cafd3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg1MTU0Ng==", "url": "https://github.com/codice/ddf/pull/5957#discussion_r408851546", "bodyText": "There was an error when building on the CI, so the change in the Jenkinsfile was needed for it to build my PR. I believe this change still needs to be tested in Jenkins so I'm not sure if it should be included in this PR.  @TonyMorrison any thoughts?", "author": "cassandrabailey293", "createdAt": "2020-04-15T13:42:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU4MDE3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAwNDU4NQ==", "url": "https://github.com/codice/ddf/pull/5957#discussion_r409004585", "bodyText": "\ud83d\udc4d", "author": "Lambeaux", "createdAt": "2020-04-15T17:15:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODU4MDE3NQ=="}], "type": "inlineReview"}]}