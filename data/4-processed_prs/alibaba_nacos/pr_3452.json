{"pr_number": 3452, "pr_title": "[ISSUE #2858] Unified http client implementation, enhanced async request callback interface", "pr_createdAt": "2020-07-26T07:37:48Z", "pr_url": "https://github.com/alibaba/nacos/pull/3452", "timeline": [{"oid": "1841cbee8ca1d23681c5f5dacf91b8c10fa5b33d", "url": "https://github.com/alibaba/nacos/commit/1841cbee8ca1d23681c5f5dacf91b8c10fa5b33d", "message": "Enhanced callback interface for asynchronous requests", "committedDate": "2020-07-26T07:26:39Z", "type": "commit"}, {"oid": "4f1ff13f2e0b7b330c81475c457e02461e3f7995", "url": "https://github.com/alibaba/nacos/commit/4f1ff13f2e0b7b330c81475c457e02461e3f7995", "message": "change class name", "committedDate": "2020-07-26T07:31:58Z", "type": "commit"}, {"oid": "28dcbd4ef9051eee18eba0afcbe395105e3c2697", "url": "https://github.com/alibaba/nacos/commit/28dcbd4ef9051eee18eba0afcbe395105e3c2697", "message": "add license", "committedDate": "2020-07-26T07:44:07Z", "type": "commit"}, {"oid": "be03a06450abccb83af5dbbdbd06c01d8b13e918", "url": "https://github.com/alibaba/nacos/commit/be03a06450abccb83af5dbbdbd06c01d8b13e918", "message": "change class name", "committedDate": "2020-07-26T07:56:40Z", "type": "commit"}, {"oid": "c5733c5114513b01a1a1ac7704f4e923e68db74c", "url": "https://github.com/alibaba/nacos/commit/c5733c5114513b01a1a1ac7704f4e923e68db74c", "message": "comment change", "committedDate": "2020-07-26T08:06:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDYwNzA1Mg==", "url": "https://github.com/alibaba/nacos/pull/3452#discussion_r460607052", "bodyText": "Why not use interface rather than Abstract class\uff1f", "author": "KomachiSion", "createdAt": "2020-07-27T01:46:45Z", "path": "core/src/main/java/com/alibaba/nacos/core/cluster/ServerMemberManager.java", "diffHunk": "@@ -454,7 +454,7 @@ protected void executeBody() {\n             try {\n                 asyncHttpClient\n                         .post(url, Header.newInstance().addParam(Constants.NACOS_SERVER_HEADER, VersionUtils.version),\n-                                Query.EMPTY, getSelf(), reference.getType(), new Callback<String>() {\n+                                Query.EMPTY, getSelf(), reference.getType(), new AbstractCallback<String>() {", "originalCommit": "c5733c5114513b01a1a1ac7704f4e923e68db74c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDYwNzI1Mg==", "url": "https://github.com/alibaba/nacos/pull/3452#discussion_r460607252", "bodyText": "Same question as above", "author": "KomachiSion", "createdAt": "2020-07-27T01:47:44Z", "path": "core/src/main/java/com/alibaba/nacos/core/controller/NacosClusterController.java", "diffHunk": "@@ -162,7 +162,7 @@ public NacosClusterController(ServerMemberManager memberManager) {\n             final String url = HttpUtils\n                     .buildUrl(false, member.getAddress(), ApplicationUtils.getContextPath(), Commons.NACOS_CORE_CONTEXT,\n                             \"/cluster/server/leave\");\n-            asyncHttpClient.post(url, Header.EMPTY, Query.EMPTY, params, genericType.getType(), new Callback<String>() {\n+            asyncHttpClient.post(url, Header.EMPTY, Query.EMPTY, params, genericType.getType(), new AbstractCallback<String>() {", "originalCommit": "c5733c5114513b01a1a1ac7704f4e923e68db74c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDYwNzQ2OQ==", "url": "https://github.com/alibaba/nacos/pull/3452#discussion_r460607469", "bodyText": "An abstract class but without any default implement and no more abstract method?", "author": "KomachiSion", "createdAt": "2020-07-27T01:48:56Z", "path": "common/src/main/java/com/alibaba/nacos/common/http/AbstractCallback.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * Copyright 1999-2018 Alibaba Group Holding Ltd.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.alibaba.nacos.common.http;\n+\n+import com.alibaba.nacos.common.model.RestResult;\n+\n+/**\n+ * Abstract callback.\n+ *\n+ * @author mai.jh\n+ */\n+public abstract class AbstractCallback<T> implements Callback<T> {", "originalCommit": "c5733c5114513b01a1a1ac7704f4e923e68db74c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "96c7103fc86db5d009ea95922807f971b8f2882b", "url": "https://github.com/alibaba/nacos/commit/96c7103fc86db5d009ea95922807f971b8f2882b", "message": "delete AbstractCallback", "committedDate": "2020-07-27T02:48:36Z", "type": "commit"}]}