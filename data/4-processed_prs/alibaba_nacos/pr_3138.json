{"pr_number": 3138, "pr_title": "[#2979] Inline storage support importing data from external data sources", "pr_createdAt": "2020-06-21T18:57:15Z", "pr_url": "https://github.com/alibaba/nacos/pull/3138", "timeline": [{"oid": "2400dd55e3d4f8a6a9d6ab024f9fbb524194448a", "url": "https://github.com/alibaba/nacos/commit/2400dd55e3d4f8a6a9d6ab024f9fbb524194448a", "message": "feat: data import Derby, Derby export complete", "committedDate": "2020-06-06T04:38:30Z", "type": "commit"}, {"oid": "36939515951964232feebf0ab4d8518ca098cc32", "url": "https://github.com/alibaba/nacos/commit/36939515951964232feebf0ab4d8518ca098cc32", "message": "feat: external data source import is complete", "committedDate": "2020-06-06T13:16:16Z", "type": "commit"}, {"oid": "824f854bab5f2c28b155464498ad0107b1f54f6a", "url": "https://github.com/alibaba/nacos/commit/824f854bab5f2c28b155464498ad0107b1f54f6a", "message": "feat: import data to derby and derby backup finished", "committedDate": "2020-06-07T08:43:32Z", "type": "commit"}, {"oid": "a74ceb49147161d793211a2125ce1817cf908215", "url": "https://github.com/alibaba/nacos/commit/a74ceb49147161d793211a2125ce1817cf908215", "message": "refactor: merge develop", "committedDate": "2020-06-08T01:30:56Z", "type": "commit"}, {"oid": "d2c435059b13314d8a0555e6f7a3bfd40f4fb75d", "url": "https://github.com/alibaba/nacos/commit/d2c435059b13314d8a0555e6f7a3bfd40f4fb75d", "message": "refactor: merge develop", "committedDate": "2020-06-10T04:06:53Z", "type": "commit"}, {"oid": "0df6044b0f534b8d5831b7d2b8f51135f7db9411", "url": "https://github.com/alibaba/nacos/commit/0df6044b0f534b8d5831b7d2b8f51135f7db9411", "message": "fix: fixed bug where external storage mode could not find beans", "committedDate": "2020-06-10T05:54:58Z", "type": "commit"}, {"oid": "77c1f3bd83ed40d255b0ab058bc042cd41b73908", "url": "https://github.com/alibaba/nacos/commit/77c1f3bd83ed40d255b0ab058bc042cd41b73908", "message": "style: fix code style", "committedDate": "2020-06-11T01:46:36Z", "type": "commit"}, {"oid": "3b2cb6794b69c206e4a42235c70a949be409bfed", "url": "https://github.com/alibaba/nacos/commit/3b2cb6794b69c206e4a42235c70a949be409bfed", "message": "style: remove unuse code", "committedDate": "2020-06-11T05:03:56Z", "type": "commit"}, {"oid": "bc0ed7957535394279f8fe209825a9edd7aeaf3e", "url": "https://github.com/alibaba/nacos/commit/bc0ed7957535394279f8fe209825a9edd7aeaf3e", "message": "refactor: fixed configuration file information", "committedDate": "2020-06-11T08:45:52Z", "type": "commit"}, {"oid": "9585d55adccffde50385ed9af89d385ebfcd53c6", "url": "https://github.com/alibaba/nacos/commit/9585d55adccffde50385ed9af89d385ebfcd53c6", "message": "improvement: merge upstream/develop", "committedDate": "2020-06-17T07:20:06Z", "type": "commit"}, {"oid": "29df82f694c9ed80ae7e28bd7acb507386972ec7", "url": "https://github.com/alibaba/nacos/commit/29df82f694c9ed80ae7e28bd7acb507386972ec7", "message": "refactor: merge upstream develop", "committedDate": "2020-06-18T15:15:01Z", "type": "commit"}, {"oid": "78167ab1e72c3db2d2a1fa0da68caed994db6c19", "url": "https://github.com/alibaba/nacos/commit/78167ab1e72c3db2d2a1fa0da68caed994db6c19", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-06-19T03:39:46Z", "type": "commit"}, {"oid": "7915e4fc647f9861636df7b049cdcaaef930968d", "url": "https://github.com/alibaba/nacos/commit/7915e4fc647f9861636df7b049cdcaaef930968d", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-06-19T13:40:16Z", "type": "commit"}, {"oid": "43a22143190d3426e9d01c88cd2bc15814e0c388", "url": "https://github.com/alibaba/nacos/commit/43a22143190d3426e9d01c88cd2bc15814e0c388", "message": "feat: support derby import data from sql script", "committedDate": "2020-06-21T18:55:50Z", "type": "commit"}, {"oid": "ce30ec31b12d5bc20f467882243ffb1498088607", "url": "https://github.com/alibaba/nacos/commit/ce30ec31b12d5bc20f467882243ffb1498088607", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import", "committedDate": "2020-06-21T18:55:59Z", "type": "commit"}, {"oid": "7c0f291506866bf0841cd6799febef75217062f6", "url": "https://github.com/alibaba/nacos/commit/7c0f291506866bf0841cd6799febef75217062f6", "message": "style: fix code style", "committedDate": "2020-06-21T19:00:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI4MjQ1Mg==", "url": "https://github.com/alibaba/nacos/pull/3138#discussion_r443282452", "bodyText": "When the latch will count down?", "author": "KomachiSion", "createdAt": "2020-06-22T01:46:07Z", "path": "client/src/test/java/com/alibaba/nacos/client/NamingTest.java", "diffHunk": "@@ -61,7 +62,8 @@ public void testServiceList() throws Exception {\n \n         System.out.println(list);\n \n-        ThreadUtils.sleep(60_000L);\n+        CountDownLatch latch = new CountDownLatch(1);\n+        latch.await();", "originalCommit": "7c0f291506866bf0841cd6799febef75217062f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI4MzEzNQ==", "url": "https://github.com/alibaba/nacos/pull/3138#discussion_r443283135", "bodyText": "blank line between varaible.", "author": "KomachiSion", "createdAt": "2020-06-22T01:50:18Z", "path": "config/src/main/java/com/alibaba/nacos/config/server/filter/CurcuitFilter.java", "diffHunk": "@@ -53,9 +51,11 @@\n  *\n  * @author <a href=\"mailto:liaochuntao@live.com\">liaochuntao</a>\n  */\n-@SuppressWarnings(\"all\")\n public class CurcuitFilter implements Filter {\n \n+\tprivate volatile boolean isDowngrading = false;\n+\tprivate volatile boolean isOpenService = false;", "originalCommit": "7c0f291506866bf0841cd6799febef75217062f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f79f151b59f087e36b9f0a066e35fde72bee407c", "url": "https://github.com/alibaba/nacos/commit/f79f151b59f087e36b9f0a066e35fde72bee407c", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import", "committedDate": "2020-06-22T15:12:31Z", "type": "commit"}, {"oid": "78086e2295488400a70e92c3af64c2c9307626da", "url": "https://github.com/alibaba/nacos/commit/78086e2295488400a70e92c3af64c2c9307626da", "message": "fix: a way to fix the missing", "committedDate": "2020-06-23T02:53:29Z", "type": "commit"}, {"oid": "87b3bd5c2cab1381d2c8ea2be862969a65d9f466", "url": "https://github.com/alibaba/nacos/commit/87b3bd5c2cab1381d2c8ea2be862969a65d9f466", "message": "fix: fix derby data import in standalone mode", "committedDate": "2020-06-23T15:36:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYzMzM1Mw==", "url": "https://github.com/alibaba/nacos/pull/3138#discussion_r444633353", "bodyText": "Is the two method copied?", "author": "KomachiSion", "createdAt": "2020-06-24T04:09:16Z", "path": "core/src/main/java/com/alibaba/nacos/core/utils/DiskUtils.java", "diffHunk": "@@ -87,6 +90,81 @@ public static void touch(File file) throws IOException {\n         FileUtils.touch(file);\n     }\n     \n+    /**\n+     * Creates a new empty file in the specified directory, using the given\n+     * prefix and suffix strings to generate its name. The resulting\n+     * {@code Path} is associated with the same {@code FileSystem} as the given\n+     * directory.\n+     *\n+     * <p> The details as to how the name of the file is constructed is\n+     * implementation dependent and therefore not specified. Where possible\n+     * the {@code prefix} and {@code suffix} are used to construct candidate\n+     * names in the same manner as the {@link\n+     * java.io.File#createTempFile(String,String,File)} method.\n+     *\n+     *\n+     * @param   dir\n+     *          the path to directory in which to create the file\n+     * @param   prefix\n+     *          the prefix string to be used in generating the file's name;\n+     *          may be {@code null}\n+     * @param   suffix\n+     *          the suffix string to be used in generating the file's name;\n+     *          may be {@code null}, in which case \"{@code .tmp}\" is used\n+     *\n+     * @return  the path to the newly created file that did not exist before\n+     *          this method was invoked\n+     *\n+     * @throws  IllegalArgumentException\n+     *          if the prefix or suffix parameters cannot be used to generate\n+     *          a candidate file name\n+     * @throws  UnsupportedOperationException\n+     *          if the array contains an attribute that cannot be set atomically\n+     *          when creating the directory\n+     * @throws  IOException\n+     *          if an I/O error occurs or {@code dir} does not exist\n+     * @throws  SecurityException\n+     *          In the case of the default provider, and a security manager is\n+     *          installed, the {@link SecurityManager#checkWrite(String) checkWrite}\n+     *          method is invoked to check write access to the file.\n+     */\n+    public static File createTmpFile(String dir, String prefix, String suffix) throws IOException {", "originalCommit": "87b3bd5c2cab1381d2c8ea2be862969a65d9f466", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYzNDA0MA==", "url": "https://github.com/alibaba/nacos/pull/3138#discussion_r444634040", "bodyText": "No, just integrate the method into DiskUtils", "author": "chuntaojun", "createdAt": "2020-06-24T04:12:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDYzMzM1Mw=="}], "type": "inlineReview"}, {"oid": "3909d8200edf563f2864dedb0acdda531a22e7b3", "url": "https://github.com/alibaba/nacos/commit/3909d8200edf563f2864dedb0acdda531a22e7b3", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import", "committedDate": "2020-06-24T10:22:17Z", "type": "commit"}, {"oid": "f1b08ab338b7aabd7b9c1cf0317511525ca52927", "url": "https://github.com/alibaba/nacos/commit/f1b08ab338b7aabd7b9c1cf0317511525ca52927", "message": "style: fix code style", "committedDate": "2020-06-24T10:34:13Z", "type": "commit"}, {"oid": "5bc900867273ec3428f7eef20be22028ba08112f", "url": "https://github.com/alibaba/nacos/commit/5bc900867273ec3428f7eef20be22028ba08112f", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import", "committedDate": "2020-06-24T11:24:42Z", "type": "commit"}, {"oid": "37dee9813c02d645958e2ca55dfef1ffe970d2e8", "url": "https://github.com/alibaba/nacos/commit/37dee9813c02d645958e2ca55dfef1ffe970d2e8", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into feat_config_import", "committedDate": "2020-06-25T03:15:13Z", "type": "commit"}, {"oid": "c52fed2b69d59d3aa1ce0a57201bdfab58598cbe", "url": "https://github.com/alibaba/nacos/commit/c52fed2b69d59d3aa1ce0a57201bdfab58598cbe", "message": "refactor: merge upstream develop and fix code style", "committedDate": "2020-06-25T04:30:16Z", "type": "commit"}, {"oid": "4cfa53bdb3ffb8e00251cfa57ec4a47241fe3636", "url": "https://github.com/alibaba/nacos/commit/4cfa53bdb3ffb8e00251cfa57ec4a47241fe3636", "message": "test: modify ut", "committedDate": "2020-06-25T06:46:40Z", "type": "commit"}, {"oid": "1816ab0d99e60201994361ec5916fcb9ec098221", "url": "https://github.com/alibaba/nacos/commit/1816ab0d99e60201994361ec5916fcb9ec098221", "message": "style: fix code style", "committedDate": "2020-06-26T04:14:55Z", "type": "commit"}]}