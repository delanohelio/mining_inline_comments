{"pr_number": 4205, "pr_title": "Fix issue 4187", "pr_createdAt": "2020-11-11T12:18:57Z", "pr_url": "https://github.com/alibaba/nacos/pull/4205", "timeline": [{"oid": "63ac93b95eba7c641cffecdb1e9684d0621fcfed", "url": "https://github.com/alibaba/nacos/commit/63ac93b95eba7c641cffecdb1e9684d0621fcfed", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-08-21T05:27:16Z", "type": "commit"}, {"oid": "b39970a0e107371db0250992031dee9f1d040265", "url": "https://github.com/alibaba/nacos/commit/b39970a0e107371db0250992031dee9f1d040265", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-09-11T05:33:03Z", "type": "commit"}, {"oid": "9aaea7f2a01b299ffa27d9b84a115ed39748754a", "url": "https://github.com/alibaba/nacos/commit/9aaea7f2a01b299ffa27d9b84a115ed39748754a", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-09-17T14:42:57Z", "type": "commit"}, {"oid": "0ee59bb8f5f72c42cdb7f9920883b00e3fdce1f4", "url": "https://github.com/alibaba/nacos/commit/0ee59bb8f5f72c42cdb7f9920883b00e3fdce1f4", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-10-06T15:04:50Z", "type": "commit"}, {"oid": "756a0cc61103be0c9f0c1113cc8f359c8a0fa895", "url": "https://github.com/alibaba/nacos/commit/756a0cc61103be0c9f0c1113cc8f359c8a0fa895", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-10-13T12:55:17Z", "type": "commit"}, {"oid": "2f93d35340c7a5744599ceb85450f02de69245a4", "url": "https://github.com/alibaba/nacos/commit/2f93d35340c7a5744599ceb85450f02de69245a4", "message": "Merge branch 'new_develop' of https://github.com/chuntaojun/nacos into new_develop", "committedDate": "2020-10-13T12:56:11Z", "type": "commit"}, {"oid": "ba36469b4f6312835a04241cf1f6788257ce2989", "url": "https://github.com/alibaba/nacos/commit/ba36469b4f6312835a04241cf1f6788257ce2989", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-10-19T11:55:54Z", "type": "commit"}, {"oid": "c6dd4c409520b4b98f9970dfbca1d496bd5dbe83", "url": "https://github.com/alibaba/nacos/commit/c6dd4c409520b4b98f9970dfbca1d496bd5dbe83", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-10-29T16:34:56Z", "type": "commit"}, {"oid": "1d514cd960d5b84684cbf34cda2c2db3226ee9a6", "url": "https://github.com/alibaba/nacos/commit/1d514cd960d5b84684cbf34cda2c2db3226ee9a6", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-11-01T10:08:07Z", "type": "commit"}, {"oid": "1e36b81edf7a16ec7a4f1adbaa8f8843f41cd60e", "url": "https://github.com/alibaba/nacos/commit/1e36b81edf7a16ec7a4f1adbaa8f8843f41cd60e", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-11-07T12:08:18Z", "type": "commit"}, {"oid": "fcd4e22da02e644aa1e058fb7b07550b8ca81abe", "url": "https://github.com/alibaba/nacos/commit/fcd4e22da02e644aa1e058fb7b07550b8ca81abe", "message": "Merge branch 'develop' of https://github.com/alibaba/nacos into new_develop", "committedDate": "2020-11-10T06:29:22Z", "type": "commit"}, {"oid": "7fa67216920a27069192851fbe699fb4af155b70", "url": "https://github.com/alibaba/nacos/commit/7fa67216920a27069192851fbe699fb4af155b70", "message": "fix: fix issue 4187", "committedDate": "2020-11-10T19:33:54Z", "type": "commit"}, {"oid": "61ee7d90f858eb29773583d23b5bdc3cb4476023", "url": "https://github.com/alibaba/nacos/commit/61ee7d90f858eb29773583d23b5bdc3cb4476023", "message": "fix: correct faulty repair logic", "committedDate": "2020-11-11T12:13:35Z", "type": "commit"}, {"oid": "841d1e23fcd1f73f49fbca2a097cf8cd81046e3c", "url": "https://github.com/alibaba/nacos/commit/841d1e23fcd1f73f49fbca2a097cf8cd81046e3c", "message": "fix: fix merge conflict", "committedDate": "2020-11-11T12:17:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM4NjQxMA==", "url": "https://github.com/alibaba/nacos/pull/4205#discussion_r521386410", "bodyText": "\u8fd9\u4e2a\u7c7b\u597d\u591a\u51b2\u7a81\u6807\u8bb0\u9700\u8981\u89e3\u51b3\u4e0b", "author": "KeRan213539", "createdAt": "2020-11-11T14:14:52Z", "path": "core/src/test/java/com/alibaba/nacos/core/distributed/raft/JRaftServerTest.java", "diffHunk": "@@ -81,33 +81,55 @@ public void testPeerChange() {\n                 Member.builder().ip(\"127.0.0.1\").port(80).build(), Member.builder().ip(\"127.0.0.2\").port(81).build(),\n                 Member.builder().ip(\"127.0.0.3\").port(82).build());\n         server.peerChange(service, ProtocolManager.toCPMembersInfo(firstEvent));\n+<<<<<<< HEAD\n+        Assert.assertFalse(changed.get());\n+=======\n         Assert.assertTrue(changed.get());\n+>>>>>>> 3e33851d17ef504b2cd640695e7cd25089be846e\n         changed.set(false);\n         \n         Collection<Member> secondEvent = Arrays.asList(Member.builder().ip(\"1.1.1.1\").port(7848).build(),\n                 Member.builder().ip(\"127.0.0.1\").port(80).build(), Member.builder().ip(\"127.0.0.2\").port(81).build(),\n+<<<<<<< HEAD\n+                Member.builder().ip(\"127.0.0.4\").port(83).build());\n+=======\n                 Member.builder().ip(\"127.0.0.3\").port(82).build(), Member.builder().ip(\"127.0.0.4\").port(83).build());\n+>>>>>>> 3e33851d17ef504b2cd640695e7cd25089be846e\n         server.peerChange(service, ProtocolManager.toCPMembersInfo(secondEvent));\n         Assert.assertTrue(changed.get());\n         changed.set(false);\n         \n         Collection<Member> thirdEvent = Arrays.asList(Member.builder().ip(\"1.1.1.1\").port(7848).build(),\n+<<<<<<< HEAD\n+                Member.builder().ip(\"127.0.0.2\").port(81).build(),\n+=======\n                 Member.builder().ip(\"127.0.0.1\").port(80).build(), Member.builder().ip(\"127.0.0.2\").port(81).build(),\n+>>>>>>> 3e33851d17ef504b2cd640695e7cd25089be846e\n                 Member.builder().ip(\"127.0.0.5\").port(82).build());\n         server.peerChange(service, ProtocolManager.toCPMembersInfo(thirdEvent));\n         Assert.assertTrue(changed.get());\n         changed.set(false);\n         \n+<<<<<<< HEAD\n+        // remove Member.builder().ip(\"127.0.0.2\").port(81).build()\n+        Collection<Member> fourEvent = Arrays.asList(Member.builder().ip(\"1.1.1.1\").port(7848).build(),\n+                Member.builder().ip(\"127.0.0.1\").port(80).build());\n+=======", "originalCommit": "841d1e23fcd1f73f49fbca2a097cf8cd81046e3c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "66cb023d25ed8ba2fff19a300decff1529992631", "url": "https://github.com/alibaba/nacos/commit/66cb023d25ed8ba2fff19a300decff1529992631", "message": "fix: fixed unit test issues", "committedDate": "2020-11-13T14:11:57Z", "type": "commit"}]}