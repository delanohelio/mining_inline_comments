{"pr_number": 170, "pr_title": "Add the ability to search in list of String", "pr_createdAt": "2020-03-26T09:53:05Z", "pr_url": "https://github.com/eclipse/capella/pull/170", "timeline": [{"oid": "99bdb6691d78f3c3c265b26da97775d68139ed9f", "url": "https://github.com/eclipse/capella/commit/99bdb6691d78f3c3c265b26da97775d68139ed9f", "message": "Add the ability to search in list of String\n\nChange-Id: If2630ab9af762e77519dce9d2579c6ceb59bf4b3\nSigned-off-by: Tu Ton <minhtutonthat@gmail.com>", "committedDate": "2020-03-26T09:51:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1MTMxMQ==", "url": "https://github.com/eclipse/capella/pull/170#discussion_r398451311", "bodyText": "Is it necessary to add the eObj for every line, considering that we add it at line 182 if a match is found ?", "author": "sandupostaru", "createdAt": "2020-03-26T10:06:03Z", "path": "core/plugins/org.polarsys.capella.core.ui.search/src/org/polarsys/capella/core/ui/search/CapellaSearchQuery.java", "diffHunk": "@@ -147,16 +147,40 @@ private void search(Pattern pattern, Object element, IProject project) {\n     }\r\n   }\r\n \r\n+  @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\r\n   protected void searchForAttribute(Pattern pattern, IProject project, EObject eObj,\r\n       SearchForAttributeItem attributeItem) {\r\n     if (attributeItem.getAttributeFor(eObj) != null) {\r\n-      String textToSearch = attributeItem.getTextToSearch(eObj);\r\n-      if (isMatchOccurrences(pattern, textToSearch)) {\r\n-        CapellaSearchMatchEntry result = new CapellaSearchMatchEntry(eObj, textToSearch, project,\r\n+      Object textToSearch = attributeItem.getTextToSearch(eObj);\r\n+      if (textToSearch instanceof String) {\r\n+        if (isMatchOccurrences(pattern, (String) textToSearch)) {\r\n+          CapellaSearchMatchEntry result = new CapellaSearchMatchEntry(eObj, (String) textToSearch, project,\r\n+              attributeItem.getAttributeFor(eObj));\r\n+          capellaSearchResult.addMatch(result);\r\n+          capellaSearchResult.getTreeData().addElement(eObj);\r\n+        }\r\n+      } else if (textToSearch instanceof List) {\r\n+        List texts = ((List) textToSearch);\r\n+        CapellaSearchMatchEntry matchEntry = new CapellaSearchMatchEntry(eObj, null, project,\r\n             attributeItem.getAttributeFor(eObj));\r\n-        capellaSearchResult.addMatch(result);\r\n-        // use tree data if we want to display the result as a tree\r\n-        capellaSearchResult.getTreeData().addElement(eObj);\r\n+        boolean matched = false;\r\n+        for (int i = 0; i < texts.size(); i++) {\r\n+          if (texts.get(i) instanceof String) {\r\n+            String text = (String) texts.get(i);\r\n+            if (isMatchOccurrences(pattern, text)) {\r\n+              CapellaSearchMatchEntryLine entryLine = new CapellaSearchMatchEntryLine(eObj, (String) text, project,\r\n+                  matchEntry, i);\r\n+              matchEntry.getEntryLines().add(entryLine);\r\n+              capellaSearchResult.addMatch(entryLine);\r\n+              capellaSearchResult.getTreeData().addElement(eObj);\r", "originalCommit": "99bdb6691d78f3c3c265b26da97775d68139ed9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1NTQ2Nw==", "url": "https://github.com/eclipse/capella/pull/170#discussion_r398455467", "bodyText": "Nice catch. I'll remove it", "author": "minhtutonthat", "createdAt": "2020-03-26T10:12:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1MTMxMQ=="}], "type": "inlineReview"}, {"oid": "e7210021729ea07a724083c4bb510c3e7dde87a1", "url": "https://github.com/eclipse/capella/commit/e7210021729ea07a724083c4bb510c3e7dde87a1", "message": "Add the ability to search in list of String\n- Remove useless addElement to search result\n\nChange-Id: I7af7ffb971ee4c23f2c1344488ccf7e4fe2ee347\nSigned-off-by: Tu Ton <minhtutonthat@gmail.com>", "committedDate": "2020-03-26T10:14:19Z", "type": "commit"}]}