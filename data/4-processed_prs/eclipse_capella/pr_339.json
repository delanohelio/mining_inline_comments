{"pr_number": 339, "pr_title": "[566434] Always call SemanticBrowserView.setInput in UI Thread", "pr_createdAt": "2020-08-27T08:04:49Z", "pr_url": "https://github.com/eclipse/capella/pull/339", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ4NTA2Nw==", "url": "https://github.com/eclipse/capella/pull/339#discussion_r493485067", "bodyText": "I think is shouldn't be executed in async in order to have the same process as before but using the UI Thread", "author": "SteveMonnier", "createdAt": "2020-09-23T11:39:01Z", "path": "core/plugins/org.polarsys.capella.core.ui.semantic.browser/src/org/polarsys/capella/core/ui/semantic/browser/view/SemanticBrowserView.java", "diffHunk": "@@ -397,7 +399,20 @@ public void clean() {\n     // No need to set focus.\n     boolean restoreState = shouldSetFocus ? true : false;\n     shouldSetFocus = false;\n-    setInput(null);\n+\n+    // Ensure execution of setInput in UI thread.\n+    if (Display.getCurrent() == null) {\n+        EclipseUIUtil.displayAsyncExec(new Runnable() {", "originalCommit": "26645eb68e0961ca543393bb15873d6c9fc8a334", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYzMTUwNg==", "url": "https://github.com/eclipse/capella/pull/339#discussion_r504631506", "bodyText": "@lredor any thought about this?", "author": "pdulth", "createdAt": "2020-10-14T12:22:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ4NTA2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzgzOTIzNw==", "url": "https://github.com/eclipse/capella/pull/339#discussion_r507839237", "bodyText": "Oups, I missed the Steve comment. So I use async because there is no real reason to change the input in sync mode. If this method is called not in the UI thread, the UI thread is probably always in progress. Async allows to to the input refresh \"later\".", "author": "lredor", "createdAt": "2020-10-19T15:20:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQ4NTA2Nw=="}], "type": "inlineReview"}, {"oid": "28992b1115af746498f26152fac43f3404ab591c", "url": "https://github.com/eclipse/capella/commit/28992b1115af746498f26152fac43f3404ab591c", "message": "[566434] Always call SemanticBrowserView.setInput in UI Thread\n\nThis avoids potential \"Invalid thread access\".\n\nBug: 566434\nChange-Id: I842eabddab9d3cae38ef7a5f43abbf020c351541\nSigned-off-by: Laurent Redor <laurent.redor@obeo.fr>", "committedDate": "2020-10-22T08:47:33Z", "type": "commit"}, {"oid": "8f8d2079e6280c353c4f168001d0d0cab8f8d38a", "url": "https://github.com/eclipse/capella/commit/8f8d2079e6280c353c4f168001d0d0cab8f8d38a", "message": "[566434] Always call SemanticBrowserView.setInput in UI Thread\n\nThis avoids potential \"Invalid thread access\".\n\nBug: 566434\nChange-Id: I24b0a069eaada50307327026fd836c4b79ba696d\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>", "committedDate": "2020-10-22T09:27:17Z", "type": "commit"}, {"oid": "8f8d2079e6280c353c4f168001d0d0cab8f8d38a", "url": "https://github.com/eclipse/capella/commit/8f8d2079e6280c353c4f168001d0d0cab8f8d38a", "message": "[566434] Always call SemanticBrowserView.setInput in UI Thread\n\nThis avoids potential \"Invalid thread access\".\n\nBug: 566434\nChange-Id: I24b0a069eaada50307327026fd836c4b79ba696d\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>", "committedDate": "2020-10-22T09:27:17Z", "type": "forcePushed"}]}