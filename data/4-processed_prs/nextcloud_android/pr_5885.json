{"pr_number": 5885, "pr_title": "Do not run insertAllDBEntriesForSyncedFolder directly", "pr_createdAt": "2020-04-16T06:57:26Z", "pr_url": "https://github.com/nextcloud/android/pull/5885", "timeline": [{"oid": "b6cd1f703f56b996c0acf92a49c11ad9275a5c2d", "url": "https://github.com/nextcloud/android/commit/b6cd1f703f56b996c0acf92a49c11ad9275a5c2d", "message": "Do not run insertAllDBEntriesForSyncedFolder directly, but use FilesSyncJob\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-16T07:00:08Z", "type": "forcePushed"}, {"oid": "8ed170963806782e3cff7c776d42f3a18dc37fb5", "url": "https://github.com/nextcloud/android/commit/8ed170963806782e3cff7c776d42f3a18dc37fb5", "message": "Do not run insertAllDBEntriesForSyncedFolder directly, but use FilesSyncJob\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-16T09:58:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTUxODQ1OA==", "url": "https://github.com/nextcloud/android/pull/5885#discussion_r409518458", "bodyText": "@tobiasKaminsky I'm not sure what this flag is supposed to do in this context?", "author": "ezaquarii", "createdAt": "2020-04-16T12:33:00Z", "path": "src/main/java/com/owncloud/android/MainApp.java", "diffHunk": "@@ -768,15 +768,7 @@ private static void initiateExistingAutoUploadEntries(Clock clock) {\n         new Thread(() -> {\n             AppPreferences preferences = AppPreferencesImpl.fromContext(getAppContext());\n             if (!preferences.isAutoUploadInitialized()) {\n-                SyncedFolderProvider syncedFolderProvider =\n-                    new SyncedFolderProvider(MainApp.getAppContext().getContentResolver(), preferences, clock);\n-\n-                for (SyncedFolder syncedFolder : syncedFolderProvider.getSyncedFolders()) {\n-                    if (syncedFolder.isEnabled()) {\n-                        FilesSyncHelper.insertAllDBEntriesForSyncedFolder(syncedFolder, true);\n-                    }\n-                }\n-\n+                FilesSyncHelper.startFilesSyncJobNow(null);\n                 preferences.setAutoUploadInit(true);", "originalCommit": "8ed170963806782e3cff7c776d42f3a18dc37fb5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYzODE2MA==", "url": "https://github.com/nextcloud/android/pull/5885#discussion_r409638160", "bodyText": "No idea neither, but it is just c&p, so should not be problematic\u2026", "author": "tobiasKaminsky", "createdAt": "2020-04-16T15:15:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTUxODQ1OA=="}], "type": "inlineReview"}, {"oid": "e55fdd1289bc28f03f6244e9e4f910ac27a2e81c", "url": "https://github.com/nextcloud/android/commit/e55fdd1289bc28f03f6244e9e4f910ac27a2e81c", "message": "Do not run insertAllDBEntriesForSyncedFolder directly, but use FilesSyncJob\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-16T15:17:25Z", "type": "forcePushed"}, {"oid": "9345102aa0748110f9601eee8156268a1757f7e3", "url": "https://github.com/nextcloud/android/commit/9345102aa0748110f9601eee8156268a1757f7e3", "message": "Do not run insertAllDBEntriesForSyncedFolder directly, but use FilesSyncJob\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-16T21:22:19Z", "type": "forcePushed"}, {"oid": "c4a1c7ae615b306132a803e84989284b4fe94cab", "url": "https://github.com/nextcloud/android/commit/c4a1c7ae615b306132a803e84989284b4fe94cab", "message": "Do not run insertAllDBEntriesForSyncedFolder directly, but use FilesSyncJob\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-16T21:40:26Z", "type": "commit"}, {"oid": "c4a1c7ae615b306132a803e84989284b4fe94cab", "url": "https://github.com/nextcloud/android/commit/c4a1c7ae615b306132a803e84989284b4fe94cab", "message": "Do not run insertAllDBEntriesForSyncedFolder directly, but use FilesSyncJob\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-04-16T21:40:26Z", "type": "forcePushed"}]}