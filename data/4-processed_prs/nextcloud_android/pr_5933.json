{"pr_number": 5933, "pr_title": "New design (UI) - appbar color", "pr_createdAt": "2020-04-24T16:02:52Z", "pr_url": "https://github.com/nextcloud/android/pull/5933", "timeline": [{"oid": "1ec71927df6c5fa353b61e04ebdbe0ccadcdb3cc", "url": "https://github.com/nextcloud/android/commit/1ec71927df6c5fa353b61e04ebdbe0ccadcdb3cc", "message": "New color, white for light theme and grey for dark theme. New progressbar\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-23T18:30:27Z", "type": "commit"}, {"oid": "6d34e6c1f86fe0b83fb129d5b496627065c9b596", "url": "https://github.com/nextcloud/android/commit/6d34e6c1f86fe0b83fb129d5b496627065c9b596", "message": "Refactor\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-24T12:45:14Z", "type": "commit"}, {"oid": "515e551fda086e0dabdb61f472782b4e5d7f7d9b", "url": "https://github.com/nextcloud/android/commit/515e551fda086e0dabdb61f472782b4e5d7f7d9b", "message": "Merge branch 'master' into newAppBar", "committedDate": "2020-04-24T12:45:37Z", "type": "commit"}, {"oid": "2c3ebac7e421badf73390445ccc1f257422b4ac7", "url": "https://github.com/nextcloud/android/commit/2c3ebac7e421badf73390445ccc1f257422b4ac7", "message": "Change font color for darkmode and remove unused code\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-24T13:13:04Z", "type": "commit"}, {"oid": "0793808a06228dc193adff3590bef71f6f8f3aeb", "url": "https://github.com/nextcloud/android/commit/0793808a06228dc193adff3590bef71f6f8f3aeb", "message": "Refactor and fix bug\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-24T13:37:26Z", "type": "commit"}, {"oid": "1ffbb63fef9110a6456927204cb1136550c72988", "url": "https://github.com/nextcloud/android/commit/1ffbb63fef9110a6456927204cb1136550c72988", "message": "Black Status bar in light theme <23 api\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-24T13:52:06Z", "type": "commit"}, {"oid": "5581ef74604aca0b7f2cff1ef2535d82518a4178", "url": "https://github.com/nextcloud/android/commit/5581ef74604aca0b7f2cff1ef2535d82518a4178", "message": "Reformat ThemeUtils\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-24T13:53:15Z", "type": "commit"}, {"oid": "e3c9a1116713ece4e369e3ed5c89be90120df283", "url": "https://github.com/nextcloud/android/commit/e3c9a1116713ece4e369e3ed5c89be90120df283", "message": "Fix setting background if change manualy dark theme (And remove duplication)\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-24T15:08:51Z", "type": "commit"}, {"oid": "9a636005210ddff0b24716e605e6ee69807a4923", "url": "https://github.com/nextcloud/android/commit/9a636005210ddff0b24716e605e6ee69807a4923", "message": "Set color of hamburger icon\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-24T15:38:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4Mjk4MA==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r414882980", "bodyText": "While here, we could actually correct the splling so it's not wonky: isVisible.", "author": "ezaquarii", "createdAt": "2020-04-24T21:49:00Z", "path": "src/main/java/com/owncloud/android/ui/activity/ToolbarActivity.java", "diffHunk": "@@ -166,25 +160,14 @@ protected final void hideInfoBox() {\n         mInfoBox.setVisibility(View.GONE);\n     }\n \n-    /**\n-     * Change the indeterminate mode for the toolbar's progress bar.\n-     *\n-     * @param indeterminate <code>true</code> to enable the indeterminate mode\n-     */\n-    public void setIndeterminate(boolean indeterminate) {\n-        if (mProgressBar != null) {\n-            mProgressBar.setIndeterminate(indeterminate);\n-        }\n-    }\n-\n     /**\n      * Change the visibility for the toolbar's progress bar.\n      *\n-     * @param visibility visibility of the progress bar\n+     * @param isVisibility visibility of the progress bar", "originalCommit": "9a636005210ddff0b24716e605e6ee69807a4923", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk5NDk2MA==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r414994960", "bodyText": "For the next PR \ud83d\ude01", "author": "JorisBodin", "createdAt": "2020-04-25T06:28:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4Mjk4MA=="}], "type": "inlineReview"}, {"oid": "f163dcb67e72e3155dbd60824cc9108c40fd301f", "url": "https://github.com/nextcloud/android/commit/f163dcb67e72e3155dbd60824cc9108c40fd301f", "message": "Merge branch 'master' into newAppBar", "committedDate": "2020-04-27T07:11:48Z", "type": "commit"}, {"oid": "fc804bafce2301026901bd663a8cd2c2ad35aa30", "url": "https://github.com/nextcloud/android/commit/fc804bafce2301026901bd663a8cd2c2ad35aa30", "message": "Change ActionMode color\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-27T08:22:59Z", "type": "commit"}, {"oid": "59226deecbdde80c386bb7fffc57b596e824efdf", "url": "https://github.com/nextcloud/android/commit/59226deecbdde80c386bb7fffc57b596e824efdf", "message": "Improve variable name\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-27T08:24:29Z", "type": "commit"}, {"oid": "2d3048eead989781f651bb7c85ebfc24dd0a75c3", "url": "https://github.com/nextcloud/android/commit/2d3048eead989781f651bb7c85ebfc24dd0a75c3", "message": "Better item selected background color in dark mode\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-27T12:26:13Z", "type": "commit"}, {"oid": "c785c0b22d623e58cd2c662f85de56605dcee79a", "url": "https://github.com/nextcloud/android/commit/c785c0b22d623e58cd2c662f85de56605dcee79a", "message": "Merge branch 'master' into newAppBarColor\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>\n\n# Conflicts:\n#\tsrc/main/java/com/owncloud/android/ui/activity/SettingsActivity.java\n#\tsrc/main/java/com/owncloud/android/ui/activity/ToolbarActivity.java\n#\tsrc/main/java/com/owncloud/android/utils/ThemeUtils.java\n#\tsrc/main/res/values-night/colors.xml", "committedDate": "2020-04-28T13:33:22Z", "type": "commit"}, {"oid": "653984e7e1a5bd8e4d643b835094c2d278cf44c2", "url": "https://github.com/nextcloud/android/commit/653984e7e1a5bd8e4d643b835094c2d278cf44c2", "message": "Fix dark mode \"follow system\"\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-28T13:36:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3MzA5Mg==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r416673092", "bodyText": "Please remove this comment", "author": "tobiasKaminsky", "createdAt": "2020-04-28T14:45:15Z", "path": "src/main/java/com/owncloud/android/ui/activity/FileDisplayActivity.java", "diffHunk": "@@ -2227,7 +2227,7 @@ public void run() {\n                                         null\n                                 );\n \n-                                setIndeterminate(true);\n+                                showProgressBar(true);//okkk", "originalCommit": "653984e7e1a5bd8e4d643b835094c2d278cf44c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3OTA3OQ==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r416679079", "bodyText": "Oupsi \ud83d\ude48", "author": "JorisBodin", "createdAt": "2020-04-28T14:52:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3MzA5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3NTgzNA==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r416675834", "bodyText": "This one now does not use context any longer.\nPlease remove it and change doc.", "author": "tobiasKaminsky", "createdAt": "2020-04-28T14:48:32Z", "path": "src/main/java/com/owncloud/android/utils/ThemeUtils.java", "diffHunk": "@@ -224,17 +218,18 @@ public static int fontColor(Context context) {\n \n     /**\n      * Tests if light color is set\n-     * @return  true if primaryColor is lighter than MAX_LIGHTNESS\n+     *\n+     * @return true if primaryColor is lighter than MAX_LIGHTNESS\n      */\n-    public static boolean lightTheme(Context context) {\n-        int primaryColor = primaryColor(context);\n-        float[] hsl = colorToHSL(primaryColor);\n+    public static boolean lightTheme(Context context, int color) {", "originalCommit": "653984e7e1a5bd8e4d643b835094c2d278cf44c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3Njc3Ng==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r416676776", "bodyText": "Is this background?\nThen maybe appBarPrimaryBackgroundColor", "author": "tobiasKaminsky", "createdAt": "2020-04-28T14:49:40Z", "path": "src/main/java/com/owncloud/android/utils/ThemeUtils.java", "diffHunk": "@@ -244,6 +239,22 @@ public static boolean darkTheme(Context context) {\n         return hsl[INDEX_LUMINATION] <= 0.55;\n     }\n \n+    public static int primaryAppbarColor(Context context) {", "originalCommit": "653984e7e1a5bd8e4d643b835094c2d278cf44c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY4MDQzOA==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r416680438", "bodyText": "It's a point of view. But it's ok :)", "author": "JorisBodin", "createdAt": "2020-04-28T14:54:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3Njc3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3Njk2Mw==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r416676963", "bodyText": "appBarPrimaryFontColor", "author": "tobiasKaminsky", "createdAt": "2020-04-28T14:49:56Z", "path": "src/main/java/com/owncloud/android/utils/ThemeUtils.java", "diffHunk": "@@ -244,6 +239,22 @@ public static boolean darkTheme(Context context) {\n         return hsl[INDEX_LUMINATION] <= 0.55;\n     }\n \n+    public static int primaryAppbarColor(Context context) {\n+        return ContextCompat.getColor(context, R.color.appbar);\n+    }\n+\n+    public static int fontAppbarColor(Context context) {", "originalCommit": "653984e7e1a5bd8e4d643b835094c2d278cf44c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3NzEyMQ==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r416677121", "bodyText": "appBarSecondaryFontColor", "author": "tobiasKaminsky", "createdAt": "2020-04-28T14:50:08Z", "path": "src/main/java/com/owncloud/android/utils/ThemeUtils.java", "diffHunk": "@@ -244,6 +239,22 @@ public static boolean darkTheme(Context context) {\n         return hsl[INDEX_LUMINATION] <= 0.55;\n     }\n \n+    public static int primaryAppbarColor(Context context) {\n+        return ContextCompat.getColor(context, R.color.appbar);\n+    }\n+\n+    public static int fontAppbarColor(Context context) {\n+        return ContextCompat.getColor(context, R.color.fontAppbar);\n+    }\n+\n+    public static int fontSecondaryAppbar(Context context) {", "originalCommit": "653984e7e1a5bd8e4d643b835094c2d278cf44c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3NzQ0OQ==", "url": "https://github.com/nextcloud/android/pull/5933#discussion_r416677449", "bodyText": "(my idea is to first have the \"where\" and then \"what\".", "author": "tobiasKaminsky", "createdAt": "2020-04-28T14:50:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY3NzEyMQ=="}], "type": "inlineReview"}, {"oid": "121b60a17c66744f654dc8add987b822d3cb8b99", "url": "https://github.com/nextcloud/android/commit/121b60a17c66744f654dc8add987b822d3cb8b99", "message": "Improve methode name\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-28T14:57:07Z", "type": "commit"}, {"oid": "5ba9e6c1985cb4af8b9e471c2795b2f406137590", "url": "https://github.com/nextcloud/android/commit/5ba9e6c1985cb4af8b9e471c2795b2f406137590", "message": "Merge branch 'master' into newAppBarColor", "committedDate": "2020-04-28T15:33:08Z", "type": "commit"}, {"oid": "81a6ab38a9672c081a7ee9633b84bd6f3069ef6d", "url": "https://github.com/nextcloud/android/commit/81a6ab38a9672c081a7ee9633b84bd6f3069ef6d", "message": "Remove unused argument\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-04-28T15:34:02Z", "type": "commit"}, {"oid": "ff4df03919f6b4b8dd256ea91ed9beaf98f36669", "url": "https://github.com/nextcloud/android/commit/ff4df03919f6b4b8dd256ea91ed9beaf98f36669", "message": "Merge remote-tracking branch 'remotes/origin/master' into newAppBarColor", "committedDate": "2020-04-28T18:45:13Z", "type": "commit"}]}