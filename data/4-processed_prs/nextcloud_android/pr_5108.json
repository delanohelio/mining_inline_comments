{"pr_number": 5108, "pr_title": "Fix text in option menu within image preview", "pr_createdAt": "2020-01-07T09:13:46Z", "pr_url": "https://github.com/nextcloud/android/pull/5108", "timeline": [{"oid": "57b0d425b6efe68e84430f20521c71f150d54e25", "url": "https://github.com/nextcloud/android/commit/57b0d425b6efe68e84430f20521c71f150d54e25", "message": "Fix text in option menu within image preview\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-07T09:12:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY1NDE4Nw==", "url": "https://github.com/nextcloud/android/pull/5108#discussion_r363654187", "bodyText": "Issue found: Avoid instantiating new objects inside loops", "author": "nextcloud-android-bot", "createdAt": "2020-01-07T09:17:00Z", "path": "src/main/java/com/owncloud/android/ui/preview/PreviewImageFragment.java", "diffHunk": "@@ -313,16 +318,28 @@ public void onStop() {\n      * {@inheritDoc}\n      */\n     @Override\n-    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\n+    public void onCreateOptionsMenu(@NotNull Menu menu, @NotNull MenuInflater inflater) {\n         super.onCreateOptionsMenu(menu, inflater);\n         inflater.inflate(R.menu.item_file, menu);\n+\n+        int nightModeFlag = getResources().getConfiguration().uiMode & Configuration.UI_MODE_NIGHT_MASK;\n+\n+        if (Configuration.UI_MODE_NIGHT_NO == nightModeFlag) {\n+            for (int i = 0; i < menu.size(); i++) {\n+                MenuItem menuItem = menu.getItem(i);\n+\n+                SpannableString spanString = new SpannableString(menuItem.getTitle().toString());\n+                spanString.setSpan(new ForegroundColorSpan(Color.BLACK), 0, spanString.length(), 0);", "originalCommit": "57b0d425b6efe68e84430f20521c71f150d54e25", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY1NDE5Nw==", "url": "https://github.com/nextcloud/android/pull/5108#discussion_r363654197", "bodyText": "Issue found: Avoid instantiating new objects inside loops", "author": "nextcloud-android-bot", "createdAt": "2020-01-07T09:17:01Z", "path": "src/main/java/com/owncloud/android/ui/preview/PreviewImageFragment.java", "diffHunk": "@@ -313,16 +318,28 @@ public void onStop() {\n      * {@inheritDoc}\n      */\n     @Override\n-    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\n+    public void onCreateOptionsMenu(@NotNull Menu menu, @NotNull MenuInflater inflater) {\n         super.onCreateOptionsMenu(menu, inflater);\n         inflater.inflate(R.menu.item_file, menu);\n+\n+        int nightModeFlag = getResources().getConfiguration().uiMode & Configuration.UI_MODE_NIGHT_MASK;\n+\n+        if (Configuration.UI_MODE_NIGHT_NO == nightModeFlag) {\n+            for (int i = 0; i < menu.size(); i++) {\n+                MenuItem menuItem = menu.getItem(i);\n+\n+                SpannableString spanString = new SpannableString(menuItem.getTitle().toString());", "originalCommit": "57b0d425b6efe68e84430f20521c71f150d54e25", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}