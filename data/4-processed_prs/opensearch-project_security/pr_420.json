{"pr_number": 420, "pr_title": "Fix for OpenSSLTest.testNodeClientSSL failure", "pr_createdAt": "2020-04-24T05:32:57Z", "pr_url": "https://github.com/opensearch-project/security/pull/420", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY5NTE1NA==", "url": "https://github.com/opensearch-project/security/pull/420#discussion_r414695154", "bodyText": "nit: this setting seems to be repeated on line 620.", "author": "debjanibnrj", "createdAt": "2020-04-24T16:11:53Z", "path": "src/test/java/com/amazon/opendistroforelasticsearch/security/ssl/SSLTest.java", "diffHunk": "@@ -605,19 +605,23 @@ public void testNodeClientSSL() throws Exception {\n                 .build();\n \n         setupSslOnlyMode(settings);\n-        \n+\n         RestHelper rh = nonSslRestHelper();\n \n         final Settings tcSettings = Settings.builder().put(\"cluster.name\", clusterInfo.clustername).put(\"path.home\", \".\")\n                 .put(\"node.name\", \"client_node_\" + new Random().nextInt())\n                 .put(\"node.data\", false)\n                 .put(\"node.master\", false)\n                 .put(\"node.ingest\", false)\n+                .put(\"path.data\", \"./target/data/\"+clusterInfo.clustername+\"/ssl/data\")\n+                .put(\"path.logs\", \"./target/data/\"+clusterInfo.clustername+\"/ssl/logs\")\n+                .put(\"path.home\", \"./target\")\n+                .put(\"discovery.initial_state_timeout\",\"8s\")", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5a1d87fda88482bf7c15f4b793c718ba0f276f09", "url": "https://github.com/opensearch-project/security/commit/5a1d87fda88482bf7c15f4b793c718ba0f276f09", "message": "- Initialize \"path.data\", \"path.logs\" and \"path.home\" for every ES Node started during tests\n- Change \"path.data\", \"path.logs\" and \"path.home\" to use \"target/data\"", "committedDate": "2020-04-24T17:05:14Z", "type": "commit"}, {"oid": "5a1d87fda88482bf7c15f4b793c718ba0f276f09", "url": "https://github.com/opensearch-project/security/commit/5a1d87fda88482bf7c15f4b793c718ba0f276f09", "message": "- Initialize \"path.data\", \"path.logs\" and \"path.home\" for every ES Node started during tests\n- Change \"path.data\", \"path.logs\" and \"path.home\" to use \"target/data\"", "committedDate": "2020-04-24T17:05:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODY5MA==", "url": "https://github.com/opensearch-project/security/pull/420#discussion_r414848690", "bodyText": "The changes look good, but I was wandering if using prefix \"./target\" is a good idea ?\nI saw that this folder is used for the output jars during package build.\nMaybe instead we should create some temporary folders or use different prefix \"test-target\" (or anything that contains test) .\nDo we have other tests that also use \"./target\" ?", "author": "dinusX", "createdAt": "2020-04-24T20:38:03Z", "path": "src/test/java/com/amazon/opendistroforelasticsearch/security/SlowIntegrationTests.java", "diffHunk": "@@ -75,7 +75,9 @@ public void testNodeClientAllowedWithServerCertificate() throws Exception {\n                 .put(\"node.data\", false)\n                 .put(\"node.master\", false)\n                 .put(\"node.ingest\", false)\n-                .put(\"path.home\", \"/tmp\")\n+                .put(\"path.data\", \"./target/data/\" + clusterInfo.clustername + \"/cert/data\")", "originalCommit": "5a1d87fda88482bf7c15f4b793c718ba0f276f09", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg5NzcwOA==", "url": "https://github.com/opensearch-project/security/pull/420#discussion_r414897708", "bodyText": "\"target\" is the default location that maven uses for builds and temporary files including compiler output, unit test (surefire) reports, jars, and more. As jars are created from \"target/classes\" or \"target/test-classes\", there will be no conflict and no unnecessary files will be included into the target jar files.\nThe goal of the change is to use \"mvn clean\" to delete any leftover directories/files that were not cleaned/deleted during the tests.", "author": "vrozov", "createdAt": "2020-04-24T22:28:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0ODY5MA=="}], "type": "inlineReview"}]}