{"pr_number": 892, "pr_title": "Using SAML subject_key and roles_key in the HTTPSamlAuthenticator", "pr_createdAt": "2020-12-14T18:24:21Z", "pr_url": "https://github.com/opensearch-project/security/pull/892", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjY0NTUwNw==", "url": "https://github.com/opensearch-project/security/pull/892#discussion_r542645507", "bodyText": "don't we need null check/ default fall back for settings.get(\"roles_key\") same like \"subject_key\"?", "author": "hardik-k-shah", "createdAt": "2020-12-14T18:56:36Z", "path": "src/main/java/com/amazon/dlic/auth/http/saml/HTTPSamlAuthenticator.java", "diffHunk": "@@ -339,11 +339,16 @@ private Settings createJwtAuthenticatorSettings(Settings settings) {\n         settingsBuilder.put(jwtSettings);\n \n         if (jwtSettings.get(\"roles_key\") == null && settings.get(\"roles_key\") != null) {\n-            settingsBuilder.put(\"roles_key\", \"roles\");\n+            settingsBuilder.put(\"roles_key\", settings.get(\"roles_key\"));", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjY0OTcyOQ==", "url": "https://github.com/opensearch-project/security/pull/892#discussion_r542649729", "bodyText": "any other way to handle default value instead if..else.. condition?", "author": "hardik-k-shah", "createdAt": "2020-12-14T18:59:37Z", "path": "src/main/java/com/amazon/dlic/auth/http/saml/HTTPSamlAuthenticator.java", "diffHunk": "@@ -339,11 +339,16 @@ private Settings createJwtAuthenticatorSettings(Settings settings) {\n         settingsBuilder.put(jwtSettings);\n \n         if (jwtSettings.get(\"roles_key\") == null && settings.get(\"roles_key\") != null) {\n-            settingsBuilder.put(\"roles_key\", \"roles\");\n+            settingsBuilder.put(\"roles_key\", settings.get(\"roles_key\"));\n         }\n \n         if (jwtSettings.get(\"subject_key\") == null) {\n-            settingsBuilder.put(\"subject_key\", \"sub\");\n+            if (settings.get(\"subject_key\") != null) {\n+                settingsBuilder.put(\"subject_key\", settings.get(\"subject_key\"));", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc0MjU4NQ==", "url": "https://github.com/opensearch-project/security/pull/892#discussion_r542742585", "bodyText": "You can just do settings.get(\"roles_key\", \"roles\") which puts default roles is roles_key is absent", "author": "sujithvm", "createdAt": "2020-12-14T20:24:51Z", "path": "src/main/java/com/amazon/dlic/auth/http/saml/HTTPSamlAuthenticator.java", "diffHunk": "@@ -338,12 +338,12 @@ private Settings createJwtAuthenticatorSettings(Settings settings) {\n \n         settingsBuilder.put(jwtSettings);\n \n-        if (jwtSettings.get(\"roles_key\") == null && settings.get(\"roles_key\") != null) {\n-            settingsBuilder.put(\"roles_key\", \"roles\");\n+        if (jwtSettings.get(\"roles_key\") == null) {\n+            settingsBuilder.put(\"roles_key\", settings.get(\"roles_key\") !=null ? settings.get(\"roles_key\") : \"roles\");", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc1OTg2MA==", "url": "https://github.com/opensearch-project/security/pull/892#discussion_r542759860", "bodyText": "Thanks, will do", "author": "debjanibnrj", "createdAt": "2020-12-14T20:41:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc0MjU4NQ=="}], "type": "inlineReview"}, {"oid": "f38370a2c089e67344f2aed5b8c6c39ae1a4db8f", "url": "https://github.com/opensearch-project/security/commit/f38370a2c089e67344f2aed5b8c6c39ae1a4db8f", "message": "Using SAML subject_key and roles_key in the HTTPSamlAuthenticator", "committedDate": "2020-12-14T20:43:05Z", "type": "commit"}, {"oid": "f38370a2c089e67344f2aed5b8c6c39ae1a4db8f", "url": "https://github.com/opensearch-project/security/commit/f38370a2c089e67344f2aed5b8c6c39ae1a4db8f", "message": "Using SAML subject_key and roles_key in the HTTPSamlAuthenticator", "committedDate": "2020-12-14T20:43:05Z", "type": "forcePushed"}]}