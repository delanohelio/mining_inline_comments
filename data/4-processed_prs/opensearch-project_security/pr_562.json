{"pr_number": 562, "pr_title": "Backport audit logging changes for opendistro-1.4", "pr_createdAt": "2020-07-17T00:57:36Z", "pr_url": "https://github.com/opensearch-project/security/pull/562", "timeline": [{"oid": "faed5e6bb1e54e45684ac6b2ae5f1a4919edba50", "url": "https://github.com/opensearch-project/security/commit/faed5e6bb1e54e45684ac6b2ae5f1a4919edba50", "message": "Refactor WildcardMatcher (#458)\n\n* Introduce a set of classes with Wildcard interface to encapsulate string matching\n\nThis should offload optimizations and selection of strategy to the moment of\npattern creation instead of usage saving on cpu cycles.\n\nEspecially important case is detecting if a pattern is wildcard or not takes 2\nlinear passes through each string + another one to actually compare to candidate.\nBy moving the first 2 passes to construction time this effect will not propagate to\nO(N^2/N^3) algorithms down the line. The algorithms should be probably replaced as\nwell but that's a fight for another day.\n\nCo-authored-by: Dmitry Olshansky <d.olshanskiy@tinkoff.ru>\n(cherry picked from commit 6b68001dd245c4ba26617e64a5dd1799c12fbbe0)", "committedDate": "2020-07-17T00:33:53Z", "type": "commit"}, {"oid": "83beac65418654e3804daa246cbe53d860f4d6cf", "url": "https://github.com/opensearch-project/security/commit/83beac65418654e3804daa246cbe53d860f4d6cf", "message": "Remove immutable indices from compliance config (#483)\n\n* Remove immutable indices from compliance config and inject directly to the request filter\n\n(cherry picked from commit 8fad0b62ad6c7d7a0ec91145e544d19f6091a056)", "committedDate": "2020-07-17T00:34:47Z", "type": "commit"}, {"oid": "356dd0e26fd069faaf40ccedf1d2177a65c8ad70", "url": "https://github.com/opensearch-project/security/commit/356dd0e26fd069faaf40ccedf1d2177a65c8ad70", "message": "Move compliance ignore users from audit config to compliance config (#484)\n\n* Move compliance ignore users from audit config to compliance config\n\n(cherry picked from commit b7626eec5e269129c5b9455a5781e5a161b3cafe)", "committedDate": "2020-07-17T00:35:01Z", "type": "commit"}, {"oid": "b83749966f1158e65af2bd0797fe3b337b45ea10", "url": "https://github.com/opensearch-project/security/commit/b83749966f1158e65af2bd0797fe3b337b45ea10", "message": "Create indexing operation listener for every index module call (#491)\n\n* Create indexing operation listener for every index and check for dynamic compliance access\n\n(cherry picked from commit fa4a137b03281635d50e486dafaacf3b01e2b4ab)", "committedDate": "2020-07-17T00:35:15Z", "type": "commit"}, {"oid": "6f8cbb9b1202dcb57c2cc92e961ff0f19ebf7556", "url": "https://github.com/opensearch-project/security/commit/6f8cbb9b1202dcb57c2cc92e961ff0f19ebf7556", "message": "Avoid using reflection to instantiate OpenDistroSecurityFlsDlsIndexSearcherWrapper (#511)\n\n(cherry picked from commit 5819047010690da4e01450c30f9a19547807580a)", "committedDate": "2020-07-17T00:35:30Z", "type": "commit"}, {"oid": "1ebb35ead8301675cf59fcfb26f6916e119c820a", "url": "https://github.com/opensearch-project/security/commit/1ebb35ead8301675cf59fcfb26f6916e119c820a", "message": "Put if absent for documents in the security index (#402)\n\nPut if absent for security config documents in the security index\n\n(cherry picked from commit 5e4561df610528e7963b349fdab328dd883efe77)", "committedDate": "2020-07-17T00:35:39Z", "type": "commit"}, {"oid": "0d0f90d00cfe96c27d8cb0933a8e2d0ad8f2a020", "url": "https://github.com/opensearch-project/security/commit/0d0f90d00cfe96c27d8cb0933a8e2d0ad8f2a020", "message": "Refactor salt from compliance config into salt class (#506)\n\n(cherry picked from commit 2dbf4e00c17a64dd4bee7a7ac1dd5cc67907aacb)", "committedDate": "2020-07-17T00:36:57Z", "type": "commit"}, {"oid": "bf0f3f2cf793609c2f70090e58a4094ac7d39de4", "url": "https://github.com/opensearch-project/security/commit/bf0f3f2cf793609c2f70090e58a4094ac7d39de4", "message": "Remove the faulty index exists check and have more predictable behavior (#517)\n\n(cherry picked from commit 15e7d452ae198db63dda60c835f06e615c5c292c)", "committedDate": "2020-07-17T00:38:12Z", "type": "commit"}, {"oid": "e8f6ca77886323b6dfb7b3cb3186b9624cb44474", "url": "https://github.com/opensearch-project/security/commit/e8f6ca77886323b6dfb7b3cb3186b9624cb44474", "message": "Refactoring: moved getSettingAsSet() method and DEFAULT_DISABLED_CATEGORIES from AuditConfig to ConfigConstants.\n\n(cherry picked from commit d6934c67a96a4603f1a3394a7f481661d3b07d43)", "committedDate": "2020-07-17T00:38:56Z", "type": "commit"}, {"oid": "9a7d1dc1ece157c461d1f61ea2ee295c61efb0b6", "url": "https://github.com/opensearch-project/security/commit/9a7d1dc1ece157c461d1f61ea2ee295c61efb0b6", "message": "Introduced method to construct AuditCategory EnumSet from Settings\n\n(cherry picked from commit 9c668e7259ff0d475dc6085beb768f77ba576642)", "committedDate": "2020-07-17T00:38:56Z", "type": "commit"}, {"oid": "9b46cb12842c291a606a736babad942721936298", "url": "https://github.com/opensearch-project/security/commit/9b46cb12842c291a606a736babad942721936298", "message": "Use Jackson to serialize and de-serialize audit configuration (#542)\n\nCo-authored-by: Vlad Rozov <vrozov@users.noreply.github.com>\n(cherry picked from commit c6fd29a1460ec5ab348e365d04c6d8f5c8e7ade3)", "committedDate": "2020-07-17T00:38:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU3OTIyMA==", "url": "https://github.com/opensearch-project/security/pull/562#discussion_r456579220", "bodyText": "Please squash these changes to a corresponding cherry-picked commit. The PR should consist only of cherry-picked commits.", "author": "vrozov", "createdAt": "2020-07-17T17:33:01Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/security/dlic/rest/api/AuditApiAction.java", "diffHunk": "@@ -102,12 +102,6 @@\n  * [{\"op\": \"replace\", \"path\": \"/config/compliance/internal_config\", \"value\": \"true\"}]\n  */\n public class AuditApiAction extends PatchableResourceApiAction {\n-    private static final List<Route> routes = ImmutableList.of(", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b023fb8148780eb897ae1f57803532c739216acb", "url": "https://github.com/opensearch-project/security/commit/b023fb8148780eb897ae1f57803532c739216acb", "message": "Hot reloading audit configuration (#409)\n\nCo-authored-by: Vlad Rozov <vrozov@users.noreply.github.com>\n(cherry picked from commit bca8fe37b06eb8eb930321247619e5bd85b6c5c0)", "committedDate": "2020-07-18T22:41:31Z", "type": "commit"}, {"oid": "b43a9afc10d669d20e992dc1cebe1747170650ed", "url": "https://github.com/opensearch-project/security/commit/b43a9afc10d669d20e992dc1cebe1747170650ed", "message": "Support \"true\" and \"false\" String to boolean conversion in DefaultObjectMapper.getOrDefault() (#548)\n\n(cherry picked from commit 94b53f615b1ce56aaa8e04bd5dddd62a21ad8fff)", "committedDate": "2020-07-20T23:48:26Z", "type": "commit"}, {"oid": "4c2502a1f21581da40cdf021bdc6a87e07792172", "url": "https://github.com/opensearch-project/security/commit/4c2502a1f21581da40cdf021bdc6a87e07792172", "message": "Implement ability to configure readonly fields for audit configuration (#559)\n\n(cherry picked from commit 67fe5d2b28b28d28987830d4aa734c113c3425cd)", "committedDate": "2020-07-21T07:50:24Z", "type": "commit"}]}