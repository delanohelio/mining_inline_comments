{"pr_number": 193, "pr_title": "Use BASE_DIR in demo install script", "pr_createdAt": "2020-01-07T09:28:16Z", "pr_url": "https://github.com/opensearch-project/security/pull/193", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE4NzM3Mw==", "url": "https://github.com/opensearch-project/security/pull/193#discussion_r367187373", "bodyText": "@epol Thank you for your contribution.\nThese values are already set above so I was wondering if it is possible to delete these lines instead. Thanks!", "author": "sujithvm", "createdAt": "2020-01-16T01:12:01Z", "path": "tools/install_demo_configuration.sh", "diffHunk": "@@ -113,17 +113,17 @@ SUDO_CMD=\"\"\n ES_INSTALL_TYPE=\".tar.gz\"\n \n #Check if its a rpm/deb install\n-if [ -f /usr/share/elasticsearch/bin/elasticsearch ]; then\n-    ES_CONF_FILE=\"/usr/share/elasticsearch/config/elasticsearch.yml\"\n+if [ -f $BASE_DIR/bin/elasticsearch ]; then\n+    ES_CONF_FILE=\"$BASE_DIR/config/elasticsearch.yml\"\n \n     if [ ! -f \"$ES_CONF_FILE\" ]; then\n         ES_CONF_FILE=\"/etc/elasticsearch/elasticsearch.yml\"\n     fi\n \n-    ES_BIN_DIR=\"/usr/share/elasticsearch/bin\"\n-    ES_PLUGINS_DIR=\"/usr/share/elasticsearch/plugins\"\n-    ES_MODULES_DIR=\"/usr/share/elasticsearch/modules\"\n-    ES_LIB_PATH=\"/usr/share/elasticsearch/lib\"\n+    ES_BIN_DIR=\"$BASE_DIR/bin\"", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM3NTIzNw==", "url": "https://github.com/opensearch-project/security/pull/193#discussion_r367375237", "bodyText": "Thank you for your review. I'm going to write a better edit since this one may have been breaking the rpm/deb logic.\nI'll update this pull request as soon as i'm done.", "author": "epol", "createdAt": "2020-01-16T11:48:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE4NzM3Mw=="}], "type": "inlineReview"}, {"oid": "80f12d5aed8e26979abd0fe953ca60fa47f34d84", "url": "https://github.com/opensearch-project/security/commit/80f12d5aed8e26979abd0fe953ca60fa47f34d84", "message": "Fixed bad behaviour of demo install when multiple instances are present\n\nIf `/usr/share/elasticsearch/bin/elasticsearch` is present then\n`install_demo_configuration.sh` will always assume that it has been run from\na packaged version of elasticsearch. This may not be true when another instances\nis started from the tar.gz package and the security plugin is installed there.\n\nThis commit makes the install demo script check if the BASE_DIR directory is\n`/usr/share/elasticsearch` and only in this case it assumes that we are dealing\nwith a packaged installation.", "committedDate": "2020-01-16T13:37:36Z", "type": "commit"}, {"oid": "80f12d5aed8e26979abd0fe953ca60fa47f34d84", "url": "https://github.com/opensearch-project/security/commit/80f12d5aed8e26979abd0fe953ca60fa47f34d84", "message": "Fixed bad behaviour of demo install when multiple instances are present\n\nIf `/usr/share/elasticsearch/bin/elasticsearch` is present then\n`install_demo_configuration.sh` will always assume that it has been run from\na packaged version of elasticsearch. This may not be true when another instances\nis started from the tar.gz package and the security plugin is installed there.\n\nThis commit makes the install demo script check if the BASE_DIR directory is\n`/usr/share/elasticsearch` and only in this case it assumes that we are dealing\nwith a packaged installation.", "committedDate": "2020-01-16T13:37:36Z", "type": "forcePushed"}]}