{"pr_number": 2591, "pr_title": "Implementation review : Improvements for group-id interface", "pr_createdAt": "2020-02-07T10:17:46Z", "pr_url": "https://github.com/wso2/carbon-kernel/pull/2591", "timeline": [{"oid": "e05936d00bcfc09c459598ff459e75dfb33c6798", "url": "https://github.com/wso2/carbon-kernel/commit/e05936d00bcfc09c459598ff459e75dfb33c6798", "message": "Improvements for group-id methods in the UniqueIdUserStoreManager interface", "committedDate": "2020-02-05T04:35:20Z", "type": "commit"}, {"oid": "9377b2d15b5067d065036f12ab9dc390ccc725ef", "url": "https://github.com/wso2/carbon-kernel/commit/9377b2d15b5067d065036f12ab9dc390ccc725ef", "message": "Revert \"Improvements for group-id methods in the UniqueIdUserStoreManager interface\"\n\nThis reverts commit e05936d00bcfc09c459598ff459e75dfb33c6798.", "committedDate": "2020-02-05T04:41:41Z", "type": "commit"}, {"oid": "afad31c4b783c2f8eed71bb269bfc0b8c68e41b4", "url": "https://github.com/wso2/carbon-kernel/commit/afad31c4b783c2f8eed71bb269bfc0b8c68e41b4", "message": "refeactored and grouped group-id implementation methods based on user centric and group centric", "committedDate": "2020-02-05T05:08:55Z", "type": "commit"}, {"oid": "09506afcbe7da45890b0fd622e4139dcc90328f6", "url": "https://github.com/wso2/carbon-kernel/commit/09506afcbe7da45890b0fd622e4139dcc90328f6", "message": "Improved object classes with requested changes", "committedDate": "2020-02-05T05:20:17Z", "type": "commit"}, {"oid": "90b7e5a02775f9ea15212f679b77fdbca69baef2", "url": "https://github.com/wso2/carbon-kernel/commit/90b7e5a02775f9ea15212f679b77fdbca69baef2", "message": "Resolve PR comments", "committedDate": "2020-02-05T08:37:27Z", "type": "commit"}, {"oid": "ae935f580741c044d577c977155e4e49d99b7503", "url": "https://github.com/wso2/carbon-kernel/commit/ae935f580741c044d577c977155e4e49d99b7503", "message": "Added new improvements for group-id implementation", "committedDate": "2020-02-06T06:10:23Z", "type": "commit"}, {"oid": "282c759d885968f4543f4b4985c82ba40cd88203", "url": "https://github.com/wso2/carbon-kernel/commit/282c759d885968f4543f4b4985c82ba40cd88203", "message": "Resolve PR comments", "committedDate": "2020-02-06T06:45:18Z", "type": "commit"}, {"oid": "68b185ba4ff4d50b5e6b536afa0df8a6fdd96315", "url": "https://github.com/wso2/carbon-kernel/commit/68b185ba4ff4d50b5e6b536afa0df8a6fdd96315", "message": "Resolve PR comments", "committedDate": "2020-02-06T09:57:26Z", "type": "commit"}, {"oid": "7114f91f05cab641a797269a7def5892f01fa4a7", "url": "https://github.com/wso2/carbon-kernel/commit/7114f91f05cab641a797269a7def5892f01fa4a7", "message": "Merge branch '4.6.x' of https://github.com/wso2/carbon-kernel into gb1", "committedDate": "2020-02-06T10:05:56Z", "type": "commit"}, {"oid": "970c4e607df92441009bfb9686351e48142ddc4d", "url": "https://github.com/wso2/carbon-kernel/commit/970c4e607df92441009bfb9686351e48142ddc4d", "message": "Code review: Improvements for group-id implementation", "committedDate": "2020-02-07T11:05:41Z", "type": "commit"}, {"oid": "970c4e607df92441009bfb9686351e48142ddc4d", "url": "https://github.com/wso2/carbon-kernel/commit/970c4e607df92441009bfb9686351e48142ddc4d", "message": "Code review: Improvements for group-id implementation", "committedDate": "2020-02-07T11:05:41Z", "type": "forcePushed"}, {"oid": "dd8a81a027aabf8f40c9e78a1c465c505b514b53", "url": "https://github.com/wso2/carbon-kernel/commit/dd8a81a027aabf8f40c9e78a1c465c505b514b53", "message": "Added Attribute class for further clarity", "committedDate": "2020-02-10T05:54:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg5NTgyOQ==", "url": "https://github.com/wso2/carbon-kernel/pull/2591#discussion_r376895829", "bodyText": "No need to parse the whole user object. Just userIds are enough", "author": "IsuraD", "createdAt": "2020-02-10T07:13:28Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/UniqueIDUserStoreManager.java", "diffHunk": "@@ -447,36 +468,36 @@ void updateUserListOfRoleWithID(String roleName, String[] deletedUserIDs, String\n      * Add a group to the system.\n      *\n      * @param groupName   Group's display name.\n-     * @param userIDs     List of User IDs belongs to the group.\n+     * @param users       List of User IDs belongs to the group.\n      * @param permissions List of permissions of the group.\n-     * @param attributes  Group attributes values.\n+     * @param claims      List of Claims.\n      * @return created Group object.\n      * @throws UserStoreException If an error occurs while adding a group.\n      */\n-    Group addGroup(String groupName, List<String> userIDs, List<Permission> permissions,\n-                   Map<String, String> attributes) throws UserStoreException;\n+    Group addGroup(String groupName, List<User> users, List<Permission> permissions,", "originalCommit": "970c4e607df92441009bfb9686351e48142ddc4d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg5NzMyNA==", "url": "https://github.com/wso2/carbon-kernel/pull/2591#discussion_r376897324", "bodyText": "This claim object contains claim metadata. Do you need claim metadata as parameters?", "author": "IsuraD", "createdAt": "2020-02-10T07:19:19Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/UniqueIDUserStoreManager.java", "diffHunk": "@@ -447,36 +468,36 @@ void updateUserListOfRoleWithID(String roleName, String[] deletedUserIDs, String\n      * Add a group to the system.\n      *\n      * @param groupName   Group's display name.\n-     * @param userIDs     List of User IDs belongs to the group.\n+     * @param users       List of User IDs belongs to the group.\n      * @param permissions List of permissions of the group.\n-     * @param attributes  Group attributes values.\n+     * @param claims      List of Claims.\n      * @return created Group object.\n      * @throws UserStoreException If an error occurs while adding a group.\n      */\n-    Group addGroup(String groupName, List<String> userIDs, List<Permission> permissions,\n-                   Map<String, String> attributes) throws UserStoreException;\n+    Group addGroup(String groupName, List<User> users, List<Permission> permissions,\n+                   List<Claim> claims) throws UserStoreException;\n \n     /**\n      * Update group claim values.\n      *\n      * @param groupID     Group ID.\n-     * @param attributes  Map of attribute values. These values will be replaced.\n+     * @param claims      List of claims. These values will be replaced.\n      * @param permissions List of permissions.\n      * @return Updated group.\n      * @throws UserStoreException If an error occurs while updating group.\n      */\n-    Group updateGroup(String groupID, Map<String, String> attributes,\n+    Group updateGroup(String groupID, List<Claim> claims,", "originalCommit": "970c4e607df92441009bfb9686351e48142ddc4d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkwNjQzOA==", "url": "https://github.com/wso2/carbon-kernel/pull/2591#discussion_r376906438", "bodyText": "In the future we might be able to use. If we need to add any extra info in the future, no need of an API change. We can directly bind to the claim object", "author": "GDRDABARERA", "createdAt": "2020-02-10T07:51:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg5NzMyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkwNzY3NA==", "url": "https://github.com/wso2/carbon-kernel/pull/2591#discussion_r376907674", "bodyText": "I don't see any reason to parse claim metadata as parameters in the update group request. If needed we can internally retrieve the claim information using the claim API.  I think just parsing the Claim object with claim id, uir, value will be enough. (dialect if needed)", "author": "IsuraD", "createdAt": "2020-02-10T07:55:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg5NzMyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgxNTI3NA==", "url": "https://github.com/wso2/carbon-kernel/pull/2591#discussion_r378815274", "bodyText": "created new claim in the common package", "author": "GDRDABARERA", "createdAt": "2020-02-13T11:54:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg5NzMyNA=="}], "type": "inlineReview"}, {"oid": "0ff48ad54d83106ce17301fc01ba9677b046bb9b", "url": "https://github.com/wso2/carbon-kernel/commit/0ff48ad54d83106ce17301fc01ba9677b046bb9b", "message": "Resolve PR comments", "committedDate": "2020-02-10T07:54:51Z", "type": "commit"}, {"oid": "bb7b339fc0baa74b55499316f7bf55d9091a3637", "url": "https://github.com/wso2/carbon-kernel/commit/bb7b339fc0baa74b55499316f7bf55d9091a3637", "message": "Resolve PR comments", "committedDate": "2020-02-13T11:43:03Z", "type": "forcePushed"}, {"oid": "f1205dfd3ed4a4550b4a13a7c8a97fe3b41d4dac", "url": "https://github.com/wso2/carbon-kernel/commit/f1205dfd3ed4a4550b4a13a7c8a97fe3b41d4dac", "message": "Resolve PR comments", "committedDate": "2020-02-13T11:52:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgxNTU3Mg==", "url": "https://github.com/wso2/carbon-kernel/pull/2591#discussion_r378815572", "bodyText": "Add license header.", "author": "JKAUSHALYA", "createdAt": "2020-02-13T11:55:10Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/Attribute.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package org.wso2.carbon.user.core.common;", "originalCommit": "f1205dfd3ed4a4550b4a13a7c8a97fe3b41d4dac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODgxNTY1NA==", "url": "https://github.com/wso2/carbon-kernel/pull/2591#discussion_r378815654", "bodyText": "Add license header.", "author": "JKAUSHALYA", "createdAt": "2020-02-13T11:55:21Z", "path": "core/org.wso2.carbon.user.core/src/main/java/org/wso2/carbon/user/core/common/Claim.java", "diffHunk": "@@ -0,0 +1,33 @@\n+package org.wso2.carbon.user.core.common;", "originalCommit": "f1205dfd3ed4a4550b4a13a7c8a97fe3b41d4dac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d731762b6ce99137422d85425581cf4661b1d66a", "url": "https://github.com/wso2/carbon-kernel/commit/d731762b6ce99137422d85425581cf4661b1d66a", "message": "Resolve PR comments", "committedDate": "2020-02-13T11:57:26Z", "type": "commit"}, {"oid": "d731762b6ce99137422d85425581cf4661b1d66a", "url": "https://github.com/wso2/carbon-kernel/commit/d731762b6ce99137422d85425581cf4661b1d66a", "message": "Resolve PR comments", "committedDate": "2020-02-13T11:57:26Z", "type": "forcePushed"}]}