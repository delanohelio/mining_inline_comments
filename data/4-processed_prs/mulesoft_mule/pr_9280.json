{"pr_number": 9280, "pr_title": "MULE-18047: Add the component that generated a cursor provider (support/4.2.2)", "pr_createdAt": "2020-08-27T15:48:02Z", "pr_url": "https://github.com/mulesoft/mule/pull/9280", "timeline": [{"oid": "803af0fb236219671d43bc55be1b433742b44c13", "url": "https://github.com/mulesoft/mule/commit/803af0fb236219671d43bc55be1b433742b44c13", "message": "MULE-18047: Add the component that generated a cursor provider (#8679) (#9101)\n\n(cherry picked from commit faaaf99c38bedf9f49304ed7cd9014e765b444f8)\n(cherry picked from commit 6383cc2fd7713b2dff2705b7f83b3d149bf3c146)", "committedDate": "2020-08-27T15:30:50Z", "type": "commit"}, {"oid": "e585e4481353d5f1a1b2eaac573b48c721b8f8d2", "url": "https://github.com/mulesoft/mule/commit/e585e4481353d5f1a1b2eaac573b48c721b8f8d2", "message": "MULE-18634: Fix originating ComponentLocation (#9187) (#9210)\n\n(cherry picked from commit bcbae88a89a24bca533b96a1503a3b97ecc983f6)\n(cherry picked from commit 45ed738c7e8d7d86ac5521d2a29ccd46ff322b29)", "committedDate": "2020-08-27T15:32:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYxMDk3Mw==", "url": "https://github.com/mulesoft/mule/pull/9280#discussion_r478610973", "bodyText": "use a SystemProperty rule instead", "author": "elrodro83", "createdAt": "2020-08-27T18:21:54Z", "path": "core-tests/src/test/java/org/mule/runtime/core/internal/streaming/AbstractTroubleshootCursorProviderTestCase.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n+ * The software in this package is published under the terms of the CPAL v1.0\n+ * license, a copy of which has been included with this distribution in the\n+ * LICENSE.txt file.\n+ */\n+\n+package org.mule.runtime.core.internal.streaming;\n+\n+import static java.lang.System.setProperty;\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.hamcrest.CoreMatchers.notNullValue;\n+import static org.hamcrest.CoreMatchers.nullValue;\n+import static org.hamcrest.core.StringContains.containsString;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.rules.ExpectedException.none;\n+import static org.junit.runners.Parameterized.Parameter;\n+import static org.junit.runners.Parameterized.Parameters;\n+import static org.mule.runtime.api.util.MuleSystemProperties.TRACK_CURSOR_PROVIDER_CLOSE_PROPERTY;\n+import static org.mule.runtime.dsl.api.component.config.DefaultComponentLocation.fromSingleComponent;\n+\n+import org.junit.After;\n+import org.junit.Before;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.rules.ExpectedException;\n+import org.junit.runner.RunWith;\n+import org.junit.runners.Parameterized;\n+import org.mule.runtime.api.component.location.ComponentLocation;\n+import org.mule.runtime.api.streaming.CursorProvider;\n+import org.mule.tck.junit4.AbstractMuleTestCase;\n+\n+import io.qameta.allure.Description;\n+import io.qameta.allure.Issue;\n+\n+@RunWith(Parameterized.class)\n+public abstract class AbstractTroubleshootCursorProviderTestCase extends AbstractMuleTestCase {\n+\n+  @Rule\n+  public ExpectedException expectedException = none();\n+\n+  @Parameter\n+  public Boolean trackStackTrace;\n+\n+  @Parameter(1)\n+  public boolean setComponentLocation;\n+\n+  private CursorProvider cursorProvider;\n+\n+  protected ComponentLocation componentLocation;\n+\n+  @Parameters(name = \"Track StackTrace: {0}, set ComponentLocation: {1}\")\n+  public static Object[] getParameters() {\n+    return new Object[][] {\n+        {false, false},\n+        {false, true},\n+        {true, false},\n+        {true, true}\n+    };\n+  }\n+\n+  @Before\n+  public void before() throws NoSuchFieldException, IllegalAccessException {\n+    setProperty(TRACK_CURSOR_PROVIDER_CLOSE_PROPERTY, trackStackTrace.toString());", "originalCommit": "e585e4481353d5f1a1b2eaac573b48c721b8f8d2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYzNTg1Nw==", "url": "https://github.com/mulesoft/mule/pull/9280#discussion_r478635857", "bodyText": "This was an old code that wasn't removed by mistake.  The cursor provider is set with this flag when instantiated (eg https://github.com/mulesoft/mule/blob/fix/MULE-18047/core-tests/src/test/java/org/mule/runtime/core/internal/streaming/bytes/TroubleshootCursorStreamProviderTestCase.java#L53)", "author": "szaffarano", "createdAt": "2020-08-27T19:08:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYxMDk3Mw=="}], "type": "inlineReview"}, {"oid": "79a673d6efc05bb9aa5cce2db0518f5649597523", "url": "https://github.com/mulesoft/mule/commit/79a673d6efc05bb9aa5cce2db0518f5649597523", "message": "MULE-18047: remove unnecessary code", "committedDate": "2020-08-27T18:52:59Z", "type": "commit"}]}