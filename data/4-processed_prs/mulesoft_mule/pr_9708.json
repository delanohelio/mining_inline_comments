{"pr_number": 9708, "pr_title": "MULE-18860: fix flaky test (#9695)", "pr_createdAt": "2020-11-11T14:47:09Z", "pr_url": "https://github.com/mulesoft/mule/pull/9708", "timeline": [{"oid": "7e360069dc46d2ecca46ff17a7bb8176d1056056", "url": "https://github.com/mulesoft/mule/commit/7e360069dc46d2ecca46ff17a7bb8176d1056056", "message": "MULE-18860: fix flaky test (#9695)\n\n* test with flaky detector\n\n* formatter\n\n* fix flaky test\n\n(cherry picked from commit 08e1af917831bd50a07a0bb4fa2c2380b7b5180a)", "committedDate": "2020-11-11T13:50:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQyNjE3OQ==", "url": "https://github.com/mulesoft/mule/pull/9708#discussion_r521426179", "bodyText": "It's better to use a Hamcrest assertion like\nnew JUnitLambdaProbe() (() -> {\n  assertThat(iterator.hasNext(), is(false));\n  return true;\n});", "author": "szaffarano", "createdAt": "2020-11-11T15:12:16Z", "path": "modules/extensions-spring-support/src/test/java/org/mule/test/module/extension/streaming/ObjectStreamingExtensionTestCase.java", "diffHunk": "@@ -104,7 +106,9 @@ public void nonRepeatableStreamIsManaged() throws Exception {\n     assertThat(stream, is(instanceOf(ConsumerStreamingIterator.class)));\n \n     ConsumerStreamingIterator streamingIterator = (ConsumerStreamingIterator) stream;\n-    assertThat(streamingIterator.hasNext(), is(false));\n+    new PollingProber(1000, 100)\n+        .check(new JUnitLambdaProbe(() -> !streamingIterator.hasNext()));", "originalCommit": "7e360069dc46d2ecca46ff17a7bb8176d1056056", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2a40b7cb666854efbdebc1f5d5d078d4c4f93409", "url": "https://github.com/mulesoft/mule/commit/2a40b7cb666854efbdebc1f5d5d078d4c4f93409", "message": "MULE-18860: Hamcrest assertion (#9715)\n\n(cherry picked from commit 28a1007d6d1d139489eb8ad4a6e811d1a2bccb8d)", "committedDate": "2020-11-16T17:38:02Z", "type": "commit"}]}