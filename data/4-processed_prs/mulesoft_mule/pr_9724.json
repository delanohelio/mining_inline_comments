{"pr_number": 9724, "pr_title": "MULE-18985: ValueProvider and Metadata should return a failureErrorCo\u2026", "pr_createdAt": "2020-11-13T15:40:55Z", "pr_url": "https://github.com/mulesoft/mule/pull/9724", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3MjI0MA==", "url": "https://github.com/mulesoft/mule/pull/9724#discussion_r523972240", "bodyText": "shouldn't this be onComponent()? since we are resolving input metadata? I think the onKeys() should be used only when resolving metadata keys.", "author": "lucianoRM", "createdAt": "2020-11-16T08:37:47Z", "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/metadata/MetadataInputDelegate.java", "diffHunk": "@@ -136,14 +138,16 @@ NamedTypeResolver getParameterResolver(String parameterName) {\n           .withReason(NULL_TYPE_ERROR)\n           .onParameter(parameter.getName());\n       return failure(parameter.getType(), failure);\n+    } catch (ConnectionException e) {\n+      return failure(newFailure(e).withMessage(\"Failed to establish connection: \" + ExceptionUtils.getMessage(e))\n+          .withFailureCode(CONNECTION_FAILURE).onKeys());", "originalCommit": "107fe6e4850b05baa4d64bd4b1095a72e381c2b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMzNDg1OQ==", "url": "https://github.com/mulesoft/mule/pull/9724#discussion_r524334859", "bodyText": "Good catch. Yes, it should be onComponent().", "author": "gsfernandes", "createdAt": "2020-11-16T15:04:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3MjI0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3MjQ0OA==", "url": "https://github.com/mulesoft/mule/pull/9724#discussion_r523972448", "bodyText": "same here", "author": "lucianoRM", "createdAt": "2020-11-16T08:38:10Z", "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/metadata/MetadataOutputDelegate.java", "diffHunk": "@@ -140,6 +143,9 @@\n           .withReason(NULL_TYPE_ERROR)\n           .onOutputPayload();\n       return failure(output.getType(), failure);\n+    } catch (ConnectionException e) {\n+      return failure(newFailure(e).withMessage(\"Failed to establish connection: \" + ExceptionUtils.getMessage(e))\n+          .withFailureCode(CONNECTION_FAILURE).onKeys());", "originalCommit": "107fe6e4850b05baa4d64bd4b1095a72e381c2b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMzNDgzMA==", "url": "https://github.com/mulesoft/mule/pull/9724#discussion_r524334830", "bodyText": "Good catch. Yes, it should be onComponent().", "author": "gsfernandes", "createdAt": "2020-11-16T15:04:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3MjQ0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3MjUzNQ==", "url": "https://github.com/mulesoft/mule/pull/9724#discussion_r523972535", "bodyText": "and here", "author": "lucianoRM", "createdAt": "2020-11-16T08:38:18Z", "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/metadata/MetadataOutputDelegate.java", "diffHunk": "@@ -175,6 +181,9 @@\n           .withReason(NULL_TYPE_ERROR)\n           .onOutputAttributes();\n       return failure(failure);\n+    } catch (ConnectionException e) {\n+      return failure(newFailure(e).withMessage(\"Failed to establish connection: \" + ExceptionUtils.getMessage(e))\n+          .withFailureCode(CONNECTION_FAILURE).onKeys());", "originalCommit": "107fe6e4850b05baa4d64bd4b1095a72e381c2b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMzNDc5NA==", "url": "https://github.com/mulesoft/mule/pull/9724#discussion_r524334794", "bodyText": "Good catch. Yes, it should be onComponent().", "author": "gsfernandes", "createdAt": "2020-11-16T15:04:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3MjUzNQ=="}], "type": "inlineReview"}, {"oid": "b4794fe647a2804d0496f742a72813824a72fc04", "url": "https://github.com/mulesoft/mule/commit/b4794fe647a2804d0496f742a72813824a72fc04", "message": "Handle OAuth Service exceptions to propagate a CONNECTION_FAILURE error on each service", "committedDate": "2020-11-16T21:09:15Z", "type": "forcePushed"}, {"oid": "4f81332f2a5ebb4039047518112f892e92896063", "url": "https://github.com/mulesoft/mule/commit/4f81332f2a5ebb4039047518112f892e92896063", "message": "MULE-18985: ValueProvider and Metadata should return a failureErrorCode=CONNECTION_FAILURE when a connection cannot be established/created from the context", "committedDate": "2020-11-17T16:17:29Z", "type": "commit"}, {"oid": "22834bec195e0e50a4492f8bf8d2918d8c460794", "url": "https://github.com/mulesoft/mule/commit/22834bec195e0e50a4492f8bf8d2918d8c460794", "message": "PR feedback. Make connections lazy", "committedDate": "2020-11-17T16:17:29Z", "type": "commit"}, {"oid": "fc860927d20735f08ed9181008dacda917683268", "url": "https://github.com/mulesoft/mule/commit/fc860927d20735f08ed9181008dacda917683268", "message": "Handle OAuth Service exceptions to propagate a CONNECTION_FAILURE error on each service", "committedDate": "2020-11-17T16:17:29Z", "type": "commit"}, {"oid": "6452d9738e163eae6576d4385f8fda1d7337ab22", "url": "https://github.com/mulesoft/mule/commit/6452d9738e163eae6576d4385f8fda1d7337ab22", "message": "Adding logs for OAuth Service errors", "committedDate": "2020-11-17T16:17:29Z", "type": "commit"}, {"oid": "5844270072fd3aaf22ab7b9167475cc7e574a07f", "url": "https://github.com/mulesoft/mule/commit/5844270072fd3aaf22ab7b9167475cc7e574a07f", "message": "No need to use lazy connection as they are already lazy. The challenge is to make configurationInstances lazy", "committedDate": "2020-11-17T16:21:18Z", "type": "commit"}, {"oid": "5844270072fd3aaf22ab7b9167475cc7e574a07f", "url": "https://github.com/mulesoft/mule/commit/5844270072fd3aaf22ab7b9167475cc7e574a07f", "message": "No need to use lazy connection as they are already lazy. The challenge is to make configurationInstances lazy", "committedDate": "2020-11-17T16:21:18Z", "type": "forcePushed"}]}