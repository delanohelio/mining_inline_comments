{"pr_number": 9804, "pr_title": "Connection is not properly invalidated during a source reconnection", "pr_createdAt": "2020-11-30T14:38:27Z", "pr_url": "https://github.com/mulesoft/mule/pull/9804", "timeline": [{"oid": "3b6c756e4c8afd382ca02cfff2f1e58faac6f9e5", "url": "https://github.com/mulesoft/mule/commit/3b6c756e4c8afd382ca02cfff2f1e58faac6f9e5", "message": "fix", "committedDate": "2020-11-30T13:18:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjgwMzM4Mw==", "url": "https://github.com/mulesoft/mule/pull/9804#discussion_r532803383", "bodyText": "Instead of getting the delegate, and checking if it is a Reconnectable, I think it is better to check if sourceAdapter.getReconnectionAction(exception) is empty.", "author": "ndinu", "createdAt": "2020-11-30T18:18:27Z", "path": "modules/extensions-support/src/main/java/org/mule/runtime/module/extension/internal/runtime/source/ExtensionMessageSource.java", "diffHunk": "@@ -311,12 +312,15 @@ public void onException(ConnectionException exception) {\n                        sourceAdapter.getName(), getLocation().getRootContainerName()),\n                 exception);\n \n+    if (!(sourceAdapter.getDelegate() instanceof Reconnectable)) {", "originalCommit": "3b6c756e4c8afd382ca02cfff2f1e58faac6f9e5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "247e528a3e40a90580441f05370f03fa39e92014", "url": "https://github.com/mulesoft/mule/commit/247e528a3e40a90580441f05370f03fa39e92014", "message": "Add test & refactor", "committedDate": "2020-11-30T21:10:44Z", "type": "commit"}, {"oid": "d4c69fe1f96ff950fb0273062daf5c994aac90b1", "url": "https://github.com/mulesoft/mule/commit/d4c69fe1f96ff950fb0273062daf5c994aac90b1", "message": "Fix tests", "committedDate": "2020-12-01T02:25:19Z", "type": "commit"}, {"oid": "80e53f3b539470931f197d867f7f509768582b46", "url": "https://github.com/mulesoft/mule/commit/80e53f3b539470931f197d867f7f509768582b46", "message": "Fix tests", "committedDate": "2020-12-01T02:55:54Z", "type": "commit"}]}