{"pr_number": 506, "pr_title": "Control flow tests.", "pr_createdAt": "2020-02-05T22:42:32Z", "pr_url": "https://github.com/vmware/differential-datalog/pull/506", "timeline": [{"oid": "602f81256458b62f38fae4eff682a5fab458c9c6", "url": "https://github.com/vmware/differential-datalog/commit/602f81256458b62f38fae4eff682a5fab458c9c6", "message": "int.rs: Fix Shl implementation for Int.\n\nDDlog expects the rhs operand of `>>` and `<<` to be of type\n`bit<32>`.  Accordingly, we must make sure that all integer\ntypes implement `Shl<u32>` and `Shr<u32>`.  This is what we\ndid for `Uint`, but not `Int`, which was `Shl/Shr<usize>` instead,\ncausing Rust compilation errors.", "committedDate": "2020-02-05T20:31:40Z", "type": "commit"}, {"oid": "406e1cb99fd5a57814f95d70c3a0d256c49289de", "url": "https://github.com/vmware/differential-datalog/commit/406e1cb99fd5a57814f95d70c3a0d256c49289de", "message": "simple.dl: More continue/break/return tests.", "committedDate": "2020-02-05T20:31:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4Mzk5Mg==", "url": "https://github.com/vmware/differential-datalog/pull/506#discussion_r375583992", "bodyText": "I don't think I have seen this kind of stuff before in any language.\nPeople may find it confusing, but if it works as expected for the \"normal\" cases perhaps it's fine.", "author": "mbudiu-vmw", "createdAt": "2020-02-06T00:29:57Z", "path": "test/datalog_tests/simple.dl", "diffHunk": "@@ -1151,6 +1152,16 @@ function any(xs: Vec<bool>): bool =\n     return res\n }\n \n+// A weird implementation of any using continue inside return.\n+function weird_any(xs: Vec<bool>): bool =\n+{\n+    var res = false;\n+    for (x in xs) {\n+        return if (x == true) { true } else { continue }", "originalCommit": "406e1cb99fd5a57814f95d70c3a0d256c49289de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU5MDA3NQ==", "url": "https://github.com/vmware/differential-datalog/pull/506#discussion_r375590075", "bodyText": "Rust is ok with this. We can of course restrict the use of constructs that interrupt normal control flow (continue, break, and return) to avoid weird cases, but \"weird\" is hard to define, and oftentimes proves useful in practice...", "author": "ryzhyk", "createdAt": "2020-02-06T00:53:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU4Mzk5Mg=="}], "type": "inlineReview"}, {"oid": "a2ff073b5d2f8c089042169a08285acca2a267b7", "url": "https://github.com/vmware/differential-datalog/commit/a2ff073b5d2f8c089042169a08285acca2a267b7", "message": "FlatBuffer.hs: Convert field names to camel-case.\n\nFlatBuffers converts field names to camel case, e.g., `foo_bar` becomes\n`fooBar`.  There were two places where this conversion was missing.", "committedDate": "2020-02-06T00:48:11Z", "type": "commit"}, {"oid": "57cdb79ceae2836b945838980eb373cf44908b51", "url": "https://github.com/vmware/differential-datalog/commit/57cdb79ceae2836b945838980eb373cf44908b51", "message": "Document `continue`, `break`, and `return` syntax.\n\nAdded a brief description to the tutorial and language reference.", "committedDate": "2020-02-06T00:51:39Z", "type": "commit"}]}