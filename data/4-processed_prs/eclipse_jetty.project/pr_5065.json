{"pr_number": 5065, "pr_title": "Issue #5062 - fix flaky test KeyStoreScannerTest.testKeystoreRemoval()", "pr_createdAt": "2020-07-21T01:44:11Z", "pr_url": "https://github.com/eclipse/jetty.project/pull/5065", "timeline": [{"oid": "38a94879f9f6db8670f4a93ef19a06a6c4a23746", "url": "https://github.com/eclipse/jetty.project/commit/38a94879f9f6db8670f4a93ef19a06a6c4a23746", "message": "Issue #5062 - KeyStoreScannerTest should use manual scanning to avoid timing issues\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-07-21T01:31:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc4Njg5OA==", "url": "https://github.com/eclipse/jetty.project/pull/5065#discussion_r457786898", "bodyText": "We scan twice here because the Scanner won't report changes on the first scan, it wants to make sure the file is \"stable\" before it reports the change, so it needs two consecutive scans with the file unchanged.", "author": "lachlan-roberts", "createdAt": "2020-07-21T01:45:43Z", "path": "jetty-util/src/main/java/org/eclipse/jetty/util/ssl/KeyStoreScanner.java", "diffHunk": "@@ -104,6 +104,16 @@ public void fileRemoved(String filename)\n             reload();\n     }\n \n+    @ManagedOperation(value = \"Scan for changes in the SSL Keystore\", impact = \"ACTION\")\n+    public void scan()\n+    {\n+        if (LOG.isDebugEnabled())\n+            LOG.debug(\"scanning\");\n+\n+        _scanner.scan();\n+        _scanner.scan();", "originalCommit": "38a94879f9f6db8670f4a93ef19a06a6c4a23746", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}