{"pr_number": 5806, "pr_title": "Add websocket operations-guide to Jetty 10", "pr_createdAt": "2020-12-14T02:16:37Z", "pr_url": "https://github.com/eclipse/jetty.project/pull/5806", "timeline": [{"oid": "89e3920933e382a154c3f14a9a0d4594e71361ad", "url": "https://github.com/eclipse/jetty.project/commit/89e3920933e382a154c3f14a9a0d4594e71361ad", "message": "Issue #5229 - add websocket docs for operations guide\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-12-14T00:07:14Z", "type": "commit"}, {"oid": "4cd335c54e152dc88944f78833d35add1ffee630", "url": "https://github.com/eclipse/jetty.project/commit/4cd335c54e152dc88944f78833d35add1ffee630", "message": "Some changes to the websocket operations-guide.\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-12-14T00:14:41Z", "type": "commit"}, {"oid": "a3af965f7eb96bdfa301dffdaeead7e1c6e15541", "url": "https://github.com/eclipse/jetty.project/commit/a3af965f7eb96bdfa301dffdaeead7e1c6e15541", "message": "Merge remote-tracking branch 'origin/jetty-10.0.x' into jetty-10.0.x-5229-WebSocketDocumentation\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-12-14T02:09:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNjkwMw==", "url": "https://github.com/eclipse/jetty.project/pull/5806#discussion_r542206903", "bodyText": "Admonitions should follow the correct format. See examples in Jetty 10 documentation, should be:\n[ADMONITION]\n====\nText\n====", "author": "sbordet", "createdAt": "2020-12-14T08:48:06Z", "path": "jetty-documentation/src/main/asciidoc/operations-guide/websocket/chapter.adoc", "diffHunk": "@@ -0,0 +1,105 @@\n+//\n+// ========================================================================\n+// Copyright (c) 1995-2020 Mort Bay Consulting Pty Ltd and others.\n+//\n+// This program and the accompanying materials are made available under the\n+// terms of the Eclipse Public License v. 2.0 which is available at\n+// https://www.eclipse.org/legal/epl-2.0, or the Apache License, Version 2.0\n+// which is available at https://www.apache.org/licenses/LICENSE-2.0.\n+//\n+// SPDX-License-Identifier: EPL-2.0 OR Apache-2.0\n+// ========================================================================\n+//\n+\n+[[og-websocket]]\n+=== WebSocket\n+\n+WebSocket is a protocol for bidirectional communications initiated via HTTP/1.1 upgrade which provides basic message framing, layered over TCP.\n+It is based on a low-level framing protocol that delivers messages in either UTF-8 TEXT or BINARY format.\n+\n+A single message in WebSocket can be of any size (the underlying framing however has a maximum size limit of 2^63 bytes).\n+There can be an unlimited number of messages sent.\n+Messages are sent sequentially, the base protocol does not support interleaved messages.\n+\n+A WebSocket connection goes through some basic state changes:\n+\n+.WebSocket connection states\n+[width=\"50%\",cols=\",\",options=\"header\",]\n+|=======================================================================\n+|State |Description\n+|CONNECTING |A HTTP Upgrade to WebSocket is in progress.\n+|OPEN |The HTTP Upgrade succeeded and the socket is now open and ready to read / write.\n+|CLOSING |A WebSocket Close Handshake has been started.\n+|CLOSED |WebSocket is now closed, no more read/write possible.\n+|=======================================================================\n+\n+When a WebSocket is closed, a link:{JDURL}/org/eclipse/jetty/websocket/api/StatusCode.html[status code] and short reason string is provided.\n+\n+[[og-ws-intro-provides]]\n+==== What Jetty Provides\n+\n+Jetty provides an implementation of the following standards and specs.\n+\n+http://tools.ietf.org/html/rfc6455[RFC-6455] - The WebSocket Protocol::\n++\n+We support the version 13 of the released and final spec. +\n+Jetty tests its WebSocket protocol implementation using the https://github.com/crossbario/autobahn-testsuite[autobahn testsuite].\n+\n+____\n+[IMPORTANT]", "originalCommit": "a3af965f7eb96bdfa301dffdaeead7e1c6e15541", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwNzU2OA==", "url": "https://github.com/eclipse/jetty.project/pull/5806#discussion_r542207568", "bodyText": "Don't use + at EOL, it's considered bad practice.", "author": "sbordet", "createdAt": "2020-12-14T08:49:10Z", "path": "jetty-documentation/src/main/asciidoc/operations-guide/websocket/chapter.adoc", "diffHunk": "@@ -0,0 +1,105 @@\n+//\n+// ========================================================================\n+// Copyright (c) 1995-2020 Mort Bay Consulting Pty Ltd and others.\n+//\n+// This program and the accompanying materials are made available under the\n+// terms of the Eclipse Public License v. 2.0 which is available at\n+// https://www.eclipse.org/legal/epl-2.0, or the Apache License, Version 2.0\n+// which is available at https://www.apache.org/licenses/LICENSE-2.0.\n+//\n+// SPDX-License-Identifier: EPL-2.0 OR Apache-2.0\n+// ========================================================================\n+//\n+\n+[[og-websocket]]\n+=== WebSocket\n+\n+WebSocket is a protocol for bidirectional communications initiated via HTTP/1.1 upgrade which provides basic message framing, layered over TCP.\n+It is based on a low-level framing protocol that delivers messages in either UTF-8 TEXT or BINARY format.\n+\n+A single message in WebSocket can be of any size (the underlying framing however has a maximum size limit of 2^63 bytes).\n+There can be an unlimited number of messages sent.\n+Messages are sent sequentially, the base protocol does not support interleaved messages.\n+\n+A WebSocket connection goes through some basic state changes:\n+\n+.WebSocket connection states\n+[width=\"50%\",cols=\",\",options=\"header\",]\n+|=======================================================================\n+|State |Description\n+|CONNECTING |A HTTP Upgrade to WebSocket is in progress.\n+|OPEN |The HTTP Upgrade succeeded and the socket is now open and ready to read / write.\n+|CLOSING |A WebSocket Close Handshake has been started.\n+|CLOSED |WebSocket is now closed, no more read/write possible.\n+|=======================================================================\n+\n+When a WebSocket is closed, a link:{JDURL}/org/eclipse/jetty/websocket/api/StatusCode.html[status code] and short reason string is provided.\n+\n+[[og-ws-intro-provides]]\n+==== What Jetty Provides\n+\n+Jetty provides an implementation of the following standards and specs.\n+\n+http://tools.ietf.org/html/rfc6455[RFC-6455] - The WebSocket Protocol::\n++", "originalCommit": "a3af965f7eb96bdfa301dffdaeead7e1c6e15541", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwODM2NQ==", "url": "https://github.com/eclipse/jetty.project/pull/5806#discussion_r542208365", "bodyText": "Section ids should be hierarchical. If the parent is og-websocket, children should be og-websocket-provides, then og-websocket-provides-foo, etc.", "author": "sbordet", "createdAt": "2020-12-14T08:50:25Z", "path": "jetty-documentation/src/main/asciidoc/operations-guide/websocket/chapter.adoc", "diffHunk": "@@ -0,0 +1,105 @@\n+//\n+// ========================================================================\n+// Copyright (c) 1995-2020 Mort Bay Consulting Pty Ltd and others.\n+//\n+// This program and the accompanying materials are made available under the\n+// terms of the Eclipse Public License v. 2.0 which is available at\n+// https://www.eclipse.org/legal/epl-2.0, or the Apache License, Version 2.0\n+// which is available at https://www.apache.org/licenses/LICENSE-2.0.\n+//\n+// SPDX-License-Identifier: EPL-2.0 OR Apache-2.0\n+// ========================================================================\n+//\n+\n+[[og-websocket]]\n+=== WebSocket\n+\n+WebSocket is a protocol for bidirectional communications initiated via HTTP/1.1 upgrade which provides basic message framing, layered over TCP.\n+It is based on a low-level framing protocol that delivers messages in either UTF-8 TEXT or BINARY format.\n+\n+A single message in WebSocket can be of any size (the underlying framing however has a maximum size limit of 2^63 bytes).\n+There can be an unlimited number of messages sent.\n+Messages are sent sequentially, the base protocol does not support interleaved messages.\n+\n+A WebSocket connection goes through some basic state changes:\n+\n+.WebSocket connection states\n+[width=\"50%\",cols=\",\",options=\"header\",]\n+|=======================================================================\n+|State |Description\n+|CONNECTING |A HTTP Upgrade to WebSocket is in progress.\n+|OPEN |The HTTP Upgrade succeeded and the socket is now open and ready to read / write.\n+|CLOSING |A WebSocket Close Handshake has been started.\n+|CLOSED |WebSocket is now closed, no more read/write possible.\n+|=======================================================================\n+\n+When a WebSocket is closed, a link:{JDURL}/org/eclipse/jetty/websocket/api/StatusCode.html[status code] and short reason string is provided.\n+\n+[[og-ws-intro-provides]]", "originalCommit": "a3af965f7eb96bdfa301dffdaeead7e1c6e15541", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIwODkyNg==", "url": "https://github.com/eclipse/jetty.project/pull/5806#discussion_r542208926", "bodyText": "Don't use link for cross references, use xref instead.", "author": "sbordet", "createdAt": "2020-12-14T08:51:17Z", "path": "jetty-documentation/src/main/asciidoc/operations-guide/websocket/chapter.adoc", "diffHunk": "@@ -0,0 +1,105 @@\n+//\n+// ========================================================================\n+// Copyright (c) 1995-2020 Mort Bay Consulting Pty Ltd and others.\n+//\n+// This program and the accompanying materials are made available under the\n+// terms of the Eclipse Public License v. 2.0 which is available at\n+// https://www.eclipse.org/legal/epl-2.0, or the Apache License, Version 2.0\n+// which is available at https://www.apache.org/licenses/LICENSE-2.0.\n+//\n+// SPDX-License-Identifier: EPL-2.0 OR Apache-2.0\n+// ========================================================================\n+//\n+\n+[[og-websocket]]\n+=== WebSocket\n+\n+WebSocket is a protocol for bidirectional communications initiated via HTTP/1.1 upgrade which provides basic message framing, layered over TCP.\n+It is based on a low-level framing protocol that delivers messages in either UTF-8 TEXT or BINARY format.\n+\n+A single message in WebSocket can be of any size (the underlying framing however has a maximum size limit of 2^63 bytes).\n+There can be an unlimited number of messages sent.\n+Messages are sent sequentially, the base protocol does not support interleaved messages.\n+\n+A WebSocket connection goes through some basic state changes:\n+\n+.WebSocket connection states\n+[width=\"50%\",cols=\",\",options=\"header\",]\n+|=======================================================================\n+|State |Description\n+|CONNECTING |A HTTP Upgrade to WebSocket is in progress.\n+|OPEN |The HTTP Upgrade succeeded and the socket is now open and ready to read / write.\n+|CLOSING |A WebSocket Close Handshake has been started.\n+|CLOSED |WebSocket is now closed, no more read/write possible.\n+|=======================================================================\n+\n+When a WebSocket is closed, a link:{JDURL}/org/eclipse/jetty/websocket/api/StatusCode.html[status code] and short reason string is provided.\n+\n+[[og-ws-intro-provides]]\n+==== What Jetty Provides\n+\n+Jetty provides an implementation of the following standards and specs.\n+\n+http://tools.ietf.org/html/rfc6455[RFC-6455] - The WebSocket Protocol::\n++\n+We support the version 13 of the released and final spec. +\n+Jetty tests its WebSocket protocol implementation using the https://github.com/crossbario/autobahn-testsuite[autobahn testsuite].\n+\n+____\n+[IMPORTANT]\n+The early drafts of WebSocket were supported in Jetty 7 and Jetty 8, but this support has been removed in later versions of Jetty.\n+This means that Jetty will no longer not support the old browsers that implemented the early drafts of WebSocket. (such as Safari 5.0 or Opera 12)\n+____\n+\n+____\n+[TIP]\n+Want to know if the browser you are targeting supports WebSocket?\n+Use http://caniuse.com/websockets[caniuse.com/websockets] to find out.\n+____\n+\n+http://www.jcp.org/en/jsr/detail?id=356[JSR-356] - The Java WebSocket API (`javax.websocket`)::\n++\n+This is the official Java API for working with WebSockets.\n+\n+https://tools.ietf.org/html/rfc7692[RFC-7692] - WebSocket Per-Message Deflate Extension.::\n++\n+This is the replacement for perframe-compression, switching the compression to being based on the entire message, not the individual frames.\n+\n+https://tools.ietf.org/html/rfc8441[RFC-8441] - Bootstrapping WebSockets with HTTP/2::\n++\n+Allows a single stream of an HTTP/2 connection to be upgraded to WebSocket.\n+This allows one TCP connection to be shared by both protocols and extends HTTP/2's more efficient use of the network to WebSockets.\n+\n+[[og-ws-jetty-api]]\n+==== Jetty Native WebSocket API\n+\n+Jetty provides its own more powerful WebSocket API, with shared API interfaces for both server and client use of WebSockets.\n+Here are the different APIs and libraries to implement your WebSockets using Jetty.\n+\n+Jetty WebSocket API::\n+The basic common API for creating and working with WebSockets using Jetty.\n+Jetty WebSocket Server API::\n+Write WebSocket Server Endpoints for Jetty.\n+Jetty WebSocket Client API::\n+Connect to WebSocket servers with Jetty.\n+\n+[[og-ws-enabling-websocket]]\n+==== Enabling WebSocket\n+\n+To use WebSockets on a Jetty server, you need to enable one of the websocket modules (see link:#enabling-modules[Enabling Modules]).", "originalCommit": "a3af965f7eb96bdfa301dffdaeead7e1c6e15541", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b5884f46498cafc536c773d08e160dd65e7de1b5", "url": "https://github.com/eclipse/jetty.project/commit/b5884f46498cafc536c773d08e160dd65e7de1b5", "message": "Changes from review.\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>", "committedDate": "2020-12-15T03:08:49Z", "type": "commit"}]}