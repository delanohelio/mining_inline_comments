{"pr_number": 5557, "pr_title": "SessionCookieConfig name may be null", "pr_createdAt": "2020-11-02T10:29:11Z", "pr_url": "https://github.com/eclipse/jetty.project/pull/5557", "timeline": [{"oid": "27d22ccf6623c06f1e7c0e817a0a7f5b4bc7c179", "url": "https://github.com/eclipse/jetty.project/commit/27d22ccf6623c06f1e7c0e817a0a7f5b4bc7c179", "message": "SessionCookieConfig name may be null\n\nProtect against NPE by make a null name in SessionCookieConfig deactive session cookies.", "committedDate": "2020-11-02T10:28:00Z", "type": "commit"}, {"oid": "526f8144bb2d33543af43dedbe3ee231a026aeca", "url": "https://github.com/eclipse/jetty.project/commit/526f8144bb2d33543af43dedbe3ee231a026aeca", "message": "SessionCookieConfig name may be null\n\nProtect against NPE by make a null name in SessionCookieConfig deactive session cookies.", "committedDate": "2020-11-02T12:17:47Z", "type": "commit"}, {"oid": "f07665e2c3a5a6772eb0b45b9e295152108ac88c", "url": "https://github.com/eclipse/jetty.project/commit/f07665e2c3a5a6772eb0b45b9e295152108ac88c", "message": "SessionCookieConfig name may be null\n\nProtect against NPE by make a null name in SessionCookieConfig deactive session cookies.", "committedDate": "2020-11-02T12:30:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU3ODUzMg==", "url": "https://github.com/eclipse/jetty.project/pull/5557#discussion_r516578532", "bodyText": "I don't think that testing _cookieConfig.getName() for null should be here. As per issue eclipse-ee4j/jakartaee-tck#567 it looks like cookieConfig.getName() should indeed be able to return null, but the container needs to either use it's own default name, or the spec default name in that case.\nWe should also be consistent in SessionCookieConfig:  if you look at getPath(), we allow that to return null, but when we need to have a path, we substitute the context path of the relevant context.", "author": "janbartel", "createdAt": "2020-11-03T10:52:42Z", "path": "jetty-server/src/main/java/org/eclipse/jetty/server/session/SessionHandler.java", "diffHunk": "@@ -654,7 +655,7 @@ public String getSessionCookie()\n      */\n     public HttpCookie getSessionCookie(HttpSession session, String contextPath, boolean requestIsSecure)\n     {\n-        if (isUsingCookies())\n+        if (isUsingCookies() && _cookieConfig.getName() != null)", "originalCommit": "f07665e2c3a5a6772eb0b45b9e295152108ac88c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjc0MTM0Ng==", "url": "https://github.com/eclipse/jetty.project/pull/5557#discussion_r516741346", "bodyText": "I've changed the PR so null is now acceptable and uses a static method to convert to the default", "author": "gregw", "createdAt": "2020-11-03T15:13:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU3ODUzMg=="}], "type": "inlineReview"}, {"oid": "52544e4835b341f591506783270da6b7795b4290", "url": "https://github.com/eclipse/jetty.project/commit/52544e4835b341f591506783270da6b7795b4290", "message": "feedback from review\n\nadded static method to convert null name to default.", "committedDate": "2020-11-03T13:52:52Z", "type": "commit"}]}