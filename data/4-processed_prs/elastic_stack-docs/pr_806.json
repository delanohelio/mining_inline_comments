{"pr_number": 806, "pr_title": "[DOCS] Documents imbalanced class sizes and their effect on classification", "pr_createdAt": "2020-01-14T14:35:51Z", "pr_url": "https://github.com/elastic/stack-docs/pull/806", "timeline": [{"oid": "af7265dc6491e6e9a6322fc11f0f075a920198f5", "url": "https://github.com/elastic/stack-docs/commit/af7265dc6491e6e9a6322fc11f0f075a920198f5", "message": "[DOCS] Documents imbalanced class sizes and their effect on classification.", "committedDate": "2020-01-14T14:33:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQzNzM5MA==", "url": "https://github.com/elastic/stack-docs/pull/806#discussion_r366437390", "bodyText": "This is a bit strong as currently worded IMO, we handle imbalanced training data up to a point\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Your training dataset should be balanced, otherwise the {classanalysis} may not \n          \n          \n            \n            Your training dataset should be <span class=\"x x-first x-last\">approximately </span>balanced, otherwise the {classanalysis} may not", "author": "tveasey", "createdAt": "2020-01-14T16:23:40Z", "path": "docs/en/stack/ml/df-analytics/dfa-classification.asciidoc", "diffHunk": "@@ -49,7 +49,10 @@ means that you need to supply a labeled training dataset that has some\n {feature-vars} and a {depvar}. The {classification} algorithm learns the \n relationships between the features and the {depvar}. Once you\u2019ve trained the \n model on your training dataset, you can reuse the knowledge that the model has \n-learned about the relationships between the data points to classify new data.\n+learned about the relationships between the data points to classify new data. \n+Your training dataset should be balanced, otherwise the {classanalysis} may not ", "originalCommit": "af7265dc6491e6e9a6322fc11f0f075a920198f5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ0MjM2Nw==", "url": "https://github.com/elastic/stack-docs/pull/806#discussion_r366442367", "bodyText": "I think I'd modify these sentences slightly. Here \"the system\" is really training so I'd probably write something like:\n\"Training tries to mitigate the effects of imbalanced training data by maximizing the minimum recall of any class. For imbalanced training data, this means that it will try to balance the proportion of values it correctly labels in the minority and majority class.\"", "author": "tveasey", "createdAt": "2020-01-14T16:31:42Z", "path": "docs/en/stack/ml/df-analytics/dfanalytics-limitations.asciidoc", "diffHunk": "@@ -104,6 +104,21 @@ where included fields contain an array are also ignored. Documents in the\n destination index that don't contain a results field are not included in the \n {classanalysis}.\n \n+[float]\n+[[dfa-classification-imbalanced-classes]]\n+=== Imbalanced class sizes affect {classification} performance\n+\n+If your training data is very imbalanced, then {classanalysis} may not provide \n+good predictions. The system tries to mitigate the effects of imbalanced \n+training data by maximizing the minimum recall of any class. It means that it \n+tries to get correct the highest number of examples in the minority classes. ", "originalCommit": "af7265dc6491e6e9a6322fc11f0f075a920198f5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ0NDY3OQ==", "url": "https://github.com/elastic/stack-docs/pull/806#discussion_r366444679", "bodyText": "I'd weaken these words slightly (and suggest a maximum imbalance), i.e. something like:\n\"We recommend having at least 50 examples of each class and a ratio of no more than 10 to 1 for the majority to minority class labels in the training data.\"", "author": "tveasey", "createdAt": "2020-01-14T16:35:39Z", "path": "docs/en/stack/ml/df-analytics/dfanalytics-limitations.asciidoc", "diffHunk": "@@ -104,6 +104,21 @@ where included fields contain an array are also ignored. Documents in the\n destination index that don't contain a results field are not included in the \n {classanalysis}.\n \n+[float]\n+[[dfa-classification-imbalanced-classes]]\n+=== Imbalanced class sizes affect {classification} performance\n+\n+If your training data is very imbalanced, then {classanalysis} may not provide \n+good predictions. The system tries to mitigate the effects of imbalanced \n+training data by maximizing the minimum recall of any class. It means that it \n+tries to get correct the highest number of examples in the minority classes. \n+However, this process can result in a slight degradation of the overall \n+accuracy. Try to avoid highly imbalanced situations. It is required at least 50 ", "originalCommit": "af7265dc6491e6e9a6322fc11f0f075a920198f5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ0NTk1Nw==", "url": "https://github.com/elastic/stack-docs/pull/806#discussion_r366445957", "bodyText": "Maybe:\n\"If your training dataset is very imbalanced, consider downsampling the majority class, upsampling the minority class or if possible gather more data.\"\n(I think it's worth mentioning the three possible routes to go.)", "author": "tveasey", "createdAt": "2020-01-14T16:37:38Z", "path": "docs/en/stack/ml/df-analytics/dfanalytics-limitations.asciidoc", "diffHunk": "@@ -104,6 +104,21 @@ where included fields contain an array are also ignored. Documents in the\n destination index that don't contain a results field are not included in the \n {classanalysis}.\n \n+[float]\n+[[dfa-classification-imbalanced-classes]]\n+=== Imbalanced class sizes affect {classification} performance\n+\n+If your training data is very imbalanced, then {classanalysis} may not provide \n+good predictions. The system tries to mitigate the effects of imbalanced \n+training data by maximizing the minimum recall of any class. It means that it \n+tries to get correct the highest number of examples in the minority classes. \n+However, this process can result in a slight degradation of the overall \n+accuracy. Try to avoid highly imbalanced situations. It is required at least 50 \n+examples for each class in order to get better results. If your training dataset \n+is very imbalanced, fine-tune the data, for example, by downsampling the ", "originalCommit": "af7265dc6491e6e9a6322fc11f0f075a920198f5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "62fde79bfb01d254a28f40d8cfcd9ed25f9fd747", "url": "https://github.com/elastic/stack-docs/commit/62fde79bfb01d254a28f40d8cfcd9ed25f9fd747", "message": "Update docs/en/stack/ml/df-analytics/dfa-classification.asciidoc\n\nCo-Authored-By: Tom Veasey <tveasey@users.noreply.github.com>", "committedDate": "2020-01-15T07:05:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcyMTIxNA==", "url": "https://github.com/elastic/stack-docs/pull/806#discussion_r366721214", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            good predictions. The system tries to mitigate the effects of imbalanced \n          \n          \n            \n            good predictions. Training tries to mitigate the effects of imbalanced", "author": "szabosteve", "createdAt": "2020-01-15T07:06:40Z", "path": "docs/en/stack/ml/df-analytics/dfanalytics-limitations.asciidoc", "diffHunk": "@@ -104,6 +104,21 @@ where included fields contain an array are also ignored. Documents in the\n destination index that don't contain a results field are not included in the \n {classanalysis}.\n \n+[float]\n+[[dfa-classification-imbalanced-classes]]\n+=== Imbalanced class sizes affect {classification} performance\n+\n+If your training data is very imbalanced, then {classanalysis} may not provide \n+good predictions. The system tries to mitigate the effects of imbalanced ", "originalCommit": "62fde79bfb01d254a28f40d8cfcd9ed25f9fd747", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcyMTQ0Mw==", "url": "https://github.com/elastic/stack-docs/pull/806#discussion_r366721443", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            training data by maximizing the minimum recall of any class. It means that it \n          \n          \n            \n            training data by maximizing the minimum recall of any class. For imbalanced training data, this means that it", "author": "szabosteve", "createdAt": "2020-01-15T07:07:46Z", "path": "docs/en/stack/ml/df-analytics/dfanalytics-limitations.asciidoc", "diffHunk": "@@ -104,6 +104,21 @@ where included fields contain an array are also ignored. Documents in the\n destination index that don't contain a results field are not included in the \n {classanalysis}.\n \n+[float]\n+[[dfa-classification-imbalanced-classes]]\n+=== Imbalanced class sizes affect {classification} performance\n+\n+If your training data is very imbalanced, then {classanalysis} may not provide \n+good predictions. The system tries to mitigate the effects of imbalanced \n+training data by maximizing the minimum recall of any class. It means that it ", "originalCommit": "62fde79bfb01d254a28f40d8cfcd9ed25f9fd747", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcyMTY5Mg==", "url": "https://github.com/elastic/stack-docs/pull/806#discussion_r366721692", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            tries to get correct the highest number of examples in the minority classes. \n          \n          \n            \n            will try to balance the proportion of values it correctly labels in the minority and majority class.", "author": "szabosteve", "createdAt": "2020-01-15T07:08:42Z", "path": "docs/en/stack/ml/df-analytics/dfanalytics-limitations.asciidoc", "diffHunk": "@@ -104,6 +104,21 @@ where included fields contain an array are also ignored. Documents in the\n destination index that don't contain a results field are not included in the \n {classanalysis}.\n \n+[float]\n+[[dfa-classification-imbalanced-classes]]\n+=== Imbalanced class sizes affect {classification} performance\n+\n+If your training data is very imbalanced, then {classanalysis} may not provide \n+good predictions. The system tries to mitigate the effects of imbalanced \n+training data by maximizing the minimum recall of any class. It means that it \n+tries to get correct the highest number of examples in the minority classes. ", "originalCommit": "62fde79bfb01d254a28f40d8cfcd9ed25f9fd747", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ba3b8de8dcc98e58ec73ab353ae2a68bc543440e", "url": "https://github.com/elastic/stack-docs/commit/ba3b8de8dcc98e58ec73ab353ae2a68bc543440e", "message": "Update docs/en/stack/ml/df-analytics/dfanalytics-limitations.asciidoc", "committedDate": "2020-01-15T07:09:56Z", "type": "commit"}, {"oid": "482ed429c3fcce069a6931528ec4b5a2d1359ce7", "url": "https://github.com/elastic/stack-docs/commit/482ed429c3fcce069a6931528ec4b5a2d1359ce7", "message": "Update docs/en/stack/ml/df-analytics/dfanalytics-limitations.asciidoc", "committedDate": "2020-01-15T07:10:03Z", "type": "commit"}, {"oid": "504011dc525186b31b1918abce00aa1586c14421", "url": "https://github.com/elastic/stack-docs/commit/504011dc525186b31b1918abce00aa1586c14421", "message": "Update docs/en/stack/ml/df-analytics/dfanalytics-limitations.asciidoc", "committedDate": "2020-01-15T07:10:09Z", "type": "commit"}, {"oid": "d3ca235f01f9c7ed64d46fca3910c91108945747", "url": "https://github.com/elastic/stack-docs/commit/d3ca235f01f9c7ed64d46fca3910c91108945747", "message": "[DOCS] Addresses feedback.", "committedDate": "2020-01-15T07:34:00Z", "type": "commit"}]}