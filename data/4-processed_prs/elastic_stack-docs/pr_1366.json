{"pr_number": 1366, "pr_title": "[DOCS] Adds Metrics AD configurations to OOTB jobs", "pr_createdAt": "2020-09-18T13:38:21Z", "pr_url": "https://github.com/elastic/stack-docs/pull/1366", "timeline": [{"oid": "b051676791a1ff22ba00e235d985bc445f6e40b0", "url": "https://github.com/elastic/stack-docs/commit/b051676791a1ff22ba00e235d985bc445f6e40b0", "message": "[DOCS] Adds Metrics AD configurations to OOTB jobs.", "committedDate": "2020-09-18T09:49:44Z", "type": "commit"}, {"oid": "e00d93582be7703401fe3b4bfe32a17691207424", "url": "https://github.com/elastic/stack-docs/commit/e00d93582be7703401fe3b4bfe32a17691207424", "message": "[DOCS] Adds description of partition field.", "committedDate": "2020-09-18T13:35:47Z", "type": "commit"}, {"oid": "b4ecf26aaa94da90de11c05c680bda3c758aeae5", "url": "https://github.com/elastic/stack-docs/commit/b4ecf26aaa94da90de11c05c680bda3c758aeae5", "message": "[DOCS] Fixes index.asciidoc.", "committedDate": "2020-09-18T15:06:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA1NDc3OA==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r491054778", "bodyText": "{kibana-ref}/xpack-infra.html[Metrics app] in {kib}...\n\n@EamonnTP I think I remember hearing that Observability pages like this were moving out of the Kibana guide.  Is there somewhere we should link to in the Observability guide instead?", "author": "lcawl", "createdAt": "2020-09-18T16:15:50Z", "path": "docs/en/stack/ml/anomaly-detection/ootb-ml-jobs-metrics-ui.asciidoc", "diffHunk": "@@ -0,0 +1,68 @@\n+[role=\"xpack\"]\n+[[ootb-ml-jobs-metrics-ui]]\n+= Metrics {anomaly-detect} configurations\n+++++\n+<titleabbrev>Metrics</titleabbrev>\n+++++\n+\n+// tag::metrics-jobs[]\n+These {anomaly-jobs} can be created in the\n+{kibana-ref}/xpack-infra.html[Metrics app] in {kib}. When you create one of ", "originalCommit": "b4ecf26aaa94da90de11c05c680bda3c758aeae5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTg3NTkwMQ==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r491875901", "bodyText": "@szabosteve @lcawl That's correct. Ideally, once we have the anomaly detection topic within the \"Analyze metrics\" section of the Observability guide, we should link to that topic. Or for the mean time, you could link to the new \"Analyze metrics\" section - the PR will get merged later this week. The link would be {observability-guide}/analyze-metrics.html[Metrics app] in {kib}. Although it would be great to hold of until we have an inspect-metrics-anomalies topic.", "author": "EamonnTP", "createdAt": "2020-09-21T08:40:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA1NDc3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTg4NDM2Mg==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r491884362", "bodyText": "Created an issue for this in the Observability docs repo.", "author": "EamonnTP", "createdAt": "2020-09-21T08:54:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA1NDc3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEzODU4Ng==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r500138586", "bodyText": "I changed to {observability-guide}/analyze-metrics.html. I'll modify it again in another PR once the Inspect metrics anomalies topic is published.", "author": "szabosteve", "createdAt": "2020-10-06T09:34:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA1NDc3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTEzODg1NA==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r491138854", "bodyText": "When you create one of these jobs...\n\nIMO this configuration info should go into the Observability Guide's page for these jobs (equivalent to the one for Logs app here: https://www.elastic.co/guide/en/observability/master/inspect-log-anomalies.html#enable-anomaly-detection)", "author": "lcawl", "createdAt": "2020-09-18T19:05:22Z", "path": "docs/en/stack/ml/anomaly-detection/ootb-ml-jobs-metrics-ui.asciidoc", "diffHunk": "@@ -0,0 +1,68 @@\n+[role=\"xpack\"]\n+[[ootb-ml-jobs-metrics-ui]]\n+= Metrics {anomaly-detect} configurations\n+++++\n+<titleabbrev>Metrics</titleabbrev>\n+++++\n+\n+// tag::metrics-jobs[]\n+These {anomaly-jobs} can be created in the\n+{kibana-ref}/xpack-infra.html[Metrics app] in {kib}. When you create one of \n+these jobs, you need to select a field that splits the data to establish ", "originalCommit": "b4ecf26aaa94da90de11c05c680bda3c758aeae5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTg4NTU0NQ==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r491885545", "bodyText": "@szabosteve @lcawl I agree.", "author": "EamonnTP", "createdAt": "2020-09-21T08:56:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTEzODg1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEzOTI3NQ==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r500139275", "bodyText": "I removed the configuration info as Inspect metrics anomalies will contain it.", "author": "szabosteve", "createdAt": "2020-10-06T09:35:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTEzODg1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE0OTg1NA==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r491149854", "bodyText": "For memory usage via the Metrics UI.\n\nI know we used the same format for the Logs jobs, but I'm not sure what the \"via the xxx UI\" really means here.  Does it mean you're viewing this in the Metrics UI (in which case I think that's redundant, since that true of all these)?  Or does it mean that it's limited to data that you've already configured for use in the Metrics app (in which case it's clearer to say something like \"For memory usage data in the {metrics-app}\", IMO)?", "author": "lcawl", "createdAt": "2020-09-18T19:29:19Z", "path": "docs/en/stack/ml/anomaly-detection/ootb-ml-jobs-metrics-ui.asciidoc", "diffHunk": "@@ -0,0 +1,68 @@\n+[role=\"xpack\"]\n+[[ootb-ml-jobs-metrics-ui]]\n+= Metrics {anomaly-detect} configurations\n+++++\n+<titleabbrev>Metrics</titleabbrev>\n+++++\n+\n+// tag::metrics-jobs[]\n+These {anomaly-jobs} can be created in the\n+{kibana-ref}/xpack-infra.html[Metrics app] in {kib}. When you create one of \n+these jobs, you need to select a field that splits the data to establish \n+separate baselines for the job. This is called a partion field. Each value of \n+the partition field is modeled individually which enables more independent \n+anomaly scoring.\n+\n+When you select partition field for a job, take into account field cardinality; \n+the number of different values that the field contains. If the partition field \n+has more than 1000 distinct values per job, you are advised that there might be \n+high memory usage.\n+\n+The jobs below detect anomalous memory and network behavior on hosts and \n+Kubernetes pods. For more details, see the {dfeed} and job definitions in the \n+`metrics_ui_*` folders in https://github.com/elastic/kibana/tree/{branch}/x-pack/plugins/ml/server/models/data_recognizer/modules[GitHub].\n+\n+\n+hosts_memory_usage::\n+\n+* For memory usage via the Metrics UI.", "originalCommit": "b4ecf26aaa94da90de11c05c680bda3c758aeae5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTg5NjMwMA==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r491896300", "bodyText": "Thanks! I amended the text accordingly. Will do the same for Logs jobs.", "author": "szabosteve", "createdAt": "2020-09-21T09:15:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE0OTg1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE1MTk1Nw==", "url": "https://github.com/elastic/stack-docs/pull/1366#discussion_r491151957", "bodyText": "Likewise I think \"via\" is unclear, so I'd suggest something like this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * For memory usage via the Metrics UI.\n          \n          \n            \n            * For memory usage data about Kubernetes pods in the {metrics-app}.", "author": "lcawl", "createdAt": "2020-09-18T19:34:10Z", "path": "docs/en/stack/ml/anomaly-detection/ootb-ml-jobs-metrics-ui.asciidoc", "diffHunk": "@@ -0,0 +1,68 @@\n+[role=\"xpack\"]\n+[[ootb-ml-jobs-metrics-ui]]\n+= Metrics {anomaly-detect} configurations\n+++++\n+<titleabbrev>Metrics</titleabbrev>\n+++++\n+\n+// tag::metrics-jobs[]\n+These {anomaly-jobs} can be created in the\n+{kibana-ref}/xpack-infra.html[Metrics app] in {kib}. When you create one of \n+these jobs, you need to select a field that splits the data to establish \n+separate baselines for the job. This is called a partion field. Each value of \n+the partition field is modeled individually which enables more independent \n+anomaly scoring.\n+\n+When you select partition field for a job, take into account field cardinality; \n+the number of different values that the field contains. If the partition field \n+has more than 1000 distinct values per job, you are advised that there might be \n+high memory usage.\n+\n+The jobs below detect anomalous memory and network behavior on hosts and \n+Kubernetes pods. For more details, see the {dfeed} and job definitions in the \n+`metrics_ui_*` folders in https://github.com/elastic/kibana/tree/{branch}/x-pack/plugins/ml/server/models/data_recognizer/modules[GitHub].\n+\n+\n+hosts_memory_usage::\n+\n+* For memory usage via the Metrics UI.\n+* Models system memory usage.\n+* Detects unusual increases in memory usage across hosts.\n+\n+\n+hosts_network_in::\n+\n+* For network traffic via the Metrics UI.\n+* Models inbound network traffic.\n+* Detects unusually high inbound traffic across hosts.\n+\n+\n+hosts_network_out::\n+\n+* For network traffic via the Metrics UI. \n+* Models outbound network traffic.\n+* Detects unusually high outbound traffic across hosts.\n+\n+\n+k8s_memory_usage::\n+\n+* For memory usage via the Metrics UI.", "originalCommit": "b4ecf26aaa94da90de11c05c680bda3c758aeae5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "db308b0d420b2b1595f4c34542dd8a7a37ebf651", "url": "https://github.com/elastic/stack-docs/commit/db308b0d420b2b1595f4c34542dd8a7a37ebf651", "message": "Update docs/en/stack/ml/anomaly-detection/ootb-ml-jobs-metrics-ui.asciidoc\n\nCo-authored-by: Lisa Cawley <lcawley@elastic.co>", "committedDate": "2020-09-21T09:06:09Z", "type": "commit"}, {"oid": "81f92a97f83d73ff3379aec569b6bfe6f181eb3f", "url": "https://github.com/elastic/stack-docs/commit/81f92a97f83d73ff3379aec569b6bfe6f181eb3f", "message": "[DOCS] Addresses feedback.", "committedDate": "2020-09-21T09:35:49Z", "type": "commit"}, {"oid": "b52638171812757a68123b99b35fe19a2bf748a8", "url": "https://github.com/elastic/stack-docs/commit/b52638171812757a68123b99b35fe19a2bf748a8", "message": "[DOCS] Changes link and removes configuration info.", "committedDate": "2020-10-06T09:33:07Z", "type": "commit"}]}