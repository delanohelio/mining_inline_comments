{"pr_number": 885, "pr_title": "[DOCS] Adds section to the classification docs that helps interpret results", "pr_createdAt": "2020-02-17T13:00:07Z", "pr_url": "https://github.com/elastic/stack-docs/pull/885", "timeline": [{"oid": "ae2df9b66c9131e8459cefeb9e94445d77ed5cf0", "url": "https://github.com/elastic/stack-docs/commit/ae2df9b66c9131e8459cefeb9e94445d77ed5cf0", "message": "[DOCS] Adds section to the classification docs that helps interpret results.", "committedDate": "2020-02-17T12:58:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE5NzkyMg==", "url": "https://github.com/elastic/stack-docs/pull/885#discussion_r380197922", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The value of `class_probability` shows how likely that a given datapoint belongs \n          \n          \n            \n            The value of `class_probability` shows how likely it is that a given datapoint belongs", "author": "tveasey", "createdAt": "2020-02-17T14:00:45Z", "path": "docs/en/stack/ml/df-analytics/dfa-classification.asciidoc", "diffHunk": "@@ -65,9 +65,56 @@ boosted tree regression model which combines multiple weak models into a\n composite one. We use decision trees to learn to predict the probability that \n a data point belongs to a certain class.\n \n+\n+[discrete]\n+[[dfa-classification-interpret]]\n+==== Interpreting {classification} results\n+\n+The following sections help you understand and interpret the results of a \n+{classanalysis}.\n+\n+[discrete]\n+[[dfa-classification-class-probability]]\n+===== `class_probability`\n+\n+The value of `class_probability` shows how likely that a given datapoint belongs ", "originalCommit": "ae2df9b66c9131e8459cefeb9e94445d77ed5cf0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE5OTMzOQ==", "url": "https://github.com/elastic/stack-docs/pull/885#discussion_r380199339", "bodyText": "This need not be the case, so I'd change\n\"it means that you can achieve the best accuracy when every datapoint is considered\nas class 0\"\nto\n\"it can mean that you achieve the best accuracy by assigning class 0 to every datapoint\"", "author": "tveasey", "createdAt": "2020-02-17T14:03:30Z", "path": "docs/en/stack/ml/df-analytics/dfa-classification.asciidoc", "diffHunk": "@@ -65,9 +65,56 @@ boosted tree regression model which combines multiple weak models into a\n composite one. We use decision trees to learn to predict the probability that \n a data point belongs to a certain class.\n \n+\n+[discrete]\n+[[dfa-classification-interpret]]\n+==== Interpreting {classification} results\n+\n+The following sections help you understand and interpret the results of a \n+{classanalysis}.\n+\n+[discrete]\n+[[dfa-classification-class-probability]]\n+===== `class_probability`\n+\n+The value of `class_probability` shows how likely that a given datapoint belongs \n+to a certain class. It is a value between 0 and 1. The higher the number, the \n+higher the probability that the data point belongs to the named class. For \n+further details, see the\n+{ml-docs}/flightdata-classification.html#flightdata-classification-results[Viewing {classification} results]\n+section in the {classification} example.\n+\n+\n+[discrete]\n+[[dfa-classification-class-score]]\n+===== `class_score`\n+\n+The value of `class_score` controls the probability at which a class label is \n+assigned to a datapoint. In normal case \u2013 that you maximize the number of \n+correct labels \u2013 a class label is assigned when its predicted probability is \n+greater than 0.5. The `class_score` makes it possible to change this behavior, \n+so it can be less than or greater than 0.5. The value of `class_score` is always \n+non-negative and its definition is:\n+\n+```\n+scoreClass0 = 0.5 / (1.0 - probabilityAtWhichToAssignClassOne) * probabilityClass0\n+scoreClass1 = 0.5 / probabilityAtWhichToAssignClassOne * probabilityClass1\n+```\n+\n+`probabilityAtWhichToAssignClassOne` **is chosen to maximise the minimum \n+recall**. It is useful for example in case of highly imbalanced data. If \n+`class 0` is much more frequent in the training data than `class 1`, then it ", "originalCommit": "ae2df9b66c9131e8459cefeb9e94445d77ed5cf0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d794f1b633499d33a424d1649c6dbf98e362a8a5", "url": "https://github.com/elastic/stack-docs/commit/d794f1b633499d33a424d1649c6dbf98e362a8a5", "message": "Update docs/en/stack/ml/df-analytics/dfa-classification.asciidoc\n\nCo-Authored-By: Tom Veasey <tveasey@users.noreply.github.com>", "committedDate": "2020-02-17T14:18:12Z", "type": "commit"}, {"oid": "eddbcf4c488ec46f83964d9fc16991ea5cb6b14d", "url": "https://github.com/elastic/stack-docs/commit/eddbcf4c488ec46f83964d9fc16991ea5cb6b14d", "message": "[DOCS] Addresses feedback.", "committedDate": "2020-02-17T14:21:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwNzI4Mg==", "url": "https://github.com/elastic/stack-docs/pull/885#discussion_r380607282", "bodyText": "Thinking a bit more about this I think we need to somehow motivate class 0 and class 1 a bit better. How about tweaking the following slightly along the following lines:\nFor example, suppose our two classes are denoted class 0 and class 1, then the value of class_score is always non-negative and its definition is:\nclass_score(class 0) = 0.5 / (1.0 - k) * probability(class 0)\nclass_score(class 1) = 0.5 / k * probability(class 1)\n\nHere, k is a positive constant less than one. It represents the predicted probability of class 1 for a datapoint at which to label it class 1 and is chosen to maximise the minimum recall of any class.", "author": "tveasey", "createdAt": "2020-02-18T11:12:22Z", "path": "docs/en/stack/ml/df-analytics/dfa-classification.asciidoc", "diffHunk": "@@ -65,9 +65,56 @@ boosted tree regression model which combines multiple weak models into a\n composite one. We use decision trees to learn to predict the probability that \n a data point belongs to a certain class.\n \n+\n+[discrete]\n+[[dfa-classification-interpret]]\n+==== Interpreting {classification} results\n+\n+The following sections help you understand and interpret the results of a \n+{classanalysis}.\n+\n+[discrete]\n+[[dfa-classification-class-probability]]\n+===== `class_probability`\n+\n+The value of `class_probability` shows how likely it is that a given datapoint \n+belongs to a certain class. It is a value between 0 and 1. The higher the \n+number, the higher the probability that the data point belongs to the named \n+class. For further details, see the\n+{ml-docs}/flightdata-classification.html#flightdata-classification-results[Viewing {classification} results]\n+section in the {classification} example.\n+\n+\n+[discrete]\n+[[dfa-classification-class-score]]\n+===== `class_score`\n+\n+The value of `class_score` controls the probability at which a class label is \n+assigned to a datapoint. In normal case \u2013 that you maximize the number of \n+correct labels \u2013 a class label is assigned when its predicted probability is \n+greater than 0.5. The `class_score` makes it possible to change this behavior, \n+so it can be less than or greater than 0.5. The value of `class_score` is always ", "originalCommit": "eddbcf4c488ec46f83964d9fc16991ea5cb6b14d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bef4af89d4153dcaddf25439d2d579b390e48b2a", "url": "https://github.com/elastic/stack-docs/commit/bef4af89d4153dcaddf25439d2d579b390e48b2a", "message": "[DOCS] Changes definition.", "committedDate": "2020-02-18T11:48:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0NDk3Ng==", "url": "https://github.com/elastic/stack-docs/pull/885#discussion_r380844976", "bodyText": "I think we need to qualify this link a bit more, since the example focuses on viewing the results in Kibana, which I don't think shows this class_probability value by default.  For example:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            class. For further details, see the\n          \n          \n            \n            class. This information is stored in the `top_classes` array for each document in your destination index. See the", "author": "lcawl", "createdAt": "2020-02-18T18:08:54Z", "path": "docs/en/stack/ml/df-analytics/dfa-classification.asciidoc", "diffHunk": "@@ -65,9 +65,58 @@ boosted tree regression model which combines multiple weak models into a\n composite one. We use decision trees to learn to predict the probability that \n a data point belongs to a certain class.\n \n+\n+[discrete]\n+[[dfa-classification-interpret]]\n+==== Interpreting {classification} results\n+\n+The following sections help you understand and interpret the results of a \n+{classanalysis}.\n+\n+[discrete]\n+[[dfa-classification-class-probability]]\n+===== `class_probability`\n+\n+The value of `class_probability` shows how likely it is that a given datapoint \n+belongs to a certain class. It is a value between 0 and 1. The higher the \n+number, the higher the probability that the data point belongs to the named \n+class. For further details, see the", "originalCommit": "bef4af89d4153dcaddf25439d2d579b390e48b2a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0ODcyMw==", "url": "https://github.com/elastic/stack-docs/pull/885#discussion_r380848723", "bodyText": "This information already appears in the example (flightdata-classification.html#flightdata-classification-results) and in my opinion that's a better place for it, unless we end up creating a separate page that dives into how to interpret classification results.", "author": "lcawl", "createdAt": "2020-02-18T18:16:05Z", "path": "docs/en/stack/ml/df-analytics/dfa-classification.asciidoc", "diffHunk": "@@ -65,9 +65,58 @@ boosted tree regression model which combines multiple weak models into a\n composite one. We use decision trees to learn to predict the probability that \n a data point belongs to a certain class.\n \n+\n+[discrete]\n+[[dfa-classification-interpret]]\n+==== Interpreting {classification} results\n+\n+The following sections help you understand and interpret the results of a \n+{classanalysis}.\n+\n+[discrete]\n+[[dfa-classification-class-probability]]\n+===== `class_probability`", "originalCommit": "bef4af89d4153dcaddf25439d2d579b390e48b2a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE0NDQ3MA==", "url": "https://github.com/elastic/stack-docs/pull/885#discussion_r381144470", "bodyText": "@lcawl\nI think it is a good solution to collect this kind of info and publish it in one place.  You are right that this info appears on the example page and it is needed there for the full context. I also would like to add here, so you'll have a basic understanding of how to interpret results even if you don't read the examples. WDYT?", "author": "szabosteve", "createdAt": "2020-02-19T08:39:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0ODcyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0OTQxMQ==", "url": "https://github.com/elastic/stack-docs/pull/885#discussion_r380849411", "bodyText": "It is unclear where to find this score.  I don't see it in the results example in http://stack-docs_885.docs-preview.app.elstc.co/guide/en/machine-learning/master/flightdata-classification.html#flightdata-classification-results", "author": "lcawl", "createdAt": "2020-02-18T18:17:32Z", "path": "docs/en/stack/ml/df-analytics/dfa-classification.asciidoc", "diffHunk": "@@ -65,9 +65,58 @@ boosted tree regression model which combines multiple weak models into a\n composite one. We use decision trees to learn to predict the probability that \n a data point belongs to a certain class.\n \n+\n+[discrete]\n+[[dfa-classification-interpret]]\n+==== Interpreting {classification} results\n+\n+The following sections help you understand and interpret the results of a \n+{classanalysis}.\n+\n+[discrete]\n+[[dfa-classification-class-probability]]\n+===== `class_probability`\n+\n+The value of `class_probability` shows how likely it is that a given datapoint \n+belongs to a certain class. It is a value between 0 and 1. The higher the \n+number, the higher the probability that the data point belongs to the named \n+class. For further details, see the\n+{ml-docs}/flightdata-classification.html#flightdata-classification-results[Viewing {classification} results]\n+section in the {classification} example.\n+\n+\n+[discrete]\n+[[dfa-classification-class-score]]\n+===== `class_score`", "originalCommit": "bef4af89d4153dcaddf25439d2d579b390e48b2a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE0NTEzNQ==", "url": "https://github.com/elastic/stack-docs/pull/885#discussion_r381145135", "bodyText": "AFAIK, class_score has become exposed recently. I'll update the API examples in a separate PR.", "author": "szabosteve", "createdAt": "2020-02-19T08:41:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0OTQxMQ=="}], "type": "inlineReview"}, {"oid": "d90e08594b1be6e3a582bd328898533c09d7edd8", "url": "https://github.com/elastic/stack-docs/commit/d90e08594b1be6e3a582bd328898533c09d7edd8", "message": "Update docs/en/stack/ml/df-analytics/dfa-classification.asciidoc\n\nCo-Authored-By: Lisa Cawley <lcawley@elastic.co>", "committedDate": "2020-02-19T08:07:39Z", "type": "commit"}]}