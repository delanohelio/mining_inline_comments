{"pr_number": 1047, "pr_title": "[DOCS] Update snapshot retention details", "pr_createdAt": "2020-05-07T00:16:29Z", "pr_url": "https://github.com/elastic/stack-docs/pull/1047", "timeline": [{"oid": "bb3e5dfffd959bc0f3045663aee0611e3049877c", "url": "https://github.com/elastic/stack-docs/commit/bb3e5dfffd959bc0f3045663aee0611e3049877c", "message": "[DOCS] Update snapshot retention details", "committedDate": "2020-05-07T00:13:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2ODA5MA==", "url": "https://github.com/elastic/stack-docs/pull/1047#discussion_r421168090", "bodyText": "Do we need to cover how age is calculated here too? For example:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            each day, old snapshots are automatically deleted. By default, if there are\n          \n          \n            \n            each day, old snapshots are automatically deleted. The age of each snapshot is calculated relative to the timestamp of the most recent snapshot. By default, if there are", "author": "lcawl", "createdAt": "2020-05-07T00:25:42Z", "path": "docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc", "diffHunk": "@@ -8,21 +8,28 @@ accomplished by generating models of your data.\n \n To ensure resilience in the event of a system failure, snapshots of the {ml}\n model for each {anomaly-job} are saved to an internal index within the {es}\n-cluster. By default, snapshots are captured approximately every 3 to 4 hours and \n-retained for one day (twenty-four hours). The amount of time necessary to\n-save these snapshots is proportional to the size of the model in memory.\n+cluster. The amount of time necessary to save these snapshots is proportional to\n+the size of the model in memory. By default, snapshots are captured\n+approximately every 3 to 4 hours. You can change this interval\n+(`background_persist_interval`) when you create or update a job.\n \n-You can use the {ref}/ml-update-job.html[update {anomaly-jobs} API] to change\n-the interval (`background_persist_interval`) and retention\n-(`model_snapshot_retention_days`) of these snapshots.\n+To reduce the number of snapshots consuming space on your cluster, at the end of\n+each day, old snapshots are automatically deleted. By default, if there are", "originalCommit": "bb3e5dfffd959bc0f3045663aee0611e3049877c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQwNzkxOQ==", "url": "https://github.com/elastic/stack-docs/pull/1047#discussion_r421407919", "bodyText": "Yes, we probably should, because it's natural to think of \"age\" as being relative to now, and that's not the case here.", "author": "droberts195", "createdAt": "2020-05-07T10:38:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2ODA5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY4NDIxNA==", "url": "https://github.com/elastic/stack-docs/pull/1047#discussion_r421684214", "bodyText": "Thanks, I've implemented those changes.", "author": "lcawl", "createdAt": "2020-05-07T17:48:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2ODA5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTE2ODM5NA==", "url": "https://github.com/elastic/stack-docs/pull/1047#discussion_r421168394", "bodyText": "Likewise, incorporating relative age:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            snapshots over one day old, only the first snapshot for each day is retained.\n          \n          \n            \n            snapshots over one day older than the most recent snapshot, only the first snapshot for each day is retained.", "author": "lcawl", "createdAt": "2020-05-07T00:26:38Z", "path": "docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc", "diffHunk": "@@ -8,21 +8,28 @@ accomplished by generating models of your data.\n \n To ensure resilience in the event of a system failure, snapshots of the {ml}\n model for each {anomaly-job} are saved to an internal index within the {es}\n-cluster. By default, snapshots are captured approximately every 3 to 4 hours and \n-retained for one day (twenty-four hours). The amount of time necessary to\n-save these snapshots is proportional to the size of the model in memory.\n+cluster. The amount of time necessary to save these snapshots is proportional to\n+the size of the model in memory. By default, snapshots are captured\n+approximately every 3 to 4 hours. You can change this interval\n+(`background_persist_interval`) when you create or update a job.\n \n-You can use the {ref}/ml-update-job.html[update {anomaly-jobs} API] to change\n-the interval (`background_persist_interval`) and retention\n-(`model_snapshot_retention_days`) of these snapshots.\n+To reduce the number of snapshots consuming space on your cluster, at the end of\n+each day, old snapshots are automatically deleted. By default, if there are\n+snapshots over one day old, only the first snapshot for each day is retained.", "originalCommit": "bb3e5dfffd959bc0f3045663aee0611e3049877c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2beee2bd5ddda40bc5a0fb8fd89cf96b26ee418c", "url": "https://github.com/elastic/stack-docs/commit/2beee2bd5ddda40bc5a0fb8fd89cf96b26ee418c", "message": "Update docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc", "committedDate": "2020-05-07T17:01:01Z", "type": "commit"}, {"oid": "3542bec9fb9661033ca8a88ae487825c98a04d0c", "url": "https://github.com/elastic/stack-docs/commit/3542bec9fb9661033ca8a88ae487825c98a04d0c", "message": "Update docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc", "committedDate": "2020-05-07T17:01:20Z", "type": "commit"}, {"oid": "740549325d6a0da18d101bb5840cc263cf9b0734", "url": "https://github.com/elastic/stack-docs/commit/740549325d6a0da18d101bb5840cc263cf9b0734", "message": "[DOCS] More edits", "committedDate": "2020-05-07T17:09:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA2OTM3Mw==", "url": "https://github.com/elastic/stack-docs/pull/1047#discussion_r422069373", "bodyText": "Should we link to the APIs where the users can change the interval?", "author": "szabosteve", "createdAt": "2020-05-08T10:30:37Z", "path": "docs/en/stack/ml/anomaly-detection/model-snapshots.asciidoc", "diffHunk": "@@ -8,21 +8,30 @@ accomplished by generating models of your data.\n \n To ensure resilience in the event of a system failure, snapshots of the {ml}\n model for each {anomaly-job} are saved to an internal index within the {es}\n-cluster. By default, snapshots are captured approximately every 3 to 4 hours and \n-retained for one day (twenty-four hours). The amount of time necessary to\n-save these snapshots is proportional to the size of the model in memory.\n+cluster. The amount of time necessary to save these snapshots is proportional to\n+the size of the model in memory. By default, snapshots are captured\n+approximately every 3 to 4 hours. You can change this interval\n+(`background_persist_interval`) when you create or update a job.", "originalCommit": "740549325d6a0da18d101bb5840cc263cf9b0734", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "13d47ddd644295e805fa76d8e479cef81d9c2ee8", "url": "https://github.com/elastic/stack-docs/commit/13d47ddd644295e805fa76d8e479cef81d9c2ee8", "message": "[DOCS] Adds API links", "committedDate": "2020-05-08T16:43:48Z", "type": "commit"}]}