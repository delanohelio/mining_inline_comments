{"pr_number": 1469, "pr_title": "[DOCS] Augment feature importance details for classification", "pr_createdAt": "2020-11-21T02:34:04Z", "pr_url": "https://github.com/elastic/stack-docs/pull/1469", "timeline": [{"oid": "80d123d53a15877109222715e2c1740b0de952f9", "url": "https://github.com/elastic/stack-docs/commit/80d123d53a15877109222715e2c1740b0de952f9", "message": "[DOCS] Augment feature importance details for classification", "committedDate": "2020-11-21T02:32:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODYwOTc1OA==", "url": "https://github.com/elastic/stack-docs/pull/1469#discussion_r528609758", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The snippet below shows an example of the total and baseline {feat-imp} details\n          \n          \n            \n            in the trained model metadata:\n          \n          \n            \n            The snippet below shows an example of the total {feat-imp} and the corresponding baseline\n          \n          \n            \n            in the trained model metadata:", "author": "valeriy42", "createdAt": "2020-11-23T10:40:46Z", "path": "docs/en/stack/ml/df-analytics/flightdata-classification.asciidoc", "diffHunk": "@@ -446,8 +423,8 @@ GET _ml/trained_models/model-flight-delay-classification*?include=total_feature_\n --------------------------------------------------\n // TEST[skip:TBD]\n \n-The snippet below shows an example of the total {feat-imp} details in the\n-trained model metadata:\n+The snippet below shows an example of the total and baseline {feat-imp} details\n+in the trained model metadata:", "originalCommit": "80d123d53a15877109222715e2c1740b0de952f9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODYxMjY2NQ==", "url": "https://github.com/elastic/stack-docs/pull/1469#discussion_r528612665", "bodyText": "correct \ud83d\udc4d", "author": "valeriy42", "createdAt": "2020-11-23T10:45:40Z", "path": "docs/en/stack/ml/df-analytics/flightdata-classification.asciidoc", "diffHunk": "@@ -504,14 +493,71 @@ trained model metadata:\n           },\n           ...\n --------------------------------------------------\n-<1> This value is the average of the absolute {feat-imp} values for the\n+<1> This object contains the baselines that are used to calculate the {feat-imp}\n+decision paths in {kib}.\n+<2> This value is the average of the absolute {feat-imp} values for the\n `dayOfWeek` field across all the training data when the predicted class is\n `false`.\n-<2> This value is the minimum {feat-imp} value across all the training data for\n+<3> This value is the minimum {feat-imp} value across all the training data for\n this field when the predicted class is `false`.\n-<3> This value is the maximum {feat-imp} value across all the training data for\n+<4> This value is the maximum {feat-imp} value across all the training data for\n this field when the predicted class is `false`.\n \n+To see the top {feat-imp} values for each prediction, search the destination\n+index. For example:\n+\n+[source,console]\n+--------------------------------------------------\n+GET model-flight-delay-classification/_search\n+--------------------------------------------------\n+// TEST[skip:TBD]\n+\n+The snippet below shows an example of the {feat-imp} details for a document in\n+the search results:\n+\n+[source,console-result]\n+--------------------------------------------------  \n+          ...\n+          \"FlightDelay\" : false,\n+          ...\n+          \"ml\" : {\n+            \"FlightDelay_prediction\" : false,\n+            ...\n+            \"prediction_probability\" : 0.9427605087816684,\n+            \"prediction_score\" : 0.3462468700158476,\n+            \"feature_importance\" : [\n+              {\n+                \"feature_name\" : \"DistanceMiles\",\n+                \"classes\" : [\n+                  {\n+                    \"class_name\" : false,\n+                    \"importance\" : -1.4766536146534828\n+                  },\n+                  {\n+                    \"class_name\" : true,\n+                    \"importance\" : 1.4766536146534828\n+                  }\n+                ]\n+              },\n+              {\n+                \"feature_name\" : \"FlightTimeMin\",\n+                \"classes\" : [\n+                  {\n+                    \"class_name\" : false,\n+                    \"importance\" : 1.0919201754729184\n+                  },\n+                  {\n+                    \"class_name\" : true,\n+                    \"importance\" : -1.0919201754729184\n+                  }\n+                ]\n+              },\n+              ...\n+--------------------------------------------------\n+\n+The sum of the {feat-imp} values for each class in this data point approximates\n+the logarithm of its odds.", "originalCommit": "80d123d53a15877109222715e2c1740b0de952f9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fcfcd12454c308551b1dbf86290a3eb23d12c56d", "url": "https://github.com/elastic/stack-docs/commit/fcfcd12454c308551b1dbf86290a3eb23d12c56d", "message": "Update docs/en/stack/ml/df-analytics/flightdata-classification.asciidoc\n\nCo-authored-by: Valeriy Khakhutskyy <1292899+valeriy42@users.noreply.github.com>", "committedDate": "2020-11-23T15:36:26Z", "type": "commit"}]}