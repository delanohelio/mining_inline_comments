{"pr_number": 1148, "pr_title": "Add Ingest Manager Troubleshooting FAQ doc", "pr_createdAt": "2020-06-11T02:22:02Z", "pr_url": "https://github.com/elastic/stack-docs/pull/1148", "timeline": [{"oid": "11c3a52c08f15a941cc5086628be67aac0549acf", "url": "https://github.com/elastic/stack-docs/commit/11c3a52c08f15a941cc5086628be67aac0549acf", "message": "first pass at trouble shooting additions", "committedDate": "2020-06-10T23:07:32Z", "type": "commit"}, {"oid": "34cf10e4bae7b1d447c8b51cb0b43d1db25d392b", "url": "https://github.com/elastic/stack-docs/commit/34cf10e4bae7b1d447c8b51cb0b43d1db25d392b", "message": "2nd and final round of faq notes", "committedDate": "2020-06-11T02:11:00Z", "type": "commit"}, {"oid": "1058768fe2093f3e2ca88cade6849f59b715bb96", "url": "https://github.com/elastic/stack-docs/commit/1058768fe2093f3e2ca88cade6849f59b715bb96", "message": "minor typo fixes for troubleshooting docs", "committedDate": "2020-06-11T02:14:47Z", "type": "commit"}, {"oid": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "url": "https://github.com/elastic/stack-docs/commit/9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "message": "Merge pull request #1 from EricDavisX/ingest-troubleshooting-docs", "committedDate": "2020-06-11T02:20:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0MzUwMw==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438943503", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When started successfully, the logs are in the folder where the Agent was started, in a sub-directory 'data/logs/metricbeat'\n          \n          \n            \n            When started successfully, the logs are in the folder where the Agent was started, in a sub-directory `data/logs/metricbeat`.", "author": "dedemorton", "createdAt": "2020-06-11T17:15:17Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options.  To enable {ingest-manager} on cloud, go to your deployment in the user console.  Click on the 'edit' link directly beneath the deployment name.  Then click on 'user setting overrides' underneath the Kibana heading.  Here you must enter the following x-pack option and click the save button at the bottom:\n+xpack.ingestManager.enabled: true\n+\n+This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation\n+\n+[[ingest-management-setup-fails]]\n+=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n+\n+In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n+\n+[[ingest-manager-app-crashes]]\n === The {ingest-manager} app in Kibana crashes.\n \n To find more about the error, open the development console of your browser, navigate to the **Network** tab and refresh the page. One of the requests to the Ingest Manager API will most likely have returned with an error. If the error message doesn't give you enough information to fix the problem on your own, please contact us https://ela.st/ingest-manager-feedback{here}.\n \n-=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n \n-In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n\\ No newline at end of file\n+[[agent-enrollment-timeout]]\n+=== I get a time-out when I try to run the agent enrollment on my host\n+This can look like the below console output: \n+fail to enroll: fail to execute request to Kibana: Post http://kibana:5601/api/ingest_manager/fleet/agents/enroll?: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)\n+\n+This is possibly due to a connectivity problem with the host talking to the Kibana instance.  It may be a networking problem, attempt a 'ping' command from the host to confirm it can reach the Kibana instance.  If this works, then it could be a problem with the specified enrollment command executed.  If 'ping' works, check the URL and port, both are correct for your environment.  If those are correct and working, check the enrollment key in the enrollment command you are trying to execute is valid.  You can do this by viewing the Fleet ui in {ingest-manager} and clicking on the Enrollment Tokens tab.  If you click the 'eyeball' for each listed secret, one listed should match the string being used in your host's enrollment command. If it is not listed, create a new enrollment token and replace it in the command, this can be done in that same UI.\n+\n+[[enrolled-agent-not-showing-up]]\n+=== I ran the Agent enrollment step but I don\u2019t see the Agent in the UI\n+If Elastic Agent was successfully enrolled, but doesn't show up in the Fleet list a common problem is that it was not 'started'.  Starting the Agent is a separate step which can be done as follows as the below.\n+\n+On linux & macos hosts:\n+./elastic-agent run\n+\n+On Windows hosts:\n+elastic-agent.exe run\n+\n+[[where-are-the-agent-logs]]\n+=== I need to find the logs when the Agent starts up\n+\n+When started successfully, the logs are in the folder where the Agent was started, in a sub-directory 'data/logs/metricbeat'", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0MzY0MQ==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438943641", "bodyText": "Add line break after heading.", "author": "dedemorton", "createdAt": "2020-06-11T17:15:32Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options.  To enable {ingest-manager} on cloud, go to your deployment in the user console.  Click on the 'edit' link directly beneath the deployment name.  Then click on 'user setting overrides' underneath the Kibana heading.  Here you must enter the following x-pack option and click the save button at the bottom:\n+xpack.ingestManager.enabled: true\n+\n+This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation\n+\n+[[ingest-management-setup-fails]]\n+=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n+\n+In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n+\n+[[ingest-manager-app-crashes]]\n === The {ingest-manager} app in Kibana crashes.\n \n To find more about the error, open the development console of your browser, navigate to the **Network** tab and refresh the page. One of the requests to the Ingest Manager API will most likely have returned with an error. If the error message doesn't give you enough information to fix the problem on your own, please contact us https://ela.st/ingest-manager-feedback{here}.\n \n-=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n \n-In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n\\ No newline at end of file\n+[[agent-enrollment-timeout]]\n+=== I get a time-out when I try to run the agent enrollment on my host\n+This can look like the below console output: ", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0NTEzOA==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438945138", "bodyText": "Do this throughout the file.", "author": "dedemorton", "createdAt": "2020-06-11T17:18:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0MzY0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2OTQ0Mg==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438969442", "bodyText": "will do, thanks for noting it.", "author": "EricDavisX", "createdAt": "2020-06-11T17:54:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0MzY0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0Mzk3Nw==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438943977", "bodyText": "Do you want all of this info to be on the same page, or each problem to be a separate topic?", "author": "dedemorton", "createdAt": "2020-06-11T17:16:11Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2OTczNw==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438969737", "bodyText": "I'm fine personally with one page.  Its not so long as to be a problem as I see it.", "author": "EricDavisX", "createdAt": "2020-06-11T17:54:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0Mzk3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3Mjc3Nw==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438972777", "bodyText": "The same page look a good idea, I assume we that page to reduce in the upcoming releases.", "author": "ph", "createdAt": "2020-06-11T17:59:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0Mzk3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0NzkxOA==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438947918", "bodyText": "\"Its ok, be cool\" might not work for some folks (it's kind of like saying calm down). :-) Maybe just say, \"That's OK. The data is....\"", "author": "dedemorton", "createdAt": "2020-06-11T17:23:19Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options.  To enable {ingest-manager} on cloud, go to your deployment in the user console.  Click on the 'edit' link directly beneath the deployment name.  Then click on 'user setting overrides' underneath the Kibana heading.  Here you must enter the following x-pack option and click the save button at the bottom:\n+xpack.ingestManager.enabled: true\n+\n+This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation\n+\n+[[ingest-management-setup-fails]]\n+=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n+\n+In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n+\n+[[ingest-manager-app-crashes]]\n === The {ingest-manager} app in Kibana crashes.\n \n To find more about the error, open the development console of your browser, navigate to the **Network** tab and refresh the page. One of the requests to the Ingest Manager API will most likely have returned with an error. If the error message doesn't give you enough information to fix the problem on your own, please contact us https://ela.st/ingest-manager-feedback{here}.\n \n-=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n \n-In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n\\ No newline at end of file\n+[[agent-enrollment-timeout]]\n+=== I get a time-out when I try to run the agent enrollment on my host\n+This can look like the below console output: \n+fail to enroll: fail to execute request to Kibana: Post http://kibana:5601/api/ingest_manager/fleet/agents/enroll?: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)\n+\n+This is possibly due to a connectivity problem with the host talking to the Kibana instance.  It may be a networking problem, attempt a 'ping' command from the host to confirm it can reach the Kibana instance.  If this works, then it could be a problem with the specified enrollment command executed.  If 'ping' works, check the URL and port, both are correct for your environment.  If those are correct and working, check the enrollment key in the enrollment command you are trying to execute is valid.  You can do this by viewing the Fleet ui in {ingest-manager} and clicking on the Enrollment Tokens tab.  If you click the 'eyeball' for each listed secret, one listed should match the string being used in your host's enrollment command. If it is not listed, create a new enrollment token and replace it in the command, this can be done in that same UI.\n+\n+[[enrolled-agent-not-showing-up]]\n+=== I ran the Agent enrollment step but I don\u2019t see the Agent in the UI\n+If Elastic Agent was successfully enrolled, but doesn't show up in the Fleet list a common problem is that it was not 'started'.  Starting the Agent is a separate step which can be done as follows as the below.\n+\n+On linux & macos hosts:\n+./elastic-agent run\n+\n+On Windows hosts:\n+elastic-agent.exe run\n+\n+[[where-are-the-agent-logs]]\n+=== I need to find the logs when the Agent starts up\n+\n+When started successfully, the logs are in the folder where the Agent was started, in a sub-directory 'data/logs/metricbeat'\n+If that path of logs does not exist, it indicates Agent did not successfully run metricbeat, which is a higher level problem to triage.\n+\n+[[what-is-my-agent-config]]\n+=== I need to know the configuration used in the running Agent.\n+\n+You can inspect the files in the folder from where you ran the Agent.  The elastic-agent.yml file will have an uncommented citation if it is in 'Fleet' mode:\n+Management: mode: \"fleet\"\n+\n+The action_store.yml has the whole configuration, unencrypted.  Look for 'outputs:hosts' section with elasticsearch location.  This file will also have the current versions of the packages in use by the current configuration.  The version of the Agent is in the download folder / zip.\n+\n+[[where-is-the-data-agent-is-sending]]\n+=== I'm not sure {ingest-manager} app is showing the data my Agent is sending.\n+\n+I think I have Agent set up and running and there are no errors on the Agent logs and I still don't see data in Kibana.  The recommended way to assess this is to go straight to Elasticsearch data queries, or maybe just use Kibana Discover app.  Look for any data in the index your Agent is sending to (metrics-* for example) and see if the name.host of your host machine shows.  If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the Agent host correctly in the first place due to some Firewall or security reason.  While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the Agent side.\n+\n+[[i-deleted-my-agent]]\n+=== I deleted my agent in the Fleet {ingest-manager} app so now what?\n+\n+Its ok, be cool: the data is still in Elasticsearch.  But to get the Agent back in the UI, you will need to stop, then re-enroll the Agent on the host and run it again.", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1MTQyNA==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438951424", "bodyText": "Not sure if this should be in troubleshooting. If we leave it in this section, we need to describe the problem that users encounter and how to solve it. Is the problem that they deleted it from Fleet and can't figure out how to make it show up again?\nI guess the other option is to make this a general FAQ. But I do think that some of the info covered here should be in main docs.", "author": "dedemorton", "createdAt": "2020-06-11T17:29:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0NzkxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3NDkwNw==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438974907", "bodyText": "yeah, I purposefully tried to put something light-hearted here, I'll tone it down.  Its a fine line to walk, thanks for the note.\nI think I'd like to leave this in the spirit of a combined FAQ and Troubleshooting doc.  When we split them we can move content around for sure.  I could re-phrase things in the form of a question, but this seemed straight forward and transparent and I'm don't see the value at present time, we can iterate on it later right?", "author": "EricDavisX", "createdAt": "2020-06-11T18:02:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0NzkxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0ODQ4Mg==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438948482", "bodyText": "This doesn't seem like a troubleshooting topic. Seems like something that belongs somewhere else in the docs. If you want, I can more it over and put it in the correct style for the docs.", "author": "dedemorton", "createdAt": "2020-06-11T17:24:20Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options.  To enable {ingest-manager} on cloud, go to your deployment in the user console.  Click on the 'edit' link directly beneath the deployment name.  Then click on 'user setting overrides' underneath the Kibana heading.  Here you must enter the following x-pack option and click the save button at the bottom:\n+xpack.ingestManager.enabled: true\n+\n+This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation\n+\n+[[ingest-management-setup-fails]]\n+=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n+\n+In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n+\n+[[ingest-manager-app-crashes]]\n === The {ingest-manager} app in Kibana crashes.\n \n To find more about the error, open the development console of your browser, navigate to the **Network** tab and refresh the page. One of the requests to the Ingest Manager API will most likely have returned with an error. If the error message doesn't give you enough information to fix the problem on your own, please contact us https://ela.st/ingest-manager-feedback{here}.\n \n-=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n \n-In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n\\ No newline at end of file\n+[[agent-enrollment-timeout]]\n+=== I get a time-out when I try to run the agent enrollment on my host\n+This can look like the below console output: \n+fail to enroll: fail to execute request to Kibana: Post http://kibana:5601/api/ingest_manager/fleet/agents/enroll?: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)\n+\n+This is possibly due to a connectivity problem with the host talking to the Kibana instance.  It may be a networking problem, attempt a 'ping' command from the host to confirm it can reach the Kibana instance.  If this works, then it could be a problem with the specified enrollment command executed.  If 'ping' works, check the URL and port, both are correct for your environment.  If those are correct and working, check the enrollment key in the enrollment command you are trying to execute is valid.  You can do this by viewing the Fleet ui in {ingest-manager} and clicking on the Enrollment Tokens tab.  If you click the 'eyeball' for each listed secret, one listed should match the string being used in your host's enrollment command. If it is not listed, create a new enrollment token and replace it in the command, this can be done in that same UI.\n+\n+[[enrolled-agent-not-showing-up]]\n+=== I ran the Agent enrollment step but I don\u2019t see the Agent in the UI\n+If Elastic Agent was successfully enrolled, but doesn't show up in the Fleet list a common problem is that it was not 'started'.  Starting the Agent is a separate step which can be done as follows as the below.\n+\n+On linux & macos hosts:\n+./elastic-agent run\n+\n+On Windows hosts:\n+elastic-agent.exe run\n+\n+[[where-are-the-agent-logs]]\n+=== I need to find the logs when the Agent starts up\n+\n+When started successfully, the logs are in the folder where the Agent was started, in a sub-directory 'data/logs/metricbeat'\n+If that path of logs does not exist, it indicates Agent did not successfully run metricbeat, which is a higher level problem to triage.\n+\n+[[what-is-my-agent-config]]\n+=== I need to know the configuration used in the running Agent.\n+\n+You can inspect the files in the folder from where you ran the Agent.  The elastic-agent.yml file will have an uncommented citation if it is in 'Fleet' mode:\n+Management: mode: \"fleet\"\n+\n+The action_store.yml has the whole configuration, unencrypted.  Look for 'outputs:hosts' section with elasticsearch location.  This file will also have the current versions of the packages in use by the current configuration.  The version of the Agent is in the download folder / zip.\n+\n+[[where-is-the-data-agent-is-sending]]\n+=== I'm not sure {ingest-manager} app is showing the data my Agent is sending.\n+\n+I think I have Agent set up and running and there are no errors on the Agent logs and I still don't see data in Kibana.  The recommended way to assess this is to go straight to Elasticsearch data queries, or maybe just use Kibana Discover app.  Look for any data in the index your Agent is sending to (metrics-* for example) and see if the name.host of your host machine shows.  If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the Agent host correctly in the first place due to some Firewall or security reason.  While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the Agent side.\n+\n+[[i-deleted-my-agent]]\n+=== I deleted my agent in the Fleet {ingest-manager} app so now what?\n+\n+Its ok, be cool: the data is still in Elasticsearch.  But to get the Agent back in the UI, you will need to stop, then re-enroll the Agent on the host and run it again.\n+\n+[[i-need-to-stop-agent]]\n+=== I need to stop the Agent and all processes running on my host", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3NjIyNw==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438976227", "bodyText": "This is fair, but for the sake of helping users triage and use material, I'd like to leave it here - if it also benefits them to be elsewhere we can add it where it needs to be?  We have a whole slew of content about using the product that is surely to be worked on (I haven't looked at any of it) and this is just one portion that impacts a user's personal set of host systems and it seems helpful to leave (even if intentionally overlapping).", "author": "EricDavisX", "createdAt": "2020-06-11T18:05:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0ODQ4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0ODg5MQ==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438948891", "bodyText": "This doesn't seem like a troubleshooting topic. Maybe this is something we should explain somewhere else in the docs?", "author": "dedemorton", "createdAt": "2020-06-11T17:25:03Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options.  To enable {ingest-manager} on cloud, go to your deployment in the user console.  Click on the 'edit' link directly beneath the deployment name.  Then click on 'user setting overrides' underneath the Kibana heading.  Here you must enter the following x-pack option and click the save button at the bottom:\n+xpack.ingestManager.enabled: true\n+\n+This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation\n+\n+[[ingest-management-setup-fails]]\n+=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n+\n+In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n+\n+[[ingest-manager-app-crashes]]\n === The {ingest-manager} app in Kibana crashes.\n \n To find more about the error, open the development console of your browser, navigate to the **Network** tab and refresh the page. One of the requests to the Ingest Manager API will most likely have returned with an error. If the error message doesn't give you enough information to fix the problem on your own, please contact us https://ela.st/ingest-manager-feedback{here}.\n \n-=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n \n-In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n\\ No newline at end of file\n+[[agent-enrollment-timeout]]\n+=== I get a time-out when I try to run the agent enrollment on my host\n+This can look like the below console output: \n+fail to enroll: fail to execute request to Kibana: Post http://kibana:5601/api/ingest_manager/fleet/agents/enroll?: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)\n+\n+This is possibly due to a connectivity problem with the host talking to the Kibana instance.  It may be a networking problem, attempt a 'ping' command from the host to confirm it can reach the Kibana instance.  If this works, then it could be a problem with the specified enrollment command executed.  If 'ping' works, check the URL and port, both are correct for your environment.  If those are correct and working, check the enrollment key in the enrollment command you are trying to execute is valid.  You can do this by viewing the Fleet ui in {ingest-manager} and clicking on the Enrollment Tokens tab.  If you click the 'eyeball' for each listed secret, one listed should match the string being used in your host's enrollment command. If it is not listed, create a new enrollment token and replace it in the command, this can be done in that same UI.\n+\n+[[enrolled-agent-not-showing-up]]\n+=== I ran the Agent enrollment step but I don\u2019t see the Agent in the UI\n+If Elastic Agent was successfully enrolled, but doesn't show up in the Fleet list a common problem is that it was not 'started'.  Starting the Agent is a separate step which can be done as follows as the below.\n+\n+On linux & macos hosts:\n+./elastic-agent run\n+\n+On Windows hosts:\n+elastic-agent.exe run\n+\n+[[where-are-the-agent-logs]]\n+=== I need to find the logs when the Agent starts up\n+\n+When started successfully, the logs are in the folder where the Agent was started, in a sub-directory 'data/logs/metricbeat'\n+If that path of logs does not exist, it indicates Agent did not successfully run metricbeat, which is a higher level problem to triage.\n+\n+[[what-is-my-agent-config]]\n+=== I need to know the configuration used in the running Agent.", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3MTQ5OQ==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438971499", "bodyText": "its a troubleshooting topic in that its one of the first things an Engineer or Support Engineer will ask a user when trying to troubleshoot or support them - I think its extremely valuable, and fairly appropriate here.  But if we have a better place I'm certainly fine to move it.  I don't know the docs structure tho as to what is better for this tho.", "author": "EricDavisX", "createdAt": "2020-06-11T17:56:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk0ODg5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1Mjc0NA==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438952744", "bodyText": "Can you restate the following sentence? It's a little ambiguous: \"The ability to enhance support for those operating systems is known...\"\nYou also have a comma splice (two sentences joined by a comma). Make them separate sentences.", "author": "dedemorton", "createdAt": "2020-06-11T17:31:50Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options.  To enable {ingest-manager} on cloud, go to your deployment in the user console.  Click on the 'edit' link directly beneath the deployment name.  Then click on 'user setting overrides' underneath the Kibana heading.  Here you must enter the following x-pack option and click the save button at the bottom:\n+xpack.ingestManager.enabled: true\n+\n+This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation\n+\n+[[ingest-management-setup-fails]]\n+=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n+\n+In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n+\n+[[ingest-manager-app-crashes]]\n === The {ingest-manager} app in Kibana crashes.\n \n To find more about the error, open the development console of your browser, navigate to the **Network** tab and refresh the page. One of the requests to the Ingest Manager API will most likely have returned with an error. If the error message doesn't give you enough information to fix the problem on your own, please contact us https://ela.st/ingest-manager-feedback{here}.\n \n-=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n \n-In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n\\ No newline at end of file\n+[[agent-enrollment-timeout]]\n+=== I get a time-out when I try to run the agent enrollment on my host\n+This can look like the below console output: \n+fail to enroll: fail to execute request to Kibana: Post http://kibana:5601/api/ingest_manager/fleet/agents/enroll?: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)\n+\n+This is possibly due to a connectivity problem with the host talking to the Kibana instance.  It may be a networking problem, attempt a 'ping' command from the host to confirm it can reach the Kibana instance.  If this works, then it could be a problem with the specified enrollment command executed.  If 'ping' works, check the URL and port, both are correct for your environment.  If those are correct and working, check the enrollment key in the enrollment command you are trying to execute is valid.  You can do this by viewing the Fleet ui in {ingest-manager} and clicking on the Enrollment Tokens tab.  If you click the 'eyeball' for each listed secret, one listed should match the string being used in your host's enrollment command. If it is not listed, create a new enrollment token and replace it in the command, this can be done in that same UI.\n+\n+[[enrolled-agent-not-showing-up]]\n+=== I ran the Agent enrollment step but I don\u2019t see the Agent in the UI\n+If Elastic Agent was successfully enrolled, but doesn't show up in the Fleet list a common problem is that it was not 'started'.  Starting the Agent is a separate step which can be done as follows as the below.\n+\n+On linux & macos hosts:\n+./elastic-agent run\n+\n+On Windows hosts:\n+elastic-agent.exe run\n+\n+[[where-are-the-agent-logs]]\n+=== I need to find the logs when the Agent starts up\n+\n+When started successfully, the logs are in the folder where the Agent was started, in a sub-directory 'data/logs/metricbeat'\n+If that path of logs does not exist, it indicates Agent did not successfully run metricbeat, which is a higher level problem to triage.\n+\n+[[what-is-my-agent-config]]\n+=== I need to know the configuration used in the running Agent.\n+\n+You can inspect the files in the folder from where you ran the Agent.  The elastic-agent.yml file will have an uncommented citation if it is in 'Fleet' mode:\n+Management: mode: \"fleet\"\n+\n+The action_store.yml has the whole configuration, unencrypted.  Look for 'outputs:hosts' section with elasticsearch location.  This file will also have the current versions of the packages in use by the current configuration.  The version of the Agent is in the download folder / zip.\n+\n+[[where-is-the-data-agent-is-sending]]\n+=== I'm not sure {ingest-manager} app is showing the data my Agent is sending.\n+\n+I think I have Agent set up and running and there are no errors on the Agent logs and I still don't see data in Kibana.  The recommended way to assess this is to go straight to Elasticsearch data queries, or maybe just use Kibana Discover app.  Look for any data in the index your Agent is sending to (metrics-* for example) and see if the name.host of your host machine shows.  If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the Agent host correctly in the first place due to some Firewall or security reason.  While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the Agent side.\n+\n+[[i-deleted-my-agent]]\n+=== I deleted my agent in the Fleet {ingest-manager} app so now what?\n+\n+Its ok, be cool: the data is still in Elasticsearch.  But to get the Agent back in the UI, you will need to stop, then re-enroll the Agent on the host and run it again.\n+\n+[[i-need-to-stop-agent]]\n+=== I need to stop the Agent and all processes running on my host\n+\n+To stop the Agent and relating executables running on my hosts is as easy as stopping the Agent process.  If you installed it as a service on Windows you will need to manage that, as well.  After that, if needed, on Windows you can use Task Manager and shut down \u2018Elastic Agent\u2019 which will kill it and the sub-processes it created (beats).  On Linux / macOS you can kill the elastic-agent process running, look with a ps | grep elastic-agent call to get the id to kill\n+\n+[[i-rebooted-my-host]]\n+=== I needed to reboot my host, I'm not sure if the Agent is still running.\n+\n+If you installed Windows Agent as a service with powershell, the Agent should still be running after a reboot of the host.  On macOS and Linux you will need to start the Agent again from the command line each time.  The ability to enhance support for those operating systems is known, as a temporary fix you could add that start command to a start up profile.", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3NjgxNg==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438976816", "bodyText": "I don't know what the best way to reference known coming feature work is.  Happy to split the splice.", "author": "EricDavisX", "createdAt": "2020-06-11T18:06:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1Mjc0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk5MDgwNw==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438990807", "bodyText": "i restated it, is it better enough / ok now?  happy to see any edits on it further", "author": "EricDavisX", "createdAt": "2020-06-11T18:32:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1Mjc0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1MzMyNQ==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438953325", "bodyText": "I'd state this more like a problem. What problem does the user encounter when they try to use the endpoint?", "author": "dedemorton", "createdAt": "2020-06-11T17:32:57Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options.  To enable {ingest-manager} on cloud, go to your deployment in the user console.  Click on the 'edit' link directly beneath the deployment name.  Then click on 'user setting overrides' underneath the Kibana heading.  Here you must enter the following x-pack option and click the save button at the bottom:\n+xpack.ingestManager.enabled: true\n+\n+This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation\n+\n+[[ingest-management-setup-fails]]\n+=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n+\n+In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n+\n+[[ingest-manager-app-crashes]]\n === The {ingest-manager} app in Kibana crashes.\n \n To find more about the error, open the development console of your browser, navigate to the **Network** tab and refresh the page. One of the requests to the Ingest Manager API will most likely have returned with an error. If the error message doesn't give you enough information to fix the problem on your own, please contact us https://ela.st/ingest-manager-feedback{here}.\n \n-=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n \n-In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n\\ No newline at end of file\n+[[agent-enrollment-timeout]]\n+=== I get a time-out when I try to run the agent enrollment on my host\n+This can look like the below console output: \n+fail to enroll: fail to execute request to Kibana: Post http://kibana:5601/api/ingest_manager/fleet/agents/enroll?: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)\n+\n+This is possibly due to a connectivity problem with the host talking to the Kibana instance.  It may be a networking problem, attempt a 'ping' command from the host to confirm it can reach the Kibana instance.  If this works, then it could be a problem with the specified enrollment command executed.  If 'ping' works, check the URL and port, both are correct for your environment.  If those are correct and working, check the enrollment key in the enrollment command you are trying to execute is valid.  You can do this by viewing the Fleet ui in {ingest-manager} and clicking on the Enrollment Tokens tab.  If you click the 'eyeball' for each listed secret, one listed should match the string being used in your host's enrollment command. If it is not listed, create a new enrollment token and replace it in the command, this can be done in that same UI.\n+\n+[[enrolled-agent-not-showing-up]]\n+=== I ran the Agent enrollment step but I don\u2019t see the Agent in the UI\n+If Elastic Agent was successfully enrolled, but doesn't show up in the Fleet list a common problem is that it was not 'started'.  Starting the Agent is a separate step which can be done as follows as the below.\n+\n+On linux & macos hosts:\n+./elastic-agent run\n+\n+On Windows hosts:\n+elastic-agent.exe run\n+\n+[[where-are-the-agent-logs]]\n+=== I need to find the logs when the Agent starts up\n+\n+When started successfully, the logs are in the folder where the Agent was started, in a sub-directory 'data/logs/metricbeat'\n+If that path of logs does not exist, it indicates Agent did not successfully run metricbeat, which is a higher level problem to triage.\n+\n+[[what-is-my-agent-config]]\n+=== I need to know the configuration used in the running Agent.\n+\n+You can inspect the files in the folder from where you ran the Agent.  The elastic-agent.yml file will have an uncommented citation if it is in 'Fleet' mode:\n+Management: mode: \"fleet\"\n+\n+The action_store.yml has the whole configuration, unencrypted.  Look for 'outputs:hosts' section with elasticsearch location.  This file will also have the current versions of the packages in use by the current configuration.  The version of the Agent is in the download folder / zip.\n+\n+[[where-is-the-data-agent-is-sending]]\n+=== I'm not sure {ingest-manager} app is showing the data my Agent is sending.\n+\n+I think I have Agent set up and running and there are no errors on the Agent logs and I still don't see data in Kibana.  The recommended way to assess this is to go straight to Elasticsearch data queries, or maybe just use Kibana Discover app.  Look for any data in the index your Agent is sending to (metrics-* for example) and see if the name.host of your host machine shows.  If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the Agent host correctly in the first place due to some Firewall or security reason.  While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the Agent side.\n+\n+[[i-deleted-my-agent]]\n+=== I deleted my agent in the Fleet {ingest-manager} app so now what?\n+\n+Its ok, be cool: the data is still in Elasticsearch.  But to get the Agent back in the UI, you will need to stop, then re-enroll the Agent on the host and run it again.\n+\n+[[i-need-to-stop-agent]]\n+=== I need to stop the Agent and all processes running on my host\n+\n+To stop the Agent and relating executables running on my hosts is as easy as stopping the Agent process.  If you installed it as a service on Windows you will need to manage that, as well.  After that, if needed, on Windows you can use Task Manager and shut down \u2018Elastic Agent\u2019 which will kill it and the sub-processes it created (beats).  On Linux / macOS you can kill the elastic-agent process running, look with a ps | grep elastic-agent call to get the id to kill\n+\n+[[i-rebooted-my-host]]\n+=== I needed to reboot my host, I'm not sure if the Agent is still running.\n+\n+If you installed Windows Agent as a service with powershell, the Agent should still be running after a reboot of the host.  On macOS and Linux you will need to start the Agent again from the command line each time.  The ability to enhance support for those operating systems is known, as a temporary fix you could add that start command to a start up profile.\n+\n+[[what-is-the-endpoint-package]]\n+=== The {ingest-manager} app shows an Integration called 'Endpoint' and I want to use it.", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3NzY4Ng==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438977686", "bodyText": "I don't know for sure and finding out now isn't in scope of our milestone.  I'm open to having this re-written but it was also intentionally left as a playful note and teaser about the coming Integration.  Knowing that I don't know how it will impact things, do you have any specific suggestions we'd want to do?", "author": "EricDavisX", "createdAt": "2020-06-11T18:07:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1MzMyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1NDEzOA==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438954138", "bodyText": "Might be a good chance to get in a plug for cloud here. :-)", "author": "dedemorton", "createdAt": "2020-06-11T17:34:30Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options.  To enable {ingest-manager} on cloud, go to your deployment in the user console.  Click on the 'edit' link directly beneath the deployment name.  Then click on 'user setting overrides' underneath the Kibana heading.  Here you must enter the following x-pack option and click the save button at the bottom:\n+xpack.ingestManager.enabled: true\n+\n+This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation\n+\n+[[ingest-management-setup-fails]]\n+=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n+\n+In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n+\n+[[ingest-manager-app-crashes]]\n === The {ingest-manager} app in Kibana crashes.\n \n To find more about the error, open the development console of your browser, navigate to the **Network** tab and refresh the page. One of the requests to the Ingest Manager API will most likely have returned with an error. If the error message doesn't give you enough information to fix the problem on your own, please contact us https://ela.st/ingest-manager-feedback{here}.\n \n-=== The endpoint `/api/ingest_management/setup` returns an error that the package registry can't be reached.\n \n-In order to install {integrations}, the {ingest-manager} app needs to connect to an external service, the {package-registry}. For this to work, Kibana server must be able to connect to http://epr-experimental.elastic.co on port 80.\n\\ No newline at end of file\n+[[agent-enrollment-timeout]]\n+=== I get a time-out when I try to run the agent enrollment on my host\n+This can look like the below console output: \n+fail to enroll: fail to execute request to Kibana: Post http://kibana:5601/api/ingest_manager/fleet/agents/enroll?: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)\n+\n+This is possibly due to a connectivity problem with the host talking to the Kibana instance.  It may be a networking problem, attempt a 'ping' command from the host to confirm it can reach the Kibana instance.  If this works, then it could be a problem with the specified enrollment command executed.  If 'ping' works, check the URL and port, both are correct for your environment.  If those are correct and working, check the enrollment key in the enrollment command you are trying to execute is valid.  You can do this by viewing the Fleet ui in {ingest-manager} and clicking on the Enrollment Tokens tab.  If you click the 'eyeball' for each listed secret, one listed should match the string being used in your host's enrollment command. If it is not listed, create a new enrollment token and replace it in the command, this can be done in that same UI.\n+\n+[[enrolled-agent-not-showing-up]]\n+=== I ran the Agent enrollment step but I don\u2019t see the Agent in the UI\n+If Elastic Agent was successfully enrolled, but doesn't show up in the Fleet list a common problem is that it was not 'started'.  Starting the Agent is a separate step which can be done as follows as the below.\n+\n+On linux & macos hosts:\n+./elastic-agent run\n+\n+On Windows hosts:\n+elastic-agent.exe run\n+\n+[[where-are-the-agent-logs]]\n+=== I need to find the logs when the Agent starts up\n+\n+When started successfully, the logs are in the folder where the Agent was started, in a sub-directory 'data/logs/metricbeat'\n+If that path of logs does not exist, it indicates Agent did not successfully run metricbeat, which is a higher level problem to triage.\n+\n+[[what-is-my-agent-config]]\n+=== I need to know the configuration used in the running Agent.\n+\n+You can inspect the files in the folder from where you ran the Agent.  The elastic-agent.yml file will have an uncommented citation if it is in 'Fleet' mode:\n+Management: mode: \"fleet\"\n+\n+The action_store.yml has the whole configuration, unencrypted.  Look for 'outputs:hosts' section with elasticsearch location.  This file will also have the current versions of the packages in use by the current configuration.  The version of the Agent is in the download folder / zip.\n+\n+[[where-is-the-data-agent-is-sending]]\n+=== I'm not sure {ingest-manager} app is showing the data my Agent is sending.\n+\n+I think I have Agent set up and running and there are no errors on the Agent logs and I still don't see data in Kibana.  The recommended way to assess this is to go straight to Elasticsearch data queries, or maybe just use Kibana Discover app.  Look for any data in the index your Agent is sending to (metrics-* for example) and see if the name.host of your host machine shows.  If not, then perhaps the data is getting trapped / blocked in the network or isn't sent off of the Agent host correctly in the first place due to some Firewall or security reason.  While it should be redundant, it is all the same potentially helpful to install the stand-alone Metricbeat (see the Elastic docs for information) to see if that works to send data into ES, which would indicate a bug or problem in the Agent side.\n+\n+[[i-deleted-my-agent]]\n+=== I deleted my agent in the Fleet {ingest-manager} app so now what?\n+\n+Its ok, be cool: the data is still in Elasticsearch.  But to get the Agent back in the UI, you will need to stop, then re-enroll the Agent on the host and run it again.\n+\n+[[i-need-to-stop-agent]]\n+=== I need to stop the Agent and all processes running on my host\n+\n+To stop the Agent and relating executables running on my hosts is as easy as stopping the Agent process.  If you installed it as a service on Windows you will need to manage that, as well.  After that, if needed, on Windows you can use Task Manager and shut down \u2018Elastic Agent\u2019 which will kill it and the sub-processes it created (beats).  On Linux / macOS you can kill the elastic-agent process running, look with a ps | grep elastic-agent call to get the id to kill\n+\n+[[i-rebooted-my-host]]\n+=== I needed to reboot my host, I'm not sure if the Agent is still running.\n+\n+If you installed Windows Agent as a service with powershell, the Agent should still be running after a reboot of the host.  On macOS and Linux you will need to start the Agent again from the command line each time.  The ability to enhance support for those operating systems is known, as a temporary fix you could add that start command to a start up profile.\n+\n+[[what-is-the-endpoint-package]]\n+=== The {ingest-manager} app shows an Integration called 'Endpoint' and I want to use it.\n+\n+We all want to use it!  But we can't in 7.8 - It is not yet even 'Alpha' state, as the {ingest-manager} app is.  For some context, Endpoint is the integration that will allow the Elastic Security app to have a dedicated \u2018Endpoint\u2019 executable running like a beat and will be managed by the Agent as other beats are. It cannot yet be used in 7.8 so it is best left alone.  It won't hurt anything sitting there, promise.\n+\n+[[ingest-manager-not-in-on-prem-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana on-premises navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up config.  To do this you must modify both the Elasticsearch and Kibana configs as well as adhering to all 'security enabled' requirements, like modifying the default elastic user password, see below for details:", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3NDMxNw==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438974317", "bodyText": "Yes, lets wait go for beta. :)", "author": "ph", "createdAt": "2020-06-11T18:01:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1NDEzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3ODA5MQ==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438978091", "bodyText": "Cloud is plugged above, the first thing I listed.  :) If we want to reference that or a more direct plug I'm open, I don't know what is appropriate or feasible for cross-doc or web site linking etc.", "author": "EricDavisX", "createdAt": "2020-06-11T18:08:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1NDEzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3MzA0MQ==", "url": "https://github.com/elastic/stack-docs/pull/1148#discussion_r438973041", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation\n          \n          \n            \n            This will restart Kibana automatically and when done, you can refresh the browser and see the app in the left hand navigation", "author": "ph", "createdAt": "2020-06-11T17:59:34Z", "path": "docs/en/ingest-management/troubleshooting.asciidoc", "diffHunk": "@@ -4,12 +4,113 @@\n \n This release of Ingest Management is an experimental release. With this early release we explicitly invite you to install and test it **in a test environment**, but it is absolutely possible that you run into problems and need to tweak your setup to get it running.\n \n-We have collected the most common known problems below. If your question isn't answered here, please contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n+We have collected the most common known problems below. If your question isn't answered here, please review open issues in the https://github.com/elastic/kibana/issues, https://github.com/elastic/beats/issuess, https://github.com/elastic/package-registry/issues, and contact us https://ela.st/ingest-manager-feedback{here}. Your feedback is very valuable to us.\n \n+* <<ingest-manager-not-in-cloud-kibana>>\n+* <<ingest-management-setup-fails>>\n+* <<ingest-manager-app-crashes>>\n+* <<agent-enrollment-timeout>>\n+* <<enrolled-agent-not-showing-up>>\n+* <<where-are-the-agent-logs>>\n+* <<what-is-my-agent-config>>\n+* <<where-is-the-data-agent-is-sending>>\n+* <<i-deleted-my-agent>>\n+* <<i-need-to-stop-agent>>\n+* <<i-rebooted-my-host>>\n+* <<what-is-the-endpoint-package>>\n+* <<ingest-manager-not-in-on-prem-kibana>>\n+\n+[[ingest-manager-not-in-cloud-kibana]]\n+=== The {ingest-manager} app is not listed in my Kibana cloud navigation list.\n+\n+In 7.8, the {ingest-manager} app is in Alpha state and as such is only shown when specifically enabled in the start up or cloud 'override' options.  To enable {ingest-manager} on cloud, go to your deployment in the user console.  Click on the 'edit' link directly beneath the deployment name.  Then click on 'user setting overrides' underneath the Kibana heading.  Here you must enter the following x-pack option and click the save button at the bottom:\n+xpack.ingestManager.enabled: true\n+\n+This will restart Kibana automtically and when done, you can refresh the browser and see the app in the left hand navigation", "originalCommit": "9bb5a0aa1fdf6dba99dc45d9f375a6deba80be14", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6d6ea895412cf85394c3109695a294b58df4fa78", "url": "https://github.com/elastic/stack-docs/commit/6d6ea895412cf85394c3109695a294b58df4fa78", "message": "Update docs/en/ingest-management/troubleshooting.asciidoc\n\nCo-authored-by: Pier-Hugues Pellerin <phpellerin@gmail.com>", "committedDate": "2020-06-11T18:13:05Z", "type": "commit"}, {"oid": "8de423cd9602b3ae1767dcb56fab8332c092c29e", "url": "https://github.com/elastic/stack-docs/commit/8de423cd9602b3ae1767dcb56fab8332c092c29e", "message": "Update docs/en/ingest-management/troubleshooting.asciidoc\n\nCo-authored-by: DeDe Morton <dede.morton@elastic.co>", "committedDate": "2020-06-11T18:13:26Z", "type": "commit"}, {"oid": "d37b2dfea7571702f386470735a4a139dcb69078", "url": "https://github.com/elastic/stack-docs/commit/d37b2dfea7571702f386470735a4a139dcb69078", "message": "updates to attempt accommodating pr feedback", "committedDate": "2020-06-11T18:22:22Z", "type": "commit"}]}