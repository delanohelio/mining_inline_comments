{"pr_number": 1471, "pr_title": "[DOCS] Reviews anomaly detection limitations", "pr_createdAt": "2020-11-23T11:01:41Z", "pr_url": "https://github.com/elastic/stack-docs/pull/1471", "timeline": [{"oid": "c02716c03be822039c9b9699cbb6e80d057d6960", "url": "https://github.com/elastic/stack-docs/commit/c02716c03be822039c9b9699cbb6e80d057d6960", "message": "[DOCS] Orders AD limitations into groups.", "committedDate": "2020-11-20T17:01:50Z", "type": "commit"}, {"oid": "407a4e1e15742387322457450793f242a8eb78fc", "url": "https://github.com/elastic/stack-docs/commit/407a4e1e15742387322457450793f242a8eb78fc", "message": "[DOCS] Orders AD limitations into four groups.", "committedDate": "2020-11-23T10:12:37Z", "type": "commit"}, {"oid": "4402501c23d52c2256968b93d6c7b06eb0e216f8", "url": "https://github.com/elastic/stack-docs/commit/4402501c23d52c2256968b93d6c7b06eb0e216f8", "message": "[DOCS] Removes and amends limitations.", "committedDate": "2020-11-23T11:02:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MzcwMA==", "url": "https://github.com/elastic/stack-docs/pull/1471#discussion_r530283700", "bodyText": "Typo - send needs to be sending (or omit the word are).", "author": "peteharverson", "createdAt": "2020-11-25T10:56:56Z", "path": "docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc", "diffHunk": "@@ -7,80 +7,116 @@\n ++++\n \n The following limitations and known problems apply to the {version} release of \n-the Elastic {ml-features}:\n+the Elastic {ml-features}. The limitations are grouped into four categories:\n \n-[float]\n+* <<ad-platform-limitations>> are related to the platform that hosts the {ml} \n+  feature of the {stack}.\n+* <<ad-config-limitations>> apply to the configuration process of the \n+  {anomaly-jobs}.\n+* <<ad-operational-limitations>> affect the behavior of the {anomaly-jobs} that \n+  are running.\n+* <<ad-ui-limitations>> only apply to {anomaly-jobs} managed via the user \n+  interface.\n+\n+\n+[discrete]\n+[[ad-platform-limitations]]\n+== Platform limitations\n+\n+[discrete]\n [[ml-limitations-sse]]\n-== CPUs must support SSE4.2\n+=== CPUs must support SSE4.2\n \n {ml-cap} uses Streaming SIMD Extensions (SSE) 4.2 instructions, so it works only\n-on machines whose CPUs https://en.wikipedia.org/wiki/SSE4#Supporting_CPUs[support]\n-SSE4.2. If you run {es} on older hardware you must disable {ml} by setting\n-`xpack.ml.enabled` to `false`. See\n-{ref}/ml-settings.html[{ml-cap} settings in {es}].\n+on machines whose CPUs \n+https://en.wikipedia.org/wiki/SSE4#Supporting_CPUs[support] SSE4.2. If you run \n+{es} on older hardware you must disable {ml} by setting `xpack.ml.enabled` to \n+`false`. See {ref}/ml-settings.html[{ml-cap} settings in {es}].\n \n-[float]\n-== Categorization uses English dictionary words\n-//See x-pack-elasticsearch/#3021\n-Categorization identifies static parts of unstructured logs and groups similar\n-messages together. The default categorization tokenizer assumes English language\n-log messages. For other languages you must define a different\n-`categorization_analyzer` for your job. For more information, see\n-<<ml-configuring-categories>>.\n \n-Additionally, a dictionary used to influence the categorization process contains\n-only English words. This means categorization might work better in English than\n-in other languages. The ability to customize the dictionary will be added in a\n-future release.\n+[discrete]\n+[[ml-scheduling-priority]]\n+=== CPU scheduling improvements apply to Linux and MacOS only\n \n-[float]\n-== Pop-ups must be enabled in browsers\n-//See x-pack-elasticsearch/#844\n+When there are many {ml} jobs running at the same time and there are \n+insufficient CPU resources, the JVM performance must be prioritized so search \n+and indexing latency remain acceptable. To that end, when CPU is constrained on \n+Linux and MacOS environments, the CPU scheduling priority of native analysis \n+processes is reduced to favor the {es} JVM. This improvement does not apply to \n+Windows environments.\n \n-The {ml-features} in {kib} use pop-ups. You must configure your\n-web browser so that it does not block pop-up windows or create an\n-exception for your {kib} URL.\n \n-[float]\n-== Anomaly Explorer omissions and limitations\n-//See x-pack-elasticsearch/#844 and x-pack-kibana/#1461\n+[discrete]\n+[[ad-config-limitations]]\n+== Configuration limitations\n \n-In {kib}, Anomaly Explorer charts are not displayed for anomalies\n-that were due to categorization, `time_of_day` functions, or `time_of_week`\n-functions. Those particular results do not display well as time series\n-charts.\n \n-The charts are also not displayed for detectors that use script fields. In that\n-case, the original source data cannot be easily searched because it has been\n-somewhat transformed by the script.\n+[discrete]\n+=== Terms aggregation size affects data analysis\n+//See x-pack-elasticsearch/#601\n \n-The Anomaly Explorer charts can also look odd in circumstances where there\n-is very little data to plot. For example, if there is only one data point, it is\n-represented as a single dot. If there are only two data points, they are joined\n-by a line.\n+By default, the `terms` aggregation returns the buckets for the top ten terms.\n+You can change this default behavior by setting the `size` parameter.\n \n-[float]\n-== Jobs close on the {dfeed} end date\n-//See x-pack-elasticsearch/#1037\n+If you are send pre-aggregated data to a job for analysis, you must ensure", "originalCommit": "4402501c23d52c2256968b93d6c7b06eb0e216f8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4ODk2Nw==", "url": "https://github.com/elastic/stack-docs/pull/1471#discussion_r530288967", "bodyText": "Maybe just me, but it isn't clear to me if after updating roles the datafeed runs with the new permissions or the original permissions.  the datafeed subsequently runs with the new permissions and datafeed continues to run with the permissions that were associated with the original roles appear to contradict each other.", "author": "peteharverson", "createdAt": "2020-11-25T11:05:07Z", "path": "docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc", "diffHunk": "@@ -106,89 +142,155 @@ For more information about `missing_field_count`,\n see the {ref}/ml-get-job-stats.html[get {anomaly-job} statistics API].\n \n \n-[float]\n-== Terms aggregation size affects data analysis\n-//See x-pack-elasticsearch/#601\n+[discrete]\n+=== Security integration\n \n-By default, the `terms` aggregation returns the buckets for the top ten terms.\n-You can change this default behavior by setting the `size` parameter.\n+When the {es} {security-features} are enabled, a {dfeed} stores the roles of the", "originalCommit": "4402501c23d52c2256968b93d6c7b06eb0e216f8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c2c8ab8c932c1848c3958baf141a5e4222f544e3", "url": "https://github.com/elastic/stack-docs/commit/c2c8ab8c932c1848c3958baf141a5e4222f544e3", "message": "[DOCS] Changes section title.", "committedDate": "2020-11-25T11:42:11Z", "type": "commit"}, {"oid": "db03f0454fcf07d7e7ad68c59e31b96910c1c404", "url": "https://github.com/elastic/stack-docs/commit/db03f0454fcf07d7e7ad68c59e31b96910c1c404", "message": "[DOCS] Changes text about roles and permissions.", "committedDate": "2020-11-25T12:58:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDU3NDI2OQ==", "url": "https://github.com/elastic/stack-docs/pull/1471#discussion_r530574269", "bodyText": "Suggest we create two forecast limitations... 1) forecast operational limitations and 2) Unsupported forecast configuration options.\nMove over_field_name and the unsupported functions over to configuration and leave the operational limitations mostly untouched otherwise.", "author": "sophiec20", "createdAt": "2020-11-25T18:35:15Z", "path": "docs/en/stack/ml/anomaly-detection/ml-limitations.asciidoc", "diffHunk": "@@ -106,89 +141,154 @@ For more information about `missing_field_count`,\n see the {ref}/ml-get-job-stats.html[get {anomaly-job} statistics API].\n \n \n-[float]\n-== Terms aggregation size affects data analysis\n-//See x-pack-elasticsearch/#601\n+[discrete]\n+=== Security integration\n \n-By default, the `terms` aggregation returns the buckets for the top ten terms.\n-You can change this default behavior by setting the `size` parameter.\n+When the {es} {security-features} are enabled, a {dfeed} stores the roles of the \n+user who created or updated the {dfeed} **at that time**. This means that if the \n+roles the user has are changed after they create or update a {dfeed} then the \n+{dfeed} continues to run without change. However, if instead the permissions \n+associated with the roles that are stored with the {dfeed} are changed then this \n+affects the {dfeed}. For more information, see <<ml-datafeeds>>.\n \n-If you are send pre-aggregated data to a job for analysis, you must ensure\n-that the `size` is configured correctly. Otherwise, some data might not be\n-analyzed.\n \n-[float]\n-== Fields named \"by\", \"count\", or \"over\" cannot be used to split data\n-//See x-pack-elasticsearch/#858\n+[discrete]\n+[[ml-result-size-limitations]]\n+=== Job and {dfeed} APIs have a maximum search size\n+//https://github.com/elastic/elasticsearch/issues/34864\n \n-You cannot use the following field names in the `by_field_name` or\n-`over_field_name` properties in a job: `by`; `count`; `over`. This limitation\n-also applies to those properties when you create advanced jobs in {kib}.\n+In 6.6 and later releases, the {ref}/ml-get-job.html[get jobs API] and the\n+{ref}/ml-get-job-stats.html[get job statistics API] return a maximum of 10,000\n+jobs. Likewise, the {ref}/ml-get-datafeed.html[get {dfeeds} API] and the\n+{ref}/ml-get-datafeed-stats.html[get {dfeed} statistics API] return a maximum of\n+10,000 {dfeeds}.\n+\n+\n+[discrete]\n+[[ml-forecast-limitations]]\n+=== Forecast limitations", "originalCommit": "db03f0454fcf07d7e7ad68c59e31b96910c1c404", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkwNzc1NA==", "url": "https://github.com/elastic/stack-docs/pull/1471#discussion_r530907754", "bodyText": "Thanks! Addressed it via 6a09b63. Also consolidated the intro of forecast operational limitations.", "author": "szabosteve", "createdAt": "2020-11-26T09:58:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDU3NDI2OQ=="}], "type": "inlineReview"}, {"oid": "6a09b6375ac4f0cb416fe5bd7583ba4951e79893", "url": "https://github.com/elastic/stack-docs/commit/6a09b6375ac4f0cb416fe5bd7583ba4951e79893", "message": "[DOCS] Splits forecast limitation into two limitation items.", "committedDate": "2020-11-26T09:56:43Z", "type": "commit"}, {"oid": "6fa73c3cf5274f0d51e2e6eea160e5c894c06f68", "url": "https://github.com/elastic/stack-docs/commit/6fa73c3cf5274f0d51e2e6eea160e5c894c06f68", "message": "[DOCS] Fixes link.", "committedDate": "2020-11-26T10:12:13Z", "type": "commit"}, {"oid": "76d785d78d058994864085c1402b51c298f6d89a", "url": "https://github.com/elastic/stack-docs/commit/76d785d78d058994864085c1402b51c298f6d89a", "message": "[DOCS] Modifies limitation reference.", "committedDate": "2020-11-26T10:15:58Z", "type": "commit"}]}