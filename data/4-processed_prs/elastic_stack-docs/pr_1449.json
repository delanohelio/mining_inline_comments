{"pr_number": 1449, "pr_title": "[DOCS] Adds chunking_config recommendation to AD at scale", "pr_createdAt": "2020-11-16T13:21:04Z", "pr_url": "https://github.com/elastic/stack-docs/pull/1449", "timeline": [{"oid": "affc1637b52a92c05e5cc02cdd9c74bb521e81e8", "url": "https://github.com/elastic/stack-docs/commit/affc1637b52a92c05e5cc02cdd9c74bb521e81e8", "message": "[DOCS] Adds chunking_config recommendation to AD at scale.", "committedDate": "2020-11-16T12:32:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI4NjA4NA==", "url": "https://github.com/elastic/stack-docs/pull/1449#discussion_r524286084", "bodyText": "Its maximum value is the value of search.max_buckets which is 10,000 by default.\n\nI think we need to rephrase this a bit. The value of search.max_buckets is the number of buckets allowed in a search response. The time_span is a time value. So, in the case of single metric, the maximum value for time_span is 10,000 times the date histogram interval.\nPerhaps the what we need to explain here is something along the lines of the following:\n... and experiment with the `time_span` value. Increasing it may speed things up. However, the higher the chunking time_span, the higher number of buckets will be included in the search response. Thus, if you are hitting the `search.max_buckets` limit you can decrease the `time_span` to reduce the number of buckets per response.", "author": "dimitris-athanasiou", "createdAt": "2020-11-16T13:58:35Z", "path": "docs/en/stack/ml/anomaly-detection/anomaly-detection-scale.asciidoc", "diffHunk": "@@ -170,6 +170,11 @@ The statistics can be calculated in the job itself or via aggregations. It is\n more efficient to use an aggregation when it\u2019s possible, as in this case, the \n data node does the heavy-lifting instead of the {ml} node.\n \n+You may want to use `chunking_config` to tune your search speed when your \n+{dfees} use aggregations. In these cases, set `chunking_config`.`mode` to \n+`manual` and experiment with the `time_span` value. Its maximum value is the \n+value of `search.max_buckets` which is 10,000 by default.", "originalCommit": "affc1637b52a92c05e5cc02cdd9c74bb521e81e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDI4Njg3NQ==", "url": "https://github.com/elastic/stack-docs/pull/1449#discussion_r524286875", "bodyText": "Should it be \"chunking_config.mode\" or \"chunking_config.mode? I see we include the dot in the quotes below for the search.max_buckets limit.", "author": "dimitris-athanasiou", "createdAt": "2020-11-16T13:59:44Z", "path": "docs/en/stack/ml/anomaly-detection/anomaly-detection-scale.asciidoc", "diffHunk": "@@ -170,6 +170,11 @@ The statistics can be calculated in the job itself or via aggregations. It is\n more efficient to use an aggregation when it\u2019s possible, as in this case, the \n data node does the heavy-lifting instead of the {ml} node.\n \n+You may want to use `chunking_config` to tune your search speed when your \n+{dfees} use aggregations. In these cases, set `chunking_config`.`mode` to ", "originalCommit": "affc1637b52a92c05e5cc02cdd9c74bb521e81e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d69289b7f67a3cc8c10bd4e805b3d65def8edd73", "url": "https://github.com/elastic/stack-docs/commit/d69289b7f67a3cc8c10bd4e805b3d65def8edd73", "message": "[DOCS] Addresses feedback.", "committedDate": "2020-11-16T15:07:37Z", "type": "commit"}, {"oid": "53c085b28301d339755629aa1bfb5724a49e1e9b", "url": "https://github.com/elastic/stack-docs/commit/53c085b28301d339755629aa1bfb5724a49e1e9b", "message": "[DOCS] Minor edits.", "committedDate": "2020-11-16T15:09:00Z", "type": "commit"}]}