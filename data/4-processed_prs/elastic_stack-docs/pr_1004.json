{"pr_number": 1004, "pr_title": "[DOCS] Moves feature importance out from the shared file to a standalone page", "pr_createdAt": "2020-04-21T08:18:53Z", "pr_url": "https://github.com/elastic/stack-docs/pull/1004", "timeline": [{"oid": "ef4beec484c02cf262a786da37a5727a1d3e1962", "url": "https://github.com/elastic/stack-docs/commit/ef4beec484c02cf262a786da37a5727a1d3e1962", "message": "[DOCS] Moves feature importance out from the shared file to a stand alone page.", "committedDate": "2020-04-21T08:12:47Z", "type": "commit"}, {"oid": "13be5964076b709ff33a12f6810266131a0f94b3", "url": "https://github.com/elastic/stack-docs/commit/13be5964076b709ff33a12f6810266131a0f94b3", "message": "[DOCS] Adds further readings section.", "committedDate": "2020-04-21T08:35:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM4NzA4Mw==", "url": "https://github.com/elastic/stack-docs/pull/1004#discussion_r413387083", "bodyText": "IMO this page doesn't help you understand results yet and that title should be reserved for the deeper task\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            === Understanding results: {feat-imp}\n          \n          \n            \n            === {feat-imp-cap}", "author": "lcawl", "createdAt": "2020-04-22T22:54:17Z", "path": "docs/en/stack/ml/df-analytics/ml-feature-importance.asciidoc", "diffHunk": "@@ -0,0 +1,35 @@\n+[role=\"xpack\"]\n+[[ml-feature-importance]]\n+=== Understanding results: {feat-imp}", "originalCommit": "13be5964076b709ff33a12f6810266131a0f94b3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM5ODcwNw==", "url": "https://github.com/elastic/stack-docs/pull/1004#discussion_r413398707", "bodyText": "Feature importance is calculated ...\n\nPerhaps this can wait to be augmented in a later PR, but it would be nice if the first sentence provided a very brief explanation of this concept. Something like:\n\"Feature importance values indicate which fields had the biggest impact on each prediction that is generated by classification or regression analysis.", "author": "lcawl", "createdAt": "2020-04-22T23:22:42Z", "path": "docs/en/stack/ml/df-analytics/ml-feature-importance.asciidoc", "diffHunk": "@@ -0,0 +1,35 @@\n+[role=\"xpack\"]\n+[[ml-feature-importance]]\n+=== Understanding results: {feat-imp}\n+\n+{feat-imp-cap} is calculated for supervised {ml} methods such as \n+<<dfa-regression,{regression}>> and <<dfa-classification,{classification}>>. ", "originalCommit": "13be5964076b709ff33a12f6810266131a0f94b3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQwMTMzMg==", "url": "https://github.com/elastic/stack-docs/pull/1004#discussion_r413401332", "bodyText": "As we mentioned...\n\nI think this is referring to content that existed elsewhere.  I think this should be reworded or removed.", "author": "lcawl", "createdAt": "2020-04-22T23:29:23Z", "path": "docs/en/stack/ml/df-analytics/ml-feature-importance.asciidoc", "diffHunk": "@@ -0,0 +1,35 @@\n+[role=\"xpack\"]\n+[[ml-feature-importance]]\n+=== Understanding results: {feat-imp}\n+\n+{feat-imp-cap} is calculated for supervised {ml} methods such as \n+<<dfa-regression,{regression}>> and <<dfa-classification,{classification}>>. \n+This value provides further insight into the results of a {dfanalytics-job} and \n+therefore helps interpret these results. As we mentioned, there are multiple ", "originalCommit": "13be5964076b709ff33a12f6810266131a0f94b3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQwMTU4Ng==", "url": "https://github.com/elastic/stack-docs/pull/1004#discussion_r413401586", "bodyText": "By default, feature importance values are not calculated.\n\nI think this is only true of the API.  When I use Kibana, it seems to be consistently using a default value of 2.", "author": "lcawl", "createdAt": "2020-04-22T23:30:10Z", "path": "docs/en/stack/ml/df-analytics/ml-feature-importance.asciidoc", "diffHunk": "@@ -0,0 +1,35 @@\n+[role=\"xpack\"]\n+[[ml-feature-importance]]\n+=== Understanding results: {feat-imp}\n+\n+{feat-imp-cap} is calculated for supervised {ml} methods such as \n+<<dfa-regression,{regression}>> and <<dfa-classification,{classification}>>. \n+This value provides further insight into the results of a {dfanalytics-job} and \n+therefore helps interpret these results. As we mentioned, there are multiple \n+features of a data point that are analyzed during {dfanalytics}. These features \n+are responsible for a particular prediction to varying degrees. {feat-imp-cap} \n+shows to what degree a given feature of a data point contributes to the \n+prediction. The feature importance value of a feature can be either positive or \n+negative depending on its effect on the prediction. If the feature reduces the \n+prediction value, the value is negative. If the feature increases the \n+prediction, the {feat-imp} value positive. The magnitude of the {feat-imp} \n+value shows how significantly the feature affects the prediction both locally \n+(for a given data point) or generally (for the whole data set).\n+\n+{feat-imp-cap} in the {stack} is calculated using the SHAP (SHapley Additive \n+exPlanations) method as described in\n+https://papers.nips.cc/paper/7062-a-unified-approach-to-interpreting-model-predictions.pdf[Lundberg, S. M., & Lee, S.-I. A Unified Approach to Interpreting Model Predictions. In NeurIPS 2017].\n+\n+By default, {feat-imp} values are not calculated. To generate this information, ", "originalCommit": "13be5964076b709ff33a12f6810266131a0f94b3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzYwMTEwNA==", "url": "https://github.com/elastic/stack-docs/pull/1004#discussion_r413601104", "bodyText": "I amended the text accordingly.", "author": "szabosteve", "createdAt": "2020-04-23T08:04:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQwMTU4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQwNjA4NA==", "url": "https://github.com/elastic/stack-docs/pull/1004#discussion_r413406084", "bodyText": "in fields prefixed by ml.feature_importance:\n\nI think this might have changed, since in 7.x I'm seeing that information in an array inside the results for each document, like this:\n\n\"ml\" : {\n\"FlightDelayMin_prediction\" : 4.357336521148682,\n\"feature_importance\" : [\n{\n\"feature_name\" : \"DistanceMiles\",\n\"importance\" : 15.865198439768983\n},\n{\n\"feature_name\" : \"FlightTimeMin\",\n\"importance\" : -69.57508138095754\n}\n],\n\nMaybe it's sufficient to say the feature importance values are stored in the machine learning results field for each document in the destination index.", "author": "lcawl", "createdAt": "2020-04-22T23:41:35Z", "path": "docs/en/stack/ml/df-analytics/ml-feature-importance.asciidoc", "diffHunk": "@@ -0,0 +1,35 @@\n+[role=\"xpack\"]\n+[[ml-feature-importance]]\n+=== Understanding results: {feat-imp}\n+\n+{feat-imp-cap} is calculated for supervised {ml} methods such as \n+<<dfa-regression,{regression}>> and <<dfa-classification,{classification}>>. \n+This value provides further insight into the results of a {dfanalytics-job} and \n+therefore helps interpret these results. As we mentioned, there are multiple \n+features of a data point that are analyzed during {dfanalytics}. These features \n+are responsible for a particular prediction to varying degrees. {feat-imp-cap} \n+shows to what degree a given feature of a data point contributes to the \n+prediction. The feature importance value of a feature can be either positive or \n+negative depending on its effect on the prediction. If the feature reduces the \n+prediction value, the value is negative. If the feature increases the \n+prediction, the {feat-imp} value positive. The magnitude of the {feat-imp} \n+value shows how significantly the feature affects the prediction both locally \n+(for a given data point) or generally (for the whole data set).\n+\n+{feat-imp-cap} in the {stack} is calculated using the SHAP (SHapley Additive \n+exPlanations) method as described in\n+https://papers.nips.cc/paper/7062-a-unified-approach-to-interpreting-model-predictions.pdf[Lundberg, S. M., & Lee, S.-I. A Unified Approach to Interpreting Model Predictions. In NeurIPS 2017].\n+\n+By default, {feat-imp} values are not calculated. To generate this information, \n+when you create a {dfanalytics-job} you must specify the \n+`num_top_feature_importance_values` property. The {feat-imp} values are stored \n+in the destination index in fields prefixed by `ml.feature_importance`.", "originalCommit": "13be5964076b709ff33a12f6810266131a0f94b3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a8dd5768cd5a88d0367177796663321660656e51", "url": "https://github.com/elastic/stack-docs/commit/a8dd5768cd5a88d0367177796663321660656e51", "message": "Update docs/en/stack/ml/df-analytics/ml-feature-importance.asciidoc\n\nCo-Authored-By: Lisa Cawley <lcawley@elastic.co>", "committedDate": "2020-04-23T07:49:16Z", "type": "commit"}, {"oid": "2783ec7a15e30429721637c6484ca1e501bf5ad2", "url": "https://github.com/elastic/stack-docs/commit/2783ec7a15e30429721637c6484ca1e501bf5ad2", "message": "[DOCS] Addresses feedback.", "committedDate": "2020-04-23T08:06:51Z", "type": "commit"}, {"oid": "a383eb52579d15863f554049a21a10f0d6c8f876", "url": "https://github.com/elastic/stack-docs/commit/a383eb52579d15863f554049a21a10f0d6c8f876", "message": "[DOCS] Reduces first paragraph.", "committedDate": "2020-04-24T10:45:18Z", "type": "commit"}]}