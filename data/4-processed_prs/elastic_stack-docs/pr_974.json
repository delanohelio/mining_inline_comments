{"pr_number": 974, "pr_title": "[Docs][SIEM] 7.7 detection rule updates", "pr_createdAt": "2020-04-02T15:19:11Z", "pr_url": "https://github.com/elastic/stack-docs/pull/974", "timeline": [{"oid": "dfea40692c50b3d84c7eb0277fe13a82e1af422d", "url": "https://github.com/elastic/stack-docs/commit/dfea40692c50b3d84c7eb0277fe13a82e1af422d", "message": "starts rule updates", "committedDate": "2020-04-05T06:27:37Z", "type": "commit"}, {"oid": "dfea40692c50b3d84c7eb0277fe13a82e1af422d", "url": "https://github.com/elastic/stack-docs/commit/dfea40692c50b3d84c7eb0277fe13a82e1af422d", "message": "starts rule updates", "committedDate": "2020-04-05T06:27:37Z", "type": "forcePushed"}, {"oid": "7836b4bb92892989693f639ec36a6fb5dd9fe7cf", "url": "https://github.com/elastic/stack-docs/commit/7836b4bb92892989693f639ec36a6fb5dd9fe7cf", "message": "starts ml rule type", "committedDate": "2020-04-05T11:48:58Z", "type": "commit"}, {"oid": "7efdd68b7797db4f9bc17e60544a0ddae9e44232", "url": "https://github.com/elastic/stack-docs/commit/7efdd68b7797db4f9bc17e60544a0ddae9e44232", "message": "more create rules stuff", "committedDate": "2020-04-05T15:00:27Z", "type": "commit"}, {"oid": "c86f4831115ecf36dc009e50c646ed379ce5b867", "url": "https://github.com/elastic/stack-docs/commit/c86f4831115ecf36dc009e50c646ed379ce5b867", "message": "rule types cont", "committedDate": "2020-04-05T16:42:08Z", "type": "commit"}, {"oid": "18f617607fe287c0df4a60af165b161bf7dcaf4b", "url": "https://github.com/elastic/stack-docs/commit/18f617607fe287c0df4a60af165b161bf7dcaf4b", "message": "add cases kib space info", "committedDate": "2020-04-05T16:54:16Z", "type": "commit"}, {"oid": "0b38b8010bbf44bc0c8e99d3a32d44db5ae46244", "url": "https://github.com/elastic/stack-docs/commit/0b38b8010bbf44bc0c8e99d3a32d44db5ae46244", "message": "rule monitoring", "committedDate": "2020-04-06T06:26:47Z", "type": "commit"}, {"oid": "99419d15ca40d572108922e01b12029b2f3fda7d", "url": "https://github.com/elastic/stack-docs/commit/99419d15ca40d572108922e01b12029b2f3fda7d", "message": "monitor cont", "committedDate": "2020-04-06T06:28:26Z", "type": "commit"}, {"oid": "499ef64241aed96d43489ad2290d42a2f2244f9a", "url": "https://github.com/elastic/stack-docs/commit/499ef64241aed96d43489ad2290d42a2f2244f9a", "message": "typo", "committedDate": "2020-04-06T09:05:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMwOTMzNw==", "url": "https://github.com/elastic/stack-docs/pull/974#discussion_r404309337", "bodyText": "I'm sure you're aware, but with #62396 this is changing to ML job settings and will only be visible on the Detections page.", "author": "rylnd", "createdAt": "2020-04-06T18:42:59Z", "path": "docs/en/siem/machine-learning.asciidoc", "diffHunk": "@@ -20,9 +20,9 @@ image::ml-ui.png[]\n [float]\n [[manage-jobs]]\n === Manage machine learning jobs\n-For users with the `ml_admin` role, the `Anomaly Detection` interface within\n-the main navigation header can be used for for viewing, starting, and stopping\n-SIEM machine learning jobs.\n+For users with the `machine_learning_admin` role, the `Anomaly Detection`", "originalCommit": "499ef64241aed96d43489ad2290d42a2f2244f9a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMxNDUzOQ==", "url": "https://github.com/elastic/stack-docs/pull/974#discussion_r404314539", "bodyText": "This isn't new, but I think that the same feedback as this comment applies, where the verb \"tag\" is potentially misleading.", "author": "rylnd", "createdAt": "2020-04-06T18:51:58Z", "path": "docs/en/siem/machine-learning.asciidoc", "diffHunk": "@@ -20,9 +20,9 @@ image::ml-ui.png[]\n [float]\n [[manage-jobs]]\n === Manage machine learning jobs\n-For users with the `ml_admin` role, the `Anomaly Detection` interface within\n-the main navigation header can be used for for viewing, starting, and stopping\n-SIEM machine learning jobs.\n+For users with the `machine_learning_admin` role, the `Anomaly Detection`\n+interface within the main navigation header can be used for for viewing,\n+starting, and stopping SIEM machine learning jobs.\n \n TIP: To add a custom job to the `Anomaly Detection` interface, add a `SIEM` tag ", "originalCommit": "499ef64241aed96d43489ad2290d42a2f2244f9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMyMDI2OQ==", "url": "https://github.com/elastic/stack-docs/pull/974#discussion_r404320269", "bodyText": "Thanks @rylnd - I'll update it", "author": "benskelker", "createdAt": "2020-04-06T19:01:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMxNDUzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMzMjM3OA==", "url": "https://github.com/elastic/stack-docs/pull/974#discussion_r404332378", "bodyText": "I think you want base to be based here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * To create a rule base on a KQL or Lucene query, select _Custom query_ and\n          \n          \n            \n            * To create a rule based on a KQL or Lucene query, select _Custom query_ and", "author": "dhurley14", "createdAt": "2020-04-06T19:23:35Z", "path": "docs/en/siem/rules-ui-create.asciidoc", "diffHunk": "@@ -70,25 +71,41 @@ ones.\n [[create-rule-ui]]\n === Create a new rule\n \n+You can create two types of rules:\n+\n+* *Custom query*: Query-based rule, which searches the defined indices and creates a signal when a document matches the rule's query.\n+* *Machine learning*: {ml-cap} rule, which creates a signal when a {ml} job discovers an anomaly above the defined threshold (see <<machine-learning>>).\n+\n+IMPORTANT: You can only create {ml} jobs when you have a\n+https://www.elastic.co/subscriptions[Platinum License] or you are using a\n+{ess-trial}[Cloud] deployment.\n+\n . Go to *SIEM* -> *Detections* -> *Manage signal detection rules*.\n . Click *Create new rule*.\n +\n The *Create new rule* page is displayed.\n [role=\"screenshot\"]\n-image::create-new-rule.png[]\n-. Define which {es} indices the rule analyzes for signals.\n-. Use the filter and query fields to create the criteria used for detecting \n+image::images/create-new-rule.png[]\n+. Do *one* of the following:\n+* To create a rule based on a {ml} anomaly threshold, select _Machine Learning_\n+and then:\n+.. The required {ml} job.\n+.. The anomaly score threshold above which signals are created.\n+* To create a rule base on a KQL or Lucene query, select _Custom query_ and", "originalCommit": "499ef64241aed96d43489ad2290d42a2f2244f9a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM0Mjg3Nw==", "url": "https://github.com/elastic/stack-docs/pull/974#discussion_r404342877", "bodyText": "sure do - thanks @dhurley14", "author": "benskelker", "createdAt": "2020-04-06T19:42:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMzMjM3OA=="}], "type": "inlineReview"}, {"oid": "050444ef66430e4fef9f3b662b3c72720cec1707", "url": "https://github.com/elastic/stack-docs/commit/050444ef66430e4fef9f3b662b3c72720cec1707", "message": "corrections and screenshots", "committedDate": "2020-04-07T08:50:08Z", "type": "commit"}, {"oid": "c26c2c3836bed55ad590e5865bc3801f696aa23a", "url": "https://github.com/elastic/stack-docs/commit/c26c2c3836bed55ad590e5865bc3801f696aa23a", "message": "more screenshots", "committedDate": "2020-04-07T09:10:04Z", "type": "commit"}, {"oid": "c6c8a5c67aa6c662e2c2f200afb46be87dd37c57", "url": "https://github.com/elastic/stack-docs/commit/c6c8a5c67aa6c662e2c2f200afb46be87dd37c57", "message": "updates rule failure note", "committedDate": "2020-04-07T09:35:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEyMDIzNg==", "url": "https://github.com/elastic/stack-docs/pull/974#discussion_r405120236", "bodyText": "Thanks for the distinction here as we've (myself at least \ud83d\ude05) been conflating the users/roles -- ml_admin is the user, with the roles being machine_learning_admin, machine_learning_user, etc.", "author": "spong", "createdAt": "2020-04-07T21:20:43Z", "path": "docs/en/siem/machine-learning.asciidoc", "diffHunk": "@@ -20,12 +20,12 @@ image::ml-ui.png[]\n [float]\n [[manage-jobs]]\n === Manage machine learning jobs\n-For users with the `ml_admin` role, the `Anomaly Detection` interface within\n-the main navigation header can be used for for viewing, starting, and stopping\n-SIEM machine learning jobs.\n+For users with the `machine_learning_admin` role, the `ML job settings`", "originalCommit": "c6c8a5c67aa6c662e2c2f200afb46be87dd37c57", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEyMzIyNw==", "url": "https://github.com/elastic/stack-docs/pull/974#discussion_r405123227", "bodyText": "Docs render fine of course, but extra space here:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            . Select the timeline template used when you  send a signal created by the rule\n          \n          \n            \n            . Select the timeline template used when you send a signal created by the rule", "author": "spong", "createdAt": "2020-04-07T21:26:28Z", "path": "docs/en/siem/rules-ui-create.asciidoc", "diffHunk": "@@ -99,11 +116,17 @@ image::rule-query-example.png[]\n TIP: This example is based on the\n <<volume-shadow-copy-deletion-via-vssadmin, Volume Shadow Copy Deletion via VssAdmin>> prebuilt rule.\n \n+. Select the timeline template used when you  send a signal created by the rule", "originalCommit": "c6c8a5c67aa6c662e2c2f200afb46be87dd37c57", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a25cf587b69ba7ca2693b6576255c000d9402c56", "url": "https://github.com/elastic/stack-docs/commit/a25cf587b69ba7ca2693b6576255c000d9402c56", "message": "cleanup and remove api key requirement", "committedDate": "2020-04-08T08:54:19Z", "type": "commit"}]}