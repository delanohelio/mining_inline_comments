{"pr_number": 387, "pr_title": "Auto increment primary key in `personalized_user_reports`.", "pr_createdAt": "2020-05-13T01:16:24Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/387", "timeline": [{"oid": "fb63e26bd415c01deced8c073a76a0df06615642", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fb63e26bd415c01deced8c073a76a0df06615642", "message": "Auto increment primary key in personalized_user_reports.\n\nI think hibernate will automatically generate this for MySQL tables, but\nI copied the initial SQL statement from the table it was creating for\nunit tests, which didn't have it because the in-memory database may not\nsupport it.", "committedDate": "2020-05-13T01:10:33Z", "type": "commit"}, {"oid": "cee3750c4b727d372dbe5fde2946c7f5c90e74df", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cee3750c4b727d372dbe5fde2946c7f5c90e74df", "message": "Merge branch 'early-access' into karepker-auto-increment-id", "committedDate": "2020-05-13T02:55:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUxNDA0Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/387#discussion_r424514047", "bodyText": "I think we also need to update the id in the model to use GenerationType.Identity. Otherwise it will attempt to use the hibernate_sequence table. I think it defaults to GenerationType.Sequence if AUTO is specified.\nhttps://thorben-janssen.com/jpa-generate-primary-keys/", "author": "wamills", "createdAt": "2020-05-13T15:08:41Z", "path": "user-registration-server-ws/sqlscript/mystudies_user_registration_db_script.sql", "diffHunk": "@@ -438,7 +438,7 @@ CREATE TABLE IF NOT EXISTS `user_details` (\n   PRIMARY KEY (`user_details_id`)\r\n ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\r\n \r\n-CREATE TABLE personalized_user_report (id integer NOT NULL, activity_date_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP, report_content TEXT, report_title varchar(255), study_info_id INTEGER, user_id INTEGER, primary key (id));\r\n+CREATE TABLE personalized_user_report (id integer NOT NULL AUTO_INCREMENT, activity_date_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP, report_content TEXT, report_title varchar(255), study_info_id INTEGER, user_id INTEGER, primary key (id));\r", "originalCommit": "fb63e26bd415c01deced8c073a76a0df06615642", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzAzNzY1Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/387#discussion_r427037657", "bodyText": "Thanks, addressing in #406.", "author": "karepker", "createdAt": "2020-05-19T05:25:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUxNDA0Nw=="}], "type": "inlineReview"}]}