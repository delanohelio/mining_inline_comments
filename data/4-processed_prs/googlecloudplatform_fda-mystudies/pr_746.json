{"pr_number": 746, "pr_title": "Participant manger App participant list", "pr_createdAt": "2020-08-13T16:59:25Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746", "timeline": [{"oid": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "message": "app participant list has been implemented", "committedDate": "2020-08-13T16:57:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE0Nzk1Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470147953", "bodyText": "Can you name this something more specific than #template?", "author": "nikklassen", "createdAt": "2020-08-13T18:05:28Z", "path": "UR-web-app/src/app/site-coordinator/apps/app-details/app-details.component.html", "diffHunk": "@@ -0,0 +1,150 @@\n+<ng-container *ngIf=\"appDetail$ | async as appDetails\">\n+  <section class=\"subheader p-none pl-none\">\n+    <div class=\"max__w__1280 m-none\">\n+      <div class=\"flex__justify__space-between\">\n+        <div\n+          class=\"subheader__title flex__justify__space-between align__items__baseline\"\n+        >\n+          <div>\n+            <a routerLink=\"/coordinator/apps\">\n+              <img src=\"assets/svgs/back-arrow.svg\" alt=\"go back\" />\n+            </a>\n+          </div>\n+          <div>\n+            <div class=\"mb-xs\">App Participant Registry</div>\n+            <div>\n+              <div class=\"pr-xlg flex__justify__space-between\">\n+                <div class=\"banner__label mr-xs\">\n+                  {{ appDetails.customId }}\n+                  <span class=\"banner__text\">{{ appDetails.name }}</span>\n+                </div>\n+              </div>\n+            </div>\n+          </div>\n+        </div>\n+      </div>\n+    </div>\n+  </section>\n+  <section class=\"max__w__1280 m-none site__participant\">\n+    <div class=\"cards1 m-none\">\n+      <table\n+        class=\"table table-striped\"\n+        [mfData]=\"appDetails.participants\"\n+        #mf=\"mfDataTable\"\n+        [mfRowsOnPage]=\"10\"\n+      >\n+        <thead>\n+          <tr>\n+            <span\n+              class=\"sort__by__text mobile__view mr-sm\"\n+              style=\"background: transparent;\"\n+            >\n+              Sort By:\n+            </span>\n+            <th>\n+              <mfDefaultSorter by=\"Email\">Participant Email</mfDefaultSorter>\n+            </th>\n+            <th>\n+              <mfDefaultSorter by=\"Date\">App Registration Date</mfDefaultSorter>\n+            </th>\n+            <th>\n+              <mfDefaultSorter by=\"Status\">App Account Status</mfDefaultSorter>\n+            </th>\n+            <th>\n+              <mfDefaultSorter by=\"Enrolled\">\n+                Number of Studies Enrolled\n+              </mfDefaultSorter>\n+            </th>\n+          </tr>\n+        </thead>\n+        <tbody>\n+          <tr *ngFor=\"let applists of mf.data\">\n+            <td [routerLink]=\"['/coordinator/participant', applists.id]\">\n+              <span class=\"tbl__td__label\">Participant Email:</span>\n+              <span class=\"no_st_en\">{{ applists.email }}</span>\n+            </td>\n+            <td>\n+              <span class=\"tbl__td__label\">App Registration Date:</span>\n+              {{ applists.registrationDate }}\n+            </td>\n+            <td>\n+              <span class=\"tbl__td__label\">App Account Status:</span>\n+              <div\n+                [ngClass]=\"{\n+                  participant__label:\n+                    applists.registrationStatus === statusEnum.Active,\n+                  inactive__text:\n+                    applists.registrationStatus === statusEnum.Inactive\n+                }\"\n+              >\n+                {{ applists.registrationStatus }}\n+              </div>\n+            </td>\n+            <td>\n+              <span class=\"tbl__td__label\">Number of Studies Enrolled:</span>\n+              <span\n+                [class.no_st_en]=\"applists.enrolledStudies.length > 0\"\n+                (click)=\"openModal(template, applists.enrolledStudies)\"\n+              >\n+                {{ applists.enrolledStudies.length }}\n+              </span>\n+            </td>\n+          </tr>\n+        </tbody>\n+        <tfoot>\n+          <tr>\n+            <td colspan=\"4\">\n+              <mfBootstrapPaginator></mfBootstrapPaginator>\n+            </td>\n+          </tr>\n+        </tfoot>\n+      </table>\n+    </div>\n+  </section>\n+</ng-container>\n+\n+<ng-template #template>", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1OTU2MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470759561", "bodyText": "Updated", "author": "rohithd-btc", "createdAt": "2020-08-14T17:30:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE0Nzk1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1Njk3NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470156974", "bodyText": "this isn't testing the behaviour of this component, this test is the same as the previous one.", "author": "nikklassen", "createdAt": "2020-08-13T18:21:31Z", "path": "UR-web-app/src/app/site-coordinator/apps/app-details/app-details.component.spec.ts", "diffHunk": "@@ -0,0 +1,75 @@\n+import {\n+  async,\n+  TestBed,\n+  ComponentFixture,\n+  fakeAsync,\n+} from '@angular/core/testing';\n+import {ModalModule, BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from '../../../service/entity.service';\n+import {of} from 'rxjs';\n+import {AppDetailsService} from '../shared/app-details.service';\n+import {AppDetailsComponent} from './app-details.component';\n+import {expectedAppDetails} from '../../../entity/mock-apps-data';\n+import {AppsModule} from '../apps.module';\n+\n+describe('AppDetailsComponent', () => {\n+  let component: AppDetailsComponent;\n+  let fixture: ComponentFixture<AppDetailsComponent>;\n+\n+  beforeEach(async(async () => {\n+    const appDetailsServiceSpy = jasmine.createSpyObj<AppDetailsService>(\n+      'AppDetailsService',\n+      {getAppDetails: of(expectedAppDetails)},\n+    );\n+\n+    await TestBed.configureTestingModule({\n+      declarations: [AppDetailsComponent],\n+      imports: [\n+        RouterTestingModule,\n+        ModalModule.forRoot(),\n+        BrowserAnimationsModule,\n+        AppsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        BsModalService,\n+        BsModalRef,\n+        {provide: AppDetailsService, useValue: appDetailsServiceSpy},\n+      ],\n+    })\n+      .compileComponents()\n+      .then(() => {\n+        fixture = TestBed.createComponent(AppDetailsComponent);\n+        component = fixture.componentInstance;\n+        fixture.detectChanges();\n+      });\n+  }));\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should get apps participants details via refresh function', fakeAsync(() => {\n+    component.appDetail$.subscribe((appDetail) => {\n+      expect(appDetail.participants.length).toEqual(\n+        expectedAppDetails.participants.length,\n+      );\n+    });\n+  }));\n+\n+  it('should get apps participants enrolledStudies details', fakeAsync(() => {", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzAwNzQ2OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r473007469", "bodyText": "Updated", "author": "rohithd-btc", "createdAt": "2020-08-19T12:56:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1Njk3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1NzA1OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470157059", "bodyText": "what about the filter functionality?", "author": "nikklassen", "createdAt": "2020-08-13T18:21:40Z", "path": "UR-web-app/src/app/site-coordinator/apps/app-details/app-details.component.spec.ts", "diffHunk": "@@ -0,0 +1,75 @@\n+import {\n+  async,\n+  TestBed,\n+  ComponentFixture,\n+  fakeAsync,\n+} from '@angular/core/testing';\n+import {ModalModule, BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {ToastrModule} from 'ngx-toastr';\n+import {EntityService} from '../../../service/entity.service';\n+import {of} from 'rxjs';\n+import {AppDetailsService} from '../shared/app-details.service';\n+import {AppDetailsComponent} from './app-details.component';\n+import {expectedAppDetails} from '../../../entity/mock-apps-data';\n+import {AppsModule} from '../apps.module';\n+\n+describe('AppDetailsComponent', () => {\n+  let component: AppDetailsComponent;\n+  let fixture: ComponentFixture<AppDetailsComponent>;\n+\n+  beforeEach(async(async () => {\n+    const appDetailsServiceSpy = jasmine.createSpyObj<AppDetailsService>(\n+      'AppDetailsService',\n+      {getAppDetails: of(expectedAppDetails)},\n+    );\n+\n+    await TestBed.configureTestingModule({\n+      declarations: [AppDetailsComponent],\n+      imports: [\n+        RouterTestingModule,\n+        ModalModule.forRoot(),\n+        BrowserAnimationsModule,\n+        AppsModule,\n+        ToastrModule.forRoot({\n+          positionClass: 'toast-top-center',\n+          preventDuplicates: true,\n+          enableHtml: true,\n+        }),\n+      ],\n+      providers: [\n+        EntityService,\n+        BsModalService,\n+        BsModalRef,\n+        {provide: AppDetailsService, useValue: appDetailsServiceSpy},\n+      ],\n+    })\n+      .compileComponents()\n+      .then(() => {\n+        fixture = TestBed.createComponent(AppDetailsComponent);\n+        component = fixture.componentInstance;\n+        fixture.detectChanges();\n+      });\n+  }));\n+\n+  it('should create', () => {\n+    expect(component).toBeTruthy();\n+  });\n+\n+  it('should get apps participants details via refresh function', fakeAsync(() => {", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzAwNzU4MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r473007581", "bodyText": "Updated", "author": "rohithd-btc", "createdAt": "2020-08-19T12:56:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1NzA1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1Nzc1Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470157752", "bodyText": "[] === [] isn't true, so this statement will always be true. Use length to check for empty lists, or just remove the check and make your modal work on empty lists.", "author": "nikklassen", "createdAt": "2020-08-13T18:23:07Z", "path": "UR-web-app/src/app/site-coordinator/apps/app-details/app-details.component.ts", "diffHunk": "@@ -0,0 +1,69 @@\n+import {Component, OnInit, TemplateRef} from '@angular/core';\n+import {AppDetailsService} from '../shared/app-details.service';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute} from '@angular/router';\n+import {BehaviorSubject, Observable, of, combineLatest} from 'rxjs';\n+import {AppDetails, Participant, EnrolledStudy} from '../shared/app-details';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n+import {map} from 'rxjs/operators';\n+import {Status} from 'src/app/shared/enums';\n+\n+@Component({\n+  selector: 'app-app-details',\n+  templateUrl: './app-details.component.html',\n+  styleUrls: ['./app-details.component.scss'],\n+})\n+export class AppDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  appId = '';\n+  query$ = new BehaviorSubject('');\n+  appDetail$: Observable<AppDetails> = of();\n+  enrolledStudies: EnrolledStudy[] = [];\n+  statusEnum = Status;\n+\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    public modalRef: BsModalRef,\n+    private readonly appDetailsService: AppDetailsService,\n+    private readonly route: ActivatedRoute,\n+  ) {\n+    super();\n+  }\n+\n+  openModal(template: TemplateRef<unknown>, enrollStudies: EnrolledStudy[]) {\n+    this.enrolledStudies = enrollStudies;\n+    if (enrollStudies !== []) {", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1OTQ1Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470759452", "bodyText": "Updated", "author": "rohithd-btc", "createdAt": "2020-08-14T17:30:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1Nzc1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1ODE5OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470158199", "bodyText": "enrolledStudies", "author": "nikklassen", "createdAt": "2020-08-13T18:23:59Z", "path": "UR-web-app/src/app/site-coordinator/apps/app-details/app-details.component.ts", "diffHunk": "@@ -0,0 +1,69 @@\n+import {Component, OnInit, TemplateRef} from '@angular/core';\n+import {AppDetailsService} from '../shared/app-details.service';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute} from '@angular/router';\n+import {BehaviorSubject, Observable, of, combineLatest} from 'rxjs';\n+import {AppDetails, Participant, EnrolledStudy} from '../shared/app-details';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n+import {map} from 'rxjs/operators';\n+import {Status} from 'src/app/shared/enums';\n+\n+@Component({\n+  selector: 'app-app-details',\n+  templateUrl: './app-details.component.html',\n+  styleUrls: ['./app-details.component.scss'],\n+})\n+export class AppDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  appId = '';\n+  query$ = new BehaviorSubject('');\n+  appDetail$: Observable<AppDetails> = of();\n+  enrolledStudies: EnrolledStudy[] = [];\n+  statusEnum = Status;\n+\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    public modalRef: BsModalRef,\n+    private readonly appDetailsService: AppDetailsService,\n+    private readonly route: ActivatedRoute,\n+  ) {\n+    super();\n+  }\n+\n+  openModal(template: TemplateRef<unknown>, enrollStudies: EnrolledStudy[]) {", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1OTQwMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470759401", "bodyText": "updated", "author": "rohithd-btc", "createdAt": "2020-08-14T17:30:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1ODE5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1ODM4NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470158384", "bodyText": "params.appId", "author": "nikklassen", "createdAt": "2020-08-13T18:24:21Z", "path": "UR-web-app/src/app/site-coordinator/apps/app-details/app-details.component.ts", "diffHunk": "@@ -0,0 +1,69 @@\n+import {Component, OnInit, TemplateRef} from '@angular/core';\n+import {AppDetailsService} from '../shared/app-details.service';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute} from '@angular/router';\n+import {BehaviorSubject, Observable, of, combineLatest} from 'rxjs';\n+import {AppDetails, Participant, EnrolledStudy} from '../shared/app-details';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n+import {map} from 'rxjs/operators';\n+import {Status} from 'src/app/shared/enums';\n+\n+@Component({\n+  selector: 'app-app-details',\n+  templateUrl: './app-details.component.html',\n+  styleUrls: ['./app-details.component.scss'],\n+})\n+export class AppDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  appId = '';\n+  query$ = new BehaviorSubject('');\n+  appDetail$: Observable<AppDetails> = of();\n+  enrolledStudies: EnrolledStudy[] = [];\n+  statusEnum = Status;\n+\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    public modalRef: BsModalRef,\n+    private readonly appDetailsService: AppDetailsService,\n+    private readonly route: ActivatedRoute,\n+  ) {\n+    super();\n+  }\n+\n+  openModal(template: TemplateRef<unknown>, enrollStudies: EnrolledStudy[]) {\n+    this.enrolledStudies = enrollStudies;\n+    if (enrollStudies !== []) {\n+      this.modalRef = this.modalService.show(template);\n+    }\n+  }\n+\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params['appId']) {", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1OTI4NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470759284", "bodyText": "updated", "author": "rohithd-btc", "createdAt": "2020-08-14T17:29:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1ODM4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1ODgwOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470158809", "bodyText": "This function should start with a verb, like fetch", "author": "nikklassen", "createdAt": "2020-08-13T18:25:09Z", "path": "UR-web-app/src/app/site-coordinator/apps/app-details/app-details.component.ts", "diffHunk": "@@ -0,0 +1,69 @@\n+import {Component, OnInit, TemplateRef} from '@angular/core';\n+import {AppDetailsService} from '../shared/app-details.service';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute} from '@angular/router';\n+import {BehaviorSubject, Observable, of, combineLatest} from 'rxjs';\n+import {AppDetails, Participant, EnrolledStudy} from '../shared/app-details';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n+import {map} from 'rxjs/operators';\n+import {Status} from 'src/app/shared/enums';\n+\n+@Component({\n+  selector: 'app-app-details',\n+  templateUrl: './app-details.component.html',\n+  styleUrls: ['./app-details.component.scss'],\n+})\n+export class AppDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  appId = '';\n+  query$ = new BehaviorSubject('');\n+  appDetail$: Observable<AppDetails> = of();\n+  enrolledStudies: EnrolledStudy[] = [];\n+  statusEnum = Status;\n+\n+  constructor(\n+    private readonly modalService: BsModalService,\n+    public modalRef: BsModalRef,\n+    private readonly appDetailsService: AppDetailsService,\n+    private readonly route: ActivatedRoute,\n+  ) {\n+    super();\n+  }\n+\n+  openModal(template: TemplateRef<unknown>, enrollStudies: EnrolledStudy[]) {\n+    this.enrolledStudies = enrollStudies;\n+    if (enrollStudies !== []) {\n+      this.modalRef = this.modalService.show(template);\n+    }\n+  }\n+\n+  ngOnInit(): void {\n+    this.subs.add(\n+      this.route.params.subscribe((params) => {\n+        if (params['appId']) {\n+          this.appId = params.appId as string;\n+        }\n+        this.appParticipantsDetails();\n+      }),\n+    );\n+  }\n+\n+  appParticipantsDetails(): void {", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1OTIyNw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470759227", "bodyText": "updated", "author": "rohithd-btc", "createdAt": "2020-08-14T17:29:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1ODgwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1OTMyNw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470159327", "bodyText": "This is never used", "author": "nikklassen", "createdAt": "2020-08-13T18:26:05Z", "path": "UR-web-app/src/app/site-coordinator/apps/app-details/app-details.component.ts", "diffHunk": "@@ -0,0 +1,69 @@\n+import {Component, OnInit, TemplateRef} from '@angular/core';\n+import {AppDetailsService} from '../shared/app-details.service';\n+import {BsModalService, BsModalRef} from 'ngx-bootstrap/modal';\n+import {ActivatedRoute} from '@angular/router';\n+import {BehaviorSubject, Observable, of, combineLatest} from 'rxjs';\n+import {AppDetails, Participant, EnrolledStudy} from '../shared/app-details';\n+import {UnsubscribeOnDestroyAdapter} from 'src/app/unsubscribe-on-destroy-adapter';\n+import {map} from 'rxjs/operators';\n+import {Status} from 'src/app/shared/enums';\n+\n+@Component({\n+  selector: 'app-app-details',\n+  templateUrl: './app-details.component.html',\n+  styleUrls: ['./app-details.component.scss'],\n+})\n+export class AppDetailsComponent extends UnsubscribeOnDestroyAdapter\n+  implements OnInit {\n+  appId = '';\n+  query$ = new BehaviorSubject('');\n+  appDetail$: Observable<AppDetails> = of();\n+  enrolledStudies: EnrolledStudy[] = [];", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1OTAzNw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470759037", "bodyText": "It is used inside the template to display data .", "author": "rohithd-btc", "createdAt": "2020-08-14T17:29:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1OTMyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDgxNjMxNw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470816317", "bodyText": "I see. I only noticed applists.enrolledStudies the first time.", "author": "nikklassen", "createdAt": "2020-08-14T19:05:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1OTMyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDExMA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470160110", "bodyText": "Use encodeURIComponent when building URLs", "author": "nikklassen", "createdAt": "2020-08-13T18:27:36Z", "path": "UR-web-app/src/app/site-coordinator/apps/shared/app-details.service.ts", "diffHunk": "@@ -0,0 +1,15 @@\n+import {Injectable} from '@angular/core';\n+import {Observable} from 'rxjs';\n+import {AppDetails} from './app-details';\n+import {EntityService} from 'src/app/service/entity.service';\n+\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class AppDetailsService {\n+  constructor(private readonly entityService: EntityService<AppDetails>) {}\n+\n+  getAppDetails(appId: string): Observable<AppDetails> {\n+    return this.entityService.get(`apps/${appId}/participants`);", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1ODg3Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470758876", "bodyText": "We tried in two ways\n\nIn App.details.service.ts\n\nreturn this.entityService.get(\nencodeURIComponent(apps/${appId}/participants),\n);\nAnd same way in EntityService.ts file\nget(urlpath: string): Observable {\nconst serviceUrl = Location.joinWithSlash(this.baseUrl, decodeURIComponent(urlpath));\nreturn this.http.get(serviceUrl);\n}\n\nSecond method is\nin App-details.service.ts file\n\nreturn this.http.get(\nencodeURIComponent(${environment.baseUrl}/apps/${appId}/participants),\n);\nWhich method is to go with?", "author": "rohithd-btc", "createdAt": "2020-08-14T17:29:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDExMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDgxNTIxNQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470815215", "bodyText": "Both of these methods won't work because a URI component specifically doesn't have slashes. The intention is only to encode the appId so if it has a slash, ?, etc it won't mess up the URL. So you just need to do\nreturn this.entityService.get(`apps/${encodeURIComponent(appId)}/participants`);", "author": "nikklassen", "createdAt": "2020-08-14T19:02:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDExMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzAwNzcwOA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r473007708", "bodyText": "Updated", "author": "rohithd-btc", "createdAt": "2020-08-19T12:57:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDExMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDM3Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470160376", "bodyText": "Enrollment", "author": "nikklassen", "createdAt": "2020-08-13T18:28:07Z", "path": "UR-web-app/src/app/site-coordinator/apps/shared/app-details.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+export interface AppDetails {\n+  appId: string;\n+  customId: string;\n+  name: string;\n+  participants: Participant[];\n+  status: number;\n+  message: string;\n+  code: string;\n+}\n+\n+export interface Participant {\n+  email: string;\n+  userDetailsId: string;\n+  registrationStatus: string;\n+  registrationDate: string;\n+  enrolledStudies: EnrolledStudy[];\n+  enrollments: Enrollments[];\n+  consentHistory: Consent[];\n+}\n+\n+export interface EnrolledStudy {\n+  studyId: string;\n+  customStudyId: string;\n+  studyName: string;\n+  sites: Site[];\n+}\n+\n+export interface Site {\n+  siteId: string;\n+  customSiteId: string;\n+  siteName: string;\n+  enrollmentDate: string;\n+  withdrawlDate: string;\n+  siteStatus?: string;\n+}\n+export interface Consent {\n+  id: string;\n+  consentVersion: string;\n+  consentedDate: string;\n+  consentDocumentPath: string;\n+  dataSharingPermissions: string;\n+}\n+export interface Enrollments {", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1NzE1NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470757154", "bodyText": "Updated", "author": "rohithd-btc", "createdAt": "2020-08-14T17:25:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDM3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDc0Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470160746", "bodyText": "get. The is the AppDetails service, so the AppDetails part is implied.", "author": "nikklassen", "createdAt": "2020-08-13T18:28:50Z", "path": "UR-web-app/src/app/site-coordinator/apps/shared/app-details.service.ts", "diffHunk": "@@ -0,0 +1,15 @@\n+import {Injectable} from '@angular/core';\n+import {Observable} from 'rxjs';\n+import {AppDetails} from './app-details';\n+import {EntityService} from 'src/app/service/entity.service';\n+\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class AppDetailsService {\n+  constructor(private readonly entityService: EntityService<AppDetails>) {}\n+\n+  getAppDetails(appId: string): Observable<AppDetails> {", "originalCommit": "e3710e3227ad7fc6f323d6b3cdcbd6927a7aed41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc1NzA2Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r470757067", "bodyText": "Updated", "author": "rohithd-btc", "createdAt": "2020-08-14T17:25:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDc0Ng=="}], "type": "inlineReview"}, {"oid": "d57dcbe19404edf53f0dbb3e337842675f75fd1c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d57dcbe19404edf53f0dbb3e337842675f75fd1c", "message": "Merge branch 'Participant-manger-webapp-common-changes' of https://github.com/GoogleCloudPlatform/fda-mystudies into participant-manager-web-app-app-participant", "committedDate": "2020-08-14T16:47:00Z", "type": "commit"}, {"oid": "5bb22adcbbb35287d3590acc1ca868c868b5987d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5bb22adcbbb35287d3590acc1ca868c868b5987d", "message": "Pr comments Resolved", "committedDate": "2020-08-14T17:18:23Z", "type": "commit"}, {"oid": "0989008b52fdcd7185c0f8bba028810654ee2cad", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0989008b52fdcd7185c0f8bba028810654ee2cad", "message": "Merge branch 'develop' of https://github.com/GoogleCloudPlatform/fda-mystudies into participant-manager-web-app-app-participant", "committedDate": "2020-08-17T08:18:58Z", "type": "commit"}, {"oid": "ea1437b1dbafb579e7f5524acb8e9147541af565", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ea1437b1dbafb579e7f5524acb8e9147541af565", "message": "Filter testcase is fixed", "committedDate": "2020-08-19T12:41:00Z", "type": "commit"}, {"oid": "8b803f1952c74b1358afc3ca0cee66eb01063efc", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8b803f1952c74b1358afc3ca0cee66eb01063efc", "message": "Encode Component changes", "committedDate": "2020-08-19T12:50:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzA3MTQ5Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r473071497", "bodyText": "I bring this up fairly often, don't spy on the component that you're testing. And adding callThrough does nothing", "author": "nikklassen", "createdAt": "2020-08-19T14:26:45Z", "path": "UR-web-app/src/app/site-coordinator/apps/app-details/app-details.component.spec.ts", "diffHunk": "@@ -66,10 +69,12 @@ describe('AppDetailsComponent', () => {\n   }));\n \n   it('should get apps participants enrolledStudies details', fakeAsync(() => {\n+    spyOn(component, 'search').and.callThrough();", "originalCommit": "ea1437b1dbafb579e7f5524acb8e9147541af565", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE4NTAwOA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/746#discussion_r473185008", "bodyText": "Sorry  will take care of this in future.Now i have removed that.", "author": "rohithd-btc", "createdAt": "2020-08-19T17:00:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzA3MTQ5Nw=="}], "type": "inlineReview"}, {"oid": "3c4fef138e7b86099b61de58928575cb13231a6e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3c4fef138e7b86099b61de58928575cb13231a6e", "message": "Removed unwanted spy component code", "committedDate": "2020-08-19T16:57:52Z", "type": "commit"}, {"oid": "575f1ac8116e78f7aa917eec3015674036b721a7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/575f1ac8116e78f7aa917eec3015674036b721a7", "message": "Merge branch 'develop' of https://github.com/GoogleCloudPlatform/fda-mystudies into participant-manager-web-app-app-participant", "committedDate": "2020-08-19T16:58:09Z", "type": "commit"}, {"oid": "3d4c44f64ce1f5c279df9a654438fc5f51ed169b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3d4c44f64ce1f5c279df9a654438fc5f51ed169b", "message": "Merge branch 'develop' into participant-manager-web-app-app-participant", "committedDate": "2020-08-21T13:58:04Z", "type": "commit"}, {"oid": "51ed1c74f229a2810a3566e88b25a57faa93fbaa", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/51ed1c74f229a2810a3566e88b25a57faa93fbaa", "message": "Merge branch 'develop' into participant-manager-web-app-app-participant", "committedDate": "2020-08-21T14:38:48Z", "type": "commit"}]}