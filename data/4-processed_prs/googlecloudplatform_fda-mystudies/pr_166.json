{"pr_number": 166, "pr_title": "Update UIWebView to WKWebView.", "pr_createdAt": "2020-04-17T09:36:43Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/166", "timeline": [{"oid": "712852c2b8f41c114654356178447eb080027124", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/712852c2b8f41c114654356178447eb080027124", "message": "Update UIWebView to WKWebView.", "committedDate": "2020-04-17T09:32:21Z", "type": "commit"}, {"oid": "995aef3ca29589be0db0fa9f3261daaa844244c2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/995aef3ca29589be0db0fa9f3261daaa844244c2", "message": "Fix load consent PDF.", "committedDate": "2020-04-17T13:29:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIzODYwNw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/166#discussion_r410238607", "bodyText": "nit: change didFail to didFinish to be consistent with the previous method.", "author": "zohrehj", "createdAt": "2020-04-17T13:54:37Z", "path": "iOS/HPHC/HPHC/Controllers/StudyUI/ResourceUI/GatewayResourceDetailViewController.swift", "diffHunk": "@@ -159,24 +153,19 @@ class GatewayResourceDetailViewController: UIViewController {\n   }\n \n   @IBAction func buttonActionForward(_ sender: UIBarButtonItem) {\n-\n     self.sendEmail()\n   }\n \n-  override func didReceiveMemoryWarning() {\n-    super.didReceiveMemoryWarning()\n-    // Dispose of any resources that can be recreated.\n-  }\n }\n \n-extension GatewayResourceDetailViewController: UIWebViewDelegate {\n+extension GatewayResourceDetailViewController: WKNavigationDelegate {\n \n-  func webViewDidFinishLoad(_ webView: UIWebView) {\n+  func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {\n     self.activityIndicator.stopAnimating()\n     self.activityIndicator.removeFromSuperview()\n   }\n \n-  func webView(_ webView: UIWebView, didFailLoadWithError error: Error) {\n+  func webView(_ webView: WKWebView, didFail navigation: WKNavigation!, withError error: Error) {", "originalCommit": "995aef3ca29589be0db0fa9f3261daaa844244c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMwMDk0NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/166#discussion_r410300944", "bodyText": "didFail and didFinish, both the methods are updated with new ones.", "author": "tushar-boston", "createdAt": "2020-04-17T15:32:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIzODYwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIzOTQ5NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/166#discussion_r410239495", "bodyText": "nit: typo. didFailWithError", "author": "zohrehj", "createdAt": "2020-04-17T13:55:45Z", "path": "iOS/HPHC/HPHC/Controllers/StudyUI/ResourceUI/GatewayResourceDetailViewController.swift", "diffHunk": "@@ -295,21 +284,18 @@ extension GatewayResourceDetailViewController: FileDownloadManagerDelegates {\n \n     let data = FileDownloadManager.decrytFile(pathURL: URL.init(string: fullPath))\n \n-    if data != nil {\n+    if let pdfData = data {\n       self.resource?.file?.localPath = path\n-      let mimeType = \"application/\" + \"\\((self.resource?.file?.mimeType?.rawValue)!)\"\n-      self.webView?.load(\n-        data!,\n+      let mimeType = \"application/\" + \"\\(self.resource?.file?.mimeType?.rawValue ?? \"\")\"\n+      self.webView.load(\n+        pdfData,\n         mimeType: mimeType,\n-        textEncodingName: \"UTF-8\",\n-        baseURL: URL.init(fileURLWithPath: \"\")\n+        characterEncodingName: \"UTF-8\",\n+        baseURL: URL(fileURLWithPath: \"\")\n       )\n     }\n-\n   }\n \n-  func download(manager: FileDownloadManager, didFailedWithError error: Error) {\n-\n-  }\n+  func download(manager: FileDownloadManager, didFailedWithError error: Error) {}", "originalCommit": "995aef3ca29589be0db0fa9f3261daaa844244c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDMwMTQ5OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/166#discussion_r410301498", "bodyText": "These methods are defined in a library.", "author": "tushar-boston", "createdAt": "2020-04-17T15:33:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIzOTQ5NQ=="}], "type": "inlineReview"}]}