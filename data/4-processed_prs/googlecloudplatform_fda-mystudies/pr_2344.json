{"pr_number": 2344, "pr_title": "Participant manager webapp load more and search functionality for site, study,apps-tab", "pr_createdAt": "2020-12-11T15:26:07Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344", "timeline": [{"oid": "fde42f564bde276aec521f4278502af60b1bec60", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fde42f564bde276aec521f4278502af60b1bec60", "message": "pagination is added\n\npagination is added", "committedDate": "2020-12-11T05:39:03Z", "type": "commit"}, {"oid": "65c4fbb9df551945d2263be88cea1c9907d46429", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/65c4fbb9df551945d2263be88cea1c9907d46429", "message": "parse to string", "committedDate": "2020-12-11T12:54:02Z", "type": "commit"}, {"oid": "2371de905a93a70d8ad0a74629f1849a350b625c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2371de905a93a70d8ad0a74629f1849a350b625c", "message": "test case fix\n\ntest case fix", "committedDate": "2020-12-11T13:31:21Z", "type": "commit"}, {"oid": "5e7d260d52fa0593f23a7244162eaba109e465b8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5e7d260d52fa0593f23a7244162eaba109e465b8", "message": "studylist load more implementation\n\nstudylist load more implementation", "committedDate": "2020-12-11T13:43:33Z", "type": "commit"}, {"oid": "624225d2916dd7e5bb789e9654927e03a606c9d2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/624225d2916dd7e5bb789e9654927e03a606c9d2", "message": "fixed the issue\n\nfixed the issue", "committedDate": "2020-12-11T14:34:41Z", "type": "commit"}, {"oid": "7004e991f8d584f097e8469986d223436d62a58f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7004e991f8d584f097e8469986d223436d62a58f", "message": "search-functionality-implementation-sites,study,applist\n\nsearch-functionality-implementation-sites,study,applist", "committedDate": "2020-12-11T15:24:21Z", "type": "commit"}, {"oid": "708b91769e946c0cc035560fe4774d91a118285b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/708b91769e946c0cc035560fe4774d91a118285b", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist", "committedDate": "2020-12-11T15:26:20Z", "type": "commit"}, {"oid": "6367c9a600bf8a3413d69f6a9c3e852017c15133", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6367c9a600bf8a3413d69f6a9c3e852017c15133", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist", "committedDate": "2020-12-14T05:43:30Z", "type": "commit"}, {"oid": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/62f3a037678be55a83136a0d9a26baa7d1ad8dcb", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist", "committedDate": "2020-12-14T06:01:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0NzE1OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542447158", "bodyText": "typo updatedParameter", "author": "zohrehj", "createdAt": "2020-12-14T14:55:40Z", "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "diffHunk": "@@ -25,25 +27,33 @@ export class AppListComponent implements OnInit {\n     '=1': 'One Study',\n     'other': '# Studies',\n   };\n+  loadMoreEnabled = true;\n+\n+  searchValue = '';\n \n   constructor(\n     private readonly appService: AppsService,\n     private readonly sharedService: SearchService,\n     private readonly toastr: ToastrService,\n+    private readonly searchParameter: SearchParameterService,\n   ) {}\n \n   ngOnInit(): void {\n+    this.searchParameter.searchParam$.subscribe((upadtedParameter) => {\n+      this.manageAppsBackup = {} as ManageApps;\n+      this.searchValue = upadtedParameter;", "originalCommit": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjYyNTM3Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542625377", "bodyText": "this has been updated", "author": "prakashm181", "createdAt": "2020-12-14T18:38:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0NzE1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0ODg3NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542448875", "bodyText": "this will only search within apps that are already loaded, users can easily use their browser search to do this. Why should we add this feature?", "author": "zohrehj", "createdAt": "2020-12-14T14:57:41Z", "path": "participant-manager/src/app/site-coordinator/apps/app-list/app-list.component.ts", "diffHunk": "@@ -82,4 +96,33 @@ export class AppListComponent implements OnInit {\n       permission === Permission.View || permission === Permission.ViewAndEdit\n     );\n   }\n+\n+  loadMoreSites() {\n+    const offset = this.manageAppsBackup.apps.length;\n+    this.manageApp$ = combineLatest(\n+      this.appService.getUserApps(limit, offset, this.searchValue),\n+      this.query$,\n+    ).pipe(\n+      map(([manageApps, query]) => {\n+        const apps = [];\n+        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n+        apps.push(...this.manageAppsBackup.apps);\n+        apps.push(...manageApps.apps);\n+        this.manageAppsBackup.apps = apps;\n+        if (!manageApps.superAdmin && manageApps.studyPermissionCount < 2) {\n+          this.toastr.error(\n+            'This view displays app-wise enrollment if you manage multiple studies.',\n+          );\n+        }\n+        this.manageAppsBackup.apps = this.manageAppsBackup.apps.filter(\n+          (app: App) =>\n+            app.name?.toLowerCase().includes(query.toLowerCase()) ||\n+            app.customId?.toLowerCase().includes(query.toLowerCase()),\n+        );\n+        this.loadMoreEnabled =\n+          this.manageAppsBackup.apps.length % limit === 0 ? true : false;\n+        return this.manageAppsBackup;\n+      }),", "originalCommit": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjYyNTg5NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542625894", "bodyText": "removed unused code", "author": "prakashm181", "createdAt": "2020-12-14T18:38:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ0ODg3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MTAxOA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542451018", "bodyText": "consider moving the animation component into a common partial", "author": "zohrehj", "createdAt": "2020-12-14T15:00:25Z", "path": "participant-manager/src/app/site-coordinator/sites/site-list/site-list.component.html", "diffHunk": "@@ -121,6 +121,16 @@\n             </div>\n           </div>\n         </div>\n+        <div *ngIf=\"loadMoreEnabled\" (mouseover)=\"loadMoreSites()\">\n+          <div class=\"content_loader\">\n+            <div class=\"container_btm_loader animation-2\">\n+              <div class=\"shape shape1\"></div>\n+              <div class=\"shape shape2\"></div>\n+              <div class=\"shape shape3\"></div>\n+              <div class=\"shape shape4\"></div>\n+            </div>\n+          </div>", "originalCommit": "62f3a037678be55a83136a0d9a26baa7d1ad8dcb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjYyNjY1OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2344#discussion_r542626659", "bodyText": "for this added load more spinner component", "author": "prakashm181", "createdAt": "2020-12-14T18:39:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ1MTAxOA=="}], "type": "inlineReview"}, {"oid": "92b087fef6cba3d1a2ff12faaa954b6bca54018c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/92b087fef6cba3d1a2ff12faaa954b6bca54018c", "message": "comment-fix\n\ncomment-fix", "committedDate": "2020-12-14T16:48:43Z", "type": "commit"}, {"oid": "cad942c4846bb6b2d1feaf63233caa14123cc79c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cad942c4846bb6b2d1feaf63233caa14123cc79c", "message": "added loadmore-spinner component\n\nadded loadmore-spinner component", "committedDate": "2020-12-14T17:29:03Z", "type": "commit"}, {"oid": "6aed32aba53c4d8e5e5c902c8bfdd982ad514fb7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6aed32aba53c4d8e5e5c902c8bfdd982ad514fb7", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist", "committedDate": "2020-12-14T17:30:57Z", "type": "commit"}, {"oid": "ecea0fe9031f22de9c7303fb2f4f0cf0c7f07de7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ecea0fe9031f22de9c7303fb2f4f0cf0c7f07de7", "message": "removed unused code\n\nremoved unused code", "committedDate": "2020-12-14T18:06:11Z", "type": "commit"}, {"oid": "8723ca96a00c1d9045e60fa321c3da9714997ca8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8723ca96a00c1d9045e60fa321c3da9714997ca8", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist", "committedDate": "2020-12-14T18:07:04Z", "type": "commit"}, {"oid": "b3479790b7372697b7b3fe3b23e41b37cfdc70e6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b3479790b7372697b7b3fe3b23e41b37cfdc70e6", "message": "Merge branch 'Paricipant-manager-webapp-pagination-for-site-study-applist' of https://github.com/GoogleCloudPlatform/fda-mystudies into Paricipant-manager-webapp-pagination-for-site-study-applist", "committedDate": "2020-12-14T18:27:01Z", "type": "commit"}, {"oid": "f391f79d4df9d2e2773f89ebb30ac318408a2a9a", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f391f79d4df9d2e2773f89ebb30ac318408a2a9a", "message": "lint issue fix\n\nlint issue fix", "committedDate": "2020-12-14T18:33:47Z", "type": "commit"}, {"oid": "35244baf439a0261519697e0e81402fb34799406", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/35244baf439a0261519697e0e81402fb34799406", "message": "search issue fixed\n\nsearch issue fixed", "committedDate": "2020-12-14T18:57:25Z", "type": "commit"}, {"oid": "be44cf47809593313d18176cad52e861c5f40c93", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/be44cf47809593313d18176cad52e861c5f40c93", "message": "Merge branch 'develop' into Paricipant-manager-webapp-pagination-for-site-study-applist", "committedDate": "2020-12-15T05:21:56Z", "type": "commit"}]}