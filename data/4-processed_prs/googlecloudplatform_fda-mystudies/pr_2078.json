{"pr_number": 2078, "pr_title": "iOS - Auth Cleanup", "pr_createdAt": "2020-11-17T18:20:18Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2078", "timeline": [{"oid": "5ffc7f54fc520da3a5726a71ec53804200b06257", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5ffc7f54fc520da3a5726a71ec53804200b06257", "message": "Remove old Auth code.", "committedDate": "2020-11-17T17:40:39Z", "type": "commit"}, {"oid": "1ae703c8eabe639122eafefc75e0eff8916e23d0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1ae703c8eabe639122eafefc75e0eff8916e23d0", "message": "Update endpoints configuration.", "committedDate": "2020-11-17T18:10:09Z", "type": "commit"}, {"oid": "35ff6108612386ab37586d1b7970a17a50590f88", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/35ff6108612386ab37586d1b7970a17a50590f88", "message": "Remove orgID enteries.", "committedDate": "2020-11-17T18:11:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ2MDY5NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2078#discussion_r525460694", "bodyText": "why is logout related logic being removed?", "author": "zohrehj", "createdAt": "2020-11-17T19:56:21Z", "path": "iOS/HPHC/HPHC/AppDelegate.swift", "diffHunk": "@@ -1220,10 +1220,7 @@ extension AppDelegate: NMWebServiceDelegate {\n   func failedRequest(_ manager: NetworkManager, requestName: NSString, error: NSError) {\n     // Remove Progress\n     self.addAndRemoveProgress(add: false)\n-    if requestName as String == AuthServerMethods.logout.method.methodName {\n-      self.addAndRemoveProgress(add: false)\n-\n-    } else if requestName as String == WCPMethods.eligibilityConsent.method.methodName {", "originalCommit": "35ff6108612386ab37586d1b7970a17a50590f88", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTc5OTY2Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2078#discussion_r525799662", "bodyText": "AuthServerMethods has been removed and related code. The logic was already updated with the new logout API implementation.", "author": "tushar-boston", "createdAt": "2020-11-18T04:39:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ2MDY5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ2MTU3OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2078#discussion_r525461579", "bodyText": "same here, this change looks unrelated.", "author": "zohrehj", "createdAt": "2020-11-17T19:57:04Z", "path": "iOS/HPHC/HPHC/Controllers/GatewayUI/SlideMenu/LeftMenuViewController.swift", "diffHunk": "@@ -645,10 +642,6 @@ extension LeftMenuViewController: NMWebServiceDelegate {\n           self.fdaSlideMenuController()?.navigateToHomeAfterUnauthorizedAccess()\n         }\n       )\n-    } else if requestName as String == AuthServerMethods.logout.description\n-      && error.code == HTTPError.forbidden.rawValue\n-    {\n-      self.signout()", "originalCommit": "35ff6108612386ab37586d1b7970a17a50590f88", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgwMTAzMA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2078#discussion_r525801030", "bodyText": "AuthServerMethods has been removed.", "author": "tushar-boston", "createdAt": "2020-11-18T04:41:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ2MTU3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ2MjI5MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2078#discussion_r525462291", "bodyText": "again forgot password change seems unrelated", "author": "zohrehj", "createdAt": "2020-11-17T19:57:38Z", "path": "iOS/HPHC/HPHC/Controllers/LoginRegisterUI/LoginUI/ForgotPasswordViewController.swift", "diffHunk": "@@ -169,43 +169,22 @@ extension ForgotPasswordViewController: NMWebServiceDelegate {\n   }\n \n   func finishedRequest(_ manager: NetworkManager, requestName: NSString, response: AnyObject?) {\n-\n     self.removeProgressIndicator()\n-\n-    if requestName as String == AuthServerMethods.forgotPassword.description {\n-      UIUtilities.showAlertMessageWithActionHandler(\n-        NSLocalizedString(kTitleMessage, comment: \"\"),\n-        message: NSLocalizedString(kForgotPasswordResponseMessage, comment: \"\"),\n-        buttonTitle: NSLocalizedString(kTitleOk, comment: \"\"),\n-        viewControllerUsed: self\n-      ) {\n-        _ = self.navigationController?.popViewController(animated: true)\n-      }", "originalCommit": "35ff6108612386ab37586d1b7970a17a50590f88", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgwMTkzOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2078#discussion_r525801939", "bodyText": "The condition was handled with the new API implementation.", "author": "tushar-boston", "createdAt": "2020-11-18T04:42:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQ2MjI5MQ=="}], "type": "inlineReview"}, {"oid": "f3a7662894a30db4bd574c1f75bf7c41059d3d8c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f3a7662894a30db4bd574c1f75bf7c41059d3d8c", "message": "Merge branch 'develop' into ios-auth-cleanup-patch", "committedDate": "2020-11-18T15:10:04Z", "type": "commit"}]}