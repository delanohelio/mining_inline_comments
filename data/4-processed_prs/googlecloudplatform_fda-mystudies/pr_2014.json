{"pr_number": 2014, "pr_title": "Fixed issue #1172 Potential XSS issues in JSP pages ", "pr_createdAt": "2020-11-13T11:00:28Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014", "timeline": [{"oid": "8eb6c708b853f3391be33a0e1f51ebb0d85cb9c1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8eb6c708b853f3391be33a0e1f51ebb0d85cb9c1", "message": "Fixed issue Potential XSS issues in JSP pages #1172\n\nFixed issue Potential XSS issues in JSP pages #1172", "committedDate": "2020-11-13T10:30:43Z", "type": "commit"}, {"oid": "74f2d192aa5bfdaca91ffb54bd67d5b475cd3024", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/74f2d192aa5bfdaca91ffb54bd67d5b475cd3024", "message": "fixed user details section\n\nfixed user details section", "committedDate": "2020-11-13T13:08:10Z", "type": "commit"}, {"oid": "2b0c714f62ebe42616f1202eb5abef4bd12ad31e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2b0c714f62ebe42616f1202eb5abef4bd12ad31e", "message": "Merge branch 'develop' into study-builder-xxs-security-issue-1172", "committedDate": "2020-11-13T15:31:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjkxOTI2MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r522919261", "bodyText": "Please test this page in QA env. Please append the elements first and then set the text if it's not working. This comment applies to other pages as well.", "author": "dhanyak-btc", "createdAt": "2020-11-13T12:27:51Z", "path": "study-builder/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/addOrEditStudyNotification.jsp", "diffHunk": "@@ -463,10 +463,10 @@\n       dt.setHours(thisDate.getHours());\n       dt.setMinutes(thisDate.getMinutes());\n       $('.timepicker').parent().removeClass('has-error has-danger').find(\n-          '.help-block.with-errors').html('');\n+          '.help-block.with-errors').text('');\n       if (dt < serverDateTime()) {\n         $('.timepicker').parent().addClass('has-error has-danger').find(\n-            '.help-block.with-errors').html(\n+            '.help-block.with-errors').text(\n             '<ul class=\"list-unstyled\"><li>Please select a time that has not already passed for the current date.</li></ul>');", "originalCommit": "8eb6c708b853f3391be33a0e1f51ebb0d85cb9c1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzA0NDA4Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r523044083", "bodyText": "Tested, elements are reflecting.\nsimilar tag is available in loginPage.jsp:\n$('#email').parent().find(\".help-block\").text(\"<ul class='list-unstyled'><li>Please fill out this field</li></ul>\");", "author": "harisboston", "createdAt": "2020-11-13T16:00:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjkxOTI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzA4NDkyNQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r523084925", "bodyText": "Do you mind doing a view source and check to see if the javascript on the page matches your changes?\nThe whole idea for using .text is that it wraps everything side a text node and so your html tags should show up in text, and not executes inside the DOM.", "author": "zohrehj", "createdAt": "2020-11-13T17:03:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjkxOTI2MQ=="}], "type": "inlineReview"}, {"oid": "bb215c1bc2a545229ea2e6b9eb7dfaf730d5dafd", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bb215c1bc2a545229ea2e6b9eb7dfaf730d5dafd", "message": "Merge branch 'develop' into study-builder-xxs-security-issue-1172", "committedDate": "2020-11-13T16:40:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ3NDY5OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r523474699", "bodyText": "this does not look right, html tags should not be included in .text", "author": "zohrehj", "createdAt": "2020-11-14T23:14:04Z", "path": "study-builder/fdahpStudyDesigner/src/main/webapp/WEB-INF/templates/menu.jsp", "diffHunk": "@@ -20,7 +20,7 @@\n       success: function test(data) {\n         var count = data.count;\n         if (parseInt(count) > 0) {\n-          $(\"#notifSpanId\").html(\n+          $(\"#notifSpanId\").text(", "originalCommit": "bb215c1bc2a545229ea2e6b9eb7dfaf730d5dafd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc5OTcwMg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r523799702", "bodyText": "fixed review comment", "author": "harisboston", "createdAt": "2020-11-15T19:10:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ3NDY5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ3NDc2Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r523474766", "bodyText": "same here. You need to append the necessary tags first and then update the text inside the li element", "author": "zohrehj", "createdAt": "2020-11-14T23:14:43Z", "path": "study-builder/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/loginPage.jsp", "diffHunk": "@@ -293,14 +293,14 @@\n             isEmail = regEX.test(emailAdd);\n             if (emailAdd == '') {\n               if (isIE || isEdge) {\n-                $('#email').parent().find(\".help-block\").html(\n+                $('#email').parent().find(\".help-block\").text(\n                     \"<ul class='list-unstyled'><li>This is a required field</li></ul>\");", "originalCommit": "bb215c1bc2a545229ea2e6b9eb7dfaf730d5dafd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzc5OTcwOA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r523799708", "bodyText": "fixed review comment", "author": "harisboston", "createdAt": "2020-11-15T19:10:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ3NDc2Ng=="}], "type": "inlineReview"}, {"oid": "bf3e824533d9de43a708d387f95b972b4aa48c92", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bf3e824533d9de43a708d387f95b972b4aa48c92", "message": "Fixed issue #1172 Potential XSS issues in JSP pages\n\nFixed issue #1172 Potential XSS issues in JSP pages", "committedDate": "2020-11-15T05:33:04Z", "type": "commit"}, {"oid": "d8279d81dd5370526ad3d19f6a4b91f14218e473", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d8279d81dd5370526ad3d19f6a4b91f14218e473", "message": "Fixed review comment Potential XSS issues in JSP pages #2014\n\nFixed review comment Potential XSS issues in JSP pages #2014", "committedDate": "2020-11-15T18:46:51Z", "type": "commit"}, {"oid": "a99c5657fd873eae4fe947b227f038969cd27cec", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a99c5657fd873eae4fe947b227f038969cd27cec", "message": "updated menu.jsp\n\nupdated menu.jsp", "committedDate": "2020-11-15T19:06:54Z", "type": "commit"}, {"oid": "a96ccf7547170383080859897b3304d67f476bdb", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a96ccf7547170383080859897b3304d67f476bdb", "message": "Merge branch 'develop' into study-builder-xxs-security-issue-1172", "committedDate": "2020-11-15T19:10:56Z", "type": "commit"}, {"oid": "c0b88c0d9faeb363b4be57e67aaef9b7d5347444", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c0b88c0d9faeb363b4be57e67aaef9b7d5347444", "message": "Merge branch 'develop' into study-builder-xxs-security-issue-1172", "committedDate": "2020-11-16T03:33:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMzOTQyNw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r524339427", "bodyText": "font html tag seems to be broken, please fix", "author": "zohrehj", "createdAt": "2020-11-16T15:10:59Z", "path": "study-builder/fdahpStudyDesigner/src/main/webapp/WEB-INF/templates/menu.jsp", "diffHunk": "@@ -20,8 +20,8 @@\n       success: function test(data) {\n         var count = data.count;\n         if (parseInt(count) > 0) {\n-          $(\"#notifSpanId\").html(\n-              'NOTIFICATIONS <B><font color=\"#42963b\">(' + data.count + ')</font></B>');\n+          $(\"#notifSpanId\").append(\"NOTIFICATIONS \").append($(\"<B> </B>\").append(\n+                  $(\"<font </font>\").attr(\"color\",\"#42963b\").text(\"(\" + data.count + \")\")));", "originalCommit": "c0b88c0d9faeb363b4be57e67aaef9b7d5347444", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDkzNjQyMA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r524936420", "bodyText": "fixed review comment", "author": "harisboston", "createdAt": "2020-11-17T07:35:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMzOTQyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM0NDI3MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r524344271", "bodyText": "please add json value with .text", "author": "zohrehj", "createdAt": "2020-11-16T15:17:39Z", "path": "study-builder/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/questionStep.jsp", "diffHunk": "@@ -4557,15 +4557,15 @@\n                 var message = data.message;\n                 var formulaResponseJsonObject = data.formulaResponseJsonObject;\n                 if (message == \"SUCCESS\") {\n-                  $('#lhsValueId').html(\"<b>\" + formulaResponseJsonObject.lhsData + \"</b>\");\n-                  $('#rhsValueId').html(\"<b>\" + formulaResponseJsonObject.rhsData + \"</b>\");\n+                  $('#lhsValueId').append(\"<b>\" + formulaResponseJsonObject.lhsData + \"</b>\");", "originalCommit": "c0b88c0d9faeb363b4be57e67aaef9b7d5347444", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDkzNjQ1NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r524936454", "bodyText": "fixed review comment", "author": "harisboston", "createdAt": "2020-11-17T07:35:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDM0NDI3MQ=="}], "type": "inlineReview"}, {"oid": "9609116c8e5e87f34abed87af5b4859b539ffaae", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9609116c8e5e87f34abed87af5b4859b539ffaae", "message": "Fixed review comment of issue  Fixed issue #1172 Potential XSS issues in JSP pages #2014\n\nFixed review comment of issue  Fixed issue #1172 Potential XSS issues in JSP pages #2014", "committedDate": "2020-11-17T07:15:20Z", "type": "commit"}, {"oid": "01030227b6eaf139dce0965ee1fda40af0315da6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/01030227b6eaf139dce0965ee1fda40af0315da6", "message": "Merge branch 'develop' into study-builder-xxs-security-issue-1172", "committedDate": "2020-11-17T13:50:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTIwOTM5Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r525209393", "bodyText": ".html(\"\") is the equivalent of .empty()", "author": "zohrehj", "createdAt": "2020-11-17T14:45:29Z", "path": "study-builder/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/questionPage.jsp", "diffHunk": "@@ -2465,7 +2465,7 @@\n         $('.useAnchorDateName').hide();\n         $(\"#anchorTextId\").attr('required', false);\n         $(\"#anchorTextId\").parent().removeClass(\"has-danger\").removeClass(\"has-error\");\n-        $(\"#anchorTextId\").parent().find(\".help-block\").html(\"\");\n+        $(\"#anchorTextId\").parent().find(\".help-block\").text(\"\");", "originalCommit": "01030227b6eaf139dce0965ee1fda40af0315da6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYxNzg1MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r527617850", "bodyText": "fixed review comment", "author": "harisboston", "createdAt": "2020-11-20T11:05:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTIwOTM5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTIxMDU1NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r525210555", "bodyText": "this is again setting html tags within text; please review your PR and fix them all before assigning back.", "author": "zohrehj", "createdAt": "2020-11-17T14:46:53Z", "path": "study-builder/fdahpStudyDesigner/src/main/webapp/WEB-INF/view/study/questionnaire.jsp", "diffHunk": "@@ -4171,16 +4172,16 @@\n             $(this).data(\"DateTimePicker\").date(serverDateTime());\n             dt = dateRef.val();\n             $(this).parent().addClass('has-error has-danger');\n-            $(this).parent().find(\".help-block\").html(\n+            $(this).parent().find(\".help-block\").text(\n                 '<ul class=\"list-unstyled\"><li>Date reset to current date. </li></ul>');", "originalCommit": "01030227b6eaf139dce0965ee1fda40af0315da6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYxNzkxNg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/2014#discussion_r527617916", "bodyText": "fixed review comment", "author": "harisboston", "createdAt": "2020-11-20T11:05:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTIxMDU1NQ=="}], "type": "inlineReview"}, {"oid": "386fe30d79fbd0e7e6410fca658a2c338029efea", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/386fe30d79fbd0e7e6410fca658a2c338029efea", "message": "Fixed pr comments of Potential XSS issues in JSP pages #1172\n\nFixed pr comments of Potential XSS issues in JSP pages #1172", "committedDate": "2020-11-19T17:14:26Z", "type": "commit"}, {"oid": "bb6d1f6b66e6025152e74769036a5c681fc16b59", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bb6d1f6b66e6025152e74769036a5c681fc16b59", "message": "Merge branch 'develop' into study-builder-xxs-security-issue-1172", "committedDate": "2020-11-20T04:31:32Z", "type": "commit"}, {"oid": "a7bf9857342da8c4b187f0f85ddb4b76bb6fcbb7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a7bf9857342da8c4b187f0f85ddb4b76bb6fcbb7", "message": "Fixed build issue\n\nFixed build issue", "committedDate": "2020-11-20T06:01:02Z", "type": "commit"}, {"oid": "e5c8f5c0444fb18629ac1dc8501a170d69f83405", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e5c8f5c0444fb18629ac1dc8501a170d69f83405", "message": "Merge branch 'develop' into study-builder-xxs-security-issue-1172", "committedDate": "2020-11-20T06:07:57Z", "type": "commit"}, {"oid": "4ced05c27a37846a465b180ad0e9c2c100bdb394", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4ced05c27a37846a465b180ad0e9c2c100bdb394", "message": "Fixed issue xss - review and sanitize .after calls #2097\n\nFixed issue xss - review and sanitize .after calls #2097", "committedDate": "2020-11-20T12:03:29Z", "type": "commit"}, {"oid": "1320fac3b210651ff8aba0c50396defc4a4d826a", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1320fac3b210651ff8aba0c50396defc4a4d826a", "message": "Merge branch 'develop' into study-builder-xxs-security-issue-1172", "committedDate": "2020-11-22T12:33:46Z", "type": "commit"}]}