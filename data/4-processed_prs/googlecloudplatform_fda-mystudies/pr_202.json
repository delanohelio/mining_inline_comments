{"pr_number": 202, "pr_title": "Merge terraform into early access", "pr_createdAt": "2020-04-21T20:08:41Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202", "timeline": [{"oid": "d818a2e9dbe4e03aef10ab0b7e8998e1c3321360", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d818a2e9dbe4e03aef10ab0b7e8998e1c3321360", "message": "Make region and zone mandatory and consistent. (#137)", "committedDate": "2020-04-14T16:31:11Z", "type": "commit"}, {"oid": "06503833409de852ef6cc56fe1c726609f6c040d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/06503833409de852ef6cc56fe1c726609f6c040d", "message": "Add random suffix to sql name to avoid name duplication.", "committedDate": "2020-04-14T17:24:11Z", "type": "commit"}, {"oid": "936efb1cf2b42979a18ed530a7b641cdf7b86f98", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/936efb1cf2b42979a18ed530a7b641cdf7b86f98", "message": "Merge branch 'terraform' into suffix", "committedDate": "2020-04-14T17:25:43Z", "type": "commit"}, {"oid": "51325e38d67b76a9803ddb5004905eda804540b7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/51325e38d67b76a9803ddb5004905eda804540b7", "message": "Simply rename the SQL instead.", "committedDate": "2020-04-14T17:46:28Z", "type": "commit"}, {"oid": "ed2b286b65050f9a3fd9628596b0e82cf0fa7f68", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ed2b286b65050f9a3fd9628596b0e82cf0fa7f68", "message": "Merge pull request #143 from xingao267/suffix\n\nRename the CloudSQL.", "committedDate": "2020-04-14T18:00:06Z", "type": "commit"}, {"oid": "9bc4cc25e311d7e6022857c151258b574af9deb4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9bc4cc25e311d7e6022857c151258b574af9deb4", "message": "Add missing serviceAccount: prefix. (#146)", "committedDate": "2020-04-14T18:30:30Z", "type": "commit"}, {"oid": "fe8a58fd37c77895cdbfd84fdee11877a4e3691e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fe8a58fd37c77895cdbfd84fdee11877a4e3691e", "message": "Add support for secrets (#144)\n\n* add support for secrets\r\n\r\n* add layout\r\n\r\n* use for_each and add remote state\r\n\r\n* fmt", "committedDate": "2020-04-14T18:48:48Z", "type": "commit"}, {"oid": "950d7a2a54d074013a94ba433042af8761bde106", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/950d7a2a54d074013a94ba433042af8761bde106", "message": "Add README for CICD. (#139)\n\n* Add README for CICD.\r\n\r\n* Pull cicd to a separate deployment.", "committedDate": "2020-04-14T19:42:39Z", "type": "commit"}, {"oid": "0549d55c0da0d651a74f1023bddc1e8801c00929", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0549d55c0da0d651a74f1023bddc1e8801c00929", "message": "include children for audit exports (#147)", "committedDate": "2020-04-14T19:54:03Z", "type": "commit"}, {"oid": "bf6895ddfb62fd3cef4aa7bc1b35dd9ceef05887", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bf6895ddfb62fd3cef4aa7bc1b35dd9ceef05887", "message": "Add bastion host. (#136)\n\n* Add bastion host.\r\n\r\n* Add NAT.\r\n\r\n* Add VM startup script and restrict NAT source IP range.", "committedDate": "2020-04-15T00:14:39Z", "type": "commit"}, {"oid": "fe12751dcc8fc552f3749cba3df4d58047c6d7f4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fe12751dcc8fc552f3749cba3df4d58047c6d7f4", "message": "Enable IAP api in network project. (#148)", "committedDate": "2020-04-15T00:28:26Z", "type": "commit"}, {"oid": "30b815abbc1c93ae19083a224196dabea719a8dc", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/30b815abbc1c93ae19083a224196dabea719a8dc", "message": "add bastion service account output, fix apps mock outputs (#153)", "committedDate": "2020-04-15T20:33:21Z", "type": "commit"}, {"oid": "ce8f72780ad4bd406cb238f9c463e8fd9048d332", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ce8f72780ad4bd406cb238f9c463e8fd9048d332", "message": "add bastion service account as sql client (#151)\n\n* add bastion service account as sql client\r\n\r\n* fix var\r\n\r\n* update sql connectionon instructions\r\n\r\n* rename sql_clients to sql_client_service_accounts\r\n\r\n* fix gke apps terragrunt\r\n\r\n* fmt", "committedDate": "2020-04-15T20:48:21Z", "type": "commit"}, {"oid": "d018ed626f4cf288e267ebf0ace32fd0fa4ecff7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d018ed626f4cf288e267ebf0ace32fd0fa4ecff7", "message": "fix startup script for cloud sql proxy setup (#155)", "committedDate": "2020-04-15T21:59:05Z", "type": "commit"}, {"oid": "bbad118baf535505f58e4caa8fa1b5b3a79d6f06", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bbad118baf535505f58e4caa8fa1b5b3a79d6f06", "message": "Add new secrets in Secret Manager for later use in Kubernetes (#152)\n\nThe Kubernetes secrets need to refer to existing Secret Manager secrets, so\r\ndo it in 2 steps.\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-16T13:59:38Z", "type": "commit"}, {"oid": "70781b7c5f13f409199768c94ed6d72d481ff9a8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/70781b7c5f13f409199768c94ed6d72d481ff9a8", "message": "Add documentations for org level resources. (#160)\n\n* Add documentations for org level resources.\r\n\r\n* Address comments.", "committedDate": "2020-04-16T20:21:47Z", "type": "commit"}, {"oid": "52bb97735378b5a3b82c5e0ad614ac2c51f4fba8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/52bb97735378b5a3b82c5e0ad614ac2c51f4fba8", "message": "Add license. (#163)", "committedDate": "2020-04-16T20:49:49Z", "type": "commit"}, {"oid": "96b1bc27ff8217d3b3249d75292bd460974061a8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/96b1bc27ff8217d3b3249d75292bd460974061a8", "message": "Move Cloud Build Triggers for GKE containers to app project. (#159)\n\n* Move Cloud Build Triggers for GKE containers to app project.\r\n\r\n* Enable cloudbuild api.\r\n\r\n* Remove duplicate backend block", "committedDate": "2020-04-16T21:08:32Z", "type": "commit"}, {"oid": "473afa23e4e2ade317b3621bbe96d04709ba1297", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/473afa23e4e2ade317b3621bbe96d04709ba1297", "message": "Add more documentation. (#164)", "committedDate": "2020-04-16T21:48:32Z", "type": "commit"}, {"oid": "1bcc63efa2151c48fd9d8cb3184a682e532295e5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1bcc63efa2151c48fd9d8cb3184a682e532295e5", "message": "Add service accounts for each GKE app (#168)\n\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-17T14:42:58Z", "type": "commit"}, {"oid": "188b6531831d4edd4a58925a0c8cf2722e984e92", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/188b6531831d4edd4a58925a0c8cf2722e984e92", "message": "Add multiple DB credentials and roles/cloudsql.client for the GKE SAs (#161)\n\n* Add multiple GKE service accounts and DB creds\r\n\r\nIn support of using different credentials for each GKE app.\r\n\r\n* Address comments\r\n\r\n* Move GKE SAs out, they're a separate PR now\r\n\r\nPR: https://github.com/GoogleCloudPlatform/fda-mystudies/pull/168\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-17T14:52:42Z", "type": "commit"}, {"oid": "a70fd7b24ce54f3f96442cddb4425ed69a740bdc", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a70fd7b24ce54f3f96442cddb4425ed69a740bdc", "message": "Fix projects for DB users secrets (#169)\n\n* Fix projects for DB users secrets\r\n\r\nThe users go in the data project, the secrets go in the secrets project.\r\n\r\n* Remove project from secret version\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-17T15:14:45Z", "type": "commit"}, {"oid": "ec0ffa46d32a19dd15cb8f618423d285de84791c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ec0ffa46d32a19dd15cb8f618423d285de84791c", "message": "Update k8s deployments and add cluster-wide configs (#157)\n\n* Update k8s deployments and add cluster-wide configs\r\n\r\nChanges:\r\n* Update all services to use NodePort and Container-Native Load Balancing.\r\n* Update all deployments to refer to services by name, not IP address.\r\n* Move the ingress and cert configs to a separate folder \"kubernetes/\".\r\n* Add Pod Security Policies for the cluster and Istio.\r\n* Add helper script for applying the k8s configs.\r\n* Add helper script for moving Docker images from the main registry.\r\n\r\n* Remove the response-server-ws-gcloud-key user-registration-server-ws-gcloud-key secrets\r\n\r\nThese aren't needed, as these apps can use the GKE credentials.\r\nSee https://cloud.google.com/docs/authentication/production\r\n\r\n* Revert \"Remove the response-server-ws-gcloud-key user-registration-server-ws-gcloud-key secrets\"\r\n\r\nThis reverts commit 6c38d0f0fba45d0f0510893d928c78e88a4fea4a.\r\n\r\n* Make apps use separate SAs, gcloud keys, and DB creds\r\n\r\n* Include changes to ingress.yaml from early-access\r\n\r\n* Add usage and args to the push_images.sh script\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-17T20:05:13Z", "type": "commit"}, {"oid": "c57a34690d4ca13166480738275c5f18f0f62961", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c57a34690d4ca13166480738275c5f18f0f62961", "message": "Update TF Engine config to date. (#177)\n\nThe main purpose is for demoing of TF Engine, not to\r\nre-generate the rest of Terraform configs.", "committedDate": "2020-04-17T21:45:08Z", "type": "commit"}, {"oid": "becc5835959d9c50b6f4732061b504c11f25ac41", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/becc5835959d9c50b6f4732061b504c11f25ac41", "message": "Minor fix in engine template and configs. (#178)", "committedDate": "2020-04-20T15:43:04Z", "type": "commit"}, {"oid": "493ed59dc009f0da56554a929b49a74689b4691d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/493ed59dc009f0da56554a929b49a74689b4691d", "message": "Add TODO to replace kubernetes_version with release_channel (#182)\n\n* Add TODO to replace kubernetes_version with release_channel\r\n\r\nThis depends on https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/pull/487 being merged.\r\n\r\n* Remove unused field\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-20T16:29:16Z", "type": "commit"}, {"oid": "91cd5176e853486a19e7984bd2084f0116336391", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/91cd5176e853486a19e7984bd2084f0116336391", "message": "Add Kubernetes Secrets (#149)\n\n* Add Kubernetes Secrets\r\n\r\nInstall Kubernetes Secrets via terraform, by both using Secret Manager and\r\nservice account keys.\r\n\r\n* Move the secrets to their own deployment\r\n\r\nThis deployment depends on the main GKE cluster deployment via Terragrunt.\r\n\r\n* Format the kubernetes/terragrunt.hcl file\r\n\r\n* Fix for_each in secrets.tf\r\n\r\n* Remove Secret Manager changes\r\n\r\nDoing it separately in https://github.com/GoogleCloudPlatform/fda-mystudies/pull/152\r\n\r\n* Rename to \"my_studies_cluster\" in the new code\r\n\r\n* Fix secret names\r\n\r\n* Remove extra line\r\n\r\n* Output the password in the data deployment\r\n\r\n* Refortmat terragrunt.hcl files\r\n\r\n* Remove the response-server-ws-gcloud-key user-registration-server-ws-gcloud-key secrets\r\n\r\nThese aren't needed, as these apps can use the GKE credentials.\r\nSee https://cloud.google.com/docs/authentication/production\r\n\r\n* Revert \"Remove the response-server-ws-gcloud-key user-registration-server-ws-gcloud-key secrets\"\r\n\r\nThis reverts commit 87f786a63589537fb3e7086e50771c9d382dbcf3.\r\n\r\n* Create separate DB users and SAs for each app\r\n\r\n* Add project id to apps service accounts\r\n\r\n* Revert changes to apps/ and data/ deployments\r\n\r\nMoved to a separate PR: https://github.com/GoogleCloudPlatform/fda-mystudies/pull/161\r\n\r\n* Remove file from another PR\r\n\r\n* Retrieve the SQL user password from Secret Manager\r\n\r\n* terragrunt hclfmt\r\n\r\n* Remove unused Kubernetes secrets\r\n\r\nSome secrets are no longer used after merging https://github.com/GoogleCloudPlatform/fda-mystudies/pull/157\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-20T16:44:51Z", "type": "commit"}, {"oid": "161b9dfd7ea33af28e4041453a59d885512ef969", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/161b9dfd7ea33af28e4041453a59d885512ef969", "message": "Update kubeapply (#180)\n\n* Add pointer to Kubernetes setup instructions\r\n\r\n* Update kubeapply.sh to do deployments and not fetch the SA\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-20T17:21:32Z", "type": "commit"}, {"oid": "ac668ee19386dabffcc00aa0259e0888d6122c1b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ac668ee19386dabffcc00aa0259e0888d6122c1b", "message": "Use GKE token and fully-qualified SAs in secrets (#183)\n\nFor the SA, from https://www.terraform.io/docs/providers/google/r/google_service_account_key.html:\r\n\"This can be a string in the format {ACCOUNT} or projects/{PROJECT_ID}/serviceAccounts/{ACCOUNT}, where {ACCOUNT} is the email address or unique id of the service account.\"\r\n\r\nSince it's using a unique_id, it should use the full name.\r\n\r\nFor the token, I got the suggestion from here: https://github.com/terraform-providers/terraform-provider-kubernetes/issues/382#issuecomment-540569608\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-20T17:45:56Z", "type": "commit"}, {"oid": "d474b813a328ee2b545cfc0f5cef301f68cc8821", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d474b813a328ee2b545cfc0f5cef301f68cc8821", "message": "Fix SQL instance connections in k8s deployments (#185)\n\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-20T19:05:15Z", "type": "commit"}, {"oid": "a72bfffbb973d69f44a632bc3ca8a7d60785924c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a72bfffbb973d69f44a632bc3ca8a7d60785924c", "message": "Update Terraform configs with changes in engine. (#184)\n\n* Update Terraform configs with changes in engine.", "committedDate": "2020-04-20T19:30:37Z", "type": "commit"}, {"oid": "08129e9a716709229374c2b1ccd1b15d88b8c411", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/08129e9a716709229374c2b1ccd1b15d88b8c411", "message": "Generate configs using OSS TF Engine. (#187)", "committedDate": "2020-04-20T20:37:44Z", "type": "commit"}, {"oid": "18b23d2ec0144d07c9e737d8f89702f845f03c30", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/18b23d2ec0144d07c9e737d8f89702f845f03c30", "message": "Improve CICD permissions (#189)\n\n* remove project owners\r\n\r\n* secret manager accessor\r\n\r\n* fix perms\r\n\r\n* rm viewer perm\r\n\r\n* fmt\r\n\r\n* add sm viewer\r\n\r\n* add logging perms\r\n\r\n* rm logging viewer", "committedDate": "2020-04-20T23:12:18Z", "type": "commit"}, {"oid": "67447fbc272798c94ba3c608927da10ea9efa099", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/67447fbc272798c94ba3c608927da10ea9efa099", "message": "Document the GKE cluster setup steps (#181)\n\n* Add pointer to Kubernetes setup instructions\r\n\r\n* Document the GKE cluster setup steps\r\n\r\n* Address comments\r\n\r\n* Change \"db-name\" to \"instance-name\"\r\n\r\n* Move procedures before version_info import\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-21T14:20:47Z", "type": "commit"}, {"oid": "1f889dc454307e7b42827f5c697d8c56f052be6d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1f889dc454307e7b42827f5c697d8c56f052be6d", "message": "Fixes. (#194)", "committedDate": "2020-04-21T16:12:59Z", "type": "commit"}, {"oid": "fd0d095e08dacd33ddd9fe77b9228ed80a8d352b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fd0d095e08dacd33ddd9fe77b9228ed80a8d352b", "message": "More fixes. (#195)", "committedDate": "2020-04-21T17:08:36Z", "type": "commit"}, {"oid": "b53fe93f9df2747d175c142fc99b58b8fff704d2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b53fe93f9df2747d175c142fc99b58b8fff704d2", "message": "Use the right DB names for the apps (#193)\n\n* Use the right DB names for the apps\r\n\r\nThese values are supposed to be the database names used by each app, not the name of the Cloud SQL instance name.\r\n\r\n* Fix variable name apps_db_names\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-21T17:26:12Z", "type": "commit"}, {"oid": "c6a402295205957eed842dfa9b2872a71079e762", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c6a402295205957eed842dfa9b2872a71079e762", "message": "Add super experimental rename templates script. (#196)", "committedDate": "2020-04-21T17:34:05Z", "type": "commit"}, {"oid": "f02e17ec0eff55efbf344e10a48e2a0990ca294e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f02e17ec0eff55efbf344e10a48e2a0990ca294e", "message": "Fix user-registration-server-np port (#197)\n\nCurrently 60000, but the Ingress expects it to be 50000, like with the other services.\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-21T18:05:06Z", "type": "commit"}, {"oid": "690cc0f48ee796ebad53070ea6fed9b766e685ac", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/690cc0f48ee796ebad53070ea6fed9b766e685ac", "message": "Comment out customer triggers initially. (#199)\n\nAdd more permissions.", "committedDate": "2020-04-21T19:37:13Z", "type": "commit"}, {"oid": "4c24cd88581265903b0f594cc13b039a8766487c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4c24cd88581265903b0f594cc13b039a8766487c", "message": "Merge branch 'terraform' into merge-terraform-into-early-access", "committedDate": "2020-04-21T20:06:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ2MjkyOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412462929", "bodyText": "this may not be needed anymore.", "author": "zohrehj", "createdAt": "2020-04-21T20:18:36Z", "path": ".gitignore", "diffHunk": "@@ -0,0 +1,5 @@\n+**/.terraform\n+*.tfstate\n+*.tfstate.*\n+sql_credentials.json", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA1MTcxOA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413051718", "bodyText": "Yes, you're right. These files aren't manually created anymore but managed by Terraform.", "author": "MartinPetkov", "createdAt": "2020-04-22T14:51:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ2MjkyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ1ODg4NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413458885", "bodyText": "The lines for .json files have been removed.", "author": "MartinPetkov", "createdAt": "2020-04-23T02:16:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ2MjkyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3Njk1MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412476950", "bodyText": "I think we should use test values here and not the actual vars.", "author": "zohrehj", "createdAt": "2020-04-21T20:41:41Z", "path": "Terraform/bootstrap/terraform.tfvars", "diffHunk": "@@ -0,0 +1,23 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+devops_project_id = \"heroes-hat-dev-devops\"\n+org_id            = \"707577601068\"\n+billing_account   = \"01EA90-3519E1-89CB1F\"\n+state_bucket      = \"heroes-hat-dev-terraform-state-08679\"\n+storage_location  = \"us-central1\"\n+org_admin         = \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+devops_owners = [\n+  \"group:rocketturtle-gcp-admin@rocketturtle.net\",\n+]", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3NzQwMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412477401", "bodyText": "and add a section in terraform readme to update these values to the proper GCP project vars.", "author": "zohrehj", "createdAt": "2020-04-21T20:42:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3Njk1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAxOTY1MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413019650", "bodyText": "I believe @xingao267 created a script recently to update these. But otherwise, .tfvars is where you're supposed to have the actual values for your deployment.", "author": "MartinPetkov", "createdAt": "2020-04-22T14:13:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3Njk1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzExMTQxOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413111419", "bodyText": "Done.\n#205", "author": "xingao267", "createdAt": "2020-04-22T16:02:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3Njk1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3OTI2Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412479263", "bodyText": "same here, is there a way to get these values from configs?\nIf not, lets add instructions to update them and remove the actual values.", "author": "zohrehj", "createdAt": "2020-04-21T20:45:38Z", "path": "Terraform/cicd/terraform.tfvars", "diffHunk": "@@ -0,0 +1,23 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+org_id                        = \"707577601068\"\n+devops_project_id             = \"heroes-hat-dev-devops\"\n+state_bucket                  = \"heroes-hat-dev-terraform-state-08679\"\n+repo_owner                    = \"GoogleCloudPlatform\"\n+repo_name                     = \"fda-mystudies\"\n+branch_regex                  = \"terraform\"\n+continuous_deployment_enabled = true\n+trigger_enabled               = true\n+terraform_root                = \"Terraform\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ1ODY2OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413458668", "bodyText": "These can be replaced using rename.sh, and instructions were added in #205", "author": "MartinPetkov", "createdAt": "2020-04-23T02:16:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3OTI2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MDI4MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412480280", "bodyText": "terraform readme mentions generic project ID and domain, but these values are hardcoded here, it would be great if we could remove these values and make it easier to update to actual values for future deployments.", "author": "zohrehj", "createdAt": "2020-04-21T20:47:21Z", "path": "Terraform/engine.tmpl.yaml", "diffHunk": "@@ -0,0 +1,112 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# Terraform Engine (https://github.com/GoogleCloudPlatform/healthcare/tree/master/deploy/engine) config to generate baseline.\n+\n+{{$BASE := \"../recipes\"}}\n+\n+data:\n+  ORG_ID: \"707577601068\"\n+  BILLING_ACCOUNT: \"01EA90-3519E1-89CB1F\"\n+  STORAGE_LOCATION: \"us-central1\"\n+\n+templates:\n+- name: \"foundation\"\n+  recipe_path: \"{{$BASE}}/org/foundation.yaml\"\n+  data:\n+    DEVOPS:\n+      PROJECT_ID: \"heroes-hat-dev-devops\"\n+      STATE_BUCKET: \"heroes-hat-dev-terraform-state-08679\"\n+      ENABLE_BOOTSTRAP_GCS_BACKEND: true\n+      ORG_ADMIN: \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+      PROJECT_OWNERS:\n+      - \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+    AUDIT:\n+      PROJECT_ID: \"heroes-hat-dev-audit\"\n+      DATASET_NAME: \"1yr_org_audit_logs\"\n+      BUCKET_NAME: \"7yr-org-audit-logs-08679\" # suffix is sha256(\"heroes-hat-dev\")[:5]\n+      AUDITORS: \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+      PROJECT_OWNERS:\n+      - \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+    ORG_POLICIES:\n+      ALLOWED_SHARED_VPC_HOST_PROJECTS:\n+      - \"projects/heroes-hat-dev-networks\"\n+      # ALLOWED_POLICY_MEMBER_DOMAINS:\n+      # - Add G Suite Customer IDs for the domains\n+    CICD:\n+      PROJECT_ID: \"heroes-hat-dev-devops\"\n+      STATE_BUCKET: \"heroes-hat-dev-terraform-state-08679\"\n+      REPO_OWNER: \"GoogleCloudPlatform\"\n+      REPO_NAME: \"fda-mystudies\"\n+      BRANCH_REGEX: \"terraform\"\n+      CONTINUOUS_DEPLOYMENT_ENABLED: true\n+      TRIGGER_ENABLED: true\n+      TERRAFORM_ROOT: \"Terraform\"\n+\n+# Folder\n+- name: \"folder-heroes-hat\"\n+  recipe_path: \"{{$BASE}}/org/folder.yaml\"\n+  output_ref: \"foundation.org_dir\"\n+  data:\n+    DISPLAY_NAME: \"fda-my-studies\"\n+\n+# Projects\n+- name: \"project-networks\"\n+  recipe_path: \"{{$BASE}}/folder/project.yaml\"\n+  output_ref: \"folder-heroes-hat.dir\"\n+  data:\n+    PROJECT_ID: \"heroes-hat-dev-networks\"\n+    PROJECT_OWNERS:\n+    - \"group:rocketturtle-gcp-admin@rocketturtle.net\"\n+    APIS:\n+    - \"compute.googleapis.com\"\n+    - \"container.googleapis.com\"\n+    - \"iap.googleapis.com\"\n+    - \"servicenetworking.googleapis.com\"\n+    - \"sqladmin.googleapis.com\"\n+\n+- name: \"project-apps\"\n+  recipe_path: \"{{$BASE}}/folder/project.yaml\"\n+  output_ref: \"folder-heroes-hat.dir\"\n+  data:\n+    PROJECT_ID: \"heroes-hat-dev-apps\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAxODk3MQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413018971", "bodyText": "@umairidris can comment more, but I believe this file is where you are supposed to put all the specific values. This file is only used by the Terraform Engine to generate Terraform configs.", "author": "MartinPetkov", "createdAt": "2020-04-22T14:12:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MDI4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412482163", "bodyText": "would need to be changed for new deployments.", "author": "zohrehj", "createdAt": "2020-04-21T20:50:35Z", "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/main.tf", "diffHunk": "@@ -0,0 +1,66 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+terraform {\n+  backend \"gcs\" {}\n+}\n+\n+# Network values are defined the same way in the network component.\n+\n+# From\n+# https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/tree/master/modules/safer-cluster-update-variant\n+module \"heroes_hat_cluster\" {\n+  source = \"terraform-google-modules/kubernetes-engine/google//modules/safer-cluster\"\n+\n+  # Required\n+  name = \"heroes-hat-cluster\"\n+  # TODO: Set release_channel to \"regular\" when https://github.com/terraform-google-modules/terraform-google-kubernetes-engine/pull/487 is merged.\n+  project_id             = var.project_id\n+  region                 = var.gke_region\n+  regional               = true\n+  network_project_id     = var.network_project_id\n+  network                = var.network\n+  subnetwork             = var.subnetwork\n+  ip_range_pods          = \"heroes-hat-cluster-ip-range-pods\"\n+  ip_range_services      = \"heroes-hat-cluster-ip-range-svc\"\n+  master_ipv4_cidr_block = \"192.168.0.0/28\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMDQ0Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413020443", "bodyText": "Do you mean the CIDR block, or the IP range names (\"heroes-hat-...\")?", "author": "MartinPetkov", "createdAt": "2020-04-22T14:14:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE0NzE0Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413147147", "bodyText": "IP range value.\nJust pointing out all the values that need to be updated for the final deployment. I am expecting these will be updated using the final script as well.", "author": "zohrehj", "createdAt": "2020-04-22T16:48:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE2Njk1OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413166959", "bodyText": "Sorry, so you mean it shouldn't be called \"heroes-hat-...\"? Would it be better if it's called \"my-studies-...\"?", "author": "MartinPetkov", "createdAt": "2020-04-22T17:15:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ2ODAyNQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413468025", "bodyText": "We synced offline and I misunderstood, you were talking about the actual value \"192.168.0.0/28\".\nI don't believe this needs to be changed for the final deployment. Since this is private cluster, this IP is supposed to be a private IP, and there's nothing significant about it except that it doesn't overlap with other ranges in the subnet used for other purposes (i.e. pods and services).\nThis does remind me though, that (slight tangent) currently enable_private_endpoint = false, so the master endpoint is accessible to the whole world. In the final deployment, this should be replaced with master_authorized_networks and the IP range of UNC's network, here. An example of how to configure it is here:\nmaster_authorized_networks = [\n  {\n    cidr_block   = \"10.60.0.0/17\"\n    display_name = \"VPC\"\n  },\n]", "author": "MartinPetkov", "createdAt": "2020-04-23T02:45:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MjE2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Mjk1Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412482952", "bodyText": "do we need to limit this to a single branch? I think going forward we probably want to run it on all main branches, i.e. develop, master, etc", "author": "zohrehj", "createdAt": "2020-04-21T20:51:54Z", "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/apps/terraform.tfvars", "diffHunk": "@@ -0,0 +1,20 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+project_id                = \"heroes-hat-dev-apps\"\n+network_project_id        = \"heroes-hat-dev-networks\"\n+gke_region                = \"us-east1\"\n+repo_owner                = \"GoogleCloudPlatform\"\n+repo_name                 = \"fda-mystudies\"\n+cloudbuild_trigger_branch = \"early-access\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA1NTE1Mw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413055153", "bodyText": "@xingao267 would be better to comment, but you're right, this should actually be a branch regex. I believe it was addressed (in the related repo) here: GoogleCloudPlatform/healthcare@8715bdc#diff-c207bb71760f78c5c983c0752d4b3464", "author": "MartinPetkov", "createdAt": "2020-04-22T14:54:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Mjk1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ1NzUxMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413457511", "bodyText": "In this particular case, this variable isn't actually used it seems. Other uses have been changed to use a branch_regex in #184, as well as in the template for the future. Closing this comment.", "author": "MartinPetkov", "createdAt": "2020-04-23T02:12:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Mjk1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4MzA5OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412483098", "bodyText": "all other locations are us-east1", "author": "zohrehj", "createdAt": "2020-04-21T20:52:10Z", "path": "Terraform/org/audit/main.tf", "diffHunk": "@@ -0,0 +1,127 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# This folder contains Terraform resources related to audit, which includes:\n+# - Organization IAM Audit log configs (https://cloud.google.com/logging/docs/audit),\n+# - BigQuery log sink creation and configuration for short term log storage,\n+# - Cloud Storage log sink creation and configuration for long term log storage,\n+# - IAM permissions to grant log Auditors iam.securityReviewer role to view the logs.\n+\n+terraform {\n+  backend \"gcs\" {}\n+}\n+\n+# IAM Audit log configs to enable collection of all possible audit logs.\n+resource \"google_organization_iam_audit_config\" \"config\" {\n+  org_id  = var.org_id\n+  service = \"allServices\"\n+\n+  audit_log_config {\n+    log_type = \"DATA_READ\"\n+  }\n+  audit_log_config {\n+    log_type = \"DATA_WRITE\"\n+  }\n+  audit_log_config {\n+    log_type = \"ADMIN_READ\"\n+  }\n+}\n+\n+# BigQuery log sink.\n+module \"bigquery_log_export\" {\n+  source  = \"terraform-google-modules/log-export/google\"\n+  version = \"~> 4.0\"\n+\n+  log_sink_name        = \"bigquery-org-sink\"\n+  parent_resource_type = \"organization\"\n+  parent_resource_id   = var.org_id\n+  include_children     = true\n+  filter               = \"logName:\\\"logs/cloudaudit.googleapis.com\\\"\"\n+  destination_uri      = \"bigquery.googleapis.com/projects/${var.project_id}/datasets/${module.bigquery_destination.bigquery_dataset.dataset_id}\"\n+}\n+\n+# TODO: replace with terraform-google-modules/log-export/google//modules/bigquery\n+# once https://github.com/terraform-google-modules/terraform-google-log-export/pull/52 is merged.\n+module \"bigquery_destination\" {\n+  source  = \"terraform-google-modules/bigquery/google\"\n+  version = \"~> 4.0\"\n+\n+  dataset_id                  = var.dataset_name\n+  project_id                  = var.project_id\n+  location                    = \"us-east1\"\n+  default_table_expiration_ms = 365 * 8.64 * pow(10, 7) # 365 days\n+  access = [\n+    {\n+      role          = \"roles/bigquery.dataOwner\",\n+      special_group = \"projectOwners\"\n+    },\n+    {\n+      role           = \"roles/bigquery.dataViewer\",\n+      group_by_email = split(\":\", var.auditors)[1] // trim 'group:' prefix\n+    },\n+  ]\n+}\n+\n+resource \"google_project_iam_member\" \"bigquery_sink_member\" {\n+  project = module.bigquery_destination.bigquery_dataset.project\n+  role    = \"roles/bigquery.dataEditor\"\n+  member  = module.bigquery_log_export.writer_identity\n+}\n+\n+# Cloud Storage log sink.\n+module \"storage_log_export\" {\n+  source  = \"terraform-google-modules/log-export/google\"\n+  version = \"~> 4.0\"\n+\n+  log_sink_name        = \"storage-org-sink\"\n+  parent_resource_type = \"organization\"\n+  parent_resource_id   = var.org_id\n+  include_children     = true\n+  filter               = \"logName:\\\"logs/cloudaudit.googleapis.com\\\"\"\n+  destination_uri      = \"storage.googleapis.com/${module.storage_destination.bucket.name}\"\n+}\n+\n+# TODO: Replace with terraform-google-modules/log-export/google//modules/storage\n+# once https://github.com/terraform-google-modules/terraform-google-log-export/pull/52  is fixed.\n+module \"storage_destination\" {\n+  source  = \"terraform-google-modules/cloud-storage/google//modules/simple_bucket\"\n+  version = \"~> 1.4\"\n+\n+  name          = var.bucket_name\n+  project_id    = var.project_id\n+  location      = \"us-central1\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NDA0NA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412484044", "bodyText": "not sure if exposing the org_id and billing_account through git is a security risk or not.", "author": "zohrehj", "createdAt": "2020-04-21T20:53:51Z", "path": "Terraform/org/folder.fda-my-studies/project.heroes-hat-dev-apps/project/terraform.tfvars", "diffHunk": "@@ -0,0 +1,24 @@\n+# Copyright 2020 Google Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#      http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+name            = \"heroes-hat-dev-apps\"\n+org_id          = \"707577601068\"\n+billing_account = \"01EA90-3519E1-89CB1F\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE3OTQzMg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413179432", "bodyText": "I asked Umair and Xin, and we don't think it is. IAM should prevent people outside of the organization from using the billing account for their resources or viewing the org.", "author": "MartinPetkov", "createdAt": "2020-04-22T17:32:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NDA0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NTE2OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412485168", "bodyText": "should we keep the test string instead?", "author": "zohrehj", "createdAt": "2020-04-21T20:55:58Z", "path": "user-registration-server-ws/deployment.yaml", "diffHunk": "@@ -46,13 +46,13 @@ spec:\n             - name: AUTH_SERVER_URL\n               value: \"auth-server-np:50000\"\n             - name: RESPONSE_SERVER_URL\n-              value: \"response-serer-np:50000\"\n+              value: \"response-server-np:50000\"\n             - name: CLIENT_ID\n-              value: \"test_client_id_urs\"\n+              value: \"413422181706-c9r0uv1t2du10ttjf748mh6490g2ir5u.apps.googleusercontent.com\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMTcxOA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413021718", "bodyText": "This was supposed to be test string, yes.", "author": "MartinPetkov", "createdAt": "2020-04-22T14:16:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NTE2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzE0Nzc3Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413147772", "bodyText": "I see, please feel free to mark these as resolved as appropriate :-)", "author": "zohrehj", "createdAt": "2020-04-22T16:49:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4NTE2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Njc3MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412486770", "bodyText": "should this be 50000 ?", "author": "zohrehj", "createdAt": "2020-04-21T20:58:39Z", "path": "response-server-ws/deployment.yaml", "diffHunk": "@@ -58,9 +58,9 @@ spec:\n                   key: WCP_PASS\n                   name: response-server-credentials\n             - name: WCP_STUDY_METADATA_SERVER_URL\n-              value: \"34.74.32.124:50000\"\n+              value: \"study-meta-data-np:50000\"\n             - name: REGISTRATION_SERVER_URL\n-              value: \"35.196.79.108:60000\"\n+              value: \"user-registration-server-np:60000\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMzQyOQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413023429", "bodyText": "Yes.", "author": "MartinPetkov", "createdAt": "2020-04-22T14:18:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ4Njc3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NTc5NQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412655795", "bodyText": "I assume this is no longer needed with #197 merged?", "author": "kuoyuchi", "createdAt": "2020-04-22T04:13:26Z", "path": "WCP-WS/deployment.yaml", "diffHunk": "@@ -1,61 +1,67 @@\n # TODO: Rename this from study-meta-data to study-server.\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-meta-data \n-  labels: \n-    app: study-meta-data \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-meta-data \n-  template: \n-    metadata: \n-      labels: \n-        app: study-meta-data \n-    spec: \n-      containers: \n-        - name: study-meta-data \n-          image: gcr.io/heroes-hat-dev/study-meta-data:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-meta-data\n+  labels:\n+    app: study-meta-data\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-meta-data\n+  template:\n+    metadata:\n+      labels:\n+        app: study-meta-data\n+    spec:\n+      containers:\n+        - name: study-meta-data\n+          image: gcr.io/heroes-hat-dev-apps/study-meta-data:latest\n+          env:\n+            - name: DB_USER\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-meta-data-db-credentials\n+                  key: username\n+            - name: DB_PASS\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-meta-data-db-credentials\n+                  key: password\n+            - name: DB_NAME\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-meta-data-db-credentials\n+                  key: dbname\n             - name: RESPONSE_SERVER\n               value: \"response-server-np:50000\"\n             - name: USER_REGISTRATION_SERVER\n-              value: \"user-registration-server-np:50000\"\n+              value: \"user-registration-server-np:60000\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMzU2Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413023567", "bodyText": "Yes, this should be 50000", "author": "MartinPetkov", "createdAt": "2020-04-22T14:18:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NTc5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NTkwNA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412655904", "bodyText": "No longer needed with #197?", "author": "kuoyuchi", "createdAt": "2020-04-22T04:13:49Z", "path": "WCP/deployment.yaml", "diffHunk": "@@ -1,58 +1,60 @@\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-designer \n-  labels: \n-    app: study-designer \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-designer \n-  template: \n-    metadata: \n-      labels: \n-        app: study-designer \n-    spec: \n-      containers: \n-        - name: study-designer \n-          image: gcr.io/heroes-hat-dev/study-designer:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-designer-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-designer-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-designer-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-designer\n+  labels:\n+    app: study-designer\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-designer\n+  template:\n+    metadata:\n+      labels:\n+        app: study-designer\n+    spec:\n+      containers:\n+        - name: study-designer\n+          image: gcr.io/heroes-hat-dev-apps/study-designer:latest\n+          env:\n+            - name: DB_USER\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-designer-db-credentials\n+                  key: username\n+            - name: DB_PASS\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-designer-db-credentials\n+                  key: password\n+            - name: DB_NAME\n+              valueFrom:\n+                secretKeyRef:\n+                  name: study-designer-db-credentials\n+                  key: dbname\n             - name: REGISTRATION_SERVER_URL\n-              value: \"user-registration-server-np:50000\"\n+              value: \"user-registration-server-np:60000\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMzc2Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413023766", "bodyText": "Yes.", "author": "MartinPetkov", "createdAt": "2020-04-22T14:18:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NTkwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NjIzNA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412656234", "bodyText": "50000 with #197", "author": "kuoyuchi", "createdAt": "2020-04-22T04:14:50Z", "path": "response-server-ws/deployment.yaml", "diffHunk": "@@ -58,9 +58,9 @@ spec:\n                   key: WCP_PASS\n                   name: response-server-credentials\n             - name: WCP_STUDY_METADATA_SERVER_URL\n-              value: \"34.74.32.124:50000\"\n+              value: \"study-meta-data-np:50000\"\n             - name: REGISTRATION_SERVER_URL\n-              value: \"35.196.79.108:60000\"\n+              value: \"user-registration-server-np:60000\"", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMzYzMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413023631", "bodyText": "Yes.", "author": "MartinPetkov", "createdAt": "2020-04-22T14:18:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1NjIzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1Njg5MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412656890", "bodyText": "Is it possible to fork this as a separate tf-deployment.yaml file for now? Otherwise this will break the existing non-tf teamfood setup. Hopefully we can move teamfood to the tf deployment soon and this would be transient.", "author": "kuoyuchi", "createdAt": "2020-04-22T04:16:41Z", "path": "WCP-WS/deployment.yaml", "diffHunk": "@@ -1,61 +1,67 @@\n # TODO: Rename this from study-meta-data to study-server.\n-apiVersion: apps/v1 \n-kind: Deployment \n-metadata: \n-  name: study-meta-data \n-  labels: \n-    app: study-meta-data \n-spec: \n-  replicas: 1 \n-  selector: \n-    matchLabels: \n-      app: study-meta-data \n-  template: \n-    metadata: \n-      labels: \n-        app: study-meta-data \n-    spec: \n-      containers: \n-        - name: study-meta-data \n-          image: gcr.io/heroes-hat-dev/study-meta-data:latest\n-          env: \n-            - name: DB_USER \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: username \n-            - name: DB_PASS \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: password \n-            - name: DB_NAME \n-              valueFrom: \n-                secretKeyRef: \n-                  name: study-meta-data-db-credentials \n-                  key: dbname \n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: study-meta-data\n+  labels:\n+    app: study-meta-data\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      app: study-meta-data\n+  template:\n+    metadata:\n+      labels:\n+        app: study-meta-data\n+    spec:\n+      containers:\n+        - name: study-meta-data\n+          image: gcr.io/heroes-hat-dev-apps/study-meta-data:latest", "originalCommit": "4c24cd88581265903b0f594cc13b039a8766487c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1Njk2MA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r412656960", "bodyText": "Same for other deployment.yaml files.", "author": "kuoyuchi", "createdAt": "2020-04-22T04:16:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1Njg5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyNTM5OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202#discussion_r413025398", "bodyText": "Good idea.", "author": "MartinPetkov", "createdAt": "2020-04-22T14:20:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1Njg5MA=="}], "type": "inlineReview"}, {"oid": "79eeb1eaef29d439ee8d63183e6d559d055d78cd", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/79eeb1eaef29d439ee8d63183e6d559d055d78cd", "message": "Install the Istio sidecar (#203)\n\nThis is recommended by https://cloud.google.com/istio/docs/istio-on-gke/installing#installing_istio_on_gke_2\r\n\r\nThe annotations method comes from https://istio.io/docs/setup/additional-setup/sidecar-injection/#policy\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-22T15:37:30Z", "type": "commit"}, {"oid": "e707a60cbd0a821af5e0471295bfa5fa20a4d618", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e707a60cbd0a821af5e0471295bfa5fa20a4d618", "message": "Add cloud build viewer IAM member. (#201)", "committedDate": "2020-04-22T15:57:51Z", "type": "commit"}, {"oid": "d11351828fd5c882caf5bb958e5636d1cebcdfc6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d11351828fd5c882caf5bb958e5636d1cebcdfc6", "message": "Improve rename.sh and add to README.md. (#205)", "committedDate": "2020-04-22T16:02:28Z", "type": "commit"}, {"oid": "7d322a9ddd08df64f28d3b4f747fde9fe908f7c2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7d322a9ddd08df64f28d3b4f747fde9fe908f7c2", "message": "Merge branch 'early-access' into merge-terraform-into-early-access", "committedDate": "2020-04-22T16:22:29Z", "type": "commit"}, {"oid": "2a2aaf190aed8fdd0e543f9ac8154ab186953b6a", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2a2aaf190aed8fdd0e543f9ac8154ab186953b6a", "message": "Address comments from https://github.com/GoogleCloudPlatform/fda-mystudies/pull/202 (#204)\n\nChanges:\r\n\r\n* Remove .json keys from .gitignore, since they're no longer manually managed.\r\n* Move the audit bucket to us-east1 like all the other resources.\r\n* Replace a CLIENT_ID with a dummy test value in a k8s deployment.\r\n* Use the right port for the user-registration-server-np.\r\n* Fork the k8s deployment.yaml files, to avoid clobbering the working ones.\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-22T17:02:45Z", "type": "commit"}, {"oid": "ce0e2248fa51dc0593c352cb00b0458940060e50", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ce0e2248fa51dc0593c352cb00b0458940060e50", "message": "Merge branch 'terraform' into merge-terraform-into-early-access", "committedDate": "2020-04-22T17:04:43Z", "type": "commit"}, {"oid": "756498af533061549aba4ccdf7c3a692d7cda39f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/756498af533061549aba4ccdf7c3a692d7cda39f", "message": "Remove workflows to try to get GitHub to see them. Will be re-added immediately.", "committedDate": "2020-04-22T20:10:28Z", "type": "commit"}, {"oid": "9d4004c5a3f1689311e14a00fb084af9c274762a", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9d4004c5a3f1689311e14a00fb084af9c274762a", "message": "Revert \"Remove workflows to try to get GitHub to see them. Will be re-added immediately.\"\n\nThis reverts commit 756498af533061549aba4ccdf7c3a692d7cda39f.", "committedDate": "2020-04-22T20:10:56Z", "type": "commit"}, {"oid": "dcc781b683519454499ca21c468203dab4f350f5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/dcc781b683519454499ca21c468203dab4f350f5", "message": "Remove the whole .github/ dir. Will readd immediately.", "committedDate": "2020-04-22T20:12:03Z", "type": "commit"}, {"oid": "54f93e7298237c9c87430241d9678c310b7f29d0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/54f93e7298237c9c87430241d9678c310b7f29d0", "message": "Revert \"Remove the whole .github/ dir. Will readd immediately.\"\n\nThis reverts commit dcc781b683519454499ca21c468203dab4f350f5.", "committedDate": "2020-04-22T20:12:21Z", "type": "commit"}, {"oid": "cee746fa2e2636571a22623ad5dd23fafb1ad4d8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cee746fa2e2636571a22623ad5dd23fafb1ad4d8", "message": "Create a static external IP for the Ingress (#207)\n\n* Remove workflows to try to get GitHub to see them. Will be re-added immediately.\r\n\r\n* Revert \"Remove workflows to try to get GitHub to see them. Will be re-added immediately.\"\r\n\r\nThis reverts commit 756498af533061549aba4ccdf7c3a692d7cda39f.\r\n\r\n* Remove the whole .github/ dir. Will readd immediately.\r\n\r\n* Revert \"Remove the whole .github/ dir. Will readd immediately.\"\r\n\r\nThis reverts commit dcc781b683519454499ca21c468203dab4f350f5.\r\n\r\n* Create a static external IP for the Ingress\r\n\r\nGKE can create an external IP automatically, but it may change if the ingress\r\nis deleted and recreated. Instead, create one in Terraform, and always use the\r\nsame one in the Ingress.\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-22T23:02:03Z", "type": "commit"}, {"oid": "8249cf2be0d499b6177919eff986268ea150741f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8249cf2be0d499b6177919eff986268ea150741f", "message": "Merge remote-tracking branch 'origin/terraform' into terraform", "committedDate": "2020-04-22T23:02:30Z", "type": "commit"}, {"oid": "9fa1d6c32445cf058ec8d2e885cb6f3b184d269c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9fa1d6c32445cf058ec8d2e885cb6f3b184d269c", "message": "Merge branch 'terraform' into merge-terraform-into-early-access", "committedDate": "2020-04-22T23:02:53Z", "type": "commit"}, {"oid": "fc9b5b0dddcedfcdb088cd5b492553f9f396289a", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fc9b5b0dddcedfcdb088cd5b492553f9f396289a", "message": "Change Ingress static IP to global (#208)\n\n* Remove workflows to try to get GitHub to see them. Will be re-added immediately.\r\n\r\n* Revert \"Remove workflows to try to get GitHub to see them. Will be re-added immediately.\"\r\n\r\nThis reverts commit 756498af533061549aba4ccdf7c3a692d7cda39f.\r\n\r\n* Remove the whole .github/ dir. Will readd immediately.\r\n\r\n* Revert \"Remove the whole .github/ dir. Will readd immediately.\"\r\n\r\nThis reverts commit dcc781b683519454499ca21c468203dab4f350f5.\r\n\r\n* Change Ingress static IP to global\r\n\r\nLooking again at the instructions at https://cloud.google.com/kubernetes-engine/docs/tutorials/configuring-domain-name-static-ip, this address should be global.\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-23T00:43:38Z", "type": "commit"}, {"oid": "acb2d4d43b478fe7ec3d403156be724d8b83362b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/acb2d4d43b478fe7ec3d403156be724d8b83362b", "message": "Merge remote-tracking branch 'origin/terraform' into terraform", "committedDate": "2020-04-23T00:54:12Z", "type": "commit"}, {"oid": "8bf4e071abf4b8399b55757bf672db584103ada8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8bf4e071abf4b8399b55757bf672db584103ada8", "message": "Merge branch 'terraform' into merge-terraform-into-early-access", "committedDate": "2020-04-23T00:54:29Z", "type": "commit"}, {"oid": "dd6a24636003d1d5b6fc1fe2b6b0e2c5f7d8ee7c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/dd6a24636003d1d5b6fc1fe2b6b0e2c5f7d8ee7c", "message": "Fork the service.yaml files into tf-service.yaml", "committedDate": "2020-04-23T02:58:53Z", "type": "commit"}, {"oid": "6681bccacb6c05a0a8042436308895cac29ff08f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6681bccacb6c05a0a8042436308895cac29ff08f", "message": "add baseline org infra", "committedDate": "2020-04-02T23:00:34Z", "type": "commit"}, {"oid": "cd9d55f8965d3bc99a32751c612966abca55638b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cd9d55f8965d3bc99a32751c612966abca55638b", "message": "comment out gcs block, fmt", "committedDate": "2020-04-02T23:04:34Z", "type": "commit"}, {"oid": "d0680abb3ce7c590af06fe33f3053fdd8034f78b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d0680abb3ce7c590af06fe33f3053fdd8034f78b", "message": "add data deployment", "committedDate": "2020-04-02T23:31:26Z", "type": "commit"}, {"oid": "9948ff50cd2da02e19af963e2c3345e52ed32504", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9948ff50cd2da02e19af963e2c3345e52ed32504", "message": "add cloudsql and network", "committedDate": "2020-04-03T00:32:27Z", "type": "commit"}, {"oid": "b5cec975efa0f0bffbababfae2954fd001504cc5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b5cec975efa0f0bffbababfae2954fd001504cc5", "message": "rename network to networks", "committedDate": "2020-04-03T15:23:22Z", "type": "commit"}, {"oid": "74cad751e924f9f68151f2976f9742d77d875101", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/74cad751e924f9f68151f2976f9742d77d875101", "message": "add shared vpc", "committedDate": "2020-04-03T16:18:50Z", "type": "commit"}, {"oid": "c18f5f318256204347c4c291c78bbd1d54977969", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c18f5f318256204347c4c291c78bbd1d54977969", "message": "add backend blocks", "committedDate": "2020-04-03T17:01:28Z", "type": "commit"}, {"oid": "d071e1e84cbe70448ef4cf869df3098c882420b8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d071e1e84cbe70448ef4cf869df3098c882420b8", "message": "fix list item", "committedDate": "2020-04-03T17:08:57Z", "type": "commit"}, {"oid": "bdc69082383a1aa46fb7bdafc9ca928b7d895dba", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bdc69082383a1aa46fb7bdafc9ca928b7d895dba", "message": "Add GKE clusters and GKE network\n\nThis config hasn't been tested yet.", "committedDate": "2020-04-03T18:32:08Z", "type": "commit"}, {"oid": "b110a8aa8a4619fa4d4102d3f7713035451e380b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b110a8aa8a4619fa4d4102d3f7713035451e380b", "message": "Merge branch 'terraform' of https://github.com/GoogleCloudPlatform/fda-mystudies into terraform", "committedDate": "2020-04-03T18:33:21Z", "type": "commit"}, {"oid": "ffe59bd83e720e5dab3c7334abc489fe6accafb3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ffe59bd83e720e5dab3c7334abc489fe6accafb3", "message": "add data regions", "committedDate": "2020-04-03T18:37:27Z", "type": "commit"}, {"oid": "4144d05eb45bf31be1cd3d396ce2704e75ba87fe", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4144d05eb45bf31be1cd3d396ce2704e75ba87fe", "message": "fix cloudsql registry path", "committedDate": "2020-04-03T19:14:34Z", "type": "commit"}, {"oid": "dd1a93713ff0452b47e14e866a09d5124a1cf7ae", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/dd1a93713ff0452b47e14e866a09d5124a1cf7ae", "message": "fix terragrunt configs", "committedDate": "2020-04-03T19:20:40Z", "type": "commit"}, {"oid": "085888eae9693c80b60bcae887478598802db5ea", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/085888eae9693c80b60bcae887478598802db5ea", "message": "fixes", "committedDate": "2020-04-03T22:53:11Z", "type": "commit"}, {"oid": "dd0f065e6a70ddd8e7ca9a6afd6ac910296f93c1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/dd0f065e6a70ddd8e7ca9a6afd6ac910296f93c1", "message": "Input the network for GKE through Terragrunt\n\nAlso adjust variables from \"network_name\" to just \"network\" and use the\n\"network_self_link\" output instead of \"network_name\".", "committedDate": "2020-04-03T23:28:06Z", "type": "commit"}, {"oid": "d51d0b1193d0a32346ea697f176c760404d287be", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d51d0b1193d0a32346ea697f176c760404d287be", "message": "Fix typo in mock output for GKE network terragrunt dependency", "committedDate": "2020-04-03T23:32:32Z", "type": "commit"}, {"oid": "554d0a526ae065297c994cea7366d584ed37833f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/554d0a526ae065297c994cea7366d584ed37833f", "message": "add firebase project", "committedDate": "2020-04-06T15:15:35Z", "type": "commit"}, {"oid": "c7db167135267c2f047a634b3eecaabb175921e4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c7db167135267c2f047a634b3eecaabb175921e4", "message": "update names to match gcp setup doc", "committedDate": "2020-04-06T15:48:24Z", "type": "commit"}, {"oid": "f516f97913250afb6da1487874d3ba3bd5a127a4", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f516f97913250afb6da1487874d3ba3bd5a127a4", "message": "Add network project in org policy.", "committedDate": "2020-04-06T15:59:50Z", "type": "commit"}, {"oid": "41dade5c5ef1663938fc2170438fb22c6f5184d3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/41dade5c5ef1663938fc2170438fb22c6f5184d3", "message": "Merge pull request #91 from xingao267/terraform\n\nAdd network project in org policy.", "committedDate": "2020-04-06T16:14:42Z", "type": "commit"}, {"oid": "e2e6de168d18284a3b0554257683d2239647dc32", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e2e6de168d18284a3b0554257683d2239647dc32", "message": "Add cloudbuild triggers.", "committedDate": "2020-04-06T18:42:09Z", "type": "commit"}, {"oid": "54a38ecac512c2f4340451f11c35ea83c30c40f1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/54a38ecac512c2f4340451f11c35ea83c30c40f1", "message": "rename folder", "committedDate": "2020-04-06T20:10:16Z", "type": "commit"}, {"oid": "db5ff0233d4916cb08f5e906610fe1a2bec85ed9", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/db5ff0233d4916cb08f5e906610fe1a2bec85ed9", "message": "Merge branch 'terraform' of https://github.com/GoogleCloudPlatform/fda-mystudies into terraform", "committedDate": "2020-04-06T20:10:21Z", "type": "commit"}, {"oid": "bb626531d524da7f55a8a0cce285d09fe4c3d059", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bb626531d524da7f55a8a0cce285d09fe4c3d059", "message": "Move the GKE clusters into the same subnet\n\nAlso combine the GKE subnet definition into main.tf", "committedDate": "2020-04-06T20:19:03Z", "type": "commit"}, {"oid": "0c6730236d7f22240d58e6fef64213a9e5522a63", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0c6730236d7f22240d58e6fef64213a9e5522a63", "message": "add gitignore, update bootstrap to fix dep and cleanup order", "committedDate": "2020-04-06T20:22:47Z", "type": "commit"}, {"oid": "0fe3e03f5fe49b1fd9c139f701f4ac9d2ac544d5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0fe3e03f5fe49b1fd9c139f701f4ac9d2ac544d5", "message": "put terraform block back up top", "committedDate": "2020-04-06T20:25:27Z", "type": "commit"}, {"oid": "8619f3174b8b227d43b5f463744f8413032bac06", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8619f3174b8b227d43b5f463744f8413032bac06", "message": "Add selective CICD steps.", "committedDate": "2020-04-06T20:40:09Z", "type": "commit"}, {"oid": "229e7b07aa8472dd0b720dfa1fe8891df75a8d36", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/229e7b07aa8472dd0b720dfa1fe8891df75a8d36", "message": "Merge pull request #92 from MartinPetkov/terraform\n\nMove the GKE clusters into the same subnet", "committedDate": "2020-04-06T20:52:34Z", "type": "commit"}, {"oid": "dc66f45e7781682bc06722103b0841bc4affed09", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/dc66f45e7781682bc06722103b0841bc4affed09", "message": "Pure fmt fix.", "committedDate": "2020-04-06T20:54:54Z", "type": "commit"}, {"oid": "566a79d9cc213cfeed99f28299f37df8fc452068", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/566a79d9cc213cfeed99f28299f37df8fc452068", "message": "HCL formatting.", "committedDate": "2020-04-06T20:58:08Z", "type": "commit"}, {"oid": "b6501e9f8919563e99b21da4385e23f9a0cbaa90", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b6501e9f8919563e99b21da4385e23f9a0cbaa90", "message": "Add a note for tf validate.", "committedDate": "2020-04-06T21:08:15Z", "type": "commit"}, {"oid": "42d3aa100bf8bfa662ceddf245fca952434962b8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/42d3aa100bf8bfa662ceddf245fca952434962b8", "message": "Add plan cloudbuild job.", "committedDate": "2020-04-06T21:53:04Z", "type": "commit"}, {"oid": "54b978d25d39d2f0a30c3b8272faaf4aff6d4f74", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/54b978d25d39d2f0a30c3b8272faaf4aff6d4f74", "message": "Comment out cloud build resources initially.", "committedDate": "2020-04-06T21:55:01Z", "type": "commit"}, {"oid": "242aff68d7e3f98a3d75c7c4d68f3f6ab514433c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/242aff68d7e3f98a3d75c7c4d68f3f6ab514433c", "message": "check in bootstrap terraform block", "committedDate": "2020-04-06T21:56:09Z", "type": "commit"}, {"oid": "bf56b53cef92b3215d24371ea6edd7926cb88233", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bf56b53cef92b3215d24371ea6edd7926cb88233", "message": "Merge branch 'terraform' of https://github.com/GoogleCloudPlatform/fda-mystudies into terraform", "committedDate": "2020-04-06T21:56:14Z", "type": "commit"}, {"oid": "8e7d66cfbeba6ccb12b0dd283273cd85ae5e5c82", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/8e7d66cfbeba6ccb12b0dd283273cd85ae5e5c82", "message": "add org policies terragrunt file", "committedDate": "2020-04-06T21:58:57Z", "type": "commit"}, {"oid": "bfb6c1877c262b6c407116c47cba22d062292db9", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/bfb6c1877c262b6c407116c47cba22d062292db9", "message": "Specify file include path in triggers and disable them initially.", "committedDate": "2020-04-06T22:09:23Z", "type": "commit"}, {"oid": "a95005e81dc337d87e6c5343256c72ec6cc753b5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a95005e81dc337d87e6c5343256c72ec6cc753b5", "message": "Make plan presubmit job run by default and only make SA viewer.", "committedDate": "2020-04-06T22:59:37Z", "type": "commit"}, {"oid": "c9c0e683933aebc79c91da80d60ade5477dd07ae", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c9c0e683933aebc79c91da80d60ade5477dd07ae", "message": "Merge pull request #95 from xingao267/terraform\n\nMake plan presubmit job run by default and only make SA viewer.", "committedDate": "2020-04-06T23:03:56Z", "type": "commit"}, {"oid": "165660b0a9c8c7cb6532597ee722226b222c13e0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/165660b0a9c8c7cb6532597ee722226b222c13e0", "message": "post-deployment changes", "committedDate": "2020-04-06T23:40:15Z", "type": "commit"}, {"oid": "d59f1c98fc7234b6e4ac1d3b241b8e0d1cec3c0b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d59f1c98fc7234b6e4ac1d3b241b8e0d1cec3c0b", "message": "Format fix.", "committedDate": "2020-04-07T01:26:14Z", "type": "commit"}, {"oid": "33cc6f99d55b9e015566f083a4dab3f265fbc476", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/33cc6f99d55b9e015566f083a4dab3f265fbc476", "message": "Add permissions to SA and enable more APIs.", "committedDate": "2020-04-07T03:02:17Z", "type": "commit"}, {"oid": "52042d5813570643bf2fbcbbe58846384da0d484", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/52042d5813570643bf2fbcbbe58846384da0d484", "message": "Use for_each for roles.", "committedDate": "2020-04-07T03:23:22Z", "type": "commit"}, {"oid": "1ce0cd7ce1f850c1345e60884441128d98d09907", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1ce0cd7ce1f850c1345e60884441128d98d09907", "message": "Refine viewer roles.", "committedDate": "2020-04-07T14:33:12Z", "type": "commit"}, {"oid": "dd3492d904e787eed359d0bc7a4c644ea1db6e8d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/dd3492d904e787eed359d0bc7a4c644ea1db6e8d", "message": "more deployment fixes", "committedDate": "2020-04-07T17:16:24Z", "type": "commit"}, {"oid": "53da9c723a661e9d05ccb98f881bdab26310bbab", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/53da9c723a661e9d05ccb98f881bdab26310bbab", "message": "Format", "committedDate": "2020-04-07T17:36:07Z", "type": "commit"}, {"oid": "ecf8dce1b436e92463d5da8bd2bf14d066e81344", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ecf8dce1b436e92463d5da8bd2bf14d066e81344", "message": "Merge pull request #97 from xingao267/terraform\n\nFormat", "committedDate": "2020-04-07T17:40:27Z", "type": "commit"}, {"oid": "fc7a17cd4591f8ab225baa83bc84ff7368f10ef6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fc7a17cd4591f8ab225baa83bc84ff7368f10ef6", "message": "move devops triggers to org folder", "committedDate": "2020-04-07T18:15:38Z", "type": "commit"}, {"oid": "ee2a490a25d78a849eddf18f637f7e0b73521a51", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ee2a490a25d78a849eddf18f637f7e0b73521a51", "message": "Merge branch 'terraform' of https://github.com/GoogleCloudPlatform/fda-mystudies into terraform", "committedDate": "2020-04-07T18:15:44Z", "type": "commit"}, {"oid": "b40d17439c5df8a97ac35ab30bbf09305f4814df", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b40d17439c5df8a97ac35ab30bbf09305f4814df", "message": "rename to hhas_gke", "committedDate": "2020-04-07T18:21:53Z", "type": "commit"}, {"oid": "608488da5f0a56d0071aab5b07f515f67aefc460", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/608488da5f0a56d0071aab5b07f515f67aefc460", "message": "make buckets multi regional", "committedDate": "2020-04-07T18:49:42Z", "type": "commit"}, {"oid": "38bde9189dd76baa02078c3f28a0bf9a29080b2a", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/38bde9189dd76baa02078c3f28a0bf9a29080b2a", "message": "add sql admin api o on apps project", "committedDate": "2020-04-07T20:57:51Z", "type": "commit"}, {"oid": "c7d7d902902c3845eddb9b6a3619b47ab450239a", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c7d7d902902c3845eddb9b6a3619b47ab450239a", "message": "Add variables/tfvars for triggers.", "committedDate": "2020-04-07T21:39:30Z", "type": "commit"}, {"oid": "53c41e682ba81109eb91d52714e228e62a9a6833", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/53c41e682ba81109eb91d52714e228e62a9a6833", "message": "Add apply trigger.", "committedDate": "2020-04-07T21:52:22Z", "type": "commit"}, {"oid": "460f29a38bfef22ac093083021779647cb9268bf", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/460f29a38bfef22ac093083021779647cb9268bf", "message": "Use variable to control CD job.", "committedDate": "2020-04-07T21:55:52Z", "type": "commit"}, {"oid": "6942ae9b99fce781a83f97d0577e0c06441d7754", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6942ae9b99fce781a83f97d0577e0c06441d7754", "message": "move shared vpc deployment to networks, limit gke SA access to subnet", "committedDate": "2020-04-07T22:04:25Z", "type": "commit"}, {"oid": "24d9883bfa8414f4eb0d4175f19b74ac406e9e56", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/24d9883bfa8414f4eb0d4175f19b74ac406e9e56", "message": "merge", "committedDate": "2020-04-07T22:10:02Z", "type": "commit"}, {"oid": "117ab4e80275bd24b8f06e4ce29194ebd683a5b8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/117ab4e80275bd24b8f06e4ce29194ebd683a5b8", "message": "Add missing API and permissions to deploy firebase project.", "committedDate": "2020-04-07T22:38:17Z", "type": "commit"}, {"oid": "eaa5c5bb2b9018bd69b7e452ac9318964220bd60", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/eaa5c5bb2b9018bd69b7e452ac9318964220bd60", "message": "Delete .gitignore in Terraform/ directory.", "committedDate": "2020-04-08T14:25:50Z", "type": "commit"}, {"oid": "ea58e3302beb105303f53dba707e11d6586361cd", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ea58e3302beb105303f53dba707e11d6586361cd", "message": "Add included files for presubmit triggers.", "committedDate": "2020-04-08T14:34:29Z", "type": "commit"}, {"oid": "9a949e3b0e1a99621d3186211c25a2265e07decf", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/9a949e3b0e1a99621d3186211c25a2265e07decf", "message": "Enable subnet_private_access and subnet_flow_logs", "committedDate": "2020-04-08T18:11:04Z", "type": "commit"}, {"oid": "fc107f6e1562c7bdf7e7b58a875070f9ce724c8e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fc107f6e1562c7bdf7e7b58a875070f9ce724c8e", "message": "Merge pull request #109 from MartinPetkov/terraform\n\nEnable subnet_private_access and subnet_flow_logs", "committedDate": "2020-04-08T18:13:33Z", "type": "commit"}, {"oid": "801209f80f68b6e567ceedf8137a8f8f7cf42131", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/801209f80f68b6e567ceedf8137a8f8f7cf42131", "message": "Add explicit IP address range for the Cloud SQL private access", "committedDate": "2020-04-08T18:21:02Z", "type": "commit"}, {"oid": "c3fe2d71814fbd969cb7062e0da2fcb0ba5f74e6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/c3fe2d71814fbd969cb7062e0da2fcb0ba5f74e6", "message": "Merge pull request #110 from MartinPetkov/cloudsql-add-ip-and-prefix\n\nAdd explicit IP address range for the Cloud SQL private access", "committedDate": "2020-04-08T18:30:02Z", "type": "commit"}, {"oid": "f09dc2142728b3804516b73c24076f476a16e8e0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f09dc2142728b3804516b73c24076f476a16e8e0", "message": "Update comment for Cloud SQL network prefix", "committedDate": "2020-04-08T18:33:36Z", "type": "commit"}, {"oid": "375e2bf70a48eb15174afe84afe90e88f6bf863d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/375e2bf70a48eb15174afe84afe90e88f6bf863d", "message": "Merge pull request #111 from MartinPetkov/terraform\n\nUpdate comment for Cloud SQL network prefix", "committedDate": "2020-04-08T18:37:19Z", "type": "commit"}, {"oid": "02497e3be92cfd23d53b9609f249a708bcf839aa", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/02497e3be92cfd23d53b9609f249a708bcf839aa", "message": "Make the GKE apps depend on the data deployment\n\nThey need access to Cloud SQL and Firestore.", "committedDate": "2020-04-08T18:53:35Z", "type": "commit"}, {"oid": "f067333740b6d94123aa569f773915a9a33ed203", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f067333740b6d94123aa569f773915a9a33ed203", "message": "Merge pull request #112 from MartinPetkov/terraform\n\nMake the GKE apps depend on the data and firestore deployments", "committedDate": "2020-04-08T19:07:20Z", "type": "commit"}, {"oid": "4377df50629f5573e94314288f746a51eda2da89", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4377df50629f5573e94314288f746a51eda2da89", "message": "Enable CD to do a full deployment.", "committedDate": "2020-04-08T19:08:55Z", "type": "commit"}, {"oid": "23d3889a7219dadff148d380f97ef493a68598e6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/23d3889a7219dadff148d380f97ef493a68598e6", "message": "Increase the timeout.", "committedDate": "2020-04-08T19:22:08Z", "type": "commit"}, {"oid": "38f5c2a473405bff508a81a04e5ae71971eab7ed", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/38f5c2a473405bff508a81a04e5ae71971eab7ed", "message": "add initial readme, add org admin to bootstrap", "committedDate": "2020-04-08T19:28:04Z", "type": "commit"}, {"oid": "2b6c70ca8f97b85bf2f25569b24252c8238e8313", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2b6c70ca8f97b85bf2f25569b24252c8238e8313", "message": "minor spacing fixes", "committedDate": "2020-04-08T19:30:13Z", "type": "commit"}, {"oid": "482795f52eced85bc023cc0f6d66067a469ef994", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/482795f52eced85bc023cc0f6d66067a469ef994", "message": "minor spacing fixes", "committedDate": "2020-04-08T19:30:44Z", "type": "commit"}, {"oid": "ba2f48cd363fd819103307c43e6e248bbe1e4bf6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ba2f48cd363fd819103307c43e6e248bbe1e4bf6", "message": "fmt", "committedDate": "2020-04-08T19:33:48Z", "type": "commit"}, {"oid": "359014105c16ecc0aacb0310577fe21e9b195758", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/359014105c16ecc0aacb0310577fe21e9b195758", "message": "Merge branch 'terraform' into umairidris", "committedDate": "2020-04-08T19:34:15Z", "type": "commit"}, {"oid": "a9985d2c4fd482a38b8e76181b7e65b32febe75e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a9985d2c4fd482a38b8e76181b7e65b32febe75e", "message": "add terraform readme", "committedDate": "2020-04-08T19:41:13Z", "type": "commit"}, {"oid": "0a128732f0dd84e57d72d73ee32846f02c02c6b0", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/0a128732f0dd84e57d72d73ee32846f02c02c6b0", "message": "rm readme", "committedDate": "2020-04-08T19:42:50Z", "type": "commit"}, {"oid": "553dad448d7b5717c8e6e106428b4715835e20b7", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/553dad448d7b5717c8e6e106428b4715835e20b7", "message": "Merge pull request #114 from GoogleCloudPlatform/umairidris\n\nadd org admin to bootstrap", "committedDate": "2020-04-08T19:56:56Z", "type": "commit"}, {"oid": "238d14298255941eb6b750c255669300467a2b5f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/238d14298255941eb6b750c255669300467a2b5f", "message": "Merge branch 'terraform' into terraform", "committedDate": "2020-04-08T21:04:16Z", "type": "commit"}, {"oid": "777a24a028996035fcb0abbd102b09874b656f14", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/777a24a028996035fcb0abbd102b09874b656f14", "message": "Include cd config itself in trigger.", "committedDate": "2020-04-08T21:41:13Z", "type": "commit"}, {"oid": "cc33e58049ee696f764b83ee9af39fa2c81de793", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/cc33e58049ee696f764b83ee9af39fa2c81de793", "message": "Merge pull request #113 from xingao267/terraform\n\nEnable CD to do a full deployment.", "committedDate": "2020-04-08T21:48:25Z", "type": "commit"}, {"oid": "74446ee83603f9f16b91002ad14f9d01d886c4cc", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/74446ee83603f9f16b91002ad14f9d01d886c4cc", "message": "Use CFT container.", "committedDate": "2020-04-08T22:29:14Z", "type": "commit"}, {"oid": "ba1b3ca4825f50e1a28ef3b1c8da6971914c2749", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/ba1b3ca4825f50e1a28ef3b1c8da6971914c2749", "message": "Upgrade TF version.", "committedDate": "2020-04-08T22:50:37Z", "type": "commit"}, {"oid": "a1d67b31a9c01c626eda5358dd1de9173d965da5", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/a1d67b31a9c01c626eda5358dd1de9173d965da5", "message": "Merge pull request #117 from xingao267/terraform\n\nUse CFT container.", "committedDate": "2020-04-09T00:09:09Z", "type": "commit"}, {"oid": "d5f46c51e7791c038071792c297fa9816bccd169", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d5f46c51e7791c038071792c297fa9816bccd169", "message": "add deployment steps", "committedDate": "2020-04-09T00:12:45Z", "type": "commit"}, {"oid": "b7af48dd53497045dac0dbea388c5ad66b718595", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/b7af48dd53497045dac0dbea388c5ad66b718595", "message": "Combine all clusters into one (#122)\n\nIt seems the FDA MyStudies team has moved towards combining all servers into\r\none cluster, \"heroes-hat-dev\". Adjust Terraform configs to match that.\r\n\r\nAlso increase the IP ranges for pods and services, to leave more room for\r\nscaling.\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-09T15:14:45Z", "type": "commit"}, {"oid": "f6f72f0c7b28f0f1666c2553d353a915b0090299", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f6f72f0c7b28f0f1666c2553d353a915b0090299", "message": "Re-add subnet ranges because GCP can't add and remove secondary IP ranges in the same request (#123)\n\nAfter TF runs in CD, remove these ranges again.\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-09T15:49:32Z", "type": "commit"}, {"oid": "55139d5318b88006279630bd4e64629a66de1c39", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/55139d5318b88006279630bd4e64629a66de1c39", "message": "Missed one for auth-server (#124)\n\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-09T16:00:58Z", "type": "commit"}, {"oid": "6fc630ff3d63b642fd339f45a18976adef46c9f3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/6fc630ff3d63b642fd339f45a18976adef46c9f3", "message": "aaddress zohreh comments", "committedDate": "2020-04-09T16:28:38Z", "type": "commit"}, {"oid": "117d59cef4554ca9df06fc4335ef905854c3f579", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/117d59cef4554ca9df06fc4335ef905854c3f579", "message": "try to fix numbering", "committedDate": "2020-04-09T16:33:06Z", "type": "commit"}, {"oid": "7aa2659599882eb25b7378d223293290fa4e35cb", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7aa2659599882eb25b7378d223293290fa4e35cb", "message": "rename folder", "committedDate": "2020-04-09T16:33:38Z", "type": "commit"}, {"oid": "801c70321780acdcdf8d3107c145af5218276556", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/801c70321780acdcdf8d3107c145af5218276556", "message": "Merge branch 'terraform' into readme", "committedDate": "2020-04-09T16:35:56Z", "type": "commit"}, {"oid": "73d22e9f0ea3425228287d1651521da6c2a3654b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/73d22e9f0ea3425228287d1651521da6c2a3654b", "message": "wording", "committedDate": "2020-04-09T16:37:12Z", "type": "commit"}, {"oid": "f1e951dcfd215ed75ed96800cb9a0fc6203cef4d", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/f1e951dcfd215ed75ed96800cb9a0fc6203cef4d", "message": "Merge branch 'readme' of https://github.com/GoogleCloudPlatform/fda-mystudies into readme", "committedDate": "2020-04-09T16:37:17Z", "type": "commit"}, {"oid": "32ee0cf0185bf41ac9e532f3d2f3bf34107ade74", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/32ee0cf0185bf41ac9e532f3d2f3bf34107ade74", "message": "Re-remove subnets, can't add and delete secondary subnet IP ranges (#125)\n\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-09T17:04:10Z", "type": "commit"}, {"oid": "d4f56df6adfa680d13ed50cb6ef9045c99b9e91c", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/d4f56df6adfa680d13ed50cb6ef9045c99b9e91c", "message": "Merge branch 'terraform' into readme", "committedDate": "2020-04-09T17:17:47Z", "type": "commit"}, {"oid": "527e58b31f47d5c96c064482cbf8a8b49fae1855", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/527e58b31f47d5c96c064482cbf8a8b49fae1855", "message": "prefix", "committedDate": "2020-04-09T19:33:11Z", "type": "commit"}, {"oid": "5919748f2be1d8a86dfe934dfc0424886c3bf1e3", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/5919748f2be1d8a86dfe934dfc0424886c3bf1e3", "message": "Merge branch 'readme' of https://github.com/GoogleCloudPlatform/fda-mystudies into readme", "committedDate": "2020-04-09T19:33:16Z", "type": "commit"}, {"oid": "25eabc065fa7a614b9f2a8f07eae7aedde3168ae", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/25eabc065fa7a614b9f2a8f07eae7aedde3168ae", "message": "Merge pull request #115 from GoogleCloudPlatform/readme\n\nadd readme", "committedDate": "2020-04-09T20:20:46Z", "type": "commit"}, {"oid": "2736151c0a15dad4182af34e1194a06532c394fb", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/2736151c0a15dad4182af34e1194a06532c394fb", "message": "Add roles/cloudsql.client binding for the data project (#126)\n\nRequires a new module under data/ because:\r\n* apps depends on data to exist for the Cloud SQL connection\r\n* This new IAM binding in data requires apps to exist to know the service account\r\n\r\nCo-authored-by: Martin Petkov <mpetkov@google.com>", "committedDate": "2020-04-14T14:37:26Z", "type": "commit"}]}