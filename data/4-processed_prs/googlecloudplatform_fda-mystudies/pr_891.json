{"pr_number": 891, "pr_title": "Enroll Mgmt Service - Externalized configuration", "pr_createdAt": "2020-09-06T13:46:29Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/891", "timeline": [{"oid": "49de67ff296f2fb69a333a615b82d6d08ad8ddcc", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/49de67ff296f2fb69a333a615b82d6d08ad8ddcc", "message": "Enroll Mgmt Service - Externalized configuration\n\nEnroll Mgmt Service - Externalized configuration", "committedDate": "2020-09-06T13:44:48Z", "type": "commit"}, {"oid": "59e74c1080f7b7f35d3b807c2885bb755b9e6c9b", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/59e74c1080f7b7f35d3b807c2885bb755b9e6c9b", "message": "changed the data source url\n\nchanged the data source url", "committedDate": "2020-09-08T11:09:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA1MDMwMw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/891#discussion_r487050303", "bodyText": "change to update for now", "author": "zohrehj", "createdAt": "2020-09-11T13:37:55Z", "path": "user-registration-server-ws/enroll-mgmt-module/enroll-mgmt/src/main/resources/application.properties", "diffHunk": "@@ -1,16 +1,24 @@\n+#spring configurations\n+spring.profiles.active=@spring.profiles.active@\n+spring.main.allow-bean-definition-overriding=true\n+\n logging.level.root=INFO\n logging.level.com.google.cloud.healthcare.fdamystudies=ERROR\n \n # log configuration\n-logging.path=/tmp/var/log\n-logging.file=${logging.path}/enrollment-token-management-server.log\n+logging.path=${LOG_PATH}\n+logging.file=${logging.path}/enroll_mgmt_service.log\n logging.file.max-size= 1024KB\n \n #dev\n-email.code.expire_time = 15\n spring.datasource.url=jdbc:mysql://127.0.0.1:3306/${DB_NAME}?createDatabaseIfNotExist=true&autoReconnect=true&characterEncoding=utf8&useSSL=false&allowPublicKeyRetrieval=true\n spring.datasource.username=${DB_USER}\n spring.datasource.password=${DB_PASS}\n+spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n+# JPA \n+spring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect\n+spring.jpa.show-sql=false\n+spring.jpa.hibernate.ddl-auto=none", "originalCommit": "59e74c1080f7b7f35d3b807c2885bb755b9e6c9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM3MTIyMQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/891#discussion_r488371221", "bodyText": "Changed to update", "author": "aswinijena100", "createdAt": "2020-09-15T04:10:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA1MDMwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA1MTU1Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/891#discussion_r487051552", "bodyText": "nit: can this be renamed to: response.server.url.participant.add to match the next url?", "author": "zohrehj", "createdAt": "2020-09-11T13:40:00Z", "path": "user-registration-server-ws/enroll-mgmt-module/enroll-mgmt/src/main/resources/application.properties", "diffHunk": "@@ -20,39 +28,24 @@ spring.datasource.hikari.minimum-idle=10\n spring.datasource.hikari.maximum-pool-size=100\n spring.datasource.hikari.connectionTimeout=30000\n spring.datasource.hikari.maxLifetime=1800000\n-spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n-spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\n-\n-# JPA \n-spring.jpa.show-sql=true\n-spring.jpa.hibernate.ddl-auto=update\n-spring.jpa.hibernate.naming.strategy=org.hibernate.cfg.ImprovedNamingStrategy\n-\n \n # EMBEDDED SERVER CONFIGURATION\n server.servlet.context-path=/myStudiesEnrollmentMgmt\n-\n #local to run\n server.port=8091\n \n # HTTP encoding\n spring.http.encoding.charset=UTF-8\n-\n spring.jmx.enabled = false\n \n-security.oauth2.client.client-id= oauth-scim-client-id\n-security.oauth2.client.client-secret= oauth-scim-client-secret\n-security.oauth2.introspection_endpoint=http://localhost:8002/oauth-scim-service/oauth2/introspect\n-\n-commonservice.auditlogevent.enabled=true\n-commonservice.email.enabled = false\n+security.oauth2.client.client-id=${CLIENT_ID}\n+security.oauth2.client.client-secret=${SECRET_KEY}\n+security.oauth2.introspection_endpoint=${HYDRA_ADMIN_URL}/oauth2/introspect\n \n #Response Server URLs\n-response.server.url.addParticipantId= http://${RESPONSE_SERVER_URL}/mystudies-response-server/participant/add\n-response.server.url.participant.withdraw= http://${RESPONSE_SERVER_URL}/mystudies-response-server/participant/withdraw\n-\n-spring.main.allow-bean-definition-overriding=true\n-\n-\n-\n+response.server.url.addParticipantId=${RESPONSE_SERVER_URL}/participant/add", "originalCommit": "59e74c1080f7b7f35d3b807c2885bb755b9e6c9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM3MTMwMA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/891#discussion_r488371300", "bodyText": "renamed this property to response.server.url.participant.add", "author": "aswinijena100", "createdAt": "2020-09-15T04:10:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA1MTU1Mg=="}], "type": "inlineReview"}, {"oid": "553a353150de446e8e038b3aef1e629ce019ae2f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/553a353150de446e8e038b3aef1e629ce019ae2f", "message": "review comment fixes\n\nreview comment fixes", "committedDate": "2020-09-15T04:10:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODcxODg0OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/891#discussion_r488718848", "bodyText": "this line needs to be replaced as well, and the code should be updated to work with the new name", "author": "zohrehj", "createdAt": "2020-09-15T14:35:21Z", "path": "user-registration-server-ws/enroll-mgmt-module/enroll-mgmt/src/test/resources/application-mockit.properties", "diffHunk": "@@ -1,44 +1,38 @@\n-#dev\n-email.code.expire_time=15\n+# log configuration\n+logging.path=./log\n+\n+spring.datasource.driver-class-name=org.h2.Driver\n+spring.datasource.url=jdbc:h2:mem:testdb\n+spring.datasource.username=sa\n+spring.datasource.password=sa\n \n # JPA \n spring.jpa.show-sql=true\n spring.jpa.hibernate.ddl-auto=create-drop\n spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect\n spring.jpa.properties.hibernate.connection.release_mode=after_transaction\n-spring.datasource.driver-class-name=org.h2.Driver\n-spring.datasource.url=jdbc:h2:mem:testdb\n-spring.datasource.username=sa\n-spring.datasource.password=sa\n-spring.jpa.hibernate.naming.strategy=org.hibernate.cfg.ImprovedNamingStrategy\n-\n \n spring.jpa.properties.hibernate.show_sql=true\n spring.jpa.properties.hibernate.format_sql=false\n spring.jpa.properties.hibernate.jdbc.batch_size=10\n spring.jpa.properties.hibernate.id.new_generator_mappings=false\n spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\n \n-\n # EMBEDDED SERVER CONFIGURATION\n server.servlet.contextPath=/myStudiesEnrollmentMgmt\n-\n #local to run\n server.port=8091\n \n # HTTP encoding\n spring.http.encoding.charset=UTF-8\n-\n spring.jmx.enabled=false\n \n-\n #Response Server URLs\n response.server.url=http://localhost:8080/mystudies-response-server\n response.server.url.addParticipantId=http://localhost:8080/mystudies-response-server/participant/add", "originalCommit": "553a353150de446e8e038b3aef1e629ce019ae2f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIyMjE2OQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/891#discussion_r489222169", "bodyText": "Fixed now.", "author": "aswinijena100", "createdAt": "2020-09-16T07:29:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODcxODg0OA=="}], "type": "inlineReview"}, {"oid": "745b2686016d67fb6715882a67273185ee89b3c1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/745b2686016d67fb6715882a67273185ee89b3c1", "message": "Review comment issue fixes on 16/09/2020\n\nReview comment issue fixes on 16/09/2020", "committedDate": "2020-09-16T07:28:39Z", "type": "commit"}, {"oid": "7c5fd9024258009b910014ecc6b02e4ae62a9ef2", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/7c5fd9024258009b910014ecc6b02e4ae62a9ef2", "message": "Added reference url for DB properties\n\nAdded reference url for DB properties", "committedDate": "2020-09-18T12:01:26Z", "type": "commit"}, {"oid": "483e3111e135c6be4aa576b3e4f3c300847ada01", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/483e3111e135c6be4aa576b3e4f3c300847ada01", "message": "Merge branch 'develop' into enroll-mgmt-externalize-configuration", "committedDate": "2020-09-25T17:16:31Z", "type": "commit"}, {"oid": "1bdc9f95624ba4f329446113c18ca174bd9fd0f1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/1bdc9f95624ba4f329446113c18ca174bd9fd0f1", "message": "organized imports", "committedDate": "2020-09-25T17:21:16Z", "type": "commit"}, {"oid": "fce96bbfcec88fc9630ec88ead332aa43618cfcb", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/fce96bbfcec88fc9630ec88ead332aa43618cfcb", "message": "Merge branch 'enroll-mgmt-externalize-configuration' of https://github.com/GoogleCloudPlatform/fda-mystudies into enroll-mgmt-externalize-configuration\n\n# Conflicts:\n#\tuser-registration-server-ws/enroll-mgmt-module/enroll-mgmt/src/main/java/com/google/cloud/healthcare/fdamystudies/service/StudyStateServiceImpl.java\n#\tuser-registration-server-ws/enroll-mgmt-module/enroll-mgmt/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/tests/EnrollmentTokenControllerTest.java", "committedDate": "2020-09-25T17:25:55Z", "type": "commit"}, {"oid": "50866ad02f34673271238af5dd705980b57eb5ab", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/50866ad02f34673271238af5dd705980b57eb5ab", "message": "Merge branch 'develop' into enroll-mgmt-externalize-configuration", "committedDate": "2020-09-25T17:26:17Z", "type": "commit"}, {"oid": "4930fc1ef0ad3b2cdb244ede440df7f117e57c49", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4930fc1ef0ad3b2cdb244ede440df7f117e57c49", "message": "Merge branch 'develop' into enroll-mgmt-externalize-configuration", "committedDate": "2020-09-25T17:40:25Z", "type": "commit"}]}