{"pr_number": 113, "pr_title": "Enable CD to do a full deployment.", "pr_createdAt": "2020-04-08T19:08:31Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/113", "timeline": [{"oid": "4377df50629f5573e94314288f746a51eda2da89", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4377df50629f5573e94314288f746a51eda2da89", "message": "Enable CD to do a full deployment.", "committedDate": "2020-04-08T19:08:55Z", "type": "commit"}, {"oid": "4377df50629f5573e94314288f746a51eda2da89", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/4377df50629f5573e94314288f746a51eda2da89", "message": "Enable CD to do a full deployment.", "committedDate": "2020-04-08T19:08:55Z", "type": "forcePushed"}, {"oid": "23d3889a7219dadff148d380f97ef493a68598e6", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/23d3889a7219dadff148d380f97ef493a68598e6", "message": "Increase the timeout.", "committedDate": "2020-04-08T19:22:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc2MDAzNQ==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/113#discussion_r405760035", "bodyText": "is both owner and org admin needed? i believe only org admin should be needed in practice.", "author": "umairidris", "createdAt": "2020-04-08T19:24:52Z", "path": "Terraform/bootstrap/main.tf", "diffHunk": "@@ -30,8 +30,12 @@ locals {\n     \"roles/iam.securityReviewer\",\n   ]\n   cloudbuild_sa_editor_roles = concat(local.cloudbuild_sa_viewer_roles, [\n-    \"roles/firebase.admin\",\n-    \"roles/serviceusage.serviceUsageAdmin\",\n+    \"roles/billing.user\",\n+    \"roles/orgpolicy.policyAdmin\",\n+    \"roles/owner\",", "originalCommit": "23d3889a7219dadff148d380f97ef493a68598e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc2MTUyOA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/113#discussion_r405761528", "bodyText": "org admin doesn't seem to have much priviledge directly https://cloud.google.com/iam/docs/understanding-roles#billing-roles\nBut its power is to grant itself more permissions.", "author": "xingao267", "createdAt": "2020-04-08T19:27:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc2MDAzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc2NDI0OA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/113#discussion_r405764248", "bodyText": "So what is the roles/owner giving us in general? From what I understood from best practices https://cloud.google.com/resource-manager/docs/super-admin-best-practices you generally want to avoid roles/owner and grant org admins who can then grant additional perms as needed?", "author": "umairidris", "createdAt": "2020-04-08T19:33:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc2MDAzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTgyODk5Ng==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/113#discussion_r405828996", "bodyText": "I think that would be for human because they can then grant other permissions. But for robot, unless it's granting itself permissions during a run, which I'm not sure if it's good or now.", "author": "xingao267", "createdAt": "2020-04-08T21:34:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc2MDAzNQ=="}], "type": "inlineReview"}, {"oid": "238d14298255941eb6b750c255669300467a2b5f", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/238d14298255941eb6b750c255669300467a2b5f", "message": "Merge branch 'terraform' into terraform", "committedDate": "2020-04-08T21:04:16Z", "type": "commit"}, {"oid": "777a24a028996035fcb0abbd102b09874b656f14", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/777a24a028996035fcb0abbd102b09874b656f14", "message": "Include cd config itself in trigger.", "committedDate": "2020-04-08T21:41:13Z", "type": "commit"}]}