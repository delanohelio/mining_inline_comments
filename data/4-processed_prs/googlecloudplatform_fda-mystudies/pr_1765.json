{"pr_number": 1765, "pr_title": "[participant-manager-datastore]:  Fixed issue #1738 and #1755", "pr_createdAt": "2020-11-02T10:49:00Z", "pr_url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765", "timeline": [{"oid": "441cbac11626f95f08ffa8d06a22acf13d227527", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/441cbac11626f95f08ffa8d06a22acf13d227527", "message": "Fixed issue #1738 and #1755\n\nFixed issue #1738 and #1755", "committedDate": "2020-11-02T10:42:34Z", "type": "commit"}, {"oid": "612c2467017f8768b2ff4dff169715f265b8b8b8", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/612c2467017f8768b2ff4dff169715f265b8b8b8", "message": "Fixed PR comments\n\nFixed PR comments", "committedDate": "2020-11-03T06:50:25Z", "type": "commit"}, {"oid": "108b766f7bc76c43013c9a99cb5298f707298ce1", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/108b766f7bc76c43013c9a99cb5298f707298ce1", "message": "Merge branch 'develop' into partcipant-manager-issue-1755", "committedDate": "2020-11-03T06:50:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUyMDQ3Nw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765#discussion_r516520477", "bodyText": "Should we expect the studies array to be empty here?", "author": "saminguyen", "createdAt": "2020-11-03T09:19:01Z", "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -865,6 +865,24 @@ public void shouldReturnUserNotFoundForUpdateTargetEnrollment() throws Exception\n     verifyTokenIntrospectRequest();\n   }\n \n+  @Test\n+  public void shouldNotReturnStudiesIfNoSitesForSuperAdmin() throws Exception {\n+    HttpHeaders headers = testDataHelper.newCommonHeaders();\n+    headers.add(USER_ID_HEADER, userRegAdminEntity.getId());\n+\n+    /* Set study in the site to null and expect no study if there is no site associated with that study*/\n+    siteEntity.setStudy(null);\n+    testDataHelper.getSiteRepository().saveAndFlush(siteEntity);\n+\n+    mockMvc\n+        .perform(\n+            get(ApiEndpoint.GET_STUDIES.getPath()).headers(headers).contextPath(getContextPath()))\n+        .andDo(print())\n+        .andExpect(status().isOk());", "originalCommit": "108b766f7bc76c43013c9a99cb5298f707298ce1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjYwODgzOA==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765#discussion_r516608838", "bodyText": "Yes, added assertion to expect an empty array", "author": "Kantharajut-btc", "createdAt": "2020-11-03T11:48:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUyMDQ3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUyMDgwMw==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765#discussion_r516520803", "bodyText": "Move this to the section with other tests for the GET_STUDIES endpoint", "author": "saminguyen", "createdAt": "2020-11-03T09:19:32Z", "path": "participant-manager-datastore/participant-manager-service/src/test/java/com/google/cloud/healthcare/fdamystudies/controller/StudyControllerTest.java", "diffHunk": "@@ -865,6 +865,24 @@ public void shouldReturnUserNotFoundForUpdateTargetEnrollment() throws Exception\n     verifyTokenIntrospectRequest();\n   }\n \n+  @Test\n+  public void shouldNotReturnStudiesIfNoSitesForSuperAdmin() throws Exception {", "originalCommit": "108b766f7bc76c43013c9a99cb5298f707298ce1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjYwOTE1Mg==", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/pull/1765#discussion_r516609152", "bodyText": "moved to existing test case", "author": "Kantharajut-btc", "createdAt": "2020-11-03T11:48:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUyMDgwMw=="}], "type": "inlineReview"}, {"oid": "3f4b21511c62b37590695f753e2fbd17bbefe50e", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/3f4b21511c62b37590695f753e2fbd17bbefe50e", "message": "Fixed PR comments\n\nFixed PR comments", "committedDate": "2020-11-03T11:45:44Z", "type": "commit"}, {"oid": "e2d32c4562b07b47a5d5d27450151e66f43bcbce", "url": "https://github.com/GoogleCloudPlatform/fda-mystudies/commit/e2d32c4562b07b47a5d5d27450151e66f43bcbce", "message": "Merge branch 'develop' into partcipant-manager-issue-1755", "committedDate": "2020-11-04T02:36:12Z", "type": "commit"}]}