{"pr_number": 1661, "pr_title": "HIVE-24365: SWO should not create complex and redundant filter expressions", "pr_createdAt": "2020-11-11T09:11:31Z", "pr_url": "https://github.com/apache/hive/pull/1661", "timeline": [{"oid": "8a4d05b66feadbdaee0c323e3cd4bd261e6ebde3", "url": "https://github.com/apache/hive/commit/8a4d05b66feadbdaee0c323e3cd4bd261e6ebde3", "message": "make the switch", "committedDate": "2020-11-04T23:10:40Z", "type": "commit"}, {"oid": "fbfe28081700d701ea5e99463d3761bdae259d15", "url": "https://github.com/apache/hive/commit/fbfe28081700d701ea5e99463d3761bdae259d15", "message": "add test", "committedDate": "2020-11-04T23:12:11Z", "type": "commit"}, {"oid": "9d492cfead1594e8a40ac868c6a965dcb1c02250", "url": "https://github.com/apache/hive/commit/9d492cfead1594e8a40ac868c6a965dcb1c02250", "message": "add comment", "committedDate": "2020-11-04T23:14:35Z", "type": "commit"}, {"oid": "416c21d4e4c367edb17794845c35e4304e6f8784", "url": "https://github.com/apache/hive/commit/416c21d4e4c367edb17794845c35e4304e6f8784", "message": "changes", "committedDate": "2020-11-05T08:10:48Z", "type": "commit"}, {"oid": "25d1b1f6e30d4572e035ec9f5c809555056f4ec6", "url": "https://github.com/apache/hive/commit/25d1b1f6e30d4572e035ec9f5c809555056f4ec6", "message": "remove unrelated", "committedDate": "2020-11-05T08:11:01Z", "type": "commit"}, {"oid": "8d4bc3212ad9c306ddd3173d4079b50170aadead", "url": "https://github.com/apache/hive/commit/8d4bc3212ad9c306ddd3173d4079b50170aadead", "message": "add test out", "committedDate": "2020-11-05T08:15:39Z", "type": "commit"}, {"oid": "d3dea45cbc5c4f19ef0a4a103686859988e3106a", "url": "https://github.com/apache/hive/commit/d3dea45cbc5c4f19ef0a4a103686859988e3106a", "message": "re-do more complete check", "committedDate": "2020-11-05T09:30:42Z", "type": "commit"}, {"oid": "7cfc0d9f2caa1867573f11bdf7a26abe83deb012", "url": "https://github.com/apache/hive/commit/7cfc0d9f2caa1867573f11bdf7a26abe83deb012", "message": "log4j", "committedDate": "2020-11-05T09:30:52Z", "type": "commit"}, {"oid": "e70ec3cddbbd4410db9eee3379786177d758effe", "url": "https://github.com/apache/hive/commit/e70ec3cddbbd4410db9eee3379786177d758effe", "message": "orig graph changes from downstreammerge patch", "committedDate": "2020-11-05T09:33:20Z", "type": "commit"}, {"oid": "fe8e54a5ac35db1e9ace30274759a2dc9c97f064", "url": "https://github.com/apache/hive/commit/fe8e54a5ac35db1e9ace30274759a2dc9c97f064", "message": "graph changes", "committedDate": "2020-11-05T09:35:26Z", "type": "commit"}, {"oid": "dea05ee62634ba90035c5efb0b6956f12de49abf", "url": "https://github.com/apache/hive/commit/dea05ee62634ba90035c5efb0b6956f12de49abf", "message": "add javadoc", "committedDate": "2020-11-05T09:45:01Z", "type": "commit"}, {"oid": "6eefe4f74e7e96a75941738114356f30d23c417b", "url": "https://github.com/apache/hive/commit/6eefe4f74e7e96a75941738114356f30d23c417b", "message": "move stuff around", "committedDate": "2020-11-05T09:48:01Z", "type": "commit"}, {"oid": "47848f715f61263db4f6854f2b6400e23dd8a951", "url": "https://github.com/apache/hive/commit/47848f715f61263db4f6854f2b6400e23dd8a951", "message": "stricter dppu conditions", "committedDate": "2020-11-05T09:52:43Z", "type": "commit"}, {"oid": "bc75f375df4d65b75b79f52972d272e2a5094df0", "url": "https://github.com/apache/hive/commit/bc75f375df4d65b75b79f52972d272e2a5094df0", "message": "add check to avoid tail-to-head connected plans", "committedDate": "2020-11-05T09:54:30Z", "type": "commit"}, {"oid": "137cadf26ad40a7cd3d6ea4e244a2c51498439f5", "url": "https://github.com/apache/hive/commit/137cadf26ad40a7cd3d6ea4e244a2c51498439f5", "message": "move exporter to new file", "committedDate": "2020-11-05T10:50:49Z", "type": "commit"}, {"oid": "ae404cc4c312a7cb80318328a8e201435d46b32d", "url": "https://github.com/apache/hive/commit/ae404cc4c312a7cb80318328a8e201435d46b32d", "message": "fix import", "committedDate": "2020-11-05T14:14:53Z", "type": "commit"}, {"oid": "87bb01eff8986a99661842c388b6a8abb5aab497", "url": "https://github.com/apache/hive/commit/87bb01eff8986a99661842c388b6a8abb5aab497", "message": "dd", "committedDate": "2020-11-05T14:16:24Z", "type": "commit"}, {"oid": "e3396478e18e55c48b26a04b552fcb1f3aa454bc", "url": "https://github.com/apache/hive/commit/e3396478e18e55c48b26a04b552fcb1f3aa454bc", "message": "dppu", "committedDate": "2020-11-05T14:29:46Z", "type": "commit"}, {"oid": "67fb03da821de2956543eda883966e047d0b0c42", "url": "https://github.com/apache/hive/commit/67fb03da821de2956543eda883966e047d0b0c42", "message": "x0", "committedDate": "2020-11-05T14:47:06Z", "type": "commit"}, {"oid": "0dcc9d0d3c33fee1279bf8bf2663360655e4558f", "url": "https://github.com/apache/hive/commit/0dcc9d0d3c33fee1279bf8bf2663360655e4558f", "message": "ff", "committedDate": "2020-11-05T15:08:15Z", "type": "commit"}, {"oid": "a039e56911648cedb6c1babeb77f29e0629e3402", "url": "https://github.com/apache/hive/commit/a039e56911648cedb6c1babeb77f29e0629e3402", "message": "q.out updates", "committedDate": "2020-11-06T09:15:09Z", "type": "commit"}, {"oid": "4e8d5a3d49018bbd319e9d49eccd1a281946d4d1", "url": "https://github.com/apache/hive/commit/4e8d5a3d49018bbd319e9d49eccd1a281946d4d1", "message": "Merge remote-tracking branch 'kgyrtkirk/HIVE-24360-dppu-fix' into HIVE-24357-swo-table-algo", "committedDate": "2020-11-09T12:14:17Z", "type": "commit"}, {"oid": "2a4c7786d9f948f23f3e6160e06ec0b23e098070", "url": "https://github.com/apache/hive/commit/2a4c7786d9f948f23f3e6160e06ec0b23e098070", "message": "Merge remote-tracking branch 'apache/master' into HIVE-24357-swo-table-algo", "committedDate": "2020-11-10T07:44:47Z", "type": "commit"}, {"oid": "b81ecd3183b7798628609b31985afb9df1e6654c", "url": "https://github.com/apache/hive/commit/b81ecd3183b7798628609b31985afb9df1e6654c", "message": "remove multimap1", "committedDate": "2020-11-10T08:12:55Z", "type": "commit"}, {"oid": "692f0887f1ca1242d5d8728e09d688e2cb5b6607", "url": "https://github.com/apache/hive/commit/692f0887f1ca1242d5d8728e09d688e2cb5b6607", "message": "1 step closer", "committedDate": "2020-11-10T08:23:04Z", "type": "commit"}, {"oid": "df93a7a65d35e05c0cce904cfe083d0a37b1b5df", "url": "https://github.com/apache/hive/commit/df93a7a65d35e05c0cce904cfe083d0a37b1b5df", "message": "use tablename", "committedDate": "2020-11-10T08:26:08Z", "type": "commit"}, {"oid": "fd37d83cd7689a38a1a47825fea0906ea77dc600", "url": "https://github.com/apache/hive/commit/fd37d83cd7689a38a1a47825fea0906ea77dc600", "message": "half way", "committedDate": "2020-11-10T08:31:44Z", "type": "commit"}, {"oid": "4b01937b1eb95600be5c77ba5354ffaf99e2b0d2", "url": "https://github.com/apache/hive/commit/4b01937b1eb95600be5c77ba5354ffaf99e2b0d2", "message": "change signature", "committedDate": "2020-11-10T08:33:30Z", "type": "commit"}, {"oid": "03b02a80066b1a54d39fc7fdd83696e567dc9321", "url": "https://github.com/apache/hive/commit/03b02a80066b1a54d39fc7fdd83696e567dc9321", "message": "indent", "committedDate": "2020-11-10T08:33:58Z", "type": "commit"}, {"oid": "16d025b601593dd05776c21d054befd992349809", "url": "https://github.com/apache/hive/commit/16d025b601593dd05776c21d054befd992349809", "message": "inline/cleanup/etc", "committedDate": "2020-11-10T08:35:26Z", "type": "commit"}, {"oid": "d08f2cf2534955b5372a365ef0286f601b37d47e", "url": "https://github.com/apache/hive/commit/d08f2cf2534955b5372a365ef0286f601b37d47e", "message": "remove invalid ts -es from the list", "committedDate": "2020-11-10T09:23:59Z", "type": "commit"}, {"oid": "4e448964021fc485ea015e2b2b953fe4f423af85", "url": "https://github.com/apache/hive/commit/4e448964021fc485ea015e2b2b953fe4f423af85", "message": "fixes", "committedDate": "2020-11-10T09:46:02Z", "type": "commit"}, {"oid": "14f2a7bde9d83b52b2a12a01bd57ee0b0065322d", "url": "https://github.com/apache/hive/commit/14f2a7bde9d83b52b2a12a01bd57ee0b0065322d", "message": "save dot", "committedDate": "2020-11-10T11:17:13Z", "type": "commit"}, {"oid": "5623ee8e16611a2964ae39c53064ce886c30150d", "url": "https://github.com/apache/hive/commit/5623ee8e16611a2964ae39c53064ce886c30150d", "message": "Revert \"save dot\"\n\nThis reverts commit 14f2a7bde9d83b52b2a12a01bd57ee0b0065322d.", "committedDate": "2020-11-10T12:30:52Z", "type": "commit"}, {"oid": "6c0c942dea104637260ac1dccb1652764e652ec6", "url": "https://github.com/apache/hive/commit/6c0c942dea104637260ac1dccb1652764e652ec6", "message": "bad test", "committedDate": "2020-11-10T12:54:15Z", "type": "commit"}, {"oid": "dec61fe7d085a854d97eb5df9ab2ab7c1b6e74c8", "url": "https://github.com/apache/hive/commit/dec61fe7d085a854d97eb5df9ab2ab7c1b6e74c8", "message": "remove test", "committedDate": "2020-11-10T12:54:40Z", "type": "commit"}, {"oid": "f5dd73922b05cec2b19a7c89cccdabb3a4c38fd7", "url": "https://github.com/apache/hive/commit/f5dd73922b05cec2b19a7c89cccdabb3a4c38fd7", "message": "tabalias replace", "committedDate": "2020-11-10T16:03:29Z", "type": "commit"}, {"oid": "0c19ee5ac3a50f7d92ab2f6472d4fc72111511ce", "url": "https://github.com/apache/hive/commit/0c19ee5ac3a50f7d92ab2f6472d4fc72111511ce", "message": "add pushfiltertotopoftablescan changes as well", "committedDate": "2020-11-10T16:07:17Z", "type": "commit"}, {"oid": "5d99e3ba45be5094db084f829da6cc62f86cb300", "url": "https://github.com/apache/hive/commit/5d99e3ba45be5094db084f829da6cc62f86cb300", "message": "some conditionals are removed by the improved push filter to ts method", "committedDate": "2020-11-10T16:13:34Z", "type": "commit"}, {"oid": "b56126b244f03eaaef6fe7ae2d8a64f3fdb3163b", "url": "https://github.com/apache/hive/commit/b56126b244f03eaaef6fe7ae2d8a64f3fdb3163b", "message": "known-filter", "committedDate": "2020-11-10T16:58:55Z", "type": "commit"}, {"oid": "e0c6d6ec8390de6537105881d7f030f101bb530c", "url": "https://github.com/apache/hive/commit/e0c6d6ec8390de6537105881d7f030f101bb530c", "message": "Revert \"known-filter\"\n\nThis reverts commit b56126b244f03eaaef6fe7ae2d8a64f3fdb3163b.", "committedDate": "2020-11-10T16:59:00Z", "type": "commit"}, {"oid": "fb6bf5790675797f3836c101c2ee65221c8b33a8", "url": "https://github.com/apache/hive/commit/fb6bf5790675797f3836c101c2ee65221c8b33a8", "message": "update all", "committedDate": "2020-11-10T17:22:21Z", "type": "commit"}, {"oid": "92e0ba3722ab18d9dc4ba5112600440d2a4554d0", "url": "https://github.com/apache/hive/commit/92e0ba3722ab18d9dc4ba5112600440d2a4554d0", "message": "A || A => A", "committedDate": "2020-11-11T09:08:12Z", "type": "commit"}, {"oid": "bf5d05541af7f6ad49f9f83f26f87e0355dd5004", "url": "https://github.com/apache/hive/commit/bf5d05541af7f6ad49f9f83f26f87e0355dd5004", "message": "Merge remote-tracking branch 'kgyrtkirk/HIVE-24357-swo-table-algo' into HIVE-24365-swo-simpler-filters", "committedDate": "2020-11-11T09:09:13Z", "type": "commit"}, {"oid": "724176e005e6bf937f56dee8b89ef1bdab289ecc", "url": "https://github.com/apache/hive/commit/724176e005e6bf937f56dee8b89ef1bdab289ecc", "message": "Revert \"Revert \"known-filter\"\"\n\nThis reverts commit e0c6d6ec8390de6537105881d7f030f101bb530c.", "committedDate": "2020-11-11T09:10:32Z", "type": "commit"}, {"oid": "ccc3616b935085c8c93845a695fb3b9b3dc29de2", "url": "https://github.com/apache/hive/commit/ccc3616b935085c8c93845a695fb3b9b3dc29de2", "message": "q fixes", "committedDate": "2020-11-11T13:00:06Z", "type": "commit"}, {"oid": "62333b5804add8c74d504a0eb081a0edcb277272", "url": "https://github.com/apache/hive/commit/62333b5804add8c74d504a0eb081a0edcb277272", "message": "more thourouh replace of aliases", "committedDate": "2020-11-11T13:41:58Z", "type": "commit"}, {"oid": "b93c4ed2767b0e0245e5a3c95c2c17f14a038070", "url": "https://github.com/apache/hive/commit/b93c4ed2767b0e0245e5a3c95c2c17f14a038070", "message": "fix changes in special_..", "committedDate": "2020-11-11T14:25:26Z", "type": "commit"}, {"oid": "16406545f15dc57acbefc3289197f7531bdf4dc3", "url": "https://github.com/apache/hive/commit/16406545f15dc57acbefc3289197f7531bdf4dc3", "message": "Revert \"fix changes in special_..\"\n\nThis reverts commit b93c4ed2767b0e0245e5a3c95c2c17f14a038070.", "committedDate": "2020-11-11T14:42:56Z", "type": "commit"}, {"oid": "70e29315ca812a0c77a07f44f60702518984893f", "url": "https://github.com/apache/hive/commit/70e29315ca812a0c77a07f44f60702518984893f", "message": "enable back", "committedDate": "2020-11-11T15:00:03Z", "type": "commit"}, {"oid": "87272ba1bea4c3fdfa27d1040e3f51d9e853f39a", "url": "https://github.com/apache/hive/commit/87272ba1bea4c3fdfa27d1040e3f51d9e853f39a", "message": "enable stuff back; now I understand!", "committedDate": "2020-11-11T15:00:57Z", "type": "commit"}, {"oid": "a300ae693f2169cdb5e3d3d7898ada5fa8ee3044", "url": "https://github.com/apache/hive/commit/a300ae693f2169cdb5e3d3d7898ada5fa8ee3044", "message": "f", "committedDate": "2020-11-11T16:23:47Z", "type": "commit"}, {"oid": "83674516d72a3a4ca67b7f214253d5b2cc46f6fd", "url": "https://github.com/apache/hive/commit/83674516d72a3a4ca67b7f214253d5b2cc46f6fd", "message": "u", "committedDate": "2020-11-11T18:18:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY5MzcyOQ==", "url": "https://github.com/apache/hive/pull/1661#discussion_r522693729", "bodyText": "I am wondering whether replaceTabAlias should be in the operator conf (OperatorDesc). There is an AbstractOperatorDesc which could hold the default logic. Then it could be exposed here by simply calling conf.replaceTabAlias (single implementation for all operators).\nThe advantage that I see is that you would force any custom operator that does not inherit AbstractOperatorDesc to implement this method (I know we do not introduce such operators that much -or at all- but it seems to me it may make sense from the separation of concepts perspective).", "author": "jcamachor", "createdAt": "2020-11-13T06:50:14Z", "path": "ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java", "diffHunk": "@@ -1543,4 +1544,11 @@ public final boolean logicalEqualsTree(Operator<?> o) {\n     }\n     return true;\n   }\n+\n+  public void replaceTabAlias(String oldAlias, String newAlias) {", "originalCommit": "83674516d72a3a4ca67b7f214253d5b2cc46f6fd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjc1NzcyMw==", "url": "https://github.com/apache/hive/pull/1661#discussion_r522757723", "bodyText": "yes; it would make sense to do that - I've opened HIVE-24382", "author": "kgyrtkirk", "createdAt": "2020-11-13T07:58:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY5MzcyOQ=="}], "type": "inlineReview"}, {"oid": "0d1025e6b00cb202220436e7e444437bd2c038dc", "url": "https://github.com/apache/hive/commit/0d1025e6b00cb202220436e7e444437bd2c038dc", "message": "Merge remote-tracking branch 'apache/master' into HIVE-24357-swo-table-algo", "committedDate": "2020-11-13T07:46:11Z", "type": "commit"}, {"oid": "7b6e3c1c344fefd76796a987f659ffb6fa72c05e", "url": "https://github.com/apache/hive/commit/7b6e3c1c344fefd76796a987f659ffb6fa72c05e", "message": "Merge branch 'HIVE-24357-swo-table-algo' into HIVE-24365-swo-simpler-filters", "committedDate": "2020-11-13T07:46:39Z", "type": "commit"}]}