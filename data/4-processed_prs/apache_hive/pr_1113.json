{"pr_number": 1113, "pr_title": "HIVE-23697 : Fix errors in the metastore upgrade script", "pr_createdAt": "2020-06-15T15:21:45Z", "pr_url": "https://github.com/apache/hive/pull/1113", "timeline": [{"oid": "e11857f05e97cc4cedca3c941191f7a498676d5a", "url": "https://github.com/apache/hive/commit/e11857f05e97cc4cedca3c941191f7a498676d5a", "message": "HIVE-23697 : Fix errors in the metastore upgrade script", "committedDate": "2020-06-16T10:22:23Z", "type": "forcePushed"}, {"oid": "4960a4a2c6086b4abfb8d95c13ca6a8a9b94e902", "url": "https://github.com/apache/hive/commit/4960a4a2c6086b4abfb8d95c13ca6a8a9b94e902", "message": "HIVE-23697 : Fix errors in the metastore upgrade script", "committedDate": "2020-06-16T11:51:51Z", "type": "forcePushed"}, {"oid": "f61b428a46277d6ba9591b406335c04b1e621e11", "url": "https://github.com/apache/hive/commit/f61b428a46277d6ba9591b406335c04b1e621e11", "message": "HIVE-23697 : Fix errors in the metastore upgrade script", "committedDate": "2020-06-16T13:29:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg3NzE4OQ==", "url": "https://github.com/apache/hive/pull/1113#discussion_r440877189", "bodyText": "My guess is that this was caused by the difference between MySQL and MariaDB. If I remember correctly the test uses MariaDB. Could you please check manually with MySQL 5 and MySQL 8?\nThanks,\nPeter", "author": "pvary", "createdAt": "2020-06-16T14:04:34Z", "path": "standalone-metastore/metastore-server/src/main/sql/mysql/upgrade-3.2.0-to-4.0.0.mysql.sql", "diffHunk": "@@ -88,9 +88,9 @@ PREPARE stmt FROM @s;\n EXECUTE stmt;\n DEALLOCATE PREPARE stmt;\n RENAME TABLE NEXT_TXN_ID TO TXN_LOCK_TBL;\n-ALTER TABLE TXN_LOCK_TBL RENAME COLUMN NTXN_NEXT TO TXN_LOCK;\n+ALTER TABLE TXN_LOCK_TBL CHANGE NTXN_NEXT TXN_LOCK bigint;", "originalCommit": "f61b428a46277d6ba9591b406335c04b1e621e11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkwMzc3MA==", "url": "https://github.com/apache/hive/pull/1113#discussion_r440903770", "bodyText": "In Mysql 8 both the syntax works fine but in MySql 5.7 Rename fails.", "author": "aasha", "createdAt": "2020-06-16T14:39:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg3NzE4OQ=="}], "type": "inlineReview"}, {"oid": "e537314cecfe85f31feacaa552adef08d0d4460f", "url": "https://github.com/apache/hive/commit/e537314cecfe85f31feacaa552adef08d0d4460f", "message": "HIVE-23697 : Fix errors in the metastore upgrade script", "committedDate": "2020-06-17T06:09:30Z", "type": "forcePushed"}, {"oid": "d85879f83d9e51eedbb9395c7114616d71257836", "url": "https://github.com/apache/hive/commit/d85879f83d9e51eedbb9395c7114616d71257836", "message": "HIVE-23697 : Fix errors in the metastore upgrade script", "committedDate": "2020-06-17T06:12:04Z", "type": "forcePushed"}, {"oid": "d85879f83d9e51eedbb9395c7114616d71257836", "url": "https://github.com/apache/hive/commit/d85879f83d9e51eedbb9395c7114616d71257836", "message": "HIVE-23697 : Fix errors in the metastore upgrade script", "committedDate": "2020-06-17T06:12:04Z", "type": "forcePushed"}, {"oid": "aac476978ed864d0d917af08425899e0db1b18ce", "url": "https://github.com/apache/hive/commit/aac476978ed864d0d917af08425899e0db1b18ce", "message": "HIVE-23697 : Fix errors in the metastore upgrade script", "committedDate": "2020-06-18T11:56:10Z", "type": "commit"}, {"oid": "aac476978ed864d0d917af08425899e0db1b18ce", "url": "https://github.com/apache/hive/commit/aac476978ed864d0d917af08425899e0db1b18ce", "message": "HIVE-23697 : Fix errors in the metastore upgrade script", "committedDate": "2020-06-18T11:56:10Z", "type": "forcePushed"}]}