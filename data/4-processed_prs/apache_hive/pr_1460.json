{"pr_number": 1460, "pr_title": "Hive 24113", "pr_createdAt": "2020-09-02T20:05:40Z", "pr_url": "https://github.com/apache/hive/pull/1460", "timeline": [{"oid": "9356e8806f0c2bd5a59258408d4a91c6c4ab7663", "url": "https://github.com/apache/hive/commit/9356e8806f0c2bd5a59258408d4a91c6c4ab7663", "message": "Merge pull request #1 from apache/master\n\nsyncing forked repo using upstream - 05-29-2018", "committedDate": "2018-05-29T23:29:51Z", "type": "commit"}, {"oid": "ff83095bba9aceaf83dcc3dcea011f3e9f15d2fc", "url": "https://github.com/apache/hive/commit/ff83095bba9aceaf83dcc3dcea011f3e9f15d2fc", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2018-11-10T04:16:58Z", "type": "commit"}, {"oid": "e7ab4541e40a4755211131562ea9ac94ec013845", "url": "https://github.com/apache/hive/commit/e7ab4541e40a4755211131562ea9ac94ec013845", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2018-11-12T21:03:19Z", "type": "commit"}, {"oid": "b87f4af7d714f907e4dcd503c09228048b578ef2", "url": "https://github.com/apache/hive/commit/b87f4af7d714f907e4dcd503c09228048b578ef2", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-02-28T05:53:28Z", "type": "commit"}, {"oid": "d0bf01999555fd45e427c96e8f32978470385a53", "url": "https://github.com/apache/hive/commit/d0bf01999555fd45e427c96e8f32978470385a53", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-03-04T19:15:20Z", "type": "commit"}, {"oid": "2c3c26a201be3ebaff9c5eaf257b255902552f84", "url": "https://github.com/apache/hive/commit/2c3c26a201be3ebaff9c5eaf257b255902552f84", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-03-24T21:58:36Z", "type": "commit"}, {"oid": "c26b2f15d9f95c5c22f3dd2bd57a68fcc193321d", "url": "https://github.com/apache/hive/commit/c26b2f15d9f95c5c22f3dd2bd57a68fcc193321d", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-03-28T22:33:16Z", "type": "commit"}, {"oid": "a6131dedbb788556dc761285c94e29abc6ee49d3", "url": "https://github.com/apache/hive/commit/a6131dedbb788556dc761285c94e29abc6ee49d3", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-03-29T15:24:42Z", "type": "commit"}, {"oid": "3f83d0d080c7fff9b2367822b2a4f947a528ac44", "url": "https://github.com/apache/hive/commit/3f83d0d080c7fff9b2367822b2a4f947a528ac44", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-04-01T18:15:27Z", "type": "commit"}, {"oid": "2930b607b7a6389e527c2a42beaa277eea712551", "url": "https://github.com/apache/hive/commit/2930b607b7a6389e527c2a42beaa277eea712551", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-04-02T17:33:41Z", "type": "commit"}, {"oid": "28de80dc6595b23820b975006eef90f6f99271cf", "url": "https://github.com/apache/hive/commit/28de80dc6595b23820b975006eef90f6f99271cf", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-04-04T00:59:19Z", "type": "commit"}, {"oid": "d6c469894076445c06621847890db0df0788a4b5", "url": "https://github.com/apache/hive/commit/d6c469894076445c06621847890db0df0788a4b5", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-04-17T23:00:55Z", "type": "commit"}, {"oid": "10df87f2269ebf0b311cd4f5a54144a1d1f36e62", "url": "https://github.com/apache/hive/commit/10df87f2269ebf0b311cd4f5a54144a1d1f36e62", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-05-14T22:56:01Z", "type": "commit"}, {"oid": "d696e87a89ad9b8b1bdc8dca7c2477c45b1135f3", "url": "https://github.com/apache/hive/commit/d696e87a89ad9b8b1bdc8dca7c2477c45b1135f3", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-05-30T20:51:46Z", "type": "commit"}, {"oid": "e1d161d08d735e83c536c98047890c3a9ac0627f", "url": "https://github.com/apache/hive/commit/e1d161d08d735e83c536c98047890c3a9ac0627f", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-06-07T20:40:46Z", "type": "commit"}, {"oid": "dd00d0130ebb0cb17e4ef4191345929c8a6aa5e6", "url": "https://github.com/apache/hive/commit/dd00d0130ebb0cb17e4ef4191345929c8a6aa5e6", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-06-08T23:09:32Z", "type": "commit"}, {"oid": "0c487a830fa5e8f2dda36c4b35fbf6b959e1dae5", "url": "https://github.com/apache/hive/commit/0c487a830fa5e8f2dda36c4b35fbf6b959e1dae5", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-06-27T05:54:25Z", "type": "commit"}, {"oid": "cf73160ddb17e14f00270f16f59bd58726fea7f9", "url": "https://github.com/apache/hive/commit/cf73160ddb17e14f00270f16f59bd58726fea7f9", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-07-01T17:34:58Z", "type": "commit"}, {"oid": "2966320f1460598d96ad072d8b4ecd18826d64c6", "url": "https://github.com/apache/hive/commit/2966320f1460598d96ad072d8b4ecd18826d64c6", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-07-03T00:08:49Z", "type": "commit"}, {"oid": "c8b229e0638c1327ae000edaa6708dbe3ff3c60e", "url": "https://github.com/apache/hive/commit/c8b229e0638c1327ae000edaa6708dbe3ff3c60e", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-07-07T21:42:35Z", "type": "commit"}, {"oid": "5dc24803128fe0d7416810241b900e77f249aaa4", "url": "https://github.com/apache/hive/commit/5dc24803128fe0d7416810241b900e77f249aaa4", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-07-08T17:59:23Z", "type": "commit"}, {"oid": "452a15ea3bcf0cc3b13caa3dd5bf290f5efa70b3", "url": "https://github.com/apache/hive/commit/452a15ea3bcf0cc3b13caa3dd5bf290f5efa70b3", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-07-09T04:23:15Z", "type": "commit"}, {"oid": "03021f28579f46273c6bb9e14cb0d8e2edf94b2b", "url": "https://github.com/apache/hive/commit/03021f28579f46273c6bb9e14cb0d8e2edf94b2b", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-07-10T22:23:33Z", "type": "commit"}, {"oid": "4a0ac53b9fdf5a4928959e5885ab3407d924c36b", "url": "https://github.com/apache/hive/commit/4a0ac53b9fdf5a4928959e5885ab3407d924c36b", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-07-26T04:40:47Z", "type": "commit"}, {"oid": "b8a5d230377c412db74f51b06f069d886ba02c0a", "url": "https://github.com/apache/hive/commit/b8a5d230377c412db74f51b06f069d886ba02c0a", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-07-31T23:08:43Z", "type": "commit"}, {"oid": "eaa61164c1242e6f91101ac9e3ba2cfe137de46e", "url": "https://github.com/apache/hive/commit/eaa61164c1242e6f91101ac9e3ba2cfe137de46e", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-08-02T22:51:26Z", "type": "commit"}, {"oid": "f90630fd43e31962e6c0a1433ee6f1bf75ef98a4", "url": "https://github.com/apache/hive/commit/f90630fd43e31962e6c0a1433ee6f1bf75ef98a4", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-08-15T22:50:26Z", "type": "commit"}, {"oid": "0cec5671a408c78144ef1e716147273655b1ea9b", "url": "https://github.com/apache/hive/commit/0cec5671a408c78144ef1e716147273655b1ea9b", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-08-22T19:46:47Z", "type": "commit"}, {"oid": "ac29032cdc8069f1f47a9369aa91f5b6ff82279f", "url": "https://github.com/apache/hive/commit/ac29032cdc8069f1f47a9369aa91f5b6ff82279f", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-08-26T18:39:15Z", "type": "commit"}, {"oid": "0b958f50ba094a7fee696b88b85c89886efa6a8d", "url": "https://github.com/apache/hive/commit/0b958f50ba094a7fee696b88b85c89886efa6a8d", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-09-16T19:15:34Z", "type": "commit"}, {"oid": "094ea53742319da3c6a3fe976e2e6aa330c9e879", "url": "https://github.com/apache/hive/commit/094ea53742319da3c6a3fe976e2e6aa330c9e879", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-10-07T19:10:50Z", "type": "commit"}, {"oid": "e231fbe8766fa4bceb60ad355bb7bba747f8e6c0", "url": "https://github.com/apache/hive/commit/e231fbe8766fa4bceb60ad355bb7bba747f8e6c0", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-10-16T22:04:06Z", "type": "commit"}, {"oid": "fe3870423ec0fbe0659862edc826425492410f65", "url": "https://github.com/apache/hive/commit/fe3870423ec0fbe0659862edc826425492410f65", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-10-23T22:13:53Z", "type": "commit"}, {"oid": "519eb174c502740f468f45d8a985d500da2e4808", "url": "https://github.com/apache/hive/commit/519eb174c502740f468f45d8a985d500da2e4808", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-11-06T21:18:52Z", "type": "commit"}, {"oid": "f073eb005fd49e657a4fea7afc10c52836021ba5", "url": "https://github.com/apache/hive/commit/f073eb005fd49e657a4fea7afc10c52836021ba5", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-11-21T00:41:56Z", "type": "commit"}, {"oid": "fff0fc6f73e27a5fc860cc377aeae17e4d32cef2", "url": "https://github.com/apache/hive/commit/fff0fc6f73e27a5fc860cc377aeae17e4d32cef2", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2019-12-11T23:16:50Z", "type": "commit"}, {"oid": "00981a4be904eed888d342fd831f8c228fc0f1f4", "url": "https://github.com/apache/hive/commit/00981a4be904eed888d342fd831f8c228fc0f1f4", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-01-09T19:47:53Z", "type": "commit"}, {"oid": "81bf0923138150b32a1ddbea7152e9a986c6dc21", "url": "https://github.com/apache/hive/commit/81bf0923138150b32a1ddbea7152e9a986c6dc21", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-01-22T21:50:33Z", "type": "commit"}, {"oid": "1a94c8ce7392268eacb8e05367a9ed5f9b0e5a81", "url": "https://github.com/apache/hive/commit/1a94c8ce7392268eacb8e05367a9ed5f9b0e5a81", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-01-23T22:22:17Z", "type": "commit"}, {"oid": "d433ba6184ca3e21c7a7e3be57ec337f4cb64ebf", "url": "https://github.com/apache/hive/commit/d433ba6184ca3e21c7a7e3be57ec337f4cb64ebf", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-02-08T02:14:27Z", "type": "commit"}, {"oid": "f63c809f63b01bc9048df72a928015cf757859b3", "url": "https://github.com/apache/hive/commit/f63c809f63b01bc9048df72a928015cf757859b3", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-02-14T17:06:01Z", "type": "commit"}, {"oid": "b55f884342f2679f0dad73be5777067aa7a4c20e", "url": "https://github.com/apache/hive/commit/b55f884342f2679f0dad73be5777067aa7a4c20e", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-05-18T23:55:34Z", "type": "commit"}, {"oid": "0dca013df443e7fca07c6240d1bb667f16f5eb36", "url": "https://github.com/apache/hive/commit/0dca013df443e7fca07c6240d1bb667f16f5eb36", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-05-31T05:20:09Z", "type": "commit"}, {"oid": "34eb94e9fd1d8230afdbde5d1624a155270a320a", "url": "https://github.com/apache/hive/commit/34eb94e9fd1d8230afdbde5d1624a155270a320a", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-02T03:22:34Z", "type": "commit"}, {"oid": "f11427ad7d9d7ac501b31d343c188ce80d852971", "url": "https://github.com/apache/hive/commit/f11427ad7d9d7ac501b31d343c188ce80d852971", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-08T21:29:14Z", "type": "commit"}, {"oid": "9d73b091dc5aba14baf5afc51319ed9fb98c7d5a", "url": "https://github.com/apache/hive/commit/9d73b091dc5aba14baf5afc51319ed9fb98c7d5a", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-21T19:47:00Z", "type": "commit"}, {"oid": "ab1c824d3dd04091681dbb8bd68ee7747f8ea700", "url": "https://github.com/apache/hive/commit/ab1c824d3dd04091681dbb8bd68ee7747f8ea700", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-23T22:15:27Z", "type": "commit"}, {"oid": "c88e2b3c2a4d6c0b87bcc1d42d5e69f6ae739b97", "url": "https://github.com/apache/hive/commit/c88e2b3c2a4d6c0b87bcc1d42d5e69f6ae739b97", "message": "Hive 22255 : Hive don't trigger Major Compaction automatically if table contains only base files", "committedDate": "2020-06-24T18:44:25Z", "type": "commit"}, {"oid": "f36da89b23eec95ba5be4a7a6afe91c424529c93", "url": "https://github.com/apache/hive/commit/f36da89b23eec95ba5be4a7a6afe91c424529c93", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-20T21:13:52Z", "type": "commit"}, {"oid": "c99e1ec8089dc752437b4786de5e541711859805", "url": "https://github.com/apache/hive/commit/c99e1ec8089dc752437b4786de5e541711859805", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-31T17:59:51Z", "type": "commit"}, {"oid": "939ea2cfe5670a1c7f38a9a63901cf2beb20fb35", "url": "https://github.com/apache/hive/commit/939ea2cfe5670a1c7f38a9a63901cf2beb20fb35", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-13T20:44:01Z", "type": "commit"}, {"oid": "144af4b66b266ea4a9766b7694143e04483a7572", "url": "https://github.com/apache/hive/commit/144af4b66b266ea4a9766b7694143e04483a7572", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-09-02T19:41:08Z", "type": "commit"}, {"oid": "492a69ba81852b69eae7642badb14aed3d98f0d2", "url": "https://github.com/apache/hive/commit/492a69ba81852b69eae7642badb14aed3d98f0d2", "message": "HIVE-24113: NPE in GenericUDFToUnixTimeStamp", "committedDate": "2020-09-02T19:59:57Z", "type": "commit"}, {"oid": "6c478aa9b55316828fd96613c8191168344d823d", "url": "https://github.com/apache/hive/commit/6c478aa9b55316828fd96613c8191168344d823d", "message": "HIVE-24113: NPE in GenericUDFToUnixTimeStamp", "committedDate": "2020-09-07T05:30:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU3ODMwMg==", "url": "https://github.com/apache/hive/pull/1460#discussion_r488578302", "bodyText": "please don't start a new session here\n\nin case you don't have a session - you may read this info from a new HiveConf()\nbumping into this issue from the HMS side is kinda unexpected - could you please leave a note about why this is needed here\ncould you cover this issue with a testcase - or that's not possible because we are running embedded metastore in the tests?", "author": "kgyrtkirk", "createdAt": "2020-09-15T11:04:31Z", "path": "ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFFromUnixTime.java", "diffHunk": "@@ -107,6 +107,10 @@ public ObjectInspector initialize(ObjectInspector[] arguments) throws UDFArgumen\n     }\n \n     if (timeZone == null) {\n+      if (SessionState.get() == null) {\n+        SessionState ss = new SessionState(new HiveConf());\n+        SessionState.setCurrentSessionState(ss);", "originalCommit": "6c478aa9b55316828fd96613c8191168344d823d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDYwNzc5NA==", "url": "https://github.com/apache/hive/pull/1460#discussion_r490607794", "bodyText": "sorry I did not follow this correctly, I think SessionState will not be available in HMS, can you please guide me how can I retrieve it from new HiveConf(), do  you want me do something like new HiveConf().getLocalTimeZone() ?\nyes that's a rare case while filtering the partition by expression, a query with filter condition having timestamp/date as predicate e.g. following query\nselect * from table_name where hour between from_unixtime(unix_timestamp('2020090120', 'yyyyMMddHH') - 16060, 'yyyyMMddHH') and from_unixtime(unix_timestamp('2020090122', 'yyyyMMddHH') + 26060, 'yyyyMMddHH');\n\nin case of  PartitionExpressionForMetastore proxy, the filter expression is based on ql class/package and thats where user will see such exception.\n\nI think its difficult to reproduce with embedded HMS.", "author": "rajkrrsingh", "createdAt": "2020-09-17T23:00:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODU3ODMwMg=="}], "type": "inlineReview"}, {"oid": "97fd3621ec91c8ceda799e8ec0e151dda78fda96", "url": "https://github.com/apache/hive/commit/97fd3621ec91c8ceda799e8ec0e151dda78fda96", "message": "HIVE-24113: NPE in GenericUDFToUnixTimeStamp", "committedDate": "2020-10-23T04:46:46Z", "type": "commit"}]}