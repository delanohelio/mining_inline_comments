{"pr_number": 1562, "pr_title": "HIVE-24241: Enable SharedWorkOptimizer to merge downstream operators after an optimization step", "pr_createdAt": "2020-10-08T15:27:11Z", "pr_url": "https://github.com/apache/hive/pull/1562", "timeline": [{"oid": "41263f106265be71a40d636a87129a9171374120", "url": "https://github.com/apache/hive/commit/41263f106265be71a40d636a87129a9171374120", "message": "add operatorgraph fiolter stuff; fix q.outs", "committedDate": "2020-10-26T15:58:59Z", "type": "commit"}, {"oid": "831d6c9692919d96213b18e0292d30905fe1ae49", "url": "https://github.com/apache/hive/commit/831d6c9692919d96213b18e0292d30905fe1ae49", "message": "fix q32", "committedDate": "2020-10-26T17:41:07Z", "type": "commit"}, {"oid": "69ac728008ebf0471285dcd3753a7a9250600093", "url": "https://github.com/apache/hive/commit/69ac728008ebf0471285dcd3753a7a9250600093", "message": "Merge remote-tracking branch 'apache/master' into HIVE-24241-downstream-merge", "committedDate": "2020-10-26T19:57:56Z", "type": "commit"}, {"oid": "c9bb4e34974da7ab5d82cfd505aab96b228f4c36", "url": "https://github.com/apache/hive/commit/c9bb4e34974da7ab5d82cfd505aab96b228f4c36", "message": "disable TestJdbcWithMiniKdcSQLAuthHttp", "committedDate": "2020-10-26T20:31:51Z", "type": "commit"}, {"oid": "4d29896dbfb9555af64920cf764753f71c4b03e6", "url": "https://github.com/apache/hive/commit/4d29896dbfb9555af64920cf764753f71c4b03e6", "message": "Revert \"disable TestJdbcWithMiniKdcSQLAuthHttp\"\n\nThis reverts commit c9bb4e34974da7ab5d82cfd505aab96b228f4c36.", "committedDate": "2020-10-26T20:37:50Z", "type": "commit"}, {"oid": "c3dfc0ce5833cbf18df8fbfbd21b1ff90c1e277d", "url": "https://github.com/apache/hive/commit/c3dfc0ce5833cbf18df8fbfbd21b1ff90c1e277d", "message": "ok changes", "committedDate": "2020-10-27T09:59:55Z", "type": "commit"}, {"oid": "54281cbe27b6edbc1c1797f0922593969ae9eadd", "url": "https://github.com/apache/hive/commit/54281cbe27b6edbc1c1797f0922593969ae9eadd", "message": "ok changes", "committedDate": "2020-10-27T10:05:48Z", "type": "commit"}, {"oid": "021e00202961a37b7577e6a6bcdc0b2a229ab5ce", "url": "https://github.com/apache/hive/commit/021e00202961a37b7577e6a6bcdc0b2a229ab5ce", "message": "ok", "committedDate": "2020-10-27T10:35:53Z", "type": "commit"}, {"oid": "36d4b1894ae91a241f73c361f70e929eba60908c", "url": "https://github.com/apache/hive/commit/36d4b1894ae91a241f73c361f70e929eba60908c", "message": "ok", "committedDate": "2020-10-27T10:39:39Z", "type": "commit"}, {"oid": "1356bd1518f193c203262e31422431367ced3d2c", "url": "https://github.com/apache/hive/commit/1356bd1518f193c203262e31422431367ced3d2c", "message": "ok", "committedDate": "2020-10-27T11:01:21Z", "type": "commit"}, {"oid": "f1cb5fdd2aac888339f3a7fcae2cbf01b05b509c", "url": "https://github.com/apache/hive/commit/f1cb5fdd2aac888339f3a7fcae2cbf01b05b509c", "message": "accept q.outs; undo cleanup in vertex.java", "committedDate": "2020-10-27T15:18:36Z", "type": "commit"}, {"oid": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "url": "https://github.com/apache/hive/commit/14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "message": "remove toDot calls", "committedDate": "2020-10-28T18:23:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3MTUyNw==", "url": "https://github.com/apache/hive/pull/1562#discussion_r513671527", "bodyText": "@jcamachor this is the checker class I was talking about - right now it builds on top of the basic digraph class I've introduce some time ago in PointLookupOptimizer", "author": "kgyrtkirk", "createdAt": "2020-10-28T18:28:21Z", "path": "ql/src/java/org/apache/hadoop/hive/ql/optimizer/OperatorGraph.java", "diffHunk": "@@ -0,0 +1,231 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.hadoop.hive.ql.optimizer;\n+\n+import java.io.File;\n+import java.io.PrintWriter;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.LinkedHashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.apache.hadoop.hive.ql.exec.AppMasterEventOperator;\n+import org.apache.hadoop.hive.ql.exec.Operator;\n+import org.apache.hadoop.hive.ql.exec.ReduceSinkOperator;\n+import org.apache.hadoop.hive.ql.exec.TableScanOperator;\n+import org.apache.hadoop.hive.ql.optimizer.calcite.rules.HivePointLookupOptimizerRule.DiGraph;\n+import org.apache.hadoop.hive.ql.parse.ParseContext;\n+import org.apache.hadoop.hive.ql.parse.SemiJoinBranchInfo;\n+import org.apache.hadoop.hive.ql.plan.DynamicPruningEventDesc;\n+\n+import com.google.common.collect.Sets;\n+\n+public class OperatorGraph {", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDgwNTIxNQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514805215", "bodyText": "Looks good. Could we add comments so it is clear what it is being represented, e.g., what is a cluster, etc.", "author": "jcamachor", "createdAt": "2020-10-30T03:56:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3MTUyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3NDE4OQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r513674189", "bodyText": "we can definetly roll our own graph representation; however sometimes I would feel that it would make things easier to have access to basic graph algorithms (for example to do a  topological order walk/etc) there is a small library called jgrapht (EPL 2.0 license - I think it will be okay) which could be utilized for these kind of things\n@jcamachor what do you think about pulling in the jgrapht lib and removing the makeshift digraph classes?", "author": "kgyrtkirk", "createdAt": "2020-10-28T18:32:43Z", "path": "ql/src/java/org/apache/hadoop/hive/ql/optimizer/OperatorGraph.java", "diffHunk": "@@ -0,0 +1,231 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.hadoop.hive.ql.optimizer;\n+\n+import java.io.File;\n+import java.io.PrintWriter;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.LinkedHashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.apache.hadoop.hive.ql.exec.AppMasterEventOperator;\n+import org.apache.hadoop.hive.ql.exec.Operator;\n+import org.apache.hadoop.hive.ql.exec.ReduceSinkOperator;\n+import org.apache.hadoop.hive.ql.exec.TableScanOperator;\n+import org.apache.hadoop.hive.ql.optimizer.calcite.rules.HivePointLookupOptimizerRule.DiGraph;\n+import org.apache.hadoop.hive.ql.parse.ParseContext;\n+import org.apache.hadoop.hive.ql.parse.SemiJoinBranchInfo;\n+import org.apache.hadoop.hive.ql.plan.DynamicPruningEventDesc;\n+\n+import com.google.common.collect.Sets;\n+\n+public class OperatorGraph {\n+\n+  /**\n+   * A directed graph extended with support to check dag property.\n+   */\n+  static class DagGraph<V, E> extends DiGraph<V, E> {", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDgwMjIwNg==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514802206", "bodyText": "Yes, I think it's a good idea to use an established graph library for this. I think we could create a follow-up for that and discuss the license too, to make sure there is no issue. Any advantage to using jgrapht over Guava graph implementation, given that guava is already a Hive dependency and quite widely used?", "author": "jcamachor", "createdAt": "2020-10-30T03:53:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3NDE4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk1NDgyMA==", "url": "https://github.com/apache/hive/pull/1562#discussion_r517954820", "bodyText": "jgrapht has quite a few graph algorithms as well - guava would be a viable candidate if we don't yet have a graph class; but I think it doesn't give much more than that.\nI've moved these classes around - let's see how far we can get with these!", "author": "kgyrtkirk", "createdAt": "2020-11-05T10:43:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3NDE4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3NTcwMA==", "url": "https://github.com/apache/hive/pull/1562#discussion_r513675700", "bodyText": "this is not called from anywhere right now - but I've used it during debug to get a better understanding of the plan", "author": "kgyrtkirk", "createdAt": "2020-10-28T18:35:17Z", "path": "ql/src/java/org/apache/hadoop/hive/ql/optimizer/OperatorGraph.java", "diffHunk": "@@ -0,0 +1,231 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.hadoop.hive.ql.optimizer;\n+\n+import java.io.File;\n+import java.io.PrintWriter;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.LinkedHashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.apache.hadoop.hive.ql.exec.AppMasterEventOperator;\n+import org.apache.hadoop.hive.ql.exec.Operator;\n+import org.apache.hadoop.hive.ql.exec.ReduceSinkOperator;\n+import org.apache.hadoop.hive.ql.exec.TableScanOperator;\n+import org.apache.hadoop.hive.ql.optimizer.calcite.rules.HivePointLookupOptimizerRule.DiGraph;\n+import org.apache.hadoop.hive.ql.parse.ParseContext;\n+import org.apache.hadoop.hive.ql.parse.SemiJoinBranchInfo;\n+import org.apache.hadoop.hive.ql.plan.DynamicPruningEventDesc;\n+\n+import com.google.common.collect.Sets;\n+\n+public class OperatorGraph {\n+\n+  /**\n+   * A directed graph extended with support to check dag property.\n+   */\n+  static class DagGraph<V, E> extends DiGraph<V, E> {\n+\n+    static class DagNode<V, E> extends Node<V, E> {\n+      int dagIdx = 0;\n+      public DagNode(V v) {\n+        super(v);\n+      }\n+\n+      @Override\n+      public void addEdge(Edge<V, E> edge) {\n+        if (edge.s == this) {\n+          DagNode<V, E> t = (DagNode<V, E>) edge.t;\n+          ensureDagIdxAtLeast(t.dagIdx + 1);\n+          if (t.dagIdx > dagIdx) {\n+            throw new IllegalArgumentException(\"adding this edge would violate dag properties\");\n+          }\n+        }\n+        super.addEdge(edge);\n+      }\n+\n+      void ensureDagIdxAtLeast(int min) {\n+        if (dagIdx >= min) {\n+          return;\n+        }\n+        dagIdx = min;\n+        for (Edge<V, E> e : edges) {\n+          if(e.t == this) {\n+            DagNode<V, E> s = (DagNode<V, E>) e.s;\n+            s.ensureDagIdxAtLeast(min + 1);\n+          }\n+        }\n+      }\n+    }\n+\n+    @Override\n+    protected Node<V, E> newNode(V s) {\n+      return new DagNode<V, E>(s);\n+    }\n+  }\n+\n+  DagGraph<Operator<?>, OpEdge> g;\n+\n+  enum EdgeType {\n+    FLOW, SEMIJOIN, DPP, TEST,\n+  }\n+\n+  static class OpEdge {\n+\n+    private final EdgeType et;\n+    private final int index;\n+\n+    public OpEdge(EdgeType et) {\n+      this(et, 0);\n+    }\n+\n+    public OpEdge(EdgeType et, int index) {\n+      this.et = et;\n+      this.index = index;\n+    }\n+\n+  }\n+\n+\n+  Map<Operator<?>, Cluster> nodeCluster = new HashMap<>();\n+\n+  public class Cluster {\n+\n+    Set<Operator<?>> members = new LinkedHashSet<>();\n+\n+    public void merge(Cluster o) {\n+      for (Operator<?> node : o.members) {\n+        add(node);\n+      }\n+      o.members.clear();\n+    }\n+\n+    public void add(Operator<?> curr) {\n+      nodeCluster.put(curr, this);\n+      members.add(curr);\n+    }\n+\n+  }\n+\n+\n+  public OperatorGraph(ParseContext pctx) {\n+    g = new DagGraph<Operator<?>, OperatorGraph.OpEdge>();\n+    Set<Operator<?>> visited = Sets.newIdentityHashSet();\n+    Set<Operator<?>> seen = Sets.newIdentityHashSet();\n+\n+    seen.addAll(pctx.getTopOps().values());\n+    while (!seen.isEmpty()) {\n+      Operator<?> curr = seen.iterator().next();\n+      seen.remove(curr);\n+      if (visited.contains(curr)) {\n+        continue;\n+      }\n+\n+      visited.add(curr);\n+\n+      Cluster currentCluster = nodeCluster.get(curr);\n+      if (currentCluster == null) {\n+        currentCluster=new Cluster();\n+        currentCluster.add(curr);\n+      }\n+      List<Operator<?>> parents = curr.getParentOperators();\n+      for (int i = 0; i < parents.size(); i++) {\n+        Operator<?> p = parents.get(i);\n+        g.putEdgeValue(p, curr, new OpEdge(EdgeType.FLOW, i));\n+        if (p instanceof ReduceSinkOperator) {\n+          // ignore cluster of parent RS\n+          continue;\n+        }\n+        Cluster cluster = nodeCluster.get(p);\n+        if (cluster != null) {\n+          currentCluster.merge(cluster);\n+        } else {\n+          currentCluster.add(p);\n+        }\n+      }\n+\n+      SemiJoinBranchInfo sji = pctx.getRsToSemiJoinBranchInfo().get(curr);\n+      if (sji != null) {\n+        g.putEdgeValue(curr, sji.getTsOp(), new OpEdge(EdgeType.SEMIJOIN));\n+        seen.add(sji.getTsOp());\n+      }\n+      if (curr instanceof AppMasterEventOperator) {\n+        DynamicPruningEventDesc dped = (DynamicPruningEventDesc) curr.getConf();\n+        TableScanOperator ts = dped.getTableScan();\n+        g.putEdgeValue(curr, ts, new OpEdge(EdgeType.DPP));\n+        seen.add(ts);\n+      }\n+\n+      List<Operator<?>> ccc = curr.getChildOperators();\n+      for (Operator<?> operator : ccc) {\n+        seen.add(operator);\n+      }\n+    }\n+  }\n+\n+  public void toDot(File outFile) throws Exception {", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDc5NTgzOQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514795839", "bodyText": "Can we maybe move it to a utility class and add a comment? You could maybe move all these classes to optimizer.graph package", "author": "jcamachor", "createdAt": "2020-10-30T03:46:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3NTcwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk2MDAzNg==", "url": "https://github.com/apache/hive/pull/1562#discussion_r517960036", "bodyText": "yes; I've moved these classes - I use these methods during development; and they are very usefull; I needed to see the join tree - and I was able to extract a simple tree after a few minutes.\nI plan to expose this kind of information on the hs2 web interface in some way.", "author": "kgyrtkirk", "createdAt": "2020-11-05T10:51:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3NTcwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDgwMzQ4Nw==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514803487", "bodyText": "In the meantime, maybe DiGraph could be made a top class.", "author": "jcamachor", "createdAt": "2020-10-30T03:54:30Z", "path": "ql/src/java/org/apache/hadoop/hive/ql/optimizer/OperatorGraph.java", "diffHunk": "@@ -0,0 +1,231 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.hadoop.hive.ql.optimizer;\n+\n+import java.io.File;\n+import java.io.PrintWriter;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.LinkedHashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+\n+import org.apache.hadoop.hive.ql.exec.AppMasterEventOperator;\n+import org.apache.hadoop.hive.ql.exec.Operator;\n+import org.apache.hadoop.hive.ql.exec.ReduceSinkOperator;\n+import org.apache.hadoop.hive.ql.exec.TableScanOperator;\n+import org.apache.hadoop.hive.ql.optimizer.calcite.rules.HivePointLookupOptimizerRule.DiGraph;\n+import org.apache.hadoop.hive.ql.parse.ParseContext;\n+import org.apache.hadoop.hive.ql.parse.SemiJoinBranchInfo;\n+import org.apache.hadoop.hive.ql.plan.DynamicPruningEventDesc;\n+\n+import com.google.common.collect.Sets;\n+\n+public class OperatorGraph {\n+\n+  /**\n+   * A directed graph extended with support to check dag property.\n+   */\n+  static class DagGraph<V, E> extends DiGraph<V, E> {", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDgwODcwNQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514808705", "bodyText": "Left the comment in other class but I was thinking that it may be a good idea to promote this to top class (at least until we replace it by any other library version as we were discussing).", "author": "jcamachor", "createdAt": "2020-10-30T04:00:09Z", "path": "ql/src/java/org/apache/hadoop/hive/ql/optimizer/calcite/rules/HivePointLookupOptimizerRule.java", "diffHunk": "@@ -189,115 +189,121 @@ public RexNode analyzeRexNode(RexBuilder rexBuilder, RexNode condition) {\n     return newCondition;\n   }\n \n-  /**\n-   * Transforms inequality candidates into [NOT] BETWEEN calls.\n-   *\n-   */\n-  protected static class RexTransformIntoBetween extends RexShuttle {\n-    private final RexBuilder rexBuilder;\n+  public static class DiGraph<V, E> {", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDgxMjI2MQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514812261", "bodyText": "Note that the filter operator is removed. We need to be careful here because not all input formats guarantee that the filter expression is being applied / does not return false positives. I would expect the Filter remains but only a single time?", "author": "jcamachor", "createdAt": "2020-10-30T04:03:40Z", "path": "ql/src/test/results/clientpositive/llap/dynamic_partition_pruning.q.out", "diffHunk": "@@ -4277,37 +4277,21 @@ STAGE PLANS:\n                   alias: srcpart\n                   filterExpr: ds is not null (type: boolean)\n                   Statistics: Num rows: 2000 Data size: 389248 Basic stats: COMPLETE Column stats: COMPLETE\n-                  Filter Operator\n-                    predicate: ds is not null (type: boolean)", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDgxMzQzMw==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514813433", "bodyText": "Any idea why this is happening?", "author": "jcamachor", "createdAt": "2020-10-30T04:04:44Z", "path": "ql/src/test/results/clientpositive/llap/dynamic_partition_pruning.q.out", "diffHunk": "@@ -4317,7 +4301,7 @@ STAGE PLANS:\n                     outputColumnNames: ds\n                     Statistics: Num rows: 2000 Data size: 389248 Basic stats: COMPLETE Column stats: COMPLETE\n                     Group By Operator\n-                      aggregations: max(ds)\n+                      aggregations: min(ds)", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDgxMzk4OQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514813989", "bodyText": "Filter (same as mentioned previously).", "author": "jcamachor", "createdAt": "2020-10-30T04:05:12Z", "path": "ql/src/test/results/clientpositive/llap/vectorized_dynamic_partition_pruning.q.out", "diffHunk": "@@ -4816,34 +4816,18 @@ STAGE PLANS:\n                   alias: srcpart\n                   filterExpr: ds is not null (type: boolean)\n                   Statistics: Num rows: 2000 Data size: 389248 Basic stats: COMPLETE Column stats: COMPLETE\n-                  Filter Operator\n-                    predicate: ds is not null (type: boolean)", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDgxNTA5NQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514815095", "bodyText": "new SJ?", "author": "jcamachor", "createdAt": "2020-10-30T04:06:08Z", "path": "ql/src/test/results/clientpositive/perf/tez/constraints/query61.q.out", "diffHunk": "@@ -273,6 +273,6 @@ Stage-0\n                                     Select Operator [SEL_273] (rows=501694138 width=122)\n                                       Output:[\"_col0\",\"_col1\",\"_col2\",\"_col3\",\"_col4\"]\n                                       Filter Operator [FIL_271] (rows=501694138 width=122)\n-                                        predicate:(ss_sold_date_sk is not null and ss_customer_sk is not null and ss_store_sk is not null)\n+                                        predicate:(ss_sold_date_sk is not null and ss_customer_sk is not null and ss_store_sk is not null and ss_sold_date_sk BETWEEN DynamicValue(RS_64_date_dim_d_date_sk_min) AND DynamicValue(RS_64_date_dim_d_date_sk_max) and in_bloom_filter(ss_sold_date_sk, DynamicValue(RS_64_date_dim_d_date_sk_bloom_filter)))", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDgxNjUwMQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r514816501", "bodyText": "good!", "author": "jcamachor", "createdAt": "2020-10-30T04:07:23Z", "path": "ql/src/test/results/clientpositive/perf/tez/query95.q.out", "diffHunk": "@@ -128,7 +128,7 @@ Stage-0\n                                   Select Operator [SEL_235] (rows=144002668 width=7)\n                                     Output:[\"_col0\",\"_col1\"]\n                                     Filter Operator [FIL_234] (rows=144002668 width=7)\n-                                      predicate:(ws_order_number is not null and (ws_order_number is not null or ws_order_number is not null))\n+                                      predicate:ws_order_number is not null", "originalCommit": "14e001e3d08db27da0b4b4a6a3a65dacccbfacbc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8ba8231529de5d1ad7de90c74cd7d1c075beccc8", "url": "https://github.com/apache/hive/commit/8ba8231529de5d1ad7de90c74cd7d1c075beccc8", "message": "Merge remote-tracking branch 'apache/master' into HIVE-24241-downstream-merge", "committedDate": "2020-10-30T07:11:47Z", "type": "commit"}, {"oid": "8a4d05b66feadbdaee0c323e3cd4bd261e6ebde3", "url": "https://github.com/apache/hive/commit/8a4d05b66feadbdaee0c323e3cd4bd261e6ebde3", "message": "make the switch", "committedDate": "2020-11-04T23:10:40Z", "type": "commit"}, {"oid": "fbfe28081700d701ea5e99463d3761bdae259d15", "url": "https://github.com/apache/hive/commit/fbfe28081700d701ea5e99463d3761bdae259d15", "message": "add test", "committedDate": "2020-11-04T23:12:11Z", "type": "commit"}, {"oid": "9d492cfead1594e8a40ac868c6a965dcb1c02250", "url": "https://github.com/apache/hive/commit/9d492cfead1594e8a40ac868c6a965dcb1c02250", "message": "add comment", "committedDate": "2020-11-04T23:14:35Z", "type": "commit"}, {"oid": "416c21d4e4c367edb17794845c35e4304e6f8784", "url": "https://github.com/apache/hive/commit/416c21d4e4c367edb17794845c35e4304e6f8784", "message": "changes", "committedDate": "2020-11-05T08:10:48Z", "type": "commit"}, {"oid": "25d1b1f6e30d4572e035ec9f5c809555056f4ec6", "url": "https://github.com/apache/hive/commit/25d1b1f6e30d4572e035ec9f5c809555056f4ec6", "message": "remove unrelated", "committedDate": "2020-11-05T08:11:01Z", "type": "commit"}, {"oid": "8d4bc3212ad9c306ddd3173d4079b50170aadead", "url": "https://github.com/apache/hive/commit/8d4bc3212ad9c306ddd3173d4079b50170aadead", "message": "add test out", "committedDate": "2020-11-05T08:15:39Z", "type": "commit"}, {"oid": "d3dea45cbc5c4f19ef0a4a103686859988e3106a", "url": "https://github.com/apache/hive/commit/d3dea45cbc5c4f19ef0a4a103686859988e3106a", "message": "re-do more complete check", "committedDate": "2020-11-05T09:30:42Z", "type": "commit"}, {"oid": "7cfc0d9f2caa1867573f11bdf7a26abe83deb012", "url": "https://github.com/apache/hive/commit/7cfc0d9f2caa1867573f11bdf7a26abe83deb012", "message": "log4j", "committedDate": "2020-11-05T09:30:52Z", "type": "commit"}, {"oid": "e70ec3cddbbd4410db9eee3379786177d758effe", "url": "https://github.com/apache/hive/commit/e70ec3cddbbd4410db9eee3379786177d758effe", "message": "orig graph changes from downstreammerge patch", "committedDate": "2020-11-05T09:33:20Z", "type": "commit"}, {"oid": "fe8e54a5ac35db1e9ace30274759a2dc9c97f064", "url": "https://github.com/apache/hive/commit/fe8e54a5ac35db1e9ace30274759a2dc9c97f064", "message": "graph changes", "committedDate": "2020-11-05T09:35:26Z", "type": "commit"}, {"oid": "dea05ee62634ba90035c5efb0b6956f12de49abf", "url": "https://github.com/apache/hive/commit/dea05ee62634ba90035c5efb0b6956f12de49abf", "message": "add javadoc", "committedDate": "2020-11-05T09:45:01Z", "type": "commit"}, {"oid": "6eefe4f74e7e96a75941738114356f30d23c417b", "url": "https://github.com/apache/hive/commit/6eefe4f74e7e96a75941738114356f30d23c417b", "message": "move stuff around", "committedDate": "2020-11-05T09:48:01Z", "type": "commit"}, {"oid": "47848f715f61263db4f6854f2b6400e23dd8a951", "url": "https://github.com/apache/hive/commit/47848f715f61263db4f6854f2b6400e23dd8a951", "message": "stricter dppu conditions", "committedDate": "2020-11-05T09:52:43Z", "type": "commit"}, {"oid": "bc75f375df4d65b75b79f52972d272e2a5094df0", "url": "https://github.com/apache/hive/commit/bc75f375df4d65b75b79f52972d272e2a5094df0", "message": "add check to avoid tail-to-head connected plans", "committedDate": "2020-11-05T09:54:30Z", "type": "commit"}, {"oid": "137cadf26ad40a7cd3d6ea4e244a2c51498439f5", "url": "https://github.com/apache/hive/commit/137cadf26ad40a7cd3d6ea4e244a2c51498439f5", "message": "move exporter to new file", "committedDate": "2020-11-05T10:50:49Z", "type": "commit"}, {"oid": "ae404cc4c312a7cb80318328a8e201435d46b32d", "url": "https://github.com/apache/hive/commit/ae404cc4c312a7cb80318328a8e201435d46b32d", "message": "fix import", "committedDate": "2020-11-05T14:14:53Z", "type": "commit"}, {"oid": "87bb01eff8986a99661842c388b6a8abb5aab497", "url": "https://github.com/apache/hive/commit/87bb01eff8986a99661842c388b6a8abb5aab497", "message": "dd", "committedDate": "2020-11-05T14:16:24Z", "type": "commit"}, {"oid": "e3396478e18e55c48b26a04b552fcb1f3aa454bc", "url": "https://github.com/apache/hive/commit/e3396478e18e55c48b26a04b552fcb1f3aa454bc", "message": "dppu", "committedDate": "2020-11-05T14:29:46Z", "type": "commit"}, {"oid": "67fb03da821de2956543eda883966e047d0b0c42", "url": "https://github.com/apache/hive/commit/67fb03da821de2956543eda883966e047d0b0c42", "message": "x0", "committedDate": "2020-11-05T14:47:06Z", "type": "commit"}, {"oid": "0dcc9d0d3c33fee1279bf8bf2663360655e4558f", "url": "https://github.com/apache/hive/commit/0dcc9d0d3c33fee1279bf8bf2663360655e4558f", "message": "ff", "committedDate": "2020-11-05T15:08:15Z", "type": "commit"}, {"oid": "a039e56911648cedb6c1babeb77f29e0629e3402", "url": "https://github.com/apache/hive/commit/a039e56911648cedb6c1babeb77f29e0629e3402", "message": "q.out updates", "committedDate": "2020-11-06T09:15:09Z", "type": "commit"}, {"oid": "4e8d5a3d49018bbd319e9d49eccd1a281946d4d1", "url": "https://github.com/apache/hive/commit/4e8d5a3d49018bbd319e9d49eccd1a281946d4d1", "message": "Merge remote-tracking branch 'kgyrtkirk/HIVE-24360-dppu-fix' into HIVE-24357-swo-table-algo", "committedDate": "2020-11-09T12:14:17Z", "type": "commit"}, {"oid": "2a4c7786d9f948f23f3e6160e06ec0b23e098070", "url": "https://github.com/apache/hive/commit/2a4c7786d9f948f23f3e6160e06ec0b23e098070", "message": "Merge remote-tracking branch 'apache/master' into HIVE-24357-swo-table-algo", "committedDate": "2020-11-10T07:44:47Z", "type": "commit"}, {"oid": "474b9329fa45b05859f2a5410115d3021a800178", "url": "https://github.com/apache/hive/commit/474b9329fa45b05859f2a5410115d3021a800178", "message": "Merge remote-tracking branch 'apache/master' into HIVE-24241-downstream-merge", "committedDate": "2020-11-10T07:53:54Z", "type": "commit"}, {"oid": "b81ecd3183b7798628609b31985afb9df1e6654c", "url": "https://github.com/apache/hive/commit/b81ecd3183b7798628609b31985afb9df1e6654c", "message": "remove multimap1", "committedDate": "2020-11-10T08:12:55Z", "type": "commit"}, {"oid": "692f0887f1ca1242d5d8728e09d688e2cb5b6607", "url": "https://github.com/apache/hive/commit/692f0887f1ca1242d5d8728e09d688e2cb5b6607", "message": "1 step closer", "committedDate": "2020-11-10T08:23:04Z", "type": "commit"}, {"oid": "df93a7a65d35e05c0cce904cfe083d0a37b1b5df", "url": "https://github.com/apache/hive/commit/df93a7a65d35e05c0cce904cfe083d0a37b1b5df", "message": "use tablename", "committedDate": "2020-11-10T08:26:08Z", "type": "commit"}, {"oid": "fd37d83cd7689a38a1a47825fea0906ea77dc600", "url": "https://github.com/apache/hive/commit/fd37d83cd7689a38a1a47825fea0906ea77dc600", "message": "half way", "committedDate": "2020-11-10T08:31:44Z", "type": "commit"}, {"oid": "4b01937b1eb95600be5c77ba5354ffaf99e2b0d2", "url": "https://github.com/apache/hive/commit/4b01937b1eb95600be5c77ba5354ffaf99e2b0d2", "message": "change signature", "committedDate": "2020-11-10T08:33:30Z", "type": "commit"}, {"oid": "03b02a80066b1a54d39fc7fdd83696e567dc9321", "url": "https://github.com/apache/hive/commit/03b02a80066b1a54d39fc7fdd83696e567dc9321", "message": "indent", "committedDate": "2020-11-10T08:33:58Z", "type": "commit"}, {"oid": "16d025b601593dd05776c21d054befd992349809", "url": "https://github.com/apache/hive/commit/16d025b601593dd05776c21d054befd992349809", "message": "inline/cleanup/etc", "committedDate": "2020-11-10T08:35:26Z", "type": "commit"}, {"oid": "d08f2cf2534955b5372a365ef0286f601b37d47e", "url": "https://github.com/apache/hive/commit/d08f2cf2534955b5372a365ef0286f601b37d47e", "message": "remove invalid ts -es from the list", "committedDate": "2020-11-10T09:23:59Z", "type": "commit"}, {"oid": "4e448964021fc485ea015e2b2b953fe4f423af85", "url": "https://github.com/apache/hive/commit/4e448964021fc485ea015e2b2b953fe4f423af85", "message": "fixes", "committedDate": "2020-11-10T09:46:02Z", "type": "commit"}, {"oid": "14f2a7bde9d83b52b2a12a01bd57ee0b0065322d", "url": "https://github.com/apache/hive/commit/14f2a7bde9d83b52b2a12a01bd57ee0b0065322d", "message": "save dot", "committedDate": "2020-11-10T11:17:13Z", "type": "commit"}, {"oid": "5623ee8e16611a2964ae39c53064ce886c30150d", "url": "https://github.com/apache/hive/commit/5623ee8e16611a2964ae39c53064ce886c30150d", "message": "Revert \"save dot\"\n\nThis reverts commit 14f2a7bde9d83b52b2a12a01bd57ee0b0065322d.", "committedDate": "2020-11-10T12:30:52Z", "type": "commit"}, {"oid": "6c0c942dea104637260ac1dccb1652764e652ec6", "url": "https://github.com/apache/hive/commit/6c0c942dea104637260ac1dccb1652764e652ec6", "message": "bad test", "committedDate": "2020-11-10T12:54:15Z", "type": "commit"}, {"oid": "dec61fe7d085a854d97eb5df9ab2ab7c1b6e74c8", "url": "https://github.com/apache/hive/commit/dec61fe7d085a854d97eb5df9ab2ab7c1b6e74c8", "message": "remove test", "committedDate": "2020-11-10T12:54:40Z", "type": "commit"}, {"oid": "f5dd73922b05cec2b19a7c89cccdabb3a4c38fd7", "url": "https://github.com/apache/hive/commit/f5dd73922b05cec2b19a7c89cccdabb3a4c38fd7", "message": "tabalias replace", "committedDate": "2020-11-10T16:03:29Z", "type": "commit"}, {"oid": "0c19ee5ac3a50f7d92ab2f6472d4fc72111511ce", "url": "https://github.com/apache/hive/commit/0c19ee5ac3a50f7d92ab2f6472d4fc72111511ce", "message": "add pushfiltertotopoftablescan changes as well", "committedDate": "2020-11-10T16:07:17Z", "type": "commit"}, {"oid": "5d99e3ba45be5094db084f829da6cc62f86cb300", "url": "https://github.com/apache/hive/commit/5d99e3ba45be5094db084f829da6cc62f86cb300", "message": "some conditionals are removed by the improved push filter to ts method", "committedDate": "2020-11-10T16:13:34Z", "type": "commit"}, {"oid": "b56126b244f03eaaef6fe7ae2d8a64f3fdb3163b", "url": "https://github.com/apache/hive/commit/b56126b244f03eaaef6fe7ae2d8a64f3fdb3163b", "message": "known-filter", "committedDate": "2020-11-10T16:58:55Z", "type": "commit"}, {"oid": "e0c6d6ec8390de6537105881d7f030f101bb530c", "url": "https://github.com/apache/hive/commit/e0c6d6ec8390de6537105881d7f030f101bb530c", "message": "Revert \"known-filter\"\n\nThis reverts commit b56126b244f03eaaef6fe7ae2d8a64f3fdb3163b.", "committedDate": "2020-11-10T16:59:00Z", "type": "commit"}, {"oid": "fb6bf5790675797f3836c101c2ee65221c8b33a8", "url": "https://github.com/apache/hive/commit/fb6bf5790675797f3836c101c2ee65221c8b33a8", "message": "update all", "committedDate": "2020-11-10T17:22:21Z", "type": "commit"}, {"oid": "92e0ba3722ab18d9dc4ba5112600440d2a4554d0", "url": "https://github.com/apache/hive/commit/92e0ba3722ab18d9dc4ba5112600440d2a4554d0", "message": "A || A => A", "committedDate": "2020-11-11T09:08:12Z", "type": "commit"}, {"oid": "bf5d05541af7f6ad49f9f83f26f87e0355dd5004", "url": "https://github.com/apache/hive/commit/bf5d05541af7f6ad49f9f83f26f87e0355dd5004", "message": "Merge remote-tracking branch 'kgyrtkirk/HIVE-24357-swo-table-algo' into HIVE-24365-swo-simpler-filters", "committedDate": "2020-11-11T09:09:13Z", "type": "commit"}, {"oid": "724176e005e6bf937f56dee8b89ef1bdab289ecc", "url": "https://github.com/apache/hive/commit/724176e005e6bf937f56dee8b89ef1bdab289ecc", "message": "Revert \"Revert \"known-filter\"\"\n\nThis reverts commit e0c6d6ec8390de6537105881d7f030f101bb530c.", "committedDate": "2020-11-11T09:10:32Z", "type": "commit"}, {"oid": "ccc3616b935085c8c93845a695fb3b9b3dc29de2", "url": "https://github.com/apache/hive/commit/ccc3616b935085c8c93845a695fb3b9b3dc29de2", "message": "q fixes", "committedDate": "2020-11-11T13:00:06Z", "type": "commit"}, {"oid": "62333b5804add8c74d504a0eb081a0edcb277272", "url": "https://github.com/apache/hive/commit/62333b5804add8c74d504a0eb081a0edcb277272", "message": "more thourouh replace of aliases", "committedDate": "2020-11-11T13:41:58Z", "type": "commit"}, {"oid": "b93c4ed2767b0e0245e5a3c95c2c17f14a038070", "url": "https://github.com/apache/hive/commit/b93c4ed2767b0e0245e5a3c95c2c17f14a038070", "message": "fix changes in special_..", "committedDate": "2020-11-11T14:25:26Z", "type": "commit"}, {"oid": "16406545f15dc57acbefc3289197f7531bdf4dc3", "url": "https://github.com/apache/hive/commit/16406545f15dc57acbefc3289197f7531bdf4dc3", "message": "Revert \"fix changes in special_..\"\n\nThis reverts commit b93c4ed2767b0e0245e5a3c95c2c17f14a038070.", "committedDate": "2020-11-11T14:42:56Z", "type": "commit"}, {"oid": "70e29315ca812a0c77a07f44f60702518984893f", "url": "https://github.com/apache/hive/commit/70e29315ca812a0c77a07f44f60702518984893f", "message": "enable back", "committedDate": "2020-11-11T15:00:03Z", "type": "commit"}, {"oid": "87272ba1bea4c3fdfa27d1040e3f51d9e853f39a", "url": "https://github.com/apache/hive/commit/87272ba1bea4c3fdfa27d1040e3f51d9e853f39a", "message": "enable stuff back; now I understand!", "committedDate": "2020-11-11T15:00:57Z", "type": "commit"}, {"oid": "a300ae693f2169cdb5e3d3d7898ada5fa8ee3044", "url": "https://github.com/apache/hive/commit/a300ae693f2169cdb5e3d3d7898ada5fa8ee3044", "message": "f", "committedDate": "2020-11-11T16:23:47Z", "type": "commit"}, {"oid": "83674516d72a3a4ca67b7f214253d5b2cc46f6fd", "url": "https://github.com/apache/hive/commit/83674516d72a3a4ca67b7f214253d5b2cc46f6fd", "message": "u", "committedDate": "2020-11-11T18:18:50Z", "type": "commit"}, {"oid": "b6d3eb6d8b48f3b8806ad619aa78d5dfde28a2b8", "url": "https://github.com/apache/hive/commit/b6d3eb6d8b48f3b8806ad619aa78d5dfde28a2b8", "message": "unpatch", "committedDate": "2020-11-12T14:50:36Z", "type": "commit"}, {"oid": "158ee54e89f74e3d2d9add8738e7dc1d765d69f8", "url": "https://github.com/apache/hive/commit/158ee54e89f74e3d2d9add8738e7dc1d765d69f8", "message": "Merge remote-tracking branch 'kgyrtkirk/HIVE-24365-swo-simpler-filters' into HIVE-24241-downstream-merge", "committedDate": "2020-11-12T14:51:02Z", "type": "commit"}, {"oid": "0fda6451cd43b84954c71ed5552d1f432e6e20f2", "url": "https://github.com/apache/hive/commit/0fda6451cd43b84954c71ed5552d1f432e6e20f2", "message": "add back downstreammer", "committedDate": "2020-11-12T17:25:06Z", "type": "commit"}, {"oid": "d87b1d9127f736b5f95603fc21830a68720c61c4", "url": "https://github.com/apache/hive/commit/d87b1d9127f736b5f95603fc21830a68720c61c4", "message": "some changed back and a few improvements", "committedDate": "2020-11-12T19:54:34Z", "type": "commit"}, {"oid": "a36bd965aaca150a73a0e1bb1b678c25f301c76c", "url": "https://github.com/apache/hive/commit/a36bd965aaca150a73a0e1bb1b678c25f301c76c", "message": "Merge remote-tracking branch 'apache/master' into HIVE-24365-swo-simpler-filters", "committedDate": "2020-11-13T07:59:17Z", "type": "commit"}, {"oid": "9a6732cb9d6088703c93f7c01ea8bf39dccb53a7", "url": "https://github.com/apache/hive/commit/9a6732cb9d6088703c93f7c01ea8bf39dccb53a7", "message": "Merge branch 'HIVE-24365-swo-simpler-filters' into HIVE-24241-downstream-merge", "committedDate": "2020-11-13T07:59:38Z", "type": "commit"}, {"oid": "af0863b1318e6e38866ec420e4116eb6bdd4b9ec", "url": "https://github.com/apache/hive/commit/af0863b1318e6e38866ec420e4116eb6bdd4b9ec", "message": "existing work", "committedDate": "2020-10-05T14:36:08Z", "type": "commit"}, {"oid": "92ce37b832749aa6c813dafad9774da89a4ecdac", "url": "https://github.com/apache/hive/commit/92ce37b832749aa6c813dafad9774da89a4ecdac", "message": "add semi;", "committedDate": "2020-10-05T14:36:46Z", "type": "commit"}, {"oid": "3d5607da61ddf1943e4b0a9a031e467a6ce430c4", "url": "https://github.com/apache/hive/commit/3d5607da61ddf1943e4b0a9a031e467a6ce430c4", "message": "smi", "committedDate": "2020-10-05T14:40:14Z", "type": "commit"}, {"oid": "59c3d1f1641964969e3d18b6071264b038298931", "url": "https://github.com/apache/hive/commit/59c3d1f1641964969e3d18b6071264b038298931", "message": "x", "committedDate": "2020-10-05T16:05:44Z", "type": "commit"}, {"oid": "758c900cf823d9106ec6248d0aa587fa0fac3f49", "url": "https://github.com/apache/hive/commit/758c900cf823d9106ec6248d0aa587fa0fac3f49", "message": "remove exception", "committedDate": "2020-10-05T16:42:29Z", "type": "commit"}, {"oid": "1ee6e173f55c851517290960ff185c5375952b25", "url": "https://github.com/apache/hive/commit/1ee6e173f55c851517290960ff185c5375952b25", "message": "update tpcds", "committedDate": "2020-10-05T16:45:17Z", "type": "commit"}, {"oid": "d67efb6868282cbbb4c8e397b996ab2e35c390e1", "url": "https://github.com/apache/hive/commit/d67efb6868282cbbb4c8e397b996ab2e35c390e1", "message": "remove typo", "committedDate": "2020-10-05T16:49:56Z", "type": "commit"}, {"oid": "38470efc8211bc572ea2e73f23270528d2b50205", "url": "https://github.com/apache/hive/commit/38470efc8211bc572ea2e73f23270528d2b50205", "message": "update", "committedDate": "2020-10-06T07:03:57Z", "type": "commit"}, {"oid": "4bb84bf202b9918d40d4dd1abd901b8cb1c7b5c1", "url": "https://github.com/apache/hive/commit/4bb84bf202b9918d40d4dd1abd901b8cb1c7b5c1", "message": "disable dppu", "committedDate": "2020-10-06T07:10:04Z", "type": "commit"}, {"oid": "afd8a66a92cbd18ef99992112ac031d619f6485b", "url": "https://github.com/apache/hive/commit/afd8a66a92cbd18ef99992112ac031d619f6485b", "message": "add comment", "committedDate": "2020-10-06T07:20:04Z", "type": "commit"}, {"oid": "6c54baaabaefae4192b062caeb008540c9e5e37d", "url": "https://github.com/apache/hive/commit/6c54baaabaefae4192b062caeb008540c9e5e37d", "message": "add comment+fix", "committedDate": "2020-10-06T07:43:25Z", "type": "commit"}, {"oid": "e889d4b8db5ab1941025f43620f535cd164ae6c9", "url": "https://github.com/apache/hive/commit/e889d4b8db5ab1941025f43620f535cd164ae6c9", "message": "update mergeablecheck", "committedDate": "2020-10-06T08:00:23Z", "type": "commit"}, {"oid": "4a87c2ff86976e9f024b902b4f7d5a8054e3c576", "url": "https://github.com/apache/hive/commit/4a87c2ff86976e9f024b902b4f7d5a8054e3c576", "message": "q.out updates", "committedDate": "2020-10-06T08:28:24Z", "type": "commit"}, {"oid": "7d1584d89f5e606941b781bcdffe54873995003c", "url": "https://github.com/apache/hive/commit/7d1584d89f5e606941b781bcdffe54873995003c", "message": "update", "committedDate": "2020-10-06T08:38:49Z", "type": "commit"}, {"oid": "b43cb827ba2a0b2973e27e87422e62eb8678c724", "url": "https://github.com/apache/hive/commit/b43cb827ba2a0b2973e27e87422e62eb8678c724", "message": "en-x", "committedDate": "2020-10-06T12:55:00Z", "type": "commit"}, {"oid": "261fdcc93a6b6e15cdf96daaf8726d0636f7b725", "url": "https://github.com/apache/hive/commit/261fdcc93a6b6e15cdf96daaf8726d0636f7b725", "message": "Revert \"en-x\"\n\nThis reverts commit b43cb827ba2a0b2973e27e87422e62eb8678c724.", "committedDate": "2020-10-06T13:15:56Z", "type": "commit"}, {"oid": "c35896fb5ebaefcb742d257462f0685bab44cbc9", "url": "https://github.com/apache/hive/commit/c35896fb5ebaefcb742d257462f0685bab44cbc9", "message": "qqqqqqqqqqqqqqqqRevert \"Revert \"en-x\"\"\n\nThis reverts commit 261fdcc93a6b6e15cdf96daaf8726d0636f7b725.", "committedDate": "2020-10-06T13:21:42Z", "type": "commit"}, {"oid": "34c4423bdd30a1220f5c0bf9def94eefc70b847c", "url": "https://github.com/apache/hive/commit/34c4423bdd30a1220f5c0bf9def94eefc70b847c", "message": "accept q.out; small updates", "committedDate": "2020-10-06T15:48:04Z", "type": "commit"}, {"oid": "0320b9a2da55856ad9071d28725705798586cc0f", "url": "https://github.com/apache/hive/commit/0320b9a2da55856ad9071d28725705798586cc0f", "message": "accept dyn-op", "committedDate": "2020-10-07T08:06:56Z", "type": "commit"}, {"oid": "8c41061f78c969a9d33f058e56d7269f64f45d5a", "url": "https://github.com/apache/hive/commit/8c41061f78c969a9d33f058e56d7269f64f45d5a", "message": "update messages", "committedDate": "2020-10-07T08:25:55Z", "type": "commit"}, {"oid": "8d33c6ebc65ad04e7d4316a4d3c000007de8eef4", "url": "https://github.com/apache/hive/commit/8d33c6ebc65ad04e7d4316a4d3c000007de8eef4", "message": "updates", "committedDate": "2020-10-07T08:37:55Z", "type": "commit"}, {"oid": "e5b14a1c445d4618f3a3415b9c145eb561e6144d", "url": "https://github.com/apache/hive/commit/e5b14a1c445d4618f3a3415b9c145eb561e6144d", "message": "downstreammerge", "committedDate": "2020-10-07T09:06:23Z", "type": "commit"}, {"oid": "dda3523ff6342bc8452afd9bf002774edd25f805", "url": "https://github.com/apache/hive/commit/dda3523ff6342bc8452afd9bf002774edd25f805", "message": "fixes to downstream merge", "committedDate": "2020-10-07T11:18:57Z", "type": "commit"}, {"oid": "6f4faeaa9c2fa9604116bfaf6ac83d702ff10dbd", "url": "https://github.com/apache/hive/commit/6f4faeaa9c2fa9604116bfaf6ac83d702ff10dbd", "message": "remove fixme", "committedDate": "2020-10-07T11:38:31Z", "type": "commit"}, {"oid": "9b18ff94f42916b87c6441ebbcb98a5b9baa713e", "url": "https://github.com/apache/hive/commit/9b18ff94f42916b87c6441ebbcb98a5b9baa713e", "message": "fix npe", "committedDate": "2020-10-07T12:55:06Z", "type": "commit"}, {"oid": "ad629eb1e8ee19f949f66d577b3999895521abeb", "url": "https://github.com/apache/hive/commit/ad629eb1e8ee19f949f66d577b3999895521abeb", "message": "remove downstream-merge", "committedDate": "2020-10-07T12:56:35Z", "type": "commit"}, {"oid": "d1a62b4bc4c12ddb79332d669eae885457dc6792", "url": "https://github.com/apache/hive/commit/d1a62b4bc4c12ddb79332d669eae885457dc6792", "message": "accepted q.out changes", "committedDate": "2020-10-07T13:25:41Z", "type": "commit"}, {"oid": "610b7892c03fdd24a9e4c16f3998e6a1b7d4ed8b", "url": "https://github.com/apache/hive/commit/610b7892c03fdd24a9e4c16f3998e6a1b7d4ed8b", "message": "fix bug", "committedDate": "2020-10-07T14:29:18Z", "type": "commit"}, {"oid": "94608ec4b45105b752c0c9c9ed8766489060a60d", "url": "https://github.com/apache/hive/commit/94608ec4b45105b752c0c9c9ed8766489060a60d", "message": "back to 0 diff", "committedDate": "2020-10-07T15:04:06Z", "type": "commit"}, {"oid": "d4f41a311a592f0398413f9b29bfc6458022f88b", "url": "https://github.com/apache/hive/commit/d4f41a311a592f0398413f9b29bfc6458022f88b", "message": "fix", "committedDate": "2020-10-07T15:04:16Z", "type": "commit"}, {"oid": "06cfe04f9fcc2f3412c68fe7e062b930898b4bfc", "url": "https://github.com/apache/hive/commit/06cfe04f9fcc2f3412c68fe7e062b930898b4bfc", "message": "accept q.outs", "committedDate": "2020-10-07T15:15:49Z", "type": "commit"}, {"oid": "8d7b4f50611e6743a64e4b9d369f3f92e608b84b", "url": "https://github.com/apache/hive/commit/8d7b4f50611e6743a64e4b9d369f3f92e608b84b", "message": "accept syubquery_in", "committedDate": "2020-10-07T15:16:08Z", "type": "commit"}, {"oid": "15e5eff1e8bd9d97d16ce6e2a98b0c611611eb7b", "url": "https://github.com/apache/hive/commit/15e5eff1e8bd9d97d16ce6e2a98b0c611611eb7b", "message": "Revert \"remove downstream-merge\"\n\nThis reverts commit ad629eb1e8ee19f949f66d577b3999895521abeb.", "committedDate": "2020-10-07T15:16:22Z", "type": "commit"}, {"oid": "a97ac5117b5795c1a00805b8de81b0db76b9f887", "url": "https://github.com/apache/hive/commit/a97ac5117b5795c1a00805b8de81b0db76b9f887", "message": "Revert \"Revert \"remove downstream-merge\"\"\n\nThis reverts commit 15e5eff1e8bd9d97d16ce6e2a98b0c611611eb7b.", "committedDate": "2020-10-07T19:53:04Z", "type": "commit"}, {"oid": "e1021490b12c4289ee03b61ff85680d22d7d9843", "url": "https://github.com/apache/hive/commit/e1021490b12c4289ee03b61ff85680d22d7d9843", "message": "q.out updates", "committedDate": "2020-10-07T20:16:12Z", "type": "commit"}, {"oid": "aaccbdc062291001850b5d824565930b498d67c3", "url": "https://github.com/apache/hive/commit/aaccbdc062291001850b5d824565930b498d67c3", "message": "fix union", "committedDate": "2020-10-07T20:55:04Z", "type": "commit"}, {"oid": "9838961e57ebe20765ad7a046fc4283ec7b7f1f4", "url": "https://github.com/apache/hive/commit/9838961e57ebe20765ad7a046fc4283ec7b7f1f4", "message": "x", "committedDate": "2020-10-07T21:03:29Z", "type": "commit"}, {"oid": "90607e86627c57fe41e0db0f9f9d5f7764d87c71", "url": "https://github.com/apache/hive/commit/90607e86627c57fe41e0db0f9f9d5f7764d87c71", "message": "q5 back", "committedDate": "2020-10-07T21:08:36Z", "type": "commit"}, {"oid": "5656c7dc20fa1f904374b44b30270f7987f5b1de", "url": "https://github.com/apache/hive/commit/5656c7dc20fa1f904374b44b30270f7987f5b1de", "message": "changes relating to removal of downstream-merge", "committedDate": "2020-10-08T07:34:37Z", "type": "commit"}, {"oid": "199fee4b3bc338e0d5c153a9f8063c47f9bd9474", "url": "https://github.com/apache/hive/commit/199fee4b3bc338e0d5c153a9f8063c47f9bd9474", "message": "fix recompilation in SWO", "committedDate": "2020-10-08T07:37:54Z", "type": "commit"}, {"oid": "831c708df50f3cf433b35fe2c19d0e41f330d197", "url": "https://github.com/apache/hive/commit/831c708df50f3cf433b35fe2c19d0e41f330d197", "message": "Merge remote-tracking branch 'apache/master' into HIVE-swo-dppunion", "committedDate": "2020-10-08T08:16:42Z", "type": "commit"}, {"oid": "18678dc0b15bd11592eccf5929f8d0dabf25160d", "url": "https://github.com/apache/hive/commit/18678dc0b15bd11592eccf5929f8d0dabf25160d", "message": "remove logger changes", "committedDate": "2020-10-08T08:17:48Z", "type": "commit"}, {"oid": "f672130cc66044edbcb5718bb5ec7fdfb4368329", "url": "https://github.com/apache/hive/commit/f672130cc66044edbcb5718bb5ec7fdfb4368329", "message": "remove ws change", "committedDate": "2020-10-08T08:18:23Z", "type": "commit"}, {"oid": "b0d9aef86a0aaca6acc1e3d0f68a126b0eb8c6a7", "url": "https://github.com/apache/hive/commit/b0d9aef86a0aaca6acc1e3d0f68a126b0eb8c6a7", "message": "remove non-finished test", "committedDate": "2020-10-08T08:24:30Z", "type": "commit"}, {"oid": "e9bb99199899fc87048e680a04c086169782b2eb", "url": "https://github.com/apache/hive/commit/e9bb99199899fc87048e680a04c086169782b2eb", "message": "cleanup", "committedDate": "2020-10-08T09:42:03Z", "type": "commit"}, {"oid": "b0ad188febb7ff1d0617518188735ee5a19e077d", "url": "https://github.com/apache/hive/commit/b0ad188febb7ff1d0617518188735ee5a19e077d", "message": "Revert \"changes relating to removal of downstream-merge\"\n\nThis reverts commit 5656c7dc20fa1f904374b44b30270f7987f5b1de.", "committedDate": "2020-10-08T11:05:29Z", "type": "commit"}, {"oid": "ccaf2f4ab2073f1d556f432d4bc35974304b6baa", "url": "https://github.com/apache/hive/commit/ccaf2f4ab2073f1d556f432d4bc35974304b6baa", "message": "Revert \"Revert \"Revert \"remove downstream-merge\"\"\"\n\nThis reverts commit a97ac5117b5795c1a00805b8de81b0db76b9f887.", "committedDate": "2020-10-08T11:05:37Z", "type": "commit"}, {"oid": "887eaed203d4dc1e6ac727871980ec2ab709bd39", "url": "https://github.com/apache/hive/commit/887eaed203d4dc1e6ac727871980ec2ab709bd39", "message": "sort-u back", "committedDate": "2020-10-08T11:13:21Z", "type": "commit"}, {"oid": "cdf139c5af5b1ee9eafd7865b474f46168925864", "url": "https://github.com/apache/hive/commit/cdf139c5af5b1ee9eafd7865b474f46168925864", "message": "fix", "committedDate": "2020-10-08T14:35:15Z", "type": "commit"}, {"oid": "1b3d81bf50e6e5d57edf8e091fd4683398371c24", "url": "https://github.com/apache/hive/commit/1b3d81bf50e6e5d57edf8e091fd4683398371c24", "message": "perf changes", "committedDate": "2020-10-08T15:20:47Z", "type": "commit"}, {"oid": "c981deadbdae4d9f103364f635a4c5e6faa3ef2e", "url": "https://github.com/apache/hive/commit/c981deadbdae4d9f103364f635a4c5e6faa3ef2e", "message": "q.out updates", "committedDate": "2020-10-08T15:26:13Z", "type": "commit"}, {"oid": "5098909d9c00eebb7449011fb7fba3c19dee9ce6", "url": "https://github.com/apache/hive/commit/5098909d9c00eebb7449011fb7fba3c19dee9ce6", "message": "remove ws", "committedDate": "2020-10-08T16:11:31Z", "type": "commit"}, {"oid": "92f2951bf50a65abe655e952c22520abbd14caa4", "url": "https://github.com/apache/hive/commit/92f2951bf50a65abe655e952c22520abbd14caa4", "message": "archive testresult-xmls", "committedDate": "2020-10-08T20:18:52Z", "type": "commit"}, {"oid": "260cdd3f87d225320d157759e877d003b023f231", "url": "https://github.com/apache/hive/commit/260cdd3f87d225320d157759e877d003b023f231", "message": "\\Merge remote-tracking branch 'kgyrtkirk/HIVE-swo-dppunion' into HIVE-24241-downstream-merge", "committedDate": "2020-10-08T20:19:15Z", "type": "commit"}, {"oid": "8f3d6cc4b1613dfceefb6e97c7693b11536cde68", "url": "https://github.com/apache/hive/commit/8f3d6cc4b1613dfceefb6e97c7693b11536cde68", "message": "q5 to nochange", "committedDate": "2020-10-08T20:20:02Z", "type": "commit"}, {"oid": "c210b8e48e5e3e593315764c7a946b22502e1ddc", "url": "https://github.com/apache/hive/commit/c210b8e48e5e3e593315764c7a946b22502e1ddc", "message": "archive results for each split", "committedDate": "2020-10-09T07:27:12Z", "type": "commit"}, {"oid": "6abc1ac36fcdb9dcaab91539fb55ffa8bccb4444", "url": "https://github.com/apache/hive/commit/6abc1ac36fcdb9dcaab91539fb55ffa8bccb4444", "message": "create test-results.tgz archive", "committedDate": "2020-10-09T08:14:23Z", "type": "commit"}, {"oid": "b4b9ce11e6b591ff702c43b847a2780da96afe9c", "url": "https://github.com/apache/hive/commit/b4b9ce11e6b591ff702c43b847a2780da96afe9c", "message": "fix typo", "committedDate": "2020-10-09T12:18:21Z", "type": "commit"}, {"oid": "31ddb97bf412a2679489a5a0d45d335d2708005c", "url": "https://github.com/apache/hive/commit/31ddb97bf412a2679489a5a0d45d335d2708005c", "message": "use surefire M5", "committedDate": "2020-10-09T12:34:06Z", "type": "commit"}, {"oid": "92bff0ebe500afc6503af99350e20105b22234ce", "url": "https://github.com/apache/hive/commit/92bff0ebe500afc6503af99350e20105b22234ce", "message": "Merge remote-tracking branches 'apache/master' and 'kgyrtkirk/HIVE-swo-dppunion' into HIVE-24241-downstream-merge", "committedDate": "2020-10-09T15:57:14Z", "type": "commit"}, {"oid": "03d23d1d489c2601b370a67458dd7e535c38b26f", "url": "https://github.com/apache/hive/commit/03d23d1d489c2601b370a67458dd7e535c38b26f", "message": "Merge remote-tracking branch 'apache/master' into HIVE-24241-downstream-merge", "committedDate": "2020-10-12T09:48:35Z", "type": "commit"}, {"oid": "053281c5e09a49caed5f00f494a15a77e4934fa5", "url": "https://github.com/apache/hive/commit/053281c5e09a49caed5f00f494a15a77e4934fa5", "message": "Merge remote-tracking branch 'apache/master' into HIVE-swo-dppunion", "committedDate": "2020-10-12T09:48:52Z", "type": "commit"}, {"oid": "520598f64691f0193be270b81d74a90eb9b8bcd7", "url": "https://github.com/apache/hive/commit/520598f64691f0193be270b81d74a90eb9b8bcd7", "message": "upgrade to M5 in other parts", "committedDate": "2020-10-12T10:31:34Z", "type": "commit"}, {"oid": "35fccf29e537fbb2c31d493ec9d9cacb3927897e", "url": "https://github.com/apache/hive/commit/35fccf29e537fbb2c31d493ec9d9cacb3927897e", "message": "remove HIVE-24624 related stuff", "committedDate": "2020-10-12T12:34:35Z", "type": "commit"}, {"oid": "84685724bc2c874e1d53640e8d4dccdd2d2605f8", "url": "https://github.com/apache/hive/commit/84685724bc2c874e1d53640e8d4dccdd2d2605f8", "message": "remove feature disable from subq tests", "committedDate": "2020-10-12T12:34:51Z", "type": "commit"}, {"oid": "b336b842e36a363d96ed8ec33d09d122fbe3ce6b", "url": "https://github.com/apache/hive/commit/b336b842e36a363d96ed8ec33d09d122fbe3ce6b", "message": "remove set from explain", "committedDate": "2020-10-12T12:54:20Z", "type": "commit"}, {"oid": "9e07afdd178f5abf75a985609f05ca3dab50c53b", "url": "https://github.com/apache/hive/commit/9e07afdd178f5abf75a985609f05ca3dab50c53b", "message": "update qfiles; go back to simpler changes", "committedDate": "2020-10-12T13:45:31Z", "type": "commit"}, {"oid": "e775b74ce740ab162a7164b7bad6652fd3c25d34", "url": "https://github.com/apache/hive/commit/e775b74ce740ab162a7164b7bad6652fd3c25d34", "message": "tests back to master state", "committedDate": "2020-10-13T08:24:02Z", "type": "commit"}, {"oid": "a54fc6a506dbb6ef603cac61fe0a04c3835fc990", "url": "https://github.com/apache/hive/commit/a54fc6a506dbb6ef603cac61fe0a04c3835fc990", "message": "cleanup", "committedDate": "2020-10-13T08:34:47Z", "type": "commit"}, {"oid": "c3087ae830ab55683b3ea06d6b664c6c8f15b1dd", "url": "https://github.com/apache/hive/commit/c3087ae830ab55683b3ea06d6b664c6c8f15b1dd", "message": "removal of ()", "committedDate": "2020-10-13T08:43:42Z", "type": "commit"}, {"oid": "70e4ac2e0f910ce1fd33984e183cd68e696abf1a", "url": "https://github.com/apache/hive/commit/70e4ac2e0f910ce1fd33984e183cd68e696abf1a", "message": "removal of ()", "committedDate": "2020-10-13T08:44:10Z", "type": "commit"}, {"oid": "acec785a26c159a5534afbd3875c99bb51b5232c", "url": "https://github.com/apache/hive/commit/acec785a26c159a5534afbd3875c99bb51b5232c", "message": "cleanup; move functions; address review comments", "committedDate": "2020-10-13T09:48:58Z", "type": "commit"}, {"oid": "7fa1eef1491570d93fb231561ab245f4504053ef", "url": "https://github.com/apache/hive/commit/7fa1eef1491570d93fb231561ab245f4504053ef", "message": "use adoptchildren", "committedDate": "2020-10-13T09:55:15Z", "type": "commit"}, {"oid": "c1e35d3e5c0bccd20ce51b223ec6aca189378c64", "url": "https://github.com/apache/hive/commit/c1e35d3e5c0bccd20ce51b223ec6aca189378c64", "message": "add doc to mode", "committedDate": "2020-10-13T10:36:50Z", "type": "commit"}, {"oid": "e771fba3c7552dea31ac69e534573c7fd1eafbfb", "url": "https://github.com/apache/hive/commit/e771fba3c7552dea31ac69e534573c7fd1eafbfb", "message": "pending changes", "committedDate": "2020-10-13T10:37:29Z", "type": "commit"}, {"oid": "818cbe21e2475a873c73de44783895390d21a9b3", "url": "https://github.com/apache/hive/commit/818cbe21e2475a873c73de44783895390d21a9b3", "message": "Merge remote-tracking branch 'kgyrtkirk/HIVE-swo-dppunion' into HIVE-24241-downstream-merge", "committedDate": "2020-10-13T11:08:06Z", "type": "commit"}, {"oid": "824c6342b0fad22a13f021f39ff7523111c4f721", "url": "https://github.com/apache/hive/commit/824c6342b0fad22a13f021f39ff7523111c4f721", "message": "updates", "committedDate": "2020-10-13T11:55:39Z", "type": "commit"}, {"oid": "c5a4be684dfad6a695e43184fb374bf2d0ae0183", "url": "https://github.com/apache/hive/commit/c5a4be684dfad6a695e43184fb374bf2d0ae0183", "message": "accept removal", "committedDate": "2020-10-13T11:59:47Z", "type": "commit"}, {"oid": "0dbeb438c37517c3f2f4072cd35a400a6f97087d", "url": "https://github.com/apache/hive/commit/0dbeb438c37517c3f2f4072cd35a400a6f97087d", "message": "addition of filter to DPP", "committedDate": "2020-10-13T12:09:33Z", "type": "commit"}, {"oid": "3e405e39752933ca5e92e07f2ca2c813b1191193", "url": "https://github.com/apache/hive/commit/3e405e39752933ca5e92e07f2ca2c813b1191193", "message": "fix", "committedDate": "2020-10-13T12:45:46Z", "type": "commit"}, {"oid": "02d1bac9763d753b88f40cc4d9322e8b93b543b6", "url": "https://github.com/apache/hive/commit/02d1bac9763d753b88f40cc4d9322e8b93b543b6", "message": "tabalias", "committedDate": "2020-10-14T14:29:19Z", "type": "commit"}, {"oid": "5849891872fe5103f86d5a5195891307c4d0f2d1", "url": "https://github.com/apache/hive/commit/5849891872fe5103f86d5a5195891307c4d0f2d1", "message": "perf", "committedDate": "2020-10-14T17:15:24Z", "type": "commit"}, {"oid": "3c462f5ba042c7faa549f1e95276364b715eb14b", "url": "https://github.com/apache/hive/commit/3c462f5ba042c7faa549f1e95276364b715eb14b", "message": "simplify filter expr - but stats have regressed?", "committedDate": "2020-10-14T23:05:02Z", "type": "commit"}, {"oid": "635cecb5f4717b1aadbf3f8d967ad76d183442a2", "url": "https://github.com/apache/hive/commit/635cecb5f4717b1aadbf3f8d967ad76d183442a2", "message": "disable tsm; trial with sort", "committedDate": "2020-10-14T23:43:22Z", "type": "commit"}, {"oid": "7a66a78fe207383d8ed7df2689f96dac24b094b4", "url": "https://github.com/apache/hive/commit/7a66a78fe207383d8ed7df2689f96dac24b094b4", "message": "q.out updates", "committedDate": "2020-10-15T06:29:57Z", "type": "commit"}, {"oid": "4d1ddbe41abf19c0743d40c8d14024dafdca58db", "url": "https://github.com/apache/hive/commit/4d1ddbe41abf19c0743d40c8d14024dafdca58db", "message": "fix usage of shaded class", "committedDate": "2020-10-15T13:58:22Z", "type": "commit"}, {"oid": "eb838519efa42fdfa68ccad92bd6e961f488d696", "url": "https://github.com/apache/hive/commit/eb838519efa42fdfa68ccad92bd6e961f488d696", "message": "fix npe?", "committedDate": "2020-10-16T22:12:11Z", "type": "commit"}, {"oid": "16110f64c3b657478d787d1018c68487220fe1e8", "url": "https://github.com/apache/hive/commit/16110f64c3b657478d787d1018c68487220fe1e8", "message": "update q.outs", "committedDate": "2020-10-16T22:32:29Z", "type": "commit"}, {"oid": "5b42a544e5e320b8b3950355ac504d17c646dd10", "url": "https://github.com/apache/hive/commit/5b42a544e5e320b8b3950355ac504d17c646dd10", "message": "update", "committedDate": "2020-10-19T06:06:02Z", "type": "commit"}, {"oid": "20c20ff914dc88323622171178a2f633f52250a7", "url": "https://github.com/apache/hive/commit/20c20ff914dc88323622171178a2f633f52250a7", "message": "fix typo", "committedDate": "2020-10-20T11:55:35Z", "type": "commit"}, {"oid": "ce9095a9e711ab8fbc34bc57043cf0fa1cf12385", "url": "https://github.com/apache/hive/commit/ce9095a9e711ab8fbc34bc57043cf0fa1cf12385", "message": "Merge commit 'apache/master^' into HIVE-24241-downstream-merge", "committedDate": "2020-10-20T12:00:06Z", "type": "commit"}, {"oid": "7f454baffbbc04a1aa3f2383d6f70dbd9207356d", "url": "https://github.com/apache/hive/commit/7f454baffbbc04a1aa3f2383d6f70dbd9207356d", "message": "rev-all", "committedDate": "2020-10-20T12:00:41Z", "type": "commit"}, {"oid": "7f438b7a35914053c2a5114711c14e79b9f2227a", "url": "https://github.com/apache/hive/commit/7f438b7a35914053c2a5114711c14e79b9f2227a", "message": "Merge remote-tracking branch 'apache/master' into HIVE-24241-downstream-merge", "committedDate": "2020-10-20T12:00:46Z", "type": "commit"}, {"oid": "2949f20287d3921b08fe0a056413d4f8741a085d", "url": "https://github.com/apache/hive/commit/2949f20287d3921b08fe0a056413d4f8741a085d", "message": "re-apply", "committedDate": "2020-10-20T12:01:12Z", "type": "commit"}, {"oid": "b500b7565b777e8c4fb4518e8272e5f22450d033", "url": "https://github.com/apache/hive/commit/b500b7565b777e8c4fb4518e8272e5f22450d033", "message": "remove schema-merge", "committedDate": "2020-10-22T09:34:35Z", "type": "commit"}, {"oid": "1bf2bfec22675262ec099ec2140df65f53f3a0e6", "url": "https://github.com/apache/hive/commit/1bf2bfec22675262ec099ec2140df65f53f3a0e6", "message": "remove nonrelated", "committedDate": "2020-10-22T15:40:11Z", "type": "commit"}, {"oid": "0d801e4f838909d80112d7067816a954fb937397", "url": "https://github.com/apache/hive/commit/0d801e4f838909d80112d7067816a954fb937397", "message": "updateq.ours", "committedDate": "2020-10-22T20:36:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcwODczMA==", "url": "https://github.com/apache/hive/pull/1562#discussion_r511708730", "bodyText": "nit. typo 'successfull'", "author": "jcamachor", "createdAt": "2020-10-26T03:59:55Z", "path": "common/src/java/org/apache/hadoop/hive/conf/HiveConf.java", "diffHunk": "@@ -2595,6 +2595,8 @@ private static void populateLlapDaemonVarsSet(Set<String> llapDaemonVarsSetLocal\n     HIVE_SHARED_WORK_DPPUNION_OPTIMIZATION(\"hive.optimize.shared.work.dppunion\", true,\n         \"Enables dppops unioning. This optimization will enable to merge multiple tablescans with different \"\n             + \"dynamic filters into a single one (with a more complex filter)\"),\n+    HIVE_SHARED_WORK_DOWNSTREAM_MERGE(\"hive.optimize.shared.work.downstream.merge\", true,\n+        \"Analyzes and merges equiv downstream operators after a successfull shared work optimization step.\"),", "originalCommit": "0d801e4f838909d80112d7067816a954fb937397", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcxNzIxMw==", "url": "https://github.com/apache/hive/pull/1562#discussion_r511717213", "bodyText": "SJ is gone. Is this expected?", "author": "jcamachor", "createdAt": "2020-10-26T04:43:54Z", "path": "ql/src/test/results/clientpositive/perf/tez/constraints/query32.q.out", "diffHunk": "@@ -160,7 +160,7 @@ Stage-0\n                                     Select Operator [SEL_115] (rows=286549727 width=119)\n                                       Output:[\"_col0\",\"_col1\",\"_col2\"]\n                                       Filter Operator [FIL_113] (rows=286549727 width=119)\n-                                        predicate:(cs_sold_date_sk is not null and cs_item_sk BETWEEN DynamicValue(RS_28_item_i_item_sk_min) AND DynamicValue(RS_28_item_i_item_sk_max) and in_bloom_filter(cs_item_sk, DynamicValue(RS_28_item_i_item_sk_bloom_filter)))", "originalCommit": "0d801e4f838909d80112d7067816a954fb937397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4NDgyNQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r512584825", "bodyText": "conditional was not reconstructed properly during filter creation - fixed", "author": "kgyrtkirk", "createdAt": "2020-10-27T10:45:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcxNzIxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcyNjY0Nw==", "url": "https://github.com/apache/hive/pull/1562#discussion_r511726647", "bodyText": "I think you could use ExprNodeDescExprFactory.isANDFuncCallExpr or FunctionRegistry.isOpAnd(expr)?", "author": "jcamachor", "createdAt": "2020-10-26T05:30:44Z", "path": "ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDescUtils.java", "diffHunk": "@@ -1136,4 +1173,30 @@ public static boolean isOr(ExprNodeDesc expr) {\n     return false;\n   }\n \n+  public static boolean isAnd(ExprNodeDesc expr) {\n+    if (expr instanceof ExprNodeGenericFuncDesc) {", "originalCommit": "0d801e4f838909d80112d7067816a954fb937397", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcyNzQ2MA==", "url": "https://github.com/apache/hive/pull/1562#discussion_r511727460", "bodyText": "Iirc we order the expressions intentionally in such a way that the rest of expressions are evaluated before the SJ expression, since the probe of the bloom filter is usually more expensive than evaluating other expressions (heuristic).", "author": "jcamachor", "createdAt": "2020-10-26T05:34:37Z", "path": "ql/src/test/results/clientpositive/llap/sharedwork_semi.q.out", "diffHunk": "@@ -541,7 +541,7 @@ STAGE PLANS:\n             Map Operator Tree:\n                 TableScan\n                   alias: s\n-                  filterExpr: (ss_sold_date_sk is not null and ((ss_sold_date_sk BETWEEN DynamicValue(RS_7_d_d_date_sk_min) AND DynamicValue(RS_7_d_d_date_sk_max) and in_bloom_filter(ss_sold_date_sk, DynamicValue(RS_7_d_d_date_sk_bloom_filter))) or (ss_sold_date_sk BETWEEN DynamicValue(RS_21_d_d_date_sk_min) AND DynamicValue(RS_21_d_d_date_sk_max) and in_bloom_filter(ss_sold_date_sk, DynamicValue(RS_21_d_d_date_sk_bloom_filter))))) (type: boolean)\n+                  filterExpr: (((ss_sold_date_sk BETWEEN DynamicValue(RS_7_d_d_date_sk_min) AND DynamicValue(RS_7_d_d_date_sk_max) and in_bloom_filter(ss_sold_date_sk, DynamicValue(RS_7_d_d_date_sk_bloom_filter))) or (ss_sold_date_sk BETWEEN DynamicValue(RS_21_d_d_date_sk_min) AND DynamicValue(RS_21_d_d_date_sk_max) and in_bloom_filter(ss_sold_date_sk, DynamicValue(RS_21_d_d_date_sk_bloom_filter)))) and ss_sold_date_sk is not null) (type: boolean)", "originalCommit": "0d801e4f838909d80112d7067816a954fb937397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4ODc1OQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r512588759", "bodyText": "I've tried to retain the order - which have placed the bloom related checks at the end.\nI recall that there was a ticket about ordering conditionals - but I can't find the related ticket; do I remember incorrectly?", "author": "kgyrtkirk", "createdAt": "2020-10-27T10:51:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcyNzQ2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzk0MjM1NA==", "url": "https://github.com/apache/hive/pull/1562#discussion_r513942354", "bodyText": "we see a case when NonBlockingOpDeDupProc merges FIL-FIL, the conditionals may be reorder.\n#1308", "author": "dengzhhu653", "createdAt": "2020-10-29T04:04:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcyNzQ2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcyOTU2Mw==", "url": "https://github.com/apache/hive/pull/1562#discussion_r511729563", "bodyText": "Same as above. Filter exprs order", "author": "jcamachor", "createdAt": "2020-10-26T05:43:59Z", "path": "ql/src/test/results/clientpositive/perf/tez/constraints/query1b.q.out", "diffHunk": "@@ -176,7 +176,7 @@ STAGE PLANS:\n             Map Operator Tree:\n                 TableScan\n                   alias: store_returns\n-                  filterExpr: (((sr_customer_sk is not null and sr_store_sk is not null and sr_returned_date_sk is not null) or (sr_store_sk is not null and sr_returned_date_sk is not null)) and sr_store_sk BETWEEN DynamicValue(RS_40_store_s_store_sk_min) AND DynamicValue(RS_40_store_s_store_sk_max) and in_bloom_filter(sr_store_sk, DynamicValue(RS_40_store_s_store_sk_bloom_filter))) (type: boolean)\n+                  filterExpr: (sr_store_sk BETWEEN DynamicValue(RS_40_store_s_store_sk_min) AND DynamicValue(RS_40_store_s_store_sk_max) and in_bloom_filter(sr_store_sk, DynamicValue(RS_40_store_s_store_sk_bloom_filter)) and ((sr_customer_sk is not null and sr_store_sk is not null and sr_returned_date_sk is not null) or (sr_store_sk is not null and sr_returned_date_sk is not null))) (type: boolean)", "originalCommit": "0d801e4f838909d80112d7067816a954fb937397", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcyOTY2OQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r511729669", "bodyText": "SJ went away? It is kept in the other branch (L182).", "author": "jcamachor", "createdAt": "2020-10-26T05:44:27Z", "path": "ql/src/test/results/clientpositive/perf/tez/constraints/query1b.q.out", "diffHunk": "@@ -210,7 +210,7 @@ STAGE PLANS:\n                             Statistics: Num rows: 16855704 Data size: 2008197920 Basic stats: COMPLETE Column stats: COMPLETE\n                             value expressions: _col2 (type: decimal(17,2))\n                   Filter Operator\n-                    predicate: (sr_store_sk is not null and sr_returned_date_sk is not null and sr_store_sk BETWEEN DynamicValue(RS_40_store_s_store_sk_min) AND DynamicValue(RS_40_store_s_store_sk_max) and in_bloom_filter(sr_store_sk, DynamicValue(RS_40_store_s_store_sk_bloom_filter))) (type: boolean)\n+                    predicate: (sr_store_sk is not null and sr_returned_date_sk is not null) (type: boolean)", "originalCommit": "0d801e4f838909d80112d7067816a954fb937397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4OTM5MA==", "url": "https://github.com/apache/hive/pull/1562#discussion_r512589390", "bodyText": "changes are gone in this file", "author": "kgyrtkirk", "createdAt": "2020-10-27T10:51:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTcyOTY2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMDE5OQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r511730199", "bodyText": "Are these new TS that are not reused anymore? For instance, it seems this one is the same that was reused in old L224.", "author": "jcamachor", "createdAt": "2020-10-26T05:46:47Z", "path": "ql/src/test/results/clientpositive/perf/tez/constraints/query25.q.out", "diffHunk": "@@ -176,92 +176,88 @@ Stage-0\n                                   Merge Join Operator [MERGEJOIN_246] (rows=21091882 width=154)\n                                     Conds:RS_25._col2, _col1, _col4=RS_26._col2, _col1, _col3(Inner),Output:[\"_col1\",\"_col3\",\"_col5\",\"_col8\",\"_col9\",\"_col11\"]\n                                   <-Reducer 10 [SIMPLE_EDGE]\n+                                    SHUFFLE [RS_26]\n+                                      PartitionCols:_col2, _col1, _col3\n+                                      Merge Join Operator [MERGEJOIN_245] (rows=9402909 width=100)\n+                                        Conds:RS_270._col0=RS_256._col0(Inner),Output:[\"_col1\",\"_col2\",\"_col3\",\"_col4\"]\n+                                      <-Map 8 [SIMPLE_EDGE] vectorized\n+                                        PARTITION_ONLY_SHUFFLE [RS_256]\n+                                          PartitionCols:_col0\n+                                          Select Operator [SEL_252] (rows=351 width=4)\n+                                            Output:[\"_col0\"]\n+                                            Filter Operator [FIL_250] (rows=351 width=12)\n+                                              predicate:((d_year = 2000) and d_moy BETWEEN 4 AND 10)\n+                                              TableScan [TS_3] (rows=73049 width=12)\n+                                                default@date_dim,d3,Tbl:COMPLETE,Col:COMPLETE,Output:[\"d_date_sk\",\"d_year\",\"d_moy\"]", "originalCommit": "0d801e4f838909d80112d7067816a954fb937397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE4MjY4NQ==", "url": "https://github.com/apache/hive/pull/1562#discussion_r515182685", "bodyText": "date_dim is only scanned once in the new plan as well - in this query the order of things have changed a bit\nso far it seems like the biggest change is that Reducer 10 is exchanged with Reducer 15", "author": "kgyrtkirk", "createdAt": "2020-10-30T15:29:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMDE5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMDY5NA==", "url": "https://github.com/apache/hive/pull/1562#discussion_r511730694", "bodyText": "Change of algorithm to SHUFFLE. Is this expected? It seems the same changed happened for multiple ops in the plan.", "author": "jcamachor", "createdAt": "2020-10-26T05:48:57Z", "path": "ql/src/test/results/clientpositive/perf/tez/constraints/query54.q.out", "diffHunk": "@@ -202,156 +202,154 @@ Stage-0\n                                           predicate:(_col1 <= _col3)\n                                           Merge Join Operator [MERGEJOIN_294] (rows=15218525 width=12)\n                                             Conds:(Inner),Output:[\"_col0\",\"_col1\",\"_col3\"]\n-                                          <-Reducer 15 [CUSTOM_SIMPLE_EDGE]\n+                                          <-Reducer 20 [CUSTOM_SIMPLE_EDGE]\n                                             PARTITION_ONLY_SHUFFLE [RS_99]\n                                               Filter Operator [FIL_98] (rows=608741 width=12)\n                                                 predicate:(_col2 <= _col1)\n                                                 Merge Join Operator [MERGEJOIN_291] (rows=1826225 width=12)\n                                                   Conds:(Inner),Output:[\"_col0\",\"_col1\",\"_col2\"]\n                                                 <-Map 9 [CUSTOM_SIMPLE_EDGE] vectorized\n-                                                  PARTITION_ONLY_SHUFFLE [RS_327]", "originalCommit": "0d801e4f838909d80112d7067816a954fb937397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU5NDIwOA==", "url": "https://github.com/apache/hive/pull/1562#discussion_r512594208", "bodyText": "this is hightly unfortunate:\nthe jsonexplain api \"tells\" the vertex about the outgoing edge type by calling this method from here\nsince a single vertex can have multiple outgoing edges - setting the type of one-of-them is problematic - I think we may want to consider to simple remove this tagging of vertices\ninstead...we should consider renaming some of the edge types...like CUSTOM_SIMPLE_EDGE to PARTITION_ONLY", "author": "kgyrtkirk", "createdAt": "2020-10-27T10:58:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMDY5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMTcwMg==", "url": "https://github.com/apache/hive/pull/1562#discussion_r511731702", "bodyText": "SJ got removed. Is this expected?", "author": "jcamachor", "createdAt": "2020-10-26T05:53:06Z", "path": "ql/src/test/results/clientpositive/perf/tez/constraints/query92.q.out", "diffHunk": "@@ -164,7 +164,7 @@ Stage-0\n                                     Select Operator [SEL_115] (rows=143966864 width=119)\n                                       Output:[\"_col0\",\"_col1\",\"_col2\"]\n                                       Filter Operator [FIL_113] (rows=143966864 width=119)\n-                                        predicate:(ws_sold_date_sk is not null and ws_item_sk BETWEEN DynamicValue(RS_28_item_i_item_sk_min) AND DynamicValue(RS_28_item_i_item_sk_max) and in_bloom_filter(ws_item_sk, DynamicValue(RS_28_item_i_item_sk_bloom_filter)))", "originalCommit": "0d801e4f838909d80112d7067816a954fb937397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU5NDcxMA==", "url": "https://github.com/apache/hive/pull/1562#discussion_r512594710", "bodyText": "changes are gone", "author": "kgyrtkirk", "createdAt": "2020-10-27T10:58:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMTcwMg=="}], "type": "inlineReview"}, {"oid": "7deefe3d22117a33bfc5c5fc1e5bd589656bf2c3", "url": "https://github.com/apache/hive/commit/7deefe3d22117a33bfc5c5fc1e5bd589656bf2c3", "message": "be more conservative - do full check", "committedDate": "2020-10-26T13:47:05Z", "type": "commit"}, {"oid": "f29316e1e09c7d8d85a41e2a7dcd69f4b2ced44d", "url": "https://github.com/apache/hive/commit/f29316e1e09c7d8d85a41e2a7dcd69f4b2ced44d", "message": "fix typo", "committedDate": "2020-10-26T15:23:09Z", "type": "commit"}]}