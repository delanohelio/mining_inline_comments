{"pr_number": 1513, "pr_title": "Fixes edge case where soft-cliped portion of a read ends up at a nega\u2026", "pr_createdAt": "2020-05-21T15:11:59Z", "pr_url": "https://github.com/broadinstitute/picard/pull/1513", "timeline": [{"oid": "4d52601ba1b4cc1e4fdd83a1a989bcd0717935c8", "url": "https://github.com/broadinstitute/picard/commit/4d52601ba1b4cc1e4fdd83a1a989bcd0717935c8", "message": "Fixes edge case where soft-cliped portion of a read ends up at a negative position", "committedDate": "2020-05-21T15:10:12Z", "type": "commit"}, {"oid": "2cf3a8b394a3be75fcb3c06bc056c150f0840609", "url": "https://github.com/broadinstitute/picard/commit/2cf3a8b394a3be75fcb3c06bc056c150f0840609", "message": "Accidently added the tests, but not the actual code.  Here is the code that should work.", "committedDate": "2020-05-21T15:16:38Z", "type": "commit"}, {"oid": "93dd5559a68ee4525b141cd8f6a222077544fb6d", "url": "https://github.com/broadinstitute/picard/commit/93dd5559a68ee4525b141cd8f6a222077544fb6d", "message": "Cleaning up a few things before review.", "committedDate": "2020-05-21T15:38:48Z", "type": "commit"}, {"oid": "50736b874c4f5de31ad8728024de30bf0468159b", "url": "https://github.com/broadinstitute/picard/commit/50736b874c4f5de31ad8728024de30bf0468159b", "message": "Removing code used for debugging.", "committedDate": "2020-05-21T15:52:36Z", "type": "commit"}, {"oid": "e6c907087b9d17cb5fc6ba0f1c8b983367a288a9", "url": "https://github.com/broadinstitute/picard/commit/e6c907087b9d17cb5fc6ba0f1c8b983367a288a9", "message": "Making code more elegant by putting shift inside getReadPositionAtReferencePosition", "committedDate": "2020-05-21T19:29:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODg2Nzk4OA==", "url": "https://github.com/broadinstitute/picard/pull/1513#discussion_r428867988", "bodyText": "add a comment that since the read effectively got shifted forward by turning the clips into matches, the query position needs also to be moved forward so that it's still querying the same base", "author": "yfarjoun", "createdAt": "2020-05-21T19:32:54Z", "path": "src/main/java/picard/sam/AbstractAlignmentMerger.java", "diffHunk": "@@ -819,10 +819,10 @@ private static int getReadPositionAtReferencePositionIgnoreSoftClips(final SAMRe\n \n         // Temporarily use the newCigar that has SOFT_CLIPs replaced with MATCH_OR_MISMATCH to get read position at reference, but ignore existence of soft-clips\n         rec.setCigar(newCigar);\n-        readPosition = SAMRecord.getReadPositionAtReferencePosition(rec, pos, false);\n+        readPosition = SAMRecord.getReadPositionAtReferencePosition(rec, pos + posShift, false);", "originalCommit": "e6c907087b9d17cb5fc6ba0f1c8b983367a288a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "95a37e3082d8ace0a5106abbf068c363159a5b11", "url": "https://github.com/broadinstitute/picard/commit/95a37e3082d8ace0a5106abbf068c363159a5b11", "message": "Adding comment", "committedDate": "2020-05-21T19:35:27Z", "type": "commit"}]}