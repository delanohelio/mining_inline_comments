{"pr_number": 949, "pr_title": "Refactor Get and update headers for digital Twin", "pr_createdAt": "2020-09-29T23:09:21Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/949", "timeline": [{"oid": "c87b89794b5d62bec397d9bbc680a18ce327163a", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/c87b89794b5d62bec397d9bbc680a18ce327163a", "message": "update and get headers", "committedDate": "2020-09-29T23:07:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNTc0Nw==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497125747", "bodyText": "I am taking care of this in gitignore in another PR", "author": "bikamani", "createdAt": "2020-09-29T23:11:56Z", "path": "service/iot-service-client/code-model-v1", "diffHunk": "@@ -24,11 +24,11 @@\n         \"2020-09-30\"\n        ],\n        \"filename\": [\n-        \"mem:///103?oai3.shaken.json\"\n+        \"mem:///102?oai3.shaken.json\"", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNjU4Mw==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497126583", "bodyText": "Copyright", "author": "vinagesh", "createdAt": "2020-09-29T23:13:03Z", "path": "iot-e2e-tests/common/src/test/java/tests/integration/com/microsoft/azure/sdk/iot/digitaltwin/DigitalTwinClientTests.java", "diffHunk": "@@ -1,33 +1,24 @@\n package tests.integration.com.microsoft.azure.sdk.iot.digitaltwin;", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNzA5OQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497127099", "bodyText": "Might be needed for the other test file too.", "author": "vinagesh", "createdAt": "2020-09-29T23:13:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNjU4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNzYwMg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497127602", "bodyText": "fix return type header", "author": "vinagesh", "createdAt": "2020-09-29T23:14:24Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/digitaltwin/DigitalTwinAsyncClient.java", "diffHunk": "@@ -85,7 +82,7 @@ public static DigitalTwinAsyncClient createFromConnectionString(String connectio\n      * @param digitalTwinId The Id of the digital twin.\n      * @param clazz The class to deserialize the application/json into.\n      * @param <T> The generic type to deserialize the application/json into.\n-     * @return A {@link ServiceResponseWithHeaders} representing deserialized application/json of the digital twin with {@link DigitalTwinGetHeaders}.\n+     * @return A {@link ServiceResponseWithHeaders} representing deserialized application/json of the digital twin with {@link DigitalTwinGetDigitalTwinHeaders}.", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEzMzE1Mg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497133152", "bodyText": "Good catch", "author": "bikamani", "createdAt": "2020-09-29T23:22:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNzYwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNzY3Mw==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497127673", "bodyText": "same", "author": "vinagesh", "createdAt": "2020-09-29T23:14:31Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/digitaltwin/DigitalTwinAsyncClient.java", "diffHunk": "@@ -123,7 +121,7 @@ public static DigitalTwinAsyncClient createFromConnectionString(String connectio\n      * Updates a digital twin.\n      * @param digitalTwinId The Id of the digital twin.\n      * @param digitalTwinUpdateOperations The JSON patch to apply to the specified digital twin. This argument can be created using {@link UpdateOperationUtility}.\n-     * @return A {@link ServiceResponseWithHeaders} with {@link DigitalTwinUpdateHeaders}.\n+     * @return A {@link ServiceResponseWithHeaders} with {@link DigitalTwinUpdateDigitalTwinHeaders}.", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNzc2Mg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497127762", "bodyText": "same", "author": "vinagesh", "createdAt": "2020-09-29T23:14:39Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/digitaltwin/DigitalTwinAsyncClient.java", "diffHunk": "@@ -135,12 +133,13 @@ public static DigitalTwinAsyncClient createFromConnectionString(String connectio\n      * @param digitalTwinId The Id of the digital twin.\n      * @param digitalTwinUpdateOperations The JSON patch to apply to the specified digital twin. This argument can be created using {@link UpdateOperationUtility}.\n      * @param options The optional settings for this request.\n-     * @return A {@link ServiceResponseWithHeaders} with {@link DigitalTwinUpdateHeaders}.\n+     * @return A {@link ServiceResponseWithHeaders} with {@link DigitalTwinUpdateDigitalTwinHeaders}.", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNzg5NA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497127894", "bodyText": "same", "author": "vinagesh", "createdAt": "2020-09-29T23:14:50Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/digitaltwin/DigitalTwinClient.java", "diffHunk": "@@ -50,7 +47,7 @@ public static DigitalTwinClient createFromConnectionString(String connectionStri\n      * @param digitalTwinId The Id of the digital twin.\n      * @param clazz The class to deserialize the application/json into.\n      * @param <T> The generic type to deserialize the application/json into.\n-     * @return A {@link ServiceResponseWithHeaders} representing deserialized application/json of the digital twin with {@link DigitalTwinGetHeaders}.\n+     * @return A {@link ServiceResponseWithHeaders} representing deserialized application/json of the digital twin with {@link DigitalTwinGetDigitalTwinHeaders}.", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyNzk1OA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497127958", "bodyText": "same", "author": "vinagesh", "createdAt": "2020-09-29T23:14:55Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/digitaltwin/DigitalTwinClient.java", "diffHunk": "@@ -74,7 +71,7 @@ public Void updateDigitalTwin (String digitalTwinId, List<Object> digitalTwinUpd\n      * Updates a digital twin.\n      * @param digitalTwinId The Id of the digital twin.\n      * @param digitalTwinUpdateOperations The JSON patch to apply to the specified digital twin. This argument can be created using {@link UpdateOperationUtility}.\n-     * @return A {@link ServiceResponseWithHeaders} with {@link DigitalTwinUpdateHeaders}.\n+     * @return A {@link ServiceResponseWithHeaders} with {@link DigitalTwinUpdateDigitalTwinHeaders}.", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyODAxNQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497128015", "bodyText": "same", "author": "vinagesh", "createdAt": "2020-09-29T23:15:00Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/digitaltwin/DigitalTwinClient.java", "diffHunk": "@@ -86,7 +83,7 @@ public Void updateDigitalTwin (String digitalTwinId, List<Object> digitalTwinUpd\n      * @param digitalTwinId The Id of the digital twin.\n      * @param digitalTwinUpdateOperations The JSON patch to apply to the specified digital twin. This argument can be created using {@link UpdateOperationUtility}.\n      * @param options The optional settings for this request.\n-     * @return A {@link ServiceResponseWithHeaders} with {@link DigitalTwinUpdateHeaders}.\n+     * @return A {@link ServiceResponseWithHeaders} with {@link DigitalTwinUpdateDigitalTwinHeaders}.", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyOTYxNg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497129616", "bodyText": "Add Copyright - no longer generated", "author": "vinagesh", "createdAt": "2020-09-29T23:17:14Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/digitaltwin/models/DigitalTwinGetHeaders.java", "diffHunk": "@@ -4,7 +4,7 @@\n  * regenerated.\n  */\n ", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEzNDYxOQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497134619", "bodyText": "done", "author": "bikamani", "createdAt": "2020-09-29T23:24:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyOTYxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyOTY4Mw==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497129683", "bodyText": "Add Copyright - no longer generated", "author": "vinagesh", "createdAt": "2020-09-29T23:17:18Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/digitaltwin/models/DigitalTwinUpdateHeaders.java", "diffHunk": "@@ -4,7 +4,7 @@\n  * regenerated.", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyOTk2OA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497129968", "bodyText": "formatting is lost for full file", "author": "vinagesh", "createdAt": "2020-09-29T23:17:42Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/digitaltwin/swagger/digitalTwin.json", "diffHunk": "@@ -1,270 +1,272 @@\n {\n-  \"swagger\": \"2.0\",\n-  \"info\": {\n-    \"version\": \"2020-09-30\",\n-    \"title\": \"IotHub Gateway Service APIs\"\n-  },\n-  \"host\": \"fully-qualified-iothubname.azure-devices.net\",\n-  \"schemes\": [\n-    \"https\"\n-  ],\n-  \"paths\": {\n-    \"/digitaltwins/{id}\": {\n-      \"get\": {\n-        \"summary\": \"Gets a digital twin.\",\n-        \"operationId\": \"DigitalTwin_GetDigitalTwin\",\n-        \"consumes\": [],\n-        \"produces\": [\n-          \"application/json\"\n-        ],\n-        \"parameters\": [\n-          {\n-            \"name\": \"id\",\n-            \"in\": \"path\",\n-            \"description\": \"Digital Twin ID.\",\n-            \"required\": true,\n-            \"type\": \"string\"\n-          },\n-          {\n-            \"$ref\": \"#/parameters/api-version\"\n-          }\n-        ],\n-        \"responses\": {\n-          \"200\": {\n-            \"description\": \"Returns the digital twin object\",\n-            \"schema\": {\n-              \"type\": \"object\"\n-            },\n-            \"headers\": {\n-              \"ETag\": {\n-                \"description\": \"Weak Etag\",\n-                \"type\": \"string\"\n-              }\n-            }\n-          }\n-        }\n-      },\n-      \"patch\": {\n-        \"summary\": \"Updates a digital twin.\",\n-        \"operationId\": \"DigitalTwin_UpdateDigitalTwin\",\n-        \"consumes\": [\n-          \"application/json\"\n-        ],\n-        \"produces\": [\n-          \"application/json\"\n-        ],\n-        \"parameters\": [\n-          {\n-            \"name\": \"id\",\n-            \"in\": \"path\",\n-            \"description\": \"Digital Twin ID.\",\n-            \"required\": true,\n-            \"type\": \"string\"\n-          },\n-          {\n-            \"name\": \"digitalTwinPatch\",\n-            \"in\": \"body\",\n-            \"description\": \"json-patch contents to update.\",\n-            \"required\": true,\n-            \"schema\": {\n-              \"type\": \"array\",\n-              \"items\": {\n-                \"type\": \"object\"\n-              }\n-            }\n-          },\n-          {\n-            \"name\": \"If-Match\",\n-            \"in\": \"header\",\n-            \"required\": false,\n-            \"type\": \"string\"\n-          },\n-          {\n-            \"$ref\": \"#/parameters/api-version\"\n-          }\n-        ],\n-        \"responses\": {\n-          \"202\": {\n-            \"description\": \"Accepted\",\n-            \"headers\": {\n-              \"ETag\": {\n-                \"description\": \"Weak Etag of the modified resource\",\n-                \"type\": \"string\"\n+    \"swagger\":  \"2.0\",", "originalCommit": "c87b89794b5d62bec397d9bbc680a18ce327163a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEzOTk4Nw==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/949#discussion_r497139987", "bodyText": "done", "author": "bikamani", "createdAt": "2020-09-29T23:31:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEyOTk2OA=="}], "type": "inlineReview"}, {"oid": "5f1e40aeb3b908e9207e4ae1af71c6496051f64b", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/5f1e40aeb3b908e9207e4ae1af71c6496051f64b", "message": "Address code review comments", "committedDate": "2020-09-29T23:31:07Z", "type": "commit"}]}