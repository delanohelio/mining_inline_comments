{"pr_number": 819, "pr_title": "fix(e2e): Fix issue where transport client twin tests sometimes threw a null pointer exception", "pr_createdAt": "2020-06-24T21:41:46Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/819", "timeline": [{"oid": "fb11806ac7a356c264e6c25bf76abea1bc4ccccb", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/fb11806ac7a356c264e6c25bf76abea1bc4ccccb", "message": "fix(e2e): Fix issue where transport client twin tests sometimes threw a null pointer exception\n\nThe twin service client can be relegated to the test instance. Having a static instance was causing issues as it was sometimes prematurely disposed and would cause the NPE", "committedDate": "2020-06-24T21:37:11Z", "type": "commit"}, {"oid": "130e02285b11fe59dc8c9faae5d59bf0ab1eb81c", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/130e02285b11fe59dc8c9faae5d59bf0ab1eb81c", "message": "fix(e2e): Fix flakey twin tests\n\nA lot of scenarios had a 3 second timeout which is rather strict. Opening that timeout up to 1 minute so that the test isn't as flakey", "committedDate": "2020-06-24T22:02:44Z", "type": "commit"}, {"oid": "326bcf09abe03b3c7d1d9642fcd76aacd142712f", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/326bcf09abe03b3c7d1d9642fcd76aacd142712f", "message": "Revert \"fix(e2e): Fix flakey twin tests\"\n\nThis reverts commit 130e02285b11fe59dc8c9faae5d59bf0ab1eb81c.", "committedDate": "2020-06-24T22:17:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIwNjU5Ng==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/819#discussion_r445206596", "bodyText": "Setting a shared resource to null caused NPEs, so don't share it, and don't set it null", "author": "timtay-microsoft", "createdAt": "2020-06-24T22:28:22Z", "path": "iot-e2e-tests/common/src/test/java/tests/integration/com/microsoft/azure/sdk/iot/iothub/TransportClientTests.java", "diffHunk": "@@ -968,8 +967,6 @@ private void tearDownTwin(TransportClient transportClient)\n             // No need to fail the test just because cleanup failed.\n             e.printStackTrace();\n         }\n-\n-        sCDeviceTwin = null;", "originalCommit": "326bcf09abe03b3c7d1d9642fcd76aacd142712f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1d8ce54468d789ae53d4e3be6a792df7b96a6bd1", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/1d8ce54468d789ae53d4e3be6a792df7b96a6bd1", "message": "squash", "committedDate": "2020-06-24T22:32:09Z", "type": "commit"}, {"oid": "e22f30da8a1af94fd1fef6b168f3c57c319c1428", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e22f30da8a1af94fd1fef6b168f3c57c319c1428", "message": "Merge branch 'master' into timtay/npe", "committedDate": "2020-06-24T22:46:08Z", "type": "commit"}]}