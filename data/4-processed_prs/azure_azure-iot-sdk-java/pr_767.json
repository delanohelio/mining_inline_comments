{"pr_number": 767, "pr_title": "fix(iot-dev): Fix bug in amqpws, raise max message size from 1 kb to 16 kb", "pr_createdAt": "2020-05-01T15:32:48Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/767", "timeline": [{"oid": "9957506fdc86af1184cce79c095878dcee719de0", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/9957506fdc86af1184cce79c095878dcee719de0", "message": "fix(iot-dev): Fix bug in amqpws, raise max message size from 1 kb to 16 kb\n\nMax IoT Hub messsage size is 256 kb, so this is still a bug that you can only send 16 kb, but this is a good incremental change that will benefit customers", "committedDate": "2020-05-01T15:31:02Z", "type": "commit"}, {"oid": "894b85e0a3d6373c78eb9ec92b6c59952df22728", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/894b85e0a3d6373c78eb9ec92b6c59952df22728", "message": "fix", "committedDate": "2020-05-01T15:40:29Z", "type": "commit"}, {"oid": "8e6f3f4751d5e1fe3b561ee1b3430152eb1e0bde", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/8e6f3f4751d5e1fe3b561ee1b3430152eb1e0bde", "message": "fix", "committedDate": "2020-05-01T15:52:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYzNDA1MQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/767#discussion_r418634051", "bodyText": "Should this be *1024?", "author": "drwill-ms", "createdAt": "2020-05-01T17:01:41Z", "path": "device/iot-device-client/src/main/java/com/microsoft/azure/sdk/iot/device/transport/amqps/AmqpsIotHubConnection.java", "diffHunk": "@@ -66,6 +63,7 @@\n     //sending messages is done on reactor thread, but we don't want to hog that thread indefinitely, so there is a limit\n     // on how many messages to send per reactor callback\n     private final static int MAX_MESSAGES_TO_SEND_PER_CALLBACK = 1000;\n+    private final static int MAX_MESSAGE_PAYLOAD_SIZE = 256*1000; //max IoT Hub message size is 256 kb, so amqp websocket layer should buffer at least that much space", "originalCommit": "8e6f3f4751d5e1fe3b561ee1b3430152eb1e0bde", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY0ODIwMg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/767#discussion_r418648202", "bodyText": "It should be, good catch", "author": "timtay-microsoft", "createdAt": "2020-05-01T17:32:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYzNDA1MQ=="}], "type": "inlineReview"}, {"oid": "e094b1ded843d1983d459d01dc8c89afd88d1800", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/e094b1ded843d1983d459d01dc8c89afd88d1800", "message": "fix", "committedDate": "2020-05-01T17:32:43Z", "type": "commit"}]}