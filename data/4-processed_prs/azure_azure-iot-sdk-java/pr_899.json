{"pr_number": 899, "pr_title": "refactor(vsts): Automate javadoc generation", "pr_createdAt": "2020-08-20T22:33:52Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/899", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxMzUwNg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/899#discussion_r474313506", "bodyText": "Is this intended to be commented out?", "author": "abhipsaMisra", "createdAt": "2020-08-20T22:48:59Z", "path": "vsts/generateJavadocs.ps1", "diffHunk": "@@ -0,0 +1,93 @@\n+\ufeff# Copyright (c) Microsoft. All rights reserved.\n+# Licensed under the MIT license. See LICENSE file in the project root for full license information.\n+\n+# This script generates javadocs for the currently checked out branch and creates a new git branch based off of the current\n+# gh-pages branch. This new branch will contain the generated javadocs. After running this script, you will manually\n+# need to create a pull request from the new branch (\"gh-pages-<current date>\") to \"gh-pages\".\n+\n+# This script is designed to be used only by an Azure Devops release pipeline. Running it locally will not work\n+# due to some assumptions this script makes about working directory.\n+\n+git.exe config user.email $env:GitHubEmail\n+git.exe config user.name $env:GitHubName\n+\n+Write-Host \"Generating javadocs for current branch\"\n+cd _Azure_azure-iot-sdk-java\n+\n+#Some local samples rely on packages we don't publish publicly, so install everything locally before generating javadocs\n+Write-Host \"Installing jars locally\"\n+mvn `-DskipTests `-Dmaven.javadoc.skip=true install -T 2C\n+\n+Write-Host \"Generating javadocs, placing them in apidocs folder at the root of the repository\"\n+mvn javadoc:javadoc\n+\n+$date = Get-Date -Format \"MM_dd_yyyy\"\n+$newBranchName = \"gh-pages-\" + $date\n+\n+Write-Host \"Creating branch\" $newBranchName \" based off of branch gh-pages\"\n+git fetch\n+git branch $newBranchName gh-pages\n+\n+Write-Host \"Checking out new github pages branch, bringing over generated javadocs\"\n+git checkout $newBranchName\n+\n+# copy the generated javadocs to the expected folder structure, replacing/updating any existing files there\n+#Write-Host \"Copying generated javadocs to replace current javadocs\"", "originalCommit": "ea399b48097fcb36cd49f4b5b411c4fd0e642a5e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxNjExMg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/899#discussion_r474316112", "bodyText": "Nope, good catch", "author": "timtay-microsoft", "createdAt": "2020-08-20T22:56:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxMzUwNg=="}], "type": "inlineReview"}, {"oid": "2304f3de96841c5878a7dba378ec2df1d503ae40", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/2304f3de96841c5878a7dba378ec2df1d503ae40", "message": "refactor(vsts): Automate javadoc generation\n\ngenerateJavadocs.ps1 will generate javadocs for the checked out branch (configurable to master, preview, etc as needed) then create a new branch based on the current gh-pages branch that contains the up to date javadocs. We'll still have to manually create a PR to merge that branch into gh-pages", "committedDate": "2020-08-24T19:19:45Z", "type": "forcePushed"}, {"oid": "d1e86a52442bd0b98d5940a0666b13887dea1f45", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/d1e86a52442bd0b98d5940a0666b13887dea1f45", "message": "refactor(vsts): Automate javadoc generation\n\ngenerateJavadocs.ps1 will generate javadocs for the checked out branch (configurable to master, preview, etc as needed) then create a new branch based on the current gh-pages branch that contains the up to date javadocs. We'll still have to manually create a PR to merge that branch into gh-pages", "committedDate": "2020-08-24T22:25:06Z", "type": "commit"}, {"oid": "f563928769c6f26a1aea9ebc0208e99721e5ac42", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/f563928769c6f26a1aea9ebc0208e99721e5ac42", "message": "refactor(e2e): Use GPU for android emulation", "committedDate": "2020-08-24T22:25:06Z", "type": "commit"}, {"oid": "f563928769c6f26a1aea9ebc0208e99721e5ac42", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/f563928769c6f26a1aea9ebc0208e99721e5ac42", "message": "refactor(e2e): Use GPU for android emulation", "committedDate": "2020-08-24T22:25:06Z", "type": "forcePushed"}]}