{"pr_number": 782, "pr_title": "Add support for fully qualified error codes in service client HTTP exceptions", "pr_createdAt": "2020-05-21T22:24:01Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/782", "timeline": [{"oid": "2bacf5c385a8bedf8867c3ede54052661e81ac7c", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/2bacf5c385a8bedf8867c3ede54052661e81ac7c", "message": "fix(iot-service): Fix small logging mistake in amqp sender\n\npreviously, this log would claim that the message was delivered regardless of what the remote state was.", "committedDate": "2020-05-21T20:17:35Z", "type": "commit"}, {"oid": "d08e64af2858ea46f93616aa42595090ee440275", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/d08e64af2858ea46f93616aa42595090ee440275", "message": "feat(iot-serv, deps): Add support for substatus codes to http exceptions", "committedDate": "2020-05-21T22:19:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0ODQ5OA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428948498", "bodyText": "This change is completely orthogonal to the error code work that this PR is for, but it is a small change that is worth fixing despite that", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:24:38Z", "path": "service/iot-service-client/src/main/java/com/microsoft/azure/sdk/iot/service/transport/amqps/AmqpSendHandler.java", "diffHunk": "@@ -266,7 +266,15 @@ public void onDelivery(Event event)\n             {\n                 //By closing the link locally, proton-j will fire an event onLinkLocalClose. Within ErrorLoggingBaseHandlerWithCleanup,\n                 // onLinkLocalClose closes the session locally and eventually the connection and reactor\n-                log.debug(\"Closing amqp cloud to device message sender link since the message was delivered\");\n+                if (remoteState.getClass().equals(Accepted.class))\n+                {\n+                    log.debug(\"Closing AMQP cloud to device message sender link since the message was delivered\");\n+                }\n+                else\n+                {\n+                    log.debug(\"Closing AMQP cloud to device message sender link since the message failed to be delivered\");\n+                }\n+", "originalCommit": "d08e64af2858ea46f93616aa42595090ee440275", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0OTQyOQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428949429", "bodyText": "This will be a good addition to the C# SDK as well", "author": "abhipsaMisra", "createdAt": "2020-05-21T22:27:36Z", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/ErrorCodeDescription.java", "diffHunk": "@@ -0,0 +1,193 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+/**\n+ * See https://docs.microsoft.com/en-us/rest/api/iothub/common-error-codes for additional details\n+ */\n+public enum ErrorCodeDescription", "originalCommit": "d08e64af2858ea46f93616aa42595090ee440275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0OTYwMg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428949602", "bodyText": "I was planning on doing the same over there, too, yeah", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:28:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0OTQyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0OTY5NQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428949695", "bodyText": "Have these been validated by service ? i.e. do they support the above for what do they mean?", "author": "prmathur-microsoft", "createdAt": "2020-05-21T22:28:24Z", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/ErrorCodeDescription.java", "diffHunk": "@@ -0,0 +1,193 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+/**\n+ * See https://docs.microsoft.com/en-us/rest/api/iothub/common-error-codes for additional details\n+ */\n+public enum ErrorCodeDescription\n+{\n+    // These descriptions belong to fully qualified status codes, such as 404001\n+    UnclassifiedErrorCode,\n+    InvalidProtocolVersion,\n+    DeviceInvalidResultCount,\n+    InvalidOperation,\n+    ArgumentInvalid,\n+    ArgumentNull,\n+    IotHubFormatError,\n+    DeviceStorageEntitySerializationError,\n+    BlobContainerValidationError,\n+    ImportWarningExistsError,\n+    InvalidSchemaVersion,\n+    DeviceDefinedMultipleTimes,\n+    DeserializationError,\n+    BulkRegistryOperationFailure,\n+    CannotRegisterModuleToModule,\n+    IotHubNotFound,\n+    IotHubUnauthorizedAccess,\n+    IotHubUnauthorized,\n+    IotHubSuspended,\n+    IotHubQuotaExceeded,\n+    JobQuotaExceeded,\n+    DeviceMaximumQueueDepthExceeded,\n+    IotHubMaxCbsTokenExceeded,\n+    DeviceNotFound,\n+    JobNotFound,\n+    PartitionNotFound,\n+    ModuleNotFound,\n+    DeviceAlreadyExists,\n+    ModuleAlreadyExistsOnDevice,\n+    DeviceMessageLockLost,\n+    MessageTooLarge,\n+    TooManyDevices,\n+    TooManyModulesOnDevice,\n+    ThrottleBacklogLimitExceeded,\n+    InvalidThrottleParameter,\n+    ServerError,\n+    JobCancelled,\n+    ConnectionForcefullyClosedOnNewConnection,\n+    DeviceNotOnline,\n+    DeviceConnectionClosedRemotely,\n+\n+    // These descriptions belong to 3 digit http response codes such as 404.\n+    BadFormat,\n+    Unauthorized,\n+    Forbidden,\n+    NotFound,\n+    Conflict,\n+\n+    /**\n+     * Represents status code for 429 and for status code 429001\n+     */\n+    PreconditionFailed,\n+\n+    RequestEntityTooLarge,\n+\n+    /**\n+     * Represents status code for 429 and 429001\n+     */\n+    ThrottlingException,\n+    InternalServerError,\n+\n+    /**\n+     * Defined for status code 503 and 503001\n+     */\n+    ServiceUnavailable;\n+\n+\n+    /**\n+     * Get the ErrorCodeDescription tied to the provided errorCode\n+     * @param errorCode the service error code, such as 404, or 429001\n+     * @return the corresponding ErrorCodeDescription\n+     */\n+    public static ErrorCodeDescription Parse(int errorCode)\n+    {\n+        switch (errorCode)\n+        {\n+            case(400001):\n+                return InvalidProtocolVersion;\n+            case(400002):\n+                return DeviceInvalidResultCount;\n+            case(400003):\n+                return InvalidOperation;\n+            case(400004):\n+                return ArgumentInvalid;\n+            case(400005):\n+                return ArgumentNull;\n+            case(400006):\n+                return IotHubFormatError;\n+            case(400007):\n+                return DeviceStorageEntitySerializationError;\n+            case(400008):\n+                return BlobContainerValidationError;\n+            case(400009):\n+                return ImportWarningExistsError;\n+            case(400010):\n+                return InvalidSchemaVersion;\n+            case(400011):\n+                return DeviceDefinedMultipleTimes;\n+            case(400012):\n+                return DeserializationError;\n+            case(400013):\n+                return BulkRegistryOperationFailure;\n+            case (400027):\n+                return ConnectionForcefullyClosedOnNewConnection;\n+            case(400301):\n+                return CannotRegisterModuleToModule;\n+            case(401001):\n+                return IotHubNotFound;\n+            case(401002):\n+                return IotHubUnauthorizedAccess;\n+            case(401003):\n+                return IotHubUnauthorized;\n+            case(403001):\n+                return IotHubSuspended;\n+            case(403002):\n+                return IotHubQuotaExceeded;\n+            case(403003):\n+                return JobQuotaExceeded;\n+            case(403004):\n+                return DeviceMaximumQueueDepthExceeded;\n+            case(403005):\n+                return IotHubMaxCbsTokenExceeded;\n+            case(404001):\n+                return DeviceNotFound;\n+            case(404002):\n+                return JobNotFound;\n+            case(404003):\n+                return PartitionNotFound;\n+            case(404010):\n+                return ModuleNotFound;\n+            case (404103):\n+                return DeviceNotOnline;\n+            case (404104):\n+                return DeviceConnectionClosedRemotely;\n+            case(409001):\n+                return DeviceAlreadyExists;\n+            case(409301):\n+                return ModuleAlreadyExistsOnDevice;\n+            case(412001):\n+                return PreconditionFailed;\n+            case(412002):\n+                return DeviceMessageLockLost;\n+            case(413001):\n+                return MessageTooLarge;\n+            case(413002):\n+                return TooManyDevices;\n+            case(413003):\n+                return TooManyModulesOnDevice;\n+            case(429001):\n+                return ThrottlingException;\n+            case(429002):\n+                return ThrottleBacklogLimitExceeded;\n+            case(429003):\n+                return InvalidThrottleParameter;\n+            case(500001):\n+                return ServerError;\n+            case(500002):\n+                return JobCancelled;\n+            case(503001):\n+                return ServiceUnavailable;\n+            case (400):\n+                return BadFormat;\n+            case (401):\n+                return Unauthorized;\n+            case (403):\n+                return Forbidden;\n+            case (404):\n+                return NotFound;\n+            case (409):\n+                return Conflict;\n+            case (412):\n+                return PreconditionFailed;\n+            case (413):\n+                return RequestEntityTooLarge;\n+            case (429):\n+                return ThrottlingException;\n+            case (500):\n+                return InternalServerError;\n+            case (503):\n+                return ServiceUnavailable;\n+            default:\n+                return UnclassifiedErrorCode;", "originalCommit": "d08e64af2858ea46f93616aa42595090ee440275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDEwNA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428950104", "bodyText": "These are all taken directly from the C# sdk here", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:29:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0OTY5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MTU5OA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428951598", "bodyText": "\ud83d\udc4d", "author": "prmathur-microsoft", "createdAt": "2020-05-21T22:34:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0OTY5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDAxNQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428950015", "bodyText": "Why is this commented?", "author": "prmathur-microsoft", "createdAt": "2020-05-21T22:29:29Z", "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/methods/DeviceMethodTests.java", "diffHunk": "@@ -43,7 +44,7 @@ public void cleanToStart() throws Exception\n     {\n         super.cleanToStart();\n     }\n-\n+/*\n     @Test", "originalCommit": "d08e64af2858ea46f93616aa42595090ee440275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDE1NA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428950154", "bodyText": "Whoops, my mistake. I can uncomment these now", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:29:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDAxNQ=="}], "type": "inlineReview"}, {"oid": "dc1ca91d42a55973049f5a54c367263f0c250953", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/dc1ca91d42a55973049f5a54c367263f0c250953", "message": "cr comment", "committedDate": "2020-05-21T22:30:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDU3Mg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428950572", "bodyText": "Add a link to the doc that has these mappings. Is it on some MSDN doc?", "author": "abhipsaMisra", "createdAt": "2020-05-21T22:31:12Z", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/ErrorCodeDescription.java", "diffHunk": "@@ -0,0 +1,193 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+/**\n+ * See https://docs.microsoft.com/en-us/rest/api/iothub/common-error-codes for additional details\n+ */\n+public enum ErrorCodeDescription\n+{\n+    // These descriptions belong to fully qualified status codes, such as 404001\n+    UnclassifiedErrorCode,\n+    InvalidProtocolVersion,\n+    DeviceInvalidResultCount,\n+    InvalidOperation,\n+    ArgumentInvalid,\n+    ArgumentNull,\n+    IotHubFormatError,\n+    DeviceStorageEntitySerializationError,\n+    BlobContainerValidationError,\n+    ImportWarningExistsError,\n+    InvalidSchemaVersion,\n+    DeviceDefinedMultipleTimes,\n+    DeserializationError,\n+    BulkRegistryOperationFailure,\n+    CannotRegisterModuleToModule,\n+    IotHubNotFound,\n+    IotHubUnauthorizedAccess,\n+    IotHubUnauthorized,\n+    IotHubSuspended,\n+    IotHubQuotaExceeded,\n+    JobQuotaExceeded,\n+    DeviceMaximumQueueDepthExceeded,\n+    IotHubMaxCbsTokenExceeded,\n+    DeviceNotFound,\n+    JobNotFound,\n+    PartitionNotFound,\n+    ModuleNotFound,\n+    DeviceAlreadyExists,\n+    ModuleAlreadyExistsOnDevice,\n+    DeviceMessageLockLost,\n+    MessageTooLarge,\n+    TooManyDevices,\n+    TooManyModulesOnDevice,\n+    ThrottleBacklogLimitExceeded,\n+    InvalidThrottleParameter,\n+    ServerError,\n+    JobCancelled,\n+    ConnectionForcefullyClosedOnNewConnection,\n+    DeviceNotOnline,\n+    DeviceConnectionClosedRemotely,\n+\n+    // These descriptions belong to 3 digit http response codes such as 404.\n+    BadFormat,\n+    Unauthorized,\n+    Forbidden,\n+    NotFound,\n+    Conflict,\n+\n+    /**\n+     * Represents status code for 429 and for status code 429001\n+     */\n+    PreconditionFailed,\n+\n+    RequestEntityTooLarge,\n+\n+    /**\n+     * Represents status code for 429 and 429001\n+     */\n+    ThrottlingException,\n+    InternalServerError,\n+\n+    /**\n+     * Defined for status code 503 and 503001\n+     */\n+    ServiceUnavailable;\n+\n+\n+    /**\n+     * Get the ErrorCodeDescription tied to the provided errorCode\n+     * @param errorCode the service error code, such as 404, or 429001\n+     * @return the corresponding ErrorCodeDescription\n+     */\n+    public static ErrorCodeDescription Parse(int errorCode)\n+    {\n+        switch (errorCode)\n+        {\n+            case(400001):", "originalCommit": "d08e64af2858ea46f93616aa42595090ee440275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDgxOA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428950818", "bodyText": "Unfortunately, I couldn't find a MSDN doc for this. These codes are taken directly from the C# SDK here", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:31:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDU3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDkxMg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428950912", "bodyText": "In our work with them over the track 2 SDK, we can push for a document like that, though", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:32:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDU3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDk2Mg==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428950962", "bodyText": "what is this for?", "author": "abhipsaMisra", "createdAt": "2020-05-21T22:32:23Z", "path": "iot-e2e-tests/common/src/main/java/com/microsoft/azure/sdk/iot/common/tests/iothub/methods/DeviceMethodTests.java", "diffHunk": "@@ -43,7 +44,7 @@ public void cleanToStart() throws Exception\n     {\n         super.cleanToStart();\n     }\n-\n+/*", "originalCommit": "d08e64af2858ea46f93616aa42595090ee440275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MTA4NA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428951084", "bodyText": "I forgot to undo that, but now it is gone", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:32:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDk2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjI4OA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428952288", "bodyText": "nit: need consistency in using single-line vs block comments", "author": "abhipsaMisra", "createdAt": "2020-05-21T22:36:17Z", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/ErrorCodeDescription.java", "diffHunk": "@@ -0,0 +1,193 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+/**\n+ * See https://docs.microsoft.com/en-us/rest/api/iothub/common-error-codes for additional details\n+ */\n+public enum ErrorCodeDescription\n+{\n+    // These descriptions belong to fully qualified status codes, such as 404001\n+    UnclassifiedErrorCode,\n+    InvalidProtocolVersion,\n+    DeviceInvalidResultCount,\n+    InvalidOperation,\n+    ArgumentInvalid,\n+    ArgumentNull,\n+    IotHubFormatError,\n+    DeviceStorageEntitySerializationError,\n+    BlobContainerValidationError,\n+    ImportWarningExistsError,\n+    InvalidSchemaVersion,\n+    DeviceDefinedMultipleTimes,\n+    DeserializationError,\n+    BulkRegistryOperationFailure,\n+    CannotRegisterModuleToModule,\n+    IotHubNotFound,\n+    IotHubUnauthorizedAccess,\n+    IotHubUnauthorized,\n+    IotHubSuspended,\n+    IotHubQuotaExceeded,\n+    JobQuotaExceeded,\n+    DeviceMaximumQueueDepthExceeded,\n+    IotHubMaxCbsTokenExceeded,\n+    DeviceNotFound,\n+    JobNotFound,\n+    PartitionNotFound,\n+    ModuleNotFound,\n+    DeviceAlreadyExists,\n+    ModuleAlreadyExistsOnDevice,\n+    DeviceMessageLockLost,\n+    MessageTooLarge,\n+    TooManyDevices,\n+    TooManyModulesOnDevice,\n+    ThrottleBacklogLimitExceeded,\n+    InvalidThrottleParameter,\n+    ServerError,\n+    JobCancelled,\n+    ConnectionForcefullyClosedOnNewConnection,\n+    DeviceNotOnline,\n+    DeviceConnectionClosedRemotely,\n+\n+    // These descriptions belong to 3 digit http response codes such as 404.", "originalCommit": "dc1ca91d42a55973049f5a54c367263f0c250953", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjY3Mw==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428952673", "bodyText": "The single line comments are for us developers to see. The block comments will show up when a user has intellisense", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:37:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MzM5NQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428953395", "bodyText": "really? I didn't know that!\nSo when I hover over PreconditionFailed, I should be seeing\n/**\n     * Represents status code for 429 and for status code 429001\n     */", "author": "abhipsaMisra", "createdAt": "2020-05-21T22:40:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1NTczOQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428955739", "bodyText": "Without the slashes or stars, but yeah!", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:47:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1NTk5NA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428955994", "bodyText": "It's the java equivalent of how C# does\n// Comment \nvs\n/// <summary>Comment</summary>", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:48:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1ODQxNA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428958414", "bodyText": "Just to be more clear, though, if the block comments start with only one *, then they behave like the single line comments.\n/**\n * This is a javadoc header\n */\n\n/*\n * This is just a comment. Users won't see it\n */", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:56:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjI4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjUxOQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428952519", "bodyText": "Does this comment mean PreconditionFailed maps to 429 and RequestEntityTooLarge to 429001?", "author": "abhipsaMisra", "createdAt": "2020-05-21T22:37:07Z", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/ErrorCodeDescription.java", "diffHunk": "@@ -0,0 +1,193 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+/**\n+ * See https://docs.microsoft.com/en-us/rest/api/iothub/common-error-codes for additional details\n+ */\n+public enum ErrorCodeDescription\n+{\n+    // These descriptions belong to fully qualified status codes, such as 404001\n+    UnclassifiedErrorCode,\n+    InvalidProtocolVersion,\n+    DeviceInvalidResultCount,\n+    InvalidOperation,\n+    ArgumentInvalid,\n+    ArgumentNull,\n+    IotHubFormatError,\n+    DeviceStorageEntitySerializationError,\n+    BlobContainerValidationError,\n+    ImportWarningExistsError,\n+    InvalidSchemaVersion,\n+    DeviceDefinedMultipleTimes,\n+    DeserializationError,\n+    BulkRegistryOperationFailure,\n+    CannotRegisterModuleToModule,\n+    IotHubNotFound,\n+    IotHubUnauthorizedAccess,\n+    IotHubUnauthorized,\n+    IotHubSuspended,\n+    IotHubQuotaExceeded,\n+    JobQuotaExceeded,\n+    DeviceMaximumQueueDepthExceeded,\n+    IotHubMaxCbsTokenExceeded,\n+    DeviceNotFound,\n+    JobNotFound,\n+    PartitionNotFound,\n+    ModuleNotFound,\n+    DeviceAlreadyExists,\n+    ModuleAlreadyExistsOnDevice,\n+    DeviceMessageLockLost,\n+    MessageTooLarge,\n+    TooManyDevices,\n+    TooManyModulesOnDevice,\n+    ThrottleBacklogLimitExceeded,\n+    InvalidThrottleParameter,\n+    ServerError,\n+    JobCancelled,\n+    ConnectionForcefullyClosedOnNewConnection,\n+    DeviceNotOnline,\n+    DeviceConnectionClosedRemotely,\n+\n+    // These descriptions belong to 3 digit http response codes such as 404.\n+    BadFormat,\n+    Unauthorized,\n+    Forbidden,\n+    NotFound,\n+    Conflict,\n+\n+    /**\n+     * Represents status code for 429 and for status code 429001\n+     */\n+    PreconditionFailed,\n+\n+    RequestEntityTooLarge,", "originalCommit": "dc1ca91d42a55973049f5a54c367263f0c250953", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MzAwMw==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428953003", "bodyText": "The javadoc is only visible when using intellisense for the PreconditionFailed enum value. It means that the service may return a 429, and it may return a 429001, but in both cases it maps to this enum value", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:38:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjUxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1NDkzNQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428954935", "bodyText": "Ah, the spacing and block comments confused me.", "author": "abhipsaMisra", "createdAt": "2020-05-21T22:45:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjUxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjU4OQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428952589", "bodyText": "Both of these codes map to ServiceUnavailable?", "author": "abhipsaMisra", "createdAt": "2020-05-21T22:37:22Z", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/ErrorCodeDescription.java", "diffHunk": "@@ -0,0 +1,193 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+/**\n+ * See https://docs.microsoft.com/en-us/rest/api/iothub/common-error-codes for additional details\n+ */\n+public enum ErrorCodeDescription\n+{\n+    // These descriptions belong to fully qualified status codes, such as 404001\n+    UnclassifiedErrorCode,\n+    InvalidProtocolVersion,\n+    DeviceInvalidResultCount,\n+    InvalidOperation,\n+    ArgumentInvalid,\n+    ArgumentNull,\n+    IotHubFormatError,\n+    DeviceStorageEntitySerializationError,\n+    BlobContainerValidationError,\n+    ImportWarningExistsError,\n+    InvalidSchemaVersion,\n+    DeviceDefinedMultipleTimes,\n+    DeserializationError,\n+    BulkRegistryOperationFailure,\n+    CannotRegisterModuleToModule,\n+    IotHubNotFound,\n+    IotHubUnauthorizedAccess,\n+    IotHubUnauthorized,\n+    IotHubSuspended,\n+    IotHubQuotaExceeded,\n+    JobQuotaExceeded,\n+    DeviceMaximumQueueDepthExceeded,\n+    IotHubMaxCbsTokenExceeded,\n+    DeviceNotFound,\n+    JobNotFound,\n+    PartitionNotFound,\n+    ModuleNotFound,\n+    DeviceAlreadyExists,\n+    ModuleAlreadyExistsOnDevice,\n+    DeviceMessageLockLost,\n+    MessageTooLarge,\n+    TooManyDevices,\n+    TooManyModulesOnDevice,\n+    ThrottleBacklogLimitExceeded,\n+    InvalidThrottleParameter,\n+    ServerError,\n+    JobCancelled,\n+    ConnectionForcefullyClosedOnNewConnection,\n+    DeviceNotOnline,\n+    DeviceConnectionClosedRemotely,\n+\n+    // These descriptions belong to 3 digit http response codes such as 404.\n+    BadFormat,\n+    Unauthorized,\n+    Forbidden,\n+    NotFound,\n+    Conflict,\n+\n+    /**\n+     * Represents status code for 429 and for status code 429001\n+     */\n+    PreconditionFailed,\n+\n+    RequestEntityTooLarge,\n+\n+    /**\n+     * Represents status code for 429 and 429001\n+     */\n+    ThrottlingException,\n+    InternalServerError,\n+\n+    /**\n+     * Defined for status code 503 and 503001\n+     */\n+    ServiceUnavailable;", "originalCommit": "dc1ca91d42a55973049f5a54c367263f0c250953", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1NDg4OA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428954888", "bodyText": "Yep, weirdly", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:44:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjU4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1NjYzOQ==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428956639", "bodyText": "Registry manager ops gets 503, whereas a device method invocation likely gets a 503001 based on my research so far. In both cases, though, the service is telling the SDK that the service is unavailable", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:50:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MjU4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1Mjg0NA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428952844", "bodyText": "Is there a better name for this enum than \"Description\"? This isn't really a description.", "author": "abhipsaMisra", "createdAt": "2020-05-21T22:38:14Z", "path": "deps/src/main/java/com/microsoft/azure/sdk/iot/deps/serializer/ErrorCodeDescription.java", "diffHunk": "@@ -0,0 +1,193 @@\n+package com.microsoft.azure.sdk.iot.deps.serializer;\n+\n+/**\n+ * See https://docs.microsoft.com/en-us/rest/api/iothub/common-error-codes for additional details\n+ */\n+public enum ErrorCodeDescription\n+{\n+    // These descriptions belong to fully qualified status codes, such as 404001\n+    UnclassifiedErrorCode,", "originalCommit": "dc1ca91d42a55973049f5a54c367263f0c250953", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MzI3Mw==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/782#discussion_r428953273", "bodyText": "The enum is called \"ErrorCodeDescription\" because it describes what the error code (404001, etc) mean. I can't think of a better name.", "author": "timtay-microsoft", "createdAt": "2020-05-21T22:39:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1Mjg0NA=="}], "type": "inlineReview"}]}