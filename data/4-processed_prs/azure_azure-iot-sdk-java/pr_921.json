{"pr_number": 921, "pr_title": "fix(iot-dev): fix issue where edgelet hsm requests did not support http", "pr_createdAt": "2020-09-18T18:12:13Z", "pr_url": "https://github.com/Azure/azure-iot-sdk-java/pull/921", "timeline": [{"oid": "2803a49127628676c6272d19ee2417e7530ea900", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/2803a49127628676c6272d19ee2417e7530ea900", "message": "fix(iot-dev): fix issue where edgelet hsm requests did not support http\n\nSome edgelet uris are http requests to localhosts, so the SDK needs to support that.\n\nissue #914", "committedDate": "2020-09-18T18:11:36Z", "type": "commit"}, {"oid": "1c3dd086b6c5fbf8aa874a6045b26ff311d6a914", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/1c3dd086b6c5fbf8aa874a6045b26ff311d6a914", "message": "Merge branch 'master' into timtay/http", "committedDate": "2020-09-18T18:12:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE4NTEzNA==", "url": "https://github.com/Azure/azure-iot-sdk-java/pull/921#discussion_r491185134", "bodyText": "you added javadocs so might as well add @param isHttps", "author": "azabbasi", "createdAt": "2020-09-18T20:52:00Z", "path": "device/iot-device-client/src/main/java/com/microsoft/azure/sdk/iot/device/transport/https/HttpsRequest.java", "diffHunk": "@@ -93,13 +93,41 @@ public HttpsRequest(URL url, HttpsMethod method, byte[] body, String userAgentSt\n      * input/output streams could not be accessed.\n      */\n     public HttpsResponse send() throws TransportException\n+    {\n+        return send(true);\n+    }\n+\n+    /**\n+     * Executes the HTTPS request as an HTTP request. This method should only be called when a user supplied\n+     * url contains HTTP rather than HTTPS. Currently, this only happens from the {@link com.microsoft.azure.sdk.iot.device.hsm.HttpsHsmClient}\n+     * for some edge workload urls.\n+     *\n+     * @return an HTTPS response.\n+     *\n+     * @throws TransportException if the connection could not be established, or the\n+     * input/output streams could not be accessed.\n+     */\n+    public HttpsResponse sendAsHttpRequest() throws TransportException\n+    {\n+        return send(false);\n+    }\n+\n+    /**\n+     * Executes the HTTPS request.\n+     *\n+     * @return an HTTPS response.\n+     *\n+     * @throws TransportException if the connection could not be established, or the\n+     * input/output streams could not be accessed.\n+     */\n+    private HttpsResponse send(boolean isHttps) throws TransportException", "originalCommit": "1c3dd086b6c5fbf8aa874a6045b26ff311d6a914", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "873b0c83f1dd77f89001d66e1fedcc85ff927363", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/873b0c83f1dd77f89001d66e1fedcc85ff927363", "message": "squash", "committedDate": "2020-09-18T21:35:16Z", "type": "commit"}, {"oid": "91d3e7361742ad0508110e35cbe2b2079eeb576a", "url": "https://github.com/Azure/azure-iot-sdk-java/commit/91d3e7361742ad0508110e35cbe2b2079eeb576a", "message": "Merge branch 'master' into timtay/http", "committedDate": "2020-09-21T16:31:10Z", "type": "commit"}]}