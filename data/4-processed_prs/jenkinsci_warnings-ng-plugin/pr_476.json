{"pr_number": 476, "pr_title": "JENKINS-62191 Add UI test for Dashboard View", "pr_createdAt": "2020-05-14T11:10:40Z", "pr_url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM1OTU0Ng==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r425359546", "bodyText": "Das gibt es schon im PageObject", "author": "uhafner", "createdAt": "2020-05-14T18:51:30Z", "path": "ui-tests/src/main/java/io/jenkins/plugins/analysis/warnings/DashboardTable.java", "diffHunk": "@@ -0,0 +1,61 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.WebElement;\n+\n+import org.jenkinsci.test.acceptance.po.Build;\n+import org.jenkinsci.test.acceptance.po.PageObject;\n+\n+public class DashboardTable extends PageObject {\n+\n+    private final String portletId;\n+\n+    public DashboardTable(final Build parent, final URL url, final String portletId) {\n+        super(parent, url);\n+        this.portletId = portletId;\n+\n+    }\n+\n+    public WebDriver open() {", "originalCommit": "6995b441240d4a9a78d86a7386e617e62ac43c16", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM2MDcwMA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r425360700", "bodyText": "Wenn Sie einmal auf der Console mvn assertj:generate-assertions aufrufen, werden die custom Assertions generiert. Dann geht\nassertThat(headers).hasPaneHeaders(\"Job\",\"CheckStyle Warnings\" );", "author": "uhafner", "createdAt": "2020-05-14T18:53:43Z", "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/DashboardViewPortletUITest.java", "diffHunk": "@@ -0,0 +1,100 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+import java.util.List;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.TestInstance;\n+import org.junit.jupiter.api.TestInstance.Lifecycle;\n+import org.openqa.selenium.WebElement;\n+\n+import org.jenkinsci.test.acceptance.junit.AbstractJUnitTest;\n+import org.jenkinsci.test.acceptance.plugins.dashboard_view.AbstractDashboardViewPortlet;\n+import org.jenkinsci.test.acceptance.plugins.dashboard_view.DashboardView;\n+import org.jenkinsci.test.acceptance.po.Build;\n+import org.jenkinsci.test.acceptance.po.FreeStyleJob;\n+import org.jenkinsci.test.acceptance.po.Job;\n+\n+import io.jenkins.plugins.analysis.warnings.AnalysisResult.Tab;\n+import io.jenkins.plugins.analysis.warnings.AnalysisSummary.InfoType;\n+\n+import static io.jenkins.plugins.analysis.warnings.Assertions.*;\n+\n+/**\n+ * Integration tests for the dashboard portlet.\n+ *\n+ * @author Lukas Kirner\n+ */\n+public class DashboardViewPortletUITest extends AbstractJUnitTest {\n+    private static final String WARNINGS_PLUGIN_PREFIX = \"/\";\n+\n+    @Test\n+    public void shouldShowIcons() {\n+        DashboardView dashboardView = createDashboardWithStaticAnalysisPortlet(false, true);\n+        FreeStyleJob job = createFreeStyleJob(\"issue_filter/checkstyle-result.xml\");\n+        job.addPublisher(IssuesRecorder.class, recorder -> recorder.setTool(\"CheckStyle\"));\n+        job.save();\n+        Build build = shouldBuildJobSuccessfully(job);\n+\n+        DashboardTable dashboardTable = new DashboardTable(build, dashboardView.url, \"portlet-topPortlets-\" + 0);\n+        dashboardTable.open();\n+\n+        List<String> headers = dashboardTable.getPaneHeaders();\n+        assertThat(headers.get(0)).contains(\"Job\");", "originalCommit": "6995b441240d4a9a78d86a7386e617e62ac43c16", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "05f30dcc85bf08f1ba19311cc93d7edfb415becc", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/05f30dcc85bf08f1ba19311cc93d7edfb415becc", "message": "added Dashboard creation with portlet", "committedDate": "2020-05-23T14:33:05Z", "type": "commit"}, {"oid": "0570594faeb38d0b338e791d5501dee92cbeeb8e", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/0570594faeb38d0b338e791d5501dee92cbeeb8e", "message": "Show icons test", "committedDate": "2020-05-23T14:33:05Z", "type": "commit"}, {"oid": "7bd29b770b2622099382f3a9f5a88f8a885232a8", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/7bd29b770b2622099382f3a9f5a88f8a885232a8", "message": "Adjust Dashboard Table", "committedDate": "2020-05-23T14:33:05Z", "type": "commit"}, {"oid": "29ddc7f035babc87c00e2ba54404e4951332fdc1", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/29ddc7f035babc87c00e2ba54404e4951332fdc1", "message": "Added tests for multiple jobs", "committedDate": "2020-05-23T14:33:05Z", "type": "commit"}, {"oid": "29ddc7f035babc87c00e2ba54404e4951332fdc1", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/29ddc7f035babc87c00e2ba54404e4951332fdc1", "message": "Added tests for multiple jobs", "committedDate": "2020-05-23T14:33:05Z", "type": "forcePushed"}, {"oid": "5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3", "message": "Use generated asserts", "committedDate": "2020-05-23T14:40:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzNzY5MA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r431437690", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertThat(headers.get(0)).contains(\"Job\");\n          \n          \n            \n                    assertThat(headers.get(1)).contains(\"\");\n          \n          \n            \n                    assertThat(headers).containsExactly(\"Job\", \"\");", "author": "uhafner", "createdAt": "2020-05-27T20:57:44Z", "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/DashboardViewPortletUITest.java", "diffHunk": "@@ -0,0 +1,202 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+import java.util.List;\n+import java.util.Map;\n+import org.junit.Test;\n+import org.jenkinsci.test.acceptance.junit.AbstractJUnitTest;\n+import org.jenkinsci.test.acceptance.plugins.dashboard_view.DashboardView;\n+import org.jenkinsci.test.acceptance.po.Build;\n+import org.jenkinsci.test.acceptance.po.FreeStyleJob;\n+import org.jenkinsci.test.acceptance.po.Job;\n+import io.jenkins.plugins.analysis.warnings.DashboardTable.DashboardTableEntry;\n+import static io.jenkins.plugins.analysis.warnings.Assertions.*;\n+\n+/**\n+ * Integration tests for the dashboard portlet.\n+ *\n+ * @author Lukas Kirner\n+ */\n+public class DashboardViewPortletUITest extends AbstractJUnitTest {\n+    private static final String WARNINGS_PLUGIN_PREFIX = \"/dashboard_test/\";\n+\n+    @Test\n+    public void shouldShowIcons() {\n+        DashboardView dashboardView = createDashboardWithStaticAnalysisPortlet(false, true);\n+        FreeStyleJob job = createFreeStyleJob(\"checkstyle-result.xml\");\n+        job.addPublisher(IssuesRecorder.class, recorder -> recorder.setTool(\"CheckStyle\"));\n+        job.save();\n+        Build build = shouldBuildJobSuccessfully(job);\n+\n+        DashboardTable dashboardTable = new DashboardTable(build, dashboardView.url);\n+\n+        List<String> headers = dashboardTable.getHeaders();\n+        assertThat(headers.get(0)).contains(\"Job\");\n+        assertThat(headers.get(1)).contains(\"\");", "originalCommit": "5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzODcwNQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r431438705", "bodyText": "Genau genommen zeigt der Test, dass kein Text da ist. Gibt es eine M\u00f6glichkeit einen weiteren Getter im PO zu haben: getIconNames, der analog arbeitet?", "author": "uhafner", "createdAt": "2020-05-27T20:59:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzNzY5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzOTkzNw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/476#discussion_r431439937", "bodyText": "Da meckert Checkstyle noch einige JavaDoc Kommentare an...", "author": "uhafner", "createdAt": "2020-05-27T21:01:58Z", "path": "ui-tests/src/main/java/io/jenkins/plugins/analysis/warnings/DashboardTable.java", "diffHunk": "@@ -0,0 +1,90 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+import java.net.URL;\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+import org.openqa.selenium.WebElement;\n+import org.jenkinsci.test.acceptance.po.Build;\n+import org.jenkinsci.test.acceptance.po.PageObject;\n+\n+public class DashboardTable extends PageObject {", "originalCommit": "5bbb690844b6a4f86aeeab0a4d66c3ae17da1ad3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e38454944de16cd871b9cb77c0004765557fa53f", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/e38454944de16cd871b9cb77c0004765557fa53f", "message": "- Added icon src to headers\n- Checkstyle corrections", "committedDate": "2020-05-28T10:16:35Z", "type": "commit"}]}