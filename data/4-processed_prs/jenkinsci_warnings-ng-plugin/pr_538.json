{"pr_number": 538, "pr_title": "Feature/global config smoke", "pr_createdAt": "2020-06-24T16:39:03Z", "pr_url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538", "timeline": [{"oid": "d36be70239720fc8a8a01713f2e37537766be6fc", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/d36be70239720fc8a8a01713f2e37537766be6fc", "message": "Merge pull request #1 from jenkinsci/master\n\nupdate master", "committedDate": "2020-06-24T12:39:43Z", "type": "commit"}, {"oid": "5f2784cbe4e8268623660e0d531646419f669a0b", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/5f2784cbe4e8268623660e0d531646419f669a0b", "message": "refactor freestyle smoke test for global config page objects", "committedDate": "2020-06-24T15:10:08Z", "type": "commit"}, {"oid": "a08275ec3730a490276c00379534aceb72bfa052", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/a08275ec3730a490276c00379534aceb72bfa052", "message": "refactor pipeline smoke test for global config page objects", "committedDate": "2020-06-24T16:06:51Z", "type": "commit"}, {"oid": "39dd26d94c149494d64799d2709f956cc977ed95", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/39dd26d94c149494d64799d2709f956cc977ed95", "message": "align parser names for easier test execution", "committedDate": "2020-06-24T16:16:46Z", "type": "commit"}, {"oid": "d5ae86ef27e79314d551a18d86a08d6ceab01d0f", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/d5ae86ef27e79314d551a18d86a08d6ceab01d0f", "message": "rollback temporary method change", "committedDate": "2020-06-24T16:17:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAyOTM5NQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445029395", "bodyText": "In den beiden Smoke Tests ist beim \u00d6ffnen der Details der Issues-Tab aktiv (und nicht der Categories-Tab). Daher musste ich auch beim GlobalConfigurationUiTest die Methode wieder \u00fcberschreiben, damits wieder passt.\nIst das normal, dass an dieser Stelle der aktive Tab auf einmal anders ist?\nWeil jedes andere Plugin und der Groovy Parser selbst (wenn er das einzige Plugin ist) hier eben den Categories-Tab aktiv hat.", "author": "astiglme", "createdAt": "2020-06-24T16:42:52Z", "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/UiTest.java", "diffHunk": "@@ -251,6 +254,42 @@ protected void verifyCheckStyle(final Build build) {\n                 .hasErrorMessages(\"Can't create fingerprints for some files:\");\n     }\n \n+    protected void verifyPep8(final Build build) {\n+        build.open();\n+        AnalysisSummary pep8 = new AnalysisSummary(build, PEP8_ID);\n+        assertThat(pep8).isDisplayed()\n+                .hasTitleText(PEP8_NAME + \": 8 warnings\")\n+                .hasReferenceBuild(1)\n+                .hasInfoType(InfoType.ERROR);\n+\n+        AnalysisResult pep8details = pep8.openOverallResult();\n+        assertThat(pep8details).hasActiveTab(Tab.ISSUES)", "originalCommit": "bb1b24006a7cbf849cb5445ea84be2e1068e8665", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a", "message": "fix different pep8 verification", "committedDate": "2020-06-24T17:19:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA1MjAwNw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445052007", "bodyText": "In den beiden Smoke Tests ist beim \u00d6ffnen der Details der Issues-Tab aktiv (und nicht der Categories-Tab). Daher musste ich auch beim GlobalConfigurationUiTest die Methode wieder \u00fcberschreiben, damits wieder passt.\nIst das normal, dass an dieser Stelle der aktive Tab auf einmal anders ist?\nWeil jedes andere Plugin und der Groovy Parser selbst (wenn er das einzige Plugin ist) hier eben den Categories-Tab aktiv hat.", "author": "astiglme", "createdAt": "2020-06-24T17:21:24Z", "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/UiTest.java", "diffHunk": "@@ -251,6 +254,43 @@ protected void verifyCheckStyle(final Build build) {\n                 .hasErrorMessages(\"Can't create fingerprints for some files:\");\n     }\n \n+    protected void verifyPep8(final Build build) {\n+        verifyPep8(build, 1);\n+    }\n+\n+    protected void verifyPep8(final Build build, final int referenceBuild) {\n+        build.open();\n+        AnalysisSummary pep8 = new AnalysisSummary(build, PEP8_ID);\n+        assertThat(pep8).isDisplayed()\n+                .hasTitleText(PEP8_NAME + \": 8 warnings\")\n+                .hasReferenceBuild(referenceBuild)\n+                .hasInfoType(InfoType.ERROR);\n+\n+        AnalysisResult pep8Details = verifyPep8Details(pep8);\n+\n+        pep8Details.openTab(Tab.ISSUES);\n+        IssuesDetailsTable issuesTable = pep8Details.openIssuesTable();\n+        assertThat(issuesTable).hasSize(8);\n+\n+        long normalIssueCount = issuesTable.getTableRows().stream()\n+                .map(row -> row.getAs(IssuesTableRow.class).getSeverity())\n+                .filter(severity -> severity.equals(\"Normal\")).count();\n+\n+        long lowIssueCount = issuesTable.getTableRows().stream()\n+                .map(row -> row.getAs(IssuesTableRow.class).getSeverity())\n+                .filter(severity -> severity.equals(\"Low\")).count();\n+\n+        assertThat(normalIssueCount).isEqualTo(6);\n+        assertThat(lowIssueCount).isEqualTo(2);\n+    }\n+\n+    protected AnalysisResult verifyPep8Details (final AnalysisSummary pep8) {\n+        AnalysisResult pep8Details = pep8.openOverallResult();\n+        assertThat(pep8Details).hasActiveTab(Tab.ISSUES)", "originalCommit": "e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzNTAyMw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445135023", "bodyText": "Der aktive Tab wird gespeichert (im Browser local storage). So hat man als Nutzer immer den letzten aktiven Tab sichtbar, egal wo man hinnavigiert. In den Tests hat sich das unbewusst so ergeben, da die ersten Tests nur den Issues Tab anzeigen.", "author": "uhafner", "createdAt": "2020-06-24T19:54:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA1MjAwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIxMzY1Ng==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445213656", "bodyText": "Ahh cool, ich wusste gar nicht, dass an der Stelle sogar gecached wird. Dann passt das Verhalten ja :)", "author": "astiglme", "createdAt": "2020-06-24T22:49:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA1MjAwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA1MzQxNQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445053415", "bodyText": "Wenn ich auch hier, wie bei den andern verify..() methoden die InfoView vergleichen m\u00f6chte, dann kann leider die info page nicht gefunden werden. (Obwohl es manuell per URL eingeben klappt)\nWissen Sie eventuell warum das so ist?\nassertThat(openInfoView(build, PEP8_ID)) .hasInfoMessages(\"-> found 1 file\", \"-> found 8 issues (skipped 0 duplicates)\", \"Issues delta (vs. reference build): outstanding: 0, new: 8, fixed: 0\") .hasErrorMessages(\"Can't create fingerprints for some files:\");", "author": "astiglme", "createdAt": "2020-06-24T17:23:54Z", "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/UiTest.java", "diffHunk": "@@ -251,6 +254,43 @@ protected void verifyCheckStyle(final Build build) {\n                 .hasErrorMessages(\"Can't create fingerprints for some files:\");\n     }\n \n+    protected void verifyPep8(final Build build) {\n+        verifyPep8(build, 1);\n+    }\n+\n+    protected void verifyPep8(final Build build, final int referenceBuild) {\n+        build.open();\n+        AnalysisSummary pep8 = new AnalysisSummary(build, PEP8_ID);\n+        assertThat(pep8).isDisplayed()\n+                .hasTitleText(PEP8_NAME + \": 8 warnings\")\n+                .hasReferenceBuild(referenceBuild)\n+                .hasInfoType(InfoType.ERROR);\n+\n+        AnalysisResult pep8Details = verifyPep8Details(pep8);\n+\n+        pep8Details.openTab(Tab.ISSUES);\n+        IssuesDetailsTable issuesTable = pep8Details.openIssuesTable();\n+        assertThat(issuesTable).hasSize(8);\n+\n+        long normalIssueCount = issuesTable.getTableRows().stream()\n+                .map(row -> row.getAs(IssuesTableRow.class).getSeverity())\n+                .filter(severity -> severity.equals(\"Normal\")).count();\n+\n+        long lowIssueCount = issuesTable.getTableRows().stream()\n+                .map(row -> row.getAs(IssuesTableRow.class).getSeverity())\n+                .filter(severity -> severity.equals(\"Low\")).count();\n+\n+        assertThat(normalIssueCount).isEqualTo(6);\n+        assertThat(lowIssueCount).isEqualTo(2);\n+    }", "originalCommit": "e4a640497b1f6b8a51ca5d40d9183b1b2b9b009a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE1MzU1OQ==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445153559", "bodyText": "Ich glaube, Sie m\u00fcssen build.open() vorher ausf\u00fchren. (Sinnvollerweise sollte das vielleicht in der openInfoView Methode selbst gemacht werden, dann muss man das nicht jedesmal selbst davor ausf\u00fchren)", "author": "uhafner", "createdAt": "2020-06-24T20:30:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA1MzQxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIxMzEzOA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/538#discussion_r445213138", "bodyText": "Ohh mann... das ist \u00e4rgerlich. Ich hab einfach vergessen, den build.open() Befehl mit zu ziehen und es ist mir nicht aufgefallen.\nVielen Dank f\u00fcr den Hinweis :)\nIch hab den build.open()  Befehl mit reingezogen (Und zwar schon einen Schritt vorher im Konstruktor der Summary, weil das da ja eigentlich auch schon notwendig ist.)", "author": "astiglme", "createdAt": "2020-06-24T22:47:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA1MzQxNQ=="}], "type": "inlineReview"}, {"oid": "3e2b3593839092b0e8b18df30bf40c467adcff2c", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/3e2b3593839092b0e8b18df30bf40c467adcff2c", "message": "add info view assertion for groovy parser", "committedDate": "2020-06-24T22:36:03Z", "type": "commit"}, {"oid": "14e42e2b5668360ca6bf601a7ceb9440ac7a64cb", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/14e42e2b5668360ca6bf601a7ceb9440ac7a64cb", "message": "remove unnecessary build.open", "committedDate": "2020-06-24T22:42:42Z", "type": "commit"}]}