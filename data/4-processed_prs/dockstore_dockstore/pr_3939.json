{"pr_number": 3939, "pr_title": "Feature/3917/circle ci cleanup", "pr_createdAt": "2020-11-20T05:55:23Z", "pr_url": "https://github.com/dockstore/dockstore/pull/3939", "timeline": [{"oid": "59034cb69a707d0369bea4b57f94646317b9b098", "url": "https://github.com/dockstore/dockstore/commit/59034cb69a707d0369bea4b57f94646317b9b098", "message": "Update postgres, resource class, cache m2", "committedDate": "2020-11-17T16:37:46Z", "type": "commit"}, {"oid": "8c9453061873aa78af426035b10540d937b8ebb3", "url": "https://github.com/dockstore/dockstore/commit/8c9453061873aa78af426035b10540d937b8ebb3", "message": "Fix", "committedDate": "2020-11-17T16:50:48Z", "type": "commit"}, {"oid": "20f51ea7a4ee3caadcd10afad4d9ac48c0384f2e", "url": "https://github.com/dockstore/dockstore/commit/20f51ea7a4ee3caadcd10afad4d9ac48c0384f2e", "message": "Don't decrypt twice", "committedDate": "2020-11-17T18:04:56Z", "type": "commit"}, {"oid": "f2d298eba7340aa426912845b470cd603300d35e", "url": "https://github.com/dockstore/dockstore/commit/f2d298eba7340aa426912845b470cd603300d35e", "message": "Merge with parent", "committedDate": "2020-11-17T18:04:56Z", "type": "commit"}, {"oid": "47050ceefda45b6ef23f688630a2675a3e57a767", "url": "https://github.com/dockstore/dockstore/commit/47050ceefda45b6ef23f688630a2675a3e57a767", "message": "Simplify + prettier", "committedDate": "2020-11-18T16:54:30Z", "type": "commit"}, {"oid": "82d1003d1e7381d4d613603bbd8af9aadf5e86df", "url": "https://github.com/dockstore/dockstore/commit/82d1003d1e7381d4d613603bbd8af9aadf5e86df", "message": "Disable cache in hopes of fixing test", "committedDate": "2020-11-18T18:55:55Z", "type": "commit"}, {"oid": "78368f790f8be58f16972fa3f472efc3d0eae3b2", "url": "https://github.com/dockstore/dockstore/commit/78368f790f8be58f16972fa3f472efc3d0eae3b2", "message": "Fix checkstyle", "committedDate": "2020-11-18T18:59:46Z", "type": "commit"}, {"oid": "989a04f0d7651ad123a0bd3a83d29ca695ef6296", "url": "https://github.com/dockstore/dockstore/commit/989a04f0d7651ad123a0bd3a83d29ca695ef6296", "message": "Don't use cache for unit tests to maybe avoid PGP error", "committedDate": "2020-11-20T15:16:34Z", "type": "forcePushed"}, {"oid": "f1da6a6cd6e5410405769090c0d9587266509a8c", "url": "https://github.com/dockstore/dockstore/commit/f1da6a6cd6e5410405769090c0d9587266509a8c", "message": "Fix test", "committedDate": "2020-11-20T15:23:12Z", "type": "commit"}, {"oid": "3763ceea92d72cbc5c3a7c6872c8d22d74d79035", "url": "https://github.com/dockstore/dockstore/commit/3763ceea92d72cbc5c3a7c6872c8d22d74d79035", "message": "Attempt to prevent connection leak", "committedDate": "2020-11-20T15:23:12Z", "type": "commit"}, {"oid": "7695004c57f4ac5e51a2101aa7f98fbf74208e28", "url": "https://github.com/dockstore/dockstore/commit/7695004c57f4ac5e51a2101aa7f98fbf74208e28", "message": "Close health check", "committedDate": "2020-11-20T15:23:12Z", "type": "commit"}, {"oid": "718fbc7ac3da2fd342d30fc491d9d434ab4bccff", "url": "https://github.com/dockstore/dockstore/commit/718fbc7ac3da2fd342d30fc491d9d434ab4bccff", "message": "Close more health checks", "committedDate": "2020-11-20T15:23:12Z", "type": "commit"}, {"oid": "1295b4f0710f9774f7139712e95e9310bf67a91b", "url": "https://github.com/dockstore/dockstore/commit/1295b4f0710f9774f7139712e95e9310bf67a91b", "message": "Remove locks to make problems more apparent", "committedDate": "2020-11-20T15:23:12Z", "type": "commit"}, {"oid": "06ab704fde72a108c1c63445702e20f2c71d7328", "url": "https://github.com/dockstore/dockstore/commit/06ab704fde72a108c1c63445702e20f2c71d7328", "message": "Merge branch 'develop' into feature/3917/CircleCICleanup", "committedDate": "2020-11-20T15:23:47Z", "type": "commit"}, {"oid": "06ab704fde72a108c1c63445702e20f2c71d7328", "url": "https://github.com/dockstore/dockstore/commit/06ab704fde72a108c1c63445702e20f2c71d7328", "message": "Merge branch 'develop' into feature/3917/CircleCICleanup", "committedDate": "2020-11-20T15:23:47Z", "type": "forcePushed"}, {"oid": "27f5f26d2d85b6d8f4d303b3fe20d2dd8539ecb3", "url": "https://github.com/dockstore/dockstore/commit/27f5f26d2d85b6d8f4d303b3fe20d2dd8539ecb3", "message": "Remove all caching from unit tests for PGP debug", "committedDate": "2020-11-20T15:50:14Z", "type": "commit"}, {"oid": "3ebebd76be02000c4e4988510963584842781bc1", "url": "https://github.com/dockstore/dockstore/commit/3ebebd76be02000c4e4988510963584842781bc1", "message": "Make it smaller so there's more time to release connections", "committedDate": "2020-11-20T18:37:58Z", "type": "commit"}, {"oid": "d81e91027ed7f3a422809b6515bd3712aa71678e", "url": "https://github.com/dockstore/dockstore/commit/d81e91027ed7f3a422809b6515bd3712aa71678e", "message": "Disable PGP for now", "committedDate": "2020-11-20T19:41:58Z", "type": "commit"}, {"oid": "3d8b23989a6780f11e917fc33f6639fb2fa6afe0", "url": "https://github.com/dockstore/dockstore/commit/3d8b23989a6780f11e917fc33f6639fb2fa6afe0", "message": "Sleep while waiting for connections to die", "committedDate": "2020-11-20T22:41:12Z", "type": "forcePushed"}, {"oid": "3516e0b5a93dfb272876442159970b6667149599", "url": "https://github.com/dockstore/dockstore/commit/3516e0b5a93dfb272876442159970b6667149599", "message": "Increase max connections, revert everything else", "committedDate": "2020-11-21T02:11:17Z", "type": "forcePushed"}, {"oid": "870bf58a602004b7e79fe4e95839f00eba1d4235", "url": "https://github.com/dockstore/dockstore/commit/870bf58a602004b7e79fe4e95839f00eba1d4235", "message": "Increase max connections", "committedDate": "2020-11-21T04:30:55Z", "type": "forcePushed"}, {"oid": "9a9bea1286b52237ed9f7c891011ce8c147886c9", "url": "https://github.com/dockstore/dockstore/commit/9a9bea1286b52237ed9f7c891011ce8c147886c9", "message": "Increase max connections", "committedDate": "2020-11-21T06:04:58Z", "type": "forcePushed"}, {"oid": "9e354bb43469c6e1af5d24bdd5a04563f30f9631", "url": "https://github.com/dockstore/dockstore/commit/9e354bb43469c6e1af5d24bdd5a04563f30f9631", "message": "Increase max connections", "committedDate": "2020-11-21T07:01:48Z", "type": "commit"}, {"oid": "9e354bb43469c6e1af5d24bdd5a04563f30f9631", "url": "https://github.com/dockstore/dockstore/commit/9e354bb43469c6e1af5d24bdd5a04563f30f9631", "message": "Increase max connections", "committedDate": "2020-11-21T07:01:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAyODcxMA==", "url": "https://github.com/dockstore/dockstore/pull/3939#discussion_r529028710", "bodyText": "I must have missed this in the previous review, but do the instructions for updating the confidential file mention this file? Or maybe a comment in encrypt.sh\nDigression: it would be nicer if the zip didn't have the nested directory, then you wouldn't need to specify the folder as a second param. But that's way out of scope, and there are possibly issues doing it that way.", "author": "coverbeck", "createdAt": "2020-11-23T22:10:56Z", "path": ".circleci/config.yml", "diffHunk": "@@ -279,31 +278,15 @@ commands:\n       - run:\n           name: install pip dependencies\n           command: scripts/install-tests.sh\n-      - run:\n-          name: Install postgresql client\n-          command: |\n-            sudo rm -rf /var/lib/apt/lists/*\n-            sudo apt update\n-            sudo apt install -y postgresql-client\n-      - run:\n-          name: decrypt\n-          command: |\n-            sudo apt install openssl -y\n-            openssl aes-256-cbc -d -in circle_ci_test_data.zip.enc -k $CIRCLE_CI_KEY -iv $CIRCLE_CI_IV >> test_data.zip\n-            bash expand_confidential_bundle.sh test_data.zip abandonDatabaseConnectionsWithOrcid            \n       - run:\n           name: expand confidential data\n           command: |\n             bash expand_confidential_bundle.sh test_data.zip abandonDatabaseConnectionsWithOrcid ", "originalCommit": "9e354bb43469c6e1af5d24bdd5a04563f30f9631", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MzMzOA==", "url": "https://github.com/dockstore/dockstore/pull/3939#discussion_r529043338", "bodyText": "part of 2nd PR and yes, i've actually gotten rid of the expand_confidential file script already", "author": "garyluu", "createdAt": "2020-11-23T22:42:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAyODcxMA=="}], "type": "inlineReview"}]}