{"pr_number": 3724, "pr_title": "support a BOM", "pr_createdAt": "2020-08-07T23:21:14Z", "pr_url": "https://github.com/dockstore/dockstore/pull/3724", "timeline": [{"oid": "4874ca06ac1521d2563b740ec2d06e1bec138494", "url": "https://github.com/dockstore/dockstore/commit/4874ca06ac1521d2563b740ec2d06e1bec138494", "message": "support a BOM", "committedDate": "2020-08-07T23:04:18Z", "type": "commit"}, {"oid": "3ea510d97c481f8997faa5b56babf7c4f0c88f73", "url": "https://github.com/dockstore/dockstore/commit/3ea510d97c481f8997faa5b56babf7c4f0c88f73", "message": "Merge branch 'develop' into feature/artifact-versions", "committedDate": "2020-08-07T23:26:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxNzIxNA==", "url": "https://github.com/dockstore/dockstore/pull/3724#discussion_r468017214", "bodyText": "dockstore-cli doesn't seem right for this repo", "author": "denis-yuen", "createdAt": "2020-08-10T16:08:18Z", "path": "dockstore-projects-bom/pom.xml", "diffHunk": "@@ -0,0 +1,1072 @@\n+<!--\n+  ~    Copyright 2020 OICR\n+  ~\n+  ~    Licensed under the Apache License, Version 2.0 (the \"License\");\n+  ~    you may not use this file except in compliance with the License.\n+  ~    You may obtain a copy of the License at\n+  ~\n+  ~        http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~    Unless required by applicable law or agreed to in writing, software\n+  ~    distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~    See the License for the specific language governing permissions and\n+  ~    limitations under the License.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <groupId>io.dockstore</groupId>\n+    <artifactId>dockstore-projects-bom</artifactId>\n+    <version>1.10.0-alpha.0-SNAPSHOT</version>\n+    <packaging>pom</packaging>\n+\n+    <name>dockstore-projects-bom</name>\n+    <description>dockstore projects BOM</description>\n+\n+    <properties>\n+        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n+        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n+        <github.url>scm:git:git@github.com:dockstore/dockstore-cli.git</github.url>", "originalCommit": "3ea510d97c481f8997faa5b56babf7c4f0c88f73", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NDk1Mw==", "url": "https://github.com/dockstore/dockstore/pull/3724#discussion_r468044953", "bodyText": "removed extraneous properties", "author": "wshands", "createdAt": "2020-08-10T16:54:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxNzIxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAyMzM2Nw==", "url": "https://github.com/dockstore/dockstore/pull/3724#discussion_r468023367", "bodyText": "Why did these get added? A comment could be useful.", "author": "coverbeck", "createdAt": "2020-08-10T16:18:17Z", "path": "dockstore-webservice/pom.xml", "diffHunk": "@@ -919,7 +871,11 @@\n                             <failOnWarning>true</failOnWarning>\n                             <outputXML>true</outputXML>\n                             <ignoreNonCompile>true</ignoreNonCompile>\n-\n+                            <ignoredDependencies>", "originalCommit": "3ea510d97c481f8997faa5b56babf7c4f0c88f73", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA2MDQyNg==", "url": "https://github.com/dockstore/dockstore/pull/3724#discussion_r468060426", "bodyText": "1. Just to understand, is this BOM supposed to have only the common dependencies between dockstore-cli and dockstore-webservice? Or is it between dockstore-cli and the whole dockstore repo?\nThis BOM contains all the dependencies for both the dockstore-cli and the dockstore repo projects. This is because the original dependencyManagement sections are located in the top level parent POM, and the dependecyManagement section is inherited by the other POMs that indicate the top level POM as their parent.\n2. I'm not wild about the name dockstore-projects-bom -- I would lean towards dockstore-bom, or depending on the answer to above, dockstore-common-bom.\nI can change the name to dockstore-bom but the BOM is also used in dockstore-cli which is a separate repo, and the dockstore repo, and so dockstore-bom seems to not indicate that it covers the dockstore-cli. The name dockstore-common also might indicate it is for the dockstore-common project only.\nShouldn't io.dockstore.common.dockstore-common be in the bom? That is a shared Dockstore dependency between the web service and the CLI. There are also a few others, but the only one you have is io.dockstore.zenodo-client-generated. If on the other hand, those others shouldn't be in there, then why is zenodo-client-generated in the bom?\nAs I understand it, the dependencyManagement section is used to manage dependency information for projects and can provide version information to the other project's dependencies sections.\nhttps://maven.apache.org/pom.html#dependency-management\nSo in the BOM the element\n    <dependencyManagement>\n        <dependencies>\n...\n            <dependency>\n                <groupId>io.dockstore</groupId>\n                <artifactId>zenodo-client-generated</artifactId>\n                <version>0.2</version>\n            </dependency>\n...\n\nSpecifies that in the POMs that inherit the parent BOM  ( e.g. dockstore-event-consumer/pom.xml), in the  section, the  element zenodo-client-generated must use version .2\n<dependencies>\n...\n        <dependency>\n            <groupId>io.dockstore</groupId>\n            <artifactId>zenodo-client-generated</artifactId>\n        </dependency>\n \n\n\n~/Documents/UCSC/gitroot/dockstore => grep -rni --include=pom.xml 'zenodo-client-generated' *\ndockstore-event-consumer/pom.xml:42:            zenodo-client-generated\ndockstore-projects-bom/pom.xml:69:                zenodo-client-generated", "author": "wshands", "createdAt": "2020-08-10T17:22:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAyMzM2Nw=="}], "type": "inlineReview"}, {"oid": "c7502d9e0ee019cc31870af3c23304ea85d927ff", "url": "https://github.com/dockstore/dockstore/commit/c7502d9e0ee019cc31870af3c23304ea85d927ff", "message": "remove extraneous properties", "committedDate": "2020-08-10T16:53:04Z", "type": "commit"}, {"oid": "45b65380368fe184a29c2c5476c78417b220d544", "url": "https://github.com/dockstore/dockstore/commit/45b65380368fe184a29c2c5476c78417b220d544", "message": "add ignore dependencies comment", "committedDate": "2020-08-11T15:27:37Z", "type": "commit"}, {"oid": "52503a3008b9c291eac8a809f8dfc1066ad4a80b", "url": "https://github.com/dockstore/dockstore/commit/52503a3008b9c291eac8a809f8dfc1066ad4a80b", "message": "remove cli only dependencies", "committedDate": "2020-08-13T04:12:18Z", "type": "commit"}, {"oid": "3fa7610de600bad7ab7fc93c6be60c2bec54fe6f", "url": "https://github.com/dockstore/dockstore/commit/3fa7610de600bad7ab7fc93c6be60c2bec54fe6f", "message": "add jacoco group id and artifact id to command line\n\nThis will fix the error that jacoco cannot be found:\n[ERROR] No plugin found for prefix 'jacoco' in the current project ...", "committedDate": "2020-08-13T18:47:11Z", "type": "commit"}, {"oid": "5baa0174e175ec374e41f50690b05021e4471f13", "url": "https://github.com/dockstore/dockstore/commit/5baa0174e175ec374e41f50690b05021e4471f13", "message": "rename BOM project to bom-internal", "committedDate": "2020-08-13T21:20:59Z", "type": "commit"}, {"oid": "7df08f8baef65a4dd9210ac29d5ee9a2aa3a8490", "url": "https://github.com/dockstore/dockstore/commit/7df08f8baef65a4dd9210ac29d5ee9a2aa3a8490", "message": "Merge branch 'develop' into feature/artifact-versions", "committedDate": "2020-08-13T21:24:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDcwMTAxOQ==", "url": "https://github.com/dockstore/dockstore/pull/3724#discussion_r470701019", "bodyText": "Why did the prefixes become necessary?", "author": "denis-yuen", "createdAt": "2020-08-14T15:35:47Z", "path": ".travis.yml", "diffHunk": "@@ -47,27 +47,27 @@ jobs:\n     - stage: coverage\n       env:\n         - TESTING_PROFILE=unit-tests\n-      script: mvn --batch-mode clean install jacoco:report jacoco:report-aggregate coveralls:report -P$TESTING_PROFILE,coverage\n+      script: mvn --batch-mode clean install org.jacoco:jacoco-maven-plugin:report org.jacoco:jacoco-maven-plugin:report-aggregate coveralls:report -P$TESTING_PROFILE,coverage", "originalCommit": "7df08f8baef65a4dd9210ac29d5ee9a2aa3a8490", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDcyNzk5NA==", "url": "https://github.com/dockstore/dockstore/pull/3724#discussion_r470727994", "bodyText": "The build failed because maven could not locate the jacoco plugin via the command line. I don't know why this suddenly became an issue but the only way I could find to solve it was to completely specify the artifact and group ids. See this post http://tdongsi.github.io/blog/2017/09/23/jacoco-in-maven-project/", "author": "wshands", "createdAt": "2020-08-14T16:27:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDcwMTAxOQ=="}], "type": "inlineReview"}, {"oid": "6f2d7bb60311a572aa5ed0b4468feb67a4b00fa5", "url": "https://github.com/dockstore/dockstore/commit/6f2d7bb60311a572aa5ed0b4468feb67a4b00fa5", "message": "Merge branch 'develop' into feature/artifact-versions", "committedDate": "2020-08-14T16:43:07Z", "type": "commit"}]}