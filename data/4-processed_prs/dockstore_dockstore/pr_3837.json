{"pr_number": 3837, "pr_title": "prevent workflow tool list from updating workflowversion when frozen", "pr_createdAt": "2020-09-29T20:18:44Z", "pr_url": "https://github.com/dockstore/dockstore/pull/3837", "timeline": [{"oid": "32fe9584ae641f2ed8b3000d22b5ad04c31a8575", "url": "https://github.com/dockstore/dockstore/commit/32fe9584ae641f2ed8b3000d22b5ad04c31a8575", "message": "prevent workflow tool list from updating workflowversion when frozen", "committedDate": "2020-09-29T20:06:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYyNzQyMA==", "url": "https://github.com/dockstore/dockstore/pull/3837#discussion_r497627420", "bodyText": "oh wait, based off the convo, shouldn't this message change?", "author": "NatalieEO", "createdAt": "2020-09-30T16:03:27Z", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/resources/WorkflowResource.java", "diffHunk": "@@ -1531,7 +1531,13 @@ public String getTableToolContent(@ApiParam(hidden = true) @Parameter(hidden = t\n             LanguageHandlerInterface lInterface = LanguageHandlerFactory.getInterface(workflow.getFileType());\n             final String toolTableJson = lInterface.getContent(workflowVersion.getWorkflowPath(), mainDescriptor.getContent(), secondaryDescContent,\n                 LanguageHandlerInterface.Type.TOOLS, toolDAO);\n-            workflowVersion.setToolTableJson(toolTableJson);\n+\n+            // Can't UPDATE workflowversion when frozen = true\n+            if (workflowVersion.isFrozen()) {\n+                LOG.warn(\"workflow version \" + workflowVersionId + \" is frozen without a mainDescriptor\");", "originalCommit": "32fe9584ae641f2ed8b3000d22b5ad04c31a8575", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "afdafca901d079d44c7e179a379b132512b9a1f3", "url": "https://github.com/dockstore/dockstore/commit/afdafca901d079d44c7e179a379b132512b9a1f3", "message": "reword warning", "committedDate": "2020-09-30T16:28:52Z", "type": "commit"}, {"oid": "64dd62d0533fbb312c47522e290b41a433ed0d8d", "url": "https://github.com/dockstore/dockstore/commit/64dd62d0533fbb312c47522e290b41a433ed0d8d", "message": "Merge branch 'develop' into feature/3819/workflow-tool-list-update-frozen", "committedDate": "2020-09-30T18:32:25Z", "type": "commit"}]}