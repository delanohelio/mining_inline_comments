{"pr_number": 3360, "pr_title": "Use DockstoreYaml class", "pr_createdAt": "2020-03-30T23:46:07Z", "pr_url": "https://github.com/dockstore/dockstore/pull/3360", "timeline": [{"oid": "38bed2ab9a348ae7bc08f934f76eca2ae25419c7", "url": "https://github.com/dockstore/dockstore/commit/38bed2ab9a348ae7bc08f934f76eca2ae25419c7", "message": "Support for services in dockstore.yml 1.2\n\n#3237\n\nAlso #3344 -- make name field optional\n\nAs part of this, switched to using DockstoreYaml classes", "committedDate": "2020-03-30T20:53:41Z", "type": "commit"}, {"oid": "97e22ac999b8b5bf825574764dd7843a543e9fb7", "url": "https://github.com/dockstore/dockstore/commit/97e22ac999b8b5bf825574764dd7843a543e9fb7", "message": "Approach that doesn't work", "committedDate": "2020-03-30T20:53:41Z", "type": "commit"}, {"oid": "05454f38e3553bfeef216a242657dde7bed29f5f", "url": "https://github.com/dockstore/dockstore/commit/05454f38e3553bfeef216a242657dde7bed29f5f", "message": "properly copy sourcefiles", "committedDate": "2020-03-30T20:53:41Z", "type": "commit"}, {"oid": "0b26080e0f49f934093917245c04573a8a37f647", "url": "https://github.com/dockstore/dockstore/commit/0b26080e0f49f934093917245c04573a8a37f647", "message": "More places where we parsing dockstore.yml", "committedDate": "2020-03-30T20:53:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg5MjkzNg==", "url": "https://github.com/dockstore/dockstore/pull/3360#discussion_r400892936", "bodyText": "If \"CWL\" works, use \"CWL\"", "author": "garyluu", "createdAt": "2020-03-31T13:00:00Z", "path": "dockstore-common/src/test/resources/fixtures/dockstore12.yml", "diffHunk": "@@ -10,6 +10,11 @@ workflows:\n      primaryDescriptorPath: /Dockstore.cwl\n      testParameterFiles:\n        - /dockstore.cwl.json\n+  # A workflow with no name:\n+  -  subclass: cwl", "originalCommit": "0b26080e0f49f934093917245c04573a8a37f647", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE3OTQzNw==", "url": "https://github.com/dockstore/dockstore/pull/3360#discussion_r401179437", "bodyText": "Maybe it should just be case in-sensitive.\nI don't think we're ever going to have workflow languages that are distinguishable only by taking into account case.", "author": "denis-yuen", "createdAt": "2020-03-31T20:02:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg5MjkzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTMwMzkyMA==", "url": "https://github.com/dockstore/dockstore/pull/3360#discussion_r401303920", "bodyText": "It is case-insensitive -- the value ultimately gets fed to this line.\nI'm inclined to leave it as is for now, at least for this PR (and there are already existing tests with lowercase \"cwl\").\nRight now the subclass is a string, maybe we should make it an enum like we did for the subclass in services, but I think it gives us more flexibility to leave it as a string.", "author": "coverbeck", "createdAt": "2020-04-01T01:20:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg5MjkzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY5NDcxMg==", "url": "https://github.com/dockstore/dockstore/pull/3360#discussion_r401694712", "bodyText": "It may be case insensitive here, but there are far too many places on the backend that are case sensitive.  See Workflow descriptorType, ToolDescriptor type, etc.  It's already a real pain dealing with close to 5 sets of descriptor type enums, don't want to potentially deal with another one.\nIt is case-insensitive, great! But like i said:\nIf \"CWL\" works, use \"CWL\".\nOtherwise, there's nothing stopping others team members from putting \"CwL\", \"wdL\", and \"Nfl\" everywhere and just saying that it's case insensitive and will work", "author": "garyluu", "createdAt": "2020-04-01T15:15:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg5MjkzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcxNTA2OA==", "url": "https://github.com/dockstore/dockstore/pull/3360#discussion_r401715068", "bodyText": "I think there is a distinction to be made here.\nI agree that as developers, we probably want to pick one and in parts of the code only we really touch, sure.\nHowever, the .dockstore.yml is something users will need to create and I really don't want to field questions from users where I'm only telling them to switch their case. If anything, I think there should be two copies of this file to nail down that this really is intended to be case insensitive.", "author": "denis-yuen", "createdAt": "2020-04-01T15:42:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg5MjkzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTczODQ0Nw==", "url": "https://github.com/dockstore/dockstore/pull/3360#discussion_r401738447", "bodyText": "This file is a fixture. It already has two other workflows in it, with subclasses 'wdl' and 'cwl'. I left those I changed this one to be 'CWL' and added a test that ensures that both work.", "author": "coverbeck", "createdAt": "2020-04-01T16:14:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg5MjkzNg=="}], "type": "inlineReview"}, {"oid": "4adad9fd5844121cc1c74affdbef190acffdf81f", "url": "https://github.com/dockstore/dockstore/commit/4adad9fd5844121cc1c74affdbef190acffdf81f", "message": "PR feedback", "committedDate": "2020-04-01T16:10:14Z", "type": "commit"}]}