{"pr_number": 3836, "pr_title": "Ensure THIRD-PARTY-LICENCES.txt is checked in", "pr_createdAt": "2020-09-29T18:00:18Z", "pr_url": "https://github.com/dockstore/dockstore/pull/3836", "timeline": [{"oid": "976f46bcc629cf6906113f10d5e850d94f111659", "url": "https://github.com/dockstore/dockstore/commit/976f46bcc629cf6906113f10d5e850d94f111659", "message": "check generated THIRD-PARTY-LICENSES.txt matches checked-in file", "committedDate": "2020-09-29T16:43:49Z", "type": "commit"}, {"oid": "9e5924c175f04255324ea84ccf94dd71e623cacd", "url": "https://github.com/dockstore/dockstore/commit/9e5924c175f04255324ea84ccf94dd71e623cacd", "message": "make executable", "committedDate": "2020-09-29T17:03:19Z", "type": "commit"}, {"oid": "bd227d4345892ae1edfc0e7ce442462668ed89bb", "url": "https://github.com/dockstore/dockstore/commit/bd227d4345892ae1edfc0e7ce442462668ed89bb", "message": "exclude io.dockstore from THIRD-PARTY-LICENSES.txt", "committedDate": "2020-09-29T17:24:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0NTgyNQ==", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r496945825", "bodyText": "No newline, per GitHub", "author": "coverbeck", "createdAt": "2020-09-29T18:19:49Z", "path": "scripts/check-licenses.sh", "diffHunk": "@@ -0,0 +1,16 @@\n+#!/usr/bin/env bash\n+# Checks that the generated THIRD-PARTY-LICENSES.txt matches the checked-in file\n+# Includes Bash3 Boilerplate. Copyright (c) 2014, kvz.io\n+\n+set -o errexit\n+set -o pipefail\n+set -o nounset\n+set -o xtrace\n+\n+if [ \"${TESTING_PROFILE}\" != \"automated-review\" ]; then\n+    exit 0;\n+fi\n+\n+cp THIRD-PARTY-LICENSES.txt generated-licenses.txt\n+git checkout THIRD-PARTY-LICENSES.txt\n+diff generated-licenses.txt THIRD-PARTY-LICENSES.txt", "originalCommit": "bd227d4345892ae1edfc0e7ce442462668ed89bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0Nzk3Ng==", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r496947976", "bodyText": "I'm not clear why we need this, although it is following the convention of propose_migration. \ud83e\udd37", "author": "coverbeck", "createdAt": "2020-09-29T18:23:12Z", "path": "scripts/check-licenses.sh", "diffHunk": "@@ -0,0 +1,16 @@\n+#!/usr/bin/env bash\n+# Checks that the generated THIRD-PARTY-LICENSES.txt matches the checked-in file\n+# Includes Bash3 Boilerplate. Copyright (c) 2014, kvz.io\n+\n+set -o errexit\n+set -o pipefail\n+set -o nounset\n+set -o xtrace\n+\n+if [ \"${TESTING_PROFILE}\" != \"automated-review\" ]; then", "originalCommit": "bd227d4345892ae1edfc0e7ce442462668ed89bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk1MDM2NA==", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r496950364", "bodyText": "Me neither. The other similar scripts seem to do it \u00af\\_(\u30c4)_/\u00af", "author": "GFJHogue", "createdAt": "2020-09-29T18:27:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0Nzk3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA5MDQ1Nw==", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r497090457", "bodyText": "- run:\n          name: check that JPA classes are consistent with migrations\n          command: |\n            scripts/check_migrations.sh\n          environment:\n            TESTING_PROFILE: automated-review\n\nIt seems to run in circle. But check_migrations uses if [ \"${TESTING_PROFILE}\" = \"automated-review\" ]; then to only run in that phase. This seems to be the opposite, so it always runs except for that phase?\nNot sure if that is intentional", "author": "denis-yuen", "createdAt": "2020-09-29T22:11:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0Nzk3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUwNzYzMQ==", "url": "https://github.com/dockstore/dockstore/pull/3836#discussion_r497507631", "bodyText": "They both behave the same way.\nThe main code for check_migrations is inside of the if block.\nThe main code that I have for check-licenses is outside of the if block (easier to inherit the exit code of diff when not skipping).", "author": "GFJHogue", "createdAt": "2020-09-30T13:26:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0Nzk3Ng=="}], "type": "inlineReview"}, {"oid": "acf076610591fb8746656393766dc769b5ae8e6c", "url": "https://github.com/dockstore/dockstore/commit/acf076610591fb8746656393766dc769b5ae8e6c", "message": "add newline", "committedDate": "2020-09-29T18:24:31Z", "type": "commit"}]}