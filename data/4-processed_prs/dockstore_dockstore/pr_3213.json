{"pr_number": 3213, "pr_title": "Start hooking up endpoints and tests for GA4GH V2 final", "pr_createdAt": "2020-02-04T21:57:48Z", "pr_url": "https://github.com/dockstore/dockstore/pull/3213", "timeline": [{"oid": "2300a10fb716c8c290d8d6f86144c05300c0dcf1", "url": "https://github.com/dockstore/dockstore/commit/2300a10fb716c8c290d8d6f86144c05300c0dcf1", "message": "Laggard junit update\n\n* do not know why develop is able to build", "committedDate": "2020-02-03T17:17:26Z", "type": "commit"}, {"oid": "8e5c3d938067a3d198e6fd49d46ade3214e082c4", "url": "https://github.com/dockstore/dockstore/commit/8e5c3d938067a3d198e6fd49d46ade3214e082c4", "message": "Update codegen plugin before adding TRS V2", "committedDate": "2020-02-03T17:17:47Z", "type": "commit"}, {"oid": "aa692d188c0f10caf727415a9225e67f90b04bec", "url": "https://github.com/dockstore/dockstore/commit/aa692d188c0f10caf727415a9225e67f90b04bec", "message": "Wipe out deprecated unstar endpoints #3195", "committedDate": "2020-02-03T17:38:35Z", "type": "commit"}, {"oid": "c81147e9171fe6451a6944e497320ccc7d9b257b", "url": "https://github.com/dockstore/dockstore/commit/c81147e9171fe6451a6944e497320ccc7d9b257b", "message": "Start TRS V2 final hook up\n\n* also properly enable checkstyle on swagger directories", "committedDate": "2020-02-03T20:26:58Z", "type": "commit"}, {"oid": "edc5eac26153efd4cdf4ba92bdc3940ccb397faf", "url": "https://github.com/dockstore/dockstore/commit/edc5eac26153efd4cdf4ba92bdc3940ccb397faf", "message": "Revert \"Wipe out deprecated unstar endpoints #3195\"\n\nThis reverts commit aa692d188c0f10caf727415a9225e67f90b04bec.", "committedDate": "2020-02-03T20:31:49Z", "type": "commit"}, {"oid": "b9254c1d4ebefe6d30f1fdccb1a2da479ead5789", "url": "https://github.com/dockstore/dockstore/commit/b9254c1d4ebefe6d30f1fdccb1a2da479ead5789", "message": "More hookup", "committedDate": "2020-02-03T21:28:44Z", "type": "commit"}, {"oid": "b9c965acdb54a4286753ba6b2ebbab745e8202ad", "url": "https://github.com/dockstore/dockstore/commit/b9c965acdb54a4286753ba6b2ebbab745e8202ad", "message": "Missing classes", "committedDate": "2020-02-03T22:09:34Z", "type": "commit"}, {"oid": "f9ee786bd222e691e47c0268c0a64f0db45e15f1", "url": "https://github.com/dockstore/dockstore/commit/f9ee786bd222e691e47c0268c0a64f0db45e15f1", "message": "Rehook up with swagger v3 codegen plugin\n\n* https://github.com/swagger-api/swagger-codegen/issues/9893 really\nsucks\n* added list of changes made to templates in a readme in the template directory\n* some minimal testing with a client class to demonstrate a full trip of\nthe new information through to a test", "committedDate": "2020-02-04T21:37:54Z", "type": "commit"}, {"oid": "f287471bc860e845bc653caa49ad8bdf646344c5", "url": "https://github.com/dockstore/dockstore/commit/f287471bc860e845bc653caa49ad8bdf646344c5", "message": "Merge branch 'develop' into feature/trs_hook_up_start", "committedDate": "2020-02-04T21:44:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwOTM3OQ==", "url": "https://github.com/dockstore/dockstore/pull/3213#discussion_r375309379", "bodyText": "Didn't V2 final get rid of /api?", "author": "garyluu", "createdAt": "2020-02-05T15:03:59Z", "path": "dockstore-webservice/src/main/java/io/dockstore/webservice/DockstoreWebserviceApplication.java", "diffHunk": "@@ -145,7 +145,8 @@\n  * @author dyuen\n  */\n public class DockstoreWebserviceApplication extends Application<DockstoreWebserviceConfiguration> {\n-    public static final String GA4GH_API_PATH = \"/api/ga4gh/v2\";\n+    public static final String GA4GH_API_PATH_V2_BETA = \"/api/ga4gh/v2\";\n+    public static final String GA4GH_API_PATH_V2_FINAL = \"/api/ga4gh/trs/v2\";", "originalCommit": "f287471bc860e845bc653caa49ad8bdf646344c5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxMDA3Nw==", "url": "https://github.com/dockstore/dockstore/pull/3213#discussion_r375310077", "bodyText": "Version same as the one mentioned in root pom", "author": "garyluu", "createdAt": "2020-02-05T15:05:04Z", "path": "dockstore-webservice/pom.xml", "diffHunk": "@@ -1090,13 +1094,51 @@\n                     <generateModelTests>false</generateModelTests>\n                     <generateModelDocumentation>false</generateModelDocumentation>\n                     <generateSupportingFiles>true</generateSupportingFiles>\n-                    <ignoreFileOverride>${pom.basedir}/src/main/resources/swagger-templates/swagger-codegen-ignore</ignoreFileOverride>\n                     <withXml>true</withXml>\n                     <library>jersey2</library>\n+                    <ignoreFileOverride>${pom.basedir}/src/main/resources/swagger-templates/swagger-codegen-ignore</ignoreFileOverride>\n                     <templateDirectory>${pom.basedir}/src/main/resources/swagger-templates</templateDirectory>\n                 </configuration>\n                 <executions>\n                     <execution>\n+                        <id>v2-beta</id>\n+                        <goals>\n+                            <goal>generate</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>io.swagger.codegen.v3</groupId>\n+                <artifactId>swagger-codegen-maven-plugin</artifactId>\n+                <version>3.0.16</version>", "originalCommit": "f287471bc860e845bc653caa49ad8bdf646344c5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "22b85d83f8d74ecadb32b5b2b9293108bf461857", "url": "https://github.com/dockstore/dockstore/commit/22b85d83f8d74ecadb32b5b2b9293108bf461857", "message": "PR feedback", "committedDate": "2020-02-05T15:27:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTUzNTU2MQ==", "url": "https://github.com/dockstore/dockstore/pull/3213#discussion_r375535561", "bodyText": "Without understanding the whole flow and realizing it may be beyond the scope of this PR, do we still need to use Joda? According to their own website, you only need to be using pre-Java 8.", "author": "coverbeck", "createdAt": "2020-02-05T22:07:37Z", "path": "dockstore-webservice/src/main/resources/openapi-templates/JodaDateTimeProvider.mustache", "diffHunk": "@@ -0,0 +1,44 @@\n+package {{apiPackage}};\n+\n+import com.sun.jersey.core.spi.component.ComponentContext;\n+import com.sun.jersey.spi.inject.Injectable;\n+import com.sun.jersey.spi.inject.PerRequestTypeInjectableProvider;\n+\n+import javax.ws.rs.QueryParam;\n+import javax.ws.rs.WebApplicationException;\n+import javax.ws.rs.core.Context;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.Response.Status;\n+import javax.ws.rs.core.UriInfo;\n+import javax.ws.rs.ext.Provider;\n+import org.joda.time.DateTime;\n+import java.util.List;\n+\n+@Provider\n+public class JodaDateTimeProvider extends PerRequestTypeInjectableProvider<QueryParam, DateTime> {", "originalCommit": "22b85d83f8d74ecadb32b5b2b9293108bf461857", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTUzOTU3OA==", "url": "https://github.com/dockstore/dockstore/pull/3213#discussion_r375539578", "bodyText": "This is part of swagger-api/swagger-codegen#9893  (i.e. all templates need to be included, not just the ones we're using/overriding)\nI don't think we've selected Joda time generation, but I could be wrong.", "author": "denis-yuen", "createdAt": "2020-02-05T22:17:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTUzNTU2MQ=="}], "type": "inlineReview"}]}