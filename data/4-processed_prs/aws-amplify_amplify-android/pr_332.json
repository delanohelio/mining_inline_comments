{"pr_number": 332, "pr_title": "Temporarily ignore broken test", "pr_createdAt": "2020-03-26T18:19:12Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/332", "timeline": [{"oid": "7b35fd3cfa887e8bfabcf2250ed3a0b386466e0e", "url": "https://github.com/aws-amplify/amplify-android/commit/7b35fd3cfa887e8bfabcf2250ed3a0b386466e0e", "message": "Temporarily ignore broken test", "committedDate": "2020-03-26T18:18:18Z", "type": "commit"}, {"oid": "44a5a6767f404ab451b2b362df53fa81d140ba18", "url": "https://github.com/aws-amplify/amplify-android/commit/44a5a6767f404ab451b2b362df53fa81d140ba18", "message": "Re-remove whitespace added by IDE", "committedDate": "2020-03-26T18:22:45Z", "type": "commit"}, {"oid": "44a5a6767f404ab451b2b362df53fa81d140ba18", "url": "https://github.com/aws-amplify/amplify-android/commit/44a5a6767f404ab451b2b362df53fa81d140ba18", "message": "Re-remove whitespace added by IDE", "committedDate": "2020-03-26T18:22:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgwNDY5Nw==", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398804697", "bodyText": "Can you move this to just the specific @Test that's failing? Having this at the class level will prevent some well-functioning tests from being exercised.", "author": "jamesonwilliams", "createdAt": "2020-03-26T18:37:12Z", "path": "aws-datastore/src/androidTest/java/com/amplifyframework/datastore/AWSDataStorePluginInstrumentedTest.java", "diffHunk": "@@ -46,6 +47,7 @@\n  * which were defined by the schema in:\n  * testmodels/src/main/java/com/amplifyframework/testmodels/commentsblog/schema.graphql.\n  */\n+@Ignore(\"Currently does not pass.\") // TODO: fix the error; re-enable test", "originalCommit": "44a5a6767f404ab451b2b362df53fa81d140ba18", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxODkzNQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398818935", "bodyText": "When i tried just ignoring the blogOwnerSavedIntoDataStoreIsThenQueriableInRemoteAppSyncApi, the other test also failed. I think this test failing initially crashes the whole test suite, which made us unable to catch it last time.", "author": "raphkim", "createdAt": "2020-03-26T18:59:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgwNDY5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxMDU5MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398910591", "bodyText": "Hm, alright. We can come back to it.", "author": "jamesonwilliams", "createdAt": "2020-03-26T21:42:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgwNDY5Nw=="}], "type": "inlineReview"}, {"oid": "ebe35fd35230816f0684c1d18e0bee6ddd088e11", "url": "https://github.com/aws-amplify/amplify-android/commit/ebe35fd35230816f0684c1d18e0bee6ddd088e11", "message": "Increase timeout for circleCI", "committedDate": "2020-03-26T20:02:38Z", "type": "commit"}, {"oid": "6cedf9cd39defd1c544ffb189b87f2783b63a915", "url": "https://github.com/aws-amplify/amplify-android/commit/6cedf9cd39defd1c544ffb189b87f2783b63a915", "message": "Merge branch 'master' of https://github.com/aws-amplify/amplify-android into ignore-test", "committedDate": "2020-03-26T20:03:13Z", "type": "commit"}, {"oid": "96b99079daca82b581cfc7cdb492c21195cc369e", "url": "https://github.com/aws-amplify/amplify-android/commit/96b99079daca82b581cfc7cdb492c21195cc369e", "message": "Increase timeout again", "committedDate": "2020-03-26T20:59:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NDg2Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398894866", "bodyText": "I had tried changing this to TimeUnit.SECONDS.toMilliseconds(1) -- a full second -- and the test still failed in the same way. Unfortunately, I don't think this will solve the problem.", "author": "jamesonwilliams", "createdAt": "2020-03-26T21:10:23Z", "path": "core/src/androidTest/java/com/amplifyframework/hub/HubInstrumentedTest.java", "diffHunk": "@@ -43,7 +43,7 @@\n  */\n public final class HubInstrumentedTest {\n     private static final Logger LOG = Amplify.Logging.forNamespace(\"amplify:core:test\");\n-    private static final long SUBSCRIPTION_RECEIVE_TIMEOUT_MS = 200;\n+    private static final long SUBSCRIPTION_RECEIVE_TIMEOUT_MS = 300;", "originalCommit": "96b99079daca82b581cfc7cdb492c21195cc369e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5ODIyNg==", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398898226", "bodyText": "Hmm that's weird. It passes consistently with 200ms locally, and it seems to have passed with 300ms in circleCI", "author": "raphkim", "createdAt": "2020-03-26T21:17:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NDg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxMDUyMw==", "url": "https://github.com/aws-amplify/amplify-android/pull/332#discussion_r398910523", "bodyText": "It  always passes at 200ms locally for me too.\nWhen I had it at 1,000ms, it continued to fail for me (most of the time) when I had a PR up for it.\nIt looked like - after 1000ms - only two of the messages were received, instead of 10.\nEven assuming that the publish/receive flows were all performed serially, 100ms would be a horridly long time to pass off an in-memory data structure.\nSo anyway, I think the problem is elsewhere. Probably around threads available to the test process in the test farm?\nSomething like that? Or perhaps a different test is polluting the state of the test environment, and it just happens to surface as an issue while this test runs?", "author": "jamesonwilliams", "createdAt": "2020-03-26T21:42:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg5NDg2Ng=="}], "type": "inlineReview"}]}