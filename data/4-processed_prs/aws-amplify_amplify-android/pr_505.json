{"pr_number": 505, "pr_title": "(feat) amplify-tools as a separate project", "pr_createdAt": "2020-05-21T20:04:58Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/505", "timeline": [{"oid": "adbd740f9053abb9716cec9200776ac60a957409", "url": "https://github.com/aws-amplify/amplify-android/commit/adbd740f9053abb9716cec9200776ac60a957409", "message": "initial commit of amplify-tools as a separate project", "committedDate": "2020-05-21T20:01:44Z", "type": "commit"}, {"oid": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "url": "https://github.com/aws-amplify/amplify-android/commit/ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "message": "remove app and .idea", "committedDate": "2020-05-21T21:09:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTIxNA==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935214", "bodyText": "This is a subset of the main .gitignore, kill it?", "author": "jpignata", "createdAt": "2020-05-21T21:49:26Z", "path": "amplify-tools/.gitignore", "diffHunk": "@@ -0,0 +1,9 @@\n+*.iml", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzODY3Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428938676", "bodyText": "Some discussion here -- https://stackoverflow.com/a/3307252/695787\nThe reasons Jakub provides to use multiple .gitignore don't apply to us, here, I don't think.\nSo I'd kill this.", "author": "jamesonwilliams", "createdAt": "2020-05-21T21:57:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTIxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTQ0Mg==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935442", "bodyText": "Sup with the \"-SNAPSHOT?\"", "author": "jpignata", "createdAt": "2020-05-21T21:50:03Z", "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]\n+\n+dependencies {\n+    implementation 'androidx.appcompat:appcompat:1.1.0'\n+}\n+\n+publishing {\n+    publications {\n+        pluginPublication(MavenPublication) {\n+            from components.java\n+            groupId 'com.amplifyframework'\n+            artifactId 'amplify-tools-gradle-plugin'\n+            version VERSION_NAME + \"-SNAPSHOT\"", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk3Mzc4MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428973781", "bodyText": "Removing", "author": "nikhname", "createdAt": "2020-05-21T23:51:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTQ0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTY2MQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935661", "bodyText": "Lowercase t tools, please.", "author": "jpignata", "createdAt": "2020-05-21T21:50:35Z", "path": "amplify-tools/amplify-tools-gradle-plugin/gradle.properties", "diffHunk": "@@ -0,0 +1,4 @@\n+POM_ARTIFACT_ID=amplify-tools-gradle-plugin\n+POM_NAME=Amplify Tools for Android - Gradle Plugin", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTczMw==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935733", "bodyText": "Is this needed?", "author": "jpignata", "createdAt": "2020-05-21T21:50:47Z", "path": "amplify-tools/amplify-tools-gradle-plugin/proguard-rules.pro", "diffHunk": "@@ -0,0 +1,21 @@\n+# Add project specific ProGuard rules here.", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MDcwMQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428940701", "bodyText": "Doubtful, for a plugin. Since the plugin will only be deployed to a developer's machine, and not a customer's mobile phone. If we succeed to integrate Proguard here, it will purely hamper our ability to debug the plugin, while providing no benefit.\nTLDR we can safely remove this file.", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:02:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTczMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTk4OQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428935989", "bodyText": "What is this?", "author": "jpignata", "createdAt": "2020-05-21T21:51:32Z", "path": "amplify-tools/gradle.properties", "diffHunk": "@@ -0,0 +1,36 @@\n+# Project-wide Gradle settings.\n+# IDE (e.g. Android Studio) users:\n+# Gradle settings configured through the IDE *will override*\n+# any settings specified in this file.\n+# For more details on how to configure your build environment visit\n+# http://www.gradle.org/docs/current/userguide/build_environment.html\n+# Specifies the JVM arguments used for the daemon process.\n+# The setting is particularly useful for tweaking memory settings.\n+org.gradle.jvmargs=-Xmx1536m\n+# When configured, Gradle will run in incubating parallel mode.\n+# This option should only be used with decoupled projects. More details, visit\n+# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects\n+# org.gradle.parallel=true\n+# AndroidX package structure to make it clearer which packages are bundled with the\n+# Android operating system, and which are packaged with your app's APK\n+# https://developer.android.com/topic/libraries/support-library/androidx-rn\n+android.useAndroidX=true\n+# Automatically convert third-party libraries to use AndroidX\n+android.enableJetifier=true\n+\n+GROUP=com.amplifyframework\n+VERSION_NAME=1.0.0\n+AWS_CORE_SDK_VERSION=2.16.3", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk3NDQ1NA==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428974454", "bodyText": "Removing", "author": "nikhname", "createdAt": "2020-05-21T23:54:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNTk4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzOTAzOQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428939039", "bodyText": "The most trivial of nits: prefer single quotes?", "author": "jamesonwilliams", "createdAt": "2020-05-21T21:58:46Z", "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzOTM3Nw==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428939377", "bodyText": "I doubt this is used. I think you could kill the whole block.", "author": "jamesonwilliams", "createdAt": "2020-05-21T21:59:42Z", "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]\n+\n+dependencies {\n+    implementation 'androidx.appcompat:appcompat:1.1.0'\n+}", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzOTkzMg==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428939932", "bodyText": "We have a default publishing rule available int configuration/publishing.gradle. If you import that file, at the top of this one, then you don't need a separate block, here.\nThe other modules use gradle.properties to define Maven publishing fields, and then include that central publishing script, which is a more elaborate version of this block, here.\n\nUpdate: oh, right, this is a separate project. Never-mind!", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:00:54Z", "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]\n+\n+dependencies {\n+    implementation 'androidx.appcompat:appcompat:1.1.0'\n+}\n+\n+publishing {", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MTQ3OQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428951479", "bodyText": "you're not thinking fourth dimensionally", "author": "jpignata", "createdAt": "2020-05-21T22:33:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzOTkzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MDIwMA==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428940200", "bodyText": "Hm, Groovy, compatible with Java 1.7? Or does \"1.7\" mean version 51 byte code? Are these needed?", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:01:38Z", "path": "amplify-tools/amplify-tools-gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+apply plugin: 'groovy'\n+apply plugin: 'idea'\n+apply plugin: 'java-gradle-plugin'\n+apply plugin: 'maven-publish'\n+\n+apply from: rootProject.file('gradle-mvn-push.gradle')\n+\n+sourceSets.main.groovy.srcDirs = [\"src/main/groovy\"]\n+\n+dependencies {\n+    implementation 'androidx.appcompat:appcompat:1.1.0'\n+}\n+\n+publishing {\n+    publications {\n+        pluginPublication(MavenPublication) {\n+            from components.java\n+            groupId 'com.amplifyframework'\n+            artifactId 'amplify-tools-gradle-plugin'\n+            version VERSION_NAME + \"-SNAPSHOT\"\n+        }\n+    }\n+}\n+\n+sourceCompatibility = \"1.7\"\n+targetCompatibility = \"1.7\"", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk3MjQ2OQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428972469", "bodyText": "It means the plugin is compiled with Java 7, its necessary so that we can fix down the plugin compatibility", "author": "nikhname", "createdAt": "2020-05-21T23:47:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MDIwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MTE0OQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428941149", "bodyText": "This is a weird name for a groovy class. Does it match some other token, somewhere else? Is this intentional? I would expect this to be in Pascal case, like Plugin<Project> is. AmplifyToolsPlugin implements Plugin<Project>, something like that?", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:04:01Z", "path": "amplify-tools/amplify-tools-gradle-plugin/src/main/groovy/com/amplifyframework/tools/gradle/plugin/amplifytools.groovy", "diffHunk": "@@ -0,0 +1,246 @@\n+import org.gradle.api.Plugin\n+import org.gradle.api.Project\n+import org.apache.tools.ant.taskdefs.condition.Os\n+import groovy.json.JsonSlurper\n+import groovy.json.JsonOutput\n+\n+class amplifytools implements Plugin<Project> {", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MTg0NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428941845", "bodyText": "You actually run npx, not node, later. So, it'd be better to check if npx is available.\nWhen I used this plugin, npx wasn't available.\nI do have node installed, but that's only part of the requirement.", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:05:51Z", "path": "amplify-tools/amplify-tools-gradle-plugin/src/main/groovy/com/amplifyframework/tools/gradle/plugin/amplifytools.groovy", "diffHunk": "@@ -0,0 +1,246 @@\n+import org.gradle.api.Plugin\n+import org.gradle.api.Project\n+import org.apache.tools.ant.taskdefs.condition.Os\n+import groovy.json.JsonSlurper\n+import groovy.json.JsonOutput\n+\n+class amplifytools implements Plugin<Project> {\n+    void apply(Project project) {\n+        def doesNodeExist = true\n+        def doesGradleConfigExist\n+\n+        // profile name can be changed in amplify-gradle-config\n+        def profile = 'default'\n+        def accessKeyId = null\n+        def secretAccessKey = null\n+        def region = null\n+        def envName = 'amplify'\n+        def syncEnabled = 'true'\n+\n+        project.task('verifyNode') {\n+            try {\n+                project.exec {\n+                    commandLine 'node', '-v'", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MjI3NA==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428942274", "bodyText": "Nit: in all places, substitute if( with if (.", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:07:00Z", "path": "amplify-tools/amplify-tools-gradle-plugin/src/main/groovy/com/amplifyframework/tools/gradle/plugin/amplifytools.groovy", "diffHunk": "@@ -0,0 +1,246 @@\n+import org.gradle.api.Plugin\n+import org.gradle.api.Project\n+import org.apache.tools.ant.taskdefs.condition.Os\n+import groovy.json.JsonSlurper\n+import groovy.json.JsonOutput\n+\n+class amplifytools implements Plugin<Project> {\n+    void apply(Project project) {\n+        def doesNodeExist = true\n+        def doesGradleConfigExist\n+\n+        // profile name can be changed in amplify-gradle-config\n+        def profile = 'default'\n+        def accessKeyId = null\n+        def secretAccessKey = null\n+        def region = null\n+        def envName = 'amplify'\n+        def syncEnabled = 'true'\n+\n+        project.task('verifyNode') {\n+            try {\n+                project.exec {\n+                    commandLine 'node', '-v'\n+                    standardOutput = new ByteArrayOutputStream()\n+                }\n+            } catch (commandLineFailure) {\n+                doesNodeExist = false\n+                println(\"Node is not installed. Visit https://nodejs.org/en/download/ to install it\")\n+            }\n+        }\n+\n+        project.task('createAmplifyApp') {\n+            doesGradleConfigExist = project.file('amplify-gradle-config.json').isFile()\n+            if (doesNodeExist && !doesGradleConfigExist) {\n+                if(Os.isFamily(Os.FAMILY_WINDOWS)) {", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0Mjk5Nw==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428942997", "bodyText": "Kill this", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:09:00Z", "path": "amplify-tools/build.gradle", "diffHunk": "@@ -0,0 +1,27 @@\n+// Top-level build file where you can add configuration options common to all sub-projects/modules.\n+", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MzA1NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428943055", "bodyText": "Kill this", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:09:09Z", "path": "amplify-tools/build.gradle", "diffHunk": "@@ -0,0 +1,27 @@\n+// Top-level build file where you can add configuration options common to all sub-projects/modules.\n+\n+buildscript {\n+    repositories {\n+        google()\n+        jcenter()\n+        \n+    }\n+    dependencies {\n+        classpath 'com.android.tools.build:gradle:3.6.3'\n+        \n+        // NOTE: Do not place your application dependencies here; they belong\n+        // in the individual module build.gradle files", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0MzE1NA==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428943154", "bodyText": "kill this empty line", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:09:24Z", "path": "amplify-tools/build.gradle", "diffHunk": "@@ -0,0 +1,27 @@\n+// Top-level build file where you can add configuration options common to all sub-projects/modules.\n+\n+buildscript {\n+    repositories {\n+        google()\n+        jcenter()\n+        \n+    }\n+    dependencies {\n+        classpath 'com.android.tools.build:gradle:3.6.3'\n+        \n+        // NOTE: Do not place your application dependencies here; they belong\n+        // in the individual module build.gradle files\n+    }\n+}\n+\n+allprojects {\n+    repositories {\n+        google()\n+        jcenter()\n+        ", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDAzOQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428944039", "bodyText": "It is a little troubling to watch a second copy of this script come into the git repository. Is this identically the same as the configuration/publishing.gradle in the main project?\nI don't think there's anything ~reasonable we can do to prevent it, unfortunately.\nWe can make sure that the files are identical in contents and name, thought.\nThis one at least has a different name.", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:12:00Z", "path": "amplify-tools/gradle-mvn-push.gradle", "diffHunk": "@@ -0,0 +1,233 @@\n+/*\n+ * Copyright 2013 Chris Banes", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDYzNg==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428950636", "bodyText": "We could symlink it, no?", "author": "jpignata", "createdAt": "2020-05-21T22:31:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDAzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4MzA1Nw==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428983057", "bodyText": "Yea, I guess I like that better. It's ~a little weird, but it solves the problem.", "author": "jamesonwilliams", "createdAt": "2020-05-22T00:27:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDAzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk5MzEzNg==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428993136", "bodyText": "We would be able to use configuration/publishing.gradle if not for the publishing block that seems to require an aar artifact. I think it makes sense to make the file identical in name and content except for that block", "author": "nikhname", "createdAt": "2020-05-22T01:08:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDAzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDI2Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428944266", "bodyText": "Ah yea, it not only has a different file name -- but the contents of this script is different from configuration/publishing.gradle, too.", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:12:37Z", "path": "amplify-tools/gradle-mvn-push.gradle", "diffHunk": "@@ -0,0 +1,233 @@\n+/*\n+ * Copyright 2013 Chris Banes\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+apply plugin: 'maven'\n+apply plugin: 'signing'\n+\n+version = VERSION_NAME\n+group = GROUP\n+\n+def isReleaseBuild() {\n+    return VERSION_NAME.contains(\"SNAPSHOT\") == false\n+}\n+\n+def getReleaseRepositoryUrl() {\n+    return hasProperty('RELEASE_REPOSITORY_URL') ? RELEASE_REPOSITORY_URL :\n+            \"https://aws.oss.sonatype.org/service/local/staging/deploy/maven2/\"\n+}\n+\n+def getSnapshotRepositoryUrl() {\n+    return hasProperty('SNAPSHOT_REPOSITORY_URL') ? SNAPSHOT_REPOSITORY_URL :\n+            \"https://aws.oss.sonatype.org/content/repositories/snapshots/\"\n+}\n+\n+def getRepositoryUsername() {\n+    return hasProperty('SONATYPE_NEXUS_USERNAME') ? SONATYPE_NEXUS_USERNAME : \"\"\n+}\n+\n+def getRepositoryPassword() {\n+    return hasProperty('SONATYPE_NEXUS_PASSWORD') ? SONATYPE_NEXUS_PASSWORD : \"\"\n+}\n+\n+archivesBaseName = POM_ARTIFACT_ID\n+\n+afterEvaluate { project ->\n+    uploadArchives {\n+        repositories {\n+            if (project.hasProperty('SONATYPE_NEXUS_USERNAME')) {\n+                mavenDeployer {\n+                    beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }\n+\n+                    pom.groupId = GROUP\n+                    pom.artifactId = POM_ARTIFACT_ID\n+                    pom.version = VERSION_NAME\n+\n+                    repository(url: getReleaseRepositoryUrl()) {\n+                        authentication(userName: getRepositoryUsername(), password: getRepositoryPassword())\n+                    }\n+                    snapshotRepository(url: getSnapshotRepositoryUrl()) {\n+                        authentication(userName: getRepositoryUsername(), password: getRepositoryPassword())\n+                    }\n+\n+                    pom.project {\n+                        name POM_NAME\n+                        packaging POM_PACKAGING\n+                        description POM_DESCRIPTION\n+                        url POM_URL\n+\n+                        scm {\n+                            url POM_SCM_URL\n+                            connection POM_SCM_CONNECTION\n+                            developerConnection POM_SCM_DEV_CONNECTION\n+                        }\n+\n+                        licenses {\n+                            license {\n+                                name POM_LICENCE_NAME\n+                                url POM_LICENCE_URL\n+                                distribution POM_LICENCE_DIST\n+                            }\n+                        }\n+\n+                        developers {\n+                            developer {\n+                                id POM_DEVELOPER_ID\n+                                organizationUrl POM_DEVELOPER_ORGANIZATION_URL\n+                                roles {\n+                                    role \"developer\"\n+                                }\n+                            }\n+                        }\n+                    }\n+                }\n+            } else {\n+                mavenInstaller {\n+                    pom.groupId = GROUP\n+                    pom.artifactId = POM_ARTIFACT_ID\n+                    pom.version = VERSION_NAME\n+                }\n+            }\n+        }\n+    }\n+\n+    signing {\n+        required { isReleaseBuild() && gradle.taskGraph.hasTask(\"uploadArchives\") }\n+        sign configurations.archives\n+    }\n+\n+    if (project.getPlugins().hasPlugin('com.android.application') ||\n+            project.getPlugins().hasPlugin('com.android.library')) {\n+        task install(type: Upload, dependsOn: assemble) {\n+            repositories.mavenInstaller {\n+                configuration = configurations.archives\n+\n+                pom.groupId = GROUP\n+                pom.artifactId = POM_ARTIFACT_ID\n+                pom.version = VERSION_NAME\n+\n+                pom.project {\n+                    name POM_NAME\n+                    packaging POM_PACKAGING\n+                    description POM_DESCRIPTION\n+                    url POM_URL\n+\n+                    scm {\n+                        url POM_SCM_URL\n+                        connection POM_SCM_CONNECTION\n+                        developerConnection POM_SCM_DEV_CONNECTION\n+                    }\n+\n+                    licenses {\n+                        license {\n+                            name POM_LICENCE_NAME\n+                            url POM_LICENCE_URL\n+                            distribution POM_LICENCE_DIST\n+                        }\n+                    }\n+\n+                    developers {\n+                        developer {\n+                            id POM_DEVELOPER_ID\n+                            organization POM_DEVELOPER_ORGANIZATION\n+                            organizationUrl POM_DEVELOPER_ORGANIZATION_URL\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+\n+        task androidJavadocs(type: Javadoc) {\n+            source = android.sourceSets.main.java.source\n+            classpath += project.files(android.getBootClasspath().join(File.pathSeparator))\n+        }\n+\n+        task androidJavadocsJar(type: Jar, dependsOn: androidJavadocs) {\n+            classifier = 'javadoc'\n+            from androidJavadocs.destinationDir\n+        }\n+\n+        task androidSourcesJar(type: Jar) {\n+            classifier = 'sources'\n+            from android.sourceSets.main.java.source\n+        }\n+    } else {\n+        install {\n+            repositories.mavenInstaller {\n+                pom.groupId = GROUP\n+                pom.artifactId = POM_ARTIFACT_ID\n+                pom.version = VERSION_NAME\n+\n+                pom.project {\n+                    name POM_NAME\n+                    packaging POM_PACKAGING\n+                    description POM_DESCRIPTION\n+                    url POM_URL\n+\n+                    scm {\n+                        url POM_SCM_URL\n+                        connection POM_SCM_CONNECTION\n+                        developerConnection POM_SCM_DEV_CONNECTION\n+                    }\n+\n+                    licenses {\n+                        license {\n+                            name POM_LICENCE_NAME\n+                            url POM_LICENCE_URL\n+                            distribution POM_LICENCE_DIST\n+                        }\n+                    }\n+\n+                    developers {\n+                        developer {\n+                            id POM_DEVELOPER_ID\n+                            organization POM_DEVELOPER_ORGANIZATION\n+                            organizationUrl POM_DEVELOPER_ORGANIZATION_URL\n+                        }\n+                    }\n+                }\n+            }\n+        }\n+\n+        task sourcesJar(type: Jar, dependsOn: classes) {\n+            classifier = 'sources'\n+            from sourceSets.main.allSource\n+        }\n+\n+        task javadocJar(type: Jar, dependsOn: javadoc) {\n+            classifier = 'javadoc'\n+            from javadoc.destinationDir\n+        }\n+    }\n+\n+    if (JavaVersion.current().isJava8Compatible()) {", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk1MDcyNw==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428950727", "bodyText": "Oh, nevermind.", "author": "jpignata", "createdAt": "2020-05-21T22:31:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDI2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk4MzE3NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428983175", "bodyText": "^ I don't think it needs to be. It just currently is. I suspect the differences are not intentional?", "author": "jamesonwilliams", "createdAt": "2020-05-22T00:27:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDI2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDQ0NA==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428944444", "bodyText": "I don't think your plugin uses Android X. You can remove the lines about AndroidX and Jettifier.", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:13:07Z", "path": "amplify-tools/gradle.properties", "diffHunk": "@@ -0,0 +1,36 @@\n+# Project-wide Gradle settings.\n+# IDE (e.g. Android Studio) users:\n+# Gradle settings configured through the IDE *will override*\n+# any settings specified in this file.\n+# For more details on how to configure your build environment visit\n+# http://www.gradle.org/docs/current/userguide/build_environment.html\n+# Specifies the JVM arguments used for the daemon process.\n+# The setting is particularly useful for tweaking memory settings.\n+org.gradle.jvmargs=-Xmx1536m\n+# When configured, Gradle will run in incubating parallel mode.\n+# This option should only be used with decoupled projects. More details, visit\n+# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects\n+# org.gradle.parallel=true\n+# AndroidX package structure to make it clearer which packages are bundled with the\n+# Android operating system, and which are packaged with your app's APK\n+# https://developer.android.com/topic/libraries/support-library/androidx-rn\n+android.useAndroidX=true", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODk0NDUyNw==", "url": "https://github.com/aws-amplify/amplify-android/pull/505#discussion_r428944527", "bodyText": "Update these so that they are correct and refer to the current state of the project in amplify-android.", "author": "jamesonwilliams", "createdAt": "2020-05-21T22:13:21Z", "path": "amplify-tools/gradle.properties", "diffHunk": "@@ -0,0 +1,36 @@\n+# Project-wide Gradle settings.\n+# IDE (e.g. Android Studio) users:\n+# Gradle settings configured through the IDE *will override*\n+# any settings specified in this file.\n+# For more details on how to configure your build environment visit\n+# http://www.gradle.org/docs/current/userguide/build_environment.html\n+# Specifies the JVM arguments used for the daemon process.\n+# The setting is particularly useful for tweaking memory settings.\n+org.gradle.jvmargs=-Xmx1536m\n+# When configured, Gradle will run in incubating parallel mode.\n+# This option should only be used with decoupled projects. More details, visit\n+# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects\n+# org.gradle.parallel=true\n+# AndroidX package structure to make it clearer which packages are bundled with the\n+# Android operating system, and which are packaged with your app's APK\n+# https://developer.android.com/topic/libraries/support-library/androidx-rn\n+android.useAndroidX=true\n+# Automatically convert third-party libraries to use AndroidX\n+android.enableJetifier=true\n+\n+GROUP=com.amplifyframework\n+VERSION_NAME=1.0.0\n+AWS_CORE_SDK_VERSION=2.16.3\n+\n+POM_URL=https://github.com/aws-amplify/amplify-cli/\n+POM_SCM_URL=https://github.com/aws-amplify/amplify-cli/\n+POM_SCM_CONNECTION=scm:git:git://github.com/aws-amplify/amplify-cli.git\n+POM_SCM_DEV_CONNECTION=scm:git:ssh://git@github.com/aws-amplify/amplify-cli.git", "originalCommit": "ba1fcb4458c53bf5e04f9d81f16fafb3c77eb4ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4b1ac235b4124c5c1016e21888bb6f026e02284c", "url": "https://github.com/aws-amplify/amplify-android/commit/4b1ac235b4124c5c1016e21888bb6f026e02284c", "message": "naming and formating", "committedDate": "2020-05-21T23:41:00Z", "type": "commit"}, {"oid": "36cdd24ad29732a666541df6628c411b38ed3909", "url": "https://github.com/aws-amplify/amplify-android/commit/36cdd24ad29732a666541df6628c411b38ed3909", "message": "removing files and formatting", "committedDate": "2020-05-21T23:53:12Z", "type": "commit"}, {"oid": "b246141e7d96d092fced3b7ed01c2fb8866ef344", "url": "https://github.com/aws-amplify/amplify-android/commit/b246141e7d96d092fced3b7ed01c2fb8866ef344", "message": "using publishing.gradle", "committedDate": "2020-05-22T01:14:43Z", "type": "commit"}]}