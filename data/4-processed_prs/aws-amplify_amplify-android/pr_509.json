{"pr_number": 509, "pr_title": "Add AmplifyDisposables utility to each modules using Rx", "pr_createdAt": "2020-05-22T05:08:56Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/509", "timeline": [{"oid": "0fb6f07ea0046a97d864fe2500d76ee4fd5ade8e", "url": "https://github.com/aws-amplify/amplify-android/commit/0fb6f07ea0046a97d864fe2500d76ee4fd5ade8e", "message": "Add AmplifyDisposables utility to each modules using Rx\n\nAmplifyDisposables is a factory class that generates Rx Disposable from\nan input Amplify Cancelable.\n\nThree copies of this file are added. Unfortunately this is necessary\nsince testutils, rxbinings, and aws-datastore only shared core as a\ncommon dependency module. However, core does not take a dependency on\nRx, by design.", "committedDate": "2020-05-22T06:24:53Z", "type": "commit"}, {"oid": "0fb6f07ea0046a97d864fe2500d76ee4fd5ade8e", "url": "https://github.com/aws-amplify/amplify-android/commit/0fb6f07ea0046a97d864fe2500d76ee4fd5ade8e", "message": "Add AmplifyDisposables utility to each modules using Rx\n\nAmplifyDisposables is a factory class that generates Rx Disposable from\nan input Amplify Cancelable.\n\nThree copies of this file are added. Unfortunately this is necessary\nsince testutils, rxbinings, and aws-datastore only shared core as a\ncommon dependency module. However, core does not take a dependency on\nRx, by design.", "committedDate": "2020-05-22T06:24:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxODQzNA==", "url": "https://github.com/aws-amplify/amplify-android/pull/509#discussion_r429218434", "bodyText": "Maybe I'm missing something but is this the type of thing you'd want to have as another method in your AmplifyDisposables factory?", "author": "TrekSoft", "createdAt": "2020-05-22T12:31:55Z", "path": "rxbindings/src/main/java/com/amplifyframework/rx/RxHubBinding.java", "diffHunk": "@@ -53,13 +53,8 @@\n     @Override\n     public Observable<HubEvent<?>> on(@NonNull HubChannel hubChannel) {\n         return Observable.defer(() -> Observable.create(emitter -> {\n-            final CompositeDisposable disposable = new CompositeDisposable();\n-            emitter.setDisposable(disposable);\n             SubscriptionToken token = hub.subscribe(hubChannel, emitter::onNext);\n-            disposable.add(Disposables.fromAction(() -> {\n-                hub.unsubscribe(token);\n-                emitter.onComplete();\n-            }));\n+            emitter.setDisposable(Disposables.fromAction(() -> hub.unsubscribe(token)));", "originalCommit": "0fb6f07ea0046a97d864fe2500d76ee4fd5ade8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ2MzM0OA==", "url": "https://github.com/aws-amplify/amplify-android/pull/509#discussion_r429463348", "bodyText": "Ah, good idea. Disposables.fromHubSubscription(hub, token) ? Something like that?", "author": "jamesonwilliams", "createdAt": "2020-05-22T21:41:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxODQzNA=="}], "type": "inlineReview"}]}