{"pr_number": 230, "pr_title": "Add User-Agent header to all outbound network requests", "pr_createdAt": "2020-01-13T22:04:11Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/230", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQzMzMxMg==", "url": "https://github.com/aws-amplify/amplify-android/pull/230#discussion_r366433312", "bodyText": "I am wondering if there is a way to read the version number from a version file so user-agent is updated automatically for future versions without requiring manual intervention.", "author": "desokroshan", "createdAt": "2020-01-14T16:17:00Z", "path": "core/src/main/java/com/amplifyframework/util/UserAgent.java", "diffHunk": "@@ -0,0 +1,132 @@\n+/*\n+ * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.util;\n+\n+import android.annotation.SuppressLint;\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+\n+/**\n+ * A utility to construct a User-Agent header, to be sent with all network operations.\n+ */\n+public final class UserAgent {\n+    private static String instance = null;\n+\n+    @SuppressWarnings(\"checkstyle:all\") private UserAgent() {}\n+\n+    /**\n+     * Gets a String to use as the value of a User-Agent header.\n+     * @return A value for a User-Agent header.\n+     */\n+    @SuppressLint(\"SyntheticAccessor\")\n+    @NonNull\n+    public static String string() {\n+        if (instance == null) {\n+            instance = new UserAgent.Builder()\n+                .libraryName(\"amplify-android\")\n+                .libraryVersion(\"0.9\")", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQ1MzMxOQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/230#discussion_r366453319", "bodyText": "BuildConfig.VERSION_NAME is one possible candidate for this. It would mean we'd be updating the build.gradle's central versionName field, instead of this .java file. Which would at least be a step in the right direction.\nPerhaps there's a way to read the pom artifact version at runtime, too. Agree that it warrants a closer look. I'll do a quick investigation.", "author": "jamesonwilliams", "createdAt": "2020-01-14T16:50:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQzMzMxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE4ODYwOA==", "url": "https://github.com/aws-amplify/amplify-android/pull/230#discussion_r368188608", "bodyText": "^ Did the thing", "author": "jamesonwilliams", "createdAt": "2020-01-18T00:32:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjQzMzMxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjYyMzQ5Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/230#discussion_r366623496", "bodyText": "#231", "author": "raphkim", "createdAt": "2020-01-14T23:16:57Z", "path": "configuration/checkstyle-rules.xml", "diffHunk": "@@ -26,6 +26,8 @@\n     <!-- Check that source files have a license header. -->\n     <module name=\"Header\">\n         <property name=\"headerFile\" value=\"configuration/java.header\" />\n+        <!-- TODO: re-instate checks for this line. 2019/2020 requires RegexpHeader -->\n+        <property name=\"ignoreLines\" value=\"2\" />", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "544d7f9b6e4a7c9ef9716cc2f290f9a3db014a62", "url": "https://github.com/aws-amplify/amplify-android/commit/544d7f9b6e4a7c9ef9716cc2f290f9a3db014a62", "message": "Add User-Agent header to all outbound network requests", "committedDate": "2020-01-20T23:48:36Z", "type": "commit"}]}