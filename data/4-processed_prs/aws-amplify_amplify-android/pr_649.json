{"pr_number": 649, "pr_title": "Developer menu navigation unit tests", "pr_createdAt": "2020-07-16T21:51:31Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/649", "timeline": [{"oid": "2416f3bce777a4b79a7e5e9816bf998dd1c601d3", "url": "https://github.com/aws-amplify/amplify-android/commit/2416f3bce777a4b79a7e5e9816bf998dd1c601d3", "message": "created activity to display dev menu from context and updated package name", "committedDate": "2020-06-24T18:41:41Z", "type": "commit"}, {"oid": "0fbba26fe8dcf30cc52c61b0465f7450caa27181", "url": "https://github.com/aws-amplify/amplify-android/commit/0fbba26fe8dcf30cc52c61b0465f7450caa27181", "message": "start the developer menu activity and display developer menu on bottom of screen", "committedDate": "2020-06-24T23:49:57Z", "type": "commit"}, {"oid": "fe55183e7c1e640cce2d383d7048a9664c0bc4a1", "url": "https://github.com/aws-amplify/amplify-android/commit/fe55183e7c1e640cce2d383d7048a9664c0bc4a1", "message": "changed styling of dev menu to overlay current view", "committedDate": "2020-06-26T15:04:40Z", "type": "commit"}, {"oid": "d5d1d3706b4580ff63d8bb1248969a5196db7a38", "url": "https://github.com/aws-amplify/amplify-android/commit/d5d1d3706b4580ff63d8bb1248969a5196db7a38", "message": "Merge branch 'main' into eeatonaws-dev-menu", "committedDate": "2020-06-26T15:10:02Z", "type": "commit"}, {"oid": "3782d18333b185ece108abda0004066a45b7d474", "url": "https://github.com/aws-amplify/amplify-android/commit/3782d18333b185ece108abda0004066a45b7d474", "message": "updated copyright year", "committedDate": "2020-06-29T20:33:08Z", "type": "commit"}, {"oid": "c7835d544c14244e76378be421f6efed13cb881b", "url": "https://github.com/aws-amplify/amplify-android/commit/c7835d544c14244e76378be421f6efed13cb881b", "message": "Merge branch 'main' into eeatonaws-dev-menu", "committedDate": "2020-06-29T22:12:54Z", "type": "commit"}, {"oid": "52b2dbce3cb491ea6ee6823e7e8e5cea6d8855cd", "url": "https://github.com/aws-amplify/amplify-android/commit/52b2dbce3cb491ea6ee6823e7e8e5cea6d8855cd", "message": "only display dev menu if in debug mode", "committedDate": "2020-06-30T16:44:27Z", "type": "commit"}, {"oid": "f08434b9b85c84306bfe396e190946d43998e126", "url": "https://github.com/aws-amplify/amplify-android/commit/f08434b9b85c84306bfe396e190946d43998e126", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu and fix merge conflict.", "committedDate": "2020-06-30T16:52:01Z", "type": "commit"}, {"oid": "71a07d475dee8b572fd77c031805f1649475322c", "url": "https://github.com/aws-amplify/amplify-android/commit/71a07d475dee8b572fd77c031805f1649475322c", "message": "activate dev menu on device shake or keyboard shortcut", "committedDate": "2020-07-01T21:22:18Z", "type": "commit"}, {"oid": "36481de3107cc22c71b57c0257b33ac63cfd1dd9", "url": "https://github.com/aws-amplify/amplify-android/commit/36481de3107cc22c71b57c0257b33ac63cfd1dd9", "message": "Merge branch 'main' into eeatonaws-dev-menu", "committedDate": "2020-07-01T22:14:19Z", "type": "commit"}, {"oid": "ae96c687d4c01486acf0047a5362d6384513d27f", "url": "https://github.com/aws-amplify/amplify-android/commit/ae96c687d4c01486acf0047a5362d6384513d27f", "message": "adjusted shake threshold", "committedDate": "2020-07-02T18:31:13Z", "type": "commit"}, {"oid": "59f95d076adafdd81a4e5db3428fc9de81962044", "url": "https://github.com/aws-amplify/amplify-android/commit/59f95d076adafdd81a4e5db3428fc9de81962044", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu", "committedDate": "2020-07-02T18:36:44Z", "type": "commit"}, {"oid": "e860ea2b7300e055bca4f7f63c49c133d31734c6", "url": "https://github.com/aws-amplify/amplify-android/commit/e860ea2b7300e055bca4f7f63c49c133d31734c6", "message": "reordered fields in DeveloperMenuActivity", "committedDate": "2020-07-06T14:34:22Z", "type": "commit"}, {"oid": "79bead5640b823697e44c5b5480093dd1b98da10", "url": "https://github.com/aws-amplify/amplify-android/commit/79bead5640b823697e44c5b5480093dd1b98da10", "message": "factor shake detection logic out into separate class", "committedDate": "2020-07-06T19:00:05Z", "type": "commit"}, {"oid": "533629c1b58b9d257f4f293f2d88732992bf5bab", "url": "https://github.com/aws-amplify/amplify-android/commit/533629c1b58b9d257f4f293f2d88732992bf5bab", "message": "added buttons to dev menu and did basic styling", "committedDate": "2020-07-06T21:10:07Z", "type": "commit"}, {"oid": "7790dbc1043732c7eb0060dbe125b5918b1292b5", "url": "https://github.com/aws-amplify/amplify-android/commit/7790dbc1043732c7eb0060dbe125b5918b1292b5", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu", "committedDate": "2020-07-06T21:11:44Z", "type": "commit"}, {"oid": "0e2118fd60e69e4186e452562260c5c3144dcd19", "url": "https://github.com/aws-amplify/amplify-android/commit/0e2118fd60e69e4186e452562260c5c3144dcd19", "message": "changed XML IDs from camel case to lower snake case", "committedDate": "2020-07-06T22:03:31Z", "type": "commit"}, {"oid": "920324b5be73e2a56d2b251957b2b4bacf3d24a1", "url": "https://github.com/aws-amplify/amplify-android/commit/920324b5be73e2a56d2b251957b2b4bacf3d24a1", "message": "move SensorManager out of activity and into ShakeDetector", "committedDate": "2020-07-07T15:16:16Z", "type": "commit"}, {"oid": "e731a750599d61ab034a124c9617ecfc77eaec85", "url": "https://github.com/aws-amplify/amplify-android/commit/e731a750599d61ab034a124c9617ecfc77eaec85", "message": "wrote unit tests for ShakeDetector", "committedDate": "2020-07-07T21:16:26Z", "type": "commit"}, {"oid": "ba110f5ac1e338a6870eca7357f02c8434180657", "url": "https://github.com/aws-amplify/amplify-android/commit/ba110f5ac1e338a6870eca7357f02c8434180657", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu", "committedDate": "2020-07-07T21:17:11Z", "type": "commit"}, {"oid": "12cdbe20dcbdde774cee97e23c3c6d3a047e1b6b", "url": "https://github.com/aws-amplify/amplify-android/commit/12cdbe20dcbdde774cee97e23c3c6d3a047e1b6b", "message": "fixed lint errors", "committedDate": "2020-07-07T21:33:03Z", "type": "commit"}, {"oid": "480c6423a454de4753eaed33aa3bda3842e96b12", "url": "https://github.com/aws-amplify/amplify-android/commit/480c6423a454de4753eaed33aa3bda3842e96b12", "message": "changed name of constants and throw RuntimeException if creating a thread fails", "committedDate": "2020-07-07T21:41:24Z", "type": "commit"}, {"oid": "f5c54c4cdf160fb77083c1bf33db3af68715efa6", "url": "https://github.com/aws-amplify/amplify-android/commit/f5c54c4cdf160fb77083c1bf33db3af68715efa6", "message": "added header and navigation to dev menu", "committedDate": "2020-07-09T15:21:28Z", "type": "commit"}, {"oid": "790e41fc727682b77d23d2c0d5ef31cc2dfbbe98", "url": "https://github.com/aws-amplify/amplify-android/commit/790e41fc727682b77d23d2c0d5ef31cc2dfbbe98", "message": "changed action bar title for each view", "committedDate": "2020-07-09T15:43:10Z", "type": "commit"}, {"oid": "aa2a7af11b06517e45e134b4d46a6c325580a9db", "url": "https://github.com/aws-amplify/amplify-android/commit/aa2a7af11b06517e45e134b4d46a6c325580a9db", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu", "committedDate": "2020-07-09T15:45:02Z", "type": "commit"}, {"oid": "4c7dc2692a5772aa2261c05278a43979206c61b3", "url": "https://github.com/aws-amplify/amplify-android/commit/4c7dc2692a5772aa2261c05278a43979206c61b3", "message": "Merge branch 'main' into eeatonaws-dev-menu", "committedDate": "2020-07-09T15:46:15Z", "type": "commit"}, {"oid": "32018a05a2240ea1aa119552ef3c8459177d2acb", "url": "https://github.com/aws-amplify/amplify-android/commit/32018a05a2240ea1aa119552ef3c8459177d2acb", "message": "Merge branch 'DevMenu' into eeatonaws-dev-menu", "committedDate": "2020-07-09T16:58:01Z", "type": "commit"}, {"oid": "5325c28d39c81a5b489305b7b89bc00bbb72b14c", "url": "https://github.com/aws-amplify/amplify-android/commit/5325c28d39c81a5b489305b7b89bc00bbb72b14c", "message": "use navigation and toolbar instead of nested layouts", "committedDate": "2020-07-10T22:50:45Z", "type": "commit"}, {"oid": "3ee50053fd65a748fa63c35c416f7f1fd24bbb9b", "url": "https://github.com/aws-amplify/amplify-android/commit/3ee50053fd65a748fa63c35c416f7f1fd24bbb9b", "message": "removed back arrow icon resource", "committedDate": "2020-07-10T22:51:38Z", "type": "commit"}, {"oid": "1730149e962c29552d116d1c6035a7dc23766e7a", "url": "https://github.com/aws-amplify/amplify-android/commit/1730149e962c29552d116d1c6035a7dc23766e7a", "message": "move start of license comment to new line", "committedDate": "2020-07-10T22:54:44Z", "type": "commit"}, {"oid": "46f119b17124e2013f07a46bb9b26c36ab247a1e", "url": "https://github.com/aws-amplify/amplify-android/commit/46f119b17124e2013f07a46bb9b26c36ab247a1e", "message": "add copyright statement", "committedDate": "2020-07-13T14:01:30Z", "type": "commit"}, {"oid": "42008d828fbdf6182d37debf24996d6b5d33ba17", "url": "https://github.com/aws-amplify/amplify-android/commit/42008d828fbdf6182d37debf24996d6b5d33ba17", "message": "dev menu navigation unit tests", "committedDate": "2020-07-13T18:43:07Z", "type": "commit"}, {"oid": "c6a2c969414abbd4096315be45c7915ffef3952b", "url": "https://github.com/aws-amplify/amplify-android/commit/c6a2c969414abbd4096315be45c7915ffef3952b", "message": "fixed merge conflicts with DevMenu branch", "committedDate": "2020-07-16T21:12:06Z", "type": "commit"}, {"oid": "e6d1faa3e58a5b459557680ae1d5c7f2ef0b9415", "url": "https://github.com/aws-amplify/amplify-android/commit/e6d1faa3e58a5b459557680ae1d5c7f2ef0b9415", "message": "removed old files and updated ID names", "committedDate": "2020-07-16T21:22:04Z", "type": "commit"}, {"oid": "4c8c0dae2d4a89ba41b42f105e252e240dd592e3", "url": "https://github.com/aws-amplify/amplify-android/commit/4c8c0dae2d4a89ba41b42f105e252e240dd592e3", "message": "removed unneeded dependency and fixed navigation unit tests", "committedDate": "2020-07-16T21:49:09Z", "type": "commit"}, {"oid": "345c0ce64fdd4af9e9eb0a60f390d953fff03370", "url": "https://github.com/aws-amplify/amplify-android/commit/345c0ce64fdd4af9e9eb0a60f390d953fff03370", "message": "move version number out of core build.gradle and remove old files", "committedDate": "2020-07-16T21:57:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjExNzQ5Mg==", "url": "https://github.com/aws-amplify/amplify-android/pull/649#discussion_r456117492", "bodyText": "does this variable have to be static?", "author": "raphkim", "createdAt": "2020-07-16T22:39:11Z", "path": "core/src/androidTest/java/com/amplifyframework/core/DevMenuMainViewInstrumentationTest.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import androidx.fragment.app.testing.FragmentScenario;\n+import androidx.navigation.NavDestination;\n+import androidx.navigation.Navigation;\n+import androidx.navigation.testing.TestNavHostController;\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.espresso.action.ViewActions;\n+import androidx.test.espresso.matcher.ViewMatchers;\n+\n+import com.amplifyframework.testutils.Sleep;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+\n+/**\n+ * Tests the navigation behavior for {@link DevMenuMainFragment}.\n+ */\n+public final class DevMenuMainViewInstrumentationTest {\n+    // Amount of time (in milliseconds) to wait before starting\n+    // a test, to allow any animations to complete.\n+    private static final int START_TEST_DELAY_MS = 500;\n+    // A navigation host controller for testing.\n+    private static TestNavHostController navHostController;", "originalCommit": "345c0ce64fdd4af9e9eb0a60f390d953fff03370", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ2NDgzMw==", "url": "https://github.com/aws-amplify/amplify-android/pull/649#discussion_r456464833", "bodyText": "No. I think that may have been left over from a previous iteration of these tests, so I'll remove \"static\".", "author": "eeatonaws", "createdAt": "2020-07-17T14:06:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjExNzQ5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjExODYzNQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/649#discussion_r456118635", "bodyText": "Not a big deal since it's a private helper function, but @RawRes annotation helps clarify that the param is looking for a resource ID :)", "author": "raphkim", "createdAt": "2020-07-16T22:42:36Z", "path": "core/src/androidTest/java/com/amplifyframework/core/DevMenuMainViewInstrumentationTest.java", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import androidx.fragment.app.testing.FragmentScenario;\n+import androidx.navigation.NavDestination;\n+import androidx.navigation.Navigation;\n+import androidx.navigation.testing.TestNavHostController;\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.espresso.action.ViewActions;\n+import androidx.test.espresso.matcher.ViewMatchers;\n+\n+import com.amplifyframework.testutils.Sleep;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+\n+/**\n+ * Tests the navigation behavior for {@link DevMenuMainFragment}.\n+ */\n+public final class DevMenuMainViewInstrumentationTest {\n+    // Amount of time (in milliseconds) to wait before starting\n+    // a test, to allow any animations to complete.\n+    private static final int START_TEST_DELAY_MS = 500;\n+    // A navigation host controller for testing.\n+    private static TestNavHostController navHostController;\n+\n+    /**\n+     * Go to the main screen of the developer menu.\n+     */\n+    @Before\n+    public void resetView() {\n+        navHostController = new TestNavHostController(ApplicationProvider.getApplicationContext());\n+        navHostController.setGraph(R.navigation.dev_menu_nav_graph);\n+        FragmentScenario<DevMenuMainFragment> mainMenuScenario =\n+                FragmentScenario.launchInContainer(DevMenuMainFragment.class);\n+        mainMenuScenario.onFragment(fragment -> Navigation.setViewNavController(fragment.requireView(),\n+                navHostController));\n+    }\n+\n+\n+    /**\n+     * Tests that the app is navigated to the environment information\n+     * screen when the view environment information button is pressed.\n+     */\n+    @Test\n+    public void testNavigationToEnvInfoScreen() {\n+        testNavigationOnButtonPress(R.id.env_button, R.id.environment_fragment);\n+    }\n+\n+    /**\n+     * Tests that the app is navigated to the device information\n+     * screen when the view device information button is pressed.\n+     */\n+    @Test\n+    public void testNavigationToDeviceInfoScreen() {\n+        testNavigationOnButtonPress(R.id.device_button, R.id.device_fragment);\n+    }\n+\n+    /**\n+     * Tests that the app is navigated to the logs screen when\n+     * the view logs button is pressed.\n+     */\n+    @Test\n+    public void testNavigationToLogsScreen() {\n+        testNavigationOnButtonPress(R.id.logs_button, R.id.logs_fragment);\n+    }\n+\n+    /**\n+     * Tests that the app is navigated to the file issue screen\n+     * when the file issue button is pressed.\n+     */\n+    @Test\n+    public void testNavigationToFileIssueScreen() {\n+        testNavigationOnButtonPress(R.id.file_issue_button, R.id.file_issue_fragment);\n+    }\n+\n+    /**\n+     * Test that the app is navigated to the destination with the given ID when\n+     * the button with the given ID is pressed.\n+     * @param buttonId ID of the button pressed\n+     * @param destinationId ID of the navigation destination\n+     */\n+    private void testNavigationOnButtonPress(int buttonId, int destinationId) {", "originalCommit": "345c0ce64fdd4af9e9eb0a60f390d953fff03370", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "118aeaa8afe8e4378904ede5ca47b9e218dd15a4", "url": "https://github.com/aws-amplify/amplify-android/commit/118aeaa8afe8e4378904ede5ca47b9e218dd15a4", "message": "removed static from field and added @RawRes annotation to resource ID parameters", "committedDate": "2020-07-17T14:10:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU4NTg0OQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/649#discussion_r456585849", "bodyText": "I guess these should go under test, not androidx? I do currently have Android X dependencies down there, as well. I'll admit that the layout of this ext block makes no sense. I just did some stuff. We can re-organize things if you can think of a better standardization. Currently I am trying to minimize the average length of dep.foo.bar.whatever, while still having descriptive and meaningful phrasing. A linguistic optimization challenge of sorts, information science at its core! Aye.", "author": "jamesonwilliams", "createdAt": "2020-07-17T17:46:20Z", "path": "build.gradle", "diffHunk": "@@ -63,13 +64,16 @@ ext {\n                 fragmentktx: \"androidx.navigation:navigation-fragment-ktx:$navigationVersion\",\n                 ui: \"androidx.navigation:navigation-ui:$navigationVersion\",\n                 uiktx: \"androidx.navigation:navigation-ui-ktx:$navigationVersion\",\n-                dynamicfeatures: \"androidx.navigation:navigation-dynamic-features-fragment:$navigationVersion\"\n+                dynamicfeatures: \"androidx.navigation:navigation-dynamic-features-fragment:$navigationVersion\",\n+                navtesting: \"androidx.navigation:navigation-testing:$navigationVersion\",\n+                fragmenttesting: \"androidx.fragment:fragment-testing:$fragmentVersion\"", "originalCommit": "118aeaa8afe8e4378904ede5ca47b9e218dd15a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU4Njk1NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/649#discussion_r456586955", "bodyText": "Shouldn't this say androidTestImplementation? debugImplementation is an implementation for the debug build. If you need it in the main artifact (not the test artifact), I'd sort this up int othe implementation section, as opposed to the instrument test dependencies section, where it is now.", "author": "jamesonwilliams", "createdAt": "2020-07-17T17:48:31Z", "path": "core/build.gradle", "diffHunk": "@@ -47,4 +47,25 @@ dependencies {\n     androidTestImplementation dependency.androidx.test.core\n     androidTestImplementation dependency.androidx.test.runner\n     androidTestImplementation dependency.androidx.test.junit\n+    androidTestImplementation dependency.androidx.test.espresso\n+    androidTestImplementation dependency.androidx.nav.navtesting\n+\n+    debugImplementation dependency.androidx.nav.fragmenttesting", "originalCommit": "118aeaa8afe8e4378904ede5ca47b9e218dd15a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU4ODc5Nw==", "url": "https://github.com/aws-amplify/amplify-android/pull/649#discussion_r456588797", "bodyText": "You can also try:\nandroid {\n\n  ...\n\n  testOptions {\n    animationsDisabled = true\n  }\n}\nto disable animations, and prevent the need for this sleep. (Sleeps in test code are brittle, since they're outside of the deterministic flow of the source code's logic.)\nIt would probably be appropriate, for amplify-android anyway, to cook that testOption right into the project-level build.gradle. I say this because, this is not a UI-centric project, so enablement of animations isn't the ethos of what this project needs to be testing. If it were a dedicated UI library, we probably would consider more refinement with that.", "author": "jamesonwilliams", "createdAt": "2020-07-17T17:52:05Z", "path": "core/src/androidTest/java/com/amplifyframework/core/DevMenuMainViewInstrumentationTest.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import androidx.annotation.RawRes;\n+import androidx.fragment.app.testing.FragmentScenario;\n+import androidx.navigation.NavDestination;\n+import androidx.navigation.Navigation;\n+import androidx.navigation.testing.TestNavHostController;\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.espresso.action.ViewActions;\n+import androidx.test.espresso.matcher.ViewMatchers;\n+\n+import com.amplifyframework.testutils.Sleep;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+\n+/**\n+ * Tests the navigation behavior for {@link DevMenuMainFragment}.\n+ */\n+public final class DevMenuMainViewInstrumentationTest {\n+    // Amount of time (in milliseconds) to wait before starting\n+    // a test, to allow any animations to complete.", "originalCommit": "118aeaa8afe8e4378904ede5ca47b9e218dd15a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU4OTQ1Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/649#discussion_r456589456", "bodyText": "Passing thought: personally, I like to wrap on -> so I can see the action behavior all in one line,\nlike:\nsetSomeFunctionalBehavior(() ->\n    doTheStuff(withComplextParams, orWhatever, maybeItsALongLine));", "author": "jamesonwilliams", "createdAt": "2020-07-17T17:53:17Z", "path": "core/src/androidTest/java/com/amplifyframework/core/DevMenuMainViewInstrumentationTest.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import androidx.annotation.RawRes;\n+import androidx.fragment.app.testing.FragmentScenario;\n+import androidx.navigation.NavDestination;\n+import androidx.navigation.Navigation;\n+import androidx.navigation.testing.TestNavHostController;\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.espresso.action.ViewActions;\n+import androidx.test.espresso.matcher.ViewMatchers;\n+\n+import com.amplifyframework.testutils.Sleep;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+\n+/**\n+ * Tests the navigation behavior for {@link DevMenuMainFragment}.\n+ */\n+public final class DevMenuMainViewInstrumentationTest {\n+    // Amount of time (in milliseconds) to wait before starting\n+    // a test, to allow any animations to complete.\n+    private static final int START_TEST_DELAY_MS = 500;\n+    // A navigation host controller for testing.\n+    private TestNavHostController navHostController;\n+\n+    /**\n+     * Go to the main screen of the developer menu.\n+     */\n+    @Before\n+    public void resetView() {\n+        navHostController = new TestNavHostController(ApplicationProvider.getApplicationContext());\n+        navHostController.setGraph(R.navigation.dev_menu_nav_graph);\n+        FragmentScenario<DevMenuMainFragment> mainMenuScenario =\n+                FragmentScenario.launchInContainer(DevMenuMainFragment.class);\n+        mainMenuScenario.onFragment(fragment -> Navigation.setViewNavController(fragment.requireView(),", "originalCommit": "118aeaa8afe8e4378904ede5ca47b9e218dd15a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU5MDAyMA==", "url": "https://github.com/aws-amplify/amplify-android/pull/649#discussion_r456590020", "bodyText": "The predominant style in the repo is to use static imports for jUnit and Mockito utility code. That is, here, just assertEquals, assertFoo, assertBar, without the Assert class ref.", "author": "jamesonwilliams", "createdAt": "2020-07-17T17:54:22Z", "path": "core/src/androidTest/java/com/amplifyframework/core/DevMenuMainViewInstrumentationTest.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amplifyframework.core;\n+\n+import androidx.annotation.RawRes;\n+import androidx.fragment.app.testing.FragmentScenario;\n+import androidx.navigation.NavDestination;\n+import androidx.navigation.Navigation;\n+import androidx.navigation.testing.TestNavHostController;\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.espresso.action.ViewActions;\n+import androidx.test.espresso.matcher.ViewMatchers;\n+\n+import com.amplifyframework.testutils.Sleep;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static androidx.test.espresso.Espresso.onView;\n+\n+/**\n+ * Tests the navigation behavior for {@link DevMenuMainFragment}.\n+ */\n+public final class DevMenuMainViewInstrumentationTest {\n+    // Amount of time (in milliseconds) to wait before starting\n+    // a test, to allow any animations to complete.\n+    private static final int START_TEST_DELAY_MS = 500;\n+    // A navigation host controller for testing.\n+    private TestNavHostController navHostController;\n+\n+    /**\n+     * Go to the main screen of the developer menu.\n+     */\n+    @Before\n+    public void resetView() {\n+        navHostController = new TestNavHostController(ApplicationProvider.getApplicationContext());\n+        navHostController.setGraph(R.navigation.dev_menu_nav_graph);\n+        FragmentScenario<DevMenuMainFragment> mainMenuScenario =\n+                FragmentScenario.launchInContainer(DevMenuMainFragment.class);\n+        mainMenuScenario.onFragment(fragment -> Navigation.setViewNavController(fragment.requireView(),\n+                navHostController));\n+    }\n+\n+\n+    /**\n+     * Tests that the app is navigated to the environment information\n+     * screen when the view environment information button is pressed.\n+     */\n+    @Test\n+    public void testNavigationToEnvInfoScreen() {\n+        testNavigationOnButtonPress(R.id.env_button, R.id.environment_fragment);\n+    }\n+\n+    /**\n+     * Tests that the app is navigated to the device information\n+     * screen when the view device information button is pressed.\n+     */\n+    @Test\n+    public void testNavigationToDeviceInfoScreen() {\n+        testNavigationOnButtonPress(R.id.device_button, R.id.device_fragment);\n+    }\n+\n+    /**\n+     * Tests that the app is navigated to the logs screen when\n+     * the view logs button is pressed.\n+     */\n+    @Test\n+    public void testNavigationToLogsScreen() {\n+        testNavigationOnButtonPress(R.id.logs_button, R.id.logs_fragment);\n+    }\n+\n+    /**\n+     * Tests that the app is navigated to the file issue screen\n+     * when the file issue button is pressed.\n+     */\n+    @Test\n+    public void testNavigationToFileIssueScreen() {\n+        testNavigationOnButtonPress(R.id.file_issue_button, R.id.file_issue_fragment);\n+    }\n+\n+    /**\n+     * Test that the app is navigated to the destination with the given ID when\n+     * the button with the given ID is pressed.\n+     * @param buttonId ID of the button pressed\n+     * @param destinationId ID of the navigation destination\n+     */\n+    private void testNavigationOnButtonPress(@RawRes int buttonId, @RawRes int destinationId) {\n+        Sleep.milliseconds(START_TEST_DELAY_MS);\n+        onView(ViewMatchers.withId(buttonId)).perform(ViewActions.click());\n+        NavDestination curDestination = navHostController.getCurrentDestination();\n+        Assert.assertNotNull(curDestination);\n+        Assert.assertEquals(curDestination.getId(), destinationId);", "originalCommit": "118aeaa8afe8e4378904ede5ca47b9e218dd15a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "35673cb024a3bae2c4672bdbdbace5a598f1f3ef", "url": "https://github.com/aws-amplify/amplify-android/commit/35673cb024a3bae2c4672bdbdbace5a598f1f3ef", "message": "moved some dependencies to build.gradle test section and removed sleep from tests", "committedDate": "2020-07-17T18:13:56Z", "type": "commit"}, {"oid": "6fdb4ac97cf2bfb29b43f9baf07c32607d79f939", "url": "https://github.com/aws-amplify/amplify-android/commit/6fdb4ac97cf2bfb29b43f9baf07c32607d79f939", "message": "removed unneeded comma after dependency", "committedDate": "2020-07-17T18:16:06Z", "type": "commit"}]}