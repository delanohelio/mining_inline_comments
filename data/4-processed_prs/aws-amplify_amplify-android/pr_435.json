{"pr_number": 435, "pr_title": "[aws-datastore] Move model concerns into model sub-package", "pr_createdAt": "2020-05-06T21:22:50Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/435", "timeline": [{"oid": "fabc1aedd310cf4977fcf28408b5105229f36967", "url": "https://github.com/aws-amplify/amplify-android/commit/fabc1aedd310cf4977fcf28408b5105229f36967", "message": "[aws-datastore] Move model concerns into model subpackage\n\nThe various implementations of ModelProvider (and the\nModelProviderLocator) are concerns of the data modeling aspect of the\nDataStore.\n\nThese components are moved into the newly created\ncom.amplifyframework.datastore.model subpackage, which deals with such\nconcerns.", "committedDate": "2020-05-06T21:21:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTEwMTE4OQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/435#discussion_r421101189", "bodyText": "There is a very similar thing in the source code, now, called a SimpleModelProvider. All code now uses that, instead.", "author": "jamesonwilliams", "createdAt": "2020-05-06T21:23:38Z", "path": "aws-datastore/src/androidTest/java/com/amplifyframework/datastore/ModelProviderFactory.java", "diffHunk": "@@ -1,47 +0,0 @@\n-/*\n- * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n- *\n- * Licensed under the Apache License, Version 2.0 (the \"License\").\n- * You may not use this file except in compliance with the License.\n- * A copy of the License is located at\n- *\n- *  http://aws.amazon.com/apache2.0\n- *\n- * or in the \"license\" file accompanying this file. This file is distributed\n- * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n- * express or implied. See the License for the specific language governing\n- * permissions and limitations under the License.\n- */\n-\n-package com.amplifyframework.datastore;\n-\n-import com.amplifyframework.core.model.Model;\n-import com.amplifyframework.core.model.ModelProvider;\n-\n-import java.util.Arrays;\n-import java.util.HashSet;\n-import java.util.Set;\n-\n-final class ModelProviderFactory {", "originalCommit": "fabc1aedd310cf4977fcf28408b5105229f36967", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI0MTE0MA==", "url": "https://github.com/aws-amplify/amplify-android/pull/435#discussion_r421241140", "bodyText": "I think you can just import it to avoid typing out the full name", "author": "raphkim", "createdAt": "2020-05-07T05:04:25Z", "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/model/ModelProviderLocator.java", "diffHunk": "@@ -33,16 +34,21 @@\n  * There is no compile-time guarantee that this class actually exists, or that it has that method,\n  * or that we can use that method. But in the \"happy path,\" this simplifies the amount of complexity\n  * needed to begin using the DataStore. This utility class is used from\n- * {@link AWSDataStorePlugin#AWSDataStorePlugin()}.\n+ * {@link com.amplifyframework.datastore.AWSDataStorePlugin#AWSDataStorePlugin()}.", "originalCommit": "fabc1aedd310cf4977fcf28408b5105229f36967", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI0OTIyNQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/435#discussion_r421249225", "bodyText": "I had it like that originally, however, then import com.amplifyframework.datastore.AWSDataStorePlugin appears at the top, and makes it look like a source-code dependency. The relationship is actually the opposite in reality, the plugin uses the locator, not vice-versa. To avoid ambiguity or misconception, I left it this way.", "author": "jamesonwilliams", "createdAt": "2020-05-07T05:34:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI0MTE0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI0MTM4Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/435#discussion_r421241386", "bodyText": "Won't the public methods require javadoc?", "author": "raphkim", "createdAt": "2020-05-07T05:05:29Z", "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/model/SimpleModelProvider.java", "diffHunk": "@@ -146,22 +146,24 @@ public String toString() {\n     /**\n      * Configures and builds instances of SimpleModelProvider.\n      */\n-    static final class Builder {\n+    @SuppressWarnings(\"WeakerAccess\")\n+    public static final class Builder {", "originalCommit": "fabc1aedd310cf4977fcf28408b5105229f36967", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI0OTkxOQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/435#discussion_r421249919", "bodyText": "Should our checkstyle work this way? Yes, I think so.\nDoes it actually? Unfortunately not. When I built the rule-set last year, I forgot to add MissingJavadocMethod.\nLater, we added MissingJavadocType, but we still don't have the method-level presence check.\nWe do have checks that say like \"If it is there, it had dang-nabbit better be well formed as heck!\".\nAs a result, I think we probably have a number of places in the code that are missing Javadocs. Anyway, I will add them for these, since we observed the issue in code review.\nAs a separate exercise, we should go back and add the MissingJavadocMethod for protected and publics, so that we can catch it before code review, in the future!", "author": "jamesonwilliams", "createdAt": "2020-05-07T05:36:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI0MTM4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI1MDkzNw==", "url": "https://github.com/aws-amplify/amplify-android/pull/435#discussion_r421250937", "bodyText": "Ehh, actually update -- I'll just add them all when I add MissingJavadocType. Cause that likely will require adding several more, anyway.", "author": "jamesonwilliams", "createdAt": "2020-05-07T05:39:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTI0MTM4Ng=="}], "type": "inlineReview"}]}