{"pr_number": 1073, "pr_title": "chore: add explicit error for signin cancelation", "pr_createdAt": "2020-12-25T02:24:51Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/1073", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc0MzI3OQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/1073#discussion_r549743279", "bodyText": "Maybe call this UserCancelledException instead?  That seems a little more clear to me, and also matches iOS.", "author": "richardmcclellan", "createdAt": "2020-12-29T15:21:25Z", "path": "core/src/main/java/com/amplifyframework/auth/AuthException.java", "diffHunk": "@@ -449,6 +449,23 @@ public FailedAttemptsLimitExceededException(Throwable cause) {\n         }\n     }\n \n+    /**\n+     * Could not complete an action because it was cancelled by the user.\n+     */\n+    public static class ActionCancelledException extends AuthException {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDIzODQ3NQ==", "url": "https://github.com/aws-amplify/amplify-android/pull/1073#discussion_r550238475", "bodyText": "Done!", "author": "jamesonwilliams", "createdAt": "2020-12-30T15:46:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc0MzI3OQ=="}], "type": "inlineReview"}, {"oid": "4f2626b99eb4fc78bd2280321fe5d5ee2914a6b7", "url": "https://github.com/aws-amplify/amplify-android/commit/4f2626b99eb4fc78bd2280321fe5d5ee2914a6b7", "message": "chore: add explict error for signin cancelation\n\nDuring sign-in with the Cognito hosted web UI, a Chrome Custom tab will\npop up. The user may fill in their sign-in information. However, they\nmay also exit out of the tab, in which case the sign-in will be\ncancelled.\n\nThe current behavior is to fire an exception on the onError callback\nwhen this occurs. That exception looks like this:\n```\nAuthException{\n  message=Sign in with web UI failed\n  cause=[...mobile client...] AuthNavigationException{\n    message=user cancelled\n  }\n  recoverySuggestion=See attached exception for more details\n}\n```\n\nThis commit updates the exception that gets returned, to something more\nspecific, that a user could catch explicitly:\n```\nActionCancelledException{\n  message=The user cancelled the sign-in attempt, so it did not complete.\n  cause=[...mobile client...] AuthNavigationException {\n    message=user cancelled\n  }\n  recoverySuggestion=To recover: catch this error, and show the sign-in screen again.\n}\n```\n\nWith this change, the caller may catch the cancellation exception in a\n`when` block:\n```kotlin\nAmplify.Auth.signInWithWebUI(this, { /* result .. */ }, { error ->\n    when (error) {\n        is ActionCancelledException -> Log.w(\"TAG\", \"sign-in cancelled\")\n        else ->  Log.e(\"xx\", \"Login failed.\", error)\n    }\n}\n```\n\nThis commit also applies similar updates to the sign-out method.\n\nRelated: https://github.com/aws-amplify/amplify-ios/pull/982", "committedDate": "2020-12-30T15:43:48Z", "type": "commit"}, {"oid": "7af13137800988846918a934be3f7be5a6ad0b98", "url": "https://github.com/aws-amplify/amplify-android/commit/7af13137800988846918a934be3f7be5a6ad0b98", "message": "Rename exception to UserCancelledException, as suggested by Richard M", "committedDate": "2020-12-30T15:45:49Z", "type": "commit"}, {"oid": "7af13137800988846918a934be3f7be5a6ad0b98", "url": "https://github.com/aws-amplify/amplify-android/commit/7af13137800988846918a934be3f7be5a6ad0b98", "message": "Rename exception to UserCancelledException, as suggested by Richard M", "committedDate": "2020-12-30T15:45:49Z", "type": "forcePushed"}]}