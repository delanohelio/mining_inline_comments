{"pr_number": 340, "pr_title": "[aws-datastore] Re-provision if system models change", "pr_createdAt": "2020-04-02T06:15:12Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/340", "timeline": [{"oid": "f48c69d29a770428b47925c7c05a824131c14eab", "url": "https://github.com/aws-amplify/amplify-android/commit/f48c69d29a770428b47925c7c05a824131c14eab", "message": "[aws-datastore] Reprovision if system models change\n\nThere was some exiting logic to blow away the SQL tables if the user's\nmodel structure changes (as informed by the version in the model\nprovider).\n\nHowever, no such logic existed for changes to the system models\nprovider.\n\nTo accomodate this, form a compound provider of both, and consider its\nversion, instead.", "committedDate": "2020-04-02T06:05:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjYyMzczMw==", "url": "https://github.com/aws-amplify/amplify-android/pull/340#discussion_r402623733", "bodyText": "This is nice! LGTM", "author": "raphkim", "createdAt": "2020-04-02T22:07:09Z", "path": "aws-datastore/src/main/java/com/amplifyframework/datastore/storage/sqlite/SQLiteStorageAdapter.java", "diffHunk": "@@ -141,8 +140,7 @@ private SQLiteStorageAdapter(\n             ModelProvider userModelsProvider,\n             ModelProvider systemModelsProvider) {\n         this.modelSchemaRegistry = modelSchemaRegistry;\n-        this.userModelsProvider = userModelsProvider;\n-        this.systemModelsProvider = systemModelsProvider;\n+        this.modelsProvider = CompoundModelProvider.of(userModelsProvider, systemModelsProvider);", "originalCommit": "f48c69d29a770428b47925c7c05a824131c14eab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}