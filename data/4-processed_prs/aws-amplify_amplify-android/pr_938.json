{"pr_number": 938, "pr_title": "Add Builder for AuthRule", "pr_createdAt": "2020-10-28T04:05:06Z", "pr_url": "https://github.com/aws-amplify/amplify-android/pull/938", "timeline": [{"oid": "195c0147a9a3d5f4d6a21a961a92c7c9c9a5519d", "url": "https://github.com/aws-amplify/amplify-android/commit/195c0147a9a3d5f4d6a21a961a92c7c9c9a5519d", "message": "Add Builder for AuthRule", "committedDate": "2020-10-28T04:03:05Z", "type": "commit"}, {"oid": "55b4fbc735818a76d85ca81a82d2335f125bc217", "url": "https://github.com/aws-amplify/amplify-android/commit/55b4fbc735818a76d85ca81a82d2335f125bc217", "message": "PR Comments", "committedDate": "2020-11-05T23:17:30Z", "type": "commit"}, {"oid": "55b4fbc735818a76d85ca81a82d2335f125bc217", "url": "https://github.com/aws-amplify/amplify-android/commit/55b4fbc735818a76d85ca81a82d2335f125bc217", "message": "PR Comments", "committedDate": "2020-11-05T23:17:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQyOTg2Mg==", "url": "https://github.com/aws-amplify/amplify-android/pull/938#discussion_r518429862", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    public AuthRule build() {\n          \n          \n            \n                    @NonNull\n          \n          \n            \n                    public AuthRule build() {", "author": "jamesonwilliams", "createdAt": "2020-11-05T23:21:09Z", "path": "core/src/main/java/com/amplifyframework/core/model/AuthRule.java", "diffHunk": "@@ -161,4 +186,104 @@ public String toString() {\n                 \", operations=\" + operations + '\\'' +\n                 '}';\n     }\n+\n+    /**\n+     * Builder class for {@link AuthRule}.\n+     */\n+    public static final class Builder {\n+        private AuthStrategy authStrategy;\n+        private String ownerField;\n+        private String identityClaim;\n+        private String groupClaim;\n+        private List<String> groups;\n+        private String groupsField;\n+        private List<ModelOperation> operations = new ArrayList<>();\n+\n+        /**\n+         * Sets the auth strategy of this rule.\n+         * @param authStrategy AuthStrategy is the type of auth strategy to use.\n+         * @return the association model with given name\n+         */\n+        @NonNull\n+        public AuthRule.Builder authStrategy(@NonNull AuthStrategy authStrategy) {\n+            this.authStrategy = Objects.requireNonNull(authStrategy);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the owner field of this rule.\n+         * @param ownerField OwnerField is the owner authorization.\n+         * @return the association model with give target name\n+         */\n+        @NonNull\n+        public AuthRule.Builder ownerField(@NonNull String ownerField) {\n+            this.ownerField = Objects.requireNonNull(ownerField);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the identity claim of this rule.\n+         * @param identityClaim IdentityClaim specifies a custom claim.\n+         * @return the association model with given associated name\n+         */\n+        @NonNull\n+        public AuthRule.Builder identityClaim(@NonNull String identityClaim) {\n+            this.identityClaim = Objects.requireNonNull(identityClaim);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the group claim of this rule.\n+         * @param groupClaim GroupClaim specified a custom claim.\n+         * @return the association model with given associated type\n+         */\n+        @NonNull\n+        public AuthRule.Builder groupClaim(@NonNull String groupClaim) {\n+            this.groupClaim = Objects.requireNonNull(groupClaim);\n+            return this;\n+        }\n+        \n+        /**\n+         * Sets the groups this rule applies to.\n+         * @param groups Groups is static group authorization.\n+         * @return the association model with given associated type\n+         */\n+        @NonNull\n+        public AuthRule.Builder groups(@NonNull List<String> groups) {\n+            this.groups = Objects.requireNonNull(groups);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the groupsField of this rule.\n+         * @param groupsField GroupsField is for dynamic group authorization.\n+         * @return the association model with given associated type\n+         */\n+        @NonNull\n+        public AuthRule.Builder groupsField(@NonNull String groupsField) {\n+            this.groupsField = Objects.requireNonNull(groupsField);\n+            return this;\n+        }\n+\n+        /**\n+         * Sets the operations allowed for this rule.\n+         * @param operations Operations specifies which {@link ModelOperation}s are protected by this {@link AuthRule}.\n+         * @return the association model with given associated type\n+         */\n+        @NonNull\n+        public AuthRule.Builder operations(@NonNull List<ModelOperation> operations) {\n+            this.operations = Objects.requireNonNull(operations);\n+            return this;\n+        }\n+\n+        /**\n+         * Builds an immutable AuthRule instance using\n+         * builder object.\n+         * @return AuthRule instance\n+         */\n+        public AuthRule build() {", "originalCommit": "55b4fbc735818a76d85ca81a82d2335f125bc217", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQyOTk3Ng==", "url": "https://github.com/aws-amplify/amplify-android/pull/938#discussion_r518429976", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static AuthRule.Builder builder() {\n          \n          \n            \n                @NonNull\n          \n          \n            \n                public static AuthRule.Builder builder() {", "author": "jamesonwilliams", "createdAt": "2020-11-05T23:21:29Z", "path": "core/src/main/java/com/amplifyframework/core/model/AuthRule.java", "diffHunk": "@@ -53,6 +56,28 @@ public AuthRule(com.amplifyframework.core.model.annotations.AuthRule authRule) {\n         this.operations = Arrays.asList(authRule.operations());\n     }\n \n+    /**\n+     * Construct the AuthRule object from the builder.\n+     * For internal use only.\n+     */\n+    private AuthRule(@NonNull AuthRule.Builder builder) {\n+        this.authStrategy = builder.authStrategy;\n+        this.ownerField = builder.ownerField;\n+        this.identityClaim = builder.identityClaim;\n+        this.groupClaim = builder.groupClaim;\n+        this.groups = builder.groups;\n+        this.groupsField = builder.groupsField;\n+        this.operations = builder.operations;\n+    }\n+\n+    /**\n+     * Return the builder object.\n+     * @return the builder object.\n+     */\n+    public static AuthRule.Builder builder() {", "originalCommit": "55b4fbc735818a76d85ca81a82d2335f125bc217", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f1878bff68fa01d7d8ea678d623629ed18297933", "url": "https://github.com/aws-amplify/amplify-android/commit/f1878bff68fa01d7d8ea678d623629ed18297933", "message": "Update core/src/main/java/com/amplifyframework/core/model/AuthRule.java", "committedDate": "2020-11-05T23:22:05Z", "type": "commit"}, {"oid": "5abec26f647a14a10776371ca4ca253ece253e0d", "url": "https://github.com/aws-amplify/amplify-android/commit/5abec26f647a14a10776371ca4ca253ece253e0d", "message": "Update core/src/main/java/com/amplifyframework/core/model/AuthRule.java", "committedDate": "2020-11-05T23:22:13Z", "type": "commit"}]}