{"pr_number": 9758, "pr_title": "Properly support defining env vars from secret/configmap keys", "pr_createdAt": "2020-06-03T19:42:45Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/9758", "timeline": [{"oid": "b3cb6ee49333d226b9e48309c30c95b6c15beee3", "url": "https://github.com/quarkusio/quarkus/commit/b3cb6ee49333d226b9e48309c30c95b6c15beee3", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629", "committedDate": "2020-06-05T09:22:04Z", "type": "forcePushed"}, {"oid": "8f531a9b08b2097733581abbf018f0b918dcc48e", "url": "https://github.com/quarkusio/quarkus/commit/8f531a9b08b2097733581abbf018f0b918dcc48e", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629", "committedDate": "2020-06-07T20:27:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMyMTczOA==", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r437321738", "bodyText": "I think that we do need to also test the case where we map a configmap property to env vars.\nNote: This already exists for old style in branch 3.11 so you could pick it up from there.", "author": "iocanel", "createdAt": "2020-06-09T10:57:58Z", "path": "integration-tests/kubernetes/quarkus-standard-way/src/test/resources/kubernetes-with-env-from-configmap.properties", "diffHunk": "@@ -0,0 +1 @@\n+quarkus.kubernetes.env.configmaps=my-configmap", "originalCommit": "8f531a9b08b2097733581abbf018f0b918dcc48e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzM2MDc2OQ==", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r437360769", "bodyText": "I assume you're talking about the 1.3 branch, right? Commit ccb3574?", "author": "metacosm", "createdAt": "2020-06-09T12:14:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMyMTczOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMyMjE4Ng==", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r437322186", "bodyText": "I think that we do need to also test the case where we map a secret property to env vars.\nNote: This already exists for old style in branch 3.11 so you could pick it up from there.", "author": "iocanel", "createdAt": "2020-06-09T10:58:47Z", "path": "integration-tests/kubernetes/quarkus-standard-way/src/test/resources/kubernetes-with-env-from-secret.properties", "diffHunk": "@@ -1 +1 @@\n-quarkus.kubernetes.env-vars.ignored.secret=my-secret\n+quarkus.kubernetes.env.secrets=my-secret", "originalCommit": "8f531a9b08b2097733581abbf018f0b918dcc48e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "eb04499d69c76d91abab041a5d9431b1eb437516", "url": "https://github.com/quarkusio/quarkus/commit/eb04499d69c76d91abab041a5d9431b1eb437516", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629", "committedDate": "2020-06-09T15:18:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxNTA5Mw==", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r438215093", "bodyText": "@metacosm: Since you've asked about naming ... How about\nquarkus.kubernetes.env.secret.db-password.secret=db-secret\nquarkus.kubernetes.env.secret.db-password.key=database.password", "author": "iocanel", "createdAt": "2020-06-10T15:30:32Z", "path": "integration-tests/kubernetes/quarkus-standard-way/src/test/resources/kubernetes-with-env-from-secret.properties", "diffHunk": "@@ -1 +1,3 @@\n-quarkus.kubernetes.env-vars.ignored.secret=my-secret\n+quarkus.kubernetes.env.secrets=my-secret\n+quarkus.kubernetes.env.vars-from-secret.db-password.secret=db-secret", "originalCommit": "eb04499d69c76d91abab041a5d9431b1eb437516", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxNjQwOA==", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r438216408", "bodyText": "Since, the property that lets you pass one or more secrets is called secrets I feel that this has to be aligned.", "author": "iocanel", "createdAt": "2020-06-10T15:32:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxNTA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxNzY1MA==", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r438217650", "bodyText": "I think that would be too confusing / ambiguous so I'd rather have something explicit. \ud83d\ude15", "author": "metacosm", "createdAt": "2020-06-10T15:34:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxNTA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMwNTI4NA==", "url": "https://github.com/quarkusio/quarkus/pull/9758#discussion_r438305284", "bodyText": "Since, the property that lets you pass one or more secrets is called secrets I feel that this has to be aligned.\n\nSo what would you suggest then?", "author": "metacosm", "createdAt": "2020-06-10T17:50:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxNTA5Mw=="}], "type": "inlineReview"}, {"oid": "ccdb8c63eb3cfca9a31c7bf7fd80c32ffd031a54", "url": "https://github.com/quarkusio/quarkus/commit/ccdb8c63eb3cfca9a31c7bf7fd80c32ffd031a54", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629", "committedDate": "2020-06-11T12:44:49Z", "type": "commit"}, {"oid": "ccdb8c63eb3cfca9a31c7bf7fd80c32ffd031a54", "url": "https://github.com/quarkusio/quarkus/commit/ccdb8c63eb3cfca9a31c7bf7fd80c32ffd031a54", "message": "feat: support extracting var from key from secret/configmap\n\nFixes #9629", "committedDate": "2020-06-11T12:44:49Z", "type": "forcePushed"}]}