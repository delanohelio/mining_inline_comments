{"pr_number": 6797, "pr_title": "Efficient caching for multi stage build", "pr_createdAt": "2020-01-26T13:53:05Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6797", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNzUzMA==", "url": "https://github.com/quarkusio/quarkus/pull/6797#discussion_r371017530", "bodyText": "Why this change? I don't see how it's related to the other part", "author": "geoand", "createdAt": "2020-01-26T17:47:34Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -348,12 +348,13 @@ In this guide we will use the first stage to generate the native executable usin\n ----\n ## Stage 1 : build with maven builder image with native capabilities\n FROM quay.io/quarkus/centos-quarkus-maven:{graalvm-version} AS build\n-COPY src /usr/src/app/src\n-COPY pom.xml /usr/src/app\n+COPY pom.xml /project/usr/src/app/\n+RUN mvn -f /project/usr/src/app/pom.xml -B de.qaware.maven:go-offline-maven-plugin:1.2.4:resolve-dependencies\n+COPY src /project/usr/src/app/src\n USER root\n-RUN chown -R quarkus /usr/src/app\n+RUN chown -R quarkus /project/usr/src/app", "originalCommit": "6549da67a5835d672580f48fd82a0e29701b590d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk2MzkzNw==", "url": "https://github.com/quarkusio/quarkus/pull/6797#discussion_r383963937", "bodyText": "Sorry for the delay, I was out of office for several weeks. You are correct, probably it's not really related. But without this change I wasn't able to build the final image. Maybe there was a change in the quay.io/quarkus/centos-quarkus-maven image.", "author": "crumohr", "createdAt": "2020-02-25T15:46:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNzUzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNzUzOQ==", "url": "https://github.com/quarkusio/quarkus/pull/6797#discussion_r371017539", "bodyText": "Same here", "author": "geoand", "createdAt": "2020-01-26T17:47:42Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -348,12 +348,13 @@ In this guide we will use the first stage to generate the native executable usin\n ----\n ## Stage 1 : build with maven builder image with native capabilities\n FROM quay.io/quarkus/centos-quarkus-maven:{graalvm-version} AS build\n-COPY src /usr/src/app/src\n-COPY pom.xml /usr/src/app\n+COPY pom.xml /project/usr/src/app/\n+RUN mvn -f /project/usr/src/app/pom.xml -B de.qaware.maven:go-offline-maven-plugin:1.2.4:resolve-dependencies\n+COPY src /project/usr/src/app/src\n USER root\n-RUN chown -R quarkus /usr/src/app\n+RUN chown -R quarkus /project/usr/src/app\n USER quarkus\n-RUN mvn -f /usr/src/app/pom.xml -Pnative clean package\n+RUN mvn -f /project/usr/src/app/pom.xml -Pnative clean package", "originalCommit": "6549da67a5835d672580f48fd82a0e29701b590d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk2NDI2Nw==", "url": "https://github.com/quarkusio/quarkus/pull/6797#discussion_r383964267", "bodyText": "Same reason as above.", "author": "crumohr", "createdAt": "2020-02-25T15:47:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNzUzOQ=="}], "type": "inlineReview"}, {"oid": "d1a6c69b20300d1a10d30d9938b6a18a12bacc95", "url": "https://github.com/quarkusio/quarkus/commit/d1a6c69b20300d1a10d30d9938b6a18a12bacc95", "message": "Efficient caching for multi stage build", "committedDate": "2020-04-23T10:05:44Z", "type": "commit"}]}