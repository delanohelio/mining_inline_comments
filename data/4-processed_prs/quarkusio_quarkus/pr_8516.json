{"pr_number": 8516, "pr_title": "Type-safe message bundles powered by Qute", "pr_createdAt": "2020-04-10T08:27:44Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/8516", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY3MTI4MA==", "url": "https://github.com/quarkusio/quarkus/pull/8516#discussion_r406671280", "bodyText": "should be interface here.", "author": "FroMage", "createdAt": "2020-04-10T09:00:33Z", "path": "extensions/qute/runtime/src/main/java/io/quarkus/qute/i18n/MessageBundle.java", "diffHunk": "@@ -0,0 +1,49 @@\n+package io.quarkus.qute.i18n;\n+\n+import static java.lang.annotation.ElementType.TYPE;\n+import static java.lang.annotation.RetentionPolicy.RUNTIME;\n+\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.Target;\n+\n+/**\n+ * Marks a message bundle interface.\n+ * \n+ * Each method of such interface represents a single message.\n+ * \n+ * <pre>\n+ * &#64;MessageBundle(\"msg\")\n+ * class MyBundle {", "originalCommit": "5053c6008bc6e9fd484477754babecbe57b7a22f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjcwMTA2MA==", "url": "https://github.com/quarkusio/quarkus/pull/8516#discussion_r406701060", "bodyText": "Definitely! ;-)", "author": "mkouba", "createdAt": "2020-04-10T10:29:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY3MTI4MA=="}], "type": "inlineReview"}, {"oid": "7622750c3484691fd02c99ec737d7d9b07840861", "url": "https://github.com/quarkusio/quarkus/commit/7622750c3484691fd02c99ec737d7d9b07840861", "message": "Type-safe message bundles powered by Qute", "committedDate": "2020-06-18T14:18:14Z", "type": "forcePushed"}, {"oid": "bf7fc09860592f4a5723988d39f9f05c9a302167", "url": "https://github.com/quarkusio/quarkus/commit/bf7fc09860592f4a5723988d39f9f05c9a302167", "message": "Validate message bundle methods referenced in templates", "committedDate": "2020-06-23T09:32:16Z", "type": "forcePushed"}, {"oid": "a255115156dbb7f280850d0ad53e093961d73a27", "url": "https://github.com/quarkusio/quarkus/commit/a255115156dbb7f280850d0ad53e093961d73a27", "message": "Update docs", "committedDate": "2020-06-23T20:05:14Z", "type": "forcePushed"}, {"oid": "fed054947aae8eb09abe294b312cfd84389bc730", "url": "https://github.com/quarkusio/quarkus/commit/fed054947aae8eb09abe294b312cfd84389bc730", "message": "Update docs", "committedDate": "2020-06-23T20:23:19Z", "type": "forcePushed"}, {"oid": "9a350fe3f46f5b90d4ca4e4291fa64c4621618de", "url": "https://github.com/quarkusio/quarkus/commit/9a350fe3f46f5b90d4ca4e4291fa64c4621618de", "message": "Type-safe message bundles powered by Qute\n\n- message bundle methods are validated\n- message bundle methods referenced in templates are validated\n- localization files are supported", "committedDate": "2020-06-24T06:14:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwMjQ3OA==", "url": "https://github.com/quarkusio/quarkus/pull/8516#discussion_r444702478", "bodyText": "\"prevent type-safe errors\" sounds weird :-) You probably meant just \"prevent errors\".", "author": "Ladicek", "createdAt": "2020-06-24T07:37:54Z", "path": "docs/src/main/asciidoc/qute-reference.adoc", "diffHunk": "@@ -986,10 +986,92 @@ class DetailResource {\n \n In the development mode, all files located in `src/main/resources/templates` are watched for changes and modifications are immediately visible.\n \n-=== Configuration Reference\n+=== Type-safe Message Bundles\n+\n+==== Basic Concepts\n+\n+The basic idea is that every message is potentially a very simple template.\n+In order to prevent type-safe errors a message is defined as an annotated method of a *message bundle interface*.", "originalCommit": "9a350fe3f46f5b90d4ca4e4291fa64c4621618de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwNjU1Mw==", "url": "https://github.com/quarkusio/quarkus/pull/8516#discussion_r444706553", "bodyText": "Well, I meant \"prevent type errors\". Thanks for spotting this.", "author": "mkouba", "createdAt": "2020-06-24T07:45:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwMjQ3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwNjg5NA==", "url": "https://github.com/quarkusio/quarkus/pull/8516#discussion_r444706894", "bodyText": "I [hope that I] understand why this is, but it seems quite counter-intuitive. If it can't be the default locale of the runtime JVM, then it should probably be highlighted in the user documentation more prominently.", "author": "Ladicek", "createdAt": "2020-06-24T07:46:30Z", "path": "extensions/qute/runtime/src/main/java/io/quarkus/qute/i18n/MessageBundle.java", "diffHunk": "@@ -0,0 +1,67 @@\n+package io.quarkus.qute.i18n;\n+\n+import static java.lang.annotation.ElementType.TYPE;\n+import static java.lang.annotation.RetentionPolicy.RUNTIME;\n+\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.Target;\n+\n+/**\n+ * Denotes a message bundle interface.\n+ * <p>\n+ * Each method represents a single message:\n+ * \n+ * <pre>\n+ * &#64;MessageBundle\n+ * interface MyBundle {\n+ * \n+ *     &#64;Message(\"Hello {name}!\")\n+ *     String hello_world(String name);\n+ * }\n+ * </pre>\n+ */\n+@Retention(RUNTIME)\n+@Target(TYPE)\n+public @interface MessageBundle {\n+\n+    /**\n+     * Constant value for {@link #locale()} indicating that the default locale of the Java Virtual Machine used to build the\n+     * application should be used.", "originalCommit": "9a350fe3f46f5b90d4ca4e4291fa64c4621618de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwOTk1Mg==", "url": "https://github.com/quarkusio/quarkus/pull/8516#discussion_r444709952", "bodyText": "Good point...", "author": "mkouba", "createdAt": "2020-06-24T07:52:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwNjg5NA=="}], "type": "inlineReview"}, {"oid": "bd35da654cb2aef3dbff7ae7fcdf4c64591619d1", "url": "https://github.com/quarkusio/quarkus/commit/bd35da654cb2aef3dbff7ae7fcdf4c64591619d1", "message": "Type-safe message bundles powered by Qute\n\n- message bundle methods are validated\n- message bundle methods referenced in templates are validated\n- localization files are supported", "committedDate": "2020-06-24T08:39:46Z", "type": "forcePushed"}, {"oid": "7614d35af892ebd00db62b899fd3f481d0d8797c", "url": "https://github.com/quarkusio/quarkus/commit/7614d35af892ebd00db62b899fd3f481d0d8797c", "message": "Type-safe message bundles powered by Qute\n\n- message bundle methods are validated\n- message bundle methods referenced in templates are validated\n- localization files are supported", "committedDate": "2020-06-24T10:03:28Z", "type": "forcePushed"}, {"oid": "bc5d95a053a14481ebc69e03f2fea40c4569fa47", "url": "https://github.com/quarkusio/quarkus/commit/bc5d95a053a14481ebc69e03f2fea40c4569fa47", "message": "Type-safe message bundles powered by Qute\n\n- message bundle methods are validated\n- message bundle methods referenced in templates are validated\n- localization files are supported", "committedDate": "2020-06-25T15:35:34Z", "type": "forcePushed"}, {"oid": "d58d94e3b1597918cc1b7e4b311c6d12cf6521db", "url": "https://github.com/quarkusio/quarkus/commit/d58d94e3b1597918cc1b7e4b311c6d12cf6521db", "message": "Type-safe message bundles powered by Qute\n\n- message bundle methods are validated\n- message bundle methods referenced in templates are validated\n- localization files are supported", "committedDate": "2020-06-29T08:58:12Z", "type": "forcePushed"}, {"oid": "c2f388ce695d40e7629e3f601a3cad506f333633", "url": "https://github.com/quarkusio/quarkus/commit/c2f388ce695d40e7629e3f601a3cad506f333633", "message": "Type-safe message bundles powered by Qute\n\n- message bundle methods are validated\n- message bundle methods referenced in templates are validated\n- localization files are supported", "committedDate": "2020-06-29T09:08:25Z", "type": "commit"}]}