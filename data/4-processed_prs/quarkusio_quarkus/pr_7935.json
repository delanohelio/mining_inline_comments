{"pr_number": 7935, "pr_title": "Add SmallRye Metrics extension to Infinispan Embedded", "pr_createdAt": "2020-03-18T13:11:07Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/7935", "timeline": [{"oid": "08da74e4c4fbadda63df771b11058bc64e665e0f", "url": "https://github.com/quarkusio/quarkus/commit/08da74e4c4fbadda63df771b11058bc64e665e0f", "message": "Removed incorrect comment", "committedDate": "2020-03-18T13:09:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MzI3OQ==", "url": "https://github.com/quarkusio/quarkus/pull/7935#discussion_r394343279", "bodyText": "You should remove that one and use quarkus-smallrye-metrics here and quarkus-smallrye-metrics-deployment in the deployment module.", "author": "gsmet", "createdAt": "2020-03-18T13:26:06Z", "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,7 +30,6 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>", "originalCommit": "08da74e4c4fbadda63df771b11058bc64e665e0f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0NDM3MA==", "url": "https://github.com/quarkusio/quarkus/pull/7935#discussion_r394344370", "bodyText": "Sounds good. I have no clue about this metrics stuff :)", "author": "wburns", "createdAt": "2020-03-18T13:27:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MzI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0NDk2Mw==", "url": "https://github.com/quarkusio/quarkus/pull/7935#discussion_r394344963", "bodyText": "I think there is no deployment-time dependency on metrics in this case. Metrics are handled by Infinispan directly, not by any Quarkus extension, so it all happens in runtime", "author": "jmartisk", "createdAt": "2020-03-18T13:28:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MzI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM1MDEwOA==", "url": "https://github.com/quarkusio/quarkus/pull/7935#discussion_r394350108", "bodyText": "So I must admit I am not sure what you guys want me to do :)", "author": "wburns", "createdAt": "2020-03-18T13:36:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MzI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM1MjE1OQ==", "url": "https://github.com/quarkusio/quarkus/pull/7935#discussion_r394352159", "bodyText": "@jmartisk we might need some reflection registration at some point and so on.\nSo if you have the runtime dependency, you need the deployment one.", "author": "gsmet", "createdAt": "2020-03-18T13:39:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MzI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM1NDI5Mg==", "url": "https://github.com/quarkusio/quarkus/pull/7935#discussion_r394354292", "bodyText": "I pushed an additional commit with the change.\n@jmartisk can you check it's OK with you?", "author": "gsmet", "createdAt": "2020-03-18T13:42:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MzI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM1OTc1MA==", "url": "https://github.com/quarkusio/quarkus/pull/7935#discussion_r394359750", "bodyText": "@gsmet sorry I could have done that - I was more asking if I needed to actually do that.", "author": "wburns", "createdAt": "2020-03-18T13:50:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MzI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM2ODUyOA==", "url": "https://github.com/quarkusio/quarkus/pull/7935#discussion_r394368528", "bodyText": "Ah OK, I misunderstood. Let's have @jmartisk check this. I think it's the right thing to do to be on the safe side and be sure SmallRye Metrics behave correctly in native mode. Even if the deployment extension doesn't have anything special for native atm (I haven't checked), it might not always be the case so better be on the safe side.", "author": "gsmet", "createdAt": "2020-03-18T14:02:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MzI3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM4MjE2Mg==", "url": "https://github.com/quarkusio/quarkus/pull/7935#discussion_r394382162", "bodyText": "LGTM!", "author": "jmartisk", "createdAt": "2020-03-18T14:20:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MzI3OQ=="}], "type": "inlineReview"}, {"oid": "f49c4644570d5d24e9e7db83fea5d5d2e268cdc5", "url": "https://github.com/quarkusio/quarkus/commit/f49c4644570d5d24e9e7db83fea5d5d2e268cdc5", "message": "Use quarkus-smallrye-metrics extension instead of smallrye-metrics", "committedDate": "2020-03-18T13:41:39Z", "type": "commit"}]}