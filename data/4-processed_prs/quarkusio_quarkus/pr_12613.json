{"pr_number": 12613, "pr_title": "Kubernetes Container Resources Management", "pr_createdAt": "2020-10-08T21:13:34Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/12613", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk2Mzg0MQ==", "url": "https://github.com/quarkusio/quarkus/pull/12613#discussion_r503963841", "bodyText": "Why don't we use the upstream decorators?", "author": "iocanel", "createdAt": "2020-10-13T13:44:39Z", "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/ApplyMemoryDecorator.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package io.quarkus.kubernetes.deployment;\n+\n+import io.dekorate.deps.kubernetes.api.model.ContainerFluent;\n+import io.dekorate.deps.kubernetes.api.model.Quantity;\n+import io.dekorate.kubernetes.decorator.ApplicationContainerDecorator;\n+import io.dekorate.kubernetes.decorator.Decorator;\n+import io.dekorate.kubernetes.decorator.ResourceProvidingDecorator;\n+\n+//TODO: To Remove when #653 (https://github.com/dekorateio/dekorate/pull/653) will be merge in dekorate and new version bumped in Quarkus\n+public class ApplyMemoryDecorator extends ApplicationContainerDecorator<ContainerFluent<?>> {", "originalCommit": "0f5ebfdc0f84d8794ea2860e72682aaf359ec79d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk4ODQwMg==", "url": "https://github.com/quarkusio/quarkus/pull/12613#discussion_r503988402", "bodyText": "Hello @iocanel\nBecause as for now, the generated resources for memory limits/requests is named \"mem\" and not \"memory\" in dekorate.\nThis was the goal of my PR: dekorateio/dekorate#653 you merged into dekorate some days ago.\nUntil this fix is incorporated into a dekorate release and the new version bumped into Quarkus, we have to use that custom decorator.\nOnce done, of course, I will correct to use the upstream decorator.", "author": "Vinche59", "createdAt": "2020-10-13T14:15:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk2Mzg0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDgyNTc0Nw==", "url": "https://github.com/quarkusio/quarkus/pull/12613#discussion_r510825747", "bodyText": "Hello @iocanel\nNow that upstream fix have been integrated into Quarkus, I remove the custom decorator for \"requests memory\".", "author": "Vinche59", "createdAt": "2020-10-23T11:44:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk2Mzg0MQ=="}], "type": "inlineReview"}, {"oid": "0b6c0befbd705f025819b16b5e92827c3b696496", "url": "https://github.com/quarkusio/quarkus/commit/0b6c0befbd705f025819b16b5e92827c3b696496", "message": "Kubernetes Container Resources Management\n\nAllow cpu & memory limits and requests to be generated in kubernetes deployment\n\nFix: #12398\n\nSigned-off-by: Vincent Sourtin <sourin-v@bridgestone-bae.com>", "committedDate": "2020-10-23T11:41:41Z", "type": "commit"}]}