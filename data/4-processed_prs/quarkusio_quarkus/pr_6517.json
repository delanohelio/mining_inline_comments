{"pr_number": 6517, "pr_title": "Ensure that Java 12+ interfaces of java.lang.String are as CDI types", "pr_createdAt": "2020-01-13T07:08:22Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6517", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY4NDI3MA==", "url": "https://github.com/quarkusio/quarkus/pull/6517#discussion_r365684270", "bodyText": "Why not to use DotNames?", "author": "mkouba", "createdAt": "2020-01-13T08:30:31Z", "path": "independent-projects/arc/processor/src/main/java/io/quarkus/arc/processor/Types.java", "diffHunk": "@@ -45,6 +46,13 @@\n \n     private static final Type OBJECT_TYPE = Type.create(DotNames.OBJECT, Kind.CLASS);\n \n+    // we ban these interfaces because they are new to Java 12 and are used by java.lang.String which\n+    // means that they cannot be included in bytecode if we want to have application built with Java 12+ but targeting Java 8 - 11\n+    // actually run on those older versions\n+    // TODO:  add a extensible banning mechanism based on predicates if we find that this set needs to grow...\n+    private static final Set<String> BANNED_INTERFACE_TYPES = new HashSet<>(", "originalCommit": "06773f8afe2fdc8c099ab3c869043962e7bdfbf6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY4NDgwNw==", "url": "https://github.com/quarkusio/quarkus/pull/6517#discussion_r365684807", "bodyText": "Makes sense, I'll do that", "author": "geoand", "createdAt": "2020-01-13T08:32:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY4NDI3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY4NzE2Mg==", "url": "https://github.com/quarkusio/quarkus/pull/6517#discussion_r365687162", "bodyText": "Done", "author": "geoand", "createdAt": "2020-01-13T08:39:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY4NDI3MA=="}], "type": "inlineReview"}, {"oid": "62859c6250cf5391942d5cd08624cafdbb84d5dd", "url": "https://github.com/quarkusio/quarkus/commit/62859c6250cf5391942d5cd08624cafdbb84d5dd", "message": "Ensure that Java 12+ interfaces of java.lang.String are as CDI types\n\nThis is needed because when building with Java 12+ but targeting Java 8-11,\nwe need to ensure that the extra interfaces that java.lang.String implements\ndo not end up in the generated bytecode.\n\nFixes: #5062", "committedDate": "2020-01-13T08:34:45Z", "type": "forcePushed"}, {"oid": "2214f6f1050e93425a3281e4e4bb574749da993c", "url": "https://github.com/quarkusio/quarkus/commit/2214f6f1050e93425a3281e4e4bb574749da993c", "message": "Ensure that Java 12+ interfaces of java.lang.String are as CDI types\n\nThis is needed because when building with Java 12+ but targeting Java 8-11,\nwe need to ensure that the extra interfaces that java.lang.String implements\ndo not end up in the generated bytecode.\n\nFixes: #5062", "committedDate": "2020-01-13T08:39:52Z", "type": "commit"}, {"oid": "2214f6f1050e93425a3281e4e4bb574749da993c", "url": "https://github.com/quarkusio/quarkus/commit/2214f6f1050e93425a3281e4e4bb574749da993c", "message": "Ensure that Java 12+ interfaces of java.lang.String are as CDI types\n\nThis is needed because when building with Java 12+ but targeting Java 8-11,\nwe need to ensure that the extra interfaces that java.lang.String implements\ndo not end up in the generated bytecode.\n\nFixes: #5062", "committedDate": "2020-01-13T08:39:52Z", "type": "forcePushed"}]}