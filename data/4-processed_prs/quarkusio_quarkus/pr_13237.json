{"pr_number": 13237, "pr_title": "Initial Support for BouncyCastle FIPS", "pr_createdAt": "2020-11-11T15:59:42Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13237", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ2MjAxMA==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r521462010", "bodyText": "Is this version somehow related to the bouncycastle.version above? If so, maybe it would be nice to add a comment to let maintainers know that this version needs to be updated if the version above changes", "author": "gastaldi", "createdAt": "2020-11-11T16:02:47Z", "path": "bom/application/pom.xml", "diffHunk": "@@ -15,6 +15,7 @@\n \n     <properties>\n         <bouncycastle.version>1.66</bouncycastle.version>\n+        <bouncycastle.fips.version>1.0.2</bouncycastle.fips.version>", "originalCommit": "2c49cf007f2312fc00d3f20ecf1bb8758c126363", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyODc1Nw==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r521528757", "bodyText": "Hi @gastaldi No, bc-fips repackages a good number of classes from the regular BC provider and adds some add ons", "author": "sberyozkin", "createdAt": "2020-11-11T17:41:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ2MjAxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ2ODkyNQ==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r521468925", "bodyText": "IMHO this step is a bit cryptic (no pun intended) :)\nIt seems easier to do have something like quarkus.security.fips.enabled=true than to remember to use BCFIPS here", "author": "gastaldi", "createdAt": "2020-11-11T16:13:01Z", "path": "docs/src/main/asciidoc/security-customization.adoc", "diffHunk": "@@ -277,6 +277,30 @@ and add the latest BouncyCastle TLS dependency:\n </dependency>\n ----\n \n+=== BouncyCastle FIPS\n+\n+If you need to register an `org.bouncycastle.jcajce.provider.BouncyCastleFipsProvider` JCE provider then please set a `BCFIPS` provider name:\n+\n+.Example Security Providers BouncyCastle FIPS Configuration\n+[source,properties]\n+----\n+quarkus.security.security-providers=BCFIPS", "originalCommit": "2c49cf007f2312fc00d3f20ecf1bb8758c126363", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUzNTY4Ng==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r521535686", "bodyText": "@gastaldi users will have to remember either option or just check the docs :-)\nBCFIPS is a well-known provider name known to anyone who wants to use Bouncy Castle and FIPS and it is consistent with how BouncyCastle itself recommends enabling BC + FIPS (i.e register a security provider named BCFIPS) and here we do the same, register this provider via quarkus.security.security-providers.\nIf we start with quarkus.security.fips.enabled=true then it will become ambiguous IMHO, should it work with the default SunJSSE which also has some FIPS code ? Or what does this mean, given the default providers section above:\nquarkus.security.security-providers=SunRsaSign\nquarkus.security.fips.enabled=true\n\nSo IMHO having an atomic BCFIPS is all right as we only plan to support FIPS in combination with BouncyCastle. Have I convinced you a little bit :-) ?", "author": "sberyozkin", "createdAt": "2020-11-11T17:52:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ2ODkyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUzNzUzMQ==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r521537531", "bodyText": "Then BCFIPSJSSE or similar will follow, a single documented 'convention' name, BC docs recommend setting 3 providers, and some properties, but in Quarkus it will be a one liner - enable BC + FIPS to secure 2-way TLS.\nquarkus.security.fips.enabled=true will not cover a requirement to use it for TLS", "author": "sberyozkin", "createdAt": "2020-11-11T17:54:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ2ODkyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUzOTEwNA==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r521539104", "bodyText": "Fair enough. I was under the impression that quarkus.security.security-providers would contain FQNs of java.security.Provider implementations", "author": "gastaldi", "createdAt": "2020-11-11T17:56:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ2ODkyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU0MjU0MA==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r521542540", "bodyText": "@gastaldi see, we are not going to support fips generally, that is the problem with yet another property IMHO. We have security-providers one and that should be enough to register a provider which can do whatever it can do, it is generic", "author": "sberyozkin", "createdAt": "2020-11-11T18:02:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ2ODkyNQ=="}], "type": "inlineReview"}, {"oid": "ca32a88714c181bbd73b2bb8c4d72a2a2c857f5c", "url": "https://github.com/quarkusio/quarkus/commit/ca32a88714c181bbd73b2bb8c4d72a2a2c857f5c", "message": "Support for BouncyCastle FIPS", "committedDate": "2020-11-11T18:33:50Z", "type": "forcePushed"}, {"oid": "30943147da0350d612498e01d92d69f666342eb3", "url": "https://github.com/quarkusio/quarkus/commit/30943147da0350d612498e01d92d69f666342eb3", "message": "Support for BouncyCastle FIPS", "committedDate": "2020-11-13T10:17:44Z", "type": "commit"}, {"oid": "30943147da0350d612498e01d92d69f666342eb3", "url": "https://github.com/quarkusio/quarkus/commit/30943147da0350d612498e01d92d69f666342eb3", "message": "Support for BouncyCastle FIPS", "committedDate": "2020-11-13T10:17:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjkxNzcyNA==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r522917724", "bodyText": "Maybe it's easier to just do:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  - dependency-name: org.bouncycastle:bcprov-jdk15on\n          \n          \n            \n                  - dependency-name: org.bouncycastle:*\n          \n      \n    \n    \n  \n\nWDYT?", "author": "gastaldi", "createdAt": "2020-11-13T12:24:31Z", "path": ".github/dependabot.yml", "diffHunk": "@@ -120,6 +120,10 @@ updates:\n       # Micrometer\n       - dependency-name: io.micrometer:micrometer-bom\n       - dependency-name: io.micrometer:micrometer-registry-stackdriver\n+      # BouncyCastle\n+      - dependency-name: org.bouncycastle:bcprov-jdk15on", "originalCommit": "30943147da0350d612498e01d92d69f666342eb3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk5NzQ3OQ==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r522997479", "bodyText": "Hi @gastaldi I think we had some problems with a wildcard for some group id with a similar situation, here bc-fips is on a different version (1.0.2) to the one of other 2 deps (1.66) ? I recall we discussed something similar with Guillaume, CC @gsmet", "author": "sberyozkin", "createdAt": "2020-11-13T14:49:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjkxNzcyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzA1OTc4Ng==", "url": "https://github.com/quarkusio/quarkus/pull/13237#discussion_r523059786", "bodyText": "Ah okay, no problem then \ud83d\udc4d", "author": "gastaldi", "createdAt": "2020-11-13T16:25:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjkxNzcyNA=="}], "type": "inlineReview"}]}