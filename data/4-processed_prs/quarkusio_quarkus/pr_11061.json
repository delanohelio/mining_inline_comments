{"pr_number": 11061, "pr_title": "Documentation for building native executables with Mandrel", "pr_createdAt": "2020-07-29T13:44:07Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11061", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMxNjk4Nw==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r462316987", "bodyText": "There are actually 3 distributions. GraalVM CE, GraalVM EE, and Mandrel.", "author": "zakkak", "createdAt": "2020-07-29T13:54:50Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -14,7 +14,50 @@ This guide covers:\n \n This guide takes as input the application developed in the link:getting-started[Getting Started Guide].\n \n-== Prerequisites\n+== GraalVM\n+\n+Building a native executable requires using a distribution of GraalVM.\n+There are two distributions: Oracle GraalVM and Mandrel.", "originalCommit": "e1b9878ddf1911fa4becded6515af9b9083ac35a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMxOTYwNw==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r462319607", "bodyText": "Maybe highlight that the user should consult the mandrel-related tip?", "author": "zakkak", "createdAt": "2020-07-29T13:58:14Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -14,7 +14,50 @@ This guide covers:\n \n This guide takes as input the application developed in the link:getting-started[Getting Started Guide].\n \n-== Prerequisites\n+== GraalVM\n+\n+Building a native executable requires using a distribution of GraalVM.\n+There are two distributions: Oracle GraalVM and Mandrel.\n+The differences between the two distributions are as follows:\n+\n+* Mandrel is a downstream distribution of the Oracle GraalVM community edition.\n+Mandrel's main goal is to provide a way to build native executables specifically designed to support Quarkus.\n+\n+* Mandrel releases are built from a code base derived from the upstream Oracle GraalVM code base,\n+with only minor changes but some significant exclusions.\n+They support the same capabilities to build native executables as Oracle GraalVM,\n+with no significant changes to functionality.\n+Notably, they do not include support for polyglot programming.\n+\n+* Mandrel is built slightly differently to GraalVM, using the standard OpenJDK project.\n+This means that it does not profit from a few small enhancements that Oracle have added to the version of OpenJDK used to build their own GraalVM downloads.\n+\n+* Mandrel is only available for projects that can be compiled with Java 11.\n+If you are using Java 8,\n+you should consider using Oracle GraalVM instead.\n+\n+* Mandrel is currently only recommended for containerized environments.\n+If you are building native executables for macOS or Windows,\n+you should consider using Oracle GraalVM instead.\n+Building for bare metal Linux is possible,\n+with details available in the https://github.com/graalvm/mandrel/blob/master/README-Mandrel.md[Mandrel README]\n+and https://github.com/graalvm/mandrel/releases[Mandrel releases].\n+\n+The prerequisites vary slightly depending on whether you are using Oracle GraalVM or Mandrel.\n+\n+== Prerequisites for Mandrel\n+\n+To complete this guide using Mandrel, you need:\n+\n+* less than 15 minutes\n+* an IDE\n+* JDK 11 installed with `JAVA_HOME` configured appropriately\n+* A working container runtime (Docker, podman)\n+* The code of the application developed in the link:getting-started[Getting Started Guide].\n+\n+Skip to the <<#container-runtime,this section>> to continue with the guide for Mandrel.", "originalCommit": "e1b9878ddf1911fa4becded6515af9b9083ac35a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMTcyOQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r462411729", "bodyText": "I don't think we want that hardcoded here. It should be in the build-parent with the GraalVM version.", "author": "gsmet", "createdAt": "2020-07-29T16:00:57Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -327,6 +370,14 @@ You can also select the container runtime to use with:\n ./mvnw package -Pnative -Dquarkus.native.container-runtime=podman\n ----\n \n+[TIP]\n+====\n+Building with Mandrel requires a custom builder image parameter to be passed additionally:\n+[source,shell]\n+----\n+./mvnw package -Pnative -Dquarkus.native.container-build=true -Dquarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-mandrel:20.1.0.1.Alpha2-java11", "originalCommit": "e1b9878ddf1911fa4becded6515af9b9083ac35a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM2ODQ1MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466368451", "bodyText": "Yeah, I wasn't happy about the hardcoding either. Even if it's in the build-parent, it'd be a hardcode of some sort.\nI wonder if we should have a a 20.1 quay tag that just links to the latest 20.1 release. That'd make it more palatable. @Karm @zakkak?", "author": "galderz", "createdAt": "2020-08-06T12:14:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMTcyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM3MDA1MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466370051", "bodyText": "+1", "author": "jerboaa", "createdAt": "2020-08-06T12:17:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMTcyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM5NzU2MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466397561", "bodyText": "Created graalvm/mandrel#95", "author": "galderz", "createdAt": "2020-08-06T13:06:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMTcyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMjU2MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r462412561", "bodyText": "I read all these points and I only see drawbacks for Mandrel: it has less features, doesn't have some enhancements and doesn't support Java 8. It's a bit of a hard sell :).", "author": "gsmet", "createdAt": "2020-07-29T16:02:04Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -14,7 +14,50 @@ This guide covers:\n \n This guide takes as input the application developed in the link:getting-started[Getting Started Guide].\n \n-== Prerequisites\n+== GraalVM\n+\n+Building a native executable requires using a distribution of GraalVM.\n+There are two distributions: Oracle GraalVM and Mandrel.\n+The differences between the two distributions are as follows:\n+\n+* Mandrel is a downstream distribution of the Oracle GraalVM community edition.\n+Mandrel's main goal is to provide a way to build native executables specifically designed to support Quarkus.\n+\n+* Mandrel releases are built from a code base derived from the upstream Oracle GraalVM code base,\n+with only minor changes but some significant exclusions.\n+They support the same capabilities to build native executables as Oracle GraalVM,\n+with no significant changes to functionality.\n+Notably, they do not include support for polyglot programming.\n+\n+* Mandrel is built slightly differently to GraalVM, using the standard OpenJDK project.\n+This means that it does not profit from a few small enhancements that Oracle have added to the version of OpenJDK used to build their own GraalVM downloads.\n+\n+* Mandrel is only available for projects that can be compiled with Java 11.\n+If you are using Java 8,\n+you should consider using Oracle GraalVM instead.", "originalCommit": "e1b9878ddf1911fa4becded6515af9b9083ac35a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjczMTc3Mg==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r462731772", "bodyText": "/me chipping in from my vacation: The fact that something is smaller and focused on a particular function is IMHO a huge plus. I am not a copywriter, yet I think we should formulate something to the fact that Mandrel is minimized and focused. In the age of bloatware where a simple web page pushes 10MB of data you didn't want on you, there is a value in delivering less.", "author": "Karm", "createdAt": "2020-07-30T04:46:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMjU2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjkyNjQ4Mw==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r462926483", "bodyText": "+1 we should point out that mandrel distribution is ~200MB while graalvm CE is ~400MB.", "author": "zakkak", "createdAt": "2020-07-30T11:18:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMjU2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM5MTU1OA==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466391558", "bodyText": "@gsmet This is not at all about us providing an inferior product. It is about us providing a better level of support to the majority of our users.\nmandrel removes a bundle of GraalVM features that are not needed for the vast majority of Quarkus native apps. It omits OpenJDK 'enhancements' to JDK11 that our OpenJDK team does not manage and cannot vouch for (that's especially important when it comes to conformance and security). It does not attempt to work on ljdk8 but that's a legacy release of OpenJDK which most Quarkus users will have no good reason to adopt and for which, in consequence, we have no commitment to support Quarkus beyond best effort. In other words, mandrel streamlines and simplifies the build, test, release and support cycle for most of our users, especially those who pay for support.\nNote that we are not forcing anyone's hand here. We won't refuse to support anyone using Quarkus on GraalVM for preference whether with a labs jdk11u or labs jdk8u. Indeed, we will do or best to provide support for any problems that manifest in GraalVM when using that configuration. Obviously, we would much prefer if our paid support customers were to use mandrel. If they don't then should any problems manifest on GraalVM we will almost certainly want them to check -- where possible -- that those  problems also reproduce on mandrel. If they cannot then we will still try to help but we are not going to write a blank cheque based on whatever code Oracle labs might add to GraalVM beyond the native image component. Anyway, the idea that we are pushing some inferior variant at the expense of GraalVM is very far from the truth.", "author": "adinn", "createdAt": "2020-08-06T12:56:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMjU2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMzE0NQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r462413145", "bodyText": "You haven't closed your TIP.", "author": "gsmet", "createdAt": "2020-07-29T16:02:57Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -327,6 +370,14 @@ You can also select the container runtime to use with:\n ./mvnw package -Pnative -Dquarkus.native.container-runtime=podman\n ----\n \n+[TIP]\n+====\n+Building with Mandrel requires a custom builder image parameter to be passed additionally:\n+[source,shell]\n+----\n+./mvnw package -Pnative -Dquarkus.native.container-build=true -Dquarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-mandrel:20.1.0.1.Alpha2-java11\n+----\n+Check https://quay.io/repository/quarkus/ubi-quarkus-mandrel?tab=tags[here] to find out about available tags.", "originalCommit": "e1b9878ddf1911fa4becded6515af9b9083ac35a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc4MDAwOQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r462780009", "bodyText": "Hello @galderz, is this sentence implying that the native-image generation needs to happen within a container or is this saying that the built native image needs to be run within a container?\nEither way, I'm curious about the requirement of a containerized environment. In the context of Mandrel, is there some specific advantages that containerized environments provide? Are these advantages the same as probably Graal VM too provides in containerized environment?", "author": "jaikiran", "createdAt": "2020-07-30T06:55:36Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -14,7 +14,50 @@ This guide covers:\n \n This guide takes as input the application developed in the link:getting-started[Getting Started Guide].\n \n-== Prerequisites\n+== GraalVM\n+\n+Building a native executable requires using a distribution of GraalVM.\n+There are two distributions: Oracle GraalVM and Mandrel.\n+The differences between the two distributions are as follows:\n+\n+* Mandrel is a downstream distribution of the Oracle GraalVM community edition.\n+Mandrel's main goal is to provide a way to build native executables specifically designed to support Quarkus.\n+\n+* Mandrel releases are built from a code base derived from the upstream Oracle GraalVM code base,\n+with only minor changes but some significant exclusions.\n+They support the same capabilities to build native executables as Oracle GraalVM,\n+with no significant changes to functionality.\n+Notably, they do not include support for polyglot programming.\n+\n+* Mandrel is built slightly differently to GraalVM, using the standard OpenJDK project.\n+This means that it does not profit from a few small enhancements that Oracle have added to the version of OpenJDK used to build their own GraalVM downloads.\n+\n+* Mandrel is only available for projects that can be compiled with Java 11.\n+If you are using Java 8,\n+you should consider using Oracle GraalVM instead.\n+\n+* Mandrel is currently only recommended for containerized environments.", "originalCommit": "e1b9878ddf1911fa4becded6515af9b9083ac35a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgzNzAwNw==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r462837007", "bodyText": "It's not required. But it's convenient. If you don't want containerized, you can just install a mandrel release from here and run with it (by pointing GRAALVM_HOME to the install): https://github.com/graalvm/mandrel/releases\nWe say that, because on Mac and Windows you can use the container to produce linux native images and deploy on Linux as no Windows and Mac community builds exist.\nWe only provide Linux builds only so far. If somebody steps in to do Mac and Windows community builds even better. It probably won't be us doing those (in the foreseeable future). Note that for Mac builds one would have to do OpenJDK 11u vanilla mac builds too or use some other base JDK which would open up the Mac build to a different class of problems.", "author": "jerboaa", "createdAt": "2020-07-30T08:31:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc4MDAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM5MDg0Mg==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466390842", "bodyText": "@jaikiran I'm expanding the points here to make it clearer.", "author": "galderz", "createdAt": "2020-08-06T12:55:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc4MDAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ1MDI2NA==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466450264", "bodyText": "The updated section looks much more clearer to me. Thank you @galderz", "author": "jaikiran", "createdAt": "2020-08-06T14:23:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc4MDAwOQ=="}], "type": "inlineReview"}, {"oid": "c2e138a315896d5afd79ee96c9db44fd06f89a48", "url": "https://github.com/quarkusio/quarkus/commit/c2e138a315896d5afd79ee96c9db44fd06f89a48", "message": "Documentation for building native executables with Mandrel #11032", "committedDate": "2020-08-06T13:59:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ2NDkzOA==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466464938", "bodyText": "I think this should be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Skip to the <<#container-runtime,this section>> to continue with the guide for Mandrel,\n          \n          \n            \n            Skip to <<#container-runtime,this section>> to continue with the guide for Mandrel,", "author": "zakkak", "createdAt": "2020-08-06T14:43:59Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -14,7 +14,54 @@ This guide covers:\n \n This guide takes as input the application developed in the link:getting-started[Getting Started Guide].\n \n-== Prerequisites\n+== GraalVM\n+\n+Building a native executable requires using a distribution of GraalVM.\n+There are three distributions:\n+Oracle GraalVM Community Edition (CE), Oracle GraalVM Enterprise Edition (EE) and Mandrel.\n+The differences between the Oracle and Mandrel distributions are as follows:\n+\n+* Mandrel is a downstream distribution of the Oracle GraalVM CE.\n+Mandrel's main goal is to provide a way to build native executables specifically designed to support Quarkus.\n+\n+* Mandrel releases are built from a code base derived from the upstream Oracle GraalVM CE code base,\n+with only minor changes but some significant exclusions.\n+They support the same capabilities to build native executables as Oracle GraalVM CE,\n+with no significant changes to functionality.\n+Notably, they do not include support for polyglot programming.\n+\n+* Mandrel is built slightly differently to Oracle GraalVM CE, using the standard OpenJDK project.\n+This means that it does not profit from a few small enhancements that Oracle have added to the version of OpenJDK used to build their own GraalVM downloads.\n+\n+* Mandrel is only available for projects that can be compiled with Java 11.\n+If you are using Java 8,\n+you should consider using Oracle GraalVM instead.\n+\n+* Mandrel is currently only recommended for building native executables that target Linux containerized environments.\n+This means that Mandrel users should use containers to build their native executables.\n+If you are building native executables for macOS or Windows target platforms,\n+you should consider using Oracle GraalVM instead,\n+because Mandrel does not currently target these platforms.\n+Building native executables directly on bare metal Linux is possible,\n+with details available in the https://github.com/graalvm/mandrel/blob/master/README-Mandrel.md[Mandrel README]\n+and https://github.com/graalvm/mandrel/releases[Mandrel releases].\n+\n+The prerequisites vary slightly depending on whether you are using Oracle GraalVM CE/EE or Mandrel.\n+\n+== Prerequisites for Mandrel\n+\n+To complete this guide using Mandrel, you need:\n+\n+* less than 15 minutes\n+* an IDE\n+* JDK 11 installed with `JAVA_HOME` configured appropriately\n+* A working container runtime (Docker, podman)\n+* The code of the application developed in the link:getting-started[Getting Started Guide].\n+\n+Skip to the <<#container-runtime,this section>> to continue with the guide for Mandrel,", "originalCommit": "c2e138a315896d5afd79ee96c9db44fd06f89a48", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjUwNTI2Ng==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466505266", "bodyText": "It's fine as is, the text on the right is what is shown.", "author": "galderz", "createdAt": "2020-08-06T15:40:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ2NDkzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjUwOTQ2MA==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466509460", "bodyText": "Exactly, so the end result will be Skip to the this section to... while I think it should be Skip to this section to...", "author": "zakkak", "createdAt": "2020-08-06T15:46:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ2NDkzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjUxNjg0Ng==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466516846", "bodyText": "Ah yes, you're suggesting removing the. Thought you meant the opposite :)", "author": "galderz", "createdAt": "2020-08-06T15:57:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQ2NDkzOA=="}], "type": "inlineReview"}, {"oid": "f20a7d3b45893148a9d298871f8f6541d18e4de1", "url": "https://github.com/quarkusio/quarkus/commit/f20a7d3b45893148a9d298871f8f6541d18e4de1", "message": "Documentation for building native executables with Mandrel #11032", "committedDate": "2020-08-06T15:57:04Z", "type": "forcePushed"}, {"oid": "6521624a1b41a2e2bf5c89c562ab85e4a9f833f3", "url": "https://github.com/quarkusio/quarkus/commit/6521624a1b41a2e2bf5c89c562ab85e4a9f833f3", "message": "Documentation for building native executables with Mandrel #11032", "committedDate": "2020-08-06T15:58:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyMzAxNA==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466923014", "bodyText": "Is this intentional? Wouldn't this expression, ${mandrel.version-for-documentation}-java11, evaluate to 20.1.0.1.Alpha2-java11-java11?", "author": "jerboaa", "createdAt": "2020-08-07T09:16:27Z", "path": "docs/pom.xml", "diffHunk": "@@ -108,6 +108,8 @@\n                         <surefire-version>${version.surefire.plugin}</surefire-version>\n                         <graalvm-version>${graal-sdk.version-for-documentation}</graalvm-version>\n                         <graalvm-flavor>${graal-sdk.version-for-documentation}-java11</graalvm-flavor>\n+                        <mandrel-version>${mandrel.version-for-documentation}</mandrel-version>\n+                        <mandrel-flavor>${mandrel.version-for-documentation}-java11</mandrel-flavor>", "originalCommit": "6521624a1b41a2e2bf5c89c562ab85e4a9f833f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njk4NTgzMA==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466985830", "bodyText": "Yeah, nicely caught!", "author": "galderz", "createdAt": "2020-08-07T11:37:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyMzAxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njk4ODg0MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466988841", "bodyText": "Pushed update with fix.", "author": "galderz", "createdAt": "2020-08-07T11:45:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyMzAxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyNDYxNg==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466924616", "bodyText": "Suggestion: \".... omitted because upstream OpenJDK does not manage them and, thus, cannot vouch for them.\" It's not only Red Hat who's working on 11u OpenJDK upstream.", "author": "jerboaa", "createdAt": "2020-08-07T09:19:42Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -14,7 +14,61 @@ This guide covers:\n \n This guide takes as input the application developed in the link:getting-started[Getting Started Guide].\n \n-== Prerequisites\n+== GraalVM\n+\n+Building a native executable requires using a distribution of GraalVM.\n+There are three distributions:\n+Oracle GraalVM Community Edition (CE), Oracle GraalVM Enterprise Edition (EE) and Mandrel.\n+The differences between the Oracle and Mandrel distributions are as follows:\n+\n+* Mandrel is a downstream distribution of the Oracle GraalVM CE.\n+Mandrel's main goal is to provide a way to build native executables specifically designed to support Quarkus.\n+\n+* Mandrel releases are built from a code base derived from the upstream Oracle GraalVM CE code base,\n+with only minor changes but some significant exclusions that are not necessary for Quarkus native apps.\n+They support the same capabilities to build native executables as Oracle GraalVM CE,\n+with no significant changes to functionality.\n+Notably, they do not include support for polyglot programming.\n+The reason for these exclusions is to provide a better level of support for the majority of Quarkus users.\n+These exclusions also mean Mandrel offers a considerable reduction in its distribution size\n+when compared with Oracle GraalVM CE/EE.\n+\n+* Mandrel is built slightly differently to Oracle GraalVM CE, using the standard OpenJDK project.\n+This means that it does not profit from a few small enhancements that Oracle have added to the version of OpenJDK used to build their own GraalVM downloads.\n+This enhancements are omitted because the Red Hat OpenJDK team does not manage them, and cannot vouch for.", "originalCommit": "6521624a1b41a2e2bf5c89c562ab85e4a9f833f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njk4ODg2MA==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466988860", "bodyText": "Pushed update with fix.", "author": "galderz", "createdAt": "2020-08-07T11:45:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyNDYxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyNzUxMg==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466927512", "bodyText": "This seems misleading. The Mandrel release comes with OpenJDK 11 bundled. So it doesn't need OpenJDK 11 just Mandrel, unless somebody wants to build it from source, which I don't think this guide is about. Am I missing something?", "author": "jerboaa", "createdAt": "2020-08-07T09:25:10Z", "path": "docs/src/main/asciidoc/building-native-image.adoc", "diffHunk": "@@ -14,7 +14,61 @@ This guide covers:\n \n This guide takes as input the application developed in the link:getting-started[Getting Started Guide].\n \n-== Prerequisites\n+== GraalVM\n+\n+Building a native executable requires using a distribution of GraalVM.\n+There are three distributions:\n+Oracle GraalVM Community Edition (CE), Oracle GraalVM Enterprise Edition (EE) and Mandrel.\n+The differences between the Oracle and Mandrel distributions are as follows:\n+\n+* Mandrel is a downstream distribution of the Oracle GraalVM CE.\n+Mandrel's main goal is to provide a way to build native executables specifically designed to support Quarkus.\n+\n+* Mandrel releases are built from a code base derived from the upstream Oracle GraalVM CE code base,\n+with only minor changes but some significant exclusions that are not necessary for Quarkus native apps.\n+They support the same capabilities to build native executables as Oracle GraalVM CE,\n+with no significant changes to functionality.\n+Notably, they do not include support for polyglot programming.\n+The reason for these exclusions is to provide a better level of support for the majority of Quarkus users.\n+These exclusions also mean Mandrel offers a considerable reduction in its distribution size\n+when compared with Oracle GraalVM CE/EE.\n+\n+* Mandrel is built slightly differently to Oracle GraalVM CE, using the standard OpenJDK project.\n+This means that it does not profit from a few small enhancements that Oracle have added to the version of OpenJDK used to build their own GraalVM downloads.\n+This enhancements are omitted because the Red Hat OpenJDK team does not manage them, and cannot vouch for.\n+This is particularly important when it comes to comformance and security.\n+\n+* Mandrel is only available for projects that can be compiled with Java 11.\n+If you are using Java 8,\n+you should consider using Oracle GraalVM instead.\n+The reason for not using Java 8 is because it's a legacy release,\n+which most Quarkus users are unlikely to need.\n+\n+* Mandrel is currently only recommended for building native executables that target Linux containerized environments.\n+This means that Mandrel users should use containers to build their native executables.\n+If you are building native executables for macOS or Windows target platforms,\n+you should consider using Oracle GraalVM instead,\n+because Mandrel does not currently target these platforms.\n+Building native executables directly on bare metal Linux is possible,\n+with details available in the https://github.com/graalvm/mandrel/blob/master/README-Mandrel.md[Mandrel README]\n+and https://github.com/graalvm/mandrel/releases[Mandrel releases].\n+\n+The prerequisites vary slightly depending on whether you are using Oracle GraalVM CE/EE or Mandrel.\n+\n+== Prerequisites for Mandrel\n+\n+To complete this guide using Mandrel, you need:\n+\n+* less than 15 minutes\n+* an IDE\n+* JDK 11 installed with `JAVA_HOME` configured appropriately", "originalCommit": "6521624a1b41a2e2bf5c89c562ab85e4a9f833f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyODIyMA==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466928220", "bodyText": "I wonder if this should be JAVA_HOME or GRAAL_VM_HOME. I'm thinking the latter pointing to the mandrel install, no?", "author": "jerboaa", "createdAt": "2020-08-07T09:26:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyNzUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njk0MTM2Nw==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466941367", "bodyText": "The guide is about using the builder image. So there is nothing to point GRAALVM_HOME to.", "author": "zakkak", "createdAt": "2020-08-07T09:53:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyNzUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njk0MTk3Ng==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466941976", "bodyText": "Or to put it more clearly, you won't have mandrel on your system to point JAVA_HOME to it. You will only have the ubi-quarkus-mandrel image for native compilation part.", "author": "zakkak", "createdAt": "2020-08-07T09:54:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyNzUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njk4NzMyNQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466987325", "bodyText": "Apparently it's not clear what this doc is referring to and what those reqs are for. Should we spell it out? I'm guessing the JDK 11 install is for compiling the quarkus app?", "author": "jerboaa", "createdAt": "2020-08-07T11:41:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyNzUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njk4NzQ1MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466987451", "bodyText": "Not sure there's much we can do here. The sources get compiled by the java version outside the container. If you're on Windows/macOS you can set a JAVA_HOME to Mandrel cos there's no distribution for that. On linux you could download Mandrel and set Java home to that (in the absence of fedora RPMs...etc), but that's as far as you can say. So, with all these caveats I'd probably leave it as is for now.", "author": "galderz", "createdAt": "2020-08-07T11:41:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyNzUxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjUxNzg2MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466517861", "bodyText": "Shouldn't this be:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <mandrel.version-for-documentation>20.1.0.1.Alpha2-java11</mandrel.version-for-documentation>\n          \n          \n            \n                    <mandrel.version-for-documentation>20.1.0.1.Alpha2</mandrel.version-for-documentation>\n          \n      \n    \n    \n  \n\n?", "author": "zakkak", "createdAt": "2020-08-06T15:59:22Z", "path": "build-parent/pom.xml", "diffHunk": "@@ -34,6 +34,7 @@\n         <!-- The Graal version we suggest using in documentation - as that's\n            what we work with by self downloading it: -->\n         <graal-sdk.version-for-documentation>20.1.0</graal-sdk.version-for-documentation>\n+        <mandrel.version-for-documentation>20.1.0.1.Alpha2-java11</mandrel.version-for-documentation>", "originalCommit": "6521624a1b41a2e2bf5c89c562ab85e4a9f833f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njk0MjY5Mw==", "url": "https://github.com/quarkusio/quarkus/pull/11061#discussion_r466942693", "bodyText": "Just noticed that @jerboaa already commented on this :) #11061 (comment)", "author": "zakkak", "createdAt": "2020-08-07T09:56:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjUxNzg2MQ=="}], "type": "inlineReview"}, {"oid": "05d43a1f97088c6fdc3cae10c9e2cdbc5d87d705", "url": "https://github.com/quarkusio/quarkus/commit/05d43a1f97088c6fdc3cae10c9e2cdbc5d87d705", "message": "Documentation for building native executables with Mandrel #11032", "committedDate": "2020-08-07T11:42:21Z", "type": "forcePushed"}, {"oid": "15efb62f27aedb2f3ebf8eb74752081bb66d83cc", "url": "https://github.com/quarkusio/quarkus/commit/15efb62f27aedb2f3ebf8eb74752081bb66d83cc", "message": "Documentation for building native executables with Mandrel #11032", "committedDate": "2020-08-07T11:44:37Z", "type": "forcePushed"}, {"oid": "62e3da516a40412d4d92cc70f2d5944f4c6b40f8", "url": "https://github.com/quarkusio/quarkus/commit/62e3da516a40412d4d92cc70f2d5944f4c6b40f8", "message": "Documentation for native executable debugging #11032", "committedDate": "2020-08-17T10:03:15Z", "type": "forcePushed"}, {"oid": "6a7325c00f87ef7dfb251d98efc86e08e17d5d85", "url": "https://github.com/quarkusio/quarkus/commit/6a7325c00f87ef7dfb251d98efc86e08e17d5d85", "message": "Documentation for building native executables with Mandrel #11032", "committedDate": "2020-08-18T13:22:17Z", "type": "commit"}, {"oid": "343daa80e49ab38a1b30b7ad103b4f391bc5db70", "url": "https://github.com/quarkusio/quarkus/commit/343daa80e49ab38a1b30b7ad103b4f391bc5db70", "message": "Documentation for native executable debugging #11032", "committedDate": "2020-08-18T13:22:25Z", "type": "commit"}, {"oid": "343daa80e49ab38a1b30b7ad103b4f391bc5db70", "url": "https://github.com/quarkusio/quarkus/commit/343daa80e49ab38a1b30b7ad103b4f391bc5db70", "message": "Documentation for native executable debugging #11032", "committedDate": "2020-08-18T13:22:25Z", "type": "forcePushed"}]}