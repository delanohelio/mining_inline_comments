{"pr_number": 13743, "pr_title": "MongoDB Panache:  Update field access with appropriate get/set methods", "pr_createdAt": "2020-12-07T20:39:19Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13743", "timeline": [{"oid": "4c4306adb0a9db128d5a9f40ec3321efd3ebe3e7", "url": "https://github.com/quarkusio/quarkus/commit/4c4306adb0a9db128d5a9f40ec3321efd3ebe3e7", "message": "process classes so field access can be replaced", "committedDate": "2020-12-07T23:26:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0NzcwNw==", "url": "https://github.com/quarkusio/quarkus/pull/13743#discussion_r538147707", "bodyText": "I don't understand how this tests for using the getters?\nIn ORM+Panache we have a lots of tests for that, which involve calling real getters and making sure they were called. Why don't you copy that?", "author": "FroMage", "createdAt": "2020-12-08T08:50:04Z", "path": "integration-tests/hibernate-orm-panache/src/main/java/io/quarkus/it/panache/resources/BookResource.java", "diffHunk": "@@ -19,6 +22,11 @@\n     @Path(\"/{name}/{author}\")\n     public List<Book> addAndListAll(@PathParam(\"name\") String name, @PathParam(\"author\") String author) {\n         bookDao.persist(new Book(name, author));\n-        return bookDao.listAll();\n+        List<Book> books = bookDao.listAll();\n+        // This is done to invoke the hopefully replaced field access with the getter access\n+        books.forEach(book -> {\n+            book.name.hashCode();", "originalCommit": "4c4306adb0a9db128d5a9f40ec3321efd3ebe3e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM5MTUyMw==", "url": "https://github.com/quarkusio/quarkus/pull/13743#discussion_r538391523", "bodyText": "because this call (getField) replaced by invokeVirtual which is a public method where the field is private and so avoids the IllegalAccessException.", "author": "evanchooly", "createdAt": "2020-12-08T13:50:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0NzcwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ5OTQ4Mw==", "url": "https://github.com/quarkusio/quarkus/pull/13743#discussion_r538499483", "bodyText": "I'm sorry this doesn't parse.", "author": "FroMage", "createdAt": "2020-12-08T15:29:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0NzcwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODUwMzA2Mw==", "url": "https://github.com/quarkusio/quarkus/pull/13743#discussion_r538503063", "bodyText": "No worries.  I found the accessor tests on the hibernate side and I'm recreating them for mongodb.  this will all go away then.", "author": "evanchooly", "createdAt": "2020-12-08T15:32:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0NzcwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0ODA3OA==", "url": "https://github.com/quarkusio/quarkus/pull/13743#discussion_r538148078", "bodyText": "I don't understand how come we're getting formatting here, isn't that auto-formatted?", "author": "FroMage", "createdAt": "2020-12-08T08:50:37Z", "path": "extensions/panache/mongodb-panache-common/deployment/src/main/java/io/quarkus/mongodb/panache/deployment/BasePanacheMongoResourceProcessor.java", "diffHunk": "@@ -87,7 +94,8 @@ public void buildReactive(CombinedIndexBuildItem index,\n         List<PanacheMethodCustomizer> methodCustomizers = methodCustomizersBuildItems.stream()\n                 .map(bi -> bi.getMethodCustomizer()).collect(Collectors.toList());\n \n-        processTypes(index, transformers, reflectiveClass, propertyMappingClass, getReactiveTypeBundle(),\n+        processTypes(index, transformers, reflectiveClass, propertyMappingClass,", "originalCommit": "4c4306adb0a9db128d5a9f40ec3321efd3ebe3e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODM5OTQ4MQ==", "url": "https://github.com/quarkusio/quarkus/pull/13743#discussion_r538399481", "bodyText": "it is.  there used to be an extra parameter there before I realized it wasn't necessary which probably cause the wrap there.", "author": "evanchooly", "createdAt": "2020-12-08T13:56:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0ODA3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ5NzczMg==", "url": "https://github.com/quarkusio/quarkus/pull/13743#discussion_r538497732", "bodyText": "It's still weird, I thought formatting was deterministic. But whatever.", "author": "FroMage", "createdAt": "2020-12-08T15:27:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0ODA3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODUwNDIwNw==", "url": "https://github.com/quarkusio/quarkus/pull/13743#discussion_r538504207", "bodyText": "I had edited the source and added a parameter causing the new wrap.  then removed it when it turned up unnecessary (the mongodb case is simpler than hibernate's).  But i'll clean that up so the diff is smaller.", "author": "evanchooly", "createdAt": "2020-12-08T15:33:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODE0ODA3OA=="}], "type": "inlineReview"}, {"oid": "68759c9f6e4596c8a826bd3f1f28b2b806860473", "url": "https://github.com/quarkusio/quarkus/commit/68759c9f6e4596c8a826bd3f1f28b2b806860473", "message": "process classes so field access can be replaced", "committedDate": "2020-12-08T16:40:55Z", "type": "commit"}, {"oid": "68759c9f6e4596c8a826bd3f1f28b2b806860473", "url": "https://github.com/quarkusio/quarkus/commit/68759c9f6e4596c8a826bd3f1f28b2b806860473", "message": "process classes so field access can be replaced", "committedDate": "2020-12-08T16:40:55Z", "type": "forcePushed"}]}