{"pr_number": 11073, "pr_title": "Add a Micrometer extension", "pr_createdAt": "2020-07-30T01:16:00Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11073", "timeline": [{"oid": "62e5ac0badbcccaeb8f167daa39a150436337a60", "url": "https://github.com/quarkusio/quarkus/commit/62e5ac0badbcccaeb8f167daa39a150436337a60", "message": "hibernate-orm + micrometer", "committedDate": "2020-07-30T14:31:38Z", "type": "forcePushed"}, {"oid": "84d899a730e991a7c765264184c880fa7d453ea0", "url": "https://github.com/quarkusio/quarkus/commit/84d899a730e991a7c765264184c880fa7d453ea0", "message": "jaeger + micrometer", "committedDate": "2020-07-30T20:01:33Z", "type": "forcePushed"}, {"oid": "828acbd0b07b6da28dbdd648354a302c3b1c4b60", "url": "https://github.com/quarkusio/quarkus/commit/828acbd0b07b6da28dbdd648354a302c3b1c4b60", "message": "mongodb + micrometer", "committedDate": "2020-07-31T02:57:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MDk5NA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463640994", "bodyText": "Are there other exporters that we want to support in the future that have endpoints as well, or is it just Prometheus?", "author": "kenfinnigan", "createdAt": "2020-07-31T14:22:38Z", "path": "extensions/micrometer/deployment/src/main/java/io/quarkus/micrometer/deployment/MicrometerProcessor.java", "diffHunk": "@@ -0,0 +1,195 @@\n+package io.quarkus.micrometer.deployment;\n+\n+import java.util.Collection;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Set;\n+import java.util.function.BooleanSupplier;\n+\n+import org.jboss.jandex.AnnotationInstance;\n+import org.jboss.jandex.AnnotationTarget;\n+import org.jboss.jandex.ClassInfo;\n+import org.jboss.jandex.DotName;\n+import org.jboss.jandex.FieldInfo;\n+import org.jboss.jandex.IndexView;\n+import org.jboss.jandex.MethodInfo;\n+\n+import io.micrometer.core.instrument.MeterRegistry;\n+import io.micrometer.core.instrument.binder.MeterBinder;\n+import io.micrometer.core.instrument.config.MeterFilter;\n+import io.micrometer.core.instrument.config.NamingConvention;\n+import io.quarkus.arc.deployment.AdditionalBeanBuildItem;\n+import io.quarkus.arc.deployment.BeanContainerBuildItem;\n+import io.quarkus.arc.deployment.UnremovableBeanBuildItem;\n+import io.quarkus.arc.processor.DotNames;\n+import io.quarkus.deployment.annotations.*;\n+import io.quarkus.deployment.builditem.CombinedIndexBuildItem;\n+import io.quarkus.deployment.builditem.FeatureBuildItem;\n+import io.quarkus.deployment.builditem.ShutdownContextBuildItem;\n+import io.quarkus.deployment.metrics.MetricsCapabilityBuildItem;\n+import io.quarkus.deployment.metrics.MetricsFactoryConsumerBuildItem;\n+import io.quarkus.micrometer.deployment.export.PrometheusRegistryProcessor;\n+import io.quarkus.micrometer.runtime.ClockProvider;\n+import io.quarkus.micrometer.runtime.CompositeRegistryCreator;\n+import io.quarkus.micrometer.runtime.MeterFilterConstraint;\n+import io.quarkus.micrometer.runtime.MeterFilterConstraints;\n+import io.quarkus.micrometer.runtime.MicrometerRecorder;\n+import io.quarkus.micrometer.runtime.config.MicrometerConfig;\n+import io.quarkus.runtime.RuntimeValue;\n+import io.quarkus.runtime.metrics.MetricsFactory;\n+\n+public class MicrometerProcessor {\n+    private static final DotName METER_REGISTRY = DotName.createSimple(MeterRegistry.class.getName());\n+    private static final DotName METER_BINDER = DotName.createSimple(MeterBinder.class.getName());\n+    private static final DotName METER_FILTER = DotName.createSimple(MeterFilter.class.getName());\n+    private static final DotName NAMING_CONVENTION = DotName.createSimple(NamingConvention.class.getName());\n+\n+    private static final String FEATURE = \"micrometer\";\n+\n+    static class MicrometerEnabled implements BooleanSupplier {\n+        MicrometerConfig mConfig;\n+\n+        public boolean getAsBoolean() {\n+            return mConfig.enabled;\n+        }\n+    }\n+\n+    MicrometerConfig mConfig;\n+\n+    @BuildStep(onlyIf = MicrometerEnabled.class)\n+    FeatureBuildItem feature() {\n+        return new FeatureBuildItem(FEATURE);\n+    }\n+\n+    @BuildStep(onlyIf = MicrometerEnabled.class, onlyIfNot = PrometheusRegistryProcessor.PrometheusEnabled.class)\n+    MetricsCapabilityBuildItem metricsCapabilityBuildItem() {\n+        return new MetricsCapabilityBuildItem(x -> MetricsFactory.MICROMETER.equals(x),\n+                null);", "originalCommit": "828acbd0b07b6da28dbdd648354a302c3b1c4b60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzczMTU5OA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463731598", "bodyText": "I think the k8s stuff can only look for one scrape path... I left room here should a different registry extension provide one, but I think only prometheus will.", "author": "ebullient", "createdAt": "2020-07-31T17:15:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MDk5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4MjgyNw==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463682827", "bodyText": "Is micrometer-core needed as a dependency if the micrometer extension is present?", "author": "kenfinnigan", "createdAt": "2020-07-31T15:36:09Z", "path": "integration-tests/micrometer-jmx/pom.xml", "diffHunk": "@@ -0,0 +1,144 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>io.quarkus</groupId>\n+    <artifactId>quarkus-integration-tests-parent</artifactId>\n+    <version>999-SNAPSHOT</version>\n+    <relativePath>../</relativePath>\n+  </parent>\n+\n+  <artifactId>quarkus-integration-test-micrometer-jmx</artifactId>\n+  <name>Quarkus - Integration Tests - Micrometer JMX</name>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-micrometer</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n+    <dependency>", "originalCommit": "828acbd0b07b6da28dbdd648354a302c3b1c4b60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzczMDYwNg==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463730606", "bodyText": "I removed this yesterday. ;)", "author": "ebullient", "createdAt": "2020-07-31T17:13:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4MjgyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4MzQxOA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463683418", "bodyText": "We need to explicitly disable the prometheus export when the dependency isn't present?", "author": "kenfinnigan", "createdAt": "2020-07-31T15:37:18Z", "path": "integration-tests/micrometer-jmx/src/main/resources/application.properties", "diffHunk": "@@ -0,0 +1,11 @@\n+\n+quarkus.log.category.\"io.quarkus.micrometer\".level=DEBUG\n+quarkus.log.category.\"io.quarkus.bootstrap\".level=INFO\n+quarkus.log.category.\"io.quarkus.netty\".level=INFO\n+quarkus.log.category.\"io.quarkus.resteasy.runtime\".level=INFO\n+\n+quarkus.log.category.\"io.netty\".level=INFO\n+quarkus.log.category.\"org.apache\".level=INFO\n+\n+quarkus.micrometer.export.prometheus.enabled=false", "originalCommit": "828acbd0b07b6da28dbdd648354a302c3b1c4b60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzczMTE2NA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463731164", "bodyText": "We shouldn't. I may have just to be sure.. this might also be left over from how things were structured in my other project. Good observation.", "author": "ebullient", "createdAt": "2020-07-31T17:14:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4MzQxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1NjczMg==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463756732", "bodyText": "fixed.", "author": "ebullient", "createdAt": "2020-07-31T18:08:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4MzQxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4Mzc2Nw==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463683767", "bodyText": "Again, is micrometer-core needed?", "author": "kenfinnigan", "createdAt": "2020-07-31T15:37:57Z", "path": "integration-tests/micrometer-mp-metrics/pom.xml", "diffHunk": "@@ -0,0 +1,149 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>io.quarkus</groupId>\n+    <artifactId>quarkus-integration-tests-parent</artifactId>\n+    <version>999-SNAPSHOT</version>\n+    <relativePath>../</relativePath>\n+  </parent>\n+\n+  <artifactId>quarkus-integration-test-micrometer-mp-metrics</artifactId>\n+  <name>Quarkus - Integration Tests - Micrometer MP Metrics</name>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-micrometer</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n+    <dependency>", "originalCommit": "828acbd0b07b6da28dbdd648354a302c3b1c4b60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4NDQxMA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463684410", "bodyText": "Can the presence of the API be enough to enable it, or we need to be specific?", "author": "kenfinnigan", "createdAt": "2020-07-31T15:39:06Z", "path": "integration-tests/micrometer-mp-metrics/src/main/resources/application.properties", "diffHunk": "@@ -0,0 +1,13 @@\n+quarkus.log.category.\"io.quarkus.micrometer\".level=DEBUG\n+quarkus.log.category.\"io.quarkus.micrometer.runtime.binder.vertx\".level=INFO\n+\n+quarkus.log.category.\"io.quarkus.bootstrap\".level=INFO\n+quarkus.log.category.\"io.quarkus.netty\".level=INFO\n+quarkus.log.category.\"io.quarkus.resteasy\".level=INFO\n+\n+quarkus.log.category.\"io.netty\".level=INFO\n+quarkus.log.category.\"io.restassured\".level=INFO\n+quarkus.log.category.\"org.apache\".level=INFO\n+quarkus.log.category.\"org.jboss.resteasy\".level=INFO\n+\n+quarkus.micrometer.binder.mp-metrics.enabled=true", "originalCommit": "828acbd0b07b6da28dbdd648354a302c3b1c4b60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1NzEyMA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463757120", "bodyText": "This one needs to be specific because (for the foreseeable future), the smallrye API will be around. I could leave it as default on if the classes are found and just .. let that be a coping mechanism...", "author": "ebullient", "createdAt": "2020-07-31T18:09:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4NDQxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU2MTQwMQ==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r469561401", "bodyText": "I've adjusted this extension so that MP Metrics compat layer is on if MP Metrics API is present.", "author": "ebullient", "createdAt": "2020-08-12T21:37:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4NDQxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4NjM3Mg==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463686372", "bodyText": "Can't remember if we'd discussed or not, did you want to include a guide with this PR?", "author": "kenfinnigan", "createdAt": "2020-07-31T15:42:42Z", "path": "extensions/micrometer/runtime/src/main/resources/META-INF/quarkus-extension.yaml", "diffHunk": "@@ -0,0 +1,11 @@\n+name: \"Micrometer - SLF4J for metrics\"\n+metadata:\n+  keywords:\n+  - \"micrometer\"\n+  - \"metrics\"\n+  - \"metric\"\n+  - \"prometheus\"\n+  guide: \"https://github.com/ebullient/quarkus-micrometer-extension\"", "originalCommit": "828acbd0b07b6da28dbdd648354a302c3b1c4b60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzczMDg2Nw==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r463730867", "bodyText": "Yes. I can and should.", "author": "ebullient", "createdAt": "2020-07-31T17:13:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4NjM3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTU2MTYzMw==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r469561633", "bodyText": "Latest commit has the beginnings of a guide. We should talk about what else should be in there..", "author": "ebullient", "createdAt": "2020-08-12T21:38:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4NjM3Mg=="}], "type": "inlineReview"}, {"oid": "cf0efcbde6b454bba3147400deb855506ecc76e1", "url": "https://github.com/quarkusio/quarkus/commit/cf0efcbde6b454bba3147400deb855506ecc76e1", "message": "mongodb + micrometer", "committedDate": "2020-07-31T18:08:08Z", "type": "forcePushed"}, {"oid": "89ba87f92570caab14abb10e6f8756ded3a06e43", "url": "https://github.com/quarkusio/quarkus/commit/89ba87f92570caab14abb10e6f8756ded3a06e43", "message": "mongodb + micrometer", "committedDate": "2020-07-31T21:13:29Z", "type": "forcePushed"}, {"oid": "50d1b2ebe1a449ac36f210bffb0cbfdebe81afd6", "url": "https://github.com/quarkusio/quarkus/commit/50d1b2ebe1a449ac36f210bffb0cbfdebe81afd6", "message": "mongodb + micrometer", "committedDate": "2020-08-03T13:29:19Z", "type": "forcePushed"}, {"oid": "2d461f3d25dcbbf2d80650c48a964c6f49985072", "url": "https://github.com/quarkusio/quarkus/commit/2d461f3d25dcbbf2d80650c48a964c6f49985072", "message": "mongodb + micrometer", "committedDate": "2020-08-03T18:29:01Z", "type": "forcePushed"}, {"oid": "501963997b905af0d935d364a493626d4e0ad352", "url": "https://github.com/quarkusio/quarkus/commit/501963997b905af0d935d364a493626d4e0ad352", "message": "mongodb + micrometer", "committedDate": "2020-08-04T18:27:30Z", "type": "forcePushed"}, {"oid": "57ff78cb1fb6949d4de779039ddb34917c65f629", "url": "https://github.com/quarkusio/quarkus/commit/57ff78cb1fb6949d4de779039ddb34917c65f629", "message": "mongodb + micrometer", "committedDate": "2020-08-12T18:41:47Z", "type": "forcePushed"}, {"oid": "38390e7ed3a634f48b982f28e42076dfb24f811f", "url": "https://github.com/quarkusio/quarkus/commit/38390e7ed3a634f48b982f28e42076dfb24f811f", "message": "Micrometer guide", "committedDate": "2020-08-13T02:26:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzk0NjYwMg==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r473946602", "bodyText": "Does this add the prometheus registry dependency automatically? I thought it would just be the micrometer extension only and the prometheus registry needs to be manually added?", "author": "kenfinnigan", "createdAt": "2020-08-20T12:54:06Z", "path": "docs/src/main/asciidoc/micrometer-metrics.adoc", "diffHunk": "@@ -0,0 +1,283 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Micrometer Metrics\n+\n+include::./attributes.adoc[]\n+\n+This guide demonstrates how your Quarkus application can utilize the Micrometer\n+metrics library for runtime and application metrics.\n+\n+\n+== Prerequisites\n+\n+To complete this guide, you need:\n+\n+* less than 15 minutes\n+* an IDE\n+* JDK 1.8+ installed with `JAVA_HOME` configured appropriately\n+* Apache Maven {maven-version}\n+\n+== Architecture\n+\n+In this example, we build a very simple microservice which offers one REST endpoint and that determines\n+if a number is prime.\n+\n+== Solution\n+\n+We recommend that you follow the instructions in the next sections and create the application step by step.\n+However, you can go right to the completed example.\n+\n+Clone the Git repository: `git clone {quickstarts-clone-url}`, or download an {quickstarts-archive-url}[archive].\n+\n+The solution is located in the `micrometer-quickstart` {quickstarts-tree-url}/micrometer-quickstart[directory].\n+\n+== Creating the Maven Project\n+\n+First, we need a new project. Create a new project with the following command:\n+\n+[source, subs=attributes+]\n+----\n+mvn io.quarkus:quarkus-maven-plugin:{quarkus-version}:create \\\n+    -DprojectGroupId=org.acme \\\n+    -DprojectArtifactId=micrometer-quickstart \\\n+    -Dextensions=\"micrometer\"\n+cd micrometer-quickstart\n+----\n+\n+This command generates a Maven project, that imports the `micrometer` extension and the micrometer\n+prometheus registry as dependencies.", "originalCommit": "38390e7ed3a634f48b982f28e42076dfb24f811f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE2MDQ4NQ==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r480160485", "bodyText": "Not sure if you sure this comment @ebullient?", "author": "kenfinnigan", "createdAt": "2020-08-31T14:15:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzk0NjYwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDYyMTkzOA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r474621938", "bodyText": "We don't want license headers (I don't know if there are other places but please remove them all from your PR).", "author": "gsmet", "createdAt": "2020-08-21T10:47:45Z", "path": "extensions/micrometer/runtime/pom.xml", "diffHunk": "@@ -0,0 +1,135 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  Copyright 2020 the original author or authors.\n+\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->", "originalCommit": "38390e7ed3a634f48b982f28e42076dfb24f811f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDYyMjM1OA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r474622358", "bodyText": "This POM requires a description as it's what's used in code.quarkus.io.\nThe one for SmallRye Metrics is Expose metrics for your services. Something along these lines starting with a verb would be nice.", "author": "gsmet", "createdAt": "2020-08-21T10:48:45Z", "path": "extensions/micrometer/runtime/pom.xml", "diffHunk": "@@ -0,0 +1,135 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  Copyright 2020 the original author or authors.\n+\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>io.quarkus</groupId>\n+    <artifactId>quarkus-micrometer-parent</artifactId>\n+    <version>999-SNAPSHOT</version>\n+    <relativePath>../</relativePath>\n+  </parent>\n+\n+  <artifactId>quarkus-micrometer</artifactId>\n+  <name>Quarkus - Micrometer - Runtime</name>", "originalCommit": "38390e7ed3a634f48b982f28e42076dfb24f811f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDYyMjYzMQ==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r474622631", "bodyText": "Please format your pom files with 4 spaces. It's not entirely consistent in the codebase but that's the convention we use.", "author": "gsmet", "createdAt": "2020-08-21T10:49:24Z", "path": "extensions/micrometer/runtime/pom.xml", "diffHunk": "@@ -0,0 +1,135 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  Copyright 2020 the original author or authors.\n+\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"", "originalCommit": "38390e7ed3a634f48b982f28e42076dfb24f811f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDYyMjg2Nw==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r474622867", "bodyText": "The indentation here is completely off but it should be fixed if you reformat things properly with 4 spaces.", "author": "gsmet", "createdAt": "2020-08-21T10:49:54Z", "path": "extensions/micrometer/runtime/pom.xml", "diffHunk": "@@ -0,0 +1,135 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  Copyright 2020 the original author or authors.\n+\n+  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  you may not use this file except in compliance with the License.\n+  You may obtain a copy of the License at\n+\n+    http://www.apache.org/licenses/LICENSE-2.0\n+\n+  Unless required by applicable law or agreed to in writing, software\n+  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  See the License for the specific language governing permissions and\n+  limitations under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>io.quarkus</groupId>\n+    <artifactId>quarkus-micrometer-parent</artifactId>\n+    <version>999-SNAPSHOT</version>\n+    <relativePath>../</relativePath>\n+  </parent>\n+\n+  <artifactId>quarkus-micrometer</artifactId>\n+  <name>Quarkus - Micrometer - Runtime</name>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-core</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-arc</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-vertx-http</artifactId>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>io.micrometer</groupId>\n+      <artifactId>micrometer-core</artifactId>\n+    </dependency>\n+\n+    <!-- Registry providers (optional) -->\n+\n+    <dependency>\n+      <groupId>io.micrometer</groupId>\n+      <artifactId>micrometer-registry-datadog</artifactId>\n+      <optional>true</optional>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.micrometer</groupId>\n+      <artifactId>micrometer-registry-jmx</artifactId>\n+      <optional>true</optional>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.micrometer</groupId>\n+      <artifactId>micrometer-registry-prometheus</artifactId>\n+      <optional>true</optional>\n+    </dependency>\n+    <dependency>\n+      <groupId>io.micrometer</groupId>\n+      <artifactId>micrometer-registry-stackdriver</artifactId>\n+      <optional>true</optional>\n+    </dependency>\n+\n+    <!-- Dependencies for Binding (optional) -->\n+\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-resteasy</artifactId>\n+      <optional>true</optional>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-hibernate-orm</artifactId>\n+      <optional>true</optional>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.eclipse.microprofile.metrics</groupId>\n+      <artifactId>microprofile-metrics-api</artifactId>\n+      <optional>true</optional>\n+    </dependency>\n+\n+    <!-- Test -->\n+\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-api</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.junit.jupiter</groupId>\n+      <artifactId>junit-jupiter-engine</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+\n+  </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>io.quarkus</groupId>\n+        <artifactId>quarkus-bootstrap-maven-plugin</artifactId>\n+      </plugin>\n+            <plugin>", "originalCommit": "38390e7ed3a634f48b982f28e42076dfb24f811f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDYyMzEyOQ==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r474623129", "bodyText": "SLF4J?", "author": "gsmet", "createdAt": "2020-08-21T10:50:25Z", "path": "extensions/micrometer/runtime/src/main/resources/META-INF/quarkus-extension.yaml", "diffHunk": "@@ -0,0 +1,11 @@\n+name: \"Micrometer - SLF4J for metrics\"", "originalCommit": "38390e7ed3a634f48b982f28e42076dfb24f811f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY5NTc5MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r478695791", "bodyText": "One of their phrases. It is like SLF4J (the logging API that adapts to other things), but for metrics.", "author": "ebullient", "createdAt": "2020-08-27T21:06:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDYyMzEyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODcxODkyNQ==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r478718925", "bodyText": "I think it's confusing and we should remove that. It's marketing stuff, it really has no value here.", "author": "gsmet", "createdAt": "2020-08-27T21:58:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDYyMzEyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg0NzAyNg==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r478847026", "bodyText": "I did.", "author": "ebullient", "createdAt": "2020-08-28T05:57:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDYyMzEyOQ=="}], "type": "inlineReview"}, {"oid": "c0e68107f20e9e1740c013d84d83ef36d09e5e19", "url": "https://github.com/quarkusio/quarkus/commit/c0e68107f20e9e1740c013d84d83ef36d09e5e19", "message": "Micrometer guide", "committedDate": "2020-08-28T04:31:50Z", "type": "forcePushed"}, {"oid": "9c870b3f0707e376d3e926e5feb0fd0fdddaa286", "url": "https://github.com/quarkusio/quarkus/commit/9c870b3f0707e376d3e926e5feb0fd0fdddaa286", "message": "Micrometer guide", "committedDate": "2020-08-28T06:20:41Z", "type": "forcePushed"}, {"oid": "27ff3c596fa71cb7cc0d256a320843b350358ccf", "url": "https://github.com/quarkusio/quarkus/commit/27ff3c596fa71cb7cc0d256a320843b350358ccf", "message": "Micrometer guide", "committedDate": "2020-08-28T11:57:04Z", "type": "forcePushed"}, {"oid": "3cd9b2b6fb296679827579a801979c2763c1a7b1", "url": "https://github.com/quarkusio/quarkus/commit/3cd9b2b6fb296679827579a801979c2763c1a7b1", "message": "native build", "committedDate": "2020-08-28T14:11:11Z", "type": "forcePushed"}, {"oid": "413852d1df3f3305f7611fa17d6265c1d5d19ebf", "url": "https://github.com/quarkusio/quarkus/commit/413852d1df3f3305f7611fa17d6265c1d5d19ebf", "message": "native build", "committedDate": "2020-08-28T15:23:57Z", "type": "forcePushed"}, {"oid": "867b25d37a2f1fbd50bdb53a31553a73c46f1d31", "url": "https://github.com/quarkusio/quarkus/commit/867b25d37a2f1fbd50bdb53a31553a73c46f1d31", "message": "native build", "committedDate": "2020-08-30T22:28:38Z", "type": "forcePushed"}, {"oid": "905d498cebf0403160955baa6ba685a595e96853", "url": "https://github.com/quarkusio/quarkus/commit/905d498cebf0403160955baa6ba685a595e96853", "message": "native build", "committedDate": "2020-08-31T01:15:56Z", "type": "forcePushed"}, {"oid": "c52bf48230ed768ed103b88b35ded0ba1eb19c93", "url": "https://github.com/quarkusio/quarkus/commit/c52bf48230ed768ed103b88b35ded0ba1eb19c93", "message": "native build", "committedDate": "2020-08-31T01:34:07Z", "type": "forcePushed"}, {"oid": "87a02d66f5bc553a560037e1c8c5bcb3a3343baa", "url": "https://github.com/quarkusio/quarkus/commit/87a02d66f5bc553a560037e1c8c5bcb3a3343baa", "message": "native build", "committedDate": "2020-08-31T01:38:03Z", "type": "forcePushed"}, {"oid": "170eef9bd26dfb3dd8ae4f78a29eb24b036c525c", "url": "https://github.com/quarkusio/quarkus/commit/170eef9bd26dfb3dd8ae4f78a29eb24b036c525c", "message": "native build", "committedDate": "2020-08-31T02:36:12Z", "type": "forcePushed"}, {"oid": "e0ed632b8c5364e9b0420fc59c95c9d304d1725f", "url": "https://github.com/quarkusio/quarkus/commit/e0ed632b8c5364e9b0420fc59c95c9d304d1725f", "message": "Micrometer guide", "committedDate": "2020-08-31T13:33:23Z", "type": "forcePushed"}, {"oid": "579aa76304e51b264e6cfd34681cec08f4238607", "url": "https://github.com/quarkusio/quarkus/commit/579aa76304e51b264e6cfd34681cec08f4238607", "message": "Micrometer extension\n\nEnable MP Metrics if API is present by default", "committedDate": "2020-08-31T15:46:38Z", "type": "commit"}, {"oid": "1d66915ca0546c3d5727e13f34db72fafc917ffd", "url": "https://github.com/quarkusio/quarkus/commit/1d66915ca0546c3d5727e13f34db72fafc917ffd", "message": "hibernate-orm + micrometer", "committedDate": "2020-08-31T15:46:38Z", "type": "commit"}, {"oid": "7b08f357e534cabdacd178ac5a4ac1ec91f55596", "url": "https://github.com/quarkusio/quarkus/commit/7b08f357e534cabdacd178ac5a4ac1ec91f55596", "message": "jaeger + micrometer", "committedDate": "2020-08-31T15:46:38Z", "type": "commit"}, {"oid": "3c8b3be56a61f48561ec42fac1bbf192d67337da", "url": "https://github.com/quarkusio/quarkus/commit/3c8b3be56a61f48561ec42fac1bbf192d67337da", "message": "mongodb + micrometer", "committedDate": "2020-08-31T15:46:38Z", "type": "commit"}, {"oid": "405a6f03ef3f0716706725e82e40dd61de6532a2", "url": "https://github.com/quarkusio/quarkus/commit/405a6f03ef3f0716706725e82e40dd61de6532a2", "message": "Micrometer guide", "committedDate": "2020-08-31T15:46:38Z", "type": "commit"}, {"oid": "405a6f03ef3f0716706725e82e40dd61de6532a2", "url": "https://github.com/quarkusio/quarkus/commit/405a6f03ef3f0716706725e82e40dd61de6532a2", "message": "Micrometer guide", "committedDate": "2020-08-31T15:46:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTAzOTI1NA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r481039254", "bodyText": "Do we have micrometer-jmx somewhere in the CI? Isn't it missing?", "author": "jmartisk", "createdAt": "2020-09-01T10:31:23Z", "path": ".github/workflows/ci-actions.yml", "diffHunk": "@@ -501,11 +501,13 @@ jobs:\n             test-modules: >\n               kubernetes-client\n           - category: Misc4\n-            timeout: 30\n+            timeout: 45\n             test-modules: >\n               smallrye-graphql\n               picocli-native\n               gradle\n+              micrometer-mp-metrics\n+              micrometer-prometheus", "originalCommit": "405a6f03ef3f0716706725e82e40dd61de6532a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA0MTQyNQ==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r481041425", "bodyText": "Does it have native tests? If not, there's no need.", "author": "gsmet", "createdAt": "2020-09-01T10:35:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTAzOTI1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA0OTA2MQ==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r481049061", "bodyText": "Oh. You're right.", "author": "jmartisk", "createdAt": "2020-09-01T10:50:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTAzOTI1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA1NTQ3MA==", "url": "https://github.com/quarkusio/quarkus/pull/11073#discussion_r481055470", "bodyText": "I didn't set up all of them. There is a native test for Micrometer + JMX, but I didn't want to extend the build time too much. If/when we have incremental builds, I would make a separate bucket for micrometer and go to town.", "author": "ebullient", "createdAt": "2020-09-01T11:03:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTAzOTI1NA=="}], "type": "inlineReview"}]}