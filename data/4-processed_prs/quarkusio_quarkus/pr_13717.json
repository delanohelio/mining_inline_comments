{"pr_number": 13717, "pr_title": "DevMojo invokes other goals only if those are actually configured", "pr_createdAt": "2020-12-04T22:35:06Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13717", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQyNDcxNg==", "url": "https://github.com/quarkusio/quarkus/pull/13717#discussion_r536424716", "bodyText": "Not ideal, but I did not find a better way to check whether the generate-code is actually invoked (without adding gRPC).\nI could also add the inverse case and check that the message is logged, but then again there are already so many test projects and DevMojoIT already takes > 10 mins. \ud83e\udd37\u200d\u2642\ufe0f", "author": "famod", "createdAt": "2020-12-04T22:36:56Z", "path": "integration-tests/maven/src/test/java/io/quarkus/maven/it/DevMojoIT.java", "diffHunk": "@@ -905,4 +904,16 @@ public void testThatDependencyInParentIsEvaluated() throws IOException, MavenInv\n         testDir = initProject(\"projects/multimodule-parent-dep\");\n         runAndCheck();\n     }\n+\n+    @Test\n+    public void testThatGenerateCodeGoalIsNotTriggeredIfNotConfigured() throws IOException, MavenInvocationException {\n+        testDir = initProject(\"projects/classic-no-generate\");\n+        // the skip parameter triggers a log statement by the generate goal,\n+        // otherwise there would be no way to tell from the logfile that the goal was invoked\n+        runAndCheck(false, \"-Dquarkus.generate-code.skip=true\");\n+\n+        assertThat(running.log()).doesNotContain(\"Skipping Quarkus code generation\");", "originalCommit": "3926790f039f420dfc9fcb94bedb38ed77f4868b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9aa58d43fdc3b569a59e5503206cd30b1431d43f", "url": "https://github.com/quarkusio/quarkus/commit/9aa58d43fdc3b569a59e5503206cd30b1431d43f", "message": "DevMojo invokes other goals only if those are actually configured\n\nIncludes a fix to DevMojoIT.testCommandMode* when ANSI escape sequences are logged.", "committedDate": "2020-12-04T22:51:48Z", "type": "commit"}, {"oid": "9aa58d43fdc3b569a59e5503206cd30b1431d43f", "url": "https://github.com/quarkusio/quarkus/commit/9aa58d43fdc3b569a59e5503206cd30b1431d43f", "message": "DevMojo invokes other goals only if those are actually configured\n\nIncludes a fix to DevMojoIT.testCommandMode* when ANSI escape sequences are logged.", "committedDate": "2020-12-04T22:51:48Z", "type": "forcePushed"}]}