{"pr_number": 13524, "pr_title": "Ensure that primitive types in @ConfigProperties work as expected", "pr_createdAt": "2020-11-27T15:56:03Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13524", "timeline": [{"oid": "12e8fcc9b4df3adb9aa7d08a285e415bdb5e064c", "url": "https://github.com/quarkusio/quarkus/commit/12e8fcc9b4df3adb9aa7d08a285e415bdb5e064c", "message": "Ensure that primitive values in @ConfigProperties work as expected\n\nFixes: #13523", "committedDate": "2020-11-27T15:54:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcwMDYzOA==", "url": "https://github.com/quarkusio/quarkus/pull/13524#discussion_r531700638", "bodyText": "Hmmm, and we are sure that nothing that ConfigPropertyBuildItemCandidate triggers will ever be needed by primitives?", "author": "gsmet", "createdAt": "2020-11-27T17:01:19Z", "path": "extensions/arc/deployment/src/main/java/io/quarkus/arc/deployment/configproperties/ClassConfigPropertiesUtil.java", "diffHunk": "@@ -420,8 +420,10 @@ private static void populateTypicalProperty(MethodCreator methodCreator, ResultH\n             createWriteValue(methodCreator, configObject, field, setter, useFieldAccess, setterValue);\n \n         }\n-        configPropertyBuildItemCandidates\n-                .add(new ConfigPropertyBuildItemCandidate(field.name(), fullConfigName, fieldType));\n+        if (field.type().kind() != Type.Kind.PRIMITIVE) { // the JVM assigns primitive types a default even though it doesn't show up in the bytecode\n+            configPropertyBuildItemCandidates\n+                    .add(new ConfigPropertyBuildItemCandidate(field.name(), fullConfigName, fieldType));", "originalCommit": "12e8fcc9b4df3adb9aa7d08a285e415bdb5e064c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcwMjI2Nw==", "url": "https://github.com/quarkusio/quarkus/pull/13524#discussion_r531702267", "bodyText": "Yup, that list is only used in turn to populate ConfigPropertyBuildItem (which are the user properties that are required when booting the application).\nThe getPropertyType field of ConfigPropertyBuildItem is only in order to register for reflection which if of course is not needed for primitives.\nSo there is absolutely no reason that these primites should ever end up in the candidates list.", "author": "geoand", "createdAt": "2020-11-27T17:05:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcwMDYzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcxMDkzNQ==", "url": "https://github.com/quarkusio/quarkus/pull/13524#discussion_r531710935", "bodyText": "OK, thanks for the quick turnaround.", "author": "gsmet", "createdAt": "2020-11-27T17:32:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcwMDYzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcxMTM3OQ==", "url": "https://github.com/quarkusio/quarkus/pull/13524#discussion_r531711379", "bodyText": "You are welcome!", "author": "geoand", "createdAt": "2020-11-27T17:34:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcwMDYzOA=="}], "type": "inlineReview"}]}