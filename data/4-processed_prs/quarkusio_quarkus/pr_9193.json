{"pr_number": 9193, "pr_title": "Allow the use of boolean, int and long in custom Spring Data JPA methods", "pr_createdAt": "2020-05-10T07:39:38Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/9193", "timeline": [{"oid": "fb92c400df559762e099e99536d8368b3fa79a7c", "url": "https://github.com/quarkusio/quarkus/commit/fb92c400df559762e099e99536d8368b3fa79a7c", "message": "Allow the use of boolean, int and long in custom Spring Data JPA methods\n\nFixes: #9192", "committedDate": "2020-05-10T07:36:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMzYwMA==", "url": "https://github.com/quarkusio/quarkus/pull/9193#discussion_r423013600", "bodyText": "Shouldn't we consider all the primitive types here while we are at it?", "author": "gsmet", "createdAt": "2020-05-11T12:47:15Z", "path": "extensions/spring-data-jpa/deployment/src/main/java/io/quarkus/spring/data/deployment/generate/AbstractMethodsAdder.java", "diffHunk": "@@ -203,10 +203,21 @@ protected void generateFindQueryResultHandling(MethodCreator methodCreator, Resu\n \n             methodCreator.returnValue(sliceResult);\n \n+        } else if (isIntLongOrBoolean(returnType)) {\n+            ResultHandle singleResult = methodCreator.invokeInterfaceMethod(\n+                    MethodDescriptor.ofMethod(PanacheQuery.class, \"singleResult\", Object.class),\n+                    panacheQuery);\n+            methodCreator.returnValue(singleResult);\n         } else {\n             throw new IllegalArgumentException(\n                     \"Return type of method \" + methodName + \" of Repository \" + repositoryClassInfo\n                             + \" does not match find query type\");\n         }\n     }\n+\n+    protected boolean isIntLongOrBoolean(DotName dotName) {\n+        return DotNames.BOOLEAN.equals(dotName) || DotNames.PRIMITIVE_BOOLEAN.equals(dotName)\n+                || DotNames.INTEGER.equals(dotName) || DotNames.PRIMITIVE_INTEGER.equals(dotName)\n+                || DotNames.LONG.equals(dotName) || DotNames.PRIMITIVE_LONG.equals(dotName);", "originalCommit": "fb92c400df559762e099e99536d8368b3fa79a7c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxNDM5MQ==", "url": "https://github.com/quarkusio/quarkus/pull/9193#discussion_r423014391", "bodyText": "We potentially could, but I don't know if they are all support by Spring Data anyway. These are the ones that show up often.", "author": "geoand", "createdAt": "2020-05-11T12:48:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzAxMzYwMA=="}], "type": "inlineReview"}]}