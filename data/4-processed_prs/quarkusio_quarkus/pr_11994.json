{"pr_number": 11994, "pr_title": "Prevent potential infinite loop", "pr_createdAt": "2020-09-08T22:58:45Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11994", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI0MDY5Mw==", "url": "https://github.com/quarkusio/quarkus/pull/11994#discussion_r485240693", "bodyText": "continue here would result in an infinite loop,  as aClass will never be updated.", "author": "stuartwdouglas", "createdAt": "2020-09-08T22:59:10Z", "path": "independent-projects/arc/processor/src/main/java/io/quarkus/arc/processor/BeanDeployment.java", "diffHunk": "@@ -720,20 +720,21 @@ static ScopeInfo getValidScope(Collection<ScopeInfo> stereotypeScopes, Annotatio\n             Set<MethodInfo> methods = new HashSet<>();\n             while (aClass != null) {\n                 if (!scannedClasses.add(aClass)) {\n-                    continue;", "originalCommit": "fd623711b9ace0c582c774056394e464cf443fd6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI0MjMyNA==", "url": "https://github.com/quarkusio/quarkus/pull/11994#discussion_r485242324", "bodyText": "Actually this would always return true, as scannedClasses has the wrong scope.", "author": "stuartwdouglas", "createdAt": "2020-09-08T23:04:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI0MDY5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM4NDEyMA==", "url": "https://github.com/quarkusio/quarkus/pull/11994#discussion_r485384120", "bodyText": "continue here would result in an infinite loop, as aClass will never be updated.\n\nYou can't have a class multiple times in the hierarchy, or?\n\nActually this would always return true, as scannedClasses has the wrong scope.\n\nI don't think so. We need to use a new set for each bean class.\n@michalszynkiewicz could you review this PR? Git blame tells me that you're the author of the original code...", "author": "mkouba", "createdAt": "2020-09-09T07:04:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI0MDY5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM4NjMzNQ==", "url": "https://github.com/quarkusio/quarkus/pull/11994#discussion_r485386335", "bodyText": "I have just removed the scannedClasses set, you can't never have a double up in the hierarchy when you are just looking at superclasses. If there had been a double up with the existing code you would get an infinite loop.", "author": "stuartwdouglas", "createdAt": "2020-09-09T07:09:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI0MDY5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM4NzY1Mg==", "url": "https://github.com/quarkusio/quarkus/pull/11994#discussion_r485387652", "bodyText": "While you're at it, could you also remove it here: https://github.com/quarkusio/quarkus/blob/master/independent-projects/arc/processor/src/main/java/io/quarkus/arc/processor/InterceptorInfo.java#L61\nThanks :-)", "author": "mkouba", "createdAt": "2020-09-09T07:12:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI0MDY5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTUyNzMyOQ==", "url": "https://github.com/quarkusio/quarkus/pull/11994#discussion_r485527329", "bodyText": "Nevermind, I'll update the interceptor info in a different PR...", "author": "mkouba", "createdAt": "2020-09-09T11:07:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTI0MDY5Mw=="}], "type": "inlineReview"}, {"oid": "851ec991536fa1ccf29d62d17eb152906867f747", "url": "https://github.com/quarkusio/quarkus/commit/851ec991536fa1ccf29d62d17eb152906867f747", "message": "Prevent potential infinite loop\n\nAlso other minor improvements", "committedDate": "2020-09-08T23:03:35Z", "type": "forcePushed"}, {"oid": "ea23aa82f1a93326bc04f27d6b33ba38b11d3a11", "url": "https://github.com/quarkusio/quarkus/commit/ea23aa82f1a93326bc04f27d6b33ba38b11d3a11", "message": "Prevent potential infinite loop\n\nAlso other minor improvements", "committedDate": "2020-09-09T07:08:26Z", "type": "forcePushed"}, {"oid": "23d73d24bfb0243985f4f71db282989503703172", "url": "https://github.com/quarkusio/quarkus/commit/23d73d24bfb0243985f4f71db282989503703172", "message": "Prevent theoretical infinite loop\n\nIf this condition was triggered it would result\nin an infinite loop, however it will never actually\nbe triggered, so I just deleted that bit of the code.\n\nAlso remove O(n) behaviour when checking for overriden\nmethods.", "committedDate": "2020-09-09T22:11:08Z", "type": "forcePushed"}, {"oid": "7e665061caf51c9105a7b492e607052b6b416e14", "url": "https://github.com/quarkusio/quarkus/commit/7e665061caf51c9105a7b492e607052b6b416e14", "message": "Prevent theoretical infinite loop\n\nIf this condition was triggered it would result\nin an infinite loop, however it will never actually\nbe triggered, so I just deleted that bit of the code.\n\nAlso remove O(n) behaviour when checking for overriden\nmethods.", "committedDate": "2020-09-10T00:10:45Z", "type": "commit"}, {"oid": "7e665061caf51c9105a7b492e607052b6b416e14", "url": "https://github.com/quarkusio/quarkus/commit/7e665061caf51c9105a7b492e607052b6b416e14", "message": "Prevent theoretical infinite loop\n\nIf this condition was triggered it would result\nin an infinite loop, however it will never actually\nbe triggered, so I just deleted that bit of the code.\n\nAlso remove O(n) behaviour when checking for overriden\nmethods.", "committedDate": "2020-09-10T00:10:45Z", "type": "forcePushed"}]}