{"pr_number": 10653, "pr_title": "Improve the OIDC/OAuth2 documentation", "pr_createdAt": "2020-07-10T21:57:33Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/10653", "timeline": [{"oid": "ab4acac76e4df22a978c063390215c74a3bc507e", "url": "https://github.com/quarkusio/quarkus/commit/ab4acac76e4df22a978c063390215c74a3bc507e", "message": "Improve the OIDC/OAuth2 documentation", "committedDate": "2020-07-12T22:11:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM0MTg4Nw==", "url": "https://github.com/quarkusio/quarkus/pull/10653#discussion_r453341887", "bodyText": "represent them as MP JWT JsonWebToken\n\nMaybe give the fully qualified class name istead: represent them as org.microprofile.i-don't-know-which-package.JsonWebToken`.\nAlso, security is not only for JAX-RS endpoint right ? It also works for Sevlet and reactive route.", "author": "loicmathieu", "createdAt": "2020-07-12T17:21:56Z", "path": "docs/src/main/asciidoc/security-jwt.adoc", "diffHunk": "@@ -9,9 +9,9 @@ include::./attributes.adoc[]\n :extension-name: SmallRye JWT\n :mp-jwt: MicroProfile JWT RBAC\n \n-This guide explains how your Quarkus application can utilize MicroProfile Json Web Token (link:https://jwt.io/[JWT]) \n-Role-Based Access Control (link:https://en.wikipedia.org/wiki/Role-based_access_control[RBAC]) to provide\n-secured access to the JAX-RS endpoints.\n+This guide explains how your Quarkus application can utilize MicroProfile JWT (MP JWT) to verify https://tools.ietf.org/html/rfc7519[JSON Web Token]s, represent them as MP JWT `JsonWebToken` and provide secured access to the JAX-RS endpoints using Bearer Token Authorization and https://en.wikipedia.org/wiki/Role-based_access_control[Role-Based Access Control].", "originalCommit": "53b6dfd69f00bc4f1b31ccc73608daf5463d46fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYyNDU0Nw==", "url": "https://github.com/quarkusio/quarkus/pull/10653#discussion_r453624547", "bodyText": "@loicmathieu thanks for the comments, sure I'll just say Quarkus HTTP endpoints", "author": "sberyozkin", "createdAt": "2020-07-13T12:49:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM0MTg4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ3MjcwMQ==", "url": "https://github.com/quarkusio/quarkus/pull/10653#discussion_r453472701", "bodyText": "Same here, it's not only JAX-RS that you can protect", "author": "loicmathieu", "createdAt": "2020-07-13T08:11:40Z", "path": "docs/src/main/asciidoc/security-openid-connect-web-authentication.adoc", "diffHunk": "@@ -3,16 +3,18 @@ This guide is maintained in the main Quarkus repository\n and pull requests should be submitted there:\n https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n ////\n-= Quarkus - Using OpenID Connect to Protect Web Applications\n+= Quarkus - Using OpenID Connect to Protect Web Applications using Authorization Code Flow.\n \n include::./attributes.adoc[]\n+:toc:\n \n-This guide demonstrates how to use the OpenID Connect Extension to protect your application using Quarkus, where authentication and authorization are based on tokens issued by OpenId Connect and OAuth 2.0 compliant Authorization Servers such as https://www.keycloak.org/about.html[Keycloak].\n+This guide demonstrates how to use Quarkus OpenID Connect Extension to protect your JAX-RS applications using OpenId Connect Authorization Code Flow supported by OpenId Connect compliant Authorization Servers such as https://www.keycloak.org/about.html[Keycloak].", "originalCommit": "ab4acac76e4df22a978c063390215c74a3bc507e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ3Mzc0Nw==", "url": "https://github.com/quarkusio/quarkus/pull/10653#discussion_r453473747", "bodyText": "It's not clear for my what ID JWT token is ?", "author": "loicmathieu", "createdAt": "2020-07-13T08:15:13Z", "path": "docs/src/main/asciidoc/security-openid-connect-web-authentication.adoc", "diffHunk": "@@ -266,6 +268,21 @@ Note that `AccessTokenCredential` will have to be used if the Access Token issue\n \n Injection of the `JsonWebToken` and `AccessTokenCredential` is supported in both `@RequestScoped` and `@ApplicationScoped` contexts.\n \n+== User Info\n+\n+Set `quarkus.oidc.user-info-required=true` if a UserInfo JSON object from the OIDC userinfo endpoint has to be requested.\n+This will make an `io.quarkus.oidc.UserInfo` (which is a simple `javax.json.JsonObject` wrapper) object accessible as a SecurityIdentity `userinfo` attribute.\n+\n+== Token Claims And SecurityIdentity Roles\n+\n+The way the roles are mapped to the SecurityIdentity roles from the verified tokens is identical to how it is done for the link:security-openid-connect#token-claims-and-securityidentity-roles[bearer tokens] with the only difference being is that ID JWT token is used as a source of the roles by default.", "originalCommit": "ab4acac76e4df22a978c063390215c74a3bc507e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYzNDczNw==", "url": "https://github.com/quarkusio/quarkus/pull/10653#discussion_r453634737", "bodyText": "@loicmathieu I'll change it to just ID token, it is returned, alongside access token, as part of the OIDC code flow, https://openid.net/specs/openid-connect-core-1_0.html#TokenResponse", "author": "sberyozkin", "createdAt": "2020-07-13T13:06:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ3Mzc0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYwNTM1NQ==", "url": "https://github.com/quarkusio/quarkus/pull/10653#discussion_r453605355", "bodyText": "I would leave as it stands today because this is related to Centralized Authorization.", "author": "pedroigor", "createdAt": "2020-07-13T12:13:32Z", "path": "docs/src/main/asciidoc/security-keycloak-authorization.adoc", "diffHunk": "@@ -3,15 +3,15 @@ This guide is maintained in the main Quarkus repository\n and pull requests should be submitted there:\n https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n ////\n-= Quarkus - Using OpenID Connect and Keycloak to Centralize Authorizations", "originalCommit": "ab4acac76e4df22a978c063390215c74a3bc507e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYyNDAzMw==", "url": "https://github.com/quarkusio/quarkus/pull/10653#discussion_r453624033", "bodyText": "@pedroigor OK, I wanted to make it crystal clear that it is only related (at the moment) to the bearer tokens, but sure, I can drop this title update, since I'm clarifying it further in the document again...", "author": "sberyozkin", "createdAt": "2020-07-13T12:48:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYwNTM1NQ=="}], "type": "inlineReview"}, {"oid": "dfdcad9218485cbbed28fb741c41eb2ffb88b274", "url": "https://github.com/quarkusio/quarkus/commit/dfdcad9218485cbbed28fb741c41eb2ffb88b274", "message": "Improve the OIDC/OAuth2 documentation", "committedDate": "2020-07-13T13:27:07Z", "type": "commit"}, {"oid": "dfdcad9218485cbbed28fb741c41eb2ffb88b274", "url": "https://github.com/quarkusio/quarkus/commit/dfdcad9218485cbbed28fb741c41eb2ffb88b274", "message": "Improve the OIDC/OAuth2 documentation", "committedDate": "2020-07-13T13:27:07Z", "type": "forcePushed"}]}