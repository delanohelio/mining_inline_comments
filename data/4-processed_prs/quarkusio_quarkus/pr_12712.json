{"pr_number": 12712, "pr_title": "CI caches adjustments", "pr_createdAt": "2020-10-14T12:38:21Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/12712", "timeline": [{"oid": "af12a6764569ad3bf29623729caed6fc9539d2cd", "url": "https://github.com/quarkusio/quarkus/commit/af12a6764569ad3bf29623729caed6fc9539d2cd", "message": "Only refresh the CI cache monthly\n\nWe used to hash the BOM but it's really suboptimal with Dependabot\nupgrading the BOM one dependency at a time.\n\nWe now only refresh the cache monthly. It should be good enough\nto avoid exponential growth while using the cache much more often.", "committedDate": "2020-10-14T12:33:01Z", "type": "commit"}, {"oid": "86f1b9e0ef5d70e1d3ec3e14c6c76eda735335db", "url": "https://github.com/quarkusio/quarkus/commit/86f1b9e0ef5d70e1d3ec3e14c6c76eda735335db", "message": "Use a Maven cache for snapshots deployment", "committedDate": "2020-10-14T12:35:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY5OTE2Ng==", "url": "https://github.com/quarkusio/quarkus/pull/12712#discussion_r504699166", "bodyText": "I think we can move back to actions/cache@v2 since we're not using the restore-keys and restore-only keys anymore", "author": "gastaldi", "createdAt": "2020-10-14T13:56:53Z", "path": ".github/workflows/ci-actions.yml", "diffHunk": "@@ -69,19 +69,18 @@ jobs:\n         uses: joschi/setup-jdk@68381f2c0646f942f70b69f8e81fe10e1ed5d293\n         with:\n           java-version: 11\n-      - name: Compute cache restore key\n-        # Always recompute on a push so that the maven repo doesnt grow indefinitely with old versions\n+      - name: Get Date\n+        id: get-date\n         run: |\n-          if ${{ github.event_name == 'pull_request' }}; then echo \"::set-env name=COMPUTED_RESTORE_KEY::q2maven-\"; fi\n+          echo \"::set-output name=date::$(/bin/date -u \"+%Y-%m\")\"\n+        shell: bash\n       - name: Cache Maven Repository\n         id: cache-maven\n         uses: n1hility/cache@v2", "originalCommit": "86f1b9e0ef5d70e1d3ec3e14c6c76eda735335db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDcxMDQxMA==", "url": "https://github.com/quarkusio/quarkus/pull/12712#discussion_r504710410", "bodyText": "Done.", "author": "gsmet", "createdAt": "2020-10-14T14:11:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY5OTE2Ng=="}], "type": "inlineReview"}, {"oid": "292e9764aeb53d01f4547b4e31c76504faf0931a", "url": "https://github.com/quarkusio/quarkus/commit/292e9764aeb53d01f4547b4e31c76504faf0931a", "message": "Go back to the official actions/cache@v2", "committedDate": "2020-10-14T14:10:59Z", "type": "commit"}]}