{"pr_number": 9246, "pr_title": "Explicitly set the io.netty.machineId system property to prevent potential slowdown during Netty channel initialization", "pr_createdAt": "2020-05-13T03:35:05Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/9246", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1NTQ2NQ==", "url": "https://github.com/quarkusio/quarkus/pull/9246#discussion_r424155465", "bodyText": "I don't know if this is any clearer, as the average user will have no idea what this is about.\nWith this system property this should no longer be an issue so maybe we should just remove this message?", "author": "stuartwdouglas", "createdAt": "2020-05-13T03:42:24Z", "path": "extensions/netty/runtime/src/main/java/io/quarkus/netty/runtime/NettyRecorder.java", "diffHunk": "@@ -16,17 +16,17 @@\n \n     public void eagerlyInitChannelId() {\n         //this class is slow to init and can block the IO thread and cause a warning\n-        //we init it from a throway thread to stop this\n+        //we init it from a throwaway thread to stop this\n         //we do it from another thread so as not to affect start time\n         new Thread(new Runnable() {\n             @Override\n             public void run() {\n                 long start = System.currentTimeMillis();\n                 DefaultChannelId.newInstance();\n                 if (System.currentTimeMillis() - start > 1000) {\n-                    log.warn(\n-                            \"Localhost lookup took more than one second, you need to add a /etc/hosts entry to improve Quarkus startup time. \"\n-                                    + \"On Windows the path is C:\\\\Windows\\\\System32\\\\Drivers\\\\etc\\\\hosts. See https://thoeni.io/post/macos-sierra-java/ for macOS details.\");\n+                    log.warn(\"Netty DefaultChannelId initialization (with io.netty.machineId\" +", "originalCommit": "333889db40bb4cccc4a82b921f3e8b8b61067a60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1NjI5OA==", "url": "https://github.com/quarkusio/quarkus/pull/9246#discussion_r424156298", "bodyText": "I was thinking of removing the whole eagerlyInitChannelId() method from the recorder, now that this system property was set. But given that we haven't seen this change being used in real applications, I wanted to see if even with this system property change, it takes more than a second to initialize it. In which case, we would see users reporting that WARN message.\nMaybe we keep this log message for at least 1 release and then if no one complains or reports this message, we remove the whole eagerlyInitChannelId() method?", "author": "jaikiran", "createdAt": "2020-05-13T03:45:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1NTQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1NzEyNQ==", "url": "https://github.com/quarkusio/quarkus/pull/9246#discussion_r424157125", "bodyText": "Sounds good to me.", "author": "stuartwdouglas", "createdAt": "2020-05-13T03:49:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1NTQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1ODUyOA==", "url": "https://github.com/quarkusio/quarkus/pull/9246#discussion_r424158528", "bodyText": "I just updated this PR to just add a TODO to remove that method in future", "author": "jaikiran", "createdAt": "2020-05-13T03:55:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE1NTQ2NQ=="}], "type": "inlineReview"}, {"oid": "9299d8206cfff3235b57efc1f978033a755a84a9", "url": "https://github.com/quarkusio/quarkus/commit/9299d8206cfff3235b57efc1f978033a755a84a9", "message": "issue#8822 Explicitly set the io.netty.machineId system property to prevent potential slowdown during the io.netty.channel.DefaultChannelId initialization", "committedDate": "2020-05-13T03:54:30Z", "type": "commit"}, {"oid": "9299d8206cfff3235b57efc1f978033a755a84a9", "url": "https://github.com/quarkusio/quarkus/commit/9299d8206cfff3235b57efc1f978033a755a84a9", "message": "issue#8822 Explicitly set the io.netty.machineId system property to prevent potential slowdown during the io.netty.channel.DefaultChannelId initialization", "committedDate": "2020-05-13T03:54:30Z", "type": "forcePushed"}]}