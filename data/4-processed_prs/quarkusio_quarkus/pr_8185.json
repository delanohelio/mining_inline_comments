{"pr_number": 8185, "pr_title": "Add missing ooxml-schemas dependency #8081", "pr_createdAt": "2020-03-26T11:43:51Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/8185", "timeline": [{"oid": "afdf0b1dd2c7d9486ef88ddadddac6df2623bf81", "url": "https://github.com/quarkusio/quarkus/commit/afdf0b1dd2c7d9486ef88ddadddac6df2623bf81", "message": "XStream substitutions to avoid @Delete paths #7422", "committedDate": "2020-03-23T09:41:07Z", "type": "forcePushed"}, {"oid": "0be44ab95bbd8c37231c6549a8a76687defdb8c3", "url": "https://github.com/quarkusio/quarkus/commit/0be44ab95bbd8c37231c6549a8a76687defdb8c3", "message": "Add dependency to ooxml-schemas #8081", "committedDate": "2020-03-26T11:48:10Z", "type": "commit"}, {"oid": "0be44ab95bbd8c37231c6549a8a76687defdb8c3", "url": "https://github.com/quarkusio/quarkus/commit/0be44ab95bbd8c37231c6549a8a76687defdb8c3", "message": "Add dependency to ooxml-schemas #8081", "committedDate": "2020-03-26T11:48:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODUyMzEzNg==", "url": "https://github.com/quarkusio/quarkus/pull/8185#discussion_r398523136", "bodyText": "@galderz Thanks for this PR. My only reservation is that with quarkus-tika, if a user configures a PDF parser only for example (quarkus.tika.parsers=pdf)), then so far none of the non-PDF dependencies are expected to make it to the native image.\nI wonder, if this dependency were optional, then would making a build step which would check if OOXML is enabled (can be true by default to start with - I can add an ooxml shortcut later) and if yes - add a native resource build item which would make this ooxml-schemas included ?\nIs it realistic ?", "author": "sberyozkin", "createdAt": "2020-03-26T12:10:58Z", "path": "extensions/tika/runtime/pom.xml", "diffHunk": "@@ -43,6 +43,16 @@\n                 </exclusion>\n             </exclusions>\n         </dependency>\n+        <dependency>", "originalCommit": "0be44ab95bbd8c37231c6549a8a76687defdb8c3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU0OTgzMw==", "url": "https://github.com/quarkusio/quarkus/pull/8185#discussion_r398549833", "bodyText": "This dependency is only needed during building of the image itself. It's only for class resolution while trying to discover which methods the class has, nothing else. None of the classes that were missing would actually make it to the final image.", "author": "galderz", "createdAt": "2020-03-26T12:56:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODUyMzEzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU1NzM0Nw==", "url": "https://github.com/quarkusio/quarkus/pull/8185#discussion_r398557347", "bodyText": "IOW, it has 0 impact on the pointsto analysis that svm does. So, unless the end application uses something there indirectly, nothing will be included in the native image.", "author": "galderz", "createdAt": "2020-03-26T13:08:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODUyMzEzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU2NDI1Mw==", "url": "https://github.com/quarkusio/quarkus/pull/8185#discussion_r398564253", "bodyText": "Hi @galderz, so for example, org/openxmlformats/schemas/wordprocessingml/x2006/main/STDisplacedByCustomXml is missing, and few more I guess, so adding  this dependency also contributes to resolving #7198 (see for example https://github.com/quarkusio/quarkus/pull/7198/files#diff-cefda81cecd3360b76139d0044ecb53aR25). So unless quarkus-tika processor references these classes directly or indirectly, no native image size will be affected ?", "author": "sberyozkin", "createdAt": "2020-03-26T13:18:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODUyMzEzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU4NTQ4MQ==", "url": "https://github.com/quarkusio/quarkus/pull/8185#discussion_r398585481", "bodyText": "@galderz cool, your last comment makes it quite clear, cheers", "author": "sberyozkin", "createdAt": "2020-03-26T13:48:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODUyMzEzNg=="}], "type": "inlineReview"}]}