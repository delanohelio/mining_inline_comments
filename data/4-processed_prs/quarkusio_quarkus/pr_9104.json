{"pr_number": 9104, "pr_title": "Add a Test BOM", "pr_createdAt": "2020-05-06T07:12:38Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/9104", "timeline": [{"oid": "dd596141a8bace35375d95437c3a79dcf1931a39", "url": "https://github.com/quarkusio/quarkus/commit/dd596141a8bace35375d95437c3a79dcf1931a39", "message": "Fix #9103 Test BOM", "committedDate": "2020-05-06T09:10:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY2NDM4MA==", "url": "https://github.com/quarkusio/quarkus/pull/9104#discussion_r420664380", "bodyText": "I would use https://search.maven.org/artifact/org.testcontainers/testcontainers-bom/1.14.1/pom instead.", "author": "gsmet", "createdAt": "2020-05-06T09:39:54Z", "path": "bom/test/pom.xml", "diffHunk": "@@ -0,0 +1,36 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>quarkus-parent</artifactId>\n+        <groupId>io.quarkus</groupId>\n+        <version>999-SNAPSHOT</version>\n+        <relativePath>../../pom.xml</relativePath>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+    <artifactId>quarkus-bom-test</artifactId>\n+    <name>Quarkus - BOM - Test</name>\n+    <packaging>pom</packaging>\n+\n+    <description>Dependency management for integration tests. Importable by third party extension developers.</description>\n+\n+    <properties>\n+        <test-containers.version>1.14.1</test-containers.version>\n+    </properties>\n+\n+    <dependencyManagement>\n+        <dependencies>\n+            <dependency>\n+                <groupId>org.testcontainers</groupId>\n+                <artifactId>testcontainers</artifactId>\n+                <version>${test-containers.version}</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>org.testcontainers</groupId>\n+                <artifactId>postgresql</artifactId>\n+                <version>${test-containers.version}</version>", "originalCommit": "dd596141a8bace35375d95437c3a79dcf1931a39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY3NjI0Ng==", "url": "https://github.com/quarkusio/quarkus/pull/9104#discussion_r420676246", "bodyText": "+1 done in 9f12829", "author": "ppalaga", "createdAt": "2020-05-06T10:02:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY2NDM4MA=="}], "type": "inlineReview"}, {"oid": "9f128299c36c61e3defe7fd3bb0567c93f7183ca", "url": "https://github.com/quarkusio/quarkus/commit/9f128299c36c61e3defe7fd3bb0567c93f7183ca", "message": "Fix #9103 Test BOM", "committedDate": "2020-05-06T10:01:37Z", "type": "forcePushed"}, {"oid": "91000be49fbc9165abf869d03e543369fa6b64f0", "url": "https://github.com/quarkusio/quarkus/commit/91000be49fbc9165abf869d03e543369fa6b64f0", "message": "Fix #9103 Test BOM", "committedDate": "2020-05-06T11:53:23Z", "type": "commit"}, {"oid": "91000be49fbc9165abf869d03e543369fa6b64f0", "url": "https://github.com/quarkusio/quarkus/commit/91000be49fbc9165abf869d03e543369fa6b64f0", "message": "Fix #9103 Test BOM", "committedDate": "2020-05-06T11:53:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE4ODU4OQ==", "url": "https://github.com/quarkusio/quarkus/pull/9104#discussion_r423188589", "bodyText": "Maybe I'm wrong but shouldn't it be included in the build-parent? @aloubyansky WDYT?", "author": "gsmet", "createdAt": "2020-05-11T17:07:01Z", "path": "test-framework/vault/pom.xml", "diffHunk": "@@ -14,6 +14,18 @@\n     <artifactId>quarkus-test-vault</artifactId>\n     <name>Quarkus - Test Framework - Vault</name>\n \n+    <dependencyManagement>\n+        <dependencies>\n+            <dependency>\n+                <groupId>io.quarkus</groupId>\n+                <artifactId>quarkus-bom-test</artifactId>\n+                <version>${project.version}</version>\n+                <type>pom</type>\n+                <scope>import</scope>\n+            </dependency>\n+        </dependencies>\n+    </dependencyManagement>", "originalCommit": "91000be49fbc9165abf869d03e543369fa6b64f0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzI5OTg4OA==", "url": "https://github.com/quarkusio/quarkus/pull/9104#discussion_r423299888", "bodyText": "The current proposal is to have three different BOMs: runtime, deployment and test.\n\nRuntime BOM manages the dependencies required by runtime modules and nothing else\nDeployment BOM imports the runtime BOM and manage the dependencies required by deployment modules\nThe test BOM manages the dependencies required by itests unless they are managed by the runtime BOM. The test BOM could perhaps import 1, because all integration tests will most likely need both.\n\nNow importing the test bom in build-parent seems to be wrong, IMO, because it gives Quarkus developers quite an improper impression about what deps are allowed to use where. They might think that having dependency managed in the test BOM is fine in a runtime or deployment module, which it is definitely not.\n(Actually the same argument could be used against importing both runtime and deployment BOM in build-parent: it is wrong to have a -deployment dependency in a runtime module, although it would work with the current setup. So build-parent should rather import only the runtime BOM and the deployment modules should import the deployment BOM individually.)\nTo save some POM boiler plate, we have a parent-it in Camel Quarkus that imports the test BOM and inherits from build-parent (that in turn imports just the runtime BOM): https://github.com/apache/camel-quarkus/blob/master/poms/build-parent-it/pom.xml", "author": "ppalaga", "createdAt": "2020-05-11T20:28:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE4ODU4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUyMDk4OQ==", "url": "https://github.com/quarkusio/quarkus/pull/9104#discussion_r423520989", "bodyText": "That makes sense.", "author": "aloubyansky", "createdAt": "2020-05-12T07:31:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzE4ODU4OQ=="}], "type": "inlineReview"}]}