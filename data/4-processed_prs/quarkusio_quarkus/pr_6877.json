{"pr_number": 6877, "pr_title": "Add documentation for kotlin dataclass mongodb", "pr_createdAt": "2020-01-30T07:50:43Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6877", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgxODU1OA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372818558", "bodyText": "A link to the doc maybe?", "author": "machi1990", "createdAt": "2020-01-30T08:42:16Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor need to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandate the presence of an empty (no parameter) constructor.\n+\n+So, if you want to use a data class for an entity class, you need a way to have Kotlin generates an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgzNTc1MA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372835750", "bodyText": "Yes, we absolutely should have a link. Also, are you sure this work in native?", "author": "geoand", "createdAt": "2020-01-30T09:21:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgxODU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg0NzE0Mw==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372847143", "bodyText": "are you sure this work in native\n\nThe pojo codec works in native, and all classes are register for reflection so I don't see why it will not works in native. I can ask  for tests on the original issue report.", "author": "loicmathieu", "createdAt": "2020-01-30T09:44:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgxODU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg0ODQ2Ng==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372848466", "bodyText": "The reason I am asking is because I have seen some weird deserilization behavior in #3954 with data classes that only occurs in native mode.", "author": "geoand", "createdAt": "2020-01-30T09:47:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgxODU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg1NDI1OA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372854258", "bodyText": "The native issue you referes to seems to be more on GraalVM side than on Kotin/Mongodb/Quarkus side ... Maybe someone from GraalVM can have a look at a support on GraalVM for kotlin data classes.", "author": "loicmathieu", "createdAt": "2020-01-30T09:58:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgxODU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg1NTczOA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372855738", "bodyText": "Yeah probably. I haven't had time to really dig into it yet or talk to the Kotlin folks first to get their opinion.\nOnce I do that I'll have a better understanding and then we'll be able to proceed further", "author": "geoand", "createdAt": "2020-01-30T10:01:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgxODU1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgxODg4MA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372818880", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            and the generated constructor need to have as parameters all the fields of the data class.\n          \n          \n            \n            and the generated constructor needs to have as parameters all the fields of the data class.", "author": "machi1990", "createdAt": "2020-01-30T08:43:05Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor need to have as parameters all the fields of the data class.", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgxOTAxOA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372819018", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            MongoDB with Panache uses the PojoCodec, this MongoDB codec mandate the presence of an empty (no parameter) constructor.\n          \n          \n            \n            MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.", "author": "machi1990", "createdAt": "2020-01-30T08:43:24Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor need to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandate the presence of an empty (no parameter) constructor.", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgxOTY0OQ==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372819649", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            in this case all constructor parameters needs to be annotated with `@BsonProperty`: link:{mongodb-doc-root-url}/bson/pojos/#supporting-pojos-without-no-args-constructors[Supporting pojos without no args constructor]\n          \n          \n            \n            in this case all constructor parameters have  to be annotated with `@BsonProperty`: link:{mongodb-doc-root-url}/bson/pojos/#supporting-pojos-without-no-args-constructors[Supporting pojos without no args constructor]", "author": "machi1990", "createdAt": "2020-01-30T08:44:52Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor need to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandate the presence of an empty (no parameter) constructor.\n+\n+So, if you want to use a data class for an entity class, you need a way to have Kotlin generates an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If it's not something you want to do, there are two solutions to workaround this.\n+\n+First solution, you can create a BSON Codec, it will be automatically registered by Quarkus and will be used instead of the PojoCodec.\n+See this part of the documentation: link:mongodb#simplifying-mongodb-client-usage-using-bson-codec[Using BSON codec]\n+\n+Second solution, you can use the `@BsonCreator` annotation to tell the PojoCodec to use the Kotlin data class default constructor,\n+in this case all constructor parameters needs to be annotated with `@BsonProperty`: link:{mongodb-doc-root-url}/bson/pojos/#supporting-pojos-without-no-args-constructors[Supporting pojos without no args constructor]", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgyMDI3Nw==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372820277", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Following is the Person class as a Kotlin data class:\n          \n          \n            \n            See an example of the Person class as a Kotlin data class:", "author": "machi1990", "createdAt": "2020-01-30T08:46:21Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor need to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandate the presence of an empty (no parameter) constructor.\n+\n+So, if you want to use a data class for an entity class, you need a way to have Kotlin generates an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If it's not something you want to do, there are two solutions to workaround this.\n+\n+First solution, you can create a BSON Codec, it will be automatically registered by Quarkus and will be used instead of the PojoCodec.\n+See this part of the documentation: link:mongodb#simplifying-mongodb-client-usage-using-bson-codec[Using BSON codec]\n+\n+Second solution, you can use the `@BsonCreator` annotation to tell the PojoCodec to use the Kotlin data class default constructor,\n+in this case all constructor parameters needs to be annotated with `@BsonProperty`: link:{mongodb-doc-root-url}/bson/pojos/#supporting-pojos-without-no-args-constructors[Supporting pojos without no args constructor]\n+\n+Following is the Person class as a Kotlin data class:", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgyMDU3MQ==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372820571", "bodyText": "Good catch!", "author": "machi1990", "createdAt": "2020-01-30T08:47:02Z", "path": "docs/src/main/asciidoc/writing-extensions.adoc", "diffHunk": "@@ -2655,7 +2655,7 @@ See the code  example below:\n public ConfigGroupConfig configGroup;\n ----\n \n-1. This will add a section documentation for the `confgiGroup` config item in the generated documentation.\n+1. This will add a section documentation for the `configGroup` config item in the generated documentation.", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgzNDcyNg==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372834726", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n          \n          \n            \n            Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.", "author": "geoand", "createdAt": "2020-01-30T09:19:00Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgzNTQ2Mg==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372835462", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            So, if you want to use a data class for an entity class, you need a way to have Kotlin generates an empty constructor.\n          \n          \n            \n            Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.", "author": "geoand", "createdAt": "2020-01-30T09:20:42Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor need to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandate the presence of an empty (no parameter) constructor.\n+\n+So, if you want to use a data class for an entity class, you need a way to have Kotlin generates an empty constructor.", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgzNTg5Mg==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372835892", "bodyText": "Have you perhaps also tried the Kotlin no-arg compiler plugin?", "author": "geoand", "createdAt": "2020-01-30T09:21:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgzNTQ2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg0NzU0Mg==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372847542", "bodyText": "No, I can ask to test it on the original issue.", "author": "loicmathieu", "createdAt": "2020-01-30T09:45:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgzNTQ2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgzNjQwMw==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372836403", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If it's not something you want to do, there are two solutions to workaround this.\n          \n          \n            \n            If for whatever reason the aforementioned solution is deemed unacceptable, there are alternatives", "author": "geoand", "createdAt": "2020-01-30T09:22:36Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor need to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandate the presence of an empty (no parameter) constructor.\n+\n+So, if you want to use a data class for an entity class, you need a way to have Kotlin generates an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If it's not something you want to do, there are two solutions to workaround this.", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgzNjU5OQ==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372836599", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            First solution, you can create a BSON Codec, it will be automatically registered by Quarkus and will be used instead of the PojoCodec.\n          \n          \n            \n            Firstly, you can create a BSON Codec which will be automatically registered by Quarkus and will be used instead of the PojoCodec.", "author": "geoand", "createdAt": "2020-01-30T09:23:02Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor need to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandate the presence of an empty (no parameter) constructor.\n+\n+So, if you want to use a data class for an entity class, you need a way to have Kotlin generates an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If it's not something you want to do, there are two solutions to workaround this.\n+\n+First solution, you can create a BSON Codec, it will be automatically registered by Quarkus and will be used instead of the PojoCodec.", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjgzNjY2OA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372836668", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Second solution, you can use the `@BsonCreator` annotation to tell the PojoCodec to use the Kotlin data class default constructor,\n          \n          \n            \n            Secondly, you can use the `@BsonCreator` annotation to tell the PojoCodec to use the Kotlin data class default constructor,", "author": "geoand", "createdAt": "2020-01-30T09:23:13Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very practical to defines data carrier classes, so they are a perfect match for an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor need to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandate the presence of an empty (no parameter) constructor.\n+\n+So, if you want to use a data class for an entity class, you need a way to have Kotlin generates an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If it's not something you want to do, there are two solutions to workaround this.\n+\n+First solution, you can create a BSON Codec, it will be automatically registered by Quarkus and will be used instead of the PojoCodec.\n+See this part of the documentation: link:mongodb#simplifying-mongodb-client-usage-using-bson-codec[Using BSON codec]\n+\n+Second solution, you can use the `@BsonCreator` annotation to tell the PojoCodec to use the Kotlin data class default constructor,", "originalCommit": "7a93ee58ec4d157d5697ba3be6da4d3eb2a64429", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwMzg4MA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372903880", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n          \n          \n            \n            So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on either the RESTEasy JSON-B extension or the RESTEasy Jackson extension.", "author": "gsmet", "createdAt": "2020-01-30T11:46:50Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNDAxNQ==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372904015", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n          \n          \n            \n            Kotlin data classes are a very convenient way of defining data carrier classes, making them a great match to define an entity class.", "author": "gsmet", "createdAt": "2020-01-30T11:47:08Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNDEyNA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372904124", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n          \n          \n            \n            But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked as nullable,", "author": "gsmet", "createdAt": "2020-01-30T11:47:23Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNDQzMA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372904430", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n          \n          \n            \n            MongoDB with Panache uses the `PojoCodec`, a MongoDB codec which mandates the presence of a parameterless constructor.", "author": "gsmet", "createdAt": "2020-01-30T11:48:06Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNDU1Mg==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372904552", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.\n          \n          \n            \n            Therefore, if you want to use a data class as an entity class, you need a way to make Kotlin generate an empty constructor.", "author": "gsmet", "createdAt": "2020-01-30T11:48:24Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n+\n+Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNDYzMg==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372904632", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To do so, you need to provide default values for all fields of your classes.\n          \n          \n            \n            To do so, you need to provide default values for all the fields of your classes.", "author": "gsmet", "createdAt": "2020-01-30T11:48:33Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n+\n+Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNDY5MQ==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372904691", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The following sentence from the Kotlin documentation explain this:\n          \n          \n            \n            The following sentence from the Kotlin documentation explains it:", "author": "gsmet", "createdAt": "2020-01-30T11:48:43Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n+\n+Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNDk0OA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372904948", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If for whatever reason the aforementioned solution is deemed unacceptable, there are alternatives\n          \n          \n            \n            If for whatever reason, the aforementioned solution is deemed unacceptable, there are alternatives.", "author": "gsmet", "createdAt": "2020-01-30T11:49:23Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n+\n+Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If for whatever reason the aforementioned solution is deemed unacceptable, there are alternatives", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNTIzMg==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372905232", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Firstly, you can create a BSON Codec which will be automatically registered by Quarkus and will be used instead of the PojoCodec.\n          \n          \n            \n            First, you can create a BSON Codec which will be automatically registered by Quarkus and will be used instead of the `PojoCodec`.", "author": "gsmet", "createdAt": "2020-01-30T11:50:13Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n+\n+Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If for whatever reason the aforementioned solution is deemed unacceptable, there are alternatives\n+\n+Firstly, you can create a BSON Codec which will be automatically registered by Quarkus and will be used instead of the PojoCodec.", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNTMxNQ==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372905315", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            See this part of the documentation: link:mongodb#simplifying-mongodb-client-usage-using-bson-codec[Using BSON codec]\n          \n          \n            \n            See this part of the documentation: link:mongodb#simplifying-mongodb-client-usage-using-bson-codec[Using BSON codec].", "author": "gsmet", "createdAt": "2020-01-30T11:50:26Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n+\n+Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If for whatever reason the aforementioned solution is deemed unacceptable, there are alternatives\n+\n+Firstly, you can create a BSON Codec which will be automatically registered by Quarkus and will be used instead of the PojoCodec.\n+See this part of the documentation: link:mongodb#simplifying-mongodb-client-usage-using-bson-codec[Using BSON codec]", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNTUwMw==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372905503", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Secondly, you can use the `@BsonCreator` annotation to tell the PojoCodec to use the Kotlin data class default constructor,\n          \n          \n            \n            Another option is to use the `@BsonCreator` annotation to tell the `PojoCodec` to use the Kotlin data class default constructor,", "author": "gsmet", "createdAt": "2020-01-30T11:50:54Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n+\n+Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If for whatever reason the aforementioned solution is deemed unacceptable, there are alternatives\n+\n+Firstly, you can create a BSON Codec which will be automatically registered by Quarkus and will be used instead of the PojoCodec.\n+See this part of the documentation: link:mongodb#simplifying-mongodb-client-usage-using-bson-codec[Using BSON codec]\n+\n+Secondly, you can use the `@BsonCreator` annotation to tell the PojoCodec to use the Kotlin data class default constructor,", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNTYzMA==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372905630", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            in this case all constructor parameters have  to be annotated with `@BsonProperty`: link:{mongodb-doc-root-url}/bson/pojos/#supporting-pojos-without-no-args-constructors[Supporting pojos without no args constructor]\n          \n          \n            \n            in this case all constructor parameters have to be annotated with `@BsonProperty`: see link:{mongodb-doc-root-url}/bson/pojos/#supporting-pojos-without-no-args-constructors[Supporting pojos without no args constructor].", "author": "gsmet", "createdAt": "2020-01-30T11:51:13Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n+\n+Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If for whatever reason the aforementioned solution is deemed unacceptable, there are alternatives\n+\n+Firstly, you can create a BSON Codec which will be automatically registered by Quarkus and will be used instead of the PojoCodec.\n+See this part of the documentation: link:mongodb#simplifying-mongodb-client-usage-using-bson-codec[Using BSON codec]\n+\n+Secondly, you can use the `@BsonCreator` annotation to tell the PojoCodec to use the Kotlin data class default constructor,\n+in this case all constructor parameters have  to be annotated with `@BsonProperty`: link:{mongodb-doc-root-url}/bson/pojos/#supporting-pojos-without-no-args-constructors[Supporting pojos without no args constructor]", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNTk0MQ==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372905941", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            See an example of the Person class as a Kotlin data class:\n          \n          \n            \n            An example of a `Person` class defined as a Kotlin data class would look like:\n          \n      \n    \n    \n  \n\n@loicmathieu sorry I missed the suggestion button on this one :).", "author": "gsmet", "createdAt": "2020-01-30T11:52:00Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -528,7 +529,41 @@ you need to provide the value by yourself.\n ====\n \n `ObjectId` can be difficult to use if you want to expose its value in your REST service.\n-So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+So we created JSON-B and Jackson providers to serialize/deserialize them as a `String` which are automatically registered if your project depends on one of the RESTEasy with JSON-B or RESTEasy with Jackson extensions.\n+\n+== Working with Kotlin Data classes\n+\n+Kotlin data classes are very convenient way to define data carrier classes, making them a great match to define an entity class.\n+\n+But this type of class comes with some limitations: all fields needs to be initialized at construction time or be marked at nullable,\n+and the generated constructor needs to have as parameters all the fields of the data class.\n+\n+MongoDB with Panache uses the PojoCodec, this MongoDB codec mandates the presence of an empty (no parameter) constructor.\n+\n+Therefore, if you want to use a data class as an entity class, a way is needed to make Kotlin generate an empty constructor.\n+To do so, you need to provide default values for all fields of your classes.\n+The following sentence from the Kotlin documentation explain this:\n+\n+__On the JVM, if the generated class needs to have a parameterless constructor, default values for all properties have to be specified (see Constructors).__\n+\n+If for whatever reason the aforementioned solution is deemed unacceptable, there are alternatives\n+\n+Firstly, you can create a BSON Codec which will be automatically registered by Quarkus and will be used instead of the PojoCodec.\n+See this part of the documentation: link:mongodb#simplifying-mongodb-client-usage-using-bson-codec[Using BSON codec]\n+\n+Secondly, you can use the `@BsonCreator` annotation to tell the PojoCodec to use the Kotlin data class default constructor,\n+in this case all constructor parameters have  to be annotated with `@BsonProperty`: link:{mongodb-doc-root-url}/bson/pojos/#supporting-pojos-without-no-args-constructors[Supporting pojos without no args constructor]\n+\n+See an example of the Person class as a Kotlin data class:", "originalCommit": "668a580fa975de11eaec4cd34a597e3ac6835d9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjk3NzM3MQ==", "url": "https://github.com/quarkusio/quarkus/pull/6877#discussion_r372977371", "bodyText": "Thanks, it's easier to me :)", "author": "loicmathieu", "createdAt": "2020-01-30T14:24:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjkwNTk0MQ=="}], "type": "inlineReview"}, {"oid": "f38862d21fd235aff41fce91fd672eaba11b5878", "url": "https://github.com/quarkusio/quarkus/commit/f38862d21fd235aff41fce91fd672eaba11b5878", "message": "Document the usage of Kotlin data classes with MongoDB with Panache", "committedDate": "2020-01-30T17:19:48Z", "type": "commit"}, {"oid": "858560fb8fa80a61396cdd534aafb0b853f1eaf1", "url": "https://github.com/quarkusio/quarkus/commit/858560fb8fa80a61396cdd534aafb0b853f1eaf1", "message": "Fix typo on the writing extension guide", "committedDate": "2020-01-30T17:19:48Z", "type": "commit"}, {"oid": "858560fb8fa80a61396cdd534aafb0b853f1eaf1", "url": "https://github.com/quarkusio/quarkus/commit/858560fb8fa80a61396cdd534aafb0b853f1eaf1", "message": "Fix typo on the writing extension guide", "committedDate": "2020-01-30T17:19:48Z", "type": "forcePushed"}]}