{"pr_number": 7356, "pr_title": "Create openshift wrapper extension.", "pr_createdAt": "2020-02-22T09:05:31Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/7356", "timeline": [{"oid": "1c64f47daef0b977a8d3a2ea9715125b4a4eb723", "url": "https://github.com/quarkusio/quarkus/commit/1c64f47daef0b977a8d3a2ea9715125b4a4eb723", "message": "feat: Create openshift wrapper extension.", "committedDate": "2020-02-22T09:06:52Z", "type": "forcePushed"}, {"oid": "7dd19ad520b9bda0219a2ed8131491b409cf1ab2", "url": "https://github.com/quarkusio/quarkus/commit/7dd19ad520b9bda0219a2ed8131491b409cf1ab2", "message": "feat: Add an openshift wrapper extension.", "committedDate": "2020-02-22T09:10:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg5ODk4OQ==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r382898989", "bodyText": "What is this file needed for?", "author": "geoand", "createdAt": "2020-02-22T09:10:24Z", "path": "extensions/kubernetes/openshift/deployment/src/main/resources/config-wrapper.vm", "diffHunk": "@@ -0,0 +1,15 @@\n+package io.quarkus.kubernetes.deployment;", "originalCommit": "1c64f47daef0b977a8d3a2ea9715125b4a4eb723", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg5OTA5NA==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r382899094", "bodyText": "They are not needed and have been removed.", "author": "iocanel", "createdAt": "2020-02-22T09:12:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg5ODk4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk5NTM1MQ==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r382995351", "bodyText": "how does these three methods interact....feels like it will be nondeterministic on who \"wins\" ?", "author": "maxandersen", "createdAt": "2020-02-23T11:27:23Z", "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesProcessor.java", "diffHunk": "@@ -74,6 +75,33 @@\n \n     private static final String OUTPUT_ARTIFACT_FORMAT = \"%s%s.jar\";\n \n+    @BuildStep", "originalCommit": "7dd19ad520b9bda0219a2ed8131491b409cf1ab2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzMzMTk5Mw==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r383331993", "bodyText": "There is  not a race here.\nWe just produce build items,  based on the configuration properties that are found.", "author": "iocanel", "createdAt": "2020-02-24T15:27:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk5NTM1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI3MzcxMg==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r383273712", "bodyText": "would this be better named as quarkus-openshift-s2i as we wouldn't have this if s2i wasn't in the picture and we could imagine more and more users using openshift without needing s2i at all....so maybe down the line there is something a bit more apropriate to be named quarkus-openshift ?", "author": "maxandersen", "createdAt": "2020-02-24T13:48:31Z", "path": "bom/runtime/pom.xml", "diffHunk": "@@ -733,6 +733,11 @@\n                 <artifactId>quarkus-kubernetes</artifactId>\n                 <version>${project.version}</version>\n             </dependency>\n+            <dependency>\n+                <groupId>io.quarkus</groupId>\n+                <artifactId>quarkus-openshift</artifactId>", "originalCommit": "7dd19ad520b9bda0219a2ed8131491b409cf1ab2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI4NDA3Mg==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r383284072", "bodyText": "I am not a big fan of quarkus-openshift-s2i. Mostly, because it's not just about s2i but also to provide default properties for openshift e.g.quarkus.kubernetes.deploymenet-target etc. In the future we could move all the openshfit  related code, in this extension too (if there wasn't time constraints I would have done it already).", "author": "iocanel", "createdAt": "2020-02-24T14:08:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI3MzcxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI5MTk2OA==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r383291968", "bodyText": "ack -makes sense. I guess question is if s2i.enbled=true  or s2i.enabled=false is the default then ?", "author": "maxandersen", "createdAt": "2020-02-24T14:22:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI3MzcxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQwNDk4OA==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384404988", "bodyText": "s2i.enabled=true by default.", "author": "iocanel", "createdAt": "2020-02-26T10:31:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzI3MzcxMg=="}], "type": "inlineReview"}, {"oid": "5f620b5b3bd875f397c8bfb87d6543c631778fc8", "url": "https://github.com/quarkusio/quarkus/commit/5f620b5b3bd875f397c8bfb87d6543c631778fc8", "message": "feat: Add an openshift wrapper extension.", "committedDate": "2020-02-24T15:25:35Z", "type": "forcePushed"}, {"oid": "e33508038a4a396f1d1d0a149b5ab2921a821a04", "url": "https://github.com/quarkusio/quarkus/commit/e33508038a4a396f1d1d0a149b5ab2921a821a04", "message": "feat: Add an openshift wrapper extension.", "committedDate": "2020-02-24T15:37:13Z", "type": "forcePushed"}, {"oid": "3aec75ea7fa4f803653eb2a87366a98fd6b3dc2c", "url": "https://github.com/quarkusio/quarkus/commit/3aec75ea7fa4f803653eb2a87366a98fd6b3dc2c", "message": "feat: Add an openshift wrapper extension.", "committedDate": "2020-02-24T21:48:30Z", "type": "forcePushed"}, {"oid": "fa0a16671dcb4a35fe27c669db9ad4377461626d", "url": "https://github.com/quarkusio/quarkus/commit/fa0a16671dcb4a35fe27c669db9ad4377461626d", "message": "doc: Add doc for Openshift extension.", "committedDate": "2020-02-25T11:27:12Z", "type": "forcePushed"}, {"oid": "6293e32458a165c6903de6c8df146ad495eb06a9", "url": "https://github.com/quarkusio/quarkus/commit/6293e32458a165c6903de6c8df146ad495eb06a9", "message": "doc: Add doc for Openshift extension.", "committedDate": "2020-02-25T21:04:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMxOTMyNw==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384319327", "bodyText": "I assume this was added by accident?", "author": "geoand", "createdAt": "2020-02-26T07:48:16Z", "path": "integration-tests/infinispan-client/.gitignore", "diffHunk": "@@ -0,0 +1 @@\n+/.apt_generated_tests/", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMzMDAwNA==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384330004", "bodyText": "Yeap", "author": "iocanel", "createdAt": "2020-02-26T08:15:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMxOTMyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMxOTY0OA==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384319648", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    //Hanlde custom s2i builder images\n          \n          \n            \n                    //Handle custom s2i builder images", "author": "geoand", "createdAt": "2020-02-26T07:49:09Z", "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesProcessor.java", "diffHunk": "@@ -374,7 +399,7 @@ private void applyBuildItems(Session session,\n         }\n \n         //Hanlde custom s2i builder images", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMDAzNA==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384320034", "bodyText": "This doesn't seem to be used", "author": "geoand", "createdAt": "2020-02-26T07:50:15Z", "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/KubernetesConfigUtil.java", "diffHunk": "@@ -24,13 +25,17 @@\n public class KubernetesConfigUtil {\n \n     private static final String DEKORATE_PREFIX = \"dekorate.\";\n+    private static final String QUARKUS_PREFIX = \"quarkus.\";", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMTE1Ng==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384321156", "bodyText": "Is this correct?", "author": "geoand", "createdAt": "2020-02-26T07:53:31Z", "path": "extensions/kubernetes/openshift/deployment/src/main/java/io/quarkus/openshift/deployment/Constants.java", "diffHunk": "@@ -0,0 +1,6 @@\n+package io.quarkus.openshift.deployment;\n+\n+public class Constants {\n+    static final String OPENSHIFT = \"openshift\";\n+    static final String DEPLOYMENT_CONFIG = \"openshift\";", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMTc4Mw==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384321783", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.\n          \n          \n            \n            This guide covers generating and deploying Openshift resources based on sane defaults and user supplied configuration.", "author": "geoand", "createdAt": "2020-02-26T07:55:12Z", "path": "docs/src/main/asciidoc/openshift.adoc", "diffHunk": "@@ -0,0 +1,176 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Openshift extension\n+\n+include::./attributes.adoc[]\n+\n+This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMTk4Nw==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384321987", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            extensions with sensible defaults so that its easier for the user to get started with Quarkus on Openshift.\n          \n          \n            \n            extensions with sensible defaults so that it's easier for the user to get started with Quarkus on Openshift.", "author": "geoand", "createdAt": "2020-02-26T07:55:47Z", "path": "docs/src/main/asciidoc/openshift.adoc", "diffHunk": "@@ -0,0 +1,176 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Openshift extension\n+\n+include::./attributes.adoc[]\n+\n+This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.\n+\n+\n+== Prerequisites\n+\n+To complete this guide, you need:\n+\n+* roughly 5 minutes\n+* an IDE\n+* JDK 1.8+ installed with `JAVA_HOME` configured appropriately\n+* Apache Maven 3.5.3+\n+* access to an Openshift or cluster (Minishift is a viable options)\n+\n+== Creating the Maven project\n+\n+First, we need a new project that contains the Openshift extension. This can be done using the following command:\n+\n+[source, subs=attributes+]\n+----\n+mvn io.quarkus:quarkus-maven-plugin:{quarkus-version}:create \\\n+    -DprojectGroupId=org.acme \\\n+    -DprojectArtifactId=openshift-quickstart \\\n+    -DclassName=\"org.acme.rest.GreetingResource\" \\\n+    -Dpath=\"/greeting\" \\\n+    -Dextensions=\"openshift\"\n+\n+cd openshift-quickstart\n+----\n+\n+=== Openshift\n+\n+Quarkus offers the ability to automatically generate Openshift resources based on sane defaults and user supplied configuration.\n+The Openshift extension is actually a wrapper extension that brings together the link:kubernetes[kubernetes] and link:container-image-s2i[container-image-s2i]\n+extensions with sensible defaults so that its easier for the user to get started with Quarkus on Openshift.", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMjU1OQ==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384322559", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Please, notice that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`.\n          \n          \n            \n            Please note that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`.", "author": "geoand", "createdAt": "2020-02-26T07:57:26Z", "path": "docs/src/main/asciidoc/openshift.adoc", "diffHunk": "@@ -0,0 +1,176 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Openshift extension\n+\n+include::./attributes.adoc[]\n+\n+This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.\n+\n+\n+== Prerequisites\n+\n+To complete this guide, you need:\n+\n+* roughly 5 minutes\n+* an IDE\n+* JDK 1.8+ installed with `JAVA_HOME` configured appropriately\n+* Apache Maven 3.5.3+\n+* access to an Openshift or cluster (Minishift is a viable options)\n+\n+== Creating the Maven project\n+\n+First, we need a new project that contains the Openshift extension. This can be done using the following command:\n+\n+[source, subs=attributes+]\n+----\n+mvn io.quarkus:quarkus-maven-plugin:{quarkus-version}:create \\\n+    -DprojectGroupId=org.acme \\\n+    -DprojectArtifactId=openshift-quickstart \\\n+    -DclassName=\"org.acme.rest.GreetingResource\" \\\n+    -Dpath=\"/greeting\" \\\n+    -Dextensions=\"openshift\"\n+\n+cd openshift-quickstart\n+----\n+\n+=== Openshift\n+\n+Quarkus offers the ability to automatically generate Openshift resources based on sane defaults and user supplied configuration.\n+The Openshift extension is actually a wrapper extension that brings together the link:kubernetes[kubernetes] and link:container-image-s2i[container-image-s2i]\n+extensions with sensible defaults so that its easier for the user to get started with Quarkus on Openshift.\n+\n+When we added the `openshift` extension to the command line invocation above, the following dependency was added to the `pom.xml`\n+\n+[source,xml]\n+----\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-openshift</artifactId>\n+    </dependency>\n+----\n+\n+By adding this dependency, we now have the ability to configure the Openshift resource generation and application using the usual `application.properties` approach that Quarkus provides.\n+The configuration items that are available can be found in: `io.quarkus.kubernetes.deployment.OpenshiftConfig` class.\n+Furthermore, the items provided by `io.quarkus.deployment.ApplicationConfig` affect the Openshift resources.\n+\n+=== Building\n+\n+Building is handled by the link:container-image#s2i[container-image-s2i] extension. To trigger a build:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.build=true\n+----\n+\n+The command above will trigger an s2i binary build.\n+\n+=== Deploying\n+\n+To trigger a deployment:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.kubernetes.deploy=true\n+----\n+\n+The command above will trigger a container image build and will apply the generated Openshift resources, right after.\n+The generated resources are using Openshift's `DeploymentConfig` that is configured to automatically trigger a redeployment when a change in the `ImageStream` is noticed.\n+In other words, any container image build after the inital deployment will automatically trigger redeployment, without the need to delete, update or re-apply the generated resources.\n+\n+=== Customizing\n+\n+All available customization options are available in the link:kubenretes#openshift[Openshift configuration options].\n+\n+Some examples are provided in the sections below:\n+\n+==== Labels\n+\n+To add a label in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.labels.foo=bar\n+----\n+\n+==== Annotations\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.annotations.foo=bar\n+----\n+\n+==== Environment variables\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.value=foobar\n+----\n+\n+The command above will add `MY_ENV_VAR=foobar` as an environment variable.\n+Please, notice that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`.", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMjY3Ng==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384322676", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You may also noticed that in contrast to labels, and annotations for environment variables you don't just use a key=value approach.\n          \n          \n            \n            You may also have noticed that in contrast to labels and annotations for environment variables you don't just use a key=value approach.", "author": "geoand", "createdAt": "2020-02-26T07:57:47Z", "path": "docs/src/main/asciidoc/openshift.adoc", "diffHunk": "@@ -0,0 +1,176 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Openshift extension\n+\n+include::./attributes.adoc[]\n+\n+This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.\n+\n+\n+== Prerequisites\n+\n+To complete this guide, you need:\n+\n+* roughly 5 minutes\n+* an IDE\n+* JDK 1.8+ installed with `JAVA_HOME` configured appropriately\n+* Apache Maven 3.5.3+\n+* access to an Openshift or cluster (Minishift is a viable options)\n+\n+== Creating the Maven project\n+\n+First, we need a new project that contains the Openshift extension. This can be done using the following command:\n+\n+[source, subs=attributes+]\n+----\n+mvn io.quarkus:quarkus-maven-plugin:{quarkus-version}:create \\\n+    -DprojectGroupId=org.acme \\\n+    -DprojectArtifactId=openshift-quickstart \\\n+    -DclassName=\"org.acme.rest.GreetingResource\" \\\n+    -Dpath=\"/greeting\" \\\n+    -Dextensions=\"openshift\"\n+\n+cd openshift-quickstart\n+----\n+\n+=== Openshift\n+\n+Quarkus offers the ability to automatically generate Openshift resources based on sane defaults and user supplied configuration.\n+The Openshift extension is actually a wrapper extension that brings together the link:kubernetes[kubernetes] and link:container-image-s2i[container-image-s2i]\n+extensions with sensible defaults so that its easier for the user to get started with Quarkus on Openshift.\n+\n+When we added the `openshift` extension to the command line invocation above, the following dependency was added to the `pom.xml`\n+\n+[source,xml]\n+----\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-openshift</artifactId>\n+    </dependency>\n+----\n+\n+By adding this dependency, we now have the ability to configure the Openshift resource generation and application using the usual `application.properties` approach that Quarkus provides.\n+The configuration items that are available can be found in: `io.quarkus.kubernetes.deployment.OpenshiftConfig` class.\n+Furthermore, the items provided by `io.quarkus.deployment.ApplicationConfig` affect the Openshift resources.\n+\n+=== Building\n+\n+Building is handled by the link:container-image#s2i[container-image-s2i] extension. To trigger a build:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.build=true\n+----\n+\n+The command above will trigger an s2i binary build.\n+\n+=== Deploying\n+\n+To trigger a deployment:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.kubernetes.deploy=true\n+----\n+\n+The command above will trigger a container image build and will apply the generated Openshift resources, right after.\n+The generated resources are using Openshift's `DeploymentConfig` that is configured to automatically trigger a redeployment when a change in the `ImageStream` is noticed.\n+In other words, any container image build after the inital deployment will automatically trigger redeployment, without the need to delete, update or re-apply the generated resources.\n+\n+=== Customizing\n+\n+All available customization options are available in the link:kubenretes#openshift[Openshift configuration options].\n+\n+Some examples are provided in the sections below:\n+\n+==== Labels\n+\n+To add a label in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.labels.foo=bar\n+----\n+\n+==== Annotations\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.annotations.foo=bar\n+----\n+\n+==== Environment variables\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.value=foobar\n+----\n+\n+The command above will add `MY_ENV_VAR=foobar` as an environment variable.\n+Please, notice that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`.\n+\n+You may also noticed that in contrast to labels, and annotations for environment variables you don't just use a key=value approach.", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMjgxMw==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384322813", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            That is because for environment variables there are additonal options rather than just value.\n          \n          \n            \n            That is because for environment variables there are additional options rather than just defining value.", "author": "geoand", "createdAt": "2020-02-26T07:58:09Z", "path": "docs/src/main/asciidoc/openshift.adoc", "diffHunk": "@@ -0,0 +1,176 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Openshift extension\n+\n+include::./attributes.adoc[]\n+\n+This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.\n+\n+\n+== Prerequisites\n+\n+To complete this guide, you need:\n+\n+* roughly 5 minutes\n+* an IDE\n+* JDK 1.8+ installed with `JAVA_HOME` configured appropriately\n+* Apache Maven 3.5.3+\n+* access to an Openshift or cluster (Minishift is a viable options)\n+\n+== Creating the Maven project\n+\n+First, we need a new project that contains the Openshift extension. This can be done using the following command:\n+\n+[source, subs=attributes+]\n+----\n+mvn io.quarkus:quarkus-maven-plugin:{quarkus-version}:create \\\n+    -DprojectGroupId=org.acme \\\n+    -DprojectArtifactId=openshift-quickstart \\\n+    -DclassName=\"org.acme.rest.GreetingResource\" \\\n+    -Dpath=\"/greeting\" \\\n+    -Dextensions=\"openshift\"\n+\n+cd openshift-quickstart\n+----\n+\n+=== Openshift\n+\n+Quarkus offers the ability to automatically generate Openshift resources based on sane defaults and user supplied configuration.\n+The Openshift extension is actually a wrapper extension that brings together the link:kubernetes[kubernetes] and link:container-image-s2i[container-image-s2i]\n+extensions with sensible defaults so that its easier for the user to get started with Quarkus on Openshift.\n+\n+When we added the `openshift` extension to the command line invocation above, the following dependency was added to the `pom.xml`\n+\n+[source,xml]\n+----\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-openshift</artifactId>\n+    </dependency>\n+----\n+\n+By adding this dependency, we now have the ability to configure the Openshift resource generation and application using the usual `application.properties` approach that Quarkus provides.\n+The configuration items that are available can be found in: `io.quarkus.kubernetes.deployment.OpenshiftConfig` class.\n+Furthermore, the items provided by `io.quarkus.deployment.ApplicationConfig` affect the Openshift resources.\n+\n+=== Building\n+\n+Building is handled by the link:container-image#s2i[container-image-s2i] extension. To trigger a build:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.build=true\n+----\n+\n+The command above will trigger an s2i binary build.\n+\n+=== Deploying\n+\n+To trigger a deployment:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.kubernetes.deploy=true\n+----\n+\n+The command above will trigger a container image build and will apply the generated Openshift resources, right after.\n+The generated resources are using Openshift's `DeploymentConfig` that is configured to automatically trigger a redeployment when a change in the `ImageStream` is noticed.\n+In other words, any container image build after the inital deployment will automatically trigger redeployment, without the need to delete, update or re-apply the generated resources.\n+\n+=== Customizing\n+\n+All available customization options are available in the link:kubenretes#openshift[Openshift configuration options].\n+\n+Some examples are provided in the sections below:\n+\n+==== Labels\n+\n+To add a label in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.labels.foo=bar\n+----\n+\n+==== Annotations\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.annotations.foo=bar\n+----\n+\n+==== Environment variables\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.value=foobar\n+----\n+\n+The command above will add `MY_ENV_VAR=foobar` as an environment variable.\n+Please, notice that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`.\n+\n+You may also noticed that in contrast to labels, and annotations for environment variables you don't just use a key=value approach.\n+That is because for environment variables there are additonal options rather than just value.", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMjk2Ng==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384322966", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To add all key value pairs of a `Secret` as envrionment variables:\n          \n          \n            \n            To add all key value pairs of a `Secret` as environment variables:", "author": "geoand", "createdAt": "2020-02-26T07:58:32Z", "path": "docs/src/main/asciidoc/openshift.adoc", "diffHunk": "@@ -0,0 +1,176 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Openshift extension\n+\n+include::./attributes.adoc[]\n+\n+This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.\n+\n+\n+== Prerequisites\n+\n+To complete this guide, you need:\n+\n+* roughly 5 minutes\n+* an IDE\n+* JDK 1.8+ installed with `JAVA_HOME` configured appropriately\n+* Apache Maven 3.5.3+\n+* access to an Openshift or cluster (Minishift is a viable options)\n+\n+== Creating the Maven project\n+\n+First, we need a new project that contains the Openshift extension. This can be done using the following command:\n+\n+[source, subs=attributes+]\n+----\n+mvn io.quarkus:quarkus-maven-plugin:{quarkus-version}:create \\\n+    -DprojectGroupId=org.acme \\\n+    -DprojectArtifactId=openshift-quickstart \\\n+    -DclassName=\"org.acme.rest.GreetingResource\" \\\n+    -Dpath=\"/greeting\" \\\n+    -Dextensions=\"openshift\"\n+\n+cd openshift-quickstart\n+----\n+\n+=== Openshift\n+\n+Quarkus offers the ability to automatically generate Openshift resources based on sane defaults and user supplied configuration.\n+The Openshift extension is actually a wrapper extension that brings together the link:kubernetes[kubernetes] and link:container-image-s2i[container-image-s2i]\n+extensions with sensible defaults so that its easier for the user to get started with Quarkus on Openshift.\n+\n+When we added the `openshift` extension to the command line invocation above, the following dependency was added to the `pom.xml`\n+\n+[source,xml]\n+----\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-openshift</artifactId>\n+    </dependency>\n+----\n+\n+By adding this dependency, we now have the ability to configure the Openshift resource generation and application using the usual `application.properties` approach that Quarkus provides.\n+The configuration items that are available can be found in: `io.quarkus.kubernetes.deployment.OpenshiftConfig` class.\n+Furthermore, the items provided by `io.quarkus.deployment.ApplicationConfig` affect the Openshift resources.\n+\n+=== Building\n+\n+Building is handled by the link:container-image#s2i[container-image-s2i] extension. To trigger a build:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.build=true\n+----\n+\n+The command above will trigger an s2i binary build.\n+\n+=== Deploying\n+\n+To trigger a deployment:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.kubernetes.deploy=true\n+----\n+\n+The command above will trigger a container image build and will apply the generated Openshift resources, right after.\n+The generated resources are using Openshift's `DeploymentConfig` that is configured to automatically trigger a redeployment when a change in the `ImageStream` is noticed.\n+In other words, any container image build after the inital deployment will automatically trigger redeployment, without the need to delete, update or re-apply the generated resources.\n+\n+=== Customizing\n+\n+All available customization options are available in the link:kubenretes#openshift[Openshift configuration options].\n+\n+Some examples are provided in the sections below:\n+\n+==== Labels\n+\n+To add a label in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.labels.foo=bar\n+----\n+\n+==== Annotations\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.annotations.foo=bar\n+----\n+\n+==== Environment variables\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.value=foobar\n+----\n+\n+The command above will add `MY_ENV_VAR=foobar` as an environment variable.\n+Please, notice that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`.\n+\n+You may also noticed that in contrast to labels, and annotations for environment variables you don't just use a key=value approach.\n+That is because for environment variables there are additonal options rather than just value.\n+\n+===== Environment variables from Secret\n+\n+To add all key value pairs of a `Secret` as envrionment variables:", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMzA2Ng==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384323066", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To add all key value pairs of a `ConfigMap` as envrionment variables:\n          \n          \n            \n            To add all key value pairs of a `ConfigMap` as environment variables:", "author": "geoand", "createdAt": "2020-02-26T07:58:46Z", "path": "docs/src/main/asciidoc/openshift.adoc", "diffHunk": "@@ -0,0 +1,176 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Openshift extension\n+\n+include::./attributes.adoc[]\n+\n+This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.\n+\n+\n+== Prerequisites\n+\n+To complete this guide, you need:\n+\n+* roughly 5 minutes\n+* an IDE\n+* JDK 1.8+ installed with `JAVA_HOME` configured appropriately\n+* Apache Maven 3.5.3+\n+* access to an Openshift or cluster (Minishift is a viable options)\n+\n+== Creating the Maven project\n+\n+First, we need a new project that contains the Openshift extension. This can be done using the following command:\n+\n+[source, subs=attributes+]\n+----\n+mvn io.quarkus:quarkus-maven-plugin:{quarkus-version}:create \\\n+    -DprojectGroupId=org.acme \\\n+    -DprojectArtifactId=openshift-quickstart \\\n+    -DclassName=\"org.acme.rest.GreetingResource\" \\\n+    -Dpath=\"/greeting\" \\\n+    -Dextensions=\"openshift\"\n+\n+cd openshift-quickstart\n+----\n+\n+=== Openshift\n+\n+Quarkus offers the ability to automatically generate Openshift resources based on sane defaults and user supplied configuration.\n+The Openshift extension is actually a wrapper extension that brings together the link:kubernetes[kubernetes] and link:container-image-s2i[container-image-s2i]\n+extensions with sensible defaults so that its easier for the user to get started with Quarkus on Openshift.\n+\n+When we added the `openshift` extension to the command line invocation above, the following dependency was added to the `pom.xml`\n+\n+[source,xml]\n+----\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-openshift</artifactId>\n+    </dependency>\n+----\n+\n+By adding this dependency, we now have the ability to configure the Openshift resource generation and application using the usual `application.properties` approach that Quarkus provides.\n+The configuration items that are available can be found in: `io.quarkus.kubernetes.deployment.OpenshiftConfig` class.\n+Furthermore, the items provided by `io.quarkus.deployment.ApplicationConfig` affect the Openshift resources.\n+\n+=== Building\n+\n+Building is handled by the link:container-image#s2i[container-image-s2i] extension. To trigger a build:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.build=true\n+----\n+\n+The command above will trigger an s2i binary build.\n+\n+=== Deploying\n+\n+To trigger a deployment:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.kubernetes.deploy=true\n+----\n+\n+The command above will trigger a container image build and will apply the generated Openshift resources, right after.\n+The generated resources are using Openshift's `DeploymentConfig` that is configured to automatically trigger a redeployment when a change in the `ImageStream` is noticed.\n+In other words, any container image build after the inital deployment will automatically trigger redeployment, without the need to delete, update or re-apply the generated resources.\n+\n+=== Customizing\n+\n+All available customization options are available in the link:kubenretes#openshift[Openshift configuration options].\n+\n+Some examples are provided in the sections below:\n+\n+==== Labels\n+\n+To add a label in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.labels.foo=bar\n+----\n+\n+==== Annotations\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.annotations.foo=bar\n+----\n+\n+==== Environment variables\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.value=foobar\n+----\n+\n+The command above will add `MY_ENV_VAR=foobar` as an environment variable.\n+Please, notice that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`.\n+\n+You may also noticed that in contrast to labels, and annotations for environment variables you don't just use a key=value approach.\n+That is because for environment variables there are additonal options rather than just value.\n+\n+===== Environment variables from Secret\n+\n+To add all key value pairs of a `Secret` as envrionment variables:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.secret=my-secret\n+----\n+\n+===== Environment variables from ConfigMap\n+\n+To add all key value pairs of a `ConfigMap` as envrionment variables:", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMyMzE2Mg==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384323162", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To expose a route for the Quarkus application:\n          \n          \n            \n            To expose a `Route` for the Quarkus application:", "author": "geoand", "createdAt": "2020-02-26T07:59:00Z", "path": "docs/src/main/asciidoc/openshift.adoc", "diffHunk": "@@ -0,0 +1,176 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Openshift extension\n+\n+include::./attributes.adoc[]\n+\n+This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.\n+\n+\n+== Prerequisites\n+\n+To complete this guide, you need:\n+\n+* roughly 5 minutes\n+* an IDE\n+* JDK 1.8+ installed with `JAVA_HOME` configured appropriately\n+* Apache Maven 3.5.3+\n+* access to an Openshift or cluster (Minishift is a viable options)\n+\n+== Creating the Maven project\n+\n+First, we need a new project that contains the Openshift extension. This can be done using the following command:\n+\n+[source, subs=attributes+]\n+----\n+mvn io.quarkus:quarkus-maven-plugin:{quarkus-version}:create \\\n+    -DprojectGroupId=org.acme \\\n+    -DprojectArtifactId=openshift-quickstart \\\n+    -DclassName=\"org.acme.rest.GreetingResource\" \\\n+    -Dpath=\"/greeting\" \\\n+    -Dextensions=\"openshift\"\n+\n+cd openshift-quickstart\n+----\n+\n+=== Openshift\n+\n+Quarkus offers the ability to automatically generate Openshift resources based on sane defaults and user supplied configuration.\n+The Openshift extension is actually a wrapper extension that brings together the link:kubernetes[kubernetes] and link:container-image-s2i[container-image-s2i]\n+extensions with sensible defaults so that its easier for the user to get started with Quarkus on Openshift.\n+\n+When we added the `openshift` extension to the command line invocation above, the following dependency was added to the `pom.xml`\n+\n+[source,xml]\n+----\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-openshift</artifactId>\n+    </dependency>\n+----\n+\n+By adding this dependency, we now have the ability to configure the Openshift resource generation and application using the usual `application.properties` approach that Quarkus provides.\n+The configuration items that are available can be found in: `io.quarkus.kubernetes.deployment.OpenshiftConfig` class.\n+Furthermore, the items provided by `io.quarkus.deployment.ApplicationConfig` affect the Openshift resources.\n+\n+=== Building\n+\n+Building is handled by the link:container-image#s2i[container-image-s2i] extension. To trigger a build:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.build=true\n+----\n+\n+The command above will trigger an s2i binary build.\n+\n+=== Deploying\n+\n+To trigger a deployment:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.kubernetes.deploy=true\n+----\n+\n+The command above will trigger a container image build and will apply the generated Openshift resources, right after.\n+The generated resources are using Openshift's `DeploymentConfig` that is configured to automatically trigger a redeployment when a change in the `ImageStream` is noticed.\n+In other words, any container image build after the inital deployment will automatically trigger redeployment, without the need to delete, update or re-apply the generated resources.\n+\n+=== Customizing\n+\n+All available customization options are available in the link:kubenretes#openshift[Openshift configuration options].\n+\n+Some examples are provided in the sections below:\n+\n+==== Labels\n+\n+To add a label in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.labels.foo=bar\n+----\n+\n+==== Annotations\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.annotations.foo=bar\n+----\n+\n+==== Environment variables\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.value=foobar\n+----\n+\n+The command above will add `MY_ENV_VAR=foobar` as an environment variable.\n+Please, notice that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`.\n+\n+You may also noticed that in contrast to labels, and annotations for environment variables you don't just use a key=value approach.\n+That is because for environment variables there are additonal options rather than just value.\n+\n+===== Environment variables from Secret\n+\n+To add all key value pairs of a `Secret` as envrionment variables:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.secret=my-secret\n+----\n+\n+===== Environment variables from ConfigMap\n+\n+To add all key value pairs of a `ConfigMap` as envrionment variables:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.configmap=my-secret\n+----\n+\n+==== Exposing Routes\n+\n+To expose a route for the Quarkus application:", "originalCommit": "6293e32458a165c6903de6c8df146ad495eb06a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a5163f9652c0f617754e47884efc306a2acf9c07", "url": "https://github.com/quarkusio/quarkus/commit/a5163f9652c0f617754e47884efc306a2acf9c07", "message": "doc: Add doc for openshift extension", "committedDate": "2020-02-26T08:27:03Z", "type": "forcePushed"}, {"oid": "0947b8daea619da642909046acaaa7aac48833ca", "url": "https://github.com/quarkusio/quarkus/commit/0947b8daea619da642909046acaaa7aac48833ca", "message": "doc: Add doc for openshift extension", "committedDate": "2020-02-26T08:42:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQwOTYzMw==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384409633", "bodyText": "should we add a:\nTIP: You do not need to always put these in application.properties you can also pass it as a command line argument: -Dquarkus.openshift.expose=true", "author": "maxandersen", "createdAt": "2020-02-26T10:39:57Z", "path": "docs/src/main/asciidoc/openshift.adoc", "diffHunk": "@@ -0,0 +1,176 @@\n+////\n+This guide is maintained in the main Quarkus repository\n+and pull requests should be submitted there:\n+https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n+////\n+= Quarkus - Openshift extension\n+\n+include::./attributes.adoc[]\n+\n+This guide covers generating and deploying Openshift resources based on sane default and user supplied configuration.\n+\n+\n+== Prerequisites\n+\n+To complete this guide, you need:\n+\n+* roughly 5 minutes\n+* an IDE\n+* JDK 1.8+ installed with `JAVA_HOME` configured appropriately\n+* Apache Maven 3.5.3+\n+* access to an Openshift or cluster (Minishift is a viable options)\n+\n+== Creating the Maven project\n+\n+First, we need a new project that contains the Openshift extension. This can be done using the following command:\n+\n+[source, subs=attributes+]\n+----\n+mvn io.quarkus:quarkus-maven-plugin:{quarkus-version}:create \\\n+    -DprojectGroupId=org.acme \\\n+    -DprojectArtifactId=openshift-quickstart \\\n+    -DclassName=\"org.acme.rest.GreetingResource\" \\\n+    -Dpath=\"/greeting\" \\\n+    -Dextensions=\"openshift\"\n+\n+cd openshift-quickstart\n+----\n+\n+=== Openshift\n+\n+Quarkus offers the ability to automatically generate Openshift resources based on sane default and user supplied configuration.\n+The Openshift extension is actually a wrapper extension that brings together the link:kubernetes[kubernetes] and link:container-image-s2i[container-image-s2i]\n+extensions with sensible defaults so that it's easier for the user to get started with Quarkus on Openshift.\n+\n+When we added the `openshift` extension to the command line invocation above, the following dependency was added to the `pom.xml`\n+\n+[source,xml]\n+----\n+    <dependency>\n+      <groupId>io.quarkus</groupId>\n+      <artifactId>quarkus-openshift</artifactId>\n+    </dependency>\n+----\n+\n+By adding this dependency, we now have the ability to configure the Openshift resource generation and application using the usual `application.properties` approach that Quarkus provides.\n+The configuration items that are available can be found in: `io.quarkus.kubernetes.deployment.OpenshiftConfig` class.\n+Furthermore, the items provided by `io.quarkus.deployment.ApplicationConfig` affect the Openshift resources.\n+\n+=== Building\n+\n+Building is handled by the link:container-image#s2i[container-image-s2i] extension. To trigger a build:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.container-image.build=true\n+----\n+\n+The command above will trigger an s2i binary build.\n+\n+=== Deploying\n+\n+To trigger a deployment:\n+\n+[source, subs=attributes+]\n+----\n+mvn clean package -Dquarkus.kubernetes.deploy=true\n+----\n+\n+The command above will trigger a container image build and will apply the generated Openshift resources, right after.\n+The generated resources are using Openshift's `DeploymentConfig` that is configured to automatically trigger a redeployment when a change in the `ImageStream` is noticed.\n+In other words, any container image build after the inital deployment will automatically trigger redeployment, without the need to delete, update or re-apply the generated resources.\n+\n+=== Customizing\n+\n+All available customization options are available in the link:kubenretes#openshift[Openshift configuration options].\n+\n+Some examples are provided in the sections below:\n+\n+==== Labels\n+\n+To add a label in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.labels.foo=bar\n+----\n+\n+==== Annotations\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.annotations.foo=bar\n+----\n+\n+==== Environment variables\n+\n+To add an annotation in the generated resources:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.value=foobar\n+----\n+\n+The command above will add `MY_ENV_VAR=foobar` as an environment variable.\n+Please note that the key `my-env-var` will be converted to uppercase and dashes will be replaced by underscores resulting in `MY_ENV_VAR`.\n+\n+You may also noticed that in contrast to labels, and annotations for environment variables you don't just use a key=value approach.\n+That is because for environment variables there are additional options rather than just value.\n+\n+===== Environment variables from Secret\n+\n+To add all key value pairs of a `Secret` as environment variables:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.secret=my-secret\n+----\n+\n+===== Environment variables from ConfigMap\n+\n+To add all key value pairs of a `ConfigMap` as environment variables:\n+\n+[source]\n+----\n+quarkus.openshift.env-vars.my-env-var.configmap=my-secret\n+----\n+\n+==== Exposing Routes\n+\n+To expose a `Route` for the Quarkus application:\n+\n+[source]\n+----\n+quarkus.openshift.expose=true\n+----", "originalCommit": "0947b8daea619da642909046acaaa7aac48833ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQzMTE1NA==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384431154", "bodyText": "Agree! Let me add that.", "author": "iocanel", "createdAt": "2020-02-26T11:21:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQwOTYzMw=="}], "type": "inlineReview"}, {"oid": "59d15c601202c4177fca2ee7308423b2779bd198", "url": "https://github.com/quarkusio/quarkus/commit/59d15c601202c4177fca2ee7308423b2779bd198", "message": "feat: Openshift resources labeled with app/runtime", "committedDate": "2020-02-26T11:18:16Z", "type": "forcePushed"}, {"oid": "e79e775a71d012e3e79a5f40accbd734da880500", "url": "https://github.com/quarkusio/quarkus/commit/e79e775a71d012e3e79a5f40accbd734da880500", "message": "doc: Add doc for openshift extension", "committedDate": "2020-02-26T11:26:20Z", "type": "forcePushed"}, {"oid": "623f3f96afb82cd25064d8096f3550fdfed2491b", "url": "https://github.com/quarkusio/quarkus/commit/623f3f96afb82cd25064d8096f3550fdfed2491b", "message": "doc: Add doc for openshift extension", "committedDate": "2020-02-27T07:02:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk1MjY5NQ==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384952695", "bodyText": "this metadata looks wrong - this is for openshift not kubernetes?", "author": "maxandersen", "createdAt": "2020-02-27T07:31:04Z", "path": "extensions/kubernetes/vanilla/runtime/src/main/resources/META-INF/quarkus-extension.yaml", "diffHunk": "@@ -0,0 +1,9 @@\n+---\n+name: \"Openshift\"\n+metadata:\n+  keywords:\n+  - \"openshift\"\n+  guide: \"https://quarkus.io/guides/openshift\"", "originalCommit": "623f3f96afb82cd25064d8096f3550fdfed2491b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk1MzQzMw==", "url": "https://github.com/quarkusio/quarkus/pull/7356#discussion_r384953433", "bodyText": "Yup, I'll fix it", "author": "geoand", "createdAt": "2020-02-27T07:33:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk1MjY5NQ=="}], "type": "inlineReview"}, {"oid": "350cc674d2aeedb07237caaf92120e2c3e945a07", "url": "https://github.com/quarkusio/quarkus/commit/350cc674d2aeedb07237caaf92120e2c3e945a07", "message": "doc: Add doc for openshift extension", "committedDate": "2020-02-27T07:34:59Z", "type": "forcePushed"}, {"oid": "8f8588fe27b2ede08eb68d651e694f4ea2b98376", "url": "https://github.com/quarkusio/quarkus/commit/8f8588fe27b2ede08eb68d651e694f4ea2b98376", "message": "feat: add an openshift wrapper extension", "committedDate": "2020-02-27T07:37:44Z", "type": "commit"}, {"oid": "08fbafd0790227a6afd572adb2cbe5d8efacc2ea", "url": "https://github.com/quarkusio/quarkus/commit/08fbafd0790227a6afd572adb2cbe5d8efacc2ea", "message": "feat: Openshift resources labeled with app/runtime", "committedDate": "2020-02-27T07:37:47Z", "type": "commit"}, {"oid": "c6bcc8c2d4da5bbcdc68bebfd806461de4feaf39", "url": "https://github.com/quarkusio/quarkus/commit/c6bcc8c2d4da5bbcdc68bebfd806461de4feaf39", "message": "doc: Add doc for openshift extension", "committedDate": "2020-02-27T07:37:47Z", "type": "commit"}, {"oid": "c6bcc8c2d4da5bbcdc68bebfd806461de4feaf39", "url": "https://github.com/quarkusio/quarkus/commit/c6bcc8c2d4da5bbcdc68bebfd806461de4feaf39", "message": "doc: Add doc for openshift extension", "committedDate": "2020-02-27T07:37:47Z", "type": "forcePushed"}]}