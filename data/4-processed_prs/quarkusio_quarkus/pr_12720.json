{"pr_number": 12720, "pr_title": "Security documentation improvements", "pr_createdAt": "2020-10-14T15:21:17Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/12720", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgyMzAzMQ==", "url": "https://github.com/quarkusio/quarkus/pull/12720#discussion_r504823031", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you are using Quarkus Security, check out the link:security-testing.adoc[Testing Security] section for information on how to easily test security features of the application.\n          \n          \n            \n            If you are using Quarkus Security, check out the link:security-testing[Testing Security] section for information on how to easily test security features of the application.", "author": "gsmet", "createdAt": "2020-10-14T16:43:06Z", "path": "docs/src/main/asciidoc/getting-started-testing.adoc", "diffHunk": "@@ -879,7 +879,7 @@ If you are using the `quarkus-hibernate-orm-panache` or `quarkus-mongodb-panache\n \n == Testing Security\n \n-If you are using Quarkus Security, check out the link:security.adoc#testing-security[Testing Security] section for information on how to easily test security features of the application.\n+If you are using Quarkus Security, check out the link:security-testing.adoc[Testing Security] section for information on how to easily test security features of the application.", "originalCommit": "66b3f6a832a13a0bc26da9d0079edd02d16f28e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgyMzMwNw==", "url": "https://github.com/quarkusio/quarkus/pull/12720#discussion_r504823307", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            See also link:security-openid-connect-multitenancy.adoc#disable-tenant[Disabling Tenant Configurations] for more information about managing the individual tenant configurations in the multi-tenant OIDC deployments.\n          \n          \n            \n            See also link:security-openid-connect-multitenancy#disable-tenant[Disabling Tenant Configurations] for more information about managing the individual tenant configurations in the multi-tenant OIDC deployments.", "author": "gsmet", "createdAt": "2020-10-14T16:43:34Z", "path": "docs/src/main/asciidoc/security.adoc", "diffHunk": "@@ -62,6 +62,12 @@ Both `quarkus-oidc` `Bearer` and `Authorization Code Flow` Authentication mechan\n \n See link:security-openid-connect-multitenancy[Using OpenID Connect Multi-Tenancy] for more information about multiple tenants which can support `Bearer` or `Authorization Code Flow` authentication mechanism and configured statically or dynamically.\n \n+[NOTE]\n+====\n+If you would like to have Quarkus OIDC extension enabled at runtime then set `quarkus.oidc.tenant-enabled=false` at build time and re-enable it at runtime using a system property.\n+See also link:security-openid-connect-multitenancy.adoc#disable-tenant[Disabling Tenant Configurations] for more information about managing the individual tenant configurations in the multi-tenant OIDC deployments.", "originalCommit": "66b3f6a832a13a0bc26da9d0079edd02d16f28e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgyMzkyMQ==", "url": "https://github.com/quarkusio/quarkus/pull/12720#discussion_r504823921", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            One can easiliy add a https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite[SameSite] cookie property to any of the cookies set by a Quarkus endpoint by listing a cookie name and a `SameSite` attribute, for example:\n          \n          \n            \n            One can easily add a https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite[SameSite] cookie property to any of the cookies set by a Quarkus endpoint by listing a cookie name and a `SameSite` attribute, for example:", "author": "gsmet", "createdAt": "2020-10-14T16:44:29Z", "path": "docs/src/main/asciidoc/vertx.adoc", "diffHunk": "@@ -746,6 +746,18 @@ Supported forwarding address headers are:\n * `X-Forwarded-Ssl`\n * `X-Forwarded-Prefix`\n \n+[[same-site-cookie]]\n+== SameSite cookies\n+\n+One can easiliy add a https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite[SameSite] cookie property to any of the cookies set by a Quarkus endpoint by listing a cookie name and a `SameSite` attribute, for example:", "originalCommit": "66b3f6a832a13a0bc26da9d0079edd02d16f28e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c98a9b80431ba6bfe4511d0e151055189a7b9076", "url": "https://github.com/quarkusio/quarkus/commit/c98a9b80431ba6bfe4511d0e151055189a7b9076", "message": "Security documentation improvements", "committedDate": "2020-10-14T17:03:36Z", "type": "forcePushed"}, {"oid": "b586a026fbf633b4d5e92e3e12aa482fe1c90b4a", "url": "https://github.com/quarkusio/quarkus/commit/b586a026fbf633b4d5e92e3e12aa482fe1c90b4a", "message": "Security documentation improvements", "committedDate": "2020-10-14T20:31:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA1Mjg4OQ==", "url": "https://github.com/quarkusio/quarkus/pull/12720#discussion_r505052889", "bodyText": "Note that you can already log this to the access log via the %u pattern.\nThis is based on the issue around Opentracing, but even then this is not correct. This needs to clean up the MDC thread local when the context dissociates from the thread, or else it will leak. It also won't be propagated by MP context propagation, so it won't really work correctly in all circumstances.\nReally we should just be attaching the principal name to the span to make it easier for users and to make sure it works correct.", "author": "stuartwdouglas", "createdAt": "2020-10-14T23:10:14Z", "path": "docs/src/main/asciidoc/security-customization.adoc", "diffHunk": "@@ -220,6 +220,36 @@ public class DisabledAuthController extends AuthorizationController {\n }\n ----\n \n+== Adding Principal Information to Logs\n+\n+In some cases it may be necessary to log the current Principal and other security identity details to the centralized log management system for the audit purposes.", "originalCommit": "b586a026fbf633b4d5e92e3e12aa482fe1c90b4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQwNTAzNw==", "url": "https://github.com/quarkusio/quarkus/pull/12720#discussion_r505405037", "bodyText": "@stuartwdouglas I'll drop this text and remove Fixes note.", "author": "sberyozkin", "createdAt": "2020-10-15T09:42:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA1Mjg4OQ=="}], "type": "inlineReview"}, {"oid": "f84f386b585b9663a3ab8340ac1ea6cef77aaad9", "url": "https://github.com/quarkusio/quarkus/commit/f84f386b585b9663a3ab8340ac1ea6cef77aaad9", "message": "Security documentation improvements", "committedDate": "2020-10-15T09:49:51Z", "type": "commit"}, {"oid": "f84f386b585b9663a3ab8340ac1ea6cef77aaad9", "url": "https://github.com/quarkusio/quarkus/commit/f84f386b585b9663a3ab8340ac1ea6cef77aaad9", "message": "Security documentation improvements", "committedDate": "2020-10-15T09:49:51Z", "type": "forcePushed"}]}