{"pr_number": 13647, "pr_title": "Adding picocli codestart", "pr_createdAt": "2020-12-02T22:41:04Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13647", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDgzODU0OQ==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534838549", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # {title}\n          \n          \n            \n            \n          \n          \n            \n            {description}\n          \n          \n            \n            \n          \n          \n            \n            Guide: {guide}\n          \n          \n            \n            Picocli example\n          \n          \n            \n            \n          \n          \n            \n            Hello and goodbye are civilization fundamentals. Let's not forget it with this picocli application by changing the `command` and `parameters`.\n          \n          \n            \n            \n          \n          \n            \n            Also for picocli applications the dev mode is supported. When running dev mode, the picocli application is executed and on press of the Enter key, is restarted.\n          \n          \n            \n            \n          \n          \n            \n            As command mode applications will often require arguments to be passed on the commandline, this is also possible in dev mode via:\n          \n          \n            \n            ```shell script\n          \n          \n            \n            {buildtool.cli} {buildtool.cmd.dev} {#if buildtool.cli == 'gradle'}--quarkus-args{#else}-Dquarkus.args={/if}='help'\n          \n          \n            \n            ```\n          \n          \n            \n            \n          \n          \n            \n            Guide: https://quarkus.io/guides/picocli", "author": "ia3andy", "createdAt": "2020-12-03T07:47:57Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/singleton-examples/picocli-example/base/README.tpl.qute.md", "diffHunk": "@@ -0,0 +1,5 @@\n+# {title}\n+\n+{description}\n+\n+Guide: {guide}", "originalCommit": "bb5913908ad4eeb0102902833c453e0abb5ab00a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDgzOTY3OA==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534839678", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            tags:\n          \n          \n            \n              - example\n          \n          \n            \n              - singleton-example\n          \n          \n            \n            tags: example", "author": "ia3andy", "createdAt": "2020-12-03T07:48:34Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/singleton-examples/picocli-example/codestart.yml", "diffHunk": "@@ -0,0 +1,28 @@\n+name: picocli-example\n+ref: picocli\n+type: code\n+tags:\n+  - example\n+  - singleton-example", "originalCommit": "bb5913908ad4eeb0102902833c453e0abb5ab00a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg0MTM4OQ==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534841389", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                data:\n          \n          \n            \n                  title: Picocli example\n          \n          \n            \n                  description: |\n          \n          \n            \n                    <p>Hello and goobye are civilization fundamentals. Lets not forget it with this picocli application by changing the <code>command</code> and <code>parameters</code>.</p>\n          \n          \n            \n                    <p><b>Go Subatomic!</b></p>\n          \n          \n            \n                    ## Dev mode\n          \n          \n            \n                    Also for picocli applications the dev mode is supported. When running mvn compile quarkus:dev, the picocli application is executed and on press of the Enter key, is restarted.\n          \n          \n            \n            \n          \n          \n            \n                    As command mode applications will often require arguments to be passed on the commandline, this is also possible in dev mode via:\n          \n          \n            \n            \n          \n          \n            \n                    `mvn compile quarkus:dev -Dquarkus.args='--help'`\n          \n          \n            \n            \n          \n          \n            \n                    The same can be achieved with Gradle:\n          \n          \n            \n            \n          \n          \n            \n                    `./gradlew quarkusDev --quarkus-args='--help'`\n          \n          \n            \n            \n          \n          \n            \n                  guide: https://quarkus.io/guides/picocli\n          \n      \n    \n    \n  \n\nYou can remove that part, it was used because the title and description is also used in the html for the cloud codestarts.", "author": "ia3andy", "createdAt": "2020-12-03T07:49:29Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/singleton-examples/picocli-example/codestart.yml", "diffHunk": "@@ -0,0 +1,28 @@\n+name: picocli-example\n+ref: picocli\n+type: code\n+tags:\n+  - example\n+  - singleton-example\n+language:\n+  base:\n+    data:\n+      title: Picocli example\n+      description: |\n+        <p>Hello and goobye are civilization fundamentals. Lets not forget it with this picocli application by changing the <code>command</code> and <code>parameters</code>.</p>\n+        <p><b>Go Subatomic!</b></p>\n+        ## Dev mode\n+        Also for picocli applications the dev mode is supported. When running mvn compile quarkus:dev, the picocli application is executed and on press of the Enter key, is restarted.\n+\n+        As command mode applications will often require arguments to be passed on the commandline, this is also possible in dev mode via:\n+\n+        `mvn compile quarkus:dev -Dquarkus.args='--help'`\n+\n+        The same can be achieved with Gradle:\n+\n+        `./gradlew quarkusDev --quarkus-args='--help'`\n+\n+      guide: https://quarkus.io/guides/picocli", "originalCommit": "bb5913908ad4eeb0102902833c453e0abb5ab00a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg2MDg2OQ==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534860869", "bodyText": "Which is not the case anymore ?", "author": "jtama", "createdAt": "2020-12-03T08:00:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg0MTM4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg2NDg3MA==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534864870", "bodyText": "It is, but not for this example which doesn't include any web feature.", "author": "ia3andy", "createdAt": "2020-12-03T08:03:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg0MTM4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg0Mjk0Ng==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534842946", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Option(names = {\"--times\", \"-t\"}, defaultValue = \"1\", description = \"Who many time should we say goodbye\")\n          \n          \n            \n                @Option(names = {\"--times\", \"-t\"}, defaultValue = \"1\", description = \"How many time should we say goodbye\")", "author": "ia3andy", "createdAt": "2020-12-03T07:50:19Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/singleton-examples/picocli-example/java/src/main/java/org/acme/picocli/GoodbyeCommand.java", "diffHunk": "@@ -0,0 +1,21 @@\n+package org.acme.picocli;\n+\n+import picocli.CommandLine.Command;\n+import picocli.CommandLine.Option;\n+\n+@Command(name = \"goodbye\")\n+public class GoodbyeCommand implements Runnable {\n+\n+    @Option(names = {\"--name\"}, description = \"Guest name\")\n+    String name;\n+\n+    @Option(names = {\"--times\", \"-t\"}, defaultValue = \"1\", description = \"Who many time should we say goodbye\")", "originalCommit": "bb5913908ad4eeb0102902833c453e0abb5ab00a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDg0NDEzMw==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534844133", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @CommandLine.Option(names = [\"--times\", \"-t\"], defaultValue = \"1\", description = [\"Who many time should we say goodbye\"])\n          \n          \n            \n                @CommandLine.Option(names = [\"--times\", \"-t\"], defaultValue = \"1\", description = [\"How many time should we say goodbye\"])", "author": "ia3andy", "createdAt": "2020-12-03T07:50:59Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/singleton-examples/picocli-example/kotlin/src/main/java/org/acme/picocli/GoodbyeCommand.kt", "diffHunk": "@@ -0,0 +1,17 @@\n+package org.acme.picocli\n+\n+import picocli.CommandLine\n+\n+@CommandLine.Command(name = \"goodbye\")\n+class GoodbyeCommand : Runnable {\n+    @CommandLine.Option(names = [\"--name\"], description = [\"Guest name\"])\n+    var name: String? = null\n+\n+    @CommandLine.Option(names = [\"--times\", \"-t\"], defaultValue = \"1\", description = [\"Who many time should we say goodbye\"])", "originalCommit": "bb5913908ad4eeb0102902833c453e0abb5ab00a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkxMjcxNA==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534912714", "bodyText": "You don't need to add the codestart, it will be autoselected with the extension, but first you need to add it to the extension metadata in this file:\nhttps://github.com/quarkusio/quarkus/blob/master/extensions/picocli/runtime/src/main/resources/META-INF/quarkus-extension.yaml#L10\n---\nname: \"Picocli\"\nmetadata:\n  keywords:\n  - \"picocli\"\n  - \"command-line\"\n  guide: \"https://quarkus.io/guides/picocli\"\n  categories:\n  - \"miscellaneous\"\n  status: \"experimental\"\n  codestart: picocli", "author": "ia3andy", "createdAt": "2020-12-03T08:29:44Z", "path": "integration-tests/devtools/src/test/java/io/quarkus/devtools/codestarts/quarkus/QuarkusCodestartGenerationTest.java", "diffHunk": "@@ -311,6 +311,49 @@ void generateMavenResteasyJava() throws IOException {\n         assertThat(projectDir.resolve(\"src/test/java/org/acme/NativeGreetingResourceIT.java\")).exists();\n     }\n \n+    @Test\n+    void generateMavenPicocliJava() throws IOException {\n+        final QuarkusCodestartProjectInput input = QuarkusCodestartProjectInput.builder()\n+                .addExtension(AppArtifactKey.fromString(\"io.quarkus:quarkus-picocli\"))\n+                .addCodestart(\"picocli\")\n+                .addData(getTestInputData())\n+                .build();\n+        final Path projectDir = testDirPath.resolve(\"maven-picocli-java\");\n+        getCatalog().createProject(input).generate(projectDir);\n+\n+        checkMaven(projectDir);\n+        checkReadme(projectDir);\n+        checkDockerfiles(projectDir, BuildTool.MAVEN);\n+        checkConfigProperties(projectDir);\n+\n+        assertThat(projectDir.resolve(\"src/main/java/org/acme/picocli/EntryCommand.java\")).exists();\n+        assertThat(projectDir.resolve(\"src/main/java/org/acme/picocli/GoodbyeCommand.java\")).exists();\n+        assertThat(projectDir.resolve(\"src/main/java/org/acme/picocli/HelloCommand.java\")).exists();\n+        assertThat(projectDir.resolve(\"src/main/java/org/acme/picocli/GreetingService.java\")).exists();\n+    }\n+\n+    @Test\n+    void generateMavenPicocliKotlin() throws IOException {\n+        final QuarkusCodestartProjectInput input = QuarkusCodestartProjectInput.builder()\n+                .addExtension(AppArtifactKey.fromString(\"io.quarkus:quarkus-picocli\"))\n+                .addExtension(AppArtifactKey.fromString(\"io.quarkus:quarkus-kotlin\"))\n+                .addCodestart(\"picocli\")", "originalCommit": "86b0de8acc958674916886232638a6409e7173e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkyMDA3OA==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534920078", "bodyText": "Ok, this one is missing from guide I think.", "author": "jtama", "createdAt": "2020-12-03T08:34:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkxMjcxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkyNjk3MQ==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534926971", "bodyText": "@jtama-op https://github.com/ia3andy/quarkus/blob/cs-doc/independent-projects/tools/codestarts/README.adoc#writing-a-codestart-with-example-code-for-an-extension\nLook at the When done part :)", "author": "ia3andy", "createdAt": "2020-12-03T08:38:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkxMjcxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDkxMzMzMw==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r534913333", "bodyText": "Same here", "author": "ia3andy", "createdAt": "2020-12-03T08:30:05Z", "path": "integration-tests/devtools/src/test/java/io/quarkus/devtools/codestarts/quarkus/QuarkusCodestartGenerationTest.java", "diffHunk": "@@ -311,6 +311,49 @@ void generateMavenResteasyJava() throws IOException {\n         assertThat(projectDir.resolve(\"src/test/java/org/acme/NativeGreetingResourceIT.java\")).exists();\n     }\n \n+    @Test\n+    void generateMavenPicocliJava() throws IOException {\n+        final QuarkusCodestartProjectInput input = QuarkusCodestartProjectInput.builder()\n+                .addExtension(AppArtifactKey.fromString(\"io.quarkus:quarkus-picocli\"))\n+                .addCodestart(\"picocli\")", "originalCommit": "86b0de8acc958674916886232638a6409e7173e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0c9161b2e3906152f5f0b9a5a4333098be2e81c1", "url": "https://github.com/quarkusio/quarkus/commit/0c9161b2e3906152f5f0b9a5a4333098be2e81c1", "message": "Adding picocli codestart", "committedDate": "2020-12-03T08:29:10Z", "type": "forcePushed"}, {"oid": "78b1089ef7ec3f8c5ca4d6578a0174e1a5a0940e", "url": "https://github.com/quarkusio/quarkus/commit/78b1089ef7ec3f8c5ca4d6578a0174e1a5a0940e", "message": "Adding picocli codestart", "committedDate": "2020-12-03T08:35:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTAwNzYxOA==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r535007618", "bodyText": "this felt a bit weird to have them exclusive, maybe --firt-name and --nick-name? would make more sense?", "author": "ia3andy", "createdAt": "2020-12-03T09:33:47Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/examples/picocli-example/java/src/main/java/org/acme/picocli/HelloCommand.java", "diffHunk": "@@ -0,0 +1,38 @@\n+package org.acme.picocli;\n+\n+import picocli.CommandLine;\n+import picocli.CommandLine.Command;\n+\n+import java.io.File;\n+import java.net.URL;\n+\n+@Command(name = \"hello\")\n+public class HelloCommand implements Runnable{\n+\n+    @CommandLine.ArgGroup(exclusive = true, multiplicity = \"1\")\n+    Name name;\n+    static class Name {\n+\n+\n+        @CommandLine.Option(names = {\"--first-name\"}, description = \"The guest first name\")", "originalCommit": "78b1089ef7ec3f8c5ca4d6578a0174e1a5a0940e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTAxNzQzOQ==", "url": "https://github.com/quarkusio/quarkus/pull/13647#discussion_r535017439", "bodyText": "Ok yes of course! I only intended to show the exclusive feature, I will make the change.", "author": "jtama", "createdAt": "2020-12-03T09:42:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTAwNzYxOA=="}], "type": "inlineReview"}, {"oid": "becee6de1f1dcb588fd757485e20620e120a93a8", "url": "https://github.com/quarkusio/quarkus/commit/becee6de1f1dcb588fd757485e20620e120a93a8", "message": "Adding picocli codestart", "committedDate": "2020-12-03T11:16:18Z", "type": "commit"}, {"oid": "becee6de1f1dcb588fd757485e20620e120a93a8", "url": "https://github.com/quarkusio/quarkus/commit/becee6de1f1dcb588fd757485e20620e120a93a8", "message": "Adding picocli codestart", "committedDate": "2020-12-03T11:16:18Z", "type": "forcePushed"}]}