{"pr_number": 12610, "pr_title": "Externalize gradle/maven wrapper command from codestart template", "pr_createdAt": "2020-10-08T18:52:50Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/12610", "timeline": [{"oid": "cb5fa666695413a8345c5f46a8a23b9bb9514e9e", "url": "https://github.com/quarkusio/quarkus/commit/cb5fa666695413a8345c5f46a8a23b9bb9514e9e", "message": "Externaliza gradle/maven command", "committedDate": "2020-10-10T06:28:57Z", "type": "forcePushed"}, {"oid": "4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "url": "https://github.com/quarkusio/quarkus/commit/4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "message": "Externaliza gradle/maven command", "committedDate": "2020-10-12T15:29:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgxNzUxMw==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r503817513", "bodyText": "you can remove data tool", "author": "ia3andy", "createdAt": "2020-10-13T09:48:36Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/core/buildtool/gradle/codestart.yml", "diffHunk": "@@ -13,6 +13,8 @@ language:\n         gradle-plugin:\n           id: io.quarkus\n       buildtool:\n+        tool: gradle", "originalCommit": "4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgxNzc1Ng==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r503817756", "bodyText": "you can also remove data wrapper", "author": "ia3andy", "createdAt": "2020-10-13T09:48:58Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/core/buildtool/gradle/codestart.yml", "diffHunk": "@@ -13,6 +13,8 @@ language:\n         gradle-plugin:\n           id: io.quarkus\n       buildtool:\n+        tool: gradle\n+        wrapper: false", "originalCommit": "4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgxNzgzMQ==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r503817831", "bodyText": "same", "author": "ia3andy", "createdAt": "2020-10-13T09:49:07Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/core/buildtool/maven/codestart.yml", "diffHunk": "@@ -19,6 +19,8 @@ language:\n         version: 2.22.1\n     shared-data:\n       buildtool:\n+        tool: maven\n+        wrapper: false", "originalCommit": "4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgxODQ0NA==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r503818444", "bodyText": "{#if buildtool.build-ci-cmd == 'gradle'}\n...", "author": "ia3andy", "createdAt": "2020-10-13T09:50:02Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/core/tooling/github-action/base/.github/workflows/ci.tpl.qute.yml", "diffHunk": "@@ -18,4 +18,10 @@ jobs:\n         with:\n           java-version: {java.version}\n       - name: Build\n-        run: {buildtool.cmd.build-ci}\n\\ No newline at end of file\n+        {#if buildtool.tool == 'gradle' && !buildtool.wrapper}", "originalCommit": "4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgxODUxMg==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r503818512", "bodyText": "remove", "author": "ia3andy", "createdAt": "2020-10-13T09:50:10Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/core/tooling/gradle-wrapper/codestart.yml", "diffHunk": "@@ -7,10 +7,13 @@ language:\n         version: 6.5.1\n     shared-data:\n       buildtool:\n+        tool: gradle\n+        wrapper: true", "originalCommit": "4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgxODU3Mg==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r503818572", "bodyText": "remove", "author": "ia3andy", "createdAt": "2020-10-13T09:50:17Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/core/tooling/maven-wrapper/codestart.yml", "diffHunk": "@@ -8,10 +8,13 @@ language:\n         wrapper-version: 0.5.6\n     shared-data:\n       buildtool:\n+        tool: maven\n+        wrapper: true", "originalCommit": "4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgxOTI3MA==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r503819270", "bodyText": "I think those tests would fit better in QuarkusCodestartGenerationTest, QuarkusCodestartRunIT is there to run the generated codestarts..", "author": "ia3andy", "createdAt": "2020-10-13T09:51:22Z", "path": "integration-tests/devtools/src/test/java/io/quarkus/devtools/codestarts/QuarkusCodestartRunIT.java", "diffHunk": "@@ -93,6 +94,49 @@ public void generateAzureFunctionsHttpExampleProjectRun() throws Exception {\n                 Collections.emptyMap());\n     }\n \n+    @Test\n+    public void generateGradleWrapperGithubAction() throws Exception {", "originalCommit": "4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgyMDIxOA==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r503820218", "bodyText": "You need to also add build-ci-cmd and build-ci-args to the devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/core/buildtool/gradle-kotlin-dsl/codestart.yml codestart", "author": "ia3andy", "createdAt": "2020-10-13T09:52:57Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/core/buildtool/gradle/codestart.yml", "diffHunk": "@@ -22,7 +24,8 @@ language:\n           package-uberjar: gradle quarkusBuild --uber-jar\n           package-native: gradle build -Dquarkus.package.type=native\n           package-native-container: gradle build -Dquarkus.package.type=native -Dquarkus.native.container-build=true\n-          build-ci: gradle build\n+          build-ci-cmd: gradle", "originalCommit": "4cf3a7f1096786ebf395e1f3d44803c73ae9574d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "647a3e0e2bbf3bc4bdf34122c937a0b254ff7ecf", "url": "https://github.com/quarkusio/quarkus/commit/647a3e0e2bbf3bc4bdf34122c937a0b254ff7ecf", "message": "Externaliza gradle/maven command", "committedDate": "2020-10-13T19:36:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4OTQzNg==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r504489436", "bodyText": "@glefloch why keeping args for this one only?", "author": "ia3andy", "createdAt": "2020-10-14T08:19:14Z", "path": "devtools/platform-descriptor-json/src/main/resources/codestarts/quarkus/core/buildtool/gradle-kotlin-dsl/codestart.yml", "diffHunk": "@@ -14,15 +14,16 @@ language:\n           id: io.quarkus\n       buildtool:\n         build-dir: build\n+        cli: gradle\n         guide: https://quarkus.io/guides/gradle-tooling\n         guide-native: https://quarkus.io/guides/gradle-tooling#building-a-native-executable\n         cmd:\n-          dev: gradle quarkusDev\n-          package: gradle quarkusBuild\n-          package-uberjar: gradle quarkusBuild --uber-jar\n-          package-native: gradle build -Dquarkus.package.type=native\n-          package-native-container: gradle build -Dquarkus.package.type=native -Dquarkus.native.container-build=true\n-          build-ci: gradle build\n+          dev: quarkusDev\n+          package: quarkusBuild\n+          package-uberjar: quarkusBuild --uber-jar\n+          package-native: build -Dquarkus.package.type=native\n+          package-native-container: build -Dquarkus.package.type=native -Dquarkus.native.container-build=true\n+          build-ci-args: build", "originalCommit": "647a3e0e2bbf3bc4bdf34122c937a0b254ff7ecf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDUwMTEwNA==", "url": "https://github.com/quarkusio/quarkus/pull/12610#discussion_r504501104", "bodyText": "yes you are right, I removed it.", "author": "glefloch", "createdAt": "2020-10-14T08:37:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ4OTQzNg=="}], "type": "inlineReview"}, {"oid": "97663c6112c56cbba6db7127bf83caba74b0e746", "url": "https://github.com/quarkusio/quarkus/commit/97663c6112c56cbba6db7127bf83caba74b0e746", "message": "Externaliza gradle/maven command", "committedDate": "2020-10-14T08:33:39Z", "type": "forcePushed"}, {"oid": "de44915394bc0ee2db23769a5a668cb77958fb7e", "url": "https://github.com/quarkusio/quarkus/commit/de44915394bc0ee2db23769a5a668cb77958fb7e", "message": "Externaliza gradle/maven command", "committedDate": "2020-10-14T09:59:31Z", "type": "forcePushed"}, {"oid": "a917d81c5fd6f4aeb58052045a90b0e214eebc10", "url": "https://github.com/quarkusio/quarkus/commit/a917d81c5fd6f4aeb58052045a90b0e214eebc10", "message": "Externaliza gradle/maven command", "committedDate": "2020-10-14T16:50:37Z", "type": "commit"}, {"oid": "a917d81c5fd6f4aeb58052045a90b0e214eebc10", "url": "https://github.com/quarkusio/quarkus/commit/a917d81c5fd6f4aeb58052045a90b0e214eebc10", "message": "Externaliza gradle/maven command", "committedDate": "2020-10-14T16:50:37Z", "type": "forcePushed"}]}