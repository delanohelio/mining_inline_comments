{"pr_number": 13361, "pr_title": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default", "pr_createdAt": "2020-11-18T14:17:45Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13361", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEzOTE3Mg==", "url": "https://github.com/quarkusio/quarkus/pull/13361#discussion_r526139172", "bodyText": "Shoudn't this file be inside src/test/resources instead ?", "author": "loicmathieu", "createdAt": "2020-11-18T14:40:48Z", "path": "extensions/jackson/deployment/src/main/resources/application-fail-on-unknown-properties.properties", "diffHunk": "@@ -0,0 +1 @@\n+quarkus.jackson.fail-on-unknown-properties=true", "originalCommit": "430d9dadae542e39e2c9199efa36c913fd33cd75", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE1MDUyMQ==", "url": "https://github.com/quarkusio/quarkus/pull/13361#discussion_r526150521", "bodyText": "Ah, yes sure.", "author": "gsmet", "createdAt": "2020-11-18T14:55:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEzOTE3Mg=="}], "type": "inlineReview"}, {"oid": "888157a7d239f3ebf6623ca8ede4801207c59a57", "url": "https://github.com/quarkusio/quarkus/commit/888157a7d239f3ebf6623ca8ede4801207c59a57", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior.", "committedDate": "2020-11-18T14:58:11Z", "type": "forcePushed"}, {"oid": "1ab6f061da5aafa3adf311f2e6d8d235a2ba2dd0", "url": "https://github.com/quarkusio/quarkus/commit/1ab6f061da5aafa3adf311f2e6d8d235a2ba2dd0", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior.", "committedDate": "2020-11-19T18:01:10Z", "type": "forcePushed"}, {"oid": "08fe4a55ffbce87a3aa89769c92b75b5f740b891", "url": "https://github.com/quarkusio/quarkus/commit/08fe4a55ffbce87a3aa89769c92b75b5f740b891", "message": "Move ObjectMapperProducer to runtime package as it's not API", "committedDate": "2020-11-22T18:13:46Z", "type": "commit"}, {"oid": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a", "url": "https://github.com/quarkusio/quarkus/commit/ca37045a393cd6f5fcbb43cdaf256b032c588f9a", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior.", "committedDate": "2020-11-22T18:13:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODYxMTIzMw==", "url": "https://github.com/quarkusio/quarkus/pull/13361#discussion_r528611233", "bodyText": "Good idea to have this first, as it allows users to override the behavior with their own customizers if need be", "author": "geoand", "createdAt": "2020-11-23T10:43:16Z", "path": "extensions/jackson/runtime/src/main/java/io/quarkus/jackson/runtime/ObjectMapperProducer.java", "diffHunk": "@@ -9,18 +9,25 @@\n import javax.enterprise.inject.Produces;\n import javax.inject.Singleton;\n \n+import com.fasterxml.jackson.databind.DeserializationFeature;\n import com.fasterxml.jackson.databind.ObjectMapper;\n \n import io.quarkus.arc.DefaultBean;\n+import io.quarkus.jackson.ObjectMapperCustomizer;\n \n @ApplicationScoped\n public class ObjectMapperProducer {\n \n     @DefaultBean\n     @Singleton\n     @Produces\n-    public ObjectMapper objectMapper(Instance<ObjectMapperCustomizer> customizers) {\n+    public ObjectMapper objectMapper(Instance<ObjectMapperCustomizer> customizers,\n+            JacksonConfigSupport jacksonConfigSupport) {\n         ObjectMapper objectMapper = new ObjectMapper();\n+        if (!jacksonConfigSupport.isFailOnUnknownProperties()) {", "originalCommit": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODYxMjQzMw==", "url": "https://github.com/quarkusio/quarkus/pull/13361#discussion_r528612433", "bodyText": "You might want to add a note that this only works for the ObjectMapper configured by Quarkus and which they obtain via CDI (or use implicitly via RESTEasy etc).\nI know it should be evident, but I am sure it might come as a surprise to some users.", "author": "geoand", "createdAt": "2020-11-23T10:45:17Z", "path": "docs/src/main/asciidoc/rest-json.adoc", "diffHunk": "@@ -186,6 +186,11 @@ It will allow to narrow down the number of JAX-RS providers (which can be seen a\n \n ==== Jackson\n \n+In Quarkus, Jackson is configured to ignore the unknown properties (by disabling the `DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES` feature).", "originalCommit": "ca37045a393cd6f5fcbb43cdaf256b032c588f9a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "542cb505b37172c9c9af233412ed748ea871d481", "url": "https://github.com/quarkusio/quarkus/commit/542cb505b37172c9c9af233412ed748ea871d481", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior.", "committedDate": "2020-11-23T11:13:53Z", "type": "commit"}, {"oid": "542cb505b37172c9c9af233412ed748ea871d481", "url": "https://github.com/quarkusio/quarkus/commit/542cb505b37172c9c9af233412ed748ea871d481", "message": "Disable Jackson's FAIL_ON_UNKNOWN_PROPERTIES by default\n\nAlso provide a way to go back to the previous behavior.", "committedDate": "2020-11-23T11:13:53Z", "type": "forcePushed"}]}