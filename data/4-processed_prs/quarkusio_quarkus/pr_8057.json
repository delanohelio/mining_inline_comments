{"pr_number": 8057, "pr_title": "fix: Avoid logging a WARN message about having duplicates persistence-unit during testing", "pr_createdAt": "2020-03-22T00:39:05Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/8057", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA0NjYwNw==", "url": "https://github.com/quarkusio/quarkus/pull/8057#discussion_r396046607", "bodyText": "This should probably be a LinkedHashSet for consistent ordering", "author": "stuartwdouglas", "createdAt": "2020-03-22T02:05:05Z", "path": "independent-projects/bootstrap/core/src/main/java/io/quarkus/bootstrap/classloading/QuarkusClassLoader.java", "diffHunk": "@@ -124,7 +124,7 @@ public void reset(Map<String, byte[]> resources,\n         //for resources banned means that we don't delegate to the parent, as there can be multiple resources\n         //for single resources we still respect this\n         boolean banned = state.bannedResources.contains(name);\n-        List<URL> resources = new ArrayList<>();\n+        Set<URL> resources = new HashSet<>();", "originalCommit": "bc583ba215e125308eb1a791a5f692666d895363", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9d929196d49397679d97ff98fa11b7ef6fce6e60", "url": "https://github.com/quarkusio/quarkus/commit/9d929196d49397679d97ff98fa11b7ef6fce6e60", "message": "fix: Avoid logging a WARN message about having duplicates persistence-unit during testing\n\nWhen running tests of an app with a `META-INF/persistence` file, I noticed the following\nwarning message:\n\n```\n2020-03-22 01:07:12,791 WARN  [org.hib.jpa.boo.int.PersistenceXmlParser] (build-22) HHH015018: Encountered multiple persistence-unit stanzas defining same name [templatePU]; persistence-unit names must be unique\n```\n\nThe warning above is only observed in `test` profile and is deceiving since the app did not have mutliple persistence units.\n\nFix the issue by ensuring that no duplicates resources are loaded.\n\nThe error can be reproduced by simply running the tests (JVM mode) in the `\u00ecntegration-tests/main` module.", "committedDate": "2020-03-22T07:25:46Z", "type": "commit"}, {"oid": "9d929196d49397679d97ff98fa11b7ef6fce6e60", "url": "https://github.com/quarkusio/quarkus/commit/9d929196d49397679d97ff98fa11b7ef6fce6e60", "message": "fix: Avoid logging a WARN message about having duplicates persistence-unit during testing\n\nWhen running tests of an app with a `META-INF/persistence` file, I noticed the following\nwarning message:\n\n```\n2020-03-22 01:07:12,791 WARN  [org.hib.jpa.boo.int.PersistenceXmlParser] (build-22) HHH015018: Encountered multiple persistence-unit stanzas defining same name [templatePU]; persistence-unit names must be unique\n```\n\nThe warning above is only observed in `test` profile and is deceiving since the app did not have mutliple persistence units.\n\nFix the issue by ensuring that no duplicates resources are loaded.\n\nThe error can be reproduced by simply running the tests (JVM mode) in the `\u00ecntegration-tests/main` module.", "committedDate": "2020-03-22T07:25:46Z", "type": "forcePushed"}]}