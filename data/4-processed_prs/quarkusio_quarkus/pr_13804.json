{"pr_number": 13804, "pr_title": "Add a note on MongoDB Panache doc about query on same field", "pr_createdAt": "2020-12-10T12:04:57Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13804", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1MjExNQ==", "url": "https://github.com/quarkusio/quarkus/pull/13804#discussion_r546652115", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            using multiple times the same field on a query is not allowed using PanacheQL as is it would generate an invalid JSON\n          \n          \n            \n            using the same field multiple times in a query is not allowed using PanacheQL as it would generate an invalid JSON", "author": "gsmet", "createdAt": "2020-12-21T11:22:43Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -513,6 +513,10 @@ Here are some query examples:\n - `lastname is not null` will be mapped to `{'lastname':{'$exists': true}}`\n - `status in ?1` will be mapped to `{'status':{$in: [?1]}}`\n \n+WARNING: MongoDB queries must be valid JSON documents,\n+using multiple times the same field on a query is not allowed using PanacheQL as is it would generate an invalid JSON", "originalCommit": "5a1a7d0cba01a37da68408059e0d4c35ebc6e319", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1MjcwMQ==", "url": "https://github.com/quarkusio/quarkus/pull/13804#discussion_r546652701", "bodyText": "Can we avoid referencing an issue? Better put an example in the doc of what's not valid.\nBtw, I think it's a pretty annoying limitation given it can be a very common use case.", "author": "gsmet", "createdAt": "2020-12-21T11:24:05Z", "path": "docs/src/main/asciidoc/mongodb-panache.adoc", "diffHunk": "@@ -513,6 +513,10 @@ Here are some query examples:\n - `lastname is not null` will be mapped to `{'lastname':{'$exists': true}}`\n - `status in ?1` will be mapped to `{'status':{$in: [?1]}}`\n \n+WARNING: MongoDB queries must be valid JSON documents,\n+using multiple times the same field on a query is not allowed using PanacheQL as is it would generate an invalid JSON\n+(see link:https://github.com/quarkusio/quarkus/issues/12086[this issue on github]).", "originalCommit": "5a1a7d0cba01a37da68408059e0d4c35ebc6e319", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NTE0OQ==", "url": "https://github.com/quarkusio/quarkus/pull/13804#discussion_r546655149", "bodyText": "Btw, I think it's a pretty annoying limitation given it can be a very common use case.\n\nThat's why there is an open issue about it, so people can give feedback on it and maybe work on it. I think it's important to link to the openned issue as we could gather feedback about this issue and decide if we need to work on it (this would not be easy).", "author": "loicmathieu", "createdAt": "2020-12-21T11:29:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1MjcwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NjM1Nw==", "url": "https://github.com/quarkusio/quarkus/pull/13804#discussion_r546656357", "bodyText": "I can off course add an example but I think the issue still needs to be linked here.", "author": "loicmathieu", "createdAt": "2020-12-21T11:32:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1MjcwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTg5NjAzMQ==", "url": "https://github.com/quarkusio/quarkus/pull/13804#discussion_r551896031", "bodyText": "@gsmet what your takes on my previous comment ?", "author": "loicmathieu", "createdAt": "2021-01-05T12:15:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1MjcwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1Mjg0MQ==", "url": "https://github.com/quarkusio/quarkus/pull/13804#discussion_r546652841", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * using multiple times the same field on a query is not allowed using PanacheQL as is it would generate an invalid JSON\n          \n          \n            \n             * using the same field multiple times in a query is not allowed using PanacheQL as it would generate an invalid JSON", "author": "gsmet", "createdAt": "2020-12-21T11:24:28Z", "path": "extensions/panache/mongodb-panache/runtime/src/main/java/io/quarkus/mongodb/panache/package-info.java", "diffHunk": "@@ -85,6 +85,11 @@\n  * </ul>\n  * </p>\n  * <p>\n+ * <b>WARNING</b>: MongoDB queries must be valid JSON documents,\n+ * using multiple times the same field on a query is not allowed using PanacheQL as is it would generate an invalid JSON", "originalCommit": "5a1a7d0cba01a37da68408059e0d4c35ebc6e319", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1MzAwMw==", "url": "https://github.com/quarkusio/quarkus/pull/13804#discussion_r546653003", "bodyText": "Same comment here.", "author": "gsmet", "createdAt": "2020-12-21T11:24:49Z", "path": "extensions/panache/mongodb-panache/runtime/src/main/java/io/quarkus/mongodb/panache/package-info.java", "diffHunk": "@@ -85,6 +85,11 @@\n  * </ul>\n  * </p>\n  * <p>\n+ * <b>WARNING</b>: MongoDB queries must be valid JSON documents,\n+ * using multiple times the same field on a query is not allowed using PanacheQL as is it would generate an invalid JSON\n+ * (see this issue on github: https://github.com/quarkusio/quarkus/issues/12086).", "originalCommit": "5a1a7d0cba01a37da68408059e0d4c35ebc6e319", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "983192b8cc4574905812dac29a285609e93d3c3a", "url": "https://github.com/quarkusio/quarkus/commit/983192b8cc4574905812dac29a285609e93d3c3a", "message": "Add a note on MongoDB Panache doc about query on same field", "committedDate": "2020-12-21T11:31:55Z", "type": "commit"}, {"oid": "983192b8cc4574905812dac29a285609e93d3c3a", "url": "https://github.com/quarkusio/quarkus/commit/983192b8cc4574905812dac29a285609e93d3c3a", "message": "Add a note on MongoDB Panache doc about query on same field", "committedDate": "2020-12-21T11:31:55Z", "type": "forcePushed"}]}