{"pr_number": 6381, "pr_title": "Add Emitter usage to reactive messaging guides", "pr_createdAt": "2020-01-02T12:51:50Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6381", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjUwNTkzMg==", "url": "https://github.com/quarkusio/quarkus/pull/6381#discussion_r362505932", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Sometimes, you need to have an imperative way of sending messages.\n          \n          \n            \n            Sometimes you need to have an imperative way of sending messages.", "author": "geoand", "createdAt": "2020-01-02T15:09:53Z", "path": "docs/src/main/asciidoc/amqp.adoc", "diffHunk": "@@ -305,6 +305,42 @@ You can build the native executable with:\n ./mvnw package -Pnative\n ----\n \n+== Imperative usage\n+\n+Sometimes, you need to have an imperative way of sending messages.", "originalCommit": "d4c5b9de0414250c8a8fe4312b2eb531e43e4e4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjUwNjA0MA==", "url": "https://github.com/quarkusio/quarkus/pull/6381#discussion_r362506040", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For example, if you need to send a message to a stream, from inside a REST endpoint, when receiving a POST request.\n          \n          \n            \n            For example, if you need to send a message to a stream from inside a REST endpoint, when receiving a POST request.", "author": "geoand", "createdAt": "2020-01-02T15:10:10Z", "path": "docs/src/main/asciidoc/amqp.adoc", "diffHunk": "@@ -305,6 +305,42 @@ You can build the native executable with:\n ./mvnw package -Pnative\n ----\n \n+== Imperative usage\n+\n+Sometimes, you need to have an imperative way of sending messages.\n+\n+For example, if you need to send a message to a stream, from inside a REST endpoint, when receiving a POST request.", "originalCommit": "d4c5b9de0414250c8a8fe4312b2eb531e43e4e4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "750e3cfebc400bdc3f8defd842140997626ee525", "url": "https://github.com/quarkusio/quarkus/commit/750e3cfebc400bdc3f8defd842140997626ee525", "message": "Add Emitter usage to reactive messaging guides", "committedDate": "2020-01-02T15:43:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjUyMjA0Nw==", "url": "https://github.com/quarkusio/quarkus/pull/6381#discussion_r362522047", "bodyText": "Sorry, one more change if I may:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For example, if you need to send a message to a stream from inside a REST endpoint, when receiving a POST request.\n          \n          \n            \n            For example, if you need to send a message to a stream from inside a REST endpoint when receiving a POST request.", "author": "geoand", "createdAt": "2020-01-02T15:52:05Z", "path": "docs/src/main/asciidoc/amqp.adoc", "diffHunk": "@@ -305,6 +305,42 @@ You can build the native executable with:\n ./mvnw package -Pnative\n ----\n \n+== Imperative usage\n+\n+Sometimes you need to have an imperative way of sending messages.\n+\n+For example, if you need to send a message to a stream from inside a REST endpoint, when receiving a POST request.", "originalCommit": "750e3cfebc400bdc3f8defd842140997626ee525", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjUyMjE0NQ==", "url": "https://github.com/quarkusio/quarkus/pull/6381#discussion_r362522145", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In addition, you can use `@OnOverflow` to configure back-pressure strategy.\n          \n          \n            \n            In addition, you can use `@OnOverflow` to configure a back-pressure strategy.", "author": "geoand", "createdAt": "2020-01-02T15:52:20Z", "path": "docs/src/main/asciidoc/amqp.adoc", "diffHunk": "@@ -305,6 +305,42 @@ You can build the native executable with:\n ./mvnw package -Pnative\n ----\n \n+== Imperative usage\n+\n+Sometimes you need to have an imperative way of sending messages.\n+\n+For example, if you need to send a message to a stream from inside a REST endpoint, when receiving a POST request.\n+In this case, you cannot use `@Output` because your method has parameters.\n+\n+For this, you can use an `Emitter`.\n+\n+[source, java]\n+----\n+import io.smallrye.reactive.messaging.annotations.Channel;\n+import io.smallrye.reactive.messaging.annotations.Emitter;\n+\n+import javax.inject.Inject;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.Consumes;\n+import javax.ws.rs.core.MediaType;\n+\n+@Path(\"/prices\")\n+public class PriceResource {\n+\n+    @Inject @Channel(\"price-create\") Emitter<Double> priceEmitter;\n+\n+    @POST\n+    @Consumes(MediaType.TEXT_PLAIN)\n+    public void addPrice(Double price) {\n+        priceEmitter.send(price);\n+    }\n+}\n+----\n+\n+NOTE: The `Emitter` configuration is done the same way as the other stream configuration used by `@Incoming` and `@Outgoing`.\n+In addition, you can use `@OnOverflow` to configure back-pressure strategy.", "originalCommit": "750e3cfebc400bdc3f8defd842140997626ee525", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7e2e5bce9ec7202488042a5f445f6bf71b697b34", "url": "https://github.com/quarkusio/quarkus/commit/7e2e5bce9ec7202488042a5f445f6bf71b697b34", "message": "Apply suggestions from code review", "committedDate": "2020-01-02T16:31:45Z", "type": "forcePushed"}, {"oid": "7a7c0f08505e1a405a039b78dfda5f93db5256bd", "url": "https://github.com/quarkusio/quarkus/commit/7a7c0f08505e1a405a039b78dfda5f93db5256bd", "message": "Add Emitter usage to reactive messaging guides", "committedDate": "2020-01-02T16:33:15Z", "type": "commit"}, {"oid": "7a7c0f08505e1a405a039b78dfda5f93db5256bd", "url": "https://github.com/quarkusio/quarkus/commit/7a7c0f08505e1a405a039b78dfda5f93db5256bd", "message": "Add Emitter usage to reactive messaging guides", "committedDate": "2020-01-02T16:33:15Z", "type": "forcePushed"}]}