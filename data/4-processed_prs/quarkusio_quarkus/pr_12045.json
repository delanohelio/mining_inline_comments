{"pr_number": 12045, "pr_title": "Register String constructors for reflection", "pr_createdAt": "2020-09-11T10:45:40Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/12045", "timeline": [{"oid": "ec0c7aaa39d758c31db1ff2f756710f4f1e42f18", "url": "https://github.com/quarkusio/quarkus/commit/ec0c7aaa39d758c31db1ff2f756710f4f1e42f18", "message": "Register String constructors for reflection\n\nFixes #10873", "committedDate": "2020-09-11T10:45:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk4MzgyMQ==", "url": "https://github.com/quarkusio/quarkus/pull/12045#discussion_r486983821", "bodyText": "Can we add the corresponding link to the Yasson issue too so that it is easier to quickly check it ?", "author": "machi1990", "createdAt": "2020-09-11T11:29:38Z", "path": "extensions/jsonb/deployment/src/main/java/io/quarkus/jsonb/deployment/JsonbProcessor.java", "diffHunk": "@@ -90,6 +90,10 @@ void build(BuildProducer<ReflectiveClassBuildItem> reflectiveClass,\n         for (AnnotationInstance deserializeInstance : index.getAnnotations(JSONB_TYPE_DESERIALIZER)) {\n             registerInstance(reflectiveClass, deserializeInstance);\n         }\n+\n+        // register String constructors for reflection as they may not have been properly registered by default\n+        // see https://github.com/quarkusio/quarkus/issues/10873", "originalCommit": "ec0c7aaa39d758c31db1ff2f756710f4f1e42f18", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk5MTM1Ng==", "url": "https://github.com/quarkusio/quarkus/pull/12045#discussion_r486991356", "bodyText": "There is no corresponding fix on Yasson.\nIn fact, we don't know why it didn't works so it's difficult to provides a fix on Yasson because Optionnal seems to be correctly handled there.", "author": "loicmathieu", "createdAt": "2020-09-11T11:46:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk4MzgyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk5MzYzNQ==", "url": "https://github.com/quarkusio/quarkus/pull/12045#discussion_r486993635", "bodyText": "Yes, I understand that this is not fixed yet in Yasson. What I meant is to add the \"corresponding upstream issue\" in the comment.", "author": "machi1990", "createdAt": "2020-09-11T11:51:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk4MzgyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAwOTQ0MQ==", "url": "https://github.com/quarkusio/quarkus/pull/12045#discussion_r487009441", "bodyText": "Sorry, I said fix instead of issue.\nThere is no corresponding issue upstream.", "author": "loicmathieu", "createdAt": "2020-09-11T12:24:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk4MzgyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxMTE5OQ==", "url": "https://github.com/quarkusio/quarkus/pull/12045#discussion_r487011199", "bodyText": "Ah no worries.\nI was hoping that there is an upstream issue for better support of Optional<String>. It makes tracking easier but I suppose we can live with what we have.", "author": "machi1990", "createdAt": "2020-09-11T12:28:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk4MzgyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAxOTUyNQ==", "url": "https://github.com/quarkusio/quarkus/pull/12045#discussion_r487019525", "bodyText": "There is no corresponding issue upstream.\n\nWell, shouldn't we create one and add a link pointing to it?", "author": "gsmet", "createdAt": "2020-09-11T12:44:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk4MzgyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzAyNzczNg==", "url": "https://github.com/quarkusio/quarkus/pull/12045#discussion_r487027736", "bodyText": "Already merge this one.\nI'll copy your comment to the original issue so we can continue working on the root cause inside it.", "author": "loicmathieu", "createdAt": "2020-09-11T12:59:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk4MzgyMQ=="}], "type": "inlineReview"}]}