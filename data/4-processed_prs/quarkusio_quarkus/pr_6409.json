{"pr_number": 6409, "pr_title": "Improve the Neo4j guide", "pr_createdAt": "2020-01-05T18:33:49Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/6409", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzExMjQxNA==", "url": "https://github.com/quarkusio/quarkus/pull/6409#discussion_r363112414", "bodyText": "There's still a note above the warning you removed which mentions that it is preview.", "author": "gunnarmorling", "createdAt": "2020-01-05T19:33:51Z", "path": "docs/src/main/asciidoc/neo4j.adoc", "diffHunk": "@@ -4,10 +4,9 @@ and pull requests should be submitted there:\n https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n ////\n = Quarkus - Neo4j\n-:neo4j_version: 3.5.13\n+:neo4j_version: 4.0.0\n \n include::./attributes.adoc[]\n-:extension-status: preview", "originalCommit": "4cdc3a910b52e67cbff9f2bd1818bf3b6ada818d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzExMjcyMg==", "url": "https://github.com/quarkusio/quarkus/pull/6409#discussion_r363112722", "bodyText": "Not related to the change itself, but rather to the entire method: this is 22 lines for a single get-by-id call :(\nI understand it's all async and non-blocking and so on, but e.g. in comparison to Panache where this would be one line essentially, the signal-to-noise ratio seems not great. Is there any way for simplifying this? Perhaps first show imperative, too, before going to async/reactive?", "author": "gunnarmorling", "createdAt": "2020-01-05T19:39:13Z", "path": "docs/src/main/asciidoc/neo4j.adoc", "diffHunk": "@@ -321,10 +314,10 @@ We also add some exception handling, in case the resource is called with an inva\n public CompletionStage<Response> getSingle(@PathParam(\"id\") Long id) {\n     AsyncSession session = driver.asyncSession();\n     return session\n-        .readTransactionAsync(tx ->", "originalCommit": "4cdc3a910b52e67cbff9f2bd1818bf3b6ada818d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEyMjM5OQ==", "url": "https://github.com/quarkusio/quarkus/pull/6409#discussion_r363122399", "bodyText": "Comparing Panache with the raw Driver is like comparing access via Panache to plain JDBC driver. I don\u2019t see the point here.", "author": "michael-simons", "createdAt": "2020-01-05T22:43:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzExMjcyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE3MjEyMw==", "url": "https://github.com/quarkusio/quarkus/pull/6409#discussion_r363172123", "bodyText": "Good point on the comparison, it's not 100% fair. Still the amount of code for this piece of functionality is overwhelming. Anyways, seems my comment isn't really actionable right now, so feel free to ignore it.", "author": "gunnarmorling", "createdAt": "2020-01-06T06:28:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzExMjcyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MjMwMw==", "url": "https://github.com/quarkusio/quarkus/pull/6409#discussion_r363182303", "bodyText": "We have detailed docs on this: https://neo4j.com/docs/driver-manual/4.0-preview/session-api/ This is about choice.\nActually, most Neo4j users that use Neo4j-OGM (our object mapper) keep on asking how to work around that object mapping. So we think it's in the interest of our (potential) users to make access to the driver as easy as possible and than let the users chose: Either just using imperative (I think that will be good enough in the vast majority of use cases), using an asynchronous connection (available on all Neo4j versions supported by the driver) or going reactive (available on the Neo4j 4.0 and the best choice in a reactive world based on Quarkus).", "author": "michael-simons", "createdAt": "2020-01-06T07:23:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzExMjcyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MDM3MA==", "url": "https://github.com/quarkusio/quarkus/pull/6409#discussion_r363180370", "bodyText": "I would keep the extension as preview for now until we get sufficient feedback.\nAgreed to remove the warning below.", "author": "gsmet", "createdAt": "2020-01-06T07:13:06Z", "path": "docs/src/main/asciidoc/neo4j.adoc", "diffHunk": "@@ -4,10 +4,9 @@ and pull requests should be submitted there:\n https://github.com/quarkusio/quarkus/tree/master/docs/src/main/asciidoc\n ////\n = Quarkus - Neo4j\n-:neo4j_version: 3.5.13\n+:neo4j_version: 4.0.0\n \n include::./attributes.adoc[]\n-:extension-status: preview", "originalCommit": "4cdc3a910b52e67cbff9f2bd1818bf3b6ada818d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MjM4Ng==", "url": "https://github.com/quarkusio/quarkus/pull/6409#discussion_r363182386", "bodyText": "Agreed and added back in.", "author": "michael-simons", "createdAt": "2020-01-06T07:23:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzE4MDM3MA=="}], "type": "inlineReview"}, {"oid": "fa2772ff73fca3e61c3cb621c50f891de7c771a2", "url": "https://github.com/quarkusio/quarkus/commit/fa2772ff73fca3e61c3cb621c50f891de7c771a2", "message": "Improve the Neo4j guide.\n\nThe Neo4j driver has been updated to 4.0.0 final and Neo4j 4.0 can be\nused from Docker, the preview flag can now be removed.\n\nThe final driver revealed some errors in the existing guide:\n\nThe reading of the transactional result of a transactional function\nneeds to happen inside the same transaction.\nTherefor the guide needs a fix so that the composition of the future\nextracting the node happens in the transaction, not outside.", "committedDate": "2020-01-06T08:13:23Z", "type": "commit"}, {"oid": "fa2772ff73fca3e61c3cb621c50f891de7c771a2", "url": "https://github.com/quarkusio/quarkus/commit/fa2772ff73fca3e61c3cb621c50f891de7c771a2", "message": "Improve the Neo4j guide.\n\nThe Neo4j driver has been updated to 4.0.0 final and Neo4j 4.0 can be\nused from Docker, the preview flag can now be removed.\n\nThe final driver revealed some errors in the existing guide:\n\nThe reading of the transactional result of a transactional function\nneeds to happen inside the same transaction.\nTherefor the guide needs a fix so that the composition of the future\nextracting the node happens in the transaction, not outside.", "committedDate": "2020-01-06T08:13:23Z", "type": "forcePushed"}]}