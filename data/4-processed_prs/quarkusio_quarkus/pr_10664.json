{"pr_number": 10664, "pr_title": "Bump jaeger version, to eliminate vulnerabilities", "pr_createdAt": "2020-07-12T22:19:07Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/10664", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzg2Ng==", "url": "https://github.com/quarkusio/quarkus/pull/10664#discussion_r453553866", "bodyText": "Usually, we put the exclusion here: https://github.com/quarkusio/quarkus/blob/master/extensions/jaeger/runtime/pom.xml#L28 and we also add the corresponding jakarta dependency as that's what we want to use now.", "author": "gsmet", "createdAt": "2020-07-13T10:30:45Z", "path": "bom/runtime/pom.xml", "diffHunk": "@@ -2023,6 +2023,13 @@\n                 <groupId>io.jaegertracing</groupId>\n                 <artifactId>jaeger-thrift</artifactId>\n                 <version>${jaeger.version}</version>\n+                <exclusions>\n+                    <!-- fixme, jaeger-thrift 3.43.3 pulls in a banned version of annotation-api, so we exclude for now-->\n+                    <exclusion>\n+                        <groupId>javax.annotation</groupId>\n+                        <artifactId>javax.annotation-api</artifactId>\n+                    </exclusion>", "originalCommit": "ff6d06c101d06ba6646ffea2a751ed92688c0380", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg3MDQwNA==", "url": "https://github.com/quarkusio/quarkus/pull/10664#discussion_r453870404", "bodyText": "I've moved the exclusion, but it doesn't really make sense to force the jakarta dependency as it is a transitive dependency sometime inside the jaeger-thrift dep tree.\nIs that ok?", "author": "mejlholm", "createdAt": "2020-07-13T19:09:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg3MTA1OA==", "url": "https://github.com/quarkusio/quarkus/pull/10664#discussion_r454871058", "bodyText": "Not sure I follow you.\nIf it requires the annotation-api jar then we'd better have it around so we would need the jakarta one instead of the javax one as that's the ones we use.\nWhy do you think it wouldn't be necessary?", "author": "gsmet", "createdAt": "2020-07-15T08:10:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkyNzM0NA==", "url": "https://github.com/quarkusio/quarkus/pull/10664#discussion_r454927344", "bodyText": "Not a big issue and I can also add it if you prefer.\nMy reasoning is that if the dependency changes/is removed inside jaeger-thrift, then it will still be required by this pom - and it won't really be discovered that it can be removed. Putting this kind of transitive dependencies messes with the dependencies graph and causes the number of dependencies to grow larger than it needs to over time.\nFor the dependency in question, it probably won't make a difference, the jakarta api-annotation lib is pull in through a lot of other places, so it isn't likely to be removed anytime soon.", "author": "mejlholm", "createdAt": "2020-07-15T09:44:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTY0MjM0MA==", "url": "https://github.com/quarkusio/quarkus/pull/10664#discussion_r455642340", "bodyText": "So I merged it. But your reasoning is flawed as soon as the library itself really needs the dependency.\nNot adding it only works if it's not necessary or if something else brings it. If that something else stops bringing it, something will get broken.\nAnyway, not a big deal in this case, I agree.", "author": "gsmet", "createdAt": "2020-07-16T09:12:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTcwNzM2MQ==", "url": "https://github.com/quarkusio/quarkus/pull/10664#discussion_r455707361", "bodyText": "Well, by that logic, lets add it anyways.\nNew pull request here:\n#10773", "author": "mejlholm", "createdAt": "2020-07-16T11:08:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzg2Ng=="}], "type": "inlineReview"}, {"oid": "a064cd4870743c39a6bb5a1fd1f3048d0840a826", "url": "https://github.com/quarkusio/quarkus/commit/a064cd4870743c39a6bb5a1fd1f3048d0840a826", "message": "Bump jaeger version, to eliminate vulnerabilities.\n\nExclude annotation-api 1.3.2, which has been banned, but is pulled in through thrift 0.13.", "committedDate": "2020-07-14T07:46:34Z", "type": "commit"}]}