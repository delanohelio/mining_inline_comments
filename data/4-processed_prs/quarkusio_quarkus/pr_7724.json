{"pr_number": 7724, "pr_title": "fix how defaultMode in Kubernetes volumes is parsed", "pr_createdAt": "2020-03-10T10:56:52Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/7724", "timeline": [{"oid": "77e63a59f289a12125f737c7353a677bf3190f37", "url": "https://github.com/quarkusio/quarkus/commit/77e63a59f289a12125f737c7353a677bf3190f37", "message": "fix how defaultMode in Kubernetes volumes is parsed\n\nPreviously, the `defaultMode` config property of some Kubernetes\nvolumes (ConfigMap, secret) was always treated as a decimal number,\neven though octal number is a common format (and we actually used\nan octal number when specifying the default value!).\n\nThis commit changes the type of the config property to `String`,\nwhich is later parsed to an `int` when calling the Dekorate API.\nAt that time, if the string begins with `0`, it's parsed as octal,\notherwise as decimal.", "committedDate": "2020-03-10T10:52:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIzNTYyNg==", "url": "https://github.com/quarkusio/quarkus/pull/7724#discussion_r390235626", "bodyText": "I don't know why, but this annotation is present in similar classes (ConfigMapVolumeConfig, PvcVolumeConfig), but it wasn't here. I added it, but I don't know what I'm doing :-)", "author": "Ladicek", "createdAt": "2020-03-10T10:57:57Z", "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/SecretVolumeConfig.java", "diffHunk": "@@ -1,21 +1,25 @@\n package io.quarkus.kubernetes.deployment;\n \n+import io.quarkus.runtime.annotations.ConfigGroup;\n import io.quarkus.runtime.annotations.ConfigItem;\n \n+@ConfigGroup", "originalCommit": "77e63a59f289a12125f737c7353a677bf3190f37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIzOTI0Mw==", "url": "https://github.com/quarkusio/quarkus/pull/7724#discussion_r390239243", "bodyText": "It's correct, nice catch!", "author": "geoand", "createdAt": "2020-03-10T11:04:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIzNTYyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIzNTY5Nw==", "url": "https://github.com/quarkusio/quarkus/pull/7724#discussion_r390235697", "bodyText": "Same here.", "author": "Ladicek", "createdAt": "2020-03-10T10:58:04Z", "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/SecretVolumeConfig.java", "diffHunk": "@@ -1,21 +1,25 @@\n package io.quarkus.kubernetes.deployment;\n \n+import io.quarkus.runtime.annotations.ConfigGroup;\n import io.quarkus.runtime.annotations.ConfigItem;\n \n+@ConfigGroup\n public class SecretVolumeConfig {\n \n     /**\n      * The name of the secret to mount.\n      */\n+    @ConfigItem", "originalCommit": "77e63a59f289a12125f737c7353a677bf3190f37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NDc5MQ==", "url": "https://github.com/quarkusio/quarkus/pull/7724#discussion_r390244791", "bodyText": "Could someone really have a look to the generated documentation and see if we can use it?\nIf we have proper Quarkus config now, it will really be a big win.", "author": "gsmet", "createdAt": "2020-03-10T11:17:03Z", "path": "docs/src/main/asciidoc/kubernetes.adoc", "diffHunk": "@@ -464,15 +464,15 @@ Below you will find tables describing all available types.\n |====\n | Property        | Type    | Description | Default Value\n | config-map-name | String  |             |\n-| default-mode    | int     |             | 384\n+| default-mode    | int     |             | 0600\n | optional        | boolean |             | false\n |====\n \n .SecretVolume\n |====\n | Property     | Type    | Description | Default Value\n | secret-name  | String  |             |\n-| default-mode | int     |             | 384           \n+| default-mode | int     |             | 0600\n | optional     | boolean |             | false\n |====", "originalCommit": "77e63a59f289a12125f737c7353a677bf3190f37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NTAxOQ==", "url": "https://github.com/quarkusio/quarkus/pull/7724#discussion_r390245019", "bodyText": "@iocanel didn't you say you were going to look into it?", "author": "geoand", "createdAt": "2020-03-10T11:17:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NDc5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NTE2Ng==", "url": "https://github.com/quarkusio/quarkus/pull/7724#discussion_r390245166", "bodyText": "Maybe I will have a look and see how it goes.", "author": "gsmet", "createdAt": "2020-03-10T11:17:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NDc5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NjAxNw==", "url": "https://github.com/quarkusio/quarkus/pull/7724#discussion_r390246017", "bodyText": "BTW, one things that bugs me is that we have things like timeout-seconds in the doc.\nI don't know how they have been translated in Quarkus config but they should be Duration and named timeout without -seconds.\nThat's really something we want done before Final so either @iocanel can have a look or I will, just tell me.", "author": "gsmet", "createdAt": "2020-03-10T11:19:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NDc5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NzM4Mg==", "url": "https://github.com/quarkusio/quarkus/pull/7724#discussion_r390247382", "bodyText": "I will", "author": "iocanel", "createdAt": "2020-03-10T11:22:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NDc5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI1MTkyNQ==", "url": "https://github.com/quarkusio/quarkus/pull/7724#discussion_r390251925", "bodyText": "@iocanel feel free to ping me if you need some help or guidance on this one.", "author": "gsmet", "createdAt": "2020-03-10T11:32:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NDc5MQ=="}], "type": "inlineReview"}]}