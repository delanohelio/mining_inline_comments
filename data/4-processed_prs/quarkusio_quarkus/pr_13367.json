{"pr_number": 13367, "pr_title": "Support custom package in codestarts", "pr_createdAt": "2020-11-18T18:27:36Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/13367", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQwMDcxOA==", "url": "https://github.com/quarkusio/quarkus/pull/13367#discussion_r526400718", "bodyText": "minor thing but I would extract the \"org.acme\" and \"org/acme\" into a constant to make it more clear its a special \"marker\"", "author": "maxandersen", "createdAt": "2020-11-18T20:30:19Z", "path": "independent-projects/tools/codestarts/src/main/java/io/quarkus/devtools/codestarts/core/strategy/SmartPackageFileStrategyHandler.java", "diffHunk": "@@ -0,0 +1,48 @@\n+package io.quarkus.devtools.codestarts.core.strategy;\n+\n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import io.quarkus.devtools.codestarts.CodestartStructureException;\n+import io.quarkus.devtools.codestarts.core.reader.TargetFile;\n+import io.quarkus.devtools.codestarts.utils.NestedMaps;\n+\n+final class SmartPackageFileStrategyHandler implements CodestartFileStrategyHandler {\n+\n+    @Override\n+    public String name() {\n+        return \"smart-package\";\n+    }\n+\n+    @Override\n+    public void process(Path targetDirectory, String relativePath, List<TargetFile> codestartFiles, Map<String, Object> data)\n+            throws IOException {\n+        checkNotEmptyCodestartFiles(codestartFiles);\n+\n+        final Optional<String> optPackageName = NestedMaps.getValue(data, \"project.package-name\");\n+        Path targetPath;\n+        String content = codestartFiles.get(0).getContent();\n+        if (optPackageName.isPresent()) {\n+            final String packageName = optPackageName.get();\n+            final String packageNameAsDir = packageName.replace(\".\", \"/\");\n+            targetPath = targetDirectory.resolve(relativePath.replace(\"org/acme\", packageNameAsDir));\n+            content = content\n+                .replace(\"import org.acme\", \"import \" + packageName)", "originalCommit": "471a32dbfaada7199ef7cc0f7343a7fe1d801efb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjYzNTIzMQ==", "url": "https://github.com/quarkusio/quarkus/pull/13367#discussion_r526635231", "bodyText": "Sure, this is a draft still :)", "author": "ia3andy", "createdAt": "2020-11-19T07:04:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQwMDcxOA=="}], "type": "inlineReview"}, {"oid": "c93e08149bb0a5de356b5c7512e37e88be62a6e6", "url": "https://github.com/quarkusio/quarkus/commit/c93e08149bb0a5de356b5c7512e37e88be62a6e6", "message": "Support custom package in codestarts", "committedDate": "2020-11-19T08:00:14Z", "type": "forcePushed"}, {"oid": "16d9ba4e2a35c301876c1f7f01c34913ae895c22", "url": "https://github.com/quarkusio/quarkus/commit/16d9ba4e2a35c301876c1f7f01c34913ae895c22", "message": "Support custom package in codestarts", "committedDate": "2020-11-19T08:01:48Z", "type": "forcePushed"}, {"oid": "d2f682d528942b4024a22c8821e439cc8720e482", "url": "https://github.com/quarkusio/quarkus/commit/d2f682d528942b4024a22c8821e439cc8720e482", "message": "Support custom package in codestarts", "committedDate": "2020-11-19T10:44:18Z", "type": "forcePushed"}, {"oid": "a05baa7fff27bf2874a69ce253f864edd0de97af", "url": "https://github.com/quarkusio/quarkus/commit/a05baa7fff27bf2874a69ce253f864edd0de97af", "message": "Support custom package in codestarts", "committedDate": "2020-11-19T10:46:03Z", "type": "forcePushed"}, {"oid": "7159494c9dd65b2c423a49e3bacc265747ea1b57", "url": "https://github.com/quarkusio/quarkus/commit/7159494c9dd65b2c423a49e3bacc265747ea1b57", "message": "Support custom package in codestarts", "committedDate": "2020-11-19T11:56:30Z", "type": "forcePushed"}, {"oid": "f8d8113a05a47c963fc96e87e6965a3c67bf48f4", "url": "https://github.com/quarkusio/quarkus/commit/f8d8113a05a47c963fc96e87e6965a3c67bf48f4", "message": "Support custom package in codestarts", "committedDate": "2020-11-19T12:14:51Z", "type": "commit"}, {"oid": "f8d8113a05a47c963fc96e87e6965a3c67bf48f4", "url": "https://github.com/quarkusio/quarkus/commit/f8d8113a05a47c963fc96e87e6965a3c67bf48f4", "message": "Support custom package in codestarts", "committedDate": "2020-11-19T12:14:51Z", "type": "forcePushed"}]}