{"pr_number": 11803, "pr_title": "Add some logging to codestarts", "pr_createdAt": "2020-09-02T07:17:08Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/11803", "timeline": [{"oid": "a0e1f25a4da4be89abd1f11e3c1063005a8e119c", "url": "https://github.com/quarkusio/quarkus/commit/a0e1f25a4da4be89abd1f11e3c1063005a8e119c", "message": "Add logs to codestarts", "committedDate": "2020-09-02T07:22:31Z", "type": "forcePushed"}, {"oid": "5bec52d75b9bff38482858b2944dd57712359492", "url": "https://github.com/quarkusio/quarkus/commit/5bec52d75b9bff38482858b2944dd57712359492", "message": "Add logs to codestarts", "committedDate": "2020-09-02T07:24:28Z", "type": "forcePushed"}, {"oid": "be699520cea71dbdc7c947fed42edbabc1a0b55c", "url": "https://github.com/quarkusio/quarkus/commit/be699520cea71dbdc7c947fed42edbabc1a0b55c", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T07:42:03Z", "type": "forcePushed"}, {"oid": "fc5ef31463e35a30883acff38669e1607fb2fb52", "url": "https://github.com/quarkusio/quarkus/commit/fc5ef31463e35a30883acff38669e1607fb2fb52", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T09:56:39Z", "type": "forcePushed"}, {"oid": "0e2c8c9dd8c00a52dd5293d70ac3261f7a56556f", "url": "https://github.com/quarkusio/quarkus/commit/0e2c8c9dd8c00a52dd5293d70ac3261f7a56556f", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T12:17:07Z", "type": "forcePushed"}, {"oid": "f39cbe9fd72c61eed656401d21d41122070abd06", "url": "https://github.com/quarkusio/quarkus/commit/f39cbe9fd72c61eed656401d21d41122070abd06", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T12:32:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjAzNDUwNA==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482034504", "bodyText": "If message-writer belongs to a different module, it must have its own namespace", "author": "gastaldi", "createdAt": "2020-09-02T12:38:16Z", "path": "independent-projects/tools/message-writer/src/main/java/io/quarkus/devtools/DefaultMessageWriter.java", "diffHunk": "@@ -0,0 +1,57 @@\n+package io.quarkus.devtools;", "originalCommit": "f39cbe9fd72c61eed656401d21d41122070abd06", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA0NDQxOQ==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482044419", "bodyText": "ok on it :)", "author": "ia3andy", "createdAt": "2020-09-02T12:53:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjAzNDUwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA0NzkxOA==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482047918", "bodyText": "done", "author": "ia3andy", "createdAt": "2020-09-02T12:58:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjAzNDUwNA=="}], "type": "inlineReview"}, {"oid": "e1c409de0b1d0a7635e32334a35dd14c37ea2a1c", "url": "https://github.com/quarkusio/quarkus/commit/e1c409de0b1d0a7635e32334a35dd14c37ea2a1c", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T12:57:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA1Mzk2OA==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482053968", "bodyText": "I don't think the name should matter in the comparison here.", "author": "gastaldi", "createdAt": "2020-09-02T13:07:34Z", "path": "independent-projects/tools/codestarts/src/main/java/io/quarkus/devtools/codestarts/Codestart.java", "diffHunk": "@@ -10,6 +11,11 @@\n     private final CodestartSpec spec;\n     private final Set<String> implementedLanguages;\n \n+    static final Comparator<Codestart> PROCESSING_ORDER = Comparator.comparingInt(Codestart::getTypeOrder)\n+            .thenComparing(Codestart::getName);", "originalCommit": "e1c409de0b1d0a7635e32334a35dd14c37ea2a1c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA1NjExNQ==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482056115", "bodyText": "@gastaldi it doesn't, it's to make sure we always use the same ordering when running..", "author": "ia3andy", "createdAt": "2020-09-02T13:10:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA1Mzk2OA=="}], "type": "inlineReview"}, {"oid": "6c2f87ec619c7752f1ed40cf65d67ea68124f050", "url": "https://github.com/quarkusio/quarkus/commit/6c2f87ec619c7752f1ed40cf65d67ea68124f050", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T13:08:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA1NTc0Nw==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482055747", "bodyText": "Minor comment: It would be nice to display the project name in bold", "author": "gastaldi", "createdAt": "2020-09-02T13:10:19Z", "path": "independent-projects/tools/devtools-common/src/main/java/io/quarkus/devtools/commands/handlers/CreateProjectCommandHandler.java", "diffHunk": "@@ -85,13 +84,20 @@ public QuarkusCommandOutcome execute(QuarkusCommandInvocation invocation) throws\n                         .noDockerfiles(invocation.getValue(NO_DOCKERFILES, false))\n                         .addData(platformData)\n                         .addData(LegacySupport.convertFromLegacy(invocation.getValues()))\n+                        .messageWriter(invocation.log())\n                         .build();\n-                invocation.log().info(\n-                        \"Generating Quarkus Codestart Project with data: \" + input.getCodestartInput().getData().toString());\n+                invocation.log().info(\"-----------\");\n+                invocation.log().info(\"selected extensions: \\n\"\n+                        + extensionsToAdd.stream().map(e -> \"- \" + e.getGroupId() + \":\" + e.getArtifactId() + \"\\n\")\n+                                .collect(Collectors.joining()));\n                 final CodestartProject codestartProject = prepareProject(input);\n-                invocation.log().info(\"Codestarts: \" + codestartProject.getCodestarts().stream().map(Codestart::getSpec)\n-                        .map(CodestartSpec::getName).collect(Collectors.joining(\", \")));\n                 Codestarts.generateProject(codestartProject, invocation.getQuarkusProject().getProjectDirPath());\n+                invocation.log()\n+                        .info(\"\\n-----------\\n\" + MessageIcons.NOOP_ICON + \" \"\n+                                + codestartProject.getRequiredCodestart(CodestartType.PROJECT).getName()", "originalCommit": "6c2f87ec619c7752f1ed40cf65d67ea68124f050", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA1NzU2OQ==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482057569", "bodyText": "Ok we could do that in a another PR", "author": "ia3andy", "createdAt": "2020-09-02T13:13:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA1NTc0Nw=="}], "type": "inlineReview"}, {"oid": "ff4f96e2c3ae5299e8abe498a3e6b8e2ae9e9f48", "url": "https://github.com/quarkusio/quarkus/commit/ff4f96e2c3ae5299e8abe498a3e6b8e2ae9e9f48", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T13:26:24Z", "type": "forcePushed"}, {"oid": "927291550b3d2f2314ea8cfcbe12b02979bce82c", "url": "https://github.com/quarkusio/quarkus/commit/927291550b3d2f2314ea8cfcbe12b02979bce82c", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T13:30:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA4NTgxOA==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482085818", "bodyText": "People used have debug(format, args) to avoid unnecessary string concatenation in case debug wasn't enabled.", "author": "aloubyansky", "createdAt": "2020-09-02T13:52:25Z", "path": "independent-projects/tools/codestarts/src/main/java/io/quarkus/devtools/codestarts/CodestartProcessor.java", "diffHunk": "@@ -63,10 +69,12 @@ void addBuiltinData() {\n     }\n \n     void processCodestartDir(final Path sourceDirectory, final Map<String, Object> finalData) {\n+        log.debug(() -> \"processing dir: \" + sourceDirectory.toString());", "originalCommit": "927291550b3d2f2314ea8cfcbe12b02979bce82c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA4NjIxNQ==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482086215", "bodyText": "Here you are creating lambdas.", "author": "aloubyansky", "createdAt": "2020-09-02T13:52:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA4NTgxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjExMTk5MA==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482111990", "bodyText": "@aloubyansky but debug(format, args) would still process the args (ex: list map and join)", "author": "ia3andy", "createdAt": "2020-09-02T14:26:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA4NTgxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjExNDk1Mg==", "url": "https://github.com/quarkusio/quarkus/pull/11803#discussion_r482114952", "bodyText": "Sure, if debug is actually enabled.", "author": "aloubyansky", "createdAt": "2020-09-02T14:30:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA4NTgxOA=="}], "type": "inlineReview"}, {"oid": "3d5d8d9aa1831299c4d0ec36a9407dd46eea3f90", "url": "https://github.com/quarkusio/quarkus/commit/3d5d8d9aa1831299c4d0ec36a9407dd46eea3f90", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T14:51:52Z", "type": "forcePushed"}, {"oid": "778c2725382607cb43c70f48be92dd6d710ac650", "url": "https://github.com/quarkusio/quarkus/commit/778c2725382607cb43c70f48be92dd6d710ac650", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T14:55:31Z", "type": "forcePushed"}, {"oid": "a2dbb530f533616d78de19b7022c7cb836328f43", "url": "https://github.com/quarkusio/quarkus/commit/a2dbb530f533616d78de19b7022c7cb836328f43", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T15:02:05Z", "type": "commit"}, {"oid": "a2dbb530f533616d78de19b7022c7cb836328f43", "url": "https://github.com/quarkusio/quarkus/commit/a2dbb530f533616d78de19b7022c7cb836328f43", "message": "Remove codestarts shared-data overrides from example codestarts\n\nAdd logs to codestarts", "committedDate": "2020-09-02T15:02:05Z", "type": "forcePushed"}]}