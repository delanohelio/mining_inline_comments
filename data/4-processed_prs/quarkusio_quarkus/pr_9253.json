{"pr_number": 9253, "pr_title": "Add section about @QuarkusTestResourse in testing guide", "pr_createdAt": "2020-05-13T09:18:18Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/9253", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUzOTYyNA==", "url": "https://github.com/quarkusio/quarkus/pull/9253#discussion_r424539624", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A very common need is to start some services on which you Quarkus application depends on, before the Quarkus application starts for testing. To address this need Quarkus provides `@io.quarkus.test.common.QuarkusTestResource` and `io.quarkus.test.common.QuarkusTestResourceLifecycleManager`.\n          \n          \n            \n            A very common need is to start some services on which your Quarkus application depends, before the Quarkus application starts for testing. To address this need, Quarkus provides `@io.quarkus.test.common.QuarkusTestResource` and `io.quarkus.test.common.QuarkusTestResourceLifecycleManager`.", "author": "gsmet", "createdAt": "2020-05-13T15:42:26Z", "path": "docs/src/main/asciidoc/getting-started-testing.adoc", "diffHunk": "@@ -573,6 +573,18 @@ public class GreetingResourceTest {\n \n If you are using the `quarkus-hibernate-orm-panache` or `quarkus-mongodb-panache` extensions, check out the link:hibernate-orm-panache#mocking[Hibernate ORM with Panache Mocking] and link:mongodb-panache#mocking[MongoDB with Panache Mocking] documentation for the easiest way to mock your data access.\n \n+== Starting services before the Quarkus application starts\n+\n+A very common need is to start some services on which you Quarkus application depends on, before the Quarkus application starts for testing. To address this need Quarkus provides `@io.quarkus.test.common.QuarkusTestResource` and `io.quarkus.test.common.QuarkusTestResourceLifecycleManager`.", "originalCommit": "bdad878a80220dfb717abe5ee60f6d5218a43333", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUzOTg1OA==", "url": "https://github.com/quarkusio/quarkus/pull/9253#discussion_r424539858", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            By simply annotating any test in the test-suite with `@QuarkusTestResource`, Quarkus will run the corresponding `QuarkusTestResourceLifecycleManager` before any tests are run.\n          \n          \n            \n            By simply annotating any test in the test suite with `@QuarkusTestResource`, Quarkus will run the corresponding `QuarkusTestResourceLifecycleManager` before any tests are run.", "author": "gsmet", "createdAt": "2020-05-13T15:42:45Z", "path": "docs/src/main/asciidoc/getting-started-testing.adoc", "diffHunk": "@@ -573,6 +573,18 @@ public class GreetingResourceTest {\n \n If you are using the `quarkus-hibernate-orm-panache` or `quarkus-mongodb-panache` extensions, check out the link:hibernate-orm-panache#mocking[Hibernate ORM with Panache Mocking] and link:mongodb-panache#mocking[MongoDB with Panache Mocking] documentation for the easiest way to mock your data access.\n \n+== Starting services before the Quarkus application starts\n+\n+A very common need is to start some services on which you Quarkus application depends on, before the Quarkus application starts for testing. To address this need Quarkus provides `@io.quarkus.test.common.QuarkusTestResource` and `io.quarkus.test.common.QuarkusTestResourceLifecycleManager`.\n+\n+By simply annotating any test in the test-suite with `@QuarkusTestResource`, Quarkus will run the corresponding `QuarkusTestResourceLifecycleManager` before any tests are run.", "originalCommit": "bdad878a80220dfb717abe5ee60f6d5218a43333", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0Nzc2MQ==", "url": "https://github.com/quarkusio/quarkus/pull/9253#discussion_r424547761", "bodyText": "Was on the fence about this, but I absolutely trust you on it :)", "author": "geoand", "createdAt": "2020-05-13T15:53:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDUzOTg1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0MDAxMg==", "url": "https://github.com/quarkusio/quarkus/pull/9253#discussion_r424540012", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A test-suite is also free to utilize multiple `@QuarkusTestResource` annotations, in which case all the corresponding `QuarkusTestResourceLifecycleManager` objects will be run before the tests.\n          \n          \n            \n            A test suite is also free to utilize multiple `@QuarkusTestResource` annotations, in which case all the corresponding `QuarkusTestResourceLifecycleManager` objects will be run before the tests.", "author": "gsmet", "createdAt": "2020-05-13T15:42:59Z", "path": "docs/src/main/asciidoc/getting-started-testing.adoc", "diffHunk": "@@ -573,6 +573,18 @@ public class GreetingResourceTest {\n \n If you are using the `quarkus-hibernate-orm-panache` or `quarkus-mongodb-panache` extensions, check out the link:hibernate-orm-panache#mocking[Hibernate ORM with Panache Mocking] and link:mongodb-panache#mocking[MongoDB with Panache Mocking] documentation for the easiest way to mock your data access.\n \n+== Starting services before the Quarkus application starts\n+\n+A very common need is to start some services on which you Quarkus application depends on, before the Quarkus application starts for testing. To address this need Quarkus provides `@io.quarkus.test.common.QuarkusTestResource` and `io.quarkus.test.common.QuarkusTestResourceLifecycleManager`.\n+\n+By simply annotating any test in the test-suite with `@QuarkusTestResource`, Quarkus will run the corresponding `QuarkusTestResourceLifecycleManager` before any tests are run.\n+A test-suite is also free to utilize multiple `@QuarkusTestResource` annotations, in which case all the corresponding `QuarkusTestResourceLifecycleManager` objects will be run before the tests.", "originalCommit": "bdad878a80220dfb717abe5ee60f6d5218a43333", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0MDQzOA==", "url": "https://github.com/quarkusio/quarkus/pull/9253#discussion_r424540438", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Quarkus provides a few implementations of `QuarkusTestResourceLifecycleManager` out of the box (see `io.quarkus.test.h2.H2DatabaseTestResource` that starts an H2 database, or `io.quarkus.test.kubernetes.client.KubernetesMockServerTestResource` which starts a mock Kubernetes API server),\n          \n          \n            \n            Quarkus provides a few implementations of `QuarkusTestResourceLifecycleManager` out of the box (see `io.quarkus.test.h2.H2DatabaseTestResource` which starts an H2 database, or `io.quarkus.test.kubernetes.client.KubernetesMockServerTestResource` which starts a mock Kubernetes API server),", "author": "gsmet", "createdAt": "2020-05-13T15:43:31Z", "path": "docs/src/main/asciidoc/getting-started-testing.adoc", "diffHunk": "@@ -573,6 +573,18 @@ public class GreetingResourceTest {\n \n If you are using the `quarkus-hibernate-orm-panache` or `quarkus-mongodb-panache` extensions, check out the link:hibernate-orm-panache#mocking[Hibernate ORM with Panache Mocking] and link:mongodb-panache#mocking[MongoDB with Panache Mocking] documentation for the easiest way to mock your data access.\n \n+== Starting services before the Quarkus application starts\n+\n+A very common need is to start some services on which you Quarkus application depends on, before the Quarkus application starts for testing. To address this need Quarkus provides `@io.quarkus.test.common.QuarkusTestResource` and `io.quarkus.test.common.QuarkusTestResourceLifecycleManager`.\n+\n+By simply annotating any test in the test-suite with `@QuarkusTestResource`, Quarkus will run the corresponding `QuarkusTestResourceLifecycleManager` before any tests are run.\n+A test-suite is also free to utilize multiple `@QuarkusTestResource` annotations, in which case all the corresponding `QuarkusTestResourceLifecycleManager` objects will be run before the tests.\n+\n+Quarkus provides a few implementations of `QuarkusTestResourceLifecycleManager` out of the box (see `io.quarkus.test.h2.H2DatabaseTestResource` that starts an H2 database, or `io.quarkus.test.kubernetes.client.KubernetesMockServerTestResource` which starts a mock Kubernetes API server),", "originalCommit": "bdad878a80220dfb717abe5ee60f6d5218a43333", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0MDg0MQ==", "url": "https://github.com/quarkusio/quarkus/pull/9253#discussion_r424540841", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Common cases include starting docker containers using https://www.testcontainers.org/[testcontainers] (an example of which can be found https://github.com/quarkusio/quarkus-quickstarts/blob/master/kafka-quickstart/src/test/java/org/acme/kafka/KafkaResource.java[here]),\n          \n          \n            \n            Common cases include starting docker containers using https://www.testcontainers.org/[Testcontainers] (an example of which can be found https://github.com/quarkusio/quarkus-quickstarts/blob/master/kafka-quickstart/src/test/java/org/acme/kafka/KafkaResource.java[here]),", "author": "gsmet", "createdAt": "2020-05-13T15:44:04Z", "path": "docs/src/main/asciidoc/getting-started-testing.adoc", "diffHunk": "@@ -573,6 +573,18 @@ public class GreetingResourceTest {\n \n If you are using the `quarkus-hibernate-orm-panache` or `quarkus-mongodb-panache` extensions, check out the link:hibernate-orm-panache#mocking[Hibernate ORM with Panache Mocking] and link:mongodb-panache#mocking[MongoDB with Panache Mocking] documentation for the easiest way to mock your data access.\n \n+== Starting services before the Quarkus application starts\n+\n+A very common need is to start some services on which you Quarkus application depends on, before the Quarkus application starts for testing. To address this need Quarkus provides `@io.quarkus.test.common.QuarkusTestResource` and `io.quarkus.test.common.QuarkusTestResourceLifecycleManager`.\n+\n+By simply annotating any test in the test-suite with `@QuarkusTestResource`, Quarkus will run the corresponding `QuarkusTestResourceLifecycleManager` before any tests are run.\n+A test-suite is also free to utilize multiple `@QuarkusTestResource` annotations, in which case all the corresponding `QuarkusTestResourceLifecycleManager` objects will be run before the tests.\n+\n+Quarkus provides a few implementations of `QuarkusTestResourceLifecycleManager` out of the box (see `io.quarkus.test.h2.H2DatabaseTestResource` that starts an H2 database, or `io.quarkus.test.kubernetes.client.KubernetesMockServerTestResource` which starts a mock Kubernetes API server),\n+but it is common to create custom implementations to address specific application needs.\n+Common cases include starting docker containers using https://www.testcontainers.org/[testcontainers] (an example of which can be found https://github.com/quarkusio/quarkus-quickstarts/blob/master/kafka-quickstart/src/test/java/org/acme/kafka/KafkaResource.java[here]),", "originalCommit": "bdad878a80220dfb717abe5ee60f6d5218a43333", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0MTE3NQ==", "url": "https://github.com/quarkusio/quarkus/pull/9253#discussion_r424541175", "bodyText": "You don't want to add a paragraph about initArgs?", "author": "gsmet", "createdAt": "2020-05-13T15:44:31Z", "path": "docs/src/main/asciidoc/getting-started-testing.adoc", "diffHunk": "@@ -573,6 +573,18 @@ public class GreetingResourceTest {\n \n If you are using the `quarkus-hibernate-orm-panache` or `quarkus-mongodb-panache` extensions, check out the link:hibernate-orm-panache#mocking[Hibernate ORM with Panache Mocking] and link:mongodb-panache#mocking[MongoDB with Panache Mocking] documentation for the easiest way to mock your data access.\n \n+== Starting services before the Quarkus application starts\n+\n+A very common need is to start some services on which you Quarkus application depends on, before the Quarkus application starts for testing. To address this need Quarkus provides `@io.quarkus.test.common.QuarkusTestResource` and `io.quarkus.test.common.QuarkusTestResourceLifecycleManager`.\n+\n+By simply annotating any test in the test-suite with `@QuarkusTestResource`, Quarkus will run the corresponding `QuarkusTestResourceLifecycleManager` before any tests are run.\n+A test-suite is also free to utilize multiple `@QuarkusTestResource` annotations, in which case all the corresponding `QuarkusTestResourceLifecycleManager` objects will be run before the tests.\n+\n+Quarkus provides a few implementations of `QuarkusTestResourceLifecycleManager` out of the box (see `io.quarkus.test.h2.H2DatabaseTestResource` that starts an H2 database, or `io.quarkus.test.kubernetes.client.KubernetesMockServerTestResource` which starts a mock Kubernetes API server),\n+but it is common to create custom implementations to address specific application needs.\n+Common cases include starting docker containers using https://www.testcontainers.org/[testcontainers] (an example of which can be found https://github.com/quarkusio/quarkus-quickstarts/blob/master/kafka-quickstart/src/test/java/org/acme/kafka/KafkaResource.java[here]),\n+or starting a mock HTTP server using http://wiremock.org/[Wiremock] (an example of which can be found https://github.com/geoand/quarkus-test-demo/blob/master/src/test/java/org/acme/getting/started/country/WiremockCountries.java[here]).\n+", "originalCommit": "bdad878a80220dfb717abe5ee60f6d5218a43333", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0NzEyMg==", "url": "https://github.com/quarkusio/quarkus/pull/9253#discussion_r424547122", "bodyText": "I think it's too much of a niche feature to be mentioned in the docs. I believe (hope?) the javadoc should be enough :)", "author": "geoand", "createdAt": "2020-05-13T15:52:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0MTE3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAxOTQzOA==", "url": "https://github.com/quarkusio/quarkus/pull/9253#discussion_r425019438", "bodyText": "Resolving for now :)", "author": "geoand", "createdAt": "2020-05-14T10:02:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU0MTE3NQ=="}], "type": "inlineReview"}, {"oid": "670036483f2c8b59a46f6f87a636a042d1203439", "url": "https://github.com/quarkusio/quarkus/commit/670036483f2c8b59a46f6f87a636a042d1203439", "message": "Add section about @QuarkusTestResourse in testing guide\n\nFixes: #9235\n\nCo-authored-by: Guillaume Smet <guillaume.smet@gmail.com>", "committedDate": "2020-05-13T15:55:22Z", "type": "commit"}, {"oid": "670036483f2c8b59a46f6f87a636a042d1203439", "url": "https://github.com/quarkusio/quarkus/commit/670036483f2c8b59a46f6f87a636a042d1203439", "message": "Add section about @QuarkusTestResourse in testing guide\n\nFixes: #9235\n\nCo-authored-by: Guillaume Smet <guillaume.smet@gmail.com>", "committedDate": "2020-05-13T15:55:22Z", "type": "forcePushed"}]}