{"pr_number": 7921, "pr_title": "Update Infinispan to 10.1.5.Final and update test classes", "pr_createdAt": "2020-03-17T16:36:23Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/7921", "timeline": [{"oid": "40494306fad7956ee070b578303a71953306dff6", "url": "https://github.com/quarkusio/quarkus/commit/40494306fad7956ee070b578303a71953306dff6", "message": "Update Infinispan to 10.1.5.Final and update test classes", "committedDate": "2020-03-17T18:29:01Z", "type": "commit"}, {"oid": "40494306fad7956ee070b578303a71953306dff6", "url": "https://github.com/quarkusio/quarkus/commit/40494306fad7956ee070b578303a71953306dff6", "message": "Update Infinispan to 10.1.5.Final and update test classes", "committedDate": "2020-03-17T18:29:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA==", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394215580", "bodyText": "Could you elaborate why do you call this a hack @wburns ?", "author": "anistor", "createdAt": "2020-03-18T09:40:27Z", "path": "extensions/infinispan-embedded/runtime/pom.xml", "diffHunk": "@@ -30,6 +30,11 @@\n             <groupId>io.smallrye</groupId>\n             <artifactId>smallrye-metrics</artifactId>\n         </dependency>\n+        <!-- Hack to get it to have the API Infinispan uses available -->", "originalCommit": "40494306fad7956ee070b578303a71953306dff6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI3MjE0MA==", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394272140", "bodyText": "I'd rather ask why aren't we importing the quarkus-smallrye-metrics module here instead?", "author": "jmartisk", "createdAt": "2020-03-18T11:17:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMxMjA4Nw==", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394312087", "bodyText": "Could you elaborate why do you call this a hack @wburns ?\n\nIt isn't anymore, I forgot to remove the comment is all.\n\nI'd rather ask why aren't we importing the quarkus-smallrye-metrics module here instead?\n\nBut I can try this instead and see if it still works. Either way I can make a simple PR here in just a bit.", "author": "wburns", "createdAt": "2020-03-18T12:33:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMxMjg1NA==", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394312854", "bodyText": "For me, it depends if you need the API or an implementation.\nIf you just need the API, I wouldn't make the implementation mandatory.\n@jmartisk WDYT?", "author": "gsmet", "createdAt": "2020-03-18T12:35:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMyNzc5Nw==", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394327797", "bodyText": "AFAIK the SmallRye Metrics implementation is mandatory for Infinispan to be able to run (ideally it should be able to run without metrics dependency at all if metrics are disabled, but that's not the case right now)", "author": "jmartisk", "createdAt": "2020-03-18T13:01:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMzNDAxMA==", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394334010", "bodyText": "I created #7935 to remove the comment. Let me know if I should change the dependency though.", "author": "wburns", "createdAt": "2020-03-18T13:11:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MTkwNQ==", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394341905", "bodyText": "Other extensions that make use of Metrics declare the quarkus-smallrye-metrics dependency in their runtime module, so I'd vote for yes", "author": "jmartisk", "createdAt": "2020-03-18T13:23:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM0MjY0Mg==", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394342642", "bodyText": "Ah ah, I missed the smallrye-metrics dependency just above. So yes, we need the extension to be used.", "author": "gsmet", "createdAt": "2020-03-18T13:25:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUxNzI0MQ==", "url": "https://github.com/quarkusio/quarkus/pull/7921#discussion_r394517241", "bodyText": "AFAIK the SmallRye Metrics implementation is mandatory for Infinispan to be able to run (ideally it should be able to run without metrics dependency at all if metrics are disabled, but that's not the case right now)\n\nNow (10.1.5.final) it should be able to work without Smallrye metrics being present in classpath at runtime. It's truly optional.", "author": "anistor", "createdAt": "2020-03-18T17:24:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDIxNTU4MA=="}], "type": "inlineReview"}]}