{"pr_number": 1814, "pr_title": "More ITs", "pr_createdAt": "2020-11-19T23:22:30Z", "pr_url": "https://github.com/fcrepo/fcrepo/pull/1814", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MDQ1Nw==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527270457", "bodyText": "Creating an empty container and then PUTting nothing is not disallowed.", "author": "whikloj", "createdAt": "2020-11-19T23:23:22Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -1685,15 +1681,6 @@ public void testPutDatastreamContentOnObject() throws IOException {\n                 UNSUPPORTED_MEDIA_TYPE.getStatusCode(), getStatus(put));\n     }\n \n-    @Test\n-@Ignore\n-    public void testEmptyPutToExistingObject() {", "originalCommit": "7e12d825fb598708a7f597aa4fe879b227a2fe12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MDU2NA==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527270564", "bodyText": "Pairtrees are no longer a thing", "author": "whikloj", "createdAt": "2020-11-19T23:23:34Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -2001,29 +1988,6 @@ public void testIngestOnSubtree() throws IOException {\n         assertEquals(serverAddress + id + \"/x\", getLocation(method));\n     }\n \n-    /**\n-     * Ensure that the objects cannot be pairtree child resources\n-     *\n-     * @throws IOException in case of IOException\n-     */\n-    @Test\n-@Ignore\n-    public void testIngestOnPairtree() throws IOException {", "originalCommit": "7e12d825fb598708a7f597aa4fe879b227a2fe12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5MjQxMQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527292411", "bodyText": "Should this test be re-tooled for \"ghost nodes\"?", "author": "awoods", "createdAt": "2020-11-20T00:18:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MDU2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzMwNTQ0Mg==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527305442", "bodyText": "We have a test of GhostNodes here (https://github.com/fcrepo/fcrepo/blob/main/fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java#L4946) which I think covers this.", "author": "whikloj", "createdAt": "2020-11-20T00:33:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MDU2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzMwNzkyNw==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527307927", "bodyText": "Actually that test tries to create at the ghost node. I'll add an attempt to just POST to the ghost node.", "author": "whikloj", "createdAt": "2020-11-20T00:35:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MDU2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MDkwMw==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527270903", "bodyText": "CREATED_BY and LAST_MODIFIED_BY are not produced with an actual user set. Those types of tests are done in fcrepo-auth-webac", "author": "whikloj", "createdAt": "2020-11-19T23:24:33Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -2417,10 +2380,8 @@ public void testGetObjectOmitContainment() throws IOException {\n             assertTrue(\"Expected server managed\", graph.find(ANY, resource, ANY, FEDORA_CONTAINER.asNode()).hasNext());\n             assertTrue(\"Expected server managed\", graph.find(ANY, resource, ANY, FEDORA_RESOURCE.asNode()).hasNext());\n             assertTrue(\"Expected server managed\", graph.find(ANY, resource, CREATED_DATE.asNode(), ANY).hasNext());\n-            assertTrue(\"Expected server managed\", graph.find(ANY, resource, CREATED_BY.asNode(), ANY).hasNext());", "originalCommit": "7e12d825fb598708a7f597aa4fe879b227a2fe12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MTE3OQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527271179", "bodyText": "Creating an empty container and then PUTting nothing is not disallowed.", "author": "whikloj", "createdAt": "2020-11-19T23:25:10Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -3100,17 +3046,6 @@ public void testPutResourceBadRdf() throws IOException {\n         assertEquals(BAD_REQUEST.getStatusCode(), getStatus(httpPut));\n     }\n \n-    @Test\n-@Ignore\n-    public void testRepeatedPut() {", "originalCommit": "7e12d825fb598708a7f597aa4fe879b227a2fe12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MTM0Nw==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527271347", "bodyText": "This test has been here and ignored for 6 (I think) years, time to let it go", "author": "whikloj", "createdAt": "2020-11-19T23:25:38Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -3754,31 +3688,7 @@ public void testAclHeaderWithPut() throws IOException {\n     }\n \n     @Test\n-    @Ignore(\"This test needs manual intervention to decide how \\\"good\\\" the graph looks\")\n-    // TODO Do we have any way to proceed with this kind of aesthetic goal?\n-    public void testGraphShouldNotBeTooLumpy() throws IOException {", "originalCommit": "7e12d825fb598708a7f597aa4fe879b227a2fe12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MTU5Mg==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527271592", "bodyText": "Jersey seems to clean these up as the @PathParam externalPath; does not show the double slash.", "author": "whikloj", "createdAt": "2020-11-19T23:26:21Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -3913,13 +3823,6 @@ public void testJsonLdProfileFlattened() throws IOException {\n         assertEquals(\"Should be two values!\", 2, titles.findValues(\"@value\").size());\n     }\n \n-    @Test\n-@Ignore\n-    public void testPathWithEmptySegment() {", "originalCommit": "7e12d825fb598708a7f597aa4fe879b227a2fe12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI5NjA5Mw==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527296093", "bodyText": "Actually, the HttpClient is where the clean-up happens. We should keep this test with the addition of some configuration like: #1798 (comment)", "author": "awoods", "createdAt": "2020-11-20T00:22:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MTU5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzI3MjQ3Ng==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r527272476", "bodyText": "We don't (and won't) update the Last-Modified date of the object when a new membership property appears. This will however update the ETag.", "author": "whikloj", "createdAt": "2020-11-19T23:28:43Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -4471,19 +4372,6 @@ public void testContainerLastModified() throws Exception {\n                 headerFormat.parse(response.getFirstHeader(\"Last-Modified\").getValue())).toEpochMilli();\n             assertTrue(lastmod3 > lastmod2);\n         }\n-\n-        sleep(1000); // wait a second to make sure last-modified value will be different\n-\n-        // create child in the container\n-        assertEquals(CREATED.getStatusCode(), getStatus(new HttpPut(objURI + \"/members/member1\")));\n-\n-        // last-modified should be updated", "originalCommit": "7e12d825fb598708a7f597aa4fe879b227a2fe12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ac2897ab6a7e06a13b0ab6b90e8463923a1098b3", "url": "https://github.com/fcrepo/fcrepo/commit/ac2897ab6a7e06a13b0ab6b90e8463923a1098b3", "message": "Code review and ensure you can't post to a ghost node", "committedDate": "2020-11-20T01:10:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjY4NDYwMQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r532684601", "bodyText": "Should we remove the @Ignore since FCREPO-3541 has been resolved?", "author": "awoods", "createdAt": "2020-11-30T15:31:57Z", "path": "fcrepo-http-api/src/test/java/org/fcrepo/integration/http/api/FedoraLdpIT.java", "diffHunk": "@@ -1589,7 +1586,7 @@ public void testETagOnDeletedChild() throws Exception {\n     }\n \n     @Test\n-@Ignore\n+@Ignore(\"Needs updated eTags - FCREPO-3541\")", "originalCommit": "5f67ed4575cadd063687edcea603412eab20538f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjcyMzQ3NA==", "url": "https://github.com/fcrepo/fcrepo/pull/1814#discussion_r532723474", "bodyText": "I can't remove this one as eTags for membership has not been resolved. But I can remove the one above", "author": "whikloj", "createdAt": "2020-11-30T16:22:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjY4NDYwMQ=="}], "type": "inlineReview"}, {"oid": "45bece1491b104f724a67258939290de36056454", "url": "https://github.com/fcrepo/fcrepo/commit/45bece1491b104f724a67258939290de36056454", "message": "Code review and ensure you can't post to a ghost node", "committedDate": "2020-11-30T16:20:58Z", "type": "forcePushed"}, {"oid": "128f3b9429dbbe68152757551c43c1e9cdad9d38", "url": "https://github.com/fcrepo/fcrepo/commit/128f3b9429dbbe68152757551c43c1e9cdad9d38", "message": "Code review and ensure you can't post to a ghost node", "committedDate": "2020-12-04T18:33:44Z", "type": "forcePushed"}, {"oid": "7c10a02579414e20b4723f8cbbdd5dc610fd8961", "url": "https://github.com/fcrepo/fcrepo/commit/7c10a02579414e20b4723f8cbbdd5dc610fd8961", "message": "More ITs", "committedDate": "2020-12-07T15:17:47Z", "type": "commit"}, {"oid": "05653ea6841f52f799ae48b25d257597d83ff865", "url": "https://github.com/fcrepo/fcrepo/commit/05653ea6841f52f799ae48b25d257597d83ff865", "message": "Code review and ensure you can't post to a ghost node", "committedDate": "2020-12-07T15:17:47Z", "type": "commit"}, {"oid": "cfed42077183cddb63406773423689199c7978c6", "url": "https://github.com/fcrepo/fcrepo/commit/cfed42077183cddb63406773423689199c7978c6", "message": "rebase mistakes", "committedDate": "2020-12-07T15:17:47Z", "type": "commit"}, {"oid": "cfed42077183cddb63406773423689199c7978c6", "url": "https://github.com/fcrepo/fcrepo/commit/cfed42077183cddb63406773423689199c7978c6", "message": "rebase mistakes", "committedDate": "2020-12-07T15:17:47Z", "type": "forcePushed"}]}