{"pr_number": 1762, "pr_title": "cleanup exceptions", "pr_createdAt": "2020-10-05T16:09:52Z", "pr_url": "https://github.com/fcrepo/fcrepo/pull/1762", "timeline": [{"oid": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc", "url": "https://github.com/fcrepo/fcrepo/commit/b409437ecef2a98fb2ce9bf5f31ac42170be29cc", "message": "cleanup exceptions", "committedDate": "2020-10-05T16:04:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxODAyOQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1762#discussion_r499918029", "bodyText": "This class no longer really \"implements\" ExceptionDebugLogging. Should we systematically refactor the use of ExceptionDebugLogging?\nIt seems like this PR does a partial job of that.", "author": "awoods", "createdAt": "2020-10-05T23:03:38Z", "path": "fcrepo-http-commons/src/main/java/org/fcrepo/http/commons/exceptionhandlers/ExternalContentAccessExceptionMapper.java", "diffHunk": "@@ -45,7 +45,7 @@\n \n     @Override\n     public Response toResponse(final ExternalContentAccessException exception) {\n-        debugException(this, exception, LOGGER);", "originalCommit": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkyMjQ2Mg==", "url": "https://github.com/fcrepo/fcrepo/pull/1762#discussion_r499922462", "bodyText": "That did occur to me. I'm happy to remove the ExceptionDebugLogging from these classes. I decided to leave it so that all of the mappers were the same, and in case someone wanted to use that function in the future, but I have no problem removing it, if that's your vote.", "author": "pwinckles", "createdAt": "2020-10-05T23:18:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxODAyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxODkzNQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1762#discussion_r499918935", "bodyText": "You seem to have taken a different approach with this update than the main thrust of this PR. Was that intentional?", "author": "awoods", "createdAt": "2020-10-05T23:06:28Z", "path": "fcrepo-http-commons/src/main/java/org/fcrepo/http/commons/exceptionhandlers/InvalidPrefixExceptionMapper.java", "diffHunk": "@@ -44,7 +43,6 @@\n \n     @Override\n     public Response toResponse(final InvalidPrefixException e) {\n-        LOGGER.error(\"FedoraInvalidPrefixExceptionMapper caught an exception: {}\", e.getMessage());", "originalCommit": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkyMzAwOQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1762#discussion_r499923009", "bodyText": "Yeah, I removed it because it seemed like a client exception rather than a server exception. The approach I had was that client exceptions should be logged at debug and server exceptions should be warn (or higher).", "author": "pwinckles", "createdAt": "2020-10-05T23:19:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxODkzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxOTY5Ng==", "url": "https://github.com/fcrepo/fcrepo/pull/1762#discussion_r499919696", "bodyText": "Is there a rationale for which exception-mappers now have warn exceptions instead of calling debugException, and which mappers simply remove the current debug logging?", "author": "awoods", "createdAt": "2020-10-05T23:09:01Z", "path": "fcrepo-http-commons/src/main/java/org/fcrepo/http/commons/exceptionhandlers/ItemNotFoundExceptionMapper.java", "diffHunk": "@@ -40,8 +41,6 @@\n \n     @Override\n     public Response toResponse(final ItemNotFoundException e) {\n-\n-        LOGGER.debug(\"Exception intercepted by ItemNotFoundExceptionMapper: {}\\n\", e.getMessage());", "originalCommit": "b409437ecef2a98fb2ce9bf5f31ac42170be29cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkyNDAwMQ==", "url": "https://github.com/fcrepo/fcrepo/pull/1762#discussion_r499924001", "bodyText": "Yep, see my previous comment for the rational. Additionally, I removed some duplicate debug logs, like the one commented on here. There's no reason to both have a debug call in this class and then call debugException as well.", "author": "pwinckles", "createdAt": "2020-10-05T23:23:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTkxOTY5Ng=="}], "type": "inlineReview"}]}