{"pr_number": 221, "pr_title": "chore: clean up synth.py script with newer tooling", "pr_createdAt": "2020-03-18T17:18:15Z", "pr_url": "https://github.com/googleapis/java-bigtable/pull/221", "timeline": [{"oid": "d674a2f35bbbc71f3651ae9a5fcc2cb69d6dcc6b", "url": "https://github.com/googleapis/java-bigtable/commit/d674a2f35bbbc71f3651ae9a5fcc2cb69d6dcc6b", "message": "chore: clean up synth.py script with newer tooling", "committedDate": "2020-03-18T17:17:44Z", "type": "commit"}, {"oid": "49e166762c6e6425be23daca22887891d7bedd55", "url": "https://github.com/googleapis/java-bigtable/commit/49e166762c6e6425be23daca22887891d7bedd55", "message": "chore: clean up synth.py script with newer tooling", "committedDate": "2020-03-18T17:27:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYxNTEwMA==", "url": "https://github.com/googleapis/java-bigtable/pull/221#discussion_r394615100", "bodyText": "The java.gapic_library() helper won't exclude these files", "author": "chingor13", "createdAt": "2020-03-18T20:19:16Z", "path": "synth.py", "diffHunk": "@@ -86,32 +69,16 @@ def generate_data_api(gapic, license):\n     \"google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/stub/GrpcBigtableCallableFactory.java\",\n   ]\n \n-  package_name = f'com.google.cloud.bigtable.v2'\n-  java.fix_proto_headers(library / f'proto-google-cloud-bigtable-v2')\n-  # java.fix_grpc_headers(library / f'grpc-google-cloud-bigtable-v2', package_name)\n-\n-  ##todo replace with fix_grpc_headers\n-  s.replace(\n-      library / f'grpc-google-cloud-bigtable-v2/src/**/*.java',\n-      f\"package com.google.bigtable.v2;\",\n-      f\"{license}package com.google.bigtable.v2;\"\n-  )\n-  s.copy(library / f'gapic-google-cloud-bigtable-v2', 'google-cloud-bigtable/', excludes=excludes)", "originalCommit": "49e166762c6e6425be23daca22887891d7bedd55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2OTU3NQ==", "url": "https://github.com/googleapis/java-bigtable/pull/221#discussion_r395069575", "bodyText": "I don't think this will put these files in the right place. java-bigtable is a single artifact that contains clients for both admin & data. Which is why all of the explicit copies were added", "author": "igorbernstein2", "createdAt": "2020-03-19T14:31:07Z", "path": "synth.py", "diffHunk": "@@ -86,32 +69,16 @@ def generate_data_api(gapic, license):\n     \"google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/stub/GrpcBigtableCallableFactory.java\",\n   ]\n \n-  package_name = f'com.google.cloud.bigtable.v2'\n-  java.fix_proto_headers(library / f'proto-google-cloud-bigtable-v2')\n-  # java.fix_grpc_headers(library / f'grpc-google-cloud-bigtable-v2', package_name)\n-\n-  ##todo replace with fix_grpc_headers\n-  s.replace(\n-      library / f'grpc-google-cloud-bigtable-v2/src/**/*.java',\n-      f\"package com.google.bigtable.v2;\",\n-      f\"{license}package com.google.bigtable.v2;\"\n-  )\n-  s.copy(library / f'gapic-google-cloud-bigtable-v2', 'google-cloud-bigtable/', excludes=excludes)\n-  s.copy(library / f'grpc-google-cloud-bigtable-v2/src', f'grpc-google-cloud-bigtable-v2/src')\n-  s.copy(library / f'proto-google-cloud-bigtable-v2/src', f'proto-google-cloud-bigtable-v2/src')\n-\n   make_internal_only(internal_only)\n \n-  java.format_code(f'./grpc-google-cloud-bigtable-v2/src')\n-  java.format_code(f'./proto-google-cloud-bigtable-v2/src')\n-\n-\n-def generate_admin_api(gapic, license):\n-  library = gapic.java_library(\n-      service='bigtable-admin',\n-      version='v2',\n-      config_path='/google/bigtable/admin/artman_bigtableadmin.yaml',\n-      artman_output_name='')\n+def generate_admin_api(gapic):\n+  java.gapic_library(\n+        service='bigtable-admin',\n+        version='v2',\n+        config_pattern='/google/bigtable/admin/artman_bigtableadmin.yaml',\n+        package_pattern='com.google.bigtable.v2',\n+        gapic=gapic,\n+  )", "originalCommit": "49e166762c6e6425be23daca22887891d7bedd55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0911b64475f06d5db0bb275574f53431fd75b8ef", "url": "https://github.com/googleapis/java-bigtable/commit/0911b64475f06d5db0bb275574f53431fd75b8ef", "message": "update based on review comments", "committedDate": "2020-03-20T14:02:03Z", "type": "commit"}]}