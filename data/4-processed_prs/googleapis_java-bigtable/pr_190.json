{"pr_number": 190, "pr_title": "feat: add row exists api", "pr_createdAt": "2020-02-05T12:29:24Z", "pr_url": "https://github.com/googleapis/java-bigtable/pull/190", "timeline": [{"oid": "45909669e404070fe450d6d03370753f14b9554e", "url": "https://github.com/googleapis/java-bigtable/commit/45909669e404070fe450d6d03370753f14b9554e", "message": "feat: add row exists api\n\nAdding a new Row exists() API in `BigtableDataClient`", "committedDate": "2020-02-05T11:27:01Z", "type": "commit"}, {"oid": "c8ae4996199c7ef328152b19fb77c39cb091d0e9", "url": "https://github.com/googleapis/java-bigtable/commit/c8ae4996199c7ef328152b19fb77c39cb091d0e9", "message": "rephrased java doc", "committedDate": "2020-02-05T14:58:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMyNTI2Ng==", "url": "https://github.com/googleapis/java-bigtable/pull/190#discussion_r375325266", "bodyText": "please chain values().strip() as well", "author": "igorbernstein2", "createdAt": "2020-02-05T15:28:17Z", "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/BigtableDataClient.java", "diffHunk": "@@ -159,6 +162,129 @@ public static BigtableDataClient create(BigtableDataSettings settings) throws IO\n     this.stub = stub;\n   }\n \n+  /**\n+   * Confirms synchronously if given row key exists or not.\n+   *\n+   * <p>Sample code:\n+   *\n+   * <pre>{@code\n+   * try (BigtableDataClient bigtableDataClient = BigtableDataClient.create(\"[PROJECT]\", \"[INSTANCE]\")) {\n+   *   String tableId = \"[TABLE]\";\n+   *   String key = \"key\";\n+   *\n+   *   boolean isRowPresent = bigtableDataClient.exists(tableId, key);\n+   *\n+   *   // Do something with result, for example, display a message\n+   *   if(isRowPresent) {\n+   *     System.out.println(key + \" is present\");\n+   *   }\n+   * } catch(ApiException e) {\n+   *   e.printStackTrace();\n+   * }\n+   * }</pre>\n+   *\n+   * @throws com.google.api.gax.rpc.ApiException when a serverside error occurs\n+   */\n+  public boolean exists(String tableId, String rowKey) {\n+    return ApiExceptions.callAndTranslateApiException(existsAsync(tableId, rowKey));\n+  }\n+\n+  /**\n+   * Confirms synchronously if given row key exists or not.\n+   *\n+   * <p>Sample code:\n+   *\n+   * <pre>{@code\n+   * try (BigtableDataClient bigtableDataClient = BigtableDataClient.create(\"[PROJECT]\", \"[INSTANCE]\")) {\n+   *   String tableId = \"[TABLE]\";\n+   *   ByteString key = ByteString.copyFromUtf8(\"key\");\n+   *\n+   *   boolean isRowPresent = bigtableDataClient.exists(tableId, key);\n+   *\n+   *   // Do something with result, for example, display a message\n+   *   if(isRowPresent) {\n+   *     System.out.println(key.toStringUtf8() + \" is present\");\n+   *   }\n+   * } catch(ApiException e) {\n+   *   e.printStackTrace();\n+   * }\n+   * }</pre>\n+   *\n+   * @throws com.google.api.gax.rpc.ApiException when a serverside error occurs\n+   */\n+  public boolean exists(String tableId, ByteString rowKey) {\n+    return ApiExceptions.callAndTranslateApiException(existsAsync(tableId, rowKey));\n+  }\n+\n+  /**\n+   * Confirms asynchronously if given row key exists or not.\n+   *\n+   * <p>Sample code:\n+   *\n+   * <pre>{@code\n+   * try (BigtableDataClient bigtableDataClient = BigtableDataClient.create(\"[PROJECT]\", \"[INSTANCE]\")) {\n+   *   String tableId = \"[TABLE]\";\n+   *   final String key = \"key\";\n+   *\n+   *   ApiFuture<Boolean> futureResult = bigtableDataClient.existsAsync(tableId, key);\n+   *\n+   *   ApiFutures.addCallback(futureResult, new ApiFutureCallback<Boolean>() {\n+   *     public void onFailure(Throwable t) {\n+   *       t.printStackTrace();\n+   *     }\n+   *     public void onSuccess(Boolean isRowPresent) {\n+   *       if(isRowPresent) {\n+   *         System.out.println(key + \" is present\");\n+   *       }\n+   *     }\n+   *   }, MoreExecutors.directExecutor());\n+   * }\n+   * }</pre>\n+   */\n+  public ApiFuture<Boolean> existsAsync(String tableId, String rowKey) {\n+    return existsAsync(tableId, ByteString.copyFromUtf8(rowKey));\n+  }\n+\n+  /**\n+   * Confirms asynchronously if given row key exists or not.\n+   *\n+   * <p>Sample code:\n+   *\n+   * <pre>{@code\n+   * try (BigtableDataClient bigtableDataClient = BigtableDataClient.create(\"[PROJECT]\", \"[INSTANCE]\")) {\n+   *   String tableId = \"[TABLE]\";\n+   *   final ByteString key = ByteString.copyFromUtf8(\"key\");\n+   *\n+   *   ApiFuture<Boolean> futureResult = bigtableDataClient.existsAsync(tableId, key);\n+   *\n+   *   ApiFutures.addCallback(futureResult, new ApiFutureCallback<Boolean>() {\n+   *     public void onFailure(Throwable t) {\n+   *       t.printStackTrace();\n+   *     }\n+   *     public void onSuccess(Boolean isRowPresent) {\n+   *       if(isRowPresent) {\n+   *         System.out.println(key.toStringUtf8() + \" is present\");\n+   *       }\n+   *     }\n+   *   }, MoreExecutors.directExecutor());\n+   * }\n+   * }</pre>\n+   */\n+  public ApiFuture<Boolean> existsAsync(String tableId, ByteString rowKey) {\n+    Query query =\n+        Query.create(tableId).rowKey(rowKey).filter(Filters.FILTERS.limit().cellsPerRow(1));", "originalCommit": "c8ae4996199c7ef328152b19fb77c39cb091d0e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQ5MzE3MA==", "url": "https://github.com/googleapis/java-bigtable/pull/190#discussion_r375493170", "bodyText": "Thanks for the review!! Have updated with same PTAL", "author": "rahulKQL", "createdAt": "2020-02-05T20:34:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMyNTI2Ng=="}], "type": "inlineReview"}, {"oid": "d1f00e88daa5ddb8a66bfedaec04387b1d7da80f", "url": "https://github.com/googleapis/java-bigtable/commit/d1f00e88daa5ddb8a66bfedaec04387b1d7da80f", "message": "addressed feedback comment to add FILTERS.value().strip()", "committedDate": "2020-02-05T20:33:12Z", "type": "commit"}]}