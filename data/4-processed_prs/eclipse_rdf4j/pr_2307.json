{"pr_number": 2307, "pr_title": "GH-2306 more robust check for external bindings in FedXConnection", "pr_createdAt": "2020-06-07T01:38:31Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2307", "timeline": [{"oid": "6149e0fb0ec4d3df3b8e8790ff0ae79f0be24b70", "url": "https://github.com/eclipse/rdf4j/commit/6149e0fb0ec4d3df3b8e8790ff0ae79f0be24b70", "message": "GH-2306 verify Binding is not null before adding to merged set", "committedDate": "2020-06-07T01:17:21Z", "type": "commit"}, {"oid": "34a64dcc8f81b866d74a0ab78fc15c5da7e01f81", "url": "https://github.com/eclipse/rdf4j/commit/34a64dcc8f81b866d74a0ab78fc15c5da7e01f81", "message": "roll back on over-eager formatting", "committedDate": "2020-06-07T01:45:05Z", "type": "commit"}, {"oid": "34a64dcc8f81b866d74a0ab78fc15c5da7e01f81", "url": "https://github.com/eclipse/rdf4j/commit/34a64dcc8f81b866d74a0ab78fc15c5da7e01f81", "message": "roll back on over-eager formatting", "committedDate": "2020-06-07T01:45:05Z", "type": "forcePushed"}, {"oid": "0e59872339e7386d505af17b40180d4ab8b4f60b", "url": "https://github.com/eclipse/rdf4j/commit/0e59872339e7386d505af17b40180d4ab8b4f60b", "message": "GH-2306 more robust check for external bindings", "committedDate": "2020-06-09T05:52:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE2NTUwOA==", "url": "https://github.com/eclipse/rdf4j/pull/2307#discussion_r437165508", "bodyText": "Fwiw I believe this is still a check worth doing as in most cases it will skip creating a new MapBindingSet, and instead just pass in the EmptyBindingSet singleton - which other parts of the engine have some optimizations for.", "author": "jeenbroekstra", "createdAt": "2020-06-09T06:27:48Z", "path": "tools/federation/src/main/java/org/eclipse/rdf4j/federated/FedXConnection.java", "diffHunk": "@@ -138,10 +138,8 @@ public FedXConnection(FedX federation, FederationContext federationContext)\n \n \t\ttry {\n \t\t\t// make sure to apply any external bindings\n-\t\t\t// Note: we use a conditional check for performance reasons.\n-\t\t\t// Further note that we subtract -1 from the size as the baseUri is optional\n \t\t\tBindingSet queryBindings = EmptyBindingSet.getInstance();\n-\t\t\tif (bindings.size() > FedXRepositoryConnection.FEDX_BINDINGS.size() - 1) {\n+\t\t\tif (!FedXRepositoryConnection.FEDX_BINDINGS.containsAll(bindings.getBindingNames())) {", "originalCommit": "0e59872339e7386d505af17b40180d4ab8b4f60b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzM2NjYwOA==", "url": "https://github.com/eclipse/rdf4j/pull/2307#discussion_r437366608", "bodyText": "Good solution and way more robust. Should do the job as expected", "author": "aschwarte10", "createdAt": "2020-06-09T12:22:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE2NTUwOA=="}], "type": "inlineReview"}]}