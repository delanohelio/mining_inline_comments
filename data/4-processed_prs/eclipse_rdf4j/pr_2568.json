{"pr_number": 2568, "pr_title": "GH-2567 update documentation on how to update or clear the shacl shapes", "pr_createdAt": "2020-10-01T12:44:49Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2568", "timeline": [{"oid": "763c6b53d38a8002bc37de598cd84f6f3f017dc3", "url": "https://github.com/eclipse/rdf4j/commit/763c6b53d38a8002bc37de598cd84f6f3f017dc3", "message": "update documentation on how to update or clear the shacl shapes\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-10-01T12:44:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU2NzIyNw==", "url": "https://github.com/eclipse/rdf4j/pull/2568#discussion_r498567227", "bodyText": "Could you replace the {{< highlight >}} shortcode with  ```java .... ```?", "author": "jeenbroekstra", "createdAt": "2020-10-02T00:01:01Z", "path": "site/content/documentation/programming/shacl.md", "diffHunk": "@@ -51,15 +51,31 @@ Utilize a normal connection to load your shapes into this graph. SPARQL is not s\n \n {{< highlight java >}}\n ShaclSail shaclSail = new ShaclSail(new MemoryStore());\n-SailRepository sailRepository = new SailRepository(shaclSail);\n+Repository repo = new SailRepository(shaclSail);\n \n-try (SailRepositoryConnection connection = sailRepository.getConnection()) {\n-    connection.begin();\n+try (RepositoryConnection connection = repo.getConnection()) {\n \n     Reader shaclRules = ....\n \n+    // add shapes\n+    connection.begin();\n+    connection.add(shaclRules, \"\", RDFFormat.TURTLE, RDF4J.SHACL_SHAPE_GRAPH);\n+    connection.commit();\n+    \n+    // clear existing shapes and add new ones in single transaction (eg. update shapes)\n+    connection.begin();\n+    connection.clear(RDF4J.SHACL_SHAPE_GRAPH);\n     connection.add(shaclRules, \"\", RDFFormat.TURTLE, RDF4J.SHACL_SHAPE_GRAPH);\n     connection.commit();\n+\n+    // clear all shapes\n+    connection.begin();\n+    connection.clear(RDF4J.SHACL_SHAPE_GRAPH);\n+    connection.commit();\n+    \n+    // connection.clear(); will not clear the Shapes graph!\n+\n+\n }\n {{< / highlight >}}", "originalCommit": "763c6b53d38a8002bc37de598cd84f6f3f017dc3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3MDM4MA==", "url": "https://github.com/eclipse/rdf4j/pull/2568#discussion_r498570380", "bodyText": "Otherwise looks good to me.", "author": "jeenbroekstra", "createdAt": "2020-10-02T00:15:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU2NzIyNw=="}], "type": "inlineReview"}, {"oid": "27c8f87f3ff6a32f36566fa9a55cc1d31f403451", "url": "https://github.com/eclipse/rdf4j/commit/27c8f87f3ff6a32f36566fa9a55cc1d31f403451", "message": "review\n\nSigned-off-by: Ha\u030avard Ottestad <hmottestad@gmail.com>", "committedDate": "2020-10-02T06:40:58Z", "type": "commit"}]}