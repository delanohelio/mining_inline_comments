{"pr_number": 2243, "pr_title": "GH-1301 control connective operator precedence", "pr_createdAt": "2020-05-19T12:25:34Z", "pr_url": "https://github.com/eclipse/rdf4j/pull/2243", "timeline": [{"oid": "674a7da3c34825736ab13d3e104cd5a2a045b2b5", "url": "https://github.com/eclipse/rdf4j/commit/674a7da3c34825736ab13d3e104cd5a2a045b2b5", "message": "GH-1301 Fixed AND/OR precedence\n\nSigned-off-by: abhishekag03 <abhishek16126@iiitd.ac.in>", "committedDate": "2020-05-19T11:52:07Z", "type": "commit"}, {"oid": "b1efe9a1d6accba6db4d94bb80bf111ca7f6aace", "url": "https://github.com/eclipse/rdf4j/commit/b1efe9a1d6accba6db4d94bb80bf111ca7f6aace", "message": "GH-1301 Fixed AND/OR precedence\n\nSigned-off-by: kaustavvats <kaustav16048@iiitd.ac.in>", "committedDate": "2020-05-19T12:16:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQyOTgxOA==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429429818", "bodyText": "Using toString() and then .equals() is typically very slow. Try to use the enums instead: ConnectiveOperator.AND", "author": "hmottestad", "createdAt": "2020-05-22T19:55:42Z", "path": "core/sparqlbuilder/src/main/java/org/eclipse/rdf4j/sparqlbuilder/constraint/Operation.java", "diffHunk": "@@ -23,7 +23,9 @@\n \tOperation(SparqlOperator operator, int operandLimit) {\n \t\tsuper(operator);\n \t\tthis.operandLimit = operandLimit;\n-//\t\tparenthesize();\n+\t\tif (operator.toString().equals(\"AND\")) {", "originalCommit": "b1efe9a1d6accba6db4d94bb80bf111ca7f6aace", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU0MjI1MQ==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429542251", "bodyText": "Thanks for the suggestion! Done the necessary changes.", "author": "abhishekag03", "createdAt": "2020-05-23T12:33:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQyOTgxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzMTQxMQ==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429431411", "bodyText": "I don't see how this tests actually checks if the changes you've made are correct. The test still passes even if I comment out your change.", "author": "hmottestad", "createdAt": "2020-05-22T20:01:34Z", "path": "core/sparqlbuilder/src/test/java/org/eclipse/rdf4j/sparqlbuilder/examples/sparql11spec/Section6Test.java", "diffHunk": "@@ -61,4 +61,19 @@ public void example_6_3() {\n \t\t\t\t\t\tGraphPatterns.and(x.has(foaf.iri(\"homepage\"), hpage)).optional());\n \t\tp();\n \t}\n+\n+\t@Test\n+\tpublic void example_6_4() {\n+\t\tPrefix dc = SparqlBuilder.prefix(\"dc\", iri(DC_NS)), ns = SparqlBuilder.prefix(\"ns\", iri(EXAMPLE_ORG_NS));\n+\t\tVariable title = SparqlBuilder.var(\"title\"), price = SparqlBuilder.var(\"price\"), x = SparqlBuilder.var(\"x\");\n+\n+\t\tGraphPatternNotTriples pricePattern = GraphPatterns.and(x.has(ns.iri(\"price\"), price))\n+\t\t\t\t.filter(Expressions.or(Expressions.lt(price, 20),\n+\t\t\t\t\t\tExpressions.and(Expressions.lt(price, 50), Expressions.gt(price, 30))))\n+\t\t\t\t.optional();\n+\n+\t\tquery.prefix(dc, ns).select(title, price).where(x.has(dc.iri(\"title\"), title), pricePattern);\n+\t\tp();\n+\t}\n+", "originalCommit": "b1efe9a1d6accba6db4d94bb80bf111ca7f6aace", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzMjY1NQ==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429432655", "bodyText": "Btw. I'm sorry the test code in general here is so poor. p() isn't particularly useful here (for those reading this comment it actually means System.out.println(query) ), and all the tests are stateful, even though there is no need to keep state between tests.", "author": "hmottestad", "createdAt": "2020-05-22T20:05:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzMTQxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzNDUwNw==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429434507", "bodyText": "Second btw. I've take another look at the tests within the examples package and realized that none of these test anything, ie. there are no asserts anywhere. When I remove these \"tests\" I end up with a 13% test coverage. This is very unfortunate, but in now way your fault @abhishekag03", "author": "hmottestad", "createdAt": "2020-05-22T20:10:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzMTQxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzNzA3NA==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429437074", "bodyText": "I propose this assert:\nAssert.assertThat(query.getQueryString(), CoreMatchers.containsString(\"( ?price < 50 && ?price > 30 )\"));", "author": "hmottestad", "createdAt": "2020-05-22T20:19:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzMTQxMQ=="}], "type": "inlineReview"}, {"oid": "5bdf0b2530e301734010b28f20f1cab20aa85446", "url": "https://github.com/eclipse/rdf4j/commit/5bdf0b2530e301734010b28f20f1cab20aa85446", "message": "GH-1301 Comparison for AND operator optimized\n\nSigned-off-by: ishaanbassi <ishaan16238@iiitd.ac.in>", "committedDate": "2020-05-23T11:10:47Z", "type": "commit"}, {"oid": "c576d190c1f4c4ca12c5871f39f6d3807268ecb0", "url": "https://github.com/eclipse/rdf4j/commit/c576d190c1f4c4ca12c5871f39f6d3807268ecb0", "message": "GH-1301 Added assert in test cases, added test case\n\nSigned-off-by: abhishekag03 <abhishek16126@iiitd.ac.in>", "committedDate": "2020-05-23T11:43:27Z", "type": "commit"}, {"oid": "8b5a82839ac78370aa50bf311b169e482f59f9bd", "url": "https://github.com/eclipse/rdf4j/commit/8b5a82839ac78370aa50bf311b169e482f59f9bd", "message": "GH-1301 Fixed Formatting, Final Commit\n\nSigned-off-by: Kaustav Vats <kaustav16048@iiitd.ac.in>", "committedDate": "2020-05-23T11:52:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU0NDA3MA==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429544070", "bodyText": "We noticed that the Paranthesize function needs to be called for the OR operator as well. This is because for queries which have an OR inside an AND, the query output is not how it should be. It does not take into consideration that the OR part must be evaluated first.\nHowever, calling the Paranthesize function as we have done here is giving us extra parenthesis inside the filter query whenever we have boolean binary operators (AND/OR). Is that fine? If not, kindly help us with how we should remove it. Although considering it evaluation wise, it will always give the correct output. Just that the brackets there are not essential.", "author": "abhishekag03", "createdAt": "2020-05-23T12:58:42Z", "path": "core/sparqlbuilder/src/main/java/org/eclipse/rdf4j/sparqlbuilder/constraint/Operation.java", "diffHunk": "@@ -23,7 +23,7 @@\n \tOperation(SparqlOperator operator, int operandLimit) {\n \t\tsuper(operator);\n \t\tthis.operandLimit = operandLimit;\n-\t\tif (operator == ConnectiveOperator.AND) {\n+\t\tif (operator == ConnectiveOperator.AND || operator == ConnectiveOperator.OR) {", "originalCommit": "c576d190c1f4c4ca12c5871f39f6d3807268ecb0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU1MTA4OA==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429551088", "bodyText": "I'm ok with the extra parenthesis. I think it would be hard to fix and it's not semantically incorrect, just superfluous.", "author": "hmottestad", "createdAt": "2020-05-23T14:32:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU0NDA3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU1MTI4Mw==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429551283", "bodyText": "I am wondering if all connective operators need parenthesises around them? Do you know @abhishekag03 ?", "author": "hmottestad", "createdAt": "2020-05-23T14:34:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU0NDA3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU1NjQwNw==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429556407", "bodyText": "Yeah, you're actually right! We need to include it for all Connective Operators. We will add the code for the same along with test cases for each operator. I'm just wondering if this should be done in this issue itself or shall we open a new issue and commit the changes there? Or can the issue heading be changed? Please advise what shall be done?", "author": "abhishekag03", "createdAt": "2020-05-23T15:41:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU0NDA3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU1NzIxNw==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429557217", "bodyText": "It\u2019ll be easier to do it in this PR and just update the title and description of both the issue and this PR.", "author": "hmottestad", "createdAt": "2020-05-23T15:52:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU0NDA3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2NTcwMA==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429565700", "bodyText": "Sure, we have done the same and pushed the code. Since the check had to be done for all connective operators, we have now used instanceOf instead of equality check. Kindly have a look and let us know if something needs to be changed.", "author": "abhishekag03", "createdAt": "2020-05-23T17:57:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU0NDA3MA=="}], "type": "inlineReview"}, {"oid": "f9398cdb846352254644840e29e5955d45e7beab", "url": "https://github.com/eclipse/rdf4j/commit/f9398cdb846352254644840e29e5955d45e7beab", "message": "GH-1301 Added precedence order for all connective operators with test case\n\nSigned-off-by: abhishekag03 <abhishek16126@iiitd.ac.in>", "committedDate": "2020-05-23T17:40:05Z", "type": "commit"}, {"oid": "025718e8f663a000fb538239f6ccb19a082724d6", "url": "https://github.com/eclipse/rdf4j/commit/025718e8f663a000fb538239f6ccb19a082724d6", "message": "Merge branch 'GH-1301-control-and-or-precedence' of https://github.com/abhishekag03/rdf4j into GH-1301-control-and-or-precedence", "committedDate": "2020-05-23T17:42:09Z", "type": "commit"}, {"oid": "82d5edcbc58df12d937fb80270b8e9d5ed02c558", "url": "https://github.com/eclipse/rdf4j/commit/82d5edcbc58df12d937fb80270b8e9d5ed02c558", "message": "GH-1301 Added testcase for remaining connective operators\n\nSigned-off-by: ishaanbassi <ishaan16238@iiitd.ac.in>", "committedDate": "2020-05-23T17:53:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2NjM2OA==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429566368", "bodyText": "20-2*5 == 20-(2*5)\nCould you instead test for (20-2)*5 since this is different from 20-2*5?", "author": "hmottestad", "createdAt": "2020-05-23T18:08:12Z", "path": "core/sparqlbuilder/src/test/java/org/eclipse/rdf4j/sparqlbuilder/examples/sparql11spec/Section6Test.java", "diffHunk": "@@ -61,4 +64,65 @@ public void example_6_3() {\n \t\t\t\t\t\tGraphPatterns.and(x.has(foaf.iri(\"homepage\"), hpage)).optional());\n \t\tp();\n \t}\n+\n+\t@Test\n+\tpublic void example_6_4() {\n+\t\tPrefix dc = SparqlBuilder.prefix(\"dc\", iri(DC_NS)), ns = SparqlBuilder.prefix(\"ns\", iri(EXAMPLE_ORG_NS));\n+\t\tVariable title = SparqlBuilder.var(\"title\"), price = SparqlBuilder.var(\"price\"), x = SparqlBuilder.var(\"x\");\n+\n+\t\tGraphPatternNotTriples pricePattern = GraphPatterns.and(x.has(ns.iri(\"price\"), price))\n+\t\t\t\t.filter(Expressions.or(Expressions.lt(price, 20),\n+\t\t\t\t\t\tExpressions.and(Expressions.lt(price, 50), Expressions.gt(price, 30))))\n+\t\t\t\t.optional();\n+\n+\t\tquery.prefix(dc, ns).select(title, price).where(x.has(dc.iri(\"title\"), title), pricePattern);\n+\t\tAssert.assertThat(query.getQueryString(), CoreMatchers.containsString(\"( ?price < 50 && ?price > 30 )\"));\n+\t}\n+\n+\t@Test\n+\tpublic void example_6_5() {\n+\t\tPrefix dc = SparqlBuilder.prefix(\"dc\", iri(DC_NS)), ns = SparqlBuilder.prefix(\"ns\", iri(EXAMPLE_ORG_NS));\n+\t\tVariable title = SparqlBuilder.var(\"title\"), price = SparqlBuilder.var(\"price\"), x = SparqlBuilder.var(\"x\");\n+\n+\t\tGraphPatternNotTriples pricePattern = GraphPatterns.and(x.has(ns.iri(\"price\"), price))\n+\t\t\t\t.filter(Expressions.or(Expressions.lt(price, 20),\n+\t\t\t\t\t\tExpressions.and(Expressions.gt(price, 50),\n+\t\t\t\t\t\t\t\tExpressions.or(Expressions.gt(price, 60), Expressions.lt(price, 70)))))\n+\t\t\t\t.optional();\n+\n+\t\tquery.prefix(dc, ns).select(title, price).where(x.has(dc.iri(\"title\"), title), pricePattern);\n+\t\tAssert.assertThat(query.getQueryString(), CoreMatchers.containsString(\"( ?price < 20 || ( ?price > 50 &&\" +\n+\t\t\t\t\" ( ?price > 60 || ?price < 70 ) ) )\"));\n+\t}\n+\n+\t@Test\n+\tpublic void example_6_6() {\n+\t\tPrefix dc = SparqlBuilder.prefix(\"dc\", iri(DC_NS)), ns = SparqlBuilder.prefix(\"ns\", iri(EXAMPLE_ORG_NS));\n+\t\tVariable title = SparqlBuilder.var(\"title\"), price = SparqlBuilder.var(\"price\"), x = SparqlBuilder.var(\"x\");\n+\n+\t\tGraphPatternNotTriples pricePattern = GraphPatterns.and(x.has(ns.iri(\"price\"), price))\n+\t\t\t\t.filter(Expressions.or(Expressions.lt(price, Expressions.subtract(Rdf.literalOf(20),\n+\t\t\t\t\t\tExpressions.multiply(Rdf.literalOf(2), Rdf.literalOf(5)))),\n+\t\t\t\t\t\tExpressions.lt(price, 50)))\n+\t\t\t\t.optional();\n+\n+\t\tquery.prefix(dc, ns).select(title, price).where(x.has(dc.iri(\"title\"), title), pricePattern);\n+\t\tAssert.assertThat(query.getQueryString(), CoreMatchers.containsString(\"( 20 - ( 2 * 5 ) )\"));", "originalCommit": "82d5edcbc58df12d937fb80270b8e9d5ed02c558", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2ODA5MQ==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429568091", "bodyText": "Sure. Added the same and pushed it. Also, shall we add all these test cases to the file Section6Test.java only or should there be a separate file for these test cases? I couldn't understand how the Test cases are divided into the various SectionTest files.", "author": "abhishekag03", "createdAt": "2020-05-23T18:31:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2NjM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2ODMxNg==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429568316", "bodyText": "As I stated earlier. There are actually almost no tests for the SparqlBuilder (ie. no tests will fail if I change random things in the code). I think adding the tests like you have done here should be fine. But @jeenbroekstra should take a look to see if he agrees. Jeen is the project manager for RDF4J.", "author": "hmottestad", "createdAt": "2020-05-23T18:34:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2NjM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2ODM3Ng==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429568376", "bodyText": "Also, thank you @abhishekag03!", "author": "hmottestad", "createdAt": "2020-05-23T18:35:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2NjM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2ODY4OA==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429568688", "bodyText": "Thank you for the valuable suggestions and prompt responses @hmottestad.\nWill wait for @jeenbroekstra to have a look at the changes made so that this issue can be closed.", "author": "abhishekag03", "createdAt": "2020-05-23T18:39:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2NjM2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU4NDUwNw==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429584507", "bodyText": "I added a comment on the PR about this, but just to repeat here: I suggest you move these tests out of these SectionTest classes completely, and instead introduce a test class org.eclipse.rdf4j.sparqlbuilder.core.SparqlBuilderTest where you can add these cases. I'd prefer not to edit the code in the package org.eclipse.rdf4j.sparqlbuilder.examples - they are meant to be examples rather than actual code (I don't know if we want to keep them that way, but for now I'd like our actual tests to be separate from it).", "author": "jeenbroekstra", "createdAt": "2020-05-23T22:58:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2NjM2OA=="}], "type": "inlineReview"}, {"oid": "87f6241e36ddae533ebef125410ddfc7d72cbcea", "url": "https://github.com/eclipse/rdf4j/commit/87f6241e36ddae533ebef125410ddfc7d72cbcea", "message": "GH-1301 Added one more testcase\n\nSigned-off-by: Kaustav Vats <kaustav16048@iiitd.ac.in>", "committedDate": "2020-05-23T18:26:36Z", "type": "commit"}, {"oid": "ef1ec75e96946495b0ed5ff250cad8153cf25f5e", "url": "https://github.com/eclipse/rdf4j/commit/ef1ec75e96946495b0ed5ff250cad8153cf25f5e", "message": "GH-1301 Added test cases to ExpressionsTest\n\nSigned-off-by: ishaanbassi <ishaan16238@iiitd.ac.in>", "committedDate": "2020-05-24T12:31:26Z", "type": "commit"}, {"oid": "8267e3bf74c8182d95e1eef55f86242a32a95774", "url": "https://github.com/eclipse/rdf4j/commit/8267e3bf74c8182d95e1eef55f86242a32a95774", "message": "GH-1301 created SparqlBuilderTest file, removed testcases from Section6Test file\n\nSigned-off-by: kaustavvats <kaustav16048@iiitd.ac.in>", "committedDate": "2020-05-24T12:54:49Z", "type": "commit"}, {"oid": "ec78d8c2b07c4dd4b63b01bf299a36d1e4a17585", "url": "https://github.com/eclipse/rdf4j/commit/ec78d8c2b07c4dd4b63b01bf299a36d1e4a17585", "message": "GH-1301 added logical arithemetic test case. Minor fixes in previous commits.\n\nSigned-off-by: abhishekag03 <abhishek16126@iiitd.ac.in>", "committedDate": "2020-05-24T13:29:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTcwOTUwNg==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429709506", "bodyText": "Looks like your editor forgot to substitute ${year} with 2020 :)", "author": "jeenbroekstra", "createdAt": "2020-05-25T02:36:38Z", "path": "core/sparqlbuilder/src/test/java/org/eclipse/rdf4j/sparqlbuilder/core/SparqlBuilderTest.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/*******************************************************************************\n+ * Copyright (c) ${year} Eclipse RDF4J contributors.", "originalCommit": "ec78d8c2b07c4dd4b63b01bf299a36d1e4a17585", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTcwOTgyNQ==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429709825", "bodyText": "We actually prefer using AssertJ rather than Hamcrest, but no big deal, you can leave as-is.", "author": "jeenbroekstra", "createdAt": "2020-05-25T02:38:23Z", "path": "core/sparqlbuilder/src/test/java/org/eclipse/rdf4j/sparqlbuilder/core/SparqlBuilderTest.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/*******************************************************************************\n+ * Copyright (c) ${year} Eclipse RDF4J contributors.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Distribution License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/org/documents/edl-v10.php.\n+ *******************************************************************************/\n+\n+package org.eclipse.rdf4j.sparqlbuilder.core;\n+\n+import static org.eclipse.rdf4j.sparqlbuilder.rdf.Rdf.iri;\n+\n+import org.eclipse.rdf4j.model.vocabulary.DC;\n+import org.eclipse.rdf4j.sparqlbuilder.constraint.Expressions;\n+import org.eclipse.rdf4j.sparqlbuilder.core.query.Queries;\n+import org.eclipse.rdf4j.sparqlbuilder.core.query.SelectQuery;\n+import org.eclipse.rdf4j.sparqlbuilder.graphpattern.GraphPatternNotTriples;\n+import org.eclipse.rdf4j.sparqlbuilder.graphpattern.GraphPatterns;\n+import org.eclipse.rdf4j.sparqlbuilder.rdf.Rdf;\n+import org.hamcrest.CoreMatchers;", "originalCommit": "ec78d8c2b07c4dd4b63b01bf299a36d1e4a17585", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTcxMDMxOQ==", "url": "https://github.com/eclipse/rdf4j/pull/2243#discussion_r429710319", "bodyText": "Could you remove the System.out.println ? Just so there is less output to scroll through when running these tests.", "author": "jeenbroekstra", "createdAt": "2020-05-25T02:41:26Z", "path": "core/sparqlbuilder/src/test/java/org/eclipse/rdf4j/sparqlbuilder/core/SparqlBuilderTest.java", "diffHunk": "@@ -0,0 +1,130 @@\n+/*******************************************************************************\n+ * Copyright (c) ${year} Eclipse RDF4J contributors.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Distribution License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/org/documents/edl-v10.php.\n+ *******************************************************************************/\n+\n+package org.eclipse.rdf4j.sparqlbuilder.core;\n+\n+import static org.eclipse.rdf4j.sparqlbuilder.rdf.Rdf.iri;\n+\n+import org.eclipse.rdf4j.model.vocabulary.DC;\n+import org.eclipse.rdf4j.sparqlbuilder.constraint.Expressions;\n+import org.eclipse.rdf4j.sparqlbuilder.core.query.Queries;\n+import org.eclipse.rdf4j.sparqlbuilder.core.query.SelectQuery;\n+import org.eclipse.rdf4j.sparqlbuilder.graphpattern.GraphPatternNotTriples;\n+import org.eclipse.rdf4j.sparqlbuilder.graphpattern.GraphPatterns;\n+import org.eclipse.rdf4j.sparqlbuilder.rdf.Rdf;\n+import org.hamcrest.CoreMatchers;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+/**\n+ * Tests for precedence order of all operators in SPARQL builder Queries.\n+ */\n+public class SparqlBuilderTest {\n+\n+\tprotected SelectQuery query;\n+\tprotected static final String EXAMPLE_ORG_NS = \"https://example.org/ns#\";\n+\tprotected static final String DC_NS = DC.NAMESPACE;\n+\n+\t@Before\n+\tpublic void before() {\n+\t\tquery = Queries.SELECT();\n+\t}\n+\n+\t@Test\n+\tpublic void testLogicalOperatorPrecedence1() {\n+\t\tPrefix dc = SparqlBuilder.prefix(\"dc\", iri(DC_NS)), ns = SparqlBuilder.prefix(\"ns\", iri(EXAMPLE_ORG_NS));\n+\t\tVariable title = SparqlBuilder.var(\"title\"), price = SparqlBuilder.var(\"price\"), x = SparqlBuilder.var(\"x\");\n+\n+\t\tGraphPatternNotTriples pricePattern = GraphPatterns.and(x.has(ns.iri(\"price\"), price))\n+\t\t\t\t.filter(Expressions.or(Expressions.lt(price, Rdf.literalOf(20)),\n+\t\t\t\t\t\tExpressions.and(Expressions.lt(price, Rdf.literalOf(50)),\n+\t\t\t\t\t\t\t\tExpressions.gt(price, Rdf.literalOf(30)))))\n+\t\t\t\t.optional();\n+\t\tSystem.out.println(query);", "originalCommit": "ec78d8c2b07c4dd4b63b01bf299a36d1e4a17585", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5b87bbe17032f7159e87d72336919382cbdd697f", "url": "https://github.com/eclipse/rdf4j/commit/5b87bbe17032f7159e87d72336919382cbdd697f", "message": "Minor fixes. Connective operator precedence done\n\nSigned-off-by: abhishekag03 <abhishek16126@iiitd.ac.in>", "committedDate": "2020-05-25T06:31:00Z", "type": "commit"}]}