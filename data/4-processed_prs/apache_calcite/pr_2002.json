{"pr_number": 2002, "pr_title": "[CALCITE-4042] JoinCommuteRule must not match SEMI / ANTI join", "pr_createdAt": "2020-06-04T09:06:01Z", "pr_url": "https://github.com/apache/calcite/pull/2002", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIyNTcwNw==", "url": "https://github.com/apache/calcite/pull/2002#discussion_r435225707", "bodyText": "LOL. \ud83d\ude1d\nI remembered I created that JIRA but not immediately create a pull request, because I had to come up with a test case.\nThe code change looks good to me, but I think we'd better add a test case. :)", "author": "hsyuan", "createdAt": "2020-06-04T12:47:48Z", "path": "core/src/main/java/org/apache/calcite/rel/rules/JoinCommuteRule.java", "diffHunk": "@@ -145,6 +145,12 @@ public static RelNode swap(Join join, boolean swapOuterJoins,\n         .build();\n   }\n \n+  public boolean matches(RelOptRuleCall call) {\n+    Join join = call.rel(0);\n+    // SEMI and ANTI join cannot be swapped.\n+    return join.getJoinType().projectsRight();\n+  }", "originalCommit": "7ec78b740a955d949de7c5c2fca29e572420edac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzMjExNg==", "url": "https://github.com/apache/calcite/pull/2002#discussion_r435232116", "bodyText": "You're right. I will create a test case.", "author": "rubenada", "createdAt": "2020-06-04T12:58:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIyNTcwNw=="}], "type": "inlineReview"}, {"oid": "10dcde57527c2437914dfc21c1d80bf10f46dd97", "url": "https://github.com/apache/calcite/commit/10dcde57527c2437914dfc21c1d80bf10f46dd97", "message": "[CALCITE-4042] JoinCommuteRule must not match SEMI / ANTI join", "committedDate": "2020-06-04T13:40:50Z", "type": "commit"}, {"oid": "10dcde57527c2437914dfc21c1d80bf10f46dd97", "url": "https://github.com/apache/calcite/commit/10dcde57527c2437914dfc21c1d80bf10f46dd97", "message": "[CALCITE-4042] JoinCommuteRule must not match SEMI / ANTI join", "committedDate": "2020-06-04T13:40:50Z", "type": "forcePushed"}]}