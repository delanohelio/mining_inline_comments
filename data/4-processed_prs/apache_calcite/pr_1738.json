{"pr_number": 1738, "pr_title": "[CALCITE-3719] Add hint option checker to customize the option", "pr_createdAt": "2020-01-09T08:08:31Z", "pr_url": "https://github.com/apache/calcite/pull/1738", "timeline": [{"oid": "ce6051c42b616419549273b1ffee854ca2a95aa9", "url": "https://github.com/apache/calcite/commit/ce6051c42b616419549273b1ffee854ca2a95aa9", "message": "[CALCITE-3719] Add hint option checker to customize the option\nvalidation\n\n* Add interface HintOptionChecker to let user validate each hint's\noptions\n* Add customizable hint error handler", "committedDate": "2020-01-09T08:16:25Z", "type": "forcePushed"}, {"oid": "593b4007a0ba450f0e9dd6bd2bc7b1969d02a84b", "url": "https://github.com/apache/calcite/commit/593b4007a0ba450f0e9dd6bd2bc7b1969d02a84b", "message": "[CALCITE-3719] Add hint option checker to customize the option\nvalidation\n\n* Add interface HintOptionChecker to let user validate each hint's\noptions\n* Add customizable hint error handler", "committedDate": "2020-01-09T09:17:14Z", "type": "forcePushed"}, {"oid": "8a9652757431c0792e21cfc2aefebdc9156b59c8", "url": "https://github.com/apache/calcite/commit/8a9652757431c0792e21cfc2aefebdc9156b59c8", "message": "[CALCITE-3719] Add hint option checker to customize the option\nvalidation\n\n* Add interface HintOptionChecker to let user validate each hint's\noptions\n* Add customizable hint error handler", "committedDate": "2020-01-09T09:20:49Z", "type": "forcePushed"}, {"oid": "763f3898c6ce7b8be0a160ec86ef631468db27ec", "url": "https://github.com/apache/calcite/commit/763f3898c6ce7b8be0a160ec86ef631468db27ec", "message": "[CALCITE-3719] Add hint option checker to customize the option\nvalidation\n\n* Add interface HintOptionChecker to let user validate each hint's\noptions\n* Add customizable hint error handler", "committedDate": "2020-01-09T09:39:50Z", "type": "forcePushed"}, {"oid": "6f918d391fb5d04b29ce9d3b5431dd13460bd4c1", "url": "https://github.com/apache/calcite/commit/6f918d391fb5d04b29ce9d3b5431dd13460bd4c1", "message": "[CALCITE-3719] Add hint option checker to customize the option\nvalidation\n\n* Add interface HintOptionChecker to let user validate each hint's\noptions\n* Add customizable hint error handler", "committedDate": "2020-01-09T11:43:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDcwMjIxMQ==", "url": "https://github.com/apache/calcite/pull/1738#discussion_r364702211", "bodyText": "want -> wants.", "author": "cshuo", "createdAt": "2020-01-09T12:00:43Z", "path": "core/src/main/java/org/apache/calcite/plan/ViewExpanders.java", "diffHunk": "@@ -39,9 +39,9 @@ private ViewExpanders() {}\n       RelOptCluster cluster,\n       List<RelHint> hints) {\n     // See if the user want to customize the ToRelContext.", "originalCommit": "6f918d391fb5d04b29ce9d3b5431dd13460bd4c1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDcyNTc4Mw==", "url": "https://github.com/apache/calcite/pull/1738#discussion_r364725783", "bodyText": "new HashMap<>() -> Collections.emptyMap() may be better? I think EMPTY  here implicate that it's an immutable object.", "author": "cshuo", "createdAt": "2020-01-09T13:02:26Z", "path": "core/src/main/java/org/apache/calcite/rel/hint/HintStrategyTable.java", "diffHunk": "@@ -48,15 +52,26 @@\n \n   /** Empty strategies. */\n   // Need to replace the EMPTY with DEFAULT if we have any hint implementations.\n-  public static final HintStrategyTable EMPTY = new HintStrategyTable(new HashMap<>());\n+  public static final HintStrategyTable EMPTY = new HintStrategyTable(\n+      new HashMap<>(), new HashMap<>(), HintErrorLogger.INSTANCE);", "originalCommit": "6f918d391fb5d04b29ce9d3b5431dd13460bd4c1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAzMzkzOA==", "url": "https://github.com/apache/calcite/pull/1738#discussion_r365033938", "bodyText": "I agree, thanks.", "author": "danny0405", "createdAt": "2020-01-10T01:09:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDcyNTc4Mw=="}], "type": "inlineReview"}, {"oid": "40a8cf169d60e5a4c67106d7f23fddef1c2f7642", "url": "https://github.com/apache/calcite/commit/40a8cf169d60e5a4c67106d7f23fddef1c2f7642", "message": "[CALCITE-3719] Add hint option checker to customize the option\nvalidation\n\n* Add interface HintOptionChecker to let user validate each hint's\noptions\n* Add customizable hint error handler", "committedDate": "2020-01-10T01:18:15Z", "type": "forcePushed"}, {"oid": "893114fab637df5467db58286bfe00ecdaf82c45", "url": "https://github.com/apache/calcite/commit/893114fab637df5467db58286bfe00ecdaf82c45", "message": "[CALCITE-3719] Add hint option checker to customize the option\nvalidation\n\n* Add interface HintOptionChecker to let user validate each hint's\noptions\n* Add customizable hint error handler", "committedDate": "2020-01-10T01:27:54Z", "type": "commit"}, {"oid": "893114fab637df5467db58286bfe00ecdaf82c45", "url": "https://github.com/apache/calcite/commit/893114fab637df5467db58286bfe00ecdaf82c45", "message": "[CALCITE-3719] Add hint option checker to customize the option\nvalidation\n\n* Add interface HintOptionChecker to let user validate each hint's\noptions\n* Add customizable hint error handler", "committedDate": "2020-01-10T01:27:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA5ODYyNQ==", "url": "https://github.com/apache/calcite/pull/1738#discussion_r365098625", "bodyText": "Why is this change?\nThe issue is it makes log4j APIs accessible in the testing code, so the wrong Logger class appears in the auto-complete :(", "author": "vlsi", "createdAt": "2020-01-10T07:15:43Z", "path": "core/build.gradle.kts", "diffHunk": "@@ -78,7 +78,7 @@ dependencies {\n     testImplementation(kotlin(\"stdlib-jdk8\"))\n     testImplementation(kotlin(\"test\"))\n     testImplementation(kotlin(\"test-junit5\"))\n-    testRuntimeOnly(\"org.slf4j:slf4j-log4j12\")\n+    testImplementation(\"org.slf4j:slf4j-log4j12\")", "originalCommit": "893114fab637df5467db58286bfe00ecdaf82c45", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTEwNzQ5Ng==", "url": "https://github.com/apache/calcite/pull/1738#discussion_r365107496", "bodyText": "Oops, i need to reference log4j class in my Test, can we fix that auto-complete ?", "author": "danny0405", "createdAt": "2020-01-10T07:51:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA5ODYyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTExMjkyMA==", "url": "https://github.com/apache/calcite/pull/1738#discussion_r365112920", "bodyText": "In any case you don't really need slf4j-log4j12 on the compilation classpath.\nYou don't really reference slf4j-log4j12 classes.\nYou reference log4j12 classes.\nI see the following options:\na) Keep slf4j-log4j12 runtime-only and add an extra testImplementation(\"log4j:log4j\") { because(\"SqlHintsConverterTest needs to implement a MockAppender\") }\nb) Create an extra src/test-logging folder that would have extra dependency for testing logging behavior. For instance, slf4j-test or spf4j-slf4j-test which are slf4j implementations designed to be used for testing logging behaviors.\nThen all the tests that do need to verify logging can be placed there.", "author": "vlsi", "createdAt": "2020-01-10T08:10:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA5ODYyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTExNTg3NQ==", "url": "https://github.com/apache/calcite/pull/1738#discussion_r365115875", "bodyText": "I would choose 1, but could you help to fix that ? I'm not really familiar with Gradle, sorry for that ~", "author": "danny0405", "createdAt": "2020-01-10T08:20:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTA5ODYyNQ=="}], "type": "inlineReview"}]}