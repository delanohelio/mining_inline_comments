{"pr_number": 6062, "pr_title": "Fix issue: Microprofile dateLibrary java8 not working", "pr_createdAt": "2020-04-27T06:50:11Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/6062", "timeline": [{"oid": "7b6d83dff203ef541f7942ad5e38af905d882880", "url": "https://github.com/OpenAPITools/openapi-generator/commit/7b6d83dff203ef541f7942ad5e38af905d882880", "message": "Fix issue: Microprofile dateLibrary java8 not working", "committedDate": "2020-04-27T06:48:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIzMDQ0MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6062#discussion_r417230440", "bodyText": "Is it correct to say that MICROPROFILE only supports legacy datetime library?\nIf yes, what about throwing a warning using LOGGER.warn to inform the user on that.", "author": "wing328", "createdAt": "2020-04-29T10:59:07Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/JavaClientCodegen.java", "diffHunk": "@@ -199,7 +199,7 @@ public void addOperationToGroup(String tag, String resourcePath, Operation opera\n     public void processOpts() {\n         if ((WEBCLIENT.equals(getLibrary()) && \"threetenbp\".equals(dateLibrary)) || NATIVE.equals(getLibrary())) {\n             dateLibrary = \"java8\";\n-        } else if (MICROPROFILE.equals(getLibrary())) {\n+        } else if (MICROPROFILE.equals(getLibrary()) && \"threetenbp\".equals(dateLibrary)) {", "originalCommit": "7b6d83dff203ef541f7942ad5e38af905d882880", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NjE3NA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6062#discussion_r417276174", "bodyText": "@wing328  The reported issue is setting dateLibrary=java8 or dateLibrary=native microprofile rest client is generating class files with Joda time because at line 424 it has been hard coded to org.joda.time.LocalDate.\nSo I removed line 424.\nNext coming to line number 202 if the user doesn't provide any dateLibrary we need to default it to native which is java.util.Date for microprofile rest client.\nIf the user doesn't select dateLibrary open api defaults to threetenbp. So we are making a check at line 202 and forcing dateLibrary to be native if it is microprofile & threetenbp.\nIf user selects dateLibrary='java8' or 'joda' or 'native' the condition at line 202 will not pass and what ever dateLibrary  defined by user is used.\nI have tested following with the above changes.\n\njava -jar openapi-generator-cli.jar generate -i petstore.yaml -g java --library microprofile  //generates java.util.Date because no dateLibrary is specified\njava -jar openapi-generator-cli.jar generate -i petstore.yaml -g java --library microprofile --additional-properties dateLibrary=java8\njava -jar openapi-generator-cli.jar generate -i petstore.yaml -g java --library microprofile --additional-properties dateLibrary=joda", "author": "Ravisankar-Challa", "createdAt": "2020-04-29T12:29:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIzMDQ0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTMzODAxOA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6062#discussion_r441338018", "bodyText": "Tested with these and the results are good.", "author": "wing328", "createdAt": "2020-06-17T07:30:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIzMDQ0MA=="}], "type": "inlineReview"}]}