{"pr_number": 4940, "pr_title": "[go-experimental] Support aliasing of API keys", "pr_createdAt": "2020-01-07T15:58:29Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/4940", "timeline": [{"oid": "640c404145ec26e2be517742b6b048926935e2aa", "url": "https://github.com/OpenAPITools/openapi-generator/commit/640c404145ec26e2be517742b6b048926935e2aa", "message": "Use name instead of keyParamName for lookup", "committedDate": "2020-01-13T16:46:20Z", "type": "forcePushed"}, {"oid": "b3d8d694d851037b4ee5cc28660f1160a49dcf18", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b3d8d694d851037b4ee5cc28660f1160a49dcf18", "message": "[go-experimental] Support aliasing of API keys", "committedDate": "2020-01-15T14:59:17Z", "type": "forcePushed"}, {"oid": "761f6e5577dbf97b3566bc8367204d8ee75e7e0f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/761f6e5577dbf97b3566bc8367204d8ee75e7e0f", "message": "[go-experimental] Support aliasing of API keys", "committedDate": "2020-01-15T15:17:01Z", "type": "commit"}, {"oid": "639824fab6c3d7438736fb00d6172148ce564052", "url": "https://github.com/OpenAPITools/openapi-generator/commit/639824fab6c3d7438736fb00d6172148ce564052", "message": "Use {{.}} inside condition", "committedDate": "2020-01-15T15:17:57Z", "type": "commit"}, {"oid": "5d0184d2390b3f14d7dea759786477385eaa40fb", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5d0184d2390b3f14d7dea759786477385eaa40fb", "message": "Use name instead of keyParamName for lookup", "committedDate": "2020-01-15T15:21:16Z", "type": "commit"}, {"oid": "5d0184d2390b3f14d7dea759786477385eaa40fb", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5d0184d2390b3f14d7dea759786477385eaa40fb", "message": "Use name instead of keyParamName for lookup", "committedDate": "2020-01-15T15:21:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzMjQxNg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#discussion_r368032416", "bodyText": "It would be good to document this vendor extension somewhere. Currently the vendor extensions are listed at https://github.com/OpenAPITools/openapi-generator/wiki/Vendor-Extensions, but it does not look like only owners can make a change (?), which imo explains why vendor extensions are not well documented.\nThis new 'x-lookup' vendor extension is buried in the template, so I think very few people would know this aliasing capability exists.\nRelevant issue:\n#4976", "author": "sebastien-rosset", "createdAt": "2020-01-17T16:45:34Z", "path": "modules/openapi-generator/src/main/resources/go-experimental/api.mustache", "diffHunk": "@@ -242,7 +242,7 @@ func (r api{{operationId}}Request) Execute() ({{#returnType}}{{{.}}}, {{/returnT\n \tif r.ctx != nil {\n \t\t// API Key Authentication\n \t\tif auth, ok := r.ctx.Value(ContextAPIKeys).(map[string]APIKey); ok {\n-\t\t\tif auth, ok := auth[\"{{keyParamName}}\"]; ok {\n+\t\t\tif auth, ok := auth[\"{{#vendorExtensions.x-lookup}}{{.}}{{/vendorExtensions.x-lookup}}{{^vendorExtensions.x-lookup}}{{name}}{{/vendorExtensions.x-lookup}}\"]; ok {", "originalCommit": "5d0184d2390b3f14d7dea759786477385eaa40fb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODYzMDg2NA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#discussion_r368630864", "bodyText": "@sebastien-rosset I agree we should document it. Personally I would move the wiki to /docs so it's editable by contributors.", "author": "jirikuncar", "createdAt": "2020-01-20T16:18:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzMjQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTk4MzY4MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#discussion_r369983681", "bodyText": "I saw the switch from {{keyParamName}} to {{name}}. Is keyParamName casuing issue?", "author": "wing328", "createdAt": "2020-01-23T08:30:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzMjQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTk4NDg5Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#discussion_r369984892", "bodyText": "Another minor feedback is that when I saw {{#vendorExtensions.x-lookup}}, I really have no idea what lookup means in this case.\nWhat about {{#vendorExtensions.x-auth-id-alias}} instead?", "author": "wing328", "createdAt": "2020-01-23T08:33:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzMjQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDE1NTQ4OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#discussion_r370155488", "bodyText": "@wing328 other languages are using {{keyParamName}} and - yes - {{name}} can cause problem if query param and header have the same name.", "author": "jirikuncar", "createdAt": "2020-01-23T14:39:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzMjQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDE1ODEzNw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#discussion_r370158137", "bodyText": "I don't have any strong opinion about the name. At first I thought about it as key aliasing, but during the implementation I have changed my mind can call it x-lookup since it's more about from where the value is looked up.\nI have to also update #4966 after we take a decision here.", "author": "jirikuncar", "createdAt": "2020-01-23T14:44:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzMjQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTA1MjIyMg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#discussion_r381052222", "bodyText": "I like William's suggestion of x-auth-id-alias.\nAlso, it sounds like {{name}} should be changed back to {{keyParamName}}? Maybe it's usage in {{^vendorExtensions.x-lookup}}{{name}}{{/vendorExtensions.x-lookup}} was unintentional?", "author": "jimschubert", "createdAt": "2020-02-19T02:54:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzMjQxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE3MjA1Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#discussion_r381172053", "bodyText": "I have changed the x-lookup to x-auth-id-alias.\nusing keyParamName is wrong since there can be a collision when using API key in header and query argument under same name: curl -H 'my-key: header-key' https://example.com/endpoint vs. curl https://example.com/endpoint?my-key=query-key", "author": "jirikuncar", "createdAt": "2020-02-19T09:33:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzMjQxNg=="}], "type": "inlineReview"}, {"oid": "942869a5cb2a38a13e5ac392e69126cc0e7695b0", "url": "https://github.com/OpenAPITools/openapi-generator/commit/942869a5cb2a38a13e5ac392e69126cc0e7695b0", "message": "Merge branch 'master' into api-key-x-lookup", "committedDate": "2020-02-19T09:25:02Z", "type": "commit"}, {"oid": "d88add548f6152eb33c4c78be1ccf4320de16e9a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d88add548f6152eb33c4c78be1ccf4320de16e9a", "message": "x-lookup to x-auth-id-alias", "committedDate": "2020-02-19T09:27:03Z", "type": "commit"}]}