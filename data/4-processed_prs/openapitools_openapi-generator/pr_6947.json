{"pr_number": 6947, "pr_title": "typescript-node: clean up require and import", "pr_createdAt": "2020-07-15T14:28:05Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/6947", "timeline": [{"oid": "0f96c39ea1f8ad3fb080918ed5e47508d6d7dbd5", "url": "https://github.com/OpenAPITools/openapi-generator/commit/0f96c39ea1f8ad3fb080918ed5e47508d6d7dbd5", "message": "Fix for issue 4656 typescript-node generate invalid require statement instead of import statement", "committedDate": "2020-07-15T09:22:07Z", "type": "commit"}, {"oid": "0b1d179d69d512743c0e1a86197a3dfe9e781e9a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/0b1d179d69d512743c0e1a86197a3dfe9e781e9a", "message": "Fixed broken link under testing templates", "committedDate": "2020-07-15T09:47:47Z", "type": "commit"}, {"oid": "dd86be369b387729cfb4687e7849b235aa726cfe", "url": "https://github.com/OpenAPITools/openapi-generator/commit/dd86be369b387729cfb4687e7849b235aa726cfe", "message": "Result of run generate-samples.sh / typescript-node*", "committedDate": "2020-07-15T10:24:34Z", "type": "commit"}, {"oid": "b03d6327331cf2c99af7d4a0b7b9ebbc71f4ece0", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b03d6327331cf2c99af7d4a0b7b9ebbc71f4ece0", "message": "import stmt depending on flag supportsES6", "committedDate": "2020-07-15T14:16:33Z", "type": "commit"}, {"oid": "660e78c2fbf285e14f84041c8548842c9e1e3b2c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/660e78c2fbf285e14f84041c8548842c9e1e3b2c", "message": "Update petstore sample for typescript-node", "committedDate": "2020-07-15T14:17:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MDQzNg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6947#discussion_r455180436", "bodyText": "The import var = require does not make much sense to me. This should be probably const localVarRequest = require('request').\nOr did I oversee something?", "author": "DanielRuf", "createdAt": "2020-07-15T16:32:55Z", "path": "modules/openapi-generator/src/main/resources/typescript-node/api-single.mustache", "diffHunk": "@@ -1,6 +1,13 @@\n {{>licenseInfo}}\n+\n+{{#supportsES6}}\n+import localVarRequest from 'request';\n+import http from 'http';\n+{{/supportsES6}}\n+{{^supportsES6}}\n import localVarRequest = require('request');", "originalCommit": "660e78c2fbf285e14f84041c8548842c9e1e3b2c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MDY5NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6947#discussion_r455180695", "bodyText": "Same for the other parts.", "author": "DanielRuf", "createdAt": "2020-07-15T16:33:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MDQzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY5NTMxNg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6947#discussion_r460695316", "bodyText": "Yeah thats right, i'll fix it :)", "author": "laubfall", "createdAt": "2020-07-27T07:26:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MDQzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc0NzU5Ng==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6947#discussion_r460747596", "bodyText": "I'm getting some typescript errors with const http = require. These are \"TS2503: Cannot find namespace 'http'.\" and \"error TS4055: Return type of public method from exported class has or is using private name 'http'.\". As described here: https://stackoverflow.com/questions/31173738/typescript-getting-error-ts2304-cannot-find-name-require there are some ways to make this work, but to be honest i don't see a reason why to make a difference at this point. All other modules are imported with the \"import .. from\" stmt independent of the ES6 flag. So i removed the switch and changed the tsconfig to make the imports http/request work. What do you think about this solution?", "author": "laubfall", "createdAt": "2020-07-27T09:01:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MDQzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc0ODQyMA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6947#discussion_r460748420", "bodyText": "For TypeScript to use these you need the types for the Nodejs internal ones. Basically @types/node.", "author": "DanielRuf", "createdAt": "2020-07-27T09:02:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MDQzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc0OTI0Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6947#discussion_r460749242", "bodyText": "The current solution should be fine.", "author": "DanielRuf", "createdAt": "2020-07-27T09:04:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MDQzNg=="}], "type": "inlineReview"}, {"oid": "ad3cde0150087538f661d6b0bd496baccbe628c9", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ad3cde0150087538f661d6b0bd496baccbe628c9", "message": "import ... from stmt for http/request module", "committedDate": "2020-07-27T09:00:14Z", "type": "commit"}, {"oid": "547e30521f96f8879fae76eca197ab7df20b99cc", "url": "https://github.com/OpenAPITools/openapi-generator/commit/547e30521f96f8879fae76eca197ab7df20b99cc", "message": "update samples", "committedDate": "2020-07-28T02:32:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM1NDg3Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6947#discussion_r461354877", "bodyText": "Why this change? ./ makes not much sense in my opinion.", "author": "DanielRuf", "createdAt": "2020-07-28T06:46:43Z", "path": "samples/client/petstore/typescript-node/default/.openapi-generator/FILES", "diffHunk": "@@ -5,10 +5,10 @@ api/petApi.ts\n api/storeApi.ts\n api/userApi.ts\n git_push.sh\n-model/apiResponse.ts\n-model/category.ts\n-model/order.ts\n-model/pet.ts\n-model/tag.ts\n-model/user.ts\n+model/./apiResponse.ts", "originalCommit": "547e30521f96f8879fae76eca197ab7df20b99cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA4MDE3MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6947#discussion_r463080170", "bodyText": "Agreed ./ is not needed. We'll tackle it separately.", "author": "wing328", "createdAt": "2020-07-30T15:26:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM1NDg3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzUwNDIxMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6947#discussion_r463504211", "bodyText": "Ok, so there is nothing left here to todo for the PR?", "author": "laubfall", "createdAt": "2020-07-31T09:25:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM1NDg3Nw=="}], "type": "inlineReview"}, {"oid": "b09227c6db284ace83c4609f377c1314e8ed8f9f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b09227c6db284ace83c4609f377c1314e8ed8f9f", "message": "update doc", "committedDate": "2020-07-30T15:20:47Z", "type": "commit"}]}