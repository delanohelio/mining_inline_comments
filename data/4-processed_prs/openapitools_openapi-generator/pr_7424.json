{"pr_number": 7424, "pr_title": "[Python-experimental] Don't mandate passing in required value as argument", "pr_createdAt": "2020-09-15T13:31:59Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/7424", "timeline": [{"oid": "c0579635f1061c35a63f916886e202bf65339e4c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c0579635f1061c35a63f916886e202bf65339e4c", "message": "[Python-experimental] Don't mandate passing in required value as argument", "committedDate": "2020-09-18T06:27:22Z", "type": "commit"}, {"oid": "c0579635f1061c35a63f916886e202bf65339e4c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c0579635f1061c35a63f916886e202bf65339e4c", "message": "[Python-experimental] Don't mandate passing in required value as argument", "committedDate": "2020-09-18T06:27:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA4OTU4Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r491089582", "bodyText": "I think that you can do this without have_value. How about this?\ndo not assign value + have_value before the if statement\n        if 'value' in kwargs:\n            value = kwargs.pop('value')\n        elif args:\n            args = list(args)\n            value = args.pop(0)\n{{#defaultValue}}\n        else:\n            value = {{{defaultValue}}}\n{{/defaultValue}}\n{{^defaultValue}}\n        else:\n            raise ApiTypeError(\n                \"value is required, but not passed in args or kwargs and doesn't have default\",\n                path_to_item=_path_to_item,\n                valid_classes=(self.__class__,),\n            )\n{{/defaultValue}}\n\nMy understanding is that all ModelSimple instances need an assigned value.", "author": "spacether", "createdAt": "2020-09-18T17:24:21Z", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,36 +8,47 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-\n-{{/hasRequired}}\n         Keyword Args:\n-{{^hasRequired}}\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} defaults to {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-{{/hasRequired}}\n {{> python-experimental/model_templates/docstring_init_required_kwargs }}\n         \"\"\"\n \n-{{^hasRequired}}\n+        value = None\n+        have_value = False\n         if 'value' in kwargs:\n             value = kwargs.pop('value')\n+            have_value = True\n         elif args:\n             args = list(args)\n             value = args.pop(0)\n+            have_value = True\n+{{#defaultValue}}\n         else:\n             value = {{{defaultValue}}}\n-{{/hasRequired}}\n+            have_value = True\n+{{/defaultValue}}", "originalCommit": "c0579635f1061c35a63f916886e202bf65339e4c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUzNjIzMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r492536231", "bodyText": "Yeah, that's a good point, I'll do it.", "author": "bkabrda", "createdAt": "2020-09-22T07:49:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA4OTU4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDczMDk1OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r494730958", "bodyText": "Thank you!", "author": "spacether", "createdAt": "2020-09-25T03:46:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA4OTU4Mg=="}], "type": "inlineReview"}, {"oid": "5355f802afb80dae3033d2338dd43c89dc6a4957", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5355f802afb80dae3033d2338dd43c89dc6a4957", "message": "Remove usage of have_value", "committedDate": "2020-09-22T08:24:57Z", "type": "commit"}, {"oid": "0e3d3a3aa4df64bec4c103797ed01bd55caf3a7e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/0e3d3a3aa4df64bec4c103797ed01bd55caf3a7e", "message": "Address additional review comments", "committedDate": "2020-09-23T09:27:36Z", "type": "commit"}, {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b", "url": "https://github.com/OpenAPITools/openapi-generator/commit/5aed86ea03f11666a72f050abd3ffb25fb353c2b", "message": "Fix tests according to the code change", "committedDate": "2020-09-23T09:36:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMDg2Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r494720863", "bodyText": "Please delete this line setting value as None.\nNone may be a valid value for an instance, like nullable models, or an enum with a None option.\nBecause of that we should not set an initial value of None for the variable value.", "author": "spacether", "createdAt": "2020-09-25T03:04:10Z", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,30 +8,39 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-\n-{{/hasRequired}}\n         Keyword Args:\n-{{^hasRequired}}\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} defaults to {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-{{/hasRequired}}\n {{> python-experimental/model_templates/docstring_init_required_kwargs }}\n         \"\"\"\n \n-{{^hasRequired}}\n+        value = None", "originalCommit": "5aed86ea03f11666a72f050abd3ffb25fb353c2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMTQ1NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r494721455", "bodyText": "Please remove this hasRequired block.\nIn this case there is no default value. There must always be an input value for modelSimple models. We don't need to filter by hasRequired any more.", "author": "spacether", "createdAt": "2020-09-25T03:06:42Z", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,30 +8,39 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-\n-{{/hasRequired}}\n         Keyword Args:\n-{{^hasRequired}}\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} defaults to {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-{{/hasRequired}}\n {{> python-experimental/model_templates/docstring_init_required_kwargs }}\n         \"\"\"\n \n-{{^hasRequired}}\n+        value = None\n         if 'value' in kwargs:\n             value = kwargs.pop('value')\n         elif args:\n             args = list(args)\n             value = args.pop(0)\n+{{#defaultValue}}\n         else:\n             value = {{{defaultValue}}}\n+{{/defaultValue}}\n+{{^defaultValue}}\n+{{#hasRequired}}", "originalCommit": "5aed86ea03f11666a72f050abd3ffb25fb353c2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMTk5Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r494721993", "bodyText": "Can you remove value from args here, or describe it as args[0] rather than value?\nWe no longer explicitly have value in the args signature. We also define it in kwargs. The user can definitely pass it in in args[0] or kwargs['value']", "author": "spacether", "createdAt": "2020-09-25T03:08:51Z", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,30 +8,39 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501", "originalCommit": "5aed86ea03f11666a72f050abd3ffb25fb353c2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDczMDgzNg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r494730836", "bodyText": "How about changing FROM if omitted the server will use the default value of {{{defaultValue}}} TO defaults to {{{defaultValue}}} like we have in the kwargs value definition", "author": "spacether", "createdAt": "2020-09-25T03:45:43Z", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,30 +8,39 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501", "originalCommit": "5aed86ea03f11666a72f050abd3ffb25fb353c2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "38f258ac9eadee8e2684ea2dbc405bfc3c6edf22", "url": "https://github.com/OpenAPITools/openapi-generator/commit/38f258ac9eadee8e2684ea2dbc405bfc3c6edf22", "message": "Does not set None as value initial value, removes hasRequired tag usage, updates docstring", "committedDate": "2020-09-29T16:23:44Z", "type": "commit"}]}