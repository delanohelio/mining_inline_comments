{"pr_number": 5182, "pr_title": "[core][typescript][perl] Ensure model.parent is also added to model.allParents with multiple inheritance", "pr_createdAt": "2020-01-31T20:21:59Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/5182", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY2OTMyNA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5182#discussion_r373669324", "bodyText": "not sure how we ended up here having a test without any assertions :)", "author": "amakhrov", "createdAt": "2020-01-31T20:22:37Z", "path": "modules/openapi-generator/src/test/java/org/openapitools/codegen/DefaultCodegenTest.java", "diffHunk": "@@ -528,9 +528,31 @@ public void testAllOfRequired() {\n         Schema child = openAPI.getComponents().getSchemas().get(\"clubForCreation\");\n         codegen.setOpenAPI(openAPI);\n         CodegenModel childModel = codegen.fromModel(\"clubForCreation\", child);\n-        showVars(childModel);\n+        Assert.assertEquals(getRequiredVars(childModel), Collections.singletonList(\"name\"));", "originalCommit": "ce65af478ab209aa7279771c74f79a4888116219", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk0NjM1OQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5182#discussion_r373946359", "bodyText": "is the comment above still valid?", "author": "macjohnny", "createdAt": "2020-02-03T07:03:56Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -996,13 +997,20 @@ public static String getParentName(ComposedSchema composedSchema, Map<String, Sc\n                     } else {\n                         LOGGER.debug(\"Not a parent since discriminator.propertyName is not set {}\", s.get$ref());\n                         // not a parent since discriminator.propertyName is not set\n+                        refedParentNames.add(parentName);", "originalCommit": "ce65af478ab209aa7279771c74f79a4888116219", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk0NzQxNw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5182#discussion_r373947417", "bodyText": "Yes it is. Also note the same existing comment in line 961 above.\nFor some reason, which is not clear to me, openapi generator treats this scenario (oneOf with a single $ref, where the referenced schema has no discriminator) as inheritance, despite the lack of discriminator (which would normally mean composition and not inheritance).\nMy fix doesn't change this behavior. It just makes it (i believe) more correct", "author": "amakhrov", "createdAt": "2020-02-03T07:08:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk0NjM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk0ODAxNQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5182#discussion_r373948015", "bodyText": "actually, no. you're right, I need to clean this up.\nfirst off, the comment duplicates the log message - obvious redundancy.\nsecond, I think it should be exactly same message as in line 961 (currently it's kind of similar, but with diffirent flavors)", "author": "amakhrov", "createdAt": "2020-02-03T07:11:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk0NjM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk0ODY1MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5182#discussion_r373948651", "bodyText": "@macjohnny sorry, I'm obviously not thinking clear tonight. Should just stop answering till tomorrow.\nGenerally, it looks like the same comments and messages are used in both places (here and inside getParentName() above). Which kind of is the intention. I'll double check tomorrow to make sure it still makes sense", "author": "amakhrov", "createdAt": "2020-02-03T07:13:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk0NjM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQ4Mjc5OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5182#discussion_r374482798", "bodyText": "I believe the comment here is still very precise.\nHowever, I removed the LOGGER.debug above that, which just repeated that comment.\nAlso renamed the variable to better reflect the intention. Hope it makes more sense now", "author": "amakhrov", "createdAt": "2020-02-04T05:39:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk0NjM1OQ=="}], "type": "inlineReview"}, {"oid": "2c47fa561de3d967cc31a1dbcba37ca053c581a7", "url": "https://github.com/OpenAPITools/openapi-generator/commit/2c47fa561de3d967cc31a1dbcba37ca053c581a7", "message": "Add real assertions in DefaultCodegenTest.java testAllOfXXX methods", "committedDate": "2020-02-06T16:27:51Z", "type": "commit"}, {"oid": "69e168a416426124cd338e0e4424cc3e977ed6b4", "url": "https://github.com/OpenAPITools/openapi-generator/commit/69e168a416426124cd338e0e4424cc3e977ed6b4", "message": "Add test to DefaultCodegenTest for an allOf composition with a single ref and no own props", "committedDate": "2020-02-06T16:27:51Z", "type": "commit"}, {"oid": "167388560e528b9f3d6f0114f7cf4629833a5e38", "url": "https://github.com/OpenAPITools/openapi-generator/commit/167388560e528b9f3d6f0114f7cf4629833a5e38", "message": "Ensure model.parent is also added to model.allParents when multipleInheritance is supported", "committedDate": "2020-02-06T16:27:51Z", "type": "commit"}, {"oid": "b25bfebf84d1685978da4379d8313653737b6542", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b25bfebf84d1685978da4379d8313653737b6542", "message": "Cleanup: remove LOGGER.debug, renamed refedParentNames to refedWithoutDiscriminator", "committedDate": "2020-02-06T16:31:26Z", "type": "commit"}, {"oid": "b25bfebf84d1685978da4379d8313653737b6542", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b25bfebf84d1685978da4379d8313653737b6542", "message": "Cleanup: remove LOGGER.debug, renamed refedParentNames to refedWithoutDiscriminator", "committedDate": "2020-02-06T16:31:26Z", "type": "forcePushed"}]}