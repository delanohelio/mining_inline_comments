{"pr_number": 5807, "pr_title": "[mysql] Add OAuth2 framework tables", "pr_createdAt": "2020-04-02T21:19:04Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/5807", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzEwNzg0Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5807#discussion_r407107843", "bodyText": "a password shouldn't be stored in the database. Really, we should have a hashed password or an encrypted blob", "author": "jimschubert", "createdAt": "2020-04-11T20:32:12Z", "path": "modules/openapi-generator/src/main/resources/mysql-schema/mysql_schema.mustache", "diffHunk": "@@ -42,4 +42,108 @@ CREATE TABLE IF NOT EXISTS {{#defaultDatabaseName}}`{{{defaultDatabaseName}}}`.{\n {{/x-mysqlSchema}}\n {{/vendorExtensions}}\n \n-{{/isArrayModel}}{{/hasVars}}{{/model}}{{/models}}\n\\ No newline at end of file\n+{{/isArrayModel}}{{/hasVars}}{{/model}}{{/models}}\n+{{#hasOAuthMethods}}\n+--\n+-- Table structure for table `oauth_clients`\n+--\n+CREATE TABLE IF NOT EXISTS `oauth_clients` (\n+  `client_id`            VARCHAR(80)    NOT NULL,\n+  `client_secret`        VARCHAR(80)    DEFAULT NULL,\n+  `redirect_uri`         VARCHAR(2000)  DEFAULT NULL,\n+  `grant_types`          VARCHAR(80)    DEFAULT NULL,\n+  `scope`                VARCHAR(4000)  DEFAULT NULL,\n+  `user_id`              VARCHAR(80)    DEFAULT NULL,\n+  PRIMARY KEY (`client_id`)\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n+\n+--\n+-- Table structure for table `oauth_access_tokens`\n+--\n+CREATE TABLE IF NOT EXISTS `oauth_access_tokens` (\n+  `access_token`         VARCHAR(40)    NOT NULL,\n+  `client_id`            VARCHAR(80)    DEFAULT NULL,\n+  `user_id`              VARCHAR(80)    DEFAULT NULL,\n+  `expires`              TIMESTAMP      NOT NULL,\n+  `scope`                VARCHAR(4000)  DEFAULT NULL,\n+  PRIMARY KEY (`access_token`)\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n+\n+--\n+-- Table structure for table `oauth_authorization_codes`\n+--\n+CREATE TABLE IF NOT EXISTS `oauth_authorization_codes` (\n+  `authorization_code`  VARCHAR(40)    NOT NULL,\n+  `client_id`           VARCHAR(80)    DEFAULT NULL,\n+  `user_id`             VARCHAR(80)    DEFAULT NULL,\n+  `redirect_uri`        VARCHAR(2000)  NOT NULL,\n+  `expires`             TIMESTAMP      NOT NULL,\n+  `scope`               VARCHAR(4000)  DEFAULT NULL,\n+  `id_token`            VARCHAR(1000)  DEFAULT NULL,\n+  PRIMARY KEY (`authorization_code`)\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n+\n+--\n+-- Table structure for table `oauth_refresh_tokens`\n+--\n+CREATE TABLE IF NOT EXISTS `oauth_refresh_tokens` (\n+  `refresh_token`       VARCHAR(40)    NOT NULL,\n+  `client_id`           VARCHAR(80)    DEFAULT NULL,\n+  `user_id`             VARCHAR(80)    DEFAULT NULL,\n+  `expires`             TIMESTAMP      on update CURRENT_TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n+  `scope`               VARCHAR(4000)  DEFAULT NULL,\n+  PRIMARY KEY (`refresh_token`)\n+) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n+\n+--\n+-- Table structure for table `oauth_users`\n+--\n+CREATE TABLE IF NOT EXISTS `oauth_users` (\n+  `username`            VARCHAR(80)    DEFAULT NULL,\n+  `password`            VARCHAR(80)    DEFAULT NULL,", "originalCommit": "3ee5ad36cab2c7d79985bca144f3f795d21f2c77", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzEwOTM0NA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5807#discussion_r407109344", "bodyText": "Do you suggest to rename column into password_hash to make it more clear? I thought it's obvious for anyone. I'm more worried about small column length (80).", "author": "ybelenko", "createdAt": "2020-04-11T20:48:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzEwNzg0Mw=="}], "type": "inlineReview"}, {"oid": "78be87810acf5a93357834da03505b2c13dbd173", "url": "https://github.com/OpenAPITools/openapi-generator/commit/78be87810acf5a93357834da03505b2c13dbd173", "message": "Add OAuth table schemas", "committedDate": "2020-04-20T13:38:30Z", "type": "commit"}, {"oid": "77971b73923d5f864283ad9b9efd1dc5e270105e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/77971b73923d5f864283ad9b9efd1dc5e270105e", "message": "Refresh samples", "committedDate": "2020-04-20T13:38:30Z", "type": "commit"}, {"oid": "399641ee21a35d2e20a65750560c4941fd6f2819", "url": "https://github.com/OpenAPITools/openapi-generator/commit/399641ee21a35d2e20a65750560c4941fd6f2819", "message": "Expand password column length", "committedDate": "2020-04-20T13:43:06Z", "type": "commit"}, {"oid": "a6c2ac1469e002e0817287b6dd25c887237b356e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/a6c2ac1469e002e0817287b6dd25c887237b356e", "message": "Add copyright notice of OAuth2 schema author", "committedDate": "2020-04-20T13:46:25Z", "type": "commit"}, {"oid": "38c9be175aa002808333937a735cbcc80e327f7e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/38c9be175aa002808333937a735cbcc80e327f7e", "message": "Refresh samples", "committedDate": "2020-04-20T13:50:58Z", "type": "commit"}, {"oid": "38c9be175aa002808333937a735cbcc80e327f7e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/38c9be175aa002808333937a735cbcc80e327f7e", "message": "Refresh samples", "committedDate": "2020-04-20T13:50:58Z", "type": "forcePushed"}]}