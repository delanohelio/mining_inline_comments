{"pr_number": 5019, "pr_title": "[Python] fix numeric enum in python flask, aiohttp", "pr_createdAt": "2020-01-17T07:01:28Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/5019", "timeline": [{"oid": "432d060cf1c37da1c9bf9910b6e2f0a5fb50f74f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/432d060cf1c37da1c9bf9910b6e2f0a5fb50f74f", "message": "minor code format fix", "committedDate": "2020-01-17T06:41:44Z", "type": "commit"}, {"oid": "d789278aad6823ef64c1af7ac8555a2f71e5b2e3", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d789278aad6823ef64c1af7ac8555a2f71e5b2e3", "message": "fix numeric enum in python flask and aiohttp", "committedDate": "2020-01-17T06:58:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0Mzc4MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368043780", "bodyText": "We are tying to minimize the usage of flake8 E501 and other flake8 opt out lines.\nCan you spread this to a multiline statement so we won't need  # noqa: E501?", "author": "spacether", "createdAt": "2020-01-17T17:10:16Z", "path": "modules/openapi-generator/src/main/resources/python-flask/model.mustache", "diffHunk": "@@ -116,6 +118,7 @@ class {{classname}}(Model):\n {{/isMapContainer}}\n {{/isContainer}}\n {{^isContainer}}\n+        allowed_values = [{{#isNullable}}None,{{/isNullable}}{{#allowableValues}}{{#values}}{{#isString}}\"{{/isString}}{{{this}}}{{#isString}}\"{{/isString}}{{^-last}}, {{/-last}}{{/values}}{{/allowableValues}}]  # noqa: E501", "originalCommit": "d789278aad6823ef64c1af7ac8555a2f71e5b2e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NDUxNA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368044514", "bodyText": "We are tying to minimize the usage of flake8 E501 and other flake8 opt out lines.\nCan you spread this to a multiline statement so we won't need # noqa: E501?", "author": "spacether", "createdAt": "2020-01-17T17:11:58Z", "path": "modules/openapi-generator/src/main/resources/python-aiohttp/model.mustache", "diffHunk": "@@ -89,8 +89,8 @@ class {{classname}}(Model):\n         :type {{name}}: {{dataType}}\n         \"\"\"\n {{#isEnum}}\n-        allowed_values = [{{#allowableValues}}{{#values}}\"{{{this}}}\"{{^-last}}, {{/-last}}{{/values}}{{/allowableValues}}]\n {{#isContainer}}\n+        allowed_values = [{{#isNullable}}None,{{/isNullable}}{{#allowableValues}}{{#values}}{{#items.isString}}\"{{/items.isString}}{{{this}}}{{#items.isString}}\"{{/items.isString}}{{^-last}}, {{/-last}}{{/values}}{{/allowableValues}}]  # noqa: E501", "originalCommit": "d789278aad6823ef64c1af7ac8555a2f71e5b2e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NDU2Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368044563", "bodyText": "We are tying to minimize the usage of flake8 E501 and other flake8 opt out lines.\nCan you spread this to a multiline statement so we won't need # noqa: E501?", "author": "spacether", "createdAt": "2020-01-17T17:12:06Z", "path": "modules/openapi-generator/src/main/resources/python-aiohttp/model.mustache", "diffHunk": "@@ -109,6 +109,7 @@ class {{classname}}(Model):\n {{/isMapContainer}}\n {{/isContainer}}\n {{^isContainer}}\n+        allowed_values = [{{#isNullable}}None,{{/isNullable}}{{#allowableValues}}{{#values}}{{#isString}}\"{{/isString}}{{{this}}}{{#isString}}\"{{/isString}}{{^-last}}, {{/-last}}{{/values}}{{/allowableValues}}]  # noqa: E501", "originalCommit": "d789278aad6823ef64c1af7ac8555a2f71e5b2e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NDY1Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368044652", "bodyText": "We are tying to minimize the usage of flake8 E501 and other flake8 opt out lines.\nCan you spread this to a multiline statement so we won't need # noqa: E501?", "author": "spacether", "createdAt": "2020-01-17T17:12:20Z", "path": "modules/openapi-generator/src/main/resources/python-flask/model.mustache", "diffHunk": "@@ -96,8 +98,8 @@ class {{classname}}(Model):\n         :type {{name}}: {{dataType}}\n         \"\"\"\n {{#isEnum}}\n-        allowed_values = [{{#allowableValues}}{{#values}}\"{{{this}}}\"{{^-last}}, {{/-last}}{{/values}}{{/allowableValues}}]  # noqa: E501\n {{#isContainer}}\n+        allowed_values = [{{#isNullable}}None,{{/isNullable}}{{#allowableValues}}{{#values}}{{#items.isString}}\"{{/items.isString}}{{{this}}}{{#items.isString}}\"{{/items.isString}}{{^-last}}, {{/-last}}{{/values}}{{/allowableValues}}]  # noqa: E501", "originalCommit": "d789278aad6823ef64c1af7ac8555a2f71e5b2e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxMjg0Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368212847", "bodyText": "Let's do this in a separate PR instead. I'll open an issue to track it to see if anyone has the time to improve it.\n(this PR simply plots the fix from the python client template)", "author": "wing328", "createdAt": "2020-01-18T07:39:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NDY1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxODg4Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368218882", "bodyText": "Are you suggesting that we remove the E501s in a separate PR? That sounds good.", "author": "spacether", "createdAt": "2020-01-18T10:05:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NDY1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxOTM5NA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368219394", "bodyText": "Created #5030 for tracking.", "author": "wing328", "createdAt": "2020-01-18T10:18:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NDY1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NjY0Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368046647", "bodyText": "These spec updates are unexpected in this pull review because we did not edit the spec file.\nCan you please add the below sample generation files to https://github.com/OpenAPITools/openapi-generator/blob/master/bin/utils/ensure-up-to-date?\n\npython-aiohttp\npython-flask-python2\npython-flask", "author": "spacether", "createdAt": "2020-01-17T17:17:18Z", "path": "samples/server/petstore/python-aiohttp/openapi_server/openapi/openapi.yaml", "diffHunk": "@@ -32,7 +32,7 @@ paths:\n         required: true\n         x-body-name: body\n       responses:\n-        405:\n+        \"405\":", "originalCommit": "d789278aad6823ef64c1af7ac8555a2f71e5b2e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxMzAzNw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368213037", "bodyText": "Added to ensure-up-to-date.\nThese scripts are using petstore.yaml (original) but not the fake petstore spec (which has numeric enums)", "author": "wing328", "createdAt": "2020-01-18T07:44:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NjY0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxOTAzNQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368219035", "bodyText": "Can we add a model with numeric enums in petstore.yaml?\nThat lets us verify this fix in the repo and this PR. Or a java test like I mention below also verifies the fix.", "author": "spacether", "createdAt": "2020-01-18T10:08:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NjY0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIxOTM3OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5019#discussion_r368219378", "bodyText": "We can update the script to use the fake petstore spec instead (petstore.yaml shouldn't be updated)\nWhen a generator gets mature, we will use fake petstore spec instead of petstore.yaml/json as the generator should be able to handle those edge cases in fake petstore spec.\nI'm not sure if these generators can handle the edge cases in fake petstore spec.", "author": "wing328", "createdAt": "2020-01-18T10:17:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA0NjY0Nw=="}], "type": "inlineReview"}, {"oid": "07e39fb475ffa2dfe42be9878582089af178949d", "url": "https://github.com/OpenAPITools/openapi-generator/commit/07e39fb475ffa2dfe42be9878582089af178949d", "message": "add python-server-all.sh to ensure-up-to-date", "committedDate": "2020-01-18T07:46:10Z", "type": "commit"}]}