{"pr_number": 7354, "pr_title": "[cli] Batch: support multiple/nested !include directive", "pr_createdAt": "2020-09-04T23:02:49Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/7354", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEyMDAzOQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7354#discussion_r489120039", "bodyText": "Should be batch not !batch in the first changed sentence.\nAnd The suffixes in the last sentence.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            modified by `--includes-base-dir`. Starting with 5.0.0, the `!batch` command supports multiple `!include` properties, either sequential or nested. In order to support multiple `!include` properties in a JSON file, the property name can have a suffix, e.g. `!include1`, `!include2`, etc. The suffix have no meaning other than providing unique property names.\n          \n          \n            \n            modified by `--includes-base-dir`. Starting with 5.0.0, the `batch` command supports multiple `!include` properties, either sequential or nested. In order to support multiple `!include` properties in a JSON file, the property name can have a suffix, e.g. `!include1`, `!include2`, `!include_asdf`, etc. The suffixes have no meaning other than providing unique property names. The only requirement is that the property start with `!include`. Nested documents are loaded and merged in declaration order.", "author": "jimschubert", "createdAt": "2020-09-16T02:13:39Z", "path": "docs/usage.md", "diffHunk": "@@ -602,7 +602,7 @@ openapi-generator generate -i petstore.yaml -g typescript-fetch -o out \\\n The `batch` command allows you to move all CLI arguments supported by the `generate` command into a YAML or JSON file.\n \n *NOTE*: This command supports an additional `!include` property which may point to another \"shared\" file, the base path to which can be\n-modified by `--includes-base-dir`.\n+modified by `--includes-base-dir`. Starting with 5.0.0, the `!batch` command supports multiple `!include` properties, either sequential or nested. In order to support multiple `!include` properties in a JSON file, the property name can have a suffix, e.g. `!include1`, `!include2`, etc. The suffix have no meaning other than providing unique property names.", "originalCommit": "0a614a17f91bd12ee1bc72cb01d1441cca458a0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEyNDI0NA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7354#discussion_r489124244", "bodyText": "I wonder if we should move inputSpec from here to jaxrs-datelib-j8-nested.yaml to verify that the initial !include processing will also load sibling properties?", "author": "jimschubert", "createdAt": "2020-09-16T02:29:03Z", "path": "modules/openapi-generator-cli/src/test/resources/batch/jaxrs-datelib-j8-nested-include.yaml", "diffHunk": "@@ -0,0 +1,8 @@\n+---\n+\"!include\": common/jaxrs-datelib-j8.yaml\n+generatorName: jaxrs-jersey\n+inputSpec: batch/specs/petstore.yaml", "originalCommit": "0a614a17f91bd12ee1bc72cb01d1441cca458a0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTEyNDM1MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7354#discussion_r489124350", "bodyText": "I wonder if we should move inputSpec from here to jaxrs-datelib-j8-nested.json to verify that the initial !include processing will also load sibling properties?\nI tested the suggestion locally for both JSON and YAML to verify the functionality.", "author": "jimschubert", "createdAt": "2020-09-16T02:29:23Z", "path": "modules/openapi-generator-cli/src/test/resources/batch/jaxrs-datelib-j8-nested-include.json", "diffHunk": "@@ -0,0 +1,10 @@\n+{\n+  \"!include\": \"common/jaxrs-datelib-j8.json\",\n+  \"generatorName\": \"jaxrs-jersey\",\n+  \"inputSpec\": \"batch/specs/petstore.yaml\",", "originalCommit": "0a614a17f91bd12ee1bc72cb01d1441cca458a0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bfdf21693341e81bb3a0d088facbfd7a66cc793a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/bfdf21693341e81bb3a0d088facbfd7a66cc793a", "message": "De-tabbed the file.", "committedDate": "2020-09-16T11:48:22Z", "type": "forcePushed"}, {"oid": "6d86b0ab7dfcc33a50c5df16f18d3b6e5fc5eb28", "url": "https://github.com/OpenAPITools/openapi-generator/commit/6d86b0ab7dfcc33a50c5df16f18d3b6e5fc5eb28", "message": "[cli] Allow nested !include in batch command\n\n* Added sequenntial and nested `!include' support for the CLI batch generate command.\n\n* Added test cases.\n\n* Edited documentation.", "committedDate": "2020-09-17T01:21:55Z", "type": "commit"}, {"oid": "d0f16f52c747516192271c44c600180c1c3aa986", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d0f16f52c747516192271c44c600180c1c3aa986", "message": "Move inputSpec into top-level of nested imports to verify merge functionality.", "committedDate": "2020-09-17T01:30:08Z", "type": "commit"}, {"oid": "e757334f5dc2e23687f38f100c4967b8b96102df", "url": "https://github.com/OpenAPITools/openapi-generator/commit/e757334f5dc2e23687f38f100c4967b8b96102df", "message": "Test property merging in nested imports in batch", "committedDate": "2020-09-17T01:44:06Z", "type": "commit"}, {"oid": "e757334f5dc2e23687f38f100c4967b8b96102df", "url": "https://github.com/OpenAPITools/openapi-generator/commit/e757334f5dc2e23687f38f100c4967b8b96102df", "message": "Test property merging in nested imports in batch", "committedDate": "2020-09-17T01:44:06Z", "type": "forcePushed"}]}