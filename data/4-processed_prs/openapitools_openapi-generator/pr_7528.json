{"pr_number": 7528, "pr_title": "[PHP] Small tweaks for php generator, PHPStan level 1", "pr_createdAt": "2020-09-28T11:00:31Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/7528", "timeline": [{"oid": "feb6597cc9bfd4b0b9375b34ced58ea6ed348fbd", "url": "https://github.com/OpenAPITools/openapi-generator/commit/feb6597cc9bfd4b0b9375b34ced58ea6ed348fbd", "message": "Small tweaks for php generator, PHPStan level 1", "committedDate": "2020-09-28T10:56:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1NjU4Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7528#discussion_r495856582", "bodyText": "The previous statement basically made no sense, it's just a null check in disguise.", "author": "dkarlovi", "createdAt": "2020-09-28T11:01:12Z", "path": "modules/openapi-generator/src/main/resources/php/ObjectSerializer.mustache", "diffHunk": "@@ -354,8 +354,8 @@ class ObjectSerializer\n                     continue;\n                 }\n \n-                $propertyValue = $data->{$instance::attributeMap()[$property]};\n-                if (isset($propertyValue)) {\n+                if (isset($data->{$instance::attributeMap()[$property]})) {\n+                    $propertyValue = $data->{$instance::attributeMap()[$property]};", "originalCommit": "feb6597cc9bfd4b0b9375b34ced58ea6ed348fbd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1NjY3Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7528#discussion_r495856677", "bodyText": "Code style fix.", "author": "dkarlovi", "createdAt": "2020-09-28T11:01:26Z", "path": "modules/openapi-generator/src/main/resources/php/api.mustache", "diffHunk": "@@ -63,18 +63,18 @@ use {{invokerPackage}}\\ObjectSerializer;\n      * @param ClientInterface $client\n      * @param Configuration   $config\n      * @param HeaderSelector  $selector\n-     * @param int             $host_index (Optional) host index to select the list of hosts if defined in the OpenAPI spec\n+     * @param int             $hostIndex (Optional) host index to select the list of hosts if defined in the OpenAPI spec", "originalCommit": "feb6597cc9bfd4b0b9375b34ced58ea6ed348fbd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1NzYzMA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7528#discussion_r495857630", "bodyText": "This one produced nonsensical code unless you have body params:\n\nsets $_tempBody to null\nchecks if $_tempBody is not null\n\nIt can never be not null because the code mutating it is not generated, why are the checks for it generated then?", "author": "dkarlovi", "createdAt": "2020-09-28T11:03:25Z", "path": "modules/openapi-generator/src/main/resources/php/api.mustache", "diffHunk": "@@ -567,14 +560,16 @@ use {{invokerPackage}}\\ObjectSerializer;\n         }\n \n         // for model (json/xml)\n-        if (isset($_tempBody)) {\n-            // $_tempBody is the method argument, if present\n+        {{#bodyParams}}", "originalCommit": "feb6597cc9bfd4b0b9375b34ced58ea6ed348fbd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUyODc0MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7528#discussion_r500528741", "bodyText": "This abandoned else really bothers me... Did you forgot to delete it? Or maybe you wanted it as elseif as it was before?", "author": "ybelenko", "createdAt": "2020-10-06T19:00:01Z", "path": "modules/openapi-generator/src/main/resources/php/api.mustache", "diffHunk": "@@ -567,14 +560,16 @@ use {{invokerPackage}}\\ObjectSerializer;\n         }\n \n         // for model (json/xml)\n-        if (isset($_tempBody)) {\n-            // $_tempBody is the method argument, if present\n+        {{#bodyParams}}\n+        if (isset(${{paramName}})) {\n             if ($headers['Content-Type'] === 'application/json') {\n-                $httpBody = \\GuzzleHttp\\json_encode(ObjectSerializer::sanitizeForSerialization($_tempBody));\n+                $httpBody = \\GuzzleHttp\\json_encode(ObjectSerializer::sanitizeForSerialization(${{paramName}}));\n             } else {\n-                $httpBody = $_tempBody;\n+                $httpBody = ${{paramName}};\n             }\n-        } elseif (count($formParams) > 0) {\n+        } else", "originalCommit": "feb6597cc9bfd4b0b9375b34ced58ea6ed348fbd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU0NTQ0NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7528#discussion_r500545445", "bodyText": "The issue is the if is only needed when you have the body, otherwise I delete it and the elseif becomes if. I don't know how to do it better with Mustache. \ud83d\ude48", "author": "dkarlovi", "createdAt": "2020-10-06T19:30:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUyODc0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDU4NzI1MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7528#discussion_r500587251", "bodyText": "Seems like I fixed it in my commit.", "author": "ybelenko", "createdAt": "2020-10-06T20:50:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUyODc0MQ=="}], "type": "inlineReview"}, {"oid": "98672440bd5f8e0513783ec63daaf1d0f9b097e8", "url": "https://github.com/OpenAPITools/openapi-generator/commit/98672440bd5f8e0513783ec63daaf1d0f9b097e8", "message": "Fix elseif constraint", "committedDate": "2020-10-06T20:48:02Z", "type": "commit"}]}