{"pr_number": 6227, "pr_title": "[codegen][python-experimental] Add configuration knob to disable JSON schema validation", "pr_createdAt": "2020-05-08T23:34:25Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/6227", "timeline": [{"oid": "1fa71ad65ed0f778b3e39152c7a5c2e70d8e4c6c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/1fa71ad65ed0f778b3e39152c7a5c2e70d8e4c6c", "message": "Add knob to disable JSON schema structural validation", "committedDate": "2020-05-08T23:32:17Z", "type": "commit"}, {"oid": "8c8ff6a2c572cbdf9466a1b1a3206ebc4a06383a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/8c8ff6a2c572cbdf9466a1b1a3206ebc4a06383a", "message": "Add knob to disable JSON schema structural validation", "committedDate": "2020-05-08T23:33:23Z", "type": "commit"}, {"oid": "c8d05f2ac19333b40d877f1d46d1c6cdc9bd2bc1", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c8d05f2ac19333b40d877f1d46d1c6cdc9bd2bc1", "message": "Fix formatting issues", "committedDate": "2020-05-09T00:02:32Z", "type": "commit"}, {"oid": "8f1860d661ba9ed4a33ae816737b9baa9f1d03ca", "url": "https://github.com/OpenAPITools/openapi-generator/commit/8f1860d661ba9ed4a33ae816737b9baa9f1d03ca", "message": "execute sample scripts", "committedDate": "2020-05-09T01:27:57Z", "type": "commit"}, {"oid": "fc06890e6b9508b0294210de1e5cac1a539afd11", "url": "https://github.com/OpenAPITools/openapi-generator/commit/fc06890e6b9508b0294210de1e5cac1a539afd11", "message": "execute sample scripts", "committedDate": "2020-05-09T01:33:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc0MDU2Ng==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6227#discussion_r422740566", "bodyText": "It looks like type checking not impacted by this change.\nCan you mention that in this comment?\nWhat about enum value checking?", "author": "spacether", "createdAt": "2020-05-11T01:54:20Z", "path": "samples/openapi3/client/petstore/python/petstore_api/configuration.py", "diffHunk": "@@ -49,6 +49,19 @@ class Configuration(object):\n       then all undeclared properties received by the server are injected into the\n       additional properties map. In that case, there are undeclared properties, and\n       nothing to discard.\n+    :param disable_client_side_validation: Boolean value indicating whether to disable\n+      the JSON schema structural validation rules specified in the OpenAPI document.\n+      This includes multipleOf, maximum, exclusiveMaximum, minimum, exclusiveMinimum,\n+      maxLength, minLength, pattern...\n+      By default, the validation is performed for data generated locally by the client\n+      and data received from the server, independent of any validation performed by\n+      the server side.\n+      If the input data does not satisfy the JSON schema validation rules specified\n+      in the OpenAPI document, an exception is raised.\n+      If disable_client_side_validation is set to true, structural validation is\n+      disabled. This can be useful to troubleshoot data validation problem, such as\n+      when the OpenAPI document validation rules do not match the actual API data\n+      received by the server.", "originalCommit": "fc06890e6b9508b0294210de1e5cac1a539afd11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc2MDgwMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6227#discussion_r423760801", "bodyText": "I'm going to make it a comma-separated list of JSON schema validation keywords. I think this will be more specific and provide more control. Also, that means it can be extends to more keywords.", "author": "sebastien-rosset", "createdAt": "2020-05-12T14:05:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc0MDU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzgwMTA5MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6227#discussion_r423801091", "bodyText": "That's a good plan", "author": "spacether", "createdAt": "2020-05-12T14:55:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc0MDU2Ng=="}], "type": "inlineReview"}, {"oid": "1a40b74d23e55b2128ecdeacf45473fbef48491a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/1a40b74d23e55b2128ecdeacf45473fbef48491a", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into python-add-knob-to-disable-validation", "committedDate": "2020-05-12T01:37:20Z", "type": "commit"}, {"oid": "2dd51ad7de1bc8d20c2dff03825dc64f6e660512", "url": "https://github.com/OpenAPITools/openapi-generator/commit/2dd51ad7de1bc8d20c2dff03825dc64f6e660512", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into python-add-knob-to-disable-validation", "committedDate": "2020-05-12T13:33:22Z", "type": "commit"}, {"oid": "f46d0c5539ba593e4d96e576fc143e1aea8a1fb4", "url": "https://github.com/OpenAPITools/openapi-generator/commit/f46d0c5539ba593e4d96e576fc143e1aea8a1fb4", "message": "fix multipleOf validation issue", "committedDate": "2020-05-12T17:00:36Z", "type": "commit"}, {"oid": "b14e93e1b091bed4acc4d4fabdf41d6e04c1a14c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b14e93e1b091bed4acc4d4fabdf41d6e04c1a14c", "message": "Add validation log for multipleOf. Add customizable validation checks. add unit tests for JSON schema validation", "committedDate": "2020-05-12T17:02:01Z", "type": "commit"}, {"oid": "c2db11f1950b062a40ae20df3e740a29c7807fb4", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c2db11f1950b062a40ae20df3e740a29c7807fb4", "message": "Add validation log for multipleOf. Add customizable validation checks. add unit tests for JSON schema validation", "committedDate": "2020-05-12T17:06:00Z", "type": "commit"}, {"oid": "ece58e16bd5d80e3a32a3a78964848d84568972d", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ece58e16bd5d80e3a32a3a78964848d84568972d", "message": "Add validation log for multipleOf. Add customizable validation checks. add unit tests for JSON schema validation", "committedDate": "2020-05-12T17:39:42Z", "type": "commit"}, {"oid": "06f9b818bf380f87df0569f55ae08430bada3d59", "url": "https://github.com/OpenAPITools/openapi-generator/commit/06f9b818bf380f87df0569f55ae08430bada3d59", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into python-add-knob-to-disable-validation", "committedDate": "2020-05-12T17:40:44Z", "type": "commit"}, {"oid": "e512302787993d7215085339671eb34670c02e2e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/e512302787993d7215085339671eb34670c02e2e", "message": "Add validation log for multipleOf. Add customizable validation checks. add unit tests for JSON schema validation. Fix for python 2", "committedDate": "2020-05-12T18:08:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMTk3NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6227#discussion_r424031975", "bodyText": "How about using ApiValueError so it can be captured by using our OpenApiException base exception class?", "author": "spacether", "createdAt": "2020-05-12T21:03:01Z", "path": "modules/openapi-generator/src/main/resources/python/configuration.mustache", "diffHunk": "@@ -277,6 +298,13 @@ conf = {{{packageName}}}.Configuration(\n \n     def __setattr__(self, name, value):\n         object.__setattr__(self, name, value)\n+        if name == 'disable_client_side_validation' and value is not None:\n+            s = set(value.split(','))\n+            for v in s:\n+                if v not in JSON_SCHEMA_VALIDATION_KEYWORDS:\n+                    raise ValueError(", "originalCommit": "e512302787993d7215085339671eb34670c02e2e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA2MjkyNg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6227#discussion_r424062926", "bodyText": "done", "author": "sebastien-rosset", "createdAt": "2020-05-12T22:09:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMTk3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzNDc3Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6227#discussion_r424034773", "bodyText": "How about naming this disabled_client_side_validations and making its type string only?\nThat way \"\" means that no validations are disabled and the type is always string.", "author": "spacether", "createdAt": "2020-05-12T21:08:39Z", "path": "modules/openapi-generator/src/main/resources/python/configuration.mustache", "diffHunk": "@@ -43,6 +49,19 @@ class Configuration(object):\n       then all undeclared properties received by the server are injected into the\n       additional properties map. In that case, there are undeclared properties, and\n       nothing to discard.\n+    :param disable_client_side_validation (string/None): Comma-separated list of", "originalCommit": "e512302787993d7215085339671eb34670c02e2e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA2Mjk2OQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6227#discussion_r424062969", "bodyText": "done", "author": "sebastien-rosset", "createdAt": "2020-05-12T22:10:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzNDc3Mw=="}], "type": "inlineReview"}, {"oid": "ea2b170f56c59935439367cec08359fa2dcea484", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ea2b170f56c59935439367cec08359fa2dcea484", "message": "address review comments", "committedDate": "2020-05-12T22:08:49Z", "type": "commit"}]}