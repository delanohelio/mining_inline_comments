{"pr_number": 7427, "pr_title": "[Python] correct return types if multiple responses are defined ", "pr_createdAt": "2020-09-15T14:56:14Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/7427", "timeline": [{"oid": "7635651d327af4279ce814f7638cc1d0b5a8365e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/7635651d327af4279ce814f7638cc1d0b5a8365e", "message": "update python mustache templates", "committedDate": "2020-09-15T09:50:39Z", "type": "commit"}, {"oid": "fee3d88c56c83bbe6bd09b97eb9d0dd7cb2d3db2", "url": "https://github.com/OpenAPITools/openapi-generator/commit/fee3d88c56c83bbe6bd09b97eb9d0dd7cb2d3db2", "message": "bug fix", "committedDate": "2020-09-17T15:02:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMzMjU0Ng==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7427#discussion_r490332546", "bodyText": "Rather than using two parameters for return type\n\nreturn_type\nresponse_types_map\n\nhow about using a single parameter like:\n\nreturn_types which is a map of status code to data type\n\nPlease see this similar-to PR which was never finished", "author": "spacether", "createdAt": "2020-09-17T15:13:36Z", "path": "modules/openapi-generator/src/main/resources/python/api.mustache", "diffHunk": "@@ -263,6 +280,7 @@ class {{classname}}(object):\n             post_params=form_params,\n             files=local_var_files,\n             response_type={{#returnType}}'{{returnType}}'{{/returnType}}{{^returnType}}None{{/returnType}},  # noqa: E501\n+            response_types_map=response_types_map,", "originalCommit": "fee3d88c56c83bbe6bd09b97eb9d0dd7cb2d3db2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjEzOTY2OQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7427#discussion_r492139669", "bodyText": "@spacether\nI ve just removed response_type\nCould you check the pr one more time ?", "author": "ksvirkou-hubspot", "createdAt": "2020-09-21T15:17:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMzMjU0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjE1Mjc5Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7427#discussion_r492152793", "bodyText": "Thank you for using only one parameter. This pr has failing ci testa because the samples need to be regenerated. Can you please regenerate samples with these commands?\nmvn clean install\nbin/generate_samples", "author": "spacether", "createdAt": "2020-09-21T15:28:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMzMjU0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzMzOTEyNQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7427#discussion_r493339125", "bodyText": "@spacether\nI ve just regenerated", "author": "ksvirkou-hubspot", "createdAt": "2020-09-23T09:00:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDMzMjU0Ng=="}], "type": "inlineReview"}, {"oid": "9ea1c9893fc676a25b853e70418419272f0099ee", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9ea1c9893fc676a25b853e70418419272f0099ee", "message": "rm response_type", "committedDate": "2020-09-21T15:15:44Z", "type": "commit"}, {"oid": "46c52c6f813187b95230f4f7832da642d089fb15", "url": "https://github.com/OpenAPITools/openapi-generator/commit/46c52c6f813187b95230f4f7832da642d089fb15", "message": "generated samples", "committedDate": "2020-09-23T08:58:31Z", "type": "commit"}, {"oid": "e3ad7df5fd29955fd1a6363a32abd93d8a70edaf", "url": "https://github.com/OpenAPITools/openapi-generator/commit/e3ad7df5fd29955fd1a6363a32abd93d8a70edaf", "message": "resolve conflict", "committedDate": "2020-09-24T08:42:37Z", "type": "commit"}, {"oid": "356536c8a89d4c5cf3cf86f03a63b104688bd399", "url": "https://github.com/OpenAPITools/openapi-generator/commit/356536c8a89d4c5cf3cf86f03a63b104688bd399", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator into python/multiple_responses", "committedDate": "2020-09-29T14:22:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgyNjYwMA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7427#discussion_r496826600", "bodyText": "Should these empty mappings be omitted?", "author": "spacether", "createdAt": "2020-09-29T15:39:36Z", "path": "samples/client/petstore/python-asyncio/petstore_api/api/pet_api.py", "diffHunk": "@@ -674,6 +688,12 @@ def get_pet_by_id_with_http_info(self, pet_id, **kwargs):  # noqa: E501\n \n         # Authentication setting\n         auth_settings = ['api_key']  # noqa: E501\n+        \n+        response_types_map={\n+            200: \"Pet\",\n+            400: \"\",", "originalCommit": "356536c8a89d4c5cf3cf86f03a63b104688bd399", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg0NjcwOA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7427#discussion_r496846708", "bodyText": "Yes it Should be empty\n\"400\": {\n\"description\": \"Invalid status value\"\n}\n\nhttps://petstore.swagger.io/v2/swagger.json", "author": "ksvirkou-hubspot", "createdAt": "2020-09-29T15:58:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgyNjYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg4MTE5Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7427#discussion_r496881192", "bodyText": "So then should the value be None for these cases? It looks like that is what we were defaulting to before.\nAdding a test that returns a response with an invalid status would verify that this does what you want it to do.\nIf you want to add that, here is a similar to test that tests sending to and receiving from a server and deserializing.\nIn it we mock the returned response data and we deserialize into whatever is defined in response_type/response_types_map.", "author": "spacether", "createdAt": "2020-09-29T16:34:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgyNjYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzU3MDY2NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7427#discussion_r497570665", "bodyText": "@spacether\ndone", "author": "ksvirkou-hubspot", "createdAt": "2020-09-30T14:47:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgyNjYwMA=="}], "type": "inlineReview"}, {"oid": "4398efc2b1f738ea2cda03b6e98b6c795234df04", "url": "https://github.com/OpenAPITools/openapi-generator/commit/4398efc2b1f738ea2cda03b6e98b6c795234df04", "message": "samples", "committedDate": "2020-09-29T15:49:56Z", "type": "commit"}, {"oid": "97eaeca348e88db82f99fe9348b4eda75090dddb", "url": "https://github.com/OpenAPITools/openapi-generator/commit/97eaeca348e88db82f99fe9348b4eda75090dddb", "message": "set None if a type is empty", "committedDate": "2020-09-30T13:10:17Z", "type": "commit"}, {"oid": "14e6a52922e12099700266a6c9191c0f67400281", "url": "https://github.com/OpenAPITools/openapi-generator/commit/14e6a52922e12099700266a6c9191c0f67400281", "message": "regenerated samples", "committedDate": "2020-09-30T13:17:48Z", "type": "commit"}]}