{"pr_number": 5624, "pr_title": "[C] various bug fixes and supporting bools", "pr_createdAt": "2020-03-18T02:50:54Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/5624", "timeline": [{"oid": "b29e46eb44c54264ab698b143c89a4f49e6a281b", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b29e46eb44c54264ab698b143c89a4f49e6a281b", "message": "Removed stray \"printf\"s in\nmodules/openapi-generator/src/main/java/org/openapitools/codegen/languages/CLibcurlClientCodegen.java", "committedDate": "2020-03-16T13:12:16Z", "type": "commit"}, {"oid": "806f2060a75d55cedc9c8b4db5eb917fd37ed52a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/806f2060a75d55cedc9c8b4db5eb917fd37ed52a", "message": "Support for booleans in C client", "committedDate": "2020-03-16T15:28:03Z", "type": "commit"}, {"oid": "cf528fd3cc223a49b3264cdd66113dfa8967d3cf", "url": "https://github.com/OpenAPITools/openapi-generator/commit/cf528fd3cc223a49b3264cdd66113dfa8967d3cf", "message": "Update README.md", "committedDate": "2020-03-18T02:38:07Z", "type": "commit"}, {"oid": "ee01a9eb8f4ac9bad43394bf8e0d07198dbaeb7f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ee01a9eb8f4ac9bad43394bf8e0d07198dbaeb7f", "message": "Change to C API mustache files to solve issue #5623", "committedDate": "2020-03-18T02:41:07Z", "type": "commit"}, {"oid": "019e3d4fc934615db71b936a93c69f39276afaf5", "url": "https://github.com/OpenAPITools/openapi-generator/commit/019e3d4fc934615db71b936a93c69f39276afaf5", "message": "Merge branch 'C_booleans_and_2338' of https://github.com/michelealbano/openapi-generator into C_booleans_and_2338", "committedDate": "2020-03-18T02:43:35Z", "type": "commit"}, {"oid": "4762cbf54081b9c1e1378119cd96ceb8afb038a4", "url": "https://github.com/OpenAPITools/openapi-generator/commit/4762cbf54081b9c1e1378119cd96ceb8afb038a4", "message": "Merge branch 'master' into C_booleans_and_2338", "committedDate": "2020-03-18T02:53:18Z", "type": "commit"}, {"oid": "325e2b1b9a4ed27d277221e311dc802ca4f54b52", "url": "https://github.com/OpenAPITools/openapi-generator/commit/325e2b1b9a4ed27d277221e311dc802ca4f54b52", "message": "Merge branch 'master' into C_booleans_and_2338", "committedDate": "2020-03-19T09:09:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MTcyMw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r394961723", "bodyText": "I think this shoud be  {{#isNumeric}}", "author": "ityuhui", "createdAt": "2020-03-19T11:34:22Z", "path": "modules/openapi-generator/src/main/resources/C-libcurl/model-body.mustache", "diffHunk": "@@ -389,12 +394,18 @@ cJSON *{{classname}}_convertToJSON({{classname}}_t *{{classname}}) {\n         goto fail;\n     }\n     {{/isString}}\n-    {{^isString}}\n+    {{#isBoolean}}\n+    if(cJSON_AddBoolToObject({{{name}}}, \"\", *(cJSON_bool *){{{name}}}ListEntry->data) == NULL)\n+    {\n+        goto fail;\n+    }\n+    {{/isBoolean}}\n+    {{^isNumeric}}", "originalCommit": "325e2b1b9a4ed27d277221e311dc802ca4f54b52", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTAwODc2Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r395008767", "bodyText": "Yes!", "author": "michelealbano", "createdAt": "2020-03-19T13:04:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MTcyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MjM0Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r394962347", "bodyText": "Could you please remove this comment ?", "author": "ityuhui", "createdAt": "2020-03-19T11:35:39Z", "path": "modules/openapi-generator/src/main/resources/C-libcurl/model-body.mustache", "diffHunk": "@@ -433,12 +444,19 @@ cJSON *{{classname}}_convertToJSON({{classname}}_t *{{classname}}) {\n             goto fail;\n         }\n         {{/isString}}\n-        {{^isString}}\n+        {{#isNumeric}}\n         if(cJSON_AddNumberToObject(localMapObject, localKeyValue->key, *(double *)localKeyValue->value) == NULL)\n         {\n             goto fail;\n         }\n-        {{/isString}}\n+        {{/isNumeric}}\n+        {{#isBoolean}}\n+//         if(cJSON_AddBoolToObject(localMapObject, localKeyValue->key, (cJSON_bool)localKeyValue->value) == NULL)", "originalCommit": "325e2b1b9a4ed27d277221e311dc802ca4f54b52", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTAwOTEyOA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r395009128", "bodyText": "Done", "author": "michelealbano", "createdAt": "2020-03-19T13:04:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDk2MjM0Nw=="}], "type": "inlineReview"}, {"oid": "9e032e03e463d03bd380e4c10f99e086fa34a0d4", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9e032e03e463d03bd380e4c10f99e086fa34a0d4", "message": "Debugging of C's modle-body.mustache, as suggested by ityuhui", "committedDate": "2020-03-19T13:22:05Z", "type": "commit"}, {"oid": "912824dc61b93bad3d27dba8e89e289672fdf5a7", "url": "https://github.com/OpenAPITools/openapi-generator/commit/912824dc61b93bad3d27dba8e89e289672fdf5a7", "message": "git statusMerge branch 'C_booleans_and_2338' of\nhttps://github.com/michelealbano/openapi-generator into\nC_booleans_and_2338", "committedDate": "2020-03-19T13:23:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2Njc4Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r395066787", "bodyText": "Could you please concatenate the two lines (102,103) to one line, just like previous ?", "author": "ityuhui", "createdAt": "2020-03-19T14:27:44Z", "path": "modules/openapi-generator/src/main/resources/C-libcurl/api-body.mustache", "diffHunk": "@@ -99,7 +99,8 @@ end:\n //\n {{/notes}}\n {{#returnType}}{{#returnTypeIsPrimitive}}{{#returnSimpleType}}{{{.}}}*{{/returnSimpleType}}{{^returnSimpleType}}{{#isListContainer}}{{{.}}}_t*{{/isListContainer}}{{#isMapContainer}}{{{.}}}{{/isMapContainer}}{{/returnSimpleType}}{{/returnTypeIsPrimitive}}{{^returnTypeIsPrimitive}}{{{.}}}_t*{{/returnTypeIsPrimitive}}{{/returnType}}{{^returnType}}void{{/returnType}}\n-{{{classname}}}_{{{operationId}}}(apiClient_t *apiClient{{#allParams}}, {{#isPrimitiveType}}{{#isNumber}}{{{dataType}}}{{/isNumber}}{{#isLong}}{{{dataType}}}{{/isLong}}{{#isInteger}}{{{dataType}}}{{/isInteger}}{{#isDouble}}{{{dataType}}}{{/isDouble}}{{#isFloat}}{{{dataType}}}{{/isFloat}}{{#isBoolean}}{{dataType}}{{/isBoolean}}{{#isEnum}}{{#isString}}{{projectName}}_{{operationId}}_{{baseName}}_e{{/isString}}{{/isEnum}}{{^isEnum}}{{#isString}}{{{dataType}}} *{{/isString}}{{/isEnum}}{{#isByteArray}}{{{dataType}}}{{/isByteArray}}{{#isDate}}{{{dataType}}}{{/isDate}}{{#isDateTime}}{{{dataType}}}{{/isDateTime}}{{#isFile}}{{{dataType}}}{{/isFile}}{{#isFreeFormObject}}{{dataType}}_t *{{/isFreeFormObject}}{{/isPrimitiveType}}{{^isPrimitiveType}}{{#isModel}}{{#isEnum}}{{datatypeWithEnum}}_e{{/isEnum}}{{^isEnum}}{{{dataType}}}_t *{{/isEnum}}{{/isModel}}{{^isModel}}{{^isListContainer}}{{#isEnum}}{{datatypeWithEnum}}_e{{/isEnum}}{{/isListContainer}}{{/isModel}}{{#isUuid}}{{dataType}} *{{/isUuid}}{{#isEmail}}{{dataType}}{{/isEmail}}{{/isPrimitiveType}}{{#isContainer}}{{#isListContainer}}{{dataType}}_t *{{/isListContainer}}{{#isMapContainer}}{{dataType}}{{/isMapContainer}}{{/isContainer}} {{{paramName}}}{{/allParams}})\n+{{{classname}}}_{{{operationId}}}(apiClient_t *apiClient{{#allParams}}, {{#isPrimitiveType}}{{#isNumber}}{{{dataType}}}{{/isNumber}}{{#isLong}}{{{dataType}}}{{/isLong}}{{#isInteger}}{{{dataType}}}{{/isInteger}}{{#isDouble}}{{{dataType}}}{{/isDouble}}{{#isFloat}}{{{dataType}}}{{/isFloat}}{{#isBoolean}}{{dataType}}{{/isBoolean}}{{#isEnum}}{{#isString}}{{projectName}}_{{operationId}}_{{baseName}}_e{{/isString}}{{/isEnum}}{{^isEnum}}{{#isString}}{{{dataType}}} *{{/isString}}{{/isEnum}}{{#isByteArray}}{{{dataType}}}{{/isByteArray}}{{#isDate}}{{{dataType}}}{{/isDate}}{{#isDateTime}}{{{dataType}}}{{/isDateTime}}{{#isFile}}{{{dataType}}}{{/isFile}}{{#isFreeFormObject}}{{dataType}}_t *{{/isFreeFormObject}}{{/isPrimitiveType}}{{^isListContainer}}{{^isPrimitiveType}}\n+{{#isModel}}{{#isEnum}}{{datatypeWithEnum}}_e{{/isEnum}}{{^isEnum}}{{{dataType}}}_t *{{/isEnum}}{{/isModel}}{{^isModel}}{{#isEnum}}{{datatypeWithEnum}}_e{{/isEnum}}{{/isModel}}{{#isUuid}}{{dataType}} *{{/isUuid}}{{#isEmail}}{{dataType}}{{/isEmail}}{{/isPrimitiveType}}{{/isListContainer}}{{#isContainer}}{{#isListContainer}}{{dataType}}_t *{{/isListContainer}}{{#isMapContainer}}{{dataType}}{{/isMapContainer}}{{/isContainer}} {{{paramName}}} {{/allParams}})", "originalCommit": "912824dc61b93bad3d27dba8e89e289672fdf5a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2ODA3Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r395068073", "bodyText": "Done", "author": "michelealbano", "createdAt": "2020-03-19T14:29:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2Njc4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2Njk2Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r395066967", "bodyText": "Could you please concatenate the two lines (35,36) to one line, just like previous ?", "author": "ityuhui", "createdAt": "2020-03-19T14:27:56Z", "path": "modules/openapi-generator/src/main/resources/C-libcurl/api-header.mustache", "diffHunk": "@@ -32,7 +32,8 @@ typedef enum  { {{projectName}}_{{operationId}}_{{enumName}}_NULL = 0{{#enumVars\n //\n {{/notes}}\n {{#returnType}}{{#returnTypeIsPrimitive}}{{#returnSimpleType}}{{{.}}}*{{/returnSimpleType}}{{^returnSimpleType}}{{#isListContainer}}{{{.}}}_t*{{/isListContainer}}{{#isMapContainer}}{{{.}}}{{/isMapContainer}}{{/returnSimpleType}}{{/returnTypeIsPrimitive}}{{^returnTypeIsPrimitive}}{{{.}}}_t*{{/returnTypeIsPrimitive}}{{/returnType}}{{^returnType}}void{{/returnType}}\n-{{{classname}}}_{{{operationId}}}(apiClient_t *apiClient{{#allParams}} ,{{#isPrimitiveType}}{{#isNumber}}{{{dataType}}}{{/isNumber}}{{#isLong}}{{{dataType}}}{{/isLong}}{{#isInteger}}{{{dataType}}}{{/isInteger}}{{#isDouble}}{{{dataType}}}{{/isDouble}}{{#isFloat}}{{{dataType}}}{{/isFloat}}{{#isBoolean}}{{dataType}}{{/isBoolean}}{{#isEnum}}{{#isString}}{{projectName}}_{{operationId}}_{{baseName}}_e{{/isString}}{{/isEnum}}{{^isEnum}}{{#isString}}{{{dataType}}} *{{/isString}}{{/isEnum}}{{#isByteArray}}{{{dataType}}}{{/isByteArray}}{{#isDate}}{{{dataType}}}{{/isDate}}{{#isDateTime}}{{{dataType}}}{{/isDateTime}}{{#isFile}}{{{dataType}}}{{/isFile}}{{#isFreeFormObject}}{{dataType}}_t *{{/isFreeFormObject}}{{/isPrimitiveType}}{{^isPrimitiveType}}{{#isModel}}{{#isEnum}}{{datatypeWithEnum}}_e{{/isEnum}}{{^isEnum}}{{{dataType}}}_t *{{/isEnum}}{{/isModel}}{{^isModel}}{{^isListContainer}}{{#isEnum}}{{datatypeWithEnum}}_e{{/isEnum}}{{/isListContainer}}{{/isModel}}{{#isUuid}}{{dataType}} *{{/isUuid}}{{#isEmail}}{{dataType}}{{/isEmail}}{{/isPrimitiveType}}{{#isContainer}}{{#isListContainer}}{{dataType}}_t *{{/isListContainer}}{{#isMapContainer}}{{dataType}}{{/isMapContainer}}{{/isContainer}} {{{paramName}}}{{/allParams}});\n+{{{classname}}}_{{{operationId}}}(apiClient_t *apiClient{{#allParams}}, {{#isPrimitiveType}}{{#isNumber}}{{{dataType}}}{{/isNumber}}{{#isLong}}{{{dataType}}}{{/isLong}}{{#isInteger}}{{{dataType}}}{{/isInteger}}{{#isDouble}}{{{dataType}}}{{/isDouble}}{{#isFloat}}{{{dataType}}}{{/isFloat}}{{#isBoolean}}{{dataType}}{{/isBoolean}}{{#isEnum}}{{#isString}}{{projectName}}_{{operationId}}_{{baseName}}_e{{/isString}}{{/isEnum}}{{^isEnum}}{{#isString}}{{{dataType}}} *{{/isString}}{{/isEnum}}{{#isByteArray}}{{{dataType}}}{{/isByteArray}}{{#isDate}}{{{dataType}}}{{/isDate}}{{#isDateTime}}{{{dataType}}}{{/isDateTime}}{{#isFile}}{{{dataType}}}{{/isFile}}{{#isFreeFormObject}}{{dataType}}_t *{{/isFreeFormObject}}{{/isPrimitiveType}}{{^isListContainer}}{{^isPrimitiveType}}\n+{{#isModel}}{{#isEnum}}{{datatypeWithEnum}}_e{{/isEnum}}{{^isEnum}}{{{dataType}}}_t *{{/isEnum}}{{/isModel}}{{^isModel}}{{#isEnum}}{{datatypeWithEnum}}_e{{/isEnum}}{{/isModel}}{{#isUuid}}{{dataType}} *{{/isUuid}}{{#isEmail}}{{dataType}}{{/isEmail}}{{/isPrimitiveType}}{{/isListContainer}}{{#isContainer}}{{#isListContainer}}{{dataType}}_t *{{/isListContainer}}{{#isMapContainer}}{{dataType}}{{/isMapContainer}}{{/isContainer}} {{{paramName}}} {{/allParams}});", "originalCommit": "912824dc61b93bad3d27dba8e89e289672fdf5a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2ODU3Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r395068572", "bodyText": "Done", "author": "michelealbano", "createdAt": "2020-03-19T14:29:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2Njk2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2ODI1MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r395068250", "bodyText": "This sample code is not regenerated by the latest template code.", "author": "ityuhui", "createdAt": "2020-03-19T14:29:31Z", "path": "samples/client/petstore/c/model/pet.c", "diffHunk": "@@ -110,6 +110,10 @@ cJSON *pet_convertToJSON(pet_t *pet) {\n     {\n         goto fail;\n     }\n+    if(cJSON_AddNumberToObject(photo_urls, \"\", *(double *)photo_urlsListEntry->data) == NULL)\n+    {\n+        goto fail;\n+    }", "originalCommit": "912824dc61b93bad3d27dba8e89e289672fdf5a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA4NjMwNA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5624#discussion_r395086304", "bodyText": "Done, and pushed to github", "author": "michelealbano", "createdAt": "2020-03-19T14:52:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2ODI1MA=="}], "type": "inlineReview"}, {"oid": "88d29cca7f7d7f68e1cf42b93d395561f03031d5", "url": "https://github.com/OpenAPITools/openapi-generator/commit/88d29cca7f7d7f68e1cf42b93d395561f03031d5", "message": "Final changes suggested by ityuhui", "committedDate": "2020-03-19T14:51:09Z", "type": "commit"}]}