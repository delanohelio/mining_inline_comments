{"pr_number": 7127, "pr_title": "Fix typescript-node generation when only models are generated", "pr_createdAt": "2020-08-04T19:57:23Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/7127", "timeline": [{"oid": "c66f811c418f673fbd6029e2c1f51e62b25e397a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c66f811c418f673fbd6029e2c1f51e62b25e397a", "message": "add model/index.ts\n\n- move export of all models to model/index.ts\n- move RequestFile definition to model/index.ts\n\nThis fixes #7126", "committedDate": "2020-08-04T19:38:12Z", "type": "commit"}, {"oid": "936b76424f267ec6303a752a90c489988be609b6", "url": "https://github.com/OpenAPITools/openapi-generator/commit/936b76424f267ec6303a752a90c489988be609b6", "message": "update samples", "committedDate": "2020-08-04T19:54:34Z", "type": "commit"}, {"oid": "fe55d197e924453633f14cacb75a72469ce23b22", "url": "https://github.com/OpenAPITools/openapi-generator/commit/fe55d197e924453633f14cacb75a72469ce23b22", "message": "Back out models/index.ts\n\nMake this backwards-compatible:\n\n- move `RequestFile` definition to `model/models.ts`\n- remove `model/index.ts`\n- re-export `RequestFile` from `api/apis.ts`\n- make generation of `ObjectSerializer` conditional", "committedDate": "2020-08-04T20:37:38Z", "type": "commit"}, {"oid": "08e724efb1e7669e04a51077d743e491b86c71a8", "url": "https://github.com/OpenAPITools/openapi-generator/commit/08e724efb1e7669e04a51077d743e491b86c71a8", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-05T15:19:29Z", "type": "commit"}, {"oid": "88419f1f26c9a173887840f3c9ea66f26e178e8b", "url": "https://github.com/OpenAPITools/openapi-generator/commit/88419f1f26c9a173887840f3c9ea66f26e178e8b", "message": "for some reason, Symfony isn't up to date", "committedDate": "2020-08-05T15:22:13Z", "type": "commit"}, {"oid": "989fd99c636f9a002c58349ba95e618981d06884", "url": "https://github.com/OpenAPITools/openapi-generator/commit/989fd99c636f9a002c58349ba95e618981d06884", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-17T13:32:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk0MTU3OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7127#discussion_r471941578", "bodyText": "please revert the changes in the /FILES files, as these cause the CI to fail.\nunfortunately, I haven't investigated why this occurs.\ncc @wing328", "author": "macjohnny", "createdAt": "2020-08-18T06:25:24Z", "path": "samples/server/petstore/php-symfony/SymfonyBundle-php/.openapi-generator/FILES", "diffHunk": "@@ -1,26 +1,26 @@\n-./Api/ApiServer.php\n-./Api/PetApiInterface.php\n-./Api/StoreApiInterface.php\n-./Api/UserApiInterface.php\n-./Controller/Controller.php\n-./Controller/PetController.php\n-./Controller/StoreController.php\n-./Controller/UserController.php\n-./Model/ApiResponse.php\n-./Model/Category.php\n-./Model/Order.php\n-./Model/Pet.php\n-./Model/Tag.php\n-./Model/User.php\n-./Service/JmsSerializer.php\n-./Service/SerializerInterface.php\n-./Service/StrictJsonDeserializationVisitor.php\n-./Service/SymfonyValidator.php\n-./Service/TypeMismatchException.php\n-./Service/ValidatorInterface.php\n-./Tests/AppKernel.php", "originalCommit": "989fd99c636f9a002c58349ba95e618981d06884", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1NTY2MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7127#discussion_r472255660", "bodyText": "Reverted and also updated to latest master", "author": "sarumont", "createdAt": "2020-08-18T14:48:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk0MTU3OA=="}], "type": "inlineReview"}, {"oid": "478ea53f3eee2afdacba88a3ba5138ca6599915e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/478ea53f3eee2afdacba88a3ba5138ca6599915e", "message": "reverts changes to php-symfony sample", "committedDate": "2020-08-18T14:44:31Z", "type": "commit"}, {"oid": "809290653e5898d0fc9d6dca3dbdeff4a7e8c876", "url": "https://github.com/OpenAPITools/openapi-generator/commit/809290653e5898d0fc9d6dca3dbdeff4a7e8c876", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-18T14:45:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQxNjYzNg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7127#discussion_r475416636", "bodyText": "I think all changed */FILES in your PR should be reverted.\nPlease also merge the current master again, to fix the build", "author": "macjohnny", "createdAt": "2020-08-24T08:12:34Z", "path": "samples/client/petstore/typescript-angular-v10-provided-in-root/builds/with-npm/.openapi-generator/FILES", "diffHunk": "@@ -9,12 +9,12 @@ configuration.ts\n encoder.ts\n git_push.sh\n index.ts\n-model/./apiResponse.ts", "originalCommit": "809290653e5898d0fc9d6dca3dbdeff4a7e8c876", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjUyNTA0Ng==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7127#discussion_r476525046", "bodyText": "Will do...those were all updated via generate-samples.sh, so there may be a bug there, too?", "author": "sarumont", "createdAt": "2020-08-25T15:10:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQxNjYzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0NTY5Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7127#discussion_r476545693", "bodyText": "It actually looks like master has the same changes for all FILES now, so hopefully this build will complete...", "author": "sarumont", "createdAt": "2020-08-25T15:38:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQxNjYzNg=="}], "type": "inlineReview"}, {"oid": "9e8de1d401ad11460960dedd2e89154900201949", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9e8de1d401ad11460960dedd2e89154900201949", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-25T15:11:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA3NzM5Ng==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7127#discussion_r477077396", "bodyText": "is this index file still being generated?\nwhy does the RequestDetailedFile occur in index.ts and models.ts?", "author": "macjohnny", "createdAt": "2020-08-26T07:01:05Z", "path": "samples/client/petstore/typescript-node/default/model/index.ts", "diffHunk": "@@ -0,0 +1,19 @@\n+export * from './apiResponse';", "originalCommit": "9e8de1d401ad11460960dedd2e89154900201949", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTM0OTgwMA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7127#discussion_r479349800", "bodyText": "Nope, it's not being generated anymore - removed!", "author": "sarumont", "createdAt": "2020-08-28T14:40:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA3NzM5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA3ODA0OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7127#discussion_r477078048", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // Object serialization only relevant if generating APIs, too\n          \n          \n            \n            {{! Object serialization only relevant if generating APIs, too }}\n          \n      \n    \n    \n  \n\nsee https://mustache.github.io/mustache.5.html#Comments", "author": "macjohnny", "createdAt": "2020-08-26T07:02:13Z", "path": "modules/openapi-generator/src/main/resources/typescript-node/models.mustache", "diffHunk": "@@ -1,10 +1,27 @@\n+{{#generateApis}}\n+import localVarRequest from 'request';\n+{{/generateApis}}\n+\n {{#models}}\n {{#model}}\n export * from '{{{ classFilename }}}';\n {{/model}}\n {{/models}}\n \n-import localVarRequest from 'request';\n+import * as fs from 'fs';\n+\n+export interface RequestDetailedFile {\n+    value: Buffer;\n+    options?: {\n+        filename?: string;\n+        contentType?: string;\n+    }\n+}\n+\n+export type RequestFile = string | Buffer | fs.ReadStream | RequestDetailedFile;\n+\n+// Object serialization only relevant if generating APIs, too", "originalCommit": "9e8de1d401ad11460960dedd2e89154900201949", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ac4b68c039b3cf30665fad380db0e940bb754372", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ac4b68c039b3cf30665fad380db0e940bb754372", "message": "moves comment to mustache comment rather than TS comment\n\nCo-authored-by: Esteban Gehring <esteban.gehring@gmail.com>", "committedDate": "2020-08-28T14:30:12Z", "type": "commit"}, {"oid": "2f2cd68d47010460124cfc6ef808775cf03b4133", "url": "https://github.com/OpenAPITools/openapi-generator/commit/2f2cd68d47010460124cfc6ef808775cf03b4133", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-08-28T14:32:19Z", "type": "commit"}, {"oid": "aa9b11c21a84ab9217b1b3d355be1579f058709e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/aa9b11c21a84ab9217b1b3d355be1579f058709e", "message": "removes stale files from samples (no longer generated)", "committedDate": "2020-08-28T14:37:44Z", "type": "commit"}, {"oid": "043b7447e42d760a09d1e8fcd713db253e4b690d", "url": "https://github.com/OpenAPITools/openapi-generator/commit/043b7447e42d760a09d1e8fcd713db253e4b690d", "message": "updates samples", "committedDate": "2020-08-28T14:38:17Z", "type": "commit"}]}