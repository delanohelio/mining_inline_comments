{"pr_number": 5521, "pr_title": "Allow browsers File type for files", "pr_createdAt": "2020-03-04T13:31:24Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/5521", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3MDc4OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5521#discussion_r393870788", "bodyText": "Not sure I agree that mutating the Buffer is more convenient or even more intuitive than passing a composite of {name, data}.\nWhat is the benefit of this approach?", "author": "amakhrov", "createdAt": "2020-03-17T18:02:59Z", "path": "samples/client/petstore/typescript/tests/default/test/api/PetApi.test.ts", "diffHunk": "@@ -120,7 +120,7 @@ describe(\"PetApi\", () =>{\n \n     it(\"uploadFile\", (done) => {\n         const image = fs.readFileSync(__dirname + \"/pet.png\")\n-        petApi.uploadFile(pet.id, \"Metadata\", { name: \"pet.png\", data: image}).then((response: any) => {\n+        petApi.uploadFile(pet.id, \"Metadata\", Object.assign(image, { name: \"pet.png\" })).then((response: any) => {", "originalCommit": "c3106f9cd39f170561cb8bd03354f301574b8c7e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE4MjExMw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5521#discussion_r394182113", "bodyText": "True, for node you could argue this not more / less convenient.\nI mostly did it because of the browser platform though.\nThere you usually handle File objects, which already contain a name.\nI'd be happy to hear how you would weigh this.", "author": "bodograumann", "createdAt": "2020-03-18T08:42:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3MDc4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTYwNzc5Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5521#discussion_r399607792", "bodyText": "This could also be an generator-specific configuration, couldn't it? Just generate the appropriate wrapper ({name, data} composite for anything node, and what is in this PR for the browser) and then internally map this to an appropriate type before doing all the api logic.", "author": "TiFu", "createdAt": "2020-03-28T02:26:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3MDc4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA5NTg0NA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5521#discussion_r410095844", "bodyText": "I could get on board with that, @TiFu. As long as you think that this won't be too much additional complexity.", "author": "bodograumann", "createdAt": "2020-04-17T09:12:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3MDc4OA=="}], "type": "inlineReview"}, {"oid": "c3106f9cd39f170561cb8bd03354f301574b8c7e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c3106f9cd39f170561cb8bd03354f301574b8c7e", "message": "Add test for jquery upload", "committedDate": "2020-03-04T13:04:23Z", "type": "forcePushed"}, {"oid": "d1ed4b90a448678f6bd5b8019b2fda64910bcf19", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d1ed4b90a448678f6bd5b8019b2fda64910bcf19", "message": "Allow passing file parameters as File objects\n\nThis is by far the most common use case. A `File` object already\ncontains the name attribute. This commit allows that information to be\nused directly.\nWhen sending a `Blob`, in most browsers the `File` constructor can be\nused to assign a file name. In all other browsers the alternative is\n```typescript\nObject.assign(data, { name: \"foobar.txt\" });\n```\nThat is why we explicitely pass the name as third parameter to\n`FormData.append`. This `Object.assign` method also works for `Buffer`\nobjects in node.\n\nIf one really does not want to touch the data object in the browser it\nis possible to define another reference to the data with\n```typescript\nnew Blob([data], { type: data.type })\n```\nor in node via\n```typescript\nBuffer.from(data)\n```", "committedDate": "2020-05-05T10:21:18Z", "type": "commit"}, {"oid": "d766248b9eef8fc5a81f5fc061b3ddbd6c3f0eae", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d766248b9eef8fc5a81f5fc061b3ddbd6c3f0eae", "message": "Add test for jquery upload", "committedDate": "2020-05-05T10:21:22Z", "type": "commit"}, {"oid": "bfb17e9e6aa59b2db7b0b71008274282298879b1", "url": "https://github.com/OpenAPITools/openapi-generator/commit/bfb17e9e6aa59b2db7b0b71008274282298879b1", "message": "Use HttpFile object for node platform", "committedDate": "2020-05-05T10:21:23Z", "type": "commit"}, {"oid": "cdcb5c4d946a0e5ccf9078cea9023cfe339bb5fa", "url": "https://github.com/OpenAPITools/openapi-generator/commit/cdcb5c4d946a0e5ccf9078cea9023cfe339bb5fa", "message": "Regenerate samples", "committedDate": "2020-05-05T10:21:24Z", "type": "forcePushed"}, {"oid": "3a6c31c8002bf020b634702b8c2e716ee1bedd4f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/3a6c31c8002bf020b634702b8c2e716ee1bedd4f", "message": "Regenerate samples", "committedDate": "2020-05-05T10:29:27Z", "type": "forcePushed"}, {"oid": "3a6c31c8002bf020b634702b8c2e716ee1bedd4f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/3a6c31c8002bf020b634702b8c2e716ee1bedd4f", "message": "Regenerate samples", "committedDate": "2020-05-05T10:29:27Z", "type": "commit"}]}