{"pr_number": 8149, "pr_title": "[dart][dart-dio] Enum improvements", "pr_createdAt": "2020-12-09T21:36:36Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/8149", "timeline": [{"oid": "49e758b63e3d93c74a1ad9a695cd5322fdbdbd37", "url": "https://github.com/OpenAPITools/openapi-generator/commit/49e758b63e3d93c74a1ad9a695cd5322fdbdbd37", "message": "[dart] Always use the correct enum data type\n\n* use raw strings for enum string values", "committedDate": "2020-12-10T14:37:00Z", "type": "commit"}, {"oid": "0e2588cdd47a0b74db7b2eb9ad0ce1e53bfb7cc6", "url": "https://github.com/OpenAPITools/openapi-generator/commit/0e2588cdd47a0b74db7b2eb9ad0ce1e53bfb7cc6", "message": "[dart-dio] Use raw strings for built_value enums\n\n`@BuiltValueEnumConst` does some wierd string handling in the generated code `r'\\$'` becomes `'$'`. This is different compared to the wireName in `@BuiltValueField`", "committedDate": "2020-12-10T14:39:59Z", "type": "commit"}, {"oid": "0e2588cdd47a0b74db7b2eb9ad0ce1e53bfb7cc6", "url": "https://github.com/OpenAPITools/openapi-generator/commit/0e2588cdd47a0b74db7b2eb9ad0ce1e53bfb7cc6", "message": "[dart-dio] Use raw strings for built_value enums\n\n`@BuiltValueEnumConst` does some wierd string handling in the generated code `r'\\$'` becomes `'$'`. This is different compared to the wireName in `@BuiltValueField`", "committedDate": "2020-12-10T14:39:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUwOTEwNw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8149#discussion_r540509107", "bodyText": "Found a mismatch between dart-dio and dart. a few files below you will find:\nstatic const dollar = EnumArraysJustSymbolEnum._(r'$');\n\nYou can see the $ isn't escaped with \\ but it is here, both are raw strings. I suspect this is breaking compatibility between them?", "author": "agilob", "createdAt": "2020-12-10T21:27:38Z", "path": "samples/openapi3/client/petstore/dart-dio/petstore_client_lib_fake/lib/model/inline_object2.dart", "diffHunk": "@@ -27,10 +27,10 @@ abstract class InlineObject2 implements Built<InlineObject2, InlineObject2Builde\n class InlineObject2EnumFormStringArray extends EnumClass {\n \n   /// Form parameter enum test (string array)\n-  @BuiltValueEnumConst(wireName: '>')\n+  @BuiltValueEnumConst(wireName: r'>')\n   static const InlineObject2EnumFormStringArray greaterThan = _$inlineObject2EnumFormStringArray_greaterThan;\n   /// Form parameter enum test (string array)\n-  @BuiltValueEnumConst(wireName: '$')\n+  @BuiltValueEnumConst(wireName: r'\\$')", "originalCommit": "0e2588cdd47a0b74db7b2eb9ad0ce1e53bfb7cc6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUxODc2OQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8149#discussion_r540518769", "bodyText": "See the comment here, this is specific to built_values Dart generator: https://github.com/OpenAPITools/openapi-generator/pull/8149/files#diff-f325b1ca8b03ba6f1ee25144eec1079de2cc2d853d6237eac40f157663bda2acR120", "author": "kuhnroyal", "createdAt": "2020-12-10T21:44:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUwOTEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUxOTg3Ng==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8149#discussion_r540519876", "bodyText": "ah thanks for that, missed comment. Well, it's fine then I expressed my opinion on use of built_value in another PR.", "author": "agilob", "createdAt": "2020-12-10T21:46:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUwOTEwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUxMzEzNQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8149#discussion_r540513135", "bodyText": "other.value == value\nthis is comparing references not contents of lists, so it's not what I would expect from == on enum. What are your expectations?", "author": "agilob", "createdAt": "2020-12-10T21:34:24Z", "path": "samples/openapi3/client/petstore/dart2/petstore_client_lib_fake/lib/model/inline_object2.dart", "diffHunk": "@@ -86,23 +86,22 @@ class InlineObject2EnumFormStringArrayEnum {\n   const InlineObject2EnumFormStringArrayEnum._(this.value);\n \n   /// The underlying value of this enum member.\n-  final String value;\n+  final List<String> value;\n \n   @override\n   bool operator ==(Object other) => identical(this, other) ||\n-      other is InlineObject2EnumFormStringArrayEnum && other.value == value ||\n-      other is String && other == value;\n+      other is InlineObject2EnumFormStringArrayEnum && other.value == value;", "originalCommit": "0e2588cdd47a0b74db7b2eb9ad0ce1e53bfb7cc6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUyMDYyNw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8149#discussion_r540520627", "bodyText": "Not a request for change , just asking.", "author": "agilob", "createdAt": "2020-12-10T21:47:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUxMzEzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUyNjI0NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8149#discussion_r540526245", "bodyText": "Yes this is a list but is actually completely wrong. This needs to be fixed in some other PR. An enum with a list as value is not valid. And the inline objects are gonna be removed soon.\nI know what causes this but it will get too big.", "author": "kuhnroyal", "createdAt": "2020-12-10T21:57:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUxMzEzNQ=="}], "type": "inlineReview"}]}