{"pr_number": 6493, "pr_title": "[BUG][python] Support named arrays", "pr_createdAt": "2020-05-29T16:33:44Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/6493", "timeline": [{"oid": "c43c1708891aa2e46721de6f31bc230a6716c3b6", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c43c1708891aa2e46721de6f31bc230a6716c3b6", "message": "[python] Support named arrays", "committedDate": "2020-05-29T16:32:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjYwMjQ3MA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r432602470", "bodyText": "\u2757", "author": "jirikuncar", "createdAt": "2020-05-29T16:34:37Z", "path": "samples/openapi3/client/petstore/python-experimental/petstore_api/api/fake_api.py", "diffHunk": "@@ -600,6 +601,109 @@ def __fake_outer_string_serialize(\n             callable=__fake_outer_string_serialize\n         )\n \n+        def __get_array_of_enums(\n+            self,\n+            **kwargs\n+        ):\n+            \"\"\"Array of Enums  # noqa: E501\n+\n+            This method makes a synchronous HTTP request by default. To make an\n+            asynchronous HTTP request, please pass async_req=True\n+            >>> thread = api.get_array_of_enums(async_req=True)\n+            >>> result = thread.get()\n+\n+\n+            Keyword Args:\n+                _return_http_data_only (bool): response data without head status\n+                    code and headers. Default is True.\n+                _preload_content (bool): if False, the urllib3.HTTPResponse object\n+                    will be returned without reading/decoding response data.\n+                    Default is True.\n+                _request_timeout (float/tuple): timeout setting for this request. If one\n+                    number provided, it will be total request timeout. It can also\n+                    be a pair (tuple) of (connection, read) timeouts.\n+                    Default is None.\n+                _check_input_type (bool): specifies if type checking\n+                    should be done one the data sent to the server.\n+                    Default is True.\n+                _check_return_type (bool): specifies if type checking\n+                    should be done one the data received from the server.\n+                    Default is True.\n+                _host_index (int): specifies the index of the server\n+                    that we want to use.\n+                    Default is 0.\n+                async_req (bool): execute request asynchronously\n+\n+            Returns:\n+                array_of_enums.ArrayOfEnums\n+                    If the method is called asynchronously, returns the request\n+                    thread.\n+            \"\"\"\n+            kwargs['async_req'] = kwargs.get(\n+                'async_req', False\n+            )\n+            kwargs['_return_http_data_only'] = kwargs.get(\n+                '_return_http_data_only', True\n+            )\n+            kwargs['_preload_content'] = kwargs.get(\n+                '_preload_content', True\n+            )\n+            kwargs['_request_timeout'] = kwargs.get(\n+                '_request_timeout', None\n+            )\n+            kwargs['_check_input_type'] = kwargs.get(\n+                '_check_input_type', True\n+            )\n+            kwargs['_check_return_type'] = kwargs.get(\n+                '_check_return_type', True\n+            )\n+            kwargs['_host_index'] = kwargs.get('_host_index', 0)\n+            return self.call_with_http_info(**kwargs)\n+\n+        self.get_array_of_enums = Endpoint(\n+            settings={\n+                'response_type': (array_of_enums.ArrayOfEnums,),", "originalCommit": "c43c1708891aa2e46721de6f31bc230a6716c3b6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjYwMjU1OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r432602558", "bodyText": "\u2757", "author": "jirikuncar", "createdAt": "2020-05-29T16:34:47Z", "path": "samples/openapi3/client/petstore/python-experimental/petstore_api/api/fake_api.py", "diffHunk": "@@ -36,6 +36,7 @@\n )\n from petstore_api.models import health_check_result\n from petstore_api.models import outer_composite\n+from petstore_api.models import array_of_enums", "originalCommit": "c43c1708891aa2e46721de6f31bc230a6716c3b6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc4NzUxMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r432787511", "bodyText": "Does the model AnimalFarm already demonstrate your use case?", "author": "spacether", "createdAt": "2020-05-30T00:03:13Z", "path": "modules/openapi-generator/src/test/resources/3_0/python-experimental/petstore-with-fake-endpoints-models-for-testing-with-http-signature.yaml", "diffHunk": "@@ -1703,6 +1716,10 @@ components:\n         - placed\n         - approved\n         - delivered\n+    ArrayOfEnums:\n+      type: array\n+      items:\n+        $ref: '#/components/schemas/OuterEnum'", "originalCommit": "c43c1708891aa2e46721de6f31bc230a6716c3b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyNzcwMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433127701", "bodyText": "I haven't seen it used as top level object. I can use it here instead. WDYT?", "author": "jirikuncar", "createdAt": "2020-06-01T09:16:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc4NzUxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM0OTQyMg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433349422", "bodyText": "What do you mean by top level object? Do you mean used in an endpoint?\nTesting shows that the same code path is hit with that model and this one so if you can use that schema and avoid adding this schema it would be preferred because it will keep our sample spec smaller.", "author": "spacether", "createdAt": "2020-06-01T16:31:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc4NzUxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5NjQwNQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433396405", "bodyText": "As I was not sure about the purpose, I have initially created new model. I am using the AnimalFarm now.", "author": "jirikuncar", "createdAt": "2020-06-01T17:59:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc4NzUxMQ=="}], "type": "inlineReview"}, {"oid": "7b109dedf59d2fda93c11b760f76660099fc3314", "url": "https://github.com/OpenAPITools/openapi-generator/commit/7b109dedf59d2fda93c11b760f76660099fc3314", "message": "Merge remote-tracking branch 'upstream/master' into python-experimental/named-arrays", "committedDate": "2020-06-01T17:03:37Z", "type": "commit"}, {"oid": "b8a1a37570afc48c1b172db77e3f1a7955c4fc8e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b8a1a37570afc48c1b172db77e3f1a7955c4fc8e", "message": "Fix named array type", "committedDate": "2020-06-01T18:04:18Z", "type": "commit"}, {"oid": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "url": "https://github.com/OpenAPITools/openapi-generator/commit/31407d4d579e5a67a06f0991c07593ef42f82dd2", "message": "Use ModelSimple", "committedDate": "2020-06-01T18:18:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYyOTgxMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433629811", "bodyText": "Can you fix the doc template so it lists the information for the AnimalFarm model here?\nName: N/A\nType: [animal.Animal]", "author": "spacether", "createdAt": "2020-06-02T05:34:13Z", "path": "samples/openapi3/client/petstore/python-experimental/docs/AnimalFarm.md", "diffHunk": "@@ -0,0 +1,9 @@\n+# animal_farm.AnimalFarm\n+\n+## Properties\n+Name | Type | Description | Notes\n+------------ | ------------- | ------------- | -------------", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk2Mjg5MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433962891", "bodyText": "The problem is that {{#vars}} is empty for arrays.", "author": "jirikuncar", "createdAt": "2020-06-02T15:26:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYyOTgxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDAzMDU5Ng==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r434030596", "bodyText": "@spacether solved - see https://github.com/OpenAPITools/openapi-generator/pull/6493/files#diff-ec679c7ef213544fd9e5fdad21ffd6eeR6", "author": "jirikuncar", "createdAt": "2020-06-02T16:57:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYyOTgxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMDIzOA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433630238", "bodyText": "This tag has generated a new api which adds another file.\nCan you change it to one of the existing tags like fake?\nThat way a new python api file will not be generated", "author": "spacether", "createdAt": "2020-06-02T05:35:36Z", "path": "modules/openapi-generator/src/test/resources/3_0/python-experimental/petstore-with-fake-endpoints-models-for-testing-with-http-signature.yaml", "diffHunk": "@@ -1097,6 +1097,19 @@ paths:\n             application/json:\n               schema:\n                 $ref: '#/components/schemas/HealthCheckResult'\n+  /farm/animals:\n+    get:\n+      tags:\n+        - farm", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzg5OTkzNQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433899935", "bodyText": "I would prefer to have it in separate API.", "author": "jirikuncar", "createdAt": "2020-06-02T14:02:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMDIzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMDcxMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433630711", "bodyText": "Can you delete this file after you switch the api tag to put the farm endpoint into the fake api?", "author": "spacether", "createdAt": "2020-06-02T05:37:23Z", "path": "samples/openapi3/client/petstore/python-experimental/petstore_api/api/farm_api.py", "diffHunk": "@@ -0,0 +1,373 @@\n+# coding: utf-8", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMjc0Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433632742", "bodyText": "How about adding a test here like\nanimal = [animal.Animal(blah)]\nmodel = AnimalFarm(animal)\nassert check_the_value_of the data stored in model here\n\n\n\nHow about adding a test in test/test_fake_api.py where we send an instance of AnimalFarm to the endpoint that accepts it?\n\n\nHow about adding a deserialization test like we have here to show that our code can receive back array models and deserialize them correctly?\n\n\nWe need to demonstrate that:\n\nclient side we can make instances of the model\nwe can send those instances to the server\nwe can receive them back from the server", "author": "spacether", "createdAt": "2020-06-02T05:44:37Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_animal_farm.py", "diffHunk": "@@ -0,0 +1,43 @@\n+# coding: utf-8\n+\n+\"\"\"\n+    OpenAPI Petstore\n+\n+    This spec is mainly for testing Petstore server and contains fake endpoints, models. Please do not use this for any other purpose. Special characters: \\\" \\\\  # noqa: E501\n+\n+    The version of the OpenAPI document: 1.0.0\n+    Generated by: https://openapi-generator.tech\n+\"\"\"\n+\n+\n+from __future__ import absolute_import\n+import sys\n+import unittest\n+\n+import petstore_api\n+try:\n+    from petstore_api.model import animal\n+except ImportError:\n+    animal = sys.modules[\n+        'petstore_api.model.animal']\n+from petstore_api.model.animal_farm import AnimalFarm\n+\n+\n+class TestAnimalFarm(unittest.TestCase):\n+    \"\"\"AnimalFarm unit test stubs\"\"\"\n+\n+    def setUp(self):\n+        pass\n+\n+    def tearDown(self):\n+        pass\n+\n+    def testAnimalFarm(self):\n+        \"\"\"Test AnimalFarm\"\"\"\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = AnimalFarm()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkxNDQzNA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433914434", "bodyText": "@spacether I will go back to my fake example. There are too many issues with Animal models.", "author": "jirikuncar", "createdAt": "2020-06-02T14:19:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMjc0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzIwMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633201", "bodyText": "Can you revert this file to the master branch version? We have tests in it that we need.\nThis same comment applies in the test files below where I added the same comment.", "author": "spacether", "createdAt": "2020-06-02T05:46:17Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_drawing.py", "diffHunk": "@@ -42,130 +47,12 @@ def setUp(self):\n     def tearDown(self):\n         pass\n \n-    def test_create_instances(self):\n-        \"\"\"\n-        Validate instance can be created using pythonic name or OAS names.\n-        \"\"\"\n-\n-        # Validate object can be created using pythonic names.\n-        inst = shape.Shape(\n-            shape_type=\"Triangle\",\n-            triangle_type=\"IsoscelesTriangle\"\n-        )\n-        from petstore_api.model.isosceles_triangle import IsoscelesTriangle\n-        assert isinstance(inst, IsoscelesTriangle)\n-\n-        # Validate object can be created using OAS names.\n-        # For example, this can be used to construct objects on the client\n-        # when the input data is available as JSON documents.\n-        data =  {\n-            'shapeType': \"Triangle\",\n-            'triangleType': \"IsoscelesTriangle\"\n-        }\n-        inst = shape.Shape(_spec_property_naming=True, **data)\n-        assert isinstance(inst, IsoscelesTriangle)\n-\n-    def test_deserialize_oneof_reference(self):\n-        \"\"\"\n-        Validate the scenario when the type of a OAS property is 'oneOf', and the 'oneOf'\n-        schema is specified as a reference ($ref), not an inline 'oneOf' schema.\n-        \"\"\"\n-        isosceles_triangle = shape.Shape(\n-            shape_type=\"Triangle\",\n-            triangle_type=\"IsoscelesTriangle\"\n-        )\n-        from petstore_api.model.isosceles_triangle import IsoscelesTriangle\n-        from petstore_api.model.triangle import Triangle\n-        from petstore_api.model.equilateral_triangle import EquilateralTriangle\n-\n-        assert isinstance(isosceles_triangle, IsoscelesTriangle)\n-        inst = Drawing(\n-            # 'main_shape' has type 'Shape', which is a oneOf [triangle, quadrilateral]\n-            # composed schema. So we should be able to assign a petstore_api.Triangle\n-            # to a 'main_shape'.\n-            main_shape=isosceles_triangle,\n-            shapes=[\n-                shape.Shape(\n-                    shape_type=\"Triangle\",\n-                    triangle_type=\"EquilateralTriangle\"\n-                ),\n-                Triangle(\n-                    shape_type=\"Triangle\",\n-                    triangle_type=\"IsoscelesTriangle\"\n-                ),\n-                EquilateralTriangle(\n-                    shape_type=\"Triangle\",\n-                    triangle_type=\"EquilateralTriangle\"\n-                ),\n-                shape.Shape(\n-                    shape_type=\"Quadrilateral\",\n-                    quadrilateral_type=\"ComplexQuadrilateral\"\n-                ),\n-            ],\n-        )\n-        from petstore_api.model.complex_quadrilateral import ComplexQuadrilateral\n-        assert isinstance(inst, Drawing)\n-        assert isinstance(inst.main_shape, IsoscelesTriangle)\n-        self.assertEqual(len(inst.shapes), 4)\n-        assert isinstance(inst.shapes[0], EquilateralTriangle)\n-        assert isinstance(inst.shapes[1], IsoscelesTriangle)\n-        assert isinstance(inst.shapes[2], EquilateralTriangle)\n-        assert isinstance(inst.shapes[3], ComplexQuadrilateral)\n-\n-        # Validate we cannot assign the None value to main_shape because the 'null' type\n-        # is not one of the allowed types in the 'Shape' schema.\n-        err_msg = (\"Invalid type for variable '{}'. \"\n-                   \"Required value type is {} and passed type was {} at {}\")\n-        with self.assertRaisesRegexp(\n-                petstore_api.ApiTypeError,\n-                err_msg.format(\"main_shape\", \"Shape\", \"NoneType\", \"\\['main_shape'\\]\")\n-        ):\n-            inst = Drawing(\n-                # 'main_shape' has type 'Shape', which is a oneOf [triangle, quadrilateral]\n-                # So the None value should not be allowed and an exception should be raised.\n-                main_shape=None,\n-            )\n-\n-\n-    def test_deserialize_oneof_reference_with_null_type(self):\n-        \"\"\"\n-        Validate the scenario when the type of a OAS property is 'oneOf', and the 'oneOf'\n-        schema is specified as a reference ($ref), not an inline 'oneOf' schema.\n-        Further, the 'oneOf' schema has a 'null' type child schema (as introduced in\n-        OpenAPI 3.1).\n-        \"\"\"\n-\n-        # Validate we can assign the None value to shape_or_null, because the 'null' type\n-        # is one of the allowed types in the 'ShapeOrNull' schema.\n-        inst = Drawing(\n-            # 'shape_or_null' has type 'ShapeOrNull', which is a oneOf [null, triangle, quadrilateral]\n-            shape_or_null=None,\n-        )\n-        assert isinstance(inst, Drawing)\n-        self.assertFalse(hasattr(inst, 'main_shape'))\n-        self.assertTrue(hasattr(inst, 'shape_or_null'))\n-        self.assertIsNone(inst.shape_or_null)\n-\n-\n-    def test_deserialize_oneof_reference_with_nullable_type(self):\n-        \"\"\"\n-        Validate the scenario when the type of a OAS property is 'oneOf', and the 'oneOf'\n-        schema is specified as a reference ($ref), not an inline 'oneOf' schema.\n-        Further, the 'oneOf' schema has the 'nullable' attribute (as introduced in\n-        OpenAPI 3.0 and deprecated in 3.1).\n-        \"\"\"\n+    def testDrawing(self):\n+        \"\"\"Test Drawing\"\"\"\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = Drawing()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzI4OQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633289", "bodyText": "Can you revert this file to the master branch version?", "author": "spacether", "createdAt": "2020-06-02T05:46:37Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_fruit.py", "diffHunk": "@@ -39,184 +39,10 @@ def tearDown(self):\n \n     def testFruit(self):\n         \"\"\"Test Fruit\"\"\"\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = Fruit()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzMzNg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633336", "bodyText": "Can you revert this file to the master branch version?", "author": "spacether", "createdAt": "2020-06-02T05:46:48Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_fruit_req.py", "diffHunk": "@@ -39,142 +39,10 @@ def tearDown(self):\n \n     def testFruitReq(self):\n         \"\"\"Test FruitReq\"\"\"\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = FruitReq()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzM3NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633375", "bodyText": "Can you revert this file to the master branch version?", "author": "spacether", "createdAt": "2020-06-02T05:46:58Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_gm_fruit.py", "diffHunk": "@@ -39,193 +39,10 @@ def tearDown(self):\n \n     def testGmFruit(self):\n         \"\"\"Test GmFruit\"\"\"\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = GmFruit()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzU4OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633588", "bodyText": "Can you revert this file to the master branch version?", "author": "spacether", "createdAt": "2020-06-02T05:47:45Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_mammal.py", "diffHunk": "@@ -39,11 +44,9 @@ def tearDown(self):\n \n     def testMammal(self):\n         \"\"\"Test Mammal\"\"\"\n-\n-        # tests that we can make a BasquePig by traveling through descendant discriminator in Pig\n-        model = Mammal(class_name=\"BasquePig\")\n-        from petstore_api.model import basque_pig\n-        assert isinstance(model, basque_pig.BasquePig)\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = Mammal()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzYzMg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633632", "bodyText": "Can you revert this file to the master branch version?", "author": "spacether", "createdAt": "2020-06-02T05:47:54Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_outer_enum.py", "diffHunk": "@@ -29,16 +29,9 @@ def tearDown(self):\n \n     def testOuterEnum(self):\n         \"\"\"Test OuterEnum\"\"\"\n-        # Since 'OuterEnum' is nullable, validate the null value can be assigned\n-        # to OuterEnum.\n-        inst = OuterEnum(None)\n-        self.assertIsNone(inst)\n-\n-        inst = OuterEnum('approved')\n-        assert isinstance(inst, OuterEnum)\n-\n-        with self.assertRaises(petstore_api.ApiValueError):\n-            OuterEnum('garbage')\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = OuterEnum()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzY2Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633663", "bodyText": "Can you revert this file to the master branch version?", "author": "spacether", "createdAt": "2020-06-02T05:48:02Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_parent_pet.py", "diffHunk": "@@ -39,12 +39,9 @@ def tearDown(self):\n \n     def testParentPet(self):\n         \"\"\"Test ParentPet\"\"\"\n-\n-        # test that we can make a ParentPet from a ParentPet\n-        # which requires that we travel back through ParentPet's allOf descendant\n-        # GrandparentAnimal, and we use the descendant's discriminator to make ParentPet\n-        model = ParentPet(pet_type=\"ParentPet\")\n-        assert isinstance(model, ParentPet)\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = ParentPet()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzcwMw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633703", "bodyText": "Can you revert this file to the master branch version?", "author": "spacether", "createdAt": "2020-06-02T05:48:09Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_quadrilateral.py", "diffHunk": "@@ -39,10 +39,9 @@ def tearDown(self):\n \n     def testQuadrilateral(self):\n         \"\"\"Test Quadrilateral\"\"\"\n-        instance = Quadrilateral(shape_type=\"Quadrilateral\", quadrilateral_type=\"ComplexQuadrilateral\")\n-        assert isinstance(instance, complex_quadrilateral.ComplexQuadrilateral)\n-        instance = Quadrilateral(shape_type=\"Quadrilateral\", quadrilateral_type=\"SimpleQuadrilateral\")\n-        assert isinstance(instance, simple_quadrilateral.SimpleQuadrilateral)\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = Quadrilateral()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzc0Nw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633747", "bodyText": "Can you revert this file to the master branch version?", "author": "spacether", "createdAt": "2020-06-02T05:48:17Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_shape.py", "diffHunk": "@@ -39,71 +39,10 @@ def tearDown(self):\n \n     def testShape(self):\n         \"\"\"Test Shape\"\"\"\n-        from petstore_api.model import complex_quadrilateral\n-        from petstore_api.model import simple_quadrilateral\n-        from petstore_api.model import equilateral_triangle\n-        from petstore_api.model import isosceles_triangle\n-        from petstore_api.model import scalene_triangle\n-        tri = triangle.Triangle(\n-            shape_type=\"Triangle\",\n-            triangle_type=\"EquilateralTriangle\"\n-        )\n-        assert isinstance(tri, equilateral_triangle.EquilateralTriangle)\n-\n-        tri = triangle.Triangle(\n-            shape_type=\"Triangle\",\n-            triangle_type=\"IsoscelesTriangle\"\n-        )\n-        assert isinstance(tri, isosceles_triangle.IsoscelesTriangle)\n-\n-        tri = triangle.Triangle(\n-            shape_type=\"Triangle\",\n-            triangle_type=\"ScaleneTriangle\"\n-        )\n-        assert isinstance(tri, scalene_triangle.ScaleneTriangle)\n-\n-        quad = Shape(\n-            shape_type=\"Quadrilateral\",\n-            quadrilateral_type=\"ComplexQuadrilateral\"\n-        )\n-        assert isinstance(quad, complex_quadrilateral.ComplexQuadrilateral)\n-\n-        quad = Shape(\n-            shape_type=\"Quadrilateral\",\n-            quadrilateral_type=\"SimpleQuadrilateral\"\n-        )\n-        assert isinstance(quad, simple_quadrilateral.SimpleQuadrilateral)\n-\n-        # No discriminator provided.\n-        err_msg = (\"Cannot deserialize input data due to missing discriminator. \"\n-                   \"The discriminator property '{}' is missing at path: ()\"\n-                   )\n-        with self.assertRaisesRegexp(\n-                petstore_api.ApiValueError,\n-                err_msg.format(\"shapeType\")\n-        ):\n-            Shape()\n-\n-        # invalid shape_type (first discriminator). 'Circle' does not exist in the model.\n-        err_msg = (\"Cannot deserialize input data due to invalid discriminator \"\n-                   \"value. The OpenAPI document has no mapping for discriminator \"\n-                   \"property '{}'='{}' at path: ()\"\n-                   )\n-        with self.assertRaisesRegexp(\n-                petstore_api.ApiValueError,\n-                err_msg.format(\"shapeType\", \"Circle\")\n-        ):\n-            Shape(shape_type=\"Circle\")\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = Shape()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYzMzgzMQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r433633831", "bodyText": "Can you revert this file to the master branch version?", "author": "spacether", "createdAt": "2020-06-02T05:48:36Z", "path": "samples/openapi3/client/petstore/python-experimental/test/test_triangle.py", "diffHunk": "@@ -44,12 +44,9 @@ def tearDown(self):\n \n     def testTriangle(self):\n         \"\"\"Test Triangle\"\"\"\n-        tri = Triangle(shape_type=\"Triangle\", triangle_type=\"EquilateralTriangle\")\n-        assert isinstance(tri, equilateral_triangle.EquilateralTriangle)\n-        tri = Triangle(shape_type=\"Triangle\", triangle_type=\"IsoscelesTriangle\")\n-        assert isinstance(tri, isosceles_triangle.IsoscelesTriangle)\n-        tri = Triangle(shape_type=\"Triangle\", triangle_type=\"ScaleneTriangle\")\n-        assert isinstance(tri, scalene_triangle.ScaleneTriangle)\n+        # FIXME: construct object with mandatory attributes with example values\n+        # model = Triangle()  # noqa: E501\n+        pass", "originalCommit": "31407d4d579e5a67a06f0991c07593ef42f82dd2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "45e8dd63dc30fa17342f1e6a4afa3a49792164a3", "url": "https://github.com/OpenAPITools/openapi-generator/commit/45e8dd63dc30fa17342f1e6a4afa3a49792164a3", "message": "Merge remote-tracking branch 'upstream/master' into python-experimental/named-arrays", "committedDate": "2020-06-02T14:04:39Z", "type": "commit"}, {"oid": "ed9f53bd2a7a831c44b63d6dc2437b1d2ee9e389", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ed9f53bd2a7a831c44b63d6dc2437b1d2ee9e389", "message": "Reset samples", "committedDate": "2020-06-02T14:05:05Z", "type": "commit"}, {"oid": "9b393c690b1295a380a9bf283e0407e0e61dbf50", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9b393c690b1295a380a9bf283e0407e0e61dbf50", "message": "Regenerated", "committedDate": "2020-06-02T14:08:48Z", "type": "commit"}, {"oid": "c1ee2a5d9250f23df687126ca76be3877cb6ca44", "url": "https://github.com/OpenAPITools/openapi-generator/commit/c1ee2a5d9250f23df687126ca76be3877cb6ca44", "message": "Animal farm test", "committedDate": "2020-06-02T14:20:04Z", "type": "commit"}, {"oid": "0b00e42da28343979167040abac520a3e8663f9d", "url": "https://github.com/OpenAPITools/openapi-generator/commit/0b00e42da28343979167040abac520a3e8663f9d", "message": "Array of enums", "committedDate": "2020-06-02T14:56:46Z", "type": "commit"}, {"oid": "4a8ad25fe6b6418f6093b5e9409f8af75597cc97", "url": "https://github.com/OpenAPITools/openapi-generator/commit/4a8ad25fe6b6418f6093b5e9409f8af75597cc97", "message": "Clean-up", "committedDate": "2020-06-02T15:12:58Z", "type": "commit"}, {"oid": "a58959900538b103c426eb37dc1604bd9253d61e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/a58959900538b103c426eb37dc1604bd9253d61e", "message": "Clean-up", "committedDate": "2020-06-02T15:15:11Z", "type": "commit"}, {"oid": "e29055e7ae872de75f0a313e2f8ba93ef8602fab", "url": "https://github.com/OpenAPITools/openapi-generator/commit/e29055e7ae872de75f0a313e2f8ba93ef8602fab", "message": "Clean-up", "committedDate": "2020-06-02T15:21:11Z", "type": "commit"}, {"oid": "49eb08f1f9370500c8e924f34de6400cd3ed1839", "url": "https://github.com/OpenAPITools/openapi-generator/commit/49eb08f1f9370500c8e924f34de6400cd3ed1839", "message": "Fix array type generation", "committedDate": "2020-06-02T16:55:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDAzMDEyNw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r434030127", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            LOGGER.warn(\"\\n\\n{}\\n\\n\", modelSchema);\n          \n          \n            \n                            LOGGER.warn(\"\\n\\n{}\\n\\n\", modelProperty);", "author": "jirikuncar", "createdAt": "2020-06-02T16:56:19Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientExperimentalCodegen.java", "diffHunk": "@@ -843,7 +841,20 @@ public CodegenModel fromModel(String name, Schema schema) {\n                         postProcessModelProperty(result, prop);\n                     }\n                 }\n+            } else if (result.isArrayModel) {\n+                LOGGER.warn(\"\\n\\n{}\\n\\n\", modelSchema);\n+                LOGGER.warn(\"\\n\\n{}\\n\\n\", modelProperty);\n ", "originalCommit": "49eb08f1f9370500c8e924f34de6400cd3ed1839", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fcbd31aa068b37e61509f8bd6cfc980b82806cb0", "url": "https://github.com/OpenAPITools/openapi-generator/commit/fcbd31aa068b37e61509f8bd6cfc980b82806cb0", "message": "simplify", "committedDate": "2020-06-03T11:10:14Z", "type": "commit"}, {"oid": "ebc799660d81e296518fd0d8a9747a3962d8d16a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ebc799660d81e296518fd0d8a9747a3962d8d16a", "message": "Merge remote-tracking branch 'upstream/master' into python-experimental/named-arrays", "committedDate": "2020-06-03T11:10:24Z", "type": "commit"}, {"oid": "1f890db2af2da9ff2d3d40718ed0fa62ab66e431", "url": "https://github.com/OpenAPITools/openapi-generator/commit/1f890db2af2da9ff2d3d40718ed0fa62ab66e431", "message": "array model is not alias", "committedDate": "2020-06-03T11:13:08Z", "type": "commit"}, {"oid": "7a2366a46879402088d35d14f963ea19abff64ac", "url": "https://github.com/OpenAPITools/openapi-generator/commit/7a2366a46879402088d35d14f963ea19abff64ac", "message": "Array model has one value field", "committedDate": "2020-06-03T11:25:27Z", "type": "commit"}, {"oid": "a5d37004d487bf68b58f0f2583bf67e1c4694fb0", "url": "https://github.com/OpenAPITools/openapi-generator/commit/a5d37004d487bf68b58f0f2583bf67e1c4694fb0", "message": "ensure up-to-date", "committedDate": "2020-06-03T13:39:11Z", "type": "commit"}, {"oid": "65a1c6db19a0435d67d977d7fea30141ff331b93", "url": "https://github.com/OpenAPITools/openapi-generator/commit/65a1c6db19a0435d67d977d7fea30141ff331b93", "message": "Merge branch 'master' into python-experimental/named-arrays", "committedDate": "2020-06-04T07:25:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA3MTEyMg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r435071122", "bodyText": "Array models are making a model that aliases the array type, so I think that this should be true.\nLong term my goal is to have the ModelSimple classes inherrit from their base classes like str int etc.\nWhy do we need to set this to False for ArrayModels? Historically generateAliasAsModel applied only to Map and Array models in most generators. In python-experimental we apply it to those AND all primitives that they have validations and enums. Standard processing in the generators was to describe all these primitive models as their simple types like str, list. But if those models had validations and that data was lost in that process. So I added code to preserve that information and make object type models which preserve the validation information which would have been lost. That code hoists the model information into a required value variable.\nAfter I did that the CodegenModel class was updated to include validation information which previously had been missing. So in summary this code here is an older hack to preserve information. If we can use the existing ArrayModels as is that is preferable. It should define its datatype somewhere inside the CodegenModel and that should be used to set the ModelSimple data type in the python class for our made up value parameter.\nWe can do this by doing a check of the model type when we assign the openapi_types in ModelSimple.\nWe can check the data that is available by running the generator with a debugmodels flag.\nIn my comment here I explain how to do that.", "author": "spacether", "createdAt": "2020-06-04T08:11:26Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientExperimentalCodegen.java", "diffHunk": "@@ -829,13 +827,13 @@ public CodegenModel fromModel(String name, Schema schema) {\n         result.unescapedDescription = simpleModelName(name);\n \n         // make non-object type models have one property so we can use it to store enums and validations\n-        if (result.isAlias || result.isEnum) {\n+        if (result.isAlias || result.isEnum || result.isArrayModel) {\n             Schema modelSchema = ModelUtils.getSchema(this.openAPI, result.name);\n             CodegenProperty modelProperty = fromProperty(\"value\", modelSchema);\n-            if (modelProperty.isEnum == true || modelProperty.hasValidation == true) {\n+            if (modelProperty.isEnum == true || modelProperty.hasValidation == true || result.isArrayModel) {\n                 // these models are non-object models with enums and/or validations\n                 // add a single property to the model so we can have a way to access validations\n-                result.isAlias = true;", "originalCommit": "65a1c6db19a0435d67d977d7fea30141ff331b93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEyMTE2NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r435121165", "bodyText": "I am not aware of all the corner cases in the code. I was trying to make it work for my use-case and not break existing tests. Feel free to propose code changes.", "author": "jirikuncar", "createdAt": "2020-06-04T09:34:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA3MTEyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEyOTQ1MQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r435129451", "bodyText": "I hope I have found a sufficient fix in b2ca2f7.", "author": "jirikuncar", "createdAt": "2020-06-04T09:48:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA3MTEyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA4NDAyMg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r435084022", "bodyText": "What is the dataType in this CodegenModel.dataType?\nThis model having vars of length 1 shows that my older hack is being used and that we have hoisted model information into a new value variable.\nHow about we keep the CodegenModel as-is (no hoisting) and use the information from one of these sources?\n\nCodegenModel.dataType\nCodegenModel.arrayModelType\nWe can see all of the properties that are available by looking at that class here\n\nWe can debug the CodegenModels and see the information in them by running the generate command with the -DdebugModels=true as shown here\nHow about in the classvars template here\nhttps://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/classvars.mustache#L115\nDoing a check to see if the model is an arrayModel\nand setting the datatype accordingly?\nIt would look like:\n{{#isArrayModel}}\n            'value': ({{{dataType}}},),  # noqa: E501\n{{/isArrayModel}}\n{{^isArrayModel}}\n{{#requiredVars}}\n            '{{name}}': ({{{dataType}}},),  # noqa: E501\n{{/requiredVars}}\n{{#optionalVars}}\n            '{{name}}': ({{{dataType}}},),  # noqa: E501\n{{/optionalVars}}\n{{/isArrayModel}}\n\nWe would also need to do a similar change in\nmethod_init_shared\nTo:\n\nnot loop over required an optional args if we have an array model, if we are that case, just set value as a required positional arg\nelse use our existing looping over variables\nin the docstring if we are an arraymodel set value as a required positional arg\n\nOur model doc mustache template would need a similar change to grab the data from dataType rather than vars.\n@jirikuncar\nWhat do you think about making these changes?\nIf you don't want to make them, we can keep using the existing code/(my older solution) where we shovel the model data into a value variable.", "author": "spacether", "createdAt": "2020-06-04T08:32:46Z", "path": "modules/openapi-generator/src/test/java/org/openapitools/codegen/python/PythonClientExperimentalTest.java", "diffHunk": "@@ -270,7 +270,7 @@ public void arrayModelTest() {\n         Assert.assertEquals(cm.classname, \"sample.Sample\");\n         Assert.assertEquals(cm.classVarName, \"sample\");\n         Assert.assertEquals(cm.description, \"an array model\");\n-        Assert.assertEquals(cm.vars.size(), 0);\n+        Assert.assertEquals(cm.vars.size(), 1);  // there is one value for Childer definition", "originalCommit": "65a1c6db19a0435d67d977d7fea30141ff331b93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTExOTYxNw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r435119617", "bodyText": "I would prefer to keep the current code. It looks like too many changes and {{#isArrayModel}} guards are required for templates.", "author": "jirikuncar", "createdAt": "2020-06-04T09:31:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA4NDAyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTMxNTI2Mg==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6493#discussion_r435315262", "bodyText": "Ah, understood. That's fine.", "author": "spacether", "createdAt": "2020-06-04T14:45:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA4NDAyMg=="}], "type": "inlineReview"}, {"oid": "a7dbe80e26612007baf574f4ff888b6f1b27bb0a", "url": "https://github.com/OpenAPITools/openapi-generator/commit/a7dbe80e26612007baf574f4ff888b6f1b27bb0a", "message": "./bin/utils/ensure-up-to-date --batch", "committedDate": "2020-06-04T09:36:08Z", "type": "commit"}, {"oid": "b2ca2f78e295ce1d94b42f6ebc55d9d5a64f1918", "url": "https://github.com/OpenAPITools/openapi-generator/commit/b2ca2f78e295ce1d94b42f6ebc55d9d5a64f1918", "message": "Solve issue with missing import for array model", "committedDate": "2020-06-04T09:47:35Z", "type": "commit"}, {"oid": "3132aca2052d497ed9e1f3fbfeb90e46523c5562", "url": "https://github.com/OpenAPITools/openapi-generator/commit/3132aca2052d497ed9e1f3fbfeb90e46523c5562", "message": "regenerate", "committedDate": "2020-06-04T09:59:26Z", "type": "commit"}]}