{"pr_number": 4934, "pr_title": "[Golang] Add support allOf inheritance with embedded go structs", "pr_createdAt": "2020-01-07T06:18:50Z", "pr_url": "https://github.com/OpenAPITools/openapi-generator/pull/4934", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDE1MDcwMw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#discussion_r364150703", "bodyText": "Could you please provide a comment here on what this method does and why it does that? I think I understand it in the context of your PR, but if I was just looking at it in the codebase, I'd probably have no idea what's happening here and why.", "author": "bkabrda", "createdAt": "2020-01-08T10:03:04Z", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/AbstractGoCodegen.java", "diffHunk": "@@ -328,6 +329,16 @@ public String getSchemaType(Schema p) {\n             type = openAPIType;\n         return type;\n     }\n+    \n+    @Override\n+    public String toInstantiationType(Schema property) {", "originalCommit": "23a51b4689f4565c7d41b41a3f125012ae5865d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI1MDQ4OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#discussion_r364250488", "bodyText": "sure, will do.", "author": "sebastien-rosset", "createdAt": "2020-01-08T14:13:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDE1MDcwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDE1MTA3OA==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#discussion_r364151078", "bodyText": "Why is this change necessary? Is it to make sure that the scope of variables defined in this block is limited?", "author": "bkabrda", "createdAt": "2020-01-08T10:03:53Z", "path": "modules/openapi-generator/src/main/resources/go-experimental/api.mustache", "diffHunk": "@@ -134,14 +134,16 @@ func (a *{{{classname}}}Service) {{{nickname}}}(ctx _context.Context{{#hasParams\n \t{{#queryParams}}\n \t{{#required}}\n \t{{#isCollectionFormatMulti}}\n-\tt:={{paramName}}\n-\tif reflect.TypeOf(t).Kind() == reflect.Slice {\n-\t\ts := reflect.ValueOf(t)\n-\t\tfor i := 0; i < s.Len(); i++ {\n-\t\t\tlocalVarQueryParams.Add(\"{{baseName}}\", parameterToString(s.Index(i), \"{{#collectionFormat}}{{collectionFormat}}{{/collectionFormat}}\"))\n+\t{", "originalCommit": "23a51b4689f4565c7d41b41a3f125012ae5865d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI2MjQ0Mw==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#discussion_r364262443", "bodyText": "This is totally independent of the embedded go struct enhancement, maybe I should have raised a separate PR, but it takes time to manage multiple PRs.\nWithout this change, there can be compilation errors and static analysis issues. This is because the block (which is now in curly braces) is repeated multiple times depending on how many query parameters there are in the OAS.\nIt boils down to the fact that this line will be generated multiple times:\nt:={{paramName}}\n\nHence the compiler will fail with the same variable being redefined multiple times.", "author": "sebastien-rosset", "createdAt": "2020-01-08T14:38:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDE1MTA3OA=="}], "type": "inlineReview"}, {"oid": "78c5f3106982e7f82d75c370500acfe69a33bf04", "url": "https://github.com/OpenAPITools/openapi-generator/commit/78c5f3106982e7f82d75c370500acfe69a33bf04", "message": "Golang: generate embedded structs and set supportsInheritance to true", "committedDate": "2020-01-08T15:39:03Z", "type": "commit"}, {"oid": "78c5f3106982e7f82d75c370500acfe69a33bf04", "url": "https://github.com/OpenAPITools/openapi-generator/commit/78c5f3106982e7f82d75c370500acfe69a33bf04", "message": "Golang: generate embedded structs and set supportsInheritance to true", "committedDate": "2020-01-08T15:39:03Z", "type": "forcePushed"}, {"oid": "8c3bd4ee022ad44ea07d3366f052a67dbd11422f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/8c3bd4ee022ad44ea07d3366f052a67dbd11422f", "message": "Run bin/go-experimental-petstore.sh", "committedDate": "2020-01-08T16:58:01Z", "type": "commit"}, {"oid": "ccf4a8c71d2503dc3db1fd263b76350cc47e5029", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ccf4a8c71d2503dc3db1fd263b76350cc47e5029", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2", "committedDate": "2020-01-13T20:11:46Z", "type": "commit"}, {"oid": "01d54c07dc43c7ec088d7b814e5004d38b9a4a70", "url": "https://github.com/OpenAPITools/openapi-generator/commit/01d54c07dc43c7ec088d7b814e5004d38b9a4a70", "message": "merge from master", "committedDate": "2020-01-16T04:33:17Z", "type": "commit"}, {"oid": "87f2df5a5aeb4f2fd226a9d8e43d65691e08c647", "url": "https://github.com/OpenAPITools/openapi-generator/commit/87f2df5a5aeb4f2fd226a9d8e43d65691e08c647", "message": "merge from master, fix formatting issues", "committedDate": "2020-01-16T05:27:44Z", "type": "commit"}, {"oid": "e64194c58ba35e59ddaa45fdea5967de9f5e5e9f", "url": "https://github.com/OpenAPITools/openapi-generator/commit/e64194c58ba35e59ddaa45fdea5967de9f5e5e9f", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2", "committedDate": "2020-01-16T14:30:33Z", "type": "commit"}, {"oid": "01691ae873543261e44b441005b2c5dc6dd1f8c5", "url": "https://github.com/OpenAPITools/openapi-generator/commit/01691ae873543261e44b441005b2c5dc6dd1f8c5", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2", "committedDate": "2020-01-19T03:44:17Z", "type": "commit"}, {"oid": "7d5e74fcdf5da4aca4d01c3cb086a3f5acc5aa2e", "url": "https://github.com/OpenAPITools/openapi-generator/commit/7d5e74fcdf5da4aca4d01c3cb086a3f5acc5aa2e", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2", "committedDate": "2020-01-19T23:34:47Z", "type": "commit"}, {"oid": "15afab9b1e94806c0fc3e2880a8d727953d199af", "url": "https://github.com/OpenAPITools/openapi-generator/commit/15afab9b1e94806c0fc3e2880a8d727953d199af", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2", "committedDate": "2020-01-20T06:32:17Z", "type": "commit"}, {"oid": "d33a5e964514d544c206d995132304274c015c95", "url": "https://github.com/OpenAPITools/openapi-generator/commit/d33a5e964514d544c206d995132304274c015c95", "message": "add missing else statement, merge issue", "committedDate": "2020-01-20T06:47:52Z", "type": "commit"}, {"oid": "9c334b832bcd1264397da4efd4d1994ee9ee7852", "url": "https://github.com/OpenAPITools/openapi-generator/commit/9c334b832bcd1264397da4efd4d1994ee9ee7852", "message": "add missing else statement, merge issue", "committedDate": "2020-01-20T06:49:10Z", "type": "commit"}, {"oid": "47ef41b7e680e7dc75bdd4c370c809e6b297bc59", "url": "https://github.com/OpenAPITools/openapi-generator/commit/47ef41b7e680e7dc75bdd4c370c809e6b297bc59", "message": "fix go doc issue", "committedDate": "2020-01-20T23:02:08Z", "type": "commit"}, {"oid": "1b306e19b243214d78e7574a10287b9c16d2548d", "url": "https://github.com/OpenAPITools/openapi-generator/commit/1b306e19b243214d78e7574a10287b9c16d2548d", "message": "sync from mater", "committedDate": "2020-01-21T14:27:20Z", "type": "commit"}, {"oid": "46775d55e1874122b32d11a970b85fac595d922c", "url": "https://github.com/OpenAPITools/openapi-generator/commit/46775d55e1874122b32d11a970b85fac595d922c", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2", "committedDate": "2020-01-22T01:07:20Z", "type": "commit"}, {"oid": "2670fb414cbf5dc1d47349b52f83e47daf26eaff", "url": "https://github.com/OpenAPITools/openapi-generator/commit/2670fb414cbf5dc1d47349b52f83e47daf26eaff", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2", "committedDate": "2020-01-23T17:37:31Z", "type": "commit"}, {"oid": "ca307505282620aaef9fd136d35a5803617fd732", "url": "https://github.com/OpenAPITools/openapi-generator/commit/ca307505282620aaef9fd136d35a5803617fd732", "message": "sync from master", "committedDate": "2020-01-24T05:24:26Z", "type": "commit"}, {"oid": "1703d24c91b2ba5a3ef6e3a93ab7d2c2b20afb31", "url": "https://github.com/OpenAPITools/openapi-generator/commit/1703d24c91b2ba5a3ef6e3a93ab7d2c2b20afb31", "message": "sync from master", "committedDate": "2020-01-24T05:24:34Z", "type": "commit"}, {"oid": "16f563c93eaab84ae755170ad37e065ae4b9d077", "url": "https://github.com/OpenAPITools/openapi-generator/commit/16f563c93eaab84ae755170ad37e065ae4b9d077", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2", "committedDate": "2020-01-31T19:02:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc4MzM3NQ==", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#discussion_r373783375", "bodyText": "This is very cool. I'm not a pro in Go by any means, but I've just learned about field promotion in anonymous nested structs. ;)", "author": "jimschubert", "createdAt": "2020-02-01T14:42:19Z", "path": "samples/client/petstore/go-experimental/go-petstore/model_dog.go", "diffHunk": "@@ -16,59 +16,10 @@ import (\n \n // Dog struct for Dog\n type Dog struct {\n-\tClassName string `json:\"className\"`\n-\tColor *string `json:\"color,omitempty\"`\n+\tAnimal", "originalCommit": "16f563c93eaab84ae755170ad37e065ae4b9d077", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}