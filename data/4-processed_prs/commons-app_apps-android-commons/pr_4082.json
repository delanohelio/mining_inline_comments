{"pr_number": 4082, "pr_title": "Make sure exif is added if exists and not addet if null or 0.0", "pr_createdAt": "2020-12-07T11:04:57Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/4082", "timeline": [{"oid": "414d30f4e913abc262f1ebc4c64f05051428238d", "url": "https://github.com/commons-app/apps-android-commons/commit/414d30f4e913abc262f1ebc4c64f05051428238d", "message": "Make sure exif is added if exists and not addet if null or 0.0", "committedDate": "2020-12-07T10:57:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUyNzU4NA==", "url": "https://github.com/commons-app/apps-android-commons/pull/4082#discussion_r537527584", "bodyText": "Should we set imageCoordsExists = true here? (or move the one on line 48 to line 60)", "author": "domdomegg", "createdAt": "2020-12-07T14:00:53Z", "path": "app/src/main/java/fr/free/nrw/commons/upload/ImageCoordinates.kt", "diffHunk": "@@ -34,20 +34,28 @@ class ImageCoordinates internal constructor(exif: ExifInterface?) {\n         //If image has no EXIF data and user has enabled GPS setting, get user's location\n         //Always return null as a temporary fix for #1599\n         if (exif != null) {\n-            val latitude = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE)\n-            val latitudeRef = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE_REF)\n-            val longitude = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE)\n-            val longitudeRef = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF)\n-            if (latitude != null && longitude != null && latitudeRef != null && longitudeRef != null) {\n-                //If image has EXIF data, extract image coords\n-                imageCoordsExists = true\n-                Timber.d(\"EXIF data has location info\")\n-                decLatitude =\n-                    if (ExifInterface.LATITUDE_NORTH == latitudeRef) convertToDegree(latitude)\n-                    else 0 - convertToDegree(latitude)\n-                decLongitude =\n-                    if (ExifInterface.LONGITUDE_EAST == longitudeRef) convertToDegree(longitude)\n-                    else 0 - convertToDegree(longitude)\n+            val latAndLong = exif.latLong\n+            if (latAndLong != null) {\n+                decLatitude = latAndLong[0]\n+                decLongitude = latAndLong[1]", "originalCommit": "414d30f4e913abc262f1ebc4c64f05051428238d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTI1ODk5Mg==", "url": "https://github.com/commons-app/apps-android-commons/pull/4082#discussion_r539258992", "bodyText": "Agreed, thanks a lot @domdomegg !", "author": "neslihanturan", "createdAt": "2020-12-09T12:18:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUyNzU4NA=="}], "type": "inlineReview"}, {"oid": "b4aa0f215160fb800a823a04767603785d0187df", "url": "https://github.com/commons-app/apps-android-commons/commit/b4aa0f215160fb800a823a04767603785d0187df", "message": "Move boolean to bottom to cover both cases", "committedDate": "2020-12-09T12:17:36Z", "type": "commit"}]}