{"pr_number": 3723, "pr_title": "Fixes #3720: None of the filters work on Nearby list", "pr_createdAt": "2020-05-01T11:25:31Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/3723", "timeline": [{"oid": "859037fe24b0ea753181111945e0e881117cc041", "url": "https://github.com/commons-app/apps-android-commons/commit/859037fe24b0ea753181111945e0e881117cc041", "message": "Fixes #3720: None of the filters work on Nearby list", "committedDate": "2020-04-30T18:17:32Z", "type": "commit"}, {"oid": "631db50523b69ed8a890f710c9cbe757e47dabff", "url": "https://github.com/commons-app/apps-android-commons/commit/631db50523b69ed8a890f710c9cbe757e47dabff", "message": "Fixed: Place state filter not applied when ALL at place type filter selected", "committedDate": "2020-05-03T13:55:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM0NzUxNQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3723#discussion_r419347515", "bodyText": "Why this if is removed @VitalyVPinchuk ?", "author": "neslihanturan", "createdAt": "2020-05-04T10:38:17Z", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1104,65 +1118,46 @@ public void displayAllMarkers() {\n      * @param filterForAllNoneType true if we filter places with all none button\n      */\n     @Override\n-    public void filterMarkersByLabels(List<Label> selectedLabels, boolean displayExists,\n-                                      boolean displayNeedsPhoto,\n-                                      boolean filterForPlaceState,\n-                                      boolean filterForAllNoneType) {\n-        if (selectedLabels.size() == 0 && filterForPlaceState) { // If nothing is selected, display all", "originalCommit": "631db50523b69ed8a890f710c9cbe757e47dabff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM2Nzk3Nw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3723#discussion_r419367977", "bodyText": "Hello @neslihanturan\nThis wasn't removed. I just made a little bit of refactoring to make it shorter and clearer.\nOriginally, there was if else statement, both parts of which were exactly the same except for nested for loop to implement type filter by comparing selected types to place's label.\nSo I merged them into a single block of code and replaced nested for loop with selectedLabels.contains(place.getLabel()) which is called when filtering needed. This should not affect performance.", "author": "VitalyVPinchuk", "createdAt": "2020-05-04T11:24:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM0NzUxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ0NDA0Ng==", "url": "https://github.com/commons-app/apps-android-commons/pull/3723#discussion_r419444046", "bodyText": "Thank you @VitalyVPinchuk , next time please send another PR for style fixes or other issue fixes. Otherwise it makes harder to review for us. For now it is okay.", "author": "neslihanturan", "createdAt": "2020-05-04T13:40:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM0NzUxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTQ1MzE4Ng==", "url": "https://github.com/commons-app/apps-android-commons/pull/3723#discussion_r419453186", "bodyText": "I see. Sorry.", "author": "VitalyVPinchuk", "createdAt": "2020-05-04T13:53:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM0NzUxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM0ODUzOQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3723#discussion_r419348539", "bodyText": "Why this nullceck is removed?", "author": "neslihanturan", "createdAt": "2020-05-04T10:40:35Z", "path": "app/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "diffHunk": "@@ -1223,10 +1220,7 @@ public void updateMarker(boolean isBookmarked, Place place, @Nullable fr.free.nr\n      * but it is transparent more than grey(as the name of the icon might suggest)\n      * since grey icon may lead the users to believe that it is disabled or prohibited contribution\n      */\n-    private void hideAllMArkers() {\n-        if(currentLocationMarker==null){", "originalCommit": "631db50523b69ed8a890f710c9cbe757e47dabff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM3MDEyMQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3723#discussion_r419370121", "bodyText": "It prevents initial filtering when Needs Photo chip set.\nCheck this", "author": "VitalyVPinchuk", "createdAt": "2020-05-04T11:29:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM0ODUzOQ=="}], "type": "inlineReview"}, {"oid": "e8af8e7154854f561afa2a5c21f1abf331ed2ed6", "url": "https://github.com/commons-app/apps-android-commons/commit/e8af8e7154854f561afa2a5c21f1abf331ed2ed6", "message": "Merge remote-tracking branch 'remotes/upstream/master' into fix-3720\n\n# Conflicts:\n#\tapp/src/main/java/fr/free/nrw/commons/nearby/fragments/NearbyParentFragment.java", "committedDate": "2020-05-04T13:51:54Z", "type": "commit"}]}