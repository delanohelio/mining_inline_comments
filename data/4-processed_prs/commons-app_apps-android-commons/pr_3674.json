{"pr_number": 3674, "pr_title": "Converted Config Utils to Kotlin", "pr_createdAt": "2020-04-18T17:26:36Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/3674", "timeline": [{"oid": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b", "url": "https://github.com/commons-app/apps-android-commons/commit/70f5b0c3c6d4adec60310f4c564e4fa2a9add35b", "message": "Converted Config Utils to Kotlin", "committedDate": "2020-04-18T17:23:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIwOTg3OQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r411209879", "bodyText": "this doesn't need to be a get() as it doesn't need to be evaluated every time someone accesses it", "author": "macgills", "createdAt": "2020-04-20T08:57:29Z", "path": "app/src/main/java/fr/free/nrw/commons/utils/ConfigUtils.kt", "diffHunk": "@@ -0,0 +1,32 @@\n+package fr.free.nrw.commons.utils\n+\n+import android.content.Context\n+import android.content.pm.PackageManager\n+import fr.free.nrw.commons.BuildConfig\n+import java.util.*\n+\n+object ConfigUtils {\n+    @JvmStatic\n+    val isBetaFlavour: Boolean\n+        get() = BuildConfig.FLAVOR == \"beta\"", "originalCommit": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIxMjIwNw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r411212207", "bodyText": "Could be rewritten to use kotlin string interpolation", "author": "macgills", "createdAt": "2020-04-20T09:00:50Z", "path": "app/src/main/java/fr/free/nrw/commons/utils/ConfigUtils.kt", "diffHunk": "@@ -0,0 +1,32 @@\n+package fr.free.nrw.commons.utils\n+\n+import android.content.Context\n+import android.content.pm.PackageManager\n+import fr.free.nrw.commons.BuildConfig\n+import java.util.*\n+\n+object ConfigUtils {\n+    @JvmStatic\n+    val isBetaFlavour: Boolean\n+        get() = BuildConfig.FLAVOR == \"beta\"\n+\n+    @JvmStatic\n+    private fun getVersionName(context: Context): String {\n+        return try {\n+            context.packageManager\n+                .getPackageInfo(context.packageName, 0).versionName\n+        } catch (e: PackageManager.NameNotFoundException) {\n+            BuildConfig.VERSION_NAME\n+        }\n+    }\n+\n+    @JvmStatic\n+    fun getVersionNameWithSha(context: Context): String {\n+        return String.format(", "originalCommit": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIxMjg0Ng==", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r411212846", "bodyText": "Might be nicer as an extension function on context", "author": "macgills", "createdAt": "2020-04-20T09:01:52Z", "path": "app/src/main/java/fr/free/nrw/commons/utils/ConfigUtils.kt", "diffHunk": "@@ -0,0 +1,32 @@\n+package fr.free.nrw.commons.utils\n+\n+import android.content.Context\n+import android.content.pm.PackageManager\n+import fr.free.nrw.commons.BuildConfig\n+import java.util.*\n+\n+object ConfigUtils {\n+    @JvmStatic\n+    val isBetaFlavour: Boolean\n+        get() = BuildConfig.FLAVOR == \"beta\"\n+\n+    @JvmStatic\n+    private fun getVersionName(context: Context): String {", "originalCommit": "70f5b0c3c6d4adec60310f4c564e4fa2a9add35b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ae127c9f5d13e81051b0183f7a7517f2e2f18e74", "url": "https://github.com/commons-app/apps-android-commons/commit/ae127c9f5d13e81051b0183f7a7517f2e2f18e74", "message": "Changes made as per suggestion", "committedDate": "2020-04-20T19:04:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTk4NDE0MA==", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r411984140", "bodyText": "this can be omitted in both extension functions", "author": "macgills", "createdAt": "2020-04-21T08:32:11Z", "path": "app/src/main/java/fr/free/nrw/commons/utils/ConfigUtils.kt", "diffHunk": "@@ -3,30 +3,22 @@ package fr.free.nrw.commons.utils\n import android.content.Context\n import android.content.pm.PackageManager\n import fr.free.nrw.commons.BuildConfig\n-import java.util.*\n \n object ConfigUtils {\n     @JvmStatic\n-    val isBetaFlavour: Boolean\n-        get() = BuildConfig.FLAVOR == \"beta\"\n+    val isBetaFlavour: Boolean = BuildConfig.FLAVOR == \"beta\"\n \n     @JvmStatic\n-    private fun getVersionName(context: Context): String {\n+    private fun Context.getVersionName(): String {\n         return try {\n-            context.packageManager\n-                .getPackageInfo(context.packageName, 0).versionName\n+            this.packageManager.getPackageInfo(this.packageName, 0).versionName", "originalCommit": "ae127c9f5d13e81051b0183f7a7517f2e2f18e74", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjAyMjY5MA==", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r412022690", "bodyText": "Thanks, the extension functions are really cool.", "author": "madhurgupta10", "createdAt": "2020-04-21T09:24:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTk4NDE0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjAyNjYxNw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3674#discussion_r412026617", "bodyText": "Dope as hell, you can also have extension properties which is identical to a function but you can access it like\ncontext.versionName\n\nfrom\nval Context.versionName\nget() = //code", "author": "macgills", "createdAt": "2020-04-21T09:29:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTk4NDE0MA=="}], "type": "inlineReview"}, {"oid": "f3e5b79c5bd744a30eb8c9210ca21a90080cd626", "url": "https://github.com/commons-app/apps-android-commons/commit/f3e5b79c5bd744a30eb8c9210ca21a90080cd626", "message": "Omitted this", "committedDate": "2020-04-21T09:29:34Z", "type": "commit"}]}