{"pr_number": 199, "pr_title": "ODFE 1.10 support for k-NN plugin", "pr_createdAt": "2020-08-25T07:05:57Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/199", "timeline": [{"oid": "465e1f07d41c910324a6eee0397161234764ff78", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/465e1f07d41c910324a6eee0397161234764ff78", "message": "synced from master", "committedDate": "2020-07-20T20:04:58Z", "type": "commit"}, {"oid": "e29432b8335642fc4727617c7377115618605a51", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/e29432b8335642fc4727617c7377115618605a51", "message": "Merge branch 'master' of github.com:opendistro-for-elasticsearch/k-NN", "committedDate": "2020-07-24T20:33:41Z", "type": "commit"}, {"oid": "af0dbe68ab309d084c746119696e5704b7eea1ff", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/af0dbe68ab309d084c746119696e5704b7eea1ff", "message": "Merge branch 'master' of github.com:opendistro-for-elasticsearch/k-NN", "committedDate": "2020-08-20T17:37:25Z", "type": "commit"}, {"oid": "131a595d198a10ed0caab481bb36ba2e3c20f680", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/131a595d198a10ed0caab481bb36ba2e3c20f680", "message": "odfe 1.10 version support", "committedDate": "2020-08-25T06:43:33Z", "type": "commit"}, {"oid": "2785647b4273fbe355a49952b9c2b3b7192f6654", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/2785647b4273fbe355a49952b9c2b3b7192f6654", "message": "odfe 1.10 version support", "committedDate": "2020-08-25T07:05:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MTc1Mg==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/199#discussion_r476541752", "bodyText": "Why was this removed?", "author": "jmazanec15", "createdAt": "2020-08-25T15:32:49Z", "path": "build.gradle", "diffHunk": "@@ -102,7 +102,6 @@ task release(type: Copy, group: 'build') {\n //****************************************************************************/\n dependencies {\n     compileOnly \"org.elasticsearch:elasticsearch:${es_version}\"\n-    compileOnly group: 'com.google.errorprone', name: 'error_prone_annotations', version:'2.4.0'", "originalCommit": "2785647b4273fbe355a49952b9c2b3b7192f6654", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYxODU1Mw==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/199#discussion_r476618553", "bodyText": "Elasticsearch pulls this dependency now in this release and there was a conflict, so i removed it to use Elasticsearch's dependency", "author": "vamshin", "createdAt": "2020-08-25T17:27:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0MTc1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0NjMyNg==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/199#discussion_r476546326", "bodyText": "Why was KNNVectorField removed?", "author": "jmazanec15", "createdAt": "2020-08-25T15:39:17Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/knn/index/KNNVectorFieldMapper.java", "diffHunk": "@@ -56,38 +57,48 @@\n \n     protected Explicit<Boolean> ignoreMalformed;\n \n-    public KNNVectorFieldMapper(String simpleName, MappedFieldType fieldType, MappedFieldType defaultFieldType,\n+    public KNNVectorFieldMapper(String simpleName, FieldType fieldType, MappedFieldType defaultFieldType,\n                                 Settings indexSettings, MultiFields multiFields, Explicit<Boolean> ignoreMalformed,\n                                 CopyTo copyTo) {\n-        super(simpleName, fieldType, defaultFieldType, indexSettings, multiFields, copyTo);\n+        super(simpleName, fieldType, defaultFieldType,  multiFields, copyTo);\n         this.ignoreMalformed = ignoreMalformed;\n     }\n \n     public static class Names {\n         public static final String IGNORE_MALFORMED = \"ignore_malformed\";\n     }\n \n+    public KNNVectorFieldMapper clone() {\n+        return (KNNVectorFieldMapper) super.clone();\n+    }\n+\n     public static class Defaults {\n         public static final Explicit<Boolean> IGNORE_MALFORMED = new Explicit<>(false, false);\n-        public static final KNNVectorFieldType FIELD_TYPE = new KNNVectorFieldType();", "originalCommit": "2785647b4273fbe355a49952b9c2b3b7192f6654", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYyNDM3MA==", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/pull/199#discussion_r476624370", "bodyText": "There is a refactoring around MappedFieldType and FieldType separating indexing and search attributes. More details here elastic/elasticsearch#58160. As part of this i need to replace the MappedFieldType to FieldType for providing the indexing attributes.", "author": "vamshin", "createdAt": "2020-08-25T17:37:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU0NjMyNg=="}], "type": "inlineReview"}, {"oid": "7d59d99edfb89889d0bc772559efb82efad0a443", "url": "https://github.com/opendistro-for-elasticsearch/k-NN/commit/7d59d99edfb89889d0bc772559efb82efad0a443", "message": "incorporated comments", "committedDate": "2020-08-25T18:12:46Z", "type": "commit"}]}