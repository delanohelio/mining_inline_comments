{"pr_number": 2800, "pr_title": "Add missing permissions", "pr_createdAt": "2020-02-28T09:25:18Z", "pr_url": "https://github.com/wso2/carbon-identity-framework/pull/2800", "timeline": [{"oid": "5ce6ffe74c3a39cb0c45282b0f085aa4eecc0202", "url": "https://github.com/wso2/carbon-identity-framework/commit/5ce6ffe74c3a39cb0c45282b0f085aa4eecc0202", "message": "Fix the API name", "committedDate": "2020-02-28T10:14:23Z", "type": "forcePushed"}, {"oid": "4ecb4d566fe2606523fe9caa252bce4a5938b80c", "url": "https://github.com/wso2/carbon-identity-framework/commit/4ecb4d566fe2606523fe9caa252bce4a5938b80c", "message": "Fix the API name", "committedDate": "2020-02-28T10:57:13Z", "type": "forcePushed"}, {"oid": "309a3d127e515865bb20de6b01ecd4f66e6e7b95", "url": "https://github.com/wso2/carbon-identity-framework/commit/309a3d127e515865bb20de6b01ecd4f66e6e7b95", "message": "Fix the API name", "committedDate": "2020-02-28T11:05:23Z", "type": "forcePushed"}, {"oid": "36f4975404937125bba8a8fd8fea4a0899a19e4c", "url": "https://github.com/wso2/carbon-identity-framework/commit/36f4975404937125bba8a8fd8fea4a0899a19e4c", "message": "Fix the API name", "committedDate": "2020-02-28T11:20:46Z", "type": "forcePushed"}, {"oid": "9e91a4d4e02007ce8ce3b403ad24c2ee0652ae7a", "url": "https://github.com/wso2/carbon-identity-framework/commit/9e91a4d4e02007ce8ce3b403ad24c2ee0652ae7a", "message": "Fix the API name", "committedDate": "2020-02-28T11:54:29Z", "type": "forcePushed"}, {"oid": "0bc7c15a1ccaeb26231f6b7e8e950b2cc37ed8df", "url": "https://github.com/wso2/carbon-identity-framework/commit/0bc7c15a1ccaeb26231f6b7e8e950b2cc37ed8df", "message": "Fix the API name", "committedDate": "2020-02-28T11:58:24Z", "type": "forcePushed"}, {"oid": "c60b6a663c47a46ab98d2eac9c8435d6eb4f2cd5", "url": "https://github.com/wso2/carbon-identity-framework/commit/c60b6a663c47a46ab98d2eac9c8435d6eb4f2cd5", "message": "Fix the API name", "committedDate": "2020-02-29T14:51:24Z", "type": "forcePushed"}, {"oid": "1bb089f8e2adebd7412d80cbd96137d12fed1e69", "url": "https://github.com/wso2/carbon-identity-framework/commit/1bb089f8e2adebd7412d80cbd96137d12fed1e69", "message": "Fix the API name", "committedDate": "2020-02-29T15:03:04Z", "type": "forcePushed"}, {"oid": "86329bd5798bd80b299771259d13eb86e717e98a", "url": "https://github.com/wso2/carbon-identity-framework/commit/86329bd5798bd80b299771259d13eb86e717e98a", "message": "Fix the API name", "committedDate": "2020-02-29T16:38:06Z", "type": "commit"}, {"oid": "86329bd5798bd80b299771259d13eb86e717e98a", "url": "https://github.com/wso2/carbon-identity-framework/commit/86329bd5798bd80b299771259d13eb86e717e98a", "message": "Fix the API name", "committedDate": "2020-02-29T16:38:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA3NjY0NQ==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2800#discussion_r386076645", "bodyText": "Should we break this according to the http-methods and set the relevant scope for each?", "author": "janakamarasena", "createdAt": "2020-03-01T04:45:20Z", "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/identity.xml", "diffHunk": "@@ -1358,15 +1363,30 @@\n             <Permissions>/permission/admin/manage/identity/userstore/config/view</Permissions>\n             <Scopes>internal_userstore_view</Scopes>\n         </Resource>\n-        <Resource context=\"(.*)/api/server/v1/me/sessions(.*)\" secured=\"true\"\n+        <Resource context=\"(.*)/api/users/v1/me/sessions(.*)\" secured=\"true\"\n                   http-method=\"all\">\n             <Permissions>none</Permissions>\n             <Scopes>internal_login</Scopes>\n         </Resource>\n-        <Resource context=\"(.*)/api/server/v1/(.*)/sessions(.*)\" secured=\"true\" http-method=\"all\">\n+        <Resource context=\"(.*)/api/users/v1/(.*)/sessions(.*)\" secured=\"true\" http-method=\"GET\">\n             <Permissions>/permission/admin/manage/identity/authentication/session/view</Permissions>\n             <Scopes>internal_session_view</Scopes>\n         </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/sessions(.*)\" secured=\"true\" http-method=\"DELETE\">\n+            <Permissions>/permission/admin/manage/identity/authentication/session/delete</Permissions>\n+            <Scopes>internal_session_delete</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/me(.*)\" secured=\"true\" http-method=\"GET, HEAD, POST, PUT, DELETE, PATCH\">\n+            <Permissions>none</Permissions>\n+            <Scopes>internal_login</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)\" secured=\"true\" http-method=\"all\">\n+            <Permissions>/permission/admin/manage/identity</Permissions>\n+            <Scopes>internal_identity_mgt_view</Scopes>\n+            <Scopes>internal_identity_mgt_update</Scopes>\n+            <Scopes>internal_identity_mgt_create</Scopes>\n+            <Scopes>internal_identity_mgt_delete</Scopes>\n+        </Resource>", "originalCommit": "86329bd5798bd80b299771259d13eb86e717e98a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc4MjE3MQ==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2800#discussion_r386782171", "bodyText": "No, since it is general API we don't need to split it.", "author": "nilasini", "createdAt": "2020-03-03T03:34:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA3NjY0NQ=="}], "type": "inlineReview"}]}