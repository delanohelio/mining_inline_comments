{"pr_number": 2795, "pr_title": "Add missing permissions", "pr_createdAt": "2020-02-27T12:28:54Z", "pr_url": "https://github.com/wso2/carbon-identity-framework/pull/2795", "timeline": [{"oid": "8bf649d439cf53eaadbf6f1c5ede8010ca5a280b", "url": "https://github.com/wso2/carbon-identity-framework/commit/8bf649d439cf53eaadbf6f1c5ede8010ca5a280b", "message": "Add missing permissions", "committedDate": "2020-02-27T12:39:14Z", "type": "forcePushed"}, {"oid": "d2e19f08f6097deeda1bea0bbf8fb617ab5000f8", "url": "https://github.com/wso2/carbon-identity-framework/commit/d2e19f08f6097deeda1bea0bbf8fb617ab5000f8", "message": "Add missing permissions", "committedDate": "2020-02-27T12:48:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwNzIwMw==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2795#discussion_r385107203", "bodyText": "should be /permission/admin/manage/identity/identitymgt/update", "author": "IsuraD", "createdAt": "2020-02-27T12:53:37Z", "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/identity.xml", "diffHunk": "@@ -1213,20 +1213,58 @@\n             <Permissions>none</Permissions>\n             <Scopes>internal_login</Scopes>\n         </Resource>\n-        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"all\">\n-            <Permissions>/permission/admin/manage/identity</Permissions>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/associations\" secured=\"true\" http-method=\"GET\">\n+            <Permissions>/permission/admin/manage/identity/user/association/view</Permissions>\n+            <Scopes>internal_user_association_view</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/associations\" secured=\"true\" http-method=\"DELETE\">\n+            <Permissions>/permission/admin/manage/identity/user/association/delete</Permissions>\n+            <Scopes>internal_user_association_delete</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/federated-associations\" secured=\"true\" http-method=\"GET\">\n+            <Permissions>/permission/admin/manage/identity/user/association/view</Permissions>\n+            <Scopes>internal_user_association_view</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/federated-associations(.*)\" secured=\"true\" http-method=\"DELETE\">\n+            <Permissions>/permission/admin/manage/identity/user/association/delete</Permissions>\n+            <Scopes>internal_user_association_delete</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"GET\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/view</Permissions>\n             <Scopes>internal_identity_mgt_view</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"PUT, PATCH\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/update</Permissions>\n             <Scopes>internal_identity_mgt_update</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"POST\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/create</Permissions>\n             <Scopes>internal_identity_mgt_create</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"DELETE\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/delete</Permissions>\n             <Scopes>internal_identity_mgt_delete</Scopes>\n         </Resource>\n-        <Resource context=\"(.*)/api/users/v1/(.*)/challenge-answers(.*)\" secured=\"true\" http-method=\"all\">\n-            <Permissions>/permission/admin/manage/identity</Permissions>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenge-answers(.*)\" secured=\"true\" http-method=\"GET\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/view</Permissions>\n             <Scopes>internal_identity_mgt_view</Scopes>\n-            <Scopes>internal_identity_mgt_update</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenge-answers(.*)\" secured=\"true\" http-method=\"PUT, PATCH\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/view</Permissions>", "originalCommit": "d2e19f08f6097deeda1bea0bbf8fb617ab5000f8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwODM0Ng==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2795#discussion_r385108346", "bodyText": "we need fine-grained permission for this. Just login permission won't enough", "author": "IsuraD", "createdAt": "2020-02-27T12:56:14Z", "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/identity.xml", "diffHunk": "@@ -1213,20 +1213,58 @@\n             <Permissions>none</Permissions>\n             <Scopes>internal_login</Scopes>\n         </Resource>\n-        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"all\">\n-            <Permissions>/permission/admin/manage/identity</Permissions>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/associations\" secured=\"true\" http-method=\"GET\">\n+            <Permissions>/permission/admin/manage/identity/user/association/view</Permissions>\n+            <Scopes>internal_user_association_view</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/associations\" secured=\"true\" http-method=\"DELETE\">\n+            <Permissions>/permission/admin/manage/identity/user/association/delete</Permissions>\n+            <Scopes>internal_user_association_delete</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/federated-associations\" secured=\"true\" http-method=\"GET\">\n+            <Permissions>/permission/admin/manage/identity/user/association/view</Permissions>\n+            <Scopes>internal_user_association_view</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/federated-associations(.*)\" secured=\"true\" http-method=\"DELETE\">\n+            <Permissions>/permission/admin/manage/identity/user/association/delete</Permissions>\n+            <Scopes>internal_user_association_delete</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"GET\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/view</Permissions>\n             <Scopes>internal_identity_mgt_view</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"PUT, PATCH\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/update</Permissions>\n             <Scopes>internal_identity_mgt_update</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"POST\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/create</Permissions>\n             <Scopes>internal_identity_mgt_create</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenges(.*)\" secured=\"true\" http-method=\"DELETE\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/delete</Permissions>\n             <Scopes>internal_identity_mgt_delete</Scopes>\n         </Resource>\n-        <Resource context=\"(.*)/api/users/v1/(.*)/challenge-answers(.*)\" secured=\"true\" http-method=\"all\">\n-            <Permissions>/permission/admin/manage/identity</Permissions>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenge-answers(.*)\" secured=\"true\" http-method=\"GET\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/view</Permissions>\n             <Scopes>internal_identity_mgt_view</Scopes>\n-            <Scopes>internal_identity_mgt_update</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenge-answers(.*)\" secured=\"true\" http-method=\"PUT, PATCH\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/view</Permissions>\n+            <Scopes>internal_identity_mgt_view</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenge-answers(.*)\" secured=\"true\" http-method=\"POST\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/create</Permissions>\n             <Scopes>internal_identity_mgt_create</Scopes>\n+        </Resource>\n+        <Resource context=\"(.*)/api/users/v1/(.*)/challenge-answers(.*)\" secured=\"true\" http-method=\"DELETE\">\n+            <Permissions>/permission/admin/manage/identity/identitymgt/delete</Permissions>\n             <Scopes>internal_identity_mgt_delete</Scopes>\n         </Resource>\n+        <Resource context=\"(.*)/api/users/v1/claim-dialects/(.*)\" secured=\"true\" http-method=\"all\">", "originalCommit": "d2e19f08f6097deeda1bea0bbf8fb617ab5000f8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1a5ef09a381587adae6e282ec0a35f7fa53c7354", "url": "https://github.com/wso2/carbon-identity-framework/commit/1a5ef09a381587adae6e282ec0a35f7fa53c7354", "message": "Add missing permissions", "committedDate": "2020-02-27T12:53:31Z", "type": "forcePushed"}, {"oid": "c10aeabd0fbc7d4a7ee9cbdf541ae89e865227c0", "url": "https://github.com/wso2/carbon-identity-framework/commit/c10aeabd0fbc7d4a7ee9cbdf541ae89e865227c0", "message": "Add missing permissions", "committedDate": "2020-02-27T13:57:47Z", "type": "forcePushed"}, {"oid": "3565d10ebf7f69cfd7e7b0ae2175fe4444ce022d", "url": "https://github.com/wso2/carbon-identity-framework/commit/3565d10ebf7f69cfd7e7b0ae2175fe4444ce022d", "message": "Add missing permissions", "committedDate": "2020-02-27T14:02:23Z", "type": "forcePushed"}, {"oid": "9e087eb24e9ef6dc97ba5c36be0d1620db0411d6", "url": "https://github.com/wso2/carbon-identity-framework/commit/9e087eb24e9ef6dc97ba5c36be0d1620db0411d6", "message": "Add missing permissions", "committedDate": "2020-02-27T14:08:15Z", "type": "forcePushed"}, {"oid": "45c3d8491b4e61816ab203ea102f7ec8243642fb", "url": "https://github.com/wso2/carbon-identity-framework/commit/45c3d8491b4e61816ab203ea102f7ec8243642fb", "message": "Add missing permissions", "committedDate": "2020-02-27T14:29:54Z", "type": "forcePushed"}, {"oid": "e2694b658235c2f91c5428990ddba44d04146e41", "url": "https://github.com/wso2/carbon-identity-framework/commit/e2694b658235c2f91c5428990ddba44d04146e41", "message": "Add missing permissions", "committedDate": "2020-02-27T14:47:25Z", "type": "forcePushed"}, {"oid": "7b17b7f16a198a01d0a3b993ac4b9e64acf942c2", "url": "https://github.com/wso2/carbon-identity-framework/commit/7b17b7f16a198a01d0a3b993ac4b9e64acf942c2", "message": "Add missing permissions", "committedDate": "2020-02-27T14:55:40Z", "type": "forcePushed"}, {"oid": "7d075d1c648e4983c7850cac28d473e0f10b3321", "url": "https://github.com/wso2/carbon-identity-framework/commit/7d075d1c648e4983c7850cac28d473e0f10b3321", "message": "Add missing permissions", "committedDate": "2020-02-27T14:57:56Z", "type": "commit"}, {"oid": "7d075d1c648e4983c7850cac28d473e0f10b3321", "url": "https://github.com/wso2/carbon-identity-framework/commit/7d075d1c648e4983c7850cac28d473e0f10b3321", "message": "Add missing permissions", "committedDate": "2020-02-27T14:57:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwOTk2Ng==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2795#discussion_r385109966", "bodyText": "WE can't unsecure this. Need fine-grained permission.", "author": "IsuraD", "createdAt": "2020-02-27T12:59:34Z", "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/identity.xml", "diffHunk": "@@ -1251,12 +1289,15 @@\n             <Scopes>internal_identity_mgt_delete</Scopes>\n         </Resource>\n         <Resource context=\"(.*)/api/server/v1/keystores/certs/public(.*)\" secured=\"false\" http-method=\"GET\"/>\n-        <Resource context=\"(.*)/api/server/v1/applications(.*)\" secured=\"true\" http-method=\"PUT, POST, PATCH\">\n-            <Permissions>/permission/admin/manage/identity/applicationmgt/update</Permissions>\n+        <Resource context=\"(.*)/api/server/v1/keystores/(.*)\" secured=\"false\" http-method=\"GET, POST, DELETE\"/>", "originalCommit": "1a5ef09a381587adae6e282ec0a35f7fa53c7354", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE2NTk4Mg==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2795#discussion_r385165982", "bodyText": "idpmgt/view for GET\nidpmgt/update for PATCH", "author": "IsuraD", "createdAt": "2020-02-27T14:45:14Z", "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/identity.xml", "diffHunk": "@@ -1265,6 +1326,44 @@\n             <Permissions>/permission/admin/manage/identity/applicationmgt/view</Permissions>\n             <Scopes>internal_application_mgt_view</Scopes>\n         </Resource>\n+        <Resource context=\"(.*)/api/server/v1/identity-governance/(.*)\" secured=\"true\" http-method=\"GET, PATCH\">\n+            <Permissions>/permission/admin/manage</Permissions>", "originalCommit": "45c3d8491b4e61816ab203ea102f7ec8243642fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}