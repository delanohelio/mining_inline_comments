{"pr_number": 3077, "pr_title": "Enhanced the xacml policy loading flow from filesystem preserving the default flow", "pr_createdAt": "2020-08-20T07:38:44Z", "pr_url": "https://github.com/wso2/carbon-identity-framework/pull/3077", "timeline": [{"oid": "164486c4752f82477543a5caa13a9c527688d03e", "url": "https://github.com/wso2/carbon-identity-framework/commit/164486c4752f82477543a5caa13a9c527688d03e", "message": "Enhanced the xacml policy loading flow from filesystem", "committedDate": "2020-08-20T07:34:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc2MzQ5NA==", "url": "https://github.com/wso2/carbon-identity-framework/pull/3077#discussion_r486763494", "bodyText": "Complete the javadoc with descriptions", "author": "sachiniWettasinghe", "createdAt": "2020-09-11T04:16:02Z", "path": "components/entitlement/org.wso2.carbon.identity.entitlement/src/main/java/org/wso2/carbon/identity/entitlement/internal/EntitlementServiceComponent.java", "diffHunk": "@@ -307,6 +317,36 @@ protected void activate(ComponentContext ctxt) {\n         }\n     }\n \n+    /**\n+     * Adds policy files with unique policyIDs to the registry.\n+     *\n+     * @param policyIdList\n+     * @param fileList\n+     * @return\n+     * @throws IOException\n+     */", "originalCommit": "164486c4752f82477543a5caa13a9c527688d03e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY1MzAyNw==", "url": "https://github.com/wso2/carbon-identity-framework/pull/3077#discussion_r487653027", "bodyText": "Fixed in #3110", "author": "ashendes", "createdAt": "2020-09-14T05:03:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc2MzQ5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc2Mzc1Ng==", "url": "https://github.com/wso2/carbon-identity-framework/pull/3077#discussion_r486763756", "bodyText": "Format the comment by starting with a capital letter and ending with a '.'. And add a meaningful sentence here.", "author": "sachiniWettasinghe", "createdAt": "2020-09-11T04:17:16Z", "path": "components/entitlement/org.wso2.carbon.identity.entitlement/src/main/java/org/wso2/carbon/identity/entitlement/internal/EntitlementServiceComponent.java", "diffHunk": "@@ -307,6 +317,36 @@ protected void activate(ComponentContext ctxt) {\n         }\n     }\n \n+    /**\n+     * Adds policy files with unique policyIDs to the registry.\n+     *\n+     * @param policyIdList\n+     * @param fileList\n+     * @return\n+     * @throws IOException\n+     */\n+    private boolean addPolicyFiles(List<String> policyIdList, File[] fileList) throws IOException {\n+\n+        boolean customPolicies = false;\n+        for (File policyFile : fileList) {\n+            if (policyFile.isFile()) {\n+                PolicyDTO policyDTO = new PolicyDTO();\n+                policyDTO.setPolicy(FileUtils.readFileToString(policyFile));\n+                if (!policyIdList.contains(policyDTO.getPolicyId())) {\n+                    try {\n+                        EntitlementUtil.addFilesystemPolicy(policyDTO, registryService\n+                                .getGovernanceSystemRegistry(), true);\n+                    } catch (Exception e) {\n+                        // log and ignore", "originalCommit": "164486c4752f82477543a5caa13a9c527688d03e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY1MzA0Mw==", "url": "https://github.com/wso2/carbon-identity-framework/pull/3077#discussion_r487653043", "bodyText": "Fixed in #3110", "author": "ashendes", "createdAt": "2020-09-14T05:03:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc2Mzc1Ng=="}], "type": "inlineReview"}]}