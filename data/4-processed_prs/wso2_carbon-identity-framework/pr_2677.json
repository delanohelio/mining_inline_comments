{"pr_number": 2677, "pr_title": "Fix issues in the postgres db script", "pr_createdAt": "2020-01-17T10:05:36Z", "pr_url": "https://github.com/wso2/carbon-identity-framework/pull/2677", "timeline": [{"oid": "30b952e9c98d9851e88edd6a167b610c23748cb1", "url": "https://github.com/wso2/carbon-identity-framework/commit/30b952e9c98d9851e88edd6a167b610c23748cb1", "message": "Fix issues in the postgres db script", "committedDate": "2020-01-17T10:04:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1OTI2MQ==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2677#discussion_r367859261", "bodyText": "Haven't we already declared CODE_ID as UNIQUE in the next line?", "author": "inthirakumaaran", "createdAt": "2020-01-17T10:10:33Z", "path": "features/identity-core/org.wso2.carbon.identity.core.server.feature/resources/dbscripts/postgresql.sql", "diffHunk": "@@ -178,16 +178,16 @@ CREATE TABLE IF NOT EXISTS IDN_OAUTH2_DEVICE_FLOW (\n             USER_DOMAIN VARCHAR(50),\n             IDP_ID INTEGER,\n             PRIMARY KEY (DEVICE_CODE),\n+            UNIQUE (CODE_ID),", "originalCommit": "30b952e9c98d9851e88edd6a167b610c23748cb1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg2NTEzMA==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2677#discussion_r367865130", "bodyText": "That defines the combination of CODE_ID, USER_CODE & DEVICE_CODE as unique", "author": "Abilashini", "createdAt": "2020-01-17T10:24:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1OTI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg5NzYzNg==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2677#discussion_r367897636", "bodyText": "In this case, do we need to make the combination of CODE_ID, USER_CODE & DEVICE_CODE as unique since CODE_ID is always unique this combination will be always unique right?", "author": "inthirakumaaran", "createdAt": "2020-01-17T11:46:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1OTI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQwNzczOA==", "url": "https://github.com/wso2/carbon-identity-framework/pull/2677#discussion_r368407738", "bodyText": "Fixed with #2682", "author": "Abilashini", "createdAt": "2020-01-20T07:59:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzg1OTI2MQ=="}], "type": "inlineReview"}]}