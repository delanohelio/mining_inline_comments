{"pr_number": 5048, "pr_title": "Update error-prone configuration", "pr_createdAt": "2020-10-19T16:25:45Z", "pr_url": "https://github.com/palantir/atlasdb/pull/5048", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5MTUwOA==", "url": "https://github.com/palantir/atlasdb/pull/5048#discussion_r507891508", "bodyText": "Do we actually want to disable? I tend to grep the (error|warning): from build log to fix these up", "author": "schlosna", "createdAt": "2020-10-19T16:31:41Z", "path": "build.gradle", "diffHunk": "@@ -106,17 +106,9 @@ allprojects {\n         }\n     }\n \n-    plugins.withId('com.palantir.baseline-error-prone', {\n-        tasks.withType(JavaCompile).configureEach {\n-            options.errorprone.disableWarningsInGeneratedCode = true\n-            options.errorprone.errorproneArgs.addAll([\n-                '-XepDisableWarningsInGeneratedCode',\n-                '-XepExcludedPaths:.*(generated).*',\n-            ])\n-\n-            // temporarily relax constraints until we can fix all violations\n-            Set<String> errorsToRelax = [\n-                'CatchBlockLogException',\n+    tasks.withType(JavaCompile) {\n+        // temporarily relax constraints until we can fix all violations\n+        options.errorprone.disable 'CatchBlockLogException',", "originalCommit": "7c20488aa92200b3721d2cedfd4bed36687b11d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5NTAyMA==", "url": "https://github.com/palantir/atlasdb/pull/5048#discussion_r507895020", "bodyText": "We can set them to warn instead, no strong preference. I've normally added things to a list in order to burn through it later since it's easier to promote a single check and fix all occurrences.\nMind if I push a few automated check fixes to cut down on the warnings along with this?", "author": "carterkozak", "createdAt": "2020-10-19T16:37:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5MTUwOA=="}], "type": "inlineReview"}, {"oid": "9820b54f3633f6a6f6a543d46bad8835e1fa1cc6", "url": "https://github.com/palantir/atlasdb/commit/9820b54f3633f6a6f6a543d46bad8835e1fa1cc6", "message": "Update error-prone configuration", "committedDate": "2020-10-19T16:35:24Z", "type": "commit"}, {"oid": "1c063ef124e6ababb43be55454cbaf77e0c192da", "url": "https://github.com/palantir/atlasdb/commit/1c063ef124e6ababb43be55454cbaf77e0c192da", "message": "Fix PreferCollectionConstructors\n\n```\n./gradlew compileJava compileTestJava -PerrorProneApply=PreferCollectionConstructors\n./gradlew format\n```", "committedDate": "2020-10-19T16:35:24Z", "type": "commit"}, {"oid": "a3db5c4b8a34ab0d6ea328f716f47fae60e0e17d", "url": "https://github.com/palantir/atlasdb/commit/a3db5c4b8a34ab0d6ea328f716f47fae60e0e17d", "message": "Fix BracesRequired\n\n`./gradlew compileJava compileTestJava -PerrorProneApply=BracesRequired && ./gradlew format`", "committedDate": "2020-10-19T16:35:24Z", "type": "commit"}, {"oid": "a3db5c4b8a34ab0d6ea328f716f47fae60e0e17d", "url": "https://github.com/palantir/atlasdb/commit/a3db5c4b8a34ab0d6ea328f716f47fae60e0e17d", "message": "Fix BracesRequired\n\n`./gradlew compileJava compileTestJava -PerrorProneApply=BracesRequired && ./gradlew format`", "committedDate": "2020-10-19T16:35:24Z", "type": "forcePushed"}, {"oid": "e477b412c139671f7afa91bff2664829bd146d2a", "url": "https://github.com/palantir/atlasdb/commit/e477b412c139671f7afa91bff2664829bd146d2a", "message": "Fix LoggerEnclosingClass\n\n`./gradlew compileJava compileTestJava -PerrorProneApply=LoggerEnclosingClass && ./gradlew format`", "committedDate": "2020-10-19T16:40:43Z", "type": "commit"}, {"oid": "83423168b99660b8325ec702b19717066512796b", "url": "https://github.com/palantir/atlasdb/commit/83423168b99660b8325ec702b19717066512796b", "message": "Fix Slf4jLevelCheck\n\n```\n./gradlew compileJava compileTestJava -PerrorProneApply=Slf4jLevelCheck && ./gradlew format\n```", "committedDate": "2020-10-19T16:54:05Z", "type": "commit"}, {"oid": "cd3eef4893087a1848e705c57e6a9e9f9e668d50", "url": "https://github.com/palantir/atlasdb/commit/cd3eef4893087a1848e705c57e6a9e9f9e668d50", "message": "Fix ExecutorSubmitRunnableFutureIgnored", "committedDate": "2020-10-19T17:10:54Z", "type": "commit"}, {"oid": "70e5cea8147a793eb8d77afa17399b500e6927c9", "url": "https://github.com/palantir/atlasdb/commit/70e5cea8147a793eb8d77afa17399b500e6927c9", "message": "Fix RedundantModifier", "committedDate": "2020-10-19T17:38:45Z", "type": "commit"}, {"oid": "51e3dc89f2b4391a3c63d3912a2644e0e3907b72", "url": "https://github.com/palantir/atlasdb/commit/51e3dc89f2b4391a3c63d3912a2644e0e3907b72", "message": "Fix MissingOverride", "committedDate": "2020-10-19T17:41:51Z", "type": "commit"}, {"oid": "047e2e3b19799c4f95d5c0a9db92382264ecebfe", "url": "https://github.com/palantir/atlasdb/commit/047e2e3b19799c4f95d5c0a9db92382264ecebfe", "message": "Fix LambdaMethodReference", "committedDate": "2020-10-19T17:43:47Z", "type": "commit"}, {"oid": "95bc60000fd695aeecb83c9c7e45320b23351ae7", "url": "https://github.com/palantir/atlasdb/commit/95bc60000fd695aeecb83c9c7e45320b23351ae7", "message": "Fix FinalClass", "committedDate": "2020-10-19T17:45:30Z", "type": "commit"}, {"oid": "20ceb22a9619efe61eb0b9d2e8889b38c9c8e0f6", "url": "https://github.com/palantir/atlasdb/commit/20ceb22a9619efe61eb0b9d2e8889b38c9c8e0f6", "message": "silence StrictUnusedVariable to avoid losing other signal", "committedDate": "2020-10-19T17:48:43Z", "type": "commit"}, {"oid": "f401ddfacbab7ca81e3482e7048ebf5461d8a368", "url": "https://github.com/palantir/atlasdb/commit/f401ddfacbab7ca81e3482e7048ebf5461d8a368", "message": "Fix PreferStaticLoggers", "committedDate": "2020-10-19T17:53:49Z", "type": "commit"}, {"oid": "56c40c8adb35d32350d6798713b988162a43d87f", "url": "https://github.com/palantir/atlasdb/commit/56c40c8adb35d32350d6798713b988162a43d87f", "message": "Fix UnnecessaryLambdaArgumentParentheses", "committedDate": "2020-10-19T17:58:27Z", "type": "commit"}, {"oid": "e92512de3e6a5c330fffadcbbdcf38a5e7217c66", "url": "https://github.com/palantir/atlasdb/commit/e92512de3e6a5c330fffadcbbdcf38a5e7217c66", "message": "Fix BadImport", "committedDate": "2020-10-19T18:00:35Z", "type": "commit"}, {"oid": "5be08e32ddbe9e44952bc88f362327ce15546988", "url": "https://github.com/palantir/atlasdb/commit/5be08e32ddbe9e44952bc88f362327ce15546988", "message": "Fix UnnecessaryParentheses", "committedDate": "2020-10-19T18:02:52Z", "type": "commit"}, {"oid": "a50a8bef3edbe197204347ebfffa33650801abd0", "url": "https://github.com/palantir/atlasdb/commit/a50a8bef3edbe197204347ebfffa33650801abd0", "message": "remove unnecessary comments", "committedDate": "2020-10-19T18:09:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk2MzI4NA==", "url": "https://github.com/palantir/atlasdb/pull/5048#discussion_r507963284", "bodyText": "@schlosna I've disabled StrictUnusedVariable since it's responsible for the vast majority of compiler warning spam and we can attack it separately.", "author": "carterkozak", "createdAt": "2020-10-19T18:11:21Z", "path": "build.gradle", "diffHunk": "@@ -124,8 +124,8 @@ allprojects {\n                 'ReturnValueIgnored',\n                 'SafeLoggingExceptionMessageFormat',\n                 'StreamOfEmpty',\n-                'StrictUnusedVariable',\n                 'ValidateConstantMessage'\n+        options.errorprone.disable 'StrictUnusedVariable'", "originalCommit": "20ceb22a9619efe61eb0b9d2e8889b38c9c8e0f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2ef34631f228ee8acd8ca57475505331ec48b4e7", "url": "https://github.com/palantir/atlasdb/commit/2ef34631f228ee8acd8ca57475505331ec48b4e7", "message": "Disable JdkObsolete for now to reduce compilation spam", "committedDate": "2020-10-19T18:20:52Z", "type": "commit"}, {"oid": "6087a650697107f85193a781593ead6333765213", "url": "https://github.com/palantir/atlasdb/commit/6087a650697107f85193a781593ead6333765213", "message": "More FinalClass fixes", "committedDate": "2020-10-19T18:21:20Z", "type": "commit"}, {"oid": "c105bad0609c43ea5ac35002d4fc50f35e6557d1", "url": "https://github.com/palantir/atlasdb/commit/c105bad0609c43ea5ac35002d4fc50f35e6557d1", "message": "More MissingOverride", "committedDate": "2020-10-19T18:24:17Z", "type": "commit"}, {"oid": "31b0b187458db3433bb7d01c016aca3dc5569e06", "url": "https://github.com/palantir/atlasdb/commit/31b0b187458db3433bb7d01c016aca3dc5569e06", "message": "Fix Incomparable", "committedDate": "2020-10-19T18:39:46Z", "type": "commit"}, {"oid": "3aea09fab4afe88ba2b6da8c1570fcab7a1d7492", "url": "https://github.com/palantir/atlasdb/commit/3aea09fab4afe88ba2b6da8c1570fcab7a1d7492", "message": "Fix CollectionStreamForEach", "committedDate": "2020-10-19T18:44:05Z", "type": "commit"}, {"oid": "4e0c10881fdc80b67f71c7c67d61d967a84ac0a0", "url": "https://github.com/palantir/atlasdb/commit/4e0c10881fdc80b67f71c7c67d61d967a84ac0a0", "message": "Fix StreamOfEmpty", "committedDate": "2020-10-19T18:47:30Z", "type": "commit"}, {"oid": "02c709a3ff6ea19af020a5297f0fe5b4349aa288", "url": "https://github.com/palantir/atlasdb/commit/02c709a3ff6ea19af020a5297f0fe5b4349aa288", "message": "More LambdaMethodReference", "committedDate": "2020-10-19T19:08:34Z", "type": "commit"}, {"oid": "17b5119b311fd412ec51154e24ecbd355424ab0b", "url": "https://github.com/palantir/atlasdb/commit/17b5119b311fd412ec51154e24ecbd355424ab0b", "message": "More BadImport", "committedDate": "2020-10-19T19:17:58Z", "type": "commit"}, {"oid": "fd1674220f96a64ace31b8b1ce7f44acbbadf74f", "url": "https://github.com/palantir/atlasdb/commit/fd1674220f96a64ace31b8b1ce7f44acbbadf74f", "message": "More ClassCanBeStatic", "committedDate": "2020-10-19T19:20:45Z", "type": "commit"}, {"oid": "970fa64d52e471c0aea89ca298cbf858693e8ced", "url": "https://github.com/palantir/atlasdb/commit/970fa64d52e471c0aea89ca298cbf858693e8ced", "message": "Suppress PreferStaticLoggers in ProfilingTimelockServiceTest", "committedDate": "2020-10-19T19:42:57Z", "type": "commit"}, {"oid": "ddd28e7faa7f228dbfcdf8ca4ded986bb7cd2d61", "url": "https://github.com/palantir/atlasdb/commit/ddd28e7faa7f228dbfcdf8ca4ded986bb7cd2d61", "message": "Suppress static/final class on MaxTimestampsToGiveTimestampService\n\nRequired for mockito spies", "committedDate": "2020-10-19T19:43:13Z", "type": "commit"}, {"oid": "cfb95f7af720ab68aa0b08858d324983a6ea3376", "url": "https://github.com/palantir/atlasdb/commit/cfb95f7af720ab68aa0b08858d324983a6ea3376", "message": "Suppress PreferStaticLoggers in TimestampAllocationFailuresTest", "committedDate": "2020-10-19T19:47:19Z", "type": "commit"}, {"oid": "549137863c351e21b285ee455b657cf4f93361fb", "url": "https://github.com/palantir/atlasdb/commit/549137863c351e21b285ee455b657cf4f93361fb", "message": "format", "committedDate": "2020-10-19T20:06:59Z", "type": "commit"}]}