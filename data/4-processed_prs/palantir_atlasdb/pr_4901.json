{"pr_number": 4901, "pr_title": "[PDS-126257] Turning Tables: Checked Rejection Executor Services", "pr_createdAt": "2020-07-16T09:52:16Z", "pr_url": "https://github.com/palantir/atlasdb/pull/4901", "timeline": [{"oid": "5994303ba329c1489d95e2a7c09baa2ea6f9c506", "url": "https://github.com/palantir/atlasdb/commit/5994303ba329c1489d95e2a7c09baa2ea6f9c506", "message": "fixes part 1", "committedDate": "2020-07-16T09:13:09Z", "type": "commit"}, {"oid": "1ca19cdeee4d6283e5a52eebb6819de50b6bbd7c", "url": "https://github.com/palantir/atlasdb/commit/1ca19cdeee4d6283e5a52eebb6819de50b6bbd7c", "message": "adapters", "committedDate": "2020-07-16T09:13:09Z", "type": "commit"}, {"oid": "317905123516dd88049d823a972d8265e0ecd3c9", "url": "https://github.com/palantir/atlasdb/commit/317905123516dd88049d823a972d8265e0ecd3c9", "message": "Kill sharedexecutor part 1", "committedDate": "2020-07-16T09:13:09Z", "type": "commit"}, {"oid": "684910e00a32b46e3f09af6427ae549e86b38a72", "url": "https://github.com/palantir/atlasdb/commit/684910e00a32b46e3f09af6427ae549e86b38a72", "message": "Out damned SharedExecutor", "committedDate": "2020-07-16T09:13:09Z", "type": "commit"}, {"oid": "ee50d8a3f100d7835492e45bfdfe8cf1ce098c10", "url": "https://github.com/palantir/atlasdb/commit/ee50d8a3f100d7835492e45bfdfe8cf1ce098c10", "message": "Burn things all down", "committedDate": "2020-07-16T09:13:10Z", "type": "commit"}, {"oid": "fa4e37bf41238df56d8252c2bf5aaacfbda35b9b", "url": "https://github.com/palantir/atlasdb/commit/fa4e37bf41238df56d8252c2bf5aaacfbda35b9b", "message": "more things", "committedDate": "2020-07-16T09:13:10Z", "type": "commit"}, {"oid": "bc7f12a86e4f83fab61b2530950ebd11b19bb068", "url": "https://github.com/palantir/atlasdb/commit/bc7f12a86e4f83fab61b2530950ebd11b19bb068", "message": "Hard block some tasks", "committedDate": "2020-07-16T09:13:10Z", "type": "commit"}, {"oid": "50031825758b34df0c9bfe5bf3ea06eb8861d4d0", "url": "https://github.com/palantir/atlasdb/commit/50031825758b34df0c9bfe5bf3ea06eb8861d4d0", "message": "Undo hyper-aggressive stress test", "committedDate": "2020-07-16T09:13:10Z", "type": "commit"}, {"oid": "5dae79d136c61b12e86fb32173337c1043d5b26b", "url": "https://github.com/palantir/atlasdb/commit/5dae79d136c61b12e86fb32173337c1043d5b26b", "message": "fixup", "committedDate": "2020-07-16T09:13:10Z", "type": "commit"}, {"oid": "8f4675e6c10ab2098198c1c69ea2d654b3d92441", "url": "https://github.com/palantir/atlasdb/commit/8f4675e6c10ab2098198c1c69ea2d654b3d92441", "message": "Increase threshold to 384", "committedDate": "2020-07-16T09:13:10Z", "type": "commit"}, {"oid": "775e9e2564aa7c4efa80c7bd55257439255d7c34", "url": "https://github.com/palantir/atlasdb/commit/775e9e2564aa7c4efa80c7bd55257439255d7c34", "message": "Add generated changelog entries", "committedDate": "2020-07-16T09:13:10Z", "type": "commit"}, {"oid": "aa0d43bf2becf66d0a44e35620a5220f13341db4", "url": "https://github.com/palantir/atlasdb/commit/aa0d43bf2becf66d0a44e35620a5220f13341db4", "message": "Fix bug with leader pinger", "committedDate": "2020-07-16T09:13:10Z", "type": "commit"}, {"oid": "eeead8c4960cc3529b389ba4450876766d5133f8", "url": "https://github.com/palantir/atlasdb/commit/eeead8c4960cc3529b389ba4450876766d5133f8", "message": "Introduce checked ones", "committedDate": "2020-07-16T09:41:07Z", "type": "commit"}, {"oid": "509b1f6983ec7ff8c0d548cbe412e5d63c0d3400", "url": "https://github.com/palantir/atlasdb/commit/509b1f6983ec7ff8c0d548cbe412e5d63c0d3400", "message": "rewiring", "committedDate": "2020-07-16T09:41:07Z", "type": "commit"}, {"oid": "89fb87243b69160fd1e9a7b541c79e589f9a65fc", "url": "https://github.com/palantir/atlasdb/commit/89fb87243b69160fd1e9a7b541c79e589f9a65fc", "message": "Test", "committedDate": "2020-07-16T09:41:07Z", "type": "commit"}, {"oid": "c593b2c3f7a583401a8fbcdc251905ee893300fc", "url": "https://github.com/palantir/atlasdb/commit/c593b2c3f7a583401a8fbcdc251905ee893300fc", "message": "docs", "committedDate": "2020-07-16T09:52:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc0MDc2MA==", "url": "https://github.com/palantir/atlasdb/pull/4901#discussion_r455740760", "bodyText": "\ud83d\udc4d", "author": "sudiksha27", "createdAt": "2020-07-16T12:14:43Z", "path": "timelock-agent/src/main/java/com/palantir/atlasdb/timelock/paxos/TimeLockPaxosExecutors.java", "diffHunk": "@@ -39,15 +40,17 @@ private TimeLockPaxosExecutors() {\n      *\n      * It is assumed that tasks run on the local node will return quickly (hence the use of the direct executor).\n      */\n-    static <T> Map<T, ExecutorService> createBoundedExecutors(\n-            MetricRegistry metricRegistry, LocalAndRemotes<T> localAndRemotes, String useCase) {\n+    static <T> Map<T, CheckedRejectionExecutorService> createBoundedExecutors(\n+            LocalAndRemotes<T> localAndRemotes, String useCase) {\n         int numRemotes = localAndRemotes.remotes().size();", "originalCommit": "c593b2c3f7a583401a8fbcdc251905ee893300fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc0MjAwMA==", "url": "https://github.com/palantir/atlasdb/pull/4901#discussion_r455742000", "bodyText": "nit: there are unused imports in some other places as well where ExecutorService is replaced by CheckedRejectionExecutorService", "author": "sudiksha27", "createdAt": "2020-07-16T12:17:00Z", "path": "timelock-impl/src/main/java/com/palantir/atlasdb/timelock/paxos/AutobatchingPaxosAcceptorNetworkClientFactory.java", "diffHunk": "@@ -28,6 +28,7 @@\n import com.google.common.util.concurrent.ListenableFuture;", "originalCommit": "c593b2c3f7a583401a8fbcdc251905ee893300fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc1NTIyNw==", "url": "https://github.com/palantir/atlasdb/pull/4901#discussion_r455755227", "bodyText": "Where is this used?", "author": "sudiksha27", "createdAt": "2020-07-16T12:41:01Z", "path": "timelock-impl/src/main/java/com/palantir/atlasdb/timelock/paxos/PaxosQuorumCheckingCoalescingFunction.java", "diffHunk": "@@ -111,7 +112,7 @@ private PaxosQuorumCheckingCoalescingFunction(\n     public static <REQ, RESP extends PaxosResponse, SERVICE, F extends CoalescingRequestFunction<REQ, RESP>>\n     PaxosQuorumCheckingCoalescingFunction<REQ, RESP, F> wrapWithRemotes(\n             List<SERVICE> services,\n-            Map<SERVICE, ExecutorService> executors,\n+            Map<SERVICE, CheckedRejectionExecutorService> executors,\n             int quorumSize,\n             Function<SERVICE, F> functionFactory) {\n         List<FunctionAndExecutor<F>> functionsAndExecutors = KeyedStream.of(services)", "originalCommit": "c593b2c3f7a583401a8fbcdc251905ee893300fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTg3NDA1MA==", "url": "https://github.com/palantir/atlasdb/pull/4901#discussion_r455874050", "bodyText": "Ah, I guess it's not. Well spotted. I'll remove this.", "author": "jeremyk-91", "createdAt": "2020-07-16T15:27:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc1NTIyNw=="}], "type": "inlineReview"}, {"oid": "4c464bde70b68b29fc480f3987cb2d84efee2588", "url": "https://github.com/palantir/atlasdb/commit/4c464bde70b68b29fc480f3987cb2d84efee2588", "message": "Baseline", "committedDate": "2020-07-16T15:35:25Z", "type": "commit"}, {"oid": "239cb7d188b0f7106f00d3d7eca63f6730b8194c", "url": "https://github.com/palantir/atlasdb/commit/239cb7d188b0f7106f00d3d7eca63f6730b8194c", "message": "Fix broken test", "committedDate": "2020-07-27T20:40:31Z", "type": "commit"}, {"oid": "a1a3d226fe611bd15f9c9e465bf8aca7694f19f3", "url": "https://github.com/palantir/atlasdb/commit/a1a3d226fe611bd15f9c9e465bf8aca7694f19f3", "message": "Merge branch 'develop' into jkong/checked-mc", "committedDate": "2020-07-27T20:51:27Z", "type": "commit"}, {"oid": "df2b39f6ecc07a09503c1181d7ed6cfeed931756", "url": "https://github.com/palantir/atlasdb/commit/df2b39f6ecc07a09503c1181d7ed6cfeed931756", "message": "fix tests", "committedDate": "2020-07-27T20:55:55Z", "type": "commit"}, {"oid": "1f52c19dfdf43f9ef9e671de5cef74fec0429054", "url": "https://github.com/palantir/atlasdb/commit/1f52c19dfdf43f9ef9e671de5cef74fec0429054", "message": "Checkstyle", "committedDate": "2020-07-28T09:57:26Z", "type": "commit"}, {"oid": "3619a051d4683e359d9b3efe64741dbd161fc412", "url": "https://github.com/palantir/atlasdb/commit/3619a051d4683e359d9b3efe64741dbd161fc412", "message": "Optimize Imports", "committedDate": "2020-07-28T17:01:05Z", "type": "commit"}]}