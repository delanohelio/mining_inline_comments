{"pr_number": 8334, "pr_title": "Grab all the rolls for AA casualty auto selection", "pr_createdAt": "2020-12-02T00:22:13Z", "pr_url": "https://github.com/triplea-game/triplea/pull/8334", "timeline": [{"oid": "da2a5102c15b7f5e6559982740d08041949127e1", "url": "https://github.com/triplea-game/triplea/commit/da2a5102c15b7f5e6559982740d08041949127e1", "message": "Grab all the rolls for AA casualty auto selection", "committedDate": "2020-12-02T00:20:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg0MzgwNg==", "url": "https://github.com/triplea-game/triplea/pull/8334#discussion_r533843806", "bodyText": "@trevan can you provide some more background and context to what this change is for and does? It looks valid, just not clear off the bat, kinda seems like a bug fix. Just curious what the background is.", "author": "DanVanAtta", "createdAt": "2020-12-02T01:55:26Z", "path": "game-core/src/main/java/games/strategy/triplea/delegate/battle/casualty/AaCasualtySelector.java", "diffHunk": "@@ -289,7 +289,7 @@ private static CasualtyDetails calculateAaCasualties(\n       // there is a roll for every target but not enough hits to kill all of the targets\n       // so no need to get a random set of units since all units will either have a hit\n       // or miss roll\n-      final List<Die> rolls = dice.getRolls(unitPowerAndRollsMap.getBestStrength());\n+      final List<Die> rolls = dice.getRolls();", "originalCommit": "da2a5102c15b7f5e6559982740d08041949127e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2NjQ0OA==", "url": "https://github.com/triplea-game/triplea/pull/8334#discussion_r533866448", "bodyText": "It is a change I forgot to make when I combined the code.  Previously, when the code went in the individual roll method, it would check that all of the dice strength was the same.  If it wasn't the same, it would go to the random roll method.  If it was, it would then call getRolls(unitPowerAndRollsMap.getBestStrength()) which would return all of the rolls since it had already checked that the dice strength was the same.\nWhen I combined them, I removed that check of equal strengths since it doesn't matter but I forgot to remove this getBestStrength piece.  So now, if the units have different dice, it will not get all of the rolls.", "author": "trevan", "createdAt": "2020-12-02T03:08:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg0MzgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg3OTc2Mg==", "url": "https://github.com/triplea-game/triplea/pull/8334#discussion_r533879762", "bodyText": "Cool - thanks for the context \ud83d\udc4d", "author": "DanVanAtta", "createdAt": "2020-12-02T03:54:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg0MzgwNg=="}], "type": "inlineReview"}]}