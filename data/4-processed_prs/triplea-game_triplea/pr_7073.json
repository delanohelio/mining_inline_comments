{"pr_number": 7073, "pr_title": "Make warnings non-reportable", "pr_createdAt": "2020-07-08T04:05:08Z", "pr_url": "https://github.com/triplea-game/triplea/pull/7073", "timeline": [{"oid": "eaf871d8a52996b80423ef6570994ebc5492a131", "url": "https://github.com/triplea-game/triplea/commit/eaf871d8a52996b80423ef6570994ebc5492a131", "message": "Make warnings non-reportable\n\nAdd a check for logging level in our global logging handler. If the log\nlevel is warning then disable the 'upload button'. Same, if the level\nis a warning also add a generic statement giving the user a link to\nreport the problem.\n\nThis update allows us to notify users of general errors that have happened\nthat are outside of TripleA's control and are something that we can\ntell the user how to fix in the warning message. This way we can\nuse a 'warning' logging to report this to the user without\nconstructing a full swing dialog with the same text.\n\nEvents logged at a 'severe' level will continue to have an 'upload' button\nenabled and there is no change to the 'severe' logging behavior.", "committedDate": "2020-07-08T04:18:05Z", "type": "commit"}, {"oid": "eaf871d8a52996b80423ef6570994ebc5492a131", "url": "https://github.com/triplea-game/triplea/commit/eaf871d8a52996b80423ef6570994ebc5492a131", "message": "Make warnings non-reportable\n\nAdd a check for logging level in our global logging handler. If the log\nlevel is warning then disable the 'upload button'. Same, if the level\nis a warning also add a generic statement giving the user a link to\nreport the problem.\n\nThis update allows us to notify users of general errors that have happened\nthat are outside of TripleA's control and are something that we can\ntell the user how to fix in the warning message. This way we can\nuse a 'warning' logging to report this to the user without\nconstructing a full swing dialog with the same text.\n\nEvents logged at a 'severe' level will continue to have an 'upload' button\nenabled and there is no change to the 'severe' logging behavior.", "committedDate": "2020-07-08T04:18:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQzMzY2MQ==", "url": "https://github.com/triplea-game/triplea/pull/7073#discussion_r451433661", "bodyText": "I actually think this problem is too complex to represent it in a single severity level.\nLet's say a map maker is trying to build a new map and wants to test it.\nTurns out they got the format wrong and therefore the engine is unable to parse the map. I would still consider this a severe error, not a warning because it is an exception that prevents an entire action from happening, but it shouldn't be reportable.\nHowever let's say $User has their maps saved as a folder somewhere and the write and read permissions are messed up. In this case the error is still severe and it's a clear case for user help, but the system can't communicate that at all.\nI must admit that I don't have a better idea than this, it's probably the best short-term approach we can go with, but we might want to change the system to do some heuristics if the error is user related (local IOException, FileNotFound etc.) or it has a real code implication (NullPointerException etc.) in the long run.\nOf course there are edgecases as well: Is a StackOverflowError a regression or a low-memory user issue?\nBut I think it's better than this approach", "author": "RoiEXLab", "createdAt": "2020-07-08T10:12:08Z", "path": "game-core/src/main/java/org/triplea/debug/ErrorMessage.java", "diffHunk": "@@ -130,7 +132,12 @@ private void setUploadRecord(final LogRecord logRecord) {\n   }\n \n   private void activateUploadErrorReportButton(final URI lobbyUri, final LogRecord logRecord) {\n-    INSTANCE.uploadButton.setVisible(true);\n+    // Set upload button to be visible only if the logging is greater than a 'warning'.\n+    // Warning logging should tell a user how to correct the error and it should be something\n+    // that is 'normal' (but maybe not happy, like no internet) and something they can fix\n+    // (or perhaps something that we simply can never fix). Hence, for warning we want to inform\n+    // the user that the problem happened, how to fix it, and let them create a bug report manually.\n+    INSTANCE.uploadButton.setVisible(logRecord.getLevel().intValue() > Level.WARNING.intValue());", "originalCommit": "eaf871d8a52996b80423ef6570994ebc5492a131", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU3NTM2Ng==", "url": "https://github.com/triplea-game/triplea/pull/7073#discussion_r452575366", "bodyText": "@RoiEXLab see my response to the PR, but secondarily I'd suggest warning is still okay. The game did not crash. IMO Severe is the game is left in a dead state, warning is basically an action is not going to be available. INFO probably is not really worth using (pointless). I really can't emphasize enough how the logging perspective for a thick client is different compared to say a web server.", "author": "DanVanAtta", "createdAt": "2020-07-10T01:30:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQzMzY2MQ=="}], "type": "inlineReview"}]}