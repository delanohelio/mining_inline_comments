{"pr_number": 6074, "pr_title": "Update infrastructure to be able to deloy 1.9 bots", "pr_createdAt": "2020-03-22T04:23:29Z", "pr_url": "https://github.com/triplea-game/triplea/pull/6074", "timeline": [{"oid": "7f8ec3ae9cbd1485d761269f98e1115d83e2855a", "url": "https://github.com/triplea-game/triplea/commit/7f8ec3ae9cbd1485d761269f98e1115d83e2855a", "message": "Update infrastructure to be able to deloy 1.9 bots\n\n- Update production inventory to reflect servers that are fully managed by ansible\n  deployments. We can deploy admin keys as a one-off by hand to other servers\n  as needed. Otherwise now we will have bot updates take effect after merges.\n- Update production overrides to reflect 1.9 servers. When creating a 2.0 production,\n  we will probably want to create as second production inventory file to keep\n  the server configurations different.\n- Parameterize the bot args and define one set of args for 1.9 in production.yml\n  group_vars, an override that applies to servers only in production.yml. Otherwise\n  the default vars are appropriate for 2.0 servers.\n- Add an important 'using_latest' parameter to allow bot servers to either\n  use a latest 'jar' file build or when 'using_latest' is false to download\n  a target jar file version. This parameter allows for deployments of arbitrary\n  versions. To support this, we override and fix the version value in production.\n- Use version 1.9.0.0.12226 for production bots, the latest stable jar build (13066)\n  has an inadvertent AWT (headed) dependency and fails on startup.", "committedDate": "2020-03-22T03:52:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE3MDY3Mg==", "url": "https://github.com/triplea-game/triplea/pull/6074#discussion_r396170672", "bodyText": "If this entry is removed, is there still a need to write [letsEncrypt:children] here?", "author": "RoiEXLab", "createdAt": "2020-03-23T00:51:49Z", "path": "infrastructure/ansible/inventory/production", "diffHunk": "@@ -23,5 +22,4 @@ forums\n production\n \n [letsEncrypt:children]\n-dropwizardHosts", "originalCommit": "7f8ec3ae9cbd1485d761269f98e1115d83e2855a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE3MDgyMA==", "url": "https://github.com/triplea-game/triplea/pull/6074#discussion_r396170820", "bodyText": "Are postgresHosts and dropwizardHosts still required?", "author": "RoiEXLab", "createdAt": "2020-03-23T00:52:57Z", "path": "infrastructure/ansible/inventory/production", "diffHunk": "@@ -1,14 +1,13 @@\n [postgresHosts]\n-lobby.triplea-game.org\n \n [dropwizardHosts]\n-lobby.triplea-game.org", "originalCommit": "7f8ec3ae9cbd1485d761269f98e1115d83e2855a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE4MDE2OQ==", "url": "https://github.com/triplea-game/triplea/pull/6074#discussion_r396180169", "bodyText": "Not required, though arguably a best practice. The idea is the inventory files should all be 'square' and have the exact same hostgroups. In the end the only thing different between environments will be inventory files and specific variable values. For example, you'll have all the same hostgroups, just different servers, an all the same variables, just perhaps different encrypted values if the passwords are different.", "author": "DanVanAtta", "createdAt": "2020-03-23T01:54:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE3MDgyMA=="}], "type": "inlineReview"}]}