{"pr_number": 5953, "pr_title": "Forum poster view model", "pr_createdAt": "2020-02-18T00:22:11Z", "pr_url": "https://github.com/triplea-game/triplea/pull/5953", "timeline": [{"oid": "8794b468304daf0c1ce836c002e958fca3119373", "url": "https://github.com/triplea-game/triplea/commit/8794b468304daf0c1ce836c002e958fca3119373", "message": "Add ViewModelListener interface to set up view model pattern", "committedDate": "2020-02-17T20:53:44Z", "type": "commit"}, {"oid": "a8c610d7aaa056605e521bc91f45de5d5de9d9bc", "url": "https://github.com/triplea-game/triplea/commit/a8c610d7aaa056605e521bc91f45de5d5de9d9bc", "message": "Move PBEMSetupPanel to package 'pbem'", "committedDate": "2020-02-17T20:58:01Z", "type": "commit"}, {"oid": "aebca84ed1a7450082e196bc2395a072ce6e3eda", "url": "https://github.com/triplea-game/triplea/commit/aebca84ed1a7450082e196bc2395a072ce6e3eda", "message": "Change GameProperties property loading to be able to implicitly cast non-string values to Strings.", "committedDate": "2020-02-17T20:58:04Z", "type": "commit"}, {"oid": "e9638572249946be69e189011bbf6e682224dbb2", "url": "https://github.com/triplea-game/triplea/commit/e9638572249946be69e189011bbf6e682224dbb2", "message": "Mark GameSelectorModel gameData as nullable, helps identify potential NPE locations", "committedDate": "2020-02-17T20:58:04Z", "type": "commit"}, {"oid": "9fdb7ac8e966fb8089368bd53d9fb4d680be4d5e", "url": "https://github.com/triplea-game/triplea/commit/9fdb7ac8e966fb8089368bd53d9fb4d680be4d5e", "message": "Apply view-model pattern to PBEMEditor", "committedDate": "2020-02-17T21:01:15Z", "type": "commit"}, {"oid": "a76caab7eb158bf0ec46d62b77fb78ce98ec1406", "url": "https://github.com/triplea-game/triplea/commit/a76caab7eb158bf0ec46d62b77fb78ce98ec1406", "message": "Move PBEM 'editors' to PBEM package", "committedDate": "2020-02-17T21:02:13Z", "type": "commit"}, {"oid": "8ffcae9313b5a4dec666ef2c5aba3a198967a5b5", "url": "https://github.com/triplea-game/triplea/commit/8ffcae9313b5a4dec666ef2c5aba3a198967a5b5", "message": "Move \"getDefaultLabelColor\" logic to \"SwingComponents\"", "committedDate": "2020-02-17T21:23:03Z", "type": "commit"}, {"oid": "29ce3fa5c884705a250e8ad67b7f4864f5fab73b", "url": "https://github.com/triplea-game/triplea/commit/29ce3fa5c884705a250e8ad67b7f4864f5fab73b", "message": "Remove inheritance of EditorPanel, instead children inherit JPanel directly", "committedDate": "2020-02-17T21:26:36Z", "type": "commit"}, {"oid": "63c46e1a9c4455103ff7ea0df4da192ce463b0e6", "url": "https://github.com/triplea-game/triplea/commit/63c46e1a9c4455103ff7ea0df4da192ce463b0e6", "message": "Break up and test ForumPosterViewModel", "committedDate": "2020-02-17T23:21:19Z", "type": "commit"}, {"oid": "9cca55cb7213a99241a6eb2fbf2f0206e84acadf", "url": "https://github.com/triplea-game/triplea/commit/9cca55cb7213a99241a6eb2fbf2f0206e84acadf", "message": "Last fixes to complete view model for PBF editor, be sure to invoke view callback", "committedDate": "2020-02-17T23:45:34Z", "type": "commit"}, {"oid": "b50c57a91464358ecc5a1b19252119765dd74e55", "url": "https://github.com/triplea-game/triplea/commit/b50c57a91464358ecc5a1b19252119765dd74e55", "message": "Simplify validation now that forum selection is always set.", "committedDate": "2020-02-18T00:08:39Z", "type": "commit"}, {"oid": "a14584d118b41283f4ff419459b11b9356a395ff", "url": "https://github.com/triplea-game/triplea/commit/a14584d118b41283f4ff419459b11b9356a395ff", "message": "Fix to ensure initial loading is consistent", "committedDate": "2020-02-18T00:16:13Z", "type": "commit"}, {"oid": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "url": "https://github.com/triplea-game/triplea/commit/c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "message": "PBF Attach game save should default to true", "committedDate": "2020-02-18T00:18:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTI4NQ==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405285", "bodyText": "Similar blocks of code found in 4 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-18T00:23:46Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTI4OA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405288", "bodyText": "Similar blocks of code found in 4 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-18T00:23:46Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(\n+        forums,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    row++;\n+    add(\n+        topicIdLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    DocumentListenerBuilder.attachDocumentListener(\n+        topicIdField, () -> viewModel.setTopicId(topicIdField.getText().trim()));\n+    add(", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTI5MA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405290", "bodyText": "Similar blocks of code found in 3 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-18T00:23:46Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(\n+        forums,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    row++;\n+    add(\n+        topicIdLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    DocumentListenerBuilder.attachDocumentListener(\n+        topicIdField, () -> viewModel.setTopicId(topicIdField.getText().trim()));\n+    add(\n+        topicIdField,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    viewPosts.addActionListener(e -> viewModel.viewForumButtonClicked());\n+    add(", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTI5MQ==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405291", "bodyText": "Identical blocks of code found in 3 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-18T00:23:46Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(\n+        forums,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    row++;\n+    add(", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTI5Mw==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405293", "bodyText": "Identical blocks of code found in 3 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-18T00:23:46Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTI5NQ==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405295", "bodyText": "Similar blocks of code found in 3 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-18T00:23:47Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(\n+        forums,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    row++;\n+    add(\n+        topicIdLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    DocumentListenerBuilder.attachDocumentListener(\n+        topicIdField, () -> viewModel.setTopicId(topicIdField.getText().trim()));\n+    add(\n+        topicIdField,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    viewPosts.addActionListener(e -> viewModel.viewForumButtonClicked());\n+    add(\n+        viewPosts,\n+        new GridBagConstraints(\n+            2,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 2, bottomSpace, 0),\n+            0,\n+            0));\n+    row++;\n+    add(\n+        new JLabel(\"\"),\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+    row++;\n+\n+    attachSaveGameToSummary.addChangeListener(\n+        e -> viewModel.setAttachSaveGameToSummary(attachSaveGameToSummary.isSelected()));\n+    add(", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTI5Nw==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405297", "bodyText": "Similar blocks of code found in 3 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-18T00:23:47Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(\n+        forums,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    row++;\n+    add(\n+        topicIdLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    DocumentListenerBuilder.attachDocumentListener(\n+        topicIdField, () -> viewModel.setTopicId(topicIdField.getText().trim()));\n+    add(\n+        topicIdField,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    viewPosts.addActionListener(e -> viewModel.viewForumButtonClicked());\n+    add(\n+        viewPosts,\n+        new GridBagConstraints(\n+            2,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 2, bottomSpace, 0),\n+            0,\n+            0));\n+    row++;\n+    add(\n+        new JLabel(\"\"),\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+    row++;\n+\n+    attachSaveGameToSummary.addChangeListener(\n+        e -> viewModel.setAttachSaveGameToSummary(attachSaveGameToSummary.isSelected()));\n+    add(\n+        attachSaveGameToSummary,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            2,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, 0, 0),\n+            0,\n+            0));\n+\n+    testForum.addActionListener(e -> viewModel.testPostButtonClicked());\n+    add(", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTI5OA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405298", "bodyText": "Similar blocks of code found in 3 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-18T00:23:47Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(\n+        forums,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    row++;\n+    add(\n+        topicIdLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    DocumentListenerBuilder.attachDocumentListener(\n+        topicIdField, () -> viewModel.setTopicId(topicIdField.getText().trim()));\n+    add(\n+        topicIdField,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    viewPosts.addActionListener(e -> viewModel.viewForumButtonClicked());\n+    add(\n+        viewPosts,\n+        new GridBagConstraints(\n+            2,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 2, bottomSpace, 0),\n+            0,\n+            0));\n+    row++;\n+    add(\n+        new JLabel(\"\"),\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+    row++;\n+\n+    attachSaveGameToSummary.addChangeListener(\n+        e -> viewModel.setAttachSaveGameToSummary(attachSaveGameToSummary.isSelected()));\n+    add(\n+        attachSaveGameToSummary,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            2,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, 0, 0),\n+            0,\n+            0));\n+\n+    testForum.addActionListener(e -> viewModel.testPostButtonClicked());\n+    add(\n+        testForum,\n+        new GridBagConstraints(\n+            2,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, 0, 0),\n+            0,\n+            0));\n+    row++;\n+    alsoPostAfterCombatMove.addActionListener(\n+        e -> viewModel.setAlsoPostAfterCombatMove(alsoPostAfterCombatMove.isSelected()));\n+    add(", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTMwMA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405300", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-02-18T00:23:47Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(\n+        forums,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    row++;\n+    add(\n+        topicIdLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    DocumentListenerBuilder.attachDocumentListener(\n+        topicIdField, () -> viewModel.setTopicId(topicIdField.getText().trim()));\n+    add(\n+        topicIdField,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    viewPosts.addActionListener(e -> viewModel.viewForumButtonClicked());\n+    add(\n+        viewPosts,\n+        new GridBagConstraints(\n+            2,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 2, bottomSpace, 0),\n+            0,\n+            0));\n+    row++;\n+    add(", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "826cb8c38a221fad453acc2bc072303a0fbf31b0", "url": "https://github.com/triplea-game/triplea/commit/826cb8c38a221fad453acc2bc072303a0fbf31b0", "message": "Remove newly added SwingAction helper method (not a good one to have)", "committedDate": "2020-02-18T00:37:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTE5Nw==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405197", "bodyText": "This adds flexibility if we want to load an integer property as a string, otherwise we get a cast exception", "author": "DanVanAtta", "createdAt": "2020-02-18T00:23:12Z", "path": "game-core/src/main/java/games/strategy/engine/data/properties/GameProperties.java", "diffHunk": "@@ -99,7 +99,7 @@ public String get(final String key, final String defaultValue) {\n     if (value == null) {\n       return defaultValue;\n     }\n-    return (String) value;\n+    return String.valueOf(value);", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTM0OA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405348", "bodyText": "GameData may be nulllable, marking it allows us to get IDE warnings for potential NPE", "author": "DanVanAtta", "createdAt": "2020-02-18T00:24:12Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/mc/GameSelectorModel.java", "diffHunk": "@@ -28,7 +28,7 @@\n  */\n @Log\n public class GameSelectorModel extends Observable {\n-  @Getter private GameData gameData = null;\n+  @Nullable @Getter private GameData gameData = null;", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTM4Mw==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405383", "bodyText": "Raising scope now that PBEMSetupPanel is in a different package", "author": "DanVanAtta", "createdAt": "2020-02-18T00:24:25Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/SetupPanel.java", "diffHunk": "@@ -33,7 +33,7 @@ public void setPanelChangedListener(final Consumer<SetupPanel> listener) {\n     this.listener = listener;\n   }\n \n-  void fireListener() {\n+  public void fireListener() {", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTQ2OQ==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405469", "bodyText": "Layout is moved to children classes, 'setLabelValid' is moved to SwingComponents. The two changes eliminates the need for this base-class.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:25:03Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/editors/EditorPanel.java", "diffHunk": "@@ -1,34 +0,0 @@\n-package games.strategy.engine.framework.startup.ui.editors;\n-\n-import java.awt.Color;\n-import java.awt.GridBagLayout;\n-import javax.swing.JLabel;\n-import javax.swing.JPanel;\n-\n-/**\n- * Helper Base class for Editors, that provides a basic collection of useful operations.\n- *\n- * <p>This class used to have a legitimate reason to be a superclass of editors, but making all\n- * methods in this class static, and converting it to a utility class is probably a good thing to\n- * do.\n- */\n-abstract class EditorPanel extends JPanel {\n-  private static final long serialVersionUID = 8156959717037201321L;\n-  private final Color labelColor = new JLabel().getForeground();\n-\n-  EditorPanel() {\n-    super(new GridBagLayout());", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTYyNA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405624", "bodyText": "Most of the code in this class is moved but not modified. There are enough changes that git thinks it is a new file post-move, see individual commits for better diff'ing of updates.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:26:01Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/editors/ForumPosterEditor.java", "diffHunk": "@@ -1,296 +0,0 @@\n-package games.strategy.engine.framework.startup.ui.editors;\n-\n-import com.google.common.annotations.VisibleForTesting;\n-import com.google.common.base.Preconditions;\n-import games.strategy.engine.ClientContext;\n-import games.strategy.engine.data.properties.GameProperties;\n-import games.strategy.engine.framework.GameRunner;\n-import games.strategy.engine.posted.game.pbf.IForumPoster;\n-import games.strategy.engine.posted.game.pbf.NodeBbForumPoster;\n-import java.awt.Graphics;\n-import java.awt.GridBagConstraints;\n-import java.awt.Insets;\n-import java.awt.image.BufferedImage;\n-import java.io.File;\n-import java.io.IOException;\n-import java.util.concurrent.CompletableFuture;\n-import java.util.concurrent.ExecutionException;\n-import java.util.logging.Level;\n-import javax.imageio.ImageIO;\n-import javax.swing.JButton;\n-import javax.swing.JCheckBox;\n-import javax.swing.JComboBox;\n-import javax.swing.JLabel;\n-import javax.swing.JOptionPane;\n-import javax.swing.JTextField;\n-import javax.swing.SwingUtilities;\n-import lombok.extern.java.Log;\n-import org.triplea.java.TimeManager;\n-import org.triplea.swing.DocumentListenerBuilder;\n-import org.triplea.swing.ProgressWindow;\n-\n-/** A class for selecting which Forum poster to use. */\n-@Log\n-public class ForumPosterEditor extends EditorPanel {", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTc4OQ==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405789", "bodyText": "Listener setup is inlined to constructor to update viewmodel based on component state, otherwise all other methods in this class are moved to 'viewModel' and/or broken up further.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:26:59Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/editors/ForumPosterEditor.java", "diffHunk": "@@ -1,296 +0,0 @@\n-package games.strategy.engine.framework.startup.ui.editors;\n-\n-import com.google.common.annotations.VisibleForTesting;\n-import com.google.common.base.Preconditions;\n-import games.strategy.engine.ClientContext;\n-import games.strategy.engine.data.properties.GameProperties;\n-import games.strategy.engine.framework.GameRunner;\n-import games.strategy.engine.posted.game.pbf.IForumPoster;\n-import games.strategy.engine.posted.game.pbf.NodeBbForumPoster;\n-import java.awt.Graphics;\n-import java.awt.GridBagConstraints;\n-import java.awt.Insets;\n-import java.awt.image.BufferedImage;\n-import java.io.File;\n-import java.io.IOException;\n-import java.util.concurrent.CompletableFuture;\n-import java.util.concurrent.ExecutionException;\n-import java.util.logging.Level;\n-import javax.imageio.ImageIO;\n-import javax.swing.JButton;\n-import javax.swing.JCheckBox;\n-import javax.swing.JComboBox;\n-import javax.swing.JLabel;\n-import javax.swing.JOptionPane;\n-import javax.swing.JTextField;\n-import javax.swing.SwingUtilities;\n-import lombok.extern.java.Log;\n-import org.triplea.java.TimeManager;\n-import org.triplea.swing.DocumentListenerBuilder;\n-import org.triplea.swing.ProgressWindow;\n-\n-/** A class for selecting which Forum poster to use. */\n-@Log\n-public class ForumPosterEditor extends EditorPanel {\n-  private static final long serialVersionUID = -6069315084412575053L;\n-  private final JButton viewPosts = new JButton(\"View Forum\");\n-  private final JButton testForum = new JButton(\"Test Post\");\n-  private final JTextField topicIdField = new JTextField();\n-  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n-  private final JLabel forumLabel = new JLabel(\"Forums:\");\n-  private final JCheckBox includeSaveGame = new JCheckBox(\"Attach save game to summary\");\n-  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n-  private final JComboBox<String> forums = new JComboBox<>();\n-  private final Runnable readyCallback;\n-\n-  public ForumPosterEditor(final Runnable readyCallback) {\n-    this.readyCallback = readyCallback;\n-    final int bottomSpace = 1;\n-    final int labelSpace = 2;\n-    int row = 0;\n-    NodeBbForumPoster.availablePosters().forEach(forums::addItem);\n-    add(\n-        forumLabel,\n-        new GridBagConstraints(\n-            0,\n-            row,\n-            1,\n-            1,\n-            0,\n-            0,\n-            GridBagConstraints.WEST,\n-            GridBagConstraints.NONE,\n-            new Insets(0, 0, bottomSpace, labelSpace),\n-            0,\n-            0));\n-    add(\n-        forums,\n-        new GridBagConstraints(\n-            1,\n-            row,\n-            1,\n-            1,\n-            1.0,\n-            0,\n-            GridBagConstraints.EAST,\n-            GridBagConstraints.HORIZONTAL,\n-            new Insets(0, 0, bottomSpace, 0),\n-            0,\n-            0));\n-    row++;\n-    add(\n-        topicIdLabel,\n-        new GridBagConstraints(\n-            0,\n-            row,\n-            1,\n-            1,\n-            0,\n-            0,\n-            GridBagConstraints.WEST,\n-            GridBagConstraints.NONE,\n-            new Insets(0, 0, bottomSpace, labelSpace),\n-            0,\n-            0));\n-    add(\n-        topicIdField,\n-        new GridBagConstraints(\n-            1,\n-            row,\n-            1,\n-            1,\n-            1.0,\n-            0,\n-            GridBagConstraints.EAST,\n-            GridBagConstraints.HORIZONTAL,\n-            new Insets(0, 0, bottomSpace, 0),\n-            0,\n-            0));\n-    add(\n-        viewPosts,\n-        new GridBagConstraints(\n-            2,\n-            row,\n-            1,\n-            1,\n-            0,\n-            0,\n-            GridBagConstraints.EAST,\n-            GridBagConstraints.NONE,\n-            new Insets(0, 2, bottomSpace, 0),\n-            0,\n-            0));\n-    row++;\n-    add(\n-        new JLabel(\"\"),\n-        new GridBagConstraints(\n-            0,\n-            row,\n-            1,\n-            1,\n-            0,\n-            0,\n-            GridBagConstraints.WEST,\n-            GridBagConstraints.NONE,\n-            new Insets(0, 0, bottomSpace, labelSpace),\n-            0,\n-            0));\n-    row++;\n-    add(\n-        includeSaveGame,\n-        new GridBagConstraints(\n-            0,\n-            row,\n-            2,\n-            1,\n-            0,\n-            0,\n-            GridBagConstraints.WEST,\n-            GridBagConstraints.NONE,\n-            new Insets(0, 0, 0, 0),\n-            0,\n-            0));\n-    add(\n-        testForum,\n-        new GridBagConstraints(\n-            2,\n-            row,\n-            1,\n-            1,\n-            0,\n-            0,\n-            GridBagConstraints.EAST,\n-            GridBagConstraints.NONE,\n-            new Insets(0, 0, 0, 0),\n-            0,\n-            0));\n-    row++;\n-    add(\n-        alsoPostAfterCombatMove,\n-        new GridBagConstraints(\n-            0,\n-            row,\n-            2,\n-            1,\n-            0,\n-            0,\n-            GridBagConstraints.WEST,\n-            GridBagConstraints.NONE,\n-            new Insets(0, 0, 0, 0),\n-            0,\n-            0));\n-    setupListeners();\n-  }\n-\n-  private void checkFieldsAndNotify() {\n-    areFieldsValid();\n-    readyCallback.run();\n-  }\n-\n-  /** Configures the listeners for the gui components. */\n-  private void setupListeners() {", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNTg2Mg==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380405862", "bodyText": "Mostly just an API update here, as highlightLabelIfNotValid no longer returns a value.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:27:27Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/DiceServerEditor.java", "diffHunk": "@@ -223,13 +225,12 @@ private void checkFieldsAndNotify() {\n \n   public boolean areFieldsValid() {\n     final boolean toValid =\n-        setLabelValid(\n-            !toAddress.getText().isEmpty() && PlayerEmailValidation.isValid(toAddress.getText()),\n-            toLabel);\n+        !toAddress.getText().isEmpty() && PlayerEmailValidation.isValid(toAddress.getText());\n+    SwingComponents.highlightLabelIfNotValid(toValid, toLabel);", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNjAxOA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380406018", "bodyText": "Most of the code in this class is original, note anywhere there is a call to viewModel, that will be new as well as the 'updateState' method from implements ViewModelListener<ForumPosterEditorViewModel>", "author": "DanVanAtta", "createdAt": "2020-02-18T00:28:18Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNjA3MQ==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380406071", "bodyText": "Notice that all other methods in this view class are removed, we just have a viewModelChanged method now.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:28:39Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(\n+        forums,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    row++;\n+    add(\n+        topicIdLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    DocumentListenerBuilder.attachDocumentListener(\n+        topicIdField, () -> viewModel.setTopicId(topicIdField.getText().trim()));\n+    add(\n+        topicIdField,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    viewPosts.addActionListener(e -> viewModel.viewForumButtonClicked());\n+    add(\n+        viewPosts,\n+        new GridBagConstraints(\n+            2,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 2, bottomSpace, 0),\n+            0,\n+            0));\n+    row++;\n+    add(\n+        new JLabel(\"\"),\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+    row++;\n+\n+    attachSaveGameToSummary.addChangeListener(\n+        e -> viewModel.setAttachSaveGameToSummary(attachSaveGameToSummary.isSelected()));\n+    add(\n+        attachSaveGameToSummary,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            2,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, 0, 0),\n+            0,\n+            0));\n+\n+    testForum.addActionListener(e -> viewModel.testPostButtonClicked());\n+    add(\n+        testForum,\n+        new GridBagConstraints(\n+            2,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, 0, 0),\n+            0,\n+            0));\n+    row++;\n+    alsoPostAfterCombatMove.addActionListener(\n+        e -> viewModel.setAlsoPostAfterCombatMove(alsoPostAfterCombatMove.isSelected()));\n+    add(\n+        alsoPostAfterCombatMove,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            2,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, 0, 0),\n+            0,\n+            0));\n+  }\n+\n+  @Override\n+  public void viewModelChanged(final ForumPosterEditorViewModel forumPosterEditorViewModel) {", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNjE5MQ==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380406191", "bodyText": "Important to note:\n\nInitial state is set by getting the view model value\nWe add action listeners to components to update view model to have the latest value set in the UI.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:29:18Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNjI1MA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380406250", "bodyText": "View actions, ie: button clicks, are now just simple calls to the view-model.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:29:43Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditor.java", "diffHunk": "@@ -0,0 +1,201 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import java.awt.GridBagConstraints;\n+import java.awt.GridBagLayout;\n+import java.awt.Insets;\n+import javax.swing.JButton;\n+import javax.swing.JCheckBox;\n+import javax.swing.JComboBox;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.JTextField;\n+import org.triplea.java.ViewModelListener;\n+import org.triplea.swing.DocumentListenerBuilder;\n+import org.triplea.swing.SwingComponents;\n+\n+/** A class for selecting which Forum poster to use. */\n+class ForumPosterEditor extends JPanel implements ViewModelListener<ForumPosterEditorViewModel> {\n+  private static final long serialVersionUID = -6069315084412575053L;\n+  private final JButton viewPosts = new JButton(\"View Forum\");\n+  private final JButton testForum = new JButton(\"Test Post\");\n+  private final JTextField topicIdField = new JTextField();\n+  private final JLabel topicIdLabel = new JLabel(\"Topic Id:\");\n+  private final JLabel forumLabel = new JLabel(\"Forums:\");\n+  private final JCheckBox attachSaveGameToSummary = new JCheckBox(\"Attach save game to summary\");\n+  private final JCheckBox alsoPostAfterCombatMove = new JCheckBox(\"Also Post After Combat Move\");\n+  private final JComboBox<String> forums = new JComboBox<>();\n+\n+  ForumPosterEditor(final ForumPosterEditorViewModel viewModel) {\n+    super(new GridBagLayout());\n+\n+    viewModel.setView(this);\n+\n+    final int bottomSpace = 1;\n+    final int labelSpace = 2;\n+    int row = 0;\n+\n+    add(\n+        forumLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    viewModel.getForumSelectionOptions().forEach(forums::addItem);\n+    forums.addActionListener(e -> viewModel.setForumSelection((String) forums.getSelectedItem()));\n+    forums.setSelectedItem(viewModel.getForumSelection());\n+    add(\n+        forums,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    row++;\n+    add(\n+        topicIdLabel,\n+        new GridBagConstraints(\n+            0,\n+            row,\n+            1,\n+            1,\n+            0,\n+            0,\n+            GridBagConstraints.WEST,\n+            GridBagConstraints.NONE,\n+            new Insets(0, 0, bottomSpace, labelSpace),\n+            0,\n+            0));\n+\n+    DocumentListenerBuilder.attachDocumentListener(\n+        topicIdField, () -> viewModel.setTopicId(topicIdField.getText().trim()));\n+    add(\n+        topicIdField,\n+        new GridBagConstraints(\n+            1,\n+            row,\n+            1,\n+            1,\n+            1.0,\n+            0,\n+            GridBagConstraints.EAST,\n+            GridBagConstraints.HORIZONTAL,\n+            new Insets(0, 0, bottomSpace, 0),\n+            0,\n+            0));\n+\n+    viewPosts.addActionListener(e -> viewModel.viewForumButtonClicked());", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNjYxNA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380406614", "bodyText": "The only real new logic in this class is to default the forum selection, otherwise all the logic here is extracted from the view class. Notice as well that the button clicks are not here either, those are more properly model methods and we delegate those actions to other components. In this way the view model is responsible for modeling view state, the logic behind view state updates, and for triggering model interactions and forwarding the needed data from view to the model (for example when doing a test post, we trigger the test post method call and we pass the forum selection and forum id).", "author": "DanVanAtta", "createdAt": "2020-02-18T00:31:53Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditorViewModel.java", "diffHunk": "@@ -0,0 +1,113 @@\n+package games.strategy.engine.framework.startup.ui.pbem;", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNjc5NQ==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380406795", "bodyText": "This class is just updated to insantiate a view model, pass that to the PBF view, and then instead of interacting with the PBF view for 'are all fields valid', we query the view model instead.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:32:45Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/PbemSetupPanel.java", "diffHunk": "@@ -44,6 +47,7 @@\n   private final GameSelectorModel gameSelectorModel;\n   private final DiceServerEditor diceServerEditor;\n   private final ForumPosterEditor forumPosterEditor;\n+  private final ForumPosterEditorViewModel forumPosterEditorViewModel;", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNjk4Ng==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380406986", "bodyText": "Instead of having the view (or view model) set game properties, which is mixing of domains, we instead get data from the view model and this class is now responsible for binding game properties to the properties we have read from UI. This way the UI model is not as tied to the model.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:33:48Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/PbemSetupPanel.java", "diffHunk": "@@ -184,11 +200,27 @@ public boolean canGameStart() {\n   @Override\n   public void postStartGame() {\n     final GameData data = gameSelectorModel.getGameData();\n+\n+    Preconditions.checkNotNull(\n+        data,\n+        \"Game Data must not be null when starting a game, \"\n+            + \"this error indicates a programming bug that allowed for the start game button to be \"\n+            + \"enabled without first valid game data being loaded. \");\n     if (diceServerEditor.areFieldsValid()) {\n       diceServerEditor.applyToGameProperties(data.getProperties());\n     }\n-    if (forumPosterEditor.areFieldsValid()) {\n-      forumPosterEditor.applyToGameProperties(data.getProperties());\n+    if (forumPosterEditorViewModel.areFieldsValid()) {\n+      final GameProperties properties = data.getProperties();", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNzEyOA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380407128", "bodyText": "The null assumption for getGameData() is a bit lax, this is an example of 'fail-fast' principle to ensure we have a good error message and secondly to document an assumption that the selector model game data should be set on game launch.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:34:38Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/PbemSetupPanel.java", "diffHunk": "@@ -214,6 +246,12 @@ public void update(final Observable o, final Object arg) {\n   /** Called when the user hits play. */\n   @Override\n   public Optional<ILauncher> getLauncher() {\n+    Preconditions.checkNotNull(\n+        gameSelectorModel.getGameData(),", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNzE5Mw==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380407193", "bodyText": "This class is to decouple swing interactions from \"TestPostProgressDisplay\"", "author": "DanVanAtta", "createdAt": "2020-02-18T00:35:02Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/test/post/SwingTestPostProgressDisplayFactory.java", "diffHunk": "@@ -0,0 +1,45 @@\n+package games.strategy.engine.framework.startup.ui.pbem.test.post;\n+\n+import games.strategy.engine.framework.GameRunner;\n+import java.util.function.Supplier;\n+import javax.swing.JOptionPane;\n+import javax.swing.SwingUtilities;\n+import org.triplea.swing.ProgressWindow;\n+\n+public class SwingTestPostProgressDisplayFactory implements Supplier<TestPostProgressDisplay> {", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNzI1Mw==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380407253", "bodyText": "All logic in this method is extracted from the view. Any interactions with swing are delegated to TestPostProgressDisplay", "author": "DanVanAtta", "createdAt": "2020-02-18T00:35:27Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/test/post/TestPostAction.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package games.strategy.engine.framework.startup.ui.pbem.test.post;\n+\n+import com.google.common.base.Preconditions;\n+import games.strategy.engine.ClientContext;\n+import games.strategy.engine.posted.game.pbf.NodeBbForumPoster;\n+import java.awt.Graphics;\n+import java.awt.image.BufferedImage;\n+import java.io.File;\n+import java.io.IOException;\n+import java.util.concurrent.CompletableFuture;\n+import java.util.concurrent.ExecutionException;\n+import java.util.function.BiConsumer;\n+import java.util.function.Supplier;\n+import java.util.logging.Level;\n+import javax.imageio.ImageIO;\n+import lombok.AllArgsConstructor;\n+import lombok.extern.java.Log;\n+import org.triplea.java.TimeManager;\n+\n+@Log\n+@AllArgsConstructor\n+public class TestPostAction implements BiConsumer<String, Integer> {\n+\n+  private final Supplier<TestPostProgressDisplay> testPostProgressDisplayFactory;\n+\n+  @Override\n+  public void accept(final String forumName, final Integer topicId) {\n+    Preconditions.checkNotNull(forumName);\n+    Preconditions.checkArgument(topicId > 0);\n+\n+    final TestPostProgressDisplay testPostProgressDisplay = testPostProgressDisplayFactory.get();\n+\n+    new Thread(\n+            () -> {\n+              File f = null;", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNzM2Mg==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380407362", "bodyText": "This test is pretty important, deserves some good scrutiny.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:35:58Z", "path": "game-core/src/test/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditorViewModelTest.java", "diffHunk": "@@ -0,0 +1,239 @@\n+package games.strategy.engine.framework.startup.ui.pbem;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+import static org.hamcrest.core.IsNull.notNullValue;\n+import static org.hamcrest.text.IsEmptyString.emptyString;\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.Mockito.never;\n+import static org.mockito.Mockito.times;\n+import static org.mockito.Mockito.verify;\n+\n+import com.google.common.base.Preconditions;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.properties.GameProperties;\n+import games.strategy.engine.posted.game.pbf.IForumPoster;\n+import games.strategy.engine.posted.game.pbf.NodeBbForumPoster;\n+import java.util.List;\n+import java.util.function.BiConsumer;\n+import org.junit.jupiter.api.DisplayName;\n+import org.junit.jupiter.api.Nested;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.junit.jupiter.params.ParameterizedTest;\n+import org.junit.jupiter.params.provider.Arguments;\n+import org.junit.jupiter.params.provider.MethodSource;\n+import org.junit.jupiter.params.provider.ValueSource;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+import org.triplea.java.ViewModelListener;\n+\n+@ExtendWith(MockitoExtension.class)\n+class ForumPosterEditorViewModelTest {", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQwNzQzMg==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380407432", "bodyText": "The comment and example on this interface are important. Please scrutinize whether it all makes sense.", "author": "DanVanAtta", "createdAt": "2020-02-18T00:36:25Z", "path": "java-extras/src/main/java/org/triplea/java/ViewModelListener.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package org.triplea.java;\n+\n+/**", "originalCommit": "c17c847f0d41d5c92db02a4360b6e62bdc4a6c4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk2Njk2NA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380966964", "bodyText": "Thoughts about making this a @FunctionalInterface?\nThis way the compiler would ensure that this interface can be implemented using a lambda.\nNot really necessary for the existing code, but nice to have IMO.", "author": "RoiEXLab", "createdAt": "2020-02-18T22:12:55Z", "path": "java-extras/src/main/java/org/triplea/java/ViewModelListener.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package org.triplea.java;\n+\n+/**\n+ * Represents a specialized {@code Consumer<T>} interface for views to implement to listen to\n+ * changes on their view model. The view model will call the {@code viewModelChanged} method when\n+ * the view model state has changed in a way where the view should also be updated.\n+ *\n+ * <p>Pattern References:\n+ *\n+ * <ul>\n+ *   <li>Presentation model pattern: https://martinfowler.com/eaaDev/PresentationModel.html -\n+ *   <li>Separated presentation pattern: https://martinfowler.com/eaaDev/SeparatedPresentation.html\n+ * </ul>\n+ *\n+ * Example implementation of a UI class implementing a {@code ViewModelListener}:\n+ *\n+ * <pre>{@code\n+ * class MyUiClass implements ViewModelListener<MyViewModel> {\n+ *    MyUiClass(MyViewModel viewModel) {\n+ *        viewModel.setView(this);\n+ *        TextField userNameField = new TextField();\n+ *        DocumentListener.addKeyTypedListener(\n+ *            usernameField, value -> viewModel.setUsername(value));\n+ *\n+ *        CheckBox userIsEnabledCheckBox = new CheckBox();\n+ *        userIsEnabledCheckBox.addActionListener(\n+ *            checkBoxSelected -> viewModel.setUserIsEnabled(checkboxSelected);\n+ *    }\n+ *\n+ *    @Override\n+ *    void viewModelChanged(ViewModelT viewModel) {\n+ *       userName.setText(viewModel.getUsername());\n+ *       userIsEnabledCheckBox.setSelected(viewModel.getUserIsEnabled());\n+ *    }\n+ * }\n+ * }</pre>\n+ *\n+ * @param <ViewModelT> The type of view model, view model listeners should generally be 1:1 to a\n+ *     view model.\n+ */\n+public interface ViewModelListener<ViewModelT> {", "originalCommit": "826cb8c38a221fad453acc2bc072303a0fbf31b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAyNDYxMg==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r381024612", "bodyText": "Certainly a consideration, though we do not ever expect any implementors to actually be lambdas.", "author": "DanVanAtta", "createdAt": "2020-02-19T01:05:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk2Njk2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk4MjM1NA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380982354", "bodyText": "I'm not sure about this one.\nIs the viewModel just supposed to be a data-class or should it be able to encapsulate some logic as well?\nIn the former case I wonder at which point potential logic would belong.\nIn the latter case I think it's not ideal, simply because this example is essentially a no-op, setting the values to themselves with added indirection.\nI'd have expected an example where the view is more than just a data class.\nFor example a viewModel that exposes a setPassword and a getPasswordStrength method so that the UI could implement some sort of password strength indicator and it becomes obvious that the viewModel can hold some logic.", "author": "RoiEXLab", "createdAt": "2020-02-18T22:49:19Z", "path": "java-extras/src/main/java/org/triplea/java/ViewModelListener.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package org.triplea.java;\n+\n+/**\n+ * Represents a specialized {@code Consumer<T>} interface for views to implement to listen to\n+ * changes on their view model. The view model will call the {@code viewModelChanged} method when\n+ * the view model state has changed in a way where the view should also be updated.\n+ *\n+ * <p>Pattern References:\n+ *\n+ * <ul>\n+ *   <li>Presentation model pattern: https://martinfowler.com/eaaDev/PresentationModel.html -\n+ *   <li>Separated presentation pattern: https://martinfowler.com/eaaDev/SeparatedPresentation.html\n+ * </ul>\n+ *\n+ * Example implementation of a UI class implementing a {@code ViewModelListener}:\n+ *\n+ * <pre>{@code\n+ * class MyUiClass implements ViewModelListener<MyViewModel> {\n+ *    MyUiClass(MyViewModel viewModel) {\n+ *        viewModel.setView(this);\n+ *        TextField userNameField = new TextField();\n+ *        DocumentListener.addKeyTypedListener(\n+ *            usernameField, value -> viewModel.setUsername(value));\n+ *\n+ *        CheckBox userIsEnabledCheckBox = new CheckBox();\n+ *        userIsEnabledCheckBox.addActionListener(\n+ *            checkBoxSelected -> viewModel.setUserIsEnabled(checkboxSelected);\n+ *    }\n+ *\n+ *    @Override\n+ *    void viewModelChanged(ViewModelT viewModel) {\n+ *       userName.setText(viewModel.getUsername());\n+ *       userIsEnabledCheckBox.setSelected(viewModel.getUserIsEnabled());\n+ *    }\n+ * }", "originalCommit": "8794b468304daf0c1ce836c002e958fca3119373", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAzMDAzNw==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r381030037", "bodyText": "Very much recommend the Fowler link on the pattern: https://martinfowler.com/eaaDev/PresentationModel.html\nThere are also some similarities to these other patterns:\n\nhttps://martinfowler.com/eaaDev/SupervisingPresenter.html\nhttps://martinfowler.com/eaaDev/PassiveScreen.html\n\nIn essence, a data only class is not very useful, part of the goal is that the logic of the UI itself should  become testable. If we are only a data class, then it's yet some other model that is containing that logic. In essence, the view model is a data class and represents the dynamic data of a UI, second it is a thin to medium sized model of the view.\nFor example with getPasswordStrength, the view model would store a value \"password:string\" and \"passwordStrength:enum\". The view would be updated and would know how to render \"passwordStrength = low|medium|high\". The view model would be invoked by the view on password text updates. The view model would have essentially controller like logic to invoke a model that computes the password strength (perhaps a score from 1-100 that is then translated to the 'low|medium|high' values). The view model would then pass the password strength enum value to the view to be rendered.\nI suppose at its simplest the view model is just a data class and a submit button would send that data to some sort of submit action.\nSome of the goals is that we decouple from UI, one could conceivably swap out UI components entirely without needing to update the view model. Second, the logic of updating the view and actions from the view become testable, also said in another way, logic of how the view is updated becomes testable. Last, the view becomes a pretty stable rendering component, it loses pretty much all logic and control flow and is just focused on rendering a given state.", "author": "DanVanAtta", "createdAt": "2020-02-19T01:25:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk4MjM1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk4NDkyOA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380984928", "bodyText": "Reminds me of reactive-style programming tbh", "author": "RoiEXLab", "createdAt": "2020-02-18T22:55:04Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/editors/ForumPosterEditor.java", "diffHunk": "@@ -179,118 +177,19 @@ public ForumPosterEditor(final Runnable readyCallback) {\n             new Insets(0, 0, 0, 0),\n             0,\n             0));\n-    setupListeners();\n-  }\n-\n-  private void checkFieldsAndNotify() {\n-    areFieldsValid();\n-    readyCallback.run();\n-  }\n-\n-  /** Configures the listeners for the gui components. */\n-  private void setupListeners() {\n-    viewPosts.addActionListener(e -> newForumPoster().viewPosted());\n-    testForum.addActionListener(e -> testForum());\n-    forums.addItemListener(e -> checkFieldsAndNotify());\n-    DocumentListenerBuilder.attachDocumentListener(topicIdField, this::checkFieldsAndNotify);\n-  }\n-\n-  /** Tests the Forum poster. */\n-  private void testForum() {\n-    final NodeBbForumPoster poster = newForumPoster();\n-    final ProgressWindow progressWindow =\n-        new ProgressWindow(JOptionPane.getFrameForComponent(this), poster.getTestMessage());\n-    progressWindow.setVisible(true);\n-\n-    new Thread(\n-            () -> {\n-              File f = null;\n-              try {\n-                f = File.createTempFile(\"123\", \".jpg\");\n-                f.deleteOnExit();\n-                final BufferedImage image = new BufferedImage(130, 40, BufferedImage.TYPE_INT_RGB);\n-                final Graphics g = image.getGraphics();\n-                g.drawString(\"Testing file upload\", 10, 20);\n-                ImageIO.write(image, \"jpg\", f);\n-              } catch (final IOException e) {\n-                // ignore\n-              }\n-              final CompletableFuture<String> future =\n-                  poster.postTurnSummary(\n-                      \"Test summary from TripleA, engine version: \"\n-                          + ClientContext.engineVersion()\n-                          + \", time: \"\n-                          + TimeManager.getLocalizedTime(),\n-                      \"Testing Forum poster\",\n-                      f != null ? f.toPath() : null);\n-              progressWindow.setVisible(false);\n-              try {\n-                // now that we have a result, marshall it back unto the swing thread\n-                future\n-                    .thenAccept(\n-                        message ->\n-                            SwingUtilities.invokeLater(\n-                                () ->\n-                                    GameRunner.showMessageDialog(\n-                                        message,\n-                                        GameRunner.Title.of(\"Test Turn Summary Post\"),\n-                                        JOptionPane.INFORMATION_MESSAGE)))\n-                    .exceptionally(\n-                        throwable -> {\n-                          SwingUtilities.invokeLater(\n-                              () ->\n-                                  GameRunner.showMessageDialog(\n-                                      throwable.getMessage(),\n-                                      GameRunner.Title.of(\"Test Turn Summary Post\"),\n-                                      JOptionPane.INFORMATION_MESSAGE));\n-                          return null;\n-                        })\n-                    .get();\n-              } catch (final InterruptedException e) {\n-                Thread.currentThread().interrupt();\n-              } catch (final ExecutionException e) {\n-                log.log(Level.SEVERE, \"Error while retrieving post\", e);\n-              }\n-            })\n-        .start();\n-  }\n-\n-  /** Checks if all fields are filled out correctly and indicates an error otherwise. */\n-  public boolean areFieldsValid() {\n-    final boolean setupValid =\n-        NodeBbForumPoster.isClientSettingSetupValidForServer((String) forums.getSelectedItem());\n-    final boolean idValid = setLabelValid(isInt(topicIdField.getText()), topicIdLabel);\n-    final boolean forumValid = setLabelValid(forums.getSelectedItem() != null, forumLabel);\n-    final boolean allValid = setupValid && idValid && forumValid;\n-    viewPosts.setEnabled(allValid);\n-    testForum.setEnabled(allValid);\n-    return allValid;\n   }\n \n-  @VisibleForTesting\n-  static boolean isInt(final String string) {\n-    Preconditions.checkNotNull(string);\n-    return string.matches(\"^-?\\\\d+$\");\n-  }\n-\n-  private NodeBbForumPoster newForumPoster() {\n-    final String forumName = (String) forums.getSelectedItem();\n-    Preconditions.checkNotNull(forumName);\n-    return NodeBbForumPoster.newInstanceByName(forumName, Integer.parseInt(topicIdField.getText()));\n-  }\n-\n-  public void applyToGameProperties(final GameProperties properties) {\n-    properties.set(IForumPoster.NAME, forums.getSelectedItem());\n-    properties.set(IForumPoster.TOPIC_ID, Integer.parseInt(topicIdField.getText()));\n-    properties.set(IForumPoster.POST_AFTER_COMBAT, alsoPostAfterCombatMove.isSelected());\n-    properties.set(IForumPoster.INCLUDE_SAVEGAME, includeSaveGame.isSelected());\n-  }\n+  @Override\n+  public void viewModelChanged(final ForumPosterEditorViewModel forumPosterEditorViewModel) {\n+    forums.setSelectedItem(forumPosterEditorViewModel.getForumSelection());\n+    topicIdField.setText(forumPosterEditorViewModel.getTopicId());\n+    alsoPostAfterCombatMove.setSelected(forumPosterEditorViewModel.isAlsoPostAfterCombatMove());\n+    attachSaveGameToSummary.setSelected(forumPosterEditorViewModel.isAttachSaveGameToSummary());\n \n-  public void populateFromGameProperties(final GameProperties properties) {\n-    forums.setSelectedItem(properties.get(IForumPoster.NAME));\n-    final Object topicId = properties.get(IForumPoster.TOPIC_ID);\n-    topicIdField.setText(topicId == null ? \"\" : String.valueOf(topicId));\n-    alsoPostAfterCombatMove.setSelected(properties.get(IForumPoster.POST_AFTER_COMBAT, false));\n-    includeSaveGame.setSelected(properties.get(IForumPoster.INCLUDE_SAVEGAME, true));\n+    final boolean isValid = forumPosterEditorViewModel.areFieldsValid();\n+    setLabelValid(isValid, topicIdLabel);\n+    setLabelValid(isValid, forumLabel);\n+    viewPosts.setEnabled(isValid);\n+    testForum.setEnabled(isValid);", "originalCommit": "9fdb7ac8e966fb8089368bd53d9fb4d680be4d5e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAzMDEyMw==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r381030123", "bodyText": "There certainly are similarities \ud83d\ude04", "author": "DanVanAtta", "createdAt": "2020-02-19T01:26:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk4NDkyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk4NzI0OA==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r380987248", "bodyText": "Why the Ints.tryParse method?\nI think I have never seen that before.", "author": "RoiEXLab", "createdAt": "2020-02-18T23:00:47Z", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/pbem/ForumPosterEditorViewModel.java", "diffHunk": "@@ -25,12 +43,29 @@\n \n   ForumPosterEditorViewModel(final Runnable readyCallback, final GameProperties properties) {\n     this.readyCallback = readyCallback;\n-    this.forumSelection = (String) properties.get(IForumPoster.NAME);\n-    this.topicId = properties.get(IForumPoster.TOPIC_ID, \"\");\n+    setForumSelection((String) properties.get(IForumPoster.NAME));\n+    setTopicId(properties.get(IForumPoster.TOPIC_ID, \"\"));\n     this.alsoPostAfterCombatMove = properties.get(IForumPoster.POST_AFTER_COMBAT, false);\n     this.attachSaveGameToSummary = properties.get(IForumPoster.INCLUDE_SAVEGAME, false);\n   }\n \n+  synchronized void setForumSelection(final String forumSelection) {\n+    this.forumSelection = forumSelection;\n+    forumSelectionValid = !forumSelection.isBlank();\n+    viewForumPostButtonEnabled = areFieldsValid();\n+    testForumPostButtonEnabled = areFieldsValid();\n+    readyCallback.run();\n+  }\n+\n+  synchronized void setTopicId(final String topicId) {\n+    this.topicId = topicId;\n+    final Integer numericTopicId = Ints.tryParse(topicId);", "originalCommit": "63c46e1a9c4455103ff7ea0df4da192ce463b0e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAzMDM4Mw==", "url": "https://github.com/triplea-game/triplea/pull/5953#discussion_r381030383", "bodyText": "It is Guava, returns null if the string value is not an integer. This avoids using IntegerParseException to check validity. It seemed really annoying there is no isInt(String) method baked into java yet.", "author": "DanVanAtta", "createdAt": "2020-02-19T01:27:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk4NzI0OA=="}], "type": "inlineReview"}, {"oid": "9c8b3a9a5eee394bdfb357fdb78e41e62c8e6796", "url": "https://github.com/triplea-game/triplea/commit/9c8b3a9a5eee394bdfb357fdb78e41e62c8e6796", "message": "Remove unnecessary view sync, data updates from view do not need to invoke the view for update", "committedDate": "2020-02-19T00:33:34Z", "type": "commit"}]}