{"pr_number": 6092, "pr_title": "Add test coverage for findNearbyEnemyCapitalsAndFactories.", "pr_createdAt": "2020-03-26T04:04:26Z", "pr_url": "https://github.com/triplea-game/triplea/pull/6092", "timeline": [{"oid": "5f5e979df42acdd40c6a2ede77f63cd0faf4498a", "url": "https://github.com/triplea-game/triplea/commit/5f5e979df42acdd40c6a2ede77f63cd0faf4498a", "message": "Add test coverage for findNearbyEnemyCapitalsAndFactories.", "committedDate": "2020-03-26T04:02:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxMTk1Mw==", "url": "https://github.com/triplea-game/triplea/pull/6092#discussion_r398311953", "bodyText": "Looks good, one question why distance '9'? Perhaps referencing the constant that controls this could make it clear?\nIE: when they're within min distance (ProTerritoryValuesUtils.MIN_FACTORY_CHECK_DISTANCE)\nSecond, does MAX_FACTORY_CHECK_DISTANCE come into play anywhere? Is there a test case to be added where we don't find something that is outside of max distance?", "author": "DanVanAtta", "createdAt": "2020-03-26T04:31:19Z", "path": "game-core/src/test/java/games/strategy/triplea/ai/pro/util/ProTerritoryValuesUtilsTest.java", "diffHunk": "@@ -0,0 +1,49 @@\n+package games.strategy.triplea.ai.pro.util;\n+\n+import static games.strategy.triplea.delegate.GameDataTestUtil.territory;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.containsInAnyOrder;\n+\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.triplea.xml.TestMapGameData;\n+import java.util.Collection;\n+import java.util.Set;\n+import org.junit.jupiter.api.DisplayName;\n+import org.junit.jupiter.api.Test;\n+\n+public class ProTerritoryValuesUtilsTest {\n+  private final GameData gameData = TestMapGameData.BIG_WORLD_1942.getGameData();\n+  private final Territory swUsa = territory(\"Southwestern United States\", gameData);\n+  private final Territory england = territory(\"England\", gameData);\n+  private final Territory northJapan = territory(\"Northern Japan\", gameData);\n+  private final Territory moscow = territory(\"Moscow\", gameData);\n+  private final Territory newSouthWales = territory(\"New South Wales\", gameData);\n+\n+  @Test\n+  @DisplayName(\"all targets found when they're within distance of 9\")", "originalCommit": "5f5e979df42acdd40c6a2ede77f63cd0faf4498a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxMjkxMQ==", "url": "https://github.com/triplea-game/triplea/pull/6092#discussion_r398312911", "bodyText": "I'm not covering the MAX_FACTORY_CHECK_DISTANCE case. I don't think we need to, I suspect it was there just to stop the algorithm, since otherwise it would just go indefinitely even when the map has no territories that are so far away.\nIn my other PR, I'm actually going to remove this check, since I don't think it's needed and allows us to simplify the code.\nAs for the magic number of 9, it would make the DisplayName not fit within the line length if we reference the constant. I thought we wanted this name to be short?", "author": "asvitkine", "createdAt": "2020-03-26T04:35:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxMTk1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxNTEwMQ==", "url": "https://github.com/triplea-game/triplea/pull/6092#discussion_r398315101", "bodyText": "Ideally short, yes. More important to be clear, such that if the test ever breaks you can look at the test only and know why it was supposed to pass in the first place.\nPerhaps you could use the 'assertThat' comment string to clarify, eg:\n@DisplayName(\"all targets found when they're within min distance\")\n:\n:\n assertThat(\n    \"swUsa and northJapan are within min distance (\" + ProTerritoryValuesUtils.MIN_FACTORY_CHECK_DISTANCE + \") of newSouthWales:\", \n   result, \n   containsInAnyOrder(swUsa, northJapan));\n\nedit fixed up assert that message, the distance is relative to new south wales...", "author": "DanVanAtta", "createdAt": "2020-03-26T04:44:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxMTk1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxODc1Nw==", "url": "https://github.com/triplea-game/triplea/pull/6092#discussion_r398918757", "bodyText": "Done.", "author": "asvitkine", "createdAt": "2020-03-26T22:00:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxMTk1Mw=="}], "type": "inlineReview"}, {"oid": "35eb662b698bac2553a71a7f2f7cbf51417c1484", "url": "https://github.com/triplea-game/triplea/commit/35eb662b698bac2553a71a7f2f7cbf51417c1484", "message": "Fix test name and add assert messages.", "committedDate": "2020-03-26T22:00:14Z", "type": "commit"}]}