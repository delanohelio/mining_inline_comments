{"pr_number": 6483, "pr_title": "Update tests for map search path 'getCandidates'", "pr_createdAt": "2020-05-16T23:58:09Z", "pr_url": "https://github.com/triplea-game/triplea/pull/6483", "timeline": [{"oid": "12b665c42253bf9f0bee92bd9a6cd95989c84970", "url": "https://github.com/triplea-game/triplea/commit/12b665c42253bf9f0bee92bd9a6cd95989c84970", "message": "Update tests for map search path 'getCandidates'\n\n- Avoid using Client settings, instead pass in user maps root folder\n- Check explicitly the returned values in test.\n- Update MapNotFoundException API to accept a collection, the exception does not\n  care what kind of collection is received (it is overspecified)", "committedDate": "2020-05-17T00:09:21Z", "type": "commit"}, {"oid": "12b665c42253bf9f0bee92bd9a6cd95989c84970", "url": "https://github.com/triplea-game/triplea/commit/12b665c42253bf9f0bee92bd9a6cd95989c84970", "message": "Update tests for map search path 'getCandidates'\n\n- Avoid using Client settings, instead pass in user maps root folder\n- Check explicitly the returned values in test.\n- Update MapNotFoundException API to accept a collection, the exception does not\n  care what kind of collection is received (it is overspecified)", "committedDate": "2020-05-17T00:09:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0MzY3Ng==", "url": "https://github.com/triplea-game/triplea/pull/6483#discussion_r426243676", "bodyText": "Thought: I we would use java.nio.file.Path instead of java.io.File we could easily use Path#of for convinience instead of coding this logic ourselves.", "author": "RoiEXLab", "createdAt": "2020-05-17T10:21:53Z", "path": "java-extras/src/main/java/org/triplea/io/FileUtils.java", "diffHunk": "@@ -3,13 +3,26 @@\n import static com.google.common.base.Preconditions.checkNotNull;\n \n import java.io.File;\n+import java.util.ArrayList;\n import java.util.Collection;\n import java.util.List;\n import java.util.Optional;\n+import lombok.experimental.UtilityClass;\n \n /** A collection of useful methods related to files. */\n+@UtilityClass\n public final class FileUtils {\n-  private FileUtils() {}\n+\n+  /**\n+   * Creates a new file with a parent folder and any number of child folders. This is a convenience\n+   * method to concatenate the path together with an OS specific file separator.\n+   */\n+  public static File newFile(final String parentDir, final String... childDirs) {\n+    final List<String> dirs = new ArrayList<>();\n+    dirs.add(parentDir);\n+    dirs.addAll(List.of(childDirs));\n+    return new File(String.join(File.separator, dirs));", "originalCommit": "12b665c42253bf9f0bee92bd9a6cd95989c84970", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0Mzg4NQ==", "url": "https://github.com/triplea-game/triplea/pull/6483#discussion_r426243885", "bodyText": "That being said, you could simplify this code to\nreturn Path.of(parentDir, chilDirs).toFile();", "author": "RoiEXLab", "createdAt": "2020-05-17T10:24:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0MzY3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0NDM0Ng==", "url": "https://github.com/triplea-game/triplea/pull/6483#discussion_r426244346", "bodyText": "A question of taste, but if you want a more functional approach here, you could do\nStream.of(\n  getMapDirectoryCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()),\n  getMapZipFileCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder())\n).flatMap(Collection::stream)\n.collect(Collectors.toList());\nor\nStream.concat(\n  getMapDirectoryCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()).stream(),\n  getMapZipFileCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()).stream()\n).collect(Collectors.toList());", "author": "RoiEXLab", "createdAt": "2020-05-17T10:29:30Z", "path": "game-core/src/main/java/games/strategy/triplea/ResourceLoader.java", "diffHunk": "@@ -210,8 +209,9 @@ static String normalizeMapName(final String zipName) {\n \n   private static List<File> getCandidatePaths(final String mapName) {\n     final List<File> candidates = new ArrayList<>();\n-    candidates.addAll(getMapDirectoryCandidates(mapName));\n-    candidates.addAll(getMapZipFileCandidates(mapName));\n+    candidates.addAll(\n+        getMapDirectoryCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()));\n+    candidates.addAll(getMapZipFileCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()));", "originalCommit": "12b665c42253bf9f0bee92bd9a6cd95989c84970", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b0001a836ad2886ffe4d04af2eb6172c88dc4e68", "url": "https://github.com/triplea-game/triplea/commit/b0001a836ad2886ffe4d04af2eb6172c88dc4e68", "message": "Simplify 'FileUtils#newFile' implementation using 'Path#of'", "committedDate": "2020-05-20T00:52:38Z", "type": "commit"}]}