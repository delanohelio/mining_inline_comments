{"pr_number": 1295, "pr_title": "SAMZA-2473: gradleVersion and wrapper jar are out-of-sync", "pr_createdAt": "2020-02-26T22:39:18Z", "pr_url": "https://github.com/apache/samza/pull/1295", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc1MTIxMw==", "url": "https://github.com/apache/samza/pull/1295#discussion_r386751213", "bodyText": "Will there be an impact to the artifact name if classifier \"dist\" is removed here?", "author": "cameronlee314", "createdAt": "2020-03-03T01:30:41Z", "path": "gradle/maven.gradle", "diffHunk": "@@ -22,13 +22,13 @@ subprojects {\n   publishing {\n     publications {\n       mavenJava(MavenPublication) {\n-        from components.java\n-        if(project.name == 'samza-shell') {\n-          artifact shellTarGz {\n-            classifier \"dist\"", "originalCommit": "8665226db31d090516ef6a22703dae87102496c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc2OTY1OQ==", "url": "https://github.com/apache/samza/pull/1295#discussion_r386769659", "bodyText": "The artifact produced by task shellTarGz already specifies the dist classifier: https://github.com/apache/samza/blob/master/build.gradle#L552\nJust in case, I'll build again and verify locally.", "author": "DPUkyle", "createdAt": "2020-03-03T02:40:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc1MTIxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE5MjAzMg==", "url": "https://github.com/apache/samza/pull/1295#discussion_r387192032", "bodyText": "Verification details.\nBefore (master branch at 851fc48):\n$ ./gradlew clean :samza-shell:assemble\n$ ls -al samza-shell/build/distributions/samza-shell-1.4.0-SNAPSHOT-dist.tgz \n-rw-r--r-- 1 kmoore eng 96811 Mar  3 09:48 samza-shell/build/distributions/samza-shell-1.4.0-SNAPSHOT-dist.tgz\n$ shasum samza-shell/build/distributions/samza-shell-1.4.0-SNAPSHOT-dist.tgz\n40acd2debccda136a7dee1a2647eb29ddb88df04  samza-shell/build/distributions/samza-shell-1.4.0-SNAPSHOT-dist.tgz\n\nAfter (PR branch):\n$ ./gradlew clean :samza-shell:assemble\n$ ls -al samza-shell/build/distributions/samza-shell-1.4.0-SNAPSHOT-dist.tgz \n-rw-r--r-- 1 kmoore eng 96811 Mar  3 09:50 samza-shell/build/distributions/samza-shell-1.4.0-SNAPSHOT-dist.tgz\n$ shasum samza-shell/build/distributions/samza-shell-1.4.0-SNAPSHOT-dist.tgz\n40acd2debccda136a7dee1a2647eb29ddb88df04  samza-shell/build/distributions/samza-shell-1.4.0-SNAPSHOT-dist.tgz\n\nChecksums are identical and filenames match, including classifier.", "author": "DPUkyle", "createdAt": "2020-03-03T17:53:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc1MTIxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc1MjI4Nw==", "url": "https://github.com/apache/samza/pull/1295#discussion_r386752287", "bodyText": "Just double checking: This file is automatically generated, right?", "author": "cameronlee314", "createdAt": "2020-03-03T01:34:42Z", "path": "gradlew.bat", "diffHunk": "@@ -0,0 +1,84 @@\n+@if \"%DEBUG%\" == \"\" @echo off\r", "originalCommit": "8665226db31d090516ef6a22703dae87102496c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc1OTk3Mg==", "url": "https://github.com/apache/samza/pull/1295#discussion_r386759972", "bodyText": "Yes, gradlew and gradlew.bat are automatically generated by Gradle's wrapper task. You will see subtle changes over the course of Gradle versions as they improve these generated scripts.", "author": "DPUkyle", "createdAt": "2020-03-03T02:02:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc1MjI4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc1MzM4MQ==", "url": "https://github.com/apache/samza/pull/1295#discussion_r386753381", "bodyText": "Could you please add a comment in gradle.properties right above gradleVersion to re-run ./gradlew wrapper and commit the generated changes when upgrading Gradle in the future?", "author": "cameronlee314", "createdAt": "2020-03-03T01:38:39Z", "path": "build.gradle", "diffHunk": "@@ -866,3 +866,8 @@ project(\":samza-test_$scalaSuffix\") {\n     from(configurations.archives.artifacts.files) { into(\"lib/\") }\n   }\n }\n+\n+// SAMZA-2473 read wrapper version from gradle.properties\n+wrapper {\n+  gradleVersion = project.gradleVersion", "originalCommit": "8665226db31d090516ef6a22703dae87102496c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc2MDA4NA==", "url": "https://github.com/apache/samza/pull/1295#discussion_r386760084", "bodyText": "Great suggestion; will do.", "author": "DPUkyle", "createdAt": "2020-03-03T02:03:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc1MzM4MQ=="}], "type": "inlineReview"}, {"oid": "e09fd7ebbfc0634947f8c685b08a985faa611981", "url": "https://github.com/apache/samza/commit/e09fd7ebbfc0634947f8c685b08a985faa611981", "message": "Update Gradle wrapper to 5.2.1\n\n - Fix built-in wrapper task to read value from gradle.properties\n - Commit new wrapper scripts and bootstrap jar\n - `$ ./gradlew wrapper` to update in the future\n - Fix maven publish behavior change; see https://docs.gradle.org/5.2.1/userguide/publishing_maven.html#publishing_maven:deferred_configuration", "committedDate": "2020-03-03T17:42:17Z", "type": "forcePushed"}, {"oid": "08ebce1cfc148af1c38423d45b9fe754abd27e8f", "url": "https://github.com/apache/samza/commit/08ebce1cfc148af1c38423d45b9fe754abd27e8f", "message": "Update Gradle wrapper to 5.2.1\n\n - Fix built-in wrapper task to read value from gradle.properties\n - Commit new wrapper scripts and bootstrap jar\n - `$ ./gradlew wrapper` to update in the future\n - Fix maven publish behavior change; see https://docs.gradle.org/5.2.1/userguide/publishing_maven.html#publishing_maven:deferred_configuration", "committedDate": "2020-03-03T17:55:58Z", "type": "commit"}, {"oid": "08ebce1cfc148af1c38423d45b9fe754abd27e8f", "url": "https://github.com/apache/samza/commit/08ebce1cfc148af1c38423d45b9fe754abd27e8f", "message": "Update Gradle wrapper to 5.2.1\n\n - Fix built-in wrapper task to read value from gradle.properties\n - Commit new wrapper scripts and bootstrap jar\n - `$ ./gradlew wrapper` to update in the future\n - Fix maven publish behavior change; see https://docs.gradle.org/5.2.1/userguide/publishing_maven.html#publishing_maven:deferred_configuration", "committedDate": "2020-03-03T17:55:58Z", "type": "forcePushed"}]}