{"pr_number": 4363, "pr_title": "feat(TDI-40852): add dynamic support for tMSSQLBulkExec", "pr_createdAt": "2020-01-23T09:44:53Z", "pr_url": "https://github.com/Talend/tdi-studio-se/pull/4363", "timeline": [{"oid": "e597241986106548e57ff19b51f0a7120a5f3248", "url": "https://github.com/Talend/tdi-studio-se/commit/e597241986106548e57ff19b51f0a7120a5f3248", "message": "feat(TDI-40852): add feature for CREATE_IF_NOT_EXIST table action", "committedDate": "2020-01-20T11:10:42Z", "type": "commit"}, {"oid": "d4fa7813281c9ec672275f622ed7c2f9cd86c611", "url": "https://github.com/Talend/tdi-studio-se/commit/d4fa7813281c9ec672275f622ed7c2f9cd86c611", "message": "feat(TDI-40852): add feature for DROP_IF_EXIST_AND_CREATE table action", "committedDate": "2020-01-20T11:17:31Z", "type": "commit"}, {"oid": "239768bdf6da7ee1287f75fe321d5f5c3d3157be", "url": "https://github.com/Talend/tdi-studio-se/commit/239768bdf6da7ee1287f75fe321d5f5c3d3157be", "message": "feat(TDI-40852): made improvements | correct template code", "committedDate": "2020-01-23T09:40:37Z", "type": "commit"}, {"oid": "233f7c4f47f007c7f7e279d7eafa3fe6a7ecfa8c", "url": "https://github.com/Talend/tdi-studio-se/commit/233f7c4f47f007c7f7e279d7eafa3fe6a7ecfa8c", "message": "feat(TDI-40852): return CODEPAGE", "committedDate": "2020-01-23T09:47:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTE1NDg4MQ==", "url": "https://github.com/Talend/tdi-studio-se/pull/4363#discussion_r371154881", "bodyText": "Maybe set it customizable : column.setLength(Integer.parseInt(System.getProperty(\"talend.mssql.bulk.double.precision\", \"53\"));", "author": "ypiel-talend", "createdAt": "2020-01-27T10:13:59Z", "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/_tableActionForBulk.javajet", "diffHunk": "@@ -205,7 +206,33 @@ if (!isParallelize) {\n \t\t\t\t\t<%if(isLog4jEnabled_tableAction){%>\n \t\t\t\t\t\tlog.info(\"<%=cid%> - Creating table <%=manager.getLProtectedChar()%>\" + tableName_<%=cid%> + \"<%=manager.getRProtectedChar()%>.\");\n \t\t\t\t\t<%}%>\n-\t\t\t\t\tstmtCreate_<%=cid%>.execute(\"<%=manager.getCreateTableSQL(stmtStructure)%>)\");\n+\t\t\t\t\t<%\n+\t\t\t\t\tif (MSSQL.equalsIgnoreCase(dbmsId) && isDynamic){\n+\t\t\t\t\t%>\n+\t\t\t\t\t\troutines.system.Dynamic dynamicColumn = (Dynamic)globalMap.get(\"<%=dynamicComponentName%>\" + \"_DYNAMIC\");\n+\n+\t\t\t\t\t\t//This code should be in DynamicUtils class.\n+\t\t\t\t\t\tfor (DynamicMetadata column : dynamicColumn.metadatas){\n+\t\t\t\t\t\t\t//set maximum precision for double types\n+\t\t\t\t\t\t\t//in MSSQL double is float. Maximum precision is 53\n+\t\t\t\t\t\t\tif (column.getType().equals(\"id_Double\")){\n+\t\t\t\t\t\t\t\tcolumn.setLength(53);", "originalCommit": "233f7c4f47f007c7f7e279d7eafa3fe6a7ecfa8c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQ1ODUzOA==", "url": "https://github.com/Talend/tdi-studio-se/pull/4363#discussion_r373458538", "bodyText": "Proposed it to Pierre.\nWe decide to move it to xml parameter and set hidden", "author": "Voievidko", "createdAt": "2020-01-31T12:35:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTE1NDg4MQ=="}], "type": "inlineReview"}, {"oid": "c30324b188e9e14475eab9908a2bc024262f3dac", "url": "https://github.com/Talend/tdi-studio-se/commit/c30324b188e9e14475eab9908a2bc024262f3dac", "message": "feat(TDI-40852): add hidden values | add log", "committedDate": "2020-01-31T14:10:57Z", "type": "commit"}, {"oid": "563c2977b0f2dfa1b5095dcec7b46942f8d9ea6e", "url": "https://github.com/Talend/tdi-studio-se/commit/563c2977b0f2dfa1b5095dcec7b46942f8d9ea6e", "message": "fix(TDI-43484): tSetDynamic schema cant work with tFile***Positional (#4369)\n\n* fix(TDI-43484): throw RuntimeException if useDynamicFromFile\r\n\r\n* fix(TDI-43484): throw Exception if schema defined from file\r\n\r\n* fix(TDI-43484): code format", "committedDate": "2020-01-31T14:13:21Z", "type": "commit"}, {"oid": "ef66da75496668f3a3e9a333b508e5c19bcbdcb6", "url": "https://github.com/Talend/tdi-studio-se/commit/ef66da75496668f3a3e9a333b508e5c19bcbdcb6", "message": "Revert \"fix(TDI-43484): tSetDynamic schema cant work with tFile***Positional (#4369)\" (#4379)\n\nThis reverts commit 563c2977b0f2dfa1b5095dcec7b46942f8d9ea6e.", "committedDate": "2020-01-31T14:23:07Z", "type": "commit"}, {"oid": "80900503e0f30ac5eb5fdde693df4d1fec8da468", "url": "https://github.com/Talend/tdi-studio-se/commit/80900503e0f30ac5eb5fdde693df4d1fec8da468", "message": "feat(TDI-40852): solve problem with create table", "committedDate": "2020-02-05T08:22:59Z", "type": "commit"}, {"oid": "c3f16e062431bb473498477373ac46bbcb222cb0", "url": "https://github.com/Talend/tdi-studio-se/commit/c3f16e062431bb473498477373ac46bbcb222cb0", "message": "Merge branch 'master' of github.com:Talend/tdi-studio-se into rvoievidko/TDI-40852_Add_dynamic_support_for_tMSSQLBulkExec", "committedDate": "2020-02-05T08:24:01Z", "type": "commit"}, {"oid": "8e535a75908acd920728d783927248cc0db88a32", "url": "https://github.com/Talend/tdi-studio-se/commit/8e535a75908acd920728d783927248cc0db88a32", "message": "Merge branch 'rvoievidko/TDI-40852_Add_dynamic_support_for_tMSSQLBulkExec' of github.com:Talend/tdi-studio-se into rvoievidko/TDI-40852_Add_dynamic_support_for_tMSSQLBulkExec", "committedDate": "2020-02-05T08:32:22Z", "type": "commit"}, {"oid": "f185ed9e471717e0a66cf53cd0767679115f7558", "url": "https://github.com/Talend/tdi-studio-se/commit/f185ed9e471717e0a66cf53cd0767679115f7558", "message": "Merge branch 'master' into rvoievidko/TDI-40852_Add_dynamic_support_for_tMSSQLBulkExec", "committedDate": "2020-02-07T13:29:25Z", "type": "commit"}]}