{"pr_number": 4622, "pr_title": "Dsylaiev/tdi 43931 pass full date to independand child job", "pr_createdAt": "2020-04-14T13:05:20Z", "pr_url": "https://github.com/Talend/tdi-studio-se/pull/4622", "timeline": [{"oid": "8a968c49c9dc8f88e76bf463c42ef823971734f4", "url": "https://github.com/Talend/tdi-studio-se/commit/8a968c49c9dc8f88e76bf463c42ef823971734f4", "message": "fix(TDI-43931): Convert long as date from context args", "committedDate": "2020-04-13T17:52:33Z", "type": "commit"}, {"oid": "caf831a50f99877d711cb6f38ffcb0e8edeb6d6d", "url": "https://github.com/Talend/tdi-studio-se/commit/caf831a50f99877d711cb6f38ffcb0e8edeb6d6d", "message": "fix(TDI-43931): Update file root to be up to date", "committedDate": "2020-04-13T17:57:22Z", "type": "commit"}, {"oid": "eb05242d78729b56141b19f15017243727fbd41f", "url": "https://github.com/Talend/tdi-studio-se/commit/eb05242d78729b56141b19f15017243727fbd41f", "message": "fix(TDI-43931): Implement fix for tRunJob", "committedDate": "2020-04-14T13:00:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODgwNjUxNQ==", "url": "https://github.com/Talend/tdi-studio-se/pull/4622#discussion_r408806515", "bodyText": "Add log message about impossibility to parse date value and attempt to parse value as long, please.", "author": "chmyga", "createdAt": "2020-04-15T12:34:30Z", "path": "main/plugins/org.talend.designer.codegen/jet_stub/footer.javajet", "diffHunk": "@@ -665,34 +665,39 @@\n <%\n                         } else if(typeToGenerate.equals(\"java.util.Date\")) {\n %>\n-                        try{\n                             String context_<%=ctxParam.getName()%>_value = context.getProperty(\"<%=ctxParam.getName()%>\");\n-                            if (context_<%=ctxParam.getName()%>_value == null){\n-                                context_<%=ctxParam.getName()%>_value = \"\";\n-                            }\n-                            int context_<%=ctxParam.getName()%>_pos = context_<%=ctxParam.getName()%>_value.indexOf(\";\");\n-                            String context_<%=ctxParam.getName()%>_pattern =  \"yyyy-MM-dd HH:mm:ss\";\n-                            if(context_<%=ctxParam.getName()%>_pos > -1){\n-                                context_<%=ctxParam.getName()%>_pattern = context_<%=ctxParam.getName()%>_value.substring(0, context_<%=ctxParam.getName()%>_pos);\n-                                context_<%=ctxParam.getName()%>_value = context_<%=ctxParam.getName()%>_value.substring(context_<%=ctxParam.getName()%>_pos + 1);\n-                            }\n+                            try{\n+                                if (context_<%=ctxParam.getName()%>_value == null){\n+                                    context_<%=ctxParam.getName()%>_value = \"\";\n+                                }\n+                                int context_<%=ctxParam.getName()%>_pos = context_<%=ctxParam.getName()%>_value.indexOf(\";\");\n+                                String context_<%=ctxParam.getName()%>_pattern =  \"yyyy-MM-dd HH:mm:ss\";\n+                                if(context_<%=ctxParam.getName()%>_pos > -1){\n+                                    context_<%=ctxParam.getName()%>_pattern = context_<%=ctxParam.getName()%>_value.substring(0, context_<%=ctxParam.getName()%>_pos);\n+                                    context_<%=ctxParam.getName()%>_value = context_<%=ctxParam.getName()%>_value.substring(context_<%=ctxParam.getName()%>_pos + 1);\n+                                }\n \n-                            context.<%=ctxParam.getName()%>=(java.util.Date)(new java.text.SimpleDateFormat(context_<%=ctxParam.getName()%>_pattern).parse(context_<%=ctxParam.getName()%>_value));\n+                                context.<%=ctxParam.getName()%>=(java.util.Date)(new java.text.SimpleDateFormat(context_<%=ctxParam.getName()%>_pattern).parse(context_<%=ctxParam.getName()%>_value));\n \n-                        } catch(ParseException e) {\n+                            } catch(ParseException e) {\n+                                try { <% /*try to check if date passed as long also*/ %>\n+                                    long context_<%=ctxParam.getName()%>_longValue = Long.valueOf(context_<%=ctxParam.getName()%>_value);\n+                                    context.<%=ctxParam.getName()%> = new java.util.Date(context_<%=ctxParam.getName()%>_longValue);", "originalCommit": "eb05242d78729b56141b19f15017243727fbd41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "72950e65eea537221410001faab78f3a82d2613e", "url": "https://github.com/Talend/tdi-studio-se/commit/72950e65eea537221410001faab78f3a82d2613e", "message": "fix(TDI-43931): Mention string parse exception in log warn", "committedDate": "2020-04-15T15:22:07Z", "type": "commit"}]}