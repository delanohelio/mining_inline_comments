{"pr_number": 4491, "pr_title": "TDI-43764 : MsSQL NVARCHAR", "pr_createdAt": "2020-02-27T12:22:26Z", "pr_url": "https://github.com/Talend/tdi-studio-se/pull/4491", "timeline": [{"oid": "ff2b47851374a0111d4f5d2855fc20d616bb663a", "url": "https://github.com/Talend/tdi-studio-se/commit/ff2b47851374a0111d4f5d2855fc20d616bb663a", "message": "TDI-43764 : MsSQL NVARCHAR\n\nUse setNString method for NVARCHAR and NCHAR columns", "committedDate": "2020-02-27T12:18:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTIzMzc0Mg==", "url": "https://github.com/Talend/tdi-studio-se/pull/4491#discussion_r385233742", "bodyText": "Like in the code upper, use the style \"constant.equals(var)\"\nif(\"String\".equals(typeToGenerate) {\nif (\"NVARCHAR\".equalsIgnoreCase(column.dataType) || \n\nIt won't fail if a value is null (and it's hard to see if it can be or not with the function size).", "author": "clesaec", "createdAt": "2020-02-27T16:46:45Z", "path": "main/plugins/org.talend.designer.components.localprovider/components/templates/db_output_bulk.skeleton", "diffHunk": "@@ -2062,7 +2062,13 @@ public class CLASS {\n                     setStmt.append(prefix + cid + \".setNull(\" + index + dynamic + \", java.sql.Types.DATE);\\r\\n\");\n                 }\n                 setStmt.append(\"}\\r\\n\");\n-            } else {\n+            } else if(typeToGenerate.equals(\"String\")) {", "originalCommit": "ff2b47851374a0111d4f5d2855fc20d616bb663a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTk3OA==", "url": "https://github.com/Talend/tdi-studio-se/pull/4491#discussion_r385565978", "bodyText": "I tested \"String \" type the same way as Date and Char/Character types are tested a few lines above. (cf lines 2007 and 2019).", "author": null, "createdAt": "2020-02-28T08:34:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTIzMzc0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYwMzI4MQ==", "url": "https://github.com/Talend/tdi-studio-se/pull/4491#discussion_r385603281", "bodyText": "What i read on line 2059 is if (\"TIME\".equals(dbType)) {\n(is it not better to correct line 2007 & 2019 ?) typeToGenerate var is input in function call, nothing tell that it can't be null.", "author": "clesaec", "createdAt": "2020-02-28T09:56:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTIzMzc0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYwODQ3OA==", "url": "https://github.com/Talend/tdi-studio-se/pull/4491#discussion_r385608478", "bodyText": "It is the not the same variable that is checked (dbType vs typeToGenerate). \"typeToGenerate\" is always tested as I did it (and that's why I did it this way). And I won't \"correct\" something that isn't the scope of the issue.", "author": null, "createdAt": "2020-02-28T10:06:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTIzMzc0Mg=="}], "type": "inlineReview"}, {"oid": "f0b6ba96254566679c62610a80107d20f7141e24", "url": "https://github.com/Talend/tdi-studio-se/commit/f0b6ba96254566679c62610a80107d20f7141e24", "message": "TDI-43764 : MsSQL NVARCHAR\n\nUse setNString method for NVARCHAR and NCHAR columns", "committedDate": "2020-03-04T13:32:03Z", "type": "commit"}]}