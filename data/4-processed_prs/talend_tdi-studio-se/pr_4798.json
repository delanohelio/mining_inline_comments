{"pr_number": 4798, "pr_title": "TDI-44342 : Ignore microseconds in BigQuery datetime", "pr_createdAt": "2020-06-10T11:44:19Z", "pr_url": "https://github.com/Talend/tdi-studio-se/pull/4798", "timeline": [{"oid": "4f43bab7002f6b0b3e7640aca3ba5e0502f29ff1", "url": "https://github.com/Talend/tdi-studio-se/commit/4f43bab7002f6b0b3e7640aca3ba5e0502f29ff1", "message": "TDI-44342 : Ignore microseconds in BigQuery datetime", "committedDate": "2020-06-10T11:35:52Z", "type": "commit"}, {"oid": "bcc01814b0e1e149ef4b46489b1c502746c21ff4", "url": "https://github.com/Talend/tdi-studio-se/commit/bcc01814b0e1e149ef4b46489b1c502746c21ff4", "message": "TDI-44342 : Ignore microseconds in BigQuery datetime\n\nFixed for BigQuerySQLRow component", "committedDate": "2020-06-16T09:50:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc4MTQyMA==", "url": "https://github.com/Talend/tdi-studio-se/pull/4798#discussion_r440781420", "bodyText": "if match is for six last char, put regexp with $ at the end : \".*\\.\\d{6}$\" => more efficient and more precise", "author": "clesaec", "createdAt": "2020-06-16T11:32:35Z", "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQueryInput/tBigQueryInput_begin.javajet", "diffHunk": "@@ -529,7 +529,12 @@\n \t\t\t\t\t\t\t\t\t%>\n \n \t\t\t\t\t\t\t\t\t\tif (value_<%=cid%>.toString().contains(\"-\")) {\n-\t\t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = ParserUtils.parseTo_Date(value_<%=cid%>.toString(),<%=patternValue%>);\n+\t\t\t\t\t\t\t\t\t\t\tString sValue_<%=cid%> = value_<%=cid%>.toString();\n+\t\t\t\t\t\t\t\t\t\t\tif (sValue_<%=cid%>.matches(\".*\\\\.\\\\d{6}\")) {", "originalCommit": "bcc01814b0e1e149ef4b46489b1c502746c21ff4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc4MTg5Mw==", "url": "https://github.com/Talend/tdi-studio-se/pull/4798#discussion_r440781893", "bodyText": "same for regexp", "author": "clesaec", "createdAt": "2020-06-16T11:33:31Z", "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQuerySQLRow/tBigQuerySQLRow_main.javajet", "diffHunk": "@@ -183,8 +183,18 @@\n \t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = value_<%=cid%>;\n \t\t\t\t\t\t\t\t\t<%\t\t\n \t\t\t\t\t\t\t\t\t} else if(javaType == JavaTypesManager.DATE) {\t\t\t\t\t\t\n-\t\t\t\t\t\t\t\t\t%>\t\t\t\t\t\n-\t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = ParserUtils.parseTo_Date(value_<%=cid%>.toString());\t\t\t\t\n+\t\t\t\t\t\t\t\t\t%>\n+\t\t\t\t\t\t\t\t\t\tif (value_<%=cid%>.toString().contains(\"-\")) {\n+\t\t\t\t\t\t\t\t\t\t\tString sValue_<%=cid%> = value_<%=cid%>.toString();\n+\t\t\t\t\t\t\t\t\t\t\tif (sValue_<%=cid%>.matches(\".*\\\\.\\\\d{6}\")) {", "originalCommit": "bcc01814b0e1e149ef4b46489b1c502746c21ff4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc4Mjk0OA==", "url": "https://github.com/Talend/tdi-studio-se/pull/4798#discussion_r440782948", "bodyText": "Switch if and String sValu... to avoid \"toString\" twice call.\nExplain in a comment contains(\"-\") => what does it means if it contains minus char", "author": "clesaec", "createdAt": "2020-06-16T11:35:39Z", "path": "main/plugins/org.talend.designer.components.localprovider/components/tBigQuerySQLRow/tBigQuerySQLRow_main.javajet", "diffHunk": "@@ -183,8 +183,18 @@\n \t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = value_<%=cid%>;\n \t\t\t\t\t\t\t\t\t<%\t\t\n \t\t\t\t\t\t\t\t\t} else if(javaType == JavaTypesManager.DATE) {\t\t\t\t\t\t\n-\t\t\t\t\t\t\t\t\t%>\t\t\t\t\t\n-\t\t\t\t\t\t\t\t\t\t<%=connName%>.<%=columnName%> = ParserUtils.parseTo_Date(value_<%=cid%>.toString());\t\t\t\t\n+\t\t\t\t\t\t\t\t\t%>\n+\t\t\t\t\t\t\t\t\t\tif (value_<%=cid%>.toString().contains(\"-\")) {", "originalCommit": "bcc01814b0e1e149ef4b46489b1c502746c21ff4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}