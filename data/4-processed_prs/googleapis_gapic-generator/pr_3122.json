{"pr_number": 3122, "pr_title": "bazel: Update `gapic_assembly_pkg` rules surface", "pr_createdAt": "2020-03-06T06:21:23Z", "pr_url": "https://github.com/googleapis/gapic-generator/pull/3122", "timeline": [{"oid": "3ef00e708fe34fa9d783d4df9e7fead0da3a5608", "url": "https://github.com/googleapis/gapic-generator/commit/3ef00e708fe34fa9d783d4df9e7fead0da3a5608", "message": "bazel: Update `gapic_assembly_pkg` rules surface\n\nAdd `assembly_name` attribute. This allows us to simplify the `name` attribute value and as result simplify and unify command used to generate the final package.\n\nFor example\ncoommand before:\n`bazel build //google/cloud/language/v1:csharp`\ncommand after:\n`bazel build //google/cloud/language/v1:google-cloud-language-v1-csharp`", "committedDate": "2020-03-06T06:19:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk3MzU0NQ==", "url": "https://github.com/googleapis/gapic-generator/pull/3122#discussion_r388973545", "bodyText": "Is it possible that Ads wants to use this new feature, but we are encoding \"cloud\" into the package names?", "author": "noahdietz", "createdAt": "2020-03-06T15:36:14Z", "path": "rules_gapic/csharp/csharp_gapic_pkg.bzl", "diffHunk": "@@ -74,11 +74,14 @@ _csharp_gapic_src_pkg = rule(\n     implementation = _csharp_gapic_src_pkg_impl,\n )\n \n-def csharp_gapic_assembly_pkg(name, deps, **kwargs):\n+def csharp_gapic_assembly_pkg(name, deps, assembly_name = None, **kwargs):\n+    package_dir = name\n+    if assembly_name:\n+        package_dir = \"google-cloud-%s-%s\" % (assembly_name, name)", "originalCommit": "3ef00e708fe34fa9d783d4df9e7fead0da3a5608", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEyMTEwMA==", "url": "https://github.com/googleapis/gapic-generator/pull/3122#discussion_r389121100", "bodyText": "Ads may keep using it in the backward-compatible way, i.e. omitting the assembly_name prefix such that the name itself will be used for package_dir (and they can specify anything there with or without cloud prefix).", "author": "vam-google", "createdAt": "2020-03-06T20:12:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODk3MzU0NQ=="}], "type": "inlineReview"}]}