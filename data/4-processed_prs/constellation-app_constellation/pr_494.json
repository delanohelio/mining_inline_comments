{"pr_number": 494, "pr_title": "Import delimiter feedback message", "pr_createdAt": "2020-05-11T03:03:31Z", "pr_url": "https://github.com/constellation-app/constellation/pull/494", "timeline": [{"oid": "c94f82cc8d5d9a8f90b14d4a5113aab3cdee5e21", "url": "https://github.com/constellation-app/constellation/commit/c94f82cc8d5d9a8f90b14d4a5113aab3cdee5e21", "message": "Added feedack dialog for importing delimited file", "committedDate": "2020-05-11T02:09:49Z", "type": "commit"}, {"oid": "d2b287303ab2bf2a906ac53119b869152bde83bb", "url": "https://github.com/constellation-app/constellation/commit/d2b287303ab2bf2a906ac53119b869152bde83bb", "message": "Add feedback dialog for delimter importer", "committedDate": "2020-05-11T02:25:54Z", "type": "commit"}, {"oid": "5c274065353a71b7188d7c5f900791fcca8b0dbc", "url": "https://github.com/constellation-app/constellation/commit/5c274065353a71b7188d7c5f900791fcca8b0dbc", "message": "Updated whatsnew and changelog to reflect changes in the delimiter importer", "committedDate": "2020-05-11T03:00:26Z", "type": "commit"}, {"oid": "916c4a1c80a834e6ebf51265a24d563294cd0f5e", "url": "https://github.com/constellation-app/constellation/commit/916c4a1c80a834e6ebf51265a24d563294cd0f5e", "message": "Merge branch 'master' into ImportDelimeterFeedbackMessage", "committedDate": "2020-05-11T03:05:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc1OTMzNQ==", "url": "https://github.com/constellation-app/constellation/pull/494#discussion_r422759335", "bodyText": "rogue 'i'", "author": "antares1470", "createdAt": "2020-05-11T03:25:35Z", "path": "CoreFunctionality/src/au/gov/asd/tac/constellation/functionality/whatsnew/whatsnew.txt", "diffHunk": "@@ -1,6 +1,9 @@\n-== 3030-12-31 Getting Started\n+i== 3030-12-31 Getting Started", "originalCommit": "916c4a1c80a834e6ebf51265a24d563294cd0f5e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc1OTQ1Mw==", "url": "https://github.com/constellation-app/constellation/pull/494#discussion_r422759453", "bodyText": "change the order of the modifiers to private static final", "author": "antares1470", "createdAt": "2020-05-11T03:26:11Z", "path": "CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/delimited/ActionPane.java", "diffHunk": "@@ -33,8 +40,24 @@\n public class ActionPane extends BorderPane {\n     \n     private static final Logger LOGGER = Logger.getLogger(ActionPane.class.getName());\n+    final private static String SUCCESS_ICON_PATH = \"au/gov/asd/tac/constellation/plugins/importexport/delimited/resources/success.jpg\";", "originalCommit": "916c4a1c80a834e6ebf51265a24d563294cd0f5e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc2MDMwMg==", "url": "https://github.com/constellation-app/constellation/pull/494#discussion_r422760302", "bodyText": "Probably would be nice to have a log here as well", "author": "antares1470", "createdAt": "2020-05-11T03:30:19Z", "path": "CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/delimited/ActionPane.java", "diffHunk": "@@ -57,12 +80,26 @@ public void handle(ActionEvent t) {\n             @Override\n             public void handle(ActionEvent t) {\n                 try {\n-                    importController.processImport();\n+                    \n+                    List<File> importedFiles = importController.processImport();\n+                    String[] filenames = new String[importedFiles.size()];\n+                    long noOfRows = 0;\n+                    for (int i = 0; i < importedFiles.size(); i++) {\n+                        filenames[i] = importedFiles.get(i).getName();\n+                        Path path = importedFiles.get(i).toPath();\n+                        noOfRows += Files.lines(path).count();\n+                    }\n+                    displayAlert(\"Success\", \"Successfully imported \"+ noOfRows\n+                            +\" rows from the following file(s):\\n\"+String.join(\"\\n\", filenames), true);\n+                    \n                 } catch (IOException ex) {\n                     LOGGER.log(Level.SEVERE, ex.getLocalizedMessage(), ex);\n+                    displayAlert(\"Import Failed\", ex.getLocalizedMessage(), false);\n                 } catch (InterruptedException ex) {\n                     Thread.currentThread().interrupt();", "originalCommit": "916c4a1c80a834e6ebf51265a24d563294cd0f5e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc2MDY0Mw==", "url": "https://github.com/constellation-app/constellation/pull/494#discussion_r422760643", "bodyText": "Probably be good to have a log here as well so remove this catch and turn the IO exception catch into a multi-catch with Plugin exceptions", "author": "antares1470", "createdAt": "2020-05-11T03:32:00Z", "path": "CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/delimited/ActionPane.java", "diffHunk": "@@ -57,12 +80,26 @@ public void handle(ActionEvent t) {\n             @Override\n             public void handle(ActionEvent t) {\n                 try {\n-                    importController.processImport();\n+                    \n+                    List<File> importedFiles = importController.processImport();\n+                    String[] filenames = new String[importedFiles.size()];\n+                    long noOfRows = 0;\n+                    for (int i = 0; i < importedFiles.size(); i++) {\n+                        filenames[i] = importedFiles.get(i).getName();\n+                        Path path = importedFiles.get(i).toPath();\n+                        noOfRows += Files.lines(path).count();\n+                    }\n+                    displayAlert(\"Success\", \"Successfully imported \"+ noOfRows\n+                            +\" rows from the following file(s):\\n\"+String.join(\"\\n\", filenames), true);\n+                    \n                 } catch (IOException ex) {\n                     LOGGER.log(Level.SEVERE, ex.getLocalizedMessage(), ex);\n+                    displayAlert(\"Import Failed\", ex.getLocalizedMessage(), false);\n                 } catch (InterruptedException ex) {\n                     Thread.currentThread().interrupt();\n+                    displayAlert(\"import Failed\", ex.getLocalizedMessage(), false);\n                 } catch (PluginException ex) {", "originalCommit": "916c4a1c80a834e6ebf51265a24d563294cd0f5e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjc2MDg4Mw==", "url": "https://github.com/constellation-app/constellation/pull/494#discussion_r422760883", "bodyText": "Note this change in CHANGELOG", "author": "antares1470", "createdAt": "2020-05-11T03:33:04Z", "path": "CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/delimited/ImportController.java", "diffHunk": "@@ -385,7 +385,7 @@ public String showSetDefaultValueDialog(final String attributeName, final String\n         return configurationPane.createDefinitions();\n     }\n \n-    public void processImport() throws IOException, InterruptedException, PluginException {\n+    public List<File> processImport() throws IOException, InterruptedException, PluginException {", "originalCommit": "916c4a1c80a834e6ebf51265a24d563294cd0f5e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7d0a77b390f36ebdbaf8dd021c4f1048736cf4eb", "url": "https://github.com/constellation-app/constellation/commit/7d0a77b390f36ebdbaf8dd021c4f1048736cf4eb", "message": "Update What's new \n\nRemoved random i #vimming", "committedDate": "2020-05-11T07:02:08Z", "type": "commit"}, {"oid": "ba11c70691110c3a44099af7521eb18229634447", "url": "https://github.com/constellation-app/constellation/commit/ba11c70691110c3a44099af7521eb18229634447", "message": "Update CHANGELOG\n\nReflect changes in the ImportController expected output.", "committedDate": "2020-05-11T07:04:24Z", "type": "commit"}, {"oid": "01f7488903225ca7d395035b064e288d4fc43b9f", "url": "https://github.com/constellation-app/constellation/commit/01f7488903225ca7d395035b064e288d4fc43b9f", "message": "Updated ActionPane with suggestions \n\nFixed final private static modifier to private static final.\r\nMoved the PluginException with the IOException \r\nAdded a log event for the InterruptedException", "committedDate": "2020-05-11T07:09:30Z", "type": "commit"}, {"oid": "5643a9f8327a1591df5cf7f3631074d308db9f4e", "url": "https://github.com/constellation-app/constellation/commit/5643a9f8327a1591df5cf7f3631074d308db9f4e", "message": "Merge branch 'master' into ImportDelimeterFeedbackMessage", "committedDate": "2020-05-11T07:13:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk2ODkzOA==", "url": "https://github.com/constellation-app/constellation/pull/494#discussion_r422968938", "bodyText": "You could add finals all through here, including the exceptions.", "author": "cygnus-x-1", "createdAt": "2020-05-11T11:20:02Z", "path": "CoreImportExportPlugins/src/au/gov/asd/tac/constellation/plugins/importexport/delimited/ActionPane.java", "diffHunk": "@@ -57,12 +80,25 @@ public void handle(ActionEvent t) {\n             @Override\n             public void handle(ActionEvent t) {\n                 try {\n-                    importController.processImport();\n-                } catch (IOException ex) {\n+                    \n+                    List<File> importedFiles = importController.processImport();", "originalCommit": "5643a9f8327a1591df5cf7f3631074d308db9f4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1db37a8d0df4977ef5c885efb4c22ed82c326c9d", "url": "https://github.com/constellation-app/constellation/commit/1db37a8d0df4977ef5c885efb4c22ed82c326c9d", "message": "Added finals to importer delimited actionPane", "committedDate": "2020-05-12T01:15:54Z", "type": "commit"}, {"oid": "cbdaca5520cde74ff60cf221638eb611553e4f2e", "url": "https://github.com/constellation-app/constellation/commit/cbdaca5520cde74ff60cf221638eb611553e4f2e", "message": "Merge branch 'master' into ImportDelimeterFeedbackMessage", "committedDate": "2020-05-12T03:20:10Z", "type": "commit"}]}