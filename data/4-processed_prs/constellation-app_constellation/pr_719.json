{"pr_number": 719, "pr_title": ":bug: Analytic View results refresh fix", "pr_createdAt": "2020-07-17T00:22:53Z", "pr_url": "https://github.com/constellation-app/constellation/pull/719", "timeline": [{"oid": "5cb15b637bbd00c0d97382a1c9404f30709f0e3b", "url": "https://github.com/constellation-app/constellation/commit/5cb15b637bbd00c0d97382a1c9404f30709f0e3b", "message": ":bug: track current graph to avoid unneccesary refresh", "committedDate": "2020-07-17T00:16:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MDQxMA==", "url": "https://github.com/constellation-app/constellation/pull/719#discussion_r456190410", "bodyText": "There is potential for a memory leak to appear if the currentGraph is not set to null when the graph closes. I am speculating but I will do some testing to confirm @aldebaran30701.", "author": "arcturus2", "createdAt": "2020-07-17T02:55:59Z", "path": "CoreAnalyticView/src/au/gov/asd/tac/constellation/views/analyticview/AnalyticViewTopComponent.java", "diffHunk": "@@ -74,6 +75,7 @@\n     private final AnalyticViewPane analyticViewPane;\n     private final AnalyticController analyticController;\n     private boolean suppressed = false;\n+    private Graph currentGraph = null;", "originalCommit": "5cb15b637bbd00c0d97382a1c9404f30709f0e3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5Mzk0Ng==", "url": "https://github.com/constellation-app/constellation/pull/719#discussion_r456193946", "bodyText": "How does it sound if I store the current graph's ID instead?", "author": "aldebaran30701", "createdAt": "2020-07-17T03:11:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MDQxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMTI1Mg==", "url": "https://github.com/constellation-app/constellation/pull/719#discussion_r456201252", "bodyText": "That sounds like a better idea though we haven't depended on the graph ID for much so I am not sure if it is the best approach. If it works then that does sound like a really good way forward and perhaps we can adopt it across more of the framework.\nI remember seeing the graph ID change after plugins run (but I need to double check my memory). If that's the case (which I don't think so) would be a problem.", "author": "arcturus2", "createdAt": "2020-07-17T03:42:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MDQxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk2NTgzNQ==", "url": "https://github.com/constellation-app/constellation/pull/719#discussion_r456965835", "bodyText": "Hi @cygnus-x-1,  Would you be able to confirm for us if the graph id changes between plugin runs? Or subsequently offer a different way of tracking the current graph without memory leaks.", "author": "aldebaran30701", "createdAt": "2020-07-19T22:55:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MDQxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk3MTkzMA==", "url": "https://github.com/constellation-app/constellation/pull/719#discussion_r456971930", "bodyText": "@arcturus2 @aldebaran30701 I don't know whether or not it helps avoid memory leaks but having played with the rest api previously, I believe the graph Id remains the same between plugin runs (even between Constellation loads). It's been a little while though so I don't remember entirely", "author": "antares1470", "createdAt": "2020-07-19T23:55:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MDQxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk3NDEwMg==", "url": "https://github.com/constellation-app/constellation/pull/719#discussion_r456974102", "bodyText": "...(even between Constellation loads)\n\nNot sure on this bit @antares1470. The graph UUID is not stored in the star file so I believe a random one is issued on load.", "author": "arcturus2", "createdAt": "2020-07-20T00:14:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MDQxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk3OTg1OQ==", "url": "https://github.com/constellation-app/constellation/pull/719#discussion_r456979859", "bodyText": "I believe a graph id should be reliable as long as that graph is in memory. If the graph is closed and opened again, it'll have a new id.", "author": "cygnus-x-1", "createdAt": "2020-07-20T00:58:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MDQxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk4MjgzOA==", "url": "https://github.com/constellation-app/constellation/pull/719#discussion_r456982838", "bodyText": "Right. Like I said, it's been a while so I was only going off the top of my head", "author": "antares1470", "createdAt": "2020-07-20T01:18:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MDQxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njk4NDc4NA==", "url": "https://github.com/constellation-app/constellation/pull/719#discussion_r456984784", "bodyText": "If the graph is closed and opened again, it'll have a new id\n\nI'd think that would cross over into a future state implementation. This (keeping the id) would work for the sake of not clearing the results table.", "author": "aldebaran30701", "createdAt": "2020-07-20T01:30:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5MDQxMA=="}], "type": "inlineReview"}, {"oid": "ab3e5c29183263cb4ed1f09e875017393238a85d", "url": "https://github.com/constellation-app/constellation/commit/ab3e5c29183263cb4ed1f09e875017393238a85d", "message": "Switch currentGraph to use string instead of object", "committedDate": "2020-07-20T22:40:18Z", "type": "commit"}]}