{"pr_number": 507, "pr_title": "Table view column selection split in new menu", "pr_createdAt": "2020-05-12T05:52:03Z", "pr_url": "https://github.com/constellation-app/constellation/pull/507", "timeline": [{"oid": "4adaede2f2f3acbcd6bb182ea49f31513752aa3d", "url": "https://github.com/constellation-app/constellation/commit/4adaede2f2f3acbcd6bb182ea49f31513752aa3d", "message": "Initial design\n\nTable View Column Selection - Split Attributes into Source/Destination/Transaction (#374)", "committedDate": "2020-05-08T07:17:35Z", "type": "commit"}, {"oid": "94b037d33c5e9ea040ce0ec22de432e1fb4d8022", "url": "https://github.com/constellation-app/constellation/commit/94b037d33c5e9ea040ce0ec22de432e1fb4d8022", "message": "Option 2 - Spilt menus\n\nTable View Column Selection - Split Attributes into Source/Destination/Transaction (#374)", "committedDate": "2020-05-12T05:17:51Z", "type": "commit"}, {"oid": "e2443a56219e200805518bb6f0fd7a06029268e6", "url": "https://github.com/constellation-app/constellation/commit/e2443a56219e200805518bb6f0fd7a06029268e6", "message": "Fix sonarcloud issues and code refactoring.", "committedDate": "2020-05-12T07:39:48Z", "type": "commit"}, {"oid": "05a7228e1465dee6abd41670019191815a6738c2", "url": "https://github.com/constellation-app/constellation/commit/05a7228e1465dee6abd41670019191815a6738c2", "message": "Fix the issue with source and destination filters", "committedDate": "2020-05-19T01:04:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4MTg4Ng==", "url": "https://github.com/constellation-app/constellation/pull/507#discussion_r426981886", "bodyText": "I'm not entirely familiar with ImageViews so feel free to correct me I'm wrong. Given the context that these 3 seem to be used, you may only need to create one instance of this ImageView which can be used for all of 3 rather than creating one for each", "author": "antares1470", "createdAt": "2020-05-19T01:41:40Z", "path": "CoreTableView/src/au/gov/asd/tac/constellation/views/tableview2/TableViewPane.java", "diffHunk": "@@ -124,6 +125,9 @@\n     private static final ImageView COPY_ICON = new ImageView(UserInterfaceIconProvider.COPY.buildImage(16));\n     private static final ImageView EXPORT_ICON = new ImageView(UserInterfaceIconProvider.UPLOAD.buildImage(16));\n     private static final ImageView SETTINGS_ICON = new ImageView(UserInterfaceIconProvider.SETTINGS.buildImage(16));\n+    private static final ImageView MENU_ICON_SOURCE = new ImageView(UserInterfaceIconProvider.MENU.buildImage(16));\n+    private static final ImageView MENU_ICON_DESTINATION = new ImageView(UserInterfaceIconProvider.MENU.buildImage(16));\n+    private static final ImageView MENU_ICON_TRANSACTION = new ImageView(UserInterfaceIconProvider.MENU.buildImage(16));", "originalCommit": "05a7228e1465dee6abd41670019191815a6738c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4NTg2MA==", "url": "https://github.com/constellation-app/constellation/pull/507#discussion_r426985860", "bodyText": "I had the same idea, but for some reason I cannot reuse the same ImageView. The image was appearing only on the last place I used it.", "author": "Auriga2", "createdAt": "2020-05-19T01:56:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4MTg4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk5NDA4Mw==", "url": "https://github.com/constellation-app/constellation/pull/507#discussion_r426994083", "bodyText": "(Same when I tried to reuse the same filter on 3 sub menus- it works only on the last place)", "author": "Auriga2", "createdAt": "2020-05-19T02:28:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4MTg4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzAwNDU5NQ==", "url": "https://github.com/constellation-app/constellation/pull/507#discussion_r427004595", "bodyText": "Yep that makes sense", "author": "antares1470", "createdAt": "2020-05-19T03:10:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4MTg4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4MjQzMQ==", "url": "https://github.com/constellation-app/constellation/pull/507#discussion_r426982431", "bodyText": "For these 3, it is better to declare them simply as Lists and instantiate as an arraylist.\ni.e. final List<CustomMenuItem> foo = new ArrayList<>();", "author": "antares1470", "createdAt": "2020-05-19T01:43:38Z", "path": "CoreTableView/src/au/gov/asd/tac/constellation/views/tableview2/TableViewPane.java", "diffHunk": "@@ -319,23 +322,25 @@ private ToolBar initToolbar() {\n \n     private ContextMenu initColumnVisibilityContextMenu() {\n         final ContextMenu cm = new ContextMenu();\n-        final ArrayList<CustomMenuItem> columnCheckboxes = new ArrayList<>();\n-        \n-        final Label columnFilterLabel = new Label(\"Filter:\");\n-        final TextField columnFilterTextField = new TextField ();\n-        final HBox filterBox = new HBox();\n-        filterBox.getChildren().addAll(columnFilterLabel, columnFilterTextField);\n-        \n-        final CustomMenuItem columnFilter = new CustomMenuItem(filterBox);\n-        columnFilter.setHideOnClick(false);\n-        columnFilterTextField.setOnKeyReleased(event -> {\n-            final String filterTerm = columnFilterTextField.getText().toLowerCase().trim();\n-            columnCheckboxes.forEach(item -> {\n-                final String columnName = item.getId().toLowerCase();\n-                item.setVisible(filterTerm.isBlank() || columnName.contains(filterTerm));\n-            });\n-        });\n-        \n+        final ArrayList<CustomMenuItem> columnCheckboxesSource = new ArrayList<>();\n+        final ArrayList<CustomMenuItem> columnCheckboxesDestination = new ArrayList<>();\n+        final ArrayList<CustomMenuItem> columnCheckboxesTransaction = new ArrayList<>();", "originalCommit": "05a7228e1465dee6abd41670019191815a6738c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk5NDExMQ==", "url": "https://github.com/constellation-app/constellation/pull/507#discussion_r426994111", "bodyText": "Fixed.", "author": "Auriga2", "createdAt": "2020-05-19T02:28:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4MjQzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4NDI5Nw==", "url": "https://github.com/constellation-app/constellation/pull/507#discussion_r426984297", "bodyText": "I think this was done in the other PR but for readability combine these 3 lines into 1:\n...stream().map(c -> {", "author": "antares1470", "createdAt": "2020-05-19T01:50:25Z", "path": "CoreTableView/src/au/gov/asd/tac/constellation/views/tableview2/TableViewPane.java", "diffHunk": "@@ -827,17 +912,17 @@ private void loadPreferences() {\n                 // Populate orderedColumns with full column ThreeTuples corresponding to entires in newVolumnOrder and call updateVisibleColumns\n                 // to update table.\n                 final List<ThreeTuple<String, Attribute, TableColumn<ObservableList<String>, String>>> orderedColumns\n-                    = newColumnOrder.stream()\n-                        .map(c ->\n-                            {\n-                                for (ThreeTuple<String, Attribute, TableColumn<ObservableList<String>, String>> col : columnIndex) {\n-                                    if (c.getText().equals(col.getThird().getText())) {\n-                                        return col;\n+                        = newColumnOrder.stream()\n+                                .map(c\n+                                        -> {", "originalCommit": "05a7228e1465dee6abd41670019191815a6738c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk5NDEzOQ==", "url": "https://github.com/constellation-app/constellation/pull/507#discussion_r426994139", "bodyText": "Yeah, caused by Alt+Shift+F\nFixed now.", "author": "Auriga2", "createdAt": "2020-05-19T02:29:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4NDI5Nw=="}], "type": "inlineReview"}, {"oid": "e8294b085f44f4e3645d08aa070a3a433ffd86f1", "url": "https://github.com/constellation-app/constellation/commit/e8294b085f44f4e3645d08aa070a3a433ffd86f1", "message": "Minor code improvements", "committedDate": "2020-05-19T02:45:13Z", "type": "commit"}, {"oid": "8e372e5a4c39bfffb01cc11399e809a858cafb7a", "url": "https://github.com/constellation-app/constellation/commit/8e372e5a4c39bfffb01cc11399e809a858cafb7a", "message": "Minor code improvement", "committedDate": "2020-05-19T02:46:38Z", "type": "commit"}, {"oid": "1741bcbc43a7e6f3ed9d6706e1581b599c4979f6", "url": "https://github.com/constellation-app/constellation/commit/1741bcbc43a7e6f3ed9d6706e1581b599c4979f6", "message": "Merge branch 'master' into Table-View-Column-Selection-SplitInNewMenu", "committedDate": "2020-05-19T22:35:32Z", "type": "commit"}]}