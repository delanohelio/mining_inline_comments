{"pr_number": 795, "pr_title": "Feature/copy paste from histogram #741", "pr_createdAt": "2020-08-19T06:33:31Z", "pr_url": "https://github.com/constellation-app/constellation/pull/795", "timeline": [{"oid": "81cc02ade5fe7c45537db7b06c6d5cc3ca41b8a8", "url": "https://github.com/constellation-app/constellation/commit/81cc02ade5fe7c45537db7b06c6d5cc3ca41b8a8", "message": "Copy paste Histrogram functionality added\n\nCtrl + C and right click context menu added.", "committedDate": "2020-08-10T05:22:05Z", "type": "commit"}, {"oid": "e01d6aeb87a220dffbc2eb330b1cc29d83fe1d60", "url": "https://github.com/constellation-app/constellation/commit/e01d6aeb87a220dffbc2eb330b1cc29d83fe1d60", "message": "Merge branch 'master' into feature/Copy-paste-from-Histogram-#741", "committedDate": "2020-08-10T05:23:35Z", "type": "commit"}, {"oid": "c80b6b686cc61e789033bf3728d7606a74985c42", "url": "https://github.com/constellation-app/constellation/commit/c80b6b686cc61e789033bf3728d7606a74985c42", "message": "Update HistogramDisplay.java", "committedDate": "2020-08-18T07:51:25Z", "type": "commit"}, {"oid": "e117ab913ef4aac6356ca28e860c00eb2a05c9b2", "url": "https://github.com/constellation-app/constellation/commit/e117ab913ef4aac6356ca28e860c00eb2a05c9b2", "message": "Merge branch 'master' into feature/Copy-paste-from-Histogram-#741", "committedDate": "2020-08-18T07:52:00Z", "type": "commit"}, {"oid": "c85d7760ead7d4c5b69d4be37471d78a40b4a7cd", "url": "https://github.com/constellation-app/constellation/commit/c85d7760ead7d4c5b69d4be37471d78a40b4a7cd", "message": "Update HistogramDisplay.java", "committedDate": "2020-08-19T06:16:17Z", "type": "commit"}, {"oid": "659a51c2bc062981d3d9b926140811ce58b025e9", "url": "https://github.com/constellation-app/constellation/commit/659a51c2bc062981d3d9b926140811ce58b025e9", "message": "Merge branch 'master' into feature/Copy-paste-from-Histogram-#741", "committedDate": "2020-08-19T06:17:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYyMjY5OA==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r473622698", "bodyText": "final", "author": "antares1470", "createdAt": "2020-08-20T05:54:27Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -99,24 +106,41 @@\n     private boolean shiftDown;\n     private boolean controlDown;\n     private boolean binCollectionOutOfDate = true;\n+    private final JPopupMenu copyMenu = new JPopupMenu();\n \n     public HistogramDisplay(HistogramTopComponent topComponent) {\n-\n         this.topComponent = topComponent;\n \n         initializeSettings();\n         initializeListeners();\n+        \n+        JMenuItem copyValuesMenuItem = new JMenuItem(\"Copy Selected Property Values\");", "originalCommit": "659a51c2bc062981d3d9b926140811ce58b025e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYyMjg4NA==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r473622884", "bodyText": "final", "author": "antares1470", "createdAt": "2020-08-20T05:54:45Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -99,24 +106,41 @@\n     private boolean shiftDown;\n     private boolean controlDown;\n     private boolean binCollectionOutOfDate = true;\n+    private final JPopupMenu copyMenu = new JPopupMenu();\n \n     public HistogramDisplay(HistogramTopComponent topComponent) {\n-\n         this.topComponent = topComponent;\n \n         initializeSettings();\n         initializeListeners();\n+        \n+        JMenuItem copyValuesMenuItem = new JMenuItem(\"Copy Selected Property Values\");\n+        copyValuesMenuItem.addActionListener(e -> {         \n+            copySelectedToClipboard(false);\n+        });\n+        copyMenu.add(copyValuesMenuItem);\n+        \n+        JMenuItem copyValuesAndCountsMenuItem = new JMenuItem(\"Copy Selected Property Values & Counts\");", "originalCommit": "659a51c2bc062981d3d9b926140811ce58b025e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYyMzMxNQ==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r473623315", "bodyText": "merge this if statement with the above", "author": "antares1470", "createdAt": "2020-08-20T05:55:25Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -486,60 +510,99 @@ private int getBarAtPoint(Point p, boolean bounded) {\n \n         return n;\n     }\n+    \n+    /**\n+     * Copy the values of the selected bars on the Histogram to the clipboard.\n+     * <p>\n+     * Iterates through the current collection of bins, bins representing the bars,\n+     * and determines if they are selected by checking their selectedCount value,\n+     * 1 if selected, 0 if not selected.\n+     * \n+     * @param includeCounts True if the counts corresponding to the values\n+     * are also to be copied to the clipboard.\n+     */\n+    private void copySelectedToClipboard(boolean includeCounts) {\n+        final StringBuilder buf = new StringBuilder();\n+\n+        for (Bin bin : binCollection.getBins()) {\n+            // Check if the bar(s) on the Histogram are selected.\n+            if (bin.selectedCount > 0) {\n+                final String label = bin.getLabel() != null ? bin.getLabel() : HistogramDisplay.NO_VALUE;\n+                if (includeCounts) {\n+                    buf.append(String.format(\"%s\\t%d\\n\", label, bin.elementCount));\n+                } else {\n+                    buf.append(String.format(\"%s%s\", label, \"\\n\"));\n+                }\n+            }\n+        }\n \n+        final StringSelection ss = new StringSelection(buf.toString());\n+        final Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n+        clipboard.setContents(ss, ConstellationClipboardOwner.getOwner());\n+    }\n+    \n     @Override\n     public void mouseClicked(MouseEvent e) {\n+        if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON3) {", "originalCommit": "659a51c2bc062981d3d9b926140811ce58b025e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYyMzU4Nw==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r473623587", "bodyText": "final", "author": "antares1470", "createdAt": "2020-08-20T05:55:51Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -486,60 +510,99 @@ private int getBarAtPoint(Point p, boolean bounded) {\n \n         return n;\n     }\n+    \n+    /**\n+     * Copy the values of the selected bars on the Histogram to the clipboard.\n+     * <p>\n+     * Iterates through the current collection of bins, bins representing the bars,\n+     * and determines if they are selected by checking their selectedCount value,\n+     * 1 if selected, 0 if not selected.\n+     * \n+     * @param includeCounts True if the counts corresponding to the values\n+     * are also to be copied to the clipboard.\n+     */\n+    private void copySelectedToClipboard(boolean includeCounts) {\n+        final StringBuilder buf = new StringBuilder();\n+\n+        for (Bin bin : binCollection.getBins()) {\n+            // Check if the bar(s) on the Histogram are selected.\n+            if (bin.selectedCount > 0) {\n+                final String label = bin.getLabel() != null ? bin.getLabel() : HistogramDisplay.NO_VALUE;\n+                if (includeCounts) {\n+                    buf.append(String.format(\"%s\\t%d\\n\", label, bin.elementCount));\n+                } else {\n+                    buf.append(String.format(\"%s%s\", label, \"\\n\"));\n+                }\n+            }\n+        }\n \n+        final StringSelection ss = new StringSelection(buf.toString());\n+        final Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n+        clipboard.setContents(ss, ConstellationClipboardOwner.getOwner());\n+    }\n+    \n     @Override\n     public void mouseClicked(MouseEvent e) {\n+        if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON3) {\n+                copyMenu.show(this, e.getX(), e.getY());\n+            }\n+        }\n     }\n \n     @Override\n     public void mousePressed(MouseEvent e) {\n-\n         if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON1) {\n+                Bin[] bins = binCollection.getBins();", "originalCommit": "659a51c2bc062981d3d9b926140811ce58b025e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYyMzg4Nw==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r473623887", "bodyText": "merge if statement with above", "author": "antares1470", "createdAt": "2020-08-20T05:56:17Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -486,60 +510,99 @@ private int getBarAtPoint(Point p, boolean bounded) {\n \n         return n;\n     }\n+    \n+    /**\n+     * Copy the values of the selected bars on the Histogram to the clipboard.\n+     * <p>\n+     * Iterates through the current collection of bins, bins representing the bars,\n+     * and determines if they are selected by checking their selectedCount value,\n+     * 1 if selected, 0 if not selected.\n+     * \n+     * @param includeCounts True if the counts corresponding to the values\n+     * are also to be copied to the clipboard.\n+     */\n+    private void copySelectedToClipboard(boolean includeCounts) {\n+        final StringBuilder buf = new StringBuilder();\n+\n+        for (Bin bin : binCollection.getBins()) {\n+            // Check if the bar(s) on the Histogram are selected.\n+            if (bin.selectedCount > 0) {\n+                final String label = bin.getLabel() != null ? bin.getLabel() : HistogramDisplay.NO_VALUE;\n+                if (includeCounts) {\n+                    buf.append(String.format(\"%s\\t%d\\n\", label, bin.elementCount));\n+                } else {\n+                    buf.append(String.format(\"%s%s\", label, \"\\n\"));\n+                }\n+            }\n+        }\n \n+        final StringSelection ss = new StringSelection(buf.toString());\n+        final Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n+        clipboard.setContents(ss, ConstellationClipboardOwner.getOwner());\n+    }\n+    \n     @Override\n     public void mouseClicked(MouseEvent e) {\n+        if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON3) {\n+                copyMenu.show(this, e.getX(), e.getY());\n+            }\n+        }\n     }\n \n     @Override\n     public void mousePressed(MouseEvent e) {\n-\n         if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON1) {", "originalCommit": "659a51c2bc062981d3d9b926140811ce58b025e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYyNDExMw==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r473624113", "bodyText": "final", "author": "antares1470", "createdAt": "2020-08-20T05:56:38Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -486,60 +510,99 @@ private int getBarAtPoint(Point p, boolean bounded) {\n \n         return n;\n     }\n+    \n+    /**\n+     * Copy the values of the selected bars on the Histogram to the clipboard.\n+     * <p>\n+     * Iterates through the current collection of bins, bins representing the bars,\n+     * and determines if they are selected by checking their selectedCount value,\n+     * 1 if selected, 0 if not selected.\n+     * \n+     * @param includeCounts True if the counts corresponding to the values\n+     * are also to be copied to the clipboard.\n+     */\n+    private void copySelectedToClipboard(boolean includeCounts) {\n+        final StringBuilder buf = new StringBuilder();\n+\n+        for (Bin bin : binCollection.getBins()) {\n+            // Check if the bar(s) on the Histogram are selected.\n+            if (bin.selectedCount > 0) {\n+                final String label = bin.getLabel() != null ? bin.getLabel() : HistogramDisplay.NO_VALUE;\n+                if (includeCounts) {\n+                    buf.append(String.format(\"%s\\t%d\\n\", label, bin.elementCount));\n+                } else {\n+                    buf.append(String.format(\"%s%s\", label, \"\\n\"));\n+                }\n+            }\n+        }\n \n+        final StringSelection ss = new StringSelection(buf.toString());\n+        final Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n+        clipboard.setContents(ss, ConstellationClipboardOwner.getOwner());\n+    }\n+    \n     @Override\n     public void mouseClicked(MouseEvent e) {\n+        if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON3) {\n+                copyMenu.show(this, e.getX(), e.getY());\n+            }\n+        }\n     }\n \n     @Override\n     public void mousePressed(MouseEvent e) {\n-\n         if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON1) {\n+                Bin[] bins = binCollection.getBins();\n \n-            Bin[] bins = binCollection.getBins();\n-\n-            final Point pointOnHistogram = e.getPoint();\n-            final int bar = getBarAtPoint(pointOnHistogram, false);\n+                final Point pointOnHistogram = e.getPoint();\n+                final int bar = getBarAtPoint(pointOnHistogram, false);\n \n-            shiftDown = e.isShiftDown();\n-            controlDown = e.isControlDown();\n+                shiftDown = e.isShiftDown();\n+                controlDown = e.isControlDown();\n \n-            dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n-            dragEnd = bar;\n+                dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n+                dragEnd = bar;\n \n-            binSelectionMode.mousePressed(shiftDown, controlDown, bins, dragStart, dragEnd);\n+                binSelectionMode.mousePressed(shiftDown, controlDown, bins, dragStart, dragEnd);\n \n-            repaint();\n+                repaint();\n+            }\n         }\n     }\n \n     @Override\n     public void mouseDragged(MouseEvent e) {\n         if (binCollection != null) {\n-\n-            Bin[] bins = binCollection.getBins();\n-\n-            final Point pointOnHistogram = e.getPoint();\n-            final int bar = getBarAtPoint(pointOnHistogram, false);\n-            int newDragEnd = bar;\n-            binSelectionMode.mouseDragged(shiftDown, controlDown, bins, dragStart, dragEnd, newDragEnd);\n-            dragEnd = newDragEnd;\n-            repaint();\n+            while (e.getButton() == MouseEvent.BUTTON1) {\n+                Bin[] bins = binCollection.getBins();", "originalCommit": "659a51c2bc062981d3d9b926140811ce58b025e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYyNDMxOA==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r473624318", "bodyText": "final", "author": "antares1470", "createdAt": "2020-08-20T05:56:57Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -486,60 +510,99 @@ private int getBarAtPoint(Point p, boolean bounded) {\n \n         return n;\n     }\n+    \n+    /**\n+     * Copy the values of the selected bars on the Histogram to the clipboard.\n+     * <p>\n+     * Iterates through the current collection of bins, bins representing the bars,\n+     * and determines if they are selected by checking their selectedCount value,\n+     * 1 if selected, 0 if not selected.\n+     * \n+     * @param includeCounts True if the counts corresponding to the values\n+     * are also to be copied to the clipboard.\n+     */\n+    private void copySelectedToClipboard(boolean includeCounts) {\n+        final StringBuilder buf = new StringBuilder();\n+\n+        for (Bin bin : binCollection.getBins()) {\n+            // Check if the bar(s) on the Histogram are selected.\n+            if (bin.selectedCount > 0) {\n+                final String label = bin.getLabel() != null ? bin.getLabel() : HistogramDisplay.NO_VALUE;\n+                if (includeCounts) {\n+                    buf.append(String.format(\"%s\\t%d\\n\", label, bin.elementCount));\n+                } else {\n+                    buf.append(String.format(\"%s%s\", label, \"\\n\"));\n+                }\n+            }\n+        }\n \n+        final StringSelection ss = new StringSelection(buf.toString());\n+        final Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n+        clipboard.setContents(ss, ConstellationClipboardOwner.getOwner());\n+    }\n+    \n     @Override\n     public void mouseClicked(MouseEvent e) {\n+        if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON3) {\n+                copyMenu.show(this, e.getX(), e.getY());\n+            }\n+        }\n     }\n \n     @Override\n     public void mousePressed(MouseEvent e) {\n-\n         if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON1) {\n+                Bin[] bins = binCollection.getBins();\n \n-            Bin[] bins = binCollection.getBins();\n-\n-            final Point pointOnHistogram = e.getPoint();\n-            final int bar = getBarAtPoint(pointOnHistogram, false);\n+                final Point pointOnHistogram = e.getPoint();\n+                final int bar = getBarAtPoint(pointOnHistogram, false);\n \n-            shiftDown = e.isShiftDown();\n-            controlDown = e.isControlDown();\n+                shiftDown = e.isShiftDown();\n+                controlDown = e.isControlDown();\n \n-            dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n-            dragEnd = bar;\n+                dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n+                dragEnd = bar;\n \n-            binSelectionMode.mousePressed(shiftDown, controlDown, bins, dragStart, dragEnd);\n+                binSelectionMode.mousePressed(shiftDown, controlDown, bins, dragStart, dragEnd);\n \n-            repaint();\n+                repaint();\n+            }\n         }\n     }\n \n     @Override\n     public void mouseDragged(MouseEvent e) {\n         if (binCollection != null) {\n-\n-            Bin[] bins = binCollection.getBins();\n-\n-            final Point pointOnHistogram = e.getPoint();\n-            final int bar = getBarAtPoint(pointOnHistogram, false);\n-            int newDragEnd = bar;\n-            binSelectionMode.mouseDragged(shiftDown, controlDown, bins, dragStart, dragEnd, newDragEnd);\n-            dragEnd = newDragEnd;\n-            repaint();\n+            while (e.getButton() == MouseEvent.BUTTON1) {\n+                Bin[] bins = binCollection.getBins();\n+\n+                final Point pointOnHistogram = e.getPoint();\n+                final int bar = getBarAtPoint(pointOnHistogram, false);\n+                int newDragEnd = bar;", "originalCommit": "659a51c2bc062981d3d9b926140811ce58b025e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYyNDQ4OA==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r473624488", "bodyText": "merge if statement with above", "author": "antares1470", "createdAt": "2020-08-20T05:57:13Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -486,60 +510,99 @@ private int getBarAtPoint(Point p, boolean bounded) {\n \n         return n;\n     }\n+    \n+    /**\n+     * Copy the values of the selected bars on the Histogram to the clipboard.\n+     * <p>\n+     * Iterates through the current collection of bins, bins representing the bars,\n+     * and determines if they are selected by checking their selectedCount value,\n+     * 1 if selected, 0 if not selected.\n+     * \n+     * @param includeCounts True if the counts corresponding to the values\n+     * are also to be copied to the clipboard.\n+     */\n+    private void copySelectedToClipboard(boolean includeCounts) {\n+        final StringBuilder buf = new StringBuilder();\n+\n+        for (Bin bin : binCollection.getBins()) {\n+            // Check if the bar(s) on the Histogram are selected.\n+            if (bin.selectedCount > 0) {\n+                final String label = bin.getLabel() != null ? bin.getLabel() : HistogramDisplay.NO_VALUE;\n+                if (includeCounts) {\n+                    buf.append(String.format(\"%s\\t%d\\n\", label, bin.elementCount));\n+                } else {\n+                    buf.append(String.format(\"%s%s\", label, \"\\n\"));\n+                }\n+            }\n+        }\n \n+        final StringSelection ss = new StringSelection(buf.toString());\n+        final Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n+        clipboard.setContents(ss, ConstellationClipboardOwner.getOwner());\n+    }\n+    \n     @Override\n     public void mouseClicked(MouseEvent e) {\n+        if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON3) {\n+                copyMenu.show(this, e.getX(), e.getY());\n+            }\n+        }\n     }\n \n     @Override\n     public void mousePressed(MouseEvent e) {\n-\n         if (binCollection != null) {\n+            if (e.getButton() == MouseEvent.BUTTON1) {\n+                Bin[] bins = binCollection.getBins();\n \n-            Bin[] bins = binCollection.getBins();\n-\n-            final Point pointOnHistogram = e.getPoint();\n-            final int bar = getBarAtPoint(pointOnHistogram, false);\n+                final Point pointOnHistogram = e.getPoint();\n+                final int bar = getBarAtPoint(pointOnHistogram, false);\n \n-            shiftDown = e.isShiftDown();\n-            controlDown = e.isControlDown();\n+                shiftDown = e.isShiftDown();\n+                controlDown = e.isControlDown();\n \n-            dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n-            dragEnd = bar;\n+                dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n+                dragEnd = bar;\n \n-            binSelectionMode.mousePressed(shiftDown, controlDown, bins, dragStart, dragEnd);\n+                binSelectionMode.mousePressed(shiftDown, controlDown, bins, dragStart, dragEnd);\n \n-            repaint();\n+                repaint();\n+            }\n         }\n     }\n \n     @Override\n     public void mouseDragged(MouseEvent e) {\n         if (binCollection != null) {\n-\n-            Bin[] bins = binCollection.getBins();\n-\n-            final Point pointOnHistogram = e.getPoint();\n-            final int bar = getBarAtPoint(pointOnHistogram, false);\n-            int newDragEnd = bar;\n-            binSelectionMode.mouseDragged(shiftDown, controlDown, bins, dragStart, dragEnd, newDragEnd);\n-            dragEnd = newDragEnd;\n-            repaint();\n+            while (e.getButton() == MouseEvent.BUTTON1) {\n+                Bin[] bins = binCollection.getBins();\n+\n+                final Point pointOnHistogram = e.getPoint();\n+                final int bar = getBarAtPoint(pointOnHistogram, false);\n+                int newDragEnd = bar;\n+                binSelectionMode.mouseDragged(shiftDown, controlDown, bins, dragStart, dragEnd, newDragEnd);\n+                dragEnd = newDragEnd;\n+                repaint();\n+            }\n         }\n     }\n \n     @Override\n     public void mouseReleased(MouseEvent e) {\n         if (binCollection != null) {\n-            binSelectionMode.mouseReleased(shiftDown, controlDown, binCollection.getBins(), dragStart, dragEnd, topComponent);\n-            activeBin = dragStart == dragEnd ? dragStart : -1;\n-            repaint();\n+            if (e.getButton() == MouseEvent.BUTTON1) {", "originalCommit": "659a51c2bc062981d3d9b926140811ce58b025e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYyNDcwMA==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r473624700", "bodyText": "merge all these if statements together", "author": "antares1470", "createdAt": "2020-08-20T05:57:34Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -559,7 +622,14 @@ public void keyTyped(KeyEvent e) {\n \n     @Override\n     public void keyPressed(KeyEvent e) {\n-        // Override required, intentionally left blank\n+        if (binCollection != null) {\n+            // Ensure that the Histogram View is focused before allowing Ctrl + C to be registered.\n+            if (this.isFocusOwner()) {\n+                if ((e.isControlDown()) && (e.getKeyCode() == KeyEvent.VK_C)) {", "originalCommit": "659a51c2bc062981d3d9b926140811ce58b025e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2152a1eb8ad04fe5c753cb416f9b84cd20471f0e", "url": "https://github.com/constellation-app/constellation/commit/2152a1eb8ad04fe5c753cb416f9b84cd20471f0e", "message": "Update HistogramDisplay.java", "committedDate": "2020-08-20T06:07:01Z", "type": "commit"}, {"oid": "cfa2959672e1f039eccd4be79d3e020ccf514db3", "url": "https://github.com/constellation-app/constellation/commit/cfa2959672e1f039eccd4be79d3e020ccf514db3", "message": "Update HistogramDisplay.java", "committedDate": "2020-08-20T06:10:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxMDE4Nw==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r474310187", "bodyText": "Minor but I think we prefer && at the start of the new line rather than the end of the old line", "author": "antares1470", "createdAt": "2020-08-20T22:38:59Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -543,66 +540,56 @@ private void copySelectedToClipboard(boolean includeCounts) {\n     \n     @Override\n     public void mouseClicked(MouseEvent e) {\n-        if (binCollection != null) {\n-            if (e.getButton() == MouseEvent.BUTTON3) {\n-                copyMenu.show(this, e.getX(), e.getY());\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON3) {", "originalCommit": "cfa2959672e1f039eccd4be79d3e020ccf514db3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxMDIzMQ==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r474310231", "bodyText": "same here", "author": "antares1470", "createdAt": "2020-08-20T22:39:08Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -543,66 +540,56 @@ private void copySelectedToClipboard(boolean includeCounts) {\n     \n     @Override\n     public void mouseClicked(MouseEvent e) {\n-        if (binCollection != null) {\n-            if (e.getButton() == MouseEvent.BUTTON3) {\n-                copyMenu.show(this, e.getX(), e.getY());\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON3) {\n+            copyMenu.show(this, e.getX(), e.getY());\n         }\n     }\n \n     @Override\n     public void mousePressed(MouseEvent e) {\n-        if (binCollection != null) {\n-            if (e.getButton() == MouseEvent.BUTTON1) {\n-                Bin[] bins = binCollection.getBins();\n-\n-                final Point pointOnHistogram = e.getPoint();\n-                final int bar = getBarAtPoint(pointOnHistogram, false);\n-\n-                shiftDown = e.isShiftDown();\n-                controlDown = e.isControlDown();\n-\n-                dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n-                dragEnd = bar;\n-\n-                binSelectionMode.mousePressed(shiftDown, controlDown, bins, dragStart, dragEnd);\n-\n-                repaint();\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON1) {", "originalCommit": "cfa2959672e1f039eccd4be79d3e020ccf514db3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxMDM1MQ==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r474310351", "bodyText": "same here", "author": "antares1470", "createdAt": "2020-08-20T22:39:30Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -543,66 +540,56 @@ private void copySelectedToClipboard(boolean includeCounts) {\n     \n     @Override\n     public void mouseClicked(MouseEvent e) {\n-        if (binCollection != null) {\n-            if (e.getButton() == MouseEvent.BUTTON3) {\n-                copyMenu.show(this, e.getX(), e.getY());\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON3) {\n+            copyMenu.show(this, e.getX(), e.getY());\n         }\n     }\n \n     @Override\n     public void mousePressed(MouseEvent e) {\n-        if (binCollection != null) {\n-            if (e.getButton() == MouseEvent.BUTTON1) {\n-                Bin[] bins = binCollection.getBins();\n-\n-                final Point pointOnHistogram = e.getPoint();\n-                final int bar = getBarAtPoint(pointOnHistogram, false);\n-\n-                shiftDown = e.isShiftDown();\n-                controlDown = e.isControlDown();\n-\n-                dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n-                dragEnd = bar;\n-\n-                binSelectionMode.mousePressed(shiftDown, controlDown, bins, dragStart, dragEnd);\n-\n-                repaint();\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON1) {\n+            final Point pointOnHistogram = e.getPoint();\n+            final int bar = getBarAtPoint(pointOnHistogram, false);\n+\n+            shiftDown = e.isShiftDown();\n+            controlDown = e.isControlDown();\n+\n+            dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n+            dragEnd = bar;\n+            binSelectionMode.mousePressed(shiftDown, controlDown, binCollection.getBins(), dragStart, dragEnd);\n+            repaint();\n         }\n     }\n \n     @Override\n     public void mouseDragged(MouseEvent e) {\n-        if (binCollection != null) {\n-            while (e.getButton() == MouseEvent.BUTTON1) {\n-                Bin[] bins = binCollection.getBins();\n-\n-                final Point pointOnHistogram = e.getPoint();\n-                final int bar = getBarAtPoint(pointOnHistogram, false);\n-                int newDragEnd = bar;\n-                binSelectionMode.mouseDragged(shiftDown, controlDown, bins, dragStart, dragEnd, newDragEnd);\n-                dragEnd = newDragEnd;\n-                repaint();\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON1) {", "originalCommit": "cfa2959672e1f039eccd4be79d3e020ccf514db3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxMDQzNg==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r474310436", "bodyText": "same here", "author": "antares1470", "createdAt": "2020-08-20T22:39:46Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -543,66 +540,56 @@ private void copySelectedToClipboard(boolean includeCounts) {\n     \n     @Override\n     public void mouseClicked(MouseEvent e) {\n-        if (binCollection != null) {\n-            if (e.getButton() == MouseEvent.BUTTON3) {\n-                copyMenu.show(this, e.getX(), e.getY());\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON3) {\n+            copyMenu.show(this, e.getX(), e.getY());\n         }\n     }\n \n     @Override\n     public void mousePressed(MouseEvent e) {\n-        if (binCollection != null) {\n-            if (e.getButton() == MouseEvent.BUTTON1) {\n-                Bin[] bins = binCollection.getBins();\n-\n-                final Point pointOnHistogram = e.getPoint();\n-                final int bar = getBarAtPoint(pointOnHistogram, false);\n-\n-                shiftDown = e.isShiftDown();\n-                controlDown = e.isControlDown();\n-\n-                dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n-                dragEnd = bar;\n-\n-                binSelectionMode.mousePressed(shiftDown, controlDown, bins, dragStart, dragEnd);\n-\n-                repaint();\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON1) {\n+            final Point pointOnHistogram = e.getPoint();\n+            final int bar = getBarAtPoint(pointOnHistogram, false);\n+\n+            shiftDown = e.isShiftDown();\n+            controlDown = e.isControlDown();\n+\n+            dragStart = (shiftDown && activeBin >= 0) ? activeBin : bar;\n+            dragEnd = bar;\n+            binSelectionMode.mousePressed(shiftDown, controlDown, binCollection.getBins(), dragStart, dragEnd);\n+            repaint();\n         }\n     }\n \n     @Override\n     public void mouseDragged(MouseEvent e) {\n-        if (binCollection != null) {\n-            while (e.getButton() == MouseEvent.BUTTON1) {\n-                Bin[] bins = binCollection.getBins();\n-\n-                final Point pointOnHistogram = e.getPoint();\n-                final int bar = getBarAtPoint(pointOnHistogram, false);\n-                int newDragEnd = bar;\n-                binSelectionMode.mouseDragged(shiftDown, controlDown, bins, dragStart, dragEnd, newDragEnd);\n-                dragEnd = newDragEnd;\n-                repaint();\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON1) {\n+            final Point pointOnHistogram = e.getPoint();\n+            final int bar = getBarAtPoint(pointOnHistogram, false);\n+            \n+            final int newDragEnd = bar;\n+            binSelectionMode.mouseDragged(shiftDown, controlDown, binCollection.getBins(), dragStart, dragEnd, newDragEnd);\n+            dragEnd = newDragEnd;\n+            repaint();\n         }\n     }\n \n     @Override\n     public void mouseReleased(MouseEvent e) {\n-        if (binCollection != null) {\n-            if (e.getButton() == MouseEvent.BUTTON1) {\n-                binSelectionMode.mouseReleased(shiftDown, controlDown, binCollection.getBins(), dragStart, dragEnd, topComponent);\n-                activeBin = dragStart == dragEnd ? dragStart : -1;\n-                repaint();\n-            }\n+        if (binCollection != null &&\n+            e.getButton() == MouseEvent.BUTTON1) {", "originalCommit": "cfa2959672e1f039eccd4be79d3e020ccf514db3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDMxMDU4Ng==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r474310586", "bodyText": "same here", "author": "antares1470", "createdAt": "2020-08-20T22:40:09Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -622,13 +609,10 @@ public void keyTyped(KeyEvent e) {\n \n     @Override\n     public void keyPressed(KeyEvent e) {\n-        if (binCollection != null) {\n-            // Ensure that the Histogram View is focused before allowing Ctrl + C to be registered.\n-            if (this.isFocusOwner()) {\n-                if ((e.isControlDown()) && (e.getKeyCode() == KeyEvent.VK_C)) {\n-                    copySelectedToClipboard(false);\n-                }\n-            }\n+        if (binCollection != null &&\n+            this.isFocusOwner() && // Check if Histogram Display is focused before allowing Ctrl + C to be registered.\n+            ((e.isControlDown()) && (e.getKeyCode() == KeyEvent.VK_C))) {", "originalCommit": "cfa2959672e1f039eccd4be79d3e020ccf514db3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b4d0d1fbdfc7d932db7d43fd7453b1b842230557", "url": "https://github.com/constellation-app/constellation/commit/b4d0d1fbdfc7d932db7d43fd7453b1b842230557", "message": "Merge branch 'master' into feature/Copy-paste-from-Histogram-#741", "committedDate": "2020-08-21T01:01:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM3NDk2Ng==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r474374966", "bodyText": "includeCounts can be final", "author": "formalhaut69", "createdAt": "2020-08-21T02:35:28Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -486,18 +508,48 @@ private int getBarAtPoint(Point p, boolean bounded) {\n \n         return n;\n     }\n+    \n+    /**\n+     * Copy the values of the selected bars on the Histogram to the clipboard.\n+     * <p>\n+     * Iterates through the current collection of bins, bins representing the bars,\n+     * and determines if they are selected by checking their selectedCount value,\n+     * 1 if selected, 0 if not selected.\n+     * \n+     * @param includeCounts True if the counts corresponding to the values\n+     * are also to be copied to the clipboard.\n+     */\n+    private void copySelectedToClipboard(boolean includeCounts) {", "originalCommit": "cfa2959672e1f039eccd4be79d3e020ccf514db3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDM3NTAyMg==", "url": "https://github.com/constellation-app/constellation/pull/795#discussion_r474375022", "bodyText": "Final", "author": "formalhaut69", "createdAt": "2020-08-21T02:35:39Z", "path": "CoreHistogramView/src/au/gov/asd/tac/constellation/views/histogram/HistogramDisplay.java", "diffHunk": "@@ -486,18 +508,48 @@ private int getBarAtPoint(Point p, boolean bounded) {\n \n         return n;\n     }\n+    \n+    /**\n+     * Copy the values of the selected bars on the Histogram to the clipboard.\n+     * <p>\n+     * Iterates through the current collection of bins, bins representing the bars,\n+     * and determines if they are selected by checking their selectedCount value,\n+     * 1 if selected, 0 if not selected.\n+     * \n+     * @param includeCounts True if the counts corresponding to the values\n+     * are also to be copied to the clipboard.\n+     */\n+    private void copySelectedToClipboard(boolean includeCounts) {\n+        final StringBuilder buf = new StringBuilder();\n+        for (Bin bin : binCollection.getBins()) {", "originalCommit": "cfa2959672e1f039eccd4be79d3e020ccf514db3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8e68c84813696d1e1824fbc4760316f00af8e999", "url": "https://github.com/constellation-app/constellation/commit/8e68c84813696d1e1824fbc4760316f00af8e999", "message": "Fix 'if' conditions", "committedDate": "2020-08-21T04:03:29Z", "type": "commit"}, {"oid": "28e5860f07f0bd81f597f362292eca340b6568e5", "url": "https://github.com/constellation-app/constellation/commit/28e5860f07f0bd81f597f362292eca340b6568e5", "message": "Added to CHANGELOG.md and whatsnew.txt", "committedDate": "2020-08-21T04:03:53Z", "type": "commit"}, {"oid": "02832c0f195bbb5f0f5cdf4d3c9d9638741e0f99", "url": "https://github.com/constellation-app/constellation/commit/02832c0f195bbb5f0f5cdf4d3c9d9638741e0f99", "message": "Merge branch 'master' into feature/Copy-paste-from-Histogram-#741", "committedDate": "2020-08-21T04:07:09Z", "type": "commit"}]}