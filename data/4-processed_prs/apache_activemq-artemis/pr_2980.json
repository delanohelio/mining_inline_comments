{"pr_number": 2980, "pr_title": "ARTEMIS-2619 allow disabling STOMP 'server' header", "pr_createdAt": "2020-02-10T16:27:09Z", "pr_url": "https://github.com/apache/activemq-artemis/pull/2980", "timeline": [{"oid": "02776d6a8547661c0dbd93dd3a0978d344e2991a", "url": "https://github.com/apache/activemq-artemis/commit/02776d6a8547661c0dbd93dd3a0978d344e2991a", "message": "ARTEMIS-2619 allow disabling STOMP 'server' header", "committedDate": "2020-02-10T16:42:25Z", "type": "forcePushed"}, {"oid": "ef711229e4b307929011b05fecbba705123ecd11", "url": "https://github.com/apache/activemq-artemis/commit/ef711229e4b307929011b05fecbba705123ecd11", "message": "ARTEMIS-2619 allow disabling STOMP 'server' header", "committedDate": "2020-02-10T16:43:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODYwNjYzMA==", "url": "https://github.com/apache/activemq-artemis/pull/2980#discussion_r378606630", "bodyText": "Is the disableServerHeader != null check not necessary?", "author": "gaohoward", "createdAt": "2020-02-13T01:28:52Z", "path": "artemis-protocols/artemis-stomp-protocol/src/main/java/org/apache/activemq/artemis/core/protocol/stomp/v11/StompFrameHandlerV11.java", "diffHunk": "@@ -85,7 +85,10 @@ public StompFrame onConnect(StompFrame frame) {\n          response.addHeader(Stomp.Headers.Connected.SESSION, connection.getID().toString());\n \n          // server\n-         response.addHeader(Stomp.Headers.Connected.SERVER, connection.getActiveMQServerName());\n+         Object disableServerHeader = connection.getAcceptorUsed().getConfiguration().get(TransportConstants.DISABLE_STOMP_SERVER_HEADER);\n+         if (disableServerHeader == null || (disableServerHeader != null && !Boolean.parseBoolean(disableServerHeader.toString()))) {", "originalCommit": "ef711229e4b307929011b05fecbba705123ecd11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODYwODkzOA==", "url": "https://github.com/apache/activemq-artemis/pull/2980#discussion_r378608938", "bodyText": "Yes, I think you're right. If disableServerHeader == null then it will short-circuit the other check and enter the block.", "author": "jbertram", "createdAt": "2020-02-13T01:37:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODYwNjYzMA=="}], "type": "inlineReview"}, {"oid": "daae7e750a86f4e8f31f88e63766eb965131cef7", "url": "https://github.com/apache/activemq-artemis/commit/daae7e750a86f4e8f31f88e63766eb965131cef7", "message": "ARTEMIS-2619 allow disabling STOMP 'server' header", "committedDate": "2020-02-13T01:38:38Z", "type": "commit"}, {"oid": "daae7e750a86f4e8f31f88e63766eb965131cef7", "url": "https://github.com/apache/activemq-artemis/commit/daae7e750a86f4e8f31f88e63766eb965131cef7", "message": "ARTEMIS-2619 allow disabling STOMP 'server' header", "committedDate": "2020-02-13T01:38:38Z", "type": "forcePushed"}]}