{"pr_number": 1491, "pr_title": "Add course reload button and automatic quiz display (visible)", "pr_createdAt": "2020-05-18T16:32:11Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1491", "timeline": [{"oid": "2a0c46082610159507bcc4c028df6d49758676d4", "url": "https://github.com/ls1intum/Artemis/commit/2a0c46082610159507bcc4c028df6d49758676d4", "message": "add new endpoint for getting one specific course with exercises and lectures", "committedDate": "2020-05-18T12:59:47Z", "type": "commit"}, {"oid": "a8e73ef7d6090891e5c45fed59f743d8a916f0c2", "url": "https://github.com/ls1intum/Artemis/commit/a8e73ef7d6090891e5c45fed59f743d8a916f0c2", "message": "Merge branch 'develop' into feature/course-overview-reload-button", "committedDate": "2020-05-18T16:25:01Z", "type": "commit"}, {"oid": "bf738944866f1ad7cbb49081240627b1f24d866a", "url": "https://github.com/ls1intum/Artemis/commit/bf738944866f1ad7cbb49081240627b1f24d866a", "message": "fix documentation", "committedDate": "2020-05-18T16:28:00Z", "type": "commit"}, {"oid": "4d7f071efa5d5b62e91a85728e3bd6262668f3c6", "url": "https://github.com/ls1intum/Artemis/commit/4d7f071efa5d5b62e91a85728e3bd6262668f3c6", "message": "Refresh button for course", "committedDate": "2020-05-18T18:19:17Z", "type": "commit"}, {"oid": "e1cbd2bad0089a4414b09c243b5bb333b60688fe", "url": "https://github.com/ls1intum/Artemis/commit/e1cbd2bad0089a4414b09c243b5bb333b60688fe", "message": "automatically show quizzes when they are set to visible", "committedDate": "2020-05-18T19:22:49Z", "type": "commit"}, {"oid": "57524fb1018ae4ac55e1ac51d872958fe0b50c11", "url": "https://github.com/ls1intum/Artemis/commit/57524fb1018ae4ac55e1ac51d872958fe0b50c11", "message": "Propagate course refresh", "committedDate": "2020-05-18T20:40:55Z", "type": "commit"}, {"oid": "f14984d0dce0987a5633b65dc5fcc4839661617e", "url": "https://github.com/ls1intum/Artemis/commit/f14984d0dce0987a5633b65dc5fcc4839661617e", "message": "Merge remote-tracking branch 'origin/feature/course-overview-reload-button' into feature/course-overview-reload-button", "committedDate": "2020-05-18T20:41:11Z", "type": "commit"}, {"oid": "cb63566ccd8002d60a253a809cf7dc9fcbd99b8d", "url": "https://github.com/ls1intum/Artemis/commit/cb63566ccd8002d60a253a809cf7dc9fcbd99b8d", "message": "properly reload quiz when set visible with new mechanism", "committedDate": "2020-05-18T22:23:37Z", "type": "commit"}, {"oid": "006a35084e9ad6eac919870491e895157199ee81", "url": "https://github.com/ls1intum/Artemis/commit/006a35084e9ad6eac919870491e895157199ee81", "message": "Merge branch 'develop' into feature/course-overview-reload-button", "committedDate": "2020-05-18T22:53:02Z", "type": "commit"}, {"oid": "d64a89160e0bd92671d3dcb48a9b751c4ff1ad24", "url": "https://github.com/ls1intum/Artemis/commit/d64a89160e0bd92671d3dcb48a9b751c4ff1ad24", "message": "fix docs and code style", "committedDate": "2020-05-18T23:10:45Z", "type": "commit"}, {"oid": "0ab5737043cdda7d3290f944bbf7a7c2d6aa16ac", "url": "https://github.com/ls1intum/Artemis/commit/0ab5737043cdda7d3290f944bbf7a7c2d6aa16ac", "message": "Merge branch 'develop' into feature/course-overview-reload-button", "committedDate": "2020-05-19T07:47:59Z", "type": "commit"}, {"oid": "6561b1c063851ff836599a3c345cee1d371924ca", "url": "https://github.com/ls1intum/Artemis/commit/6561b1c063851ff836599a3c345cee1d371924ca", "message": "Show open quiz exercise at top of course overview", "committedDate": "2020-05-19T12:05:41Z", "type": "commit"}, {"oid": "3824d3b1c04d6d26d5f221e8e88088a5cbd73f9f", "url": "https://github.com/ls1intum/Artemis/commit/3824d3b1c04d6d26d5f221e8e88088a5cbd73f9f", "message": "Current exercise label without due date", "committedDate": "2020-05-19T12:19:43Z", "type": "commit"}, {"oid": "492a52cfc8c05f8d4860a86327c30e9ba3f815af", "url": "https://github.com/ls1intum/Artemis/commit/492a52cfc8c05f8d4860a86327c30e9ba3f815af", "message": "Fix ExpressionChangedAfterItHasBeenCheckedError, unsubscribe from course updates subscription on destroy", "committedDate": "2020-05-19T13:16:19Z", "type": "commit"}, {"oid": "7f88707973db704652922fa240cce9a75271a97c", "url": "https://github.com/ls1intum/Artemis/commit/7f88707973db704652922fa240cce9a75271a97c", "message": "fixed that already started quizzes are shown first", "committedDate": "2020-05-19T14:10:18Z", "type": "commit"}, {"oid": "8699a8402f707fe03c61ca09aee5df3f7cd90388", "url": "https://github.com/ls1intum/Artemis/commit/8699a8402f707fe03c61ca09aee5df3f7cd90388", "message": "Compute exercise participation status in course-management.service.ts", "committedDate": "2020-05-19T14:10:30Z", "type": "commit"}, {"oid": "d544b9622f9f59a8a76acb1878b95670b6ee0152", "url": "https://github.com/ls1intum/Artemis/commit/d544b9622f9f59a8a76acb1878b95670b6ee0152", "message": "Merge branch 'feature/course-overview-reload-button' of https://github.com/ls1intum/Artemis into feature/course-overview-reload-button", "committedDate": "2020-05-19T14:13:09Z", "type": "commit"}, {"oid": "29951acb32040baa70516a2a5ef0fa75b2672c6c", "url": "https://github.com/ls1intum/Artemis/commit/29951acb32040baa70516a2a5ef0fa75b2672c6c", "message": "fixed wrong displayed text on course dashboard", "committedDate": "2020-05-19T15:21:49Z", "type": "commit"}, {"oid": "6588af943ba71b7e776b3804626a36a1cf46aeed", "url": "https://github.com/ls1intum/Artemis/commit/6588af943ba71b7e776b3804626a36a1cf46aeed", "message": "Merge branch 'develop' into feature/course-overview-reload-button", "committedDate": "2020-05-19T15:47:04Z", "type": "commit"}, {"oid": "d504c1a4bfe294fd1f176201359608f4c66b0dab", "url": "https://github.com/ls1intum/Artemis/commit/d504c1a4bfe294fd1f176201359608f4c66b0dab", "message": "Merge branch 'feature/course-overview-reload-button' of https://github.com/ls1intum/Artemis into feature/course-overview-reload-button", "committedDate": "2020-05-19T15:48:16Z", "type": "commit"}, {"oid": "ac96c44ec7e86e0695dc008e9f17b433d1e7fedb", "url": "https://github.com/ls1intum/Artemis/commit/ac96c44ec7e86e0695dc008e9f17b433d1e7fedb", "message": "Merge branch 'develop' into feature/course-overview-reload-button", "committedDate": "2020-05-19T15:59:52Z", "type": "commit"}, {"oid": "d59bceeb8e8c9c6cdc3b1c20eb2558f24b9e2d8a", "url": "https://github.com/ls1intum/Artemis/commit/d59bceeb8e8c9c6cdc3b1c20eb2558f24b9e2d8a", "message": "Merge branch 'develop' into feature/course-overview-reload-button", "committedDate": "2020-05-19T16:58:30Z", "type": "commit"}, {"oid": "f1158ea9cc7bb224b4fec0eaec11ab59e8355f67", "url": "https://github.com/ls1intum/Artemis/commit/f1158ea9cc7bb224b4fec0eaec11ab59e8355f67", "message": "fix typescript errors", "committedDate": "2020-05-19T17:07:54Z", "type": "commit"}, {"oid": "9938ce1b16f8fec6f26ac0199217b362c372c5d2", "url": "https://github.com/ls1intum/Artemis/commit/9938ce1b16f8fec6f26ac0199217b362c372c5d2", "message": "run prettier", "committedDate": "2020-05-19T17:23:04Z", "type": "commit"}, {"oid": "7f9ccc49ea53ecc1e2be4cb69f7f35a807a0c4f7", "url": "https://github.com/ls1intum/Artemis/commit/7f9ccc49ea53ecc1e2be4cb69f7f35a807a0c4f7", "message": "Merge branch 'develop' into feature/course-overview-reload-button", "committedDate": "2020-05-19T17:24:20Z", "type": "commit"}, {"oid": "50ac01e1aca9e1c0fc0d8cdcd967dae374c55bdf", "url": "https://github.com/ls1intum/Artemis/commit/50ac01e1aca9e1c0fc0d8cdcd967dae374c55bdf", "message": "send quiz updates per course", "committedDate": "2020-05-19T17:43:05Z", "type": "commit"}, {"oid": "89174c106b6dd6b4e02f9b64adcd9885840cb958", "url": "https://github.com/ls1intum/Artemis/commit/89174c106b6dd6b4e02f9b64adcd9885840cb958", "message": "Merge branch 'feature/course-overview-reload-button' of https://github.com/ls1intum/Artemis into feature/course-overview-reload-button", "committedDate": "2020-05-19T17:43:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427500080", "bodyText": "This change broke something, no courses are displayed anymore", "author": "stefanwaldhauser", "createdAt": "2020-05-19T18:07:41Z", "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -38,7 +38,7 @@ export class CoursesComponent implements OnInit {\n     }\n \n     loadAndFilterCourses() {\n-        this.courseService.findAll().subscribe(\n+        this.courseService.findAllForDashboard().subscribe(", "originalCommit": "89174c106b6dd6b4e02f9b64adcd9885840cb958", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDk0MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427500941", "bodyText": "same for me", "author": "TobiasPr", "createdAt": "2020-05-19T18:09:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwNDA4OA==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427504088", "bodyText": "This method does not exist on courseService only findAll exists. It does however exist on CourseManagementService", "author": "stefanwaldhauser", "createdAt": "2020-05-19T18:14:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwNzQ5Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427507496", "bodyText": "@stefanwaldhauser courseService is an instance of CourseManagementService.", "author": "madwau", "createdAt": "2020-05-19T18:19:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxMTQxMg==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427511412", "bodyText": "Where do I see this in typescript @madwau ?", "author": "stefanwaldhauser", "createdAt": "2020-05-19T18:26:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxMjI0Mg==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427512242", "bodyText": "You can see it in the constructor where this dependency is injected.", "author": "madwau", "createdAt": "2020-05-19T18:27:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxNDE1NA==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427514154", "bodyText": "haha oh man i see what you mean know :) I thought you meant something with inheritance. The variable name should probably changed to courseManagementService though", "author": "stefanwaldhauser", "createdAt": "2020-05-19T18:31:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxOTA1MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427519051", "bodyText": "I'm guessing courseManagementService was seen as too verbose, not sure though.", "author": "madwau", "createdAt": "2020-05-19T18:39:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUyMDYzOQ==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427520639", "bodyText": "I am currently working on a fix. The problem is that a visible quiz has no due date, but this was expected for the sorting of the exercise in the course overview", "author": "krusche", "createdAt": "2020-05-19T18:42:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUwMDA4MA=="}], "type": "inlineReview"}, {"oid": "12f26283cde3a3942d9763278c75111dd4c49fbc", "url": "https://github.com/ls1intum/Artemis/commit/12f26283cde3a3942d9763278c75111dd4c49fbc", "message": "fix type script error when multiple relevant exercises are found and make sure quizzes are prioritized", "committedDate": "2020-05-19T18:50:15Z", "type": "commit"}, {"oid": "3c715edd044f50b23033d0ecad842a2b13582119", "url": "https://github.com/ls1intum/Artemis/commit/3c715edd044f50b23033d0ecad842a2b13582119", "message": "fix priority active quiz before visible quiz", "committedDate": "2020-05-19T19:03:51Z", "type": "commit"}, {"oid": "e092ecd494f31ce76995b1bb0b2076bc3af3098e", "url": "https://github.com/ls1intum/Artemis/commit/e092ecd494f31ce76995b1bb0b2076bc3af3098e", "message": "Merge branch 'develop' into feature/course-overview-reload-button", "committedDate": "2020-05-19T19:04:14Z", "type": "commit"}, {"oid": "65fc0e6c71b261902e25e4a191242080cb649c1a", "url": "https://github.com/ls1intum/Artemis/commit/65fc0e6c71b261902e25e4a191242080cb649c1a", "message": "fix space in WS topic", "committedDate": "2020-05-19T19:56:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0OTE4OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427549189", "bodyText": "should this not be relevantExercises[0] as the array contains only one item?", "author": "fde312", "createdAt": "2020-05-19T19:31:32Z", "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -52,22 +54,34 @@ export class CoursesComponent implements OnInit {\n         this.jhiAlertService.error('error.unexpectedError', { error }, undefined);\n     }\n \n-    get nextRelevantExercise(): Exercise | null {\n+    get nextRelevantExercise(): Exercise | undefined {\n+        const relevantExercises = new Array<Exercise>();\n         let relevantExercise: Exercise | null = null;\n         if (this.courses) {\n             this.courses.forEach((course) => {\n                 const relevantExerciseForCourse = this.exerciseService.getNextExerciseForHours(course.exercises);\n                 if (relevantExerciseForCourse) {\n-                    if (!relevantExercise) {\n-                        relevantExercise = relevantExerciseForCourse;\n-                        this.nextRelevantCourse = course;\n-                    } else if (relevantExerciseForCourse.dueDate!.isBefore(relevantExercise.dueDate!)) {\n-                        relevantExercise = relevantExerciseForCourse;\n-                        this.nextRelevantCourse = course;\n-                    }\n+                    relevantExerciseForCourse.course = course;\n+                    relevantExercises.push(relevantExerciseForCourse);\n                 }\n             });\n+            if (relevantExercises.length === 0) {\n+                return undefined;\n+            } else if (relevantExercises.length === 1) {\n+                relevantExercise = relevantExercises[1];", "originalCommit": "e092ecd494f31ce76995b1bb0b2076bc3af3098e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU2ODM4Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427568386", "bodyText": "good point, thanks", "author": "krusche", "createdAt": "2020-05-19T20:07:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0OTE4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU3MDA5Mw==", "url": "https://github.com/ls1intum/Artemis/pull/1491#discussion_r427570093", "bodyText": "is fixed", "author": "krusche", "createdAt": "2020-05-19T20:10:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0OTE4OQ=="}], "type": "inlineReview"}, {"oid": "d2e3f74e07a98f3375d1ebe3b4076d7a7fc768ab", "url": "https://github.com/ls1intum/Artemis/commit/d2e3f74e07a98f3375d1ebe3b4076d7a7fc768ab", "message": "fix index", "committedDate": "2020-05-19T20:07:24Z", "type": "commit"}, {"oid": "60bde9f034bfe47194752d2c00644cdae98d4617", "url": "https://github.com/ls1intum/Artemis/commit/60bde9f034bfe47194752d2c00644cdae98d4617", "message": "fix TODO", "committedDate": "2020-05-19T20:13:25Z", "type": "commit"}]}