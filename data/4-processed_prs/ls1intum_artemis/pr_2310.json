{"pr_number": 2310, "pr_title": "Group courses by semesters in the managament overview", "pr_createdAt": "2020-11-02T08:55:01Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2310", "timeline": [{"oid": "3f43711e2ea5a6b2268e9a82413d0c091e7a84ff", "url": "https://github.com/ls1intum/Artemis/commit/3f43711e2ea5a6b2268e9a82413d0c091e7a84ff", "message": "Group courses by semesters in the managament overview", "committedDate": "2020-11-01T21:36:58Z", "type": "commit"}, {"oid": "05d109f9a2ad11d1e25a628bcc13c0c756a2be89", "url": "https://github.com/ls1intum/Artemis/commit/05d109f9a2ad11d1e25a628bcc13c0c756a2be89", "message": "Remove the semester column from the overview", "committedDate": "2020-11-02T09:25:04Z", "type": "commit"}, {"oid": "f5782f773aa56a64466a13f94bf1fb7414bce91b", "url": "https://github.com/ls1intum/Artemis/commit/f5782f773aa56a64466a13f94bf1fb7414bce91b", "message": "Add an extra section for test courses", "committedDate": "2020-11-02T09:53:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA2MDYxMg==", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r518060612", "bodyText": "Any reason for this just being a generic object? Maybe we could write a type here? Not really needed just a suggestion :)", "author": "stefanwaldhauser", "createdAt": "2020-11-05T13:45:01Z", "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -24,6 +25,8 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n     showExamButton = true;\n \n     courses: Course[];\n+    courseSemesters: string[];\n+    semesterCollapsed: object;", "originalCommit": "f5782f773aa56a64466a13f94bf1fb7414bce91b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA5ODczNw==", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r518098737", "bodyText": "I wasn't sure what to put as type there, so I oriented this on what was done in https://github.com/ls1intum/Artemis/blob/develop/src/main/webapp/app/overview/course-exercises/course-exercises.component.ts#L46", "author": "FrankeLukas", "createdAt": "2020-11-05T14:36:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA2MDYxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY3ODUwNw==", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r524678507", "bodyText": "This should do:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                semesterCollapsed: object;\n          \n          \n            \n                semesterCollapsed: { [key:string]: boolean; };\n          \n      \n    \n    \n  \n\nOR: Consider using the TypeScript Map instead.", "author": "jpbernius", "createdAt": "2020-11-16T22:26:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODA2MDYxMg=="}], "type": "inlineReview"}, {"oid": "0640e4ec4c50aec411e69c626ed3d5f49b3671fb", "url": "https://github.com/ls1intum/Artemis/commit/0640e4ec4c50aec411e69c626ed3d5f49b3671fb", "message": "Merge branch 'develop' into feature/managament/course-semester-overview", "committedDate": "2020-11-06T09:43:49Z", "type": "commit"}, {"oid": "a1bed861880d8a19af27f84ec0540a79e84802e9", "url": "https://github.com/ls1intum/Artemis/commit/a1bed861880d8a19af27f84ec0540a79e84802e9", "message": "Only display test courses once", "committedDate": "2020-11-06T10:03:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5ODY4NA==", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r520898684", "bodyText": "Would this be a good candidate for a compareBySemester function in Course? This would also make this more compact.", "author": "MaisiKoleni", "createdAt": "2020-11-10T21:55:29Z", "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -53,6 +56,37 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n             (res: HttpResponse<Course[]>) => {\n                 this.courses = res.body!;\n                 this.courseForGuidedTour = this.guidedTourService.enableTourForCourseOverview(this.courses, tutorAssessmentTour, true);\n+                this.courseSemesters = this.courses\n+                    .map((c) => c.semester ?? '')\n+                    .filter((value, index, self) => {\n+                        // filter down to unique values\n+                        return !this.courses[index].testCourse && self.indexOf(value) === index;\n+                    })\n+                    .sort((a, b) => {\n+                        if (a === '') {\n+                            return 1;\n+                        }\n+                        if (b === '') {\n+                            return -1;\n+                        }\n+                        const yearsCompared = parseInt(b.substr(2, 2), 10) - parseInt(a.substr(2, 2), 10);\n+                        if (yearsCompared !== 0) {\n+                            return yearsCompared;\n+                        }\n+                        // if years are the same, sort WS over SS\n+                        return a.substr(0, 2) === 'WS' ? -1 : 1;", "originalCommit": "a1bed861880d8a19af27f84ec0540a79e84802e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjgxNjI4Mw==", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r522816283", "bodyText": "The problem is that we're already sorting over string values, not courses, so I cannot directly use a compare function on Course. Changing this to compare courses would be possible, but imo not ideal. The string values are already filtered, i.e. we're only dealing with a few distinct semester tags, which is better for performance than sorting over the entire courses list.", "author": "FrankeLukas", "createdAt": "2020-11-13T09:05:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg5ODY4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMTUxNQ==", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r520911515", "bodyText": "Maybe you can use here also orderBy from lodash see https://lodash.com/docs/4.17.15#orderBy", "author": "fde312", "createdAt": "2020-11-10T22:21:36Z", "path": "src/main/webapp/app/course/manage/course-management.component.ts", "diffHunk": "@@ -53,6 +56,37 @@ export class CourseManagementComponent implements OnInit, OnDestroy, AfterViewIn\n             (res: HttpResponse<Course[]>) => {\n                 this.courses = res.body!;\n                 this.courseForGuidedTour = this.guidedTourService.enableTourForCourseOverview(this.courses, tutorAssessmentTour, true);\n+                this.courseSemesters = this.courses\n+                    .map((c) => c.semester ?? '')\n+                    .filter((value, index, self) => {\n+                        // filter down to unique values\n+                        return !this.courses[index].testCourse && self.indexOf(value) === index;\n+                    })\n+                    .sort((a, b) => {", "originalCommit": "a1bed861880d8a19af27f84ec0540a79e84802e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMTczOQ==", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r520911739", "bodyText": "And a bit more docu which magic you are doing would be good :D", "author": "fde312", "createdAt": "2020-11-10T22:22:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMTUxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjgxNzk5MQ==", "url": "https://github.com/ls1intum/Artemis/pull/2310#discussion_r522817991", "bodyText": "Added comments and renamed a few variables so it is hopefully more clear. Regarding orderBy: I don't know how to get that to work in this case because of our special cases (unset semester after all, and WS > SS when the years are equal).", "author": "FrankeLukas", "createdAt": "2020-11-13T09:09:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxMTUxNQ=="}], "type": "inlineReview"}, {"oid": "527b635d8e0fe2b63c7e97b8bc942450eda8e422", "url": "https://github.com/ls1intum/Artemis/commit/527b635d8e0fe2b63c7e97b8bc942450eda8e422", "message": "Merge remote-tracking branch 'upstream/develop' into feature/managament/course-semester-overview", "committedDate": "2020-11-13T08:30:55Z", "type": "commit"}, {"oid": "6849561671f8b76325a74330fae745a5bc3ced3c", "url": "https://github.com/ls1intum/Artemis/commit/6849561671f8b76325a74330fae745a5bc3ced3c", "message": "Add comments and rename variables for readability, fix filtering bug", "committedDate": "2020-11-13T09:02:26Z", "type": "commit"}, {"oid": "f5d7e12e45e8619a18397a6d16d8ed929b3e5db4", "url": "https://github.com/ls1intum/Artemis/commit/f5d7e12e45e8619a18397a6d16d8ed929b3e5db4", "message": "Merge branch 'develop' into feature/managament/course-semester-overview", "committedDate": "2020-11-17T09:55:39Z", "type": "commit"}, {"oid": "b3e4f9a34a6891c33c2d84d035db3437becd686c", "url": "https://github.com/ls1intum/Artemis/commit/b3e4f9a34a6891c33c2d84d035db3437becd686c", "message": "Change the type of 'semesterCollapsed'", "committedDate": "2020-11-17T10:03:57Z", "type": "commit"}]}