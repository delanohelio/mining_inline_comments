{"pr_number": 2586, "pr_title": "Enhancements/user statistics", "pr_createdAt": "2020-12-21T17:15:31Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2586", "timeline": [{"oid": "772474a6d2b459d6bb6e6de8cd1abac045ba752b", "url": "https://github.com/ls1intum/Artemis/commit/772474a6d2b459d6bb6e6de8cd1abac045ba752b", "message": "removed test data from queries and add new weeks tab", "committedDate": "2020-12-20T11:33:42Z", "type": "commit"}, {"oid": "b8940aabe7d0a7a43e77dfcedf030f272b0fd61a", "url": "https://github.com/ls1intum/Artemis/commit/b8940aabe7d0a7a43e77dfcedf030f272b0fd61a", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancements/user-statistics", "committedDate": "2020-12-20T11:34:12Z", "type": "commit"}, {"oid": "6ff84d89146e339deafe6a1696aa23cc647c3658", "url": "https://github.com/ls1intum/Artemis/commit/6ff84d89146e339deafe6a1696aa23cc647c3658", "message": "finalized changes, testing tbd", "committedDate": "2020-12-22T15:43:51Z", "type": "commit"}, {"oid": "fd400b99d222890d4682ae812b1e00fe9428438c", "url": "https://github.com/ls1intum/Artemis/commit/fd400b99d222890d4682ae812b1e00fe9428438c", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancements/user-statistics", "committedDate": "2020-12-22T15:44:18Z", "type": "commit"}, {"oid": "da92668da5dae3eb2c5b7b9586e17416def1d579", "url": "https://github.com/ls1intum/Artemis/commit/da92668da5dae3eb2c5b7b9586e17416def1d579", "message": "changed to Quarter instead of calendar week", "committedDate": "2020-12-22T16:49:52Z", "type": "commit"}, {"oid": "ca076c6a407015d64d656ec778ab0af1c83c3dbd", "url": "https://github.com/ls1intum/Artemis/commit/ca076c6a407015d64d656ec778ab0af1c83c3dbd", "message": "removed problem with year change", "committedDate": "2020-12-23T15:13:21Z", "type": "commit"}, {"oid": "e56e1c1cb1e312ff2f9be71a1e1e0b48567de1f5", "url": "https://github.com/ls1intum/Artemis/commit/e56e1c1cb1e312ff2f9be71a1e1e0b48567de1f5", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancements/user-statistics", "committedDate": "2020-12-23T15:13:44Z", "type": "commit"}, {"oid": "bc2e41460b84bd3bdbd92c7ba769a0c91dd1516f", "url": "https://github.com/ls1intum/Artemis/commit/bc2e41460b84bd3bdbd92c7ba769a0c91dd1516f", "message": "tried different week calculation", "committedDate": "2020-12-28T15:46:53Z", "type": "commit"}, {"oid": "142da792eb76c167204fd4db75adabacbd35cc79", "url": "https://github.com/ls1intum/Artemis/commit/142da792eb76c167204fd4db75adabacbd35cc79", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into enhancements/user-statistics", "committedDate": "2020-12-28T15:47:21Z", "type": "commit"}, {"oid": "301f5195b97d5cc02e025f948bf0dfb0bf2e09ed", "url": "https://github.com/ls1intum/Artemis/commit/301f5195b97d5cc02e025f948bf0dfb0bf2e09ed", "message": "worked, remove old week calculation", "committedDate": "2020-12-28T16:15:47Z", "type": "commit"}, {"oid": "07fdd0a2146ccce6bb64ad18f362f56f993ce9e7", "url": "https://github.com/ls1intum/Artemis/commit/07fdd0a2146ccce6bb64ad18f362f56f993ce9e7", "message": "Merge branch 'develop' into enhancements/user-statistics", "committedDate": "2020-12-29T10:55:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTY5NTk2Nw==", "url": "https://github.com/ls1intum/Artemis/pull/2586#discussion_r549695967", "bodyText": "This should default to 0 instead of null since we can't add null:\nInteger amount = map.get(\"amount\") != null ? ((Long) map.get(\"amount\")).intValue() : 0;\n(When this is null it gives me a NullPointerException in line 228.)", "author": "FrankeLukas", "createdAt": "2020-12-29T13:01:01Z", "path": "src/main/java/de/tum/in/www1/artemis/service/StatisticsService.java", "diffHunk": "@@ -196,6 +208,30 @@ public StatisticsService(StatisticsRepository statisticsRepository) {\n         return result;\n     }\n \n+    /**\n+     * Gets a list of maps, each map describing an entry in the database. The map has the two keys \"day\" and \"amount\",\n+     * which map to the date and the amount of the findings. This method handles the spanType WEEKS_ORDERED\n+     *\n+     * @param outcome A List<Map<String, Object>>, containing the content which should be refactored into an array\n+     * @param result the array in which the converted outcome should be inserted\n+     * @param endDate the endDate\n+     * @return an array, containing the values for each bar in the graph\n+     */\n+    private Integer[] createResultArrayForQuarter(List<Map<String, Object>> outcome, Integer[] result, ZonedDateTime endDate) {\n+        int week;\n+        for (Map<String, Object> map : outcome) {\n+            ZonedDateTime date = (ZonedDateTime) map.get(\"day\");\n+            Integer amount = map.get(\"amount\") != null ? ((Long) map.get(\"amount\")).intValue() : null;", "originalCommit": "07fdd0a2146ccce6bb64ad18f362f56f993ce9e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc0NjAxMQ==", "url": "https://github.com/ls1intum/Artemis/pull/2586#discussion_r549746011", "bodyText": "Good point, adapted", "author": "FuchsDominik", "createdAt": "2020-12-29T15:28:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTY5NTk2Nw=="}], "type": "inlineReview"}, {"oid": "70b2059f1579ad8b830ed534bc3264130d3176ae", "url": "https://github.com/ls1intum/Artemis/commit/70b2059f1579ad8b830ed534bc3264130d3176ae", "message": "added first server tests and added CW and KW for labels", "committedDate": "2020-12-29T14:44:27Z", "type": "commit"}, {"oid": "50b5e6b108b880de4ae4e5e4f1c15c6bfc66a77b", "url": "https://github.com/ls1intum/Artemis/commit/50b5e6b108b880de4ae4e5e4f1c15c6bfc66a77b", "message": "Merge branch 'enhancements/user-statistics' of https://github.com/ls1intum/Artemis into enhancements/user-statistics", "committedDate": "2020-12-29T14:44:49Z", "type": "commit"}, {"oid": "432262fedbd5d1480e4a3b96ea38934be3d219da", "url": "https://github.com/ls1intum/Artemis/commit/432262fedbd5d1480e4a3b96ea38934be3d219da", "message": "Codacy and pr review", "committedDate": "2020-12-29T15:26:19Z", "type": "commit"}, {"oid": "e6a3a3b56ec436bc4d5c1493087d2d4fb0f730a6", "url": "https://github.com/ls1intum/Artemis/commit/e6a3a3b56ec436bc4d5c1493087d2d4fb0f730a6", "message": "Server tests", "committedDate": "2020-12-29T18:14:31Z", "type": "commit"}, {"oid": "4174bf623a916f91d0eb94a699f990586d8e91dc", "url": "https://github.com/ls1intum/Artemis/commit/4174bf623a916f91d0eb94a699f990586d8e91dc", "message": "Merge branch 'develop' into enhancements/user-statistics", "committedDate": "2020-12-29T18:52:53Z", "type": "commit"}]}