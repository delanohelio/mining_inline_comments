{"pr_number": 1719, "pr_title": "Feature/tutor assessment tracking", "pr_createdAt": "2020-06-26T13:34:46Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1719", "timeline": [{"oid": "e6e58cdb2c05a4643fc09554935b4f5b17633d52", "url": "https://github.com/ls1intum/Artemis/commit/e6e58cdb2c05a4643fc09554935b4f5b17633d52", "message": "Add athene profile to spring profiles", "committedDate": "2020-06-25T11:03:18Z", "type": "commit"}, {"oid": "47e76ff03d63573134f0b3ab313ce0eb270aceff", "url": "https://github.com/ls1intum/Artemis/commit/47e76ff03d63573134f0b3ab313ce0eb270aceff", "message": "Add url to application-artemis.yml", "committedDate": "2020-06-25T11:22:01Z", "type": "commit"}, {"oid": "deee17e8e9c05ce8e7290333b975be7ae5cf9669", "url": "https://github.com/ls1intum/Artemis/commit/deee17e8e9c05ce8e7290333b975be7ae5cf9669", "message": "JWT Token for Athene Tracking\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-25T13:06:04Z", "type": "commit"}, {"oid": "bfd0b4d2bf871177a41b7d3765f094d8d974ea47", "url": "https://github.com/ls1intum/Artemis/commit/bfd0b4d2bf871177a41b7d3765f094d8d974ea47", "message": "Remove unused url in application-artemis.yml", "committedDate": "2020-06-25T13:22:57Z", "type": "commit"}, {"oid": "42b16b3ce9464e9b6e490eb68aae9b47d2b24adf", "url": "https://github.com/ls1intum/Artemis/commit/42b16b3ce9464e9b6e490eb68aae9b47d2b24adf", "message": "Use Result in JWT instead of Submission\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-25T13:29:58Z", "type": "commit"}, {"oid": "9aeef3906bde8e7055108191191cf53eca3d9720", "url": "https://github.com/ls1intum/Artemis/commit/9aeef3906bde8e7055108191191cf53eca3d9720", "message": "Result must be final\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-25T13:34:02Z", "type": "commit"}, {"oid": "b91604e369351c100b52ee9dbcd16386ae388e64", "url": "https://github.com/ls1intum/Artemis/commit/b91604e369351c100b52ee9dbcd16386ae388e64", "message": "Merge develop", "committedDate": "2020-06-26T07:09:08Z", "type": "commit"}, {"oid": "a2fb665f591f98a5d12ca0185a4ce873bad44a65", "url": "https://github.com/ls1intum/Artemis/commit/a2fb665f591f98a5d12ca0185a4ce873bad44a65", "message": "Add remote tracking of text-exercise results to client", "committedDate": "2020-06-26T13:23:03Z", "type": "commit"}, {"oid": "7a5b69cb47b458bee96057419cb9b32711ac4f52", "url": "https://github.com/ls1intum/Artemis/commit/7a5b69cb47b458bee96057419cb9b32711ac4f52", "message": "Add tracking header to \"/text-submissions/{id}\" in TextSubmissionResource", "committedDate": "2020-06-26T13:24:15Z", "type": "commit"}, {"oid": "7dece804b8642005d41889200689886e4cb6c281", "url": "https://github.com/ls1intum/Artemis/commit/7dece804b8642005d41889200689886e4cb6c281", "message": "Merge Develop", "committedDate": "2020-06-26T13:46:07Z", "type": "commit"}, {"oid": "d9cadbf1eebdec0c8a9dc74804f917afac14b661", "url": "https://github.com/ls1intum/Artemis/commit/d9cadbf1eebdec0c8a9dc74804f917afac14b661", "message": "Merge Develop", "committedDate": "2020-06-26T13:47:52Z", "type": "commit"}, {"oid": "a9afcad39e5f85f9fbb4307a8207b380d4fa7ff0", "url": "https://github.com/ls1intum/Artemis/commit/a9afcad39e5f85f9fbb4307a8207b380d4fa7ff0", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-06-26T13:48:37Z", "type": "commit"}, {"oid": "04675848cd198da9b8db6998adb7fd8fb1c7179c", "url": "https://github.com/ls1intum/Artemis/commit/04675848cd198da9b8db6998adb7fd8fb1c7179c", "message": "Merge remote-tracking branch 'origin/develop' into feature/tutor-assessment-tracking", "committedDate": "2020-06-29T18:22:32Z", "type": "commit"}, {"oid": "f64007c2d4d8d3e4179bfd0c5f815eda421af349", "url": "https://github.com/ls1intum/Artemis/commit/f64007c2d4d8d3e4179bfd0c5f815eda421af349", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-06-29T19:32:27Z", "type": "commit"}, {"oid": "0a5c941cf8ac7c87936a20fa6c617c81975418e2", "url": "https://github.com/ls1intum/Artemis/commit/0a5c941cf8ac7c87936a20fa6c617c81975418e2", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-06-30T07:48:26Z", "type": "commit"}, {"oid": "d851fdab125619a855c9a302ecc532cbab80740b", "url": "https://github.com/ls1intum/Artemis/commit/d851fdab125619a855c9a302ecc532cbab80740b", "message": "Update Artemis__Server__Text_Clustering_.xml", "committedDate": "2020-06-30T08:56:20Z", "type": "commit"}, {"oid": "f27e8b2621ebad7f0bd340b1a53d78159dfac2f8", "url": "https://github.com/ls1intum/Artemis/commit/f27e8b2621ebad7f0bd340b1a53d78159dfac2f8", "message": "Adjust tracking url", "committedDate": "2020-07-01T08:08:34Z", "type": "commit"}, {"oid": "52bcd04a21da173bfe95ef3b4b915880bf7b777b", "url": "https://github.com/ls1intum/Artemis/commit/52bcd04a21da173bfe95ef3b4b915880bf7b777b", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-07-01T08:13:48Z", "type": "commit"}, {"oid": "e97bbed40db62916ff52858af7473bcd85ad3c3d", "url": "https://github.com/ls1intum/Artemis/commit/e97bbed40db62916ff52858af7473bcd85ad3c3d", "message": "Subscribe to request", "committedDate": "2020-07-02T12:44:17Z", "type": "commit"}, {"oid": "2b696f4cd29b3da26b5421dcdfc9be754f6ccfb2", "url": "https://github.com/ls1intum/Artemis/commit/2b696f4cd29b3da26b5421dcdfc9be754f6ccfb2", "message": "Resolve circular dependency", "committedDate": "2020-07-02T14:18:44Z", "type": "commit"}, {"oid": "486e858b73670edc685b555066cc9055f9f3f04f", "url": "https://github.com/ls1intum/Artemis/commit/486e858b73670edc685b555066cc9055f9f3f04f", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-07-06T09:15:06Z", "type": "commit"}, {"oid": "13630dd257e657acf5a80c0d5c14df3b336b04f3", "url": "https://github.com/ls1intum/Artemis/commit/13630dd257e657acf5a80c0d5c14df3b336b04f3", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-07-07T13:41:07Z", "type": "commit"}, {"oid": "aa44616ba4390390f16a272ac23d7220dc0b6826", "url": "https://github.com/ls1intum/Artemis/commit/aa44616ba4390390f16a272ac23d7220dc0b6826", "message": "Adjust data that is send to the server", "committedDate": "2020-07-07T16:19:01Z", "type": "commit"}, {"oid": "3316e45e894aac90f25a29fbd5c05866fe4c35a7", "url": "https://github.com/ls1intum/Artemis/commit/3316e45e894aac90f25a29fbd5c05866fe4c35a7", "message": "Reformat file", "committedDate": "2020-07-07T16:49:17Z", "type": "commit"}, {"oid": "8674c3480f45dec2e41257324cfa049d20f5f175", "url": "https://github.com/ls1intum/Artemis/commit/8674c3480f45dec2e41257324cfa049d20f5f175", "message": "Remove accidentally added module", "committedDate": "2020-07-07T16:49:59Z", "type": "commit"}, {"oid": "acd37a853d9efa052dd41eb88a82863ff4a90e7e", "url": "https://github.com/ls1intum/Artemis/commit/acd37a853d9efa052dd41eb88a82863ff4a90e7e", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-07-07T16:50:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQwNTI5MA==", "url": "https://github.com/ls1intum/Artemis/pull/1719#discussion_r451405290", "bodyText": "This endpoint does not exist on Artemis. Would it make sense to send this to Athene directly?", "author": "krusche", "createdAt": "2020-07-08T09:22:38Z", "path": "src/main/webapp/app/exercises/text/assess/text-assessments.service.ts", "diffHunk": "@@ -167,4 +175,32 @@ export class TextAssessmentsService {\n                 ),\n         );\n     }\n+\n+    /**\n+     * Track the change of the Feedback in Athene\n+     *\n+     * @param submission - The submission object that holds the data that is tracked\n+     */\n+    public trackFeedback(submission: TextSubmission | null) {\n+        // clone submission and resolve circular json properties\n+        const submissionForSending = cloneDeep(submission);\n+        submissionForSending!.participation.submissions = [];\n+        submissionForSending!.participation.results.map((result) => {\n+            result.participation = null;\n+            result.submission = null;\n+        });\n+\n+        const sendObject = {\n+            textBlocks: submissionForSending?.blocks,\n+            participation: submissionForSending?.participation,\n+        };\n+\n+        if (submission!.participation?.trackingToken) {\n+            this.http\n+                .post(`${SERVER_API_URL}/athene-tracking/text-exercise-assessment}`, sendObject, {", "originalCommit": "acd37a853d9efa052dd41eb88a82863ff4a90e7e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA3NTg3Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1719#discussion_r452075876", "bodyText": "The idea is to route it via nginx directly to athene. I've added an inline comment to make this clear for every developer.", "author": "JonasPetry", "createdAt": "2020-07-09T09:10:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQwNTI5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQwNTQ4Mw==", "url": "https://github.com/ls1intum/Artemis/pull/1719#discussion_r451405483", "bodyText": "the if statement comes too late. I would check that first in this method", "author": "krusche", "createdAt": "2020-07-08T09:22:57Z", "path": "src/main/webapp/app/exercises/text/assess/text-assessments.service.ts", "diffHunk": "@@ -167,4 +175,32 @@ export class TextAssessmentsService {\n                 ),\n         );\n     }\n+\n+    /**\n+     * Track the change of the Feedback in Athene\n+     *\n+     * @param submission - The submission object that holds the data that is tracked\n+     */\n+    public trackFeedback(submission: TextSubmission | null) {\n+        // clone submission and resolve circular json properties\n+        const submissionForSending = cloneDeep(submission);\n+        submissionForSending!.participation.submissions = [];\n+        submissionForSending!.participation.results.map((result) => {\n+            result.participation = null;\n+            result.submission = null;\n+        });\n+\n+        const sendObject = {\n+            textBlocks: submissionForSending?.blocks,\n+            participation: submissionForSending?.participation,\n+        };\n+\n+        if (submission!.participation?.trackingToken) {", "originalCommit": "acd37a853d9efa052dd41eb88a82863ff4a90e7e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA3NTQ1Nw==", "url": "https://github.com/ls1intum/Artemis/pull/1719#discussion_r452075457", "bodyText": "Done", "author": "JonasPetry", "createdAt": "2020-07-09T09:09:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQwNTQ4Mw=="}], "type": "inlineReview"}, {"oid": "1567a97202aa8b3d824c474b548b053096056572", "url": "https://github.com/ls1intum/Artemis/commit/1567a97202aa8b3d824c474b548b053096056572", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-07-09T09:51:42Z", "type": "commit"}, {"oid": "57c9ba728dbd600169cdc8baaa9a856f3c8effa7", "url": "https://github.com/ls1intum/Artemis/commit/57c9ba728dbd600169cdc8baaa9a856f3c8effa7", "message": "Update trackFeedback method in text-assessments.service.ts", "committedDate": "2020-07-09T09:51:55Z", "type": "commit"}, {"oid": "3e9549f44156ac9a27b63f1aa5d647acc8548a3c", "url": "https://github.com/ls1intum/Artemis/commit/3e9549f44156ac9a27b63f1aa5d647acc8548a3c", "message": "Remove unused import in textblock-feedback-editor.component.ts", "committedDate": "2020-07-09T09:51:55Z", "type": "commit"}, {"oid": "11825b15de8e886659b1773ebcb8879cbc73fc6c", "url": "https://github.com/ls1intum/Artemis/commit/11825b15de8e886659b1773ebcb8879cbc73fc6c", "message": "Update javadoc and reformat files", "committedDate": "2020-07-09T09:51:55Z", "type": "commit"}, {"oid": "7e70841459f55c7e01c7c9d1f6c44d7dc4b75b06", "url": "https://github.com/ls1intum/Artemis/commit/7e70841459f55c7e01c7c9d1f6c44d7dc4b75b06", "message": "Add comments and rename trackingToken to textExerciseTrackingToken", "committedDate": "2020-07-09T09:52:56Z", "type": "commit"}, {"oid": "cd47e6eeb7cc6e8aca389514558a823b90f679d4", "url": "https://github.com/ls1intum/Artemis/commit/cd47e6eeb7cc6e8aca389514558a823b90f679d4", "message": "Delete values instead of setting them null", "committedDate": "2020-07-09T12:31:37Z", "type": "commit"}, {"oid": "bec233d5c4a004d8d72e5636614dc192138dbb88", "url": "https://github.com/ls1intum/Artemis/commit/bec233d5c4a004d8d72e5636614dc192138dbb88", "message": "Move token to TextSubmission and cleanup code", "committedDate": "2020-07-09T12:46:02Z", "type": "commit"}, {"oid": "53d76d3170b83eaec1ec8f455b01173bab34bf43", "url": "https://github.com/ls1intum/Artemis/commit/53d76d3170b83eaec1ec8f455b01173bab34bf43", "message": "Adjust tracking url", "committedDate": "2020-07-09T13:44:31Z", "type": "commit"}, {"oid": "1a970b9e8e4080945d613d05201e2ab9e9f1e357", "url": "https://github.com/ls1intum/Artemis/commit/1a970b9e8e4080945d613d05201e2ab9e9f1e357", "message": "Add client tests", "committedDate": "2020-07-09T15:04:38Z", "type": "commit"}, {"oid": "17f5a78a30b6915a0dcbcfdc09d43daa8166a86c", "url": "https://github.com/ls1intum/Artemis/commit/17f5a78a30b6915a0dcbcfdc09d43daa8166a86c", "message": "Add athene profile to testsuite", "committedDate": "2020-07-09T15:10:44Z", "type": "commit"}, {"oid": "df7aa7801576cf1e733b9ce7ba2ba45907a0e93f", "url": "https://github.com/ls1intum/Artemis/commit/df7aa7801576cf1e733b9ce7ba2ba45907a0e93f", "message": "Disable eslint error in text-assessments.service.ts", "committedDate": "2020-07-09T15:39:20Z", "type": "commit"}, {"oid": "46197ad37c8f96e2c29bc48dde074d9f58da7c3e", "url": "https://github.com/ls1intum/Artemis/commit/46197ad37c8f96e2c29bc48dde074d9f58da7c3e", "message": "Remove athene profile", "committedDate": "2020-07-09T18:52:04Z", "type": "commit"}, {"oid": "60b6dd23fea4b84c98b89f25a4c1212a84053975", "url": "https://github.com/ls1intum/Artemis/commit/60b6dd23fea4b84c98b89f25a4c1212a84053975", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-07-10T09:18:46Z", "type": "commit"}, {"oid": "c38acb0199e65a2eefeafd4a1e8a10df9cd58b35", "url": "https://github.com/ls1intum/Artemis/commit/c38acb0199e65a2eefeafd4a1e8a10df9cd58b35", "message": "Fix typescript code style", "committedDate": "2020-07-10T09:42:08Z", "type": "commit"}, {"oid": "1d7d552497ad15deccc0d4b5d689a2f48737892d", "url": "https://github.com/ls1intum/Artemis/commit/1d7d552497ad15deccc0d4b5d689a2f48737892d", "message": "Disable wrong eslint error in text-assessments.service.ts", "committedDate": "2020-07-10T10:10:08Z", "type": "commit"}, {"oid": "2c6d76d38ced9a7d2a0c7be1098a5024e84f8aaf", "url": "https://github.com/ls1intum/Artemis/commit/2c6d76d38ced9a7d2a0c7be1098a5024e84f8aaf", "message": "Add athene profile to test setup and set properties correctly", "committedDate": "2020-07-10T10:26:46Z", "type": "commit"}, {"oid": "5f71d0fe511b1fd7e60d8e2ee06495b248738ff4", "url": "https://github.com/ls1intum/Artemis/commit/5f71d0fe511b1fd7e60d8e2ee06495b248738ff4", "message": "Test that header is set", "committedDate": "2020-07-10T12:31:13Z", "type": "commit"}, {"oid": "bef71a90c3b2895faa36463e8fd041381cfe00f0", "url": "https://github.com/ls1intum/Artemis/commit/bef71a90c3b2895faa36463e8fd041381cfe00f0", "message": "Remove unused variable", "committedDate": "2020-07-10T12:32:14Z", "type": "commit"}, {"oid": "a841d6ca48b52040fc481d4bd23eccafcc983a40", "url": "https://github.com/ls1intum/Artemis/commit/a841d6ca48b52040fc481d4bd23eccafcc983a40", "message": "Add deprecated flag that got deleted through auto-reformat", "committedDate": "2020-07-10T12:46:10Z", "type": "commit"}, {"oid": "dbfbe8d4374a3e7a05b2505ee6fcd67385a05d06", "url": "https://github.com/ls1intum/Artemis/commit/dbfbe8d4374a3e7a05b2505ee6fcd67385a05d06", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-07-13T14:00:47Z", "type": "commit"}, {"oid": "d538a7ec841a2d80d577ddcd754ad87c33ab1e6f", "url": "https://github.com/ls1intum/Artemis/commit/d538a7ec841a2d80d577ddcd754ad87c33ab1e6f", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-07-14T10:11:56Z", "type": "commit"}, {"oid": "255b76f50d1faab11683317907c6c05a2fb0a01d", "url": "https://github.com/ls1intum/Artemis/commit/255b76f50d1faab11683317907c6c05a2fb0a01d", "message": "Merge branch 'develop' into feature/tutor-assessment-tracking", "committedDate": "2020-07-14T15:07:47Z", "type": "commit"}]}