{"pr_number": 2031, "pr_title": "Exam Scores Graph", "pr_createdAt": "2020-08-15T12:27:12Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2031", "timeline": [{"oid": "74c5228350d63ab64e0605a4d5bbd0e60ab73c1f", "url": "https://github.com/ls1intum/Artemis/commit/74c5228350d63ab64e0605a4d5bbd0e60ab73c1f", "message": "Added averagePercentage to the exercise and exerciseGroup part of the\nexam scores page", "committedDate": "2020-08-15T10:45:10Z", "type": "commit"}, {"oid": "0b2c90484a77432546507a5421ff585ba71afdb0", "url": "https://github.com/ls1intum/Artemis/commit/0b2c90484a77432546507a5421ff585ba71afdb0", "message": "Added percentage display of participations", "committedDate": "2020-08-15T10:49:55Z", "type": "commit"}, {"oid": "a7906f6a79573c8a0762b9032a248418077426bb", "url": "https://github.com/ls1intum/Artemis/commit/a7906f6a79573c8a0762b9032a248418077426bb", "message": "Quick HTML Fix", "committedDate": "2020-08-15T10:51:12Z", "type": "commit"}, {"oid": "4c8c3e5aac3bd9f39501dfea1a4d480fa8b0b740", "url": "https://github.com/ls1intum/Artemis/commit/4c8c3e5aac3bd9f39501dfea1a4d480fa8b0b740", "message": "Chart Prototype", "committedDate": "2020-08-15T12:26:22Z", "type": "commit"}, {"oid": "d3d85c33bbb867381d3cc6d24506fb599f43059d", "url": "https://github.com/ls1intum/Artemis/commit/d3d85c33bbb867381d3cc6d24506fb599f43059d", "message": "Updated graph implementation", "committedDate": "2020-08-16T11:18:47Z", "type": "commit"}, {"oid": "6550ceb5134c5edf9f80a29d8df854f1ca9c4922", "url": "https://github.com/ls1intum/Artemis/commit/6550ceb5134c5edf9f80a29d8df854f1ca9c4922", "message": "Correct min, max setting and tick size in graph", "committedDate": "2020-08-16T11:36:16Z", "type": "commit"}, {"oid": "e3e5cf73d2e9bab714e30bd17d1d91ae8bd4510c", "url": "https://github.com/ls1intum/Artemis/commit/e3e5cf73d2e9bab714e30bd17d1d91ae8bd4510c", "message": "Fixed tick size", "committedDate": "2020-08-16T11:53:22Z", "type": "commit"}, {"oid": "19a690658ff095d278288e624ed0bedc858960b2", "url": "https://github.com/ls1intum/Artemis/commit/19a690658ff095d278288e624ed0bedc858960b2", "message": "Styling fixed", "committedDate": "2020-08-16T11:55:17Z", "type": "commit"}, {"oid": "c85d3c58035b44cb5b51b6d39007fb40505576da", "url": "https://github.com/ls1intum/Artemis/commit/c85d3c58035b44cb5b51b6d39007fb40505576da", "message": "Implement exam result histograph", "committedDate": "2020-08-16T23:01:17Z", "type": "commit"}, {"oid": "334cf440cedbde75e4fde623dc6d4c047408ba60", "url": "https://github.com/ls1intum/Artemis/commit/334cf440cedbde75e4fde623dc6d4c047408ba60", "message": "Merge branch 'develop' into exam-scores-graph", "committedDate": "2020-08-16T23:03:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ1OTE2MQ==", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r471459161", "bodyText": "Is it really necessary to get a reference to the canvas?\nPlease have a look how this is solved for the quiz charts.\nIt is not necessary in this case.", "author": "krusche", "createdAt": "2020-08-17T12:56:24Z", "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.ts", "diffHunk": "@@ -45,6 +48,11 @@ export class ExamScoresComponent implements OnInit, OnDestroy {\n     public filterForSubmittedExams = false;\n     public filterForNonEmptySubmissions = false;\n \n+    @ViewChild('histogram', { static: false })\n+    private canvas: ElementRef<HTMLCanvasElement>;", "originalCommit": "334cf440cedbde75e4fde623dc6d4c047408ba60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ1OTgzOQ==", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r471459839", "bodyText": "Example quiz-statistic.component.html\n<canvas baseChart [datasets]=\"datasets\" [labels]=\"labels\" [options]=\"options\" [chartType]=\"chartType\" [colors]=\"colors\"> \nIn the corresponding ts file: options, labels, colors and chartType are defined and automatically injected by angular", "author": "krusche", "createdAt": "2020-08-17T12:57:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ1OTE2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ2MDE3OA==", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r471460178", "bodyText": "this is really ugly :-(\nIs there no other option to display labels?", "author": "krusche", "createdAt": "2020-08-17T12:58:09Z", "path": "src/main/webapp/app/app.main.ts", "diffHunk": "@@ -3,6 +3,15 @@ import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n import { ProdConfig } from './core/config/prod.config';\n import { ArtemisAppModule } from './app.module';\n \n+import * as Chart from 'chart.js';\n+import ChartDataLabels from 'chartjs-plugin-datalabels';\n+\n+/**\n+ * This plugin registers itself globally,\n+ * meaning that once imported, all charts will display labels.\n+ * In our case we want it enabled only for a few charts, so we first need to unregister it globally\n+ */\n+Chart.plugins.unregister(ChartDataLabels);", "originalCommit": "334cf440cedbde75e4fde623dc6d4c047408ba60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ2MzY3NA==", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r471463674", "bodyText": "I guess we don't need this plugin at all.\nHave a look at the quiz charts. They already include data labels. Example", "author": "krusche", "createdAt": "2020-08-17T13:04:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ2MDE3OA=="}], "type": "inlineReview"}, {"oid": "ae9f78ddbc80d3bddacdbc8c9c95d758cc59dd89", "url": "https://github.com/ls1intum/Artemis/commit/ae9f78ddbc80d3bddacdbc8c9c95d758cc59dd89", "message": "Switched to ng-2 charts implementation", "committedDate": "2020-08-17T16:57:45Z", "type": "commit"}, {"oid": "a0aac2c2ede7247f858e2cb1eb8d7f887b857b16", "url": "https://github.com/ls1intum/Artemis/commit/a0aac2c2ede7247f858e2cb1eb8d7f887b857b16", "message": "Merge remote-tracking branch 'origin/exam-scores-graph' into exam-scores-graph", "committedDate": "2020-08-17T16:58:05Z", "type": "commit"}, {"oid": "686b9495e4fdce59ccb0ed7d242bfad422401a92", "url": "https://github.com/ls1intum/Artemis/commit/686b9495e4fdce59ccb0ed7d242bfad422401a92", "message": "Removed not needed plugin", "committedDate": "2020-08-17T17:50:48Z", "type": "commit"}, {"oid": "88e4a3454553d18dbe3b8d33a820622a76e6160c", "url": "https://github.com/ls1intum/Artemis/commit/88e4a3454553d18dbe3b8d33a820622a76e6160c", "message": "Merge branch 'develop' into exam-scores-graph", "committedDate": "2020-08-18T08:36:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUzMDY3OA==", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r472530678", "bodyText": "Took me some time to get the difference between the two assignments :-D Maybe the following is easier to parse:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (i === this.histogramData.length - 1) {\n          \n          \n            \n                            labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth}]`;\n          \n          \n            \n                        } else {\n          \n          \n            \n                            labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth})`;\n          \n          \n            \n                        }\n          \n          \n            \n                        labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth}`;\n          \n          \n            \n                        labels[i] += (i === this.histogramData.length - 1) ? ']' : ')';", "author": "sascha11110", "createdAt": "2020-08-18T22:34:11Z", "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.ts", "diffHunk": "@@ -103,14 +117,80 @@ export class ExamScoresComponent implements OnInit, OnDestroy {\n         this.changeDetector.detectChanges();\n     }\n \n+    private createChart() {\n+        const labels = [];\n+        let i;\n+        for (i = 0; i < this.histogramData.length; i++) {\n+            if (i === this.histogramData.length - 1) {\n+                labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth}]`;\n+            } else {\n+                labels[i] = `[${i * this.binWidth},${(i + 1) * this.binWidth})`;\n+            }", "originalCommit": "88e4a3454553d18dbe3b8d33a820622a76e6160c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2d7d545be765815cbd370cfdae2320f2a9ddd702", "url": "https://github.com/ls1intum/Artemis/commit/2d7d545be765815cbd370cfdae2320f2a9ddd702", "message": "Removed duplicated column", "committedDate": "2020-08-18T23:02:31Z", "type": "commit"}, {"oid": "618fd9f45440f134ce5749575e1cc7f16793670c", "url": "https://github.com/ls1intum/Artemis/commit/618fd9f45440f134ce5749575e1cc7f16793670c", "message": "Update src/main/webapp/app/exam/exam-scores/exam-scores.component.ts\n\nCo-authored-by: Sascha Beele <sascha@beele.io>", "committedDate": "2020-08-18T23:04:27Z", "type": "commit"}, {"oid": "53b352e38b0d41a2fee3bf9cd87a98df70611aa9", "url": "https://github.com/ls1intum/Artemis/commit/53b352e38b0d41a2fee3bf9cd87a98df70611aa9", "message": "Manual Calculation of Tick Max to prevent graphic glitches", "committedDate": "2020-08-18T23:13:43Z", "type": "commit"}, {"oid": "fa7fc46e482380db030aa9b83c7cd271dcc5a30d", "url": "https://github.com/ls1intum/Artemis/commit/fa7fc46e482380db030aa9b83c7cd271dcc5a30d", "message": "Code fix", "committedDate": "2020-08-18T23:36:07Z", "type": "commit"}, {"oid": "8994b4f94f189c5f555a780289761b479a7943aa", "url": "https://github.com/ls1intum/Artemis/commit/8994b4f94f189c5f555a780289761b479a7943aa", "message": "Another fix", "committedDate": "2020-08-18T23:49:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjk1MTc2Mw==", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r472951763", "bodyText": "This table has a styling issue on mobile:\n\nWrapping the <table> element inside a <div class=\"table-responsive\"> like the student results table should fix this (it makes the table bound to the width and scrollable).", "author": "schultek", "createdAt": "2020-08-19T11:16:13Z", "path": "src/main/webapp/app/exam/exam-scores/exam-scores.component.html", "diffHunk": "@@ -90,17 +94,11 @@ <h4>\n             </tbody>\n         </table>\n \n-        <!-- Histogram Table -->\n-        <table class=\"table table-bordered table-sm table-clear-width mb-3\">\n-            <thead class=\"thead-dark\">\n-                <th *ngFor=\"let _ of histogramData; let i = index; last as isLast\">[{{ i * binWidth }},{{ (i + 1) * binWidth }}{{ isLast ? ']' : ')' }}</th>\n-            </thead>\n-            <tbody>\n-                <td *ngFor=\"let noOfStudents of histogramData\">\n-                    {{ noOfStudents }} ({{ noOfExamsFiltered ? roundAndPerformLocalConversion((noOfStudents * 100) / noOfExamsFiltered, 2, 2) : '-' }}%)\n-                </td>\n-            </tbody>\n-        </table>\n+        <div style=\"display: block;\">\n+            <!-- Histogram -->\n+            <canvas baseChart height=\"400\" [datasets]=\"barChartData\" [labels]=\"barChartLabels\" [options]=\"barChartOptions\" [legend]=\"barChartLegend\" [chartType]=\"barChartType\">\n+            </canvas>\n+        </div>\n \n         <!-- Exercise Statistics Table -->\n         <table class=\"table table-bordered table-sm body-striped\">", "originalCommit": "8994b4f94f189c5f555a780289761b479a7943aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzA5ODg1NA==", "url": "https://github.com/ls1intum/Artemis/pull/2031#discussion_r473098854", "bodyText": "Fixed it in 2f2f107", "author": "stefanwaldhauser", "createdAt": "2020-08-19T15:03:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjk1MTc2Mw=="}], "type": "inlineReview"}, {"oid": "2f2f10706a14b874cd33dc46636fb05827b7411f", "url": "https://github.com/ls1intum/Artemis/commit/2f2f10706a14b874cd33dc46636fb05827b7411f", "message": "Wrapped in responsive div", "committedDate": "2020-08-19T15:02:44Z", "type": "commit"}]}