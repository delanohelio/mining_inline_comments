{"pr_number": 2004, "pr_title": "Performance Enhancement: Deactivate Change Detection for inactive components in exam mode", "pr_createdAt": "2020-08-06T17:44:51Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2004", "timeline": [{"oid": "ec91d604f3db0607a5d531b0abc10d6b3f6f682c", "url": "https://github.com/ls1intum/Artemis/commit/ec91d604f3db0607a5d531b0abc10d6b3f6f682c", "message": "deactivate change detection for inactive components", "committedDate": "2020-08-06T16:26:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU5NjcwOQ==", "url": "https://github.com/ls1intum/Artemis/pull/2004#discussion_r466596709", "bodyText": "please use a proper name and not cdr", "author": "krusche", "createdAt": "2020-08-06T18:11:24Z", "path": "src/main/webapp/app/exam/participate/exercises/modeling/modeling-exam-submission.component.ts", "diffHunk": "@@ -26,6 +26,10 @@ export class ModelingExamSubmissionComponent extends ExamSubmissionComponent imp\n     exercise: ModelingExercise;\n     umlModel: UMLModel; // input model for Apollon\n \n+    constructor(private cdr: ChangeDetectorRef) {", "originalCommit": "ec91d604f3db0607a5d531b0abc10d6b3f6f682c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyODU3NQ==", "url": "https://github.com/ls1intum/Artemis/pull/2004#discussion_r466928575", "bodyText": "See 5e32a09", "author": "anditurdiu", "createdAt": "2020-08-07T09:27:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU5NjcwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU5ODM4MQ==", "url": "https://github.com/ls1intum/Artemis/pull/2004#discussion_r466598381", "bodyText": "should this not be detach() according to https://angular.io/api/core/ChangeDetectorRef", "author": "krusche", "createdAt": "2020-08-06T18:14:38Z", "path": "src/main/webapp/app/exam/participate/exercises/modeling/modeling-exam-submission.component.ts", "diffHunk": "@@ -39,7 +43,13 @@ export class ModelingExamSubmissionComponent extends ExamSubmissionComponent imp\n         return this.exercise;\n     }\n \n-    onActivate(): void {}\n+    onActivate(): void {\n+        this.cdr.reattach();\n+    }\n+\n+    onDeactivate(): void {\n+        this.cdr.reattach();", "originalCommit": "ec91d604f3db0607a5d531b0abc10d6b3f6f682c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjkyOTIzMw==", "url": "https://github.com/ls1intum/Artemis/pull/2004#discussion_r466929233", "bodyText": "See 25ab3af", "author": "anditurdiu", "createdAt": "2020-08-07T09:28:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU5ODM4MQ=="}], "type": "inlineReview"}, {"oid": "25ab3af2b18efb7ede588c74cbb4ea22919ded30", "url": "https://github.com/ls1intum/Artemis/commit/25ab3af2b18efb7ede588c74cbb4ea22919ded30", "message": "onDeactivate - detach", "committedDate": "2020-08-06T18:18:16Z", "type": "commit"}, {"oid": "8dde5d1f1082dd6a60ff0c8797ecce7a2b4f23f7", "url": "https://github.com/ls1intum/Artemis/commit/8dde5d1f1082dd6a60ff0c8797ecce7a2b4f23f7", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-07T08:44:42Z", "type": "commit"}, {"oid": "5e32a09205c4f75d49ba9065afcb6e3699d48857", "url": "https://github.com/ls1intum/Artemis/commit/5e32a09205c4f75d49ba9065afcb6e3699d48857", "message": "Move onActivate, onDeactivate and ngOnInit implementation to superclass", "committedDate": "2020-08-07T09:20:46Z", "type": "commit"}, {"oid": "763da6326e0260296f748bb42debcd2c2d5e155f", "url": "https://github.com/ls1intum/Artemis/commit/763da6326e0260296f748bb42debcd2c2d5e155f", "message": "merge develop into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-07T09:24:14Z", "type": "commit"}, {"oid": "c73efbda9c675a04db7ec66211ea16bcafa93839", "url": "https://github.com/ls1intum/Artemis/commit/c73efbda9c675a04db7ec66211ea16bcafa93839", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-07T09:33:32Z", "type": "commit"}, {"oid": "72c7d46a766d377af7c223e00622390dcea636b3", "url": "https://github.com/ls1intum/Artemis/commit/72c7d46a766d377af7c223e00622390dcea636b3", "message": "remove ngOnInit from superclass as angular decorators are not inherited and therefore cannot be placed in the superclass", "committedDate": "2020-08-07T09:47:25Z", "type": "commit"}, {"oid": "d855952963397b95ab20ae18bc636d5273adc6b8", "url": "https://github.com/ls1intum/Artemis/commit/d855952963397b95ab20ae18bc636d5273adc6b8", "message": "Merge branch 'bugfix/exam/performance-issue-in-exam' of github.com:ls1intum/Artemis into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-07T09:50:09Z", "type": "commit"}, {"oid": "a48a7962ef3516faf83c90235859683fbdbd476c", "url": "https://github.com/ls1intum/Artemis/commit/a48a7962ef3516faf83c90235859683fbdbd476c", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-15T11:48:07Z", "type": "commit"}, {"oid": "34611ebc578e6963e18f23c62311d8fa63039e2a", "url": "https://github.com/ls1intum/Artemis/commit/34611ebc578e6963e18f23c62311d8fa63039e2a", "message": "include apollon release candidate with performance improvement", "committedDate": "2020-08-16T10:26:09Z", "type": "commit"}, {"oid": "6920343c03ed67e2bb16b94a0c83780a5b4160d3", "url": "https://github.com/ls1intum/Artemis/commit/6920343c03ed67e2bb16b94a0c83780a5b4160d3", "message": "fix memory leak with timer subscriptions", "committedDate": "2020-08-16T12:58:46Z", "type": "commit"}, {"oid": "a33c2df0e6c8bcc3536077c0d0fff52cf40a15f9", "url": "https://github.com/ls1intum/Artemis/commit/a33c2df0e6c8bcc3536077c0d0fff52cf40a15f9", "message": "detach change detection for modeling editor in exam permanently", "committedDate": "2020-08-16T13:31:15Z", "type": "commit"}, {"oid": "97e7b187852d6edbdc3fd781e5950baa9a4cd415", "url": "https://github.com/ls1intum/Artemis/commit/97e7b187852d6edbdc3fd781e5950baa9a4cd415", "message": "fix timer not displayed, when already over", "committedDate": "2020-08-16T13:56:38Z", "type": "commit"}, {"oid": "3c9d0acdcf68000c4c06a9f9742e79196736d128", "url": "https://github.com/ls1intum/Artemis/commit/3c9d0acdcf68000c4c06a9f9742e79196736d128", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-17T19:45:40Z", "type": "commit"}, {"oid": "2df710920362960bea3dab782a1df27f34a41737", "url": "https://github.com/ls1intum/Artemis/commit/2df710920362960bea3dab782a1df27f34a41737", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam\n\n# Conflicts:\n#\tpackage.json\n#\tyarn.lock", "committedDate": "2020-08-18T19:56:19Z", "type": "commit"}, {"oid": "8dc68a5dffdc83b617f02b408e7e5484db148721", "url": "https://github.com/ls1intum/Artemis/commit/8dc68a5dffdc83b617f02b408e7e5484db148721", "message": "change the way we disable change detection in modeling-exam-submission.component.ts to a more obvious implementation", "committedDate": "2020-08-18T20:21:19Z", "type": "commit"}, {"oid": "a4cacf22cd11f4936862e4960ac2c8aaf32848ad", "url": "https://github.com/ls1intum/Artemis/commit/a4cacf22cd11f4936862e4960ac2c8aaf32848ad", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exercises/programming/programming-exam-submission.component.ts", "committedDate": "2020-08-20T12:12:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAxMDI0MA==", "url": "https://github.com/ls1intum/Artemis/pull/2004#discussion_r474010240", "bodyText": "Why is this needed as an abstract method? I see it just used inside the inherited components for modeling, quiz and text exercises and not at all for programming exercises.", "author": "schultek", "createdAt": "2020-08-20T14:06:26Z", "path": "src/main/webapp/app/exam/participate/exercises/exam-submission.component.ts", "diffHunk": "@@ -1,14 +1,29 @@\n import { Submission } from 'app/entities/submission.model';\n import { Exercise } from 'app/entities/exercise.model';\n+import { ChangeDetectorRef } from '@angular/core';\n \n export abstract class ExamSubmissionComponent {\n     abstract hasUnsavedChanges(): boolean;\n     abstract updateSubmissionFromView(): void;\n+    abstract updateViewFromSubmission(): void;", "originalCommit": "a4cacf22cd11f4936862e4960ac2c8aaf32848ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAyODQ1Nw==", "url": "https://github.com/ls1intum/Artemis/pull/2004#discussion_r474028457", "bodyText": "I think @anditurdiu added it, because it makes sense from the interface design perspective, because every ExamSubmissionComponent needs to be able to update it's content from the given submission. The code-editor is an exception, because it handles updating of the view from the submission on it's own. I see your point, that it is not needed in this case. I think it is a question on how the responsibilities of the components are in the concept. As I understood, we have the exam-participation-component, which manages all the participations and the submission components for each exercise type are just handling the submissions. Therefore the programming editor is the exception here, by handling the participation and the submission, but it is okay to add it to the interface, because future submission components very likely need to implement this method as well.", "author": "TobiasPr", "createdAt": "2020-08-20T14:31:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAxMDI0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDEwNDM3Nw==", "url": "https://github.com/ls1intum/Artemis/pull/2004#discussion_r474104377", "bodyText": "Ok", "author": "schultek", "createdAt": "2020-08-20T16:13:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDAxMDI0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE3ODc0NA==", "url": "https://github.com/ls1intum/Artemis/pull/2004#discussion_r474178744", "bodyText": "I think we could just leave this method empty and write a comment about it. Semantically it does not make sense to call onSave when we want to update the view from the submission (not needed for programming exercises anyways).", "author": "kloessst", "createdAt": "2020-08-20T18:12:05Z", "path": "src/main/webapp/app/exam/participate/exercises/programming/programming-exam-submission.component.ts", "diffHunk": "@@ -103,11 +103,17 @@ export class ProgrammingExamSubmissionComponent extends ExamSubmissionComponent\n     }\n \n     onActivate(): void {\n+        super.onActivate();\n         this.reload();\n     }\n \n     updateSubmissionFromView(): void {\n         // Note: we just save here and do not commit, because this can lead to problems!\n         this.codeEditorContainer.actions.onSave();\n     }\n+\n+    updateViewFromSubmission(): void {\n+        // Note: we just save here and do not commit, because this can lead to problems!\n+        this.codeEditorContainer.actions.onSave();", "originalCommit": "a4cacf22cd11f4936862e4960ac2c8aaf32848ad", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7dbabdb421c53e7d3c0d4aa5364d2f25c689ddb3", "url": "https://github.com/ls1intum/Artemis/commit/7dbabdb421c53e7d3c0d4aa5364d2f25c689ddb3", "message": "remove code from updateViewFromSubmission -> it is not called anyway", "committedDate": "2020-08-21T05:44:43Z", "type": "commit"}, {"oid": "35e4b9d64a0ea0917df225abb959bab9bf4c3240", "url": "https://github.com/ls1intum/Artemis/commit/35e4b9d64a0ea0917df225abb959bab9bf4c3240", "message": "remove unused imports", "committedDate": "2020-08-24T08:48:30Z", "type": "commit"}, {"oid": "e588c4384148420a20e346226a1353e01ec00858", "url": "https://github.com/ls1intum/Artemis/commit/e588c4384148420a20e346226a1353e01ec00858", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-24T22:08:25Z", "type": "commit"}, {"oid": "4c468c8be4af31a383f15723c60487bb90c1f5d2", "url": "https://github.com/ls1intum/Artemis/commit/4c468c8be4af31a383f15723c60487bb90c1f5d2", "message": "add some more documentation", "committedDate": "2020-08-25T10:25:17Z", "type": "commit"}, {"oid": "25f9e9e5f3d5cc7d67a2663e607bf745580b01c6", "url": "https://github.com/ls1intum/Artemis/commit/25f9e9e5f3d5cc7d67a2663e607bf745580b01c6", "message": "Merge remote-tracking branch 'origin/bugfix/exam/performance-issue-in-exam' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-25T10:25:31Z", "type": "commit"}, {"oid": "b1eceacf1e38fb380b54b4c37df8e4925a6fe701", "url": "https://github.com/ls1intum/Artemis/commit/b1eceacf1e38fb380b54b4c37df8e4925a6fe701", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exercises/programming/programming-exam-submission.component.ts", "committedDate": "2020-08-27T08:10:28Z", "type": "commit"}, {"oid": "358caf985aeee828a5b6ec9976261f63c9bff6a2", "url": "https://github.com/ls1intum/Artemis/commit/358caf985aeee828a5b6ec9976261f63c9bff6a2", "message": "prettier format -> fix style issues", "committedDate": "2020-08-27T08:30:31Z", "type": "commit"}, {"oid": "a6be3a6635909db0057ff76bc8f78fcf46e18d61", "url": "https://github.com/ls1intum/Artemis/commit/a6be3a6635909db0057ff76bc8f78fcf46e18d61", "message": "prettier format -> fix style issues", "committedDate": "2020-08-27T08:34:16Z", "type": "commit"}, {"oid": "a87b7a79af10551a3d430666db9f819e22df3137", "url": "https://github.com/ls1intum/Artemis/commit/a87b7a79af10551a3d430666db9f819e22df3137", "message": "Merge remote-tracking branch 'origin/bugfix/exam/performance-issue-in-exam' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-27T08:34:23Z", "type": "commit"}, {"oid": "874aee282c2a9e4dd5a5f0139db7a0fb0ac4914b", "url": "https://github.com/ls1intum/Artemis/commit/874aee282c2a9e4dd5a5f0139db7a0fb0ac4914b", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-27T15:56:09Z", "type": "commit"}, {"oid": "b454182a920797cfe9e5dead9a38476823548fd5", "url": "https://github.com/ls1intum/Artemis/commit/b454182a920797cfe9e5dead9a38476823548fd5", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-27T20:48:52Z", "type": "commit"}, {"oid": "f8bdbc4929465ce610293ab8e7754d8d92e67e0a", "url": "https://github.com/ls1intum/Artemis/commit/f8bdbc4929465ce610293ab8e7754d8d92e67e0a", "message": "reload instructions onActivate()", "committedDate": "2020-08-27T21:28:08Z", "type": "commit"}, {"oid": "b79557ace92f2849e64301e12dec57a007b09af9", "url": "https://github.com/ls1intum/Artemis/commit/b79557ace92f2849e64301e12dec57a007b09af9", "message": "Merge remote-tracking branch 'origin/bugfix/exam/performance-issue-in-exam' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-27T21:28:21Z", "type": "commit"}, {"oid": "e906d04926608fc592d07a9a071b0e971f6c9290", "url": "https://github.com/ls1intum/Artemis/commit/e906d04926608fc592d07a9a071b0e971f6c9290", "message": "give every programming-exercise-instruction.component.ts own stateful services", "committedDate": "2020-08-27T22:09:04Z", "type": "commit"}, {"oid": "65f56e855238343876cc88dccb5de741322e6f8b", "url": "https://github.com/ls1intum/Artemis/commit/65f56e855238343876cc88dccb5de741322e6f8b", "message": "make sure that the latest result is set before html is updated", "committedDate": "2020-08-27T22:43:28Z", "type": "commit"}, {"oid": "f80d8f80301f4b8dff1ac9bf40c8b14990b22f4c", "url": "https://github.com/ls1intum/Artemis/commit/f80d8f80301f4b8dff1ac9bf40c8b14990b22f4c", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-28T11:40:04Z", "type": "commit"}, {"oid": "2aba862901a78341652b08bb9502bdcf84416984", "url": "https://github.com/ls1intum/Artemis/commit/2aba862901a78341652b08bb9502bdcf84416984", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-08-29T16:08:26Z", "type": "commit"}, {"oid": "7150f15f459ff9c78037c34ee31784cdbca0b039", "url": "https://github.com/ls1intum/Artemis/commit/7150f15f459ff9c78037c34ee31784cdbca0b039", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-09-01T07:23:01Z", "type": "commit"}, {"oid": "58e45616021fe0788dff45b51c5d52004c5f0954", "url": "https://github.com/ls1intum/Artemis/commit/58e45616021fe0788dff45b51c5d52004c5f0954", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-09-01T09:25:43Z", "type": "commit"}, {"oid": "fc263e19c44dc604c29ea68769432a154dbd05bc", "url": "https://github.com/ls1intum/Artemis/commit/fc263e19c44dc604c29ea68769432a154dbd05bc", "message": "try running change detection once component is activated", "committedDate": "2020-09-01T14:09:04Z", "type": "commit"}, {"oid": "671c6900df9d0d13923f045f40f5fb25bc4512f0", "url": "https://github.com/ls1intum/Artemis/commit/671c6900df9d0d13923f045f40f5fb25bc4512f0", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-09-03T16:45:51Z", "type": "commit"}, {"oid": "7f0cc01da556d17699fb02fbe858c6f00f696a5a", "url": "https://github.com/ls1intum/Artemis/commit/7f0cc01da556d17699fb02fbe858c6f00f696a5a", "message": "change detection does not help\nsetting all values of sub components (exercise of programmingExerciseTaskWrapper was not set correctly)", "committedDate": "2020-09-08T06:50:41Z", "type": "commit"}, {"oid": "6cc109934ed9071c5210ac33893326c1e032f051", "url": "https://github.com/ls1intum/Artemis/commit/6cc109934ed9071c5210ac33893326c1e032f051", "message": "Merge branch 'develop' into bugfix/exam/performance-issue-in-exam", "committedDate": "2020-09-21T08:29:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjE5ODUzMw==", "url": "https://github.com/ls1intum/Artemis/pull/2004#discussion_r492198533", "bodyText": "You mean change detection must be triggered manually right? I am a Angular noob :D, so just a question, why is the default behaviour changed here only for the modeling-exam-submission component and not for the other ones like text and so on?", "author": "stefanwaldhauser", "createdAt": "2020-09-21T16:37:44Z", "path": "src/main/webapp/app/exam/participate/exercises/modeling/modeling-exam-submission.component.ts", "diffHunk": "@@ -13,6 +13,8 @@ import { Exercise } from 'app/entities/exercise.model';\n     templateUrl: './modeling-exam-submission.component.html',\n     providers: [{ provide: ExamSubmissionComponent, useExisting: ModelingExamSubmissionComponent }],\n     styleUrls: ['./modeling-exam-submission.component.scss'],\n+    // change deactivation must be triggered manually", "originalCommit": "6cc109934ed9071c5210ac33893326c1e032f051", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}