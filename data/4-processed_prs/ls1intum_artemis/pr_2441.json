{"pr_number": 2441, "pr_title": "Bugfix/administration/upcoming exercises exams", "pr_createdAt": "2020-11-21T09:53:09Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2441", "timeline": [{"oid": "52550120e5c6ec78015f9c3e8ab7c28d18224510", "url": "https://github.com/ls1intum/Artemis/commit/52550120e5c6ec78015f9c3e8ab7c28d18224510", "message": "add undefined checks for upcoming exam and exercise dates and course & ignore those belonging to test courses", "committedDate": "2020-11-21T10:22:50Z", "type": "forcePushed"}, {"oid": "c7c5cbcd90dd88788b453ce005ece3d708aaa0da", "url": "https://github.com/ls1intum/Artemis/commit/c7c5cbcd90dd88788b453ce005ece3d708aaa0da", "message": "add undefined checks for upcoming exam and exercise dates and course & ignore those belonging to test courses", "committedDate": "2020-11-21T11:40:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MzU1NA==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528253554", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                <td *ngIf=\"exercise.releaseDate as exerciseReleaseDate; else noExerciseReleaseDate\">{{ exercise.releaseDate.format(DATE_FORMAT) }}</td>\n          \n          \n            \n                                <td *ngIf=\"exercise.releaseDate as exerciseReleaseDate; else noExerciseReleaseDate\">{{ exerciseReleaseDate.format(DATE_FORMAT) }}</td>", "author": "fde312", "createdAt": "2020-11-21T23:01:02Z", "path": "src/main/webapp/app/admin/upcoming-exams-and-exercises/upcoming-exams-and-exercises.component.html", "diffHunk": "@@ -27,13 +27,16 @@ <h4 jhiTranslate=\"artemisApp.upcomingExamsAndExercises.upcomingExercises\">Upcomi\n                     <td>\n                         <span class=\"bold\">{{ exercise.title }}</span>\n                     </td>\n-                    <td>\n+                    <td *ngIf=\"exercise.course as course; else noExerciseCourse\">\n                         <span class=\"bold\">\n-                            <a [routerLink]=\"['/course-management', exercise.course.id]\">{{ exercise.course.title }}</a>\n+                            <a [routerLink]=\"['/course-management', course.id]\">{{ course.title }}</a>\n                         </span>\n                     </td>\n-                    <td>{{ exercise.releaseDate.format(DATE_FORMAT) }}</td>\n-                    <td>{{ exercise.dueDate.format(DATE_FORMAT) }}</td>\n+                    <ng-template #noExerciseCourse><td>-</td></ng-template>\n+                    <td *ngIf=\"exercise.releaseDate as exerciseReleaseDate; else noExerciseReleaseDate\">{{ exercise.releaseDate.format(DATE_FORMAT) }}</td>", "originalCommit": "c7c5cbcd90dd88788b453ce005ece3d708aaa0da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MzU4OQ==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528253589", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                <td *ngIf=\"exercise.dueDate as exerciseDueDate; else noExerciseDueDate\">{{ exercise.dueDate.format(DATE_FORMAT) }}</td>\n          \n          \n            \n                                <td *ngIf=\"exercise.dueDate as exerciseDueDate; else noExerciseDueDate\">{{ exerciseDueDate.format(DATE_FORMAT) }}</td>", "author": "fde312", "createdAt": "2020-11-21T23:01:28Z", "path": "src/main/webapp/app/admin/upcoming-exams-and-exercises/upcoming-exams-and-exercises.component.html", "diffHunk": "@@ -27,13 +27,16 @@ <h4 jhiTranslate=\"artemisApp.upcomingExamsAndExercises.upcomingExercises\">Upcomi\n                     <td>\n                         <span class=\"bold\">{{ exercise.title }}</span>\n                     </td>\n-                    <td>\n+                    <td *ngIf=\"exercise.course as course; else noExerciseCourse\">\n                         <span class=\"bold\">\n-                            <a [routerLink]=\"['/course-management', exercise.course.id]\">{{ exercise.course.title }}</a>\n+                            <a [routerLink]=\"['/course-management', course.id]\">{{ course.title }}</a>\n                         </span>\n                     </td>\n-                    <td>{{ exercise.releaseDate.format(DATE_FORMAT) }}</td>\n-                    <td>{{ exercise.dueDate.format(DATE_FORMAT) }}</td>\n+                    <ng-template #noExerciseCourse><td>-</td></ng-template>\n+                    <td *ngIf=\"exercise.releaseDate as exerciseReleaseDate; else noExerciseReleaseDate\">{{ exercise.releaseDate.format(DATE_FORMAT) }}</td>\n+                    <ng-template #noExerciseReleaseDate><td>-</td></ng-template>\n+                    <td *ngIf=\"exercise.dueDate as exerciseDueDate; else noExerciseDueDate\">{{ exercise.dueDate.format(DATE_FORMAT) }}</td>", "originalCommit": "c7c5cbcd90dd88788b453ce005ece3d708aaa0da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MzY5MA==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528253690", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                            <a [routerLink]=\"['/course-management', exam.course.id]\">{{ exam.course.title }}</a>\n          \n          \n            \n                                            <a [routerLink]=\"['/course-management', course.id]\">{{ course.title }}</a>", "author": "fde312", "createdAt": "2020-11-21T23:02:27Z", "path": "src/main/webapp/app/admin/upcoming-exams-and-exercises/upcoming-exams-and-exercises.component.html", "diffHunk": "@@ -68,13 +71,16 @@ <h4 jhiTranslate=\"artemisApp.upcomingExamsAndExercises.upcomingExams\">Upcoming E\n                         <td>\n                             <span class=\"bold\">{{ exam.title }}</span>\n                         </td>\n-                        <td>\n+                        <td *ngIf=\"exam.course as course; else noExamCourse\">\n                             <span class=\"bold\">\n                                 <a [routerLink]=\"['/course-management', exam.course.id]\">{{ exam.course.title }}</a>", "originalCommit": "c7c5cbcd90dd88788b453ce005ece3d708aaa0da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MzgyMw==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528253823", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        this.upcomingExercises = res.body === null ? [] : res.body;\n          \n          \n            \n                        this.upcomingExercises = res.body == undefined ? [] : res.body;\n          \n      \n    \n    \n  \n\nWhy are you checking specifically for null? We want to avoid using null use undefined instead!\n== undefined will check for both undefined and null, but please ensure that the value is undefined!", "author": "fde312", "createdAt": "2020-11-21T23:04:41Z", "path": "src/main/webapp/app/admin/upcoming-exams-and-exercises/upcoming-exams-and-exercises.component.ts", "diffHunk": "@@ -24,11 +24,11 @@ export class UpcomingExamsAndExercisesComponent implements OnInit {\n \n     ngOnInit(): void {\n         this.exerciseService.getUpcomingExercises().subscribe((res: ExerciseEntityArrayResponseType) => {\n-            this.upcomingExercises = res.body ?? [];\n+            this.upcomingExercises = res.body === null ? [] : res.body;", "originalCommit": "c7c5cbcd90dd88788b453ce005ece3d708aaa0da", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1NDUyMg==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528254522", "bodyText": "Why did you change the code in the first place? ?? checks for null or undefined see: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#nullish-coalescing", "author": "fde312", "createdAt": "2020-11-21T23:12:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MzgyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMwNTY5Ng==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528305696", "bodyText": "Thanks for the feedback @fde312!\nThe reason behind that is that res.body has the HttpResponse<T>.body: Exam[] | null type. I just checked the other code and it seems I can just do a check like this:  res.body ?? [].", "author": "ivanchimeno", "createdAt": "2020-11-22T09:10:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MzgyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODYwNDMwMw==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528604303", "bodyText": "@ivanchimeno Please use type Exam[] | undefined instead", "author": "fde312", "createdAt": "2020-11-23T10:31:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MzgyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk5NzUyNg==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528997526", "bodyText": "@fde312 I don't think I can change that because res.body is not coming from me. res is of type HttpResponse<Exam[]> and HttpResponse<Exercise[]>. res.body is a property of HttpResponse and has the type readonly body: T | null;", "author": "ivanchimeno", "createdAt": "2020-11-23T21:10:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1MzgyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODI1NDAyNg==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528254026", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        this.upcomingExams = res.body === null ? [] : res.body;\n          \n          \n            \n                        this.upcomingExams = res.body == undefined ? [] : res.body;\n          \n      \n    \n    \n  \n\nsame as above", "author": "fde312", "createdAt": "2020-11-21T23:06:33Z", "path": "src/main/webapp/app/admin/upcoming-exams-and-exercises/upcoming-exams-and-exercises.component.ts", "diffHunk": "@@ -24,11 +24,11 @@ export class UpcomingExamsAndExercisesComponent implements OnInit {\n \n     ngOnInit(): void {\n         this.exerciseService.getUpcomingExercises().subscribe((res: ExerciseEntityArrayResponseType) => {\n-            this.upcomingExercises = res.body ?? [];\n+            this.upcomingExercises = res.body === null ? [] : res.body;\n         });\n \n         this.examManagementService.findAllCurrentAndUpcomingExams().subscribe((res: HttpResponse<Exam[]>) => {\n-            this.upcomingExams = res.body ?? [];\n+            this.upcomingExams = res.body === null ? [] : res.body;", "originalCommit": "c7c5cbcd90dd88788b453ce005ece3d708aaa0da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "01d7e04b316fd154265a82c82924438c3025e74b", "url": "https://github.com/ls1intum/Artemis/commit/01d7e04b316fd154265a82c82924438c3025e74b", "message": "add undefined checks for upcoming exam and exercise dates and course & ignore those belonging to test courses", "committedDate": "2020-11-22T09:15:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODMwOTY3Nw==", "url": "https://github.com/ls1intum/Artemis/pull/2441#discussion_r528309677", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Query(\"select exam from Exam exam where exam.course.testCourse=false and exam.startDate >= :#{#date} order by exam.startDate asc\")\n          \n          \n            \n                @Query(\"select exam from Exam exam where exam.course.testCourse = false and exam.startDate >= :#{#date} order by exam.startDate asc\")", "author": "krusche", "createdAt": "2020-11-22T09:45:08Z", "path": "src/main/java/de/tum/in/www1/artemis/repository/ExamRepository.java", "diffHunk": "@@ -22,7 +22,7 @@\n \n     List<Exam> findByCourseId(Long courseId);\n \n-    @Query(\"select exam from Exam exam where exam.startDate >= :#{#date} order by exam.startDate asc\")\n+    @Query(\"select exam from Exam exam where exam.course.testCourse=false and exam.startDate >= :#{#date} order by exam.startDate asc\")", "originalCommit": "01d7e04b316fd154265a82c82924438c3025e74b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c0cb339d7256bf4bcdb0ce2d4aa28fde2dd63470", "url": "https://github.com/ls1intum/Artemis/commit/c0cb339d7256bf4bcdb0ce2d4aa28fde2dd63470", "message": "add undefined checks for upcoming exam and exercise dates and course & ignore those belonging to test courses", "committedDate": "2020-11-23T21:22:45Z", "type": "commit"}, {"oid": "c0cb339d7256bf4bcdb0ce2d4aa28fde2dd63470", "url": "https://github.com/ls1intum/Artemis/commit/c0cb339d7256bf4bcdb0ce2d4aa28fde2dd63470", "message": "add undefined checks for upcoming exam and exercise dates and course & ignore those belonging to test courses", "committedDate": "2020-11-23T21:22:45Z", "type": "forcePushed"}, {"oid": "7ff49b4fbf8f697fb01dafba5d1d10caf05fed97", "url": "https://github.com/ls1intum/Artemis/commit/7ff49b4fbf8f697fb01dafba5d1d10caf05fed97", "message": "Merge branch 'develop' into bugfix/administration/upcoming-exercises-exams", "committedDate": "2020-11-23T21:41:41Z", "type": "commit"}]}