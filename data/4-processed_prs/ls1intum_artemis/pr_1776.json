{"pr_number": 1776, "pr_title": "Fix exam quiz submissions not being saved properly", "pr_createdAt": "2020-06-30T20:48:09Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1776", "timeline": [{"oid": "752f266a58020418ea9da0051f51cb0bcedda957", "url": "https://github.com/ls1intum/Artemis/commit/752f266a58020418ea9da0051f51cb0bcedda957", "message": "force save submission when the user clicks on save\n\nimplement can deactivate\nadd TODO for generic message\nsmall code refactoring", "committedDate": "2020-06-30T20:45:14Z", "type": "commit"}, {"oid": "8b90c662545dd26cfcc317e5f9e72ed9cd7eca41", "url": "https://github.com/ls1intum/Artemis/commit/8b90c662545dd26cfcc317e5f9e72ed9cd7eca41", "message": "Error message when saving submission fails", "committedDate": "2020-06-30T21:57:02Z", "type": "commit"}, {"oid": "2580299aa7c5a4a9b1bcbdedf46264b6c083dbeb", "url": "https://github.com/ls1intum/Artemis/commit/2580299aa7c5a4a9b1bcbdedf46264b6c083dbeb", "message": "Fix guard.", "committedDate": "2020-06-30T22:06:20Z", "type": "commit"}, {"oid": "fbc2db4787bfafee66756aac19503a457acf90e3", "url": "https://github.com/ls1intum/Artemis/commit/fbc2db4787bfafee66756aac19503a457acf90e3", "message": "Merge remote-tracking branch 'origin/bugfix/exam-quiz-save' into bugfix/exam-quiz-save", "committedDate": "2020-06-30T22:07:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NzU1MA==", "url": "https://github.com/ls1intum/Artemis/pull/1776#discussion_r448147550", "bodyText": "Suggestion: this.currentSubmissionComponent && force ||", "author": "TobiasPr", "createdAt": "2020-07-01T06:41:16Z", "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -233,13 +255,15 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n      *      --> in this case, we can even save all submissions with isSynced = true\n      *\n      * @param intervalSave is set to true, if the save was triggered from the interval timer\n+     * @param force is set to true, when the current exercise should be saved (even if there are no changes)\n      */\n-    triggerSave(intervalSave: boolean) {\n+    triggerSave(intervalSave: boolean, force: boolean) {\n         // before the request, we would mark the submission as isSynced = true\n         // right after the response - in case it was successful - we mark the submission as isSynced = false\n         this.autoSaveTimer = 0;\n \n-        if (this.currentSubmissionComponent?.hasUnsavedChanges()) {\n+        if (force || this.currentSubmissionComponent?.hasUnsavedChanges()) {", "originalCommit": "fbc2db4787bfafee66756aac19503a457acf90e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2MTQ4Mg==", "url": "https://github.com/ls1intum/Artemis/pull/1776#discussion_r448161482", "bodyText": "How can it happen that the currentSubmissionComponent is not available?", "author": "krusche", "createdAt": "2020-07-01T07:12:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NzU1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NzU4Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1776#discussion_r448147586", "bodyText": "why do we try to update? is the this.disconnected that unreliable?", "author": "TobiasPr", "createdAt": "2020-07-01T06:41:20Z", "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -256,31 +280,32 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n         });\n \n         // if no connection available -> don't try to sync\n-        if (!this.disconnected) {\n+        if (force || !this.disconnected) {", "originalCommit": "fbc2db4787bfafee66756aac19503a457acf90e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE2MTA1OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1776#discussion_r448161059", "bodyText": "Yes, it\u2019s unreliable and if the student clicks on save we should at least try it.\nAlso the connection status shows the Websocket status, a Rest call could still work even if the Websocket is not connected (for whatever reason)", "author": "krusche", "createdAt": "2020-07-01T07:12:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE0NzU4Ng=="}], "type": "inlineReview"}, {"oid": "6b779cf704d161a0a9812921af13d9d1bcaa2aef", "url": "https://github.com/ls1intum/Artemis/commit/6b779cf704d161a0a9812921af13d9d1bcaa2aef", "message": "Merge branch 'develop' into bugfix/exam-quiz-save\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exam-participation.component.ts\n#\tsrc/main/webapp/i18n/de/exam.json\n#\tsrc/main/webapp/i18n/en/exam.json", "committedDate": "2020-07-01T13:26:06Z", "type": "commit"}, {"oid": "411f1b071db542071091bfcb1e15e0387a451f3a", "url": "https://github.com/ls1intum/Artemis/commit/411f1b071db542071091bfcb1e15e0387a451f3a", "message": "save when only 1 second is left\nthrottle synchronization errors\nlower synchronization timer 60s -> 30s\ndon't display error when exam request is still pending -> only loading indicator in artemis header bar\nchange location of errors -> below navigation bar / above summary page", "committedDate": "2020-07-01T17:38:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUwNjg0OA==", "url": "https://github.com/ls1intum/Artemis/pull/1776#discussion_r448506848", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"pendingChanges\": \"Alle ungespeicherten \u00c4nderungen gehen beim Verlassen der Klausur verloren. M\u00f6chtest du sicher fortfahren?\"\n          \n          \n            \n                        \"pendingChanges\": \"Alle ungespeicherten \u00c4nderungen gehen beim Verlassen der Klausur verloren. Bist du sicher, dass du fortfahren m\u00f6chtest?\"", "author": "MaisiKoleni", "createdAt": "2020-07-01T17:17:03Z", "path": "src/main/webapp/i18n/de/exam.json", "diffHunk": "@@ -49,7 +49,9 @@\n             \"submitOtherExercise\": \"Speichern & Weiter\",\n             \"submitLastExercise\": \"Speichern\",\n             \"greeting\": \"Hallo {{ fullName }}, willkommen zu \\\"{{ title }}\\\"\",\n-            \"points\": \"Punkte\"\n+            \"points\": \"Punkte\",\n+            \"saveSubmissionError\": \"Die \u00c4nderungen konnten nicht gespeichert werden! Bitte stelle sicher, dass du online bist und speichere nochmal.\",\n+            \"pendingChanges\": \"Alle ungespeicherten \u00c4nderungen gehen beim Verlassen der Klausur verloren. M\u00f6chtest du sicher fortfahren?\"", "originalCommit": "6b779cf704d161a0a9812921af13d9d1bcaa2aef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUxMDM3NA==", "url": "https://github.com/ls1intum/Artemis/pull/1776#discussion_r448510374", "bodyText": "I think the wording of M\u00f6chtest du sicher fortfahren? is strange or unusual (maybe even misleading because \"sicher\" seems to describe the way how we continue), I couldn't find out that this is common (using Google) and DeepL suggests something like Bist du sicher, dass du fortfahren willst? which also sounds much more familiar and clear to me.", "author": "MaisiKoleni", "createdAt": "2020-07-01T17:23:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUwNjg0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk2NTcyNQ==", "url": "https://github.com/ls1intum/Artemis/pull/1776#discussion_r448965725", "bodyText": "Done", "author": "TobiasPr", "createdAt": "2020-07-02T12:30:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUwNjg0OA=="}], "type": "inlineReview"}, {"oid": "347332d2ad014d4a7d72ba10d61c33a352095c4b", "url": "https://github.com/ls1intum/Artemis/commit/347332d2ad014d4a7d72ba10d61c33a352095c4b", "message": "simplify quiz isSynced/hasUnsavedChanges status change by using existing onSelectionChanged event of sub components", "committedDate": "2020-07-01T19:52:50Z", "type": "commit"}, {"oid": "a9bec99b3ab7e789cd9f04fad91472be57e66c88", "url": "https://github.com/ls1intum/Artemis/commit/a9bec99b3ab7e789cd9f04fad91472be57e66c88", "message": "immediately show yellow isSynced state for text editor as well", "committedDate": "2020-07-01T19:55:59Z", "type": "commit"}, {"oid": "0576d9f65e4050fa94205d65a80fc6505a705f4a", "url": "https://github.com/ls1intum/Artemis/commit/0576d9f65e4050fa94205d65a80fc6505a705f4a", "message": "add TODO to change how modeling exercises handled changes", "committedDate": "2020-07-01T19:58:26Z", "type": "commit"}, {"oid": "a3cb6a03a6f9d0a9f0125c5977b846d20feabd63", "url": "https://github.com/ls1intum/Artemis/commit/a3cb6a03a6f9d0a9f0125c5977b846d20feabd63", "message": "show edit symbol if changes are not synced", "committedDate": "2020-07-01T20:06:02Z", "type": "commit"}, {"oid": "97cd3df6fd853e01dedea50b6b2f0ff2e8f17344", "url": "https://github.com/ls1intum/Artemis/commit/97cd3df6fd853e01dedea50b6b2f0ff2e8f17344", "message": "clear auto save interval after exam has ended", "committedDate": "2020-07-01T21:35:55Z", "type": "commit"}, {"oid": "08ffdb58c748026e17c5383b08ec8d77d1c5074e", "url": "https://github.com/ls1intum/Artemis/commit/08ffdb58c748026e17c5383b08ec8d77d1c5074e", "message": "Better styling for error alert", "committedDate": "2020-07-01T21:38:20Z", "type": "commit"}, {"oid": "ce983dcfef467ac7e4057a05d5c2c0efb91e2ee4", "url": "https://github.com/ls1intum/Artemis/commit/ce983dcfef467ac7e4057a05d5c2c0efb91e2ee4", "message": "Remove duplicated warning dialog", "committedDate": "2020-07-01T22:06:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc3NTkyNA==", "url": "https://github.com/ls1intum/Artemis/pull/1776#discussion_r448775924", "bodyText": "Why do we need .bind(this) here? Is onSelectionChanged() not sufficient?", "author": "jpbernius", "createdAt": "2020-07-02T06:29:42Z", "path": "src/main/webapp/app/exam/participate/exercises/quiz/quiz-exam-submission.component.html", "diffHunk": "@@ -47,6 +47,7 @@ <h2>\n                 *ngIf=\"question.type === MULTIPLE_CHOICE\"\n                 [question]=\"question\"\n                 [(selectedAnswerOptions)]=\"selectedAnswerOptions[question.id]\"\n+                [fnOnSelection]=\"onSelectionChanged.bind(this)\"", "originalCommit": "ce983dcfef467ac7e4057a05d5c2c0efb91e2ee4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk5NTg2MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1776#discussion_r448995861", "bodyText": "just copied from the other part. As it is working, I don't want to touch this ;-)", "author": "krusche", "createdAt": "2020-07-02T13:19:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODc3NTkyNA=="}], "type": "inlineReview"}, {"oid": "56cdd1e07034d0a7e116acbc183798204ce1f161", "url": "https://github.com/ls1intum/Artemis/commit/56cdd1e07034d0a7e116acbc183798204ce1f161", "message": "Code Editor: Set submission.isSynced === CommitState.CLEAN.\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-07-02T08:37:57Z", "type": "commit"}, {"oid": "15eb53913175f680d4bbe7a4ef400bce7efdbfef", "url": "https://github.com/ls1intum/Artemis/commit/15eb53913175f680d4bbe7a4ef400bce7efdbfef", "message": "isSynced = false on file change\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-07-02T09:26:15Z", "type": "commit"}, {"oid": "82c51e5147107e4e5bef81284c57235d0f974efa", "url": "https://github.com/ls1intum/Artemis/commit/82c51e5147107e4e5bef81284c57235d0f974efa", "message": "Merge branch 'develop' into bugfix/exam-quiz-save\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exam-participation.component.html\n#\tsrc/main/webapp/app/exam/participate/exam-participation.component.ts", "committedDate": "2020-07-02T11:55:59Z", "type": "commit"}, {"oid": "fb84a0917456c5b3d9024e9cb5bd86821e9294d9", "url": "https://github.com/ls1intum/Artemis/commit/fb84a0917456c5b3d9024e9cb5bd86821e9294d9", "message": "remove magic wait, because it blocks the user interface unnecessarily", "committedDate": "2020-07-02T12:32:03Z", "type": "commit"}, {"oid": "35262b309e951f08754e18132f4837010ad57c73", "url": "https://github.com/ls1intum/Artemis/commit/35262b309e951f08754e18132f4837010ad57c73", "message": "change pendingChanges translation -> Christians suggestions", "committedDate": "2020-07-02T12:39:56Z", "type": "commit"}, {"oid": "f02659b0e8fe7a12588d63d189d23ce0fc6dc60d", "url": "https://github.com/ls1intum/Artemis/commit/f02659b0e8fe7a12588d63d189d23ce0fc6dc60d", "message": "Merge remote-tracking branch 'origin/bugfix/exam-quiz-save' into bugfix/exam-quiz-save", "committedDate": "2020-07-02T12:40:09Z", "type": "commit"}, {"oid": "b12ad874bd1a308f74a5a1fc2eb8c7d124490e5a", "url": "https://github.com/ls1intum/Artemis/commit/b12ad874bd1a308f74a5a1fc2eb8c7d124490e5a", "message": "improve wording", "committedDate": "2020-07-02T12:58:10Z", "type": "commit"}, {"oid": "9c3d60054e6e542daa91e091f3645ab56faa2063", "url": "https://github.com/ls1intum/Artemis/commit/9c3d60054e6e542daa91e091f3645ab56faa2063", "message": "Merge branch 'develop' into bugfix/exam-quiz-save", "committedDate": "2020-07-02T13:20:08Z", "type": "commit"}]}