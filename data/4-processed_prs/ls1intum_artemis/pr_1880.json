{"pr_number": 1880, "pr_title": "[Exam] Code-Editor Bugfixes", "pr_createdAt": "2020-07-14T09:25:33Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1880", "timeline": [{"oid": "a0002a4dad3479339d5c23f6ce88ec73c80963e6", "url": "https://github.com/ls1intum/Artemis/commit/a0002a4dad3479339d5c23f6ce88ec73c80963e6", "message": "Show isSynced exercise status when first opening the exam", "committedDate": "2020-07-14T09:06:06Z", "type": "commit"}, {"oid": "02e6337bb53f732ba816fc4780ca5772b2823c45", "url": "https://github.com/ls1intum/Artemis/commit/02e6337bb53f732ba816fc4780ca5772b2823c45", "message": "code refactoring\nRemove double check for submission error\nDo not rethrow error after handle", "committedDate": "2020-07-14T09:21:56Z", "type": "commit"}, {"oid": "c7f856788ea6597110d0b61aed7737d93ac8842d", "url": "https://github.com/ls1intum/Artemis/commit/c7f856788ea6597110d0b61aed7737d93ac8842d", "message": "test approach", "committedDate": "2020-07-14T09:50:09Z", "type": "commit"}, {"oid": "06eab931026e819ae18d1f995044c35930e2b529", "url": "https://github.com/ls1intum/Artemis/commit/06eab931026e819ae18d1f995044c35930e2b529", "message": "fix typescript warnings", "committedDate": "2020-07-14T10:28:12Z", "type": "commit"}, {"oid": "d3622309479b230c53cc274dc94b246028ccebb2", "url": "https://github.com/ls1intum/Artemis/commit/d3622309479b230c53cc274dc94b246028ccebb2", "message": "Use new instances of domain dependent services for each ExamCodeEditor", "committedDate": "2020-07-14T13:13:35Z", "type": "commit"}, {"oid": "26f83837c19cafd572f491346502c68ea1853ddb", "url": "https://github.com/ls1intum/Artemis/commit/26f83837c19cafd572f491346502c68ea1853ddb", "message": "Merge branch 'develop' into bugfix/code-editor/bulletproofing", "committedDate": "2020-07-14T14:00:31Z", "type": "commit"}, {"oid": "53ce0d7bb7bf56e2d199045f1617ca839df9d06d", "url": "https://github.com/ls1intum/Artemis/commit/53ce0d7bb7bf56e2d199045f1617ca839df9d06d", "message": "Do not lookup an undifined filename", "committedDate": "2020-07-14T14:17:24Z", "type": "commit"}, {"oid": "211c7fa30775977f6e120037b8f9ec3a05521e0c", "url": "https://github.com/ls1intum/Artemis/commit/211c7fa30775977f6e120037b8f9ec3a05521e0c", "message": "check for undefined fileSession", "committedDate": "2020-07-14T14:27:04Z", "type": "commit"}, {"oid": "c5ff6983d32b8712505c913f90ea8b8ce63a6275", "url": "https://github.com/ls1intum/Artemis/commit/c5ff6983d32b8712505c913f90ea8b8ce63a6275", "message": "Merge branch 'bugfix/code-editor/bulletproofing' of github.com:ls1intum/Artemis into bugfix/code-editor/bulletproofing", "committedDate": "2020-07-14T14:27:27Z", "type": "commit"}, {"oid": "0f8bd69309cb279e2a013e0bb4eb1e8cce874380", "url": "https://github.com/ls1intum/Artemis/commit/0f8bd69309cb279e2a013e0bb4eb1e8cce874380", "message": "Merge branch 'develop' into bugfix/code-editor/bulletproofing", "committedDate": "2020-07-14T14:29:17Z", "type": "commit"}, {"oid": "8236ef552204bc1f8ab113046d6221a37f08d494", "url": "https://github.com/ls1intum/Artemis/commit/8236ef552204bc1f8ab113046d6221a37f08d494", "message": "Merge remote-tracking branch 'origin/develop' into bugfix/code-editor/bulletproofing", "committedDate": "2020-07-14T14:29:30Z", "type": "commit"}, {"oid": "f23b2a4859d244ea89514a6a37d6e8e40bfaa1a1", "url": "https://github.com/ls1intum/Artemis/commit/f23b2a4859d244ea89514a6a37d6e8e40bfaa1a1", "message": "Merge branch 'bugfix/code-editor/bulletproofing' of https://github.com/ls1intum/Artemis into bugfix/code-editor/bulletproofing", "committedDate": "2020-07-14T14:29:47Z", "type": "commit"}, {"oid": "bba49c02b184698fac18da71bd256ff7b79928f8", "url": "https://github.com/ls1intum/Artemis/commit/bba49c02b184698fac18da71bd256ff7b79928f8", "message": "Merge branch 'develop' into bugfix/code-editor/bulletproofing", "committedDate": "2020-07-14T14:38:33Z", "type": "commit"}, {"oid": "ce429ccddb2a646893d82f792faccaa315edd613", "url": "https://github.com/ls1intum/Artemis/commit/ce429ccddb2a646893d82f792faccaa315edd613", "message": "Revert \"test approach\"\n\nThis reverts commit c7f856788ea6597110d0b61aed7737d93ac8842d.", "committedDate": "2020-07-14T15:31:24Z", "type": "commit"}, {"oid": "f8f47c0440a42e57afd91d1c6125499c64d1f426", "url": "https://github.com/ls1intum/Artemis/commit/f8f47c0440a42e57afd91d1c6125499c64d1f426", "message": "fix typescript warning", "committedDate": "2020-07-14T15:32:23Z", "type": "commit"}, {"oid": "17bb06abc47cdf2d6fe036fb2fe3ff6cef8093e0", "url": "https://github.com/ls1intum/Artemis/commit/17bb06abc47cdf2d6fe036fb2fe3ff6cef8093e0", "message": "set the submitted flag after successful commit", "committedDate": "2020-07-14T15:53:02Z", "type": "commit"}, {"oid": "8525fead69d21a1909f4f6b41f17a8e5528aad72", "url": "https://github.com/ls1intum/Artemis/commit/8525fead69d21a1909f4f6b41f17a8e5528aad72", "message": "Add a check for undefined lookup", "committedDate": "2020-07-14T15:53:21Z", "type": "commit"}, {"oid": "3ccfa538b9feea680e404fe55e21c6b56c13505d", "url": "https://github.com/ls1intum/Artemis/commit/3ccfa538b9feea680e404fe55e21c6b56c13505d", "message": "Merge branch 'bugfix/code-editor/bulletproofing' of github.com:ls1intum/Artemis into bugfix/code-editor/bulletproofing", "committedDate": "2020-07-14T15:53:39Z", "type": "commit"}, {"oid": "fe6fe74ca32405b4635c8aa8dc675779e635327a", "url": "https://github.com/ls1intum/Artemis/commit/fe6fe74ca32405b4635c8aa8dc675779e635327a", "message": "Update the isSynced and submitted flag after commit", "committedDate": "2020-07-14T16:13:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUyNTAzOQ==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454525039", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    console.log(`Constructor ExamCodeEditorStudentContainerComponent with id ${this.componentId}`);\n          \n      \n    \n    \n  \n\nI assume this is a debug statement and can be removed for production", "author": "JonasPetry", "createdAt": "2020-07-14T17:32:47Z", "path": "src/main/webapp/app/exam/participate/exercises/programming/code-editor/exam-code-editor-student-container.component.ts", "diffHunk": "@@ -47,6 +66,8 @@ export class ExamCodeEditorStudentContainerComponent extends CodeEditorContainer\n         fileService: CodeEditorFileService,\n     ) {\n         super(null, translateService, null, jhiAlertService, sessionService, fileService);\n+        this.componentId = Math.random() * 1000000000;\n+        console.log(`Constructor ExamCodeEditorStudentContainerComponent with id ${this.componentId}`);", "originalCommit": "fe6fe74ca32405b4635c8aa8dc675779e635327a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUyNTc4OA==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454525788", "bodyText": "I would suggest to remove it if it is not needed anymore instead of commenting it out.", "author": "JonasPetry", "createdAt": "2020-07-14T17:34:03Z", "path": "src/main/webapp/app/exam/participate/exercises/programming/code-editor/exam-code-editor-student-container.component.ts", "diffHunk": "@@ -63,21 +84,24 @@ export class ExamCodeEditorStudentContainerComponent extends CodeEditorContainer\n     }\n \n     reload(): void {\n-        this.ngOnInit();\n-        if (this.instructions) {\n-            this.instructions.refreshInstructions();\n-        }\n+        // this.ngOnInit();\n+        // if (this.instructions) {\n+        //     this.instructions.refreshInstructions();\n+        // }", "originalCommit": "fe6fe74ca32405b4635c8aa8dc675779e635327a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU0MDM3OA==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454540378", "bodyText": "This depends on the outcome of the reviews :D", "author": "anditurdiu", "createdAt": "2020-07-14T17:57:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUyNTc4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUyNjQ3Mg==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454526472", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    console.log(`Constructor ProgrammingExamSubmissionComponent with id ${this.componentId}`);\n          \n      \n    \n    \n  \n\nsame here", "author": "JonasPetry", "createdAt": "2020-07-14T17:35:10Z", "path": "src/main/webapp/app/exam/participate/exercises/programming/programming-exam-submission.component.ts", "diffHunk": "@@ -41,6 +41,15 @@ export class ProgrammingExamSubmissionComponent extends ExamSubmissionComponent\n     readonly ButtonType = ButtonType;\n     readonly ButtonSize = ButtonSize;\n \n+    // ComponentId to verify uniqueness\n+    componentId: number;\n+\n+    constructor() {\n+        super();\n+        this.componentId = Math.random() * 1000000000;\n+        console.log(`Constructor ProgrammingExamSubmissionComponent with id ${this.componentId}`);", "originalCommit": "fe6fe74ca32405b4635c8aa8dc675779e635327a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUyNzY5MA==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454527690", "bodyText": "Not added in this PR, but I would suggest to remove/refactor this comment as I have no clue what session this is about.", "author": "JonasPetry", "createdAt": "2020-07-14T17:37:03Z", "path": "src/main/webapp/app/exercises/programming/shared/code-editor/ace/code-editor-ace.component.ts", "diffHunk": "@@ -194,20 +194,22 @@ export class CodeEditorAceComponent implements AfterViewInit, OnChanges, OnDestr\n      */\n     onFileTextChanged(code: string) {\n         /** Is the code different to what we have on our session? This prevents us from saving when a file is loaded **/", "originalCommit": "fe6fe74ca32405b4635c8aa8dc675779e635327a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUzOTQ1Mw==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454539453", "bodyText": "Yeah, this comment is vague, however, we were not sure exactly how to define the behaviour in a better way here. The fileSession is the cache basically where we keep track of the file's contents so that we do not have to call the getFileContent from the server every time.", "author": "anditurdiu", "createdAt": "2020-07-14T17:55:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUyNzY5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUyODM3MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454528371", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    console.log(`Constructor DomainDependentService (${this.constructor.name}) with id ${this.componentId}`);", "author": "JonasPetry", "createdAt": "2020-07-14T17:38:11Z", "path": "src/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-domain-dependent.service.ts", "diffHunk": "@@ -12,7 +12,13 @@ export abstract class DomainDependentService implements OnDestroy {\n     protected domain: DomainChange;\n     protected domainChangeSubscription: Subscription;\n \n-    constructor(private domainService: DomainService) {}\n+    // ComponentId to verify uniqueness\n+    componentId: number;\n+\n+    constructor(private domainService: DomainService) {\n+        this.componentId = Math.random() * 1000000000;\n+        console.log(`Constructor DomainDependentService (${this.constructor.name}) with id ${this.componentId}`);", "originalCommit": "fe6fe74ca32405b4635c8aa8dc675779e635327a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUyODU5NA==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454528594", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    console.log(`Destroy DomainDependentService (${this.constructor.toString()}) with id ${this.componentId}`);", "author": "JonasPetry", "createdAt": "2020-07-14T17:38:31Z", "path": "src/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-domain-dependent.service.ts", "diffHunk": "@@ -44,5 +50,6 @@ export abstract class DomainDependentService implements OnDestroy {\n         if (this.domainChangeSubscription) {\n             this.domainChangeSubscription.unsubscribe();\n         }\n+        console.log(`Destroy DomainDependentService (${this.constructor.toString()}) with id ${this.componentId}`);", "originalCommit": "fe6fe74ca32405b4635c8aa8dc675779e635327a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUyODc3Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454528776", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    console.log(`Constructor Service with id ${this.componentId}`);", "author": "JonasPetry", "createdAt": "2020-07-14T17:38:49Z", "path": "src/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-domain.service.ts", "diffHunk": "@@ -11,7 +11,13 @@ export class DomainService {\n     protected domain: DomainChange;\n     private subject = new BehaviorSubject<DomainParticipationChange | DomainTestRepositoryChange | null>(null);\n \n-    constructor() {}\n+    // ComponentId to verify uniqueness\n+    componentId: number;\n+\n+    constructor() {\n+        this.componentId = Math.random() * 1000000000;\n+        console.log(`Constructor Service with id ${this.componentId}`);", "originalCommit": "fe6fe74ca32405b4635c8aa8dc675779e635327a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8b8277674ee1897706d93361f1c52e68e6e95d48", "url": "https://github.com/ls1intum/Artemis/commit/8b8277674ee1897706d93361f1c52e68e6e95d48", "message": "Remove logging", "committedDate": "2020-07-14T17:49:26Z", "type": "commit"}, {"oid": "67c71976905ec241bfc0f4d5ec5c71cc67ff2fbc", "url": "https://github.com/ls1intum/Artemis/commit/67c71976905ec241bfc0f4d5ec5c71cc67ff2fbc", "message": "add guard against undefined", "committedDate": "2020-07-14T17:53:02Z", "type": "commit"}, {"oid": "a4cc9d6e29a229a2970909767677a9f888bf068c", "url": "https://github.com/ls1intum/Artemis/commit/a4cc9d6e29a229a2970909767677a9f888bf068c", "message": "Merge branch 'bugfix/code-editor/bulletproofing' of github.com:ls1intum/Artemis into bugfix/code-editor/bulletproofing", "committedDate": "2020-07-14T18:01:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDYyNzE0Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454627146", "bodyText": "I did not know this was possible. Cool solution! \ud83d\ude0e", "author": "jpbernius", "createdAt": "2020-07-14T20:33:12Z", "path": "src/main/webapp/app/exam/participate/exercises/programming/code-editor/exam-code-editor-student-container.component.ts", "diffHunk": "@@ -16,10 +16,26 @@ import { CodeEditorFileBrowserComponent } from 'app/exercises/programming/shared\n import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n import { CommitState, DomainType, FileChange } from 'app/exercises/programming/shared/code-editor/model/code-editor.model';\n import { DomainService } from 'app/exercises/programming/shared/code-editor/service/code-editor-domain.service';\n+import { CodeEditorConflictStateService } from 'app/exercises/programming/shared/code-editor/service/code-editor-conflict-state.service';\n+import { CodeEditorSubmissionService } from 'app/exercises/programming/shared/code-editor/service/code-editor-submission.service';\n+import {\n+    CodeEditorBuildLogService,\n+    CodeEditorRepositoryFileService,\n+    CodeEditorRepositoryService,\n+} from 'app/exercises/programming/shared/code-editor/service/code-editor-repository.service';\n \n @Component({\n     selector: 'jhi-exam-code-editor-student',\n     templateUrl: './exam-code-editor-student-container.component.html',\n+    providers: [\n+        CodeEditorConflictStateService,\n+        CodeEditorSessionService,\n+        CodeEditorSubmissionService,\n+        CodeEditorBuildLogService,\n+        CodeEditorRepositoryFileService,\n+        CodeEditorRepositoryService,\n+        DomainService,\n+    ],", "originalCommit": "a4cc9d6e29a229a2970909767677a9f888bf068c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDYyNzc4MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1880#discussion_r454627781", "bodyText": "\ud83d\ude0d", "author": "jpbernius", "createdAt": "2020-07-14T20:34:23Z", "path": "src/main/webapp/app/exercises/programming/shared/code-editor/service/code-editor-repository.service.ts", "diffHunk": "@@ -193,7 +193,7 @@ export class CodeEditorRepositoryFileService extends DomainDependentEndpointServ\n                 }\n                 this.fileUpdateSubject.next(fileSubmission);\n             }),\n-            catchError((_) => {\n+            catchError(() => {", "originalCommit": "a4cc9d6e29a229a2970909767677a9f888bf068c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}