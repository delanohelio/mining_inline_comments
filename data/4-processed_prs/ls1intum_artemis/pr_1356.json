{"pr_number": 1356, "pr_title": "adapt the new text assessment version to the SGI feature", "pr_createdAt": "2020-04-27T13:00:25Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1356", "timeline": [{"oid": "8bbb69340cbc40cb85cf046a7676bda079562755", "url": "https://github.com/ls1intum/Artemis/commit/8bbb69340cbc40cb85cf046a7676bda079562755", "message": "adapt the new text assessment version to the SGI feature by allowing drop on the new text assessment feedback layout", "committedDate": "2020-04-27T12:51:11Z", "type": "commit"}, {"oid": "57c38c19f3aa6015f4efbe9ed054b7268afc305b", "url": "https://github.com/ls1intum/Artemis/commit/57c38c19f3aa6015f4efbe9ed054b7268afc305b", "message": "Merge branch 'develop' into feature/text-assessment/adapt-to-SGI", "committedDate": "2020-04-28T06:48:53Z", "type": "commit"}, {"oid": "fe7cecd88adf9802b71036484d5aae6d92e5ef97", "url": "https://github.com/ls1intum/Artemis/commit/fe7cecd88adf9802b71036484d5aae6d92e5ef97", "message": "Merge branch 'develop' into feature/text-assessment/adapt-to-SGI", "committedDate": "2020-04-28T09:12:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ5MDE3Mg==", "url": "https://github.com/ls1intum/Artemis/pull/1356#discussion_r416490172", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Connects the SGI with the Feedback of a Submission Element\n          \n          \n            \n                 * @param {Event} event - The drop event\n          \n          \n            \n                 * the SGI element sent on drag in processed in this method\n          \n          \n            \n                 * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n          \n          \n            \n                 */\n          \n          \n            \n                drop(event: any) {\n          \n          \n            \n                 * Connects the structured grading instructions with the feedback of a text block\n          \n          \n            \n                 * @param {Event} event - The drop event\n          \n          \n            \n                 * the SGI element sent on drag in processed in this method\n          \n          \n            \n                 * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n          \n          \n            \n                 */\n          \n          \n            \n                dropStructuredGradingInstruction(event: any) {", "author": "jpbernius", "createdAt": "2020-04-28T10:04:17Z", "path": "src/main/webapp/app/exercises/text/assess-new/textblock-feedback-editor/textblock-feedback-editor.component.ts", "diffHunk": "@@ -69,4 +69,26 @@ export class TextblockFeedbackEditorComponent implements AfterViewInit {\n     didChange(): void {\n         this.feedbackChange.emit(this.feedback);\n     }\n+    /**\n+     * Allows the drop of an SGI Element\n+     */\n+    allowDrop(event: DragEvent) {\n+        event.preventDefault();\n+    }\n+    /**\n+     * Connects the SGI with the Feedback of a Submission Element\n+     * @param {Event} event - The drop event\n+     * the SGI element sent on drag in processed in this method\n+     * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n+     */\n+    drop(event: any) {", "originalCommit": "fe7cecd88adf9802b71036484d5aae6d92e5ef97", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ5MjA5OA==", "url": "https://github.com/ls1intum/Artemis/pull/1356#discussion_r416492098", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    const credits = instruction.credits;\n          \n          \n            \n                    const feedback = instruction.feedback;\n          \n          \n            \n                    this.feedback.credits = credits;\n          \n          \n            \n                    this.feedback.detailText = feedback;\n          \n          \n            \n                    this.feedback.credits = instruction.credits;\n          \n          \n            \n                    this.feedback.detailText = instruction.feedback;", "author": "jpbernius", "createdAt": "2020-04-28T10:07:27Z", "path": "src/main/webapp/app/exercises/text/assess-new/textblock-feedback-editor/textblock-feedback-editor.component.ts", "diffHunk": "@@ -69,4 +69,26 @@ export class TextblockFeedbackEditorComponent implements AfterViewInit {\n     didChange(): void {\n         this.feedbackChange.emit(this.feedback);\n     }\n+    /**\n+     * Allows the drop of an SGI Element\n+     */\n+    allowDrop(event: DragEvent) {\n+        event.preventDefault();\n+    }\n+    /**\n+     * Connects the SGI with the Feedback of a Submission Element\n+     * @param {Event} event - The drop event\n+     * the SGI element sent on drag in processed in this method\n+     * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n+     */\n+    drop(event: any) {\n+        event.preventDefault();\n+        const data = event.dataTransfer.getData('text');\n+        const instruction = JSON.parse(data);\n+        const credits = instruction.credits;\n+        const feedback = instruction.feedback;\n+        this.feedback.credits = credits;\n+        this.feedback.detailText = feedback;", "originalCommit": "fe7cecd88adf9802b71036484d5aae6d92e5ef97", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ5MzIxMg==", "url": "https://github.com/ls1intum/Artemis/pull/1356#discussion_r416493212", "bodyText": "I think this should be in a service. Do you have a similar code for modeling as well?\nI could even imagine a service method like so:\nupdateFeedbackWithStructuredGradingInstructionevent(feedback: Feedback, event: any): void", "author": "jpbernius", "createdAt": "2020-04-28T10:09:15Z", "path": "src/main/webapp/app/exercises/text/assess-new/textblock-feedback-editor/textblock-feedback-editor.component.ts", "diffHunk": "@@ -69,4 +69,26 @@ export class TextblockFeedbackEditorComponent implements AfterViewInit {\n     didChange(): void {\n         this.feedbackChange.emit(this.feedback);\n     }\n+    /**\n+     * Allows the drop of an SGI Element\n+     */\n+    allowDrop(event: DragEvent) {\n+        event.preventDefault();\n+    }\n+    /**\n+     * Connects the SGI with the Feedback of a Submission Element\n+     * @param {Event} event - The drop event\n+     * the SGI element sent on drag in processed in this method\n+     * the corresponding drag method is in StructuredGradingInstructionsAssessmentLayoutComponent\n+     */\n+    drop(event: any) {\n+        event.preventDefault();\n+        const data = event.dataTransfer.getData('text');\n+        const instruction = JSON.parse(data);", "originalCommit": "fe7cecd88adf9802b71036484d5aae6d92e5ef97", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ5MzY5MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1356#discussion_r416493691", "bodyText": "I think this method should use a better name. Currently, I would prefer $event.preventDefault() in the template.", "author": "jpbernius", "createdAt": "2020-04-28T10:10:07Z", "path": "src/main/webapp/app/exercises/text/assess-new/textblock-feedback-editor/textblock-feedback-editor.component.ts", "diffHunk": "@@ -69,4 +69,26 @@ export class TextblockFeedbackEditorComponent implements AfterViewInit {\n     didChange(): void {\n         this.feedbackChange.emit(this.feedback);\n     }\n+    /**\n+     * Allows the drop of an SGI Element\n+     */\n+    allowDrop(event: DragEvent) {\n+        event.preventDefault();\n+    }", "originalCommit": "fe7cecd88adf9802b71036484d5aae6d92e5ef97", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c3b8f477c26820bac975e1f40eaa12fd05080348", "url": "https://github.com/ls1intum/Artemis/commit/c3b8f477c26820bac975e1f40eaa12fd05080348", "message": "apply feedback", "committedDate": "2020-04-28T10:46:09Z", "type": "commit"}, {"oid": "31cb999a38057c6c4df01541606d3355acd96a7f", "url": "https://github.com/ls1intum/Artemis/commit/31cb999a38057c6c4df01541606d3355acd96a7f", "message": "refactor code", "committedDate": "2020-04-28T12:06:39Z", "type": "commit"}, {"oid": "cf184d7c6e5dcfb05d54e58c348aab8d4e967771", "url": "https://github.com/ls1intum/Artemis/commit/cf184d7c6e5dcfb05d54e58c348aab8d4e967771", "message": "refactor modeling and file upload exercises accordingly", "committedDate": "2020-04-28T12:16:43Z", "type": "commit"}, {"oid": "f22f0f80ce7bbaf8bb5b32f4abc1705d1f686fb1", "url": "https://github.com/ls1intum/Artemis/commit/f22f0f80ce7bbaf8bb5b32f4abc1705d1f686fb1", "message": "add SGI to text area directly!?", "committedDate": "2020-04-28T13:19:58Z", "type": "commit"}, {"oid": "097ed69da699eb83fced8befeb8f3feb7f21e8ae", "url": "https://github.com/ls1intum/Artemis/commit/097ed69da699eb83fced8befeb8f3feb7f21e8ae", "message": "Merge branch 'develop' into feature/text-assessment/adapt-to-SGI\n\n# Conflicts:\n#\tsrc/main/webapp/app/assessment/assessment-detail/assessment-detail.component.ts", "committedDate": "2020-04-28T15:33:04Z", "type": "commit"}, {"oid": "afd627fa2b60c3005eac0a408853b47730f33b0b", "url": "https://github.com/ls1intum/Artemis/commit/afd627fa2b60c3005eac0a408853b47730f33b0b", "message": "Merge branch 'develop' into feature/text-assessment/adapt-to-SGI", "committedDate": "2020-04-28T15:37:51Z", "type": "commit"}, {"oid": "40e6b8940a4394e329e34fab9fb17b42ce582780", "url": "https://github.com/ls1intum/Artemis/commit/40e6b8940a4394e329e34fab9fb17b42ce582780", "message": "merge develop", "committedDate": "2020-04-28T16:04:02Z", "type": "commit"}]}