{"pr_number": 1549, "pr_title": "Feature/overview/loading icon for views", "pr_createdAt": "2020-06-02T07:18:00Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1549", "timeline": [{"oid": "8afbdaca118b7d04e765a2be9404b88355a68915", "url": "https://github.com/ls1intum/Artemis/commit/8afbdaca118b7d04e765a2be9404b88355a68915", "message": "added loading screen for course overview view and added null check for course registration", "committedDate": "2020-05-31T21:31:05Z", "type": "commit"}, {"oid": "d721c522b6a44d7288614b51325d907b87433c8f", "url": "https://github.com/ls1intum/Artemis/commit/d721c522b6a44d7288614b51325d907b87433c8f", "message": "added loading screen for course management view", "committedDate": "2020-05-31T21:32:05Z", "type": "commit"}, {"oid": "ca5a02243367ab71ea73ba9f84fd4524d248e194", "url": "https://github.com/ls1intum/Artemis/commit/ca5a02243367ab71ea73ba9f84fd4524d248e194", "message": "added loading screen to course detail view", "committedDate": "2020-05-31T21:49:22Z", "type": "commit"}, {"oid": "a41f750e56878bfbc0f1e155d91c003812111e41", "url": "https://github.com/ls1intum/Artemis/commit/a41f750e56878bfbc0f1e155d91c003812111e41", "message": "added loading screen for:\n- course management exercises\n- file upload exercise\n- modeling exercise\n- programming exercise\n- quiz exercise\n- text exercise", "committedDate": "2020-06-01T06:36:05Z", "type": "commit"}, {"oid": "f84883626e6f8bc18820f7ae875b145035486064", "url": "https://github.com/ls1intum/Artemis/commit/f84883626e6f8bc18820f7ae875b145035486064", "message": "added loading screen to all exercise detail components", "committedDate": "2020-06-01T07:46:52Z", "type": "commit"}, {"oid": "fa0994cd9323d647a01a6154a3afda86fa5407a3", "url": "https://github.com/ls1intum/Artemis/commit/fa0994cd9323d647a01a6154a3afda86fa5407a3", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views", "committedDate": "2020-06-01T19:45:45Z", "type": "commit"}, {"oid": "a7586ee477e9fb736c65b9f4eada311b4184464c", "url": "https://github.com/ls1intum/Artemis/commit/a7586ee477e9fb736c65b9f4eada311b4184464c", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views", "committedDate": "2020-06-02T07:16:43Z", "type": "commit"}, {"oid": "c71fcd2329e43dc2bada0c1d6284a8e04278c9b3", "url": "https://github.com/ls1intum/Artemis/commit/c71fcd2329e43dc2bada0c1d6284a8e04278c9b3", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views", "committedDate": "2020-06-02T12:02:07Z", "type": "commit"}, {"oid": "36a9d8ed282423d74cb4b4ae70592b1caba0b605", "url": "https://github.com/ls1intum/Artemis/commit/36a9d8ed282423d74cb4b4ae70592b1caba0b605", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views", "committedDate": "2020-06-03T14:15:06Z", "type": "commit"}, {"oid": "7c5c47d6e305aea2bfe6d825716cc774cfeab572", "url": "https://github.com/ls1intum/Artemis/commit/7c5c47d6e305aea2bfe6d825716cc774cfeab572", "message": "revert changes", "committedDate": "2020-06-03T14:16:59Z", "type": "commit"}, {"oid": "4717ccd559e4378fded01309f9bfc3b30153aa82", "url": "https://github.com/ls1intum/Artemis/commit/4717ccd559e4378fded01309f9bfc3b30153aa82", "message": "added loading-notification component, service and interceptor", "committedDate": "2020-06-03T15:21:11Z", "type": "commit"}, {"oid": "20807827b6191be851395a698f982e52692c5887", "url": "https://github.com/ls1intum/Artemis/commit/20807827b6191be851395a698f982e52692c5887", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views", "committedDate": "2020-06-05T08:35:21Z", "type": "commit"}, {"oid": "7b45f284cc306c2151a7d9248cf695eebc84b7c2", "url": "https://github.com/ls1intum/Artemis/commit/7b45f284cc306c2151a7d9248cf695eebc84b7c2", "message": "remove empty file and position connection-notification into the right directoy", "committedDate": "2020-06-05T08:39:58Z", "type": "commit"}, {"oid": "d9873e6e3c539a8eab238183e4065b94492a90db", "url": "https://github.com/ls1intum/Artemis/commit/d9873e6e3c539a8eab238183e4065b94492a90db", "message": "added new progress-bar and comments", "committedDate": "2020-06-05T08:40:37Z", "type": "commit"}, {"oid": "3d3c65b760562a77fd4f900192dec13cd3945e8f", "url": "https://github.com/ls1intum/Artemis/commit/3d3c65b760562a77fd4f900192dec13cd3945e8f", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views", "committedDate": "2020-06-05T08:43:09Z", "type": "commit"}, {"oid": "5251eaa9f00615b8fd0938521fc6243b7fd10335", "url": "https://github.com/ls1intum/Artemis/commit/5251eaa9f00615b8fd0938521fc6243b7fd10335", "message": "try other loading bar", "committedDate": "2020-06-05T12:53:56Z", "type": "commit"}, {"oid": "ccc8889d7d953b5ae34f2f3a1f746d7fd0752c5f", "url": "https://github.com/ls1intum/Artemis/commit/ccc8889d7d953b5ae34f2f3a1f746d7fd0752c5f", "message": "run prettier", "committedDate": "2020-06-05T13:13:15Z", "type": "commit"}, {"oid": "088d56f0d305bbf5255e53f99e49cb15f177cbad", "url": "https://github.com/ls1intum/Artemis/commit/088d56f0d305bbf5255e53f99e49cb15f177cbad", "message": "move from main component to navbar", "committedDate": "2020-06-08T20:40:28Z", "type": "commit"}, {"oid": "78f1117e106af537e1020b4f060273be775fe800", "url": "https://github.com/ls1intum/Artemis/commit/78f1117e106af537e1020b4f060273be775fe800", "message": "changed icon to loading spinner and increased debounce time", "committedDate": "2020-06-08T20:41:39Z", "type": "commit"}, {"oid": "4ec46596d156b8ddfd74f1be959a5eebd1a8eabb", "url": "https://github.com/ls1intum/Artemis/commit/4ec46596d156b8ddfd74f1be959a5eebd1a8eabb", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views", "committedDate": "2020-06-08T20:46:15Z", "type": "commit"}, {"oid": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a", "url": "https://github.com/ls1intum/Artemis/commit/06c89f51515fe5181bd6a22bdbe55214c0c9b14a", "message": "try to fix failing test", "committedDate": "2020-06-08T21:29:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE5OTAyNA==", "url": "https://github.com/ls1intum/Artemis/pull/1549#discussion_r437199024", "bodyText": "\ud83d\udc4d", "author": "sascha11110", "createdAt": "2020-06-09T07:39:15Z", "path": "src/main/webapp/app/shared/notification/connection-notification/connection-notification.component.ts", "diffHunk": "@@ -2,7 +2,7 @@ import { Component, OnDestroy, OnInit } from '@angular/core';\n import { AccountService } from 'app/core/auth/account.service';\n import { JhiWebsocketService } from 'app/core/websocket/websocket.service';\n import { User } from 'app/core/user/user.model';\n-import { ConnectionNotification, ConnectionNotificationType } from 'app/shared/layouts/connection-notification/connection-notification.model';\n+import { ConnectionNotification, ConnectionNotificationType } from 'app/shared/notification/connection-notification/connection-notification.model';", "originalCommit": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE5NzE2Mg==", "url": "https://github.com/ls1intum/Artemis/pull/1549#discussion_r438197162", "bodyText": "what happens if finalize() is never called for one request? Then the counter activeRequests is always > 0 and the spinner will always be shown.\nFor example, when the internet connection breaks or when we get into a timeout or when the user changes the page too quickly? Or any other weird cases", "author": "krusche", "createdAt": "2020-06-10T15:07:49Z", "path": "src/main/webapp/app/shared/notification/loading-notification/loading-notification.interceptor.ts", "diffHunk": "@@ -0,0 +1,36 @@\n+import { Injectable } from '@angular/core';\n+import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\n+import { Observable } from 'rxjs';\n+import { finalize } from 'rxjs/operators';\n+import { LoadingNotificationService } from 'app/shared/notification/loading-notification/loading-notification.service';\n+\n+@Injectable()\n+export class LoadingNotificationInterceptor implements HttpInterceptor {\n+    activeRequests = 0;\n+\n+    constructor(private loadingNotificationService: LoadingNotificationService) {}\n+\n+    /**\n+     * Identifies and handles a given HTTP request. If any HTTP request is sent we enable the loading screen and count up the active requests.\n+     * While all HTTP request complete we count down the active requests and when all HTTP requests are completed we disable the loading screen.\n+     * @param request The outgoing request object to handle.\n+     * @param next The next interceptor in the chain, or the backend\n+     * if no interceptors remain in the chain.\n+     * @returns An observable of the event stream.\n+     */\n+    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n+        if (this.activeRequests === 0) {\n+            this.loadingNotificationService.startLoading();\n+        }\n+        this.activeRequests++;\n+\n+        return next.handle(request).pipe(\n+            finalize(() => {", "originalCommit": "06c89f51515fe5181bd6a22bdbe55214c0c9b14a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM4NTA1Mw==", "url": "https://github.com/ls1intum/Artemis/pull/1549#discussion_r440385053", "bodyText": "@krusche I tested this today with @tessaRuckstuhl and we did not find any case on where this did not work. finalize() is always called when a request terminates on success or on error, therefore activeRequests will always go back to 0", "author": "fde312", "createdAt": "2020-06-15T19:04:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE5NzE2Mg=="}], "type": "inlineReview"}, {"oid": "5157d32bdd10f3eb0985001b71d6182f8e2c2c32", "url": "https://github.com/ls1intum/Artemis/commit/5157d32bdd10f3eb0985001b71d6182f8e2c2c32", "message": "remove loading screens with h2", "committedDate": "2020-06-15T18:37:33Z", "type": "commit"}, {"oid": "65076b7f647c68e42638ff12f57fa037eeceb47c", "url": "https://github.com/ls1intum/Artemis/commit/65076b7f647c68e42638ff12f57fa037eeceb47c", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/overview/loading-icon-for-views", "committedDate": "2020-06-15T18:40:36Z", "type": "commit"}, {"oid": "f8a8b5aeebca8eb8e4fa33520df426e1558efcae", "url": "https://github.com/ls1intum/Artemis/commit/f8a8b5aeebca8eb8e4fa33520df426e1558efcae", "message": "try to fix build error", "committedDate": "2020-06-15T19:07:43Z", "type": "commit"}]}