{"pr_number": 1593, "pr_title": "feature/SSH clone", "pr_createdAt": "2020-06-07T18:51:32Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1593", "timeline": [{"oid": "7b18544c84a4434d68e4664142c7e7d9c29e5b4c", "url": "https://github.com/ls1intum/Artemis/commit/7b18544c84a4434d68e4664142c7e7d9c29e5b4c", "message": "add ssh link toggle", "committedDate": "2020-06-07T18:44:39Z", "type": "commit"}, {"oid": "19dc3c4679e5c0a768aead042da694b3d5fb666f", "url": "https://github.com/ls1intum/Artemis/commit/19dc3c4679e5c0a768aead042da694b3d5fb666f", "message": "Merge branch 'develop' into feature/ssh-clone", "committedDate": "2020-06-08T08:52:31Z", "type": "commit"}, {"oid": "7a3ce24d1561ca5db401d1e7a4228bbb9802dd66", "url": "https://github.com/ls1intum/Artemis/commit/7a3ce24d1561ca5db401d1e7a4228bbb9802dd66", "message": "change button labels to \"USE ...\"", "committedDate": "2020-06-09T00:39:27Z", "type": "commit"}, {"oid": "f99f3f74ff7e2ad101c3d9bc6a66d45eda1a4cc3", "url": "https://github.com/ls1intum/Artemis/commit/f99f3f74ff7e2ad101c3d9bc6a66d45eda1a4cc3", "message": "ssh hint and gitlab support", "committedDate": "2020-06-11T16:10:52Z", "type": "commit"}, {"oid": "470b9d7ce83b9579a7e94a1166012a78819beb4b", "url": "https://github.com/ls1intum/Artemis/commit/470b9d7ce83b9579a7e94a1166012a78819beb4b", "message": "fixes unused import", "committedDate": "2020-06-11T16:25:12Z", "type": "commit"}, {"oid": "6298e1490000226c2acd3145dab4374645254e03", "url": "https://github.com/ls1intum/Artemis/commit/6298e1490000226c2acd3145dab4374645254e03", "message": "Merge branch 'develop' into feature/ssh-clone", "committedDate": "2020-06-11T16:25:49Z", "type": "commit"}, {"oid": "c5382d22b8638b8ad26de97ba03caf2d9a82d306", "url": "https://github.com/ls1intum/Artemis/commit/c5382d22b8638b8ad26de97ba03caf2d9a82d306", "message": "fix function argument", "committedDate": "2020-06-11T18:46:32Z", "type": "commit"}, {"oid": "bf5d8da37948789c459a1f19e05903e11d0156d3", "url": "https://github.com/ls1intum/Artemis/commit/bf5d8da37948789c459a1f19e05903e11d0156d3", "message": "Merge branch 'feature/ssh-clone' of https://github.com/ls1intum/Artemis into feature/ssh-clone", "committedDate": "2020-06-11T18:48:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIyMTI0Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r439221246", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"sshKeyTip\": \"To use ssh, you need to add an ssh-key to you {server:bitbucket/gitlab} account {link:here}.\"\n          \n          \n            \n                        \"sshKeyTip\": \"To use ssh, you need to add an ssh-key to your {server:bitbucket/gitlab} account {link:here}.\"", "author": "krusche", "createdAt": "2020-06-12T05:56:44Z", "path": "src/main/webapp/i18n/en/exercise-actions.json", "diffHunk": "@@ -25,7 +25,8 @@\n             \"copyUrl\": \"Copy URL\",\n             \"copiedUrl\": \"Copied URL\",\n             \"uploadFile\": \"Upload a file\",\n-            \"viewTeam\": \"Team\"\n+            \"viewTeam\": \"Team\",\n+            \"sshKeyTip\": \"To use ssh, you need to add an ssh-key to you {server:bitbucket/gitlab} account {link:here}.\"", "originalCommit": "bf5d8da37948789c459a1f19e05903e11d0156d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "217dce523b890ba658d5517cc820f976b9e2152a", "url": "https://github.com/ls1intum/Artemis/commit/217dce523b890ba658d5517cc820f976b9e2152a", "message": "use ssh configuration options in application-artemis.yml", "committedDate": "2020-06-16T12:07:11Z", "type": "commit"}, {"oid": "a4d5bc0bbd8a186e17a38485ff788d23d559f79e", "url": "https://github.com/ls1intum/Artemis/commit/a4d5bc0bbd8a186e17a38485ff788d23d559f79e", "message": "fix styling", "committedDate": "2020-06-16T12:11:25Z", "type": "commit"}, {"oid": "1e1fe8b167315d32adaa193a7774bf702632705c", "url": "https://github.com/ls1intum/Artemis/commit/1e1fe8b167315d32adaa193a7774bf702632705c", "message": "Merge branch 'develop' into feature/ssh-clone", "committedDate": "2020-06-16T12:15:43Z", "type": "commit"}, {"oid": "3d91b9f47eb227156d00e1255ede6598cf39b533", "url": "https://github.com/ls1intum/Artemis/commit/3d91b9f47eb227156d00e1255ede6598cf39b533", "message": "fix styling when ssh is disabled", "committedDate": "2020-06-16T13:04:24Z", "type": "commit"}, {"oid": "a48c66944b9176a1c23b3a0003844d19ae3e3a12", "url": "https://github.com/ls1intum/Artemis/commit/a48c66944b9176a1c23b3a0003844d19ae3e3a12", "message": "Merge branch 'feature/ssh-clone' of https://github.com/ls1intum/Artemis into feature/ssh-clone", "committedDate": "2020-06-16T13:05:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgzODM1NA==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r440838354", "bodyText": "default: null", "author": "krusche", "createdAt": "2020-06-16T13:13:13Z", "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bitbucket/BitbucketSshCloneLinkInfoContributor.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package de.tum.in.www1.artemis.service.connectors.bitbucket;\n+\n+import java.net.URL;\n+\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.boot.actuate.info.Info;\n+import org.springframework.boot.actuate.info.InfoContributor;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Component;\n+\n+import de.tum.in.www1.artemis.config.Constants;\n+\n+@Component\n+@Profile(\"bitbucket\")\n+public class BitbucketSshCloneLinkInfoContributor implements InfoContributor {\n+\n+    @Value(\"${artemis.version-control.url}\")\n+    private URL BITBUCKED_SERVER_URL;\n+\n+    @Value(\"${artemis.version-control.ssh-template-clone-url:}\")", "originalCommit": "a48c66944b9176a1c23b3a0003844d19ae3e3a12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgzODY3Nw==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r440838677", "bodyText": "see UserService.java:70", "author": "krusche", "createdAt": "2020-06-16T13:13:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgzODM1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgzODQzNw==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r440838437", "bodyText": "Optional", "author": "krusche", "createdAt": "2020-06-16T13:13:21Z", "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bitbucket/BitbucketSshCloneLinkInfoContributor.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package de.tum.in.www1.artemis.service.connectors.bitbucket;\n+\n+import java.net.URL;\n+\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.boot.actuate.info.Info;\n+import org.springframework.boot.actuate.info.InfoContributor;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Component;\n+\n+import de.tum.in.www1.artemis.config.Constants;\n+\n+@Component\n+@Profile(\"bitbucket\")\n+public class BitbucketSshCloneLinkInfoContributor implements InfoContributor {\n+\n+    @Value(\"${artemis.version-control.url}\")\n+    private URL BITBUCKED_SERVER_URL;\n+\n+    @Value(\"${artemis.version-control.ssh-template-clone-url:}\")\n+    private String BITBUCKET_SSH_URL_TEMPLATE;", "originalCommit": "a48c66944b9176a1c23b3a0003844d19ae3e3a12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgzODUxOQ==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r440838519", "bodyText": "if present", "author": "krusche", "createdAt": "2020-06-16T13:13:29Z", "path": "src/main/java/de/tum/in/www1/artemis/service/connectors/bitbucket/BitbucketSshCloneLinkInfoContributor.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package de.tum.in.www1.artemis.service.connectors.bitbucket;\n+\n+import java.net.URL;\n+\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.boot.actuate.info.Info;\n+import org.springframework.boot.actuate.info.InfoContributor;\n+import org.springframework.context.annotation.Profile;\n+import org.springframework.stereotype.Component;\n+\n+import de.tum.in.www1.artemis.config.Constants;\n+\n+@Component\n+@Profile(\"bitbucket\")\n+public class BitbucketSshCloneLinkInfoContributor implements InfoContributor {\n+\n+    @Value(\"${artemis.version-control.url}\")\n+    private URL BITBUCKED_SERVER_URL;\n+\n+    @Value(\"${artemis.version-control.ssh-template-clone-url:}\")\n+    private String BITBUCKET_SSH_URL_TEMPLATE;\n+\n+    @Value(\"${artemis.version-control.ssh-keys-path:}\")\n+    private String BITBUCKET_SSH_KEYS_PATH;\n+\n+    @Override\n+    public void contribute(Info.Builder builder) {\n+\n+        final var sshKeysUrl = BITBUCKED_SERVER_URL + BITBUCKET_SSH_KEYS_PATH;\n+\n+        builder.withDetail(Constants.INFO_SSH_CLONE_URL_DETAIL, BITBUCKET_SSH_URL_TEMPLATE);", "originalCommit": "a48c66944b9176a1c23b3a0003844d19ae3e3a12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg0MDIwOQ==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r440840209", "bodyText": "ssh-keys-url-path", "author": "krusche", "createdAt": "2020-06-16T13:15:59Z", "path": "src/main/resources/config/application-artemis.yml", "diffHunk": "@@ -27,6 +27,8 @@ artemis:\n         password: <password>\n         secret: <token>                 # VCS API token giving Artemis full Admin access. Not needed for Bamboo+Bitbucket\n         ci-token: <token from the CI>   # Token generated by the CI (e.g. Jenkins) for webhooks from the VCS to the CI. Not needed for Bamboo+Bitbucket\n+        ssh-template-clone-url: ssh://git@bitbucket.ase.in.tum.de:7999/    # Url Stem for cloning via ssh, for gitlab use 'ssh://git@artemistest2gitlab.ase.in.tum.de:'\n+        ssh-keys-path: /plugins/servlet/ssh/account/keys  # Url Path to access a users ssh keys, for gitlab this is '/profile/keys'", "originalCommit": "a48c66944b9176a1c23b3a0003844d19ae3e3a12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg0Njk4OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r440846989", "bodyText": "ssh://git@artemistest2gitlab.ase.in.tum.de:2222/", "author": "krusche", "createdAt": "2020-06-16T13:25:42Z", "path": "src/main/resources/config/application-artemis.yml", "diffHunk": "@@ -27,6 +27,8 @@ artemis:\n         password: <password>\n         secret: <token>                 # VCS API token giving Artemis full Admin access. Not needed for Bamboo+Bitbucket\n         ci-token: <token from the CI>   # Token generated by the CI (e.g. Jenkins) for webhooks from the VCS to the CI. Not needed for Bamboo+Bitbucket\n+        ssh-template-clone-url: ssh://git@bitbucket.ase.in.tum.de:7999/    # Url Stem for cloning via ssh, for gitlab use 'ssh://git@artemistest2gitlab.ase.in.tum.de:'", "originalCommit": "a48c66944b9176a1c23b3a0003844d19ae3e3a12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "aa6dfb40ba32ec9ee186068510152af666386cac", "url": "https://github.com/ls1intum/Artemis/commit/aa6dfb40ba32ec9ee186068510152af666386cac", "message": "make config values optional", "committedDate": "2020-06-16T14:00:57Z", "type": "commit"}, {"oid": "aff7278b981cadff7f8432e256ebe03f27015dd0", "url": "https://github.com/ls1intum/Artemis/commit/aff7278b981cadff7f8432e256ebe03f27015dd0", "message": "add client test", "committedDate": "2020-06-16T16:55:01Z", "type": "commit"}, {"oid": "7b4cb206a3114259445c6f65c01cf9b75efc111c", "url": "https://github.com/ls1intum/Artemis/commit/7b4cb206a3114259445c6f65c01cf9b75efc111c", "message": "Merge branch 'develop' into feature/ssh-clone", "committedDate": "2020-06-16T17:00:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NzI3NQ==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r441077275", "bodyText": "I think there is a small mistake here. Using ssh should be independent of the mode (individual vs. team).\nOtherwise a student might have a problem in a team programming exercise", "author": "krusche", "createdAt": "2020-06-16T19:02:12Z", "path": "src/main/webapp/app/overview/exercise-details/exercise-details-student-actions.component.ts", "diffHunk": "@@ -72,6 +87,9 @@ export class ExerciseDetailsStudentActionsComponent implements OnInit {\n      */\n     repositoryUrl(participation: Participation) {\n         const programmingParticipation = participation as ProgrammingExerciseStudentParticipation;\n+        if (this.useSsh) {", "originalCommit": "7b4cb206a3114259445c6f65c01cf9b75efc111c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA4MTU3Nw==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r441081577", "bodyText": "the ssh url is the same for individual and team exercises", "author": "schultek", "createdAt": "2020-06-16T19:10:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NzI3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE0MDIxOA==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r441140218", "bodyText": "ok, then we should add this as a comment here, otherwise this might be confusing", "author": "krusche", "createdAt": "2020-06-16T21:02:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NzI3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE0NjY1NA==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r441146654", "bodyText": "ok", "author": "schultek", "createdAt": "2020-06-16T21:15:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NzI3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NzkwOA==", "url": "https://github.com/ls1intum/Artemis/pull/1593#discussion_r441077908", "bodyText": "can you please fix the unnecessary import?\n'MockParticipationService' is defined but never used", "author": "krusche", "createdAt": "2020-06-16T19:03:22Z", "path": "src/test/javascript/spec/component/overview/exercise-details/exercise-details-student-actions.component.spec.ts", "diffHunk": "@@ -33,6 +33,8 @@ import { ProgrammingExercise } from 'app/entities/programming-exercise.model';\n import { ProfileService } from 'app/shared/layouts/profiles/profile.service';\n import { MockProfileService } from '../../../helpers/mocks/service/mock-profile.service';\n import { ProfileInfo } from 'app/shared/layouts/profiles/profile-info.model';\n+import { ProgrammingExerciseStudentParticipation } from 'app/entities/participation/programming-exercise-student-participation.model';\n+import { MockParticipationService } from '../../../helpers/mocks/service/mock-participation.service';", "originalCommit": "7b4cb206a3114259445c6f65c01cf9b75efc111c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f956d7e264ad731718f658efe709a5d695ecb94a", "url": "https://github.com/ls1intum/Artemis/commit/f956d7e264ad731718f658efe709a5d695ecb94a", "message": "remove unused import", "committedDate": "2020-06-16T20:38:44Z", "type": "commit"}, {"oid": "a5afa1793ec5dc12e71482c741b8dfdd31be60af", "url": "https://github.com/ls1intum/Artemis/commit/a5afa1793ec5dc12e71482c741b8dfdd31be60af", "message": "Merge branch 'feature/ssh-clone' of https://github.com/ls1intum/Artemis into feature/ssh-clone", "committedDate": "2020-06-16T20:39:17Z", "type": "commit"}, {"oid": "5f1853fb485e4b6ab8ccd8e4f6731cfb84a45eb6", "url": "https://github.com/ls1intum/Artemis/commit/5f1853fb485e4b6ab8ccd8e4f6731cfb84a45eb6", "message": "Merge branch 'develop' into feature/ssh-clone", "committedDate": "2020-06-16T20:39:52Z", "type": "commit"}, {"oid": "4b5e50e7cec35e4ed2ae7b6454cef3546e7f616d", "url": "https://github.com/ls1intum/Artemis/commit/4b5e50e7cec35e4ed2ae7b6454cef3546e7f616d", "message": "add comment to url generation", "committedDate": "2020-06-16T21:15:58Z", "type": "commit"}, {"oid": "a8985b5b2796a65d75314ead16d7a523cee867a4", "url": "https://github.com/ls1intum/Artemis/commit/a8985b5b2796a65d75314ead16d7a523cee867a4", "message": "Merge branch 'feature/ssh-clone' of https://github.com/ls1intum/Artemis into feature/ssh-clone", "committedDate": "2020-06-16T21:16:03Z", "type": "commit"}, {"oid": "aea91aa80ae0e100e68491e7cb96ea7a80a4c017", "url": "https://github.com/ls1intum/Artemis/commit/aea91aa80ae0e100e68491e7cb96ea7a80a4c017", "message": "Merge branch 'develop' into feature/ssh-clone", "committedDate": "2020-06-16T21:16:33Z", "type": "commit"}]}