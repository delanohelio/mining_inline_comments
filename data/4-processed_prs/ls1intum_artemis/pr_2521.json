{"pr_number": 2521, "pr_title": "Fix the login screen shortly displaying even when logged in", "pr_createdAt": "2020-12-08T18:41:01Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2521", "timeline": [{"oid": "9419cd78b60e3131339c0bcb1501b3b98fce937a", "url": "https://github.com/ls1intum/Artemis/commit/9419cd78b60e3131339c0bcb1501b3b98fce937a", "message": "Fix the login screen shortly displaying even when logged in", "committedDate": "2020-12-08T18:32:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY3NzU0OA==", "url": "https://github.com/ls1intum/Artemis/pull/2521#discussion_r539677548", "bodyText": "Is the use of hidden intentional? Why not use `ngif (hmtl content is not loaded when the statement evaluates to false)?", "author": "ivanchimeno", "createdAt": "2020-12-09T21:55:41Z", "path": "src/main/webapp/app/home/home.component.html", "diffHunk": "@@ -1,93 +1,95 @@\n-<div class=\"row\">\n-    <div class=\"col-md-8 offset-md-2 text-center\">\n-        <h1 jhiTranslate=\"home.title\">Welcome to Artemis!</h1>\n-        <p class=\"lead\" jhiTranslate=\"home.subtitle\">Interactive Learning with Individual Feedback</p>\n-        <div *ngIf=\"!accountName\" class=\"lead\" [jhiTranslate]=\"'home.pleaseSignIn'\">Please sign in with your account.</div>\n-        <div *ngIf=\"accountName\" class=\"lead\" [jhiTranslate]=\"'home.pleaseSignInAccount'\" [translateValues]=\"{ account: accountName }\">Please sign in with your account.</div>\n+<div [hidden]=\"loading\">", "originalCommit": "9419cd78b60e3131339c0bcb1501b3b98fce937a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY5NDgyMA==", "url": "https://github.com/ls1intum/Artemis/pull/2521#discussion_r539694820", "bodyText": "Yes, the content not being loaded was exactly the reason I changed this to hidden. I had trouble focusing the input element for some reason, but part of the code has changed so I can retry.", "author": "FrankeLukas", "createdAt": "2020-12-09T22:26:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY3NzU0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4MTQ3MQ==", "url": "https://github.com/ls1intum/Artemis/pull/2521#discussion_r539681471", "bodyText": "Just a question: Do you really need to add the inputFocused variable or is it redundant? I mean if the page isn't loaded, you shouldn't focus the input. And a use case where `this.inputFocused = true; this.loading = false) doesn't really play a role because you don't see the input", "author": "ivanchimeno", "createdAt": "2020-12-09T22:02:39Z", "path": "src/main/webapp/app/home/home.component.ts", "diffHunk": "@@ -91,8 +98,18 @@ export class HomeComponent implements OnInit, AfterViewInit {\n         });\n     }\n \n-    ngAfterViewInit() {\n-        this.renderer.selectRootElement('#username', true).focus();\n+    ngAfterViewChecked() {\n+        // Only focus the username input once, not on every update\n+        if (this.inputFocused || this.loading) {", "originalCommit": "9419cd78b60e3131339c0bcb1501b3b98fce937a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY5NTk3Nw==", "url": "https://github.com/ls1intum/Artemis/pull/2521#discussion_r539695977", "bodyText": "inputFocused is needed for after the page is actually visible, because losing the focus of the field triggers an update which triggers AfterViewChecked again, which then in turn focuses the field again, getting this stuck. We only care about focusing the input field once after the loading is done.", "author": "FrankeLukas", "createdAt": "2020-12-09T22:28:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4MTQ3MQ=="}], "type": "inlineReview"}]}