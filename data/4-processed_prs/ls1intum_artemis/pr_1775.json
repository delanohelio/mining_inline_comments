{"pr_number": 1775, "pr_title": "[Exam] calculate endDate of exam with workingTime", "pr_createdAt": "2020-06-30T20:43:31Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1775", "timeline": [{"oid": "4d48e47302c354f5a11e2c17090126c8cd63f6a7", "url": "https://github.com/ls1intum/Artemis/commit/4d48e47302c354f5a11e2c17090126c8cd63f6a7", "message": "use working time for enddate calculation", "committedDate": "2020-06-30T20:40:29Z", "type": "commit"}, {"oid": "1da3e67727f66df7708b18a4c320abea0bc8a430", "url": "https://github.com/ls1intum/Artemis/commit/1da3e67727f66df7708b18a4c320abea0bc8a430", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam/client/working-time", "committedDate": "2020-06-30T20:42:47Z", "type": "commit"}, {"oid": "d31a1ce199cbcd749f2e5a72b85ffcdb1c7d42f0", "url": "https://github.com/ls1intum/Artemis/commit/d31a1ce199cbcd749f2e5a72b85ffcdb1c7d42f0", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam/client/working-time\n\n# Conflicts:\n#\tsrc/main/webapp/app/exam/participate/exam-participation.component.html\n#\tsrc/main/webapp/app/exam/participate/exam-participation.component.ts", "committedDate": "2020-06-30T21:11:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5NzU1OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r447997559", "bodyText": "Should you maybe use the server time here instead of moment()?", "author": "stefanwaldhauser", "createdAt": "2020-06-30T21:45:39Z", "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -93,6 +97,7 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n             this.examId = parseInt(params['examId'], 10);\n             this.examParticipationService.loadExam(this.courseId, this.examId).subscribe((exam) => {\n                 this.exam = exam;\n+                this.endDate = exam.endDate ? exam.endDate : moment();", "originalCommit": "d31a1ce199cbcd749f2e5a72b85ffcdb1c7d42f0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAwMDYxOQ==", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448000619", "bodyText": "Good catch, I changed it now.", "author": "filip-gregurevic", "createdAt": "2020-06-30T21:52:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5NzU1OQ=="}], "type": "inlineReview"}, {"oid": "f26033c6dd8e2b1592235728a6b733d5177d555d", "url": "https://github.com/ls1intum/Artemis/commit/f26033c6dd8e2b1592235728a6b733d5177d555d", "message": "use server date instead of moment", "committedDate": "2020-06-30T21:51:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAwNTU5MA==", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448005590", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                endDate: Moment;\n          \n          \n            \n                individualStudentEndDate: Moment;", "author": "krusche", "createdAt": "2020-06-30T22:04:42Z", "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -44,6 +46,8 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n     exam: Exam;\n     studentExam: StudentExam;\n \n+    endDate: Moment;", "originalCommit": "f26033c6dd8e2b1592235728a6b733d5177d555d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAwNTY0MA==", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448005640", "bodyText": "please rename", "author": "krusche", "createdAt": "2020-06-30T22:04:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAwNTU5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAxNjk3OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448016979", "bodyText": "I renamed them now", "author": "filip-gregurevic", "createdAt": "2020-06-30T22:35:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAwNTU5MA=="}], "type": "inlineReview"}, {"oid": "e1bf5e682a67ed09449c9b28b90e087fea06cdf3", "url": "https://github.com/ls1intum/Artemis/commit/e1bf5e682a67ed09449c9b28b90e087fea06cdf3", "message": "Update src/main/webapp/app/exam/participate/exam-participation.component.ts\n\nCo-authored-by: Stephan Krusche <krusche@in.tum.de>", "committedDate": "2020-06-30T22:31:34Z", "type": "commit"}, {"oid": "ccf060d8dae0f30f7afb4d700ecdab622e992958", "url": "https://github.com/ls1intum/Artemis/commit/ccf060d8dae0f30f7afb4d700ecdab622e992958", "message": "rename", "committedDate": "2020-06-30T22:32:42Z", "type": "commit"}, {"oid": "2aca2b78d7964a102413360aa0a5878acdae9e83", "url": "https://github.com/ls1intum/Artemis/commit/2aca2b78d7964a102413360aa0a5878acdae9e83", "message": "rename pt 2", "committedDate": "2020-06-30T22:33:14Z", "type": "commit"}, {"oid": "0ebf10b5dfeb1a462d2067aa7f1884189649b470", "url": "https://github.com/ls1intum/Artemis/commit/0ebf10b5dfeb1a462d2067aa7f1884189649b470", "message": "rename pt 3", "committedDate": "2020-06-30T22:34:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI0MTM4NA==", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448241384", "bodyText": "WOW, does this default value make a lot of sense? Should this rather be null and handled appropriately?", "author": "jpbernius", "createdAt": "2020-07-01T09:36:07Z", "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -93,6 +97,7 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n             this.examId = parseInt(params['examId'], 10);\n             this.examParticipationService.loadExam(this.courseId, this.examId).subscribe((exam) => {\n                 this.exam = exam;\n+                this.individualStudentEndDate = exam.endDate ? exam.endDate : this.serverDateService.now();", "originalCommit": "0ebf10b5dfeb1a462d2067aa7f1884189649b470", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI1MjQ5Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448252496", "bodyText": "Well, this and the case in your other comment are edge cases which shouldn't (can't) happen. If there is no end / start date in the exam something has to go really wrong, since it is also prevented when creating / updating an exam.\nThis default case is the same as passing null to moment(), just handled with the server-sync-time, ultimately setting the exam to over if this happens.", "author": "filip-gregurevic", "createdAt": "2020-07-01T09:55:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI0MTM4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI0NDY4NQ==", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448244685", "bodyText": "Here again, if start date is not defined, we set the end date to now? Does this make sense?", "author": "jpbernius", "createdAt": "2020-07-01T09:41:48Z", "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -122,6 +127,8 @@ export class ExamParticipationComponent implements OnInit, OnDestroy {\n             // init studentExam and activeExercise\n             this.studentExam = studentExam;\n             this.activeExercise = studentExam.exercises[0];\n+            // set endDate with workingTime\n+            this.individualStudentEndDate = this.exam.startDate ? moment(this.exam.startDate).add(studentExam.workingTime, 'seconds') : this.individualStudentEndDate;", "originalCommit": "0ebf10b5dfeb1a462d2067aa7f1884189649b470", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI1MzM5NQ==", "url": "https://github.com/ls1intum/Artemis/pull/1775#discussion_r448253395", "bodyText": "See my answer to your other comment. And also it would be first set to the default end date of the exam and then only to now if this isn't available. And I can't really image that this would.", "author": "filip-gregurevic", "createdAt": "2020-07-01T09:57:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI0NDY4NQ=="}], "type": "inlineReview"}]}