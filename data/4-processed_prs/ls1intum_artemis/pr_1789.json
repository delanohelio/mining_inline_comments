{"pr_number": 1789, "pr_title": "[Exam] Enhancements for student exam generation", "pr_createdAt": "2020-07-01T14:18:50Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1789", "timeline": [{"oid": "e6a37331f590bd3b375546b34881552c919d419c", "url": "https://github.com/ls1intum/Artemis/commit/e6a37331f590bd3b375546b34881552c919d419c", "message": "Refactor student exam generation validation", "committedDate": "2020-07-01T10:33:07Z", "type": "commit"}, {"oid": "405d405191dbf534deeef5f44e75338dbb3d721b", "url": "https://github.com/ls1intum/Artemis/commit/405d405191dbf534deeef5f44e75338dbb3d721b", "message": "Refactor generateStudentExams service method to enable reuse of functionality. Add new REST resource for creation of missing individual exams", "committedDate": "2020-07-01T12:13:58Z", "type": "commit"}, {"oid": "4d63f222ff4a353bae95d1ed6dfe4ad2dbc8fb69", "url": "https://github.com/ls1intum/Artemis/commit/4d63f222ff4a353bae95d1ed6dfe4ad2dbc8fb69", "message": "Add service method for the creation of missing student exams", "committedDate": "2020-07-01T12:15:17Z", "type": "commit"}, {"oid": "88b8b79a0fb3cfe63018d997bad427bbaf3be88b", "url": "https://github.com/ls1intum/Artemis/commit/88b8b79a0fb3cfe63018d997bad427bbaf3be88b", "message": "Add button for creation of missing student exams", "committedDate": "2020-07-01T12:16:41Z", "type": "commit"}, {"oid": "e53c7212991668356a644c1cc8a1faddbc71f4ee", "url": "https://github.com/ls1intum/Artemis/commit/e53c7212991668356a644c1cc8a1faddbc71f4ee", "message": "Show modal to confirm generation of student exams if some already exist", "committedDate": "2020-07-01T14:53:25Z", "type": "commit"}, {"oid": "40784dd64ae034fd9e47490385e48d919f7913be", "url": "https://github.com/ls1intum/Artemis/commit/40784dd64ae034fd9e47490385e48d919f7913be", "message": "Display status of student exam generation", "committedDate": "2020-07-01T17:49:07Z", "type": "commit"}, {"oid": "3f59ae0ed6027bdca98d2466d60ee4adb54a11dc", "url": "https://github.com/ls1intum/Artemis/commit/3f59ae0ed6027bdca98d2466d60ee4adb54a11dc", "message": "Enhance layout", "committedDate": "2020-07-01T18:47:26Z", "type": "commit"}, {"oid": "e4cc7a3398c01ef6acb1bcdd24e8f2baf110a389", "url": "https://github.com/ls1intum/Artemis/commit/e4cc7a3398c01ef6acb1bcdd24e8f2baf110a389", "message": "Delete student exam when a student is unregistered from the exam. Optionally, delete his participations and submissions in the exam.", "committedDate": "2020-07-01T20:25:28Z", "type": "commit"}, {"oid": "002fa4ec4ec920b6d668b3b32f073853e6e5c31c", "url": "https://github.com/ls1intum/Artemis/commit/002fa4ec4ec920b6d668b3b32f073853e6e5c31c", "message": "Extend delete student from exam dialog", "committedDate": "2020-07-01T20:26:51Z", "type": "commit"}, {"oid": "feec63054989d078d3167cee9c2fe4249d633fb0", "url": "https://github.com/ls1intum/Artemis/commit/feec63054989d078d3167cee9c2fe4249d633fb0", "message": "Merge branch 'enhancement/exam-mode/student-exam-generation' of https://github.com/ls1intum/Artemis into enhancement/exam-mode/student-exam-generation", "committedDate": "2020-07-01T20:27:13Z", "type": "commit"}, {"oid": "35827868b022d01b78bcdcf2cf98f25c1b21207f", "url": "https://github.com/ls1intum/Artemis/commit/35827868b022d01b78bcdcf2cf98f25c1b21207f", "message": "Merge branch 'develop' into enhancement/exam-mode/student-exam-generation", "committedDate": "2020-07-01T20:32:08Z", "type": "commit"}, {"oid": "38ee4a7b32aab5c836f9d8dc134e219d7ffbb4a2", "url": "https://github.com/ls1intum/Artemis/commit/38ee4a7b32aab5c836f9d8dc134e219d7ffbb4a2", "message": "Fix deletion of student from exam if student exam does not exist", "committedDate": "2020-07-01T21:01:17Z", "type": "commit"}, {"oid": "0b9f06dbe08d2b80c6866b17632d3324c041e248", "url": "https://github.com/ls1intum/Artemis/commit/0b9f06dbe08d2b80c6866b17632d3324c041e248", "message": "Merge branch 'enhancement/exam-mode/student-exam-generation' of https://github.com/ls1intum/Artemis into enhancement/exam-mode/student-exam-generation", "committedDate": "2020-07-01T21:01:40Z", "type": "commit"}, {"oid": "e9d6c7b183dcce877c49898a30bcf493b027c732", "url": "https://github.com/ls1intum/Artemis/commit/e9d6c7b183dcce877c49898a30bcf493b027c732", "message": "Improve wording of dialog", "committedDate": "2020-07-01T21:07:27Z", "type": "commit"}, {"oid": "b634619273703770a8328375b08822524e928b86", "url": "https://github.com/ls1intum/Artemis/commit/b634619273703770a8328375b08822524e928b86", "message": "Use optional instead of catch EntityNotFoundEx", "committedDate": "2020-07-02T09:47:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg5MTIyNg==", "url": "https://github.com/ls1intum/Artemis/pull/1789#discussion_r448891226", "bodyText": "I believe it would be useful if the button Generate missing individual exams is only clickable/visible if there are students without exams.\nAs you already track that, this should be quite simple to do, right?", "author": "sleiss", "createdAt": "2020-07-02T10:01:40Z", "path": "src/main/webapp/app/exam/manage/student-exams/student-exams.component.html", "diffHunk": "@@ -5,15 +5,22 @@ <h2>\n                 <span jhiTranslate=\"artemisApp.studentExams.title\">Student exams</span>\n             </h2>\n         </div>\n-        <div class=\"ml-auto d-flex\">\n-            <button class=\"btn btn-primary\" style=\"height: 40px;\" (click)=\"generateStudentExams()\" *ngIf=\"course?.isAtLeastInstructor\" [disabled]=\"isLoading\">\n-                <span *ngIf=\"isLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n-                <span jhiTranslate=\"artemisApp.studentExams.generateStudentExams\">Generate student exams</span>\n-            </button>\n-            <button class=\"btn btn-primary ml-1\" style=\"height: 40px;\" (click)=\"startExercises()\" *ngIf=\"course?.isAtLeastInstructor\" [disabled]=\"isLoading\">\n-                <span *ngIf=\"isLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n-                <span jhiTranslate=\"artemisApp.studentExams.startExercises\">Start Exercises</span>\n-            </button>\n+        <div class=\"ml-auto\">\n+            <div class=\"d-flex mb-1\">\n+                <button class=\"btn btn-primary ml-1\" style=\"height: 40px;\" (click)=\"handleGenerateStudentExams()\" *ngIf=\"course?.isAtLeastInstructor\" [disabled]=\"isLoading\">\n+                    <span *ngIf=\"isLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n+                    <span jhiTranslate=\"artemisApp.studentExams.generateStudentExams\">Generate student exams</span>\n+                </button>\n+                <button class=\"btn btn-primary ml-1\" style=\"height: 40px;\" (click)=\"generateMissingStudentExams()\" *ngIf=\"course?.isAtLeastInstructor\" [disabled]=\"isLoading\">", "originalCommit": "e9d6c7b183dcce877c49898a30bcf493b027c732", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTEwMDQxNg==", "url": "https://github.com/ls1intum/Artemis/pull/1789#discussion_r449100416", "bodyText": "Button now deactivates if all students have an exam", "author": "kloessst", "createdAt": "2020-07-02T15:41:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg5MTIyNg=="}], "type": "inlineReview"}, {"oid": "87bdd9b75e1bc0f66b9301352aee885dc7a1a134", "url": "https://github.com/ls1intum/Artemis/commit/87bdd9b75e1bc0f66b9301352aee885dc7a1a134", "message": "Add tests for add missing students and refactoring", "committedDate": "2020-07-02T12:12:52Z", "type": "commit"}, {"oid": "12ef7c611221b813765f950793bf7d69daa8faaa", "url": "https://github.com/ls1intum/Artemis/commit/12ef7c611221b813765f950793bf7d69daa8faaa", "message": "Disable create missing student exams button if all students already have one", "committedDate": "2020-07-02T14:50:57Z", "type": "commit"}, {"oid": "29e380c1f311d8c04dcdc31909965c9aa033346e", "url": "https://github.com/ls1intum/Artemis/commit/29e380c1f311d8c04dcdc31909965c9aa033346e", "message": "Merge develop and resolve conflicts", "committedDate": "2020-07-02T15:24:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTEwNjUyNg==", "url": "https://github.com/ls1intum/Artemis/pull/1789#discussion_r449106526", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"studentExamStatusWarningTooltip\": \"Klick auf den Button 'Fehlende individuelle Klausuren erstellen', um die fehlenden Klausuren zu generieren. Alternativ, klick auf den Button 'Individuelle Klausuren erstellen', um alle Klausuren zu l\u00f6schen und neu zu generieren\"\n          \n          \n            \n                        \"studentExamStatusWarningTooltip\": \"Klicke auf den Button 'Fehlende individuelle Klausuren erstellen', um die fehlenden Klausuren zu generieren. Alternativ, klicke auf den Button 'Individuelle Klausuren erstellen', um alle Klausuren zu l\u00f6schen und neu zu generieren\"", "author": "sleiss", "createdAt": "2020-07-02T15:46:11Z", "path": "src/main/webapp/i18n/de/exam.json", "diffHunk": "@@ -74,10 +75,16 @@\n             \"exam\": \"Klausur\",\n             \"studentExamGenerationSuccess\": \"{{number}} individuelle Klausuren erfolgreich generiert!\",\n             \"studentExamGenerationError\": \"Es gab einen Fehler bei der Generierung der individuellen Klausuren:\\n {{message}}\",\n+            \"missingStudentExamGenerationSuccess\": \"{{number}} fehlende individuelle Klausuren erfolgreich generiert!\",\n+            \"missingStudentExamGenerationError\": \"Es gab einen Fehler bei der Generierung der fehlenden individuellen Klausuren:\\n {{message}}\",\n             \"startExerciseSuccess\": \"{{number}} Aufgaben erfolgreich vorbereitet!\",\n             \"startExerciseFailure\": \"Es gab einen Fehler bei der Vorbereitung der Aufgaben:\\n {{message}}\",\n             \"evaluateQuizExerciseSuccess\": \"{{number}} Quiz-Aufgaben erfolgreich ausgewertet!\",\n-            \"evaluateQuizExerciseFailure\": \"Es gab einen Fehler bei der Auswertung der Quiz-Aufgaben:\\n {{message}}\"\n+            \"evaluateQuizExerciseFailure\": \"Es gab einen Fehler bei der Auswertung der Quiz-Aufgaben:\\n {{message}}\",\n+            \"studentExamGenerationModalText\": \"Es existieren bereits individuelle Klausuren. Wenn Sie fortfahren werden diese Klausuren gel\u00f6scht und neue individuelle Klausuren generiert.\",\n+            \"studentExamStatusSuccess\": \"Alle registrierten Studenten haben eine Klausur\",\n+            \"studentExamStatusWarning\": \"Nicht alle registrierten Studenten haben eine Klausur\",\n+            \"studentExamStatusWarningTooltip\": \"Klick auf den Button 'Fehlende individuelle Klausuren erstellen', um die fehlenden Klausuren zu generieren. Alternativ, klick auf den Button 'Individuelle Klausuren erstellen', um alle Klausuren zu l\u00f6schen und neu zu generieren\"", "originalCommit": "29e380c1f311d8c04dcdc31909965c9aa033346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTEwNzExOA==", "url": "https://github.com/ls1intum/Artemis/pull/1789#discussion_r449107118", "bodyText": "Could you please document what this second parameter is for?", "author": "sleiss", "createdAt": "2020-07-02T15:46:41Z", "path": "src/main/webapp/app/exam/manage/students/exam-students.component.ts", "diffHunk": "@@ -169,8 +169,8 @@ export class ExamStudentsComponent implements OnInit, OnDestroy {\n      *\n      * @param user User that should be removed from the exam\n      */\n-    removeFromExam(user: User) {\n-        this.examManagementService.removeStudentFromExam(this.courseId, this.exam.id, user.login!).subscribe(\n+    removeFromExam(user: User, $event: { [key: string]: boolean }) {", "originalCommit": "29e380c1f311d8c04dcdc31909965c9aa033346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTExMDA0NQ==", "url": "https://github.com/ls1intum/Artemis/pull/1789#discussion_r449110045", "bodyText": "There seems to be some documentation missing here.", "author": "sleiss", "createdAt": "2020-07-02T15:49:02Z", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/ExamResource.java", "diffHunk": "@@ -398,32 +438,56 @@ public ExamResource(UserService userService, CourseService courseService, ExamRe\n     }\n \n     /**\n-     * DELETE /courses/:courseId/exams/:examId/students/:studentLogin : Remove one single given user (based on the login) from the students of the exam so that the student cannot access the exam any more\n+     * DELETE /courses/:courseId/exams/:examId/students/:studentLogin :\n+     * Remove one single given user (based on the login) from the students of the exam so that the student cannot access the exam any more.\n+     * Also deletes", "originalCommit": "29e380c1f311d8c04dcdc31909965c9aa033346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTExMjAwMw==", "url": "https://github.com/ls1intum/Artemis/pull/1789#discussion_r449112003", "bodyText": "Is it intended that we don't save anymore? If so, could you maybe document that the caller has to save the returned exams?", "author": "sleiss", "createdAt": "2020-07-02T15:51:00Z", "path": "src/main/java/de/tum/in/www1/artemis/service/ExamService.java", "diffHunk": "@@ -265,11 +328,6 @@ public void delete(Long examId) {\n \n             studentExams.add(studentExam);\n         }\n-\n-        studentExams = studentExamRepository.saveAll(studentExams);", "originalCommit": "29e380c1f311d8c04dcdc31909965c9aa033346e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTEyMzI1Nw==", "url": "https://github.com/ls1intum/Artemis/pull/1789#discussion_r449123257", "bodyText": "The caller saves them. We can also save them in the called method.", "author": "kloessst", "createdAt": "2020-07-02T16:08:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTExMjAwMw=="}], "type": "inlineReview"}, {"oid": "27ac2cf85f274fb557826ca8a1719c740faca2a9", "url": "https://github.com/ls1intum/Artemis/commit/27ac2cf85f274fb557826ca8a1719c740faca2a9", "message": "Fix merge conflict", "committedDate": "2020-07-02T15:53:16Z", "type": "commit"}, {"oid": "e150604f2f3ad53c70c8a83bd4d0e683aa552e2d", "url": "https://github.com/ls1intum/Artemis/commit/e150604f2f3ad53c70c8a83bd4d0e683aa552e2d", "message": "Update src/main/webapp/i18n/de/exam.json\n\nCo-authored-by: Simon Lei\u00df <5084100+sleiss@users.noreply.github.com>", "committedDate": "2020-07-02T15:54:40Z", "type": "commit"}, {"oid": "21c4cc28fae6fbcf7187fae72d7f44a26b449b97", "url": "https://github.com/ls1intum/Artemis/commit/21c4cc28fae6fbcf7187fae72d7f44a26b449b97", "message": "Document method", "committedDate": "2020-07-02T15:58:15Z", "type": "commit"}, {"oid": "3cb6ddf1f2c6f221afadb75f15b1cdef7ff3f776", "url": "https://github.com/ls1intum/Artemis/commit/3cb6ddf1f2c6f221afadb75f15b1cdef7ff3f776", "message": "Fix doc", "committedDate": "2020-07-02T16:00:09Z", "type": "commit"}, {"oid": "af2883b9e3cfedc46a6728a6c6404eae285b9eca", "url": "https://github.com/ls1intum/Artemis/commit/af2883b9e3cfedc46a6728a6c6404eae285b9eca", "message": "Save student exams in createRandomStudentExams and document behavior", "committedDate": "2020-07-02T16:08:01Z", "type": "commit"}, {"oid": "01b00eb71c7c45c0d914509456a1bed818df612e", "url": "https://github.com/ls1intum/Artemis/commit/01b00eb71c7c45c0d914509456a1bed818df612e", "message": "Merge branch 'enhancement/exam-mode/student-exam-generation' of https://github.com/ls1intum/Artemis into enhancement/exam-mode/student-exam-generation", "committedDate": "2020-07-02T16:08:50Z", "type": "commit"}, {"oid": "837deb87738e28547c43b4815bc5d95fdf66c4ff", "url": "https://github.com/ls1intum/Artemis/commit/837deb87738e28547c43b4815bc5d95fdf66c4ff", "message": "Integration tests for delete student from exam and spotlessApply magic", "committedDate": "2020-07-02T16:38:23Z", "type": "commit"}, {"oid": "44d371e882958d8abba3550b2a2e9ece5ce1e1ec", "url": "https://github.com/ls1intum/Artemis/commit/44d371e882958d8abba3550b2a2e9ece5ce1e1ec", "message": "Add TODO for flaky test case", "committedDate": "2020-07-02T17:06:35Z", "type": "commit"}]}