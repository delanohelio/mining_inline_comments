{"pr_number": 2530, "pr_title": "[Bugfix] Fix issue with saving example text assessments", "pr_createdAt": "2020-12-09T22:20:59Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2530", "timeline": [{"oid": "da29d389204d883321030353226a413f65cf11a5", "url": "https://github.com/ls1intum/Artemis/commit/da29d389204d883321030353226a413f65cf11a5", "message": "move logic of endpoint to parent and adapt child classes accordingly", "committedDate": "2020-12-09T22:18:32Z", "type": "commit"}, {"oid": "1cc0efbc8f6c7809e19ca217166d7c1253488a93", "url": "https://github.com/ls1intum/Artemis/commit/1cc0efbc8f6c7809e19ca217166d7c1253488a93", "message": "implement new endpoint on client", "committedDate": "2020-12-09T22:19:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY5OTE0MA==", "url": "https://github.com/ls1intum/Artemis/pull/2530#discussion_r539699140", "bodyText": "@jpbernius I am not quite sure if we need to use saveTextBlocks here. For the example assessment, we are using the old way of assessing text exercises.\nIt worked completely fine for me without.", "author": "fde312", "createdAt": "2020-12-09T22:34:12Z", "path": "src/main/java/de/tum/in/www1/artemis/web/rest/TextAssessmentResource.java", "diffHunk": "@@ -107,6 +112,23 @@ public TextAssessmentResource(AuthorizationCheckService authCheckService, TextAs\n         return response;\n     }\n \n+    /**\n+     * PUT text-submissions/:submissionId/example-assessment : save manual example text assessment\n+     *\n+     * @param submissionId id of the submission\n+     * @param feedbacks list of feedbacks\n+     * @return result after saving example text assessment\n+     */\n+    @ResponseStatus(HttpStatus.OK)\n+    @ApiResponses({ @ApiResponse(code = 403, message = ErrorConstants.REQ_403_REASON), @ApiResponse(code = 404, message = ErrorConstants.REQ_404_REASON) })\n+    @PutMapping(\"/text-submissions/{submissionId}/example-assessment\")\n+    @PreAuthorize(\"hasAnyRole('TA', 'INSTRUCTOR', 'ADMIN')\")\n+    public ResponseEntity<Result> saveTextExampleAssessment(@PathVariable long submissionId, @RequestBody List<Feedback> feedbacks) {\n+        log.debug(\"REST request to save text example assessment : {}\", submissionId);\n+        // TODO: Figure out if we need to use saveTextBlocks\n+        return super.saveExampleAssessment(submissionId, feedbacks);", "originalCommit": "1cc0efbc8f6c7809e19ca217166d7c1253488a93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ3NDI1Mg==", "url": "https://github.com/ls1intum/Artemis/pull/2530#discussion_r540474252", "bodyText": "We decided that it is not needed as the client would send an empty array to the server anyways.", "author": "fde312", "createdAt": "2020-12-10T20:27:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY5OTE0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY5OTg1Mw==", "url": "https://github.com/ls1intum/Artemis/pull/2530#discussion_r539699853", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // this.assessmentsService.save(this.exercise.id!, this.result.id!, this.assessments, [])", "author": "fde312", "createdAt": "2020-12-09T22:35:37Z", "path": "src/main/webapp/app/exercises/text/manage/example-text-submission/example-text-submission.component.ts", "diffHunk": "@@ -350,12 +350,12 @@ export class ExampleTextSubmissionComponent implements OnInit, AfterViewInit {\n             this.jhiAlertService.error('artemisApp.textAssessment.error.invalidAssessments');\n             return;\n         }\n-\n-        this.assessmentsService.save(this.exercise.id!, this.result.id!, this.assessments, []).subscribe((response) => {\n+        this.assessmentsService.saveExampleAssessment(this.assessments, this.exampleSubmission.id!).subscribe((response) => {\n             this.result = response.body!;\n             this.areNewAssessments = false;\n             this.jhiAlertService.success('artemisApp.textAssessment.saveSuccessful');\n         });\n+        // this.assessmentsService.save(this.exercise.id!, this.result.id!, this.assessments, [])", "originalCommit": "1cc0efbc8f6c7809e19ca217166d7c1253488a93", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f6178bf0b7415cf525042ab118fe557ad3fb75b0", "url": "https://github.com/ls1intum/Artemis/commit/f6178bf0b7415cf525042ab118fe557ad3fb75b0", "message": "Update src/main/webapp/app/exercises/text/manage/example-text-submission/example-text-submission.component.ts", "committedDate": "2020-12-09T22:35:44Z", "type": "commit"}, {"oid": "6ba237ddbf0a3895de8957163be65bed1d638701", "url": "https://github.com/ls1intum/Artemis/commit/6ba237ddbf0a3895de8957163be65bed1d638701", "message": "Merge branch 'develop' into bugfix/text-exercises/example-assessment", "committedDate": "2020-12-10T15:35:19Z", "type": "commit"}, {"oid": "c11783fa978805cf460bc1301df67de8db00ed0a", "url": "https://github.com/ls1intum/Artemis/commit/c11783fa978805cf460bc1301df67de8db00ed0a", "message": "Merge branch 'develop' into bugfix/text-exercises/example-assessment", "committedDate": "2020-12-10T19:43:20Z", "type": "commit"}, {"oid": "1237ad60a9a1b9692c596e59891547bb74d803b1", "url": "https://github.com/ls1intum/Artemis/commit/1237ad60a9a1b9692c596e59891547bb74d803b1", "message": "add server test for new text example submissions route", "committedDate": "2020-12-10T20:27:16Z", "type": "commit"}, {"oid": "f4f3078a7c277165e24134b8adf3dbc16c54d85b", "url": "https://github.com/ls1intum/Artemis/commit/f4f3078a7c277165e24134b8adf3dbc16c54d85b", "message": "Merge branch 'bugfix/text-exercises/example-assessment' of github.com:ls1intum/Artemis into bugfix/text-exercises/example-assessment", "committedDate": "2020-12-10T20:27:44Z", "type": "commit"}]}