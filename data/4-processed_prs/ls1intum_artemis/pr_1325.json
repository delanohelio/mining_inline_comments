{"pr_number": 1325, "pr_title": "Feature/questions answers/markdown", "pr_createdAt": "2020-04-20T17:19:43Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1325", "timeline": [{"oid": "9d6d46f63fa237bbd3aa76254a52afc7f75c999e", "url": "https://github.com/ls1intum/Artemis/commit/9d6d46f63fa237bbd3aa76254a52afc7f75c999e", "message": "add markdown functionality", "committedDate": "2020-04-14T12:01:26Z", "type": "commit"}, {"oid": "370939072f738c1bb82a59060284d2ec618cc34a", "url": "https://github.com/ls1intum/Artemis/commit/370939072f738c1bb82a59060284d2ec618cc34a", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/markdown", "committedDate": "2020-04-17T16:25:05Z", "type": "commit"}, {"oid": "ea3cf0fdf65f1b4c94b591540783c446f45a6c84", "url": "https://github.com/ls1intum/Artemis/commit/ea3cf0fdf65f1b4c94b591540783c446f45a6c84", "message": "change layout of edit mode", "committedDate": "2020-04-17T19:44:46Z", "type": "commit"}, {"oid": "23b305439fe25622221e1cffd300a17e05a18546", "url": "https://github.com/ls1intum/Artemis/commit/23b305439fe25622221e1cffd300a17e05a18546", "message": "enable resize on markdown editor", "committedDate": "2020-04-17T20:20:11Z", "type": "commit"}, {"oid": "dc759c491f8e0345becb4180016eb710916e6c3f", "url": "https://github.com/ls1intum/Artemis/commit/dc759c491f8e0345becb4180016eb710916e6c3f", "message": "markdown editor styling", "committedDate": "2020-04-18T11:24:09Z", "type": "commit"}, {"oid": "cd7172c588fd810f03da6cdfb908044ffcae1834", "url": "https://github.com/ls1intum/Artemis/commit/cd7172c588fd810f03da6cdfb908044ffcae1834", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/markdown", "committedDate": "2020-04-20T15:11:21Z", "type": "commit"}, {"oid": "005026ccb924fcd06eeacc03c09c7bf10c3ba46a", "url": "https://github.com/ls1intum/Artemis/commit/005026ccb924fcd06eeacc03c09c7bf10c3ba46a", "message": "prettier", "committedDate": "2020-04-20T15:16:49Z", "type": "commit"}, {"oid": "a606e26e89d8716fefd13557bd0c0fad00669509", "url": "https://github.com/ls1intum/Artemis/commit/a606e26e89d8716fefd13557bd0c0fad00669509", "message": "remove formula and fullscreen", "committedDate": "2020-04-20T21:01:40Z", "type": "commit"}, {"oid": "5fb71cede4acc896b35d5d51ae88c2786a676fa0", "url": "https://github.com/ls1intum/Artemis/commit/5fb71cede4acc896b35d5d51ae88c2786a676fa0", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/markdown\n\n# Conflicts:\n#\tsrc/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "committedDate": "2020-04-21T07:37:55Z", "type": "commit"}, {"oid": "e8a86e5455a5191a3f6c34b6f4d979935df46366", "url": "https://github.com/ls1intum/Artemis/commit/e8a86e5455a5191a3f6c34b6f4d979935df46366", "message": "fix tests", "committedDate": "2020-04-21T07:39:23Z", "type": "commit"}, {"oid": "ea1c3674311ada7c344ce0264d8d1fe400648e61", "url": "https://github.com/ls1intum/Artemis/commit/ea1c3674311ada7c344ce0264d8d1fe400648e61", "message": "remove yarn.lock from pr", "committedDate": "2020-04-21T08:04:39Z", "type": "commit"}, {"oid": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e", "url": "https://github.com/ls1intum/Artemis/commit/19c1a8dbfab70f23cecc57cffc9311eeea62c83e", "message": "really remove yarn.lock from pr", "committedDate": "2020-04-21T08:09:57Z", "type": "commit"}, {"oid": "82861f51026c4ae004f233c7b980ff93f61c42f7", "url": "https://github.com/ls1intum/Artemis/commit/82861f51026c4ae004f233c7b980ff93f61c42f7", "message": "remove fullscreen option for new question", "committedDate": "2020-04-21T09:57:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA0OTE0Mg==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412049142", "bodyText": "Can this be simplified to command.displayCommandButton?", "author": "madwau", "createdAt": "2020-04-21T10:02:16Z", "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "diffHunk": "@@ -27,42 +27,48 @@\n                     </div>\n                     <!--color picker command -->\n                     <div class=\"btn-group col-xs-6\">\n-                        <div class=\"color-preview form-control btn btn-outline-secondary\" (click)=\"openColorSelector($event)\">\n+                        <div class=\"color-preview btn btn-sm\" [ngStyle]=\"{ borderColor: selectedColor }\" (click)=\"openColorSelector($event)\">\n                             Color\n                         </div>\n                         <jhi-color-selector [tagColors]=\"markdownColors\" (selectedColor)=\"onSelectedColor($event)\"></jhi-color-selector>\n                     </div>\n+\n+                    <!-- domain commands -->\n+                    <div class=\"markdown-editor__commands-domain\" *ngIf=\"domainCommands && domainCommands.length != 0\">\n+                        <ng-container *ngFor=\"let command of domainCommands | typeCheck: DomainTagCommand\">\n+                            <div *ngIf=\"command.displayCommandButton === true\" class=\"btn btn-sm\" (click)=\"command.execute()\">", "originalCommit": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA4MjA5Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412082096", "bodyText": "Good catch! I didn't notice it, while rearranging the commands. Fixed with cb8b3bb", "author": "filip-gregurevic", "createdAt": "2020-04-21T10:54:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA0OTE0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MDM4Mg==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412050382", "bodyText": "Could [] be a default value for the Input that doesn't need to be passed in explicitly?", "author": "madwau", "createdAt": "2020-04-21T10:04:08Z", "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -49,12 +52,19 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                 </div>\n             </div>\n         </div>\n+        <!-- question in edit mode -->\n         <div *ngIf=\"isEditMode\">\n             <div class=\"row mb-1 mt-2\">\n                 <div class=\"col-12\">\n                     <div class=\"form-group\">\n                         <label class=\"form-control-label\">{{ 'artemisApp.courseOverview.exerciseDetails.faq.newQuestionLabel' | translate }}</label>\n-                        <textarea [(ngModel)]=\"studentQuestionText\" class=\"form-control\" name=\"answer\"></textarea>\n+                        <jhi-markdown-editor\n+                            class=\"markdown-editor background-editor-color\"\n+                            [(markdown)]=\"studentQuestionText\"\n+                            [editorMode]=\"EditorMode.LATEX\"\n+                            [enableResize]=\"true\"\n+                            [metaCommands]=\"[]\"", "originalCommit": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2ODY2MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412068661", "bodyText": "I needed to do it that way for now in order to keep the fullscreen option in every other usage of the markdown editor and disable it here, but I will change this when refactoring the whole editor in a follow-up PR.", "author": "filip-gregurevic", "createdAt": "2020-04-21T10:32:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MDM4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MTM1Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412051356", "bodyText": "A bootstrap .col should always be a child of a .row.", "author": "madwau", "createdAt": "2020-04-21T10:05:47Z", "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -63,53 +73,102 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                 </div>\n             </div>\n         </div>\n+        <!-- approved answers -->\n         <div class=\"row mb-1 answer-approved\" *ngFor=\"let approvedQuestionAnswer of approvedQuestionAnswers\">\n-            <div class=\"col\" [ngbTooltip]=\"'artemisApp.courseOverview.exerciseDetails.faq.approvedLabel' | translate\">\n+            <div class=\"col\">\n                 <div *ngIf=\"isAnswerMode && selectedQuestionAnswer && approvedQuestionAnswer && selectedQuestionAnswer.id === approvedQuestionAnswer.id\">\n                     <div class=\"col-12\">", "originalCommit": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA4MTU3MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412081571", "bodyText": "fixed with cb8b3bb", "author": "filip-gregurevic", "createdAt": "2020-04-21T10:53:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1MTM1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1OTc1MA==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412059750", "bodyText": "The code below looks very similar to the one for the approved answers. There also seems to be a lot of shared template code between the view and edit state (see screenshot below).\nI think it would make sense to avoid this duplication by creating small new components whenever reusable parts like these manifest themselves.\nCode duplicate:", "author": "madwau", "createdAt": "2020-04-21T10:18:37Z", "path": "src/main/webapp/app/overview/student-questions/student-question-row.component.html", "diffHunk": "@@ -135,13 +195,52 @@ <h6 class=\"text-black-50 question-subtitle\">{{ studentQuestion.author.name }} -\n                     </div>\n                 </div>\n             </div>\n+            <!-- unapproved answers -->", "originalCommit": "19c1a8dbfab70f23cecc57cffc9311eeea62c83e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA2NzU5Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412067596", "bodyText": "I will address the code duplication (or at least very similar code) in a follow-up PR, in which I change the layout of the questions and answers (and also refactor them into smaller components).\n@HanyaElhashemy", "author": "filip-gregurevic", "createdAt": "2020-04-21T10:31:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1OTc1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjEyMDY2Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412120666", "bodyText": "Great, thanks!", "author": "madwau", "createdAt": "2020-04-21T11:58:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1OTc1MA=="}], "type": "inlineReview"}, {"oid": "cb8b3bbfc0d8d43792ef8f1033ee0fbfcb125008", "url": "https://github.com/ls1intum/Artemis/commit/cb8b3bbfc0d8d43792ef8f1033ee0fbfcb125008", "message": "apply feedback", "committedDate": "2020-04-21T10:52:51Z", "type": "commit"}, {"oid": "143e6061797db69ef0b8b4e2acae6633775c0403", "url": "https://github.com/ls1intum/Artemis/commit/143e6061797db69ef0b8b4e2acae6633775c0403", "message": "set min height for editor", "committedDate": "2020-04-21T12:57:48Z", "type": "commit"}, {"oid": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d", "url": "https://github.com/ls1intum/Artemis/commit/b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d", "message": "Merge branch 'develop' into feature/questions-answers/markdown", "committedDate": "2020-04-21T14:24:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI4MDE4OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412280189", "bodyText": "I removed the ngStyle attribute in a previous PR because changing the border color would only make sense to me if I could reapply the selected color by simply clicking on the button without having to choose a color again.\nAnother problem I see here is that the border color doesn\u00b4t update once I continue to edit the text outside of the span I just set to a given color.\nJust wanted to mention this so you could possibly target this in your next PR on the functionality changes for the markdown editor. :)", "author": "balazs-czopf", "createdAt": "2020-04-21T15:20:50Z", "path": "src/main/webapp/app/shared/markdown-editor/markdown-editor.component.html", "diffHunk": "@@ -27,42 +27,48 @@\n                     </div>\n                     <!--color picker command -->\n                     <div class=\"btn-group col-xs-6\">\n-                        <div class=\"color-preview form-control btn btn-outline-secondary\" (click)=\"openColorSelector($event)\">\n+                        <div class=\"color-preview btn btn-sm\" [ngStyle]=\"{ borderColor: selectedColor }\" (click)=\"openColorSelector($event)\">", "originalCommit": "b7e7c7371cea5f2f1f81234ee0a1cd667d35fc7d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI5NTEyMg==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412295122", "bodyText": "@balazs-czopf makes total sense, I'll include this in the next PR. I guess it must have slipped back in when resolving the merge conflicts. Thanks! :)", "author": "filip-gregurevic", "createdAt": "2020-04-21T15:53:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI4MDE4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM4OTc1OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1325#discussion_r412389759", "bodyText": "Good catch, I'll remove this directly on develop then.", "author": "krusche", "createdAt": "2020-04-21T18:23:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI4MDE4OQ=="}], "type": "inlineReview"}]}