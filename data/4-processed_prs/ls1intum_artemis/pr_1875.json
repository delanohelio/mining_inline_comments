{"pr_number": 1875, "pr_title": "[Exam] Code Editor bugfixes for multiple instances", "pr_createdAt": "2020-07-13T16:15:10Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1875", "timeline": [{"oid": "24eebef909edc07ddd82a502e24116cd3b2127c3", "url": "https://github.com/ls1intum/Artemis/commit/24eebef909edc07ddd82a502e24116cd3b2127c3", "message": "fix client error onSave when switching exercises", "committedDate": "2020-07-13T14:22:46Z", "type": "commit"}, {"oid": "3f7320730173f2c72d8329adf8a862ad25aca209", "url": "https://github.com/ls1intum/Artemis/commit/3f7320730173f2c72d8329adf8a862ad25aca209", "message": "Merge branch 'develop' into bugfix/code-editor/multiple-instances", "committedDate": "2020-07-13T16:15:33Z", "type": "commit"}, {"oid": "871fa16921713f0bb8666d06d96ac8ffae3e9aa0", "url": "https://github.com/ls1intum/Artemis/commit/871fa16921713f0bb8666d06d96ac8ffae3e9aa0", "message": "Add initial programmingSubmission when first loading the exam for student exam conduction.", "committedDate": "2020-07-13T19:04:26Z", "type": "commit"}, {"oid": "7e45646cd923987c1bd7f47871eb4f4258daa138", "url": "https://github.com/ls1intum/Artemis/commit/7e45646cd923987c1bd7f47871eb4f4258daa138", "message": "Try to check if the results are for the correct exercise", "committedDate": "2020-07-13T19:05:39Z", "type": "commit"}, {"oid": "fd78e88baeaf347ba6119274107a5eabe0f843ca", "url": "https://github.com/ls1intum/Artemis/commit/fd78e88baeaf347ba6119274107a5eabe0f843ca", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of github.com:ls1intum/Artemis into bugfix/code-editor/multiple-instances", "committedDate": "2020-07-13T19:06:31Z", "type": "commit"}, {"oid": "9ac4d13df39a0b37900128d4d6c72f7255850339", "url": "https://github.com/ls1intum/Artemis/commit/9ac4d13df39a0b37900128d4d6c72f7255850339", "message": "always set the result, if no result is already set", "committedDate": "2020-07-13T19:29:20Z", "type": "commit"}, {"oid": "4fa32b7f9f00310d9f3376db5f9fa9119227b8aa", "url": "https://github.com/ls1intum/Artemis/commit/4fa32b7f9f00310d9f3376db5f9fa9119227b8aa", "message": "user participation id instead of result.participation.id", "committedDate": "2020-07-13T19:32:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg4NTk5OA==", "url": "https://github.com/ls1intum/Artemis/pull/1875#discussion_r453885998", "bodyText": "why are you doing this? Can you add some comments?", "author": "krusche", "createdAt": "2020-07-13T19:37:34Z", "path": "src/main/webapp/app/exam/participate/exam-participation.component.ts", "diffHunk": "@@ -191,6 +192,8 @@ export class ExamParticipationComponent implements OnInit, OnDestroy, ComponentC\n                         participation.submissions.forEach((submission) => {\n                             submission.isSynced = true;\n                         });\n+                    } else if (exercise.type === ExerciseType.PROGRAMMING) {\n+                        participation.submissions.push(new ProgrammingSubmission());", "originalCommit": "4fa32b7f9f00310d9f3376db5f9fa9119227b8aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk1MDgxOQ==", "url": "https://github.com/ls1intum/Artemis/pull/1875#discussion_r453950819", "bodyText": "We use the isSynced flag of the Submission  to show to appropriate status in the navigation bar header of the student exam conduction. Without this, the navigation bar header is not uploaded. For ProgrammingExercise's however, when the student first loads the student exam, programming exercises do not have a submission in their participation, even though their status is correctly set to 'initialised'.\nThis led to the navigation bar header status not being updated or set as there is no submission.\nAn easy way around this is to set an initial programming submission. This would be overridden as soon as the student commits something. After the user commits for the first time for a given exercise, the real submission is loaded.\nThe client never sends the submission to the server, the submission is created on the server using the results received from the CI server, therefore this approach should not cause any inconsistencies.", "author": "anditurdiu", "createdAt": "2020-07-13T21:43:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg4NTk5OA=="}], "type": "inlineReview"}, {"oid": "2fd947d5563aafdc0338d1949f18614b7000fc41", "url": "https://github.com/ls1intum/Artemis/commit/2fd947d5563aafdc0338d1949f18614b7000fc41", "message": "Fix task steps bar", "committedDate": "2020-07-13T20:36:42Z", "type": "commit"}, {"oid": "30e6d9ba8caf032be1b5449262e8ae6200f2e998", "url": "https://github.com/ls1intum/Artemis/commit/30e6d9ba8caf032be1b5449262e8ae6200f2e998", "message": "refactor saveFiles", "committedDate": "2020-07-13T21:28:23Z", "type": "commit"}, {"oid": "f81603007b1998c20f4ef25b0a9640a18d13cd06", "url": "https://github.com/ls1intum/Artemis/commit/f81603007b1998c20f4ef25b0a9640a18d13cd06", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of github.com:ls1intum/Artemis into bugfix/code-editor/multiple-instances", "committedDate": "2020-07-13T21:29:31Z", "type": "commit"}, {"oid": "6c6858e267d36cb2e2b93e3cfee7bfe05d7dc169", "url": "https://github.com/ls1intum/Artemis/commit/6c6858e267d36cb2e2b93e3cfee7bfe05d7dc169", "message": "Remove unnecessary check", "committedDate": "2020-07-13T21:35:30Z", "type": "commit"}, {"oid": "fcb2144576486db83b31765970d8f397411b64b5", "url": "https://github.com/ls1intum/Artemis/commit/fcb2144576486db83b31765970d8f397411b64b5", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of https://github.com/ls1intum/Artemis into bugfix/code-editor/multiple-instances", "committedDate": "2020-07-13T21:35:49Z", "type": "commit"}, {"oid": "bcc2d98c10997d1e21d4fb81577b8aed2d3f9ce8", "url": "https://github.com/ls1intum/Artemis/commit/bcc2d98c10997d1e21d4fb81577b8aed2d3f9ce8", "message": "fix commit jest test", "committedDate": "2020-07-13T22:21:09Z", "type": "commit"}, {"oid": "1a2a675453e3fa898e42c836311852f9ab42da1c", "url": "https://github.com/ls1intum/Artemis/commit/1a2a675453e3fa898e42c836311852f9ab42da1c", "message": "throw error", "committedDate": "2020-07-13T22:28:01Z", "type": "commit"}, {"oid": "740aa6178ff4062127008d83cd8a56feb3d8aa01", "url": "https://github.com/ls1intum/Artemis/commit/740aa6178ff4062127008d83cd8a56feb3d8aa01", "message": "Merge branch 'develop' into bugfix/code-editor/multiple-instances", "committedDate": "2020-07-13T22:34:05Z", "type": "commit"}, {"oid": "bb6efd9c1d752a8d83cf7469b5d828a797e88e51", "url": "https://github.com/ls1intum/Artemis/commit/bb6efd9c1d752a8d83cf7469b5d828a797e88e51", "message": "rethrow error", "committedDate": "2020-07-13T22:50:06Z", "type": "commit"}, {"oid": "6ca4a5c9839cd417cf1f6060b0f9989d357c926d", "url": "https://github.com/ls1intum/Artemis/commit/6ca4a5c9839cd417cf1f6060b0f9989d357c926d", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of github.com:ls1intum/Artemis into bugfix/code-editor/multiple-instances", "committedDate": "2020-07-13T22:51:49Z", "type": "commit"}, {"oid": "d1d5e6672633f854d3f7a87fce96415797eb75ec", "url": "https://github.com/ls1intum/Artemis/commit/d1d5e6672633f854d3f7a87fce96415797eb75ec", "message": "fix test", "committedDate": "2020-07-13T22:57:16Z", "type": "commit"}, {"oid": "7e37c3611405a1d6d806f3c6335d49d31a45d6f6", "url": "https://github.com/ls1intum/Artemis/commit/7e37c3611405a1d6d806f3c6335d49d31a45d6f6", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of https://github.com/ls1intum/Artemis into bugfix/code-editor/multiple-instances", "committedDate": "2020-07-13T22:58:33Z", "type": "commit"}, {"oid": "1dfac560f56d4b82da63ec6bcb09b57da093b699", "url": "https://github.com/ls1intum/Artemis/commit/1dfac560f56d4b82da63ec6bcb09b57da093b699", "message": "another one!", "committedDate": "2020-07-13T23:01:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk5OTkzNg==", "url": "https://github.com/ls1intum/Artemis/pull/1875#discussion_r453999936", "bodyText": "Reason to edit test: This test expected the status to be uncommited_changes as we did not wait for a response from saveFiles called by commit. With the changes introduced, we wait for saveFiles to return before we commit. The commitState  is set to committing, after saving the changes, before sending the (commit) request to the server.", "author": "anditurdiu", "createdAt": "2020-07-13T23:16:03Z", "path": "src/test/javascript/spec/integration/code-editor/code-editor-student.integration.spec.ts", "diffHunk": "@@ -496,13 +496,11 @@ describe('CodeEditorStudentIntegration', () => {\n         expect(saveFilesStub).to.have.been.calledOnceWithExactly([{ fileName: unsavedFile, fileContent: 'lorem ipsum' }]);\n         expect(container.editorState).to.equal(EditorState.SAVING);\n         expect(container.fileBrowser.status.editorState).to.equal(EditorState.SAVING);\n-        expect(container.commitState).to.equal(CommitState.UNCOMMITTED_CHANGES);\n-        expect(container.fileBrowser.status.commitState).to.equal(CommitState.UNCOMMITTED_CHANGES);\n-        saveFilesSubject.next({ [unsavedFile]: null });\n-\n         // committing\n         expect(commitStub).to.have.been.calledOnce;\n         expect(container.commitState).to.equal(CommitState.COMMITTING);\n+        expect(container.fileBrowser.status.commitState).to.equal(CommitState.COMMITTING);", "originalCommit": "1dfac560f56d4b82da63ec6bcb09b57da093b699", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "65174c8dc06f18ad178b1be7851177b0e64d5705", "url": "https://github.com/ls1intum/Artemis/commit/65174c8dc06f18ad178b1be7851177b0e64d5705", "message": "Set return type of interface method updateFiles", "committedDate": "2020-07-13T23:29:43Z", "type": "commit"}, {"oid": "386ce74ff745d8e336510555d4ef70d23f8cc5e7", "url": "https://github.com/ls1intum/Artemis/commit/386ce74ff745d8e336510555d4ef70d23f8cc5e7", "message": "Merge branch 'bugfix/code-editor/multiple-instances' of github.com:ls1intum/Artemis into bugfix/code-editor/multiple-instances", "committedDate": "2020-07-13T23:30:27Z", "type": "commit"}]}