{"pr_number": 1604, "pr_title": "Chore/content version header", "pr_createdAt": "2020-06-09T07:47:30Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1604", "timeline": [{"oid": "0557aa9e8889f62a6e1f54a08dd5c34d12ed025f", "url": "https://github.com/ls1intum/Artemis/commit/0557aa9e8889f62a6e1f54a08dd5c34d12ed025f", "message": "Expose Artemis Version in Content-Version Header", "committedDate": "2020-06-09T07:15:45Z", "type": "commit"}, {"oid": "78d6b27c0419154146e6893aea81b7027fedff25", "url": "https://github.com/ls1intum/Artemis/commit/78d6b27c0419154146e6893aea81b7027fedff25", "message": "Add Tests\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-09T07:15:45Z", "type": "commit"}, {"oid": "2c9eddf2d8c8cadf20f17dfd6a95aedffbd34507", "url": "https://github.com/ls1intum/Artemis/commit/2c9eddf2d8c8cadf20f17dfd6a95aedffbd34507", "message": "Add documentation\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-09T07:44:13Z", "type": "commit"}, {"oid": "9eb67f419648c20bda260a96730393899f812edf", "url": "https://github.com/ls1intum/Artemis/commit/9eb67f419648c20bda260a96730393899f812edf", "message": "Merge branch 'develop' into chore/Content-Version-header", "committedDate": "2020-06-09T07:48:47Z", "type": "commit"}, {"oid": "5293a79e8cb4d7b89f0a029cc9c3cabb02126ead", "url": "https://github.com/ls1intum/Artemis/commit/5293a79e8cb4d7b89f0a029cc9c3cabb02126ead", "message": "Add API Version filter before all other filters.\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-09T09:45:12Z", "type": "commit"}, {"oid": "939b4ce510f268946c3bb22b53efde0200d1fc88", "url": "https://github.com/ls1intum/Artemis/commit/939b4ce510f268946c3bb22b53efde0200d1fc88", "message": "Merge branch 'develop' into chore/Content-Version-header", "committedDate": "2020-06-09T09:45:45Z", "type": "commit"}, {"oid": "3d0bdd24fb117531019313b603d1ad7f3cf857ba", "url": "https://github.com/ls1intum/Artemis/commit/3d0bdd24fb117531019313b603d1ad7f3cf857ba", "message": "Merge branch 'develop' into chore/Content-Version-header", "committedDate": "2020-06-16T11:44:58Z", "type": "commit"}, {"oid": "75baa4712f32cf1a71e678a02acb15db1bd97ad8", "url": "https://github.com/ls1intum/Artemis/commit/75baa4712f32cf1a71e678a02acb15db1bd97ad8", "message": "Improve Tests & Simplify Config\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-16T18:32:14Z", "type": "commit"}, {"oid": "6268cced46c1158f1a1da45c9935b7ef788f463c", "url": "https://github.com/ls1intum/Artemis/commit/6268cced46c1158f1a1da45c9935b7ef788f463c", "message": "Merge branch 'develop' into chore/Content-Version-header", "committedDate": "2020-06-16T18:33:04Z", "type": "commit"}, {"oid": "8024195cb5b5b5f6421068e4f758a21f8967057f", "url": "https://github.com/ls1intum/Artemis/commit/8024195cb5b5b5f6421068e4f758a21f8967057f", "message": "Show Outdated Warning in Client\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-16T20:08:13Z", "type": "commit"}, {"oid": "3fee6b86613d8c3284f712bf1ad689912ab9c378", "url": "https://github.com/ls1intum/Artemis/commit/3fee6b86613d8c3284f712bf1ad689912ab9c378", "message": "Remove @Profile(\"artemis\")\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-16T20:28:08Z", "type": "commit"}, {"oid": "2e27100c30b661e798dd1f5ac64d28712ce22e2f", "url": "https://github.com/ls1intum/Artemis/commit/2e27100c30b661e798dd1f5ac64d28712ce22e2f", "message": "Merge branch 'develop' into chore/Content-Version-header", "committedDate": "2020-06-16T20:28:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE1NDExNA==", "url": "https://github.com/ls1intum/Artemis/pull/1604#discussion_r441154114", "bodyText": "Unfortunately, most Server Tests fail with the current implementation. When removing the conformance to the Filter interface, all tests pass al the sudden.\npublic class ApiVersionFilter {\n\nI cannot understand why this is the case. Maybe someone can help here?", "author": "jpbernius", "createdAt": "2020-06-16T21:31:21Z", "path": "src/main/java/de/tum/in/www1/artemis/config/ApiVersionFilter.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package de.tum.in.www1.artemis.config;\n+\n+import java.io.IOException;\n+\n+import javax.servlet.Filter;\n+import javax.servlet.FilterChain;\n+import javax.servlet.ServletException;\n+import javax.servlet.ServletRequest;\n+import javax.servlet.ServletResponse;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.stereotype.Component;\n+\n+@Component\n+public class ApiVersionFilter implements Filter {", "originalCommit": "2e27100c30b661e798dd1f5ac64d28712ce22e2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "01a25c9d6a46c11d84e7696206d70bf68f9e7b7a", "url": "https://github.com/ls1intum/Artemis/commit/01a25c9d6a46c11d84e7696206d70bf68f9e7b7a", "message": "Maybe fix failing Tests\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-16T21:36:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE1NjA3NA==", "url": "https://github.com/ls1intum/Artemis/pull/1604#discussion_r442156074", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    this.showAlert.pipe(throttleTime(2000)).subscribe(() => alertService.addAlert({ type: 'info', msg: 'artemisApp.outdatedAlert', timeout: 30000 }, []));\n          \n          \n            \n                    this.showAlert.pipe(throttleTime(10000)).subscribe(() => alertService.addAlert({ type: 'info', msg: 'artemisApp.outdatedAlert', timeout: 30000 }, []));", "author": "krusche", "createdAt": "2020-06-18T11:25:48Z", "path": "src/main/webapp/app/core/interceptor/artemis-version.interceptor.ts", "diffHunk": "@@ -0,0 +1,28 @@\n+import { Injectable } from '@angular/core';\n+import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse } from '@angular/common/http';\n+import { Observable, Subject } from 'rxjs';\n+import { tap, throttleTime } from 'rxjs/operators';\n+import { ARTEMIS_VERSION_HEADER, VERSION } from 'app/app.constants';\n+import { AlertService } from 'app/core/alert/alert.service';\n+\n+@Injectable()\n+export class ArtemisVersionInterceptor implements HttpInterceptor {\n+    private showAlert = new Subject();\n+\n+    constructor(alertService: AlertService) {\n+        this.showAlert.pipe(throttleTime(2000)).subscribe(() => alertService.addAlert({ type: 'info', msg: 'artemisApp.outdatedAlert', timeout: 30000 }, []));", "originalCommit": "c64a8c0e6662d68fea8dc8a16c937a8b612cf9e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b744e95bd804fe5ec7b38da55e0d82c772237d96", "url": "https://github.com/ls1intum/Artemis/commit/b744e95bd804fe5ec7b38da55e0d82c772237d96", "message": "Merge branch 'develop' into chore/Content-Version-header\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-19T14:35:42Z", "type": "commit"}, {"oid": "34d61cab6f2881702c56ee8e6eaaa8dcd0e6a1cf", "url": "https://github.com/ls1intum/Artemis/commit/34d61cab6f2881702c56ee8e6eaaa8dcd0e6a1cf", "message": "Add Database Reset\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-19T14:55:50Z", "type": "commit"}, {"oid": "34d61cab6f2881702c56ee8e6eaaa8dcd0e6a1cf", "url": "https://github.com/ls1intum/Artemis/commit/34d61cab6f2881702c56ee8e6eaaa8dcd0e6a1cf", "message": "Add Database Reset\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-19T14:55:50Z", "type": "forcePushed"}, {"oid": "b936ddfdbdbeb41c39d95221e4ee478b3ed880ec", "url": "https://github.com/ls1intum/Artemis/commit/b936ddfdbdbeb41c39d95221e4ee478b3ed880ec", "message": "Update src/main/webapp/app/core/interceptor/artemis-version.interceptor.ts\n\nCo-authored-by: Stephan Krusche <krusche@in.tum.de>", "committedDate": "2020-06-19T15:05:27Z", "type": "commit"}, {"oid": "a4bf752f4ac442428dd85c2ba801c763a6d82e4e", "url": "https://github.com/ls1intum/Artemis/commit/a4bf752f4ac442428dd85c2ba801c763a6d82e4e", "message": "Remove unused import\n\nSigned-off-by: Jan Philip Bernius <janphilip.bernius@tum.de>", "committedDate": "2020-06-19T16:36:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM5MDIwMA==", "url": "https://github.com/ls1intum/Artemis/pull/1604#discussion_r443390200", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \"outdatedAlert\": \"<b>Outdated Artemis Version:</b> You are using an outdated Artemis version. Please refresh the page to prevent incompatibilities.\"\n          \n          \n            \n                    \"outdatedAlert\": \"<b>Your Artemis version is outdated:</b> Please reload the browser page to prevent incompatibilities.\"", "author": "krusche", "createdAt": "2020-06-22T08:17:29Z", "path": "src/main/webapp/i18n/en/alert.json", "diffHunk": "@@ -4,6 +4,7 @@\n             \"alert\": \"Alert\",\n             \"disconnected\": \"You are not connected to the Artemis Server. Please check your internet connection.\",\n             \"reconnected\": \"You were reconnected to the Artemis Server.\"\n-        }\n+        },\n+        \"outdatedAlert\": \"<b>Outdated Artemis Version:</b> You are using an outdated Artemis version. Please refresh the page to prevent incompatibilities.\"", "originalCommit": "a4bf752f4ac442428dd85c2ba801c763a6d82e4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM5MTQ5MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1604#discussion_r443391491", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \"outdatedAlert\": \"<b>Veraltete Artemis Version:</b> Du benutzt eine alte Artemis Version. Bitte aktualisiere die Seite um Inkompatibilit\u00e4ten zu vermeiden.\"\n          \n          \n            \n                    \"outdatedAlert\": \"<b>Deine Artemis Version ist veraltet:</b> Bitte lade die Browser Seite neu um Inkompatibilit\u00e4ten zu vermeiden.\"", "author": "krusche", "createdAt": "2020-06-22T08:19:54Z", "path": "src/main/webapp/i18n/de/alert.json", "diffHunk": "@@ -4,6 +4,7 @@\n             \"alert\": \"Achtung\",\n             \"disconnected\": \"Du bist nicht mehr mit dem Artemis Server verbunden. Bitte \u00fcberpr\u00fcfe deine Internet Verbindung.\",\n             \"reconnected\": \"Du bist wieder mit dem Artemis Server verbunden.\"\n-        }\n+        },\n+        \"outdatedAlert\": \"<b>Veraltete Artemis Version:</b> Du benutzt eine alte Artemis Version. Bitte aktualisiere die Seite um Inkompatibilit\u00e4ten zu vermeiden.\"", "originalCommit": "a4bf752f4ac442428dd85c2ba801c763a6d82e4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "319374f4faefa1133c2b5d6e925185b0b86b8f18", "url": "https://github.com/ls1intum/Artemis/commit/319374f4faefa1133c2b5d6e925185b0b86b8f18", "message": "improve alert message", "committedDate": "2020-06-22T08:20:15Z", "type": "commit"}]}