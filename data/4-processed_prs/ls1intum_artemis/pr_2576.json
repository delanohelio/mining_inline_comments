{"pr_number": 2576, "pr_title": "[Fix] Fix results not showing in participation-submission component", "pr_createdAt": "2020-12-19T21:57:52Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/2576", "timeline": [{"oid": "6927376fd5b7982a401e7841c3906e7ea7a643f7", "url": "https://github.com/ls1intum/Artemis/commit/6927376fd5b7982a401e7841c3906e7ea7a643f7", "message": "Provided quickfix for results not showing", "committedDate": "2020-12-19T21:54:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMzMjE4MQ==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546332181", "bodyText": "we might shorten it by:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            {{ value && value.length > 0 && value[value.length - 1].assessor ? value[value.length - 1].assessor.name : 'n.a' }}\n          \n          \n            \n                            {{ value && value.length > 0 && value[value.length - 1].assessor?.name || 'n.a' }}", "author": "derLalla", "createdAt": "2020-12-20T06:58:18Z", "path": "src/main/webapp/app/exercises/shared/participation-submission/participation-submission.component.html", "diffHunk": "@@ -39,20 +39,20 @@\n                 {{ value | artemisDate: 'long':true }}\n             </ng-template>\n         </ngx-datatable-column>\n-        <ngx-datatable-column prop=\"result\">\n+        <ngx-datatable-column prop=\"results\">\n             <ng-template ngx-datatable-header-template>\n                 <span jhiTranslate=\"artemisApp.participation.participationSubmission.result\"></span>\n             </ng-template>\n             <ng-template ngx-datatable-cell-template let-value=\"value\">\n-                <jhi-result [result]=\"value\" [participation]=\"participation\"></jhi-result>\n+                <jhi-result [result]=\"value && value.length > 0 ? value[value.length - 1] : null\" [participation]=\"participation\"></jhi-result>\n             </ng-template>\n         </ngx-datatable-column>\n-        <ngx-datatable-column prop=\"result\">\n+        <ngx-datatable-column prop=\"results\">\n             <ng-template ngx-datatable-header-template>\n                 <span jhiTranslate=\"artemisApp.participation.participationSubmission.assessor\"></span>\n             </ng-template>\n             <ng-template ngx-datatable-cell-template let-value=\"value\">\n-                {{ value && value.assessor ? value.assessor.name : 'n.a' }}\n+                {{ value && value.length > 0 && value[value.length - 1].assessor ? value[value.length - 1].assessor.name : 'n.a' }}", "originalCommit": "6927376fd5b7982a401e7841c3906e7ea7a643f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5ODcxNA==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546398714", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            {{ value && value.length > 0 && value[value.length - 1].assessor ? value[value.length - 1].assessor.name : 'n.a' }}\n          \n          \n            \n                            {{ value && value.assessor ? value.assessor.name : 'n.a' }}", "author": "krusche", "createdAt": "2020-12-20T16:27:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMzMjE4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5ODc2Ng==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546398766", "bodyText": "see my comment above, after merging #2551 we could easily use latestResult as prop in line 50. Then no change would be needed in line 55", "author": "krusche", "createdAt": "2020-12-20T16:27:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMzMjE4MQ=="}], "type": "inlineReview"}, {"oid": "72ae63a899b1c988a829994ad4d87a50a9a29fa3", "url": "https://github.com/ls1intum/Artemis/commit/72ae63a899b1c988a829994ad4d87a50a9a29fa3", "message": "fixed issue where assessor was not shown", "committedDate": "2020-12-20T11:53:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5Nzk5Mg==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546397992", "bodyText": "please rename this method as well to reflect that the results + assessor are loaded as well", "author": "krusche", "createdAt": "2020-12-20T16:21:04Z", "path": "src/main/java/de/tum/in/www1/artemis/service/ParticipationService.java", "diffHunk": "@@ -475,7 +475,7 @@ public StudentParticipation participationForQuizWithResult(QuizExercise quizExer\n      * @return List<submission>\n      */\n     public List<Submission> getSubmissionsWithParticipationId(long participationId) {", "originalCommit": "72ae63a899b1c988a829994ad4d87a50a9a29fa3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5OTAxOQ==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546399019", "bodyText": "this is important so that other potential users of this method immediately know what exactly is returned (also to realize if data such as the assessor can be exposed or not). This should also be reflected in the JavaDoc of the method", "author": "krusche", "createdAt": "2020-12-20T16:29:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5Nzk5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5ODA4MA==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546398080", "bodyText": "please use undefined instead of null", "author": "krusche", "createdAt": "2020-12-20T16:22:01Z", "path": "src/main/webapp/app/exercises/shared/participation-submission/participation-submission.component.html", "diffHunk": "@@ -39,20 +39,20 @@\n                 {{ value | artemisDate: 'long':true }}\n             </ng-template>\n         </ngx-datatable-column>\n-        <ngx-datatable-column prop=\"result\">\n+        <ngx-datatable-column prop=\"results\">\n             <ng-template ngx-datatable-header-template>\n                 <span jhiTranslate=\"artemisApp.participation.participationSubmission.result\"></span>\n             </ng-template>\n             <ng-template ngx-datatable-cell-template let-value=\"value\">\n-                <jhi-result [result]=\"value\" [participation]=\"participation\"></jhi-result>\n+                <jhi-result [result]=\"value && value.length > 0 ? value[value.length - 1] : null\" [participation]=\"participation\"></jhi-result>", "originalCommit": "72ae63a899b1c988a829994ad4d87a50a9a29fa3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5ODYwMw==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546398603", "bodyText": "another (preferred) option would be to make sure latestResult is initialized correctly (see #2551) in submission which should be done in the submission.service.ts within findAllSubmissionsOfParticipation. Then we could simply use latestResult as prop in line 42 and keep using value in line 47\n@nicolasruscher could", "author": "krusche", "createdAt": "2020-12-20T16:26:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5ODA4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5ODY2MA==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546398660", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <ngx-datatable-column prop=\"results\">\n          \n          \n            \n                    <ngx-datatable-column prop=\"latestResult\">", "author": "krusche", "createdAt": "2020-12-20T16:26:43Z", "path": "src/main/webapp/app/exercises/shared/participation-submission/participation-submission.component.html", "diffHunk": "@@ -39,20 +39,20 @@\n                 {{ value | artemisDate: 'long':true }}\n             </ng-template>\n         </ngx-datatable-column>\n-        <ngx-datatable-column prop=\"result\">\n+        <ngx-datatable-column prop=\"results\">\n             <ng-template ngx-datatable-header-template>\n                 <span jhiTranslate=\"artemisApp.participation.participationSubmission.result\"></span>\n             </ng-template>\n             <ng-template ngx-datatable-cell-template let-value=\"value\">\n-                <jhi-result [result]=\"value\" [participation]=\"participation\"></jhi-result>\n+                <jhi-result [result]=\"value && value.length > 0 ? value[value.length - 1] : null\" [participation]=\"participation\"></jhi-result>\n             </ng-template>\n         </ngx-datatable-column>\n-        <ngx-datatable-column prop=\"result\">\n+        <ngx-datatable-column prop=\"results\">", "originalCommit": "72ae63a899b1c988a829994ad4d87a50a9a29fa3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ab0857462d7f3197c7336455d10e479ebca74d55", "url": "https://github.com/ls1intum/Artemis/commit/ab0857462d7f3197c7336455d10e479ebca74d55", "message": "Merge branch 'develop' into bugfix/results-participation-submission", "committedDate": "2020-12-20T17:49:13Z", "type": "commit"}, {"oid": "57c1d19256a9feeb05dfd80ca9ca5cf72f984755", "url": "https://github.com/ls1intum/Artemis/commit/57c1d19256a9feeb05dfd80ca9ca5cf72f984755", "message": "Merge branch 'develop' into bugfix/results-participation-submission", "committedDate": "2020-12-20T17:57:05Z", "type": "commit"}, {"oid": "87b2fcd46b55c59764620872150ab4d09595ecfa", "url": "https://github.com/ls1intum/Artemis/commit/87b2fcd46b55c59764620872150ab4d09595ecfa", "message": "Merge branch 'bugfix/results-participation-submission' of https://github.com/ls1intum/Artemis into bugfix/results-participation-submission", "committedDate": "2020-12-20T17:58:18Z", "type": "commit"}, {"oid": "9d538c3d8e26daf514770f8a01d6217f19e1ad4f", "url": "https://github.com/ls1intum/Artemis/commit/9d538c3d8e26daf514770f8a01d6217f19e1ad4f", "message": "refactored results to use latestResult, renamed method", "committedDate": "2020-12-20T18:19:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwNTU4NQ==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546905585", "bodyText": "I don\u2019t really like this code as it is duplicated. Can this not be handled by the same function in submission.model.ts ? Also we should not call the variable tmp", "author": "krusche", "createdAt": "2020-12-21T20:06:04Z", "path": "src/main/webapp/app/exercises/shared/submission/submission.service.ts", "diffHunk": "@@ -42,8 +42,10 @@ export class SubmissionService {\n                 tap((res) =>\n                     res.body!.forEach((submission) => {\n                         // reconnect results to submissions\n-                        if (getLatestSubmissionResult(submission)) {\n-                            getLatestSubmissionResult(submission)!.submission = submission;\n+                        const tmp = getLatestSubmissionResult(submission);", "originalCommit": "9d538c3d8e26daf514770f8a01d6217f19e1ad4f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkxNTY5Ng==", "url": "https://github.com/ls1intum/Artemis/pull/2576#discussion_r546915696", "bodyText": "Is now fixed and refactored", "author": "nicolasruscher", "createdAt": "2020-12-21T20:30:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwNTU4NQ=="}], "type": "inlineReview"}, {"oid": "c7a8fd618ba0646a2a57b24ae5e6ca4c984d6deb", "url": "https://github.com/ls1intum/Artemis/commit/c7a8fd618ba0646a2a57b24ae5e6ca4c984d6deb", "message": "fixed and refactored doublicated code", "committedDate": "2020-12-21T20:30:12Z", "type": "commit"}]}