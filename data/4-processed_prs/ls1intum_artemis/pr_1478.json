{"pr_number": 1478, "pr_title": "Upvote / Downvote questions", "pr_createdAt": "2020-05-15T21:30:43Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1478", "timeline": [{"oid": "3138d9c8642b3cf0d9e2983f06b141bc28555de2", "url": "https://github.com/ls1intum/Artemis/commit/3138d9c8642b3cf0d9e2983f06b141bc28555de2", "message": "init component and template", "committedDate": "2020-05-13T16:42:32Z", "type": "commit"}, {"oid": "40ae729f589529efe3016641ffd7768e3bb31af5", "url": "https://github.com/ls1intum/Artemis/commit/40ae729f589529efe3016641ffd7768e3bb31af5", "message": "add database column, adapt java code, init javascript functionality", "committedDate": "2020-05-14T14:02:30Z", "type": "commit"}, {"oid": "b00a833ecf7065e12a533d7df23a1fd651760028", "url": "https://github.com/ls1intum/Artemis/commit/b00a833ecf7065e12a533d7df23a1fd651760028", "message": "add jsdoc", "committedDate": "2020-05-14T17:12:35Z", "type": "commit"}, {"oid": "cdcebfff9cc2dff82189507db95c63cd0159fb48", "url": "https://github.com/ls1intum/Artemis/commit/cdcebfff9cc2dff82189507db95c63cd0159fb48", "message": "add api call", "committedDate": "2020-05-15T17:20:09Z", "type": "commit"}, {"oid": "9a0cb9f9f70a99e9868d982900fe154e89d641c7", "url": "https://github.com/ls1intum/Artemis/commit/9a0cb9f9f70a99e9868d982900fe154e89d641c7", "message": "add localstorage logic", "committedDate": "2020-05-15T18:12:56Z", "type": "commit"}, {"oid": "0148fabb5d4bcf0cadc9024d00a3dcb8bc39c81a", "url": "https://github.com/ls1intum/Artemis/commit/0148fabb5d4bcf0cadc9024d00a3dcb8bc39c81a", "message": "add styling for votes", "committedDate": "2020-05-15T20:07:42Z", "type": "commit"}, {"oid": "cc99c73bf7deed44e656fc2b858c55671673503c", "url": "https://github.com/ls1intum/Artemis/commit/cc99c73bf7deed44e656fc2b858c55671673503c", "message": "remove from localStorage on delete", "committedDate": "2020-05-15T20:15:01Z", "type": "commit"}, {"oid": "232255bdf9c17d1418e81f5854989bd3d8a16558", "url": "https://github.com/ls1intum/Artemis/commit/232255bdf9c17d1418e81f5854989bd3d8a16558", "message": "add tests", "committedDate": "2020-05-15T21:25:41Z", "type": "commit"}, {"oid": "305eeb52f120e42b32288acac7cf347d0a5779ba", "url": "https://github.com/ls1intum/Artemis/commit/305eeb52f120e42b32288acac7cf347d0a5779ba", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/question-vote", "committedDate": "2020-05-15T21:27:53Z", "type": "commit"}, {"oid": "b241be1f773738791a258f623bba492ae752a17f", "url": "https://github.com/ls1intum/Artemis/commit/b241be1f773738791a258f623bba492ae752a17f", "message": "fix java style", "committedDate": "2020-05-15T21:33:00Z", "type": "commit"}, {"oid": "ada320610b969ca03462856aa8b7111a3ec2717a", "url": "https://github.com/ls1intum/Artemis/commit/ada320610b969ca03462856aa8b7111a3ec2717a", "message": "fix java tests", "committedDate": "2020-05-15T22:01:55Z", "type": "commit"}, {"oid": "632f7c952e120046314d6a42e98b706d26ed1238", "url": "https://github.com/ls1intum/Artemis/commit/632f7c952e120046314d6a42e98b706d26ed1238", "message": "add default value for old questions", "committedDate": "2020-05-16T10:53:48Z", "type": "commit"}, {"oid": "ec6f5c2f61dcbfca1565eaadc4d7ee5a9fe05442", "url": "https://github.com/ls1intum/Artemis/commit/ec6f5c2f61dcbfca1565eaadc4d7ee5a9fe05442", "message": "merge changelogs", "committedDate": "2020-05-17T11:26:33Z", "type": "commit"}, {"oid": "1e6d6b197445983403c2684be7f6b7cb796e1266", "url": "https://github.com/ls1intum/Artemis/commit/1e6d6b197445983403c2684be7f6b7cb796e1266", "message": "liquibase fix", "committedDate": "2020-05-17T17:39:33Z", "type": "commit"}, {"oid": "e9361ca728767e9d5e333bc1a563d0d1f660c01e", "url": "https://github.com/ls1intum/Artemis/commit/e9361ca728767e9d5e333bc1a563d0d1f660c01e", "message": "fix up/downvite logic", "committedDate": "2020-05-17T18:15:34Z", "type": "commit"}, {"oid": "92ead2c630e62210486e7f923020dba5716c320b", "url": "https://github.com/ls1intum/Artemis/commit/92ead2c630e62210486e7f923020dba5716c320b", "message": "adjust tests", "committedDate": "2020-05-17T18:31:36Z", "type": "commit"}, {"oid": "1e3344e4f5a03cba467fca2b7848c8819159897e", "url": "https://github.com/ls1intum/Artemis/commit/1e3344e4f5a03cba467fca2b7848c8819159897e", "message": "Merge branch 'develop' into feature/questions-answers/question-vote", "committedDate": "2020-05-18T16:40:16Z", "type": "commit"}, {"oid": "737d14cb05aa980c944c9c95d1f667e05d3ffe3f", "url": "https://github.com/ls1intum/Artemis/commit/737d14cb05aa980c944c9c95d1f667e05d3ffe3f", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into feature/questions-answers/question-vote", "committedDate": "2020-05-22T17:53:06Z", "type": "commit"}, {"oid": "dc5407fb2a7e8528d48d8a571a9287ca431edaba", "url": "https://github.com/ls1intum/Artemis/commit/dc5407fb2a7e8528d48d8a571a9287ca431edaba", "message": "add sort by vote for questions", "committedDate": "2020-05-22T18:21:18Z", "type": "commit"}, {"oid": "d1f9b1f2ee86d9ac35516eea6a5e28d5d25c42a1", "url": "https://github.com/ls1intum/Artemis/commit/d1f9b1f2ee86d9ac35516eea6a5e28d5d25c42a1", "message": "Merge branch 'develop' into feature/questions-answers/question-vote", "committedDate": "2020-05-23T16:57:04Z", "type": "commit"}, {"oid": "94fbbf2bdce11e85044b51d6bac6e9d475317d5e", "url": "https://github.com/ls1intum/Artemis/commit/94fbbf2bdce11e85044b51d6bac6e9d475317d5e", "message": "Merge branch 'develop' into feature/questions-answers/question-vote", "committedDate": "2020-05-23T19:42:37Z", "type": "commit"}, {"oid": "dce0becb4b316baeb766b6fd98b5daf4f220c9a5", "url": "https://github.com/ls1intum/Artemis/commit/dce0becb4b316baeb766b6fd98b5daf4f220c9a5", "message": "only send diff of vote change", "committedDate": "2020-05-24T19:50:28Z", "type": "commit"}, {"oid": "6476d1645c3343136afc8f6042c137d7a3b5b39c", "url": "https://github.com/ls1intum/Artemis/commit/6476d1645c3343136afc8f6042c137d7a3b5b39c", "message": "fix tests", "committedDate": "2020-05-24T20:03:43Z", "type": "commit"}, {"oid": "16279158d910e5a1d86e54e5c199f8e45cf1b0b2", "url": "https://github.com/ls1intum/Artemis/commit/16279158d910e5a1d86e54e5c199f8e45cf1b0b2", "message": "fix test fix", "committedDate": "2020-05-24T20:16:39Z", "type": "commit"}, {"oid": "b935582791ad08784a7672b89702765fc13b694a", "url": "https://github.com/ls1intum/Artemis/commit/b935582791ad08784a7672b89702765fc13b694a", "message": "Merge branch 'develop' into feature/questions-answers/question-vote", "committedDate": "2020-05-25T09:45:44Z", "type": "commit"}, {"oid": "0f20fd66e55f2547dceda5c7cc3e50ef104c112b", "url": "https://github.com/ls1intum/Artemis/commit/0f20fd66e55f2547dceda5c7cc3e50ef104c112b", "message": "add check for max vote change", "committedDate": "2020-05-25T11:13:50Z", "type": "commit"}, {"oid": "8377799649851aa8351d65b96fc219e8c48a6259", "url": "https://github.com/ls1intum/Artemis/commit/8377799649851aa8351d65b96fc219e8c48a6259", "message": "cap votes at zero", "committedDate": "2020-05-25T11:36:28Z", "type": "commit"}, {"oid": "b823830b0f2bb8aa6d19e1b80d114b63cfb140d2", "url": "https://github.com/ls1intum/Artemis/commit/b823830b0f2bb8aa6d19e1b80d114b63cfb140d2", "message": "fix server tests", "committedDate": "2020-05-25T11:53:41Z", "type": "commit"}, {"oid": "e854ee46a49d39993098936848fa1ffa2d98a1e8", "url": "https://github.com/ls1intum/Artemis/commit/e854ee46a49d39993098936848fa1ffa2d98a1e8", "message": "Merge branch 'develop' into feature/questions-answers/question-vote", "committedDate": "2020-05-25T16:24:29Z", "type": "commit"}, {"oid": "082f724ac09bca5514176d2464ae795ca3e5a202", "url": "https://github.com/ls1intum/Artemis/commit/082f724ac09bca5514176d2464ae795ca3e5a202", "message": "remove notification", "committedDate": "2020-05-25T16:30:03Z", "type": "commit"}, {"oid": "101c5d9f2d53db31edd141388ba2db4ad6693a4f", "url": "https://github.com/ls1intum/Artemis/commit/101c5d9f2d53db31edd141388ba2db4ad6693a4f", "message": "Merge branch 'feature/questions-answers/question-vote' of https://github.com/ls1intum/Artemis into feature/questions-answers/question-vote", "committedDate": "2020-05-25T16:31:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMzQyNg==", "url": "https://github.com/ls1intum/Artemis/pull/1478#discussion_r432713426", "bodyText": "I believe some test cases where the value actually gets changed would be quite useful.", "author": "sleiss", "createdAt": "2020-05-29T20:13:41Z", "path": "src/test/java/de/tum/in/www1/artemis/StudentQuestionIntegrationTest.java", "diffHunk": "@@ -214,4 +214,41 @@ public void deleteStudentQuestions_asStudent() throws Exception {\n         request.delete(\"/api/student-questions/\" + studentQuestion1_student2.getId(), HttpStatus.FORBIDDEN);\n         assertThat(studentQuestionRepository.count()).isEqualTo(1);\n     }\n+\n+    @Test\n+    @WithMockUser(username = \"instructor1\", roles = \"INSTRUCTOR\")\n+    public void editStudentQuestionVotes_asInstructor() throws Exception {\n+        StudentQuestion studentQuestion = database.createCourseWithExerciseAndStudentQuestions().get(0);\n+\n+        studentQuestion.setVotes(42);\n+\n+        StudentQuestion updatedStudentQuestion = request.putWithResponseBody(\"/api/student-questions/\" + studentQuestion.getId() + \"/votes\", 0, StudentQuestion.class,\n+                HttpStatus.OK);\n+        assertThat(updatedStudentQuestion.getVotes().equals(42));\n+    }\n+\n+    @Test\n+    @WithMockUser(username = \"tutor1\", roles = \"TA\")\n+    public void editStudentQuestionVotes_asTA() throws Exception {\n+        StudentQuestion studentQuestion = database.createCourseWithExerciseAndStudentQuestions().get(0);\n+\n+        studentQuestion.setVotes(42);\n+\n+        StudentQuestion updatedStudentQuestion = request.putWithResponseBody(\"/api/student-questions/\" + studentQuestion.getId() + \"/votes\", 0, StudentQuestion.class,\n+                HttpStatus.OK);\n+        assertThat(updatedStudentQuestion.getVotes().equals(42));\n+    }\n+\n+    @Test\n+    @WithMockUser(username = \"student1\", roles = \"USER\")\n+    public void editStudentQuestionVotes_asStudent() throws Exception {\n+        List<StudentQuestion> questions = database.createCourseWithExerciseAndStudentQuestions();\n+        StudentQuestion studentQuestion = questions.get(0);\n+\n+        studentQuestion.setVotes(42);\n+\n+        StudentQuestion updatedStudentQuestion = request.putWithResponseBody(\"/api/student-questions/\" + studentQuestion.getId() + \"/votes\", 0, StudentQuestion.class,\n+                HttpStatus.OK);\n+        assertThat(updatedStudentQuestion.getVotes().equals(42));\n+    }", "originalCommit": "101c5d9f2d53db31edd141388ba2db4ad6693a4f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgzNTQ5Mw==", "url": "https://github.com/ls1intum/Artemis/pull/1478#discussion_r432835493", "bodyText": "These were just placeholders, now there are tests that actually test something with 45b799f", "author": "filip-gregurevic", "createdAt": "2020-05-30T11:54:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMzQyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg4MjE4Mg==", "url": "https://github.com/ls1intum/Artemis/pull/1478#discussion_r432882182", "bodyText": "Yeah, thats how I like them test cases :D", "author": "sleiss", "createdAt": "2020-05-30T19:52:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMzQyNg=="}], "type": "inlineReview"}, {"oid": "45b799f736ae7a4a3ae31813144fb489be783d9b", "url": "https://github.com/ls1intum/Artemis/commit/45b799f736ae7a4a3ae31813144fb489be783d9b", "message": "tests that actually test something", "committedDate": "2020-05-30T11:42:51Z", "type": "commit"}, {"oid": "4ee90463a715bf57558837c48277a3cd1a9e6147", "url": "https://github.com/ls1intum/Artemis/commit/4ee90463a715bf57558837c48277a3cd1a9e6147", "message": "Merge branch 'develop' into feature/questions-answers/question-vote", "committedDate": "2020-06-01T18:46:20Z", "type": "commit"}]}