{"pr_number": 1760, "pr_title": "[Exam] Add exam to course overview", "pr_createdAt": "2020-06-30T07:29:09Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1760", "timeline": [{"oid": "026a835945549e4b364f7c21f8eedf334bf09372", "url": "https://github.com/ls1intum/Artemis/commit/026a835945549e4b364f7c21f8eedf334bf09372", "message": "add exam to course overview", "committedDate": "2020-06-30T07:26:05Z", "type": "commit"}, {"oid": "e48fb49f00ed10ddc4aae501b37c9b1f6c5e6205", "url": "https://github.com/ls1intum/Artemis/commit/e48fb49f00ed10ddc4aae501b37c9b1f6c5e6205", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview", "committedDate": "2020-06-30T11:36:27Z", "type": "commit"}, {"oid": "8c0329d9b60ee93544ce09428e29e6bb414ccdcc", "url": "https://github.com/ls1intum/Artemis/commit/8c0329d9b60ee93544ce09428e29e6bb414ccdcc", "message": "display only exams which start in the future", "committedDate": "2020-06-30T11:37:49Z", "type": "commit"}, {"oid": "27f595a192bf80741dd4388438a49017459ea9b9", "url": "https://github.com/ls1intum/Artemis/commit/27f595a192bf80741dd4388438a49017459ea9b9", "message": "added css file and refactored html", "committedDate": "2020-06-30T11:38:41Z", "type": "commit"}, {"oid": "60a4bec9dfd1f5d5bd63fd97b5c618ba720b48cc", "url": "https://github.com/ls1intum/Artemis/commit/60a4bec9dfd1f5d5bd63fd97b5c618ba720b48cc", "message": "added translation", "committedDate": "2020-06-30T11:56:15Z", "type": "commit"}, {"oid": "63c90d03e120acfb2513ea68f9a389d953de7a1c", "url": "https://github.com/ls1intum/Artemis/commit/63c90d03e120acfb2513ea68f9a389d953de7a1c", "message": "remove sever call as exams are already loaded in courses", "committedDate": "2020-06-30T13:57:01Z", "type": "commit"}, {"oid": "0fb1c22d4fd5d866d69229cfcfbe061ae458151f", "url": "https://github.com/ls1intum/Artemis/commit/0fb1c22d4fd5d866d69229cfcfbe061ae458151f", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview", "committedDate": "2020-06-30T13:57:10Z", "type": "commit"}, {"oid": "7b282a2a37ea80d8b86203e1f8fc09481b5c1068", "url": "https://github.com/ls1intum/Artemis/commit/7b282a2a37ea80d8b86203e1f8fc09481b5c1068", "message": "fix typo", "committedDate": "2020-06-30T14:53:20Z", "type": "commit"}, {"oid": "81e605e136c703c0e6de757144a8ade8dc5ea6c4", "url": "https://github.com/ls1intum/Artemis/commit/81e605e136c703c0e6de757144a8ade8dc5ea6c4", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview", "committedDate": "2020-06-30T17:08:02Z", "type": "commit"}, {"oid": "fa89f24b15fadb3391f8da9bb28eacfd1203d906", "url": "https://github.com/ls1intum/Artemis/commit/fa89f24b15fadb3391f8da9bb28eacfd1203d906", "message": "amend", "committedDate": "2020-06-30T17:16:45Z", "type": "commit"}, {"oid": "f45026047c53b1c38db37e8d5a00a65363b7305e", "url": "https://github.com/ls1intum/Artemis/commit/f45026047c53b1c38db37e8d5a00a65363b7305e", "message": "change logic of next relevant exams", "committedDate": "2020-06-30T18:49:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAxMjU4Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1760#discussion_r448012586", "bodyText": "Discussed this with @MaisiKoleni . You should use the server time here and not moment() and calculate the individual endDate because some students have extra time", "author": "stefanwaldhauser", "createdAt": "2020-06-30T22:22:55Z", "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -71,6 +72,18 @@ export class CoursesComponent implements OnInit, OnDestroy {\n                 // TODO: Stephan Krusche: this is deactivate at the moment, I think we need a more generic solution in more components, e.g. using the the existing notification\n                 // sent to the client, when a quiz starts. This should slide in from the side.\n                 // this.subscribeForQuizStartForCourses();\n+\n+                // get all exams of courses\n+                this.courses.forEach((course) => {\n+                    if (course.exams) {\n+                        // set course for exam as it is not loaded within the server call\n+                        course.exams.forEach((exam) => {\n+                            exam.course = course;\n+                            this.exams.push(exam);\n+                        });\n+                    }\n+                });\n+                this.nextRelevantExams = this.exams.filter((exam) => moment(exam.endDate!).isAfter(moment()));", "originalCommit": "f45026047c53b1c38db37e8d5a00a65363b7305e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI5NjE3Ng==", "url": "https://github.com/ls1intum/Artemis/pull/1760#discussion_r448296176", "bodyText": "@stefanwaldhauser I am using the server time now, good catch! \ud83d\udc4d\nAbout calculating the individual endDate for each Exam and displaying it for so long, I discussed this with @krusche and it is okay to just display it until the regular endDate", "author": "fde312", "createdAt": "2020-07-01T11:22:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAxMjU4Ng=="}], "type": "inlineReview"}, {"oid": "72570a150e0947340583ac84d15afc3116577ca5", "url": "https://github.com/ls1intum/Artemis/commit/72570a150e0947340583ac84d15afc3116577ca5", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview", "committedDate": "2020-07-01T08:44:53Z", "type": "commit"}, {"oid": "00ec6e67da74755a93624245da97dfb6749136ea", "url": "https://github.com/ls1intum/Artemis/commit/00ec6e67da74755a93624245da97dfb6749136ea", "message": "Merge branch 'develop' of https://github.com/ls1intum/Artemis into exam-mode/client/add-exam-to-course-overview", "committedDate": "2020-07-01T10:56:08Z", "type": "commit"}, {"oid": "1839a15a873dbb557990591ac66e7c51b7950728", "url": "https://github.com/ls1intum/Artemis/commit/1839a15a873dbb557990591ac66e7c51b7950728", "message": "use server time instead of moment()", "committedDate": "2020-07-01T10:56:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMyMjY1NA==", "url": "https://github.com/ls1intum/Artemis/pull/1760#discussion_r448322654", "bodyText": "Could you maybe change this to use isBefore / isAfter. It would look a lot cleaner. (Even tough the logic is sometimes a bit tricky)", "author": "filip-gregurevic", "createdAt": "2020-07-01T12:17:42Z", "path": "src/main/webapp/app/overview/courses.component.ts", "diffHunk": "@@ -111,6 +126,33 @@ export class CoursesComponent implements OnInit, OnDestroy {\n         }\n     }\n \n+    /**\n+     * Sets the course for the next upcoming exam and returns the next upcoming exam or undefined\n+     */\n+    get nextRelevantExam(): Exam | undefined {\n+        let relevantExam: Exam | undefined = undefined;\n+        if (this.nextRelevantExams) {\n+            if (this.nextRelevantExams.length === 0) {\n+                return undefined;\n+            } else if (this.nextRelevantExams.length === 1) {\n+                relevantExam = this.nextRelevantExams[0];\n+            } else {\n+                relevantExam = this.nextRelevantExams.sort((a, b) => {\n+                    return moment(a.startDate).valueOf() - moment(b.startDate).valueOf();", "originalCommit": "1839a15a873dbb557990591ac66e7c51b7950728", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM5MDYwNQ==", "url": "https://github.com/ls1intum/Artemis/pull/1760#discussion_r448390605", "bodyText": "@filip-gregurevic The sorting functionality of arrays does not work with booleans, therefore I would leave it how it is \ud83d\ude04", "author": "fde312", "createdAt": "2020-07-01T14:10:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMyMjY1NA=="}], "type": "inlineReview"}]}