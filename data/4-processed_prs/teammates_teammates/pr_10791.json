{"pr_number": 10791, "pr_title": "[#10750] Add institute to footer for unregistered key", "pr_createdAt": "2020-10-18T06:09:53Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10791", "timeline": [{"oid": "8f7440d3f0e32b2ea0872e0cf406644c92ee8344", "url": "https://github.com/TEAMMATES/teammates/commit/8f7440d3f0e32b2ea0872e0cf406644c92ee8344", "message": "Add institute to StudentData in GetStudentAction", "committedDate": "2020-10-17T03:46:52Z", "type": "commit"}, {"oid": "65f1c346576fe16bcb85d8c99f476b47c2ba1490", "url": "https://github.com/TEAMMATES/teammates/commit/65f1c346576fe16bcb85d8c99f476b47c2ba1490", "message": "TODO commit", "committedDate": "2020-10-18T06:06:49Z", "type": "commit"}, {"oid": "785624a1dc43d7eb7c60a62fcf3ff8677e33a5a3", "url": "https://github.com/TEAMMATES/teammates/commit/785624a1dc43d7eb7c60a62fcf3ff8677e33a5a3", "message": "Merge branch 'master' into 10750-institute", "committedDate": "2020-12-11T01:54:16Z", "type": "commit"}, {"oid": "2477112e8a6b8e99aca26fd3b445f7b54a6d6f60", "url": "https://github.com/TEAMMATES/teammates/commit/2477112e8a6b8e99aca26fd3b445f7b54a6d6f60", "message": "Populate institute for public pages", "committedDate": "2020-12-11T03:40:20Z", "type": "commit"}, {"oid": "2477112e8a6b8e99aca26fd3b445f7b54a6d6f60", "url": "https://github.com/TEAMMATES/teammates/commit/2477112e8a6b8e99aca26fd3b445f7b54a6d6f60", "message": "Populate institute for public pages", "committedDate": "2020-12-11T03:40:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTk1ODQyNA==", "url": "https://github.com/TEAMMATES/teammates/pull/10791#discussion_r541958424", "bodyText": "I believe we can do away with the ternary operations here.\nconst courseId: string = queryParams.courseid;\nconst regKey: string = queryParams.key;\nconst studentEmail: string = queryParams.studentemail;\nif (courseId && regKey && studentEmail) {\n  this.studentService.getStudent(courseId, studentEmail, regKey).subscribe((student: Student) => {\n      this.institute = student.institute || \"\";\n  });\n}", "author": "rrtheonlyone", "createdAt": "2020-12-13T16:31:46Z", "path": "src/web/app/public-page.component.ts", "diffHunk": "@@ -2,24 +2,40 @@ import { Component } from '@angular/core';\n import { ActivatedRoute } from '@angular/router';\n import { environment } from '../environments/environment';\n import { AuthService } from '../services/auth.service';\n+import { StudentService } from '../services/student.service';\n+import { Student } from '../types/api-output';\n \n /**\n  * Component for publicly available pages.\n  */\n @Component({\n   selector: 'tm-public-page',\n-  template: '<tm-page [isValidUser]=\"true\" [hideAuthInfo]=\"true\"></tm-page>',\n+  template: '<tm-page [isValidUser]=\"true\" [hideAuthInfo]=\"true\" [institute]=\"institute\"></tm-page>',\n })\n export class PublicPageComponent {\n+  institute: string = '';\n \n   constructor(private route: ActivatedRoute,\n-              private authService: AuthService) {\n+              private authService: AuthService,\n+              private studentService: StudentService) {\n     if (environment.maintenance) {\n       return;\n     }\n     this.route.queryParams.subscribe((queryParams: any) => {\n       this.authService.getAuthUser(queryParams.user).subscribe(() => {\n-        // No need to do anything; this is necessary to get CSRF token\n+        // No need to do anything with result; this is necessary to get CSRF token\n+\n+        // Loads institute for student session submission and result\n+        const courseId: string = queryParams.courseid ? queryParams.courseid : '';\n+        const regKey: string = queryParams.key ? queryParams.key : '';", "originalCommit": "2477112e8a6b8e99aca26fd3b445f7b54a6d6f60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4ed4db6b8e52c6107df2260993406c5f5ccfeb9c", "url": "https://github.com/TEAMMATES/teammates/commit/4ed4db6b8e52c6107df2260993406c5f5ccfeb9c", "message": "Refactor ternary operators", "committedDate": "2020-12-22T11:47:52Z", "type": "commit"}, {"oid": "4ed4db6b8e52c6107df2260993406c5f5ccfeb9c", "url": "https://github.com/TEAMMATES/teammates/commit/4ed4db6b8e52c6107df2260993406c5f5ccfeb9c", "message": "Refactor ternary operators", "committedDate": "2020-12-22T11:47:52Z", "type": "forcePushed"}, {"oid": "17f839091c47a5a775eedfe6e24841499ac0fb50", "url": "https://github.com/TEAMMATES/teammates/commit/17f839091c47a5a775eedfe6e24841499ac0fb50", "message": "Merge branch 'master' into 10750-institute", "committedDate": "2020-12-25T02:04:58Z", "type": "commit"}]}