{"pr_number": 10290, "pr_title": "[#10245] UAT Round 2 Fix: Sorting of floating point numbers", "pr_createdAt": "2020-07-08T10:44:46Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10290", "timeline": [{"oid": "0783920fdb5b4049e3241b0acec32961a896e37d", "url": "https://github.com/TEAMMATES/teammates/commit/0783920fdb5b4049e3241b0acec32961a896e37d", "message": "Change SortBy constants for numerical scale", "committedDate": "2020-07-08T10:15:11Z", "type": "commit"}, {"oid": "1b6ea6030d801914159f8aa0434483568a732fa5", "url": "https://github.com/TEAMMATES/teammates/commit/1b6ea6030d801914159f8aa0434483568a732fa5", "message": "Add tests for comparing floats", "committedDate": "2020-07-08T10:18:43Z", "type": "commit"}, {"oid": "83d08639fb499717de16071f59a09fbfac096c49", "url": "https://github.com/TEAMMATES/teammates/commit/83d08639fb499717de16071f59a09fbfac096c49", "message": "Add compare float method", "committedDate": "2020-07-08T10:18:44Z", "type": "commit"}, {"oid": "d1576f504ae05369949f86acccf8f8307b8916cb", "url": "https://github.com/TEAMMATES/teammates/commit/d1576f504ae05369949f86acccf8f8307b8916cb", "message": "Shift floating point related SortBy constants", "committedDate": "2020-07-08T10:18:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ1NDIyNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10290#discussion_r451454226", "bodyText": "compareFloats -> compareNumbers", "author": "wkurniawan07", "createdAt": "2020-07-08T10:53:21Z", "path": "src/web/services/table-comparator.service.ts", "diffHunk": "@@ -37,38 +37,49 @@ export class TableComparatorService {\n     return 0;\n   }\n \n+  /**\n+   * Compares two strings which are expected to be floating point numbers depending on the order given.\n+   * If either string cannot be parsed into number, it will be seen as 'smaller'\n+   * If both strings cannot be parsed into number, strA will always be seen as 'larger'\n+   */\n+  compareFloats(strA: string, strB: string, order: SortOrder): number {", "originalCommit": "d1576f504ae05369949f86acccf8f8307b8916cb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ1NDkwNA==", "url": "https://github.com/TEAMMATES/teammates/pull/10290#discussion_r451454904", "bodyText": "You can shorten these 9 lines:\nreturn (order === SortOrder.DESC ? -1 : 1) * Math.sign(numA - numB);", "author": "wkurniawan07", "createdAt": "2020-07-08T10:54:36Z", "path": "src/web/services/table-comparator.service.ts", "diffHunk": "@@ -37,38 +37,49 @@ export class TableComparatorService {\n     return 0;\n   }\n \n+  /**\n+   * Compares two strings which are expected to be floating point numbers depending on the order given.\n+   * If either string cannot be parsed into number, it will be seen as 'smaller'\n+   * If both strings cannot be parsed into number, strA will always be seen as 'larger'\n+   */\n+  compareFloats(strA: string, strB: string, order: SortOrder): number {\n+    const numA: number = Number(strA);\n+    const numB: number = Number(strB);\n+    if (Number.isNaN(numA)) {\n+      return 1;\n+    }\n+\n+    if (Number.isNaN(numB)) {\n+      return -1;\n+    }\n+\n+    if (order === SortOrder.ASC) {\n+      return numA < numB ? -1 : (numA > numB ? 1 : 0);\n+    }\n+\n+    if (order === SortOrder.DESC) {\n+      return numA < numB ? 1 : (numA > numB ? -1 : 0);\n+    }\n+\n+    return 0;", "originalCommit": "d1576f504ae05369949f86acccf8f8307b8916cb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU2ODEzMg==", "url": "https://github.com/TEAMMATES/teammates/pull/10290#discussion_r451568132", "bodyText": "No need to specify it as \"floating point\" because all numbers behave like that in JS.", "author": "wkurniawan07", "createdAt": "2020-07-08T14:01:16Z", "path": "src/web/services/table-comparator.service.ts", "diffHunk": "@@ -37,38 +37,49 @@ export class TableComparatorService {\n     return 0;\n   }\n \n+  /**\n+   * Compares two strings which are expected to be floating point numbers depending on the order given.", "originalCommit": "d1576f504ae05369949f86acccf8f8307b8916cb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bb7e4e3c1637e00ce43fed69aaf5ccd2b324133b", "url": "https://github.com/TEAMMATES/teammates/commit/bb7e4e3c1637e00ce43fed69aaf5ccd2b324133b", "message": "Merge branch 'master' into 10245-sort-natural-numbers", "committedDate": "2020-07-09T03:09:21Z", "type": "commit"}, {"oid": "2120e2e05783a76b15584d8191d7db5defd72e88", "url": "https://github.com/TEAMMATES/teammates/commit/2120e2e05783a76b15584d8191d7db5defd72e88", "message": "Change method name and simplify implementation", "committedDate": "2020-07-09T03:15:55Z", "type": "commit"}, {"oid": "78fb5a2605bc95914320b396f51946053150970c", "url": "https://github.com/TEAMMATES/teammates/commit/78fb5a2605bc95914320b396f51946053150970c", "message": "Merge branch 'master' into 10245-sort-natural-numbers", "committedDate": "2020-07-09T06:34:24Z", "type": "commit"}, {"oid": "1a5d532c3fe5381a45fabc99a70302ceb5a2d3e4", "url": "https://github.com/TEAMMATES/teammates/commit/1a5d532c3fe5381a45fabc99a70302ceb5a2d3e4", "message": "Merge branch 'master' into 10245-sort-natural-numbers", "committedDate": "2020-07-09T11:21:08Z", "type": "commit"}]}