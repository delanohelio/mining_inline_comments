{"pr_number": 10497, "pr_title": "[#10441] [#10443] [#10444] Fix add instructor to course", "pr_createdAt": "2020-07-29T10:08:50Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10497", "timeline": [{"oid": "017c7ef71c6ff52464e4ea9c50ff7cb1126b1993", "url": "https://github.com/TEAMMATES/teammates/commit/017c7ef71c6ff52464e4ea9c50ff7cb1126b1993", "message": "Fix add instructor to course", "committedDate": "2020-07-29T10:06:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIwMzY5Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462203693", "bodyText": "Use &nbsp; instead?", "author": "t-cheepeng", "createdAt": "2020-07-29T10:36:36Z", "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-edit-panel/instructor-edit-panel.component.html", "diffHunk": "@@ -72,14 +72,14 @@\n         <input id=\"checkbox-display-instructor-{{ instructorIndex + 1 }}\" checked=\"\"\n                type=\"checkbox\" [ngModel]=\"instructor.isDisplayedToStudents\"\n                (ngModelChange)=\"triggerModelChange('isDisplayedToStudents', $event)\" [disabled]=\"!instructor.isEditing\">\n-        <span ngbTooltip=\"If this is unselected, the instructor will be completely invisible to students. E.g. to give access to a colleague for \u2018auditing\u2019 your course\">Display to students as:</span>\n+        <span ngbTooltip=\"If this is unselected, the instructor will be completely invisible to students. E.g. to give access to a colleague for \u2018auditing\u2019 your course\"> Display to students as:</span>", "originalCommit": "017c7ef71c6ff52464e4ea9c50ff7cb1126b1993", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c55f4c2b567062499dd1c9af56636d9f501d5887", "url": "https://github.com/TEAMMATES/teammates/commit/c55f4c2b567062499dd1c9af56636d9f501d5887", "message": "Replace space with &nbsp;", "committedDate": "2020-07-29T10:42:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIyMDA1Ng==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462220056", "bodyText": "It's not the placeholder; it's the default value that needs to be changed", "author": "wkurniawan07", "createdAt": "2020-07-29T11:10:17Z", "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-edit-panel/instructor-edit-panel.component.html", "diffHunk": "@@ -72,14 +72,15 @@\n         <input id=\"checkbox-display-instructor-{{ instructorIndex + 1 }}\" checked=\"\"\n                type=\"checkbox\" [ngModel]=\"instructor.isDisplayedToStudents\"\n                (ngModelChange)=\"triggerModelChange('isDisplayedToStudents', $event)\" [disabled]=\"!instructor.isEditing\">\n+        &nbsp;\n         <span ngbTooltip=\"If this is unselected, the instructor will be completely invisible to students. E.g. to give access to a colleague for \u2018auditing\u2019 your course\">Display to students as:</span>\n       </label>\n       <div class=\"col-sm-9\">\n         <input id=\"displayed-name-instructor-{{ instructorIndex + 1 }}\" class=\"form-control\"\n                type=\"text\"\n                (ngModelChange)=\"triggerModelChange('displayedToStudentsAs', $event)\"\n                [disabled]=\"!instructor.isDisplayedToStudents || !instructor.isEditing\"\n-               placeholder=\"E.g.Co-lecturer, Teaching Assistant\"\n+               placeholder=\"Instructor\"", "originalCommit": "c55f4c2b567062499dd1c9af56636d9f501d5887", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIyNTY5Ng==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462225696", "bodyText": "Isn't the default value the placeholder value? The corresponding issue states that it defaults to \"Instructor\" in the backend if left blank (which I assumed meant no input from user)", "author": "madanalogy", "createdAt": "2020-07-29T11:21:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIyMDA1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIyNzg4MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462227880", "bodyText": "placeholder is merely a displayed value in UI, not what is assigned in the data object.\nYes, doing this does resolve the issue in a way, but the input placeholder has another purpose which is to tell user what the field is about (when it is left empty).", "author": "wkurniawan07", "createdAt": "2020-07-29T11:26:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIyMDA1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIzMDQ0MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462230440", "bodyText": "Yes, my understanding of #10444 was that we should display as the placeholder what the value would be if there was no input from the user, not to assign a default value since this is already performed in the backend.\nI agree that the placeholder should indicate what the field is about. Perhaps we could just extend the description to include \"defaults to 'Instructor' if left blank\". @damithc any issues with this alternative?", "author": "madanalogy", "createdAt": "2020-07-29T11:31:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIyMDA1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIzNDYxNw==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462234617", "bodyText": "not to assign a default value since this is already performed in the backend\n\nBack-end and front-end are separate entities. The things we do in the front-end are quality-of-life improvements, but the things we do in the back-end are sanity checks.\nAdd: also, it makes the implicit assumption that the back-end sets the default value Instructor.", "author": "wkurniawan07", "createdAt": "2020-07-29T11:40:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIyMDA1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIzNzUzMg==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462237532", "bodyText": "We can either set the value to Instructor or add to the placeholder (default: Instructor). I'm OK with either option.", "author": "damithc", "createdAt": "2020-07-29T11:46:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIyMDA1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIzOTU0MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462239540", "bodyText": "Okay I will do both update the placeholder and set a default value", "author": "madanalogy", "createdAt": "2020-07-29T11:50:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjIyMDA1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYxOTg2NA==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462619864", "bodyText": "Question here: Will the actual model get updated? This looks magic to me unless the event triggerModelChange('displayedToStudentsAs', $event) get fired somehow by the property.", "author": "xpdavid", "createdAt": "2020-07-29T22:12:10Z", "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-edit-panel/instructor-edit-panel.component.html", "diffHunk": "@@ -72,15 +72,17 @@\n         <input id=\"checkbox-display-instructor-{{ instructorIndex + 1 }}\" checked=\"\"\n                type=\"checkbox\" [ngModel]=\"instructor.isDisplayedToStudents\"\n                (ngModelChange)=\"triggerModelChange('isDisplayedToStudents', $event)\" [disabled]=\"!instructor.isEditing\">\n+        &nbsp;\n         <span ngbTooltip=\"If this is unselected, the instructor will be completely invisible to students. E.g. to give access to a colleague for \u2018auditing\u2019 your course\">Display to students as:</span>\n       </label>\n       <div class=\"col-sm-9\">\n         <input id=\"displayed-name-instructor-{{ instructorIndex + 1 }}\" class=\"form-control\"\n                type=\"text\"\n                (ngModelChange)=\"triggerModelChange('displayedToStudentsAs', $event)\"\n                [disabled]=\"!instructor.isDisplayedToStudents || !instructor.isEditing\"\n-               placeholder=\"E.g.Co-lecturer, Teaching Assistant\"\n-               [ngModel]=\"instructor.isDisplayedToStudents ? instructor.displayedToStudentsAs : '(This instructor will NOT be displayed to students)'\">\n+               [ngModel]=\"instructor.isDisplayedToStudents ? instructor.displayedToStudentsAs : '(This instructor will NOT be displayed to students)'\"\n+               [defaultValue]=\"'Instructor'\"", "originalCommit": "a134c9bbc881bcadd835b419ac98d1239b61240f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY1NjE2MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462656160", "bodyText": "Yeap, I tested this by creating a new instructor and watching the http request payload for the api call. The default value does get inserted in if the user leaves it blank.", "author": "madanalogy", "createdAt": "2020-07-29T23:58:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYxOTg2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY3Njk0MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462676941", "bodyText": "Although it works, I would prefer to change the default value in newInstructorPanel: InstructorEditPanel.\nActually, if the initial value added in newInstructorPanel: InstructorEditPanel will be overriden by [defaultValue]. We have a problem as the template html should not store the modal data.", "author": "xpdavid", "createdAt": "2020-07-30T01:14:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYxOTg2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY4NDg0OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462684849", "bodyText": "I think the setting of defaultValue triggers ngModelChange but I can't find supporting references for this so it's just my guess. Anyway, I added the default value to the model.", "author": "madanalogy", "createdAt": "2020-07-30T01:42:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYxOTg2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY4Njk3MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462686971", "bodyText": "So we should delete this?", "author": "xpdavid", "createdAt": "2020-07-30T01:49:42Z", "path": "src/web/app/pages-instructor/instructor-course-edit-page/instructor-edit-panel/instructor-edit-panel.component.html", "diffHunk": "@@ -72,15 +72,17 @@\n         <input id=\"checkbox-display-instructor-{{ instructorIndex + 1 }}\" checked=\"\"\n                type=\"checkbox\" [ngModel]=\"instructor.isDisplayedToStudents\"\n                (ngModelChange)=\"triggerModelChange('isDisplayedToStudents', $event)\" [disabled]=\"!instructor.isEditing\">\n+        &nbsp;\n         <span ngbTooltip=\"If this is unselected, the instructor will be completely invisible to students. E.g. to give access to a colleague for \u2018auditing\u2019 your course\">Display to students as:</span>\n       </label>\n       <div class=\"col-sm-9\">\n         <input id=\"displayed-name-instructor-{{ instructorIndex + 1 }}\" class=\"form-control\"\n                type=\"text\"\n                (ngModelChange)=\"triggerModelChange('displayedToStudentsAs', $event)\"\n                [disabled]=\"!instructor.isDisplayedToStudents || !instructor.isEditing\"\n-               placeholder=\"E.g.Co-lecturer, Teaching Assistant\"\n-               [ngModel]=\"instructor.isDisplayedToStudents ? instructor.displayedToStudentsAs : '(This instructor will NOT be displayed to students)'\">\n+               [ngModel]=\"instructor.isDisplayedToStudents ? instructor.displayedToStudentsAs : '(This instructor will NOT be displayed to students)'\"\n+               [defaultValue]=\"'Instructor'\"", "originalCommit": "68c69a09593ec1d730ace997a8d41978e89be382", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY5ODY1OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462698659", "bodyText": "Wait sorry I think we shouldn't. If the user types something then backspaces the model will be empty. The model should get populated with the default value here in this scenario.", "author": "madanalogy", "createdAt": "2020-07-30T02:33:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY4Njk3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcyMjQzNw==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462722437", "bodyText": "I think there is no need to do this. Backend will populate the value to Instructor anyway so when you click save, the input box will be populated.", "author": "xpdavid", "createdAt": "2020-07-30T04:08:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY4Njk3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcyMjk4Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10497#discussion_r462722987", "bodyText": "That was the original intent yes but @wkurniawan07 raised a valid point that the frontend shouldn't make assumptions about what happens in the backend #10497 (comment)", "author": "madanalogy", "createdAt": "2020-07-30T04:10:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY4Njk3MQ=="}], "type": "inlineReview"}, {"oid": "21105381cd42994801676a0299c3982ffdfa4027", "url": "https://github.com/TEAMMATES/teammates/commit/21105381cd42994801676a0299c3982ffdfa4027", "message": "Set default value and update placeholder", "committedDate": "2020-07-30T02:36:08Z", "type": "commit"}, {"oid": "21105381cd42994801676a0299c3982ffdfa4027", "url": "https://github.com/TEAMMATES/teammates/commit/21105381cd42994801676a0299c3982ffdfa4027", "message": "Set default value and update placeholder", "committedDate": "2020-07-30T02:36:08Z", "type": "forcePushed"}, {"oid": "36e88e21ad239fde302849b546781e526fab44b1", "url": "https://github.com/TEAMMATES/teammates/commit/36e88e21ad239fde302849b546781e526fab44b1", "message": "Merge branch 'master' into 10441-10443-10444", "committedDate": "2020-07-30T02:53:36Z", "type": "commit"}]}