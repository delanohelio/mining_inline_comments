{"pr_number": 10312, "pr_title": "[#10299] Fix some issues from UAT round 3", "pr_createdAt": "2020-07-13T16:15:36Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10312", "timeline": [{"oid": "7039f9c70836a0369e524e89d423528cb7a59661", "url": "https://github.com/TEAMMATES/teammates/commit/7039f9c70836a0369e524e89d423528cb7a59661", "message": "Add mobile rubric submission form", "committedDate": "2020-07-14T01:35:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NTA2NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454765065", "bodyText": "Shouldn't we just remove this line?\n\n  \n    \n      teammates/src/web/app/pages-session/session-submission-page/session-submission-page.component.ts\n    \n    \n        Lines 147 to 150\n      in\n      5deb81a\n    \n    \n    \n    \n\n        \n          \n           if (this.previewAsPerson) { \n        \n\n        \n          \n             // disable submission in the preview mode \n        \n\n        \n          \n             this.isSubmissionFormsDisabled = true; \n        \n\n        \n          \n           }", "author": "xpdavid", "createdAt": "2020-07-15T03:15:10Z", "path": "src/web/app/pages-session/session-submission-page/session-submission-page.component.html", "diffHunk": "@@ -77,7 +77,7 @@ <h4>Previewing Session as\n <tm-question-submission-form *ngFor=\"let questionSubmissionForm of questionSubmissionForms; let i = index; trackBy: trackQuestionSubmissionFormByFn\"\n                              [attr.id]=\"questionSubmissionForm.feedbackQuestionId\"\n                              [(formModel)]=\"questionSubmissionForms[i]\" [formMode]=\"getQuestionSubmissionFormMode(questionSubmissionForm)\"\n-                             [isDisabled]=\"isSubmissionFormsDisabled\"\n+                             [isDisabled]=\"isSubmissionFormsDisabled && !this.previewAsPerson\"", "originalCommit": "a3ab8e3ce9caf5b1e43871b93cb0b7c437e57d26", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4NDAzMQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454784031", "bodyText": "Removing that will cause the \"Submit Feedback\" button to be enabled", "author": "wkurniawan07", "createdAt": "2020-07-15T04:29:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NTA2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4NTQzOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454785438", "bodyText": "Then I think we should update the [disabled] attribute in the submit button to be xx || this.previewAsPerson. The current looks weird as isSubmissionFormsDisabled is controlled by previewAsPerson while isDisabled also depends on previewAsPerson.", "author": "xpdavid", "createdAt": "2020-07-15T04:34:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NTA2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgwMDE4MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454800180", "bodyText": "@xpdavid the submit button also depends on isSubmissionFormsDisabled so in this case no alternative is better than the other", "author": "wkurniawan07", "createdAt": "2020-07-15T05:26:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NTA2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NjE4Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454766183", "bodyText": "We should have (click)=\"selectAnswer(i, j)\" here?", "author": "xpdavid", "createdAt": "2020-07-15T03:19:17Z", "path": "src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.html", "diffHunk": "@@ -10,9 +10,26 @@\n       <td *ngFor=\"let rubricDescriptionCell of rubricDescriptionRow; let j = index;\" class=\"text-secondary answer-cell\" (click)=\"selectAnswer(i, j)\">\n         <label>\n           <input type=\"radio\" [disabled]=\"isDisabled\"\n-                 [name]=\"id + i\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n+                 [name]=\"id + i + '-desktop'\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n         </label>\n       </td>\n     </tr>\n   </tbody>\n </table>\n+<div class=\"mobile-view\">\n+  <div class=\"card\" *ngFor=\"let rubricDescriptionRow of questionDetails.rubricDescriptions; let i = index;\">\n+    <div class=\"card-header bg-light\">\n+      {{ questionDetails.rubricSubQuestions[i] }}\n+    </div>\n+    <div class=\"card-body\"", "originalCommit": "7039f9c70836a0369e524e89d423528cb7a59661", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4Mzc5NA==", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454783794", "bodyText": "No. j is not defined at this block.", "author": "wkurniawan07", "createdAt": "2020-07-15T04:28:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NjE4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4NTc3Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454785773", "bodyText": "The problem is that the model only get updated after selectAnswer(i, j) is called.", "author": "xpdavid", "createdAt": "2020-07-15T04:35:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc2NjE4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4NTkwMQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10312#discussion_r454785901", "bodyText": "We should add (click)=\"selectAnswer(i, j)\" here.", "author": "xpdavid", "createdAt": "2020-07-15T04:36:12Z", "path": "src/web/app/components/question-types/question-edit-answer-form/rubric-question-edit-answer-form.component.html", "diffHunk": "@@ -10,9 +10,26 @@\n       <td *ngFor=\"let rubricDescriptionCell of rubricDescriptionRow; let j = index;\" class=\"text-secondary answer-cell\" (click)=\"selectAnswer(i, j)\">\n         <label>\n           <input type=\"radio\" [disabled]=\"isDisabled\"\n-                 [name]=\"id + i\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n+                 [name]=\"id + i + '-desktop'\" [checked]=\"i < responseDetails.answer.length && responseDetails.answer[i] === j\"/> {{ rubricDescriptionCell }}\n         </label>\n       </td>\n     </tr>\n   </tbody>\n </table>\n+<div class=\"mobile-view\">\n+  <div class=\"card\" *ngFor=\"let rubricDescriptionRow of questionDetails.rubricDescriptions; let i = index;\">\n+    <div class=\"card-header bg-light\">\n+      {{ questionDetails.rubricSubQuestions[i] }}\n+    </div>\n+    <div class=\"card-body\"\n+         [ngClass]=\"{ 'row-answered': i < responseDetails.answer.length && responseDetails.answer[i] !== RUBRIC_ANSWER_NOT_CHOSEN }\">\n+      <div *ngFor=\"let rubricDescriptionCell of rubricDescriptionRow; let j = index;\">\n+        <label>\n+          <input type=\"radio\" [disabled]=\"isDisabled\"", "originalCommit": "7039f9c70836a0369e524e89d423528cb7a59661", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "059e6afdf1abde15d5f02cf975b7278a613923cb", "url": "https://github.com/TEAMMATES/teammates/commit/059e6afdf1abde15d5f02cf975b7278a613923cb", "message": "Fix wrong redirect for registered user accessing public submission/result page", "committedDate": "2020-07-15T05:17:10Z", "type": "commit"}, {"oid": "9b18532b1711530ada1242b9333c4e80f63acdce", "url": "https://github.com/TEAMMATES/teammates/commit/9b18532b1711530ada1242b9333c4e80f63acdce", "message": "Do not disable submission forms during preview mode", "committedDate": "2020-07-15T05:17:10Z", "type": "commit"}, {"oid": "55549a2b034747359d1e231b951b43ffdf447db9", "url": "https://github.com/TEAMMATES/teammates/commit/55549a2b034747359d1e231b951b43ffdf447db9", "message": "Handle floating point division error for numscale question validation", "committedDate": "2020-07-15T05:17:10Z", "type": "commit"}, {"oid": "9ab03c846325fb928a038dc7dac53e7c77113108", "url": "https://github.com/TEAMMATES/teammates/commit/9ab03c846325fb928a038dc7dac53e7c77113108", "message": "Change min amount of MSQ selectable choices to 1", "committedDate": "2020-07-15T05:17:10Z", "type": "commit"}, {"oid": "cb40a14ee286988e6ac421a6e32bf899049800dd", "url": "https://github.com/TEAMMATES/teammates/commit/cb40a14ee286988e6ac421a6e32bf899049800dd", "message": "Fix instructor search page not working when not both checkboxes are ticked", "committedDate": "2020-07-15T05:17:10Z", "type": "commit"}, {"oid": "7864a8eb0ae4aacb063384c7aed35543c0c36915", "url": "https://github.com/TEAMMATES/teammates/commit/7864a8eb0ae4aacb063384c7aed35543c0c36915", "message": "Add timezone offset information for edit course page", "committedDate": "2020-07-15T05:17:10Z", "type": "commit"}, {"oid": "076313eb0c505e37a2556d157f5f5de2085ca4e6", "url": "https://github.com/TEAMMATES/teammates/commit/076313eb0c505e37a2556d157f5f5de2085ca4e6", "message": "Show all possible instructor roles only when editing", "committedDate": "2020-07-15T05:17:10Z", "type": "commit"}, {"oid": "03f6add516ffa735ba4d1890d8632259bd2ccc61", "url": "https://github.com/TEAMMATES/teammates/commit/03f6add516ffa735ba4d1890d8632259bd2ccc61", "message": "Add mobile rubric submission form", "committedDate": "2020-07-15T05:23:48Z", "type": "commit"}, {"oid": "03f6add516ffa735ba4d1890d8632259bd2ccc61", "url": "https://github.com/TEAMMATES/teammates/commit/03f6add516ffa735ba4d1890d8632259bd2ccc61", "message": "Add mobile rubric submission form", "committedDate": "2020-07-15T05:23:48Z", "type": "forcePushed"}]}