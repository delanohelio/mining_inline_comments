{"pr_number": 10129, "pr_title": "[#10109] Add all responses for student in records page", "pr_createdAt": "2020-05-28T08:29:28Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10129", "timeline": [{"oid": "9876f6864d992b7e8fb02f8cd207d5fccb1dbe79", "url": "https://github.com/TEAMMATES/teammates/commit/9876f6864d992b7e8fb02f8cd207d5fccb1dbe79", "message": "Initial implementation from #9798", "committedDate": "2020-05-28T08:26:13Z", "type": "commit"}, {"oid": "7d244c7746c9b92396c14ba5803ed93673b066da", "url": "https://github.com/TEAMMATES/teammates/commit/7d244c7746c9b92396c14ba5803ed93673b066da", "message": "Add additional grq-rgq-view", "committedDate": "2020-05-28T08:58:10Z", "type": "commit"}, {"oid": "cb4a3ee1b1ddc3a03729096eda82909611335e28", "url": "https://github.com/TEAMMATES/teammates/commit/cb4a3ee1b1ddc3a03729096eda82909611335e28", "message": "Add instructor comments", "committedDate": "2020-05-28T14:06:45Z", "type": "commit"}, {"oid": "02f77f019c6af642603c3e9f3aebcaea26d93ea3", "url": "https://github.com/TEAMMATES/teammates/commit/02f77f019c6af642603c3e9f3aebcaea26d93ea3", "message": "Revert to single question set", "committedDate": "2020-05-28T16:20:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjA5NzAyOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432097028", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            interface Session {\n          \n          \n            \n            interface SessionTab {", "author": "xpdavid", "createdAt": "2020-05-28T20:13:16Z", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.ts", "diffHunk": "@@ -1,14 +1,28 @@\n import { Component, OnInit } from '@angular/core';\n import { ActivatedRoute } from '@angular/router';\n import { environment } from '../../../environments/environment';\n+import { FeedbackSessionsService } from '../../../services/feedback-sessions.service';\n import { StatusMessageService } from '../../../services/status-message.service';\n import { StudentProfileService } from '../../../services/student-profile.service';\n-import { Gender, StudentProfile } from '../../../types/api-output';\n+import { StudentService } from '../../../services/student.service';\n+import {\n+  CommentOutput, FeedbackResponseComment,\n+  FeedbackSession,\n+  FeedbackSessions,\n+  Gender,\n+  QuestionOutput, ResponseOutput,\n+  SessionResults, Student,\n+  StudentProfile,\n+} from '../../../types/api-output';\n+import { Intent } from '../../../types/api-request';\n+import { CommentRowModel } from '../../components/comment-box/comment-row/comment-row.component';\n+import { CommentTableModel } from '../../components/comment-box/comment-table/comment-table.component';\n import { ErrorMessageOutput } from '../../error-message-output';\n \n interface Session {", "originalCommit": "02f77f019c6af642603c3e9f3aebcaea26d93ea3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjA5ODEyNQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432098125", "bodyText": "Let's give a better naming for this.sessions", "author": "xpdavid", "createdAt": "2020-05-28T20:15:29Z", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.ts", "diffHunk": "@@ -56,10 +75,103 @@ export class InstructorStudentRecordsPageComponent implements OnInit {\n    * Loads the student's records based on the given course ID and email.\n    */\n   loadStudentRecords(): void {\n+    this.studentService.getStudent(this.courseId, this.studentEmail).subscribe((resp: Student) => {\n+      this.studentSection = resp.sectionName;\n+    });\n     this.studentProfileService.getStudentProfile(this.studentEmail, this.courseId).subscribe((resp: StudentProfile) => {\n       this.studentProfile = resp;\n     }, (resp: ErrorMessageOutput) => {\n       this.statusMessageService.showErrorMessage(resp.error.message);\n     });\n   }\n+\n+  /**\n+   * Loads the student's feedback session results based on the given course ID and student name.\n+   */\n+  loadStudentResults(): void {\n+    this.feedbackSessionsService.getFeedbackSessionsForInstructor(this.courseId).subscribe((resp: FeedbackSessions) => {\n+      resp.feedbackSessions.forEach((feedbackSession: FeedbackSession) => {\n+        this.feedbackSessionsService.getFeedbackSessionsResult({\n+          courseId: this.courseId,\n+          feedbackSessionName: feedbackSession.feedbackSessionName,\n+          groupBySection: this.studentSection,\n+          intent: Intent.INSTRUCTOR_RESULT,\n+        }).subscribe((results: SessionResults) => {\n+          results.questions.forEach((q: QuestionOutput) => {\n+            q.allResponses = q.allResponses.filter((response: ResponseOutput) =>\n+                response.recipient === this.studentProfile.name ||\n+                response.giver === this.studentProfile.name);\n+          });\n+          const questions: QuestionOutput[] =\n+              results.questions.filter((q: QuestionOutput) => q.allResponses.length > 0);\n+          this.sessions.push({", "originalCommit": "02f77f019c6af642603c3e9f3aebcaea26d93ea3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjA5OTE5Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432099193", "bodyText": "Maybe you want to write a comment here?\nSessions in the same course will always have the same timezone?", "author": "xpdavid", "createdAt": "2020-05-28T20:17:35Z", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.ts", "diffHunk": "@@ -56,10 +75,103 @@ export class InstructorStudentRecordsPageComponent implements OnInit {\n    * Loads the student's records based on the given course ID and email.\n    */\n   loadStudentRecords(): void {\n+    this.studentService.getStudent(this.courseId, this.studentEmail).subscribe((resp: Student) => {\n+      this.studentSection = resp.sectionName;\n+    });\n     this.studentProfileService.getStudentProfile(this.studentEmail, this.courseId).subscribe((resp: StudentProfile) => {\n       this.studentProfile = resp;\n     }, (resp: ErrorMessageOutput) => {\n       this.statusMessageService.showErrorMessage(resp.error.message);\n     });\n   }\n+\n+  /**\n+   * Loads the student's feedback session results based on the given course ID and student name.\n+   */\n+  loadStudentResults(): void {\n+    this.feedbackSessionsService.getFeedbackSessionsForInstructor(this.courseId).subscribe((resp: FeedbackSessions) => {\n+      resp.feedbackSessions.forEach((feedbackSession: FeedbackSession) => {\n+        this.feedbackSessionsService.getFeedbackSessionsResult({\n+          courseId: this.courseId,\n+          feedbackSessionName: feedbackSession.feedbackSessionName,\n+          groupBySection: this.studentSection,\n+          intent: Intent.INSTRUCTOR_RESULT,\n+        }).subscribe((results: SessionResults) => {\n+          results.questions.forEach((q: QuestionOutput) => {\n+            q.allResponses = q.allResponses.filter((response: ResponseOutput) =>\n+                response.recipient === this.studentProfile.name ||\n+                response.giver === this.studentProfile.name);\n+          });\n+          const questions: QuestionOutput[] =\n+              results.questions.filter((q: QuestionOutput) => q.allResponses.length > 0);\n+          this.sessions.push({\n+            questions,\n+            feedbackSession,\n+            isCollapsed: questions.length === 0,\n+          });\n+          results.questions.forEach((qn: QuestionOutput) => this.preprocessComments(qn.allResponses));\n+        });\n+      });\n+    }, (errorMessageOutput: ErrorMessageOutput) => {\n+      this.statusMessageService.showErrorMessage(errorMessageOutput.error.message);\n+    });\n+  }\n+\n+  /**\n+   * Preprocesses the comments from instructor.\n+   *\n+   * <p>The instructor comment will be moved to map {@code instructorCommentTableModel}. The original\n+   * instructor comments associated with the response will be deleted.\n+   */\n+  preprocessComments(responses: ResponseOutput[]): void {\n+    responses.forEach((response: ResponseOutput) => {\n+      this.instructorCommentTableModel[response.responseId] =\n+          this.getCommentTableModel(response.instructorComments);\n+\n+      // clear the original comments for safe as instructorCommentTableModel will become the single point of truth\n+      response.instructorComments = [];\n+    });\n+  }\n+\n+  /**\n+   * Transforms instructor comments to a comment table model.\n+   */\n+  getCommentTableModel(comments: CommentOutput[]): CommentTableModel {\n+    return {\n+      commentRows: comments.map((comment: FeedbackResponseComment) => this.getCommentRowModel(comment)),\n+      newCommentRow: {\n+        commentEditFormModel: {\n+          commentText: '',\n+          isUsingCustomVisibilities: false,\n+          showCommentTo: [],\n+          showGiverNameTo: [],\n+        },\n+\n+        isEditing: false,\n+      },\n+      isAddingNewComment: false,\n+    };\n+  }\n+\n+  /**\n+   * Transforms a comment to a comment row model.\n+   */\n+  getCommentRowModel(comment: CommentOutput): CommentRowModel {\n+    return {\n+      originalComment: comment,\n+      timezone: this.sessions[0] != null ? this.sessions[0].feedbackSession.timeZone : '',", "originalCommit": "02f77f019c6af642603c3e9f3aebcaea26d93ea3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEwMDc3OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432100779", "bodyText": "Here you will know whether the student is giver or recipient.\nTry to separate them to two groups.", "author": "xpdavid", "createdAt": "2020-05-28T20:20:57Z", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.ts", "diffHunk": "@@ -56,10 +75,103 @@ export class InstructorStudentRecordsPageComponent implements OnInit {\n    * Loads the student's records based on the given course ID and email.\n    */\n   loadStudentRecords(): void {\n+    this.studentService.getStudent(this.courseId, this.studentEmail).subscribe((resp: Student) => {\n+      this.studentSection = resp.sectionName;\n+    });\n     this.studentProfileService.getStudentProfile(this.studentEmail, this.courseId).subscribe((resp: StudentProfile) => {\n       this.studentProfile = resp;\n     }, (resp: ErrorMessageOutput) => {\n       this.statusMessageService.showErrorMessage(resp.error.message);\n     });\n   }\n+\n+  /**\n+   * Loads the student's feedback session results based on the given course ID and student name.\n+   */\n+  loadStudentResults(): void {\n+    this.feedbackSessionsService.getFeedbackSessionsForInstructor(this.courseId).subscribe((resp: FeedbackSessions) => {\n+      resp.feedbackSessions.forEach((feedbackSession: FeedbackSession) => {\n+        this.feedbackSessionsService.getFeedbackSessionsResult({\n+          courseId: this.courseId,\n+          feedbackSessionName: feedbackSession.feedbackSessionName,\n+          groupBySection: this.studentSection,\n+          intent: Intent.INSTRUCTOR_RESULT,\n+        }).subscribe((results: SessionResults) => {\n+          results.questions.forEach((q: QuestionOutput) => {\n+            q.allResponses = q.allResponses.filter((response: ResponseOutput) =>", "originalCommit": "02f77f019c6af642603c3e9f3aebcaea26d93ea3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE5NTc0NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432195745", "bodyText": "I did try but I couldn't filter them properly so I reverted to single question set. I'll go back to the two groups and ask for help if I get stuck again :\")", "author": "madanalogy", "createdAt": "2020-05-29T00:32:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEwMDc3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE5NjE0Ng==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432196146", "bodyText": "You can just do make copy of results and filter them separately. In addition, please avoid name like q.", "author": "xpdavid", "createdAt": "2020-05-29T00:34:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEwMDc3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEwMTE3Mg==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432101172", "bodyText": "One responseGivenByStudents will goes to here with isGrq=true.", "author": "xpdavid", "createdAt": "2020-05-28T20:21:50Z", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.html", "diffHunk": "@@ -1,13 +1,20 @@\n <h1>{{studentProfile.name}}'s Records<small class=\"text-muted\"> - {{courseId}}</small></h1>\n <tm-student-profile [studentProfile]=\"studentProfile\" [photoUrl]=\"photoUrl\"></tm-student-profile>\n <tm-more-info [studentName]=\"studentProfile.name\" [moreInfoText]=\"studentProfile.moreInfo\"></tm-more-info>\n+<h2>Records in feedback sessions</h2>\n <div *ngFor=\"let session of sessions\" class=\"card card-default mb-4\">\n   <div class=\"card-header font-weight-bold cursor-pointer\" (click)=\"session.isCollapsed = !session.isCollapsed\">\n-    Feedback Session : {{session.name}}\n+    Feedback Session : {{session.feedbackSession.feedbackSessionName}}\n     <span class=\"float-right fas\"\n       [ngClass]=\"{'fa-chevron-up': !session.isCollapsed, 'fa-chevron-down': session.isCollapsed}\"></span>\n   </div>\n   <div class=\"card-body\" [ngbCollapse]=\"session.isCollapsed\">\n-    TODO\n+    <tm-grq-rgq-view-responses *ngIf=\"session.questions.length > 0\"", "originalCommit": "02f77f019c6af642603c3e9f3aebcaea26d93ea3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEwMTQzNA==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432101434", "bodyText": "One responseRecievedByStudents will goes to here with isGrq=flase.\nThe rest will work magically.", "author": "xpdavid", "createdAt": "2020-05-28T20:22:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEwMTE3Mg=="}], "type": "inlineReview"}, {"oid": "a62bfde2b5ba0d0bc061b32fbe92b23b707ceaf8", "url": "https://github.com/TEAMMATES/teammates/commit/a62bfde2b5ba0d0bc061b32fbe92b23b707ceaf8", "message": "Revert to double question set", "committedDate": "2020-05-29T02:59:16Z", "type": "commit"}, {"oid": "86801a02440d2ffc2056b412b3a10395df2f63d0", "url": "https://github.com/TEAMMATES/teammates/commit/86801a02440d2ffc2056b412b3a10395df2f63d0", "message": "Remove unnecessary initial filter", "committedDate": "2020-05-29T03:12:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIzNjc2OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432236768", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <div *ngIf=\"session.responsesGivenByStudent.length <= 0\">\n          \n          \n            \n                <div *ngIf=\"session.responsesGivenByStudent.length === 0\">", "author": "xpdavid", "createdAt": "2020-05-29T03:30:34Z", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.html", "diffHunk": "@@ -1,13 +1,28 @@\n <h1>{{studentProfile.name}}'s Records<small class=\"text-muted\"> - {{courseId}}</small></h1>\n <tm-student-profile [studentProfile]=\"studentProfile\" [photoUrl]=\"photoUrl\"></tm-student-profile>\n <tm-more-info [studentName]=\"studentProfile.name\" [moreInfoText]=\"studentProfile.moreInfo\"></tm-more-info>\n-<div *ngFor=\"let session of sessions\" class=\"card card-default mb-4\">\n+<h2>Records in feedback sessions</h2>\n+<div *ngFor=\"let session of sessionTabs\" class=\"card card-default mb-4\">\n   <div class=\"card-header font-weight-bold cursor-pointer\" (click)=\"session.isCollapsed = !session.isCollapsed\">\n-    Feedback Session : {{session.name}}\n+    Feedback Session : {{session.feedbackSession.feedbackSessionName}}\n     <span class=\"float-right fas\"\n       [ngClass]=\"{'fa-chevron-up': !session.isCollapsed, 'fa-chevron-down': session.isCollapsed}\"></span>\n   </div>\n   <div class=\"card-body\" [ngbCollapse]=\"session.isCollapsed\">\n-    TODO\n+    <tm-grq-rgq-view-responses *ngIf=\"session.responsesReceivedByStudent.length > 0\"\n+                               [responses]=\"session.responsesReceivedByStudent\" [groupByTeam]=\"false\" [section]=\"\" [sectionType]=\"\"\n+                               [isGrq]=\"false\" [instructorCommentTableModel]=\"instructorCommentTableModel\"\n+    ></tm-grq-rgq-view-responses>\n+    <div *ngIf=\"session.responsesReceivedByStudent.length <= 0\">\n+      No feedback responses for {{studentProfile.name}} ({{studentSection}}) in {{session.feedbackSession.feedbackSessionName}} found.\n+    </div>\n+    <br/>\n+    <tm-grq-rgq-view-responses *ngIf=\"session.responsesGivenByStudent.length > 0\"\n+                               [responses]=\"session.responsesGivenByStudent\" [groupByTeam]=\"false\" [section]=\"\" [sectionType]=\"\"\n+                               [isGrq]=\"true\" [instructorCommentTableModel]=\"instructorCommentTableModel\"\n+    ></tm-grq-rgq-view-responses>\n+    <div *ngIf=\"session.responsesGivenByStudent.length <= 0\">", "originalCommit": "86801a02440d2ffc2056b412b3a10395df2f63d0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIzNzI1OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432237259", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <div *ngIf=\"session.responsesReceivedByStudent.length <= 0\">\n          \n          \n            \n                <div *ngIf=\"session.responsesReceivedByStudent.length === 0\">", "author": "xpdavid", "createdAt": "2020-05-29T03:32:52Z", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.html", "diffHunk": "@@ -1,13 +1,28 @@\n <h1>{{studentProfile.name}}'s Records<small class=\"text-muted\"> - {{courseId}}</small></h1>\n <tm-student-profile [studentProfile]=\"studentProfile\" [photoUrl]=\"photoUrl\"></tm-student-profile>\n <tm-more-info [studentName]=\"studentProfile.name\" [moreInfoText]=\"studentProfile.moreInfo\"></tm-more-info>\n-<div *ngFor=\"let session of sessions\" class=\"card card-default mb-4\">\n+<h2>Records in feedback sessions</h2>\n+<div *ngFor=\"let session of sessionTabs\" class=\"card card-default mb-4\">\n   <div class=\"card-header font-weight-bold cursor-pointer\" (click)=\"session.isCollapsed = !session.isCollapsed\">\n-    Feedback Session : {{session.name}}\n+    Feedback Session : {{session.feedbackSession.feedbackSessionName}}\n     <span class=\"float-right fas\"\n       [ngClass]=\"{'fa-chevron-up': !session.isCollapsed, 'fa-chevron-down': session.isCollapsed}\"></span>\n   </div>\n   <div class=\"card-body\" [ngbCollapse]=\"session.isCollapsed\">\n-    TODO\n+    <tm-grq-rgq-view-responses *ngIf=\"session.responsesReceivedByStudent.length > 0\"\n+                               [responses]=\"session.responsesReceivedByStudent\" [groupByTeam]=\"false\" [section]=\"\" [sectionType]=\"\"\n+                               [isGrq]=\"false\" [instructorCommentTableModel]=\"instructorCommentTableModel\"\n+    ></tm-grq-rgq-view-responses>\n+    <div *ngIf=\"session.responsesReceivedByStudent.length <= 0\">", "originalCommit": "86801a02440d2ffc2056b412b3a10395df2f63d0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIzNzQyNQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432237425", "bodyText": "There is no need to mention this I think.", "author": "xpdavid", "createdAt": "2020-05-29T03:33:38Z", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.ts", "diffHunk": "@@ -56,10 +76,117 @@ export class InstructorStudentRecordsPageComponent implements OnInit {\n    * Loads the student's records based on the given course ID and email.\n    */\n   loadStudentRecords(): void {\n+    this.studentService.getStudent(this.courseId, this.studentEmail).subscribe((resp: Student) => {\n+      this.studentSection = resp.sectionName;\n+    });\n     this.studentProfileService.getStudentProfile(this.studentEmail, this.courseId).subscribe((resp: StudentProfile) => {\n       this.studentProfile = resp;\n     }, (resp: ErrorMessageOutput) => {\n       this.statusMessageService.showErrorMessage(resp.error.message);\n     });\n   }\n+\n+  /**\n+   * Loads the student's feedback session results based on the given course ID and student name.\n+   */\n+  loadStudentResults(): void {\n+    this.feedbackSessionsService.getFeedbackSessionsForInstructor(this.courseId).subscribe((resp: FeedbackSessions) => {\n+      resp.feedbackSessions.forEach((feedbackSession: FeedbackSession) => {\n+        this.feedbackSessionsService.getFeedbackSessionsResult({\n+          courseId: this.courseId,\n+          feedbackSessionName: feedbackSession.feedbackSessionName,\n+          groupBySection: this.studentSection,\n+          intent: Intent.INSTRUCTOR_RESULT,\n+        }).subscribe((results: SessionResults) => {\n+\n+          // Rather than subscribe to the Observable, we simply grab the input so that we can filter", "originalCommit": "86801a02440d2ffc2056b412b3a10395df2f63d0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIzODExNw==", "url": "https://github.com/TEAMMATES/teammates/pull/10129#discussion_r432238117", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      // Rather than subscribe to the Observable, we simply grab the input so that we can filter", "author": "madanalogy", "createdAt": "2020-05-29T03:37:16Z", "path": "src/web/app/pages-instructor/instructor-student-records-page/instructor-student-records-page.component.ts", "diffHunk": "@@ -56,10 +76,117 @@ export class InstructorStudentRecordsPageComponent implements OnInit {\n    * Loads the student's records based on the given course ID and email.\n    */\n   loadStudentRecords(): void {\n+    this.studentService.getStudent(this.courseId, this.studentEmail).subscribe((resp: Student) => {\n+      this.studentSection = resp.sectionName;\n+    });\n     this.studentProfileService.getStudentProfile(this.studentEmail, this.courseId).subscribe((resp: StudentProfile) => {\n       this.studentProfile = resp;\n     }, (resp: ErrorMessageOutput) => {\n       this.statusMessageService.showErrorMessage(resp.error.message);\n     });\n   }\n+\n+  /**\n+   * Loads the student's feedback session results based on the given course ID and student name.\n+   */\n+  loadStudentResults(): void {\n+    this.feedbackSessionsService.getFeedbackSessionsForInstructor(this.courseId).subscribe((resp: FeedbackSessions) => {\n+      resp.feedbackSessions.forEach((feedbackSession: FeedbackSession) => {\n+        this.feedbackSessionsService.getFeedbackSessionsResult({\n+          courseId: this.courseId,\n+          feedbackSessionName: feedbackSession.feedbackSessionName,\n+          groupBySection: this.studentSection,\n+          intent: Intent.INSTRUCTOR_RESULT,\n+        }).subscribe((results: SessionResults) => {\n+\n+          // Rather than subscribe to the Observable, we simply grab the input so that we can filter", "originalCommit": "86801a02440d2ffc2056b412b3a10395df2f63d0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5081948b80cae197996863d36c26b4e4b8266dec", "url": "https://github.com/TEAMMATES/teammates/commit/5081948b80cae197996863d36c26b4e4b8266dec", "message": "Apply suggestions from code review\n\nCo-authored-by: Xiao Pu <xp.xiaopu@gmail.com>", "committedDate": "2020-05-29T03:37:43Z", "type": "commit"}, {"oid": "bd1e75368ab2ad95e3ff7cefd045ffd560d5f97d", "url": "https://github.com/TEAMMATES/teammates/commit/bd1e75368ab2ad95e3ff7cefd045ffd560d5f97d", "message": "Merge branch 'master' into 10109", "committedDate": "2020-05-29T03:38:28Z", "type": "commit"}]}