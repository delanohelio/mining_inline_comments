{"pr_number": 10293, "pr_title": "[#9551] Standardize modals", "pr_createdAt": "2020-07-10T06:00:37Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10293", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0NDQ2MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r452744461", "bodyText": "What kind of \"more complicated use case\" do we have right now?", "author": "wkurniawan07", "createdAt": "2020-07-10T09:52:59Z", "path": "src/web/services/confirmation-modal.service.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+import { Injectable } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { ConfirmationModalType } from '../app/components/confirmation-modal/confirmation-modal-type';\n+import { ConfirmationModalComponent } from '../app/components/confirmation-modal/confirmation-modal.component';\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.", "originalCommit": "a83b654e971f57733ebc9baca7335599ad0b9b4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1MzYxOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453153618", "bodyText": "Modals like CopyQuestionsFromOtherSessionsModalComponent and TemplateQuestionModalComponent would be hard to fit into the standardized modal. i.e. modals that has non text only contents that involves callbacks and have local states.", "author": "ccyccyccy", "createdAt": "2020-07-11T04:25:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0NDQ2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1Mzk2OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453153969", "bodyText": "I think you can name the method as openSimpleModel.", "author": "xpdavid", "createdAt": "2020-07-11T04:30:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0NDQ2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1NTQxNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453155416", "bodyText": "I see, that's right. Our target here is for simple enough modals, e.g. those that require no action or \"yes/no\" type of action.", "author": "wkurniawan07", "createdAt": "2020-07-11T04:50:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0NDQ2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQyNTAyNw==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453425027", "bodyText": "I renamed confirmation-modal.service to simple-modal.service, and then have 2 different methods openConfirmationModal and openInformationModal for modals that requires confirmation or no action respectively.", "author": "ccyccyccy", "createdAt": "2020-07-13T04:12:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0NDQ2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1NDAwNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453154006", "bodyText": "Can we give string type for content?", "author": "xpdavid", "createdAt": "2020-07-11T04:30:46Z", "path": "src/web/services/confirmation-modal.service.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+import { Injectable } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { ConfirmationModalType } from '../app/components/confirmation-modal/confirmation-modal-type';\n+import { ConfirmationModalComponent } from '../app/components/confirmation-modal/confirmation-modal.component';\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class ConfirmationModalService {\n+\n+  constructor(private modalService: NgbModal) {\n+  }\n+\n+  /**\n+   * Opens a confirmation modal\n+   * @param header to be displayed on the modal\n+   * @param type which determines the look of the modal\n+   * @param content to be displayed in the body of the modal. content supports HTML tags\n+   * @param options See {@code ConfirmationModalOptions}\n+   */\n+  open(header: string, type: ConfirmationModalType, content: any, options?: ConfirmationModalOptions): NgbModalRef {", "originalCommit": "a83b654e971f57733ebc9baca7335599ad0b9b4b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1NDAxOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453154018", "bodyText": "Better to put definition on the top.", "author": "xpdavid", "createdAt": "2020-07-11T04:31:03Z", "path": "src/web/services/confirmation-modal.service.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+import { Injectable } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { ConfirmationModalType } from '../app/components/confirmation-modal/confirmation-modal-type';\n+import { ConfirmationModalComponent } from '../app/components/confirmation-modal/confirmation-modal.component';\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class ConfirmationModalService {\n+\n+  constructor(private modalService: NgbModal) {\n+  }\n+\n+  /**\n+   * Opens a confirmation modal\n+   * @param header to be displayed on the modal\n+   * @param type which determines the look of the modal\n+   * @param content to be displayed in the body of the modal. content supports HTML tags\n+   * @param options See {@code ConfirmationModalOptions}\n+   */\n+  open(header: string, type: ConfirmationModalType, content: any, options?: ConfirmationModalOptions): NgbModalRef {\n+    const modalRef: NgbModalRef = this.modalService.open(ConfirmationModalComponent);\n+    modalRef.componentInstance.header = header;\n+    modalRef.componentInstance.content = content;\n+    modalRef.componentInstance.type = type;\n+    if (options) {\n+      Object.entries(options).map(([key, value]: [string, string | boolean]) => {\n+        modalRef.componentInstance[key] = value;\n+      });\n+    }\n+    return modalRef;\n+  }\n+}\n+\n+/**\n+ * isNotificationOnly: true will cause modal to only have 1 button\n+ * confirmMessage: custom text message for confirm button\n+ * cancelMessage: custom text message for cancel button\n+ */\n+export interface ConfirmationModalOptions {", "originalCommit": "a83b654e971f57733ebc9baca7335599ad0b9b4b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1NDIzNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453154236", "bodyText": "The explanation for each field should be put along with field itself.", "author": "xpdavid", "createdAt": "2020-07-11T04:34:16Z", "path": "src/web/services/confirmation-modal.service.ts", "diffHunk": "@@ -0,0 +1,48 @@\n+import { Injectable } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { ConfirmationModalType } from '../app/components/confirmation-modal/confirmation-modal-type';\n+import { ConfirmationModalComponent } from '../app/components/confirmation-modal/confirmation-modal.component';\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class ConfirmationModalService {\n+\n+  constructor(private modalService: NgbModal) {\n+  }\n+\n+  /**\n+   * Opens a confirmation modal\n+   * @param header to be displayed on the modal\n+   * @param type which determines the look of the modal\n+   * @param content to be displayed in the body of the modal. content supports HTML tags\n+   * @param options See {@code ConfirmationModalOptions}\n+   */\n+  open(header: string, type: ConfirmationModalType, content: any, options?: ConfirmationModalOptions): NgbModalRef {\n+    const modalRef: NgbModalRef = this.modalService.open(ConfirmationModalComponent);\n+    modalRef.componentInstance.header = header;\n+    modalRef.componentInstance.content = content;\n+    modalRef.componentInstance.type = type;\n+    if (options) {\n+      Object.entries(options).map(([key, value]: [string, string | boolean]) => {\n+        modalRef.componentInstance[key] = value;\n+      });\n+    }\n+    return modalRef;\n+  }\n+}\n+\n+/**\n+ * isNotificationOnly: true will cause modal to only have 1 button\n+ * confirmMessage: custom text message for confirm button\n+ * cancelMessage: custom text message for cancel button", "originalCommit": "a83b654e971f57733ebc9baca7335599ad0b9b4b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE1NDI2NA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r453154264", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              constructor(private confirmationModalComponent: ConfirmationModalService,\n          \n          \n            \n              constructor(private confirmationModalService: ConfirmationModalService,", "author": "xpdavid", "createdAt": "2020-07-11T04:34:51Z", "path": "src/web/app/components/comment-box/comment-row/comment-row.component.ts", "diffHunk": "@@ -114,7 +116,8 @@ export class CommentRowComponent implements OnInit, OnChanges {\n \n   visibilityStateMachine: CommentVisibilityStateMachine;\n \n-  constructor(private modalService: NgbModal, private commentService: FeedbackResponseCommentService) {\n+  constructor(private confirmationModalComponent: ConfirmationModalService,", "originalCommit": "a83b654e971f57733ebc9baca7335599ad0b9b4b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "99027a56a1a9713d039eb55aa74581d86af03896", "url": "https://github.com/TEAMMATES/teammates/commit/99027a56a1a9713d039eb55aa74581d86af03896", "message": "Partial working port of old PR", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "d323d4918bb2bed2ae56a5cd26cdf356a01dbb25", "url": "https://github.com/TEAMMATES/teammates/commit/d323d4918bb2bed2ae56a5cd26cdf356a01dbb25", "message": "Add notification only modal", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "0152f9d85db6918b77c6c65c5e6a4f4a980cea57", "url": "https://github.com/TEAMMATES/teammates/commit/0152f9d85db6918b77c6c65c5e6a4f4a980cea57", "message": "Replace confirm-delete-comment-modal", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "8bc3c32f3a1e8aff26ce0f42bb6ddd1aec1108d5", "url": "https://github.com/TEAMMATES/teammates/commit/8bc3c32f3a1e8aff26ce0f42bb6ddd1aec1108d5", "message": "Add custom text options for modal", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "40003eca80a7f8fce01affe49b974a746b1cda3d", "url": "https://github.com/TEAMMATES/teammates/commit/40003eca80a7f8fce01affe49b974a746b1cda3d", "message": "Refactor modals for student-profile-page.component", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "2bc3942a95cd3f1d8fc6b66e79b5864b353ad609", "url": "https://github.com/TEAMMATES/teammates/commit/2bc3942a95cd3f1d8fc6b66e79b5864b353ad609", "message": "Refactor modals for contribution-question-edit-answer-form", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "446606286630ca5f1a87638c416704483ba045e6", "url": "https://github.com/TEAMMATES/teammates/commit/446606286630ca5f1a87638c416704483ba045e6", "message": "Refactor modals for contribution-question-statistics", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "8eee7e6506caee4323464ae12669b4c51e2d98f6", "url": "https://github.com/TEAMMATES/teammates/commit/8eee7e6506caee4323464ae12669b4c51e2d98f6", "message": "Refactor modals for more-info", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "e730cee635aade077163a331153d2f3905478474", "url": "https://github.com/TEAMMATES/teammates/commit/e730cee635aade077163a331153d2f3905478474", "message": "Rename service to simpleModal from confirmationModal, and fixes from review", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "015e2b483d8116c1b3ba438bb72ab497340889f1", "url": "https://github.com/TEAMMATES/teammates/commit/015e2b483d8116c1b3ba438bb72ab497340889f1", "message": "Refactor modals for instructor-course-enroll-page.component", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "0c8ec89978adc785aa7faa7697247c396bae0466", "url": "https://github.com/TEAMMATES/teammates/commit/0c8ec89978adc785aa7faa7697247c396bae0466", "message": "Refactor modals for instructor-course-student-edit-page.component\n\nDid not convert resendPastLinksModal as it have 3 buttons", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "566db956598fb7fdca73cfb117abdb30278b626f", "url": "https://github.com/TEAMMATES/teammates/commit/566db956598fb7fdca73cfb117abdb30278b626f", "message": "Refactor modals for instructor-help-questions-section.component", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "07e1f3f52297ce0ca9350a17a3e2ddc9616a5bc6", "url": "https://github.com/TEAMMATES/teammates/commit/07e1f3f52297ce0ca9350a17a3e2ddc9616a5bc6", "message": "Refactor modals for student-list.component", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "4aaf268c605360f78765ee3156dcc4fff3fd9d2e", "url": "https://github.com/TEAMMATES/teammates/commit/4aaf268c605360f78765ee3156dcc4fff3fd9d2e", "message": "Refactor modals for instructor-session-edit-page.component", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "92b7f9628800d5a7c3a6a60cfa4ed4a84f56df64", "url": "https://github.com/TEAMMATES/teammates/commit/92b7f9628800d5a7c3a6a60cfa4ed4a84f56df64", "message": "Refactor modals for instructor-courses-page.component", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "43cdcf511d0ecb8f3330cc04588d98183630c2b5", "url": "https://github.com/TEAMMATES/teammates/commit/43cdcf511d0ecb8f3330cc04588d98183630c2b5", "message": "Refactor modals for instructor-course-edit-page.component", "committedDate": "2020-07-14T05:36:12Z", "type": "commit"}, {"oid": "220a73e0b435dc99a2abb3c7163e2aa4e9b2084d", "url": "https://github.com/TEAMMATES/teammates/commit/220a73e0b435dc99a2abb3c7163e2aa4e9b2084d", "message": "Refactor modals for session-submission-page.component", "committedDate": "2020-07-14T06:12:18Z", "type": "commit"}, {"oid": "a571bfaca0da8f003d382bbfadf07f448fb624f3", "url": "https://github.com/TEAMMATES/teammates/commit/a571bfaca0da8f003d382bbfadf07f448fb624f3", "message": "Refactor modals for admin-search-page.component", "committedDate": "2020-07-14T06:43:44Z", "type": "commit"}, {"oid": "63c051ab0aee10d8c50aebbbf31cb89a151a8ba6", "url": "https://github.com/TEAMMATES/teammates/commit/63c051ab0aee10d8c50aebbbf31cb89a151a8ba6", "message": "Refactor modals for rubric-question-edit-details-form.component", "committedDate": "2020-07-14T06:58:25Z", "type": "commit"}, {"oid": "6d128f6c1fdcac37da330ed16cfafcc7f79dc71b", "url": "https://github.com/TEAMMATES/teammates/commit/6d128f6c1fdcac37da330ed16cfafcc7f79dc71b", "message": "Refactor modals for session-edit-form.component", "committedDate": "2020-07-14T07:06:27Z", "type": "commit"}, {"oid": "e4893380f355951ddf2ed25cfe245d8789d0be76", "url": "https://github.com/TEAMMATES/teammates/commit/e4893380f355951ddf2ed25cfe245d8789d0be76", "message": "Remove unused components and update snapshots", "committedDate": "2020-07-14T08:48:34Z", "type": "forcePushed"}, {"oid": "147f1a538c5ab755803c18e928e20d29a9960d34", "url": "https://github.com/TEAMMATES/teammates/commit/147f1a538c5ab755803c18e928e20d29a9960d34", "message": "Remove unused components and update snapshots", "committedDate": "2020-07-14T09:13:26Z", "type": "commit"}, {"oid": "147f1a538c5ab755803c18e928e20d29a9960d34", "url": "https://github.com/TEAMMATES/teammates/commit/147f1a538c5ab755803c18e928e20d29a9960d34", "message": "Remove unused components and update snapshots", "committedDate": "2020-07-14T09:13:26Z", "type": "forcePushed"}, {"oid": "3f528a10b65e9bbfd049bf134d89d0191afd129e", "url": "https://github.com/TEAMMATES/teammates/commit/3f528a10b65e9bbfd049bf134d89d0191afd129e", "message": "Fix bad commits", "committedDate": "2020-07-14T09:48:25Z", "type": "forcePushed"}, {"oid": "6f4435c72c344656e08d4a151f12d96cf9842cc8", "url": "https://github.com/TEAMMATES/teammates/commit/6f4435c72c344656e08d4a151f12d96cf9842cc8", "message": "Fix bad commits", "committedDate": "2020-07-14T09:55:15Z", "type": "commit"}, {"oid": "6f4435c72c344656e08d4a151f12d96cf9842cc8", "url": "https://github.com/TEAMMATES/teammates/commit/6f4435c72c344656e08d4a151f12d96cf9842cc8", "message": "Fix bad commits", "committedDate": "2020-07-14T09:55:15Z", "type": "forcePushed"}, {"oid": "29533a1b8dfc2b743c486f617127bcbc2e5628ee", "url": "https://github.com/TEAMMATES/teammates/commit/29533a1b8dfc2b743c486f617127bcbc2e5628ee", "message": "Add error catcher to .then calls", "committedDate": "2020-07-14T10:00:00Z", "type": "commit"}, {"oid": "be04d3eda31774721ba255933a6c1666feda8f4b", "url": "https://github.com/TEAMMATES/teammates/commit/be04d3eda31774721ba255933a6c1666feda8f4b", "message": "Reword confirmation modal headers to be questions, as well as bolding variables", "committedDate": "2020-07-15T07:01:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg1MjA0Ng==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r454852046", "bodyText": "We're putting too much of HTML here. If there is this large amount of HTML code necessary, should keep the HTML code inside the HTML file and pass by reference to TemplateRef.\nImplementation reference:\n\nhttps://github.com/TEAMMATES/teammates/blob/master/src/web/app/components/toast/toast.component.html\nhttps://github.com/TEAMMATES/teammates/blob/master/src/web/app/components/toast/toast.component.ts\nhttps://github.com/TEAMMATES/teammates/blob/master/src/web/app/components/toast/toast.ts\n\nUsage example:\n\n  \n    \n      teammates/src/web/app/pages-instructor/instructor-courses-page/add-course-form/add-course-form.component.html\n    \n    \n        Lines 47 to 52\n      in\n      1bbf28c\n    \n    \n    \n    \n\n        \n          \n           <ng-template #newCourseMessageTemplate> \n        \n\n        \n          \n             The course has been added. Click <a routerLink=\"/web/instructor/courses/enroll\" [queryParams]=\"{ courseid: course.courseId }\">here</a> \n        \n\n        \n          \n             to add students to the course or click <a routerLink=\"/web/instructor/courses/edit\" [queryParams]=\"{ courseid: course.courseId }\">here</a> \n        \n\n        \n          \n             to add other instructors.<br>If you don't see the course in the list below, \n        \n\n        \n          \n             please refresh the page after a few moments. \n        \n\n        \n          \n           </ng-template> \n        \n    \n  \n\n\n\n  \n    \n      teammates/src/web/app/pages-instructor/instructor-courses-page/add-course-form/add-course-form.component.ts\n    \n    \n         Line 21\n      in\n      1bbf28c\n    \n    \n    \n    \n\n        \n          \n           @ViewChild('newCourseMessageTemplate') newCourseMessageTemplate!: TemplateRef<any>; \n        \n    \n  \n\n\n\n  \n    \n      teammates/src/web/app/pages-instructor/instructor-courses-page/add-course-form/add-course-form.component.ts\n    \n    \n         Line 72\n      in\n      1bbf28c\n    \n    \n    \n    \n\n        \n          \n           this.statusMessageService.showSuccessToastTemplate(this.newCourseMessageTemplate);", "author": "wkurniawan07", "createdAt": "2020-07-15T07:36:15Z", "path": "src/web/app/pages-help/instructor-help-page/instructor-help-questions-section/instructor-help-questions-section.component.ts", "diffHunk": "@@ -127,17 +128,186 @@ export class InstructorHelpQuestionsSectionComponent extends InstructorHelpSecti\n \n   @Output() collapsePeerEvalTips: EventEmitter<any> = new EventEmitter();\n \n-  constructor(private modalService: NgbModal,\n+  constructor(private simpleModalService: SimpleModalService,\n               private pageScrollService: PageScrollService,\n               @Inject(DOCUMENT) private document: any) {\n     super();\n   }\n \n   /**\n-   * Opens modal window.\n+   * Opens modal for contribution info.\n    */\n-  openModal(modal: any): void {\n-    this.modalService.open(modal);\n+  openContribInfoModal(): void {\n+    const modalContent: string = `<div class=\"modal-body\">\n+      <ul>", "originalCommit": "be04d3eda31774721ba255933a6c1666feda8f4b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c4239e58bccaee2d22e6130ed60d8fc16ca51f8d", "url": "https://github.com/TEAMMATES/teammates/commit/c4239e58bccaee2d22e6130ed60d8fc16ca51f8d", "message": "Use TemplateRef for large HTML modals", "committedDate": "2020-07-15T12:47:49Z", "type": "commit"}, {"oid": "2e846040b996cb4bd944f620d508c16094108dd5", "url": "https://github.com/TEAMMATES/teammates/commit/2e846040b996cb4bd944f620d508c16094108dd5", "message": "Remove PRIMARY modal type as it is very similar to INFO", "committedDate": "2020-07-16T05:47:41Z", "type": "commit"}, {"oid": "2f2df73f328c937ed0695faf1a18e971c1b33c55", "url": "https://github.com/TEAMMATES/teammates/commit/2f2df73f328c937ed0695faf1a18e971c1b33c55", "message": "Merge branch 'master' into 9551-standardize-modal", "committedDate": "2020-07-16T06:32:36Z", "type": "commit"}, {"oid": "5ef8142e31e3621ec999576036ed4c21fc7bf4bf", "url": "https://github.com/TEAMMATES/teammates/commit/5ef8142e31e3621ec999576036ed4c21fc7bf4bf", "message": "e2e test fix", "committedDate": "2020-07-16T09:04:17Z", "type": "forcePushed"}, {"oid": "835c303d057ecc67522a1984d9f64beb522a06a6", "url": "https://github.com/TEAMMATES/teammates/commit/835c303d057ecc67522a1984d9f64beb522a06a6", "message": "e2e test fix", "committedDate": "2020-07-16T09:28:21Z", "type": "forcePushed"}, {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "url": "https://github.com/TEAMMATES/teammates/commit/e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "message": "e2e test fix", "committedDate": "2020-07-16T09:52:08Z", "type": "commit"}, {"oid": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "url": "https://github.com/TEAMMATES/teammates/commit/e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "message": "e2e test fix", "committedDate": "2020-07-16T09:52:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NTUxOQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456195519", "bodyText": "Possible to split this method into two? so waitForConfirmationModal() and clickOkOnModal()", "author": "t-cheepeng", "createdAt": "2020-07-17T03:18:00Z", "path": "src/e2e/java/teammates/e2e/pageobjects/AdminSearchPage.java", "diffHunk": "@@ -210,7 +204,7 @@ public void resetInstructorGoogleId(InstructorAttributes instructor) {\n         instructorRow.findElement(By.linkText(LINK_TEXT_RESET_GOOGLE_ID)).click();\n         waitForPageToLoad();\n \n-        resetGoogleIdModal.findElement(By.className(\"btn-warning\")).click();\n+        waitForConfirmationModalAndClickOk();", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwNjY3MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456206671", "bodyText": "What's the benefit of doing that? There's a waitForModalShown() already, and almost all modal actions are doable by waitForConfirmationModalAndClickOk and waitForConfirmationModalAndClickCancel() anyway.", "author": "ccyccyccy", "createdAt": "2020-07-17T04:06:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NTUxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIxMDEwMA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456210100", "bodyText": "Yeah, just thought we could be clearer by separating the steps up further. But agree that modal actions are simple enough so let's leave it", "author": "t-cheepeng", "createdAt": "2020-07-17T04:22:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NTUxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NjQ0Ng==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456196446", "bodyText": "\ud83d\udc4d", "author": "t-cheepeng", "createdAt": "2020-07-17T03:21:55Z", "path": "src/web/app/components/simple-modal/simple-modal.component.ts", "diffHunk": "@@ -0,0 +1,34 @@\n+import { Component, Input, OnInit, TemplateRef } from '@angular/core';\n+import { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from './simple-modal-type';\n+\n+/**\n+ * A component to display contents of confirmation modals.\n+ */\n+@Component({\n+  selector: 'tm-confirmation-modal',\n+  templateUrl: './simple-modal.component.html',\n+  styleUrls: ['./simple-modal.component.scss'],\n+})\n+export class SimpleModalComponent implements OnInit {", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NDM2OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456194369", "bodyText": "The header content should also vary", "author": "wkurniawan07", "createdAt": "2020-07-17T03:13:02Z", "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -268,12 +272,18 @@ export class QuestionEditFormComponent implements OnInit {\n   /**\n    * Handle event to discard changes users made.\n    */\n-  discardChangesHandler(modal: any): void {\n+  discardChangesHandler(isNewQuestion: boolean): void {\n     if (!this.model.isChanged) {\n       this.discardChanges();\n       return;\n     }\n-    this.modalService.open(modal).result.then(() => {\n+    const modalContent: string = isNewQuestion ?\n+        'Are you sure you want to delete this question?' :\n+        'Are you sure you want to discard your unsaved edits?';\n+\n+    const modalRef: NgbModalRef = this.simpleModalService\n+        .openConfirmationModal('Discard unsaved changes?', SimpleModalType.WARNING, modalContent);", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5NjczMA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456196730", "bodyText": "I think this is complicated (for the lack of other term) enough to be extracted out to template.", "author": "wkurniawan07", "createdAt": "2020-07-17T03:23:08Z", "path": "src/web/app/components/question-types/question-edit-answer-form/contribution-question-edit-answer-form.component.ts", "diffHunk": "@@ -44,10 +45,13 @@ export class ContributionQuestionEditAnswerFormComponent\n     return points;\n   }\n \n-  /**\n-   * Opens a modal.\n-   */\n-  openModal(modal: any): void {\n-    this.modalService.open(modal);\n+  openHelpModal(): void {\n+    const modalHeader: string = 'More info about the <code>Equal Share</code> scale';\n+    const modalContent: string = `\n+        <p><code>Equal share</code> is a relative measure of individual contribution to a team task.</p>\n+        <p>For example, in a 3-person team, <code>Equal share</code> means a third of the work done.</p>\n+        <p><code>Equal share + 10%</code> means the person did about 10% <em>more</em> than an equal share,\n+            <code>Equal share - 10%</code> means about 10% <em>less</em> than an equal share, and so on.</p>`;", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5Nzg3NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456197875", "bodyText": "This is creating an unnecessary diff now. Let's put this modal to the bottom of the HTML file, like how it was done before.", "author": "wkurniawan07", "createdAt": "2020-07-17T03:28:15Z", "path": "src/web/app/components/question-types/question-statistics/contribution-question-statistics/contribution-question-statistics.component.html", "diffHunk": "@@ -19,7 +19,55 @@\n             <span *ngIf=\"i !== 0\">,&nbsp;</span>\n             <tm-contribution [value]=\"other\"></tm-contribution>\n           </span>\n-          &nbsp;<a (click)=\"openModal(contribInfoModal)\" [routerLink]=\"\" queryParamsHandling=\"preserve\"><i class=\"fas fa-info-circle\"></i></a>\n+          &nbsp;<a (click)=\"openHelpModal()\" [routerLink]=\"\" queryParamsHandling=\"preserve\"><i class=\"fas fa-info-circle\"></i></a>\n+          <ng-template #contributionHelpModal>", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5ODE1Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456198153", "bodyText": "I can close one eye if it takes too much effort to undo, but all the changes in this file between the constructor definition and this line are unrelated?", "author": "wkurniawan07", "createdAt": "2020-07-17T03:29:28Z", "path": "src/web/app/components/question-types/question-statistics/contribution-question-statistics/contribution-question-statistics.component.ts", "diffHunk": "@@ -90,18 +111,17 @@ export class ContributionQuestionStatisticsComponent extends ContributionQuestio\n         {\n           customComponent: {\n             component: ContributionRatingsListComponent,\n-            componentData: { ratingsList: statistics.results[email].perceivedOthers },\n+            componentData: {\n+              ratingsList: statistics.results[email].perceivedOthers,\n+            },", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE5OTA2Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456199063", "bodyText": "This also should be kept as template.", "author": "wkurniawan07", "createdAt": "2020-07-17T03:33:06Z", "path": "src/web/app/pages-help/instructor-help-page/instructor-help-questions-section/instructor-help-questions-section.component.ts", "diffHunk": "@@ -126,18 +127,38 @@ export class InstructorHelpQuestionsSectionComponent extends InstructorHelpSecti\n   };\n \n   @Output() collapsePeerEvalTips: EventEmitter<any> = new EventEmitter();\n+  @ViewChild('contributionTemplateBody') contributionTemplateBody!: TemplateRef<any>;\n \n-  constructor(private modalService: NgbModal,\n+  constructor(private simpleModalService: SimpleModalService,\n               private pageScrollService: PageScrollService,\n               @Inject(DOCUMENT) private document: any) {\n     super();\n   }\n \n   /**\n-   * Opens modal window.\n+   * Opens modal for contribution info.\n    */\n-  openModal(modal: any): void {\n-    this.modalService.open(modal);\n+  openContribInfoModal(): void {\n+    this.simpleModalService.openInformationModal(\n+        'Team contribution calculation', SimpleModalType.NEUTRAL, this.contributionTemplateBody);\n+  }\n+\n+  /**\n+   * Opens modal for rank info.\n+   */\n+  openRankInfoModal(): void {\n+    const modalContent: string = `<ul>\n+      <li>\n+        <b>Ranks Received</b> is a list of the actual ranks each recipient received. TEAMMATES processes the original responses, handling ties and unused ranks.\n+        For example, if giver A's original response is <code>(1, 3, 3, 5)</code> and Rank 5 is given to recipient B, after the processing, giver A's response will become <code>(1, 2, 2, 4)</code> and recipient B will have a Rank 4 in his/her <b>Ranks Received</b>, instead of the Rank 5 in the original response by giver A.\n+      </li>\n+      <li>\n+        The <b>Overall Rank</b> ranks the average rank each recipient receives.\n+        For example, if recipient A received the ranks <code>(1, 2)</code> and recipient B received the ranks <code>(2, 4, 6)</code>, then recipient A and recipient B's average ranks are 1.5 and 4 respectively. By ranking these two averages, recipient A and B will get an <b>Overall Rank</b> of 1 and 2 respectively.\n+      </li>\n+    </ul>`;", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDE1Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456200157", "bodyText": "This is not the same as the previous implementation. You may want to check it again.", "author": "wkurniawan07", "createdAt": "2020-07-17T03:37:25Z", "path": "src/web/app/pages-instructor/student-profile/more-info/more-info.component.ts", "diffHunk": "@@ -14,16 +15,18 @@ export class MoreInfoComponent implements OnInit {\n   @Input() studentName: string = '';\n   @Input() moreInfoText: string = '';\n \n-  constructor(private ngbModal: NgbModal) { }\n+  constructor(private simpleModalService: SimpleModalService) { }\n \n   ngOnInit(): void {\n   }\n \n   /**\n    * Open the more info modal.\n    */\n-  openModal(content: any): void {\n-    this.ngbModal.open(content);\n+  openMoreInfoModal(): void {\n+    this.simpleModalService\n+        .openInformationModal(`<strong>${this.studentName}<strong>\\'s Profile - More Info`, SimpleModalType.NEUTRAL,\n+            this.moreInfoText, { confirmMessage: 'Close' });", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI0NTQ3Mg==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456245472", "bodyText": "Original:\n\nAfter this PR:\n\nLooks similar enough to me? The original simply wastes more space.", "author": "ccyccyccy", "createdAt": "2020-07-17T06:32:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDE1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI1NTUzNw==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456255537", "bodyText": "@ccyccyccy you should check when moreInfoText is empty", "author": "wkurniawan07", "createdAt": "2020-07-17T06:59:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDE1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI2MTkxNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456261916", "bodyText": "The option to open the modal shouldn't even show if moreInfoText is empty though.", "author": "ccyccyccy", "createdAt": "2020-07-17T07:15:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDE1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDU1NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456200555", "bodyText": "typo: parameters", "author": "wkurniawan07", "createdAt": "2020-07-17T03:39:12Z", "path": "src/web/services/simple-modal.service.ts", "diffHunk": "@@ -0,0 +1,68 @@\n+import { Injectable, TemplateRef } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from '../app/components/simple-modal/simple-modal-type';\n+import { SimpleModalComponent } from '../app/components/simple-modal/simple-modal.component';\n+\n+/**\n+ * Optional paramters for modal.", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDY1NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456200655", "bodyText": "... there is should be 2 buttons ...", "author": "wkurniawan07", "createdAt": "2020-07-17T03:39:37Z", "path": "src/web/services/simple-modal.service.ts", "diffHunk": "@@ -0,0 +1,68 @@\n+import { Injectable, TemplateRef } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from '../app/components/simple-modal/simple-modal-type';\n+import { SimpleModalComponent } from '../app/components/simple-modal/simple-modal.component';\n+\n+/**\n+ * Optional paramters for modal.\n+ */\n+export interface SimpleModalOptions {\n+  isInformationOnly?: boolean; // determines if there is 2 buttons for confirmation or only 1 button to close the modal", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIyMjY5MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456222690", "bodyText": "There's a type of modal that only have 1 button, where the modal simply displays information with no need for confirmation.", "author": "ccyccyccy", "createdAt": "2020-07-17T05:15:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDY1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI1NTMzOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456255338", "bodyText": "Yes, I am requesting to change the word \"is\" to \"should be\"", "author": "wkurniawan07", "createdAt": "2020-07-17T06:58:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDY1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMDc5Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456200797", "bodyText": "Can be private?", "author": "wkurniawan07", "createdAt": "2020-07-17T03:40:04Z", "path": "src/web/services/simple-modal.service.ts", "diffHunk": "@@ -0,0 +1,68 @@\n+import { Injectable, TemplateRef } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from '../app/components/simple-modal/simple-modal-type';\n+import { SimpleModalComponent } from '../app/components/simple-modal/simple-modal.component';\n+\n+/**\n+ * Optional paramters for modal.\n+ */\n+export interface SimpleModalOptions {\n+  isInformationOnly?: boolean; // determines if there is 2 buttons for confirmation or only 1 button to close the modal\n+  confirmMessage?: string; // custom text message for confirm button\n+  cancelMessage?: string; // custom text message for cancel button\n+}\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class SimpleModalService {\n+\n+  constructor(private modalService: NgbModal) {\n+  }\n+\n+  /**\n+   * Opens a confirmation modal\n+   * @param header to be displayed on the modal\n+   * @param type which determines the look of the modal\n+   * @param content to be displayed in the body of the modal. content supports HTML tags\n+   * @param options See {@code SimpleModalOptions}\n+   */\n+  open(header: string, type: SimpleModalType,", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwMTI0MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456201240", "bodyText": "We (or I, because I started it) did name it modalService before, but let's keep it close to the original name and call it ngbModal. Also because naming it modalService is too similar to this service's name.", "author": "wkurniawan07", "createdAt": "2020-07-17T03:41:59Z", "path": "src/web/services/simple-modal.service.ts", "diffHunk": "@@ -0,0 +1,68 @@\n+import { Injectable, TemplateRef } from '@angular/core';\n+import { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n+import { SimpleModalType } from '../app/components/simple-modal/simple-modal-type';\n+import { SimpleModalComponent } from '../app/components/simple-modal/simple-modal.component';\n+\n+/**\n+ * Optional paramters for modal.\n+ */\n+export interface SimpleModalOptions {\n+  isInformationOnly?: boolean; // determines if there is 2 buttons for confirmation or only 1 button to close the modal\n+  confirmMessage?: string; // custom text message for confirm button\n+  cancelMessage?: string; // custom text message for cancel button\n+}\n+\n+/**\n+ * Service to handle display of confirmation modals.\n+ * For more a complicated use case, use {@link NgbModal} directly.\n+ */\n+@Injectable({\n+  providedIn: 'root',\n+})\n+export class SimpleModalService {\n+\n+  constructor(private modalService: NgbModal) {", "originalCommit": "e89ce1f8573f8801f52e296c2dc889e2fa0829ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8a7d01c363b57d4e485d82f410f0c191714e430c", "url": "https://github.com/TEAMMATES/teammates/commit/8a7d01c363b57d4e485d82f410f0c191714e430c", "message": "Make modalContents a bit more detailed", "committedDate": "2020-07-17T05:28:03Z", "type": "commit"}, {"oid": "5afbfdb44aa4cde1020b66b53fd74004f69af3a0", "url": "https://github.com/TEAMMATES/teammates/commit/5afbfdb44aa4cde1020b66b53fd74004f69af3a0", "message": "Refactor complex html to TemplateRef", "committedDate": "2020-07-17T05:35:06Z", "type": "commit"}, {"oid": "d8f4f9c2ed26a444748a507c7dd344298fcbf1d9", "url": "https://github.com/TEAMMATES/teammates/commit/d8f4f9c2ed26a444748a507c7dd344298fcbf1d9", "message": "Refactor modals for instructor-course-detail-page.component", "committedDate": "2020-07-17T06:12:13Z", "type": "commit"}, {"oid": "20f7ceea2be5b548bee04937dc7c9cf2a00c633c", "url": "https://github.com/TEAMMATES/teammates/commit/20f7ceea2be5b548bee04937dc7c9cf2a00c633c", "message": "miscellaneous fixes from review", "committedDate": "2020-07-17T08:12:32Z", "type": "commit"}, {"oid": "12147dbfd3f7de9240c6f20106378efbb5436656", "url": "https://github.com/TEAMMATES/teammates/commit/12147dbfd3f7de9240c6f20106378efbb5436656", "message": "Rename all modalService to ngbModal", "committedDate": "2020-07-17T08:12:39Z", "type": "commit"}, {"oid": "12147dbfd3f7de9240c6f20106378efbb5436656", "url": "https://github.com/TEAMMATES/teammates/commit/12147dbfd3f7de9240c6f20106378efbb5436656", "message": "Rename all modalService to ngbModal", "committedDate": "2020-07-17T08:12:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMTc2NA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456831764", "bodyText": "Nitpicking, this can be in the previous line.", "author": "xpdavid", "createdAt": "2020-07-18T21:56:00Z", "path": "src/web/app/components/question-edit-form/question-edit-form.component.ts", "diffHunk": "@@ -290,13 +296,20 @@ export class QuestionEditFormComponent implements OnInit {\n   /**\n    * Saves the question.\n    */\n-  saveQuestionHandler(modal: any): void {\n+  saveQuestionHandler(): void {\n     if (this.formMode === QuestionEditFormMode.EDIT) {\n       // alert user that editing question may result in deletion of responses\n       if (!this.model.isQuestionHasResponses || !this.model.isChanged) {\n         this.saveExistingQuestionEvent.emit();\n       } else {\n-        this.modalService.open(modal).result.then(() => {\n+        const modalContent: string = `\n+            <p>Editing fields affecting responders' answers may result in <b>all existing responses for this question to be deleted.</b></p>\n+            <p>Are you sure you want to continue?</p>\n+        `;\n+        const modalRef: NgbModalRef = this.simpleModalService\n+            .openConfirmationModal('Save the question?',\n+                SimpleModalType.DANGER, modalContent);", "originalCommit": "12147dbfd3f7de9240c6f20106378efbb5436656", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMjEwNQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456832105", "bodyText": "You can make equalShareHelp as a argument here so you don't need to declare @ViewChild('equalShareHelp')", "author": "xpdavid", "createdAt": "2020-07-18T22:00:53Z", "path": "src/web/app/components/question-types/question-edit-answer-form/contribution-question-edit-answer-form.component.ts", "diffHunk": "@@ -44,10 +47,8 @@ export class ContributionQuestionEditAnswerFormComponent\n     return points;\n   }\n \n-  /**\n-   * Opens a modal.\n-   */\n-  openModal(modal: any): void {\n-    this.modalService.open(modal);\n+  openHelpModal(): void {", "originalCommit": "12147dbfd3f7de9240c6f20106378efbb5436656", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMjE0MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456832141", "bodyText": "Same here.", "author": "xpdavid", "createdAt": "2020-07-18T22:01:23Z", "path": "src/web/app/components/question-types/question-statistics/contribution-question-statistics/contribution-question-statistics.component.html", "diffHunk": "@@ -60,57 +60,51 @@\n     </div>\n   </div>\n </div>\n-\n-<ng-template #contribInfoModal let-modal>\n-  <div class=\"modal-header\">\n-    <h4 class=\"modal-title\">More info about contribution questions</h4>\n-  </div>\n-  <div class=\"modal-body\">\n-    <h4>How do I interpret these results?</h4>\n-    <ul>\n-      <li>\n-        Compare the values given in 'My view' with those under 'Team's view'.\n-        This tells you whether your perception matches what the team thinks, particularly regarding your own contribution.\n-        You may ignore minor differences.\n-      </li>\n-      <li>\n-        From the estimates you submit, we try to deduce the answer to this question:\n-        In your opinion, if your teammates are doing the project by themselves without you,\n-        how do they compare against each other in terms of contribution?\n-        We want to deduce your unbiased opinion about your team members' contributions.\n-      </li>\n-    </ul>\n-    <h4>How are contribution question results used in grading?</h4>\n-    <ul>\n-      <li>\n-        TEAMMATES does not calculate grades. Instructors are free to choose how they use contribution question results.\n-      </li>\n-      <li>\n-        TEAMMATES recommends that contribution question results be used only as flags to identify teams with contribution imbalances.\n-        Once identified, the instructor is recommended to investigate further before taking action.\n-      </li>\n-    </ul>\n-    <h4>How are the scores for contribution questions calculated?</h4>\n-    <p>\n-      Here are the important things to note about\n-      <a href=\"/web/front/help/instructor#team-contribution-questions\" rel=\"noopener noreferrer\" target=\"_blank\">how contribution scores are calculated</a>:\n-    </p>\n-    <ul>\n-      <li>\n-        The contribution value you attribute to yourself is not used to calculate the team's view of your contribution.\n-        That means you cannot boost your perceived contribution by claiming a high contribution for yourself\n-        or attributing a low contribution to team members.\n-      </li>\n-      <li>\n-        We adjust the estimates you submitted to remove artificial inflation/deflation.\n-        For example, giving everyone <code>[Equal share + 20%]</code> is as same as giving everyone\n-        <code>[Equal share]</code> because in both cases all members have done a similar share of work.\n-      </li>\n-      <li>\n-        The sum of values in the team's view has been scaled to equal the sum of values in your view.\n-        That way, you can make a direct comparison between your view and the team's view.\n-        As this scaling is specific to you, the values you see in team's view may not match the values your team members see in their results.\n-      </li>\n-    </ul>\n-  </div>\n+<ng-template #contributionHelpModal>", "originalCommit": "12147dbfd3f7de9240c6f20106378efbb5436656", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjgzMjQ2MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10293#discussion_r456832460", "bodyText": "And in multiple cases", "author": "xpdavid", "createdAt": "2020-07-18T22:05:44Z", "path": "src/web/app/pages-help/instructor-help-page/instructor-help-questions-section/instructor-help-questions-section.component.ts", "diffHunk": "@@ -126,18 +127,29 @@ export class InstructorHelpQuestionsSectionComponent extends InstructorHelpSecti\n   };\n \n   @Output() collapsePeerEvalTips: EventEmitter<any> = new EventEmitter();\n+  @ViewChild('contributionTemplateBody') contributionTemplateBody!: TemplateRef<any>;", "originalCommit": "12147dbfd3f7de9240c6f20106378efbb5436656", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f80231648c43a8d476c5b4ef4b2f76b0c7d6b05f", "url": "https://github.com/TEAMMATES/teammates/commit/f80231648c43a8d476c5b4ef4b2f76b0c7d6b05f", "message": "Merge branch 'master' into 9551-standardize-modal", "committedDate": "2020-07-20T03:31:35Z", "type": "commit"}, {"oid": "e804e925b0cdf1172d66aaf857ae6c638767d246", "url": "https://github.com/TEAMMATES/teammates/commit/e804e925b0cdf1172d66aaf857ae6c638767d246", "message": "Convert template to be passed in as argument instead of using ViewChild", "committedDate": "2020-07-20T03:58:20Z", "type": "commit"}, {"oid": "7d6e532132b50972f29b4491f1df18d269077d67", "url": "https://github.com/TEAMMATES/teammates/commit/7d6e532132b50972f29b4491f1df18d269077d67", "message": "Merge branch 'master' into 9551-standardize-modal", "committedDate": "2020-07-20T07:14:33Z", "type": "commit"}, {"oid": "26d3b78f349b489d355544a950b452f5783933ba", "url": "https://github.com/TEAMMATES/teammates/commit/26d3b78f349b489d355544a950b452f5783933ba", "message": "Merge branch 'master' into 9551-standardize-modal", "committedDate": "2020-07-20T13:29:40Z", "type": "commit"}]}