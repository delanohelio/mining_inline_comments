{"pr_number": 10229, "pr_title": "[#10219] Add instructor/participant comment in CSV", "pr_createdAt": "2020-06-24T07:25:54Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10229", "timeline": [{"oid": "bada2c7b1b132e36ecd443c98694743dcf2baa1c", "url": "https://github.com/TEAMMATES/teammates/commit/bada2c7b1b132e36ecd443c98694743dcf2baa1c", "message": "Add check for if someone can comment on response", "committedDate": "2020-06-23T10:19:51Z", "type": "commit"}, {"oid": "8b85ac729dab08c67645749da798c6e565b7fd31", "url": "https://github.com/TEAMMATES/teammates/commit/8b85ac729dab08c67645749da798c6e565b7fd31", "message": "Add in comment header and content to csv", "committedDate": "2020-06-23T10:20:30Z", "type": "commit"}, {"oid": "5b724ba3c1e875832cf6cdefb514efff24f26918", "url": "https://github.com/TEAMMATES/teammates/commit/5b724ba3c1e875832cf6cdefb514efff24f26918", "message": "Update snapshots", "committedDate": "2020-06-24T04:56:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxMTg0Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10229#discussion_r444711847", "bodyText": "\ud83d\udc4d", "author": "xpdavid", "createdAt": "2020-06-24T07:55:39Z", "path": "src/web/services/session-result-csv.service.ts", "diffHunk": "@@ -97,11 +97,25 @@ export class SessionResultCsvService {\n     const header: string[] = ['Team', \"Giver's Full Name\", \"Giver's Last Name\", \"Giver's Email\", \"Recipient's Team\",\n       \"Recipient's Full Name\", \"Recipient's Last Name\", \"Recipient's Email\",\n       ...this.getQuestionSpecificHeaders(question.feedbackQuestion)];\n-    csvRows.push(header);\n \n-    // TODO add participant comment header\n+    const isParticipantCommentsOnResponsesAllowed: boolean =\n+        this.getIsParticipantCommentsOnResponsesAllowed(question.feedbackQuestion);\n+    if (isParticipantCommentsOnResponsesAllowed) {\n+      header.push(\"Giver's Comments\");\n+    }\n+\n+    const isInstructorCommentsOnResponsesAllowed: boolean =\n+        this.getIsInstructorCommentsOnResponsesAllowed(question.feedbackQuestion);\n+    if (isInstructorCommentsOnResponsesAllowed) {\n+      const maxNumOfInstructorComments: number = question.allResponses\n+          .map((response: ResponseOutput) => response.instructorComments.length)\n+          .reduce((prev: number, cur: number) => Math.max(prev, cur), 0);", "originalCommit": "5b724ba3c1e875832cf6cdefb514efff24f26918", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcxMzQ1Mg==", "url": "https://github.com/TEAMMATES/teammates/pull/10229#discussion_r444713452", "bodyText": "Should be true for MSQ also", "author": "xpdavid", "createdAt": "2020-06-24T07:58:19Z", "path": "src/web/types/question-details-impl/feedback-msq-question-details.impl.ts", "diffHunk": "@@ -57,4 +57,11 @@ export class FeedbackMsqQuestionDetailsImpl extends AbstractFeedbackMcqMsqQuesti\n     return statsRows;\n   }\n \n+  isParticipantCommentsOnResponsesAllowed(): boolean {\n+    return false;", "originalCommit": "5b724ba3c1e875832cf6cdefb514efff24f26918", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "65e2bc6476a9cb0e1404d8748035e4be4469a729", "url": "https://github.com/TEAMMATES/teammates/commit/65e2bc6476a9cb0e1404d8748035e4be4469a729", "message": "Change msq question to allow participant comments", "committedDate": "2020-06-24T08:21:35Z", "type": "commit"}, {"oid": "adc496e666415af53403a18dfde9c493732f4868", "url": "https://github.com/TEAMMATES/teammates/commit/adc496e666415af53403a18dfde9c493732f4868", "message": "Update snapshots for msq", "committedDate": "2020-06-24T08:30:09Z", "type": "commit"}]}