{"pr_number": 10363, "pr_title": "[#10335] Instructor course details page: add initial sorting to student table", "pr_createdAt": "2020-07-20T01:39:18Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10363", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzAzNDMzOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10363#discussion_r457034338", "bodyText": "We should not change the content of @Input() property. You should create a new variable instead.", "author": "xpdavid", "createdAt": "2020-07-20T04:19:56Z", "path": "src/web/app/components/student-list/student-list.component.ts", "diffHunk": "@@ -64,6 +65,12 @@ export class StudentListComponent implements OnInit {\n   ngOnInit(): void {\n   }\n \n+  ngAfterContentChecked(): void {", "originalCommit": "4157d9312c103a33d78607492669b4977a60493e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzgwNjAzNQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10363#discussion_r457806035", "bodyText": "Actually, have you consider the solution where we sort the student in the places where the component is being used?", "author": "xpdavid", "createdAt": "2020-07-21T02:55:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzAzNDMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzgxMzg1Ng==", "url": "https://github.com/TEAMMATES/teammates/pull/10363#discussion_r457813856", "bodyText": "Yes I have thought about that, but that would mean taking the sortBy function out to different places and that would result in code duplication? Not sure what would be the best way to do so.", "author": "niqiukun", "createdAt": "2020-07-21T03:25:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzAzNDMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzgxNTA1MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10363#discussion_r457815050", "bodyText": "Personally, I would prefer to change the single point of truth. I don't think it will result in considerable duplication.", "author": "xpdavid", "createdAt": "2020-07-21T03:31:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzAzNDMzOA=="}], "type": "inlineReview"}, {"oid": "7d2905f13f448bcd1cc028aaa4445ccc42014742", "url": "https://github.com/TEAMMATES/teammates/commit/7d2905f13f448bcd1cc028aaa4445ccc42014742", "message": "Add initial sorting to student table", "committedDate": "2020-07-20T15:54:58Z", "type": "commit"}, {"oid": "36350425deeda3e6a0274c49728fc708f293a084", "url": "https://github.com/TEAMMATES/teammates/commit/36350425deeda3e6a0274c49728fc708f293a084", "message": "Update snapshot", "committedDate": "2020-07-20T15:57:02Z", "type": "commit"}, {"oid": "d94834d7672ac31aef3a1a5765d5e7fd4cc0dd30", "url": "https://github.com/TEAMMATES/teammates/commit/d94834d7672ac31aef3a1a5765d5e7fd4cc0dd30", "message": "Update snapshot of instructor course details page", "committedDate": "2020-07-20T15:57:03Z", "type": "commit"}, {"oid": "e64a0dade8108ce8f0ced9920ff4193646a85422", "url": "https://github.com/TEAMMATES/teammates/commit/e64a0dade8108ce8f0ced9920ff4193646a85422", "message": "Update snapshot of instructor search page", "committedDate": "2020-07-20T15:57:03Z", "type": "commit"}, {"oid": "6f1d2d9e95cb2a774d3e3d43f8c8c5518c0ec706", "url": "https://github.com/TEAMMATES/teammates/commit/6f1d2d9e95cb2a774d3e3d43f8c8c5518c0ec706", "message": "Copy students array from input property", "committedDate": "2020-07-20T15:58:22Z", "type": "commit"}, {"oid": "6f1d2d9e95cb2a774d3e3d43f8c8c5518c0ec706", "url": "https://github.com/TEAMMATES/teammates/commit/6f1d2d9e95cb2a774d3e3d43f8c8c5518c0ec706", "message": "Copy students array from input property", "committedDate": "2020-07-20T15:58:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzgwNTIyNA==", "url": "https://github.com/TEAMMATES/teammates/pull/10363#discussion_r457805224", "bodyText": "I don't think this is the perfect way to do chain sorting (as the order is actually reverse order). @madanalogy I remember you have worked on the chain sorting before?", "author": "xpdavid", "createdAt": "2020-07-21T02:52:28Z", "path": "src/web/app/components/student-list/student-list.component.ts", "diffHunk": "@@ -66,6 +68,17 @@ export class StudentListComponent implements OnInit {\n   ngOnInit(): void {\n   }\n \n+  ngAfterContentChecked(): void {\n+    this.sortedStudents = [...this.students];\n+    if (this.tableSortBy === SortBy.NONE) {\n+      this.sortedStudents.sort(this.sortBy(SortBy.STUDENT_NAME))", "originalCommit": "6f1d2d9e95cb2a774d3e3d43f8c8c5518c0ec706", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzgyNTg1MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10363#discussion_r457825851", "bodyText": "Yeap in #10235, you can chain them with the || operator, e.g:\n\n  \n    \n      teammates/src/web/app/components/question-responses/per-question-view-responses/per-question-view-responses.component.ts\n    \n    \n        Lines 117 to 123\n      in\n      f4c7e6d\n    \n    \n    \n    \n\n        \n          \n           // Default order: giver team > giver name > recipient team > recipient name \n        \n\n        \n          \n           return ((a: ResponseOutput, b: ResponseOutput): number => { \n        \n\n        \n          \n             return this.tableComparatorService.compare(SortBy.GIVER_TEAM, order, a.giverTeam, b.giverTeam) \n        \n\n        \n          \n                 || this.tableComparatorService.compare(SortBy.GIVER_NAME, order, a.giver, b.giver) \n        \n\n        \n          \n                 || this.tableComparatorService.compare(SortBy.RECIPIENT_TEAM, order, a.recipientTeam, b.recipientTeam) \n        \n\n        \n          \n                 || this.tableComparatorService.compare(SortBy.RECIPIENT_NAME, order, a.recipient, b.recipient); \n        \n\n        \n          \n           });", "author": "madanalogy", "createdAt": "2020-07-21T04:15:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzgwNTIyNA=="}], "type": "inlineReview"}, {"oid": "f3158ea2ce22df9b454d8a58e0b2069953b050d2", "url": "https://github.com/TEAMMATES/teammates/commit/f3158ea2ce22df9b454d8a58e0b2069953b050d2", "message": "Move sorting to instructor student list page", "committedDate": "2020-07-21T03:56:05Z", "type": "commit"}, {"oid": "9ce51dc47e0c2c67aef378119459db34849254bf", "url": "https://github.com/TEAMMATES/teammates/commit/9ce51dc47e0c2c67aef378119459db34849254bf", "message": "Add default sort order to sortby function", "committedDate": "2020-07-21T04:53:48Z", "type": "commit"}, {"oid": "81b931b62d1e170e99a59b94be40f5f0c35ddba3", "url": "https://github.com/TEAMMATES/teammates/commit/81b931b62d1e170e99a59b94be40f5f0c35ddba3", "message": "Retry test", "committedDate": "2020-07-21T05:32:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxODA1Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10363#discussion_r458518057", "bodyText": "This is the thing I want to do long time ago \ud83d\udc4d", "author": "xpdavid", "createdAt": "2020-07-22T03:52:03Z", "path": "src/web/app/components/student-list/student-list.component.ts", "diffHunk": "@@ -136,50 +127,7 @@ export class StudentListComponent implements OnInit {\n   /**\n    * Sorts the student list\n    */\n-  sortStudentListEvent(by: SortBy): void {", "originalCommit": "81b931b62d1e170e99a59b94be40f5f0c35ddba3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "16ad7f187b0105ea009964a9b135edd289f16e6d", "url": "https://github.com/TEAMMATES/teammates/commit/16ad7f187b0105ea009964a9b135edd289f16e6d", "message": "Merge branch 'master' into course-details-student-sort", "committedDate": "2020-07-22T03:55:02Z", "type": "commit"}]}