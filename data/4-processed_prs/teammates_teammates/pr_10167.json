{"pr_number": 10167, "pr_title": "[#10164] Result Page: InstructorSessionResultSectionType.GIVER still shows recipient name", "pr_createdAt": "2020-06-05T06:49:02Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10167", "timeline": [{"oid": "69a259119ee9c84f5fa4c7713991cc6cb1c5cd38", "url": "https://github.com/TEAMMATES/teammates/commit/69a259119ee9c84f5fa4c7713991cc6cb1c5cd38", "message": "Hide recipient names in grq-rgq result view", "committedDate": "2020-06-05T04:51:20Z", "type": "commit"}, {"oid": "5e4697026d3460bf1a540c4e1d51cb89ceec1406", "url": "https://github.com/TEAMMATES/teammates/commit/5e4697026d3460bf1a540c4e1d51cb89ceec1406", "message": "Hide recipient names in gqr-rqg result view", "committedDate": "2020-06-05T06:35:18Z", "type": "commit"}, {"oid": "e555e81e0d001f918c8f111a93b4508f7809aa20", "url": "https://github.com/TEAMMATES/teammates/commit/e555e81e0d001f918c8f111a93b4508f7809aa20", "message": "Merge branch 'master' into 10164-section-show-recipient", "committedDate": "2020-06-08T06:29:56Z", "type": "commit"}, {"oid": "36841da53f5eaf6829fe9d29331b1a91d3fd6f4a", "url": "https://github.com/TEAMMATES/teammates/commit/36841da53f5eaf6829fe9d29331b1a91d3fd6f4a", "message": "Change to filter for teamsToUsers and userExpanded", "committedDate": "2020-06-08T07:56:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3ODc0NA==", "url": "https://github.com/TEAMMATES/teammates/pull/10167#discussion_r436978744", "bodyText": "Have you considered put the same shouldDisplayBasedOnSection check in L89?", "author": "xpdavid", "createdAt": "2020-06-08T20:24:58Z", "path": "src/web/app/components/question-responses/gqr-rqg-view-responses/gqr-rqg-view-responses.component.ts", "diffHunk": "@@ -142,6 +142,12 @@ export class GqrRqgViewResponsesComponent extends InstructorResponsesViewBase im\n             .isFeedbackResponsesDisplayedOnSection(response, this.section, this.sectionType);\n \n           if (!shouldDisplayBasedOnSection) {\n+            const team: string = this.isGqr ? response.giverTeam : response.recipientTeam;", "originalCommit": "36841da53f5eaf6829fe9d29331b1a91d3fd6f4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f4027be69f96483aac4ed351a4815061afb57ba5", "url": "https://github.com/TEAMMATES/teammates/commit/f4027be69f96483aac4ed351a4815061afb57ba5", "message": "Add check to filter users at an earlier stage", "committedDate": "2020-06-09T03:26:57Z", "type": "commit"}, {"oid": "4a29216619807ec37c530032df8e9da35c2ebff1", "url": "https://github.com/TEAMMATES/teammates/commit/4a29216619807ec37c530032df8e9da35c2ebff1", "message": "Merge branch 'master' into 10164-section-show-recipient", "committedDate": "2020-06-09T03:27:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzE0ODUyNA==", "url": "https://github.com/TEAMMATES/teammates/pull/10167#discussion_r437148524", "bodyText": "Try to use guard clause?\nconst shouldDisplayBasedOnSection = xx\n\nif (!shouldDisplayBasedOnSection) {\n    continue;\n}", "author": "xpdavid", "createdAt": "2020-06-09T05:37:58Z", "path": "src/web/app/components/question-responses/gqr-rqg-view-responses/gqr-rqg-view-responses.component.ts", "diffHunk": "@@ -92,33 +92,39 @@ export class GqrRqgViewResponsesComponent extends InstructorResponsesViewBase im\n         if (response.recipientEmail) {\n           this.userToEmail[response.recipient] = response.recipientEmail;\n         }\n-        if (this.isGqr) {\n-          this.teamsToUsers[response.giverTeam] = this.teamsToUsers[response.giverTeam] || [];\n-          if (this.teamsToUsers[response.giverTeam].indexOf(response.giver) === -1) {\n-            this.teamsToUsers[response.giverTeam].push(response.giver);\n-            this.teamExpanded[response.giverTeam] = this.isExpandAll;\n-          }\n-          if (response.relatedGiverEmail) {\n-            this.userToRelatedEmail[response.giver] = response.relatedGiverEmail;\n-          }\n-          this.userExpanded[response.giver] = this.isExpandAll;\n-        } else {\n-          if (!response.recipientTeam) {\n-            // Recipient is team\n-            this.teamsToUsers[response.recipient] = this.teamsToUsers[response.recipient] || [];\n-            if (this.teamsToUsers[response.recipient].indexOf(response.recipient) === -1) {\n-              this.teamsToUsers[response.recipient].push(response.recipient);\n-              this.teamExpanded[response.recipient] = this.isExpandAll;\n+\n+        const shouldDisplayBasedOnSection: boolean = this.feedbackResponsesService\n+            .isFeedbackResponsesDisplayedOnSection(response, this.section, this.sectionType);\n+        if (shouldDisplayBasedOnSection) {", "originalCommit": "4a29216619807ec37c530032df8e9da35c2ebff1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b8e023b0beaca818681b60dcc0a4089d81c758bb", "url": "https://github.com/TEAMMATES/teammates/commit/b8e023b0beaca818681b60dcc0a4089d81c758bb", "message": "Switch to use guard clause", "committedDate": "2020-06-09T05:49:59Z", "type": "commit"}]}