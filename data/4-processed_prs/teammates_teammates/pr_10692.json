{"pr_number": 10692, "pr_title": "[#10655] Instructor enroll students: incorrect intermediate state shown while loading page", "pr_createdAt": "2020-09-05T17:00:11Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10692", "timeline": [{"oid": "abfdb5613247c3bf222ca7fd7cd4c593bab642e2", "url": "https://github.com/TEAMMATES/teammates/commit/abfdb5613247c3bf222ca7fd7cd4c593bab642e2", "message": "Add loading description with retry button during load", "committedDate": "2020-08-30T16:48:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY3NTI2OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10692#discussion_r484675268", "bodyText": "I think the more serious problem here is that you should not use tm-loading-retry to show the loading message.", "author": "xpdavid", "createdAt": "2020-09-08T06:19:17Z", "path": "src/web/app/pages-instructor/instructor-course-enroll-page/instructor-course-enroll-page.component.html", "diffHunk": "@@ -1,4 +1,5 @@\n-<tm-loading-retry [shouldShowRetry]=\"!coursePresent\" [message]=\"'Failed to load course'\" (retryEvent)=\"getCourseEnrollPageData(courseId)\">\n+<tm-loading-retry [shouldShowRetry]=\"isLoading\" [message]=\"'Loading course...'\" (retryEvent)=\"getCourseEnrollPageData(courseId)\">", "originalCommit": "abfdb5613247c3bf222ca7fd7cd4c593bab642e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4NTQ3Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10692#discussion_r484685473", "bodyText": "Thanks David, sorry initially I was coming from the angle that we wanted to keep the retry button while loading", "author": "helloImHai", "createdAt": "2020-09-08T06:44:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY3NTI2OA=="}], "type": "inlineReview"}, {"oid": "dacaf9e7a63fa38fa6127bb0d95851ea96e52fc8", "url": "https://github.com/TEAMMATES/teammates/commit/dacaf9e7a63fa38fa6127bb0d95851ea96e52fc8", "message": "Add loading spinner when course page is loading", "committedDate": "2020-09-08T06:39:41Z", "type": "commit"}, {"oid": "7667999f4333e58ec4c6bfc655d53ceba9c86047", "url": "https://github.com/TEAMMATES/teammates/commit/7667999f4333e58ec4c6bfc655d53ceba9c86047", "message": "Edit code for minimal changes", "committedDate": "2020-09-08T06:54:05Z", "type": "commit"}, {"oid": "6bb51822f33809f30faaca88c878fc53e5e8e0ea", "url": "https://github.com/TEAMMATES/teammates/commit/6bb51822f33809f30faaca88c878fc53e5e8e0ea", "message": "Remove redundant div", "committedDate": "2020-09-08T06:58:29Z", "type": "commit"}, {"oid": "986a5b5fa19c8d8288f573aa32cbdb312c5a07bd", "url": "https://github.com/TEAMMATES/teammates/commit/986a5b5fa19c8d8288f573aa32cbdb312c5a07bd", "message": "Remove trailing whitespace", "committedDate": "2020-09-08T07:41:49Z", "type": "commit"}, {"oid": "671865611ab2b345b25c97d3b137b01c24f8409b", "url": "https://github.com/TEAMMATES/teammates/commit/671865611ab2b345b25c97d3b137b01c24f8409b", "message": "Empty commit", "committedDate": "2020-09-08T12:49:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE1MTQwMw==", "url": "https://github.com/TEAMMATES/teammates/pull/10692#discussion_r485151403", "bodyText": "I think there is no need to mark it as optional. It can be false at the begining", "author": "xpdavid", "createdAt": "2020-09-08T19:36:29Z", "path": "src/web/app/pages-instructor/instructor-course-enroll-page/instructor-course-enroll-page.component.ts", "diffHunk": "@@ -37,6 +37,7 @@ export class InstructorCourseEnrollPageComponent implements OnInit {\n   EnrollStatus: typeof EnrollStatus = EnrollStatus;\n   courseId: string = '';\n   coursePresent?: boolean;\n+  isLoading?: boolean;", "originalCommit": "671865611ab2b345b25c97d3b137b01c24f8409b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE1MzQxMw==", "url": "https://github.com/TEAMMATES/teammates/pull/10692#discussion_r485153413", "bodyText": "The statement can go to the complete callback (the third argument of .subscribe function) to reduce the redundancy in both success and error case .", "author": "xpdavid", "createdAt": "2020-09-08T19:40:24Z", "path": "src/web/app/pages-instructor/instructor-course-enroll-page/instructor-course-enroll-page.component.ts", "diffHunk": "@@ -356,8 +357,10 @@ export class InstructorCourseEnrollPageComponent implements OnInit {\n   getCourseEnrollPageData(courseid: string): void {\n     this.existingStudents = [];\n     this.hasLoadingStudentsFailed = false;\n+    this.isLoading = true;\n     this.courseService.hasResponsesForCourse(courseid).subscribe((resp: HasResponses) => {\n       this.coursePresent = true;\n+      this.isLoading = false;", "originalCommit": "671865611ab2b345b25c97d3b137b01c24f8409b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTMzODkyMA==", "url": "https://github.com/TEAMMATES/teammates/pull/10692#discussion_r485338920", "bodyText": "Thank you, will do that", "author": "helloImHai", "createdAt": "2020-09-09T05:00:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE1MzQxMw=="}], "type": "inlineReview"}, {"oid": "fca2ad686d04715459e72b8a826b377b7db52835", "url": "https://github.com/TEAMMATES/teammates/commit/fca2ad686d04715459e72b8a826b377b7db52835", "message": "More descriptive variable names and make use of complete callback", "committedDate": "2020-09-09T05:06:19Z", "type": "commit"}, {"oid": "8ed7939002befd158182bbeca07805aebddfb738", "url": "https://github.com/TEAMMATES/teammates/commit/8ed7939002befd158182bbeca07805aebddfb738", "message": "Merge branch 'master' into 10655-loading-state", "committedDate": "2020-09-19T15:40:49Z", "type": "commit"}]}