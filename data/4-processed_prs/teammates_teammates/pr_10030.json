{"pr_number": 10030, "pr_title": "[#10015] Add \"Sort By\" in Student-Course-Details-Page", "pr_createdAt": "2020-05-02T16:19:04Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10030", "timeline": [{"oid": "2badd7415d5d38f31483d366b9457eb5ec60c1da", "url": "https://github.com/TEAMMATES/teammates/commit/2badd7415d5d38f31483d366b9457eb5ec60c1da", "message": "[#9996] Fix pop-up message in Student List page", "committedDate": "2020-03-25T18:16:46Z", "type": "commit"}, {"oid": "707acedf4a32f8c607aac645e49939ed0b4fa7ae", "url": "https://github.com/TEAMMATES/teammates/commit/707acedf4a32f8c607aac645e49939ed0b4fa7ae", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates", "committedDate": "2020-03-29T13:25:30Z", "type": "commit"}, {"oid": "746db7f65f9ecb0ec03af11ff91af59488e15121", "url": "https://github.com/TEAMMATES/teammates/commit/746db7f65f9ecb0ec03af11ff91af59488e15121", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates", "committedDate": "2020-03-31T18:21:09Z", "type": "commit"}, {"oid": "8762dc04091c8c02d4c582e5d460dde0a149b5e6", "url": "https://github.com/TEAMMATES/teammates/commit/8762dc04091c8c02d4c582e5d460dde0a149b5e6", "message": "Merge branch 'master' into master", "committedDate": "2020-04-01T11:18:53Z", "type": "commit"}, {"oid": "19c7bbc8b1f39772cd4aefc14f06871eb212bc6d", "url": "https://github.com/TEAMMATES/teammates/commit/19c7bbc8b1f39772cd4aefc14f06871eb212bc6d", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates", "committedDate": "2020-04-01T11:21:47Z", "type": "commit"}, {"oid": "d1f8fe3d190c64fa2e19d8b599a09df8b0f30503", "url": "https://github.com/TEAMMATES/teammates/commit/d1f8fe3d190c64fa2e19d8b599a09df8b0f30503", "message": "Update student list component snapshots", "committedDate": "2020-04-02T18:45:40Z", "type": "commit"}, {"oid": "e5091ca2d7267b84f9a0980db5f47fca2d3f85de", "url": "https://github.com/TEAMMATES/teammates/commit/e5091ca2d7267b84f9a0980db5f47fca2d3f85de", "message": "Merge branch 'master' of https://github.com/AdamPanag/teammates", "committedDate": "2020-04-02T22:27:36Z", "type": "commit"}, {"oid": "6cee5520a9183350c60cf7f0743850ed624a6a67", "url": "https://github.com/TEAMMATES/teammates/commit/6cee5520a9183350c60cf7f0743850ed624a6a67", "message": "Merge branch 'master' into master", "committedDate": "2020-04-05T04:55:49Z", "type": "commit"}, {"oid": "7664e3098f3a5139f22eda9da61bc058ffd4b5fe", "url": "https://github.com/TEAMMATES/teammates/commit/7664e3098f3a5139f22eda9da61bc058ffd4b5fe", "message": "Merge branch 'master' into master", "committedDate": "2020-04-05T08:19:29Z", "type": "commit"}, {"oid": "5895467627369917ce43621be87fcee3bea8838f", "url": "https://github.com/TEAMMATES/teammates/commit/5895467627369917ce43621be87fcee3bea8838f", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates", "committedDate": "2020-04-05T12:42:12Z", "type": "commit"}, {"oid": "dd87e74e1c0689c9a9b9d31488e107929d8939d5", "url": "https://github.com/TEAMMATES/teammates/commit/dd87e74e1c0689c9a9b9d31488e107929d8939d5", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates", "committedDate": "2020-04-20T11:20:52Z", "type": "commit"}, {"oid": "d18244ae3eab5d507054f3f29502e57c1f6e1b83", "url": "https://github.com/TEAMMATES/teammates/commit/d18244ae3eab5d507054f3f29502e57c1f6e1b83", "message": "Merge branch 'master' of https://github.com/AdamPanag/teammates", "committedDate": "2020-04-20T13:37:28Z", "type": "commit"}, {"oid": "fc25630cf5157540fbbcbc1b4bee9a29ceb3fcfd", "url": "https://github.com/TEAMMATES/teammates/commit/fc25630cf5157540fbbcbc1b4bee9a29ceb3fcfd", "message": "Merge branch 'master' TEAMMATES/teammates into AdamPanag/teammates", "committedDate": "2020-04-23T13:04:30Z", "type": "commit"}, {"oid": "4498a2a565bbbccc4117bc91a4d2c78e9bd2bb92", "url": "https://github.com/TEAMMATES/teammates/commit/4498a2a565bbbccc4117bc91a4d2c78e9bd2bb92", "message": "Merge branch 'master' into AdamPanag/teammates", "committedDate": "2020-04-28T18:07:30Z", "type": "commit"}, {"oid": "4594185cd07400904e63c4ab5e7c64bae1863071", "url": "https://github.com/TEAMMATES/teammates/commit/4594185cd07400904e63c4ab5e7c64bae1863071", "message": "Add search bar & sort by options", "committedDate": "2020-05-02T15:14:15Z", "type": "commit"}, {"oid": "89601c9463a499ed46c29c8c6a3c08bb42b75387", "url": "https://github.com/TEAMMATES/teammates/commit/89601c9463a499ed46c29c8c6a3c08bb42b75387", "message": "Add  STUDENT_GENDER, INTSTITUTION & NATINALITY options", "committedDate": "2020-05-02T15:17:40Z", "type": "commit"}, {"oid": "18acc90dee2ecb4bab59db2ac1ef6c55820bc22c", "url": "https://github.com/TEAMMATES/teammates/commit/18acc90dee2ecb4bab59db2ac1ef6c55820bc22c", "message": "Add sorting functionality & snapshots", "committedDate": "2020-05-02T15:32:18Z", "type": "commit"}, {"oid": "b8147a280f9e21b51252e99c656e008b1e11dc45", "url": "https://github.com/TEAMMATES/teammates/commit/b8147a280f9e21b51252e99c656e008b1e11dc45", "message": "Add snapshots", "committedDate": "2020-05-06T19:14:15Z", "type": "commit"}, {"oid": "54e78f0d919170bfd1bc8418537c9bebea42183c", "url": "https://github.com/TEAMMATES/teammates/commit/54e78f0d919170bfd1bc8418537c9bebea42183c", "message": "Remove search from HTML", "committedDate": "2020-05-06T19:15:51Z", "type": "commit"}, {"oid": "a0abca54855c9f5708a70a04ff1714f3e91c0436", "url": "https://github.com/TEAMMATES/teammates/commit/a0abca54855c9f5708a70a04ff1714f3e91c0436", "message": "Fix lint errors", "committedDate": "2020-05-06T19:17:02Z", "type": "commit"}, {"oid": "08c407b7062ae02180effd369d4d968625cafe44", "url": "https://github.com/TEAMMATES/teammates/commit/08c407b7062ae02180effd369d4d968625cafe44", "message": "Merge branch 'master' into AdamPanag/teammates", "committedDate": "2020-05-06T19:44:24Z", "type": "commit"}, {"oid": "a4409b60e3b1c1dfb3db1a99647061b010cca214", "url": "https://github.com/TEAMMATES/teammates/commit/a4409b60e3b1c1dfb3db1a99647061b010cca214", "message": "Remove extra space from 'Sort By body' & add snapshots", "committedDate": "2020-05-07T17:44:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMDA5MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10030#discussion_r422220091", "bodyText": "Was this indentation really necessary?", "author": "madanalogy", "createdAt": "2020-05-08T15:49:09Z", "path": "src/web/app/pages-student/student-course-details-page/student-course-details-page.component.ts", "diffHunk": "@@ -99,35 +108,37 @@ export class StudentCourseDetailsPageComponent implements OnInit {\n    * @param teamName: team of current student\n    */\n   loadTeammates(courseId: string, teamName: string): void {\n+    this.teammateProfiles = [];\n     this.studentService.getStudentsFromCourseAndTeam(courseId, teamName)\n-        .subscribe((students: Students) => {\n-          students.students.forEach((student: Student) => {\n-            // filter away current user\n-            if (student.email === this.student.email) {\n-              return;\n-            }\n-\n-            this.studentProfileService.getStudentProfile(student.email, courseId)\n-                  .subscribe((studentProfile: StudentProfile) => {\n-                    const newPhotoUrl: string =\n-                      `${environment.backendUrl}/webapi/student/profilePic`\n-                      + `?courseid=${courseId}&studentemail=${student.email}`;\n-\n-                    const newTeammateProfile: StudentProfileWithPicture = {\n-                      studentProfile: {\n-                        ...studentProfile,\n-                        email: student.email,\n-                        shortName: student.name,\n-                      },\n-                      photoUrl : newPhotoUrl,\n-                    };\n-\n-                    this.teammateProfiles.push(newTeammateProfile);\n-                  });\n-          });\n-        }, (resp: ErrorMessageOutput) => {\n-          this.statusMessageService.showErrorMessage(resp.error.message);\n+      .subscribe((students: Students) => {\n+        students.students.forEach((student: Student) => {\n+          // filter away current user\n+          if (student.email === this.student.email) {\n+            return;\n+          }\n+\n+          this.studentProfileService.getStudentProfile(student.email, courseId)\n+                .subscribe((studentProfile: StudentProfile) => {\n+                  const newPhotoUrl: string =\n+                    `${environment.backendUrl}/webapi/student/profilePic`\n+                    + `?courseid=${courseId}&studentemail=${student.email}`;\n+\n+                  const newTeammateProfile: StudentProfileWithPicture = {\n+                    studentProfile: {\n+                      ...studentProfile,\n+                      email: student.email,\n+                      shortName: student.name,\n+                    },\n+                    photoUrl : newPhotoUrl,\n+                  };\n+\n+                  this.teammateProfiles.push(newTeammateProfile);\n+                });", "originalCommit": "a4409b60e3b1c1dfb3db1a99647061b010cca214", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzOTIyNw==", "url": "https://github.com/TEAMMATES/teammates/pull/10030#discussion_r422239227", "bodyText": "I think that lines 121 to 136 could be positioned 2 spaces back! However, I am not the author of this method, I have just added a few lines of code in order to sort teammatesProfiles[]", "author": "AdamPanag", "createdAt": "2020-05-08T16:26:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMDA5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMTM2Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10030#discussion_r422221367", "bodyText": "Could consider renaming by with sortOption for clarity, along with the rest of its uses in this file", "author": "madanalogy", "createdAt": "2020-05-08T15:51:27Z", "path": "src/web/app/pages-student/student-course-details-page/student-course-details-page.component.ts", "diffHunk": "@@ -149,4 +160,62 @@ export class StudentCourseDetailsPageComponent implements OnInit {\n   setDefaultPic(teammateProfile: StudentProfileWithPicture): void {\n     teammateProfile.photoUrl = '/assets/images/profile_picture_default.png';\n   }\n+\n+  /**\n+   * Checks the option selected to sort teammates.\n+   * @param by: option for sorting", "originalCommit": "a4409b60e3b1c1dfb3db1a99647061b010cca214", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzNjU3OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10030#discussion_r422236579", "bodyText": "Of course, thank you for the comment!", "author": "AdamPanag", "createdAt": "2020-05-08T16:20:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMTM2Nw=="}], "type": "inlineReview"}, {"oid": "82a9a795627f732a3fe28a0535edf7119420900d", "url": "https://github.com/TEAMMATES/teammates/commit/82a9a795627f732a3fe28a0535edf7119420900d", "message": "Rename parameter 'by' to 'sortOption'", "committedDate": "2020-05-08T19:35:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcxMTI5Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/10030#discussion_r427711293", "bodyText": "I think this is the wrong place to add the sort method if you want the page to be sorted when it is loaded. However, to make it work, it will be a little bit complicated.\nI accept the solution that we can just set teammateProfilesSortBy to SortBy.None and don't sort it when the page is loaded (i.e. remove this line).\nLet me know if you want to take challenge to make it sorted when the page is loaded.", "author": "xpdavid", "createdAt": "2020-05-20T02:46:51Z", "path": "src/web/app/pages-student/student-course-details-page/student-course-details-page.component.ts", "diffHunk": "@@ -99,35 +108,37 @@ export class StudentCourseDetailsPageComponent implements OnInit {\n    * @param teamName: team of current student\n    */\n   loadTeammates(courseId: string, teamName: string): void {\n+    this.teammateProfiles = [];\n     this.studentService.getStudentsFromCourseAndTeam(courseId, teamName)\n-        .subscribe((students: Students) => {\n-          students.students.forEach((student: Student) => {\n-            // filter away current user\n-            if (student.email === this.student.email) {\n-              return;\n-            }\n-\n-            this.studentProfileService.getStudentProfile(student.email, courseId)\n-                  .subscribe((studentProfile: StudentProfile) => {\n-                    const newPhotoUrl: string =\n-                      `${environment.backendUrl}/webapi/student/profilePic`\n-                      + `?courseid=${courseId}&studentemail=${student.email}`;\n-\n-                    const newTeammateProfile: StudentProfileWithPicture = {\n-                      studentProfile: {\n-                        ...studentProfile,\n-                        email: student.email,\n-                        shortName: student.name,\n-                      },\n-                      photoUrl : newPhotoUrl,\n-                    };\n-\n-                    this.teammateProfiles.push(newTeammateProfile);\n-                  });\n-          });\n-        }, (resp: ErrorMessageOutput) => {\n-          this.statusMessageService.showErrorMessage(resp.error.message);\n+      .subscribe((students: Students) => {\n+        students.students.forEach((student: Student) => {\n+          // filter away current user\n+          if (student.email === this.student.email) {\n+            return;\n+          }\n+\n+          this.studentProfileService.getStudentProfile(student.email, courseId)\n+                .subscribe((studentProfile: StudentProfile) => {\n+                  const newPhotoUrl: string =\n+                    `${environment.backendUrl}/webapi/student/profilePic`\n+                    + `?courseid=${courseId}&studentemail=${student.email}`;\n+\n+                  const newTeammateProfile: StudentProfileWithPicture = {\n+                    studentProfile: {\n+                      ...studentProfile,\n+                      email: student.email,\n+                      shortName: student.name,\n+                    },\n+                    photoUrl : newPhotoUrl,\n+                  };\n+\n+                  this.teammateProfiles.push(newTeammateProfile);\n+                });\n         });\n+        this.sortTeammatesBy(this.teammateProfilesSortBy);", "originalCommit": "82a9a795627f732a3fe28a0535edf7119420900d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ0OTE5OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10030#discussion_r429449199", "bodyText": "@xpdavid Thank you for the review! Unfortunately,  I don't have the time to devote and make it sorted, with the right way, when the page is loaded. So, I will set it to SortBy.None soon.", "author": "AdamPanag", "createdAt": "2020-05-22T20:59:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcxMTI5Mw=="}], "type": "inlineReview"}, {"oid": "1b0035a5b6de89b67b595618e9f6777c903b1739", "url": "https://github.com/TEAMMATES/teammates/commit/1b0035a5b6de89b67b595618e9f6777c903b1739", "message": "Merge branch 'master' into AdamPanag/teammates", "committedDate": "2020-05-22T21:35:55Z", "type": "commit"}, {"oid": "ba7290149f26e8c61a702868b1a062cc754948f2", "url": "https://github.com/TEAMMATES/teammates/commit/ba7290149f26e8c61a702868b1a062cc754948f2", "message": "Set teammateProfilesSortBy to SortBy.NONE", "committedDate": "2020-05-22T21:41:56Z", "type": "commit"}, {"oid": "c3360f73e31dfa6948c4b03e8405098c66b88d3a", "url": "https://github.com/TEAMMATES/teammates/commit/c3360f73e31dfa6948c4b03e8405098c66b88d3a", "message": "Update snapshots of student-course-details-page", "committedDate": "2020-05-22T22:10:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ4NTUxOQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10030#discussion_r429485519", "bodyText": "The variable is for?", "author": "xpdavid", "createdAt": "2020-05-22T23:10:17Z", "path": "src/web/app/pages-student/student-course-details-page/student-course-details-page.component.ts", "diffHunk": "@@ -51,7 +57,10 @@ export class StudentCourseDetailsPageComponent implements OnInit {\n   instructorDetails: Instructor[] = [];\n   teammateProfiles: StudentProfileWithPicture[] = [];\n \n-  constructor(private route: ActivatedRoute,\n+  hasTeammateProfilesLoaded: boolean = false;", "originalCommit": "c3360f73e31dfa6948c4b03e8405098c66b88d3a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ4Njg0MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10030#discussion_r429486840", "bodyText": "Sorry, I forgot to delete this", "author": "AdamPanag", "createdAt": "2020-05-22T23:18:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ4NTUxOQ=="}], "type": "inlineReview"}, {"oid": "b0a8eb565618b6d84006c7d7d9d23efa80cc6729", "url": "https://github.com/TEAMMATES/teammates/commit/b0a8eb565618b6d84006c7d7d9d23efa80cc6729", "message": "Remove unnecessary code", "committedDate": "2020-05-22T23:48:03Z", "type": "commit"}, {"oid": "bad9c253b77730a29dec8f9f6602e7a7245bad82", "url": "https://github.com/TEAMMATES/teammates/commit/bad9c253b77730a29dec8f9f6602e7a7245bad82", "message": "Merge branch 'master' into master", "committedDate": "2020-05-23T01:24:02Z", "type": "commit"}]}