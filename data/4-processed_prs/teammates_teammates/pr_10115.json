{"pr_number": 10115, "pr_title": "[#10103] Add Remind All button for \"Participants who have not responded to any question\" tab", "pr_createdAt": "2020-05-25T12:13:27Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10115", "timeline": [{"oid": "97f7492e62958d2091c7a5bbfef8cabc5923499b", "url": "https://github.com/TEAMMATES/teammates/commit/97f7492e62958d2091c7a5bbfef8cabc5923499b", "message": "added remind-all button and fixed some typo and UI", "committedDate": "2020-05-25T11:43:03Z", "type": "commit"}, {"oid": "7efcb83c98f90a03f87c16c07c014cbfc4a49914", "url": "https://github.com/TEAMMATES/teammates/commit/7efcb83c98f90a03f87c16c07c014cbfc4a49914", "message": "fixed ts indentation", "committedDate": "2020-05-25T12:04:53Z", "type": "commit"}, {"oid": "9be73bcefc495580312f168fcf66bb997117f11f", "url": "https://github.com/TEAMMATES/teammates/commit/9be73bcefc495580312f168fcf66bb997117f11f", "message": "add missing HttpClient to spec file", "committedDate": "2020-05-25T12:42:56Z", "type": "commit"}, {"oid": "5ca064110126d3a62cc39dfdadf3b0374aad7991", "url": "https://github.com/TEAMMATES/teammates/commit/5ca064110126d3a62cc39dfdadf3b0374aad7991", "message": "add missing dependencies in spec file", "committedDate": "2020-05-25T13:06:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MDQ4Ng==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430080486", "bodyText": "Let's make the request sent from the root page.", "author": "xpdavid", "createdAt": "2020-05-25T21:37:41Z", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-no-response-panel.component.ts", "diffHunk": "@@ -57,6 +77,52 @@ export class InstructorSessionNoResponsePanelComponent implements OnInit, OnChan\n     }\n   }\n \n+  openSendReminderModal(event: any): void {", "originalCommit": "5ca064110126d3a62cc39dfdadf3b0374aad7991", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0Mzg0MQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430643841", "bodyText": "I should have said InstructorSessionResultPageComponent (root page)", "author": "xpdavid", "createdAt": "2020-05-26T19:09:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MDQ4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg2OTI4OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430869289", "bodyText": "All REST requests are moved to the root page.", "author": "Derek-Hardy", "createdAt": "2020-05-27T05:43:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MDQ4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MDk1NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430080955", "bodyText": "If we sent the request at the root page, can we reuse noResponseStudents and don't send the request again?\n\n  \n    \n      teammates/src/web/app/pages-instructor/instructor-session-result-page/instructor-session-result-page.component.ts\n    \n    \n        Lines 192 to 213\n      in\n      55bc314\n    \n    \n    \n    \n\n        \n          \n           // load no response students \n        \n\n        \n          \n           this.studentService.getStudentsFromCourse({ \n        \n\n        \n          \n             courseId: queryParams.courseid, \n        \n\n        \n          \n           }).subscribe((allStudents: Students) => { \n        \n\n        \n          \n             const students: Student[] = allStudents.students; \n        \n\n        \n          \n            \n        \n\n        \n          \n             this.feedbackSessionsService.getFeedbackSessionSubmittedGiverSet({ \n        \n\n        \n          \n               courseId: queryParams.courseid, \n        \n\n        \n          \n               feedbackSessionName: queryParams.fsname, \n        \n\n        \n          \n             }) \n        \n\n        \n          \n                 .subscribe((feedbackSessionSubmittedGiverSet: FeedbackSessionSubmittedGiverSet) => { \n        \n\n        \n          \n                   // TODO team is missing \n        \n\n        \n          \n                   this.noResponseStudents = students.filter((student: Student) => \n        \n\n        \n          \n                                               !feedbackSessionSubmittedGiverSet.giverIdentifiers.includes(student.email)); \n        \n\n        \n          \n                 }, (resp: ErrorMessageOutput) => { \n        \n\n        \n          \n                   this.statusMessageService.showErrorMessage(resp.error.message); \n        \n\n        \n          \n                 }); \n        \n\n        \n          \n            \n        \n\n        \n          \n             this.isNoResponsePanelLoaded = true; \n        \n\n        \n          \n           }, (resp: ErrorMessageOutput) => { \n        \n\n        \n          \n             this.statusMessageService.showErrorMessage(resp.error.message); \n        \n\n        \n          \n           });", "author": "xpdavid", "createdAt": "2020-05-25T21:40:37Z", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-no-response-panel.component.ts", "diffHunk": "@@ -57,6 +77,52 @@ export class InstructorSessionNoResponsePanelComponent implements OnInit, OnChan\n     }\n   }\n \n+  openSendReminderModal(event: any): void {\n+    event.stopPropagation();\n+\n+    const courseId: string = this.session.courseId;\n+    const feedbackSessionName: string = this.session.feedbackSessionName;\n+\n+    const modalRef: NgbModalRef = this.modalService.open(SendRemindersToStudentModalComponent);\n+    modalRef.componentInstance.courseId = courseId;\n+    modalRef.componentInstance.feedbackSessionName = feedbackSessionName;\n+\n+    forkJoin(", "originalCommit": "5ca064110126d3a62cc39dfdadf3b0374aad7991", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0625b1d5bcd60292450e971ad5aaf1b588ee4c94", "url": "https://github.com/TEAMMATES/teammates/commit/0625b1d5bcd60292450e971ad5aaf1b588ee4c94", "message": "removed feedbackSessionService and reuse noResponseStudents", "committedDate": "2020-05-26T03:31:59Z", "type": "commit"}, {"oid": "9c8e67844da412d1ccd7aebe08d82fd45fecff27", "url": "https://github.com/TEAMMATES/teammates/commit/9c8e67844da412d1ccd7aebe08d82fd45fecff27", "message": "moved studentService from no-response-panel to root", "committedDate": "2020-05-27T02:51:58Z", "type": "commit"}, {"oid": "89615eba3c62b00dc69bb5792abae20497a598e4", "url": "https://github.com/TEAMMATES/teammates/commit/89615eba3c62b00dc69bb5792abae20497a598e4", "message": "moved remindFeedbackSubmission from no-response-panel to root", "committedDate": "2020-05-27T05:20:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3MjU2OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430872569", "bodyText": "I suppose only those who do not answer the session should be selected?", "author": "xpdavid", "createdAt": "2020-05-27T05:54:06Z", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-no-response-panel.component.ts", "diffHunk": "@@ -57,6 +69,34 @@ export class InstructorSessionNoResponsePanelComponent implements OnInit, OnChan\n     }\n   }\n \n+  openSendReminderModal(event: any): void {\n+    event.stopPropagation();\n+\n+    const courseId: string = this.session.courseId;\n+    const feedbackSessionName: string = this.session.feedbackSessionName;\n+\n+    const giverEmails: string[] = this.noResponseStudents.map((student: Student) => student.email);\n+    const giverSet: Set<string> = new Set(giverEmails);\n+\n+    const modalRef: NgbModalRef = this.modalService.open(SendRemindersToStudentModalComponent);\n+    modalRef.componentInstance.courseId = courseId;\n+    modalRef.componentInstance.feedbackSessionName = feedbackSessionName;\n+    modalRef.componentInstance.studentListInfoTableRowModels\n+      = this.allStudents.map((student: Student) => ({\n+        email: student.email,\n+        name: student.name,\n+        teamName: student.teamName,\n+        sectionName: student.sectionName,\n+\n+        hasSubmittedSession: !giverSet.has(student.email),\n+        isSelected: true,", "originalCommit": "89615eba3c62b00dc69bb5792abae20497a598e4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3MzE3OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430873178", "bodyText": "Apology for the misleading hint :P", "author": "xpdavid", "createdAt": "2020-05-27T05:55:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3MjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg4MjU2OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430882569", "bodyText": "Alright, in that case select all respondents at the top is not selected by default. Only those with Submitted? status as No will be selected by default. Is it the intended behaviour?", "author": "Derek-Hardy", "createdAt": "2020-05-27T06:23:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3MjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg4NjQ1Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430886457", "bodyText": "Yup. By clicking button, you just want to send reminder to all nonResponseStudents.", "author": "xpdavid", "createdAt": "2020-05-27T06:33:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3MjU2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3MjcwOQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430872709", "bodyText": "nonResponseStudentEmails?", "author": "xpdavid", "createdAt": "2020-05-27T05:54:35Z", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-no-response-panel.component.ts", "diffHunk": "@@ -57,6 +69,34 @@ export class InstructorSessionNoResponsePanelComponent implements OnInit, OnChan\n     }\n   }\n \n+  openSendReminderModal(event: any): void {\n+    event.stopPropagation();\n+\n+    const courseId: string = this.session.courseId;\n+    const feedbackSessionName: string = this.session.feedbackSessionName;\n+\n+    const giverEmails: string[] = this.noResponseStudents.map((student: Student) => student.email);", "originalCommit": "89615eba3c62b00dc69bb5792abae20497a598e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3Mjc4NA==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430872784", "bodyText": "nonResponseStudentEmailSet?", "author": "xpdavid", "createdAt": "2020-05-27T05:54:46Z", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-no-response-panel.component.ts", "diffHunk": "@@ -57,6 +69,34 @@ export class InstructorSessionNoResponsePanelComponent implements OnInit, OnChan\n     }\n   }\n \n+  openSendReminderModal(event: any): void {\n+    event.stopPropagation();\n+\n+    const courseId: string = this.session.courseId;\n+    const feedbackSessionName: string = this.session.feedbackSessionName;\n+\n+    const giverEmails: string[] = this.noResponseStudents.map((student: Student) => student.email);\n+    const giverSet: Set<string> = new Set(giverEmails);", "originalCommit": "89615eba3c62b00dc69bb5792abae20497a598e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg3Mjk3Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10115#discussion_r430872977", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              @Output() studentsToRemindData: EventEmitter<StudentListInfoTableRowModel[]> = new EventEmitter();\n          \n          \n            \n              @Output() studentsToRemindEvent: EventEmitter<StudentListInfoTableRowModel[]> = new EventEmitter();", "author": "xpdavid", "createdAt": "2020-05-27T05:55:22Z", "path": "src/web/app/pages-instructor/instructor-session-result-page/instructor-session-no-response-panel.component.ts", "diffHunk": "@@ -38,7 +46,11 @@ export class InstructorSessionNoResponsePanelComponent implements OnInit, OnChan\n   isTabExpanded: boolean = false;\n \n   noResponseStudentsInSection: Student[] = [];\n-  constructor() { }\n+\n+  @Output() studentsToRemindData: EventEmitter<StudentListInfoTableRowModel[]> = new EventEmitter();", "originalCommit": "89615eba3c62b00dc69bb5792abae20497a598e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fc20d3af1eaf1ac95af493120cc464bcaad9aa67", "url": "https://github.com/TEAMMATES/teammates/commit/fc20d3af1eaf1ac95af493120cc464bcaad9aa67", "message": "updated default select and naming", "committedDate": "2020-05-27T07:27:13Z", "type": "commit"}, {"oid": "c637d664e679ac52efe860a8b0f76d969499f888", "url": "https://github.com/TEAMMATES/teammates/commit/c637d664e679ac52efe860a8b0f76d969499f888", "message": "Merge branch 'master' into 10103-add-remind-all-button", "committedDate": "2020-05-28T00:48:36Z", "type": "commit"}]}