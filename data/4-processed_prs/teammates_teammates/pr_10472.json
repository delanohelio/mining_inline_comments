{"pr_number": 10472, "pr_title": "[#10470] Add v6 instructor join link support", "pr_createdAt": "2020-07-27T04:20:57Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10472", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY1MTczNA==", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r460651734", "bodyText": "You can just put this into the the template html.", "author": "xpdavid", "createdAt": "2020-07-27T05:18:54Z", "path": "src/web/app/user-join-page.component.ts", "diffHunk": "@@ -18,6 +18,8 @@ import { ErrorMessageOutput } from './error-message-output';\n })\n export class UserJoinPageComponent implements OnInit {\n \n+  link: string = '/web/front/request';", "originalCommit": "0b9cb408a10604b9c55514c519025633295a53ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY4MTcwNg==", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r460681706", "bodyText": "Requesting a new join link is not the same as requesting a new account; the latter creates a duplicate sample course.", "author": "wkurniawan07", "createdAt": "2020-07-27T06:54:48Z", "path": "src/web/app/user-join-page.component.html", "diffHunk": "@@ -12,7 +12,8 @@ <h3>Not logged in</h3>\n       <h3>Invalid course join link</h3>\n     </div>\n     <div class=\"card-body\" *ngIf=\"!validUrl\">\n-      You are using an invalid join link. Please <a [routerLink]=\"link\">request for a new join link</a> or check that you copied the URL entirely.\n+      You are using an invalid join link. Please <a routerLink=\"/web/front/request\">request for a new join link</a>\n+      or check that you copied the URL entirely.", "originalCommit": "b53fdfec676532d4d9147f6218017f55576a9c7d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxMTAzNw==", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r460711037", "bodyText": "So should I remove the redirection to the request page then? I'll create an issue separately for regenerating join links", "author": "madanalogy", "createdAt": "2020-07-27T07:57:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY4MTcwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY4MTgyOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r460681828", "bodyText": "Not necessary; this can be removed.", "author": "wkurniawan07", "createdAt": "2020-07-27T06:55:02Z", "path": "src/web/app/app.module.ts", "diffHunk": "@@ -84,6 +84,12 @@ const routes: Routes = [\n       },\n     ],\n   },\n+  {\n+    // This path is added to support redirection of v6 join link to v7\n+    path: 'page/instructorCourseJoin',\n+    pathMatch: 'full',\n+    redirectTo: 'web/join',\n+  },", "originalCommit": "b53fdfec676532d4d9147f6218017f55576a9c7d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2b89ff77c6c44be1ce283ed12f7d02556c1b720d", "url": "https://github.com/TEAMMATES/teammates/commit/2b89ff77c6c44be1ce283ed12f7d02556c1b720d", "message": "Remove institution validation for v6 join link support", "committedDate": "2020-07-28T03:34:54Z", "type": "forcePushed"}, {"oid": "b17b7e8835c5d3dab0535432c462179f352f27e2", "url": "https://github.com/TEAMMATES/teammates/commit/b17b7e8835c5d3dab0535432c462179f352f27e2", "message": "Add v6 instructor join link support", "committedDate": "2020-07-28T04:16:39Z", "type": "commit"}, {"oid": "b17b7e8835c5d3dab0535432c462179f352f27e2", "url": "https://github.com/TEAMMATES/teammates/commit/b17b7e8835c5d3dab0535432c462179f352f27e2", "message": "Add v6 instructor join link support", "committedDate": "2020-07-28T04:16:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY5MDc1NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10472#discussion_r461690755", "bodyText": "Not necessary. This entire class will be removed in the first place once V6 is decommissioned.", "author": "wkurniawan07", "createdAt": "2020-07-28T15:54:11Z", "path": "src/main/java/teammates/ui/webapi/action/LegacyUrlMapper.java", "diffHunk": "@@ -31,10 +33,17 @@ public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOExc\n         switch (uri) {\n         case Const.LegacyURIs.INSTRUCTOR_COURSE_JOIN:\n             key = req.getParameter(Const.ParamsNames.REGKEY);\n-            redirectUrl = Config.getFrontEndAppUrl(Const.WebPageURIs.JOIN_PAGE)\n+            String institute = req.getParameter(Const.ParamsNames.INSTRUCTOR_INSTITUTION);\n+            AppUrl newUrl = Config.getFrontEndAppUrl(Const.WebPageURIs.JOIN_PAGE)\n                     .withRegistrationKey(key)\n-                    .withParam(Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR)\n-                    .toString();\n+                    .withParam(Const.ParamsNames.ENTITY_TYPE, Const.EntityType.INSTRUCTOR);\n+            // TODO: Remove the following code block for mac generation once v6 join links stop being supported", "originalCommit": "a9e134d3fc75f388b92601f57855bd43f29c6234", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b17b7e8835c5d3dab0535432c462179f352f27e2", "url": "https://github.com/TEAMMATES/teammates/commit/b17b7e8835c5d3dab0535432c462179f352f27e2", "message": "Add v6 instructor join link support", "committedDate": "2020-07-28T04:16:39Z", "type": "forcePushed"}, {"oid": "ec6b654d651ade021b1ef62fade6b970ebd871bc", "url": "https://github.com/TEAMMATES/teammates/commit/ec6b654d651ade021b1ef62fade6b970ebd871bc", "message": "Merge branch 'master' into 10470-joinLink", "committedDate": "2020-07-28T16:12:14Z", "type": "commit"}]}