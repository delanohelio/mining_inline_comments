{"pr_number": 10067, "pr_title": "[#9382] Add example for create feedback session form to help page for instructors", "pr_createdAt": "2020-05-18T09:03:32Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10067", "timeline": [{"oid": "2dbbf029c182a36499e8cd54e5fc9d39fec2f906", "url": "https://github.com/TEAMMATES/teammates/commit/2dbbf029c182a36499e8cd54e5fc9d39fec2f906", "message": "Add example form to create session in instructor help page", "committedDate": "2020-05-18T05:33:17Z", "type": "commit"}, {"oid": "b0d4577bdc1dc0ce6a71f77c4dbc2cc79ca1d906", "url": "https://github.com/TEAMMATES/teammates/commit/b0d4577bdc1dc0ce6a71f77c4dbc2cc79ca1d906", "message": "Add test skeleton to instructor help session page", "committedDate": "2020-05-18T08:44:53Z", "type": "commit"}, {"oid": "6b6f8800f59dc801cdc985fca85f767d5b2c4587", "url": "https://github.com/TEAMMATES/teammates/commit/6b6f8800f59dc801cdc985fca85f767d5b2c4587", "message": "Merge branch 'master' into 9382-help-session-create", "committedDate": "2020-05-18T08:46:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg3NzAzNQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10067#discussion_r426877035", "bodyText": "If you create those stub just to make the test passing, I think you can import SessionEditFormModule here to get it passed.", "author": "xpdavid", "createdAt": "2020-05-18T20:31:21Z", "path": "src/web/app/pages-help/instructor-help-page/instructor-help-sessions-section/instructor-help-sessions-section.component.spec.ts", "diffHunk": "@@ -1,16 +1,35 @@\n+import { Component, Input } from '@angular/core';\n import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n import { RouterTestingModule } from '@angular/router/testing';\n+\n import { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n import { NgxPageScrollCoreModule } from 'ngx-page-scroll-core';\n+\n+import { TemplateSession } from '../../../../services/feedback-sessions.service';\n+import { Course } from '../../../../types/api-output';\n+import {\n+  SessionEditFormMode,\n+  SessionEditFormModel,\n+} from '../../../components/session-edit-form/session-edit-form-model';\n import { InstructorHelpSessionsSectionComponent } from './instructor-help-sessions-section.component';\n \n+@Component({ selector: 'tm-example-box', template: '' })\n+class ExampleBoxStubComponent {}\n+@Component({ selector: 'tm-session-edit-form', template: '' })\n+class SessionEditFormStubComponent {\n+  @Input() formMode: SessionEditFormMode = SessionEditFormMode.ADD;\n+  @Input() model: SessionEditFormModel = {} as SessionEditFormModel;\n+  @Input() courseCandidates: Course[] = [];\n+  @Input() templateSessions: TemplateSession[] = [];\n+}\n+\n describe('InstructorHelpSessionsSectionComponent', () => {\n   let component: InstructorHelpSessionsSectionComponent;\n   let fixture: ComponentFixture<InstructorHelpSessionsSectionComponent>;\n \n   beforeEach(async(() => {\n     TestBed.configureTestingModule({\n-      declarations: [InstructorHelpSessionsSectionComponent],\n+      declarations: [InstructorHelpSessionsSectionComponent, ExampleBoxStubComponent, SessionEditFormStubComponent],\n       imports: [NgbModule, RouterTestingModule, NgxPageScrollCoreModule],", "originalCommit": "6b6f8800f59dc801cdc985fca85f767d5b2c4587", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4NzMxNw==", "url": "https://github.com/TEAMMATES/teammates/pull/10067#discussion_r426987317", "bodyText": "I tried to import this module. But i received a NullInjectorError: No provider for MatSnackBar! So i made the stub to pass the test. Not ideal, but any ideas on the error?", "author": "t-cheepeng", "createdAt": "2020-05-19T02:02:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg3NzAzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4NzgyMQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10067#discussion_r426987821", "bodyText": "See how existing test deal with this? (try search MatSnackBarModule and look for files end with spec.ts)", "author": "xpdavid", "createdAt": "2020-05-19T02:04:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg3NzAzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzAwMDA0MA==", "url": "https://github.com/TEAMMATES/teammates/pull/10067#discussion_r427000040", "bodyText": "Okay, found the error. was importing the MatSnackBarModule from @angular/material/snack-bar instead of @angular/material. Thanks", "author": "t-cheepeng", "createdAt": "2020-05-19T02:51:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg3NzAzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg3ODkwOQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10067#discussion_r426878909", "bodyText": "And declaring ExampleBoxComponent should also be fine.", "author": "xpdavid", "createdAt": "2020-05-18T20:35:20Z", "path": "src/web/app/pages-help/instructor-help-page/instructor-help-sessions-section/instructor-help-sessions-section.component.spec.ts", "diffHunk": "@@ -1,16 +1,35 @@\n+import { Component, Input } from '@angular/core';\n import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n import { RouterTestingModule } from '@angular/router/testing';\n+\n import { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n import { NgxPageScrollCoreModule } from 'ngx-page-scroll-core';\n+\n+import { TemplateSession } from '../../../../services/feedback-sessions.service';\n+import { Course } from '../../../../types/api-output';\n+import {\n+  SessionEditFormMode,\n+  SessionEditFormModel,\n+} from '../../../components/session-edit-form/session-edit-form-model';\n import { InstructorHelpSessionsSectionComponent } from './instructor-help-sessions-section.component';\n \n+@Component({ selector: 'tm-example-box', template: '' })\n+class ExampleBoxStubComponent {}\n+@Component({ selector: 'tm-session-edit-form', template: '' })\n+class SessionEditFormStubComponent {\n+  @Input() formMode: SessionEditFormMode = SessionEditFormMode.ADD;\n+  @Input() model: SessionEditFormModel = {} as SessionEditFormModel;\n+  @Input() courseCandidates: Course[] = [];\n+  @Input() templateSessions: TemplateSession[] = [];\n+}\n+\n describe('InstructorHelpSessionsSectionComponent', () => {\n   let component: InstructorHelpSessionsSectionComponent;\n   let fixture: ComponentFixture<InstructorHelpSessionsSectionComponent>;\n \n   beforeEach(async(() => {\n     TestBed.configureTestingModule({\n-      declarations: [InstructorHelpSessionsSectionComponent],\n+      declarations: [InstructorHelpSessionsSectionComponent, ExampleBoxStubComponent, SessionEditFormStubComponent],", "originalCommit": "6b6f8800f59dc801cdc985fca85f767d5b2c4587", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4NjgwMA==", "url": "https://github.com/TEAMMATES/teammates/pull/10067#discussion_r426986800", "bodyText": "Will make the change for this component", "author": "t-cheepeng", "createdAt": "2020-05-19T02:00:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg3ODkwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg4MDY0Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/10067#discussion_r426880647", "bodyText": "I think somehow you may also want to add a isDisplayOnly or disabled field to the component unless you want the form to be interactive (which is also acceptable as the event thrown by the component is ignored).\nYou can refer to https://github.com/TEAMMATES/teammates/pull/10071/files for examples.", "author": "xpdavid", "createdAt": "2020-05-18T20:38:52Z", "path": "src/web/app/pages-help/instructor-help-page/instructor-help-sessions-section/instructor-help-sessions-section.component.html", "diffHunk": "@@ -135,7 +135,13 @@ <h3 *ngIf=\"displaySubsection(showQuestion, 0, 4)\">Setting Up Sessions</h3>\n           <p>\n             This is the form used to set up sessions.\n           </p>\n-          <p>EXAMPLE BOX</p>\n+          <tm-example-box>\n+            <tm-session-edit-form [formMode]=\"SessionEditFormMode.ADD\"", "originalCommit": "6b6f8800f59dc801cdc985fca85f767d5b2c4587", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk4NTM1OQ==", "url": "https://github.com/TEAMMATES/teammates/pull/10067#discussion_r426985359", "bodyText": "The form is made not interactive with the isEditable field in the model so I did not feel the need to add an additional disabled field to the components", "author": "t-cheepeng", "createdAt": "2020-05-19T01:54:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg4MDY0Nw=="}], "type": "inlineReview"}, {"oid": "35ac1b8bfbd9e3c607ec573160e711ad6d17c60b", "url": "https://github.com/TEAMMATES/teammates/commit/35ac1b8bfbd9e3c607ec573160e711ad6d17c60b", "message": "Use original ExampleBox instead of stub for test", "committedDate": "2020-05-19T02:10:29Z", "type": "commit"}, {"oid": "0dff9922bf99e4aef5739388158d4fedacfe5a25", "url": "https://github.com/TEAMMATES/teammates/commit/0dff9922bf99e4aef5739388158d4fedacfe5a25", "message": "Change import location of MatSnackBarModule", "committedDate": "2020-05-19T02:52:22Z", "type": "commit"}, {"oid": "647873c8b6bf0d982d711480aba231d8228658d9", "url": "https://github.com/TEAMMATES/teammates/commit/647873c8b6bf0d982d711480aba231d8228658d9", "message": "Merge branch 'master' into 9382-help-session-create", "committedDate": "2020-05-19T02:57:38Z", "type": "commit"}, {"oid": "97b3067cb3ab1ecaee090782367e2036404d8909", "url": "https://github.com/TEAMMATES/teammates/commit/97b3067cb3ab1ecaee090782367e2036404d8909", "message": "Merge branch 'master' into 9382-help-session-create", "committedDate": "2020-05-19T03:43:57Z", "type": "commit"}]}