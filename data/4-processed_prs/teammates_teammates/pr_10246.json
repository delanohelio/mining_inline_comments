{"pr_number": 10246, "pr_title": "[#10152] Moment timezone data not loaded", "pr_createdAt": "2020-06-27T02:47:52Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10246", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ4NTU2OA==", "url": "https://github.com/TEAMMATES/teammates/pull/10246#discussion_r446485568", "bodyText": "I believe the timezone here is in feedbackSession.timeZone or there will be a display bug. Let's fix it.", "author": "xpdavid", "createdAt": "2020-06-27T05:00:14Z", "path": "src/web/services/feedback-sessions.service.ts", "diffHunk": "@@ -399,8 +400,10 @@ export class FeedbackSessionsService {\n    */\n   generateNameFragment(feedbackSession: FeedbackSession): string {\n     const DATE_FORMAT_WITH_ZONE_INFO: string = 'ddd, DD MMM yyyy, hh:mm A Z';\n-    const startTime: string = moment(feedbackSession.submissionStartTimestamp).format(DATE_FORMAT_WITH_ZONE_INFO);\n-    const endTime: string = moment(feedbackSession.submissionEndTimestamp).format(DATE_FORMAT_WITH_ZONE_INFO);\n+    const startTime: string = this.timezoneService\n+        .formatToString(feedbackSession.submissionStartTimestamp, null, DATE_FORMAT_WITH_ZONE_INFO);", "originalCommit": "89ddd5d7822d68bbde9e04697e4a43be20735c37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ4NTU3Mg==", "url": "https://github.com/TEAMMATES/teammates/pull/10246#discussion_r446485572", "bodyText": "Same here.", "author": "xpdavid", "createdAt": "2020-06-27T05:00:20Z", "path": "src/web/services/feedback-sessions.service.ts", "diffHunk": "@@ -399,8 +400,10 @@ export class FeedbackSessionsService {\n    */\n   generateNameFragment(feedbackSession: FeedbackSession): string {\n     const DATE_FORMAT_WITH_ZONE_INFO: string = 'ddd, DD MMM yyyy, hh:mm A Z';\n-    const startTime: string = moment(feedbackSession.submissionStartTimestamp).format(DATE_FORMAT_WITH_ZONE_INFO);\n-    const endTime: string = moment(feedbackSession.submissionEndTimestamp).format(DATE_FORMAT_WITH_ZONE_INFO);\n+    const startTime: string = this.timezoneService\n+        .formatToString(feedbackSession.submissionStartTimestamp, null, DATE_FORMAT_WITH_ZONE_INFO);\n+    const endTime: string = this.timezoneService", "originalCommit": "89ddd5d7822d68bbde9e04697e4a43be20735c37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "491223f80eb54542815e26633a05802035077d95", "url": "https://github.com/TEAMMATES/teammates/commit/491223f80eb54542815e26633a05802035077d95", "message": "Move all functions involving tz to TimezoneService", "committedDate": "2020-06-27T11:01:15Z", "type": "commit"}, {"oid": "491223f80eb54542815e26633a05802035077d95", "url": "https://github.com/TEAMMATES/teammates/commit/491223f80eb54542815e26633a05802035077d95", "message": "Move all functions involving tz to TimezoneService", "committedDate": "2020-06-27T11:01:15Z", "type": "forcePushed"}]}