{"pr_number": 9941, "pr_title": "[#9917] Loading bar persists when courses of the student are soft-deleted", "pr_createdAt": "2020-02-01T14:49:56Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/9941", "timeline": [{"oid": "725133993a5ecfbec99116404b07c201d87024a8", "url": "https://github.com/TEAMMATES/teammates/commit/725133993a5ecfbec99116404b07c201d87024a8", "message": "Fix a persisting loading bar", "committedDate": "2020-02-01T14:38:14Z", "type": "commit"}, {"oid": "0d8bbf5e9162b860f3d9e8d3986b8cc4ee55539b", "url": "https://github.com/TEAMMATES/teammates/commit/0d8bbf5e9162b860f3d9e8d3986b8cc4ee55539b", "message": "Merge branch 'master' of https://github.com/TEAMMATES/teammates into fix-soft-del-courses-bug\n\nMerge the latest changes from the upstream master.", "committedDate": "2020-02-02T06:32:06Z", "type": "commit"}, {"oid": "bd698d49fa6db44a429e47468aff521b2bd90dd2", "url": "https://github.com/TEAMMATES/teammates/commit/bd698d49fa6db44a429e47468aff521b2bd90dd2", "message": "Merge branch 'master' into fix-soft-del-courses-bug", "committedDate": "2020-02-02T21:09:00Z", "type": "commit"}, {"oid": "3613f26b956f9091aee6a30a50e121399b8fe454", "url": "https://github.com/TEAMMATES/teammates/commit/3613f26b956f9091aee6a30a50e121399b8fe454", "message": "Merge branch 'master' into fix-soft-del-courses-bug", "committedDate": "2020-02-06T04:10:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMTE2NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r375701165", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 No courses you are enrolled in. Please refer to the \n          \n          \n            \n                 You are not enrolled in any courses. Please refer to the", "author": "madanalogy", "createdAt": "2020-02-06T08:42:26Z", "path": "src/web/app/pages-student/student-home-page/__snapshots__/student-home-page.component.spec.ts.snap", "diffHunk": "@@ -389,7 +389,18 @@ exports[`StudentHomePageComponent should snap with default fields 1`] = `\n   studentFeedbackSessionStatusSubmitted={[Function String]}\n   timezoneService={[Function TimezoneService]}\n >\n+  <div>\n+     No courses you are enrolled in. Please refer to the ", "originalCommit": "3613f26b956f9091aee6a30a50e121399b8fe454", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NDgyMw==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r376274823", "bodyText": "Done.", "author": "aishaadambek", "createdAt": "2020-02-07T08:50:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMTE2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMTkzNw==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r375701937", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 if you have any questions.\n          \n          \n            \n                 if you need more information.", "author": "madanalogy", "createdAt": "2020-02-06T08:44:05Z", "path": "src/web/app/pages-student/student-home-page/__snapshots__/student-home-page.component.spec.ts.snap", "diffHunk": "@@ -389,7 +389,18 @@ exports[`StudentHomePageComponent should snap with default fields 1`] = `\n   studentFeedbackSessionStatusSubmitted={[Function String]}\n   timezoneService={[Function TimezoneService]}\n >\n+  <div>\n+     No courses you are enrolled in. Please refer to the \n+    <a\n+      href=\"/web/student/help\"\n+      ng-reflect-router-link=\"/web/student/help\"\n+      routerlink=\"/web/student/help\"\n+    >\n+      Help page\n+    </a>\n+     if you have any questions.", "originalCommit": "3613f26b956f9091aee6a30a50e121399b8fe454", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NDkwNQ==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r376274905", "bodyText": "Done.", "author": "aishaadambek", "createdAt": "2020-02-07T08:50:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMTkzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMjU0NA==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r375702544", "bodyText": "The edit suggestions should have been applied here, my apologies. I just realised I commented on the generated snapshot rather than the source content.", "author": "madanalogy", "createdAt": "2020-02-06T08:45:34Z", "path": "src/web/app/pages-student/student-home-page/student-home-page.component.html", "diffHunk": "@@ -1,85 +1,91 @@\n-<ng-container *ngFor=\"let studentCourse of courses\">\n-  <div class=\"card bg-light top-padded\">\n-    <div class=\"card-header bg-primary text-white\" *ngIf=\"studentCourse.course as course\">\n-      <strong>[{{ course.courseId }}]: {{ course.courseName }}</strong>\n-      <span class=\"float-sm-right\">\n-        <a routerLink=\"../course\" [queryParams]=\"{courseid: course.courseId}\"\n-           class=\"btn btn-light btn-sm button\" ngbTooltip='View and edit information regarding your team'>\n-          View team\n-        </a>\n-      </span>\n-    </div>\n+<div *ngIf=\"courses.length == 0; else coursesContainer\">\n+  No courses you are enrolled in. Please refer to the <a routerLink=\"/web/student/help\">Help page</a>\n+  if you have any questions.", "originalCommit": "3613f26b956f9091aee6a30a50e121399b8fe454", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NTAxNg==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r376275016", "bodyText": "Yes, no problems :) Done.", "author": "aishaadambek", "createdAt": "2020-02-07T08:50:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMjU0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMzUxOQ==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r375703519", "bodyText": "Any particular reason for capitalising the \"H\" in \"Help\"?", "author": "madanalogy", "createdAt": "2020-02-06T08:47:44Z", "path": "src/web/app/pages-student/student-home-page/__snapshots__/student-home-page.component.spec.ts.snap", "diffHunk": "@@ -389,7 +389,18 @@ exports[`StudentHomePageComponent should snap with default fields 1`] = `\n   studentFeedbackSessionStatusSubmitted={[Function String]}\n   timezoneService={[Function TimezoneService]}\n >\n+  <div>\n+     No courses you are enrolled in. Please refer to the \n+    <a\n+      href=\"/web/student/help\"\n+      ng-reflect-router-link=\"/web/student/help\"\n+      routerlink=\"/web/student/help\"\n+    >\n+      Help page", "originalCommit": "3613f26b956f9091aee6a30a50e121399b8fe454", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NTA5Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r376275093", "bodyText": "Done.", "author": "aishaadambek", "createdAt": "2020-02-07T08:50:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcwMzUxOQ=="}], "type": "inlineReview"}, {"oid": "0cffd172504b7c3598c4ef63915133334c7d97e6", "url": "https://github.com/TEAMMATES/teammates/commit/0cffd172504b7c3598c4ef63915133334c7d97e6", "message": "Merge branch 'master' into fix-soft-del-courses-bug", "committedDate": "2020-02-06T16:54:25Z", "type": "commit"}, {"oid": "588e9a449ccfea89bc00fc3246cebd5a30da3bfe", "url": "https://github.com/TEAMMATES/teammates/commit/588e9a449ccfea89bc00fc3246cebd5a30da3bfe", "message": "Improve phrasing of an error message", "committedDate": "2020-02-06T17:30:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ3NTMxOA==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r380475318", "bodyText": "if (resp.courses.length === 0) {\n        this.loadingBarService.hideLoadingBar();\n        return;\n}\n//rest of code", "author": "rrtheonlyone", "createdAt": "2020-02-18T06:30:50Z", "path": "src/web/app/pages-student/student-home-page/student-home-page.component.ts", "diffHunk": "@@ -76,31 +76,35 @@ export class StudentHomePageComponent implements OnInit {\n       entitytype: 'student',\n     };\n     this.httpRequestService.get('/courses', paramMap).subscribe((resp: Courses) => {\n-      for (const course of resp.courses) {\n-        this.feedbackSessionsService.getFeedbackSessionsForStudent(course.courseId)\n-            .pipe(finalize(() => this.loadingBarService.hideLoadingBar()))\n-            .subscribe((fss: FeedbackSessions) => {\n-              const sortedFss: FeedbackSession[] = this.sortFeedbackSessions(fss);\n+      if (resp.courses.length === 0) {", "originalCommit": "588e9a449ccfea89bc00fc3246cebd5a30da3bfe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE0NjYwNA==", "url": "https://github.com/TEAMMATES/teammates/pull/9941#discussion_r381146604", "bodyText": "Oops, done!", "author": "aishaadambek", "createdAt": "2020-02-19T08:44:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDQ3NTMxOA=="}], "type": "inlineReview"}, {"oid": "efed357b3f9c7710988e3b05ba10d804b1c867c1", "url": "https://github.com/TEAMMATES/teammates/commit/efed357b3f9c7710988e3b05ba10d804b1c867c1", "message": "Exit early if courses array is empty", "committedDate": "2020-02-19T07:08:47Z", "type": "commit"}, {"oid": "3f54fd4c752494c048618c29dd42b16cb7fc0671", "url": "https://github.com/TEAMMATES/teammates/commit/3f54fd4c752494c048618c29dd42b16cb7fc0671", "message": "Resolved merge conflict", "committedDate": "2020-02-19T07:42:31Z", "type": "commit"}, {"oid": "1702344c6cc25ab009c8c843598050ace02da08d", "url": "https://github.com/TEAMMATES/teammates/commit/1702344c6cc25ab009c8c843598050ace02da08d", "message": "Fixed lint errors", "committedDate": "2020-02-19T08:42:41Z", "type": "commit"}]}