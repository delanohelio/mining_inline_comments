{"pr_number": 9942, "pr_title": "[#9939] View Team on Student Page does not show teammates details", "pr_createdAt": "2020-02-01T16:54:43Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/9942", "timeline": [{"oid": "3446e6b8e0d7d07f22f237d13b6c79ce8439c8f3", "url": "https://github.com/TEAMMATES/teammates/commit/3446e6b8e0d7d07f22f237d13b6c79ce8439c8f3", "message": "Do not show long term email", "committedDate": "2020-02-12T14:40:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk3MDc3NQ==", "url": "https://github.com/TEAMMATES/teammates/pull/9942#discussion_r378970775", "bodyText": "Correct me if I am wrong. Looks like from your conversation history this is a potential security glitch says that \"the long term email should not be shown to student\". If this is the case, doing override in the frontend won't work. We need hide the field from the backend.", "author": "xpdavid", "createdAt": "2020-02-13T16:25:51Z", "path": "src/web/app/pages-student/student-course-details-page/student-course-details-page.component.ts", "diffHunk": "@@ -114,17 +114,18 @@ export class StudentCourseDetailsPageComponent implements OnInit {\n             this.studentProfileService.getStudentProfile(student.email, courseId)\n                   .subscribe((studentProfile: StudentProfile) => {\n                     const newPhotoUrl: string =\n-              `${environment.backendUrl}/webapi/student/profilePic?courseid=${courseId}&studentemail=${student.email}`;\n+                      `${environment.backendUrl}/webapi/student/profilePic`\n+                      + `?courseid=${courseId}&studentemail=${student.email}`;\n \n                     const newTeammateProfile: StudentProfileWithPicture = {\n-                      studentProfile,\n+                      // Use student.email as studentProfile.email is the long term email which should not be shown", "originalCommit": "3446e6b8e0d7d07f22f237d13b6c79ce8439c8f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkxMjQyMA==", "url": "https://github.com/TEAMMATES/teammates/pull/9942#discussion_r379912420", "bodyText": "Yea you're right. Since this got larger in scale I'll KIV this first and return after the search migration API epic", "author": "hcwong", "createdAt": "2020-02-16T15:43:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk3MDc3NQ=="}], "type": "inlineReview"}, {"oid": "ae1661c96d68b96c8b02e7a58036b42ca7e9dfb9", "url": "https://github.com/TEAMMATES/teammates/commit/ae1661c96d68b96c8b02e7a58036b42ca7e9dfb9", "message": "Fix lint error", "committedDate": "2020-02-24T03:25:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA4Njg4Mw==", "url": "https://github.com/TEAMMATES/teammates/pull/9942#discussion_r383086883", "bodyText": "I think you should change StudentProfileData instead. See how FeedbackSessionData is done.", "author": "xpdavid", "createdAt": "2020-02-24T05:03:20Z", "path": "src/main/java/teammates/ui/webapi/action/GetStudentProfileAction.java", "diffHunk": "@@ -72,6 +72,12 @@ public ActionResult execute() {\n             studentProfile = StudentProfileAttributes.builder(studentId).build();\n         }\n \n+        // If student requesting and is not the student's own profile, hide some fields\n+        if (userInfo.isStudent && studentId.equals(userInfo.id)) {", "originalCommit": "ae1661c96d68b96c8b02e7a58036b42ca7e9dfb9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI1NDI3Nw==", "url": "https://github.com/TEAMMATES/teammates/pull/9942#discussion_r384254277", "bodyText": "Thanks, I've added a hide feature to StudentProfileData", "author": "hcwong", "createdAt": "2020-02-26T03:14:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA4Njg4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQwOTQxMQ==", "url": "https://github.com/TEAMMATES/teammates/pull/9942#discussion_r388409411", "bodyText": "Hey @xpdavid, is the fix for this alright? Thanks!", "author": "hcwong", "createdAt": "2020-03-05T16:28:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA4Njg4Mw=="}], "type": "inlineReview"}, {"oid": "0b730ef2cea4db54636a83b992f97d544d8724a8", "url": "https://github.com/TEAMMATES/teammates/commit/0b730ef2cea4db54636a83b992f97d544d8724a8", "message": "Fix comments", "committedDate": "2020-03-05T16:23:42Z", "type": "forcePushed"}, {"oid": "fafd836ad0bb3b6b1ebc42c4b1e414699d675ce3", "url": "https://github.com/TEAMMATES/teammates/commit/fafd836ad0bb3b6b1ebc42c4b1e414699d675ce3", "message": "Fix names not showing", "committedDate": "2020-03-11T04:35:48Z", "type": "commit"}, {"oid": "d597fc06348aec5780dc805b33bdb60728395b44", "url": "https://github.com/TEAMMATES/teammates/commit/d597fc06348aec5780dc805b33bdb60728395b44", "message": "Fix lint", "committedDate": "2020-03-11T04:35:48Z", "type": "commit"}, {"oid": "cb5ed1cb9d6353ce1bbe5f52f9a86f783eef7f94", "url": "https://github.com/TEAMMATES/teammates/commit/cb5ed1cb9d6353ce1bbe5f52f9a86f783eef7f94", "message": "Update snapshot", "committedDate": "2020-03-11T04:35:48Z", "type": "commit"}, {"oid": "909cd3732bf1349a5aa01cb0997b4987545485f3", "url": "https://github.com/TEAMMATES/teammates/commit/909cd3732bf1349a5aa01cb0997b4987545485f3", "message": "Do not show long term email", "committedDate": "2020-03-11T04:35:48Z", "type": "commit"}, {"oid": "d46a0fd1d156a1907edaa8134a82353577994bac", "url": "https://github.com/TEAMMATES/teammates/commit/d46a0fd1d156a1907edaa8134a82353577994bac", "message": "Hide some fields that should not be shown to students", "committedDate": "2020-03-11T04:35:48Z", "type": "commit"}, {"oid": "ba4fc35bb356c983a3c6705ce9fb69a618bb5dfd", "url": "https://github.com/TEAMMATES/teammates/commit/ba4fc35bb356c983a3c6705ce9fb69a618bb5dfd", "message": "Fix lint error", "committedDate": "2020-03-11T04:35:48Z", "type": "commit"}, {"oid": "397654dda46c0a9168f330aebd78b16e4cfc1937", "url": "https://github.com/TEAMMATES/teammates/commit/397654dda46c0a9168f330aebd78b16e4cfc1937", "message": "Fix comments", "committedDate": "2020-03-11T04:35:48Z", "type": "commit"}, {"oid": "fe1db603664c5102db5edccc72725e85c57d3e45", "url": "https://github.com/TEAMMATES/teammates/commit/fe1db603664c5102db5edccc72725e85c57d3e45", "message": "Fix linter errors", "committedDate": "2020-03-11T04:37:23Z", "type": "commit"}, {"oid": "fe1db603664c5102db5edccc72725e85c57d3e45", "url": "https://github.com/TEAMMATES/teammates/commit/fe1db603664c5102db5edccc72725e85c57d3e45", "message": "Fix linter errors", "committedDate": "2020-03-11T04:37:23Z", "type": "forcePushed"}, {"oid": "a80d3c0a0623b4b0329fe970d8688072a29f78a0", "url": "https://github.com/TEAMMATES/teammates/commit/a80d3c0a0623b4b0329fe970d8688072a29f78a0", "message": "Fix failing test", "committedDate": "2020-03-17T06:50:39Z", "type": "commit"}, {"oid": "a80d3c0a0623b4b0329fe970d8688072a29f78a0", "url": "https://github.com/TEAMMATES/teammates/commit/a80d3c0a0623b4b0329fe970d8688072a29f78a0", "message": "Fix failing test", "committedDate": "2020-03-17T06:50:39Z", "type": "forcePushed"}, {"oid": "b1561df71bbca1508dcaf155ee6ab94f77c0869b", "url": "https://github.com/TEAMMATES/teammates/commit/b1561df71bbca1508dcaf155ee6ab94f77c0869b", "message": "Merge branch 'master' into fix/names-not-showing-student-team", "committedDate": "2020-03-18T15:17:55Z", "type": "commit"}]}