{"pr_number": 10699, "pr_title": "[#10645] [#10688] Fix download result function and user links in admin page", "pr_createdAt": "2020-09-07T11:12:54Z", "pr_url": "https://github.com/TEAMMATES/teammates/pull/10699", "timeline": [{"oid": "1c59500b4c00d447211dcb8570a6952f52f3634a", "url": "https://github.com/TEAMMATES/teammates/commit/1c59500b4c00d447211dcb8570a6952f52f3634a", "message": "Use window.location.origin as base URL", "committedDate": "2020-09-07T11:40:48Z", "type": "forcePushed"}, {"oid": "02dfd86c93231517029d0bde4840593bc62efba7", "url": "https://github.com/TEAMMATES/teammates/commit/02dfd86c93231517029d0bde4840593bc62efba7", "message": "Use window.location.origin as base URL", "committedDate": "2020-09-07T12:02:35Z", "type": "forcePushed"}, {"oid": "01c7573da0d3fd10f2f9baf42d4fc85cd6380c22", "url": "https://github.com/TEAMMATES/teammates/commit/01c7573da0d3fd10f2f9baf42d4fc85cd6380c22", "message": "Use window.location.origin as base URL", "committedDate": "2020-09-07T12:09:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQwNzMxMg==", "url": "https://github.com/TEAMMATES/teammates/pull/10699#discussion_r484407312", "bodyText": "I don't see why this needed to be split to multi line", "author": "madanalogy", "createdAt": "2020-09-07T12:38:53Z", "path": "src/web/services/search.service.spec.ts", "diffHunk": "@@ -315,19 +315,24 @@ describe('SearchService', () => {\n       { feedbackSessions: mockSessions },\n       mockPrivileges,\n     );\n-    // Not using snapshots because of issues with time zones\n     expect(result.comments).toBe(\"This student's name is Alice Betsy\");\n     expect(result.courseId).toBe('dog.gma-demo');\n-    expect(result.courseJoinLink).toBe('http://localhost:4200/web/join?key' +\n+    expect(result.courseJoinLink).toBe(`${window.location.origin}/web/join?key` +\n       '=keyheehee&studentemail=alice.b.tmms%40gmail.tmt&courseid=dog.gma-demo&entitytype=student');\n     expect(result.courseName).toBe('Sample Course 101');\n     expect(result.email).toBe('alice.b.tmms@gmail.tmt');\n-    expect(result.manageAccountLink).toBe('/web/admin/accounts?instructorid=alice.b.tmms.sampleData');\n+    expect(result.manageAccountLink).toBe('/web/admin/accounts'\n+        + '?instructorid=alice.b.tmms.sampleData');", "originalCommit": "01c7573da0d3fd10f2f9baf42d4fc85cd6380c22", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDQwOTEyOA==", "url": "https://github.com/TEAMMATES/teammates/pull/10699#discussion_r484409128", "bodyText": "Might as well standardise to use Collections since I'm assuming it's meant to be immutable\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            allQuestions = new ArrayList<>();\n          \n          \n            \n                            allQuestions = Collections.emptyList();", "author": "madanalogy", "createdAt": "2020-09-07T12:42:23Z", "path": "src/main/java/teammates/logic/core/FeedbackSessionsLogic.java", "diffHunk": "@@ -645,7 +645,12 @@ public SessionResultsBundle getSessionResultsForUser(\n         if (questionId == null) {\n             allQuestions = fqLogic.getFeedbackQuestionsForSession(feedbackSessionName, courseId);\n         } else {\n-            allQuestions = Collections.singletonList(fqLogic.getFeedbackQuestion(questionId));\n+            FeedbackQuestionAttributes fqa = fqLogic.getFeedbackQuestion(questionId);\n+            if (fqa == null) {\n+                allQuestions = new ArrayList<>();", "originalCommit": "5dba79080bc781e9552f2da05bc756b64dd00f69", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "094355fd5ba4ecc3d0af83e829261f306b27bfae", "url": "https://github.com/TEAMMATES/teammates/commit/094355fd5ba4ecc3d0af83e829261f306b27bfae", "message": "Fix download session result function", "committedDate": "2020-09-07T12:47:49Z", "type": "commit"}, {"oid": "1abbb71d0e06ba9899aeabfc1ebefaed639a14c7", "url": "https://github.com/TEAMMATES/teammates/commit/1abbb71d0e06ba9899aeabfc1ebefaed639a14c7", "message": "Use window.location.origin as base URL", "committedDate": "2020-09-07T12:47:49Z", "type": "commit"}, {"oid": "1abbb71d0e06ba9899aeabfc1ebefaed639a14c7", "url": "https://github.com/TEAMMATES/teammates/commit/1abbb71d0e06ba9899aeabfc1ebefaed639a14c7", "message": "Use window.location.origin as base URL", "committedDate": "2020-09-07T12:47:49Z", "type": "forcePushed"}]}