{"pr_number": 143, "pr_title": "DEV-1245 Create a JSON sample source", "pr_createdAt": "2020-04-24T19:04:04Z", "pr_url": "https://github.com/hartwigmedical/pipeline5/pull/143", "timeline": [{"oid": "59d02f3ad591930bfa9fc030ca5bb1a5b1ad27ba", "url": "https://github.com/hartwigmedical/pipeline5/commit/59d02f3ad591930bfa9fc030ca5bb1a5b1ad27ba", "message": "DEV-1245 Create a JSON sample source\n\nCreate a new class JsonSampleSource which parses a JSON representation of the sample/lane/fastq model,\npassing the GCS locations along as paths within the lanes. This combined with the GS upload allows us\nto put fastq files in arbitrary locations.\n\nEliminated the file system upload as its no longer used (local runs should use this new way, or the acc\napi).\n\nAlso eliminated the patient module and some interfaces which didn't really add any value. Included in this\ncommit as it made the addition of the JsonSampleSource more straightforward.", "committedDate": "2020-04-24T19:03:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwNjAzNA==", "url": "https://github.com/hartwigmedical/pipeline5/pull/143#discussion_r414806034", "bodyText": "Could we come up with a name that is more descriptive of its function rather than just indicative of its file format? Like maybe sample_json or something?", "author": "nedleitch", "createdAt": "2020-04-24T19:16:59Z", "path": "cluster/src/main/java/com/hartwig/pipeline/CommandLineOptions.java", "diffHunk": "@@ -64,7 +63,8 @@\n     private static final String CMEK_FLAG = \"cmek\";\n     private static final String SHALLOW_FLAG = \"shallow\";\n     private static final String ZONE_FLAG = \"zone\";\n-    private static final String REF_GENOME_VERSION = \"ref_genome_version\";\n+    private static final String REF_GENOME_VERSION_FLAG = \"ref_genome_version\";\n+    private static final String JSON_FLAG = \"json\";", "originalCommit": "59d02f3ad591930bfa9fc030ca5bb1a5b1ad27ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkwNDY4Ng==", "url": "https://github.com/hartwigmedical/pipeline5/pull/143#discussion_r415904686", "bodyText": "sample_json sounds reasonable. I'll use that.", "author": "pauldwolfe", "createdAt": "2020-04-27T15:19:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwNjAzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgwODQ4MA==", "url": "https://github.com/hartwigmedical/pipeline5/pull/143#discussion_r414808480", "bodyText": "We're going to need to make a \"not applicable\" constant somewhere central...", "author": "nedleitch", "createdAt": "2020-04-24T19:21:42Z", "path": "cluster/src/main/java/com/hartwig/patient/Sample.java", "diffHunk": "@@ -0,0 +1,35 @@\n+package com.hartwig.patient;\n+\n+import java.util.List;\n+\n+import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n+\n+import org.immutables.value.Value;\n+\n+@Value.Immutable\n+@JsonDeserialize(as = ImmutableSample.class)\n+@Value.Style(jdkOnly = true)\n+public interface Sample {\n+\n+    String NOT_APPLICABLE = \"NA\";", "originalCommit": "59d02f3ad591930bfa9fc030ca5bb1a5b1ad27ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b5b7b002b11724d8205922f5072b7a5e14101e8e", "url": "https://github.com/hartwigmedical/pipeline5/commit/b5b7b002b11724d8205922f5072b7a5e14101e8e", "message": "DEV-1245 Set type based on if not set explicitly\n\nThis code was accidentally removed.", "committedDate": "2020-04-27T14:58:10Z", "type": "commit"}, {"oid": "b2547ab5853f1a6ac49b33cdf996b84d6e432ae5", "url": "https://github.com/hartwigmedical/pipeline5/commit/b2547ab5853f1a6ac49b33cdf996b84d6e432ae5", "message": "DEV-1245 Remove type from sample altogether\n\nAs this field is no longer read (the type is decided via other metadata), best just to remove it\nand simplify the JSON representation and remove all name based heuristics.", "committedDate": "2020-04-27T15:12:04Z", "type": "commit"}, {"oid": "cf5ad75b5a24c698b8984b360b736ed0db114531", "url": "https://github.com/hartwigmedical/pipeline5/commit/cf5ad75b5a24c698b8984b360b736ed0db114531", "message": "DEV-1245 Rename field to sample json as per review comments.", "committedDate": "2020-04-27T15:27:09Z", "type": "commit"}, {"oid": "3d9d619d05df99e483e590823effcdd72beb731c", "url": "https://github.com/hartwigmedical/pipeline5/commit/3d9d619d05df99e483e590823effcdd72beb731c", "message": "Merge branch 'master' into DEV-1245", "committedDate": "2020-04-27T15:30:14Z", "type": "commit"}, {"oid": "dff7b0f5e7f64570471511691cf8b395e9ea9c6d", "url": "https://github.com/hartwigmedical/pipeline5/commit/dff7b0f5e7f64570471511691cf8b395e9ea9c6d", "message": "DEV-1245 Merge with master", "committedDate": "2020-04-27T15:45:55Z", "type": "commit"}]}