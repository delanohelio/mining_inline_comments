{"pr_number": 224, "pr_title": "DEV-1643 Register BAI/CRAI as indexes in API", "pr_createdAt": "2020-11-10T16:27:00Z", "pr_url": "https://github.com/hartwigmedical/pipeline5/pull/224", "timeline": [{"oid": "bb32efde23184525a614eba1b7ac5a5d03987716", "url": "https://github.com/hartwigmedical/pipeline5/commit/bb32efde23184525a614eba1b7ac5a5d03987716", "message": "DEV-1643 Register BAI/CRAI with API", "committedDate": "2020-11-10T16:24:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY5ODM0NA==", "url": "https://github.com/hartwigmedical/pipeline5/pull/224#discussion_r520698344", "bodyText": "I think its needs to be bai(bam(metadata.sampleName)", "author": "pauldwolfe", "createdAt": "2020-11-10T16:28:56Z", "path": "cluster/src/main/java/com/hartwig/pipeline/alignment/bwa/BwaAligner.java", "diffHunk": "@@ -160,21 +160,23 @@ public AlignmentOutput run(final SingleSampleRunMetadata metadata) throws Except\n             if (!arguments.outputCram()) {\n                 outputBuilder.addReportComponents(new SingleFileComponent(rootBucket,\n                                 Aligner.NAMESPACE,\n-                                Folder.from(metadata),\n-                                bam(metadata.sampleName()),\n-                                bam(metadata.sampleName()),\n-                                resultsDirectory),\n+                                Folder.from(metadata), bam(metadata.sampleName()), bam(metadata.sampleName()), resultsDirectory),\n                         new SingleFileComponent(rootBucket,\n                                 Aligner.NAMESPACE,\n                                 Folder.from(metadata),\n                                 bai(bam(metadata.sampleName())),\n                                 bai(bam(metadata.sampleName())),\n                                 resultsDirectory))\n                         .addFurtherOperations(new AddDatatypeToFile(DataType.ALIGNED_READS,\n-                                Folder.from(metadata),\n-                                BwaAligner.NAMESPACE,\n-                                bam(metadata.sampleName()),\n-                                metadata.barcode()));\n+                                        Folder.from(metadata),\n+                                        BwaAligner.NAMESPACE,\n+                                        bam(metadata.sampleName()),\n+                                        metadata.barcode()),\n+                                new AddDatatypeToFile(DataType.ALIGNED_READS_INDEX,\n+                                        Folder.from(metadata),\n+                                        BwaAligner.NAMESPACE,\n+                                        bai(metadata.sampleName()),", "originalCommit": "bb32efde23184525a614eba1b7ac5a5d03987716", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY5ODc4MA==", "url": "https://github.com/hartwigmedical/pipeline5/pull/224#discussion_r520698780", "bodyText": "is this formatted?", "author": "pauldwolfe", "createdAt": "2020-11-10T16:29:28Z", "path": "cluster/src/main/java/com/hartwig/pipeline/alignment/bwa/BwaAligner.java", "diffHunk": "@@ -160,21 +160,23 @@ public AlignmentOutput run(final SingleSampleRunMetadata metadata) throws Except\n             if (!arguments.outputCram()) {\n                 outputBuilder.addReportComponents(new SingleFileComponent(rootBucket,\n                                 Aligner.NAMESPACE,\n-                                Folder.from(metadata),\n-                                bam(metadata.sampleName()),\n-                                bam(metadata.sampleName()),\n-                                resultsDirectory),\n+                                Folder.from(metadata), bam(metadata.sampleName()), bam(metadata.sampleName()), resultsDirectory),", "originalCommit": "bb32efde23184525a614eba1b7ac5a5d03987716", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ed250f2a872c239052868281cf166f537b1984f3", "url": "https://github.com/hartwigmedical/pipeline5/commit/ed250f2a872c239052868281cf166f537b1984f3", "message": "DEV-1643 Correct BAI filename", "committedDate": "2020-11-10T16:34:25Z", "type": "commit"}]}