{"pr_number": 1289, "pr_title": "HDDS-4039. Reduce the number of fields in hdds.proto to improve performance", "pr_createdAt": "2020-08-05T01:24:08Z", "pr_url": "https://github.com/apache/ozone/pull/1289", "timeline": [{"oid": "f5b018f05636c598264c5ebdbe5f60fc7c384a29", "url": "https://github.com/apache/ozone/commit/f5b018f05636c598264c5ebdbe5f60fc7c384a29", "message": "HDDS-4039. Reduce the number of fields in hdds.proto to improve performance", "committedDate": "2020-08-05T01:28:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4NTcyNQ==", "url": "https://github.com/apache/ozone/pull/1289#discussion_r467085725", "bodyText": "@runitao Can we mark these fields as 'deprecated', and not set them in the code, rather than removing them. This will likely break backward compatibility when we have a case to add a new field in the future.", "author": "avijayanhwx", "createdAt": "2020-08-07T14:43:47Z", "path": "hadoop-hdds/interface-client/src/main/proto/hdds.proto", "diffHunk": "@@ -43,14 +43,22 @@ message DatanodeDetailsProto {\n     // network name, can be Ip address or host name, depends\n     optional string networkName = 6;\n     optional string networkLocation = 7; // Network topology location\n-    optional string version = 8;         // Datanode version", "originalCommit": "f5b018f05636c598264c5ebdbe5f60fc7c384a29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE3OTI0Mw==", "url": "https://github.com/apache/ozone/pull/1289#discussion_r467179243", "bodyText": "@avijayanhwx  Thanks for review. No problem. But I need to confirm.\nShould I only keep version and setupTime(these two fields added in 0.6.0) or keep these four fields?", "author": "runitao", "createdAt": "2020-08-07T17:39:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4NTcyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIwMTc0NQ==", "url": "https://github.com/apache/ozone/pull/1289#discussion_r467201745", "bodyText": "@runitao When were the others fields added? Were they part of 0.6.0 release? The rule is if there is a released version with a proto field, then we should not change/remove it.", "author": "avijayanhwx", "createdAt": "2020-08-07T18:26:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4NTcyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIwNTU0Nw==", "url": "https://github.com/apache/ozone/pull/1289#discussion_r467205547", "bodyText": "I got it, I will keep version and setupTime fields.", "author": "runitao", "createdAt": "2020-08-07T18:34:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4NTcyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIyOTk1Mg==", "url": "https://github.com/apache/ozone/pull/1289#discussion_r467229952", "bodyText": "Fix that, PTAL @avijayanhwx, thanks.", "author": "runitao", "createdAt": "2020-08-07T19:29:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4NTcyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA2NTg4Mg==", "url": "https://github.com/apache/ozone/pull/1289#discussion_r468065882", "bodyText": "@runitao HDDS-3798 is not a must fix for GA, and hence I will revert it in branch ozone-0.6.0. That way, you can use this patch to fix it cleanly. @ChenSammi Is that OK with you?", "author": "avijayanhwx", "createdAt": "2020-08-10T17:32:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4NTcyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNTY1MA==", "url": "https://github.com/apache/ozone/pull/1289#discussion_r469035650", "bodyText": "@avijayanhwx Great. The code will be more clean, I have removed the four fields from DatanodeDetailsProto.", "author": "runitao", "createdAt": "2020-08-12T06:36:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA4NTcyNQ=="}], "type": "inlineReview"}, {"oid": "7ad6f39008f5dca22ca6cd350eac837d941300cd", "url": "https://github.com/apache/ozone/commit/7ad6f39008f5dca22ca6cd350eac837d941300cd", "message": "HDDS-4039. refactor", "committedDate": "2020-08-07T17:17:52Z", "type": "forcePushed"}, {"oid": "79615220d036dca70f843162030122fdbedc914a", "url": "https://github.com/apache/ozone/commit/79615220d036dca70f843162030122fdbedc914a", "message": "HDDS-4039. Address the review", "committedDate": "2020-09-12T23:52:01Z", "type": "forcePushed"}, {"oid": "1daa2c41a505359424cbb63e5c2443723c1fa877", "url": "https://github.com/apache/ozone/commit/1daa2c41a505359424cbb63e5c2443723c1fa877", "message": "HDDS-4039. Reduce the number of fields in hdds.proto to improve performance", "committedDate": "2020-09-14T02:28:37Z", "type": "commit"}, {"oid": "ff7b46c0bc1d40e4cd279c4c69b9e9132751fc2f", "url": "https://github.com/apache/ozone/commit/ff7b46c0bc1d40e4cd279c4c69b9e9132751fc2f", "message": "HDDS-4039. refactor", "committedDate": "2020-09-14T02:28:37Z", "type": "commit"}, {"oid": "d55c2645346b8511cb18c0965fe91ebbf837b9eb", "url": "https://github.com/apache/ozone/commit/d55c2645346b8511cb18c0965fe91ebbf837b9eb", "message": "HDDS-4039. Revert the format of some lines", "committedDate": "2020-09-14T02:28:37Z", "type": "commit"}, {"oid": "5053e96d44a7b053e7f3062ea2e0ea3d90998675", "url": "https://github.com/apache/ozone/commit/5053e96d44a7b053e7f3062ea2e0ea3d90998675", "message": "HDDS-4039. Fix checkstyle", "committedDate": "2020-09-14T02:28:38Z", "type": "commit"}, {"oid": "1488792fe072037ed73394bd1fb627eee9ab60b7", "url": "https://github.com/apache/ozone/commit/1488792fe072037ed73394bd1fb627eee9ab60b7", "message": "HDDS-4039. Fix unittest and review", "committedDate": "2020-09-14T02:28:38Z", "type": "commit"}, {"oid": "9d53419d8073e0cb519a78ae27825d19c11cf3fe", "url": "https://github.com/apache/ozone/commit/9d53419d8073e0cb519a78ae27825d19c11cf3fe", "message": "HDDS-4039. Address the review", "committedDate": "2020-09-14T02:28:38Z", "type": "commit"}, {"oid": "61df4ada8c285b26d18a4a072b956ff166879b66", "url": "https://github.com/apache/ozone/commit/61df4ada8c285b26d18a4a072b956ff166879b66", "message": "trigger new CI check", "committedDate": "2020-09-14T02:29:00Z", "type": "commit"}, {"oid": "61df4ada8c285b26d18a4a072b956ff166879b66", "url": "https://github.com/apache/ozone/commit/61df4ada8c285b26d18a4a072b956ff166879b66", "message": "trigger new CI check", "committedDate": "2020-09-14T02:29:00Z", "type": "forcePushed"}]}