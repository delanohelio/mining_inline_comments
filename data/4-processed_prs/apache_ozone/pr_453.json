{"pr_number": 453, "pr_title": "HDDS-2897. Ozone recon Start failed due to Kerberos principal not bei\u2026", "pr_createdAt": "2020-01-17T00:29:03Z", "pr_url": "https://github.com/apache/ozone/pull/453", "timeline": [{"oid": "afc66e575001ea15f3fe5d763608f1f17b5d8f28", "url": "https://github.com/apache/ozone/commit/afc66e575001ea15f3fe5d763608f1f17b5d8f28", "message": "HDDS-2897. Ozone recon Start failed due to Kerberos principal not being found.", "committedDate": "2020-01-17T00:26:51Z", "type": "commit"}, {"oid": "760e665c88ea0b267a42608932ded42ea9e4a76b", "url": "https://github.com/apache/ozone/commit/760e665c88ea0b267a42608932ded42ea9e4a76b", "message": "HDDS-2897. Add basic robot tests for recon in unsecure and secure cluster.", "committedDate": "2020-01-17T06:35:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgxOTA5Mw==", "url": "https://github.com/apache/ozone/pull/453#discussion_r367819093", "bodyText": "The robot tests look good, but I think we could get rid of the duplication.  security/ozone-secure-recon.robot works in both secure and unsecure env.  So I propose:\n\nrename security/ozone-secure-recon.robot to recon/recon-api.robot (ie. get rid of the unsecure-only test, but keep its name and location)\nadd execute_robot_test recon recon in ozonesecure/test.sh, too\n\nThis way the same test would be executed in both secure and unsecure env, similar to eg. s3 tests:\nhttps://github.com/apache/hadoop-ozone/blob/1caf1e30865aa2b380a7fca6d87f5ae8034fee4e/hadoop-ozone/dist/src/main/compose/ozone/test.sh#L39\nhttps://github.com/apache/hadoop-ozone/blob/1caf1e30865aa2b380a7fca6d87f5ae8034fee4e/hadoop-ozone/dist/src/main/compose/ozonesecure/test.sh#L36", "author": "adoroszlai", "createdAt": "2020-01-17T08:33:52Z", "path": "hadoop-ozone/dist/src/main/smoketest/security/ozone-secure-recon.robot", "diffHunk": "@@ -0,0 +1,30 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+*** Settings ***\n+Documentation       Smoke test to start cluster with docker-compose environments.\n+Library             OperatingSystem\n+Library             String\n+Library             BuiltIn\n+Resource            ../commonlib.robot\n+\n+*** Variables ***\n+${ENDPOINT_URL}     http://recon:9888\n+\n+*** Test Cases ***\n+Recon REST API\n+    Run Keyword if      '${SECURITY_ENABLED}' == 'true'     Kinit HTTP user\n+    ${result} =         Execute                             curl --negotiate -u : -v ${ENDPOINT_URL}/api/containers\n+                        Should contain      ${result}       containers", "originalCommit": "760e665c88ea0b267a42608932ded42ea9e4a76b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA4NzczMA==", "url": "https://github.com/apache/ozone/pull/453#discussion_r368087730", "bodyText": "@adoroszlai Thank you for the suggestion. I have addressed it.", "author": "avijayanhwx", "createdAt": "2020-01-17T18:59:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzgxOTA5Mw=="}], "type": "inlineReview"}, {"oid": "8fb368b208e5687c5904d2e748c055511298f432", "url": "https://github.com/apache/ozone/commit/8fb368b208e5687c5904d2e748c055511298f432", "message": "HDDS-2897. Use same robot test for recon secure and unsecure recon.", "committedDate": "2020-01-17T18:59:13Z", "type": "commit"}]}