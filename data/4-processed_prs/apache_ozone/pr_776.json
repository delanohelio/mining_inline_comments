{"pr_number": 776, "pr_title": "HDDS-3348. scmcli container info command shows the wrong container state.", "pr_createdAt": "2020-04-06T19:53:59Z", "pr_url": "https://github.com/apache/ozone/pull/776", "timeline": [{"oid": "994510ad5ccc11f145c2d1d6e773c9ea8e680a09", "url": "https://github.com/apache/ozone/commit/994510ad5ccc11f145c2d1d6e773c9ea8e680a09", "message": "HDDS-3348. scmcli container info command shows the wrong container state.", "committedDate": "2020-04-06T19:56:19Z", "type": "forcePushed"}, {"oid": "80fec30524031d6d4251d6bfe933418f4f121fbf", "url": "https://github.com/apache/ozone/commit/80fec30524031d6d4251d6bfe933418f4f121fbf", "message": "HDDS-3348. scmcli container info command shows the wrong container state.", "committedDate": "2020-04-06T20:01:53Z", "type": "forcePushed"}, {"oid": "1dcfc4ff2accf99d99c10e9c12986533c3c54047", "url": "https://github.com/apache/ozone/commit/1dcfc4ff2accf99d99c10e9c12986533c3c54047", "message": "HDDS-3348. scmcli container info command shows the wrong container state.", "committedDate": "2020-04-06T20:03:06Z", "type": "commit"}, {"oid": "1dcfc4ff2accf99d99c10e9c12986533c3c54047", "url": "https://github.com/apache/ozone/commit/1dcfc4ff2accf99d99c10e9c12986533c3c54047", "message": "HDDS-3348. scmcli container info command shows the wrong container state.", "committedDate": "2020-04-06T20:03:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM5NDA4NA==", "url": "https://github.com/apache/ozone/pull/776#discussion_r404394084", "bodyText": "We don't want this extra information  about 'ContainerPath' & 'Datanodes' anymore?", "author": "avijayanhwx", "createdAt": "2020-04-06T21:17:59Z", "path": "hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/container/InfoSubcommand.java", "diffHunk": "@@ -57,26 +55,13 @@\n   @Override\n   public Void call() throws Exception {\n     try (ScmClient scmClient = parent.getParent().createScmClient()) {\n-      ContainerWithPipeline container = scmClient.\n+      final ContainerWithPipeline container = scmClient.\n           getContainerWithPipeline(containerID);\n       Preconditions.checkNotNull(container, \"Container cannot be null\");\n \n-      ContainerDataProto containerData = scmClient.readContainer(container\n-          .getContainerInfo().getContainerID(), container.getPipeline());\n-\n       // Print container report info.\n       LOG.info(\"Container id: {}\", containerID);\n-      String openStatus =\n-          containerData.getState() == ContainerDataProto.State.OPEN ? \"OPEN\" :\n-              \"CLOSED\";\n-      LOG.info(\"Container State: {}\", openStatus);\n-      LOG.info(\"Container Path: {}\", containerData.getContainerPath());\n-\n-      // Output meta data.", "originalCommit": "1dcfc4ff2accf99d99c10e9c12986533c3c54047", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc0ODg1OQ==", "url": "https://github.com/apache/ozone/pull/776#discussion_r404748859", "bodyText": "We were printing the container path from one of the datanode, this could be misleading if datanodes are configured with a different path for the data directory. It's better to not print the container path in this context.\nPrinting Datanodes are not removed, it's still printed.", "author": "nandakumar131", "createdAt": "2020-04-07T11:52:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM5NDA4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyNTcxNg==", "url": "https://github.com/apache/ozone/pull/776#discussion_r404525716", "bodyText": "Print pipeline information of the container will be useful, can we add that info.", "author": "bharatviswa504", "createdAt": "2020-04-07T04:19:11Z", "path": "hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/container/InfoSubcommand.java", "diffHunk": "@@ -57,26 +55,13 @@\n   @Override\n   public Void call() throws Exception {\n     try (ScmClient scmClient = parent.getParent().createScmClient()) {\n-      ContainerWithPipeline container = scmClient.\n+      final ContainerWithPipeline container = scmClient.", "originalCommit": "1dcfc4ff2accf99d99c10e9c12986533c3c54047", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "09c92ee21dea5c832114e938dae42ba261f6b210", "url": "https://github.com/apache/ozone/commit/09c92ee21dea5c832114e938dae42ba261f6b210", "message": "HDDS-3348. Added PipelineId as part of the output.", "committedDate": "2020-04-07T11:54:09Z", "type": "commit"}]}