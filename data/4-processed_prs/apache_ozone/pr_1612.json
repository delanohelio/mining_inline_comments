{"pr_number": 1612, "pr_title": "HDDS-4497. Recon File Size Count task throws SQL Exception.", "pr_createdAt": "2020-11-23T19:23:07Z", "pr_url": "https://github.com/apache/ozone/pull/1612", "timeline": [{"oid": "1caf778bec945f059bbb5c2c3d172946b993bd01", "url": "https://github.com/apache/ozone/commit/1caf778bec945f059bbb5c2c3d172946b993bd01", "message": "HDDS-4497. Recon File Size Count task throws SQL Exception.", "committedDate": "2020-11-23T19:20:05Z", "type": "commit"}, {"oid": "5d34cadee644e4bb6b0d5dffcb1687aeea5701f6", "url": "https://github.com/apache/ozone/commit/5d34cadee644e4bb6b0d5dffcb1687aeea5701f6", "message": "Checkstyle fix.", "committedDate": "2020-11-23T19:21:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk4MDk2Ng==", "url": "https://github.com/apache/ozone/pull/1612#discussion_r528980966", "bodyText": "Why does truncate not work?", "author": "swagle", "createdAt": "2020-11-23T20:37:28Z", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/FileSizeCountTask.java", "diffHunk": "@@ -96,7 +96,9 @@ private static int nextClosestPowerIndexOfTwo(long dataSize) {\n       return new ImmutablePair<>(getTaskName(), false);\n     }\n     // Truncate table before inserting new rows\n-    dslContext.truncate(FILE_COUNT_BY_SIZE);\n+    int execute = dslContext.delete(FILE_COUNT_BY_SIZE).execute();", "originalCommit": "5d34cadee644e4bb6b0d5dffcb1687aeea5701f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk4NDQ2OQ==", "url": "https://github.com/apache/ozone/pull/1612#discussion_r528984469", "bodyText": "From Jooq doc.\n  * Most dialects implement the <code>TRUNCATE</code> statement. If it is not * supported, it is emulated using an equivalent <code>DELETE</code> * statement. This is particularly true for these dialects: * <ul> * <li> {@link SQLDialect#FIREBIRD}</li> * <li> {@link SQLDialect#INGRES}</li> * <li> {@link SQLDialect#SQLITE}</li> * </ul>", "author": "avijayanhwx", "createdAt": "2020-11-23T20:44:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODk4MDk2Ng=="}], "type": "inlineReview"}, {"oid": "4225eefd11592d4a3bd91393d876037e20e25353", "url": "https://github.com/apache/ozone/commit/4225eefd11592d4a3bd91393d876037e20e25353", "message": "trigger new CI check", "committedDate": "2020-11-23T22:25:06Z", "type": "commit"}, {"oid": "866c3c8f9a629e78bd2534f8d32d20467be07648", "url": "https://github.com/apache/ozone/commit/866c3c8f9a629e78bd2534f8d32d20467be07648", "message": "Move Log line to generic class.", "committedDate": "2020-11-23T22:26:59Z", "type": "commit"}]}