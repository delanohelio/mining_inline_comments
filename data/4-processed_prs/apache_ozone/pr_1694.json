{"pr_number": 1694, "pr_title": "HDDS-3701. Change Close container exception logging to debug in ContainerUtils#logAndReturnError", "pr_createdAt": "2020-12-12T06:58:51Z", "pr_url": "https://github.com/apache/ozone/pull/1694", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU4NDA4Nw==", "url": "https://github.com/apache/ozone/pull/1694#discussion_r541584087", "bodyText": "Nit: Adding isDebugEnabled() check would let us avoid some unnecessary operations.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  log.debug(logInfo, request.getCmdType(), request.getTraceID(),\n          \n          \n            \n                      ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);\n          \n          \n            \n                  if (log.isDebugEnabled()) {\n          \n          \n            \n                    log.debug(logInfo, request.getCmdType(), request.getTraceID(),\n          \n          \n            \n                        ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);\n          \n          \n            \n                  }", "author": "adoroszlai", "createdAt": "2020-12-12T14:16:14Z", "path": "hadoop-hdds/container-service/src/main/java/org/apache/hadoop/ozone/container/common/helpers/ContainerUtils.java", "diffHunk": "@@ -77,8 +78,13 @@ public static ContainerCommandResponseProto logAndReturnError(\n       ContainerCommandRequestProto request) {\n     String logInfo = \"Operation: {} , Trace ID: {} , Message: {} , \" +\n         \"Result: {} , StorageContainerException Occurred.\";\n-    log.info(logInfo, request.getCmdType(), request.getTraceID(),\n-        ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);\n+    if (ex.getResult() == CLOSED_CONTAINER_IO) {\n+      log.debug(logInfo, request.getCmdType(), request.getTraceID(),\n+          ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);", "originalCommit": "6a5f5bc2e9a270f476ffd63ac0d25b5b86aaf37d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjUxNDA0Mg==", "url": "https://github.com/apache/ozone/pull/1694#discussion_r546514042", "bodyText": "Its better to add debug for CONTAINER_NOT_OPEN as well.", "author": "bshashikant", "createdAt": "2020-12-21T05:20:35Z", "path": "hadoop-hdds/container-service/src/main/java/org/apache/hadoop/ozone/container/common/helpers/ContainerUtils.java", "diffHunk": "@@ -77,8 +78,15 @@ public static ContainerCommandResponseProto logAndReturnError(\n       ContainerCommandRequestProto request) {\n     String logInfo = \"Operation: {} , Trace ID: {} , Message: {} , \" +\n         \"Result: {} , StorageContainerException Occurred.\";\n-    log.info(logInfo, request.getCmdType(), request.getTraceID(),\n-        ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);\n+    if (ex.getResult() == CLOSED_CONTAINER_IO) {", "originalCommit": "d7c12df094b2e3636802485d13b11b305b49dd3e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjUzMDc1Ng==", "url": "https://github.com/apache/ozone/pull/1694#discussion_r546530756", "bodyText": "Thanks @bshashikant for comment, I have update it.", "author": "flirmnave", "createdAt": "2020-12-21T06:28:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjUxNDA0Mg=="}], "type": "inlineReview"}, {"oid": "7dc4cbee427b2f8f6d171f08fdc3c629191ae8f1", "url": "https://github.com/apache/ozone/commit/7dc4cbee427b2f8f6d171f08fdc3c629191ae8f1", "message": "HDDS-3701. Change Close container exception logging to debug in ContainerUtils#logAndReturnError", "committedDate": "2020-12-21T06:13:28Z", "type": "commit"}, {"oid": "7e38017eb9550dad14478ef4edd72e364f24fc0a", "url": "https://github.com/apache/ozone/commit/7e38017eb9550dad14478ef4edd72e364f24fc0a", "message": "retest.", "committedDate": "2020-12-21T06:13:28Z", "type": "commit"}, {"oid": "891d562e1e5b7f4088b7188a45cbb65dc48c0b5d", "url": "https://github.com/apache/ozone/commit/891d562e1e5b7f4088b7188a45cbb65dc48c0b5d", "message": "Adding isDebugEnabled() check to avoid some unnecessary operations.\n\nCo-authored-by: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>", "committedDate": "2020-12-21T06:13:29Z", "type": "commit"}, {"oid": "af5e5ba306b16f827c6b633e07d195886bf95cfb", "url": "https://github.com/apache/ozone/commit/af5e5ba306b16f827c6b633e07d195886bf95cfb", "message": "retest.", "committedDate": "2020-12-21T06:13:29Z", "type": "commit"}, {"oid": "54e1cd74ff4dd6b53588e39a8c66ff0afca125e0", "url": "https://github.com/apache/ozone/commit/54e1cd74ff4dd6b53588e39a8c66ff0afca125e0", "message": "Add CONTAINER_NOT_OPEN to debug log level.", "committedDate": "2020-12-21T06:23:57Z", "type": "commit"}, {"oid": "54e1cd74ff4dd6b53588e39a8c66ff0afca125e0", "url": "https://github.com/apache/ozone/commit/54e1cd74ff4dd6b53588e39a8c66ff0afca125e0", "message": "Add CONTAINER_NOT_OPEN to debug log level.", "committedDate": "2020-12-21T06:23:57Z", "type": "forcePushed"}, {"oid": "4b3900d81f95ebd6329d7093de6f4c5fe8e0d75f", "url": "https://github.com/apache/ozone/commit/4b3900d81f95ebd6329d7093de6f4c5fe8e0d75f", "message": "retest.", "committedDate": "2020-12-21T11:48:44Z", "type": "commit"}]}