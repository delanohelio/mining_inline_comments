{"pr_number": 1136, "pr_title": "HDDS-3798. Collect more info about DN in recon web", "pr_createdAt": "2020-06-27T15:51:00Z", "pr_url": "https://github.com/apache/ozone/pull/1136", "timeline": [{"oid": "ad89743b4baf544fef25b725a3dec493bb1785c0", "url": "https://github.com/apache/ozone/commit/ad89743b4baf544fef25b725a3dec493bb1785c0", "message": "HDDS-3798. Collect more info about DN in recon web", "committedDate": "2020-07-05T07:55:35Z", "type": "commit"}, {"oid": "40b0e065a3fd9ef21ae6a3d1122d7160903836c4", "url": "https://github.com/apache/ozone/commit/40b0e065a3fd9ef21ae6a3d1122d7160903836c4", "message": "HDDS-3798. fix checkstyle and the zone of setup time", "committedDate": "2020-07-05T07:55:35Z", "type": "commit"}, {"oid": "6b8d1a4187309a3ccc3cf703bd8fbf8b29f29466", "url": "https://github.com/apache/ozone/commit/6b8d1a4187309a3ccc3cf703bd8fbf8b29f29466", "message": "HDDS-3798. add a multi-select dropdown to hide/show some columns", "committedDate": "2020-07-05T07:55:35Z", "type": "commit"}, {"oid": "354d4c27d7cb32eea3068381cf478afe352e73ab", "url": "https://github.com/apache/ozone/commit/354d4c27d7cb32eea3068381cf478afe352e73ab", "message": "HDDS-3798. fix conflict", "committedDate": "2020-07-05T08:02:24Z", "type": "commit"}, {"oid": "354d4c27d7cb32eea3068381cf478afe352e73ab", "url": "https://github.com/apache/ozone/commit/354d4c27d7cb32eea3068381cf478afe352e73ab", "message": "HDDS-3798. fix conflict", "committedDate": "2020-07-05T08:02:24Z", "type": "forcePushed"}, {"oid": "18a90ce06a59478960186985b884f11de1e6428b", "url": "https://github.com/apache/ozone/commit/18a90ce06a59478960186985b884f11de1e6428b", "message": "HDDS-3798. revert some unrelated fields", "committedDate": "2020-07-05T14:26:51Z", "type": "commit"}, {"oid": "18a90ce06a59478960186985b884f11de1e6428b", "url": "https://github.com/apache/ozone/commit/18a90ce06a59478960186985b884f11de1e6428b", "message": "HDDS-3798. revert some unrelated fields", "committedDate": "2020-07-05T14:26:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkxNDk5Mg==", "url": "https://github.com/apache/ozone/pull/1136#discussion_r449914992", "bodyText": "nit: dangling comma\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    lastUpdated: Number(moment()),\n          \n          \n            \n                    lastUpdated: Number(moment())", "author": "vivekratnavel", "createdAt": "2020-07-05T20:20:20Z", "path": "hadoop-ozone/recon/src/main/resources/webapps/recon/ozone-recon-web/src/views/datanodes/datanodes.tsx", "diffHunk": "@@ -201,14 +254,23 @@ export class Datanodes extends React.Component<Record<string, object>, IDatanode\n           storageRemaining: datanode.storageReport.remaining,\n           pipelines: datanode.pipelines,\n           containers: datanode.containers,\n-          leaderCount: datanode.leaderCount\n+          leaderCount: datanode.leaderCount,\n+          version: datanode.version,\n+          setupTime: datanode.setupTime\n         };\n       });\n+      const selectedColumns: IOption[] = COLUMNS.filter(column => column.isVisible).map(column => ({\n+        label: column.key,\n+        value: column.key\n+      }))\n+      \n       this.setState({\n         loading: false,\n         dataSource,\n         totalCount,\n-        lastUpdated: Number(moment())\n+        lastUpdated: Number(moment()),", "originalCommit": "18a90ce06a59478960186985b884f11de1e6428b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk1MjY0MA==", "url": "https://github.com/apache/ozone/pull/1136#discussion_r449952640", "bodyText": "fixed", "author": "runitao", "createdAt": "2020-07-06T02:13:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkxNDk5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkxNTUzMQ==", "url": "https://github.com/apache/ozone/pull/1136#discussion_r449915531", "bodyText": "nit: compare value instead of label\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          selectedColumns.some((e) => e.label === column.key)\n          \n          \n            \n                          selectedColumns.some((e) => e.value === column.key)", "author": "vivekratnavel", "createdAt": "2020-07-05T20:27:40Z", "path": "hadoop-ozone/recon/src/main/resources/webapps/recon/ozone-recon-web/src/views/datanodes/datanodes.tsx", "diffHunk": "@@ -233,20 +295,48 @@ export class Datanodes extends React.Component<Record<string, object>, IDatanode\n   };\n \n   render() {\n-    const {dataSource, loading, totalCount, lastUpdated} = this.state;\n+    const {dataSource, loading, totalCount, lastUpdated, selectedColumns, columnOptions} = this.state;\n     const paginationConfig: PaginationConfig = {\n       showTotal: (total: number, range) => `${range[0]}-${range[1]} of ${total} datanodes`,\n       showSizeChanger: true,\n       onShowSizeChange: this.onShowSizeChange\n     };\n     return (\n-      <div className='datanodes-container'>\n-        <div className='page-header'>\n+      <div className=\"datanodes-container\">\n+        <div className=\"page-header\">\n           Datanodes ({totalCount})\n-          <AutoReloadPanel isLoading={loading} lastUpdated={lastUpdated} togglePolling={this.autoReload.handleAutoReloadToggle} onReload={this._loadData}/>\n+          <div className=\"filter-block\">\n+            <MultiSelect\n+              maxShowValues={3}\n+              allowSelectAll\n+              isMulti\n+              className=\"multi-select-container\"\n+              options={columnOptions}\n+              closeMenuOnSelect={false}\n+              hideSelectedOptions={false}\n+              value={selectedColumns}\n+              allOption={allColumnsOption}\n+              onChange={this._handleColumnChange}\n+            /> Columns\n+          </div>\n+          <AutoReloadPanel\n+            isLoading={loading}\n+            lastUpdated={lastUpdated}\n+            togglePolling={this.autoReload.handleAutoReloadToggle}\n+            onReload={this._loadData}\n+          />\n         </div>\n-        <div className='content-div'>\n-          <Table dataSource={dataSource} columns={COLUMNS} loading={loading} pagination={paginationConfig} rowKey='hostname'/>\n+\n+        <div className=\"content-div\">\n+          <Table\n+            dataSource={dataSource}\n+            columns={COLUMNS.filter((column) =>\n+              selectedColumns.some((e) => e.label === column.key)", "originalCommit": "18a90ce06a59478960186985b884f11de1e6428b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk1MjY3NA==", "url": "https://github.com/apache/ozone/pull/1136#discussion_r449952674", "bodyText": "fixed", "author": "runitao", "createdAt": "2020-07-06T02:13:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkxNTUzMQ=="}], "type": "inlineReview"}, {"oid": "3be240ca336c84c67d46ef83d6e6b7489ef40525", "url": "https://github.com/apache/ozone/commit/3be240ca336c84c67d46ef83d6e6b7489ef40525", "message": "HDDS-3798. fix lint errors", "committedDate": "2020-07-06T02:12:22Z", "type": "commit"}, {"oid": "5644e6ae2536c748d113cfcbb25b4fa56964ce7f", "url": "https://github.com/apache/ozone/commit/5644e6ae2536c748d113cfcbb25b4fa56964ce7f", "message": "Merge branch 'master' into hdds-3798", "committedDate": "2020-07-09T08:16:13Z", "type": "commit"}, {"oid": "006ed2d0f9f809b246f01bda5721f07914c5e6e8", "url": "https://github.com/apache/ozone/commit/006ed2d0f9f809b246f01bda5721f07914c5e6e8", "message": "trigger new CI check", "committedDate": "2020-07-09T10:32:02Z", "type": "commit"}, {"oid": "210fb9b8bbc4451fc90275608853aebe5400c0fe", "url": "https://github.com/apache/ozone/commit/210fb9b8bbc4451fc90275608853aebe5400c0fe", "message": "Merge branch 'master' into hdds-3798", "committedDate": "2020-07-13T12:26:00Z", "type": "commit"}]}