{"pr_number": 1306, "pr_title": "HDDS-4051. Remove whitelist/blacklist terminology from Ozone", "pr_createdAt": "2020-08-09T04:31:30Z", "pr_url": "https://github.com/apache/ozone/pull/1306", "timeline": [{"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "url": "https://github.com/apache/ozone/commit/743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "message": "HDDS-4051. Remove whitelist/blacklist terminology from Ozone", "committedDate": "2020-08-09T04:27:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTc1MQ==", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545751", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Blocklist tasks that failed reprocess step more than threshold times.\n          \n          \n            \n               * Ignore tasks that failed reprocess step more than threshold times.", "author": "adoroszlai", "createdAt": "2020-08-09T06:57:10Z", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -149,15 +149,15 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n   }\n \n   /**\n-   * Blacklist tasks that failed reprocess step more than threshold times.\n+   * Blocklist tasks that failed reprocess step more than threshold times.", "originalCommit": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTc1Ng==", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545756", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private void blocklistFailedTasks(List<String> failedTasks) {\n          \n          \n            \n              private void ignoreFailedTasks(List<String> failedTasks) {", "author": "adoroszlai", "createdAt": "2020-08-09T06:57:21Z", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -149,15 +149,15 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n   }\n \n   /**\n-   * Blacklist tasks that failed reprocess step more than threshold times.\n+   * Blocklist tasks that failed reprocess step more than threshold times.\n    * @param failedTasks list of failed tasks.\n    */\n-  private void blacklistFailedTasks(List<String> failedTasks) {\n+  private void blocklistFailedTasks(List<String> failedTasks) {", "originalCommit": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTc4Mg==", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545782", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    LOG.info(\"Blocklisting Task since it failed retry and \" +\n          \n          \n            \n                    LOG.info(\"Ignoring task since it failed retry and \" +", "author": "adoroszlai", "createdAt": "2020-08-09T06:57:41Z", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -149,15 +149,15 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n   }\n \n   /**\n-   * Blacklist tasks that failed reprocess step more than threshold times.\n+   * Blocklist tasks that failed reprocess step more than threshold times.\n    * @param failedTasks list of failed tasks.\n    */\n-  private void blacklistFailedTasks(List<String> failedTasks) {\n+  private void blocklistFailedTasks(List<String> failedTasks) {\n     for (String taskName : failedTasks) {\n       LOG.info(\"Reprocess step failed for task {}.\", taskName);\n       if (taskFailureCounter.get(taskName).incrementAndGet() >\n           TASK_FAILURE_THRESHOLD) {\n-        LOG.info(\"Blacklisting Task since it failed retry and \" +\n+        LOG.info(\"Blocklisting Task since it failed retry and \" +", "originalCommit": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTgwOQ==", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545809", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void testBadBehavedTaskBlocklisting() throws Exception {\n          \n          \n            \n              public void testBadBehavedTaskIsIgnored() throws Exception {", "author": "adoroszlai", "createdAt": "2020-08-09T06:58:02Z", "path": "hadoop-ozone/recon/src/test/java/org/apache/hadoop/ozone/recon/tasks/TestReconTaskControllerImpl.java", "diffHunk": "@@ -131,7 +131,7 @@ public void testFailedTaskRetryLogic() throws Exception {\n   }\n \n   @Test\n-  public void testBadBehavedTaskBlacklisting() throws Exception {\n+  public void testBadBehavedTaskBlocklisting() throws Exception {", "originalCommit": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTgxNA==", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545814", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                //Should be blocklisted now.\n          \n          \n            \n                //Should be ignored now.", "author": "adoroszlai", "createdAt": "2020-08-09T06:58:08Z", "path": "hadoop-ozone/recon/src/test/java/org/apache/hadoop/ozone/recon/tasks/TestReconTaskControllerImpl.java", "diffHunk": "@@ -151,7 +151,7 @@ public void testBadBehavedTaskBlacklisting() throws Exception {\n           .get(dummyReconDBTask.getTaskName()));\n     }\n \n-    //Should be blacklisted now.\n+    //Should be blocklisted now.", "originalCommit": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTg1OA==", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545858", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      blocklistFailedTasks(reprocessFailedTasks);\n          \n          \n            \n                      ignoreFailedTasks(reprocessFailedTasks);", "author": "adoroszlai", "createdAt": "2020-08-09T06:58:40Z", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -140,7 +140,7 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n           results = executorService.invokeAll(tasks);\n           List<String> reprocessFailedTasks =\n               processTaskResults(results, events);\n-          blacklistFailedTasks(reprocessFailedTasks);\n+          blocklistFailedTasks(reprocessFailedTasks);", "originalCommit": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTg4Ng==", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545886", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * (blocklisted).\n          \n          \n            \n               * (ignored).", "author": "adoroszlai", "createdAt": "2020-08-09T06:59:06Z", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -94,7 +94,7 @@ public void registerTask(ReconOmTask task) {\n    * For every registered task, we try process step twice and then reprocess\n    * once (if process failed twice) to absorb the events. If a task has failed\n    * reprocess call more than 2 times across events, it is unregistered\n-   * (blacklisted).\n+   * (blocklisted).", "originalCommit": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bc00022548a5977a63e04575e313018f7e9b757a", "url": "https://github.com/apache/ozone/commit/bc00022548a5977a63e04575e313018f7e9b757a", "message": "Apply suggestions from code review\n\nCo-authored-by: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>", "committedDate": "2020-08-09T19:27:53Z", "type": "commit"}]}