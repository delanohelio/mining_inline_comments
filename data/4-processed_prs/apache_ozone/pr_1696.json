{"pr_number": 1696, "pr_title": "HDDS-4582 Update `quota in counts` to `quota in namespace`", "pr_createdAt": "2020-12-13T03:24:21Z", "pr_url": "https://github.com/apache/ozone/pull/1696", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODE1NQ==", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542088155", "bodyText": "Can you also rename '--count-quota' to '--namespace-quota'?", "author": "linyiqun", "createdAt": "2020-12-14T03:31:33Z", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/SetSpaceQuotaOptions.java", "diffHunk": "@@ -32,14 +32,14 @@\n   @CommandLine.Option(names = {\"--count-quota\"},\n       description = \"For volume this parameter represents the number of \" +", "originalCommit": "f449196a847566c5bb2d73bffa8c713f6a59105c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA5NTc1Mw==", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542095753", "bodyText": "Good point!", "author": "amaliujia", "createdAt": "2020-12-14T03:58:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODE1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODU5NQ==", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542088595", "bodyText": "Once option --count-quota is updated to --namespace-quota, this file also needed to be updated.", "author": "linyiqun", "createdAt": "2020-12-14T03:32:55Z", "path": "hadoop-ozone/dist/src/main/smoketest/basic/ozone-shell-lib.robot", "diffHunk": "@@ -48,12 +48,12 @@ Test ozone shell\n                     Should Be Equal     ${result}       DISK\n     ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInBytes'\n                     Should Be Equal     ${result}       10995116277760\n-    ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInCounts'\n+    ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInNamespace'\n                     Should Be Equal     ${result}       100\n                     Execute             ozone sh bucket setquota ${protocol}${server}/${volume}/bb1 --space-quota 1TB --count-quota 1000", "originalCommit": "f449196a847566c5bb2d73bffa8c713f6a59105c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA5NTc2Ng==", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542095766", "bodyText": "Done!", "author": "amaliujia", "createdAt": "2020-12-14T03:58:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODU5NQ=="}], "type": "inlineReview"}, {"oid": "2943d193915e1dab875e1a9af2ba9d97c35a463e", "url": "https://github.com/apache/ozone/commit/2943d193915e1dab875e1a9af2ba9d97c35a463e", "message": "HDDS-4582 Update QUOTA_IN_COUNTS to quota in namespace", "committedDate": "2020-12-14T05:15:27Z", "type": "commit"}, {"oid": "e6554a01d9aebf1559b39395c65ac57f96bd8d62", "url": "https://github.com/apache/ozone/commit/e6554a01d9aebf1559b39395c65ac57f96bd8d62", "message": "fixup! fix style", "committedDate": "2020-12-14T05:15:29Z", "type": "commit"}, {"oid": "24b3f6039e13ae556f08f340ee3115ac6c91ae8b", "url": "https://github.com/apache/ozone/commit/24b3f6039e13ae556f08f340ee3115ac6c91ae8b", "message": "fiupx! address comments", "committedDate": "2020-12-14T05:15:29Z", "type": "commit"}, {"oid": "ec031734f776c263f20b50d0e0d8ecf6d900de82", "url": "https://github.com/apache/ozone/commit/ec031734f776c263f20b50d0e0d8ecf6d900de82", "message": "trigger new CI check", "committedDate": "2020-12-14T05:15:29Z", "type": "commit"}, {"oid": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5", "url": "https://github.com/apache/ozone/commit/943f63bc3563f46ec8a544c51f3f3217b58d0cf5", "message": "fixup! fix CI", "committedDate": "2020-12-14T05:15:29Z", "type": "commit"}, {"oid": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5", "url": "https://github.com/apache/ozone/commit/943f63bc3563f46ec8a544c51f3f3217b58d0cf5", "message": "fixup! fix CI", "committedDate": "2020-12-14T05:15:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM3NDA4OQ==", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542374089", "bodyText": "Do we also change checkQuotaCountsValid to checkQuotaNamespaceValid?", "author": "captainzmc", "createdAt": "2020-12-14T13:15:46Z", "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java", "diffHunk": "@@ -135,11 +135,12 @@ public OMClientResponse validateAndUpdateCache(OzoneManager ozoneManager,\n       } else {\n         omVolumeArgs.setQuotaInBytes(omVolumeArgs.getQuotaInBytes());\n       }\n-      if (checkQuotaCountsValid(setVolumePropertyRequest.getQuotaInCounts())) {\n-        omVolumeArgs.setQuotaInCounts(\n-            setVolumePropertyRequest.getQuotaInCounts());\n+      if (checkQuotaCountsValid(", "originalCommit": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc4MzQ0Nw==", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542783447", "bodyText": "Indeed! Done!", "author": "amaliujia", "createdAt": "2020-12-14T21:03:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM3NDA4OQ=="}], "type": "inlineReview"}, {"oid": "31b18bc104977f88257c35af272ed853de8fe59e", "url": "https://github.com/apache/ozone/commit/31b18bc104977f88257c35af272ed853de8fe59e", "message": "fixup! address comments", "committedDate": "2020-12-14T18:19:49Z", "type": "commit"}, {"oid": "c197da6a8e3e4d9f7bdd14895cc0850712ccd23a", "url": "https://github.com/apache/ozone/commit/c197da6a8e3e4d9f7bdd14895cc0850712ccd23a", "message": "trigger new CI check", "committedDate": "2020-12-14T19:52:04Z", "type": "commit"}, {"oid": "b52ab271c4f8283e2a2a8188cc9bafb1d86cd496", "url": "https://github.com/apache/ozone/commit/b52ab271c4f8283e2a2a8188cc9bafb1d86cd496", "message": "trigger new CI check", "committedDate": "2020-12-14T20:43:37Z", "type": "commit"}, {"oid": "2bf12684fdbadbb3a5893bb52d08ababed9ac49c", "url": "https://github.com/apache/ozone/commit/2bf12684fdbadbb3a5893bb52d08ababed9ac49c", "message": "trigger new CI check", "committedDate": "2020-12-14T21:02:21Z", "type": "commit"}, {"oid": "b6d9fb3c0d7f1dd710a413aa41bb25f681e4f7dd", "url": "https://github.com/apache/ozone/commit/b6d9fb3c0d7f1dd710a413aa41bb25f681e4f7dd", "message": "trigger new CI check", "committedDate": "2020-12-14T22:32:30Z", "type": "commit"}, {"oid": "d109c85603437f0159a5cef8fb3ef9a69f58b40a", "url": "https://github.com/apache/ozone/commit/d109c85603437f0159a5cef8fb3ef9a69f58b40a", "message": "trigger new CI check", "committedDate": "2020-12-14T22:32:36Z", "type": "commit"}]}