{"pr_number": 1861, "pr_title": "Execute evictFn after completion", "pr_createdAt": "2020-01-20T11:29:08Z", "pr_url": "https://github.com/hazelcast/hazelcast-jet/pull/1861", "timeline": [{"oid": "a2afc9bf3be5f931b7f81cb69440668ce5407bb7", "url": "https://github.com/hazelcast/hazelcast-jet/commit/a2afc9bf3be5f931b7f81cb69440668ce5407bb7", "message": "Execute evictFn after completion\n\nThe aim is to make batch jobs more deterministic: all items are evicted at the\nend, regardless of the WM.\n\nFixes #1801", "committedDate": "2020-01-20T11:27:38Z", "type": "commit"}, {"oid": "f0a877277bd2fc837ab996a566cd88d870448a41", "url": "https://github.com/hazelcast/hazelcast-jet/commit/f0a877277bd2fc837ab996a566cd88d870448a41", "message": "Fix test failures", "committedDate": "2020-01-20T14:01:51Z", "type": "commit"}, {"oid": "f91feed17ac66552337e8f3d5fd9698fbaea9b1c", "url": "https://github.com/hazelcast/hazelcast-jet/commit/f91feed17ac66552337e8f3d5fd9698fbaea9b1c", "message": "Merge branch 'master' into mapStateful-failure", "committedDate": "2020-01-20T14:02:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODk4OTM2Mg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1861#discussion_r368989362", "bodyText": "this needs more explanation, like in SessionWindowP. Do we perhaps need better support for this in ProcessorTasklet?", "author": "cangencer", "createdAt": "2020-01-21T13:08:33Z", "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/impl/processor/TransformStatefulP.java", "diffHunk": "@@ -154,6 +167,9 @@ void reset(Watermark wm) {\n \n     @Override\n     public boolean saveToSnapshot() {\n+        if (inComplete) {", "originalCommit": "f91feed17ac66552337e8f3d5fd9698fbaea9b1c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "623e0dcc99c5ffc2336ab901215bd2ce10e5d583", "url": "https://github.com/hazelcast/hazelcast-jet/commit/623e0dcc99c5ffc2336ab901215bd2ce10e5d583", "message": "Address review", "committedDate": "2020-01-21T15:02:51Z", "type": "commit"}]}