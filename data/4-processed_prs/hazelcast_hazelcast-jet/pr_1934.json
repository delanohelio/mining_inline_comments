{"pr_number": 1934, "pr_title": "Remove offset committing from Kafka source", "pr_createdAt": "2020-02-06T11:12:05Z", "pr_url": "https://github.com/hazelcast/hazelcast-jet/pull/1934", "timeline": [{"oid": "e2fbabfd285843646f82eaeca65db6951b2a68f3", "url": "https://github.com/hazelcast/hazelcast-jet/commit/e2fbabfd285843646f82eaeca65db6951b2a68f3", "message": "Remove offset committing from Kafka source\n\nFixes #1924", "committedDate": "2020-02-06T11:11:00Z", "type": "commit"}, {"oid": "08aff6007347d676f2b2f1258a4acb3ab2295024", "url": "https://github.com/hazelcast/hazelcast-jet/commit/08aff6007347d676f2b2f1258a4acb3ab2295024", "message": "Merge branch 'master' into kafka-offsets", "committedDate": "2020-02-07T09:15:03Z", "type": "commit"}, {"oid": "35dd6354624cc1192d0385b5ba799980a162c7c7", "url": "https://github.com/hazelcast/hazelcast-jet/commit/35dd6354624cc1192d0385b5ba799980a162c7c7", "message": "Fix test failure", "committedDate": "2020-02-07T09:44:14Z", "type": "commit"}, {"oid": "2d9618e579ec5c2bca3db52aeae9224c43f697cc", "url": "https://github.com/hazelcast/hazelcast-jet/commit/2d9618e579ec5c2bca3db52aeae9224c43f697cc", "message": "Remove unused code", "committedDate": "2020-02-07T10:09:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjMxMzA4OA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1934#discussion_r376313088", "bodyText": "this is normally on by default, do we explicitly disable it? if so this should be mentioned.", "author": "cangencer", "createdAt": "2020-02-07T10:13:59Z", "path": "extensions/kafka/src/main/java/com/hazelcast/jet/kafka/KafkaSources.java", "diffHunk": "@@ -91,12 +90,13 @@ private KafkaSources() {\n      *     restart or failure, the reading continues from the saved offset. You\n      *     can achieve exactly-once or at-least-once behavior.\n      *\n-     *     <li>if processing guarantee is disabled, the source commits the\n-     *     offsets to Kafka using {@link KafkaConsumer#commitSync()}. But the\n-     *     offsets are committed before or after the event is fully processed.\n-     *     Therefore some events can be processed twice or not at all. You can\n-     *     configure {@code group.id} in this case. If not configured a random\n-     *     UUID will be set.\n+     *     <li>if processing guarantee is disabled, the source will start\n+     *     reading from default offsets (based on the {@code auto.offset.reset}\n+     *     property). You can enable offset committing by assigning a {@code\n+     *     group.id}, enabling auto offset committing using {@code\n+     *     enable.auto.commit} and configuring {@code auto.commit.interval.ms}", "originalCommit": "2d9618e579ec5c2bca3db52aeae9224c43f697cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjMyODMwMg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1934#discussion_r376328302", "bodyText": "We don't disable it, now we do nothing to the properties. It's actually good for us: just by assigning the group.id we rely on kafka committing the offsets.", "author": "viliam-durina", "createdAt": "2020-02-07T10:47:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjMxMzA4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjMzMjkwMg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1934#discussion_r376332902", "bodyText": "shouldn't we remove this? since it's been fixed?", "author": "cangencer", "createdAt": "2020-02-07T10:57:57Z", "path": "extensions/kafka/src/main/java/com/hazelcast/jet/kafka/KafkaSources.java", "diffHunk": "@@ -110,7 +110,7 @@ private KafkaSources() {\n      * {@code poll(timeout)} if the cluster is down. If {@link\n      * JobConfig#setSnapshotIntervalMillis(long) snapshotting is enabled},\n      * entire job might be blocked. This is a known issue of Kafka\n-     * (KAFKA-1894). Refer to Kafka documentation for details.\n+     * (KAFKA-1894, now fixed). Refer to Kafka documentation for details.", "originalCommit": "2d9618e579ec5c2bca3db52aeae9224c43f697cc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}