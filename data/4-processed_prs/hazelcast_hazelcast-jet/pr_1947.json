{"pr_number": 1947, "pr_title": "Add migration guide to RefMan", "pr_createdAt": "2020-02-08T16:31:28Z", "pr_url": "https://github.com/hazelcast/hazelcast-jet/pull/1947", "timeline": [{"oid": "6d6d75e7e3996fa24ff1a14a394071036eb427c4", "url": "https://github.com/hazelcast/hazelcast-jet/commit/6d6d75e7e3996fa24ff1a14a394071036eb427c4", "message": "Write a migration guide", "committedDate": "2020-02-08T16:29:03Z", "type": "commit"}, {"oid": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "url": "https://github.com/hazelcast/hazelcast-jet/commit/1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "message": "Extend migration guide", "committedDate": "2020-02-10T09:35:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAxNTg2MQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377015861", "bodyText": "This point is the same as previous one - Functions is mentioned there as well. We should merge these two points into one point (name of packages - com.hazelcast.jet.function -> com.hazelcast.function should be mentioned in previous point).", "author": "olukas", "createdAt": "2020-02-10T11:49:22Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAyMzE0Mw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377023143", "bodyText": "This should be more clear. This is the important step which can be quite common during migration to Jet 4.0. I think any example should be mentioned here (how it looks in 3.x and how in 4.x)", "author": "olukas", "createdAt": "2020-02-10T12:06:03Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAyNTYwMw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377025603", "bodyText": "We should mention also ICache.", "author": "olukas", "createdAt": "2020-02-10T12:11:56Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap` and", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAyNjQyNg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377026426", "bodyText": "I suggest to merge info about drawFrom->readFrom and drainTo->writeTo into one point and add some small code snippet (just Pipeline with source and sink) - this is important change and with code snippet it will be more visible).", "author": "olukas", "createdAt": "2020-02-10T12:13:50Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap` and\n+`IList`.\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom`.", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAyOTM1Ng==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377029356", "bodyText": "Can we have any code snippet example here?", "author": "olukas", "createdAt": "2020-02-10T12:20:32Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap` and\n+`IList`.\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom`.\n+* `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n+* ``ContextFactory`` has been renamed to `ServiceFactory`.\n+* ``mapUsingService``'s `ServiceFactory` now takes `ProcessorSupplier.Context` instead of just `JetInstance`.", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAyOTgyMg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377029822", "bodyText": "We should describe how (i.e. how it should be migrated from 3.x version).", "author": "olukas", "createdAt": "2020-02-10T12:21:26Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap` and\n+`IList`.\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom`.\n+* `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n+* ``ContextFactory`` has been renamed to `ServiceFactory`.\n+* ``mapUsingService``'s `ServiceFactory` now takes `ProcessorSupplier.Context` instead of just `JetInstance`.\n+* Signature of `com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` method has changed.", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAzMjE0OQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377032149", "bodyText": "Change HDFS sink and source to HDFS source and sink to have it aligned with following renamed to Hadoop.inputFormat and Hadoop.outputFormat", "author": "olukas", "createdAt": "2020-02-10T12:26:19Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap` and\n+`IList`.\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom`.\n+* `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n+* ``ContextFactory`` has been renamed to `ServiceFactory`.\n+* ``mapUsingService``'s `ServiceFactory` now takes `ProcessorSupplier.Context` instead of just `JetInstance`.\n+* Signature of `com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` method has changed.\n+* HDFS sink and source have been renamed to `Hadoop.inputFormat` and `Hadoop.outputFormat`.", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAzMjcyMw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377032723", "bodyText": "Can we show code snippet which shows how to get MetricsConfig?", "author": "olukas", "createdAt": "2020-02-10T12:27:37Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap` and\n+`IList`.\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom`.\n+* `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n+* ``ContextFactory`` has been renamed to `ServiceFactory`.\n+* ``mapUsingService``'s `ServiceFactory` now takes `ProcessorSupplier.Context` instead of just `JetInstance`.\n+* Signature of `com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` method has changed.\n+* HDFS sink and source have been renamed to `Hadoop.inputFormat` and `Hadoop.outputFormat`.\n+* `MetricsConfig` is no longer part of `JetConfig`, but resides in the IMDG `Config` class.", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAzMzA2MA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377033060", "bodyText": "This is not clear from migration point of view - what does it mean during migration, what should be changed and how?", "author": "olukas", "createdAt": "2020-02-10T12:28:26Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap` and\n+`IList`.\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom`.\n+* `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n+* ``ContextFactory`` has been renamed to `ServiceFactory`.\n+* ``mapUsingService``'s `ServiceFactory` now takes `ProcessorSupplier.Context` instead of just `JetInstance`.\n+* Signature of `com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` method has changed.\n+* HDFS sink and source have been renamed to `Hadoop.inputFormat` and `Hadoop.outputFormat`.\n+* `MetricsConfig` is no longer part of `JetConfig`, but resides in the IMDG `Config` class.\n+* Generic wildcard parameters in `Traverser` class have been tweaked slightly.", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAzMzY2OQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377033669", "bodyText": "It is probably not needed but have the example here can be helpful for understanding.", "author": "olukas", "createdAt": "2020-02-10T12:29:57Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap` and\n+`IList`.\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom`.\n+* `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n+* ``ContextFactory`` has been renamed to `ServiceFactory`.\n+* ``mapUsingService``'s `ServiceFactory` now takes `ProcessorSupplier.Context` instead of just `JetInstance`.\n+* Signature of `com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` method has changed.\n+* HDFS sink and source have been renamed to `Hadoop.inputFormat` and `Hadoop.outputFormat`.\n+* `MetricsConfig` is no longer part of `JetConfig`, but resides in the IMDG `Config` class.\n+* Generic wildcard parameters in `Traverser` class have been tweaked slightly.\n+* Lambdas have been moved to become last parameter, where applicable, for sources and sinks.", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ3OTYyNQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377479625", "bodyText": "Nope. I agree on principle with your \"illustrate to make it clear approach\" but this one is too simple and it would be too much of an overkill.", "author": "jbartok", "createdAt": "2020-02-11T07:45:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAzMzY2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ4MjkzMA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377482930", "bodyText": "ok, agree - as I said It is probably not needed.", "author": "olukas", "createdAt": "2020-02-11T07:56:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAzMzY2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzAzNTUxMQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377035511", "bodyText": "Can we explicitly mention that behavior remains the same if it is called through jet submit?", "author": "olukas", "createdAt": "2020-02-10T12:34:11Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,64 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,\n+`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`, `ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,\n+`Functions`, `PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+* `Functions` utility class has been moved to IMDG and removed from Jet (from `com.hazelcast.jet.function`\n+to `com.hazelcast.function`).\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+* `group name` config option is now called `cluster name`. These changes have been adapted to the Jet Command Line too\n+(`-g/--groupName` replaced by `-n/--cluster-name` option).\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap` and\n+`IList`.\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom`.\n+* `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n+* ``ContextFactory`` has been renamed to `ServiceFactory`.\n+* ``mapUsingService``'s `ServiceFactory` now takes `ProcessorSupplier.Context` instead of just `JetInstance`.\n+* Signature of `com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` method has changed.\n+* HDFS sink and source have been renamed to `Hadoop.inputFormat` and `Hadoop.outputFormat`.\n+* `MetricsConfig` is no longer part of `JetConfig`, but resides in the IMDG `Config` class.\n+* Generic wildcard parameters in `Traverser` class have been tweaked slightly.\n+* Lambdas have been moved to become last parameter, where applicable, for sources and sinks.\n+* `JetBootstrap.getInstance()` has been moved to `Jet.bootstrappedInstance()` which automatically creates an isolated", "originalCommit": "1424ef9ae2fa96f2846b9f199d8168301fe1bc99", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b8d470a6ca4ade66c3470d22f717053a93cac5f8", "url": "https://github.com/hazelcast/hazelcast-jet/commit/b8d470a6ca4ade66c3470d22f717053a93cac5f8", "message": "Address review concerns", "committedDate": "2020-02-11T09:14:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU0MzA2Mg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r377543062", "bodyText": "As I wrote previously I suggest to have note like from com.hazelcast.jet.function to com.hazelcast.function mentioned in this point.", "author": "olukas", "createdAt": "2020-02-11T10:15:14Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,111 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+\n+* Serializable variants of `java.util.function` interfaces have been moved to IMDG and removed from Jet: `BiConsumerEx`,", "originalCommit": "b8d470a6ca4ade66c3470d22f717053a93cac5f8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "181df683bf5cf8975803619b6fa94722591b81c6", "url": "https://github.com/hazelcast/hazelcast-jet/commit/181df683bf5cf8975803619b6fa94722591b81c6", "message": "Address review concerns", "committedDate": "2020-02-11T11:45:34Z", "type": "commit"}, {"oid": "e9dd69dea97bd0c4f14e2345ee3288424195efde", "url": "https://github.com/hazelcast/hazelcast-jet/commit/e9dd69dea97bd0c4f14e2345ee3288424195efde", "message": "Address review concerns", "committedDate": "2020-02-11T11:48:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEwNjM2MQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378106361", "bodyText": "You should apply line wrapping at 72 throughout.", "author": "mtopolnik", "createdAt": "2020-02-12T08:42:35Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,133 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]", "originalCommit": "e9dd69dea97bd0c4f14e2345ee3288424195efde", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExMDQwMw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378110403", "bodyText": "Ok, will do. But curious: why?", "author": "jbartok", "createdAt": "2020-02-12T08:50:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEwNjM2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExNDgwMQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378114801", "bodyText": "It's the standard convention in text files, makes it a lot more readable if you don't have word wrapping on. I use rewrap plugin for VSCode.", "author": "cangencer", "createdAt": "2020-02-12T08:59:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEwNjM2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEwNzkyMg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378107922", "bodyText": "I don't like this wording \"allow us\", sounds like a court defence. It could be something like \"According to the semantic versioning we apply, this means that in version 4.0 some of the API has changed in a breaking way and code written for 3.x may no longer compile against it.\"", "author": "mtopolnik", "createdAt": "2020-02-12T08:45:54Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,133 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as", "originalCommit": "e9dd69dea97bd0c4f14e2345ee3288424195efde", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEwODkyNQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378108925", "bodyText": "I would prefer not to talk about moving \"from\" Jet \"to\" IMDG because it's all a part of Jet, especially since the naming doesn't indicate this, there's no imdg in the package names.", "author": "mtopolnik", "createdAt": "2020-02-12T08:47:58Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,133 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+\n+* Serializable variants of `java.util.function` interfaces have been moved from Jet (`com.hazelcast.jet.function` package)", "originalCommit": "e9dd69dea97bd0c4f14e2345ee3288424195efde", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExMTQ2MA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378111460", "bodyText": "These properties are relevant in the context [...] so were used (aren't anymore).", "author": "mtopolnik", "createdAt": "2020-02-12T08:53:11Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,133 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+\n+* Serializable variants of `java.util.function` interfaces have been moved from Jet (`com.hazelcast.jet.function` package)\n+to IMDG (`com.hazelcast.function` package): `BiConsumerEx`,`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`,\n+`ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,`Functions`, `PredicateEx`, `SupplierEx`,\n+`ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+\n+* \"Group name\" config option is now called \"cluster name\". See next code snippet. These changes have been adapted to the\n+Jet Command Line too(`-g/--groupName` replaced by `-n/--cluster-name` option).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config1]\n+----\n+\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config2]\n+----\n+\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap`, `ICache`\n+and `IList`.\n+\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom` and `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline1]\n+----\n+\n+* ``ContextFactory`` has been renamed to `ServiceFactory` and support for instance-wide initialization has been added\n+to it. It takes `ProcessorSupplier.Context` instead of just `JetInstance` and the convenience methods from `ServiceFactories`\n+should be used for initialization.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory1]\n+----\n+\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline2]\n+----\n+\n+* `withMaxPendingCallsPerProcessor(int)` and `withUnorderedAsyncResponses()` methods have been removed from `ServiceFactory`.\n+They have been properties relevant in the context of asynchronous operations, so have been used in conjunction with", "originalCommit": "e9dd69dea97bd0c4f14e2345ee3288424195efde", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExMjM1Nw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378112357", "bodyText": "\"has been made\" -> \"has become\"", "author": "mtopolnik", "createdAt": "2020-02-12T08:55:00Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,133 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+\n+* Serializable variants of `java.util.function` interfaces have been moved from Jet (`com.hazelcast.jet.function` package)\n+to IMDG (`com.hazelcast.function` package): `BiConsumerEx`,`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`,\n+`ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,`Functions`, `PredicateEx`, `SupplierEx`,\n+`ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+\n+* \"Group name\" config option is now called \"cluster name\". See next code snippet. These changes have been adapted to the\n+Jet Command Line too(`-g/--groupName` replaced by `-n/--cluster-name` option).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config1]\n+----\n+\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config2]\n+----\n+\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap`, `ICache`\n+and `IList`.\n+\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom` and `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline1]\n+----\n+\n+* ``ContextFactory`` has been renamed to `ServiceFactory` and support for instance-wide initialization has been added\n+to it. It takes `ProcessorSupplier.Context` instead of just `JetInstance` and the convenience methods from `ServiceFactories`\n+should be used for initialization.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory1]\n+----\n+\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline2]\n+----\n+\n+* `withMaxPendingCallsPerProcessor(int)` and `withUnorderedAsyncResponses()` methods have been removed from `ServiceFactory`.\n+They have been properties relevant in the context of asynchronous operations, so have been used in conjunction with\n+`GeneralStage.mapUsingServiceAsync(...)` calls. In Jet 4.0 the `GeneralStage.mapUsingServiceAsync(...)` method has a\n+new variant with explicit parameters for the above settings.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory2]\n+----\n+\n+* Signature of `com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` method has changed, in order to reflect the\n+way in which `EntryProcessor` has been made more lambda-friendly in IMDG (see", "originalCommit": "e9dd69dea97bd0c4f14e2345ee3288424195efde", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExMzQ4MA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378113480", "bodyText": "the last parameter", "author": "mtopolnik", "createdAt": "2020-02-12T08:57:06Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,133 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+\n+* Serializable variants of `java.util.function` interfaces have been moved from Jet (`com.hazelcast.jet.function` package)\n+to IMDG (`com.hazelcast.function` package): `BiConsumerEx`,`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`,\n+`ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,`Functions`, `PredicateEx`, `SupplierEx`,\n+`ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+\n+* \"Group name\" config option is now called \"cluster name\". See next code snippet. These changes have been adapted to the\n+Jet Command Line too(`-g/--groupName` replaced by `-n/--cluster-name` option).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config1]\n+----\n+\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config2]\n+----\n+\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap`, `ICache`\n+and `IList`.\n+\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom` and `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline1]\n+----\n+\n+* ``ContextFactory`` has been renamed to `ServiceFactory` and support for instance-wide initialization has been added\n+to it. It takes `ProcessorSupplier.Context` instead of just `JetInstance` and the convenience methods from `ServiceFactories`\n+should be used for initialization.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory1]\n+----\n+\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline2]\n+----\n+\n+* `withMaxPendingCallsPerProcessor(int)` and `withUnorderedAsyncResponses()` methods have been removed from `ServiceFactory`.\n+They have been properties relevant in the context of asynchronous operations, so have been used in conjunction with\n+`GeneralStage.mapUsingServiceAsync(...)` calls. In Jet 4.0 the `GeneralStage.mapUsingServiceAsync(...)` method has a\n+new variant with explicit parameters for the above settings.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory2]\n+----\n+\n+* Signature of `com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` method has changed, in order to reflect the\n+way in which `EntryProcessor` has been made more lambda-friendly in IMDG (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). The return type of the `EntryProcessor` is now an explicit parameter in ``mapWithEntryProcessor``'s\n+method signature.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=entryProcessor1]\n+----\n+\n+* HDFS source and sink have been renamed to `Hadoop.inputFormat` and `Hadoop.outputFormat`.\n+\n+* `MetricsConfig` is no longer part of `JetConfig`, but resides in the IMDG `Config` class.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config3]\n+----\n+\n+* Generic wildcard parameters in `Traverser` class have been tweaked slightly. Change shouldn't affect anything in\n+practice.\n+\n+* Lambdas have been moved to become last parameter, where applicable, for sources and sinks.", "originalCommit": "e9dd69dea97bd0c4f14e2345ee3288424195efde", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExMzU2NQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378113565", "bodyText": "The signature", "author": "mtopolnik", "createdAt": "2020-02-12T08:57:15Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,133 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in\n+Jet. For details see link:https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes]. The change most obvious\n+in Jet is that many classes have been moved from the generic `com.hazelcast.core` package to more specific packages,\n+like `com.hazelcast.map` or `com.hazelcast.collection`.\n+\n+* Serializable variants of `java.util.function` interfaces have been moved from Jet (`com.hazelcast.jet.function` package)\n+to IMDG (`com.hazelcast.function` package): `BiConsumerEx`,`BiFunctionEx`, `BinaryOperatorEx`, `BiPredicateEx`,\n+`ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`,`Functions`, `PredicateEx`, `SupplierEx`,\n+`ToDoubleFunctionEx`, `ToIntFunctionEx`, `ToLongFunctionEx`.\n+\n+* Generic parameters on several methods and classes have been updated/fixed (i.e. `EntryProcessor`) (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in IMDG Migration Guide). These changes have been adopted in Jet.\n+\n+* \"Group name\" config option is now called \"cluster name\". See next code snippet. These changes have been adapted to the\n+Jet Command Line too(`-g/--groupName` replaced by `-n/--cluster-name` option).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config1]\n+----\n+\n+* `EventJournalConfig` has been moved from top level `Config` class to data-structure specific configs (`MapConfig`,\n+`CacheConfig`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config2]\n+----\n+\n+* Async methods in IMDG return `CompletionStage` now rather than the old `ICompletableFuture` (see\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section] in\n+IMDG Migration Guide) and these have been adopted in Jet.\n+\n+=== Jet API Changes\n+Jet 4.0 makes multiple breaking changes in its own APIs:\n+\n+* `IMapJet`, `ICacheJet` and `IListJet` interfaces have been removed and have been replaced with IMDG's `IMap`, `ICache`\n+and `IList`.\n+\n+* `Pipeline.drawFrom` has been renamed to `Pipeline.readFrom` and `GeneralStage.drainTo` has been renamed to `GeneralStage.writeTo`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline1]\n+----\n+\n+* ``ContextFactory`` has been renamed to `ServiceFactory` and support for instance-wide initialization has been added\n+to it. It takes `ProcessorSupplier.Context` instead of just `JetInstance` and the convenience methods from `ServiceFactories`\n+should be used for initialization.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory1]\n+----\n+\n+* `map/filter/flatMapUsingContext` has been renamed to `map/filter/flatMapUsingService`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline2]\n+----\n+\n+* `withMaxPendingCallsPerProcessor(int)` and `withUnorderedAsyncResponses()` methods have been removed from `ServiceFactory`.\n+They have been properties relevant in the context of asynchronous operations, so have been used in conjunction with\n+`GeneralStage.mapUsingServiceAsync(...)` calls. In Jet 4.0 the `GeneralStage.mapUsingServiceAsync(...)` method has a\n+new variant with explicit parameters for the above settings.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory2]\n+----\n+\n+* Signature of `com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` method has changed, in order to reflect the", "originalCommit": "e9dd69dea97bd0c4f14e2345ee3288424195efde", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODExNDEyOQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378114129", "bodyText": "This whole section is written in passive voice. Using active voice with \"we\" as the subject would make it both easier to read and sound more open.  This way it sounds like we distance ourselves from our own actions.", "author": "mtopolnik", "createdAt": "2020-02-12T08:58:24Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +283,133 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet version.\n+See also the link:https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes] document\n+for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. Major releases allow us to break compatibility in the API, as well as\n+to remove previously deprecated parts of the API.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own breaking changes. For details see\n+link:https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes] and\n+link:https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes that have affected Jet are as follows:\n+\n+* Many packages have been renamed, or classes moved from one package to another and these changes have been followed in", "originalCommit": "e9dd69dea97bd0c4f14e2345ee3288424195efde", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7e821e6a806f61efe96029c416bfb190f6d42637", "url": "https://github.com/hazelcast/hazelcast-jet/commit/7e821e6a806f61efe96029c416bfb190f6d42637", "message": "Wrap around column 72", "committedDate": "2020-02-12T09:04:10Z", "type": "commit"}, {"oid": "cf2d56917c2dfbd00fee94bf708284b6ea51af35", "url": "https://github.com/hazelcast/hazelcast-jet/commit/cf2d56917c2dfbd00fee94bf708284b6ea51af35", "message": "Accomodate review changes", "committedDate": "2020-02-12T09:36:11Z", "type": "commit"}, {"oid": "9d29dc618fdf86503bba08427205597a278108c6", "url": "https://github.com/hazelcast/hazelcast-jet/commit/9d29dc618fdf86503bba08427205597a278108c6", "message": "Rewrite to active voice", "committedDate": "2020-02-12T10:40:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODIwNzI5Mg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378207292", "bodyText": "duplicated \"most\"?", "author": "Serdaro", "createdAt": "2020-02-12T11:58:26Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +284,158 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet\n+version. See also the\n+https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes]\n+document for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. According to the semantic versioning\n+we apply, this means that in version 4.0 some of the API has changed in\n+a breaking way and code written for 3.x may no longer compile against it.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own\n+breaking changes. For details see\n+https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes]\n+and\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes we made and which have affected Jet too are\n+as follows:\n+\n+* We renamed many packages and moved classes around. For details see the\n+https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes].\n+The most obvious change most is that many classes that used to be in the", "originalCommit": "9d29dc618fdf86503bba08427205597a278108c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODIwODg4MA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378208880", "bodyText": "no need \"the\" before EntryProcessor", "author": "Serdaro", "createdAt": "2020-02-12T12:02:03Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +284,158 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet\n+version. See also the\n+https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes]\n+document for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. According to the semantic versioning\n+we apply, this means that in version 4.0 some of the API has changed in\n+a breaking way and code written for 3.x may no longer compile against it.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own\n+breaking changes. For details see\n+https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes]\n+and\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes we made and which have affected Jet too are\n+as follows:\n+\n+* We renamed many packages and moved classes around. For details see the\n+https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes].\n+The most obvious change most is that many classes that used to be in the\n+general `com.hazelcast.core` package are now in specific packages like\n+`com.hazelcast.map` or `com.hazelcast.collection`.\n+\n+* We moved the serializable variants of `java.util.function` interfaces\n+from `com.hazelcast.jet.function` to `com.hazelcast.function`:\n+`BiConsumerEx`,`BiFunctionEx`,`BinaryOperatorEx`, `BiPredicateEx`,\n+`ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`, `Functions`,\n+`PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`,\n+`ToLongFunctionEx`.\n+\n+* We updated/fixed the type parameters on several methods and classes, for\n+example the `EntryProcessor`. See the\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in the IMDG Migration Guide.\n+\n+* We changed the usage of the term \"group\" in configuration to \"cluster\".\n+See the code snippet below for an example. This changes a Jet Command Line\n+parameter as well (`-g/--groupName` renamed to `-n/--cluster-name`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config1]\n+----\n+\n+* We moved `EventJournalConfig` from the top-level `Config` class to\n+data structure-specific configs (`MapConfig`,`CacheConfig`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config2]\n+----\n+\n+* Async methods that used to return `ICompletableFuture` now return\n+`CompletionStage` (see the\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section]\n+in the IMDG Migration Guide).\n+\n+=== Jet API Changes\n+\n+We made multiple breaking changes in Jet's own APIs too:\n+\n+* We removed the Jet-specific interfaces `IMapJet`, `ICacheJet` and\n+`IListJet` and now use IMDG's `IMap`, `ICache` and `IList` directly.\n+\n+* We renamed `Pipeline.drawFrom` to `Pipeline.readFrom` and\n+`GeneralStage.drainTo` to `GeneralStage.writeTo`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline1]\n+----\n+\n+* We renamed `ContextFactory` to `ServiceFactory` and added support\n+for instance-wide initialization. It now takes a `ProcessorSupplier.Context`\n+instead of just `JetInstance`. We also added convenience methods in\n+`ServiceFactories` to simplify constructing the common variants:\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory1]\n+----\n+\n+* We renamed `map/filter/flatMapUsingContext` to\n+`map/filter/flatMapUsingService`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline2]\n+----\n+\n+* We removed the methods `withMaxPendingCallsPerProcessor(int)` and\n+`withUnorderedAsyncResponses()` from `ServiceFactory`. These properties\n+are relevant only in the context of asynchronous operations and were used\n+in conjunction with `GeneralStage.mapUsingServiceAsync(...)`. In Jet 4.0\n+the `GeneralStage.mapUsingServiceAsync(...)` method has a new variant with\n+explicit parameters for the above settings.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory2]\n+----\n+\n+* We changed the signature of\n+`com.hazelcast.jet.pipeline.Sinks#mapWithEntryProcessor` in order to\n+accommodate the improved `EntryProcessor`, which has become more\n+lambda-friendly in IMDG (see the\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in the IMDG Migration Guide). The return type of the `EntryProcessor` is", "originalCommit": "9d29dc618fdf86503bba08427205597a278108c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1ea9e5a4419a04de54f7bb9030d6a31619a918e8", "url": "https://github.com/hazelcast/hazelcast-jet/commit/1ea9e5a4419a04de54f7bb9030d6a31619a918e8", "message": "Fix minor mistakes", "committedDate": "2020-02-12T12:32:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1ODI1NA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378258254", "bodyText": "what about removal of filterUsingServiceAsync and flatMapUsingServiceAsync?", "author": "cangencer", "createdAt": "2020-02-12T13:45:23Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +284,158 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet\n+version. See also the\n+https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes]\n+document for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. According to the semantic versioning\n+we apply, this means that in version 4.0 some of the API has changed in\n+a breaking way and code written for 3.x may no longer compile against it.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own\n+breaking changes. For details see\n+https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes]\n+and\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes we made and which have affected Jet too are\n+as follows:\n+\n+* We renamed many packages and moved classes around. For details see the\n+https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes].\n+The most obvious change is that many classes that used to be in the\n+general `com.hazelcast.core` package are now in specific packages like\n+`com.hazelcast.map` or `com.hazelcast.collection`.\n+\n+* We moved the serializable variants of `java.util.function` interfaces\n+from `com.hazelcast.jet.function` to `com.hazelcast.function`:\n+`BiConsumerEx`,`BiFunctionEx`,`BinaryOperatorEx`, `BiPredicateEx`,\n+`ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`, `Functions`,\n+`PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`,\n+`ToLongFunctionEx`.\n+\n+* We updated/fixed the type parameters on several methods and classes, for\n+example the `EntryProcessor`. See the\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in the IMDG Migration Guide.\n+\n+* We changed the usage of the term \"group\" in configuration to \"cluster\".\n+See the code snippet below for an example. This changes a Jet Command Line\n+parameter as well (`-g/--groupName` renamed to `-n/--cluster-name`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config1]\n+----\n+\n+* We moved `EventJournalConfig` from the top-level `Config` class to\n+data structure-specific configs (`MapConfig`,`CacheConfig`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config2]\n+----\n+\n+* Async methods that used to return `ICompletableFuture` now return\n+`CompletionStage` (see the\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section]\n+in the IMDG Migration Guide).\n+\n+=== Jet API Changes\n+\n+We made multiple breaking changes in Jet's own APIs too:\n+\n+* We removed the Jet-specific interfaces `IMapJet`, `ICacheJet` and\n+`IListJet` and now use IMDG's `IMap`, `ICache` and `IList` directly.\n+\n+* We renamed `Pipeline.drawFrom` to `Pipeline.readFrom` and\n+`GeneralStage.drainTo` to `GeneralStage.writeTo`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline1]\n+----\n+\n+* We renamed `ContextFactory` to `ServiceFactory` and added support\n+for instance-wide initialization. It now takes a `ProcessorSupplier.Context`\n+instead of just `JetInstance`. We also added convenience methods in\n+`ServiceFactories` to simplify constructing the common variants:\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=serviceFactory1]\n+----\n+\n+* We renamed `map/filter/flatMapUsingContext` to\n+`map/filter/flatMapUsingService`.\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=pipeline2]\n+----\n+\n+* We removed the methods `withMaxPendingCallsPerProcessor(int)` and\n+`withUnorderedAsyncResponses()` from `ServiceFactory`. These properties\n+are relevant only in the context of asynchronous operations and were used\n+in conjunction with `GeneralStage.mapUsingServiceAsync(...)`. In Jet 4.0\n+the `GeneralStage.mapUsingServiceAsync(...)` method has a new variant with\n+explicit parameters for the above settings.\n++", "originalCommit": "1ea9e5a4419a04de54f7bb9030d6a31619a918e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI5MDI3NA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378290274", "bodyText": "I was under the impression that those weren't present before 4.0. Will include them.", "author": "jbartok", "createdAt": "2020-02-12T14:37:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1ODI1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODMyOTg2MA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378329860", "bodyText": "@jbartok I reworded to move the key words to the beginning, you can check it.", "author": "mtopolnik", "createdAt": "2020-02-12T15:36:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1ODI1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODcxNjU2NA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378716564", "bodyText": "@mtopolnik rewording looks good now", "author": "jbartok", "createdAt": "2020-02-13T08:39:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1ODI1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODcxNzAwMQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378717001", "bodyText": "@cangencer I've added info about removal of async filter & flatmap; pls. take a look, especially the code sample I've added for replacing flatMap, because I'm not sure that what I came up with is the right/best way to do it.", "author": "jbartok", "createdAt": "2020-02-13T08:40:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1ODI1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1ODgxMg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378258812", "bodyText": "Pipeline.drawFrom -> Pipeline.readFrom and GeneralStage.drainTo -> GeneralStage.writeTo", "author": "cangencer", "createdAt": "2020-02-12T13:46:21Z", "path": "reference-manual/src/main/asciidoc/appendix.adoc", "diffHunk": "@@ -283,6 +284,158 @@ The URL used for phone home requests is\n http://phonehome.hazelcast.com/ping\n ----\n \n+[appendix]\n+= Migration Guides\n+\n+This appendix provides guidelines for upgrading to a new Hazelcast Jet\n+version. See also the\n+https://docs.hazelcast.org/docs/jet/release-notes/index.html[Release Notes]\n+document for the changes for each Hazelcast Jet release.\n+\n+== Upgrading to Hazelcast Jet 4.0\n+\n+Jet 4.0 is a major version release. According to the semantic versioning\n+we apply, this means that in version 4.0 some of the API has changed in\n+a breaking way and code written for 3.x may no longer compile against it.\n+\n+=== Jet on IMDG 4.0\n+\n+Jet 4.0 uses IMDG 4.0, which is also a major release with its own\n+breaking changes. For details see\n+https://docs.hazelcast.org/docs/rn/index.html[IMDG Release Notes]\n+and\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#migration-guides[IMDG Migration Guides].\n+\n+The most important changes we made and which have affected Jet too are\n+as follows:\n+\n+* We renamed many packages and moved classes around. For details see the\n+https://docs.hazelcast.org/docs/rn/index.html#4-0[IMDG Release Notes].\n+The most obvious change is that many classes that used to be in the\n+general `com.hazelcast.core` package are now in specific packages like\n+`com.hazelcast.map` or `com.hazelcast.collection`.\n+\n+* We moved the serializable variants of `java.util.function` interfaces\n+from `com.hazelcast.jet.function` to `com.hazelcast.function`:\n+`BiConsumerEx`,`BiFunctionEx`,`BinaryOperatorEx`, `BiPredicateEx`,\n+`ComparatorEx`, `ComparatorsEx`, `ConsumerEx`, `FunctionEx`, `Functions`,\n+`PredicateEx`, `SupplierEx`, `ToDoubleFunctionEx`, `ToIntFunctionEx`,\n+`ToLongFunctionEx`.\n+\n+* We updated/fixed the type parameters on several methods and classes, for\n+example the `EntryProcessor`. See the\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#introducing-lambda-friendly-interfaces[relevant section]\n+in the IMDG Migration Guide.\n+\n+* We changed the usage of the term \"group\" in configuration to \"cluster\".\n+See the code snippet below for an example. This changes a Jet Command Line\n+parameter as well (`-g/--groupName` renamed to `-n/--cluster-name`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config1]\n+----\n+\n+* We moved `EventJournalConfig` from the top-level `Config` class to\n+data structure-specific configs (`MapConfig`,`CacheConfig`).\n++\n+[source]\n+----\n+include::{javasource}/migration/Migration.java[tag=config2]\n+----\n+\n+* Async methods that used to return `ICompletableFuture` now return\n+`CompletionStage` (see the\n+https://docs.hazelcast.org/docs/latest/manual/html-single/#removal-of-icompletablefuture[relevant section]\n+in the IMDG Migration Guide).\n+\n+=== Jet API Changes\n+\n+We made multiple breaking changes in Jet's own APIs too:\n+\n+* We removed the Jet-specific interfaces `IMapJet`, `ICacheJet` and\n+`IListJet` and now use IMDG's `IMap`, `ICache` and `IList` directly.\n+\n+* We renamed `Pipeline.drawFrom` to `Pipeline.readFrom` and\n+`GeneralStage.drainTo` to `GeneralStage.writeTo`.", "originalCommit": "1ea9e5a4419a04de54f7bb9030d6a31619a918e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODMxNDgzNw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378314837", "bodyText": "I think I read this wrong, my mistake..", "author": "cangencer", "createdAt": "2020-02-12T15:14:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODI1ODgxMg=="}], "type": "inlineReview"}, {"oid": "6201af694b08689c9af0cb6e78992db67f8bd3e3", "url": "https://github.com/hazelcast/hazelcast-jet/commit/6201af694b08689c9af0cb6e78992db67f8bd3e3", "message": "Push key words to the start of bullet points", "committedDate": "2020-02-12T15:35:42Z", "type": "commit"}, {"oid": "0f354ae66e9a6527ac9872966fc0152c23439cce", "url": "https://github.com/hazelcast/hazelcast-jet/commit/0f354ae66e9a6527ac9872966fc0152c23439cce", "message": "Add missing items", "committedDate": "2020-02-13T08:38:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODc2NjAwOA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1947#discussion_r378766008", "bodyText": "it would be better to return a List<> and then use Traversers.traverseIterable() in the following step", "author": "cangencer", "createdAt": "2020-02-13T10:13:44Z", "path": "reference-manual/src/main/java/migration/Migration.java", "diffHunk": "@@ -0,0 +1,192 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package migration;\n+\n+import com.hazelcast.client.config.ClientConfig;\n+import com.hazelcast.config.Config;\n+import com.hazelcast.function.ConsumerEx;\n+import com.hazelcast.function.FunctionEx;\n+import com.hazelcast.jet.Jet;\n+import com.hazelcast.jet.JetInstance;\n+import com.hazelcast.jet.Traverser;\n+import com.hazelcast.jet.config.JetConfig;\n+import com.hazelcast.jet.pipeline.BatchStage;\n+import com.hazelcast.jet.pipeline.Pipeline;\n+import com.hazelcast.jet.pipeline.ServiceFactories;\n+import com.hazelcast.jet.pipeline.ServiceFactory;\n+import com.hazelcast.jet.pipeline.Sinks;\n+import com.hazelcast.jet.pipeline.StreamStage;\n+import com.hazelcast.jet.pipeline.test.SimpleEvent;\n+import com.hazelcast.jet.pipeline.test.TestSources;\n+import com.hazelcast.map.EntryProcessor;\n+import com.hazelcast.map.IMap;\n+\n+import java.time.format.DateTimeFormatter;\n+import java.util.Map;\n+import java.util.concurrent.CompletableFuture;\n+import java.util.concurrent.ExecutorService;\n+import java.util.concurrent.Executors;\n+\n+import static com.hazelcast.jet.Traversers.traverseItems;\n+\n+class Migration {\n+\n+    static void config() {\n+        ClientConfig clientConfig = new ClientConfig();\n+        //tag::config1[]\n+        clientConfig.setClusterName(\"cluster_name\");\n+        //clientConfig.getGroupConfig().setName(\"cluster_name\")\n+        //end::config1[]\n+\n+        Config config = new Config();\n+        //tag::config2[]\n+        config.getMapConfig(\"map_name\").getEventJournalConfig();\n+        //config.getMapEventJournalConfig(\"map_name\")\n+        //end::config2[]\n+\n+        JetConfig jetConfig = new JetConfig();\n+        //tag::config3[]\n+        jetConfig.getHazelcastConfig().getMetricsConfig().setCollectionFrequencySeconds(1);\n+        //jetConfig.getMetricsConfig().setCollectionIntervalSeconds(1);\n+        //end::config3[]\n+    }\n+\n+    static void pipeline() {\n+        Pipeline pipeline = Pipeline.create();\n+        //tag::pipeline1[]\n+        pipeline.readFrom(TestSources.items(1, 2, 3)).writeTo(Sinks.logger());\n+        //pipeline.drawFrom(TestSources.items(1, 2, 3)).drainTo(Sinks.logger());\n+        //end::pipeline1[]\n+\n+        //tag::pipeline2[]\n+        pipeline.readFrom(TestSources.items(1, 2, 3))\n+                .filterUsingService(\n+                        ServiceFactories.sharedService(pctx -> 1),\n+                        (svc, i) -> i % 2 == svc)\n+                .writeTo(Sinks.logger());\n+\n+        /*\n+        pipeline.drawFrom(TestSources.items(1, 2, 3))\n+                .filterUsingContext(\n+                        ContextFactory.withCreateFn(i -> 1),\n+                        (ctx, i) -> i % 2 == ctx)\n+                .drainTo(Sinks.logger());\n+        */\n+        //end::pipeline2[]\n+    }\n+\n+    static void entryProcessor() {\n+        JetInstance jet = Jet.newJetInstance();\n+        IMap<Object, Object> map = jet.getMap(\"map\");\n+\n+        //tag::entryProcessor1[]\n+        FunctionEx<Map.Entry<String, Integer>, EntryProcessor<String, Integer, Void>> entryProcFn =\n+                entry ->\n+                        (EntryProcessor<String, Integer, Void>) e -> {\n+                            e.setValue(e.getValue() == null ? 1 : e.getValue() + 1);\n+                            return null;\n+                        };\n+        Sinks.mapWithEntryProcessor(map, Map.Entry::getKey, entryProcFn);\n+\n+        /*\n+        FunctionEx<Map.Entry<String, Integer>, EntryProcessor<String, Integer>> entryProcFn =\n+                entry ->\n+                        (EntryProcessor<String, Integer>) e -> {\n+                            e.setValue(e.getValue() == null ? 1 : e.getValue() + 1);\n+                            return null;\n+                        };\n+        Sinks.mapWithEntryProcessor(map, Map.Entry::getKey, entryProcFn);\n+        */\n+        //end::entryProcessor1[]\n+    }\n+\n+    static void serviceFactory() {\n+        //tag::serviceFactory1[]\n+        ServiceFactories.sharedService(ctx -> Executors.newFixedThreadPool(8), ExecutorService::shutdown);\n+        //ContextFactory.withCreateFn(jet -> Executors.newFixedThreadPool(8)).withLocalSharing();\n+\n+        ServiceFactories.nonSharedService(ctx -> DateTimeFormatter.ofPattern(\"HH:mm:ss.SSS\"), ConsumerEx.noop());\n+        //ContextFactory.withCreateFn(jet -> DateTimeFormatter.ofPattern(\"HH:mm:ss.SSS\"))\n+        //end::serviceFactory1[]\n+\n+        Pipeline pipeline = Pipeline.create();\n+        BatchStage<Runnable> stage = pipeline.readFrom(TestSources.items(1, 2, 3)).map(i -> (Runnable) () -> {});\n+\n+        //tag::serviceFactory2[]\n+        stage.mapUsingServiceAsync(\n+                ServiceFactories.sharedService(ctx -> Executors.newFixedThreadPool(8)),\n+                2,\n+                false,\n+                (exec, task) -> CompletableFuture.supplyAsync(() -> task, exec)\n+        );\n+\n+        /*\n+        stage.mapUsingContextAsync(\n+                ContextFactory.withCreateFn(jet -> Executors.newFixedThreadPool(8))\n+                        .withMaxPendingCallsPerProcessor(2)\n+                        .withUnorderedAsyncResponses(),\n+                (exec, task) -> CompletableFuture.supplyAsync(() -> task, exec)\n+        );\n+        */\n+        //end::serviceFactory2[]\n+    }\n+\n+    static void async() {\n+        Pipeline p = Pipeline.create();\n+        ServiceFactory<?, ExecutorService> serviceFactory = ServiceFactories.sharedService(ctx -> Executors.newFixedThreadPool(8));\n+\n+        StreamStage<Long> stage = p.readFrom(TestSources.itemStream(3))\n+                .withoutTimestamps()\n+                .map(SimpleEvent::sequence);\n+\n+        //tag::async1[]\n+        stage.mapUsingServiceAsync(serviceFactory,\n+                (executor, item) -> {\n+                    CompletableFuture<Traverser<String>> f = new CompletableFuture<>();\n+                    executor.submit(() -> f.complete(traverseItems(item + \"-1\", item + \"-2\", item + \"-3\")));", "originalCommit": "0f354ae66e9a6527ac9872966fc0152c23439cce", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dc3d7386686b40990d039acabd53333fdeb861e1", "url": "https://github.com/hazelcast/hazelcast-jet/commit/dc3d7386686b40990d039acabd53333fdeb861e1", "message": "Adjust code sample", "committedDate": "2020-02-13T10:26:23Z", "type": "commit"}]}