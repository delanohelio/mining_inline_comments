{"pr_number": 1996, "pr_title": "Increase python test coverage", "pr_createdAt": "2020-02-19T16:33:51Z", "pr_url": "https://github.com/hazelcast/hazelcast-jet/pull/1996", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgzODk2Ng==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1996#discussion_r381838966", "bodyText": "Very minor, but this has a double comment", "author": "mtopolnik", "createdAt": "2020-02-20T08:10:32Z", "path": "extensions/python/src/test/java/com/hazelcast/jet/python/PythonServiceTest.java", "diffHunk": "@@ -228,6 +231,52 @@ public void streamStage_mapUsingPython_withCleanupScript() throws Exception {\n         assertTrue(\"Cleanup script didn't run\", new File(baseDir, outcomeFilename).isFile());\n     }\n \n+    @Test\n+    public void batchStage_mapUsingPythonFailure() {\n+        // Given\n+        PythonServiceConfig cfg = new PythonServiceConfig()\n+                .setBaseDir(baseDir.toString())\n+                .setHandlerModule(\"echo\")\n+                .setHandlerFunction(\"notExistsFunction\");\n+        Pipeline p = Pipeline.create();\n+        BatchStage<String> stage = p.readFrom(TestSources.items(\"1\"));\n+\n+        // When\n+        stage.apply(mapUsingPythonBatch(cfg)).setLocalParallelism(2)\n+                .writeTo(Sinks.logger());\n+\n+        // Then\n+        try {\n+            instance().newJob(p).join();\n+            fail();\n+        } catch (CompletionException ex) {\n+//            // expected", "originalCommit": "b81308c665e3d4276742d24eb5ce23f9abea256c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6d12b256114bd3c6e6ee00b2675e7a7254ff5399", "url": "https://github.com/hazelcast/hazelcast-jet/commit/6d12b256114bd3c6e6ee00b2675e7a7254ff5399", "message": "Increase python test coverage", "committedDate": "2020-02-20T08:20:26Z", "type": "commit"}, {"oid": "6d12b256114bd3c6e6ee00b2675e7a7254ff5399", "url": "https://github.com/hazelcast/hazelcast-jet/commit/6d12b256114bd3c6e6ee00b2675e7a7254ff5399", "message": "Increase python test coverage", "committedDate": "2020-02-20T08:20:26Z", "type": "forcePushed"}]}