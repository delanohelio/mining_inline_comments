{"pr_number": 2413, "pr_title": "Add windows-jenkins profile", "pr_createdAt": "2020-07-21T13:10:19Z", "pr_url": "https://github.com/hazelcast/hazelcast-jet/pull/2413", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYwNjMyMQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2413#discussion_r458606321", "bodyText": "Maybe IgnoreInJenkinsOnWindows would be a less confusing name.", "author": "jbartok", "createdAt": "2020-07-22T07:57:32Z", "path": "hazelcast-jet-core/src/test/java/com/hazelcast/jet/test/IgnoreOnJenkinsWindows.java", "diffHunk": "@@ -0,0 +1,25 @@\n+/*\n+ * Copyright (c) 2008-2020, Hazelcast, Inc. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.hazelcast.jet.test;\n+\n+/**\n+ * Category marker for the tests which should not be executed in windows profile on Jenkins.\n+ * <p>\n+ * This is typically used for tests which use docker.\n+ */\n+public interface IgnoreOnJenkinsWindows {", "originalCommit": "e0cb8c7bfd45417a39fab6d8a845895f59188b1d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYwODY0MA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2413#discussion_r458608640", "bodyText": "Profiles popping up like mushrooms after the rain... Is it possible to specify the tests to ignore via some system variable or something that doesn't require separate profiles for everything?", "author": "jbartok", "createdAt": "2020-07-22T08:01:27Z", "path": "pom.xml", "diffHunk": "@@ -598,6 +598,41 @@\n                 </plugins>\n             </build>\n         </profile>\n+        <profile>\n+            <id>windows-jenkins</id>", "originalCommit": "e0cb8c7bfd45417a39fab6d8a845895f59188b1d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc3MzY2Mw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2413#discussion_r458773663", "bodyText": "Ok, I'll try to refactor it to rather use ignore.in.jenkins.on.windows system property and run it in all profile.", "author": "olukas", "createdAt": "2020-07-22T13:01:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYwODY0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI0MzQ1MQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2413#discussion_r459243451", "bodyText": "@jbartok Unfortunately using Assume based on system property and skipping test in @BeforeClass is problematic for this case. Containers in some classes (com.hazelcast.jet.impl.connector.JmsSourceIntegrationTest_RabbitMQ, com.hazelcast.jet.impl.connector.WriteJdbcPTest and com.hazelcast.jet.s3.S3MockTest) are defined in @ClassRule which means they are initialized before we can skip them (i.e. those tests they fail before they should be skipped).\nI will use original implementation with windows-jenkins profile.", "author": "olukas", "createdAt": "2020-07-23T06:43:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYwODY0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI0NzYzOA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2413#discussion_r459247638", "bodyText": "Ok", "author": "jbartok", "createdAt": "2020-07-23T06:54:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYwODY0MA=="}], "type": "inlineReview"}, {"oid": "ba2f458e60aa991d06f20d9a400492c7a7a6b9d1", "url": "https://github.com/hazelcast/hazelcast-jet/commit/ba2f458e60aa991d06f20d9a400492c7a7a6b9d1", "message": "Add windows-jenkins profile", "committedDate": "2020-07-23T06:52:07Z", "type": "commit"}, {"oid": "f4234eca4f04db7eb19ec08fc04536250085cc1f", "url": "https://github.com/hazelcast/hazelcast-jet/commit/f4234eca4f04db7eb19ec08fc04536250085cc1f", "message": "Rename Category", "committedDate": "2020-07-23T06:52:07Z", "type": "commit"}, {"oid": "f4234eca4f04db7eb19ec08fc04536250085cc1f", "url": "https://github.com/hazelcast/hazelcast-jet/commit/f4234eca4f04db7eb19ec08fc04536250085cc1f", "message": "Rename Category", "committedDate": "2020-07-23T06:52:07Z", "type": "forcePushed"}]}