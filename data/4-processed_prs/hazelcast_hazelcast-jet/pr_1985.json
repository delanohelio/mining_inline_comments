{"pr_number": 1985, "pr_title": "Add serialization sample implementation.", "pr_createdAt": "2020-02-17T12:52:46Z", "pr_url": "https://github.com/hazelcast/hazelcast-jet/pull/1985", "timeline": [{"oid": "73bfc92cf40967b68ebfbbd86b24b698cf3acc9e", "url": "https://github.com/hazelcast/hazelcast-jet/commit/73bfc92cf40967b68ebfbbd86b24b698cf3acc9e", "message": "(De)serialization docs.", "committedDate": "2020-02-13T13:29:23Z", "type": "commit"}, {"oid": "37df40991d5b399eb7f2615110c2a82897585b13", "url": "https://github.com/hazelcast/hazelcast-jet/commit/37df40991d5b399eb7f2615110c2a82897585b13", "message": "Wrap each line to 72 chars.", "committedDate": "2020-02-13T14:01:58Z", "type": "commit"}, {"oid": "aab6a607d08defb31c3d830b9ebcd15ee95befcd", "url": "https://github.com/hazelcast/hazelcast-jet/commit/aab6a607d08defb31c3d830b9ebcd15ee95befcd", "message": "Add size comparison.", "committedDate": "2020-02-13T15:21:01Z", "type": "commit"}, {"oid": "47f7861642d1b831be206a1ab84d992f35b7eff8", "url": "https://github.com/hazelcast/hazelcast-jet/commit/47f7861642d1b831be206a1ab84d992f35b7eff8", "message": "Merge remote-tracking branch 'upstream/docs' into docs", "committedDate": "2020-02-13T15:48:12Z", "type": "commit"}, {"oid": "62471c8fb8b903642f0b1e287383b65e3df81a8d", "url": "https://github.com/hazelcast/hazelcast-jet/commit/62471c8fb8b903642f0b1e287383b65e3df81a8d", "message": "Add (de)serialization pros and cons.", "committedDate": "2020-02-14T08:17:53Z", "type": "commit"}, {"oid": "b990ddf1fb76417c8a4f3cdffec7795cdfc1b299", "url": "https://github.com/hazelcast/hazelcast-jet/commit/b990ddf1fb76417c8a4f3cdffec7795cdfc1b299", "message": "Address reviews.", "committedDate": "2020-02-14T09:31:06Z", "type": "commit"}, {"oid": "d798703990dedb23fb5147ca22969aa0994d8984", "url": "https://github.com/hazelcast/hazelcast-jet/commit/d798703990dedb23fb5147ca22969aa0994d8984", "message": "Amend numbers & add (not yet active) benchmark link.", "committedDate": "2020-02-14T14:51:12Z", "type": "commit"}, {"oid": "9626d1a50e99f9a6b59de2c87d9e589f61710a65", "url": "https://github.com/hazelcast/hazelcast-jet/commit/9626d1a50e99f9a6b59de2c87d9e589f61710a65", "message": "Merge remote-tracking branch 'upstream/docs' into docs", "committedDate": "2020-02-14T16:15:44Z", "type": "commit"}, {"oid": "53577042457a6033716bdd0aa6b2660dc6e9c63d", "url": "https://github.com/hazelcast/hazelcast-jet/commit/53577042457a6033716bdd0aa6b2660dc6e9c63d", "message": "Merge remote-tracking branch 'upstream/docs' into docs", "committedDate": "2020-02-17T07:20:45Z", "type": "commit"}, {"oid": "b6b86fddd0069f76c4da5db4e0ef1cde25819b9c", "url": "https://github.com/hazelcast/hazelcast-jet/commit/b6b86fddd0069f76c4da5db4e0ef1cde25819b9c", "message": "Merge remote-tracking branch 'upstream/docs' into docs", "committedDate": "2020-02-17T11:21:07Z", "type": "commit"}, {"oid": "964ceb55ac19956962ad19cfc57e27532d078c2a", "url": "https://github.com/hazelcast/hazelcast-jet/commit/964ceb55ac19956962ad19cfc57e27532d078c2a", "message": "Add serialization sample implementation.", "committedDate": "2020-02-17T12:51:27Z", "type": "commit"}, {"oid": "c4d5e76e7bc05b0f061ee0903060766bdec6ee7c", "url": "https://github.com/hazelcast/hazelcast-jet/commit/c4d5e76e7bc05b0f061ee0903060766bdec6ee7c", "message": "Add serialization sample implementation.", "committedDate": "2020-02-17T12:57:13Z", "type": "commit"}, {"oid": "66f21e005e8f49d6b2b4c53e17f431fca9a76d59", "url": "https://github.com/hazelcast/hazelcast-jet/commit/66f21e005e8f49d6b2b4c53e17f431fca9a76d59", "message": "Merge remote-tracking branch 'upstream/docs' into serialization_docs", "committedDate": "2020-02-17T13:07:01Z", "type": "commit"}, {"oid": "99d851885836034cf36d4bf69b42335ba3a27159", "url": "https://github.com/hazelcast/hazelcast-jet/commit/99d851885836034cf36d4bf69b42335ba3a27159", "message": "Merge branch 'docs' into serialization_docs", "committedDate": "2020-02-17T14:07:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIxMjY0OA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/1985#discussion_r380212648", "bodyText": "I think worth mentioning is SerializerHooks, and also how to mention it when using a standalone cluster", "author": "cangencer", "createdAt": "2020-02-17T14:28:47Z", "path": "site/docs/api/serialization.md", "diffHunk": "@@ -84,11 +77,49 @@ Strategy                                                   Number of Bytes   Ove\n java.io.Serializable                                                   162          523\n java.io.Externalizable                                                  87          234\n com.hazelcast.nio.serialization.Portable                               104          300\n-com.hazelcast.nio.serialization.DataSerializable                        88          238\n-com.hazelcast.nio.serialization.IdentifiedDataSerializable              35           34\n com.hazelcast.nio.serialization.StreamSerializer                        26            0\n ```\n \n+## Sample implementation\n+\n+For best performance we recommend using \n+[com.hazelcast.nio.serialization.StreamSerializer](https://docs.hazelcast.org/docs/latest/javadoc/com/hazelcast/nio/serialization/StreamSerializer.html) or\n+[com.hazelcast.nio.serialization.ByteArraySerializer](https://docs.hazelcast.org/docs/latest/javadoc/com/hazelcast/nio/serialization/ByteArraySerializer.html).\n+Below you can find a sample implementation of `StreamSerializer` for \n+`Person` (mind the type id which should be unique across all stream serializers):\n+```\n+class PersonSerializer implements StreamSerializer<Person> {\n+\n+        private static final int TYPE_ID = 1;\n+\n+        @Override\n+        public int getTypeId() {\n+            return TYPE_ID;\n+        }\n+\n+        @Override\n+        public void write(ObjectDataOutput out, Person person) throws IOException {\n+            out.writeUTF(person.firstName);\n+            out.writeUTF(person.lastName);\n+            out.writeInt(person.age);\n+            out.writeFloat(person.height);\n+        }\n+\n+        @Override\n+        public Person read(ObjectDataInput in) throws IOException {\n+            return new Person(in.readUTF(), in.readUTF(), in.readInt(), in.readFloat());\n+        }\n+    }\n+```\n+\n+Then the serializer should be registered with Jet on cluster startup:\n+```\n+JetConfig config = new JetConfig();\n+config.getHazelcastConfig().getSerializationConfig()\n+    .addSerializerConfig(new SerializerConfig().setTypeClass(Person.class).setClass(PersonSerializer.class));\n+JetInstance jet = Jet.newJetInstance(config);", "originalCommit": "99d851885836034cf36d4bf69b42335ba3a27159", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3cef45d36ce788f5fd0178cdf26a0705b1230338", "url": "https://github.com/hazelcast/hazelcast-jet/commit/3cef45d36ce788f5fd0178cdf26a0705b1230338", "message": "Add pipeline serialization & serializer hook registration sections.", "committedDate": "2020-02-18T08:57:13Z", "type": "commit"}, {"oid": "f95b58b4b24f6f1cb895c5862f7424e560563a19", "url": "https://github.com/hazelcast/hazelcast-jet/commit/f95b58b4b24f6f1cb895c5862f7424e560563a19", "message": "Merge remote-tracking branch 'upstream/docs' into serialization_docs\n\n# Conflicts:\n#\tsite/docs/api/serialization.md", "committedDate": "2020-02-18T09:04:15Z", "type": "commit"}, {"oid": "5fed93ed5172ed5a0e97f86cbfa585eb83b6295a", "url": "https://github.com/hazelcast/hazelcast-jet/commit/5fed93ed5172ed5a0e97f86cbfa585eb83b6295a", "message": "Fix wording.", "committedDate": "2020-02-18T10:46:51Z", "type": "commit"}]}