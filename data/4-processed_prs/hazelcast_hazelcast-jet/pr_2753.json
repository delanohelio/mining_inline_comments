{"pr_number": 2753, "pr_title": "Improve CSV reading performance in SQL", "pr_createdAt": "2020-12-11T16:01:41Z", "pr_url": "https://github.com/hazelcast/hazelcast-jet/pull/2753", "timeline": [{"oid": "a85245aba2cb59e573cfdb7969f051e50873bc36", "url": "https://github.com/hazelcast/hazelcast-jet/commit/a85245aba2cb59e573cfdb7969f051e50873bc36", "message": "Improve CSV reading performance in SQL\n\nInstead of reading into memory-heavy LinkedHashMap, read CSVs internally\ninto String[].", "committedDate": "2020-12-11T15:54:10Z", "type": "commit"}, {"oid": "bff559c8fc476db3d06c1dc150beef5b47208e34", "url": "https://github.com/hazelcast/hazelcast-jet/commit/bff559c8fc476db3d06c1dc150beef5b47208e34", "message": "Fix checkstyle", "committedDate": "2020-12-11T16:03:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1NzIxNw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542157217", "bodyText": "I think you could avoid projection if header == stringArrayFieldList.", "author": "gierlachg", "createdAt": "2020-12-14T07:11:48Z", "path": "extensions/csv/src/main/java/com/hazelcast/jet/csv/impl/CsvReadFileFnProvider.java", "diffHunk": "@@ -47,18 +53,49 @@\n )\n public class CsvReadFileFnProvider implements ReadFileFnProvider {\n \n+    @SuppressWarnings(\"unchecked\")\n     @Nonnull\n     @Override\n     public <T> FunctionEx<Path, Stream<T>> createReadFileFn(@Nonnull FileFormat<T> format) {\n         CsvFileFormat<T> csvFileFormat = (CsvFileFormat<T>) format;\n         Class<?> formatClazz = csvFileFormat.clazz(); // Format is not Serializable\n \n         return path -> {\n-            ObjectReader reader = new CsvMapper().readerFor(formatClazz != null ? formatClazz : Map.class)\n-                                                 .withoutFeatures(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n-                                                 .with(CsvSchema.emptySchema().withHeader());\n             FileInputStream fis = new FileInputStream(path.toFile());\n-            return StreamSupport.<T>stream(Spliterators.spliteratorUnknownSize(reader.readValues(fis), ORDERED), false)\n+            MappingIterator<T> iterator;\n+            Function<T, T> projection = r -> r;\n+            if (formatClazz == String[].class) {\n+                ObjectReader reader = new CsvMapper().enable(Feature.WRAP_AS_ARRAY)\n+                                                     .readerFor(String[].class)\n+                                                     .with(CsvSchema.emptySchema().withSkipFirstDataRow(false));\n+                iterator = reader.readValues(fis);\n+                if (!iterator.hasNext()) {\n+                    throw new JetException(\"Header row missing in \" + path);\n+                }\n+                String[] header = (String[]) iterator.next();\n+                List<String> fieldList = csvFileFormat.stringArrayFieldList();\n+                if (fieldList != null) {\n+                    int[] simpleFieldMap = createSimpleFieldMap(fieldList, header);", "originalCommit": "bff559c8fc476db3d06c1dc150beef5b47208e34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjMwMTI2Mw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542301263", "bodyText": "fixed", "author": "viliam-durina", "createdAt": "2020-12-14T11:09:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1NzIxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1ODE0Ng==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542158146", "bodyText": "Hadoop variant needs exactly same logic, I guess it could be somehow shared.", "author": "gierlachg", "createdAt": "2020-12-14T07:14:10Z", "path": "extensions/csv/src/main/java/com/hazelcast/jet/csv/impl/CsvReadFileFnProvider.java", "diffHunk": "@@ -47,18 +53,49 @@\n )\n public class CsvReadFileFnProvider implements ReadFileFnProvider {\n \n+    @SuppressWarnings(\"unchecked\")\n     @Nonnull\n     @Override\n     public <T> FunctionEx<Path, Stream<T>> createReadFileFn(@Nonnull FileFormat<T> format) {\n         CsvFileFormat<T> csvFileFormat = (CsvFileFormat<T>) format;\n         Class<?> formatClazz = csvFileFormat.clazz(); // Format is not Serializable\n \n         return path -> {\n-            ObjectReader reader = new CsvMapper().readerFor(formatClazz != null ? formatClazz : Map.class)\n-                                                 .withoutFeatures(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n-                                                 .with(CsvSchema.emptySchema().withHeader());\n             FileInputStream fis = new FileInputStream(path.toFile());\n-            return StreamSupport.<T>stream(Spliterators.spliteratorUnknownSize(reader.readValues(fis), ORDERED), false)\n+            MappingIterator<T> iterator;\n+            Function<T, T> projection = r -> r;\n+            if (formatClazz == String[].class) {\n+                ObjectReader reader = new CsvMapper().enable(Feature.WRAP_AS_ARRAY)\n+                                                     .readerFor(String[].class)\n+                                                     .with(CsvSchema.emptySchema().withSkipFirstDataRow(false));\n+                iterator = reader.readValues(fis);", "originalCommit": "bff559c8fc476db3d06c1dc150beef5b47208e34", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1ODQ3NA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542158474", "bodyText": "We could use a test, proving that projection works.", "author": "gierlachg", "createdAt": "2020-12-14T07:14:56Z", "path": "extensions/hadoop/src/test/java/com/hazelcast/jet/hadoop/file/CsvFileFormatTest.java", "diffHunk": "@@ -33,7 +33,6 @@\n \n     @Test\n     public void shouldReadCsvFile() {\n-", "originalCommit": "bff559c8fc476db3d06c1dc150beef5b47208e34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjczNDAxOA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542734018", "bodyText": "Added a unit test for the Util.createFieldProjection() method.", "author": "viliam-durina", "createdAt": "2020-12-14T20:16:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1ODQ3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzExMzAyNA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r543113024", "bodyText": "I agree there should be some tests in the file connector for this. It is user facing API and there is non trivial amount of new code here. I pushed some.", "author": "frant-hartm", "createdAt": "2020-12-15T07:39:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1ODQ3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1OTMzNg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542159336", "bodyText": "Does it make sense to have clazz & stringArrayFieldList at the same time? Maybe, both should be final and we should have 2 constructors setting clazz in one and stringArrayFieldList in the other?", "author": "gierlachg", "createdAt": "2020-12-14T07:16:56Z", "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/pipeline/file/CsvFileFormat.java", "diffHunk": "@@ -34,6 +35,7 @@\n     public static final String FORMAT_CSV = \"csv\";\n \n     private Class<T> clazz;\n+    private List<String> stringArrayFieldList;", "originalCommit": "bff559c8fc476db3d06c1dc150beef5b47208e34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjcyMTY5NA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542721694", "bodyText": "I followed the style already in the class, with a mutable clazz.", "author": "viliam-durina", "createdAt": "2020-12-14T20:05:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1OTMzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzExNDU1OA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r543114558", "bodyText": "We originaly had a final clazz, changed it with the SQL file connector. now looking at all the places maybe we could go back to final clazz and always provide a class (either Map, instead of null), TreeNode for json etc. This way we could avoid the cases if null then this class..", "author": "frant-hartm", "createdAt": "2020-12-15T07:42:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1OTMzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2MDQwNQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542160405", "bodyText": "I'm not sure i like formatForSample & formatForData. Maybe just implement resolveMetadata in subclasses?", "author": "gierlachg", "createdAt": "2020-12-14T07:19:32Z", "path": "hazelcast-jet-sql/src/main/java/com/hazelcast/jet/sql/impl/connector/file/AvroMetadataResolver.java", "diffHunk": "@@ -33,7 +33,7 @@\n     private static final FileFormat<Map<String, String>> FORMAT = FileFormat.avro();\n \n     @Override\n-    protected FileFormat<?> format() {\n+    protected FileFormat<?> formatForSample() {", "originalCommit": "bff559c8fc476db3d06c1dc150beef5b47208e34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjcxMDg5Mg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542710892", "bodyText": "done in 3772e38", "author": "viliam-durina", "createdAt": "2020-12-14T19:55:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2MDQwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2MDcxOQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542160719", "bodyText": "Why distinct is needed here? Maybe it should be part of validation?", "author": "gierlachg", "createdAt": "2020-12-14T07:20:14Z", "path": "hazelcast-jet-sql/src/main/java/com/hazelcast/jet/sql/impl/connector/file/CsvMetadataResolver.java", "diffHunk": "@@ -42,7 +50,16 @@\n     }\n \n     @Override\n-    protected SupplierEx<QueryTarget> queryTargetSupplier() {\n-        return CsvQueryTarget::new;\n+    protected SupplierEx<QueryTarget> queryTargetSupplier(List<MappingField> resolvedFields) {\n+        List<String> fieldMap = createFieldList(resolvedFields);\n+        return () -> new CsvQueryTarget(fieldMap);\n+    }\n+\n+    @Nonnull\n+    private static List<String> createFieldList(List<MappingField> resolvedFields) {\n+        return resolvedFields.stream()\n+                      .map(f -> f.externalName() != null ? f.externalName() : f.name())\n+                      .distinct()", "originalCommit": "bff559c8fc476db3d06c1dc150beef5b47208e34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjcxNTEyMw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542715123", "bodyText": "You could theoretically add a mapping with two columns pointing to the same external name:\nCREATE MAPPING my_file (\n  col1 INT EXTERNAL NAME col1,\n  col1_again INT EXTERNAL NAME col1\n) ...\n\nWill add a test for that.", "author": "viliam-durina", "createdAt": "2020-12-14T19:58:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2MDcxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2MDk5MA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542160990", "bodyText": "Is res[index] == -1 condition needed?", "author": "gierlachg", "createdAt": "2020-12-14T07:20:56Z", "path": "extensions/csv/src/main/java/com/hazelcast/jet/csv/impl/CsvReadFileFnProvider.java", "diffHunk": "@@ -68,4 +105,17 @@\n     public String format() {\n         return CsvFileFormat.FORMAT_CSV;\n     }\n+\n+    private static int[] createSimpleFieldMap(List<String> fieldList, String[] actualHeader) {\n+        int[] res = new int[fieldList.size()];\n+        Arrays.fill(res, -1);\n+        for (int i = 0; i < actualHeader.length; i++) {\n+            int index = fieldList.indexOf(actualHeader[i]);\n+            // if the header is present in the file and we didn't encounter it yet, store its index\n+            if (index >= 0 && res[index] == -1) {", "originalCommit": "bff559c8fc476db3d06c1dc150beef5b47208e34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjcxMzIwOQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r542713209", "bodyText": "Yes, that's to ensure that if a duplicate header is found, the first one is used, not the last one. We don't overwrite index for a column that already has an index.", "author": "viliam-durina", "createdAt": "2020-12-14T19:57:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2MDk5MA=="}], "type": "inlineReview"}, {"oid": "ce994cc7afd6db9ba292a1663e1db21fd886c348", "url": "https://github.com/hazelcast/hazelcast-jet/commit/ce994cc7afd6db9ba292a1663e1db21fd886c348", "message": "Finish the change in Hadoop module", "committedDate": "2020-12-14T19:42:07Z", "type": "commit"}, {"oid": "3772e38e13cd59129667b4c7c85661e7e52ebacd", "url": "https://github.com/hazelcast/hazelcast-jet/commit/3772e38e13cd59129667b4c7c85661e7e52ebacd", "message": "Move more logic to subclasses", "committedDate": "2020-12-14T19:54:28Z", "type": "commit"}, {"oid": "201b483d5652e1fa925c4501b449e6cd6e5222cd", "url": "https://github.com/hazelcast/hazelcast-jet/commit/201b483d5652e1fa925c4501b449e6cd6e5222cd", "message": "Add test for duplicate external name", "committedDate": "2020-12-14T20:02:52Z", "type": "commit"}, {"oid": "49357355c5163935190cb639ac2f0e96a20701f7", "url": "https://github.com/hazelcast/hazelcast-jet/commit/49357355c5163935190cb639ac2f0e96a20701f7", "message": "Revert pom.xml", "committedDate": "2020-12-14T20:03:22Z", "type": "commit"}, {"oid": "1cf8a9cbe0ca35ed39f8847148a1544428aa599f", "url": "https://github.com/hazelcast/hazelcast-jet/commit/1cf8a9cbe0ca35ed39f8847148a1544428aa599f", "message": "Add test for Util.createFieldProjection", "committedDate": "2020-12-14T20:16:02Z", "type": "commit"}, {"oid": "3eab14a181beb56b4562f7cf3a2ef96c3d5f2e62", "url": "https://github.com/hazelcast/hazelcast-jet/commit/3eab14a181beb56b4562f7cf3a2ef96c3d5f2e62", "message": "Fix style", "committedDate": "2020-12-14T20:17:29Z", "type": "commit"}, {"oid": "0e8eedec80108039af44871fc1ee9948e08de167", "url": "https://github.com/hazelcast/hazelcast-jet/commit/0e8eedec80108039af44871fc1ee9948e08de167", "message": "Add CsvFileFormatTest for remapping functionality", "committedDate": "2020-12-15T07:33:44Z", "type": "commit"}, {"oid": "197fa3d8e1dc2e752fd373dfa23867752953a614", "url": "https://github.com/hazelcast/hazelcast-jet/commit/197fa3d8e1dc2e752fd373dfa23867752953a614", "message": "Format", "committedDate": "2020-12-15T07:40:05Z", "type": "commit"}, {"oid": "438654d10a8b987cdf57247b2d07d4ed72702469", "url": "https://github.com/hazelcast/hazelcast-jet/commit/438654d10a8b987cdf57247b2d07d4ed72702469", "message": "Merge remote-tracking branch 'viliam/csv-performance' into csv-performance", "committedDate": "2020-12-15T07:40:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzExMjI1OQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r543112259", "bodyText": "Maybe use org.apache.hadoop.conf.Configuration#setStrings(String, String[])", "author": "frant-hartm", "createdAt": "2020-12-15T07:38:17Z", "path": "extensions/hadoop/src/main/java/com/hazelcast/jet/hadoop/impl/HadoopFileSourceFactory.java", "diffHunk": "@@ -197,7 +199,13 @@ public String format() {\n \n             Class<?> clazz = csvFileFormat.clazz();\n             if (clazz != null) {\n-                job.getConfiguration().set(CSV_INPUT_FORMAT_BEAN_CLASS, clazz.getCanonicalName());\n+                job.getConfiguration().set(CSV_INPUT_FORMAT_BEAN_CLASS, clazz.getName());\n+            }\n+            List<String> fieldList = csvFileFormat.stringArrayFieldList();\n+            if (fieldList != null) {\n+                for (int i = 0; i < fieldList.size(); i++) {\n+                    job.getConfiguration().set(CSV_INPUT_FORMAT_FIELD_LIST_PREFIX + i, fieldList.get(i));", "originalCommit": "0e8eedec80108039af44871fc1ee9948e08de167", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzYzMjM4OQ==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r543632389", "bodyText": "Looked good, but it trivially joins the strings using \",\" and the uses String.split(\",\"). Though not common, a field name can contain a ,, especially in CSV when headers are sometimes typed in Excel...", "author": "viliam-durina", "createdAt": "2020-12-15T19:37:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzExMjI1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzExMzM1Nw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r543113357", "bodyText": "The false condition here isn't covered by tests.", "author": "frant-hartm", "createdAt": "2020-12-15T07:40:22Z", "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/impl/util/Util.java", "diffHunk": "@@ -548,4 +550,51 @@ public static String formatJobDuration(long durationMs) {\n         String textUpToHours = String.format(\"%02d:%02d:%02d.%03d\", hours, minutes, seconds, millis);\n         return sign + (durationMs > 0 ? durationMs + \"d \" : \"\") + textUpToHours;\n     }\n+\n+    /**\n+     * Given a list of input field names and a list of output field names\n+     * creates a projection to map between these.\n+     * <p>\n+     * For example, if input names are {@code [surname, name, address]} and\n+     * output names are {@code [name, surname, age]}, then the function,\n+     * applied to {@code [Smith, John, New York]} will return {@code [John,\n+     * Smith, (null)]}. That is, it will map the fields from the input order to\n+     * output order. The output field named {@code age} is missing in input, so\n+     * the value for it is {@code null} for any input.\n+     *\n+     * @param inputFields the input headers\n+     * @param outputFields the output headers\n+     * @return the indices to map input to output\n+     */\n+    @Nonnull\n+    public static Function<String[], String[]> createFieldProjection(\n+            @Nonnull String[] inputFields,\n+            @Nonnull List<String> outputFields\n+    ) {\n+        if (outputFields.equals(asList(inputFields))) {\n+            // shortcut - the mapping is an identity\n+            return i -> i;\n+        }\n+        int[] simpleFieldMap = new int[outputFields.size()];\n+        Arrays.fill(simpleFieldMap, -1);\n+        for (int i = 0; i < inputFields.length; i++) {\n+            int index = outputFields.indexOf(inputFields[i]);\n+            // if the inputFields is present in the file and we didn't encounter it yet, store its index\n+            if (index >= 0 && simpleFieldMap[index] == -1) {", "originalCommit": "0e8eedec80108039af44871fc1ee9948e08de167", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY0MjYxNg==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r543642616", "bodyText": "Both conditions are covered in integration tests. I added unit test coverage, if that's what you mean.", "author": "viliam-durina", "createdAt": "2020-12-15T19:53:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzExMzM1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzExNTY3NA==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r543115674", "bodyText": "I find the double negation less readable.", "author": "frant-hartm", "createdAt": "2020-12-15T07:44:36Z", "path": "hazelcast-jet-core/src/main/java/com/hazelcast/jet/pipeline/file/FileSourceBuilder.java", "diffHunk": "@@ -98,7 +98,7 @@\n      */\n     public FileSourceBuilder(@Nonnull String path) {\n         this.path = requireNonNull(path, \"path must not be null\");\n-        if (!(Paths.get(path).isAbsolute() || hasHadoopPrefix(path))) {\n+        if (!hasHadoopPrefix(path) && !Paths.get(path).isAbsolute()) {", "originalCommit": "0e8eedec80108039af44871fc1ee9948e08de167", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY0NDY4Nw==", "url": "https://github.com/hazelcast/hazelcast-jet/pull/2753#discussion_r543644687", "bodyText": "You can't read it aloud with the parenthesis, but no dispute against taste (proti gustu \u017eiaden di\u0161put\u00e1t :) ), reverting", "author": "viliam-durina", "createdAt": "2020-12-15T19:56:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzExNTY3NA=="}], "type": "inlineReview"}, {"oid": "84f4de3ad0f29bf241049d8fd92ea8e21d12452c", "url": "https://github.com/hazelcast/hazelcast-jet/commit/84f4de3ad0f29bf241049d8fd92ea8e21d12452c", "message": "Merge branch 'master' into csv-performance\n\n# Conflicts:\n#\thazelcast-jet-core/src/main/java/com/hazelcast/jet/pipeline/file/FileSourceBuilder.java\n#\thazelcast-jet-sql/src/main/java/com/hazelcast/jet/sql/impl/connector/file/MetadataResolver.java", "committedDate": "2020-12-15T19:45:55Z", "type": "commit"}, {"oid": "97cd5c683bb658a5dcf22cc6db26aa497a8c3b35", "url": "https://github.com/hazelcast/hazelcast-jet/commit/97cd5c683bb658a5dcf22cc6db26aa497a8c3b35", "message": "Fix linter errer", "committedDate": "2020-12-15T19:52:15Z", "type": "commit"}, {"oid": "785be0ca6e46a0dca7c3d5c329da32c8e018ee2e", "url": "https://github.com/hazelcast/hazelcast-jet/commit/785be0ca6e46a0dca7c3d5c329da32c8e018ee2e", "message": "Improve unit test coverage", "committedDate": "2020-12-15T19:52:32Z", "type": "commit"}, {"oid": "5e3a8033dac9bdf38f8aa57828722e6ae3942efa", "url": "https://github.com/hazelcast/hazelcast-jet/commit/5e3a8033dac9bdf38f8aa57828722e6ae3942efa", "message": "Use different condition style", "committedDate": "2020-12-15T19:56:55Z", "type": "commit"}, {"oid": "30a16c804422c2549a5945b18498e5f725736842", "url": "https://github.com/hazelcast/hazelcast-jet/commit/30a16c804422c2549a5945b18498e5f725736842", "message": "Fix indentation", "committedDate": "2020-12-15T20:59:42Z", "type": "commit"}, {"oid": "f0d32b2827ae82a07e164fc155c7fda74d07d5c4", "url": "https://github.com/hazelcast/hazelcast-jet/commit/f0d32b2827ae82a07e164fc155c7fda74d07d5c4", "message": "Merge branch 'master' into csv-performance\n\n# Conflicts:\n#\textensions/hadoop/src/main/java/com/hazelcast/jet/hadoop/impl/HadoopFileSourceFactory.java\n#\thazelcast-jet-core/src/main/java/com/hazelcast/jet/impl/util/Util.java\n#\thazelcast-jet-core/src/test/java/com/hazelcast/jet/impl/util/UtilTest.java\n#\thazelcast-jet-sql/src/main/java/com/hazelcast/jet/sql/impl/connector/file/JsonMetadataResolver.java\n#\thazelcast-jet-sql/src/test/java/com/hazelcast/jet/sql/impl/connector/file/SqlCsvTest.java", "committedDate": "2021-01-13T16:06:33Z", "type": "commit"}, {"oid": "981e69db77acf85a5f77791d3300d0117bccf13e", "url": "https://github.com/hazelcast/hazelcast-jet/commit/981e69db77acf85a5f77791d3300d0117bccf13e", "message": "Formatting", "committedDate": "2021-01-14T08:25:33Z", "type": "commit"}, {"oid": "1f7265495ef3f81ecd7bc02e41a48110d5179698", "url": "https://github.com/hazelcast/hazelcast-jet/commit/1f7265495ef3f81ecd7bc02e41a48110d5179698", "message": "Refactor CSV file format API", "committedDate": "2021-01-14T12:20:34Z", "type": "commit"}, {"oid": "1d0554f74a73f5499ae9256216e1537a42e0d974", "url": "https://github.com/hazelcast/hazelcast-jet/commit/1d0554f74a73f5499ae9256216e1537a42e0d974", "message": "Merge pull request #2 from gierlachg/refactor\n\nRefactor CSV file format API", "committedDate": "2021-01-14T13:55:42Z", "type": "commit"}]}