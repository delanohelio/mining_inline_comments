{"pr_number": 1176, "pr_title": "fix(searches): show only latest result", "pr_createdAt": "2020-12-08T15:18:26Z", "pr_url": "https://github.com/camunda/camunda-bpm-platform/pull/1176", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIzMzMxOQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542233319", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              default: createNewContext\n          \n          \n            \n              default: debouncePromiseFactory", "author": "tasso94", "createdAt": "2020-12-14T09:28:20Z", "path": "webapps/ui/cockpit/src/legacy/client/scripts/directives/incidentsTab.js", "diffHunk": "@@ -19,6 +19,10 @@ var angular = require(\"angular\");\n \n var template = require(\"./incidents-tab.html.js\");\n var inspectTemplate = require(\"./incidents-tab-stacktrace.html.js\");\n+const {\n+  default: createNewContext", "originalCommit": "1f89b97cd838e17924d57fa8e054e6502b61bf07", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIzMzM5Mg==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542233392", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            const debouncePromise = createNewContext();\n          \n          \n            \n            const debouncePromise = debouncePromiseFactory();", "author": "tasso94", "createdAt": "2020-12-14T09:28:27Z", "path": "webapps/ui/cockpit/src/legacy/client/scripts/directives/incidentsTab.js", "diffHunk": "@@ -19,6 +19,10 @@ var angular = require(\"angular\");\n \n var template = require(\"./incidents-tab.html.js\");\n var inspectTemplate = require(\"./incidents-tab-stacktrace.html.js\");\n+const {\n+  default: createNewContext\n+} = require(\"../../../../modules/debouncePromise.js\");\n+const debouncePromise = createNewContext();", "originalCommit": "1f89b97cd838e17924d57fa8e054e6502b61bf07", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIzMzkwNQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542233905", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              default: createNewContext\n          \n          \n            \n              default: debouncePromiseFactory", "author": "tasso94", "createdAt": "2020-12-14T09:29:14Z", "path": "webapps/ui/cockpit/src/legacy/plugins/base/app/views/processDefinition/processInstanceTable.js", "diffHunk": "@@ -19,6 +19,11 @@ var angular = require(\"angular\");\n \n var template = require(\"./process-instance-table.html.js\");\n var searchConfig = require(\"./process-instance-search-config.json\");\n+const {\n+  default: createNewContext", "originalCommit": "1f89b97cd838e17924d57fa8e054e6502b61bf07", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIzMzk5MQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542233991", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            const debouncePromise = createNewContext();\n          \n          \n            \n            const debouncePromise = debouncePromiseFactory();", "author": "tasso94", "createdAt": "2020-12-14T09:29:21Z", "path": "webapps/ui/cockpit/src/legacy/plugins/base/app/views/processDefinition/processInstanceTable.js", "diffHunk": "@@ -19,6 +19,11 @@ var angular = require(\"angular\");\n \n var template = require(\"./process-instance-table.html.js\");\n var searchConfig = require(\"./process-instance-search-config.json\");\n+const {\n+  default: createNewContext\n+} = require(\"../../../../../../modules/debouncePromise.js\");\n+\n+const debouncePromise = createNewContext();", "originalCommit": "1f89b97cd838e17924d57fa8e054e6502b61bf07", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI0MzU4Nw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542243587", "bodyText": "In case we are in phase $apply or $digest the $scope.$apply() throws an exception. We could avoid it with the following check:\nvar phase = $scope.$root.$$phase;\nif (phase !== \"$apply\" && phase !== \"$digest\") {\n  $scope.$apply();\n}\nSince we don't respect this at many places in the code base, feel free to skip this review hint.", "author": "tasso94", "createdAt": "2020-12-14T09:42:39Z", "path": "webapps/ui/cockpit/src/legacy/plugins/base/app/views/processDefinition/processInstanceTable.js", "diffHunk": "@@ -100,10 +105,14 @@ module.exports = [\n               .$promise.then(function(data) {\n                 var total = data.count;\n \n-                return PluginProcessInstanceResource.query(pagingParams, params)\n-                  .$promise.then(function(data) {\n+                return debouncePromise(\n+                  PluginProcessInstanceResource.query(pagingParams, params)\n+                    .$promise\n+                )\n+                  .then(function(data) {\n                     $scope.processInstances = data;\n                     $scope.loadingState = data.length ? \"LOADED\" : \"EMPTY\";\n+                    $scope.$apply();", "originalCommit": "1f89b97cd838e17924d57fa8e054e6502b61bf07", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzM1ODUyOA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r553358528", "bodyText": "I replaced it at all sections where I noticed it", "author": "marstamm", "createdAt": "2021-01-07T14:24:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI0MzU4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI0NTkxMA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1176#discussion_r542245910", "bodyText": "Why do we need this logic twice? Isn't it already present in SDK-JS?", "author": "tasso94", "createdAt": "2020-12-14T09:45:58Z", "path": "webapps/ui/cockpit/src/modules/debouncePromise.js", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n+ * under one or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information regarding copyright\n+ * ownership. Camunda licenses this file to you under the Apache License,\n+ * Version 2.0; you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+export default function debouncePromiseFactory() {", "originalCommit": "1f89b97cd838e17924d57fa8e054e6502b61bf07", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "74581d9437cc87b28699921e86c31a121090390e", "url": "https://github.com/camunda/camunda-bpm-platform/commit/74581d9437cc87b28699921e86c31a121090390e", "message": "Adjust to angularJS and implement review hints", "committedDate": "2021-01-07T13:15:57Z", "type": "forcePushed"}, {"oid": "65bc38dce9094fb3e4597b43742ebd45423a2efc", "url": "https://github.com/camunda/camunda-bpm-platform/commit/65bc38dce9094fb3e4597b43742ebd45423a2efc", "message": "Adjust to angularJS and implement review hints", "committedDate": "2021-01-12T09:12:45Z", "type": "commit"}, {"oid": "fc0db69be8b50243fa0637c72884bd01ca0e0d79", "url": "https://github.com/camunda/camunda-bpm-platform/commit/fc0db69be8b50243fa0637c72884bd01ca0e0d79", "message": "fix(searchQueries): remove race condition\n\nrelated to CAM-12838", "committedDate": "2021-01-13T12:34:17Z", "type": "commit"}, {"oid": "fc0db69be8b50243fa0637c72884bd01ca0e0d79", "url": "https://github.com/camunda/camunda-bpm-platform/commit/fc0db69be8b50243fa0637c72884bd01ca0e0d79", "message": "fix(searchQueries): remove race condition\n\nrelated to CAM-12838", "committedDate": "2021-01-13T12:34:17Z", "type": "forcePushed"}]}