{"pr_number": 1175, "pr_title": "CAM-12851: extract agent methods", "pr_createdAt": "2020-12-08T14:26:29Z", "pr_url": "https://github.com/camunda/camunda-bpm-platform/pull/1175", "timeline": [{"oid": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "url": "https://github.com/camunda/camunda-bpm-platform/commit/82af8d5219bd15b185f5f8e51bea9f9870098a60", "message": "TEST: reduce number of db labels", "committedDate": "2020-12-09T12:40:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk2MDcyOQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539960729", "bodyText": "jobs with h2 suffix has h2 agent - label 'centos' or label 'h2'?", "author": "yanavasileva", "createdAt": "2020-12-10T08:14:54Z", "path": ".ci/daily/Jenkinsfile", "diffHunk": "@@ -131,8 +60,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent('gcr.io/ci-30-162810/centos:v0.4.6', 16)\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgyODU5NQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r540828595", "bodyText": "Done", "author": "koevskinikola", "createdAt": "2020-12-11T09:59:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk2MDcyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk2NDQ0OA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539964448", "bodyText": "All above including this are h2 agents", "author": "yanavasileva", "createdAt": "2020-12-10T08:21:15Z", "path": ".ci/daily/Jenkinsfile", "diffHunk": "@@ -266,8 +195,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent('gcr.io/ci-30-162810/centos:v0.4.6', 16)\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk2NTg3OQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539965879", "bodyText": "Let's rename the check-sql profile to sql-scripts to be more close to the current job name. Could be in a separate ticket.", "author": "yanavasileva", "createdAt": "2020-12-10T08:23:32Z", "path": ".ci/daily/Jenkinsfile", "diffHunk": "@@ -293,7 +222,7 @@ pipeline {\n         axes {\n           axis {\n             name 'DB'\n-            values 'postgresql_96', 'mariadb_103'\n+            values 'postgresql_96', 'postgresql_94', 'postgresql_107', 'postgresql_112', 'postgresql_122', 'cockroachdb_201', 'mariadb_100', 'mariadb_102', 'mariadb_103', 'mariadb_galera', 'mysql_57', 'oracle_11', 'oracle_12', 'oracle_18', 'oracle_19', 'db2_105', 'db2_111', 'sqlserver_2017', 'sqlserver_2019'\n           }\n           axis {\n             name 'PROFILE'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc4MzMzNw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r540783337", "bodyText": "upgrade-db -> upgrade-database ?", "author": "yanavasileva", "createdAt": "2020-12-11T08:47:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk2NTg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgzMDc4Nw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r540830787", "bodyText": "I agree on both. I updated them here, and will adjust the labels in scope of CAM-12866 in the shared library.", "author": "koevskinikola", "createdAt": "2020-12-11T10:03:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk2NTg3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3MjEwMQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539972101", "bodyText": "h2 agent", "author": "yanavasileva", "createdAt": "2020-12-10T08:33:39Z", "path": ".ci/daily/Jenkinsfile", "diffHunk": "@@ -345,8 +274,8 @@ pipeline {\n           beforeAgent true\n         }\n         agent {\n-          kubernetes {\n-            yaml getJdkAgent()\n+          node {\n+            label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3NzgxOA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539977818", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      label 'centos-stable'\n          \n          \n            \n                      label 'h2_perf32'", "author": "yanavasileva", "createdAt": "2020-12-10T08:42:35Z", "path": "Jenkinsfile", "diffHunk": "@@ -62,8 +24,8 @@ pipeline {\n         beforeAgent true\n       }\n       agent {\n-        kubernetes {\n-          yaml getAgent('gcr.io/ci-30-162810/centos:v0.4.6', 16)\n+        node {\n+          label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3ODM2Mw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539978363", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      label 'centos-stable'\n          \n          \n            \n                      label 'h2_perf32'", "author": "yanavasileva", "createdAt": "2020-12-10T08:43:28Z", "path": "Jenkinsfile", "diffHunk": "@@ -62,8 +24,8 @@ pipeline {\n         beforeAgent true\n       }\n       agent {\n-        kubernetes {\n-          yaml getAgent('gcr.io/ci-30-162810/centos:v0.4.6', 16)\n+        node {\n+          label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3ODgxMQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539978811", "bodyText": "h2 agent", "author": "yanavasileva", "createdAt": "2020-12-10T08:44:09Z", "path": "Jenkinsfile", "diffHunk": "@@ -145,8 +107,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent('gcr.io/ci-30-162810/centos:v0.4.6', 16)\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3OTI5NA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539979294", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:44:50Z", "path": "Jenkinsfile", "diffHunk": "@@ -173,8 +135,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent('gcr.io/ci-30-162810/centos:v0.4.6', 16)\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3OTM4MQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539979381", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:44:58Z", "path": "Jenkinsfile", "diffHunk": "@@ -201,8 +163,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent()\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3OTU4Mg==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539979582", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:45:18Z", "path": "Jenkinsfile", "diffHunk": "@@ -226,8 +188,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent()\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk3OTg5Mg==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539979892", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:45:46Z", "path": "Jenkinsfile", "diffHunk": "@@ -251,8 +213,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent()\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MDEyOQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539980129", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:46:08Z", "path": "Jenkinsfile", "diffHunk": "@@ -278,8 +240,8 @@ pipeline {\n             }\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent()\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MjEwNQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539982105", "bodyText": "Let's rename the 'webapps-unit', 'webapps-unit-authorizations' to 'webapp-unit', 'webapp-unit-authorizations' (removing the s)", "author": "yanavasileva", "createdAt": "2020-12-10T08:49:13Z", "path": "Jenkinsfile", "diffHunk": "@@ -455,7 +417,7 @@ pipeline {\n         axes {\n           axis {\n             name 'DB'\n-            values 'postgresql_96', 'mariadb_103'\n+            values 'postgresql_96', 'postgresql_94', 'postgresql_107'\n           }\n           axis {\n             name 'PROFILE'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDgzNjcyNw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r540836727", "bodyText": "Done. I will also update them in CAM-12866", "author": "koevskinikola", "createdAt": "2020-12-11T10:13:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MjEwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MjM1NA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539982354", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:49:34Z", "path": "Jenkinsfile", "diffHunk": "@@ -505,8 +467,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent('gcr.io/ci-30-162810/centos:v0.4.6', 16)\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MjU3Nw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539982577", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:49:52Z", "path": "Jenkinsfile", "diffHunk": "@@ -533,8 +495,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent('gcr.io/ci-30-162810/centos:v0.4.6', 16)\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4Mjc3OQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539982779", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:50:11Z", "path": "Jenkinsfile", "diffHunk": "@@ -558,8 +520,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent()\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MjkzMg==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539982932", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:50:28Z", "path": "Jenkinsfile", "diffHunk": "@@ -586,8 +548,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent()\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MzE3Mg==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539983172", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:50:46Z", "path": "Jenkinsfile", "diffHunk": "@@ -616,8 +578,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent()\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MzM2OA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539983368", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:51:05Z", "path": "Jenkinsfile", "diffHunk": "@@ -641,8 +603,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent()\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MzU4MA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r539983580", "bodyText": "h2", "author": "yanavasileva", "createdAt": "2020-12-10T08:51:24Z", "path": "Jenkinsfile", "diffHunk": "@@ -666,8 +628,8 @@ pipeline {\n             beforeAgent true\n           }\n           agent {\n-            kubernetes {\n-              yaml getAgent()\n+            node {\n+              label 'centos-stable'", "originalCommit": "82af8d5219bd15b185f5f8e51bea9f9870098a60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7d82a75ec508a9257f5b27c5a1f88b44e086c087", "url": "https://github.com/camunda/camunda-bpm-platform/commit/7d82a75ec508a9257f5b27c5a1f88b44e086c087", "message": "feat(ci): remove agent methods & use label agents\n\n* Add all the supported db labels. In the main CE pipeline, this is not\n  implemented due to the pipeline size limitation.\n\nRelated to CAM-12713, CAM-12851", "committedDate": "2020-12-11T10:20:05Z", "type": "commit"}, {"oid": "66295992a13b57c07f48645b9f1d59fdc176c82a", "url": "https://github.com/camunda/camunda-bpm-platform/commit/66295992a13b57c07f48645b9f1d59fdc176c82a", "message": "SQUASH ME: implement review hints", "committedDate": "2020-12-11T10:22:57Z", "type": "commit"}, {"oid": "66295992a13b57c07f48645b9f1d59fdc176c82a", "url": "https://github.com/camunda/camunda-bpm-platform/commit/66295992a13b57c07f48645b9f1d59fdc176c82a", "message": "SQUASH ME: implement review hints", "committedDate": "2020-12-11T10:22:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg1MDkxOQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1175#discussion_r540850919", "bodyText": "@koevskinikola the crdb webapp-unit profiles should be updated as well:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        values 'engine-unit', 'engine-unit-authorizations', 'webapps-unit', 'webapps-unit-authorizations', 'sql-scripts', 'upgrade-database', 'instance-migration', 'old-engine', 'rolling-update', 'large-data-tests'\n          \n          \n            \n                        values 'engine-unit', 'engine-unit-authorizations', 'webapp-unit', 'webapp-unit-authorizations', 'sql-scripts', 'upgrade-database', 'instance-migration', 'old-engine', 'rolling-update', 'large-data-tests'", "author": "yanavasileva", "createdAt": "2020-12-11T10:36:10Z", "path": ".ci/sidetrack/Jenkinsfile", "diffHunk": "@@ -81,7 +43,7 @@ pipeline {\n           }\n           axis {\n             name 'PROFILE'\n-            values 'engine-unit', 'engine-unit-authorizations', 'webapps-unit', 'webapps-unit-authorizations', 'check-sql', 'upgrade-db', 'instance-migration', 'old-engine', 'rolling-update', 'large-data-tests'\n+            values 'engine-unit', 'engine-unit-authorizations', 'webapps-unit', 'webapps-unit-authorizations', 'sql-scripts', 'upgrade-database', 'instance-migration', 'old-engine', 'rolling-update', 'large-data-tests'", "originalCommit": "66295992a13b57c07f48645b9f1d59fdc176c82a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "699b637888997fd0dd6712952c39b0a7b72e8338", "url": "https://github.com/camunda/camunda-bpm-platform/commit/699b637888997fd0dd6712952c39b0a7b72e8338", "message": "SQUASH ME: implement review hints", "committedDate": "2020-12-11T12:43:51Z", "type": "commit"}]}