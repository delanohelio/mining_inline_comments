{"pr_number": 757, "pr_title": "CAM-11553: feat(rest): add openapi task variables endpoints", "pr_createdAt": "2020-03-25T15:48:30Z", "pr_url": "https://github.com/camunda/camunda-bpm-platform/pull/757", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwNzc4MQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/757#discussion_r400007781", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    desc = \"The name of the variable to get\"/>\n          \n          \n            \n                    desc = \"The name of the variable to get.\"/>", "author": "mboskamp", "createdAt": "2020-03-30T08:20:39Z", "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/task/{id}/variables/{varName}/get.ftl", "diffHunk": "@@ -0,0 +1,96 @@\n+{\n+\n+  <@lib.endpointInfo\n+      id = \"getTaskVariable\"\n+      tag = \"Task Variable\"\n+      desc = \"Retrieves a variable from the context of a given task.\n+              The variable must be visible from the task. It is visible from the task if it is a local task variable or\n+              declared in a parent scope of the task. See documentation on\n+              [visiblity of variables](${docsUrl}/user-guide/process-engine/variables/).\" />\n+\n+  \"parameters\" : [\n+\n+    <@lib.parameter\n+        name = \"id\"\n+        location = \"path\"\n+        type = \"string\"\n+        required = true\n+        desc = \"The id of the task to retrieve the variable from.\"/>\n+\n+    <@lib.parameter\n+        name = \"varName\"\n+        location = \"path\"\n+        type = \"string\"\n+        required = true\n+        desc = \"The name of the variable to get\"/>", "originalCommit": "631ecd57e09a413017d17c694324e9bb0730f604", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwODY4NA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/757#discussion_r400008684", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            should be deserialized on the server side (default `true`).\n          \n          \n            \n                            should be deserialized on the server side (default `true`).", "author": "mboskamp", "createdAt": "2020-03-30T08:22:15Z", "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/task/{id}/variables/{varName}/get.ftl", "diffHunk": "@@ -0,0 +1,96 @@\n+{\n+\n+  <@lib.endpointInfo\n+      id = \"getTaskVariable\"\n+      tag = \"Task Variable\"\n+      desc = \"Retrieves a variable from the context of a given task.\n+              The variable must be visible from the task. It is visible from the task if it is a local task variable or\n+              declared in a parent scope of the task. See documentation on\n+              [visiblity of variables](${docsUrl}/user-guide/process-engine/variables/).\" />\n+\n+  \"parameters\" : [\n+\n+    <@lib.parameter\n+        name = \"id\"\n+        location = \"path\"\n+        type = \"string\"\n+        required = true\n+        desc = \"The id of the task to retrieve the variable from.\"/>\n+\n+    <@lib.parameter\n+        name = \"varName\"\n+        location = \"path\"\n+        type = \"string\"\n+        required = true\n+        desc = \"The name of the variable to get\"/>\n+\n+    <@lib.parameter\n+        name = \"deserializeValue\"\n+        location = \"query\"\n+        type = \"boolean\"\n+        defaultValue = \"true\"\n+        last = true\n+        desc = \"Determines whether serializable variable values (typically variables that store custom Java objects)\n+                should be deserialized on the server side (default `true`).", "originalCommit": "631ecd57e09a413017d17c694324e9bb0730f604", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzMDU0Mg==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/757#discussion_r400030542", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    desc = \"Update or delete could not be executed because the task is `null` or does not exist.. See the\n          \n          \n            \n                    desc = \"Update or delete could not be executed because the task is `null` or does not exist. See the", "author": "mboskamp", "createdAt": "2020-03-30T08:57:50Z", "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/task/{id}/variables/post.ftl", "diffHunk": "@@ -0,0 +1,70 @@\n+{\n+\n+  <@lib.endpointInfo\n+      id = \"modifyTaskVariables\"\n+      tag = \"Task Variable\"\n+      desc = \"Updates or deletes the variables visible from the task. Updates precede deletions. So, if a variable is\n+              updated AND deleted, the deletion overrides the update. A variable is visible from the task if it is a\n+              local task variable or declared in a parent scope of the task. See documentation on\n+              [visiblity of variables](${docsUrl}/user-guide/process-engine/variables/).\" />\n+\n+  \"parameters\": [\n+\n+    <@lib.parameter\n+        name = \"id\"\n+        location = \"path\"\n+        type = \"string\"\n+        required = true\n+        last  = true\n+        desc = \"The id of the task to set variables for.\"/>\n+\n+  ],\n+\n+  <@lib.requestBody\n+      mediaType = \"application/json\"\n+      dto = \"PatchVariablesDto\"\n+      examples = ['\"example-1\": {\n+                     \"summary\": \"POST `/task/aTaskId/variables`\",\n+                     \"description\": \"Status 204 Response: No content.\",\n+                     \"value\": {\n+                       \"modifications\": {\n+                         \"aVariable\": {\n+                           \"value\": \"aValue\",\n+                           \"type\": \"String\"\n+                         },\n+                         \"anotherVariable\": {\n+                           \"value\": 42,\n+                           \"type\": \"Integer\"\n+                         }\n+                       },\n+                       \"deletions\": [\n+                         \"aThirdVariable\",\n+                         \"FourthVariable\"\n+                       ]\n+                     }\n+                   }'\n+      ] />\n+\n+  \"responses\" : {\n+\n+    <@lib.response\n+        code = \"204\"\n+        desc = \"Request successful.\" />\n+\n+    <@lib.response\n+        code = \"400\"\n+        dto = \"ExceptionDto\"\n+        desc = \"The variable value or type is invalid. For example the value could not be parsed to an `Integer` value\n+                or the passed variable type is not supported. See the\n+                [Introduction](${docsUrl}/reference/rest/overview/#error-handling)\n+                for the error response format.\" />\n+\n+    <@lib.response\n+        code = \"500\"\n+        dto = \"ExceptionDto\"\n+        last = true\n+        desc = \"Update or delete could not be executed because the task is `null` or does not exist.. See the", "originalCommit": "631ecd57e09a413017d17c694324e9bb0730f604", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzMTc4Mg==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/757#discussion_r400031782", "bodyText": "The description in the docs is not very good. Maybe we can fix it while we are at it?", "author": "mboskamp", "createdAt": "2020-03-30T08:59:45Z", "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/task/{id}/variables/{varName}/put.ftl", "diffHunk": "@@ -0,0 +1,80 @@\n+{\n+\n+  <@lib.endpointInfo\n+      id = \"putTaskVariable\"\n+      tag = \"Task Variable\"\n+      desc = \"Sets a visible from the task. A variable is visible from the task if it is a local task variable or", "originalCommit": "631ecd57e09a413017d17c694324e9bb0730f604", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "84e2880a6ae1da6309d005bed5ab21b5b7f07650", "url": "https://github.com/camunda/camunda-bpm-platform/commit/84e2880a6ae1da6309d005bed5ab21b5b7f07650", "message": "feat(rest): add openapi task variables endpoints\n\nRelated to CAM-11553", "committedDate": "2020-03-31T10:08:48Z", "type": "commit"}, {"oid": "87653425dc10e0eeae64dcf1e69d837fd0dc1179", "url": "https://github.com/camunda/camunda-bpm-platform/commit/87653425dc10e0eeae64dcf1e69d837fd0dc1179", "message": "SQUASH ME: fix formatting\n\nCo-Authored-By: Miklas Boskamp <miklas.boskamp@camunda.com>", "committedDate": "2020-03-31T10:08:55Z", "type": "commit"}, {"oid": "49add05b9dff36e58dcc8d641eec445b6540e88c", "url": "https://github.com/camunda/camunda-bpm-platform/commit/49add05b9dff36e58dcc8d641eec445b6540e88c", "message": "SQUASH ME: fix formatting\n\nCo-Authored-By: Miklas Boskamp <miklas.boskamp@camunda.com>", "committedDate": "2020-03-31T10:08:55Z", "type": "commit"}, {"oid": "aa2abff1a854e92912f5238b5a7d191d7b409336", "url": "https://github.com/camunda/camunda-bpm-platform/commit/aa2abff1a854e92912f5238b5a7d191d7b409336", "message": "SQUASH ME: fix formatting\n\nCo-Authored-By: Miklas Boskamp <miklas.boskamp@camunda.com>", "committedDate": "2020-03-31T10:08:55Z", "type": "commit"}, {"oid": "f0665333777dfd30e3a1e3017509723e64b04415", "url": "https://github.com/camunda/camunda-bpm-platform/commit/f0665333777dfd30e3a1e3017509723e64b04415", "message": "SQUASH ME: implement review hints", "committedDate": "2020-03-31T10:08:55Z", "type": "commit"}, {"oid": "5a8481736314abead84f0d6ac35c1394f3fd047a", "url": "https://github.com/camunda/camunda-bpm-platform/commit/5a8481736314abead84f0d6ac35c1394f3fd047a", "message": "SQUASH ME: improve description", "committedDate": "2020-03-31T10:08:55Z", "type": "commit"}, {"oid": "5a8481736314abead84f0d6ac35c1394f3fd047a", "url": "https://github.com/camunda/camunda-bpm-platform/commit/5a8481736314abead84f0d6ac35c1394f3fd047a", "message": "SQUASH ME: improve description", "committedDate": "2020-03-31T10:08:55Z", "type": "forcePushed"}]}