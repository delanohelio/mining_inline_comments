{"pr_number": 730, "pr_title": "CAM-11530: add documentation for signal endpoint ", "pr_createdAt": "2020-03-16T15:39:23Z", "pr_url": "https://github.com/camunda/camunda-bpm-platform/pull/730", "timeline": [{"oid": "8d96cf1a4dd1b5dbf0c4b1e8e1bab3772edefa47", "url": "https://github.com/camunda/camunda-bpm-platform/commit/8d96cf1a4dd1b5dbf0c4b1e8e1bab3772edefa47", "message": "chore(rest-openapi): Add documentation for signal REST endpoint\n\nRelated to CAM-11530", "committedDate": "2020-03-17T07:45:26Z", "type": "forcePushed"}, {"oid": "f8edc9651abb2657fc13a3ffdccbfd907eb06ae2", "url": "https://github.com/camunda/camunda-bpm-platform/commit/f8edc9651abb2657fc13a3ffdccbfd907eb06ae2", "message": "chore(rest-openapi): Add documentation for signal REST endpoint\n\nRelated to CAM-11530", "committedDate": "2020-03-17T07:49:51Z", "type": "commit"}, {"oid": "f8edc9651abb2657fc13a3ffdccbfd907eb06ae2", "url": "https://github.com/camunda/camunda-bpm-platform/commit/f8edc9651abb2657fc13a3ffdccbfd907eb06ae2", "message": "chore(rest-openapi): Add documentation for signal REST endpoint\n\nRelated to CAM-11530", "committedDate": "2020-03-17T07:49:51Z", "type": "forcePushed"}, {"oid": "c950b3909fbf2de1b3696dc8889d307f3290e707", "url": "https://github.com/camunda/camunda-bpm-platform/commit/c950b3909fbf2de1b3696dc8889d307f3290e707", "message": "chore(rest-openapi): improve readability\n\nRelated to CAM-11530", "committedDate": "2020-03-17T08:05:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzUxNTk2Mw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/730#discussion_r393515963", "bodyText": "Example:\n\n  \n    \n      camunda-bpm-platform/engine-rest/engine-rest-openapi/src/main/templates/models/org/camunda/bpm/engine/rest/dto/runtime/modification/ProcessInstanceModificationInstructionDto.ftl\n    \n    \n        Lines 9 to 14\n      in\n      46484a1\n    \n    \n    \n    \n\n        \n          \n           desc = \"**Mandatory**. One of the following values: `cancel`, `startBeforeActivity`, `startAfterActivity`, `startTransition`. \n        \n\n        \n          \n            \n        \n\n        \n          \n                   * A cancel instruction requests cancellation of a single activity instance or all instances of one activity. \n        \n\n        \n          \n                   * A startBeforeActivity instruction requests to enter a given activity. \n        \n\n        \n          \n                   * A startAfterActivity instruction requests to execute the single outgoing sequence flow of a given activity. \n        \n\n        \n          \n                   * A startTransition instruction requests to execute a specific sequence flow.\" /> \n        \n    \n  \n\n\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    desc = \"Returned if: \n          \n          \n            \n            \n          \n          \n            \n                            no name was given\n          \n          \n            \n            \n          \n          \n            \n                            or if the variable value or type is invalid, for example if the value could not be parsed to an integer value or the passed variable type is not supported\n          \n          \n            \n            \n          \n          \n            \n                            or if a tenant id and an execution id is specified.\"/>\n          \n          \n            \n                    desc = \"Returned if: \n          \n          \n            \n            \n          \n          \n            \n                            * no name was given\n          \n          \n            \n                            * or if the variable value or type is invalid, for example if the value could not be parsed to an integer value or the passed variable type is not supported\n          \n          \n            \n                            * or if a tenant id and an execution id is specified.\"/>", "author": "yanavasileva", "createdAt": "2020-03-17T08:36:50Z", "path": "engine-rest/engine-rest-openapi/src/main/templates/paths/signal/post.ftl", "diffHunk": "@@ -0,0 +1,54 @@\n+{\n+\n+  <@lib.endpointInfo\n+      id = \"throwSignal\"\n+      tag = \"Signal\"\n+      desc = \"A signal is an event of global scope (broadcast semantics) and is delivered to all active handlers. \n+              Internally this maps to the engine's signal event received builder method RuntimeService#createSignalEvent().\n+              For more information about the signal behavior, see the [Signal Events](${docsUrl}/reference/bpmn20/events/signal-events/)\n+              section of the [BPMN 2.0 Implementation Reference](${docsUrl}/reference/bpmn20/).\" />\n+\n+  \"parameters\" : [],\n+\n+  <@lib.requestBody\n+      mediaType = \"application/json\"\n+      dto = \"SignalDto\"\n+      examples = ['\"examle-1\": {\n+                     \"summary\": \"POST /signal\",\n+                     \"description\": \"The content of the Request Body\",\n+                     \"value\": {\n+                         \"name\": \"policy_conditions_changed\",\n+                          \"variables\": {\n+                            \"newTimePeriodInMonth\": {\n+                              \"value\": 24\n+                           }\n+                         }\n+                       }\n+                     }']/>\n+\n+  \"responses\" : {\n+\n+    <@lib.response\n+        code = \"204\"\n+        desc = \"Request successful.\"/>\n+\n+    <@lib.response\n+        code = \"400\"\n+        desc = \"Returned if: \n+\n+                no name was given\n+\n+                or if the variable value or type is invalid, for example if the value could not be parsed to an integer value or the passed variable type is not supported\n+\n+                or if a tenant id and an execution id is specified.\"/>", "originalCommit": "c950b3909fbf2de1b3696dc8889d307f3290e707", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzUyNDY5NA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/730#discussion_r393524694", "bodyText": "Thanks, I already committed the same change before I saw your suggestion.", "author": "mboskamp", "createdAt": "2020-03-17T08:53:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzUxNTk2Mw=="}], "type": "inlineReview"}, {"oid": "13b38d2502659cf76a3d2e4388622ecb96b95698", "url": "https://github.com/camunda/camunda-bpm-platform/commit/13b38d2502659cf76a3d2e4388622ecb96b95698", "message": "chore(rest-openapi): use bullet points instead of newlines\n\nRelated to CAM-11530", "committedDate": "2020-03-17T08:52:03Z", "type": "commit"}, {"oid": "9eb7f4379507ff9981ee68bc6ff50463781100ff", "url": "https://github.com/camunda/camunda-bpm-platform/commit/9eb7f4379507ff9981ee68bc6ff50463781100ff", "message": "SQUAH ME: add code and description formatting, and exception format notes", "committedDate": "2020-03-17T09:39:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzUzODU4MQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/730#discussion_r393538581", "bodyText": "We should specify that the defaultValue is false.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    type = \"boolean\"\n          \n          \n            \n                    type = \"boolean\"\n          \n          \n            \n                    defaultValue = false", "author": "koevskinikola", "createdAt": "2020-03-17T09:18:09Z", "path": "engine-rest/engine-rest-openapi/src/main/templates/models/org/camunda/bpm/engine/rest/dto/SignalDto.ftl", "diffHunk": "@@ -0,0 +1,42 @@\n+{\n+  \"type\" : \"object\",\n+  \"properties\" : {\n+\n+    <@lib.property\n+        name = \"name\"\n+        type = \"string\"\n+        desc = \"The name of the signal to deliver.\n+                Note: This property is mandatory.\"/>\n+\n+    <@lib.property\n+        name = \"executionId\"\n+        type = \"string\"\n+        desc = \"Optionally specifies a single execution which is notified by the signal.\n+                Note: If no execution id is defined the signal is broadcasted to all subscribed handlers.\"/>\n+\n+    <@lib.property\n+        name = \"variables\"\n+        type = \"object\"\n+        additionalProperties = true\n+        dto = \"VariableValueDto\"\n+        desc = \"A JSON object containing variable key-value pairs. Each key is a variable name and each\n+                value a JSON variable value object.\"/>\n+\n+    <@lib.property\n+        name = \"tenantId\"\n+        type = \"string\"\n+        desc = \"Specifies a tenant to deliver the signal. The signal can only be received on executions\n+                or process definitions which belongs to the given tenant.\n+\n+                Note: Cannot be used in combination with executionId.\"/>\n+\n+    <@lib.property\n+        name = \"withoutTenantId\"\n+        type = \"boolean\"", "originalCommit": "13b38d2502659cf76a3d2e4388622ecb96b95698", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYxNjM5OA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/730#discussion_r393616398", "bodyText": "@mboskamp, we had a discussion with @yanavasileva regarding default values of boolean properties. We should be careful when we set default values. For this one specifically, I made a mistake and you can ignore the above suggestion. The docs clearly state that the value may not be false. If we see that the docs explicitly define a default value, then we can set it.", "author": "koevskinikola", "createdAt": "2020-03-17T11:38:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzUzODU4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYxNjY3MA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/730#discussion_r393616670", "bodyText": "We can wrap this in a code format.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            **Note**: Cannot be used in combination with executionId.\"/>\n          \n          \n            \n                            **Note**: Cannot be used in combination with `executionId`.\"/>", "author": "koevskinikola", "createdAt": "2020-03-17T11:38:58Z", "path": "engine-rest/engine-rest-openapi/src/main/templates/models/org/camunda/bpm/engine/rest/dto/SignalDto.ftl", "diffHunk": "@@ -0,0 +1,45 @@\n+{\n+  \"type\" : \"object\",\n+  \"properties\" : {\n+\n+    <@lib.property\n+        name = \"name\"\n+        type = \"string\"\n+        desc = \"The name of the signal to deliver.\n+\n+                **Note**: This property is mandatory.\" />\n+\n+    <@lib.property\n+        name = \"executionId\"\n+        type = \"string\"\n+        desc = \"Optionally specifies a single execution which is notified by the signal.\n+\n+                **Note**: If no execution id is defined the signal is broadcasted to all subscribed\n+                handlers. \"/>\n+\n+    <@lib.property\n+        name = \"variables\"\n+        type = \"object\"\n+        additionalProperties = true\n+        dto = \"VariableValueDto\"\n+        desc = \"A JSON object containing variable key-value pairs. Each key is a variable name and\n+                each value a JSON variable value object.\"/>\n+\n+    <@lib.property\n+        name = \"tenantId\"\n+        type = \"string\"\n+        desc = \"Specifies a tenant to deliver the signal. The signal can only be received on\n+                executions or process definitions which belongs to the given tenant.\n+\n+                **Note**: Cannot be used in combination with executionId.\"/>\n+\n+    <@lib.property\n+        name = \"withoutTenantId\"\n+        type = \"boolean\"\n+        last = true\n+        desc = \"If true the signal can only be received on executions or process definitions which\n+                belongs to no tenant. Value may not be false as this is the default behavior.\n+\n+                **Note**: Cannot be used in combination with executionId.\"/>", "originalCommit": "9eb7f4379507ff9981ee68bc6ff50463781100ff", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b5fcf85cf5e131b4e94719d65d0302f105c3717f", "url": "https://github.com/camunda/camunda-bpm-platform/commit/b5fcf85cf5e131b4e94719d65d0302f105c3717f", "message": "SQUASH ME: use monospace font for executionId\n\nCo-Authored-By: Nikola Koevski <nikola.koevski@camunda.com>", "committedDate": "2020-03-18T14:14:20Z", "type": "commit"}]}