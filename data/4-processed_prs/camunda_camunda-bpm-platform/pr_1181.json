{"pr_number": 1181, "pr_title": "CAM-12830: chore(ci): extract trigger downstream", "pr_createdAt": "2020-12-09T14:00:10Z", "pr_url": "https://github.com/camunda/camunda-bpm-platform/pull/1181", "timeline": [{"oid": "bb90ad899d5a2f59f5231065cdc59ddd0626e987", "url": "https://github.com/camunda/camunda-bpm-platform/commit/bb90ad899d5a2f59f5231065cdc59ddd0626e987", "message": "wip", "committedDate": "2020-12-09T14:21:10Z", "type": "forcePushed"}, {"oid": "afbe149e579753e2415e121079d8d4fe535fd2be", "url": "https://github.com/camunda/camunda-bpm-platform/commit/afbe149e579753e2415e121079d8d4fe535fd2be", "message": "chore(ci): extract trigger downstream", "committedDate": "2020-12-10T07:34:10Z", "type": "forcePushed"}, {"oid": "62373fd2572f127dd9c2e6518297c4fddbf890e9", "url": "https://github.com/camunda/camunda-bpm-platform/commit/62373fd2572f127dd9c2e6518297c4fddbf890e9", "message": "chore(ci): extract trigger downstream", "committedDate": "2020-12-10T07:35:42Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg3NDI2NQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1181#discussion_r540874265", "bodyText": "We should add a master label here. Otherwise, the EE branch won't be triggered on the master branch.", "author": "koevskinikola", "createdAt": "2020-12-11T11:15:32Z", "path": "Jenkinsfile", "diffHunk": "@@ -101,31 +101,19 @@ pipeline {\n             params.EE_BRANCH_NAME = 'cambpm-ee-main/pipeline-master'\n           } else {\n             labels = JsonOutput.toJson(pullRequest.labels)\n+            shaCE = sh(script:\"git rev-parse HEAD\", returnStdout: true).trim()\n           }\n \n           if (cambpmWithLabels('webapp-integration','all-as','h2','websphere','weblogic','jbosseap','run','spring-boot','authorizations')) {", "originalCommit": "62373fd2572f127dd9c2e6518297c4fddbf890e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAzNTY1Nw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1181#discussion_r541035657", "bodyText": "As we discussed it will be triggered even without the master label.", "author": "yanavasileva", "createdAt": "2020-12-11T15:38:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg3NDI2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDg4MzU2OQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/1181#discussion_r540883569", "bodyText": "The method signatures for the downstream branch triggers should be updated if changes to the camunda/cambpm-jenkins-shared-library#7 PR are made.", "author": "koevskinikola", "createdAt": "2020-12-11T11:33:16Z", "path": "Jenkinsfile", "diffHunk": "@@ -101,31 +101,19 @@ pipeline {\n             params.EE_BRANCH_NAME = 'cambpm-ee-main/pipeline-master'\n           } else {\n             labels = JsonOutput.toJson(pullRequest.labels)\n+            shaCE = sh(script:\"git rev-parse HEAD\", returnStdout: true).trim()\n           }\n \n           if (cambpmWithLabels('webapp-integration','all-as','h2','websphere','weblogic','jbosseap','run','spring-boot','authorizations')) {\n-            build job: \"cambpm-ee/${params.EE_BRANCH_NAME}\", parameters: [\n-                    string(name: 'copyArtifactSelector', value: '<TriggeredBuildSelector plugin=\"copyartifact@1.45.1\">  <upstreamFilterStrategy>UseGlobalSetting</upstreamFilterStrategy>  <allowUpstreamDependencies>false</allowUpstreamDependencies></TriggeredBuildSelector>'),\n-                    booleanParam(name: 'STANDALONE', value: false),\n-                    string(name: 'CE_BRANCH_NAME', value: \"${env.BRANCH_NAME}\"),\n-                    string(name: 'PR_LABELS', value: labels)\n-            ], quietPeriod: 10, wait: false\n+            cambpmTriggerDownstream(\"cambpm-ee/${params.EE_BRANCH_NAME}\", labels, shaCE, true, true)", "originalCommit": "62373fd2572f127dd9c2e6518297c4fddbf890e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "77e2b78959243faf9f83a81575ebff606d52a102", "url": "https://github.com/camunda/camunda-bpm-platform/commit/77e2b78959243faf9f83a81575ebff606d52a102", "message": "chore(ci): extract trigger downstream", "committedDate": "2020-12-11T13:31:22Z", "type": "commit"}, {"oid": "619bda2b7f8a681e8650909b16a70cda9e6ca70a", "url": "https://github.com/camunda/camunda-bpm-platform/commit/619bda2b7f8a681e8650909b16a70cda9e6ca70a", "message": "review hints", "committedDate": "2020-12-11T13:40:15Z", "type": "forcePushed"}, {"oid": "7034d144ecdfb7d0445d2d5dc53ef86a3025c5e7", "url": "https://github.com/camunda/camunda-bpm-platform/commit/7034d144ecdfb7d0445d2d5dc53ef86a3025c5e7", "message": "review hints", "committedDate": "2020-12-11T14:15:16Z", "type": "forcePushed"}, {"oid": "2ba5924b5c0c08efbbb88e04578ebe2dbef263ef", "url": "https://github.com/camunda/camunda-bpm-platform/commit/2ba5924b5c0c08efbbb88e04578ebe2dbef263ef", "message": "review hints", "committedDate": "2020-12-11T14:59:44Z", "type": "commit"}, {"oid": "2ba5924b5c0c08efbbb88e04578ebe2dbef263ef", "url": "https://github.com/camunda/camunda-bpm-platform/commit/2ba5924b5c0c08efbbb88e04578ebe2dbef263ef", "message": "review hints", "committedDate": "2020-12-11T14:59:44Z", "type": "forcePushed"}, {"oid": "209fbcb120cf2ab42b1b2477621b453ced137c35", "url": "https://github.com/camunda/camunda-bpm-platform/commit/209fbcb120cf2ab42b1b2477621b453ced137c35", "message": "remove branch", "committedDate": "2020-12-14T11:10:35Z", "type": "commit"}]}