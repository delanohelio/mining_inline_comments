{"pr_number": 971, "pr_title": "CAM-12408: avoid cmmn complexity in task query", "pr_createdAt": "2020-09-08T11:00:03Z", "pr_url": "https://github.com/camunda/camunda-bpm-platform/pull/971", "timeline": [{"oid": "e480b2ba99c7cdbc4af44831e62527014ccab411", "url": "https://github.com/camunda/camunda-bpm-platform/commit/e480b2ba99c7cdbc4af44831e62527014ccab411", "message": "first implementation", "committedDate": "2020-09-08T11:00:37Z", "type": "forcePushed"}, {"oid": "daa208e149cd7b1d4ef8520b3bdbc7810b399128", "url": "https://github.com/camunda/camunda-bpm-platform/commit/daa208e149cd7b1d4ef8520b3bdbc7810b399128", "message": "remove CASE_EXECUTION_ID_ check in WHERE clause", "committedDate": "2020-09-09T07:50:54Z", "type": "forcePushed"}, {"oid": "2562de6ac004b29b59b283fe1b5a0eb6c355dbdc", "url": "https://github.com/camunda/camunda-bpm-platform/commit/2562de6ac004b29b59b283fe1b5a0eb6c355dbdc", "message": "improve(engine): improve task query when cmmn is disabled\n\n- converts left join with ACT_RU_AUTHORIZATION to inner join\n- removes additional where condition on CASE_EXECUTION_ID_\n\nrelated to CAM-12408, CAM-11277", "committedDate": "2020-09-09T14:05:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMyODQ4NA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/971#discussion_r486328484", "bodyText": "Functionality-wise, this is absolutely fine. Naming-wise however, I am a bit concerned.\nReasoning:\nRight now, we only use an authorization left join when CMMN is enabled. If we ever decide to have a left join here for any other reason, this assumption will not always be true. It is documented here, so people could definitely find it but it is easy to be missed as well.\nAs is said, I am just concerned for future updates. Other than that, it is fine.\nCleanest solution would probably be to introduce another property for that. But that might also be a bit too much.", "author": "tmetzke", "createdAt": "2020-09-10T13:18:28Z", "path": "engine/src/main/resources/org/camunda/bpm/engine/impl/mapping/entity/Authorization.xml", "diffHunk": "@@ -851,9 +856,13 @@\n         </when>\n         <otherwise>\n           and (\n-          (RES.CASE_EXECUTION_ID_ IS NOT NULL)\n-          OR\n-          (AUTH.RESOURCE_ID_ IS NOT NULL)\n+          <!-- Task query does not use left join if cmmn is disabled, \n+            so we don't need to account for case tasks in this case. -->\n+          <if test=\"authCheck.useLeftJoin\" >", "originalCommit": "2562de6ac004b29b59b283fe1b5a0eb6c355dbdc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "103d66bd4d040f942da1baf0c19d64c020340cf4", "url": "https://github.com/camunda/camunda-bpm-platform/commit/103d66bd4d040f942da1baf0c19d64c020340cf4", "message": "improve(engine): improve task query when cmmn is disabled\n\n- converts left join with ACT_RU_AUTHORIZATION to inner join\n- removes additional where condition on CASE_EXECUTION_ID_\n\nrelated to CAM-12408, CAM-11277", "committedDate": "2020-09-16T07:46:09Z", "type": "commit"}, {"oid": "d7693906123829e6992a4936290f0ec322c18051", "url": "https://github.com/camunda/camunda-bpm-platform/commit/d7693906123829e6992a4936290f0ec322c18051", "message": "make exclusion of case execution id check more clear", "committedDate": "2020-09-16T07:51:47Z", "type": "commit"}, {"oid": "d7693906123829e6992a4936290f0ec322c18051", "url": "https://github.com/camunda/camunda-bpm-platform/commit/d7693906123829e6992a4936290f0ec322c18051", "message": "make exclusion of case execution id check more clear", "committedDate": "2020-09-16T07:51:47Z", "type": "forcePushed"}]}