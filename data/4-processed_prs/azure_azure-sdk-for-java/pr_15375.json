{"pr_number": 15375, "pr_title": "Fix an issue preventing population of the \"tags\" and \"managed\" properties in KeyVaultKey and KeyProperties", "pr_createdAt": "2020-09-19T01:58:00Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/15375", "timeline": [{"oid": "82e80a1f41ac786988f9635f8d19a8ba30806eb4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/82e80a1f41ac786988f9635f8d19a8ba30806eb4", "message": "- Fixed an issue that prevented the `tags` and `managed` members of `KeyProperties` from getting populated when retrieving a single key using `KeyClient`, `KeyAsyncClient`, `CryptographyClient` and `CryptographyAsyncClient`.\n- Removed unnecessary setter calls in `KeyProperties.unpackAttributes()` for values that are not a part of the `attributes` property in `KeyVaultKey` and `KeyProperties`.\n- Removed `KeyVaultKey.unpackKid()` since `kid` is not a top level property of the JSON returned by the Key Vault service and thus, is only populated in `KeyProperties` when calling `KeyVaultKey.unpackAttributes()`.", "committedDate": "2020-09-19T01:59:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjk5MTQ2Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15375#discussion_r492991466", "bodyText": "Validate that these are not needed in V7.0 SDK.", "author": "g2vinay", "createdAt": "2020-09-22T19:46:47Z", "path": "sdk/keyvault/azure-security-keyvault-keys/src/main/java/com/azure/security/keyvault/keys/models/KeyProperties.java", "diffHunk": "@@ -266,10 +267,7 @@ void unpackAttributes(Map<String, Object> attributes) {\n         this.createdOn = epochToOffsetDateTime(attributes.get(\"created\"));\n         this.updatedOn = epochToOffsetDateTime(attributes.get(\"updated\"));\n         this.recoveryLevel = (String) attributes.get(\"recoveryLevel\");\n-        this.tags = (Map<String, String>) lazyValueSelection(attributes.get(\"tags\"), this.tags);", "originalCommit": "82e80a1f41ac786988f9635f8d19a8ba30806eb4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA3NzI3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15375#discussion_r493077274", "bodyText": "tags are only a part of the KeyBundle object definition (mapped to the KeyVaultKey model) in the Swagger for service version 7.0, they are not included in KeyAttributes (mapped to the KeyProperties model).", "author": "vcolin7", "createdAt": "2020-09-22T22:52:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjk5MTQ2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjk5MTUxMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15375#discussion_r492991512", "bodyText": "Validate that kid is not sent in a different location in V7.0 SDK .", "author": "g2vinay", "createdAt": "2020-09-22T19:46:53Z", "path": "sdk/keyvault/azure-security-keyvault-keys/src/main/java/com/azure/security/keyvault/keys/models/KeyVaultKey.java", "diffHunk": "@@ -106,14 +106,19 @@ private void unpackKeyMaterial(Map<String, Object> key) {\n         this.key = properties.createKeyMaterialFromJson(key);\n     }\n \n-    @JsonProperty(value = \"kid\")\n-    private void unpackKid(String kid) {\n-        properties.unpackId(kid);", "originalCommit": "82e80a1f41ac786988f9635f8d19a8ba30806eb4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA3ODI1MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15375#discussion_r493078250", "bodyText": "kid is only a part of the JsonWebKey object definition in the Swagger for service version 7.0, which is part of KeyBundle (mapped to the KeyVaultKey model) but not a direct member of it. It's deserialized by unpackKid() in unpackKeyMaterial().", "author": "vcolin7", "createdAt": "2020-09-22T22:55:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjk5MTUxMg=="}], "type": "inlineReview"}]}