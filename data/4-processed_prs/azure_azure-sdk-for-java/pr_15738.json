{"pr_number": 15738, "pr_title": "Cosmos improve request diagnostics to capture ClientStatistics counts / config", "pr_createdAt": "2020-09-25T23:33:46Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/15738", "timeline": [{"oid": "09e8d941002558a3611261abdafee33720bcbf27", "url": "https://github.com/Azure/azure-sdk-for-java/commit/09e8d941002558a3611261abdafee33720bcbf27", "message": "client diagnostics contex", "committedDate": "2020-09-25T20:30:37Z", "type": "commit"}, {"oid": "e9944a45a3dd90a64432f5c1fb61970560ea6366", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e9944a45a3dd90a64432f5c1fb61970560ea6366", "message": "capture client statistics in request diagnostics", "committedDate": "2020-09-25T23:26:29Z", "type": "commit"}, {"oid": "65885626b5149b6d2fe49c66fd9c9e5ea5f7422a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/65885626b5149b6d2fe49c66fd9c9e5ea5f7422a", "message": "Merge branch 'master' into users/moderakh/diagnostics-ctx", "committedDate": "2020-09-25T23:27:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjExOTUyNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15738#discussion_r496119527", "bodyText": "Will it be addressed now?", "author": "kirankumarkolli", "createdAt": "2020-09-28T17:32:21Z", "path": "sdk/cosmos/azure-cosmos/src/main/java/com/azure/cosmos/implementation/ConnectionPolicy.java", "diffHunk": "@@ -498,4 +498,10 @@ public String toString() {\n             \", maxRequestsPerConnection=\" + maxRequestsPerConnection +\n             '}';\n     }\n+\n+    public String asDiagnostics() {\n+        // TODO: cache this to avoid recomputation per diagnostics request\n+        // TODO: only include essential configs", "originalCommit": "65885626b5149b6d2fe49c66fd9c9e5ea5f7422a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEyMDQ2Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15738#discussion_r496120466", "bodyText": "yes. once we close on the high level of the PR what information we want to capture, etc. I will address this within the scope of this PR.", "author": "moderakh", "createdAt": "2020-09-28T17:34:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjExOTUyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYzNjgwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15738#discussion_r497636801", "bodyText": "done.", "author": "moderakh", "createdAt": "2020-09-30T16:17:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjExOTUyNw=="}], "type": "inlineReview"}, {"oid": "eb47c8df039375137bec30bee357b09cc2b5d893", "url": "https://github.com/Azure/azure-sdk-for-java/commit/eb47c8df039375137bec30bee357b09cc2b5d893", "message": "fixed spotbug complain", "committedDate": "2020-09-28T23:16:24Z", "type": "commit"}, {"oid": "c5f950d7f395e88c72de46211f0441a90958ef9a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c5f950d7f395e88c72de46211f0441a90958ef9a", "message": "diagnostics", "committedDate": "2020-09-29T00:01:48Z", "type": "commit"}, {"oid": "ac64ff868ceac68e24ad727e2980f1d7d0e40b89", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ac64ff868ceac68e24ad727e2980f1d7d0e40b89", "message": "fixed tests", "committedDate": "2020-09-29T22:03:46Z", "type": "commit"}, {"oid": "639207670e28193b275371f9b8c4ca5aed29cc66", "url": "https://github.com/Azure/azure-sdk-for-java/commit/639207670e28193b275371f9b8c4ca5aed29cc66", "message": "capture rntbd, gw config, etc in the request diagnostics, cleanup", "committedDate": "2020-09-30T06:23:31Z", "type": "commit"}, {"oid": "a0f3caea843c2d823f3d82c927cd17fd313fc829", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a0f3caea843c2d823f3d82c927cd17fd313fc829", "message": "Merge branch 'master' into users/moderakh/diagnostics-ctx", "committedDate": "2020-09-30T06:29:46Z", "type": "commit"}, {"oid": "71d5f3daee0f07ff1e18afb65b1a8b14c3050a3a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/71d5f3daee0f07ff1e18afb65b1a8b14c3050a3a", "message": "added test", "committedDate": "2020-09-30T07:39:12Z", "type": "commit"}, {"oid": "ff91c42baeda015e8dae2e924e84fac426ee4f71", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ff91c42baeda015e8dae2e924e84fac426ee4f71", "message": "minor fix", "committedDate": "2020-09-30T07:50:54Z", "type": "commit"}, {"oid": "b353038ae7dbc15e20440ad0e841dcda5fcc26b1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b353038ae7dbc15e20440ad0e841dcda5fcc26b1", "message": "prevent default connection policy to get overriden", "committedDate": "2020-09-30T08:19:33Z", "type": "commit"}, {"oid": "c8474e2464ad645d7dcb6c0bdffb698e12e78e6a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c8474e2464ad645d7dcb6c0bdffb698e12e78e6a", "message": "cleanup", "committedDate": "2020-09-30T15:32:00Z", "type": "commit"}, {"oid": "1dc862b80431558807b36228e55f5f196fecd35f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1dc862b80431558807b36228e55f5f196fecd35f", "message": "added a missing file", "committedDate": "2020-09-30T15:43:55Z", "type": "commit"}]}