{"pr_number": 8098, "pr_title": "Update docstring and readme", "pr_createdAt": "2020-02-11T02:09:19Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/8098", "timeline": [{"oid": "564cc2cf9cf11318078014aa3d03314039730bcb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/564cc2cf9cf11318078014aa3d03314039730bcb", "message": "update docstring and readme", "committedDate": "2020-02-11T02:08:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQyMTU3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8098#discussion_r377421573", "bodyText": "Might be nice to format the options on different lines. Here's how it looks now: https://github.com/Azure/azure-sdk-for-java/blob/564cc2cf9cf11318078014aa3d03314039730bcb/sdk/textanalytics/azure-ai-textanalytics/README.md#create-a-text-analytics-resource", "author": "kristapratico", "createdAt": "2020-02-11T02:21:47Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -35,7 +35,7 @@ Text Analytics supports both [multi-service and single-service access][service_a\n resource if you plan to access multiple cognitive services under a single endpoint/key. For Text Analytics access only,\n create a Text Analytics resource.\n \n-You can create either resource using the [Azure Portal][create_new_resource] or [Azure CLI][azure_cli].\n+You can create either resource using the **Option 1:** [Azure Portal][create_new_resource] or **Option 2:** [Azure CLI][azure_cli].", "originalCommit": "564cc2cf9cf11318078014aa3d03314039730bcb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQzMzExOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8098#discussion_r377433119", "bodyText": "updated", "author": "mssfang", "createdAt": "2020-02-11T03:28:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQyMTU3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQyMjMwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8098#discussion_r377422309", "bodyText": "\"You will need...\"", "author": "kristapratico", "createdAt": "2020-02-11T02:25:51Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -56,73 +56,30 @@ az cognitiveservices account create \\\n ```\n ### Authenticate the client\n In order to interact with the Text Analytics service, you'll need to create an instance of the \n-`TextAnalyticsClient` class. You would need an **endpoint** and **API key** to instantiate a client object.\n+`TextAnalyticsClient` class. You would need an **endpoint** and either an **API key** or **AAD TokenCredential** to instantiate a client object.", "originalCommit": "564cc2cf9cf11318078014aa3d03314039730bcb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQyMjY3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8098#discussion_r377422679", "bodyText": "\"When the operation results an error.\" I think you meant to use a comma here and include the next sentence, but not sure.", "author": "kristapratico", "createdAt": "2020-02-11T02:28:04Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -134,17 +91,54 @@ TextAnalyticsClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n \n credential.updateCredential(\"{new_api_key}\");\n ```\n+##### **Option 2**: Create TextAnalyticsClient with Azure Active Directory Credential\n+To use an [Azure Active Directory (AAD) token credential][aad_credential],\n+provide an instance of the desired credential type obtained from the [azure-identity][azure_identity] library.\n+Note that regional endpoints do not support AAD authentication. Create a [custom subdomain][custom_subdomain] \n+name for your resource in order to use this type of authentication.\n+\n+Authentication with AAD requires some initial setup:\n+* [Install azure-identity][install_azure_identity]\n+* [Register a new AAD application][register_AAD_application]\n+* [Grant access][grant_access] to Text Analytics by assigning the `\"Cognitive Services User\"` role to your service principal.\n+\n+After setup, you can choose which type of [credential][credential_type] from azure.identity to use. \n+As an example, [DefaultAzureCredential][default_azure_credential]\n+can be used to authenticate the client:\n+\n+Set the values of the client ID, tenant ID, and client secret of the AAD application as environment variables: \n+AZURE_CLIENT_ID, AZURE_TENANT_ID, AZURE_CLIENT_SECRET.\n+\n+Use the returned token credential to authenticate the client:\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L67-L70 -->\n+```java\n+TextAnalyticsAsyncClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n+    .endpoint(\"{endpoint}\")\n+    .credential(new DefaultAzureCredentialBuilder().build())\n+    .buildAsyncClient();\n+```\n+\n ## Key concepts\n+### Client\n+The Text Analytics client library provides a [TextAnalyticsClient][text_analytics_sync_client] and \n+[TextAnalyticsAsyncClient][text_analytics_async_client] to do analysis on batches of documents. It provides both synchronous and\n+asynchronous operations to access a specific use of Text Analytics, such as language detection or key phrase extraction.\n \n ### Text Input\n-A text input, sometimes called a `document`, is a single unit of input to be analyzed by the predictive models\n+A **text input**, sometimes called a **document**, is a single unit of input to be analyzed by the predictive models\n in the Text Analytics service. Operations on Text Analytics client may take a single text input or a collection\n-of inputs to be analyzed as a batch.\n+of inputs to be analyzed as a batch. \n+See [service limitations][service_input_limitation] for the input, including document length limits, maximum batch size,\n+and supported text encoding.\n \n ### Operation Result\n An operation result, such as `AnalyzeSentimentResult`, is the result of a Text Analytics operation, containing a \n prediction or predictions about a single text input. An operation's result type also may optionally include information\n-about the input document and how it was processed.\n+about the input document and how it was processed. An operation result contains a `isError` property that allows to\n+identify if an operation executed was successful or unsuccessful for the given text input. When the operation results\n+an error. You can simply call `getError()` to get `TextAnalyticsError` which contains the reason why it is unsuccessful. ", "originalCommit": "564cc2cf9cf11318078014aa3d03314039730bcb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQzMjcyNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8098#discussion_r377432725", "bodyText": "yup.", "author": "mssfang", "createdAt": "2020-02-11T03:26:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQyMjY3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQzMTUwOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8098#discussion_r377431508", "bodyText": "\"Cognitive Services\"", "author": "maririos", "createdAt": "2020-02-11T03:19:29Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -56,73 +56,30 @@ az cognitiveservices account create \\\n ```\n ### Authenticate the client\n In order to interact with the Text Analytics service, you'll need to create an instance of the \n-`TextAnalyticsClient` class. You would need an **endpoint** and **API key** to instantiate a client object.\n+`TextAnalyticsClient` class. You would need an **endpoint** and either an **API key** or **AAD TokenCredential** to instantiate a client object.\n And they can be found in the [Azure Portal][azure_portal] under the \"Quickstart\" in your created\n-Text Analytics resource. \n+Text Analytics resource. See the full details regarding [authentication][authentication] of cognitive services.", "originalCommit": "564cc2cf9cf11318078014aa3d03314039730bcb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQzMjk1Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8098#discussion_r377432956", "bodyText": "Consider changing to Return value", "author": "maririos", "createdAt": "2020-02-11T03:27:22Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -134,17 +91,54 @@ TextAnalyticsClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n \n credential.updateCredential(\"{new_api_key}\");\n ```\n+##### **Option 2**: Create TextAnalyticsClient with Azure Active Directory Credential\n+To use an [Azure Active Directory (AAD) token credential][aad_credential],\n+provide an instance of the desired credential type obtained from the [azure-identity][azure_identity] library.\n+Note that regional endpoints do not support AAD authentication. Create a [custom subdomain][custom_subdomain] \n+name for your resource in order to use this type of authentication.\n+\n+Authentication with AAD requires some initial setup:\n+* [Install azure-identity][install_azure_identity]\n+* [Register a new AAD application][register_AAD_application]\n+* [Grant access][grant_access] to Text Analytics by assigning the `\"Cognitive Services User\"` role to your service principal.\n+\n+After setup, you can choose which type of [credential][credential_type] from azure.identity to use. \n+As an example, [DefaultAzureCredential][default_azure_credential]\n+can be used to authenticate the client:\n+\n+Set the values of the client ID, tenant ID, and client secret of the AAD application as environment variables: \n+AZURE_CLIENT_ID, AZURE_TENANT_ID, AZURE_CLIENT_SECRET.\n+\n+Use the returned token credential to authenticate the client:\n+<!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L67-L70 -->\n+```java\n+TextAnalyticsAsyncClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n+    .endpoint(\"{endpoint}\")\n+    .credential(new DefaultAzureCredentialBuilder().build())\n+    .buildAsyncClient();\n+```\n+\n ## Key concepts\n+### Client\n+The Text Analytics client library provides a [TextAnalyticsClient][text_analytics_sync_client] and \n+[TextAnalyticsAsyncClient][text_analytics_async_client] to do analysis on batches of documents. It provides both synchronous and\n+asynchronous operations to access a specific use of Text Analytics, such as language detection or key phrase extraction.\n \n ### Text Input\n-A text input, sometimes called a `document`, is a single unit of input to be analyzed by the predictive models\n+A **text input**, sometimes called a **document**, is a single unit of input to be analyzed by the predictive models\n in the Text Analytics service. Operations on Text Analytics client may take a single text input or a collection\n-of inputs to be analyzed as a batch.\n+of inputs to be analyzed as a batch. \n+See [service limitations][service_input_limitation] for the input, including document length limits, maximum batch size,\n+and supported text encoding.\n \n ### Operation Result", "originalCommit": "564cc2cf9cf11318078014aa3d03314039730bcb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQzMzM0MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8098#discussion_r377433340", "bodyText": "so i guess \"Operation Result Collection\" will need to change to \"Result Value Collection\"?", "author": "mssfang", "createdAt": "2020-02-11T03:29:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQzMjk1Ng=="}], "type": "inlineReview"}, {"oid": "5502588f6641d8ba611f5738e382ad31549cd1e1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5502588f6641d8ba611f5738e382ad31549cd1e1", "message": "wording", "committedDate": "2020-02-11T03:27:53Z", "type": "commit"}, {"oid": "4d4eb506b1db6347b22e9146ddf81258251f05bb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4d4eb506b1db6347b22e9146ddf81258251f05bb", "message": "based on feedback", "committedDate": "2020-02-11T04:16:17Z", "type": "commit"}, {"oid": "57d726948e96714e18b0a37c41dca6b42340e836", "url": "https://github.com/Azure/azure-sdk-for-java/commit/57d726948e96714e18b0a37c41dca6b42340e836", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into TA-Readme-updates", "committedDate": "2020-02-11T16:19:16Z", "type": "commit"}, {"oid": "135b791c6799be11b9d6db16602df08e0b943280", "url": "https://github.com/Azure/azure-sdk-for-java/commit/135b791c6799be11b9d6db16602df08e0b943280", "message": "Merge branch 'TA-Readme-updates' of https://github.com/mssfang/azure-sdk-for-java into TA-Readme-updates", "committedDate": "2020-02-11T16:26:17Z", "type": "commit"}]}