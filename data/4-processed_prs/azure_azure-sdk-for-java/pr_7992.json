{"pr_number": 7992, "pr_title": "Versioning packages in dev feed", "pr_createdAt": "2020-02-05T23:54:41Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/7992", "timeline": [{"oid": "e25329457664ec9992297c2b6988e9a9ecaaa971", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e25329457664ec9992297c2b6988e9a9ecaaa971", "message": "add --set-dev-zero-version and support for setting unreleased dependency version ranges in set_versions.py", "committedDate": "2020-02-05T17:53:14Z", "type": "commit"}, {"oid": "7eaaa534c64c2384ab83b3e02aa5b8df3681b573", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7eaaa534c64c2384ab83b3e02aa5b8df3681b573", "message": "add --set-dev-zero-version to archetype-sdk-client.yml", "committedDate": "2020-02-05T23:22:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTk2OTg5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7992#discussion_r375969891", "bodyText": "The shortened argument should be double dash and should also be the acronym for the argument, like the other arguments.", "author": "JimSuplizio", "createdAt": "2020-02-06T17:16:08Z", "path": "eng/versioning/set_versions.py", "diffHunk": "@@ -262,6 +337,7 @@ def main():\n     optional.add_argument('--prep-source-testing', '--pst', action='store_true', help='prep the version file for source testing')\n     optional.add_argument('--increment-version', '--iv', action='store_true', help='increment the version for a given group/artifact')\n     optional.add_argument('--verify-version', '--vv', action='store_true', help='verify the version for a given group/artifact')\n+    optional.add_argument('--set-dev-zero-version', '-z', action='store_true', help='Set a zero dev build version for packages that do not already have dev versions set (should be run after setting dev versions for other packages)')", "originalCommit": "7eaaa534c64c2384ab83b3e02aa5b8df3681b573", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "22dd1e03f264c4a602b70bb651682694b6af85e5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/22dd1e03f264c4a602b70bb651682694b6af85e5", "message": "follow the other conventions in set_versions.py", "committedDate": "2020-02-06T17:21:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUzNDE5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7992#discussion_r376534198", "bodyText": "Any reason we did this as a separate step as opposed to as part of the set dev version call?", "author": "weshaggard", "createdAt": "2020-02-07T18:17:19Z", "path": "eng/versioning/set_versions.py", "diffHunk": "@@ -51,12 +51,76 @@\n version_regex_named = re.compile(version_regex_str_with_names_anchored)\n prerelease_regex_named = re.compile(prerelease_version_regex_with_name)\n \n+# Update packages (excluding unreleased dependencies and packages which already\n+# have a dev version set) to use a \"zero dev version\" (e.g. dev.20201225.0).\n+# This ensures that packages built in pipelines who have unreleased dependencies\n+# that are built in other pipelines can successfully fall back to a source build\n+# of the unreleased dependency package in the monorepo if the unreleased\n+# dependency has not been published to the dev feed yet. This makes it so\n+# nightly pipelines do not have to coordinate to publish packages to the dev\n+# feed in dependency order.\n+# This function assumes that the version file has already been updated with dev", "originalCommit": "22dd1e03f264c4a602b70bb651682694b6af85e5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}