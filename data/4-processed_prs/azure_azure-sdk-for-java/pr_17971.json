{"pr_number": 17971, "pr_title": "Update LanguageSettings.ps1", "pr_createdAt": "2020-12-04T01:12:47Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/17971", "timeline": [{"oid": "cfbd41fc22855d633a1270325196da91cce7004b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cfbd41fc22855d633a1270325196da91cce7004b", "message": "Add function to retrieve package versions from nuget", "committedDate": "2020-12-04T01:45:31Z", "type": "forcePushed"}, {"oid": "d187572b50d083c6706e6f014eefbcbe0fd1c148", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d187572b50d083c6706e6f014eefbcbe0fd1c148", "message": "Add SetPackageVersion function", "committedDate": "2020-12-07T18:08:15Z", "type": "forcePushed"}, {"oid": "25ea5c3d0c319a21d78e6b8eee85df46b1f09649", "url": "https://github.com/Azure/azure-sdk-for-java/commit/25ea5c3d0c319a21d78e6b8eee85df46b1f09649", "message": "Add SetPackageVersion function", "committedDate": "2020-12-07T18:15:45Z", "type": "forcePushed"}, {"oid": "c58bc8da654176c77206304d70082f90004f2834", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c58bc8da654176c77206304d70082f90004f2834", "message": "Add GetPackageInstallNotes function", "committedDate": "2020-12-08T20:33:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk3NDUzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17971#discussion_r538974538", "bodyText": "Lets put { on its own line for the functions.", "author": "weshaggard", "createdAt": "2020-12-09T03:18:11Z", "path": "eng/scripts/Language-Settings.ps1", "diffHunk": "@@ -216,3 +216,31 @@ function Update-java-CIConfig($pkgs, $ciRepo, $locationInDocRepo, $monikerId=$nu\n \n   Set-Content -Path $pkgJsonLoc -Value $jsonContent\n }\n+\n+function GetExistingPackageVersions ($PackageName, $GroupId=$null) {", "originalCommit": "c58bc8da654176c77206304d70082f90004f2834", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk3NDY5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17971#discussion_r538974698", "bodyText": "Do we need to install any python dependencies to call these scripts?", "author": "weshaggard", "createdAt": "2020-12-09T03:18:42Z", "path": "eng/scripts/Language-Settings.ps1", "diffHunk": "@@ -216,3 +216,31 @@ function Update-java-CIConfig($pkgs, $ciRepo, $locationInDocRepo, $monikerId=$nu\n \n   Set-Content -Path $pkgJsonLoc -Value $jsonContent\n }\n+\n+function GetExistingPackageVersions ($PackageName, $GroupId=$null) {\n+  try {\n+    $Uri = 'https://search.maven.org/solrsearch/select?q=g:\"' + $GroupId + '\"+AND+a:\"' + $PackageName +'\"&core=gav&rows=20&wt=json'\n+    $existingVersion = Invoke-RestMethod -Method GET -Uri $Uri\n+    return $existingVersion.response.docs.v\n+  }\n+  catch {\n+    LogError \"Failed to retieve package versions. `n$_\"\n+    return $null\n+  }\n+}\n+\n+function SetPackageVersion ($PackageName, $Version, $ServiceDirectory, $ReleaseDate, $BuildType, $GroupId) {\n+  if($null -eq $ReleaseDate)\n+  {\n+    $ReleaseDate = Get-Date -Format \"yyyy-MM-dd\"\n+  }\n+  python \"$EngDir/versioning/set_versions.py\" --build-type $BuildType --new-version $Version --ai $PackageName --gi $GroupId", "originalCommit": "c58bc8da654176c77206304d70082f90004f2834", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTQ5MDY1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17971#discussion_r541490654", "bodyText": "Aside from python, no other dependency is required.", "author": "chidozieononiwu", "createdAt": "2020-12-12T03:38:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODk3NDY5OA=="}], "type": "inlineReview"}, {"oid": "66cf77a0faa602298ef5d07a8424d9b2062b8f73", "url": "https://github.com/Azure/azure-sdk-for-java/commit/66cf77a0faa602298ef5d07a8424d9b2062b8f73", "message": "Add GetPackageInstallNotes function", "committedDate": "2020-12-10T22:16:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU1NDYzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17971#discussion_r540554638", "bodyText": "retieve -> retrieve", "author": "samvaity", "createdAt": "2020-12-10T22:48:47Z", "path": "eng/scripts/Language-Settings.ps1", "diffHunk": "@@ -216,3 +217,31 @@ function Update-java-CIConfig($pkgs, $ciRepo, $locationInDocRepo, $monikerId=$nu\n \n   Set-Content -Path $pkgJsonLoc -Value $jsonContent\n }\n+\n+function GetExistingPackageVersions ($PackageName, $GroupId=$null) {\n+  try {\n+    $Uri = 'https://search.maven.org/solrsearch/select?q=g:\"' + $GroupId + '\"+AND+a:\"' + $PackageName +'\"&core=gav&rows=20&wt=json'\n+    $existingVersion = Invoke-RestMethod -Method GET -Uri $Uri\n+    return $existingVersion.response.docs.v\n+  }\n+  catch {\n+    LogError \"Failed to retieve package versions. `n$_\"", "originalCommit": "66cf77a0faa602298ef5d07a8424d9b2062b8f73", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "91fe2717a3ffe2d28bdb5aa86046df3d2e50b157", "url": "https://github.com/Azure/azure-sdk-for-java/commit/91fe2717a3ffe2d28bdb5aa86046df3d2e50b157", "message": "Add GetPackageInstallNotes function", "committedDate": "2020-12-11T21:37:24Z", "type": "forcePushed"}, {"oid": "e884bfc941290b4a1e3b3971389c84d5f0db82ab", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e884bfc941290b4a1e3b3971389c84d5f0db82ab", "message": "Add GetPackageInstallNotes function", "committedDate": "2020-12-11T22:25:51Z", "type": "forcePushed"}, {"oid": "1242d49fbf0193a9c6947cc72c52857c1c517d7d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1242d49fbf0193a9c6947cc72c52857c1c517d7d", "message": "Add GetPackageInstallNotes function", "committedDate": "2020-12-12T00:52:33Z", "type": "forcePushed"}, {"oid": "cb4a1b8ad9bb9a46e1244a8c73a34245a6c73792", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cb4a1b8ad9bb9a46e1244a8c73a34245a6c73792", "message": "Add GetPackageInstallNotes function", "committedDate": "2020-12-12T02:09:51Z", "type": "forcePushed"}, {"oid": "8576ba3c3180f2f21157f077b20fe6c47c9c2d07", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8576ba3c3180f2f21157f077b20fe6c47c9c2d07", "message": "Add GetPackageInstallNotes function", "committedDate": "2020-12-12T03:36:27Z", "type": "forcePushed"}, {"oid": "2150448f87dfa61a066ca60619d29999bbdbc134", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2150448f87dfa61a066ca60619d29999bbdbc134", "message": "Add GetPackageInstallNotes function", "committedDate": "2021-01-04T22:26:36Z", "type": "forcePushed"}, {"oid": "01ba6fc3c46a1b34957ef968e056f65e1d1ec007", "url": "https://github.com/Azure/azure-sdk-for-java/commit/01ba6fc3c46a1b34957ef968e056f65e1d1ec007", "message": "Add GetPackageInstallNotes function", "committedDate": "2021-01-05T03:33:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjE5MjEyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17971#discussion_r552192129", "bodyText": "Should we do this as a function similar to how you are doing the install notes? That will give it the most flexibility.", "author": "weshaggard", "createdAt": "2021-01-05T21:01:55Z", "path": "eng/scripts/Language-Settings.ps1", "diffHunk": "@@ -3,6 +3,7 @@ $PackageRepository = \"Maven\"\n $packagePattern = \"*.pom\"\n $MetadataUri = \"https://raw.githubusercontent.com/Azure/azure-sdk/master/_data/releases/latest/java-packages.csv\"\n $BlobStorageUrl = \"https://azuresdkdocs.blob.core.windows.net/%24web?restype=container&comp=list&prefix=java%2F&delimiter=%2F\"\n+$PACKAGE_INSTALL_NOTES_REGEX = \"<artifactId>(?<PackageName>.*)<\\/artifactId>\\r\\n\\s+<version>(?<Version>.*)<\\/version>\"", "originalCommit": "01ba6fc3c46a1b34957ef968e056f65e1d1ec007", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "30fbd1b03e7e6ec90b0097ae00b86afd75e8e724", "url": "https://github.com/Azure/azure-sdk-for-java/commit/30fbd1b03e7e6ec90b0097ae00b86afd75e8e724", "message": "Add GetPackageInstallNotes function", "committedDate": "2021-01-05T23:33:50Z", "type": "forcePushed"}, {"oid": "7985b491a6384e1ef94cc40c005d8ae543757f31", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7985b491a6384e1ef94cc40c005d8ae543757f31", "message": "Add GetPackageInstallNotes function", "committedDate": "2021-01-26T20:36:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NDg1MDk0MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17971#discussion_r564850941", "bodyText": "nit remove extra spacing.", "author": "weshaggard", "createdAt": "2021-01-26T21:38:24Z", "path": "eng/scripts/Language-Settings.ps1", "diffHunk": "@@ -256,3 +256,16 @@ function SetPackageVersion ($PackageName, $Version, $ServiceDirectory, $ReleaseD\n   & \"$EngCommonScriptsDir/Update-ChangeLog.ps1\" -Version $Version -ServiceDirectory $ServiceDirectory -PackageName $PackageName `\n   -Unreleased $False -ReplaceLatestEntryTitle $True -ReleaseDate $ReleaseDate\n }\n+\n+  function GetExistingPackageVersions ($PackageName, $GroupId=$null)", "originalCommit": "7985b491a6384e1ef94cc40c005d8ae543757f31", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "687271ff2f3d0b4418922510965d388c998543ea", "url": "https://github.com/Azure/azure-sdk-for-java/commit/687271ff2f3d0b4418922510965d388c998543ea", "message": "Add function to retrieve package versions from nuget", "committedDate": "2021-01-27T00:02:44Z", "type": "commit"}, {"oid": "7815e7a7a8abe419b82194b56a49ad34f935077f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7815e7a7a8abe419b82194b56a49ad34f935077f", "message": "Add SetPackageVersion function", "committedDate": "2021-01-27T00:02:45Z", "type": "commit"}, {"oid": "a9d4d73fd250217d7dc1db08a0a15556ba880819", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a9d4d73fd250217d7dc1db08a0a15556ba880819", "message": "Add GetPackageInstallNotes function", "committedDate": "2021-01-27T00:21:25Z", "type": "forcePushed"}, {"oid": "ca9bd6acd2595afbb827fdcfe6a0788f7a44cb3d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ca9bd6acd2595afbb827fdcfe6a0788f7a44cb3d", "message": "Add GetPackageInstallNotes function", "committedDate": "2021-01-27T00:23:26Z", "type": "commit"}, {"oid": "ca9bd6acd2595afbb827fdcfe6a0788f7a44cb3d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ca9bd6acd2595afbb827fdcfe6a0788f7a44cb3d", "message": "Add GetPackageInstallNotes function", "committedDate": "2021-01-27T00:23:26Z", "type": "forcePushed"}]}