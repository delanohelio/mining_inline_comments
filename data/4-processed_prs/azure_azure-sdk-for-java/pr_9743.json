{"pr_number": 9743, "pr_title": "Enforcing dependency whitelists in Maven", "pr_createdAt": "2020-04-01T05:57:54Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/9743", "timeline": [{"oid": "0b7cff12d8c679ff33244a3c3dfe03a585620607", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0b7cff12d8c679ff33244a3c3dfe03a585620607", "message": "First pass at enforcing more dependency details in maven.", "committedDate": "2020-04-01T05:57:30Z", "type": "commit"}, {"oid": "8d8acf18e03ae5f47be1e2d510c625a2f76ad9cf", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8d8acf18e03ae5f47be1e2d510c625a2f76ad9cf", "message": "Disable one of the maven-enforcer-plugin plugins for now, as it is not completely configured.", "committedDate": "2020-04-01T19:48:24Z", "type": "commit"}, {"oid": "4bbd1bf6d096eddb218a7bae76fe1aa798dcef60", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4bbd1bf6d096eddb218a7bae76fe1aa798dcef60", "message": "Add version reference", "committedDate": "2020-04-01T20:05:42Z", "type": "commit"}, {"oid": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "message": "Removing disabled rules for now.", "committedDate": "2020-04-01T20:22:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NTE1Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402445152", "bodyText": "Do we want to limit these inclusion to the Netty and OkHttp clients?", "author": "alzimmermsft", "createdAt": "2020-04-02T16:26:04Z", "path": "pom.client.xml", "diffHunk": "@@ -408,6 +408,87 @@\n           </execution>\n         </executions>\n       </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-enforcer-plugin</artifactId>\n+        <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-enforcer-plugin;external_dependency} -->\n+        <executions>\n+          <execution>\n+            <id>default-cli</id>\n+            <goals>\n+              <goal>enforce</goal>\n+            </goals>\n+            <configuration>\n+              <rules>\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\n+                We have a list of blessed dependencies here: https://azure.github.io/azure-sdk/java_implementation.html#dependencies\n+                Format of includes / excludes is the following: 'groupId[:artifactId][:version][:type][:scope][:classifier]'.\n+                Wildcards can be used.\n+                -->\n+                <bannedDependencies>\n+                  <searchTransitive>false</searchTransitive>\n+                  <excludes>\n+                    <!-- We exclude everything that is runtime-time, compile-time, or provided scoped (i.e. we allow\n+                    dependencies when they are used for test scope or otherwise) -->\n+                    <exclude>*:*:*:*:runtime</exclude>\n+                    <exclude>*:*:*:*:compile</exclude>\n+                    <exclude>*:*:*:*:provided</exclude>\n+                  </excludes>\n+                  <includes>\n+                    <include>com.azure:*</include>\n+                    <include>io.projectreactor</include>\n+                    <include>io.projectreactor.netty</include>\n+                    <include>io.netty</include>\n+                    <include>com.squareup.okhttp3</include>", "originalCommit": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY1ODgxMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402658811", "bodyText": "Done", "author": "JonathanGiles", "createdAt": "2020-04-02T23:45:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NTE1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NTYxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402445616", "bodyText": "Could we specifically scope this down to org.slf4j:slf4j-api, I don't want use seeing slf4j-simple getting included again.", "author": "alzimmermsft", "createdAt": "2020-04-02T16:26:49Z", "path": "pom.client.xml", "diffHunk": "@@ -408,6 +408,87 @@\n           </execution>\n         </executions>\n       </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-enforcer-plugin</artifactId>\n+        <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-enforcer-plugin;external_dependency} -->\n+        <executions>\n+          <execution>\n+            <id>default-cli</id>\n+            <goals>\n+              <goal>enforce</goal>\n+            </goals>\n+            <configuration>\n+              <rules>\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\n+                We have a list of blessed dependencies here: https://azure.github.io/azure-sdk/java_implementation.html#dependencies\n+                Format of includes / excludes is the following: 'groupId[:artifactId][:version][:type][:scope][:classifier]'.\n+                Wildcards can be used.\n+                -->\n+                <bannedDependencies>\n+                  <searchTransitive>false</searchTransitive>\n+                  <excludes>\n+                    <!-- We exclude everything that is runtime-time, compile-time, or provided scoped (i.e. we allow\n+                    dependencies when they are used for test scope or otherwise) -->\n+                    <exclude>*:*:*:*:runtime</exclude>\n+                    <exclude>*:*:*:*:compile</exclude>\n+                    <exclude>*:*:*:*:provided</exclude>\n+                  </excludes>\n+                  <includes>\n+                    <include>com.azure:*</include>\n+                    <include>io.projectreactor</include>\n+                    <include>io.projectreactor.netty</include>\n+                    <include>io.netty</include>\n+                    <include>com.squareup.okhttp3</include>\n+                    <include>org.slf4j</include>", "originalCommit": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU2MjIwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402562205", "bodyText": "Good point", "author": "JonathanGiles", "createdAt": "2020-04-02T19:33:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NTYxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NTgyNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402445824", "bodyText": "Should this be scoped to the tracing library only?", "author": "alzimmermsft", "createdAt": "2020-04-02T16:27:09Z", "path": "pom.client.xml", "diffHunk": "@@ -408,6 +408,87 @@\n           </execution>\n         </executions>\n       </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-enforcer-plugin</artifactId>\n+        <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-enforcer-plugin;external_dependency} -->\n+        <executions>\n+          <execution>\n+            <id>default-cli</id>\n+            <goals>\n+              <goal>enforce</goal>\n+            </goals>\n+            <configuration>\n+              <rules>\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\n+                We have a list of blessed dependencies here: https://azure.github.io/azure-sdk/java_implementation.html#dependencies\n+                Format of includes / excludes is the following: 'groupId[:artifactId][:version][:type][:scope][:classifier]'.\n+                Wildcards can be used.\n+                -->\n+                <bannedDependencies>\n+                  <searchTransitive>false</searchTransitive>\n+                  <excludes>\n+                    <!-- We exclude everything that is runtime-time, compile-time, or provided scoped (i.e. we allow\n+                    dependencies when they are used for test scope or otherwise) -->\n+                    <exclude>*:*:*:*:runtime</exclude>\n+                    <exclude>*:*:*:*:compile</exclude>\n+                    <exclude>*:*:*:*:provided</exclude>\n+                  </excludes>\n+                  <includes>\n+                    <include>com.azure:*</include>\n+                    <include>io.projectreactor</include>\n+                    <include>io.projectreactor.netty</include>\n+                    <include>io.netty</include>\n+                    <include>com.squareup.okhttp3</include>\n+                    <include>org.slf4j</include>\n+                    <include>com.fasterxml.jackson.*</include>\n+                    <include>io.opentelemetry</include>", "originalCommit": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjY1OTAwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402659006", "bodyText": "I didn't really want too many special cases, but this is fair - I'll move some of the special cases down into the specific client library to minimise their use outside of that library.", "author": "JonathanGiles", "createdAt": "2020-04-02T23:46:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NTgyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NjAzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402446031", "bodyText": "Mind adding a comment for what this is and where it is being used.", "author": "alzimmermsft", "createdAt": "2020-04-02T16:27:28Z", "path": "pom.client.xml", "diffHunk": "@@ -408,6 +408,87 @@\n           </execution>\n         </executions>\n       </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-enforcer-plugin</artifactId>\n+        <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-enforcer-plugin;external_dependency} -->\n+        <executions>\n+          <execution>\n+            <id>default-cli</id>\n+            <goals>\n+              <goal>enforce</goal>\n+            </goals>\n+            <configuration>\n+              <rules>\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\n+                We have a list of blessed dependencies here: https://azure.github.io/azure-sdk/java_implementation.html#dependencies\n+                Format of includes / excludes is the following: 'groupId[:artifactId][:version][:type][:scope][:classifier]'.\n+                Wildcards can be used.\n+                -->\n+                <bannedDependencies>\n+                  <searchTransitive>false</searchTransitive>\n+                  <excludes>\n+                    <!-- We exclude everything that is runtime-time, compile-time, or provided scoped (i.e. we allow\n+                    dependencies when they are used for test scope or otherwise) -->\n+                    <exclude>*:*:*:*:runtime</exclude>\n+                    <exclude>*:*:*:*:compile</exclude>\n+                    <exclude>*:*:*:*:provided</exclude>\n+                  </excludes>\n+                  <includes>\n+                    <include>com.azure:*</include>\n+                    <include>io.projectreactor</include>\n+                    <include>io.projectreactor.netty</include>\n+                    <include>io.netty</include>\n+                    <include>com.squareup.okhttp3</include>\n+                    <include>org.slf4j</include>\n+                    <include>com.fasterxml.jackson.*</include>\n+                    <include>io.opentelemetry</include>\n+                    <include>net.java.dev.jna</include>", "originalCommit": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjcxNTU0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402715543", "bodyText": "I've moved it into the azure-identity whitelist", "author": "JonathanGiles", "createdAt": "2020-04-03T03:20:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NjAzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NjM3Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402446376", "bodyText": "Could these be moved into their library specific POMs?", "author": "alzimmermsft", "createdAt": "2020-04-02T16:27:59Z", "path": "pom.client.xml", "diffHunk": "@@ -408,6 +408,87 @@\n           </execution>\n         </executions>\n       </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-enforcer-plugin</artifactId>\n+        <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-enforcer-plugin;external_dependency} -->\n+        <executions>\n+          <execution>\n+            <id>default-cli</id>\n+            <goals>\n+              <goal>enforce</goal>\n+            </goals>\n+            <configuration>\n+              <rules>\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\n+                We have a list of blessed dependencies here: https://azure.github.io/azure-sdk/java_implementation.html#dependencies\n+                Format of includes / excludes is the following: 'groupId[:artifactId][:version][:type][:scope][:classifier]'.\n+                Wildcards can be used.\n+                -->\n+                <bannedDependencies>\n+                  <searchTransitive>false</searchTransitive>\n+                  <excludes>\n+                    <!-- We exclude everything that is runtime-time, compile-time, or provided scoped (i.e. we allow\n+                    dependencies when they are used for test scope or otherwise) -->\n+                    <exclude>*:*:*:*:runtime</exclude>\n+                    <exclude>*:*:*:*:compile</exclude>\n+                    <exclude>*:*:*:*:provided</exclude>\n+                  </excludes>\n+                  <includes>\n+                    <include>com.azure:*</include>\n+                    <include>io.projectreactor</include>\n+                    <include>io.projectreactor.netty</include>\n+                    <include>io.netty</include>\n+                    <include>com.squareup.okhttp3</include>\n+                    <include>org.slf4j</include>\n+                    <include>com.fasterxml.jackson.*</include>\n+                    <include>io.opentelemetry</include>\n+                    <include>net.java.dev.jna</include>\n+\n+                    <!-- azure-core-amqp requires the following: -->\n+                    <include>org.apache.qpid:proton-j</include>\n+                    <include>com.microsoft.azure:qpid-proton-j-extensions</include>\n+\n+                    <!-- FIXME temporary support for cosmos dependencies -->\n+                    <include>io.micrometer:micrometer-core</include>\n+                    <include>io.dropwizard.metrics:metrics-core</include>\n+                    <include>com.fasterxml.uuid:java-uuid-generator</include>\n+\n+                    <!-- azure-identity requires the following: -->\n+                    <include>com.nimbusds:oauth2-oidc-sdk</include>\n+                    <include>com.microsoft.azure:msal4j</include>\n+                    <include>org.nanohttpd:nanohttpd</include>", "originalCommit": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjcxNTU4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402715580", "bodyText": "Everything has been relocated now.", "author": "JonathanGiles", "createdAt": "2020-04-03T03:20:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0NjM3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0ODExMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402448111", "bodyText": "I don't know if this is going to work all the time as we allow for unreleased dependencies when a module needs it.", "author": "alzimmermsft", "createdAt": "2020-04-02T16:30:24Z", "path": "pom.client.xml", "diffHunk": "@@ -408,6 +408,87 @@\n           </execution>\n         </executions>\n       </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-enforcer-plugin</artifactId>\n+        <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-enforcer-plugin;external_dependency} -->\n+        <executions>\n+          <execution>\n+            <id>default-cli</id>\n+            <goals>\n+              <goal>enforce</goal>\n+            </goals>\n+            <configuration>\n+              <rules>\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\n+                We have a list of blessed dependencies here: https://azure.github.io/azure-sdk/java_implementation.html#dependencies\n+                Format of includes / excludes is the following: 'groupId[:artifactId][:version][:type][:scope][:classifier]'.\n+                Wildcards can be used.\n+                -->\n+                <bannedDependencies>\n+                  <searchTransitive>false</searchTransitive>\n+                  <excludes>\n+                    <!-- We exclude everything that is runtime-time, compile-time, or provided scoped (i.e. we allow\n+                    dependencies when they are used for test scope or otherwise) -->\n+                    <exclude>*:*:*:*:runtime</exclude>\n+                    <exclude>*:*:*:*:compile</exclude>\n+                    <exclude>*:*:*:*:provided</exclude>\n+                  </excludes>\n+                  <includes>\n+                    <include>com.azure:*</include>\n+                    <include>io.projectreactor</include>\n+                    <include>io.projectreactor.netty</include>\n+                    <include>io.netty</include>\n+                    <include>com.squareup.okhttp3</include>\n+                    <include>org.slf4j</include>\n+                    <include>com.fasterxml.jackson.*</include>\n+                    <include>io.opentelemetry</include>\n+                    <include>net.java.dev.jna</include>\n+\n+                    <!-- azure-core-amqp requires the following: -->\n+                    <include>org.apache.qpid:proton-j</include>\n+                    <include>com.microsoft.azure:qpid-proton-j-extensions</include>\n+\n+                    <!-- FIXME temporary support for cosmos dependencies -->\n+                    <include>io.micrometer:micrometer-core</include>\n+                    <include>io.dropwizard.metrics:metrics-core</include>\n+                    <include>com.fasterxml.uuid:java-uuid-generator</include>\n+\n+                    <!-- azure-identity requires the following: -->\n+                    <include>com.nimbusds:oauth2-oidc-sdk</include>\n+                    <include>com.microsoft.azure:msal4j</include>\n+                    <include>org.nanohttpd:nanohttpd</include>\n+\n+                    <!-- Used by many libraries to bring in annotations used by Reactor -->\n+                    <include>com.google.code.findbugs:jsr305</include>\n+                  </includes>\n+                </bannedDependencies>\n+\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/requireReleaseDeps.html\n+                -->\n+                <requireReleaseDeps>\n+                  <message>No Snapshots Allowed!</message>\n+                </requireReleaseDeps>\n+\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/requireSameVersions.html\n+                This rule is used to enforce that all modules depend on the same version of particular dependencies or\n+                plugins.\n+                -->\n+                <requireSameVersions>\n+                  <dependencies>\n+                    <dependency>com.azure.*</dependency>", "originalCommit": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjcxNTY2OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402715668", "bodyText": "Yes, I don't particularly care about these other rules - they can be removed when they become a nuisance.", "author": "JonathanGiles", "createdAt": "2020-04-03T03:21:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ0ODExMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ1MDg1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402450855", "bodyText": "Could we also add the following checks?\nhttps://maven.apache.org/enforcer/enforcer-rules/requireReleaseVersion.html\nhttps://maven.apache.org/enforcer/enforcer-rules/requirePluginVersions.html\nhttps://maven.apache.org/enforcer/enforcer-rules/requirePrerequisite.html\nhttps://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html", "author": "alzimmermsft", "createdAt": "2020-04-02T16:34:43Z", "path": "pom.client.xml", "diffHunk": "@@ -408,6 +408,87 @@\n           </execution>\n         </executions>\n       </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-enforcer-plugin</artifactId>\n+        <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-enforcer-plugin;external_dependency} -->\n+        <executions>\n+          <execution>\n+            <id>default-cli</id>\n+            <goals>\n+              <goal>enforce</goal>\n+            </goals>\n+            <configuration>\n+              <rules>\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\n+                We have a list of blessed dependencies here: https://azure.github.io/azure-sdk/java_implementation.html#dependencies\n+                Format of includes / excludes is the following: 'groupId[:artifactId][:version][:type][:scope][:classifier]'.\n+                Wildcards can be used.\n+                -->\n+                <bannedDependencies>\n+                  <searchTransitive>false</searchTransitive>\n+                  <excludes>\n+                    <!-- We exclude everything that is runtime-time, compile-time, or provided scoped (i.e. we allow\n+                    dependencies when they are used for test scope or otherwise) -->\n+                    <exclude>*:*:*:*:runtime</exclude>\n+                    <exclude>*:*:*:*:compile</exclude>\n+                    <exclude>*:*:*:*:provided</exclude>\n+                  </excludes>\n+                  <includes>\n+                    <include>com.azure:*</include>\n+                    <include>io.projectreactor</include>\n+                    <include>io.projectreactor.netty</include>\n+                    <include>io.netty</include>\n+                    <include>com.squareup.okhttp3</include>\n+                    <include>org.slf4j</include>\n+                    <include>com.fasterxml.jackson.*</include>\n+                    <include>io.opentelemetry</include>\n+                    <include>net.java.dev.jna</include>\n+\n+                    <!-- azure-core-amqp requires the following: -->\n+                    <include>org.apache.qpid:proton-j</include>\n+                    <include>com.microsoft.azure:qpid-proton-j-extensions</include>\n+\n+                    <!-- FIXME temporary support for cosmos dependencies -->\n+                    <include>io.micrometer:micrometer-core</include>\n+                    <include>io.dropwizard.metrics:metrics-core</include>\n+                    <include>com.fasterxml.uuid:java-uuid-generator</include>\n+\n+                    <!-- azure-identity requires the following: -->\n+                    <include>com.nimbusds:oauth2-oidc-sdk</include>\n+                    <include>com.microsoft.azure:msal4j</include>\n+                    <include>org.nanohttpd:nanohttpd</include>\n+\n+                    <!-- Used by many libraries to bring in annotations used by Reactor -->\n+                    <include>com.google.code.findbugs:jsr305</include>\n+                  </includes>\n+                </bannedDependencies>\n+\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/requireReleaseDeps.html\n+                -->\n+                <requireReleaseDeps>\n+                  <message>No Snapshots Allowed!</message>\n+                </requireReleaseDeps>\n+\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/requireSameVersions.html\n+                This rule is used to enforce that all modules depend on the same version of particular dependencies or\n+                plugins.\n+                -->\n+                <requireSameVersions>", "originalCommit": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ1Mjg2Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402452862", "bodyText": "Would moving this configuration outside of the execution section, into the root of the plugin allow for easier overriding in the inheriting POMs?", "author": "alzimmermsft", "createdAt": "2020-04-02T16:37:36Z", "path": "pom.client.xml", "diffHunk": "@@ -408,6 +408,87 @@\n           </execution>\n         </executions>\n       </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-enforcer-plugin</artifactId>\n+        <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-enforcer-plugin;external_dependency} -->\n+        <executions>\n+          <execution>\n+            <id>default-cli</id>\n+            <goals>\n+              <goal>enforce</goal>\n+            </goals>\n+            <configuration>", "originalCommit": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQ1ODIwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9743#discussion_r402458203", "bodyText": "@JonathanGiles This is the reason that the analyze step is failing. The configuration for the plugin overloads both dependency and plugins for the requireSameVersion configuration. I've fixed the pom file version scanner as part of this PR which has been reviewed and merged into master. Once you update your branch and resubmit the analyze step should pass.", "author": "JimSuplizio", "createdAt": "2020-04-02T16:45:44Z", "path": "pom.client.xml", "diffHunk": "@@ -408,6 +408,87 @@\n           </execution>\n         </executions>\n       </plugin>\n+\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-enforcer-plugin</artifactId>\n+        <version>3.0.0-M3</version> <!-- {x-version-update;org.apache.maven.plugins:maven-enforcer-plugin;external_dependency} -->\n+        <executions>\n+          <execution>\n+            <id>default-cli</id>\n+            <goals>\n+              <goal>enforce</goal>\n+            </goals>\n+            <configuration>\n+              <rules>\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\n+                We have a list of blessed dependencies here: https://azure.github.io/azure-sdk/java_implementation.html#dependencies\n+                Format of includes / excludes is the following: 'groupId[:artifactId][:version][:type][:scope][:classifier]'.\n+                Wildcards can be used.\n+                -->\n+                <bannedDependencies>\n+                  <searchTransitive>false</searchTransitive>\n+                  <excludes>\n+                    <!-- We exclude everything that is runtime-time, compile-time, or provided scoped (i.e. we allow\n+                    dependencies when they are used for test scope or otherwise) -->\n+                    <exclude>*:*:*:*:runtime</exclude>\n+                    <exclude>*:*:*:*:compile</exclude>\n+                    <exclude>*:*:*:*:provided</exclude>\n+                  </excludes>\n+                  <includes>\n+                    <include>com.azure:*</include>\n+                    <include>io.projectreactor</include>\n+                    <include>io.projectreactor.netty</include>\n+                    <include>io.netty</include>\n+                    <include>com.squareup.okhttp3</include>\n+                    <include>org.slf4j</include>\n+                    <include>com.fasterxml.jackson.*</include>\n+                    <include>io.opentelemetry</include>\n+                    <include>net.java.dev.jna</include>\n+\n+                    <!-- azure-core-amqp requires the following: -->\n+                    <include>org.apache.qpid:proton-j</include>\n+                    <include>com.microsoft.azure:qpid-proton-j-extensions</include>\n+\n+                    <!-- FIXME temporary support for cosmos dependencies -->\n+                    <include>io.micrometer:micrometer-core</include>\n+                    <include>io.dropwizard.metrics:metrics-core</include>\n+                    <include>com.fasterxml.uuid:java-uuid-generator</include>\n+\n+                    <!-- azure-identity requires the following: -->\n+                    <include>com.nimbusds:oauth2-oidc-sdk</include>\n+                    <include>com.microsoft.azure:msal4j</include>\n+                    <include>org.nanohttpd:nanohttpd</include>\n+\n+                    <!-- Used by many libraries to bring in annotations used by Reactor -->\n+                    <include>com.google.code.findbugs:jsr305</include>\n+                  </includes>\n+                </bannedDependencies>\n+\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/requireReleaseDeps.html\n+                -->\n+                <requireReleaseDeps>\n+                  <message>No Snapshots Allowed!</message>\n+                </requireReleaseDeps>\n+\n+                <!--\n+                Rule: https://maven.apache.org/enforcer/enforcer-rules/requireSameVersions.html\n+                This rule is used to enforce that all modules depend on the same version of particular dependencies or\n+                plugins.\n+                -->\n+                <requireSameVersions>\n+                  <dependencies>\n+                    <dependency>com.azure.*</dependency>", "originalCommit": "9372e48f83e2eb744b6f9e316aa14cf2968b2c4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "227f59208c13a2a415e9f014ad8425196c55427f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/227f59208c13a2a415e9f014ad8425196c55427f", "message": "Moving the whitelist of dependencies down into specific modules, so we can limit where the whitelist is valid.", "committedDate": "2020-04-03T03:18:05Z", "type": "commit"}]}