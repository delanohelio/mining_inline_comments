{"pr_number": 14748, "pr_title": "Fix timeout exceptions when using tcnative", "pr_createdAt": "2020-09-02T22:00:05Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14748", "timeline": [{"oid": "b42230eefd0ec66b63378d52addf7805d30d30a3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b42230eefd0ec66b63378d52addf7805d30d30a3", "message": "enable tcnative", "committedDate": "2020-09-01T16:32:57Z", "type": "commit"}, {"oid": "0b772d6e51e95d340e6440953e31722d1c267515", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0b772d6e51e95d340e6440953e31722d1c267515", "message": "Merge branch 'master' into enableTcnative", "committedDate": "2020-09-01T19:28:09Z", "type": "commit"}, {"oid": "e8530c0a9a9870c76ab30d39dfc5330415d215b2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e8530c0a9a9870c76ab30d39dfc5330415d215b2", "message": "Merge branch 'master' into enableTcnative", "committedDate": "2020-09-02T02:14:49Z", "type": "commit"}, {"oid": "63b216f73a1d3d982d4d3f7d21705a919bcc574d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/63b216f73a1d3d982d4d3f7d21705a919bcc574d", "message": "enable jdk compatile mode", "committedDate": "2020-09-02T04:09:32Z", "type": "commit"}, {"oid": "37488f6d1df4748fe43d6c2f6fa970ddb450fa67", "url": "https://github.com/Azure/azure-sdk-for-java/commit/37488f6d1df4748fe43d6c2f6fa970ddb450fa67", "message": "add log", "committedDate": "2020-09-02T04:23:27Z", "type": "commit"}, {"oid": "c4ff870fb5984ad246f76a98f9a22374f62a8483", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c4ff870fb5984ad246f76a98f9a22374f62a8483", "message": "Merge branch 'master' into enableTcnativeJdkCompatibleMode", "committedDate": "2020-09-02T04:47:43Z", "type": "commit"}, {"oid": "bfa4003c30e07611a814f6689623e3a5ac39fd92", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bfa4003c30e07611a814f6689623e3a5ac39fd92", "message": "add comments", "committedDate": "2020-09-02T21:47:37Z", "type": "commit"}, {"oid": "dfae00f2e372f2e10e81fde65e03f74397e14548", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dfae00f2e372f2e10e81fde65e03f74397e14548", "message": "Merge branch 'master' into enableOpensslJdkCompatibleMode", "committedDate": "2020-09-02T21:48:34Z", "type": "commit"}, {"oid": "e01395d61e73d40df881414caa17c282e58d9634", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e01395d61e73d40df881414caa17c282e58d9634", "message": "fix for issue relates to tcnative", "committedDate": "2020-09-02T21:56:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjUyMzIyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14748#discussion_r482523221", "bodyText": "please update azure-cosmos and remove the explicit exclusion. This library is a dependency of azure-core we don't need to have explicit dependency on it.", "author": "moderakh", "createdAt": "2020-09-02T22:09:02Z", "path": "sdk/cosmos/azure-cosmos-benchmark/pom.xml", "diffHunk": "@@ -88,14 +88,11 @@ Licensed under the MIT License.\n       <version>1.5.4</version> <!-- {x-version-update;io.micrometer:micrometer-registry-graphite;external_dependency} -->\n     </dependency>\n \n-    <!-- Issue: We have a problem with Direct TCP with using netty-tcnative when OpenSSL 1.1 is installed\n     <dependency>\n       <groupId>io.netty</groupId>\n-      <artifactId>netty-tcnative</artifactId>\n-      <version>2.0.31.Final</version> {x-version-update;io.netty:netty-tcnative;external_dependency}\n-      <classifier>linux-x86_64</classifier>\n+      <artifactId>netty-tcnative-boringssl-static</artifactId>", "originalCommit": "e01395d61e73d40df881414caa17c282e58d9634", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjYwNTIxOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14748#discussion_r482605218", "bodyText": "Thanks Mo~  I removed the exclusions from azure-cosmos and azure-cosmos-encryption", "author": "xinlian12", "createdAt": "2020-09-02T23:52:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjUyMzIyMQ=="}], "type": "inlineReview"}, {"oid": "a17aac2db788ea9328800e4510a100aac4b728be", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a17aac2db788ea9328800e4510a100aac4b728be", "message": "remove exclusions of tcnative from the pom files", "committedDate": "2020-09-02T23:39:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI2MjEzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14748#discussion_r483262138", "bodyText": "Does boring ssl get brought in now that we've removed the exclusion from azure-cosmos/pom.xml? If so then this is good. If not, consider bringing in boring ssl for all platforms here. It should make running the benchmark program easier (build once, run everywhere without installing OpenSSL)", "author": "David-Noble-at-work", "createdAt": "2020-09-03T21:24:31Z", "path": "sdk/cosmos/azure-cosmos-benchmark/pom.xml", "diffHunk": "@@ -88,15 +88,6 @@ Licensed under the MIT License.\n       <version>1.5.4</version> <!-- {x-version-update;io.micrometer:micrometer-registry-graphite;external_dependency} -->\n     </dependency>\n ", "originalCommit": "a17aac2db788ea9328800e4510a100aac4b728be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI2NTc4OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14748#discussion_r483265789", "bodyText": "It should get brought in through azure-core.\n@xinlian12  could you please run\nmvn depedency:tree\nto verify", "author": "moderakh", "createdAt": "2020-09-03T21:32:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI2MjEzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI2OTgyNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14748#discussion_r483269824", "bodyText": "Thanks Mo, yea, boring ssl will be brought in by azure-core:\n\nAnd yes, the benchmark is done with netty-tcnative-boringssl-static enabled~ double confirmed by logging the sslEngine type", "author": "xinlian12", "createdAt": "2020-09-03T21:42:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI2MjEzOA=="}], "type": "inlineReview"}]}