{"pr_number": 15816, "pr_title": "Updating azure-communication-administration README with a few samples", "pr_createdAt": "2020-09-29T23:35:09Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/15816", "timeline": [{"oid": "969036b3ec2e0497b026f37a1840ea6b08f76f40", "url": "https://github.com/Azure/azure-sdk-for-java/commit/969036b3ec2e0497b026f37a1840ea6b08f76f40", "message": "Updating javadoc with a few samples", "committedDate": "2020-09-29T23:30:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIzOTQwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15816#discussion_r497239401", "bodyText": "We should not need to import JUnit packages here.", "author": "waynemo", "createdAt": "2020-09-30T04:42:19Z", "path": "sdk/communication/azure-communication-administration/src/samples/java/com/azure/communication/administration/ReadmeSamples.java", "diffHunk": "@@ -9,20 +9,26 @@\n import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.List;\n+import java.util.stream.Collectors;\n \n+import com.azure.communication.administration.models.*;\n import com.azure.communication.common.CommunicationClientCredential;\n import com.azure.communication.common.CommunicationUser;\n+import com.azure.communication.common.HmacAuthenticationPolicy;\n import com.azure.core.http.HttpClient;\n import com.azure.core.http.netty.NettyAsyncHttpClientBuilder;\n+import com.azure.core.http.policy.HttpPipelinePolicy;\n+import com.azure.core.http.rest.PagedIterable;\n+import org.junit.jupiter.api.Assertions;", "originalCommit": "969036b3ec2e0497b026f37a1840ea6b08f76f40", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY2MTQzNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15816#discussion_r497661436", "bodyText": "I think you are right, it would have got included while I was testing with assertions.. will remove them", "author": "ankitarorabit", "createdAt": "2020-09-30T16:55:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIzOTQwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIzOTk2Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15816#discussion_r497239966", "bodyText": "This policy is not needed. Authentication will automatically be handled by the CommunicationClientCredential.", "author": "waynemo", "createdAt": "2020-09-30T04:44:28Z", "path": "sdk/communication/azure-communication-administration/src/samples/java/com/azure/communication/administration/ReadmeSamples.java", "diffHunk": "@@ -108,4 +114,230 @@ public void deleteUser() {\n             e.printStackTrace();\n         }\n     }\n+\n+    /**\n+     * Sample code for creating a sync Phone Number Client.\n+     *\n+     * @return the Phone Number Client.\n+     * @throws NoSuchAlgorithmException if Communication Client Credential HMAC not available\n+     * @throws InvalidKeyException if Communication Client Credential access key is not valid\n+     */\n+    public PhoneNumberClient createPhoneNumberClient()\n+        throws NoSuchAlgorithmException, InvalidKeyException {\n+        // Your can find your endpoint and access token from your resource in the Azure Portal\n+        String endpoint = \"https://<RESOURCE_NAME>.communication.azure.com\";\n+        String accessToken = \"SECRET\";\n+\n+        // Create an HttpClient builder of your choice and customize it\n+        HttpClient httpClient = new NettyAsyncHttpClientBuilder().build();\n+\n+        CommunicationClientCredential credential = new CommunicationClientCredential(accessToken);\n+        HttpPipelinePolicy hmacAuthenticationPolicy = new HmacAuthenticationPolicy(credential);\n+\n+        PhoneNumberClient phoneNumberClient = new PhoneNumberClientBuilder()\n+            .endpoint(endpoint)\n+            .credential(credential)\n+            .addPolicy(hmacAuthenticationPolicy)", "originalCommit": "969036b3ec2e0497b026f37a1840ea6b08f76f40", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY2NDE0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15816#discussion_r497664146", "bodyText": "Thanks for pointing out, fixed", "author": "ankitarorabit", "createdAt": "2020-09-30T16:59:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzIzOTk2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzI0NTM5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15816#discussion_r497245394", "bodyText": "Since phoneNumberClient.listPhonePlanGroups returns an Iterable, you should be able to use the for loop on it directly.\nPagedIterable<PhonePlanGroup> pagedIterable = phoneNumberClient.listPhonePlanGroups(countryCode, locale, true);\nfor (PhonePlanGroup phonePlanGroup: pagedIterable) {\n    System.out.println(\"Phone Plan GroupId: \" + phonePlanGroup.getPhonePlanGroupId());\n    System.out.println(\"Phone Plan NumberType: \" + phonePlanGroup.getPhoneNumberType());\n}\n\nWe can do the same for all the other examples instead of collecting to a list first.", "author": "waynemo", "createdAt": "2020-09-30T05:06:26Z", "path": "sdk/communication/azure-communication-administration/src/samples/java/com/azure/communication/administration/ReadmeSamples.java", "diffHunk": "@@ -108,4 +114,230 @@ public void deleteUser() {\n             e.printStackTrace();\n         }\n     }\n+\n+    /**\n+     * Sample code for creating a sync Phone Number Client.\n+     *\n+     * @return the Phone Number Client.\n+     * @throws NoSuchAlgorithmException if Communication Client Credential HMAC not available\n+     * @throws InvalidKeyException if Communication Client Credential access key is not valid\n+     */\n+    public PhoneNumberClient createPhoneNumberClient()\n+        throws NoSuchAlgorithmException, InvalidKeyException {\n+        // Your can find your endpoint and access token from your resource in the Azure Portal\n+        String endpoint = \"https://<RESOURCE_NAME>.communication.azure.com\";\n+        String accessToken = \"SECRET\";\n+\n+        // Create an HttpClient builder of your choice and customize it\n+        HttpClient httpClient = new NettyAsyncHttpClientBuilder().build();\n+\n+        CommunicationClientCredential credential = new CommunicationClientCredential(accessToken);\n+        HttpPipelinePolicy hmacAuthenticationPolicy = new HmacAuthenticationPolicy(credential);\n+\n+        PhoneNumberClient phoneNumberClient = new PhoneNumberClientBuilder()\n+            .endpoint(endpoint)\n+            .credential(credential)\n+            .addPolicy(hmacAuthenticationPolicy)\n+            .httpClient(httpClient)\n+            .buildClient();\n+\n+        return phoneNumberClient;\n+    }\n+\n+    /**\n+     * Sample code to get all supported countries\n+     *\n+     * @return supported countries\n+     */\n+    public List<PhoneNumberCountry> getSupportedCountries() {\n+        String locale = \"en-us\";\n+\n+        try {\n+            PhoneNumberClient phoneNumberClient = createPhoneNumberClient();\n+\n+            List<PhoneNumberCountry> phoneNumberCountries = phoneNumberClient\n+                .listAllSupportedCountries(locale)\n+                .stream()\n+                .collect(Collectors.toList());\n+\n+            for (PhoneNumberCountry phoneNumberCountry:\n+                phoneNumberCountries) {\n+                System.out.println(\"Phone Number Country Code: \" + phoneNumberCountry.getCountryCode());\n+                System.out.println(\"Phone Number Country Name: \" + phoneNumberCountry.getLocalizedName());\n+            }\n+\n+            return phoneNumberCountries;\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+        return null;\n+    }\n+\n+    /**\n+     * Sample code to get a list of all acquired phone numbers\n+     *\n+     * @return the acquired phone numbers\n+     */\n+    public List<AcquiredPhoneNumber> getAcquiredPhoneNumbers() {\n+        String locale = \"en-us\";\n+\n+        try {\n+            PhoneNumberClient phoneNumberClient = createPhoneNumberClient();\n+\n+            List<AcquiredPhoneNumber> acquiredPhoneNumbers = phoneNumberClient\n+                .listAllPhoneNumbers(locale)\n+                .stream()\n+                .collect(Collectors.toList());\n+\n+            for (AcquiredPhoneNumber acquiredPhoneNumber:\n+                 acquiredPhoneNumbers) {\n+               System.out.println(\"Acquired Phone Number: \" + acquiredPhoneNumber.getPhoneNumber());\n+            }\n+\n+            return acquiredPhoneNumbers;\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+        return null;\n+    }\n+\n+    /**\n+     * Sample code to get a list of all phone plan groups\n+     *\n+     * @return phone plans groups\n+     */\n+    public List<PhonePlanGroup> getPhonePlanGroups() {\n+        String countryCode = \"US\";\n+        String locale = \"en-us\";\n+\n+        try {\n+            PhoneNumberClient phoneNumberClient = createPhoneNumberClient();\n+\n+            List<PhonePlanGroup> phonePlanGroups = phoneNumberClient", "originalCommit": "969036b3ec2e0497b026f37a1840ea6b08f76f40", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY3ODEyOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15816#discussion_r497678128", "bodyText": "Sure, that makes sense. Done", "author": "ankitarorabit", "createdAt": "2020-09-30T17:21:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzI0NTM5NA=="}], "type": "inlineReview"}, {"oid": "298f841d781948456cef9e321567b96850bc1df7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/298f841d781948456cef9e321567b96850bc1df7", "message": "resolve comments", "committedDate": "2020-09-30T17:20:35Z", "type": "commit"}, {"oid": "35e286993c98a1b758d39ff5ffafd00b06c5e9e2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/35e286993c98a1b758d39ff5ffafd00b06c5e9e2", "message": "Fixing spot check errors", "committedDate": "2020-09-30T19:02:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0MjczNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15816#discussion_r497742734", "bodyText": "Nit: s/Your/You", "author": "whisper6284", "createdAt": "2020-09-30T19:16:42Z", "path": "sdk/communication/azure-communication-administration/src/samples/java/com/azure/communication/administration/ReadmeSamples.java", "diffHunk": "@@ -108,4 +117,218 @@ public void deleteUser() {\n             e.printStackTrace();\n         }\n     }\n+\n+    /**\n+     * Sample code for creating a sync Phone Number Client.\n+     *\n+     * @return the Phone Number Client.\n+     * @throws NoSuchAlgorithmException if Communication Client Credential HMAC not available\n+     * @throws InvalidKeyException if Communication Client Credential access key is not valid\n+     */\n+    public PhoneNumberClient createPhoneNumberClient()\n+        throws NoSuchAlgorithmException, InvalidKeyException {\n+        // Your can find your endpoint and access token from your resource in the Azure Portal", "originalCommit": "35e286993c98a1b758d39ff5ffafd00b06c5e9e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0NDM1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15816#discussion_r497744354", "bodyText": "Got copied over incorrectly, will fix it.", "author": "ankitarorabit", "createdAt": "2020-09-30T19:19:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc0MjczNA=="}], "type": "inlineReview"}, {"oid": "d20abd512f493f8d4e6de15a2333bce26124c0f8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d20abd512f493f8d4e6de15a2333bce26124c0f8", "message": "fix typo", "committedDate": "2020-09-30T21:18:05Z", "type": "commit"}]}