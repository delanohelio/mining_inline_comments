{"pr_number": 14465, "pr_title": "Implement new version schema for cosmosdb starter", "pr_createdAt": "2020-08-26T03:43:57Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14465", "timeline": [{"oid": "0f3997090e47bac548e52286242a691e6f942214", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0f3997090e47bac548e52286242a691e6f942214", "message": "Correct usage, small time is first parameter, otherwise the result is negative", "committedDate": "2020-08-20T06:38:04Z", "type": "commit"}, {"oid": "c8a6d8b09333880c89f8e95cdfee93995794d813", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c8a6d8b09333880c89f8e95cdfee93995794d813", "message": "Merge branch 'master' of github.com:Azure/azure-sdk-for-java", "committedDate": "2020-08-24T07:01:18Z", "type": "commit"}, {"oid": "7cd251f63750ed43305da3cc3a7913713a0bf867", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7cd251f63750ed43305da3cc3a7913713a0bf867", "message": "update cosmosdb starter artfact id", "committedDate": "2020-08-25T06:13:22Z", "type": "commit"}, {"oid": "3755fe90ebc7dcd4f767c49b891759a3011b43eb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3755fe90ebc7dcd4f767c49b891759a3011b43eb", "message": "Implement new version schema for cosmosdb starter\nhttps://github.com/Azure/azure-sdk-for-java/issues/14369", "committedDate": "2020-08-26T03:20:05Z", "type": "commit"}, {"oid": "00d27fad7c3b7bf5b6aeb46a85a8dede6c43f740", "url": "https://github.com/Azure/azure-sdk-for-java/commit/00d27fad7c3b7bf5b6aeb46a85a8dede6c43f740", "message": "merge master", "committedDate": "2020-08-26T03:41:23Z", "type": "commit"}, {"oid": "33fbff5c16c9deae602b5b8961018dec08750612", "url": "https://github.com/Azure/azure-sdk-for-java/commit/33fbff5c16c9deae602b5b8961018dec08750612", "message": "update readme link broken;add python ignore dir", "committedDate": "2020-08-26T04:33:48Z", "type": "commit"}, {"oid": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "url": "https://github.com/Azure/azure-sdk-for-java/commit/df38ef6eb3d4c51f6e947f490091ea8836caf552", "message": "update readme link broken", "committedDate": "2020-08-26T04:49:12Z", "type": "commit"}, {"oid": "ccf4f5a0e817aff1e7f24ed2a5341576bc6b0313", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ccf4f5a0e817aff1e7f24ed2a5341576bc6b0313", "message": "update indentation", "committedDate": "2020-08-26T06:20:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTUxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477055516", "bodyText": "Rename replace_artifact.py to replact_util.py, because now it also update version, not only update artifact.", "author": "chenrujun", "createdAt": "2020-08-26T06:08:41Z", "path": "sdk/spring/scripts/replace_artifact.py", "diffHunk": "@@ -18,6 +18,20 @@\n         'pom_list': [", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NjEwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477056100", "bodyText": "How about renaming to version_dict?", "author": "chenrujun", "createdAt": "2020-08-26T06:10:15Z", "path": "sdk/spring/scripts/replace_artifact.py", "diffHunk": "@@ -18,6 +18,20 @@\n         'pom_list': [\n             'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml'\n         ]\n+    },\n+    'spring': {\n+        'artifact_dict': {\n+            'azure-cosmosdb-spring-boot-2-3-starter': 'azure-cosmosdb-spring-boot-2-2-starter'\n+        },\n+        'pom_list': [\n+            'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml'\n+        ],\n+        # update version of dependency, key = [group id]:[artfactid], value = (old_version, new_version)\n+        'ga_ver_dict': {", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NjU0MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477056540", "bodyText": "value = (old_version, new_version) , 2 items in comment, but 3 item in the following items.", "author": "chenrujun", "createdAt": "2020-08-26T06:11:36Z", "path": "sdk/spring/scripts/replace_artifact.py", "diffHunk": "@@ -18,6 +18,20 @@\n         'pom_list': [\n             'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml'\n         ]\n+    },\n+    'spring': {\n+        'artifact_dict': {\n+            'azure-cosmosdb-spring-boot-2-3-starter': 'azure-cosmosdb-spring-boot-2-2-starter'\n+        },\n+        'pom_list': [\n+            'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml'\n+        ],\n+        # update version of dependency, key = [group id]:[artfactid], value = (old_version, new_version)", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NzAwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477057000", "bodyText": "log.info('Replacing version in file: {}'.format(pom))", "author": "chenrujun", "createdAt": "2020-08-26T06:12:46Z", "path": "sdk/spring/scripts/replace_artifact.py", "diffHunk": "@@ -104,5 +119,45 @@ def replace_artifact(module):\n                 file.write(line)\n \n \n+def replace_version_by_artifact(module):\n+    \"\"\"\n+    Replace version and x-include-update info\n+    :param module:\n+    :return:\n+    \"\"\"\n+\n+    ga_ver_dict = config[module]['ga_ver_dict']\n+    pom_list = config[module]['pom_list']\n+    for pom in pom_list:\n+        log.info('Processing file: {}'.format(pom))", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1OTA0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477059049", "bodyText": "I guess ga mean groupId and artifactId, but I'm not sure I can remember it in the future. Could you please rename ga_key to key?", "author": "chenrujun", "createdAt": "2020-08-26T06:18:20Z", "path": "sdk/spring/scripts/replace_artifact.py", "diffHunk": "@@ -104,5 +119,45 @@ def replace_artifact(module):\n                 file.write(line)\n \n \n+def replace_version_by_artifact(module):\n+    \"\"\"\n+    Replace version and x-include-update info\n+    :param module:\n+    :return:\n+    \"\"\"\n+\n+    ga_ver_dict = config[module]['ga_ver_dict']\n+    pom_list = config[module]['pom_list']\n+    for pom in pom_list:\n+        log.info('Processing file: {}'.format(pom))\n+        with in_place.InPlace(pom) as file:\n+            line_num = 0\n+            for line in file:\n+                line_num = line_num + 1\n+                for ga_key, version_tuple in ga_ver_dict.items():", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NDM1MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477054350", "bodyText": "We'd better use springboot22_ as the prefix.", "author": "saragluna", "createdAt": "2020-08-26T06:05:22Z", "path": "eng/versioning/external_dependencies.txt", "diffHunk": "@@ -318,5 +318,14 @@ storage_com.microsoft.azure:azure-storage;8.4.0\n # sdk\\spring\\azure-spring-boot\\pom.xml\n spring_com.microsoft.azure:azure;1.34.0\n \n+# sdk\\spring\\azure-spring-boot-starter-2-2-cosmosdb\\pom.xml\n+cosmos22_com.microsoft.azure:spring-data-cosmosdb;2.2.2.M2", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTI3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477055279", "bodyText": "Should this line only support Spring Boot 2.3.x?", "author": "saragluna", "createdAt": "2020-08-26T06:08:01Z", "path": "sdk/spring/README.md", "diffHunk": "@@ -25,7 +25,8 @@ Starter Name | Version for Spring Boot 2.3.x | Version for Spring Boot 2.2.x | V\n [azure-storage-spring-boot-starter](azure-spring-boot-starter-storage/README.md) | N/A | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-storage-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-storage-spring-boot-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-storage-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-storage-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-storage-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-storage-spring-boot-starter%20AND%20v:2.0.*)\n [azure-keyvault-secrets-spring-boot-starter](azure-spring-boot-starter-keyvault-secrets/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-keyvault-secrets-spring-boot-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter/2.2.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-keyvault-secrets-spring-boot-starter%20AND%20v:2.2.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-keyvault-secrets-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-keyvault-secrets-spring-boot-starter%20AND%20v:2.0.*)\n [azure-active-directory-b2c-spring-boot-starter](azure-spring-boot-starter-active-directory-b2c/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-b2c-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-active-directory-b2c-spring-boot-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-b2c-spring-boot-starter/2.2.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-active-directory-b2c-spring-boot-starter%20AND%20v:2.2.*) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-b2c-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-active-directory-b2c-spring-boot-starter%20AND%20v:2.1.*) | N/A\n-[azure-cosmosdb-spring-boot-starter](azure-spring-boot-starter-cosmosdb/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-cosmosdb-spring-boot-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.2.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.2.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.0.*)\n+[azure-cosmosdb-spring-boot-2-2-starter](azure-spring-boot-2-2-starter-cosmosdb/README.md) | N/A | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.2.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.2.*) | N/A | N/A\n+[azure-cosmosdb-spring-boot-2-3-starter](azure-spring-boot-2-3-starter-cosmosdb/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-cosmosdb-spring-boot-2-3-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.2.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.2.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.0.*)", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTc3OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477055778", "bodyText": "We should remove this line since it hasn't been released yet.", "author": "saragluna", "createdAt": "2020-08-26T06:09:23Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/CHANGELOG.md", "diffHunk": "@@ -0,0 +1,8 @@\n+# Release History\n+\n+## 2.4.0-beta.1 (Unreleased)\n+\n+\n+## Current (2020-08-13)", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NjAzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477056031", "bodyText": "The artifactid does not match here.", "author": "saragluna", "createdAt": "2020-08-26T06:10:04Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,251 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;current})", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NjA3OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477056078", "bodyText": "same here.", "author": "saragluna", "createdAt": "2020-08-26T06:10:12Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,251 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1ODMyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477058322", "bodyText": "How about we link users to the Key concepts section of azure-spring-boot-2-3-starter-cosmosdb/README.md, in which case we don't need to maintain two copies of the same content.", "author": "saragluna", "createdAt": "2020-08-26T06:16:24Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,251 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>\n+    <version>2.4.0-beta.1</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+## Key concepts\n+- Spring Data ReactiveCrudRepository basic CRUD functionality", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1ODQzNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477058437", "bodyText": "Same for this Examples section.", "author": "saragluna", "createdAt": "2020-08-26T06:16:42Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,251 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>\n+    <version>2.4.0-beta.1</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+## Key concepts\n+- Spring Data ReactiveCrudRepository basic CRUD functionality\n+    - save\n+    - findAll\n+    - findOne by Id\n+    - deleteAll\n+    - delete by Id\n+    - delete entity\n+- Spring Data [@Id](https://github.com/spring-projects/spring-data-commons/blob/db62390de90c93a78743c97cc2cc9ccd964994a5/src/main/java/org/springframework/data/annotation/Id.java) annotation.\n+  There're 2 ways to map a field in domain class to `id` of Azure Cosmos DB document.\n+  - annotate a field in domain class with @Id, this field will be mapped to document `id` in Cosmos DB. \n+  - set name of this field to `id`, this field will be mapped to document `id` in Cosmos DB.\n+    [Note] if both way applied,    \n+- Custom collection Name.\n+   By default, collection name will be class name of user domain class. To customize it, add annotation `@Document(collection=\"myCustomCollectionName\")` to your domain class, that's all.\n+- Supports [Azure Cosmos DB partition](https://docs.microsoft.com/azure/cosmos-db/partition-data). To specify a field of your domain class to be partition key field, just annotate it with `@PartitionKey`. When you do CRUD operation, please specify your partition value. For more sample on partition CRUD, please refer to [test here](https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/cosmos/azure-spring-data-cosmos-test/src/test/java/com/azure/spring/data/cosmos/repository/integration/AddressRepositoryIT.java)\n+- Supports [Spring Data custom query](https://docs.spring.io/spring-data/commons/docs/current/reference/html/#repositories.query-methods.details) find operation.\n+- Supports [spring-boot-starter-data-rest](https://projects.spring.io/spring-data-rest/).\n+- Supports List and nested type in domain class.\n+\n+## Examples\n+### Add the property setting", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1ODczNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477058737", "bodyText": "Same for this Troubleshooting section.", "author": "saragluna", "createdAt": "2020-08-26T06:17:26Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,251 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>\n+    <version>2.4.0-beta.1</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+## Key concepts\n+- Spring Data ReactiveCrudRepository basic CRUD functionality\n+    - save\n+    - findAll\n+    - findOne by Id\n+    - deleteAll\n+    - delete by Id\n+    - delete entity\n+- Spring Data [@Id](https://github.com/spring-projects/spring-data-commons/blob/db62390de90c93a78743c97cc2cc9ccd964994a5/src/main/java/org/springframework/data/annotation/Id.java) annotation.\n+  There're 2 ways to map a field in domain class to `id` of Azure Cosmos DB document.\n+  - annotate a field in domain class with @Id, this field will be mapped to document `id` in Cosmos DB. \n+  - set name of this field to `id`, this field will be mapped to document `id` in Cosmos DB.\n+    [Note] if both way applied,    \n+- Custom collection Name.\n+   By default, collection name will be class name of user domain class. To customize it, add annotation `@Document(collection=\"myCustomCollectionName\")` to your domain class, that's all.\n+- Supports [Azure Cosmos DB partition](https://docs.microsoft.com/azure/cosmos-db/partition-data). To specify a field of your domain class to be partition key field, just annotate it with `@PartitionKey`. When you do CRUD operation, please specify your partition value. For more sample on partition CRUD, please refer to [test here](https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/cosmos/azure-spring-data-cosmos-test/src/test/java/com/azure/spring/data/cosmos/repository/integration/AddressRepositoryIT.java)\n+- Supports [Spring Data custom query](https://docs.spring.io/spring-data/commons/docs/current/reference/html/#repositories.query-methods.details) find operation.\n+- Supports [spring-boot-starter-data-rest](https://projects.spring.io/spring-data-rest/).\n+- Supports List and nested type in domain class.\n+\n+## Examples\n+### Add the property setting\n+\n+Open `application.properties` file and add below properties with your Cosmos DB credentials.\n+\n+```properties\n+azure.cosmosdb.uri=your-cosmosdb-uri\n+azure.cosmosdb.key=your-cosmosdb-key\n+azure.cosmosdb.database=your-cosmosdb-databasename\n+```\n+\n+Property `azure.cosmosdb.consistency-level` is also supported.\n+\n+Property `azure.cosmosdb.cosmosKeyCredential` is also supported. CosmosKeyCredential feature provides capability to \n+rotate keys on the fly. You can switch keys using switchToSecondaryKey(). For more information on this, see the Sample \n+Application code.\n+\n+#### (Optional) Add Spring Boot Actuator\n+If you choose to add Spring Boot Actuator for CosmosDB, add `management.health.azure-cosmos.enabled=true` to application.properties.\n+```properties\n+management.health.azure-cosmos.enabled=true\n+```\n+Include actuator dependencies.\n+```xml\n+<dependency>\n+    <groupId>org.springframework.boot</groupId>\n+    <artifactId>spring-boot-starter-actuator</artifactId>\n+</dependency>\n+\n+<dependency>\n+    <groupId>org.springframework.boot</groupId>\n+    <artifactId>spring-boot-starter-web</artifactId>\n+</dependency>\n+```\n+\n+Call `http://{hostname}:{port}/actuator/health/cosmos` to get the CosmosDB health info. **Please note**: it will calculate [RUs](https://docs.microsoft.com/en-us/azure/cosmos-db/request-units).\n+\n+### Define an entity\n+Define a simple entity as Document in Cosmos DB.\n+<!-- embedme ../azure-spring-boot/src/samples/java/com/azure/spring/cosmosdb/User.java#L10-L65 -->\n+```java\n+@Document(collection = \"mycollection\")\n+public class User {\n+    @Id\n+    private String id;\n+    private String firstName;\n+    @PartitionKey\n+    private String lastName;\n+    private String address;\n+\n+    public User() {\n+    }\n+\n+    public User(String id, String firstName, String lastName, String address) {\n+        this.id = id;\n+        this.firstName = firstName;\n+        this.lastName = lastName;\n+        this.address = address;\n+    }\n+\n+    public String getId() {\n+        return id;\n+    }\n+\n+    public void setId(String id) {\n+        this.id = id;\n+    }\n+\n+    public String getFirstName() {\n+        return firstName;\n+    }\n+\n+    public void setFirstName(String firstName) {\n+        this.firstName = firstName;\n+    }\n+\n+    public String getLastName() {\n+        return lastName;\n+    }\n+\n+    public void setLastName(String lastName) {\n+        this.lastName = lastName;\n+    }\n+\n+    public String getAddress() {\n+        return address;\n+    }\n+\n+    public void setAddress(String address) {\n+        this.address = address;\n+    }\n+\n+    @Override\n+    public String toString() {\n+        return String.format(\"%s %s, %s\", firstName, lastName, address);\n+    }\n+}\n+```\n+`id` field will be used as document `id` in Azure Cosmos DB. Or you can annotate any field with `@Id` to map it to document `id`.\n+\n+Annotation `@Document(collection=\"mycollection\")` is used to specify the collection name of your document in Azure Cosmos DB.\n+\n+### Create repositories\n+Extends ReactiveCosmosRepository interface, which provides Spring Data repository support.\n+<!-- embedme ../azure-spring-boot/src/samples/java/com/azure/spring/cosmosdb/UserRepository.java#L10-L14 -->\n+```java\n+@Repository\n+public interface UserRepository extends ReactiveCosmosRepository<User, String> {\n+\n+    Flux<User> findByFirstName(String firstName);\n+}\n+```\n+\n+So far ReactiveCosmosRepository provides basic save, delete and find operations. More operations will be supported later.\n+\n+### Create an Application class\n+Here create an application class with all the components\n+<!-- embedme ../azure-spring-boot/src/samples/java/com/azure/spring/cosmosdb/CosmosSampleApplication.java#L18-L65 -->\n+```java\n+@SpringBootApplication\n+public class CosmosSampleApplication implements CommandLineRunner {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(CosmosSampleApplication.class);\n+\n+    @Autowired\n+    private UserRepository repository;\n+\n+    public static void main(String[] args) {\n+        SpringApplication.run(CosmosSampleApplication.class, args);\n+    }\n+\n+    public void run(String... var1) {\n+        final User testUser = new User(\"testId\", \"testFirstName\", \"testLastName\", \"test address line one\");\n+\n+        // Save the User class to Azure CosmosDB database.\n+        final Mono<User> saveUserMono = repository.save(testUser);\n+\n+        final Flux<User> firstNameUserFlux = repository.findByFirstName(\"testFirstName\");\n+\n+        //  Nothing happens until we subscribe to these Monos.\n+        //  findById will not return the user as user is not present.\n+        final Mono<User> findByIdMono = repository.findById(testUser.getId());\n+        final User findByIdUser = findByIdMono.block();\n+        Assert.isNull(findByIdUser, \"User must be null\");\n+\n+        final User savedUser = saveUserMono.block();\n+        Assert.state(savedUser != null, \"Saved user must not be null\");\n+        Assert.state(savedUser.getFirstName().equals(testUser.getFirstName()), \"Saved user first name doesn't match\");\n+\n+        firstNameUserFlux.collectList().block();\n+\n+        final Optional<User> optionalUserResult = repository.findById(testUser.getId()).blockOptional();\n+        Assert.isTrue(optionalUserResult.isPresent(), \"Cannot find user.\");\n+\n+        final User result = optionalUserResult.get();\n+        Assert.state(result.getFirstName().equals(testUser.getFirstName()), \"query result firstName doesn't match!\");\n+        Assert.state(result.getLastName().equals(testUser.getLastName()), \"query result lastName doesn't match!\");\n+\n+        LOGGER.info(\"findOne in User collection get result: {}\", result.toString());\n+    }\n+\n+    @PostConstruct\n+    public void setup() {\n+        // For this example, remove all of the existing records.\n+        this.repository.deleteAll().block();\n+    }\n+}\n+```\n+Autowired UserRepository interface, then can do save, delete and find operations.\n+\n+## Troubleshooting\n+### Enable client logging", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA2MzAxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477063013", "bodyText": "Let's change this Document DB to Cosmos DB first.", "author": "saragluna", "createdAt": "2020-08-26T06:28:30Z", "path": "sdk/spring/azure-spring-boot-2-3-starter-cosmosdb/pom.xml", "diffHunk": "@@ -12,11 +12,11 @@\n   </parent>\n \n   <groupId>com.microsoft.azure</groupId>\n-  <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>\n-  <version>2.4.0-beta.1</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;current} -->\n+  <artifactId>azure-cosmosdb-spring-boot-2-3-starter</artifactId>\n+  <version>2.4.0-beta.1</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-2-3-starter;current} -->\n \n-  <name>Azure Cosmos DB Spring Boot Starter</name>\n-  <description>Spring Boot Starter for Azure Document DB service</description>\n+  <name>Azure Cosmos DB Spring Boot 2.3 Starter</name>\n+  <description>Spring Boot 2.3 Starter for Azure Document DB service</description>", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA2MzYwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477063600", "bodyText": "Let's revert this change, our samples should reference the latest released version of our starter / dependencies.", "author": "saragluna", "createdAt": "2020-08-26T06:29:38Z", "path": "sdk/spring/azure-spring-boot-samples/azure-cloud-foundry-service-sample/pom.xml", "diffHunk": "@@ -21,8 +21,8 @@\n   <dependencies>\n     <dependency>\n       <groupId>com.microsoft.azure</groupId>\n-      <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>\n-      <version>2.3.3</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;dependency} -->\n+      <artifactId>azure-cosmosdb-spring-boot-2-3-starter</artifactId>\n+      <version>2.4.0-beta.1</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-2-3-starter;current} -->", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA2MzcxMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477063710", "bodyText": "Same here.", "author": "saragluna", "createdAt": "2020-08-26T06:29:51Z", "path": "sdk/spring/azure-spring-boot-samples/azure-spring-boot-sample-cosmosdb/pom.xml", "diffHunk": "@@ -21,8 +21,8 @@\n   <dependencies>\n     <dependency>\n       <groupId>com.microsoft.azure</groupId>\n-      <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>\n-      <version>2.3.3</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;dependency} -->\n+      <artifactId>azure-cosmosdb-spring-boot-2-3-starter</artifactId>\n+      <version>2.4.0-beta.1</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-2-3-starter;current} -->", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA2NDE2Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477064163", "bodyText": "Same here.", "author": "saragluna", "createdAt": "2020-08-26T06:30:57Z", "path": "sdk/spring/azure-spring-boot-samples/azure-spring-cloud-appconfiguration-conversion-sample-complete/pom.xml", "diffHunk": "@@ -30,8 +30,8 @@\n   <dependencies>\n     <dependency>\n       <groupId>com.microsoft.azure</groupId>\n-      <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>\n-      <version>2.3.3</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;dependency} -->\n+      <artifactId>azure-cosmosdb-spring-boot-2-3-starter</artifactId>", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA2NDIyNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477064226", "bodyText": "Same here.", "author": "saragluna", "createdAt": "2020-08-26T06:31:09Z", "path": "sdk/spring/azure-spring-boot-samples/azure-spring-cloud-appconfiguration-conversion-sample-initial/pom.xml", "diffHunk": "@@ -31,8 +31,8 @@\n   <dependencies>\n     <dependency>\n       <groupId>com.microsoft.azure</groupId>\n-      <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>\n-      <version>2.3.3</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;dependency} -->\n+      <artifactId>azure-cosmosdb-spring-boot-2-3-starter</artifactId>", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA2NDQ2OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477064469", "bodyText": "The 2-3 should only support Spring Boot 2.3.x", "author": "saragluna", "createdAt": "2020-08-26T06:31:47Z", "path": "sdk/spring/azure-spring-boot-starter/README.md", "diffHunk": "@@ -35,7 +35,8 @@ Starter Name | Version for Spring Boot 2.3.x | Version for Spring Boot 2.2.x | V\n [azure-storage-spring-boot-starter](../azure-spring-boot-starter-storage/README.md) | N/A | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-storage-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-storage-spring-boot-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-storage-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-storage-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-storage-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-storage-spring-boot-starter%20AND%20v:2.0.*)\n [azure-keyvault-secrets-spring-boot-starter](../azure-spring-boot-starter-keyvault-secrets/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-keyvault-secrets-spring-boot-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter/2.2.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-keyvault-secrets-spring-boot-starter%20AND%20v:2.2.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-keyvault-secrets-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-keyvault-secrets-spring-boot-starter%20AND%20v:2.0.*)\n [azure-active-directory-b2c-spring-boot-starter](../azure-spring-boot-starter-active-directory-b2c/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-b2c-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-active-directory-b2c-spring-boot-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-b2c-spring-boot-starter/2.2.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-active-directory-b2c-spring-boot-starter%20AND%20v:2.2.*) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-b2c-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-active-directory-b2c-spring-boot-starter%20AND%20v:2.1.*) | N/A\n-[azure-cosmosdb-spring-boot-starter](../azure-spring-boot-starter-cosmosdb/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-cosmosdb-spring-boot-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.2.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.2.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.0.*)\n+[azure-cosmosdb-spring-boot-2-2-starter](../azure-spring-boot-2-2-starter-cosmosdb/README.md) | N/A | N/A | N/A | N/A\n+[azure-cosmosdb-spring-boot-2-3-starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-cosmosdb-spring-boot-2-3-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.2.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.2.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.0.*)", "originalCommit": "df38ef6eb3d4c51f6e947f490091ea8836caf552", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4fe97742404678b385e0c8366b72aef3897dc0e1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4fe97742404678b385e0c8366b72aef3897dc0e1", "message": "refer to reviewer' comment and update", "committedDate": "2020-08-26T09:03:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg1ODQ5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477858497", "bodyText": "Remove the doc if there is no detail information.", "author": "chenrujun", "createdAt": "2020-08-27T01:15:43Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE3ODY1Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478178657", "bodyText": "return void?", "author": "chenrujun", "createdAt": "2020-08-27T06:28:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg1ODQ5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE4MDgyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478180829", "bodyText": "I mean, we should delete this line, or add something after return.\nOtherwise code reader may confused: does code writer forgot to write doc for the return value?", "author": "chenrujun", "createdAt": "2020-08-27T06:31:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg1ODQ5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg1ODk3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477858975", "bodyText": "This line is used to debug?", "author": "chenrujun", "createdAt": "2020-08-27T01:16:05Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg1OTc2OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477859768", "bodyText": "Keep same code style: remote this empty line.", "author": "chenrujun", "createdAt": "2020-08-27T01:16:41Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg2MDE5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477860197", "bodyText": ":param module: module name", "author": "chenrujun", "createdAt": "2020-08-27T01:17:01Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg2MDg3MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477860870", "bodyText": "Use log.debug", "author": "chenrujun", "createdAt": "2020-08-27T01:17:31Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg2ODkyNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477868927", "bodyText": "Strictly speaking, artifact_id_tuple should be artifact_id_tuple_tuple, and artifact_id_mapping_tuple should be artifact_id_tuple.\nHow about rename like this:\nartifact_id_mapping_tuple -> artifact_id_pair\nartifact_id_tuple -> artifact_id_pairs.\nAnother solution is define a new class named ArtifactIdPair, it has 2 fields: old_artifact_id and new_artifact_id. Just like: https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/spring/scripts/pom.py\nDefine ArtifactIdPair will make code easier to read.\nIt's OK if you don't want to do more work, current logic is OK.", "author": "chenrujun", "createdAt": "2020-08-27T01:25:17Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg3MjM5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477872391", "bodyText": "Same here, we can define VersionUpdateItem, which have 2 fields: id and new_version", "author": "chenrujun", "createdAt": "2020-08-27T01:28:41Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:\n+                new_line = line.replace(artifact_id_mapping_tuple[0], artifact_id_mapping_tuple[1])\n+                if line != new_line:\n+                    log.debug('Updated artifact id line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing version in file: {}'.format(pom))\n+    version_tuple = config[module][pom]['version_tuple']\n+    log.info('Module: {}, versions: {}'.format(module, version_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_mapping_tuple in version_tuple:", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg3ODE5Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477878196", "bodyText": "How about do like this:\nDefine global variable:\nX_VERSION_UPDATE = 'x-version-update'\nX_INCLUDE_UPDATE = 'x-include-update'.\nThen the condition check will be like this:\nif (X_VERSION_UPDATE in line or X_INCLUDE_UPDATE in line) and version_update_item.id in line:", "author": "chenrujun", "createdAt": "2020-08-27T01:34:23Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:\n+                new_line = line.replace(artifact_id_mapping_tuple[0], artifact_id_mapping_tuple[1])\n+                if line != new_line:\n+                    log.debug('Updated artifact id line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing version in file: {}'.format(pom))\n+    version_tuple = config[module][pom]['version_tuple']\n+    log.info('Module: {}, versions: {}'.format(module, version_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_mapping_tuple in version_tuple:\n+                dependency_update_flag = '<!-- {x-version-update;' + version_mapping_tuple[0] + ';'\n+                plugin_update_flag = '<!-- {x-include-update;' + version_mapping_tuple[0] + ';'\n+                # update version in dependency part\n+                if dependency_update_flag in line:", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg5NTM4OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477895389", "bodyText": "If we add check logic above, we do not need check X_VERSION_UPDATE and X_INCLUDE_UPDATE  here any more.", "author": "chenrujun", "createdAt": "2020-08-27T01:47:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg3ODE5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg4MDIzOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477880239", "bodyText": "log.debug('Updated version in line {}'.format(line_num))", "author": "chenrujun", "createdAt": "2020-08-27T01:36:18Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:\n+                new_line = line.replace(artifact_id_mapping_tuple[0], artifact_id_mapping_tuple[1])\n+                if line != new_line:\n+                    log.debug('Updated artifact id line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing version in file: {}'.format(pom))\n+    version_tuple = config[module][pom]['version_tuple']\n+    log.info('Module: {}, versions: {}'.format(module, version_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_mapping_tuple in version_tuple:\n+                dependency_update_flag = '<!-- {x-version-update;' + version_mapping_tuple[0] + ';'\n+                plugin_update_flag = '<!-- {x-include-update;' + version_mapping_tuple[0] + ';'\n+                # update version in dependency part\n+                if dependency_update_flag in line:\n+                    old_version = line[(line.index('<version>') + 9):line.index('</version>')]\n+                    log.debug('Updated version line {}'.format(line_num))\n+                    new_line = line.replace(old_version, version_mapping_tuple[1])\n+                    if line != new_line:\n+                        log.debug('Updated dependency line {}'.format(line_num))", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg4MDU0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477880545", "bodyText": "Delete this line.", "author": "chenrujun", "createdAt": "2020-08-27T01:36:31Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:\n+                new_line = line.replace(artifact_id_mapping_tuple[0], artifact_id_mapping_tuple[1])\n+                if line != new_line:\n+                    log.debug('Updated artifact id line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing version in file: {}'.format(pom))\n+    version_tuple = config[module][pom]['version_tuple']\n+    log.info('Module: {}, versions: {}'.format(module, version_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_mapping_tuple in version_tuple:\n+                dependency_update_flag = '<!-- {x-version-update;' + version_mapping_tuple[0] + ';'\n+                plugin_update_flag = '<!-- {x-include-update;' + version_mapping_tuple[0] + ';'\n+                # update version in dependency part\n+                if dependency_update_flag in line:\n+                    old_version = line[(line.index('<version>') + 9):line.index('</version>')]\n+                    log.debug('Updated version line {}'.format(line_num))", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg4MjI1OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477882259", "bodyText": "Same here, delete empty line.", "author": "chenrujun", "createdAt": "2020-08-27T01:37:45Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:\n+                new_line = line.replace(artifact_id_mapping_tuple[0], artifact_id_mapping_tuple[1])\n+                if line != new_line:\n+                    log.debug('Updated artifact id line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg4NTQyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477885429", "bodyText": "If we define ArtifactIdPair, this line will be\nnew_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n\nthe code will much easier to read.", "author": "chenrujun", "createdAt": "2020-08-27T01:39:55Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:\n+                new_line = line.replace(artifact_id_mapping_tuple[0], artifact_id_mapping_tuple[1])", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg4OTA5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477889098", "bodyText": "log.debug('Updated artifact id in line {}'.format(line_num))\n\n\nAdd \"in\" in log info.\nIt's better to print log after file.write(line), so it is real Updated, not Updating.", "author": "chenrujun", "createdAt": "2020-08-27T01:42:41Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:\n+                new_line = line.replace(artifact_id_mapping_tuple[0], artifact_id_mapping_tuple[1])\n+                if line != new_line:\n+                    log.debug('Updated artifact id line {}'.format(line_num))", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg4OTk5Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477889993", "bodyText": "Same here, print log after file.write(line).", "author": "chenrujun", "createdAt": "2020-08-27T01:43:18Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:\n+                new_line = line.replace(artifact_id_mapping_tuple[0], artifact_id_mapping_tuple[1])\n+                if line != new_line:\n+                    log.debug('Updated artifact id line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing version in file: {}'.format(pom))\n+    version_tuple = config[module][pom]['version_tuple']\n+    log.info('Module: {}, versions: {}'.format(module, version_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_mapping_tuple in version_tuple:\n+                dependency_update_flag = '<!-- {x-version-update;' + version_mapping_tuple[0] + ';'\n+                plugin_update_flag = '<!-- {x-include-update;' + version_mapping_tuple[0] + ';'\n+                # update version in dependency part\n+                if dependency_update_flag in line:\n+                    old_version = line[(line.index('<version>') + 9):line.index('</version>')]\n+                    log.debug('Updated version line {}'.format(line_num))\n+                    new_line = line.replace(old_version, version_mapping_tuple[1])\n+                    if line != new_line:\n+                        log.debug('Updated dependency line {}'.format(line_num))\n+                        log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                        log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                        line = new_line\n+                # update version in plugin part\n+                elif plugin_update_flag in line:\n+                    old_version = line[(line.index('[')+1):line.index(']')]\n+                    log.debug('Updated version line {}'.format(line_num))\n+                    new_line = line.replace(old_version, version_mapping_tuple[1])\n+                    if line != new_line:\n+                        log.debug('Updated plugin line {}'.format(line_num))\n+                        log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                        log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                        line = new_line\n+            file.write(line)", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzg5MzcyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r477893729", "bodyText": "We can add following code to remote unnecessary check:\nif X_VERSION_UPDATE in line or X_INCLUDE_UPDATE in line:\n    // check version_update_items, update this line if necessary.\nelse\n    // not update this line", "author": "chenrujun", "createdAt": "2020-08-27T01:45:58Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_tuple': (\n+                ('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_tuple': (\n+                ('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                ('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module:\n+    :return:\n+    \"\"\"\n+    module = 'spring'\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_tuple = config[module][pom]['artifact_id_tuple']\n+    log.info('Module: {}, artifact ids: {}'.format(module, artifact_id_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_mapping_tuple in artifact_id_tuple:\n+                new_line = line.replace(artifact_id_mapping_tuple[0], artifact_id_mapping_tuple[1])\n+                if line != new_line:\n+                    log.debug('Updated artifact id line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+\n+    log.info('Replacing version in file: {}'.format(pom))\n+    version_tuple = config[module][pom]['version_tuple']\n+    log.info('Module: {}, versions: {}'.format(module, version_tuple))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1", "originalCommit": "4fe97742404678b385e0c8366b72aef3897dc0e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "33b726cd0e6be621c88dc8cf23398c332b5d84e2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/33b726cd0e6be621c88dc8cf23398c332b5d84e2", "message": "refer to reviewer' comment and update", "committedDate": "2020-08-27T03:27:06Z", "type": "commit"}, {"oid": "d6235c1ca2680089e80541aa61c5e49c3945926b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d6235c1ca2680089e80541aa61c5e49c3945926b", "message": "merge master", "committedDate": "2020-08-27T03:32:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE2NzczNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478167737", "bodyText": "In sample projects, please use current .\nRelated PR: #14507", "author": "chenrujun", "createdAt": "2020-08-27T06:13:50Z", "path": "sdk/spring/azure-spring-boot-samples/azure-cloud-foundry-service-sample/pom.xml", "diffHunk": "@@ -22,7 +22,7 @@\n     <dependency>\n       <groupId>com.microsoft.azure</groupId>\n       <artifactId>azure-cosmosdb-spring-boot-starter</artifactId>\n-      <version>2.3.3</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;dependency} -->\n+      <version>2.3.3</version> <!-- {x-version-update;com.microsoft.azure:azure-cosmosdb-spring-boot-starter;external_dependency} -->", "originalCommit": "d6235c1ca2680089e80541aa61c5e49c3945926b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE4MDk1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478180955", "bodyText": "Same here.", "author": "chenrujun", "createdAt": "2020-08-27T06:31:37Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_update_items': (\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module: module name\n+    :return:\n+    \"\"\"\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:", "originalCommit": "d6235c1ca2680089e80541aa61c5e49c3945926b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE4MTg3OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478181878", "bodyText": "Use \"Updating\" instead of \"Updated\".", "author": "chenrujun", "createdAt": "2020-08-27T06:32:50Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_update_items': (\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module: module name\n+    :return:\n+    \"\"\"\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+    log.debug('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_pairs = config[module][pom]['artifact_id_pairs']\n+    log.debug('Module: {}, artifact ids: {}'.format(module, artifact_id_pairs))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_pair in artifact_id_pairs:\n+                new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n+                if line != new_line:\n+                    line = new_line\n+                    log.debug('Updated artifact id in line {}'.format(line_num))", "originalCommit": "d6235c1ca2680089e80541aa61c5e49c3945926b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE4MjEwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478182106", "bodyText": "Same here.", "author": "chenrujun", "createdAt": "2020-08-27T06:33:08Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_update_items': (\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module: module name\n+    :return:\n+    \"\"\"\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+    log.debug('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_pairs = config[module][pom]['artifact_id_pairs']\n+    log.debug('Module: {}, artifact ids: {}'.format(module, artifact_id_pairs))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_pair in artifact_id_pairs:\n+                new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n+                if line != new_line:\n+                    line = new_line\n+                    log.debug('Updated artifact id in line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:", "originalCommit": "d6235c1ca2680089e80541aa61c5e49c3945926b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE4MzIyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478183229", "bodyText": "Delete this line.", "author": "chenrujun", "createdAt": "2020-08-27T06:34:36Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_update_items': (\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module: module name\n+    :return:\n+    \"\"\"\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+    log.debug('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_pairs = config[module][pom]['artifact_id_pairs']\n+    log.debug('Module: {}, artifact ids: {}'.format(module, artifact_id_pairs))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_pair in artifact_id_pairs:\n+                new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n+                if line != new_line:\n+                    line = new_line\n+                    log.debug('Updated artifact id in line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+    log.debug('Replacing version in file: {}'.format(pom))\n+    version_update_items = config[module][pom]['version_update_items']\n+    log.debug('Module: {}, versions: {}'.format(module, version_update_items))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_update_item in version_update_items:\n+                if version_update_item.id in line:\n+                    log.debug('Updated line {}'.format(line_num))", "originalCommit": "d6235c1ca2680089e80541aa61c5e49c3945926b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE4NjA5OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478186099", "bodyText": "BTW, did you test in your localhost?", "author": "chenrujun", "createdAt": "2020-08-27T06:38:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE4MzIyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE4NDAyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478184029", "bodyText": "Updating", "author": "chenrujun", "createdAt": "2020-08-27T06:35:38Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_update_items': (\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module: module name\n+    :return:\n+    \"\"\"\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+    log.debug('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_pairs = config[module][pom]['artifact_id_pairs']\n+    log.debug('Module: {}, artifact ids: {}'.format(module, artifact_id_pairs))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_pair in artifact_id_pairs:\n+                new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n+                if line != new_line:\n+                    line = new_line\n+                    log.debug('Updated artifact id in line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+    log.debug('Replacing version in file: {}'.format(pom))\n+    version_update_items = config[module][pom]['version_update_items']\n+    log.debug('Module: {}, versions: {}'.format(module, version_update_items))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_update_item in version_update_items:\n+                if version_update_item.id in line:\n+                    log.debug('Updated line {}'.format(line_num))\n+                    # update version in dependency part\n+                    if X_VERSION_UPDATE in line:\n+                        old_version = line[(line.index('<version>') + 9):line.index('</version>')]\n+                        new_line = line.replace(old_version, version_update_item.new_version)\n+                        if line != new_line:\n+                            line = new_line\n+                            log.debug('Updated version of dependency in line {}'.format(line_num))", "originalCommit": "d6235c1ca2680089e80541aa61c5e49c3945926b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODE4NDE1OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478184159", "bodyText": "Updating", "author": "chenrujun", "createdAt": "2020-08-27T06:35:50Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,178 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            'artifact_id_pairs': (\n+                ArtifactIdPair('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            'version_update_items': (\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module: module name\n+    :return:\n+    \"\"\"\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+    log.debug('Replacing artifact id in file: {}'.format(pom, module))\n+    artifact_id_pairs = config[module][pom]['artifact_id_pairs']\n+    log.debug('Module: {}, artifact ids: {}'.format(module, artifact_id_pairs))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_pair in artifact_id_pairs:\n+                new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n+                if line != new_line:\n+                    line = new_line\n+                    log.debug('Updated artifact id in line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version, contains dependency and plugin parts.\n+    :param module: module name\n+    :param pom: pom file path\n+    :return:\n+    \"\"\"\n+    log.debug('Replacing version in file: {}'.format(pom))\n+    version_update_items = config[module][pom]['version_update_items']\n+    log.debug('Module: {}, versions: {}'.format(module, version_update_items))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_update_item in version_update_items:\n+                if version_update_item.id in line:\n+                    log.debug('Updated line {}'.format(line_num))\n+                    # update version in dependency part\n+                    if X_VERSION_UPDATE in line:\n+                        old_version = line[(line.index('<version>') + 9):line.index('</version>')]\n+                        new_line = line.replace(old_version, version_update_item.new_version)\n+                        if line != new_line:\n+                            line = new_line\n+                            log.debug('Updated version of dependency in line {}'.format(line_num))\n+                            log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                            log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    # update version in plugin part\n+                    elif X_INCLUDE_UPDATE in line:\n+                        old_version = line[(line.index('[')+1):line.index(']')]\n+                        new_line = line.replace(old_version, version_update_item.new_version)\n+                        if line != new_line:\n+                            line = new_line\n+                            log.debug('Updated version of plugin in line {}'.format(line_num))", "originalCommit": "d6235c1ca2680089e80541aa61c5e49c3945926b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e7d75452cb421787679dd4d09f1ed59b53150e33", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e7d75452cb421787679dd4d09f1ed59b53150e33", "message": "refer to reviewer's comment and update", "committedDate": "2020-08-27T07:18:28Z", "type": "commit"}, {"oid": "5d5d17229654364fe78757a3b377290c6c06694a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5d5d17229654364fe78757a3b377290c6c06694a", "message": "update change log", "committedDate": "2020-08-27T07:23:28Z", "type": "commit"}, {"oid": "185a67823faf5d1ed9d6e81e55777ad2e2df0e37", "url": "https://github.com/Azure/azure-sdk-for-java/commit/185a67823faf5d1ed9d6e81e55777ad2e2df0e37", "message": "merged from master", "committedDate": "2020-08-27T07:30:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0MTgyMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478241823", "bodyText": "Please use in instead of __contains__.\nRefs: https://stackoverflow.com/questions/5312778/how-to-test-if-a-dictionary-contains-a-specific-key", "author": "chenrujun", "createdAt": "2020-08-27T08:20:10Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -105,72 +107,91 @@ def replace(module):\n     \"\"\"\n     Replace action\n     :param module: module name\n-    :return:\n     \"\"\"\n     for pom in config[module].keys():\n         replace_artifact_id(module, pom)\n         replace_version(module, pom)\n \n \n+def get_str(tuple_obj):\n+    \"\"\"\n+    Return str list for tuple obj for logger.\n+    :param tuple_obj: tuple obj\n+    :return: string list\n+    \"\"\"\n+    str_list = list()\n+    for item in tuple_obj:\n+        str_list.append(str(item))\n+    return str_list\n+\n+\n def replace_artifact_id(module, pom):\n     \"\"\"\n-    Replace artifactId in dependency\n+    Replace artifactId in dependency and plugin part.\n     :param module: module name\n     :param pom: pom file path\n-    :return:\n     \"\"\"\n     log.debug('Replacing artifact id in file: {}'.format(pom, module))\n-    artifact_id_pairs = config[module][pom]['artifact_id_pairs']\n-    log.debug('Module: {}, artifact ids: {}'.format(module, artifact_id_pairs))\n+    pom_dict = config[module][pom]\n+    if not pom_dict.__contains__(ARTIFACT_ID_PAIRS_KEY_NAME):", "originalCommit": "e7d75452cb421787679dd4d09f1ed59b53150e33", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0MjM3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478242379", "bodyText": "Same here.", "author": "chenrujun", "createdAt": "2020-08-27T08:21:06Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -105,72 +107,91 @@ def replace(module):\n     \"\"\"\n     Replace action\n     :param module: module name\n-    :return:\n     \"\"\"\n     for pom in config[module].keys():\n         replace_artifact_id(module, pom)\n         replace_version(module, pom)\n \n \n+def get_str(tuple_obj):\n+    \"\"\"\n+    Return str list for tuple obj for logger.\n+    :param tuple_obj: tuple obj\n+    :return: string list\n+    \"\"\"\n+    str_list = list()\n+    for item in tuple_obj:\n+        str_list.append(str(item))\n+    return str_list\n+\n+\n def replace_artifact_id(module, pom):\n     \"\"\"\n-    Replace artifactId in dependency\n+    Replace artifactId in dependency and plugin part.\n     :param module: module name\n     :param pom: pom file path\n-    :return:\n     \"\"\"\n     log.debug('Replacing artifact id in file: {}'.format(pom, module))\n-    artifact_id_pairs = config[module][pom]['artifact_id_pairs']\n-    log.debug('Module: {}, artifact ids: {}'.format(module, artifact_id_pairs))\n+    pom_dict = config[module][pom]\n+    if not pom_dict.__contains__(ARTIFACT_ID_PAIRS_KEY_NAME):\n+        log.warn('No config key {} in pom parameters.'.format(ARTIFACT_ID_PAIRS_KEY_NAME))\n+        return\n+\n+    artifact_id_pairs = pom_dict[ARTIFACT_ID_PAIRS_KEY_NAME]\n+    log.debug('Module: {}, artifact ids: {}'.format(module, get_str(artifact_id_pairs)))\n     with in_place.InPlace(pom) as file:\n         line_num = 0\n         for line in file:\n             line_num = line_num + 1\n             for artifact_id_pair in artifact_id_pairs:\n                 new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n                 if line != new_line:\n-                    line = new_line\n-                    log.debug('Updated artifact id in line {}'.format(line_num))\n+                    log.debug('Updating artifact id in line {}'.format(line_num))\n                     log.debug('    old_line = {}.'.format(line.strip('\\n')))\n                     log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n             file.write(line)\n \n \n def replace_version(module, pom):\n     \"\"\"\n-    Replace version, contains dependency and plugin parts.\n+    Replace version in dependency and plugin part.\n     :param module: module name\n     :param pom: pom file path\n-    :return:\n     \"\"\"\n     log.debug('Replacing version in file: {}'.format(pom))\n-    version_update_items = config[module][pom]['version_update_items']\n-    log.debug('Module: {}, versions: {}'.format(module, version_update_items))\n+    pom_dict = config[module][pom]\n+    if not pom_dict.__contains__(VERSION_UPDATE_ITEMS_KEY_NAME):", "originalCommit": "e7d75452cb421787679dd4d09f1ed59b53150e33", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0NDIxOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478244218", "bodyText": "Use ARTIFACT_ID_PAIRS instead of ARTIFACT_ID_PAIRS_KEY_NAME, just like X_VERSION_UPDATE.", "author": "chenrujun", "createdAt": "2020-08-27T08:24:11Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,199 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+ARTIFACT_ID_PAIRS_KEY_NAME = 'artifact_id_pairs'", "originalCommit": "185a67823faf5d1ed9d6e81e55777ad2e2df0e37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0NDI5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478244298", "bodyText": "Same here.", "author": "chenrujun", "createdAt": "2020-08-27T08:24:19Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,199 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+ARTIFACT_ID_PAIRS_KEY_NAME = 'artifact_id_pairs'\n+VERSION_UPDATE_ITEMS_KEY_NAME = 'version_update_items'", "originalCommit": "185a67823faf5d1ed9d6e81e55777ad2e2df0e37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI0OTYyNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478249627", "bodyText": "for artifact_id_pair in artifact_id_pairs:\n                if artifact_id_pair.old_artifact_id in line:  # Change here\n                    new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n                    log.debug('Updating artifact id in line {}'.format(line_num))\n                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n                    line = new_line\n                    continue # Added here\n            file.write(line)", "author": "chenrujun", "createdAt": "2020-08-27T08:33:16Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,199 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+ARTIFACT_ID_PAIRS_KEY_NAME = 'artifact_id_pairs'\n+VERSION_UPDATE_ITEMS_KEY_NAME = 'version_update_items'\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            ARTIFACT_ID_PAIRS_KEY_NAME: (\n+                ArtifactIdPair('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            ARTIFACT_ID_PAIRS_KEY_NAME: (\n+                ArtifactIdPair('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            VERSION_UPDATE_ITEMS_KEY_NAME: (\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module: module name\n+    \"\"\"\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def get_str(tuple_obj):\n+    \"\"\"\n+    Return str list for tuple obj for logger.\n+    :param tuple_obj: tuple obj\n+    :return: string list\n+    \"\"\"\n+    str_list = list()\n+    for item in tuple_obj:\n+        str_list.append(str(item))\n+    return str_list\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency and plugin part.\n+    :param module: module name\n+    :param pom: pom file path\n+    \"\"\"\n+    log.debug('Replacing artifact id in file: {}'.format(pom, module))\n+    pom_dict = config[module][pom]\n+    if not pom_dict.__contains__(ARTIFACT_ID_PAIRS_KEY_NAME):\n+        log.warn('No config key {} in pom parameters.'.format(ARTIFACT_ID_PAIRS_KEY_NAME))\n+        return\n+\n+    artifact_id_pairs = pom_dict[ARTIFACT_ID_PAIRS_KEY_NAME]\n+    log.debug('Module: {}, artifact ids: {}'.format(module, get_str(artifact_id_pairs)))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_pair in artifact_id_pairs:\n+                new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n+                if line != new_line:\n+                    log.debug('Updating artifact id in line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)", "originalCommit": "185a67823faf5d1ed9d6e81e55777ad2e2df0e37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI1NDQ1Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478254453", "bodyText": "We can use\nif new_version != old_version\n\ninstead of\nif line != new_line:\n\nFurther more, if we configure property, old_version should not equal to new_version.\nSo if check can be deleted.\nThe code will be like this:\n\t                if X_VERSION_UPDATE in line:\n                            old_version = line[(line.index('<version>') + 9):line.index('</version>')]\n\t                    new_line = line.replace(old_version, version_update_item.new_version)\n                            log.debug('Updating version of dependency in line {}'.format(line_num))\n                            log.debug('    old_line = {}.'.format(line.strip('\\n')))\n                            log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n                            line = new_line", "author": "chenrujun", "createdAt": "2020-08-27T08:41:15Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,199 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+ARTIFACT_ID_PAIRS_KEY_NAME = 'artifact_id_pairs'\n+VERSION_UPDATE_ITEMS_KEY_NAME = 'version_update_items'\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            ARTIFACT_ID_PAIRS_KEY_NAME: (\n+                ArtifactIdPair('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            ARTIFACT_ID_PAIRS_KEY_NAME: (\n+                ArtifactIdPair('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            VERSION_UPDATE_ITEMS_KEY_NAME: (\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module: module name\n+    \"\"\"\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def get_str(tuple_obj):\n+    \"\"\"\n+    Return str list for tuple obj for logger.\n+    :param tuple_obj: tuple obj\n+    :return: string list\n+    \"\"\"\n+    str_list = list()\n+    for item in tuple_obj:\n+        str_list.append(str(item))\n+    return str_list\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency and plugin part.\n+    :param module: module name\n+    :param pom: pom file path\n+    \"\"\"\n+    log.debug('Replacing artifact id in file: {}'.format(pom, module))\n+    pom_dict = config[module][pom]\n+    if not pom_dict.__contains__(ARTIFACT_ID_PAIRS_KEY_NAME):\n+        log.warn('No config key {} in pom parameters.'.format(ARTIFACT_ID_PAIRS_KEY_NAME))\n+        return\n+\n+    artifact_id_pairs = pom_dict[ARTIFACT_ID_PAIRS_KEY_NAME]\n+    log.debug('Module: {}, artifact ids: {}'.format(module, get_str(artifact_id_pairs)))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_pair in artifact_id_pairs:\n+                new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n+                if line != new_line:\n+                    log.debug('Updating artifact id in line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version in dependency and plugin part.\n+    :param module: module name\n+    :param pom: pom file path\n+    \"\"\"\n+    log.debug('Replacing version in file: {}'.format(pom))\n+    pom_dict = config[module][pom]\n+    if not pom_dict.__contains__(VERSION_UPDATE_ITEMS_KEY_NAME):\n+        log.warn('No config key {} in pom parameters.'.format(VERSION_UPDATE_ITEMS_KEY_NAME))\n+        return\n+\n+    version_update_items = pom_dict[VERSION_UPDATE_ITEMS_KEY_NAME]\n+    log.debug('Module: {}, versions: {}'.format(module, get_str(version_update_items)))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_update_item in version_update_items:\n+                if version_update_item.id in line:\n+                    log.debug('Updating line {}'.format(line_num))\n+                    # update version in dependency part\n+                    if X_VERSION_UPDATE in line:\n+                        old_version = line[(line.index('<version>') + 9):line.index('</version>')]", "originalCommit": "185a67823faf5d1ed9d6e81e55777ad2e2df0e37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI1NDY1Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478254656", "bodyText": "Same here.", "author": "chenrujun", "createdAt": "2020-08-27T08:41:36Z", "path": "sdk/spring/scripts/replace_util.py", "diffHunk": "@@ -0,0 +1,199 @@\n+# Copyright (c) Microsoft Corporation. All rights reserved.\n+# Licensed under the MIT License.\n+\n+\n+import argparse\n+import os\n+import time\n+\n+import in_place\n+\n+from log import log, Log\n+from artifact_id_pair import ArtifactIdPair\n+from version_update_item import VersionUpdateItem\n+\n+X_VERSION_UPDATE = 'x-version-update'\n+X_INCLUDE_UPDATE = 'x-include-update'\n+ARTIFACT_ID_PAIRS_KEY_NAME = 'artifact_id_pairs'\n+VERSION_UPDATE_ITEMS_KEY_NAME = 'version_update_items'\n+\n+config = {\n+    'cosmos': {\n+        'sdk/cosmos/azure-spring-data-cosmos-test/pom.xml': {\n+            ARTIFACT_ID_PAIRS_KEY_NAME: (\n+                ArtifactIdPair('azure-spring-data-2-3-cosmos', 'azure-spring-data-2-2-cosmos'),\n+            )\n+        }\n+    },\n+    'spring': {\n+        'sdk/spring/azure-spring-boot-test-cosmosdb/pom.xml': {\n+            ARTIFACT_ID_PAIRS_KEY_NAME: (\n+                ArtifactIdPair('azure-cosmosdb-spring-boot-2-3-starter', 'azure-cosmosdb-spring-boot-2-2-starter'),\n+            ),\n+            VERSION_UPDATE_ITEMS_KEY_NAME: (\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-web', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-actuator', '2.2.9.RELEASE'),\n+                VersionUpdateItem('org.springframework.boot:spring-boot-starter-test', '2.2.9.RELEASE')\n+            )\n+        }\n+    }\n+}\n+\n+\n+def main():\n+    start_time = time.time()\n+    change_to_root_dir()\n+    log.debug('Current working directory = {}.'.format(os.getcwd()))\n+    args = get_args()\n+    init_log(args)\n+    replace(args.module)\n+    elapsed_time = time.time() - start_time\n+    log.info('elapsed_time = {}'.format(elapsed_time))\n+\n+\n+def change_to_root_dir():\n+    os.chdir(os.path.dirname(os.path.realpath(__file__)))\n+    os.chdir('../../..')\n+\n+\n+def get_args():\n+    parser = argparse.ArgumentParser(\n+        description = 'Replace artifact id in pom file.'\n+    )\n+    parser.add_argument(\n+        '--module',\n+        type = str,\n+        choices = ['spring', 'cosmos'],\n+        required = False,\n+        default = 'cosmos',\n+        help = 'Specify the target module.'\n+    )\n+    parser.add_argument(\n+        '--log',\n+        type = str,\n+        choices = ['debug', 'info', 'warn', 'error', 'none'],\n+        required = False,\n+        default = 'info',\n+        help = 'Set log level.'\n+    )\n+    parser.add_argument(\n+        '--color',\n+        type = str,\n+        choices = ['true', 'false'],\n+        required = False,\n+        default = 'true',\n+        help = 'Whether need colorful log.'\n+    )\n+    return parser.parse_args()\n+\n+\n+def init_log(args):\n+    log_dict = {\n+        'debug': Log.DEBUG,\n+        'info': Log.INFO,\n+        'warn': Log.WARN,\n+        'error': Log.ERROR,\n+        'none': Log.NONE\n+    }\n+    log.set_log_level(log_dict[args.log])\n+    color_dict = {\n+        'true': True,\n+        'false': False\n+    }\n+    log.set_color(color_dict[args.color])\n+\n+\n+def replace(module):\n+    \"\"\"\n+    Replace action\n+    :param module: module name\n+    \"\"\"\n+    for pom in config[module].keys():\n+        replace_artifact_id(module, pom)\n+        replace_version(module, pom)\n+\n+\n+def get_str(tuple_obj):\n+    \"\"\"\n+    Return str list for tuple obj for logger.\n+    :param tuple_obj: tuple obj\n+    :return: string list\n+    \"\"\"\n+    str_list = list()\n+    for item in tuple_obj:\n+        str_list.append(str(item))\n+    return str_list\n+\n+\n+def replace_artifact_id(module, pom):\n+    \"\"\"\n+    Replace artifactId in dependency and plugin part.\n+    :param module: module name\n+    :param pom: pom file path\n+    \"\"\"\n+    log.debug('Replacing artifact id in file: {}'.format(pom, module))\n+    pom_dict = config[module][pom]\n+    if not pom_dict.__contains__(ARTIFACT_ID_PAIRS_KEY_NAME):\n+        log.warn('No config key {} in pom parameters.'.format(ARTIFACT_ID_PAIRS_KEY_NAME))\n+        return\n+\n+    artifact_id_pairs = pom_dict[ARTIFACT_ID_PAIRS_KEY_NAME]\n+    log.debug('Module: {}, artifact ids: {}'.format(module, get_str(artifact_id_pairs)))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for artifact_id_pair in artifact_id_pairs:\n+                new_line = line.replace(artifact_id_pair.old_artifact_id, artifact_id_pair.new_artifact_id)\n+                if line != new_line:\n+                    log.debug('Updating artifact id in line {}'.format(line_num))\n+                    log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                    log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                    line = new_line\n+            file.write(line)\n+\n+\n+def replace_version(module, pom):\n+    \"\"\"\n+    Replace version in dependency and plugin part.\n+    :param module: module name\n+    :param pom: pom file path\n+    \"\"\"\n+    log.debug('Replacing version in file: {}'.format(pom))\n+    pom_dict = config[module][pom]\n+    if not pom_dict.__contains__(VERSION_UPDATE_ITEMS_KEY_NAME):\n+        log.warn('No config key {} in pom parameters.'.format(VERSION_UPDATE_ITEMS_KEY_NAME))\n+        return\n+\n+    version_update_items = pom_dict[VERSION_UPDATE_ITEMS_KEY_NAME]\n+    log.debug('Module: {}, versions: {}'.format(module, get_str(version_update_items)))\n+    with in_place.InPlace(pom) as file:\n+        line_num = 0\n+        for line in file:\n+            line_num = line_num + 1\n+            for version_update_item in version_update_items:\n+                if version_update_item.id in line:\n+                    log.debug('Updating line {}'.format(line_num))\n+                    # update version in dependency part\n+                    if X_VERSION_UPDATE in line:\n+                        old_version = line[(line.index('<version>') + 9):line.index('</version>')]\n+                        new_line = line.replace(old_version, version_update_item.new_version)\n+                        if line != new_line:\n+                            log.debug('Updating version of dependency in line {}'.format(line_num))\n+                            log.debug('    old_line = {}.'.format(line.strip('\\n')))\n+                            log.debug('    new_line = {}.'.format(new_line.strip('\\n')))\n+                            line = new_line\n+                    # update version in plugin part\n+                    elif X_INCLUDE_UPDATE in line:\n+                        old_version = line[(line.index('[')+1):line.index(']')]\n+                        new_line = line.replace(old_version, version_update_item.new_version)\n+                        if line != new_line:", "originalCommit": "185a67823faf5d1ed9d6e81e55777ad2e2df0e37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7eca706070f77ad5b09f168650a2a997e61655b7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7eca706070f77ad5b09f168650a2a997e61655b7", "message": "fix test error and update python code", "committedDate": "2020-08-27T09:21:13Z", "type": "commit"}, {"oid": "022ae31e6f379cfe57110cc10e50bbed29bd0526", "url": "https://github.com/Azure/azure-sdk-for-java/commit/022ae31e6f379cfe57110cc10e50bbed29bd0526", "message": "fix test error", "committedDate": "2020-08-27T10:19:49Z", "type": "commit"}, {"oid": "00fe852139fc9df4e755148bf03df3da11c7a403", "url": "https://github.com/Azure/azure-sdk-for-java/commit/00fe852139fc9df4e755148bf03df3da11c7a403", "message": "update indentation and markdown", "committedDate": "2020-08-28T01:37:21Z", "type": "commit"}, {"oid": "6961347a8a265ef0ae0811254496960ce8ac2faa", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6961347a8a265ef0ae0811254496960ce8ac2faa", "message": "update python log", "committedDate": "2020-08-28T01:38:50Z", "type": "commit"}, {"oid": "e5744b74d492b3f6be824bf0818df48d27822666", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e5744b74d492b3f6be824bf0818df48d27822666", "message": "update pom description", "committedDate": "2020-08-28T02:25:38Z", "type": "commit"}, {"oid": "89f538ff85e446e9e531f3d78ec00dfc1d8f16aa", "url": "https://github.com/Azure/azure-sdk-for-java/commit/89f538ff85e446e9e531f3d78ec00dfc1d8f16aa", "message": "update indentation in spring/test.yml", "committedDate": "2020-08-28T03:14:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODgyNDUyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478824529", "bodyText": "Let's not use relative links here. https://github.com/Azure/azure-sdk/blob/master/docs/policies/README-TEMPLATE.md#link-guidelines\nAnd we should link to the Key concepts part of the azure-spring-boot-2-3-starter-cosmosdb/README.md.", "author": "saragluna", "createdAt": "2020-08-28T04:31:06Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,52 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-2-2-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-2-2-starter</artifactId>\n+    <version>2.4.0-beta.1</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+## Key concepts\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for key concepts.", "originalCommit": "89f538ff85e446e9e531f3d78ec00dfc1d8f16aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODgyNDU0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478824545", "bodyText": "same here.", "author": "saragluna", "createdAt": "2020-08-28T04:31:13Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,52 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-2-2-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-2-2-starter</artifactId>\n+    <version>2.4.0-beta.1</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+## Key concepts\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for key concepts.\n+\n+## Examples\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for examples.", "originalCommit": "89f538ff85e446e9e531f3d78ec00dfc1d8f16aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODgyNDU3NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478824574", "bodyText": "same here.", "author": "saragluna", "createdAt": "2020-08-28T04:31:20Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,52 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-2-2-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-2-2-starter</artifactId>\n+    <version>2.4.0-beta.1</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+## Key concepts\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for key concepts.\n+\n+## Examples\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for examples.\n+\n+## Troubleshooting\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for troubleshooting.", "originalCommit": "89f538ff85e446e9e531f3d78ec00dfc1d8f16aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODgyNDY2Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478824667", "bodyText": "same here, do not use relative link.", "author": "saragluna", "createdAt": "2020-08-28T04:31:46Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,52 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-2-2-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-2-2-starter</artifactId>\n+    <version>2.4.0-beta.1</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+## Key concepts\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for key concepts.\n+\n+## Examples\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for examples.\n+\n+## Troubleshooting\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for troubleshooting.\n+\n+## Next steps\n+\n+Besides using this Azure CosmosDb Spring Boot Starter, you can directly use Spring Data for Azure CosmosDb package for more complex scenarios. Please refer to [Spring Data for Azure CosmosDB](https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/cosmos/azure-spring-data-cosmos-core) for more details.\n+\n+The following section provide a sample project illustrating how to use the starter.\n+### More sample code\n+- [Cosmos DB SQL API](../azure-spring-boot-samples/azure-spring-boot-sample-cosmosdb)", "originalCommit": "89f538ff85e446e9e531f3d78ec00dfc1d8f16aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODgyNDg5OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478824899", "bodyText": "same here.", "author": "saragluna", "createdAt": "2020-08-28T04:32:57Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,52 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-2-2-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-2-2-starter</artifactId>\n+    <version>2.4.0-beta.1</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+## Key concepts\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for key concepts.\n+\n+## Examples\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for examples.\n+\n+## Troubleshooting\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for troubleshooting.\n+\n+## Next steps\n+\n+Besides using this Azure CosmosDb Spring Boot Starter, you can directly use Spring Data for Azure CosmosDb package for more complex scenarios. Please refer to [Spring Data for Azure CosmosDB](https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/cosmos/azure-spring-data-cosmos-core) for more details.\n+\n+The following section provide a sample project illustrating how to use the starter.\n+### More sample code\n+- [Cosmos DB SQL API](../azure-spring-boot-samples/azure-spring-boot-sample-cosmosdb)\n+\n+## Contributing\n+This project welcomes contributions and suggestions.  Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit https://cla.microsoft.com.\n+\n+Please follow [instructions here](../CONTRIBUTING.md) to build from source or contribute.", "originalCommit": "89f538ff85e446e9e531f3d78ec00dfc1d8f16aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODgyNTcyMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14465#discussion_r478825723", "bodyText": "We could make the above links reference links here. e.g.\n[instructions here](../CONTRIBUTING.md) -> [instructions here][contributing]\n\n[contributing][https://absolute-url-to-contributing]", "author": "saragluna", "createdAt": "2020-08-28T04:36:30Z", "path": "sdk/spring/azure-spring-boot-2-2-starter-cosmosdb/README.md", "diffHunk": "@@ -0,0 +1,52 @@\n+# Azure Cosmos DB Spring Boot 2.2 Starter client library for Java\n+\n+[Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a globally-distributed database service that allows developers to work with data using a variety of standard APIs, such as SQL, MongoDB, Graph, and Azure Table storage. \n+\n+[Package (Maven)][package] | [API reference documentation][refdocs] | [Product documentation][docs] | [Samples][sample]\n+\n+## Getting started\n+### Prerequisites\n+- Java Development Kit (JDK) with version 8 or above\n+- [Azure Subscription][azure_subscription]\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+### Include the package\n+[//]: # ({x-version-update-start;com.microsoft.azure:azure-cosmosdb-spring-boot-2-2-starter;current})\n+```xml\n+<dependency>\n+    <groupId>com.microsoft.azure</groupId>\n+    <artifactId>azure-cosmosdb-spring-boot-2-2-starter</artifactId>\n+    <version>2.4.0-beta.1</version>\n+</dependency>\n+```\n+[//]: # ({x-version-update-end})\n+\n+## Key concepts\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for key concepts.\n+\n+## Examples\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for examples.\n+\n+## Troubleshooting\n+Please refer to [Azure Cosmos DB Spring Boot 2.3 Starter](../azure-spring-boot-2-3-starter-cosmosdb/README.md) for troubleshooting.\n+\n+## Next steps\n+\n+Besides using this Azure CosmosDb Spring Boot Starter, you can directly use Spring Data for Azure CosmosDb package for more complex scenarios. Please refer to [Spring Data for Azure CosmosDB](https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/cosmos/azure-spring-data-cosmos-core) for more details.\n+\n+The following section provide a sample project illustrating how to use the starter.\n+### More sample code\n+- [Cosmos DB SQL API](../azure-spring-boot-samples/azure-spring-boot-sample-cosmosdb)\n+\n+## Contributing\n+This project welcomes contributions and suggestions.  Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit https://cla.microsoft.com.\n+\n+Please follow [instructions here](../CONTRIBUTING.md) to build from source or contribute.\n+\n+<!-- LINKS -->\n+[docs]: https://docs.microsoft.com/azure/developer/java/spring-framework/configure-spring-boot-starter-java-app-with-cosmos-db", "originalCommit": "89f538ff85e446e9e531f3d78ec00dfc1d8f16aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "45e6613b9e5b6b54b36a977e11358e2c023c463a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/45e6613b9e5b6b54b36a977e11358e2c023c463a", "message": "update readme link address", "committedDate": "2020-08-28T05:02:53Z", "type": "commit"}, {"oid": "f2ef8f9a5defae16865bf664deb95334bc8594c9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f2ef8f9a5defae16865bf664deb95334bc8594c9", "message": "update readme link address", "committedDate": "2020-08-28T05:07:46Z", "type": "commit"}, {"oid": "44bcee9832266ea4a695f4d692db04a079a2f4bd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/44bcee9832266ea4a695f4d692db04a079a2f4bd", "message": "update spring live test config", "committedDate": "2020-08-28T08:41:16Z", "type": "commit"}, {"oid": "2f1dd6d24886b4aabc5433031a2f4816dbbe065c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2f1dd6d24886b4aabc5433031a2f4816dbbe065c", "message": "update spring live test config", "committedDate": "2020-08-28T09:00:12Z", "type": "commit"}]}