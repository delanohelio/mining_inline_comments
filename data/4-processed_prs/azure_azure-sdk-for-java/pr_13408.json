{"pr_number": 13408, "pr_title": "remove azure-core-test and prepare for folding resource manager test", "pr_createdAt": "2020-07-22T05:52:27Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13408", "timeline": [{"oid": "6c4141054e92b9e2977664e1603a54ef5508cab9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6c4141054e92b9e2977664e1603a54ef5508cab9", "message": "remove dependency of azure-core-test", "committedDate": "2020-07-22T05:46:58Z", "type": "commit"}, {"oid": "4808ee1bed66cbb3274c3157efb93866b6ba7e2d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4808ee1bed66cbb3274c3157efb93866b6ba7e2d", "message": "add azure profile", "committedDate": "2020-07-22T05:47:40Z", "type": "commit"}, {"oid": "2cd5569d23151ce5f520746faaba29f3069cf4ca", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2cd5569d23151ce5f520746faaba29f3069cf4ca", "message": "add interface of providers for identifier/delay", "committedDate": "2020-07-23T05:02:44Z", "type": "commit"}, {"oid": "6047218132d28d340b6219a0420c2d9c88eeeb8b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6047218132d28d340b6219a0420c2d9c88eeeb8b", "message": "update module-info", "committedDate": "2020-07-23T05:04:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxMjI5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#discussion_r459812294", "bodyText": "This method appears only used in sample or test. So it appears not needed in core-mgmt. (worst case, disable the playback in sample, or set a date and let user change it when they run the sample).", "author": "weidongxu-microsoft", "createdAt": "2020-07-24T01:27:37Z", "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/provider/IdentifierProvider.java", "diffHunk": "@@ -0,0 +1,31 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.core.management.provider;\n+\n+import java.time.OffsetDateTime;\n+\n+/**\n+ * The IdentifierProvider to help generate distinct values.\n+ */\n+public interface IdentifierProvider {\n+    /**\n+     * Get a random name.\n+     *\n+     * @param prefix the prefix to be used if possible\n+     * @param maxLen the max length for the random generated name\n+     * @return the random name\n+     */\n+    String randomName(String prefix, int maxLen);\n+\n+    /**\n+     * Create a random UUID.\n+     *\n+     * @return the UUID string.\n+     */\n+    String randomUuid();\n+\n+    /**\n+     * @return the current time offset.\n+     */\n+    OffsetDateTime dateTimeNow();", "originalCommit": "6047218132d28d340b6219a0420c2d9c88eeeb8b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxMjg3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#discussion_r459812875", "bodyText": "This one might be removed. Directly we only need getDelayDuration. This could be done by a helper method elsewhere.", "author": "weidongxu-microsoft", "createdAt": "2020-07-24T01:30:26Z", "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/provider/DelayProvider.java", "diffHunk": "@@ -0,0 +1,33 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.core.management.provider;\n+\n+import java.time.Duration;\n+\n+/**\n+ * The DelayProvider to help thread sleep.\n+ */\n+public interface DelayProvider {\n+\n+    /**\n+     * Thread sleep.\n+     *\n+     * @param milliseconds time for sleep\n+     */\n+    void sleep(int milliseconds);\n+\n+    /**\n+     * Get the retry timeout for long running operation.\n+     *\n+     * @return the timeout value.\n+     */\n+    Duration getLroRetryTimeout();", "originalCommit": "6047218132d28d340b6219a0420c2d9c88eeeb8b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxMzEwOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#discussion_r459813108", "bodyText": "Simliarly, this is only Thread.sleep(getDelayDuration(Duration.ofMillis(milliseconds)).toMillis()), and can be in a helper method elsewhere.", "author": "weidongxu-microsoft", "createdAt": "2020-07-24T01:31:32Z", "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/provider/DelayProvider.java", "diffHunk": "@@ -0,0 +1,33 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.core.management.provider;\n+\n+import java.time.Duration;\n+\n+/**\n+ * The DelayProvider to help thread sleep.\n+ */\n+public interface DelayProvider {\n+\n+    /**\n+     * Thread sleep.\n+     *\n+     * @param milliseconds time for sleep\n+     */\n+    void sleep(int milliseconds);", "originalCommit": "6047218132d28d340b6219a0420c2d9c88eeeb8b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "649f4645543fc787748f464b94dca04608a4a43d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/649f4645543fc787748f464b94dca04608a4a43d", "message": "remove redundant methods", "committedDate": "2020-07-24T06:54:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU4NzI3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#discussion_r460587279", "bodyText": "I would have expected these methods to be prefixed with 'get'", "author": "JonathanGiles", "createdAt": "2020-07-26T23:32:48Z", "path": "sdk/core/azure-core-management/src/main/java/com/azure/core/management/profile/AzureProfile.java", "diffHunk": "@@ -0,0 +1,79 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.azure.core.management.profile;\n+\n+import com.azure.core.management.AzureEnvironment;\n+import com.azure.core.util.Configuration;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Azure profile for client.\n+ */\n+public class AzureProfile {\n+\n+    private final String tenantId;\n+    private final String subscriptionId;\n+    private final AzureEnvironment environment;\n+\n+    /**\n+     * Creates AzureProfile instance with Azure environment. The global environment is {@link AzureEnvironment#AZURE}.\n+     * The tenant ID and subscription ID can be set via environment variables. The environment variables are expected\n+     * as below:\n+     * <ul>\n+     *     <li>{@link Configuration#PROPERTY_AZURE_TENANT_ID AZURE_TENANT_ID}</li>\n+     *     <li>{@link Configuration#PROPERTY_AZURE_SUBSCRIPTION_ID AZURE_SUBSCRIPTION_ID}</li>\n+     * </ul>\n+     *\n+     * @param environment the Azure environment\n+     */\n+    public AzureProfile(AzureEnvironment environment) {\n+        Objects.requireNonNull(environment);\n+        this.environment = environment;\n+        Configuration configuration = Configuration.getGlobalConfiguration();\n+        this.tenantId = configuration.get(Configuration.PROPERTY_AZURE_TENANT_ID);\n+        this.subscriptionId = configuration.get(Configuration.PROPERTY_AZURE_SUBSCRIPTION_ID);\n+    }\n+\n+    /**\n+     * Creates AzureProfile instance with tenant ID, subscription ID and Azure environment.\n+     * The global environment is {@link AzureEnvironment#AZURE}.\n+     *\n+     * @param tenantId the tenant ID required for Graph Rbac\n+     * @param subscriptionId the subscription ID required for resource management\n+     * @param environment the Azure environment\n+     */\n+    public AzureProfile(String tenantId, String subscriptionId, AzureEnvironment environment) {\n+        Objects.requireNonNull(environment);\n+        this.tenantId = tenantId;\n+        this.subscriptionId = subscriptionId;\n+        this.environment = environment;\n+    }\n+\n+    /**\n+     * Gets tenant ID.\n+     *\n+     * @return the tenant ID\n+     */\n+    public String tenantId() {\n+        return this.tenantId;\n+    }\n+\n+    /**\n+     * Gets subscription ID.\n+     *\n+     * @return the subscription ID\n+     */\n+    public String subscriptionId() {\n+        return this.subscriptionId;\n+    }\n+\n+    /**\n+     * Gets Azure environment.\n+     *\n+     * @return the Azure environment\n+     */\n+    public AzureEnvironment environment() {\n+        return environment;\n+    }", "originalCommit": "649f4645543fc787748f464b94dca04608a4a43d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY0OTcyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13408#discussion_r460649721", "bodyText": "Updated.", "author": "xseeseesee", "createdAt": "2020-07-27T05:10:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU4NzI3OQ=="}], "type": "inlineReview"}, {"oid": "1c6e2fc1bc6aa09396aa6129241ff2ace2670496", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1c6e2fc1bc6aa09396aa6129241ff2ace2670496", "message": "update getter for azure profile", "committedDate": "2020-07-27T05:09:40Z", "type": "commit"}, {"oid": "9882c682c35b3a035283d24de261e6c7afef7bc8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9882c682c35b3a035283d24de261e6c7afef7bc8", "message": "Merge branch 'master' into update-core-mgmt", "committedDate": "2020-07-27T05:29:43Z", "type": "commit"}, {"oid": "b7356d13d03d1cdaef6ffb534d4ad73f19868434", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b7356d13d03d1cdaef6ffb534d4ad73f19868434", "message": "update pom version", "committedDate": "2020-07-31T08:20:39Z", "type": "commit"}]}