{"pr_number": 13305, "pr_title": "Update external opentelemetry dependency version ", "pr_createdAt": "2020-07-17T21:31:45Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13305", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5NDk3MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r456694970", "bodyText": "Looks like a copy/paste\nx-version-update;io.opentelemetry:grpc-core;external_dependency\nshould be\nx-version-update;io.grpc:grpc-core;external_dependency", "author": "JimSuplizio", "createdAt": "2020-07-17T22:10:00Z", "path": "sdk/core/azure-core-tracing-opentelemetry/pom.xml", "diffHunk": "@@ -35,19 +35,24 @@\n     <dependency>\n       <groupId>io.opentelemetry</groupId>\n       <artifactId>opentelemetry-api</artifactId>\n-      <version>0.2.4</version> <!-- {x-version-update;io.opentelemetry:opentelemetry-api;external_dependency} -->\n+      <version>0.6.0</version> <!-- {x-version-update;io.opentelemetry:opentelemetry-api;external_dependency} -->\n     </dependency>\n     <dependency>\n       <groupId>com.azure</groupId>\n       <artifactId>azure-core</artifactId>\n       <version>1.7.0-beta.2</version> <!-- {x-version-update;com.azure:azure-core;current} -->\n     </dependency>\n+    <dependency>\n+      <groupId>io.grpc</groupId>\n+      <artifactId>grpc-core</artifactId>\n+      <version>1.23.0</version> <!-- {x-version-update;io.opentelemetry:grpc-core;external_dependency} -->", "originalCommit": "582514aa2102012b392603815bf2ae3b7d48934b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5NDE2OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r456694169", "bodyText": "Is this required now? I know this will pull in a lot of other dependencies we don't commonly use such as GSON and OpenCensus.\ncc: @JonathanGiles", "author": "alzimmermsft", "createdAt": "2020-07-17T22:07:24Z", "path": "eng/versioning/external_dependencies.txt", "diffHunk": "@@ -115,8 +115,9 @@ com.microsoft.azure:azure-storage;8.0.0\n com.microsoft.azure:msal4j;1.3.0\n com.microsoft.azure:msal4j-persistence-extension;0.1\n com.sun.activation:jakarta.activation;1.2.1\n-io.opentelemetry:opentelemetry-api;0.2.4\n-io.opentelemetry:opentelemetry-sdk;0.2.4\n+io.opentelemetry:opentelemetry-api;0.6.0\n+io.opentelemetry:opentelemetry-sdk;0.6.0\n+io.grpc:grpc-core:jar:1.23.0", "originalCommit": "582514aa2102012b392603815bf2ae3b7d48934b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5ODU3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r456698572", "bodyText": "Yes, its been required for a while now.\nI was holding off on this change as there were ongoing conversations related to this here - open-telemetry/opentelemetry-java#575\nBut not updating the version was making us fall behind on the latest updates from otel-java.\nSo thought should finally have the updated versions for which this becomes required.\nWould it be possible to include grpc.core without GSON and OpenCensus dependencies?", "author": "samvaity", "createdAt": "2020-07-17T22:23:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5NDE2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMTg3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r456701875", "bodyText": "Should be able to use the scoped down package which they use transitively in this, https://mvnrepository.com/artifact/io.grpc/grpc-context/1.28.0.", "author": "alzimmermsft", "createdAt": "2020-07-17T22:36:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY5NDE2OQ=="}], "type": "inlineReview"}, {"oid": "5fb432c5071d79d89778ea7c215b263d33371fe6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5fb432c5071d79d89778ea7c215b263d33371fe6", "message": "correct grpc tag", "committedDate": "2020-07-17T22:29:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMDc5Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r456700796", "bodyText": "Can you also update this to use readme snippets tool so that we will have compilable code?", "author": "srnagar", "createdAt": "2020-07-17T22:32:06Z", "path": "sdk/core/azure-core-tracing-opentelemetry/README.md", "diffHunk": "@@ -50,33 +50,34 @@ The following sections provides examples of using the azure-core-tracing-opentel\n     This [sample][sample_key_vault] provides an example when no user parent span is passed.\n \n     ```java\n-    private static  final Tracer TRACER;\n-    private static final TracerSdkFactory TRACER_SDK_FACTORY;\n+    private static  final Tracer TRACER = TRACER_SDK_FACTORY.get(\"Sample\");", "originalCommit": "5fb432c5071d79d89778ea7c215b263d33371fe6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMTMwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r456701303", "bodyText": "Should these code samples be in Java files instead and the markdown file just has links to them?", "author": "srnagar", "createdAt": "2020-07-17T22:33:58Z", "path": "sdk/core/azure-core-tracing-opentelemetry/src/samples/AsyncListKeyVaultSecretsSample.md", "diffHunk": "@@ -57,7 +57,8 @@ import static com.azure.core.util.tracing.Tracer.PARENT_SPAN_KEY;\n /**\n  * Sample demonstrates tracing how to add and list secrets in a Key Vault with tracing enabled with a Logging Exporter.\n  */\n-public class Sample { \n+public class Sample {", "originalCommit": "5fb432c5071d79d89778ea7c215b263d33371fe6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMjI0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r456702245", "bodyText": "Not sure why we have so many .md files in /src/samples that have the same getting started section. Should this be consolidated into a single README.md file in /src/samples and then have Java code samples referenced in README? It would be consistent with what we do in other client libraries.", "author": "srnagar", "createdAt": "2020-07-17T22:37:38Z", "path": "sdk/core/azure-core-tracing-opentelemetry/src/samples/ListKeyVaultSecretsTracingSample.md", "diffHunk": "@@ -9,12 +9,12 @@ Sample uses **[opentelemetry-sdk][opentelemetry_sdk]** as implementation package\n <dependency>\n     <groupId>io.opentelemetry</groupId>\n     <artifactId>opentelemetry-sdk</artifactId>\n-    <version>0.2.4</version>\n+    <version>0.6.0</version>", "originalCommit": "5fb432c5071d79d89778ea7c215b263d33371fe6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcxMzc0Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r456713742", "bodyText": "Yeah, it was a solution to make this library lightweight and not have those client lib dependencies. We kept running into dependency issues for this library having to wait till all other \"dependent\" libraries to be out first, then do the source code updates and then release. This way we get to control the source code with the library and also don't need to have the client lib dependencies.\nLet me know if you have a better solution though, I think at that time it's the best we had!", "author": "samvaity", "createdAt": "2020-07-17T23:28:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMjI0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTAxOTQ3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r459019472", "bodyText": "Adding these dependencies in test scope should not increase the size of the library. Samples only need test scope dependencies.", "author": "srnagar", "createdAt": "2020-07-22T19:06:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMjI0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTAyNjQ4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r459026480", "bodyText": "Adding client library dependencies in test scope would still require this package to be released only after all other packages are released.\nWe could possibly consider using older versions of client dependencies to not run into the waiting cycle for releasing this package.\nCould give it a try updating the samples in #13423", "author": "samvaity", "createdAt": "2020-07-22T19:19:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjcwMjI0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2OTE1Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r457669152", "bodyText": "@JimSuplizio are we not processing version bumps sample md files? (Assuming they get correctly annotated in with tags). I cannot remember if we still have the md file processing disabled by default.", "author": "weshaggard", "createdAt": "2020-07-20T20:22:08Z", "path": "sdk/core/azure-core-tracing-opentelemetry/src/samples/CreateConfigurationSettingTracingSample.md", "diffHunk": "@@ -28,19 +28,19 @@ Sample uses **[opentelemetry-sdk][opentelemetry_sdk]** as implementation package\n <dependency>\n     <groupId>com.azure</groupId>\n     <artifactId>azure-core-tracing-opentelemetry</artifactId>\n-    <version>1.0.0-beta.4</version>\n+    <version>1.0.0-beta.6</version>", "originalCommit": "85b26a43e064f8ef053560beb8f8049e4014b9d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE2OTM4Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13305#discussion_r461169383", "bodyText": "@weshaggard we do if it's tagged and they're not running the script with the --sr option. These aren't tagged.", "author": "JimSuplizio", "createdAt": "2020-07-27T21:05:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2OTE1Mg=="}], "type": "inlineReview"}, {"oid": "eae850b009a4d7246f43c02b9b4657162cc827fa", "url": "https://github.com/Azure/azure-sdk-for-java/commit/eae850b009a4d7246f43c02b9b4657162cc827fa", "message": "update otel version", "committedDate": "2020-07-27T19:47:57Z", "type": "commit"}, {"oid": "fc8284d9fe77347763731584e313d496a1b5d0f1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc8284d9fe77347763731584e313d496a1b5d0f1", "message": "correct grpc tag", "committedDate": "2020-07-27T19:50:14Z", "type": "commit"}, {"oid": "743e801e02d5011cd408eed42693526569e393ba", "url": "https://github.com/Azure/azure-sdk-for-java/commit/743e801e02d5011cd408eed42693526569e393ba", "message": "update grpc version", "committedDate": "2020-07-27T19:52:44Z", "type": "commit"}, {"oid": "4adbdedec733a496ee8027dde81363393eb9ffab", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4adbdedec733a496ee8027dde81363393eb9ffab", "message": "update to grpc context", "committedDate": "2020-07-27T19:53:59Z", "type": "commit"}, {"oid": "d3471fff8594e3c7f3c8d8ac841d8a54cdefde7e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d3471fff8594e3c7f3c8d8ac841d8a54cdefde7e", "message": "add changelog", "committedDate": "2020-07-27T19:54:17Z", "type": "commit"}, {"oid": "e473b1a5f2c46e833d88cffa84c3c0d25b67d105", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e473b1a5f2c46e833d88cffa84c3c0d25b67d105", "message": "update eventhub sample version", "committedDate": "2020-07-27T19:54:21Z", "type": "commit"}, {"oid": "e473b1a5f2c46e833d88cffa84c3c0d25b67d105", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e473b1a5f2c46e833d88cffa84c3c0d25b67d105", "message": "update eventhub sample version", "committedDate": "2020-07-27T19:54:21Z", "type": "forcePushed"}]}