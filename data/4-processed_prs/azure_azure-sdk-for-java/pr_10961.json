{"pr_number": 10961, "pr_title": "Update scan_for_unreleased_dependencies.ps1", "pr_createdAt": "2020-05-08T16:50:21Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/10961", "timeline": [{"oid": "49e1fce3b04d6dc8d4889b9d5f0e69cf983c4c80", "url": "https://github.com/Azure/azure-sdk-for-java/commit/49e1fce3b04d6dc8d4889b9d5f0e69cf983c4c80", "message": "Update dep scanner", "committedDate": "2020-05-08T16:42:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM5Nzg1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10961#discussion_r422397854", "bodyText": "I think it is actually a good idea to do a check for both internal and external dependencies. I'd suggest we use the SemVer.ps1 script we have under common and check to see if our version and if it is not prerelease then we should error for any dependency that is marked as a prerelease.", "author": "weshaggard", "createdAt": "2020-05-08T22:07:31Z", "path": "eng/versioning/scan_for_unreleased_dependencies.ps1", "diffHunk": "@@ -87,6 +87,21 @@ Get-ChildItem -Path $serviceDirectory -Filter pom*.xml -Recurse -File | ForEach-\n                         Write-Error-With-Color \"Error: Cannot release non-beta libraries with beta_ dependencies. dependency=$($versionUpdateTag)\"\n                     }\n                     continue\n+                } else {\n+                    # If this is an external dependency then continue\n+                    if ($versionUpdateTag -match \"external_dependency}\") {", "originalCommit": "49e1fce3b04d6dc8d4889b9d5f0e69cf983c4c80", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQyMzQ5Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10961#discussion_r422423493", "bodyText": "@weshaggard, sure. I can look and see if this is feasible for external_dependencies on Monday. There are, unfortunately, beta external dependencies. Also, I'd have to verify that the SemVer.ps1 does correctly parse all of the external dependency versions first as Maven is a bit more liberal with what it allows for versions.", "author": "JimSuplizio", "createdAt": "2020-05-08T23:55:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM5Nzg1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzIyMzc1OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10961#discussion_r423223758", "bodyText": "I hope we don't depend on external prereleases in our GA packages that will definitely be a recipe for potential disaster.", "author": "weshaggard", "createdAt": "2020-05-11T18:07:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM5Nzg1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzg1ODAzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10961#discussion_r423858031", "bodyText": "We do but only in a  scope. I'm less concerned about external dependencies since the maven-enforcer-plugin was added and every dependency is now being scrutinized (track 2 only though).", "author": "JimSuplizio", "createdAt": "2020-05-12T16:10:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM5Nzg1NA=="}], "type": "inlineReview"}]}