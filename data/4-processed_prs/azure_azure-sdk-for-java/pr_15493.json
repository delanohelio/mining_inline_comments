{"pr_number": 15493, "pr_title": "Add Release Notes collect changelog script Java", "pr_createdAt": "2020-09-22T20:43:18Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/15493", "timeline": [{"oid": "48e62d3db87e24e13760f13f21a06d1b0f5dbc24", "url": "https://github.com/Azure/azure-sdk-for-java/commit/48e62d3db87e24e13760f13f21a06d1b0f5dbc24", "message": "add collect changelog java", "committedDate": "2020-09-22T20:34:24Z", "type": "commit"}, {"oid": "19b660bd7b952e3ffe44e08a9effbe000649bcb7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/19b660bd7b952e3ffe44e08a9effbe000649bcb7", "message": "remove spring and resourcemanager directory changelogs", "committedDate": "2020-09-28T06:10:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI4NTU5Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15493#discussion_r496285592", "bodyText": "Do you plan to call this manually and filter it down to just the set of packages you are interested in?", "author": "weshaggard", "createdAt": "2020-09-28T23:14:04Z", "path": "eng/scripts/Collect-Changelogs.ps1", "diffHunk": "@@ -0,0 +1,48 @@\n+[CmdletBinding()]\n+param(\n+  [Parameter(Mandatory=$true)]\n+  [ValidateRange(1, 12)]\n+  [int] $Month\n+)\n+\n+$repoRoot = Resolve-Path \"$PSScriptRoot/../..\";\n+. ${repoRoot}\\eng\\common\\scripts\\SemVer.ps1\n+. ${repoRoot}\\eng\\common\\scripts\\ChangeLog-Operations.ps1\n+$InstallNotes = \"\";\n+$ReleaseNotes = \"\";\n+\n+$date = Get-Date -Month $month -Format \"yyyy-MM\"\n+$date += \"-\\d\\d\"\n+\n+Get-ChildItem \"$repoRoot/sdk\" -Filter CHANGELOG.md -Recurse | Sort-Object -Property Name | % {\n+\n+    $changeLogEntries = Get-ChangeLogEntries -ChangeLogLocation $_\n+    $package = $_.Directory.Name\n+    $serviceDirectory = $_.Directory.Parent.Name\n+    if ($serviceDirectory -ne \"resourcemanager\" -and $serviceDirectory -ne \"spring\") {\n+        foreach ($changeLogEntry in $changeLogEntries.Values)\n+        {\n+            if ($changeLogEntry.ReleaseStatus -notmatch $date)\n+            {\n+\n+                continue;\n+            }\n+\n+            $version = $changeLogEntry.ReleaseVersion\n+            $githubAnchor = $changeLogEntry.ReleaseTitle.Replace(\"## \", \"\").Replace(\".\", \"\").Replace(\"(\", \"\").Replace(\")\", \"\").Replace(\" \", \"-\")\n+            $TextInfo = (Get-Culture).TextInfo\n+            $changelogTitle = $TextInfo.ToTitleCase($package.Replace(\"-\", \" \"))\n+\n+            $InstallNotes += \"<dependency>`n  <groupId>com.azure</groupId>`n  <artifactId>$package</artifactId>`n  <version>$version</version>`n</dependency>`n`n\";\n+            $ReleaseNotes += \"### $changelogTitle $version [Changelog](https://github.com/Azure/azure-sdk-for-java/blob/master/sdk/$serviceDirectory/$package/CHANGELOG.md#$githubAnchor)`n\"\n+            $changeLogEntry.ReleaseContent | %{\n+\n+                $ReleaseNotes += $_.Replace(\"###\", \"####\")\n+                $ReleaseNotes += \"`n\"\n+            }\n+            $ReleaseNotes += \"`n\"\n+        }\n+    }\n+}\n+\n+return $InstallNotes, $ReleaseNotes", "originalCommit": "19b660bd7b952e3ffe44e08a9effbe000649bcb7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI5MDM2MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15493#discussion_r496290360", "bodyText": "Yes, currently that is the plan.", "author": "samvaity", "createdAt": "2020-09-28T23:29:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI4NTU5Mg=="}], "type": "inlineReview"}]}