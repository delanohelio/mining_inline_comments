{"pr_number": 17041, "pr_title": "Added collapsible GA and Preview in each artifact.", "pr_createdAt": "2020-10-31T01:09:47Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/17041", "timeline": [{"oid": "e5375db78ed29f66fc0b962aaab0f7c5f1e1f773", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e5375db78ed29f66fc0b962aaab0f7c5f1e1f773", "message": "Added collapsible GA and Preview in each artifact.", "committedDate": "2020-10-31T01:04:09Z", "type": "commit"}, {"oid": "3680e2d736b9ca0b043c99e71b6da063a7b56961", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3680e2d736b9ca0b043c99e71b6da063a7b56961", "message": "Added check on preview", "committedDate": "2020-10-31T01:09:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQzNzgwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r515437809", "bodyText": "For testing purpose, will revert the change once ready to merge", "author": "sima-zhu", "createdAt": "2020-10-31T01:10:53Z", "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -98,9 +98,9 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     $DocOutDir = \"${RepoRoot}/docfx_project\"\n \n     LogDebug \"Initializing Default DocFx Site...\"\n-    & $($DocFx) init -q -o \"${DocOutDir}\"\n+    #& $($DocFx) init -q -o \"${DocOutDir}\"\n     # The line below is used for testing in local\n-    #docfx init -q -o \"${DocOutDir}\"\n+    docfx init -q -o \"${DocOutDir}\"", "originalCommit": "3680e2d736b9ca0b043c99e71b6da063a7b56961", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "69ffb6851dcfa1e58719fa7fe26d5b903c87cad8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/69ffb6851dcfa1e58719fa7fe26d5b903c87cad8", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into followup_fix", "committedDate": "2020-11-10T18:15:12Z", "type": "commit"}, {"oid": "f6abe141a6a77184b20b0cb9e3d9c1babf0d12b1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f6abe141a6a77184b20b0cb9e3d9c1babf0d12b1", "message": "Make a change to the UI look", "committedDate": "2020-11-10T20:46:38Z", "type": "commit"}, {"oid": "2f9c8197acf97d43132b014320a7c89b5b8eb8ed", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2f9c8197acf97d43132b014320a7c89b5b8eb8ed", "message": "Revert testing changes", "committedDate": "2020-11-10T20:51:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU4NDM2NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r521584365", "bodyText": "If GA or preview is missing lets just not show that list item. Also lets not add any text just have the version link.", "author": "weshaggard", "createdAt": "2020-11-11T19:20:44Z", "path": "eng/docgeneration/templates/matthews/styles/main.js", "diffHunk": "@@ -78,24 +79,62 @@ function httpGetAsync(targetUrl, callback) {\n }\n \n function populateIndexList(selector, packageName) {\n-    url = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/versions\"\n-\n-    httpGetAsync(url, function (responseText) {\n-\n-        var publishedversions = document.createElement(\"ul\")\n+    var url = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/versions\"\n+    var latestGAUrl = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/latest-ga\"", "originalCommit": "2f9c8197acf97d43132b014320a7c89b5b8eb8ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU4NDkzNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r521584937", "bodyText": "Lets see if we can make the other versions text align with the other list bullets.", "author": "weshaggard", "createdAt": "2020-11-11T19:21:52Z", "path": "eng/docgeneration/templates/matthews/styles/main.js", "diffHunk": "@@ -78,24 +79,62 @@ function httpGetAsync(targetUrl, callback) {\n }\n \n function populateIndexList(selector, packageName) {\n-    url = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/versions\"\n-\n-    httpGetAsync(url, function (responseText) {\n-\n-        var publishedversions = document.createElement(\"ul\")\n+    var url = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/versions\"\n+    var latestGAUrl = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/latest-ga\"\n+    var latestPreviewUrl = \"https://azuresdkdocs.blob.core.windows.net/$web/\" + SELECTED_LANGUAGE + \"/\" + packageName + \"/versioning/latest-preview\"\n+    var latestVersions = document.createElement(\"ul\")\n+    httpGetAsync(latestGAUrl, function (responseText) {\n         if (responseText) {\n-            options = responseText.match(/[^\\r\\n]+/g)\n-\n-            for (var i in options) {\n-                $(publishedversions).append('<li><a href=\"' + getPackageUrl(SELECTED_LANGUAGE, packageName, options[i]) + '\" target=\"_blank\">' + options[i] + '</a></li>')\n-            }\n+            version = responseText.match(/[^\\r\\n]+/g)\n+            $(latestVersions).append('<li><a href=\"' + getPackageUrl(SELECTED_LANGUAGE, packageName, version) + '\" target=\"_blank\">' + 'Latest GA Version: ' + version + '</a></li>')\n         }\n         else {\n-            $(publishedversions).append('<li>No discovered versions present in blob storage.</li>')\n+            $(latestVersions).append('<li>No latest GA versions found.</li>')\n+        }                \n+    })\n+    httpGetAsync(latestPreviewUrl, function (responseText) {\n+        if (responseText) {\n+            version = responseText.match(/[^\\r\\n]+/g)\n+            $(latestVersions).append('<li><a href=\"' + getPackageUrl(SELECTED_LANGUAGE, packageName, version) + '\" target=\"_blank\">' + 'Latest Preview Version: ' + version + '</a></li>')\n         }\n-\n-        $(selector).after(publishedversions)\n+        else {\n+            $(latestVersions).append('<li>No latest Preview versions found.</li>')\n+        }                \n     })\n+    var publishedVersions = $('<ul style=\"display: none;\"></ul>')", "originalCommit": "2f9c8197acf97d43132b014320a7c89b5b8eb8ed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjUwNzAxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r522507013", "bodyText": "Done.", "author": "sima-zhu", "createdAt": "2020-11-12T23:38:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTU4NDkzNw=="}], "type": "inlineReview"}, {"oid": "5d10c74198aad90842c30d177439a4c21766ef21", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5d10c74198aad90842c30d177439a4c21766ef21", "message": "adjust the version arrow position.", "committedDate": "2020-11-12T23:36:06Z", "type": "commit"}, {"oid": "edda34232ac84af243c89d1ffaf1e3ec9082c7f6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/edda34232ac84af243c89d1ffaf1e3ec9082c7f6", "message": "More adjustment", "committedDate": "2020-11-12T23:40:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjUxNzIyNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r522517224", "bodyText": "orthogonal but I'm curious why you don't just remove these and just pass docfx as a parameter?", "author": "weshaggard", "createdAt": "2020-11-12T23:59:55Z", "path": "eng/docgeneration/Generate-DocIndex.ps1", "diffHunk": "@@ -134,9 +134,9 @@ function GenerateDocfxTocContent([Hashtable]$tocContent, [String]$lang) {\n     Copy-Item \"$($RepoRoot)/CONTRIBUTING.md\" -Destination \"${DocOutDir}/api/CONTRIBUTING.md\" -Force\n \n     LogDebug \"Building site...\"\n-    & $($DocFx) build \"${DocOutDir}/docfx.json\"\n+    #& $($DocFx) build \"${DocOutDir}/docfx.json\"", "originalCommit": "edda34232ac84af243c89d1ffaf1e3ec9082c7f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjUxOTkwMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17041#discussion_r522519901", "bodyText": "It is better to pass the docfx path in my local run. I am using nuget and npm command to install docfx commands. Have some trouble to find the right path. The best approach is to pass the path as an argument.", "author": "sima-zhu", "createdAt": "2020-11-13T00:08:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjUxNzIyNA=="}], "type": "inlineReview"}, {"oid": "073cb1c630b6303e7b1d12245642f563ad1d4e65", "url": "https://github.com/Azure/azure-sdk-for-java/commit/073cb1c630b6303e7b1d12245642f563ad1d4e65", "message": "comment back the docfx command", "committedDate": "2020-11-13T00:09:38Z", "type": "commit"}]}