{"pr_number": 12320, "pr_title": "Fix CopyAuthorization.expiresOn to return OffsetDateTime", "pr_createdAt": "2020-06-18T06:34:15Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/12320", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAwMDc0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r442000745", "bodyText": "@srnagar Was wondering if something like this could work, where we convert the long value to OffsetDateTime in the getter only?\nAs we still need the JsonProperty to be a long value for serializing to expirationDateTimeTicks here", "author": "samvaity", "createdAt": "2020-06-18T06:41:34Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/CopyAuthorization.java", "diffHunk": "@@ -92,8 +95,8 @@ public String getAccessToken() {\n      *\n      * @return the {@code expiresOn} value.\n      */\n-    public long getExpiresOn() {\n-        return this.expiresOn;\n+    public OffsetDateTime getExpiresOn() {", "originalCommit": "44f6e0b52fe3203626036adcd48170b715cc0640", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQyMjQ1MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r442422450", "bodyText": "This is an autogenerated class. It shouldn't be modified.", "author": "srnagar", "createdAt": "2020-06-18T18:29:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAwMDc0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQyNDYxMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r442424612", "bodyText": "From discussion offline, it seems like this is not an autogenerate class. Fix the license header for this file.\nConverting long to UTC OffsetDateTime type is fine but it should be done in the constructor once insted of doing it every time this method is called. Also, fix the javadoc for this method.", "author": "srnagar", "createdAt": "2020-06-18T18:34:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAwMDc0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMxMDk1MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r442310950", "bodyText": "Since this is now unmodifiableList , we may want to document this in java doc for its getter @\n\n  \n    \n      azure-sdk-for-java/sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/BoundingBox.java\n    \n    \n         Line 41\n      in\n      44f6e0b\n    \n    \n    \n    \n\n        \n          \n           public List<Point> getPoints() {", "author": "hemanttanwar", "createdAt": "2020-06-18T15:25:08Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/BoundingBox.java", "diffHunk": "@@ -24,7 +26,11 @@\n      * @param points The list of coordinates of the Bounding box.\n      */\n     public BoundingBox(final List<Point> points) {\n-        this.points = points;\n+        if (points == null) {\n+            this.points = null;\n+        } else {\n+            this.points = Collections.unmodifiableList(new ArrayList<>(points));\n+        }", "originalCommit": "44f6e0b52fe3203626036adcd48170b715cc0640", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMxMTkzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r442311938", "bodyText": "is this mcn by mistake ?", "author": "hemanttanwar", "createdAt": "2020-06-18T15:26:29Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/CustomFormModel.java", "diffHunk": "@@ -72,12 +74,13 @@ public CustomFormModel(final String modelId, final CustomFormModelStatus modelSt\n         this.requestedOn = requestedOn;\n         this.completedOn = completedOn;\n         this.submodels = submodels;\n-        this.modelError = modelError;\n-        this.trainingDocuments = trainingDocuments;\n+        this.modelError = modelError == null ? null : Collections.unmodifiableList(new ArrayList<>(modelError));\n+        this.trainingDocuments = trainingDocuments == null ? null\n+            : Collections.unmodifiableList(new ArrayList<>(trainingDocuments));\n     }\n \n     /**\n-     * Get the Model identifier.\n+     * Get the Model identifier.mcn\n      *", "originalCommit": "44f6e0b52fe3203626036adcd48170b715cc0640", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMxNDI3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r442314272", "bodyText": "Would it make sense to use !CoreUtils.isNullOrEmpty(errorInformationList) , that will also check for null ?", "author": "hemanttanwar", "createdAt": "2020-06-18T15:29:51Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/FormRecognizerException.java", "diffHunk": "@@ -25,14 +27,15 @@\n     public FormRecognizerException(final String message, final List<ErrorInformation> errorInformationList) {\n         super(message);\n         StringBuilder errorInformationStringBuilder = new StringBuilder().append(message);\n-        if (errorInformationList.size() > 0) {\n+        if (!errorInformationList.isEmpty()) {", "originalCommit": "44f6e0b52fe3203626036adcd48170b715cc0640", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c2060b4c0cb32b8e884e78e4edaf5922e8d37029", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c2060b4c0cb32b8e884e78e4edaf5922e8d37029", "message": "update deserializer, review comments", "committedDate": "2020-06-18T21:33:46Z", "type": "forcePushed"}, {"oid": "3bb254eb844950684506cc3b0eda9a5ac7faf8ae", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3bb254eb844950684506cc3b0eda9a5ac7faf8ae", "message": "update deserializer, review comments", "committedDate": "2020-06-18T21:49:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAxMDU4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r443010587", "bodyText": "Don't need to create a new ArrayList here.", "author": "srnagar", "createdAt": "2020-06-19T19:28:39Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/BoundingBox.java", "diffHunk": "@@ -24,13 +26,17 @@\n      * @param points The list of coordinates of the Bounding box.\n      */\n     public BoundingBox(final List<Point> points) {\n-        this.points = points;\n+        if (points == null) {\n+            this.points = null;\n+        } else {\n+            this.points = Collections.unmodifiableList(new ArrayList<>(points));", "originalCommit": "3bb254eb844950684506cc3b0eda9a5ac7faf8ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAxMTQ1Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r443011456", "bodyText": "Same here - don't have to create a new ArrayList. Do the same in all other places too.", "author": "srnagar", "createdAt": "2020-06-19T19:30:59Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/CustomFormModel.java", "diffHunk": "@@ -70,9 +72,10 @@ public CustomFormModel(final String modelId, final CustomFormModelStatus modelSt\n         this.modelStatus = modelStatus;\n         this.requestedOn = requestedOn;\n         this.completedOn = completedOn;\n-        this.submodels = submodels;\n-        this.modelError = modelError;\n-        this.trainingDocuments = trainingDocuments;\n+        this.submodels = submodels == null ? null : Collections.unmodifiableList(new ArrayList<>(submodels));\n+        this.modelError = modelError == null ? null : Collections.unmodifiableList(new ArrayList<>(modelError));\n+        this.trainingDocuments = trainingDocuments == null ? null\n+            : Collections.unmodifiableList(new ArrayList<>(trainingDocuments));", "originalCommit": "3bb254eb844950684506cc3b0eda9a5ac7faf8ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAxMTczOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r443011739", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    this.fields = fields == null ? null : Collections.unmodifiableMap(new HashMap<>(fields));\n          \n          \n            \n                    this.fields = fields == null ? null : Collections.unmodifiableMap(fields);", "author": "srnagar", "createdAt": "2020-06-19T19:31:49Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/CustomFormSubmodel.java", "diffHunk": "@@ -40,7 +42,7 @@\n     public CustomFormSubmodel(final Float accuracy, final Map<String, CustomFormModelField> fields,\n         final String formType) {\n         this.accuracy = accuracy;\n-        this.fields = fields;\n+        this.fields = fields == null ? null : Collections.unmodifiableMap(new HashMap<>(fields));", "originalCommit": "3bb254eb844950684506cc3b0eda9a5ac7faf8ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7c4edc607f6eb5854a5fbfd68e6060dba03b087b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7c4edc607f6eb5854a5fbfd68e6060dba03b087b", "message": "don't create a new list", "committedDate": "2020-06-23T18:17:52Z", "type": "forcePushed"}, {"oid": "fc8e39bc8eebf19e47682806c0eb7588b7533fc5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc8e39bc8eebf19e47682806c0eb7588b7533fc5", "message": "update expiresOn to Datetime, unmodifiable", "committedDate": "2020-06-23T18:20:50Z", "type": "commit"}, {"oid": "cfee15ffd1f25cf48e14e4b440c3f015ffc5a2af", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cfee15ffd1f25cf48e14e4b440c3f015ffc5a2af", "message": "update deserializer, review comments", "committedDate": "2020-06-23T18:21:04Z", "type": "commit"}, {"oid": "d6340b30d33af6c983d0a574d9d35a876cdfc167", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d6340b30d33af6c983d0a574d9d35a876cdfc167", "message": "don't create a new list", "committedDate": "2020-06-23T18:21:06Z", "type": "commit"}, {"oid": "d6340b30d33af6c983d0a574d9d35a876cdfc167", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d6340b30d33af6c983d0a574d9d35a876cdfc167", "message": "don't create a new list", "committedDate": "2020-06-23T18:21:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ0Nzg0Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r444447847", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return the unmodifiable of the documents used to train the model.\n          \n          \n            \n                 * @return the unmodifiable list of documents used to train the model.", "author": "mssfang", "createdAt": "2020-06-23T19:11:05Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/CustomFormModel.java", "diffHunk": "@@ -133,7 +136,7 @@ public OffsetDateTime getCompletedOn() {\n     /**\n      * Get the list of the documents used to train the model and any errors reported in each document.\n      *\n-     * @return the {@code trainingDocuments} value.\n+     * @return the unmodifiable of the documents used to train the model.", "originalCommit": "d6340b30d33af6c983d0a574d9d35a876cdfc167", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ1NzE3Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r444457177", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Get the List of words in the text line.\n          \n          \n            \n                 * Get the list of words in the text line.", "author": "mssfang", "createdAt": "2020-06-23T19:29:00Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/FormLine.java", "diffHunk": "@@ -30,13 +32,13 @@\n     public FormLine(String text, BoundingBox boundingBox, Integer pageNumber,\n         final List<FormWord> formWords) {\n         super(text, boundingBox, pageNumber);\n-        this.formWords = formWords;\n+        this.formWords = formWords == null ? null : Collections.unmodifiableList(formWords);\n     }\n \n     /**\n-     * Get the words property: List of words in the text line.\n+     * Get the List of words in the text line.", "originalCommit": "d6340b30d33af6c983d0a574d9d35a876cdfc167", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2MzMxNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r444463315", "bodyText": "I would use change instead of fix", "author": "maririos", "createdAt": "2020-06-23T19:41:10Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/CHANGELOG.md", "diffHunk": "@@ -2,13 +2,14 @@\n \n ## 1.0.0-beta.4 (Unreleased)\n ### Breaking Changes\n+- Fix `CopyAuthorization.getExpiresOn()` to return a `OffsetDateTime` instead of a `long` value", "originalCommit": "d6340b30d33af6c983d0a574d9d35a876cdfc167", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2NDIyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r444464222", "bodyText": "nice!", "author": "maririos", "createdAt": "2020-06-23T19:42:50Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/CopyAuthorization.java", "diffHunk": "@@ -65,7 +71,8 @@ public CopyAuthorization(final String modelId, final String accessToken, final S\n         this.accessToken = accessToken;\n         this.resourceId = resourceId;\n         this.resourceRegion = resourceRegion;\n-        this.expiresOn = expiresOn;\n+        this.expirationDateTimeTicks = expiresOn;\n+        this.expiresOn = OffsetDateTime.ofInstant(Instant.ofEpochMilli(expiresOn), ZoneOffset.UTC);", "originalCommit": "d6340b30d33af6c983d0a574d9d35a876cdfc167", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ2NDYyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r444464621", "bodyText": "maybe remove the last part for the comment as it is now a date and not the seconds?", "author": "maririos", "createdAt": "2020-06-23T19:43:41Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/CopyAuthorization.java", "diffHunk": "@@ -87,12 +94,12 @@ public String getAccessToken() {\n     }\n \n     /**\n-     * Get the time when the access token expires. The date is represented as the\n+     * Get the date-time when the access token expires. The date is represented as the", "originalCommit": "d6340b30d33af6c983d0a574d9d35a876cdfc167", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d8c2dd3efc6d408ca1e7302c3e543d4405a2ad2b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d8c2dd3efc6d408ca1e7302c3e543d4405a2ad2b", "message": "review comments", "committedDate": "2020-06-23T19:49:58Z", "type": "commit"}, {"oid": "45ddc64eab5bdc0294d72998d1689c1c26864df0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/45ddc64eab5bdc0294d72998d1689c1c26864df0", "message": "checkstyle", "committedDate": "2020-06-23T20:25:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwMjM3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r444502375", "bodyText": "immutable?", "author": "kristapratico", "createdAt": "2020-06-23T20:55:14Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/BoundingBox.java", "diffHunk": "@@ -24,13 +25,17 @@\n      * @param points The list of coordinates of the Bounding box.\n      */\n     public BoundingBox(final List<Point> points) {\n-        this.points = points;\n+        if (points == null) {\n+            this.points = null;\n+        } else {\n+            this.points = Collections.unmodifiableList(points);\n+        }\n     }\n \n     /**\n      * Gets the list of all point coordinates of the bounding box.\n      *\n-     * @return The list of all point coordinates of the Bounding box.\n+     * @return The unmodifiable list of all point coordinates of the Bounding box.", "originalCommit": "45ddc64eab5bdc0294d72998d1689c1c26864df0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwOTkyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r444509922", "bodyText": "unmodifiable is more of a Java keyword to help understand what we do underneath.", "author": "samvaity", "createdAt": "2020-06-23T21:09:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwMjM3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwNDE5OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12320#discussion_r444504199", "bodyText": "what is ExtractedField? It seems like old naming we had", "author": "kristapratico", "createdAt": "2020-06-23T20:57:40Z", "path": "sdk/formrecognizer/azure-ai-formrecognizer/src/main/java/com/azure/ai/formrecognizer/models/FormWord.java", "diffHunk": "@@ -10,14 +10,16 @@\n  */\n @Immutable\n public final class FormWord extends FormContent {\n+\n     /*\n      * The confidence value of the recognized word.\n      */\n     private final float confidence;\n \n     /**\n      * Creates raw OCR item.\n-     *  @param text The text content of ExtractedField.\n+     *\n+     * @param text The text content of ExtractedField.", "originalCommit": "45ddc64eab5bdc0294d72998d1689c1c26864df0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}