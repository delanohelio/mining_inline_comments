{"pr_number": 17584, "pr_title": "Add From Source Test Run to Live Tests", "pr_createdAt": "2020-11-14T00:11:11Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/17584", "timeline": [{"oid": "a55b0d0c8b3f7295a27621aed221214ce2ed4638", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a55b0d0c8b3f7295a27621aed221214ce2ed4638", "message": "Add From Source test run to live tests", "committedDate": "2020-11-14T00:10:32Z", "type": "commit"}, {"oid": "c7ce1f1f751488925e1b1fe7a2f9981acfad2f00", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c7ce1f1f751488925e1b1fe7a2f9981acfad2f00", "message": "Add From Source to matrix", "committedDate": "2020-11-14T00:12:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4MTU4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17584#discussion_r526481587", "bodyText": "Was this broken before?", "author": "weshaggard", "createdAt": "2020-11-18T23:03:43Z", "path": "eng/pipelines/templates/jobs/archetype-sdk-tests.yml", "diffHunk": "@@ -103,16 +109,36 @@ jobs:\n         parameters:\n           Artifacts: ${{parameters.Artifacts}}\n           AdditionalModules: ${{parameters.AdditionalModules}}\n+      \n+      - task: UsePythonVersion@0\n+        displayName: 'Use Python 3.6'\n+        inputs:\n+          versionSpec: '3.6'\n+        condition: and(succeeded(), eq(variables['TestFromSource'],'true'))\n+\n+      - task: PythonScript@0\n+        displayName: 'Set versions for source build'\n+        inputs:\n+          scriptPath: 'eng/versioning/set_versions.py'\n+          arguments: '--build-type client --pst'\n+        condition: and(succeeded(), eq(variables['TestFromSource'],'true'))\n+\n+      - task: PythonScript@0\n+        displayName: 'Update versions for source build'\n+        inputs:\n+          scriptPath: 'eng/versioning/update_versions.py'\n+          arguments: '--update-type library --build-type client --sr'\n+        condition: and(succeeded(), eq(variables['ShouldRunSourceTests'],'true'))\n \n       - task: Maven@3\n-        displayName: 'Build and Install, JDK Version: $(JavaBuildVersion)'\n+        displayName: 'Build and Install, JDK Version: $(JavaTestVersion)'\n         inputs:\n           mavenPomFile: pom.xml\n           goals: 'install'\n-          options: '$(DefaultOptions) -DskipTests -Dgpg.skip -Dmaven.javadoc.skip=true -Dcheckstyle.skip=true -Dspotbugs.skip=true -Drevapi.skip=true -pl $(ProjectList) -am'\n+          options: '$(DefaultOptions) -T 1C -DskipTests -Dgpg.skip -Dmaven.javadoc.skip=true -Dcheckstyle.skip=true -Dspotbugs.skip=true -Drevapi.skip=true -pl $(ProjectList) -am'\n           mavenOptions: '$(MemoryOptions) $(LoggingOptions)'\n           javaHomeOption: 'JDKVersion'\n-          jdkVersionOption: $(JavaBuildVersion)\n+          jdkVersionOption: $(JavaTestVersion)", "originalCommit": "c7ce1f1f751488925e1b1fe7a2f9981acfad2f00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjUwMTkyNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17584#discussion_r526501927", "bodyText": "We were always building with Java 11 which resulted in the Java 8 runs needing to compile twice as the compiler version changed. Unfortunately, I'm not explicitly certain on why this was done.", "author": "alzimmermsft", "createdAt": "2020-11-18T23:58:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4MTU4Nw=="}], "type": "inlineReview"}]}