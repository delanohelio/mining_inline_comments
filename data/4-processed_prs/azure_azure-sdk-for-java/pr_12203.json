{"pr_number": 12203, "pr_title": "Support GeoJSON", "pr_createdAt": "2020-06-15T20:53:38Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/12203", "timeline": [{"oid": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b90b826c575b35f46b11fb7070c475a84d9f0f8e", "message": "Model classes for GeoJSON", "committedDate": "2020-06-15T20:34:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NTEzNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440485137", "bodyText": "Does the spec call it CollectionGeometry, or is this just your choice? GeometryCollection would make more sense otherwise?", "author": "JonathanGiles", "createdAt": "2020-06-15T22:37:55Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/CollectionGeometry.java", "diffHunk": "@@ -0,0 +1,43 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+import java.util.Collection;\n+import java.util.Collections;\n+\n+/**\n+ * Represents a heterogeneous collection of {@link Geometry geometries}.\n+ */\n+public final class CollectionGeometry extends Geometry {", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NTQ3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440485479", "bodyText": "Also, is it weird to anyone else that a CollectionGeometry is a Geometry?", "author": "JonathanGiles", "createdAt": "2020-06-15T22:38:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NTEzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ5MzkzNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440493937", "bodyText": "It is a bit weird but it follows in the definition of the RFC. https://tools.ietf.org/html/rfc7946#section-3", "author": "alzimmermsft", "createdAt": "2020-06-15T23:05:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NTEzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyODM5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440528391", "bodyText": "Ok - but you'll rename this to GeometryCollection?", "author": "JonathanGiles", "createdAt": "2020-06-16T01:04:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NTEzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwNDQ0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441004449", "bodyText": "I think I'm going to keep the name as is for the reason that all other Geometry sub types are using the naming pattern <Type>Geometry (PointGeometry, PolygonGeometry). Switching this to GeometryCollection would cause it to be the only one which goes against that pattern.", "author": "alzimmermsft", "createdAt": "2020-06-16T16:59:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NTEzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NTY1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440485654", "bodyText": "Collection isn't the most useful type in Java - should we do something more useful, such as List or Set?", "author": "JonathanGiles", "createdAt": "2020-06-15T22:39:27Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/CollectionGeometry.java", "diffHunk": "@@ -0,0 +1,43 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+import java.util.Collection;\n+import java.util.Collections;\n+\n+/**\n+ * Represents a heterogeneous collection of {@link Geometry geometries}.\n+ */\n+public final class CollectionGeometry extends Geometry {\n+    private final Collection<Geometry> geometries;\n+\n+    /**\n+     * Constructs a geometry collection.\n+     *\n+     * @param geometries The geometries in the collection.\n+     */\n+    public CollectionGeometry(Collection<Geometry> geometries) {", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ5NDIwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440494206", "bodyText": "I'll change this to a list.", "author": "alzimmermsft", "createdAt": "2020-06-15T23:05:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NTY1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NjI4NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440486284", "bodyText": "Should there be validation on these values?", "author": "JonathanGiles", "createdAt": "2020-06-15T22:41:06Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/GeometryBoundingBox.java", "diffHunk": "@@ -0,0 +1,103 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+/**\n+ * Represents a geometric bounding box.\n+ */\n+public final class GeometryBoundingBox {\n+    private final double west;\n+    private final double south;\n+    private final double east;\n+    private final double north;\n+\n+    private final Double minAltitude;\n+    private final Double maxAltitude;\n+\n+    /**\n+     * Constructs a bounding box.\n+     *\n+     * @param west West longitudinal boundary.\n+     * @param south South latitudinal boundary.\n+     * @param east East longitudinal boundary.\n+     * @param north North latitudinal boundary.\n+     */\n+    public GeometryBoundingBox(double west, double south, double east, double north) {\n+        this(west, south, east, north, null, null);\n+    }\n+\n+    /**\n+     * Constructs a bounding box.\n+     *\n+     * @param west West longitudinal boundary.\n+     * @param south South latitudinal boundary.\n+     * @param east East longitudinal boundary.\n+     * @param north North latitudinal boundary.\n+     * @param minAltitude Minimum altitude boundary.\n+     * @param maxAltitude Maximum altitude boundary.\n+     */\n+    public GeometryBoundingBox(double west, double south, double east, double north, Double minAltitude,\n+        Double maxAltitude) {", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ5NjUyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440496529", "bodyText": "Could be, west/east are longitudes which should be between +/- 180, south/north are latitudes which should be between +/- 90.", "author": "alzimmermsft", "createdAt": "2020-06-15T23:13:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NjI4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwNDQ1Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441004453", "bodyText": "I wouldn't do any extra validation here. These values can be in meters too. We should keep these object as much of DTOs as possible and let services to the validation.", "author": "pakrym", "createdAt": "2020-06-16T16:59:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NjI4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwNTM5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441005397", "bodyText": "This raises the question on whether we should validate additional constructors as well. For example a polygon type the first and last point in its points need to be the same coordinate, crossing the anti-meridian requires changing type (line to multi-line). The other option is keeping validation localized to simple scenarios such as this.", "author": "alzimmermsft", "createdAt": "2020-06-16T17:01:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NjI4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMDA1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441010051", "bodyText": "I avoided any validation all together, send whatever customer puts into the object and exposed whatever service returned. We don't implement any operations on geometries on the client side so we don't care about data being valid in any way.", "author": "pakrym", "createdAt": "2020-06-16T17:09:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4NjI4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4Njc0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440486746", "bodyText": "I understand why you have Double type in these places, but I'm not super fond of it. I would wonder if we should have a boolean check that clarifies if it has been set or not.", "author": "JonathanGiles", "createdAt": "2020-06-15T22:42:22Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/GeometryPosition.java", "diffHunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+/**\n+ * Represents a geometric position.\n+ */\n+public final class GeometryPosition {\n+    private final double longitude;\n+    private final double latitude;\n+\n+    private final Double altitude;\n+\n+    /**\n+     * Constructs a geometric position.\n+     *\n+     * @param longitude Longitudinal position.\n+     * @param latitude Latitudinal position.\n+     */\n+    public GeometryPosition(double longitude, double latitude) {\n+        this(longitude, latitude, null);\n+    }\n+\n+    /**\n+     * Constructs a geometric position.\n+     *\n+     * @param longitude Longitudinal position.\n+     * @param latitude Latitudinal position.\n+     * @param altitude Altitude position.\n+     */\n+    public GeometryPosition(double longitude, double latitude, Double altitude) {\n+        this.longitude = longitude;\n+        this.latitude = latitude;\n+        this.altitude = altitude;\n+    }\n+\n+    /**\n+     * The longitudinal position of the geometric position.\n+     *\n+     * @return The longitudinal position.\n+     */\n+    public double getLongitude() {\n+        return longitude;\n+    }\n+\n+    /**\n+     * The latitudinal position of the geometric position.\n+     *\n+     * @return The latitudinal position.\n+     */\n+    public double getLatitude() {\n+        return latitude;\n+    }\n+\n+    /**\n+     * The altitude of the geometric position.\n+     *\n+     * @return The altitude.\n+     */\n+    public Double getAltitude() {", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwNjEzOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441006138", "bodyText": "I can add APIs such hasAltitude, hasMinAltitude, hasMaxAltitude for the scenarios where we have null-able geoposition data. Do you feel that these add enough benefit for having additional APIs?", "author": "alzimmermsft", "createdAt": "2020-06-16T17:02:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4Njc0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODA0Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440488042", "bodyText": "Do you think, rather than have all Geometry subclasses having a getProperties() method, that Geometry itself should just contain the content of the GeometryProperties class? It seems quite long-winded to get a property at present, because you firstly need to getProperties.", "author": "JonathanGiles", "createdAt": "2020-06-15T22:46:27Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/Geometry.java", "diffHunk": "@@ -0,0 +1,24 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+/**\n+ * An abstract representation of a geometry.\n+ */\n+public abstract class Geometry {\n+    private final GeometryProperties properties;\n+\n+    Geometry(GeometryProperties properties) {\n+        this.properties = properties;\n+    }\n+\n+    /**\n+     * Additional properties about this geometry.\n+     *\n+     * @return The additional properties associated with this geometry.\n+     */\n+    public GeometryProperties getProperties() {\n+        return properties;\n+    }", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwNzk0NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441007944", "bodyText": "Based on the RFC geometry is a concept which is a set of positions and optional bounding box and additional properties, so having this be in a superclass makes sense based on the definition. I could see removing GeometryProperties for its direct types of bounding box and additional properties, flattening the structure by a level.", "author": "alzimmermsft", "createdAt": "2020-06-16T17:05:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODA0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODMxNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440488315", "bodyText": "Is there a need for this ctor to be public - it seems like no sane user would need to call this? Also, should there be a ctor that takes just the bounding box?", "author": "JonathanGiles", "createdAt": "2020-06-15T22:47:21Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/GeometryProperties.java", "diffHunk": "@@ -0,0 +1,50 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+import java.util.Map;\n+\n+/**\n+ * Represents properties about a {@link Geometry}.\n+ */\n+public final class GeometryProperties {\n+    private final GeometryBoundingBox boundingBox;\n+    private final Map<String, Object> additionalProperties;\n+\n+    /**\n+     * Constructs an empty properties.\n+     */\n+    public GeometryProperties() {\n+        this(null, null);\n+    }", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMzQyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441013422", "bodyText": "It is better to use setter pattern in this class. Search is only asking additional properties.", "author": "sima-zhu", "createdAt": "2020-06-16T17:15:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODMxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAyMzY2OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441023669", "bodyText": "I'm thinking of removing this class and using its components directly in Geometry.", "author": "alzimmermsft", "createdAt": "2020-06-16T17:32:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODMxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE0MjI0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441142249", "bodyText": "Removed GeometryProperties.", "author": "alzimmermsft", "createdAt": "2020-06-16T21:06:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODMxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODQ1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440488451", "bodyText": "Should you make a copy of this map so that it can not be mutated after being set?", "author": "JonathanGiles", "createdAt": "2020-06-15T22:47:44Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/GeometryProperties.java", "diffHunk": "@@ -0,0 +1,50 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+import java.util.Map;\n+\n+/**\n+ * Represents properties about a {@link Geometry}.\n+ */\n+public final class GeometryProperties {\n+    private final GeometryBoundingBox boundingBox;\n+    private final Map<String, Object> additionalProperties;\n+\n+    /**\n+     * Constructs an empty properties.\n+     */\n+    public GeometryProperties() {\n+        this(null, null);\n+    }\n+\n+    /**\n+     * Constructs properties about a {@link Geometry}.\n+     *\n+     * @param boundingBox The bounding box for a geometry.\n+     * @param additionalProperties Addtional properties about a geometry.\n+     */\n+    public GeometryProperties(GeometryBoundingBox boundingBox, Map<String, Object> additionalProperties) {\n+        this.boundingBox = boundingBox;\n+        this.additionalProperties = additionalProperties;", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE0MjM4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441142386", "bodyText": "Making a deep copy now.", "author": "alzimmermsft", "createdAt": "2020-06-16T21:07:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODQ1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODcxMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440488712", "bodyText": "Make a defensive copy in the ctor rather than here, otherwise the positions can be changed by the user having a reference to the positions collection that they gave to you.", "author": "JonathanGiles", "createdAt": "2020-06-15T22:48:32Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/LineGeometry.java", "diffHunk": "@@ -0,0 +1,44 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+import java.util.Collection;\n+import java.util.Collections;\n+\n+/**\n+ * Represents a geometric line.\n+ */\n+public final class LineGeometry extends Geometry {\n+    private final Collection<GeometryPosition> positions;\n+\n+    /**\n+     * Constructs a geometric line.\n+     *\n+     * @param positions Geometric positions that define the line.\n+     */\n+    public LineGeometry(Collection<GeometryPosition> positions) {\n+        this(positions, null);\n+    }\n+\n+    /**\n+     * Constructs a geometric line.\n+     *\n+     * @param positions Geometric positions that define the line.\n+     * @param properties Additional properties of the geometric line.\n+     */\n+    public LineGeometry(Collection<GeometryPosition> positions, GeometryProperties properties) {\n+        super(properties);\n+        this.positions = positions;\n+    }\n+\n+    /**\n+     * Unmodifiable representation of the {@link GeometryPosition geometric positions} representing this line.\n+     *\n+     * @return An unmodifiable representation of the {@link GeometryPosition geometric positions} representing this\n+     * line.\n+     */\n+    public Collection<GeometryPosition> getPositions() {\n+        return Collections.unmodifiableCollection(positions);", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE0ODY4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441148687", "bodyText": "Adding defensive copies of the list in the constructor, also making the store list unmodifiable at the same time.", "author": "alzimmermsft", "createdAt": "2020-06-16T21:19:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODcxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODg5OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r440488899", "bodyText": "Don't forget to export through modules-info too", "author": "JonathanGiles", "createdAt": "2020-06-15T22:49:05Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/package-info.java", "diffHunk": "@@ -0,0 +1,7 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+/**\n+ * Package containing GeoJSON classes.\n+ */\n+package com.azure.core.spatial;", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwODIxOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441008218", "bodyText": "Added", "author": "alzimmermsft", "createdAt": "2020-06-16T17:06:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ4ODg5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTY1Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441011652", "bodyText": "Search use-case does not use altitude. So for serialization, this field is not required. Make sure the serializer will remove the field once it is null. Or make it optional.", "author": "sima-zhu", "createdAt": "2020-06-16T17:12:03Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/GeometryPosition.java", "diffHunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+/**\n+ * Represents a geometric position.\n+ */\n+public final class GeometryPosition {\n+    private final double longitude;\n+    private final double latitude;\n+\n+    private final Double altitude;", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAyMzMwMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441023303", "bodyText": "Since it is a Double it is optional, if it is set it will be included in the serialization. I don't know what the Search service will do if it is included though.", "author": "alzimmermsft", "createdAt": "2020-06-16T17:31:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTY1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0NjY1Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441046656", "bodyText": "There is a slightly chance to go wrong.\nIf sdk set the JsonInclude (JsonInclude(Include.ALWAYS)), then the serializer will include the field set to null.\nAlso, I am curious how would it be like for serialization.\nHere is what search looks like:\n\"type\":\"Point\",\"coordinates\":[-122.131577,47.678581]", "author": "sima-zhu", "createdAt": "2020-06-16T18:11:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTY1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA2NjU0MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441066541", "bodyText": "We'd better to assume service will throw error if you provide something unwanted in core spatial.", "author": "sima-zhu", "createdAt": "2020-06-16T18:42:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTY1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3MTI4NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441071285", "bodyText": "To make my point clear, if we set 'altitude' anyway in constructor, in some cases, we send out altitude even it sets to null.  (e.g. use JsonInclude(Include.ALWAYS)). So it is better to remove final and have setter to set the optional field.", "author": "sima-zhu", "createdAt": "2020-06-16T18:51:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTY1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3ODU2NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441078565", "bodyText": "These classes will be using a custom serializer and deserializer handler in Azure Core which won't include altitude if it is null. I've added them in the last commit.", "author": "alzimmermsft", "createdAt": "2020-06-16T19:04:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTY1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA4MzczOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441083738", "bodyText": "Just saw the commit. That solves the problem. Thanks!", "author": "sima-zhu", "createdAt": "2020-06-16T19:14:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTY1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxNTczNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441015734", "bodyText": "Does search need to provide specific serializer/deserializer for coordinate system?", "author": "sima-zhu", "createdAt": "2020-06-16T17:18:58Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/PointGeometry.java", "diffHunk": "@@ -0,0 +1,41 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+/**\n+ * Represents a geometric point.\n+ */\n+public final class PointGeometry extends Geometry {\n+    private final GeometryPosition position;\n+\n+    /**\n+     * Constructs a geometric point.\n+     *\n+     * @param position The {@link GeometryPosition geometric position} of the point.\n+     */\n+    public PointGeometry(GeometryPosition position) {\n+        this(position, null);\n+    }\n+\n+    /**\n+     * Constructs a geometric point.\n+     *\n+     * @param position The {@link GeometryPosition geometric position} of the point.\n+     * @param properties Additional properties of the geometric point.\n+     */\n+    public PointGeometry(GeometryPosition position, GeometryProperties properties) {", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAyMjQ3MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441022470", "bodyText": "Search shouldn't need to have a custom serializer/deserializer as they should be using the GeoJSON standard.", "author": "alzimmermsft", "createdAt": "2020-06-16T17:30:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxNTczNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAyNzI4MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441027281", "bodyText": "Search may need custom handling when using PointGeometry when setting an OData Edm.GeographyPoint.", "author": "alzimmermsft", "createdAt": "2020-06-16T17:38:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxNTczNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAyNDEwMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441024102", "bodyText": "Should the package be com.azure.core.models.spatial?", "author": "srnagar", "createdAt": "2020-06-16T17:32:57Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/CollectionGeometry.java", "diffHunk": "@@ -0,0 +1,43 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3MzA1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441073051", "bodyText": "Moved in latest commit.", "author": "alzimmermsft", "createdAt": "2020-06-16T18:54:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAyNDEwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzOTY2Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441039663", "bodyText": "Should this ctor be public to allow users/client libraries to extend from this?", "author": "srnagar", "createdAt": "2020-06-16T17:59:24Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/Geometry.java", "diffHunk": "@@ -0,0 +1,24 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+/**\n+ * An abstract representation of a geometry.\n+ */\n+public abstract class Geometry {\n+    private final GeometryProperties properties;\n+\n+    Geometry(GeometryProperties properties) {", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDAxMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441074010", "bodyText": "GeoJSON types are well-known and are expected to not be extended, https://tools.ietf.org/html/rfc7946#section-7.", "author": "alzimmermsft", "createdAt": "2020-06-16T18:56:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzOTY2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA1NzU4Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441057582", "bodyText": "The unmodifiable collection should be created in the ctor itself.", "author": "srnagar", "createdAt": "2020-06-16T18:26:53Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/CollectionGeometry.java", "diffHunk": "@@ -0,0 +1,43 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+import java.util.Collection;\n+import java.util.Collections;\n+\n+/**\n+ * Represents a heterogeneous collection of {@link Geometry geometries}.\n+ */\n+public final class CollectionGeometry extends Geometry {\n+    private final Collection<Geometry> geometries;\n+\n+    /**\n+     * Constructs a geometry collection.\n+     *\n+     * @param geometries The geometries in the collection.\n+     */\n+    public CollectionGeometry(Collection<Geometry> geometries) {\n+        this(geometries, null);\n+    }\n+\n+    /**\n+     * Constructs a geometry collection.\n+     *\n+     * @param geometries The geometries in the collection.\n+     * @param properties Additional properties of the geometry collection.\n+     */\n+    public CollectionGeometry(Collection<Geometry> geometries, GeometryProperties properties) {\n+        super(properties);\n+        this.geometries = geometries;\n+    }\n+\n+    /**\n+     * Unmodifiable representation of the {@link Geometry geometries} contained in this collection.\n+     *\n+     * @return An unmodifiable representation of the {@link Geometry geometries} in this collection.\n+     */\n+    public Collection<Geometry> getGeometries() {\n+        return Collections.unmodifiableCollection(geometries);", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE0ODQ1OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441148459", "bodyText": "Updating to make these list unmodifiable in the constructor.", "author": "alzimmermsft", "createdAt": "2020-06-16T21:19:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA1NzU4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA2MDE3MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441060170", "bodyText": "Do we want to make these model types final? Users or client libraries may want to extend these types.", "author": "srnagar", "createdAt": "2020-06-16T18:31:32Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/spatial/GeometryPosition.java", "diffHunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.spatial;\n+\n+/**\n+ * Represents a geometric position.\n+ */\n+public final class GeometryPosition {", "originalCommit": "b90b826c575b35f46b11fb7070c475a84d9f0f8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3Mzk3Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441073973", "bodyText": "GeoJSON types are well-known and are expected to not be extended, https://tools.ietf.org/html/rfc7946#section-7.", "author": "alzimmermsft", "createdAt": "2020-06-16T18:56:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA2MDE3MA=="}], "type": "inlineReview"}, {"oid": "288bf72e1ce125d71caa6228aa48e4d0658b979b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/288bf72e1ce125d71caa6228aa48e4d0658b979b", "message": "Added serializer and deserializer modules", "committedDate": "2020-06-16T18:37:21Z", "type": "commit"}, {"oid": "63aef4681e61b3556226985f4d404ccf8e1dbad7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/63aef4681e61b3556226985f4d404ccf8e1dbad7", "message": "Removed GeometryProperties class", "committedDate": "2020-06-16T20:16:57Z", "type": "commit"}, {"oid": "574f745b85c3f5482f6292c96244f00d26f686e0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/574f745b85c3f5482f6292c96244f00d26f686e0", "message": "Merge branch 'master' into AzCore_GeoJSON", "committedDate": "2020-06-16T21:09:59Z", "type": "commit"}, {"oid": "ae93115639b8b8660a56cafd729ce9e4b4b0ec0c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ae93115639b8b8660a56cafd729ce9e4b4b0ec0c", "message": "Defensively copy the geometries passed into constructors, storing geometries in unmodifiable data structures as well", "committedDate": "2020-06-16T21:20:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzI4Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441223283", "bodyText": "You shouldn't need the new ArrayList<>(..) here, geometries is already a List", "author": "JonathanGiles", "createdAt": "2020-06-17T01:04:26Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/CollectionGeometry.java", "diffHunk": "@@ -0,0 +1,52 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Represents a heterogeneous collection of {@link Geometry geometries}.\n+ */\n+public final class CollectionGeometry extends Geometry {\n+    private final List<Geometry> geometries;\n+\n+    /**\n+     * Constructs a geometry collection.\n+     *\n+     * @param geometries The geometries in the collection.\n+     * @throws NullPointerException If {@code geometries} is {@code null}.\n+     */\n+    public CollectionGeometry(List<Geometry> geometries) {\n+        this(geometries, null, null);\n+    }\n+\n+    /**\n+     * Constructs a geometry collection.\n+     *\n+     * @param geometries The geometries in the collection.\n+     * @param boundingBox Bounding box for the geometry collection.\n+     * @param properties Additional properties of the geometry collection.\n+     * @throws NullPointerException If {@code geometries} is {@code null}.\n+     */\n+    public CollectionGeometry(List<Geometry> geometries, GeometryBoundingBox boundingBox,\n+        Map<String, Object> properties) {\n+        super(boundingBox, properties);\n+\n+        Objects.requireNonNull(geometries, \"'geometries' cannot be null.\");\n+        this.geometries = Collections.unmodifiableList(new ArrayList<>(geometries));", "originalCommit": "ae93115639b8b8660a56cafd729ce9e4b4b0ec0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjUwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441232509", "bodyText": "This is done as the new ArrayList will copy the geometry references into an internal representation that the caller won't have a reference to, the latter is to make the representation that may be read unmodifiable.", "author": "alzimmermsft", "createdAt": "2020-06-17T01:40:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzI4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzUzOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441223539", "bodyText": "Collections.unmodifiableMap?", "author": "JonathanGiles", "createdAt": "2020-06-17T01:05:27Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/Geometry.java", "diffHunk": "@@ -0,0 +1,45 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.Collections;\n+import java.util.Map;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * An abstract representation of a geometry.\n+ */\n+public abstract class Geometry {\n+    private final GeometryBoundingBox boundingBox;\n+    private final Map<String, Object> properties;\n+\n+    Geometry(GeometryBoundingBox boundingBox, Map<String, Object> properties) {\n+        this.boundingBox = boundingBox;\n+\n+        if (properties == null) {\n+            this.properties = Collections.emptyMap();\n+        } else {\n+            this.properties = properties.entrySet().stream()\n+                .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));", "originalCommit": "ae93115639b8b8660a56cafd729ce9e4b4b0ec0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjYwNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441232604", "bodyText": "Good catch, I'll fix this in the next update when I add unit tests.", "author": "alzimmermsft", "createdAt": "2020-06-17T01:40:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzUzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzY4NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441223685", "bodyText": "Same comment here", "author": "JonathanGiles", "createdAt": "2020-06-17T01:06:01Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/LineGeometry.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Represents a geometric line.\n+ */\n+public final class LineGeometry extends Geometry {\n+    private final List<GeometryPosition> positions;\n+\n+    /**\n+     * Constructs a geometric line.\n+     *\n+     * @param positions Geometric positions that define the line.\n+     * @throws NullPointerException If {@code positions} is {@code null}.\n+     */\n+    public LineGeometry(List<GeometryPosition> positions) {\n+        this(positions, null, null);\n+    }\n+\n+    /**\n+     * Constructs a geometric line.\n+     *\n+     * @param positions Geometric positions that define the line.\n+     * @param boundingBox Bounding box for the line.\n+     * @param properties Additional properties of the geometric line.\n+     * @throws NullPointerException If {@code positions} is {@code null}.\n+     */\n+    public LineGeometry(List<GeometryPosition> positions, GeometryBoundingBox boundingBox,\n+        Map<String, Object> properties) {\n+        super(boundingBox, properties);\n+\n+        Objects.requireNonNull(positions, \"'positions' cannot be null.\");\n+        this.positions = Collections.unmodifiableList(new ArrayList<>(positions));", "originalCommit": "ae93115639b8b8660a56cafd729ce9e4b4b0ec0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjY0MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441232641", "bodyText": "Same response", "author": "alzimmermsft", "createdAt": "2020-06-17T01:41:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzY4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzc3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441223771", "bodyText": "Same comment here", "author": "JonathanGiles", "createdAt": "2020-06-17T01:06:25Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/MultiLineGeometry.java", "diffHunk": "@@ -0,0 +1,52 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Represents a multi-line geometry.\n+ */\n+public final class MultiLineGeometry extends Geometry {\n+    private final List<LineGeometry> lines;\n+\n+    /**\n+     * Constructs a multi-line geometry.\n+     *\n+     * @param lines The geometric lines that define the multi-line.\n+     * @throws NullPointerException If {@code lines} is {@code null}.\n+     */\n+    public MultiLineGeometry(List<LineGeometry> lines) {\n+        this(lines, null, null);\n+    }\n+\n+    /**\n+     * Constructs a multi-line geometry.\n+     *\n+     * @param lines The geometric lines that define the multi-line.\n+     * @param boundingBox Bounding box for the multi-line.\n+     * @param properties Additional properties of the multi-line.\n+     * @throws NullPointerException If {@code lines} is {@code null}.\n+     */\n+    public MultiLineGeometry(List<LineGeometry> lines, GeometryBoundingBox boundingBox,\n+        Map<String, Object> properties) {\n+        super(boundingBox, properties);\n+\n+        Objects.requireNonNull(lines, \"'lines' cannot be null.\");\n+        this.lines = Collections.unmodifiableList(new ArrayList<>(lines));", "originalCommit": "ae93115639b8b8660a56cafd729ce9e4b4b0ec0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjY2OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441232668", "bodyText": "Same response", "author": "alzimmermsft", "createdAt": "2020-06-17T01:41:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzc3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzc5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441223798", "bodyText": "Same comment here", "author": "JonathanGiles", "createdAt": "2020-06-17T01:06:33Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/MultiPointGeometry.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Represents a multi-point geometry.\n+ */\n+public final class MultiPointGeometry extends Geometry {\n+    private final List<PointGeometry> points;\n+\n+    /**\n+     * Constructs a multi-point geometry.\n+     *\n+     * @param points The points that define the multi-point.\n+     * @throws NullPointerException If {@code points} is {@code null}.\n+     */\n+    public MultiPointGeometry(List<PointGeometry> points) {\n+        this(points, null, null);\n+    }\n+\n+    /**\n+     * Constructs a multi-point geometry.\n+     *\n+     * @param points The points that define the multi-point.\n+     * @param boundingBox Bounding box for the multi-point.\n+     * @param properties Additional properties of the multi-point.\n+     * @throws NullPointerException If {@code points} is {@code null}.\n+     */\n+    public MultiPointGeometry(List<PointGeometry> points, GeometryBoundingBox boundingBox,\n+        Map<String, Object> properties) {\n+        super(boundingBox, properties);\n+\n+        Objects.requireNonNull(points, \"'points' cannot be null.\");\n+        this.points = Collections.unmodifiableList(new ArrayList<>(points));", "originalCommit": "ae93115639b8b8660a56cafd729ce9e4b4b0ec0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjY5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441232694", "bodyText": "Same response", "author": "alzimmermsft", "createdAt": "2020-06-17T01:41:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzc5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzgyNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441223826", "bodyText": "Same comment here", "author": "JonathanGiles", "createdAt": "2020-06-17T01:06:39Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/MultiPolygonGeometry.java", "diffHunk": "@@ -0,0 +1,53 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Represents a multi-polygon geometry.\n+ */\n+public final class MultiPolygonGeometry extends Geometry {\n+    private final List<PolygonGeometry> polygons;\n+\n+    /**\n+     * Constructs a multi-polygon geometry.\n+     *\n+     * @param polygons The polygons that define the multi-polygon.\n+     * @throws NullPointerException If {@code polygons} is {@code null}.\n+     */\n+    public MultiPolygonGeometry(List<PolygonGeometry> polygons) {\n+        this(polygons, null, null);\n+    }\n+\n+    /**\n+     * Constructs a multi-polygon geometry.\n+     *\n+     * @param polygons The polygons that define the multi-polygon.\n+     * @param boundingBox Bounding box for the multi-polygon.\n+     * @param properties Additional properties of the multi-polygon.\n+     * @throws NullPointerException If {@code polygons} is {@code null}.\n+     */\n+    public MultiPolygonGeometry(List<PolygonGeometry> polygons, GeometryBoundingBox boundingBox,\n+        Map<String, Object> properties) {\n+        super(boundingBox, properties);\n+\n+        Objects.requireNonNull(polygons, \"'polygons' cannot be null.\");\n+        this.polygons = Collections.unmodifiableList(new ArrayList<>(polygons));", "originalCommit": "ae93115639b8b8660a56cafd729ce9e4b4b0ec0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjcwOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441232708", "bodyText": "Same response", "author": "alzimmermsft", "createdAt": "2020-06-17T01:41:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzgyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzkwMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441223902", "bodyText": "Same comment here", "author": "JonathanGiles", "createdAt": "2020-06-17T01:07:02Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/PolygonGeometry.java", "diffHunk": "@@ -0,0 +1,51 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Represents a geometric polygon.\n+ */\n+public final class PolygonGeometry extends Geometry {\n+    private final List<LineGeometry> rings;\n+\n+    /**\n+     * Constructs a geometric polygon.\n+     *\n+     * @param rings The lines that define the polygon.\n+     * @throws NullPointerException If {@code rings} is {@code null}.\n+     */\n+    public PolygonGeometry(List<LineGeometry> rings) {\n+        this(rings, null, null);\n+    }\n+\n+    /**\n+     * Constructs a geometric polygon.\n+     *\n+     * @param rings The lines that define the polygon.\n+     * @param boundingBox Bounding box for the polygon.\n+     * @param properties Additional properties of the polygon.\n+     * @throws NullPointerException If {@code rings} is {@code null}.\n+     */\n+    public PolygonGeometry(List<LineGeometry> rings, GeometryBoundingBox boundingBox, Map<String, Object> properties) {\n+        super(boundingBox, properties);\n+\n+        Objects.requireNonNull(rings, \"'rings' cannot be null.\");\n+        this.rings = Collections.unmodifiableList(new ArrayList<>(rings));", "originalCommit": "ae93115639b8b8660a56cafd729ce9e4b4b0ec0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjc0MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r441232740", "bodyText": "Same response", "author": "alzimmermsft", "createdAt": "2020-06-17T01:41:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzkwMg=="}], "type": "inlineReview"}, {"oid": "381eb64bca29f7399180d6b8a3542d25f397898d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/381eb64bca29f7399180d6b8a3542d25f397898d", "message": "Merge branch 'master' into AzCore_GeoJSON", "committedDate": "2020-06-17T03:12:43Z", "type": "commit"}, {"oid": "52b598c8c8ce33311c228826fc36d8856a5d317d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/52b598c8c8ce33311c228826fc36d8856a5d317d", "message": "Unit tests", "committedDate": "2020-06-18T03:08:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQxMDU0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r442410549", "bodyText": "I was wondering if this could be named differently or to be more specific into the spatial concept that we would foresee it being used. Or do we want this same model to be more generic and allow including the concept of the BoundingBox we encountered in FormRecognizer here.\nWhere a BoundingBox could be a \"Quadrangle bounding box, with coordinates specified relative to the top-left of the original image. The eight numbers represent the four points, clockwise from the top-left corner relative to the text orientation. For image, the (x, y) coordinates are measured in pixels. For PDF, the (x, y) coordinates are measured in inches.\",", "author": "samvaity", "createdAt": "2020-06-18T18:08:08Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/GeometryBoundingBox.java", "diffHunk": "@@ -0,0 +1,129 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Represents a geometric bounding box.\n+ */\n+public final class GeometryBoundingBox {\n+    private final double west;\n+    private final double south;\n+    private final double east;\n+    private final double north;\n+\n+    private final Double minAltitude;\n+    private final Double maxAltitude;\n+\n+    /**\n+     * Constructs a bounding box.\n+     *\n+     * @param west West longitudinal boundary.\n+     * @param south South latitudinal boundary.\n+     * @param east East longitudinal boundary.\n+     * @param north North latitudinal boundary.\n+     */\n+    public GeometryBoundingBox(double west, double south, double east, double north) {", "originalCommit": "52b598c8c8ce33311c228826fc36d8856a5d317d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUxNzYwNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r442517604", "bodyText": "I believe these concepts are distinct from each other. The GeoJSON bounding box must be a rectangle as it simply lists to left, right, top, bottom bounding areas, with optional depth. Form Recognizer uses the four corners of the bounding area so it is a quadrangle which is a super set from a rectangle.", "author": "alzimmermsft", "createdAt": "2020-06-18T21:39:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQxMDU0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUyNDg1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r442524851", "bodyText": "I think it's fair to keep them as two separate models especially considering the fact that FR service is thinking of updating the BoundingBox to not be restricted to just four points and it can then grow differently.\nBut still think that GeometryBoundaryBox model name is too generic and can confuse users once we start including the other BoundingBox concepts. It doesn't suggest it is a GeoJson bounding box.  What do you think?", "author": "samvaity", "createdAt": "2020-06-18T21:57:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQxMDU0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUyNTU1MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r442525550", "bodyText": "That's a good thought.\n@pakrym, @srnagar, @JonathanGiles, @KrzysztofCwalina, ideas here as this will be common across the languages", "author": "alzimmermsft", "createdAt": "2020-06-18T21:59:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQxMDU0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUyNzMzNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r442527335", "bodyText": "I'm ok with how it is named now, but I am open to suggestions for other names too.", "author": "JonathanGiles", "createdAt": "2020-06-18T22:04:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQxMDU0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUyOTA4Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r442529086", "bodyText": "To me the prefix seems reasonable to distinguish.", "author": "pakrym", "createdAt": "2020-06-18T22:08:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQxMDU0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQxMTcyNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r442411726", "bodyText": "We encountered situations in user studies where users seem to be wanting a toString() method on the returned models. I am considering adding those in FormRecognizer, do we think we should consider that here too?", "author": "samvaity", "createdAt": "2020-06-18T18:10:15Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/GeometryPosition.java", "diffHunk": "@@ -0,0 +1,87 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.Objects;\n+\n+/**\n+ * Represents a geometric position.\n+ */\n+public final class GeometryPosition {\n+    private final double longitude;\n+    private final double latitude;\n+\n+    private final Double altitude;\n+\n+    /**\n+     * Constructs a geometric position.\n+     *\n+     * @param longitude Longitudinal position.\n+     * @param latitude Latitudinal position.\n+     */\n+    public GeometryPosition(double longitude, double latitude) {\n+        this(longitude, latitude, null);\n+    }\n+\n+    /**\n+     * Constructs a geometric position.\n+     *\n+     * @param longitude Longitudinal position.\n+     * @param latitude Latitudinal position.\n+     * @param altitude Altitude position.\n+     */\n+    public GeometryPosition(double longitude, double latitude, Double altitude) {\n+        this.longitude = longitude;\n+        this.latitude = latitude;\n+        this.altitude = altitude;\n+    }\n+\n+    /**\n+     * The longitudinal position of the geometric position.\n+     *\n+     * @return The longitudinal position.\n+     */\n+    public double getLongitude() {\n+        return longitude;\n+    }\n+\n+    /**\n+     * The latitudinal position of the geometric position.\n+     *\n+     * @return The latitudinal position.\n+     */\n+    public double getLatitude() {\n+        return latitude;\n+    }\n+\n+    /**\n+     * The altitude of the geometric position.\n+     *\n+     * @return The altitude.\n+     */\n+    public Double getAltitude() {\n+        return altitude;\n+    }\n+\n+    @Override\n+    public int hashCode() {", "originalCommit": "52b598c8c8ce33311c228826fc36d8856a5d317d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUxODA4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r442518080", "bodyText": "Could be done, I was thinking it could be their GeoJSON representation.", "author": "alzimmermsft", "createdAt": "2020-06-18T21:41:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQxMTcyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA1NTcxOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12203#discussion_r443055718", "bodyText": "Is it worth the performance cost to copy the source list into a new array list?", "author": "srnagar", "createdAt": "2020-06-19T21:47:02Z", "path": "sdk/core/azure-core/src/main/java/com/azure/core/models/spatial/CollectionGeometry.java", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.core.models.spatial;\n+\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+/**\n+ * Represents a heterogeneous collection of {@link Geometry geometries}.\n+ */\n+public final class CollectionGeometry extends Geometry {\n+    private final List<Geometry> geometries;\n+\n+    /**\n+     * Constructs a geometry collection.\n+     *\n+     * @param geometries The geometries in the collection.\n+     * @throws NullPointerException If {@code geometries} is {@code null}.\n+     */\n+    public CollectionGeometry(List<Geometry> geometries) {\n+        this(geometries, null, null);\n+    }\n+\n+    /**\n+     * Constructs a geometry collection.\n+     *\n+     * @param geometries The geometries in the collection.\n+     * @param boundingBox Bounding box for the geometry collection.\n+     * @param properties Additional properties of the geometry collection.\n+     * @throws NullPointerException If {@code geometries} is {@code null}.\n+     */\n+    public CollectionGeometry(List<Geometry> geometries, GeometryBoundingBox boundingBox,\n+        Map<String, Object> properties) {\n+        super(boundingBox, properties);\n+\n+        Objects.requireNonNull(geometries, \"'geometries' cannot be null.\");\n+        this.geometries = Collections.unmodifiableList(new ArrayList<>(geometries));", "originalCommit": "52b598c8c8ce33311c228826fc36d8856a5d317d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}