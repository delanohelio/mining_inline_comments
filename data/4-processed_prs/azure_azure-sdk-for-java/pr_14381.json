{"pr_number": 14381, "pr_title": "Review Models APIs", "pr_createdAt": "2020-08-24T20:06:02Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14381", "timeline": [{"oid": "fd19b9980299cdeb3c02b2dd7197feea2b26d5c3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fd19b9980299cdeb3c02b2dd7197feea2b26d5c3", "message": "Update API design.md", "committedDate": "2020-08-24T20:05:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTg2Nzk5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14381#discussion_r475867998", "bodyText": "A PagedFlux is a collection returning async API, we don't need to wrap it inside a Mono (a Mono will emit a single item, or an error) \ud83d\ude03", "author": "abhipsaMisra", "createdAt": "2020-08-24T20:15:32Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/API design.md", "diffHunk": "@@ -726,9 +726,159 @@ When updating a model, the payload for a multi-operation json patch follows the\n \n <details><summary><b>APIs</b></summary>\n \n+Async APIs\n+\n+```java\t\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return The list of created models\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<List<ModelData>> createModels(List<String> models) { }\n+\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return A REST response containing the list of created models.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<Response<List<ModelData>>> createModelsWithResponse(List<String> models) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition asynchronously.\n+     * @param modelId The Id of the model.\n+     * @return The application/json model\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<ModelData> getModel(String modelId) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition asynchronously.\n+     * @param modelId The Id of the model.\n+     * @return A REST response containing the model.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response<ModelData>> getModelWithResponse(String modelId) { }\n+\n+    /**\n+     * Gets the list of models by iterating through a collection asynchronously.\n+     * @param dependenciesFor The model Ids to have dependencies retrieved.\n+     * @param includeModelDefinition Whether to include the model definition in the result. If false, only the model metadata will be returned.\n+     * @param options The options to follow when listing the models. For example, the page size hint can be specified.\n+     * @return A {@link PagedFlux} of ModelData.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<PagedFlux<ModelData>> listModels(List<String> dependenciesFor, boolean includeModelDefinition, DigitalTwinModelsListOptions options) { }", "originalCommit": "fd19b9980299cdeb3c02b2dd7197feea2b26d5c3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTg2ODkxMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14381#discussion_r475868912", "bodyText": "small note: the max overload sync API will need to take in a Context arg as the last arg.", "author": "abhipsaMisra", "createdAt": "2020-08-24T20:17:18Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/API design.md", "diffHunk": "@@ -726,9 +726,159 @@ When updating a model, the payload for a multi-operation json patch follows the\n \n <details><summary><b>APIs</b></summary>\n \n+Async APIs\n+\n+```java\t\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return The list of created models\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<List<ModelData>> createModels(List<String> models) { }\n+\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return A REST response containing the list of created models.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<Response<List<ModelData>>> createModelsWithResponse(List<String> models) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition asynchronously.\n+     * @param modelId The Id of the model.\n+     * @return The application/json model\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<ModelData> getModel(String modelId) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition asynchronously.\n+     * @param modelId The Id of the model.\n+     * @return A REST response containing the model.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response<ModelData>> getModelWithResponse(String modelId) { }\n+\n+    /**\n+     * Gets the list of models by iterating through a collection asynchronously.\n+     * @param dependenciesFor The model Ids to have dependencies retrieved.\n+     * @param includeModelDefinition Whether to include the model definition in the result. If false, only the model metadata will be returned.\n+     * @param options The options to follow when listing the models. For example, the page size hint can be specified.\n+     * @return A {@link PagedFlux} of ModelData.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<PagedFlux<ModelData>> listModels(List<String> dependenciesFor, boolean includeModelDefinition, DigitalTwinModelsListOptions options) { }\n+\n+    /**\n+     * Deletes a model asynchronously.\n+     * @param modelId The id for the model. The id is globally unique and case sensitive.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Void> deleteModel(String modelId) { }\n+\n+    /**\n+     * Deletes a model asynchronously.\n+     * @param modelId The id for the model. The id is globally unique and case sensitive.\n+     * @return The http response.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response> deleteModelWithResponse(String modelId) { }\n+\n+    /**\n+     * Decommissions a model asynchronously.\n+     * @param modelId The Id of the model to decommission.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Void> decommissionModel(String modelId) { }\n+\n+    /**\n+     * Decommissions a model asynchronously.\n+     * @param modelId The Id of the model to decommission.\n+     * @return The http response.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response> decommissionModelWithResponse(String modelId) { }\n+\n+```\n+\n+Sync APIs\n ```java\n-TODO:\n+ /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return The list of created models\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public List<ModelData> createModels(List<String> models) { }\n+\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return A REST response containing the list of created models.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Response<List<ModelData>> createModelsWithResponse(List<String> models) { }", "originalCommit": "fd19b9980299cdeb3c02b2dd7197feea2b26d5c3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkwMzk5MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14381#discussion_r475903990", "bodyText": "It would be easier to review if we have async sync version of API next to each other rather than a new section?", "author": "bikamani", "createdAt": "2020-08-24T21:26:25Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/API design.md", "diffHunk": "@@ -726,9 +726,159 @@ When updating a model, the payload for a multi-operation json patch follows the\n \n <details><summary><b>APIs</b></summary>\n \n+Async APIs\n+\n+```java\t\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return The list of created models\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<List<ModelData>> createModels(List<String> models) { }\n+\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return A REST response containing the list of created models.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<Response<List<ModelData>>> createModelsWithResponse(List<String> models) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition asynchronously.\n+     * @param modelId The Id of the model.\n+     * @return The application/json model\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<ModelData> getModel(String modelId) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition asynchronously.\n+     * @param modelId The Id of the model.\n+     * @return A REST response containing the model.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response<ModelData>> getModelWithResponse(String modelId) { }\n+\n+    /**\n+     * Gets the list of models by iterating through a collection asynchronously.\n+     * @param dependenciesFor The model Ids to have dependencies retrieved.\n+     * @param includeModelDefinition Whether to include the model definition in the result. If false, only the model metadata will be returned.\n+     * @param options The options to follow when listing the models. For example, the page size hint can be specified.\n+     * @return A {@link PagedFlux} of ModelData.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<PagedFlux<ModelData>> listModels(List<String> dependenciesFor, boolean includeModelDefinition, DigitalTwinModelsListOptions options) { }\n+\n+    /**\n+     * Deletes a model asynchronously.\n+     * @param modelId The id for the model. The id is globally unique and case sensitive.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Void> deleteModel(String modelId) { }\n+\n+    /**\n+     * Deletes a model asynchronously.\n+     * @param modelId The id for the model. The id is globally unique and case sensitive.\n+     * @return The http response.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response> deleteModelWithResponse(String modelId) { }\n+\n+    /**\n+     * Decommissions a model asynchronously.\n+     * @param modelId The Id of the model to decommission.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Void> decommissionModel(String modelId) { }\n+\n+    /**\n+     * Decommissions a model asynchronously.\n+     * @param modelId The Id of the model to decommission.\n+     * @return The http response.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response> decommissionModelWithResponse(String modelId) { }\n+\n+```\n+\n+Sync APIs", "originalCommit": "fd19b9980299cdeb3c02b2dd7197feea2b26d5c3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcyNTA3OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14381#discussion_r476725078", "bodyText": "We can explore that option for the following APIs and if we all liked it better we can move them", "author": "azabbasi", "createdAt": "2020-08-25T20:42:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkwMzk5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkwNDQwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14381#discussion_r475904406", "bodyText": "Did you mean to say asynchronously here and below?", "author": "bikamani", "createdAt": "2020-08-24T21:27:19Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/API design.md", "diffHunk": "@@ -726,9 +726,159 @@ When updating a model, the payload for a multi-operation json patch follows the\n \n <details><summary><b>APIs</b></summary>\n \n+Async APIs\n+\n+```java\t\n+    /**\n+     * Creates one or many models synchronously.", "originalCommit": "fd19b9980299cdeb3c02b2dd7197feea2b26d5c3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcyNDA4Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14381#discussion_r476724082", "bodyText": "yes yes", "author": "azabbasi", "createdAt": "2020-08-25T20:40:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkwNDQwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkwNDg2Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14381#discussion_r475904862", "bodyText": "Is it basically the HTTP response?", "author": "bikamani", "createdAt": "2020-08-24T21:28:24Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/API design.md", "diffHunk": "@@ -726,9 +726,159 @@ When updating a model, the payload for a multi-operation json patch follows the\n \n <details><summary><b>APIs</b></summary>\n \n+Async APIs\n+\n+```java\t\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return The list of created models\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<List<ModelData>> createModels(List<String> models) { }\n+\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return A REST response containing the list of created models.", "originalCommit": "fd19b9980299cdeb3c02b2dd7197feea2b26d5c3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjcyNDE0MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14381#discussion_r476724140", "bodyText": "correct.", "author": "azabbasi", "createdAt": "2020-08-25T20:40:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkwNDg2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkwNzUyMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14381#discussion_r475907522", "bodyText": "returns a PagedIterable", "author": "bikamani", "createdAt": "2020-08-24T21:34:37Z", "path": "sdk/digitaltwins/azure-digitaltwins-core/API design.md", "diffHunk": "@@ -726,9 +726,159 @@ When updating a model, the payload for a multi-operation json patch follows the\n \n <details><summary><b>APIs</b></summary>\n \n+Async APIs\n+\n+```java\t\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return The list of created models\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<List<ModelData>> createModels(List<String> models) { }\n+\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return A REST response containing the list of created models.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<Response<List<ModelData>>> createModelsWithResponse(List<String> models) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition asynchronously.\n+     * @param modelId The Id of the model.\n+     * @return The application/json model\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<ModelData> getModel(String modelId) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition asynchronously.\n+     * @param modelId The Id of the model.\n+     * @return A REST response containing the model.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response<ModelData>> getModelWithResponse(String modelId) { }\n+\n+    /**\n+     * Gets the list of models by iterating through a collection asynchronously.\n+     * @param dependenciesFor The model Ids to have dependencies retrieved.\n+     * @param includeModelDefinition Whether to include the model definition in the result. If false, only the model metadata will be returned.\n+     * @param options The options to follow when listing the models. For example, the page size hint can be specified.\n+     * @return A {@link PagedFlux} of ModelData.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Mono<PagedFlux<ModelData>> listModels(List<String> dependenciesFor, boolean includeModelDefinition, DigitalTwinModelsListOptions options) { }\n+\n+    /**\n+     * Deletes a model asynchronously.\n+     * @param modelId The id for the model. The id is globally unique and case sensitive.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Void> deleteModel(String modelId) { }\n+\n+    /**\n+     * Deletes a model asynchronously.\n+     * @param modelId The id for the model. The id is globally unique and case sensitive.\n+     * @return The http response.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response> deleteModelWithResponse(String modelId) { }\n+\n+    /**\n+     * Decommissions a model asynchronously.\n+     * @param modelId The Id of the model to decommission.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Void> decommissionModel(String modelId) { }\n+\n+    /**\n+     * Decommissions a model asynchronously.\n+     * @param modelId The Id of the model to decommission.\n+     * @return The http response.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Mono<Response> decommissionModelWithResponse(String modelId) { }\n+\n+```\n+\n+Sync APIs\n ```java\n-TODO:\n+ /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return The list of created models\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public List<ModelData> createModels(List<String> models) { }\n+\n+    /**\n+     * Creates one or many models synchronously.\n+     * @param models The list of models to create. Each string corresponds to exactly one model.\n+     * @return A REST response containing the list of created models.\n+     */\n+    @ServiceMethod(returns = ReturnType.COLLECTION)\n+    public Response<List<ModelData>> createModelsWithResponse(List<String> models) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition synchronously.\n+     * @param modelId The Id of the model.\n+     * @return The application/json model\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public ModelData getModel(String modelId) { }\n+\n+    /**\n+     * Gets a model, including the model metadata and the model definition synchronously.\n+     * @param modelId The Id of the model.\n+     * @return A REST response containing the model.\n+     */\n+    @ServiceMethod(returns = ReturnType.SINGLE)\n+    public Response<ModelData> getModelWithResponse(String modelId) { }\n+\n+    /**\n+     * Gets the list of models by iterating through a collection synchronously.\n+     * @param dependenciesFor The model Ids to have dependencies retrieved.\n+     * @param includeModelDefinition Whether to include the model definition in the result. If false, only the model metadata will be returned.\n+     * @param options The options to follow when listing the models. For example, the page size hint can be specified.\n+     * @return A {@link PagedFlux} of ModelData.", "originalCommit": "fd19b9980299cdeb3c02b2dd7197feea2b26d5c3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c5d510711a2e043de5e2ea73ac52a0ee679658dc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c5d510711a2e043de5e2ea73ac52a0ee679658dc", "message": "Update API design.md", "committedDate": "2020-08-25T20:40:20Z", "type": "commit"}, {"oid": "794e2a5d82522fe847c09024f3ea97b9d3a222ba", "url": "https://github.com/Azure/azure-sdk-for-java/commit/794e2a5d82522fe847c09024f3ea97b9d3a222ba", "message": "Update API design.md", "committedDate": "2020-08-25T20:41:32Z", "type": "commit"}]}