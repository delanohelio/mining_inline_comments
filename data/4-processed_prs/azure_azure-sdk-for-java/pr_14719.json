{"pr_number": 14719, "pr_title": "[TA] Add redactedText to PiiEntityCollection", "pr_createdAt": "2020-09-02T03:45:55Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14719", "timeline": [{"oid": "d9c667a5cc5bef751021fc80c755987871ba1201", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d9c667a5cc5bef751021fc80c755987871ba1201", "message": "add redactedText to PiiEntityCollection", "committedDate": "2020-09-02T03:44:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA4NjE1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14719#discussion_r482086155", "bodyText": "Curious why this was needed?", "author": "maririos", "createdAt": "2020-09-02T13:52:49Z", "path": "sdk/textanalytics/azure-ai-textanalytics/pom.xml", "diffHunk": "@@ -114,7 +114,7 @@\n             <configuration>\n               <argLine>\n                 --add-opens com.azure.ai.textanalytics/com.azure.ai.textanalytics=ALL-UNNAMED\n-                --add-opens com.azure.ai.textanalytics/com.azure.ai.textanalytics.implementation.models=com.azure.core\n+                --add-exports com.azure.core/com.azure.core.implementation.http=ALL-UNNAMED", "originalCommit": "d9c667a5cc5bef751021fc80c755987871ba1201", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE5NjI0Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14719#discussion_r482196242", "bodyText": "This is a fix for the maven-surefire-plugin. Java repo had merged a PR to having this but cause this error:\njava.lang.IllegalAccessError: class com.azure.core.test.TestBase (in unnamed module @0x1e482c2) cannot access class com.azure.core.implementation.http.HttpClientProviders (in module com.azure.core) because module com.azure.core does not export com.azure.core.implementation.http to unnamed module @0x1e482c2\n\nThis could fix the error and make the test to be able to run again. Otherwise, I won't be able to test.", "author": "mssfang", "createdAt": "2020-09-02T16:16:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA4NjE1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA5MTUxNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14719#discussion_r482091516", "bodyText": "Just realized, PII is new to the customer and it comes back only in our 5.1.0-beta.1 version, so we shouldn't include this line int he changelog as for the user, there wasn't any PiiEntityCollection property before", "author": "maririos", "createdAt": "2020-09-02T13:59:42Z", "path": "sdk/textanalytics/azure-ai-textanalytics/CHANGELOG.md", "diffHunk": "@@ -11,6 +11,8 @@\n - Added support for the Opinion Mining feature. To use this feature, you need to make sure you are using the \n service's v3.1-preview.1 and above API. To get this support pass `includeOpinionMining` as `true` in \n `AnalyzeSentimentOptions` when calling the sentiment analysis endpoints.\n+- In API version v3.1-preview.2 and up, the redacted text of the document is returned on the result ", "originalCommit": "d9c667a5cc5bef751021fc80c755987871ba1201", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE5NjYxOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14719#discussion_r482196618", "bodyText": "I see. I can remove it.", "author": "mssfang", "createdAt": "2020-09-02T16:17:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA5MTUxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA5MjI1MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14719#discussion_r482092250", "bodyText": "Same with all the comments. Not need to say that it will only be returned for API v3.1-preview.2 if in reality it will only be included in out 5.1.0-beta.1  library.\nI suggest removing it", "author": "maririos", "createdAt": "2020-09-02T14:00:38Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/models/PiiEntityCollection.java", "diffHunk": "@@ -11,17 +11,21 @@\n  */\n @Immutable\n public final class PiiEntityCollection extends IterableStream<PiiEntity> {\n-\n+    private final String redactedText;\n     private final IterableStream<TextAnalyticsWarning> warnings;\n \n     /**\n      * Creates a {@link PiiEntityCollection} model that describes a entities collection including warnings.\n      *\n      * @param entities An {@link IterableStream} of {@link PiiEntity Personally Identifiable Information entities}.\n+     * @param redactedText The text of the input document with all of the PII information redacted out. Only returned\n+     * for API version v3.1-preview.2 and up.", "originalCommit": "d9c667a5cc5bef751021fc80c755987871ba1201", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "81ec14485e8108213bbf8cc978b223bbd5b223ee", "url": "https://github.com/Azure/azure-sdk-for-java/commit/81ec14485e8108213bbf8cc978b223bbd5b223ee", "message": "remove unneccessary text", "committedDate": "2020-09-02T16:23:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjMwODUxNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14719#discussion_r482308517", "bodyText": "Should we also add this change to the changelog?", "author": "samvaity", "createdAt": "2020-09-02T18:56:39Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/main/java/com/azure/ai/textanalytics/RecognizePiiEntityAsyncClient.java", "diffHunk": "@@ -82,6 +82,7 @@\n                             throw logger.logExceptionAsError(toTextAnalyticsException(entitiesResult.getError()));", "originalCommit": "81ec14485e8108213bbf8cc978b223bbd5b223ee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjM1NTg2NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14719#discussion_r482355864", "bodyText": "? what changes?", "author": "mssfang", "createdAt": "2020-09-02T19:41:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjMwODUxNw=="}], "type": "inlineReview"}]}