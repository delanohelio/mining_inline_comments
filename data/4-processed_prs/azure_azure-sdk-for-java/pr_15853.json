{"pr_number": 15853, "pr_title": "Samples and Readme update for Administration package", "pr_createdAt": "2020-10-01T02:04:21Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/15853", "timeline": [{"oid": "46a28aff82d0f31772e3533ced5af45c509c3591", "url": "https://github.com/Azure/azure-sdk-for-java/commit/46a28aff82d0f31772e3533ced5af45c509c3591", "message": "More samples and readme changes", "committedDate": "2020-10-01T02:00:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAwMTQxNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15853#discussion_r498001417", "bodyText": "Since the package will be used for both Identity and Phone Numbers, we should keep the description about \"managing users and tokens for Azure Communication Services\".", "author": "waynemo", "createdAt": "2020-10-01T06:03:59Z", "path": "sdk/communication/azure-communication-administration/README.md", "diffHunk": "@@ -1,6 +1,8 @@\n # Azure Communication Administration client library for Java\n \n-Azure Communication Administration is used for managing users and tokens for Azure Communication Services.", "originalCommit": "46a28aff82d0f31772e3533ced5af45c509c3591", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM2NTk1OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15853#discussion_r498365958", "bodyText": "Sure. Let me take care of it", "author": "ankitarorabit", "createdAt": "2020-10-01T16:17:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAwMTQxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAwMjIxMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15853#discussion_r498002210", "bodyText": "Should we move the phone plans overview under the overall \"Key Concepts\" section? Under \"Key Concepts\" we could have subsections for Identity and Phone Numbers.", "author": "waynemo", "createdAt": "2020-10-01T06:06:23Z", "path": "sdk/communication/azure-communication-administration/README.md", "diffHunk": "@@ -87,12 +89,157 @@ communicationIdentityClient.revokeTokens(user, OffsetDateTime.now());\n ### Deleting a user\n Use the `deleteUser` function to delete a user.\n \n-<!-- embedme ./src/samples/java/com/azure/communication/administration/ReadmeSamples.java#L114-L115 -->\n+<!-- embedme ./src/samples/java/com/azure/communication/administration/ReadmeSamples.java#L120-L121 -->\n ```java\n // delete a previously created user\n communicationIdentityClient.deleteUser(user);\n ```\n \n+## Phone plans overview", "originalCommit": "46a28aff82d0f31772e3533ced5af45c509c3591", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM2NjQyMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15853#discussion_r498366420", "bodyText": "That was my initial thought as well but then I went ahead otherwise so good to know you are of the same opinion", "author": "ankitarorabit", "createdAt": "2020-10-01T16:17:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAwMjIxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAwMjU0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15853#discussion_r498002549", "bodyText": "Should we move the phone plans samples under the overall \"Examples\" section? Under \"Examples\" we could have subsections for Identity and Phone Numbers.", "author": "waynemo", "createdAt": "2020-10-01T06:07:33Z", "path": "sdk/communication/azure-communication-administration/README.md", "diffHunk": "@@ -87,12 +89,157 @@ communicationIdentityClient.revokeTokens(user, OffsetDateTime.now());\n ### Deleting a user\n Use the `deleteUser` function to delete a user.\n \n-<!-- embedme ./src/samples/java/com/azure/communication/administration/ReadmeSamples.java#L114-L115 -->\n+<!-- embedme ./src/samples/java/com/azure/communication/administration/ReadmeSamples.java#L120-L121 -->\n ```java\n // delete a previously created user\n communicationIdentityClient.deleteUser(user);\n ```\n \n+## Phone plans overview\n+\n+Phone plans come in two types; Geographic and Toll-Free. Geographic phone plans are phone plans associated with a location, whose phone numbers' area codes are associated with the area code of a geographic location. Toll-Free phone plans are phone plans not associated location. For example, in the US, toll-free numbers can come with area codes such as 800 or 888.\n+\n+All geographic phone plans within the same country are grouped into a phone plan group with a Geographic phone number type. All Toll-Free phone plans within the same country are grouped into a phone plan group.\n+\n+## Searching and Acquiring numbers\n+\n+Phone numbers search can be search through the search creation API by providing a phone plan id, an area code and quantity of phone numbers. The provided quantity of phone numbers will be reserved for ten minutes. This search of phone numbers can either be cancelled or purchased. If the search is cancelled, then the phone numbers will become available to others. If the search is purchased, then the phone numbers are acquired for the Azure resources.\n+\n+## Configuring / Assigning numbers\n+\n+Phone numbers can be assigned to a callback URL via the configure number API. As part of the configuration, you will need an acquired phone number, callback URL and application id.\n+\n+## Code Samples", "originalCommit": "46a28aff82d0f31772e3533ced5af45c509c3591", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM2NjUwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15853#discussion_r498366505", "bodyText": "Sure, that would make sense.", "author": "ankitarorabit", "createdAt": "2020-10-01T16:17:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODAwMjU0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM3MzY3Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15853#discussion_r498373672", "bodyText": "You can remove this line. This target id was accidentally added to the request object exposed to the user.", "author": "whisper6284", "createdAt": "2020-10-01T16:29:55Z", "path": "sdk/communication/azure-communication-administration/src/samples/java/com/azure/communication/administration/ReadmeSamples.java", "diffHunk": "@@ -331,4 +336,75 @@ public AreaCodes getAreaCodes() {\n         }\n         return null;\n     }\n+\n+    /**\n+     * Sample code to create a phone number search\n+     *\n+     * @return PhoneNumberSearch for the phone plan\n+     */\n+    public PhoneNumberSearch createPhoneNumberSearch() {\n+        String phonePlanId = \"PHONE_PLAN_ID\";\n+\n+        List<String> phonePlanIds = new ArrayList<>();\n+        phonePlanIds.add(phonePlanId);\n+\n+        CreateSearchOptions createSearchOptions = new CreateSearchOptions();\n+        createSearchOptions\n+            .setAreaCode(\"AREA_CODE_FOR_SEARCH\")\n+            .setDescription(\"DESCRIPTION_FOR_SEARCH\")\n+            .setDisplayName(\"NAME_FOR_SEARCH\")\n+            .setPhonePlanIds(phonePlanIds)\n+            .setQuantity(2);\n+\n+        try {\n+            PhoneNumberClient phoneNumberClient = createPhoneNumberClient();\n+            CreateSearchResponse createSearchResponse = phoneNumberClient.createSearch(createSearchOptions);\n+\n+            System.out.println(\"SearchId: \" + createSearchResponse.getSearchId());\n+            PhoneNumberSearch phoneNumberSearch = phoneNumberClient.getSearchById(createSearchResponse.getSearchId());\n+\n+            for (String phoneNumber\n+                 : phoneNumberSearch.getPhoneNumbers()) {\n+                System.out.println(\"Phone Number: \" + phoneNumber);\n+            }\n+\n+            return phoneNumberSearch;\n+\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+        return null;\n+    }\n+\n+    /**\n+     * Sample code to purchase a phone number search\n+     */\n+    public void purchasePhoneNumberSearch() {\n+        String phoneNumberSearchId = \"SEARCH_ID_TO_PURCHASE\";\n+\n+        try {\n+            PhoneNumberClient phoneNumberClient = createPhoneNumberClient();\n+            phoneNumberClient.purchaseSearch(phoneNumberSearchId);\n+        } catch (Exception e) {\n+            e.printStackTrace();\n+        }\n+    }\n+\n+    /**\n+     * Sample code to configure a phone number\n+     */\n+    public void configurePhoneNumber() {\n+        PhoneNumber phoneNumber = new PhoneNumber(\"PHONENUMBER_TO_CONFIGURE\");\n+        PstnConfiguration pstnConfiguration = new PstnConfiguration();\n+        pstnConfiguration.setApplicationId(\"APPLICATION_ID\");\n+        pstnConfiguration.setAzurePstnTargetId(\"AZURE_PSTN_TARGET_ID\");", "originalCommit": "46a28aff82d0f31772e3533ced5af45c509c3591", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM5MjQxNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15853#discussion_r498392417", "bodyText": "Sure", "author": "ankitarorabit", "createdAt": "2020-10-01T17:03:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM3MzY3Mg=="}], "type": "inlineReview"}, {"oid": "0c7804347be7a82dba5417a068dd74cdd0ee2a58", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0c7804347be7a82dba5417a068dd74cdd0ee2a58", "message": "PR comments", "committedDate": "2020-10-01T16:37:04Z", "type": "commit"}, {"oid": "fae0f1dfa93b738fb7e161d2b715ace124c69e40", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fae0f1dfa93b738fb7e161d2b715ace124c69e40", "message": "build failure", "committedDate": "2020-10-01T17:05:59Z", "type": "commit"}, {"oid": "32457eb64bb3f91765dfe6205ca7a8257d6bed5e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/32457eb64bb3f91765dfe6205ca7a8257d6bed5e", "message": "fix indentation", "committedDate": "2020-10-01T17:21:24Z", "type": "commit"}]}