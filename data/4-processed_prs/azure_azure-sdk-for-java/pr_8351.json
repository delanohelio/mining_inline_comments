{"pr_number": 8351, "pr_title": "Merge cosmos v4 to master", "pr_createdAt": "2020-02-20T19:57:03Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/8351", "timeline": [{"oid": "85781708645c67b3ffd5373a9570cf15d9901907", "url": "https://github.com/Azure/azure-sdk-for-java/commit/85781708645c67b3ffd5373a9570cf15d9901907", "message": "Setting the code coverage percentage to 10% as a workaround for now", "committedDate": "2020-02-21T02:00:43Z", "type": "commit"}, {"oid": "43d4bad6d35ec4d395acf02fb0a80fb270fab66b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/43d4bad6d35ec4d395acf02fb0a80fb270fab66b", "message": "Updated code coverage percentage to 1% for benchmark and examples", "committedDate": "2020-02-21T02:13:26Z", "type": "commit"}, {"oid": "7289bb61d3466dd992cafedacd64e80a858dacdd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7289bb61d3466dd992cafedacd64e80a858dacdd", "message": "Fixed typo", "committedDate": "2020-02-21T02:13:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjYzODIyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8351#discussion_r382638229", "bodyText": "It's worth mentioning here that this test matrix, for the unit tests, brings Cosmos v4 inline with the test matrix used for client track (Linux/Mac/Windows with Java versions 8 and 11). The \"from source\" build is a special run that was added a while back that manipulates the versions such that all track client track dependencies are built from the latest source. This is a safeguard to ensure compatibility with changes being made to inter track dependencies.", "author": "JimSuplizio", "createdAt": "2020-02-21T15:18:21Z", "path": "eng/pipelines/templates/stages/cosmos-sdk-client.yml", "diffHunk": "@@ -5,21 +5,54 @@ parameters:\n stages:\n   - stage: Build\n     jobs:\n-    - template: ../jobs/archetype-sdk-data.yml\n+    - template: ../jobs/archetype-sdk-client.yml\n       parameters:\n         ServiceDirectory: ${{parameters.ServiceDirectory}}\n         SDKType: ${{parameters.SDKType}}\n         Artifacts: ${{parameters.Artifacts}}\n         TestMatrix:\n-          Windows - java8:\n+          Linux - Java 8:", "originalCommit": "7289bb61d3466dd992cafedacd64e80a858dacdd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjY0MDM0MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8351#discussion_r382640340", "bodyText": "/CC @joshfree @alzimmermsft\nAlan and I have chatted about these netty dependencies. Right now the Cosmos io.netty dependencies are ahead of the common versions. We should look and see if we can bring the common dependencies up to these versions.", "author": "JimSuplizio", "createdAt": "2020-02-21T15:22:17Z", "path": "eng/versioning/external_dependencies.txt", "diffHunk": "@@ -171,11 +171,20 @@ applicationinsights_com.microsoft.azure:azure-client-runtime;1.6.3\n applicationinsights_com.microsoft.azure:azure-client-authentication;1.6.3\n \n # everything under sdk\\cosmos\n-cosmos_org.mockito:mockito-core;1.10.19\n+cosmos_com.fasterxml.jackson.module:jackson-module-afterburner;2.10.1\n cosmos_com.google.guava:guava;25.0-jre\n cosmos_io.dropwizard.metrics:metrics-core;4.1.0\n-cosmos_io.dropwizard.metrics:metrics-jvm;4.1.0\n cosmos_io.dropwizard.metrics:metrics-graphite;4.1.0\n+cosmos_io.dropwizard.metrics:metrics-jvm;4.1.0", "originalCommit": "7289bb61d3466dd992cafedacd64e80a858dacdd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjcxNTgyMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8351#discussion_r382715820", "bodyText": "I'm good with upgrading to these newer versions if we get a few good test runs in with them.", "author": "alzimmermsft", "createdAt": "2020-02-21T17:41:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjY0MDM0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjY0NDgwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8351#discussion_r382644806", "bodyText": "Right now, the goal is to get Comos v4 into master and successfully building in the pipelines which will unblock the development. There are still source changes that need to get made per the arch board review that will not be part of this PR. @kushagraThapar and I agreed that tagging things in the pom files, like plugin overrides or things that are temporary, with \"CosmosSkip\" so they can be easily identified. It is my understanding that everything tagged with CosmosSkip is going to be attached to a work item which is to be completed before GA.", "author": "JimSuplizio", "createdAt": "2020-02-21T15:29:50Z", "path": "pom.client.xml", "diffHunk": "@@ -428,6 +428,10 @@\n               *.implementation*:\n               com.azure.tools.checkstyle*\n             </excludePackageNames>\n+            <!-- CosmosSkip - This is temporary, BridgeInternal gets converted to implementation -->", "originalCommit": "7289bb61d3466dd992cafedacd64e80a858dacdd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a0249ade79f6c7b0bc7deb4f989b6a6232a154a2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a0249ade79f6c7b0bc7deb4f989b6a6232a154a2", "message": "Added jacoco test coverage entry, fixed logger test", "committedDate": "2020-02-21T16:36:53Z", "type": "commit"}, {"oid": "35181fb5b52002155007dea77e30e09778f5d079", "url": "https://github.com/Azure/azure-sdk-for-java/commit/35181fb5b52002155007dea77e30e09778f5d079", "message": "Fixed typo in dependency tag", "committedDate": "2020-02-21T16:44:21Z", "type": "commit"}, {"oid": "d99307730645a57b168d0f362d465a9f93431a96", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d99307730645a57b168d0f362d465a9f93431a96", "message": "Fixed comment on the jacoco test coverage for azure-cosmos", "committedDate": "2020-02-21T16:45:22Z", "type": "commit"}, {"oid": "a72d8d786f20c674e82005cc508d418d5015de19", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a72d8d786f20c674e82005cc508d418d5015de19", "message": "Added profiles to benchmark and examples, as some of the tests from benchmark and examples were not running as they didn't have profile", "committedDate": "2020-02-21T17:49:29Z", "type": "commit"}, {"oid": "5604b63f4a18b697fe90cad117298a33c8e6c393", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5604b63f4a18b697fe90cad117298a33c8e6c393", "message": "Added testng xml files for test suites, modified pom files to refer these suites", "committedDate": "2020-02-21T19:45:05Z", "type": "commit"}, {"oid": "6c47f52037f7fbb6e4d3b14f3e9330a37a0adbea", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6c47f52037f7fbb6e4d3b14f3e9330a37a0adbea", "message": "Chrande/cosmos/v4 (#5548)\n\n* Rename clients + annotations\r\n\r\n* add get/set to model types\r\n\r\n* 4.0.0-preview.4\r\n\r\n* Fixing issues\r\n\r\n* Implementing PR comments\r\nMoving microsoft-azure to azure\r\n\r\n* updating pom.service to reflect new module names\r\n\r\n* changing parent to pom.client.xml\r\n\r\n* Removed recursive calls", "committedDate": "2019-10-05T18:22:51Z", "type": "commit"}, {"oid": "5784cd363133ecefc255cf1bdbaf58da9f48bd39", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5784cd363133ecefc255cf1bdbaf58da9f48bd39", "message": "CI-fixes (#5794)\n\n* CI-fixes\r\n\r\n* Updated query metrics validation checks\r\n\r\n* Fixed stored procedure path in test\r\n\r\n* Fixed emulator path to public emulator", "committedDate": "2019-10-16T14:54:08Z", "type": "commit"}, {"oid": "c4af4070465ea66e6dc1edd1b25d82979d17b1d2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c4af4070465ea66e6dc1edd1b25d82979d17b1d2", "message": "Porting changefeedprocessor hot fixes from v3 (#6001)\n\nport from: https://github.com/Azure/azure-sdk-for-java/pull/5739/", "committedDate": "2019-10-23T03:57:51Z", "type": "commit"}, {"oid": "b0e0c2e11091a710c38d72cb714c199696311ec1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b0e0c2e11091a710c38d72cb714c199696311ec1", "message": "Porting reactor netty changes, NPE and minor fixes from v3 to v4  (#5989)\n\n* Porting reactor netty changes from v3 to v4\r\nUsed Reactor-Core and Reactor-Netty latest release.\r\nNew TCP Configurations with idle connection timeout, connect timeout, connection keep alive, etc.\r\nUsed Reactor-Netty's response APIs to convert Flux / Mono to Flux / Mono\r\n\r\n* Porting NPE from V3\r\nPort of: https://github.com/Azure/azure-sdk-for-java/pull/5804\r\n\r\n* Changing the max connection pool size to 1000\r\n\r\n* Port from : #5862", "committedDate": "2019-10-23T15:54:42Z", "type": "commit"}, {"oid": "2fcfa5de634fdb0587a708d6cb21e3e08959559c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2fcfa5de634fdb0587a708d6cb21e3e08959559c", "message": "Porting fixes from v3 to v4 (#6012)\n\n* Porting JsonIgnore fix\r\nport from: https://github.com/Azure/azure-sdk-for-java/pull/5951/\r\n\r\n* Removed BadRequestException when FeedOptions.maxItemCount is -1\r\nPort from: https://github.com/Azure/azure-sdk-for-java/pull/5618/\r\n\r\n* Retry not happening with direct mode - port to v4\r\nPort from: https://github.com/Azure/azure-sdk-for-java/pull/5806/\r\n\r\n* Resolves issues 275 and 276\r\nport from: https://github.com/Azure/azure-sdk-for-java/pull/5829/", "committedDate": "2019-10-24T16:01:41Z", "type": "commit"}, {"oid": "fb4f9c3a9a888b2f8052e516ca44a846d56814aa", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb4f9c3a9a888b2f8052e516ca44a846d56814aa", "message": "Changing packages from com.azure.data.cosmos -> com.azure.cosmos (#6027)\n\n* Changing packages from com.azure.data.cosmos -> com.azure.cosmos\r\n\r\n* updating the cosmos benchmark readme path after package name change\r\n\r\n* updating the cosmos readme path after package name change\r\n\r\n* Setting the correct version for v4 preview release: 4.0.0-preview.1", "committedDate": "2019-10-25T03:09:14Z", "type": "commit"}, {"oid": "b49f88aa992bf3450dc2136075e70de46074d1f5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b49f88aa992bf3450dc2136075e70de46074d1f5", "message": "Set resourceResponse in CosmosResponse (#6076)\n\n* Fixed constructors of sync responses by setting resource response in parent CosmosResponse class\r\n\r\n* Added tests for invoking responseWrapper for sync items", "committedDate": "2019-10-30T07:42:50Z", "type": "commit"}, {"oid": "bf395b943aeeecd3b00984ec2ec51a2700e8916f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bf395b943aeeecd3b00984ec2ec51a2700e8916f", "message": "upgrading azure core version (#6084)\n\n* Upgrading azure core version to 1.0.0\r\nFixing imports", "committedDate": "2019-10-30T16:34:21Z", "type": "commit"}, {"oid": "73b0c2c5f835c880abcc3c8cdeb0b395f39ae9f0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/73b0c2c5f835c880abcc3c8cdeb0b395f39ae9f0", "message": "Updating staging profile id to match com.azure namespace (#6108)", "committedDate": "2019-10-31T00:33:51Z", "type": "commit"}, {"oid": "987324a56568589928e4213c3c5373cdf9ef6240", "url": "https://github.com/Azure/azure-sdk-for-java/commit/987324a56568589928e4213c3c5373cdf9ef6240", "message": "Updated changelog and readme (#6123)\n\n* Updated changelog and readme\r\n\r\n* Minor update", "committedDate": "2019-11-01T17:09:35Z", "type": "commit"}, {"oid": "b4029c295d9c59daf0e048f717238a51d730add5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b4029c295d9c59daf0e048f717238a51d730add5", "message": "Direct TCP: address read-my-writes test failure (#6201)\n\n* Diagnostic improvements based on recent changes to 2.6.X\r\n\r\n* Tweaked diagnostic messages\r\n\r\n* Tweaks for diagnostics\r\n\r\n* Tweaks for cloud test runs\r\n\r\n* Tweaks for performance test run\r\n\r\n* Tidied two files and tweaked ReadMyWriteWorkflow for performace test run on cloud\r\n\r\n* Tidied some code and tweaked DEBUG messages for performance test run\r\n\r\n* Changes for verifying cross-partition query fix on azure cloud\r\n\r\n* Changes for verifying cross-partition query fix on azure cloud\r\n\r\n* Switched from DEBUG to INFO-level logging\r\n\r\n* Tweaked benchmark logger settings\r\n\r\n* Added a newline", "committedDate": "2019-11-07T01:44:22Z", "type": "commit"}, {"oid": "0dc65751f3e53267d901954208913789545c80a0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0dc65751f3e53267d901954208913789545c80a0", "message": "Port https://github.com/Azure/azure-sdk-for-java/pull/6148 (#6180)", "committedDate": "2019-11-07T02:39:20Z", "type": "commit"}, {"oid": "8279b91d0046ed264b117a13a6543ac89701fd80", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8279b91d0046ed264b117a13a6543ac89701fd80", "message": "adding partition migration flag (#6191)", "committedDate": "2019-11-08T00:57:47Z", "type": "commit"}, {"oid": "54401c6f876937ccbaa34b8221e6d777d5552208", "url": "https://github.com/Azure/azure-sdk-for-java/commit/54401c6f876937ccbaa34b8221e6d777d5552208", "message": "Revert \"adding partition migration flag (#6191)\" (#6224)\n\nThis reverts commit 8279b91d0046ed264b117a13a6543ac89701fd80.", "committedDate": "2019-11-08T01:29:56Z", "type": "commit"}, {"oid": "91b6715514f2cb901112097ef20beec472de4b40", "url": "https://github.com/Azure/azure-sdk-for-java/commit/91b6715514f2cb901112097ef20beec472de4b40", "message": "adding partition migration flag (#6228)\n\n* adding partition migration flag\r\n\r\n* minor code style fix\r\n\r\n* system.exit(.) will terminate the test suit, removed\r\n\r\n* minor code style, remove empty lines etc\r\n\r\n* true instead of boolean.tostirng", "committedDate": "2019-11-08T04:03:26Z", "type": "commit"}, {"oid": "81fc55e979096c387718f068b795fa01bb4bda2f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/81fc55e979096c387718f068b795fa01bb4bda2f", "message": "ChangeFeedProcessor: fix a race condition issue where the lease document has been updated while we are trying to write the current state like when check-pointing the continuation token - see https://github.com/Azure/azure-sdk-for-java/pull/6205/files (#6233)", "committedDate": "2019-11-08T06:37:41Z", "type": "commit"}, {"oid": "dfb3f436eeaae112d2e33dc14d7668be31ca75a6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dfb3f436eeaae112d2e33dc14d7668be31ca75a6", "message": "Updated internal lpackage name to implementation (#6234)\n\n* Updated package name from internal to implementation\r\n\r\n* Fixed typo from aure to azure", "committedDate": "2019-11-08T15:05:34Z", "type": "commit"}, {"oid": "584a7ac08bdaf1ef8b8c34e5b15cc3ebbdec8233", "url": "https://github.com/Azure/azure-sdk-for-java/commit/584a7ac08bdaf1ef8b8c34e5b15cc3ebbdec8233", "message": "Cosmos Issue #6250: Address memory leak in RntbdRequestTimer (#6251)\n\n* Corrected package misspelling in log4j.properties, removed System.exit from Main.java, and attempted to address a memory leak in the RntbdRequestTimer\r\n\r\n* Fixed a merge error and resolved #5043, Variables that specify time in long or int value should specify units\r\n\r\n* Minor code cleanup in RntbdTransportClient\r\n\r\n* Fixed a second merge issue", "committedDate": "2019-11-14T23:24:04Z", "type": "commit"}, {"oid": "e4617f2c95a34cc8967272a41b3d80b8470b0796", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e4617f2c95a34cc8967272a41b3d80b8470b0796", "message": "fixed emulator breaking change test (#6352)", "committedDate": "2019-11-14T23:25:57Z", "type": "commit"}, {"oid": "51a0abebac321bcfc6947b60cc51df1236144143", "url": "https://github.com/Azure/azure-sdk-for-java/commit/51a0abebac321bcfc6947b60cc51df1236144143", "message": "renaming diagnostic api (#6264)", "committedDate": "2019-11-15T20:20:47Z", "type": "commit"}, {"oid": "c43b7415cd89a84ba3daa2fad15c09a1387f9469", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c43b7415cd89a84ba3daa2fad15c09a1387f9469", "message": "Null Value holder change across collection cache and address cache layer (#6312)\n\n* Updated collection cache layer logic with v2. Removed Flux.empty() and Mono.empty() and instead used ValueHolder<>(null)\r\n\r\n* Fixed query test issues\r\n\r\n* Fixed emulator breaking change\r\n\r\n* Fixed DocumentProducerTest\r\n\r\n* Reverted emulator change from this PR\r\n\r\n* checked out Collection Crud Test from feature/cosmos/v4 branch", "committedDate": "2019-11-20T19:04:58Z", "type": "commit"}, {"oid": "b18a6aae4ccc0700716f5cadef663f3aa3556fb1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b18a6aae4ccc0700716f5cadef663f3aa3556fb1", "message": "Cosmos: clean test gates (#6373)\n\n* Corrected package misspelling in log4j.properties, removed System.exit from Main.java, and attempted to address a memory leak in the RntbdRequestTimer\r\n\r\n* Fixed a merge error and resolved #5043, Variables that specify time in long or int value should specify units\r\n\r\n* Minor code cleanup in RntbdTransportClient\r\n\r\n* Fixed a second merge issue\r\n\r\n* Re-enabled all tests\r\n\r\n* Attempt to fix a test break\r\n\r\n* Fixed a javadoc issue and bumped the value of RntbdRequestTimer.TIMER_RESOLUTION_IN_NANOS from 5 to 100 ms in the hopes of resolving a performance issue on Windows\r\n\r\n* Fixed a javadoc issues\r\n\r\n* Fixed a javadoc issue\r\n\r\n* Reenabled direct tcp backpressure tests\r\n\r\n* Fixed a javadoc issue\r\n\r\n* Updated collection cache layer logic with v2. Removed Flux.empty() and Mono.empty() and instead used ValueHolder<>(null)\r\n\r\n* Fixed query test issues\r\n\r\n* Fixed emulator breaking change\r\n\r\n* Attempt to fix CosmosPartitionKeyTests::testNonPartitionedCollectionOperations test failure which resulted from an incorrectly formed expected result string. Also: Removed unnecessary Ignore annotation imports.\r\n\r\n* Fixed DocumentProducerTest\r\n\r\n* Tweaked code comments\r\n\r\n* Renamed beforeMethods for easier interpretation of the TestNG logs. We might or might not keep the renames.\r\n\r\n* Renamed beforeClass methods for easier interpretation of the TestNG logs. We might or might not keep the renames.\r\n\r\n* Workaround issue #6346 to identify test failures that might lie behind it.\r\n\r\n* Workaround issue #6346 to identify test failures that might lie behind it.\r\n\r\n* Attempt to resolve a number of test failures\r\n\r\n* Attempt to resolve a number of test failures\r\n\r\n* Attempt to resolve a number of test failures\r\n\r\n* Ignore ConsistencyTests1::validateConsistentPrefixOnAsyncReplication test because it is configured to use BoundedStaleness consistency.\r\n\r\n* Attempt to workaround VeryLargeDocumentQueryTest::queryLargeDocuments test timeout by bumping TIMEOUT as well as SETUP_TIMEOUT interval from 60 to 120 seconds\r\n\r\n* Attempt to workaround VeryLargeDocumentQueryTest::queryLargeDocuments test timeout on Emulator runs by moving the queryLargeDocuments test out of the emulator group into the simple group.\r\n\r\n* Updated test TODOs based on current set of issues\r\n\r\n* Added TODOs and bumped SETUP_TIMEOUT for those test classes that routinely timeout during intialization on compute/memory constrained systems like CI\r\n\r\n* Enabled LogLevelTest::createDocumentWithTraceLevelAtRoot\r\n\r\n* Added TODO and bumped timeout interval for before_OrderbyDocumentQueryTest which itermittently times out in CI environments.\r\n\r\n* Added TODO, bumped timeout interval, and revised error handling strategy for before_ParallelDocumentQueryTest which itermittently fails due to a 503 on a query operation in CI environments.", "committedDate": "2019-11-21T20:55:43Z", "type": "commit"}, {"oid": "5a6d2ab6c9d437fcfc9f9fab7ad804b92c165f22", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5a6d2ab6c9d437fcfc9f9fab7ad804b92c165f22", "message": "Cosmos v4: ChangeFeedProcessor fix for load-balancing leases (#6430)\n\n* Ported fix for bug reported by Walmart where an exception issued by the change feed processor when read replicas are lagging behind the primary can exit the loop earlier and stop the processing.\r\nThe fix is to \"catch all\" exception handler to keep the loop going until the user stops the change feed processor.\r\n\r\n* fix spelling issue in the logger's warning message and add changelog entry", "committedDate": "2019-11-22T21:08:21Z", "type": "commit"}, {"oid": "d42d9e125f96e992450e12f860bf71d75d81cec7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d42d9e125f96e992450e12f860bf71d75d81cec7", "message": "[BUG] Update tests.yml with ACCOUNT_CONSISTENCY #6488 (#6490)\n\n* Corrected package misspelling in log4j.properties, removed System.exit from Main.java, and attempted to address a memory leak in the RntbdRequestTimer\r\n\r\n* Fixed a merge error and resolved #5043, Variables that specify time in long or int value should specify units\r\n\r\n* Minor code cleanup in RntbdTransportClient\r\n\r\n* Fixed a second merge issue\r\n\r\n* Attempt to resolve #6488\r\n\r\n* Attempt to resolve #6488 for this test which was the one test not addressed by my prior commit: Multimaster Single Region Direct\r\n\r\n* Attempt to resolve #6488 for this test which was the one test not addressed by my prior commit: Multimaster Single Region Direct\r\n\r\n* Attempt to fix Multimaster Single Region Direct test failures\r\n\r\n* Attempt to fix Multimaster Single Region Direct test failures\r\n\r\n* Attempt to fix Multimaster Single Region Direct test failures\r\n\r\n* Tests.yml tweaks", "committedDate": "2019-11-26T00:54:40Z", "type": "commit"}, {"oid": "23f7b4448d539557dd69fbee30a113ce5a582146", "url": "https://github.com/Azure/azure-sdk-for-java/commit/23f7b4448d539557dd69fbee30a113ce5a582146", "message": "V4 query api changes (#6464)\n\n* Changing query API to return FeedResponse<T> instead\r\n of FeedResponse<Document>\r\n\r\n* Cleanup and Enabling ignored query tests\r\n\r\n* Resolving conflicts\r\nImplementing PR comments\r\n\r\n* Fixing issue\r\n\r\n* Improving tests.", "committedDate": "2019-12-04T00:29:21Z", "type": "commit"}, {"oid": "c4955115ee9c2f14345c53d215843f0d93a61516", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c4955115ee9c2f14345c53d215843f0d93a61516", "message": "Fixes issue with template rendering. (#6654)", "committedDate": "2019-12-05T05:30:08Z", "type": "commit"}, {"oid": "7ca1dfa30d9572964aa57d52dd0edd801ab29fa4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7ca1dfa30d9572964aa57d52dd0edd801ab29fa4", "message": "Updating code owners file to include David, Kiran and exclude Chris (#6647)\n\n* Updating code owners file to include David and exclude Chris\r\n\r\n* Adding kiran as well as code owner", "committedDate": "2019-12-05T19:13:29Z", "type": "commit"}, {"oid": "e42f498446b8646cd1e5b857d52220792c33ab29", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e42f498446b8646cd1e5b857d52220792c33ab29", "message": "AsyncReadBenchmark should use v4 API e2e (#6683)\n\n* async read use v4 api e2e\r\n\r\n* minor update\r\n\r\n* removed unnecessary BridgeInternalBenchmark.java\r\n\r\n* added a TOOD as per code review comment\r\n\r\n* remoed a leftover import", "committedDate": "2019-12-06T22:09:26Z", "type": "commit"}, {"oid": "3f49ed4a9f842d69880133dea066d6fe0672416b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3f49ed4a9f842d69880133dea066d6fe0672416b", "message": "DR fix for V4 (#6271)\n\n* DR fix in V4\r\n\r\n* fixing build failure occure due to recent renaming of packages\r\n\r\n* removing flaky assert from the test", "committedDate": "2019-12-07T01:33:41Z", "type": "commit"}, {"oid": "1c8f7fabb942affa101b61e2fdb4dbebcd3af9ba", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1c8f7fabb942affa101b61e2fdb4dbebcd3af9ba", "message": "Adding memory/cpu statistics and gateway information (#6405)\n\n* Adding system information and gateway diagnostics\r\n\r\n* Adding more data for gateway\r\n\r\n* reverting redundant change\r\n\r\n* renaming variable name\r\n\r\n* resolving comments\r\n\r\n* creating OperatingSystemMXBean during class initialization\r\n\r\n* merging and resolving comment\r\n\r\n* Adding system information and gateway diagnostics\r\n\r\n* Adding more data for gateway\r\n\r\n* reverting redundant change\r\n\r\n* renaming variable name\r\n\r\n* resolving comments\r\n\r\n* creating OperatingSystemMXBean during class initialization\r\n\r\n* merging and resolving comment\r\n\r\n* resolving comments\r\n\r\n* Update CosmosResponseDiagnosticsTest.java\r\n\r\nRemoving redundant system out", "committedDate": "2019-12-10T21:02:52Z", "type": "commit"}, {"oid": "69374d4defe1d31231e9ee00911bd34f5d981b32", "url": "https://github.com/Azure/azure-sdk-for-java/commit/69374d4defe1d31231e9ee00911bd34f5d981b32", "message": "v4 Read Throughput Perf improvement (#6694)\n\n* improve Address Cache Physical address URI reconstruction\r\n\r\n * Physical addresses are constants, prior to this PR\r\n   we used to parse physical address as string to URI on each request.\r\n   This PR improves this.\r\n\r\n* replace String.format with concatination to avoid regex cost\r\n\r\n* SessionContainer ConcurrentHashMap lock contention improved\r\n\r\n * doing collectionResourceIdToSessionTokens.compute(collectionId, func)\r\n   causes a contention for the active collectionId.\r\n   This PR improves the contention lock\r\n\r\n* uri to url conversion (parsing) back and force eliminated\r\n\r\n * Uri to url conversaion parsing eliminated.\r\n\r\n* addressed review comments\r\n\r\n* fix broken tests\r\n\r\n* fix test", "committedDate": "2019-12-11T05:25:50Z", "type": "commit"}, {"oid": "1092090dadd701e1e1f457be053bc5c8981725d6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1092090dadd701e1e1f457be053bc5c8981725d6", "message": "v4: adds a in clause query benchmark (#6771)\n\n* benchmark added parallel in clause query, all query should measure latency\r\n\r\n* semaphore moded down", "committedDate": "2019-12-12T06:40:55Z", "type": "commit"}, {"oid": "c295e4dbaa0063fcdde363c13a20fe52f5559cc6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c295e4dbaa0063fcdde363c13a20fe52f5559cc6", "message": "Fixing checkstyle issues (#6643)\n\n* checkstyle changes\r\n\r\n* fixing check style fixes\r\n\r\n* Renaming builders\r\n\r\n* Fixing checkstyle issues\r\n\r\n* Removing unwanted change\r\n\r\n* Fixing failing unit tests\r\nRemoving throwing check exceptions from sync wrapper\r\n\r\n* Undoing incorrect text changes\r\n\r\n* Reverting the change that moves CosmosClientException to RuntimeException\r\nMoving back to Slf4j logger from azure core logger\r\nMoving back checkstyle fails to false. This has to enabled after\r\ndeciding on the logger\r\n\r\n* - Removing excludes list from checkstyle. This can be added later when\r\nenabling checkstyle violations in the right place (eng/exceptions)\r\n- Implementing PR comments\r\n\r\n* Commit to retrigger tests", "committedDate": "2019-12-13T17:44:48Z", "type": "commit"}, {"oid": "eba9ca831ab299dc14267934a9425623c2f058ac", "url": "https://github.com/Azure/azure-sdk-for-java/commit/eba9ca831ab299dc14267934a9425623c2f058ac", "message": "Takes advantage of Reactive Stream Concurrency for Query (Improves latency and fixes earlier issues) (#6835)\n\n* use reactive stream concurreny for query\r\n\r\n* address code review comment", "committedDate": "2019-12-16T23:53:09Z", "type": "commit"}, {"oid": "43fbc67e0768f25190269046e48ad61798c1b5f8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/43fbc67e0768f25190269046e48ad61798c1b5f8", "message": "Query plan, Offset Limit (#6756)\n\n* Porting query plan from v3 to v4\r\nPorting offset-limit from v3 to v4\r\nRemoving enableCrossPartitionQuery from FeedOptions\r\n\r\n* Fixing tests\r\n\r\n* Fixing tests\r\n\r\n* Merging v4\r\n\r\n* Fixing tests\r\n\r\n* Increasing timeout on verylargedocument query test subscriber\r\n\r\n* Moving VeryLargeDocumentQueryTest to simple group from emulator as the test is passing on prod endpoint and failing on emulator when run locally\r\nFixing id in a test\r\n\r\n* Increasing timeout for offerquery test as this is passing locally both\r\non emulator and prod", "committedDate": "2019-12-19T01:22:59Z", "type": "commit"}, {"oid": "1ae4b5d5c6bd92c8d73ee1a69a4f384839e4c3af", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1ae4b5d5c6bd92c8d73ee1a69a4f384839e4c3af", "message": "logging improvements (#7076)", "committedDate": "2020-01-03T18:39:24Z", "type": "commit"}, {"oid": "6555a47342feba8468f4ef9670a4ef1a14ef7144", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6555a47342feba8468f4ef9670a4ef1a14ef7144", "message": "Use v4 API in benchmark perfs (#7095)\n\n* logging improvements\r\n\r\n* use v4 api in benchmark", "committedDate": "2020-01-06T03:36:12Z", "type": "commit"}, {"oid": "0f1b5eae318d27a53d7c55c622b4da6c84626066", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0f1b5eae318d27a53d7c55c622b4da6c84626066", "message": "Port from v2.6 | Default Direct TCP Options feature to v4 (#7124)\n\n* Corrected package misspelling in log4j.properties, removed System.exit from Main.java, and attempted to address a memory leak in the RntbdRequestTimer\r\n\r\n* Fixed a merge error and resolved #5043, Variables that specify time in long or int value should specify units\r\n\r\n* Minor code cleanup in RntbdTransportClient\r\n\r\n* Fixed a second merge issue\r\n\r\n* Ported Default Direct TCP Options feature from v3\r\n\r\n* Updated change log\r\n\r\n* Updated javadocs", "committedDate": "2020-01-07T18:29:43Z", "type": "commit"}, {"oid": "3c7854061d10b0ef2389fcb42974e55bd084582b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3c7854061d10b0ef2389fcb42974e55bd084582b", "message": "Porting v3 cosmos stored proc npe issue (#7177)", "committedDate": "2020-01-07T20:54:43Z", "type": "commit"}, {"oid": "c65b0e01e6b6d60a1ebf99409ac4e365229e8af2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c65b0e01e6b6d60a1ebf99409ac4e365229e8af2", "message": "ported fix from v3 (#7145)", "committedDate": "2020-01-07T21:37:18Z", "type": "commit"}, {"oid": "a266412dbf4040eb2f79ed00de96cdfc9e64670c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a266412dbf4040eb2f79ed00de96cdfc9e64670c", "message": "Exlcuing beanutils library from commons validator because of security vulnerability (#7248)", "committedDate": "2020-01-08T00:27:08Z", "type": "commit"}, {"oid": "b6662a3406ae094525851cbcaf811e75e507b6d0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b6662a3406ae094525851cbcaf811e75e507b6d0", "message": "Added response decoder configuration to fix max header size issue (#7249)", "committedDate": "2020-01-08T01:57:58Z", "type": "commit"}, {"oid": "0f183707b38793031594651f66caf9cb188a868e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0f183707b38793031594651f66caf9cb188a868e", "message": "Adds support for documentDataFieldCount in benchmark app (#7252)\n\n* ported fix from v3\r\n\r\n* adds support for doc field count in benchmark tool", "committedDate": "2020-01-08T17:50:10Z", "type": "commit"}, {"oid": "26a9b990540579b63e0807d74b8bfb39b9d64333", "url": "https://github.com/Azure/azure-sdk-for-java/commit/26a9b990540579b63e0807d74b8bfb39b9d64333", "message": "Fixed parsing of consistency level string value from property bag (#7257)", "committedDate": "2020-01-08T18:18:34Z", "type": "commit"}, {"oid": "22ab58aaf2851a37a3d98126a87af94627a94172", "url": "https://github.com/Azure/azure-sdk-for-java/commit/22ab58aaf2851a37a3d98126a87af94627a94172", "message": "Exposed default time to live API on CosmosContainerProperties (#7245)\n\n* Exposed default time to live API on CosmosContainerProperties\r\n\r\n* Fixed response validator\r\n\r\n* Added unit as suffix to the API", "committedDate": "2020-01-08T21:54:46Z", "type": "commit"}, {"oid": "6262550ca2aa1a2e235ca40e509c9fb1e12aa3e4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6262550ca2aa1a2e235ca40e509c9fb1e12aa3e4", "message": "Adds support for Sync API read latency and read throughput benchmark (#7277)\n\n* ported fix from v3\r\n\r\n* adds support for doc field count in benchmark tool\r\n\r\n* sync api benchmark app\r\n\r\n* addressed review comments", "committedDate": "2020-01-09T16:32:45Z", "type": "commit"}, {"oid": "125f72de4bd9be829c45d6a8a26a68607e2b549b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/125f72de4bd9be829c45d6a8a26a68607e2b549b", "message": "Improve CosmosItem point operation by avoiding double json deserialization/re-serialization (#7293)\n\n* point read without json double deserialization\r\n\r\n* bugfix for delete empty string", "committedDate": "2020-01-09T18:09:30Z", "type": "commit"}, {"oid": "687178d9702ebe89636e02a0eb32e3f09f89d776", "url": "https://github.com/Azure/azure-sdk-for-java/commit/687178d9702ebe89636e02a0eb32e3f09f89d776", "message": "adds a config to benchmark for passing pk as a request option or extracting it from doc (#7338)\n\n* allow passing pk for write\r\n\r\n* added config file", "committedDate": "2020-01-10T16:41:38Z", "type": "commit"}, {"oid": "238f026d43961aa60ffa6ebc5ef3c663905d375d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/238f026d43961aa60ffa6ebc5ef3c663905d375d", "message": "read point operation for non item resource avoid duplicate json serializat\u2026 (#7316)\n\n* point operation for non item resource avoid duplicate json serialization/deserialization on top of v2\r\n\r\n* fix database from json", "committedDate": "2020-01-10T18:26:48Z", "type": "commit"}, {"oid": "e8401698c9b1f26a457a1e7c9a12358898e85143", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e8401698c9b1f26a457a1e7c9a12358898e85143", "message": "changes benchmark config name for more clarity (#7350)", "committedDate": "2020-01-10T21:58:26Z", "type": "commit"}, {"oid": "1da870f15d1ebcece262e09704eb857cdcea2451", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1da870f15d1ebcece262e09704eb857cdcea2451", "message": "Empty response content fix  (#7345)\n\n* Added error logs\r\n\r\n* Return empty string on empty content response from backend", "committedDate": "2020-01-10T23:56:43Z", "type": "commit"}, {"oid": "56532da8fdd1bcd85468889327624b651fbb0256", "url": "https://github.com/Azure/azure-sdk-for-java/commit/56532da8fdd1bcd85468889327624b651fbb0256", "message": "Don't retry on network failure on writes (#7243)\n\n* Don't retry on network failure on writes\r\n\r\n* Fixing the logic to retry on forbidden status code\r\n\r\n* Replaced this.isReadRequest with local isReadRequest", "committedDate": "2020-01-14T02:56:53Z", "type": "commit"}, {"oid": "30cb3a85b67724227fcd179f89b6d8b86796a103", "url": "https://github.com/Azure/azure-sdk-for-java/commit/30cb3a85b67724227fcd179f89b6d8b86796a103", "message": "write json serialization optimization (#7393)\n\n* point operation for non item resource avoid duplicate json serialization/deserialization on top of v2\r\n\r\n* fix database from json\r\n\r\n* use partition key in the option and don't re-serialize/de-serialize on write\r\n\r\n* optimize json serialization in write\r\n\r\n* fix broken tests\r\n\r\n* removed unused imports", "committedDate": "2020-01-14T21:57:10Z", "type": "commit"}, {"oid": "f9edad4a1795a47972405d07f7a553e447b0e90b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f9edad4a1795a47972405d07f7a553e447b0e90b", "message": "Direct TCP | Add support for request timelines to be used in diagnostic strings (#7227)\n\n* Corrected package misspelling in log4j.properties, removed System.exit from Main.java, and attempted to address a memory leak in the RntbdRequestTimer\r\n\r\n* Fixed a merge error and resolved #5043, Variables that specify time in long or int value should specify units\r\n\r\n* Minor code cleanup in RntbdTransportClient\r\n\r\n* Fixed a second merge issue\r\n\r\n* Checkpoint for safe keeping\r\n\r\n* Checkpoint for safe keeping\r\n\r\n* Checkpoint for safe keeping\r\n\r\n* Checkpoint for safe keeping (some testing successfully completed)\r\n\r\n* Checkpoint for safe keeping (some testing successfully completed)\r\n\r\n* Checkpoint for safe keeping (some testing successfully completed)\r\n\r\n* Checkpoint for safe keeping (some testing successfully completed)\r\n\r\n* Addressed merge issue\r\n\r\n* Optimized imports and tweaked some logger/argument validation messages\r\n\r\n* Ported Default Direct TCP Options feature from v3\r\n\r\n* Updated change log\r\n\r\n* Updated javadocs\r\n\r\n* Cleaned up RngtbClientChannelHealthChecker and turned all trace log-levels into debug log-levels in prep for switching to the Azure Central SDK logger.\r\n\r\n* Added documentation and tweaked some code for readability\r\n\r\n* javadoc tweak\r\n\r\n* javadoc tweaks\r\n\r\n* code tweaks\r\n\r\n* Added support for RntbdRequestRecord.Stage.RECEIVED\r\n\r\n* Tweaks for readability\r\n\r\n* Tweaks for readability\r\n\r\n* Optimized imports\r\n\r\n* CosmosClientException.setRequestTimeline is now package private and bridged for consumption by RntbdTransportClient\r\n\r\n* RntbdTransportClient now correctly handles cancellations that originate with Reactor\r\n\r\n* Moved RequestTimeline to com.azure.cosmos.implementation for use in HttpClient, HttpTransportClient, and RntbdTransportClient.", "committedDate": "2020-01-15T06:24:27Z", "type": "commit"}, {"oid": "8c7ca92fb180348d266a29e3ae185246b8409cbd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8c7ca92fb180348d266a29e3ae185246b8409cbd", "message": "Extending CosmosClientException with RuntimeException (#7423)\n\n* Extending CosmosClientException with RuntimeException\r\n\r\n* Updated tests to check for exception and not exception.getCause() as it returns null if the exception is itself the cause\r\n\r\n* Modified tests.yml to fix account_consistency issue\r\n\r\n* Added account_consistency to session for session single region run\r\n\r\n* added account_consistency back to env vars, removed from additional args\r\n\r\n* Made similar to feature/cosmos/v4 branch\r\n\r\n* Fixed name of single region non emulator tests", "committedDate": "2020-01-16T23:50:16Z", "type": "commit"}, {"oid": "940d139d7d031c9c1f9d08ecd56d43d7100bf7d0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/940d139d7d031c9c1f9d08ecd56d43d7100bf7d0", "message": "Removed RntbdTransportClient.doOnCancel action because of an issue in the consistency layer (#7544)\n\n* Corrected package misspelling in log4j.properties, removed System.exit from Main.java, and attempted to address a memory leak in the RntbdRequestTimer\r\n\r\n* Fixed a merge error and resolved #5043, Variables that specify time in long or int value should specify units\r\n\r\n* Minor code cleanup in RntbdTransportClient\r\n\r\n* Fixed a second merge issue\r\n\r\n* Ported Default Direct TCP Options feature from v3\r\n\r\n* Updated change log\r\n\r\n* Updated javadocs\r\n\r\n* Removed RntbdTransportClient.doOnCancel action because the backoff retry utility is causing its callback method to cancel.", "committedDate": "2020-01-18T05:42:19Z", "type": "commit"}, {"oid": "82474941e22547e83a4a43f054ccc5624e5a4ce0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/82474941e22547e83a4a43f054ccc5624e5a4ce0", "message": "Moving CosmosItem (read, replace, delete) API onto CosmosContainer (#7429)\n\n* Moving CosmosItem (read, replace, delete) API onto CosmosContainer\r\nCosmosItem API are changed typed API\r\nModifying tests to reflect the new item api\r\n\r\n* Fixing failing tests.\r\n\r\n* Avoiding multiple serializations/deserializations while converting to user types.\r\n\r\n* Addressing PR comments\r\n\r\n* Fixing tests\r\n\r\n* Fixing tests", "committedDate": "2020-01-23T08:18:03Z", "type": "commit"}, {"oid": "6ac9c41bb45f98a16a93e36538c1ec0c38442f26", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6ac9c41bb45f98a16a93e36538c1ec0c38442f26", "message": "Removed external dependency on commons-validator and commons-lang3 (#7674)", "committedDate": "2020-01-24T01:53:21Z", "type": "commit"}, {"oid": "7ca2cc1d5b2794c8ee725276b5fa7e276099fde7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7ca2cc1d5b2794c8ee725276b5fa7e276099fde7", "message": "improve toString to avoid reconstructing constant string values (#7629)\n\n* improve constant string reconstruction\r\n\r\n* cleanup", "committedDate": "2020-01-24T21:49:52Z", "type": "commit"}, {"oid": "9b409b60c304fa8ac52ab4497ec282233c3c85eb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9b409b60c304fa8ac52ab4497ec282233c3c85eb", "message": "Reverting secondary key change in testconfig (#7699)", "committedDate": "2020-01-24T21:50:42Z", "type": "commit"}, {"oid": "ff92b97b6ef081ae0e13f8b9962572b2d551a34b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ff92b97b6ef081ae0e13f8b9962572b2d551a34b", "message": "preparing for a quick release (#7775)\n\n* improvements in CosmosAsyncItemReponse\r\n\r\n* fixed query bug", "committedDate": "2020-01-29T00:23:50Z", "type": "commit"}, {"oid": "465c5d08bb9cf145cf2b7f5b0c148ef623e2d1a7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/465c5d08bb9cf145cf2b7f5b0c148ef623e2d1a7", "message": "4.0.0-beta1 (#7796)", "committedDate": "2020-01-29T01:06:21Z", "type": "commit"}, {"oid": "38b5b8f98f357a3f2d07ee7462383f8eadf0ab09", "url": "https://github.com/Azure/azure-sdk-for-java/commit/38b5b8f98f357a3f2d07ee7462383f8eadf0ab09", "message": "Adding retry context to diagnostics and moving to JSON format (#7156)\n\n* Adding system information and gateway diagnostics\r\n\r\n* Adding more data for gateway\r\n\r\n* reverting redundant change\r\n\r\n* renaming variable name\r\n\r\n* resolving comments\r\n\r\n* converting diagnostics to json\r\n\r\n* creating OperatingSystemMXBean during class initialization\r\n\r\n* build fix\r\n\r\n* merging and resolving comment\r\n\r\n* Adding system information and gateway diagnostics\r\n\r\n* Adding more data for gateway\r\n\r\n* reverting redundant change\r\n\r\n* renaming variable name\r\n\r\n* resolving comments\r\n\r\n* creating OperatingSystemMXBean during class initialization\r\n\r\n* merging and resolving comment\r\n\r\n* resolving comments\r\n\r\n* adding retry context to diagnostics\r\n\r\n* fixing test cases\r\n\r\n* adding status and substatus code in retry context\r\n\r\n* reverting unintentional change\r\n\r\n* removing space\r\n\r\n* adding mock tests\r\n\r\n* resolving comments\r\n\r\n* moving test file to other package\r\n\r\n* moving test class\r\n\r\n* moving json writer logic out of toString of lientsiderequest diagnostics\r\n\r\n* inculding last success call time in retry duration\r\n\r\n* logging whole exception instead of message\r\n\r\n* fixing test failure\r\n\r\n* covering mix case of 410s and 429s\r\n\r\n* fixing test case\r\n\r\n* fixing test case\r\n\r\n* optimizing number of interface methods\r\n\r\n* fixing test case\r\n\r\n* fixing test case", "committedDate": "2020-01-29T22:28:44Z", "type": "commit"}, {"oid": "03dda4975a3073af1afcb4b8e873ddee75af54ca", "url": "https://github.com/Azure/azure-sdk-for-java/commit/03dda4975a3073af1afcb4b8e873ddee75af54ca", "message": "[FEATURE] Cosmos Direct TCP | Add metrics for tracking the distribution of request and response message sizes (#7639)\n\n* Corrected package misspelling in log4j.properties, removed System.exit from Main.java, and attempted to address a memory leak in the RntbdRequestTimer\r\n\r\n* Fixed a merge error and resolved #5043, Variables that specify time in long or int value should specify units\r\n\r\n* Minor code cleanup in RntbdTransportClient\r\n\r\n* Fixed a second merge issue\r\n\r\n* Ported Default Direct TCP Options feature from v3\r\n\r\n* Updated change log\r\n\r\n* Updated javadocs\r\n\r\n* Removed RntbdTransportClient.doOnCancel action because the backoff retry utility is causing its callback method to cancel.\r\n\r\n* Updated sdk/cosmos/README.md with info on using system properties to select default Direct TCP options\r\n\r\n* Added RntbdMetrics.requestSize and RntbdMetrics.responseSize which track the distribution of Direct TCP request and response messages. Also: tidied the code in the files touched to eliminate checkstyle errors.", "committedDate": "2020-02-04T03:50:59Z", "type": "commit"}, {"oid": "03a86b2d44497a7b8ff10d2af52cc7ef6046c4cc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/03a86b2d44497a7b8ff10d2af52cc7ef6046c4cc", "message": "cosmos sdk re-organized conflicting dependencies. (#7903)\n\n* pom dependencies re-orged\r\n\r\n* reorged deps\r\n\r\n* updated missing httpconstant\r\n\r\n* bumped reactor-core to 3.3.2.release\r\n\r\n* fixed a bug in test, where partitionKey.None is re-wrapped in PartitionKey, not sure how this had passed CIs before\r\n\r\n* fixed some tests\r\n\r\n* added a log\r\n\r\n* updated test timeout", "committedDate": "2020-02-04T07:14:05Z", "type": "commit"}, {"oid": "8494bff7678195da6f54fb79c57909db9570746e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8494bff7678195da6f54fb79c57909db9570746e", "message": "fixed Mono -> Flux -> Mono back and forth conversion (#7904)\n\n* fixed Mono -> Flux -> Mono back and forth conversion\r\n\r\n* fixed a test", "committedDate": "2020-02-04T16:58:54Z", "type": "commit"}, {"oid": "10eab36403b4e13aa9ed05659b9dad03f0511db4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/10eab36403b4e13aa9ed05659b9dad03f0511db4", "message": "byte array output stream improvement (#7918)\n\n* improve byteArray coping and extraction of partitionKey version from PartitionKeyDefinition\r\n\r\n* disabled low level log in a test", "committedDate": "2020-02-04T19:25:08Z", "type": "commit"}, {"oid": "a997bae55174aa6baaf664c6f3593b36eebaf67c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a997bae55174aa6baaf664c6f3593b36eebaf67c", "message": "Cosmos Paged flux initial POC implementation v4 (#7839)\n\n* Updated pom files\r\n\r\n* Added CosmosContinuablePagedFlux initial impelmentation and POC for query\r\n\r\n* Changed constructor to package level. Updated mixed benchmark to take maxItemCount in the API\r\n\r\n* Experimenting Schedulers for elastic pool\r\n\r\n* Reverted flux experiments\r\n\r\n* Removed azure-core unwanted dependencies\r\n\r\n* Moved azure-core dependency to parent pom and used same version in azure-cosmos, benchmark and examples pom\r\n\r\n* Moved CosmosPagedFluxOptions to implementation package\r\n\r\n* Added back pressure tests for CosmosContinuablePagedFlux subscribe call\r\n\r\n* Updated queryItems sync API to return IterableStream", "committedDate": "2020-02-04T23:58:37Z", "type": "commit"}, {"oid": "78b0aecd2f4ee59355bb8dbf93bc312d0e84590f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/78b0aecd2f4ee59355bb8dbf93bc312d0e84590f", "message": "Making usingMultipleWriteLocations by default to true (#7847)\n\n* making usingMultipleWriteLocations by default to true\r\n\r\n* updating api doc", "committedDate": "2020-02-05T14:28:18Z", "type": "commit"}, {"oid": "cf266e50e0b3922b7b1cd72316acc09d0d5f91cb", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cf266e50e0b3922b7b1cd72316acc09d0d5f91cb", "message": "CosmosContinuablePagedFluxImplementation of readAllItems API (#7981)\n\n* CosmosContinuablePagedFluxImplementation of readAllItems API\r\n\r\n* Fixed readDocuments test", "committedDate": "2020-02-05T15:52:52Z", "type": "commit"}, {"oid": "db6f5d525e5cd634c050c6899edc806a4b7fe5ad", "url": "https://github.com/Azure/azure-sdk-for-java/commit/db6f5d525e5cd634c050c6899edc806a4b7fe5ad", "message": "Updated queryContainers, readAllContainers, queryConflicts, readConflitcs API with CosmosContinuablePagedFlux (#7988)", "committedDate": "2020-02-05T22:56:21Z", "type": "commit"}, {"oid": "0c7b98449768de9d61397b0cc53ef05c234ff3ef", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0c7b98449768de9d61397b0cc53ef05c234ff3ef", "message": "Paged Flux implementation of read and query Users API (#7993)", "committedDate": "2020-02-06T05:48:42Z", "type": "commit"}, {"oid": "2bf34ebd8e5449cf6ecbf43cc030f5aef3a8bd83", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2bf34ebd8e5449cf6ecbf43cc030f5aef3a8bd83", "message": "minor string handling optimization (#7908)\n\n* ConsistencyLevel enum handling\r\n\r\n* minor string handling, uuid to string conversion, string.split\r\n\r\n* rolled back a change", "committedDate": "2020-02-06T07:50:28Z", "type": "commit"}, {"oid": "a98253613aa3578997bfc1ac0d4351f5ed46c473", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a98253613aa3578997bfc1ac0d4351f5ed46c473", "message": "Implemented CosmosPagedFlux for read and query database calls (#8011)", "committedDate": "2020-02-07T02:33:55Z", "type": "commit"}, {"oid": "e89ff9245d1353a3dea918bfff42d61d8ab49112", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e89ff9245d1353a3dea918bfff42d61d8ab49112", "message": "Paged Flux implementation of user, script, trigger, stored procedure (#8017)\n\n* Paged Flux implementation of user, script, trigger, stored procedure\r\n\r\n* Removed Flux<FeedResponse> from Basic Demo and Query Benchmark", "committedDate": "2020-02-07T08:30:27Z", "type": "commit"}, {"oid": "e182a0e46b0e16cbaf1c3d3b299de8ce2c729e24", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e182a0e46b0e16cbaf1c3d3b299de8ce2c729e24", "message": "deserialize after read in read benchmark (#8027)", "committedDate": "2020-02-07T17:09:24Z", "type": "commit"}, {"oid": "b0ef632b09098a6dae5099c2e6d2479089af1555", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b0ef632b09098a6dae5099c2e6d2479089af1555", "message": "fixed jackson dependency conflict (#8032)", "committedDate": "2020-02-08T20:46:09Z", "type": "commit"}, {"oid": "d6c3daa3c4be29b59e0b23cea747e807dd99e850", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d6c3daa3c4be29b59e0b23cea747e807dd99e850", "message": "improves logic to avoid deserializing PartitionKeyInternal from json header in AddressResolver (#8056)\n\n* improves logic to avoid deserializing parition-key-internal after serialization\r\n\r\n* set PartitionKeyInternal in DSR everywhere\r\n\r\n* set partitionKeyInternal in all places PartitionKey Header is set in DSR\r\n* added a safe guard in AddressResolver to deserialize PartitionKeyHeader if PartitionKeyInternal\r\n  is not present in DSR", "committedDate": "2020-02-10T05:47:23Z", "type": "commit"}, {"oid": "44ba79d0d7587c8e5b05d260990fd5fe925fa284", "url": "https://github.com/Azure/azure-sdk-for-java/commit/44ba79d0d7587c8e5b05d260990fd5fe925fa284", "message": "Adding Transport client request life cycle timeline on diagnostics (#7500)\n\n* adding transport client granular info to diagnostics\r\n\r\n* removing redundant api from RequestTimeline\r\n\r\n* moving ReactorNettyRequestRecord inside HttpRequest\r\n\r\n* clearing unused import\r\n\r\n* adding rntbd request response on each store response\r\n\r\n* removing extra import", "committedDate": "2020-02-10T14:45:13Z", "type": "commit"}, {"oid": "69be01155a9fcf4bf0f862d41057e64575faef7e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/69be01155a9fcf4bf0f862d41057e64575faef7e", "message": "enable jackson after-burner module as based on jackson recommendation it has perf benefit (10%-20%) improvement in serialization/deserialization (#8059)", "committedDate": "2020-02-10T16:03:51Z", "type": "commit"}, {"oid": "0f576e97149104292b9639860341ab1068c1a152", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0f576e97149104292b9639860341ab1068c1a152", "message": "added retry analyzer for failing tests (#8083)\n\n* added retry analyzer for failing tests\r\n\r\n* minor change in retryanalyzer", "committedDate": "2020-02-10T19:54:07Z", "type": "commit"}, {"oid": "f88da15cbfe38f19dd2d87dc59096632a390baed", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f88da15cbfe38f19dd2d87dc59096632a390baed", "message": "Added RequestVerb, reduced the toLower invocation (#8073)\n\nCosmosKeyCredentialTest failing on 429, which is fixed in other PR.", "committedDate": "2020-02-10T20:08:30Z", "type": "commit"}, {"oid": "349b13293a2212c613484a74d34bee302e23b03b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/349b13293a2212c613484a74d34bee302e23b03b", "message": "disable session capturing by default for non-session modes (#8064)\n\n* disable session capturing by default for non-session modes\r\n\r\n* cleanup comment\r\n\r\n* fixed test\r\n\r\n* addressed review comment", "committedDate": "2020-02-11T03:02:38Z", "type": "commit"}, {"oid": "2798db6878fa1478839db72d8eb71097b16a20f0", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2798db6878fa1478839db72d8eb71097b16a20f0", "message": "Implementation of CosmosContinuablePagedIterable for sync APIs (#8086)\n\n* Implementation of CosmosContinuablePagedIterable for sync APIs\r\n\r\n* Update constructor to package private, Added test case for continuation token and page size\r\n\r\n* Updated query with continuation token and page size test", "committedDate": "2020-02-11T09:39:12Z", "type": "commit"}, {"oid": "33f4f7c450537171b9e18601df316f8b38dbe308", "url": "https://github.com/Azure/azure-sdk-for-java/commit/33f4f7c450537171b9e18601df316f8b38dbe308", "message": "initial commit (#8084)", "committedDate": "2020-02-11T17:32:59Z", "type": "commit"}, {"oid": "4cdab5979a928735348f8b78e0fd2b7d997b5701", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4cdab5979a928735348f8b78e0fd2b7d997b5701", "message": "removed regex in rntbd, added afterburner to rntbd objectmapper (#8117)\n\n- Replace regex String.split() with non regex StringUtils.split() (the rationale is regex is expensive)\r\n- Registered jackson after-burner module to rntbd for improving serialization/deserialization (this is based on jackson perf guide and as per my measurement in general improves serialization/deserialization perf by 10%, I noticed some of the rntbd components are using jackson for informational debugging info. So this improves the perf for serializing those debugging constructs rather than the actual data.", "committedDate": "2020-02-12T07:04:31Z", "type": "commit"}, {"oid": "be5e1b97dda68e36f53ec997e72ec5567e6ebf86", "url": "https://github.com/Azure/azure-sdk-for-java/commit/be5e1b97dda68e36f53ec997e72ec5567e6ebf86", "message": "Moving CosmosItemProperties to implementation (#8075)\n\n* Moving CosmosItemProperties to implementation\r\nRemoving CosmosItemProperties from public surface of the SDK\r\nMoved the ChangeFeedProcessor to use JsonNode instead of CosmosItemProperties\r\nRefactoring Item tests.\r\n\r\n* Adding header\r\n\r\n* fixing test\r\n\r\n* Addressing pr comments\r\n\r\n* Fixing issue\r\n\r\n* Fixing test failure\r\n\r\n* Resolving merge conflicts\r\nMaking getProperties in Cosmos*ItemResponse package-private and\r\n refactoring calls related to it", "committedDate": "2020-02-12T08:44:43Z", "type": "commit"}, {"oid": "fc1faac1a779a7b77a00fba6292a74930938817d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc1faac1a779a7b77a00fba6292a74930938817d", "message": "Updated the iteration over query items sync API test (#8154)\n\n* Updated the iteration over query items sync\r\n\r\n* Reverted unnecessary change\r\n\r\n* Updated loop", "committedDate": "2020-02-13T01:52:53Z", "type": "commit"}, {"oid": "6c11cca309cc00b9e51fab566e0cdf9ba00a0381", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6c11cca309cc00b9e51fab566e0cdf9ba00a0381", "message": "Adding readMany api that reads many documents at once based on id and\u2026 (#8123)\n\n* Adding readMany api that reads many documents at once based on id and partitionkey.\r\nThis avoids queryplan round trip, and does query only required partitions for required elements.\r\n\r\n* Addressing PR comments\r\n\r\n* Skipping readMany test in gateway mode\r\n\r\n* added support for pk = '/id', and added support for nested partition-key path\r\n\r\n* added support for typed based translation to readmany\r\n\r\n* moved readmany to ItemOperation\r\n\r\n* added a sync method\r\n\r\n* fixed parallelism in readMany\r\n\r\nCo-authored-by: Mohammad Derakhshani <moderakh@users.noreply.github.com>", "committedDate": "2020-02-13T17:26:16Z", "type": "commit"}, {"oid": "67c69fee05ce02f4ba77e99d2a719834470aa283", "url": "https://github.com/Azure/azure-sdk-for-java/commit/67c69fee05ce02f4ba77e99d2a719834470aa283", "message": "4.0.0-preview.2 (#8192)", "committedDate": "2020-02-14T01:17:16Z", "type": "commit"}, {"oid": "1f1d3ac94cd5106490cf1b499eab61328bc1ac97", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1f1d3ac94cd5106490cf1b499eab61328bc1ac97", "message": "Initial merge state, looks good, builds fine, unit tests pass", "committedDate": "2020-02-20T19:35:58Z", "type": "commit"}, {"oid": "a6596094eb9411d865c2701d28856ac6159b8ad5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a6596094eb9411d865c2701d28856ac6159b8ad5", "message": "Added header, and fixed tests.yml", "committedDate": "2020-02-20T21:03:19Z", "type": "commit"}, {"oid": "b0c0325c84ade27b4db508b9c26e8e07f3ac05d7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b0c0325c84ade27b4db508b9c26e8e07f3ac05d7", "message": "Fixed tests.yml", "committedDate": "2020-02-20T21:03:35Z", "type": "commit"}, {"oid": "77916671b558460bb4437b32b7aebe62fcbd6348", "url": "https://github.com/Azure/azure-sdk-for-java/commit/77916671b558460bb4437b32b7aebe62fcbd6348", "message": "Added and modified READMEs", "committedDate": "2020-02-20T21:13:19Z", "type": "commit"}, {"oid": "c93c71bf46a3da4b8378b0e86fa3a60dcebf8f51", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c93c71bf46a3da4b8378b0e86fa3a60dcebf8f51", "message": "Parent pom removal", "committedDate": "2020-02-20T23:04:55Z", "type": "commit"}, {"oid": "2ede3a0994480131df14059f0409ec82ee216d3b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2ede3a0994480131df14059f0409ec82ee216d3b", "message": "Removed README from parent directory", "committedDate": "2020-02-20T23:10:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMyMjUyMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8351#discussion_r382322520", "bodyText": "FWIW we still recommend having a root level README file that describes the set of packages in the folder. Something like https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/storage/README.md", "author": "weshaggard", "createdAt": "2020-02-20T23:44:24Z", "path": "sdk/cosmos/README.md", "diffHunk": "@@ -1,296 +0,0 @@\n-\ufeff# Azure CosmosDB Client Library for Java", "originalCommit": "2ede3a0994480131df14059f0409ec82ee216d3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMyMzUyMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8351#discussion_r382323520", "bodyText": "Sure, we can add it. That would be helpful to the users.", "author": "kushagraThapar", "createdAt": "2020-02-20T23:47:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMyMjUyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMyMzYzMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/8351#discussion_r382323632", "bodyText": "Probably not as part of this PR, once we improve the content of other READMEs, may be then.", "author": "kushagraThapar", "createdAt": "2020-02-20T23:47:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjMyMjUyMA=="}], "type": "inlineReview"}, {"oid": "225a15b5a697ea21279d7552e8460d3bba135a35", "url": "https://github.com/Azure/azure-sdk-for-java/commit/225a15b5a697ea21279d7552e8460d3bba135a35", "message": "Added temporary examples readme", "committedDate": "2020-02-21T00:14:00Z", "type": "commit"}]}