{"pr_number": 18063, "pr_title": "[Batch] Exposes BatchClient factory method", "pr_createdAt": "2020-12-10T03:56:15Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/18063", "timeline": [{"oid": "2a1584636e4c76ae538fefba14172dbbc0aa632e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2a1584636e4c76ae538fefba14172dbbc0aa632e", "message": "[Batch] Exposes BatchClient factory methodUsed for a workaround that overrides the JSON deserializer.", "committedDate": "2020-12-10T04:20:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM1Mzc0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r540353749", "bodyText": "I don't see an 8.1.0 version in Maven, are we looking to release this fix as 8.1.0 or 8.1.1?", "author": "alzimmermsft", "createdAt": "2020-12-10T17:21:44Z", "path": "eng/spotbugs-aggregate-report/pom.xml", "diffHunk": "@@ -112,7 +112,7 @@\n         <dependency>\n           <groupId>com.microsoft.azure</groupId>\n           <artifactId>azure-batch</artifactId>\n-          <version>8.1.0</version> <!-- {x-version-update;com.microsoft.azure:azure-batch;current} -->\n+          <version>8.1.1</version> <!-- {x-version-update;com.microsoft.azure:azure-batch;current} -->", "originalCommit": "2a1584636e4c76ae538fefba14172dbbc0aa632e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM1NjE0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r540356143", "bodyText": "I think the previous version was 8.1.0-beta.1 (which is a misnomer). The new version should be 8.1.1.", "author": "gingi", "createdAt": "2020-12-10T17:25:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM1Mzc0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM4OTIzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r540389231", "bodyText": "@gingi I don't see 8.1.0-beta.1 either in Maven. The last released version is 8.0.0. So, the next version should be 8.0.1 if it's a patch release or 8.1.0 if it's a minor version release.", "author": "srnagar", "createdAt": "2020-12-10T18:11:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM1Mzc0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM1NDE0Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r540354143", "bodyText": "nit: This line looks like it can be removed", "author": "alzimmermsft", "createdAt": "2020-12-10T17:22:16Z", "path": "sdk/batch/microsoft-azure-batch/CHANGELOG.md", "diffHunk": "@@ -1,10 +1,16 @@\n # Release History\n \n+## 8.1.1 (Unreleased)\n+\n+- Exposes a BatchClient factory method\n+\n ## 8.1.0 (Unreleased)\n+\n ### Features\n+\n - Adds support for task slots\n-    - `JobOperations.getTaskSlotCounts()` returns task slot counts\n-    - `JobOperations.getTaskResult()` returns a `TaskCountsResult` object containing both task and slot counts\n+  - `JobOperations.getTaskSlotCounts()` returns task slot counts\n+  - `JobOperations.getTaskResult()` returns a `TaskCountsResult` object containing both task and slot counts\n \n ## 8.1.0-beta.1 (Unreleased)", "originalCommit": "2a1584636e4c76ae538fefba14172dbbc0aa632e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM3NDYyNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r540374624", "bodyText": "Will fix.", "author": "gingi", "createdAt": "2020-12-10T17:49:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM1NDE0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM1NDQzMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r540354430", "bodyText": "Whichever version we plan to release we'll want to add a date to it", "author": "alzimmermsft", "createdAt": "2020-12-10T17:22:36Z", "path": "sdk/batch/microsoft-azure-batch/CHANGELOG.md", "diffHunk": "@@ -1,10 +1,16 @@\n # Release History\n \n+## 8.1.1 (Unreleased)", "originalCommit": "2a1584636e4c76ae538fefba14172dbbc0aa632e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM3NDc5OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r540374799", "bodyText": "Should I use today's date?", "author": "gingi", "createdAt": "2020-12-10T17:50:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM1NDQzMA=="}], "type": "inlineReview"}, {"oid": "e90680f1f8e89f2fa90480a4637948656f00c496", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e90680f1f8e89f2fa90480a4637948656f00c496", "message": "[Batch] Exposes BatchClient factory method\n\nUsed for a workaround that overrides the JSON deserializer.", "committedDate": "2020-12-10T17:58:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5Mzk0Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r540393947", "bodyText": "I think if there's an issue in FlatteningDeserializer, then we should fix that issue instead of making an internal method public to work around this issue. Once this method is made public, it cannot be removed without causing a breaking change.", "author": "srnagar", "createdAt": "2020-12-10T18:18:41Z", "path": "sdk/batch/microsoft-azure-batch/src/main/java/com/microsoft/azure/batch/BatchClient.java", "diffHunk": "@@ -98,7 +98,7 @@ public static BatchClient open(BatchCredentials credentials) {\n      * @param baseUrl A  String object specifying the the batch end point.\n      * @return The new {@link BatchClient} instance.\n      */\n-    static BatchClient open(RestClient restClient, String baseUrl) {\n+    public static BatchClient open(RestClient restClient, String baseUrl) {", "originalCommit": "e90680f1f8e89f2fa90480a4637948656f00c496", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTM4MDIwOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r541380208", "bodyText": "Without this method, current users cannot make any changes to the proxy configuration or logging, or retry, or anything. The only public method to create a BatchClient allows passing in only the credential.", "author": "jianghaolu", "createdAt": "2020-12-11T22:46:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5Mzk0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTUwMDU1OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r551500558", "bodyText": "Thanks for the clarification @jianghaolu . Ideally, we should have named this method create() but since there is already a public method called open() that creates a BatchClient using credentials, we should continue to use the same name.", "author": "srnagar", "createdAt": "2021-01-04T18:50:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM5Mzk0Nw=="}], "type": "inlineReview"}, {"oid": "feb6cae7cabb3a65999d2063999a44dab187779f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/feb6cae7cabb3a65999d2063999a44dab187779f", "message": "[Batch] Exposes BatchClient factory method\n\nUsed for a workaround that overrides the JSON deserializer.", "committedDate": "2021-01-04T20:36:26Z", "type": "forcePushed"}, {"oid": "f824a8b94466914fad40d31f1efe86071ee54bcd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f824a8b94466914fad40d31f1efe86071ee54bcd", "message": "[Batch] Exposes BatchClient factory method\n\nUsed for a workaround that overrides the JSON deserializer.", "committedDate": "2021-01-05T19:36:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjIxNzA4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/18063#discussion_r552217087", "bodyText": "Should be 8.1.0 (2021-01-05)", "author": "jianghaolu", "createdAt": "2021-01-05T21:43:18Z", "path": "sdk/batch/microsoft-azure-batch/CHANGELOG.md", "diffHunk": "@@ -1,12 +1,16 @@\n # Release History\n \n+## 8.1.1 (2020-12-10)", "originalCommit": "f824a8b94466914fad40d31f1efe86071ee54bcd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c161208ee16135d259717890e87fb687980c337d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c161208ee16135d259717890e87fb687980c337d", "message": "[Batch] Exposes BatchClient factory method\n\nUsed for a workaround that overrides the JSON deserializer.", "committedDate": "2021-01-05T21:52:20Z", "type": "commit"}, {"oid": "c161208ee16135d259717890e87fb687980c337d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c161208ee16135d259717890e87fb687980c337d", "message": "[Batch] Exposes BatchClient factory method\n\nUsed for a workaround that overrides the JSON deserializer.", "committedDate": "2021-01-05T21:52:20Z", "type": "forcePushed"}]}