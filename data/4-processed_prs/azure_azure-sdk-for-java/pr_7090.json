{"pr_number": 7090, "pr_title": "Recreating connections on transient failures", "pr_createdAt": "2020-01-03T08:55:54Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/7090", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk1NzYwMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7090#discussion_r362957600", "bodyText": "This is not the copyright text we use. Is EventHubConnectionProcessor code provided by Pivotal Software and they require us to have this copyright text instead?", "author": "srnagar", "createdAt": "2020-01-03T20:53:15Z", "path": "sdk/eventhubs/azure-messaging-eventhubs/src/main/java/com/azure/messaging/eventhubs/implementation/EventHubConnectionProcessor.java", "diffHunk": "@@ -0,0 +1,268 @@\n+/*\n+ * Copyright (c) 2011-2017 Pivotal Software Inc, All Rights Reserved.", "originalCommit": "3e032bf6f61e1347b0b9eb35ea59ee11476334b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk1Nzc5NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7090#discussion_r362957794", "bodyText": "Oh no. I have no idea where I had that from. I think I was looking at some random Spring boot code when I was copying headers.", "author": "conniey", "createdAt": "2020-01-03T20:53:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk1NzYwMA=="}], "type": "inlineReview"}, {"oid": "082937ffda014d8676eb7d8be3359e79aea642fc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/082937ffda014d8676eb7d8be3359e79aea642fc", "message": "Fix checkstyle.", "committedDate": "2020-01-04T15:08:51Z", "type": "forcePushed"}, {"oid": "94987649d8dba7470648fba27f61450503ca0e88", "url": "https://github.com/Azure/azure-sdk-for-java/commit/94987649d8dba7470648fba27f61450503ca0e88", "message": "Fix unit tests.", "committedDate": "2020-01-07T09:14:06Z", "type": "forcePushed"}, {"oid": "378fb1d7a94ce7334bbaad1d3d0e3c555d34b6a2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/378fb1d7a94ce7334bbaad1d3d0e3c555d34b6a2", "message": "Adding EventHubConnectionProcessor.", "committedDate": "2020-01-07T19:14:22Z", "type": "commit"}, {"oid": "b36d9f63763721505199502eb59b80a226415bb1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b36d9f63763721505199502eb59b80a226415bb1", "message": "Adding tests.", "committedDate": "2020-01-07T19:14:22Z", "type": "commit"}, {"oid": "8c9bfbdc265d9d82da19e002c2ca0760fe617ddd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8c9bfbdc265d9d82da19e002c2ca0760fe617ddd", "message": "Removing unneeded local variable assignment.", "committedDate": "2020-01-07T19:14:23Z", "type": "commit"}, {"oid": "66e9fca047c2f8c8d8da93a7f66392af9eede4ba", "url": "https://github.com/Azure/azure-sdk-for-java/commit/66e9fca047c2f8c8d8da93a7f66392af9eede4ba", "message": "Add tests for fetching new connection.", "committedDate": "2020-01-07T19:14:23Z", "type": "commit"}, {"oid": "e410ce187f560f59400415026fed4bb578160702", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e410ce187f560f59400415026fed4bb578160702", "message": "Replace ConcurrentLinkedDequeue with ArrayList.", "committedDate": "2020-01-07T19:14:23Z", "type": "commit"}, {"oid": "64ba300756ae12f07d28760a97191cfe32fdbeb3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/64ba300756ae12f07d28760a97191cfe32fdbeb3", "message": "Add tests to ensure on error conditions.", "committedDate": "2020-01-07T19:14:23Z", "type": "commit"}, {"oid": "721d33e1c4648c8b5c18b80e6309443b571cd687", "url": "https://github.com/Azure/azure-sdk-for-java/commit/721d33e1c4648c8b5c18b80e6309443b571cd687", "message": "Require not null for EventConnection subscribe methods\u02c6.", "committedDate": "2020-01-07T19:14:23Z", "type": "commit"}, {"oid": "67cfe0f9809e6980cc84fc3f5de2d4f6726a0984", "url": "https://github.com/Azure/azure-sdk-for-java/commit/67cfe0f9809e6980cc84fc3f5de2d4f6726a0984", "message": "Remove circuar dependency on EventHubConnection from EventHubConnectionProcessor", "committedDate": "2020-01-07T19:14:24Z", "type": "commit"}, {"oid": "0214e1ae944db496f7ec502f8101e86f85fdc055", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0214e1ae944db496f7ec502f8101e86f85fdc055", "message": "Removing EventHubConnection.", "committedDate": "2020-01-07T19:14:24Z", "type": "commit"}, {"oid": "a3a00308e7da2ed46b1e84da74c80d7e735ca5cc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a3a00308e7da2ed46b1e84da74c80d7e735ca5cc", "message": "Update AmqpConnection interface to create send and receive links.", "committedDate": "2020-01-07T19:14:24Z", "type": "commit"}, {"oid": "aaa362633dc608284d1921edc993e28d16af4b0c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/aaa362633dc608284d1921edc993e28d16af4b0c", "message": "Fixing errors in ConnectionProcessor and update ReactorAmqpConnection to keep track of send links.", "committedDate": "2020-01-07T19:14:24Z", "type": "commit"}, {"oid": "603833fb568039439cbefda8f0469dd8865d9c76", "url": "https://github.com/Azure/azure-sdk-for-java/commit/603833fb568039439cbefda8f0469dd8865d9c76", "message": "Update clients to use ConnectionProcessor.", "committedDate": "2020-01-07T19:14:25Z", "type": "commit"}, {"oid": "29b3a99806f563ea57232f419388d55734786f06", "url": "https://github.com/Azure/azure-sdk-for-java/commit/29b3a99806f563ea57232f419388d55734786f06", "message": "Update tests.", "committedDate": "2020-01-07T19:14:25Z", "type": "commit"}, {"oid": "89f5e19a04085943bc310d91f6f5e055800ad965", "url": "https://github.com/Azure/azure-sdk-for-java/commit/89f5e19a04085943bc310d91f6f5e055800ad965", "message": "Fix tests for consumers.", "committedDate": "2020-01-07T19:14:25Z", "type": "commit"}, {"oid": "abc2a70979f036f896c83344ebe0ebf6578fcaf4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/abc2a70979f036f896c83344ebe0ebf6578fcaf4", "message": "Fixing EHubClientBuilder to repeat the mono, so we have a potentially infinite stream of connections.", "committedDate": "2020-01-07T19:14:25Z", "type": "commit"}, {"oid": "aec04f6a3890bc25558f250bdac889e3baefd3e8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/aec04f6a3890bc25558f250bdac889e3baefd3e8", "message": "Add test to verify that on non-transient errors, the connection is not revived.", "committedDate": "2020-01-07T19:14:26Z", "type": "commit"}, {"oid": "7a173c0f3cb61273fe048ffc68f3fce6135e1923", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7a173c0f3cb61273fe048ffc68f3fce6135e1923", "message": "Adding log messages.", "committedDate": "2020-01-07T19:14:26Z", "type": "commit"}, {"oid": "d53234e3ee8e2332705698a69a8c9473bfa500ef", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d53234e3ee8e2332705698a69a8c9473bfa500ef", "message": "Fix header.", "committedDate": "2020-01-07T19:14:26Z", "type": "commit"}, {"oid": "30d4ec327aac9fd67787789770181bea40e34521", "url": "https://github.com/Azure/azure-sdk-for-java/commit/30d4ec327aac9fd67787789770181bea40e34521", "message": "Fix checkstyle.", "committedDate": "2020-01-07T19:14:26Z", "type": "commit"}, {"oid": "ad9be4abf6fa659922302c461d9981885c3aec2d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ad9be4abf6fa659922302c461d9981885c3aec2d", "message": "Remove logging for info.", "committedDate": "2020-01-07T19:14:26Z", "type": "commit"}, {"oid": "2a8dd64aadca183232c1ab1814ca5d682d86c35d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2a8dd64aadca183232c1ab1814ca5d682d86c35d", "message": "Fix Event Hub Consumer tests.", "committedDate": "2020-01-07T19:14:27Z", "type": "commit"}, {"oid": "d44bfa677537a183542b81f531d044f06b94f29b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d44bfa677537a183542b81f531d044f06b94f29b", "message": "Using parallel scheduler.", "committedDate": "2020-01-07T19:14:27Z", "type": "commit"}, {"oid": "10737630e976b84917b3027395257e0d56adcec3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/10737630e976b84917b3027395257e0d56adcec3", "message": "Delay retrying EventHubConnection creation on a transient error.", "committedDate": "2020-01-07T19:14:27Z", "type": "commit"}, {"oid": "2f74cacd783302287e68653f0320bb63f1f1f761", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2f74cacd783302287e68653f0320bb63f1f1f761", "message": "Update to .toMillis()", "committedDate": "2020-01-07T19:14:27Z", "type": "commit"}, {"oid": "526f996e88c6597c01c2bb1d3d9e1f026205e389", "url": "https://github.com/Azure/azure-sdk-for-java/commit/526f996e88c6597c01c2bb1d3d9e1f026205e389", "message": "Setting retry options.", "committedDate": "2020-01-07T19:14:27Z", "type": "commit"}, {"oid": "ca903dc1afa25685639da1afc605c5c876905638", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ca903dc1afa25685639da1afc605c5c876905638", "message": "Complete subscriber.", "committedDate": "2020-01-07T19:14:28Z", "type": "commit"}, {"oid": "079dbdbccc6226404be321ba17d870153ec2b5bd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/079dbdbccc6226404be321ba17d870153ec2b5bd", "message": "Consolidate request from upstream for new connection.", "committedDate": "2020-01-07T19:14:28Z", "type": "commit"}, {"oid": "38fe3a56f44616622dda3227c2f99454b530b054", "url": "https://github.com/Azure/azure-sdk-for-java/commit/38fe3a56f44616622dda3227c2f99454b530b054", "message": "Fix unit tests.", "committedDate": "2020-01-07T19:14:28Z", "type": "commit"}, {"oid": "27614c58b37216aa83e951ec7c806e502a48f79b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/27614c58b37216aa83e951ec7c806e502a48f79b", "message": "Not requesting new connection unless needed.", "committedDate": "2020-01-07T19:14:28Z", "type": "commit"}, {"oid": "cd404de02877c94492cd90e23542627b0db8bfa8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cd404de02877c94492cd90e23542627b0db8bfa8", "message": "Fixing tests.", "committedDate": "2020-01-07T19:14:28Z", "type": "commit"}, {"oid": "7dff1595e66f89b2428a6c63fb1f4d3655dfd598", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7dff1595e66f89b2428a6c63fb1f4d3655dfd598", "message": "Fixing checkstyle issues.", "committedDate": "2020-01-07T19:21:46Z", "type": "commit"}, {"oid": "7dff1595e66f89b2428a6c63fb1f4d3655dfd598", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7dff1595e66f89b2428a6c63fb1f4d3655dfd598", "message": "Fixing checkstyle issues.", "committedDate": "2020-01-07T19:21:46Z", "type": "forcePushed"}]}