{"pr_number": 17386, "pr_title": "[Service Bus] Use processor in the readme", "pr_createdAt": "2020-11-09T23:36:39Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/17386", "timeline": [{"oid": "674aab4e071bb7c47ab15b0d7870e94ceef381d2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/674aab4e071bb7c47ab15b0d7870e94ceef381d2", "message": "[Service Bus] Use processor in the readme", "committedDate": "2020-11-09T23:35:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE5MjczMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17386#discussion_r520192731", "bodyText": "Both session and non-session builders will create the same processor client type instance.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In non session case, you would use the `ServiceBusProcessorClient` by using the sub builder `processor()`. In case of sessions, you would use the `ServiceBusSessionProcessorClient` by using the sub builder `sessionProcessor()`. You can pass the maximum number of sessions you want the processor to process concurrently as well.\n          \n          \n            \n            In non-session case, you would use the sub builder `processor()`. In case of sessions, you would use the sub builder `sessionProcessor()`. Both sub builders will create an instance of `ServiceBusProcessorClient` configured to work on a session or a non-session Service Bus entity. In the case of the session processor, you can pass the maximum number of sessions you want the processor to process concurrently as well.", "author": "srnagar", "createdAt": "2020-11-09T23:45:09Z", "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -298,29 +246,9 @@ sender.sendMessage(message);\n \n #### Receive messages from a session\n \n-Receivers can fetch messages from a specific session or the first available, unlocked session.\n+Receiving messages from sessions is similar to receiving messages from a non session enabled queue or subscription. The difference is in the builder and the class you use.\n \n-<!-- embedme ./src/samples/java/com/azure/messaging/servicebus/ReadmeSamples.java#L175-L181 -->\n-```java\n-// Creates a session-enabled receiver that gets messages from the session \"greetings\".\n-ServiceBusSessionReceiverAsyncClient sessionReceiver = new ServiceBusClientBuilder()\n-    .connectionString(\"<< CONNECTION STRING FOR THE SERVICE BUS NAMESPACE >>\")\n-    .sessionReceiver()\n-    .queueName(\"<< QUEUE NAME >>\")\n-    .buildAsyncClient();\n-Mono<ServiceBusReceiverAsyncClient> receiverAsyncClient = sessionReceiver.acceptSession(\"greetings\");\n-```\n-\n-<!-- embedme ./src/samples/java/com/azure/messaging/servicebus/ReadmeSamples.java#L188-L194 -->\n-```java\n-// Creates a session-enabled receiver that gets messages from the first available session.\n-ServiceBusSessionReceiverAsyncClient sessionReceiver = new ServiceBusClientBuilder()\n-    .connectionString(\"<< CONNECTION STRING FOR THE SERVICE BUS NAMESPACE >>\")\n-    .sessionReceiver()\n-    .queueName(\"<< QUEUE NAME >>\")\n-    .buildAsyncClient();\n-Mono<ServiceBusReceiverAsyncClient> receiverAsyncClient = sessionReceiver.acceptNextSession();\n-```\n+In non session case, you would use the `ServiceBusProcessorClient` by using the sub builder `processor()`. In case of sessions, you would use the `ServiceBusSessionProcessorClient` by using the sub builder `sessionProcessor()`. You can pass the maximum number of sessions you want the processor to process concurrently as well.", "originalCommit": "674aab4e071bb7c47ab15b0d7870e94ceef381d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE5Mjk1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17386#discussion_r520192955", "bodyText": "I can include the code snippet here for creating the session processor in a separate PR if you don't have the sample for it.", "author": "srnagar", "createdAt": "2020-11-09T23:45:46Z", "path": "sdk/servicebus/azure-messaging-servicebus/README.md", "diffHunk": "@@ -298,29 +246,9 @@ sender.sendMessage(message);\n \n #### Receive messages from a session\n \n-Receivers can fetch messages from a specific session or the first available, unlocked session.\n+Receiving messages from sessions is similar to receiving messages from a non session enabled queue or subscription. The difference is in the builder and the class you use.\n \n-<!-- embedme ./src/samples/java/com/azure/messaging/servicebus/ReadmeSamples.java#L175-L181 -->\n-```java", "originalCommit": "674aab4e071bb7c47ab15b0d7870e94ceef381d2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE5Mzc0MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/17386#discussion_r520193740", "bodyText": "Yes please! Lets do that in a follow up PR or if you have it handy, please push to my branch.", "author": "ramya-rao-a", "createdAt": "2020-11-09T23:47:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDE5Mjk1NQ=="}], "type": "inlineReview"}, {"oid": "bc0f4fc63a93bab2892f3373a8c1c1976e793fbf", "url": "https://github.com/Azure/azure-sdk-for-java/commit/bc0f4fc63a93bab2892f3373a8c1c1976e793fbf", "message": "Update sdk/servicebus/azure-messaging-servicebus/README.md\n\nCo-authored-by: Srikanta <51379715+srnagar@users.noreply.github.com>", "committedDate": "2020-11-09T23:47:31Z", "type": "commit"}]}