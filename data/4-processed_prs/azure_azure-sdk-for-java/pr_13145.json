{"pr_number": 13145, "pr_title": "4.2.0 release", "pr_createdAt": "2020-07-14T17:50:20Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13145", "timeline": [{"oid": "82d3cae3c236f4e49d9c55ff8a3f36922eb32df4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/82d3cae3c236f4e49d9c55ff8a3f36922eb32df4", "message": "4.2.0 release", "committedDate": "2020-07-14T17:46:53Z", "type": "commit"}, {"oid": "cd61de54b0cbc4104f31a97a23c23e6164d7ca0c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cd61de54b0cbc4104f31a97a23c23e6164d7ca0c", "message": "update", "committedDate": "2020-07-14T17:49:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454551757", "bodyText": "Fixed Operator called default onErrorDropped when stream got cancelled. what does this mean for customer?", "author": "moderakh", "createdAt": "2020-07-14T18:16:30Z", "path": "sdk/cosmos/azure-cosmos/CHANGELOG.md", "diffHunk": "@@ -1,7 +1,16 @@\n # Release History\n \n-## 4.2.0-beta.1 (Unreleased)\n-\n+## 4.2.0 (2020-07-14)\n+### New Features\n+* Added script logging enabled API to `CosmosStoredProcedureRequestOptions`.\n+* Updated `DirectConnectionConfig` default `idleEndpointTimeout` to 1h and default `connectTimeout` to 5s.\n+### Key Bug Fixes\n+* Fixed issue where `GatewayConnectionConfig` `idleConnectionTimeout` was overriding `DirectConnectionConfig` `idleConnectionTimeout`.\n+* Fixed `responseContinuationTokenLimitInKb` get and set APIs in `CosmosQueryRequestOptions`.\n+* Fixed issue in query and change feed when recreating the collection with same name.\n+* Fixed issue with top query throwing ClassCastException.\n+* Fixed issue with order by query throwing NullPointerException.\n+* Fixed `Operator called default onErrorDropped` when stream got cancelled.", "originalCommit": "cd61de54b0cbc4104f31a97a23c23e6164d7ca0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MjY5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454552691", "bodyText": "It reflects this fix : #12836", "author": "kushagraThapar", "createdAt": "2020-07-14T18:17:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MzI2Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454553262", "bodyText": "can this be reworded to be understandable by customer?", "author": "moderakh", "createdAt": "2020-07-14T18:18:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1NTkyNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454555924", "bodyText": "Sure, suggestions ?", "author": "kushagraThapar", "createdAt": "2020-07-14T18:23:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1NjcwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454556705", "bodyText": "how about Fixed handling of cancelled requests in the IO stack. ?\nor Fixed issue in handling of cancelled requests in IO stack causing a failure.\nor Fixed issue by not triggering a failure when an IO request is cancelled.", "author": "moderakh", "createdAt": "2020-07-14T18:24:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU2MzM2OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454563368", "bodyText": "So this is the original fix from @David-Noble-at-work :\nWe now ensure that a pending Direct TCP request in a reactive stream dropped by an end user or the HA layer completes without bubbling up to reactor.core.publisher.Hooks.onErrorDropped as a CompletionException error. Pending requests may be left outstanding when, for example, an end user calls CosmosAsyncClient.close or the HA layer detects that a partition split has occurred. The code now guarantees that each pending Mono<StoreResponse> in the stream will run to completion with a new subscriber. Consequently the default onErrorDropped handler will not be called thus preventing these distracting error messages.", "author": "kushagraThapar", "createdAt": "2020-07-14T18:36:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU2NTEzNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454565137", "bodyText": "@moderakh  - how about this ?\nFixed issue in handling of pending requests in direct\u00a0mode causing Operator called default onErrorDropped error message.\u00a0", "author": "kushagraThapar", "createdAt": "2020-07-14T18:39:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU2OTUyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454569521", "bodyText": "it is not the pending requests which cause issue, it is the cancelled requests. no?", "author": "moderakh", "createdAt": "2020-07-14T18:47:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3MDYxOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454570619", "bodyText": "essentially an RNTBD IO request which is cancelled as per request of higher stack will trigger a failure and result in bubbling up a failure from RNTBD to consistency stack", "author": "moderakh", "createdAt": "2020-07-14T18:49:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU4NDcyNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13145#discussion_r454584726", "bodyText": "As discussed offline, updated to:\n\nFixed issue in handling of cancelled requests in direct mode causing reactor onErrorDropped being called.", "author": "xinlian12", "createdAt": "2020-07-14T19:14:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU1MTc1Nw=="}], "type": "inlineReview"}, {"oid": "a11ed8dbfb62468c18102f78aa0952cd83099e70", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a11ed8dbfb62468c18102f78aa0952cd83099e70", "message": "update change log", "committedDate": "2020-07-14T18:44:09Z", "type": "commit"}, {"oid": "4d2d225637362d56153de6e6a9d54216caa8938d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4d2d225637362d56153de6e6a9d54216caa8938d", "message": "update change log", "committedDate": "2020-07-14T19:13:19Z", "type": "commit"}, {"oid": "f06069cf0ba6433bef40ff4c9e957f59f16e4943", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f06069cf0ba6433bef40ff4c9e957f59f16e4943", "message": "style fix", "committedDate": "2020-07-14T19:14:17Z", "type": "commit"}]}