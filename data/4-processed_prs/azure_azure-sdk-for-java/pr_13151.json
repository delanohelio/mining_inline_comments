{"pr_number": 13151, "pr_title": "Support web apps for oauth based credentials", "pr_createdAt": "2020-07-15T00:08:33Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13151", "timeline": [{"oid": "13896f2e0ef1403fa68da74b6909cb50db5840e6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/13896f2e0ef1403fa68da74b6909cb50db5840e6", "message": "Fix AuthorizationCodeCredential to support credential", "committedDate": "2020-01-07T21:25:18Z", "type": "commit"}, {"oid": "a489133cd19ee8c0aadd086a0a8b4760d4662e88", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a489133cd19ee8c0aadd086a0a8b4760d4662e88", "message": "Skip integration tests", "committedDate": "2020-01-07T22:13:28Z", "type": "commit"}, {"oid": "c936f22cbde630be9e49098a76ef5e55c37056c5", "url": "https://github.com/Azure/azure-sdk-for-java/commit/c936f22cbde630be9e49098a76ef5e55c37056c5", "message": "unused imports", "committedDate": "2020-01-07T22:31:27Z", "type": "commit"}, {"oid": "9d697541391c3d91f241ee40a383bf29660a8a56", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9d697541391c3d91f241ee40a383bf29660a8a56", "message": "Add same settings to InteractiveBrowserCredential", "committedDate": "2020-01-08T22:52:31Z", "type": "commit"}, {"oid": "5728c670133f32eb6d2a9b6462a60ac22e263073", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5728c670133f32eb6d2a9b6462a60ac22e263073", "message": "Skip live tests again", "committedDate": "2020-01-09T19:32:32Z", "type": "commit"}, {"oid": "91f5831e01973a5bedda48e7d120c4d8e29501c9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/91f5831e01973a5bedda48e7d120c4d8e29501c9", "message": "Checkstyle", "committedDate": "2020-01-09T21:41:41Z", "type": "commit"}, {"oid": "cdbd53ad09287ee8a06c88a977f77756cb653a49", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cdbd53ad09287ee8a06c88a977f77756cb653a49", "message": "Merge branch 'master' of github.com:Azure/azure-sdk-for-java into oauthfix", "committedDate": "2020-01-15T01:34:05Z", "type": "commit"}, {"oid": "5fc67a10e4e11384122b62589353769361f21586", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5fc67a10e4e11384122b62589353769361f21586", "message": "Checkstyle: line too long", "committedDate": "2020-01-16T19:08:57Z", "type": "commit"}, {"oid": "903b0506118aa48e4fa52de75f0d8d68830d17cd", "url": "https://github.com/Azure/azure-sdk-for-java/commit/903b0506118aa48e4fa52de75f0d8d68830d17cd", "message": "Revert integration test change", "committedDate": "2020-01-16T19:43:33Z", "type": "commit"}, {"oid": "f9a6818b191e6ae44702285da5c2a966c6be834f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f9a6818b191e6ae44702285da5c2a966c6be834f", "message": "Add some changelog", "committedDate": "2020-01-16T21:45:00Z", "type": "commit"}, {"oid": "945f67bb4a897849421e68110434e6df54f7529b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/945f67bb4a897849421e68110434e6df54f7529b", "message": "Merge branch 'oauthfix' of github.com:jianghaolu/azure-sdk-for-java into oauthfix", "committedDate": "2020-07-15T00:07:09Z", "type": "commit"}, {"oid": "9db25dbd4fcfaf6dd61f6371facd1e598a8b186a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9db25dbd4fcfaf6dd61f6371facd1e598a8b186a", "message": "Improve change log", "committedDate": "2020-07-15T00:08:42Z", "type": "commit"}, {"oid": "fc6a9eaa8a1769051f1b8e79a8428fc5a9639b41", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fc6a9eaa8a1769051f1b8e79a8428fc5a9639b41", "message": "Fix IdentityClient ctr", "committedDate": "2020-07-15T05:58:21Z", "type": "commit"}, {"oid": "ffaf2c81702f5b30eb56cfe1056ab8bfe378ecf2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ffaf2c81702f5b30eb56cfe1056ab8bfe378ecf2", "message": "Fix javadoc", "committedDate": "2020-07-15T17:54:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM4OTQ2OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13151#discussion_r455389468", "bodyText": "Where are you setting this client secret  in ConfidentialClient ?", "author": "g2vinay", "createdAt": "2020-07-15T21:59:04Z", "path": "sdk/identity/azure-identity/src/main/java/com/azure/identity/implementation/IdentityClient.java", "diffHunk": "@@ -550,13 +550,19 @@ private HttpPipeline setupPipeline(HttpClient httpClient) {\n      */\n     public Mono<MsalToken> authenticateWithAuthorizationCode(TokenRequestContext request, String authorizationCode,\n                                                              URI redirectUrl) {\n-        return publicClientApplicationAccessor.getValue()\n-                .flatMap(pc -> Mono.fromFuture(() -> pc.acquireToken(\n-                AuthorizationCodeParameters.builder(authorizationCode, redirectUrl)\n-                    .scopes(new HashSet<>(request.getScopes()))\n-                    .build()))\n-                .onErrorMap(t -> new ClientAuthenticationException(\"Failed to acquire token with authorization code\",\n-                    null, t)).map(ar -> new MsalToken(ar, options)));\n+        AuthorizationCodeParameters parameters = AuthorizationCodeParameters.builder(authorizationCode, redirectUrl)\n+            .scopes(new HashSet<>(request.getScopes()))\n+            .build();\n+        Mono<IAuthenticationResult> acquireToken;\n+        if (clientSecret != null) {", "originalCommit": "ffaf2c81702f5b30eb56cfe1056ab8bfe378ecf2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTk4MTM1OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13151#discussion_r455981358", "bodyText": "per offline discussion, this is set in the constructor of the IdentityClient.", "author": "jianghaolu", "createdAt": "2020-07-16T18:16:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTM4OTQ2OA=="}], "type": "inlineReview"}, {"oid": "726192e61405983bd93f1b1ed589060abeb4c509", "url": "https://github.com/Azure/azure-sdk-for-java/commit/726192e61405983bd93f1b1ed589060abeb4c509", "message": "Add more javadocs for oauth client secret", "committedDate": "2020-07-16T02:35:04Z", "type": "commit"}]}