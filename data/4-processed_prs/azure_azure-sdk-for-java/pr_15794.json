{"pr_number": 15794, "pr_title": "Azure Communication Services - Refactor PhoneNumberAsyncClient to Wrap Exceptions", "pr_createdAt": "2020-09-29T05:46:04Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/15794", "timeline": [{"oid": "82ff93014f313fd2864a9c21e24ff57056f50541", "url": "https://github.com/Azure/azure-sdk-for-java/commit/82ff93014f313fd2864a9c21e24ff57056f50541", "message": "Catch exceptions and return error Mono/PagedFlux", "committedDate": "2020-09-28T20:23:52Z", "type": "commit"}, {"oid": "0015eb8b7cb0a9b6aa9fcec5332b3271ecbb0e4e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0015eb8b7cb0a9b6aa9fcec5332b3271ecbb0e4e", "message": "Refactor PhoneNumberAsyncClient method overloads to consolidate logic", "committedDate": "2020-09-29T05:28:10Z", "type": "commit"}, {"oid": "84b206c0ef6d21908da6171e8682c1b328c09cd9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/84b206c0ef6d21908da6171e8682c1b328c09cd9", "message": "Fix copy/paste error", "committedDate": "2020-09-29T06:08:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk4ODYyOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15794#discussion_r496988629", "bodyText": "Not related to the immediate change, but wondering why these methods are not following the 'list' paradigm, like listAreaCodes, listAreaCodesWithResponse etc.?", "author": "ankitarorabit", "createdAt": "2020-09-29T19:26:49Z", "path": "sdk/communication/azure-communication-administration/src/main/java/com/azure/communication/administration/PhoneNumberAsyncClient.java", "diffHunk": "@@ -80,10 +94,8 @@\n     @ServiceMethod(returns = ReturnType.SINGLE)\n     public Mono<AreaCodes> getAllAreaCodes(", "originalCommit": "84b206c0ef6d21908da6171e8682c1b328c09cd9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAwNjI0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15794#discussion_r497006246", "bodyText": "The main difference here the return value. AreaCodes is a composite object that contains data. It is not a pageable list in this case, so we are not using the list* convention.\nTo avoid confusion, perhaps we can rename it to \"getAreaCodes()\" instead in a separate PR.", "author": "waynemo", "createdAt": "2020-09-29T19:54:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk4ODYyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk5MDY4NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15794#discussion_r496990685", "bodyText": "Isn't it better to invoke the regular (without response) method and wrap in an exception.. this process of invoking getAllAreaCodesWithResponse and then trying to flatten doesn't look very clean?", "author": "ankitarorabit", "createdAt": "2020-09-29T19:29:04Z", "path": "sdk/communication/azure-communication-administration/src/main/java/com/azure/communication/administration/PhoneNumberAsyncClient.java", "diffHunk": "@@ -80,10 +94,8 @@\n     @ServiceMethod(returns = ReturnType.SINGLE)\n     public Mono<AreaCodes> getAllAreaCodes(\n         String locationType, String countryCode, String phonePlanId, List<LocationOptionsQuery> locationOptions) {\n-        LocationOptionsQueries locationOptionsQueries = new LocationOptionsQueries();\n-        locationOptionsQueries.setLocationOptions(locationOptions);\n-        return phoneNumberAdministrations.getAllAreaCodesAsync(\n-            locationType, countryCode, phonePlanId, locationOptionsQueries);\n+        return getAllAreaCodesWithResponse(locationType, countryCode, phonePlanId, locationOptions)", "originalCommit": "84b206c0ef6d21908da6171e8682c1b328c09cd9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk5OTg4OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15794#discussion_r496999888", "bodyText": "We can get the Entity model from the *WithResponse method, but we cannot get the Response information from the regular method (without response). So if we want to reuse the methods we need to start from the *WithResponse method.", "author": "waynemo", "createdAt": "2020-09-29T19:42:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk5MDY4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk5Nzg5Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15794#discussion_r496997893", "bodyText": "Small clarification, based on the guidelines shouldn't it be listPhoneNumbers? Maybe 'list' and 'listAll' are both OK, just trying to get some understanding here, this is what I see in the doc..\nYOU SHOULD remain flexible and use names best suited for developer experience. Don\u2019t let the naming rules result in non-idiomatic naming patterns. For example, Java developers prefer list operations over getAll operations.", "author": "ankitarorabit", "createdAt": "2020-09-29T19:39:14Z", "path": "sdk/communication/azure-communication-administration/src/main/java/com/azure/communication/administration/PhoneNumberAsyncClient.java", "diffHunk": "@@ -61,11 +67,19 @@\n      */\n     @ServiceMethod(returns = ReturnType.COLLECTION)\n     public PagedFlux<AcquiredPhoneNumber> listAllPhoneNumbers(String locale) {", "originalCommit": "84b206c0ef6d21908da6171e8682c1b328c09cd9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAzNzg2Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/15794#discussion_r497037867", "bodyText": "I think the guidelines are more concerned with the 'list' vs 'get' prefix. So both 'list' and 'listAll' will work to differentiate from 'get'.\nThe potential improvement might be to remove 'All' since it is a bit redundant. Let's revisit that separately.", "author": "waynemo", "createdAt": "2020-09-29T20:44:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk5Nzg5Mw=="}], "type": "inlineReview"}]}