{"pr_number": 12287, "pr_title": "Feature/migrate-spring-data-cosmos", "pr_createdAt": "2020-06-17T10:20:40Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/12287", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY2Mzk4Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441663987", "bodyText": "Shouldn't this be using the latest GA version available which is 1.0.7?", "author": "alzimmermsft", "createdAt": "2020-06-17T16:12:33Z", "path": "sdk/spring/azure-spring-boot/pom.xml", "diffHunk": "@@ -251,6 +251,12 @@\n       <version>1.1.1</version> <!-- {x-version-update;pl.pragmatists:JUnitParams;external_dependency} -->\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>com.azure</groupId>\n+      <artifactId>azure-identity</artifactId>\n+      <version>1.0.4</version>", "originalCommit": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTkxNTExOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441915118", "bodyText": "Yes, this snippet failed to be modified by rebasing and I will delete it manually.", "author": "yiliuTo", "createdAt": "2020-06-18T01:16:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY2Mzk4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczMTg1NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441731854", "bodyText": "There is no DocumentDbRepository. That is in old spring-data-cosmosdb SDK.\nThis should extend CosmosRepository or ReactiveCosmosRepository", "author": "kushagraThapar", "createdAt": "2020-06-17T18:05:22Z", "path": "sdk/spring/azure-spring-data-cosmosdb/QueryPartitionedCollection.md", "diffHunk": "@@ -0,0 +1,58 @@\n+### How to Query Partitioned Azure Cosmos DB Collection\n+\n+With Azure Cosmos DB, you can configure [partition key](https://docs.microsoft.com/en-us/azure/cosmos-db/partition-data) for your collection.\n+\n+Below is an example about how to query partitioned collection with this spring data module.\n+\n+#### Example \n+\n+Given a document entity structure:\n+```\n+    @Document\n+    @Data\n+    @AllArgsConstructor\n+    public class Address {\n+        @Id\n+        String postalCode;\n+        String street;\n+        @PartitionKey\n+        String city;\n+    }\n+```\n+\n+Write the repository interface:\n+```\n+    @Repository\n+    public interface AddressRepository extends DocumentDbRepository<Address, String> {", "originalCommit": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczMjMyMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441732323", "bodyText": "What is the use of this file ?\nThis should be merged with README file, or move this topic to spring-data-cosmosdb developer's guide : https://docs.microsoft.com/en-us/azure/developer/java/spring-framework/how-to-guides-spring-data-cosmosdb", "author": "kushagraThapar", "createdAt": "2020-06-17T18:06:13Z", "path": "sdk/spring/azure-spring-data-cosmosdb/QueryPartitionedCollection.md", "diffHunk": "@@ -0,0 +1,58 @@\n+### How to Query Partitioned Azure Cosmos DB Collection", "originalCommit": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTkzMzA2MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441933060", "bodyText": "The content of this file has been included into README file about using partitioned query, thus I will remove this file.", "author": "yiliuTo", "createdAt": "2020-06-18T02:28:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczMjMyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY1ODE3OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441658178", "bodyText": "First, spring_ only dependencies should be infrequent or in rare cases. The org.springframework versions here have been updated as part of another PR which has been approved. I recommended rebasing after that gets submitted. Second, the com.microsoft.azure:azure-cosmos dependency was added as part of this Spring PR several weeks back and apparently nothing previously used it. So the spring_com.microsoft.azure:azure-cosmos is unnecessary and the existing dependency version should be updated. In the future, I'm like to recommend either grep/findstr/search within whatever IDE is being used. If a dependency is an existing one, then updating that is the preferred method over declaring spring specific dependencies which may require contacting another library owner and those can be found in the CODEOWNERS  file", "author": "JimSuplizio", "createdAt": "2020-06-17T16:03:02Z", "path": "eng/versioning/external_dependencies.txt", "diffHunk": "@@ -251,3 +263,9 @@ storage_com.microsoft.azure:azure-storage;8.4.0\n spring_io.micrometer:micrometer-core;1.3.0\n spring_io.micrometer:micrometer-registry-azure-monitor;1.3.0\n spring_com.microsoft.azure:azure;1.34.0\n+\n+#sdk\\spring\\spring-data-cosmosdb\\pom.xml\n+spring_org.springframework:spring-web;5.2.6.RELEASE\n+spring_com.microsoft.azure:azure-cosmos;3.7.3\n+spring_org.springframework.boot:spring-boot-starter-test;2.3.0.RELEASE", "originalCommit": "d5bd3ac037306f45f4f5de8f66eaeddb11e9efd8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk2MTUwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r441961509", "bodyText": "Thanks for the suggestions. I have rebased the related PR and updated version of the dependencies.", "author": "yiliuTo", "createdAt": "2020-06-18T04:28:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY1ODE3OA=="}], "type": "inlineReview"}, {"oid": "1a0201e742c403cdf9eae6bccdc34374d24e8706", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1a0201e742c403cdf9eae6bccdc34374d24e8706", "message": "modify for dependency version", "committedDate": "2020-06-18T02:24:44Z", "type": "forcePushed"}, {"oid": "fb467c4287de75ea93169732e4f6edfad7616d5a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fb467c4287de75ea93169732e4f6edfad7616d5a", "message": "apply pr: Deliver multiple KeyVault support", "committedDate": "2020-06-22T05:47:32Z", "type": "commit"}, {"oid": "3cd2c7d1c89e431dcefa9c4327cdb03d4963a985", "url": "https://github.com/Azure/azure-sdk-for-java/commit/3cd2c7d1c89e431dcefa9c4327cdb03d4963a985", "message": "migrate src files from spring-data-cosmosdb", "committedDate": "2020-06-22T05:48:27Z", "type": "commit"}, {"oid": "91dd74c348dba7bfe91558b3ff339f793995ba4a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/91dd74c348dba7bfe91558b3ff339f793995ba4a", "message": "modify pom and dependency versions", "committedDate": "2020-06-22T05:48:27Z", "type": "commit"}, {"oid": "976d6973640012d86d63346654d0bd1356e4b91a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/976d6973640012d86d63346654d0bd1356e4b91a", "message": "add tests", "committedDate": "2020-06-22T05:48:28Z", "type": "commit"}, {"oid": "1d6b0983644c7c0e4734c2a65fea35c0fdcfe93c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1d6b0983644c7c0e4734c2a65fea35c0fdcfe93c", "message": "modify for compiler errors", "committedDate": "2020-06-22T05:48:29Z", "type": "commit"}, {"oid": "d4fd2df0e7fb9defebf14961cd3dbd98b92b0799", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d4fd2df0e7fb9defebf14961cd3dbd98b92b0799", "message": "modify for checkstyle errors", "committedDate": "2020-06-22T05:48:29Z", "type": "commit"}, {"oid": "d1e7aafc24ea003c93a956020587de9822be1826", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d1e7aafc24ea003c93a956020587de9822be1826", "message": "update underlying library versions", "committedDate": "2020-06-22T05:49:57Z", "type": "commit"}, {"oid": "4d404db0ef065b45d655a67b38b122fe89679904", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4d404db0ef065b45d655a67b38b122fe89679904", "message": "add changelog", "committedDate": "2020-06-22T05:50:23Z", "type": "commit"}, {"oid": "89776ce33644f797454868260d56a96f51ad7772", "url": "https://github.com/Azure/azure-sdk-for-java/commit/89776ce33644f797454868260d56a96f51ad7772", "message": "modify for dependency version", "committedDate": "2020-06-22T05:50:23Z", "type": "commit"}, {"oid": "f2543cb65acce54dd92bebd239281ad06ac056f3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f2543cb65acce54dd92bebd239281ad06ac056f3", "message": "modify readme title and add dependency for java11", "committedDate": "2020-06-22T05:50:24Z", "type": "commit"}, {"oid": "97f6ca204315212c650a5e9652569761ea879d7c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/97f6ca204315212c650a5e9652569761ea879d7c", "message": "add code owner", "committedDate": "2020-06-22T05:50:24Z", "type": "commit"}, {"oid": "53fa59e422b904755f538f5c64b5ab9a017f5c7e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/53fa59e422b904755f538f5c64b5ab9a017f5c7e", "message": "add debug for pipeline error temporarily", "committedDate": "2020-06-22T05:50:25Z", "type": "commit"}, {"oid": "699ba12f666fa949181ee6d0af2c46c5d1720d0c", "url": "https://github.com/Azure/azure-sdk-for-java/commit/699ba12f666fa949181ee6d0af2c46c5d1720d0c", "message": "add dependency in cosmos for running java-core-ci", "committedDate": "2020-06-22T05:50:25Z", "type": "commit"}, {"oid": "ce265b70bd7401734c058752829b4fac81845b25", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ce265b70bd7401734c058752829b4fac81845b25", "message": "move spring-data-cosmosdb to sdk/cosmos", "committedDate": "2020-06-22T05:52:08Z", "type": "commit"}, {"oid": "ce265b70bd7401734c058752829b4fac81845b25", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ce265b70bd7401734c058752829b4fac81845b25", "message": "move spring-data-cosmosdb to sdk/cosmos", "committedDate": "2020-06-22T05:52:08Z", "type": "forcePushed"}, {"oid": "abfa961210570d902bd3d90426e04e30babcb7c3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/abfa961210570d902bd3d90426e04e30babcb7c3", "message": "fix for the pipeline", "committedDate": "2020-06-22T06:17:29Z", "type": "commit"}, {"oid": "e2b8ba1d97179200349a39d6a6cab362fbd4f59b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e2b8ba1d97179200349a39d6a6cab362fbd4f59b", "message": "add spring-data-cosmosdb as external-dependency for pipeline", "committedDate": "2020-06-22T08:18:01Z", "type": "commit"}, {"oid": "e2b8ba1d97179200349a39d6a6cab362fbd4f59b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e2b8ba1d97179200349a39d6a6cab362fbd4f59b", "message": "add spring-data-cosmosdb as external-dependency for pipeline", "committedDate": "2020-06-22T08:18:01Z", "type": "forcePushed"}, {"oid": "826c8eae2a0cd016fc9fe87c647a1493552b767d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/826c8eae2a0cd016fc9fe87c647a1493552b767d", "message": "modify codeowner", "committedDate": "2020-06-22T09:18:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkwNTQ3Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r443905477", "bodyText": "@kushagraThapar, as per our discussion earlier we'll let this get checked in like this but part of the v4 updates will be to rename the groupId and change the artifactId to match the naming convention. Also, the work item you're creating will also encompass updating the versions to match this update to v4 cosmos which will update the major to 3.", "author": "JimSuplizio", "createdAt": "2020-06-23T01:07:33Z", "path": "eng/versioning/version_client.txt", "diffHunk": "@@ -55,7 +55,7 @@ com.microsoft.azure:azure-servicebus-jms-spring-boot-starter;2.3.2;2.3.3-beta.1\n com.microsoft.azure:azure-spring-boot-metrics-starter;2.3.2;2.3.3-beta.1\n com.microsoft.azure:azure-spring-boot-tests;2.3.2;2.3.3-beta.1\n com.microsoft.azure:azure-spring-boot-test-core;2.3.2;2.3.3-beta.1\n-\n+com.microsoft.azure:spring-data-cosmosdb;2.3.0;2.3.1-beta.1", "originalCommit": "826c8eae2a0cd016fc9fe87c647a1493552b767d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTA2ODQ1MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/12287#discussion_r445068450", "bodyText": "@JimSuplizio - Sounds good. Here is the issue : #12490", "author": "kushagraThapar", "createdAt": "2020-06-24T17:50:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkwNTQ3Nw=="}], "type": "inlineReview"}]}