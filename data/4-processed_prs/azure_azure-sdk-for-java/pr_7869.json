{"pr_number": 7869, "pr_title": "Rename subscription key to ApiKey", "pr_createdAt": "2020-01-31T17:42:33Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/7869", "timeline": [{"oid": "f5ec838568ff57e35871267d4c6703e04df06bfa", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f5ec838568ff57e35871267d4c6703e04df06bfa", "message": "renaming subscription key to ApiKey", "committedDate": "2020-01-30T02:06:40Z", "type": "commit"}, {"oid": "65830253823ac39bfc08f9d03b40d2808dfb386a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/65830253823ac39bfc08f9d03b40d2808dfb386a", "message": "remove unused file", "committedDate": "2020-01-31T17:47:47Z", "type": "commit"}, {"oid": "766af4b1f168c1bb20229f021100586ec7138e1b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/766af4b1f168c1bb20229f021100586ec7138e1b", "message": "checkstyle", "committedDate": "2020-01-31T18:00:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzczOTg4MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r373739880", "bodyText": "Should these recordings have valid data recorded, rather than be deleted?", "author": "samvaity", "createdAt": "2020-02-01T00:28:50Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/resources/session-records/recognizeEntitiesForBatchListCountryHint.json", "diffHunk": "@@ -1,4 +0,0 @@\n-{", "originalCommit": "766af4b1f168c1bb20229f021100586ec7138e1b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDQzMzY0MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r374433640", "bodyText": "we don't have this test", "author": "mssfang", "createdAt": "2020-02-04T01:33:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzczOTg4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1ODAyNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r373758026", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            1. To use a [API key](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-apis-create-account?tabs=multiservice%2Cwindows#get-the-keys-for-your-resource), \n          \n          \n            \n            1. To use an [API key](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-apis-create-account?tabs=multiservice%2Cwindows#get-the-keys-for-your-resource),", "author": "maririos", "createdAt": "2020-02-01T04:50:32Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -56,15 +56,16 @@ az cognitiveservices account create \\\n     --yes\n ```\n ### Authenticate the client\n-In order to interact with the Text Analytics service, you'll need to create an instance of the [TextAnalyticsClient](#create-a-client) class. You would need an **endpoint** and **subscription key** to instantiate a client object.\n+In order to interact with the Text Analytics service, you'll need to create an instance of the \n+`TextAnalyticsClient` class. You would need an **endpoint** and **API key** to instantiate a client object.\n \n #### Get credentials\n ##### Types of credentials\n-The `subscriptionKey` parameter may be provided as the subscription key to your resource or as a token from Azure Active Directory.\n+The authentication credential may be provided as the API key to your resource or as a token from Azure Active Directory.\n See the full details regarding [authentication](https://docs.microsoft.com/azure/cognitive-services/authentication) of \n cognitive services.\n \n-1. To use a [subscription key](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-apis-create-account?tabs=multiservice%2Cwindows#get-the-keys-for-your-resource), \n+1. To use a [API key](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-apis-create-account?tabs=multiservice%2Cwindows#get-the-keys-for-your-resource), ", "originalCommit": "766af4b1f168c1bb20229f021100586ec7138e1b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1ODA1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r373758055", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            your resource and a API key that allows you access:\n          \n          \n            \n            your resource and an API key that allows you access:", "author": "maririos", "createdAt": "2020-02-01T04:50:53Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -112,28 +113,28 @@ cognitive services.\n The Azure Text Analytics client library for Java allows you to engage with the Text Analytics service to \n analyze sentiment, recognize entities, detect language, and extract key phrases from text.\n To create a client object, you will need the cognitive services or text analytics endpoint to \n-your resource and a subscription key that allows you access:\n+your resource and a API key that allows you access:", "originalCommit": "766af4b1f168c1bb20229f021100586ec7138e1b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1ODA4NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r373758084", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The Azure Text Analytics client library provide a way to rotate the existing API key.\n          \n          \n            \n            The Azure Text Analytics client library provides a way to rotate the existing API key.", "author": "maririos", "createdAt": "2020-02-01T04:51:39Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -112,28 +113,28 @@ cognitive services.\n The Azure Text Analytics client library for Java allows you to engage with the Text Analytics service to \n analyze sentiment, recognize entities, detect language, and extract key phrases from text.\n To create a client object, you will need the cognitive services or text analytics endpoint to \n-your resource and a subscription key that allows you access:\n+your resource and a API key that allows you access:\n \n <!-- embedme ./src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java#L44-L47 -->\n ```java\n TextAnalyticsClient textAnalyticsClient = new TextAnalyticsClientBuilder()\n-    .subscriptionKey(new TextAnalyticsApiKeyCredential(\"{subscription_key}\"))\n+    .apiKey(new TextAnalyticsApiKeyCredential(\"{api_key}\"))\n     .endpoint(\"{endpoint}\")\n     .buildClient();\n ```\n \n-#### Rotate existing subscription key\n-The Azure Text Analytics client library provide a way to rotate the existing subscription key.\n+#### Rotate existing API key\n+The Azure Text Analytics client library provide a way to rotate the existing API key.", "originalCommit": "766af4b1f168c1bb20229f021100586ec7138e1b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1ODI3Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r373758276", "bodyText": "not related to your change, but it will be good to add the link to the Azure Portal", "author": "maririos", "createdAt": "2020-02-01T04:55:20Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -56,15 +56,16 @@ az cognitiveservices account create \\\n     --yes\n ```\n ### Authenticate the client\n-In order to interact with the Text Analytics service, you'll need to create an instance of the [TextAnalyticsClient](#create-a-client) class. You would need an **endpoint** and **subscription key** to instantiate a client object.\n+In order to interact with the Text Analytics service, you'll need to create an instance of the \n+`TextAnalyticsClient` class. You would need an **endpoint** and **API key** to instantiate a client object.\n \n #### Get credentials\n ##### Types of credentials\n-The `subscriptionKey` parameter may be provided as the subscription key to your resource or as a token from Azure Active Directory.\n+The authentication credential may be provided as the API key to your resource or as a token from Azure Active Directory.\n See the full details regarding [authentication](https://docs.microsoft.com/azure/cognitive-services/authentication) of \n cognitive services.\n \n-1. To use a [subscription key](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-apis-create-account?tabs=multiservice%2Cwindows#get-the-keys-for-your-resource), \n+1. To use a [API key](https://docs.microsoft.com/azure/cognitive-services/cognitive-services-apis-create-account?tabs=multiservice%2Cwindows#get-the-keys-for-your-resource), \n    provide the key as a string. This can be found in the Azure Portal under the \"Quickstart\" ", "originalCommit": "766af4b1f168c1bb20229f021100586ec7138e1b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1ODMwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r373758306", "bodyText": "How can an user find the endpoint? We could mention to get it from the Azure CLI or the Azure portal", "author": "maririos", "createdAt": "2020-02-01T04:56:04Z", "path": "sdk/textanalytics/azure-ai-textanalytics/README.md", "diffHunk": "@@ -56,15 +56,16 @@ az cognitiveservices account create \\\n     --yes\n ```\n ### Authenticate the client\n-In order to interact with the Text Analytics service, you'll need to create an instance of the [TextAnalyticsClient](#create-a-client) class. You would need an **endpoint** and **subscription key** to instantiate a client object.\n+In order to interact with the Text Analytics service, you'll need to create an instance of the \n+`TextAnalyticsClient` class. You would need an **endpoint** and **API key** to instantiate a client object.", "originalCommit": "766af4b1f168c1bb20229f021100586ec7138e1b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTk4ODcwNw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r375988707", "bodyText": "updated to\nIn order to interact with the Text Analytics service, you'll need to create an instance of the \n`TextAnalyticsClient` class. You would need an **endpoint** and **API key** to instantiate a client object.\nAnd they can be found in the [Azure Portal][azure_portal] under the \"Quickstart\" in your created\nText Analytics resource.", "author": "mssfang", "createdAt": "2020-02-06T17:52:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1ODMwNg=="}], "type": "inlineReview"}, {"oid": "839542a306b3a783b5e1a2cfe28fd9ac6932cd44", "url": "https://github.com/Azure/azure-sdk-for-java/commit/839542a306b3a783b5e1a2cfe28fd9ac6932cd44", "message": "resolve conflict", "committedDate": "2020-02-04T01:14:15Z", "type": "commit"}, {"oid": "cb05f034ba67c7f364b416e7a70001706ce6547f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cb05f034ba67c7f364b416e7a70001706ce6547f", "message": "wording", "committedDate": "2020-02-04T01:34:24Z", "type": "commit"}, {"oid": "0242bdcff953fbbdb9353a59eff470ffe75d6d7b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0242bdcff953fbbdb9353a59eff470ffe75d6d7b", "message": "update links", "committedDate": "2020-02-04T02:04:22Z", "type": "commit"}, {"oid": "78dfcc056dbfeb7ed71b5254b5a8ff415436c878", "url": "https://github.com/Azure/azure-sdk-for-java/commit/78dfcc056dbfeb7ed71b5254b5a8ff415436c878", "message": "Merge branch 'master' of https://github.com/Azure/azure-sdk-for-java into RotatingKeyFollowUp", "committedDate": "2020-02-04T02:31:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQyNTkzMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r375425931", "bodyText": "API key authentication.  change to  the API key authentication.", "author": "hemanttanwar", "createdAt": "2020-02-05T18:19:47Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/samples/java/com/azure/ai/textanalytics/ReadmeSamples.java", "diffHunk": "@@ -38,21 +38,21 @@ public void configureHttpClient() {\n     }\n \n     /**\n-     * Code snippet for  getting sync client using subscription key authentication.\n+     * Code snippet for getting sync client using API key authentication.", "originalCommit": "78dfcc056dbfeb7ed71b5254b5a8ff415436c878", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQyNzQ5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r375427497", "bodyText": "Should there be a test for empty API Key ?  what is some one provide .apiKey(\"\")  ,  should that  work ?", "author": "hemanttanwar", "createdAt": "2020-02-05T18:22:50Z", "path": "sdk/textanalytics/azure-ai-textanalytics/src/test/java/com/azure/ai/textanalytics/TextAnalyticsClientBuilderUnitTest.java", "diffHunk": "@@ -0,0 +1,70 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.azure.ai.textanalytics;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import static com.azure.ai.textanalytics.TestUtils.VALID_HTTPS_LOCALHOST;\n+import static org.junit.jupiter.api.Assertions.assertThrows;\n+\n+/**\n+ * Unit tests for Text Analytics client builder\n+ */\n+public class TextAnalyticsClientBuilderUnitTest {\n+\n+    /**\n+     * Test for missing endpoint\n+     */\n+    @Test\n+    public void missingEndpointAsyncClient() {\n+        assertThrows(NullPointerException.class, () -> {\n+            final TextAnalyticsClientBuilder builder = new TextAnalyticsClientBuilder();\n+            builder.buildAsyncClient();\n+        });\n+    }\n+\n+    /**\n+     * Test for missing endpoint\n+     */\n+    @Test\n+    public void missingEndpoint() {\n+        assertThrows(NullPointerException.class, () -> {\n+            final TextAnalyticsClientBuilder builder = new TextAnalyticsClientBuilder();\n+            builder.buildClient();\n+        });\n+    }\n+\n+    /**\n+     * Test for invalid endpoint\n+     */\n+    @Test\n+    public void invalidProtocol() {\n+        assertThrows(IllegalArgumentException.class, () -> {\n+            final TextAnalyticsClientBuilder builder = new TextAnalyticsClientBuilder();\n+            builder.endpoint(TestUtils.INVALID_URL);\n+        });\n+    }\n+\n+    /**\n+     * Test for null API key\n+     */\n+    @Test\n+    public void nullApiKey() {", "originalCommit": "78dfcc056dbfeb7ed71b5254b5a8ff415436c878", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjExMDgxOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7869#discussion_r376110819", "bodyText": "an empty api key test added", "author": "mssfang", "createdAt": "2020-02-06T22:10:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQyNzQ5Nw=="}], "type": "inlineReview"}, {"oid": "eacf8ad2cbd54f06cf1892909f24eddf0450128d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/eacf8ad2cbd54f06cf1892909f24eddf0450128d", "message": "resolve conflict", "committedDate": "2020-02-06T17:55:05Z", "type": "commit"}, {"oid": "fec45963b391dc1e3baaed08716166caf89f707d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/fec45963b391dc1e3baaed08716166caf89f707d", "message": "add empty api key test", "committedDate": "2020-02-06T18:39:11Z", "type": "commit"}]}