{"pr_number": 14319, "pr_title": "Added code to allow scheduling file expiry", "pr_createdAt": "2020-08-20T21:02:43Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/14319", "timeline": [{"oid": "36a9642d6e658111ebcea8ecb848eadbba44054a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/36a9642d6e658111ebcea8ecb848eadbba44054a", "message": "Added code to allow scheduling file expiry", "committedDate": "2020-08-20T20:35:17Z", "type": "commit"}, {"oid": "a50691c3f6a66a8edeff9757ce34cfed67844442", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a50691c3f6a66a8edeff9757ce34cfed67844442", "message": "Added snippets", "committedDate": "2020-08-20T22:35:59Z", "type": "commit"}, {"oid": "dc42bbbf03e38b903e02778c7263bb21f37073a2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dc42bbbf03e38b903e02778c7263bb21f37073a2", "message": "Added exclude", "committedDate": "2020-08-21T20:34:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY5NzExMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14319#discussion_r475697113", "bodyText": "Can we verify the value of the time?", "author": "rickle-msft", "createdAt": "2020-08-24T15:24:03Z", "path": "sdk/storage/azure-storage-file-datalake/src/test/java/com/azure/storage/file/datalake/FileAPITest.groovy", "diffHunk": "@@ -3364,6 +3367,53 @@ class FileAPITest extends APISpec {\n         null     | null       | null        | null         | garbageLeaseID\n     }\n \n+    @Unroll\n+    def \"Schedule deletion\"() {\n+        given:\n+        def fileClient = fsc.getFileClient(generatePathName())\n+        fileClient.create()\n+\n+        when:\n+        fileClient.scheduleDeletionWithResponse(fileScheduleDeletionOptions, null, null)\n+        def expiryTimeProperty = fileClient.getProperties().getExpiresOn()\n+\n+        then:\n+        (expiryTimeProperty != null) == hasExpiry\n+\n+        where:\n+        fileScheduleDeletionOptions                                                             | hasExpiry\n+        new FileScheduleDeletionOptions(Duration.ofDays(1), FileExpirationOffset.CREATION_TIME) | true\n+        new FileScheduleDeletionOptions(Duration.ofDays(1), FileExpirationOffset.NOW)           | true\n+        new FileScheduleDeletionOptions()                                                       | false\n+        null                                                                                    | false\n+    }\n+\n+    def \"Schedule deletion time\"() {\n+        given:\n+        def fileScheduleDeletionOptions = new FileScheduleDeletionOptions(getUTCNow().plusDays(1))\n+        def fileClient = fsc.getFileClient(generatePathName())\n+        fileClient.create()\n+\n+        when:\n+        fileClient.scheduleDeletionWithResponse(fileScheduleDeletionOptions, null, null)\n+        def expiryTimeProperty = fileClient.getProperties().getExpiresOn()\n+\n+        then:\n+        expiryTimeProperty", "originalCommit": "dc42bbbf03e38b903e02778c7263bb21f37073a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTcwNzQwOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14319#discussion_r475707408", "bodyText": "yeah I can do that", "author": "gapra-msft", "createdAt": "2020-08-24T15:38:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY5NzExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjAwNDYyMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/14319#discussion_r476004620", "bodyText": "Done", "author": "gapra-msft", "createdAt": "2020-08-25T00:36:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY5NzExMw=="}], "type": "inlineReview"}, {"oid": "7f5671c6764e6668a87c4a12df1c36bd20cba084", "url": "https://github.com/Azure/azure-sdk-for-java/commit/7f5671c6764e6668a87c4a12df1c36bd20cba084", "message": "Check the time", "committedDate": "2020-08-25T00:36:27Z", "type": "commit"}]}