{"pr_number": 9846, "pr_title": "Fix managemet resources checkstyle", "pr_createdAt": "2020-04-03T07:00:23Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/9846", "timeline": [{"oid": "9935fa0653ef6da94209cde28b062fcc7f37ddf3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9935fa0653ef6da94209cde28b062fcc7f37ddf3", "message": "fix some checkstyle", "committedDate": "2020-04-03T02:13:24Z", "type": "commit"}, {"oid": "96e681b1be8cae5459caa5ba8eb8cef02136ff73", "url": "https://github.com/Azure/azure-sdk-for-java/commit/96e681b1be8cae5459caa5ba8eb8cef02136ff73", "message": "Merge branch 'master' into checkstyle", "committedDate": "2020-04-03T02:17:21Z", "type": "commit"}, {"oid": "823910863690cecf509e7543b9ea8d4e40a6cf77", "url": "https://github.com/Azure/azure-sdk-for-java/commit/823910863690cecf509e7543b9ea8d4e40a6cf77", "message": "fix some checkstyle", "committedDate": "2020-04-03T02:42:49Z", "type": "commit"}, {"oid": "4fdc5083f74ff38dc77b45873db8e148e492e669", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4fdc5083f74ff38dc77b45873db8e148e492e669", "message": "feat: remove unused import", "committedDate": "2020-04-03T02:43:15Z", "type": "commit"}, {"oid": "ab323360ab692b08cea93590af55e0bfe0992b7a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ab323360ab692b08cea93590af55e0bfe0992b7a", "message": "fix some checkstyle", "committedDate": "2020-04-03T05:01:27Z", "type": "commit"}, {"oid": "b62c8bb21dd22dd17f0e519d8bd5bad3a76b6151", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b62c8bb21dd22dd17f0e519d8bd5bad3a76b6151", "message": "fix some checkstyle", "committedDate": "2020-04-03T05:01:35Z", "type": "commit"}, {"oid": "d21fbe2bf9233245d8e31229b8080f05e864badc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/d21fbe2bf9233245d8e31229b8080f05e864badc", "message": "fix: add new line in file end and remove unused import for checkstyle", "committedDate": "2020-04-03T05:09:59Z", "type": "commit"}, {"oid": "f3f74c4d71d9ba8482adeabf6cdd14e54d1a50df", "url": "https://github.com/Azure/azure-sdk-for-java/commit/f3f74c4d71d9ba8482adeabf6cdd14e54d1a50df", "message": "Merge branch 'master' into checkstyle", "committedDate": "2020-04-03T05:14:38Z", "type": "commit"}, {"oid": "db6da4621bd7df5549d55958b78d13d8e1efc01a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/db6da4621bd7df5549d55958b78d13d8e1efc01a", "message": "feat: update suppressions", "committedDate": "2020-04-03T06:58:53Z", "type": "commit"}, {"oid": "1c007a9b8dc0024e40d451d5186ff9c0f5c0f52e", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1c007a9b8dc0024e40d451d5186ff9c0f5c0f52e", "message": "fix: check style for resources", "committedDate": "2020-04-03T06:59:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc4MDk1NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r402780955", "bodyText": "Leave it on your local.", "author": "weidongxu-microsoft", "createdAt": "2020-04-03T07:17:11Z", "path": "eng/code-quality-reports/src/main/resources/checkstyle/checkstyle-suppressions.xml", "diffHunk": "@@ -345,6 +345,12 @@\n   <suppress checks=\"IllegalImport\"\n             files=\"com.azure.cosmos.ClientSideRequestStatistics\"/> <!-- Need OperatingSystemMXBean from sun to obtain cpu info -->\n \n+  <!-- management sdk suppressions -->\n+  <suppress checks=\"[a-zA-Z0-9]*\" files=\"[/\\\\]mgmt[/\\\\]src[/\\\\]test[/\\\\]\"/>\n+  <suppress checks=\"com.azure.tools.checkstyle.checks.EnforceFinalFieldsCheck\" files=\"com.azure.management.resources.fluentcore.arm.ResourceId\"/>\n+  <!-- TODO: remove it after generator ready -->\n+  <suppress checks=\"[a-zA-Z0-9]*\" files=\"[/\\\\]com[/\\\\]azure[/\\\\]management[/\\\\]resources[/\\\\]models[/\\\\]\"/>", "originalCommit": "1c007a9b8dc0024e40d451d5186ff9c0f5c0f52e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc4NTA5Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r402785096", "bodyText": "Done", "author": "ChenTanyi", "createdAt": "2020-04-03T07:25:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc4MDk1NQ=="}], "type": "inlineReview"}, {"oid": "646bc51d806bb4994ea283dab3f31882252e0652", "url": "https://github.com/Azure/azure-sdk-for-java/commit/646bc51d806bb4994ea283dab3f31882252e0652", "message": "fix: package info comment", "committedDate": "2020-04-03T07:24:06Z", "type": "commit"}, {"oid": "e3a5b27de72b48d9e0bbbd6db92afd7e2360dc52", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e3a5b27de72b48d9e0bbbd6db92afd7e2360dc52", "message": "fix: remove generator suppress", "committedDate": "2020-04-03T07:25:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc4NjgwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r402786806", "bodyText": "At least you need to give some reason why suppress these?\nIf we plan to fix later, still keep it in local.", "author": "weidongxu-microsoft", "createdAt": "2020-04-03T07:28:57Z", "path": "eng/code-quality-reports/src/main/resources/checkstyle/checkstyle-suppressions.xml", "diffHunk": "@@ -345,6 +345,10 @@\n   <suppress checks=\"IllegalImport\"\n             files=\"com.azure.cosmos.ClientSideRequestStatistics\"/> <!-- Need OperatingSystemMXBean from sun to obtain cpu info -->\n \n+  <!-- management sdk suppressions -->\n+  <suppress checks=\"[a-zA-Z0-9]*\" files=\"[/\\\\]mgmt[/\\\\]src[/\\\\]test[/\\\\]\"/>\n+  <suppress checks=\"com.azure.tools.checkstyle.checks.EnforceFinalFieldsCheck\" files=\"com.azure.management.resources.fluentcore.arm.ResourceId\"/>", "originalCommit": "e3a5b27de72b48d9e0bbbd6db92afd7e2360dc52", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc5ODUzNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r402798534", "bodyText": "The EnforceFinalFieldsCheck has already showed, \"You should consider making the field final, or suppressing the warning\". This is because the parameters in ResourceId are not simply set. When uses final, it will lead to compile error like variable subscriptionId might be assigned in loop. I'm not sure whether we need give reason, since so much suppression here without reason and it only affects our own code.", "author": "ChenTanyi", "createdAt": "2020-04-03T07:51:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc4NjgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc5OTIxMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r402799213", "bodyText": "After look at it. Maybe, I'll fix it", "author": "ChenTanyi", "createdAt": "2020-04-03T07:52:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc4NjgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjgwNDU2Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r402804562", "bodyText": "Done", "author": "ChenTanyi", "createdAt": "2020-04-03T07:58:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc4NjgwNg=="}], "type": "inlineReview"}, {"oid": "1765568e984431da8b2fdebba0b44637f332b158", "url": "https://github.com/Azure/azure-sdk-for-java/commit/1765568e984431da8b2fdebba0b44637f332b158", "message": "fix: remove resource id suppressions", "committedDate": "2020-04-03T07:58:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjgxMDc4Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r402810782", "bodyText": "I think you need to check length for each of these? Maybe this.subscriptionId = splits.length > 1 ? splits[1] : null", "author": "weidongxu-microsoft", "createdAt": "2020-04-03T08:06:00Z", "path": "sdk/resources/mgmt/src/main/java/com/azure/management/resources/fluentcore/arm/ResourceId.java", "diffHunk": "@@ -61,42 +68,24 @@ private ResourceId(final String id) {\n                 this.parentId = \"/\" + String.join(\"/\", parentSplits);\n             }\n \n-            for (int i = 0; i < splits.length && i < 6; i++) {\n-                switch (i) {\n-                    case 0:\n-                        // Ensure \"subscriptions\"\n-                        if (!splits[i].equalsIgnoreCase(\"subscriptions\")) {\n-                            throw new InvalidParameterException(badIdErrorText(id));\n-                        }\n-                        break;\n-                    case 1:\n-                        // Extract subscription ID\n-                        this.subscriptionId = splits[i];\n-                        break;\n-                    case 2:\n-                        // Ensure \"resourceGroups\"\n-                        if (!splits[i].equalsIgnoreCase(\"resourceGroups\")) {\n-                            throw new InvalidParameterException(badIdErrorText(id));\n-                        }\n-                        break;\n-                    case 3:\n-                        // Extract resource group name\n-                        this.resourceGroupName = splits[i];\n-                        break;\n-                    case 4:\n-                        // Ensure \"providers\"\n-                        if (!splits[i].equalsIgnoreCase(\"providers\")) {\n-                            throw new InvalidParameterException(badIdErrorText(id));\n-                        }\n-                        break;\n-                    case 5:\n-                        // Extract provider namespace\n-                        this.providerNamespace = splits[i];\n-                        break;\n-                    default:\n-                        break;\n-                }\n+            // Ensure \"subscriptions\"\n+            if (!splits[0].equalsIgnoreCase(\"subscriptions\")) {", "originalCommit": "1765568e984431da8b2fdebba0b44637f332b158", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUwNDUzMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r404504530", "bodyText": "I'll fix it. I just take them out of switch..case.", "author": "ChenTanyi", "createdAt": "2020-04-07T02:47:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjgxMDc4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUzODY1Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r404538657", "bodyText": "done", "author": "ChenTanyi", "createdAt": "2020-04-07T05:10:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjgxMDc4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjgxMTE5NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r402811195", "bodyText": "test is still there. If we plan to fix them, just leave to our local.", "author": "weidongxu-microsoft", "createdAt": "2020-04-03T08:06:29Z", "path": "eng/code-quality-reports/src/main/resources/checkstyle/checkstyle-suppressions.xml", "diffHunk": "@@ -347,7 +347,6 @@\n \n   <!-- management sdk suppressions -->\n   <suppress checks=\"[a-zA-Z0-9]*\" files=\"[/\\\\]mgmt[/\\\\]src[/\\\\]test[/\\\\]\"/>", "originalCommit": "1765568e984431da8b2fdebba0b44637f332b158", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUzODY0NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9846#discussion_r404538644", "bodyText": "Removed it first", "author": "ChenTanyi", "createdAt": "2020-04-07T05:10:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjgxMTE5NQ=="}], "type": "inlineReview"}, {"oid": "ccb11f8f9b90a96598fa39943abc47b234766f66", "url": "https://github.com/Azure/azure-sdk-for-java/commit/ccb11f8f9b90a96598fa39943abc47b234766f66", "message": "Merge branch 'master' into checkstyle", "committedDate": "2020-04-03T14:38:51Z", "type": "commit"}, {"oid": "edfe4453aeadd4647741c90a2470048a1bde7c28", "url": "https://github.com/Azure/azure-sdk-for-java/commit/edfe4453aeadd4647741c90a2470048a1bde7c28", "message": "remove checkstyle suppression change", "committedDate": "2020-04-07T03:34:36Z", "type": "commit"}, {"oid": "4213c053a1d1e3ac075e7f892dbe1f2a8b2ad62b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/4213c053a1d1e3ac075e7f892dbe1f2a8b2ad62b", "message": "fix: check for splits length with resource id", "committedDate": "2020-04-07T05:08:18Z", "type": "commit"}]}