{"pr_number": 10285, "pr_title": "Spring Boot migration - AAD starter", "pr_createdAt": "2020-04-16T08:53:22Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/10285", "timeline": [{"oid": "a4dae488ee13ea6e4d194a20aa78c1cfa4b23a0a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a4dae488ee13ea6e4d194a20aa78c1cfa4b23a0a", "message": "migrate spring boot aad to sdk repo", "committedDate": "2020-04-16T08:48:38Z", "type": "commit"}, {"oid": "9ac558a18f8057decc2dc144fd874ee3fae7fe78", "url": "https://github.com/Azure/azure-sdk-for-java/commit/9ac558a18f8057decc2dc144fd874ee3fae7fe78", "message": "include sdk/spring in pom.xml", "committedDate": "2020-04-16T09:03:54Z", "type": "commit"}, {"oid": "10c0cd4ba098c420ab80d9d37856f25e7452fb79", "url": "https://github.com/Azure/azure-sdk-for-java/commit/10c0cd4ba098c420ab80d9d37856f25e7452fb79", "message": "change min branch coverage", "committedDate": "2020-04-16T09:32:22Z", "type": "commit"}, {"oid": "b4d81c480eb4db57b5d50079ea1fc581e4a3d6f4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b4d81c480eb4db57b5d50079ea1fc581e4a3d6f4", "message": "fix up maven enforcer banned dependencies", "committedDate": "2020-04-16T14:57:57Z", "type": "commit"}, {"oid": "dd8da1cf5cbd54543f17537ed70144fcf71a4a3f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dd8da1cf5cbd54543f17537ed70144fcf71a4a3f", "message": "add revapi ignore", "committedDate": "2020-04-19T06:12:46Z", "type": "commit"}, {"oid": "27b3f335c22075424628fe8ac20a9a0c2c558579", "url": "https://github.com/Azure/azure-sdk-for-java/commit/27b3f335c22075424628fe8ac20a9a0c2c558579", "message": "remove all en-us part of URL", "committedDate": "2020-04-19T06:41:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcwNzA0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r412707046", "bodyText": "Three comments:\n\n\nI'm unclear why this is version 7.9. When I look at spring-security-oauth2-jose 5.2.0.RELEASE, I see the version referenced there is 7.8. Should we not be keeping our dependencies in line with the spring dependencies?\n\n\nI would rather that we make this special dependency (because of it's 'spring_' prefix) our 'official' dependency, and use that for all of our track two client libraries. The current 'official' dependency, as far as I can see, is only used in track one for microsoft-azure-eventhubs, so I would rather give that a special prefix instead // cc @JimSuplizio\n\n\nI would really like to have a comment associated with this dependency so that people know to not eagerly update the version and to instead move it in lockstep with the spring version we are supporting.", "author": "JonathanGiles", "createdAt": "2020-04-22T06:33:50Z", "path": "eng/versioning/external_dependencies.txt", "diffHunk": "@@ -207,3 +228,7 @@ media_com.microsoft.azure:adal4j;1.2.0\n \n # sdk\\storage\\azure-storage-blob-cryptography\\pom.xml\n storage_com.microsoft.azure:azure-storage;8.4.0\n+\n+\n+# sdk\\spring\\azure-spring-boot\\pom.xml\n+spring_com.nimbusds:nimbus-jose-jwt;7.9", "originalCommit": "27b3f335c22075424628fe8ac20a9a0c2c558579", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUyMDA3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413520079", "bodyText": "We use version 7.9 because we include a JWKSetCache class which is not available in 7.8 version.", "author": "saragluna", "createdAt": "2020-04-23T05:30:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcwNzA0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMwMTI3MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416301271", "bodyText": "Doesn't that potentially result in conflicts if we are bringing in 7.9 and spring relies on 7.8?", "author": "JonathanGiles", "createdAt": "2020-04-28T03:33:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcwNzA0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc0NTEzNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416745135", "bodyText": "Use 7.9 as the external dependency version for nimbus-jose-jwt, and also create an entry for track1 eventhubs library.", "author": "saragluna", "createdAt": "2020-04-28T16:16:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcwNzA0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcwNzg1Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r412707852", "bodyText": "Can we move this wiki content to the azure-sdk-for-java wiki? Ping me and I will give guidance about where to put this content.", "author": "JonathanGiles", "createdAt": "2020-04-22T06:35:29Z", "path": "sdk/spring/README.md", "diffHunk": "@@ -0,0 +1,83 @@\n+# Azure Spring Boot client library for Java\n+\n+## Getting started\n+### Introduction\n+\n+This repo is for Spring Boot Starters of Azure services. It helps Spring Boot developers to adopt Azure services.\n+\n+### Support Spring Boot\n+This repository supports both Spring Boot 1.5.x, 2.0.x and 2.1.x. Please read [Branch and release](https://github.com/Microsoft/azure-spring-boot/wiki/Branch-and-release) for branch mapping.", "originalCommit": "27b3f335c22075424628fe8ac20a9a0c2c558579", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU0MTc5NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413541795", "bodyText": "Moved.", "author": "saragluna", "createdAt": "2020-04-23T06:25:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcwNzg1Mg=="}], "type": "inlineReview"}, {"oid": "89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "message": "move Spring Boot version mapping wiki to sdk repo", "committedDate": "2020-04-23T05:32:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2MjI3OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413562279", "bodyText": "For code samples in README, we use a tool called embedme to inject codesnippets. Consider using that so we can be sure that the code samples in readmes are compilable.", "author": "srnagar", "createdAt": "2020-04-23T07:03:13Z", "path": "sdk/spring/azure-spring-boot-starter-active-directory/README.md", "diffHunk": "@@ -0,0 +1,223 @@\n+# Azure AD Spring Boot Starter client library for Java\n+\n+## Overview\n+With Spring Starter for Azure Active Directory, now you can get started quickly to build the authentication workflow for a web application that uses Azure AD and OAuth 2.0 to secure its back end. It also enables developers to create a role based authorization workflow for a Web API secured by Azure AD, with the power of the Spring Security Filter Chain. \n+\n+### Key concepts\n+This package provides 2 ways to integrate with Spring Security and authenticate with Azure Active Directory.\n+* Authenticate in backend, auto configuration for common Azure Active Directory OAuth2 properties and `OAuth2UserService` to map authorities are provided.\n+* Authenticate in frontend, sends bearer authorization code to backend, in backend a Spring Security filter validates the Jwt token from Azure AD and save authentication. The Jwt token is also used to acquire a On-Behalf-Of token for Azure AD Graph API so that authenticated user's membership information is available for authorization of access of API resources. Below is a diagram that shows the layers and typical flow for Single Page Application with Spring Boot web API backend that uses the filter for Authentication and Authorization.\n+![Single Page Application + Spring Boot Web API + Azure AD](resource/spring-aad.png)\n+\n+The authorization flow is composed of 3 phrases:\n+* Login with credentials and validate id_token from Azure AD \n+* Get On-Behalf-Of token and membership info from Azure AD Graph API\n+* Evaluate the permission based on membership info to grant or deny access\n+\n+##Getting started\n+#### Register the Application in Azure AD\n+* **Register a new application**: Go to Azure Portal - Azure Active Directory - App registrations - New application registration to register the application in Azure Active Directory.  `Application ID` is `client-id` in `application.properties`.\n+* **Grant permissions to the application**: After application registration succeeded, go to API ACCESS - Required permissions - DELEGATED PERMISSIONS, tick `Access the directory as the signed-in user` and `Sign in and read user profile`. Click `Grant Permissions` (Note: you will need administrator privilege to grant permission).\n+* **Create a client secret key for the application**: Go to API ACCESS - Keys to create a secret key (`client-secret`).\n+\n+#### Add Maven Dependency\n+\n+`azure-spring-boot-starter-active-directory` is published on Maven Central Repository.\n+If you are using Maven, add the following dependency.\n+\n+[//]: # \"{x-version-update-start;com.azure:azure-spring-boot-starter-active-directory;dependency}\"\n+```xml\n+<dependency>\n+    <groupId>com.azure</groupId>\n+    <artifactId>azure-active-directory-spring-boot-starter</artifactId>\n+    <version>2.2.5-beta.1</version>\n+</dependency>\n+```\n+[//]: # \"{x-version-update-end}\"\n+\n+## Examples\n+#### Configure application.properties and autowire beans\n+\n+Refer to different samples for different authentication ways. \n+\n+##### Authenticate in backend\n+\n+Please refer to [azure-spring-boot-sample-active-directory-backend](../azure-spring-boot-samples/azure-spring-boot-sample-active-directory-backend/README-a.md) for authenticate in backend.\n+\n+Configure application.properties:\n+```properties\n+spring.security.oauth2.client.registration.azure.client-id=xxxxxx-your-client-id-xxxxxx\n+spring.security.oauth2.client.registration.azure.client-secret=xxxxxx-your-client-secret-xxxxxx\n+\n+azure.activedirectory.tenant-id=xxxxxx-your-tenant-id-xxxxxx\n+azure.activedirectory.active-directory-groups=group1, group2\n+```\n+\n+Autowire `OAuth2UserService` bean in `WebSecurityConfigurerAdapter`:\n+```java", "originalCommit": "89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIyNDUzMw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r414224533", "bodyText": "done", "author": "saragluna", "createdAt": "2020-04-24T01:10:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2MjI3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2Mjk3MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413562970", "bodyText": "Group id should be com.azure", "author": "srnagar", "createdAt": "2020-04-23T07:04:37Z", "path": "sdk/spring/azure-spring-boot-starter-active-directory/pom.xml", "diffHunk": "@@ -0,0 +1,102 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>com.azure</groupId>\n+    <artifactId>azure-client-sdk-parent</artifactId>\n+    <version>1.7.0</version> <!-- {x-version-update;com.azure:azure-client-sdk-parent;current} -->\n+    <relativePath>../../parents/azure-client-sdk-parent</relativePath>\n+  </parent>\n+\n+  <groupId>com.microsoft.azure</groupId>", "originalCommit": "89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU3NjI0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413576245", "bodyText": "After discussion with @JonathanGiles, we'll keep using com.microsoft.azure for a while since it will keep the packages backward compatible. And we plan to com.azure in our next major version release.", "author": "saragluna", "createdAt": "2020-04-23T07:27:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2Mjk3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2MzY2Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413563667", "bodyText": "com.azure", "author": "srnagar", "createdAt": "2020-04-23T07:05:58Z", "path": "sdk/spring/azure-spring-boot-starter/pom.xml", "diffHunk": "@@ -0,0 +1,60 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>com.azure</groupId>\n+    <artifactId>azure-client-sdk-parent</artifactId>\n+    <version>1.7.0</version> <!-- {x-version-update;com.azure:azure-client-sdk-parent;current} -->\n+    <relativePath>../../parents/azure-client-sdk-parent</relativePath>\n+  </parent>\n+\n+  <groupId>com.microsoft.azure</groupId>", "originalCommit": "89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2NTY1Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413565653", "bodyText": "All modules that have parent as azure-client-sdk-parent should use com.azure as the group.", "author": "srnagar", "createdAt": "2020-04-23T07:09:32Z", "path": "sdk/spring/azure-spring-boot/pom.xml", "diffHunk": "@@ -0,0 +1,227 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>com.azure</groupId>\n+    <artifactId>azure-client-sdk-parent</artifactId>\n+    <version>1.7.0</version> <!-- {x-version-update;com.azure:azure-client-sdk-parent;current} -->\n+    <relativePath>../../parents/azure-client-sdk-parent</relativePath>\n+  </parent>\n+\n+  <groupId>com.microsoft.azure</groupId>", "originalCommit": "89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU5NTU2Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413595567", "bodyText": "Will keep this for a while.", "author": "saragluna", "createdAt": "2020-04-23T07:56:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2NTY1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2NjI5Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413566292", "bodyText": "Consider adding descriptive javadoc for each of the public classes.", "author": "srnagar", "createdAt": "2020-04-23T07:10:51Z", "path": "sdk/spring/azure-spring-boot/src/main/java/com/microsoft/azure/spring/autoconfigure/aad/AADAppRoleStatelessAuthenticationFilter.java", "diffHunk": "@@ -0,0 +1,90 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.microsoft.azure.spring.autoconfigure.aad;\n+\n+import com.nimbusds.jose.JOSEException;\n+import com.nimbusds.jose.proc.BadJOSEException;\n+import com.nimbusds.jwt.proc.BadJWTException;\n+import net.minidev.json.JSONArray;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.http.HttpHeaders;\n+import org.springframework.security.core.Authentication;\n+import org.springframework.security.core.authority.SimpleGrantedAuthority;\n+import org.springframework.security.core.context.SecurityContextHolder;\n+import org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationToken;\n+import org.springframework.web.filter.OncePerRequestFilter;\n+\n+import javax.servlet.FilterChain;\n+import javax.servlet.ServletException;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+import java.text.ParseException;\n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import static org.springframework.util.StringUtils.hasText;\n+\n+public class AADAppRoleStatelessAuthenticationFilter extends OncePerRequestFilter {", "originalCommit": "89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI1MTM3NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r415251375", "bodyText": "done.", "author": "saragluna", "createdAt": "2020-04-26T08:20:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2NjI5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2NjkyNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413566926", "bodyText": "Package names should start with com.azure.", "author": "srnagar", "createdAt": "2020-04-23T07:11:49Z", "path": "sdk/spring/azure-spring-boot/src/main/java/com/microsoft/azure/spring/autoconfigure/aad/AADAppRoleStatelessAuthenticationFilter.java", "diffHunk": "@@ -0,0 +1,90 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.microsoft.azure.spring.autoconfigure.aad;", "originalCommit": "89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU5NTMyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413595321", "bodyText": "Will keep this for a while.", "author": "saragluna", "createdAt": "2020-04-23T07:56:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2NjkyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2OTU5Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413569592", "bodyText": "Copyright content should be validated by CELA. Please reach out to CELA for this. @anuchandy can provide pointers.", "author": "srnagar", "createdAt": "2020-04-23T07:16:26Z", "path": "sdk/spring/azure-spring-boot/src/main/java/com/microsoft/azure/spring/support/GetHashMac.java", "diffHunk": "@@ -0,0 +1,114 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+/*\n+ * Disclaimer:\n+ *      This class is copied from https://github.com/Microsoft/azure-tools-for-java/ with minor modification (fixing\n+ *      static analysis error).\n+ *      Location in the repo: /Utils/azuretools-core/src/com/microsoft/azuretools/azurecommons/util/GetHashMac.java\n+ */", "originalCommit": "89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDczMDg1Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r414730853", "bodyText": "Since it's from Microsoft GitHub Org to Azure GitHub Org, there shouldn't be an issue. Both are under MIT as well. @saragluna, I sent the details offline.", "author": "anuchandy", "createdAt": "2020-04-24T17:09:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU2OTU5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU3MDk0OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413570948", "bodyText": "Private keys should not be checked in. New key can be generated when the test is run.", "author": "srnagar", "createdAt": "2020-04-23T07:18:51Z", "path": "sdk/spring/azure-spring-boot/src/test/resources/test-private-key.txt", "diffHunk": "@@ -0,0 +1,30 @@\n+-----BEGIN RSA PRIVATE KEY-----", "originalCommit": "89bdfb5789fca9e96925bcffdb3a630b0cd859a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU5NjM4NA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r413596384", "bodyText": "Will remove it.", "author": "saragluna", "createdAt": "2020-04-23T07:57:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU3MDk0OA=="}], "type": "inlineReview"}, {"oid": "0dd24f2363adc68e58362dd31b35bf0137ed433a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0dd24f2363adc68e58362dd31b35bf0137ed433a", "message": "embed sample code in readme files", "committedDate": "2020-04-23T15:06:00Z", "type": "commit"}, {"oid": "cef137024e66b38d88ee71f7f32f9f0823918150", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cef137024e66b38d88ee71f7f32f9f0823918150", "message": "fix ci build error", "committedDate": "2020-04-24T15:57:20Z", "type": "commit"}, {"oid": "dc8152d1ece34e984c7c488a097a44ebe29af9d6", "url": "https://github.com/Azure/azure-sdk-for-java/commit/dc8152d1ece34e984c7c488a097a44ebe29af9d6", "message": "fix ci build error", "committedDate": "2020-04-24T16:14:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk1MTI5MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r414951291", "bodyText": "Consider adding a line before package", "author": "hemanttanwar", "createdAt": "2020-04-25T01:58:16Z", "path": "sdk/spring/azure-spring-boot/src/main/java/com/microsoft/azure/spring/autoconfigure/aad/AADAppRoleStatelessAuthenticationFilter.java", "diffHunk": "@@ -0,0 +1,90 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.microsoft.azure.spring.autoconfigure.aad;", "originalCommit": "dc8152d1ece34e984c7c488a097a44ebe29af9d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI1MTQ0Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r415251442", "bodyText": "done.", "author": "saragluna", "createdAt": "2020-04-26T08:21:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDk1MTI5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTE3ODE3Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r415178177", "bodyText": "Have you investigated using com.azure.core.util.logging.ClientLogger , it uses slfj logger inside it.", "author": "hemanttanwar", "createdAt": "2020-04-26T00:42:46Z", "path": "sdk/spring/azure-spring-boot/src/main/java/com/microsoft/azure/spring/autoconfigure/aad/AADAppRoleStatelessAuthenticationFilter.java", "diffHunk": "@@ -0,0 +1,90 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+package com.microsoft.azure.spring.autoconfigure.aad;\n+\n+import com.nimbusds.jose.JOSEException;\n+import com.nimbusds.jose.proc.BadJOSEException;\n+import com.nimbusds.jwt.proc.BadJWTException;\n+import net.minidev.json.JSONArray;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.http.HttpHeaders;\n+import org.springframework.security.core.Authentication;\n+import org.springframework.security.core.authority.SimpleGrantedAuthority;\n+import org.springframework.security.core.context.SecurityContextHolder;\n+import org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationToken;\n+import org.springframework.web.filter.OncePerRequestFilter;\n+\n+import javax.servlet.FilterChain;\n+import javax.servlet.ServletException;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpServletResponse;\n+import java.io.IOException;\n+import java.text.ParseException;\n+import java.util.Objects;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import static org.springframework.util.StringUtils.hasText;\n+\n+public class AADAppRoleStatelessAuthenticationFilter extends OncePerRequestFilter {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AADAppRoleStatelessAuthenticationFilter.class);", "originalCommit": "dc8152d1ece34e984c7c488a097a44ebe29af9d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI1NDExNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r415254116", "bodyText": "I think we'd better stay with slf4j since ClientLogger is more like for SDK clients.", "author": "saragluna", "createdAt": "2020-04-26T08:34:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTE3ODE3Nw=="}], "type": "inlineReview"}, {"oid": "919086ae73b6c93c6f6dc68f1a39bf7608f09aac", "url": "https://github.com/Azure/azure-sdk-for-java/commit/919086ae73b6c93c6f6dc68f1a39bf7608f09aac", "message": "fix code style and add java doc for public api", "committedDate": "2020-04-26T08:13:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI5MDM1Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416290356", "bodyText": "Any reason for recommending using SNAPSHOT versions instead of release versions?", "author": "srnagar", "createdAt": "2020-04-28T02:59:54Z", "path": "sdk/spring/README.md", "diffHunk": "@@ -0,0 +1,83 @@\n+# Azure Spring Boot client library for Java\n+\n+## Getting started\n+### Introduction\n+\n+This repo is for Spring Boot Starters of Azure services. It helps Spring Boot developers to adopt Azure services.\n+\n+### Support Spring Boot\n+This repository supports both Spring Boot 2.1.x and 2.2.x. Please read [Spring Boot Dependency Mapping](https://github.com/Azure/azure-sdk-for-java/wiki/Spring-Boot-Dependency-Mapping) for dependency mapping.\n+\n+### Prerequisites\n+- JDK 1.8 and above\n+- [Maven](http://maven.apache.org/) 3.0 and above\n+\n+## Key concepts\n+### Usage\n+\n+Below starters are available with latest release version. We recommend users to leverage latest version for bug fix and new features.\n+You can find them in [Maven Central Repository](https://search.maven.org/).\n+The first three starters are also available in [Spring Initializr](http://start.spring.io/). \n+\n+Starter Name | Version for Spring Boot 2.2.x | Version for Spring Boot 2.1.x | Version for Spring Boot 2.0.x\n+---|:---:|:---:|:---:\n+[azure-active-directory-spring-boot-starter](azure-spring-boot-starter-active-directory/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-active-directory-spring-boot-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-active-directory-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-active-directory-spring-boot-starter%20AND%20v:2.0.*)\n+[azure-storage-spring-boot-starter](azure-spring-boot-starter-storage/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-storage-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-storage-spring-boot-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-storage-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-storage-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-storage-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-storage-spring-boot-starter%20AND%20v:2.0.*)\n+[azure-keyvault-secrets-spring-boot-starter](azure-spring-boot-starter-keyvault-secrets/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-keyvault-secrets-spring-boot-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-keyvault-secrets-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-keyvault-secrets-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-keyvault-secrets-spring-boot-starter%20AND%20v:2.0.*)\n+[azure-active-directory-b2c-spring-boot-starter](azure-spring-boot-starter-active-directory-b2c/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-b2c-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-active-directory-b2c-spring-boot-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-active-directory-b2c-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-active-directory-b2c-spring-boot-starter%20AND%20v:2.1.*) | N/A\n+[azure-cosmosdb-spring-boot-starter](azure-spring-boot-starter-cosmosdb/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-cosmosdb-spring-boot-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-cosmosdb-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-cosmosdb-spring-boot-starter%20AND%20v:2.0.*)\n+[azure-mediaservices-spring-boot-starter](azure-spring-boot-starter-mediaservices/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-mediaservices-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-mediaservices-spring-boot-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-mediaservices-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-mediaservices-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-mediaservices-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-mediaservices-spring-boot-starter%20AND%20v:2.0.*)\n+[azure-servicebus-spring-boot-starter](azure-spring-boot-starter-servicebus/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-servicebus-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-servicebus-spring-boot-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-servicebus-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-servicebus-spring-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-servicebus-spring-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-servicebus-spring-boot-starter%20AND%20v:2.0.*)\n+[spring-data-gremlin-boot-starter](azure-spring-boot-starter-data-gremlin/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/spring-data-gremlin-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22spring-data-gremlin-boot-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/spring-data-gremlin-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:spring-data-gremlin-boot-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/spring-data-gremlin-boot-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:spring-data-gremlin-boot-starter%20AND%20v:2.0.*)\n+[azure-spring-boot-metrics-starter](azure-spring-boot-starter-metrics) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-spring-boot-metrics-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-spring-boot-metrics-starter%22) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-spring-boot-metrics-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-spring-boot-metrics-starter%20AND%20v:2.1.*) | [![](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-spring-boot-metrics-starter/2.0.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-spring-boot-metrics-starter%20AND%20v:2.0.*)\n+[azure-servicebus-jms-spring-boot-starter](azure-spring-boot-starter-servicebus-jms/README.md) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-servicebus-jms-spring-boot-starter.svg)](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.microsoft.azure%22%20AND%20a%3A%22azure-servicebus-jms-spring-boot-starter%22) | [![Maven Central](https://img.shields.io/maven-central/v/com.microsoft.azure/azure-servicebus-jms-spring-boot-starter/2.1.svg)](https://search.maven.org/search?q=g:com.microsoft.azure%20AND%20a:azure-servicebus-jms-spring-boot-starter%20AND%20v:2.1.*) | N/A\n+\n+### Snapshots  \n+[![Nexus OSS](https://img.shields.io/nexus/snapshots/https/oss.sonatype.org/com.microsoft.azure/azure-spring-boot.svg)](https://oss.sonatype.org/content/repositories/snapshots/com/microsoft/azure/azure-spring-boot/)\n+\n+Snapshots built from `master` branch are available, add [maven repositories](https://maven.apache.org/settings.html#Repositories) configuration to your pom file as below. ", "originalCommit": "919086ae73b6c93c6f6dc68f1a39bf7608f09aac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjU1MDk1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416550951", "bodyText": "Snapshots are the daily built versions, it could let users try our new features without waiting for a release.", "author": "saragluna", "createdAt": "2020-04-28T11:52:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI5MDM1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI5NjUwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416296509", "bodyText": "Ensure that streams are closed. Use try-with-resources.", "author": "srnagar", "createdAt": "2020-04-28T03:18:41Z", "path": "sdk/spring/azure-spring-boot/src/main/java/com/microsoft/azure/spring/support/GetHashMac.java", "diffHunk": "@@ -0,0 +1,114 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+/*\n+ * Disclaimer:\n+ *      This class is copied from https://github.com/Microsoft/azure-tools-for-java/ with minor modification (fixing\n+ *      static analysis error).\n+ *      Location in the repo: /Utils/azuretools-core/src/com/microsoft/azuretools/azurecommons/util/GetHashMac.java\n+ */\n+\n+package com.microsoft.azure.spring.support;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.nio.charset.StandardCharsets;\n+import java.security.MessageDigest;\n+import java.security.NoSuchAlgorithmException;\n+import java.util.Locale;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+public final class GetHashMac {\n+    public static final String MAC_REGEX = \"([0-9A-Fa-f]{2}[:-]){5}[0-9A-Fa-f]{2}\";\n+    public static final String MAC_REGEX_ZERO = \"([0]{2}[:-]){5}[0]{2}\";\n+    public static final String HASHED_MAC_REGEX = \"[0-9a-f]{64}\";\n+\n+    private GetHashMac() {\n+        super();\n+    }\n+\n+    public static boolean isValidHashMacFormat(String hashMac) {\n+        if (hashMac == null || hashMac.isEmpty()) {\n+            return false;\n+        }\n+\n+        final Pattern hashedMacPattern = Pattern.compile(HASHED_MAC_REGEX);\n+        final Matcher matcher = hashedMacPattern.matcher(hashMac);\n+        return matcher.matches();\n+    }\n+\n+    public static String getHashMac() {\n+        final String rawMac = getRawMac();\n+        if (rawMac == null || rawMac.isEmpty()) {\n+            return null;\n+        }\n+\n+        final Pattern pattern = Pattern.compile(MAC_REGEX);\n+        final Pattern patternZero = Pattern.compile(MAC_REGEX_ZERO);\n+        final Matcher matcher = pattern.matcher(rawMac);\n+        String mac = \"\";\n+        while (matcher.find()) {\n+            mac = matcher.group(0);\n+            if (!patternZero.matcher(mac).matches()) {\n+                break;\n+            }\n+        }\n+\n+        return hash(mac);\n+    }\n+\n+    private static String getRawMac() {\n+        final StringBuilder ret = new StringBuilder();\n+\n+        final String os = System.getProperty(\"os.name\");\n+        String[] command = {\"ifconfig\", \"-a\"};\n+        if (os != null && !os.isEmpty() && os.toLowerCase(Locale.US).startsWith(\"win\")) {\n+            command = new String[]{\"getmac\"};\n+        }\n+\n+        try {\n+            final ProcessBuilder builder = new ProcessBuilder(command);\n+            final Process process = builder.start();\n+\n+            InputStream inputStream = process.getInputStream();", "originalCommit": "919086ae73b6c93c6f6dc68f1a39bf7608f09aac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc0MzgxMg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416743812", "bodyText": "done.", "author": "saragluna", "createdAt": "2020-04-28T16:14:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI5NjUwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI5OTAxNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416299015", "bodyText": "Add javadocs to public classes and it's public methods.", "author": "srnagar", "createdAt": "2020-04-28T03:26:27Z", "path": "sdk/spring/azure-spring-boot/src/main/java/com/microsoft/azure/telemetry/TelemetrySender.java", "diffHunk": "@@ -0,0 +1,83 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.microsoft.azure.telemetry;\n+\n+import com.fasterxml.jackson.core.JsonProcessingException;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.microsoft.azure.spring.support.GetHashMac;\n+import com.microsoft.azure.utils.PropertyLoader;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.http.HttpEntity;\n+import org.springframework.http.HttpHeaders;\n+import org.springframework.http.HttpMethod;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.http.ResponseEntity;\n+import org.springframework.lang.NonNull;\n+import org.springframework.util.Assert;\n+import org.springframework.web.client.RestClientException;\n+import org.springframework.web.client.RestTemplate;\n+\n+import java.util.Map;\n+\n+import static org.springframework.util.MimeTypeUtils.APPLICATION_JSON;\n+\n+public class TelemetrySender {", "originalCommit": "919086ae73b6c93c6f6dc68f1a39bf7608f09aac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc0MzkwOA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416743908", "bodyText": "done.", "author": "saragluna", "createdAt": "2020-04-28T16:14:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjI5OTAxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMwMDMwNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416300304", "bodyText": "This json can be read from a file in resources instead of adding this long json with escaping. It's easier to update too.", "author": "srnagar", "createdAt": "2020-04-28T03:30:52Z", "path": "sdk/spring/azure-spring-boot/src/test/java/com/microsoft/azure/spring/autoconfigure/aad/MicrosoftGraphConstants.java", "diffHunk": "@@ -0,0 +1,121 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+\n+package com.microsoft.azure.spring.autoconfigure.aad;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class MicrosoftGraphConstants {\n+    public static final String SERVICE_ENVIRONMENT_PROPERTY = \"azure.activedirectory.environment\";\n+    public static final String CLIENT_ID_PROPERTY = \"azure.activedirectory.client-id\";\n+    public static final String CLIENT_SECRET_PROPERTY = \"azure.activedirectory.client-secret\";\n+    public static final String TARGETED_GROUPS_PROPERTY = \"azure.activedirectory.active-directory-groups\";\n+    public static final String TENANT_ID_PROPERTY = \"azure.activedirectory.tenant-id\";\n+\n+    public static final String DEFAULT_ENVIRONMENT = \"global\";\n+    public static final String CLIENT_ID = \"real_client_id\";\n+    public static final String CLIENT_SECRET = \"real_client_secret\";\n+    public static final List<String> TARGETED_GROUPS = Arrays.asList(\"group1\", \"group2\", \"group3\");\n+\n+    public static final String TOKEN_HEADER = \"Authorization\";\n+    public static final String BEARER_TOKEN = \"Bearer real_jtw_bearer_token\";\n+\n+    public static final String USERGROUPS_JSON = \"{\\n\"\n+        + \"    \\\"odata.metadata\\\": \\\"https://graph.windows.net/myorganization/$metadata#directoryObjects\\\",\\n\"\n+        + \"    \\\"value\\\": [\\n\"\n+        + \"        {\\n\"\n+        + \"            \\\"@odata.type\\\": \\\"#microsoft.graph.group\\\",\\n\"\n+        + \"            \\\"id\\\": \\\"12345678-7baf-48ce-96f4-a2d60c26391e\\\",\\n\"\n+        + \"            \\\"deletedDateTime\\\": null,\\n\"\n+        + \"            \\\"classification\\\": null,\\n\"\n+        + \"            \\\"createdDateTime\\\": \\\"2017-08-02T12:54:37Z\\\",\\n\"\n+        + \"            \\\"creationOptions\\\": [],\\n\"\n+        + \"            \\\"description\\\": \\\"this is group1\\\",\\n\"\n+        + \"            \\\"displayName\\\": \\\"group1\\\",\\n\"\n+        + \"            \\\"groupTypes\\\": [],\\n\"\n+        + \"            \\\"mail\\\": null,\\n\"\n+        + \"            \\\"mailEnabled\\\": false,\\n\"\n+        + \"            \\\"mailNickname\\\": \\\"something\\\",\\n\"\n+        + \"            \\\"onPremisesLastSyncDateTime\\\": null,\\n\"\n+        + \"            \\\"onPremisesSecurityIdentifier\\\": null,\\n\"\n+        + \"            \\\"onPremisesSyncEnabled\\\": null,\\n\"\n+        + \"            \\\"preferredDataLocation\\\": null,\\n\"\n+        + \"            \\\"proxyAddresses\\\": [],\\n\"\n+        + \"            \\\"renewedDateTime\\\": \\\"2017-08-02T12:54:37Z\\\",\\n\"\n+        + \"            \\\"resourceBehaviorOptions\\\": [],\\n\"\n+        + \"            \\\"resourceProvisioningOptions\\\": [],\\n\"\n+        + \"            \\\"securityEnabled\\\": true,\\n\"\n+        + \"            \\\"visibility\\\": null,\\n\"\n+        + \"            \\\"onPremisesProvisioningErrors\\\": []\\n\"\n+        + \"        },\\n\"\n+        + \"        {\\n\"\n+        + \"            \\\"@odata.type\\\": \\\"#microsoft.graph.group\\\",\\n\"\n+        + \"            \\\"id\\\": \\\"12345678-e757-4474-b9c4-3f00a9ac17a0\\\",\\n\"\n+        + \"            \\\"deletedDateTime\\\": null,\\n\"\n+        + \"            \\\"classification\\\": null,\\n\"\n+        + \"            \\\"createdDateTime\\\": \\\"2017-08-09T13:45:03Z\\\",\\n\"\n+        + \"            \\\"creationOptions\\\": [],\\n\"\n+        + \"            \\\"description\\\": \\\"this is group2\\\",\\n\"\n+        + \"            \\\"displayName\\\": \\\"group2\\\",\\n\"\n+        + \"            \\\"groupTypes\\\": [],\\n\"\n+        + \"            \\\"mail\\\": null,\\n\"\n+        + \"            \\\"mailEnabled\\\": false,\\n\"\n+        + \"            \\\"mailNickname\\\": \\\"somethingelse\\\",\\n\"\n+        + \"            \\\"onPremisesLastSyncDateTime\\\": null,\\n\"\n+        + \"            \\\"onPremisesSecurityIdentifier\\\": null,\\n\"\n+        + \"            \\\"onPremisesSyncEnabled\\\": null,\\n\"\n+        + \"            \\\"preferredDataLocation\\\": null,\\n\"\n+        + \"            \\\"proxyAddresses\\\": [],\\n\"\n+        + \"            \\\"renewedDateTime\\\": \\\"2017-08-09T13:45:03Z\\\",\\n\"\n+        + \"            \\\"resourceBehaviorOptions\\\": [],\\n\"\n+        + \"            \\\"resourceProvisioningOptions\\\": [],\\n\"\n+        + \"            \\\"securityEnabled\\\": true,\\n\"\n+        + \"            \\\"visibility\\\": null,\\n\"\n+        + \"            \\\"onPremisesProvisioningErrors\\\": []\\n\"\n+        + \"        },\\n\"\n+        + \"        {\\n\"\n+        + \"            \\\"@odata.type\\\": \\\"#microsoft.graph.group\\\",\\n\"\n+        + \"            \\\"id\\\": \\\"12345678-86a4-4237-aeb0-60bad29c1de0\\\",\\n\"\n+        + \"            \\\"deletedDateTime\\\": null,\\n\"\n+        + \"            \\\"classification\\\": null,\\n\"\n+        + \"            \\\"createdDateTime\\\": \\\"2017-08-09T05:41:43Z\\\",\\n\"\n+        + \"            \\\"creationOptions\\\": [],\\n\"\n+        + \"            \\\"description\\\": \\\"this is group3\\\",\\n\"\n+        + \"            \\\"displayName\\\": \\\"group3\\\",\\n\"\n+        + \"            \\\"groupTypes\\\": [],\\n\"\n+        + \"            \\\"mail\\\": null,\\n\"\n+        + \"            \\\"mailEnabled\\\": false,\\n\"\n+        + \"            \\\"mailNickname\\\": \\\"somethingelse\\\",\\n\"\n+        + \"            \\\"onPremisesLastSyncDateTime\\\": null,\\n\"\n+        + \"            \\\"onPremisesSecurityIdentifier\\\": null,\\n\"\n+        + \"            \\\"onPremisesSyncEnabled\\\": null,\\n\"\n+        + \"            \\\"preferredDataLocation\\\": null,\\n\"\n+        + \"            \\\"proxyAddresses\\\": [],\\n\"\n+        + \"            \\\"renewedDateTime\\\": \\\"2017-08-09T05:41:43Z\\\",\\n\"\n+        + \"            \\\"resourceBehaviorOptions\\\": [],\\n\"\n+        + \"            \\\"resourceProvisioningOptions\\\": [],\\n\"\n+        + \"            \\\"securityEnabled\\\": true,\\n\"\n+        + \"            \\\"visibility\\\": null,\\n\"\n+        + \"            \\\"onPremisesProvisioningErrors\\\": []\\n\"\n+        + \"        }\"\n+        + \"],\\n\"\n+        + \"    \\\"odata.nextLink\\\": \\\"directoryObjects/$/Microsoft.DirectoryServices.User/\"\n+        + \"12345678-2898-434a-a370-8ec974c2fb57/memberOf?$skiptoken=X'4453707407000100000000\"\n+        + \"00000000100000009D29CBA7B45D854A84FF7F9B636BD9DC000000000000000000000017312E322E3\"\n+        + \"834302E3131333535362E312E342E3233333100000000'\\\"\\n\"\n+        + \"}\";", "originalCommit": "919086ae73b6c93c6f6dc68f1a39bf7608f09aac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc0NDExMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/10285#discussion_r416744111", "bodyText": "done.", "author": "saragluna", "createdAt": "2020-04-28T16:15:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjMwMDMwNA=="}], "type": "inlineReview"}, {"oid": "a53f140baf542547d67543944129e00967b7d1b8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a53f140baf542547d67543944129e00967b7d1b8", "message": "add javadoc, refactor some tests, upgrade nimbus-jose-jwt version to 7.9", "committedDate": "2020-04-28T14:45:15Z", "type": "commit"}, {"oid": "de87f95571bc818114db6406f4178f43a1d83d9f", "url": "https://github.com/Azure/azure-sdk-for-java/commit/de87f95571bc818114db6406f4178f43a1d83d9f", "message": "jdk11 spotbugs false positive", "committedDate": "2020-04-28T16:12:39Z", "type": "commit"}, {"oid": "aab84523f746348752e8b5d1654539c21ff24d77", "url": "https://github.com/Azure/azure-sdk-for-java/commit/aab84523f746348752e8b5d1654539c21ff24d77", "message": "Merge branch 'master' into feature/spring-boot-aad", "committedDate": "2020-04-28T16:19:21Z", "type": "commit"}]}