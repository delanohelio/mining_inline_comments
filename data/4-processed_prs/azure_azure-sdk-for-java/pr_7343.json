{"pr_number": 7343, "pr_title": "Fix dyanmic resource deprovision", "pr_createdAt": "2020-01-10T17:53:17Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/7343", "timeline": [{"oid": "950fbc482d1fb099e455d3e3c7468d21d4c374be", "url": "https://github.com/Azure/azure-sdk-for-java/commit/950fbc482d1fb099e455d3e3c7468d21d4c374be", "message": "update to latest version of scripts", "committedDate": "2020-01-10T17:45:10Z", "type": "commit"}, {"oid": "cba38c46ba06fa91095bc1bc486215c6eaceabd1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/cba38c46ba06fa91095bc1bc486215c6eaceabd1", "message": "update archetype-sdk-tests.yml to use latest version of resource allocation scripts", "committedDate": "2020-01-10T17:52:32Z", "type": "commit"}, {"oid": "827ed0064a0df21e7f79dcbb292b01d35f5bb3b4", "url": "https://github.com/Azure/azure-sdk-for-java/commit/827ed0064a0df21e7f79dcbb292b01d35f5bb3b4", "message": "enable cosmos testing", "committedDate": "2020-01-10T17:52:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2Njg0NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7343#discussion_r365366845", "bodyText": "What is our longer term plan to keep these scripts updated across repos? Do we have an issue tracking that?", "author": "weshaggard", "createdAt": "2020-01-10T18:22:03Z", "path": "eng/New-TestResources.ps1", "diffHunk": "@@ -55,6 +55,9 @@ param (\n     [ValidateNotNullOrEmpty()]\n     [hashtable] $AdditionalParameters,", "originalCommit": "827ed0064a0df21e7f79dcbb292b01d35f5bb3b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3NDg2MA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7343#discussion_r365374860", "bodyText": "This is something that @heaths brought up and we've talked about but haven't reached a conclusion. I've opened Azure/azure-sdk#934 to track this.", "author": "danieljurek", "createdAt": "2020-01-10T18:41:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM2Njg0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3OTg0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7343#discussion_r365379849", "bodyText": "Are we using all the digits and alphabets to generate basename. This will be important to have larger key space so we have no conflict when we enable all the OS/languages/version  in pipeline.", "author": "hemanttanwar", "createdAt": "2020-01-10T18:53:08Z", "path": "eng/New-TestResources.ps1", "diffHunk": "@@ -122,7 +125,14 @@ if ($TestApplicationId -and !$TestApplicationOid) {\n }\n \n # Format the resource group name based on resource group naming recommendations and limitations.\n-$resourceGroupName = \"rg-{0}-$baseName\" -f ($ServiceDirectory -replace '[\\\\\\/]', '-').Substring(0, [Math]::Min($ServiceDirectory.Length, 90 - $BaseName.Length - 4)).Trim('-')\n+$resourceGroupName = if ($CI) {", "originalCommit": "827ed0064a0df21e7f79dcbb292b01d35f5bb3b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM4NzI0Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7343#discussion_r365387246", "bodyText": "This is a concern I brought up as well, but we are limited by many different resources (Key Vault being one of them) on the length. While reducing uniqueness of hte otherwise 128-bit integer could result in more collisions, in practice this is pretty rare. If an error occured, it would be obvious (something like \"resource group already exists\") so it'd be easy to diagnose and just restart a run.", "author": "heaths", "createdAt": "2020-01-10T19:10:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3OTg0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQwMjc2Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/7343#discussion_r365402767", "bodyText": "Chatted about this with @mikeharder yesterday and we are ok today with the amount of randomness using 16 characters from a guid (formatted without the dashes). This gives us 16^16 names to work with. We could increase this considerably by expanding to the whole alphabet.", "author": "danieljurek", "createdAt": "2020-01-10T19:48:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3OTg0OQ=="}], "type": "inlineReview"}, {"oid": "e734c941d69faebe26ea859dc881c58eb1d415d8", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e734c941d69faebe26ea859dc881c58eb1d415d8", "message": "remove environment variable indirection, add test application oid explicitly into call to new-testresources.ps1", "committedDate": "2020-01-10T19:07:25Z", "type": "commit"}, {"oid": "061498d25008324a98a3cae7991089844d246693", "url": "https://github.com/Azure/azure-sdk-for-java/commit/061498d25008324a98a3cae7991089844d246693", "message": "Revert \"enable cosmos testing\"\n\nThis reverts commit 827ed0064a0df21e7f79dcbb292b01d35f5bb3b4.", "committedDate": "2020-01-10T19:57:25Z", "type": "commit"}]}