{"pr_number": 13511, "pr_title": "Artifact grouping take 2", "pr_createdAt": "2020-07-27T03:05:46Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/13511", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkxMjM2Mg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r460912362", "bodyText": "@mitchdenny shouldn't the artifact location be $(Pipeline.Workspace)/${{parameters.ArtifactName}}-signed/${{artifact.groupId}}/${{artifact.name}} like it is in eng/pipelines/templates/stages/archetype-java-release.yml?", "author": "JimSuplizio", "createdAt": "2020-07-27T14:02:10Z", "path": "eng/pipelines/templates/stages/archetype-java-release-pom-only.yml", "diffHunk": "@@ -66,14 +66,9 @@ stages:\n                 deploy:\n                   steps:\n                     - checkout: self\n-                    - template: /eng/pipelines/templates/steps/stage-artifacts.yml\n-                      parameters:\n-                        SourceFolder: ${{parameters.ArtifactName}}-signed\n-                        TargetFolder: ${{artifact.safeName}}\n-                        PackageName: ${{artifact.name}}\n                     - template: /eng/common/pipelines/templates/steps/create-tags-and-git-release.yml\n                       parameters:\n-                        ArtifactLocation: $(Pipeline.Workspace)/${{artifact.safeName}}\n+                        ArtifactLocation: ${{parameters.ArtifactName}}-signed/${{artifact.groupId}}/${{artifact.name}}", "originalCommit": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI4ODMyMQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r461288321", "bodyText": "Fixed", "author": "mitchdenny", "createdAt": "2020-07-28T02:59:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkxMjM2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkxMzg0OQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r460913849", "bodyText": "Shouldn't this also be $(Pipeline.Workspace)/${{parameters.ArtifactName}}-signed/${{artifact.groupId}}/${{artifact.name}}?", "author": "JimSuplizio", "createdAt": "2020-07-27T14:04:21Z", "path": "eng/pipelines/templates/stages/archetype-java-release.yml", "diffHunk": "@@ -165,14 +160,9 @@ stages:\n                   deploy:\n                     steps:\n                       - checkout: self\n-                      - template: /eng/pipelines/templates/steps/stage-artifacts.yml\n-                        parameters:\n-                          SourceFolder: ${{parameters.ArtifactName}}-signed\n-                          TargetFolder: ${{artifact.safeName}}\n-                          PackageName: ${{artifact.name}}\n                       - template: /eng/common/pipelines/templates/steps/docs-metadata-release.yml\n                         parameters:\n-                          ArtifactLocation: $(Pipeline.Workspace)/${{artifact.safeName}}\n+                          ArtifactLocation: ${{parameters.ArtifactName}}-signed/${{artifact.groupId}}/${{artifact.name}}", "originalCommit": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI4ODE5Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r461288196", "bodyText": "Fixed.", "author": "mitchdenny", "createdAt": "2020-07-28T02:58:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkxMzg0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI4ODI1Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r461288256", "bodyText": "Probably would have worked anyway but consistency is good.", "author": "mitchdenny", "createdAt": "2020-07-28T02:58:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkxMzg0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI0MzIwNQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r461243205", "bodyText": "Unless there is a good reason for this to be a PS module I'd suggest just having it be a helper script that we dot source into places that need it. PS modules end up causing more trouble then they are worth in a lot of our usages as such @chidozieononiwu is actually starting to move us away from them.", "author": "weshaggard", "createdAt": "2020-07-28T00:16:56Z", "path": "eng/scripts/MavenPackaging/MavenPackaging.psd1", "diffHunk": "@@ -0,0 +1,18 @@\n+@{", "originalCommit": "b353ffd05ad5eb7c9db3168c109b79c360a1b56d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI4NzA5OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r461287098", "bodyText": "What kind of problems? Curious now.", "author": "mitchdenny", "createdAt": "2020-07-28T02:54:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI0MzIwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTM2MDk5Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r461360997", "bodyText": "I've moved back to dot-sourcing for now.", "author": "mitchdenny", "createdAt": "2020-07-28T07:00:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI0MzIwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTYyNDk2OA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r461624968", "bodyText": "@mitchdenny, if you recall a couple of weeks back, there were a bunch of transient errors installing PS modules that Dozie had to fix.", "author": "JimSuplizio", "createdAt": "2020-07-28T14:27:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI0MzIwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg3NjgwNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/13511#discussion_r461876804", "bodyText": "Yes there are various transient networking errors that we can completely avoided if we use all local scripts. Even using local modules things are a little difficult to debug and test locally as you always have to remove the module after you make an updated change to it before you can reinstall it. There have also been other odd issues like we had to disable the progress dialog in various places when installing even local modules. There were enough small issues that I felt we weren't getting anything useful from PS modules so I've decided to just use raw scripts.", "author": "weshaggard", "createdAt": "2020-07-28T21:01:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI0MzIwNQ=="}], "type": "inlineReview"}, {"oid": "e62ff76ad7982edff6123c9a4084d01e54bf40cc", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e62ff76ad7982edff6123c9a4084d01e54bf40cc", "message": "Artifact grouping - take 2", "committedDate": "2020-07-29T00:31:53Z", "type": "commit"}, {"oid": "e9279aa0f9c6d69e10e77d73d2d74a2e7ce704b7", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e9279aa0f9c6d69e10e77d73d2d74a2e7ce704b7", "message": "Use new script.", "committedDate": "2020-07-29T00:31:54Z", "type": "commit"}, {"oid": "a5066cd0f55e047b771bff79176101b7b3345919", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a5066cd0f55e047b771bff79176101b7b3345919", "message": "Try to get PS module loading.", "committedDate": "2020-07-29T00:31:54Z", "type": "commit"}, {"oid": "a5600ba15bd617f347662e951c3d0549aa0d7f20", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a5600ba15bd617f347662e951c3d0549aa0d7f20", "message": "Correct build output directory.", "committedDate": "2020-07-29T00:31:54Z", "type": "commit"}, {"oid": "a2d979c8f7bf996148b2cdf2f9e4f026c0db072b", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a2d979c8f7bf996148b2cdf2f9e4f026c0db072b", "message": "Remove usages of stage-artifacts.yml", "committedDate": "2020-07-29T00:31:55Z", "type": "commit"}, {"oid": "761769248fed10099e5234b2d54796fada596f34", "url": "https://github.com/Azure/azure-sdk-for-java/commit/761769248fed10099e5234b2d54796fada596f34", "message": "One more.", "committedDate": "2020-07-29T00:31:55Z", "type": "commit"}, {"oid": "46432e9d8ca58d3e51451ab40afa3fae8b2dd666", "url": "https://github.com/Azure/azure-sdk-for-java/commit/46432e9d8ca58d3e51451ab40afa3fae8b2dd666", "message": "Remove staging template entirely.", "committedDate": "2020-07-29T00:31:55Z", "type": "commit"}, {"oid": "e8bb279e4e3b79dc9720cf866be67d2fc5a73a88", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e8bb279e4e3b79dc9720cf866be67d2fc5a73a88", "message": "Tweak artifact locations.", "committedDate": "2020-07-29T00:31:55Z", "type": "commit"}, {"oid": "63abe1e3cc8330919c66b57126e23d29702a31aa", "url": "https://github.com/Azure/azure-sdk-for-java/commit/63abe1e3cc8330919c66b57126e23d29702a31aa", "message": "Switch back to dot sourcing.", "committedDate": "2020-07-29T00:31:56Z", "type": "commit"}, {"oid": "110d8898794d785b3f790bc71b81347c0bc552c3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/110d8898794d785b3f790bc71b81347c0bc552c3", "message": "Fix changelog error.", "committedDate": "2020-07-29T00:31:56Z", "type": "commit"}, {"oid": "110d8898794d785b3f790bc71b81347c0bc552c3", "url": "https://github.com/Azure/azure-sdk-for-java/commit/110d8898794d785b3f790bc71b81347c0bc552c3", "message": "Fix changelog error.", "committedDate": "2020-07-29T00:31:56Z", "type": "forcePushed"}, {"oid": "55a3c2814e48f5bb551013242607d4687fae4766", "url": "https://github.com/Azure/azure-sdk-for-java/commit/55a3c2814e48f5bb551013242607d4687fae4766", "message": "Fix stage only parameter.", "committedDate": "2020-07-29T01:01:01Z", "type": "commit"}, {"oid": "2f4b631fc8c1108c9d1ed17478f63ba4fc53dd16", "url": "https://github.com/Azure/azure-sdk-for-java/commit/2f4b631fc8c1108c9d1ed17478f63ba4fc53dd16", "message": "Bump template version.", "committedDate": "2020-07-29T01:03:32Z", "type": "commit"}, {"oid": "69cd7988e10a6e4f61ccd2540caacd8b5ec9325d", "url": "https://github.com/Azure/azure-sdk-for-java/commit/69cd7988e10a6e4f61ccd2540caacd8b5ec9325d", "message": "Increment package version after release of com.azure azure-sdk-template (#13588)", "committedDate": "2020-07-29T02:29:45Z", "type": "commit"}, {"oid": "5282ad473d670336c84866aab9c506151d6162ec", "url": "https://github.com/Azure/azure-sdk-for-java/commit/5282ad473d670336c84866aab9c506151d6162ec", "message": "Update version to 1.1.0.", "committedDate": "2020-07-29T02:33:47Z", "type": "commit"}, {"oid": "a7ad03056fb49d717c5dbabfa9315833f1f608c1", "url": "https://github.com/Azure/azure-sdk-for-java/commit/a7ad03056fb49d717c5dbabfa9315833f1f608c1", "message": "Merge branch 'feature/artifact-grouping-take-2' of https://github.com/azure/azure-sdk-for-java into feature/artifact-grouping-take-2", "committedDate": "2020-07-29T02:38:24Z", "type": "commit"}, {"oid": "0f6573f10552c1e0824734fa5810e118045f7588", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0f6573f10552c1e0824734fa5810e118045f7588", "message": "Increment package version after release of com.azure azure-sdk-template (#13589)", "committedDate": "2020-07-29T03:06:55Z", "type": "commit"}]}