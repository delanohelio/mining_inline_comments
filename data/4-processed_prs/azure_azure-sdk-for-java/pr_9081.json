{"pr_number": 9081, "pr_title": "Update Reactor and Netty Dependencies", "pr_createdAt": "2020-03-13T22:07:20Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/9081", "timeline": [{"oid": "8e1a0423cc9bdcb8e2ca9560edc9e17c034bba11", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8e1a0423cc9bdcb8e2ca9560edc9e17c034bba11", "message": "Update Reactor and Netty dependencies", "committedDate": "2020-03-13T22:01:11Z", "type": "commit"}, {"oid": "8633a2a42250b51205bc140e30782e7a21bc1428", "url": "https://github.com/Azure/azure-sdk-for-java/commit/8633a2a42250b51205bc140e30782e7a21bc1428", "message": "Update Reactor Core version to match what is being used by Reactor Netty", "committedDate": "2020-03-13T22:05:56Z", "type": "commit"}, {"oid": "12a3c7af63dfc51bae68387bf22e7b9b548060f2", "url": "https://github.com/Azure/azure-sdk-for-java/commit/12a3c7af63dfc51bae68387bf22e7b9b548060f2", "message": "Update version to match Reactor Netty to Reactor Core, reverted accidental Cosmos change", "committedDate": "2020-03-13T22:06:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNzk0Nw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r392507947", "bodyText": "Should this use the Cosmos specific tag instead of the general one? Should we use this PR to get the general and Cosmos versions inline?\nThe only difference between the main versions and the Cosmos specific ones, of those being changed in this PR, is reactor-core 3.3.2 vs 3.3.3. I'm using 3.3.3 as that is the dependency version for reactor-netty 0.9.5.RELEASE which is also using the 4.1.45.FINAL Netty versions.", "author": "alzimmermsft", "createdAt": "2020-03-13T22:08:15Z", "path": "sdk/cosmos/azure-cosmos-benchmark/pom.xml", "diffHunk": "@@ -90,7 +90,7 @@ Licensed under the MIT License.\n     <dependency>\n       <groupId>io.netty</groupId>\n       <artifactId>netty-tcnative</artifactId>\n-      <version>2.0.26.Final</version> {x-version-update;io.netty:netty-tcnative;external_dependency}\n+      <version>2.0.27.Final</version> {x-version-update;io.netty:netty-tcnative;external_dependency}", "originalCommit": "12a3c7af63dfc51bae68387bf22e7b9b548060f2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUxMzczNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r392513736", "bodyText": "@alzimmermsft please update cosmos versions to reactor-core - 3.3.3\nin external_dependencies.txt file.\nFor now, keep using cosmos versions.", "author": "kushagraThapar", "createdAt": "2020-03-13T22:29:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNzk0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUxMzg2Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r392513866", "bodyText": "Looks like this dependency is commented out but in general, since cosmos is preparing for release, it's better to check with the Cosmos team if they are willing to update the dependency version close to the release. But after release, we should consolidate and use the same versions in Cosmos and other track 2 libraries.", "author": "srnagar", "createdAt": "2020-03-13T22:30:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNzk0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUxNTI2NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r392515265", "bodyText": "I agree with @srnagar  Yeah, let's use the same versions, but have diff sources - cosmos will take from cosmos dependency section..\nWe have an issue with netty-tcnative.. We are investigating it ..", "author": "kushagraThapar", "createdAt": "2020-03-13T22:36:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNzk0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUxNTMwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r392515309", "bodyText": "I'll update the version \ud83d\ude04", "author": "alzimmermsft", "createdAt": "2020-03-13T22:36:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNzk0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwODAxNA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r392508014", "bodyText": "Same question.", "author": "alzimmermsft", "createdAt": "2020-03-13T22:08:36Z", "path": "sdk/cosmos/azure-cosmos/pom.xml", "diffHunk": "@@ -244,7 +244,7 @@ Licensed under the MIT License.\n     <dependency>\n       <groupId>io.projectreactor.netty</groupId>\n       <artifactId>reactor-netty</artifactId>\n-      <version>0.9.4.RELEASE</version> <!-- {x-version-update;io.projectreactor.netty:reactor-netty;external_dependency} -->\n+      <version>0.9.5.RELEASE</version> <!-- {x-version-update;io.projectreactor.netty:reactor-netty;external_dependency} -->", "originalCommit": "12a3c7af63dfc51bae68387bf22e7b9b548060f2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUxMzc2Mw==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r392513763", "bodyText": "Same response.", "author": "kushagraThapar", "createdAt": "2020-03-13T22:29:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwODAxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUxMzkwOQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r392513909", "bodyText": "Same answer :)", "author": "srnagar", "createdAt": "2020-03-13T22:30:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwODAxNA=="}], "type": "inlineReview"}, {"oid": "b07d1ad3b2ffa4c7d766200d1599fd808dd34008", "url": "https://github.com/Azure/azure-sdk-for-java/commit/b07d1ad3b2ffa4c7d766200d1599fd808dd34008", "message": "Merge branch 'master' into AzNetty_UpgradeDependencies", "committedDate": "2020-03-13T22:40:45Z", "type": "commit"}, {"oid": "e0d7f2728a3491e1f9b20660987c504ee8d657f9", "url": "https://github.com/Azure/azure-sdk-for-java/commit/e0d7f2728a3491e1f9b20660987c504ee8d657f9", "message": "Upgrade the Cosmos Reactor Core version to 3.3.3.RELEASE", "committedDate": "2020-03-13T22:41:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4MTIwNg==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r393081206", "bodyText": "@alzimmermsft @kushagraThapar\nRight now, with these changes, every cosmos_io.* variable is now duplicated since the the common versions of these external dependencies has been brought forward. The cosmos* variables, that are duplicates, should no longer be here.", "author": "JimSuplizio", "createdAt": "2020-03-16T14:48:38Z", "path": "eng/versioning/external_dependencies.txt", "diffHunk": "@@ -180,7 +180,7 @@ cosmos_io.netty:netty-handler;4.1.45.Final\n cosmos_io.netty:netty-handler-proxy;4.1.45.Final\n cosmos_io.netty:netty-tcnative;2.0.27.Final\n cosmos_io.netty:netty-transport-native-epoll;4.1.45.Final\n-cosmos_io.projectreactor:reactor-core;3.3.2.RELEASE\n+cosmos_io.projectreactor:reactor-core;3.3.3.RELEASE", "originalCommit": "e0d7f2728a3491e1f9b20660987c504ee8d657f9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzIzNjI1MQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r393236251", "bodyText": "Cosmos is currently investigating an issue where they would like to continue using their own dependency set, maybe this could be unified once Cosmos releases their GA'd library.\n@kushagraThapar", "author": "alzimmermsft", "createdAt": "2020-03-16T18:39:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4MTIwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI3Mjk5Ng==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/9081#discussion_r393272996", "bodyText": "That's fine for the meantime and I'll approve the PR but please file an issue for Cosmos to remove the cosmos_* dependencies that are the same version as the common dependency versions before they GA.", "author": "JimSuplizio", "createdAt": "2020-03-16T19:49:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4MTIwNg=="}], "type": "inlineReview"}]}