{"pr_number": 2765, "pr_title": "Simplify the `http-form-data` sample and use Java 11 features.", "pr_createdAt": "2020-04-23T22:22:12Z", "pr_url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2765", "timeline": [{"oid": "59b43fb318589543ed2b0e18bcfe6e89c1168d2c", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/59b43fb318589543ed2b0e18bcfe6e89c1168d2c", "message": "Simplify the `http-form-data` sample and use Java 11 features.\n\n* Remove unused dependencies from `pom.xml`.\n* Remove `@MultipartConfig`, an attempted workaround for a bug in multipart handling that doesn't actually help.\n* Use conventional spelling for `logger` field. It is not a constant so it should not be spelled `LOGGER`.\n* Use `Map.forEach` to iterate over a map.\n* Use `List.of(...)` and `Map.of(...)` instead of constructing lists and maps with statements.\n* Remove unnecessary `throws IOException`.", "committedDate": "2020-04-23T22:14:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2OTQ5NA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2765#discussion_r414169494", "bodyText": "If this change doesn't break CI, can you file an issue about it and assign it to me? We should update the other samples to be consistent.", "author": "ace-n", "createdAt": "2020-04-23T22:36:39Z", "path": "functions/http/http-form-data/pom.xml", "diffHunk": "@@ -56,21 +56,11 @@\n   </profiles>\n \n   <dependencies>\n-    <dependency>\n-      <groupId>com.google.code.gson</groupId>\n-      <artifactId>gson</artifactId>\n-      <version>2.8.6</version>\n-    </dependency>\n-    <dependency>\n-      <groupId>javax.servlet</groupId>\n-      <artifactId>javax.servlet-api</artifactId>\n-      <version>4.0.1</version>\n-      <scope>provided</scope>\n-    </dependency>\n     <dependency>\n       <groupId>com.google.cloud.functions</groupId>\n       <artifactId>functions-framework-api</artifactId>\n       <version>1.0.1</version>\n+      <scope>provided</scope>", "originalCommit": "59b43fb318589543ed2b0e18bcfe6e89c1168d2c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE2OTg0OA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2765#discussion_r414169848", "bodyText": "Ditto - file an issue if it doesn't break tests?\n(Can be all in the same issue, or in different ones - as long as I know to come back and fix it. \ud83d\ude42)", "author": "ace-n", "createdAt": "2020-04-23T22:37:34Z", "path": "functions/http/http-form-data/pom.xml", "diffHunk": "@@ -148,31 +132,6 @@\n           <trimStackTrace>false</trimStackTrace>\n         </configuration>\n       </plugin>\n-      <plugin> <!-- Required for Java 8 (Alpha) functions in the inline editor -->", "originalCommit": "59b43fb318589543ed2b0e18bcfe6e89c1168d2c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MDA4MQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2765#discussion_r414170081", "bodyText": "Ditto - issue, provided @saturnism approves?", "author": "ace-n", "createdAt": "2020-04-23T22:38:03Z", "path": "functions/http/http-form-data/src/main/java/functions/HttpFormData.java", "diffHunk": "@@ -28,11 +28,9 @@\n import java.nio.file.Paths;\n import java.nio.file.StandardCopyOption;\n import java.util.logging.Logger;\n-import javax.servlet.annotation.MultipartConfig;\n \n-@MultipartConfig\n public class HttpFormData implements HttpFunction {\n-  private static final Logger LOGGER = Logger.getLogger(HttpFormData.class.getName());\n+  private static final Logger logger = Logger.getLogger(HttpFormData.class.getName());", "originalCommit": "59b43fb318589543ed2b0e18bcfe6e89c1168d2c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MTI1Mg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2765#discussion_r414171252", "bodyText": "Edit: saw @lesv's comment, marking as resolved. But an issue would still be useful. \ud83d\ude04", "author": "ace-n", "createdAt": "2020-04-23T22:40:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MDA4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MDY0OA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2765#discussion_r414170648", "bodyText": "@lesv @kurtisvg @saturnism is there a checkstyle config that checks for \"outdated\" syntax like this?", "author": "ace-n", "createdAt": "2020-04-23T22:39:28Z", "path": "functions/http/http-form-data/src/test/java/functions/HttpFormDataTest.java", "diffHunk": "@@ -113,10 +108,9 @@ public void functionsHttpFormData_shouldSaveFiles() throws IOException {\n   @Test\n   public void functionsHttpFormData_shouldProcessFields() throws IOException {\n     when(request.getMethod()).thenReturn(\"POST\");\n-    when(request.getParts()).thenReturn(new HashMap<>());\n+    when(request.getParts()).thenReturn(Map.of());", "originalCommit": "59b43fb318589543ed2b0e18bcfe6e89c1168d2c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIxODQ5NQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2765#discussion_r414218495", "bodyText": "Not as far as I know.", "author": "kurtisvg", "createdAt": "2020-04-24T00:49:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3MDY0OA=="}], "type": "inlineReview"}]}