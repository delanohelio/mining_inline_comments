{"pr_number": 3846, "pr_title": "Eventarc Quickstart Brushup", "pr_createdAt": "2020-09-28T05:32:26Z", "pr_url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846", "timeline": [{"oid": "2b43ced6c22682d00f22edd208eda9cc84e2e1a6", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/2b43ced6c22682d00f22edd208eda9cc84e2e1a6", "message": "feat: move run/events to eventarc/\n\nSigned-off-by: Grant Timmerman <timmerman+devrel@google.com>", "committedDate": "2020-09-28T05:23:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAxNzE5NA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496017194", "bodyText": "If this isn't explicitly for a quickstart tutorial like the audit logs please remove.", "author": "averikitsch", "createdAt": "2020-09-28T15:06:23Z", "path": "eventarc/pubsub/Dockerfile", "diffHunk": "@@ -0,0 +1,41 @@\n+# Copyright 2020 Google LLC", "originalCommit": "2b43ced6c22682d00f22edd208eda9cc84e2e1a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAyNDA4Mw==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496024083", "bodyText": "This is for the Eventarc Pub/Sub quickstart.", "author": "grant", "createdAt": "2020-09-28T15:12:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAxNzE5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAxODEwMg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496018102", "bodyText": "remove deploy column if not using.", "author": "averikitsch", "createdAt": "2020-09-28T15:07:10Z", "path": "eventarc/README.md", "diffHunk": "@@ -0,0 +1,105 @@\n+# Cloud Eventarc Java Samples\n+\n+[![Open in Cloud Shell][shell_img]][shell_link]\n+\n+[shell_img]: http://gstatic.com/cloudssh/images/open-btn.png\n+[shell_link]: https://console.cloud.google.com/cloudshell/open?git_repo=https://github.com/GoogleCloudPlatform/java-docs-samples&page=editor&open_in_editor=blog/README.md\n+\n+This directory contains samples for Cloud Eventarc.\n+\n+## Samples\n+\n+|           Sample                |        Description       |     Deploy    |", "originalCommit": "2b43ced6c22682d00f22edd208eda9cc84e2e1a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAyNzY2MQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496027661", "bodyText": "The deploy column should still have the 2 quickstarts/instructions there were before. I didn't change the code, just moved the samples.", "author": "grant", "createdAt": "2020-09-28T15:15:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAxODEwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEwMDMyNg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496100326", "bodyText": "Should still be there with the buttons.", "author": "grant", "createdAt": "2020-09-28T16:59:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAxODEwMg=="}], "type": "inlineReview"}, {"oid": "240e3ad92562107e76deef0145e4d3642c195d83", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/240e3ad92562107e76deef0145e4d3642c195d83", "message": "docs: change README dir to eventarc\n\nSigned-off-by: Grant Timmerman <timmerman+devrel@google.com>", "committedDate": "2020-09-28T15:14:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA3NDcwMQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496074701", "bodyText": "Do these names need to be updated?", "author": "averikitsch", "createdAt": "2020-09-28T16:18:53Z", "path": "eventarc/README.md", "diffHunk": "@@ -0,0 +1,105 @@\n+# Cloud Eventarc Java Samples\n+\n+[![Open in Cloud Shell][shell_img]][shell_link]\n+\n+[shell_img]: http://gstatic.com/cloudssh/images/open-btn.png\n+[shell_link]: https://console.cloud.google.com/cloudshell/open?git_repo=https://github.com/GoogleCloudPlatform/java-docs-samples&page=editor&open_in_editor=blog/README.md\n+\n+This directory contains samples for Cloud Eventarc.\n+\n+## Samples\n+\n+|           Sample                |        Description       |     Deploy    |\n+| ------------------------------- | ------------------------ | ------------- |\n+|[Events - Pub/Sub](events-pubsub/) | Events for Cloud Run with Pub/Sub | [<img src=\"https://storage.googleapis.com/cloudrun/button.svg\" alt=\"Run on Google Cloud\" height=\"30\">][run_button_events_pubsub] |\n+|[Anthos Events - Pub/Sub](events-pubsub/anthos.md) | Events for Cloud Run on Anthos with Pub/Sub | - |\n+|[Events - GCS](events-gcs/) | Events for Cloud Run with GCS | [<img src=\"https://storage.googleapis.com/cloudrun/button.svg\" alt=\"Run on Google Cloud\" height=\"30\">][run_button_events_gcs] |", "originalCommit": "240e3ad92562107e76deef0145e4d3642c195d83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA5OTAzMQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496099031", "bodyText": "Yup, fixed. Thanks.", "author": "grant", "createdAt": "2020-09-28T16:58:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA3NDcwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA3NTY2Mw==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496075663", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            COPY --from=builder /app/target/events-storage-*.jar /events-storage.jar\n          \n          \n            \n            \n          \n          \n            \n            # Run the web service on container startup.\n          \n          \n            \n            CMD [\"java\", \"-Djava.security.egd=file:/dev/./urandom\", \"-jar\", \"/events-storage.jar\"]\n          \n          \n            \n            COPY --from=builder /app/target/events-pubsub-*.jar /events-pubsub.jar\n          \n          \n            \n            \n          \n          \n            \n            # Run the web service on container startup.\n          \n          \n            \n            CMD [\"java\", \"-Djava.security.egd=file:/dev/./urandom\", \"-jar\", \"/events-pubsub.jar\"]", "author": "averikitsch", "createdAt": "2020-09-28T16:20:24Z", "path": "eventarc/pubsub/Dockerfile", "diffHunk": "@@ -0,0 +1,41 @@\n+# Copyright 2020 Google LLC\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     https://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# [START eventarc_pubsub_dockerfile]\n+\n+# Use the official maven/Java 8 image to create a build artifact.\n+# https://hub.docker.com/_/maven\n+FROM maven:3.6-jdk-11 as builder\n+\n+# Copy local code to the container image.\n+WORKDIR /app\n+COPY pom.xml .\n+COPY src ./src\n+\n+# Build a release artifact.\n+RUN mvn package -DskipTests\n+\n+# Use AdoptOpenJDK for base image.\n+# It's important to use OpenJDK 8u191 or above that has container support enabled.\n+# https://hub.docker.com/r/adoptopenjdk/openjdk8\n+# https://docs.docker.com/develop/develop-images/multistage-build/#use-multi-stage-builds\n+FROM adoptopenjdk/openjdk11:alpine-slim\n+\n+# Copy the jar to the production image from the builder stage.\n+COPY --from=builder /app/target/events-storage-*.jar /events-storage.jar\n+\n+# Run the web service on container startup.\n+CMD [\"java\", \"-Djava.security.egd=file:/dev/./urandom\", \"-jar\", \"/events-storage.jar\"]", "originalCommit": "240e3ad92562107e76deef0145e4d3642c195d83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA5OTE0MA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496099140", "bodyText": "Applied.", "author": "grant", "createdAt": "2020-09-28T16:58:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA3NTY2Mw=="}], "type": "inlineReview"}, {"oid": "05ace634f122b44f002aef05c5f0bac07bde9cc4", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/05ace634f122b44f002aef05c5f0bac07bde9cc4", "message": "docs: update docs and dockerfile names\n\nSigned-off-by: Grant Timmerman <timmerman+devrel@google.com>", "committedDate": "2020-09-28T16:58:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEyMjQ1OQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496122459", "bodyText": "Sorry missed a comment: for this change the pom.xml needs the name filed changed to audit-storage as well", "author": "averikitsch", "createdAt": "2020-09-28T17:37:42Z", "path": "eventarc/audit-storage/Dockerfile", "diffHunk": "@@ -33,9 +33,9 @@ RUN mvn package -DskipTests\n FROM adoptopenjdk/openjdk11:alpine-slim\n \n # Copy the jar to the production image from the builder stage.\n-COPY --from=builder /app/target/events-storage-*.jar /events-storage.jar\n+COPY --from=builder /app/target/audit-storage-*.jar /audit-storage.jar", "originalCommit": "05ace634f122b44f002aef05c5f0bac07bde9cc4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEyNjc3NQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3846#discussion_r496126775", "bodyText": "Thanks.", "author": "grant", "createdAt": "2020-09-28T17:45:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEyMjQ1OQ=="}], "type": "inlineReview"}, {"oid": "b00e7f95cda7ba9b00603d6e5a05029706b7dd62", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/b00e7f95cda7ba9b00603d6e5a05029706b7dd62", "message": "fix: update pom\n\nSigned-off-by: Grant Timmerman <timmerman+devrel@google.com>", "committedDate": "2020-09-28T17:44:57Z", "type": "commit"}, {"oid": "b00e7f95cda7ba9b00603d6e5a05029706b7dd62", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/b00e7f95cda7ba9b00603d6e5a05029706b7dd62", "message": "fix: update pom\n\nSigned-off-by: Grant Timmerman <timmerman+devrel@google.com>", "committedDate": "2020-09-28T17:44:57Z", "type": "forcePushed"}, {"oid": "54bfb8d5427f9ee9e329bdfc68625f7ea98661e1", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/54bfb8d5427f9ee9e329bdfc68625f7ea98661e1", "message": "Add repackaging step", "committedDate": "2020-09-29T17:09:54Z", "type": "commit"}]}