{"pr_number": 2870, "pr_title": "healthcare API: change how HL7v2MessageList processes results, fix er\u2026", "pr_createdAt": "2020-05-12T19:56:42Z", "pr_url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2870", "timeline": [{"oid": "c1388b9f4833f57068f19a8741ad2e8d0f3a8167", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/c1388b9f4833f57068f19a8741ad2e8d0f3a8167", "message": "healthcare API: change how HL7v2MessageList processes results, fix error in a path name in HL7v2MessageGet", "committedDate": "2020-05-12T19:26:13Z", "type": "commit"}, {"oid": "062f6092fc1a54121b3cf4adfb81bcb4c46c5edb", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/062f6092fc1a54121b3cf4adfb81bcb4c46c5edb", "message": "remove unused imports", "committedDate": "2020-05-12T19:53:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk5ODUxNw==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2870#discussion_r423998517", "bodyText": "You don't need the extra \\n when using println", "author": "lesv", "createdAt": "2020-05-12T20:01:04Z", "path": "healthcare/v1/src/main/java/snippets/healthcare/hl7v2/messages/HL7v2MessageList.java", "diffHunk": "@@ -63,21 +59,21 @@ public static void hl7v2MessageList(String hl7v2StoreName) throws IOException {\n               .setPageSize(100) // Specify pageSize up to 1000\n               .setPageToken(pageToken);\n \n+      ListMessagesResponse response;\n       // Execute response and collect results.\n-      ListMessagesResponse response = request.execute();\n-      Collection<Message> responseMessages = response.getHl7V2Messages();\n-      if (responseMessages != null) {\n-        messages.addAll(responseMessages);\n-      }\n-\n-      // Update the page token for the next request.\n-      pageToken = response.getNextPageToken();\n-    } while (pageToken != null);\n-\n-    // Print results.\n-    System.out.printf(\"Retrieved %s HL7v2 messages: \\n\", messages.size());\n-    for (Message data : messages) {\n-      System.out.println(\"\\t\" + data.getData());\n+      do {\n+        response = request.execute();\n+        if (response.getHl7V2Messages() == null) {\n+          continue;\n+        }\n+        System.out.printf(\"Retrieved %s HL7v2 messages: \\n\", response.getHl7V2Messages().size());\n+        for (Message message : response.getHl7V2Messages()) {\n+            System.out.println(\"\\t\" + message);\n+        }\n+        request.setPageToken(response.getNextPageToken());\n+       } while (response.getNextPageToken() != null);\n+    } catch (IOException e) {\n+      System.out.println(\"Unable to list HL7v2 messages: \\n\" + e.toString());", "originalCommit": "062f6092fc1a54121b3cf4adfb81bcb4c46c5edb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAwMTA1MA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2870#discussion_r424001050", "bodyText": "Done.", "author": "noerog", "createdAt": "2020-05-12T20:05:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk5ODUxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk5ODc2MA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2870#discussion_r423998760", "bodyText": "How did this ever work?", "author": "lesv", "createdAt": "2020-05-12T20:01:30Z", "path": "healthcare/v1/src/main/java/snippets/healthcare/hl7v2/messages/HL7v2MessageGet.java", "diffHunk": "@@ -32,7 +31,7 @@\n \n public class HL7v2MessageGet {\n   private static final String MESSAGE_NAME =\n-      \"projects/%s/locations/%s/datasets/%s/hl7V2Store/%s/messages/%s\";\n+      \"projects/%s/locations/%s/datasets/%s/hl7V2Stores/%s/messages/%s\";", "originalCommit": "062f6092fc1a54121b3cf4adfb81bcb4c46c5edb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAwMTA4Mg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/2870#discussion_r424001082", "bodyText": "Most of the fixes I've submitted in the past few days are due to the tests being correct and passing but some issue in the sample itself causing it to fail. We use a consistent \"projects/%s/locations/%s/datasets/%s/hl7V2Stores/%s/messages/%s\" string in tests so it always passes there.", "author": "noerog", "createdAt": "2020-05-12T20:05:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk5ODc2MA=="}], "type": "inlineReview"}, {"oid": "657133068988bb57ba32d49b57fece67506d534f", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/657133068988bb57ba32d49b57fece67506d534f", "message": "remove newline", "committedDate": "2020-05-12T20:05:20Z", "type": "commit"}, {"oid": "cd5f4481a4fecd4601ba1ba392774da2573bd3b5", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/cd5f4481a4fecd4601ba1ba392774da2573bd3b5", "message": "fix some paths for dataset and HL7v2 IAM methods", "committedDate": "2020-05-12T20:10:35Z", "type": "commit"}, {"oid": "8c0d63dbf4e6b3e72664ffca555d1ca0ec13e8be", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/8c0d63dbf4e6b3e72664ffca555d1ca0ec13e8be", "message": "fix lint", "committedDate": "2020-05-12T22:18:30Z", "type": "commit"}]}