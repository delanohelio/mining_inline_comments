{"pr_number": 3283, "pr_title": "samples: refactor dialogflow for 2.1.0", "pr_createdAt": "2020-06-30T18:47:30Z", "pr_url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3283", "timeline": [{"oid": "3fc9945d42bb2c75d3239b22be9deb7f8f22095c", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/3fc9945d42bb2c75d3239b22be9deb7f8f22095c", "message": "samples: refactor dialogflow for 2.1.0", "committedDate": "2020-06-30T18:45:07Z", "type": "commit"}, {"oid": "41266c6a3c0b38e1a5c4d4ccdc706a47152e8aa9", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/41266c6a3c0b38e1a5c4d4ccdc706a47152e8aa9", "message": "formatted code", "committedDate": "2020-06-30T18:51:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkxNzM5MA==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3283#discussion_r447917390", "bodyText": "Looking at the code in googleapis/java-dialogflow searching for throws and catch, I see lots of specific enhanced exceptions - our samples should reflect the richness of those.  For example, ApiException has 16 known subclasses that Gax throws.  gRPC also throws io.grpc.StatusException which has additional info to help developers understand the cause of their errors.  There is also io.grpc.StatusRuntimeException and io.grpc.ManagedChannelProvider.ProviderNotFoundException.", "author": "lesv", "createdAt": "2020-06-30T19:08:29Z", "path": "dialogflow/cloud-client/src/main/java/com/example/dialogflow/DetectIntentAudio.java", "diffHunk": "@@ -27,33 +27,19 @@\n import com.google.cloud.dialogflow.v2.SessionName;\n import com.google.cloud.dialogflow.v2.SessionsClient;\n import com.google.protobuf.ByteString;\n+\n+import java.io.IOException;\n import java.nio.file.Files;\n import java.nio.file.Paths;\n \n-\n-/**\n- * DialogFlow API Detect Intent sample with audio files.\n- */\n public class DetectIntentAudio {\n-  // [START dialogflow_detect_intent_audio]\n \n-  /**\n-   * Returns the result of detect intent with an audio file as input.\n-   *\n-   * Using the same `session_id` between requests allows continuation of the conversation.\n-   *\n-   * @param projectId     Project/Agent Id.\n-   * @param audioFilePath Path to the audio file.\n-   * @param sessionId     Identifier of the DetectIntent session.\n-   * @param languageCode  Language code of the query.\n-   * @return QueryResult for the request.\n-   */\n+  // DialogFlow API Detect Intent sample with audio files.\n   public static QueryResult detectIntentAudio(\n-      String projectId,\n-      String audioFilePath,\n-      String sessionId,\n-      String languageCode)\n-      throws Exception {\n+          String projectId,\n+          String audioFilePath,\n+          String sessionId,\n+          String languageCode) throws IOException {", "originalCommit": "41266c6a3c0b38e1a5c4d4ccdc706a47152e8aa9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkxOTU1OQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3283#discussion_r447919559", "bodyText": "I don't see any tags in this file - is that an issue?", "author": "lesv", "createdAt": "2020-06-30T19:12:20Z", "path": "dialogflow/cloud-client/src/main/java/com/example/dialogflow/IntentManagement.java", "diffHunk": "@@ -18,6 +18,7 @@\n \n // Imports the Google Cloud client library\n \n+import com.google.cloud.dialogflow.v2.AgentName;", "originalCommit": "41266c6a3c0b38e1a5c4d4ccdc706a47152e8aa9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk5MTI3Nw==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3283#discussion_r447991277", "bodyText": "There are multiple tags.\nI will need to create CL before I make changes to IntentManagement.java.\nI will create different PR which includes splitting IntentMgmt class into seperate files, updating to latest format and etc..", "author": "munkhuushmgl", "createdAt": "2020-06-30T21:31:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkxOTU1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkyMDAyOQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3283#discussion_r447920029", "bodyText": "Is this intentional?", "author": "lesv", "createdAt": "2020-06-30T19:13:14Z", "path": "dialogflow/cloud-client/src/test/java/com/example/dialogflow/DetectIntentKnowledgeTest.java", "diffHunk": "@@ -16,29 +16,30 @@\n \n package com.example.dialogflow;\n \n-import static com.google.common.truth.Truth.assertThat;\n-import static org.junit.Assert.assertEquals;\n-\n import com.google.cloud.dialogflow.v2beta1.DocumentName;\n import com.google.cloud.dialogflow.v2beta1.KnowledgeAnswers;\n import com.google.cloud.dialogflow.v2beta1.KnowledgeAnswers.Answer;\n import com.google.cloud.dialogflow.v2beta1.KnowledgeBaseName;\n import com.google.common.collect.ImmutableList;\n-import java.io.ByteArrayOutputStream;\n-import java.io.PrintStream;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.UUID;\n import org.junit.After;\n import org.junit.Before;\n import org.junit.Test;\n import org.junit.runner.RunWith;\n import org.junit.runners.JUnit4;\n \n+import java.io.ByteArrayOutputStream;\n+import java.io.PrintStream;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.UUID;\n+\n+import static com.google.common.truth.Truth.assertThat;\n+import static org.junit.Assert.assertEquals;\n+\n \n @RunWith(JUnit4.class)\n @SuppressWarnings(\"checkstyle:abbreviationaswordinname\")\n-public class DetectIntentKnowledgeTest {\n+public class qDetectIntentKnowledgeTest {", "originalCommit": "41266c6a3c0b38e1a5c4d4ccdc706a47152e8aa9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzk4OTg1Ng==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3283#discussion_r447989856", "bodyText": "Nope", "author": "munkhuushmgl", "createdAt": "2020-06-30T21:28:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzkyMDAyOQ=="}], "type": "inlineReview"}, {"oid": "ef23b54aa7906738182aef2021c445dc34c75b2f", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/ef23b54aa7906738182aef2021c445dc34c75b2f", "message": "made requested changes", "committedDate": "2020-06-30T21:46:31Z", "type": "commit"}, {"oid": "10e0c1aaba159d18fc4230657f81014e6ae16470", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/10e0c1aaba159d18fc4230657f81014e6ae16470", "message": "fixed compilation error", "committedDate": "2020-06-30T21:52:37Z", "type": "commit"}, {"oid": "cbf9566de661bbf5a51ebe375da222acb77463f1", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/cbf9566de661bbf5a51ebe375da222acb77463f1", "message": "fixed lint on tests", "committedDate": "2020-06-30T22:02:27Z", "type": "commit"}, {"oid": "ebe712f2c8c8ffdb088650550946a6166944183c", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/ebe712f2c8c8ffdb088650550946a6166944183c", "message": "lint issue", "committedDate": "2020-06-30T22:07:34Z", "type": "commit"}]}