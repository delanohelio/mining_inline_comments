{"pr_number": 3020, "pr_title": " Create Java code sample for omit email address", "pr_createdAt": "2020-06-02T18:12:06Z", "pr_url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3020", "timeline": [{"oid": "f8d46f3724a4d0b9ead689101dfa9321b763830f", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/f8d46f3724a4d0b9ead689101dfa9321b763830f", "message": "Add sample for inspect string with omit email address", "committedDate": "2020-06-02T17:55:11Z", "type": "commit"}, {"oid": "452c1df2576d5a6ed0adbafab1e8722d9bbc85a5", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/452c1df2576d5a6ed0adbafab1e8722d9bbc85a5", "message": "Add test for inspectStringWithExclusionDict", "committedDate": "2020-06-02T17:55:11Z", "type": "commit"}, {"oid": "093963aec2904b7331d711baf35bca92ed1ab614", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/093963aec2904b7331d711baf35bca92ed1ab614", "message": "add copyright header", "committedDate": "2020-06-02T18:10:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA5NjMxNg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3020#discussion_r434096316", "bodyText": "For new files, use current year, 2020", "author": "gguuss", "createdAt": "2020-06-02T18:35:37Z", "path": "dlp/src/main/java/dlp/snippets/InspectStringWithExclusionDict.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Google LLC", "originalCommit": "093963aec2904b7331d711baf35bca92ed1ab614", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDEwOTUwMw==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3020#discussion_r434109503", "bodyText": "Fixed", "author": "sushicw", "createdAt": "2020-06-02T18:59:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA5NjMxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA5NjY2Mg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3020#discussion_r434096662", "bodyText": "Probably should remove before committing this", "author": "gguuss", "createdAt": "2020-06-02T18:36:09Z", "path": "dlp/src/main/java/dlp/snippets/InspectStringWithExclusionDict.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package dlp.snippets;\n+\n+// [START dlp_inspect_string_with_exclusion_dict]\n+\n+import com.google.cloud.dlp.v2.DlpServiceClient;\n+import com.google.privacy.dlp.v2.ByteContentItem;\n+import com.google.privacy.dlp.v2.ByteContentItem.BytesType;\n+import com.google.privacy.dlp.v2.ContentItem;\n+import com.google.privacy.dlp.v2.CustomInfoType.Dictionary;\n+import com.google.privacy.dlp.v2.CustomInfoType.Dictionary.WordList;\n+import com.google.privacy.dlp.v2.ExclusionRule;\n+import com.google.privacy.dlp.v2.Finding;\n+import com.google.privacy.dlp.v2.InfoType;\n+import com.google.privacy.dlp.v2.InspectConfig;\n+import com.google.privacy.dlp.v2.InspectContentRequest;\n+import com.google.privacy.dlp.v2.InspectContentResponse;\n+import com.google.privacy.dlp.v2.InspectionRule;\n+import com.google.privacy.dlp.v2.InspectionRuleSet;\n+import com.google.privacy.dlp.v2.MatchingType;\n+import com.google.privacy.dlp.v2.ProjectName;\n+import com.google.protobuf.ByteString;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class InspectStringWithExclusionDict {\n+\n+  // TODO: Delete me, only for testing", "originalCommit": "093963aec2904b7331d711baf35bca92ed1ab614", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDEwOTg2NQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3020#discussion_r434109865", "bodyText": "Fixed", "author": "sushicw", "createdAt": "2020-06-02T19:00:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA5NjY2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA5NzMzNQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3020#discussion_r434097335", "bodyText": "I'd replace line 76 with just the reference to the info types", "author": "gguuss", "createdAt": "2020-06-02T18:37:25Z", "path": "dlp/src/main/java/dlp/snippets/InspectStringWithExclusionDict.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package dlp.snippets;\n+\n+// [START dlp_inspect_string_with_exclusion_dict]\n+\n+import com.google.cloud.dlp.v2.DlpServiceClient;\n+import com.google.privacy.dlp.v2.ByteContentItem;\n+import com.google.privacy.dlp.v2.ByteContentItem.BytesType;\n+import com.google.privacy.dlp.v2.ContentItem;\n+import com.google.privacy.dlp.v2.CustomInfoType.Dictionary;\n+import com.google.privacy.dlp.v2.CustomInfoType.Dictionary.WordList;\n+import com.google.privacy.dlp.v2.ExclusionRule;\n+import com.google.privacy.dlp.v2.Finding;\n+import com.google.privacy.dlp.v2.InfoType;\n+import com.google.privacy.dlp.v2.InspectConfig;\n+import com.google.privacy.dlp.v2.InspectContentRequest;\n+import com.google.privacy.dlp.v2.InspectContentResponse;\n+import com.google.privacy.dlp.v2.InspectionRule;\n+import com.google.privacy.dlp.v2.InspectionRuleSet;\n+import com.google.privacy.dlp.v2.MatchingType;\n+import com.google.privacy.dlp.v2.ProjectName;\n+import com.google.protobuf.ByteString;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class InspectStringWithExclusionDict {\n+\n+  // TODO: Delete me, only for testing\n+  public static void main(String[] args) {\n+    String projectId = \"crwilson-dlp-experimental\";\n+    inspectStringWithExclusionDict(projectId, args[0], Arrays.asList(args[1]));\n+  }\n+\n+  public static void inspectStringWithExclusionDict() {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"your-project-id\";\n+    String textToInspect = \"Some email addresses: gary@example.com, example@example.com\";\n+    List<String> excludedMatchList = Arrays.asList(\"example@example.com\");\n+    inspectStringWithExclusionDict(projectId, textToInspect, excludedMatchList);\n+  }\n+\n+  // Inspects the provided text, avoiding matches specified in the exclusion list.\n+  public static void inspectStringWithExclusionDict(String projectId, String textToInspect,\n+      List<String> excludedMatchList) {\n+    // Initialize client that will be used to send requests. This client only needs to be created\n+    // once, and can be reused for multiple requests. After completing all of your requests, call\n+    // the \"close\" method on the client to safely clean up any remaining background resources.\n+    try (DlpServiceClient dlp = DlpServiceClient.create()) {\n+      // Specify the project used for request.\n+      ProjectName project = ProjectName.of(projectId);\n+\n+      // Specify the type and content to be inspected.\n+      ByteContentItem byteItem =\n+          ByteContentItem.newBuilder()\n+              .setType(BytesType.TEXT_UTF8)\n+              .setData(ByteString.copyFromUtf8(textToInspect))\n+              .build();\n+      ContentItem item = ContentItem.newBuilder().setByteItem(byteItem).build();\n+\n+      // Specify the type of info the inspection will look for.\n+      List<InfoType> infoTypes = new ArrayList<>();\n+      // See https://cloud.google.com/dlp/docs/infotypes-reference for complete list of info types.", "originalCommit": "093963aec2904b7331d711baf35bca92ed1ab614", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDExNTA3Mg==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3020#discussion_r434115072", "bodyText": "As clarified offline, moved the comment slightly.", "author": "sushicw", "createdAt": "2020-06-02T19:09:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA5NzMzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA5ODQ5OQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3020#discussion_r434098499", "bodyText": "Drop the repetition of the type, more effective to comment what the code is doing:\n// Exclude matches from the specified excludedMatchList.", "author": "gguuss", "createdAt": "2020-06-02T18:39:36Z", "path": "dlp/src/main/java/dlp/snippets/InspectStringWithExclusionDict.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package dlp.snippets;\n+\n+// [START dlp_inspect_string_with_exclusion_dict]\n+\n+import com.google.cloud.dlp.v2.DlpServiceClient;\n+import com.google.privacy.dlp.v2.ByteContentItem;\n+import com.google.privacy.dlp.v2.ByteContentItem.BytesType;\n+import com.google.privacy.dlp.v2.ContentItem;\n+import com.google.privacy.dlp.v2.CustomInfoType.Dictionary;\n+import com.google.privacy.dlp.v2.CustomInfoType.Dictionary.WordList;\n+import com.google.privacy.dlp.v2.ExclusionRule;\n+import com.google.privacy.dlp.v2.Finding;\n+import com.google.privacy.dlp.v2.InfoType;\n+import com.google.privacy.dlp.v2.InspectConfig;\n+import com.google.privacy.dlp.v2.InspectContentRequest;\n+import com.google.privacy.dlp.v2.InspectContentResponse;\n+import com.google.privacy.dlp.v2.InspectionRule;\n+import com.google.privacy.dlp.v2.InspectionRuleSet;\n+import com.google.privacy.dlp.v2.MatchingType;\n+import com.google.privacy.dlp.v2.ProjectName;\n+import com.google.protobuf.ByteString;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class InspectStringWithExclusionDict {\n+\n+  // TODO: Delete me, only for testing\n+  public static void main(String[] args) {\n+    String projectId = \"crwilson-dlp-experimental\";\n+    inspectStringWithExclusionDict(projectId, args[0], Arrays.asList(args[1]));\n+  }\n+\n+  public static void inspectStringWithExclusionDict() {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"your-project-id\";\n+    String textToInspect = \"Some email addresses: gary@example.com, example@example.com\";\n+    List<String> excludedMatchList = Arrays.asList(\"example@example.com\");\n+    inspectStringWithExclusionDict(projectId, textToInspect, excludedMatchList);\n+  }\n+\n+  // Inspects the provided text, avoiding matches specified in the exclusion list.\n+  public static void inspectStringWithExclusionDict(String projectId, String textToInspect,\n+      List<String> excludedMatchList) {\n+    // Initialize client that will be used to send requests. This client only needs to be created\n+    // once, and can be reused for multiple requests. After completing all of your requests, call\n+    // the \"close\" method on the client to safely clean up any remaining background resources.\n+    try (DlpServiceClient dlp = DlpServiceClient.create()) {\n+      // Specify the project used for request.\n+      ProjectName project = ProjectName.of(projectId);\n+\n+      // Specify the type and content to be inspected.\n+      ByteContentItem byteItem =\n+          ByteContentItem.newBuilder()\n+              .setType(BytesType.TEXT_UTF8)\n+              .setData(ByteString.copyFromUtf8(textToInspect))\n+              .build();\n+      ContentItem item = ContentItem.newBuilder().setByteItem(byteItem).build();\n+\n+      // Specify the type of info the inspection will look for.\n+      List<InfoType> infoTypes = new ArrayList<>();\n+      // See https://cloud.google.com/dlp/docs/infotypes-reference for complete list of info types.\n+      for (String typeName : new String[]{\"PHONE_NUMBER\", \"EMAIL_ADDRESS\", \"CREDIT_CARD_NUMBER\"}) {\n+        infoTypes.add(InfoType.newBuilder().setName(typeName).build());\n+      }\n+\n+      // Construct an exclusion rule that will exclude matches from the specified excludedMatchList.", "originalCommit": "093963aec2904b7331d711baf35bca92ed1ab614", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDExMzI1MQ==", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/pull/3020#discussion_r434113251", "bodyText": "Done", "author": "sushicw", "createdAt": "2020-06-02T19:06:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA5ODQ5OQ=="}], "type": "inlineReview"}, {"oid": "d66a0fd7e5e7a1d88c8a76c941037ddeaab117e6", "url": "https://github.com/GoogleCloudPlatform/java-docs-samples/commit/d66a0fd7e5e7a1d88c8a76c941037ddeaab117e6", "message": "PR fixes", "committedDate": "2020-06-02T19:13:34Z", "type": "commit"}]}