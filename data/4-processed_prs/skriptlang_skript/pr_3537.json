{"pr_number": 3537, "pr_title": "Add character at to ExprSubstring", "pr_createdAt": "2020-11-11T13:49:16Z", "pr_url": "https://github.com/SkriptLang/Skript/pull/3537", "timeline": [{"oid": "306f8b1538940cad9d4458ed8ceeb888ae407aa1", "url": "https://github.com/SkriptLang/Skript/commit/306f8b1538940cad9d4458ed8ceeb888ae407aa1", "message": "Merge branch 'master-up' into dev-2.6", "committedDate": "2020-09-29T22:33:49Z", "type": "commit"}, {"oid": "813b67874c685beb38611651240ef1cead61ef0b", "url": "https://github.com/SkriptLang/Skript/commit/813b67874c685beb38611651240ef1cead61ef0b", "message": "plugin.yml - update line endings\n- This was missed in the major update, and is causing issues for some", "committedDate": "2020-10-04T21:41:11Z", "type": "commit"}, {"oid": "dc46838295e627c13dca1bfd8699ce4141fd4f2e", "url": "https://github.com/SkriptLang/Skript/commit/dc46838295e627c13dca1bfd8699ce4141fd4f2e", "message": "Merge branch 'master-upstream' into dev-2.6", "committedDate": "2020-10-04T22:30:37Z", "type": "commit"}, {"oid": "4c46bf25200517d27afbf0ddf9055d751f0fcb90", "url": "https://github.com/SkriptLang/Skript/commit/4c46bf25200517d27afbf0ddf9055d751f0fcb90", "message": "Line ending changes for example scripts and default config", "committedDate": "2020-10-05T07:46:47Z", "type": "commit"}, {"oid": "354ab2767632d419b4a6e7b00d443a0f4d3f5e49", "url": "https://github.com/SkriptLang/Skript/commit/354ab2767632d419b4a6e7b00d443a0f4d3f5e49", "message": "Update line endings\n- This will hopefully be the last of the line ending issues some people are having", "committedDate": "2020-11-07T10:08:53Z", "type": "commit"}, {"oid": "b9876a46f334bc878907815a1d9a22a4f45f591b", "url": "https://github.com/SkriptLang/Skript/commit/b9876a46f334bc878907815a1d9a22a4f45f591b", "message": "Add character at to ExprSubstring", "committedDate": "2020-11-11T13:36:35Z", "type": "commit"}, {"oid": "289348992cd895b8f05961d35781f939f223c0df", "url": "https://github.com/SkriptLang/Skript/commit/289348992cd895b8f05961d35781f939f223c0df", "message": "README.md - change supported Skript version to 1.9+ to prevent having to change it every update", "committedDate": "2020-11-15T02:17:17Z", "type": "commit"}, {"oid": "5b530fce91c1535137eebfe01197d03788d12258", "url": "https://github.com/SkriptLang/Skript/commit/5b530fce91c1535137eebfe01197d03788d12258", "message": "Add multiple entries support", "committedDate": "2020-11-15T14:13:55Z", "type": "commit"}, {"oid": "68488b5e9f67f2fce3a50c0e1911c53b5fe59b34", "url": "https://github.com/SkriptLang/Skript/commit/68488b5e9f67f2fce3a50c0e1911c53b5fe59b34", "message": "multiple entries", "committedDate": "2020-11-15T14:16:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzg1MzI5MQ==", "url": "https://github.com/SkriptLang/Skript/pull/3537#discussion_r523853291", "bodyText": "instead of storing the pattern int, can you store a boolean like boolean usedCharAtPattern = matchedPattern == 0;? after that, just change all your pattern equality checks to use the boolean instead and then this PR is golden <3", "author": "Pikachu920", "createdAt": "2020-11-16T01:36:12Z", "path": "src/main/java/ch/njol/skript/expressions/ExprSubstring.java", "diffHunk": "@@ -37,72 +40,92 @@\n  * @author Peter G\u00fcttinger\n  */\n @Name(\"Subtext\")\n-@Description(\"Extracts part of a text. You can either get the first &lt;x&gt; characters, the last &lt;x&gt; characters, or the characters between indices &lt;x&gt; and &lt;y&gt;.\"\n+@Description(\"Extracts part of a text. You can either get the first &lt;x&gt; characters, the last &lt;x&gt; characters, the characters at certain indexes &lt;x&gt;, or the characters between indices &lt;x&gt; and &lt;y&gt;.\"\n \t\t+ \" The indices &lt;x&gt; and &lt;y&gt; should be between 1 and the <a href='#ExprLength'>length</a> of the text (other values will be fit into this range).\")\n-@Examples({\"set {_s} to the first 5 characters of the text argument\"\n-\t\t, \"message \\\"%subtext of {_s} from characters 2 to (the length of {_s} - 1)%\\\" # removes the first and last character from {_s} and sends it to the player or console\"})\n-@Since(\"2.1\")\n+@Examples({\"set {_s} to the first 5 characters of the text argument\",\n+\t\t\"message \\\"%subtext of {_s} from characters 2 to (the length of {_s} - 1)%\\\" # removes the first and last character from {_s} and sends it to the player or console\",\n+\t\t\"set {_characters::*} to characters at 1, 2 and 7 in player's display name\",\n+\t\t\"send the last character of all players' names\"})\n+@Since(\"2.1, INSERT VERSION (character at, multiple strings support)\")\n public class ExprSubstring extends SimpleExpression<String> {\n \tstatic {\n \t\tSkript.registerExpression(ExprSubstring.class, String.class, ExpressionType.COMBINED,\n \t\t\t\t\"[the] (part|sub[ ](text|string)) of %strings% (between|from) (ind(ex|ices)|character[s]|) %number% (and|to) (index|character|) %number%\",\n-\t\t\t\t\"[the] (1\u00a6first|2\u00a6last) [%-number%] character[s] of %strings%\", \"[the] %number% (1\u00a6first|2\u00a6last) characters of %strings%\");\n+\t\t\t\t\"[the] (1\u00a6first|2\u00a6last) [%-number%] character[s] of %strings%\", \"[the] %number% (1\u00a6first|2\u00a6last) characters of %strings%\",\n+\t\t\t\t\"[the] character[s] at [(index|position|indexes|indices|positions)] %numbers% (in|of) %strings%\");\n \t}\n \t\n \t@SuppressWarnings(\"null\")\n \tprivate Expression<String> string;\n \t@Nullable\n \tprivate Expression<Number> start, end;\n+\tprivate int pattern;\n \t\n \t@SuppressWarnings({\"unchecked\", \"null\"})\n \t@Override\n \tpublic boolean init(final Expression<?>[] exprs, final int matchedPattern, final Kleenean isDelayed, final ParseResult parseResult) {\n-\t\tstring = (Expression<String>) exprs[parseResult.mark == 0 ? 0 : 1];\n-\t\tstart = parseResult.mark == 1 ? null : exprs[parseResult.mark == 0 ? 1 : 0] == null ? new SimpleLiteral<>(1, false) : (Expression<Number>) exprs[parseResult.mark == 0 ? 1 : 0];\n-\t\tend = parseResult.mark == 2 ? null : exprs[parseResult.mark == 0 ? 2 : 0] == null ? new SimpleLiteral<>(1, false) : (Expression<Number>) exprs[parseResult.mark == 0 ? 2 : 0];\n+\t\tpattern = matchedPattern;", "originalCommit": "e9d5903ad35bb583191e44ba4ba6702ab60c511c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDA2MjE4Mw==", "url": "https://github.com/SkriptLang/Skript/pull/3537#discussion_r524062183", "bodyText": "Done \ud83d\udc4d", "author": "Mr-Darth", "createdAt": "2020-11-16T10:04:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzg1MzI5MQ=="}], "type": "inlineReview"}, {"oid": "fccb04fd3301c76dfaa99f97248bb73d9d89c045", "url": "https://github.com/SkriptLang/Skript/commit/fccb04fd3301c76dfaa99f97248bb73d9d89c045", "message": "change check", "committedDate": "2020-11-16T09:56:13Z", "type": "commit"}, {"oid": "d246107d182ef1566016238c6c8d4bd199c6af00", "url": "https://github.com/SkriptLang/Skript/commit/d246107d182ef1566016238c6c8d4bd199c6af00", "message": "Merge branch 'dev-2.6' into master", "committedDate": "2020-11-16T11:40:40Z", "type": "commit"}, {"oid": "5c640797a52101dd309693bb9445e5f768faba16", "url": "https://github.com/SkriptLang/Skript/commit/5c640797a52101dd309693bb9445e5f768faba16", "message": "Merge branch 'master' into feature/char-at", "committedDate": "2020-11-17T06:44:30Z", "type": "commit"}, {"oid": "f24c23f3b5446e14d7c2d799ee510a9f5bcb9502", "url": "https://github.com/SkriptLang/Skript/commit/f24c23f3b5446e14d7c2d799ee510a9f5bcb9502", "message": "Merge branch 'dev-2.5' into feature/char-at", "committedDate": "2020-11-17T06:52:17Z", "type": "commit"}, {"oid": "a584e5393ba4662f2065b0919f2af98725738a34", "url": "https://github.com/SkriptLang/Skript/commit/a584e5393ba4662f2065b0919f2af98725738a34", "message": "removed an empty line in readme", "committedDate": "2020-11-17T06:52:56Z", "type": "commit"}]}