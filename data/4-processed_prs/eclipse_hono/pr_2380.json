{"pr_number": 2380, "pr_title": "[#2239] Pull up methods and refactor for a generic search operation in MongoDB registry", "pr_createdAt": "2020-12-22T19:43:04Z", "pr_url": "https://github.com/eclipse/hono/pull/2380", "timeline": [{"oid": "2265ee2f2a4508ce8caf22f398f1ef580960a5a4", "url": "https://github.com/eclipse/hono/commit/2265ee2f2a4508ce8caf22f398f1ef580960a5a4", "message": "[#2239] Pull up and refactor methods for a generic search operation in the MongoDB based device registry\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>", "committedDate": "2020-12-22T19:41:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzgxMDEwMw==", "url": "https://github.com/eclipse/hono/pull/2380#discussion_r547810103", "bodyText": "it would be helpful to know what type of exception to expect in a failed future", "author": "sophokles73", "createdAt": "2020-12-23T08:38:48Z", "path": "services/device-registry-mongodb/src/main/java/org/eclipse/hono/deviceregistry/mongodb/utils/MongoDbDeviceRegistryUtils.java", "diffHunk": "@@ -180,4 +191,117 @@ public static boolean isDuplicateKeyError(final Throwable error) {\n         }\n         return false;\n     }\n+\n+    /**\n+     * Finds resources such as tenant or device from the given MongoDB collection with the provided \n+     * paging, filtering and sorting options.\n+     * <p>\n+     * A MongoDB aggregation pipeline is used to find the resources from the given MongoDB collection.\n+     *\n+     * @param mongoClient The client for accessing the Mongo DB instance.\n+     * @param collectionName The name of the collection.\n+     * @param pageSize The maximum number of results to include in a response.\n+     * @param pageOffset The offset into the result set from which to include objects in the response.\n+     *                   This allows to retrieve the whole result set page by page.\n+     * @param filterDocument The document used for filtering the resources in a MongoDB aggregation pipeline.\n+     * @param sortDocument The document used for sorting the resources in a MongoDB aggregation pipeline.\n+     * @param resultMapper The mapper used for mapping the result for the search operation.\n+     * @param <T> The type of the result namely {@link org.eclipse.hono.service.management.device.DeviceWithId} or \n+     *           {@link org.eclipse.hono.service.management.tenant.TenantWithId}\n+     * @return A future indicating the outcome of the operation. The future will succeed if the search operation \n+     *         is successful and some resources are found. Otherwise the future will fail with the error reason.", "originalCommit": "2265ee2f2a4508ce8caf22f398f1ef580960a5a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzgyMjM5OQ==", "url": "https://github.com/eclipse/hono/pull/2380#discussion_r547822399", "bodyText": "Sure. I have updated it and pushed a new commit for that.", "author": "kaniyan", "createdAt": "2020-12-23T08:53:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzgxMDEwMw=="}], "type": "inlineReview"}, {"oid": "713a0623ee87b50d0c513c25b80bf2653637c804", "url": "https://github.com/eclipse/hono/commit/713a0623ee87b50d0c513c25b80bf2653637c804", "message": "Implement review comments\n\nSigned-off-by: Kartheeswaran Kalidass <kartheeswaran.kalidass@bosch.io>", "committedDate": "2020-12-23T08:50:41Z", "type": "commit"}]}