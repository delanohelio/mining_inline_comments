{"pr_number": 2108, "pr_title": "[#1395] Implement trace sampling mode option in CoAP adapter", "pr_createdAt": "2020-08-12T08:59:04Z", "pr_url": "https://github.com/eclipse/hono/pull/2108", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTExNzg2MA==", "url": "https://github.com/eclipse/hono/pull/2108#discussion_r469117860", "bodyText": "nice catch \ud83d\udc4d", "author": "sophokles73", "createdAt": "2020-08-12T09:10:07Z", "path": "adapters/coap-vertx-base/src/main/java/org/eclipse/hono/adapter/coap/AbstractVertxBasedCoapAdapter.java", "diffHunk": "@@ -1085,18 +1102,14 @@ private TtdStatus getTtdStatus(final CoapContext context) {\n      * Uploads a command response message to Hono.\n      *\n      * @param context The context representing the request to be processed.\n-     * @param device The device that has executed the command.\n-     * @param authenticatedDevice The authenticated device or {@code null}.\n      * @return A succeeded future containing the CoAP status code that has been returned to the device.\n-     * @throws NullPointerException if context or device are {@code null}.\n+     * @throws NullPointerException if context is {@code null}.\n      */\n-    public final Future<ResponseCode> uploadCommandResponseMessage(\n-            final CoapContext context,\n-            final Device device,\n-            final Device authenticatedDevice) {\n-\n+    public final Future<ResponseCode> uploadCommandResponseMessage(final CoapContext context) {", "originalCommit": "0553a4cbe19f3f52c64ed546f782c4415b8bf967", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTExOTg2MA==", "url": "https://github.com/eclipse/hono/pull/2108#discussion_r469119860", "bodyText": "isn't this useful for all other adapters as well, i.e. doesn't it make sense to pull it up into MapBasedTelemetryExecutionContext?", "author": "sophokles73", "createdAt": "2020-08-12T09:13:35Z", "path": "adapters/coap-vertx-base/src/main/java/org/eclipse/hono/adapter/coap/CoapContext.java", "diffHunk": "@@ -45,14 +45,20 @@\n \n     private final CoapExchange exchange;\n     private final Device originDevice;\n+    private final String authId;", "originalCommit": "0553a4cbe19f3f52c64ed546f782c4415b8bf967", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI2ODE4Nw==", "url": "https://github.com/eclipse/hono/pull/2108#discussion_r469268187", "bodyText": "Currently that doesn't look useful. But it might be when doing the refactorings concerning the *TenantObjectWithIdProvider classes.", "author": "calohmn", "createdAt": "2020-08-12T13:41:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTExOTg2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTcyNzU4Mg==", "url": "https://github.com/eclipse/hono/pull/2108#discussion_r469727582", "bodyText": "final ?", "author": "sophokles73", "createdAt": "2020-08-13T06:35:41Z", "path": "adapters/coap-vertx-base/src/main/java/org/eclipse/hono/adapter/coap/RequestDeviceAndAuth.java", "diffHunk": "@@ -53,6 +59,17 @@ public Device getOriginDevice() {\n         return originDevice;\n     }\n \n+    /**\n+     * Gets the authentication identifier of the request.\n+     * <p>\n+     * Will be {@code null} for an unauthenticated request.\n+     *\n+     * @return The authentication identifier or {@code null}.\n+     */\n+    public String getAuthId() {", "originalCommit": "0553a4cbe19f3f52c64ed546f782c4415b8bf967", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTczMDg0Nw==", "url": "https://github.com/eclipse/hono/pull/2108#discussion_r469730847", "bodyText": "I guess it would be good to define constants for these keys as they are used across different classes", "author": "sophokles73", "createdAt": "2020-08-13T06:44:04Z", "path": "adapters/coap-vertx-base/src/main/java/org/eclipse/hono/adapter/coap/DefaultDeviceResolver.java", "diffHunk": "@@ -146,6 +153,7 @@ public AdditionalInfo getInfo(final Principal clientIdentity, final Object custo\n                 final String deviceId = (String) customArgument;\n                 final PreSharedKeyDeviceIdentity deviceIdentity = getHandshakeIdentity(clientIdentity.getName(), null);\n                 result.put(\"hono-device\", new Device(deviceIdentity.getTenantId(), deviceId));\n+                result.put(\"hono-auth-id\", deviceIdentity.getAuthId());", "originalCommit": "0553a4cbe19f3f52c64ed546f782c4415b8bf967", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1ed828fab0bcf651cda5790ea5ba12d0649a8824", "url": "https://github.com/eclipse/hono/commit/1ed828fab0bcf651cda5790ea5ba12d0649a8824", "message": "[#1395] Implement trace sampling mode option in CoAP adapter.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>", "committedDate": "2020-08-13T07:54:21Z", "type": "commit"}, {"oid": "1ed828fab0bcf651cda5790ea5ba12d0649a8824", "url": "https://github.com/eclipse/hono/commit/1ed828fab0bcf651cda5790ea5ba12d0649a8824", "message": "[#1395] Implement trace sampling mode option in CoAP adapter.\n\nSigned-off-by: Carsten Lohmann <carsten.lohmann@bosch.io>", "committedDate": "2020-08-13T07:54:21Z", "type": "forcePushed"}]}