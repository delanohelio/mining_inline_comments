{"pr_number": 2048, "pr_title": "[#1367] Add examples for registry management endpoints", "pr_createdAt": "2020-06-23T12:52:16Z", "pr_url": "https://github.com/eclipse/hono/pull/2048", "timeline": [{"oid": "7e245ebb8453c3b43c353bea8246cc3e5a76f77e", "url": "https://github.com/eclipse/hono/commit/7e245ebb8453c3b43c353bea8246cc3e5a76f77e", "message": "[#1367] Add examples for registry management endpoints\n\nAdded example request/response body content for the management endpoint\nURI paths.\nAlso replaced the examples in the file based registry user guide with a\nreference to the Registry Management API in order to reduce redundancy.\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>", "committedDate": "2020-06-24T12:12:21Z", "type": "commit"}, {"oid": "7e245ebb8453c3b43c353bea8246cc3e5a76f77e", "url": "https://github.com/eclipse/hono/commit/7e245ebb8453c3b43c353bea8246cc3e5a76f77e", "message": "[#1367] Add examples for registry management endpoints\n\nAdded example request/response body content for the management endpoint\nURI paths.\nAlso replaced the examples in the file based registry user guide with a\nreference to the Registry Management API in order to reduce redundancy.\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>", "committedDate": "2020-06-24T12:12:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MTUxNw==", "url": "https://github.com/eclipse/hono/pull/2048#discussion_r445381517", "bodyText": "It'd be good to add 'enabled' in this example?", "author": "dejanb", "createdAt": "2020-06-25T08:08:19Z", "path": "site/documentation/content/api/management/device-registry-v1.yaml", "diffHunk": "@@ -299,6 +374,27 @@ paths:\n                   application/json:\n                      schema:\n                         $ref: '#/components/schemas/Device'\n+                     examples:\n+                        fully-configured:\n+                           summary: Fully configured device\n+                           description: |\n+                              The body contains the configuration properties of a device which\n+                              has been configured extensively.\n+                           value: |\n+                              {", "originalCommit": "7e245ebb8453c3b43c353bea8246cc3e5a76f77e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM5MTY4MA==", "url": "https://github.com/eclipse/hono/pull/2048#discussion_r445391680", "bodyText": "The enabled property will not be included by our registry implementations if it hasn't been set explicitly during registration.\nWe could change this behavior, of course. See #2041", "author": "sophokles73", "createdAt": "2020-06-25T08:25:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MTUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM5ODY5MA==", "url": "https://github.com/eclipse/hono/pull/2048#discussion_r445398690", "bodyText": "But it can be specified when creating a device and we use the same examples AFAIK. I just thought that it'd be good that \"fully configured\" example shows it.", "author": "dejanb", "createdAt": "2020-06-25T08:37:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MTUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTUwMjA4Nw==", "url": "https://github.com/eclipse/hono/pull/2048#discussion_r445502087", "bodyText": "Sure, I'll add it ...", "author": "sophokles73", "createdAt": "2020-06-25T11:54:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MTUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTUxNDg1MQ==", "url": "https://github.com/eclipse/hono/pull/2048#discussion_r445514851", "bodyText": "@dejanb I have added the enabled property and have also fixed the example response for credentials meta data only ...", "author": "sophokles73", "createdAt": "2020-06-25T12:19:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4MTUxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4NzIxMw==", "url": "https://github.com/eclipse/hono/pull/2048#discussion_r445387213", "bodyText": "If we remove these descriptive examples, it might be a good idea to add examples like this (with useable curl commands) to the spec examples?", "author": "dejanb", "createdAt": "2020-06-25T08:18:02Z", "path": "site/documentation/content/user-guide/file-based-device-registry.md", "diffHunk": "@@ -18,445 +18,12 @@ The resources have been designed to provide convenient access to the registry's\n \n ## Managing Tenants\n \n-The following sections describe the resources representing the operations of the Tenant API and how they can be used to manage tenants.\n-Please refer to the [Device Registry HTTP API]({{< relref \"/api/management\" >}}) for the specific elements that are explained in detail there.\n+Please refer to the [Device Registry Management API]({{< relref \"/api/management#tenants\" >}}) for information about managing tenants.\n \n-### Add a Tenant\n+## Managing Devices\n \n-* URI: `/v1/tenants/${tenantId}`\n-* Method: `POST`\n-* Request Headers:\n-  * (required) `Content-Type`: `application/json` (no other type supported)\n-* Request Body:\n-  * (Optional) A JSON object as specified by [Tenant schema]({{< relref \"/api/management\" >}}) of the HTTP API specification.\n-* Status Codes:\n-  * 201 (Created): Tenant has been added successfully under the resource indicated by `Location` header.\n-  * 400 (Bad Request): The tenant has not been created because the request was malformed, e .g. because the payload was malformed. The response body may contain hints regarding the cause of the problem.\n-  * 409 (Conflict): A tenant with the given `tenantId` already exists. The request has not been processed.\n-* Response Headers:\n-  * `Location`: The URI under which the newly created resource can be accessed.\n-  * `ETag`: Version of the resource\n+Please refer to the [Device Registry Management API]({{< relref \"/api/management#devices\" >}}) for information about managing devices.\n \n-**Example**\n-\n-The following commands add some tenants with different adapter configurations:\n-\n-Add a tenant that has all adapters set to enabled:\n-\n-~~~sh\n-curl -i -X POST http://localhost:28080/v1/tenants/tenantAllAdapters", "originalCommit": "7e245ebb8453c3b43c353bea8246cc3e5a76f77e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM5MjA5MQ==", "url": "https://github.com/eclipse/hono/pull/2048#discussion_r445392091", "bodyText": "I didn't consider this so far, let me try to put in something like it ...", "author": "sophokles73", "createdAt": "2020-06-25T08:26:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4NzIxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQwNTI2Mw==", "url": "https://github.com/eclipse/hono/pull/2048#discussion_r445405263", "bodyText": "The places in the spec where examples are supposed to be put are requestBody, responseBody and parameter. In all cases the example is supposed to conform to the type of the element, e.g. if a requestBody has content type application/json then the example value is expected to be of that type.\nWe could add a curl command to the operation's description field, though. That would look like this:\n\nNot too fancy, is it? I have never seen any Swagger API that contained curl examples as well so I wonder if we can leave it to the user to figure out how to do this? We also still have the getting started guide which contains curl based examples ...\nWDYT?", "author": "sophokles73", "createdAt": "2020-06-25T08:49:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4NzIxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQxODgwMQ==", "url": "https://github.com/eclipse/hono/pull/2048#discussion_r445418801", "bodyText": "OK, let's leave it out for the moment. Until we figure out the proper way to do it. I agree, getting started guide should be enough.", "author": "dejanb", "createdAt": "2020-06-25T09:12:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM4NzIxMw=="}], "type": "inlineReview"}, {"oid": "9340998c04c292a6aecd68542c58ed2350ad6444", "url": "https://github.com/eclipse/hono/commit/9340998c04c292a6aecd68542c58ed2350ad6444", "message": "Add enabled property, add JSON array\n\nSigned-off-by: Kai Hudalla <kai.hudalla@bosch.io>", "committedDate": "2020-06-25T12:18:22Z", "type": "commit"}]}