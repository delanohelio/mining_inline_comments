{"pr_number": 2473, "pr_title": "Show helpful and actionable messages to guide the user to correct extra extension config", "pr_createdAt": "2020-05-18T20:45:32Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2473", "timeline": [{"oid": "30e52b702f5c3a2d589c06171c68ab68bfc890c3", "url": "https://github.com/GoogleContainerTools/jib/commit/30e52b702f5c3a2d589c06171c68ab68bfc890c3", "message": "Add extra config obj to Gradle ext API", "committedDate": "2020-05-08T18:39:08Z", "type": "commit"}, {"oid": "d40f737c357065f89666dcc4097dd67b0ae42122", "url": "https://github.com/GoogleContainerTools/jib/commit/d40f737c357065f89666dcc4097dd67b0ae42122", "message": "Add extra config obj to Maven ext API", "committedDate": "2020-05-08T18:39:35Z", "type": "commit"}, {"oid": "09a021d9ffc469e2ace70340a42f9a0bb960d816", "url": "https://github.com/GoogleContainerTools/jib/commit/09a021d9ffc469e2ace70340a42f9a0bb960d816", "message": "Add Maven util to handle extra config obj", "committedDate": "2020-05-08T18:39:53Z", "type": "commit"}, {"oid": "97d00d324445983dc3310d7a2a717d059bd1032a", "url": "https://github.com/GoogleContainerTools/jib/commit/97d00d324445983dc3310d7a2a717d059bd1032a", "message": "Wire extra config obj", "committedDate": "2020-05-08T18:40:45Z", "type": "commit"}, {"oid": "0b471f4e3003961a44ea640ef63a15c79f2b949f", "url": "https://github.com/GoogleContainerTools/jib/commit/0b471f4e3003961a44ea640ef63a15c79f2b949f", "message": "Fix test compilation errors", "committedDate": "2020-05-08T18:45:13Z", "type": "commit"}, {"oid": "e7037375b4429b8640f7315f5c633cfb03219ba0", "url": "https://github.com/GoogleContainerTools/jib/commit/e7037375b4429b8640f7315f5c633cfb03219ba0", "message": "Fix Javadoc error", "committedDate": "2020-05-08T18:58:33Z", "type": "commit"}, {"oid": "26618e36a5e6ad4fb5ca31d9048206f2a87faa2e", "url": "https://github.com/GoogleContainerTools/jib/commit/26618e36a5e6ad4fb5ca31d9048206f2a87faa2e", "message": "Add extension-defined extra config option", "committedDate": "2020-05-13T18:22:53Z", "type": "commit"}, {"oid": "fa34189f14a0e1aa6da6ff508140a5f9eec49ddb", "url": "https://github.com/GoogleContainerTools/jib/commit/fa34189f14a0e1aa6da6ff508140a5f9eec49ddb", "message": "Merge branch 'master' into extra-extension-config", "committedDate": "2020-05-13T18:51:45Z", "type": "commit"}, {"oid": "50891c73f59b880d26cba188c6c65f483b197f70", "url": "https://github.com/GoogleContainerTools/jib/commit/50891c73f59b880d26cba188c6c65f483b197f70", "message": "Fix compilation errors and style", "committedDate": "2020-05-13T19:21:57Z", "type": "commit"}, {"oid": "73a73c41007d5c8b205f5e157de02eea7ece286f", "url": "https://github.com/GoogleContainerTools/jib/commit/73a73c41007d5c8b205f5e157de02eea7ece286f", "message": "Fix Javadocs", "committedDate": "2020-05-13T19:31:13Z", "type": "commit"}, {"oid": "50df231587f53a291f91171e095e476619d08d64", "url": "https://github.com/GoogleContainerTools/jib/commit/50df231587f53a291f91171e095e476619d08d64", "message": "Fix javadoc", "committedDate": "2020-05-13T20:07:24Z", "type": "commit"}, {"oid": "c77148360bf4cc42ae515e2529c55eb2d4229f9b", "url": "https://github.com/GoogleContainerTools/jib/commit/c77148360bf4cc42ae515e2529c55eb2d4229f9b", "message": "Remove comment", "committedDate": "2020-05-13T20:24:09Z", "type": "commit"}, {"oid": "80e58f142fabe78ae69e7e87a183542bcfebf43e", "url": "https://github.com/GoogleContainerTools/jib/commit/80e58f142fabe78ae69e7e87a183542bcfebf43e", "message": "Remove unnecessary class", "committedDate": "2020-05-13T21:05:13Z", "type": "commit"}, {"oid": "8c30b7b5da9351f8b34ad3b0d3566d810ef2f56f", "url": "https://github.com/GoogleContainerTools/jib/commit/8c30b7b5da9351f8b34ad3b0d3566d810ef2f56f", "message": "Add tests", "committedDate": "2020-05-15T19:46:52Z", "type": "commit"}, {"oid": "4f5326f5eef547d0d97139fc270604fd2926e154", "url": "https://github.com/GoogleContainerTools/jib/commit/4f5326f5eef547d0d97139fc270604fd2926e154", "message": "Fix ErrorProne", "committedDate": "2020-05-15T19:55:43Z", "type": "commit"}, {"oid": "aa7c0bd839bcb682e0f87b607004a0ad5dc606c0", "url": "https://github.com/GoogleContainerTools/jib/commit/aa7c0bd839bcb682e0f87b607004a0ad5dc606c0", "message": "potato -> fooParam, tomato -> barParam", "committedDate": "2020-05-15T20:55:47Z", "type": "commit"}, {"oid": "5ef3f360c1656146e708891c39a4217ded3e0f52", "url": "https://github.com/GoogleContainerTools/jib/commit/5ef3f360c1656146e708891c39a4217ded3e0f52", "message": "Add comments about suppressing class cast warnings", "committedDate": "2020-05-15T20:58:37Z", "type": "commit"}, {"oid": "a48ba9f7311d9e99481d42b38c8f8fa675f48518", "url": "https://github.com/GoogleContainerTools/jib/commit/a48ba9f7311d9e99481d42b38c8f8fa675f48518", "message": "No default implementation in interface", "committedDate": "2020-05-15T21:31:10Z", "type": "commit"}, {"oid": "a79c4b8b00b41423c66df2983bb3ba1581a79411", "url": "https://github.com/GoogleContainerTools/jib/commit/a79c4b8b00b41423c66df2983bb3ba1581a79411", "message": "Update Gradle comment", "committedDate": "2020-05-15T21:55:06Z", "type": "commit"}, {"oid": "7848b66837b344543fdfb81efeb9e8602e297de3", "url": "https://github.com/GoogleContainerTools/jib/commit/7848b66837b344543fdfb81efeb9e8602e297de3", "message": "Share extension logger code", "committedDate": "2020-05-18T15:21:34Z", "type": "commit"}, {"oid": "dfac478ee76e75210c8aaf5aa70edcdd2359445e", "url": "https://github.com/GoogleContainerTools/jib/commit/dfac478ee76e75210c8aaf5aa70edcdd2359445e", "message": "Merge branch 'refactor-extension-code' into extension-config-class-cast-better-error", "committedDate": "2020-05-18T15:27:05Z", "type": "commit"}, {"oid": "223cf5fc07cee4782f07e289ed3c8c83e8b7cfe8", "url": "https://github.com/GoogleContainerTools/jib/commit/223cf5fc07cee4782f07e289ed3c8c83e8b7cfe8", "message": "Merge branch 'master' into extra-extension-config", "committedDate": "2020-05-18T15:50:55Z", "type": "commit"}, {"oid": "70ce743ac58e920835125552e4eb3524c813a303", "url": "https://github.com/GoogleContainerTools/jib/commit/70ce743ac58e920835125552e4eb3524c813a303", "message": "Merge branch 'extra-extension-config' into extension-config-class-cast-better-error", "committedDate": "2020-05-18T16:04:32Z", "type": "commit"}, {"oid": "a8bf4abfb314fdfa8bebb2408843f47c9ef957fd", "url": "https://github.com/GoogleContainerTools/jib/commit/a8bf4abfb314fdfa8bebb2408843f47c9ef957fd", "message": "Handle Maven extension config class mismatches", "committedDate": "2020-05-18T19:24:18Z", "type": "commit"}, {"oid": "d7251644e44dacb82185d66f1b6761ddfde473c8", "url": "https://github.com/GoogleContainerTools/jib/commit/d7251644e44dacb82185d66f1b6761ddfde473c8", "message": "Gradle counterpart", "committedDate": "2020-05-18T20:33:46Z", "type": "commit"}, {"oid": "40086c813e27fa5164dc5e84385efd7303004656", "url": "https://github.com/GoogleContainerTools/jib/commit/40086c813e27fa5164dc5e84385efd7303004656", "message": "Update comments", "committedDate": "2020-05-18T20:59:37Z", "type": "commit"}, {"oid": "dc96922ddc1001a713c47906f0395ce98c83bf9f", "url": "https://github.com/GoogleContainerTools/jib/commit/dc96922ddc1001a713c47906f0395ce98c83bf9f", "message": "Merge branch 'master' into extension-config-class-cast-better-error", "committedDate": "2020-05-19T15:41:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1MTM5OQ==", "url": "https://github.com/GoogleContainerTools/jib/pull/2473#discussion_r427551399", "bodyText": "maybe this should be a hard failure?", "author": "loosebazooka", "createdAt": "2020-05-19T19:35:42Z", "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/GradleProjectProperties.java", "diffHunk": "@@ -458,13 +458,20 @@ public JibContainerBuilder runPluginExtensions(\n       ContainerBuildPlan buildPlan)\n       throws JibPluginExtensionException {\n     T extraConfig = null;\n-    if (extraConfigType.isPresent() && config.getExtraConfiguration().isPresent()) {\n-      try {\n+    if (config.getExtraConfiguration().isPresent()) {\n+      if (!extraConfigType.isPresent()) {\n+        log(", "originalCommit": "dc96922ddc1001a713c47906f0395ce98c83bf9f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1MTcwOQ==", "url": "https://github.com/GoogleContainerTools/jib/pull/2473#discussion_r427551709", "bodyText": "for example if you try to specify jib.to.potato I think you get a failure?", "author": "loosebazooka", "createdAt": "2020-05-19T19:36:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1MTM5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzYxNTY5MQ==", "url": "https://github.com/GoogleContainerTools/jib/pull/2473#discussion_r427615691", "bodyText": "Makes sense. Done.", "author": "chanseokoh", "createdAt": "2020-05-19T21:38:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1MTM5OQ=="}], "type": "inlineReview"}, {"oid": "a4424ed76818a0a5009c4e6ad5da0f22e399a9ef", "url": "https://github.com/GoogleContainerTools/jib/commit/a4424ed76818a0a5009c4e6ad5da0f22e399a9ef", "message": "Merge branch 'master' into extension-config-class-cast-better-error", "committedDate": "2020-05-19T21:22:59Z", "type": "commit"}, {"oid": "bdedf95646695bedf9205c5eac330ee6b1b98e3c", "url": "https://github.com/GoogleContainerTools/jib/commit/bdedf95646695bedf9205c5eac330ee6b1b98e3c", "message": "Fail on unwanted <configuration>", "committedDate": "2020-05-19T21:35:26Z", "type": "commit"}]}