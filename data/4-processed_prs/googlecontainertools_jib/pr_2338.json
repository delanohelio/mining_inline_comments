{"pr_number": 2338, "pr_title": "Add ContainerBuildPlan as Build Plan API interface", "pr_createdAt": "2020-03-17T21:45:16Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2338", "timeline": [{"oid": "1e1f8c9d79484788b37435107111c5ecb0c90c47", "url": "https://github.com/GoogleContainerTools/jib/commit/1e1f8c9d79484788b37435107111c5ecb0c90c47", "message": "Add ContainerBuildPlan", "committedDate": "2020-03-17T21:01:13Z", "type": "commit"}, {"oid": "0fbbaca671108fbc7ac3cb8d7966aba70f7e222d", "url": "https://github.com/GoogleContainerTools/jib/commit/0fbbaca671108fbc7ac3cb8d7966aba70f7e222d", "message": "Add tests", "committedDate": "2020-03-17T21:38:36Z", "type": "commit"}, {"oid": "ce6175c957d09b059ae3802fda1265ac5ab9ee58", "url": "https://github.com/GoogleContainerTools/jib/commit/ce6175c957d09b059ae3802fda1265ac5ab9ee58", "message": "Fix Javadoc warnings", "committedDate": "2020-03-17T21:53:34Z", "type": "commit"}, {"oid": "0f2e65761939be79283fa815d568678411dfa9a7", "url": "https://github.com/GoogleContainerTools/jib/commit/0f2e65761939be79283fa815d568678411dfa9a7", "message": "Merge branch 'master' into add-ContainerBuildPlan", "committedDate": "2020-03-19T23:12:32Z", "type": "commit"}, {"oid": "f9d0c4c3e82b9ce6eb86b96c31c28a1b967ccdd1", "url": "https://github.com/GoogleContainerTools/jib/commit/f9d0c4c3e82b9ce6eb86b96c31c28a1b967ccdd1", "message": "List<? extends LayerObject>", "committedDate": "2020-03-19T23:14:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEyNjg2MA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2338#discussion_r396126860", "bodyText": "Not sure I like the name LayerObject, but that's a different discussion.", "author": "loosebazooka", "createdAt": "2020-03-22T18:40:28Z", "path": "jib-build-plan/src/main/java/com/google/cloud/tools/jib/api/buildplan/ContainerBuildPlan.java", "diffHunk": "@@ -0,0 +1,495 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.api.buildplan;\n+\n+import java.time.Instant;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+import javax.annotation.Nullable;\n+import javax.annotation.concurrent.Immutable;\n+\n+/** Describes a plan to build a container. */\n+@Immutable\n+public class ContainerBuildPlan {\n+\n+  /** Builder for {@link ContainerBuildPlan}. */\n+  public static class Builder {\n+\n+    private String baseImage = \"scratch\";\n+    private String architectureHint = \"amd64\";\n+    private String osHint = \"linux\";\n+    private Instant creationTime = Instant.EPOCH;\n+    private ImageFormat format = ImageFormat.Docker;\n+\n+    // image execution parameters\n+    private Map<String, String> environment = new HashMap<>();\n+    private Map<String, String> labels = new HashMap<>();\n+    private Set<AbsoluteUnixPath> volumes = new HashSet<>();\n+    private Set<Port> exposedPorts = new HashSet<>();\n+    @Nullable private String user;\n+    @Nullable private AbsoluteUnixPath workingDirectory;\n+    @Nullable private List<String> entrypoint;\n+    @Nullable private List<String> cmd;\n+\n+    private List<LayerObject> layers = new ArrayList<>();", "originalCommit": "f9d0c4c3e82b9ce6eb86b96c31c28a1b967ccdd1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQyOTAxMw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2338#discussion_r396429013", "bodyText": "I don't like it either. We already have a non-public Layer interface in jib-core, so I just wanted to avoid name clash.", "author": "chanseokoh", "createdAt": "2020-03-23T12:55:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEyNjg2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUzMzMwMA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2338#discussion_r396533300", "bodyText": "Okay, well this shouldn't prevent this PR from going in.", "author": "loosebazooka", "createdAt": "2020-03-23T15:22:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjEyNjg2MA=="}], "type": "inlineReview"}]}