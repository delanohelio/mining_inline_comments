{"pr_number": 2289, "pr_title": "Do not overwrite Gradle task dependencies", "pr_createdAt": "2020-02-12T15:57:02Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2289", "timeline": [{"oid": "f517dec2d0850224114c8ed934b2ca3b310398cb", "url": "https://github.com/GoogleContainerTools/jib/commit/f517dec2d0850224114c8ed934b2ca3b310398cb", "message": "Do not overwrite Gradle task dependencies", "committedDate": "2020-02-12T15:50:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1NTE1OA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2289#discussion_r378355158", "bodyText": "Question: does task.dependsOn(jibDependencies) not work? (dependsOn() accepts Object..., but I am not actually sure if passing List<TaskProvider<Task>> will work as intended.)", "author": "chanseokoh", "createdAt": "2020-02-12T16:13:44Z", "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/JibPlugin.java", "diffHunk": "@@ -208,7 +208,7 @@ public void apply(Project project) {\n           jibDependencies.add(mainSourceSet.getRuntimeClasspath());\n \n           jibTaskProviders.forEach(\n-              provider -> provider.configure(task -> task.setDependsOn(jibDependencies)));\n+              provider -> provider.configure(task -> jibDependencies.forEach(task::dependsOn)));", "originalCommit": "f517dec2d0850224114c8ed934b2ca3b310398cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODQ0MzEwOQ==", "url": "https://github.com/GoogleContainerTools/jib/pull/2289#discussion_r378443109", "bodyText": "@chanseokoh I was curious and tried it out, but it looks like the alternative is to do:\ntask.dependsOn(jibDependencies.toArray())\n\nFor whatever reason, the object translation doesn't work well for collections?", "author": "loosebazooka", "createdAt": "2020-02-12T18:47:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODM1NTE1OA=="}], "type": "inlineReview"}]}