{"pr_number": 2632, "pr_title": "Update contributor docs to include more details on running integration tests. ", "pr_createdAt": "2020-07-27T20:52:14Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2632", "timeline": [{"oid": "de6617c9900fcb40f47fff5a356569235d7b2d29", "url": "https://github.com/GoogleContainerTools/jib/commit/de6617c9900fcb40f47fff5a356569235d7b2d29", "message": "updating integration tests section of contrib docs", "committedDate": "2020-07-27T20:45:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3MzQzNw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2632#discussion_r461173437", "bodyText": "How about this? The localhost:9990 is for JIB_INTEGRATION_TESTING_LOCATION actually.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              - If you're not using a GCP project then set `JIB_INTEGRATION_TESTING_LOCATION` to a specific registry for testing.        \n          \n          \n            \n            \n          \n          \n            \n            To run the integration tests locally, you can run `docker run -d -p 9990:5000 registry:2` and use `localhost:9990`.\n          \n          \n            \n              - If you're not using a GCP project then set `JIB_INTEGRATION_TESTING_LOCATION` to a specific registry for testing. (For example, you can run `docker run -d -p 9990:5000 registry:2` to set up a local registry and set the variable to `localhost:9990`.)", "author": "chanseokoh", "createdAt": "2020-07-27T21:13:20Z", "path": "CONTRIBUTING.md", "diffHunk": "@@ -47,14 +47,18 @@ local maven repository.\n 5. Associate the change with an existing issue or file a [new issue](../../issues).\n 6. Create a pull request!\n \n+### Integration Tests\n **Note** that in order to run integration tests, you will need to set one of the\n-following environment variables:\n+following environment variables:                                                \n \n-  - `JIB_INTEGRATION_TESTING_PROJECT`: the GCP project to use for testing;\n+  - If you are using a GCP project then set `JIB_INTEGRATION_TESTING_PROJECT` to the GCP project to use for testing;\n     the registry tested will be `gcr.io/<JIB_INTEGRATION_TESTING_PROJECT>`.\n-  - `JIB_INTEGRATION_TESTING_LOCATION`: a specific registry for testing.\n-    To run the integration tests locally, you can run\n-    `docker run -d -p 9990:5000 registry:2` and use `localhost:9990`.\n+    - Make sure that you have `docker-credential-gcr` installed.\n+    - Configure authentication to Container Registry by following these [steps](https://cloud.google.com/container-registry/docs/advanced-authentication).\n+    - Enable the google container registry api [here](https://pantheon.corp.google.com/apis/library/containerregistry.googleapis.com). This can also be done through the command line.\n+  - If you're not using a GCP project then set `JIB_INTEGRATION_TESTING_LOCATION` to a specific registry for testing.        \n+\n+To run the integration tests locally, you can run `docker run -d -p 9990:5000 registry:2` and use `localhost:9990`.", "originalCommit": "de6617c9900fcb40f47fff5a356569235d7b2d29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5MjM1Mw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2632#discussion_r461192353", "bodyText": "Ohh I see! Done.", "author": "mpeddada1", "createdAt": "2020-07-27T21:53:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3MzQzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NTQ5Nw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2632#discussion_r461175497", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                - Enable the google container registry api [here](https://pantheon.corp.google.com/apis/library/containerregistry.googleapis.com). This can also be done through the command line.\n          \n          \n            \n                - Enable the Google Container Registry API [here](https://console.cloud.google.com/apis/library/containerregistry.googleapis.com).\n          \n      \n    \n    \n  \n\nAnd unless you document the sample command, I'd skip mentioning the command-line opiton.", "author": "chanseokoh", "createdAt": "2020-07-27T21:17:27Z", "path": "CONTRIBUTING.md", "diffHunk": "@@ -47,14 +47,18 @@ local maven repository.\n 5. Associate the change with an existing issue or file a [new issue](../../issues).\n 6. Create a pull request!\n \n+### Integration Tests\n **Note** that in order to run integration tests, you will need to set one of the\n-following environment variables:\n+following environment variables:                                                \n \n-  - `JIB_INTEGRATION_TESTING_PROJECT`: the GCP project to use for testing;\n+  - If you are using a GCP project then set `JIB_INTEGRATION_TESTING_PROJECT` to the GCP project to use for testing;\n     the registry tested will be `gcr.io/<JIB_INTEGRATION_TESTING_PROJECT>`.\n-  - `JIB_INTEGRATION_TESTING_LOCATION`: a specific registry for testing.\n-    To run the integration tests locally, you can run\n-    `docker run -d -p 9990:5000 registry:2` and use `localhost:9990`.\n+    - Make sure that you have `docker-credential-gcr` installed.\n+    - Configure authentication to Container Registry by following these [steps](https://cloud.google.com/container-registry/docs/advanced-authentication).\n+    - Enable the google container registry api [here](https://pantheon.corp.google.com/apis/library/containerregistry.googleapis.com). This can also be done through the command line.", "originalCommit": "de6617c9900fcb40f47fff5a356569235d7b2d29", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NzI0Ng==", "url": "https://github.com/GoogleContainerTools/jib/pull/2632#discussion_r461177246", "bodyText": "I think actually these two are conflicting, according to the linked doc. The doc recommends the first option of \"gcloud as a credential helper\". docker-credential-gcr is the second \"standalone credential helper\" option.", "author": "chanseokoh", "createdAt": "2020-07-27T21:20:55Z", "path": "CONTRIBUTING.md", "diffHunk": "@@ -47,14 +47,18 @@ local maven repository.\n 5. Associate the change with an existing issue or file a [new issue](../../issues).\n 6. Create a pull request!\n \n+### Integration Tests\n **Note** that in order to run integration tests, you will need to set one of the\n-following environment variables:\n+following environment variables:                                                \n \n-  - `JIB_INTEGRATION_TESTING_PROJECT`: the GCP project to use for testing;\n+  - If you are using a GCP project then set `JIB_INTEGRATION_TESTING_PROJECT` to the GCP project to use for testing;\n     the registry tested will be `gcr.io/<JIB_INTEGRATION_TESTING_PROJECT>`.\n-  - `JIB_INTEGRATION_TESTING_LOCATION`: a specific registry for testing.\n-    To run the integration tests locally, you can run\n-    `docker run -d -p 9990:5000 registry:2` and use `localhost:9990`.\n+    - Make sure that you have `docker-credential-gcr` installed.\n+    - Configure authentication to Container Registry by following these [steps](https://cloud.google.com/container-registry/docs/advanced-authentication).", "originalCommit": "de6617c9900fcb40f47fff5a356569235d7b2d29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5MDI0NA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2632#discussion_r461190244", "bodyText": "Great point, thanks! I removed the installation step since it was conflicting with the one after.", "author": "mpeddada1", "createdAt": "2020-07-27T21:48:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NzI0Ng=="}], "type": "inlineReview"}, {"oid": "650b6e1bd2ce1206e8907487ff6c5efbf9eb6599", "url": "https://github.com/GoogleContainerTools/jib/commit/650b6e1bd2ce1206e8907487ff6c5efbf9eb6599", "message": "apply comment changes\n\nCo-authored-by: Chanseok Oh <chanseok@google.com>", "committedDate": "2020-07-27T21:29:58Z", "type": "commit"}, {"oid": "28fd830743ca6b8d8e8e5403fe0290ef5c2007f1", "url": "https://github.com/GoogleContainerTools/jib/commit/28fd830743ca6b8d8e8e5403fe0290ef5c2007f1", "message": "applying more comment suggestions", "committedDate": "2020-07-27T21:39:21Z", "type": "commit"}, {"oid": "23edc86ae87522936f24f9a2bc8d42f5d9e67a50", "url": "https://github.com/GoogleContainerTools/jib/commit/23edc86ae87522936f24f9a2bc8d42f5d9e67a50", "message": "applying more comment changes", "committedDate": "2020-07-27T21:44:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NTcxNg==", "url": "https://github.com/GoogleContainerTools/jib/pull/2632#discussion_r461195716", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                - Enable the Google Container Registry api [here](https://pantheon.corp.google.com/apis/library/containerregistry.googleapis.com).\n          \n          \n            \n                - Enable the Google Container Registry API [here](https://console.cloud.google.com/apis/library/containerregistry.googleapis.com).", "author": "chanseokoh", "createdAt": "2020-07-27T22:00:54Z", "path": "CONTRIBUTING.md", "diffHunk": "@@ -47,14 +47,15 @@ local maven repository.\n 5. Associate the change with an existing issue or file a [new issue](../../issues).\n 6. Create a pull request!\n \n+### Integration Tests\n **Note** that in order to run integration tests, you will need to set one of the\n-following environment variables:\n+following environment variables:                                                \n \n-  - `JIB_INTEGRATION_TESTING_PROJECT`: the GCP project to use for testing;\n+  - If you are using a GCP project then set `JIB_INTEGRATION_TESTING_PROJECT` to the GCP project to use for testing;\n     the registry tested will be `gcr.io/<JIB_INTEGRATION_TESTING_PROJECT>`.\n-  - `JIB_INTEGRATION_TESTING_LOCATION`: a specific registry for testing.\n-    To run the integration tests locally, you can run\n-    `docker run -d -p 9990:5000 registry:2` and use `localhost:9990`.\n+    - Configure authentication to Container Registry by following these [steps](https://cloud.google.com/container-registry/docs/advanced-authentication).\n+    - Enable the Google Container Registry api [here](https://pantheon.corp.google.com/apis/library/containerregistry.googleapis.com).", "originalCommit": "23edc86ae87522936f24f9a2bc8d42f5d9e67a50", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b20f6649ff9ee391cba95f10bd43573869c99fcb", "url": "https://github.com/GoogleContainerTools/jib/commit/b20f6649ff9ee391cba95f10bd43573869c99fcb", "message": "modify url and formatting\n\nCo-authored-by: Chanseok Oh <chanseok@google.com>", "committedDate": "2020-07-27T22:06:51Z", "type": "commit"}]}