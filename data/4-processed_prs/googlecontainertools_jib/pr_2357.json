{"pr_number": 2357, "pr_title": "Do not disable Google HTTP Client logging for custom logger in Gradle", "pr_createdAt": "2020-03-24T19:43:13Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2357", "timeline": [{"oid": "324aa09f950b9196f7bf477c734f26dc97bb1739", "url": "https://github.com/GoogleContainerTools/jib/commit/324aa09f950b9196f7bf477c734f26dc97bb1739", "message": "Disable HTTP logging only when not custom logger", "committedDate": "2020-03-24T19:32:39Z", "type": "commit"}, {"oid": "30e7e422aab0a2ea8deb76a332dfff4b04fcc993", "url": "https://github.com/GoogleContainerTools/jib/commit/30e7e422aab0a2ea8deb76a332dfff4b04fcc993", "message": "Update FAQ", "committedDate": "2020-03-24T19:42:56Z", "type": "commit"}, {"oid": "ad88da7fc5742c36a103d024c3cb6b360e9beeb6", "url": "https://github.com/GoogleContainerTools/jib/commit/ad88da7fc5742c36a103d024c3cb6b360e9beeb6", "message": "empty commit to fix stalled Travis", "committedDate": "2020-03-24T20:57:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzMzQ0MA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2357#discussion_r398833440", "bodyText": "I'm not sure I understand how this solves the problem? Does gradle have it's own custom logger? And if we disable this, does this show that weird log information that we turned this off for?", "author": "loosebazooka", "createdAt": "2020-03-26T19:23:26Z", "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/TaskCommon.java", "diffHunk": "@@ -108,8 +108,12 @@ static void disableHttpLogging() {\n           }\n         });\n \n-    // Disables Google HTTP client logging.\n-    java.util.logging.Logger.getLogger(HttpTransport.class.getName()).setLevel(Level.OFF);\n+    // Disable only when not using custom logger.\n+    // https://github.com/GoogleContainerTools/jib/issues/2356\n+    if (System.getProperty(\"java.util.logging.config.file\") == null) {\n+      // Disables Google HTTP client logging.\n+      java.util.logging.Logger.getLogger(HttpTransport.class.getName()).setLevel(Level.OFF);", "originalCommit": "ad88da7fc5742c36a103d024c3cb6b360e9beeb6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MDk3Nw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2357#discussion_r398840977", "bodyText": "Perhaps my code comment is confusing.\nTo explain,\n\nGoogle HTTP Client's HttpTransport class uses JUL.Logger.getLogger(HttpTransport.class.getName()) to log detailed network traffic.\nHttpTransport class outputs detailed network traffic at INFO level.\nIn Gradle, increasing general verbosity to at least --info allows JUL to print INFO messages, as expected.\nTherefore, running gradle --info generates a lot of network traffic output. This is unnecessary clutter, so we universally disabled the JUL logging of HttpTransport by calling setLevel(Level.OFF) when we start a task. We still want this.\nTherefore, our FAQ instructions to capture detailed networks logs using JUL (via -Djava.util.logging.config.file) doesn't work.\n\nDoes this make it clear?", "author": "chanseokoh", "createdAt": "2020-03-26T19:36:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzMzQ0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MjI1MA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2357#discussion_r398842250", "bodyText": "ooooh I see, yeah sounds good.", "author": "loosebazooka", "createdAt": "2020-03-26T19:38:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzMzQ0MA=="}], "type": "inlineReview"}, {"oid": "9a4a4e7c63cd66a1524fef0963efce111d2ec9aa", "url": "https://github.com/GoogleContainerTools/jib/commit/9a4a4e7c63cd66a1524fef0963efce111d2ec9aa", "message": "Update code comment", "committedDate": "2020-03-26T19:40:25Z", "type": "commit"}]}