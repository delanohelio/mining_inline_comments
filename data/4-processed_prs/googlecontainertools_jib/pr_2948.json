{"pr_number": 2948, "pr_title": " Consolidate prepare release scripts and migrate to GitHub Actions", "pr_createdAt": "2020-12-16T22:56:49Z", "pr_url": "https://github.com/GoogleContainerTools/jib/pull/2948", "timeline": [{"oid": "4acc9a96113789c6f810f664bc288d36075e2354", "url": "https://github.com/GoogleContainerTools/jib/commit/4acc9a96113789c6f810f664bc288d36075e2354", "message": "Consolidate prepare release into GitHub Actions", "committedDate": "2020-12-16T22:46:10Z", "type": "commit"}, {"oid": "1a60405a2f7ac3d5e83c3c49b908ec7d28d48f36", "url": "https://github.com/GoogleContainerTools/jib/commit/1a60405a2f7ac3d5e83c3c49b908ec7d28d48f36", "message": "Rename workflow file", "committedDate": "2020-12-16T22:48:04Z", "type": "commit"}, {"oid": "46ab9c04e0a4ae09691597f7a0f98ee4659243a6", "url": "https://github.com/GoogleContainerTools/jib/commit/46ab9c04e0a4ae09691597f7a0f98ee4659243a6", "message": "comment", "committedDate": "2020-12-16T22:56:32Z", "type": "commit"}, {"oid": "5c71baa6469750ca41d0db529ee97c9543cfbba5", "url": "https://github.com/GoogleContainerTools/jib/commit/5c71baa6469750ca41d0db529ee97c9543cfbba5", "message": "Fix associated tag in GitHub release", "committedDate": "2020-12-16T23:00:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk2NTc5MQ==", "url": "https://github.com/GoogleContainerTools/jib/pull/2948#discussion_r546965791", "bodyText": "so we can't validate this in the inputs section above?", "author": "loosebazooka", "createdAt": "2020-12-21T22:42:43Z", "path": ".github/workflows/jib-gradle-prepare-release.yml", "diffHunk": "@@ -1,38 +1,61 @@\n-name: Prepare Jib Gradle release\n+name: Prepare Jib release\n on:\n   workflow_dispatch:\n     inputs:\n+      project:\n+        description: Jib project to release\n+        required: true\n+        default: (build-plan | core | maven | gradle | extension-common | maven-extension | gradle-extension)\n       release_version:\n         description: new release version\n         required: true\n         default: (for example, 0.1.0)\n \n jobs:\n   release:\n-    name: Prepare Jib Gradle release\n+    name: Prepare Jib release\n     runs-on: ubuntu-latest\n     steps:\n       - name: Check out code\n         uses: actions/checkout@v2\n \n-      - name: Build project\n+      - name: Check input\n         run: |\n+          echo '* input project: \"${{ github.event.inputs.project }}\"'\n+\n+          case ${{ github.event.inputs.project }} in\n+            build-plan|core|maven|gradle|extension-common|maven-extension|gradle-extension) ;;", "originalCommit": "5c71baa6469750ca41d0db529ee97c9543cfbba5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk4MTE2Ng==", "url": "https://github.com/GoogleContainerTools/jib/pull/2948#discussion_r546981166", "bodyText": "I was not able to find any mentions about such a feature. This article says\n\nValidation for these inputs is currently limited to simple presence checking, and the only input type available is a free text field (strings only).\n\nAlso found this user question asked on Aug 13 about a feature for the options-list UI.", "author": "chanseokoh", "createdAt": "2020-12-21T23:22:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk2NTc5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk2ODE0MA==", "url": "https://github.com/GoogleContainerTools/jib/pull/2948#discussion_r546968140", "bodyText": "Just to clarify, we don't yet draft releases for the extension projects?", "author": "loosebazooka", "createdAt": "2020-12-21T22:49:17Z", "path": ".github/workflows/jib-gradle-prepare-release.yml", "diffHunk": "@@ -41,24 +64,38 @@ jobs:\n         with:\n           # Provided by Actions. No need to create a token.\n           github_token: ${{ secrets.GITHUB_TOKEN }}\n-          source_branch: gradle_release_v${{ github.event.inputs.release_version }}\n-          pr_title: \"Gradle release v${{ github.event.inputs.release_version }}\"\n+          source_branch: ${{ github.event.inputs.project }}-release-v${{ github.event.inputs.release_version }}\n+          pr_title: \"${{ github.event.inputs.project }} release v${{ github.event.inputs.release_version }}\"\n           pr_body: \"To be merged after the release is complete.\"\n \n-      - name: Draft GitHub release\n+      - name: Draft Maven/Gradle GitHub release", "originalCommit": "5c71baa6469750ca41d0db529ee97c9543cfbba5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk4MTMzMw==", "url": "https://github.com/GoogleContainerTools/jib/pull/2948#discussion_r546981333", "bodyText": "Yeah, we never created GitHub releases for these. (We could have.)", "author": "chanseokoh", "createdAt": "2020-12-21T23:23:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk2ODE0MA=="}], "type": "inlineReview"}, {"oid": "4336f2a6fcc6a592759a7616ce7bc18bb9a27e41", "url": "https://github.com/GoogleContainerTools/jib/commit/4336f2a6fcc6a592759a7616ce7bc18bb9a27e41", "message": "Merge branch 'master' into consolidate-prepare-release", "committedDate": "2020-12-21T23:25:53Z", "type": "commit"}]}