{"pr_number": 1218, "pr_title": "FINERACT-1098 - Catch JpaSystemException in jpa transactions", "pr_createdAt": "2020-07-31T09:46:53Z", "pr_url": "https://github.com/apache/fineract/pull/1218", "timeline": [{"oid": "7b40fe0d08837fe7bf2128bff18d2bd02404fb3d", "url": "https://github.com/apache/fineract/commit/7b40fe0d08837fe7bf2128bff18d2bd02404fb3d", "message": "FINERACT-1098 - Catch JpaSystemException in jpa transactions", "committedDate": "2020-08-01T02:41:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk1MzE1Nw==", "url": "https://github.com/apache/fineract/pull/1218#discussion_r463953157", "bodyText": "@xurror it's not super important, but I thought perhaps this code review feedback could interest you: Instead of changing this like you have, what you really want to do in a case like this is just use the common super class of JpaSystemException and DataIntegrityViolationException like suggested below, does this make sense? Do you want to change this like that? It makes the code easier to read.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private void handleGLClosureIntegrityIssues(final JsonCommand command, final Throwable realCause, final Exception dve) {\n          \n          \n            \n                private void handleGLClosureIntegrityIssues(final JsonCommand command, final NestedRuntimeException dve) {\n          \n          \n            \n                    final Throwable realCause = dve.getMostSpecificCause();", "author": "vorburger", "createdAt": "2020-08-01T11:29:02Z", "path": "fineract-provider/src/main/java/org/apache/fineract/accounting/closure/service/GLClosureWritePlatformServiceJpaRepositoryImpl.java", "diffHunk": "@@ -142,8 +144,7 @@ public CommandProcessingResult deleteGLClosure(final Long glClosureId) {\n      * @param command\n      * @param dve\n      */\n-    private void handleGLClosureIntegrityIssues(final JsonCommand command, final DataIntegrityViolationException dve) {\n-        final Throwable realCause = dve.getMostSpecificCause();\n+    private void handleGLClosureIntegrityIssues(final JsonCommand command, final Throwable realCause, final Exception dve) {", "originalCommit": "7b40fe0d08837fe7bf2128bff18d2bd02404fb3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM2MTUzMQ==", "url": "https://github.com/apache/fineract/pull/1218#discussion_r464361531", "bodyText": "@vorburger instead NestedRuntimeException I used NonTransientDataAccessException which is a more suited super class.\nYou can check this and if it's LGTY you can merge.", "author": "xurror", "createdAt": "2020-08-03T11:44:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk1MzE1Nw=="}], "type": "inlineReview"}, {"oid": "40bcd7613ff5fb9fea6d3aa373ca1a746c9b9e42", "url": "https://github.com/apache/fineract/commit/40bcd7613ff5fb9fea6d3aa373ca1a746c9b9e42", "message": "FINERACT-1098 - Catch JpaSystemException in jpa transactions", "committedDate": "2020-08-01T15:45:41Z", "type": "forcePushed"}, {"oid": "77dec1dcf222212c0c609ed442ddc38797a17113", "url": "https://github.com/apache/fineract/commit/77dec1dcf222212c0c609ed442ddc38797a17113", "message": "FINERACT-1098 - Catch JpaSystemException in jpa transactions", "committedDate": "2020-08-01T16:00:23Z", "type": "commit"}, {"oid": "77dec1dcf222212c0c609ed442ddc38797a17113", "url": "https://github.com/apache/fineract/commit/77dec1dcf222212c0c609ed442ddc38797a17113", "message": "FINERACT-1098 - Catch JpaSystemException in jpa transactions", "committedDate": "2020-08-01T16:00:23Z", "type": "forcePushed"}]}