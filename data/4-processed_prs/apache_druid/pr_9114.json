{"pr_number": 9114, "pr_title": "add docs for TaskCountStatsMonitor", "pr_createdAt": "2020-01-01T04:42:36Z", "pr_url": "https://github.com/apache/druid/pull/9114", "timeline": [{"oid": "dc6d91d643a43a160c4aa95f334b39e97b756841", "url": "https://github.com/apache/druid/commit/dc6d91d643a43a160c4aa95f334b39e97b756841", "message": "fix docs", "committedDate": "2020-01-01T04:34:31Z", "type": "commit"}, {"oid": "caa7f897579e580fe2905ae16433be8e64b62804", "url": "https://github.com/apache/druid/commit/caa7f897579e580fe2905ae16433be8e64b62804", "message": "Merge branch 'master' into docs_fix", "committedDate": "2020-01-04T01:39:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODY5MTgzMg==", "url": "https://github.com/apache/druid/pull/9114#discussion_r368691832", "bodyText": "As someone new to the monitors, I think explaining why you would need this is helpful. Are there specific use cases where I should be monitoring the task counts? Maybe I want to set up alerting on failed jobs?", "author": "suneet-s", "createdAt": "2020-01-20T19:04:50Z", "path": "docs/configuration/index.md", "diffHunk": "@@ -353,6 +353,7 @@ The following monitors are available:\n |`org.apache.druid.segment.realtime.RealtimeMetricsMonitor`|Reports statistics on Realtime processes.|\n |`org.apache.druid.server.metrics.EventReceiverFirehoseMonitor`|Reports how many events have been queued in the EventReceiverFirehose.|\n |`org.apache.druid.server.metrics.QueryCountStatsMonitor`|Reports how many queries have been successful/failed/interrupted.|\n+|`org.apache.druid.server.metrics.TaskCountStatsMonitor`|Reports how many tasks are success/failed/running/pending/waiting.|", "originalCommit": "caa7f897579e580fe2905ae16433be8e64b62804", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQwNjEwNQ==", "url": "https://github.com/apache/druid/pull/9114#discussion_r369406105", "bodyText": "@suneet-s  Thank you very much for your reply!\nSome implementation classes are registered by default and we don't need to register them manually, such as CacheMonitor, JettyMonitor and ExecutorServiceMonitor. But some are not registered by default and need to be configured ourselves, such as QueryCountStatsMonitor and TaskCountStatsMonitor.\nDocs: https://druid.apache.org/docs/latest/operations/metrics.html\nPR: https://github.com/apache/druid/pull/6657/files\nI found a description for QueryCountStatsMonitor, but not for TaskCountStatsMonitor. The description of TaskCountStatsMonitor might have been missed, so I added.\nIn our scenario, kafka has a large number of indexing tasks and a large amount of data that needs to be consumed with low latency. Therefore, task monitoring is very important.\nWe deployed the druid cluster with ambari, so monitoring and alerting were implemented based on ambari-metric-collector.", "author": "tomscut", "createdAt": "2020-01-22T07:38:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODY5MTgzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY2MTQyOA==", "url": "https://github.com/apache/druid/pull/9114#discussion_r418661428", "bodyText": "Suggest ... tasks are success ... -> ... tasks have been succeeded ...", "author": "jihoonson", "createdAt": "2020-05-01T18:00:34Z", "path": "docs/configuration/index.md", "diffHunk": "@@ -353,6 +353,7 @@ The following monitors are available:\n |`org.apache.druid.segment.realtime.RealtimeMetricsMonitor`|Reports statistics on Realtime processes.|\n |`org.apache.druid.server.metrics.EventReceiverFirehoseMonitor`|Reports how many events have been queued in the EventReceiverFirehose.|\n |`org.apache.druid.server.metrics.QueryCountStatsMonitor`|Reports how many queries have been successful/failed/interrupted.|\n+|`org.apache.druid.server.metrics.TaskCountStatsMonitor`|Reports how many tasks are success/failed/running/pending/waiting.|", "originalCommit": "caa7f897579e580fe2905ae16433be8e64b62804", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI4NDEyMw==", "url": "https://github.com/apache/druid/pull/9114#discussion_r438284123", "bodyText": "... or \"have been successful\", to be consistency with the prior row in the table.\nEven better though might be to expand out, for both rows:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            |`org.apache.druid.server.metrics.TaskCountStatsMonitor`|Reports how many tasks are success/failed/running/pending/waiting.|\n          \n          \n            \n            |`org.apache.druid.server.metrics.TaskCountStatsMonitor`|Reports how many tasks have succeeded, failed, or are currently in the running, pending, or waiting state.|", "author": "sthetland", "createdAt": "2020-06-10T17:14:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY2MTQyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI4NjczNQ==", "url": "https://github.com/apache/druid/pull/9114#discussion_r438286735", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            |`org.apache.druid.server.metrics.QueryCountStatsMonitor`|Reports how many queries have been successful/failed/interrupted.|\n          \n          \n            \n            |`org.apache.druid.server.metrics.QueryCountStatsMonitor`|Reports how many queries have succeeded, failed, or were interrupted.|", "author": "sthetland", "createdAt": "2020-06-10T17:19:19Z", "path": "docs/configuration/index.md", "diffHunk": "@@ -353,6 +353,7 @@ The following monitors are available:\n |`org.apache.druid.segment.realtime.RealtimeMetricsMonitor`|Reports statistics on Realtime processes.|\n |`org.apache.druid.server.metrics.EventReceiverFirehoseMonitor`|Reports how many events have been queued in the EventReceiverFirehose.|\n |`org.apache.druid.server.metrics.QueryCountStatsMonitor`|Reports how many queries have been successful/failed/interrupted.|", "originalCommit": "caa7f897579e580fe2905ae16433be8e64b62804", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}