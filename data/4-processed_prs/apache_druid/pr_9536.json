{"pr_number": 9536, "pr_title": "Web console: Clean up spec before reopening in data loader", "pr_createdAt": "2020-03-19T01:54:52Z", "pr_url": "https://github.com/apache/druid/pull/9536", "timeline": [{"oid": "cf2998908316ad916760505da3cd35e6cb4a1f50", "url": "https://github.com/apache/druid/commit/cf2998908316ad916760505da3cd35e6cb4a1f50", "message": "clean up spec before reopening in data loader", "committedDate": "2020-03-19T01:53:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2MDMyOQ==", "url": "https://github.com/apache/druid/pull/9536#discussion_r394760329", "bodyText": "What do you think about adding a test for the data loader to verify a reopened spec can be resubmitted?", "author": "ccaominh", "createdAt": "2020-03-19T02:44:08Z", "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -2967,7 +2968,7 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n \n     try {\n       const resp = await axios.get(`/druid/indexer/v1/task/${initTaskId}`);\n-      this.updateSpec(resp.data.payload);\n+      this.updateSpec(cleanSpec(resp.data.payload));", "originalCommit": "cf2998908316ad916760505da3cd35e6cb4a1f50", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMxMDgxNg==", "url": "https://github.com/apache/druid/pull/9536#discussion_r395310816", "bodyText": "like this: https://github.com/apache/druid/pull/9536/files#diff-ff16ebd3aaa7f975353b795b18c80c2dR104", "author": "vogievetsky", "createdAt": "2020-03-19T20:48:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2MDMyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMzMDQzOA==", "url": "https://github.com/apache/druid/pull/9536#discussion_r395330438", "bodyText": "Yeah, that's a good unit test for the utility method.\nI was thinking it'd also be nice to have something that ensures the load data view itself is behaving as expected (e.g., it should be calling cleanSpec in the right places).", "author": "ccaominh", "createdAt": "2020-03-19T21:29:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2MDMyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTc2NjY4MQ==", "url": "https://github.com/apache/druid/pull/9536#discussion_r395766681", "bodyText": "I ideally we would have a Druid endpoint that can output the same spec that was given to it: #7631\nThe console calling cleanSpec is really a workaround around not having \u261d\ufe0f", "author": "vogievetsky", "createdAt": "2020-03-20T16:52:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2MDMyOQ=="}], "type": "inlineReview"}]}