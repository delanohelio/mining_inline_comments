{"pr_number": 9567, "pr_title": "fix global filter input", "pr_createdAt": "2020-03-26T01:08:27Z", "pr_url": "https://github.com/apache/druid/pull/9567", "timeline": [{"oid": "ed24a2ec5fff3fdc9e300303c4af1843bb26186a", "url": "https://github.com/apache/druid/commit/ed24a2ec5fff3fdc9e300303c4af1843bb26186a", "message": "fix global filter input", "committedDate": "2020-03-26T01:01:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxNzc5Ng==", "url": "https://github.com/apache/druid/pull/9567#discussion_r398817796", "bodyText": "I think this should be newFilterValue || restFilter otherwise the filter disappears after you click Apply", "author": "vogievetsky", "createdAt": "2020-03-26T18:57:23Z", "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -2094,19 +2096,25 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n           />\n           <FormGroup label=\"Extra filter\">\n             <JsonInput\n-              value={restFilter}\n-              onChange={f => {\n+              value={newFilterValue}", "originalCommit": "ed24a2ec5fff3fdc9e300303c4af1843bb26186a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTUxNDUwNg==", "url": "https://github.com/apache/druid/pull/9567#discussion_r399514506", "bodyText": "I am manually clearing the filter by setting newFilter to undefined. I think I can just remove that.", "author": "mcbrewster", "createdAt": "2020-03-27T20:13:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxNzc5Ng=="}], "type": "inlineReview"}, {"oid": "de32e1cc8a408029c157385499175c3017f7b63c", "url": "https://github.com/apache/druid/commit/de32e1cc8a408029c157385499175c3017f7b63c", "message": "remove clear", "committedDate": "2020-03-27T20:12:12Z", "type": "commit"}, {"oid": "312ecfb23c28d1e71a03678680d31b48b703690a", "url": "https://github.com/apache/druid/commit/312ecfb23c28d1e71a03678680d31b48b703690a", "message": "close global filters after clicking apply", "committedDate": "2020-04-01T17:35:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg1NTU4MQ==", "url": "https://github.com/apache/druid/pull/9567#discussion_r401855581", "bodyText": "you need to set this to restFilter from const { restFilter } = splitFilter", "author": "vogievetsky", "createdAt": "2020-04-01T19:26:27Z", "path": "web-console/src/views/load-data-view/load-data-view.tsx", "diffHunk": "@@ -2116,7 +2123,12 @@ export class LoadDataView extends React.PureComponent<LoadDataViewProps, LoadDat\n         <FormGroup>\n           <Button\n             text={`${hasGlobalFilter ? 'Edit' : 'Add'} global filter`}\n-            onClick={() => this.setState({ showGlobalFilter: true })}\n+            onClick={() =>\n+              this.setState({\n+                showGlobalFilter: true,\n+                newFilterValue: deepGet(spec, 'spec.dataSchema.transformSpec.filter'),", "originalCommit": "312ecfb23c28d1e71a03678680d31b48b703690a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "454fda9140a6fead8336f28e29901c84b6e1d533", "url": "https://github.com/apache/druid/commit/454fda9140a6fead8336f28e29901c84b6e1d533", "message": "add restFilter", "committedDate": "2020-04-02T07:33:15Z", "type": "commit"}]}