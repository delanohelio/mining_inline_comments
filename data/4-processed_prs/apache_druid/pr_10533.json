{"pr_number": 10533, "pr_title": "Web console: improve make type preservation in ingestion configs in the data loader", "pr_createdAt": "2020-10-27T03:09:12Z", "pr_url": "https://github.com/apache/druid/pull/10533", "timeline": [{"oid": "8969c6e7cef582bb65f675c1bce98d725108c482", "url": "https://github.com/apache/druid/commit/8969c6e7cef582bb65f675c1bce98d725108c482", "message": "improve validation", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "b9aa89cbbd99c4d0bc253df8a8b13f17e254ce24", "url": "https://github.com/apache/druid/commit/b9aa89cbbd99c4d0bc253df8a8b13f17e254ce24", "message": "move to druid modals", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "26bb2a505474c4b81241e68c3b7aa5d67d119257", "url": "https://github.com/apache/druid/commit/26bb2a505474c4b81241e68c3b7aa5d67d119257", "message": "adjust specs", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "9081100917aa01888d849cf72eb8cb4af35b2976", "url": "https://github.com/apache/druid/commit/9081100917aa01888d849cf72eb8cb4af35b2976", "message": "oneOf", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "46b88fa61ec1cf56358b9844de325b55cce969ad", "url": "https://github.com/apache/druid/commit/46b88fa61ec1cf56358b9844de325b55cce969ad", "message": "move transform", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "ce44c205cb53571386002ade22fdf37a874b721b", "url": "https://github.com/apache/druid/commit/ce44c205cb53571386002ade22fdf37a874b721b", "message": "segment grans", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "14ef365a49bc05867a0cc09e5b34e79ec5ba8357", "url": "https://github.com/apache/druid/commit/14ef365a49bc05867a0cc09e5b34e79ec5ba8357", "message": "tidy up webpack", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "8e9a68902fbdedca4697938d860ae90593b3e4c8", "url": "https://github.com/apache/druid/commit/8e9a68902fbdedca4697938d860ae90593b3e4c8", "message": "add Partitioning", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "e2ef8d29478c372d72316098d28bd89472777a7d", "url": "https://github.com/apache/druid/commit/e2ef8d29478c372d72316098d28bd89472777a7d", "message": "break out druid models", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "a0242333deb15d4c8f814075445d0fadec00cc96", "url": "https://github.com/apache/druid/commit/a0242333deb15d4c8f814075445d0fadec00cc96", "message": "tidy up", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "2590de67e58048e9123cc8a5ca008eadd71e00a8", "url": "https://github.com/apache/druid/commit/2590de67e58048e9123cc8a5ca008eadd71e00a8", "message": "rename to Expression", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "941f1bc0f452306351b074b0e3b6511e4d9c2c32", "url": "https://github.com/apache/druid/commit/941f1bc0f452306351b074b0e3b6511e4d9c2c32", "message": "move druid time", "committedDate": "2020-10-26T23:33:51Z", "type": "commit"}, {"oid": "b7007d5df71ac1cbf67498dd3c8dd014ad5424cc", "url": "https://github.com/apache/druid/commit/b7007d5df71ac1cbf67498dd3c8dd014ad5424cc", "message": "cleanup", "committedDate": "2020-10-26T23:53:44Z", "type": "commit"}, {"oid": "608a8acccb09e087caec4bd2076a7a998968edd9", "url": "https://github.com/apache/druid/commit/608a8acccb09e087caec4bd2076a7a998968edd9", "message": "update format", "committedDate": "2020-10-27T00:11:38Z", "type": "commit"}, {"oid": "63adebc4c08fe7cd35e7884b1a4fb1a13908ba93", "url": "https://github.com/apache/druid/commit/63adebc4c08fe7cd35e7884b1a4fb1a13908ba93", "message": "better detail", "committedDate": "2020-10-27T03:08:27Z", "type": "commit"}, {"oid": "d84b21b1a993a0af215b26a4f5cec1f564ee9201", "url": "https://github.com/apache/druid/commit/d84b21b1a993a0af215b26a4f5cec1f564ee9201", "message": "fix e2e test", "committedDate": "2020-10-27T06:25:21Z", "type": "commit"}, {"oid": "13628967ed279dc7e3de14eb7a0bab5af07f6175", "url": "https://github.com/apache/druid/commit/13628967ed279dc7e3de14eb7a0bab5af07f6175", "message": "remove forceGuaranteedRollup from e2e tests", "committedDate": "2020-10-27T17:48:37Z", "type": "commit"}, {"oid": "a4ea7a6b2701246a7a3e93fa2a2fbe46e0895960", "url": "https://github.com/apache/druid/commit/a4ea7a6b2701246a7a3e93fa2a2fbe46e0895960", "message": "clean up imports", "committedDate": "2020-10-28T00:17:47Z", "type": "commit"}, {"oid": "05c442758787b5133ad20bbd5cd9de314a3ddb52", "url": "https://github.com/apache/druid/commit/05c442758787b5133ad20bbd5cd9de314a3ddb52", "message": "shardSpec -> shard_spec", "committedDate": "2020-10-29T01:41:51Z", "type": "commit"}, {"oid": "054a29abb18083e3e34e751df9085d00f65995a6", "url": "https://github.com/apache/druid/commit/054a29abb18083e3e34e751df9085d00f65995a6", "message": "fix css", "committedDate": "2020-10-29T05:25:42Z", "type": "commit"}, {"oid": "52784797fc4eb773c52153550983a2951202f809", "url": "https://github.com/apache/druid/commit/52784797fc4eb773c52153550983a2951202f809", "message": "adjust snapshot", "committedDate": "2020-10-29T17:48:03Z", "type": "commit"}, {"oid": "d57c9e296d5c3b2902c0b3c024acd27d5e1e1b27", "url": "https://github.com/apache/druid/commit/d57c9e296d5c3b2902c0b3c024acd27d5e1e1b27", "message": "add granularity to segments view", "committedDate": "2020-10-29T18:53:33Z", "type": "commit"}, {"oid": "0d02c778c6d98c907fe042c64f8df413efa1c728", "url": "https://github.com/apache/druid/commit/0d02c778c6d98c907fe042c64f8df413efa1c728", "message": "rename to Time span", "committedDate": "2020-10-29T20:43:29Z", "type": "commit"}, {"oid": "50f7a55778174aee775337f4302884087b47e5bb", "url": "https://github.com/apache/druid/commit/50f7a55778174aee775337f4302884087b47e5bb", "message": "use OFFSET in segments view query", "committedDate": "2020-10-29T22:18:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMzNjU4OQ==", "url": "https://github.com/apache/druid/pull/10533#discussion_r515336589", "bodyText": "does this info text always display 'parquet' column even when shown for orc and avro_ocf?", "author": "clintropolis", "createdAt": "2020-10-30T19:41:59Z", "path": "web-console/src/druid-models/input-format.tsx", "diffHunk": "@@ -0,0 +1,138 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+import React from 'react';\n+\n+import { AutoForm, ExternalLink, Field } from '../components';\n+import { getLink } from '../links';\n+import { oneOf } from '../utils';\n+\n+import { FlattenSpec } from './flatten-spec';\n+\n+export interface InputFormat {\n+  type: string;\n+  findColumnsFromHeader?: boolean;\n+  skipHeaderRows?: number;\n+  columns?: string[];\n+  listDelimiter?: string;\n+  pattern?: string;\n+  function?: string;\n+  flattenSpec?: FlattenSpec;\n+  keepNullColumns?: boolean;\n+}\n+\n+export const INPUT_FORMAT_FIELDS: Field<InputFormat>[] = [\n+  {\n+    name: 'type',\n+    label: 'Input format',\n+    type: 'string',\n+    suggestions: ['json', 'csv', 'tsv', 'regex', 'parquet', 'orc', 'avro_ocf'],\n+    required: true,\n+    info: (\n+      <>\n+        <p>The parser used to parse the data.</p>\n+        <p>\n+          For more information see{' '}\n+          <ExternalLink href={`${getLink('DOCS')}/ingestion/data-formats.html`}>\n+            the documentation\n+          </ExternalLink>\n+          .\n+        </p>\n+      </>\n+    ),\n+  },\n+  {\n+    name: 'pattern',\n+    type: 'string',\n+    required: true,\n+    defined: (p: InputFormat) => p.type === 'regex',\n+  },\n+  {\n+    name: 'function',\n+    type: 'string',\n+    required: true,\n+    defined: (p: InputFormat) => p.type === 'javascript',\n+  },\n+  {\n+    name: 'findColumnsFromHeader',\n+    type: 'boolean',\n+    required: true,\n+    defined: (p: InputFormat) => oneOf(p.type, 'csv', 'tsv'),\n+  },\n+  {\n+    name: 'skipHeaderRows',\n+    type: 'number',\n+    defaultValue: 0,\n+    defined: (p: InputFormat) => oneOf(p.type, 'csv', 'tsv'),\n+    min: 0,\n+    info: (\n+      <>\n+        If both skipHeaderRows and hasHeaderRow options are set, skipHeaderRows is first applied.\n+        For example, if you set skipHeaderRows to 2 and hasHeaderRow to true, Druid will skip the\n+        first two lines and then extract column information from the third line.\n+      </>\n+    ),\n+  },\n+  {\n+    name: 'columns',\n+    type: 'string-array',\n+    required: (p: InputFormat) =>\n+      (oneOf(p.type, 'csv', 'tsv') && !p.findColumnsFromHeader) || p.type === 'regex',\n+    defined: (p: InputFormat) =>\n+      (oneOf(p.type, 'csv', 'tsv') && !p.findColumnsFromHeader) || p.type === 'regex',\n+  },\n+  {\n+    name: 'delimiter',\n+    type: 'string',\n+    defaultValue: '\\t',\n+    defined: (p: InputFormat) => p.type === 'tsv',\n+    info: <>A custom delimiter for data values.</>,\n+  },\n+  {\n+    name: 'listDelimiter',\n+    type: 'string',\n+    defined: (p: InputFormat) => oneOf(p.type, 'csv', 'tsv', 'regex'),\n+    info: <>A custom delimiter for multi-value dimensions.</>,\n+  },\n+  {\n+    name: 'binaryAsString',\n+    type: 'boolean',\n+    defaultValue: false,\n+    defined: (p: InputFormat) => oneOf(p.type, 'parquet', 'orc', 'avro_ocf'),\n+    info: (\n+      <>\n+        Specifies if the bytes parquet column which is not logically marked as a string or enum type\n+        should be treated as a UTF-8 encoded string.\n+      </>\n+    ),", "originalCommit": "50f7a55778174aee775337f4302884087b47e5bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM5Mjc0Mg==", "url": "https://github.com/apache/druid/pull/10533#discussion_r515392742", "bodyText": "yup, that should be fixed", "author": "vogievetsky", "createdAt": "2020-10-30T21:34:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMzNjU4OQ=="}], "type": "inlineReview"}, {"oid": "b91dcafddc6f61885ca7398c7c14790a73aec11d", "url": "https://github.com/apache/druid/commit/b91dcafddc6f61885ca7398c7c14790a73aec11d", "message": "update doc links", "committedDate": "2020-10-30T22:05:23Z", "type": "commit"}, {"oid": "c85350615ade44c8ccbdff367273461f06aa6829", "url": "https://github.com/apache/druid/commit/c85350615ade44c8ccbdff367273461f06aa6829", "message": "simplify require", "committedDate": "2020-10-30T22:23:22Z", "type": "commit"}, {"oid": "ebb7596ae6e9fa061580ad98a6a55e87b641508c", "url": "https://github.com/apache/druid/commit/ebb7596ae6e9fa061580ad98a6a55e87b641508c", "message": "more oneOf", "committedDate": "2020-10-30T22:55:32Z", "type": "commit"}]}