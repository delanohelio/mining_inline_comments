{"pr_number": 10647, "pr_title": "Web console: reflect the changes to interval requirement in the data loader flow", "pr_createdAt": "2020-12-07T00:03:12Z", "pr_url": "https://github.com/apache/druid/pull/10647", "timeline": [{"oid": "8c235208e6358ee0659029be198578bab75d5f37", "url": "https://github.com/apache/druid/commit/8c235208e6358ee0659029be198578bab75d5f37", "message": "no need for intervals", "committedDate": "2020-12-04T06:01:05Z", "type": "commit"}, {"oid": "14b8f7f00040271e36f115b27944b39a72ef74bf", "url": "https://github.com/apache/druid/commit/14b8f7f00040271e36f115b27944b39a72ef74bf", "message": "don't set redundant fields", "committedDate": "2020-12-06T23:26:27Z", "type": "commit"}, {"oid": "04a2a2fbadab42ec9f5edd53e74564de2eaa7806", "url": "https://github.com/apache/druid/commit/04a2a2fbadab42ec9f5edd53e74564de2eaa7806", "message": "fix tests", "committedDate": "2020-12-06T23:54:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY4NDI2MQ==", "url": "https://github.com/apache/druid/pull/10647#discussion_r537684261", "bodyText": "Do we need to show time intervals in the partitioning step? Seems like we have a duplicate function in the \"global filter\" in the filtering step (probably here). I prefer the intervals filter in the filtering step because it's a filter.", "author": "jihoonson", "createdAt": "2020-12-07T17:20:47Z", "path": "web-console/src/druid-models/ingestion-spec.tsx", "diffHunk": "@@ -1546,17 +1557,41 @@ export function getPartitionRelatedTuningSpecFormFields(\n         },\n       ];\n \n+      if (oneOf(deepGet(spec, 'spec.tuningConfig.partitionsSpec.type'), 'hashed', 'single_dim')) {\n+        parallelFields.push({", "originalCommit": "04a2a2fbadab42ec9f5edd53e74564de2eaa7806", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY5MTc4MQ==", "url": "https://github.com/apache/druid/pull/10647#discussion_r537691781", "bodyText": "You are correct and I debated taking them out of the partition step completely but decided to leave them (redundantly) and have them folded under Show more. My understanding it that setting intervals still has an effect on how many ingestion tasks are spawned - so it is still relevant (although unlikely) here. What do you think?", "author": "vogievetsky", "createdAt": "2020-12-07T17:31:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY4NDI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzczMDQwMQ==", "url": "https://github.com/apache/druid/pull/10647#discussion_r537730401", "bodyText": "I see. So, this is more for ingestion performance tuning rather than filtering. Performance tuning guide seems nice to have. Ideally, it would be great if it could be done in a user-friendly way in the web console, which I have no idea on how. The best I can think of is adding a documentation for ingestion performance tuning and linking them in the web console. Maybe we can do it as a follow-up.\nGoing back to this change, it seems sort of reasonable to me in a sense that it gives some information for performance tuning. One comment I have now is that I was confused about how to set intervals with dynamic partitioning because the Show more button doesn't show up. Maybe we can show a warning or a hint text directly (currently the description shows up when you click the button) that says you can make your ingestion job faster by setting intervals in the filtering step? I know this could be a bad UX but at least consistent across partitioning types.", "author": "jihoonson", "createdAt": "2020-12-07T18:27:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY4NDI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzc5NzM3NA==", "url": "https://github.com/apache/druid/pull/10647#discussion_r537797374", "bodyText": "\ud83d\udc4d will do", "author": "vogievetsky", "createdAt": "2020-12-07T20:08:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY4NDI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTUxOTcyOA==", "url": "https://github.com/apache/druid/pull/10647#discussion_r539519728", "bodyText": "@vogievetsky and I talked offline. The intervals is a sort of filter but it's actually more about partitioning. The filtering can happen as a side effect of partitioning. The below is a quote from our doc.\n\nA list of intervals describing what time chunks of segments should be created. If type is set to uniform, this list will be broken up and rounded-off based on the segmentGranularity. If type is set to arbitrary, this list will be used as-is.\n\nSo, we decided to move it back to the partitioning step.", "author": "jihoonson", "createdAt": "2020-12-09T17:50:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzY4NDI2MQ=="}], "type": "inlineReview"}, {"oid": "11f7d6a3bba7f0642ee7d2fcf3596b8e604349b9", "url": "https://github.com/apache/druid/commit/11f7d6a3bba7f0642ee7d2fcf3596b8e604349b9", "message": "better filter control", "committedDate": "2020-12-07T21:20:20Z", "type": "commit"}, {"oid": "c182c6503e502eccab9b6fa57a4f3db5118a988a", "url": "https://github.com/apache/druid/commit/c182c6503e502eccab9b6fa57a4f3db5118a988a", "message": "work with not", "committedDate": "2020-12-07T21:32:23Z", "type": "commit"}, {"oid": "3512956e10221b4ef6774a12bc3a5e791b0d33cf", "url": "https://github.com/apache/druid/commit/3512956e10221b4ef6774a12bc3a5e791b0d33cf", "message": "wrap callout with form group", "committedDate": "2020-12-07T22:55:23Z", "type": "commit"}, {"oid": "824e3eb86e36d4032655008378cfab6b0e1c5ecc", "url": "https://github.com/apache/druid/commit/824e3eb86e36d4032655008378cfab6b0e1c5ecc", "message": "update snapshot", "committedDate": "2020-12-07T23:06:26Z", "type": "commit"}, {"oid": "dfc583cd1f5a217d017c9590756413964f9a1c4c", "url": "https://github.com/apache/druid/commit/dfc583cd1f5a217d017c9590756413964f9a1c4c", "message": "add split hint", "committedDate": "2020-12-08T01:50:28Z", "type": "commit"}, {"oid": "01ddb76b526ef26d016f879508ec2c6698e6bd89", "url": "https://github.com/apache/druid/commit/01ddb76b526ef26d016f879508ec2c6698e6bd89", "message": "Merge remote-tracking branch 'upstream/master' into pg2", "committedDate": "2020-12-08T17:32:43Z", "type": "commit"}, {"oid": "076308b4d5492828c47b24690e46b8ac52732c46", "url": "https://github.com/apache/druid/commit/076308b4d5492828c47b24690e46b8ac52732c46", "message": "highlight issues with spec", "committedDate": "2020-12-08T17:46:58Z", "type": "commit"}, {"oid": "1f02aff0638ff8a594594ba9fed13ec239dd6419", "url": "https://github.com/apache/druid/commit/1f02aff0638ff8a594594ba9fed13ec239dd6419", "message": "fixes", "committedDate": "2020-12-08T18:41:36Z", "type": "commit"}, {"oid": "de7ec2761f7001024f2346925c15a50b4b7b5a41", "url": "https://github.com/apache/druid/commit/de7ec2761f7001024f2346925c15a50b4b7b5a41", "message": "fix default value", "committedDate": "2020-12-08T19:05:42Z", "type": "commit"}, {"oid": "596a3b8fd9b654c2691eb583498b85057d7c663f", "url": "https://github.com/apache/druid/commit/596a3b8fd9b654c2691eb583498b85057d7c663f", "message": "move intervals back to partition step", "committedDate": "2020-12-08T21:03:15Z", "type": "commit"}, {"oid": "4696d9c13d873b5a22a9ee00cc57a401617278ea", "url": "https://github.com/apache/druid/commit/4696d9c13d873b5a22a9ee00cc57a401617278ea", "message": "work with all sorts of chars", "committedDate": "2020-12-08T23:15:17Z", "type": "commit"}, {"oid": "6f14ed257eb59a07ed402cff6da3f65887db9395", "url": "https://github.com/apache/druid/commit/6f14ed257eb59a07ed402cff6da3f65887db9395", "message": "fix enabled view", "committedDate": "2020-12-09T02:17:12Z", "type": "commit"}]}