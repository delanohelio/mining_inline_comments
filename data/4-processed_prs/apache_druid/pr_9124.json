{"pr_number": 9124, "pr_title": "Add avro dependency to parquet extension", "pr_createdAt": "2020-01-03T23:26:51Z", "pr_url": "https://github.com/apache/druid/pull/9124", "timeline": [{"oid": "59ab5abc56c1d3c1e1f386f300c8b940c6ffee45", "url": "https://github.com/apache/druid/commit/59ab5abc56c1d3c1e1f386f300c8b940c6ffee45", "message": "Add avro dependency to parquet extension\n\nIf the parquet extension is loaded and an ingestionSpec uses the older format\nspecifying a 'parser' instead of using an 'inputFormat' the job fails\nwith the following error\n\njava.lang.TypeNotPresentException: Type org.apache.avro.generic.GenericRecord not present\n\nThis change removes the exclusion of the avro package so that the missing\nclass can be found.", "committedDate": "2020-01-03T23:18:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk5MzgxMg==", "url": "https://github.com/apache/druid/pull/9124#discussion_r362993812", "bodyText": "See lines 83 - 86 there is another exclusion for this library. I'm not sure if that exclusion should be removed as well.", "author": "suneet-s", "createdAt": "2020-01-03T23:30:19Z", "path": "extensions-core/parquet-extensions/pom.xml", "diffHunk": "@@ -209,10 +205,6 @@\n           <groupId>org.apache.yetus</groupId>\n           <artifactId>audience-annotations</artifactId>\n         </exclusion>\n-        <exclusion>\n-          <groupId>org.apache.avro</groupId>\n-          <artifactId>avro</artifactId>\n-        </exclusion>", "originalCommit": "59ab5abc56c1d3c1e1f386f300c8b940c6ffee45", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk5OTQ3MA==", "url": "https://github.com/apache/druid/pull/9124#discussion_r362999470", "bodyText": "It can be removed as well, the top-level explicit include would override the avro versions that these deps try to pull in", "author": "jon-wei", "createdAt": "2020-01-04T00:11:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk5MzgxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk5NjIwNg==", "url": "https://github.com/apache/druid/pull/9124#discussion_r362996206", "bodyText": "How about keeping this in, but without <scope>provided</scope>.\nIt seems like the dependency really is needed, but it is not provided, so it should have normal scope.", "author": "gianm", "createdAt": "2020-01-03T23:46:49Z", "path": "extensions-core/parquet-extensions/pom.xml", "diffHunk": "@@ -411,11 +403,6 @@\n       <artifactId>api-util</artifactId>\n       <scope>provided</scope>\n     </dependency>\n-    <dependency>\n-      <groupId>org.apache.avro</groupId>\n-      <artifactId>avro</artifactId>\n-      <scope>provided</scope>", "originalCommit": "59ab5abc56c1d3c1e1f386f300c8b940c6ffee45", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk5ODMzOA==", "url": "https://github.com/apache/druid/pull/9124#discussion_r362998338", "bodyText": "makes sense to me. Done", "author": "suneet-s", "createdAt": "2020-01-04T00:02:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk5NjIwNg=="}], "type": "inlineReview"}, {"oid": "592e311a0d6e21e2f5445cd14f5883fcb86278e0", "url": "https://github.com/apache/druid/commit/592e311a0d6e21e2f5445cd14f5883fcb86278e0", "message": "Address review comments and add dependency version", "committedDate": "2020-01-04T00:22:37Z", "type": "commit"}]}