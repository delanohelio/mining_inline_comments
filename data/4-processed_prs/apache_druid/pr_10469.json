{"pr_number": 10469, "pr_title": "Test UI to trigger auto compaction", "pr_createdAt": "2020-10-03T00:05:58Z", "pr_url": "https://github.com/apache/druid/pull/10469", "timeline": [{"oid": "4ea7dc00293e7b67160aaf6092da26648a2ac8f7", "url": "https://github.com/apache/druid/commit/4ea7dc00293e7b67160aaf6092da26648a2ac8f7", "message": "Test UI to trigger auto compaction\n\nIn the web console E2E tests, Use the new UI to trigger auto compaction\ninstead of calling the REST API directly so that the UI is covered by\ntests.", "committedDate": "2020-10-02T23:58:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NzIzNA==", "url": "https://github.com/apache/druid/pull/10469#discussion_r499157234", "bodyText": "Do you think that we should make an allowance in the UI and have a 'testing' mode that zeroes out all the delays in all the popovers in the UI hoverCloseDelay={0} hoverOpenDelay={0}. I am imagining that you could evaluate some sort of enterTestingMode() function in the app context and it will do this and other things. Not for this PR but wanted to get your thoughts on it.", "author": "vogievetsky", "createdAt": "2020-10-03T15:27:59Z", "path": "web-console/e2e-tests/component/datasources/overview.ts", "diffHunk": "@@ -116,6 +124,23 @@ export class DatasourcesOverview {\n \n     const editActions = await this.page.$$('span[icon=wrench]');\n     editActions[index].click();\n+    await this.waitForPopupMenu();\n+  }\n+\n+  private async waitForPopupMenu(): Promise<void> {\n+    await this.page.waitFor(1000); // https://blueprintjs.com/docs/#core/components/popover.testing", "originalCommit": "4ea7dc00293e7b67160aaf6092da26648a2ac8f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE5MjUxNA==", "url": "https://github.com/apache/druid/pull/10469#discussion_r499192514", "bodyText": "After incorporating the changes with the upgraded playwright version, it seems this fixed sleep is no longer needed to make the E2E test reliable, so I removed it.\nAlthough it may not be needed for E2E tests, I think your suggestion to have a testing mode for components with Popovers could be useful for unit tests though.", "author": "ccaominh", "createdAt": "2020-10-04T00:12:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NzIzNA=="}], "type": "inlineReview"}, {"oid": "3ef609f1c0a1605b681ce79af9b944b6a2e28b38", "url": "https://github.com/apache/druid/commit/3ef609f1c0a1605b681ce79af9b944b6a2e28b38", "message": "Merge remote-tracking branch 'upstream/master' into test-autocompaction-trigger-ui", "committedDate": "2020-10-04T00:06:13Z", "type": "commit"}]}