{"pr_number": 9310, "pr_title": "Remove EasyMock dependency from CalciteTests.", "pr_createdAt": "2020-02-04T21:32:29Z", "pr_url": "https://github.com/apache/druid/pull/9310", "timeline": [{"oid": "759282afb367fd7bca2d85534ec013b214c4cb4d", "url": "https://github.com/apache/druid/commit/759282afb367fd7bca2d85534ec013b214c4cb4d", "message": "Remove EasyMock dependency from CalciteTests.\n\nUseful because CalciteTests is used by other modules (e.g. druid-benchmarks)\nand we don't want them to have to pull in EasyMock.", "committedDate": "2020-02-04T21:34:52Z", "type": "commit"}, {"oid": "759282afb367fd7bca2d85534ec013b214c4cb4d", "url": "https://github.com/apache/druid/commit/759282afb367fd7bca2d85534ec013b214c4cb4d", "message": "Remove EasyMock dependency from CalciteTests.\n\nUseful because CalciteTests is used by other modules (e.g. druid-benchmarks)\nand we don't want them to have to pull in EasyMock.", "committedDate": "2020-02-04T21:34:52Z", "type": "forcePushed"}, {"oid": "a1a4811a12f9e3f0151323936555ad49d32982fc", "url": "https://github.com/apache/druid/commit/a1a4811a12f9e3f0151323936555ad49d32982fc", "message": "CalciteTests no longer needs curator-x-discovery either.", "committedDate": "2020-02-05T03:22:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2MTExOA==", "url": "https://github.com/apache/druid/pull/9310#discussion_r375061118", "bodyText": "Hmm, I've got an open PR that is using EasyMock heavily to allow for testing sql queries on system tables....\nhttps://github.com/apache/druid/pull/6974/files#diff-ed8d85db2f346595b7faf34f45a78fd6R870\nAny ideas on what we should do?", "author": "clintropolis", "createdAt": "2020-02-05T05:07:03Z", "path": "sql/src/test/java/org/apache/druid/sql/calcite/util/CalciteTests.java", "diffHunk": "@@ -129,20 +133,24 @@\n import org.apache.druid.sql.calcite.view.ViewManager;\n import org.apache.druid.timeline.DataSegment;\n import org.apache.druid.timeline.partition.LinearShardSpec;\n-import org.easymock.EasyMock;", "originalCommit": "a1a4811a12f9e3f0151323936555ad49d32982fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2MjM3OA==", "url": "https://github.com/apache/druid/pull/9310#discussion_r375062378", "bodyText": "Hmm, probably either modify FakeDruidNodeDiscoveryProvider to return actual servers (it's a simple thing to subclass), or restore EasyMock in druid-sql and find another way to solve the original problem (#9308 (comment)) \u2014\u00a0a suppression or something else.", "author": "gianm", "createdAt": "2020-02-05T05:13:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2MTExOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2MjcwNA==", "url": "https://github.com/apache/druid/pull/9310#discussion_r375062704", "bodyText": "If you want to do the former, we can merge this and then you can update your PR; if you want to do the latter, I can change this patch to add a suppression. I'm ok either way so let me know what you think is best.\n(But check out the thread on dev@druid about EasyMock first \ud83d\ude42)", "author": "gianm", "createdAt": "2020-02-05T05:15:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2MTExOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2NDUxNw==", "url": "https://github.com/apache/druid/pull/9310#discussion_r375064517", "bodyText": "To do the former i would also need to implement FakeDruidNodeDiscovery too I think for the provider to provide to get the list of servers.. which i guess isn't that big a deal probably...", "author": "clintropolis", "createdAt": "2020-02-05T05:23:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA2MTExOA=="}], "type": "inlineReview"}]}