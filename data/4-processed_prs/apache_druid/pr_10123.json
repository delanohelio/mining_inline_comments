{"pr_number": 10123, "pr_title": "Fix UnknownComplexTypeColumn#makeVectorObjectSelector. Add a warning \u2026", "pr_createdAt": "2020-07-01T21:50:38Z", "pr_url": "https://github.com/apache/druid/pull/10123", "timeline": [{"oid": "d9039b00cc092655532573679086e51fb2b0c1c2", "url": "https://github.com/apache/druid/commit/d9039b00cc092655532573679086e51fb2b0c1c2", "message": "Fix UnknownComplexTypeColumn#makeVectorObjectSelector. Add a warning message to indicate failure in deserializing", "committedDate": "2020-07-01T21:49:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY0MjY1NQ==", "url": "https://github.com/apache/druid/pull/10123#discussion_r448642655", "bodyText": "Sorry I just looked even closer, I now think the actual best place for this log is probably in ComplexColumnPartSerde, in the getDeserializer method if serde is null. This way you can include the 'typeName' of the missing type, which isn't available in SimpleColumnHolder, my bad.", "author": "clintropolis", "createdAt": "2020-07-01T22:11:46Z", "path": "processing/src/main/java/org/apache/druid/segment/column/SimpleColumnHolder.java", "diffHunk": "@@ -61,6 +63,8 @@\n           capabilities.getType() == ValueType.COMPLEX,\n           \"Only complex column types can have nullable column suppliers\"\n       );\n+      log.warn(\"Null column supplier for a complex column was passed which indicates \"", "originalCommit": "d9039b00cc092655532573679086e51fb2b0c1c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY0NjY0Mg==", "url": "https://github.com/apache/druid/pull/10123#discussion_r448646642", "bodyText": "Ah, yes. Would the better place to log this warning be then in the constructor itself since that is the first place where serde gets set to null?", "author": "samarthjain", "createdAt": "2020-07-01T22:23:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY0MjY1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY0NzA5OQ==", "url": "https://github.com/apache/druid/pull/10123#discussion_r448647099", "bodyText": "Either place seems fine to me", "author": "clintropolis", "createdAt": "2020-07-01T22:24:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY0MjY1NQ=="}], "type": "inlineReview"}, {"oid": "1171515d7b85f4a60496a67b34b31725278f2b2c", "url": "https://github.com/apache/druid/commit/1171515d7b85f4a60496a67b34b31725278f2b2c", "message": "Improve and move warning message to ComplexColumnPartSerde", "committedDate": "2020-07-01T22:31:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY4Mjk0Nw==", "url": "https://github.com/apache/druid/pull/10123#discussion_r448682947", "bodyText": "I think this is going to fail Travis for unused import", "author": "clintropolis", "createdAt": "2020-07-02T00:26:44Z", "path": "processing/src/main/java/org/apache/druid/segment/column/SimpleColumnHolder.java", "diffHunk": "@@ -21,6 +21,7 @@\n \n import com.google.common.base.Preconditions;\n import com.google.common.base.Supplier;\n+import org.apache.druid.java.util.common.logger.Logger;", "originalCommit": "1171515d7b85f4a60496a67b34b31725278f2b2c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY4NDg1NA==", "url": "https://github.com/apache/druid/pull/10123#discussion_r448684854", "bodyText": "oh no! I just pushed a commit to remove the import.", "author": "samarthjain", "createdAt": "2020-07-02T00:34:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODY4Mjk0Nw=="}], "type": "inlineReview"}, {"oid": "c25f194fad593ea520812e943baf85fef720a93a", "url": "https://github.com/apache/druid/commit/c25f194fad593ea520812e943baf85fef720a93a", "message": "Remove unused import", "committedDate": "2020-07-02T00:31:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODcwOTk0Mg==", "url": "https://github.com/apache/druid/pull/10123#discussion_r448709942", "bodyText": "nit: chosing -> choosing", "author": "clintropolis", "createdAt": "2020-07-02T02:13:51Z", "path": "processing/src/main/java/org/apache/druid/segment/serde/ComplexColumnPartSerde.java", "diffHunk": "@@ -33,11 +34,17 @@\n   @Nullable\n   private final ComplexMetricSerde serde;\n   private final Serializer serializer;\n+  private static final Logger log = new Logger(ComplexColumnPartSerde.class);\n \n   private ComplexColumnPartSerde(String typeName, Serializer serializer)\n   {\n     this.typeName = typeName;\n     this.serde = ComplexMetrics.getSerdeForType(typeName);\n+    if (this.serde == null) {\n+      // Not chosing to fail here since this gets handled as", "originalCommit": "c25f194fad593ea520812e943baf85fef720a93a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODcyMjc0NQ==", "url": "https://github.com/apache/druid/pull/10123#discussion_r448722745", "bodyText": "Thanks. I pushed a commit to fix the typo. Will go ahead and merge to master.", "author": "samarthjain", "createdAt": "2020-07-02T03:06:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODcwOTk0Mg=="}], "type": "inlineReview"}, {"oid": "9d7c235d62271ca11b024db4061ad4a4e6d359be", "url": "https://github.com/apache/druid/commit/9d7c235d62271ca11b024db4061ad4a4e6d359be", "message": "Fix typo", "committedDate": "2020-07-02T03:04:19Z", "type": "commit"}]}