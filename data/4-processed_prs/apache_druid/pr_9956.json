{"pr_number": 9956, "pr_title": "Segment timeline doesn't show results older than 3 months", "pr_createdAt": "2020-05-30T23:30:39Z", "pr_url": "https://github.com/apache/druid/pull/9956", "timeline": [{"oid": "f1b14c587f09d651b0e9f9ccd604cb22643ca269", "url": "https://github.com/apache/druid/commit/f1b14c587f09d651b0e9f9ccd604cb22643ca269", "message": "Segment timeline doesn't show results older than 3 months", "committedDate": "2020-05-30T23:27:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM1MTM4MQ==", "url": "https://github.com/apache/druid/pull/9956#discussion_r433351381", "bodyText": "Please add some test cases to web-console/src/components/segment-timeline/segment-timeline.spec.tsx:\n\nDefault timeSpan value of 3\nCustom timeSpan value (that is different from default)", "author": "ccaominh", "createdAt": "2020-06-01T16:34:44Z", "path": "web-console/src/components/segment-timeline/segment-timeline.tsx", "diffHunk": "@@ -394,14 +394,16 @@ ORDER BY \"start\" DESC`;\n   onTimeSpanChange = (e: any) => {\n     const dStart = new Date();\n     const dEnd = new Date();\n-    dStart.setMonth(dStart.getMonth() - e);\n+    const capabilities = this.props.capabilities;\n+    const timeSpan = parseInt(e, 10) || 3;", "originalCommit": "f1b14c587f09d651b0e9f9ccd604cb22643ca269", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk1OTIwMA==", "url": "https://github.com/apache/druid/pull/9956#discussion_r445959200", "bodyText": "Something like this is what I had in mind: master...ccaominh:fix-console-segment-timeline-query-timespan. If your fix is reverted so that this.dataQueryManager.rerunLastQuery() is called instead of this.dataQueryManager.runQuery(), then the test that selects a new period will fail.", "author": "ccaominh", "createdAt": "2020-06-26T04:20:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM1MTM4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMxMTgxMQ==", "url": "https://github.com/apache/druid/pull/9956#discussion_r446311811", "bodyText": "Thank you for putting this together, this makes sense.", "author": "2bethere", "createdAt": "2020-06-26T17:19:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM1MTM4MQ=="}], "type": "inlineReview"}, {"oid": "7d6232d1071c2cb471e252b2e22e2b1b19b23963", "url": "https://github.com/apache/druid/commit/7d6232d1071c2cb471e252b2e22e2b1b19b23963", "message": "Merge branch 'master' of github.com:apache/druid", "committedDate": "2020-06-22T22:05:58Z", "type": "commit"}, {"oid": "e8cc616bd0430a2ed24543e4d41ae7ffe7e49487", "url": "https://github.com/apache/druid/commit/e8cc616bd0430a2ed24543e4d41ae7ffe7e49487", "message": "Merge branch 'master' of github.com:apache/druid", "committedDate": "2020-06-27T21:17:42Z", "type": "commit"}, {"oid": "c75db09d11d989bca399489f877b0ae12e59fee8", "url": "https://github.com/apache/druid/commit/c75db09d11d989bca399489f877b0ae12e59fee8", "message": "Adoption testing patch for web segment timeline view and also refactoring default time config", "committedDate": "2020-06-27T22:36:53Z", "type": "commit"}]}