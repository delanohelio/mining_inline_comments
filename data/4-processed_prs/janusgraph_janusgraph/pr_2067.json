{"pr_number": 2067, "pr_title": "Fix gremlin-server should run inmemory by default", "pr_createdAt": "2020-04-01T19:25:56Z", "pr_url": "https://github.com/JanusGraph/janusgraph/pull/2067", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5MTQzNA==", "url": "https://github.com/JanusGraph/janusgraph/pull/2067#discussion_r401891434", "bodyText": "I think we should think of removing all different gremlin-server.yaml and just have a single the user just have to decide between janusgraph-*.properties files. This would be a major breaking change.\nBesides, this is also a breaking change and should be mentioned in the changelog.", "author": "farodin91", "createdAt": "2020-04-01T20:32:09Z", "path": "janusgraph-dist/src/assembly/static/conf/gremlin-server/gremlin-server.yaml", "diffHunk": "@@ -17,7 +17,7 @@ port: 8182\n scriptEvaluationTimeout: 30000\n channelizer: org.apache.tinkerpop.gremlin.server.channel.WebSocketChannelizer\n graphs: {\n-  graph: conf/gremlin-server/janusgraph-cql-es-server.properties", "originalCommit": "80fd717263c2ca706fde8b77e61bdfc5c6402dfa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5ODQ1Mg==", "url": "https://github.com/JanusGraph/janusgraph/pull/2067#discussion_r401898452", "bodyText": "Agree. We should think about removing them but I think we should not spend much time on the current release and think about adding those changes in future releases.\nI have added a note to the changelog", "author": "porunov", "createdAt": "2020-04-01T20:45:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5MTQzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjA3MjIzNQ==", "url": "https://github.com/JanusGraph/janusgraph/pull/2067#discussion_r402072235", "bodyText": "If you change this behaviour here, you have to update janusgraph.sh. The janusgraph.sh uses the gremlin-server.yaml and expects cql-es is started.", "author": "farodin91", "createdAt": "2020-04-02T06:10:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5MTQzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjExMjIyNw==", "url": "https://github.com/JanusGraph/janusgraph/pull/2067#discussion_r402112227", "bodyText": "I think the best solution for this PR would be to let janusgraph.sh start gremlin-server.sh explicitly with a cql-es YAML. Since cql-es was the default until now, there is no YAML for that. So, we should create another one and then use that in janusgraph.sh.\nThat way, users of janusgraph.sh wouldn't notice a difference and gremlin-server.sh can work without CQL and ES in the truncated distribution.", "author": "FlorianHockmann", "createdAt": "2020-04-02T07:42:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5MTQzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5MTgwMw==", "url": "https://github.com/JanusGraph/janusgraph/pull/2067#discussion_r401891803", "bodyText": "Why not use conf/janusgraph-inmemory.properties?", "author": "farodin91", "createdAt": "2020-04-01T20:32:50Z", "path": "janusgraph-dist/src/assembly/static/conf/gremlin-server/gremlin-server.yaml", "diffHunk": "@@ -17,7 +17,7 @@ port: 8182\n scriptEvaluationTimeout: 30000\n channelizer: org.apache.tinkerpop.gremlin.server.channel.WebSocketChannelizer\n graphs: {\n-  graph: conf/gremlin-server/janusgraph-cql-es-server.properties\n+  graph: conf/gremlin-server/janusgraph-inmemory.properties", "originalCommit": "80fd717263c2ca706fde8b77e61bdfc5c6402dfa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5Nzc2OQ==", "url": "https://github.com/JanusGraph/janusgraph/pull/2067#discussion_r401897769", "bodyText": "Changed to conf/janusgraph-inmemory.properties", "author": "porunov", "createdAt": "2020-04-01T20:44:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTg5MTgwMw=="}], "type": "inlineReview"}, {"oid": "d06607d43befe1b1b737ac17f477f47612e32c75", "url": "https://github.com/JanusGraph/janusgraph/commit/d06607d43befe1b1b737ac17f477f47612e32c75", "message": "Fix gremlin-server should run inmemory by default\n\nSigned-off-by: Oleksandr Porunov <alexandr.porunov@gmail.com>", "committedDate": "2020-04-01T20:43:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjExNTEyNg==", "url": "https://github.com/JanusGraph/janusgraph/pull/2067#discussion_r402115126", "bodyText": "I think this section is a bit ambiguous as users could understand this as: Gremlin Server now only works with inmemory whereas what you actually mean is that Gremlin Server is by default configured for the inmemory storage backend when started with bin/gremlin-server.sh.\nAnother nitpick here: It should always be Gremlin Server.", "author": "FlorianHockmann", "createdAt": "2020-04-02T07:47:45Z", "path": "docs/changelog.md", "diffHunk": "@@ -65,6 +65,11 @@ The default version of the distribution package does no longer contain the `janu\n This includes a packaged version of cassandra and elasticsearch. If you want to have `janusgraph.sh`, \n you have to download distribution with the suffix `-full`.\n \n+##### Gremlin server distributed with the release uses inmemory storage backend and no search backend\n+\n+Gremlin server distributed with the release uses inmemory storage backend and no search backend that is why ", "originalCommit": "d06607d43befe1b1b737ac17f477f47612e32c75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "182281a1a6ad4e2974e00db2c17e3da079dbb07d", "url": "https://github.com/JanusGraph/janusgraph/commit/182281a1a6ad4e2974e00db2c17e3da079dbb07d", "message": "Fix gremlin-server should run inmemory by default\n\nSigned-off-by: Oleksandr Porunov <alexandr.porunov@gmail.com>", "committedDate": "2020-04-02T17:09:00Z", "type": "commit"}, {"oid": "182281a1a6ad4e2974e00db2c17e3da079dbb07d", "url": "https://github.com/JanusGraph/janusgraph/commit/182281a1a6ad4e2974e00db2c17e3da079dbb07d", "message": "Fix gremlin-server should run inmemory by default\n\nSigned-off-by: Oleksandr Porunov <alexandr.porunov@gmail.com>", "committedDate": "2020-04-02T17:09:00Z", "type": "forcePushed"}]}