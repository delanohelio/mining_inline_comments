{"pr_number": 129, "pr_title": "Replace gradle-based build setup with Maven", "pr_createdAt": "2020-02-27T21:29:07Z", "pr_url": "https://github.com/cryostatio/cryostat/pull/129", "timeline": [{"oid": "afc5ec81a519293001ac38602ac36fb24fb813f9", "url": "https://github.com/cryostatio/cryostat/commit/afc5ec81a519293001ac38602ac36fb24fb813f9", "message": "Initial pom.xml", "committedDate": "2020-02-26T15:11:48Z", "type": "commit"}, {"oid": "bc4fd0a975532c96ec9212a014a0288faab3980f", "url": "https://github.com/cryostatio/cryostat/commit/bc4fd0a975532c96ec9212a014a0288faab3980f", "message": "Use Surefire compatible with JUnit 5", "committedDate": "2020-02-26T15:18:51Z", "type": "commit"}, {"oid": "e54407f4a406979ba58e67543da76db94168359e", "url": "https://github.com/cryostatio/cryostat/commit/e54407f4a406979ba58e67543da76db94168359e", "message": "Update gitignore", "committedDate": "2020-02-26T15:20:59Z", "type": "commit"}, {"oid": "f9feef14d8edf540061dcda1833fc0680ddaa356", "url": "https://github.com/cryostatio/cryostat/commit/f9feef14d8edf540061dcda1833fc0680ddaa356", "message": "Add executions for -web", "committedDate": "2020-02-26T16:35:55Z", "type": "commit"}, {"oid": "54ee7fd3b5296f306a4d05447ec2d74cab4007b0", "url": "https://github.com/cryostatio/cryostat/commit/54ee7fd3b5296f306a4d05447ec2d74cab4007b0", "message": "Add minimal build profile via property", "committedDate": "2020-02-26T17:01:37Z", "type": "commit"}, {"oid": "992caf51629c65b710b007b80729e7b8ef8947a0", "url": "https://github.com/cryostatio/cryostat/commit/992caf51629c65b710b007b80729e7b8ef8947a0", "message": "Use 2-space indentation", "committedDate": "2020-02-26T17:03:14Z", "type": "commit"}, {"oid": "937d278175728b3ea3781cefbfcd7ee8dd6930c4", "url": "https://github.com/cryostatio/cryostat/commit/937d278175728b3ea3781cefbfcd7ee8dd6930c4", "message": "Add non-minimal jib build config", "committedDate": "2020-02-26T20:07:10Z", "type": "commit"}, {"oid": "1596abe7f46877887af216b526e87459a651923c", "url": "https://github.com/cryostatio/cryostat/commit/1596abe7f46877887af216b526e87459a651923c", "message": "Allow image builder to be configured", "committedDate": "2020-02-26T20:13:03Z", "type": "commit"}, {"oid": "16ee8386a00b5814a90ffbd583f5fe56bfb016d3", "url": "https://github.com/cryostatio/cryostat/commit/16ee8386a00b5814a90ffbd583f5fe56bfb016d3", "message": "Append -minimal to minimal image version tags", "committedDate": "2020-02-26T20:34:21Z", "type": "commit"}, {"oid": "0d1a49e845a345c819e22d1bb8aca9e9488ac69e", "url": "https://github.com/cryostatio/cryostat/commit/0d1a49e845a345c819e22d1bb8aca9e9488ac69e", "message": "Include -web assets in built images", "committedDate": "2020-02-27T17:29:31Z", "type": "commit"}, {"oid": "83eb129d3e38d491a3da0976fd95b63bb3389abe", "url": "https://github.com/cryostatio/cryostat/commit/83eb129d3e38d491a3da0976fd95b63bb3389abe", "message": "Build image on package phase", "committedDate": "2020-02-27T17:32:04Z", "type": "commit"}, {"oid": "29abd9694db392f21625260a36b893006fcb4f11", "url": "https://github.com/cryostatio/cryostat/commit/29abd9694db392f21625260a36b893006fcb4f11", "message": "Include -web in clean phase", "committedDate": "2020-02-27T17:35:45Z", "type": "commit"}, {"oid": "a2ef06cb070d349f16dd615929bec5404d780c64", "url": "https://github.com/cryostatio/cryostat/commit/a2ef06cb070d349f16dd615929bec5404d780c64", "message": "Add Spotbugs plugin for build testing and site reporting", "committedDate": "2020-02-27T18:06:51Z", "type": "commit"}, {"oid": "d91a2d80068918d933eb650e712df9dcf375e821", "url": "https://github.com/cryostatio/cryostat/commit/d91a2d80068918d933eb650e712df9dcf375e821", "message": "Add JaCoCo plugin for build testing and site reporting", "committedDate": "2020-02-27T20:30:28Z", "type": "commit"}, {"oid": "60c42ed97b78a4e0279a91a0c5ed9db69d4e7a7a", "url": "https://github.com/cryostatio/cryostat/commit/60c42ed97b78a4e0279a91a0c5ed9db69d4e7a7a", "message": "Add Spotless plugin for linting/formatting", "committedDate": "2020-02-27T20:43:17Z", "type": "commit"}, {"oid": "bdc6cd11f86f4f4b62aa9cdbaac6c712c3d7c91e", "url": "https://github.com/cryostatio/cryostat/commit/bdc6cd11f86f4f4b62aa9cdbaac6c712c3d7c91e", "message": "Apply Spotless plugin formatting", "committedDate": "2020-02-27T20:43:35Z", "type": "commit"}, {"oid": "7db7f8da995c1f9d4a84fa3366df80280bda4b57", "url": "https://github.com/cryostatio/cryostat/commit/7db7f8da995c1f9d4a84fa3366df80280bda4b57", "message": "Bind plugin executions to more standard phases", "committedDate": "2020-02-27T21:07:17Z", "type": "commit"}, {"oid": "ccdf8069b26d0cfb90d1d8e685f021c03b0cd0d4", "url": "https://github.com/cryostatio/cryostat/commit/ccdf8069b26d0cfb90d1d8e685f021c03b0cd0d4", "message": "Specify main-class for exec:java", "committedDate": "2020-02-27T21:15:09Z", "type": "commit"}, {"oid": "8c32239eeefeab9348a62c3c1dba2d27b56c5f2c", "url": "https://github.com/cryostatio/cryostat/commit/8c32239eeefeab9348a62c3c1dba2d27b56c5f2c", "message": "Remove gradle", "committedDate": "2020-02-27T21:23:07Z", "type": "commit"}, {"oid": "7399761411f0ea4d5c0aa4b355ebed0f125c5262", "url": "https://github.com/cryostatio/cryostat/commit/7399761411f0ea4d5c0aa4b355ebed0f125c5262", "message": "Configure surefire for parallel test class execution", "committedDate": "2020-02-28T17:54:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk1MTU3OA==", "url": "https://github.com/cryostatio/cryostat/pull/129#discussion_r385951578", "bodyText": "Might I suggest we handle clean using maven-clean-plugin? Seems a bit more portable.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        <execution>\n          \n          \n            \n                          <id>clean-web-client</id>\n          \n          \n            \n                          <phase>clean</phase>\n          \n          \n            \n                          <goals>\n          \n          \n            \n                            <goal>exec</goal>\n          \n          \n            \n                          </goals>\n          \n          \n            \n                          <configuration>\n          \n          \n            \n                            <executable>rm</executable>\n          \n          \n            \n                            <workingDirectory>web-client</workingDirectory>\n          \n          \n            \n                            <arguments>\n          \n          \n            \n                              <argument>-rf</argument>\n          \n          \n            \n                              <argument>node_modules</argument>\n          \n          \n            \n                              <argument>dist</argument>\n          \n          \n            \n                            </arguments>\n          \n          \n            \n                          </configuration>\n          \n          \n            \n                        </execution>\n          \n          \n            \n                      </executions>\n          \n          \n            \n                    </plugin>\n          \n          \n            \n                      </executions>\n          \n          \n            \n                    </plugin>\n          \n          \n            \n                    <plugin>\n          \n          \n            \n                      <artifactId>maven-clean-plugin</artifactId>\n          \n          \n            \n                      <version>3.1.0</version>\n          \n          \n            \n                      <configuration>\n          \n          \n            \n                        <filesets>\n          \n          \n            \n                          <fileset>\n          \n          \n            \n                            <directory>web-client</directory>\n          \n          \n            \n                            <includes>\n          \n          \n            \n                              <include>node_modules/**</include>\n          \n          \n            \n                              <include>dist/**</include>\n          \n          \n            \n                            </includes>\n          \n          \n            \n                          </fileset>\n          \n          \n            \n                        </filesets>\n          \n          \n            \n                      </configuration>\n          \n          \n            \n                    </plugin>", "author": "ebaron", "createdAt": "2020-02-28T22:27:53Z", "path": "pom.xml", "diffHunk": "@@ -0,0 +1,378 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+\n+<modelVersion>4.0.0</modelVersion>\n+<groupId>com.redhat.rhjmc.containerjfr</groupId>\n+<artifactId>container-jfr</artifactId>\n+<version>0.16.0</version>\n+<packaging>jar</packaging>\n+<name>container-jfr</name>\n+<url>http://maven.apache.org</url>\n+\n+<properties>\n+  <java.version>11</java.version>\n+  <maven.compiler.target>${java.version}</maven.compiler.target>\n+  <maven.compiler.source>${java.version}</maven.compiler.source>\n+  <imageBuilder>/usr/bin/podman</imageBuilder>\n+  <containerjfr.minimal>false</containerjfr.minimal>\n+  <containerjfr.imageStream>quay.io/rh-jmc-team/container-jfr</containerjfr.imageStream>\n+  <containerjfr.webPort>8181</containerjfr.webPort>\n+  <containerjfr.listenPort>9090</containerjfr.listenPort>\n+</properties>\n+\n+<dependencies>\n+  <dependency>\n+    <groupId>com.redhat.rhjmc</groupId>\n+    <artifactId>containerjfr-core</artifactId>\n+    <version>0.9.0</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>io.fabric8</groupId>\n+    <artifactId>openshift-client</artifactId>\n+    <version>4.6.4</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>io.kubernetes</groupId>\n+    <artifactId>client-java</artifactId>\n+    <version>5.0.0</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>com.google.dagger</groupId>\n+    <artifactId>dagger</artifactId>\n+    <version>2.26</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.apache.commons</groupId>\n+    <artifactId>commons-lang3</artifactId>\n+    <version>3.9</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>commons-codec</groupId>\n+    <artifactId>commons-codec</artifactId>\n+    <version>1.13</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.apache.httpcomponents</groupId>\n+    <artifactId>httpclient</artifactId>\n+    <version>4.5.11</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.apache.httpcomponents</groupId>\n+    <artifactId>httpmime</artifactId>\n+    <version>4.5.11</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.jsoup</groupId>\n+    <artifactId>jsoup</artifactId>\n+    <version>1.12.1</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>io.vertx</groupId>\n+    <artifactId>vertx-web</artifactId>\n+    <version>3.8.5</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>com.google.code.gson</groupId>\n+    <artifactId>gson</artifactId>\n+    <version>2.8.6</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>com.github.spotbugs</groupId>\n+    <artifactId>spotbugs-annotations</artifactId>\n+    <version>4.0.0-RC1</version>\n+  </dependency>\n+\n+  <!-- test deps -->\n+  <dependency>\n+    <groupId>org.junit.jupiter</groupId>\n+    <artifactId>junit-jupiter-api</artifactId>\n+    <version>5.6.0</version>\n+    <scope>test</scope>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.junit.jupiter</groupId>\n+    <artifactId>junit-jupiter-params</artifactId>\n+    <version>5.6.0</version>\n+    <scope>test</scope>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.hamcrest</groupId>\n+    <artifactId>hamcrest</artifactId>\n+    <version>2.2</version>\n+    <scope>test</scope>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.mockito</groupId>\n+    <artifactId>mockito-junit-jupiter</artifactId>\n+    <version>3.2.4</version>\n+    <scope>test</scope>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.mockito</groupId>\n+    <artifactId>mockito-inline</artifactId>\n+    <version>3.2.4</version>\n+    <scope>test</scope>\n+  </dependency>\n+</dependencies>\n+\n+<build>\n+  <plugins>\n+    <plugin>\n+      <groupId>org.apache.maven.plugins</groupId>\n+      <artifactId>maven-compiler-plugin</artifactId>\n+      <version>3.6.1</version>\n+      <configuration>\n+        <annotationProcessorPaths>\n+          <path>\n+            <groupId>com.google.dagger</groupId>\n+            <artifactId>dagger-compiler</artifactId>\n+            <version>2.26</version>\n+          </path>\n+        </annotationProcessorPaths>\n+      </configuration>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.apache.maven.plugins</groupId>\n+      <artifactId>maven-surefire-plugin</artifactId>\n+      <version>3.0.0-M4</version>\n+    </plugin>\n+    <plugin>\n+      <groupId>com.google.cloud.tools</groupId>\n+      <artifactId>jib-maven-plugin</artifactId>\n+      <version>2.1.0</version>\n+      <executions>\n+        <execution>\n+          <id>build-oci-image</id>\n+          <phase>package</phase>\n+          <goals>\n+            <goal>dockerBuild</goal>\n+          </goals>\n+        </execution>\n+      </executions>\n+      <configuration>\n+        <dockerClient>\n+          <executable>${imageBuilder}</executable>\n+        </dockerClient>\n+        <from>\n+          <image>gcr.io/distroless/java:11</image>\n+        </from>\n+        <to>\n+          <image>${containerjfr.imageStream}</image>\n+          <tags>${containerjfr.imageVersion}</tags>\n+        </to>\n+        <container>\n+          <creationTime>USE_CURRENT_TIMESTAMP</creationTime>\n+          <jvmFlags>-XX:+CrashOnOutOfMemoryError,-Dcom.sun.management.jmxremote.port=9091,-Dcom.sun.management.jmxremote.ssl=false,-Dcom.sun.management.jmxremote.authenticate=false</jvmFlags>\n+          <ports>${containerjfr.webPort},${containerjfr.listenPort},9091</ports>\n+        </container>\n+        <extraDirectories>\n+          <paths>\n+            <path>${project.build.directory}/assets</path>\n+          </paths>\n+        </extraDirectories>\n+      </configuration>\n+    </plugin>\n+    <plugin>\n+      <groupId>com.github.spotbugs</groupId>\n+      <artifactId>spotbugs-maven-plugin</artifactId>\n+      <version>3.1.12.2</version>\n+      <executions>\n+        <execution>\n+          <id>spotbugs</id>\n+          <phase>verify</phase>\n+          <goals>\n+            <goal>check</goal>\n+          </goals>\n+        </execution>\n+      </executions>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.jacoco</groupId>\n+      <artifactId>jacoco-maven-plugin</artifactId>\n+      <version>0.8.5</version>\n+      <executions>\n+        <execution>\n+          <goals>\n+            <goal>prepare-agent</goal>\n+          </goals>\n+        </execution>\n+        <execution>\n+          <id>report</id>\n+          <phase>verify</phase>\n+          <goals>\n+            <goal>report</goal>\n+          </goals>\n+        </execution>\n+      </executions>\n+    </plugin>\n+    <plugin>\n+      <groupId>com.diffplug.spotless</groupId>\n+      <artifactId>spotless-maven-plugin</artifactId>\n+      <version>1.27.0</version>\n+      <executions>\n+        <execution>\n+          <id>spotless</id>\n+          <phase>verify</phase>\n+          <goals>\n+            <goal>check</goal>\n+          </goals>\n+        </execution>\n+      </executions>\n+      <configuration>\n+        <java>\n+          <googleJavaFormat>\n+            <version>1.7</version>\n+            <style>AOSP</style>\n+          </googleJavaFormat>\n+          <trimTrailingWhitespace/>\n+          <endWithNewline/>\n+          <importOrder>\n+            <order>java,javax,org.openjdk.jmc,com.redhat.rhjmc.containerjfr,</order>\n+          </importOrder>\n+          <removeUnusedImports/>\n+        </java>\n+      </configuration>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.apache.maven.plugins</groupId>\n+      <artifactId>maven-site-plugin</artifactId>\n+      <version>3.8.2</version>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.apache.maven.plugins</groupId>\n+      <artifactId>maven-project-info-reports-plugin</artifactId>\n+      <version>3.0.0</version>\n+    </plugin>\n+  </plugins>\n+</build>\n+\n+<reporting>\n+  <plugins>\n+    <plugin>\n+      <groupId>com.github.spotbugs</groupId>\n+      <artifactId>spotbugs-maven-plugin</artifactId>\n+      <version>3.1.12.2</version>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.jacoco</groupId>\n+      <artifactId>jacoco-maven-plugin</artifactId>\n+      <reportSets>\n+        <reportSet>\n+          <reports>\n+            <report>report</report>\n+          </reports>\n+        </reportSet>\n+      </reportSets>\n+    </plugin>\n+  </plugins>\n+</reporting>\n+\n+<profiles>\n+  <profile>\n+    <id>minimal</id>\n+    <activation>\n+      <property>\n+        <name>containerjfr.minimal</name>\n+        <value>true</value>\n+      </property>\n+    </activation>\n+    <properties>\n+      <containerjfr.imageVersion>${project.version}-minimal</containerjfr.imageVersion>\n+    </properties>\n+  </profile>\n+  <profile>\n+    <id>non-minimal</id>\n+    <activation>\n+      <property>\n+        <name>containerjfr.minimal</name>\n+        <value>!true</value>\n+      </property>\n+    </activation>\n+    <properties>\n+      <containerjfr.imageVersion>${project.version}</containerjfr.imageVersion>\n+    </properties>\n+    <build>\n+      <plugins>\n+        <plugin>\n+          <groupId>org.codehaus.mojo</groupId>\n+          <artifactId>exec-maven-plugin</artifactId>\n+          <version>1.6.0</version>\n+          <configuration>\n+            <mainClass>com.redhat.rhjmc.containerjfr.ContainerJfr</mainClass>\n+          </configuration>\n+          <executions>\n+            <execution>\n+              <id>update-web-client-deps</id>\n+              <phase>initialize</phase>\n+              <goals>\n+                <goal>exec</goal>\n+              </goals>\n+              <configuration>\n+                <executable>npm</executable>\n+                <workingDirectory>web-client</workingDirectory>\n+                <arguments>\n+                  <argument>ci</argument>\n+                </arguments>\n+              </configuration>\n+            </execution>\n+            <execution>\n+              <id>build-web-client</id>\n+              <phase>prepare-package</phase>\n+              <goals>\n+                <goal>exec</goal>\n+              </goals>\n+              <configuration>\n+                <executable>npm</executable>\n+                <workingDirectory>web-client</workingDirectory>\n+                <arguments>\n+                  <argument>run</argument>\n+                  <argument>build</argument>\n+                </arguments>\n+              </configuration>\n+            </execution>\n+            <execution>\n+              <id>clean-web-client</id>\n+              <phase>clean</phase>\n+              <goals>\n+                <goal>exec</goal>\n+              </goals>\n+              <configuration>\n+                <executable>rm</executable>\n+                <workingDirectory>web-client</workingDirectory>\n+                <arguments>\n+                  <argument>-rf</argument>\n+                  <argument>node_modules</argument>\n+                  <argument>dist</argument>\n+                </arguments>\n+              </configuration>\n+            </execution>\n+          </executions>\n+        </plugin>", "originalCommit": "8c32239eeefeab9348a62c3c1dba2d27b56c5f2c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk1Mjk5Nw==", "url": "https://github.com/cryostatio/cryostat/pull/129#discussion_r385952997", "bodyText": "Adding <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding> to properties prevents a few warnings about guessing the encoding.", "author": "ebaron", "createdAt": "2020-02-28T22:32:09Z", "path": "pom.xml", "diffHunk": "@@ -0,0 +1,378 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+\n+<modelVersion>4.0.0</modelVersion>\n+<groupId>com.redhat.rhjmc.containerjfr</groupId>\n+<artifactId>container-jfr</artifactId>\n+<version>0.16.0</version>\n+<packaging>jar</packaging>\n+<name>container-jfr</name>\n+<url>http://maven.apache.org</url>\n+\n+<properties>\n+  <java.version>11</java.version>\n+  <maven.compiler.target>${java.version}</maven.compiler.target>\n+  <maven.compiler.source>${java.version}</maven.compiler.source>\n+  <imageBuilder>/usr/bin/podman</imageBuilder>\n+  <containerjfr.minimal>false</containerjfr.minimal>\n+  <containerjfr.imageStream>quay.io/rh-jmc-team/container-jfr</containerjfr.imageStream>\n+  <containerjfr.webPort>8181</containerjfr.webPort>\n+  <containerjfr.listenPort>9090</containerjfr.listenPort>", "originalCommit": "8c32239eeefeab9348a62c3c1dba2d27b56c5f2c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9648213ad267d21c7694f135f67cb444130e7751", "url": "https://github.com/cryostatio/cryostat/commit/9648213ad267d21c7694f135f67cb444130e7751", "message": "Use maven-clean-plugin for cleaning web-client", "committedDate": "2020-03-04T19:29:03Z", "type": "commit"}, {"oid": "0cad2dc6aab163f957ee6a1878a1039744ee4588", "url": "https://github.com/cryostatio/cryostat/commit/0cad2dc6aab163f957ee6a1878a1039744ee4588", "message": "Specify source encoding", "committedDate": "2020-03-04T19:53:04Z", "type": "commit"}, {"oid": "303ef8d17a4040c513db80d21c5b88de87178872", "url": "https://github.com/cryostatio/cryostat/commit/303ef8d17a4040c513db80d21c5b88de87178872", "message": "Specify dependency and plugin versions in properties", "committedDate": "2020-03-04T20:35:42Z", "type": "commit"}, {"oid": "256b06c89ecc6b717d431813df0faec6461b58b1", "url": "https://github.com/cryostatio/cryostat/commit/256b06c89ecc6b717d431813df0faec6461b58b1", "message": "Reorder spotbugs annotation into test deps", "committedDate": "2020-03-05T14:48:29Z", "type": "commit"}, {"oid": "a29b122e6a5e6ebf87ed29d0d28b246c4e6ffa36", "url": "https://github.com/cryostatio/cryostat/commit/a29b122e6a5e6ebf87ed29d0d28b246c4e6ffa36", "message": "Remove unused jsoup dependency", "committedDate": "2020-03-05T14:56:03Z", "type": "commit"}, {"oid": "4ec1066f545036f6f4bb1750867136f3453971d3", "url": "https://github.com/cryostatio/cryostat/commit/4ec1066f545036f6f4bb1750867136f3453971d3", "message": "Add generated web-client assets to exec:java classpath", "committedDate": "2020-03-05T15:55:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQwODQ3Ng==", "url": "https://github.com/cryostatio/cryostat/pull/129#discussion_r388408476", "bodyText": "This only cleans dist for me and not also node_modules. I think the directories need to be listed as <include> tags within <includes>, and not just <includes>.", "author": "ebaron", "createdAt": "2020-03-05T16:27:05Z", "path": "pom.xml", "diffHunk": "@@ -0,0 +1,416 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+\n+<modelVersion>4.0.0</modelVersion>\n+<groupId>com.redhat.rhjmc.containerjfr</groupId>\n+<artifactId>container-jfr</artifactId>\n+<version>0.16.0</version>\n+<packaging>jar</packaging>\n+<name>container-jfr</name>\n+<url>http://maven.apache.org</url>\n+\n+<properties>\n+  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n+  <java.version>11</java.version>\n+  <maven.compiler.target>${java.version}</maven.compiler.target>\n+  <maven.compiler.source>${java.version}</maven.compiler.source>\n+\n+  <imageBuilder>/usr/bin/podman</imageBuilder>\n+\n+  <containerjfr.minimal>false</containerjfr.minimal>\n+  <containerjfr.imageStream>quay.io/rh-jmc-team/container-jfr</containerjfr.imageStream>\n+  <containerjfr.webPort>8181</containerjfr.webPort>\n+  <containerjfr.listenPort>9090</containerjfr.listenPort>\n+\n+  <org.apache.maven.plugins.compiler.version>3.6.1</org.apache.maven.plugins.compiler.version>\n+  <org.apache.maven.plugins.surefire.version>3.0.0-M4</org.apache.maven.plugins.surefire.version>\n+  <org.apache.maven.plugins.site.version>3.8.2</org.apache.maven.plugins.site.version>\n+  <org.apache.maven.plugins.info.reports.version>3.0.0</org.apache.maven.plugins.info.reports.version>\n+  <org.apache.maven.plugins.clean.version>3.1.0</org.apache.maven.plugins.clean.version>\n+  <org.apache.maven.plugins.resources.version>3.1.0</org.apache.maven.plugins.resources.version>\n+  <org.codehaus.mojo.exec.plugin.version>1.6.0</org.codehaus.mojo.exec.plugin.version>\n+  <com.google.cloud.tools.jib.maven.plugin.version>2.1.0</com.google.cloud.tools.jib.maven.plugin.version>\n+\n+  <com.google.dagger.version>2.26</com.google.dagger.version>\n+\n+  <com.redhat.rhjmc.containerjfr.core.version>0.9.0</com.redhat.rhjmc.containerjfr.core.version>\n+  <org.eclipse.core.runtime.version>3.15.0</org.eclipse.core.runtime.version>\n+\n+  <org.apache.commons.lang3.version>3.9</org.apache.commons.lang3.version>\n+  <org.apache.commons.codec.version>1.13</org.apache.commons.codec.version>\n+  <org.apache.httpcomponents.version>4.5.11</org.apache.httpcomponents.version>\n+  <io.fabric8.openshift.client.version>4.6.4</io.fabric8.openshift.client.version>\n+  <io.kubernetes.client.java.version>5.0.0</io.kubernetes.client.java.version>\n+  <io.vertx.web.version>3.8.5</io.vertx.web.version>\n+  <com.google.code.gson.version>2.8.6</com.google.code.gson.version>\n+\n+  <com.github.spotbugs.version>4.0.0-RC1</com.github.spotbugs.version>\n+  <com.github.spotbugs.plugin.version>3.1.12.1</com.github.spotbugs.plugin.version>\n+  <org.junit.jupiter.version>5.6.0</org.junit.jupiter.version>\n+  <org.hamcrest.version>2.2</org.hamcrest.version>\n+  <org.mockito.version>3.2.4</org.mockito.version>\n+  <org.jacoco.maven.plugin.version>0.8.5</org.jacoco.maven.plugin.version>\n+  <com.diffplug.spotless.maven.plugin.version>1.27.0</com.diffplug.spotless.maven.plugin.version>\n+</properties>\n+\n+<dependencies>\n+  <dependency>\n+    <groupId>com.redhat.rhjmc</groupId>\n+    <artifactId>containerjfr-core</artifactId>\n+    <version>${com.redhat.rhjmc.containerjfr.core.version}</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>io.fabric8</groupId>\n+    <artifactId>openshift-client</artifactId>\n+    <version>${io.fabric8.openshift.client.version}</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>io.kubernetes</groupId>\n+    <artifactId>client-java</artifactId>\n+    <version>${io.kubernetes.client.java.version}</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>com.google.dagger</groupId>\n+    <artifactId>dagger</artifactId>\n+    <version>${com.google.dagger.version}</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.apache.commons</groupId>\n+    <artifactId>commons-lang3</artifactId>\n+    <version>${org.apache.commons.lang3.version}</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>commons-codec</groupId>\n+    <artifactId>commons-codec</artifactId>\n+    <version>${org.apache.commons.codec.version}</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.apache.httpcomponents</groupId>\n+    <artifactId>httpclient</artifactId>\n+    <version>${org.apache.httpcomponents.version}</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.apache.httpcomponents</groupId>\n+    <artifactId>httpmime</artifactId>\n+    <version>${org.apache.httpcomponents.version}</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>io.vertx</groupId>\n+    <artifactId>vertx-web</artifactId>\n+    <version>${io.vertx.web.version}</version>\n+  </dependency>\n+  <dependency>\n+    <groupId>com.google.code.gson</groupId>\n+    <artifactId>gson</artifactId>\n+    <version>${com.google.code.gson.version}</version>\n+  </dependency>\n+\n+  <!-- test deps -->\n+  <dependency>\n+    <groupId>org.junit.jupiter</groupId>\n+    <artifactId>junit-jupiter-api</artifactId>\n+    <version>${org.junit.jupiter.version}</version>\n+    <scope>test</scope>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.junit.jupiter</groupId>\n+    <artifactId>junit-jupiter-params</artifactId>\n+    <version>${org.junit.jupiter.version}</version>\n+    <scope>test</scope>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.hamcrest</groupId>\n+    <artifactId>hamcrest</artifactId>\n+    <version>${org.hamcrest.version}</version>\n+    <scope>test</scope>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.mockito</groupId>\n+    <artifactId>mockito-junit-jupiter</artifactId>\n+    <version>${org.mockito.version}</version>\n+    <scope>test</scope>\n+  </dependency>\n+  <dependency>\n+    <groupId>org.mockito</groupId>\n+    <artifactId>mockito-inline</artifactId>\n+    <version>${org.mockito.version}</version>\n+    <scope>test</scope>\n+  </dependency>\n+  <dependency>\n+    <groupId>com.github.spotbugs</groupId>\n+    <artifactId>spotbugs-annotations</artifactId>\n+    <version>${com.github.spotbugs.version}</version>\n+  </dependency>\n+</dependencies>\n+\n+<build>\n+  <plugins>\n+    <plugin>\n+      <groupId>org.apache.maven.plugins</groupId>\n+      <artifactId>maven-compiler-plugin</artifactId>\n+      <version>${org.apache.maven.plugins.compiler.version}</version>\n+      <configuration>\n+        <annotationProcessorPaths>\n+          <path>\n+            <groupId>com.google.dagger</groupId>\n+            <artifactId>dagger-compiler</artifactId>\n+            <version>${com.google.dagger.version}</version>\n+          </path>\n+        </annotationProcessorPaths>\n+      </configuration>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.apache.maven.plugins</groupId>\n+      <artifactId>maven-surefire-plugin</artifactId>\n+      <version>${org.apache.maven.plugins.surefire.version}</version>\n+      <configuration>\n+        <properties>\n+          <configurationParameters>\n+            junit.jupiter.execution.parallel.enabled=true\n+            junit.jupiter.execution.parallel.mode.default=same_thread\n+            junit.jupiter.execution.parallel.mode.classes.default=concurrent\n+          </configurationParameters>\n+        </properties>\n+      </configuration>\n+    </plugin>\n+    <plugin>\n+      <groupId>com.google.cloud.tools</groupId>\n+      <artifactId>jib-maven-plugin</artifactId>\n+      <version>${com.google.cloud.tools.jib.maven.plugin.version}</version>\n+      <executions>\n+        <execution>\n+          <id>build-oci-image</id>\n+          <phase>package</phase>\n+          <goals>\n+            <goal>dockerBuild</goal>\n+          </goals>\n+        </execution>\n+      </executions>\n+      <configuration>\n+        <dockerClient>\n+          <executable>${imageBuilder}</executable>\n+        </dockerClient>\n+        <from>\n+          <image>gcr.io/distroless/java:11</image>\n+        </from>\n+        <to>\n+          <image>${containerjfr.imageStream}</image>\n+          <tags>${containerjfr.imageVersion}</tags>\n+        </to>\n+        <container>\n+          <creationTime>USE_CURRENT_TIMESTAMP</creationTime>\n+          <jvmFlags>-XX:+CrashOnOutOfMemoryError,-Dcom.sun.management.jmxremote.port=9091,-Dcom.sun.management.jmxremote.ssl=false,-Dcom.sun.management.jmxremote.authenticate=false</jvmFlags>\n+          <ports>${containerjfr.webPort},${containerjfr.listenPort},9091</ports>\n+        </container>\n+        <extraDirectories>\n+          <paths>\n+            <path>${project.build.directory}/assets</path>\n+          </paths>\n+        </extraDirectories>\n+      </configuration>\n+    </plugin>\n+    <plugin>\n+      <groupId>com.github.spotbugs</groupId>\n+      <artifactId>spotbugs-maven-plugin</artifactId>\n+      <version>${com.github.spotbugs.plugin.version}</version>\n+      <executions>\n+        <execution>\n+          <id>spotbugs</id>\n+          <phase>verify</phase>\n+          <goals>\n+            <goal>check</goal>\n+          </goals>\n+        </execution>\n+      </executions>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.jacoco</groupId>\n+      <artifactId>jacoco-maven-plugin</artifactId>\n+      <version>${org.jacoco.maven.plugin.version}</version>\n+      <executions>\n+        <execution>\n+          <goals>\n+            <goal>prepare-agent</goal>\n+          </goals>\n+        </execution>\n+        <execution>\n+          <id>report</id>\n+          <phase>verify</phase>\n+          <goals>\n+            <goal>report</goal>\n+          </goals>\n+        </execution>\n+      </executions>\n+    </plugin>\n+    <plugin>\n+      <groupId>com.diffplug.spotless</groupId>\n+      <artifactId>spotless-maven-plugin</artifactId>\n+      <version>${com.diffplug.spotless.maven.plugin.version}</version>\n+      <executions>\n+        <execution>\n+          <id>spotless</id>\n+          <phase>verify</phase>\n+          <goals>\n+            <goal>check</goal>\n+          </goals>\n+        </execution>\n+      </executions>\n+      <configuration>\n+        <java>\n+          <googleJavaFormat>\n+            <version>1.7</version>\n+            <style>AOSP</style>\n+          </googleJavaFormat>\n+          <trimTrailingWhitespace/>\n+          <endWithNewline/>\n+          <importOrder>\n+            <order>java,javax,org.openjdk.jmc,com.redhat.rhjmc.containerjfr,</order>\n+          </importOrder>\n+          <removeUnusedImports/>\n+        </java>\n+      </configuration>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.apache.maven.plugins</groupId>\n+      <artifactId>maven-site-plugin</artifactId>\n+      <version>${org.apache.maven.plugins.site.version}</version>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.apache.maven.plugins</groupId>\n+      <artifactId>maven-project-info-reports-plugin</artifactId>\n+      <version>${org.apache.maven.plugins.info.reports.version}</version>\n+    </plugin>\n+  </plugins>\n+</build>\n+\n+<reporting>\n+  <plugins>\n+    <plugin>\n+      <groupId>com.github.spotbugs</groupId>\n+      <artifactId>spotbugs-maven-plugin</artifactId>\n+      <version>${com.github.spotbugs.plugin.version}</version>\n+    </plugin>\n+    <plugin>\n+      <groupId>org.jacoco</groupId>\n+      <artifactId>jacoco-maven-plugin</artifactId>\n+      <version>${org.jacoco.maven.plugin.version}</version>\n+      <reportSets>\n+        <reportSet>\n+          <reports>\n+            <report>report</report>\n+          </reports>\n+        </reportSet>\n+      </reportSets>\n+    </plugin>\n+  </plugins>\n+</reporting>\n+\n+<profiles>\n+  <profile>\n+    <id>minimal</id>\n+    <activation>\n+      <property>\n+        <name>containerjfr.minimal</name>\n+        <value>true</value>\n+      </property>\n+    </activation>\n+    <properties>\n+      <containerjfr.imageVersion>${project.version}-minimal</containerjfr.imageVersion>\n+    </properties>\n+  </profile>\n+  <profile>\n+    <id>non-minimal</id>\n+    <activation>\n+      <property>\n+        <name>containerjfr.minimal</name>\n+        <value>!true</value>\n+      </property>\n+    </activation>\n+    <properties>\n+      <containerjfr.imageVersion>${project.version}</containerjfr.imageVersion>\n+    </properties>\n+    <build>\n+      <plugins>\n+        <plugin>\n+          <groupId>org.codehaus.mojo</groupId>\n+          <artifactId>exec-maven-plugin</artifactId>\n+          <version>${org.codehaus.mojo.exec.plugin.version}</version>\n+          <configuration>\n+            <mainClass>com.redhat.rhjmc.containerjfr.ContainerJfr</mainClass>\n+            <additionalClasspathElements>\n+              <additionalClasspathElement>${project.build.directory}/assets/app/resources</additionalClasspathElement>\n+            </additionalClasspathElements>\n+          </configuration>\n+          <executions>\n+            <execution>\n+              <id>update-web-client-deps</id>\n+              <phase>initialize</phase>\n+              <goals>\n+                <goal>exec</goal>\n+              </goals>\n+              <configuration>\n+                <executable>npm</executable>\n+                <workingDirectory>web-client</workingDirectory>\n+                <arguments>\n+                  <argument>ci</argument>\n+                </arguments>\n+              </configuration>\n+            </execution>\n+            <execution>\n+              <id>build-web-client</id>\n+              <phase>prepare-package</phase>\n+              <goals>\n+                <goal>exec</goal>\n+              </goals>\n+              <configuration>\n+                <executable>npm</executable>\n+                <workingDirectory>web-client</workingDirectory>\n+                <arguments>\n+                  <argument>run</argument>\n+                  <argument>build</argument>\n+                </arguments>\n+              </configuration>\n+            </execution>\n+          </executions>\n+        </plugin>\n+        <plugin>\n+          <artifactId>maven-clean-plugin</artifactId>\n+          <version>${org.apache.maven.plugins.clean.version}</version>\n+          <configuration>\n+            <filesets>\n+              <fileset>\n+                <directory>web-client</directory>\n+                <includes>node_modules/**</includes>\n+                <includes>dist/**</includes>\n+              </fileset>", "originalCommit": "4ec1066f545036f6f4bb1750867136f3453971d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "413d678735bcc5d61bf79f2182d4b966d9cff845", "url": "https://github.com/cryostatio/cryostat/commit/413d678735bcc5d61bf79f2182d4b966d9cff845", "message": "Correct clean plugin -web includes", "committedDate": "2020-03-05T16:33:45Z", "type": "commit"}, {"oid": "55e70a28a96bafd15aef9191cd76c7049ce94af9", "url": "https://github.com/cryostatio/cryostat/commit/55e70a28a96bafd15aef9191cd76c7049ce94af9", "message": "Correct README instruction for non-containerized smoketest", "committedDate": "2020-03-05T16:49:49Z", "type": "commit"}]}