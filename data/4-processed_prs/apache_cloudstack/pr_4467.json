{"pr_number": 4467, "pr_title": "vpc: fix ips on wrong interfaces after rebooting vpc vrs", "pr_createdAt": "2020-11-12T10:17:30Z", "pr_url": "https://github.com/apache/cloudstack/pull/4467", "timeline": [{"oid": "522f4ebac2bc14e17cdf4a62dd2af47a8457361c", "url": "https://github.com/apache/cloudstack/commit/522f4ebac2bc14e17cdf4a62dd2af47a8457361c", "message": "vpc: fix ips on wrong interfaces after rebooting vpc vrs", "committedDate": "2020-11-12T08:57:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjAxNzk1Ng==", "url": "https://github.com/apache/cloudstack/pull/4467#discussion_r522017956", "bodyText": "method name is not clear, Either define & use separate methods (for \"updating nic device id\" and \"getting nic with device id\"), or change the name appropriately.", "author": "sureshanaparti", "createdAt": "2020-11-12T10:57:59Z", "path": "server/src/main/java/com/cloud/network/router/VpcVirtualNetworkApplianceManagerImpl.java", "diffHunk": "@@ -834,4 +837,11 @@ public boolean postStateTransitionEvent(final StateMachine2.Transition<State, Vi\n         // once from VpcVirtualNetworkApplianceManagerImpl and once from VirtualNetworkApplianceManagerImpl itself\n         return true;\n     }\n+\n+    private Nic getNicWithUpdatedDeviceId(final long nicId, int deviceId) {\n+        NicVO nic = _nicDao.findById(nicId);\n+        nic.setDeviceId(deviceId);\n+        _nicDao.update(nic.getId(), nic);\n+        return nic;\n+    }", "originalCommit": "522f4ebac2bc14e17cdf4a62dd2af47a8457361c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjA1MzY0OA==", "url": "https://github.com/apache/cloudstack/pull/4467#discussion_r522053648", "bodyText": "getNicAndUpdtaeDeviceId() might have been more accurate but this is clearly stating what it does on the tin (to me) , Can you be more explicit about what you want @sureshanaparti ?", "author": "DaanHoogland", "createdAt": "2020-11-12T12:00:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjAxNzk1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjY2NTYzOA==", "url": "https://github.com/apache/cloudstack/pull/4467#discussion_r522665638", "bodyText": "getNicAndUpdtaeDeviceId() might have been more accurate but this is clearly stating what it does on the tin (to me) , Can you be more explicit about what you want @sureshanaparti ?\n\nsimply \"updateNicWithDeviceId()\" returning nic would be ok.", "author": "sureshanaparti", "createdAt": "2020-11-13T05:34:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjAxNzk1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjczMzAzMg==", "url": "https://github.com/apache/cloudstack/pull/4467#discussion_r522733032", "bodyText": "@sureshanaparti updateNicWithDeviceId() looks good to me. @DaanHoogland what's your opinion ?", "author": "weizhouapache", "createdAt": "2020-11-13T07:34:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjAxNzk1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjc2MzcxMA==", "url": "https://github.com/apache/cloudstack/pull/4467#discussion_r522763710", "bodyText": "yes, fine. the only problem i have is with my own spelling; getNicAndUpdtaeDeviceId() misses a 'k' ;)", "author": "DaanHoogland", "createdAt": "2020-11-13T08:02:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjAxNzk1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjkzMDc2Nw==", "url": "https://github.com/apache/cloudstack/pull/4467#discussion_r522930767", "bodyText": "@sureshanaparti @DaanHoogland thanks guys. code is changed.", "author": "weizhouapache", "createdAt": "2020-11-13T12:51:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjAxNzk1Ng=="}], "type": "inlineReview"}, {"oid": "eba9c867b8ff6473d7eec9aa7fa997fe0576f743", "url": "https://github.com/apache/cloudstack/commit/eba9c867b8ff6473d7eec9aa7fa997fe0576f743", "message": " #4467: Rename to updateNicWithDeviceId", "committedDate": "2020-11-13T12:49:04Z", "type": "commit"}, {"oid": "f6038166c5c1a46fe383a9ee059ae397d948baff", "url": "https://github.com/apache/cloudstack/commit/f6038166c5c1a46fe383a9ee059ae397d948baff", "message": "CLSTACK-8923 vr: Force a restart of keepalived if conntrackd is not running or configuration has changed", "committedDate": "2020-11-17T20:28:00Z", "type": "commit"}]}