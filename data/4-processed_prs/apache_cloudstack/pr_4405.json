{"pr_number": 4405, "pr_title": "Re-add affinity group", "pr_createdAt": "2020-10-14T15:09:29Z", "pr_url": "https://github.com/apache/cloudstack/pull/4405", "timeline": [{"oid": "89d86fa89f3d12d9ba307717761fdfcb8e49f565", "url": "https://github.com/apache/cloudstack/commit/89d86fa89f3d12d9ba307717761fdfcb8e49f565", "message": "Re-add affinity group\n\nFix mistake from PR #4397 List VMs by Security Group & HA", "committedDate": "2020-10-14T14:50:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTIzMjk4NA==", "url": "https://github.com/apache/cloudstack/pull/4405#discussion_r505232984", "bodyText": "Thanks @GabrielBrascher, for immediate fix. Changes LGTM.", "author": "sureshanaparti", "createdAt": "2020-10-15T07:00:34Z", "path": "server/src/main/java/com/cloud/api/query/QueryManagerImpl.java", "diffHunk": "@@ -976,6 +976,10 @@\n             sb.and(\"poolId\", sb.entity().getPoolId(), SearchCriteria.Op.EQ);\n         }\n \n+        if (affinityGroupId != null) {\n+            sb.and(\"affinityGroupId\", sb.entity().getAffinityGroupId(), SearchCriteria.Op.EQ);\n+        }\n+", "originalCommit": "89d86fa89f3d12d9ba307717761fdfcb8e49f565", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}