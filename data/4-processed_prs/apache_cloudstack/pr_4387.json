{"pr_number": 4387, "pr_title": "Fix JsonSyntaxException when creating API command response #4355 ", "pr_createdAt": "2020-10-06T21:02:58Z", "pr_url": "https://github.com/apache/cloudstack/pull/4387", "timeline": [{"oid": "bd275803775dd0e4813ac3701c756876fbcb6adf", "url": "https://github.com/apache/cloudstack/commit/bd275803775dd0e4813ac3701c756876fbcb6adf", "message": "Add missing \\\" on obfuscatePassword", "committedDate": "2020-10-06T20:40:32Z", "type": "commit"}, {"oid": "b04b08beffb1b218b70c837055044cce6aeabb7b", "url": "https://github.com/apache/cloudstack/commit/b04b08beffb1b218b70c837055044cce6aeabb7b", "message": "Add tests for AsyncJobManagerImpl.obfuscatePassword", "committedDate": "2020-10-06T20:48:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU2MjEyOQ==", "url": "https://github.com/apache/cloudstack/pull/4387#discussion_r504562129", "bodyText": "Why not complete replace with the ****?", "author": "rhtyd", "createdAt": "2020-10-14T10:13:32Z", "path": "framework/jobs/src/main/java/org/apache/cloudstack/framework/jobs/impl/AsyncJobManagerImpl.java", "diffHunk": "@@ -475,14 +475,14 @@ public AsyncJob queryJob(final long jobId, final boolean updatePollTime) {\n         return job;\n     }\n \n-    private String obfuscatePassword(String result, boolean hidePassword) {\n+    public String obfuscatePassword(String result, boolean hidePassword) {\n         if (hidePassword) {\n             String pattern = \"\\\"password\\\":\";\n             if (result != null) {\n                 if (result.contains(pattern)) {\n                     String[] resp = result.split(pattern);\n                     String psswd = resp[1].toString().split(\",\")[0];\n-                    result = resp[0] + pattern + psswd.replace(psswd.substring(2, psswd.length() - 1), \"*****\") + \",\" + resp[1].split(\",\", 2)[1];\n+                    result = resp[0] + pattern + psswd.replace(psswd.substring(2, psswd.length() - 1), \"*****\\\"\") + \",\" + resp[1].split(\",\", 2)[1];", "originalCommit": "b04b08beffb1b218b70c837055044cce6aeabb7b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc1NTA5OA==", "url": "https://github.com/apache/cloudstack/pull/4387#discussion_r504755098", "bodyText": "I am not sure if replacing the password with **** would then affect the intention of the password response.\nI think that the idea was to offer admins a hint on the password.\nBut that is good to keep in mind, thanks for the heads up @rhtyd. What do you think @DaanHoogland?", "author": "GabrielBrascher", "createdAt": "2020-10-14T15:07:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU2MjEyOQ=="}], "type": "inlineReview"}, {"oid": "7ef2f274bfc6d0eabd9bb3402dc40bfdbfda688f", "url": "https://github.com/apache/cloudstack/commit/7ef2f274bfc6d0eabd9bb3402dc40bfdbfda688f", "message": "fix for \"password},\"", "committedDate": "2020-10-14T20:54:31Z", "type": "commit"}]}