{"pr_number": 4377, "pr_title": "server: fix issue that vm guest os type is reset after updatetemplate", "pr_createdAt": "2020-10-06T07:24:00Z", "pr_url": "https://github.com/apache/cloudstack/pull/4377", "timeline": [{"oid": "c19754697758b2fb5b977042ac623e6cdfcd40e3", "url": "https://github.com/apache/cloudstack/commit/c19754697758b2fb5b977042ac623e6cdfcd40e3", "message": "server: fix issue that vm guest os type is reset after updatetemplate\n\nSteps to reproduce the issue\n(1) change vm guest os type\n(2) update vm template (guest os type is not changed)\n(3) vm guest os type is reset to guest os type of template.", "committedDate": "2020-10-06T07:06:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTUxNTMzMg==", "url": "https://github.com/apache/cloudstack/pull/4377#discussion_r505515332", "bodyText": "moving before this line L#2096 template = _tmpltDao.createForUpdate(id); should be ok?", "author": "sureshanaparti", "createdAt": "2020-10-15T12:51:51Z", "path": "server/src/main/java/com/cloud/template/TemplateManagerImpl.java", "diffHunk": "@@ -2063,6 +2063,7 @@ private VMTemplateVO updateTemplateOrIso(BaseUpdateTemplateOrIsoCmd cmd) {\n             ex.addProxyObject(String.valueOf(id), \"templateId\");\n             throw ex;\n         }\n+        long oldGuestOSId = template.getGuestOSId();", "originalCommit": "c19754697758b2fb5b977042ac623e6cdfcd40e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}