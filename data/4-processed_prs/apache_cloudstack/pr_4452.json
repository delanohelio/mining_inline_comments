{"pr_number": 4452, "pr_title": "Consider other conditions while listing templates with id", "pr_createdAt": "2020-11-06T11:44:35Z", "pr_url": "https://github.com/apache/cloudstack/pull/4452", "timeline": [{"oid": "388f32f6bb1015c8a1c532cbfcee3b9dd47b5c62", "url": "https://github.com/apache/cloudstack/commit/388f32f6bb1015c8a1c532cbfcee3b9dd47b5c62", "message": "Consider other conditions while listing templates with id\n\nMany of the searching conditions are not considered when\ntemplate id is passed but they are considered only when\ntemplate id is not passed. Move other conditions out of else\npart so that they will be considered when id is passed.", "committedDate": "2020-11-06T11:34:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgxMDQwMQ==", "url": "https://github.com/apache/cloudstack/pull/4452#discussion_r518810401", "bodyText": "\ud83d\udc4d", "author": "DaanHoogland", "createdAt": "2020-11-06T15:06:37Z", "path": "server/src/main/java/com/cloud/api/query/QueryManagerImpl.java", "diffHunk": "@@ -3434,11 +3434,6 @@ else if (!template.isPublicTemplate() && caller.getType() != Account.ACCOUNT_TYP\n                 domain = _domainDao.findById(Domain.ROOT_DOMAIN);\n             }\n \n-            // List<HypervisorType> hypers = null;\n-            // if (!isIso) {\n-            // hypers = _resourceMgr.listAvailHypervisorInZone(null, null);\n-            // }\n-", "originalCommit": "388f32f6bb1015c8a1c532cbfcee3b9dd47b5c62", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgxMTM4Mg==", "url": "https://github.com/apache/cloudstack/pull/4452#discussion_r518811382", "bodyText": "can you make it a method and put the call ...", "author": "DaanHoogland", "createdAt": "2020-11-06T15:08:08Z", "path": "server/src/main/java/com/cloud/api/query/QueryManagerImpl.java", "diffHunk": "@@ -3486,17 +3481,6 @@ else if (!template.isPublicTemplate() && caller.getType() != Account.ACCOUNT_TYP\n                 }\n             }\n \n-            if (!isIso) {\n-                // add hypervisor criteria for template case\n-                if (hypers != null && !hypers.isEmpty()) {\n-                    String[] relatedHypers = new String[hypers.size()];\n-                    for (int i = 0; i < hypers.size(); i++) {\n-                        relatedHypers[i] = hypers.get(i).toString();\n-                    }\n-                    sc.addAnd(\"hypervisorType\", SearchCriteria.Op.IN, relatedHypers);\n-                }\n-            }\n-", "originalCommit": "388f32f6bb1015c8a1c532cbfcee3b9dd47b5c62", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyNDYyMg==", "url": "https://github.com/apache/cloudstack/pull/4452#discussion_r518824622", "bodyText": "@DaanHoogland  done", "author": "ravening", "createdAt": "2020-11-06T15:27:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgxMTM4Mg=="}], "type": "inlineReview"}, {"oid": "1a47099e5f2c0dc00ee2f6ab3a30bbe14b1a2435", "url": "https://github.com/apache/cloudstack/commit/1a47099e5f2c0dc00ee2f6ab3a30bbe14b1a2435", "message": "Move to functions", "committedDate": "2020-11-06T15:26:21Z", "type": "commit"}]}