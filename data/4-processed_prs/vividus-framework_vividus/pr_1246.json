{"pr_number": 1246, "pr_title": "Clean up", "pr_createdAt": "2020-12-17T07:38:48Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/1246", "timeline": [{"oid": "5c77b714fb3937ee2dd596a079388dd10eda65bc", "url": "https://github.com/vividus-framework/vividus/commit/5c77b714fb3937ee2dd596a079388dd10eda65bc", "message": "[plugin-web-app] Make PMD happy", "committedDate": "2020-12-17T07:41:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDg3NDQ4Mg==", "url": "https://github.com/vividus-framework/vividus/pull/1246#discussion_r544874482", "bodyText": "known issues might be broken here, I propose to keep the commit, but postpone it till 0.3.0", "author": "valfirst", "createdAt": "2020-12-17T07:43:36Z", "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/SetContextSteps.java", "diffHunk": "@@ -66,66 +61,6 @@ public SetContextSteps(IUiContext uiContext, IWebDriverProvider webDriverProvide\n         this.baseValidations = baseValidations;\n     }\n \n-    /**\n-     * Set the context for further localization of elements to an <b>element</b> specified by the <b>name</b> and\n-     * <b>state</b>\n-     * @param name Any attribute or text value of the element\n-     * @param state A state value of the element\n-     * (<i>Possible values:</i> <b>ENABLED, DISABLED, SELECTED, NOT_SELECTED, VISIBLE, NOT_VISIBLE</b>)\n-    */\n-    @When(\"I change context to a [$state] element with the name '$name'\")\n-    public void changeContextToElementWithName(State state, String name)\n-    {\n-        resetContext();\n-        WebElement element = baseValidations.assertIfElementExists(\n-                String.format(\"An element with the name '%1$s'\", name),", "originalCommit": "5c77b714fb3937ee2dd596a079388dd10eda65bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDg3NDUzMA==", "url": "https://github.com/vividus-framework/vividus/pull/1246#discussion_r544874530", "bodyText": "known issues might be broken here, I propose to keep the commit, but postpone it till 0.3.0", "author": "valfirst", "createdAt": "2020-12-17T07:43:42Z", "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/SetContextSteps.java", "diffHunk": "@@ -66,66 +61,6 @@ public SetContextSteps(IUiContext uiContext, IWebDriverProvider webDriverProvide\n         this.baseValidations = baseValidations;\n     }\n \n-    /**\n-     * Set the context for further localization of elements to an <b>element</b> specified by the <b>name</b> and\n-     * <b>state</b>\n-     * @param name Any attribute or text value of the element\n-     * @param state A state value of the element\n-     * (<i>Possible values:</i> <b>ENABLED, DISABLED, SELECTED, NOT_SELECTED, VISIBLE, NOT_VISIBLE</b>)\n-    */\n-    @When(\"I change context to a [$state] element with the name '$name'\")\n-    public void changeContextToElementWithName(State state, String name)\n-    {\n-        resetContext();\n-        WebElement element = baseValidations.assertIfElementExists(\n-                String.format(\"An element with the name '%1$s'\", name),\n-                new Locator(WebLocatorType.ELEMENT_NAME, name)\n-                        .addFilter(WebLocatorType.STATE, state.toString()));\n-        uiContext.putSearchContext(element, () -> changeContextToElementWithName(state, name));\n-    }\n-\n-    /**\n-     * Set the context for further localization of elements to an <b>element</b>\n-     * with the specified <b>attribute</b>\n-     * @param attributeType A type of the element's attribute\n-     * @param attributeValue A value of the element's attribute\n-    */\n-    @When(\"I change context to an element with the attribute '$attributeType'='$attributeValue'\")\n-    public void changeContextToElementWithAttribute(String attributeType, String attributeValue)\n-    {\n-        resetContext();\n-\n-        WebElement element = baseValidations.assertIfElementExists(\n-                String.format(AN_ELEMENT_WITH_THE_ATTRIBUTE, attributeType, attributeValue),", "originalCommit": "5c77b714fb3937ee2dd596a079388dd10eda65bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDg3NDYzNQ==", "url": "https://github.com/vividus-framework/vividus/pull/1246#discussion_r544874635", "bodyText": "known issues might be broken here, I propose to keep the commit, but postpone it till 0.3.0", "author": "valfirst", "createdAt": "2020-12-17T07:43:53Z", "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/SetContextSteps.java", "diffHunk": "@@ -66,66 +61,6 @@ public SetContextSteps(IUiContext uiContext, IWebDriverProvider webDriverProvide\n         this.baseValidations = baseValidations;\n     }\n \n-    /**\n-     * Set the context for further localization of elements to an <b>element</b> specified by the <b>name</b> and\n-     * <b>state</b>\n-     * @param name Any attribute or text value of the element\n-     * @param state A state value of the element\n-     * (<i>Possible values:</i> <b>ENABLED, DISABLED, SELECTED, NOT_SELECTED, VISIBLE, NOT_VISIBLE</b>)\n-    */\n-    @When(\"I change context to a [$state] element with the name '$name'\")\n-    public void changeContextToElementWithName(State state, String name)\n-    {\n-        resetContext();\n-        WebElement element = baseValidations.assertIfElementExists(\n-                String.format(\"An element with the name '%1$s'\", name),\n-                new Locator(WebLocatorType.ELEMENT_NAME, name)\n-                        .addFilter(WebLocatorType.STATE, state.toString()));\n-        uiContext.putSearchContext(element, () -> changeContextToElementWithName(state, name));\n-    }\n-\n-    /**\n-     * Set the context for further localization of elements to an <b>element</b>\n-     * with the specified <b>attribute</b>\n-     * @param attributeType A type of the element's attribute\n-     * @param attributeValue A value of the element's attribute\n-    */\n-    @When(\"I change context to an element with the attribute '$attributeType'='$attributeValue'\")\n-    public void changeContextToElementWithAttribute(String attributeType, String attributeValue)\n-    {\n-        resetContext();\n-\n-        WebElement element = baseValidations.assertIfElementExists(\n-                String.format(AN_ELEMENT_WITH_THE_ATTRIBUTE, attributeType, attributeValue),\n-                new Locator(WebLocatorType.XPATH,\n-                        LocatorUtil.getXPathByAttribute(attributeType, attributeValue)));\n-        uiContext.putSearchContext(element, () -> changeContextToElementWithAttribute(attributeType,\n-                attributeValue));\n-    }\n-\n-    /**\n-     * Set the context for further localization of elements to an <b>element</b>\n-     * with the specified <b>attribute</b> and <b>state</b>\n-     * @param attributeType A type of the element's attribute\n-     * @param attributeValue A value of the element's attribute\n-     * @param state A state value of the element\n-     * (<i>Possible values:</i> <b>ENABLED, DISABLED, SELECTED, NOT_SELECTED, VISIBLE, NOT_VISIBLE</b>)\n-    */\n-    @When(\"I change context to a [$state] element with the attribute '$attributeType'='$attributeValue'\")\n-    public void changeContextToStateElementWithAttribute(State state, String attributeType, String attributeValue)\n-    {\n-        resetContext();\n-        WebElement element = baseValidations.assertIfElementExists(String.format(AN_ELEMENT_WITH_THE_ATTRIBUTE,", "originalCommit": "5c77b714fb3937ee2dd596a079388dd10eda65bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "881de97b853f0d9361408780f72f4f68ec702916", "url": "https://github.com/vividus-framework/vividus/commit/881de97b853f0d9361408780f72f4f68ec702916", "message": "[plugin-web-app] Make PMD happy", "committedDate": "2020-12-17T09:35:32Z", "type": "commit"}, {"oid": "881de97b853f0d9361408780f72f4f68ec702916", "url": "https://github.com/vividus-framework/vividus/commit/881de97b853f0d9361408780f72f4f68ec702916", "message": "[plugin-web-app] Make PMD happy", "committedDate": "2020-12-17T09:35:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgzODg2NA==", "url": "https://github.com/vividus-framework/vividus/pull/1246#discussion_r545838864", "bodyText": "isWebElement -> webElement :)", "author": "uarlouski", "createdAt": "2020-12-18T13:44:04Z", "path": "vividus-plugin-web-app/src/main/java/org/vividus/bdd/steps/ui/web/WebElementsSteps.java", "diffHunk": "@@ -68,48 +68,45 @@ public void ifTextMatchesRegex(String regex)\n         }\n         if (!actualText.isEmpty())\n         {\n-            Pattern pattern = Pattern.compile(regex);\n-            assertCondition = pattern.matcher(actualText).find();\n-            if (!assertCondition && isWebElement)\n-            {\n-                String pseudoElementContent = webElementActions\n-                        .getPseudoElementContent((WebElement) getSearchContext());\n-                if (!pseudoElementContent.isEmpty())\n-                {\n-                    assertCondition = pattern.matcher(pseudoElementContent).find();\n-                }\n-            }\n+            assertCondition = verifyText(regex, actualText, isWebElement);\n         }\n         softAssert.assertTrue(\"The text in search context matches regular expression \" + regex,\n                 assertCondition);\n     }\n \n+    private boolean verifyText(String regex, String actualText, boolean isWebElement)", "originalCommit": "881de97b853f0d9361408780f72f4f68ec702916", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}