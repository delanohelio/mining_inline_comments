{"pr_number": 903, "pr_title": "[extension-selenium] Add ability to configure application lifecycle", "pr_createdAt": "2020-09-07T15:41:12Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/903", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4MTc1MA==", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r484681750", "bodyText": "Looks confusing to me. It is a driver's scope, not the application. Could it be driver-life-scope", "author": "ikalinin1", "createdAt": "2020-09-08T06:35:24Z", "path": "vividus-plugin-web-app/src/main/resources/properties/profile/web/profile.properties", "diffHunk": "@@ -42,6 +42,7 @@ web-application.tablet-resolution-width-threshold=1024\n web-application.phone-resolution-width-threshold=640\n web-application.environment-type=test\n web-application.authentication-mode=URL\n+web-application.life-scope=story", "originalCommit": "0f4252e0c033255cd28f4428e0574f819e705d07", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4Njg1OA==", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r484686858", "bodyText": "driver will be not clear for end-users, also I thought about browser-life-scope, but in this case we'll loose naming consistency", "author": "valfirst", "createdAt": "2020-09-08T06:47:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4MTc1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4OTA5Ng==", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r484689096", "bodyText": "In the current naming, it looks like the user controls an application. When he controls session", "author": "ikalinin1", "createdAt": "2020-09-08T06:52:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4MTc1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcyMDk3OA==", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r484720978", "bodyText": "web-application.session-scope\nmobile-application.session-scope\n?", "author": "valfirst", "createdAt": "2020-09-08T07:52:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4MTc1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDcyMzc2MA==", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r484723760", "bodyText": "Looks good to me. Maybe it will be better to roll out voting :)", "author": "ikalinin1", "createdAt": "2020-09-08T07:57:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4MTc1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY4MjM0Mg==", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r484682342", "bodyText": "I propose to throw an exception in case of null, because it's not clear what's the actual behavior user expecting", "author": "ikalinin1", "createdAt": "2020-09-08T06:36:47Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/WebDriverSetupSteps.java", "diffHunk": "@@ -52,8 +54,25 @@ public void beforeStory()\n         processMeta(bddRunContext.getRunningStory().getStory().getMeta());\n     }\n \n+    @AfterScenario(uponType = ScenarioType.ANY)\n+    public void afterScenario()\n+    {\n+        if (webDriverLifeScope == WebDriverLifeScope.SCENARIO)\n+        {\n+            stopWebDriver();\n+        }\n+    }\n+\n     @AfterStory\n     public void afterStory()\n+    {\n+        if (webDriverLifeScope == WebDriverLifeScope.STORY || webDriverLifeScope == null)", "originalCommit": "0f4252e0c033255cd28f4428e0574f819e705d07", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "766885fe75bce1263aea14bdf19faafed5619da3", "url": "https://github.com/vividus-framework/vividus/commit/766885fe75bce1263aea14bdf19faafed5619da3", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-08T15:28:52Z", "type": "forcePushed"}, {"oid": "1f5eb3b23f1e5e6042fde7d09bf5ccc9b7a489b5", "url": "https://github.com/vividus-framework/vividus/commit/1f5eb3b23f1e5e6042fde7d09bf5ccc9b7a489b5", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-08T15:44:09Z", "type": "forcePushed"}, {"oid": "e5588d4afd1c718d236f2286f155313e4dc51059", "url": "https://github.com/vividus-framework/vividus/commit/e5588d4afd1c718d236f2286f155313e4dc51059", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T12:13:26Z", "type": "forcePushed"}, {"oid": "d45ff2ff72dd1aa48e9ffca46e50171a63cda111", "url": "https://github.com/vividus-framework/vividus/commit/d45ff2ff72dd1aa48e9ffca46e50171a63cda111", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T12:24:15Z", "type": "forcePushed"}, {"oid": "96d4bbd69f83dca08bb0661ddcce3576a0ebe0c7", "url": "https://github.com/vividus-framework/vividus/commit/96d4bbd69f83dca08bb0661ddcce3576a0ebe0c7", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T12:25:55Z", "type": "forcePushed"}, {"oid": "bdeabf16a757461818989aecb4e97f82c46469f7", "url": "https://github.com/vividus-framework/vividus/commit/bdeabf16a757461818989aecb4e97f82c46469f7", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T12:28:27Z", "type": "forcePushed"}, {"oid": "80d308d44bd72665056d52673e9905b1bd71a369", "url": "https://github.com/vividus-framework/vividus/commit/80d308d44bd72665056d52673e9905b1bd71a369", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T12:40:08Z", "type": "forcePushed"}, {"oid": "e2fe790a7250c2431899ff332ef72c851bc7ee4a", "url": "https://github.com/vividus-framework/vividus/commit/e2fe790a7250c2431899ff332ef72c851bc7ee4a", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T12:57:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTYwNjU3MQ==", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r485606571", "bodyText": "Hmm what should I do if I get this error and I'm not aware what the \"Application session scope\" is? :)", "author": "uarlouski", "createdAt": "2020-09-09T13:22:39Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/bdd/steps/WebDriverSetupSteps.java", "diffHunk": "@@ -26,15 +29,18 @@\n import org.vividus.selenium.IWebDriverProvider;\n import org.vividus.selenium.manager.IWebDriverManagerContext;\n \n-public class VividusWebDriverSetupSteps\n+public class WebDriverSetupSteps\n {\n+    private final WebDriverSessionScope webDriverSessionScope;\n     private final IWebDriverProvider webDriverProvider;\n     private final IWebDriverManagerContext webDriverManagerContext;\n     private final IBddRunContext bddRunContext;\n \n-    public VividusWebDriverSetupSteps(IWebDriverProvider webDriverProvider,\n+    public WebDriverSetupSteps(WebDriverSessionScope webDriverSessionScope, IWebDriverProvider webDriverProvider,\n             IWebDriverManagerContext webDriverManagerContext, IBddRunContext bddRunContext)\n     {\n+        isTrue(webDriverSessionScope != null, \"Application session scope is not set\");", "originalCommit": "e2fe790a7250c2431899ff332ef72c851bc7ee4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTYxMTUwOA==", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r485611508", "bodyText": "RTFM :)", "author": "ikalinin1", "createdAt": "2020-09-09T13:29:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTYwNjU3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTYwNzY0NA==", "url": "https://github.com/vividus-framework/vividus/pull/903#discussion_r485607644", "bodyText": "life-scope -> session-scope and in previous doc", "author": "uarlouski", "createdAt": "2020-09-09T13:24:06Z", "path": "docs/modules/plugins/partials/selenium-properties.adoc", "diffHunk": "@@ -0,0 +1,12 @@\n+|`{life-scope-property-base}.life-scope`", "originalCommit": "e2fe790a7250c2431899ff332ef72c851bc7ee4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6d1e3614e385d8b9fb7b442f8b6cea22c21de7ae", "url": "https://github.com/vividus-framework/vividus/commit/6d1e3614e385d8b9fb7b442f8b6cea22c21de7ae", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T14:03:38Z", "type": "forcePushed"}, {"oid": "da90998df7face25736ac63811f3fe80bbe1b448", "url": "https://github.com/vividus-framework/vividus/commit/da90998df7face25736ac63811f3fe80bbe1b448", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T14:09:29Z", "type": "forcePushed"}, {"oid": "0b1a3b08bd51de06f7132cdd8d7d7cf0e911b93a", "url": "https://github.com/vividus-framework/vividus/commit/0b1a3b08bd51de06f7132cdd8d7d7cf0e911b93a", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T14:22:32Z", "type": "commit"}, {"oid": "0b1a3b08bd51de06f7132cdd8d7d7cf0e911b93a", "url": "https://github.com/vividus-framework/vividus/commit/0b1a3b08bd51de06f7132cdd8d7d7cf0e911b93a", "message": "[extension-selenium] Add ability to configure application lifecycle", "committedDate": "2020-09-09T14:22:32Z", "type": "forcePushed"}]}