{"pr_number": 489, "pr_title": "Mobile app support", "pr_createdAt": "2020-04-17T18:29:08Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/489", "timeline": [{"oid": "5c28d62c8ba3e1b636fd13718d93c7ad44bccddc", "url": "https://github.com/vividus-framework/vividus/commit/5c28d62c8ba3e1b636fd13718d93c7ad44bccddc", "message": "check build", "committedDate": "2020-04-17T18:43:10Z", "type": "forcePushed"}, {"oid": "759fbad018a4bf37383e4b4a255e92c1f5fc9405", "url": "https://github.com/vividus-framework/vividus/commit/759fbad018a4bf37383e4b4a255e92c1f5fc9405", "message": "check build", "committedDate": "2020-04-17T21:00:13Z", "type": "forcePushed"}, {"oid": "679e5200d857e7397e1570563aaabf58845be145", "url": "https://github.com/vividus-framework/vividus/commit/679e5200d857e7397e1570563aaabf58845be145", "message": "check build", "committedDate": "2020-07-01T15:31:38Z", "type": "forcePushed"}, {"oid": "a6bbce20b59af92569ae410a326bf1cfb21ddd94", "url": "https://github.com/vividus-framework/vividus/commit/a6bbce20b59af92569ae410a326bf1cfb21ddd94", "message": "check build", "committedDate": "2020-07-01T16:02:59Z", "type": "forcePushed"}, {"oid": "e8847fcba5bed4f262a9d03af00b5b8a0f4c6ad9", "url": "https://github.com/vividus-framework/vividus/commit/e8847fcba5bed4f262a9d03af00b5b8a0f4c6ad9", "message": "Mobile app support", "committedDate": "2020-07-03T11:58:36Z", "type": "forcePushed"}, {"oid": "497ee7e0c3cd4912299e58b45af02ca1dcbd7556", "url": "https://github.com/vividus-framework/vividus/commit/497ee7e0c3cd4912299e58b45af02ca1dcbd7556", "message": "Mobile app support", "committedDate": "2020-07-03T14:49:28Z", "type": "forcePushed"}, {"oid": "3cfe48a4a0b1449a1a0f531da7ee86e399c15dff", "url": "https://github.com/vividus-framework/vividus/commit/3cfe48a4a0b1449a1a0f531da7ee86e399c15dff", "message": "Mobile app support", "committedDate": "2020-07-06T08:26:52Z", "type": "forcePushed"}, {"oid": "8401ee25f3da11d1decd197d21aeeac774af5fc8", "url": "https://github.com/vividus-framework/vividus/commit/8401ee25f3da11d1decd197d21aeeac774af5fc8", "message": "Mobile app support", "committedDate": "2020-07-06T08:55:15Z", "type": "forcePushed"}, {"oid": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "url": "https://github.com/vividus-framework/vividus/commit/dc8988a150f443f550d9ca492cb0d25ec2d5d415", "message": "Mobile app support", "committedDate": "2020-07-06T09:19:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE3NzIyOA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450177228", "bodyText": "AbstractVividusDriverFactory -> AbstractVividusWebDriverFactory", "author": "valfirst", "createdAt": "2020-07-06T12:10:46Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/AbstractVividusDriverFactory.java", "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium;\n+\n+import org.jbehave.core.model.Meta;\n+import org.jbehave.core.model.Scenario;\n+import org.jbehave.core.model.Story;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.vividus.bdd.context.IBddRunContext;\n+import org.vividus.bdd.model.MetaWrapper;\n+import org.vividus.bdd.model.RunningStory;\n+import org.vividus.selenium.manager.IWebDriverManagerContext;\n+import org.vividus.selenium.manager.WebDriverManagerParameter;\n+\n+public abstract class AbstractVividusDriverFactory implements IVividusDriverFactory", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE3ODAwMw==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450178003", "bodyText": "DriverFactory -> WebDriverFactory", "author": "valfirst", "createdAt": "2020-07-06T12:12:19Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/DriverFactory.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium;\n+\n+import static java.util.stream.Collectors.toMap;\n+import static org.apache.commons.lang3.StringUtils.equalsAnyIgnoreCase;\n+\n+import java.net.URL;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n+\n+import com.google.common.base.Suppliers;\n+import com.google.common.cache.CacheBuilder;\n+import com.google.common.cache.CacheLoader;\n+import com.google.common.cache.LoadingCache;\n+\n+import org.openqa.selenium.HasCapabilities;\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.vividus.selenium.driver.TextFormattingWebDriver;\n+import org.vividus.util.json.JsonUtils;\n+import org.vividus.util.property.IPropertyParser;\n+\n+public class DriverFactory implements IDriverFactory", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4MDM0Ng==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450180346", "bodyText": "I recommend to make this method abstract and keep empty implementation in child classes", "author": "valfirst", "createdAt": "2020-07-06T12:16:49Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/DriverFactory.java", "diffHunk": "@@ -0,0 +1,166 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium;\n+\n+import static java.util.stream.Collectors.toMap;\n+import static org.apache.commons.lang3.StringUtils.equalsAnyIgnoreCase;\n+\n+import java.net.URL;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n+\n+import com.google.common.base.Suppliers;\n+import com.google.common.cache.CacheBuilder;\n+import com.google.common.cache.CacheLoader;\n+import com.google.common.cache.LoadingCache;\n+\n+import org.openqa.selenium.HasCapabilities;\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.vividus.selenium.driver.TextFormattingWebDriver;\n+import org.vividus.util.json.JsonUtils;\n+import org.vividus.util.property.IPropertyParser;\n+\n+public class DriverFactory implements IDriverFactory\n+{\n+    private static final Logger LOGGER = LoggerFactory.getLogger(DriverFactory.class);\n+\n+    private static final String SELENIUM_GRID_PROPERTY_PREFIX = \"selenium.grid.capabilities.\";\n+    private static final String LOCAL_DRIVER_PROPERTY_PREFIX = \"selenium.capabilities.\";\n+\n+    private final IRemoteWebDriverFactory remoteWebDriverFactory;\n+    private final IPropertyParser propertyParser;\n+    private final JsonUtils jsonUtils;\n+\n+    private URL remoteDriverUrl;\n+\n+    private final Supplier<DesiredCapabilities> seleniumGridDesiredCapabilities = Suppliers.memoize(\n+        () -> getCapabilitiesByPrefix(SELENIUM_GRID_PROPERTY_PREFIX));\n+\n+    private final Supplier<DesiredCapabilities> localDriverDesiredCapabilities = Suppliers.memoize(\n+        () -> getCapabilitiesByPrefix(LOCAL_DRIVER_PROPERTY_PREFIX));\n+\n+    private final LoadingCache<Boolean, DesiredCapabilities> webDriverCapabilities = CacheBuilder.newBuilder()\n+            .build(new CacheLoader<Boolean, DesiredCapabilities>()\n+            {\n+                @Override\n+                public DesiredCapabilities load(Boolean local)\n+                {\n+                    DesiredCapabilities localCapabilities = localDriverDesiredCapabilities.get();\n+                    if (Boolean.TRUE.equals(local))\n+                    {\n+                        return localCapabilities;\n+                    }\n+                    return merge(localCapabilities, seleniumGridDesiredCapabilities.get());\n+                }\n+            });\n+\n+    public DriverFactory(IRemoteWebDriverFactory remoteWebDriverFactory, IPropertyParser propertyParser,\n+            JsonUtils jsonUtils)\n+    {\n+        this.remoteWebDriverFactory = remoteWebDriverFactory;\n+        this.propertyParser = propertyParser;\n+        this.jsonUtils = jsonUtils;\n+    }\n+\n+    private DesiredCapabilities getCapabilitiesByPrefix(String prefix)\n+    {\n+        return propertyParser.getPropertyValuesTreeByPrefix(prefix)\n+            .entrySet()\n+            .stream()\n+            .map(e -> isBoolean(e.getValue())\n+                ? Map.entry(e.getKey(), Boolean.parseBoolean((String) e.getValue()))\n+                : e)\n+            .collect(Collectors.collectingAndThen(toMap(Entry::getKey, Entry::getValue), DesiredCapabilities::new));\n+    }\n+\n+    private boolean isBoolean(Object value)\n+    {\n+        return value instanceof String && equalsAnyIgnoreCase((String) value, \"true\", \"false\");\n+    }\n+\n+    @Override\n+    public WebDriver getRemoteWebDriver(DesiredCapabilities desiredCapabilities)\n+    {\n+        DesiredCapabilities mergedDesiredCapabilities = getWebDriverCapabilities(false, desiredCapabilities);\n+        return createWebDriver(remoteWebDriverFactory.getRemoteWebDriver(remoteDriverUrl,\n+                updateDesiredCapabilities(mergedDesiredCapabilities)));\n+    }\n+\n+    protected WebDriver createWebDriver(WebDriver webDriver)\n+    {\n+        WebDriver driver = new TextFormattingWebDriver(webDriver);\n+        configureWebDriver(driver);\n+\n+        LOGGER.atInfo()\n+              .addArgument(() -> jsonUtils\n+                      .toPrettyJson(WebDriverUtil.unwrap(driver, HasCapabilities.class).getCapabilities().asMap()))\n+              .log(\"Session capabilities:\\n{}\");\n+        return driver;\n+    }\n+\n+    protected DesiredCapabilities updateDesiredCapabilities(DesiredCapabilities desiredCapabilities)\n+    {\n+        return desiredCapabilities;\n+    }\n+\n+    protected void configureWebDriver(WebDriver webDriver)", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4NjEzNg==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450186136", "bodyText": "Given(\"I start mobile application located at $location\")?\nWhy are capabilities needed?", "author": "valfirst", "createdAt": "2020-07-06T12:28:17Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/bdd/steps/ApplicationSteps.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.mobileapp.bdd.steps;\n+\n+import java.util.List;\n+\n+import org.jbehave.core.annotations.Given;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.vividus.mobileapp.bdd.model.DesiredCapability;\n+import org.vividus.selenium.IWebDriverProvider;\n+import org.vividus.selenium.SauceLabsCapabilityType;\n+import org.vividus.selenium.manager.IWebDriverManagerContext;\n+import org.vividus.selenium.manager.WebDriverManagerParameter;\n+\n+import io.appium.java_client.HasSessionDetails;\n+\n+public class ApplicationSteps\n+{\n+    private static final Logger LOGGER = LoggerFactory.getLogger(ApplicationSteps.class);\n+\n+    private final IWebDriverProvider webDriverProvider;\n+    private final IWebDriverManagerContext webDriverManagerContext;\n+\n+    public ApplicationSteps(IWebDriverProvider webDriverProvider, IWebDriverManagerContext webDriverManagerContext)\n+    {\n+        this.webDriverProvider = webDriverProvider;\n+        this.webDriverManagerContext = webDriverManagerContext;\n+    }\n+\n+    @Given(\"I run the application located at `$location` and capabilities:$capabilities\")", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM4MDczMQ==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450380731", "bodyText": "Although we have an opportunity to set desired capabilities thorough meta at story level, by setting desired capabilities at step level we could use it in conjunction with lifecycle ET to run the same story several times on different devices\nImho this is more clear way to setup properties than at meta level", "author": "uarlouski", "createdAt": "2020-07-06T17:41:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4NjEzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM5MzU3MQ==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450393571", "bodyText": "would not it better to name it\nGiven I start mobile application with capabilities: capabilities\n?", "author": "uarlouski", "createdAt": "2020-07-06T18:05:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4NjEzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4NzA0Mw==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450187043", "bodyText": "I propose to do not make mobile_app as embedded vividus meta, let's allow users configure it", "author": "valfirst", "createdAt": "2020-07-06T12:30:01Z", "path": "vividus-plugin-mobile-app/src/main/resources/properties/defaults/run.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+spring.profiles.active=mobile_app\n+\n+bdd.all-meta-filters=groovy: (!layout || layout.contains('mobile_app')) && !skip && (${bdd.meta-filters})", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4NzUyNw==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450187527", "bodyText": "it's not default grid capability, is it?", "author": "valfirst", "createdAt": "2020-07-06T12:30:56Z", "path": "vividus-plugin-mobile-app/src/main/resources/properties/defaults/run.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+spring.profiles.active=mobile_app\n+\n+bdd.all-meta-filters=groovy: (!layout || layout.contains('mobile_app')) && !skip && (${bdd.meta-filters})\n+\n+mobile-native-app=true\n+\n+selenium.grid.appium-version=1.17.0", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4ODcxMg==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450188712", "bodyText": "it doesn't look like generic properties", "author": "valfirst", "createdAt": "2020-07-06T12:33:13Z", "path": "vividus-plugin-mobile-app/src/main/resources/properties/profile/mobile_app/android/profile.properties", "diffHunk": "@@ -0,0 +1,4 @@\n+selenium.grid.device-name=Samsung Galaxy S10 Plus\n+selenium.grid.platform-name=Android\n+selenium.grid.platform-version=9.0\n+selenium.grid.automation-name=UIAutomator2", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE4ODgwNA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450188804", "bodyText": "it doesn't look like generic properties", "author": "valfirst", "createdAt": "2020-07-06T12:33:25Z", "path": "vividus-plugin-mobile-app/src/main/resources/properties/profile/mobile_app/ios/profile.properties", "diffHunk": "@@ -0,0 +1,4 @@\n+selenium.grid.device-name=iPhone 11 Pro\n+selenium.grid.platform-name=iOS\n+selenium.grid.platform-version=13.3\n+selenium.grid.automation-name=XCUITest", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5MjM3Mg==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450192372", "bodyText": "I think we'll remove SauceLabsCapabilityType.java at some point, so I don't recommend to keep using it", "author": "valfirst", "createdAt": "2020-07-06T12:40:25Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/SauceLabsCapabilityType.java", "diffHunk": "@@ -28,4 +28,5 @@\n     String DEVICE = \"device\";\n     String CAPABILITIES = \"capabilities\";\n     String SELENIUM_VERSION = \"seleniumVersion\";\n+    String APP = \"app\";", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5MjczMQ==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450192731", "bodyText": "there are both setter and @Inject, something is redundant", "author": "valfirst", "createdAt": "2020-07-06T12:41:08Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/WebDriverProvider.java", "diffHunk": "@@ -23,16 +23,16 @@\n import com.google.common.eventbus.EventBus;\n \n import org.openqa.selenium.WebDriver;\n+import org.vividus.selenium.event.WebDriverCreateEvent;\n+import org.vividus.selenium.event.WebDriverQuitEvent;\n import org.vividus.testcontext.TestContext;\n-import org.vividus.ui.web.event.WebDriverCreateEvent;\n-import org.vividus.ui.web.event.WebDriverQuitEvent;\n \n public class WebDriverProvider implements IWebDriverProvider\n {\n-    private IVividusWebDriverFactory vividusWebDriverFactory;\n+    @Inject private IVividusDriverFactory vividusWebDriverFactory;", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5Mjk5MA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450192990", "bodyText": "DESIRED_CAPABILITIES_KEY", "author": "valfirst", "createdAt": "2020-07-06T12:41:38Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/manager/DriverManager.java", "diffHunk": "@@ -0,0 +1,285 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium.manager;\n+\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.function.BooleanSupplier;\n+import java.util.function.Consumer;\n+import java.util.function.Function;\n+import java.util.stream.Stream;\n+\n+import javax.inject.Inject;\n+\n+import org.openqa.selenium.Capabilities;\n+import org.openqa.selenium.ContextAware;\n+import org.openqa.selenium.Dimension;\n+import org.openqa.selenium.HasCapabilities;\n+import org.openqa.selenium.Platform;\n+import org.openqa.selenium.Rotatable;\n+import org.openqa.selenium.ScreenOrientation;\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.remote.BrowserType;\n+import org.openqa.selenium.remote.CapabilityType;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.vividus.selenium.IWebDriverProvider;\n+import org.vividus.selenium.SauceLabsCapabilityType;\n+import org.vividus.selenium.WebDriverUtil;\n+\n+import io.appium.java_client.MobileDriver;\n+import io.appium.java_client.MobileElement;\n+import io.appium.java_client.remote.MobilePlatform;\n+\n+public class DriverManager implements IDriverManager\n+{\n+    private static final String DESIREDCAPABILITIES_KEY = \"desired\";", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5NDE0Mw==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450194143", "bodyText": "org.vividus.selenium.mobileapp the same for all other similar places", "author": "valfirst", "createdAt": "2020-07-06T12:43:52Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/selenium/VividusMobileAppDriverFactory.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.mobileapp.selenium;", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDE5NDU5NA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r450194594", "bodyText": "NAME - is SL specific capability, I don't think we should use it in generic modules", "author": "valfirst", "createdAt": "2020-07-06T12:44:43Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/mobileapp/selenium/VividusMobileAppDriverFactory.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.mobileapp.selenium;\n+\n+import org.jbehave.core.model.Scenario;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.vividus.bdd.context.IBddRunContext;\n+import org.vividus.bdd.model.MetaWrapper;\n+import org.vividus.bdd.model.RunningStory;\n+import org.vividus.selenium.AbstractVividusDriverFactory;\n+import org.vividus.selenium.IDriverFactory;\n+import org.vividus.selenium.SauceLabsCapabilityType;\n+import org.vividus.selenium.VividusWebDriver;\n+import org.vividus.selenium.manager.IWebDriverManagerContext;\n+\n+public class VividusMobileAppDriverFactory extends AbstractVividusDriverFactory\n+{\n+    private final IDriverFactory driverFactory;\n+\n+    public VividusMobileAppDriverFactory(IBddRunContext bddRunContext, IWebDriverManagerContext webDriverManagerContext,\n+            IDriverFactory driverFactory)\n+    {\n+        super(bddRunContext, webDriverManagerContext);\n+        this.driverFactory = driverFactory;\n+    }\n+\n+    @Override\n+    protected void configureVividusWebDriver(VividusWebDriver vividusWebDriver)\n+    {\n+        DesiredCapabilities capabilities = vividusWebDriver.getDesiredCapabilities();\n+        vividusWebDriver.setWebDriver(driverFactory.getRemoteWebDriver(capabilities));\n+        vividusWebDriver.setRemote(false);\n+    }\n+\n+    @Override\n+    protected void setDesiredCapabilities(DesiredCapabilities desiredCapabilities, RunningStory runningStory,\n+            Scenario scenario, MetaWrapper metaWrapper)\n+    {\n+        desiredCapabilities.setCapability(SauceLabsCapabilityType.NAME, runningStory.getName());", "originalCommit": "dc8988a150f443f550d9ca492cb0d25ec2d5d415", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8be748cee581e3db27a66a64c88d5edfc5551d5f", "url": "https://github.com/vividus-framework/vividus/commit/8be748cee581e3db27a66a64c88d5edfc5551d5f", "message": "Fix comments [1]", "committedDate": "2020-07-07T11:46:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3MzcwNg==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451573706", "bodyText": "I think simulators == emulators", "author": "valfirst", "createdAt": "2020-07-08T14:08:31Z", "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators", "originalCommit": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NTA4NA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451575084", "bodyText": "I believe 3 above properties are not mobile specific, but Selenium Grid generic ones, so it makes sense to reflect it somehow here", "author": "valfirst", "createdAt": "2020-07-08T14:10:17Z", "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host", "originalCommit": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NTg1OA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451575858", "bodyText": "can we provided table-like view with mapping Mobile OS <> recommended automation engine", "author": "valfirst", "createdAt": "2020-07-08T14:11:16Z", "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host\n+\n+=== Optional\n+\n+* `selenium.grid.automation-name` - defines automation engine to use, e.g. `UIAutomator2` for `Android` platform and `XCUITest` for `iOS` platform", "originalCommit": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NjMxOQ==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451576319", "bodyText": "it should go first in optional properties", "author": "valfirst", "createdAt": "2020-07-08T14:11:50Z", "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host\n+\n+=== Optional\n+\n+* `selenium.grid.automation-name` - defines automation engine to use, e.g. `UIAutomator2` for `Android` platform and `XCUITest` for `iOS` platform\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`", "originalCommit": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NjgxOQ==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451576819", "bodyText": "it should go last in profiles", "author": "valfirst", "createdAt": "2020-07-08T14:12:30Z", "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host\n+\n+=== Optional\n+\n+* `selenium.grid.automation-name` - defines automation engine to use, e.g. `UIAutomator2` for `Android` platform and `XCUITest` for `iOS` platform\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`\n+\n+== Profiles\n+\n+=== Browserstack", "originalCommit": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU3NzUyNA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r451577524", "bodyText": "create the actual link instead of URL", "author": "valfirst", "createdAt": "2020-07-08T14:13:28Z", "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,111 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, simulators and emulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+* `selenium.grid.username` - defines remote grid username\n+* `selenium.grid.password` - defines remote grid password\n+* `selenium.grid.host` - defines remote grid host\n+\n+=== Optional\n+\n+* `selenium.grid.automation-name` - defines automation engine to use, e.g. `UIAutomator2` for `Android` platform and `XCUITest` for `iOS` platform\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`\n+\n+== Profiles\n+\n+=== Browserstack\n+\n+* The profile can be enabled by adding `browserstack/mobile_app` to `configuration.profiles` property\n+* Browserstack specific properties must be prepended with `selenium.grid.capabilities.bstack\\:options.` prefix, meaning given a property `projectName` with a value `My Project` the resulting property will be `selenium.grid.capabilities.bstack\\:options.projectName=My Project`\n+* Appium specific properties in browserstack must be prepended with `selenium.grid.capabilities.appium\\:options.` prefix, meaning given a property `clearSystemFiles` with a value `true` the resulting property will be `selenium.grid.capabilities.appium\\:options.clearSystemFiles=true`\n+* Platform configurator can be found by the https://www.browserstack.com/automate/capabilities?tag=selenium-4 link", "originalCommit": "becf7b8fbfe8a62acf8703f2072c0f289cf9b7fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "url": "https://github.com/vividus-framework/vividus/commit/fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "message": "Mobile app support", "committedDate": "2020-07-10T11:18:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0MTM0OA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453541348", "bodyText": "looks confusing, like it relates to a configuraiton.properties when it relates to remote tests execution", "author": "ikalinin1", "createdAt": "2020-07-13T10:07:46Z", "path": "docs/modules/ROOT/pages/configuration.adoc", "diffHunk": "@@ -0,0 +1,7 @@\n+= Configuration Properties", "originalCommit": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0MjM0Mg==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453542342", "bodyText": "use some version instead of placeholder?", "author": "ikalinin1", "createdAt": "2020-07-13T10:09:39Z", "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,124 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, Android Emulators and iOS Simulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')", "originalCommit": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0MzA3NA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453543074", "bodyText": "enging - typo", "author": "ikalinin1", "createdAt": "2020-07-13T10:10:52Z", "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,124 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, Android Emulators and iOS Simulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+\n+See xref:ROOT:configuration.adoc[Selenium Grid] properties to configure remote grid\n+\n+=== Optional\n+\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`\n+* `selenium.grid.automation-name` - defines automation engine to use, see <<automation-engines, automation engines>> table for details\n+\n+.[[automation-engines]]Automation engines\n+[cols=\"1,2\", options=\"header\"]\n+|===\n+\n+|Platform\n+|Recommended enging", "originalCommit": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0MzUxNQ==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453543515", "bodyText": "add some external links to get more info about underlying engines?", "author": "ikalinin1", "createdAt": "2020-07-13T10:11:44Z", "path": "docs/modules/plugins/pages/plugin-mobile-app.adoc", "diffHunk": "@@ -0,0 +1,124 @@\n+= Plugin Mobile App\n+\n+== General Info\n+\n+The plugin provides functionality to test mobile application on real devides, Android Emulators and iOS Simulators\n+\n+== Installation\n+\n+.build.gradle\n+[source,gradle]\n+----\n+implementation(group: 'org.vividus', name: 'vividus-plugin-mobile-app', version: '<version>')\n+----\n+\n+== Properties\n+\n+=== Required\n+\n+* `selenium.grid.device-name` - defines device name to run tests on\n+\n+See xref:ROOT:configuration.adoc[Selenium Grid] properties to configure remote grid\n+\n+=== Optional\n+\n+* `selenium.grid.platform-name` - defines mobile OS to use, e.g. `Android` or `iOS`\n+* `selenium.grid.automation-name` - defines automation engine to use, see <<automation-engines, automation engines>> table for details", "originalCommit": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0NDA5Mw==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453544093", "bodyText": "should be before MongoDB?", "author": "ikalinin1", "createdAt": "2020-07-13T10:12:49Z", "path": "docs/modules/plugins/nav.adoc", "diffHunk": "@@ -8,6 +8,7 @@\n * xref:plugin-excel.adoc[Excel*]\n * xref:plugin-html.adoc[HTML*]\n * xref:plugin-mongodb.adoc[MongoDB*]\n+* xref:plugin-mobile-app.adoc[Mobile App]", "originalCommit": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0NzQ4OQ==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453547489", "bodyText": "don't you mind to align it with getPropertyValuesTreeByPrefix?", "author": "ikalinin1", "createdAt": "2020-07-13T10:18:58Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/AbstractWebDriverFactory.java", "diffHunk": "@@ -0,0 +1,175 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.selenium;\n+\n+import static java.util.stream.Collectors.toMap;\n+import static org.apache.commons.lang3.StringUtils.equalsAnyIgnoreCase;\n+\n+import java.net.URL;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Map.Entry;\n+import java.util.function.Supplier;\n+import java.util.stream.Collectors;\n+\n+import com.google.common.base.Suppliers;\n+import com.google.common.cache.CacheBuilder;\n+import com.google.common.cache.CacheLoader;\n+import com.google.common.cache.LoadingCache;\n+\n+import org.openqa.selenium.HasCapabilities;\n+import org.openqa.selenium.WebDriver;\n+import org.openqa.selenium.remote.DesiredCapabilities;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.vividus.selenium.driver.TextFormattingWebDriver;\n+import org.vividus.util.json.JsonUtils;\n+import org.vividus.util.property.IPropertyParser;\n+\n+public abstract class AbstractWebDriverFactory implements IGenericWebDriverFactory\n+{\n+    private static final Logger LOGGER = LoggerFactory.getLogger(AbstractWebDriverFactory.class);\n+\n+    private static final String SELENIUM_GRID_PROPERTY_PREFIX = \"selenium.grid.capabilities.\";\n+    private static final String LOCAL_DRIVER_PROPERTY_PREFIX = \"selenium.capabilities.\";\n+\n+    private final IRemoteWebDriverFactory remoteWebDriverFactory;\n+    private final IPropertyParser propertyParser;\n+    private final JsonUtils jsonUtils;\n+\n+    private URL remoteDriverUrl;\n+\n+    private final Supplier<DesiredCapabilities> seleniumGridDesiredCapabilities = Suppliers.memoize(\n+        () -> getCapabilitiesByPrefix(SELENIUM_GRID_PROPERTY_PREFIX));\n+\n+    private final Supplier<DesiredCapabilities> localDriverDesiredCapabilities = Suppliers.memoize(\n+        () -> getCapabilitiesByPrefix(LOCAL_DRIVER_PROPERTY_PREFIX));\n+\n+    private final LoadingCache<Boolean, DesiredCapabilities> webDriverCapabilities = CacheBuilder.newBuilder()\n+            .build(new CacheLoader<Boolean, DesiredCapabilities>()\n+            {\n+                @Override\n+                public DesiredCapabilities load(Boolean local)\n+                {\n+                    DesiredCapabilities localCapabilities = localDriverDesiredCapabilities.get();\n+                    if (Boolean.TRUE.equals(local))\n+                    {\n+                        return localCapabilities;\n+                    }\n+                    return merge(localCapabilities, seleniumGridDesiredCapabilities.get());\n+                }\n+            });\n+\n+    public AbstractWebDriverFactory(IRemoteWebDriverFactory remoteWebDriverFactory, IPropertyParser propertyParser,\n+            JsonUtils jsonUtils)\n+    {\n+        this.remoteWebDriverFactory = remoteWebDriverFactory;\n+        this.propertyParser = propertyParser;\n+        this.jsonUtils = jsonUtils;\n+    }\n+\n+    private DesiredCapabilities getCapabilitiesByPrefix(String prefix)\n+    {\n+        return propertyParser.getPropertyValuesTreeByPrefix(prefix)\n+            .entrySet()", "originalCommit": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0ODc4Mw==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453548783", "bodyText": "Why it can't be part of mobile-app plugin?\nIf you starting web profile you will have RemoteDriverFactory if you starting the mobile app profile you will have an available factory for ios/android", "author": "ikalinin1", "createdAt": "2020-07-13T10:21:24Z", "path": "vividus-extension-selenium/src/main/java/org/vividus/selenium/RemoteWebDriverFactory.java", "diffHunk": "@@ -30,11 +30,11 @@\n     @Override\n     public RemoteWebDriver getRemoteWebDriver(URL url, Capabilities capabilities)\n     {\n-        if (WebDriverManager.isIOS(capabilities))\n+        if (GenericWebDriverManager.isIOS(capabilities))", "originalCommit": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTYyNDI0Mg==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r455624242", "bodyText": "Discussed privately", "author": "uarlouski", "createdAt": "2020-07-16T08:43:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU0ODc4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1MTcyMw==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453551723", "bodyText": "why it is necessary?", "author": "ikalinin1", "createdAt": "2020-07-13T10:26:44Z", "path": "vividus-plugin-applitools/src/main/java/org/vividus/bdd/converter/ExamplesTableToApplitoolsVisualChecksConverter.java", "diffHunk": "@@ -20,15 +20,12 @@\n import java.util.List;\n import java.util.stream.Collectors;\n \n-import javax.inject.Named;\n-\n import org.apache.commons.lang3.Validate;\n import org.jbehave.core.model.ExamplesTable;\n import org.jbehave.core.steps.ParameterConverters.AbstractChainableParameterConverter;\n import org.vividus.visual.eyes.factory.ApplitoolsVisualCheckFactory;\n import org.vividus.visual.eyes.model.ApplitoolsVisualCheck;\n \n-@Named", "originalCommit": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE0NTY0Mw==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r455145643", "bodyText": "due to @nAmed and generic package that we scan converters are loaded regardless of the current profile, so when we start up mobile_app profile this converter is registered as a bean, but since it has dependencies on beans from web profile, the spring context startup fails", "author": "uarlouski", "createdAt": "2020-07-15T15:35:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1MTcyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzk4NA==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453553984", "bodyText": "why not name?\nDesiredCapability capability = new DC...;\ncapability.setName() vs capability.setCapabilityName()", "author": "ikalinin1", "createdAt": "2020-07-13T10:30:56Z", "path": "vividus-plugin-mobile-app/src/main/java/org/vividus/bdd/mobileapp/model/DesiredCapability.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*\n+ * Copyright 2019-2020 the original author or authors.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.vividus.bdd.mobileapp.model;\n+\n+import org.jbehave.core.annotations.AsParameters;\n+\n+@AsParameters\n+public class DesiredCapability\n+{\n+    private String capabilityName;", "originalCommit": "fee7530497b90fdc8c5dd589cd10660f2cc2a1eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1NDE2OQ==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r453554169", "bodyText": "It's like\nList.getListSize()", "author": "ikalinin1", "createdAt": "2020-07-13T10:31:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzk4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE0OTEwNg==", "url": "https://github.com/vividus-framework/vividus/pull/489#discussion_r455149106", "bodyText": "followed the same name as declared in DesiredCapabilities class", "author": "uarlouski", "createdAt": "2020-07-15T15:40:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU1Mzk4NA=="}], "type": "inlineReview"}, {"oid": "24e9f741c870c2650cc6ba41c2d8063ffb015e88", "url": "https://github.com/vividus-framework/vividus/commit/24e9f741c870c2650cc6ba41c2d8063ffb015e88", "message": "Mobile app support", "committedDate": "2020-07-16T08:39:14Z", "type": "forcePushed"}, {"oid": "3b5522fdaebd8d5c49b7160d7231076764db8dc2", "url": "https://github.com/vividus-framework/vividus/commit/3b5522fdaebd8d5c49b7160d7231076764db8dc2", "message": "Mobile app support", "committedDate": "2020-07-16T08:55:10Z", "type": "forcePushed"}, {"oid": "c17c42ca867f7e683e09955836e9c27d2673682c", "url": "https://github.com/vividus-framework/vividus/commit/c17c42ca867f7e683e09955836e9c27d2673682c", "message": "Mobile app support", "committedDate": "2020-07-16T08:59:11Z", "type": "forcePushed"}, {"oid": "c42ae38caf1b6cacfb4e10aace7c1ba4ff0fe4fd", "url": "https://github.com/vividus-framework/vividus/commit/c42ae38caf1b6cacfb4e10aace7c1ba4ff0fe4fd", "message": "Mobile app support", "committedDate": "2020-07-16T10:29:30Z", "type": "forcePushed"}, {"oid": "c07f568165a4e7c21c59091e9eb2a23ca55f6d35", "url": "https://github.com/vividus-framework/vividus/commit/c07f568165a4e7c21c59091e9eb2a23ca55f6d35", "message": "Mobile app support", "committedDate": "2020-07-22T19:46:29Z", "type": "commit"}, {"oid": "c07f568165a4e7c21c59091e9eb2a23ca55f6d35", "url": "https://github.com/vividus-framework/vividus/commit/c07f568165a4e7c21c59091e9eb2a23ca55f6d35", "message": "Mobile app support", "committedDate": "2020-07-22T19:46:29Z", "type": "forcePushed"}]}