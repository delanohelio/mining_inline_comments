{"pr_number": 561, "pr_title": "[plugin-web-app] Use instant scroll behavior for screenshots taking", "pr_createdAt": "2020-05-11T11:45:35Z", "pr_url": "https://github.com/vividus-framework/vividus/pull/561", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk5Njc1Mw==", "url": "https://github.com/vividus-framework/vividus/pull/561#discussion_r422996753", "bodyText": "IE doesn't support this API and only the latest version (24.03.2020) of Safari supports it: https://caniuse.com/#search=scrollTo", "author": "valfirst", "createdAt": "2020-05-11T12:16:10Z", "path": "vividus-plugin-web-app/src/main/java/ru/yandex/qatools/ashot/shooting/DebuggingViewportPastingDecorator.java", "diffHunk": "@@ -39,6 +39,8 @@\n  */\n // CHECKSTYLE:OFF\n public class DebuggingViewportPastingDecorator extends ShootingDecorator {\n+    private static final String SCROLL_Y = \n+            \".scrollTo({\\\"top\\\":arguments[0], \\\"left\\\": 0, \\\"behavior\\\":\\\"instant\\\"}); return [];\";", "originalCommit": "906850c2ed4eae95736e650ab3f2f99b07821705", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA4NjUxMg==", "url": "https://github.com/vividus-framework/vividus/pull/561#discussion_r423086512", "bodyText": "Do you agree to use it for the browsers supporting the API?", "author": "ikalinin1", "createdAt": "2020-05-11T14:36:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk5Njc1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzIyNjg4MA==", "url": "https://github.com/vividus-framework/vividus/pull/561#discussion_r423226880", "bodyText": "yes, sounds reasonable", "author": "valfirst", "createdAt": "2020-05-11T18:12:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk5Njc1Mw=="}], "type": "inlineReview"}, {"oid": "9d2f57f16bb3ea667a4ff742fc64550337d2efd6", "url": "https://github.com/vividus-framework/vividus/commit/9d2f57f16bb3ea667a4ff742fc64550337d2efd6", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking", "committedDate": "2020-05-12T06:49:41Z", "type": "forcePushed"}, {"oid": "5427ef34c55693c41fcb2b3e64aced7fd053d01b", "url": "https://github.com/vividus-framework/vividus/commit/5427ef34c55693c41fcb2b3e64aced7fd053d01b", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking", "committedDate": "2020-05-12T06:56:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzUxNzY3Nw==", "url": "https://github.com/vividus-framework/vividus/pull/561#discussion_r423517677", "bodyText": "what about moving this part to constructor and converting getTarget() to a constructor parameter?", "author": "valfirst", "createdAt": "2020-05-12T07:25:48Z", "path": "vividus-plugin-web-app/src/main/java/ru/yandex/qatools/ashot/shooting/DebuggingViewportPastingDecorator.java", "diffHunk": "@@ -39,11 +39,27 @@\n  */\n // CHECKSTYLE:OFF\n public class DebuggingViewportPastingDecorator extends ShootingDecorator {\n+    private static final String SCROLL_Y_TEMPLATE =\n+              \"if ('scrollBehavior' in document.documentElement.style) {\"\n+            + \"    %1$s.scrollTo({\"\n+            + \"        \\\"top\\\": arguments[0],\"\n+            + \"        \\\"left\\\": 0,\"\n+            + \"        \\\"behavior\\\": \\\"instant\\\"\"\n+            + \"    });\"\n+            + \"} else {\"\n+            + \"    %1$s.scrollTo(0, arguments[0]);\"\n+            + \"}\"\n+            + \"return [];\";\n     private static final long serialVersionUID = 4173686031614281540L;\n     private static final String CURRENT_SCROLL = \"current_scroll_\";\n     protected int scrollTimeout = 0;\n     private Coords shootingArea;\n     private transient ScreenshotDebugger screenshotDebugger;\n+    protected final String scrollYScript;\n+\n+    {\n+        scrollYScript = String.format(SCROLL_Y_TEMPLATE, getTarget());", "originalCommit": "5427ef34c55693c41fcb2b3e64aced7fd053d01b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ba3346c6d4a23b70d898e9f3877a92bf73992a3c", "url": "https://github.com/vividus-framework/vividus/commit/ba3346c6d4a23b70d898e9f3877a92bf73992a3c", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking", "committedDate": "2020-05-12T09:46:38Z", "type": "forcePushed"}, {"oid": "dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6", "url": "https://github.com/vividus-framework/vividus/commit/dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking", "committedDate": "2020-05-12T09:57:45Z", "type": "commit"}, {"oid": "dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6", "url": "https://github.com/vividus-framework/vividus/commit/dda0d2a1b7ca9a39ae81f6ef3d5ae624405b5cd6", "message": "[plugin-web-app] Use instant scroll behavior for screenshots taking", "committedDate": "2020-05-12T09:57:45Z", "type": "forcePushed"}]}