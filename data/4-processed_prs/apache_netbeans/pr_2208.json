{"pr_number": 2208, "pr_title": "[NETBEANS-4486] Fixed unit tests for Latte Templates", "pr_createdAt": "2020-06-21T07:05:34Z", "pr_url": "https://github.com/apache/netbeans/pull/2208", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r443331536", "bodyText": "Well, should comment out them with the reason if test data doesn't exist.", "author": "junichi11", "createdAt": "2020-06-22T05:58:07Z", "path": "php/php.latte/test/unit/src/org/netbeans/modules/php/latte/indent/LatteIndenterTest.java", "diffHunk": "@@ -40,22 +40,6 @@ public void testIfElseBlock() throws Exception {\n         indent(\"testIfElseBlock\");\n     }\n \n-    public void testRealFile_01() throws Exception {", "originalCommit": "4be880e0b62cae01601043d4e5b2ac9a74aae25e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM4NDgzOA==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r443384838", "bodyText": "Test files were not part of donation.\nSimilar problem is in Symfony and Symfony 2 modules.\nI sent question to dev@ about it.", "author": "KacerCZ", "createdAt": "2020-06-22T08:07:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQ5MzM2OA==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r443493368", "bodyText": "Test files were not part of donation.\n\nI know it. Many files were removed on the donation review of Oracle. Because of something problem.\n\nI sent question to dev@ about it.\n\nPlease add it to the description (some people might not check all emails like me...).\nIt would be nice if you can add the link for the thread.\nI've replied.", "author": "junichi11", "createdAt": "2020-06-22T11:29:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxMDM4Nw==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r443510387", "bodyText": "It is definitely pity that these files are not donated. They were tested from some reason.", "author": "tmysik", "createdAt": "2020-06-22T12:05:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUxNTc2MQ==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r443515761", "bodyText": "Files in Oracle repository are here: https://hg.netbeans.org/releases/file/5fd841261bf9/php.latte/test/unit/data/testfiles/indent\nThey were not donated probably because they weren't from Oracle - copyright says author is Ond\u0159ej Brejla.\nI'm not sure what exactly they were testing. Maybe replacing them with newly created sample files can be enough.", "author": "KacerCZ", "createdAt": "2020-06-22T12:16:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzUyMDM0Mg==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r443520342", "bodyText": "Ondra was my colleague working on the PHP support in NetBeans so - it is weird :)\n@obrejla Ondro, could we simply use those files and add them in this review? Don't you remember/know the origin of the files? :) Thanks!", "author": "tmysik", "createdAt": "2020-06-22T12:24:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDIxOTYxMg==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r444219612", "bodyText": "Hehe, it's a real file from my Eciovni package https://github.com/obrejla/Eciovni ...You can definitely use it for testing :)", "author": "obrejla", "createdAt": "2020-06-23T13:23:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDIyMDg2NQ==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r444220865", "bodyText": "And imho it was testing that the parser will not break the parsing loop on a real-world valid file. But you know...it's 10 years already \ud83e\udd37\u200d\u2642\ufe0f", "author": "obrejla", "createdAt": "2020-06-23T13:25:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwMDQxOA==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r444700418", "bodyText": "@KacerCZ\nSo, please, could you add those files back there? We have Ondra's agreement here, I hope this could be OK. Thanks!\nCC @obrejla @junichi11", "author": "tmysik", "createdAt": "2020-06-24T07:33:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwMjg4Ng==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r444702886", "bodyText": "I tried it yesterday, but failed with file encoding problems.\nSee https://lists.apache.org/thread.html/ra565c8b965dada529eaed747a2e0ef1aa3aedae8fdc02b570550cdfc%40%3Cdev.netbeans.apache.org%3E", "author": "KacerCZ", "createdAt": "2020-06-24T07:38:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcwNzM3NA==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r444707374", "bodyText": "This advice does not work?\n\nFor testing purposes, I'd suggest to place a FileEncodingQueryImpl into\nMockLookup in the tests, as here:\norg.openide.text.DataEditorSupportEncodingTest", "author": "tmysik", "createdAt": "2020-06-24T07:47:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE0NTEzMw==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r445145133", "bodyText": "It worked, so I updated PR and added two real lile tests.", "author": "KacerCZ", "createdAt": "2020-06-24T20:14:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTUzNg=="}], "type": "inlineReview"}, {"oid": "755f3ab78299656f5386d8e19541f2ddb2e06724", "url": "https://github.com/apache/netbeans/commit/755f3ab78299656f5386d8e19541f2ddb2e06724", "message": "Merge branch 'master' into netbeans-4486-fix-latte-tests", "committedDate": "2020-06-24T20:10:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE4MTU4Ng==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r445181586", "bodyText": "@matthiasblaesing I think that we have to write the correct license. Am I wrong?", "author": "junichi11", "createdAt": "2020-06-24T21:27:30Z", "path": "php/php.latte/test/unit/data/testfiles/indent/testRealFile_01.latte", "diffHunk": "@@ -0,0 +1,212 @@\n+{*\n+ * File source: https://github.com/obrejla/Eciovni/blob/master/src/Eciovni.latte", "originalCommit": "755f3ab78299656f5386d8e19541f2ddb2e06724", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIwMDA1MQ==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r445200051", "bodyText": "Here is text of license fot source package: https://github.com/obrejla/Eciovni/blob/master/license.txt\nSo I'll put it in comment at the begining of the file, right?", "author": "KacerCZ", "createdAt": "2020-06-24T22:10:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE4MTU4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIwMjUxMQ==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r445202511", "bodyText": "Maybe, Yes. Matthias should tell us the proper way.", "author": "junichi11", "createdAt": "2020-06-24T22:17:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE4MTU4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU3MDU0Ng==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r446570546", "bodyText": "I found PRs #751 and #720 adding external files with New BSD License.\nI prepared added files in same way.", "author": "KacerCZ", "createdAt": "2020-06-27T21:47:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE4MTU4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU3NDM4Mw==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r446574383", "bodyText": "@KacerCZ No. They were added as external files because the license is GPL(we can't add files of GPL). Anyway, please wait until you get a reply.\nNOTE: You might not be able to get a response, review, and more soon, but just wait...", "author": "junichi11", "createdAt": "2020-06-27T22:32:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE4MTU4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU5ODkwOQ==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r446598909", "bodyText": "@junichi11 The mentioned PRs also added files in similar case as discussed here (third party code, New BDS License):\n\nhttps://github.com/apache/netbeans/blob/master/php/php.editor/test/unit/data/testfiles/actions/testImportData/libs/nette.min.php\nhttps://github.com/apache/netbeans/blob/master/php/php.editor/test/unit/data/testfiles/verification/testEmptyStatementHint.php\nI believe my last changes made this compliant with licensing requirements. Now I'll wait for review.", "author": "KacerCZ", "createdAt": "2020-06-28T04:32:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE4MTU4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE5OTE1NQ==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r445199155", "bodyText": "I don't think that it's good to remove them completely. They should have been added for some reason. Someone might be able to fix them in the future (although I didn't check what they were tests for, I'm not sure whether we can fix). So, we should comment them out with the reason(e.g. test files were not donated) if you don't fix them.", "author": "junichi11", "createdAt": "2020-06-24T22:08:17Z", "path": "php/php.latte/test/unit/src/org/netbeans/modules/php/latte/parser/LatteParserErrorTest.java", "diffHunk": "@@ -43,18 +43,6 @@ public void testIssue245728_03() throws Exception {\n         checkErrors(\"testfiles/parser/issue245728_03.latte\");\n     }\n \n-    public void testIssue245728_04() throws Exception {", "originalCommit": "755f3ab78299656f5386d8e19541f2ddb2e06724", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIxNDU3Nw==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r445214577", "bodyText": "I returned methods, commented and added explanation as you suggested.", "author": "KacerCZ", "createdAt": "2020-06-24T22:52:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE5OTE1NQ=="}], "type": "inlineReview"}, {"oid": "566c5fd31ca419b857f4b3ef818741d6855f521e", "url": "https://github.com/apache/netbeans/commit/566c5fd31ca419b857f4b3ef818741d6855f521e", "message": "Merge branch 'master' into netbeans-4486-fix-latte-tests", "committedDate": "2020-06-24T22:49:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMyMDM0OA==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r445320348", "bodyText": "Silly question: are these tests invalid/outdated for some reason ? The content of testRealFile_03/04 seems to reside in HG, and seems as a copy of https://github.com/obrejla/Pollie/blob/master/OndrejBrejla/Pollie/PollieForm.latte", "author": "sdedic", "createdAt": "2020-06-25T05:48:05Z", "path": "php/php.latte/test/unit/src/org/netbeans/modules/php/latte/indent/LatteIndenterTest.java", "diffHunk": "@@ -48,14 +48,6 @@ public void testRealFile_02() throws Exception {\n         indent(\"testRealFile_02\");\n     }\n \n-    public void testRealFile_03() throws Exception {", "originalCommit": "566c5fd31ca419b857f4b3ef818741d6855f521e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMyNjE3Mg==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r445326172", "bodyText": "I'll add them after correct way how to include them will be consulted with @matthiasblaesing .", "author": "KacerCZ", "createdAt": "2020-06-25T06:06:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMyMDM0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTgzMjkzMg==", "url": "https://github.com/apache/netbeans/pull/2208#discussion_r445832932", "bodyText": "Remainig test files were added. They contain link to source and license (New BSD License).", "author": "KacerCZ", "createdAt": "2020-06-25T20:55:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMyMDM0OA=="}], "type": "inlineReview"}, {"oid": "f21f854cf5d11df2d66525bec4d5dd33c271f1fd", "url": "https://github.com/apache/netbeans/commit/f21f854cf5d11df2d66525bec4d5dd33c271f1fd", "message": "Merge branch 'master' into netbeans-4486-fix-latte-tests", "committedDate": "2020-06-25T20:48:35Z", "type": "forcePushed"}, {"oid": "b5d376cfb1203a87f1dad124c49756c5fe2da7f2", "url": "https://github.com/apache/netbeans/commit/b5d376cfb1203a87f1dad124c49756c5fe2da7f2", "message": "Merge branch 'master' into netbeans-4486-fix-latte-tests", "committedDate": "2020-06-27T21:30:29Z", "type": "forcePushed"}, {"oid": "06492ff91d83879d4d4d7e2b2d209b84e39f1a5d", "url": "https://github.com/apache/netbeans/commit/06492ff91d83879d4d4d7e2b2d209b84e39f1a5d", "message": "[NETBEANS-4483] Fixed unit tests for Latte Templates\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4486\n\n- Deleted tests related to files removed during donation from Oracle.\n- Deleted unused files.\n- Fixed loading of files containig UTF-8 characters (test\n  LatteCompletionTest::testCompletion_03() was failing because of this).\n- Enabled tests in Travis and Github Actions.", "committedDate": "2020-06-28T23:10:02Z", "type": "forcePushed"}, {"oid": "c00efa0f0140b7315bce33da3a5aaeb168338453", "url": "https://github.com/apache/netbeans/commit/c00efa0f0140b7315bce33da3a5aaeb168338453", "message": "[NETBEANS-4483] Fixed unit tests for Latte Templates\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4486\n\n- Deleted tests related to files removed during donation from Oracle.\n- Deleted unused files.\n- Fixed loading of files containig UTF-8 characters (test\n  LatteCompletionTest::testCompletion_03() was failing because of this).\n- Enabled tests in Travis and Github Actions.", "committedDate": "2020-06-29T07:41:27Z", "type": "commit"}, {"oid": "c00efa0f0140b7315bce33da3a5aaeb168338453", "url": "https://github.com/apache/netbeans/commit/c00efa0f0140b7315bce33da3a5aaeb168338453", "message": "[NETBEANS-4483] Fixed unit tests for Latte Templates\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4486\n\n- Deleted tests related to files removed during donation from Oracle.\n- Deleted unused files.\n- Fixed loading of files containig UTF-8 characters (test\n  LatteCompletionTest::testCompletion_03() was failing because of this).\n- Enabled tests in Travis and Github Actions.", "committedDate": "2020-06-29T07:41:27Z", "type": "forcePushed"}]}