{"pr_number": 2221, "pr_title": "[NETBEANS-4487] Move PHP tests on Linux to GitHub Actions", "pr_createdAt": "2020-06-29T12:56:30Z", "pr_url": "https://github.com/apache/netbeans/pull/2221", "timeline": [{"oid": "bc712cfcdf4b7bf6e3aa330c05b3f484801b09e5", "url": "https://github.com/apache/netbeans/commit/bc712cfcdf4b7bf6e3aa330c05b3f484801b09e5", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-02T20:33:43Z", "type": "forcePushed"}, {"oid": "32a1ea51f74af5740e928bdeb20ca800e0477ed3", "url": "https://github.com/apache/netbeans/commit/32a1ea51f74af5740e928bdeb20ca800e0477ed3", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T05:47:58Z", "type": "forcePushed"}, {"oid": "6d9ba00ed423fc32a781a80460a066244582b191", "url": "https://github.com/apache/netbeans/commit/6d9ba00ed423fc32a781a80460a066244582b191", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T06:15:40Z", "type": "forcePushed"}, {"oid": "61b9a26f0d8c1b9b6c9a0e6774eea375050127e7", "url": "https://github.com/apache/netbeans/commit/61b9a26f0d8c1b9b6c9a0e6774eea375050127e7", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T06:35:22Z", "type": "forcePushed"}, {"oid": "0e21d006dfa5f5eb86ed0ee81a75568e6fd7cf69", "url": "https://github.com/apache/netbeans/commit/0e21d006dfa5f5eb86ed0ee81a75568e6fd7cf69", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T06:41:46Z", "type": "forcePushed"}, {"oid": "cf27f75e10a136ba60d831d539cb29d3d2d51488", "url": "https://github.com/apache/netbeans/commit/cf27f75e10a136ba60d831d539cb29d3d2d51488", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T07:06:30Z", "type": "forcePushed"}, {"oid": "7595f9fddc9fc0d9176a7ad3a1d2ba40d044eb1e", "url": "https://github.com/apache/netbeans/commit/7595f9fddc9fc0d9176a7ad3a1d2ba40d044eb1e", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T07:18:24Z", "type": "forcePushed"}, {"oid": "ff926da4a4a4cbf78d0f31fccc7cd3ed31d0c6e9", "url": "https://github.com/apache/netbeans/commit/ff926da4a4a4cbf78d0f31fccc7cd3ed31d0c6e9", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T07:44:17Z", "type": "forcePushed"}, {"oid": "5924534548db6cfbd388026aef42b205dfe26f62", "url": "https://github.com/apache/netbeans/commit/5924534548db6cfbd388026aef42b205dfe26f62", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T08:20:23Z", "type": "forcePushed"}, {"oid": "747fd0c2cd340bf965d277ccd5ff38e003696640", "url": "https://github.com/apache/netbeans/commit/747fd0c2cd340bf965d277ccd5ff38e003696640", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T08:22:18Z", "type": "forcePushed"}, {"oid": "310378a4c758751ce9cd58ede4b5ce093e1a8b7a", "url": "https://github.com/apache/netbeans/commit/310378a4c758751ce9cd58ede4b5ce093e1a8b7a", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T08:23:39Z", "type": "forcePushed"}, {"oid": "ea0341205df3e531b3e0ba9d9c9783d6929b2c68", "url": "https://github.com/apache/netbeans/commit/ea0341205df3e531b3e0ba9d9c9783d6929b2c68", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T08:37:18Z", "type": "forcePushed"}, {"oid": "a799e5c4fe0ac7563dc1de8f8fdf47c3daec2863", "url": "https://github.com/apache/netbeans/commit/a799e5c4fe0ac7563dc1de8f8fdf47c3daec2863", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T08:57:57Z", "type": "forcePushed"}, {"oid": "29deab5bb3a304d084d7e3c43037b6c89c4fbf2c", "url": "https://github.com/apache/netbeans/commit/29deab5bb3a304d084d7e3c43037b6c89c4fbf2c", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T12:09:48Z", "type": "forcePushed"}, {"oid": "b3c3307bfddf962892db76df05ba9f80fbc4d819", "url": "https://github.com/apache/netbeans/commit/b3c3307bfddf962892db76df05ba9f80fbc4d819", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T12:33:20Z", "type": "forcePushed"}, {"oid": "612bbe95de2d3b81dc8daf5a7bde25aed0e155e4", "url": "https://github.com/apache/netbeans/commit/612bbe95de2d3b81dc8daf5a7bde25aed0e155e4", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T12:51:34Z", "type": "forcePushed"}, {"oid": "26de1d276f0d3cb9b4f2b9c2ecfa2d91ba8ab02d", "url": "https://github.com/apache/netbeans/commit/26de1d276f0d3cb9b4f2b9c2ecfa2d91ba8ab02d", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T13:04:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU3NjU1MA==", "url": "https://github.com/apache/netbeans/pull/2221#discussion_r449576550", "bodyText": "@KacerCZ Please. Remove -quiet -Dcluster.config=php -Djavac.compilerargs=-nowarn -Dbuild.compiler.deprecation=false params, it isn't required.", "author": "hectorespert", "createdAt": "2020-07-03T13:12:00Z", "path": ".github/workflows/main.yml", "diffHunk": "@@ -46,35 +46,37 @@ jobs:\n         run: ant -f platform/core.network test\n \n       - name: Test PHP modules\n+        env:\n+          OPTS: -quiet -Dcluster.config=php -Djavac.compilerargs=-nowarn -Dbuild.compiler.deprecation=false -Dtest-unit-sys-prop.ignore.random.failures=true", "originalCommit": "26de1d276f0d3cb9b4f2b9c2ecfa2d91ba8ab02d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU5MDQ5MA==", "url": "https://github.com/apache/netbeans/pull/2221#discussion_r449590490", "bodyText": "Removed.", "author": "KacerCZ", "createdAt": "2020-07-03T13:43:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU3NjU1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU3Njc2Mw==", "url": "https://github.com/apache/netbeans/pull/2221#discussion_r449576763", "bodyText": "\ud83d\udc4d", "author": "hectorespert", "createdAt": "2020-07-03T13:12:28Z", "path": ".github/workflows/main.yml", "diffHunk": "@@ -98,6 +100,164 @@ jobs:\n \n       - name: Test Netbeans Build System\n         run: ant -Dcluster.config=basic localtest\n+\n+  linux-php:\n+    name: Linux build of PHP modules\n+    runs-on: ubuntu-18.04\n+    env:\n+      OPTS: -quiet -Dcluster.config=php -Djavac.compilerargs=-nowarn -Dbuild.compiler.deprecation=false -Dtest-unit-sys-prop.ignore.random.failures=true\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v2\n+\n+      - name: Caching dependencies\n+        uses: actions/cache@v2\n+        with:\n+          path: ~/.hgexternalcache\n+          key: ${{ runner.os }}-${{ hashFiles('**/external/binaries-list') }}\n+          restore-keys: ${{ runner.os }}-\n+\n+      - name: Setup PHP\n+        uses: shivammathur/setup-php@2.3.1\n+        with:\n+          php-version: '7.4'\n+          tools: pecl\n+          extensions: xdebug\n+          ini-values: xdebug.remote_enable=on", "originalCommit": "26de1d276f0d3cb9b4f2b9c2ecfa2d91ba8ab02d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU3ODI1NA==", "url": "https://github.com/apache/netbeans/pull/2221#discussion_r449578254", "bodyText": "@KacerCZ Could you try to run Xvfb in the first steps inteads use the GabrielBB/xvfb-action@v1 action?\nFor example: https://github.com/apache/netbeans/pull/2186/files\n  linux:\n    name: Linux build\n    runs-on: ubuntu-18.04\n    env:\n      DISPLAY: \":99.0\"\n    steps:\n      - name: Setup JDK 8\n        uses: actions/setup-java@v1\n        with:\n          java-version: '8'\n          java-package: jdk+fx\n\n      - name: Launch Xvfb\n        run: Xvfb :99 -screen 0 1024x768x24 > /dev/null 2>&1 &", "author": "hectorespert", "createdAt": "2020-07-03T13:15:45Z", "path": ".github/workflows/main.yml", "diffHunk": "@@ -98,6 +100,164 @@ jobs:\n \n       - name: Test Netbeans Build System\n         run: ant -Dcluster.config=basic localtest\n+\n+  linux-php:\n+    name: Linux build of PHP modules\n+    runs-on: ubuntu-18.04\n+    env:\n+      OPTS: -quiet -Dcluster.config=php -Djavac.compilerargs=-nowarn -Dbuild.compiler.deprecation=false -Dtest-unit-sys-prop.ignore.random.failures=true\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v2\n+\n+      - name: Caching dependencies\n+        uses: actions/cache@v2\n+        with:\n+          path: ~/.hgexternalcache\n+          key: ${{ runner.os }}-${{ hashFiles('**/external/binaries-list') }}\n+          restore-keys: ${{ runner.os }}-\n+\n+      - name: Setup PHP\n+        uses: shivammathur/setup-php@2.3.1\n+        with:\n+          php-version: '7.4'\n+          tools: pecl\n+          extensions: xdebug\n+          ini-values: xdebug.remote_enable=on\n+\n+      - name: Clean\n+        run: ant $OPTS clean\n+        \n+      - name: Build\n+        run: ant $OPTS build\n+        \n+      - name: Test Hudson\n+        uses: GabrielBB/xvfb-action@v1\n+        with:\n+          run: ant ${{ env.OPTS }} -f php/hudson.php test\n+\n+      - name: Test Neon\n+        uses: GabrielBB/xvfb-action@v1\n+        with:\n+          run: ant ${{ env.OPTS }} -f php/languages.neon test", "originalCommit": "26de1d276f0d3cb9b4f2b9c2ecfa2d91ba8ab02d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU5MDgzOQ==", "url": "https://github.com/apache/netbeans/pull/2221#discussion_r449590839", "bodyText": "Changed.", "author": "KacerCZ", "createdAt": "2020-07-03T13:44:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU3ODI1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU3OTAzOA==", "url": "https://github.com/apache/netbeans/pull/2221#discussion_r449579038", "bodyText": "@KacerCZ Remove the -quiet and -Djavac.compilerargs=-nowarn -Dbuild.compiler.deprecation=false params", "author": "hectorespert", "createdAt": "2020-07-03T13:17:26Z", "path": ".github/workflows/main.yml", "diffHunk": "@@ -98,6 +100,164 @@ jobs:\n \n       - name: Test Netbeans Build System\n         run: ant -Dcluster.config=basic localtest\n+\n+  linux-php:\n+    name: Linux build of PHP modules\n+    runs-on: ubuntu-18.04\n+    env:\n+      OPTS: -quiet -Dcluster.config=php -Djavac.compilerargs=-nowarn -Dbuild.compiler.deprecation=false -Dtest-unit-sys-prop.ignore.random.failures=true", "originalCommit": "26de1d276f0d3cb9b4f2b9c2ecfa2d91ba8ab02d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU5MDU2Ng==", "url": "https://github.com/apache/netbeans/pull/2221#discussion_r449590566", "bodyText": "Removed.", "author": "KacerCZ", "createdAt": "2020-07-03T13:43:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU3OTAzOA=="}], "type": "inlineReview"}, {"oid": "5df175b93ca17398b20bb053803bb8f0b98ca989", "url": "https://github.com/apache/netbeans/commit/5df175b93ca17398b20bb053803bb8f0b98ca989", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T13:38:47Z", "type": "forcePushed"}, {"oid": "8ffa47a359b5ddc0d44c9fe8397323d62bcc2d35", "url": "https://github.com/apache/netbeans/commit/8ffa47a359b5ddc0d44c9fe8397323d62bcc2d35", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T13:41:10Z", "type": "forcePushed"}, {"oid": "0cc79f451f5e9d8cf8c218f728de13d41375f25b", "url": "https://github.com/apache/netbeans/commit/0cc79f451f5e9d8cf8c218f728de13d41375f25b", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T13:42:11Z", "type": "commit"}, {"oid": "0cc79f451f5e9d8cf8c218f728de13d41375f25b", "url": "https://github.com/apache/netbeans/commit/0cc79f451f5e9d8cf8c218f728de13d41375f25b", "message": "[NETBEANS-4487] Enabled PHP tests in GitHub Actions\n\nhttps://issues.apache.org/jira/browse/NETBEANS-4487\n\nEnabled PHP tests on Linux in GitHub Actions.\nAdded note why tests can't be enabled in Travis.", "committedDate": "2020-07-03T13:42:11Z", "type": "forcePushed"}]}