{"pr_number": 2474, "pr_title": "Read mainClass configuration or property. ", "pr_createdAt": "2020-10-20T14:04:54Z", "pr_url": "https://github.com/apache/netbeans/pull/2474", "timeline": [{"oid": "bdaec406adf7b4f45026749cf22a96dc1b2f34c0", "url": "https://github.com/apache/netbeans/commit/bdaec406adf7b4f45026749cf22a96dc1b2f34c0", "message": "Read mainClass configuration or property.", "committedDate": "2020-10-20T14:17:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5ODE2Mg==", "url": "https://github.com/apache/netbeans/pull/2474#discussion_r508598162", "bodyText": "maybe add // NOI18N as these texts shall never be localized.", "author": "JaroslavTulach", "createdAt": "2020-10-20T15:17:05Z", "path": "java/maven/src/org/netbeans/modules/maven/runjar/RunJarPrereqChecker.java", "diffHunk": "@@ -99,6 +105,58 @@\n         return true;\n     }\n \n+    private static String findMainClass(RunConfig config) {\n+        // Read main class from the manifest property:\n+        String mainClass = getConfiguration(config, \"maven-jar-plugin\", \"archive\", \"manifest\", \"mainClass\");", "originalCommit": "bdaec406adf7b4f45026749cf22a96dc1b2f34c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA1NTgxOQ==", "url": "https://github.com/apache/netbeans/pull/2474#discussion_r509055819", "bodyText": "Added.", "author": "entlicher", "createdAt": "2020-10-21T07:39:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5ODE2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5OTU5OA==", "url": "https://github.com/apache/netbeans/pull/2474#discussion_r508599598", "bodyText": "Does this also work with a property? E.g.  <mainClass>${clazz}</mainClass> - I assume it does, but it would be good to verify that.", "author": "JaroslavTulach", "createdAt": "2020-10-20T15:19:00Z", "path": "java/maven/test/unit/src/org/netbeans/modules/maven/runjar/RunJarPrereqCheckerTest.java", "diffHunk": "@@ -63,4 +69,103 @@ public void testWriteMapping() throws Exception {\n         assertEquals(1, mapping.getActions().size());\n     }\n \n+    public void testMainClassManifest() throws Exception {\n+        TestFileUtils.writeFile(d, \"pom.xml\",\n+                \"<project>\\n\" +\n+                \"    <modelVersion>4.0.0</modelVersion>\\n\" +\n+                \"    <groupId>testgrp</groupId>\\n\" +\n+                \"    <artifactId>testart</artifactId>\\n\" +\n+                \"    <version>1.0</version>\\n\" +\n+                \"    <build>\\n\" +\n+                \"        <plugins>\\n\" +\n+                \"            <plugin>\\n\" +\n+                \"                <groupId>org.apache.maven.plugins</groupId>\\n\" +\n+                \"                <artifactId>maven-jar-plugin</artifactId>\\n\" +\n+                \"                <configuration>\\n\" +\n+                \"                    <archive>\\n\" +\n+                \"                        <manifest>\\n\" +\n+                \"                            <mainClass>com.mycompany.Main2</mainClass>\\n\" +", "originalCommit": "bdaec406adf7b4f45026749cf22a96dc1b2f34c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA1NjE5OA==", "url": "https://github.com/apache/netbeans/pull/2474#discussion_r509056198", "bodyText": "Yes, it does. A test added.", "author": "entlicher", "createdAt": "2020-10-21T07:40:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU5OTU5OA=="}], "type": "inlineReview"}, {"oid": "3b2dabe6baf7154533b4183b0b44fd423ab04066", "url": "https://github.com/apache/netbeans/commit/3b2dabe6baf7154533b4183b0b44fd423ab04066", "message": "Read mainClass configuration or property.", "committedDate": "2020-10-21T07:39:07Z", "type": "commit"}, {"oid": "3b2dabe6baf7154533b4183b0b44fd423ab04066", "url": "https://github.com/apache/netbeans/commit/3b2dabe6baf7154533b4183b0b44fd423ab04066", "message": "Read mainClass configuration or property.", "committedDate": "2020-10-21T07:39:07Z", "type": "forcePushed"}]}