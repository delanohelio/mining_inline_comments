{"pr_number": 2494, "pr_title": "Where is the NbCode userdir?", "pr_createdAt": "2020-10-26T16:12:09Z", "pr_url": "https://github.com/apache/netbeans/pull/2494", "timeline": [{"oid": "319f5064be57a5c8ce7d00480de066aa0c7edb81", "url": "https://github.com/apache/netbeans/commit/319f5064be57a5c8ce7d00480de066aa0c7edb81", "message": "Properly specify --userdir when lauching the nbcode launcher", "committedDate": "2020-10-26T16:10:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA4NTE3MQ==", "url": "https://github.com/apache/netbeans/pull/2494#discussion_r512085171", "bodyText": "While at it, let also read the publisher and extension name from the actual package.json file. E.g. as soon as the publisher is changed from jlahoda to apache, the userdir stays synchronized between npm run nbcode and the actual global storage directory from inside of the VSCode extension.", "author": "JaroslavTulach", "createdAt": "2020-10-26T16:13:23Z", "path": "java/java.lsp.server/vscode/src/nbcode.ts", "diffHunk": "@@ -86,7 +88,8 @@ if (typeof process === 'object' && process.argv0 === 'node') {\n     }\n     let clusters = fs.readdirSync(nbcode).filter(c => c !== 'bin' && c !== 'etc').map(c => path.join(nbcode, c));\n     let args = process.argv.slice(2);\n-    let globalStorage = path.join(os.homedir(), '.config', 'Code', 'User', 'globalStorage', 'jlahoda.apache-netbeans-java');\n+    let json = JSON.parse(\"\" + fs.readFileSync(path.join(extension, 'package.json')));\n+    let globalStorage = path.join(os.homedir(), '.config', 'Code', 'User', 'globalStorage', json.publisher + '.' + json.name);", "originalCommit": "319f5064be57a5c8ce7d00480de066aa0c7edb81", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}