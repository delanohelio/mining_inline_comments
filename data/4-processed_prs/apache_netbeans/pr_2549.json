{"pr_number": 2549, "pr_title": "Initial VSNetBeans extension integration tests.", "pr_createdAt": "2020-11-20T03:21:05Z", "pr_url": "https://github.com/apache/netbeans/pull/2549", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg0MzAyMA==", "url": "https://github.com/apache/netbeans/pull/2549#discussion_r527843020", "bodyText": "Can you help, @dbalek? I need to wait for the java.workspace.compile task to finish and just using await isn't enough.  Instead I have to setTimeout(_, 20s) and that isn't pretty at all.", "author": "JaroslavTulach", "createdAt": "2020-11-20T17:20:58Z", "path": "java/java.lsp.server/vscode/src/test/suite/extension.test.ts", "diffHunk": "@@ -21,4 +28,56 @@ suite('Extension Test Suite', () => {\n \t\t}\n \t\tassert.ok(cannotReassignVersion, \"Cannot reassign value of version\");\n \t});\n+\ttest(\"Compile workspace\", async () => {\n+\t\tlet folder: string = assertWorkspace();\n+\n+\t\tfs.writeFileSync(path.join(folder, 'pom.xml'), `\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+    <groupId>org.netbeans.demo.vscode.t1</groupId>\n+    <artifactId>basicapp</artifactId>\n+    <version>1.0</version>\n+    <properties>\n+        <maven.compiler.source>1.8</maven.compiler.source>\n+        <maven.compiler.target>1.8</maven.compiler.target>\n+    </properties>\n+</project>\n+\t\t`);\n+\n+\t\tlet pkg = path.join(folder, 'src', 'main', 'java', 'pkg');\n+\t\tlet mainJava = path.join(pkg, 'Main.java');\n+\n+\t\tfs.mkdirSync(pkg, { recursive: true });\n+\t\tfs.writeFileSync(mainJava, `\n+package pkg;\n+class Main {\n+\tpublic static void main(String... args) {\n+\t\tSystem.out.println(\"Hello World!\");\n+\t}\n+}\n+\t\t`);\n+\n+\t\tvscode.workspace.saveAll();\n+\n+\t\tlet delayPromise = new Promise((r) => setTimeout(r, 20000));\n+\t\tvscode.window.showInformationMessage('Invoking compile command');\n+\t\tawait vscode.commands.executeCommand(\"java.workspace.compile\");", "originalCommit": "263da69b2f7e254b3a5ed52ca54e79612fda1c98", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg4MzgyMg==", "url": "https://github.com/apache/netbeans/pull/2549#discussion_r527883822", "bodyText": "f217836 might be the right answer.", "author": "JaroslavTulach", "createdAt": "2020-11-20T18:07:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg0MzAyMA=="}], "type": "inlineReview"}, {"oid": "62dd163fb5bd7fe7ce841603fad27bc41a1a5995", "url": "https://github.com/apache/netbeans/commit/62dd163fb5bd7fe7ce841603fad27bc41a1a5995", "message": "Prepare parent of userdir before running the tests on node < 10.12", "committedDate": "2020-11-23T12:05:47Z", "type": "forcePushed"}, {"oid": "b15a2e04fb22ba4d5db46786ba0fe1d6c44476c0", "url": "https://github.com/apache/netbeans/commit/b15a2e04fb22ba4d5db46786ba0fe1d6c44476c0", "message": "VS Code version 1.50 is using node.js version 12.x", "committedDate": "2020-11-23T14:50:48Z", "type": "forcePushed"}, {"oid": "010c2db4bdff563bc5d877d14d86fd69ac166c57", "url": "https://github.com/apache/netbeans/commit/010c2db4bdff563bc5d877d14d86fd69ac166c57", "message": "VS Code version 1.50 is using node.js version 12.x", "committedDate": "2020-11-23T15:01:32Z", "type": "forcePushed"}, {"oid": "4d1f85a6c3515218376861a68770ab537c4c7473", "url": "https://github.com/apache/netbeans/commit/4d1f85a6c3515218376861a68770ab537c4c7473", "message": "Debugging the compile workspace workload", "committedDate": "2020-11-23T16:27:43Z", "type": "forcePushed"}, {"oid": "041dd82f8f862bc7bcda98d87ee7857384807581", "url": "https://github.com/apache/netbeans/commit/041dd82f8f862bc7bcda98d87ee7857384807581", "message": "Log asynchronous stacktraces", "committedDate": "2020-11-24T06:24:29Z", "type": "forcePushed"}, {"oid": "d5bee2a6e9ec927c38bf31f3de1fe9518c0ac558", "url": "https://github.com/apache/netbeans/commit/d5bee2a6e9ec927c38bf31f3de1fe9518c0ac558", "message": "Log asynchronous stacktraces", "committedDate": "2020-11-24T06:34:34Z", "type": "forcePushed"}, {"oid": "234392d4fc125d4e20a116598821b2cfd378dfc6", "url": "https://github.com/apache/netbeans/commit/234392d4fc125d4e20a116598821b2cfd378dfc6", "message": "Use ant -f java/java.lsp.server test-vscode-ext to execute integration tests for VSNetBeans", "committedDate": "2020-11-24T09:39:38Z", "type": "commit"}, {"oid": "923704569822d171c2cbfe861897d5b16ff4b99b", "url": "https://github.com/apache/netbeans/commit/923704569822d171c2cbfe861897d5b16ff4b99b", "message": "Wait for LanguageClient to get started before running java.compile.workspace command", "committedDate": "2020-11-24T09:41:55Z", "type": "commit"}, {"oid": "1c7145c144b3b024f18f64fb7706c421ede4189b", "url": "https://github.com/apache/netbeans/commit/1c7145c144b3b024f18f64fb7706c421ede4189b", "message": "Wait for build to be over before completing actions's CompletableFuture", "committedDate": "2020-11-24T09:43:16Z", "type": "commit"}, {"oid": "1c7145c144b3b024f18f64fb7706c421ede4189b", "url": "https://github.com/apache/netbeans/commit/1c7145c144b3b024f18f64fb7706c421ede4189b", "message": "Wait for build to be over before completing actions's CompletableFuture", "committedDate": "2020-11-24T09:43:16Z", "type": "forcePushed"}]}