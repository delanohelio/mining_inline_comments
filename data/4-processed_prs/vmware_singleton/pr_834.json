{"pr_number": 834, "pr_title": "Issue 833- Optimize VIPService by removing unused code. Automate initialization of VIPService in VIPCfg", "pr_createdAt": "2020-10-21T00:01:06Z", "pr_url": "https://github.com/vmware/singleton/pull/834", "timeline": [{"oid": "0cabc3e4ae2d14d46bb1264a6227aaca25ecbe3f", "url": "https://github.com/vmware/singleton/commit/0cabc3e4ae2d14d46bb1264a6227aaca25ecbe3f", "message": "Issue 833- Optimize VIPService by removing unused code. Automate initialization of VIPService in VIPCfg", "committedDate": "2020-10-20T23:53:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk3NzcxNQ==", "url": "https://github.com/vmware/singleton/pull/834#discussion_r508977715", "bodyText": "Remove this line because it's unnecessary any longer. It has been executed in constructor.", "author": "Xiaochao8", "createdAt": "2020-10-21T04:09:46Z", "path": "src/main/java/com/vmware/vipclient/i18n/base/VIPService.java", "diffHunk": "@@ -15,46 +15,23 @@\n  *\n  */\n public class VIPService {\n-    private static VIPService vIPServiceInstance;\n     private HttpRequester     httpRequester;\n-    private String            productID;\n-    private String            version;\n \n-    private VIPService() {\n+    public VIPService(String vipServer)throws MalformedURLException {\n+        createHttpRequester(vipServer);\n     }\n \n     /**\n-     * get the instance of the VIPService.\n+     * Initializes VIP service.\n      *\n-     * @return The object of the VIPService.\n-     */\n-    public static VIPService getVIPServiceInstance() {\n-        if (vIPServiceInstance == null) {\n-            vIPServiceInstance = new VIPService();\n-        }\n-        return vIPServiceInstance;\n-    }\n-\n-    /**\n-     * Initialize vIP Service with productID, version and vIPHostName.\n-     *\n-     * @param productID\n-     *            The name of product.\n-     * @param version\n-     *            The release version of product.\n-     * @param vIPHostName\n-     *            The info of vIP Server(ip:port).\n+     * @param vipServer\n+     *            The VIP server host (ip:port).\n      * @throws MalformedURLException\n+     * @Deprecated use the constructor instead\n      */\n-    public void initializeVIPService(String productID, String version,\n-            String vIPServer) throws MalformedURLException {\n-        if (vIPServiceInstance == null) {\n-            throw new VIPJavaClientException(\n-                    \"Please create VIPServiceInstance first!\");\n-        }\n-        this.productID = productID;\n-        this.version = version;\n-        createHttpRequester(vIPServer);\n+    @Deprecated\n+    public void initializeVIPService(String vipServer) throws MalformedURLException {\n+        createHttpRequester(vipServer);", "originalCommit": "0cabc3e4ae2d14d46bb1264a6227aaca25ecbe3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk3ODI0MQ==", "url": "https://github.com/vmware/singleton/pull/834#discussion_r508978241", "bodyText": "Add @deprecated onto this method?", "author": "Xiaochao8", "createdAt": "2020-10-21T04:12:00Z", "path": "src/main/java/com/vmware/vipclient/i18n/VIPCfg.java", "diffHunk": "@@ -192,10 +193,8 @@ public void initialize(String cfg) throws VIPClientInitException {\n      * initialize VIPService instances to provide HTTP requester\n      */\n     public void initializeVIPService() {", "originalCommit": "0cabc3e4ae2d14d46bb1264a6227aaca25ecbe3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fa60c9446918264057d05bf813bd11bb452de887", "url": "https://github.com/vmware/singleton/commit/fa60c9446918264057d05bf813bd11bb452de887", "message": "code clean up - adding @Deprecated and removing unused code", "committedDate": "2020-10-21T20:59:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDE1OTMxNg==", "url": "https://github.com/vmware/singleton/pull/834#discussion_r510159316", "bodyText": "why remove this line?", "author": "linr211", "createdAt": "2020-10-22T13:25:55Z", "path": "src/main/java/com/vmware/vipclient/i18n/filters/VIPComponentFilter.java", "diffHunk": "@@ -110,7 +110,6 @@ public void init(FilterConfig filterConfig) throws ServletException {\n             } catch (VIPClientInitException e) {\n                 logger.error(e.getMessage());\n             }\n-            gc.initializeVIPService();", "originalCommit": "43ace0e0b7339d9da46625eaebcb1f583daf2de3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDMxMzkyOQ==", "url": "https://github.com/vmware/singleton/pull/834#discussion_r510313929", "bodyText": "Because the method has just been deprecated. Same reason for removing it from all other files. Did you review the change sin VIPCfg and VIPService?", "author": "jessiejuachon", "createdAt": "2020-10-22T16:52:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDE1OTMxNg=="}], "type": "inlineReview"}, {"oid": "fa60c9446918264057d05bf813bd11bb452de887", "url": "https://github.com/vmware/singleton/commit/fa60c9446918264057d05bf813bd11bb452de887", "message": "code clean up - adding @Deprecated and removing unused code", "committedDate": "2020-10-21T20:59:38Z", "type": "forcePushed"}, {"oid": "51424cedcac2fb8fc12a866565a6203ccb10e021", "url": "https://github.com/vmware/singleton/commit/51424cedcac2fb8fc12a866565a6203ccb10e021", "message": "Do not allow instantiation of null VIPService or null HttpRequester", "committedDate": "2020-10-22T21:24:42Z", "type": "commit"}]}