{"pr_number": 883, "pr_title": "Adding build file to sample-app-with-shared-lib to build it as Spring Boot app", "pr_createdAt": "2020-11-20T22:04:04Z", "pr_url": "https://github.com/vmware/singleton/pull/883", "timeline": [{"oid": "578920de8384ea58118d692c67e26f9378471cf8", "url": "https://github.com/vmware/singleton/commit/578920de8384ea58118d692c67e26f9378471cf8", "message": "Adding build file to build as Spring Boot app", "committedDate": "2020-11-20T22:01:35Z", "type": "commit"}, {"oid": "998387907df2bcb52d8284ea7a1c9f2f7406ec5e", "url": "https://github.com/vmware/singleton/commit/998387907df2bcb52d8284ea7a1c9f2f7406ec5e", "message": "adding license header", "committedDate": "2020-11-20T22:12:07Z", "type": "commit"}, {"oid": "7fc2e2a5f0dcb4ff8b0e73024330b82be66b91c3", "url": "https://github.com/vmware/singleton/commit/7fc2e2a5f0dcb4ff8b0e73024330b82be66b91c3", "message": "update README", "committedDate": "2020-11-20T23:30:39Z", "type": "commit"}, {"oid": "6a8b30086e8b569fe8638ce6d6f7ec0a530f52f3", "url": "https://github.com/vmware/singleton/commit/6a8b30086e8b569fe8638ce6d6f7ec0a530f52f3", "message": "build and rn as spring boot", "committedDate": "2020-11-21T04:43:44Z", "type": "commit"}, {"oid": "9318c816e5649b94cd53e35b85ec07224cf59677", "url": "https://github.com/vmware/singleton/commit/9318c816e5649b94cd53e35b85ec07224cf59677", "message": "README", "committedDate": "2020-11-22T20:01:31Z", "type": "commit"}, {"oid": "2d92f18bc1f898ad490bad8556418337a117aab7", "url": "https://github.com/vmware/singleton/commit/2d92f18bc1f898ad490bad8556418337a117aab7", "message": "README", "committedDate": "2020-11-23T00:21:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA0MzMyNw==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r533043327", "bodyText": "Typo: sample/-client-app -> sample-client-app", "author": "huihuiw01", "createdAt": "2020-12-01T03:05:29Z", "path": "sample-client-app/sample-app-with-shared-lib/README.md", "diffHunk": "@@ -33,4 +33,26 @@ How to build and run this sample application\n    ```\n    java -jar ./build/libs/sample-with-shared-lib-1.0.jar\n    ```\n-Note: The library jar will be created under \"build/libs\" directory.\n+How to build and run this sample application as a Spring Boot executable jar\n+------------\n+ * Go to the root directory of this sample application\n+   ```\n+   g11n-java-client/sample/-client-app/sample-app-with-shared-lib", "originalCommit": "2d92f18bc1f898ad490bad8556418337a117aab7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA1Mjc0OA==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r533052748", "bodyText": "Why not download it from maven repo?", "author": "huihuiw01", "createdAt": "2020-12-01T03:39:47Z", "path": "sample-client-app/sample-app-with-shared-lib/build-spring-boot.gradle", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright 2019-2020 VMware, Inc.\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.3.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.8.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'com.vmware.vipclient'\n+version = '1.0'\n+sourceCompatibility = '1.8'\n+archivesBaseName = 'sample-spring-boot-with-shared-lib'\n+\n+repositories {\n+\tmavenCentral()\n+}\n+\n+dependencies {\n+\timplementation files('lib/sample-shared-library-1.0.jar')\n+\timplementation files('lib/vip4java-0.1.0.jar')", "originalCommit": "2d92f18bc1f898ad490bad8556418337a117aab7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzgzNTMyMg==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r533835322", "bodyText": "We can take a look at this later in a separate PR as this has been like this before this PR.\nIt think the intent of the README is for developers to make changes, build, run and use the java client library locally as a quick start guide. Downloading from artifactory defeats the purpose.", "author": "jessiejuachon", "createdAt": "2020-12-02T01:29:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA1Mjc0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA1NTQxOQ==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r533055419", "bodyText": "Is it better set the group as 'com.vmware.singleton' ?", "author": "huihuiw01", "createdAt": "2020-12-01T03:49:48Z", "path": "sample-client-app/sample-app-with-shared-lib/build.gradle", "diffHunk": "@@ -4,7 +4,7 @@\n  */\n apply plugin: 'eclipse'\n apply plugin: 'java'\n-project.group = 'com.vmware.sample'\n+project.group = 'com.vmware.vipclient'", "originalCommit": "2d92f18bc1f898ad490bad8556418337a117aab7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg0NjczMA==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r533846730", "bodyText": "Actually, project.group does not matter for this as we are not publishing this artifact anywhere. To minimize the changes, I am reverting this line to the original.", "author": "jessiejuachon", "createdAt": "2020-12-02T02:05:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA1NTQxOQ=="}], "type": "inlineReview"}, {"oid": "dee42766574af407364a413dc65feeb086d5d608", "url": "https://github.com/vmware/singleton/commit/dee42766574af407364a413dc65feeb086d5d608", "message": "code clean up", "committedDate": "2020-12-02T02:07:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2ODkwNA==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r533868904", "bodyText": "Since you revert the change for group, so this group should be consistent with others.", "author": "huihuiw01", "createdAt": "2020-12-02T03:17:14Z", "path": "sample-client-app/sample-app-with-shared-lib/build-spring-boot.gradle", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright 2019-2020 VMware, Inc.\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.3.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.8.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'com.vmware.vipclient'", "originalCommit": "dee42766574af407364a413dc65feeb086d5d608", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk5NTk3MA==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r533995970", "bodyText": "change vip to singleton?", "author": "Xiaochao8", "createdAt": "2020-12-02T08:57:25Z", "path": "sample-client-app/sample-app-with-shared-lib/build-spring-boot.gradle", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright 2019-2020 VMware, Inc.\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.3.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.8.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'com.vmware.vipclient'", "originalCommit": "dee42766574af407364a413dc65feeb086d5d608", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDAwMTkwMw==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r534001903", "bodyText": "sample/-client-app -> sample-client-app", "author": "Xiaochao8", "createdAt": "2020-12-02T09:06:43Z", "path": "sample-client-app/sample-app-with-shared-lib/README.md", "diffHunk": "@@ -7,7 +7,7 @@ Prerequisites\n ------------\n  * Build the Singleton Java client library by following the instructions in [here](https://github.com/vmware/singleton/blob/g11n-java-client/README.md).\n \n-How to build and run this sample application\n+How to build and run this sample application as an executable jar\n ------------\n  * Go to the root directory of this sample application", "originalCommit": "dee42766574af407364a413dc65feeb086d5d608", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDAwMjg5MQ==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r534002891", "bodyText": "Need a blank line before subject line\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            How to build and run this sample application as a Spring Boot executable jar\n          \n          \n            \n            \n          \n          \n            \n            How to build and run this sample application as a Spring Boot executable jar", "author": "Xiaochao8", "createdAt": "2020-12-02T09:08:08Z", "path": "sample-client-app/sample-app-with-shared-lib/README.md", "diffHunk": "@@ -33,4 +33,26 @@ How to build and run this sample application\n    ```\n    java -jar ./build/libs/sample-with-shared-lib-1.0.jar\n    ```\n-Note: The library jar will be created under \"build/libs\" directory.\n+How to build and run this sample application as a Spring Boot executable jar", "originalCommit": "dee42766574af407364a413dc65feeb086d5d608", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDAxNDg3Mw==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r534014873", "bodyText": "Why need a CommandLineRunner?", "author": "Xiaochao8", "createdAt": "2020-12-02T09:25:28Z", "path": "sample-client-app/sample-app-with-shared-lib/src/main/java/com/vmware/vipclient/sample/springboot/Application.java", "diffHunk": "@@ -0,0 +1,30 @@\n+/*\n+ * Copyright 2019-2020 VMware, Inc.\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package com.vmware.vipclient.sample.springboot;\n+\n+import java.util.Arrays;\n+\n+import com.vmware.vipclient.sample.Main;\n+import org.springframework.boot.CommandLineRunner;\n+import org.springframework.boot.SpringApplication;\n+import org.springframework.boot.autoconfigure.SpringBootApplication;\n+import org.springframework.context.ApplicationContext;\n+import org.springframework.context.annotation.Bean;\n+\n+@SpringBootApplication\n+public class Application {\n+\n+\tpublic static void main(String[] args) {\n+\t\tSpringApplication.run(Application.class, args);\n+\t}\n+\n+\t@Bean\n+\tpublic CommandLineRunner commandLineRunner(ApplicationContext ctx) {", "originalCommit": "dee42766574af407364a413dc65feeb086d5d608", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMyMjgyNg==", "url": "https://github.com/vmware/singleton/pull/883#discussion_r534322826", "bodyText": "It's just a way in Spring Boot to automatically run some logic after the application context is loaded. There are many ways to do it in Spring (https://reflectoring.io/spring-boot-execute-on-startup/), but we only need one here as an example to run Main.main which triggers all the sample code. Do you prefer any other way?\nAlso, we do not want to simple specify Main as  the main Manifest 'Start-class' because this does not load and start a Spring Application context, which may not resemble actual real-world scenarios.", "author": "jessiejuachon", "createdAt": "2020-12-02T16:51:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDAxNDg3Mw=="}], "type": "inlineReview"}, {"oid": "34761963c5790e9c7289d0af3f3c2893f95da016", "url": "https://github.com/vmware/singleton/commit/34761963c5790e9c7289d0af3f3c2893f95da016", "message": "Code clena up", "committedDate": "2020-12-02T16:56:15Z", "type": "commit"}]}