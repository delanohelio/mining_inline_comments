{"pr_number": 360, "pr_title": "add new Get combine API", "pr_createdAt": "2020-01-07T08:36:26Z", "pr_url": "https://github.com/vmware/singleton/pull/360", "timeline": [{"oid": "0899febe8b53727cf209fdd24eae28e95b55f431", "url": "https://github.com/vmware/singleton/commit/0899febe8b53727cf209fdd24eae28e95b55f431", "message": "fixed the multi-component", "committedDate": "2019-10-30T11:32:17Z", "type": "commit"}, {"oid": "75cbe1a508477a709c62c3003598b3463d543fed", "url": "https://github.com/vmware/singleton/commit/75cbe1a508477a709c62c3003598b3463d543fed", "message": "Merge branch 'master' into master", "committedDate": "2019-10-30T11:34:44Z", "type": "commit"}, {"oid": "edad7a8090a94dbda0d4cdf4303399173bf63117", "url": "https://github.com/vmware/singleton/commit/edad7a8090a94dbda0d4cdf4303399173bf63117", "message": "add multi-component API feature", "committedDate": "2019-10-30T11:40:12Z", "type": "commit"}, {"oid": "65f31b1bc825242a922a96849c5ab06ec40e1108", "url": "https://github.com/vmware/singleton/commit/65f31b1bc825242a922a96849c5ab06ec40e1108", "message": "Merge branch 'master' of github.com:tigershi/singleton", "committedDate": "2019-10-30T11:41:17Z", "type": "commit"}, {"oid": "666a227a324fba8a7e9fba50b4d6179cfdfa09e7", "url": "https://github.com/vmware/singleton/commit/666a227a324fba8a7e9fba50b4d6179cfdfa09e7", "message": "update the multi-component", "committedDate": "2019-10-31T05:24:54Z", "type": "commit"}, {"oid": "b108796d94cbd37a94a33c08108166f4c8b4da38", "url": "https://github.com/vmware/singleton/commit/b108796d94cbd37a94a33c08108166f4c8b4da38", "message": "fixed issue of the multcomponent API", "committedDate": "2019-10-31T08:20:13Z", "type": "commit"}, {"oid": "98d604e48f0ab4f98a89793ea6bb0aacdc82df5f", "url": "https://github.com/vmware/singleton/commit/98d604e48f0ab4f98a89793ea6bb0aacdc82df5f", "message": "Merge branch 'master' into master", "committedDate": "2019-11-01T11:02:32Z", "type": "commit"}, {"oid": "b8fab894b820c69edaac538152b933d079c8639f", "url": "https://github.com/vmware/singleton/commit/b8fab894b820c69edaac538152b933d079c8639f", "message": "fixed the comment for multi-component", "committedDate": "2019-11-04T10:59:50Z", "type": "commit"}, {"oid": "46341cb57a399e69590338811020630a7968081c", "url": "https://github.com/vmware/singleton/commit/46341cb57a399e69590338811020630a7968081c", "message": "fixed the comment for multi-component", "committedDate": "2019-11-05T04:29:38Z", "type": "commit"}, {"oid": "af7f14e28418d429c774c0cc2a72e0a4af91c88c", "url": "https://github.com/vmware/singleton/commit/af7f14e28418d429c774c0cc2a72e0a4af91c88c", "message": "fixed the comment for multi-component", "committedDate": "2019-11-05T05:46:12Z", "type": "commit"}, {"oid": "92fccd8d9da8e822a0f92ecdc7b84b74528f704c", "url": "https://github.com/vmware/singleton/commit/92fccd8d9da8e822a0f92ecdc7b84b74528f704c", "message": "merge saas and lite version", "committedDate": "2019-11-06T08:33:41Z", "type": "commit"}, {"oid": "e5e9d9de8ccdc7507713010f7f50c64c083c0e0c", "url": "https://github.com/vmware/singleton/commit/e5e9d9de8ccdc7507713010f7f50c64c083c0e0c", "message": "Merge branch 'master' into master", "committedDate": "2019-11-06T08:41:06Z", "type": "commit"}, {"oid": "f171e4f2f1b8dee3f1a17db5cda393d947670610", "url": "https://github.com/vmware/singleton/commit/f171e4f2f1b8dee3f1a17db5cda393d947670610", "message": "merge saas and lite version", "committedDate": "2019-11-07T02:52:38Z", "type": "commit"}, {"oid": "991c821c98cf833a73a09c6021fd268faa27aac3", "url": "https://github.com/vmware/singleton/commit/991c821c98cf833a73a09c6021fd268faa27aac3", "message": "add unit test for unit test cover", "committedDate": "2019-11-07T06:28:16Z", "type": "commit"}, {"oid": "9fdcac3b122d15651686ae200d0bf5a9e35def8d", "url": "https://github.com/vmware/singleton/commit/9fdcac3b122d15651686ae200d0bf5a9e35def8d", "message": "add unit test for unit test cover", "committedDate": "2019-11-07T07:13:44Z", "type": "commit"}, {"oid": "32054841b6bd635592b9d286620e4e213c3ab85e", "url": "https://github.com/vmware/singleton/commit/32054841b6bd635592b9d286620e4e213c3ab85e", "message": "cover unit test", "committedDate": "2019-11-07T08:10:23Z", "type": "commit"}, {"oid": "572095d68cd7e244b7e016daeea46e2cad5aa48c", "url": "https://github.com/vmware/singleton/commit/572095d68cd7e244b7e016daeea46e2cad5aa48c", "message": "cover unit test", "committedDate": "2019-11-07T08:34:24Z", "type": "commit"}, {"oid": "ce5dfdb868e31e4e05299c5dd5f98d2abed56492", "url": "https://github.com/vmware/singleton/commit/ce5dfdb868e31e4e05299c5dd5f98d2abed56492", "message": "cover unit test", "committedDate": "2019-11-07T09:05:54Z", "type": "commit"}, {"oid": "5c4db82e4adf0792bfa7148cb16a6a0931adb98e", "url": "https://github.com/vmware/singleton/commit/5c4db82e4adf0792bfa7148cb16a6a0931adb98e", "message": "cover unit test", "committedDate": "2019-11-07T09:55:02Z", "type": "commit"}, {"oid": "07c7f1f6d0ff7b105a15dc626abf237c2903c11e", "url": "https://github.com/vmware/singleton/commit/07c7f1f6d0ff7b105a15dc626abf237c2903c11e", "message": "fixed the mult-component get big size translation error", "committedDate": "2019-11-08T09:48:34Z", "type": "commit"}, {"oid": "e641657e0b016ea2f34c0fd4bac8c9dc3a31704c", "url": "https://github.com/vmware/singleton/commit/e641657e0b016ea2f34c0fd4bac8c9dc3a31704c", "message": "Merge branch 'master' into master", "committedDate": "2019-11-11T03:02:41Z", "type": "commit"}, {"oid": "367253f6fda282afeb781fd209bbf187c346fb77", "url": "https://github.com/vmware/singleton/commit/367253f6fda282afeb781fd209bbf187c346fb77", "message": "fixed the Singleton service lite build bug", "committedDate": "2019-11-12T02:05:13Z", "type": "commit"}, {"oid": "bf9409444f2bc65eb9b10e30a4d7642707133bec", "url": "https://github.com/vmware/singleton/commit/bf9409444f2bc65eb9b10e30a4d7642707133bec", "message": "Merge branch 'master' of github.com:tigershi/singleton", "committedDate": "2019-11-12T02:06:49Z", "type": "commit"}, {"oid": "028721021d576f546f4079e3a9453b99eb708876", "url": "https://github.com/vmware/singleton/commit/028721021d576f546f4079e3a9453b99eb708876", "message": "Merge branch 'master' into master", "committedDate": "2019-11-12T02:26:03Z", "type": "commit"}, {"oid": "8434464fbe13885ca0ebb48f1b0fe2166e4b97a4", "url": "https://github.com/vmware/singleton/commit/8434464fbe13885ca0ebb48f1b0fe2166e4b97a4", "message": "add multi-component version fallback", "committedDate": "2019-11-13T06:13:14Z", "type": "commit"}, {"oid": "b56dac2fc3d3fc548e6e1f4ba6d0430f929aabd7", "url": "https://github.com/vmware/singleton/commit/b56dac2fc3d3fc548e6e1f4ba6d0430f929aabd7", "message": "Merge branch 'master' of github.com:tigershi/singleton", "committedDate": "2019-11-13T06:16:07Z", "type": "commit"}, {"oid": "9d5c62a667b972e93d8828b63ad859c46f2c14c5", "url": "https://github.com/vmware/singleton/commit/9d5c62a667b972e93d8828b63ad859c46f2c14c5", "message": "Merge branch 'master' into master", "committedDate": "2019-11-13T06:29:41Z", "type": "commit"}, {"oid": "afcdc067c79b16a2c6b2949680d50df3916d42d5", "url": "https://github.com/vmware/singleton/commit/afcdc067c79b16a2c6b2949680d50df3916d42d5", "message": "add multi-component version fallback", "committedDate": "2019-11-13T07:05:16Z", "type": "commit"}, {"oid": "c86ca8a48b7c131a232787d760f4043de9971fb5", "url": "https://github.com/vmware/singleton/commit/c86ca8a48b7c131a232787d760f4043de9971fb5", "message": "Merge branch 'master' of github.com:tigershi/singleton", "committedDate": "2019-11-13T07:05:41Z", "type": "commit"}, {"oid": "ffe9cd9ddb4fd436926058c7e04dab1d97da838b", "url": "https://github.com/vmware/singleton/commit/ffe9cd9ddb4fd436926058c7e04dab1d97da838b", "message": "add multi-component version fallback", "committedDate": "2019-11-13T08:12:01Z", "type": "commit"}, {"oid": "1739906714a38129bc1c11dda46b7e56d1231355", "url": "https://github.com/vmware/singleton/commit/1739906714a38129bc1c11dda46b7e56d1231355", "message": "Merge branch 'master' into master", "committedDate": "2019-11-18T09:54:02Z", "type": "commit"}, {"oid": "42e01ee81de6614950d5e05f7f68fc6320b88386", "url": "https://github.com/vmware/singleton/commit/42e01ee81de6614950d5e05f7f68fc6320b88386", "message": "add multi-component version fallback", "committedDate": "2019-11-18T10:10:20Z", "type": "commit"}, {"oid": "a455bc92339f8e57d1b74cdbed4d9907c9bb06d5", "url": "https://github.com/vmware/singleton/commit/a455bc92339f8e57d1b74cdbed4d9907c9bb06d5", "message": "Merge branch 'master' of github.com:tigershi/singleton", "committedDate": "2019-11-18T10:13:01Z", "type": "commit"}, {"oid": "9d9edba4f791651dcc2b008167cc3dfe8e1f52c9", "url": "https://github.com/vmware/singleton/commit/9d9edba4f791651dcc2b008167cc3dfe8e1f52c9", "message": "add multi-component version fallback", "committedDate": "2019-11-18T10:16:45Z", "type": "commit"}, {"oid": "f4cbd03a3c859e7c56392d1405130541b272636c", "url": "https://github.com/vmware/singleton/commit/f4cbd03a3c859e7c56392d1405130541b272636c", "message": "Add start-up/health-check script for Singleton Service", "committedDate": "2019-11-25T08:55:50Z", "type": "commit"}, {"oid": "1c8443246423636a3878083a60f6bdb3955c4c39", "url": "https://github.com/vmware/singleton/commit/1c8443246423636a3878083a60f6bdb3955c4c39", "message": "Merge branch 'master' into master", "committedDate": "2019-11-25T08:57:38Z", "type": "commit"}, {"oid": "c75a4e93b691b26a8ec0912bb4288b2a07f6aee6", "url": "https://github.com/vmware/singleton/commit/c75a4e93b691b26a8ec0912bb4288b2a07f6aee6", "message": "fixed the xiaochao\u2018s comments", "committedDate": "2019-12-03T08:30:44Z", "type": "commit"}, {"oid": "6a021f21ddd1c1bfb0603879322dc4ac9af9223b", "url": "https://github.com/vmware/singleton/commit/6a021f21ddd1c1bfb0603879322dc4ac9af9223b", "message": "Merge branch 'master' into master", "committedDate": "2019-12-04T08:28:46Z", "type": "commit"}, {"oid": "48d35408726fe3438a22684f2c68ad5ca8aabaef", "url": "https://github.com/vmware/singleton/commit/48d35408726fe3438a22684f2c68ad5ca8aabaef", "message": "Merge branch 'master' into master", "committedDate": "2019-12-06T03:22:22Z", "type": "commit"}, {"oid": "ea5296083541bf6ffc11b35d16f13cd1db94d33b", "url": "https://github.com/vmware/singleton/commit/ea5296083541bf6ffc11b35d16f13cd1db94d33b", "message": "Merge branch 'master' into master", "committedDate": "2019-12-09T10:15:10Z", "type": "commit"}, {"oid": "734ce0ca00bf19fdbc86567e9d5311334418034a", "url": "https://github.com/vmware/singleton/commit/734ce0ca00bf19fdbc86567e9d5311334418034a", "message": "Merge branch 'master' into master", "committedDate": "2019-12-12T07:27:58Z", "type": "commit"}, {"oid": "b40272f4004c62cb55888793767ea1b8b6d6732f", "url": "https://github.com/vmware/singleton/commit/b40272f4004c62cb55888793767ea1b8b6d6732f", "message": "update the script bugs", "committedDate": "2019-12-26T10:13:48Z", "type": "commit"}, {"oid": "6e08347a4a0de3b4b21929c03b290be863f8cc45", "url": "https://github.com/vmware/singleton/commit/6e08347a4a0de3b4b21929c03b290be863f8cc45", "message": "Merge branch 'master' of github.com:tigershi/singleton", "committedDate": "2019-12-26T10:14:17Z", "type": "commit"}, {"oid": "5ffd601c9cc144081aafbf6ae78ebaf5c577f2c4", "url": "https://github.com/vmware/singleton/commit/5ffd601c9cc144081aafbf6ae78ebaf5c577f2c4", "message": "Merge branch 'master' into master", "committedDate": "2019-12-26T10:15:33Z", "type": "commit"}, {"oid": "f861bc210712d698c1859de6ae9734d63b6b2f18", "url": "https://github.com/vmware/singleton/commit/f861bc210712d698c1859de6ae9734d63b6b2f18", "message": "Merge branch 'master' of github.com:tigershi/singleton", "committedDate": "2019-12-26T10:16:23Z", "type": "commit"}, {"oid": "cb17c144d6371e68bf7b99c1e5d7a6e2a01c6a55", "url": "https://github.com/vmware/singleton/commit/cb17c144d6371e68bf7b99c1e5d7a6e2a01c6a55", "message": "fixed the name of zip script name", "committedDate": "2019-12-30T08:20:34Z", "type": "commit"}, {"oid": "cbcd2059477ae417eb6751b472c4af7cb3d59d54", "url": "https://github.com/vmware/singleton/commit/cbcd2059477ae417eb6751b472c4af7cb3d59d54", "message": "Merge branch 'master' into master", "committedDate": "2020-01-07T06:34:30Z", "type": "commit"}, {"oid": "72752b11d1d95c286ec1e3662798ec09a4499faa", "url": "https://github.com/vmware/singleton/commit/72752b11d1d95c286ec1e3662798ec09a4499faa", "message": "add the new get combine API", "committedDate": "2020-01-07T08:32:17Z", "type": "commit"}, {"oid": "766eec9a787e9f3e629b8e367e9daffd76fa30a7", "url": "https://github.com/vmware/singleton/commit/766eec9a787e9f3e629b8e367e9daffd76fa30a7", "message": "Merge branch 'master' of github.com:tigershi/singleton", "committedDate": "2020-01-07T08:35:00Z", "type": "commit"}, {"oid": "f855bd3ee19067744681ce75b9d0d93e54de43b2", "url": "https://github.com/vmware/singleton/commit/f855bd3ee19067744681ce75b9d0d93e54de43b2", "message": "Merge branch 'master' into master", "committedDate": "2020-01-07T08:37:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMDI2MA==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364110260", "bodyText": "It seems the format is messy. Could you format the code?", "author": "Xiaochao8", "createdAt": "2020-01-08T08:27:00Z", "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/base/TranslationWithPatternAction.java", "diffHunk": "@@ -56,6 +64,58 @@ public APIResponseDTO getTransPattern(TranslationWithPatternDTO data) throws Exc\n \t      }\n \t   }\n \n+\t   /**\n+        * According to  object get the pattern and translation or only get the\n+        * pattern when use GET method\n+        * \n+        */\n+\t    public APIResponseDTO getTransPattern(int combine, String productName, String version,\n+\t            String components, String language, String scope, String region, String pseudo,\n+\t            HttpServletRequest req) throws Exception{\n+\t        // TODO Auto-generated method stub\n+\t        TranslationWithPatternDTO data = new TranslationWithPatternDTO();", "originalCommit": "f855bd3ee19067744681ce75b9d0d93e54de43b2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYxNTQzNw==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364615437", "bodyText": "done", "author": "tigershi", "createdAt": "2020-01-09T08:43:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMDI2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMDQ5MA==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364110490", "bodyText": "Is this method necessary? It seems this logic is too simple to be a method.", "author": "Xiaochao8", "createdAt": "2020-01-08T08:27:43Z", "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/base/TranslationWithPatternAction.java", "diffHunk": "@@ -56,6 +64,58 @@ public APIResponseDTO getTransPattern(TranslationWithPatternDTO data) throws Exc\n \t      }\n \t   }\n \n+\t   /**\n+        * According to  object get the pattern and translation or only get the\n+        * pattern when use GET method\n+        * \n+        */\n+\t    public APIResponseDTO getTransPattern(int combine, String productName, String version,\n+\t            String components, String language, String scope, String region, String pseudo,\n+\t            HttpServletRequest req) throws Exception{\n+\t        // TODO Auto-generated method stub\n+\t        TranslationWithPatternDTO data = new TranslationWithPatternDTO();\n+\t           data.setCombine(combine);\n+\t           data.setLanguage(language);\n+\t           data.setScope(scope);\n+\t           data.setProductName(productName);\n+\t           version = VersionMatcher.getMatchedVersion(version,  productService.getSupportVersionList(productName));\n+\t           data.setVersion(version);\n+\t           if(!StringUtils.isEmpty(components)) {\n+\t               data.setComponents(Arrays.asList(components.split(ConstantsChar.COMMA)));\n+\t           }\n+\t           data.setRegion(region);\n+\t           data.setPseudo(pseudo);\n+\t           if (validateCombineType(data)) {\n+\t               Map<String, Object> pattern = getPattern(data);\n+\t               List<ComponentMessagesDTO> compList = getTranslation(data);\n+\t               Map<String, Object> map = new HashMap<String, Object>();\n+\t               map.put(ConstantsKeys.PATTERN, pattern);\n+\t               map.put(ConstantsKeys.COMPONENTS, compList);\n+\t               return super.handleResponse(APIResponseStatus.OK, map);\n+\t            } else {\n+\t               return super.handleResponse(APIResponseStatus.INTERNAL_SERVER_ERROR,\n+\t                     ConstantsMsg.PARAM_NOT_VALIDATE);\n+\t            }\n+\t    }\n+       /**\n+        * This is use to validate the request data of get Translation with Pattern when mehod is GET\n+        * \n+        * \n+        */\n+       private boolean validateCombineType(TranslationWithPatternDTO data) {", "originalCommit": "f855bd3ee19067744681ce75b9d0d93e54de43b2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYxNTk2Mg==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364615962", "bodyText": "it need to keep, because the code scan", "author": "tigershi", "createdAt": "2020-01-09T08:45:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMDQ5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMDc2Mw==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364110763", "bodyText": "req isn't used, right?", "author": "Xiaochao8", "createdAt": "2020-01-08T08:28:22Z", "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/base/TranslationWithPatternAction.java", "diffHunk": "@@ -56,6 +64,58 @@ public APIResponseDTO getTransPattern(TranslationWithPatternDTO data) throws Exc\n \t      }\n \t   }\n \n+\t   /**\n+        * According to  object get the pattern and translation or only get the\n+        * pattern when use GET method\n+        * \n+        */\n+\t    public APIResponseDTO getTransPattern(int combine, String productName, String version,\n+\t            String components, String language, String scope, String region, String pseudo,\n+\t            HttpServletRequest req) throws Exception{", "originalCommit": "f855bd3ee19067744681ce75b9d0d93e54de43b2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYxNDk2MQ==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364614961", "bodyText": "done", "author": "tigershi", "createdAt": "2020-01-09T08:42:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMDc2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMTE1MQ==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364111151", "bodyText": "How about call getTransPattern(TranslationWithPatternDTO data) directly?", "author": "Xiaochao8", "createdAt": "2020-01-08T08:29:37Z", "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/base/TranslationWithPatternAction.java", "diffHunk": "@@ -56,6 +64,58 @@ public APIResponseDTO getTransPattern(TranslationWithPatternDTO data) throws Exc\n \t      }\n \t   }\n \n+\t   /**\n+        * According to  object get the pattern and translation or only get the\n+        * pattern when use GET method\n+        * \n+        */\n+\t    public APIResponseDTO getTransPattern(int combine, String productName, String version,\n+\t            String components, String language, String scope, String region, String pseudo,\n+\t            HttpServletRequest req) throws Exception{\n+\t        // TODO Auto-generated method stub\n+\t        TranslationWithPatternDTO data = new TranslationWithPatternDTO();\n+\t           data.setCombine(combine);\n+\t           data.setLanguage(language);\n+\t           data.setScope(scope);\n+\t           data.setProductName(productName);\n+\t           version = VersionMatcher.getMatchedVersion(version,  productService.getSupportVersionList(productName));\n+\t           data.setVersion(version);\n+\t           if(!StringUtils.isEmpty(components)) {\n+\t               data.setComponents(Arrays.asList(components.split(ConstantsChar.COMMA)));\n+\t           }\n+\t           data.setRegion(region);\n+\t           data.setPseudo(pseudo);\n+\t           if (validateCombineType(data)) {\n+\t               Map<String, Object> pattern = getPattern(data);\n+\t               List<ComponentMessagesDTO> compList = getTranslation(data);\n+\t               Map<String, Object> map = new HashMap<String, Object>();\n+\t               map.put(ConstantsKeys.PATTERN, pattern);\n+\t               map.put(ConstantsKeys.COMPONENTS, compList);\n+\t               return super.handleResponse(APIResponseStatus.OK, map);", "originalCommit": "f855bd3ee19067744681ce75b9d0d93e54de43b2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYxNzAyNQ==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364617025", "bodyText": "because the get API only support combine 1 or 2", "author": "tigershi", "createdAt": "2020-01-09T08:47:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMTE1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMTQyNw==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364111427", "bodyText": "a -> an\neg. 1,2", "author": "Xiaochao8", "createdAt": "2020-01-08T08:30:20Z", "path": "g11n-ws/modules/md-restful-api/src/main/java/com/vmware/vip/api/rest/APIParamValue.java", "diffHunk": "@@ -28,4 +28,5 @@\n \tpublic final static String DISPLAY_LANGUAGE   = \"the display language. e.g. 'en'\";\n \tpublic final static String LANGUAGE   = \"a string which represents language, e.g. en, en-US, pt, pt-BR, zh-Hans\";\n \tpublic final static String REGION   = \"a string which represents region, e.g. US, PT, CN\";\n+\tpublic final static String COMBINE = \"a integer which represents combine type number 1 or 2\";", "originalCommit": "f855bd3ee19067744681ce75b9d0d93e54de43b2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDYxNDMzMQ==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r364614331", "bodyText": "done", "author": "tigershi", "createdAt": "2020-01-09T08:41:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMTQyNw=="}], "type": "inlineReview"}, {"oid": "6f0892312f36e67fc4085f75ec6823df2b15e781", "url": "https://github.com/vmware/singleton/commit/6f0892312f36e67fc4085f75ec6823df2b15e781", "message": "fix the new get combine API comment", "committedDate": "2020-01-09T08:50:39Z", "type": "commit"}, {"oid": "5677756fb530c7e78c5a4af0e2ab06b953ace14d", "url": "https://github.com/vmware/singleton/commit/5677756fb530c7e78c5a4af0e2ab06b953ace14d", "message": "Merge branch 'master' of github.com:tigershi/singleton", "committedDate": "2020-01-13T10:43:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE4Mjg0Mw==", "url": "https://github.com/vmware/singleton/pull/360#discussion_r366182843", "bodyText": "Code optimization required", "author": "chaoq0318", "createdAt": "2020-01-14T07:23:32Z", "path": "g11n-ws/modules/md-restful-api-i18n/src/main/java/com/vmware/vip/i18n/api/base/TranslationWithPatternAction.java", "diffHunk": "@@ -56,6 +64,59 @@ public APIResponseDTO getTransPattern(TranslationWithPatternDTO data) throws Exc\n \t      }\n \t   }\n \n+    /**\n+     * According to object get the pattern and translation or only get the pattern when use GET\n+     * method\n+     * \n+     */\n+    public APIResponseDTO getTransPattern(int combine, String productName, String version,\n+            String components, String language, String scope, String region, String pseudo)\n+            throws Exception {\n+        // TODO Auto-generated method stub\n+        TranslationWithPatternDTO data = new TranslationWithPatternDTO();\n+        data.setCombine(combine);\n+        data.setLanguage(language);\n+        data.setScope(scope);\n+        data.setProductName(productName);\n+        version = VersionMatcher.getMatchedVersion(version,\n+                productService.getSupportVersionList(productName));\n+        data.setVersion(version);\n+        if (!StringUtils.isEmpty(components)) {\n+            data.setComponents(Arrays.asList(components.split(ConstantsChar.COMMA)));\n+        }\n+        data.setRegion(region);\n+        data.setPseudo(pseudo);\n+        if (validateCombineType(data)) {\n+            Map<String, Object> pattern = getPattern(data);\n+            List<ComponentMessagesDTO> compList = getTranslation(data);\n+            Map<String, Object> map = new HashMap<String, Object>();\n+            map.put(ConstantsKeys.PATTERN, pattern);\n+            map.put(ConstantsKeys.COMPONENTS, compList);\n+            return super.handleResponse(APIResponseStatus.OK, map);\n+        } else {\n+            return super.handleResponse(APIResponseStatus.INTERNAL_SERVER_ERROR,\n+                    ConstantsMsg.PARAM_NOT_VALIDATE);\n+        }\n+    }\n+       /**\n+        * This is use to validate the request data of get Translation with Pattern when mehod is GET\n+        * \n+        * \n+        */\n+       private boolean validateCombineType(TranslationWithPatternDTO data) {\n+           \n+           if (data.getCombine() == TransWithPatternDataScope.TRANSLATION_PATTERN_WITH_REGION\n+                 .getValue()) {\n+              return isPatternTransaltionWithRegion(data);\n+           } else if (data.getCombine() == TransWithPatternDataScope.TRANSLATION_PATTERN_NO_REGION\n+                 .getValue()) {\n+              return isPatternTranslationNoRegion(data);\n+           }else {", "originalCommit": "5677756fb530c7e78c5a4af0e2ab06b953ace14d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}