{"pr_number": 517, "pr_title": "upload smoke test script for go client", "pr_createdAt": "2020-04-21T06:07:11Z", "pr_url": "https://github.com/vmware/singleton/pull/517", "timeline": [{"oid": "8701832962eab8a33691c8aac12b87bc5d855c75", "url": "https://github.com/vmware/singleton/commit/8701832962eab8a33691c8aac12b87bc5d855c75", "message": "upload smoke test script for go client", "committedDate": "2020-04-21T06:03:50Z", "type": "commit"}, {"oid": "0cbda873aabf0becc878fd825baf45b9fd6fe9b4", "url": "https://github.com/vmware/singleton/commit/0cbda873aabf0becc878fd825baf45b9fd6fe9b4", "message": "update the service to localhost", "committedDate": "2020-04-21T13:39:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzNjQ3Ng==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r412236476", "bodyText": "Change all the occurrences of 'JSCoreSDKTest' to 'GoClientTest'?", "author": "Xiaochao8", "createdAt": "2020-04-21T14:30:29Z", "path": "autotest/client/go/goclienttest/testdata/Config/configDefaultLocaleEmpty.yaml", "diffHunk": "@@ -0,0 +1,14 @@\n+singletonServer: https://localhost:8090\n+\n+enableCache: true\n+initializeCache: true\n+#unit: second\n+cacheExpiredTime: 500\n+\n+\n+defaultLocale: \"\"\n+\n+localBundles: \"\"\n+\n+productName: JSCoreSDKTest", "originalCommit": "0cbda873aabf0becc878fd825baf45b9fd6fe9b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUxNDgzMw==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r413514833", "bodyText": "Has corrected it in new commit", "author": "lyiyu66", "createdAt": "2020-04-23T05:15:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzNjQ3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzODE5MA==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r412238190", "bodyText": "Change all the occurrences of 'VIP' to 'Singleton'?", "author": "Xiaochao8", "createdAt": "2020-04-21T14:32:26Z", "path": "autotest/client/go/goclienttest/testdata/localBundles/GoClientTest/1.0.0/contact/messages_de.json", "diffHunk": "@@ -0,0 +1,12 @@\n+{\n+    \"component\":\"contact\",\n+    \"messages\":{\n+      \"contact.marketing\": \"Marketing:\",\n+      \"contact.applicationname\": \"VIP-Sample-Web-Anwendung\",", "originalCommit": "0cbda873aabf0becc878fd825baf45b9fd6fe9b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUxNDk0OQ==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r413514949", "bodyText": "Has corrected it in new commit", "author": "lyiyu66", "createdAt": "2020-04-23T05:15:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzODE5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzOTkxMg==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r412239912", "bodyText": "Remove all the occurrences of 'Angular', or change to other words?", "author": "Xiaochao8", "createdAt": "2020-04-21T14:34:31Z", "path": "autotest/client/go/goclienttest/testdata/localBundles/GoClientTest2/1.0/c2/messages_en.json", "diffHunk": "@@ -0,0 +1,9 @@\n+{\n+  \"component\" : \"c2\",\n+  \"messages\" : {\n+    \"demo.plural.users\" : \"{0, plural,one {Singleton Angular client has a user.} other {Singleton Angular client has # users.}}\",", "originalCommit": "0cbda873aabf0becc878fd825baf45b9fd6fe9b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUxNTE0OA==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r413515148", "bodyText": "Has corrected it in new commit", "author": "lyiyu66", "createdAt": "2020-04-23T05:16:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIzOTkxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0NTY3NA==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r412245674", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            name: NoExistingProduct\n          \n          \n            \n            name:  NonExistentProduct\n          \n      \n    \n    \n  \n\nChange all the occurrences?", "author": "Xiaochao8", "createdAt": "2020-04-21T14:41:10Z", "path": "autotest/client/go/goclienttest/LocalBundlesOnly/confignull.yaml", "diffHunk": "@@ -0,0 +1,15 @@\n+singletonServer: \"\"\n+\n+enableCache: false\n+initializeCache: false\n+#unit: second\n+cacheExpiredTime: 1\n+\n+\n+defaultLocale: zh-Hans\n+\n+localBundles: \"../testdata/localBundles/GoClientTest/\"\n+\n+\n+name: NoExistingProduct", "originalCommit": "0cbda873aabf0becc878fd825baf45b9fd6fe9b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUxNTE4OA==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r413515188", "bodyText": "Has corrected it in new commit", "author": "lyiyu66", "createdAt": "2020-04-23T05:16:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0NTY3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI1NjI5MQ==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r412256291", "bodyText": "Change all the occurrences of 'localebundle' to 'localbundle'?", "author": "Xiaochao8", "createdAt": "2020-04-21T14:53:16Z", "path": "autotest/client/go/goclienttest/LocalBundlesOnly/getComponentTranslation_test.go", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+ * Copyright 2020 VMware, Inc.\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+\n+package LocalBundlesOnly\n+\n+import (\n+\t\"fmt\"\n+\t\"testing\"\n+\n+\t. \"github.com/smartystreets/goconvey/convey\"\n+\n+\tsgtn \"github.com/vmware/singleton\"\n+)\n+\n+func TestGetComponentTranslation(t *testing.T) {\n+\n+\tcfPath := \"config.yaml\"\n+\tcfg, _ := sgtn.NewConfig(cfPath)\n+\tinst, _ := sgtn.NewInst(*cfg)\n+\tfmt.Print(inst)\n+\ttranslation := inst.GetTranslation()\n+\n+\tConvey(\"component-localbundles-requestlocale: Get request locale's translation from localbundles\", t, func() {\n+\n+\t\tConvey(\"component-localbundle-requestlocale: request locale(fr) is in localebundle, return request locale translation from localbundles(P0)\", func() {", "originalCommit": "0cbda873aabf0becc878fd825baf45b9fd6fe9b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUxNTIzNQ==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r413515235", "bodyText": "Has corrected it in new commit", "author": "lyiyu66", "createdAt": "2020-04-23T05:16:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI1NjI5MQ=="}], "type": "inlineReview"}, {"oid": "1c39e08dfea9ac24dd8dfc558d6e87bfe3892a75", "url": "https://github.com/vmware/singleton/commit/1c39e08dfea9ac24dd8dfc558d6e87bfe3892a75", "message": "correct some testdata and function name", "committedDate": "2020-04-23T05:06:38Z", "type": "commit"}, {"oid": "07945be7e7aaf27cc2dee6c631b72e1c891b163a", "url": "https://github.com/vmware/singleton/commit/07945be7e7aaf27cc2dee6c631b72e1c891b163a", "message": "correct the service instance", "committedDate": "2020-04-23T05:11:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzUzODM0Mw==", "url": "https://github.com/vmware/singleton/pull/517#discussion_r413538343", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\ttran2, _ := translation.GetStringMessage(\"fr\", \"contact\", \"non-existing.key\")\n          \n          \n            \n            \t\t\ttran2, _ := translation.GetStringMessage(\"fr\", \"contact\", \"non-existent.key\")\n          \n      \n    \n    \n  \n\nChange all the occurences of it?", "author": "Xiaochao8", "createdAt": "2020-04-23T06:17:38Z", "path": "autotest/client/go/goclienttest/LocalBundlesOnly/getStringTranslation_test.go", "diffHunk": "@@ -0,0 +1,101 @@\n+package LocalBundlesOnly\n+\n+import (\n+\t\"fmt\"\n+\t\"testing\"\n+\n+\t. \"github.com/smartystreets/goconvey/convey\"\n+\n+\tsgtn \"github.com/vmware/singleton\"\n+)\n+\n+func TestGetStringTranslation(t *testing.T) {\n+\n+\tcfPath := \"config.yaml\"\n+\n+\tcfg, _ := sgtn.NewConfig(cfPath)\n+\tinst, _ := sgtn.NewInst(*cfg)\n+\tfmt.Print(inst)\n+\ttranslation := inst.GetTranslation()\n+\n+\tConvey(\"localbundles-requestlocale: Get request locale's translation from localbundle\", t, func() {\n+\n+\t\t// cfPath := \"config.yaml\"\n+\n+\t\t// cfg, _ := sgtn.NewConfig(cfPath)\n+\t\t// inst, _ := sgtn.NewInst(*cfg)\n+\t\t// fmt.Print(inst)\n+\t\t// translation := inst.GetTranslation()\n+\n+\t\tConvey(\"localbundles-requestlocale: Get common strings successfully from localbundle(P0)\", func() {\n+\n+\t\t\ttran1, _ := translation.GetStringMessage(\"zh-Hans\", Defaultcom, commonkey)\n+\t\t\t// fmt.Print(tran1)\n+\n+\t\t\tSo(tran1, ShouldEqual, dlcncommonvalue)\n+\t\t\t// So(cfg, ShouldNotBeNil)\n+\t\t})\n+\n+\t\tConvey(\"localbundles-requestlocale: Get placehodler strings successfully from localbundle(P0)\", func() {\n+\n+\t\t\ttran2, _ := translation.GetStringMessage(\"fr\", Defaultcom, holderkey, \"a\", \"b\")\n+\n+\t\t\tSo(tran2, ShouldEqual, \"L'op\u00e9rateur 'a' n'est pas pris en charge pour la propri\u00e9t\u00e9 'b'.\")\n+\t\t})\n+\n+\t\tConvey(\"localbundles-requestlocale: Get long and html tag strings successfully from localbundle(P0)\", func() {\n+\n+\t\t\ttran2, _ := translation.GetStringMessage(\"fr\", Defaultcom, htmlkey)\n+\t\t\t// should add check if send out http request as the previous case has cached fr component translation\n+\n+\t\t\tSo(tran2, ShouldEqual, frhtmlvalue)\n+\t\t})\n+\n+\t\tConvey(\"localbundles-requestlocale: request a component(contact) is in localbundle but key isn't in localbundles, return key(P1)\", func() {\n+\n+\t\t\ttran2, _ := translation.GetStringMessage(\"fr\", \"contact\", \"non-existing.key\")", "originalCommit": "07945be7e7aaf27cc2dee6c631b72e1c891b163a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}