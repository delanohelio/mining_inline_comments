{"pr_number": 914, "pr_title": "fix issue 657 about getting locale list and set YamlDotNet to v8.1.2", "pr_createdAt": "2020-12-09T12:15:29Z", "pr_url": "https://github.com/vmware/singleton/pull/914", "timeline": [{"oid": "509a2612855886d78e7a7b1cd30a0cef48a128a9", "url": "https://github.com/vmware/singleton/commit/509a2612855886d78e7a7b1cd30a0cef48a128a9", "message": "fix issue 657 about getting locale list and set YamlDotNet to v8.1.2", "committedDate": "2020-12-09T12:12:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY1MDkzNw==", "url": "https://github.com/vmware/singleton/pull/914#discussion_r540650937", "bodyText": "Should you get the locale list by get the combination of locale list under each component, then use it to update the locale list?", "author": "huihuiw01", "createdAt": "2020-12-11T02:49:45Z", "path": "singletonclient/SingletonClient/Implementation/SingletonUpdate.cs", "diffHunk": "@@ -218,6 +218,16 @@ private ILocaleMessages LoadOfflineLocaleBundle(string locale, string nearLocale\n                 componentList = _config.GetExternalComponentList();\n                 List<string> releaseComponents = _release.GetRelease().GetMessages().GetComponentList();\n                 SingletonUtil.UpdateListFromAnotherList(releaseComponents, componentList);\n+\n+                List<string> releaseLocales = _release.GetRelease().GetMessages().GetLocaleList();\n+                if (releaseLocales.Count == 0)\n+                {\n+                    for (int i = 0; i < releaseComponents.Count; i++)\n+                    {\n+                        List<string> componentLocaleList = _config.GetExternalLocaleList(releaseComponents[i]);\n+                        SingletonUtil.UpdateListFromAnotherList(releaseLocales, componentLocaleList);\n+                    }", "originalCommit": "509a2612855886d78e7a7b1cd30a0cef48a128a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY2MzkxMg==", "url": "https://github.com/vmware/singleton/pull/914#discussion_r540663912", "bodyText": "It's exactly what you said.\n\nget the locale list by get the combination of locale list under each component\nList componentLocaleList = _config.GetExternalLocaleList(releaseComponents[i])\nuse it to update the locale list\nSingletonUtil.UpdateListFromAnotherList(releaseLocales, componentLocaleList);", "author": "jin-jasper", "createdAt": "2020-12-11T03:28:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY1MDkzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY3ODA1MA==", "url": "https://github.com/vmware/singleton/pull/914#discussion_r540678050", "bodyText": "But line 227 and 228 are in the for loop,\n\nIsn't componentLocaleList a new object? If yes, then it isn't the combination of locale list under each component, just that for current component.\nNeedn't update in each iteration, update after iteration done is enough.", "author": "huihuiw01", "createdAt": "2020-12-11T04:14:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY1MDkzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDczMDA3OQ==", "url": "https://github.com/vmware/singleton/pull/914#discussion_r540730079", "bodyText": "The loop is to enumerate every component.\ncomponentLocaleList is a new object and it is the combination of locales under a component,\nBut componentLocaleList could be different for different component. All componentLocaleList objects are combined into releaseLocales as the final result.", "author": "jin-jasper", "createdAt": "2020-12-11T06:55:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY1MDkzNw=="}], "type": "inlineReview"}]}