{"pr_number": 567, "pr_title": "Using prodMode configuration", "pr_createdAt": "2020-05-19T22:34:36Z", "pr_url": "https://github.com/vmware/singleton/pull/567", "timeline": [{"oid": "06b60bbeead5438944a301ac10507610654f5d71", "url": "https://github.com/vmware/singleton/commit/06b60bbeead5438944a301ac10507610654f5d71", "message": "code clean up", "committedDate": "2020-05-12T23:55:53Z", "type": "commit"}, {"oid": "51b4dfa4d673a96f003757fe2b2692576bdfd92c", "url": "https://github.com/vmware/singleton/commit/51b4dfa4d673a96f003757fe2b2692576bdfd92c", "message": "Merge branch 'g11n-java-client' of https://github.com/vmware/singleton into g11n-java-client", "committedDate": "2020-05-13T00:09:46Z", "type": "commit"}, {"oid": "778a7a1ef4cdc9251c8e1db2501e1fe8f9440223", "url": "https://github.com/vmware/singleton/commit/778a7a1ef4cdc9251c8e1db2501e1fe8f9440223", "message": "Commenting out a test", "committedDate": "2020-05-13T02:35:06Z", "type": "commit"}, {"oid": "077f19b3a3ecf74662b7df27a2062d376b64d9a7", "url": "https://github.com/vmware/singleton/commit/077f19b3a3ecf74662b7df27a2062d376b64d9a7", "message": "code clean up", "committedDate": "2020-05-13T02:49:13Z", "type": "commit"}, {"oid": "9424346a07fa645376b7711cdd936573804b3192", "url": "https://github.com/vmware/singleton/commit/9424346a07fa645376b7711cdd936573804b3192", "message": "code clean up", "committedDate": "2020-05-13T18:23:03Z", "type": "commit"}, {"oid": "c25a676dd876b503b1b7738ab22edf262e836458", "url": "https://github.com/vmware/singleton/commit/c25a676dd876b503b1b7738ab22edf262e836458", "message": "Error logging when fetch failed", "committedDate": "2020-05-13T18:57:59Z", "type": "commit"}, {"oid": "db641b9ea0816671a56600c1651632a5f62b7cef", "url": "https://github.com/vmware/singleton/commit/db641b9ea0816671a56600c1651632a5f62b7cef", "message": "bug fix", "committedDate": "2020-05-13T23:31:12Z", "type": "commit"}, {"oid": "5cd06d60a04a85e57a1fe4f5aeb9d8537d2e2ed7", "url": "https://github.com/vmware/singleton/commit/5cd06d60a04a85e57a1fe4f5aeb9d8537d2e2ed7", "message": "code clean up", "committedDate": "2020-05-14T18:53:40Z", "type": "commit"}, {"oid": "6915f11ed80e515e7d24777a8c1f21cb4eb02e24", "url": "https://github.com/vmware/singleton/commit/6915f11ed80e515e7d24777a8c1f21cb4eb02e24", "message": "Updating sample application", "committedDate": "2020-05-15T02:53:42Z", "type": "commit"}, {"oid": "a64be3f7aae480fcf13d943b8e703c4deb58ffac", "url": "https://github.com/vmware/singleton/commit/a64be3f7aae480fcf13d943b8e703c4deb58ffac", "message": "Merge branch 'g11n-java-client' into g11n-java-client", "committedDate": "2020-05-17T18:54:06Z", "type": "commit"}, {"oid": "71281946f39629abfa181ab13536b4510c087184", "url": "https://github.com/vmware/singleton/commit/71281946f39629abfa181ab13536b4510c087184", "message": "fixing failing smoke test", "committedDate": "2020-05-19T03:05:45Z", "type": "commit"}, {"oid": "c4a388c17543e5197481497cdbc38c92da291ae6", "url": "https://github.com/vmware/singleton/commit/c4a388c17543e5197481497cdbc38c92da291ae6", "message": "Merge branch 'g11n-java-client' of https://github.com/jessiejuachon/singleton into g11n-java-client", "committedDate": "2020-05-19T03:06:24Z", "type": "commit"}, {"oid": "5ecea939edab6ca083db4fafaddd9b721632dad8", "url": "https://github.com/vmware/singleton/commit/5ecea939edab6ca083db4fafaddd9b721632dad8", "message": "code clean up", "committedDate": "2020-05-19T04:20:20Z", "type": "commit"}, {"oid": "4c5b0a12142b092519391c128f31f69d1fdc5c7c", "url": "https://github.com/vmware/singleton/commit/4c5b0a12142b092519391c128f31f69d1fdc5c7c", "message": "fixing code scan", "committedDate": "2020-05-19T05:05:43Z", "type": "commit"}, {"oid": "067d19d4bbd130bd36fd43d9c686fe8e1f22ef33", "url": "https://github.com/vmware/singleton/commit/067d19d4bbd130bd36fd43d9c686fe8e1f22ef33", "message": "Fixing code scan", "committedDate": "2020-05-19T05:31:41Z", "type": "commit"}, {"oid": "711ce808a4225af2d0e0330711b46442841c9af4", "url": "https://github.com/vmware/singleton/commit/711ce808a4225af2d0e0330711b46442841c9af4", "message": "Adding prodMode configuration", "committedDate": "2020-05-19T22:32:44Z", "type": "commit"}, {"oid": "b7dabdba91d395294a9c4ee497cde547b1c1b5a4", "url": "https://github.com/vmware/singleton/commit/b7dabdba91d395294a9c4ee497cde547b1c1b5a4", "message": "Merge branch 'g11n-java-client' into g11n-java-client", "committedDate": "2020-05-19T22:36:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcxNjcxOQ==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r427716719", "bodyText": "The value may be false.", "author": "Xiaochao8", "createdAt": "2020-05-20T03:09:30Z", "path": "src/main/java/com/vmware/vipclient/i18n/VIPCfg.java", "diffHunk": "@@ -186,6 +186,8 @@ public void initialize(String cfg) throws VIPClientInitException {\n         }\n         if (prop.containsKey(\"sourceLocale\"))\n         \tLocaleUtility.setSourceLocale(Locale.forLanguageTag(prop.getString(\"sourceLocale\")));\n+        if (prop.containsKey(\"prodMode\"))\n+        \tthis.prodMode = true;", "originalCommit": "b7dabdba91d395294a9c4ee497cde547b1c1b5a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcyMDM5Mg==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r427720392", "bodyText": "Should add locale?", "author": "Xiaochao8", "createdAt": "2020-05-20T03:25:31Z", "path": "src/main/java/com/vmware/vipclient/i18n/common/ConstantsMsg.java", "diffHunk": "@@ -13,5 +13,6 @@\n     public static final String SERVER_CONTENT_ERROR = \"The content from server is wrong!\";\r\n     public static final String UNKNOWN_ERROR        = \"Unknown error.\";\r\n     public static final String GET_MESSAGES_FAILED  = \"Failed to get messages for component {0}, locale: {1}, data source: {2}.\";\r\n+    public static final String GET_MESSAGE_FAILED\t= \"Failed to get any message for key: {0} of component {1}.\";\r", "originalCommit": "b7dabdba91d395294a9c4ee497cde547b1c1b5a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcyMDgzMA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r427720830", "bodyText": "This is only used in the if block below.", "author": "Xiaochao8", "createdAt": "2020-05-20T03:27:28Z", "path": "src/main/java/com/vmware/vipclient/i18n/messages/service/StringService.java", "diffHunk": "@@ -36,19 +36,21 @@ public String getString(MessagesDTO dto) {\n     \tIterator<Locale> fallbackLocalesIter = LocaleUtility.getFallbackLocales().iterator();", "originalCommit": "b7dabdba91d395294a9c4ee497cde547b1c1b5a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIxMDYzMA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r428210630", "bodyText": "It is used twice: in lines 41 and 42.", "author": "jessiejuachon", "createdAt": "2020-05-20T18:10:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcyMDgzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcyMTQxOA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r427721418", "bodyText": "This should be false by default.", "author": "Xiaochao8", "createdAt": "2020-05-20T03:30:06Z", "path": "sample-client-app/src/main/resources/sampleconfig.properties", "diffHunk": "@@ -1,27 +1,28 @@\n-# It's used for categorizing translation by product on Singleton side to maintain translation.\r\n-productName = JavaSample\r\n-\r\n-# Define the translation's version used by Singleton service.\r\n-version = 1.0.0\r\n-\r\n-######################################################################################\r\n-# [vipServer      ] - Singleton server's location. It could points to local Singleton server, or remote Singleton server.\r\n-# [initializeCache] - If initializeCache is true, the translation will be loaded to application cache from Singleton service when application starts up;\r\n-#                     else the translation will be fetched to cache when API call happens.\r\n-# [pseudo         ] - If pseudo is true, client will return pseudo translation whether translation is ready or not.\r\n-# [collectSource  ] - If collectSource is true, will enable the source collection functionality which means client will send the received sources to Singleton server for translation;\r\n-#                     else there's no source collection.\r\n-# [cleanCache     ] - If cleanCache is true, cache will be cleaned periodically.\r\n-# [cacheExpiredTime  ] - Cache expiration time. unit: millisecond.\r\n-# [machineTranslation] - If machineTranslation is true, will get translation by machine translation.\r\n-######################################################################################\r\n-vipServer = http://localhost:8090\r\n-offlineResourcesBaseUrl = offlineBundles\r\n-initializeCache = false\r\n-pseudo = false\r\n-collectSource = false\r\n-cleanCache = false\r\n-cacheExpiredTime = 8600000\r\n-machineTranslation = false\r\n-defaultLocale = fr\r\n-sourceLocale = en\n\\ No newline at end of file\n+# It's used for categorizing translation by product on Singleton side to maintain translation.\n+productName = JavaSample\n+\n+# Define the translation's version used by Singleton service.\n+version = 1.0.0\n+\n+######################################################################################\n+# [vipServer      ] - Singleton server's location. It could points to local Singleton server, or remote Singleton server.\n+# [initializeCache] - If initializeCache is true, the translation will be loaded to application cache from Singleton service when application starts up;\n+#                     else the translation will be fetched to cache when API call happens.\n+# [pseudo         ] - If pseudo is true, client will return pseudo translation whether translation is ready or not.\n+# [collectSource  ] - If collectSource is true, will enable the source collection functionality which means client will send the received sources to Singleton server for translation;\n+#                     else there's no source collection.\n+# [cleanCache     ] - If cleanCache is true, cache will be cleaned periodically.\n+# [cacheExpiredTime  ] - Cache expiration time. unit: millisecond.\n+# [machineTranslation] - If machineTranslation is true, will get translation by machine translation.\n+######################################################################################\n+vipServer = http://localhost:8090\n+offlineResourcesBaseUrl = offlineBundles\n+initializeCache = false\n+pseudo = false\n+collectSource = false\n+cleanCache = false\n+cacheExpiredTime = 8600000\n+machineTranslation = false\n+defaultLocale = fr\n+sourceLocale = en\n+prodMode = true", "originalCommit": "b7dabdba91d395294a9c4ee497cde547b1c1b5a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNzIxMw==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r428207213", "bodyText": "It is false by default in VIPCfg.java. We want to demonstrate prodMode = true here in the sample app so that the default locale will be returned as fallback.", "author": "jessiejuachon", "createdAt": "2020-05-20T18:05:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcyMTQxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM2MzQwNA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r428363404", "bodyText": "I will just manually set prodMode=true in one of the examples.", "author": "jessiejuachon", "createdAt": "2020-05-20T23:27:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcyMTQxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcyMTQ5Mg==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r427721492", "bodyText": "This should be false by default.", "author": "Xiaochao8", "createdAt": "2020-05-20T03:30:25Z", "path": "src/main/resources/vipconfig.properties", "diffHunk": "@@ -22,4 +22,5 @@ collectSource = false\n cleanCache = false\n cacheExpiredTime = 8600000\n machineTranslation = false\n-defaultLocale = en\n\\ No newline at end of file\n+defaultLocale = en\n+prodMode = true", "originalCommit": "b7dabdba91d395294a9c4ee497cde547b1c1b5a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIxMDg5Mg==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r428210892", "bodyText": "I have just removed this from vipconfig.properties and changed only specific tests for prodMode =true.", "author": "jessiejuachon", "createdAt": "2020-05-20T18:11:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzcyMTQ5Mg=="}], "type": "inlineReview"}, {"oid": "d8543ecc66657e97b222be404632503193a37b91", "url": "https://github.com/vmware/singleton/commit/d8543ecc66657e97b222be404632503193a37b91", "message": "code clean up", "committedDate": "2020-05-20T23:27:19Z", "type": "commit"}, {"oid": "e8094f40d6ea7c7e196d310238080f228a050e36", "url": "https://github.com/vmware/singleton/commit/e8094f40d6ea7c7e196d310238080f228a050e36", "message": "Setting default prodMode to true", "committedDate": "2020-05-21T04:26:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcwNzU3MA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r430707570", "bodyText": "If statement added for use case #1: Requested locale is not supported (bundle not found online or offline)", "author": "jessiejuachon", "createdAt": "2020-05-26T21:05:51Z", "path": "src/main/java/com/vmware/vipclient/i18n/messages/service/StringService.java", "diffHunk": "@@ -36,19 +36,21 @@ public String getString(MessagesDTO dto) {\n     \tIterator<Locale> fallbackLocalesIter = LocaleUtility.getFallbackLocales().iterator();\n     \tMessageCacheItem cacheItem = new ComponentService(dto).getMessages();\n     \t\n-    \t// While failed to get MessageCacheItem, use MessageCacheItem of the next fallback locale. \n-    \twhile (cacheItem.getCachedData().isEmpty() && fallbackLocalesIter.hasNext()) {\n-    \t\tLocale fallback = fallbackLocalesIter.next();\n-\t\t\tMessagesDTO fallbackLocaleDTO = new MessagesDTO(dto.getComponent(), \n-\t\t\t\t\tkey, dto.getSource(), fallback.toLanguageTag(), null);\n-\t\t\tcacheItem = new ComponentService(fallbackLocaleDTO).getMessages();\n-\t\t\t\n-\t\t\t// Cache a reference to the MessageCacheItem of the fallback locale \n-\t\t\tif (!cacheItem.getCachedData().isEmpty()) {\n-\t\t\t\tCacheService cacheService = new CacheService(dto);\n-\t\t\t\tcacheService.addCacheOfComponent(cacheItem);\n+    \tif (VIPCfg.getInstance().isProdMode()) {", "originalCommit": "e8094f40d6ea7c7e196d310238080f228a050e36", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcwODM3Mg==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r430708372", "bodyText": "If-statement added for use case#2: A requested (target/default) message is not found; source message is also not found.", "author": "jessiejuachon", "createdAt": "2020-05-26T21:07:33Z", "path": "src/main/java/com/vmware/vipclient/i18n/base/instances/TranslationMessage.java", "diffHunk": "@@ -96,7 +97,9 @@ public String getMessage(final Locale locale, final String component, final Stri\n     \t\tif (source != null && !source.isEmpty()) {\n     \t\t\treturn FormatUtils.format(source, LocaleUtility.getSourceLocale(), args);\n     \t\t}\n-    \t\treturn key;\n+    \t\tif (VIPCfg.getInstance().isProdMode())", "originalCommit": "e8094f40d6ea7c7e196d310238080f228a050e36", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9a5ef77f77349a48b15851181fc41146b2128878", "url": "https://github.com/vmware/singleton/commit/9a5ef77f77349a48b15851181fc41146b2128878", "message": "Removing prodMode configuration and logic. Throwing exception if source key not found. Returning default locale message if locale not supported.", "committedDate": "2020-06-17T01:14:24Z", "type": "commit"}, {"oid": "5011c382379eef35d44c9c6c7f2b2ac9be18f10c", "url": "https://github.com/vmware/singleton/commit/5011c382379eef35d44c9c6c7f2b2ac9be18f10c", "message": "Updating javadoc", "committedDate": "2020-06-17T02:45:16Z", "type": "commit"}, {"oid": "33432b1673cbc2956cd91f2e5a9186e1d0c8bc58", "url": "https://github.com/vmware/singleton/commit/33432b1673cbc2956cd91f2e5a9186e1d0c8bc58", "message": "Fixing bug: Fallback shall apply to both TranslationMessage.getMessage and TranslationMessage.getMessages", "committedDate": "2020-06-17T06:38:14Z", "type": "commit"}, {"oid": "c9d3cae952a2a5d2957b6c9b008dc4dd0ea53ba4", "url": "https://github.com/vmware/singleton/commit/c9d3cae952a2a5d2957b6c9b008dc4dd0ea53ba4", "message": "Adding test for Translateion.getMessages, locale not supported", "committedDate": "2020-06-17T06:51:06Z", "type": "commit"}, {"oid": "adb40eca02003a216df29187d4688206dfed5268", "url": "https://github.com/vmware/singleton/commit/adb40eca02003a216df29187d4688206dfed5268", "message": "code comments", "committedDate": "2020-06-17T07:02:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwMjY4MA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r442602680", "bodyText": "Why do you change this file?", "author": "Xiaochao8", "createdAt": "2020-06-19T02:47:50Z", "path": "sample-client-app/src/main/resources/sampleconfig.properties", "diffHunk": "@@ -1,27 +1,27 @@\n-# It's used for categorizing translation by product on Singleton side to maintain translation.\r\n-productName = JavaSample\r\n-\r\n-# Define the translation's version used by Singleton service.\r\n-version = 1.0.0\r\n-\r\n-######################################################################################\r\n-# [vipServer      ] - Singleton server's location. It could points to local Singleton server, or remote Singleton server.\r\n-# [initializeCache] - If initializeCache is true, the translation will be loaded to application cache from Singleton service when application starts up;\r\n-#                     else the translation will be fetched to cache when API call happens.\r\n-# [pseudo         ] - If pseudo is true, client will return pseudo translation whether translation is ready or not.\r\n-# [collectSource  ] - If collectSource is true, will enable the source collection functionality which means client will send the received sources to Singleton server for translation;\r\n-#                     else there's no source collection.\r\n-# [cleanCache     ] - If cleanCache is true, cache will be cleaned periodically.\r\n-# [cacheExpiredTime  ] - Cache expiration time. unit: millisecond.\r\n-# [machineTranslation] - If machineTranslation is true, will get translation by machine translation.\r\n-######################################################################################\r\n-vipServer = http://localhost:8090\r\n-offlineResourcesBaseUrl = offlineBundles\r\n-initializeCache = false\r\n-pseudo = false\r\n-collectSource = false\r\n-cleanCache = false\r\n-cacheExpiredTime = 8600000\r\n-machineTranslation = false\r\n-defaultLocale = fr\r\n-sourceLocale = en\n\\ No newline at end of file\n+# It's used for categorizing translation by product on Singleton side to maintain translation.", "originalCommit": "adb40eca02003a216df29187d4688206dfed5268", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcwMzAxNA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r442703014", "bodyText": "It had carriage returns at the end. I just cleaned it up.\nhttps://stackoverflow.com/questions/1822849/what-are-these-ms-that-keep-showing-up-in-my-files-in-emacs", "author": "jessiejuachon", "createdAt": "2020-06-19T08:20:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwMjY4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwMjkwNg==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r442602906", "bodyText": "Why do you add this?", "author": "Xiaochao8", "createdAt": "2020-06-19T02:48:42Z", "path": "src/main/java/com/vmware/vipclient/i18n/messages/service/StringService.java", "diffHunk": "@@ -26,17 +26,19 @@\n import com.vmware.vipclient.i18n.util.JSONUtils;\n import com.vmware.vipclient.i18n.util.LocaleUtility;\n \n+@Deprecated\n public class StringService {\n     Logger              logger = LoggerFactory.getLogger(StringService.class);\n     \n     @SuppressWarnings(\"unchecked\")\n+    @Deprecated\n     public String getString(MessagesDTO dto) {\n     \tString key = dto.getKey();\n     \t\n-    \tIterator<Locale> fallbackLocalesIter = LocaleUtility.getFallbackLocales().iterator();\n     \tMessageCacheItem cacheItem = new ComponentService(dto).getMessages();\n     \t\n     \t// While failed to get MessageCacheItem, use MessageCacheItem of the next fallback locale. \n+    \tIterator<Locale> fallbackLocalesIter = LocaleUtility.getFallbackLocales().iterator();", "originalCommit": "adb40eca02003a216df29187d4688206dfed5268", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcwNjIyMw==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r442706223", "bodyText": "Do you mean line 41? I just moved it from line 36 to here, next to the while loop where it is used.", "author": "jessiejuachon", "createdAt": "2020-06-19T08:27:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwMjkwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwMzE2Ng==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r442603166", "bodyText": "Can you please don't make this change?", "author": "Xiaochao8", "createdAt": "2020-06-19T02:49:48Z", "path": "src/main/java/com/vmware/vipclient/i18n/VIPCfg.java", "diffHunk": "@@ -67,7 +67,6 @@\n     private String                     i18nScope     = \"numbers,dates,currencies,plurals,measurements\";\n     private String\t\t\t\t\t   offlineResourcesBaseUrl;\n     \n-    ", "originalCommit": "adb40eca02003a216df29187d4688206dfed5268", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcwMTk5Nw==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r442701997", "bodyText": "Why do we need 2 blank lines? I just cleaned this up  a bit.", "author": "jessiejuachon", "createdAt": "2020-06-19T08:18:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwMzE2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwNzI3OA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r442607278", "bodyText": "How about to change name to getMessageFromCache?", "author": "Xiaochao8", "createdAt": "2020-06-19T03:07:46Z", "path": "src/main/java/com/vmware/vipclient/i18n/base/instances/TranslationMessage.java", "diffHunk": "@@ -63,8 +67,8 @@ public TranslationMessage() {\n      */\n     private String getCachedMessage(String component, String key, Locale locale) {", "originalCommit": "adb40eca02003a216df29187d4688206dfed5268", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwODEyMw==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r442608123", "bodyText": "The loop should break here.", "author": "Xiaochao8", "createdAt": "2020-06-19T03:11:47Z", "path": "src/main/java/com/vmware/vipclient/i18n/base/instances/TranslationMessage.java", "diffHunk": "@@ -305,17 +306,38 @@ public boolean postString(final Locale locale, final String component,\n         return cs.getMessages().getCachedData();\n     }\n     \n-    /**\n-     * Retrieves localized messages\n-     *\n-     * @param locale The locale in which the message is requested to be localized\n-     * @param component The Singleton component \n-     * @return Message keys, each one mapped to the localized message\n+     /**\n+     * Retrieves the set of localized messages from the cache. It applies locale fallback mechanism in case of failure.\n+     * \n+     * @param component The Singleton component\n+     * @param locale The locale in which the messages are requested to be localized\n+     * @return One of the items in the following priority-ordered list: \n+     * <ul>\n+     * \t\t<li>The messages in the requested locale</li> \n+     * \t\t<li>The messages in the default locale</li>\n+     * \t\t<li>The source messages</li>\n+     * </ul>\n      */\n     public Map<String, String> getMessages(final Locale locale, final String component) {\n         MessagesDTO dto = new MessagesDTO(component, null, null, locale.toLanguageTag(), this.cfg);\n-        ComponentService cs = new ComponentService(dto);\n-        return cs.getMessages().getCachedData();\n+        MessageCacheItem cacheItem = new ComponentService(dto).getMessages();\n+        \n+        // While failed to get MessageCacheItem, use MessageCacheItem of the next fallback locale. \n+    \tIterator<Locale> fallbackLocalesIter = LocaleUtility.getFallbackLocales().iterator();\n+    \twhile (cacheItem.getCachedData().isEmpty() && fallbackLocalesIter.hasNext()) {\n+    \t\tLocale fallback = fallbackLocalesIter.next();\n+\t\t\tMessagesDTO fallbackLocaleDTO = new MessagesDTO(dto.getComponent(), \n+\t\t\t\t\tdto.getKey(), dto.getSource(), fallback.toLanguageTag(), null);\n+\t\t\tcacheItem = new ComponentService(fallbackLocaleDTO).getMessages();\n+\t\t\t\n+\t\t\t// Cache a reference to the MessageCacheItem of the fallback locale \n+\t\t\tif (!cacheItem.getCachedData().isEmpty()) {\n+\t\t\t\tCacheService cacheService = new CacheService(dto);\n+\t\t\t\tcacheService.addCacheOfComponent(cacheItem);", "originalCommit": "adb40eca02003a216df29187d4688206dfed5268", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjcwNTA0Mg==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r442705042", "bodyText": "If !cacheItem.getCachedData().isEmpty(), then the while loop condition is not satisfied anymore in the next iteration. So it naturally breaks, no need to add a break statement.", "author": "jessiejuachon", "createdAt": "2020-06-19T08:24:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwODEyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM4MzQyMA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r443383420", "bodyText": "Don't need to judge twice in one cycle.", "author": "Xiaochao8", "createdAt": "2020-06-22T08:04:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwODEyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIxMDUwNA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r447210504", "bodyText": "I don't get it. What do you mean by judge twice in one cycle?\nWhen it enters the while loop, cacheItem.getCachedData() must be empty. Then in line 331, a new object will be fetched and assigned to cacheItem so cacheItem.getCachedData() will NOT be empty anymore. If this happens in line 331, I want to load this newly fetched cacheItem into the cache --> lines 334-337.\nHow do you want to change this logic?", "author": "jessiejuachon", "createdAt": "2020-06-29T19:44:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjYwODEyMw=="}], "type": "inlineReview"}, {"oid": "7ab5c59fb1c97e8b2a826f669b4ca096f34632ca", "url": "https://github.com/vmware/singleton/commit/7ab5c59fb1c97e8b2a826f669b4ca096f34632ca", "message": "code clean up", "committedDate": "2020-06-19T08:28:28Z", "type": "commit"}, {"oid": "3c100893aa6e53535cf703ecfd6bef8f03f12009", "url": "https://github.com/vmware/singleton/commit/3c100893aa6e53535cf703ecfd6bef8f03f12009", "message": "Fix issue: https://github.com/vmware/singleton/issues/622", "committedDate": "2020-06-19T09:48:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3OTg4Nw==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r443279887", "bodyText": "329~338 has indention problem.", "author": "jin-jasper", "createdAt": "2020-06-22T01:29:02Z", "path": "src/main/java/com/vmware/vipclient/i18n/base/instances/TranslationMessage.java", "diffHunk": "@@ -305,17 +306,38 @@ public boolean postString(final Locale locale, final String component,\n         return cs.getMessages().getCachedData();\n     }\n     \n-    /**\n-     * Retrieves localized messages\n-     *\n-     * @param locale The locale in which the message is requested to be localized\n-     * @param component The Singleton component \n-     * @return Message keys, each one mapped to the localized message\n+     /**\n+     * Retrieves the set of localized messages from the cache. It applies locale fallback mechanism in case of failure.\n+     * \n+     * @param component The Singleton component\n+     * @param locale The locale in which the messages are requested to be localized\n+     * @return One of the items in the following priority-ordered list: \n+     * <ul>\n+     * \t\t<li>The messages in the requested locale</li> \n+     * \t\t<li>The messages in the default locale</li>\n+     * \t\t<li>The source messages</li>\n+     * </ul>\n      */\n     public Map<String, String> getMessages(final Locale locale, final String component) {\n         MessagesDTO dto = new MessagesDTO(component, null, null, locale.toLanguageTag(), this.cfg);\n-        ComponentService cs = new ComponentService(dto);\n-        return cs.getMessages().getCachedData();\n+        MessageCacheItem cacheItem = new ComponentService(dto).getMessages();\n+        \n+        // While failed to get MessageCacheItem, use MessageCacheItem of the next fallback locale. \n+    \tIterator<Locale> fallbackLocalesIter = LocaleUtility.getFallbackLocales().iterator();\n+    \twhile (cacheItem.getCachedData().isEmpty() && fallbackLocalesIter.hasNext()) {\n+    \t\tLocale fallback = fallbackLocalesIter.next();\n+\t\t\tMessagesDTO fallbackLocaleDTO = new MessagesDTO(dto.getComponent(), \n+\t\t\t\t\tdto.getKey(), dto.getSource(), fallback.toLanguageTag(), null);\n+\t\t\tcacheItem = new ComponentService(fallbackLocaleDTO).getMessages();\n+\t\t\t\n+\t\t\t// Cache a reference to the MessageCacheItem of the fallback locale \n+\t\t\tif (!cacheItem.getCachedData().isEmpty()) {\n+\t\t\t\tCacheService cacheService = new CacheService(dto);\n+\t\t\t\tcacheService.addCacheOfComponent(cacheItem);\n+\t\t\t}", "originalCommit": "3c100893aa6e53535cf703ecfd6bef8f03f12009", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI4MDU1OA==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r443280558", "bodyText": "alignment problem of equal sign", "author": "jin-jasper", "createdAt": "2020-06-22T01:33:52Z", "path": "src/main/java/com/vmware/vipclient/i18n/common/ConstantsMsg.java", "diffHunk": "@@ -13,5 +13,6 @@\n     public static final String SERVER_CONTENT_ERROR = \"The content from server is wrong!\";\r\n     public static final String UNKNOWN_ERROR        = \"Unknown error.\";\r\n     public static final String GET_MESSAGES_FAILED  = \"Failed to get messages for component {0}, locale: {1}, data source: {2}.\";\r\n+    public static final String GET_MESSAGE_FAILED\t= \"Failed to get any message for key: {0} of component {1}, requested locale: {2}\";\r", "originalCommit": "3c100893aa6e53535cf703ecfd6bef8f03f12009", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI4MTk3OQ==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r443281979", "bodyText": "There is a space char or a tab at the end of the line.", "author": "jin-jasper", "createdAt": "2020-06-22T01:43:04Z", "path": "src/test/java/com/vmware/vip/i18n/TranslationMessageTest.java", "diffHunk": "@@ -211,7 +220,7 @@ public void testGetComponentMessages() {\n         Assert.assertEquals(message_zh_CN, retMap5.get(key));\n \n         Map<String, String> retMap6 = translation.getMessages(Locale.forLanguageTag(\"zh-Hant-TW\"), component);\n-        Assert.assertEquals(message_zh_TW, retMap6.get(key));\n+        Assert.assertEquals(message_zh_TW, retMap6.get(key));  ", "originalCommit": "3c100893aa6e53535cf703ecfd6bef8f03f12009", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzkzNTY0OQ==", "url": "https://github.com/vmware/singleton/pull/567#discussion_r443935649", "bodyText": "'ProdMode' should be deleted.", "author": "jin-jasper", "createdAt": "2020-06-23T03:06:32Z", "path": "src/test/java/com/vmware/vipclient/i18n/messages/service/OfflineModeTest.java", "diffHunk": "@@ -106,16 +110,19 @@ public void testGetMsgsFailedKeyNotFound() {\n         Locale newLocale = new Locale(\"en\");\n         dto.setLocale(newLocale.toLanguageTag());\n     \t\n-    \tString message = translation.getMessage(newLocale, component, key, args);\n-    \t// Return the key because message does not exist in any locale\n-    \tassertEquals(key, message);\n+        VIPJavaClientException e = assertThrows(VIPJavaClientException.class, () -> {\n+        \ttranslation.getMessage(newLocale, component, key, args);\n+        });\n+        \n+    \t// Throw an exception because message key does not exist anywhere\n+    \tassertEquals(FormatUtils.format(ConstantsMsg.GET_MESSAGE_FAILED, key, component, newLocale), e.getMessage());\n     \t\n     \tcfg.setOfflineResourcesBaseUrl(offlineResourcesBaseUrlOrig);\n     \tcfg.setMsgOriginsQueue(msgOriginsQueueOrig);\n     }\n     \n     @Test\n-    public void testGetMsgsFailedUseDefault() { \n+    public void testGetMsgsFailedProdModeUseDefault() { ", "originalCommit": "3c100893aa6e53535cf703ecfd6bef8f03f12009", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "76105b7fc941321e7522e429b330b02aab6fb4f9", "url": "https://github.com/vmware/singleton/commit/76105b7fc941321e7522e429b330b02aab6fb4f9", "message": "code clean up", "committedDate": "2020-06-29T20:05:15Z", "type": "commit"}, {"oid": "49c564894f62214104a7d62aa6fe65a33f6c450e", "url": "https://github.com/vmware/singleton/commit/49c564894f62214104a7d62aa6fe65a33f6c450e", "message": "code clean up", "committedDate": "2020-06-29T20:20:06Z", "type": "commit"}, {"oid": "d543e99fa6589c8dff25446f23b381e14bdc293e", "url": "https://github.com/vmware/singleton/commit/d543e99fa6589c8dff25446f23b381e14bdc293e", "message": "code clean up", "committedDate": "2020-06-29T20:26:41Z", "type": "commit"}, {"oid": "3ecf958b199a67032fcc42cec63f5cff8813732f", "url": "https://github.com/vmware/singleton/commit/3ecf958b199a67032fcc42cec63f5cff8813732f", "message": "code clean up", "committedDate": "2020-06-29T20:28:09Z", "type": "commit"}, {"oid": "e6a07a1ce6589b8768f30097bee0c90761cfffc2", "url": "https://github.com/vmware/singleton/commit/e6a07a1ce6589b8768f30097bee0c90761cfffc2", "message": "code clean up", "committedDate": "2020-06-29T20:30:38Z", "type": "commit"}, {"oid": "89ff0889154a93f9069124033acc18e5f1179e48", "url": "https://github.com/vmware/singleton/commit/89ff0889154a93f9069124033acc18e5f1179e48", "message": "code clean up", "committedDate": "2020-06-29T20:31:46Z", "type": "commit"}, {"oid": "f1356abf4b930f054da32a7722f9e4d0d3ff1cb1", "url": "https://github.com/vmware/singleton/commit/f1356abf4b930f054da32a7722f9e4d0d3ff1cb1", "message": "code clean up", "committedDate": "2020-06-29T20:32:47Z", "type": "commit"}, {"oid": "f4c12147f958c5014b8e47959cf216a9db1d380d", "url": "https://github.com/vmware/singleton/commit/f4c12147f958c5014b8e47959cf216a9db1d380d", "message": "Loading configuration from the JSON configuration file", "committedDate": "2020-03-11T00:00:20Z", "type": "commit"}, {"oid": "1a4d95ef79fc9f4d3a4d2fab03633ab88bcea1e1", "url": "https://github.com/vmware/singleton/commit/1a4d95ef79fc9f4d3a4d2fab03633ab88bcea1e1", "message": "Removing code that is not yet ready to be used from the sample application", "committedDate": "2020-03-11T00:54:17Z", "type": "commit"}, {"oid": "5e72b73b497563607e5031d5afa322caffd03fca", "url": "https://github.com/vmware/singleton/commit/5e72b73b497563607e5031d5afa322caffd03fca", "message": "fixing failing code scan\nhttps://sonarcloud.io/project/issues?id=jessiejuachon-java-client-g11n-java-client&issues=AXDG68NFL24bPpi-pS5s&open=AXDG68NFL24bPpi-pS5s\nhttps://sonarcloud.io/project/issues?id=jessiejuachon-java-client-g11n-java-client&issues=AXDG68IGL24bPpi-pS2r&open=AXDG68IGL24bPpi-pS2r\n\nSigned-off-by: Jessie <jessiejuachon@gmail.com>", "committedDate": "2020-03-11T22:01:24Z", "type": "commit"}, {"oid": "73d85ca7fca1290a93558fd937afd18dc27e92d6", "url": "https://github.com/vmware/singleton/commit/73d85ca7fca1290a93558fd937afd18dc27e92d6", "message": "Adding a cache properties map to hold cache details such as etag and cache control", "committedDate": "2020-03-12T07:58:55Z", "type": "commit"}, {"oid": "2a381070ef1e057fda0b08ca5d65323482273a86", "url": "https://github.com/vmware/singleton/commit/2a381070ef1e057fda0b08ca5d65323482273a86", "message": "Removing white space\n\nSigned-off-by: Jessie <jessiejuachon@gmail.com>", "committedDate": "2020-03-12T08:09:09Z", "type": "commit"}, {"oid": "c7f5d4f4f741152c0d908c1cd91df60ac1ccc63a", "url": "https://github.com/vmware/singleton/commit/c7f5d4f4f741152c0d908c1cd91df60ac1ccc63a", "message": "Fixing failing unit test", "committedDate": "2020-03-12T09:09:08Z", "type": "commit"}, {"oid": "056891a79856058bf9af28c44110f588e61eeefc", "url": "https://github.com/vmware/singleton/commit/056891a79856058bf9af28c44110f588e61eeefc", "message": "Parse headers, response code, response message from an HTTP response and return them upstream.", "committedDate": "2020-03-12T22:59:17Z", "type": "commit"}, {"oid": "a2ba98bd3fbf4ac69a74b1237b5e4db2f92c71cf", "url": "https://github.com/vmware/singleton/commit/a2ba98bd3fbf4ac69a74b1237b5e4db2f92c71cf", "message": "Storing response headers in Map of cache properties", "committedDate": "2020-03-17T19:30:18Z", "type": "commit"}, {"oid": "17978bd621bc7ee7de27205534568fee986b1d0b", "url": "https://github.com/vmware/singleton/commit/17978bd621bc7ee7de27205534568fee986b1d0b", "message": "Fixing failing unit test due to NullPointerException when doing Map.putAll(null)", "committedDate": "2020-03-17T22:50:12Z", "type": "commit"}, {"oid": "6c691708a3b9b0a891622a7a96d3d979ff3cb807", "url": "https://github.com/vmware/singleton/commit/6c691708a3b9b0a891622a7a96d3d979ff3cb807", "message": "Changes after code review.", "committedDate": "2020-03-17T23:41:27Z", "type": "commit"}, {"oid": "41a8aa1c4afd56cc1042939892a22dbca64adc1d", "url": "https://github.com/vmware/singleton/commit/41a8aa1c4afd56cc1042939892a22dbca64adc1d", "message": "Removing exception handling for now", "committedDate": "2020-03-18T22:09:37Z", "type": "commit"}, {"oid": "dd2455d5e68187dd4061b9c71ccd2799480d3d85", "url": "https://github.com/vmware/singleton/commit/dd2455d5e68187dd4061b9c71ccd2799480d3d85", "message": "Deprecating VIPCfg.initialize; cleaning up code", "committedDate": "2020-03-19T16:43:36Z", "type": "commit"}, {"oid": "e26d372496ced19785a48b187e3bcdb1c1442ba1", "url": "https://github.com/vmware/singleton/commit/e26d372496ced19785a48b187e3bcdb1c1442ba1", "message": "Storing the http response code in the cache", "committedDate": "2020-03-20T15:45:46Z", "type": "commit"}, {"oid": "01ab69ee53d5f6f534effc7632ec4324cbe7f4ca", "url": "https://github.com/vmware/singleton/commit/01ab69ee53d5f6f534effc7632ec4324cbe7f4ca", "message": "Using cached etag as if-none-match request header value in the request in order to get a 304 NOT MODIFIED http response", "committedDate": "2020-03-25T20:11:07Z", "type": "commit"}, {"oid": "750c9d2e6ce8f0ee81c505e8d2e61dfc23871258", "url": "https://github.com/vmware/singleton/commit/750c9d2e6ce8f0ee81c505e8d2e61dfc23871258", "message": "Handling 404 response from Singleton service", "committedDate": "2020-03-26T04:04:49Z", "type": "commit"}, {"oid": "529e5cc756460c5314a09a015caad7f4d26482d9", "url": "https://github.com/vmware/singleton/commit/529e5cc756460c5314a09a015caad7f4d26482d9", "message": "Using HTTP repsonse's Cache-Control max-age and timestamp to dertermine if component locale's cache has expired", "committedDate": "2020-03-26T23:38:04Z", "type": "commit"}, {"oid": "b40fcf9dc23a01cc336b67e7eddea16d85be9817", "url": "https://github.com/vmware/singleton/commit/b40fcf9dc23a01cc336b67e7eddea16d85be9817", "message": "Moving constants to URLUtils", "committedDate": "2020-03-26T23:49:56Z", "type": "commit"}, {"oid": "fa123f9a1bee0d349ab6c36384288c99e865fb99", "url": "https://github.com/vmware/singleton/commit/fa123f9a1bee0d349ab6c36384288c99e865fb99", "message": "Fixing failing test", "committedDate": "2020-03-27T00:07:11Z", "type": "commit"}, {"oid": "30b2054bc21a61ecdcecbb74f5a97b7af714682f", "url": "https://github.com/vmware/singleton/commit/30b2054bc21a61ecdcecbb74f5a97b7af714682f", "message": "Fixing failing code scan", "committedDate": "2020-03-27T02:47:23Z", "type": "commit"}, {"oid": "0c6978715a6e3856cb9a4e9610ca55ac6bcb1085", "url": "https://github.com/vmware/singleton/commit/0c6978715a6e3856cb9a4e9610ca55ac6bcb1085", "message": "Merge branch 'g11n-java-client' into g11n-java-client", "committedDate": "2020-03-27T06:47:07Z", "type": "commit"}, {"oid": "ffc0a7468bb258fcc9f498f9a5a51de8f273265d", "url": "https://github.com/vmware/singleton/commit/ffc0a7468bb258fcc9f498f9a5a51de8f273265d", "message": "Cleaning up import in ComponentService,java", "committedDate": "2020-03-30T00:29:34Z", "type": "commit"}, {"oid": "d8450e444632e849f020704d65106fed11417b0a", "url": "https://github.com/vmware/singleton/commit/d8450e444632e849f020704d65106fed11417b0a", "message": "Cleaning up code - caching/expiry", "committedDate": "2020-03-30T03:03:20Z", "type": "commit"}, {"oid": "d7f76412d6a2aa6f263c2390cb7ec471d5d2d5e9", "url": "https://github.com/vmware/singleton/commit/d7f76412d6a2aa6f263c2390cb7ec471d5d2d5e9", "message": "Merge branch 'g11n-java-client' of https://github.com/jessiejuachon/singleton into g11n-java-client", "committedDate": "2020-03-30T03:04:44Z", "type": "commit"}, {"oid": "0dcd827a1d49e9639f0a8249f8225f9b9db5e3a9", "url": "https://github.com/vmware/singleton/commit/0dcd827a1d49e9639f0a8249f8225f9b9db5e3a9", "message": "Adding tests for new caching workflow; enabling old caching workflow using cacheExpiredTime config", "committedDate": "2020-03-31T02:51:56Z", "type": "commit"}, {"oid": "d06adb3ac3d456f897882ee1af237d29c7f03967", "url": "https://github.com/vmware/singleton/commit/d06adb3ac3d456f897882ee1af237d29c7f03967", "message": "Fixing a failing test", "committedDate": "2020-03-31T03:16:31Z", "type": "commit"}, {"oid": "48c855873e5585f19152290738e4dbf6f0180b06", "url": "https://github.com/vmware/singleton/commit/48c855873e5585f19152290738e4dbf6f0180b06", "message": "Adding mock server response", "committedDate": "2020-03-31T05:37:28Z", "type": "commit"}, {"oid": "4e45bedd128d76023c8089f9194069ea0bf30f6a", "url": "https://github.com/vmware/singleton/commit/4e45bedd128d76023c8089f9194069ea0bf30f6a", "message": "Removing unused file sampleconfig.json", "committedDate": "2020-03-31T18:55:50Z", "type": "commit"}, {"oid": "6a40dc87413ed76788fc60332b91741137d5e829", "url": "https://github.com/vmware/singleton/commit/6a40dc87413ed76788fc60332b91741137d5e829", "message": "Changes from code review", "committedDate": "2020-03-31T21:46:03Z", "type": "commit"}, {"oid": "4c3c12d4549eac93be3481db3309dea80c6a9e6c", "url": "https://github.com/vmware/singleton/commit/4c3c12d4549eac93be3481db3309dea80c6a9e6c", "message": "Value of VIPCfg.cacheExpiredTime is -1 when value is not set in config file. This means max age from server will be used. Setting VIPCfg.cacheExpiredTime to 0 disables caching.", "committedDate": "2020-03-31T23:34:51Z", "type": "commit"}, {"oid": "7e0d9392a1b6988cc2e3347d07a1bab7696b82c2", "url": "https://github.com/vmware/singleton/commit/7e0d9392a1b6988cc2e3347d07a1bab7696b82c2", "message": "Changing a LinkedHashMap to a HashMap because insertion order does not need to be maintained.", "committedDate": "2020-04-02T17:10:51Z", "type": "commit"}, {"oid": "baef0d06f0facd4fe2383185dc1b7979bba186a7", "url": "https://github.com/vmware/singleton/commit/baef0d06f0facd4fe2383185dc1b7979bba186a7", "message": "Adding CacheItem object to contain map of data and a another map for any other cache properties", "committedDate": "2020-04-03T05:54:04Z", "type": "commit"}, {"oid": "02a96e9a7dbec8e912f29439334792d7b51069d6", "url": "https://github.com/vmware/singleton/commit/02a96e9a7dbec8e912f29439334792d7b51069d6", "message": "Fixing failing unit test", "committedDate": "2020-04-03T05:59:48Z", "type": "commit"}, {"oid": "78d88f796cb3bd3f015bb1d589717fe6897abc05", "url": "https://github.com/vmware/singleton/commit/78d88f796cb3bd3f015bb1d589717fe6897abc05", "message": "Fixing code scan issues", "committedDate": "2020-04-03T06:14:21Z", "type": "commit"}, {"oid": "655c223992bf244c4136a52c636119c9edf605fe", "url": "https://github.com/vmware/singleton/commit/655c223992bf244c4136a52c636119c9edf605fe", "message": "Code cleanup", "committedDate": "2020-04-03T08:36:12Z", "type": "commit"}, {"oid": "8746915f5015f497b6956e8f8b743806330cc51c", "url": "https://github.com/vmware/singleton/commit/8746915f5015f497b6956e8f8b743806330cc51c", "message": "Lazily instantiating cacheProps; code clean up and comments", "committedDate": "2020-04-05T17:28:09Z", "type": "commit"}, {"oid": "897a03cb27437a33e56cf9d6729bf4c205f1d7ec", "url": "https://github.com/vmware/singleton/commit/897a03cb27437a33e56cf9d6729bf4c205f1d7ec", "message": "Changes after code review", "committedDate": "2020-04-07T03:26:44Z", "type": "commit"}, {"oid": "3a4e18358f37c29502cfdeb60c44b94e63653601", "url": "https://github.com/vmware/singleton/commit/3a4e18358f37c29502cfdeb60c44b94e63653601", "message": "Adding header to CacheItem.java", "committedDate": "2020-04-07T03:36:56Z", "type": "commit"}, {"oid": "b08feb44ef346d12b3b2bdf6492aae0c6a4aa561", "url": "https://github.com/vmware/singleton/commit/b08feb44ef346d12b3b2bdf6492aae0c6a4aa561", "message": "Fixing code san issue. Synchronize on a final field", "committedDate": "2020-04-07T03:49:29Z", "type": "commit"}, {"oid": "8f57e243ed1f450349392e990b4502dd74543f91", "url": "https://github.com/vmware/singleton/commit/8f57e243ed1f450349392e990b4502dd74543f91", "message": "Fixing code scan bug", "committedDate": "2020-04-07T04:07:44Z", "type": "commit"}, {"oid": "72c8799ffbbb23dc61115375cbee52573e792ec9", "url": "https://github.com/vmware/singleton/commit/72c8799ffbbb23dc61115375cbee52573e792ec9", "message": "Changes after code review", "committedDate": "2020-04-07T17:15:34Z", "type": "commit"}, {"oid": "92edfc88a64c21470fc06c37b65503a6d9042f90", "url": "https://github.com/vmware/singleton/commit/92edfc88a64c21470fc06c37b65503a6d9042f90", "message": "Updating CasheService.isContainComponent to return false if cache key is stored but has a null value", "committedDate": "2020-04-07T19:15:13Z", "type": "commit"}, {"oid": "2042554b861d0b97b04a8d29c3a051106e24d8f0", "url": "https://github.com/vmware/singleton/commit/2042554b861d0b97b04a8d29c3a051106e24d8f0", "message": "HttpRequester if-none-match header and other customized headers are added to each specific request locally.", "committedDate": "2020-04-08T04:57:56Z", "type": "commit"}, {"oid": "ae707fface7ade445bc391f9f0e4125734eeddb1", "url": "https://github.com/vmware/singleton/commit/ae707fface7ade445bc391f9f0e4125734eeddb1", "message": "Code clean up; keep old caching expiration logic", "committedDate": "2020-04-08T17:09:39Z", "type": "commit"}, {"oid": "82818d5909f1b1e2117f7599993ea50777bd982a", "url": "https://github.com/vmware/singleton/commit/82818d5909f1b1e2117f7599993ea50777bd982a", "message": "Fixing code scan bug", "committedDate": "2020-04-08T21:12:57Z", "type": "commit"}, {"oid": "31d4ff67cd82cc1c80ddcf31ab6f1f1de32bc8bf", "url": "https://github.com/vmware/singleton/commit/31d4ff67cd82cc1c80ddcf31ab6f1f1de32bc8bf", "message": "Merge branch 'g11n-java-client' into g11n-java-client", "committedDate": "2020-04-08T21:50:07Z", "type": "commit"}, {"oid": "c9f83d7ffe36718af5c54a43acfeabe2d1ab2dca", "url": "https://github.com/vmware/singleton/commit/c9f83d7ffe36718af5c54a43acfeabe2d1ab2dca", "message": "code clean up", "committedDate": "2020-04-09T00:13:02Z", "type": "commit"}, {"oid": "78dcc1cc7de1700d332c4901ec3f09e546befd26", "url": "https://github.com/vmware/singleton/commit/78dcc1cc7de1700d332c4901ec3f09e546befd26", "message": "Removing response code and response msg from cache; Passing cacheItem object to be updated down the line.", "committedDate": "2020-04-09T07:14:14Z", "type": "commit"}, {"oid": "9281c640b3b78d987e1fd865b01f16e4edbfd768", "url": "https://github.com/vmware/singleton/commit/9281c640b3b78d987e1fd865b01f16e4edbfd768", "message": "Changes after code review", "committedDate": "2020-04-10T04:03:05Z", "type": "commit"}, {"oid": "26577625b3eb13f1f9367f313dd94d47c9113749", "url": "https://github.com/vmware/singleton/commit/26577625b3eb13f1f9367f313dd94d47c9113749", "message": "Adding header to CacheItem.java file", "committedDate": "2020-04-10T04:08:23Z", "type": "commit"}, {"oid": "9e80f09d4838f9de33bf9dce100744f4832630a0", "url": "https://github.com/vmware/singleton/commit/9e80f09d4838f9de33bf9dce100744f4832630a0", "message": "Fixing failing unit test", "committedDate": "2020-04-10T04:35:16Z", "type": "commit"}, {"oid": "68467f34882da413ed852f2ed4b1394e88bf64b1", "url": "https://github.com/vmware/singleton/commit/68467f34882da413ed852f2ed4b1394e88bf64b1", "message": "Changes after code review", "committedDate": "2020-04-10T23:14:41Z", "type": "commit"}, {"oid": "d67c72ee939034deb58b99d4fdf0fcc38857c006", "url": "https://github.com/vmware/singleton/commit/d67c72ee939034deb58b99d4fdf0fcc38857c006", "message": "Fixing code scan bugs", "committedDate": "2020-04-10T23:28:38Z", "type": "commit"}, {"oid": "85919738596847c3cd42fd2397226fb498cf6e28", "url": "https://github.com/vmware/singleton/commit/85919738596847c3cd42fd2397226fb498cf6e28", "message": "Not storing anything in cache if response is neither 200 nor 304", "committedDate": "2020-04-13T21:22:27Z", "type": "commit"}, {"oid": "22a5b29a9b5a9c676fac79ae412b1d7ffc5b35de", "url": "https://github.com/vmware/singleton/commit/22a5b29a9b5a9c676fac79ae412b1d7ffc5b35de", "message": "Loading messages from specified offline resource bundles", "committedDate": "2020-04-15T00:36:42Z", "type": "commit"}, {"oid": "ce2488b8af539a1456959b97e482435b11d5aeff", "url": "https://github.com/vmware/singleton/commit/ce2488b8af539a1456959b97e482435b11d5aeff", "message": "Merge branch 'g11n-java-client' of https://github.com/vmware/singleton into g11n-java-client", "committedDate": "2020-04-15T00:43:12Z", "type": "commit"}, {"oid": "109296301af054a8def120b98fd7e877acdb465f", "url": "https://github.com/vmware/singleton/commit/109296301af054a8def120b98fd7e877acdb465f", "message": "Adding header", "committedDate": "2020-04-15T00:48:03Z", "type": "commit"}, {"oid": "35d1d971e6bdaf2097dca029ee3ff15c4f72ac4c", "url": "https://github.com/vmware/singleton/commit/35d1d971e6bdaf2097dca029ee3ff15c4f72ac4c", "message": "Fixing failing unie test", "committedDate": "2020-04-15T01:14:11Z", "type": "commit"}, {"oid": "ada17f19d4e56d283ae65886b08e0d6a71031ba7", "url": "https://github.com/vmware/singleton/commit/ada17f19d4e56d283ae65886b08e0d6a71031ba7", "message": "Code changes after review; code clean up", "committedDate": "2020-04-16T17:06:32Z", "type": "commit"}, {"oid": "fc60eeffd82dc8e8214207524bda4864edd05add", "url": "https://github.com/vmware/singleton/commit/fc60eeffd82dc8e8214207524bda4864edd05add", "message": "Using java.nio.file.Paths", "committedDate": "2020-04-17T16:14:41Z", "type": "commit"}, {"oid": "3e70449176a975fa30985714d2c9f03795c72d6b", "url": "https://github.com/vmware/singleton/commit/3e70449176a975fa30985714d2c9f03795c72d6b", "message": "Offline mode as fallback when service fetch fails", "committedDate": "2020-04-17T17:07:36Z", "type": "commit"}, {"oid": "609d8e4a2515e6f3211898259d630f5b6b8a4ee9", "url": "https://github.com/vmware/singleton/commit/609d8e4a2515e6f3211898259d630f5b6b8a4ee9", "message": "Resetting VIPCfg and I18nFactory instances for each test", "committedDate": "2020-04-17T17:56:53Z", "type": "commit"}, {"oid": "dd19b1cd5d9b0b42df97388980ea6aac1d0cafd5", "url": "https://github.com/vmware/singleton/commit/dd19b1cd5d9b0b42df97388980ea6aac1d0cafd5", "message": "Resetting VIPCfg and I18nFactory after test", "committedDate": "2020-04-17T17:59:27Z", "type": "commit"}, {"oid": "7389f8b4d4c2e5c406de7147efcaf36b6ee453bd", "url": "https://github.com/vmware/singleton/commit/7389f8b4d4c2e5c406de7147efcaf36b6ee453bd", "message": "Fixing tests", "committedDate": "2020-04-17T22:31:30Z", "type": "commit"}, {"oid": "5b92e4480ca25d122c7f98dc389d7e4884a59a25", "url": "https://github.com/vmware/singleton/commit/5b92e4480ca25d122c7f98dc389d7e4884a59a25", "message": "Limit to wiremock test logging", "committedDate": "2020-04-20T17:42:50Z", "type": "commit"}, {"oid": "dfb41b5042e733f21f5cda4428faab6e0a95e19a", "url": "https://github.com/vmware/singleton/commit/dfb41b5042e733f21f5cda4428faab6e0a95e19a", "message": "Decreasing unit test log", "committedDate": "2020-04-20T21:47:47Z", "type": "commit"}, {"oid": "21a7105c4fdc5d88d8db80340b3b00d947622cc7", "url": "https://github.com/vmware/singleton/commit/21a7105c4fdc5d88d8db80340b3b00d947622cc7", "message": "this test is timing out and trying to connect 70+ times", "committedDate": "2020-04-21T00:43:23Z", "type": "commit"}, {"oid": "84343d506461aea4976a86fa25e7bb1b06703150", "url": "https://github.com/vmware/singleton/commit/84343d506461aea4976a86fa25e7bb1b06703150", "message": "Adding comments to code", "committedDate": "2020-04-21T00:56:15Z", "type": "commit"}, {"oid": "be8e443e6de5070baf91c76e1f4001188e8be0d5", "url": "https://github.com/vmware/singleton/commit/be8e443e6de5070baf91c76e1f4001188e8be0d5", "message": "Merge branch 'g11n-java-client' of https://github.com/vmware/singleton into g11n-java-client", "committedDate": "2020-04-21T18:26:20Z", "type": "commit"}, {"oid": "b805d3672e0b286648b612dd48d3fabe73f92fd4", "url": "https://github.com/vmware/singleton/commit/b805d3672e0b286648b612dd48d3fabe73f92fd4", "message": "Adding timestamp to cache fromn local bundle", "committedDate": "2020-04-21T19:14:03Z", "type": "commit"}, {"oid": "17bc16cd019c4d40ad82df7590869f82a76b0a96", "url": "https://github.com/vmware/singleton/commit/17bc16cd019c4d40ad82df7590869f82a76b0a96", "message": "Deprecating methods in TranslationMessage; adding new method getMessage", "committedDate": "2020-04-23T04:26:42Z", "type": "commit"}, {"oid": "15da01004363a3441944149c106b79908ba4cde6", "url": "https://github.com/vmware/singleton/commit/15da01004363a3441944149c106b79908ba4cde6", "message": "Added tests for TranslationMessage.getMessage", "committedDate": "2020-04-24T08:58:03Z", "type": "commit"}, {"oid": "631de868cb3b40899ace35017268bdb65b236091", "url": "https://github.com/vmware/singleton/commit/631de868cb3b40899ace35017268bdb65b236091", "message": "Fixing test", "committedDate": "2020-04-24T09:15:35Z", "type": "commit"}, {"oid": "ffd9adb09499997921630426e9a8327bf615ee50", "url": "https://github.com/vmware/singleton/commit/ffd9adb09499997921630426e9a8327bf615ee50", "message": "Fixing test", "committedDate": "2020-04-24T09:28:59Z", "type": "commit"}, {"oid": "c00f7ae3cacc0e17ab59a776b02c3be04a106252", "url": "https://github.com/vmware/singleton/commit/c00f7ae3cacc0e17ab59a776b02c3be04a106252", "message": "Fixing test", "committedDate": "2020-04-24T20:29:27Z", "type": "commit"}, {"oid": "d0504c49a179166868cbae84874647925d88c2a3", "url": "https://github.com/vmware/singleton/commit/d0504c49a179166868cbae84874647925d88c2a3", "message": "Removing comment field because source collection is not supported anymore; cleaning up tests; adding comments for javadoc", "committedDate": "2020-04-24T22:28:00Z", "type": "commit"}, {"oid": "79b18d0035a35a23fb26fe76cae4868e848a11b8", "url": "https://github.com/vmware/singleton/commit/79b18d0035a35a23fb26fe76cae4868e848a11b8", "message": "Code clean up", "committedDate": "2020-04-24T22:44:30Z", "type": "commit"}, {"oid": "ec9f5db8cd6110c5b714bc098d54680308c63d9a", "url": "https://github.com/vmware/singleton/commit/ec9f5db8cd6110c5b714bc098d54680308c63d9a", "message": "Changes from code review", "committedDate": "2020-04-24T22:58:26Z", "type": "commit"}, {"oid": "2e8bd3600fba20e5e17378b1e67e37216d8e6b06", "url": "https://github.com/vmware/singleton/commit/2e8bd3600fba20e5e17378b1e67e37216d8e6b06", "message": "Code clean up", "committedDate": "2020-04-24T23:25:19Z", "type": "commit"}, {"oid": "4e44a8c46fd2856ca97cf71158cb9804880e3e17", "url": "https://github.com/vmware/singleton/commit/4e44a8c46fd2856ca97cf71158cb9804880e3e17", "message": "Optional SourceOpt in initialization\n\nSigned-off-by: Jessie <jessiejuachon@gmail.com>", "committedDate": "2020-04-26T22:36:42Z", "type": "commit"}, {"oid": "de5c4ee9c7db7d3f53a979e15fdcae60a28958d4", "url": "https://github.com/vmware/singleton/commit/de5c4ee9c7db7d3f53a979e15fdcae60a28958d4", "message": "Fixing test", "committedDate": "2020-04-27T00:58:16Z", "type": "commit"}, {"oid": "406cb2a268cd5e18eee310577137c8f364bc8309", "url": "https://github.com/vmware/singleton/commit/406cb2a268cd5e18eee310577137c8f364bc8309", "message": "Adding comments to code", "committedDate": "2020-04-28T03:14:02Z", "type": "commit"}, {"oid": "c80696ab2f0bdfcc80ba268705ed147aed423b07", "url": "https://github.com/vmware/singleton/commit/c80696ab2f0bdfcc80ba268705ed147aed423b07", "message": "Adding comment for javadoc", "committedDate": "2020-04-28T04:33:36Z", "type": "commit"}, {"oid": "79d111e4404a4f171dcdfb001228afcbad996753", "url": "https://github.com/vmware/singleton/commit/79d111e4404a4f171dcdfb001228afcbad996753", "message": "Cleaning up code", "committedDate": "2020-04-28T21:54:07Z", "type": "commit"}, {"oid": "24d8d5d7ee9e667c88187761c5332d3c9485cf26", "url": "https://github.com/vmware/singleton/commit/24d8d5d7ee9e667c88187761c5332d3c9485cf26", "message": "Code clean up", "committedDate": "2020-04-28T22:02:21Z", "type": "commit"}, {"oid": "23e62b6f0b3f0e3e4d5973c6f00b4746256fe8dd", "url": "https://github.com/vmware/singleton/commit/23e62b6f0b3f0e3e4d5973c6f00b4746256fe8dd", "message": "Fixing test", "committedDate": "2020-04-28T23:28:49Z", "type": "commit"}, {"oid": "369643f588359e1ceb430768ab473566c503da3c", "url": "https://github.com/vmware/singleton/commit/369643f588359e1ceb430768ab473566c503da3c", "message": "Removing source message fallback from this PR", "committedDate": "2020-04-29T03:17:37Z", "type": "commit"}, {"oid": "4e67e25c4dee919192f1fb0aedd9fcc9d34a6e06", "url": "https://github.com/vmware/singleton/commit/4e67e25c4dee919192f1fb0aedd9fcc9d34a6e06", "message": "Merge branch 'g11n-java-client' into g11n-java-client", "committedDate": "2020-04-29T04:09:00Z", "type": "commit"}, {"oid": "636b5b4cf56f121cf871e07911dcb4d763a16c64", "url": "https://github.com/vmware/singleton/commit/636b5b4cf56f121cf871e07911dcb4d763a16c64", "message": "Default locale in config file instead of hardcoded; get supported locales for offline mode; fixing some bugs in getting supported locales", "committedDate": "2020-05-05T01:10:59Z", "type": "commit"}, {"oid": "71a87e52447b0fede8230e7f8f7e5c65ce034546", "url": "https://github.com/vmware/singleton/commit/71a87e52447b0fede8230e7f8f7e5c65ce034546", "message": "Merge branch 'g11n-java-client' into g11n-java-client", "committedDate": "2020-05-05T01:20:57Z", "type": "commit"}, {"oid": "b9a90e3e2190e8dec158f1e62e4bc2f3ccc1b21e", "url": "https://github.com/vmware/singleton/commit/b9a90e3e2190e8dec158f1e62e4bc2f3ccc1b21e", "message": "Fixing test", "committedDate": "2020-05-05T01:25:06Z", "type": "commit"}, {"oid": "060666d54ddfa7156433209ad06c959b4af649da", "url": "https://github.com/vmware/singleton/commit/060666d54ddfa7156433209ad06c959b4af649da", "message": "Fixing tests", "committedDate": "2020-05-05T01:56:26Z", "type": "commit"}, {"oid": "52e3695951a48d21de82180c140beead3924cf75", "url": "https://github.com/vmware/singleton/commit/52e3695951a48d21de82180c140beead3924cf75", "message": "Default locale to Locale.ENGLISH if not set in config file", "committedDate": "2020-05-05T03:04:12Z", "type": "commit"}, {"oid": "2858ebcb7441b8da09f70489b8f8e8e3a79c8cc9", "url": "https://github.com/vmware/singleton/commit/2858ebcb7441b8da09f70489b8f8e8e3a79c8cc9", "message": "Changed after code review: code clean up, bug fix", "committedDate": "2020-05-06T21:58:32Z", "type": "commit"}, {"oid": "bbe3047d43e1170f7cef6e69e51cc7d2ae7ff48e", "url": "https://github.com/vmware/singleton/commit/bbe3047d43e1170f7cef6e69e51cc7d2ae7ff48e", "message": "Update src/main/java/com/vmware/vipclient/i18n/messages/api/opt/local/LocalLocaleOpt.java\n\nCo-authored-by: Xiaochao Li <48587632+Xiaochao8@users.noreply.github.com>", "committedDate": "2020-05-08T02:49:19Z", "type": "commit"}, {"oid": "fa56388fa66f56bce4c746ff4c662591246908f4", "url": "https://github.com/vmware/singleton/commit/fa56388fa66f56bce4c746ff4c662591246908f4", "message": "Update src/main/java/com/vmware/vipclient/i18n/messages/api/opt/local/LocalLocaleOpt.java\n\nCo-authored-by: Xiaochao Li <48587632+Xiaochao8@users.noreply.github.com>", "committedDate": "2020-05-08T02:50:00Z", "type": "commit"}, {"oid": "08cd96d71656e546810805466962d82b4ab623ab", "url": "https://github.com/vmware/singleton/commit/08cd96d71656e546810805466962d82b4ab623ab", "message": "code clean up, error logging, bug fix", "committedDate": "2020-05-08T07:42:06Z", "type": "commit"}, {"oid": "e89ff56539cbf52e2819b70b28138356a0a6dd11", "url": "https://github.com/vmware/singleton/commit/e89ff56539cbf52e2819b70b28138356a0a6dd11", "message": "Merge branch 'g11n-java-client' of https://github.com/vmware/singleton into g11n-java-client", "committedDate": "2020-05-08T07:48:46Z", "type": "commit"}, {"oid": "119aebde51e1777a164c914bbd7d132d41ece371", "url": "https://github.com/vmware/singleton/commit/119aebde51e1777a164c914bbd7d132d41ece371", "message": "code clean up", "committedDate": "2020-05-08T07:52:57Z", "type": "commit"}, {"oid": "e8a937d79fb0a7b48b85ca5ac8623aa459d9c8a2", "url": "https://github.com/vmware/singleton/commit/e8a937d79fb0a7b48b85ca5ac8623aa459d9c8a2", "message": "code clean up", "committedDate": "2020-05-11T21:00:45Z", "type": "commit"}, {"oid": "9d95cd1379ac1e8cd3d30f8c085cbfc0a68d8ab2", "url": "https://github.com/vmware/singleton/commit/9d95cd1379ac1e8cd3d30f8c085cbfc0a68d8ab2", "message": "Using messages_source.json for source locale messages.", "committedDate": "2020-05-12T23:35:30Z", "type": "commit"}]}