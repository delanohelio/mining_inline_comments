{"pr_number": 475, "pr_title": " Improve cache and local bundles", "pr_createdAt": "2020-03-25T06:09:40Z", "pr_url": "https://github.com/vmware/singleton/pull/475", "timeline": [{"oid": "88c5f1c3639173509172b176898be9a064d11e64", "url": "https://github.com/vmware/singleton/commit/88c5f1c3639173509172b176898be9a064d11e64", "message": "First stage", "committedDate": "2020-03-17T04:03:53Z", "type": "commit"}, {"oid": "7d4c3226acf4895649de6311bf4b805bbcfdef0c", "url": "https://github.com/vmware/singleton/commit/7d4c3226acf4895649de6311bf4b805bbcfdef0c", "message": "Before etag", "committedDate": "2020-03-17T06:56:12Z", "type": "commit"}, {"oid": "d488edd918cdc49a916677c13c07ddfb4eab7ddf", "url": "https://github.com/vmware/singleton/commit/d488edd918cdc49a916677c13c07ddfb4eab7ddf", "message": "step 2", "committedDate": "2020-03-18T02:19:21Z", "type": "commit"}, {"oid": "a58462949c1f550123e7ef70071be29fe17bb980", "url": "https://github.com/vmware/singleton/commit/a58462949c1f550123e7ef70071be29fe17bb980", "message": "step 3", "committedDate": "2020-03-18T04:07:17Z", "type": "commit"}, {"oid": "999fd26f1c67e94cf5c070315842d6052e763e30", "url": "https://github.com/vmware/singleton/commit/999fd26f1c67e94cf5c070315842d6052e763e30", "message": "Continue", "committedDate": "2020-03-18T07:07:47Z", "type": "commit"}, {"oid": "54c8aa5d1dce3382afbd18e37b8bad524802740c", "url": "https://github.com/vmware/singleton/commit/54c8aa5d1dce3382afbd18e37b8bad524802740c", "message": "Change get component translation interface to product.", "committedDate": "2020-03-19T08:44:32Z", "type": "commit"}, {"oid": "814f2f5c30dffac4e315a5ed607bf48b2f39b564", "url": "https://github.com/vmware/singleton/commit/814f2f5c30dffac4e315a5ed607bf48b2f39b564", "message": "Basically done. Still need to clean and improve", "committedDate": "2020-03-21T00:17:10Z", "type": "commit"}, {"oid": "44d56febb001f826a2f68762f17539233b037c59", "url": "https://github.com/vmware/singleton/commit/44d56febb001f826a2f68762f17539233b037c59", "message": "continue", "committedDate": "2020-03-21T01:11:26Z", "type": "commit"}, {"oid": "bd1529bd7c36a14b7385e51ff95594533a3cf809", "url": "https://github.com/vmware/singleton/commit/bd1529bd7c36a14b7385e51ff95594533a3cf809", "message": "Finish task in last comments", "committedDate": "2020-03-21T02:27:52Z", "type": "commit"}, {"oid": "519e3dd07c989ec14a4a701675d6fedb02f2ebb6", "url": "https://github.com/vmware/singleton/commit/519e3dd07c989ec14a4a701675d6fedb02f2ebb6", "message": "Continue", "committedDate": "2020-03-21T05:17:34Z", "type": "commit"}, {"oid": "d137f679039a8e0825d1a5ace3ed1b563fbe6c6e", "url": "https://github.com/vmware/singleton/commit/d137f679039a8e0825d1a5ace3ed1b563fbe6c6e", "message": "continue", "committedDate": "2020-03-21T14:08:14Z", "type": "commit"}, {"oid": "9cc3845b24dab5f99df88c98b593fbde6326f867", "url": "https://github.com/vmware/singleton/commit/9cc3845b24dab5f99df88c98b593fbde6326f867", "message": "Continue", "committedDate": "2020-03-22T00:14:20Z", "type": "commit"}, {"oid": "b5f1fdedf0f5e501d07656b98e1fc9867be8df9c", "url": "https://github.com/vmware/singleton/commit/b5f1fdedf0f5e501d07656b98e1fc9867be8df9c", "message": "continue", "committedDate": "2020-03-22T04:05:27Z", "type": "commit"}, {"oid": "ea2966a246e9d4bbe1b0708ae5ebdc2aa046e072", "url": "https://github.com/vmware/singleton/commit/ea2966a246e9d4bbe1b0708ae5ebdc2aa046e072", "message": "Improve", "committedDate": "2020-03-23T03:12:01Z", "type": "commit"}, {"oid": "24fba2fe80bf2d53ef4643852e20c661fd2def77", "url": "https://github.com/vmware/singleton/commit/24fba2fe80bf2d53ef4643852e20c661fd2def77", "message": "Improve", "committedDate": "2020-03-23T04:06:16Z", "type": "commit"}, {"oid": "91ce9c9f2ec48eb89f58c157ada4a29777f76f3f", "url": "https://github.com/vmware/singleton/commit/91ce9c9f2ec48eb89f58c157ada4a29777f76f3f", "message": "Add test cases", "committedDate": "2020-03-23T05:37:20Z", "type": "commit"}, {"oid": "37407ba276bf6a94cf239b1c694d041ad9508b9f", "url": "https://github.com/vmware/singleton/commit/37407ba276bf6a94cf239b1c694d041ad9508b9f", "message": "Change README", "committedDate": "2020-03-23T05:54:19Z", "type": "commit"}, {"oid": "20d23d5b1c49a3485ce5e9a0d3eb2626aecf5dd3", "url": "https://github.com/vmware/singleton/commit/20d23d5b1c49a3485ce5e9a0d3eb2626aecf5dd3", "message": "Improve", "committedDate": "2020-03-24T02:02:38Z", "type": "commit"}, {"oid": "1f7858347ec283ce33ad3a928b479990cf0b2a05", "url": "https://github.com/vmware/singleton/commit/1f7858347ec283ce33ad3a928b479990cf0b2a05", "message": "Improve test coverage", "committedDate": "2020-03-24T07:44:20Z", "type": "commit"}, {"oid": "c8b469f1ec403faa6b412bf315c53965e4d92f5c", "url": "https://github.com/vmware/singleton/commit/c8b469f1ec403faa6b412bf315c53965e4d92f5c", "message": "Remove useless code", "committedDate": "2020-03-25T06:22:20Z", "type": "commit"}, {"oid": "491d74653be655ce2116ae7e6405aad11132fb87", "url": "https://github.com/vmware/singleton/commit/491d74653be655ce2116ae7e6405aad11132fb87", "message": "Merge branch 'g11n-go-client' into cache-improve", "committedDate": "2020-03-25T08:07:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NTM2OQ==", "url": "https://github.com/vmware/singleton/pull/475#discussion_r398355369", "bodyText": "const,  why not use upper case", "author": "tigershi", "createdAt": "2020-03-26T07:09:03Z", "path": "consts.go", "diffHunk": "@@ -7,22 +7,29 @@ package sgtn\n \r\n // api url\r\n const (\r\n-\ti18nApiroot          = \"/i18n/api/v2\"\r", "originalCommit": "491d74653be655ce2116ae7e6405aad11132fb87", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2194db87c33f1a7f41afe6aba1c110e840377c0b", "url": "https://github.com/vmware/singleton/commit/2194db87c33f1a7f41afe6aba1c110e840377c0b", "message": "Set age for local bundles and server cache-control error.", "committedDate": "2020-03-29T03:51:43Z", "type": "commit"}, {"oid": "92e0de03362ca0ed93b392a8f7d2f347bcb3fae0", "url": "https://github.com/vmware/singleton/commit/92e0de03362ca0ed93b392a8f7d2f347bcb3fae0", "message": "Add checkcfg when initialize instance", "committedDate": "2020-03-30T01:40:52Z", "type": "commit"}, {"oid": "a856beb658f87eb1e9aced252bdb6088531f373c", "url": "https://github.com/vmware/singleton/commit/a856beb658f87eb1e9aced252bdb6088531f373c", "message": "Change 304 const to the one in http package", "committedDate": "2020-03-30T03:53:34Z", "type": "commit"}, {"oid": "999e08d9b5dd814b37070d4a4fe1392cf91b40d6", "url": "https://github.com/vmware/singleton/commit/999e08d9b5dd814b37070d4a4fe1392cf91b40d6", "message": "Add more test cases", "committedDate": "2020-04-01T01:38:24Z", "type": "commit"}, {"oid": "9d9892cc3ea7b1d21b15d9672163f20c3761d579", "url": "https://github.com/vmware/singleton/commit/9d9892cc3ea7b1d21b15d9672163f20c3761d579", "message": "Update", "committedDate": "2020-04-02T07:01:42Z", "type": "commit"}, {"oid": "50b9f883e7c6b83d53a58a34f5ed444317e16a99", "url": "https://github.com/vmware/singleton/commit/50b9f883e7c6b83d53a58a34f5ed444317e16a99", "message": "Hide instance for users", "committedDate": "2020-04-02T09:14:38Z", "type": "commit"}, {"oid": "1fb9d5ce6282064cc2ec5f704388d8d7e56fc228", "url": "https://github.com/vmware/singleton/commit/1fb9d5ce6282064cc2ec5f704388d8d7e56fc228", "message": "Add parameter verification", "committedDate": "2020-04-05T01:02:26Z", "type": "commit"}, {"oid": "1ba20f508632308b60cd4a4f30a51d05173e718c", "url": "https://github.com/vmware/singleton/commit/1ba20f508632308b60cd4a4f30a51d05173e718c", "message": "Change NewConfig to LoadConfig", "committedDate": "2020-04-07T02:53:22Z", "type": "commit"}, {"oid": "f684cf7132e2c06f7416ce44ae640969c28ece76", "url": "https://github.com/vmware/singleton/commit/f684cf7132e2c06f7416ce44ae640969c28ece76", "message": "Save common messages to constants", "committedDate": "2020-04-13T08:03:48Z", "type": "commit"}, {"oid": "487fc27f8b8e4bdd48db4697fc545ee182cc3407", "url": "https://github.com/vmware/singleton/commit/487fc27f8b8e4bdd48db4697fc545ee182cc3407", "message": "Check data from bundle or server", "committedDate": "2020-04-17T07:28:43Z", "type": "commit"}, {"oid": "83e269d7addc875b3d989e2fe1ac540b8684646c", "url": "https://github.com/vmware/singleton/commit/83e269d7addc875b3d989e2fe1ac540b8684646c", "message": "Update default cache expiration time to 864000 seconds", "committedDate": "2020-04-21T00:23:56Z", "type": "commit"}, {"oid": "f6ed49af3ba09135a5e49dda1eeb073f98cbdbf3", "url": "https://github.com/vmware/singleton/commit/f6ed49af3ba09135a5e49dda1eeb073f98cbdbf3", "message": "Revert \"Update default cache expiration time to 864000 seconds\"\n\nThis reverts commit 83e269d7addc875b3d989e2fe1ac540b8684646c.", "committedDate": "2020-04-22T02:58:25Z", "type": "commit"}, {"oid": "96bdaa99a4ebf978345795e58163f6fe1b337f9c", "url": "https://github.com/vmware/singleton/commit/96bdaa99a4ebf978345795e58163f6fe1b337f9c", "message": "Change Config variables' name", "committedDate": "2020-04-23T01:14:58Z", "type": "commit"}, {"oid": "e2c84818b53a74bcefbbb913bef81495375d59c8", "url": "https://github.com/vmware/singleton/commit/e2c84818b53a74bcefbbb913bef81495375d59c8", "message": "Revert some changes", "committedDate": "2020-04-23T02:27:39Z", "type": "commit"}, {"oid": "47aa0f9cd0201236260bf34f660485fbf220a3bc", "url": "https://github.com/vmware/singleton/commit/47aa0f9cd0201236260bf34f660485fbf220a3bc", "message": "Improve code", "committedDate": "2020-04-23T03:12:33Z", "type": "commit"}, {"oid": "6c29d666e9e7f5a1d80cc210ce72cbe65b534272", "url": "https://github.com/vmware/singleton/commit/6c29d666e9e7f5a1d80cc210ce72cbe65b534272", "message": "Fix a bug", "committedDate": "2020-04-23T05:26:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1MTc1Nw==", "url": "https://github.com/vmware/singleton/pull/475#discussion_r413651757", "bodyText": "why method return struct\uff0cnot return the struct object point", "author": "tigershi", "createdAt": "2020-04-23T09:16:12Z", "path": "bundle_dao.go", "diffHunk": "@@ -66,8 +84,8 @@ func (d *bundleDAO) getLocales() ([]string, error) {\n \treturn lSlice, nil\r\n }\r\n \r\n-func (d *bundleDAO) getComponentMessages(locale, component string) (ComponentMsgs, error) {\r\n-\tcompDirPath := filepath.Join(d.cfg.LocalBundles, component)\r\n+func (d *bundleDAO) GetComponentMessages(name, version, locale, component string) (ComponentMsgs, error) {\r", "originalCommit": "6c29d666e9e7f5a1d80cc210ce72cbe65b534272", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1NDQyNQ==", "url": "https://github.com/vmware/singleton/pull/475#discussion_r413654425", "bodyText": "ComponentMsgs is an interface storing a pointer. So it returns a pointer in fact.", "author": "Xiaochao8", "createdAt": "2020-04-23T09:20:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1MTc1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY3NjkzNg==", "url": "https://github.com/vmware/singleton/pull/475#discussion_r413676936", "bodyText": "Ok, I have found it", "author": "tigershi", "createdAt": "2020-04-23T09:52:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1MTc1Nw=="}], "type": "inlineReview"}, {"oid": "1f1f7e18da8a4c5cb70ffb7f47fd6ba948cc84c2", "url": "https://github.com/vmware/singleton/commit/1f1f7e18da8a4c5cb70ffb7f47fd6ba948cc84c2", "message": "Merge branch 'g11n-go-client' into cache-improve", "committedDate": "2020-04-23T09:20:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY3NjA3NA==", "url": "https://github.com/vmware/singleton/pull/475#discussion_r413676074", "bodyText": "How about change the name Translation to TranslationReader", "author": "tigershi", "createdAt": "2020-04-23T09:51:20Z", "path": "translation_interface.go", "diffHunk": "@@ -0,0 +1,21 @@\n+/*\r\n+ * Copyright 2020 VMware, Inc.\r\n+ * SPDX-License-Identifier: EPL-2.0\r\n+ */\r\n+\r\n+package sgtn\r\n+\r\n+// Translation interface of translation\r\n+type Translation interface {\r", "originalCommit": "1f1f7e18da8a4c5cb70ffb7f47fd6ba948cc84c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}