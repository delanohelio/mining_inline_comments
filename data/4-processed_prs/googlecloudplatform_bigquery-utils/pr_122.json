{"pr_number": 122, "pr_title": "SQL Extraction: vscode show progress", "pr_createdAt": "2020-07-28T23:03:04Z", "pr_url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/122", "timeline": [{"oid": "7eae64cb684fea42e0e0a6397c05ee9c8d53e7db", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/7eae64cb684fea42e0e0a6397c05ee9c8d53e7db", "message": "SQL Extraction: vscode show progress", "committedDate": "2020-07-28T22:54:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzEyNzU1Mg==", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/122#discussion_r463127552", "bodyText": "Seems easier to handle multiple '\\n' by something like this:\nif (index >= 0) {\n  var lines = errMsg.split('\\n');\n\n  // assign last line to errMsg\n  errMsg = lines[lines.length - 1];\n\n  // display other lines\n  for (var i = 0; i < line.length - 1; ++i)  {\n    progress.report({\n              message: line[i],\n              increment: isNaN(percent) ? undefined : percent,\n     });\n  }\n}", "author": "feiling", "createdAt": "2020-07-30T16:38:36Z", "path": "tools/vscode_sql_extraction/src/sql_extraction_runner.ts", "diffHunk": "@@ -54,7 +55,26 @@ export class SqlExtractionRunner {\n       process.stdout!.on('data', data => {\n         json += data;\n       });\n-      // todo: track progress\n+      process.stderr!.on('data', data => {\n+        errMsg += data;\n+        let index = errMsg.indexOf('\\n');\n+        while (index >= 0) {", "originalCommit": "7eae64cb684fea42e0e0a6397c05ee9c8d53e7db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4NjM4Ng==", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/122#discussion_r463186386", "bodyText": "Great suggestion, thanks!", "author": "creativitRy", "createdAt": "2020-07-30T18:21:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzEyNzU1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzEyOTA5NA==", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/122#discussion_r463129094", "bodyText": "There might be a way to disable buffering of stderr when you start a process. If so, implement that in another pull request.", "author": "feiling", "createdAt": "2020-07-30T16:41:10Z", "path": "tools/vscode_sql_extraction/src/sql_extraction_runner.ts", "diffHunk": "@@ -41,6 +41,7 @@ export class SqlExtractionRunner {\n \n     return new Promise<Query[]>((resolve, reject) => {\n       let json = '';\n+      let errMsg = '';\n       const process = execFile(this.execPath, args)", "originalCommit": "7eae64cb684fea42e0e0a6397c05ee9c8d53e7db", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE4NzE3NQ==", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/122#discussion_r463187175", "bodyText": "Hmm yeah I'll look into it.", "author": "creativitRy", "createdAt": "2020-07-30T18:22:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzEyOTA5NA=="}], "type": "inlineReview"}, {"oid": "9621fcc7b9ff328d52e5cb9e73621f7f3b3672ad", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/9621fcc7b9ff328d52e5cb9e73621f7f3b3672ad", "message": "Simplify by using split instead of indexof", "committedDate": "2020-07-30T19:43:54Z", "type": "commit"}, {"oid": "7b352ad74daf26087cd7b66bd2ad9d994663df34", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/7b352ad74daf26087cd7b66bd2ad9d994663df34", "message": "Merge branch 'master' into master", "committedDate": "2020-07-30T19:44:43Z", "type": "commit"}, {"oid": "27f22bde57af8bef4ce2719a5a58da5499f4c5d6", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/27f22bde57af8bef4ce2719a5a58da5499f4c5d6", "message": "Merge branch 'master' into master", "committedDate": "2020-07-30T19:57:49Z", "type": "commit"}, {"oid": "ac728d2efef3554628274f5d9fdfb44068096c45", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/ac728d2efef3554628274f5d9fdfb44068096c45", "message": "Fixed progress needing to be a relative increment", "committedDate": "2020-07-30T22:18:48Z", "type": "commit"}, {"oid": "1656231b2f11ce2c780f47ef3971f178c9ab4d9d", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/1656231b2f11ce2c780f47ef3971f178c9ab4d9d", "message": "Merge branch 'master' into master", "committedDate": "2020-07-31T16:34:03Z", "type": "commit"}]}