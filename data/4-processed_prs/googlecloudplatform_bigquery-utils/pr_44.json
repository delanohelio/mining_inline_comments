{"pr_number": 44, "pr_title": "Add Redshift SPLIT_PART function", "pr_createdAt": "2020-03-13T09:04:09Z", "pr_url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/44", "timeline": [{"oid": "b135f19c4396e711c3726ad7c64a08e9a8cf4a6c", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/b135f19c4396e711c3726ad7c64a08e9a8cf4a6c", "message": "add rs.split_part", "committedDate": "2020-03-13T08:52:07Z", "type": "commit"}, {"oid": "75ac769e4bc07933567b11ef429f2694e5363e1b", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/75ac769e4bc07933567b11ef429f2694e5363e1b", "message": "add rs.split_part readme", "committedDate": "2020-03-13T09:02:33Z", "type": "commit"}, {"oid": "8a9a5f76ed142da0cda6f9446f36d3f44796f89d", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/8a9a5f76ed142da0cda6f9446f36d3f44796f89d", "message": "modified udfs/migration/redshift/README.md", "committedDate": "2020-03-13T09:08:50Z", "type": "commit"}, {"oid": "1579aa9312c742fd2a9b51f3ec29d7f561d57d98", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/1579aa9312c742fd2a9b51f3ec29d7f561d57d98", "message": "modified udfs/migration/redshift/README.md", "committedDate": "2020-03-13T09:20:30Z", "type": "commit"}, {"oid": "38d45649e855749d8971cca1e023f7637f2e9a68", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/38d45649e855749d8971cca1e023f7637f2e9a68", "message": "modified udfs/migration/redshift/README.md", "committedDate": "2020-03-13T09:22:02Z", "type": "commit"}, {"oid": "d40ddabbfc1200cbedfc9b929398af338f92228b", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/d40ddabbfc1200cbedfc9b929398af338f92228b", "message": "modified udfs/migration/redshift/README.md", "committedDate": "2020-03-13T09:22:41Z", "type": "commit"}, {"oid": "aa7bebfad9991028929c368b0f01e8ff0d5640e8", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/aa7bebfad9991028929c368b0f01e8ff0d5640e8", "message": "Corresponds to exception of \"part\" arg", "committedDate": "2020-03-13T17:44:45Z", "type": "commit"}, {"oid": "935f246fd4ab2899116507cccc943d036c2991d4", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/935f246fd4ab2899116507cccc943d036c2991d4", "message": "modified split_part.spl", "committedDate": "2020-03-13T17:56:16Z", "type": "commit"}, {"oid": "b5283ce4afc594d40b1cd6f6fdb7d9180cfe32a9", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/b5283ce4afc594d40b1cd6f6fdb7d9180cfe32a9", "message": "modified error message", "committedDate": "2020-03-13T18:15:49Z", "type": "commit"}, {"oid": "b1c860fd8e02a779afbce28157db1187a27114dd", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/b1c860fd8e02a779afbce28157db1187a27114dd", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-04-08T03:10:55Z", "type": "commit"}, {"oid": "b5e3b46af3c0332bc946b57efc3f2b69b47da3d4", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/b5e3b46af3c0332bc946b57efc3f2b69b47da3d4", "message": "modified test_cases", "committedDate": "2020-04-08T03:22:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUxODk2Ng==", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/44#discussion_r405518966", "bodyText": "Change \"OFFSET(part - 1)\" to \"ORDINAL(part)\"", "author": "danieldeleo", "createdAt": "2020-04-08T13:20:42Z", "path": "udfs/migration/redshift/split_part.sql", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+CREATE OR REPLACE FUNCTION rs.split_part(\n+  string STRING,\n+  delimiter STRING,\n+  part INT64)\n+AS (\n+  CASE\n+    WHEN part < 1 THEN ERROR('The part argument must be an integer greater than 1!')\n+    WHEN ARRAY_LENGTH(SPLIT(string, delimiter)) < part THEN \"\"\n+    ELSE SPLIT(string, delimiter)[OFFSET(part - 1)]", "originalCommit": "b5e3b46af3c0332bc946b57efc3f2b69b47da3d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUyMDQ5Ng==", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/44#discussion_r405520496", "bodyText": "'The part argument must be an integer greater than 0'", "author": "danieldeleo", "createdAt": "2020-04-08T13:22:53Z", "path": "udfs/migration/redshift/split_part.sql", "diffHunk": "@@ -0,0 +1,27 @@\n+/*\n+ * Copyright 2019 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+CREATE OR REPLACE FUNCTION rs.split_part(\n+  string STRING,\n+  delimiter STRING,\n+  part INT64)\n+AS (\n+  CASE\n+    WHEN part < 1 THEN ERROR('The part argument must be an integer greater than 1!')", "originalCommit": "b5e3b46af3c0332bc946b57efc3f2b69b47da3d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0a5571876066130f6b7d2c2959e5a44118d93ab4", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/0a5571876066130f6b7d2c2959e5a44118d93ab4", "message": "modified sql", "committedDate": "2020-04-10T01:15:52Z", "type": "commit"}]}