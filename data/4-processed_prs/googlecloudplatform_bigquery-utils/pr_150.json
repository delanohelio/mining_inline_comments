{"pr_number": 150, "pr_title": "ZetaSQL Helper: Init the project", "pr_createdAt": "2020-08-13T19:55:52Z", "pr_url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/150", "timeline": [{"oid": "773fb33b21d3051f62de3315fb2232c2532fd395", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/773fb33b21d3051f62de3315fb2232c2532fd395", "message": "Init the ZetaSQL Helper Project: A C++ gRPC server to provide helper functions for query fixers.", "committedDate": "2020-08-13T19:52:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI0OTY5Mg==", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/150#discussion_r471249692", "bodyText": "can we run on localhost?", "author": "kikkyo", "createdAt": "2020-08-17T06:07:42Z", "path": "tools/zetasql_helper/zetasql_helper/local_service/run_server.cc", "diffHunk": "@@ -0,0 +1,37 @@\n+#include <iostream>\n+\n+#include <grpcpp/grpcpp.h>\n+#include <grpcpp/health_check_service_interface.h>\n+#include <grpcpp/ext/proto_server_reflection_plugin.h>\n+\n+#include \"zetasql_helper/local_service/local_service_grpc.h\"\n+\n+\n+using bigquery::utils::zetasql_helper::local_service::ZetaSqlHelperLocalServiceGrpcImpl;\n+\n+\n+void RunServer(const std::string &server_address) {\n+    ZetaSqlHelperLocalServiceGrpcImpl service;\n+\n+    grpc::EnableDefaultHealthCheckService(true);\n+    grpc::reflection::InitProtoReflectionServerBuilderPlugin();\n+    grpc::ServerBuilder builder;\n+    // Listen on the given address without any authentication mechanism.\n+    builder.AddListeningPort(server_address, grpc::InsecureServerCredentials());\n+    // Register \"service\" as the instance through which we'll communicate with\n+    // clients. In this case it corresponds to an *synchronous* service.\n+    builder.RegisterService(&service);\n+    // Finally assemble the server.\n+    std::unique_ptr<grpc::Server> server(builder.BuildAndStart());\n+    std::cout << \"Server listening on \" << server_address << std::endl;\n+\n+    // Wait for the server to shutdown. Note that some other thread must be\n+    // responsible for shutting down the server for this call to ever return.\n+    server->Wait();\n+}\n+\n+\n+int main() {\n+    RunServer(\"0.0.0.0:50051\");", "originalCommit": "773fb33b21d3051f62de3315fb2232c2532fd395", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI1MDA3MA==", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/150#discussion_r471250070", "bodyText": "These are just dummy methods right?", "author": "kikkyo", "createdAt": "2020-08-17T06:08:47Z", "path": "tools/zetasql_helper/zetasql_helper/local_service/local_service_grpc.h", "diffHunk": "@@ -0,0 +1,19 @@\n+#ifndef ZETASQL_HELPER_LOCAL_SERVICE_LOCAL_SERVICE_GRPC_H_\n+#define ZETASQL_HELPER_LOCAL_SERVICE_LOCAL_SERVICE_GRPC_H_\n+\n+#include \"zetasql_helper/local_service/local_service.grpc.pb.h\"\n+#include \"zetasql_helper/local_service/local_service.pb.h\"\n+\n+namespace bigquery::utils::zetasql_helper::local_service {\n+\n+    // Implementation of ZetaSql Helper LocalService Grpc service.\n+    class ZetaSqlHelperLocalServiceGrpcImpl : public ZetaSqlHelperLocalService::Service {\n+    public:\n+\n+        grpc::Status Hello(grpc::ServerContext *context, const HelloRequest *request, HelloResponse *response) override;", "originalCommit": "773fb33b21d3051f62de3315fb2232c2532fd395", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTc0NDQ3NQ==", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/pull/150#discussion_r471744475", "bodyText": "Right! They will be removed or changed to a health check in future.", "author": "mingen-pan", "createdAt": "2020-08-17T20:02:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI1MDA3MA=="}], "type": "inlineReview"}, {"oid": "fde0aa2dda4dde63c6647256a4e555cca1095827", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/fde0aa2dda4dde63c6647256a4e555cca1095827", "message": "reformat in Google C++ style", "committedDate": "2020-08-18T18:58:01Z", "type": "commit"}, {"oid": "86d368aca55bf53223dd4c5c7bc3da9c1beae5c9", "url": "https://github.com/GoogleCloudPlatform/bigquery-utils/commit/86d368aca55bf53223dd4c5c7bc3da9c1beae5c9", "message": "Merge branch 'master' into init_zetasql_helper", "committedDate": "2020-08-18T18:58:44Z", "type": "commit"}]}