{"pr_number": 8576, "pr_title": "Fix problem with deprecation of StartupActionFactory", "pr_createdAt": "2020-05-24T01:27:53Z", "pr_url": "https://github.com/JMRI/JMRI/pull/8576", "timeline": [{"oid": "9ec7555d9ba6c87c571871f2db05409132bc67df", "url": "https://github.com/JMRI/JMRI/commit/9ec7555d9ba6c87c571871f2db05409132bc67df", "message": "Fix problem with deprecation of StartupActionFactory\n\nA class that extends apps.startup.AbstractStartupActionFactory wasn't able to use the service provider apps.startup.StartupActionFactory.", "committedDate": "2020-05-24T00:35:44Z", "type": "commit"}, {"oid": "a4fe956b65c4bfa6eefa0bfe5f97353909776415", "url": "https://github.com/JMRI/JMRI/commit/a4fe956b65c4bfa6eefa0bfe5f97353909776415", "message": "Add \"String\" to the bundle for StartupActionFactoryScaffold", "committedDate": "2020-05-24T01:02:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU5MDkyMg==", "url": "https://github.com/JMRI/JMRI/pull/8576#discussion_r429590922", "bodyText": "You can write your test without polluting the JMRI sources to do; please remove this.", "author": "rhwood", "createdAt": "2020-05-24T01:34:33Z", "path": "java/src/apps/startup/Bundle.properties", "diffHunk": "@@ -60,3 +60,6 @@ ScriptButtonModel.ScriptNotFound=Cannot create button for script {0}; script not\n TriggerRouteModel.RouteNotDefined=Unable to set route \"{0}\". Route not defined.\n #Error thrown when startup pause thread is interrupted.\n StartupPauseModel.Interrupted={0} second startup pause interrupted early.\n+\n+#Remove this string when the class StartupActionFactoryScaffold is removed\n+String  = String", "originalCommit": "a4fe956b65c4bfa6eefa0bfe5f97353909776415", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU5MTk1Nw==", "url": "https://github.com/JMRI/JMRI/pull/8576#discussion_r429591957", "bodyText": "Fixed. Thanks.", "author": "danielb987", "createdAt": "2020-05-24T02:00:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU5MDkyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU5MDk5MQ==", "url": "https://github.com/JMRI/JMRI/pull/8576#discussion_r429590991", "bodyText": "You can write your test without polluting the JMRI sources to do; please return an empty or untranslated String.", "author": "rhwood", "createdAt": "2020-05-24T01:36:16Z", "path": "java/test/apps/startup/StartupActionFactoryScaffold.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package apps.startup;\n+\n+import java.util.Locale;\n+import org.openide.util.lookup.ServiceProvider;\n+\n+/**\n+ * The purpose of this class is to test that a class that extends\n+ * apps.startup.AbstractStartupActionFactory can use the service\n+ * provider apps.startup.StartupActionFactory.\n+ * \n+ * This class will be removed when apps.startup.StartupActionFactory\n+ * and apps.startup.AbstractStartupActionFactory is removed.\n+ * \n+ * Important:\n+ * When this class is removed, the string \"String\" in\n+ * apps.startup.Bundle.properties should be removed. That string is needed\n+ * for the AbstractActionModelTest test.\n+ * \n+ * @author Daniel Bergqvist Copyright (C) 2020\n+ */\n+@SuppressWarnings(\"deprecation\")\n+@ServiceProvider(service = StartupActionFactory.class)\n+public class StartupActionFactoryScaffold extends AbstractStartupActionFactory {\n+\n+    @Override\n+    public String getTitle(Class<?> clazz, Locale locale) throws IllegalArgumentException {\n+        if (!clazz.equals(String.class)) {\n+            throw new IllegalArgumentException();\n+        }\n+        return Bundle.getMessage(locale, \"String\"); // NOI18N", "originalCommit": "a4fe956b65c4bfa6eefa0bfe5f97353909776415", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU5MTk2MA==", "url": "https://github.com/JMRI/JMRI/pull/8576#discussion_r429591960", "bodyText": "Fixed. Thanks.", "author": "danielb987", "createdAt": "2020-05-24T02:00:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU5MDk5MQ=="}], "type": "inlineReview"}, {"oid": "f58a8d7b1cf703098017085faa382efc54aa4684", "url": "https://github.com/JMRI/JMRI/commit/f58a8d7b1cf703098017085faa382efc54aa4684", "message": "Remove unneeded I18N", "committedDate": "2020-05-24T02:00:03Z", "type": "commit"}]}