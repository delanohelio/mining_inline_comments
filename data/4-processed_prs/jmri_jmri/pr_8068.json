{"pr_number": 8068, "pr_title": "Fix Javadoc build under Java 11", "pr_createdAt": "2020-02-03T20:52:24Z", "pr_url": "https://github.com/JMRI/JMRI/pull/8068", "timeline": [{"oid": "a7c8bcedebd468c3700a593c76ad50d465f61565", "url": "https://github.com/JMRI/JMRI/commit/a7c8bcedebd468c3700a593c76ad50d465f61565", "message": "for formatting build.xml", "committedDate": "2020-02-03T20:49:53Z", "type": "commit"}, {"oid": "278305a4aad9a980a5bdda790865e2f248effdcb", "url": "https://github.com/JMRI/JMRI/commit/278305a4aad9a980a5bdda790865e2f248effdcb", "message": "fix hrefs for Java 11 doclet; minor clean up", "committedDate": "2020-02-03T20:51:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxNzMxNA==", "url": "https://github.com/JMRI/JMRI/pull/8068#discussion_r375317314", "bodyText": "This needs to remain as an offline reference as the processing of the javadoc-uml target doesn't cope with the way Google Tag Manager code is embedded in items hosted at javadoc.io. See https://github.com/JMRI/JMRI/pull/8068/files#diff-2cccd7bf48b7a9cc113ff564acd802a8L2041 for (deleted) reasoning.", "author": "mattharris", "createdAt": "2020-02-05T15:16:33Z", "path": "build.xml", "diffHunk": "@@ -2034,27 +2061,36 @@\n                        <br><a href=\"http://jmri.org/Copyright.html\">Additional information on copyright, trademarks and licenses is linked here.</a>\n                 ]]>\n             </bottom>\n+\n+            <!-- <link href=\"http://java.sun.com/products/javacomm/reference/api/\"/> redirected to next line -->\n+            <link href=\"https://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/\" />\n+                        \n+            <!-- <link href=\"https://static.javadoc.io/com.fasterxml.jackson.core/jackson-databind/2.9.8/\"/>  redirected to next line -->\n+            <link href=\"https://www.javadoc.io/doc/com.fasterxml.jackson.core/jackson-databind/2.9.8/\" />", "originalCommit": "278305a4aad9a980a5bdda790865e2f248effdcb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxODE0MQ==", "url": "https://github.com/JMRI/JMRI/pull/8068#discussion_r375318141", "bodyText": "With this as-is, the Generate Website job on Jenkins fails.", "author": "mattharris", "createdAt": "2020-02-05T15:17:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxNzMxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMzMDUyMA==", "url": "https://github.com/JMRI/JMRI/pull/8068#discussion_r375330520", "bodyText": "Not sure what's meant by \"offline reference\" here.  The only change was to the URL, not the structure of the link element.  The new URL was taken from the message when running Javadoc under Java 11, which says that it was a redirect.", "author": "bobjacobsen", "createdAt": "2020-02-05T15:36:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxNzMxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM1NTIyOA==", "url": "https://github.com/JMRI/JMRI/pull/8068#discussion_r375355228", "bodyText": "The issue is that for javadoc-uml to process, we need to set any javadoc.io hosted documents as though they were offline. This is due to them injecting some Google Tag Manager code in their published JavaDoc pages which the javadoc-uml target attempts to parse (when not marked as being offline) thereby dumping. Bit of a dirty hack, but it gets that target to build. Other javadoc targets are not affected.", "author": "mattharris", "createdAt": "2020-02-05T16:13:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxNzMxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM1NTg1Nw==", "url": "https://github.com/JMRI/JMRI/pull/8068#discussion_r375355857", "bodyText": "I'll work up a PR later to illustrate what I mean.", "author": "mattharris", "createdAt": "2020-02-05T16:14:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxNzMxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTUxMjIyOA==", "url": "https://github.com/JMRI/JMRI/pull/8068#discussion_r375512228", "bodyText": "See #8078 for possible solution", "author": "mattharris", "createdAt": "2020-02-05T21:16:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxNzMxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMxODIxOA==", "url": "https://github.com/JMRI/JMRI/pull/8068#discussion_r375318218", "bodyText": "Similar issue to above.", "author": "mattharris", "createdAt": "2020-02-05T15:18:01Z", "path": "build.xml", "diffHunk": "@@ -2034,27 +2061,36 @@\n                        <br><a href=\"http://jmri.org/Copyright.html\">Additional information on copyright, trademarks and licenses is linked here.</a>\n                 ]]>\n             </bottom>\n+\n+            <!-- <link href=\"http://java.sun.com/products/javacomm/reference/api/\"/> redirected to next line -->\n+            <link href=\"https://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/\" />\n+                        \n+            <!-- <link href=\"https://static.javadoc.io/com.fasterxml.jackson.core/jackson-databind/2.9.8/\"/>  redirected to next line -->\n+            <link href=\"https://www.javadoc.io/doc/com.fasterxml.jackson.core/jackson-databind/2.9.8/\" />\n+                        \n+            <!-- <link href=\"http://download.java.net/media/java3d/javadoc/1.3.2/\"/>  redirected to next line -->\n+            <link href=\"https://download.java.net/media/java3d/javadoc/1.3.2/\" />\n+            \n+            <!-- <link href=\"https://static.javadoc.io/org.openlcb/openlcb/0.7.23/\"/>  redirected to next line -->\n+            <link href=\"https://www.javadoc.io/doc/org.openlcb/openlcb/0.7.23/\" />", "originalCommit": "278305a4aad9a980a5bdda790865e2f248effdcb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}