{"pr_number": 8529, "pr_title": "Throttle Max. Functions", "pr_createdAt": "2020-05-14T15:23:35Z", "pr_url": "https://github.com/JMRI/JMRI/pull/8529", "timeline": [{"oid": "5adf9e3028c5a4e9804f39c1e3e95f0710ffe360", "url": "https://github.com/JMRI/JMRI/commit/5adf9e3028c5a4e9804f39c1e3e95f0710ffe360", "message": "Update Throttle.java\n\nRemove fixed length function arrays recently added.\nAdd static function string generator methods.\nAdd getMaxFunctions() method to interface.", "committedDate": "2020-05-14T13:04:23Z", "type": "commit"}, {"oid": "084161dafcb07c8f0bb32153e94512854aaac7aa", "url": "https://github.com/JMRI/JMRI/commit/084161dafcb07c8f0bb32153e94512854aaac7aa", "message": "test function string numbers", "committedDate": "2020-05-14T13:04:48Z", "type": "commit"}, {"oid": "f6e6474fed96c23a6e8a3944aab783af55af0f70", "url": "https://github.com/JMRI/JMRI/commit/f6e6474fed96c23a6e8a3944aab783af55af0f70", "message": "Update AbstractThrottle.java\n\nAdd new constructor to start Throttle with specific number of functions.\ngetMaxFunctions() int method.\nMove from fixed length array values to static method string values.", "committedDate": "2020-05-14T13:15:56Z", "type": "commit"}, {"oid": "2a41c5d4d203363cd4c326033e94132aba10ba85", "url": "https://github.com/JMRI/JMRI/commit/2a41c5d4d203363cd4c326033e94132aba10ba85", "message": "update ecos throttle, add tests for max value.", "committedDate": "2020-05-14T13:16:40Z", "type": "commit"}, {"oid": "0635b3507f9b4ab6c4ced1976cde4cd4418e75e1", "url": "https://github.com/JMRI/JMRI/commit/0635b3507f9b4ab6c4ced1976cde4cd4418e75e1", "message": "remove fixed length string array", "committedDate": "2020-05-14T13:19:56Z", "type": "commit"}, {"oid": "f841ce22a26f1fa72258080b4afba0f1f250a2d8", "url": "https://github.com/JMRI/JMRI/commit/f841ce22a26f1fa72258080b4afba0f1f250a2d8", "message": "Function Button / Function Button Editor\n\nFunctionButton holds max function value so can be passed to function button editor.\nFunctionButtonEditor Function ID max value set by throttle, not fixed.\nUpdate error handling bundles", "committedDate": "2020-05-14T13:23:44Z", "type": "commit"}, {"oid": "196b77bbd7634938b969cae9f71b1be9449786d9", "url": "https://github.com/JMRI/JMRI/commit/196b77bbd7634938b969cae9f71b1be9449786d9", "message": "Update FunctionPanel.java\n\nSets max function value on buttons on throttle update.\nFixed newly spotted bug on changelistener updating functions with correct function index, not array index.", "committedDate": "2020-05-14T13:25:40Z", "type": "commit"}, {"oid": "651518ac8cb7a4c7fa405804196326468076de8e", "url": "https://github.com/JMRI/JMRI/commit/651518ac8cb7a4c7fa405804196326468076de8e", "message": "update javadoc", "committedDate": "2020-05-14T14:31:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM3MTc1MQ==", "url": "https://github.com/JMRI/JMRI/pull/8529#discussion_r425371751", "bodyText": "I find the name MaxFunction confusing.  The first time I read this I thought it should be 28---the maximum function number most throttles support.  Perhaps the name should refer to the number of functions: numFunction or similar.", "author": "jszinger", "createdAt": "2020-05-14T19:13:47Z", "path": "java/src/jmri/jmrit/throttle/FunctionButton.java", "diffHunk": "@@ -572,6 +572,24 @@ public boolean isImageOK() {\n     public boolean isSelectedImageOK() {\n         return isSelectedImageOK;\n     }\n+    \n+    private int _maxFunc;\n+    \n+    /** \n+     * Set maximum function number hardware is capable of.\n+     * @param maxfunc normally 29, 0-28.\n+     */\n+    public void setMaxFunction( int maxfunc) {\n+        _maxFunc = maxfunc;\n+    }\n+    \n+    /**\n+     * Get maximum function number hardware is capable of.\n+     * @return maximum functions, normally 29, i.e. 0-28.\n+     */\n+    public int getMaxFunction() {\n+        return _maxFunc;\n+    }", "originalCommit": "f841ce22a26f1fa72258080b4afba0f1f250a2d8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQyODMxNA==", "url": "https://github.com/JMRI/JMRI/pull/8529#discussion_r425428314", "bodyText": "@jszinger I find the name MaxFunction confusing. The first time I read this I thought it should be 28---the maximum function number most throttles support.\n\nI agree. I'd say MaxFunctionNum This brings it into line with work I've already done in RosterEntry.\n\nPerhaps the name should refer to the number of functions: numFunction or similar.\n\nI think we should avoid a count-oriented variable:\n\nFor throttles, valid Functions are F0, F1 etc.\nIn Decoder definitions, numFns was defined to include F0(f), F0(r), F1 etc. in the Function Map. Then manufacturers started providing F0(f), F0(r), F1(f), F1(r) etc. and the concept of count became confusing.\n\nLet's avoid similar confusion with throttles.", "author": "dheap", "createdAt": "2020-05-14T21:02:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM3MTc1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUyMTgwMQ==", "url": "https://github.com/JMRI/JMRI/pull/8529#discussion_r425521801", "bodyText": "Thanks for spotting, function name and javadoc comment updated.", "author": "icklesteve", "createdAt": "2020-05-15T01:48:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM3MTc1MQ=="}], "type": "inlineReview"}, {"oid": "7bd1b5bab8d2c36a9a1df65ef6ca2b1072a24ce0", "url": "https://github.com/JMRI/JMRI/commit/7bd1b5bab8d2c36a9a1df65ef6ca2b1072a24ce0", "message": "update button method names - setMaxFunctions , getMaxFunctions", "committedDate": "2020-05-15T01:40:07Z", "type": "commit"}, {"oid": "64921dcf093bf806149895cdf458039f73f0d25c", "url": "https://github.com/JMRI/JMRI/commit/64921dcf093bf806149895cdf458039f73f0d25c", "message": "remove MaxFunction references\n\nremove getMaxFunctions\nadd getFunctions, getFunctionsMomentary boolean[]\nadd SetThrottle / GetThrottle to FunctionButton", "committedDate": "2020-05-20T18:22:46Z", "type": "commit"}]}