{"pr_number": 7919, "pr_title": "XML Schema enforces parseable system names", "pr_createdAt": "2020-01-10T15:58:51Z", "pr_url": "https://github.com/JMRI/JMRI/pull/7919", "timeline": [{"oid": "4f04c390974b0652fa3380f481fd4196a325832d", "url": "https://github.com/JMRI/JMRI/commit/4f04c390974b0652fa3380f481fd4196a325832d", "message": "allow different layout-config contents, i.e. writing old vs new schema", "committedDate": "2019-12-05T14:07:14Z", "type": "commit"}, {"oid": "85760f8b45c2efa1308469da0689187cce45972b", "url": "https://github.com/JMRI/JMRI/commit/85760f8b45c2efa1308469da0689187cce45972b", "message": "create 4.19.1 schema and make it new output; turnouts updated to check", "committedDate": "2019-12-05T14:10:13Z", "type": "commit"}, {"oid": "8872786bf1ba095bba8865eeedcc3ee5062c89d8", "url": "https://github.com/JMRI/JMRI/commit/8872786bf1ba095bba8865eeedcc3ee5062c89d8", "message": "Merge branch 'development' into parse-system-names", "committedDate": "2020-01-02T18:59:29Z", "type": "commit"}, {"oid": "a1d2ea6557469bf24618b8d8ff09b6ae9f1642b9", "url": "https://github.com/JMRI/JMRI/commit/a1d2ea6557469bf24618b8d8ff09b6ae9f1642b9", "message": "new turnout schema", "committedDate": "2020-01-08T20:30:14Z", "type": "commit"}, {"oid": "e547651f4eb92e77064c17f16b375d34962fe728", "url": "https://github.com/JMRI/JMRI/commit/e547651f4eb92e77064c17f16b375d34962fe728", "message": "validate and test light, sensor", "committedDate": "2020-01-08T21:29:19Z", "type": "commit"}, {"oid": "ec83b9eb65d6748dcff8ddf8e2b6976559b135bf", "url": "https://github.com/JMRI/JMRI/commit/ec83b9eb65d6748dcff8ddf8e2b6976559b135bf", "message": "Merge branch 'master' into parse-system-names", "committedDate": "2020-01-08T21:33:56Z", "type": "commit"}, {"oid": "52a3c2af5ab331d7b01dac8762ab9af3b8cb4819", "url": "https://github.com/JMRI/JMRI/commit/52a3c2af5ab331d7b01dac8762ab9af3b8cb4819", "message": "fix mistaken rename", "committedDate": "2020-01-08T21:38:28Z", "type": "commit"}, {"oid": "1b9c32ce006bb142920e225614328faa8730e744", "url": "https://github.com/JMRI/JMRI/commit/1b9c32ce006bb142920e225614328faa8730e744", "message": "fix for new ROute IO names", "committedDate": "2020-01-10T19:37:32Z", "type": "commit"}, {"oid": "b42c5401c0d03387f447e003b6ddb8f4418ccff3", "url": "https://github.com/JMRI/JMRI/commit/b42c5401c0d03387f447e003b6ddb8f4418ccff3", "message": "Merge branch 'master' into parse-system-names", "committedDate": "2020-01-10T22:51:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ4MjE1NQ==", "url": "https://github.com/JMRI/JMRI/pull/7919#discussion_r365482155", "bodyText": "This line has a TAB character which makes indentation wrong.", "author": "danielb987", "createdAt": "2020-01-11T00:40:34Z", "path": "xml/schema/types/lights-4-19-2.xsd", "diffHunk": "@@ -0,0 +1,70 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<?xml-stylesheet href=\"../schema2xhtml.xsl\" type=\"text/xsl\"?>\n+\n+<!-- This schema is part of JMRI. Copyright 2009.                           -->\n+<!--                                                                        -->\n+<!-- JMRI is free software; you can redistribute it and/or modify it under  -->\n+<!-- the terms of version 2 of the GNU General Public License as published  -->\n+<!-- by the Free Software Foundation. See the \"COPYING\" file for a copy     -->\n+<!-- of this license.                                                       -->\n+<!--                                                                        -->\n+<!-- JMRI is distributed in the hope that it will be useful, but WITHOUT    -->\n+<!-- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or  -->\n+<!-- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License  -->\n+<!-- for more details.                                                      -->\n+\n+<xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n+           xmlns:xsi =\"http://www.w3.org/2001/XMLSchema-instance\"\n+           xmlns:docbook=\"http://docbook.org/ns/docbook\"\n+           xmlns:jmri=\"http://jmri.org/xml/schema/JMRIschema\"\n+           xsi:schemaLocation=\"\n+                http://jmri.org/xml/schema/JMRIschema http://jmri.org/xml/schema/JMRIschema.xsd\n+                http://docbook.org/ns/docbook http://jmri.org/xml/schema/docbook/docbook.xsd\n+            \"\n+        >\n+\n+    <xs:complexType name=\"LightManagerType\">\n+      <xs:annotation>\n+        <xs:documentation>\n+          Define the XML stucture for storing the contents of a LightManager implementation.\n+        </xs:documentation>\n+        <xs:appinfo>\n+            <jmri:usingclass configurexml=\"true\">jmri.managers.configurexml.AbstractLightManagerConfigXML</jmri:usingclass>\n+        </xs:appinfo>\n+      </xs:annotation>\n+      <xs:sequence>\n+        \n+        <xs:element name=\"light\" type=\"LightType\" minOccurs=\"0\" maxOccurs=\"unbounded\" />\n+        \n+      </xs:sequence>\n+      <xs:attribute name=\"class\" type=\"classType\" use=\"required\"/>\n+    </xs:complexType>\n+\n+\n+   <xs:complexType name=\"LightType\">\n+            <xs:sequence>\n+      <xs:element name=\"systemName\" type=\"lightSystemNameType\" minOccurs=\"1\" maxOccurs=\"1\"/>\n+      <xs:group ref=\"CommonNamedBeanContentElements\"/>\n+              <xs:element name=\"lightcontrol\" minOccurs=\"0\" maxOccurs=\"unbounded\" >\n+                <xs:complexType>\n+           \t\t  <xs:attribute name=\"controlType\" type=\"xs:string\" use=\"required\"/>", "originalCommit": "1b9c32ce006bb142920e225614328faa8730e744", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUwMTA2NQ==", "url": "https://github.com/JMRI/JMRI/pull/7919#discussion_r365501065", "bodyText": "Fixed, thanks.", "author": "bobjacobsen", "createdAt": "2020-01-11T05:25:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ4MjE1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ4MjMxMA==", "url": "https://github.com/JMRI/JMRI/pull/7919#discussion_r365482310", "bodyText": "This seems to be a copy/paste error. I guess this file should succeed, not fail?", "author": "danielb987", "createdAt": "2020-01-11T00:41:39Z", "path": "java/test/jmri/configurexml/valid/TurnoutLegacyName.xml", "diffHunk": "@@ -0,0 +1,15 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<?xml-stylesheet type=\"text/xsl\" href=\"http://www.jmri.org/xml/XSLT/panelfile.xsl\"?>\n+\n+<!-- turnout elements with a legacy name fail -->", "originalCommit": "1b9c32ce006bb142920e225614328faa8730e744", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUwMTExMg==", "url": "https://github.com/JMRI/JMRI/pull/7919#discussion_r365501112", "bodyText": "Thanks for catching that, fixed all three.", "author": "bobjacobsen", "createdAt": "2020-01-11T05:25:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ4MjMxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ4MjM5Mw==", "url": "https://github.com/JMRI/JMRI/pull/7919#discussion_r365482393", "bodyText": "This seems to be a copy/paste error. I guess this file should succeed, not fail?", "author": "danielb987", "createdAt": "2020-01-11T00:41:58Z", "path": "java/test/jmri/configurexml/valid/SensorLegacyName.xml", "diffHunk": "@@ -0,0 +1,15 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<?xml-stylesheet type=\"text/xsl\" href=\"http://www.jmri.org/xml/XSLT/panelfile.xsl\"?>\n+\n+<!-- sensor elements with a legacy name fail -->", "originalCommit": "1b9c32ce006bb142920e225614328faa8730e744", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ4MjQzMQ==", "url": "https://github.com/JMRI/JMRI/pull/7919#discussion_r365482431", "bodyText": "This seems to be a copy/paste error. I guess this file should succeed, not fail?", "author": "danielb987", "createdAt": "2020-01-11T00:42:08Z", "path": "java/test/jmri/configurexml/valid/LightLegacyName.xml", "diffHunk": "@@ -0,0 +1,15 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<?xml-stylesheet type=\"text/xsl\" href=\"http://www.jmri.org/xml/XSLT/panelfile.xsl\"?>\n+\n+<!-- sensor elements with a legacy name fail -->", "originalCommit": "1b9c32ce006bb142920e225614328faa8730e744", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cf6428dd1ab6cf06560470972b19f8f6383e1b49", "url": "https://github.com/JMRI/JMRI/commit/cf6428dd1ab6cf06560470972b19f8f6383e1b49", "message": "fix comments", "committedDate": "2020-01-11T05:24:17Z", "type": "commit"}, {"oid": "8cadee21523f269f5aa837e243fe73661128e969", "url": "https://github.com/JMRI/JMRI/commit/8cadee21523f269f5aa837e243fe73661128e969", "message": "fix comments", "committedDate": "2020-01-11T05:24:42Z", "type": "commit"}]}