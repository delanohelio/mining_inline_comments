{"pr_number": 9096, "pr_title": "Store last checkbox status in preferences", "pr_createdAt": "2020-10-22T03:26:35Z", "pr_url": "https://github.com/JMRI/JMRI/pull/9096", "timeline": [{"oid": "f2d185683496803c7a9d6e4ac9b0ca523bd32cd9", "url": "https://github.com/JMRI/JMRI/commit/f2d185683496803c7a9d6e4ac9b0ca523bd32cd9", "message": "Store last checkbox status in preferences", "committedDate": "2020-10-22T02:50:27Z", "type": "commit"}, {"oid": "361db0e7cb93484833250af90f43438ef515f2d8", "url": "https://github.com/JMRI/JMRI/commit/361db0e7cb93484833250af90f43438ef515f2d8", "message": "Call the correct method", "committedDate": "2020-10-23T01:33:44Z", "type": "commit"}, {"oid": "3c16f9e58a78e06edb3994eb46efd15874448c63", "url": "https://github.com/JMRI/JMRI/commit/3c16f9e58a78e06edb3994eb46efd15874448c63", "message": "Use correct field", "committedDate": "2020-10-23T01:42:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg3ODM4MA==", "url": "https://github.com/JMRI/JMRI/pull/9096#discussion_r511878380", "bodyText": "I don't know enough about this code to know whether it's a problem, but this uses setChangeMade(false) here and resetChangeMade(); - should those be consistent?", "author": "bobjacobsen", "createdAt": "2020-10-26T11:03:39Z", "path": "java/src/jmri/managers/JmriUserPreferencesManager.java", "diffHunk": "@@ -403,6 +406,18 @@ public void setComboBoxLastSelection(String comboBoxName, String lastValue) {\n         this.saveComboBoxLastSelections();\n     }\n \n+    @Override\n+    public boolean getCheckboxPreferenceState(String name, boolean defaultState) {\n+        return this.checkBoxLastSelection.getOrDefault(name, defaultState);\n+    }\n+\n+    @Override\n+    public void setCheckboxPreferenceState(String name, boolean state) {\n+        checkBoxLastSelection.put(name, state);\n+        setChangeMade(false);", "originalCommit": "3c16f9e58a78e06edb3994eb46efd15874448c63", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjI5MTc2NA==", "url": "https://github.com/JMRI/JMRI/pull/9096#discussion_r512291764", "bodyText": "setChangeMade() sets the dirty flag. resetChangeMade() clears the dirty flag. The argument false to setChangeMade() only tells to not fire an update.\nI have copied the code for ComboBox so they uses the same principle.", "author": "danielb987", "createdAt": "2020-10-26T21:52:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg3ODM4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg3ODc4Ng==", "url": "https://github.com/JMRI/JMRI/pull/9096#discussion_r511878786", "bodyText": "The \"It is the current development version\" line will be obsolete almost right away, so it's better to omit it.", "author": "bobjacobsen", "createdAt": "2020-10-26T11:04:29Z", "path": "xml/schema/auxiliary-configuration/checkbox-4-21-3.xsd", "diffHunk": "@@ -0,0 +1,50 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<?xml-stylesheet href=\"../../schema2xhtml.xsl\" type=\"text/xsl\"?>\n+\n+<!-- This schema is part of JMRI. Copyright 2016.                           -->\n+<!--                                                                        -->\n+<!-- JMRI is free software; you can redistribute it and/or modify it under  -->\n+<!-- the terms of version 2 of the GNU General Public License as published  -->\n+<!-- by the Free Software Foundation. See the \"COPYING\" file for a copy     -->\n+<!-- of this license.                                                       -->\n+<!--                                                                        -->\n+<!-- JMRI is distributed in the hope that it will be useful, but WITHOUT    -->\n+<!-- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or  -->\n+<!-- FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License  -->\n+<!-- for more details.                                                      -->\n+\n+\n+<xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n+           xmlns:xsi =\"http://www.w3.org/2001/XMLSchema-instance\"\n+           xmlns:docbook=\"http://docbook.org/ns/docbook\"\n+           xmlns:jmri=\"http://jmri.org/xml/schema/JMRIschema\"\n+           xsi:schemaLocation=\"\n+                http://jmri.org/xml/schema/JMRIschema http://jmri.org/xml/schema/JMRIschema.xsd\n+                http://docbook.org/ns/docbook http://jmri.org/xml/schema/docbook/docbook.xsd\n+            \"\n+>\n+    <xs:element name=\"checkBoxLastValue\">\n+        <xs:annotation>\n+            <xs:documentation>\n+                This is the schema representing checkbox last states.\n+                <p/>\n+                This version of the schema is for files created by JMRI\n+                version 4.21.3 and later.  \n+                It is the current development version.", "originalCommit": "3c16f9e58a78e06edb3994eb46efd15874448c63", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjI5MzM0Mw==", "url": "https://github.com/JMRI/JMRI/pull/9096#discussion_r512293343", "bodyText": "The sentence is removed.", "author": "danielb987", "createdAt": "2020-10-26T21:56:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTg3ODc4Ng=="}], "type": "inlineReview"}, {"oid": "f0226162ef39de5fdb793c1de2386513bafcbfa9", "url": "https://github.com/JMRI/JMRI/commit/f0226162ef39de5fdb793c1de2386513bafcbfa9", "message": "Remove part of the comment", "committedDate": "2020-10-26T21:55:03Z", "type": "commit"}]}