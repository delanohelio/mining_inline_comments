{"pr_number": 2488, "pr_title": "[Plugin] better error message for multiple schemas", "pr_createdAt": "2020-07-30T08:44:58Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2488", "timeline": [{"oid": "f8a9d3bae5f6f4abababa2dd71f0187693093def", "url": "https://github.com/apollographql/apollo-android/commit/f8a9d3bae5f6f4abababa2dd71f0187693093def", "message": "better error for multiple schemas:\n\n* do not put absolute paths\n* add a rootPackageName", "committedDate": "2020-07-30T08:42:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk0MzgwNg==", "url": "https://github.com/apollographql/apollo-android/pull/2488#discussion_r463943806", "bodyText": "Are you sure the parentFile is enough? What happens if there are multiple nested folders? It might be better to relativize to the project folder?", "author": "tasomaniac", "createdAt": "2020-08-01T09:26:47Z", "path": "apollo-gradle-plugin/src/main/kotlin/com/apollographql/apollo/gradle/internal/DefaultCompilationUnit.kt", "diffHunk": "@@ -99,11 +99,13 @@ abstract class DefaultCompilationUnit @Inject constructor(\n       }\n     }\n \n-    private fun multipleSchemaError(schemaList: List<File>): String {\n+    private fun multipleSchemaError(project: Project, schemaList: List<File>): String {\n       val services = schemaList.joinToString(\"\\n\") {\n+        val name = it.parentFile.name", "originalCommit": "f8a9d3bae5f6f4abababa2dd71f0187693093def", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg2NTEwNQ==", "url": "https://github.com/apollographql/apollo-android/pull/2488#discussion_r464865105", "bodyText": "This is mostly informative and I wanted to keep it simple for most users where I expect parentFile.name to be different accross services. Another option would just be to use placeholders?\napollo {\n  service(\"service1\") {\n    ...\n  }\n  service(\"service2\") {\n    ...\n  }\n}", "author": "martinbonnin", "createdAt": "2020-08-04T07:50:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk0MzgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk4MzAyMw==", "url": "https://github.com/apollographql/apollo-android/pull/2488#discussion_r464983023", "bodyText": "When you first did these warnings, they were really close to be something that the user can copy paste and fix their issue. Although I like that idea, it is also too much maintainance to keep that.\nThat's why maybe placeholders is a good idea. Another idea is to also link to the documentation??", "author": "tasomaniac", "createdAt": "2020-08-04T11:29:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk0MzgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk4NjI5Mg==", "url": "https://github.com/apollographql/apollo-android/pull/2488#discussion_r464986292", "bodyText": "Link to the documentation is a great idea \ud83d\udc4d . I don't think we have a page talking about multiple services yet. Let me see if I can add one quickly", "author": "martinbonnin", "createdAt": "2020-08-04T11:36:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk0MzgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MTYxMg==", "url": "https://github.com/apollographql/apollo-android/pull/2488#discussion_r464991612", "bodyText": "\ud83d\udc4dJust the page talking about service would be enough actually. Up to you.", "author": "tasomaniac", "createdAt": "2020-08-04T11:47:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk0MzgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5NTEyOQ==", "url": "https://github.com/apollographql/apollo-android/pull/2488#discussion_r464995129", "bodyText": "Ah yes, this looks enough: https://www.apollographql.com/docs/android/essentials/plugin-configuration/#apolloextension-services-and-compilationunit \ud83d\udc4d", "author": "martinbonnin", "createdAt": "2020-08-04T11:54:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk0MzgwNg=="}], "type": "inlineReview"}, {"oid": "b53b06331751827a61e921c8629eda7fe61106e8", "url": "https://github.com/apollographql/apollo-android/commit/b53b06331751827a61e921c8629eda7fe61106e8", "message": "use placeholders and redirect to the documentation", "committedDate": "2020-08-04T11:55:28Z", "type": "commit"}, {"oid": "7791a8e49f147989a9e6c3dfacf16fa95b237e00", "url": "https://github.com/apollographql/apollo-android/commit/7791a8e49f147989a9e6c3dfacf16fa95b237e00", "message": "remove unused parameters", "committedDate": "2020-08-04T11:56:54Z", "type": "commit"}]}