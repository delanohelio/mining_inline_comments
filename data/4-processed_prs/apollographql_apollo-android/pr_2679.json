{"pr_number": 2679, "pr_title": "Update ROADMAP.md", "pr_createdAt": "2020-10-20T19:45:05Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2679", "timeline": [{"oid": "f6563b90fd292f621a020939a1101dde935746f1", "url": "https://github.com/apollographql/apollo-android/commit/f6563b90fd292f621a020939a1101dde935746f1", "message": "Update ROADMAP.md", "committedDate": "2020-10-20T19:44:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTk3MDEwMg==", "url": "https://github.com/apollographql/apollo-android/pull/2679#discussion_r509970102", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - **General API grooming**: As part of the major release, remove some deprecated APIs and streamline some complex APIs such as the custom scalars ([2486](https://github.com/apollographql/apollo-android/issues/2486)) and the Android variants handling in the Gradle plugin ([2668](https://github.com/apollographql/apollo-android/pull/2668)).     \n          \n          \n            \n            - **General API grooming**: As part of the major release, remove some deprecated APIs and streamline some complex APIs such as the custom scalars ([PR #2486](https://github.com/apollographql/apollo-android/issues/2486)) and the Android variants handling in the Gradle plugin ([PR #2668](https://github.com/apollographql/apollo-android/pull/2668)).", "author": "tasomaniac", "createdAt": "2020-10-22T08:21:06Z", "path": "ROADMAP.md", "diffHunk": "@@ -4,29 +4,35 @@ This document is meant to give the community some idea of where we're going with\n \n Please open issues or comment/upvote the existing ones for items you'd like to see added here. Feedback is very welcome! We'd love to learn more about how you're using Apollo Android and what you'd like to see in the future.\n \n-This document was last updated on September 9th, 2020. For a more detailed and certainly more up-to-date view, check the project's [milestones](https://github.com/apollographql/apollo-android/milestones?direction=asc&sort=title&state=open).\n+This document was last updated on October 20th, 2020. For a more detailed and up-to-date view, you can check the project's [milestones](https://github.com/apollographql/apollo-android/milestones?direction=asc&sort=title&state=open).\n \n ## `main` branch (versions 2.x)\n \n-`main` is the stable branch. Non API-breaking improvements and bugfixes will land there. Releases are typically made every 2-3 weeks. What's coming:\n+`main` is the stable branch. Non breaking improvements and bugfixes land here. This branch is actively maintained and battle-tested. Things that are coming in 2.4.2:\n \n-- **Multi-modules support** ([#1973](https://github.com/apollographql/apollo-android/issues/1973)): Big codebase use Gradle modules for better separation of concern as well as to improve build speed. Currently, the recommendation is to put all the GraphQL queries in a common module but that scales poorly. Multi-modules support will allow defining operations in the module they are used as well as sharing GraphQL Fragments between multiple modules.  \n-    \n-- **Gradle configuration cache** ([#2524](https://github.com/apollographql/apollo-android/issues/2524)): Gradle 6.6 introduced [configuration caching](https://docs.gradle.org/current/userguide/configuration_cache.html) as an incubating feature. We want to support that to make builds faster.\n-\n-- **General bug-bashing**: We'll be dealing with any new issues and small feature requests as they come up.\n+* SDL type extensions ([#2656](https://github.com/apollographql/apollo-android/issues/2656))\n+* Custom Fragments package names ([#2667](https://github.com/apollographql/apollo-android/issues/2667))\n+* HTTP cache key bypass ([#2659](https://github.com/apollographql/apollo-android/issues/2659))\n+* Bugfixes\n \n+While working on 2.x, we found a few limitations that could not be fixed without major breaking changes so we started developping `dev-3.x` in parallel. Once `dev-3.x` reaches alpha, it will be merged into `main`\n \n ## `dev-3x` branch (versions 3.x)\n \n-`dev-3x` is the branch for the next major version of Apollo Android. Most of the changes listed below will require breaking changes and will land in `dev-3x`. The current target is to get a `3.0.0-alpha1` by the end of 2020 including:\n+`dev-3x` is the branch for the next major version of Apollo Android where new developments happen. Apollo 3.0.0 will be:\n+\n+* **Kotlin-first**, generating Kotlin models by default and exposing coroutines APIs\n+* **Modular**, making it easy to change the transport, the cache implementation or using the generated models directly. \n+* **Fast**, with optimized json parsing speed to make your UIs even more reactive\n+\n+The current target is to get a `3.0.0-alpha1` by the end of 2020. The full list of issues can be found in the [milestones](https://github.com/apollographql/apollo-android/milestones?direction=asc&sort=title&state=open). The most important ones are:\n \n-- **Fragments as interfaces** ([#1854](https://github.com/apollographql/apollo-android/issues/1854)): As of today, GraphQL fragments are generated as separate classes. While this works well, accessing fragments is verbose: `hero.fragments.humanDetails?.homePlanet`. Having fragments generated as interface will make the code more concise: `(hero as? Human)?.homePlanet`, possibly `hero.homePlanet` if the type condition is always verified.\n+- **Fragments as interfaces** ([#1854](https://github.com/apollographql/apollo-android/issues/1854)): As of today, GraphQL fragments are generated as separate classes. While this works well, accessing fragments is verbose: hero.fragments.humanDetails?.homePlanet. Having fragments generated as interfaces will make the code more concise: `hero.asHuman()?.homePlanet`, even `hero.homePlanet` if the type condition is always verified. Note that due to the massively complex nature of the changes, the Java codegen has been disabled in `dev-3.x` and will have to be mostly rewritten if needed.\n \n - **Streaming Json parser** ([#2523](https://github.com/apollographql/apollo-android/issues/2523)): Benchmarks have shown that parsing Json with Apollo Android is slower than with [Moshi](https://github.com/square/moshi). Part of the explanation is that, as of now, we parse in two steps. First from the json to a map and then from the map to the generated models. This is required with the current fragment's implementation. Reading fragment requires being able to \"rewind\" the stream to read fields that are defined multiple times. With fragments as interfaces, we could switch to a streaming parser and get some nice performance improvements.\n \n-- **Kotlin multiplatform normalized cache** ([#2222](https://github.com/apollographql/apollo-android/issues/2222)): The Kotlin multiplatform runtime is working but is still missing features compared to the JVM runtime. The normalized cache is one of them.\n+- **Kotlin multiplatform normalized cache** ([#2636](https://github.com/apollographql/apollo-android/issues/2636)): The Kotlin multiplatform runtime is working but is still missing features compared to the JVM runtime. The normalized cache is one of them.\n \n - **Improved normalized cache APIs** ([#2331](https://github.com/apollographql/apollo-android/issues/2331)): It's been historically difficult to handle cases like pagination with the current normalized cache. We have also had a lot of questions around the usage of `CacheKeyResolver` and data expiration, garbage collection. Making the normalized cache multiplatform is a good opportunity to improve these APIs. \n \n-- **General API grooming**: As part of the major release, remove some deprecated APIs and streamline some complex APIs such as the custom scalars and the Android variants handling in the Gradle plugin.     \n+- **General API grooming**: As part of the major release, remove some deprecated APIs and streamline some complex APIs such as the custom scalars ([2486](https://github.com/apollographql/apollo-android/issues/2486)) and the Android variants handling in the Gradle plugin ([2668](https://github.com/apollographql/apollo-android/pull/2668)).     ", "originalCommit": "f6563b90fd292f621a020939a1101dde935746f1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ba8d807e1c3930312b8317b3ad6d89474ae959a7", "url": "https://github.com/apollographql/apollo-android/commit/ba8d807e1c3930312b8317b3ad6d89474ae959a7", "message": "Update ROADMAP.md\n\nCo-authored-by: Said Tahsin Dane <taso.dane@deliveryhero.com>", "committedDate": "2020-10-22T08:22:54Z", "type": "commit"}]}