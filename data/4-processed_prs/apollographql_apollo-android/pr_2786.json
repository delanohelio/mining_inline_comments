{"pr_number": 2786, "pr_title": "Address fragment accessors generation", "pr_createdAt": "2020-12-02T18:11:00Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2786", "timeline": [{"oid": "ad1d567ccdf9df5614097ab53b438e4f5341c21d", "url": "https://github.com/apollographql/apollo-android/commit/ad1d567ccdf9df5614097ab53b438e4f5341c21d", "message": "Address fragment accessors generation", "committedDate": "2020-12-02T18:23:09Z", "type": "forcePushed"}, {"oid": "a3d7f175cca12e42a6ad64bbb5bfd6a27e27b014", "url": "https://github.com/apollographql/apollo-android/commit/a3d7f175cca12e42a6ad64bbb5bfd6a27e27b014", "message": "Address fragment accessors generation", "committedDate": "2020-12-02T18:51:19Z", "type": "forcePushed"}, {"oid": "4a6cfa53de377745b007a574b9042e3c62f10fc9", "url": "https://github.com/apollographql/apollo-android/commit/4a6cfa53de377745b007a574b9042e3c62f10fc9", "message": "Address fragment accessors generation", "committedDate": "2020-12-03T04:58:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTAyNDkzNg==", "url": "https://github.com/apollographql/apollo-android/pull/2786#discussion_r535024936", "bodyText": "\ud83d\udc4d I guess we don't need that ?", "author": "martinbonnin", "createdAt": "2020-12-03T09:49:41Z", "path": "apollo-compiler/src/main/kotlin/com/apollographql/apollo/compiler/backend/codegen/FragmentType.kt", "diffHunk": "@@ -71,12 +83,5 @@ internal fun CodeGenerationAst.FragmentType.implementationTypeSpec(generateAsInt\n       .toBuilder()\n       .addSuperinterface(GraphqlFragment::class)\n       .applyIf(generateAsInternal) { addModifiers(KModifier.INTERNAL) }\n-      .addType(TypeSpec.companionObjectBuilder()\n-          .addProperty(PropertySpec.builder(\"FRAGMENT_DEFINITION\", String::class)", "originalCommit": "4a6cfa53de377745b007a574b9042e3c62f10fc9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTgwMzEzNg==", "url": "https://github.com/apollographql/apollo-android/pull/2786#discussion_r535803136", "bodyText": "Yep, for named fragment default implementation we don't need graphql definition as it already declared in interface", "author": "sav007", "createdAt": "2020-12-04T03:09:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTAyNDkzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTAyODM5Mw==", "url": "https://github.com/apollographql/apollo-android/pull/2786#discussion_r535028393", "bodyText": "That sounds like a little bit too much \ud83d\ude43 . Feels like this shouldn't be generated", "author": "martinbonnin", "createdAt": "2020-12-03T09:52:44Z", "path": "apollo-compiler/src/test/graphql/com/example/fragment_in_fragment/AllStarship.kt", "diffHunk": "@@ -233,8 +229,33 @@ class AllStarship : Query<AllStarship.Data, Operation.Variables> {\n \n                         override fun marshaller(): ResponseFieldMarshaller\n                       }\n+\n+                      companion object {\n+                        fun Homeworld.planetFragment(): PlanetFragment? = this as? PlanetFragment\n+\n+                        fun Homeworld.pilotFragmentHomeworldPlanet():\n+                            PilotFragment.Homeworld.Planet? = this as?\n+                            PilotFragment.Homeworld.Planet\n+\n+                        fun Homeworld.starshipFragmentPilotConnectionEdgesNodePersonHomeworldPlanet():", "originalCommit": "4a6cfa53de377745b007a574b9042e3c62f10fc9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTgwNTgzOQ==", "url": "https://github.com/apollographql/apollo-android/pull/2786#discussion_r535805839", "bodyText": "Yeah, I guess we need to skip generating accessors for nested named fragments. Only accessors for top level fragments.", "author": "sav007", "createdAt": "2020-12-04T03:18:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTAyODM5Mw=="}], "type": "inlineReview"}, {"oid": "93a85cab39a40686d22fcb097fa8a1c6218e3aae", "url": "https://github.com/apollographql/apollo-android/commit/93a85cab39a40686d22fcb097fa8a1c6218e3aae", "message": "Address fragment accessors generation", "committedDate": "2020-12-04T03:46:13Z", "type": "commit"}, {"oid": "fe871346a09c6ba3b1e0b830b1d3179326e849df", "url": "https://github.com/apollographql/apollo-android/commit/fe871346a09c6ba3b1e0b830b1d3179326e849df", "message": "Don't generate accessors for nested named fragments", "committedDate": "2020-12-04T03:46:16Z", "type": "commit"}, {"oid": "fe871346a09c6ba3b1e0b830b1d3179326e849df", "url": "https://github.com/apollographql/apollo-android/commit/fe871346a09c6ba3b1e0b830b1d3179326e849df", "message": "Don't generate accessors for nested named fragments", "committedDate": "2020-12-04T03:46:16Z", "type": "forcePushed"}]}