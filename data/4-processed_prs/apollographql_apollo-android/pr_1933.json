{"pr_number": 1933, "pr_title": "Remove bintray plugin and upload marker to bintray", "pr_createdAt": "2020-01-24T17:15:25Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/1933", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg1MjYyNw==", "url": "https://github.com/apollographql/apollo-android/pull/1933#discussion_r370852627", "bodyText": "Wouldn't it be possible to keep the artifact id in gradle files?", "author": "tasomaniac", "createdAt": "2020-01-24T21:34:36Z", "path": "scripts/deploy.sh", "diffHunk": "@@ -32,7 +32,11 @@ if [ \"$TRAVIS_TAG\" == \"\" ]; then\n   echo \"Skipping release deployment: not a tag\"\n else\n   echo \"Deploy to bintray...\"\n-  ./gradlew bintrayUpload -Pbintray.user=\"${BINTRAY_USER}\" -Pbintray.apikey=\"${BINTRAY_API_KEY}\"\n+  ./gradlew publishDefaultPublicationToBintrayRepository -Pbintray.user=\"${BINTRAY_USER}\" -Pbintray.apikey=\"${BINTRAY_API_KEY}\"\n   echo \"Deployed to bintray!\"\n+  echo \"Deploy gradle plugin marker to bintray...\"\n+  # We override the artifact_id for the marker else it is uploaded at the same coordinates as apollo-gradle-plugin\n+  ./gradlew publishApolloGradlePluginPluginMarkerMavenPublicationToBintrayRepository -Pbintray.user=\"${BINTRAY_USER}\" -Pbintray.apikey=\"${BINTRAY_API_KEY}\" -PPOM_ARTIFACT_ID=com.apollographql.apollo.gradle.plugin", "originalCommit": "01ff32610f69b98aba72095e1c4bff93b18d910d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg1NTI4MQ==", "url": "https://github.com/apollographql/apollo-android/pull/1933#discussion_r370855281", "bodyText": "Not really, the marker is a special case since it belongs to the apollo-gradle-plugin module.\nThe problem is that the repository depends on the publication and the maven-publish plugin is designed for these things to be independent. We could also duplicate the bintray repository, that would be an option but it'll require slightly more changes", "author": "martinbonnin", "createdAt": "2020-01-24T21:42:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg1MjYyNw=="}], "type": "inlineReview"}, {"oid": "fa637b7e6ac5acfb2e55dadde3670b7ba08a6b52", "url": "https://github.com/apollographql/apollo-android/commit/fa637b7e6ac5acfb2e55dadde3670b7ba08a6b52", "message": "use `maven-publish` to deploy to bintray", "committedDate": "2020-01-25T13:19:26Z", "type": "commit"}, {"oid": "ca9117efdb28253ce4c36f242fed6d2fee27785d", "url": "https://github.com/apollographql/apollo-android/commit/ca9117efdb28253ce4c36f242fed6d2fee27785d", "message": "deploy gradle plugin marker", "committedDate": "2020-01-25T13:20:13Z", "type": "commit"}, {"oid": "39e3232234febaca4ab6d17bb4865a98c321505f", "url": "https://github.com/apollographql/apollo-android/commit/39e3232234febaca4ab6d17bb4865a98c321505f", "message": "fix publication name", "committedDate": "2020-01-25T13:20:13Z", "type": "commit"}, {"oid": "46cbca030985c49c753f1826028b3c2df1293e6d", "url": "https://github.com/apollographql/apollo-android/commit/46cbca030985c49c753f1826028b3c2df1293e6d", "message": "always use the local packages if they exist", "committedDate": "2020-01-25T13:20:13Z", "type": "commit"}, {"oid": "46cbca030985c49c753f1826028b3c2df1293e6d", "url": "https://github.com/apollographql/apollo-android/commit/46cbca030985c49c753f1826028b3c2df1293e6d", "message": "always use the local packages if they exist", "committedDate": "2020-01-25T13:20:13Z", "type": "forcePushed"}]}