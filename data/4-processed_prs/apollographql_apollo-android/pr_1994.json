{"pr_number": 1994, "pr_title": "Fix regression issue field indexes messed up for queries with fragments", "pr_createdAt": "2020-02-13T04:28:12Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/1994", "timeline": [{"oid": "39175335fca12ca30fdc6d05215ea511e60616e1", "url": "https://github.com/apollographql/apollo-android/commit/39175335fca12ca30fdc6d05215ea511e60616e1", "message": "Fix regression issue field indexes messed up for queries with fragments\n\nFix regression issue introduced after adding support fragments with directives. When query contains fragments and inline fragments at the same level, indexes used to reference GraphQL response fields (in `ResponseField[]` array) get out of order. This happens because we removed `ResponseField.forString` code generation for surrogate field `Fragments`. This fix reverts back changes that caused index to be out of order.\n\nCloses https://github.com/apollographql/apollo-android/issues/1993", "committedDate": "2020-02-13T04:27:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEzNDM5MA==", "url": "https://github.com/apollographql/apollo-android/pull/1994#discussion_r379134390", "bodyText": "Does it make sense that the same line is next to each other here?", "author": "tasomaniac", "createdAt": "2020-02-13T21:41:34Z", "path": "apollo-compiler/src/test/graphql/com/example/unique_type_name/HeroDetailQuery.kt", "diffHunk": "@@ -62,6 +62,7 @@ class HeroDetailQuery : Query<HeroDetailQuery.Data, HeroDetailQuery.Data, Operat\n \n     companion object {\n       private val RESPONSE_FIELDS: Array<ResponseField> = arrayOf(\n+          ResponseField.forString(\"__typename\", \"__typename\", null, false, null),", "originalCommit": "39175335fca12ca30fdc6d05215ea511e60616e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTIyMjU0NA==", "url": "https://github.com/apollographql/apollo-android/pull/1994#discussion_r379222544", "bodyText": "Do you mean the same line of  ResponseField.forString(\"__typename\", \"__typename\", null, false, null)?  If yes that's correct, first line used by actual field __typename and the second one is not involved in parsing response, but it needs to be there to have right field index.\nI'm thinking of making changes to remove RESPONSE_FIELDS  all together, as index based access to the response field meta looks fragile.", "author": "sav007", "createdAt": "2020-02-14T02:24:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTEzNDM5MA=="}], "type": "inlineReview"}]}