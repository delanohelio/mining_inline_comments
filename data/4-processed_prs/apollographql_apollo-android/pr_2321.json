{"pr_number": 2321, "pr_title": "[Plugin] simplify the downloadApolloSchema task", "pr_createdAt": "2020-06-01T16:41:57Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2321", "timeline": [{"oid": "8f62886634af103777ac941d8c82b0bd75709ae5", "url": "https://github.com/apollographql/apollo-android/commit/8f62886634af103777ac941d8c82b0bd75709ae5", "message": "simplify the downloadApolloSchema task", "committedDate": "2020-06-01T16:38:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDkyNg==", "url": "https://github.com/apollographql/apollo-android/pull/2321#discussion_r440000926", "bodyText": "@martinbonnin is there a particular reason why this property doesn't have the @Option annotation?", "author": "francescocervone", "createdAt": "2020-06-15T08:09:54Z", "path": "apollo-gradle-plugin/src/main/kotlin/com/apollographql/apollo/gradle/internal/ApolloDownloadSchemaTask.kt", "diffHunk": "@@ -1,36 +1,32 @@\n package com.apollographql.apollo.gradle.internal\n \n-import com.squareup.moshi.JsonWriter\n-import okhttp3.HttpUrl.Companion.toHttpUrl\n-import okhttp3.MediaType.Companion.toMediaTypeOrNull\n-import okhttp3.OkHttpClient\n-import okhttp3.Request\n-import okhttp3.RequestBody.Companion.toRequestBody\n-import okio.buffer\n-import okio.sink\n import org.gradle.api.DefaultTask\n-import org.gradle.api.provider.MapProperty\n+import org.gradle.api.provider.ListProperty\n import org.gradle.api.provider.Property\n import org.gradle.api.tasks.Input\n import org.gradle.api.tasks.Optional\n import org.gradle.api.tasks.TaskAction\n-import java.io.ByteArrayOutputStream\n-import java.util.concurrent.TimeUnit\n+import org.gradle.api.tasks.options.Option\n+import java.io.File\n \n abstract class ApolloDownloadSchemaTask : DefaultTask() {\n   @get:Input\n-  abstract val endpointUrl: Property<String>\n+  @get:Option(option = \"endpoint\", description = \"url of the GraphQL endpoint\")\n+  abstract val endpoint: Property<String>\n \n   @get:Input\n-  abstract val schemaFilePath: Property<String>\n+  @get:Optional\n+  @get:Option(option = \"schema\", description = \"path where the schema will be downloaded, relative to the current working directory\")\n+  abstract val schema: Property<String>\n \n   @get:Optional\n   @get:Input\n-  abstract val headers: MapProperty<String, String>\n+  @set:Option(option = \"header\", description = \"headers in the form 'Name: Value'\")\n+  var header = emptyList<String>() // cannot be lazy for @Option to work\n \n-  @get:Optional\n   @get:Input\n-  abstract val queryParameters: MapProperty<String, String>\n+  @get:Optional\n+  abstract val schemaRelativeToProject: Property<String>", "originalCommit": "8f62886634af103777ac941d8c82b0bd75709ae5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA4NzQ2Mg==", "url": "https://github.com/apollographql/apollo-android/pull/2321#discussion_r440087462", "bodyText": "Not really. The reasoning was that when run from the command line, most tools assume parameters to be relative the current working directory. But adding @Option here works as well. Feel free to make a pull request. Or I can do it if you think that'll be useful.", "author": "martinbonnin", "createdAt": "2020-06-15T10:42:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDExNjg0MA==", "url": "https://github.com/apollographql/apollo-android/pull/2321#discussion_r440116840", "bodyText": "I just wanted to make sure that I wasn't missing something.\nI can do it, thanks!", "author": "francescocervone", "createdAt": "2020-06-15T11:43:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE2NzcxOQ==", "url": "https://github.com/apollographql/apollo-android/pull/2321#discussion_r442167719", "bodyText": "I was looking into this this morning so I made a PR there: #2378", "author": "martinbonnin", "createdAt": "2020-06-18T11:50:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDkyNg=="}], "type": "inlineReview"}]}