{"pr_number": 2478, "pr_title": "Part 1 (frontend): Introduce new codegen to support fragments as interfaces", "pr_createdAt": "2020-07-27T14:45:41Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2478", "timeline": [{"oid": "95ce0974ac87704759723af08475f7753c1f5377", "url": "https://github.com/apollographql/apollo-android/commit/95ce0974ac87704759723af08475f7753c1f5377", "message": "Introduce new codegen AST (frontend) to support fragment as interfaces\n\nIntroduce new codegen AST to make it possible generate named / inline fragments as interfaces, following the similar approach described by Airbnb.\n\nThis is the first phase (we can call it as frontend) of new codegen, build AST structure that very closely represents Kotlin / JVM code to be generated.\n\nNext phase (backend) is actually take AST and transform it to the Kotlin / JVM code.\n\nThere are no tests yet as this is just a first step of new codegen, tests will be added with next PR for backend.", "committedDate": "2020-07-27T14:44:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA2MTM2Mw==", "url": "https://github.com/apollographql/apollo-android/pull/2478#discussion_r461061363", "bodyText": "That will most likely conflict with #2476 since it takes a operationOutput instead of an operationIdGenerator but I can rebase once this is merged.", "author": "martinbonnin", "createdAt": "2020-07-27T17:44:47Z", "path": "apollo-compiler/src/main/kotlin/com/apollographql/apollo/compiler/next/ast/CodeGenerationAstBuilder.kt", "diffHunk": "@@ -0,0 +1,286 @@\n+package com.apollographql.apollo.compiler.next.ast\n+\n+import com.apollographql.apollo.api.internal.QueryDocumentMinifier\n+import com.apollographql.apollo.compiler.OperationIdGenerator\n+import com.apollographql.apollo.compiler.ast.CustomTypes\n+import com.apollographql.apollo.compiler.escapeKotlinReservedWord\n+import com.apollographql.apollo.compiler.ir.CodeGenerationIR\n+import com.apollographql.apollo.compiler.ir.Operation\n+import com.apollographql.apollo.compiler.ir.TypeDeclaration\n+import com.apollographql.apollo.compiler.parser.introspection.IntrospectionSchema\n+import com.apollographql.apollo.compiler.parser.introspection.resolveType\n+import com.apollographql.apollo.compiler.ir.Fragment as IrFragment\n+\n+internal fun CodeGenerationIR.buildCodeGenerationAst(\n+    schema: IntrospectionSchema,\n+    customTypeMap: CustomTypes,\n+    typesPackageName: String,\n+    fragmentsPackage: String,\n+    useSemanticNaming: Boolean,\n+    operationIdGenerator: OperationIdGenerator", "originalCommit": "95ce0974ac87704759723af08475f7753c1f5377", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ead829f929a2e03771c985164ad888c62866c905", "url": "https://github.com/apollographql/apollo-android/commit/ead829f929a2e03771c985164ad888c62866c905", "message": "Update ast builder after testing codegen MVP", "committedDate": "2020-08-07T15:33:18Z", "type": "commit"}, {"oid": "869c993a1d6ab2c97831af468c0ad317b2426e0b", "url": "https://github.com/apollographql/apollo-android/commit/869c993a1d6ab2c97831af468c0ad317b2426e0b", "message": "Couple more changes", "committedDate": "2020-08-10T13:39:32Z", "type": "commit"}, {"oid": "425a7fb3ec5b8b3215e62634247b844073b2c567", "url": "https://github.com/apollographql/apollo-android/commit/425a7fb3ec5b8b3215e62634247b844073b2c567", "message": "Couple more changes", "committedDate": "2020-08-11T03:35:46Z", "type": "commit"}, {"oid": "080350474d8f14be82f6e814e52bba9d9cccde84", "url": "https://github.com/apollographql/apollo-android/commit/080350474d8f14be82f6e814e52bba9d9cccde84", "message": "Couple more changes", "committedDate": "2020-08-23T14:36:01Z", "type": "commit"}]}