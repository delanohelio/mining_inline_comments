{"pr_number": 2485, "pr_title": "[Doc] add a section about models naming", "pr_createdAt": "2020-07-28T17:22:17Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2485", "timeline": [{"oid": "c17e1ece251dc4a7e7e9177ed0590c4b2d087165", "url": "https://github.com/apollographql/apollo-android/commit/c17e1ece251dc4a7e7e9177ed0590c4b2d087165", "message": "add a section about models naming", "committedDate": "2020-07-28T17:20:50Z", "type": "commit"}, {"oid": "f63b8dbd5333320cdab5f94c6b8721431a685af5", "url": "https://github.com/apollographql/apollo-android/commit/f63b8dbd5333320cdab5f94c6b8721431a685af5", "message": "add a link to the side bar", "committedDate": "2020-07-28T17:22:48Z", "type": "commit"}, {"oid": "20798859e9257d338efa5753553fd2611dc4385e", "url": "https://github.com/apollographql/apollo-android/commit/20798859e9257d338efa5753553fd2611dc4385e", "message": "fix file name", "committedDate": "2020-07-29T22:16:07Z", "type": "commit"}, {"oid": "6141f18489eaf9a4dc1f85d5b122fd14997edd04", "url": "https://github.com/apollographql/apollo-android/commit/6141f18489eaf9a4dc1f85d5b122fd14997edd04", "message": "grammar & tone fixes", "committedDate": "2020-07-29T23:06:57Z", "type": "commit"}, {"oid": "45f891fedb3ffd3bb69105bda9ad3d5e2e2253cf", "url": "https://github.com/apollographql/apollo-android/commit/45f891fedb3ffd3bb69105bda9ad3d5e2e2253cf", "message": "more fixes", "committedDate": "2020-07-29T23:10:33Z", "type": "commit"}, {"oid": "f198d4a2331fb6019a39ee6705e89ae3ab6cc8aa", "url": "https://github.com/apollographql/apollo-android/commit/f198d4a2331fb6019a39ee6705e89ae3ab6cc8aa", "message": "better file name, fix right column", "committedDate": "2020-07-30T08:17:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgzMzMyMQ==", "url": "https://github.com/apollographql/apollo-android/pull/2485#discussion_r462833321", "bodyText": "The second half of the sentence uses we/us. The first half can do that too.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you encouter one, please let me know so I can put a valid example here (we usually fix those issues as we go but there certainly are a few left in the wild). Until we fix it in the singularization code, you can use an alias to control the name of the model in your code.\n          \n          \n            \n            If you encouter one, please let us know so we can put a valid example here (we usually fix those issues as we go but there certainly are a few left in the wild). Until we fix it in the singularization code, you can use an alias to control the name of the model in your code.", "author": "tasomaniac", "createdAt": "2020-07-30T08:25:06Z", "path": "docs/source/essentials/using-aliases.mdx", "diffHunk": "@@ -0,0 +1,85 @@\n+---\n+title: Using aliases\n+---\n+\n+When generating code, Apollo Android uses the name of your fields to generate matching typesafe models using a flat hierarchy. The following query:\n+\n+```graphql:title=GetContact.graphql\n+query GetContact {\n+  contact(name: \"Byron\") {\n+    # The generated model will be named `HomeAddress`\n+    homeAddress {\n+      street\n+    }\n+    # The generated model will be named `WorkAddress`\n+    workAddress {\n+      country\n+    }\n+  }\n+}\n+```\n+\n+will generate models like this:\n+\n+```kotlin\n+class GetContact {\n+  class Data { ... }\n+  class Contact { ... }\n+  class HomeAddress { ... }\n+  class WorkAddress { ... }\n+}\n+```\n+\n+The driving principles behind the naming conventions are:\n+* Use the field name for model names: we considered using the schema type name instead but that would make a lot of conflicts. In the example above, for an example, we would have two different `Address` classes.\n+* Keep a flat hierarchy of classes: we considered using nested classes but that can lead to very long names and a flat hierarchy is easier to read.\n+* Singularize the field name when it is a list: if your query contains a List fields, such as `nodes` for an example, it makes more sense to generate a `List<Node>` than a `List<Nodes>`.\n+\n+These principles work great for the vast majority of cases but can't account for name clashes or peculiar singularization rules. To workaround these, you can use GraphQL [aliases](https://graphql.org/learn/queries/#aliases).\n+\n+## Using aliases to avoid name clashes\n+\n+Since the class hierarchy is flat, having two fields with the same name in two different parts of the query tree could lead to name clashes. Having relay-style pagination with lots of `nodes` or `edges` fields, might typically trigger name clashes. To avoid them, Apollo Android will append a numeric suffix to your models:\n+\n+```graphql:title=GetContact.graphql\n+query GetContacts {\n+  contact(name: \"Byron\") {\n+    # The generated model will be named `HomeAddress`\n+    homeAddress {\n+      street\n+    }\n+  }\n+  emergencyContact {\n+    # The generated model will be named `HomeAddress1` by default\n+    homeAddress {\n+      street\n+    }\n+  }\n+}\n+```\n+\n+Suffixing avoids the name clash but feels a bit out of place and it's hard to remember what `HomeAddress1` is about. To workaround this issue, you can alias the field:\n+\n+```graphql:title=GetContact.graphql\n+query GetContacts {\n+  contact(name: \"Byron\") {\n+    # The generated model will be named `HomeAddress`\n+    homeAddress {\n+      street\n+    }\n+  }\n+  emergencyContact {\n+    # With an alias, the generated model will be named `EmergencyAddress`\n+    emergencyAddress: homeAddress {\n+      street\n+    }\n+  }\n+}\n+```\n+\n+## Using aliases to fix singularization rules\n+\n+The [singularization code](https://github.com/martinbonnin/apollo-android/blob/master/apollo-compiler/src/main/kotlin/com/apollographql/apollo/compiler/Inflector.kt) works most of time but does not contain all the exceptions in the english dictionnary.\n+\n+If you encouter one, please let me know so I can put a valid example here (we usually fix those issues as we go but there certainly are a few left in the wild). Until we fix it in the singularization code, you can use an alias to control the name of the model in your code.", "originalCommit": "f198d4a2331fb6019a39ee6705e89ae3ab6cc8aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgzMzg5OA==", "url": "https://github.com/apollographql/apollo-android/pull/2485#discussion_r462833898", "bodyText": "Good catch, thanks!", "author": "martinbonnin", "createdAt": "2020-07-30T08:26:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgzMzMyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjgzMzUzNg==", "url": "https://github.com/apollographql/apollo-android/pull/2485#discussion_r462833536", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The [singularization code](https://github.com/martinbonnin/apollo-android/blob/master/apollo-compiler/src/main/kotlin/com/apollographql/apollo/compiler/Inflector.kt) works most of time but does not contain all the exceptions in the english dictionnary.\n          \n          \n            \n            The [singularization code](https://github.com/martinbonnin/apollo-android/blob/master/apollo-compiler/src/main/kotlin/com/apollographql/apollo/compiler/Inflector.kt) works most of time but does not contain all the exceptions in the English dictionnary.", "author": "tasomaniac", "createdAt": "2020-07-30T08:25:26Z", "path": "docs/source/essentials/using-aliases.mdx", "diffHunk": "@@ -0,0 +1,85 @@\n+---\n+title: Using aliases\n+---\n+\n+When generating code, Apollo Android uses the name of your fields to generate matching typesafe models using a flat hierarchy. The following query:\n+\n+```graphql:title=GetContact.graphql\n+query GetContact {\n+  contact(name: \"Byron\") {\n+    # The generated model will be named `HomeAddress`\n+    homeAddress {\n+      street\n+    }\n+    # The generated model will be named `WorkAddress`\n+    workAddress {\n+      country\n+    }\n+  }\n+}\n+```\n+\n+will generate models like this:\n+\n+```kotlin\n+class GetContact {\n+  class Data { ... }\n+  class Contact { ... }\n+  class HomeAddress { ... }\n+  class WorkAddress { ... }\n+}\n+```\n+\n+The driving principles behind the naming conventions are:\n+* Use the field name for model names: we considered using the schema type name instead but that would make a lot of conflicts. In the example above, for an example, we would have two different `Address` classes.\n+* Keep a flat hierarchy of classes: we considered using nested classes but that can lead to very long names and a flat hierarchy is easier to read.\n+* Singularize the field name when it is a list: if your query contains a List fields, such as `nodes` for an example, it makes more sense to generate a `List<Node>` than a `List<Nodes>`.\n+\n+These principles work great for the vast majority of cases but can't account for name clashes or peculiar singularization rules. To workaround these, you can use GraphQL [aliases](https://graphql.org/learn/queries/#aliases).\n+\n+## Using aliases to avoid name clashes\n+\n+Since the class hierarchy is flat, having two fields with the same name in two different parts of the query tree could lead to name clashes. Having relay-style pagination with lots of `nodes` or `edges` fields, might typically trigger name clashes. To avoid them, Apollo Android will append a numeric suffix to your models:\n+\n+```graphql:title=GetContact.graphql\n+query GetContacts {\n+  contact(name: \"Byron\") {\n+    # The generated model will be named `HomeAddress`\n+    homeAddress {\n+      street\n+    }\n+  }\n+  emergencyContact {\n+    # The generated model will be named `HomeAddress1` by default\n+    homeAddress {\n+      street\n+    }\n+  }\n+}\n+```\n+\n+Suffixing avoids the name clash but feels a bit out of place and it's hard to remember what `HomeAddress1` is about. To workaround this issue, you can alias the field:\n+\n+```graphql:title=GetContact.graphql\n+query GetContacts {\n+  contact(name: \"Byron\") {\n+    # The generated model will be named `HomeAddress`\n+    homeAddress {\n+      street\n+    }\n+  }\n+  emergencyContact {\n+    # With an alias, the generated model will be named `EmergencyAddress`\n+    emergencyAddress: homeAddress {\n+      street\n+    }\n+  }\n+}\n+```\n+\n+## Using aliases to fix singularization rules\n+\n+The [singularization code](https://github.com/martinbonnin/apollo-android/blob/master/apollo-compiler/src/main/kotlin/com/apollographql/apollo/compiler/Inflector.kt) works most of time but does not contain all the exceptions in the english dictionnary.", "originalCommit": "f198d4a2331fb6019a39ee6705e89ae3ab6cc8aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cdfdc48789eb9b3d0c8867709c79d2768320a578", "url": "https://github.com/apollographql/apollo-android/commit/cdfdc48789eb9b3d0c8867709c79d2768320a578", "message": "Update docs/source/essentials/using-aliases.mdx\n\nCo-authored-by: Said Tahsin Dane <tasomaniac@gmail.com>", "committedDate": "2020-07-30T08:26:12Z", "type": "commit"}, {"oid": "2c339d098439e44c395d91991da2100e9cb02e92", "url": "https://github.com/apollographql/apollo-android/commit/2c339d098439e44c395d91991da2100e9cb02e92", "message": "Update docs/source/essentials/using-aliases.mdx\n\nCo-authored-by: Said Tahsin Dane <tasomaniac@gmail.com>", "committedDate": "2020-07-30T08:26:27Z", "type": "commit"}]}