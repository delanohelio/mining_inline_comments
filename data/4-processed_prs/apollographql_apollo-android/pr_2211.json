{"pr_number": 2211, "pr_title": "Convert cache-api module to multiplatform", "pr_createdAt": "2020-04-24T19:51:17Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2211", "timeline": [{"oid": "0b827de03303b3f8617fca79f7ed13f03ec3fbc4", "url": "https://github.com/apollographql/apollo-android/commit/0b827de03303b3f8617fca79f7ed13f03ec3fbc4", "message": "Rename .java to .kt", "committedDate": "2020-04-24T19:46:02Z", "type": "commit"}, {"oid": "e0dc45ca1f1ef4d5ffc8f444da075abb44e49a4d", "url": "https://github.com/apollographql/apollo-android/commit/e0dc45ca1f1ef4d5ffc8f444da075abb44e49a4d", "message": "Comvert normalized-cache-api module fully to Kotlin", "committedDate": "2020-04-24T19:46:03Z", "type": "commit"}, {"oid": "9c5f2b8ada927e6482d43c42c7989124b887c933", "url": "https://github.com/apollographql/apollo-android/commit/9c5f2b8ada927e6482d43c42c7989124b887c933", "message": "Convert to Cache API Kotlin Multiplatform", "committedDate": "2020-04-24T19:46:03Z", "type": "commit"}, {"oid": "775a1f19601b73fb3bfe6f0660c0d0cd44ab009f", "url": "https://github.com/apollographql/apollo-android/commit/775a1f19601b73fb3bfe6f0660c0d0cd44ab009f", "message": "Use open-source version of UUID", "committedDate": "2020-04-24T19:46:03Z", "type": "commit"}, {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693", "url": "https://github.com/apollographql/apollo-android/commit/3ddaf097c151d1304ff9825a031c8e4656377693", "message": "Migrate tests to common", "committedDate": "2020-04-24T21:13:50Z", "type": "commit"}, {"oid": "3ddaf097c151d1304ff9825a031c8e4656377693", "url": "https://github.com/apollographql/apollo-android/commit/3ddaf097c151d1304ff9825a031c8e4656377693", "message": "Migrate tests to common", "committedDate": "2020-04-24T21:13:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwNjk3OQ==", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414906979", "bodyText": "\ud83d\udc4d nice Ben :)", "author": "sav007", "createdAt": "2020-04-24T22:56:20Z", "path": "gradle/dependencies.gradle", "diffHunk": "@@ -101,6 +101,7 @@ ext.dep = [\n         plugin : \"com.squareup.sqldelight:gradle-plugin:$versions.sqldelight\"\n     ],\n     truth                 : \"com.google.truth:truth:$versions.truth\",\n+    uuid                  : \"com.benasher44:uuid:0.1.0\",", "originalCommit": "3ddaf097c151d1304ff9825a031c8e4656377693", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwODM0Nw==", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414908347", "bodyText": "should it be an object?", "author": "sav007", "createdAt": "2020-04-24T23:00:15Z", "path": "apollo-normalized-cache-api/src/commonMain/kotlin/com/apollographql/apollo/cache/normalized/RecordFieldJsonAdapter.kt", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.apollographql.apollo.cache.normalized\n+\n+import com.apollographql.apollo.api.internal.Throws\n+import com.apollographql.apollo.api.internal.json.BufferedSourceJsonReader\n+import com.apollographql.apollo.api.internal.json.JsonWriter\n+import com.apollographql.apollo.api.internal.json.use\n+import com.apollographql.apollo.cache.normalized.internal.CacheJsonStreamReader\n+import okio.Buffer\n+import okio.BufferedSource\n+import okio.ByteString.Companion.encodeUtf8\n+import okio.IOException\n+import kotlin.jvm.JvmStatic\n+\n+/**\n+ * An adapter used to serialize and deserialize Record fields. Record object types will be serialized to\n+ * [CacheReference].\n+ */\n+class RecordFieldJsonAdapter {", "originalCommit": "3ddaf097c151d1304ff9825a031c8e4656377693", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkxNDIxNQ==", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414914215", "bodyText": "I could potentially make it an object but it is not under internal. I'm afraid that would break compatibilty.", "author": "tasomaniac", "createdAt": "2020-04-24T23:18:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwODM0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwODc4Nw==", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414908787", "bodyText": "unused ?", "author": "sav007", "createdAt": "2020-04-24T23:01:23Z", "path": "apollo-normalized-cache-api/src/commonMain/kotlin/com/apollographql/apollo/cache/normalized/CacheKeyResolver.kt", "diffHunk": "@@ -2,6 +2,9 @@ package com.apollographql.apollo.cache.normalized\n \n import com.apollographql.apollo.api.Operation\n import com.apollographql.apollo.api.ResponseField\n+import kotlin.jvm.JvmField\n+import kotlin.jvm.JvmStatic\n+import kotlin.jvm.JvmSuppressWildcards", "originalCommit": "3ddaf097c151d1304ff9825a031c8e4656377693", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkxNDUxNg==", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414914516", "bodyText": "These are used. Somehow in a regular jvm project, you can use these without import. But in Multiplatform, they need to be explicitly imported.", "author": "tasomaniac", "createdAt": "2020-04-24T23:19:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwODc4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwODg2Nw==", "url": "https://github.com/apollographql/apollo-android/pull/2211#discussion_r414908867", "bodyText": "unused?", "author": "sav007", "createdAt": "2020-04-24T23:01:36Z", "path": "apollo-normalized-cache-api/src/commonMain/kotlin/com/apollographql/apollo/cache/normalized/CacheKey.kt", "diffHunk": "@@ -1,5 +1,8 @@\n package com.apollographql.apollo.cache.normalized\n \n+import kotlin.jvm.JvmField\n+import kotlin.jvm.JvmStatic", "originalCommit": "3ddaf097c151d1304ff9825a031c8e4656377693", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}