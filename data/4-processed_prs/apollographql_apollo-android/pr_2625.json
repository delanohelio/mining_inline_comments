{"pr_number": 2625, "pr_title": "Massive Fall Cleanup \ud83c\udf41\ud83c\udf43", "pr_createdAt": "2020-10-04T21:57:13Z", "pr_url": "https://github.com/apollographql/apollo-android/pull/2625", "timeline": [{"oid": "95c98e354a336ceeb8b30eca72b6555e7a276f79", "url": "https://github.com/apollographql/apollo-android/commit/95c98e354a336ceeb8b30eca72b6555e7a276f79", "message": "cleanup the Java codegen", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "35df233e520d1948d61fef81629a64cd615a7f7f", "url": "https://github.com/apollographql/apollo-android/commit/35df233e520d1948d61fef81629a64cd615a7f7f", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "6d586b6c68cc7fc23527078da5dd9f258ead2829", "url": "https://github.com/apollographql/apollo-android/commit/6d586b6c68cc7fc23527078da5dd9f258ead2829", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "fec07eb82a407e5cfb7b89b0b660161444937618", "url": "https://github.com/apollographql/apollo-android/commit/fec07eb82a407e5cfb7b89b0b660161444937618", "message": "ResponseWriteTestCase is now Kotlin", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "200255d57c6aed20cc5cd029dd477a1fb576cca5", "url": "https://github.com/apollographql/apollo-android/commit/200255d57c6aed20cc5cd029dd477a1fb576cca5", "message": "convert java file to kotlin", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "80ae4f0983684ed47b0826fe4ffd067fb97bee60", "url": "https://github.com/apollographql/apollo-android/commit/80ae4f0983684ed47b0826fe4ffd067fb97bee60", "message": "make compile with Kotlin models", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "0e087ec4e70ebe528ce904d1e44bca700a7c6b7a", "url": "https://github.com/apollographql/apollo-android/commit/0e087ec4e70ebe528ce904d1e44bca700a7c6b7a", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "412abace821854cef2fb59dbd63bf483fa60a829", "url": "https://github.com/apollographql/apollo-android/commit/412abace821854cef2fb59dbd63bf483fa60a829", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "dba6ba81ddda69d162c5dfecf383ceff97abc4c5", "url": "https://github.com/apollographql/apollo-android/commit/dba6ba81ddda69d162c5dfecf383ceff97abc4c5", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "7124005b92dcc6641c7e5f941b54474785cf2cb6", "url": "https://github.com/apollographql/apollo-android/commit/7124005b92dcc6641c7e5f941b54474785cf2cb6", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "828ea522749dce9592ec969adeb6cc21cb8d3402", "url": "https://github.com/apollographql/apollo-android/commit/828ea522749dce9592ec969adeb6cc21cb8d3402", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "29db3daf3a0ad0864c229a11f1556286d137a8a2", "url": "https://github.com/apollographql/apollo-android/commit/29db3daf3a0ad0864c229a11f1556286d137a8a2", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "c3096478395df322d69c0f837b7bc59c07075478", "url": "https://github.com/apollographql/apollo-android/commit/c3096478395df322d69c0f837b7bc59c07075478", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "5edc10325cfd273951e5f2493fe7acb79b6b9e59", "url": "https://github.com/apollographql/apollo-android/commit/5edc10325cfd273951e5f2493fe7acb79b6b9e59", "message": "convert last integration files to kotlin", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "20b116e3750bbc78c72c0f5bbf810144d04e1129", "url": "https://github.com/apollographql/apollo-android/commit/20b116e3750bbc78c72c0f5bbf810144d04e1129", "message": "wip", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "cbe377dbe10c576b99a0374bc8815fd48631f12b", "url": "https://github.com/apollographql/apollo-android/commit/cbe377dbe10c576b99a0374bc8815fd48631f12b", "message": "make tests pass", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "e6f71b73aad75513539f3427e613482ab6b59039", "url": "https://github.com/apollographql/apollo-android/commit/e6f71b73aad75513539f3427e613482ab6b59039", "message": "add Android again, fix tests", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "7645e2f92b7c1a10ffad0ad714b3642d9d182dbe", "url": "https://github.com/apollographql/apollo-android/commit/7645e2f92b7c1a10ffad0ad714b3642d9d182dbe", "message": "disable metalava in the dev-3.x branch for now", "committedDate": "2020-10-05T14:36:40Z", "type": "commit"}, {"oid": "7645e2f92b7c1a10ffad0ad714b3642d9d182dbe", "url": "https://github.com/apollographql/apollo-android/commit/7645e2f92b7c1a10ffad0ad714b3642d9d182dbe", "message": "disable metalava in the dev-3.x branch for now", "committedDate": "2020-10-05T14:36:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0ODgxOQ==", "url": "https://github.com/apollographql/apollo-android/pull/2625#discussion_r499748819", "bodyText": "Since these are in the api, is it fine to remove without deprecating them first?", "author": "tasomaniac", "createdAt": "2020-10-05T17:10:41Z", "path": "apollo-api/src/commonMain/kotlin/com/apollographql/apollo/api/ResponseField.kt", "diffHunk": "@@ -304,34 +304,6 @@ open class ResponseField internal constructor(\n       )\n     }\n \n-    /**\n-     * Factory method for creating a Field instance representing [Type.LONG].\n-     *\n-     * @param responseName alias for the result of a field\n-     * @param fieldName name of the field in the GraphQL operation\n-     * @param arguments arguments to be passed along with the field\n-     * @param optional whether the arguments passed along are optional or required\n-     * @param conditions list of conditions for this field\n-     * @return Field instance representing [Type.LONG]\n-     */\n-    @JvmStatic\n-    fun forLong(", "originalCommit": "7645e2f92b7c1a10ffad0ad714b3642d9d182dbe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1MzcxOQ==", "url": "https://github.com/apollographql/apollo-android/pull/2625#discussion_r499753719", "bodyText": "3.x will break a huge amount of things. I don't really see a nice deprecation path there. We could deprecate in 2.x but deprecating without giving a clear path forward isn't great either.", "author": "martinbonnin", "createdAt": "2020-10-05T17:19:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0ODgxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3NDQxOA==", "url": "https://github.com/apollographql/apollo-android/pull/2625#discussion_r499874418", "bodyText": "Makes sense \ud83d\udc4d", "author": "tasomaniac", "createdAt": "2020-10-05T21:10:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0ODgxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0OTM3OA==", "url": "https://github.com/apollographql/apollo-android/pull/2625#discussion_r499749378", "bodyText": "Is this change here by mistake?", "author": "tasomaniac", "createdAt": "2020-10-05T17:11:45Z", "path": "apollo-compiler/src/main/kotlin/com/apollographql/apollo/compiler/GraphQLCompiler.kt", "diffHunk": "@@ -189,13 +163,13 @@ class GraphQLCompiler(val logger: Logger = NoOpLogger) {\n   private fun idClassName(generateKotlinModels: Boolean) = if (generateKotlinModels) {\n     String::class.asClassName().toString()\n   } else {\n-    ClassNames.STRING.toString()\n+    TODO(\"ClassNames.STRING.toString()\")", "originalCommit": "7645e2f92b7c1a10ffad0ad714b3642d9d182dbe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1NDU4OQ==", "url": "https://github.com/apollographql/apollo-android/pull/2625#discussion_r499754589", "bodyText": "This is the java codegen path. It's currently broken in dev-3.x and will have to be enabled again.", "author": "martinbonnin", "createdAt": "2020-10-05T17:20:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0OTM3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1MjA4Ng==", "url": "https://github.com/apollographql/apollo-android/pull/2625#discussion_r499752086", "bodyText": "Can we not inline this function too? Do we still need it?", "author": "tasomaniac", "createdAt": "2020-10-05T17:16:29Z", "path": "apollo-gradle-plugin/src/main/kotlin/com/apollographql/apollo/gradle/internal/DefaultCompilationUnit.kt", "diffHunk": "@@ -89,10 +89,7 @@ abstract class DefaultCompilationUnit @Inject constructor(\n     }\n   }\n \n-  fun generateKotlinModels(): Boolean = when {\n-    project.isKotlinMultiplatform -> true\n-    else -> generateKotlinModels.orElse(service.generateKotlinModels).orElse(apolloExtension.generateKotlinModels).getOrElse(false)\n-  }\n+  fun generateKotlinModels(): Boolean = true", "originalCommit": "7645e2f92b7c1a10ffad0ad714b3642d9d182dbe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc2NjE3Ng==", "url": "https://github.com/apollographql/apollo-android/pull/2625#discussion_r499766176", "bodyText": "I kept the Gradle plugin java codegen path intact for now since it can ultimately be reused. I'd really like to remove this function though and not having to build the java/kotlin task graphs based on user input (i.e. certainly have different plugin ids for java and kotlin). Not 100% sure yet how this is going to end so this is a very rough first step.", "author": "martinbonnin", "createdAt": "2020-10-05T17:42:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1MjA4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1NDIxMQ==", "url": "https://github.com/apollographql/apollo-android/pull/2625#discussion_r499754211", "bodyText": "What is the reason to remove samples from composite project? Are we going to replace this with something else?", "author": "tasomaniac", "createdAt": "2020-10-05T17:20:13Z", "path": "composite/settings.gradle.kts", "diffHunk": "@@ -1,16 +1,5 @@\n rootProject.name = \"apollo-composite\"\n \n-// Samples", "originalCommit": "7645e2f92b7c1a10ffad0ad714b3642d9d182dbe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1NTM0MA==", "url": "https://github.com/apollographql/apollo-android/pull/2625#discussion_r499755340", "bodyText": "Definitively an oversight, I only meant to delete the java sample, I'll add the kotlin samples back \ud83d\udc4d", "author": "martinbonnin", "createdAt": "2020-10-05T17:22:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1NDIxMQ=="}], "type": "inlineReview"}, {"oid": "d1f92d625f30daf3a61ceed96109cdeacce810fb", "url": "https://github.com/apollographql/apollo-android/commit/d1f92d625f30daf3a61ceed96109cdeacce810fb", "message": "add the samples back", "committedDate": "2020-10-05T19:37:27Z", "type": "commit"}]}