{"pr_number": 4455, "pr_title": "[JENKINS-60866] Un-inline JavaScript / CSS from HudsonPrivateSecurity\u2026", "pr_createdAt": "2020-01-25T21:44:37Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4455", "timeline": [{"oid": "363857d436dd0f41ae597fdbbc02c597739344aa", "url": "https://github.com/jenkinsci/jenkins/commit/363857d436dd0f41ae597fdbbc02c597739344aa", "message": "[JENKINS-60866] Un-inline JavaScript / CSS from HudsonPrivateSecurityRealm", "committedDate": "2020-01-25T21:41:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk1ODA3MQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4455#discussion_r370958071", "bodyText": "To improve consistency with the user list view", "author": "Wadeck", "createdAt": "2020-01-25T21:45:46Z", "path": "core/src/main/resources/hudson/model/View/AsynchPeople/index.jelly", "diffHunk": "@@ -100,7 +100,7 @@ THE SOFTWARE.\n       <l:progressiveRendering handler=\"${it}\" callback=\"display\"/>\n       <table class=\"sortable pane bigtable\" id=\"people\">\n         <tr>\n-          <th />\n+          <th class=\"minimum-width\" />", "originalCommit": "363857d436dd0f41ae597fdbbc02c597739344aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI4MDUyOQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4455#discussion_r376280529", "bodyText": "Makes sense, but probably a separate PR or a changelog entry? Is it a real issue with rendering you hit? Or just housekeeping?", "author": "oleg-nenashev", "createdAt": "2020-02-07T09:03:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk1ODA3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgwMDk1Ng==", "url": "https://github.com/jenkinsci/jenkins/pull/4455#discussion_r376800956", "bodyText": "housekeeping\n\nTo improve \"a bit\" the consistency between the two tables :)", "author": "Wadeck", "createdAt": "2020-02-09T17:36:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk1ODA3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk1ODExNQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4455#discussion_r370958115", "bodyText": "https://caniuse.com/#feat=autofocus instead of having a custom javascript doing the same as the browser", "author": "Wadeck", "createdAt": "2020-01-25T21:46:23Z", "path": "core/src/main/resources/hudson/security/HudsonPrivateSecurityRealm/_entryForm.jelly", "diffHunk": "@@ -24,23 +24,41 @@ THE SOFTWARE.\n \n <!-- tag file used by both signup.jelly and addUser.jelly -->\n <?jelly escape-by-default='true'?>\n-<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"/lib/layout\" xmlns:t=\"/lib/hudson\" xmlns:f=\"/lib/form\">\n+<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\">\n+  <st:documentation>\n+    <st:attribute name=\"it\" use=\"required\" type=\"hudson.security.HudsonPrivateSecurityRealm\">\n+      Context where the page is loaded.\n+    </st:attribute>\n+    <st:attribute name=\"title\" use=\"required\">\n+      Title of the HTML page. Rendered in the page content inside a &lt;h1>.\n+    </st:attribute>\n+    <st:attribute name=\"action\" use=\"required\">\n+      The method to call from within the HudsonPrivateSecurityRealm.\n+    </st:attribute>\n+    <st:attribute name=\"captcha\" use=\"optional\">\n+      Determines if the tag will include the captcha.\n+    </st:attribute>\n+    <st:attribute name=\"data\" use=\"optional\" type=\"hudson.security.HudsonPrivateSecurityRealm.SignupInfo\">\n+      The wrapper for the data provided by the user and the error message(s) if any. Is null on first form display.\n+    </st:attribute>\n+  </st:documentation>\n+\n   <h1>${title}</h1>\n-  <div style=\"margin: 2em;\">\n+  <div class=\"form-content\">\n     <j:if test=\"${data.errorMessage!=null}\">\n-      <div class=\"error\" style=\"margin-bottom:1em\">\n+      <div class=\"error\">\n         ${data.errorMessage}\n       </div>\n     </j:if>\n     <j:forEach var=\"error\" items=\"${data.errors}\">\n-      <div class=\"error\" style=\"margin-bottom:1em\">\n+      <div class=\"error\">\n         ${error.value}\n       </div>\n     </j:forEach>\n       <table>\n         <tr>\n           <td>${%Username}:</td>\n-          <td><input type=\"text\" name=\"username\" id=\"username\" value=\"${data.username}\" /></td>\n+          <td><input type=\"text\" name=\"username\" id=\"username\" value=\"${data.username}\" autofocus=\"autofocus\" /></td>", "originalCommit": "363857d436dd0f41ae597fdbbc02c597739344aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk1ODE2OA==", "url": "https://github.com/jenkinsci/jenkins/pull/4455#discussion_r370958168", "bodyText": "text-size is not a CSS instruction", "author": "Wadeck", "createdAt": "2020-01-25T21:47:06Z", "path": "core/src/main/resources/hudson/security/HudsonPrivateSecurityRealm/_entryFormPage.jelly", "diffHunk": "@@ -22,28 +22,36 @@ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n -->\n \n-<!-- tag file used by both signup.jelly and addUser.jelly -->\n+<!-- tag file used by signupWithFederatedIdentity.jelly, addUser.jelly and firstUser.jelly -->\n <?jelly escape-by-default='true'?>\n-<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:d=\"jelly:define\" xmlns:l=\"/lib/layout\" xmlns:t=\"/lib/hudson\" xmlns:f=\"/lib/form\">\n+<j:jelly xmlns:j=\"jelly:core\" xmlns:st=\"jelly:stapler\" xmlns:l=\"/lib/layout\" xmlns:f=\"/lib/form\" xmlns:local=\"/hudson/security/HudsonPrivateSecurityRealm\">\n+  <st:documentation>\n+    <st:attribute name=\"host\" use=\"required\" type=\"hudson.security.HudsonPrivateSecurityRealm\">\n+      Corresponds to the \"it\" of Jelly, meaning the context where the page is loaded.\n+    </st:attribute>\n+    <st:attribute name=\"title\" use=\"required\">\n+      Title of the HTML page. \n+      Rendered into &lt;title> tag, in the page content inside a &lt;h1> and as the label of the submit button.\n+    </st:attribute>\n+    <st:attribute name=\"action\" use=\"required\">\n+      The method to call from within the HudsonPrivateSecurityRealm.\n+    </st:attribute>\n+    <st:attribute name=\"captcha\" use=\"optional\" type=\"boolean\">\n+      Determines if the tag will include the captcha.\n+    </st:attribute>\n+    <st:attribute name=\"data\" use=\"optional\" type=\"hudson.security.HudsonPrivateSecurityRealm.SignupInfo\">\n+      The wrapper for the data provided by the user and the error message(s) if any. Is null on first form display.\n+    </st:attribute>\n+  </st:documentation>\n   <l:layout norefresh=\"true\" title=\"${title}\">\n-    <l:header>\n-      <style>\n-        <!-- match width with captcha image -->\n-        INPUT {\n-          width:200px;\n-        }\n-      </style>\n-    </l:header>\n+    <st:adjunct includes=\"hudson.security.HudsonPrivateSecurityRealm._entryFormPage.resources\" />\n     <l:hasPermission permission=\"${app.READ}\" it=\"${host}\">\n       <st:include page=\"sidepanel.jelly\" it=\"${host}\" />\n     </l:hasPermission>\n     <l:main-panel>\n-      <form action=\"${rootURL}/securityRealm/${action}\" method=\"post\" style=\"text-size:smaller\">", "originalCommit": "363857d436dd0f41ae597fdbbc02c597739344aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk1ODIwMw==", "url": "https://github.com/jenkinsci/jenkins/pull/4455#discussion_r370958203", "bodyText": "Tested with Firefox, Chrome, Opera, IE 11, the table is expanded to the minimum width required by the content.", "author": "Wadeck", "createdAt": "2020-01-25T21:48:00Z", "path": "war/src/main/webapp/css/style.css", "diffHunk": "@@ -522,6 +522,10 @@ table.bigtable.pane > tbody > tr > td:last-child {\n   white-space: nowrap;\n }\n \n+.bigtable th.minimum-width {\n+  width: 1px;", "originalCommit": "363857d436dd0f41ae597fdbbc02c597739344aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}