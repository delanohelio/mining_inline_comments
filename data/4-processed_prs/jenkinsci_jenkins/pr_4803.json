{"pr_number": 4803, "pr_title": "[JENKINS-62688] - Use user ID instead of full name in User.toString()", "pr_createdAt": "2020-06-15T14:04:35Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4803", "timeline": [{"oid": "eb1c1560659695e9e55b00c45480325671b7700e", "url": "https://github.com/jenkinsci/jenkins/commit/eb1c1560659695e9e55b00c45480325671b7700e", "message": "[JENKINS-62688] use id in User.toString()\n\nChange toString() to use the id rather than fullName.\n\nThis is because a full name may not be unique and as such when used in log\nmessages we get something that is less than helpful.\n\nas such we should print the user's Id so we can actually identify the\nuser.", "committedDate": "2020-06-15T14:00:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDYzMQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4803#discussion_r440210631", "bodyText": "not going to have any impacts on the UI of any of the major auth plugins?\n(assume not but just checking)", "author": "timja", "createdAt": "2020-06-15T14:20:01Z", "path": "core/src/main/java/hudson/model/User.java", "diffHunk": "@@ -688,7 +688,7 @@ private boolean relatedTo(@NonNull AbstractBuild<?, ?> b) {\n     }\n \n     public @Override String toString() {\n-        return fullName;\n+        return id;", "originalCommit": "eb1c1560659695e9e55b00c45480325671b7700e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxOTIyMg==", "url": "https://github.com/jenkinsci/jenkins/pull/4803#discussion_r440219222", "bodyText": "I hope not - most of the tests passed (did not run ATH) - and any security authN/AuthZ plugin using toString() has a huge bug anyway as fullNames can be user controlled.\nI anticipate some test failures in some plugins if they are checking logs contain some message (as \"Jane Doe\" will now be \"janedoe\" or similar) but I am not expecting production code to break - but I also have not actively gone looking.", "author": "jtnord", "createdAt": "2020-06-15T14:31:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDYzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ2MTUwMw==", "url": "https://github.com/jenkinsci/jenkins/pull/4803#discussion_r441461503", "bodyText": "NB: \"most\" above was because I was running on windows and there are known failures ;(\nThe ATH run as part of the PR passed according to Jenkins - so that is a very good sign that there is not a \"huge ammount\" of sillyness going on in the codebase", "author": "jtnord", "createdAt": "2020-06-17T10:59:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDYzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ2Njk5NA==", "url": "https://github.com/jenkinsci/jenkins/pull/4803#discussion_r441466994", "bodyText": "There's very minimal ath tests run on PRs: https://github.com/jenkinsci/acceptance-test-harness/search?q=SmokeTest&unscoped_q=SmokeTest", "author": "timja", "createdAt": "2020-06-17T11:10:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDYzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQ0NDc4Mw==", "url": "https://github.com/jenkinsci/jenkins/pull/4803#discussion_r443444783", "bodyText": "an internal run on CloudBees infrastructure showed no new failing ATHs and no regressions in the PCT of the plugins we support.\nThere where a large amount of failures - mainly due to a scrolling issue with the latest core and ATH (should be fixed in jenkinsci/acceptance-test-harness#586) but I now consider this tested.", "author": "jtnord", "createdAt": "2020-06-22T09:52:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMDYzMQ=="}], "type": "inlineReview"}]}