{"pr_number": 4939, "pr_title": "Combobox improvements", "pr_createdAt": "2020-09-17T14:56:05Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4939", "timeline": [{"oid": "6b641160a2c40252082ccd78bc516faf45f5e7a9", "url": "https://github.com/jenkinsci/jenkins/commit/6b641160a2c40252082ccd78bc516faf45f5e7a9", "message": "Combobox improvements\n\n* Support default value\n* Support readonly mode\n* Align markup with textbox", "committedDate": "2020-09-17T14:45:10Z", "type": "commit"}, {"oid": "e3f4b48798939c4a4d9473433368816a5e482301", "url": "https://github.com/jenkinsci/jenkins/commit/e3f4b48798939c4a4d9473433368816a5e482301", "message": "Fix databinding, merge security test into main test class", "committedDate": "2020-09-18T07:23:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ3MDkxNw==", "url": "https://github.com/jenkinsci/jenkins/pull/4939#discussion_r492470917", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void testEnsureXSSnotPossible() throws Exception {\n          \n          \n            \n                public void testEnsureXssNotPossible() throws Exception {\n          \n      \n    \n    \n  \n\nExcess Snot? No thanks.", "author": "daniel-beck", "createdAt": "2020-09-22T04:42:43Z", "path": "test/src/test/java/lib/form/ComboBoxTest.java", "diffHunk": "@@ -133,4 +139,39 @@ public void testCompoundFieldDependentComboBox() throws Exception {\n             Publisher.all().remove(d2);\n         }\n     }\n+\n+    public static class XssProperty extends OptionalJobProperty<Job<?,?>> {\n+        @TestExtension(\"testEnsureXSSnotPossible\")\n+        public static class DescriptorImpl extends OptionalJobProperty.OptionalJobPropertyDescriptor {\n+\n+            @Override\n+            public String getDisplayName() {\n+                return \"XSS Property\";\n+            }\n+\n+            public ComboBoxModel doFillXssItems() {\n+                return new ComboBoxModel(\"<h1>HACK</h1>\");\n+            }\n+        }\n+    }\n+\n+    @Issue(\"SECURITY-1525\")\n+    public void testEnsureXSSnotPossible() throws Exception {", "originalCommit": "e3f4b48798939c4a4d9473433368816a5e482301", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "16c15808f7a9b1ca3fbc49c079c052733b1bb7d9", "url": "https://github.com/jenkinsci/jenkins/commit/16c15808f7a9b1ca3fbc49c079c052733b1bb7d9", "message": "Update test/src/test/java/lib/form/ComboBoxTest.java\n\nCo-authored-by: Daniel Beck <1831569+daniel-beck@users.noreply.github.com>", "committedDate": "2020-09-22T12:41:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM1Nzg4MA==", "url": "https://github.com/jenkinsci/jenkins/pull/4939#discussion_r494357880", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  The default value of the combo box, in case both @value is and 'instance[field]' is null.\n          \n          \n            \n                  The default value of the combo box, in case both @value and 'instance[field]' are null.", "author": "MRamonLeon", "createdAt": "2020-09-24T14:18:40Z", "path": "core/src/main/resources/lib/form/combobox.jelly", "diffHunk": "@@ -31,26 +31,48 @@ THE SOFTWARE.\n     representation of the items in your combo box, and your instance field should\n     hold the current value.\n \n+    For a read only input set &lt;j:set var=\"readOnlyMode\" value=\"true\"/&gt; inside your entry tag\n+    See https://www.jenkins.io/doc/developer/views/read-only/#enabling-read-only-view-support\n+    <st:attribute name=\"name\">\n+      This becomes @name of the &lt;input> tag.\n+      If @field is specified, this value is inferred from it.\n+    </st:attribute>\n+    <st:attribute name=\"value\">\n+      The initial value of the field. This becomes the @value of the &lt;input> tag.\n+      If @field is specified, the current property from the \"instance\" object\n+      will be set as the initial value automatically,\n+      which is the recommended approach.\n+    </st:attribute>\n+    <st:attribute name=\"default\">\n+      The default value of the combo box, in case both @value is and 'instance[field]' is null.", "originalCommit": "16c15808f7a9b1ca3fbc49c079c052733b1bb7d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c66efa73bc04fc537c18285dbf4b579ea9be65a3", "url": "https://github.com/jenkinsci/jenkins/commit/c66efa73bc04fc537c18285dbf4b579ea9be65a3", "message": "Update core/src/main/resources/lib/form/combobox.jelly\n\nCo-authored-by: Ramon Leon <manuelramonleonjimenez@gmail.com>", "committedDate": "2020-09-24T14:27:32Z", "type": "commit"}, {"oid": "a77492e1b96493a9ab314f1ba921f2610578780b", "url": "https://github.com/jenkinsci/jenkins/commit/a77492e1b96493a9ab314f1ba921f2610578780b", "message": "Fix test", "committedDate": "2020-09-24T15:55:58Z", "type": "commit"}]}