{"pr_number": 4724, "pr_title": "[JENKINS-62264] User with MANAGE permissions can access node monitoring", "pr_createdAt": "2020-05-13T13:32:06Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4724", "timeline": [{"oid": "6d7a85f656ec6dbef319c0edf69d6980a5e60592", "url": "https://github.com/jenkinsci/jenkins/commit/6d7a85f656ec6dbef319c0edf69d6980a5e60592", "message": "[JENKINS-62264] User with MANAGE permissions can access node monitoring\n\nAnd submit its configuration.", "committedDate": "2020-05-13T12:49:04Z", "type": "commit"}, {"oid": "16643d7d41cf319aff629f4193e8e3ed460d2ca1", "url": "https://github.com/jenkinsci/jenkins/commit/16643d7d41cf319aff629f4193e8e3ed460d2ca1", "message": "Merge remote-tracking branch 'origin/master' into JENKINS-62264", "committedDate": "2020-05-25T07:51:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgyNTIxMA==", "url": "https://github.com/jenkinsci/jenkins/pull/4724#discussion_r429825210", "bodyText": "Can Overall/Manage users not configure clouds?", "author": "daniel-beck", "createdAt": "2020-05-25T09:11:41Z", "path": "core/src/main/resources/hudson/model/ComputerSet/sidepanel.jelly", "diffHunk": "@@ -34,8 +34,9 @@ THE SOFTWARE.\n       <l:task href=\"${rootURL}/\" icon=\"icon-up icon-md\" title=\"${%Back to Dashboard}\"/>\n       <l:task href=\"${rootURL}/manage\" icon=\"icon-gear2 icon-md\" permissions=\"${app.MANAGE_AND_SYSTEM_READ}\" title=\"${%Manage Jenkins}\"/>\n       <l:task href=\"new\" icon=\"icon-new-computer icon-md\" permission=\"${createPermission}\" title=\"${%New Node}\"/>\n-      <l:task href=\"${rootURL}/configureClouds\" icon=\"icon-health-40to59 icon-md\" permission=\"${app.ADMINISTER}\" title=\"${%Configure Clouds}\"/>\n-      <l:task href=\"configure\" icon=\"icon-gear2 icon-md\" permission=\"${app.MANAGE}\" title=\"${%Node Monitoring}\"/>\n+      <l:task href=\"${rootURL}/configureClouds\" icon=\"icon-health-40to59 icon-md\" permission=\"${app.SYSTEM_READ}\"\n+              title=\"${app.hasPermission(app.ADMINISTER) ? '%Configure Clouds' : '%View Clouds'}\"/>", "originalCommit": "16643d7d41cf319aff629f4193e8e3ed460d2ca1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgyOTA0Nw==", "url": "https://github.com/jenkinsci/jenkins/pull/4724#discussion_r429829047", "bodyText": "Not sure... to configure a cloud you need to install a cloud implementation plugin, but for now Overall/Manage is not allowed to install plugins. I'd prefer to delay this decision a bit.", "author": "amuniz", "createdAt": "2020-05-25T09:19:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgyNTIxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgzMzUyNw==", "url": "https://github.com/jenkinsci/jenkins/pull/4724#discussion_r429833527", "bodyText": "No worries, was just confused, that looks like something Manage should be able to and would be very desirable (assuming it's safe).", "author": "daniel-beck", "createdAt": "2020-05-25T09:27:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgyNTIxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgxNDUwNw==", "url": "https://github.com/jenkinsci/jenkins/pull/4724#discussion_r429814507", "bodyText": "There\u2019s a hasAdministerOrManage utility jelly fragment I believe", "author": "timja", "createdAt": "2020-05-25T08:50:41Z", "path": "core/src/main/resources/hudson/model/ComputerSet/configure.jelly", "diffHunk": "@@ -39,12 +40,12 @@ THE SOFTWARE.\n                           descriptors=\"${it.nodeMonitorDescriptors}\"\n                           instances=\"${it.nonIgnoredMonitors}\" />\n \n-        <l:isAdmin>\n+        <j:if test=\"${h.hasPermission(app.MANAGE)}\">", "originalCommit": "16643d7d41cf319aff629f4193e8e3ed460d2ca1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2OTcyNQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4724#discussion_r429869725", "bodyText": "I didn't know that, thanks! Changed.", "author": "amuniz", "createdAt": "2020-05-25T10:49:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgxNDUwNw=="}], "type": "inlineReview"}, {"oid": "c0a750e6c5272f70ea7b05d607bb38911eb5bdd8", "url": "https://github.com/jenkinsci/jenkins/commit/c0a750e6c5272f70ea7b05d607bb38911eb5bdd8", "message": "[JENKINS-62264] Allow Overall/Manage to refresh nodes status", "committedDate": "2020-05-25T10:49:19Z", "type": "commit"}]}