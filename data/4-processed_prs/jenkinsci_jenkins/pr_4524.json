{"pr_number": 4524, "pr_title": "JENKINS-61205 System read - global security configuration", "pr_createdAt": "2020-02-25T08:09:32Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4524", "timeline": [{"oid": "45e2b4bc05de1f9651a9e05a0eb9aa76f7a4dd5e", "url": "https://github.com/jenkinsci/jenkins/commit/45e2b4bc05de1f9651a9e05a0eb9aa76f7a4dd5e", "message": "JENKINS-61205 System read - global security configuration", "committedDate": "2020-02-25T08:00:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg4NDAzOA==", "url": "https://github.com/jenkinsci/jenkins/pull/4524#discussion_r383884038", "bodyText": "Ideally this should be solved differently. Just have the plugins generate an element they want to check in JS, based on the variable being set?\nOr perhaps check for the existence of the f.submit/f.apply in the plugin?", "author": "daniel-beck", "createdAt": "2020-02-25T13:41:14Z", "path": "core/src/main/resources/hudson/security/GlobalSecurityConfiguration/index.groovy", "diffHunk": "@@ -11,12 +11,16 @@ def f=namespace(lib.FormTagLib)\n def l=namespace(lib.LayoutTagLib)\n def st=namespace(\"jelly:stapler\")\n \n-l.layout(permission:app.ADMINISTER, title:my.displayName, cssclass:request.getParameter('decorate')) {\n+l.layout(permission:app.SYSTEM_READ, title:my.displayName, cssclass:request.getParameter('decorate')) {\n     l.main_panel {\n         h1 {\n             l.icon(class: 'icon-secure icon-xlg')\n             text(my.displayName)\n         }\n+        if (!h.hasPermission(app.ADMINISTER)) {\n+            set(\"readOnlyMode\", \"true\")\n+            input(id: \"readOnlyMode\", type: \"hidden\", name: \"readOnlyMode\", value: \"true\")", "originalCommit": "45e2b4bc05de1f9651a9e05a0eb9aa76f7a4dd5e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg4NjMyNQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4524#discussion_r383886325", "bodyText": "sure that would work too, I just thought of this first", "author": "timja", "createdAt": "2020-02-25T13:45:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg4NDAzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg4NzkyMQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4524#discussion_r383887921", "bodyText": "Just seems like a hack. So far the readOnlyMode variable was sufficient for core, it would be nice if we kept that (until we can't anymore).", "author": "daniel-beck", "createdAt": "2020-02-25T13:48:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg4NDAzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE1NTc3Ng==", "url": "https://github.com/jenkinsci/jenkins/pull/4524#discussion_r384155776", "bodyText": "done", "author": "timja", "createdAt": "2020-02-25T22:07:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg4NDAzOA=="}], "type": "inlineReview"}, {"oid": "43eeb2a9db0b52aefa0f48f423c1ee0f0c270e11", "url": "https://github.com/jenkinsci/jenkins/commit/43eeb2a9db0b52aefa0f48f423c1ee0f0c270e11", "message": "Remove hidden input", "committedDate": "2020-02-25T22:03:38Z", "type": "commit"}]}