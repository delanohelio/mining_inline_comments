{"pr_number": 4610, "pr_title": "[JENKINS-61478] Style improvements to alert banners", "pr_createdAt": "2020-03-30T08:26:23Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4610", "timeline": [{"oid": "cf32ee16d5e8f8a4f27763a33ebf0b3d4856fd3a", "url": "https://github.com/jenkinsci/jenkins/commit/cf32ee16d5e8f8a4f27763a33ebf0b3d4856fd3a", "message": "[JENKINS-61478] Fixing the height of \"alert banners\"", "committedDate": "2020-03-29T19:51:35Z", "type": "commit"}, {"oid": "d67de5f11c0c99627b55446f22801c9e74c45669", "url": "https://github.com/jenkinsci/jenkins/commit/d67de5f11c0c99627b55446f22801c9e74c45669", "message": "[JENKINS-61478] Using bootstrap alert-success colors\n\nApart from background color, including text color and border color. Also, removing opacity.", "committedDate": "2020-03-29T19:51:35Z", "type": "commit"}, {"oid": "299206c00833c68c030b237d5c31e501d5f24f15", "url": "https://github.com/jenkinsci/jenkins/commit/299206c00833c68c030b237d5c31e501d5f24f15", "message": "[JENKINS-61478] Using material icons for alerts", "committedDate": "2020-03-29T19:51:35Z", "type": "commit"}, {"oid": "c222ee5cd043cd7b5ab298707160c9614a725c8d", "url": "https://github.com/jenkinsci/jenkins/commit/c222ee5cd043cd7b5ab298707160c9614a725c8d", "message": "[JENKINS-61478] Adding colors for \"warning\" & \"error\" alerts", "committedDate": "2020-03-29T19:51:35Z", "type": "commit"}, {"oid": "021e9d07328c19f0130af004de653f905b3e2efa", "url": "https://github.com/jenkinsci/jenkins/commit/021e9d07328c19f0130af004de653f905b3e2efa", "message": "[JENKINS-61478] Using \"info\" alert styles as default\n\nCopied the colors from the \"info\" alert in bootstrap for the default", "committedDate": "2020-03-29T19:51:35Z", "type": "commit"}, {"oid": "e1d57f9837327ebcc4a78389c50662ec1f15b7e8", "url": "https://github.com/jenkinsci/jenkins/commit/e1d57f9837327ebcc4a78389c50662ec1f15b7e8", "message": "[JENKINS-61478] Refactoring default alert styles to attribute", "committedDate": "2020-03-29T19:51:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyMzA1MA==", "url": "https://github.com/jenkinsci/jenkins/pull/4610#discussion_r400023050", "bodyText": "Did you try to see if the styles that are not opacity can be moved into CSS classes? Maybe we can use a .alert-banner.alert-banner-warning style.", "author": "fqueiruga", "createdAt": "2020-03-30T08:46:12Z", "path": "war/src/main/webapp/scripts/hudson-behavior.js", "diffHunk": "@@ -2869,22 +2869,31 @@ var layoutUpdateCallback = {\n // this control displays a single line message at the top of the page, like StackOverflow does\n // see ui-samples for more details\n var notificationBar = {\n-    OPACITY : 0.8,\n+    OPACITY : 1,\n     DELAY : 3000,   // milliseconds to auto-close the notification\n     div : null,     // the main 'notification-bar' DIV\n     token : null,   // timer for cancelling auto-close\n+    defaultBackgroundColor: \"#d1ecf1\",", "originalCommit": "e1d57f9837327ebcc4a78389c50662ec1f15b7e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE1NjU2OA==", "url": "https://github.com/jenkinsci/jenkins/pull/4610#discussion_r400156568", "bodyText": "\ud83d\udc4d Using a class would also help to keep the colors from our new color palette in sync for all items that should use the same semantic. (And theming will be much simpler as well.)", "author": "uhafner", "createdAt": "2020-03-30T12:36:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyMzA1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyMzM4Ng==", "url": "https://github.com/jenkinsci/jenkins/pull/4610#discussion_r400023386", "bodyText": "As I mentioned before, I think it would be better to move as much as possible to CSS", "author": "fqueiruga", "createdAt": "2020-03-30T08:46:43Z", "path": "war/src/main/webapp/scripts/hudson-behavior.js", "diffHunk": "@@ -2893,7 +2902,9 @@ var notificationBar = {\n             this.div = document.createElement(\"div\");\n             YAHOO.util.Dom.setStyle(this.div,\"opacity\",0);\n             this.div.id=\"notification-bar\";\n-            this.div.style.backgroundColor=\"#fff\";\n+            this.div.style.backgroundColor=this.defaultBackgroundColor;", "originalCommit": "e1d57f9837327ebcc4a78389c50662ec1f15b7e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAyNDI3MA==", "url": "https://github.com/jenkinsci/jenkins/pull/4610#discussion_r400024270", "bodyText": "Maybe you could add a second CSS class to the icons and make them. They feel a bit underwhelming right now, maybe you could try increasin the size to 2rem or 2.5rem", "author": "fqueiruga", "createdAt": "2020-03-30T08:48:08Z", "path": "war/src/main/webapp/scripts/hudson-behavior.js", "diffHunk": "@@ -2926,16 +2939,18 @@ var notificationBar = {\n         options = options || {}\n \n         this.init();\n-        this.div.style.height = this.div.style.lineHeight = options.height || \"40px\";\n+        this.div.style.height = this.div.style.lineHeight = options.height || \"3.5rem\";\n         this.div.style.display = \"block\";\n \n         if (options.icon)\n-            text = \"<img src='\"+rootURL+\"/images/24x24/\"+options.icon+\"'> \"+text;\n+            text = \"<svg viewBox='0 0 24 24' aria-hidden='' focusable='false' class='svg-icon' style='padding-bottom: 5px;'><use href='\"+rootURL+\"/images/material-icons/\"+options.icon+\"'></use></svg> <span>\"+text+\"</span>\";", "originalCommit": "e1d57f9837327ebcc4a78389c50662ec1f15b7e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1f62705f39b9b461beef4894a066e7c3d468c075", "url": "https://github.com/jenkinsci/jenkins/commit/1f62705f39b9b461beef4894a066e7c3d468c075", "message": "[JENKINS-61478] Adding icon colors matching material-ui alerts", "committedDate": "2020-03-31T08:13:27Z", "type": "commit"}, {"oid": "bfb257fa78c5442d818289a98c13e578e1809a21", "url": "https://github.com/jenkinsci/jenkins/commit/bfb257fa78c5442d818289a98c13e578e1809a21", "message": "[JENKINS-61478] Added default icon and icon color to alerts", "committedDate": "2020-03-31T08:48:21Z", "type": "commit"}, {"oid": "d7f6df0de99d316afc5f771f04a45b987da36f30", "url": "https://github.com/jenkinsci/jenkins/commit/d7f6df0de99d316afc5f771f04a45b987da36f30", "message": "[JENKINS-61478] Making alert icons bigger", "committedDate": "2020-03-31T08:56:29Z", "type": "commit"}, {"oid": "d66b3c1a2baf18c7897dd05d0e329886a8bfe2c7", "url": "https://github.com/jenkinsci/jenkins/commit/d66b3c1a2baf18c7897dd05d0e329886a8bfe2c7", "message": "[JENKINS-61478] Moving alert styles and animations to CSS", "committedDate": "2020-03-31T19:55:08Z", "type": "commit"}, {"oid": "200878089b19001eef4cb1696233a00420e1fef6", "url": "https://github.com/jenkinsci/jenkins/commit/200878089b19001eef4cb1696233a00420e1fef6", "message": "[JENKINS-61478] Also moving alert height and display to CSS", "committedDate": "2020-03-31T19:58:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTIwNzI3Ng==", "url": "https://github.com/jenkinsci/jenkins/pull/4610#discussion_r401207276", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                display: block;\n          \n          \n            \n                display: block;\n          \n          \n            \n                will-change: opacity;", "author": "fqueiruga", "createdAt": "2020-03-31T20:51:23Z", "path": "war/src/main/less/base/style.less", "diffHunk": "@@ -1596,6 +1596,77 @@ table.progress-bar.red td.progress-bar-done {\n     font-size: 1.75rem;\n     z-index:1000;\n     border-bottom: 1px solid black;\n+    line-height: 3.5rem;\n+    height: 3.5rem;\n+    display: block;", "originalCommit": "200878089b19001eef4cb1696233a00420e1fef6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTIwODQ4MQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4610#discussion_r401208481", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              -webkit-animation: fadein 1s linear 1 normal forwards;\n          \n          \n            \n              -webkit-animation: fadein 350ms ease-out 1 normal forwards;", "author": "fqueiruga", "createdAt": "2020-03-31T20:53:33Z", "path": "war/src/main/less/base/style.less", "diffHunk": "@@ -1596,6 +1596,77 @@ table.progress-bar.red td.progress-bar-done {\n     font-size: 1.75rem;\n     z-index:1000;\n     border-bottom: 1px solid black;\n+    line-height: 3.5rem;\n+    height: 3.5rem;\n+    display: block;\n+}\n+\n+#notification-bar .svg-icon {\n+  width: 35px;\n+  height: 35px;\n+  padding-bottom: 5px\n+}\n+\n+#notification-bar.notif-alert-default {\n+  background-color: @alert-default-bg-color;\n+  border-color: @alert-default-border-color;\n+  color: @alert-default-color;\n+  .svg-icon {\n+    color: @alert-default-icon-color;\n+  }\n+}\n+\n+#notification-bar.notif-alert-success {\n+  background-color: @alert-success-bg-color;\n+  border-color: @alert-success-border-color;\n+  color: @alert-success-color;\n+  .svg-icon {\n+    color: @alert-success-icon-color;\n+  }\n+}\n+\n+#notification-bar.notif-alert-warn {\n+  background-color: @alert-warn-bg-color;\n+  border-color: @alert-warn-border-color;\n+  color: @alert-warn-color;\n+  .svg-icon {\n+    color: @alert-warn-icon-color;\n+  }\n+}\n+\n+#notification-bar.notif-alert-err {\n+  background-color: @alert-err-bg-color;\n+  border-color: @alert-err-border-color;\n+  color: @alert-err-color;\n+  .svg-icon {\n+    color: @alert-err-icon-color;\n+  }\n+}\n+\n+#notification-bar.notif-alert-show {\n+  -webkit-animation: fadein 1s linear 1 normal forwards;", "originalCommit": "200878089b19001eef4cb1696233a00420e1fef6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTIwODY2OQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4610#discussion_r401208669", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              -webkit-animation: fadeout 0.7s linear 1 normal forwards;\n          \n          \n            \n              -webkit-animation: fadeout 350ms ease-in 1 normal forwards;", "author": "fqueiruga", "createdAt": "2020-03-31T20:53:51Z", "path": "war/src/main/less/base/style.less", "diffHunk": "@@ -1596,6 +1596,77 @@ table.progress-bar.red td.progress-bar-done {\n     font-size: 1.75rem;\n     z-index:1000;\n     border-bottom: 1px solid black;\n+    line-height: 3.5rem;\n+    height: 3.5rem;\n+    display: block;\n+}\n+\n+#notification-bar .svg-icon {\n+  width: 35px;\n+  height: 35px;\n+  padding-bottom: 5px\n+}\n+\n+#notification-bar.notif-alert-default {\n+  background-color: @alert-default-bg-color;\n+  border-color: @alert-default-border-color;\n+  color: @alert-default-color;\n+  .svg-icon {\n+    color: @alert-default-icon-color;\n+  }\n+}\n+\n+#notification-bar.notif-alert-success {\n+  background-color: @alert-success-bg-color;\n+  border-color: @alert-success-border-color;\n+  color: @alert-success-color;\n+  .svg-icon {\n+    color: @alert-success-icon-color;\n+  }\n+}\n+\n+#notification-bar.notif-alert-warn {\n+  background-color: @alert-warn-bg-color;\n+  border-color: @alert-warn-border-color;\n+  color: @alert-warn-color;\n+  .svg-icon {\n+    color: @alert-warn-icon-color;\n+  }\n+}\n+\n+#notification-bar.notif-alert-err {\n+  background-color: @alert-err-bg-color;\n+  border-color: @alert-err-border-color;\n+  color: @alert-err-color;\n+  .svg-icon {\n+    color: @alert-err-icon-color;\n+  }\n+}\n+\n+#notification-bar.notif-alert-show {\n+  -webkit-animation: fadein 1s linear 1 normal forwards;\n+}\n+\n+#notification-bar.notif-alert-clear {\n+  -webkit-animation: fadeout 0.7s linear 1 normal forwards;", "originalCommit": "200878089b19001eef4cb1696233a00420e1fef6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "194209309af220ab6c950b4781d6f73e53710365", "url": "https://github.com/jenkinsci/jenkins/commit/194209309af220ab6c950b4781d6f73e53710365", "message": "[JENKINS-61478] Fine-tune alert animations & add vendor prefixes", "committedDate": "2020-04-01T07:48:45Z", "type": "commit"}, {"oid": "19b67b9833dbc1b1e90b8064ff037f67cfee4509", "url": "https://github.com/jenkinsci/jenkins/commit/19b67b9833dbc1b1e90b8064ff037f67cfee4509", "message": "Merge remote-tracking branch 'upstream/master' into alert-banners", "committedDate": "2020-04-02T17:35:24Z", "type": "commit"}]}