{"pr_number": 4589, "pr_title": "List failed plugins on Installed tab", "pr_createdAt": "2020-03-16T22:21:04Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/4589", "timeline": [{"oid": "e97527d3989ce253867e764edf29d8e7741049f6", "url": "https://github.com/jenkinsci/jenkins/commit/e97527d3989ce253867e764edf29d8e7741049f6", "message": "List failed plugins on Installed tab", "committedDate": "2020-03-16T22:10:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQwMDQ0OQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4589#discussion_r393400449", "bodyText": "Shouldn't this be formatted the same as the other plugin names, including the hyperlink to the information about the plugin? i (Untested, me guessing that the formatting should be the same)\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    ${p.name}\n          \n          \n            \n                                  <a href=\"${p.url}\" target=\"_blank\" class=\"display-name\">\n          \n          \n            \n                                    ${p.updateInfo.displayName?:p.displayName}\n          \n          \n            \n                                  </a>\n          \n          \n            \n            <!--                        ${p.name} -->", "author": "MarkEWaite", "createdAt": "2020-03-17T01:44:50Z", "path": "core/src/main/resources/hudson/PluginManager/installed.jelly", "diffHunk": "@@ -161,16 +161,22 @@ THE SOFTWARE.\n                 </tr>\n               </j:forEach>\n               <!-- failed ones -->\n-              <j:forEach var=\"p\" items=\"${it.pluginManager.failedPlugins}\">\n+              <j:forEach var=\"p\" items=\"${it.failedPlugins}\">\n                 <tr class=\"hoverback\">\n-                  <td class=\"pane\" />\n+                  <td class=\"center pane enable\">\n+                    <input type=\"checkbox\" disabled=\"disabled\"/>\n+                  </td>\n                   <td class=\"pane\">\n-                    <h4 class=\"error\">Failed : ${p.name}</h4>\n-                    <div style=\"padding-left: 1em\">\n-                      <pre>${p.exceptionString}</pre>\n+                    <div>\n+                        ${p.name}", "originalCommit": "e97527d3989ce253867e764edf29d8e7741049f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQwNjkzNg==", "url": "https://github.com/jenkinsci/jenkins/pull/4589#discussion_r393406936", "bodyText": "Nice try. Been there too.\n\n  \n    \n      jenkins/core/src/main/java/hudson/PluginManager.java\n    \n    \n        Lines 2119 to 2131\n      in\n      07c48b0\n    \n    \n    \n    \n\n        \n          \n           public static final class FailedPlugin { \n        \n\n        \n          \n               public final String name; \n        \n\n        \n          \n               public final Exception cause; \n        \n\n        \n          \n            \n        \n\n        \n          \n               public FailedPlugin(String name, Exception cause) { \n        \n\n        \n          \n                   this.name = name; \n        \n\n        \n          \n                   this.cause = cause; \n        \n\n        \n          \n               } \n        \n\n        \n          \n            \n        \n\n        \n          \n               public String getExceptionString() { \n        \n\n        \n          \n                   return Functions.printThrowable(cause); \n        \n\n        \n          \n               } \n        \n\n        \n          \n           } \n        \n    \n  \n\n\nPlus tons of callers, some of which have nothing other than an .hpi file name and an exception:\n\n  \n    \n      jenkins/core/src/main/java/hudson/PluginManager.java\n    \n    \n        Lines 616 to 622\n      in\n      07c48b0\n    \n    \n    \n    \n\n        \n          \n           File arc = new File(rootDir, loaded + \".jpi\"); \n        \n\n        \n          \n           LOGGER.info(() -> \"Loading a detached plugin as a dependency: \" + arc); \n        \n\n        \n          \n           try { \n        \n\n        \n          \n               plugins.add(strategy.createPluginWrapper(arc)); \n        \n\n        \n          \n           } catch (IOException e) { \n        \n\n        \n          \n               failedPlugins.add(new FailedPlugin(arc.getName(), e)); \n        \n\n        \n          \n           } \n        \n    \n  \n\n\nit can probably be done, but quite a bit more effort than I want to spend here and now.", "author": "daniel-beck", "createdAt": "2020-03-17T02:12:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQwMDQ0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQxMjE5MQ==", "url": "https://github.com/jenkinsci/jenkins/pull/4589#discussion_r393412191", "bodyText": "Thanks for the reply.  Clear evidence that I didn't actually try to make it work.  What you've done is a significant improvement.  Layout that looks different than the rest is still dramatically better than complete absence of the plugin from the list.", "author": "MarkEWaite", "createdAt": "2020-03-17T02:34:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQwMDQ0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI1MDI5NA==", "url": "https://github.com/jenkinsci/jenkins/pull/4589#discussion_r394250294", "bodyText": "What are these multiple pane here?", "author": "amuniz", "createdAt": "2020-03-18T10:38:28Z", "path": "core/src/main/resources/hudson/PluginManager/installed.jelly", "diffHunk": "@@ -161,16 +161,22 @@ THE SOFTWARE.\n                 </tr>\n               </j:forEach>\n               <!-- failed ones -->\n-              <j:forEach var=\"p\" items=\"${it.pluginManager.failedPlugins}\">\n+              <j:forEach var=\"p\" items=\"${it.failedPlugins}\">\n                 <tr class=\"hoverback\">\n-                  <td class=\"pane\" />\n+                  <td class=\"center pane enable\">\n+                    <input type=\"checkbox\" disabled=\"disabled\"/>\n+                  </td>\n                   <td class=\"pane\">\n-                    <h4 class=\"error\">Failed : ${p.name}</h4>\n-                    <div style=\"padding-left: 1em\">\n-                      <pre>${p.exceptionString}</pre>\n+                    <div>\n+                        ${p.name}\n+                    </div>\n+                    <div class=\"alert alert-danger\">\n+                      <pre>${p.cause.message}</pre>\n                     </div>\n                   </td>\n                   <td class=\"pane\" />\n+                  <td class=\"pane\" />\n+                  <td class=\"pane\" />", "originalCommit": "e97527d3989ce253867e764edf29d8e7741049f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI1MjM4MA==", "url": "https://github.com/jenkinsci/jenkins/pull/4589#discussion_r394252380", "bodyText": "Unused columns (installed version and uninstall IIRC). These features are unsupported for these.", "author": "daniel-beck", "createdAt": "2020-03-18T10:41:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI1MDI5NA=="}], "type": "inlineReview"}]}