{"pr_number": 5030, "pr_title": "[JENKINS-60866] Un-inline LoadStatistics", "pr_createdAt": "2020-10-24T20:05:12Z", "pr_url": "https://github.com/jenkinsci/jenkins/pull/5030", "timeline": [{"oid": "f0244bd583d4f3ff16ec465e07e0b262662d8310", "url": "https://github.com/jenkinsci/jenkins/commit/f0244bd583d4f3ff16ec465e07e0b262662d8310", "message": "[JENKINS-60866] Un-inline LoadStatistics\n\n- Add tooltip for time scales\n- Adjust the width for some browsers", "committedDate": "2020-10-24T19:58:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMDczNjE2MA==", "url": "https://github.com/jenkinsci/jenkins/pull/5030#discussion_r610736160", "bodyText": "There should be an equals sign after ?type as well. Filed JENKINS-65336.", "author": "KalleOlaviNiemitalo", "createdAt": "2021-04-09T15:54:13Z", "path": "core/src/main/resources/hudson/model/LoadStatistics/resources.js", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * The MIT License\n+ *\n+ * Copyright (c) 2020, CloudBees, Inc.\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+(function(){\n+    document.addEventListener(\"DOMContentLoaded\", function() {\n+        var graphLocation = document.querySelector('.js-load-graph');\n+        if (graphLocation) {\n+            var type = graphLocation.getAttribute(\"data-graph-type\");\n+            var parentSelector = graphLocation.getAttribute(\"data-graph-parent-selector\");\n+            var baseUrl = graphLocation.getAttribute(\"data-graph-base-url\");\n+            var graphAlt = graphLocation.getAttribute(\"data-graph-alt\");\n+            \n+            var parent = document.querySelector(parentSelector);\n+            if (parent) {\n+                var availableWidth = parent.offsetWidth;\n+                var padding = 30;\n+                // for some browsers, the perfect width is not enough\n+                var quirkyBrowserAdjustment = 15;\n+                var graphWidth = availableWidth - padding - quirkyBrowserAdjustment;\n+\n+                // type in {sec10, min, hour}\n+                var graphUrl = baseUrl + \"/graph?type\" + type + \"&width=\" + graphWidth + \"&height=500\";", "originalCommit": "f0244bd583d4f3ff16ec465e07e0b262662d8310", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}