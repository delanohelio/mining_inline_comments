{"pr_number": 1753, "pr_title": "add more extension functions for dynamic-links-ktx", "pr_createdAt": "2020-07-02T19:16:53Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1753", "timeline": [{"oid": "ba8b39c9500c03d1a90df5d1b6d24a4c0bbe6da2", "url": "https://github.com/firebase/firebase-android-sdk/commit/ba8b39c9500c03d1a90df5d1b6d24a4c0bbe6da2", "message": "feat(fdl-ktx): add extension functions for Intent and Uri", "committedDate": "2020-07-02T18:33:05Z", "type": "commit"}, {"oid": "cb35293522047344701159d15e15d3f067e67870", "url": "https://github.com/firebase/firebase-android-sdk/commit/cb35293522047344701159d15e15d3f067e67870", "message": "feat(fdl-ktx): destructure ShortDynamicLink and PendingDyamicLinkData", "committedDate": "2020-07-02T18:45:02Z", "type": "commit"}, {"oid": "fe81b91a5ae6b6c262a68592f14073f9ad52e8cf", "url": "https://github.com/firebase/firebase-android-sdk/commit/fe81b91a5ae6b6c262a68592f14073f9ad52e8cf", "message": "refactor(fdl-ktx): shortLink <---> previewLink", "committedDate": "2020-07-02T19:14:37Z", "type": "commit"}, {"oid": "90c489eaeab9b6464f00b09377c0a2337966e27a", "url": "https://github.com/firebase/firebase-android-sdk/commit/90c489eaeab9b6464f00b09377c0a2337966e27a", "message": "Merge branch 'master' of https://github.com/firebase/firebase-android-sdk into rpf-fdl-ktx\n\n\u0001 Conflicts:\n\u0001\tfirebase-dynamic-links/ktx/src/main/kotlin/com/google/firebase/dynamiclinks/ktx/FirebaseDynamicLinks.kt", "committedDate": "2020-07-02T19:18:12Z", "type": "commit"}, {"oid": "d0e22fca906496f976f45371c086fe14b8f63fed", "url": "https://github.com/firebase/firebase-android-sdk/commit/d0e22fca906496f976f45371c086fe14b8f63fed", "message": "chore: generate api.txt", "committedDate": "2020-07-06T13:21:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA5MzAxNQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1753#discussion_r451093015", "bodyText": "I think this may be overkill, today you can do this with Firebase.dynamicLinks(app).getDynamicLink(intent),\nsame for the Uri extensions.\nwdyt?", "author": "vkryachko", "createdAt": "2020-07-07T19:27:51Z", "path": "firebase-dynamic-links/ktx/src/main/kotlin/com/google/firebase/dynamiclinks/ktx/FirebaseDynamicLinks.kt", "diffHunk": "@@ -117,6 +120,50 @@ fun FirebaseDynamicLinks.shortLinkAsync(suffix: Int, init: DynamicLink.Builder.(\n     return builder.buildShortDynamicLink(suffix)\n }\n \n+/**\n+ * Returns the [PendingDynamicLinkData] present in this [Intent], using the\n+ * [FirebaseDynamicLinks] instance of the given [FirebaseApp].\n+ */\n+fun Intent.getFirebaseDynamicLink(firebaseApp: FirebaseApp): Task<PendingDynamicLinkData> {", "originalCommit": "d0e22fca906496f976f45371c086fe14b8f63fed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE2NDg1Mg==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1753#discussion_r451164852", "bodyText": "@vkryachko The initial motivation for these functions was to improve readability the same way Android KTX does (e.g. \"https://firebase.google.com\".toUri() instead of Uri.parse(\"https://firebase.google.com\"))\nI then realized developers may want to use their own FirebaseApp instance, and passing it as argument seemed like the only way. But I now realize it totally defeats the initial \"improved readability\" purpose.\nMaybe we should drop the extensions that take FirebaseApp as argument, but keep the ones with no arguments?\nWhat do you say?", "author": "thatfiredev", "createdAt": "2020-07-07T21:51:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA5MzAxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc0NTQ2MA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1753#discussion_r451745460", "bodyText": "hm, it's hard to objectively judge the usefulness of \"https://firebase.google.com\".toUri(), I guess it is useful if it's included in android ktx.\nOne difference it has from your proposal though is that intent.getDynamicLink() returns a task indicating not a trivial transformation but some IO heave work. In this regard I would be hesitant to optimize for conciseness.\nAdditionally, in the case of the default app, Firebase.dynamicLinks.getDynamicLink(intent) does not look much less readable to me.", "author": "vkryachko", "createdAt": "2020-07-08T18:29:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA5MzAxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc4Mzk1Ng==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1753#discussion_r451783956", "bodyText": "@vkryachko I totally understand your points. I'll remove these extensions and keep the destructuring declarations.", "author": "thatfiredev", "createdAt": "2020-07-08T19:42:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA5MzAxNQ=="}], "type": "inlineReview"}, {"oid": "d6f118f6535b0acd1b0900e1209a1740b2521a5c", "url": "https://github.com/firebase/firebase-android-sdk/commit/d6f118f6535b0acd1b0900e1209a1740b2521a5c", "message": "refactor: remove Intent and Uri getFirebaseDynamicLinks extensions", "committedDate": "2020-07-09T09:47:00Z", "type": "commit"}, {"oid": "4a4ee1c1ff2f2e7fb9302c6c5b21f159f48273c4", "url": "https://github.com/firebase/firebase-android-sdk/commit/4a4ee1c1ff2f2e7fb9302c6c5b21f159f48273c4", "message": "style: format code using ktlint", "committedDate": "2020-07-09T13:07:01Z", "type": "commit"}, {"oid": "0d462a7a32891fb2584f437bb02f17e5baa725f8", "url": "https://github.com/firebase/firebase-android-sdk/commit/0d462a7a32891fb2584f437bb02f17e5baa725f8", "message": "test(fdl-ktx): add tests for the destructuring declarations", "committedDate": "2020-07-09T17:36:50Z", "type": "commit"}, {"oid": "a1f2dfbac7ce9971d3a9048cd6a515c6b5140c4b", "url": "https://github.com/firebase/firebase-android-sdk/commit/a1f2dfbac7ce9971d3a9048cd6a515c6b5140c4b", "message": "Merge branch 'master' of https://github.com/firebase/firebase-android-sdk into rpf-fdl-ktx\n\n\u0001 Conflicts:\n\u0001\tfirebase-dynamic-links/ktx/src/test/kotlin/com/google/firebase/dynamiclinks/ktx/DynamicLinksTests.kt", "committedDate": "2020-07-09T17:41:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzk2NDEzMQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1753#discussion_r467964131", "bodyText": "Add a period at the end of the sentence, here and below.", "author": "rlazo", "createdAt": "2020-08-10T14:58:04Z", "path": "firebase-dynamic-links/ktx/src/main/kotlin/com/google/firebase/dynamiclinks/ktx/FirebaseDynamicLinks.kt", "diffHunk": "@@ -117,6 +118,24 @@ fun FirebaseDynamicLinks.shortLinkAsync(suffix: Int, init: DynamicLink.Builder.(\n     return builder.buildShortDynamicLink(suffix)\n }\n \n+/** Destructuring declaration for [ShortDynamicLink] to provide shortLink */", "originalCommit": "a1f2dfbac7ce9971d3a9048cd6a515c6b5140c4b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9b84fd356b1939b3d117ee27b74510689a9f4687", "url": "https://github.com/firebase/firebase-android-sdk/commit/9b84fd356b1939b3d117ee27b74510689a9f4687", "message": "address review feedback", "committedDate": "2020-08-10T15:23:06Z", "type": "commit"}]}