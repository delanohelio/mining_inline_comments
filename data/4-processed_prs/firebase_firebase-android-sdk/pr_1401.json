{"pr_number": 1401, "pr_title": "Update spec tests from changes in the firebase-js-sdk respository", "pr_createdAt": "2020-03-30T20:21:24Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1401", "timeline": [{"oid": "7ee6a6d9fbed8729f73fb1cde877e189725a46d3", "url": "https://github.com/firebase/firebase-android-sdk/commit/7ee6a6d9fbed8729f73fb1cde877e189725a46d3", "message": "Update spec tests", "committedDate": "2020-03-30T19:50:46Z", "type": "commit"}, {"oid": "9b18aa73fafbe068838d2c389d9fb772e4b13516", "url": "https://github.com/firebase/firebase-android-sdk/commit/9b18aa73fafbe068838d2c389d9fb772e4b13516", "message": "Handle the rename of expectedLimboDocs to expectedActiveLimboDocs", "committedDate": "2020-03-30T20:11:21Z", "type": "commit"}, {"oid": "03107cb244b5fecc945e400566a46282d3ee703a", "url": "https://github.com/firebase/firebase-android-sdk/commit/03107cb244b5fecc945e400566a46282d3ee703a", "message": "Apply code formatting changes", "committedDate": "2020-03-30T20:18:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUyMzcwMg==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1401#discussion_r400523702", "bodyText": "It looks like the generator isn't generating a stable order among client indexes?", "author": "wilhuff", "createdAt": "2020-03-30T22:07:51Z", "path": "firebase-firestore/src/test/resources/json/limbo_spec_test.json", "diffHunk": "@@ -3638,15 +3627,21 @@\n                   \"orderBys\": []\n                 }\n               ],\n-              \"resumeToken\": \"\"\n+              \"resumeToken\": \"resume-token-1000000\"\n             }\n           }\n         },\n-        \"clientIndex\": 0\n+        \"clientIndex\": 1", "originalCommit": "03107cb244b5fecc945e400566a46282d3ee703a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg5NjE0Mg==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1401#discussion_r400896142", "bodyText": "I'll look into this and reply back.  There must have been a change between now and November 2019 (4 months ago) that affected this as the spec tests have not been regenerated since then.", "author": "dconeybe", "createdAt": "2020-03-31T13:04:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUyMzcwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk2MDY5MA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1401#discussion_r400960690", "bodyText": "Update: The culprit is firebase/firebase-js-sdk#2693, discovered by performing a bisection.  I'm continuing to investigate.", "author": "dconeybe", "createdAt": "2020-03-31T14:31:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUyMzcwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk2Mzg5Mg==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1401#discussion_r400963892", "bodyText": "It looks like the change in the spec test is expected; however, in the culprit PR the spec tests for Android (and probably iOS) were not updated accordingly.  I will create a separate PR to bring the spec tests up-to-date from the PR so that this PR can encompass only a single update to the spec tests.", "author": "dconeybe", "createdAt": "2020-03-31T14:35:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUyMzcwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTA1NjY0OQ==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1401#discussion_r401056649", "bodyText": "I've created a PR, firebase/firebase-js-sdk#2843, to produce stable JSON from generate_spec_json.js.  I will hold off merging this PR until that PR is resolved so that a commit with a noisy diff in the spec tests can be limited to one commit.", "author": "dconeybe", "createdAt": "2020-03-31T16:39:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUyMzcwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjcwNzU5Nw==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1401#discussion_r402707597", "bodyText": "Update: commit 19ab883 was added to this PR with the stable JSON.", "author": "dconeybe", "createdAt": "2020-04-03T02:51:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUyMzcwMg=="}], "type": "inlineReview"}, {"oid": "19ab88375cf8f5f97fe1ee81115daa7fae4a43a8", "url": "https://github.com/firebase/firebase-android-sdk/commit/19ab88375cf8f5f97fe1ee81115daa7fae4a43a8", "message": "Regenerate spec tests with stable JSON.\n\nThe PR https://github.com/firebase/firebase-js-sdk/pull/2843 caused stable JSON to be generated.", "committedDate": "2020-04-03T02:42:13Z", "type": "commit"}, {"oid": "459eaa84e7efc8ac130ee8ad6097086ef18aa34a", "url": "https://github.com/firebase/firebase-android-sdk/commit/459eaa84e7efc8ac130ee8ad6097086ef18aa34a", "message": "Merge remote-tracking branch 'origin/master' into UpdateSpecTests", "committedDate": "2020-04-03T02:49:40Z", "type": "commit"}]}