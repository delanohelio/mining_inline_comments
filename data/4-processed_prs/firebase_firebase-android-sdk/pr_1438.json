{"pr_number": 1438, "pr_title": "Remove a hard assert that no longer holds due to mirror queries.", "pr_createdAt": "2020-04-08T19:23:10Z", "pr_url": "https://github.com/firebase/firebase-android-sdk/pull/1438", "timeline": [{"oid": "f52f750a4b519c191fa78d293db578545700cfaf", "url": "https://github.com/firebase/firebase-android-sdk/commit/f52f750a4b519c191fa78d293db578545700cfaf", "message": "Remove a hard assert that no longer holds due to mirror queiries.", "committedDate": "2020-04-08T19:21:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg0NzE0Mg==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1438#discussion_r405847142", "bodyText": "I believe the reason that this assert was here is that this method does not call updateTrackedLimboDocuments.\nSo, we either need to convince ourselves that any limbo document encountered here will already be in limbo thanks to the originating query (and document this assumption) or call updateTrackedLimboDocuments.", "author": "schmidt-sebastian", "createdAt": "2020-04-08T22:17:57Z", "path": "firebase-firestore/src/main/java/com/google/firebase/firestore/core/SyncEngine.java", "diffHunk": "@@ -220,9 +220,6 @@ private ViewSnapshot initializeViewAndComputeSnapshot(Query query, int targetId)\n     View view = new View(query, queryResult.getRemoteKeys());\n     View.DocumentChanges viewDocChanges = view.computeDocChanges(queryResult.getDocuments());\n     ViewChange viewChange = view.applyChanges(viewDocChanges, synthesizedCurrentChange);\n-    hardAssert(", "originalCommit": "f52f750a4b519c191fa78d293db578545700cfaf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg2ODAxOA==", "url": "https://github.com/firebase/firebase-android-sdk/pull/1438#discussion_r405868018", "bodyText": "Added a call to updateTrackedLimboDocuments", "author": "wu-hui", "createdAt": "2020-04-08T23:16:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg0NzE0Mg=="}], "type": "inlineReview"}, {"oid": "de2c8dd7e0c6ca6166c161f8ddcfd5b5596ba8f3", "url": "https://github.com/firebase/firebase-android-sdk/commit/de2c8dd7e0c6ca6166c161f8ddcfd5b5596ba8f3", "message": "Add a call to updateTrackedLimbo instead.", "committedDate": "2020-04-08T23:09:47Z", "type": "commit"}, {"oid": "1c500fa547038f4e56d21ab2047e90b19a00b8d0", "url": "https://github.com/firebase/firebase-android-sdk/commit/1c500fa547038f4e56d21ab2047e90b19a00b8d0", "message": "Add TODO.", "committedDate": "2020-04-08T23:15:53Z", "type": "commit"}, {"oid": "8d69171fc08f2b1ea9a7910d408356b04a18c188", "url": "https://github.com/firebase/firebase-android-sdk/commit/8d69171fc08f2b1ea9a7910d408356b04a18c188", "message": "Merge branch 'master' into wuandy/LessHardAssert", "committedDate": "2020-04-09T23:46:06Z", "type": "commit"}]}