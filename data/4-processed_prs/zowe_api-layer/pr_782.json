{"pr_number": 782, "pr_title": "Carsoncook/gh774/assert log messages", "pr_createdAt": "2020-08-12T19:04:32Z", "pr_url": "https://github.com/zowe/api-layer/pull/782", "timeline": [{"oid": "e46646c422b83107687daffb5b021f625873e69a", "url": "https://github.com/zowe/api-layer/commit/e46646c422b83107687daffb5b021f625873e69a", "message": "Add LogMessageTracker and unit tests\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-12T16:45:03Z", "type": "commit"}, {"oid": "ce62bc0650cf33b40136f3c065a322701cf6c6b8", "url": "https://github.com/zowe/api-layer/commit/ce62bc0650cf33b40136f3c065a322701cf6c6b8", "message": "Add LogMessageTracker support for regex\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-12T17:05:20Z", "type": "commit"}, {"oid": "d4eca5e5d08e1d095d2013f972d80ea1ac81193e", "url": "https://github.com/zowe/api-layer/commit/d4eca5e5d08e1d095d2013f972d80ea1ac81193e", "message": "Fix handling for formatted log messages\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-12T17:21:50Z", "type": "commit"}, {"oid": "27406965cd318be2fad5ab95ba437714e1d2cc9e", "url": "https://github.com/zowe/api-layer/commit/27406965cd318be2fad5ab95ba437714e1d2cc9e", "message": "Fix raw string used to search log messages\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-12T18:17:44Z", "type": "commit"}, {"oid": "e16175758762e1dc967ea262b956fb8a9c95a60a", "url": "https://github.com/zowe/api-layer/commit/e16175758762e1dc967ea262b956fb8a9c95a60a", "message": "Add method to filter by log level\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-12T18:20:08Z", "type": "commit"}, {"oid": "687528a38c8de962718519cfbc7fe0e82b753ba5", "url": "https://github.com/zowe/api-layer/commit/687528a38c8de962718519cfbc7fe0e82b753ba5", "message": "Add logging assertions to config validator unit tests\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-12T18:35:16Z", "type": "commit"}, {"oid": "7a51515f001faffe0935836cee7c6e709f1afbfb", "url": "https://github.com/zowe/api-layer/commit/7a51515f001faffe0935836cee7c6e709f1afbfb", "message": "Fix homePageUrl warning check\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-12T18:35:47Z", "type": "commit"}, {"oid": "72edbcfea2338e6a570e6c2c4fc05667abd72133", "url": "https://github.com/zowe/api-layer/commit/72edbcfea2338e6a570e6c2c4fc05667abd72133", "message": "Fix sonarcloud smells\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-12T19:21:03Z", "type": "commit"}, {"oid": "604d588ac6d0ef1b9b7e3dad0ee49f97a7d8f918", "url": "https://github.com/zowe/api-layer/commit/604d588ac6d0ef1b9b7e3dad0ee49f97a7d8f918", "message": "Add more coverage in LogMessageTrackerTest\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-12T19:28:52Z", "type": "commit"}, {"oid": "f8015d6316a5cfe732452743c1a65512ffb6259a", "url": "https://github.com/zowe/api-layer/commit/f8015d6316a5cfe732452743c1a65512ffb6259a", "message": "Merge branch 'master' into carsoncook/gh774/assertLogMessages", "committedDate": "2020-08-13T06:27:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc1MDU4NQ==", "url": "https://github.com/zowe/api-layer/pull/782#discussion_r469750585", "bodyText": "We are trying to keep the given_when_then structure in the test names, would it be possible to have it here as well?", "author": "balhar-jakub", "createdAt": "2020-08-13T07:27:18Z", "path": "apiml-utility/src/test/java/org/zowe/apiml/product/logging/LogMessageTrackerTest.java", "diffHunk": "@@ -0,0 +1,112 @@\n+/*\n+ * This program and the accompanying materials are made available under the terms of the\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-v20.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Copyright Contributors to the Zowe Project.\n+ */\n+\n+package org.zowe.apiml.product.logging;\n+\n+import ch.qos.logback.classic.Level;\n+import ch.qos.logback.classic.Logger;\n+import ch.qos.logback.classic.spi.ILoggingEvent;\n+import org.junit.jupiter.api.AfterEach;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.regex.Pattern;\n+\n+import static junit.framework.TestCase.assertFalse;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+class LogMessageTrackerTest {\n+    private static final String LOG_MESSAGE = \"This is a log message.\";\n+    private static final String NOT_LOGGED_MESSAGE = \"This is not a log message.\";\n+\n+    private static final Pattern MESSAGE_REGEX = Pattern.compile(\"^This.*\");\n+    private static final Pattern NOT_MESSAGE_REGEX = Pattern.compile(\"^dummy\");\n+\n+    private final LogMessageTracker logMessageTracker = new LogMessageTracker(this.getClass());\n+    private final Logger log = (Logger) LoggerFactory.getLogger(this.getClass());\n+\n+    @BeforeEach\n+    void setup() {\n+        logMessageTracker.startTracking();\n+        log.trace(LOG_MESSAGE);\n+        log.debug(LOG_MESSAGE);\n+        log.info(LOG_MESSAGE);\n+        log.warn(LOG_MESSAGE);\n+        log.error(LOG_MESSAGE);\n+    }\n+\n+    @AfterEach\n+    void cleanUp() {\n+        logMessageTracker.stopTracking();\n+    }\n+\n+    @Test\n+    void testSearch() {", "originalCommit": "f8015d6316a5cfe732452743c1a65512ffb6259a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkzNzU0Ng==", "url": "https://github.com/zowe/api-layer/pull/782#discussion_r469937546", "bodyText": "Yes I will change them.", "author": "CarsonCook", "createdAt": "2020-08-13T13:08:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc1MDU4NQ=="}], "type": "inlineReview"}, {"oid": "87dda51a1c92879b19a6b7f30a5a5e36439df41f", "url": "https://github.com/zowe/api-layer/commit/87dda51a1c92879b19a6b7f30a5a5e36439df41f", "message": "Change test names to given when then\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>", "committedDate": "2020-08-13T13:50:11Z", "type": "commit"}, {"oid": "eb958786d8e1991f09ad58e10f15d6e3ec3275d1", "url": "https://github.com/zowe/api-layer/commit/eb958786d8e1991f09ad58e10f15d6e3ec3275d1", "message": "Merge branch 'carsoncook/gh774/assertLogMessages' of github.com:zowe/api-layer into carsoncook/gh774/assertLogMessages\n\nSigned-off-by:  <>", "committedDate": "2020-08-13T13:50:19Z", "type": "commit"}]}