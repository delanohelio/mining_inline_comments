{"pr_number": 610, "pr_title": "Set up remote cache for CI environment", "pr_createdAt": "2020-04-20T06:52:06Z", "pr_url": "https://github.com/zowe/api-layer/pull/610", "timeline": [{"oid": "d554ae15061ce242736d92d8c97704300a143045", "url": "https://github.com/zowe/api-layer/commit/d554ae15061ce242736d92d8c97704300a143045", "message": "Set up remote build cache.\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T08:13:35Z", "type": "commit"}, {"oid": "b5b5ad2eed1fed9af2d7478419c4831f7918c4e5", "url": "https://github.com/zowe/api-layer/commit/b5b5ad2eed1fed9af2d7478419c4831f7918c4e5", "message": "Allow cache on NPM tasks.\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T08:34:44Z", "type": "commit"}, {"oid": "472a092d3ccb792e4ea724e3c9fdc2d3807102ba", "url": "https://github.com/zowe/api-layer/commit/472a092d3ccb792e4ea724e3c9fdc2d3807102ba", "message": "Understand the issues with pnpmInstall and bundle.\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T10:18:14Z", "type": "commit"}, {"oid": "155d38cc4bc47f4d14d630f85ab4dc38656f6b7d", "url": "https://github.com/zowe/api-layer/commit/155d38cc4bc47f4d14d630f85ab4dc38656f6b7d", "message": "Properly bundle UI application\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T11:23:39Z", "type": "commit"}, {"oid": "86b033ec83ee2dcc8109eab7842c283c94b20677", "url": "https://github.com/zowe/api-layer/commit/86b033ec83ee2dcc8109eab7842c283c94b20677", "message": "Clean unused dev dependencies\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T11:32:39Z", "type": "commit"}, {"oid": "b88d9adb0b0eeab61e058922cb464a22bde0c507", "url": "https://github.com/zowe/api-layer/commit/b88d9adb0b0eeab61e058922cb464a22bde0c507", "message": "Try adding parallel\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T12:24:43Z", "type": "commit"}, {"oid": "58c227342b05e3d8740c0f694ed8c11187639937", "url": "https://github.com/zowe/api-layer/commit/58c227342b05e3d8740c0f694ed8c11187639937", "message": "Allow caching for tests\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T12:58:53Z", "type": "commit"}, {"oid": "f9d5d6ce5551b809d2eae7bd171e085423ca5963", "url": "https://github.com/zowe/api-layer/commit/f9d5d6ce5551b809d2eae7bd171e085423ca5963", "message": "Allow caching for tests\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T13:03:03Z", "type": "commit"}, {"oid": "6bcf83e4d193ffea1b9669c650924cb1171b3bf7", "url": "https://github.com/zowe/api-layer/commit/6bcf83e4d193ffea1b9669c650924cb1171b3bf7", "message": "Install for all the components needing it\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T13:10:13Z", "type": "commit"}, {"oid": "4398f3b429ae7b187b8c51b8b3e185d50452d411", "url": "https://github.com/zowe/api-layer/commit/4398f3b429ae7b187b8c51b8b3e185d50452d411", "message": "Notes for future implementation when the Node is ready\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-03-05T13:45:40Z", "type": "commit"}, {"oid": "bf5cd855baec5bcabe0ee7e468dd4f63f656b6a7", "url": "https://github.com/zowe/api-layer/commit/bf5cd855baec5bcabe0ee7e468dd4f63f656b6a7", "message": "Merge branch 'master' into private/jb892003/remote_cache_experiments\n\n# Conflicts:\n#\tapi-catalog-services/build.gradle\n#\tapi-catalog-ui/build.gradle\n#\tapi-catalog-ui/frontend/package.json\n#\tapi-catalog-ui/frontend/pnpm-lock.yaml\n#\tdiscoverable-client/build.gradle\n#\tdiscovery-service/build.gradle\n#\tgateway-service/build.gradle", "committedDate": "2020-04-20T06:19:02Z", "type": "commit"}, {"oid": "8c99b2b26ebdaea9a8eccdacdc186cefd9faf2a8", "url": "https://github.com/zowe/api-layer/commit/8c99b2b26ebdaea9a8eccdacdc186cefd9faf2a8", "message": "Push the results from CI in remote build cache.\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-04-20T06:50:51Z", "type": "commit"}, {"oid": "bcb293d888759ff809ed0bb6af1c55719416372d", "url": "https://github.com/zowe/api-layer/commit/bcb293d888759ff809ed0bb6af1c55719416372d", "message": "Populate the Artifactory credentials from environment values\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-04-20T07:00:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE0MjUwMw==", "url": "https://github.com/zowe/api-layer/pull/610#discussion_r411142503", "bodyText": "Do we want to scan and publish scan on every build? We've done before as well, so i can approve.", "author": "jandadav", "createdAt": "2020-04-20T07:06:09Z", "path": "Jenkinsfile", "diffHunk": "@@ -88,8 +88,10 @@ pipeline {\n         stage('Build and unit test with coverage') {\n             steps {\n                 timeout(time: 20, unit: 'MINUTES') {\n-                    withSonarQubeEnv('sonarcloud-server') {\n-                        sh './gradlew --info --scan clean build coverage sonarqube -Psonar.host.url=${SONAR_HOST_URL} -Dsonar.login=${SONAR_AUTH_TOKEN}'\n+                    withCredentials([usernamePassword(credentialsId: ARTIFACTORY_CREDENTIALS_ID, usernameVariable: 'ARTIFACTORY_USERNAME', passwordVariable: 'ARTIFACTORY_PASSWORD')]) {\n+                        withSonarQubeEnv('sonarcloud-server') {\n+                            sh './gradlew --info --scan clean build coverage sonarqube -Psonar.host.url=${SONAR_HOST_URL} -Dsonar.login=${SONAR_AUTH_TOKEN} -Dgradle.cache.push=true -Dartifactory_user=${ARTIFACTORY_USERNAME} -Dartifactory_password=${ARTIFACTORY_PASSWORD}'", "originalCommit": "8c99b2b26ebdaea9a8eccdacdc186cefd9faf2a8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE0Mjk2Nw==", "url": "https://github.com/zowe/api-layer/pull/610#discussion_r411142967", "bodyText": "As we want to get some baseline on what is going on and what is the effectivity of this change, then for now yes", "author": "balhar-jakub", "createdAt": "2020-04-20T07:07:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE0MjUwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE0NDY0MQ==", "url": "https://github.com/zowe/api-layer/pull/610#discussion_r411144641", "bodyText": "And it is there as a current state, so this isn't a change here. Here I am only adding the environment for the remote cache.", "author": "balhar-jakub", "createdAt": "2020-04-20T07:10:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE0MjUwMw=="}], "type": "inlineReview"}, {"oid": "d32a9a24d1aa07d2b78adf5aa6ee0cf84df61713", "url": "https://github.com/zowe/api-layer/commit/d32a9a24d1aa07d2b78adf5aa6ee0cf84df61713", "message": "Don't push for cache of unit testing\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-04-20T07:08:53Z", "type": "commit"}, {"oid": "43c28fb918b8d96625509c03a0b21f5ad5d13dc3", "url": "https://github.com/zowe/api-layer/commit/43c28fb918b8d96625509c03a0b21f5ad5d13dc3", "message": "Merge branch 'master' into private/jb892003/remote_cache_experiments", "committedDate": "2020-04-20T07:13:20Z", "type": "commit"}, {"oid": "ddec047ab482559f365fed8e47827f86d99c2cbb", "url": "https://github.com/zowe/api-layer/commit/ddec047ab482559f365fed8e47827f86d99c2cbb", "message": "Show credentials.\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-04-20T07:32:34Z", "type": "commit"}, {"oid": "c8998848806e8a5f15e45f440ef28a3a5a0c5390", "url": "https://github.com/zowe/api-layer/commit/c8998848806e8a5f15e45f440ef28a3a5a0c5390", "message": "Merge remote-tracking branch 'origin/private/jb892003/remote_cache_experiments' into private/jb892003/remote_cache_experiments", "committedDate": "2020-04-20T07:33:17Z", "type": "commit"}, {"oid": "617daa53a7d864c5123de0e762276c53d911bc13", "url": "https://github.com/zowe/api-layer/commit/617daa53a7d864c5123de0e762276c53d911bc13", "message": "Properly override Gradle properties\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>", "committedDate": "2020-04-20T08:51:54Z", "type": "commit"}]}