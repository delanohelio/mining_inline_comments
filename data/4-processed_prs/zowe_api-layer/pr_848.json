{"pr_number": 848, "pr_title": "Zss integration with apiml", "pr_createdAt": "2020-09-22T19:02:03Z", "pr_url": "https://github.com/zowe/api-layer/pull/848", "timeline": [{"oid": "287e7690b463277da8be9bdf3057141f1c2141f7", "url": "https://github.com/zowe/api-layer/commit/287e7690b463277da8be9bdf3057141f1c2141f7", "message": "external cert mapper\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-18T12:03:19Z", "type": "commit"}, {"oid": "617cd3e2c91020e1ece756f24e90ec3865f87f25", "url": "https://github.com/zowe/api-layer/commit/617cd3e2c91020e1ece756f24e90ec3865f87f25", "message": "add more unit test for ZaasJwtService\n\nSigned-off-by: at670475 <andrea.tabone@broadcom.com>", "committedDate": "2020-09-18T14:05:46Z", "type": "commit"}, {"oid": "03340fd6e1ec5aca48e921b831facc7c64649896", "url": "https://github.com/zowe/api-layer/commit/03340fd6e1ec5aca48e921b831facc7c64649896", "message": "use appropriate x509mapper\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-21T09:12:49Z", "type": "commit"}, {"oid": "fac53d9a2ab643e080cd6eee974a8a529d6059d3", "url": "https://github.com/zowe/api-layer/commit/fac53d9a2ab643e080cd6eee974a8a529d6059d3", "message": "Merge remote-tracking branch 'origin/zss_integration_with_apiml' into zss_integration_with_apiml", "committedDate": "2020-09-21T09:13:00Z", "type": "commit"}, {"oid": "b282523164dd7ea6a8dfe5608d52fcc31bf19486", "url": "https://github.com/zowe/api-layer/commit/b282523164dd7ea6a8dfe5608d52fcc31bf19486", "message": "Merge branch 'master' into zss_integration_with_apiml", "committedDate": "2020-09-22T07:52:46Z", "type": "commit"}, {"oid": "f609b54308cc5d54cbaac7933b970c63e66cc2c2", "url": "https://github.com/zowe/api-layer/commit/f609b54308cc5d54cbaac7933b970c63e66cc2c2", "message": "parametrized zss url\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-22T08:34:19Z", "type": "commit"}, {"oid": "18a315bd7219df0d5efff025369aff25d69377b1", "url": "https://github.com/zowe/api-layer/commit/18a315bd7219df0d5efff025369aff25d69377b1", "message": "Merge remote-tracking branch 'origin/zss_integration_with_apiml' into zss_integration_with_apiml", "committedDate": "2020-09-22T08:34:42Z", "type": "commit"}, {"oid": "ce25929482c964ff565536a79ecb66392bde9cec", "url": "https://github.com/zowe/api-layer/commit/ce25929482c964ff565536a79ecb66392bde9cec", "message": "Refactoring\n\nSigned-off-by: at670475 <andrea.tabone@broadcom.com>", "committedDate": "2020-09-22T11:32:02Z", "type": "commit"}, {"oid": "fbd1d64821073ca9ab59055d5799dea9814cd5e7", "url": "https://github.com/zowe/api-layer/commit/fbd1d64821073ca9ab59055d5799dea9814cd5e7", "message": "Add javadoc and change the URL for the certificate mapping\n\nSigned-off-by: at670475 <andrea.tabone@broadcom.com>", "committedDate": "2020-09-22T12:19:06Z", "type": "commit"}, {"oid": "5616dae28def8b25399bc85d023e82ce7129e284", "url": "https://github.com/zowe/api-layer/commit/5616dae28def8b25399bc85d023e82ce7129e284", "message": "run logouts last\n\nSigned-off-by: jandadav <janda.david@gmail.com>", "committedDate": "2020-09-22T12:44:45Z", "type": "commit"}, {"oid": "dba8b052652513899458dbe0ac023739b7812d8a", "url": "https://github.com/zowe/api-layer/commit/dba8b052652513899458dbe0ac023739b7812d8a", "message": "fix field names\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-22T18:59:51Z", "type": "commit"}, {"oid": "b6191f620b4e00dd1cc0e653dc199bd4c938ba92", "url": "https://github.com/zowe/api-layer/commit/b6191f620b4e00dd1cc0e653dc199bd4c938ba92", "message": "trim trailing spaces from usermap response\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-23T06:31:38Z", "type": "commit"}, {"oid": "0e5fafbeb530f8be7e533336140bcc51d1385930", "url": "https://github.com/zowe/api-layer/commit/0e5fafbeb530f8be7e533336140bcc51d1385930", "message": "add login tests as @AuthenticationTest\n\nSigned-off-by: jandadav <janda.david@gmail.com>", "committedDate": "2020-09-23T06:40:06Z", "type": "commit"}, {"oid": "3f7a75b86eccdaa28e5e11c38226544eb47a397e", "url": "https://github.com/zowe/api-layer/commit/3f7a75b86eccdaa28e5e11c38226544eb47a397e", "message": "revert changes\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-23T06:45:16Z", "type": "commit"}, {"oid": "5bfccb4763812ccd36bc9f88f5fa02abdab32314", "url": "https://github.com/zowe/api-layer/commit/5bfccb4763812ccd36bc9f88f5fa02abdab32314", "message": "Merge branch 'master' into zss_integration_with_apiml", "committedDate": "2020-09-23T08:09:26Z", "type": "commit"}, {"oid": "f5f2c321f29e2ca0bf9a33534a097b35b9af2e71", "url": "https://github.com/zowe/api-layer/commit/f5f2c321f29e2ca0bf9a33534a097b35b9af2e71", "message": "remove logouts except for authentication tests\n\nSigned-off-by: jandadav <janda.david@gmail.com>", "committedDate": "2020-09-23T10:44:49Z", "type": "commit"}, {"oid": "0d60adb5bcb5ef722fdf0c11873b32479dfb0459", "url": "https://github.com/zowe/api-layer/commit/0d60adb5bcb5ef722fdf0c11873b32479dfb0459", "message": "Merge branch 'master' into private/dj/run-logout-it-last", "committedDate": "2020-09-23T13:28:05Z", "type": "commit"}, {"oid": "23336c587a1fcd944b785581f97bc8c895c54ce1", "url": "https://github.com/zowe/api-layer/commit/23336c587a1fcd944b785581f97bc8c895c54ce1", "message": "external mapper unit tests\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-23T13:55:19Z", "type": "commit"}, {"oid": "5fbe216a9cf1ce9a146ab547f9671474143cfd75", "url": "https://github.com/zowe/api-layer/commit/5fbe216a9cf1ce9a146ab547f9671474143cfd75", "message": "Merge branch 'private/dj/run-logout-it-last' into zss_integration_with_apiml", "committedDate": "2020-09-23T13:55:32Z", "type": "commit"}, {"oid": "9a9a6ebd85b5f11770b7542b903459743c901e97", "url": "https://github.com/zowe/api-layer/commit/9a9a6ebd85b5f11770b7542b903459743c901e97", "message": "test omitting specific user\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-23T15:05:41Z", "type": "commit"}, {"oid": "69fb6099557fc141d55fb6b6d4a6f5f9a05051d4", "url": "https://github.com/zowe/api-layer/commit/69fb6099557fc141d55fb6b6d4a6f5f9a05051d4", "message": "remove body check\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-23T15:19:41Z", "type": "commit"}, {"oid": "19bd1f6463fe6ae18e488769739faed427432c7e", "url": "https://github.com/zowe/api-layer/commit/19bd1f6463fe6ae18e488769739faed427432c7e", "message": ".\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-23T16:26:15Z", "type": "commit"}, {"oid": "5d36881fa4b688b2532d1eb451309bc2fac00492", "url": "https://github.com/zowe/api-layer/commit/5d36881fa4b688b2532d1eb451309bc2fac00492", "message": "external mapper unit tests\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-24T07:21:44Z", "type": "commit"}, {"oid": "2c33dc3804442b01e62251f13d182a944e876725", "url": "https://github.com/zowe/api-layer/commit/2c33dc3804442b01e62251f13d182a944e876725", "message": "Merge branch 'master' into zss_integration_with_apiml\n\n# Conflicts:\n#\tintegration-tests/src/test/java/org/zowe/apiml/gatewayservice/authentication/LogoutTest.java", "committedDate": "2020-09-24T07:25:00Z", "type": "commit"}, {"oid": "54bb8dd5cba5e880921136752a08768dc9e690b8", "url": "https://github.com/zowe/api-layer/commit/54bb8dd5cba5e880921136752a08768dc9e690b8", "message": "refactor\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-24T08:07:36Z", "type": "commit"}, {"oid": "7833f652623b068f0ae10a12d50d8ade3d956921", "url": "https://github.com/zowe/api-layer/commit/7833f652623b068f0ae10a12d50d8ade3d956921", "message": "checkstyle\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-24T08:36:22Z", "type": "commit"}, {"oid": "f4ff688b9afe491c782711c464450a7d27b1f153", "url": "https://github.com/zowe/api-layer/commit/f4ff688b9afe491c782711c464450a7d27b1f153", "message": "remove unused files\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-24T08:52:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE2NjYwMQ==", "url": "https://github.com/zowe/api-layer/pull/848#discussion_r494166601", "bodyText": "is this extendable? Can Spring features be used instead of static map?", "author": "jandadav", "createdAt": "2020-09-24T09:21:16Z", "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/security/config/ComponentsConfiguration.java", "diffHunk": "@@ -54,8 +63,12 @@ public Providers loginProviders(\n     }\n \n     @Bean\n-    public X509AuthenticationMapper x509Authentication() {\n-        return new X509CommonNameUserMapper();\n+    @Autowired\n+    public Map<String, X509AuthenticationMapper> x509Authentication(CloseableHttpClient httpClientProxy) {\n+        Map<String, X509AuthenticationMapper> x509Providers = new HashMap<>();\n+        x509Providers.put(\"externalMapper\", new X509ExternalMapper(httpClientProxy, externalMapperUrl));\n+        x509Providers.put(\"commonNameMapper\", new X509CommonNameUserMapper());\n+        return x509Providers;", "originalCommit": "f4ff688b9afe491c782711c464450a7d27b1f153", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE2OTMwNQ==", "url": "https://github.com/zowe/api-layer/pull/848#discussion_r494169305", "bodyText": "Could we simplify this?", "author": "jandadav", "createdAt": "2020-09-24T09:25:38Z", "path": "gateway-service/src/main/resources/application.yml", "diffHunk": "@@ -51,6 +51,10 @@ apiml:\n             jwtKeyAlias: jwtsecret\n         x509:\n             enabled: true\n+            useZss: false\n+            externalMapperUrl: http://localhost:8542/certificate/x509/map\n+\n+", "originalCommit": "f4ff688b9afe491c782711c464450a7d27b1f153", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE3MjE2OQ==", "url": "https://github.com/zowe/api-layer/pull/848#discussion_r494172169", "bodyText": "I can't see the change in internal repo, please help me, i must be missing something.", "author": "jandadav", "createdAt": "2020-09-24T09:30:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDE2OTMwNQ=="}], "type": "inlineReview"}, {"oid": "8745dab34473f959f5729f52102c84f99e1ea790", "url": "https://github.com/zowe/api-layer/commit/8745dab34473f959f5729f52102c84f99e1ea790", "message": "conditional bean, check zss running\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-24T12:26:07Z", "type": "commit"}, {"oid": "d93fb931b6a6060f03227160c66373c4599cea38", "url": "https://github.com/zowe/api-layer/commit/d93fb931b6a6060f03227160c66373c4599cea38", "message": "remove env check for zos, add description for express service\n\nSigned-off-by: achmelo <a.chmelo@gmail.com>", "committedDate": "2020-09-24T14:05:36Z", "type": "commit"}, {"oid": "5c17ad09003b3610e607208d4af1424cc3ee721c", "url": "https://github.com/zowe/api-layer/commit/5c17ad09003b3610e607208d4af1424cc3ee721c", "message": "Merge branch 'master' into zss_integration_with_apiml", "committedDate": "2020-09-24T15:03:24Z", "type": "commit"}]}