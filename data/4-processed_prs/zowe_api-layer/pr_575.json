{"pr_number": 575, "pr_title": "Use ZosmfServiceV2 only if the authentication endpoint exists", "pr_createdAt": "2020-03-28T19:39:22Z", "pr_url": "https://github.com/zowe/api-layer/pull/575", "timeline": [{"oid": "7cfbbd0e83c493580e718f4bc81d87952d8d07ae", "url": "https://github.com/zowe/api-layer/commit/7cfbbd0e83c493580e718f4bc81d87952d8d07ae", "message": "Use ZosmfServiceV2 only if the authentication endpoint exists\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>", "committedDate": "2020-03-28T19:34:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwODgxMA==", "url": "https://github.com/zowe/api-layer/pull/575#discussion_r399708810", "bodyText": "This was necessary to make it work on March 28 before the daylight savings time changed.", "author": "plavjanik", "createdAt": "2020-03-28T20:58:45Z", "path": "gateway-service/src/test/java/org/zowe/apiml/gateway/security/service/AuthenticationServiceTest.java", "diffHunk": "@@ -208,7 +208,7 @@ public void shouldParseJwtTokenAsQueryResponse() {\n         assertEquals(DOMAIN, parsedToken.getDomain());\n         assertEquals(USER, parsedToken.getUserId());\n         assertEquals(parsedToken.getCreation().toString().substring(0, 16), dateNow);\n-        Date toBeExpired = DateUtils.addDays(parsedToken.getCreation(), 1);\n+        Date toBeExpired = DateUtils.addHours(parsedToken.getCreation(), 24);", "originalCommit": "7cfbbd0e83c493580e718f4bc81d87952d8d07ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1NzY2Nw==", "url": "https://github.com/zowe/api-layer/pull/575#discussion_r399957667", "bodyText": "I would still use dummy for local development.", "author": "JirkaAichler", "createdAt": "2020-03-30T06:40:42Z", "path": "config/local/gateway-service.yml", "diffHunk": "@@ -8,12 +8,12 @@ apiml:\n         discoveryServiceUrls: https://localhost:10011/eureka/\n     security:\n         auth:\n-            provider: dummy", "originalCommit": "7cfbbd0e83c493580e718f4bc81d87952d8d07ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk2Mjk4MQ==", "url": "https://github.com/zowe/api-layer/pull/575#discussion_r399962981", "bodyText": "I have used that for testing and missed that while committing. Thank you", "author": "plavjanik", "createdAt": "2020-03-30T06:54:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1NzY2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1Nzc3NA==", "url": "https://github.com/zowe/api-layer/pull/575#discussion_r399957774", "bodyText": "Why false?", "author": "JirkaAichler", "createdAt": "2020-03-30T06:40:59Z", "path": "config/local/gateway-service.yml", "diffHunk": "@@ -8,12 +8,12 @@ apiml:\n         discoveryServiceUrls: https://localhost:10011/eureka/\n     security:\n         auth:\n-            provider: dummy\n+            provider: zosmf\n             zosmfServiceId: zosmf  # Replace me with the correct z/OSMF service id\n             passTicket:\n                 timeout: 360 # [s] - default timeout to expire (z/OS has 10 mins as default)\n         ssl:\n-            verifySslCertificatesOfServices: true", "originalCommit": "7cfbbd0e83c493580e718f4bc81d87952d8d07ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk2MjE0MQ==", "url": "https://github.com/zowe/api-layer/pull/575#discussion_r399962141", "bodyText": "Good catches", "author": "plavjanik", "createdAt": "2020-03-30T06:52:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1Nzc3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk2Mjc4Ng==", "url": "https://github.com/zowe/api-layer/pull/575#discussion_r399962786", "bodyText": "I have reverted it back", "author": "plavjanik", "createdAt": "2020-03-30T06:53:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk1Nzc3NA=="}], "type": "inlineReview"}, {"oid": "206ba535bae60f5b1d06d16c073fdccec0ddd186", "url": "https://github.com/zowe/api-layer/commit/206ba535bae60f5b1d06d16c073fdccec0ddd186", "message": "Reverting to the better values for development", "committedDate": "2020-03-30T06:53:20Z", "type": "commit"}, {"oid": "f537990197f3db2d859b1ce1ed7dcc5c826b17de", "url": "https://github.com/zowe/api-layer/commit/f537990197f3db2d859b1ce1ed7dcc5c826b17de", "message": "Log potential exceptions\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>", "committedDate": "2020-03-30T08:23:22Z", "type": "commit"}, {"oid": "188cef300af7198c8ae7c59bc956d410fbf140ac", "url": "https://github.com/zowe/api-layer/commit/188cef300af7198c8ae7c59bc956d410fbf140ac", "message": "Merge branch 'protectors/fix-zosmf-jwt' of https://github.com/zowe/api-layer into protectors/fix-zosmf-jwt\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>", "committedDate": "2020-03-30T08:23:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzMTQxMg==", "url": "https://github.com/zowe/api-layer/pull/575#discussion_r400031412", "bodyText": "Is it reasonable expectation that the V1 will be always supported?", "author": "balhar-jakub", "createdAt": "2020-03-30T08:59:10Z", "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/security/service/zosmf/ZosmfServiceV1.java", "diffHunk": "@@ -89,12 +92,12 @@ public void validate(TokenType type, String token) {\n \n     @Override\n     public void invalidate(TokenType type, String token) {\n-        // not supported by z/OSMF\n+        // not supported by this version of z/OSMF\n     }\n \n     @Override\n-    public boolean matchesVersion(int version) {\n-        return version <= 25;\n+    public boolean isSupported(int version) {", "originalCommit": "188cef300af7198c8ae7c59bc956d410fbf140ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzNDg4Mg==", "url": "https://github.com/zowe/api-layer/pull/575#discussion_r400034882", "bodyText": "The functionality that this code expects in z/OSMF is planned to be supported forever.", "author": "plavjanik", "createdAt": "2020-03-30T09:04:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzMTQxMg=="}], "type": "inlineReview"}]}