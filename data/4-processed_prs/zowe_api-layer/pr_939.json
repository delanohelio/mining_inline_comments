{"pr_number": 939, "pr_title": "PoC packing", "pr_createdAt": "2020-11-20T12:24:06Z", "pr_url": "https://github.com/zowe/api-layer/pull/939", "timeline": [{"oid": "0e968575b6dd53e51be4ec3031e0ca3b2928b643", "url": "https://github.com/zowe/api-layer/commit/0e968575b6dd53e51be4ec3031e0ca3b2928b643", "message": "Initial attempt to add gateway package", "committedDate": "2020-11-20T12:16:30Z", "type": "commit"}, {"oid": "5c2821f17015d539db6c16275fb67bccc8f5e5b6", "url": "https://github.com/zowe/api-layer/commit/5c2821f17015d539db6c16275fb67bccc8f5e5b6", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc", "committedDate": "2020-11-20T12:22:48Z", "type": "commit"}, {"oid": "c47a5da725d6e5e3ace1610e2cb14b3fed3cdad2", "url": "https://github.com/zowe/api-layer/commit/c47a5da725d6e5e3ace1610e2cb14b3fed3cdad2", "message": "Update gradle build\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-20T12:37:25Z", "type": "commit"}, {"oid": "9db9106d15dc773aac6517a8ddb96e702a93e852", "url": "https://github.com/zowe/api-layer/commit/9db9106d15dc773aac6517a8ddb96e702a93e852", "message": "Update artifact name\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-20T12:41:18Z", "type": "commit"}, {"oid": "02cebcc7a274a0473288024a7c94678b839d2e92", "url": "https://github.com/zowe/api-layer/commit/02cebcc7a274a0473288024a7c94678b839d2e92", "message": " Directory rename\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-20T14:33:20Z", "type": "commit"}, {"oid": "08b2f3523ce07b0ee70f7138985233f05cb759bb", "url": "https://github.com/zowe/api-layer/commit/08b2f3523ce07b0ee70f7138985233f05cb759bb", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc", "committedDate": "2020-11-20T14:34:45Z", "type": "commit"}, {"oid": "c0a6ae36ac6d53047efb7ea62d47703029709007", "url": "https://github.com/zowe/api-layer/commit/c0a6ae36ac6d53047efb7ea62d47703029709007", "message": "Update task name\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-20T14:47:24Z", "type": "commit"}, {"oid": "203dafabff898a1702bd29fe28bb19d626082611", "url": "https://github.com/zowe/api-layer/commit/203dafabff898a1702bd29fe28bb19d626082611", "message": "Try adding api-catalog and discovery packages\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-20T15:43:09Z", "type": "commit"}, {"oid": "f68de00fbc7850a13198025f47fe5241c0ebd410", "url": "https://github.com/zowe/api-layer/commit/f68de00fbc7850a13198025f47fe5241c0ebd410", "message": "Fix typo\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-20T15:47:32Z", "type": "commit"}, {"oid": "ffaccd99beee5af2c1179fdcc3cb4ff4e649eb94", "url": "https://github.com/zowe/api-layer/commit/ffaccd99beee5af2c1179fdcc3cb4ff4e649eb94", "message": "Fix copy-paste errors\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-20T16:16:40Z", "type": "commit"}, {"oid": "c5891849f95d42908e7c7d91408358bac89bad86", "url": "https://github.com/zowe/api-layer/commit/c5891849f95d42908e7c7d91408358bac89bad86", "message": "Update validation\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-23T11:47:57Z", "type": "commit"}, {"oid": "1e2ba9c675311ecf36fddd2bd2b4a0d4e7704172", "url": "https://github.com/zowe/api-layer/commit/1e2ba9c675311ecf36fddd2bd2b4a0d4e7704172", "message": "Add caching-service package", "committedDate": "2020-11-23T12:08:49Z", "type": "commit"}, {"oid": "edd406e79282b4a34e96b3d4b894319096d1dedc", "url": "https://github.com/zowe/api-layer/commit/edd406e79282b4a34e96b3d4b894319096d1dedc", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc", "committedDate": "2020-11-23T12:08:53Z", "type": "commit"}, {"oid": "0577021990bb192f3e7fed00224978a426854c3d", "url": "https://github.com/zowe/api-layer/commit/0577021990bb192f3e7fed00224978a426854c3d", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc", "committedDate": "2020-11-23T12:09:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzMzc2NQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529033765", "bodyText": "We may not need this check for HA. We still want to install the plugin even if current HA-instance doesn't have app-server started.", "author": "jackjia-ibm", "createdAt": "2020-11-23T22:21:38Z", "path": "api-catalog-package/src/main/resources/bin/configure.sh", "diffHunk": "@@ -0,0 +1,24 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+if [[ ${LAUNCH_COMPONENTS} == *\"app-server\"* ]]; then", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM1MTMyNQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529351325", "bodyText": "Removing", "author": "stevenhorsman", "createdAt": "2020-11-24T09:34:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzMzc2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzNjUxMQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529036511", "bodyText": "How to match real Artifactory path org/zowe/apiml/sdk/api-catalog-package.", "author": "jackjia-ibm", "createdAt": "2020-11-23T22:27:33Z", "path": "api-catalog-package/src/main/resources/manifest.yaml", "diffHunk": "@@ -0,0 +1,25 @@\n+---\n+name: api-catalog\n+# Component identifier. This identifier matches artifact path in Zowe Artifactory https://zowe.jfrog.io/.\n+id: org.zowe.apiml.api-catalog # TODO - this needs deciding on and updating", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM1MjExNw==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529352117", "bodyText": "I was hoping to get the components published somewhere nicer, but for now I'll change the id to match the current artifactory path", "author": "stevenhorsman", "createdAt": "2020-11-24T09:34:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzNjUxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzODEwOQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529038109", "bodyText": "This looks new to me. Is this APIML specific issue? Do you think we should handle this in zowe-installpackaging/bin/internal/zowe-set-env.sh?", "author": "jackjia-ibm", "createdAt": "2020-11-23T22:31:10Z", "path": "api-catalog-package/src/main/resources/bin/start.sh", "diffHunk": "@@ -0,0 +1,87 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+# Variables required on shell:\n+# - ZOWE_PREFIX\n+# - DISCOVERY_PORT - the port the discovery service will use\n+# - CATALOG_PORT - the port the api catalog service will use\n+# - GATEWAY_PORT - the port the api gateway service will use\n+# - VERIFY_CERTIFICATES - boolean saying if we accept only verified certificates\n+# - DISCOVERY_PORT - The port the data sets server will use\n+# - KEY_ALIAS\n+# - KEYSTORE - The keystore to use for SSL certificates\n+# - KEYSTORE_TYPE - The keystore type to use for SSL certificates\n+# - KEYSTORE_PASSWORD - The password to access the keystore supplied by KEYSTORE\n+# - KEY_ALIAS - The alias of the key within the keystore\n+# - ALLOW_SLASHES - Allows encoded slashes on on URLs through gateway\n+# - ZOWE_MANIFEST - The full path to Zowe's manifest.json file\n+\n+JAR_FILE=\"${LAUNCH_COMPONENT}/api-catalog-services.jar\"\n+\n+# API Mediation Layer Debug Mode\n+export LOG_LEVEL=\n+\n+if [[ ! -z ${APIML_DEBUG_MODE_ENABLED} && ${APIML_DEBUG_MODE_ENABLED} == true ]]\n+then\n+  export LOG_LEVEL=\"debug\"\n+fi\n+\n+LIBPATH=\"$LIBPATH\":\"/lib\"\n+LIBPATH=\"$LIBPATH\":\"/usr/lib\"\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/bin\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/bin/classic\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/bin/j9vm\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/lib/s390/classic\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/lib/s390/default\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/lib/s390/j9vm\n+export LIBPATH=\"$LIBPATH\":", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM1MjIyMQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529352221", "bodyText": "I got this from https://github.com/zowe/api-layer/blob/master/zowe-install/src/main/resources/component-scripts/setup.sh so I'm not sure if it's APIML specific, we'll have to get the team to comment", "author": "stevenhorsman", "createdAt": "2020-11-24T09:34:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzODEwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDk5NjcwNg==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r530996706", "bodyText": "I think that it is coming from our knowledge around how we have set the Java internally. So as long as all the required Java libraries are part of the setup, this isn't necessarily needed.", "author": "balhar-jakub", "createdAt": "2020-11-26T12:30:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzODEwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzODU0OQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529038549", "bodyText": "Need to confirm if this service id is correct.", "author": "jackjia-ibm", "createdAt": "2020-11-23T22:32:16Z", "path": "caching-service-package/src/main/resources/manifest.yaml", "diffHunk": "@@ -0,0 +1,25 @@\n+---\n+name: caching-service\n+# Component identifier. This identifier matches artifact path in Zowe Artifactory https://zowe.jfrog.io/.\n+id: org.zowe.apiml.caching-service # TODO - this needs deciding on and updating\n+# Component version is defined in gradle.properties for Gradle project\n+# Human readable component name\n+title: Caching service for internal usage\n+# Human readable component description\n+description: Service that provides caching API.\n+license: EPL-2.0\n+repository:\n+  type: git\n+  url: https://github.com/zowe/api-layer.git # TODO - link to the subfolder?\n+build:\n+  branch: \"{{build.branch}}\"\n+  number: \"{{build.number}}\"\n+  commitHash: \"{{build.commitHash}}\"\n+  timestamp: \"{{build.timestamp}}\"\n+commands:\n+  start: bin/start.sh\n+  # Note: component has no configure script\n+  validate: bin/validate.sh\n+apimlServices:\n+  dynamic:\n+    - serviceId: cachingservice", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM1MTAwNA==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529351004", "bodyText": "It is currently. I've been helping Andrea debug this service.", "author": "stevenhorsman", "createdAt": "2020-11-24T09:33:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzODU0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MDUzMg==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529040532", "bodyText": "Could we support validate_variable_is_set \"KEYSTORE KEYSTORE_PASSWORD KEY_ALIAS VERIFY_CERTIFICATES\" format? Or add a function called validate_variables_are_set.", "author": "jackjia-ibm", "createdAt": "2020-11-23T22:36:30Z", "path": "api-catalog-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,31 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${CATALOG_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter\n+\n+# Validate some certificate values properly set. Needs more adding?\n+. ${ROOT_DIR}/bin/utils/zowe-variable-utils.sh\n+validate_zowe_prefix\n+validate_variable_is_set \"KEYSTORE\"\n+validate_variable_is_set \"KEYSTORE_PASSWORD\"\n+validate_variable_is_set \"KEY_ALIAS\"\n+validate_variable_is_set \"VERIFY_CERTIFICATES\"", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM1ODczNQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529358735", "bodyText": "It would be nice, but beyond the scope of this issue. zowe/zowe-install-packaging#1803 created to cover", "author": "stevenhorsman", "createdAt": "2020-11-24T09:39:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MDUzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MTc4Mg==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529041782", "bodyText": "Combine with line 16, 21 and 28, could we source one single library then the extension developer doesn't need to know which function exists in which utils script.\nI think eventually we can change run-zowe.sh to source the lib, and extension can use it directly.", "author": "jackjia-ibm", "createdAt": "2020-11-23T22:39:08Z", "path": "api-catalog-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,31 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${CATALOG_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter\n+\n+# Validate some certificate values properly set. Needs more adding?\n+. ${ROOT_DIR}/bin/utils/zowe-variable-utils.sh", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM1ODc2Mg==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529358762", "bodyText": "It would be nice, but beyond the scope of this issue. zowe/zowe-install-packaging#1803 created to cover", "author": "stevenhorsman", "createdAt": "2020-11-24T09:39:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MTc4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MjcwNA==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529042704", "bodyText": "Not sure if we can eliminate this line from extension side, but handle it on run-zowe.sh instead. I know many other packages may not have this line. For example, https://github.com/zowe/explorer-jes/blob/staging/bin/validate.sh.", "author": "jackjia-ibm", "createdAt": "2020-11-23T22:41:05Z", "path": "api-catalog-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,31 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${CATALOG_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter\n+\n+# Validate some certificate values properly set. Needs more adding?\n+. ${ROOT_DIR}/bin/utils/zowe-variable-utils.sh\n+validate_zowe_prefix\n+validate_variable_is_set \"KEYSTORE\"\n+validate_variable_is_set \"KEYSTORE_PASSWORD\"\n+validate_variable_is_set \"KEY_ALIAS\"\n+validate_variable_is_set \"VERIFY_CERTIFICATES\"\n+\n+. ${ROOT_DIR}/bin/utils/java-utils.sh\n+validate_java_home\n+\n+return $ERRORS_FOUND-$INITIAL_ERRORS_FOUND", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM1MzkxOA==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529353918", "bodyText": "That's because there isn't a proper validate script on explorer-jes based on 1.9 componentisation critera. I think we can make changes and I don't disagree with the suggestions, but they are beyond the scope of adding a manifest to api-layer components.", "author": "stevenhorsman", "createdAt": "2020-11-24T09:36:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MjcwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0Mzk0OA==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529043948", "bodyText": "Could we change validate_directory_is_accessible to accept multiple directories, or rename to validate_directories_are_accessible, so IFS and loop can be handled by util lib.", "author": "jackjia-ibm", "createdAt": "2020-11-23T22:43:59Z", "path": "discovery-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${DISCOVERY_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter\n+\n+. ${ROOT_DIR}/bin/utils/zosmf-utils.sh\n+validate_zosmf_host_and_port \"${ZOSMF_HOST}\" \"${ZOSMF_PORT}\"\n+\n+# Validate some certificate values properly set. Needs more adding?\n+. ${ROOT_DIR}/bin/utils/zowe-variable-utils.sh\n+validate_zowe_prefix\n+validate_variable_is_set \"KEYSTORE\"\n+validate_variable_is_set \"KEYSTORE_PASSWORD\"\n+validate_variable_is_set \"KEY_ALIAS\"\n+validate_variable_is_set \"VERIFY_CERTIFICATES\"\n+\n+. ${ROOT_DIR}/bin/utils/file-utils.sh\n+# Check we can access all external static def directories\n+OLDIFS=\"$IFS\"\n+IFS=\";\"\n+for DIRECTORY in ${ZWEAD_EXTERNAL_STATIC_DEF_DIRECTORIES} \n+do\n+  validate_directory_is_accessible \"${DIRECTORY}\"\n+done\n+export IFS=\"$OLDIFS\"", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM2MjE0OQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529362149", "bodyText": "Added to zowe/zowe-install-packaging#1803", "author": "stevenhorsman", "createdAt": "2020-11-24T09:42:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0Mzk0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0NjcwOA==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529046708", "bodyText": "To me, I think subfolder is not needed. The API Catalog code may exist in or reference multiple sub-folders, we may not have an accurate list of all related folders. For example, should we point to api-catalog-services, or api-catalog-ui, or api-catalog-package folder in this case. It may also related to apiml-common.", "author": "jackjia-ibm", "createdAt": "2020-11-23T22:50:06Z", "path": "api-catalog-package/src/main/resources/manifest.yaml", "diffHunk": "@@ -0,0 +1,25 @@\n+---\n+name: api-catalog\n+# Component identifier. This identifier matches artifact path in Zowe Artifactory https://zowe.jfrog.io/.\n+id: org.zowe.apiml.api-catalog # TODO - this needs deciding on and updating\n+# Component version is defined in gradle.properties for Gradle project\n+# Human readable component name\n+title: API Catalog\n+# Human readable component description\n+description: API Catalog service to display service details and API documentation for discovered API services.\n+license: EPL-2.0\n+repository:\n+  type: git\n+  url: https://github.com/zowe/api-layer.git # TODO - link to the subfolder?", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM3MzcwNQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529373705", "bodyText": "Removed the comments", "author": "stevenhorsman", "createdAt": "2020-11-24T09:51:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0NjcwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1NDU1OA==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529054558", "bodyText": "I have mixed feelings of the network validations. Few thoughts:\n\nthe validation method (onetstat, oping) is not compatible with Linux,\nin some extreme strict docker images, people may not have netstat/ping network util tools installed,\nthe variable is validated here ZOWE_EXPLORER_HOST could be complicated. Currently it's simple and pointed to external domain where we access the system. But actually the system itself may not be necessary to have to resolve the domain correctly. Resolving the domain is only critical to external, the client side, which we cannot validate here,\nI have concerns to reference ZOWE_EXPLORER_HOST from component level. I think we should try to eliminate it as much as possible because the variable itself is confusing and has been used for various purpose: external domain, internal domains, referrer, etc.", "author": "jackjia-ibm", "createdAt": "2020-11-23T23:08:10Z", "path": "api-catalog-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,31 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${CATALOG_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter", "originalCommit": "0577021990bb192f3e7fed00224978a426854c3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM2NTAxMQ==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529365011", "bodyText": "I don't disagree on principle, but this is all stuff that we've been using for years and there aren't alternatives yet. I don't understand what you want me to do, just park this PR until version 2?", "author": "stevenhorsman", "createdAt": "2020-11-24T09:45:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1NDU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTU3Mzg4Nw==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529573887", "bodyText": "I would suggest to remove the resolvable check. If we really want it, we can validate in run-zowe.sh so it's easier for us to migrate. Even in v2, I wouldn't expect every component to validate haInstance.domain value. Not sure how you think.", "author": "jackjia-ibm", "createdAt": "2020-11-24T14:11:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1NDU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI4MzI3Mw==", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r530283273", "bodyText": "I've removed the valdiation, but I'm not sure how that helps given that the start scripts all still use that variable.", "author": "stevenhorsman", "createdAt": "2020-11-25T10:56:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1NDU1OA=="}], "type": "inlineReview"}, {"oid": "3e0cfc8633d66cab8037308586a5da337a0c99b2", "url": "https://github.com/zowe/api-layer/commit/3e0cfc8633d66cab8037308586a5da337a0c99b2", "message": "Post-review updates\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-24T09:52:05Z", "type": "commit"}, {"oid": "4bba40a5ec611cb50d7ca9c8e38e64eca15672d4", "url": "https://github.com/zowe/api-layer/commit/4bba40a5ec611cb50d7ca9c8e38e64eca15672d4", "message": "Merge branch 'master' into users/stevenh/packaging-poc", "committedDate": "2020-11-25T09:22:56Z", "type": "commit"}, {"oid": "40750530ff7d53cf39cf1e4d418696235b8911dc", "url": "https://github.com/zowe/api-layer/commit/40750530ff7d53cf39cf1e4d418696235b8911dc", "message": "Update validate scripts based on new utils\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-25T14:53:59Z", "type": "commit"}, {"oid": "8e81dbf73d861187449e49afcfc0798125870fbb", "url": "https://github.com/zowe/api-layer/commit/8e81dbf73d861187449e49afcfc0798125870fbb", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc", "committedDate": "2020-11-25T14:54:03Z", "type": "commit"}, {"oid": "ac6d9f04ec805f3c084141ddd0e37fbf717ba8f2", "url": "https://github.com/zowe/api-layer/commit/ac6d9f04ec805f3c084141ddd0e37fbf717ba8f2", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc", "committedDate": "2020-11-25T14:54:59Z", "type": "commit"}, {"oid": "e77bdfcb8a49242d89d73251392a967c753a2eb0", "url": "https://github.com/zowe/api-layer/commit/e77bdfcb8a49242d89d73251392a967c753a2eb0", "message": "Merge branch 'master' into users/stevenh/packaging-poc", "committedDate": "2020-11-25T15:11:17Z", "type": "commit"}, {"oid": "61006a7278648d8bf1a3aaeae652d65f5d535519", "url": "https://github.com/zowe/api-layer/commit/61006a7278648d8bf1a3aaeae652d65f5d535519", "message": "Merge branch 'master' into users/stevenh/packaging-poc", "committedDate": "2020-11-26T09:19:26Z", "type": "commit"}, {"oid": "2faedc1b7629b32b04eb72f3868e06ca34ef7ce1", "url": "https://github.com/zowe/api-layer/commit/2faedc1b7629b32b04eb72f3868e06ca34ef7ce1", "message": "Update variable name\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-26T09:57:55Z", "type": "commit"}, {"oid": "c9fde9be2615d67f86249a8f48f59d53f47ea406", "url": "https://github.com/zowe/api-layer/commit/c9fde9be2615d67f86249a8f48f59d53f47ea406", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc", "committedDate": "2020-11-26T09:57:59Z", "type": "commit"}, {"oid": "e1364462cf8eaa7547fa147e0b9b2d593e51950e", "url": "https://github.com/zowe/api-layer/commit/e1364462cf8eaa7547fa147e0b9b2d593e51950e", "message": "Merge branch 'master' into users/stevenh/packaging-poc", "committedDate": "2020-11-26T12:28:16Z", "type": "commit"}, {"oid": "97a56ef17866fb203013becbf0b04cc66326243c", "url": "https://github.com/zowe/api-layer/commit/97a56ef17866fb203013becbf0b04cc66326243c", "message": "Add warning comment\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-26T12:33:25Z", "type": "commit"}, {"oid": "507712063c0fbd3f7993e9605682f64360b0b009", "url": "https://github.com/zowe/api-layer/commit/507712063c0fbd3f7993e9605682f64360b0b009", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc", "committedDate": "2020-11-26T12:33:30Z", "type": "commit"}, {"oid": "12504c072e68af42ea3345e7e60a116fd36d884b", "url": "https://github.com/zowe/api-layer/commit/12504c072e68af42ea3345e7e60a116fd36d884b", "message": "Merge branch 'master' into users/stevenh/packaging-poc", "committedDate": "2020-11-26T13:01:35Z", "type": "commit"}, {"oid": "1923a2414a43520a3f401f5dd27061b7ce509691", "url": "https://github.com/zowe/api-layer/commit/1923a2414a43520a3f401f5dd27061b7ce509691", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc", "committedDate": "2020-11-26T13:39:59Z", "type": "commit"}, {"oid": "f2d2a6d712972da98f455ffb6acbf1d2c1ea108c", "url": "https://github.com/zowe/api-layer/commit/f2d2a6d712972da98f455ffb6acbf1d2c1ea108c", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc", "committedDate": "2020-11-26T13:42:12Z", "type": "commit"}, {"oid": "d27ed2c2a7e9e75afe4f4298407bde0265c72862", "url": "https://github.com/zowe/api-layer/commit/d27ed2c2a7e9e75afe4f4298407bde0265c72862", "message": "Merged in new parameter from PR-925\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-26T13:43:03Z", "type": "commit"}, {"oid": "71c4c6d92dbdd939779d12c4fb3791598fd9b62b", "url": "https://github.com/zowe/api-layer/commit/71c4c6d92dbdd939779d12c4fb3791598fd9b62b", "message": "Update to match PR-925\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-26T13:44:44Z", "type": "commit"}, {"oid": "73b8d5ca41f018ebd4b55443c6e46a8a7f93eac4", "url": "https://github.com/zowe/api-layer/commit/73b8d5ca41f018ebd4b55443c6e46a8a7f93eac4", "message": "Merge branch 'master' into users/stevenh/packaging-poc", "committedDate": "2020-11-26T13:55:56Z", "type": "commit"}, {"oid": "faa1502daf5eee3890b537c65637a513561e2d4f", "url": "https://github.com/zowe/api-layer/commit/faa1502daf5eee3890b537c65637a513561e2d4f", "message": "Add java path check in conifguration\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>", "committedDate": "2020-11-26T14:36:17Z", "type": "commit"}, {"oid": "1fd3f3708c3c9448d86ee81adf521492ac00b038", "url": "https://github.com/zowe/api-layer/commit/1fd3f3708c3c9448d86ee81adf521492ac00b038", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc", "committedDate": "2020-11-26T14:36:20Z", "type": "commit"}]}