{"pr_number": 581, "pr_title": "Add IRRRacf.jar to classpath of the API gateway", "pr_createdAt": "2020-03-31T21:57:09Z", "pr_url": "https://github.com/zowe/api-layer/pull/581", "timeline": [{"oid": "815f38d05a20999900b7163d9cf1f734e9a2b380", "url": "https://github.com/zowe/api-layer/commit/815f38d05a20999900b7163d9cf1f734e9a2b380", "message": "Add IRRRacf.jar to classpath of gateway\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>", "committedDate": "2020-03-31T21:53:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM4MzkyOA==", "url": "https://github.com/zowe/api-layer/pull/581#discussion_r401383928", "bodyText": "We are using this file for \"local\" deployments on our mf system. I need to test if this is not breaking the way we are running.", "author": "jandadav", "createdAt": "2020-04-01T06:31:42Z", "path": "zowe-install/src/main/resources/component-scripts/start.sh", "diffHunk": "@@ -122,4 +122,5 @@ _BPX_JOBNAME=${ZOWE_PREFIX}${GATEWAY_CODE} java -Xms32m -Xmx256m -Xquickstart \\\n     -Dserver.ssl.trustStoreType=${KEYSTORE_TYPE} \\\n     -Dserver.ssl.trustStorePassword=${KEYSTORE_PASSWORD} \\\n     -Djava.protocol.handler.pkgs=com.ibm.crypto.provider \\\n+    -cp /usr/include/java_classes/IRRRacf.jar \\", "originalCommit": "815f38d05a20999900b7163d9cf1f734e9a2b380", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5MDgxNA==", "url": "https://github.com/zowe/api-layer/pull/581#discussion_r401390814", "bodyText": "I've tested and it's running, on our test system, this file does not exist. How is this implementation accounting for differences in user environments? I feel that this is not the best way.", "author": "jandadav", "createdAt": "2020-04-01T06:49:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM4MzkyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5NzE3NQ==", "url": "https://github.com/zowe/api-layer/pull/581#discussion_r401397175", "bodyText": "although it's running, our thin jar is not finding this class, as it's using manifest classpath to find libraries", "author": "jandadav", "createdAt": "2020-04-01T07:04:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM4MzkyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTQwNTg1Mg==", "url": "https://github.com/zowe/api-layer/pull/581#discussion_r401405852", "bodyText": "even with fat jars, the -cp entry is not effective, i am still getting cf.IRRPassTicket is not available, it will continue with default one org.zowe.apiml.passticket.PassTicketService$$Lambda$470/0000000", "author": "jandadav", "createdAt": "2020-04-01T07:23:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM4MzkyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTQxOTY3OA==", "url": "https://github.com/zowe/api-layer/pull/581#discussion_r401419678", "bodyText": "On what system?", "author": "plavjanik", "createdAt": "2020-04-01T07:50:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM4MzkyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTgwMTQxMA==", "url": "https://github.com/zowe/api-layer/pull/581#discussion_r401801410", "bodyText": "We have found how to configure the classpath correctly. The JZOS batch launcher is able to define CLASSPATH and use -jar at the same time but CLI java launcher does not. We have used just -cp and started the same class as the jar. That worked well. Since this is defined location by z/OS and Java products like MSM have used that for decade without a problem and required only JAVA_HOME to be configurable.", "author": "plavjanik", "createdAt": "2020-04-01T17:53:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM4MzkyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzMTEwNA==", "url": "https://github.com/zowe/api-layer/pull/581#discussion_r402531104", "bodyText": "The change has been tested on a Zowe system and a system deployed using David's zowe-api-dev deployment.", "author": "plavjanik", "createdAt": "2020-04-02T18:39:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM4MzkyOA=="}], "type": "inlineReview"}, {"oid": "e2dd48e6bedc393b1ec1026f679acda3e235fa52", "url": "https://github.com/zowe/api-layer/commit/e2dd48e6bedc393b1ec1026f679acda3e235fa52", "message": "Add IRRRacf.jar to classpath without -jar\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>", "committedDate": "2020-04-01T10:04:57Z", "type": "commit"}, {"oid": "1ac7c7032106eea3721d96d3aa2c79baace17703", "url": "https://github.com/zowe/api-layer/commit/1ac7c7032106eea3721d96d3aa2c79baace17703", "message": "Merge branch 'master' into irrracf", "committedDate": "2020-04-02T16:02:11Z", "type": "commit"}]}