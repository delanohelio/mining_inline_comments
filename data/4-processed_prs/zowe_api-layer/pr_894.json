{"pr_number": 894, "pr_title": "Propagate config from the instance.env to the start.sh", "pr_createdAt": "2020-10-16T09:15:06Z", "pr_url": "https://github.com/zowe/api-layer/pull/894", "timeline": [{"oid": "dc5a9f770ce32fb7657b6297ac1be386e38a58d9", "url": "https://github.com/zowe/api-layer/commit/dc5a9f770ce32fb7657b6297ac1be386e38a58d9", "message": "Propagate config from the instance.env to the start.sh\n\nSigned-off-by: at670475 <andrea.tabone@broadcom.com>", "committedDate": "2020-10-16T09:14:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIxODE1NA==", "url": "https://github.com/zowe/api-layer/pull/894#discussion_r506218154", "bodyText": "Can the user that install Zowe influence the zosmf service id?", "author": "jandadav", "createdAt": "2020-10-16T09:30:28Z", "path": "zowe-install/src/main/resources/component-scripts/start.sh", "diffHunk": "@@ -112,14 +112,14 @@ _BPX_JOBNAME=${ZOWE_PREFIX}${GATEWAY_CODE} java -Xms32m -Xmx256m -Xquickstart \\\n     -Dapiml.service.hostname=${ZOWE_EXPLORER_HOST} \\\n     -Dapiml.service.port=${GATEWAY_PORT} \\\n     -Dapiml.service.discoveryServiceUrls=https://${ZOWE_EXPLORER_HOST}:${DISCOVERY_PORT}/eureka/ \\\n-    -Dapiml.service.preferIpAddress=true \\\n-    -Dapiml.service.allowEncodedSlashes=true \\\n-    -Dapiml.service.corsEnabled=false \\\n+    -Dapiml.service.preferIpAddress=${APIML_PREFER_IP_ADDRESS} \\\n+    -Dapiml.service.allowEncodedSlashes=${APIML_ALLOW_ENCODED_SLASHES} \\\n+    -Dapiml.service.corsEnabled=${APIML_CORS_ENABLED} \\\n     -Dapiml.cache.storage.location=${WORKSPACE_DIR}/api-mediation/ \\\n     -Denvironment.ipAddress=${ZOWE_IP_ADDRESS} \\\n-    -Dapiml.gateway.timeoutMillis=600000 \\\n+    -Dapiml.gateway.timeoutMillis=${APIML_GATEWAY_TIMEOUT_MILLIS} \\\n     -Dapiml.security.ssl.verifySslCertificatesOfServices=${VERIFY_CERTIFICATES} \\\n-    -Dapiml.security.auth.zosmfServiceId=zosmf \\\n+    -Dapiml.security.auth.zosmfServiceId=${APIML_SECURITY_AUTH_ZOSMF_SERVICE_ID} \\", "originalCommit": "dc5a9f770ce32fb7657b6297ac1be386e38a58d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIyNjYwMQ==", "url": "https://github.com/zowe/api-layer/pull/894#discussion_r506226601", "bodyText": "Good point. I've to double check", "author": "taban03", "createdAt": "2020-10-16T09:39:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIxODE1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIxODM2Ng==", "url": "https://github.com/zowe/api-layer/pull/894#discussion_r506218366", "bodyText": "Why only one service?", "author": "jandadav", "createdAt": "2020-10-16T09:30:48Z", "path": "zowe-install/src/main/resources/component-scripts/start.sh", "diffHunk": "@@ -112,14 +112,14 @@ _BPX_JOBNAME=${ZOWE_PREFIX}${GATEWAY_CODE} java -Xms32m -Xmx256m -Xquickstart \\\n     -Dapiml.service.hostname=${ZOWE_EXPLORER_HOST} \\\n     -Dapiml.service.port=${GATEWAY_PORT} \\\n     -Dapiml.service.discoveryServiceUrls=https://${ZOWE_EXPLORER_HOST}:${DISCOVERY_PORT}/eureka/ \\\n-    -Dapiml.service.preferIpAddress=true \\\n-    -Dapiml.service.allowEncodedSlashes=true \\\n-    -Dapiml.service.corsEnabled=false \\\n+    -Dapiml.service.preferIpAddress=${APIML_PREFER_IP_ADDRESS} \\", "originalCommit": "dc5a9f770ce32fb7657b6297ac1be386e38a58d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIyNjMyNw==", "url": "https://github.com/zowe/api-layer/pull/894#discussion_r506226327", "bodyText": "I will change also others, the PR is still in progress. I'm just testing if the zowe-install-packaging will use the Zowe-install artifact from this PR, so I needed to run the pipeline with the \"Publish PR artifact\" option enabled.", "author": "taban03", "createdAt": "2020-10-16T09:39:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIxODM2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjMwMzg0Ng==", "url": "https://github.com/zowe/api-layer/pull/894#discussion_r506303846", "bodyText": "i see, thank you", "author": "jandadav", "createdAt": "2020-10-16T11:11:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjIxODM2Ng=="}], "type": "inlineReview"}, {"oid": "137c901ab0b99b177b234c0cc6198a47b80ef5b2", "url": "https://github.com/zowe/api-layer/commit/137c901ab0b99b177b234c0cc6198a47b80ef5b2", "message": "Adding a print to verify correct propagation\n\nSigned-off-by: at670475 <andrea.tabone@broadcom.com>", "committedDate": "2020-10-16T11:35:31Z", "type": "commit"}, {"oid": "7f295dad9bc0c0755dd6028b5ab3850e4b8df5d5", "url": "https://github.com/zowe/api-layer/commit/7f295dad9bc0c0755dd6028b5ab3850e4b8df5d5", "message": "Add mapping of preferIpAddress for other services\n\nSigned-off-by: at670475 <andrea.tabone@broadcom.com>", "committedDate": "2020-10-16T14:26:42Z", "type": "commit"}, {"oid": "177d621a3a3aba3da36864695804f6309b5ad432", "url": "https://github.com/zowe/api-layer/commit/177d621a3a3aba3da36864695804f6309b5ad432", "message": "remove print for test\n\nSigned-off-by: at670475 <andrea.tabone@broadcom.com>", "committedDate": "2020-10-16T15:32:56Z", "type": "commit"}, {"oid": "3a6da18b33a9247492dd19a4bf16164b4c9e3a14", "url": "https://github.com/zowe/api-layer/commit/3a6da18b33a9247492dd19a4bf16164b4c9e3a14", "message": "Merge branch 'master' into rip/taban03/migrate_config_from_start_sh", "committedDate": "2020-10-19T15:53:57Z", "type": "commit"}, {"oid": "c02bee8087771b26266f503ccd50d4b1fd849d1c", "url": "https://github.com/zowe/api-layer/commit/c02bee8087771b26266f503ccd50d4b1fd849d1c", "message": "Add auth provider parameter to the start.sh\n\nSigned-off-by: at670475 <andrea.tabone@broadcom.com>", "committedDate": "2020-10-20T07:29:07Z", "type": "commit"}]}