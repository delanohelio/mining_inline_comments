{"pr_number": 1912, "pr_title": "Add dependency management and junit4 dependency to parent pom", "pr_createdAt": "2020-02-14T22:06:57Z", "pr_url": "https://github.com/graphhopper/graphhopper/pull/1912", "timeline": [{"oid": "30de8cbbafa94031f4edaaa10af032adf1f83d0c", "url": "https://github.com/graphhopper/graphhopper/commit/30de8cbbafa94031f4edaaa10af032adf1f83d0c", "message": "Add dependency management and junit4 dependency to parent pom", "committedDate": "2020-02-14T22:03:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NzEwMg==", "url": "https://github.com/graphhopper/graphhopper/pull/1912#discussion_r379667102", "bodyText": "Is there a reason you added this link to the bom file, but did not include the bom file here? It provides the correct version for jackson, guava and many more, see below (maybe too many and it would be more readable to specify these versions explicitly in our dependency management section instead?)", "author": "easbar", "createdAt": "2020-02-14T22:08:26Z", "path": "pom.xml", "diffHunk": "@@ -15,15 +15,6 @@\n     <properties>\n         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n         <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n-        <slf4j.version>1.7.26</slf4j.version>\n-        <log4j.version>1.2.17</log4j.version>\n-        <commons-compress.version>1.18</commons-compress.version>\n-\n-        <!-- for the correct jackson and guava versions see https://github.com/dropwizard/dropwizard/blob/release/1.3.x/dropwizard-bom/pom.xml -->", "originalCommit": "30de8cbbafa94031f4edaaa10af032adf1f83d0c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NzU2OQ==", "url": "https://github.com/graphhopper/graphhopper/pull/1912#discussion_r379667569", "bodyText": "unfortunately this logging bridge is not declared in the dropwizard bom, while for example slf4j-api is declared there (not sure why)", "author": "easbar", "createdAt": "2020-02-14T22:10:02Z", "path": "pom.xml", "diffHunk": "@@ -89,6 +80,68 @@\n         <module>web</module>\n         <module>client-hc</module>\n     </modules>\n+    <dependencyManagement>\n+        <dependencies>\n+            <!-- provides compatible versions for jackson, guava, slf4j etc. -->\n+            <dependency>\n+                <groupId>io.dropwizard</groupId>\n+                <artifactId>dropwizard-bom</artifactId>\n+                <!-- make sure the dropwizard version is compatible to the below dropwizard-configurable-assets-bundle version -->\n+                <version>1.3.12</version>\n+                <type>pom</type>\n+                <scope>import</scope>\n+            </dependency>\n+            <dependency>\n+                <groupId>io.dropwizard-bundles</groupId>\n+                <artifactId>dropwizard-configurable-assets-bundle</artifactId>\n+                <version>1.3.5</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>com.graphhopper.external</groupId>\n+                <artifactId>jackson-datatype-jts</artifactId>\n+                <version>0.12-2.5-1</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>com.carrotsearch</groupId>\n+                <artifactId>hppc</artifactId>\n+                <version>0.8.1</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>org.locationtech.jts</groupId>\n+                <artifactId>jts-core</artifactId>\n+                <version>1.15.1</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>org.apache.commons</groupId>\n+                <artifactId>commons-compress</artifactId>\n+                <version>1.18</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>log4j</groupId>\n+                <artifactId>log4j</artifactId>\n+                <version>1.2.17</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>org.slf4j</groupId>\n+                <artifactId>slf4j-log4j12</artifactId>\n+                <version>1.7.26</version>", "originalCommit": "30de8cbbafa94031f4edaaa10af032adf1f83d0c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NzkwMg==", "url": "https://github.com/graphhopper/graphhopper/pull/1912#discussion_r379667902", "bodyText": "I added this here with the downside that all child projects have this dependency automatically now. Then again junit is used by all children and its only test scope too. With junit 5 this will be multiple dependencies, which otherwise we would have to repeat in every child pom.", "author": "easbar", "createdAt": "2020-02-14T22:11:09Z", "path": "pom.xml", "diffHunk": "@@ -89,6 +80,68 @@\n         <module>web</module>\n         <module>client-hc</module>\n     </modules>\n+    <dependencyManagement>\n+        <dependencies>\n+            <!-- provides compatible versions for jackson, guava, slf4j etc. -->\n+            <dependency>\n+                <groupId>io.dropwizard</groupId>\n+                <artifactId>dropwizard-bom</artifactId>\n+                <!-- make sure the dropwizard version is compatible to the below dropwizard-configurable-assets-bundle version -->\n+                <version>1.3.12</version>\n+                <type>pom</type>\n+                <scope>import</scope>\n+            </dependency>\n+            <dependency>\n+                <groupId>io.dropwizard-bundles</groupId>\n+                <artifactId>dropwizard-configurable-assets-bundle</artifactId>\n+                <version>1.3.5</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>com.graphhopper.external</groupId>\n+                <artifactId>jackson-datatype-jts</artifactId>\n+                <version>0.12-2.5-1</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>com.carrotsearch</groupId>\n+                <artifactId>hppc</artifactId>\n+                <version>0.8.1</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>org.locationtech.jts</groupId>\n+                <artifactId>jts-core</artifactId>\n+                <version>1.15.1</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>org.apache.commons</groupId>\n+                <artifactId>commons-compress</artifactId>\n+                <version>1.18</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>log4j</groupId>\n+                <artifactId>log4j</artifactId>\n+                <version>1.2.17</version>\n+            </dependency>\n+            <dependency>\n+                <groupId>org.slf4j</groupId>\n+                <artifactId>slf4j-log4j12</artifactId>\n+                <version>1.7.26</version>\n+                <scope>test</scope>\n+            </dependency>\n+            <dependency>\n+                <groupId>junit</groupId>\n+                <artifactId>junit</artifactId>\n+                <version>4.12</version>\n+            </dependency>\n+        </dependencies>\n+    </dependencyManagement>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>junit</groupId>", "originalCommit": "30de8cbbafa94031f4edaaa10af032adf1f83d0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMxNTEwOA==", "url": "https://github.com/graphhopper/graphhopper/pull/1912#discussion_r381315108", "bodyText": "Interesting, I did the exact opposite a while ago. I don't oppose at the moment, but let's remember that this is only for convenience: There ist absolutely zero dependency between the test frameworks each submodule uses (each one can use its own), so in a way this is an artificial restriction to save typing. Totally okay as long as one doesn't forget. :-)", "author": "michaz", "createdAt": "2020-02-19T14:13:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NzkwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ1MzcyOQ==", "url": "https://github.com/graphhopper/graphhopper/pull/1912#discussion_r381453729", "bodyText": "Yes its code re-use via inheritance in a way, use with care... If you want we can of course go back to declaring the dependency in the submodules for the reason you mention.", "author": "easbar", "createdAt": "2020-02-19T18:13:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NzkwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg0NTU3MA==", "url": "https://github.com/graphhopper/graphhopper/pull/1912#discussion_r381845570", "bodyText": "in a way this is an artificial restriction\n\nI don't want to be pedantic but a submodule does not inherit dependencies from a parents dependencyManagement section and is still free to override the dependency versions in its own pom.", "author": "otbutz", "createdAt": "2020-02-20T08:25:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NzkwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg0Njc3Ng==", "url": "https://github.com/graphhopper/graphhopper/pull/1912#discussion_r381846776", "bodyText": "Yes, but the junit dependency is an actual dependency (not dependencyManagement). I think we all agree that using the dependencyManagement in the parent pom makes sense (?)", "author": "easbar", "createdAt": "2020-02-20T08:28:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NzkwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTg1MjcyMQ==", "url": "https://github.com/graphhopper/graphhopper/pull/1912#discussion_r381852721", "bodyText": "Yes, but the junit dependency is an actual dependency\n\nSorry, my bad.\n\nI think we all agree that using the dependencyManagement in the parent pom makes sense\n\nAbsolutely", "author": "otbutz", "createdAt": "2020-02-20T08:41:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NzkwMg=="}], "type": "inlineReview"}, {"oid": "ad672f2679295c670a3d7a3b61e6635bfa0ba7c7", "url": "https://github.com/graphhopper/graphhopper/commit/ad672f2679295c670a3d7a3b61e6635bfa0ba7c7", "message": "Merge branch 'master' into dependency_management", "committedDate": "2020-02-16T16:26:20Z", "type": "commit"}, {"oid": "c8a3d990711e9f2be07f7ba7d5e8859a568e7314", "url": "https://github.com/graphhopper/graphhopper/commit/c8a3d990711e9f2be07f7ba7d5e8859a568e7314", "message": "Merge branch 'master' into dependency_management", "committedDate": "2020-02-18T07:41:43Z", "type": "commit"}, {"oid": "4ae35dc2d9928b3b458572d1f7ff2306b76b47ed", "url": "https://github.com/graphhopper/graphhopper/commit/4ae35dc2d9928b3b458572d1f7ff2306b76b47ed", "message": "Add comment", "committedDate": "2020-02-18T07:44:24Z", "type": "commit"}]}