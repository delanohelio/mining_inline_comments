{"pr_number": 1525, "pr_title": "feat(TBD-10671): added support for generic arguments", "pr_createdAt": "2020-07-29T17:35:10Z", "pr_url": "https://github.com/Talend/tbd-studio-se/pull/1525", "timeline": [{"oid": "0f260d87be9c6109f718eeaaca6ec8922ab59dc1", "url": "https://github.com/Talend/tbd-studio-se/commit/0f260d87be9c6109f718eeaaca6ec8922ab59dc1", "message": "feat(TBD-10671): added support for generic arguments", "committedDate": "2020-08-06T10:55:48Z", "type": "forcePushed"}, {"oid": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "url": "https://github.com/Talend/tbd-studio-se/commit/8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "message": "feat(TBD-10671): added support for generic arguments", "committedDate": "2020-08-06T10:58:37Z", "type": "commit"}, {"oid": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "url": "https://github.com/Talend/tbd-studio-se/commit/8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "message": "feat(TBD-10671): added support for generic arguments", "committedDate": "2020-08-06T10:58:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MTI0NA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467161244", "bodyText": "duplicate part of condition, please think about extracting variable and using utility methods like escapeQuotes so it allows t oavoid || part of condtition.", "author": "amedvedenko", "createdAt": "2020-08-07T17:02:26Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -42,7 +42,19 @@\n \tboolean overrideJavaMapping = \"true\".equals(ElementParameterParser.getValue(node, \"__DEFINE_JAVA_MAPPING__\"));\r\n \tboolean passwordStoredInFile = \"true\".equals(ElementParameterParser.getValue(node, \"__PASSWORD_STORED_IN_FILE__\"));\r\n \r\n-\tboolean dieOnError = \"true\".equals(ElementParameterParser.getValue(node, \"__DIE_ON_ERROR__\"));\n+\tboolean dieOnError = \"true\".equals(ElementParameterParser.getValue(node, \"__DIE_ON_ERROR__\"));\r\n+\t\r\n+\tList<Map<String,String>> genericArgs = new java.util.ArrayList<Map<String,String>>();\r\n+\tList<Map<String,String>> toolSpecificArgs = new java.util.ArrayList<Map<String,String>>();\r\n+\tif(additionalList != null){ \r\n+\t\tfor(Map<String,String> additionalMap : additionalList){ \r\n+\t\t\tif (additionalMap.get(\"ADDITIONAL_ARGUMENT\").startsWith(\"\\\"--\") || additionalMap.get(\"ADDITIONAL_ARGUMENT\").startsWith(\"--\")){\r\n+\t\t\t\ttoolSpecificArgs.add(additionalMap);\r\n+\t\t\t} else if (additionalMap.get(\"ADDITIONAL_ARGUMENT\").startsWith(\"-\") || additionalMap.get(\"ADDITIONAL_ARGUMENT\").startsWith(\"\\\"-\")) {\r", "originalCommit": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODU0MjcyOA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468542728", "bodyText": "ok, escape method can be replaced with some inlined code or all quotes can be replaced if they can't be a part of ADDITIONAL_ARGUMENT", "author": "amedvedenko", "createdAt": "2020-08-11T12:30:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MTI0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MjE3Mw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467162173", "bodyText": "List and Map must also be imported but it isn't, so, maybe ArrayList also can be imported?\nAlso please add whitespaces to required places.", "author": "amedvedenko", "createdAt": "2020-08-07T17:04:18Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -42,7 +42,19 @@\n \tboolean overrideJavaMapping = \"true\".equals(ElementParameterParser.getValue(node, \"__DEFINE_JAVA_MAPPING__\"));\r\n \tboolean passwordStoredInFile = \"true\".equals(ElementParameterParser.getValue(node, \"__PASSWORD_STORED_IN_FILE__\"));\r\n \r\n-\tboolean dieOnError = \"true\".equals(ElementParameterParser.getValue(node, \"__DIE_ON_ERROR__\"));\n+\tboolean dieOnError = \"true\".equals(ElementParameterParser.getValue(node, \"__DIE_ON_ERROR__\"));\r\n+\t\r\n+\tList<Map<String,String>> genericArgs = new java.util.ArrayList<Map<String,String>>();\r\n+\tList<Map<String,String>> toolSpecificArgs = new java.util.ArrayList<Map<String,String>>();\r", "originalCommit": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYwNTEwOQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468605109", "bodyText": "it's still actual", "author": "amedvedenko", "createdAt": "2020-08-11T14:04:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MjE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc2NDAyMg==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r469764022", "bodyText": "@hliashchuk , the same remark as Andrii did.", "author": "sponomarova", "createdAt": "2020-08-13T07:53:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MjE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgxOTgyMA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r469819820", "bodyText": "FYI Hanna told me that for some reason adding ArrayList to import zone doesn't work so I agree with this part", "author": "amedvedenko", "createdAt": "2020-08-13T09:26:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MjE3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MjYxMQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467162611", "bodyText": "please don't forget about whitespaces", "author": "amedvedenko", "createdAt": "2020-08-07T17:05:05Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -58,19 +70,21 @@ String passwordFieldName = \"__PASSWORD__\";\n \r\n String[] cmd_<%=cid %> = new String[] {\"sqoop\", \"export\"\r\n <%\r\n-boolean isNull=false; \r\n+for(Map<String,String> genericArg : genericArgs){\r\n+\tif(genericArg.get(\"ADDITIONAL_VALUE\")!=null || !\"\".equals(genericArg.get(\"ADDITIONAL_VALUE\"))) {\r\n+\tString arg = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\") + \"=\" + genericArg.get(\"ADDITIONAL_VALUE\").replaceAll(\"\\\"\",\"\");\r", "originalCommit": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MzEwMA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467163100", "bodyText": "first part of condition is useless", "author": "amedvedenko", "createdAt": "2020-08-07T17:06:10Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -58,19 +70,21 @@ String passwordFieldName = \"__PASSWORD__\";\n \r\n String[] cmd_<%=cid %> = new String[] {\"sqoop\", \"export\"\r\n <%\r\n-boolean isNull=false; \r\n+for(Map<String,String> genericArg : genericArgs){\r\n+\tif(genericArg.get(\"ADDITIONAL_VALUE\")!=null || !\"\".equals(genericArg.get(\"ADDITIONAL_VALUE\"))) {\r\n+\tString arg = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\") + \"=\" + genericArg.get(\"ADDITIONAL_VALUE\").replaceAll(\"\\\"\",\"\");\r\n+%>\r\n+\t\t,\"<%=arg%>\"\r\n+<%\r\n+\t}\r\n+}\r\n if(isUseSpeedParallel && specificParams!=null){\r\n-\tboolean isFirstParam=true;\r\n \tfor(Map<String,String> specificArg : specificParams){ \r\n-\t\tisNull=false; \r\n-\t \tif(specificArg.get(\"SPECIFIC_PARAM_VALUE\")==null || \"\".equals(specificArg.get(\"SPECIFIC_PARAM_VALUE\"))) { \r\n-\t \t\tisNull=true; \r\n-\t \t} \r\n-\t \tif(!isNull) { \r\n+\t \tif(specificArg.get(\"SPECIFIC_PARAM_VALUE\")!=null || !\"\".equals(specificArg.get(\"SPECIFIC_PARAM_VALUE\"))) { \r", "originalCommit": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MzE2Mw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467163163", "bodyText": "and whitespaces", "author": "amedvedenko", "createdAt": "2020-08-07T17:06:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2MzEwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NDE1Nw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467164157", "bodyText": "please replace .equals with .isEmpty", "author": "amedvedenko", "createdAt": "2020-08-07T17:08:23Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -81,10 +95,17 @@ if(isUseSpeedParallel && isUseAdditionParams){\n %>\r\n \r\n , \"--connect\", <%=connection%>\r\n-<%if(!callProcStock){%>, \"--table\", <%=table%><%}%> , \"--username\", <%=username%>\r\n-<%if(passwordStoredInFile) {%>\r\n+<%if(!callProcStock){\r\n+\tif((!\"\".equals(table.replaceAll(\"\\\"\",\"\")))){\r", "originalCommit": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NDMwNw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467164307", "bodyText": "whitespaces", "author": "amedvedenko", "createdAt": "2020-08-07T17:08:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NDE1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NDI3NQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467164275", "bodyText": "please replace .equals with .isEmpty", "author": "amedvedenko", "createdAt": "2020-08-07T17:08:39Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -81,10 +95,17 @@ if(isUseSpeedParallel && isUseAdditionParams){\n %>\r\n \r\n , \"--connect\", <%=connection%>\r\n-<%if(!callProcStock){%>, \"--table\", <%=table%><%}%> , \"--username\", <%=username%>\r\n-<%if(passwordStoredInFile) {%>\r\n+<%if(!callProcStock){\r\n+\tif((!\"\".equals(table.replaceAll(\"\\\"\",\"\")))){\r\n+%>, \"--table\", <%=table%>\r\n+<%\t}\r\n+}\r\n+if(!\"\".equals(username.replaceAll(\"\\\"\",\"\"))){%>\r\n+ , \"--username\", <%=username%>\r\n+<%}\r\n+if(passwordStoredInFile) {%>\r\n \t, \"--password-file\", <%=(String)ElementParameterParser.getValue(node, \"__PASSWORD_FILE__\")%>\r\n-<%} else {%>\r\n+<%} else if (!\"\".equals(ElementParameterParser.getValue(node, \"__PASSWORD__\").replaceAll(\"\\\"\",\"\"))) {%>\r", "originalCommit": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NDM5OQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467164399", "bodyText": "whitespaces", "author": "amedvedenko", "createdAt": "2020-08-07T17:08:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NDI3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NDY2NA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467164664", "bodyText": "first part of condition is useless", "author": "amedvedenko", "createdAt": "2020-08-07T17:09:27Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -128,21 +149,15 @@ if(useColumnForUpdate && !callProcStock) {\n \t}\r\n }\r\n \r\n-if(additionalList != null){ \r\n-    for(Map<String,String> additionalMap : additionalList){ \r\n-        isNull=false; \r\n-        if(additionalMap.get(\"ADDITIONAL_VALUE\")==null || \"\".equals(additionalMap.get(\"ADDITIONAL_VALUE\"))) { \r\n-            isNull=true; \r\n-        } \r\n-        if(!isNull) { \r\n+for(Map<String,String> toolSpecificArg : toolSpecificArgs){ \r\n+    if(toolSpecificArg.get(\"ADDITIONAL_VALUE\")!=null || !\"\".equals(toolSpecificArg.get(\"ADDITIONAL_VALUE\"))) { \r", "originalCommit": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NzA4Mw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r467167083", "bodyText": "I see a lot of items are removed, will they be added somewhere?", "author": "amedvedenko", "createdAt": "2020-08-07T17:14:13Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopImport/tSqoopImport_java.xml", "diffHunk": "@@ -441,66 +441,13 @@\n \t\t</PARAMETER>\n \n \t\t<PARAMETER NAME=\"ADDITIONAL_ARGUMENTS\" FIELD=\"TABLE\"\n-\t\t\tNUM_ROW=\"60\" NB_LINES=\"5\" SHOW_IF=\"USE_COMMANDLINE=='true'\" GROUP=\"ADDITIONAL\">\n+\t\t\tNUM_ROW=\"60\" NB_LINES=\"3\" SHOW_IF=\"USE_COMMANDLINE=='true'\" GROUP=\"ADDITIONAL\">\n \t\t\t<ITEMS>\n-\t\t\t\t<ITEM NAME=\"ADDITIONAL_ARGUMENT\" FIELD=\"CLOSED_LIST\">\n-\t\t\t\t\t<ITEMS DEFAULT=\"--driver\">\n-\t\t\t\t\t\t<ITEM NAME=\"--bindir\" VALUE=\"--bindir\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--boundary-query\" VALUE=\"--boundary-query\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--class-name\" VALUE=\"--class-name\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--column-family\" VALUE=\"--column-family\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--connection-manager\" VALUE=\"--connection-manager\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--create-hcatalog-table\" VALUE=\"--create-hcatalog-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--create-hive-table\" VALUE=\"--create-hive-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--direct-split-size\" VALUE=\"--direct-split-size\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--driver\" VALUE=\"--driver\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--enclosed-by\" VALUE=\"--enclosed-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--escaped-by\" VALUE=\"--escaped-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--fetch-size\" VALUE=\"--fetch-size\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--fields-terminated-by\" VALUE=\"--fields-terminated-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hadoop-mapred-home\" VALUE=\"--hadoop-mapred-home\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hadoop-home\" VALUE=\"--hadoop-home\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hbase-create-table\" VALUE=\"--hbase-create-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hbase-row-key\" VALUE=\"--hbase-row-key\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hbase-table\" VALUE=\"--hbase-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hcatalog-database\" VALUE=\"--hcatalog-database\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hcatalog-home\" VALUE=\"--hcatalog-home\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hcatalog-storage-stanza\" VALUE=\"--hcatalog-storage-stanza\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hcatalog-table\" VALUE=\"--hcatalog-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-delims-replacement\" VALUE=\"--hive-delims-replacement\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-drop-import-delims\" VALUE=\"--hive-drop-import-delims\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-home\" VALUE=\"--hive-home\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-import\" VALUE=\"--hive-import\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-overwrite\" VALUE=\"--hive-overwrite\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-partition-key\" VALUE=\"--hive-partition-key\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-partition-value\" VALUE=\"--hive-partition-value\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-table\" VALUE=\"--hive-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--inline-lob-limit\" VALUE=\"--inline-lob-limit\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-enclosed-by\" VALUE=\"--input-enclosed-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-escaped-by\" VALUE=\"--input-escaped-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-fields-terminated-by\" VALUE=\"--input-fields-terminated-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-lines-terminated-by\" VALUE=\"--input-lines-terminated-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-optionally-enclosed-by\" VALUE=\"--input-optionally-enclosed-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--lines-terminated-by\" VALUE=\"--lines-terminated-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--jar-file\" VALUE=\"--jar-file\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--null-non-string\" VALUE=\"--null-non-string\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--null-string\" VALUE=\"--null-string\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--optionally-enclosed-by\" VALUE=\"--optionally-enclosed-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--outdir\" VALUE=\"--outdir\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--package-name\" VALUE=\"--package-name\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--split-by\" VALUE=\"--split-by\" SHOW_IF=\"USE_SPLIT=='false'\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--warehouse-dir\" VALUE=\"--warehouse-dir\" />", "originalCommit": "8979f48938512b5e7e887b1a45e6a9909cc8b8ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYxMTU3Nw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468611577", "bodyText": "please answer to this)", "author": "amedvedenko", "createdAt": "2020-08-11T14:13:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NzA4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1NDM5NA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468654394", "bodyText": "No, it was hardcoded list of sqoop oprions. Now it is open list and user enter values themselves", "author": "hliashchuk", "createdAt": "2020-08-11T15:07:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE2NzA4Mw=="}], "type": "inlineReview"}, {"oid": "e8b983c8897c6ca565b7ae225c5314d3705fbfc0", "url": "https://github.com/Talend/tbd-studio-se/commit/e8b983c8897c6ca565b7ae225c5314d3705fbfc0", "message": "feat(TBD-10671): addressed comments", "committedDate": "2020-08-11T13:19:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYwNDMxNg==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468604316", "bodyText": "additionalMap.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\"\",\"\") this part can be replaced with variable.", "author": "amedvedenko", "createdAt": "2020-08-11T14:03:39Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -42,7 +42,19 @@\n \tboolean overrideJavaMapping = \"true\".equals(ElementParameterParser.getValue(node, \"__DEFINE_JAVA_MAPPING__\"));\r\n \tboolean passwordStoredInFile = \"true\".equals(ElementParameterParser.getValue(node, \"__PASSWORD_STORED_IN_FILE__\"));\r\n \r\n-\tboolean dieOnError = \"true\".equals(ElementParameterParser.getValue(node, \"__DIE_ON_ERROR__\"));\n+\tboolean dieOnError = \"true\".equals(ElementParameterParser.getValue(node, \"__DIE_ON_ERROR__\"));\r\n+\t\r\n+\tList<Map<String,String>> genericArgs = new java.util.ArrayList<Map<String,String>>();\r\n+\tList<Map<String,String>> toolSpecificArgs = new java.util.ArrayList<Map<String,String>>();\r\n+\tif (additionalList != null) { \r\n+\t\tfor (Map<String,String> additionalMap : additionalList) { \r\n+\t\t\tif (additionalMap.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\").startsWith(\"--\")) {\r\n+\t\t\t\ttoolSpecificArgs.add(additionalMap);\r\n+\t\t\t} else if (additionalMap.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\").startsWith(\"-\")) {\r", "originalCommit": "e8b983c8897c6ca565b7ae225c5314d3705fbfc0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODYwOTc1OA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468609758", "bodyText": "whitespaces should be around != too", "author": "amedvedenko", "createdAt": "2020-08-11T14:10:46Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -58,15 +70,17 @@ String passwordFieldName = \"__PASSWORD__\";\n \r\n String[] cmd_<%=cid %> = new String[] {\"sqoop\", \"export\"\r\n <%\r\n-boolean isNull=false; \r\n-if(isUseSpeedParallel && specificParams!=null){\r\n-\tboolean isFirstParam=true;\r\n-\tfor(Map<String,String> specificArg : specificParams){ \r\n-\t\tisNull=false; \r\n-\t \tif(specificArg.get(\"SPECIFIC_PARAM_VALUE\")==null || \"\".equals(specificArg.get(\"SPECIFIC_PARAM_VALUE\"))) { \r\n-\t \t\tisNull=true; \r\n-\t \t} \r\n-\t \tif(!isNull) { \r\n+for (Map<String,String> genericArg : genericArgs) {\r\n+\tif (!\"\".equals(genericArg.get(\"ADDITIONAL_VALUE\"))) {\r\n+\tString arg = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\") + \"=\" + genericArg.get(\"ADDITIONAL_VALUE\").replaceAll(\"\\\"\",\"\");\r\n+%>\r\n+\t\t,\"<%=arg%>\"\r\n+<%\r\n+\t}\r\n+}\r\n+if (isUseSpeedParallel && specificParams!=null) {\r", "originalCommit": "e8b983c8897c6ca565b7ae225c5314d3705fbfc0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1MTYwNg==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468651606", "bodyText": "you replace \"closed list\" of arguments with a text field. What is the idea here?\nTo unify with \"java api\" part?\nTo extend list of supported options?", "author": "sponomarova", "createdAt": "2020-08-11T15:03:48Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopImport/tSqoopImport_java.xml", "diffHunk": "@@ -441,66 +441,13 @@\n \t\t</PARAMETER>\n \n \t\t<PARAMETER NAME=\"ADDITIONAL_ARGUMENTS\" FIELD=\"TABLE\"\n-\t\t\tNUM_ROW=\"60\" NB_LINES=\"5\" SHOW_IF=\"USE_COMMANDLINE=='true'\" GROUP=\"ADDITIONAL\">\n+\t\t\tNUM_ROW=\"60\" NB_LINES=\"3\" SHOW_IF=\"USE_COMMANDLINE=='true'\" GROUP=\"ADDITIONAL\">\n \t\t\t<ITEMS>\n-\t\t\t\t<ITEM NAME=\"ADDITIONAL_ARGUMENT\" FIELD=\"CLOSED_LIST\">\n-\t\t\t\t\t<ITEMS DEFAULT=\"--driver\">\n-\t\t\t\t\t\t<ITEM NAME=\"--bindir\" VALUE=\"--bindir\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--boundary-query\" VALUE=\"--boundary-query\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--class-name\" VALUE=\"--class-name\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--column-family\" VALUE=\"--column-family\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--connection-manager\" VALUE=\"--connection-manager\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--create-hcatalog-table\" VALUE=\"--create-hcatalog-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--create-hive-table\" VALUE=\"--create-hive-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--direct-split-size\" VALUE=\"--direct-split-size\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--driver\" VALUE=\"--driver\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--enclosed-by\" VALUE=\"--enclosed-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--escaped-by\" VALUE=\"--escaped-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--fetch-size\" VALUE=\"--fetch-size\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--fields-terminated-by\" VALUE=\"--fields-terminated-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hadoop-mapred-home\" VALUE=\"--hadoop-mapred-home\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hadoop-home\" VALUE=\"--hadoop-home\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hbase-create-table\" VALUE=\"--hbase-create-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hbase-row-key\" VALUE=\"--hbase-row-key\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hbase-table\" VALUE=\"--hbase-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hcatalog-database\" VALUE=\"--hcatalog-database\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hcatalog-home\" VALUE=\"--hcatalog-home\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hcatalog-storage-stanza\" VALUE=\"--hcatalog-storage-stanza\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hcatalog-table\" VALUE=\"--hcatalog-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-delims-replacement\" VALUE=\"--hive-delims-replacement\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-drop-import-delims\" VALUE=\"--hive-drop-import-delims\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-home\" VALUE=\"--hive-home\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-import\" VALUE=\"--hive-import\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-overwrite\" VALUE=\"--hive-overwrite\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-partition-key\" VALUE=\"--hive-partition-key\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-partition-value\" VALUE=\"--hive-partition-value\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--hive-table\" VALUE=\"--hive-table\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--inline-lob-limit\" VALUE=\"--inline-lob-limit\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-enclosed-by\" VALUE=\"--input-enclosed-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-escaped-by\" VALUE=\"--input-escaped-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-fields-terminated-by\" VALUE=\"--input-fields-terminated-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-lines-terminated-by\" VALUE=\"--input-lines-terminated-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--input-optionally-enclosed-by\" VALUE=\"--input-optionally-enclosed-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--lines-terminated-by\" VALUE=\"--lines-terminated-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--jar-file\" VALUE=\"--jar-file\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--null-non-string\" VALUE=\"--null-non-string\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--null-string\" VALUE=\"--null-string\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--optionally-enclosed-by\" VALUE=\"--optionally-enclosed-by\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--outdir\" VALUE=\"--outdir\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--package-name\" VALUE=\"--package-name\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--split-by\" VALUE=\"--split-by\" SHOW_IF=\"USE_SPLIT=='false'\" />\n-\t\t\t\t\t\t<ITEM NAME=\"--warehouse-dir\" VALUE=\"--warehouse-dir\" />\n-\t\t\t\t\t</ITEMS>\n-\t\t\t\t</ITEM>\n+\t\t\t\t<ITEM NAME=\"ADDITIONAL_ARGUMENT\" FIELD=\"TEXT\" />", "originalCommit": "e8b983c8897c6ca565b7ae225c5314d3705fbfc0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1NTAzMw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468655033", "bodyText": "It's replaced with a list but with no predefined values. The idea is to extend supported options", "author": "hliashchuk", "createdAt": "2020-08-11T15:08:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1MTYwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1MjEyNA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468652124", "bodyText": "This condition looks a little bit confusing. Could you explain it?", "author": "sponomarova", "createdAt": "2020-08-11T15:04:33Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopImport/tSqoopImport_commandline.javajet", "diffHunk": "@@ -103,22 +116,40 @@ if(isUseSpeedParallel && isUseAdditionParams){\n }\r\n %>\r\n \r\n-, \"--connect\", <%=connection%>, \"--username\", <%=username%>\r\n-<%if(passwordStoredInFile) {%>\r\n+, \"--connect\", <%=connection%>\r\n+<%if (!username.replaceAll(\"\\\"\",\"\").isEmpty()){%>\r\n+\t, \"--username\", <%=username%>\r\n+<%}\r\n+if(passwordStoredInFile) {%>\r\n \t, \"--password-file\", <%=(String)ElementParameterParser.getValue(node, \"__PASSWORD_FILE__\")%>\r\n-<%} else {%>\r\n+<%} else if (!ElementParameterParser.getValue(node, \"__PASSWORD__\").replaceAll(\"\\\"\",\"\").isEmpty()) {%>\r", "originalCommit": "e8b983c8897c6ca565b7ae225c5314d3705fbfc0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1MzYxNQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1525#discussion_r468653615", "bodyText": "if password has some value other than \"\"", "author": "hliashchuk", "createdAt": "2020-08-11T15:06:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1MjEyNA=="}], "type": "inlineReview"}, {"oid": "e4b04dd0c3b73bec759d2c1ea1787b486477af5a", "url": "https://github.com/Talend/tbd-studio-se/commit/e4b04dd0c3b73bec759d2c1ea1787b486477af5a", "message": "addressed comments", "committedDate": "2020-08-14T11:21:31Z", "type": "commit"}, {"oid": "a2f473049c2d63bd1af69409a1b6e0996b5cdf2c", "url": "https://github.com/Talend/tbd-studio-se/commit/a2f473049c2d63bd1af69409a1b6e0996b5cdf2c", "message": "fix(TBD-11081): fixed parameters concatenantion (#1566)\n\n* fix(TBD-11081): fixed parameters concatenantion\r\n\r\n* addressed comments", "committedDate": "2020-08-19T10:59:11Z", "type": "commit"}, {"oid": "d8d5329bacb586bb64e7a5e059c63b11dcfc9d30", "url": "https://github.com/Talend/tbd-studio-se/commit/d8d5329bacb586bb64e7a5e059c63b11dcfc9d30", "message": "Merge remote-tracking branch 'origin/maintenance/7.3' into hliashchuk/feat/TBD-10671", "committedDate": "2020-08-20T10:59:51Z", "type": "commit"}, {"oid": "3e80b7a44c4695c5e78e115593c2a9a831f84ad9", "url": "https://github.com/Talend/tbd-studio-se/commit/3e80b7a44c4695c5e78e115593c2a9a831f84ad9", "message": "Merge branch 'hliashchuk/feat/TBD-10671' of github.com:Talend/tbd-studio-se into hliashchuk/feat/TBD-10671", "committedDate": "2020-08-20T11:00:40Z", "type": "commit"}, {"oid": "b0f171ac9f217332ae3cac85630651da0f132eb5", "url": "https://github.com/Talend/tbd-studio-se/commit/b0f171ac9f217332ae3cac85630651da0f132eb5", "message": "fix(TBD-11089): fixed empty value", "committedDate": "2020-08-25T13:56:20Z", "type": "commit"}, {"oid": "d6cd2ba7efe12f450c0b38a4a54994f0b869eb5d", "url": "https://github.com/Talend/tbd-studio-se/commit/d6cd2ba7efe12f450c0b38a4a54994f0b869eb5d", "message": "fix(TBD-11089): fixed unrecognized argument", "committedDate": "2020-08-26T11:19:03Z", "type": "commit"}]}