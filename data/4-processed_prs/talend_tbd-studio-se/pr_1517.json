{"pr_number": 1517, "pr_title": "fix(TBD-10914): fixing hive-exec, adding missing libraries", "pr_createdAt": "2020-07-22T12:22:50Z", "pr_url": "https://github.com/Talend/tbd-studio-se/pull/1517", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2ODE3MQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1517#discussion_r458768171", "bodyText": "can you explain how you built this jar ? I still don't understand why its needed since this is on the cluster so we should not bother, nor why theres a version (6.1.1) hardcoded in a template :(", "author": "AlixMetivier", "createdAt": "2020-07-22T12:52:40Z", "path": "main/plugins/org.talend.hadoop.distribution.cdh5x/resources/template/cdhx/cdh6xTemplate.json", "diffHunk": "@@ -583,8 +583,8 @@\n \t\t\t\"id\": \"hive-exec\",\n \t\t\t\"type\": \"STANDARD\",\n \t\t\t\"context\": \"{properties.context}\",\n-\t\t\t\"jarName\": \"hive-exec-shade-2.1.1-cdh6.1.1-talend.jar\",\n-\t\t\t\"mvnUri\": \"mvn:org.talend.libraries/hive-exec-shade-2.1.1-cdh6.1.1-talend/6.0.0\",\n+\t\t\t\"jarName\": \"hive-exec-shade-2.1.1-cdh6.1.1.jar\",", "originalCommit": "17668d0bc7790536a699216df8a5260cbeedf17a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2OTM4MA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1517#discussion_r458769380", "bodyText": "https://github.com/Talend/tbd-studio-ee/pull/1796/files", "author": "amedvedenko", "createdAt": "2020-07-22T12:54:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2ODE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc3NTg0OQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1517#discussion_r458775849", "bodyText": "IDK why it's been done like this but I don't want to revert some decision, especially decisions made for 1 specific distribution. There is a risk for regression that can only be fixed in the same way.\nAlso, possible reason is to try to avoid conflicts with 3rd party libs by shading them because we have much bigger amount of libs then it's in usual BD world.", "author": "amedvedenko", "createdAt": "2020-07-22T13:05:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2ODE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc3Njc0Ng==", "url": "https://github.com/Talend/tbd-studio-se/pull/1517#discussion_r458776746", "bodyText": "and please, let's NOT comment PRs until it's asked in PRs channel. It's still in progress", "author": "amedvedenko", "createdAt": "2020-07-22T13:07:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2ODE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc4NTQ4NA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1517#discussion_r458785484", "bodyText": "I'm just saying that if we keep going in that direction we'll just back and forth with the issues we have between cdh 6.3.3 and 6.1.1, and that we might need at some point to rethink this shaded jar instead of rebuilding it. I don't see how its a good thing that we provided a specific version in a template that is used for other versions ...\nAnyway imho a PR is made to be discussed, you can build a studio using the CI and I won't comment your code, not to mention that we usually build things once the PR has been discussed, I'm just trying to get the better for the studio by commenting here", "author": "AlixMetivier", "createdAt": "2020-07-22T13:20:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2ODE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgwNTc5MA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1517#discussion_r458805790", "bodyText": "Ok, which issues are you referring too?\nOk, it can be rethinked but I guess it should be done in scope of separate WI, Spike or etc. For now it's just an issue fix.\nI agree about reviewing, but it isn't ready yet. I'm just telling that this PR isn't ready to review yet, some decisions or implementations can be different. I'm going to built it just for dev purposes like verifications, generating dynamic, etc.", "author": "amedvedenko", "createdAt": "2020-07-22T13:49:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2ODE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUwNTYzNg==", "url": "https://github.com/Talend/tbd-studio-se/pull/1517#discussion_r459505636", "bodyText": "Discussed in PM and agreed that it works and won't break anything new. In future, shading jars will be changed. Resolving this discussion.", "author": "amedvedenko", "createdAt": "2020-07-23T14:46:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODc2ODE3MQ=="}], "type": "inlineReview"}, {"oid": "03bb9414383bfa06c4b1b96aa3532dc7ede1b3a9", "url": "https://github.com/Talend/tbd-studio-se/commit/03bb9414383bfa06c4b1b96aa3532dc7ede1b3a9", "message": "fix(TBD-10914): updating version of shaded hive-exec library, added missing commons-io lib to the shaded lib", "committedDate": "2020-07-22T13:57:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM1NjI4Mw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1517#discussion_r464356283", "bodyText": "jar location was changed?", "author": "sponomarova", "createdAt": "2020-08-03T11:32:45Z", "path": "main/plugins/org.talend.hadoop.distribution.cdh5x/resources/builtin/cdhx/Cloudera_CDH6_1_1.json", "diffHunk": "@@ -13010,8 +13010,8 @@\n       \"context\" : \"plugin:org.talend.hadoop.distribution.cdh5x\",\n       \"excludeDependencies\" : \"true\",\n       \"id\" : \"DYNAMIC_Cloudera_CDH6_1_1_hive_exec\",\n-      \"mvn_uri\" : \"mvn:org.talend.libraries/hive-exec-shade-2.1.1-cdh6.1.1-talend/6.0.0\",\n-      \"name\" : \"hive-exec-shade-2.1.1-cdh6.1.1-talend.jar\",\n+      \"mvn_uri\" : \"mvn:org.talend.bigdata.libs/hive-exec-shade-2.1.1-cdh6.1.1-talend/1.1\",", "originalCommit": "62f82c3510e35b2cd4d6b58b67b197f0e4ee48d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM1NzM0OQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1517#discussion_r464357349", "bodyText": "yes, this is new place to put all our jars to avoid org.talend.libraries. Also it's a sync with pom.xml file that builds this shaded jar.", "author": "amedvedenko", "createdAt": "2020-08-03T11:35:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM1NjI4Mw=="}], "type": "inlineReview"}, {"oid": "bcbe90fc9d9b90476402d65a4e55dc87c1b26f1d", "url": "https://github.com/Talend/tbd-studio-se/commit/bcbe90fc9d9b90476402d65a4e55dc87c1b26f1d", "message": "fix(TBD-10914): fixing name for updated jar", "committedDate": "2020-08-04T12:01:25Z", "type": "forcePushed"}, {"oid": "b5433cd14dfb32671cefe03fa9f1fa4eca09807a", "url": "https://github.com/Talend/tbd-studio-se/commit/b5433cd14dfb32671cefe03fa9f1fa4eca09807a", "message": "fix(TBD-10914): fixing name for updated jar2", "committedDate": "2020-08-04T12:09:33Z", "type": "commit"}, {"oid": "b5433cd14dfb32671cefe03fa9f1fa4eca09807a", "url": "https://github.com/Talend/tbd-studio-se/commit/b5433cd14dfb32671cefe03fa9f1fa4eca09807a", "message": "fix(TBD-10914): fixing name for updated jar2", "committedDate": "2020-08-04T12:09:33Z", "type": "forcePushed"}]}