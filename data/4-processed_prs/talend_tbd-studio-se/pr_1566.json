{"pr_number": 1566, "pr_title": "fix(TBD-11081): fixed parameters concatenantion", "pr_createdAt": "2020-08-19T09:16:38Z", "pr_url": "https://github.com/Talend/tbd-studio-se/pull/1566", "timeline": [{"oid": "eddde912920828fd8379d738e9246b5c44a830b0", "url": "https://github.com/Talend/tbd-studio-se/commit/eddde912920828fd8379d738e9246b5c44a830b0", "message": "fix(TBD-11081): fixed parameters concatenantion", "committedDate": "2020-08-19T08:58:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5MjYwMA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472892600", "bodyText": "can argument has \"?", "author": "amedvedenko", "createdAt": "2020-08-19T09:28:00Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -73,7 +73,10 @@ String[] cmd_<%=cid %> = new String[] {\"sqoop\", \"export\"\n <%\r\n for (Map<String,String> genericArg : genericArgs) {\r\n \tif (!\"\".equals(genericArg.get(\"ADDITIONAL_VALUE\"))) {\r\n-\tString arg = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\") + \"=\" + genericArg.get(\"ADDITIONAL_VALUE\").replaceAll(\"\\\"\",\"\");\r\n+\tString param = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\");\r\n+\tString conn = (param.startsWith(\"-D\")) ? \"=\" : \" \";\r\n+\tString value = genericArg.get(\"ADDITIONAL_VALUE\").replaceAll(\"\\\"\",\"\");\r\n+\tString arg = param + conn + value;\r", "originalCommit": "eddde912920828fd8379d738e9246b5c44a830b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5NzAzNw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472897037", "bodyText": "I think no, https://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html#_using_generic_and_specific_arguments\ncan any of the hadoop argument have \"?", "author": "hliashchuk", "createdAt": "2020-08-19T09:34:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5MjYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkwMTQ0Nw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472901447", "bodyText": "you think or there is a limitation?\nJava works with \" inside of the string, like -Dtest=\"te\"st\".\nI anyway vote for not modifying user input.", "author": "amedvedenko", "createdAt": "2020-08-19T09:42:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5MjYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkwNjI1Mg==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472906252", "bodyText": "substring would be better in your opinion?", "author": "hliashchuk", "createdAt": "2020-08-19T09:51:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5MjYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkyMzYyOQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472923629", "bodyText": "If it alway has \" in the beginning and at the end of the String then it'd be much better since we don't modify String's content", "author": "amedvedenko", "createdAt": "2020-08-19T10:22:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5MjYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkzMzY0NQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472933645", "bodyText": "yes, the problem here is only just it comes with leading and trailing \"", "author": "hliashchuk", "createdAt": "2020-08-19T10:40:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5MjYwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5Mjc2NQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472892765", "bodyText": "unnecessary brackets", "author": "amedvedenko", "createdAt": "2020-08-19T09:28:14Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -73,7 +73,10 @@ String[] cmd_<%=cid %> = new String[] {\"sqoop\", \"export\"\n <%\r\n for (Map<String,String> genericArg : genericArgs) {\r\n \tif (!\"\".equals(genericArg.get(\"ADDITIONAL_VALUE\"))) {\r\n-\tString arg = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\") + \"=\" + genericArg.get(\"ADDITIONAL_VALUE\").replaceAll(\"\\\"\",\"\");\r\n+\tString param = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\");\r\n+\tString conn = (param.startsWith(\"-D\")) ? \"=\" : \" \";\r", "originalCommit": "eddde912920828fd8379d738e9246b5c44a830b0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5MzQ0NQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472893445", "bodyText": "please replace ?: with if/else blocks. ?: is forbidden to use within the java community since it's unreadable.", "author": "amedvedenko", "createdAt": "2020-08-19T09:29:16Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -73,7 +73,10 @@ String[] cmd_<%=cid %> = new String[] {\"sqoop\", \"export\"\n <%\r\n for (Map<String,String> genericArg : genericArgs) {\r\n \tif (!\"\".equals(genericArg.get(\"ADDITIONAL_VALUE\"))) {\r\n-\tString arg = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\") + \"=\" + genericArg.get(\"ADDITIONAL_VALUE\").replaceAll(\"\\\"\",\"\");\r\n+\tString param = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\");\r\n+\tString conn = (param.startsWith(\"-D\")) ? \"=\" : \" \";\r", "originalCommit": "eddde912920828fd8379d738e9246b5c44a830b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5OTI5MQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472899291", "bodyText": "ok, I will, but imo ?: is better :)", "author": "hliashchuk", "createdAt": "2020-08-19T09:38:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5MzQ0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5NTE4Ng==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472895186", "bodyText": "all of this is Java code so you can put this code to a component-utility class so you'll be able to avoid duplicates", "author": "amedvedenko", "createdAt": "2020-08-19T09:32:01Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopExport/tSqoopExport_commandline.javajet", "diffHunk": "@@ -73,7 +73,10 @@ String[] cmd_<%=cid %> = new String[] {\"sqoop\", \"export\"\n <%\r\n for (Map<String,String> genericArg : genericArgs) {\r\n \tif (!\"\".equals(genericArg.get(\"ADDITIONAL_VALUE\"))) {\r\n-\tString arg = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\") + \"=\" + genericArg.get(\"ADDITIONAL_VALUE\").replaceAll(\"\\\"\",\"\");\r\n+\tString param = genericArg.get(\"ADDITIONAL_ARGUMENT\").replaceAll(\"\\\"\",\"\");\r\n+\tString conn = (param.startsWith(\"-D\")) ? \"=\" : \" \";\r\n+\tString value = genericArg.get(\"ADDITIONAL_VALUE\").replaceAll(\"\\\"\",\"\");\r\n+\tString arg = param + conn + value;\r", "originalCommit": "eddde912920828fd8379d738e9246b5c44a830b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5ODU1Mw==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472898553", "bodyText": "?", "author": "hliashchuk", "createdAt": "2020-08-19T09:37:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5NTE4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkxNTE4MA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472915180", "bodyText": "@amedvedenko , do you think this code is so widely re-used to have utility class for that?", "author": "sponomarova", "createdAt": "2020-08-19T10:07:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5NTE4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkyNTc4Mg==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472925782", "bodyText": "even 2 times is already a duplicate and can be very easily avoided by creating utility class. It's a duplicate of Java code, not part of generated code that's much harder to handle. Duplicating code is one of the worst Java antipattern", "author": "amedvedenko", "createdAt": "2020-08-19T10:26:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5NTE4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjkzNDE4NQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1566#discussion_r472934185", "bodyText": "creating a class for one method doesn't sound like a good practice too", "author": "hliashchuk", "createdAt": "2020-08-19T10:41:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5NTE4Ng=="}], "type": "inlineReview"}, {"oid": "3d590f8556f3c5089acf37e4bb8781706a8ccea4", "url": "https://github.com/Talend/tbd-studio-se/commit/3d590f8556f3c5089acf37e4bb8781706a8ccea4", "message": "addressed comments", "committedDate": "2020-08-19T10:58:12Z", "type": "commit"}]}