{"pr_number": 1306, "pr_title": "fix(TBD-10095): Sqoop issue with parquet/avro format with EMR 5.15(2.8.3)", "pr_createdAt": "2020-03-13T12:28:45Z", "pr_url": "https://github.com/Talend/tbd-studio-se/pull/1306", "timeline": [{"oid": "821c064c947c343fe92fe2b46c876c9371331b9b", "url": "https://github.com/Talend/tbd-studio-se/commit/821c064c947c343fe92fe2b46c876c9371331b9b", "message": "TBD-10095: fix for avro+javaapi", "committedDate": "2020-03-13T12:22:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIyNDAyOQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1306#discussion_r392224029", "bodyText": "Why this option is not needed any more?", "author": "sponomarova", "createdAt": "2020-03-13T13:23:37Z", "path": "main/plugins/org.talend.designer.components.bigdata/components/tSqoopImport/tSqoopImport_javaapi.javajet", "diffHunk": "@@ -241,7 +241,6 @@\n \t}\n \t\n \tsqoopOptions_<%=cid%>.loadProperties(additionalProperties_<%=cid%>);\n-\tsqoopOptions_<%=cid%>.setExtraArgs(new String[] {\"-Dmapreduce.job.user.classpath.first=true\"});\n \t", "originalCommit": "821c064c947c343fe92fe2b46c876c9371331b9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI4NjMzMg==", "url": "https://github.com/Talend/tbd-studio-se/pull/1306#discussion_r392286332", "bodyText": "Seems, javaapi simply ignores that argument. At least, it does not impact on functionality. I had prepare a uber jar in order to avoid libraries conflict in javaapi case", "author": "mtuhai", "createdAt": "2020-03-13T15:07:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIyNDAyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI5MDE1OA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1306#discussion_r392290158", "bodyText": "I guess sqoop-emr514-uber is not on nexus so far? Would be nice to see what it includes.", "author": "sponomarova", "createdAt": "2020-03-13T15:13:39Z", "path": "main/plugins/org.talend.hadoop.distribution.emr5150/plugin.xml", "diffHunk": "@@ -298,9 +298,9 @@\n         <!-- Sqoop libraries -->\n         <libraryNeeded\n             context=\"plugin:org.talend.hadoop.distribution.emr5150\"\n-            id=\"sqoop-1.4.7.jar\"\n-            name=\"sqoop-1.4.7.jar\"\n-            mvn_uri=\"mvn:org.apache.sqoop/sqoop/1.4.7\"/>\n+            id=\"sqoop-emr515-uber.jar\"\n+            name=\"sqoop-emr515-uber.jar\"\n+            mvn_uri=\"mvn:org.talend.libraries/sqoop-emr515-uber/6.0.0\"/>", "originalCommit": "821c064c947c343fe92fe2b46c876c9371331b9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjMwNDk3OA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1306#discussion_r392304978", "bodyText": "I guess you shaded some avro lib, could you give details about the conflict it resolves ?", "author": "lbourgeois", "createdAt": "2020-03-13T15:37:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI5MDE1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwMzUyOA==", "url": "https://github.com/Talend/tbd-studio-se/pull/1306#discussion_r392503528", "bodyText": "I guess sqoop-emr514-uber is not on nexus so far? Would be nice to see what it includes.\n\nI added it here:\nhttps://jira.talendforge.org/browse/TBD-9899", "author": "mtuhai", "createdAt": "2020-03-13T21:53:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI5MDE1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjUwNDAxMQ==", "url": "https://github.com/Talend/tbd-studio-se/pull/1306#discussion_r392504011", "bodyText": "I guess you shaded some avro lib, could you give details about the conflict it resolves ?\n\nYes, I shaded avro and avro-mapred libs, since \"-Dmapreduce.job.user.classpath.first=true\" option works only in command line mode. Library conflict is described here:\nhttps://community.cloudera.com/t5/Support-Questions/Sqoop-import-to-avro-failing-which-jars-to-be-used/td-p/124079", "author": "mtuhai", "createdAt": "2020-03-13T21:55:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI5MDE1OA=="}], "type": "inlineReview"}]}