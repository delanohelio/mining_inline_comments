{"pr_number": 487, "pr_title": "refactor(plugins): Plugin version and service requirement selected via SpinnakerUpdateManager", "pr_createdAt": "2020-01-24T01:35:08Z", "pr_url": "https://github.com/spinnaker/kork/pull/487", "timeline": [{"oid": "f543366c392cafde3a435419d84848bae4bd4990", "url": "https://github.com/spinnaker/kork/commit/f543366c392cafde3a435419d84848bae4bd4990", "message": "refactor(plugins): Plugin service requirement selected via SpinnakerUpdateManager", "committedDate": "2020-01-24T02:23:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ1MTc3Mg==", "url": "https://github.com/spinnaker/kork/pull/487#discussion_r370451772", "bodyText": "Minor -- Going to switch Gate's DeckPluginCache over to using the SpinnakerUpdateManager downloadPluginRelease since it has a dependency on UpdateManager already, and then we can remove PluginUpdateService as a dependency in DeckPluginCache.", "author": "jonsie", "createdAt": "2020-01-24T02:33:36Z", "path": "kork-plugins/src/main/kotlin/com/netflix/spinnaker/kork/plugins/update/PluginUpdateService.kt", "diffHunk": "@@ -58,13 +57,6 @@ class PluginUpdateService(\n     installNewPlugins()\n   }\n \n-  /**\n-   * This is used in Gate to download Deck plugin artifacts - do not remove and must remain public.\n-   */\n-  fun download(pluginId: String, version: String): Path {", "originalCommit": "f543366c392cafde3a435419d84848bae4bd4990", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "af26069174a1a52be3df8cee50e295a786be0770", "url": "https://github.com/spinnaker/kork/commit/af26069174a1a52be3df8cee50e295a786be0770", "message": "refactor(plugins): Plugin service requirement selected via SpinnakerUpdateManager", "committedDate": "2020-01-24T18:36:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc4MjYzMA==", "url": "https://github.com/spinnaker/kork/pull/487#discussion_r370782630", "bodyText": "What does this marker do? I've never seen that before.", "author": "robzienert", "createdAt": "2020-01-24T18:40:48Z", "path": "kork-plugins/src/main/kotlin/com/netflix/spinnaker/kork/plugins/update/PluginUpdateService.kt", "diffHunk": "@@ -74,10 +66,12 @@ class PluginUpdateService(\n     val updates = updateManager.updates\n     log.debug(\"Found {} plugin updates\", updates.size)\n \n-    updates.forEach { plugin ->\n+    updates.forEach updates@{ plugin ->", "originalCommit": "af26069174a1a52be3df8cee50e295a786be0770", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc4Mjc1Mg==", "url": "https://github.com/spinnaker/kork/pull/487#discussion_r370782752", "bodyText": "(Seen it on return statements, but not this)", "author": "robzienert", "createdAt": "2020-01-24T18:41:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc4MjYzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc4MzM5Nw==", "url": "https://github.com/spinnaker/kork/pull/487#discussion_r370783397", "bodyText": "Ohh... you name scopes and return from that in Kotlin. Yeah, nice.", "author": "robzienert", "createdAt": "2020-01-24T18:42:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc4MjYzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc4Mzg1Mg==", "url": "https://github.com/spinnaker/kork/pull/487#discussion_r370783852", "bodyText": "We don't use this endpoint anymore, do we? Why not just remove it?", "author": "robzienert", "createdAt": "2020-01-24T18:43:30Z", "path": "kork-plugins/src/main/kotlin/com/netflix/spinnaker/kork/plugins/update/front50/Front50Service.kt", "diffHunk": "@@ -33,5 +33,8 @@ interface Front50Service {\n   fun getById(@Path(\"id\") id: String): Call<SpinnakerPluginInfo>\n \n   @GET(\"/pluginInfo\")\n-  fun list(@Query(\"service\") service: String): Call<Collection<SpinnakerPluginInfo>>\n+  fun listByService(@Query(\"service\") service: String): Call<Collection<SpinnakerPluginInfo>>", "originalCommit": "af26069174a1a52be3df8cee50e295a786be0770", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc4NDA5MQ==", "url": "https://github.com/spinnaker/kork/pull/487#discussion_r370784091", "bodyText": "Will do.", "author": "jonsie", "createdAt": "2020-01-24T18:43:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDc4Mzg1Mg=="}], "type": "inlineReview"}, {"oid": "70e7b4cbdccd45aa25b51115121c7dd38b38fea8", "url": "https://github.com/spinnaker/kork/commit/70e7b4cbdccd45aa25b51115121c7dd38b38fea8", "message": "refactor(plugins): Plugin service requirement selected via SpinnakerUpdateManager", "committedDate": "2020-01-24T18:47:11Z", "type": "commit"}, {"oid": "70e7b4cbdccd45aa25b51115121c7dd38b38fea8", "url": "https://github.com/spinnaker/kork/commit/70e7b4cbdccd45aa25b51115121c7dd38b38fea8", "message": "refactor(plugins): Plugin service requirement selected via SpinnakerUpdateManager", "committedDate": "2020-01-24T18:47:11Z", "type": "forcePushed"}, {"oid": "ec95d486440af5cef74d61339b0308d4fcafc070", "url": "https://github.com/spinnaker/kork/commit/ec95d486440af5cef74d61339b0308d4fcafc070", "message": "Merge branch 'master' into filter-service-name-update-manager", "committedDate": "2020-01-24T18:54:03Z", "type": "commit"}]}