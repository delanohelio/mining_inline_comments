{"pr_number": 611, "pr_title": "fix(plugins): consider request params while building ok http client", "pr_createdAt": "2020-04-16T19:07:27Z", "pr_url": "https://github.com/spinnaker/kork/pull/611", "timeline": [{"oid": "539e0a0f8099713f7b2844464b4c8543f5c74bbb", "url": "https://github.com/spinnaker/kork/commit/539e0a0f8099713f7b2844464b4c8543f5c74bbb", "message": "fix(plugins): consider request params while building ok http client", "committedDate": "2020-04-16T19:03:05Z", "type": "commit"}, {"oid": "3abd21867544f574f95b479123855b42428017a5", "url": "https://github.com/spinnaker/kork/commit/3abd21867544f574f95b479123855b42428017a5", "message": "Merge branch 'master' into http_client_sdk_fix", "committedDate": "2020-04-16T19:12:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgwMjE1NQ==", "url": "https://github.com/spinnaker/kork/pull/611#discussion_r409802155", "bodyText": "Opinionated nit:\nrequest.queryParams.forEach { httpUrlBuilder.addQueryParameter(it.key, it.value) }", "author": "jonsie", "createdAt": "2020-04-16T19:37:22Z", "path": "kork-plugins/src/main/kotlin/com/netflix/spinnaker/kork/plugins/sdk/httpclient/Ok3HttpClient.kt", "diffHunk": "@@ -93,11 +94,18 @@ class Ok3HttpClient(\n     }\n   }\n \n-  private fun requestBuilder(request: Request): okhttp3.Request.Builder =\n-    okhttp3.Request.Builder()\n+  private fun requestBuilder(request: Request): okhttp3.Request.Builder {\n+    val url = (baseUrl + request.path).replace(\"//\", \"/\")\n+    val httpUrlBuilder = HttpUrl.parse(url)?.newBuilder()\n+      ?: throw IntegrationException(\"Unable to parse url '$baseUrl'\")\n+    for (param in request.queryParams) {", "originalCommit": "3abd21867544f574f95b479123855b42428017a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2731995b2e6300e9d151a66af8aeaefc2846e6c3", "url": "https://github.com/spinnaker/kork/commit/2731995b2e6300e9d151a66af8aeaefc2846e6c3", "message": "fix(plugins): consider request params", "committedDate": "2020-04-16T19:46:48Z", "type": "commit"}]}