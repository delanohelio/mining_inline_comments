{"pr_number": 133, "pr_title": "Forward multiple tracks to dashboard", "pr_createdAt": "2020-01-27T19:22:42Z", "pr_url": "https://github.com/OpenTracksApp/OpenTracks/pull/133", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3MDM0Nw==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/133#discussion_r374370347", "bodyText": "possible", "author": "dennisguse", "createdAt": "2020-02-03T22:11:03Z", "path": "README_DEVELOPER.md", "diffHunk": "@@ -14,12 +14,12 @@ For the time being, the OpenTracks Data API can be used to implement mainly cust\n \n ## Implementation\n OpenTracks by default does not expose any data to 3rd-party applications.\n-On the request of the user (i.e., pressing a button), an Intent is created that exposes the `Track` data (it's summary) as well as the `TrackPoint`s.\n+On the request of the user (i.e., pressing a button), an Intent is created that exposes the `Track` data (it's summary) as well as the `TrackPoint`s of one or more selected tracks.\n For each, one URI is provided.\n These URIs notify observers if on content changes (e.g., a new `TrackPoint` was added).\n \n Limitations:\n-* only tracks selected by the user is exposed,\n+* only tracks selected by the user are exposed,\n * `Waypoints` are not exposed,\n * access is only granted temporarily and automatically revoked (see `FLAG_GRANT_READ_URI_PERMISSION`),\n * no write access is impossible, and", "originalCommit": "9eb84d16ccf8d66f82c664059df7a6bf062386ec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3MDk2MQ==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/133#discussion_r374370961", "bodyText": "Can  you applying autoformatting?\n(I guess, at the moment the defaults of AndroidStudio are used).", "author": "dennisguse", "createdAt": "2020-02-03T22:12:19Z", "path": "src/androidTest/java/de/dennisguse/opentracks/content/provider/CustomContentProviderUtilsTest.java", "diffHunk": "@@ -766,4 +766,12 @@ private void insertTrackWithLocations(Track track) {\n         contentProviderUtils.insertTrack(track);\n         contentProviderUtils.bulkInsertTrackPoint(track.getLocations().toArray(new Location[0]), track.getLocations().size(), track.getId());\n     }\n+\n+    @Test\n+    public void testFormatIdListForUri() {\n+        Assert.assertEquals(\"\", ContentProviderUtils.formatIdListForUri(new long[]{}));\n+        Assert.assertEquals(\"12\", ContentProviderUtils.formatIdListForUri(new long[]{12}));\n+        Assert.assertEquals(\"42,43,44\", ContentProviderUtils.formatIdListForUri(new long[]{42,43,44}));", "originalCommit": "9eb84d16ccf8d66f82c664059df7a6bf062386ec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3MTA3NQ==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/133#discussion_r374371075", "bodyText": "Remove", "author": "dennisguse", "createdAt": "2020-02-03T22:12:35Z", "path": "src/androidTest/java/de/dennisguse/opentracks/util/StringUtilsTest.java", "diffHunk": "@@ -208,4 +208,5 @@ public void testFormatDecimal() {\n \n         Assert.assertEquals(\"1\", StringUtils.formatDecimal(0.99, 1));\n     }\n+", "originalCommit": "9eb84d16ccf8d66f82c664059df7a6bf062386ec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3MTgyMQ==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/133#discussion_r374371821", "bodyText": "url.getLastPathSegment()", "author": "dennisguse", "createdAt": "2020-02-03T22:14:26Z", "path": "src/main/java/de/dennisguse/opentracks/content/provider/ContentProviderUtils.java", "diffHunk": "@@ -942,4 +944,30 @@ int getDefaultCursorBatchSize() {\n     void setDefaultCursorBatchSize(int defaultCursorBatchSize) {\n         this.defaultCursorBatchSize = defaultCursorBatchSize;\n     }\n+\n+    /**\n+     * Formats an array of IDs as comma separated string value\n+     *\n+     * @param ids   array with IDs\n+     * @return comma separated list of ids\n+     */\n+    public static String formatIdListForUri(long[] ids) {\n+        StringBuilder idsPathSegment = new StringBuilder();\n+        for (long id : ids) {\n+            if (idsPathSegment.length() > 0) {\n+                idsPathSegment.append(ID_SEPARATOR);\n+            }\n+            idsPathSegment.append(id);\n+        }\n+        return idsPathSegment.toString();\n+    }\n+\n+    public static String[] parseTrackIdsFromTrackPointsUri(Uri url) {\n+        return TextUtils.split(url.getPathSegments().get(2), ID_SEPARATOR);", "originalCommit": "9eb84d16ccf8d66f82c664059df7a6bf062386ec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDM3MjEyOA==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/133#discussion_r374372128", "bodyText": "Remove", "author": "dennisguse", "createdAt": "2020-02-03T22:15:11Z", "path": "src/main/java/de/dennisguse/opentracks/util/StringUtils.java", "diffHunk": "@@ -415,4 +415,5 @@ public static long parseTime(String xmlDateTime) {\n         }\n         return new Pair<>(value, unit);\n     }\n+", "originalCommit": "9eb84d16ccf8d66f82c664059df7a6bf062386ec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d821d0fef42f598a5044377fbee34d7f24a66559", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/d821d0fef42f598a5044377fbee34d7f24a66559", "message": "Forward multiple tracks to dashboard", "committedDate": "2020-02-03T22:30:15Z", "type": "commit"}]}