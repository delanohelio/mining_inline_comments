{"pr_number": 466, "pr_title": "ImportActivity intent filters.", "pr_createdAt": "2020-10-19T11:11:52Z", "pr_url": "https://github.com/OpenTracksApp/OpenTracks/pull/466", "timeline": [{"oid": "383d91527d917807ee4d1a20437de9a3859665c1", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/383d91527d917807ee4d1a20437de9a3859665c1", "message": "ImportActivity intent filters.", "committedDate": "2020-10-19T11:09:21Z", "type": "commit"}, {"oid": "a8f1abcda96c62dfe99881f36b1903f9ceaaaa56", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/a8f1abcda96c62dfe99881f36b1903f9ceaaaa56", "message": "add intent_filter to work with Locus and OsmAnd", "committedDate": "2020-10-19T20:17:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIzODE5OA==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/466#discussion_r508238198", "bodyText": "Why not include BROWSABLE and VIEW here?", "author": "dennisguse", "createdAt": "2020-10-20T06:26:17Z", "path": "src/main/AndroidManifest.xml", "diffHunk": "@@ -72,34 +72,94 @@ limitations under the License.\n             android:name=\".io.file.importer.ImportActivity\"\n             android:theme=\"@style/ThemeCustomTransparentActivity\">\n \n-            <intent-filter>\n+            <intent-filter\n+                android:label=\"@string/app_name\"\n+                android:priority=\"50\">\n                 <action android:name=\"android.intent.action.VIEW\" />\n                 <category android:name=\"android.intent.category.DEFAULT\" />\n-                <data android:mimeType=\"application/vnd.google-earth.kmz\" />\n-                <data\n-                    android:scheme=\"content\"\n-                    android:host=\"*\"\n-                    android:pathPattern=\"*kmz\" />\n+                <category android:name=\"android.intent.category.BROWSABLE\" />\n+                <data android:scheme=\"file\"/>\n+                <data android:scheme=\"content\"/>\n+                <data android:scheme=\"data\"/>\n+                <data android:host=\"*\"/>\n+                <data android:mimeType=\"*/*\"/>\n+                <data android:pathPattern=\".*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n             </intent-filter>\n \n-            <intent-filter>\n+            <intent-filter\n+                android:label=\"@string/app_name\"\n+                android:priority=\"50\">\n                 <action android:name=\"android.intent.action.VIEW\" />\n                 <category android:name=\"android.intent.category.DEFAULT\" />\n-                <data android:mimeType=\"application/vnd.google-earth.kml+xml\" />\n-                <data\n-                    android:scheme=\"content\"\n-                    android:host=\"*\"\n-                    android:pathPattern=\"*kml\" />\n+                <category android:name=\"android.intent.category.BROWSABLE\" />\n+                <data android:scheme=\"file\"/>\n+                <data android:scheme=\"content\"/>\n+                <data android:scheme=\"data\"/>\n+                <data android:host=\"*\"/>\n+                <data android:pathPattern=\".*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n+                <data android:pathPattern=\".*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\..*\\\\.gpx\" />\n             </intent-filter>\n \n             <intent-filter>\n+                <action android:name=\"android.intent.action.SEND\"/>\n+                <category android:name=\"android.intent.category.DEFAULT\"/>\n+                <data android:mimeType=\"application/gpx+xml\"/>\n+            </intent-filter>\n+            <intent-filter>\n+                <action android:name=\"android.intent.action.SEND\"/>", "originalCommit": "a8f1abcda96c62dfe99881f36b1903f9ceaaaa56", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI0ODY4NQ==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/466#discussion_r508248685", "bodyText": "No idea, I don't know what other apps are using. But if it doesn't harm, we could/should add it.\nAnd yes, the whole intent filter thingy from Android is very ugly.", "author": "pstorch", "createdAt": "2020-10-20T06:49:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIzODE5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI5Mzg2Nw==", "url": "https://github.com/OpenTracksApp/OpenTracks/pull/466#discussion_r508293867", "bodyText": "If you include VIEW together SEND a \"Missing URL\" error is gotten. So if we need VIEW and SEND then we have to create two intent-filter (the other solution is even more ugly: add tools:ignore=\"AppLinkUrlError\" attribute to intent-filter).", "author": "rgmf", "createdAt": "2020-10-20T08:07:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIzODE5OA=="}], "type": "inlineReview"}, {"oid": "843b44043f506b5e53fcf03bc2dfc4702d61cf2a", "url": "https://github.com/OpenTracksApp/OpenTracks/commit/843b44043f506b5e53fcf03bc2dfc4702d61cf2a", "message": "extent intent filters", "committedDate": "2020-10-21T20:46:23Z", "type": "commit"}]}