{"pr_number": 987, "pr_title": "KOGITO-204: Introduce OUIA attributes to unify kogito integration tests", "pr_createdAt": "2020-06-16T13:19:13Z", "pr_url": "https://github.com/kiegroup/appformer/pull/987", "timeline": [{"oid": "c7b0981ee3891114ff841abddc8731938b224856", "url": "https://github.com/kiegroup/appformer/commit/c7b0981ee3891114ff841abddc8731938b224856", "message": "KOGITO-204: Introduce OUIA attributes to unify kogito integration tests\n\nFor more details see: https://issues.redhat.com/browse/KOGITO-204", "committedDate": "2020-06-17T13:00:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwODA2MA==", "url": "https://github.com/kiegroup/appformer/pull/987#discussion_r441708060", "bodyText": "I wouldn't prefix with 'qe-' ... data-ouia is for use in testing, the prefix for the value is redundant.", "author": "jstastny-cz", "createdAt": "2020-06-17T17:25:47Z", "path": "uberfire-extensions/uberfire-simple-docks/uberfire-simple-docks-client/src/main/java/org/uberfire/client/docks/view/DockResizeBar.java", "diffHunk": "@@ -33,9 +35,15 @@\n import com.google.gwt.user.client.ui.FlowPanel;\n import org.uberfire.client.resources.WebAppResource;\n import org.uberfire.client.workbench.docks.UberfireDockPosition;\n+import org.uberfire.client.workbench.ouia.OuiaAttribute;\n+import org.uberfire.client.workbench.ouia.OuiaComponent;\n+import org.uberfire.client.workbench.ouia.OuiaComponentIdAttribute;\n+import org.uberfire.client.workbench.ouia.OuiaComponentTypeAttribute;\n import org.uberfire.mvp.ParameterizedCommand;\n \n-public class DockResizeBar extends FlowPanel {\n+public class DockResizeBar extends FlowPanel implements OuiaComponent {\n+\n+    private static final String OUIA_COMPONENT_TYPE = \"qe-resize-docks-bar\";", "originalCommit": "c7b0981ee3891114ff841abddc8731938b224856", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk4MjU1OQ==", "url": "https://github.com/kiegroup/appformer/pull/987#discussion_r441982559", "bodyText": "Agree, will remove it", "author": "jomarko", "createdAt": "2020-06-18T05:50:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwODA2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcxMTE5NA==", "url": "https://github.com/kiegroup/appformer/pull/987#discussion_r441711194", "bodyText": "imo we don't need for the id to keep all the hierarchy (I assume that the first variable is specifying the parent element, correct me if I am wrong) - OUIA_COMPONENT_TYPE + \"-\" + \"dock.getIdentifier()\" should be enough, you'll typically navigate in tests by:\ncy.get(dock-by-ouia-id).get(item-by-ouia-id) so the item-by-ouia-id selector needs to be unique just in context of given dock (thus we can save some letters in name).\nThough, based on your preference and rules you want to set for the project.", "author": "jstastny-cz", "createdAt": "2020-06-17T17:30:41Z", "path": "uberfire-extensions/uberfire-simple-docks/uberfire-simple-docks-client/src/main/java/org/uberfire/client/docks/view/items/AbstractDockItem.java", "diffHunk": "@@ -132,9 +138,29 @@ public String getLabel() {\n \n     public abstract void close();\n \n-    void setupCSSLocators(UberfireDock dock) {\n-        getElement().addClassName(CSSLocatorsUtils.buildLocator(\"qe-docks-item\",\n+    void setupLocators(final UberfireDock dock) {\n+        initOuiaComponentAttributes();\n+        getElement().addClassName(CSSLocatorsUtils.buildLocator(OUIA_COMPONENT_TYPE,\n                                                                 dock.getDockPosition().getShortName(),\n                                                                 dock.getIdentifier()));\n     }\n+\n+    @Override\n+    public Consumer<OuiaAttribute> ouiaAttributeRenderer() {\n+        return ouiaAttribute -> getElement().setAttribute(ouiaAttribute.getName(), ouiaAttribute.getValue());\n+    }\n+\n+    @Override\n+    public OuiaComponentTypeAttribute ouiaComponentType() {\n+        return new OuiaComponentTypeAttribute(OUIA_COMPONENT_TYPE);\n+    }\n+\n+    @Override\n+    public OuiaComponentIdAttribute ouiaComponentId() {\n+        return new OuiaComponentIdAttribute(OUIA_COMPONENT_TYPE +\n+                                                    \"-\" +\n+                                                    dock.getDockPosition().getShortName() +", "originalCommit": "c7b0981ee3891114ff841abddc8731938b224856", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk4NTMzNA==", "url": "https://github.com/kiegroup/appformer/pull/987#discussion_r441985334", "bodyText": "agree, will remove this part", "author": "jomarko", "createdAt": "2020-06-18T05:59:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcxMTE5NA=="}], "type": "inlineReview"}, {"oid": "3d8b744b2c8bf6bd29496f8cbfdf894103a095ed", "url": "https://github.com/kiegroup/appformer/commit/3d8b744b2c8bf6bd29496f8cbfdf894103a095ed", "message": "peer feedback: Simplify ouia attribute values", "committedDate": "2020-06-18T06:06:37Z", "type": "forcePushed"}, {"oid": "5f6b9ed2cc3ac2afc64adefe771f322eac86884f", "url": "https://github.com/kiegroup/appformer/commit/5f6b9ed2cc3ac2afc64adefe771f322eac86884f", "message": "peer feedback: Simplify ouia attribute values", "committedDate": "2020-06-18T18:51:49Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk4MTEwNg==", "url": "https://github.com/kiegroup/appformer/pull/987#discussion_r491981106", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright 2020 JBoss, by Red Hat, Inc\n          \n          \n            \n             * Copyright 2020 Red Hat, Inc. and/or its affiliates.", "author": "caponetto", "createdAt": "2020-09-21T11:50:27Z", "path": "uberfire-extensions/uberfire-simple-docks/uberfire-simple-docks-client/src/test/java/org/uberfire/client/docks/view/DockResizeBarTest.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2020 JBoss, by Red Hat, Inc", "originalCommit": "5f6b9ed2cc3ac2afc64adefe771f322eac86884f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk4MTc0OA==", "url": "https://github.com/kiegroup/appformer/pull/987#discussion_r491981748", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright 2020 JBoss, by Red Hat, Inc\n          \n          \n            \n             * Copyright 2020 Red Hat, Inc. and/or its affiliates.", "author": "caponetto", "createdAt": "2020-09-21T11:51:08Z", "path": "uberfire-extensions/uberfire-simple-docks/uberfire-simple-docks-client/src/test/java/org/uberfire/client/docks/view/bars/DocksCollapsedBarTest.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/*\n+ * Copyright 2020 JBoss, by Red Hat, Inc", "originalCommit": "5f6b9ed2cc3ac2afc64adefe771f322eac86884f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTk4NTI2OA==", "url": "https://github.com/kiegroup/appformer/pull/987#discussion_r491985268", "bodyText": "Since there are two places using \"tree-item\", consider replacing it by a constant just like you did on the other classes.", "author": "caponetto", "createdAt": "2020-09-21T11:54:50Z", "path": "uberfire-extensions/uberfire-widgets/uberfire-widgets-core/uberfire-widgets-core-client/src/main/java/org/uberfire/ext/widgets/core/client/tree/TreeItem.java", "diffHunk": "@@ -427,6 +431,21 @@ FlowPanel getContent() {\n         return content;\n     }\n \n+    @Override\n+    public OuiaComponentTypeAttribute ouiaComponentType() {\n+        return new OuiaComponentTypeAttribute(\"tree-item\");", "originalCommit": "5f6b9ed2cc3ac2afc64adefe771f322eac86884f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c888f92d9a8f8c4c7a33dd514c9c04e38f14f175", "url": "https://github.com/kiegroup/appformer/commit/c888f92d9a8f8c4c7a33dd514c9c04e38f14f175", "message": "peer feedback: fix headers and introduce constant", "committedDate": "2020-12-04T09:08:25Z", "type": "forcePushed"}, {"oid": "f2697be9d94c99e4e4b88485b746c280864f18fb", "url": "https://github.com/kiegroup/appformer/commit/f2697be9d94c99e4e4b88485b746c280864f18fb", "message": "peer feedback: init ouia attributes internally in TreeItem", "committedDate": "2021-01-05T11:29:06Z", "type": "forcePushed"}, {"oid": "a537bbc94530b25e7464f67889e1d2c7546a4aa0", "url": "https://github.com/kiegroup/appformer/commit/a537bbc94530b25e7464f67889e1d2c7546a4aa0", "message": "KOGITO-204: Introduce OUIA attributes to unify kogito integration tests\n\nFor more details see: https://issues.redhat.com/browse/KOGITO-204", "committedDate": "2021-01-13T15:56:11Z", "type": "commit"}, {"oid": "854c11b16e4a4ec9a79b33ee3ce3b416601027ed", "url": "https://github.com/kiegroup/appformer/commit/854c11b16e4a4ec9a79b33ee3ce3b416601027ed", "message": "peer feedback: Simplify ouia attribute values", "committedDate": "2021-01-13T15:56:11Z", "type": "commit"}, {"oid": "721da77d8ae5eb6917aad288d2834d74c478f6cd", "url": "https://github.com/kiegroup/appformer/commit/721da77d8ae5eb6917aad288d2834d74c478f6cd", "message": "peer feedback: fix headers and introduce constant", "committedDate": "2021-01-13T15:56:11Z", "type": "commit"}, {"oid": "18ec55451d85e042db9d6a506c861564e0971381", "url": "https://github.com/kiegroup/appformer/commit/18ec55451d85e042db9d6a506c861564e0971381", "message": "peer feedback: init ouia attributes internally in TreeItem", "committedDate": "2021-01-13T15:56:11Z", "type": "commit"}, {"oid": "80901412933b875e245ca66baa0c5df2baaf6e69", "url": "https://github.com/kiegroup/appformer/commit/80901412933b875e245ca66baa0c5df2baaf6e69", "message": "fix test - mock dock position", "committedDate": "2021-01-13T15:56:11Z", "type": "commit"}, {"oid": "80901412933b875e245ca66baa0c5df2baaf6e69", "url": "https://github.com/kiegroup/appformer/commit/80901412933b875e245ca66baa0c5df2baaf6e69", "message": "fix test - mock dock position", "committedDate": "2021-01-13T15:56:11Z", "type": "forcePushed"}]}