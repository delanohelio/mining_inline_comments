{"pr_number": 1012, "pr_title": "BAPL-678: BPMN Editor - Syntax Highlighting Editor", "pr_createdAt": "2020-07-28T22:32:42Z", "pr_url": "https://github.com/kiegroup/appformer/pull/1012", "timeline": [{"oid": "05dc23f5bafca15904277b7915fc8530708d60ff", "url": "https://github.com/kiegroup/appformer/commit/05dc23f5bafca15904277b7915fc8530708d60ff", "message": "BAPL-678: BPMN Editor - Syntax Highlighting", "committedDate": "2020-07-29T22:01:38Z", "type": "forcePushed"}, {"oid": "7638d5a3dfcf30a0b2c39cff6d89d56ef8584fd0", "url": "https://github.com/kiegroup/appformer/commit/7638d5a3dfcf30a0b2c39cff6d89d56ef8584fd0", "message": "BAPL-678: BPMN Editor - Syntax Highlighting", "committedDate": "2020-07-30T00:04:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAxMDgyNw==", "url": "https://github.com/kiegroup/appformer/pull/1012#discussion_r466010827", "bodyText": "hi @romartin this class has 7.8mb. Is this really necessary?", "author": "ederign", "createdAt": "2020-08-05T21:20:18Z", "path": "uberfire-workbench/uberfire-workbench-client-views-patternfly/pom.xml", "diffHunk": "@@ -574,13 +576,20 @@\n                     <include>dev/vs/basic-languages/tcl/tcl.contribution.js</include>\n                     <include>dev/vs/basic-languages/twig/twig.contribution.js</include>\n                     <include>dev/vs/basic-languages/typescript/typescript.contribution.js</include>\n+                    <include>dev/vs/basic-languages/typescript/typescript.js</include>\n                     <include>dev/vs/basic-languages/vb/vb.contribution.js</include>\n                     <include>dev/vs/basic-languages/xml/xml.contribution.js</include>\n                     <include>dev/vs/basic-languages/yaml/yaml.contribution.js</include>\n+                    <include>dev/vs/language/typescript/tsMode.js</include>\n+                    <include>dev/vs/language/typescript/tsWorker.js</include>\n+                    <include>dev/vs/language/typescript/languageFeatures.js</include>\n+                    <include>dev/vs/language/typescript/workerManager.js</include>\n+                    <include>dev/vs/language/typescript/lib/typescriptServicesMetadata.js</include>\n+                    <include>dev/vs/language/typescript/lib/typescriptServices.js</include>", "originalCommit": "7638d5a3dfcf30a0b2c39cff6d89d56ef8584fd0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAxMTg4NQ==", "url": "https://github.com/kiegroup/appformer/pull/1012#discussion_r466011885", "bodyText": "Also, it would be nice to review if there is another approach then add all those libraries.\nUnpacked DMN editors before this PR: 33.9Mb\nUnpacked DMN editors after this PR: 42.9Mb", "author": "ederign", "createdAt": "2020-08-05T21:22:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAxMDgyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA0MDg0Ng==", "url": "https://github.com/kiegroup/appformer/pull/1012#discussion_r466040846", "bodyText": "hey @ederign\nWell honestly I cound't make javascript language working property without each one of those added files, it was comtinously complaining and I was adding one by one. On the other hand, it results on typescript also supported, which was not the goal for this task, but the editor doens't work for javascript without those libraries, I tested everything I could... So I think those should be there. yes :-(\nOn the other hand:\n\nWe're relying on not minimized packages for the monaco editor, as the production ones are not working properly (thanks to @karreiro for pointing this), so we could try to improve here when some newer library version appears.\nWe're adding this libraries for all editors, which is not efficient, agree.\n\nI can try to play around with POM's and modules and see if I can just include those libraries for the BPMN editor, not at platform level, but honestly don't know yet if it's possible or how tricky it results, will let you know. WDYT? Did you already tested some similar approach?\nThanks guys!", "author": "romartin", "createdAt": "2020-08-05T22:33:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAxMDgyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY5Mjk5NQ==", "url": "https://github.com/kiegroup/appformer/pull/1012#discussion_r466692995", "bodyText": "Hi @romartin, I understand the issue, and it's not simple indeed :-( As an alternative, we could try to mock the module defined by this file. Wdyt? :-)", "author": "karreiro", "createdAt": "2020-08-06T21:21:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAxMDgyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyNDYzMQ==", "url": "https://github.com/kiegroup/appformer/pull/1012#discussion_r466724631", "bodyText": "what you mean by \"mocking\" it? :) I'm open for ideas yeah!! \ud83d\udc4d", "author": "romartin", "createdAt": "2020-08-06T22:43:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAxMDgyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcyNDk2Ng==", "url": "https://github.com/kiegroup/appformer/pull/1012#discussion_r466724966", "bodyText": "As far as I know those javascript modules are not being loaded if not needed, so only BPMN will really load that modules. But it's true that the size for all editors will increase, even if those js modules are not being loaded. So I understand that other editors will not really use more memory, as modules wil lbe not loaded, although the size of the package will increase, which is an issue", "author": "romartin", "createdAt": "2020-08-06T22:45:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAxMDgyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc3MDU2Mg==", "url": "https://github.com/kiegroup/appformer/pull/1012#discussion_r466770562", "bodyText": "@romartin I'm wondering if we could just have something like this (instead of adding typescriptServices.js):\ndefine(\"vs/language/typescript/lib/typescriptServices\", [], function() { return { /* maybe we'll need a fake API implementation here */ }; });\nThus, we would keep Monaco dependency tree happy and avoid this extra 7mb (if this file is not used at runtime).", "author": "karreiro", "createdAt": "2020-08-07T01:27:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAxMDgyNw=="}], "type": "inlineReview"}, {"oid": "d2ea5fbc5a64b1590ad97f0d78a855950c0dbc85", "url": "https://github.com/kiegroup/appformer/commit/d2ea5fbc5a64b1590ad97f0d78a855950c0dbc85", "message": "BAPL-678: BPMN Editor - Syntax Highlighting", "committedDate": "2020-08-06T22:47:41Z", "type": "forcePushed"}, {"oid": "28f220a539eb4f8def09956760efd150ab3c18ea", "url": "https://github.com/kiegroup/appformer/commit/28f220a539eb4f8def09956760efd150ab3c18ea", "message": "Do not include any specific monaco language library", "committedDate": "2020-08-08T21:14:59Z", "type": "forcePushed"}, {"oid": "6e7c9ea45b0084eeeb5effa95194e628b3d4b73a", "url": "https://github.com/kiegroup/appformer/commit/6e7c9ea45b0084eeeb5effa95194e628b3d4b73a", "message": "Do not include any specific monaco language library", "committedDate": "2020-08-26T01:38:21Z", "type": "forcePushed"}, {"oid": "7ebfc453f64f0cb91a3d49b9b533412d25353b34", "url": "https://github.com/kiegroup/appformer/commit/7ebfc453f64f0cb91a3d49b9b533412d25353b34", "message": "BAPL-678: BPMN Editor - Syntax Highlighting", "committedDate": "2020-08-31T23:30:10Z", "type": "commit"}, {"oid": "4e88d537514cb2785102d0184197342e1e92b360", "url": "https://github.com/kiegroup/appformer/commit/4e88d537514cb2785102d0184197342e1e92b360", "message": "Do not include any specific monaco language library", "committedDate": "2020-08-31T23:30:10Z", "type": "commit"}, {"oid": "4e88d537514cb2785102d0184197342e1e92b360", "url": "https://github.com/kiegroup/appformer/commit/4e88d537514cb2785102d0184197342e1e92b360", "message": "Do not include any specific monaco language library", "committedDate": "2020-08-31T23:30:10Z", "type": "forcePushed"}]}