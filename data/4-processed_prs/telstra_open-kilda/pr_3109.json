{"pr_number": 3109, "pr_title": "Obviously report operation timeout into flow CRUD operations", "pr_createdAt": "2020-01-10T16:26:50Z", "pr_url": "https://github.com/telstra/open-kilda/pull/3109", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzEyODc0Ng==", "url": "https://github.com/telstra/open-kilda/pull/3109#discussion_r387128746", "bodyText": "nit: I think, \"protected\" visibility fits better as the method will never be invoked by other components.", "author": "sergii-iakovenko", "createdAt": "2020-03-03T16:13:08Z", "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/flowhs/fsm/common/WithHistorySupportFsm.java", "diffHunk": "@@ -158,4 +158,13 @@ public final Instant getNextHistoryEntryTime() {\n         }\n         return lastHistoryEntryTime;\n     }\n+\n+    public abstract void reportError(E event);\n+\n+    public void reportGlobalTimeout() {", "originalCommit": "e1e6ec76c10f6774173a3b7f353278be5aa6a951", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc4Mzk1Ng==", "url": "https://github.com/telstra/open-kilda/pull/3109#discussion_r405783956", "bodyText": "ok. Changed.", "author": "surabujin", "createdAt": "2020-04-08T20:09:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzEyODc0Ng=="}], "type": "inlineReview"}, {"oid": "b9ecd7104ade957a08412cba680c388c5ba7eba5", "url": "https://github.com/telstra/open-kilda/commit/b9ecd7104ade957a08412cba680c388c5ba7eba5", "message": "Obviously report operation timeout into flow CRUD operations", "committedDate": "2020-04-08T20:43:38Z", "type": "forcePushed"}, {"oid": "1c2e50cddd6d3f142e02f12ceb78a031440dd9c2", "url": "https://github.com/telstra/open-kilda/commit/1c2e50cddd6d3f142e02f12ceb78a031440dd9c2", "message": "Obviously report operation timeout into flow CRUD operations", "committedDate": "2020-04-16T08:37:54Z", "type": "commit"}, {"oid": "1c2e50cddd6d3f142e02f12ceb78a031440dd9c2", "url": "https://github.com/telstra/open-kilda/commit/1c2e50cddd6d3f142e02f12ceb78a031440dd9c2", "message": "Obviously report operation timeout into flow CRUD operations", "committedDate": "2020-04-16T08:37:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEwMjgxNA==", "url": "https://github.com/telstra/open-kilda/pull/3109#discussion_r410102814", "bodyText": "nit:\ngetActionName", "author": "timofei-durakov", "createdAt": "2020-04-17T09:25:14Z", "path": "src-java/flowhs-topology/flowhs-storm-topology/src/main/java/org/openkilda/wfm/topology/flowhs/fsm/common/WithHistorySupportFsm.java", "diffHunk": "@@ -158,4 +158,13 @@ public final Instant getNextHistoryEntryTime() {\n         }\n         return lastHistoryEntryTime;\n     }\n+\n+    public abstract void reportError(E event);\n+\n+    protected void reportGlobalTimeout() {\n+        saveErrorToHistory(String.format(\n+                \"Global timeout reached for %s operation on flow \\\"%s\\\"\", getCrudActionName(), getFlowId()));\n+    }\n+\n+    protected abstract String getCrudActionName();", "originalCommit": "1c2e50cddd6d3f142e02f12ceb78a031440dd9c2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NTMyNw==", "url": "https://github.com/telstra/open-kilda/pull/3109#discussion_r412055327", "bodyText": "I would like to keep more verbose getCrudActionName method name. There is too many \"action\" \"things\" around FSM.", "author": "surabujin", "createdAt": "2020-04-21T10:11:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEwMjgxNA=="}], "type": "inlineReview"}]}