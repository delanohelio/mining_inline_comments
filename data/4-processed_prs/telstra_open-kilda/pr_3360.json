{"pr_number": 3360, "pr_title": "minor fixes in DefaultRulesSpec", "pr_createdAt": "2020-04-02T14:38:00Z", "pr_url": "https://github.com/telstra/open-kilda/pull/3360", "timeline": [{"oid": "ef8e74eb3dde3db36f499bb980e48c1f6ee3de90", "url": "https://github.com/telstra/open-kilda/commit/ef8e74eb3dde3db36f499bb980e48c1f6ee3de90", "message": "ignore ISL related rules in DefaultRulesSpec", "committedDate": "2020-04-02T16:12:24Z", "type": "forcePushed"}, {"oid": "852b4d803b3389a199de15c3bb4f8d86fff81fbb", "url": "https://github.com/telstra/open-kilda/commit/852b4d803b3389a199de15c3bb4f8d86fff81fbb", "message": "ignore ISL related rules in DefaultRulesSpec", "committedDate": "2020-04-03T12:20:13Z", "type": "forcePushed"}, {"oid": "56abff3ba3788174df9b465b7587e383980aba3d", "url": "https://github.com/telstra/open-kilda/commit/56abff3ba3788174df9b465b7587e383980aba3d", "message": "ignore ISL related rules in DefaultRulesSpec", "committedDate": "2020-04-08T09:15:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUwMDA0OQ==", "url": "https://github.com/telstra/open-kilda/pull/3360#discussion_r405500049", "bodyText": "why? finished flow update operation should guarantee that all resources are handled", "author": "rtretyak", "createdAt": "2020-04-08T12:52:21Z", "path": "src-java/testing/functional-tests/src/test/groovy/org/openkilda/functionaltests/spec/flows/FlowCrudV2Spec.groovy", "diffHunk": "@@ -1131,10 +1131,12 @@ class FlowCrudV2Spec extends HealthCheckSpecification {\n         }\n \n         and: \"The new and old dst switches pass switch validation\"\n-        [dstSwitch, newDstSwitch]*.dpId.each { switchId ->\n-            with(northbound.validateSwitch(switchId)) { validation ->\n-                validation.verifyRuleSectionsAreEmpty([\"missing\", \"excess\", \"misconfigured\"])\n-                validation.verifyMeterSectionsAreEmpty([\"missing\", \"excess\", \"misconfigured\"])\n+        Wrappers.wait(RULES_DELETION_TIME / 2) {", "originalCommit": "56abff3ba3788174df9b465b7587e383980aba3d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjExMjc5NA==", "url": "https://github.com/telstra/open-kilda/pull/3360#discussion_r406112794", "bodyText": "it is difficult to reproduce. Probably we need to run it around 30 times and one them is failed.\nit is a rare case, but sometimes it happens.", "author": "andriidovhan", "createdAt": "2020-04-09T10:34:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUwMDA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI3OTY2MA==", "url": "https://github.com/telstra/open-kilda/pull/3360#discussion_r406279660", "bodyText": "I often see failed build on jenkins due to this test", "author": "andriidovhan", "createdAt": "2020-04-09T15:15:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUwMDA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQxMjE5NA==", "url": "https://github.com/telstra/open-kilda/pull/3360#discussion_r407412194", "bodyText": "Ok, we can try, but the excess rules you're seeing may be due to #3256 and happen in a test that ran half an hour ago, and this test is just the first in the sequence that does the rules verificaiton and shows the problem", "author": "rtretyak", "createdAt": "2020-04-13T10:09:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUwMDA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQyNDExOA==", "url": "https://github.com/telstra/open-kilda/pull/3360#discussion_r407424118", "bodyText": "this issue is not caused by other test.\nI've rerun this test locally a lot of times and the issue sometimes is reproduced", "author": "andriidovhan", "createdAt": "2020-04-13T10:48:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUwMDA0OQ=="}], "type": "inlineReview"}, {"oid": "dba7614df47c63dc2c6df2a6d996449d4cb0a6f9", "url": "https://github.com/telstra/open-kilda/commit/dba7614df47c63dc2c6df2a6d996449d4cb0a6f9", "message": "ignore ISL related rules in DefaultRulesSpec", "committedDate": "2020-04-09T15:05:41Z", "type": "commit"}, {"oid": "dba7614df47c63dc2c6df2a6d996449d4cb0a6f9", "url": "https://github.com/telstra/open-kilda/commit/dba7614df47c63dc2c6df2a6d996449d4cb0a6f9", "message": "ignore ISL related rules in DefaultRulesSpec", "committedDate": "2020-04-09T15:05:41Z", "type": "forcePushed"}]}