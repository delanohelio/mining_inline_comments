{"pr_number": 3537, "pr_title": "Switch validation cleanup", "pr_createdAt": "2020-06-10T12:21:02Z", "pr_url": "https://github.com/telstra/open-kilda/pull/3537", "timeline": [{"oid": "506f851992ec1f3c03c46d1b64bc8cc781c1b68c", "url": "https://github.com/telstra/open-kilda/commit/506f851992ec1f3c03c46d1b64bc8cc781c1b68c", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology.", "committedDate": "2020-06-12T13:02:20Z", "type": "forcePushed"}, {"oid": "002947776d335d1aa68fd528b2a0313d7199fd7a", "url": "https://github.com/telstra/open-kilda/commit/002947776d335d1aa68fd528b2a0313d7199fd7a", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology.", "committedDate": "2020-06-12T13:05:47Z", "type": "forcePushed"}, {"oid": "a4e43bf5f88b96eabd23b276cf4eab93e5e2ad98", "url": "https://github.com/telstra/open-kilda/commit/a4e43bf5f88b96eabd23b276cf4eab93e5e2ad98", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology.", "committedDate": "2020-06-12T13:09:48Z", "type": "forcePushed"}, {"oid": "d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9", "url": "https://github.com/telstra/open-kilda/commit/d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology.", "committedDate": "2020-06-15T14:30:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcyMDQ3Mg==", "url": "https://github.com/telstra/open-kilda/pull/3537#discussion_r440720472", "bodyText": "nit: You can use NORTHBOUND_STREAM_ID here instead of StreamType.TO_NORTHBOUND.toString()", "author": "dpoltavets", "createdAt": "2020-06-16T09:38:33Z", "path": "src-java/swmanager-topology/swmanager-storm-topology/src/main/java/org/openkilda/wfm/topology/switchmanager/bolt/SwitchManagerHub.java", "diffHunk": "@@ -170,31 +179,38 @@ public void cancelTimeoutCallback(String key) {\n \n     @Override\n     public void sendCommandToSpeaker(String key, CommandData command) {\n-        emitWithContext(SpeakerWorkerBolt.INCOME_STREAM, getCurrentTuple(),\n-                new Values(KeyProvider.generateChainedKey(key), command));\n+        emit(SpeakerWorkerBolt.INCOME_STREAM, getCurrentTuple(), makeWorkerTuple(key, command));\n     }\n \n     @Override\n     public void response(String key, Message message) {\n-        getOutput().emit(StreamType.TO_NORTHBOUND.toString(), new Values(key, message));\n+        emit(StreamType.TO_NORTHBOUND.toString(), getCurrentTuple(), makeNorthboundTuple(key, message));", "originalCommit": "d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDc2NzM4Mw==", "url": "https://github.com/telstra/open-kilda/pull/3537#discussion_r440767383", "bodyText": "hmm... Looks like I have planned to use NORTHBOUND_STREAM_ID, but for some reason don't use it... fixed, thanks.", "author": "surabujin", "createdAt": "2020-06-16T11:03:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcyMDQ3Mg=="}], "type": "inlineReview"}, {"oid": "69539bc344f779465e759ea91fdb78a7ccca6aa7", "url": "https://github.com/telstra/open-kilda/commit/69539bc344f779465e759ea91fdb78a7ccca6aa7", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology.", "committedDate": "2020-06-16T11:02:35Z", "type": "commit"}, {"oid": "69539bc344f779465e759ea91fdb78a7ccca6aa7", "url": "https://github.com/telstra/open-kilda/commit/69539bc344f779465e759ea91fdb78a7ccca6aa7", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology.", "committedDate": "2020-06-16T11:02:35Z", "type": "forcePushed"}]}