{"pr_number": 8549, "pr_title": "Issue #8539: change diff trigger", "pr_createdAt": "2020-07-23T14:49:29Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8549", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNTk3NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r459515974", "bodyText": "it would be awesome is you move renaming/refacotring to separate commit.", "author": "romani", "createdAt": "2020-07-23T14:59:59Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -45,14 +45,20 @@ jobs:\n        id: parse\n        run: |\n         grep \"^Diff Regression projects:\" text > temp || echo \"\" > temp\n-        sed 's/Diff Regression projects: //' temp > project\n-        echo ::set-output name=project_link::$(cat project)\n+        sed 's/Diff Regression projects: //' temp > projects_link\n+        echo ::set-output name=projects_link::$(cat projects_link)", "originalCommit": "40f52093fba8e1702cf9c1e86c40e0c7e0598550", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDAwMDE0OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r460000148", "bodyText": "indentation correction and renaming is moved to separate commit", "author": "strkkk", "createdAt": "2020-07-24T11:36:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNTk3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNjU1OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r459516559", "bodyText": "grep \"^New module config:\" text | cat > temp might be better form", "author": "romani", "createdAt": "2020-07-23T15:00:47Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -45,14 +45,20 @@ jobs:\n        id: parse\n        run: |\n         grep \"^Diff Regression projects:\" text > temp || echo \"\" > temp\n-        sed 's/Diff Regression projects: //' temp > project\n-        echo ::set-output name=project_link::$(cat project)\n+        sed 's/Diff Regression projects: //' temp > projects_link\n+        echo ::set-output name=projects_link::$(cat projects_link)\n+\n         grep \"^Diff Regression config:\" text > temp || echo \"\" > temp\n-        sed 's/Diff Regression config: //' temp > config\n-        echo ::set-output name=config_link::$(cat config)\n+        sed 's/Diff Regression config: //' temp > config_link\n+        echo ::set-output name=config_link::$(cat config_link)\n+\n+        grep \"^New module config:\" text > temp || echo \"\" > temp", "originalCommit": "40f52093fba8e1702cf9c1e86c40e0c7e0598550", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDAwMDI4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r460000288", "bodyText": "done", "author": "strkkk", "createdAt": "2020-07-24T11:36:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNjU1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNjkzOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r459516939", "bodyText": "please move && and || to the begining", "author": "romani", "createdAt": "2020-07-23T15:01:18Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -64,17 +70,27 @@ jobs:\n   make_report:\n     runs-on: ubuntu-latest\n     needs: parse_body\n-    if: needs.parse_body.outputs.project_link != '' && needs.parse_body.outputs.config_link != ''\n+    if: needs.parse_body.outputs.projects_link != '' &&\n+        (needs.parse_body.outputs.config_link != '' ||", "originalCommit": "40f52093fba8e1702cf9c1e86c40e0c7e0598550", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDAwMDMyMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r460000320", "bodyText": "done", "author": "strkkk", "createdAt": "2020-07-24T11:36:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNjkzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNzcwOA==", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r459517708", "bodyText": "+2 spaces for indentation. The same for other linewraps.", "author": "romani", "createdAt": "2020-07-23T15:02:22Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -114,29 +127,22 @@ jobs:\n         aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n         aws-region: ${{ env.AWS_REGION }}    \n          \n-     - name: Generate basic difference report\n-       if: github.event.comment.body == 'diff report'\n+     - name: Generate report\n        run: |\n          cd contribution/checkstyle-tester\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          REPO=\"../../checkstyle\"\n-         if [ -f patch_config.xml ]; then\n-          groovy diff.groovy -r $REPO -b master -p $REF -bc config.xml -pc patch_config.xml\\\n+         if [ -f new_module_config.xml ]; then\n+          groovy diff.groovy -r $REPO -p $REF -pc new_module_config.xml -m single\\\n+          -l project.properties", "originalCommit": "40f52093fba8e1702cf9c1e86c40e0c7e0598550", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDAwMDQxNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8549#discussion_r460000414", "bodyText": "done in separate commit", "author": "strkkk", "createdAt": "2020-07-24T11:37:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNzcwOA=="}], "type": "inlineReview"}, {"oid": "b3752a62c9ad260e640d064922d5e66218ebcabe", "url": "https://github.com/checkstyle/checkstyle/commit/b3752a62c9ad260e640d064922d5e66218ebcabe", "message": "Issue #8539: change diff trigger", "committedDate": "2020-07-24T11:25:06Z", "type": "commit"}, {"oid": "7d3c9b2de300067013c64c026a02f6d9ad2d264f", "url": "https://github.com/checkstyle/checkstyle/commit/7d3c9b2de300067013c64c026a02f6d9ad2d264f", "message": "minor: indentation and renaming in diff_report.yml", "committedDate": "2020-07-24T11:29:41Z", "type": "commit"}, {"oid": "7d3c9b2de300067013c64c026a02f6d9ad2d264f", "url": "https://github.com/checkstyle/checkstyle/commit/7d3c9b2de300067013c64c026a02f6d9ad2d264f", "message": "minor: indentation and renaming in diff_report.yml", "committedDate": "2020-07-24T11:29:41Z", "type": "forcePushed"}]}