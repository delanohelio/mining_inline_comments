{"pr_number": 8417, "pr_title": "Issue #8407: new Check: PatternVariableName", "pr_createdAt": "2020-07-07T23:33:14Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8417", "timeline": [{"oid": "9abd5c4a54cf5d1f46845b0506317c9d23197aba", "url": "https://github.com/checkstyle/checkstyle/commit/9abd5c4a54cf5d1f46845b0506317c9d23197aba", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-07T23:51:26Z", "type": "forcePushed"}, {"oid": "8e263e714ec0cfd3b6a382b0d66b82cf5addec9a", "url": "https://github.com/checkstyle/checkstyle/commit/8e263e714ec0cfd3b6a382b0d66b82cf5addec9a", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-08T01:23:50Z", "type": "forcePushed"}, {"oid": "95a6d60f3d83041d9fe84e89d6e8021af825693a", "url": "https://github.com/checkstyle/checkstyle/commit/95a6d60f3d83041d9fe84e89d6e8021af825693a", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-08T01:25:25Z", "type": "forcePushed"}, {"oid": "5117caf158dc65ce0e5e0aca61af581d046db275", "url": "https://github.com/checkstyle/checkstyle/commit/5117caf158dc65ce0e5e0aca61af581d046db275", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-08T01:34:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTQ0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453241443", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /** Creates a new {@code PatternVariableName} instance. */\n          \n          \n            \n                /** Creates a new {@code PatternVariableNameCheck} instance. */", "author": "esilkensen", "createdAt": "2020-07-11T22:29:38Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/naming/PatternVariableNameCheck.java", "diffHunk": "@@ -0,0 +1,129 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.naming;\n+\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+\n+/**\n+ * <p>\n+ * Checks that pattern variable names conform to a specified pattern.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code format} - Specifies valid identifiers. Default value is\n+ * {@code \"^[a-z][a-zA-Z0-9]*$\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * An example of how to configure the check is:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"PatternVariableName\"/&gt;\n+ * </pre>\n+ * <p>Code Example:</p>\n+ * <pre>\n+ * class MyClass {\n+ *     {\n+ *         Object o1 = null;\n+ *         if (o1 instanceof String STRING) { // violation, name 'STRING' must\n+ *                                            // match pattern '^[a-z][a-zA-Z0-9]*$'\n+ *         }\n+ *         if (o1 instanceof Integer num) { // OK\n+ *         }\n+ *     }\n+ * }\n+ * </pre>\n+ * <p>\n+ * An example of how to configure the check for names that begin with a lower\n+ * case letter, followed by letters, digits, and underscores is:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"PatternVariableName\"&gt;\n+ *   &lt;property name=\"format\" value=\"^[a-z](_?[a-zA-Z0-9]+)*$\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>Code Example:</p>\n+ * <pre>\n+ * class MyClass {\n+ *     {\n+ *         Object o1 = null;\n+ *         if (o1 instanceof String STR) { // violation, name 'STR' must\n+ *                                         // match pattern '^[a-z](_?[a-zA-Z0-9]+)*$'\n+ *         }\n+ *         if (o1 instanceof Integer num) { // OK\n+ *         }\n+ *         if (o1 instanceof Integer num_1) { // OK\n+ *         }\n+ *     }\n+ * }\n+ * </pre>\n+ * <p>\n+ * An example of how to configure the check to that all variables have 3 or more chars in name:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"PatternVariableName\"&gt;\n+ *   &lt;property name=\"format\" value=\"^[a-z][_a-zA-Z0-9]{2,}$\"/&gt;\n+ * &lt;/module&gt;\n+ * </pre>\n+ * <p>Code Example:</p>\n+ * <pre>\n+ * class MyClass {\n+ *     {\n+ *         Object o1 = null;\n+ *         if (o1 instanceof String s) { // violation, name 's' must\n+ *                                       // match pattern '^[a-z][_a-zA-Z0-9]{2,}$'\n+ *         }\n+ *         if (o1 instanceof Integer num) { // OK\n+ *         }\n+ *     }\n+ * }\n+ * </pre>\n+ * @since 8.35\n+ */\n+public class PatternVariableNameCheck extends AbstractNameCheck {\n+\n+    /** Creates a new {@code PatternVariableName} instance. */", "originalCommit": "5117caf158dc65ce0e5e0aca61af581d046db275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQzNDI0MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453434241", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-13T04:55:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTQ0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTU1OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453241558", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    //Violation, s doesn't match ^[a-z][a-zA-Z0-9]+$\n          \n          \n            \n                    // Violation, s doesn't match ^[a-z][a-zA-Z0-9]+$\n          \n      \n    \n    \n  \n\nMeta comment: do we typically list \"violation\" and \"ok\" comments in test inputs that are used in multiple test configurations? I was just thinking it's potentially a little confusing reading this file to see references to different patterns.", "author": "esilkensen", "createdAt": "2020-07-11T22:30:41Z", "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/naming/patternvariablename/InputPatternVariableNameEnhancedInstanceof.java", "diffHunk": "@@ -0,0 +1,88 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.naming.patternvariablename;\n+\n+import java.util.ArrayList;\n+import java.util.Locale;\n+\n+public class InputPatternVariableNameEnhancedInstanceof {\n+    private Object obj;\n+\n+    static boolean doStuff(Object obj) {\n+        // Violation, OTHER doesn't match ^[a-z][a-zA-Z0-9]*$\n+        return obj instanceof Integer OTHER && OTHER > 0;\n+    }\n+\n+    static {\n+        Object o = \"\";\n+        //Violation, s doesn't match ^[a-z][a-zA-Z0-9]+$", "originalCommit": "5117caf158dc65ce0e5e0aca61af581d046db275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI2MTMyNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453261327", "bodyText": "Input should be used in single test methods, so single config.\nUnfortunately not all inputs follow this model.", "author": "romani", "createdAt": "2020-07-12T03:23:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM1MDk3NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453350974", "bodyText": "I am going to amend this PR to have one input for each test method, and will do this going forward for all checks.", "author": "nmancus1", "createdAt": "2020-07-12T18:56:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTU1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQzNDAwMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453434001", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-13T04:54:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTU1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTYyNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453241625", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    //Violation, s doesn't match ^[a-z][a-zA-Z0-9]+$\n          \n          \n            \n                    // Violation, s doesn't match ^[a-z][a-zA-Z0-9]+$", "author": "esilkensen", "createdAt": "2020-07-11T22:31:40Z", "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/naming/patternvariablename/InputPatternVariableNameEnhancedInstanceof.java", "diffHunk": "@@ -0,0 +1,88 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.naming.patternvariablename;\n+\n+import java.util.ArrayList;\n+import java.util.Locale;\n+\n+public class InputPatternVariableNameEnhancedInstanceof {\n+    private Object obj;\n+\n+    static boolean doStuff(Object obj) {\n+        // Violation, OTHER doesn't match ^[a-z][a-zA-Z0-9]*$\n+        return obj instanceof Integer OTHER && OTHER > 0;\n+    }\n+\n+    static {\n+        Object o = \"\";\n+        //Violation, s doesn't match ^[a-z][a-zA-Z0-9]+$\n+        if (o instanceof String s) {\n+            System.out.println(s.toLowerCase(Locale.forLanguageTag(s)));\n+            boolean stringCheck = \"test\".equals(s);\n+        }\n+\n+        // Violation, Count doesn't match ^[a-z][a-zA-Z0-9]*$\n+        if (o instanceof Integer Count) {\n+            int value = Count.byteValue();\n+            if (Count.equals(value)) {\n+                value = 25;\n+            }\n+        }\n+    }\n+\n+    interface VoidPredicate {\n+        public boolean get();\n+    }\n+\n+    public void t(Object o1, Object o2) {\n+        Object b;\n+        Object c;\n+        // Violation, STRING doesn't match ^[a-z][a-zA-Z0-9]*$\n+        if (!(o1 instanceof String S) && (o2 instanceof String STRING)) {\n+        }\n+        // Violation, STRING doesn't match ^[a-z][a-zA-Z0-9]*$\n+        // Check two on the same line\n+        if (o1 instanceof String STRING || !(o2 instanceof String STRING)) {\n+        }\n+        //Violation, s doesn't match ^[a-z][a-zA-Z0-9]+$", "originalCommit": "5117caf158dc65ce0e5e0aca61af581d046db275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQzNDA4MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453434080", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-13T04:55:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTYyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTY4NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453241685", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    //Violation, a doesn't match ^[a-z][a-zA-Z0-9]+$ (x3)\n          \n          \n            \n                    // Violation, a doesn't match ^[a-z][a-zA-Z0-9]+$ (x3)", "author": "esilkensen", "createdAt": "2020-07-11T22:32:42Z", "path": "src/test/resources-noncompilable/com/puppycrawl/tools/checkstyle/checks/naming/patternvariablename/InputPatternVariableNameEnhancedInstanceof.java", "diffHunk": "@@ -0,0 +1,88 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.puppycrawl.tools.checkstyle.checks.naming.patternvariablename;\n+\n+import java.util.ArrayList;\n+import java.util.Locale;\n+\n+public class InputPatternVariableNameEnhancedInstanceof {\n+    private Object obj;\n+\n+    static boolean doStuff(Object obj) {\n+        // Violation, OTHER doesn't match ^[a-z][a-zA-Z0-9]*$\n+        return obj instanceof Integer OTHER && OTHER > 0;\n+    }\n+\n+    static {\n+        Object o = \"\";\n+        //Violation, s doesn't match ^[a-z][a-zA-Z0-9]+$\n+        if (o instanceof String s) {\n+            System.out.println(s.toLowerCase(Locale.forLanguageTag(s)));\n+            boolean stringCheck = \"test\".equals(s);\n+        }\n+\n+        // Violation, Count doesn't match ^[a-z][a-zA-Z0-9]*$\n+        if (o instanceof Integer Count) {\n+            int value = Count.byteValue();\n+            if (Count.equals(value)) {\n+                value = 25;\n+            }\n+        }\n+    }\n+\n+    interface VoidPredicate {\n+        public boolean get();\n+    }\n+\n+    public void t(Object o1, Object o2) {\n+        Object b;\n+        Object c;\n+        // Violation, STRING doesn't match ^[a-z][a-zA-Z0-9]*$\n+        if (!(o1 instanceof String S) && (o2 instanceof String STRING)) {\n+        }\n+        // Violation, STRING doesn't match ^[a-z][a-zA-Z0-9]*$\n+        // Check two on the same line\n+        if (o1 instanceof String STRING || !(o2 instanceof String STRING)) {\n+        }\n+        //Violation, s doesn't match ^[a-z][a-zA-Z0-9]+$\n+        b = ((VoidPredicate) () -> o1 instanceof String s).get();\n+\n+        ArrayList<Integer> arrayList = new ArrayList<Integer>();\n+        if (arrayList instanceof ArrayList<Integer> ai) {\n+            System.out.println(\"Blah\");\n+        }\n+\n+        //Violation, a doesn't match ^[a-z][a-zA-Z0-9]+$ (x3)", "originalCommit": "5117caf158dc65ce0e5e0aca61af581d046db275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQzNDExMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453434111", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-13T04:55:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MTY4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjI0Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453242247", "bodyText": "Should be 8.35?", "author": "esilkensen", "createdAt": "2020-07-11T22:40:35Z", "path": "src/xdocs/config_naming.xml", "diffHunk": "@@ -2293,6 +2293,135 @@ class MyClass {\n       </subsection>\n     </section>\n \n+    <section name=\"PatternVariableName\">\n+          <p>Since Checkstyle 8.35</p>\n+          <subsection name=\"Description\" id=\"PatternVariableName_Description\">\n+              <p>\n+                  Checks that pattern variable names conform to a specified pattern.\n+              </p>\n+          </subsection>\n+\n+          <subsection name=\"Properties\" id=\"PatternVariableName_Properties\">\n+              <div class=\"wrapper\">\n+                  <table>\n+                      <tr>\n+                          <th>name</th>\n+                          <th>description</th>\n+                          <th>type</th>\n+                          <th>default value</th>\n+                          <th>since</th>\n+                      </tr>\n+                      <tr>\n+                          <td>format</td>\n+                          <td>Specifies valid identifiers.</td>\n+                          <td><a href=\"property_types.html#regexp\">Pattern</a></td>\n+                          <td><code>\"^[a-z][a-zA-Z0-9]*$\"</code></td>\n+                          <td>3.0</td>", "originalCommit": "5117caf158dc65ce0e5e0aca61af581d046db275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQzNDE0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453434143", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-13T04:55:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjI0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjQzMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453242432", "bodyText": "These examples look a little strange - indentation, and curious if there's a reason the code here (and in the xpath example files) is in a block like this and not a constructor or method?", "author": "esilkensen", "createdAt": "2020-07-11T22:43:08Z", "path": "src/xdocs/config_naming.xml", "diffHunk": "@@ -2293,6 +2293,135 @@ class MyClass {\n       </subsection>\n     </section>\n \n+    <section name=\"PatternVariableName\">\n+          <p>Since Checkstyle 8.35</p>\n+          <subsection name=\"Description\" id=\"PatternVariableName_Description\">\n+              <p>\n+                  Checks that pattern variable names conform to a specified pattern.\n+              </p>\n+          </subsection>\n+\n+          <subsection name=\"Properties\" id=\"PatternVariableName_Properties\">\n+              <div class=\"wrapper\">\n+                  <table>\n+                      <tr>\n+                          <th>name</th>\n+                          <th>description</th>\n+                          <th>type</th>\n+                          <th>default value</th>\n+                          <th>since</th>\n+                      </tr>\n+                      <tr>\n+                          <td>format</td>\n+                          <td>Specifies valid identifiers.</td>\n+                          <td><a href=\"property_types.html#regexp\">Pattern</a></td>\n+                          <td><code>\"^[a-z][a-zA-Z0-9]*$\"</code></td>\n+                          <td>3.0</td>\n+                      </tr>\n+                  </table>\n+              </div>\n+          </subsection>\n+\n+          <subsection name=\"Examples\" id=\"PatternVariableName_Examples\">\n+              <p>\n+                  An example of how to configure the check is:\n+              </p>\n+\n+              <source>\n+                  &lt;module name=\"PatternVariableName\"/&gt;\n+              </source>\n+              <p>Code Example:</p>\n+              <source>\n+                  class MyClass {\n+                  {\n+                  Object o1 = null;\n+                  if (o1 instanceof String STRING) { // violation, name 'STRING' must\n+                  // match pattern '^[a-z][a-zA-Z0-9]*$'\n+                  }\n+                  if (o1 instanceof Integer num) { // OK\n+                  }\n+                  }\n+                  }", "originalCommit": "5117caf158dc65ce0e5e0aca61af581d046db275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM1MDY5Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453350696", "bodyText": "My reasoning was to keep code that wasn't relevant to the check/ this particular construct to a minimum; should I add more context to this code and make it more realistic?", "author": "nmancus1", "createdAt": "2020-07-12T18:53:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjQzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM1MDc4NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453350784", "bodyText": "Especially in these examples for the documentation, I did not want to over complicate the code.", "author": "nmancus1", "createdAt": "2020-07-12T18:54:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjQzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQzNjMyOA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r453436328", "bodyText": "I might vote to go ahead and name the block as a constructor or method just because it's a little more familiar, but it's a minor point of course -- I'll send this PR to @pbludov now, maybe he has a thought on it.", "author": "esilkensen", "createdAt": "2020-07-13T05:04:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjQzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDE0MTAyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r454141024", "bodyText": "I agree with @esilkensen. The examples should be easy to read. The indentations are definitely necessary.", "author": "pbludov", "createdAt": "2020-07-14T06:52:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjQzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI1NTExMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r454255110", "bodyText": "I have pushed since this review, and fixed the indentation mistake. Just to be clear, you would like me to add  methods or constructors instead of just having the code in a static block?", "author": "nmancus1", "createdAt": "2020-07-14T10:21:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjQzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU0MjQ4Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r454542487", "bodyText": "In my opinion, the constructor is better .", "author": "pbludov", "createdAt": "2020-07-14T18:00:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjQzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcyMzI0MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r454723241", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-15T00:39:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzI0MjQzMg=="}], "type": "inlineReview"}, {"oid": "74d3dbc0b7a286c732fb877d925ac18e427dae7c", "url": "https://github.com/checkstyle/checkstyle/commit/74d3dbc0b7a286c732fb877d925ac18e427dae7c", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-13T04:52:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEzMDc0NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r454130744", "bodyText": "Why not com.puppycrawl.tools.checkstyle.checks.naming.PatternVariableNameCheck*?", "author": "pbludov", "createdAt": "2020-07-14T06:27:37Z", "path": "pom.xml", "diffHunk": "@@ -1857,6 +1857,9 @@\n                 <param>com.puppycrawl.tools.checkstyle.checks.NoCodeInFileCheck*</param>\n                 <param>com.puppycrawl.tools.checkstyle.checks.OrderedPropertiesCheck*</param>\n                 <param>com.puppycrawl.tools.checkstyle.checks.OuterTypeFilenameCheck*</param>\n+                <param>\n+                  com.puppycrawl.tools.checkstyle.checks.naming.PatternVariableNameCheck", "originalCommit": "74d3dbc0b7a286c732fb877d925ac18e427dae7c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcyMzIwNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r454723204", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-15T00:39:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEzMDc0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEzNTg0OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r454135848", "bodyText": "Actually, this is a pattern for \"a lower case letter, followed by letters and digits, optionally separated by underscore\".\nThese variable names: foo_, foo___bar do not match the pattern, although they are \"begin with a lower\ncase letter, followed by letters, digits, and underscores\". Please update either the pattern or the description.", "author": "pbludov", "createdAt": "2020-07-14T06:40:17Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/naming/PatternVariableNameCheck.java", "diffHunk": "@@ -0,0 +1,140 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package com.puppycrawl.tools.checkstyle.checks.naming;\n+\n+import com.puppycrawl.tools.checkstyle.api.DetailAST;\n+import com.puppycrawl.tools.checkstyle.api.TokenTypes;\n+\n+/**\n+ * <p>\n+ * Checks that pattern variable names conform to a specified pattern.\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * Property {@code format} - Specifies valid identifiers. Type is {@code java.util.regex.Pattern}.\n+ * Default value is {@code \"^[a-z][a-zA-Z0-9]*$\"}.\n+ * </li>\n+ * </ul>\n+ * <p>\n+ * An example of how to configure the check is:\n+ * </p>\n+ * <pre>\n+ * &lt;module name=\"PatternVariableName\"/&gt;\n+ * </pre>\n+ * <p>Code Example:</p>\n+ * <pre>\n+ * class MyClass {\n+ *     {\n+ *         Object o1 = null;\n+ *         if (o1 instanceof String STRING) { // violation, name 'STRING' must\n+ *                                            // match pattern '^[a-z][a-zA-Z0-9]*$'\n+ *         }\n+ *         if (o1 instanceof Integer num) { // OK\n+ *         }\n+ *     }\n+ * }\n+ * </pre>\n+ * <p>\n+ * An example of how to configure the check for names that begin with a lower\n+ * case letter, followed by letters, digits, and underscores is:", "originalCommit": "74d3dbc0b7a286c732fb877d925ac18e427dae7c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY3MDAzMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r454670030", "bodyText": "Thanks for pointing this out, regex is definitely something I need to study more.", "author": "nmancus1", "createdAt": "2020-07-14T21:58:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEzNTg0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDcyMzE1Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r454723156", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-15T00:39:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDEzNTg0OA=="}], "type": "inlineReview"}, {"oid": "bb9f315cb0afbd18bd549e8cd60b74735a9b8112", "url": "https://github.com/checkstyle/checkstyle/commit/bb9f315cb0afbd18bd549e8cd60b74735a9b8112", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-15T00:34:33Z", "type": "forcePushed"}, {"oid": "302954a7da5819fc7314c33e43f0aed32421706b", "url": "https://github.com/checkstyle/checkstyle/commit/302954a7da5819fc7314c33e43f0aed32421706b", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-26T12:10:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUyODY4Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r460528686", "bodyText": "remove config from google inputs, it is not required as config is single.\nWe have rule for embedded config only for UTs, where we have numerous configs.\nGoogle is single config, so copy of config will not do very good job, as google style is also changing periodically.", "author": "romani", "createdAt": "2020-07-26T13:34:56Z", "path": "src/it/resources-noncompilable/com/google/checkstyle/test/chapter5naming/rule527localvariablenames/InputPatternVariableNameEnhancedInstanceofTestDefault.java", "diffHunk": "@@ -0,0 +1,83 @@\n+//non-compiled with javac: Compilable with Java14\n+package com.google.checkstyle.test.chapter5naming.rule527localvariablenames;\n+\n+import java.util.ArrayList;\n+import java.util.Locale;\n+/*\n+ * Config:\n+ * tokens = PATTERN_VARIABLE_DEF\n+ * format = \"^[a-z][a-zA-Z0-9]*$\"", "originalCommit": "302954a7da5819fc7314c33e43f0aed32421706b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUzMTEwMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r460531102", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-26T13:58:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUyODY4Ng=="}], "type": "inlineReview"}, {"oid": "e167e84b9a3a955a07e9dbb49dc17e9978d5cd70", "url": "https://github.com/checkstyle/checkstyle/commit/e167e84b9a3a955a07e9dbb49dc17e9978d5cd70", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-26T13:48:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU0MDQ4Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r460540487", "bodyText": "8.36", "author": "romani", "createdAt": "2020-07-26T15:26:22Z", "path": "src/xdocs/config_naming.xml", "diffHunk": "@@ -2296,6 +2296,136 @@ class MyClass {\n       </subsection>\n     </section>\n \n+    <section name=\"PatternVariableName\">\n+          <p>Since Checkstyle 8.35</p>", "originalCommit": "e167e84b9a3a955a07e9dbb49dc17e9978d5cd70", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU0NDIxNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8417#discussion_r460544217", "bodyText": "Fixed.", "author": "nmancus1", "createdAt": "2020-07-26T16:03:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU0MDQ4Nw=="}], "type": "inlineReview"}, {"oid": "c374bce02506428cad75d6c2de89c0d0e5d04745", "url": "https://github.com/checkstyle/checkstyle/commit/c374bce02506428cad75d6c2de89c0d0e5d04745", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-26T16:02:49Z", "type": "commit"}, {"oid": "c374bce02506428cad75d6c2de89c0d0e5d04745", "url": "https://github.com/checkstyle/checkstyle/commit/c374bce02506428cad75d6c2de89c0d0e5d04745", "message": "Issue #8407: new Check: PatternVariableName", "committedDate": "2020-07-26T16:02:49Z", "type": "forcePushed"}]}