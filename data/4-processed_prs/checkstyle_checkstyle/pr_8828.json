{"pr_number": 8828, "pr_title": "Issue #8827: Diff Report should be generated against main checkstyle's branch", "pr_createdAt": "2020-09-13T11:20:31Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8828", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDU1Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530553", "bodyText": "this line is longer than 100 symbols, CI does not like it. Please wrap it", "author": "strkkk", "createdAt": "2020-09-13T13:36:38Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -133,14 +144,15 @@ jobs:\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          REPO=\"../../checkstyle\"\n+         REF_BRANCH=\"upstream/master\"\n          if [ -f new_module_config.xml ]; then\n            groovy diff.groovy -r $REPO -p $REF -pc new_module_config.xml -m single\\\n              -l project.properties\n          elif [ -f patch_config.xml ]; then\n-           groovy diff.groovy -r $REPO -b master -p $REF -bc diff_config.xml -pc patch_config.xml\\\n+           groovy diff.groovy -r $REPO -b $REF_BRANCH -p $REF -bc diff_config.xml -pc patch_config.xml\\", "originalCommit": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDU3Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530577", "bodyText": "same here", "author": "strkkk", "createdAt": "2020-09-13T13:36:46Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -133,14 +144,15 @@ jobs:\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          REPO=\"../../checkstyle\"\n+         REF_BRANCH=\"upstream/master\"\n          if [ -f new_module_config.xml ]; then\n            groovy diff.groovy -r $REPO -p $REF -pc new_module_config.xml -m single\\\n              -l project.properties\n          elif [ -f patch_config.xml ]; then\n-           groovy diff.groovy -r $REPO -b master -p $REF -bc diff_config.xml -pc patch_config.xml\\\n+           groovy diff.groovy -r $REPO -b $REF_BRANCH -p $REF -bc diff_config.xml -pc patch_config.xml\\\n              -l project.properties\n          else\n-           groovy diff.groovy -r $REPO -b master -p $REF -c diff_config.xml -l project.properties\n+           groovy diff.groovy -r $REPO -b $REF_BRANCH -p $REF -c diff_config.xml -l project.properties", "originalCommit": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDY0Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530642", "bodyText": "BASE_BRANCH sounds better", "author": "strkkk", "createdAt": "2020-09-13T13:37:27Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -133,14 +144,15 @@ jobs:\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          REPO=\"../../checkstyle\"\n+         REF_BRANCH=\"upstream/master\"", "originalCommit": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDcwNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530704", "bodyText": "upstream's branch as a reference branch -> upstream's master branch as a base branch", "author": "strkkk", "createdAt": "2020-09-13T13:38:08Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's branch as a reference branch", "originalCommit": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzUzMDc2MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487530761", "bodyText": "naming is a bit weird, please change it to something like MAIN_REPO_GIT_URL", "author": "strkkk", "createdAt": "2020-09-13T13:38:59Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's branch as a reference branch\n+     - name: set upstream\n+       run: |\n+         cd checkstyle\n+         bash\n+         MAIN_CHECKSTYLE_HTTPS=\"https://github.com/checkstyle/checkstyle.git\"", "originalCommit": "8bdc986f631f511ad48ee3b489d5a54e7c9fbb77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "85c1629220798dfee9d26538565cb6fc9890fcf8", "url": "https://github.com/checkstyle/checkstyle/commit/85c1629220798dfee9d26538565cb6fc9890fcf8", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch", "committedDate": "2020-09-13T14:02:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MDEyOA==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487980128", "bodyText": "original_checkstyle ==> upstream-master", "author": "romani", "createdAt": "2020-09-14T14:33:30Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's master branch as a base branch\n+     - name: set upstream\n+       run: |\n+         cd checkstyle\n+         bash\n+         MAIN_REPO_GIT_URL=\"https://github.com/checkstyle/checkstyle.git\"\n+         git remote add original_checkstyle $MAIN_REPO_GIT_URL\\", "originalCommit": "85c1629220798dfee9d26538565cb6fc9890fcf8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA4NTQ4Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r488085486", "bodyText": "@romani\n\n\"Base branch: upstream/master\", may be it is better to name remote as original_checkstyle to make it like \"Base branch: original_checkstyle/master\". What do you think?\n\nsee: #8828 (comment)\n@strkkk suggested to change upstream to original_checkstyle so that it looks much relatable to diff report home page. I too liked it.\nShould I change it again?\nIt will look like upstream-master/master after this change.", "author": "Abhishek-kumar09", "createdAt": "2020-09-14T16:57:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MDEyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEwMjMwNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r488102304", "bodyText": "current-report homepage: https://abhishek-kumar09.github.io/github-actions-report-fetch/", "author": "Abhishek-kumar09", "createdAt": "2020-09-14T17:26:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MDEyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE3NTYyOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r488175629", "bodyText": "@strkkk, original and origin is kind of the same. It should be better to make it clear that we do not use origin of user at all.\nPlease share your thoughts on this", "author": "romani", "createdAt": "2020-09-14T19:39:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MDEyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE4MzQ4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r488183488", "bodyText": "@romani as for me, original_checkstyle is clearer than \"origin\" or \"upstream\"\nI do not insist on this naming.", "author": "strkkk", "createdAt": "2020-09-14T19:54:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MDEyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE1OTE4MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r490159180", "bodyText": "what should I do here?", "author": "Abhishek-kumar09", "createdAt": "2020-09-17T11:09:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MDEyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE2OTM4OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r490169389", "bodyText": "@Abhishek-kumar09 please change to what @romani suggested to avoid long discussions and to not blocking you", "author": "strkkk", "createdAt": "2020-09-17T11:28:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MDEyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDI4NDg5Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r490284892", "bodyText": "Done", "author": "Abhishek-kumar09", "createdAt": "2020-09-17T14:19:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MDEyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MTY2MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r487981660", "bodyText": "please do git fetch original_checkstyle as separate command, not need for long lines,\nWe use model - fail fast. If something is failing to execute, all commands below unlikely to execute too.", "author": "romani", "createdAt": "2020-09-14T14:35:29Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's master branch as a base branch\n+     - name: set upstream\n+       run: |\n+         cd checkstyle\n+         bash\n+         MAIN_REPO_GIT_URL=\"https://github.com/checkstyle/checkstyle.git\"\n+         git remote add original_checkstyle $MAIN_REPO_GIT_URL\\\n+           && git fetch original_checkstyle;", "originalCommit": "85c1629220798dfee9d26538565cb6fc9890fcf8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEwODg5NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r488108894", "bodyText": "OK, Done", "author": "Abhishek-kumar09", "createdAt": "2020-09-14T17:38:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzk4MTY2MA=="}], "type": "inlineReview"}, {"oid": "bf1a407f69dc0a501cf64ee08fbd6fb711e55bdb", "url": "https://github.com/checkstyle/checkstyle/commit/bf1a407f69dc0a501cf64ee08fbd6fb711e55bdb", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch", "committedDate": "2020-09-14T17:22:34Z", "type": "forcePushed"}, {"oid": "f045b7271ea868ba77ea96d3f3f43945cc9a5ac1", "url": "https://github.com/checkstyle/checkstyle/commit/f045b7271ea868ba77ea96d3f3f43945cc9a5ac1", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch", "committedDate": "2020-09-17T14:16:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE3MjM4OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r491172389", "bodyText": "Make it\ngit remote add upstream $MAIN_REPO_GIT_URL\nAs you add whole repository, not a just one branch of it.\nSorry that I requested bad name in previous review session", "author": "romani", "createdAt": "2020-09-18T20:22:18Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -104,6 +104,17 @@ jobs:\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n+\n+     # set main checkstyle repo as an upstream\n+     # Diff report will be generated taking upstream's master branch as a base branch\n+     - name: set upstream\n+       run: |\n+         cd checkstyle\n+         bash\n+         MAIN_REPO_GIT_URL=\"https://github.com/checkstyle/checkstyle.git\"\n+         git remote add upstream-master $MAIN_REPO_GIT_URL", "originalCommit": "f045b7271ea868ba77ea96d3f3f43945cc9a5ac1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE3OTQ1NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8828#discussion_r491179454", "bodyText": "@romani Done\n\nSorry that I requested bad name in previous review session\n\nNo worries", "author": "Abhishek-kumar09", "createdAt": "2020-09-18T20:38:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE3MjM4OQ=="}], "type": "inlineReview"}, {"oid": "229a6634c00f5032e3f6110ef14624befb0995fa", "url": "https://github.com/checkstyle/checkstyle/commit/229a6634c00f5032e3f6110ef14624befb0995fa", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch", "committedDate": "2020-09-18T20:37:55Z", "type": "commit"}, {"oid": "229a6634c00f5032e3f6110ef14624befb0995fa", "url": "https://github.com/checkstyle/checkstyle/commit/229a6634c00f5032e3f6110ef14624befb0995fa", "message": "Issue #8827: Diff Report should be generated against main checkstyle's master branch", "committedDate": "2020-09-18T20:37:55Z", "type": "forcePushed"}]}