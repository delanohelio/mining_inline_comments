{"pr_number": 7916, "pr_title": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "pr_createdAt": "2020-03-20T16:23:21Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/7916", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAzNjMzNw==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r396036337", "bodyText": "we do not need to remove token from Check and will break a lot in this world.\nIf Google style do not need this token, ti should be removed from Google config.", "author": "romani", "createdAt": "2020-03-21T22:55:24Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/whitespace/NoWhitespaceBeforeCheck.java", "diffHunk": "@@ -156,7 +154,6 @@\n             TokenTypes.SEMI,\n             TokenTypes.POST_INC,\n             TokenTypes.POST_DEC,\n-            TokenTypes.ELLIPSIS,", "originalCommit": "c4608893d6ac87235d4d877913806ea0ae19236f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA1MzM1MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r396053350", "bodyText": "@romani @rnveach I understand, so we don't need change anything about #6707, it can be fixed through user's configuration, right?", "author": "HuGanghui", "createdAt": "2020-03-22T04:30:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAzNjMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjcxOTEzOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r396719139", "bodyText": "Yes, at  least  that is  how see issue now.\nAs you generate diff report we might see some other issue.", "author": "romani", "createdAt": "2020-03-23T19:55:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAzNjMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk2NTMzNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r412965335", "bodyText": "please revert this change.", "author": "romani", "createdAt": "2020-04-22T13:07:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAzNjMzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI4MTg0MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r414281841", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-24T04:22:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAzNjMzNw=="}], "type": "inlineReview"}, {"oid": "1fc7d0aff754c88917a8e2ed3f19d2ea755066b1", "url": "https://github.com/checkstyle/checkstyle/commit/1fc7d0aff754c88917a8e2ed3f19d2ea755066b1", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-17T07:54:47Z", "type": "forcePushed"}, {"oid": "b1797442382566cb27159614a8ef022541d3c11b", "url": "https://github.com/checkstyle/checkstyle/commit/b1797442382566cb27159614a8ef022541d3c11b", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-21T16:14:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk2NjIxMg==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r412966212", "bodyText": "please add to google style IT Inputs bunch of code with all possible combinations of ... and annotations.", "author": "romani", "createdAt": "2020-04-22T13:08:23Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/checks/whitespace/NoWhitespaceBeforeCheckTest.java", "diffHunk": "@@ -49,7 +49,6 @@ public void testDefault() throws Exception {\n             \"266:1: \" + getCheckMessage(MSG_KEY, \";\"),\n             \"270:16: \" + getCheckMessage(MSG_KEY, \";\"),\n             \"284:1: \" + getCheckMessage(MSG_KEY, \";\"),\n-            \"287:62: \" + getCheckMessage(MSG_KEY, \"...\"),", "originalCommit": "b1797442382566cb27159614a8ef022541d3c11b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI4MTg3NA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r414281874", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-24T04:22:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk2NjIxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk2NjkxMg==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r412966912", "bodyText": "please update default NoWhitespaceBefore to have no ELLIPSIS in tokens list.", "author": "romani", "createdAt": "2020-04-22T13:09:20Z", "path": "config/checkstyle_checks.xml", "diffHunk": "@@ -709,6 +709,9 @@\n       <property name=\"tokens\" value=\"METHOD_REF\"/>\n     </module>\n     <module name=\"NoWhitespaceBefore\"/>\n+    <module name=\"NoWhitespaceBefore\">\n+      <property name=\"tokens\" value=\"ELLIPSIS\"/>\n+    </module>", "originalCommit": "b1797442382566cb27159614a8ef022541d3c11b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI4MTk1MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r414281950", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-24T04:22:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk2NjkxMg=="}], "type": "inlineReview"}, {"oid": "781f490336bb7ed58c205bf3ef0750646f587d4d", "url": "https://github.com/checkstyle/checkstyle/commit/781f490336bb7ed58c205bf3ef0750646f587d4d", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-24T02:55:19Z", "type": "forcePushed"}, {"oid": "2cec07e44e94ec1889b36f0a228b2c101eb6148a", "url": "https://github.com/checkstyle/checkstyle/commit/2cec07e44e94ec1889b36f0a228b2c101eb6148a", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-24T04:23:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI4MzI4MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r414283280", "bodyText": "I think this checkConfig is not proper for google style, but I do not find a way to add attribute to config like \n  \n    \n      checkstyle/src/test/java/com/puppycrawl/tools/checkstyle/checks/whitespace/NoWhitespaceBeforeCheckTest.java\n    \n    \n         Line 76\n      in\n      11bb48a\n    \n    \n    \n    \n\n        \n          \n           checkConfig.addAttribute(\"tokens\", \"DOT\");", "author": "HuGanghui", "createdAt": "2020-04-24T04:27:13Z", "path": "src/it/java/com/google/checkstyle/test/chapter4formatting/rule462horizontalwhitespace/NoWhitespaceBeforeTest.java", "diffHunk": "@@ -63,5 +63,21 @@ public void testColonOfLabel() throws Exception {\n         verify(checkConfig, filePath, expected, warnList);\n     }\n \n+    @Test\n+    public void testAnnotationsAndEllipsis() throws Exception {\n+        final Class<NoWhitespaceBeforeCheck> clazz = NoWhitespaceBeforeCheck.class;\n+        final String messageKeyPreceded = \"ws.preceded\";\n+\n+        final String[] expected = {\n+            \"12:32: \" + getCheckMessage(clazz, messageKeyPreceded, \"...\"),\n+        };\n+\n+        final Configuration checkConfig = getModuleConfig(\"NoWhitespaceBefore\");", "originalCommit": "2cec07e44e94ec1889b36f0a228b2c101eb6148a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU1NzQyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r414557424", "bodyText": "you do not need to update Test to add attribute, if you need such token - add it to google_checks.xml file.\nSuch tests do validation of google config as is, without any modification.\nSuch tests are not tests for Check, they are tests for exact config.", "author": "romani", "createdAt": "2020-04-24T13:01:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI4MzI4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkyNjAwMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r415926001", "bodyText": "done, I get it", "author": "HuGanghui", "createdAt": "2020-04-27T15:44:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI4MzI4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU0MDAzOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r414540039", "bodyText": "please move this token to config instance above, no need to have two instances.", "author": "romani", "createdAt": "2020-04-24T12:32:56Z", "path": "config/checkstyle_checks.xml", "diffHunk": "@@ -708,7 +708,16 @@\n       <property name=\"tokens\" value=\"INDEX_OP\"/>\n       <property name=\"tokens\" value=\"METHOD_REF\"/>\n     </module>\n-    <module name=\"NoWhitespaceBefore\"/>\n+    <module name=\"NoWhitespaceBefore\">\n+      <property name=\"tokens\" value=\"COMMA\"/>\n+      <property name=\"tokens\" value=\"SEMI\"/>\n+      <property name=\"tokens\" value=\"POST_INC\"/>\n+      <property name=\"tokens\" value=\"POST_DEC\"/>\n+      <property name=\"tokens\" value=\"LABELED_STAT\"/>\n+    </module>\n+    <module name=\"NoWhitespaceBefore\">\n+      <property name=\"tokens\" value=\"ELLIPSIS\"/>", "originalCommit": "2cec07e44e94ec1889b36f0a228b2c101eb6148a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkyNjA2NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r415926065", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-27T15:44:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU0MDAzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU1ODA4OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r414558089", "bodyText": "In issue I provided several usecases, please use them all and be creative and do even more, the weirder code the better.", "author": "romani", "createdAt": "2020-04-24T13:02:17Z", "path": "src/it/resources/com/google/checkstyle/test/chapter4formatting/rule462horizontalwhitespace/InputNoWhitespaceBeforeAnnotationsAndEllipsis.java", "diffHunk": "@@ -0,0 +1,15 @@\n+package com.google.checkstyle.test.chapter4formatting.rule462horizontalwhitespace;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Target;\n+\n+@Target(ElementType.TYPE_USE)\n+@interface NonNull {\n+\n+}\n+\n+public class InputNoWhitespaceBeforeAnnotationsAndEllipsis {\n+    void test1(String @NonNull ... param) {} // warn\n+\n+    void test2(String @NonNull... param) {}", "originalCommit": "2cec07e44e94ec1889b36f0a228b2c101eb6148a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkyNjE2OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r415926169", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-27T15:44:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU1ODA4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY1MDgxNA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r416650814", "bodyText": "please make Input like #6707 (comment)\nWe need more test cases.", "author": "romani", "createdAt": "2020-04-28T14:17:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU1ODA4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc2Mjg4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r416762888", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-28T16:41:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU1ODA4OQ=="}], "type": "inlineReview"}, {"oid": "e50fda8298142caa2677b3586ecb9ce3396ec524", "url": "https://github.com/checkstyle/checkstyle/commit/e50fda8298142caa2677b3586ecb9ce3396ec524", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-27T15:42:52Z", "type": "forcePushed"}, {"oid": "76fb244f800369d53fa55e5a1bbd43e55a09d625", "url": "https://github.com/checkstyle/checkstyle/commit/76fb244f800369d53fa55e5a1bbd43e55a09d625", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-28T15:33:26Z", "type": "forcePushed"}, {"oid": "da3b436b8623833f1cfb38697f277b6e227a88cd", "url": "https://github.com/checkstyle/checkstyle/commit/da3b436b8623833f1cfb38697f277b6e227a88cd", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-28T16:39:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NTMwNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r417275305", "bodyText": "// OK , please fix other lines", "author": "romani", "createdAt": "2020-04-29T12:27:33Z", "path": "src/it/resources/com/google/checkstyle/test/chapter4formatting/rule462horizontalwhitespace/InputNoWhitespaceBeforeAnnotations.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package com.google.checkstyle.test.chapter4formatting.rule462horizontalwhitespace;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Target;\n+\n+@Target(ElementType.TYPE_USE)\n+@interface NonNull {\n+\n+}\n+\n+public class InputNoWhitespaceBeforeAnnotations {\n+\n+    public void foo(final char @NonNull [] param) {}\n+\n+    @NonNull int @NonNull[] @NonNull[] fiel1; // OK until #8205.\n+    @NonNull int @NonNull [] @NonNull [] field2;\n+    //@NonNull int @NonNull ... field3; // non-compilable\n+    //@NonNull int @NonNull... field4; // non-compilable\n+\n+\n+    public void foo1(final char[] param) { // OK until #8205.\n+    }\n+\n+    public void foo2(final char [] param) {\n+    }\n+\n+    public void foo3(final char @NonNull[] param) { // OK until #8205.\n+    }\n+\n+    public void foo4(final char @NonNull [] param) {\n+    }\n+\n+    void test1(String... param) { // OK until #8205.\n+    }\n+\n+    void test2(String ... param) { // violation on 8.32", "originalCommit": "da3b436b8623833f1cfb38697f277b6e227a88cd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc0MjU5Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r417742592", "bodyText": "violation on 8.32\nShould be \"//ok\".", "author": "romani", "createdAt": "2020-04-30T04:11:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NTMwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg2MzA2Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r417863067", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-30T09:03:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NTMwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NTc5MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r417275791", "bodyText": "please remove dot at the end of comment.", "author": "romani", "createdAt": "2020-04-29T12:28:21Z", "path": "src/it/resources/com/google/checkstyle/test/chapter4formatting/rule462horizontalwhitespace/InputNoWhitespaceBeforeAnnotations.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package com.google.checkstyle.test.chapter4formatting.rule462horizontalwhitespace;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Target;\n+\n+@Target(ElementType.TYPE_USE)\n+@interface NonNull {\n+\n+}\n+\n+public class InputNoWhitespaceBeforeAnnotations {\n+\n+    public void foo(final char @NonNull [] param) {}\n+\n+    @NonNull int @NonNull[] @NonNull[] fiel1; // OK until #8205.\n+    @NonNull int @NonNull [] @NonNull [] field2;\n+    //@NonNull int @NonNull ... field3; // non-compilable\n+    //@NonNull int @NonNull... field4; // non-compilable\n+\n+\n+    public void foo1(final char[] param) { // OK until #8205.\n+    }\n+\n+    public void foo2(final char [] param) {\n+    }\n+\n+    public void foo3(final char @NonNull[] param) { // OK until #8205.\n+    }\n+\n+    public void foo4(final char @NonNull [] param) {\n+    }\n+\n+    void test1(String... param) { // OK until #8205.\n+    }\n+\n+    void test2(String ... param) { // violation on 8.32\n+    }\n+\n+    void test3(String @NonNull... param) { // OK until #8205.", "originalCommit": "da3b436b8623833f1cfb38697f277b6e227a88cd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg2MzEyMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r417863121", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-04-30T09:03:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI3NTc5MQ=="}], "type": "inlineReview"}, {"oid": "886423ed1f45ee55cca101c3d6f254748dd4e853", "url": "https://github.com/checkstyle/checkstyle/commit/886423ed1f45ee55cca101c3d6f254748dd4e853", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-29T14:15:33Z", "type": "forcePushed"}, {"oid": "41bd3a051fe8408ed9d74afc6532cb0945b29279", "url": "https://github.com/checkstyle/checkstyle/commit/41bd3a051fe8408ed9d74afc6532cb0945b29279", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-30T08:18:00Z", "type": "forcePushed"}, {"oid": "4c0b667565d814d8a2c1488a39b6409bdbf502fc", "url": "https://github.com/checkstyle/checkstyle/commit/4c0b667565d814d8a2c1488a39b6409bdbf502fc", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-04-30T08:19:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNTI5MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r419035290", "bodyText": "lowercase b in Between and please add the rule number that specifies where google allows it. I assume this is 4.6.2 point 9?", "author": "rnveach", "createdAt": "2020-05-03T02:17:49Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/AllChecksTest.java", "diffHunk": "@@ -239,7 +239,9 @@\n                 \"COLON\", \"TYPE_EXTENSION_AND\").collect(Collectors.toSet()));\n         GOOGLE_TOKENS_IN_CONFIG_TO_IGNORE.put(\"NoWhitespaceBefore\", Stream.of(\n                 // google uses GenericWhitespace for this behavior\n-                \"GENERIC_START\", \"GENERIC_END\").collect(Collectors.toSet()));\n+                // whitespace is necessary Between a type annotation and ELLIPSIS", "originalCommit": "4c0b667565d814d8a2c1488a39b6409bdbf502fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEyNTgzOA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r419125838", "bodyText": "This comment should only be for ellipsis. We will have different comments for each tokens.\nPlease also update reasoning as described in next point.", "author": "rnveach", "createdAt": "2020-05-03T16:21:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNTI5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIwNTQyNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r419205425", "bodyText": "done, I update according to the first comment, please give me more information about Please also update reasoning as described in next point.", "author": "HuGanghui", "createdAt": "2020-05-04T04:03:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNTI5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjMzNDQ2Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r432334463", "bodyText": "@HuGanghui I guess corrected code is not ok since now comment on line 241\n// google uses GenericWhitespace for this behavior looks weird\nI think it was suggested to make it like\n // comment\ntoken1, token2,\n// another comment\nellipsis\n\nAlso, it seems that ELLIPSIS should be lowercase", "author": "strkkk", "createdAt": "2020-05-29T08:29:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNTI5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM4ODAwNg==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r432388006", "bodyText": "ok ,I get it, done", "author": "HuGanghui", "createdAt": "2020-05-29T10:10:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNTI5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNTY5MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r419035691", "bodyText": "@romani I am not seeing where it is saying this expected/allowed.\nhttps://checkstyle.org/styleguides/google-java-style-20180523/javaguide.html#s4.6.2-horizontal-whitespace\n\na single ASCII space also appears in the following places only.\nBetween a type annotation and [] or ....\n\nThere is no type annotation here and guide specifically says space is ONLY allowed where google defined it. There is no type annotation here, so there should be a violation.\n#6707 (comment)\n\nthere is no item for space between type and [], so It is ok to demand no space before ....\n\nIt seems we are in agreement then? Nothing I see says this will be fixed later.\nI am expecting changes to the logic of the check to look for annotation or not as specified in #6707 (comment)", "author": "rnveach", "createdAt": "2020-05-03T02:23:09Z", "path": "src/it/resources/com/google/checkstyle/test/chapter4formatting/rule462horizontalwhitespace/InputNoWhitespaceBeforeAnnotations.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package com.google.checkstyle.test.chapter4formatting.rule462horizontalwhitespace;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Target;\n+\n+@Target(ElementType.TYPE_USE)\n+@interface NonNull {\n+\n+}\n+\n+public class InputNoWhitespaceBeforeAnnotations {\n+\n+    public void foo(final char @NonNull [] param) {} // ok\n+\n+    @NonNull int @NonNull[] @NonNull[] fiel1; // OK until #8205\n+    @NonNull int @NonNull [] @NonNull [] field2; // ok\n+    //@NonNull int @NonNull ... field3; // non-compilable\n+    //@NonNull int @NonNull... field4; // non-compilable\n+\n+\n+    public void foo1(final char[] param) { // OK until #8205\n+    }\n+\n+    public void foo2(final char [] param) { // ok\n+    }\n+\n+    public void foo3(final char @NonNull[] param) { // OK until #8205\n+    }\n+\n+    public void foo4(final char @NonNull [] param) { // ok\n+    }\n+\n+    void test1(String... param) { // OK until #8205\n+    }\n+\n+    void test2(String ... param) { // ok", "originalCommit": "4c0b667565d814d8a2c1488a39b6409bdbf502fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTEyMzI3OA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r419123278", "bodyText": "There is no type annotation here, so there should be a violation.\n\n@rnveach, yes, you are right, I updated #8205 . We need to put here // ok until #8205.\n@HuGanghui , please do the same for other similar cases.\nWe should remove token from Check config in google as it is error prone (it is better to not bother user with false-positives, no violation is much better for user experience).\nWe will do new Check for this to address validation properly.\n\nI am expecting changes to the logic of the check to look for annotation or not as specified in\n\nLets move it #8205 , I think new Check should be created.", "author": "romani", "createdAt": "2020-05-03T16:01:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNTY5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIwNDI4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/7916#discussion_r419204288", "bodyText": "done", "author": "HuGanghui", "createdAt": "2020-05-04T03:54:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTAzNTY5MQ=="}], "type": "inlineReview"}, {"oid": "9407e1373c90e9ba42578be43f424b08dfc0cf0d", "url": "https://github.com/checkstyle/checkstyle/commit/9407e1373c90e9ba42578be43f424b08dfc0cf0d", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-05-04T03:53:45Z", "type": "forcePushed"}, {"oid": "124a85193bb54516c652f5e2607f91748bb82dac", "url": "https://github.com/checkstyle/checkstyle/commit/124a85193bb54516c652f5e2607f91748bb82dac", "message": "add", "committedDate": "2020-05-04T04:19:48Z", "type": "forcePushed"}, {"oid": "ce1736c2502a8b2ab055479e04d978fbcca09260", "url": "https://github.com/checkstyle/checkstyle/commit/ce1736c2502a8b2ab055479e04d978fbcca09260", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-05-04T04:21:30Z", "type": "forcePushed"}, {"oid": "a6972b499bc6db909533df8d6f08def5f59f16fd", "url": "https://github.com/checkstyle/checkstyle/commit/a6972b499bc6db909533df8d6f08def5f59f16fd", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-05-06T01:52:04Z", "type": "forcePushed"}, {"oid": "31525c5d2811e11fa1c2866d1f705bfa29913176", "url": "https://github.com/checkstyle/checkstyle/commit/31525c5d2811e11fa1c2866d1f705bfa29913176", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-05-06T01:52:38Z", "type": "forcePushed"}, {"oid": "2488b93af640ab583d58a9146135dbeebac0639d", "url": "https://github.com/checkstyle/checkstyle/commit/2488b93af640ab583d58a9146135dbeebac0639d", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-05-29T10:09:07Z", "type": "commit"}, {"oid": "2488b93af640ab583d58a9146135dbeebac0639d", "url": "https://github.com/checkstyle/checkstyle/commit/2488b93af640ab583d58a9146135dbeebac0639d", "message": "Issue #6707: fix false violation report that does not allow spaces in front of ellipsis tokens for Google Style", "committedDate": "2020-05-29T10:09:07Z", "type": "forcePushed"}]}