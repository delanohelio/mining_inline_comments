{"pr_number": 8164, "pr_title": "Issue #8118: Enforce -e for all maven commands", "pr_createdAt": "2020-04-22T06:58:21Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8164", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk0MzUyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r412943524", "bodyText": "please add <property name=\"message\" value=\"mvn execution should be with '-e' option to produce error message in case of problem\"/> in this case you do not need comment above, the comments the better.\nhttps://books.sonatype.com/mvnref-book/reference/running-sect-options.html", "author": "romani", "createdAt": "2020-04-22T12:37:15Z", "path": "config/checkstyle_non_main_files_checks.xml", "diffHunk": "@@ -23,6 +23,11 @@\n                value=\"^(?!(.*href=|.*http(s)?:|import |(.* )?package |.* files=|.*\\.dtd)).{101,}$\"/>\n       <property name=\"message\" value=\"Line should not be longer than 100 symbols\"/>\n     </module>\n+    <!--This check is to enforce -e for all maven commands -->\n+    <module name=\"RegexpSingleline\">\n+        <property name=\"format\" value=\"(mvn [^-])|(mvn \\-[^e\\-v])\"/>\n+        <property name=\"fileExtensions\" value=\"sh, yml\"/>", "originalCommit": "53a93880eab5166c2a6a9fc91de325ae00652b34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAzMTA4MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r413031081", "bodyText": "done~", "author": "HuGanghui", "createdAt": "2020-04-22T14:27:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk0MzUyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk0NTAzNg==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r412945036", "bodyText": "this comment is not required ...\nBUT <!--This .... there is missed space and non of our checks complain about this, sad.\nAs you are good with regexp .... can you make regexp to validate missed space in comments ?\nAs separate issue and PR.\nI thought that we already do this validation, but I might forgot something.", "author": "romani", "createdAt": "2020-04-22T12:39:23Z", "path": "config/checkstyle_non_main_files_checks.xml", "diffHunk": "@@ -23,6 +23,11 @@\n                value=\"^(?!(.*href=|.*http(s)?:|import |(.* )?package |.* files=|.*\\.dtd)).{101,}$\"/>\n       <property name=\"message\" value=\"Line should not be longer than 100 symbols\"/>\n     </module>\n+    <!--This check is to enforce -e for all maven commands -->", "originalCommit": "53a93880eab5166c2a6a9fc91de325ae00652b34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAzMjMwOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r413032309", "bodyText": "ok, my pleasure", "author": "HuGanghui", "createdAt": "2020-04-22T14:28:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk0NTAzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI2NzEzMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r414267132", "bodyText": "@HuGanghui , please create issue on this and share here a link", "author": "romani", "createdAt": "2020-04-24T03:34:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk0NTAzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI3NDUyOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r414274529", "bodyText": "link is here, Making regex to validate missed space in comments in non main files #8169", "author": "HuGanghui", "createdAt": "2020-04-24T03:59:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk0NTAzNg=="}], "type": "inlineReview"}, {"oid": "e7433ee01eba6037ce11852f279d6c8a7e4dc1b4", "url": "https://github.com/checkstyle/checkstyle/commit/e7433ee01eba6037ce11852f279d6c8a7e4dc1b4", "message": "Issue #8118: Enforce -e for all maven commands", "committedDate": "2020-04-22T14:25:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA5NzQ0OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r413097449", "bodyText": "I have a concern about adding - and v and that it could lead to false negatives. We are only looking for the 1 character and not even testing what comes after --.\nI don't know all maven arguments, but here is some examples I went off of:\nmvn test\nmvn -e test\nmvn -version\nmvn --version\nmvn --not-e\nmvn -verbose no e\n\nCan we do some type of lookahead check for this? Maybe: (mvn [^-])|(mvn \\-(?!v)(?!-v)[^e])\nThis won't hamper performance either, will it?", "author": "rnveach", "createdAt": "2020-04-22T15:45:19Z", "path": "config/checkstyle_non_main_files_checks.xml", "diffHunk": "@@ -23,6 +23,12 @@\n                value=\"^(?!(.*href=|.*http(s)?:|import |(.* )?package |.* files=|.*\\.dtd)).{101,}$\"/>\n       <property name=\"message\" value=\"Line should not be longer than 100 symbols\"/>\n     </module>\n+    <module name=\"RegexpSingleline\">\n+        <property name=\"format\" value=\"(mvn [^-])|(mvn \\-[^e\\-v])\"/>", "originalCommit": "e7433ee01eba6037ce11852f279d6c8a7e4dc1b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ4MzE3Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r413483173", "bodyText": "done, this is better!", "author": "HuGanghui", "createdAt": "2020-04-23T03:32:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA5NzQ0OQ=="}], "type": "inlineReview"}, {"oid": "faf0e451d64a2a46125b1d976f84ffa84f9bfeeb", "url": "https://github.com/checkstyle/checkstyle/commit/faf0e451d64a2a46125b1d976f84ffa84f9bfeeb", "message": "Issue #8118: Enforce -e for all maven commands", "committedDate": "2020-04-23T03:31:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI2Njk0OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r414266949", "bodyText": "please make it:\n<property name=\"message\" \n     value=\"mvn execution should be with '-e' option to produce error message in case of problem\"/>\n\n\\n in message is not good. it makes output weird.", "author": "romani", "createdAt": "2020-04-24T03:34:10Z", "path": "config/checkstyle_non_main_files_checks.xml", "diffHunk": "@@ -23,6 +23,12 @@\n                value=\"^(?!(.*href=|.*http(s)?:|import |(.* )?package |.* files=|.*\\.dtd)).{101,}$\"/>\n       <property name=\"message\" value=\"Line should not be longer than 100 symbols\"/>\n     </module>\n+    <module name=\"RegexpSingleline\">\n+        <property name=\"format\" value=\"(mvn [^-])|(mvn \\-(?!v)(?!-v)[^e])\"/>\n+        <property name=\"fileExtensions\" value=\"sh, yml\"/>\n+        <property name=\"message\" value=\"mvn execution should be with '-e' option\n+                                        to produce error message in case of problem\"/>", "originalCommit": "faf0e451d64a2a46125b1d976f84ffa84f9bfeeb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI4NjY1NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8164#discussion_r414286655", "bodyText": "done~", "author": "HuGanghui", "createdAt": "2020-04-24T04:37:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI2Njk0OQ=="}], "type": "inlineReview"}, {"oid": "a0362fb58be339d591360417b433ea72167ac327", "url": "https://github.com/checkstyle/checkstyle/commit/a0362fb58be339d591360417b433ea72167ac327", "message": "Issue #8118: Enforce -e for all maven commands", "committedDate": "2020-04-24T04:36:58Z", "type": "commit"}, {"oid": "a0362fb58be339d591360417b433ea72167ac327", "url": "https://github.com/checkstyle/checkstyle/commit/a0362fb58be339d591360417b433ea72167ac327", "message": "Issue #8118: Enforce -e for all maven commands", "committedDate": "2020-04-24T04:36:58Z", "type": "forcePushed"}]}