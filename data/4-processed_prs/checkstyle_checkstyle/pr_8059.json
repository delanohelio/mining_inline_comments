{"pr_number": 8059, "pr_title": "Issue #3899: Modify braceAdjustment for support to google-java-format and switch-block-indentation", "pr_createdAt": "2020-04-09T16:03:08Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8059", "timeline": [{"oid": "c99acd2bcb83f22ef5e3d7c331400c77401a7c70", "url": "https://github.com/checkstyle/checkstyle/commit/c99acd2bcb83f22ef5e3d7c331400c77401a7c70", "message": "minor: Change google-config for new braceAdjustment modifications", "committedDate": "2020-04-25T17:39:15Z", "type": "forcePushed"}, {"oid": "642e933ac817e924593708a67487a1567547dede", "url": "https://github.com/checkstyle/checkstyle/commit/642e933ac817e924593708a67487a1567547dede", "message": "minor: Change google-config for new braceAdjustment modifications", "committedDate": "2020-09-03T14:54:42Z", "type": "forcePushed"}, {"oid": "9c925d4f2e36852fa91248be1f84be20c58b66c7", "url": "https://github.com/checkstyle/checkstyle/commit/9c925d4f2e36852fa91248be1f84be20c58b66c7", "message": "Issue #3899: Indentation: google-java-format and Checkstyle disagree about switch block indentation", "committedDate": "2020-09-22T18:39:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc4NzA5OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8059#discussion_r496787099", "bodyText": "declared config is braceAdjustment = 2\nplease restore this line, lets keep it as it was before as much as possible.\nif you need extra text case - please create new file.\nExisting text cases should be changes only if there was bug in them or behavior is changing (change in comment only).\nplease apply this to all other lines and files.", "author": "romani", "createdAt": "2020-09-29T14:56:21Z", "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/indentation/indentation/InputIndentationBraceAdjustment.java", "diffHunk": "@@ -15,17 +15,26 @@\n  * @author  jrichard                                                          //indent:1 exp:1\n  */                                                                           //indent:1 exp:1\n public class InputIndentationBraceAdjustment //indent:0 exp:0\n-  { //indent:2 exp:2\n+{ //indent:0 exp:2 warn", "originalCommit": "9c925d4f2e36852fa91248be1f84be20c58b66c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg1MjY1MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8059#discussion_r496852651", "bodyText": "How bad it is that I always forget the same thing.", "author": "Abhishek-kumar09", "createdAt": "2020-09-29T16:04:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc4NzA5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAxMDE3OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8059#discussion_r497010178", "bodyText": "No problems, just keep fixing it, one day it become a habit.", "author": "romani", "createdAt": "2020-09-29T20:02:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc4NzA5OQ=="}], "type": "inlineReview"}, {"oid": "7c48dfd51c3fbb6613df116c2dbb9de30f815474", "url": "https://github.com/checkstyle/checkstyle/commit/7c48dfd51c3fbb6613df116c2dbb9de30f815474", "message": "Issue #3899: Indentation: google-java-format and Checkstyle disagree about switch block indentation", "committedDate": "2020-09-29T17:41:21Z", "type": "forcePushed"}, {"oid": "c8631e0418f1669319daf49b09f80666fd231ae5", "url": "https://github.com/checkstyle/checkstyle/commit/c8631e0418f1669319daf49b09f80666fd231ae5", "message": "Issue #3899: Indentation: google-java-format and Checkstyle disagree about switch block indentation", "committedDate": "2020-09-29T17:48:42Z", "type": "commit"}, {"oid": "c8631e0418f1669319daf49b09f80666fd231ae5", "url": "https://github.com/checkstyle/checkstyle/commit/c8631e0418f1669319daf49b09f80666fd231ae5", "message": "Issue #3899: Indentation: google-java-format and Checkstyle disagree about switch block indentation", "committedDate": "2020-09-29T17:48:42Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0NDg2Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8059#discussion_r496944863", "bodyText": "About these changes:\nThis file is checked against google_checks.xml, so earlier it was not following the correct indentation proposed by google. Now it does, basically this change is important for ommiting long lines of indentation x-path suppression script.", "author": "Abhishek-kumar09", "createdAt": "2020-09-29T18:18:12Z", "path": "src/test/resources/com/puppycrawl/tools/checkstyle/main/InputMainComplexityOverflow.java", "diffHunk": "@@ -7,159 +7,160 @@\n public class InputMainComplexityOverflow {\n \n   public void provokeNpathIntegerOverflow()\n-  {\n-    if (true) {\n+    {", "originalCommit": "c8631e0418f1669319daf49b09f80666fd231ae5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUxMzgzNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8059#discussion_r497513835", "bodyText": "confirmed, wihtout this update, we need to add 2 more suppression in expect output of MainTest.java", "author": "romani", "createdAt": "2020-09-30T13:35:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk0NDg2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUzNDg3MA==", "url": "https://github.com/checkstyle/checkstyle/pull/8059#discussion_r497534870", "bodyText": "why we suggesting 16,20 ? all of them less then 24 that is base for this block.\nwe have the same problems in report\nhttps://checkstyle-diff-reports.s3.us-east-2.amazonaws.com/braceAdjustments_2020212202/reports/diff/hibernate-orm/index.html#A1\nthere are a lot of diffs to suggest values that not good, but previously we suggested single indentation.", "author": "romani", "createdAt": "2020-09-30T14:02:12Z", "path": "src/test/resources/com/puppycrawl/tools/checkstyle/checks/indentation/indentation/InputIndentationStrictCondition.java", "diffHunk": "@@ -7,8 +7,8 @@ void method(Thread foo) { //indent:4 exp:4\n         method( //indent:8 exp:8\n                 new Thread() { //indent:16 exp:16\n                         public void run() { //indent:24 exp:24\n-                            } //indent:28 exp:28\n+                            } //indent:28 exp:16,20,24 warn", "originalCommit": "c8631e0418f1669319daf49b09f80666fd231ae5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY4MzY4NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8059#discussion_r497683685", "bodyText": "@romani, I have not tweaked anything related to braces when it is on the same line, I have just changed code for braces where left curly starts from a new line.\n\nwhy we suggesting 16,20 ? all of them less then 24 that is base for this block.\n\nI tested the same thing with original checkstyle (8.36.2), and with that too, 3 levels of suggested indents were shown.(possibly due to new keyword)(see the image below)\nIn the above case you had mentioned; the indentation suggestion is actually wrong while tested with the original checkstyle because there should be no affect of brace adjustment on rcurly if it is written according to modern style, and thats why the new changes were showing error on it.\n\n\nthere are a lot of diffs to suggest values that not good, but previously we suggested single indentation.\n\nIt's only the case when the braces are on new line.\nWhy\nBecause we have to satisfy both cases (google as well as normal), so one extra indent level for google only.", "author": "Abhishek-kumar09", "createdAt": "2020-09-30T17:30:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUzNDg3MA=="}], "type": "inlineReview"}]}