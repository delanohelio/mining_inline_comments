{"pr_number": 7993, "pr_title": "Issue #3946: code cleanup: minimize future xdoc changes", "pr_createdAt": "2020-03-29T20:36:58Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/7993", "timeline": [{"oid": "bb20ff29333e6cbc55b669ce51af05cd7bb24309", "url": "https://github.com/checkstyle/checkstyle/commit/bb20ff29333e6cbc55b669ce51af05cd7bb24309", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-03-30T07:03:22Z", "type": "forcePushed"}, {"oid": "8f77d3c55a200d94e4ce89365f1726b7d8b79ccf", "url": "https://github.com/checkstyle/checkstyle/commit/8f77d3c55a200d94e4ce89365f1726b7d8b79ccf", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-04-04T13:33:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3NzQ5NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407077495", "bodyText": "Code may look better if it was , <a (space between command and tag).", "author": "rnveach", "createdAt": "2020-04-11T15:35:56Z", "path": "src/xdocs/config_annotation.xml", "diffHunk": "@@ -94,45 +94,53 @@ public String getNameIfPresent() { ... }\n               <td>tokens to check</td>\n               <td>subset of tokens\n                 <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#CLASS_DEF\">\n-                    CLASS_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#INTERFACE_DEF\">\n-                    INTERFACE_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#PACKAGE_DEF\">\n-                    PACKAGE_DEF</a>,\n-                <a href=\n-                    \"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ENUM_CONSTANT_DEF\">\n-                    ENUM_CONSTANT_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ENUM_DEF\">\n-                    ENUM_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#METHOD_DEF\">\n-                    METHOD_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#CTOR_DEF\">\n-                    CTOR_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#VARIABLE_DEF\">\n-                    VARIABLE_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ANNOTATION_DEF\">\n-                    ANNOTATION_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ANNOTATION_FIELD_DEF\">\n-                    ANNOTATION_FIELD_DEF</a>.\n+                    CLASS_DEF</a>\n+                ,<a href=", "originalCommit": "8f77d3c55a200d94e4ce89365f1726b7d8b79ccf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA5Mjc0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407092743", "bodyText": "@rnveach Done.", "author": "gaurabdg", "createdAt": "2020-04-11T18:03:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3NzQ5NQ=="}], "type": "inlineReview"}, {"oid": "16ba68dff825aea98555d6b76394179991c3770d", "url": "https://github.com/checkstyle/checkstyle/commit/16ba68dff825aea98555d6b76394179991c3770d", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-04-11T18:00:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407702319", "bodyText": "Why did we split href= from the URL?", "author": "rnveach", "createdAt": "2020-04-13T20:30:18Z", "path": "src/xdocs/config_annotation.xml", "diffHunk": "@@ -94,45 +94,53 @@ public String getNameIfPresent() { ... }\n               <td>tokens to check</td>\n               <td>subset of tokens\n                 <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#CLASS_DEF\">\n-                    CLASS_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#INTERFACE_DEF\">\n-                    INTERFACE_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#PACKAGE_DEF\">\n-                    PACKAGE_DEF</a>,\n-                <a href=\n-                    \"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ENUM_CONSTANT_DEF\">\n-                    ENUM_CONSTANT_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ENUM_DEF\">\n-                    ENUM_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#METHOD_DEF\">\n-                    METHOD_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#CTOR_DEF\">\n-                    CTOR_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#VARIABLE_DEF\">\n-                    VARIABLE_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ANNOTATION_DEF\">\n-                    ANNOTATION_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#ANNOTATION_FIELD_DEF\">\n-                    ANNOTATION_FIELD_DEF</a>.\n+                    CLASS_DEF</a>\n+                , <a href=\n+                    \"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#INTERFACE_DEF\">", "originalCommit": "16ba68dff825aea98555d6b76394179991c3770d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgxNzc0OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r409817749", "bodyText": "Otherwise it would have crossed the lin length limit. So instead of breaking the string, I moved the whole string to a new line", "author": "gaurabdg", "createdAt": "2020-04-16T20:06:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzOTExNw==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424039117", "bodyText": "Did the CI or tests complain that this must be changed? We have some overrides in checkstyle to allow links to be longer than 100 characters.", "author": "rnveach", "createdAt": "2020-05-12T21:17:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ5NjkyMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424496921", "bodyText": "Yes, checkstyle failed.", "author": "gaurabdg", "createdAt": "2020-05-13T14:46:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkwMTI0OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r431901249", "bodyText": "@gaurabdg , please recheck this one more time. Line length violations are ignored  on lines where \"http|href\" are present.\nYou just move coma from most right to most left, it does not make big difference for LineLength.\nPlease restore all other lines.", "author": "romani", "createdAt": "2020-05-28T14:54:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEzMjQ5Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r432132496", "bodyText": "It is indeed giving error\n               , <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#INTERFACE_DEF\">", "author": "gaurabdg", "createdAt": "2020-05-28T21:24:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjEzOTAyNw==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r432139027", "bodyText": "The http|href exemption is for non_main_files_check", "author": "gaurabdg", "createdAt": "2020-05-28T21:38:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU1NzgxNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r432557815", "bodyText": "hmm, yes it gives violation:\n[WARNING]      [echo] Checkstyle started (checkstyle_checks.xml): 29/05/2020 08:17:18 AM\n[INFO] [checkstyle] Running Checkstyle  on 1150 files\n[ERROR] [checkstyle] [ERROR] /home/rivanov/java/github/romani/checkstyle/src/xdocs/config_annotation.xml:98: Line should not be longer than 100 symbols [RegexpSingleline]\n[WARNING]      [echo] Checkstyle finished (checkstyle_checks.xml) : 29/05/2020 08:17:51 AM\n[WARNING]      [echo] Checkstyle started (checkstyle_non_main_files_checks.xml): 29/05/2020 08:17:18 AM\n[INFO] [checkstyle] Running Checkstyle  on 2128 files\n[WARNING]      [echo] Checkstyle finished (checkstyle_non_main_files_checks.xml): 29/05/2020 08:17:51 AM\n[WARNING]      [echo] Checkstyle started (checkstyle_resources_checks.xml): 29/05/2020 08:17:18 AM\n[INFO] [checkstyle] Running Checkstyle  on 1835 files\n[WARNING]      [echo] Checkstyle finished (checkstyle_resources_checks.xml): 29/05/2020 08:17:51 AM\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n\n\u2718-1 ~/java/github/romani/checkstyle [gaurabdg/cleanup-xdocs L|\u271a 1] \n08:17 $ git diff\ndiff --git a/src/xdocs/config_annotation.xml b/src/xdocs/config_annotation.xml\nindex e879bd1..f656486 100644\n--- a/src/xdocs/config_annotation.xml\n+++ b/src/xdocs/config_annotation.xml\n@@ -95,8 +95,7 @@ public String getNameIfPresent() { ... }\n               <td>subset of tokens\n                 <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#CLASS_DEF\">\n                     CLASS_DEF</a>\n-                , <a href=\n-                    \"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#INTERFACE_DEF\">\n+                , <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#INTERFACE_DEF\">\n                     INTERFACE_DEF</a>\n                 , <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#PACKAGE_DEF\">\n                     PACKAGE_DEF</a>", "author": "romani", "createdAt": "2020-05-29T15:19:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU2MTAxNA==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r432561014", "bodyText": "but it is strange ... line with ANNOTATION_FIELD_DEF before fix (of the same block ) is far more than 100, and there is no violation on it.\n@gaurabdg , please investigate.", "author": "romani", "createdAt": "2020-05-29T15:24:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjY2OTYwOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r432669609", "bodyText": "line with ANNOTATION_FIELD_DEF before fix (of the same block ) is far more than 100, and there is no violation on it.\n\nThe format regex allows to, since there's no comma at the beginning. I'll fix the regex to not throw any error for the new comma placement.", "author": "gaurabdg", "createdAt": "2020-05-29T18:41:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcwMjMxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDIwNA==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407710204", "bodyText": "Please follow other assertions with fileName + \" section '\" + sectionName first.", "author": "rnveach", "createdAt": "2020-04-13T20:45:20Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -882,13 +882,25 @@ private static void validatePropertySectionPropertyTokens(String fileName, Strin\n         assertEquals(\"tokens to check\", columns.get(1).getTextContent(),\n                 fileName + \" section '\" + sectionName\n                         + \"' should have the basic token description\");\n-        assertEquals(\"subset of tokens \" + CheckUtil.getTokenText(check.getAcceptableTokens(),\n-                check.getRequiredTokens()),\n-                columns.get(2).getTextContent().replaceAll(\"\\\\s+\", \" \").trim(),\n+\n+        String acceptableTokenText = columns.get(2).getTextContent().trim();\n+        final int removePrefixIdx = \"subset of tokens\".length();\n+        acceptableTokenText = acceptableTokenText.substring(removePrefixIdx);\n+        assertFalse(isInvalidTokenPunctuation(acceptableTokenText),\n+                \", & . should be placed at beginning of the next corresponding lines \"\n+                + \"in \" + fileName + \" acceptable token section: \" + sectionName);", "originalCommit": "16ba68dff825aea98555d6b76394179991c3770d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgzMzUxMg==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r409833512", "bodyText": "Done", "author": "gaurabdg", "createdAt": "2020-04-16T20:37:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDIwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzNDk5NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424034995", "bodyText": "This is not done as nothing changed. Assertion message should start with the file name and section first like the other assertions follow.", "author": "rnveach", "createdAt": "2020-05-12T21:09:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDIwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDM4MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407710380", "bodyText": "Put single quotes around , and . and write out and so it is clear.", "author": "rnveach", "createdAt": "2020-04-13T20:45:40Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -882,13 +882,25 @@ private static void validatePropertySectionPropertyTokens(String fileName, Strin\n         assertEquals(\"tokens to check\", columns.get(1).getTextContent(),\n                 fileName + \" section '\" + sectionName\n                         + \"' should have the basic token description\");\n-        assertEquals(\"subset of tokens \" + CheckUtil.getTokenText(check.getAcceptableTokens(),\n-                check.getRequiredTokens()),\n-                columns.get(2).getTextContent().replaceAll(\"\\\\s+\", \" \").trim(),\n+\n+        String acceptableTokenText = columns.get(2).getTextContent().trim();\n+        final int removePrefixIdx = \"subset of tokens\".length();\n+        acceptableTokenText = acceptableTokenText.substring(removePrefixIdx);\n+        assertFalse(isInvalidTokenPunctuation(acceptableTokenText),\n+                \", & . should be placed at beginning of the next corresponding lines \"", "originalCommit": "16ba68dff825aea98555d6b76394179991c3770d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgzMzU2Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r409833563", "bodyText": "Done", "author": "gaurabdg", "createdAt": "2020-04-16T20:37:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDM4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDU3NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407710575", "bodyText": "same x 2.", "author": "rnveach", "createdAt": "2020-04-13T20:46:05Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -882,13 +882,25 @@ private static void validatePropertySectionPropertyTokens(String fileName, Strin\n         assertEquals(\"tokens to check\", columns.get(1).getTextContent(),\n                 fileName + \" section '\" + sectionName\n                         + \"' should have the basic token description\");\n-        assertEquals(\"subset of tokens \" + CheckUtil.getTokenText(check.getAcceptableTokens(),\n-                check.getRequiredTokens()),\n-                columns.get(2).getTextContent().replaceAll(\"\\\\s+\", \" \").trim(),\n+\n+        String acceptableTokenText = columns.get(2).getTextContent().trim();\n+        final int removePrefixIdx = \"subset of tokens\".length();\n+        acceptableTokenText = acceptableTokenText.substring(removePrefixIdx);\n+        assertFalse(isInvalidTokenPunctuation(acceptableTokenText),\n+                \", & . should be placed at beginning of the next corresponding lines \"\n+                + \"in \" + fileName + \" acceptable token section: \" + sectionName);\n+        assertEquals(CheckUtil.getTokenText(check.getAcceptableTokens(),\n+                check.getRequiredTokens()).replaceAll(\"\\\\s+\", \"\"),\n+                acceptableTokenText.replaceAll(\"\\\\s+\", \"\"),\n                 fileName + \" section '\" + sectionName + \"' should have all the acceptable tokens\");\n-        assertEquals(\n-                CheckUtil.getTokenText(check.getDefaultTokens(), check.getRequiredTokens()),\n-                columns.get(3).getTextContent().replaceAll(\"\\\\s+\", \" \").trim(),\n+\n+        final String defaultTokenText = columns.get(3).getTextContent().trim();\n+        assertFalse(isInvalidTokenPunctuation(defaultTokenText),\n+                \", & . should be placed at beginning of the next corresponding lines \"\n+                + \"in \" + fileName + \" default token section: \" + sectionName);", "originalCommit": "16ba68dff825aea98555d6b76394179991c3770d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgzMzY2NA==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r409833664", "bodyText": "Done", "author": "gaurabdg", "createdAt": "2020-04-16T20:37:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDU3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzNTgxOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424035819", "bodyText": "Not completely done, see above.", "author": "rnveach", "createdAt": "2020-05-12T21:10:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDU3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDc0MA==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407710740", "bodyText": "same x2.", "author": "rnveach", "createdAt": "2020-04-13T20:46:24Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -897,16 +909,33 @@ private static void validatePropertySectionPropertyJavadocTokens(String fileName\n         assertEquals(\"javadoc tokens to check\",\n                 columns.get(1).getTextContent(), fileName + \" section '\" + sectionName\n                         + \"' should have the basic token javadoc description\");\n-        assertEquals(\"subset of javadoc tokens \"\n-                        + CheckUtil.getJavadocTokenText(check.getAcceptableJavadocTokens(),\n-                                check.getRequiredJavadocTokens()), columns.get(2).getTextContent()\n-                        .replaceAll(\"\\\\s+\", \" \").trim(), fileName + \" section '\" + sectionName\n-                                + \"' should have all the acceptable javadoc tokens\");\n-        assertEquals(\n-                CheckUtil.getJavadocTokenText(check.getDefaultJavadocTokens(),\n-                        check.getRequiredJavadocTokens()), columns.get(3).getTextContent()\n-                        .replaceAll(\"\\\\s+\", \" \").trim(), fileName + \" section '\" + sectionName\n-                                + \"' should have all the default javadoc tokens\");\n+\n+        String acceptableTokenText = columns.get(2).getTextContent().trim();\n+        final int removePrefixIdx = \"subset of javadoc tokens\".length();\n+        acceptableTokenText = acceptableTokenText.substring(removePrefixIdx);\n+        assertFalse(isInvalidTokenPunctuation(acceptableTokenText),\n+                \", & . should be placed at beginning of the next corresponding lines \"\n+                + \"in \" + fileName + \" acceptable javadoc token section: \" + sectionName);", "originalCommit": "16ba68dff825aea98555d6b76394179991c3770d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgzMzcwNA==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r409833704", "bodyText": "Done", "author": "gaurabdg", "createdAt": "2020-04-16T20:38:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDc0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzNjAxMw==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424036013", "bodyText": "Not completely done, see above.", "author": "rnveach", "createdAt": "2020-05-12T21:11:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDc0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDgyOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407710829", "bodyText": "same x2.", "author": "rnveach", "createdAt": "2020-04-13T20:46:36Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -897,16 +909,33 @@ private static void validatePropertySectionPropertyJavadocTokens(String fileName\n         assertEquals(\"javadoc tokens to check\",\n                 columns.get(1).getTextContent(), fileName + \" section '\" + sectionName\n                         + \"' should have the basic token javadoc description\");\n-        assertEquals(\"subset of javadoc tokens \"\n-                        + CheckUtil.getJavadocTokenText(check.getAcceptableJavadocTokens(),\n-                                check.getRequiredJavadocTokens()), columns.get(2).getTextContent()\n-                        .replaceAll(\"\\\\s+\", \" \").trim(), fileName + \" section '\" + sectionName\n-                                + \"' should have all the acceptable javadoc tokens\");\n-        assertEquals(\n-                CheckUtil.getJavadocTokenText(check.getDefaultJavadocTokens(),\n-                        check.getRequiredJavadocTokens()), columns.get(3).getTextContent()\n-                        .replaceAll(\"\\\\s+\", \" \").trim(), fileName + \" section '\" + sectionName\n-                                + \"' should have all the default javadoc tokens\");\n+\n+        String acceptableTokenText = columns.get(2).getTextContent().trim();\n+        final int removePrefixIdx = \"subset of javadoc tokens\".length();\n+        acceptableTokenText = acceptableTokenText.substring(removePrefixIdx);\n+        assertFalse(isInvalidTokenPunctuation(acceptableTokenText),\n+                \", & . should be placed at beginning of the next corresponding lines \"\n+                + \"in \" + fileName + \" acceptable javadoc token section: \" + sectionName);\n+        assertEquals(CheckUtil.getJavadocTokenText(check.getAcceptableJavadocTokens(),\n+                check.getRequiredJavadocTokens()).replaceAll(\"\\\\s+\", \"\"),\n+                acceptableTokenText.replaceAll(\"\\\\s+\", \"\"),\n+                fileName + \" section '\" + sectionName\n+                        + \"' should have all the acceptable javadoc tokens\");\n+\n+        final String defaultTokenText = columns.get(3).getTextContent().trim();\n+        assertFalse(isInvalidTokenPunctuation(defaultTokenText),\n+                \", & . should be placed at beginning of the next corresponding lines \"\n+                + \"in \" + fileName + \" default javadoc token section: \" + sectionName);", "originalCommit": "16ba68dff825aea98555d6b76394179991c3770d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgzMzc1NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r409833755", "bodyText": "Done", "author": "gaurabdg", "createdAt": "2020-04-16T20:38:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDgyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzNjEyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424036124", "bodyText": "Not completely done, see above.", "author": "rnveach", "createdAt": "2020-05-12T21:11:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDgyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ5NzQyMw==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424497423", "bodyText": "Sorry, for missing out, I have resolved them.", "author": "gaurabdg", "createdAt": "2020-05-13T14:47:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMDgyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMjI4Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407712287", "bodyText": "Why can't we still verify the subset of javadoc tokens text in the assert equals? By splitting the string in this way, that \"subset\" text will not appear in the assertion failure which lets user know it needs to be there.", "author": "rnveach", "createdAt": "2020-04-13T20:49:12Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -897,16 +909,33 @@ private static void validatePropertySectionPropertyJavadocTokens(String fileName\n         assertEquals(\"javadoc tokens to check\",\n                 columns.get(1).getTextContent(), fileName + \" section '\" + sectionName\n                         + \"' should have the basic token javadoc description\");\n-        assertEquals(\"subset of javadoc tokens \"\n-                        + CheckUtil.getJavadocTokenText(check.getAcceptableJavadocTokens(),\n-                                check.getRequiredJavadocTokens()), columns.get(2).getTextContent()\n-                        .replaceAll(\"\\\\s+\", \" \").trim(), fileName + \" section '\" + sectionName\n-                                + \"' should have all the acceptable javadoc tokens\");\n-        assertEquals(\n-                CheckUtil.getJavadocTokenText(check.getDefaultJavadocTokens(),\n-                        check.getRequiredJavadocTokens()), columns.get(3).getTextContent()\n-                        .replaceAll(\"\\\\s+\", \" \").trim(), fileName + \" section '\" + sectionName\n-                                + \"' should have all the default javadoc tokens\");\n+\n+        String acceptableTokenText = columns.get(2).getTextContent().trim();\n+        final int removePrefixIdx = \"subset of javadoc tokens\".length();\n+        acceptableTokenText = acceptableTokenText.substring(removePrefixIdx);", "originalCommit": "16ba68dff825aea98555d6b76394179991c3770d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgzNDE2Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r409834166", "bodyText": "Initially I  was having some problem with regex matching. I have made the required changes now.", "author": "gaurabdg", "createdAt": "2020-04-16T20:38:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMjI4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMjQ1Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r407712453", "bodyText": "same.", "author": "rnveach", "createdAt": "2020-04-13T20:49:30Z", "path": "src/test/java/com/puppycrawl/tools/checkstyle/internal/XdocsPagesTest.java", "diffHunk": "@@ -882,13 +882,25 @@ private static void validatePropertySectionPropertyTokens(String fileName, Strin\n         assertEquals(\"tokens to check\", columns.get(1).getTextContent(),\n                 fileName + \" section '\" + sectionName\n                         + \"' should have the basic token description\");\n-        assertEquals(\"subset of tokens \" + CheckUtil.getTokenText(check.getAcceptableTokens(),\n-                check.getRequiredTokens()),\n-                columns.get(2).getTextContent().replaceAll(\"\\\\s+\", \" \").trim(),\n+\n+        String acceptableTokenText = columns.get(2).getTextContent().trim();\n+        final int removePrefixIdx = \"subset of tokens\".length();\n+        acceptableTokenText = acceptableTokenText.substring(removePrefixIdx);", "originalCommit": "16ba68dff825aea98555d6b76394179991c3770d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgzMzg1Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r409833852", "bodyText": "Done", "author": "gaurabdg", "createdAt": "2020-04-16T20:38:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzcxMjQ1Mw=="}], "type": "inlineReview"}, {"oid": "c4e059ee202f849aa3dcf4eadf51328d32a357db", "url": "https://github.com/checkstyle/checkstyle/commit/c4e059ee202f849aa3dcf4eadf51328d32a357db", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-04-16T20:36:56Z", "type": "forcePushed"}, {"oid": "1a3a9cac5a96b3e3fd5f8d9c76b3378017e877aa", "url": "https://github.com/checkstyle/checkstyle/commit/1a3a9cac5a96b3e3fd5f8d9c76b3378017e877aa", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-04-17T09:12:44Z", "type": "forcePushed"}, {"oid": "a653f34532a06b850bea6738efbec2ab247e9cfd", "url": "https://github.com/checkstyle/checkstyle/commit/a653f34532a06b850bea6738efbec2ab247e9cfd", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-04-18T12:17:34Z", "type": "forcePushed"}, {"oid": "93e85ed54ff888c2236a309c752aa878b4e95116", "url": "https://github.com/checkstyle/checkstyle/commit/93e85ed54ff888c2236a309c752aa878b4e95116", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-04-29T22:45:47Z", "type": "forcePushed"}, {"oid": "136bbc9d627043f06da64925c323e3192e1dcc39", "url": "https://github.com/checkstyle/checkstyle/commit/136bbc9d627043f06da64925c323e3192e1dcc39", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-04-30T00:05:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzODA3Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424038076", "bodyText": "#7993 (comment)\n\nAn UT has been provided to enforce this formatting\nsource:\n#3946 (comment)\nTOKEN1,\nTOKEN2,\nTOKEN3.\nto:\nTOKEN1\n,TOKEN2\n,TOKEN3\n.\n\nUT is not doing what is described in first post of PR or in issue. CI is passing and files are not in new described format.", "author": "rnveach", "createdAt": "2020-05-12T21:15:13Z", "path": "src/xdocs/config_javadoc.xml", "diffHunk": "@@ -64,7 +64,8 @@\n               <td>\n                 <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#CLASS_DEF\">\n                   CLASS_DEF</a>,\n-                <a href=\"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#INTERFACE_DEF\">\n+                <a href=\n+                   \"apidocs/com/puppycrawl/tools/checkstyle/api/TokenTypes.html#INTERFACE_DEF\">\n                   INTERFACE_DEF</a>,", "originalCommit": "136bbc9d627043f06da64925c323e3192e1dcc39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0MTgxMg==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424041812", "bodyText": "This is not a tokens or javadocTokens property, but I believe we are still validating its contents as part of the same test.", "author": "rnveach", "createdAt": "2020-05-12T21:23:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzODA3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ5NzE5Mg==", "url": "https://github.com/checkstyle/checkstyle/pull/7993#discussion_r424497192", "bodyText": "Done, for all such occurences", "author": "gaurabdg", "createdAt": "2020-05-13T14:47:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzODA3Ng=="}], "type": "inlineReview"}, {"oid": "613a4d2a6e86ecd8f92b82b8eb8e34955ec26bfc", "url": "https://github.com/checkstyle/checkstyle/commit/613a4d2a6e86ecd8f92b82b8eb8e34955ec26bfc", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-05-13T14:48:52Z", "type": "forcePushed"}, {"oid": "9659cf1c49158c9b4dd604b7ea9d2d660b0da6ad", "url": "https://github.com/checkstyle/checkstyle/commit/9659cf1c49158c9b4dd604b7ea9d2d660b0da6ad", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-05-13T14:51:42Z", "type": "forcePushed"}, {"oid": "5f0684f4a3afed4a3c2e5987897b9bd6bf6b2eff", "url": "https://github.com/checkstyle/checkstyle/commit/5f0684f4a3afed4a3c2e5987897b9bd6bf6b2eff", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-05-29T20:15:34Z", "type": "forcePushed"}, {"oid": "fb0f36eef5e48fe63042205d44ae304a55dcf816", "url": "https://github.com/checkstyle/checkstyle/commit/fb0f36eef5e48fe63042205d44ae304a55dcf816", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-05-29T20:16:35Z", "type": "forcePushed"}, {"oid": "059b48ff6b462c8da964e2cee52c78d695140fbe", "url": "https://github.com/checkstyle/checkstyle/commit/059b48ff6b462c8da964e2cee52c78d695140fbe", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-05-29T20:20:18Z", "type": "commit"}, {"oid": "059b48ff6b462c8da964e2cee52c78d695140fbe", "url": "https://github.com/checkstyle/checkstyle/commit/059b48ff6b462c8da964e2cee52c78d695140fbe", "message": "Issue #3946: code cleanup: minimize future xdoc changes", "committedDate": "2020-05-29T20:20:18Z", "type": "forcePushed"}]}