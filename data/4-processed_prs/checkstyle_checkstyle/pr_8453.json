{"pr_number": 8453, "pr_title": "minor: improve diff_report.yml file", "pr_createdAt": "2020-07-15T09:45:58Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8453", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzMDM5Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8453#discussion_r454930397", "bodyText": "this line is too long (should be less than 100 chars)", "author": "strkkk", "createdAt": "2020-07-15T09:50:02Z", "path": ".github/workflows/diff_report.yml", "diffHunk": "@@ -65,62 +65,52 @@ jobs:\n        run: |\n         echo ::set-output name=user::$(cat user)\n         echo ::set-output name=ref::$(cat branch)\n-      \n-     - name: info\n-       run: |\n-        cat user\n-        cat branch\n-        echo ${{steps.branch.outputs.ref}}\n-        echo ${{steps.branch.outputs.user}}:\n+        \n      \n   make_report:\n     runs-on: ubuntu-latest\n     needs: parse_body\n-    if: needs.parse_body.outputs.proj_link != '' && needs.parse_body.outputs.config_link != ''\n+    if: needs.parse_body.outputs.project_link != '' && needs.parse_body.outputs.config_link != ''\n     steps: \n        \n      - name: Download files\n        run: |\n-        wget -q ${{needs.parse_body.outputs.proj_link}} -O proj.properties\n-        wget -q ${{needs.parse_body.outputs.config_link}} -O config.xml\n+        wget -q \"${{needs.parse_body.outputs.project_link}}\" -O project.properties\n+        wget -q \"${{needs.parse_body.outputs.config_link}}\" -O config.xml\n         \n+     # fetch-depth - number of commits to fetch. \n+     # 0 indicates all history for all branches and tags.\n+     # 0, because we need access to all branches to create a report.\n+     # ref - branch to checkout.\n      - name: Download checkstyle\n        uses: actions/checkout@v2\n        with:\n         repository: ${{needs.parse_body.outputs.user}}/checkstyle\n         ref: master\n         path: checkstyle\n         fetch-depth: 0\n-        \n-     - name: Check branches\n-       run: |\n-         cd checkstyle\n-         git branch -r\n-         cd ../\n      \n+     # fetch-depth default: 1\n+     # Don't need history for all branches and tags here.\n      - name: Download contribution\n        uses: actions/checkout@v2\n        with:\n         repository: checkstyle/contribution\n+        ref: master\n         path: contribution\n          \n-     - name: Print branch\n-       run: |\n-         echo ${{needs.parse_body.outputs.branch}}\n-         \n      - name: Relocate .xml and .properties \n        run: |\n          mv config.xml ./contribution/checkstyle-tester/\n-         mv proj.properties ./contribution/checkstyle-tester/\n+         mv project.properties ./contribution/checkstyle-tester/\n          \n      - name: Generate report\n        run: |\n          bash\n          REF=\"origin/${{needs.parse_body.outputs.branch}}\"\n          cd contribution/checkstyle-tester\n-         sudo apt-get install mercurial\n          sudo apt install groovy\n-         groovy diff.groovy -r ../../checkstyle -b master -p $REF -c config.xml -l proj.properties\n+         groovy diff.groovy -r ../../checkstyle -b master -p $REF -c config.xml -l project.properties", "originalCommit": "c7fc6bf8d5fa9e7f0d26b76304dc7a14df188e45", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ceb9dddc0237dd406e773afee1d4a557c0cfbe46", "url": "https://github.com/checkstyle/checkstyle/commit/ceb9dddc0237dd406e773afee1d4a557c0cfbe46", "message": "minor: improve diff_report.yml file", "committedDate": "2020-07-15T12:17:07Z", "type": "commit"}]}