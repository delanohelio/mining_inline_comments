{"pr_number": 8024, "pr_title": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "pr_createdAt": "2020-04-03T17:56:26Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8024", "timeline": [{"oid": "d7ef7942061e10da466b72213daf676d2b8c9e05", "url": "https://github.com/checkstyle/checkstyle/commit/d7ef7942061e10da466b72213daf676d2b8c9e05", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-04T09:17:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY1NjYwOQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r403656609", "bodyText": "maybe it's worth keeping this in the code for the comment explaining it?", "author": "esilkensen", "createdAt": "2020-04-05T06:33:36Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/PackageDeclarationCheck.java", "diffHunk": "@@ -100,9 +100,6 @@\n      */\n     public static final String MSG_KEY_MISMATCH = \"mismatch.package.directory\";\n \n-    /** Line number used to log violation when no AST nodes are present in file. */\n-    private static final int DEFAULT_LINE_NUMBER = 1;", "originalCommit": "d7ef7942061e10da466b72213daf676d2b8c9e05", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzczMTgzMg==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r403731832", "bodyText": "I thought why to use an extra variable, so I removed this.", "author": "DXTkastb", "createdAt": "2020-04-05T17:23:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY1NjYwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc0MjAzNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r403742034", "bodyText": "I don\u2019t think it\u2019s a big deal, but probably lean toward keeping the variable and comment in case it makes the code more readable for someone looking at it.", "author": "esilkensen", "createdAt": "2020-04-05T18:51:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY1NjYwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY1Nzk1NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r403657955", "bodyText": "it looks like this can lead to an ArrayIndexOutOfBoundsException on empty files - is that a concern?\n\nhttps://dxtkastb.github.io/checkstyle/reports/packed/diff/hibernate-orm/index.html#A19\nhttps://dxtkastb.github.io/checkstyle/reports/packed/diff/openjdk9/index.html#A38033", "author": "esilkensen", "createdAt": "2020-04-05T06:48:42Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/PackageDeclarationCheck.java", "diffHunk": "@@ -140,11 +137,12 @@ public void beginTree(DetailAST ast) {\n     @Override\n     public void finishTree(DetailAST ast) {\n         if (!defined) {\n-            int lineNumber = DEFAULT_LINE_NUMBER;\n-            if (ast != null) {\n-                lineNumber = ast.getLineNo();\n+            if (ast == null) {\n+                log(1, 0, MSG_KEY_MISSING);", "originalCommit": "d7ef7942061e10da466b72213daf676d2b8c9e05", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzczNTcxNQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r403735715", "bodyText": "Yes, one of the tests for this check is made on the empty java file(with at least one comment). Due to this, Ast goes null and so we are using log(1, 0, MSG_KEY_MISSING);. This points violation on line:1 coumn:1 of the file.\nThe issue here is empty file can look like:\n1.Single line comment in the file\n2.Multiline comment\n3.Completely empty file..No comment nothing.\nThe first two cases are covered but if it is completely empty its a problem. I will test this case and revert as soons as possible. Thanks for pointing this out.", "author": "DXTkastb", "createdAt": "2020-04-05T17:56:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY1Nzk1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc0MTc4MQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r403741781", "bodyText": "Maybe in that third case we should fall back on the old way of logging with only a line number rather than throw an exception?", "author": "esilkensen", "createdAt": "2020-04-05T18:48:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY1Nzk1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc0OTI1OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r403749258", "bodyText": "I think I made a mistake by passing '0' as column number, as I did not pay heed to this empty file scenario. And yes I should probably switch back to old logging way otherwise the exception has to be caught and the method for processing files in Checker.java will need to be changed drastically which is not a wise move.", "author": "DXTkastb", "createdAt": "2020-04-05T19:56:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY1Nzk1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc0OTU2NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r403749565", "bodyText": "I will do the changes suggested and provide the new diff report shortly. Once again, thanks for the guidance.", "author": "DXTkastb", "createdAt": "2020-04-05T19:59:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY1Nzk1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc1MjUyNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r403752524", "bodyText": "Sounds good, thanks @DXTkastb!", "author": "esilkensen", "createdAt": "2020-04-05T20:24:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY1Nzk1NQ=="}], "type": "inlineReview"}, {"oid": "a004e0b93f4fb60189b22fb685186931bbd7249f", "url": "https://github.com/checkstyle/checkstyle/commit/a004e0b93f4fb60189b22fb685186931bbd7249f", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-06T10:18:47Z", "type": "forcePushed"}, {"oid": "c5ef37b42bb6b64c96fd9e4964af4dc70e670d93", "url": "https://github.com/checkstyle/checkstyle/commit/c5ef37b42bb6b64c96fd9e4964af4dc70e670d93", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-06T12:31:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NDg2Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r404794863", "bodyText": "Why does test2 come before test1? Please swap their order.", "author": "rnveach", "createdAt": "2020-04-07T13:09:27Z", "path": "src/it/java/org/checkstyle/suppressionxpathfilter/XpathRegressionPackageDeclarationTest.java", "diffHunk": "@@ -0,0 +1,84 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package org.checkstyle.suppressionxpathfilter;\n+\n+import java.io.File;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.checks.coding.PackageDeclarationCheck;\n+\n+public class XpathRegressionPackageDeclarationTest extends AbstractXpathTestSupport {\n+\n+    private final String checkName = PackageDeclarationCheck.class.getSimpleName();\n+\n+    @Override\n+    protected String getCheckName() {\n+        return checkName;\n+    }\n+\n+    @Test\n+    public void test2() throws Exception {", "originalCommit": "c5ef37b42bb6b64c96fd9e4964af4dc70e670d93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI3MTAyOA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r405271028", "bodyText": "done", "author": "DXTkastb", "createdAt": "2020-04-08T05:45:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NDg2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NTEwNA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r404795104", "bodyText": "Indentation looks wrong compared to other test.", "author": "rnveach", "createdAt": "2020-04-07T13:09:48Z", "path": "src/it/java/org/checkstyle/suppressionxpathfilter/XpathRegressionPackageDeclarationTest.java", "diffHunk": "@@ -0,0 +1,84 @@\n+////////////////////////////////////////////////////////////////////////////////\n+// checkstyle: Checks Java source code for adherence to a set of rules.\n+// Copyright (C) 2001-2020 the original author or authors.\n+//\n+// This library is free software; you can redistribute it and/or\n+// modify it under the terms of the GNU Lesser General Public\n+// License as published by the Free Software Foundation; either\n+// version 2.1 of the License, or (at your option) any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+// Lesser General Public License for more details.\n+//\n+// You should have received a copy of the GNU Lesser General Public\n+// License along with this library; if not, write to the Free Software\n+// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+////////////////////////////////////////////////////////////////////////////////\n+\n+package org.checkstyle.suppressionxpathfilter;\n+\n+import java.io.File;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.List;\n+\n+import org.junit.jupiter.api.Test;\n+\n+import com.puppycrawl.tools.checkstyle.DefaultConfiguration;\n+import com.puppycrawl.tools.checkstyle.checks.coding.PackageDeclarationCheck;\n+\n+public class XpathRegressionPackageDeclarationTest extends AbstractXpathTestSupport {\n+\n+    private final String checkName = PackageDeclarationCheck.class.getSimpleName();\n+\n+    @Override\n+    protected String getCheckName() {\n+        return checkName;\n+    }\n+\n+    @Test\n+    public void test2() throws Exception {\n+        final File fileToProcess =\n+                new File(getNonCompilablePath(\"SuppressionXpathRegression2.java\"));\n+\n+        final DefaultConfiguration moduleConfig =\n+                createModuleConfig(PackageDeclarationCheck.class);\n+\n+        final String[] expectedViolation = {\n+            \"1:1: \" + getCheckMessage(PackageDeclarationCheck.class,\n+                    PackageDeclarationCheck.MSG_KEY_MISSING),\n+        };\n+\n+        final List<String> expectedXpathQueries = Arrays.asList(\n+                \"/CLASS_DEF[./IDENT[@text='SuppressionXpathRegression2']]\",\n+                \"/CLASS_DEF[./IDENT[@text='SuppressionXpathRegression2']]/MODIFIERS\",\n+                \"/CLASS_DEF[./IDENT[@text='SuppressionXpathRegression2']]/MODIFIERS/LITERAL_PUBLIC\"\n+        );\n+\n+        runVerifications(moduleConfig, fileToProcess, expectedViolation,\n+                expectedXpathQueries);\n+    }\n+\n+    @Test\n+    public void test1() throws Exception {\n+        final File fileToProcess =\n+                new File(getNonCompilablePath(\"SuppressionXpathRegression1.java\"));\n+\n+        final DefaultConfiguration moduleConfig =\n+                createModuleConfig(PackageDeclarationCheck.class);\n+\n+        final String[] expectedViolation = {\n+            \"1:1: \" + getCheckMessage(PackageDeclarationCheck.class,\n+        PackageDeclarationCheck.MSG_KEY_MISMATCH),", "originalCommit": "c5ef37b42bb6b64c96fd9e4964af4dc70e670d93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI3MTA2Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r405271066", "bodyText": "done", "author": "DXTkastb", "createdAt": "2020-04-08T05:45:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NTEwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NTU3NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r404795574", "bodyText": "@romani ping. It seems to me we need to document this that the check isn't fully xpath compliant.", "author": "rnveach", "createdAt": "2020-04-07T13:10:28Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/PackageDeclarationCheck.java", "diffHunk": "@@ -140,11 +140,12 @@ public void beginTree(DetailAST ast) {\n     @Override\n     public void finishTree(DetailAST ast) {\n         if (!defined) {\n-            int lineNumber = DEFAULT_LINE_NUMBER;\n-            if (ast != null) {\n-                lineNumber = ast.getLineNo();\n+            if (ast == null) {\n+                log(DEFAULT_LINE_NUMBER, MSG_KEY_MISSING);", "originalCommit": "c5ef37b42bb6b64c96fd9e4964af4dc70e670d93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDgyOTgwMw==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r404829803", "bodyText": "yes, this is exception case.\nunfortunately empty java files are valid files by javac:\n/var/tmp$ cat Test.java \n/var/tmp$ javac Test.java \n/var/tmp$ echo $?\n0\n\nSo we have two options:\n\ndo not report violation, as at https://checkstyle.org/config_coding.html#PackageDeclaration we all talk about classes, but file is compilation unit, file is not mean class. No classes/types - no violations.\nupdate documentation of Check and Filter  that for such cases user need to use non Xpath suppression.\n\nthis code come to us at 2ce3fc4 , as you can see in issue there was no demand for such files to have violation, there was problem with NPE - #1149 .\nI suggesting do \"2)\" now , create separate issue to fix \"1)\" and do it separately.\n@rnveach , if you agree, let do this.", "author": "romani", "createdAt": "2020-04-07T13:57:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NTU3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA1OTI1OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r405059258", "bodyText": "I agree with 2. @DXTkastb please make the change. Documentation should be updated in both areas, filter and check.\nI agree with 1 if we are moving validation to another Check. If this becomes the case, we can then remove documentation in new issue. @DXTkastb please start the issue.", "author": "rnveach", "createdAt": "2020-04-07T19:29:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NTU3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUwNjM4Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r405506387", "bodyText": "I am ok to loose this  validation on empty files. Nobody requested it, value of it is very small.", "author": "romani", "createdAt": "2020-04-08T13:02:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NTU3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTgwNzM3NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r405807375", "bodyText": "I have updated the documentation. If anything needs to be changed or added to the documentation please let me know. I have added the screenshots of documentation in the first post.", "author": "DXTkastb", "createdAt": "2020-04-08T20:52:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NTU3NA=="}], "type": "inlineReview"}, {"oid": "0b0d647957e15dac9e1e42b77719740a2dd14be5", "url": "https://github.com/checkstyle/checkstyle/commit/0b0d647957e15dac9e1e42b77719740a2dd14be5", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-07T18:35:57Z", "type": "forcePushed"}, {"oid": "d6104650177fc22be0fe6928ccb5715ecf3f3c61", "url": "https://github.com/checkstyle/checkstyle/commit/d6104650177fc22be0fe6928ccb5715ecf3f3c61", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-07T19:18:33Z", "type": "forcePushed"}, {"oid": "513ebd47dc07dc5b062776ec6cfefa8f5e27575b", "url": "https://github.com/checkstyle/checkstyle/commit/513ebd47dc07dc5b062776ec6cfefa8f5e27575b", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-08T20:47:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxODc4OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409618788", "bodyText": "PackageDeclaration (untill https://github.com/checkstyle/checkstyle/issues/8110 ....", "author": "romani", "createdAt": "2020-04-16T14:50:01Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/filters/SuppressionXpathFilter.java", "diffHunk": "@@ -108,6 +105,15 @@\n  * </li>\n  * </ul>\n  * <p>\n+ * Certain Checks are partially supported by the filter:\n+ * </p>\n+ * <ul>\n+ * <li>\n+ * PackageDeclaration (reason at\n+ * <a href=\"https://github.com/checkstyle/checkstyle/pull/8024#discussion_r404829803\">PR: #8024</a>)", "originalCommit": "513ebd47dc07dc5b062776ec6cfefa8f5e27575b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3MTU0Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409871547", "bodyText": "done", "author": "DXTkastb", "createdAt": "2020-04-16T21:55:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxODc4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxOTIyNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409619227", "bodyText": "untill #8110", "author": "romani", "createdAt": "2020-04-16T14:50:35Z", "path": "src/xdocs/config_coding.xml", "diffHunk": "@@ -4637,6 +4637,13 @@ public void foo(int i, String s) {}\n           These directories are added to the classpath so that your classes\n           are visible to JVM when it runs the code.\n         </p>\n+        <p>\n+          <b>Note:</b>\n+          This Check is partially supported by Xpath Suppression Filters. In case of testing empty\n+          java files, Xpath Suppression Filters are not supported for this Check. (reason at\n+          <a href=\"https://github.com/checkstyle/checkstyle/pull/8024#discussion_r404829803\">PR: #8024", "originalCommit": "513ebd47dc07dc5b062776ec6cfefa8f5e27575b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3MTM5Nw==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409871397", "bodyText": "done", "author": "DXTkastb", "createdAt": "2020-04-16T21:55:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxOTIyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxOTQ3Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409619476", "bodyText": "untill #8110", "author": "romani", "createdAt": "2020-04-16T14:50:53Z", "path": "src/xdocs/config_filters.xml", "diffHunk": "@@ -924,6 +923,16 @@ public class UserService {\n           <li>VariableDeclarationUsageDistance</li>\n           <li>WriteTag</li>\n         </ul>\n+        <p>\n+          Certain Checks are partially supported by the filter:\n+        </p>\n+        <ul>\n+          <li>\n+             PackageDeclaration\n+             (reason at\n+             <a href=\"https://github.com/checkstyle/checkstyle/pull/8024#discussion_r404829803\">PR: #8024</a>)", "originalCommit": "513ebd47dc07dc5b062776ec6cfefa8f5e27575b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3MTQ1NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409871455", "bodyText": "done", "author": "DXTkastb", "createdAt": "2020-04-16T21:55:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxOTQ3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxOTc1Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409619756", "bodyText": "untill #8110", "author": "romani", "createdAt": "2020-04-16T14:51:14Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/PackageDeclarationCheck.java", "diffHunk": "@@ -42,6 +42,13 @@\n  * These directories are added to the classpath so that your classes\n  * are visible to JVM when it runs the code.\n  * </p>\n+ * <p>\n+ * <b>Note:</b>\n+ * This Check is partially supported by Xpath Suppression Filters. In case of testing empty\n+ * java files, Xpath Suppression Filters are not supported for this Check.\n+ * (reason at\n+ * <a href=\"https://github.com/checkstyle/checkstyle/pull/8024#discussion_r404829803\">PR: #8024</a>)", "originalCommit": "513ebd47dc07dc5b062776ec6cfefa8f5e27575b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3MTQ5OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409871498", "bodyText": "done", "author": "DXTkastb", "createdAt": "2020-04-16T21:55:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxOTc1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMTAxMA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409621010", "bodyText": "each non-compiled file should have comment like\n\n  \n    \n      checkstyle/src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packageannotation/SuppressionXpathRegressionPackageAnnotationOne.java\n    \n    \n         Line 1\n      in\n      513ebd4\n    \n    \n    \n    \n\n        \n          \n           //non-compiled with javac: non-compilable, compiling on jdk before 8 \n        \n    \n  \n\n to explain a reason.\nPlease do the same for other Input too.", "author": "romani", "createdAt": "2020-04-16T14:52:44Z", "path": "src/it/resources-noncompilable/org/checkstyle/suppressionxpathfilter/packagedeclaration/SuppressionXpathRegression1.java", "diffHunk": "@@ -0,0 +1,5 @@\n+package org.junit.contrib; // warn", "originalCommit": "513ebd47dc07dc5b062776ec6cfefa8f5e27575b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3MTYwMQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r409871601", "bodyText": "done", "author": "DXTkastb", "createdAt": "2020-04-16T21:56:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMTAxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI1Nzk2NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r410257964", "bodyText": "non-compilable.\n\nwrong package.\nyou can make it even more clear - package this.package.mismatch.with.folder", "author": "romani", "createdAt": "2020-04-17T14:24:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMTAxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDY2OTU3OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r410669578", "bodyText": "done.", "author": "DXTkastb", "createdAt": "2020-04-18T08:45:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMTAxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcwNzQ4NQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r410707485", "bodyText": "not a comment .\nplease make code as package this.package.mismatch.with.folder; // warn", "author": "romani", "createdAt": "2020-04-18T14:49:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMTAxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczNDY4Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r410734683", "bodyText": "@romani In that case our checkstyle throws error as it thinks this.package  is unknown token. There is some java parsing problem, probably as these are keyword.", "author": "DXTkastb", "createdAt": "2020-04-18T18:41:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMTAxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDc0MDk1OA==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r410740958", "bodyText": "my.packagename.mismatch.with.folder", "author": "romani", "createdAt": "2020-04-18T19:32:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMTAxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDgyMDA0Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8024#discussion_r410820043", "bodyText": "done", "author": "DXTkastb", "createdAt": "2020-04-19T05:20:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMTAxMA=="}], "type": "inlineReview"}, {"oid": "f0aa4fdc3bcf88c6a6cba0e4f25e8ade409c88b4", "url": "https://github.com/checkstyle/checkstyle/commit/f0aa4fdc3bcf88c6a6cba0e4f25e8ade409c88b4", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-16T18:04:02Z", "type": "forcePushed"}, {"oid": "cad1e8fbfbc661064be790c5df83da47c9eea129", "url": "https://github.com/checkstyle/checkstyle/commit/cad1e8fbfbc661064be790c5df83da47c9eea129", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-17T16:17:49Z", "type": "forcePushed"}, {"oid": "2e03770ac8f24a9b32d40d8511b55ed1b5eaf80b", "url": "https://github.com/checkstyle/checkstyle/commit/2e03770ac8f24a9b32d40d8511b55ed1b5eaf80b", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-17T16:19:15Z", "type": "forcePushed"}, {"oid": "e7b1ab3becca9d919f0cc31dabd268574583b862", "url": "https://github.com/checkstyle/checkstyle/commit/e7b1ab3becca9d919f0cc31dabd268574583b862", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration.", "committedDate": "2020-04-18T08:04:32Z", "type": "forcePushed"}, {"oid": "da5c6d51546db23ceddd67e64950d139796b1783", "url": "https://github.com/checkstyle/checkstyle/commit/da5c6d51546db23ceddd67e64950d139796b1783", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-18T09:57:59Z", "type": "forcePushed"}, {"oid": "89316b357d03b327de1623b634eca2eda84fc5cd", "url": "https://github.com/checkstyle/checkstyle/commit/89316b357d03b327de1623b634eca2eda84fc5cd", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-19T04:36:50Z", "type": "forcePushed"}, {"oid": "06f154ba083e22c0d473c7e8064bf604c91dd61b", "url": "https://github.com/checkstyle/checkstyle/commit/06f154ba083e22c0d473c7e8064bf604c91dd61b", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-19T05:20:18Z", "type": "forcePushed"}, {"oid": "0354e19b6858a0c8b19fe8b61193f31a01055969", "url": "https://github.com/checkstyle/checkstyle/commit/0354e19b6858a0c8b19fe8b61193f31a01055969", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-19T05:22:37Z", "type": "commit"}, {"oid": "0354e19b6858a0c8b19fe8b61193f31a01055969", "url": "https://github.com/checkstyle/checkstyle/commit/0354e19b6858a0c8b19fe8b61193f31a01055969", "message": "Issue #7758: Update AbstractChecks to log DetailAST - PackageDeclaration", "committedDate": "2020-04-19T05:22:37Z", "type": "forcePushed"}]}