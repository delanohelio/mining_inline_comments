{"pr_number": 8060, "pr_title": "Issue #8051: set up semaphore CI", "pr_createdAt": "2020-04-09T17:01:16Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8060", "timeline": [{"oid": "9361e44d243c04009ec8c5f8de16db7f8ba9beba", "url": "https://github.com/checkstyle/checkstyle/commit/9361e44d243c04009ec8c5f8de16db7f8ba9beba", "message": "Issue #8051: set up semaphore CI", "committedDate": "2020-04-09T17:10:24Z", "type": "forcePushed"}, {"oid": "bf63b24492a7156fecf66410bda5ccafd970fac2", "url": "https://github.com/checkstyle/checkstyle/commit/bf63b24492a7156fecf66410bda5ccafd970fac2", "message": "Issue #8051: set up semaphore CI", "committedDate": "2020-04-10T16:48:54Z", "type": "forcePushed"}, {"oid": "4adffb58ae115e54502f6c4e991717ed2e5e2ba5", "url": "https://github.com/checkstyle/checkstyle/commit/4adffb58ae115e54502f6c4e991717ed2e5e2ba5", "message": "Issue #8051: set up semaphore CI", "committedDate": "2020-04-10T16:56:49Z", "type": "forcePushed"}, {"oid": "a20c8ae60baf0562db21877b2f7dec5c83ad1419", "url": "https://github.com/checkstyle/checkstyle/commit/a20c8ae60baf0562db21877b2f7dec5c83ad1419", "message": "Issue #8051: set up semaphore CI", "committedDate": "2020-04-10T16:58:08Z", "type": "forcePushed"}, {"oid": "e98dbd743f26c8bab0c1f659d2091e9f8899589e", "url": "https://github.com/checkstyle/checkstyle/commit/e98dbd743f26c8bab0c1f659d2091e9f8899589e", "message": "Issue #8051: set up semaphore CI", "committedDate": "2020-04-10T17:20:23Z", "type": "forcePushed"}, {"oid": "ee388008d4336397e7669e43520ea0b0067c283d", "url": "https://github.com/checkstyle/checkstyle/commit/ee388008d4336397e7669e43520ea0b0067c283d", "message": "Issue #8051: set up semaphore CI", "committedDate": "2020-04-11T08:00:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIwODQzNw==", "url": "https://github.com/checkstyle/checkstyle/pull/8060#discussion_r407208437", "bodyText": "can we do something different that we do not do on other CIs ?\nor you plan todo this in separate PR?", "author": "romani", "createdAt": "2020-04-12T14:47:07Z", "path": ".ci/semaphore.yml", "diffHunk": "@@ -0,0 +1,37 @@\n+version: v1.0\n+name: \"Checkstyle CI pipeline on Semaphore\"\n+agent:\n+  machine:\n+    type: e1-standard-2\n+    os_image: ubuntu1804\n+blocks:\n+  - name: \"Main\"\n+    task:\n+      prologue:\n+        commands:\n+          - checkout\n+          - cache restore m2\n+          - eval \"export M2_CACHE_SIZE=$(du -s $HOME/.m2 | cut -f1)\"\n+      epilogue:\n+        commands:\n+          - |\n+            if [[ ${M2_CACHE_SIZE} -ne $(du -s $HOME/.m2 | cut -f1) ]]\n+            then\n+              cache delete m2\n+              cache store m2 $HOME/.m2\n+            fi\n+      jobs:\n+        - name: \"Build\"\n+          matrix:\n+            - env_var: JDK\n+              values:\n+                - \"8\"\n+                - \"11\"", "originalCommit": "ee388008d4336397e7669e43520ea0b0067c283d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIxMDc5NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8060#discussion_r407210794", "bodyText": "Yes, the idea is to remove some stages from the travis to speed up the whole process.", "author": "pbludov", "createdAt": "2020-04-12T15:05:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIwODQzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2MjM4NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8060#discussion_r407262384", "bodyText": "can we use this CI to test other jdk builds ?\nTo remove item from Travis I need to trust this CI, so it is better to put on it something not critical and test it by time (1-2 month), github integrations, logs review, access to logs, ..... we need a lot of features.\nTravis is most stable and quick CI, it host most critical items. You might saw try to move from Travis to Jenkins :) , that was failed as Jenkins never become stable and reliable ... .", "author": "romani", "createdAt": "2020-04-12T22:52:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIwODQzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2NDE4OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8060#discussion_r407264189", "bodyText": "can we use this CI to test other jdk builds ?\n\nFor other JDK builds we can use Github actions. The list of JDKs supported by Github own CI is here:\nhttps://static.azul.com/zulu/bin/\n\nTo remove item from Travis I need to trust this CI, so it is better to put on it something not critical and test it by time (1-2 month), github integrations, logs review, access to logs, ..... we need a lot of features.\nTravis is most stable and quick CI, it host most critical items. You might saw try to move from Travis to Jenkins :) , that was failed as Jenkins never become stable and reliable ... .\n\nWhat if we move locale builds to this CI? test-de, test-fi and so on? This will speed up the Travis ci pipeline for 10 min at least.", "author": "pbludov", "createdAt": "2020-04-12T23:12:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIwODQzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI2NjE3Ng==", "url": "https://github.com/checkstyle/checkstyle/pull/8060#discussion_r407266176", "bodyText": "I suggest adding some tasks to this CI and wait for a while. If this will be stable for several months, then we can remove some jobs from Travis CI.", "author": "pbludov", "createdAt": "2020-04-12T23:33:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIwODQzNw=="}], "type": "inlineReview"}, {"oid": "90f289ed679f0de2a6af5fbf385cb080b7ea0861", "url": "https://github.com/checkstyle/checkstyle/commit/90f289ed679f0de2a6af5fbf385cb080b7ea0861", "message": "Issue #8051: set up semaphore CI", "committedDate": "2020-04-12T23:21:24Z", "type": "commit"}, {"oid": "90f289ed679f0de2a6af5fbf385cb080b7ea0861", "url": "https://github.com/checkstyle/checkstyle/commit/90f289ed679f0de2a6af5fbf385cb080b7ea0861", "message": "Issue #8051: set up semaphore CI", "committedDate": "2020-04-12T23:21:24Z", "type": "forcePushed"}]}