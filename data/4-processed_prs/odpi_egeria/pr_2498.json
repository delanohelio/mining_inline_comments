{"pr_number": 2498, "pr_title": "Make Egeria Graph DB configurable", "pr_createdAt": "2020-01-26T22:19:51Z", "pr_url": "https://github.com/odpi/egeria/pull/2498", "timeline": [{"oid": "8ddea081f0ffaa2968adea74f0e3740619b0dda3", "url": "https://github.com/odpi/egeria/commit/8ddea081f0ffaa2968adea74f0e3740619b0dda3", "message": "Make Egeria Graph DB configurable\n\nSigned-off-by: Liviu Popa <liviu-constantin.popa@ing.com>", "committedDate": "2020-01-26T22:19:00Z", "type": "commit"}, {"oid": "195ff49e75595acc22acc139979d9a5fcdfea903", "url": "https://github.com/odpi/egeria/commit/195ff49e75595acc22acc139979d9a5fcdfea903", "message": "Make Egeria Graph DB configurable\n\nSigned-off-by: Liviu Popa <liviu-constantin.popa@ing.com>", "committedDate": "2020-01-27T07:28:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwMzUzNA==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r371103534", "bodyText": "Can you clarify the reason for this exclusion - in the past a few issues have been hidden, only to resurface later, when excluding part of a dependency. It is sometimes needed of course, and a valid approach, but we should explain/document why", "author": "planetf1", "createdAt": "2020-01-27T08:12:11Z", "path": "open-metadata-implementation/adapters/open-connectors/event-bus-connectors/open-metadata-topic-connectors/kafka-open-metadata-topic-connector/pom.xml", "diffHunk": "@@ -31,6 +31,12 @@\n         <dependency>\n             <groupId>org.apache.kafka</groupId>\n             <artifactId>kafka-clients</artifactId>\n+            <exclusions>", "originalCommit": "195ff49e75595acc22acc139979d9a5fcdfea903", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg1MDU1NA==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r372850554", "bodyText": "Reverted, no longer applies", "author": "lcpopa", "createdAt": "2020-01-30T09:51:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwMzUzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM0NDY3Nw==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r373344677", "bodyText": "Thanks. closing", "author": "planetf1", "createdAt": "2020-01-31T07:23:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwMzUzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwMzY0Mg==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r371103642", "bodyText": "Same comment here on exclusions", "author": "planetf1", "createdAt": "2020-01-27T08:12:24Z", "path": "open-metadata-implementation/adapters/open-connectors/repository-services-connectors/open-metadata-collection-store-connectors/graph-repository-connector/pom.xml", "diffHunk": "@@ -23,6 +23,18 @@\n     <artifactId>graph-repository-connector</artifactId>\n \n     <dependencies>\n+\n+        <dependency>\n+            <groupId>org.janusgraph</groupId>\n+            <artifactId>janusgraph-cassandra</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <artifactId>hibernate-validator</artifactId>", "originalCommit": "195ff49e75595acc22acc139979d9a5fcdfea903", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjk2MjI5OA==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r372962298", "bodyText": "This version of the validator will overwrite another and the result is Egeria not starting, failing with NoSuchMethod excepion, or similar", "author": "lcpopa", "createdAt": "2020-01-30T13:58:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwMzY0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQwNzQ4Mw==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r373407483", "bodyText": "Reproduced:\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creati                                     ng bean with name 'defaultValidator' defined in class path resource [org/springf                                     ramework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]: Bean                                      instantiation via factory method failed; nested exception is org.springframework                                     .beans.BeanInstantiationException: Failed to instantiate [org.springframework.va                                     lidation.beanvalidation.LocalValidatorFactoryBean]: Factory method 'defaultValid                                     ator' threw exception; nested exception is java.lang.NoClassDefFoundError: org.h                                     ibernate.validator.internal.engine.ConfigurationImpl (initialization failure)\n        at org.springframework.beans.factory.support.ConstructorResolver.instant                                     iate(ConstructorResolver.java:656)\n\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to insta                                     ntiate [org.springframework.validation.beanvalidation.LocalValidatorFactoryBean]                                     : Factory method 'defaultValidator' threw exception; nested exception is java.la                                     ng.NoClassDefFoundError: org.hibernate.validator.internal.engine.ConfigurationIm                                     pl (initialization failure)", "author": "planetf1", "createdAt": "2020-01-31T10:19:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwMzY0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQwODk0NA==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r373408944", "bodyText": "Looks like later versions of the validator cause spring issues. I'd concur that for now we go with the exclusion. When we repackage for the client/server model, or dynamically load all our connectors, then we can revisit.", "author": "planetf1", "createdAt": "2020-01-31T10:22:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwMzY0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNDQyNw==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r371104427", "bodyText": "Antlr 3 dates back to 2014 and is likely to have security issues. Please update to antlr 4 ie 4.8-1 or document why antlr3 is required", "author": "planetf1", "createdAt": "2020-01-27T08:15:03Z", "path": "pom.xml", "diffHunk": "@@ -137,6 +137,9 @@\n         <jackson.databind.version>2.10.0</jackson.databind.version>\n         <kafka.version>2.4.0</kafka.version>\n         <janus.version>0.4.0</janus.version>\n+        <snappy.version>1.1.7.2</snappy.version>\n+        <antlr.version>3.5.2</antlr.version>", "originalCommit": "195ff49e75595acc22acc139979d9a5fcdfea903", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg1MTYzOQ==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r372851639", "bodyText": "This version is required by janusgraph. Can test with a more recent one, but even if it is successful, I do not see it as a full proof solution", "author": "lcpopa", "createdAt": "2020-01-30T09:53:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNDQyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM2NjA0OA==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r373366048", "bodyText": "thanks - looking at options here. will update", "author": "planetf1", "createdAt": "2020-01-31T08:37:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNDQyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxMjEwMA==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r373412100", "bodyText": "antlr3 is being used by a variety of components - janus itself, and then it's other packages ie for cassandra, tinkerpop, elastic search\nI concur, let's go with that version. I'll take a look at the dependency reports for CVEs and if we need to do any further changes we'll do in a new PR", "author": "planetf1", "createdAt": "2020-01-31T10:29:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNDQyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxMzQyMw==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r373413423", "bodyText": "snappy occurs in a few more places, including kafka. However we are close to current there, so less of a concern. Again, agree, let's go with this and can reevaluate the cve/dependency report after", "author": "planetf1", "createdAt": "2020-01-31T10:32:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNDQyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNDQ5Mg==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r371104492", "bodyText": "Please update to 2.10.5 (otherwise dependabot will anyway) or document why an earlier version is required", "author": "planetf1", "createdAt": "2020-01-27T08:15:16Z", "path": "pom.xml", "diffHunk": "@@ -137,6 +137,9 @@\n         <jackson.databind.version>2.10.0</jackson.databind.version>\n         <kafka.version>2.4.0</kafka.version>\n         <janus.version>0.4.0</janus.version>\n+        <snappy.version>1.1.7.2</snappy.version>\n+        <antlr.version>3.5.2</antlr.version>\n+        <joda.version>2.10.1</joda.version>", "originalCommit": "195ff49e75595acc22acc139979d9a5fcdfea903", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg1NTg4MA==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r372855880", "bodyText": "I found no other dependency to joda in the pom, and no error came from using 2.10.1 when using graph repo. Are you certain about the necessity of using a higher version ?", "author": "lcpopa", "createdAt": "2020-01-30T10:01:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNDQ5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNTAyNQ==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r371105025", "bodyText": "Please update to 1.1.7.3 -- dependabot will kick in anyway", "author": "planetf1", "createdAt": "2020-01-27T08:16:50Z", "path": "pom.xml", "diffHunk": "@@ -137,6 +137,9 @@\n         <jackson.databind.version>2.10.0</jackson.databind.version>\n         <kafka.version>2.4.0</kafka.version>\n         <janus.version>0.4.0</janus.version>\n+        <snappy.version>1.1.7.2</snappy.version>", "originalCommit": "195ff49e75595acc22acc139979d9a5fcdfea903", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxMzUwOQ==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r373413509", "bodyText": "see above", "author": "planetf1", "createdAt": "2020-01-31T10:33:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNTAyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNTM4OA==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r371105388", "bodyText": "WHy do we have these exclusions. they need to be clarified.\nIf a component is a runtime only dependency then I understand. I can see you recorded antlr as runtime in the pom - and the artifact is named runtime, so that makes sense -- but why the others?\nThere could be latent issues here that need investigation", "author": "planetf1", "createdAt": "2020-01-27T08:18:05Z", "path": "open-metadata-implementation/adapters/open-connectors/repository-services-connectors/open-metadata-collection-store-connectors/graph-repository-connector/pom.xml", "diffHunk": "@@ -82,6 +124,12 @@\n                                 <!-- Runtime dependencies for janusgraph-->\n                                 <ignoredUnusedDeclaredDependency>org.janusgraph:janusgraph-berkeleyje:*</ignoredUnusedDeclaredDependency>\n                                 <ignoredUnusedDeclaredDependency>org.janusgraph:janusgraph-lucene:*</ignoredUnusedDeclaredDependency>\n+                                <ignoredUnusedDeclaredDependency>org.janusgraph:janusgraph-es:*</ignoredUnusedDeclaredDependency>", "originalCommit": "195ff49e75595acc22acc139979d9a5fcdfea903", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mjg1MDExNA==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r372850114", "bodyText": "All these dependencies are runtime, used by janusgraph.", "author": "lcpopa", "createdAt": "2020-01-30T09:50:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNTM4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxNTk1Nw==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r373415957", "bodyText": "Can you update the pom to add <scope>runtime</scope> for these - clarity and stops them being picked up at compile time.", "author": "planetf1", "createdAt": "2020-01-31T10:39:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNTM4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxODA5MQ==", "url": "https://github.com/odpi/egeria/pull/2498#discussion_r373418091", "bodyText": "joda time is pre-java 8 - but agree it's being used on our dependencies inc. tinkerpop and janus\nAgree with others for now -\n\nJanus, cassandra , tinkerpop are bringing in rather a log of dependencies. I can see the rationale for all of these changes. When we are able to dynamically load - and also have the option of client/server, we'll be in a much cleaner state for the rest of the code.\nFor now, let's merge.. and then deal with any issues in later PRs as needed", "author": "planetf1", "createdAt": "2020-01-31T10:44:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEwNTM4OA=="}], "type": "inlineReview"}, {"oid": "ce248ec696557570fdc91201233e0f2c81e70088", "url": "https://github.com/odpi/egeria/commit/ce248ec696557570fdc91201233e0f2c81e70088", "message": "Merge branch 'master' into Make_egeria_graph_repo_configurable", "committedDate": "2020-01-28T10:59:59Z", "type": "commit"}, {"oid": "89f9a16fde6017fecba8319c1f3e36a4a2174e9f", "url": "https://github.com/odpi/egeria/commit/89f9a16fde6017fecba8319c1f3e36a4a2174e9f", "message": "Merge branch 'master' into Make_egeria_graph_repo_configurable", "committedDate": "2020-01-29T13:19:44Z", "type": "commit"}, {"oid": "d556fb9dfa34305e746117be9e1b50acf0f36d91", "url": "https://github.com/odpi/egeria/commit/d556fb9dfa34305e746117be9e1b50acf0f36d91", "message": "Make Egeria Graph DB configurable\n\nSigned-off-by: Liviu Popa <liviu-constantin.popa@ing.com>", "committedDate": "2020-01-29T13:56:56Z", "type": "commit"}, {"oid": "b4ea2850a12b7b168404768a3c9311dc9f9ba0fc", "url": "https://github.com/odpi/egeria/commit/b4ea2850a12b7b168404768a3c9311dc9f9ba0fc", "message": "Make Egeria Graph DB configurable\n\nSigned-off-by: Liviu Popa <liviu-constantin.popa@ing.com>", "committedDate": "2020-01-29T15:00:16Z", "type": "commit"}, {"oid": "5fd0a31dd4fbd6af43595993131e052ed8a05d32", "url": "https://github.com/odpi/egeria/commit/5fd0a31dd4fbd6af43595993131e052ed8a05d32", "message": "Merge branch 'master' into Make_egeria_graph_repo_configurable", "committedDate": "2020-01-30T12:51:49Z", "type": "commit"}, {"oid": "3b7bb5f1724dadf509d74722811469e9eb1edb2c", "url": "https://github.com/odpi/egeria/commit/3b7bb5f1724dadf509d74722811469e9eb1edb2c", "message": "Make Egeria Graph DB configurable\n\nSigned-off-by: Liviu Popa <liviu-constantin.popa@ing.com>", "committedDate": "2020-01-30T13:50:53Z", "type": "commit"}, {"oid": "e2c519dcc65357987d5ae5d7b63e1e7aa7893fc8", "url": "https://github.com/odpi/egeria/commit/e2c519dcc65357987d5ae5d7b63e1e7aa7893fc8", "message": "Merge branch 'master' into Make_egeria_graph_repo_configurable", "committedDate": "2020-01-31T10:33:34Z", "type": "commit"}, {"oid": "db67e8fc07ca2cbf09744f0fa1e69e77a3578b33", "url": "https://github.com/odpi/egeria/commit/db67e8fc07ca2cbf09744f0fa1e69e77a3578b33", "message": "Merge branch 'master' into Make_egeria_graph_repo_configurable", "committedDate": "2020-02-03T07:59:26Z", "type": "commit"}, {"oid": "03ce9aa9e92d94d7a46b72c47ba1368ce3565aa9", "url": "https://github.com/odpi/egeria/commit/03ce9aa9e92d94d7a46b72c47ba1368ce3565aa9", "message": "Merge branch 'master' into Make_egeria_graph_repo_configurable", "committedDate": "2020-02-03T10:57:04Z", "type": "commit"}, {"oid": "60af2ba2dd4a0107c3ee730f07a2faa8e9ffeb99", "url": "https://github.com/odpi/egeria/commit/60af2ba2dd4a0107c3ee730f07a2faa8e9ffeb99", "message": "Merge branch 'master' into Make_egeria_graph_repo_configurable", "committedDate": "2020-02-04T11:08:37Z", "type": "commit"}, {"oid": "5051e3c4baf1d0fa365a3e12d7eff960fcc350f7", "url": "https://github.com/odpi/egeria/commit/5051e3c4baf1d0fa365a3e12d7eff960fcc350f7", "message": "Merge branch 'master' into Make_egeria_graph_repo_configurable", "committedDate": "2020-02-05T09:52:17Z", "type": "commit"}, {"oid": "176700ca239100d5a3ce1abb9523f4a50b68e209", "url": "https://github.com/odpi/egeria/commit/176700ca239100d5a3ce1abb9523f4a50b68e209", "message": "Make Egeria Graph DB configurable\n\nSigned-off-by: Liviu Popa <liviu-constantin.popa@ing.com>", "committedDate": "2020-02-05T12:11:30Z", "type": "commit"}, {"oid": "7641f313a44a7ee93845de4363079d8eb1b746f2", "url": "https://github.com/odpi/egeria/commit/7641f313a44a7ee93845de4363079d8eb1b746f2", "message": "Merge branch 'Make_egeria_graph_repo_configurable' of https://github.com/lcpopa/egeria into Make_egeria_graph_repo_configurable", "committedDate": "2020-02-05T12:12:11Z", "type": "commit"}, {"oid": "af94d8b4340ef51825bb3494f8792b70f8074e94", "url": "https://github.com/odpi/egeria/commit/af94d8b4340ef51825bb3494f8792b70f8074e94", "message": "Merge branch 'master' into Make_egeria_graph_repo_configurable", "committedDate": "2020-02-05T12:13:36Z", "type": "commit"}]}