{"pr_number": 2897, "pr_title": "Add protection against empty or incomplete routeData", "pr_createdAt": "2020-04-09T15:50:22Z", "pr_url": "https://github.com/odpi/egeria/pull/2897", "timeline": [{"oid": "32687e23fd094e35a4852b040e8946ece8f7a171", "url": "https://github.com/odpi/egeria/commit/32687e23fd094e35a4852b040e8946ece8f7a171", "message": "Add protection against empty or incomplete routeData\n\nSigned-off-by: Graham Wallis <graham_wallis@uk.ibm.com>", "committedDate": "2020-04-09T15:46:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxMzc5MQ==", "url": "https://github.com/odpi/egeria/pull/2897#discussion_r406313791", "bodyText": "console.debug might be more suitable", "author": "bogdan-sava", "createdAt": "2020-04-09T16:07:03Z", "path": "open-metadata-implementation/user-interfaces/ui-chassis/ui-chassis-spring/src/main/static/src/repository-explorer/repository-explorer-view.js", "diffHunk": "@@ -605,26 +605,48 @@ class RepositoryExplorerView extends mixinBehaviors([AppLocalizeBehavior], Polym\n \n     _routeChanged(routeData) {\n \n-        var serverName = this.routeData.serverName;\n-        var serverURLRoot_base64 = this.routeData.serverURLRoot_base64;\n-        var serverURLRoot = atob(serverURLRoot_base64);\n-        var guid = this.routeData.guid;\n+        /*\n+         * Whether the caller has appended to the URI or not, routeData will be\n+         * non-null - it is always an object. But if the caller has used the\n+         * plain repository-explorer URI with no tail, the serverName and other\n+         * fields will be undefined.\n+         *\n+         * A note on routeData - it is accessible both as the raw arg or through 'this'\n+         * The following code uses the raw arg.\n+         */\n \n         /*\n-         * It is not possible to connect to the specified server and load the GUID yet,\n-         * because the repository-explorer-view component has not finished loading yet - its\n-         * ready() method has not been called.\n-         * To facilitate the connect and load, package the details into the autoLoad property\n-         * which is inspected at the end of ready() and will initiate the connection to the\n-         * specified server and try to load the object with the given GUID.\n+         * If there is no route data we need to ensure autoLoad is null.\n          */\n-        this.autoLoad = {};\n-        this.autoLoad['serverName'] = serverName;\n-        this.autoLoad['serverURLRoot'] = serverURLRoot;\n-        this.autoLoad['guid'] = guid;\n+        this.autoLoad = null;\n \n-    }\n+        if (routeData.serverName           !== undefined &&\n+            routeData.serverURLRoot_base64 !== undefined &&\n+            routeData.guid                 !== undefined) {\n+\n+            /* We have everything we think we need */\n+            var serverName           = routeData.serverName;\n+            var serverURLRoot_base64 = routeData.serverURLRoot_base64;\n+            var serverURLRoot        = atob(serverURLRoot_base64);\n+            var guid                 = routeData.guid;\n+\n+            console.log(\"routeData is serverName \"+serverName+\" serverURLRoot \"+serverURLRoot+\" guid \"+guid);", "originalCommit": "32687e23fd094e35a4852b040e8946ece8f7a171", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxNzg2OA==", "url": "https://github.com/odpi/egeria/pull/2897#discussion_r406317868", "bodyText": "Whoops - sorry - I meant to remove that!", "author": "grahamwallis", "createdAt": "2020-04-09T16:13:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxMzc5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMyMTkzNw==", "url": "https://github.com/odpi/egeria/pull/2897#discussion_r406321937", "bodyText": "Have removed it and re-pushed", "author": "grahamwallis", "createdAt": "2020-04-09T16:20:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxMzc5MQ=="}], "type": "inlineReview"}, {"oid": "2840ca7acffc56d9e7aa1ef077da274b12fbe3db", "url": "https://github.com/odpi/egeria/commit/2840ca7acffc56d9e7aa1ef077da274b12fbe3db", "message": "Merge branch 'master' into issue_2896", "committedDate": "2020-04-09T16:13:08Z", "type": "commit"}, {"oid": "fb9077b9a5d0db7c3c410cb2b26cd6212057e5cd", "url": "https://github.com/odpi/egeria/commit/fb9077b9a5d0db7c3c410cb2b26cd6212057e5cd", "message": "Merge branch 'master' of http://github.com/odpi/egeria into issue_2896", "committedDate": "2020-04-09T16:14:02Z", "type": "commit"}, {"oid": "9f7dfd9372be3e42cafe843facb49c5e6d998dd4", "url": "https://github.com/odpi/egeria/commit/9f7dfd9372be3e42cafe843facb49c5e6d998dd4", "message": "Removes console output - only meant for dev...\n\nSigned-off-by: Graham Wallis <graham_wallis@uk.ibm.com>", "committedDate": "2020-04-09T16:14:51Z", "type": "commit"}, {"oid": "b40ce7568fe1aaad2c2e04914224d71960f4b975", "url": "https://github.com/odpi/egeria/commit/b40ce7568fe1aaad2c2e04914224d71960f4b975", "message": "Merge branch 'issue_2896' of https://github.com/grahamwallis/egeria into issue_2896", "committedDate": "2020-04-09T16:17:50Z", "type": "commit"}]}