{"pr_number": 2116, "pr_title": "Im 2020 09 29 term doc updates", "pr_createdAt": "2020-10-05T18:12:07Z", "pr_url": "https://github.com/hapifhir/hapi-fhir/pull/2116", "timeline": [{"oid": "8613e76659766c7c7c9ae431e36936c0eece6bc6", "url": "https://github.com/hapifhir/hapi-fhir/commit/8613e76659766c7c7c9ae431e36936c0eece6bc6", "message": "Documentation for terminology.", "committedDate": "2020-10-05T01:20:19Z", "type": "commit"}, {"oid": "2258d3728319eeb63daff51dc40808b02d2b18a1", "url": "https://github.com/hapifhir/hapi-fhir/commit/2258d3728319eeb63daff51dc40808b02d2b18a1", "message": "Documentation for terminology.", "committedDate": "2020-10-05T13:02:00Z", "type": "commit"}, {"oid": "03bd94462db4ef9b8afd5b11fa963b9f06441594", "url": "https://github.com/hapifhir/hapi-fhir/commit/03bd94462db4ef9b8afd5b11fa963b9f06441594", "message": "Fix typo in changelog.", "committedDate": "2020-10-05T14:13:08Z", "type": "commit"}, {"oid": "4ca739e2236c39f1329b81a0d6aaefe1ac91a7ef", "url": "https://github.com/hapifhir/hapi-fhir/commit/4ca739e2236c39f1329b81a0d6aaefe1ac91a7ef", "message": "Improvements to terminology documentation.", "committedDate": "2020-10-05T16:02:01Z", "type": "commit"}, {"oid": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "url": "https://github.com/hapifhir/hapi-fhir/commit/30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "message": "Improvements to terminology documentation.", "committedDate": "2020-10-05T18:08:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgwNTY3Nw==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499805677", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # This is the version identifier for uploaded CodeSystem resource.\n          \n          \n            \n            # If specified, a versioned instance of the CodeSystem will be loaded and this version value will be appended to the terminology resource\n          \n          \n            \n            # (i.e. CodeSystem, ValueSet, and ConceptMap) ID values to distinguish them from other versioned instances.\n          \n          \n            \n            # This is the version for an uploaded code system (i.e. `CodeSystem.version`).\n          \n          \n            \n            # If specified, a versioned instance of the CodeSystem will be loaded and this version value will be appended to the terminology resource ID values\n          \n          \n            \n            # to distinguish these resources from other versioned instances (i.e. CodeSystem.id, ValueSet.id, and ConceptMap.id).", "author": "dmuylwyk", "createdAt": "2020-10-05T18:56:35Z", "path": "hapi-fhir-jpaserver-base/src/main/resources/ca/uhn/fhir/jpa/term/loinc/loincupload.properties", "diffHunk": "@@ -73,6 +73,12 @@ loinc.answerlist.version=Beta.1\n ## Key may be omitted\n loinc.conceptmap.version=Beta.1\n \n+# This is the version identifier for uploaded CodeSystem resource.\n+# If specified, a versioned instance of the CodeSystem will be loaded and this version value will be appended to the terminology resource\n+# (i.e. CodeSystem, ValueSet, and ConceptMap) ID values to distinguish them from other versioned instances.", "originalCommit": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgwNzc4OQ==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499807789", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            CodeSystem resources can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly ValueSet and ConceptMap resources that are defined with a versioned CodeSystem can also be versioned.\n          \n          \n            \n            Code systems can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly, value sets and concept maps that are defined with a versioned code system can also be versioned.\n          \n      \n    \n    \n  \n\nI suggest distinguishing between a given terminology concept (e.g. a code system) and its equivalent resource (e.g. CodeSystem) for clarity.", "author": "dmuylwyk", "createdAt": "2020-10-05T19:00:19Z", "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/docs/server_jpa/terminology.md", "diffHunk": "@@ -0,0 +1,286 @@\n+# Terminology\n+\n+HAPI FHIR JPA Server includes an `IValidationSupport` class, `JpaPersistedResourceValidationSupport`, which can be used to validate terminology using CodeSystem, ValueSet and ConceptMap resources provided by the JPA Server. Terminology can be loaded into the JPA Server using standard FHIR REST APIs (PUT and POST) as well as using the hapi-fhir-cli [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command.\n+\n+# Versioning of Terminology\n+\n+CodeSystem resources can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly ValueSet and ConceptMap resources that are defined with a versioned CodeSystem can also be versioned.", "originalCommit": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgxNDE4MQ==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499814181", "bodyText": "Fair enough. Done.", "author": "IanMMarshall", "createdAt": "2020-10-05T19:12:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgwNzc4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgwOTM2NQ==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499809365", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Versions of a given CodeSystem, ValueSet or ConceptMap are differentiated from each other by the CodeSystem.version, ValueSet.version and ConceptMap.version properties respectively. Each version of a given CodeSystem, ValueSet and ConceptMap resource will have a separate resource entity.\n          \n          \n            \n            Versions of a given code system, value set or concept map are differentiated from each other by the CodeSystem.version, ValueSet.version and ConceptMap.version properties respectively. Each version of a given code system, value set and concept map will have a separate resource entity. This version should not be confused with the resource version (i.e. Resource.meta.versionId).", "author": "dmuylwyk", "createdAt": "2020-10-05T19:03:10Z", "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/docs/server_jpa/terminology.md", "diffHunk": "@@ -0,0 +1,286 @@\n+# Terminology\n+\n+HAPI FHIR JPA Server includes an `IValidationSupport` class, `JpaPersistedResourceValidationSupport`, which can be used to validate terminology using CodeSystem, ValueSet and ConceptMap resources provided by the JPA Server. Terminology can be loaded into the JPA Server using standard FHIR REST APIs (PUT and POST) as well as using the hapi-fhir-cli [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command.\n+\n+# Versioning of Terminology\n+\n+CodeSystem resources can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly ValueSet and ConceptMap resources that are defined with a versioned CodeSystem can also be versioned.\n+\n+Versions of a given CodeSystem, ValueSet or ConceptMap are differentiated from each other by the CodeSystem.version, ValueSet.version and ConceptMap.version properties respectively. Each version of a given CodeSystem, ValueSet and ConceptMap resource will have a separate resource entity.", "originalCommit": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgxMDE2OA==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499810168", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This page provides the schema of tables that are used to complement the CodeSystem, ValueSet and ConceptMap resources and which map the relationships between these resources and various properties that are used or referenced by terminology operations.\n          \n          \n            \n            This page provides the schema of tables that are used to complement the CodeSystem, ValueSet and ConceptMap resources, and which map the relationships between these resources and various properties that are used or referenced by terminology operations.", "author": "dmuylwyk", "createdAt": "2020-10-05T19:04:50Z", "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/docs/server_jpa/terminology.md", "diffHunk": "@@ -0,0 +1,286 @@\n+# Terminology\n+\n+HAPI FHIR JPA Server includes an `IValidationSupport` class, `JpaPersistedResourceValidationSupport`, which can be used to validate terminology using CodeSystem, ValueSet and ConceptMap resources provided by the JPA Server. Terminology can be loaded into the JPA Server using standard FHIR REST APIs (PUT and POST) as well as using the hapi-fhir-cli [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command.\n+\n+# Versioning of Terminology\n+\n+CodeSystem resources can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly ValueSet and ConceptMap resources that are defined with a versioned CodeSystem can also be versioned.\n+\n+Versions of a given CodeSystem, ValueSet or ConceptMap are differentiated from each other by the CodeSystem.version, ValueSet.version and ConceptMap.version properties respectively. Each version of a given CodeSystem, ValueSet and ConceptMap resource will have a separate resource entity.\n+\n+When queries or operations are requested with a specific CodeSystem, ValueSet, or ConceptMap url and version specified, the JPA Server will act on the resource(s) specified by or linked to the version. If the same request is submitted with no version specified, the JPA Server will instead act on the current (i.e. most recently updated) version of the resource identified by the URL.\n+\n+Delta Add and Remove modes in the [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command will only be applied to the most recently updated version.\n+\n+# Terminology Schemas\n+\n+This page provides the schema of tables that are used to complement the CodeSystem, ValueSet and ConceptMap resources and which map the relationships between these resources and various properties that are used or referenced by terminology operations.", "originalCommit": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgxMDU4OQ==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499810589", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The TRM_CODESYSTEM_VER table represents a single CodeSystem resource with a specific URL and version. It is used to map terminology concepts, represented by various TRM_CONCEPT_* tables to a single CodeSystem resource.\n          \n          \n            \n            The TRM_CODESYSTEM_VER table represents a single CodeSystem resource with a specific URL and version. It is used to map terminology concepts represented by various TRM_CONCEPT_* tables to a single CodeSystem resource.", "author": "dmuylwyk", "createdAt": "2020-10-05T19:05:36Z", "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/docs/server_jpa/terminology.md", "diffHunk": "@@ -0,0 +1,286 @@\n+# Terminology\n+\n+HAPI FHIR JPA Server includes an `IValidationSupport` class, `JpaPersistedResourceValidationSupport`, which can be used to validate terminology using CodeSystem, ValueSet and ConceptMap resources provided by the JPA Server. Terminology can be loaded into the JPA Server using standard FHIR REST APIs (PUT and POST) as well as using the hapi-fhir-cli [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command.\n+\n+# Versioning of Terminology\n+\n+CodeSystem resources can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly ValueSet and ConceptMap resources that are defined with a versioned CodeSystem can also be versioned.\n+\n+Versions of a given CodeSystem, ValueSet or ConceptMap are differentiated from each other by the CodeSystem.version, ValueSet.version and ConceptMap.version properties respectively. Each version of a given CodeSystem, ValueSet and ConceptMap resource will have a separate resource entity.\n+\n+When queries or operations are requested with a specific CodeSystem, ValueSet, or ConceptMap url and version specified, the JPA Server will act on the resource(s) specified by or linked to the version. If the same request is submitted with no version specified, the JPA Server will instead act on the current (i.e. most recently updated) version of the resource identified by the URL.\n+\n+Delta Add and Remove modes in the [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command will only be applied to the most recently updated version.\n+\n+# Terminology Schemas\n+\n+This page provides the schema of tables that are used to complement the CodeSystem, ValueSet and ConceptMap resources and which map the relationships between these resources and various properties that are used or referenced by terminology operations.\n+\n+## CodeSystem Tables\n+\n+<img src=\"/hapi-fhir/docs/images/termcodesystem_schema.svg\" alt=\"Resources\" style=\"width: 100%; max-width: 600px;\"/>\n+\n+The TRM_CODESYSTEM_VER table represents a single CodeSystem resource with a specific URL and version. It is used to map terminology concepts, represented by various TRM_CONCEPT_* tables to a single CodeSystem resource.", "originalCommit": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgxMTYwMQ==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499811601", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The following list are the main key columns in the TRM_CODESYSTEM_VER table that are used to join to the TRM_CODESYSTEM table and TRM_CONCEPT_* tables.\n          \n          \n            \n            The following are the main key columns in the TRM_CODESYSTEM_VER table that are used to join to the TRM_CODESYSTEM table and TRM_CONCEPT_* tables.\n          \n      \n    \n    \n  \n\nIt's a table, not a list. : )", "author": "dmuylwyk", "createdAt": "2020-10-05T19:07:25Z", "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/docs/server_jpa/terminology.md", "diffHunk": "@@ -0,0 +1,286 @@\n+# Terminology\n+\n+HAPI FHIR JPA Server includes an `IValidationSupport` class, `JpaPersistedResourceValidationSupport`, which can be used to validate terminology using CodeSystem, ValueSet and ConceptMap resources provided by the JPA Server. Terminology can be loaded into the JPA Server using standard FHIR REST APIs (PUT and POST) as well as using the hapi-fhir-cli [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command.\n+\n+# Versioning of Terminology\n+\n+CodeSystem resources can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly ValueSet and ConceptMap resources that are defined with a versioned CodeSystem can also be versioned.\n+\n+Versions of a given CodeSystem, ValueSet or ConceptMap are differentiated from each other by the CodeSystem.version, ValueSet.version and ConceptMap.version properties respectively. Each version of a given CodeSystem, ValueSet and ConceptMap resource will have a separate resource entity.\n+\n+When queries or operations are requested with a specific CodeSystem, ValueSet, or ConceptMap url and version specified, the JPA Server will act on the resource(s) specified by or linked to the version. If the same request is submitted with no version specified, the JPA Server will instead act on the current (i.e. most recently updated) version of the resource identified by the URL.\n+\n+Delta Add and Remove modes in the [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command will only be applied to the most recently updated version.\n+\n+# Terminology Schemas\n+\n+This page provides the schema of tables that are used to complement the CodeSystem, ValueSet and ConceptMap resources and which map the relationships between these resources and various properties that are used or referenced by terminology operations.\n+\n+## CodeSystem Tables\n+\n+<img src=\"/hapi-fhir/docs/images/termcodesystem_schema.svg\" alt=\"Resources\" style=\"width: 100%; max-width: 600px;\"/>\n+\n+The TRM_CODESYSTEM_VER table represents a single CodeSystem resource with a specific URL and version. It is used to map terminology concepts, represented by various TRM_CONCEPT_* tables to a single CodeSystem resource.\n+\n+The TRM_CODESYSTEM table represents the canonical representation of a CodeSystem resource with a specific URL and maps to a single TRM_CODESYSTEM_VER row which is treated as the current version of the CodeSystem (i.e. the resource referenced if no version is specified). For example, two CodeSystem resources `CodeSystem/loinc-2.67` and `CodeSystem/loinc-2.68` might have the same CodeSystem.url, e.g. `http://loinc.org` but different CodeSystem.version values. In this case each will each have exactly one row in the TRM_CODESYSTEM_VER table, but there will be only one row in the TRM_CODESYSTEM table which will link only to the more recently updated TRM_CODESYSTEM_VER resource.\n+\n+### Columns\n+\n+The following list are the main key columns in the TRM_CODESYSTEM_VER table that are used to join to the TRM_CODESYSTEM table and TRM_CONCEPT_* tables.", "originalCommit": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgxMTcxMA==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499811710", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The following list are the main key columns in the TRM_CODESYSTEM table.\n          \n          \n            \n            The following are the main key columns in the TRM_CODESYSTEM table.", "author": "dmuylwyk", "createdAt": "2020-10-05T19:07:36Z", "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/docs/server_jpa/terminology.md", "diffHunk": "@@ -0,0 +1,286 @@\n+# Terminology\n+\n+HAPI FHIR JPA Server includes an `IValidationSupport` class, `JpaPersistedResourceValidationSupport`, which can be used to validate terminology using CodeSystem, ValueSet and ConceptMap resources provided by the JPA Server. Terminology can be loaded into the JPA Server using standard FHIR REST APIs (PUT and POST) as well as using the hapi-fhir-cli [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command.\n+\n+# Versioning of Terminology\n+\n+CodeSystem resources can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly ValueSet and ConceptMap resources that are defined with a versioned CodeSystem can also be versioned.\n+\n+Versions of a given CodeSystem, ValueSet or ConceptMap are differentiated from each other by the CodeSystem.version, ValueSet.version and ConceptMap.version properties respectively. Each version of a given CodeSystem, ValueSet and ConceptMap resource will have a separate resource entity.\n+\n+When queries or operations are requested with a specific CodeSystem, ValueSet, or ConceptMap url and version specified, the JPA Server will act on the resource(s) specified by or linked to the version. If the same request is submitted with no version specified, the JPA Server will instead act on the current (i.e. most recently updated) version of the resource identified by the URL.\n+\n+Delta Add and Remove modes in the [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command will only be applied to the most recently updated version.\n+\n+# Terminology Schemas\n+\n+This page provides the schema of tables that are used to complement the CodeSystem, ValueSet and ConceptMap resources and which map the relationships between these resources and various properties that are used or referenced by terminology operations.\n+\n+## CodeSystem Tables\n+\n+<img src=\"/hapi-fhir/docs/images/termcodesystem_schema.svg\" alt=\"Resources\" style=\"width: 100%; max-width: 600px;\"/>\n+\n+The TRM_CODESYSTEM_VER table represents a single CodeSystem resource with a specific URL and version. It is used to map terminology concepts, represented by various TRM_CONCEPT_* tables to a single CodeSystem resource.\n+\n+The TRM_CODESYSTEM table represents the canonical representation of a CodeSystem resource with a specific URL and maps to a single TRM_CODESYSTEM_VER row which is treated as the current version of the CodeSystem (i.e. the resource referenced if no version is specified). For example, two CodeSystem resources `CodeSystem/loinc-2.67` and `CodeSystem/loinc-2.68` might have the same CodeSystem.url, e.g. `http://loinc.org` but different CodeSystem.version values. In this case each will each have exactly one row in the TRM_CODESYSTEM_VER table, but there will be only one row in the TRM_CODESYSTEM table which will link only to the more recently updated TRM_CODESYSTEM_VER resource.\n+\n+### Columns\n+\n+The following list are the main key columns in the TRM_CODESYSTEM_VER table that are used to join to the TRM_CODESYSTEM table and TRM_CONCEPT_* tables.\n+\n+<table class=\"table table-striped table-condensed\">\n+    <thead>\n+        <tr>\n+            <th>Name</th>\n+            <th>Relationships</th>\n+            <th>Datatype</th>\n+            <th>Nullable</th>\n+            <th>Description</th>\n+        </tr>\n+    </thead>\n+    <tbody>\n+        <tr>\n+            <td>PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td></td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM_VER row.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>RES_ID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td></td>\n+            <td>\n+                Persistent ID of the CodeSystem resource in the HFJ_RESOURCE table.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CODESYSTEM_PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM row for the canonical representation of this CodeSystem resource.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CS_VERSION_ID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                CodeSystem.version of the CodeSystem resource.\n+            </td>\n+        </tr>\n+    </tbody>\n+</table>\n+\n+The TRM_CODESYSTEM_VER table will have exactly one row for each unique combination of CODESYSTEM_PID and CS_VERSION_ID.\n+\n+The following list are the main key columns in the TRM_CODESYSTEM table.", "originalCommit": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgxMjA4Mw==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499812083", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The following list are the main key columns in the TRM_VALUESET table that are used to join to the TRM_VALUESET_CONCEPT and TRM_VALUESET_C_DESIGNATION tables.\n          \n          \n            \n            The following are the main key columns in the TRM_VALUESET table that are used to join to the TRM_VALUESET_CONCEPT and TRM_VALUESET_C_DESIGNATION tables.", "author": "dmuylwyk", "createdAt": "2020-10-05T19:08:21Z", "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/docs/server_jpa/terminology.md", "diffHunk": "@@ -0,0 +1,286 @@\n+# Terminology\n+\n+HAPI FHIR JPA Server includes an `IValidationSupport` class, `JpaPersistedResourceValidationSupport`, which can be used to validate terminology using CodeSystem, ValueSet and ConceptMap resources provided by the JPA Server. Terminology can be loaded into the JPA Server using standard FHIR REST APIs (PUT and POST) as well as using the hapi-fhir-cli [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command.\n+\n+# Versioning of Terminology\n+\n+CodeSystem resources can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly ValueSet and ConceptMap resources that are defined with a versioned CodeSystem can also be versioned.\n+\n+Versions of a given CodeSystem, ValueSet or ConceptMap are differentiated from each other by the CodeSystem.version, ValueSet.version and ConceptMap.version properties respectively. Each version of a given CodeSystem, ValueSet and ConceptMap resource will have a separate resource entity.\n+\n+When queries or operations are requested with a specific CodeSystem, ValueSet, or ConceptMap url and version specified, the JPA Server will act on the resource(s) specified by or linked to the version. If the same request is submitted with no version specified, the JPA Server will instead act on the current (i.e. most recently updated) version of the resource identified by the URL.\n+\n+Delta Add and Remove modes in the [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command will only be applied to the most recently updated version.\n+\n+# Terminology Schemas\n+\n+This page provides the schema of tables that are used to complement the CodeSystem, ValueSet and ConceptMap resources and which map the relationships between these resources and various properties that are used or referenced by terminology operations.\n+\n+## CodeSystem Tables\n+\n+<img src=\"/hapi-fhir/docs/images/termcodesystem_schema.svg\" alt=\"Resources\" style=\"width: 100%; max-width: 600px;\"/>\n+\n+The TRM_CODESYSTEM_VER table represents a single CodeSystem resource with a specific URL and version. It is used to map terminology concepts, represented by various TRM_CONCEPT_* tables to a single CodeSystem resource.\n+\n+The TRM_CODESYSTEM table represents the canonical representation of a CodeSystem resource with a specific URL and maps to a single TRM_CODESYSTEM_VER row which is treated as the current version of the CodeSystem (i.e. the resource referenced if no version is specified). For example, two CodeSystem resources `CodeSystem/loinc-2.67` and `CodeSystem/loinc-2.68` might have the same CodeSystem.url, e.g. `http://loinc.org` but different CodeSystem.version values. In this case each will each have exactly one row in the TRM_CODESYSTEM_VER table, but there will be only one row in the TRM_CODESYSTEM table which will link only to the more recently updated TRM_CODESYSTEM_VER resource.\n+\n+### Columns\n+\n+The following list are the main key columns in the TRM_CODESYSTEM_VER table that are used to join to the TRM_CODESYSTEM table and TRM_CONCEPT_* tables.\n+\n+<table class=\"table table-striped table-condensed\">\n+    <thead>\n+        <tr>\n+            <th>Name</th>\n+            <th>Relationships</th>\n+            <th>Datatype</th>\n+            <th>Nullable</th>\n+            <th>Description</th>\n+        </tr>\n+    </thead>\n+    <tbody>\n+        <tr>\n+            <td>PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td></td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM_VER row.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>RES_ID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td></td>\n+            <td>\n+                Persistent ID of the CodeSystem resource in the HFJ_RESOURCE table.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CODESYSTEM_PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM row for the canonical representation of this CodeSystem resource.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CS_VERSION_ID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                CodeSystem.version of the CodeSystem resource.\n+            </td>\n+        </tr>\n+    </tbody>\n+</table>\n+\n+The TRM_CODESYSTEM_VER table will have exactly one row for each unique combination of CODESYSTEM_PID and CS_VERSION_ID.\n+\n+The following list are the main key columns in the TRM_CODESYSTEM table.\n+\n+<table class=\"table table-striped table-condensed\">\n+    <thead>\n+        <tr>\n+            <th>Name</th>\n+            <th>Relationships</th>\n+            <th>Datatype</th>\n+            <th>Nullable</th>\n+            <th>Description</th>\n+        </tr>\n+    </thead>\n+    <tbody>\n+        <tr>\n+            <td>PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td></td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM row.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CODE_SYSTEM_URI</td>\n+            <td></td>\n+            <td>String</td>\n+            <td></td>\n+            <td>\n+                URL of the CodeSystem resource.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CURRENT_VERSION_PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM_VER row for the most recently updated version of the CodeSystem resource for this URL.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CS_NAME</td>\n+            <td></td>\n+            <td>String</td>\n+            <td>Nullable</td>\n+            <td>\n+                CodeSystem.name value for this CodeSystem resource.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>RES_ID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                Persistent ID of the most recently updated version of the CodeSystem resource for this URL in the HFJ_RESOURCE table.\n+            </td>\n+        </tr>\n+    </tbody>\n+</table>\n+\n+The TRM_CODESYSTEM table will have exactly one row for each unique CODE_SYSTEM_URI value.\n+\n+## ValueSet Tables\n+\n+<img src=\"/hapi-fhir/docs/images/termvalueset_schema.svg\" alt=\"Resources\" style=\"width: 100%; max-width: 600px;\"/>\n+\n+The TRM_VALUESET table represents a single ValueSet resource with a specific URL and version. It can be used to map terminology concepts represented by the TRM_VALUESET_CONCEPT and TRM_VALUESET_C_DESIGNATION tables to a single ValueSet resource.\n+\n+### Columns\n+\n+The following list are the main key columns in the TRM_VALUESET table that are used to join to the TRM_VALUESET_CONCEPT and TRM_VALUESET_C_DESIGNATION tables.", "originalCommit": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTgxMjQwMA==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2116#discussion_r499812400", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The following list are the main key columns in the TRM_CONCEPTMAP table that are used to join to the TRM_CONCEPTMAP_* tables.\n          \n          \n            \n            The following are the main key columns in the TRM_CONCEPTMAP table that are used to join to the TRM_CONCEPTMAP_* tables.", "author": "dmuylwyk", "createdAt": "2020-10-05T19:08:56Z", "path": "hapi-fhir-docs/src/main/resources/ca/uhn/hapi/fhir/docs/server_jpa/terminology.md", "diffHunk": "@@ -0,0 +1,286 @@\n+# Terminology\n+\n+HAPI FHIR JPA Server includes an `IValidationSupport` class, `JpaPersistedResourceValidationSupport`, which can be used to validate terminology using CodeSystem, ValueSet and ConceptMap resources provided by the JPA Server. Terminology can be loaded into the JPA Server using standard FHIR REST APIs (PUT and POST) as well as using the hapi-fhir-cli [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command.\n+\n+# Versioning of Terminology\n+\n+CodeSystem resources can be versioned as described in the FHIR specification [here](http://hl7.org/fhir/codesystem.html#versioning). Similarly ValueSet and ConceptMap resources that are defined with a versioned CodeSystem can also be versioned.\n+\n+Versions of a given CodeSystem, ValueSet or ConceptMap are differentiated from each other by the CodeSystem.version, ValueSet.version and ConceptMap.version properties respectively. Each version of a given CodeSystem, ValueSet and ConceptMap resource will have a separate resource entity.\n+\n+When queries or operations are requested with a specific CodeSystem, ValueSet, or ConceptMap url and version specified, the JPA Server will act on the resource(s) specified by or linked to the version. If the same request is submitted with no version specified, the JPA Server will instead act on the current (i.e. most recently updated) version of the resource identified by the URL.\n+\n+Delta Add and Remove modes in the [upload-terminology](/hapi-fhir/docs/tools/hapi_fhir_cli.html#upload-terminology) command will only be applied to the most recently updated version.\n+\n+# Terminology Schemas\n+\n+This page provides the schema of tables that are used to complement the CodeSystem, ValueSet and ConceptMap resources and which map the relationships between these resources and various properties that are used or referenced by terminology operations.\n+\n+## CodeSystem Tables\n+\n+<img src=\"/hapi-fhir/docs/images/termcodesystem_schema.svg\" alt=\"Resources\" style=\"width: 100%; max-width: 600px;\"/>\n+\n+The TRM_CODESYSTEM_VER table represents a single CodeSystem resource with a specific URL and version. It is used to map terminology concepts, represented by various TRM_CONCEPT_* tables to a single CodeSystem resource.\n+\n+The TRM_CODESYSTEM table represents the canonical representation of a CodeSystem resource with a specific URL and maps to a single TRM_CODESYSTEM_VER row which is treated as the current version of the CodeSystem (i.e. the resource referenced if no version is specified). For example, two CodeSystem resources `CodeSystem/loinc-2.67` and `CodeSystem/loinc-2.68` might have the same CodeSystem.url, e.g. `http://loinc.org` but different CodeSystem.version values. In this case each will each have exactly one row in the TRM_CODESYSTEM_VER table, but there will be only one row in the TRM_CODESYSTEM table which will link only to the more recently updated TRM_CODESYSTEM_VER resource.\n+\n+### Columns\n+\n+The following list are the main key columns in the TRM_CODESYSTEM_VER table that are used to join to the TRM_CODESYSTEM table and TRM_CONCEPT_* tables.\n+\n+<table class=\"table table-striped table-condensed\">\n+    <thead>\n+        <tr>\n+            <th>Name</th>\n+            <th>Relationships</th>\n+            <th>Datatype</th>\n+            <th>Nullable</th>\n+            <th>Description</th>\n+        </tr>\n+    </thead>\n+    <tbody>\n+        <tr>\n+            <td>PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td></td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM_VER row.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>RES_ID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td></td>\n+            <td>\n+                Persistent ID of the CodeSystem resource in the HFJ_RESOURCE table.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CODESYSTEM_PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM row for the canonical representation of this CodeSystem resource.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CS_VERSION_ID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                CodeSystem.version of the CodeSystem resource.\n+            </td>\n+        </tr>\n+    </tbody>\n+</table>\n+\n+The TRM_CODESYSTEM_VER table will have exactly one row for each unique combination of CODESYSTEM_PID and CS_VERSION_ID.\n+\n+The following list are the main key columns in the TRM_CODESYSTEM table.\n+\n+<table class=\"table table-striped table-condensed\">\n+    <thead>\n+        <tr>\n+            <th>Name</th>\n+            <th>Relationships</th>\n+            <th>Datatype</th>\n+            <th>Nullable</th>\n+            <th>Description</th>\n+        </tr>\n+    </thead>\n+    <tbody>\n+        <tr>\n+            <td>PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td></td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM row.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CODE_SYSTEM_URI</td>\n+            <td></td>\n+            <td>String</td>\n+            <td></td>\n+            <td>\n+                URL of the CodeSystem resource.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CURRENT_VERSION_PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                Persistent ID of the TRM_CODESYSTEM_VER row for the most recently updated version of the CodeSystem resource for this URL.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>CS_NAME</td>\n+            <td></td>\n+            <td>String</td>\n+            <td>Nullable</td>\n+            <td>\n+                CodeSystem.name value for this CodeSystem resource.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>RES_ID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                Persistent ID of the most recently updated version of the CodeSystem resource for this URL in the HFJ_RESOURCE table.\n+            </td>\n+        </tr>\n+    </tbody>\n+</table>\n+\n+The TRM_CODESYSTEM table will have exactly one row for each unique CODE_SYSTEM_URI value.\n+\n+## ValueSet Tables\n+\n+<img src=\"/hapi-fhir/docs/images/termvalueset_schema.svg\" alt=\"Resources\" style=\"width: 100%; max-width: 600px;\"/>\n+\n+The TRM_VALUESET table represents a single ValueSet resource with a specific URL and version. It can be used to map terminology concepts represented by the TRM_VALUESET_CONCEPT and TRM_VALUESET_C_DESIGNATION tables to a single ValueSet resource.\n+\n+### Columns\n+\n+The following list are the main key columns in the TRM_VALUESET table that are used to join to the TRM_VALUESET_CONCEPT and TRM_VALUESET_C_DESIGNATION tables.\n+\n+<table class=\"table table-striped table-condensed\">\n+    <thead>\n+        <tr>\n+            <th>Name</th>\n+            <th>Relationships</th>\n+            <th>Datatype</th>\n+            <th>Nullable</th>\n+            <th>Description</th>\n+        </tr>\n+    </thead>\n+    <tbody>\n+        <tr>\n+            <td>PID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td></td>\n+            <td>\n+                Persistent ID of the TRM_VALUESET row.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>RES_ID</td>\n+            <td></td>\n+            <td>Long</td>\n+            <td>Nullable</td>\n+            <td>\n+                Persistent ID of the ValueSet resource in the HFJ_RESOURCE table.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>URL</td>\n+            <td></td>\n+            <td>String</td>\n+            <td></td>\n+            <td>\n+                Canonical URL for the ValueSet resource.\n+            </td>\n+        </tr>\n+        <tr>\n+            <td>VER</td>\n+            <td></td>\n+            <td>String</td>\n+            <td>Nullable</td>\n+            <td>\n+                ValueSet.version for this ValueSet resource.\n+            </td>\n+        </tr>\n+    </tbody>\n+</table>\n+\n+The TRM_VALUESET table will have exactly one row for each unique combination of URL and VER.\n+\n+## ConceptMap Tables\n+\n+<img src=\"/hapi-fhir/docs/images/termconceptmap_schema.svg\" alt=\"Resources\" style=\"width: 100%; max-width: 600px;\"/>\n+\n+The TRM_CONCEPTMAP table represents a single ConceptMap resource with a specific URL and version. It can be used to map terminology concepts to one another in groups.\n+\n+### Columns\n+\n+The following list are the main key columns in the TRM_CONCEPTMAP table that are used to join to the TRM_CONCEPTMAP_* tables.", "originalCommit": "30e50ba90c612bc7d17cfe7e29f39a12acb838a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5ec1284b8a8fde20d189fbdf1901996b23f43ad4", "url": "https://github.com/hapifhir/hapi-fhir/commit/5ec1284b8a8fde20d189fbdf1901996b23f43ad4", "message": "Apply suggestions from code review\r\n\r\nEdits per code review.\n\nCo-authored-by: Diederik Muylwyk <diederik.muylwyk@gmail.com>", "committedDate": "2020-10-05T19:14:39Z", "type": "commit"}]}