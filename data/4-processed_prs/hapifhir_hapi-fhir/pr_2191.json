{"pr_number": 2191, "pr_title": "Resource change listener", "pr_createdAt": "2020-11-22T23:17:39Z", "pr_url": "https://github.com/hapifhir/hapi-fhir/pull/2191", "timeline": [{"oid": "aa2a850ab479337a94cc2732ded92f703703b830", "url": "https://github.com/hapifhir/hapi-fhir/commit/aa2a850ab479337a94cc2732ded92f703703b830", "message": "fixmes and javadoc", "committedDate": "2020-11-16T00:03:34Z", "type": "commit"}, {"oid": "475cf83231a51b1debfe1bf8359503adc68bfe4b", "url": "https://github.com/hapifhir/hapi-fhir/commit/475cf83231a51b1debfe1bf8359503adc68bfe4b", "message": "fix test", "committedDate": "2020-11-16T00:32:00Z", "type": "commit"}, {"oid": "bb263c2c2ec41a7c3a565ac3b2fac615d11fd20d", "url": "https://github.com/hapifhir/hapi-fhir/commit/bb263c2c2ec41a7c3a565ac3b2fac615d11fd20d", "message": "fixme", "committedDate": "2020-11-16T00:33:03Z", "type": "commit"}, {"oid": "0afc7ea1a12d74e8ff0748c2d1915576daa64f09", "url": "https://github.com/hapifhir/hapi-fhir/commit/0afc7ea1a12d74e8ff0748c2d1915576daa64f09", "message": "fix test", "committedDate": "2020-11-16T04:56:35Z", "type": "commit"}, {"oid": "fbd45616868c45fb29c091090803dc3305019861", "url": "https://github.com/hapifhir/hapi-fhir/commit/fbd45616868c45fb29c091090803dc3305019861", "message": "whack-a-mole.  Either subs pass or cql passes.  Something's fishy with the FhirContext", "committedDate": "2020-11-16T14:51:45Z", "type": "commit"}, {"oid": "88d48ca1018cc207c80fdb64fc7bc1f72cb1eca6", "url": "https://github.com/hapifhir/hapi-fhir/commit/88d48ca1018cc207c80fdb64fc7bc1f72cb1eca6", "message": "fix subscription test initialization", "committedDate": "2020-11-16T16:58:33Z", "type": "commit"}, {"oid": "9b5e789fcdbcd35846a647b12060b6ebe51f0578", "url": "https://github.com/hapifhir/hapi-fhir/commit/9b5e789fcdbcd35846a647b12060b6ebe51f0578", "message": "fix method name", "committedDate": "2020-11-16T17:01:21Z", "type": "commit"}, {"oid": "56145faac2d8c656015109506143dad89788d782", "url": "https://github.com/hapifhir/hapi-fhir/commit/56145faac2d8c656015109506143dad89788d782", "message": "Re-factored the CqlProvider Unit Tests.", "committedDate": "2020-11-16T18:27:08Z", "type": "commit"}, {"oid": "325969434487459e36f31fb8415c28f699550891", "url": "https://github.com/hapifhir/hapi-fhir/commit/325969434487459e36f31fb8415c28f699550891", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike", "committedDate": "2020-11-16T18:45:43Z", "type": "commit"}, {"oid": "5130e8de8cca17bad760a778b4c6d43f1fd01e78", "url": "https://github.com/hapifhir/hapi-fhir/commit/5130e8de8cca17bad760a778b4c6d43f1fd01e78", "message": "changed ResourceChange API", "committedDate": "2020-11-16T20:04:48Z", "type": "commit"}, {"oid": "7f27b8872a8ef53d1ddd2b64948d9aeeea382d27", "url": "https://github.com/hapifhir/hapi-fhir/commit/7f27b8872a8ef53d1ddd2b64948d9aeeea382d27", "message": "add interface", "committedDate": "2020-11-16T20:22:38Z", "type": "commit"}, {"oid": "e8b456279d43e88b9d29551120f9aed8be13d5f0", "url": "https://github.com/hapifhir/hapi-fhir/commit/e8b456279d43e88b9d29551120f9aed8be13d5f0", "message": "add interface", "committedDate": "2020-11-16T20:31:36Z", "type": "commit"}, {"oid": "b3a705debada72447206011a10a080c31bca5674", "url": "https://github.com/hapifhir/hapi-fhir/commit/b3a705debada72447206011a10a080c31bca5674", "message": "fix test", "committedDate": "2020-11-16T21:51:22Z", "type": "commit"}, {"oid": "51f593ec2bc6f58b5e7ff16d621ac7d1f31ba3bd", "url": "https://github.com/hapifhir/hapi-fhir/commit/51f593ec2bc6f58b5e7ff16d621ac7d1f31ba3bd", "message": "add schedule test", "committedDate": "2020-11-17T02:59:34Z", "type": "commit"}, {"oid": "8c8df38a66f7432cfcbb58549f4288fcc56d1b32", "url": "https://github.com/hapifhir/hapi-fhir/commit/8c8df38a66f7432cfcbb58549f4288fcc56d1b32", "message": "add doc", "committedDate": "2020-11-17T16:58:07Z", "type": "commit"}, {"oid": "dd03a38dbec913a9c8682b7ddb8023b29dee3508", "url": "https://github.com/hapifhir/hapi-fhir/commit/dd03a38dbec913a9c8682b7ddb8023b29dee3508", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike", "committedDate": "2020-11-17T16:58:24Z", "type": "commit"}, {"oid": "6644d6c37359d7766ad109bf5c79e756263e524a", "url": "https://github.com/hapifhir/hapi-fhir/commit/6644d6c37359d7766ad109bf5c79e756263e524a", "message": "init rev", "committedDate": "2020-11-17T17:06:28Z", "type": "commit"}, {"oid": "2a48785f65a681214c8da710c15ae1f0e41b8da8", "url": "https://github.com/hapifhir/hapi-fhir/commit/2a48785f65a681214c8da710c15ae1f0e41b8da8", "message": "FIXME", "committedDate": "2020-11-17T17:39:30Z", "type": "commit"}, {"oid": "e8939abf5a821c04b2018be2850a60f4af71d58d", "url": "https://github.com/hapifhir/hapi-fhir/commit/e8939abf5a821c04b2018be2850a60f4af71d58d", "message": "modify FhirContext change", "committedDate": "2020-11-17T18:22:22Z", "type": "commit"}, {"oid": "fb1b1e8d81f70ca18f67652220f0f6e2de846834", "url": "https://github.com/hapifhir/hapi-fhir/commit/fb1b1e8d81f70ca18f67652220f0f6e2de846834", "message": "change fhirContext.getResourceTypes to lazy load", "committedDate": "2020-11-17T18:24:24Z", "type": "commit"}, {"oid": "453db89d8c574a2b27c683b28fff713cd339dade", "url": "https://github.com/hapifhir/hapi-fhir/commit/453db89d8c574a2b27c683b28fff713cd339dade", "message": "Merge remote-tracking branch 'origin/master' into ks-20201117-resource-change-listener", "committedDate": "2020-11-19T17:37:09Z", "type": "commit"}, {"oid": "251481e78b02fd95749b379fa07b01f69919d298", "url": "https://github.com/hapifhir/hapi-fhir/commit/251481e78b02fd95749b379fa07b01f69919d298", "message": "converted subscriptions", "committedDate": "2020-11-19T21:21:35Z", "type": "commit"}, {"oid": "80ba1b42eb1f0bc57bd6da25b8b0527d118a06f2", "url": "https://github.com/hapifhir/hapi-fhir/commit/80ba1b42eb1f0bc57bd6da25b8b0527d118a06f2", "message": "converted subscriptions", "committedDate": "2020-11-19T21:21:47Z", "type": "commit"}, {"oid": "6f563454eba40e154917362b1cb3f42bb2c6b940", "url": "https://github.com/hapifhir/hapi-fhir/commit/6f563454eba40e154917362b1cb3f42bb2c6b940", "message": "begin with failing test", "committedDate": "2020-11-19T22:43:24Z", "type": "commit"}, {"oid": "82caed0dab67993044b584aa552f2b68d8dcfa88", "url": "https://github.com/hapifhir/hapi-fhir/commit/82caed0dab67993044b584aa552f2b68d8dcfa88", "message": "test passes", "committedDate": "2020-11-19T23:12:06Z", "type": "commit"}, {"oid": "2138dc9c85d27743dca71251f2090ba3f4c38ccd", "url": "https://github.com/hapifhir/hapi-fhir/commit/2138dc9c85d27743dca71251f2090ba3f4c38ccd", "message": "fix test", "committedDate": "2020-11-19T23:26:00Z", "type": "commit"}, {"oid": "dbe96e34ff7113c037f7f7d44c43f9ae5473b19f", "url": "https://github.com/hapifhir/hapi-fhir/commit/dbe96e34ff7113c037f7f7d44c43f9ae5473b19f", "message": "test coverage", "committedDate": "2020-11-19T23:57:26Z", "type": "commit"}, {"oid": "0eda4ffd5c1633a1b13b42f8a06baa0ee1e2ed20", "url": "https://github.com/hapifhir/hapi-fhir/commit/0eda4ffd5c1633a1b13b42f8a06baa0ee1e2ed20", "message": "test coverage", "committedDate": "2020-11-19T23:59:12Z", "type": "commit"}, {"oid": "3a0660e8c7e2a201d8ddd25a91228f29b195694a", "url": "https://github.com/hapifhir/hapi-fhir/commit/3a0660e8c7e2a201d8ddd25a91228f29b195694a", "message": "test coverage", "committedDate": "2020-11-20T14:31:22Z", "type": "commit"}, {"oid": "8fc88561f584bca8feb5c1e59a5b4613f10a7c25", "url": "https://github.com/hapifhir/hapi-fhir/commit/8fc88561f584bca8feb5c1e59a5b4613f10a7c25", "message": "Merge remote-tracking branch 'origin/master' into ks-20201117-resource-change-listener", "committedDate": "2020-11-20T16:41:22Z", "type": "commit"}, {"oid": "276b12c498900f938ca93596cca39814cf36c47a", "url": "https://github.com/hapifhir/hapi-fhir/commit/276b12c498900f938ca93596cca39814cf36c47a", "message": "test coverage", "committedDate": "2020-11-20T17:02:40Z", "type": "commit"}, {"oid": "1661ceefde3cfef30fef247785403f466b57bccb", "url": "https://github.com/hapifhir/hapi-fhir/commit/1661ceefde3cfef30fef247785403f466b57bccb", "message": "good coverage now", "committedDate": "2020-11-20T22:00:43Z", "type": "commit"}, {"oid": "197e3fd7df1fee3990d082e4176615f923253dc7", "url": "https://github.com/hapifhir/hapi-fhir/commit/197e3fd7df1fee3990d082e4176615f923253dc7", "message": "pre-review cleanup.  I think I found a bug.", "committedDate": "2020-11-20T23:09:21Z", "type": "commit"}, {"oid": "b763de8b0a4ecfa1739a16dbf3ace8e4fc3b07f4", "url": "https://github.com/hapifhir/hapi-fhir/commit/b763de8b0a4ecfa1739a16dbf3ace8e4fc3b07f4", "message": "moved cache into listener entry\ntests pass with fixmes", "committedDate": "2020-11-22T15:44:41Z", "type": "commit"}, {"oid": "391ce343c242d1a1d8da6025c4b5f3f74553fae9", "url": "https://github.com/hapifhir/hapi-fhir/commit/391ce343c242d1a1d8da6025c4b5f3f74553fae9", "message": "fix test", "committedDate": "2020-11-22T16:49:35Z", "type": "commit"}, {"oid": "eea7e33349ddee9283e4c516aee32e93d3e2dbf1", "url": "https://github.com/hapifhir/hapi-fhir/commit/eea7e33349ddee9283e4c516aee32e93d3e2dbf1", "message": "fix test", "committedDate": "2020-11-22T17:09:03Z", "type": "commit"}, {"oid": "30cc8b562bd546142a846c46e2609d7ed3051c32", "url": "https://github.com/hapifhir/hapi-fhir/commit/30cc8b562bd546142a846c46e2609d7ed3051c32", "message": "fix test", "committedDate": "2020-11-22T17:26:05Z", "type": "commit"}, {"oid": "888ca8cd43753dc76f7c83e0f9b089a68793e689", "url": "https://github.com/hapifhir/hapi-fhir/commit/888ca8cd43753dc76f7c83e0f9b089a68793e689", "message": "fixme", "committedDate": "2020-11-22T17:37:47Z", "type": "commit"}, {"oid": "1a8f33557c3b0e3b77e5bcceee4c60b70df738b5", "url": "https://github.com/hapifhir/hapi-fhir/commit/1a8f33557c3b0e3b77e5bcceee4c60b70df738b5", "message": "FIXMEs", "committedDate": "2020-11-22T17:49:47Z", "type": "commit"}, {"oid": "b6fe3479ea42fbb669c4d3fceb0f5ab5fb18e56b", "url": "https://github.com/hapifhir/hapi-fhir/commit/b6fe3479ea42fbb669c4d3fceb0f5ab5fb18e56b", "message": "merge cache and registry", "committedDate": "2020-11-22T19:07:51Z", "type": "commit"}, {"oid": "9856379fa50100a18b8547b17c972dde418968f0", "url": "https://github.com/hapifhir/hapi-fhir/commit/9856379fa50100a18b8547b17c972dde418968f0", "message": "method reorg", "committedDate": "2020-11-22T19:40:15Z", "type": "commit"}, {"oid": "b15570082641465c0fdc21f2f8b59e68916b9058", "url": "https://github.com/hapifhir/hapi-fhir/commit/b15570082641465c0fdc21f2f8b59e68916b9058", "message": "javadoc", "committedDate": "2020-11-22T23:14:08Z", "type": "commit"}, {"oid": "67c5d7c0c123f8384edc5ed04dcbc66eb5945abb", "url": "https://github.com/hapifhir/hapi-fhir/commit/67c5d7c0c123f8384edc5ed04dcbc66eb5945abb", "message": "javadoc done.  all FIXMEs resolved.", "committedDate": "2020-11-22T23:14:50Z", "type": "commit"}, {"oid": "e3b9aa2a16171b9967d6f561312765a0b8274954", "url": "https://github.com/hapifhir/hapi-fhir/commit/e3b9aa2a16171b9967d6f561312765a0b8274954", "message": "change log", "committedDate": "2020-11-22T23:18:53Z", "type": "commit"}, {"oid": "63cb02568a41e84ed9d3a6c346ea3bb65ef71a47", "url": "https://github.com/hapifhir/hapi-fhir/commit/63cb02568a41e84ed9d3a6c346ea3bb65ef71a47", "message": "changes needed by cdr", "committedDate": "2020-11-23T03:01:16Z", "type": "commit"}, {"oid": "7ce184815bc3ad7ffe9c1996d431fc3e8b4971f9", "url": "https://github.com/hapifhir/hapi-fhir/commit/7ce184815bc3ad7ffe9c1996d431fc3e8b4971f9", "message": "spring config cleanup", "committedDate": "2020-11-23T16:17:00Z", "type": "commit"}, {"oid": "895134fa7c0f092f1e7534bb5aa983fe354de112", "url": "https://github.com/hapifhir/hapi-fhir/commit/895134fa7c0f092f1e7534bb5aa983fe354de112", "message": "james feedback", "committedDate": "2020-11-23T18:19:33Z", "type": "commit"}, {"oid": "e13569b481ce4af5d6d10fa6bddb28413b2de457", "url": "https://github.com/hapifhir/hapi-fhir/commit/e13569b481ce4af5d6d10fa6bddb28413b2de457", "message": "james feedback", "committedDate": "2020-11-23T18:19:38Z", "type": "commit"}, {"oid": "1279b125330bd12ff63fdc8f5bf117c09335c9c5", "url": "https://github.com/hapifhir/hapi-fhir/commit/1279b125330bd12ff63fdc8f5bf117c09335c9c5", "message": "might not work. Try moving resourcechangeconfig into searchparam config", "committedDate": "2020-11-23T20:30:03Z", "type": "commit"}, {"oid": "b416870b06e79e54edcfea7d97430160539f4382", "url": "https://github.com/hapifhir/hapi-fhir/commit/b416870b06e79e54edcfea7d97430160539f4382", "message": "merge ResourceChangeListenerRegistryConfig.java into SearchParamConfig", "committedDate": "2020-11-23T21:01:22Z", "type": "commit"}, {"oid": "dcaa3b72889a412be99a55ba41bcac4a6d5bcc6c", "url": "https://github.com/hapifhir/hapi-fhir/commit/dcaa3b72889a412be99a55ba41bcac4a6d5bcc6c", "message": "fix test", "committedDate": "2020-11-23T21:52:19Z", "type": "commit"}, {"oid": "d270af668012ae34e45740e361c3f6315555f62d", "url": "https://github.com/hapifhir/hapi-fhir/commit/d270af668012ae34e45740e361c3f6315555f62d", "message": "fix SubscriptionLoader", "committedDate": "2020-11-24T14:14:58Z", "type": "commit"}, {"oid": "36fa1d93951c46f4d9c0ec5d3fbc9344b8b06e64", "url": "https://github.com/hapifhir/hapi-fhir/commit/36fa1d93951c46f4d9c0ec5d3fbc9344b8b06e64", "message": "fix SubscriptionLoader", "committedDate": "2020-11-24T15:09:33Z", "type": "commit"}, {"oid": "163f28c67cf38b1c23cc284aa6c6acb5ff9fb0cb", "url": "https://github.com/hapifhir/hapi-fhir/commit/163f28c67cf38b1c23cc284aa6c6acb5ff9fb0cb", "message": "create ResourceVersionMap from resources", "committedDate": "2020-11-24T17:18:31Z", "type": "commit"}, {"oid": "caa00bf9462c87d176974ecc5ad5e4954faafd19", "url": "https://github.com/hapifhir/hapi-fhir/commit/caa00bf9462c87d176974ecc5ad5e4954faafd19", "message": "added cache handle interface", "committedDate": "2020-11-25T02:01:35Z", "type": "commit"}, {"oid": "35cd2ea984d9cf1c65bfd3946b685c05c9c3f790", "url": "https://github.com/hapifhir/hapi-fhir/commit/35cd2ea984d9cf1c65bfd3946b685c05c9c3f790", "message": "fix test", "committedDate": "2020-11-25T14:45:21Z", "type": "commit"}, {"oid": "0754334d149dac16502a8c9a3d009cc2a2abe8b0", "url": "https://github.com/hapifhir/hapi-fhir/commit/0754334d149dac16502a8c9a3d009cc2a2abe8b0", "message": "javadoc", "committedDate": "2020-11-25T14:55:11Z", "type": "commit"}, {"oid": "6358702260011a714cad0d672a9544e13fda6ccd", "url": "https://github.com/hapifhir/hapi-fhir/commit/6358702260011a714cad0d672a9544e13fda6ccd", "message": "Merge remote-tracking branch 'origin/master' into ks-20201117-resource-change-listener", "committedDate": "2020-11-25T14:58:21Z", "type": "commit"}, {"oid": "11bb6d60c3fae565eee2d4878020e17b8cd47057", "url": "https://github.com/hapifhir/hapi-fhir/commit/11bb6d60c3fae565eee2d4878020e17b8cd47057", "message": "fix test", "committedDate": "2020-11-25T15:22:49Z", "type": "commit"}, {"oid": "df9179ea16b08162ceffe92b5447e118b885edab", "url": "https://github.com/hapifhir/hapi-fhir/commit/df9179ea16b08162ceffe92b5447e118b885edab", "message": "fix test", "committedDate": "2020-11-25T15:43:38Z", "type": "commit"}, {"oid": "032ef470f2ef72f700c9c80f315f0a863135fe35", "url": "https://github.com/hapifhir/hapi-fhir/commit/032ef470f2ef72f700c9c80f315f0a863135fe35", "message": "James feedback: clone searchparametermap", "committedDate": "2020-11-25T15:53:10Z", "type": "commit"}, {"oid": "6a28c39d3a4cb5a39f1e01b7514a3c50d8687031", "url": "https://github.com/hapifhir/hapi-fhir/commit/6a28c39d3a4cb5a39f1e01b7514a3c50d8687031", "message": "fix startup", "committedDate": "2020-11-25T21:08:50Z", "type": "commit"}, {"oid": "cc3282b9448c8b3f21018c7b9955582fbd3ccfb0", "url": "https://github.com/hapifhir/hapi-fhir/commit/cc3282b9448c8b3f21018c7b9955582fbd3ccfb0", "message": "fix test", "committedDate": "2020-11-25T22:19:40Z", "type": "commit"}, {"oid": "737d840c1124b105ff422a68f20a220576008294", "url": "https://github.com/hapifhir/hapi-fhir/commit/737d840c1124b105ff422a68f20a220576008294", "message": "Merge remote-tracking branch 'origin/master' into ks-20201117-resource-change-listener", "committedDate": "2020-11-26T16:43:07Z", "type": "commit"}, {"oid": "eccbbf5cfc82e33491a49dce507535170ca298ca", "url": "https://github.com/hapifhir/hapi-fhir/commit/eccbbf5cfc82e33491a49dce507535170ca298ca", "message": "fix test", "committedDate": "2020-11-26T19:47:46Z", "type": "commit"}, {"oid": "c8884450d16ef1b33b6fb219c5fe5b9994c2e85b", "url": "https://github.com/hapifhir/hapi-fhir/commit/c8884450d16ef1b33b6fb219c5fe5b9994c2e85b", "message": "fix intermittent", "committedDate": "2020-11-26T23:29:23Z", "type": "commit"}, {"oid": "383966f31a64b3ac6fbfaf8331a7fcdf067f13f4", "url": "https://github.com/hapifhir/hapi-fhir/commit/383966f31a64b3ac6fbfaf8331a7fcdf067f13f4", "message": "pre-review cleanup", "committedDate": "2020-11-27T13:58:11Z", "type": "commit"}, {"oid": "f1728e9c53268c215e29c8702565d879e0bc404b", "url": "https://github.com/hapifhir/hapi-fhir/commit/f1728e9c53268c215e29c8702565d879e0bc404b", "message": "FIXME", "committedDate": "2020-11-27T14:25:03Z", "type": "commit"}, {"oid": "34731120deb482ae0bb11ffa473a18c5ec8dd081", "url": "https://github.com/hapifhir/hapi-fhir/commit/34731120deb482ae0bb11ffa473a18c5ec8dd081", "message": "final FIXME yay!", "committedDate": "2020-11-27T14:30:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI5MjUyNA==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2191#discussion_r532292524", "bodyText": "getFhirVersionPropertiesFile returns an inputstream, so it should be closed. I'll commit a fix to do that.", "author": "jamesagnew", "createdAt": "2020-11-30T00:19:52Z", "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/context/FhirContext.java", "diffHunk": "@@ -553,29 +555,29 @@ public RuntimeResourceDefinition getResourceDefinitionById(final String theId) {\n \t * @since 5.1.0\n \t */\n \tpublic Set<String> getResourceTypes() {\n-\t\tSet<String> resourceNames = new HashSet<>();\n-\n-\t\tif (myNameToResourceDefinition.isEmpty()) {\n-\t\t\tProperties props = new Properties();\n-\t\t\ttry {\n-\t\t\t\tprops.load(myVersion.getFhirVersionPropertiesFile());\n-\t\t\t} catch (IOException theE) {\n-\t\t\t\tthrow new ConfigurationException(\"Failed to load version properties file\");\n-\t\t\t}\n-\t\t\tEnumeration<?> propNames = props.propertyNames();\n-\t\t\twhile (propNames.hasMoreElements()) {\n-\t\t\t\tString next = (String) propNames.nextElement();\n-\t\t\t\tif (next.startsWith(\"resource.\")) {\n-\t\t\t\t\tresourceNames.add(next.substring(\"resource.\".length()).trim());\n-\t\t\t\t}\n-\t\t\t}\n+\t\tif (myResourceNames == null) {\n+\t\t\tmyResourceNames = buildResourceNames();\n \t\t}\n+\t\treturn myResourceNames;\n+\t}\n \n-\t\tfor (RuntimeResourceDefinition next : myNameToResourceDefinition.values()) {\n-\t\t\tresourceNames.add(next.getName());\n+\t@Nonnull\n+\tprivate Set<String> buildResourceNames() {\n+\t\tSet<String> retval = new HashSet<>();\n+\t\tProperties props = new Properties();\n+\t\ttry {\n+\t\t\tprops.load(myVersion.getFhirVersionPropertiesFile());", "originalCommit": "34731120deb482ae0bb11ffa473a18c5ec8dd081", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI5MjkyNw==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2191#discussion_r532292927", "bodyText": "This isn't threadsafe - Also fixing", "author": "jamesagnew", "createdAt": "2020-11-30T00:22:44Z", "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/context/FhirContext.java", "diffHunk": "@@ -553,29 +555,29 @@ public RuntimeResourceDefinition getResourceDefinitionById(final String theId) {\n \t * @since 5.1.0\n \t */\n \tpublic Set<String> getResourceTypes() {\n-\t\tSet<String> resourceNames = new HashSet<>();\n-\n-\t\tif (myNameToResourceDefinition.isEmpty()) {\n-\t\t\tProperties props = new Properties();\n-\t\t\ttry {\n-\t\t\t\tprops.load(myVersion.getFhirVersionPropertiesFile());\n-\t\t\t} catch (IOException theE) {\n-\t\t\t\tthrow new ConfigurationException(\"Failed to load version properties file\");\n-\t\t\t}\n-\t\t\tEnumeration<?> propNames = props.propertyNames();\n-\t\t\twhile (propNames.hasMoreElements()) {\n-\t\t\t\tString next = (String) propNames.nextElement();\n-\t\t\t\tif (next.startsWith(\"resource.\")) {\n-\t\t\t\t\tresourceNames.add(next.substring(\"resource.\".length()).trim());\n-\t\t\t\t}\n-\t\t\t}\n+\t\tif (myResourceNames == null) {", "originalCommit": "34731120deb482ae0bb11ffa473a18c5ec8dd081", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI5MzQyNA==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2191#discussion_r532293424", "bodyText": "I'm curious about the intention of this change (the whole change to IdDt, not this line in particular) - I don't see anything wrong with it but I'm also unclear on what it does for this ticket. Do we need to make the same change for the other versions of FHIR's IdTypes?", "author": "jamesagnew", "createdAt": "2020-11-30T00:26:07Z", "path": "hapi-fhir-base/src/main/java/ca/uhn/fhir/model/primitive/IdDt.java", "diffHunk": "@@ -154,10 +156,15 @@ public IdDt(String theBaseUrl, String theResourceType, String theId, String theV\n \t\tmyResourceType = theResourceType;\n \t\tmyUnqualifiedId = theId;\n \t\tmyUnqualifiedVersionId = StringUtils.defaultIfBlank(theVersionId, null);\n-\t\tmyHaveComponentParts = true;\n-\t\tif (isBlank(myBaseUrl) && isBlank(myResourceType) && isBlank(myUnqualifiedId) && isBlank(myUnqualifiedVersionId)) {\n-\t\t\tmyHaveComponentParts = false;\n-\t\t}\n+\t\tsetHaveComponentParts(this);\n+\t}\n+\n+\tpublic IdDt(IIdType theId) {", "originalCommit": "34731120deb482ae0bb11ffa473a18c5ec8dd081", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI5NDUyMw==", "url": "https://github.com/hapifhir/hapi-fhir/pull/2191#discussion_r532294523", "bodyText": "This is a fun javadoc :)", "author": "jamesagnew", "createdAt": "2020-11-30T00:34:12Z", "path": "hapi-fhir-jpaserver-searchparam/src/main/java/ca/uhn/fhir/jpa/cache/ResourceChangeListenerCacheRefresherImpl.java", "diffHunk": "@@ -0,0 +1,151 @@\n+package ca.uhn.fhir.jpa.cache;\n+\n+import ca.uhn.fhir.jpa.model.sched.HapiJob;\n+import ca.uhn.fhir.jpa.model.sched.ISchedulerService;\n+import ca.uhn.fhir.jpa.model.sched.ScheduledJobDefinition;\n+import ca.uhn.fhir.jpa.searchparam.SearchParameterMap;\n+import com.google.common.annotations.VisibleForTesting;\n+import org.apache.commons.lang3.time.DateUtils;\n+import org.hl7.fhir.instance.model.api.IIdType;\n+import org.quartz.JobExecutionContext;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Service;\n+\n+import javax.annotation.PostConstruct;\n+import java.util.ArrayList;\n+import java.util.Iterator;\n+import java.util.List;\n+\n+/**\n+ * This service refreshes the {@link IResourceChangeListenerCache} caches and notifies their listener when\n+ * those caches change.\n+ *\n+ * Think of it like a Ferris Wheel that completes a full rotation once every 10 seconds.\n+ * Every time a chair passes the bottom it checks to see if it's time to refresh that seat.  If so,\n+ * the Ferris Wheel stops, removes the riders, and loads a fresh cache for that chair, and calls the listener\n+ * if any entries in the new cache are different from the last time that cache was loaded.", "originalCommit": "34731120deb482ae0bb11ffa473a18c5ec8dd081", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e8516e2b9cc870c57ba7550c98ee0dae7930ebf2", "url": "https://github.com/hapifhir/hapi-fhir/commit/e8516e2b9cc870c57ba7550c98ee0dae7930ebf2", "message": "Address a couple of my own reviw comments", "committedDate": "2020-11-30T00:41:54Z", "type": "commit"}, {"oid": "c33dd15dbb1fbc27a9ee7f04f3fc9566f9421abf", "url": "https://github.com/hapifhir/hapi-fhir/commit/c33dd15dbb1fbc27a9ee7f04f3fc9566f9421abf", "message": "init rev", "committedDate": "2020-10-22T19:55:47Z", "type": "commit"}, {"oid": "630915ce3794b73e61c0a7b19198abd0cc24c4b6", "url": "https://github.com/hapifhir/hapi-fhir/commit/630915ce3794b73e61c0a7b19198abd0cc24c4b6", "message": "fix build", "committedDate": "2020-10-23T16:43:21Z", "type": "commit"}, {"oid": "b51ab10351699ea962b5f279e4df960cb1388a5b", "url": "https://github.com/hapifhir/hapi-fhir/commit/b51ab10351699ea962b5f279e4df960cb1388a5b", "message": "Tweaked the POM config settings and also added some dependency exclusions (commented out for now).", "committedDate": "2020-10-23T18:38:59Z", "type": "commit"}, {"oid": "3b2444ba7de83f93d227228561462af6b6973174", "url": "https://github.com/hapifhir/hapi-fhir/commit/3b2444ba7de83f93d227228561462af6b6973174", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike\n\n# Conflicts:\n#\t.mvn/wrapper/maven-wrapper.properties", "committedDate": "2020-10-26T14:03:01Z", "type": "commit"}, {"oid": "4e7e0affa1f1480c6306872177cc180bbd4197c2", "url": "https://github.com/hapifhir/hapi-fhir/commit/4e7e0affa1f1480c6306872177cc180bbd4197c2", "message": "Re-factored the CQL Test Support to provide a class hierarchical separation between R4 and Dstu3 code, where 1 failing Unit Test still needs to be fixed - CqlProviderDstu3Test.evaluateMeasure().", "committedDate": "2020-10-27T19:47:14Z", "type": "commit"}, {"oid": "cd27d26ef422dd8d751b7f3a847f6061616606a9", "url": "https://github.com/hapifhir/hapi-fhir/commit/cd27d26ef422dd8d751b7f3a847f6061616606a9", "message": "Re-factored the CQL Test Support to provide a class hierarchical separation between R4 and Dstu3 code, where 1 failing Unit Test still needs to be fixed - CqlProviderDstu3Test.evaluateMeasure().", "committedDate": "2020-10-27T19:55:07Z", "type": "commit"}, {"oid": "a5038bfd57c57b1b3e694567f70c7fa372422b3c", "url": "https://github.com/hapifhir/hapi-fhir/commit/a5038bfd57c57b1b3e694567f70c7fa372422b3c", "message": "Merge branch 'master' into kbd-20201022-cql-spike", "committedDate": "2020-10-28T12:53:29Z", "type": "commit"}, {"oid": "20b35bcb9c3ddb78ec8f33f3ec1d6f1c3c1e82fa", "url": "https://github.com/hapifhir/hapi-fhir/commit/20b35bcb9c3ddb78ec8f33f3ec1d6f1c3c1e82fa", "message": "More re-factoring of the CQL Unit Tests.", "committedDate": "2020-10-29T17:42:59Z", "type": "commit"}, {"oid": "1953f19c86029ea2c531484531407c0b5caf2b0a", "url": "https://github.com/hapifhir/hapi-fhir/commit/1953f19c86029ea2c531484531407c0b5caf2b0a", "message": "Removed a LogMessages.html file and a minor Unit Test change.", "committedDate": "2020-10-29T18:14:33Z", "type": "commit"}, {"oid": "ec72a6126dc80e30a1954b754992702e8005d4c7", "url": "https://github.com/hapifhir/hapi-fhir/commit/ec72a6126dc80e30a1954b754992702e8005d4c7", "message": "Unit Tests.", "committedDate": "2020-10-29T19:57:43Z", "type": "commit"}, {"oid": "54265506fa362a4ce794ba483a53da9920d19454", "url": "https://github.com/hapifhir/hapi-fhir/commit/54265506fa362a4ce794ba483a53da9920d19454", "message": "added debug logging to troubleshoot the dao that has no name", "committedDate": "2020-10-29T22:03:46Z", "type": "commit"}, {"oid": "e4a80f0cc988516dc10eb8c4cedd0232abffbe2a", "url": "https://github.com/hapifhir/hapi-fhir/commit/e4a80f0cc988516dc10eb8c4cedd0232abffbe2a", "message": "added debug logging to troubleshoot the dao that has no name", "committedDate": "2020-10-29T22:03:51Z", "type": "commit"}, {"oid": "6a89614195135da5e7c7c11af0ec8024e56def8a", "url": "https://github.com/hapifhir/hapi-fhir/commit/6a89614195135da5e7c7c11af0ec8024e56def8a", "message": "workaround to get past null dao resourceName issue", "committedDate": "2020-10-29T22:31:14Z", "type": "commit"}, {"oid": "717f8026eaa4fb1d02fe0bad704392b9d9c69f71", "url": "https://github.com/hapifhir/hapi-fhir/commit/717f8026eaa4fb1d02fe0bad704392b9d9c69f71", "message": "fix jsons to get test to pass.  Test still fails with library id problem", "committedDate": "2020-10-30T01:06:51Z", "type": "commit"}, {"oid": "5062e4a714a85ed76aa4aa7b40fd5441e66deb43", "url": "https://github.com/hapifhir/hapi-fhir/commit/5062e4a714a85ed76aa4aa7b40fd5441e66deb43", "message": "gitignore", "committedDate": "2020-10-30T14:24:18Z", "type": "commit"}, {"oid": "953dd7896b0b8e9cc29e4157e234a6b6aba54b45", "url": "https://github.com/hapifhir/hapi-fhir/commit/953dd7896b0b8e9cc29e4157e234a6b6aba54b45", "message": "gitignore", "committedDate": "2020-10-30T14:25:48Z", "type": "commit"}, {"oid": "5ade9651081f9dbe8f8057fa32c2bb1d65c7ea00", "url": "https://github.com/hapifhir/hapi-fhir/commit/5ade9651081f9dbe8f8057fa32c2bb1d65c7ea00", "message": "test passes!  Woohoo!", "committedDate": "2020-10-30T15:14:53Z", "type": "commit"}, {"oid": "9285644013a6c47f6de21535895a9ccfdbf1809a", "url": "https://github.com/hapifhir/hapi-fhir/commit/9285644013a6c47f6de21535895a9ccfdbf1809a", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike", "committedDate": "2020-10-30T15:15:22Z", "type": "commit"}, {"oid": "00a0eb855926a8dde3373938afbda98f3994acc0", "url": "https://github.com/hapifhir/hapi-fhir/commit/00a0eb855926a8dde3373938afbda98f3994acc0", "message": "undo troubleshooting logging", "committedDate": "2020-10-30T15:18:39Z", "type": "commit"}, {"oid": "44ba1f3e93705d555111194ef3580e3182a3eae9", "url": "https://github.com/hapifhir/hapi-fhir/commit/44ba1f3e93705d555111194ef3580e3182a3eae9", "message": "added timer and logging.", "committedDate": "2020-10-30T15:24:32Z", "type": "commit"}, {"oid": "fd3a710bb30488ae4afaf0e1f69c6bc8e0109ddf", "url": "https://github.com/hapifhir/hapi-fhir/commit/fd3a710bb30488ae4afaf0e1f69c6bc8e0109ddf", "message": "added asserts and time multiple evaluations and measure the average", "committedDate": "2020-10-30T15:37:29Z", "type": "commit"}, {"oid": "ff5e3e0b333963c1a007cb7cb95e821df1875849", "url": "https://github.com/hapifhir/hapi-fhir/commit/ff5e3e0b333963c1a007cb7cb95e821df1875849", "message": "readme", "committedDate": "2020-10-30T16:03:09Z", "type": "commit"}, {"oid": "3cbcb474b4facf91519132e7f68eafd5cf23875c", "url": "https://github.com/hapifhir/hapi-fhir/commit/3cbcb474b4facf91519132e7f68eafd5cf23875c", "message": "adding explanations", "committedDate": "2020-10-30T16:14:46Z", "type": "commit"}, {"oid": "bdca63cc2ecc94d05468549bf98f7335aa9d300b", "url": "https://github.com/hapifhir/hapi-fhir/commit/bdca63cc2ecc94d05468549bf98f7335aa9d300b", "message": "added more explanatory notes", "committedDate": "2020-10-30T17:13:10Z", "type": "commit"}, {"oid": "048967ec2104710578b9f0faeaad98b48ffbcbe0", "url": "https://github.com/hapifhir/hapi-fhir/commit/048967ec2104710578b9f0faeaad98b48ffbcbe0", "message": "measure 2 patients", "committedDate": "2020-10-30T17:58:23Z", "type": "commit"}, {"oid": "024aaac1e31a467e08008ac637dd80928ac9c12a", "url": "https://github.com/hapifhir/hapi-fhir/commit/024aaac1e31a467e08008ac637dd80928ac9c12a", "message": "move pom to use cqf snapshot", "committedDate": "2020-11-02T20:18:10Z", "type": "commit"}, {"oid": "1754094e9ab07ab37fd76293319e9eefb20c892c", "url": "https://github.com/hapifhir/hapi-fhir/commit/1754094e9ab07ab37fd76293319e9eefb20c892c", "message": "roughed out cache", "committedDate": "2020-11-03T14:30:23Z", "type": "commit"}, {"oid": "f9088f24943083e5aed30f42d327e904f881d205", "url": "https://github.com/hapifhir/hapi-fhir/commit/f9088f24943083e5aed30f42d327e904f881d205", "message": "roughed out cache", "committedDate": "2020-11-03T14:32:27Z", "type": "commit"}, {"oid": "8e6c50945a621fa064d28e145b1c4a7a85b56bd8", "url": "https://github.com/hapifhir/hapi-fhir/commit/8e6c50945a621fa064d28e145b1c4a7a85b56bd8", "message": "Added code to VersionChangeCache class.", "committedDate": "2020-11-03T17:27:00Z", "type": "commit"}, {"oid": "ce656e840d151a7e818ca21f2b278f874724bec0", "url": "https://github.com/hapifhir/hapi-fhir/commit/ce656e840d151a7e818ca21f2b278f874724bec0", "message": "added tests", "committedDate": "2020-11-03T18:29:36Z", "type": "commit"}, {"oid": "06b4833ad6e5f5f8bfd76191a5ddc350909f32f8", "url": "https://github.com/hapifhir/hapi-fhir/commit/06b4833ad6e5f5f8bfd76191a5ddc350909f32f8", "message": "added polling test", "committedDate": "2020-11-03T19:43:58Z", "type": "commit"}, {"oid": "0b7ff0d25870efd5c6d51dc25c01d6a6567a8f29", "url": "https://github.com/hapifhir/hapi-fhir/commit/0b7ff0d25870efd5c6d51dc25c01d6a6567a8f29", "message": "wrote init version", "committedDate": "2020-11-03T19:58:48Z", "type": "commit"}, {"oid": "fcb7415ea0534c28243f563c8049ec555f778089", "url": "https://github.com/hapifhir/hapi-fhir/commit/fcb7415ea0534c28243f563c8049ec555f778089", "message": "wrote init version", "committedDate": "2020-11-03T20:01:06Z", "type": "commit"}, {"oid": "4f49bc153feaaadc7bf181c4128227007c52ec48", "url": "https://github.com/hapifhir/hapi-fhir/commit/4f49bc153feaaadc7bf181c4128227007c52ec48", "message": "optimized versioncache", "committedDate": "2020-11-03T22:08:23Z", "type": "commit"}, {"oid": "673c9b8c1c0136eb21f6bf44053a5c7623c2c0e4", "url": "https://github.com/hapifhir/hapi-fhir/commit/673c9b8c1c0136eb21f6bf44053a5c7623c2c0e4", "message": "worked on getting tests to pass", "committedDate": "2020-11-03T23:19:13Z", "type": "commit"}, {"oid": "226c3e2d33b7c82232631ee9cdc98cce6c4bd1e7", "url": "https://github.com/hapifhir/hapi-fhir/commit/226c3e2d33b7c82232631ee9cdc98cce6c4bd1e7", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike", "committedDate": "2020-11-03T23:44:51Z", "type": "commit"}, {"oid": "bbca6c2a8c860d8bf9821d7ade990fe0cc27100b", "url": "https://github.com/hapifhir/hapi-fhir/commit/bbca6c2a8c860d8bf9821d7ade990fe0cc27100b", "message": "redesigned interfaces", "committedDate": "2020-11-04T15:32:02Z", "type": "commit"}, {"oid": "39d11a621e6789b0d5cba9470578f3d19bf28efe", "url": "https://github.com/hapifhir/hapi-fhir/commit/39d11a621e6789b0d5cba9470578f3d19bf28efe", "message": "all tests pass", "committedDate": "2020-11-04T21:53:13Z", "type": "commit"}, {"oid": "f026125a79f3011b7f136b037a80d8add09d5177", "url": "https://github.com/hapifhir/hapi-fhir/commit/f026125a79f3011b7f136b037a80d8add09d5177", "message": "fixmes", "committedDate": "2020-11-04T21:55:44Z", "type": "commit"}, {"oid": "9df0889d37dfa630364920994b43fb9a470501e2", "url": "https://github.com/hapifhir/hapi-fhir/commit/9df0889d37dfa630364920994b43fb9a470501e2", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike", "committedDate": "2020-11-04T21:59:25Z", "type": "commit"}, {"oid": "c27c2e4108b21c5896e4eb532b5250ded7411c0d", "url": "https://github.com/hapifhir/hapi-fhir/commit/c27c2e4108b21c5896e4eb532b5250ded7411c0d", "message": "fixmes", "committedDate": "2020-11-04T22:33:09Z", "type": "commit"}, {"oid": "4a2cb0ce474fa4ebd6fdac4157878ecc56e90258", "url": "https://github.com/hapifhir/hapi-fhir/commit/4a2cb0ce474fa4ebd6fdac4157878ecc56e90258", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike", "committedDate": "2020-11-05T14:22:18Z", "type": "commit"}, {"oid": "e32b2bcb83bb81ee285a0cfc3dea885f79547018", "url": "https://github.com/hapifhir/hapi-fhir/commit/e32b2bcb83bb81ee285a0cfc3dea885f79547018", "message": "rename param", "committedDate": "2020-11-09T14:07:09Z", "type": "commit"}, {"oid": "78c131e642025ce259113704ccd93351b250c05a", "url": "https://github.com/hapifhir/hapi-fhir/commit/78c131e642025ce259113704ccd93351b250c05a", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike", "committedDate": "2020-11-09T14:07:16Z", "type": "commit"}, {"oid": "3e872ce36896ee4e13d7edd4e27992d013e227e2", "url": "https://github.com/hapifhir/hapi-fhir/commit/3e872ce36896ee4e13d7edd4e27992d013e227e2", "message": "Added Unit Tests.", "committedDate": "2020-11-09T14:18:07Z", "type": "commit"}, {"oid": "022e0a73cc42d54ea99aba56604e829069911ccb", "url": "https://github.com/hapifhir/hapi-fhir/commit/022e0a73cc42d54ea99aba56604e829069911ccb", "message": "javadoc", "committedDate": "2020-11-09T15:30:45Z", "type": "commit"}, {"oid": "b6a34f726fccd92ed0fef36a10f6eed927b2217a", "url": "https://github.com/hapifhir/hapi-fhir/commit/b6a34f726fccd92ed0fef36a10f6eed927b2217a", "message": "Fixed the 2-Patient Unit Test.", "committedDate": "2020-11-09T16:23:32Z", "type": "commit"}, {"oid": "371c9948787d6a1f35b46ecf23a1323f227aa06d", "url": "https://github.com/hapifhir/hapi-fhir/commit/371c9948787d6a1f35b46ecf23a1323f227aa06d", "message": "More Unit Test work.", "committedDate": "2020-11-09T17:11:25Z", "type": "commit"}, {"oid": "acad59b6885a4677c95004d287d541bfdd8f7af1", "url": "https://github.com/hapifhir/hapi-fhir/commit/acad59b6885a4677c95004d287d541bfdd8f7af1", "message": "make ResourceVersionMap immutable", "committedDate": "2020-11-09T18:08:23Z", "type": "commit"}, {"oid": "e1494f40e9b2b7516f39e1f3cd04e492ace2ed3d", "url": "https://github.com/hapifhir/hapi-fhir/commit/e1494f40e9b2b7516f39e1f3cd04e492ace2ed3d", "message": "Fixed a Unit Test that was failing intermittently by adding a new way to refresh the cache.", "committedDate": "2020-11-09T19:44:35Z", "type": "commit"}, {"oid": "b29ddf1a1036767327533f581806be6c74f578b6", "url": "https://github.com/hapifhir/hapi-fhir/commit/b29ddf1a1036767327533f581806be6c74f578b6", "message": "Use a new method called doRefreshAllCaches(0) to force a refresh and have all Listeners called immediately.", "committedDate": "2020-11-09T20:06:58Z", "type": "commit"}, {"oid": "5b279ec9ba7fc247e0c3762122a43422c335f4b3", "url": "https://github.com/hapifhir/hapi-fhir/commit/5b279ec9ba7fc247e0c3762122a43422c335f4b3", "message": "Cleaned up IVersionChangeListenerRegistry interface to make methods more clear and resolved all Unit Tests.", "committedDate": "2020-11-10T14:21:22Z", "type": "commit"}, {"oid": "4b8fd3f9ed75971703b2bfaee3080b03c26cf36b", "url": "https://github.com/hapifhir/hapi-fhir/commit/4b8fd3f9ed75971703b2bfaee3080b03c26cf36b", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike", "committedDate": "2020-11-10T14:26:27Z", "type": "commit"}, {"oid": "b285074851c1878a33f9420a5d3d8bf9d7cb4cfb", "url": "https://github.com/hapifhir/hapi-fhir/commit/b285074851c1878a33f9420a5d3d8bf9d7cb4cfb", "message": "disabled tests", "committedDate": "2020-11-10T14:33:01Z", "type": "commit"}, {"oid": "0de266bdd58e37d1e89f8fc493b415ada7ebff19", "url": "https://github.com/hapifhir/hapi-fhir/commit/0de266bdd58e37d1e89f8fc493b415ada7ebff19", "message": "disabled tests", "committedDate": "2020-11-10T14:34:18Z", "type": "commit"}, {"oid": "4f1d71fd6aba7b6584821b734b2844d8739725a0", "url": "https://github.com/hapifhir/hapi-fhir/commit/4f1d71fd6aba7b6584821b734b2844d8739725a0", "message": "removed unused test method", "committedDate": "2020-11-10T15:00:20Z", "type": "commit"}, {"oid": "ff0876e17f306485ec51af8b03808dd291d7a51a", "url": "https://github.com/hapifhir/hapi-fhir/commit/ff0876e17f306485ec51af8b03808dd291d7a51a", "message": "fixed refresh logic and added asserts", "committedDate": "2020-11-10T15:50:14Z", "type": "commit"}, {"oid": "8d2d45b41f1be469031c9870268db7a8f2a4eac6", "url": "https://github.com/hapifhir/hapi-fhir/commit/8d2d45b41f1be469031c9870268db7a8f2a4eac6", "message": "moved cache so it can be used by searchparamregistry", "committedDate": "2020-11-10T16:37:44Z", "type": "commit"}, {"oid": "08e58f85e01e5bb1fc71de663b3b66427943e7f7", "url": "https://github.com/hapifhir/hapi-fhir/commit/08e58f85e01e5bb1fc71de663b3b66427943e7f7", "message": "Updated the Cql Unit Tests to be properly configured for Dstu3 or R4.", "committedDate": "2020-11-10T20:42:51Z", "type": "commit"}, {"oid": "25f5c44538eefacda3563a13b227eedf11e8e24a", "url": "https://github.com/hapifhir/hapi-fhir/commit/25f5c44538eefacda3563a13b227eedf11e8e24a", "message": "started rewriting SearchParamRegistryImpl to use new cache\nadded init method to listener interface", "committedDate": "2020-11-10T23:29:43Z", "type": "commit"}, {"oid": "fa7ba0fa174691bd0b7f1683facb1fb275205dd4", "url": "https://github.com/hapifhir/hapi-fhir/commit/fa7ba0fa174691bd0b7f1683facb1fb275205dd4", "message": "added fixmes", "committedDate": "2020-11-11T14:48:09Z", "type": "commit"}, {"oid": "f141365e50691c5fe77106ee5fc934aa3334f07c", "url": "https://github.com/hapifhir/hapi-fhir/commit/f141365e50691c5fe77106ee5fc934aa3334f07c", "message": "adding tests", "committedDate": "2020-11-11T17:38:48Z", "type": "commit"}, {"oid": "f78612f4bab3a7188708694ba8e104bc03b4c3d7", "url": "https://github.com/hapifhir/hapi-fhir/commit/f78612f4bab3a7188708694ba8e104bc03b4c3d7", "message": "tests pass", "committedDate": "2020-11-11T17:58:26Z", "type": "commit"}, {"oid": "7b700a3cbddc1b80d05d0711613a89277b305a83", "url": "https://github.com/hapifhir/hapi-fhir/commit/7b700a3cbddc1b80d05d0711613a89277b305a83", "message": "added tests", "committedDate": "2020-11-11T18:57:02Z", "type": "commit"}, {"oid": "b5b7a0a38a2b57fb5236044d377dd46f873db6c9", "url": "https://github.com/hapifhir/hapi-fhir/commit/b5b7a0a38a2b57fb5236044d377dd46f873db6c9", "message": "Fixed the way CqlProviderFactory Autowires Beans so it can work with both Dstu3 and R4 contexts.", "committedDate": "2020-11-11T19:55:22Z", "type": "commit"}, {"oid": "0d16c04d179455193dcd82bc34be838514d824eb", "url": "https://github.com/hapifhir/hapi-fhir/commit/0d16c04d179455193dcd82bc34be838514d824eb", "message": "moar tests", "committedDate": "2020-11-11T22:22:53Z", "type": "commit"}, {"oid": "3c7d010b074886b2f4c01f79f4ea410b0a2f6b2e", "url": "https://github.com/hapifhir/hapi-fhir/commit/3c7d010b074886b2f4c01f79f4ea410b0a2f6b2e", "message": "fix test", "committedDate": "2020-11-11T22:26:08Z", "type": "commit"}, {"oid": "7bba8b07794ba52d9275c79a1713d6d2e82133cb", "url": "https://github.com/hapifhir/hapi-fhir/commit/7bba8b07794ba52d9275c79a1713d6d2e82133cb", "message": "work tests", "committedDate": "2020-11-12T00:13:49Z", "type": "commit"}, {"oid": "38ab64b8376f597f3220492c0be0fd47052eda6f", "url": "https://github.com/hapifhir/hapi-fhir/commit/38ab64b8376f597f3220492c0be0fd47052eda6f", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike\n\n# Conflicts:\n#\thapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/term/BaseTermReadSvcImpl.java", "committedDate": "2020-11-12T03:09:56Z", "type": "commit"}, {"oid": "8162dc2f5c9f1419690a0fc99c2ffa2943fa6dbb", "url": "https://github.com/hapifhir/hapi-fhir/commit/8162dc2f5c9f1419690a0fc99c2ffa2943fa6dbb", "message": "reverting unneccessary refactors", "committedDate": "2020-11-12T03:22:02Z", "type": "commit"}, {"oid": "e593e24d2ea6c41727b3731c08b4da143f17536e", "url": "https://github.com/hapifhir/hapi-fhir/commit/e593e24d2ea6c41727b3731c08b4da143f17536e", "message": "undo unneccessary import changes to reduce MR size", "committedDate": "2020-11-12T03:26:47Z", "type": "commit"}, {"oid": "2e7b5798707ad86b12ab6feb37830fa3029aa893", "url": "https://github.com/hapifhir/hapi-fhir/commit/2e7b5798707ad86b12ab6feb37830fa3029aa893", "message": "undo unneccessary import changes to reduce MR size", "committedDate": "2020-11-12T03:28:54Z", "type": "commit"}, {"oid": "55dbcfd31c30164bf03cd9f4311cc8ef31a1631b", "url": "https://github.com/hapifhir/hapi-fhir/commit/55dbcfd31c30164bf03cd9f4311cc8ef31a1631b", "message": "Unit Test fixes...more to come...", "committedDate": "2020-11-12T14:45:37Z", "type": "commit"}, {"oid": "71b0f10105d06f62b92445eca408cfa6679ddf3b", "url": "https://github.com/hapifhir/hapi-fhir/commit/71b0f10105d06f62b92445eca408cfa6679ddf3b", "message": "add unregister", "committedDate": "2020-11-12T15:18:54Z", "type": "commit"}, {"oid": "6fa17f7fafd56c13b7bc14be7245b91f4add77aa", "url": "https://github.com/hapifhir/hapi-fhir/commit/6fa17f7fafd56c13b7bc14be7245b91f4add77aa", "message": "fix tests", "committedDate": "2020-11-12T16:51:52Z", "type": "commit"}, {"oid": "109bd88814c1bfb8c180b750b7b345be07c386ea", "url": "https://github.com/hapifhir/hapi-fhir/commit/109bd88814c1bfb8c180b750b7b345be07c386ea", "message": "Changed ResourceVersionCache to use a Map of Maps.", "committedDate": "2020-11-12T19:38:20Z", "type": "commit"}, {"oid": "73c0f6fb58b07ef18fc37c20fa004b4e35bd9db9", "url": "https://github.com/hapifhir/hapi-fhir/commit/73c0f6fb58b07ef18fc37c20fa004b4e35bd9db9", "message": "searchparam test", "committedDate": "2020-11-12T22:29:27Z", "type": "commit"}, {"oid": "ad6fa662fdb72d9ced4340524b0d4058e88f09e9", "url": "https://github.com/hapifhir/hapi-fhir/commit/ad6fa662fdb72d9ced4340524b0d4058e88f09e9", "message": "Merge remote-tracking branch 'origin/kbd-20201022-cql-spike' into kbd-20201022-cql-spike", "committedDate": "2020-11-12T22:29:34Z", "type": "commit"}, {"oid": "b83123e82989fc7ceb660a9ae2518494f3061d79", "url": "https://github.com/hapifhir/hapi-fhir/commit/b83123e82989fc7ceb660a9ae2518494f3061d79", "message": "test passes", "committedDate": "2020-11-13T00:26:40Z", "type": "commit"}, {"oid": "0ea444908a9ff37402c039b3ef1b553a3f7d2f87", "url": "https://github.com/hapifhir/hapi-fhir/commit/0ea444908a9ff37402c039b3ef1b553a3f7d2f87", "message": "resolved fixme", "committedDate": "2020-11-13T13:22:59Z", "type": "commit"}, {"oid": "c2b83a515c009fbf965bcba56293b077153ba5e8", "url": "https://github.com/hapifhir/hapi-fhir/commit/c2b83a515c009fbf965bcba56293b077153ba5e8", "message": "fixmies", "committedDate": "2020-11-13T13:59:54Z", "type": "commit"}, {"oid": "c3ca94d64e72bb3295ad078bed65cc3ae7a6d3ee", "url": "https://github.com/hapifhir/hapi-fhir/commit/c3ca94d64e72bb3295ad078bed65cc3ae7a6d3ee", "message": "strengthen test asserts", "committedDate": "2020-11-13T14:24:23Z", "type": "commit"}, {"oid": "5134f08f707c22dd861b4cb9bff471c0e517caeb", "url": "https://github.com/hapifhir/hapi-fhir/commit/5134f08f707c22dd861b4cb9bff471c0e517caeb", "message": "More Unit Test changes and added some FIMXME items.", "committedDate": "2020-11-13T17:06:09Z", "type": "commit"}, {"oid": "bcc7610e6cf228a0b713b790c388ddceb3ce2448", "url": "https://github.com/hapifhir/hapi-fhir/commit/bcc7610e6cf228a0b713b790c388ddceb3ce2448", "message": "changed from long to changeresult", "committedDate": "2020-11-13T17:53:59Z", "type": "commit"}, {"oid": "45119b4fa73451c8716b2c59ad98306d77bf9441", "url": "https://github.com/hapifhir/hapi-fhir/commit/45119b4fa73451c8716b2c59ad98306d77bf9441", "message": "Merge branch 'kbd-20201022-cql-spike' of https://github.com/jamesagnew/hapi-fhir into kbd-20201022-cql-spike\n\n# Conflicts:\n#\thapi-fhir-jpaserver-searchparam/src/main/java/ca/uhn/fhir/jpa/cache/VersionChangeListenerRegistryImpl.java", "committedDate": "2020-11-13T17:55:36Z", "type": "commit"}, {"oid": "c865bda1ec714187a33e4321cd5a07e12021c47c", "url": "https://github.com/hapifhir/hapi-fhir/commit/c865bda1ec714187a33e4321cd5a07e12021c47c", "message": "renamed VersionChange -> ResourceChange", "committedDate": "2020-11-13T18:01:44Z", "type": "commit"}, {"oid": "7283dba5339a31a3452a7ef134570ccbd7710e9f", "url": "https://github.com/hapifhir/hapi-fhir/commit/7283dba5339a31a3452a7ef134570ccbd7710e9f", "message": "fixed delete bug", "committedDate": "2020-11-13T19:29:18Z", "type": "commit"}, {"oid": "c57c1ff96fd996d2ebb79814596f7c57d50ff225", "url": "https://github.com/hapifhir/hapi-fhir/commit/c57c1ff96fd996d2ebb79814596f7c57d50ff225", "message": "Merge remote-tracking branch 'origin/master' into kbd-20201022-cql-spike", "committedDate": "2020-11-13T19:30:12Z", "type": "commit"}, {"oid": "a2e43b978cc92eeac2fffc14e36ba9ece2d3aa44", "url": "https://github.com/hapifhir/hapi-fhir/commit/a2e43b978cc92eeac2fffc14e36ba9ece2d3aa44", "message": "organize imports", "committedDate": "2020-11-13T19:31:25Z", "type": "commit"}, {"oid": "44f3b6cddd340fbdc1ae880450f4eb14fdc47987", "url": "https://github.com/hapifhir/hapi-fhir/commit/44f3b6cddd340fbdc1ae880450f4eb14fdc47987", "message": "fix test", "committedDate": "2020-11-13T21:01:34Z", "type": "commit"}, {"oid": "b067d22fbd33ab21f09a156ef725e2d8b36f9da4", "url": "https://github.com/hapifhir/hapi-fhir/commit/b067d22fbd33ab21f09a156ef725e2d8b36f9da4", "message": "add update test", "committedDate": "2020-11-13T23:16:38Z", "type": "commit"}, {"oid": "efadff04ef765e9b545212cf355ad0c566c8a8d4", "url": "https://github.com/hapifhir/hapi-fhir/commit/efadff04ef765e9b545212cf355ad0c566c8a8d4", "message": "add test reset function", "committedDate": "2020-11-13T23:19:11Z", "type": "commit"}, {"oid": "6b7653517fa573e8dc0f9be578472b790b94212d", "url": "https://github.com/hapifhir/hapi-fhir/commit/6b7653517fa573e8dc0f9be578472b790b94212d", "message": "fix stack overflow", "committedDate": "2020-11-13T23:44:27Z", "type": "commit"}, {"oid": "75525b524f428753945a7949daec42e300de57a6", "url": "https://github.com/hapifhir/hapi-fhir/commit/75525b524f428753945a7949daec42e300de57a6", "message": "fix startup race condition (might still be intermittent)", "committedDate": "2020-11-14T00:09:39Z", "type": "commit"}, {"oid": "932a66a84dfad2cde39f721000f6e24692b3b1de", "url": "https://github.com/hapifhir/hapi-fhir/commit/932a66a84dfad2cde39f721000f6e24692b3b1de", "message": "found the problem.  delete doesn't work because we can't look up the deleted resource to find out what its name is", "committedDate": "2020-11-14T15:22:41Z", "type": "commit"}, {"oid": "4668a6af543d4fddcdf058bc37a908d170dca67f", "url": "https://github.com/hapifhir/hapi-fhir/commit/4668a6af543d4fddcdf058bc37a908d170dca67f", "message": "fixed regression", "committedDate": "2020-11-14T15:41:35Z", "type": "commit"}, {"oid": "564e9f8dc3be8063c5b95ca41e71b15745fb4d42", "url": "https://github.com/hapifhir/hapi-fhir/commit/564e9f8dc3be8063c5b95ca41e71b15745fb4d42", "message": "abandoned idea of incrementally updating searchparam registry.  Rebuilding every time--it doesn't change that often.", "committedDate": "2020-11-15T16:38:13Z", "type": "commit"}, {"oid": "b494f316a2a32ad7f08651c76bd49b42a9ecea18", "url": "https://github.com/hapifhir/hapi-fhir/commit/b494f316a2a32ad7f08651c76bd49b42a9ecea18", "message": "fix test", "committedDate": "2020-11-15T22:59:14Z", "type": "commit"}, {"oid": "ef31eeb5a6b055bcd6170f597555f0773236846a", "url": "https://github.com/hapifhir/hapi-fhir/commit/ef31eeb5a6b055bcd6170f597555f0773236846a", "message": "begin with failing test", "committedDate": "2020-11-15T23:33:15Z", "type": "commit"}, {"oid": "821c9c3058e1e8d3f9dcfe45b9a9176282b08862", "url": "https://github.com/hapifhir/hapi-fhir/commit/821c9c3058e1e8d3f9dcfe45b9a9176282b08862", "message": "test passes", "committedDate": "2020-11-15T23:50:53Z", "type": "commit"}]}