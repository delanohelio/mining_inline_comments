{"pr_number": 8534, "pr_title": "CB-7706 Verify tags on cloud provider side", "pr_createdAt": "2020-07-10T13:41:43Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8534", "timeline": [{"oid": "6b4a81ab49eecab9404b600bcb3d34dcf1681a2b", "url": "https://github.com/hortonworks/cloudbreak/commit/6b4a81ab49eecab9404b600bcb3d34dcf1681a2b", "message": "CB-7706 Verify tags on cloud provider side\nExtend tag verification so that it does not jut verify tags on CB side, but actually query the cloud provider that resources have the needed tags. Supported cloud providers are Aws and Azure.", "committedDate": "2020-07-13T14:19:25Z", "type": "forcePushed"}, {"oid": "1d1bd0c0665066af6e391d1d907f3c90fa5a7c78", "url": "https://github.com/hortonworks/cloudbreak/commit/1d1bd0c0665066af6e391d1d907f3c90fa5a7c78", "message": "CB-7706 Verify tags on cloud provider side\nExtend tag verification so that it does not jut verify tags on CB side, but actually query the cloud provider that resources have the needed tags. Supported cloud providers are Aws and Azure.", "committedDate": "2020-07-14T07:28:54Z", "type": "forcePushed"}, {"oid": "98b2d2f88893bdc4da5e2360e67cfa6aa3d7177a", "url": "https://github.com/hortonworks/cloudbreak/commit/98b2d2f88893bdc4da5e2360e67cfa6aa3d7177a", "message": "CB-7706 Verify tags on cloud provider side\nExtend tag verification so that it does not jut verify tags on CB side, but actually query the cloud provider that resources have the needed tags. Supported cloud providers are Aws and Azure.", "committedDate": "2020-07-14T07:54:51Z", "type": "forcePushed"}, {"oid": "372cb811d2978d659bb6acb83fdea9c464542dbb", "url": "https://github.com/hortonworks/cloudbreak/commit/372cb811d2978d659bb6acb83fdea9c464542dbb", "message": "CB-7706 Verify tags on cloud provider side\nExtend tag verification so that it does not jut verify tags on CB side, but actually query the cloud provider that resources have the needed tags. Supported cloud providers are Aws and Azure.", "committedDate": "2020-07-14T11:19:40Z", "type": "commit"}, {"oid": "372cb811d2978d659bb6acb83fdea9c464542dbb", "url": "https://github.com/hortonworks/cloudbreak/commit/372cb811d2978d659bb6acb83fdea9c464542dbb", "message": "CB-7706 Verify tags on cloud provider side\nExtend tag verification so that it does not jut verify tags on CB side, but actually query the cloud provider that resources have the needed tags. Supported cloud providers are Aws and Azure.", "committedDate": "2020-07-14T11:19:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDM1MTEwNw==", "url": "https://github.com/hortonworks/cloudbreak/pull/8534#discussion_r454351107", "bodyText": "Can we also verify here the Tags that are getting added by Default fro the Account Level tag configuration?\nLike the default Owner tag.", "author": "lnardai", "createdAt": "2020-07-14T13:21:32Z", "path": "integration-test/src/main/java/com/sequenceiq/it/cloudbreak/testcase/e2e/environment/EnvironmentStopStartTests.java", "diffHunk": "@@ -50,24 +62,30 @@ public void testCreateStopStartEnvironment(TestContext testContext) {\n                 .given(CredentialTestDto.class)\n                 .when(credentialTestClient.create())\n                 .given(\"telemetry\", TelemetryTestDto.class)\n-                .withLogging()\n-                .withReportClusterLogs()\n+                    .withLogging()\n+                    .withReportClusterLogs()\n                 .given(EnvironmentTestDto.class)\n-                .withNetwork()\n-                .withTelemetry(\"telemetry\")\n-                .withCreateFreeIpa(Boolean.TRUE)\n+                    .withNetwork()\n+                    .withTelemetry(\"telemetry\")\n+                    .withCreateFreeIpa(Boolean.TRUE)\n+                    .addTags(ENV_TAGS)\n                 .when(environmentTestClient.create())\n                 .await(EnvironmentStatus.AVAILABLE)\n+                .then(cloudProviderSideTagAssertion.verifyEnvironmentTags(ENV_TAGS))\n                 .given(SdxInternalTestDto.class)\n+                    .addTags(SDX_TAGS)\n                 .when(sdxTestClient.createInternal())\n                 .awaitForFlow(RunningParameter.key(resourcePropertyProvider().getName()))\n                 .await(SdxClusterStatusResponse.RUNNING)\n+                .then(cloudProviderSideTagAssertion.verifyInternalSdxTags(SDX_TAGS))", "originalCommit": "372cb811d2978d659bb6acb83fdea9c464542dbb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}