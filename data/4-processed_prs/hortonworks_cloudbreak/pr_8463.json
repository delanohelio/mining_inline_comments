{"pr_number": 8463, "pr_title": "DISTX-504 Optimize Schedule Based Autoscaling", "pr_createdAt": "2020-06-30T13:57:16Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8463", "timeline": [{"oid": "4ce7c28c5a3a1b14a449643794c89d66f9a9ea4d", "url": "https://github.com/hortonworks/cloudbreak/commit/4ce7c28c5a3a1b14a449643794c89d66f9a9ea4d", "message": "DISTX-504 Optimize Schedule Based Autoscaling\n\nTime Monitor should only monitor clusters which have timeAlerts defined.", "committedDate": "2020-06-30T13:55:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4MDM3Ng==", "url": "https://github.com/hortonworks/cloudbreak/pull/8463#discussion_r448180376", "bodyText": "is it better in performance if you query the ids first and query the clusters by the ids second?", "author": "topolyai5", "createdAt": "2020-07-01T07:49:02Z", "path": "autoscale/src/main/java/com/sequenceiq/periscope/monitor/TimeMonitor.java", "diffHunk": "@@ -25,4 +28,10 @@ public String getTriggerExpression() {\n         return CronTimeEvaluator.class;\n     }\n \n+    @Override\n+    protected List<Cluster> getMonitored() {\n+        List<Long> clusterIds = getClusterService().findTimeAlertClustersForNode(StackType.WORKLOAD,", "originalCommit": "4ce7c28c5a3a1b14a449643794c89d66f9a9ea4d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4Mzg1MA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8463#discussion_r448183850", "bodyText": "yes because of the join with timealert table. also only cluster ids which have schedule based alerts are filtered in monitor instead of loading all clusters with autoscaling enabled and processing them in CronTimeEvaluator", "author": "smaniraju", "createdAt": "2020-07-01T07:55:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODE4MDM3Ng=="}], "type": "inlineReview"}]}