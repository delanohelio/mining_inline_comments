{"pr_number": 8257, "pr_title": "CB-7405: Add a force uninstall and force-join option to FreeIPA replica install", "pr_createdAt": "2020-06-10T21:19:54Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8257", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc1NzkxNQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8257#discussion_r438757915", "bodyText": "nit: replace -U with --unattended so it will be easier to understand what's going on", "author": "lacikaaa", "createdAt": "2020-06-11T12:50:59Z", "path": "freeipa/src/main/resources/freeipa-salt/salt/freeipa/scripts/freeipa_replica_install.sh", "diffHunk": "@@ -5,6 +5,8 @@ set -e\n FQDN=$(hostname -f)\n IPADDR=$(hostname -i)\n \n+ipa-server-install -U --uninstall", "originalCommit": "2918950acf4afb6190835b3e6ba377ff7d468292", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODg3MTQ1OQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8257#discussion_r438871459", "bodyText": "changed", "author": "wonderslug", "createdAt": "2020-06-11T15:29:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc1NzkxNQ=="}], "type": "inlineReview"}, {"oid": "6be238067a48f993b81854cdf027706a0fb67f22", "url": "https://github.com/hortonworks/cloudbreak/commit/6be238067a48f993b81854cdf027706a0fb67f22", "message": "CB-7405: Add a force uninstall and force-join option to FreeIPA replica install\n\nThis does a ipa-server-uninstall to clean up any possible bad server install\ncomponents in case of a retry of the replica install.  As well it adds a\n--force-join option to the replica install in case the client has already\nbeen installed and registered on the main server.  This effectively  makes\nthe replica install idempotent.", "committedDate": "2020-06-11T15:23:08Z", "type": "commit"}, {"oid": "6be238067a48f993b81854cdf027706a0fb67f22", "url": "https://github.com/hortonworks/cloudbreak/commit/6be238067a48f993b81854cdf027706a0fb67f22", "message": "CB-7405: Add a force uninstall and force-join option to FreeIPA replica install\n\nThis does a ipa-server-uninstall to clean up any possible bad server install\ncomponents in case of a retry of the replica install.  As well it adds a\n--force-join option to the replica install in case the client has already\nbeen installed and registered on the main server.  This effectively  makes\nthe replica install idempotent.", "committedDate": "2020-06-11T15:23:08Z", "type": "forcePushed"}]}