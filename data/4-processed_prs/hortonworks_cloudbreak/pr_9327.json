{"pr_number": 9327, "pr_title": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request", "pr_createdAt": "2020-10-29T11:38:27Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/9327", "timeline": [{"oid": "332af68625b2364365767e1a2f6171d26dfe1f62", "url": "https://github.com/hortonworks/cloudbreak/commit/332af68625b2364365767e1a2f6171d26dfe1f62", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request", "committedDate": "2020-10-29T16:39:06Z", "type": "forcePushed"}, {"oid": "8afea141fcac61b62755dabc46c6b4d9b1589c07", "url": "https://github.com/hortonworks/cloudbreak/commit/8afea141fcac61b62755dabc46c6b4d9b1589c07", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request", "committedDate": "2020-10-30T09:04:45Z", "type": "forcePushed"}, {"oid": "eea13bcd4240cb5ef80072e4d7ea90fafed6c1de", "url": "https://github.com/hortonworks/cloudbreak/commit/eea13bcd4240cb5ef80072e4d7ea90fafed6c1de", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request", "committedDate": "2020-10-30T09:22:39Z", "type": "forcePushed"}, {"oid": "d18734abb3073f1c45f0a68f579bb667d8a5f072", "url": "https://github.com/hortonworks/cloudbreak/commit/d18734abb3073f1c45f0a68f579bb667d8a5f072", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request", "committedDate": "2020-10-30T17:57:38Z", "type": "forcePushed"}, {"oid": "a5ab8eb59fa48d39f9843dc9eaeffea716f0f564", "url": "https://github.com/hortonworks/cloudbreak/commit/a5ab8eb59fa48d39f9843dc9eaeffea716f0f564", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request", "committedDate": "2020-10-30T18:09:31Z", "type": "forcePushed"}, {"oid": "ece301ccede749fb02a66d869443a27723f61094", "url": "https://github.com/hortonworks/cloudbreak/commit/ece301ccede749fb02a66d869443a27723f61094", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request\n- The list of non-API modules is a hardcoded array\n- We iterate through all the changed files\n- Check if their module is one of the non-API modules\n- If yes, we add them to a collector array\n- If in the the size of the collector array equals the number of changed files, no swagger check is needed", "committedDate": "2020-10-30T18:12:20Z", "type": "forcePushed"}, {"oid": "e2f6361c8e82addb3cbc8fe33519c2c6fc07d34e", "url": "https://github.com/hortonworks/cloudbreak/commit/e2f6361c8e82addb3cbc8fe33519c2c6fc07d34e", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request\n- The list of non-API modules is a hardcoded array\n- We iterate through all the changed files\n- Check if their module is one of the non-API modules\n- If yes, we add them to a collector array\n- If in the the size of the collector array equals the number of changed files, no swagger check is needed", "committedDate": "2020-10-30T18:14:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI5NzI0OA==", "url": "https://github.com/hortonworks/cloudbreak/pull/9327#discussion_r515297248", "bodyText": "Looks almost good, unfortunately, common is included in environment-api, so if you change things there it might be still unnoticed\n\n  \n    \n      cloudbreak/environment-api/build.gradle\n    \n    \n         Line 17\n      in\n      7959221\n    \n    \n    \n    \n\n        \n          \n           implementation     project(\":common\") \n        \n    \n  \n\n\nCan we also somehow check the transitive dependencies of the modules? Maybe it does not worth it, if it is too much effort...", "author": "akanto", "createdAt": "2020-10-30T18:22:40Z", "path": "integration-test/scripts/swagger-check.sh", "diffHunk": "@@ -41,6 +41,129 @@ Field_Separator=$IFS\n IFS=,\n set +e\n echo \"Target branch for swagger check: ${CB_TARGET_BRANCH}\"\n+\n+echo \"Checking if there are any API changes between this and the target branch\"\n+git checkout $ghprbSourceBranch\n+git reset --hard ${ghprbActualCommit}\n+\n+# list of the non-API modules\n+declare -a nonApiModules=(\"cloud-reactor-api\"\n+  \"common-handlebar\"\n+  \"datalake\"\n+  \"environment-log\"\n+  \"idbmms-connector\"\n+  \"redbeams-log\"\n+  \"structuredevent-service-legacy\"\n+  \"audit-connector\"\n+  \"ccm-connector\"\n+  \"cloud-reactor\"\n+  \"docker-autoscale\"\n+  \"environment\"\n+  \"integration-test\"\n+  \"redbeams-model\"\n+  \"structuredevent-service\"\n+  \"auth-connector\"\n+  \"client-cm\"\n+  \"cloud-template\"\n+  \"common\"", "originalCommit": "e2f6361c8e82addb3cbc8fe33519c2c6fc07d34e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwNjExMA==", "url": "https://github.com/hortonworks/cloudbreak/pull/9327#discussion_r515306110", "bodyText": "I cannot do the transitive dependency check :( Or it would take 1 to 2 weeks.", "author": "attilapalfi92", "createdAt": "2020-10-30T18:40:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI5NzI0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwODA0MQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/9327#discussion_r515308041", "bodyText": "Removed the common from the non-API modules", "author": "attilapalfi92", "createdAt": "2020-10-30T18:44:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI5NzI0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ3MzYyNQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/9327#discussion_r515473625", "bodyText": "Understood, probably does not worth the effort...", "author": "akanto", "createdAt": "2020-10-31T08:42:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI5NzI0OA=="}], "type": "inlineReview"}, {"oid": "44a95458bc603a30929adee41b18c0629f4d47d6", "url": "https://github.com/hortonworks/cloudbreak/commit/44a95458bc603a30929adee41b18c0629f4d47d6", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request\n- The list of non-API modules is a hardcoded array\n- We iterate through all the changed files\n- Check if their module is one of the non-API modules\n- If yes, we add them to a collector array\n- If in the the size of the collector array equals the number of changed files, no swagger check is needed", "committedDate": "2020-10-30T18:43:11Z", "type": "forcePushed"}, {"oid": "8470b0b4affcfa202e11b94c02ed9387434b53a1", "url": "https://github.com/hortonworks/cloudbreak/commit/8470b0b4affcfa202e11b94c02ed9387434b53a1", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request\n- The list of non-API modules is a hardcoded array\n- We iterate through all the changed files\n- Check if their module is one of the non-API modules\n- If yes, we add them to a collector array\n- If in the the size of the collector array equals the number of changed files, no swagger check is needed", "committedDate": "2020-10-30T19:49:15Z", "type": "forcePushed"}, {"oid": "abba4d9bf084c79ad1528916fe3980af207f8d25", "url": "https://github.com/hortonworks/cloudbreak/commit/abba4d9bf084c79ad1528916fe3980af207f8d25", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request\n- The list of non-API modules is a hardcoded array\n- We iterate through all the changed files\n- Check if their module is one of the non-API modules\n- If yes, we add them to a collector array\n- If in the the size of the collector array equals the number of changed files, no swagger check is needed", "committedDate": "2020-10-30T21:48:46Z", "type": "commit"}, {"oid": "abba4d9bf084c79ad1528916fe3980af207f8d25", "url": "https://github.com/hortonworks/cloudbreak/commit/abba4d9bf084c79ad1528916fe3980af207f8d25", "message": "CB-9524 - Skip swagger compatibility check if there is no api change in the pull request\n- The list of non-API modules is a hardcoded array\n- We iterate through all the changed files\n- Check if their module is one of the non-API modules\n- If yes, we add them to a collector array\n- If in the the size of the collector array equals the number of changed files, no swagger check is needed", "committedDate": "2020-10-30T21:48:46Z", "type": "forcePushed"}]}