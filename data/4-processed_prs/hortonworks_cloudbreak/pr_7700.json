{"pr_number": 7700, "pr_title": "CB-6376 azure_instance_msi missing from backup configuration for FreeIPA", "pr_createdAt": "2020-03-31T14:38:55Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7700", "timeline": [{"oid": "71631be77be39c67167e0409b0093d06a5a01edc", "url": "https://github.com/hortonworks/cloudbreak/commit/71631be77be39c67167e0409b0093d06a5a01edc", "message": "CB-6376 azure_instance_msi missing from backup configuration for FreeIPA\n\nThis adds the azure_instance_msi to the pillar that was missing.", "committedDate": "2020-03-31T14:33:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTAxNzk2Mg==", "url": "https://github.com/hortonworks/cloudbreak/pull/7700#discussion_r401017962", "bodyText": "Yes, this fixes it (tested with cross-subscription setup).\nOne note though: in the freeipa_backup.sh command /usr/local/bin/azcopy login --identity --identity-resource-id [azure-msi] will report auth ok even if azure-msi is \"\". It might make sense to add a log line what the used msi was. I know it can be read in the config file but could help clarity.", "author": "gergopapi2", "createdAt": "2020-03-31T15:43:38Z", "path": "freeipa/src/main/java/com/sequenceiq/freeipa/service/freeipa/config/FreeIpaBackupConfigView.java", "diffHunk": "@@ -75,6 +75,7 @@ public String getAzureInstanceMsi() {\n         map.put(\"hourly_enabled\", this.hourlyEnabled);\n         map.put(\"initial_full_enabled\", this.initialFullEnabled);\n         map.put(\"platform\", ObjectUtils.defaultIfNull(this.platform, EMPTY_CONFIG_DEFAULT));\n+        map.put(\"azure_instance_msi\", ObjectUtils.defaultIfNull(this.azureInstanceMsi, EMPTY_CONFIG_DEFAULT));", "originalCommit": "71631be77be39c67167e0409b0093d06a5a01edc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}