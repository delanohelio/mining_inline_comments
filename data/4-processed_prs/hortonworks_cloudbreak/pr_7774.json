{"pr_number": 7774, "pr_title": "CB-6256 - Upgrading clusters that cannot be updated due to lack of Sa\u2026", "pr_createdAt": "2020-04-09T15:27:23Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7774", "timeline": [{"oid": "79218b320c5242d1718e86c6f666df2ff759c7ba", "url": "https://github.com/hortonworks/cloudbreak/commit/79218b320c5242d1718e86c6f666df2ff759c7ba", "message": "CB-6256 - Upgrading clusters that cannot be updated due to lack of Salt states", "committedDate": "2020-04-09T16:24:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk1OTk3Mw==", "url": "https://github.com/hortonworks/cloudbreak/pull/7774#discussion_r407959973", "bodyText": "Please add log message here.", "author": "keyki", "createdAt": "2020-04-14T08:32:53Z", "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/upgrade/ClusterUpgradeAvailabilityService.java", "diffHunk": "@@ -87,6 +97,18 @@ public UpgradeOptionsV4Response checkForNotAttachedClusters(StackViewV4Responses\n         return upgradeOptions;\n     }\n \n+    public UpgradeOptionsV4Response checkIfClusterUpgradable(Long workspaceId, String stackName, UpgradeOptionsV4Response upgradeOptions) {\n+\n+        Stack stack = stackService.getByNameInWorkspaceWithLists(stackName, workspaceId).orElseThrow();\n+        GatewayConfig primaryGatewayConfig = gatewayConfigService.getPrimaryGatewayConfig(stack);\n+        try {\n+            hostOrchestrator.checkIfClusterUpgradable(primaryGatewayConfig);\n+        } catch (CloudbreakOrchestratorFailedException e) {\n+            upgradeOptions.appendReason(e.getMessage());", "originalCommit": "79218b320c5242d1718e86c6f666df2ff759c7ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk2MjE0OQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/7774#discussion_r407962149", "bodyText": "Nvm. I see you added below.", "author": "keyki", "createdAt": "2020-04-14T08:36:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk1OTk3Mw=="}], "type": "inlineReview"}, {"oid": "b5a2b81f9436f6374a748d12cb7a3f0d2ae3b2b8", "url": "https://github.com/hortonworks/cloudbreak/commit/b5a2b81f9436f6374a748d12cb7a3f0d2ae3b2b8", "message": "CB-6256 - Upgrading clusters that cannot be updated due to lack of Salt states", "committedDate": "2020-04-14T09:58:32Z", "type": "commit"}, {"oid": "b5a2b81f9436f6374a748d12cb7a3f0d2ae3b2b8", "url": "https://github.com/hortonworks/cloudbreak/commit/b5a2b81f9436f6374a748d12cb7a3f0d2ae3b2b8", "message": "CB-6256 - Upgrading clusters that cannot be updated due to lack of Salt states", "committedDate": "2020-04-14T09:58:32Z", "type": "forcePushed"}]}