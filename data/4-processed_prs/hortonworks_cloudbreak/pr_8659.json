{"pr_number": 8659, "pr_title": "CB-8189 Adding new SDX Medium Duty config.", "pr_createdAt": "2020-07-28T22:41:42Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8659", "timeline": [{"oid": "3165bc32a3eaef8122299c2074e666d546207f97", "url": "https://github.com/hortonworks/cloudbreak/commit/3165bc32a3eaef8122299c2074e666d546207f97", "message": "CB-8189 Adding new SDX Medium Duty config.\n\nThis reworks the SDX Medium Duty HA into a new shape and configuration.\nOlder MDHA blueprints are removed.", "committedDate": "2020-07-29T15:52:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU4MzcxMQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8659#discussion_r462583711", "bodyText": "Should we indicate that this a medium-duty-ha-enabled-datalake?", "author": "kmanamcheri", "createdAt": "2020-07-29T20:56:54Z", "path": "core/src/main/resources/defaults/blueprints/cdp-sdx-medium-ha-722.bp", "diffHunk": "@@ -2,64 +2,143 @@\n   \"tags\": {\n     \"shared_services_ready\": true\n   },\n-  \"description\": \"7.2.2 - SDX-HA template with Atlas, HMS, Ranger and other services they are dependent on. Services like HDFS, HBASE have HA\",\n+  \"description\": \"7.2.2 - SDX template with Atlas, HMS, Ranger and other services they are dependent on\",\n   \"blueprint\": {\n     \"cdhVersion\": \"7.2.2\",\n-    \"displayName\": \"ha-datalake\",\n+    \"displayName\": \"datalake\",", "originalCommit": "3165bc32a3eaef8122299c2074e666d546207f97", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU4Mzg2MA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8659#discussion_r462583860", "bodyText": "We should indicate somewhere that this is medium duty HA enabled.", "author": "kmanamcheri", "createdAt": "2020-07-29T20:57:12Z", "path": "core/src/main/resources/defaults/blueprints/cdp-sdx-medium-ha-722.bp", "diffHunk": "@@ -2,64 +2,143 @@\n   \"tags\": {\n     \"shared_services_ready\": true\n   },\n-  \"description\": \"7.2.2 - SDX-HA template with Atlas, HMS, Ranger and other services they are dependent on. Services like HDFS, HBASE have HA\",\n+  \"description\": \"7.2.2 - SDX template with Atlas, HMS, Ranger and other services they are dependent on\",", "originalCommit": "3165bc32a3eaef8122299c2074e666d546207f97", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU4NTYxOA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8659#discussion_r462585618", "bodyText": "Is there a checks and balances on how can someone use this? I see that there is a 7.2.2 - SDX Medium Duty is on here. Does this mean in prod I can actually spin up a medium duty data lake? If not, where is the check being done?\nI know that in UI this is being filtered and only the Light Duty ones are shown. I guess my question is where is the config which lists what are the prod-ready ones?", "author": "kmanamcheri", "createdAt": "2020-07-29T21:00:16Z", "path": "core/src/main/resources/application.yml", "diffHunk": "@@ -285,14 +283,12 @@ cb:\n         7.2.0 - Real-time Data Mart: Apache Impala, Hue, Apache Kudu, Apache Spark=cdp-rt-data-mart-720;\n         7.2.0 - Operational Database: Apache HBase, Phoenix=cdp-opdb-720;\n         7.2.0 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-720;\n-        7.2.0 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha-720;\n         7.2.0 - Streams Messaging Heavy Duty: Apache Kafka, Schema Registry, Streams Messaging Manager=cdp-streaming-720;\n         7.2.0 - Streams Messaging Light Duty: Apache Kafka, Schema Registry, Streams Messaging Manager=cdp-streaming-small-720;\n         7.2.0 - Flow Management Light Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-small-720;\n         7.2.0 - Flow Management Heavy Duty with Apache NiFi, Apache NiFi Registry=cdp-flow-management-720;\n         7.2.0 - Data Discovery and Exploration=cdp-dde-720;\n         7.2.1 - SDX Light Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-721;\n-        7.2.1 - SDX Medium Duty: Apache Hive Metastore, Apache Ranger, Apache Atlas=cdp-sdx-medium-ha-721;", "originalCommit": "3165bc32a3eaef8122299c2074e666d546207f97", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA5ODIyOA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8659#discussion_r463098228", "bodyText": "I don't believe the config here dictates when something is production ready or not.  We have to use entitlements for that.  CB-8188 will enforce the entitlement for creating a medium duty datalake.", "author": "frozenwizard", "createdAt": "2020-07-30T15:52:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU4NTYxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIwNjU5MA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8659#discussion_r463206590", "bodyText": "Ok sounds good.", "author": "kmanamcheri", "createdAt": "2020-07-30T18:58:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU4NTYxOA=="}], "type": "inlineReview"}, {"oid": "eaba9371c5a0e91cb8f67f0bee1a41627e871c6b", "url": "https://github.com/hortonworks/cloudbreak/commit/eaba9371c5a0e91cb8f67f0bee1a41627e871c6b", "message": "CB-8189 Adding new SDX Medium Duty config.\n\nThis reworks the SDX Medium Duty HA into a new shape and configuration.\nOlder MDHA blueprints are removed.", "committedDate": "2020-07-30T21:34:23Z", "type": "forcePushed"}, {"oid": "ed08cb92e096ff8f84a9f3cbfdde4091a905b1aa", "url": "https://github.com/hortonworks/cloudbreak/commit/ed08cb92e096ff8f84a9f3cbfdde4091a905b1aa", "message": "CB-8189 Adding new SDX Medium Duty config.\n\nThis reworks the SDX Medium Duty HA into a new shape and configuration.\nOlder MDHA blueprints are removed.", "committedDate": "2020-07-31T17:26:38Z", "type": "commit"}, {"oid": "ed08cb92e096ff8f84a9f3cbfdde4091a905b1aa", "url": "https://github.com/hortonworks/cloudbreak/commit/ed08cb92e096ff8f84a9f3cbfdde4091a905b1aa", "message": "CB-8189 Adding new SDX Medium Duty config.\n\nThis reworks the SDX Medium Duty HA into a new shape and configuration.\nOlder MDHA blueprints are removed.", "committedDate": "2020-07-31T17:26:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1MjQ3OQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8659#discussion_r463752479", "bodyText": "I realized that IDBroker does have client-side load balancing. Can we leave this at 2 to enable that?", "author": "kmanamcheri", "createdAt": "2020-07-31T17:59:28Z", "path": "datalake/src/main/resources/runtime/7.2.2/aws/medium_duty_ha.json", "diffHunk": "@@ -83,7 +63,7 @@\n           \"size\": 50\n         }\n       },\n-      \"nodeCount\": 2,", "originalCommit": "ed08cb92e096ff8f84a9f3cbfdde4091a905b1aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc4NzE3OA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8659#discussion_r463787178", "bodyText": "This isn't something we have verified.  We can add this in later.", "author": "frozenwizard", "createdAt": "2020-07-31T19:18:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1MjQ3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzgxMzQ5MQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8659#discussion_r463813491", "bodyText": "Also RDC has issues when spinning up a datahub with 2 nodes of idbroker.", "author": "frozenwizard", "createdAt": "2020-07-31T20:12:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzc1MjQ3OQ=="}], "type": "inlineReview"}, {"oid": "e425788e7bf15d392573b30f5ed8c1bfe30825b9", "url": "https://github.com/hortonworks/cloudbreak/commit/e425788e7bf15d392573b30f5ed8c1bfe30825b9", "message": "CB-8189 Adding new SDX Medium Duty config.\n\nThis reworks the SDX Medium Duty HA into a new shape and configuration.", "committedDate": "2020-07-31T19:16:52Z", "type": "forcePushed"}, {"oid": "ed08cb92e096ff8f84a9f3cbfdde4091a905b1aa", "url": "https://github.com/hortonworks/cloudbreak/commit/ed08cb92e096ff8f84a9f3cbfdde4091a905b1aa", "message": "CB-8189 Adding new SDX Medium Duty config.\n\nThis reworks the SDX Medium Duty HA into a new shape and configuration.\nOlder MDHA blueprints are removed.", "committedDate": "2020-07-31T17:26:38Z", "type": "forcePushed"}]}