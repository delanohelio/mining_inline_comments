{"pr_number": 7675, "pr_title": "CB-6318 - Image change image should log progress", "pr_createdAt": "2020-03-27T17:25:48Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7675", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTYyMjgzNA==", "url": "https://github.com/hortonworks/cloudbreak/pull/7675#discussion_r399622834", "bodyText": "why not log anyway?", "author": "lacikaaa", "createdAt": "2020-03-28T05:33:04Z", "path": "core/src/main/java/com/sequenceiq/cloudbreak/core/flow2/stack/image/update/StackImageUpdateService.java", "diffHunk": "@@ -213,8 +213,25 @@ public boolean isValidImage(Stack stack, String newImageId, String imageCatalogN\n             try {\n                 Image currentImage = getCurrentImage(stack);\n                 StatedImage newImage = getNewImage(newImageId, imageCatalogName, imageCatalogUrl, currentImage);\n-                return isCloudPlatformMatches(stack, newImage) && isOsVersionsMatch(currentImage, newImage) && isStackMatchIfPrewarmed(stack, newImage)\n-                        && checkPackageVersions(stack, newImage).getStatus() == EventStatus.OK;\n+                boolean cloudPlatformMatches = isCloudPlatformMatches(stack, newImage);\n+                boolean osVersionsMatch = isOsVersionsMatch(currentImage, newImage);\n+                boolean stackMatchIfPrewarmed = isStackMatchIfPrewarmed(stack, newImage);\n+                CheckResult status = checkPackageVersions(stack, newImage);\n+                boolean aggregatedValidationResult = cloudPlatformMatches && osVersionsMatch && stackMatchIfPrewarmed\n+                        && status.getStatus() == EventStatus.OK;\n+                if (!aggregatedValidationResult) {", "originalCommit": "28e585d0bfc267e73ddf660b847a32d8797edf39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY4NzI5NQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/7675#discussion_r399687295", "bodyText": "Because it takes up quite some log-space to log the successful entries, too, with no real benefit.", "author": "pdarvasi", "createdAt": "2020-03-28T17:26:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTYyMjgzNA=="}], "type": "inlineReview"}, {"oid": "eba777a32184b84b67425a065c4d493a746359f5", "url": "https://github.com/hortonworks/cloudbreak/commit/eba777a32184b84b67425a065c4d493a746359f5", "message": "CB-6318 - Image change image should log progress", "committedDate": "2020-03-30T09:52:00Z", "type": "commit"}, {"oid": "eba777a32184b84b67425a065c4d493a746359f5", "url": "https://github.com/hortonworks/cloudbreak/commit/eba777a32184b84b67425a065c4d493a746359f5", "message": "CB-6318 - Image change image should log progress", "committedDate": "2020-03-30T09:52:00Z", "type": "forcePushed"}]}