{"pr_number": 8653, "pr_title": "CB-8136 Change PlatformResourceController to use environmentCrn", "pr_createdAt": "2020-07-28T05:15:12Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8653", "timeline": [{"oid": "583ff8cd3b648e8f9d65ed1bd2d25cece8a05920", "url": "https://github.com/hortonworks/cloudbreak/commit/583ff8cd3b648e8f9d65ed1bd2d25cece8a05920", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-07-28T09:26:50Z", "type": "forcePushed"}, {"oid": "66e337db645f5e19300d56a0663426afc167d230", "url": "https://github.com/hortonworks/cloudbreak/commit/66e337db645f5e19300d56a0663426afc167d230", "message": "Merge pull request #8516 from hortonworks/CB-7826\n\nCB-7826 - Improve CB repository readme with Contribution pipeline", "committedDate": "2020-07-28T13:29:26Z", "type": "forcePushed"}, {"oid": "00d6647b8ebc3d0862ed90f90e136aa122d8eec9", "url": "https://github.com/hortonworks/cloudbreak/commit/00d6647b8ebc3d0862ed90f90e136aa122d8eec9", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-07-28T13:44:24Z", "type": "forcePushed"}, {"oid": "8c8cd6562d172282b6a778c33c62271e77a5cf7c", "url": "https://github.com/hortonworks/cloudbreak/commit/8c8cd6562d172282b6a778c33c62271e77a5cf7c", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-07-28T14:29:04Z", "type": "forcePushed"}, {"oid": "8be9cd36ff47d19d225fdd461c5b817a88435804", "url": "https://github.com/hortonworks/cloudbreak/commit/8be9cd36ff47d19d225fdd461c5b817a88435804", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-07-31T06:15:09Z", "type": "forcePushed"}, {"oid": "4e8f8f3a0577bc0fe74fafb394059c52147d1007", "url": "https://github.com/hortonworks/cloudbreak/commit/4e8f8f3a0577bc0fe74fafb394059c52147d1007", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-08-03T10:34:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM1MzU1NA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8653#discussion_r464353554", "bodyText": "Aren't these (region, platformVariant, availabilityZone) redundant from environment perspective?", "author": "lnardai", "createdAt": "2020-08-03T11:26:20Z", "path": "environment-api/src/main/java/com/sequenceiq/environment/api/v1/platformresource/EnvironmentPlatformResourceEndpoint.java", "diffHunk": "@@ -0,0 +1,163 @@\n+package com.sequenceiq.environment.api.v1.platformresource;\n+\n+import static com.sequenceiq.environment.api.doc.ModelDescriptions.CONNECTOR_NOTES;\n+\n+import javax.validation.constraints.NotEmpty;\n+import javax.ws.rs.Consumes;\n+import javax.ws.rs.DefaultValue;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.Path;\n+import javax.ws.rs.Produces;\n+import javax.ws.rs.QueryParam;\n+import javax.ws.rs.core.MediaType;\n+\n+import com.sequenceiq.cloudbreak.jerseyclient.RetryAndMetrics;\n+import com.sequenceiq.common.api.type.CdpResourceType;\n+import com.sequenceiq.environment.api.v1.platformresource.PlatformResourceModelDescription.OpEnvDescription;\n+import com.sequenceiq.environment.api.v1.platformresource.model.AccessConfigTypeQueryParam;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformAccessConfigsResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformEncryptionKeysResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformGatewaysResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformIpPoolsResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformNetworksResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformNoSqlTablesResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformResourceGroupsResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformSecurityGroupsResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformSshKeysResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.PlatformVmtypesResponse;\n+import com.sequenceiq.environment.api.v1.platformresource.model.RegionResponse;\n+\n+import io.swagger.annotations.Api;\n+import io.swagger.annotations.ApiOperation;\n+\n+@RetryAndMetrics\n+@Path(\"/v1/env/platform_resources\")\n+@Consumes(MediaType.APPLICATION_JSON)\n+@Api(value = \"/v1/env/platform_resources\", description = PlatformResourceModelDescription.CONNECTOR_V1_DESCRIPTION, protocols = \"http,https\",\n+        consumes = MediaType.APPLICATION_JSON)\n+public interface EnvironmentPlatformResourceEndpoint {\n+\n+    @GET\n+    @Path(\"machine_types\")\n+    @Produces(MediaType.APPLICATION_JSON)\n+    @ApiOperation(value = OpEnvDescription.GET_VMTYPES_BY_CREDENTIAL, produces = MediaType.APPLICATION_JSON, notes = CONNECTOR_NOTES,\n+            nickname = \"getVmTypesByCredentialByEnv\")\n+    PlatformVmtypesResponse getVmTypesByCredential(\n+            @QueryParam(\"environmentCrn\") @NotEmpty String environmentCrn,\n+            @QueryParam(\"region\") String region,\n+            @QueryParam(\"platformVariant\") String platformVariant,\n+            @QueryParam(\"availabilityZone\") String availabilityZone,", "originalCommit": "4e8f8f3a0577bc0fe74fafb394059c52147d1007", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM1NTYxNw==", "url": "https://github.com/hortonworks/cloudbreak/pull/8653#discussion_r464355617", "bodyText": "Possibly, to be honest, I didn't checked, only duplicated the API with environment CRN change, we can spend more time to check it and make it easier to use", "author": "horadla23", "createdAt": "2020-08-03T11:31:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM1MzU1NA=="}], "type": "inlineReview"}, {"oid": "6cd6ba1864f4639b31c2b9850b963bf1233223ee", "url": "https://github.com/hortonworks/cloudbreak/commit/6cd6ba1864f4639b31c2b9850b963bf1233223ee", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-08-03T12:12:06Z", "type": "forcePushed"}, {"oid": "4dd85b710f8da646442cec9df65d301f364af0b1", "url": "https://github.com/hortonworks/cloudbreak/commit/4dd85b710f8da646442cec9df65d301f364af0b1", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-08-03T14:57:06Z", "type": "forcePushed"}, {"oid": "c74e81b85f2b6587e179c1f8a09c1078ed1ac199", "url": "https://github.com/hortonworks/cloudbreak/commit/c74e81b85f2b6587e179c1f8a09c1078ed1ac199", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-08-03T15:31:44Z", "type": "forcePushed"}, {"oid": "7356b7e807a4195337d7c24c94017150669d25a6", "url": "https://github.com/hortonworks/cloudbreak/commit/7356b7e807a4195337d7c24c94017150669d25a6", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-08-03T15:46:47Z", "type": "forcePushed"}, {"oid": "5fb76da24fb07cc85aa706422dc2130dd921e77c", "url": "https://github.com/hortonworks/cloudbreak/commit/5fb76da24fb07cc85aa706422dc2130dd921e77c", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-08-03T16:01:34Z", "type": "forcePushed"}, {"oid": "b8413a590058c36dc7c8cf0b4b9e60a599be4615", "url": "https://github.com/hortonworks/cloudbreak/commit/b8413a590058c36dc7c8cf0b4b9e60a599be4615", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-08-04T04:56:57Z", "type": "forcePushed"}, {"oid": "420c77a1ea98e20da03a6b7c9a3afd80a0b56440", "url": "https://github.com/hortonworks/cloudbreak/commit/420c77a1ea98e20da03a6b7c9a3afd80a0b56440", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-08-04T05:43:09Z", "type": "commit"}, {"oid": "420c77a1ea98e20da03a6b7c9a3afd80a0b56440", "url": "https://github.com/hortonworks/cloudbreak/commit/420c77a1ea98e20da03a6b7c9a3afd80a0b56440", "message": "CB-8136 Change PlatformResourceController to use environmentCrn", "committedDate": "2020-08-04T05:43:09Z", "type": "forcePushed"}]}