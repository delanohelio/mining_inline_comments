{"pr_number": 8605, "pr_title": "CB-7930 Verify credential on environment level", "pr_createdAt": "2020-07-21T07:05:49Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8605", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg4NjQ2OQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r457886469", "bodyText": "pls rename it to verifyCredentialByCrn (or verifyCredentialByEnvCrn) to make it easier to understand, also pls fix nickname in the annotation", "author": "horadla23", "createdAt": "2020-07-21T07:16:45Z", "path": "environment-api/src/main/java/com/sequenceiq/environment/api/v1/environment/endpoint/EnvironmentEndpoint.java", "diffHunk": "@@ -184,6 +185,13 @@ SimpleEnvironmentResponses deleteMultipleByCrns(Set<String> crns,\n             nickname = \"stopEnvironmentByCrnV1\")\n     void postStopByCrn(@PathParam(\"crn\") String crn);\n \n+    @GET\n+    @Path(\"/crn/{crn}/verify\")\n+    @Produces(MediaType.APPLICATION_JSON)\n+    @ApiOperation(value = EnvironmentOpDescription.VERIFY_BY_CRN, notes = ENVIRONMENT_NOTES,\n+            nickname = \"verifyEnvironmentByCrn\", httpMethod = \"GET\")\n+    CredentialResponse verifyByCrn(@PathParam(\"crn\") String crn);", "originalCommit": "94e48e5f8a2c2442abef06ebe964fcb999b55060", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg5NzI4Mw==", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r457897283", "bodyText": "Yes it makes sense to make it more specific.", "author": "foldik", "createdAt": "2020-07-21T07:37:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg4NjQ2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzkwMDQ3Ng==", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r457900476", "bodyText": "also maybe it is worth to change the path as well, because now based on path i can think that we are verifying the environment itself", "author": "horadla23", "createdAt": "2020-07-21T07:43:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg4NjQ2OQ=="}], "type": "inlineReview"}, {"oid": "f4d75d49d6343561992c782f45569637cce64f08", "url": "https://github.com/hortonworks/cloudbreak/commit/f4d75d49d6343561992c782f45569637cce64f08", "message": "CB-7930 Verify credential on environment level", "committedDate": "2020-07-21T07:59:41Z", "type": "forcePushed"}, {"oid": "c4fb3f5a743c7091cab9a17db716ca864959e066", "url": "https://github.com/hortonworks/cloudbreak/commit/c4fb3f5a743c7091cab9a17db716ca864959e066", "message": "CB-7930 Verify credential on environment level", "committedDate": "2020-07-21T08:05:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUwMTI4OQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r459501289", "bodyText": "do we need this for the /name endpoint ? most of the time we have both /crn and /name", "author": "doktoric", "createdAt": "2020-07-23T14:40:34Z", "path": "environment/src/main/java/com/sequenceiq/environment/environment/v1/EnvironmentController.java", "diffHunk": "@@ -268,6 +274,15 @@ public void postStopByCrn(@ResourceCrn @TenantAwareParam String crn) {\n         environmentStopService.stopByCrn(crn);\n     }\n \n+    @Override\n+    @CheckPermissionByResourceCrn(action = AuthorizationResourceAction.DESCRIBE_ENVIRONMENT)\n+    public CredentialResponse verifyCredentialByEnvCrn(@ResourceCrn String crn) {", "originalCommit": "c4fb3f5a743c7091cab9a17db716ca864959e066", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUxNDA3OA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8605#discussion_r459514078", "bodyText": "We don't need. UI will use the version which works with crn. I can add the /name version for consistency and usability reason if I have to.", "author": "foldik", "createdAt": "2020-07-23T14:57:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUwMTI4OQ=="}], "type": "inlineReview"}, {"oid": "456040d71006fbe93a7c46618b1d5e0a51c06a75", "url": "https://github.com/hortonworks/cloudbreak/commit/456040d71006fbe93a7c46618b1d5e0a51c06a75", "message": "CB-7930 Verify credential on environment level through env API", "committedDate": "2020-07-24T08:44:39Z", "type": "commit"}, {"oid": "456040d71006fbe93a7c46618b1d5e0a51c06a75", "url": "https://github.com/hortonworks/cloudbreak/commit/456040d71006fbe93a7c46618b1d5e0a51c06a75", "message": "CB-7930 Verify credential on environment level through env API", "committedDate": "2020-07-24T08:44:39Z", "type": "forcePushed"}]}