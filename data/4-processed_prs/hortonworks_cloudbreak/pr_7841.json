{"pr_number": 7841, "pr_title": "CB-6620 improve pkg.installed states", "pr_createdAt": "2020-04-20T15:48:03Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7841", "timeline": [{"oid": "7f75536d2b079507c8d398dee6d62f7456e88989", "url": "https://github.com/hortonworks/cloudbreak/commit/7f75536d2b079507c8d398dee6d62f7456e88989", "message": "CB-6620 improve pkg.installed states", "committedDate": "2020-04-20T15:43:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ5NzUwMg==", "url": "https://github.com/hortonworks/cloudbreak/pull/7841#discussion_r411497502", "bodyText": "I am not sure whether it matters but it breaks ubuntu and debian", "author": "akanto", "createdAt": "2020-04-20T16:00:31Z", "path": "orchestrator-salt/src/main/resources/salt/salt/cloudera/agent/init.sls", "diffHunk": "@@ -8,6 +8,8 @@ install-cloudera-manager-agent:\n     - pkgs:\n       - cloudera-manager-daemons\n       - cloudera-manager-agent\n+    - unless:\n+      - rpm -q cloudera-manager-daemons cloudera-manager-agent", "originalCommit": "7f75536d2b079507c8d398dee6d62f7456e88989", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTUxNDc2NQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/7841#discussion_r411514765", "bodyText": "The unless execution will fail on ubuntu (due to lack of rpm command), which is going to make the state execute.", "author": "keyki", "createdAt": "2020-04-20T16:23:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ5NzUwMg=="}], "type": "inlineReview"}]}