{"pr_number": 8909, "pr_title": "CB-8620 added minimal set of permission to audit credential policy. D\u2026", "pr_createdAt": "2020-09-02T10:05:22Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8909", "timeline": [{"oid": "b56715007ba48bc31ed7285a6aaf65ab751a9e27", "url": "https://github.com/hortonworks/cloudbreak/commit/b56715007ba48bc31ed7285a6aaf65ab751a9e27", "message": "CB-8620 added minimal set of permission to audit credential policy. Describe region is required because of the validation.", "committedDate": "2020-09-02T10:01:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE2NTYxMQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/8909#discussion_r482165611", "bodyText": "I don't have this in my own policy, and audit archiving is working fine. I think this is a relatively harmless permission, though, so if you have reason to believe it is necessary, it is fine to leave it in.", "author": "jadair-cloudera", "createdAt": "2020-09-02T15:32:19Z", "path": "cloud-aws/src/main/resources/definitions/aws-audit-policy.json", "diffHunk": "@@ -1,24 +1,38 @@\n {\n+  \"Version\": \"2012-10-17\",\n   \"Statement\": [\n     {\n-      \"Sid\": \"SimpleStorageServiceFull\",\n+      \"Effect\": \"Allow\",\n       \"Action\": [\n-        \"s3:AbortMultipartUpload\",\n-        \"s3:CreateBucket\",\n-        \"s3:DeleteObject\",\n-        \"s3:GetObject\",\n-        \"s3:HeadBucket\",\n         \"s3:ListBucket\",\n-        \"s3:GetBucketLocation\",\n+        \"s3:ListBucketMultipartUploads\",\n+        \"s3:GetBucketLocation\"\n+      ],\n+      \"Resource\": [\n+        \"arn:aws:s3:::<your-bucket-name-for-audit-archiving>\"\n+      ]\n+    },\n+    {\n+      \"Effect\": \"Allow\",\n+      \"Action\": [\n+        \"s3:ListMultipartUploadParts\",\n+        \"s3:GetObject\",\n+        \"s3:GetObjectVersion\",\n         \"s3:PutObject\",\n-        \"s3:DeleteBucket\",\n-        \"s3:PutBucketPublicAccessBlock\"\n+        \"s3:DeleteObject\"\n+      ],\n+      \"Resource\": [\n+        \"arn:aws:s3:::<your-bucket-name-for-audit-archiving>/*\"\n+      ]\n+    },\n+    {\n+      \"Action\": [\n+        \"ec2:DescribeRegions\"", "originalCommit": "b56715007ba48bc31ed7285a6aaf65ab751a9e27", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE2NzM0Nw==", "url": "https://github.com/hortonworks/cloudbreak/pull/8909#discussion_r482167347", "bodyText": "this is for validate the credential on our side", "author": "doktoric", "createdAt": "2020-09-02T15:34:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjE2NTYxMQ=="}], "type": "inlineReview"}]}