{"pr_number": 7015, "pr_title": "CB-3762 Error when passing an extra '/' at end of cloud storage path", "pr_createdAt": "2020-01-06T10:42:44Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/7015", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1Mzg5MQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/7015#discussion_r363253891", "bodyText": "method content could be changed to Stringutils.substringBeforeLast().", "author": "gergopapi2", "createdAt": "2020-01-06T11:19:13Z", "path": "datalake/src/main/java/com/sequenceiq/datalake/service/sdx/SdxService.java", "diffHunk": "@@ -418,4 +420,11 @@ private String getAccountIdFromCrn(String userCrn) {\n     private DetailedEnvironmentResponse getEnvironment(SdxClusterRequest sdxClusterRequest) {\n         return environmentClientService.getByName(sdxClusterRequest.getEnvironment());\n     }\n+\n+    private String trimBaseLocation(String baseLocation) {\n+        if (baseLocation.endsWith(\"/\")) {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1NzE0Mw==", "url": "https://github.com/hortonworks/cloudbreak/pull/7015#discussion_r363257143", "bodyText": "Again, bullshit! :D", "author": "gergopapi2", "createdAt": "2020-01-06T11:30:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1Mzg5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI2MjMwNw==", "url": "https://github.com/hortonworks/cloudbreak/pull/7015#discussion_r363262307", "bodyText": "The following base locations will produces wrong results:\n\ns3a://some/dir ->s3a://some\ns3a://some -> s3a:/\n\nThis function only trims the last / if exist otherwise return the unmodified string.", "author": "topolyai5", "createdAt": "2020-01-06T11:47:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1Mzg5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1Mzk3OA==", "url": "https://github.com/hortonworks/cloudbreak/pull/7015#discussion_r363253978", "bodyText": "method content could be changed to Stringutils.substringBeforeLast().", "author": "gergopapi2", "createdAt": "2020-01-06T11:19:32Z", "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/blueprint/BlueprintService.java", "diffHunk": "@@ -438,4 +438,10 @@ private String createCRN(String accountId) {\n                 .toString();\n     }\n \n+    private String trimBaseLocation(String baseLocation) {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1NzA0MA==", "url": "https://github.com/hortonworks/cloudbreak/pull/7015#discussion_r363257040", "bodyText": "Sorry, that's bullshit I wrote :D", "author": "gergopapi2", "createdAt": "2020-01-06T11:29:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1Mzk3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1ODI4MQ==", "url": "https://github.com/hortonworks/cloudbreak/pull/7015#discussion_r363258281", "bodyText": "StringUtils.stripEnd() could be used.", "author": "gergopapi2", "createdAt": "2020-01-06T11:33:36Z", "path": "datalake/src/main/java/com/sequenceiq/datalake/service/sdx/SdxService.java", "diffHunk": "@@ -418,4 +420,11 @@ private String getAccountIdFromCrn(String userCrn) {\n     private DetailedEnvironmentResponse getEnvironment(SdxClusterRequest sdxClusterRequest) {\n         return environmentClientService.getByName(sdxClusterRequest.getEnvironment());\n     }\n+\n+    private String trimBaseLocation(String baseLocation) {", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1ODQxOA==", "url": "https://github.com/hortonworks/cloudbreak/pull/7015#discussion_r363258418", "bodyText": "StringUtils.stripEnd() could be used.", "author": "gergopapi2", "createdAt": "2020-01-06T11:33:57Z", "path": "core/src/main/java/com/sequenceiq/cloudbreak/service/blueprint/BlueprintService.java", "diffHunk": "@@ -438,4 +438,10 @@ private String createCRN(String accountId) {\n                 .toString();\n     }\n \n+    private String trimBaseLocation(String baseLocation) {", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "24adb35235b522798b559d63dca1679708c3f8b7", "url": "https://github.com/hortonworks/cloudbreak/commit/24adb35235b522798b559d63dca1679708c3f8b7", "message": "CB-3762 Error when passing an extra '/' at end of cloud storage path", "committedDate": "2020-01-06T12:34:13Z", "type": "commit"}, {"oid": "24adb35235b522798b559d63dca1679708c3f8b7", "url": "https://github.com/hortonworks/cloudbreak/commit/24adb35235b522798b559d63dca1679708c3f8b7", "message": "CB-3762 Error when passing an extra '/' at end of cloud storage path", "committedDate": "2020-01-06T12:34:13Z", "type": "forcePushed"}]}