{"pr_number": 8513, "pr_title": "DISTX-453 Expose HBase REST API in the OpDB DataHub", "pr_createdAt": "2020-07-08T17:56:25Z", "pr_url": "https://github.com/hortonworks/cloudbreak/pull/8513", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw==", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451793993", "bodyText": "is it ok if we remove this?", "author": "doktoric", "createdAt": "2020-07-08T20:02:33Z", "path": "orchestrator-salt/src/main/resources/salt/salt/gateway/config/cm/topology.xml.j2", "diffHunk": "@@ -261,12 +261,6 @@\n                  <value>enabled=true;maxFailoverAttempts=3;failoverSleep=1000</value>\n              </param>\n              {%- endif %}\n-             {% if 'WEBHBASE' in exposed and 'HBASERESTSERVER' in salt['pillar.get']('gateway:location') -%}", "originalCommit": "3db045674a14aab2ec84538ed067e338787499c1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNTM5NA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451915394", "bodyText": "Peter and I had talked about this -- we're not really sure why it was here in the first place.\nThe HBASERESTSERVER doesn't provide a UI. It's meant for programmatic REST access. By that stance, there's no good reason we can think of as to why it would be in the topology.xml.j2 file in addition to the topology-api.xml.j2", "author": "joshelser", "createdAt": "2020-07-09T01:40:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNTQ2MA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451915460", "bodyText": "Not sure if @risdenk happens to know?", "author": "joshelser", "createdAt": "2020-07-09T01:40:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNzEwOA==", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451917108", "bodyText": "I don't know for sure. The history looks like it was added in f22a527. I don't know of any usage of this endpoint from the UI topology.\nbtw if this goes can also remove the webhbase.acl section a little further up.", "author": "risdenk", "createdAt": "2020-07-09T01:46:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEwNjcyNg==", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r452106726", "bodyText": "Nice catch @risdenk ! Removed that parameter too.", "author": "petersomogyi", "createdAt": "2020-07-09T10:02:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTc5Mzk5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNzM3Ng==", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r451917376", "bodyText": "Make sure that CM is setting up HBase REST in a reasonable manner - including requiring SPNEGO on the REST server endpoint. It would be REALLY bad to have it by default be exposed without authentication.", "author": "risdenk", "createdAt": "2020-07-09T01:47:07Z", "path": "core/src/main/resources/defaults/blueprints/cdp-opdb-721.bp", "diffHunk": "@@ -162,7 +162,14 @@\n               \"displayName\": null,\n               \"configs\": [],\n               \"base\": true\n-           }\n+           },\n+          {\n+            \"refName\": \"hbase-HBASERESTSERVER-BASE\",\n+            \"roleType\": \"HBASERESTSERVER\",", "originalCommit": "3db045674a14aab2ec84538ed067e338787499c1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA4NzEzNg==", "url": "https://github.com/hortonworks/cloudbreak/pull/8513#discussion_r452087136", "bodyText": "Configs in CM look correct to me, e.g. hbase.rest.ssl.enabled=true and REST Server TLS/SSL is also enabled.\nMy test cluster is available if you'd like to take a look: https://console.dps.mow-dev.cloudera.com/cloud/workloads/details/psomogyi-aws-rest/events", "author": "petersomogyi", "createdAt": "2020-07-09T09:29:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkxNzM3Ng=="}], "type": "inlineReview"}, {"oid": "7d3b138f82af8df18f4bd60f8a7f966c76ec4b99", "url": "https://github.com/hortonworks/cloudbreak/commit/7d3b138f82af8df18f4bd60f8a7f966c76ec4b99", "message": "DISTX-453 Expose HBase REST API in the OpDB DataHub\n\nAdd HBase REST to OpDB blueprint\nRemove WEBHBASE from cdp-proxy topology\nExtend OpdbServiceEndpointCollectorTest with HBASEREST", "committedDate": "2020-07-10T07:49:30Z", "type": "commit"}, {"oid": "930a6311643bc2bd4703dac8a7fc09bbdca69200", "url": "https://github.com/hortonworks/cloudbreak/commit/930a6311643bc2bd4703dac8a7fc09bbdca69200", "message": "Remove webhbase.acl parameter", "committedDate": "2020-07-10T07:49:30Z", "type": "commit"}, {"oid": "930a6311643bc2bd4703dac8a7fc09bbdca69200", "url": "https://github.com/hortonworks/cloudbreak/commit/930a6311643bc2bd4703dac8a7fc09bbdca69200", "message": "Remove webhbase.acl parameter", "committedDate": "2020-07-10T07:49:30Z", "type": "forcePushed"}]}