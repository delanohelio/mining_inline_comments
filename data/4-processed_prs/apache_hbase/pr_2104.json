{"pr_number": 2104, "pr_title": "HBASE-24740 Enable journal logging for HBase snapshot operation", "pr_createdAt": "2020-07-20T22:09:20Z", "pr_url": "https://github.com/apache/hbase/pull/2104", "timeline": [{"oid": "840cf090dc944e55452c219f2794b00b24a0af61", "url": "https://github.com/apache/hbase/commit/840cf090dc944e55452c219f2794b00b24a0af61", "message": "HBASE-24740 Enable journal logging for HBase snapshot operation", "committedDate": "2020-07-20T22:08:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc0NjM4Mw==", "url": "https://github.com/apache/hbase/pull/2104#discussion_r457746383", "bodyText": "nit: parameterized logging", "author": "bharathv", "createdAt": "2020-07-20T23:23:50Z", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/snapshot/SnapshotManifest.java", "diffHunk": "@@ -478,7 +494,7 @@ public void consolidate() throws IOException {\n       FSTableDescriptors.createTableDescriptorForTableDirectory(workingDirFs, workingDir, htd,\n           false);\n     } else {\n-      LOG.debug(\"Convert to Single Snapshot Manifest\");\n+      LOG.debug(\"Convert to Single Snapshot Manifest for \" + this.desc.getName());", "originalCommit": "840cf090dc944e55452c219f2794b00b24a0af61", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc0NjczMg==", "url": "https://github.com/apache/hbase/pull/2104#discussion_r457746732", "bodyText": "nit: This still requires the isDebugEnabled() guard because ClientSnapshotDescriptionUtils.toString(..) is not a trivial call.", "author": "bharathv", "createdAt": "2020-07-20T23:25:01Z", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotManager.java", "diffHunk": "@@ -654,14 +654,16 @@ private void takeSnapshotInternal(SnapshotDescription snapshot) throws IOExcepti\n     TableName snapshotTable = TableName.valueOf(snapshot.getTable());\n     if (master.getTableStateManager().isTableState(snapshotTable,\n         TableState.State.ENABLED)) {\n-      LOG.debug(\"Table enabled, starting distributed snapshot.\");\n+      LOG.debug(\"Table enabled, starting distributed snapshots for {}\",", "originalCommit": "840cf090dc944e55452c219f2794b00b24a0af61", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzc0NjgwMw==", "url": "https://github.com/apache/hbase/pull/2104#discussion_r457746803", "bodyText": "same as above.", "author": "bharathv", "createdAt": "2020-07-20T23:25:12Z", "path": "hbase-server/src/main/java/org/apache/hadoop/hbase/master/snapshot/SnapshotManager.java", "diffHunk": "@@ -654,14 +654,16 @@ private void takeSnapshotInternal(SnapshotDescription snapshot) throws IOExcepti\n     TableName snapshotTable = TableName.valueOf(snapshot.getTable());\n     if (master.getTableStateManager().isTableState(snapshotTable,\n         TableState.State.ENABLED)) {\n-      LOG.debug(\"Table enabled, starting distributed snapshot.\");\n+      LOG.debug(\"Table enabled, starting distributed snapshots for {}\",\n+        ClientSnapshotDescriptionUtils.toString(snapshot));\n       snapshotEnabledTable(snapshot);\n       LOG.debug(\"Started snapshot: \" + ClientSnapshotDescriptionUtils.toString(snapshot));\n     }\n     // For disabled table, snapshot is created by the master\n     else if (master.getTableStateManager().isTableState(snapshotTable,\n         TableState.State.DISABLED)) {\n-      LOG.debug(\"Table is disabled, running snapshot entirely on master.\");\n+        LOG.debug(\"Table is disabled, running snapshot entirely on master for {}\",", "originalCommit": "840cf090dc944e55452c219f2794b00b24a0af61", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c69be59bf01f8832992b1c505496830ebaf2e365", "url": "https://github.com/apache/hbase/commit/c69be59bf01f8832992b1c505496830ebaf2e365", "message": "Incorporatte review comments", "committedDate": "2020-07-21T00:07:49Z", "type": "commit"}]}