{"pr_number": 1748, "pr_title": "HBASE-22700 (addendum): Clarify ZK session timeout doc", "pr_createdAt": "2020-05-20T17:54:08Z", "pr_url": "https://github.com/apache/hbase/pull/1748", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIxMDY0MA==", "url": "https://github.com/apache/hbase/pull/1748#discussion_r428210640", "bodyText": "Does it make sense to keep the stuff from the brackets?", "author": "HorizonNet", "createdAt": "2020-05-20T18:10:58Z", "path": "src/main/asciidoc/_chapters/schema_design.adoc", "diffHunk": "@@ -1142,7 +1142,10 @@ Disable Nagle\u2019s algorithm. Delayed ACKs can add up to ~200ms to RPC round trip\n Detect regionserver failure as fast as reasonable. Set the following parameters:\n \n * In `hbase-site.xml`, set `zookeeper.session.timeout` to 30 seconds or less to bound failure detection (20-30 seconds is a good start).\n-- Notice: the `sessionTimeout` of zookeeper is limited between 2 times and 20 times the `tickTime`(the basic time unit in milliseconds used by ZooKeeper.the default value is 2000ms.It is used to do heartbeats and the minimum session timeout will be twice the tickTime).", "originalCommit": "5348b0bd1646799280c7822a37cac7bea5229011", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI3MTgzNg==", "url": "https://github.com/apache/hbase/pull/1748#discussion_r428271836", "bodyText": "I've added it back. I removed it because ZK documentation has more details about it but I don't mind to add it here.", "author": "bharathv", "createdAt": "2020-05-20T19:56:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIxMDY0MA=="}], "type": "inlineReview"}, {"oid": "8339ed021035897804dd831e76aab0149af390a4", "url": "https://github.com/apache/hbase/commit/8339ed021035897804dd831e76aab0149af390a4", "message": "HBASE-22700 (addendum): Clarify ZK session timeout doc\n\nThe current wording gives an impression the session timeout range\non the ZK side is forced to be in the range [2 * tickTime, 20 * tickTime].\n\nThis range is configurable on the ZK service side using minSessionTimeout\nand maxSessionTimeout. Clarified that.", "committedDate": "2020-05-20T19:55:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI5MzMwNQ==", "url": "https://github.com/apache/hbase/pull/1748#discussion_r428293305", "bodyText": "You should also explain what minSessionTimeout and maxSessionTimeout offer in alternative.", "author": "apurtell", "createdAt": "2020-05-20T20:38:16Z", "path": "src/main/asciidoc/_chapters/schema_design.adoc", "diffHunk": "@@ -1142,7 +1142,10 @@ Disable Nagle\u2019s algorithm. Delayed ACKs can add up to ~200ms to RPC round trip\n Detect regionserver failure as fast as reasonable. Set the following parameters:\n \n * In `hbase-site.xml`, set `zookeeper.session.timeout` to 30 seconds or less to bound failure detection (20-30 seconds is a good start).\n-- Notice: the `sessionTimeout` of zookeeper is limited between 2 times and 20 times the `tickTime`(the basic time unit in milliseconds used by ZooKeeper.the default value is 2000ms.It is used to do heartbeats and the minimum session timeout will be twice the tickTime).\n+- Note: Zookeeper clients negotiate a session timeout with the server during client init. Server enforces this timeout to be in the\n+range of 2 times `tickTime` and 20 times `tickTime` unless `minSessionTimeout` and `maxSessionTimeout` are configured in the Zookeeper", "originalCommit": "8339ed021035897804dd831e76aab0149af390a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQxNzYxNQ==", "url": "https://github.com/apache/hbase/pull/1748#discussion_r428417615", "bodyText": "Reworded it slightly, LMKWYT.", "author": "bharathv", "createdAt": "2020-05-21T02:54:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI5MzMwNQ=="}], "type": "inlineReview"}, {"oid": "29bfd24da285552e8965b7c5059fe4fac91cc3c6", "url": "https://github.com/apache/hbase/commit/29bfd24da285552e8965b7c5059fe4fac91cc3c6", "message": "HBASE-22700 (addendum): Clarify ZK session timeout doc\n\nThe current wording gives an impression the session timeout range\non the ZK side is forced to be in the range [2 * tickTime, 20 * tickTime].\n\nThis range is configurable on the ZK service side using minSessionTimeout\nand maxSessionTimeout. Clarified that.", "committedDate": "2020-05-21T02:53:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MjMzNw==", "url": "https://github.com/apache/hbase/pull/1748#discussion_r430742337", "bodyText": "What are these? Milliseconds? We have to assume it otherwise, so why not mention it?", "author": "apurtell", "createdAt": "2020-05-26T22:28:46Z", "path": "src/main/asciidoc/_chapters/schema_design.adoc", "diffHunk": "@@ -1142,7 +1142,11 @@ Disable Nagle\u2019s algorithm. Delayed ACKs can add up to ~200ms to RPC round trip\n Detect regionserver failure as fast as reasonable. Set the following parameters:\n \n * In `hbase-site.xml`, set `zookeeper.session.timeout` to 30 seconds or less to bound failure detection (20-30 seconds is a good start).\n-- Notice: the `sessionTimeout` of zookeeper is limited between 2 times and 20 times the `tickTime`(the basic time unit in milliseconds used by ZooKeeper.the default value is 2000ms.It is used to do heartbeats and the minimum session timeout will be twice the tickTime).\n+- Note: Zookeeper clients negotiate a session timeout with the server during client init. Server enforces this timeout to be in the\n+range [`minSessionTimeout`, `maxSessionTimeout`] and both these timeouts are configurable in Zookeeper service configuration.", "originalCommit": "29bfd24da285552e8965b7c5059fe4fac91cc3c6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc4MDk3NA==", "url": "https://github.com/apache/hbase/pull/1748#discussion_r430780974", "bodyText": "Added the time unit.", "author": "bharathv", "createdAt": "2020-05-27T00:34:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MjMzNw=="}], "type": "inlineReview"}, {"oid": "1553b3d0bddbdf78d6f0e4aee868f3a4fa715724", "url": "https://github.com/apache/hbase/commit/1553b3d0bddbdf78d6f0e4aee868f3a4fa715724", "message": "HBASE-22700 (addendum): Clarify ZK session timeout doc\n\nThe current wording gives an impression the session timeout range\non the ZK side is forced to be in the range [2 * tickTime, 20 * tickTime].\n\nThis range is configurable on the ZK service side using minSessionTimeout\nand maxSessionTimeout. Clarified that.", "committedDate": "2020-05-27T00:33:09Z", "type": "commit"}, {"oid": "1553b3d0bddbdf78d6f0e4aee868f3a4fa715724", "url": "https://github.com/apache/hbase/commit/1553b3d0bddbdf78d6f0e4aee868f3a4fa715724", "message": "HBASE-22700 (addendum): Clarify ZK session timeout doc\n\nThe current wording gives an impression the session timeout range\non the ZK side is forced to be in the range [2 * tickTime, 20 * tickTime].\n\nThis range is configurable on the ZK service side using minSessionTimeout\nand maxSessionTimeout. Clarified that.", "committedDate": "2020-05-27T00:33:09Z", "type": "forcePushed"}]}