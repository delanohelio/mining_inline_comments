{"pr_number": 1207, "pr_title": "HBASE-23892 SecureTestCluster should allow its subclasses to pass their Class reference on HBaseKerberosUtils.setSSLConfiguration", "pr_createdAt": "2020-02-25T18:02:58Z", "pr_url": "https://github.com/apache/hbase/pull/1207", "timeline": [{"oid": "a1fb56e4f007dc0dd83147a1ca69ab6f8d22ce52", "url": "https://github.com/apache/hbase/commit/a1fb56e4f007dc0dd83147a1ca69ab6f8d22ce52", "message": "HBASE-23892 KeyStoreTestUtil.getClasspathDir NPE when running UT extends SecureTestCluster and hbase-server is referred as a jar file.", "committedDate": "2020-02-25T17:54:41Z", "type": "commit"}, {"oid": "cab460257e72243b42fd0c818c1d95c8a05a643b", "url": "https://github.com/apache/hbase/commit/cab460257e72243b42fd0c818c1d95c8a05a643b", "message": "Defining a protected Class variable in SecureTestCluster so that downstream implementations can override it with its own values; Reverted previous changes from KeystoreTestUtil", "committedDate": "2020-02-27T11:13:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ4OTA4Mg==", "url": "https://github.com/apache/hbase/pull/1207#discussion_r385489082", "bodyText": "Make a setter for this as a static method and you have my +1 :)", "author": "joshelser", "createdAt": "2020-02-28T03:18:20Z", "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/security/token/SecureTestCluster.java", "diffHunk": "@@ -52,6 +52,12 @@\n \n   private static String HTTP_PRINCIPAL;\n \n+  //When extending SecureTestCluster on downstream projects that refer SecureTestCluster via\n+  //hbase-server jar, we need to provide a way for the implementation to refer to its own class\n+  //definition, so that KeyStoreTestUtil.getClasspathDir can resolve a valid path in the local FS\n+  //to place required SSL config files.\n+  protected static Class testRunner = SecureTestCluster.class;", "originalCommit": "cab460257e72243b42fd0c818c1d95c8a05a643b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "64a638675e72e45ffb4e45945527b290f62bff1d", "url": "https://github.com/apache/hbase/commit/64a638675e72e45ffb4e45945527b290f62bff1d", "message": "Adding setter method and making the attribute private.", "committedDate": "2020-02-28T10:21:32Z", "type": "commit"}, {"oid": "cc85703925ba4b33db2800f9f3585546f34661eb", "url": "https://github.com/apache/hbase/commit/cc85703925ba4b33db2800f9f3585546f34661eb", "message": "Resetting the static class reference to 'SecureTestCluster' one on the teardown method", "committedDate": "2020-02-28T10:24:47Z", "type": "commit"}, {"oid": "6a91a412a3c9f10e80a031cfe317d61779ff19f0", "url": "https://github.com/apache/hbase/commit/6a91a412a3c9f10e80a031cfe317d61779ff19f0", "message": "Resetting the static class reference to 'SecureTestCluster' one on the teardown method, via setter method.", "committedDate": "2020-02-28T10:26:17Z", "type": "commit"}]}