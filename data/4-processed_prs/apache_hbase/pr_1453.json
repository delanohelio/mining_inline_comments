{"pr_number": 1453, "pr_title": "HBASE-24132 Upgrade to Apache ZooKeeper 3.5.7", "pr_createdAt": "2020-04-08T02:48:47Z", "pr_url": "https://github.com/apache/hbase/pull/1453", "timeline": [{"oid": "973675308c1e02d55da91340278f541cb0194c5e", "url": "https://github.com/apache/hbase/commit/973675308c1e02d55da91340278f541cb0194c5e", "message": "HBASE-24132 Upgrade to Apache ZooKeeper 3.5.7", "committedDate": "2020-04-08T02:48:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTQ2MzU0NA==", "url": "https://github.com/apache/hbase/pull/1453#discussion_r405463544", "bodyText": "should we also update the jline version? I think it was added because of zookeeper, see https://issues.apache.org/jira/browse/HBASE-20108\nzookeeper 3.5.7 is using jline 2.11\nhowever, if we increment the JLine version, then the assembly:single maven target will fail, as the license part in JLine pom changed a bit (they named it 'The BSD License' instead of 'BSD License'). To make it work, we need to add a new supplement to supplemental-models.xml like:\n  <supplement>\n    <project>\n      <groupId>jline</groupId>\n      <artifactId>jline</artifactId>\n      <name>JLine</name>\n      <version>2.11</version>\n      <licenses>\n        <license>\n          <name>BSD License</name>\n          <url>http://www.opensource.org/licenses/bsd-license.php</url>\n          <distribution>repo</distribution>\n        </license>\n      </licenses>\n    </project>\n  </supplement>", "author": "symat", "createdAt": "2020-04-08T11:48:36Z", "path": "pom.xml", "diffHunk": "@@ -1530,8 +1530,7 @@\n     <protobuf.plugin.version>0.6.1</protobuf.plugin.version>\n     <thrift.path>thrift</thrift.path>\n     <thrift.version>0.12.0</thrift.version>\n-    <zookeeper.version>3.4.14</zookeeper.version>\n-    <!-- What ZooKeeper 3.4.x depends on and nothing more -->\n+    <zookeeper.version>3.5.7</zookeeper.version>", "originalCommit": "973675308c1e02d55da91340278f541cb0194c5e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ad46d055e1ab878a54c4c45b2099457d09b53b75", "url": "https://github.com/apache/hbase/commit/ad46d055e1ab878a54c4c45b2099457d09b53b75", "message": "HBASE-24132 Upgrade to Apache ZooKeeper 3.5.7", "committedDate": "2020-04-09T03:11:14Z", "type": "commit"}, {"oid": "148dc5ff62535db8f34f8d7fa70b4628c1c8cdf7", "url": "https://github.com/apache/hbase/commit/148dc5ff62535db8f34f8d7fa70b4628c1c8cdf7", "message": "Merge pull request #1 from apache/master\n\nupdate apache hbase", "committedDate": "2020-04-10T07:29:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY0Mzc2MA==", "url": "https://github.com/apache/hbase/pull/1453#discussion_r406643760", "bodyText": "add a rs all down check here to make the testcase stable.", "author": "francisjjf", "createdAt": "2020-04-10T07:41:02Z", "path": "hbase-server/src/test/java/org/apache/hadoop/hbase/master/assignment/TestRegionMoveAndAbandon.java", "diffHunk": "@@ -113,6 +113,9 @@ public void test() throws Exception {\n     cluster.killRegionServer(rs2.getServerName());\n     UTIL.waitFor(30_000, () -> rs2.isStopped() && !rs2.isAlive());\n     UTIL.waitFor(30_000, () -> rs1.isStopped() && !rs1.isAlive());\n+    // make sure none of regionserver threads is alive.\n+    UTIL.waitFor(30_000, () ->\n+      UTIL.getMiniHBaseCluster().getLiveRegionServerThreads().isEmpty());\n     // Start up everything again", "originalCommit": "ad46d055e1ab878a54c4c45b2099457d09b53b75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}