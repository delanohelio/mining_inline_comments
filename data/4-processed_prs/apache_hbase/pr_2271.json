{"pr_number": 2271, "pr_title": "HBASE-24897 RegionReplicaFlushHandler should handle NoServerForRegionException to avoid aborting RegionServer", "pr_createdAt": "2020-08-18T12:13:52Z", "pr_url": "https://github.com/apache/hbase/pull/2271", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIxNzQ0Nw==", "url": "https://github.com/apache/hbase/pull/2271#discussion_r472217447", "bodyText": "This is an incompatible change? If we have a pending CreateTableProcedure when upgrading we will in trouble?", "author": "Apache9", "createdAt": "2020-08-18T13:57:44Z", "path": "hbase-protocol-shaded/src/main/protobuf/MasterProcedure.proto", "diffHunk": "@@ -53,9 +53,10 @@ enum CreateTableState {\n   CREATE_TABLE_PRE_OPERATION = 1;\n   CREATE_TABLE_WRITE_FS_LAYOUT = 2;\n   CREATE_TABLE_ADD_TO_META = 3;\n-  CREATE_TABLE_ASSIGN_REGIONS = 4;\n-  CREATE_TABLE_UPDATE_DESC_CACHE = 5;\n-  CREATE_TABLE_POST_OPERATION = 6;\n+  CREATE_TABLE_ASSIGN_PRIMARY_REGIONS = 4;", "originalCommit": "ef3829fc7d3627c3d34ba91c82668de9870c4bd4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIzNTEyMQ==", "url": "https://github.com/apache/hbase/pull/2271#discussion_r472235121", "bodyText": "So all procedures proto changes are incompatible changes? The design of procedure needs to be very careful......", "author": "infraio", "createdAt": "2020-08-18T14:21:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIxNzQ0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI0MzI5NQ==", "url": "https://github.com/apache/hbase/pull/2271#discussion_r472243295", "bodyText": "Yes, so usually we do not change the states for a patch release...", "author": "Apache9", "createdAt": "2020-08-18T14:32:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIxNzQ0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjc0MTM3NQ==", "url": "https://github.com/apache/hbase/pull/2271#discussion_r472741375", "bodyText": "Ok. Will just fix this by another way: catch the error and retry to avoid abort RS.", "author": "infraio", "createdAt": "2020-08-19T06:08:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIxNzQ0Nw=="}], "type": "inlineReview"}, {"oid": "9eabcb8c6f3286d717ddf16dc22eaaf56a44fc16", "url": "https://github.com/apache/hbase/commit/9eabcb8c6f3286d717ddf16dc22eaaf56a44fc16", "message": "HBASE-24897 RegionReplicaFlushHandler should handle NoServerForRegionException to avoid aborting RegionServer", "committedDate": "2020-08-19T06:04:58Z", "type": "forcePushed"}, {"oid": "65bca735647757702a0983fbe8ccb26bcbeeef7e", "url": "https://github.com/apache/hbase/commit/65bca735647757702a0983fbe8ccb26bcbeeef7e", "message": "HBASE-24897 RegionReplicaFlushHandler should handle NoServerForRegionException to avoid aborting RegionServer", "committedDate": "2020-08-19T06:11:01Z", "type": "commit"}, {"oid": "65bca735647757702a0983fbe8ccb26bcbeeef7e", "url": "https://github.com/apache/hbase/commit/65bca735647757702a0983fbe8ccb26bcbeeef7e", "message": "HBASE-24897 RegionReplicaFlushHandler should handle NoServerForRegionException to avoid aborting RegionServer", "committedDate": "2020-08-19T06:11:01Z", "type": "forcePushed"}]}