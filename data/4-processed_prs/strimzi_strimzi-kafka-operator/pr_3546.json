{"pr_number": 3546, "pr_title": "[systemtest][upgrade] Attempt to deflake the upgrade tests and fix sending/receiving messages during upgrade", "pr_createdAt": "2020-08-25T11:10:11Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3546", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM5MDA5NA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3546#discussion_r476390094", "bodyText": "I think we should store client version somewhere during init and there just ask about it. During clients deployment, you can get version from image name I guess and you don't need to get image from pod directly.", "author": "Frawless", "createdAt": "2020-08-25T11:54:02Z", "path": "systemtest/src/main/java/io/strimzi/systemtest/kafkaclients/internalClients/VerifiableClient.java", "diffHunk": "@@ -128,18 +128,19 @@ public VerifiableClient(VerifiableClientBuilder verifiableClientBuilder) {\n \n         this.setAllowedArguments(this.clientType);\n         this.clientArgumentMap = new ClientArgumentMap();\n-        this.clientArgumentMap.put(ClientArgument.BOOTSTRAP_SERVER, bootstrapServer);\n         this.clientArgumentMap.put(ClientArgument.TOPIC, topicName);\n         this.clientArgumentMap.put(ClientArgument.MAX_MESSAGES, Integer.toString(maxMessages));\n         if (kafkaUsername != null) this.clientArgumentMap.put(ClientArgument.USER,  kafkaUsername.replace(\"-\", \"_\"));\n \n+        String image = kubeClient().getPod(this.podName).getSpec().getContainers().get(0).getImage();", "originalCommit": "14f61718fef6ed6b8f0bfe25a09edfe9b77f0295", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQwMzExMg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3546#discussion_r476403112", "bodyText": "Yep, that's right, gonna take a look at it. Thanks", "author": "im-konge", "createdAt": "2020-08-25T12:18:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM5MDA5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM0MjU5MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3546#discussion_r478342590", "bodyText": "Will be resolved in next PR.", "author": "im-konge", "createdAt": "2020-08-27T11:21:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM5MDA5NA=="}], "type": "inlineReview"}, {"oid": "aca3c85778b1f364b53bf87f1eb2f79bc7a28902", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/aca3c85778b1f364b53bf87f1eb2f79bc7a28902", "message": "determine if use --broker-list or --bootstrap-version by Kafka version\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-26T12:28:47Z", "type": "commit"}, {"oid": "8af19cc67568812b2a14ceaf1c5487f73796a8d8", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8af19cc67568812b2a14ceaf1c5487f73796a8d8", "message": "attemp to deflake the upgrade tests\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-26T12:28:47Z", "type": "commit"}, {"oid": "719b4ce4de57e66bb1044c6359bccd7c9ed28ff7", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/719b4ce4de57e66bb1044c6359bccd7c9ed28ff7", "message": "change azure\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-26T12:46:21Z", "type": "forcePushed"}, {"oid": "8af19cc67568812b2a14ceaf1c5487f73796a8d8", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8af19cc67568812b2a14ceaf1c5487f73796a8d8", "message": "attemp to deflake the upgrade tests\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>", "committedDate": "2020-08-26T12:28:47Z", "type": "forcePushed"}]}