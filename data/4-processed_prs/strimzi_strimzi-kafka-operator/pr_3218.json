{"pr_number": 3218, "pr_title": "Correct units and add defaults for CC capacity docs", "pr_createdAt": "2020-06-19T16:00:33Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc4NzYwMQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r444787601", "bodyText": "Remove the comma separators from the default values, e.g. 100,000. I'm assuming that using a comma in one of these values would invalidate the configuration.", "author": "laidan6000", "createdAt": "2020-06-24T10:07:27Z", "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -67,10 +67,10 @@ Cruise Control uses _capacity limits_ to determine if certain resource-based opt\n You specify capacity limits for Kafka broker resources in the `brokerCapacity` property in `Kafka.spec.cruiseControl` .\n Capacity limits can be set for the following broker resources in the described units:\n \n-* `disk`            - Disk storage in bytes\n-* `cpuUtilization`  - CPU utilization as a percent (0-100)\n-* `inboundNetwork`  - Inbound network throughput in bytes per second\n-* `outboundNetwork` - Outbound network throughput in bytes per second\n+* `disk`            - Disk storage in megabytes (Default: 100,000)", "originalCommit": "68788b98539b01aca1e6a7c7ed740be944a33271", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc5ODQyNQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r444798425", "bodyText": "Agreed", "author": "tomncooper", "createdAt": "2020-06-24T10:28:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc4NzYwMQ=="}], "type": "inlineReview"}, {"oid": "b60046700352b2cc9dfbef81616cc8d3978ea24c", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b60046700352b2cc9dfbef81616cc8d3978ea24c", "message": "Corrected units and add defaults for CC capacity docs\n\nSigned-off-by: Thomas Cooper <tcooper@redhat.com>", "committedDate": "2020-06-24T10:28:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MDc3Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r457990776", "bodyText": "When I tried to follow this, I struggled a lot with this and I think this PR fixes only some of that. It still says that disk is in megabytes while the example below has 100G which is confusing. I think you should really list here all the available units. Ideally, the units for the storage should match what Kubernetes use.", "author": "scholzj", "createdAt": "2020-07-21T10:18:26Z", "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -67,10 +67,10 @@ Cruise Control uses _capacity limits_ to determine if certain resource-based opt\n You specify capacity limits for Kafka broker resources in the `brokerCapacity` property in `Kafka.spec.cruiseControl` .\n Capacity limits can be set for the following broker resources in the described units:\n \n-* `disk`            - Disk storage in bytes\n-* `cpuUtilization`  - CPU utilization as a percent (0-100)\n-* `inboundNetwork`  - Inbound network throughput in bytes per second\n-* `outboundNetwork` - Outbound network throughput in bytes per second\n+* `disk`            - Disk storage in megabytes (Default: 100000)\n+* `cpuUtilization`  - CPU utilization as a percentage (Default: 100)\n+* `inboundNetwork`  - Inbound network throughput in kilobytes per second (Default: 10000)\n+* `outboundNetwork` - Outbound network throughput in kilobytes per second (Default: 10000)", "originalCommit": "b60046700352b2cc9dfbef81616cc8d3978ea24c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyMjc1Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r458222756", "bodyText": "Good point, the units can be many different sizes and use the K8s convention. I have updated the docs to reflect this.", "author": "tomncooper", "createdAt": "2020-07-21T16:17:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MDc3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MDk3Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r457990972", "bodyText": "Is this disk capacity ... of the whole cluster? Or is it per broker?", "author": "scholzj", "createdAt": "2020-07-21T10:18:49Z", "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -67,10 +67,10 @@ Cruise Control uses _capacity limits_ to determine if certain resource-based opt\n You specify capacity limits for Kafka broker resources in the `brokerCapacity` property in `Kafka.spec.cruiseControl` .\n Capacity limits can be set for the following broker resources in the described units:\n \n-* `disk`            - Disk storage in bytes\n-* `cpuUtilization`  - CPU utilization as a percent (0-100)\n-* `inboundNetwork`  - Inbound network throughput in bytes per second\n-* `outboundNetwork` - Outbound network throughput in bytes per second\n+* `disk`            - Disk storage in megabytes (Default: 100000)", "originalCommit": "b60046700352b2cc9dfbef81616cc8d3978ea24c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIyMTY5MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r458221691", "bodyText": "It is per broker.", "author": "tomncooper", "createdAt": "2020-07-21T16:15:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MDk3Mg=="}], "type": "inlineReview"}, {"oid": "fac0e5c8d747870044e00693880345bfb2856ce0", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/fac0e5c8d747870044e00693880345bfb2856ce0", "message": "Corrected units and add defaults for CC capacity docs\n\nSigned-off-by: Thomas Cooper <tcooper@redhat.com>", "committedDate": "2020-07-21T16:16:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMzIyOQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r458303229", "bodyText": "Looks good. But the example below lists KB/s So should we change it there to KiB/s? Or add KB/s here?", "author": "scholzj", "createdAt": "2020-07-21T18:27:46Z", "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -65,12 +65,12 @@ spec:\n Cruise Control uses _capacity limits_ to determine if certain resource-based optimization goals are being broken. \n \n You specify capacity limits for Kafka broker resources in the `brokerCapacity` property in `Kafka.spec.cruiseControl` .\n-Capacity limits can be set for the following broker resources in the described units:\n+Capacity limits can be set for the following broker resources in the described units (the \"i\" in the units is optional):\n \n-* `disk`            - Disk storage in bytes\n-* `cpuUtilization`  - CPU utilization as a percent (0-100)\n-* `inboundNetwork`  - Inbound network throughput in bytes per second\n-* `outboundNetwork` - Outbound network throughput in bytes per second\n+* `disk`            - Disk storage per broker in megabytes (Mi), gigabytes (Gi) or terabytes (Ti) (Default: 100000Mi)\n+* `cpuUtilization`  - CPU utilization as a percentage (Default: 100)\n+* `inboundNetwork`  - Inbound network throughput in kilobytes (KiB/s), megabytes (MiB/s) or gigabytes (GiB/s) per second (Default: 10000KiB/s)\n+* `outboundNetwork` - Outbound network throughput in kilobytes (KiB/s), megabytes (MiB/s) or gigabytes (GiB/s) per second (Default: 10000KiB/s)", "originalCommit": "fac0e5c8d747870044e00693880345bfb2856ce0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY2MDc2Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r458660766", "bodyText": "Above the bullet points I added a line about the \"i\" being optional. If that is not clear enough I can add both forms in the units brackets? WDYT?", "author": "tomncooper", "createdAt": "2020-07-22T09:28:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMzIyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgyNjM0NQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r458826345", "bodyText": "So this is my bad. I was misunderstanding the unit parsing code. We use K8s standard units, M for base 10 (5 G = 5000 MB) or Mi for base 2 (5 Gi = 5368.70 MB). I have updated the docs. Hope this is clearer (correct) now.", "author": "tomncooper", "createdAt": "2020-07-22T14:17:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMzIyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMzQ4Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r458303482", "bodyText": "The example bellow shows 100G. Should we change it to 100Gi? Or add G here as unit as well?", "author": "scholzj", "createdAt": "2020-07-21T18:28:15Z", "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -65,12 +65,12 @@ spec:\n Cruise Control uses _capacity limits_ to determine if certain resource-based optimization goals are being broken. \n \n You specify capacity limits for Kafka broker resources in the `brokerCapacity` property in `Kafka.spec.cruiseControl` .\n-Capacity limits can be set for the following broker resources in the described units:\n+Capacity limits can be set for the following broker resources in the described units (the \"i\" in the units is optional):\n \n-* `disk`            - Disk storage in bytes\n-* `cpuUtilization`  - CPU utilization as a percent (0-100)\n-* `inboundNetwork`  - Inbound network throughput in bytes per second\n-* `outboundNetwork` - Outbound network throughput in bytes per second\n+* `disk`            - Disk storage per broker in megabytes (Mi), gigabytes (Gi) or terabytes (Ti) (Default: 100000Mi)", "originalCommit": "fac0e5c8d747870044e00693880345bfb2856ce0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY2MTI3OA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3218#discussion_r458661278", "bodyText": "I left the \"i\" out of the examples on purpose to highlight the \"i\" is optional. But I admit that this might be confusing?", "author": "tomncooper", "createdAt": "2020-07-22T09:29:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMzQ4Mg=="}], "type": "inlineReview"}, {"oid": "56f0a2b94abc5f783e7a0dcebaa2a513d924dc9e", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/56f0a2b94abc5f783e7a0dcebaa2a513d924dc9e", "message": "Corrected units and add defaults for CC capacity docs\n\nSigned-off-by: Thomas Cooper <tcooper@redhat.com>", "committedDate": "2020-07-22T14:13:30Z", "type": "commit"}, {"oid": "56f0a2b94abc5f783e7a0dcebaa2a513d924dc9e", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/56f0a2b94abc5f783e7a0dcebaa2a513d924dc9e", "message": "Corrected units and add defaults for CC capacity docs\n\nSigned-off-by: Thomas Cooper <tcooper@redhat.com>", "committedDate": "2020-07-22T14:13:30Z", "type": "forcePushed"}]}