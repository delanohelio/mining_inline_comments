{"pr_number": 3652, "pr_title": "Add reconcile resource state metric", "pr_createdAt": "2020-09-15T15:25:32Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3652", "timeline": [{"oid": "1448af857d8da68da38c9a9292e6eb3bc7e54c39", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1448af857d8da68da38c9a9292e6eb3bc7e54c39", "message": "Added logic for a resource state metric\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-09-15T10:56:29Z", "type": "commit"}, {"oid": "b4834f16a36bbb999f7e210ead8ff9608cfe94ae", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b4834f16a36bbb999f7e210ead8ff9608cfe94ae", "message": "Fixed some imports\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-09-15T12:30:42Z", "type": "commit"}, {"oid": "5ca1bf9cc0eff8fcad653f3d3bd1874a2d59f102", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5ca1bf9cc0eff8fcad653f3d3bd1874a2d59f102", "message": "Added check of resource state metric in unit tests\nUpdated resource state metric list to a concurrent one (more reconcile\nin parallel could try to update the list)\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-09-15T14:50:09Z", "type": "commit"}, {"oid": "3548925be399364855bdaa35d2c88d583fa06bcf", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/3548925be399364855bdaa35d2c88d583fa06bcf", "message": "Updated CHANGELOG\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-09-15T14:57:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODkwMzMzOA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3652#discussion_r488903338", "bodyText": "I wonder if this would be more readable with boolean ready instead of int state. If nothing else, the Javadoc should list the supported states and explain them.", "author": "scholzj", "createdAt": "2020-09-15T19:08:34Z", "path": "operator-common/src/main/java/io/strimzi/operator/common/AbstractOperator.java", "diffHunk": "@@ -339,4 +348,39 @@ public Counter getPeriodicReconciliationsCounter() {\n     public AtomicInteger getResourceCounter() {\n         return resourceCounter;\n     }\n+\n+    /**\n+     * Updates the resource state metric for the provided reconciliation which brings kind, name and namespace\n+     * of the custom resource.\n+     *\n+     * @param reconciliation reconciliation to use to update the resource state metric\n+     * @param state metric value\n+     */\n+    private void updateResourceState(Reconciliation reconciliation, int state) {", "originalCommit": "5ca1bf9cc0eff8fcad653f3d3bd1874a2d59f102", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTU3OTE4MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3652#discussion_r489579181", "bodyText": "Agree with the boolean. Just fixed that.", "author": "ppatierno", "createdAt": "2020-09-16T16:45:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODkwMzMzOA=="}], "type": "inlineReview"}, {"oid": "15548239e023cd34b651ece174ec8a77fad8d9d2", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/15548239e023cd34b651ece174ec8a77fad8d9d2", "message": "Fixed comment\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-09-16T16:45:21Z", "type": "commit"}]}