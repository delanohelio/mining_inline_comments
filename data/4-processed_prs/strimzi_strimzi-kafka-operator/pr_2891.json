{"pr_number": 2891, "pr_title": "chore: Kafka 2.5.0 support", "pr_createdAt": "2020-04-24T15:29:32Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY3MDk5Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r414670997", "bodyText": "I think we should delete the 2.3.x third-party libs also, if we are removing 2.3.1\nPlease can someone else confirm this? :)", "author": "samuel-hawker", "createdAt": "2020-04-24T15:36:59Z", "path": "docker-images/kafka/kafka-thirdparty-libs/2.5.x/pom.xml", "diffHunk": "@@ -0,0 +1,138 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "originalCommit": "a06035467de526165ba6ebfeda2a8108262d429d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY3MzYxMA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r414673610", "bodyText": "This is correct, according to our conversations with @scholzj as well. Good spot Sam. I left it in since we have set PREVIOUS_MINOR_KAFKA_VERSION to 2.3.1.", "author": "sgkiokas", "createdAt": "2020-04-24T15:40:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDY3MDk5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2Njg4MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r415266881", "bodyText": "Should this be 2.5.0?", "author": "scholzj", "createdAt": "2020-04-26T09:40:01Z", "path": "cluster-operator/src/test/java/io/strimzi/operator/cluster/model/KafkaMirrorMaker2ClusterTest.java", "diffHunk": "@@ -1249,7 +1249,7 @@ public void testGenerateDeploymentWithOldVersion() {\n         assertThrows(InvalidResourceException.class, () -> {\n             KafkaMirrorMaker2 resource = new KafkaMirrorMaker2Builder(this.resource)\n                     .editSpec()\n-                        .withVersion(\"2.3.1\")  \n+                        .withVersion(\"2.4.0\")", "originalCommit": "a06035467de526165ba6ebfeda2a8108262d429d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTMzNzQ1NQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r415337455", "bodyText": "Since the test is about testGenerateDeploymentWithOldVersion, I thought that the n - 2 version should be tested. Have I misunderstood it?", "author": "sgkiokas", "createdAt": "2020-04-26T15:39:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2Njg4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM0MTM5OA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r415341398", "bodyText": "You are right. The 2.4.0 probably makes sense here \ud83d\udc4d", "author": "scholzj", "createdAt": "2020-04-26T15:59:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2Njg4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2NzAyNA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r415267024", "bodyText": "Maybe we should bump this to 0.1.12?", "author": "scholzj", "createdAt": "2020-04-26T09:40:51Z", "path": "docker-images/kafka/kafka-thirdparty-libs/2.5.x/pom.xml", "diffHunk": "@@ -0,0 +1,138 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+    <groupId>io.strimzi</groupId>\n+    <version>1.0.0-SNAPSHOT</version>\n+    <modelVersion>4.0.0</modelVersion>\n+    <artifactId>kafka-thirdparty-libs</artifactId>\n+    <packaging>pom</packaging>\n+\n+    <licenses>\n+        <license>\n+            <name>Apache License, Version 2.0</name>\n+            <url>https://www.apache.org/licenses/LICENSE-2.0.txt</url>\n+        </license>\n+    </licenses>\n+\n+    <properties>\n+        <strimzi-oauth.version>0.4.0</strimzi-oauth.version>\n+    </properties>\n+\n+    <dependencies>\n+        <!-- https://mvnrepository.com/artifact/io.prometheus.jmx/jmx_prometheus_javaagent -->\n+        <dependency>\n+            <groupId>io.prometheus.jmx</groupId>\n+            <artifactId>jmx_prometheus_javaagent</artifactId>\n+            <version>0.12.0</version>\n+        </dependency>\n+        <!-- https://mvnrepository.com/artifact/net.logstash.log4j/jsonevent-layout -->\n+        <dependency>\n+            <groupId>net.logstash.log4j</groupId>\n+            <artifactId>jsonevent-layout</artifactId>\n+            <version>1.7</version>\n+        </dependency>\n+        <!-- Tracing -->\n+        <dependency>\n+            <groupId>io.jaegertracing</groupId>\n+            <artifactId>jaeger-client</artifactId>\n+            <version>1.1.0</version>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>org.slf4j</groupId>\n+                    <artifactId>slf4j-api</artifactId>\n+                </exclusion>\n+                <exclusion>\n+                    <groupId>javax.annotation</groupId>\n+                    <artifactId>javax.annotation-api</artifactId>\n+                </exclusion>\n+            </exclusions>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.opentracing</groupId>\n+            <artifactId>opentracing-api</artifactId>\n+            <version>0.33.0</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.opentracing</groupId>\n+            <artifactId>opentracing-util</artifactId>\n+            <version>0.33.0</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.opentracing.contrib</groupId>\n+            <artifactId>opentracing-kafka-client</artifactId>\n+            <version>0.1.9</version>", "originalCommit": "a06035467de526165ba6ebfeda2a8108262d429d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTMzNzU4MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r415337581", "bodyText": "Sure, this is a good catch.", "author": "sgkiokas", "createdAt": "2020-04-26T15:39:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2NzAyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE2NTg2NA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r417165864", "bodyText": "For the documentation, please can you update the :OpenTracingKafkaClient: attribute in documentation/shared/attributes.adoc.\nThis updates the relevant version number in the Distributed Tracing section when the docs are compiled.\nThanks!", "author": "laidan6000", "createdAt": "2020-04-29T08:58:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2NzAyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2NzIwNQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r415267205", "bodyText": "I think you can just delete this completely, not just comment it out.", "author": "scholzj", "createdAt": "2020-04-26T09:41:43Z", "path": "kafka-versions.yaml", "diffHunk": "@@ -26,15 +26,15 @@\n   #third-party-libs: 2.3.x\n   #default: false\n   #unsupported-features: kafkaMirrorMaker2\n-- version: 2.3.1\n-  format: 2.3\n-  protocol: 2.3\n-  url: https://archive.apache.org/dist/kafka/2.3.1/kafka_2.12-2.3.1.tgz\n-  checksum: B9FD57DE7D9691C89CF668901E5E29728F10249667611A0603C322C8823EC2D5568B51EB1A570D4D9119CD4E44E84B590CAB99B33A0355EBAC37811A7D453608\n-  zookeeper: 3.4.14\n-  third-party-libs: 2.3.x\n-  default: false\n-  unsupported-features: kafkaMirrorMaker2\n+#- version: 2.3.1", "originalCommit": "a06035467de526165ba6ebfeda2a8108262d429d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTMzNzY0NQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r415337645", "bodyText": "Of course, will do. I'll remove the 2.3.0 as well for consistency.", "author": "sgkiokas", "createdAt": "2020-04-26T15:40:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2NzIwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2NzQyNw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r415267427", "bodyText": "AFAIU this, this block should basically just replace the previous block. Not be there in addition. Could you please confirm @Frawless?", "author": "scholzj", "createdAt": "2020-04-26T09:42:49Z", "path": "systemtest/src/main/resources/StrimziUpgradeST.json", "diffHunk": "@@ -257,5 +257,42 @@\n       \"flakyEnvVariable\": \"none\",\n       \"reason\" : \"Test is working on all environment used by QE.\"\n     }\n+  },\n+  {", "originalCommit": "a06035467de526165ba6ebfeda2a8108262d429d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTU2MjQ4Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2891#discussion_r415562483", "bodyText": "Yes. Just update proceduresAfter and image names correctly in that case.", "author": "Frawless", "createdAt": "2020-04-27T07:06:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI2NzQyNw=="}], "type": "inlineReview"}, {"oid": "bdfdc8f98cd685ee1baab45ae87ee289f136b8ca", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bdfdc8f98cd685ee1baab45ae87ee289f136b8ca", "message": "chore: Kafka 2.5.0 support\n\nThis commit:\n\n- adds support for kafka 2.5.0\n- drops support for Kafka 2.3.1\n\nSigned-off-by: Stelios Gkiokas <Stylianos.Gkiokas@ibm.com>", "committedDate": "2020-04-27T11:15:02Z", "type": "forcePushed"}, {"oid": "33506c5d5a388ad4a3a3647cd44b2f6753cb3928", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/33506c5d5a388ad4a3a3647cd44b2f6753cb3928", "message": "chore: Kafka 2.5.0 support\n\nThis commit:\n\n- adds support for kafka 2.5.0\n- drops support for Kafka 2.3.1\n\nSigned-off-by: Stelios Gkiokas <Stylianos.Gkiokas@ibm.com>", "committedDate": "2020-04-27T14:04:48Z", "type": "forcePushed"}, {"oid": "96548435b69bee79ec86c3c783132941260efbff", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/96548435b69bee79ec86c3c783132941260efbff", "message": "chore: Kafka 2.5.0 support\n\nThis commit:\n\n- adds support for kafka 2.5.0\n- drops support for Kafka 2.3.1\n\nSigned-off-by: Stelios Gkiokas <Stylianos.Gkiokas@ibm.com>", "committedDate": "2020-04-28T12:48:34Z", "type": "commit"}, {"oid": "9a1718eab0f6f95a0df2357ec2f103b4939102ea", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9a1718eab0f6f95a0df2357ec2f103b4939102ea", "message": "Fix the kafka-agent health check\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-28T12:48:34Z", "type": "commit"}, {"oid": "b8454a70d06b0e79e03bc081e5545a0e1700acb7", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b8454a70d06b0e79e03bc081e5545a0e1700acb7", "message": "Fix the client version used during the upgrade tests\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-28T12:48:34Z", "type": "commit"}, {"oid": "8b8a4e7bf5311d5ef5ccaba9989a94c4a4784e75", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8b8a4e7bf5311d5ef5ccaba9989a94c4a4784e75", "message": "Fix ZookeeperUpgradeST\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-28T12:53:08Z", "type": "commit"}, {"oid": "8b8a4e7bf5311d5ef5ccaba9989a94c4a4784e75", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8b8a4e7bf5311d5ef5ccaba9989a94c4a4784e75", "message": "Fix ZookeeperUpgradeST\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-28T12:53:08Z", "type": "forcePushed"}, {"oid": "273681726471981ffb237f2e2b62fbb2e91f729f", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/273681726471981ffb237f2e2b62fbb2e91f729f", "message": "Fix testUpgradeKafkaWithoutVersion test\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-28T14:45:22Z", "type": "commit"}, {"oid": "0651eee5c37125499fba8f1dc8c85406786a05ad", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/0651eee5c37125499fba8f1dc8c85406786a05ad", "message": "Fix the archive download\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-28T18:48:37Z", "type": "commit"}]}