{"pr_number": 3072, "pr_title": "[DOC] Update to the using the topic operator section", "pr_createdAt": "2020-05-21T16:15:01Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3072", "timeline": [{"oid": "bd6dedcdf930dde327c78ff2fcb903af527ea74e", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bd6dedcdf930dde327c78ff2fcb903af527ea74e", "message": "update to the using the topic operator section\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-05-21T16:11:14Z", "type": "commit"}, {"oid": "702061e71fc34388293430e481d35e3a2270bea2", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/702061e71fc34388293430e481d35e3a2270bea2", "message": "review edit\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-05-21T16:15:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAzODEzOQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3072#discussion_r429038139", "bodyText": "Should we clarify that this configuration is in the spec.kafka.config in the Kafka resource?", "author": "ppatierno", "createdAt": "2020-05-22T04:36:16Z", "path": "documentation/modules/proc-configuring-kafka-topic.adoc", "diffHunk": "@@ -0,0 +1,58 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-topic-operator.adoc\n+\n+[id='proc-configuring-kafka-topic-{context}']\n+= Configuring a Kafka topic\n+\n+Use the properties of the `KafkaTopic` resource to configure a Kafka topic.\n+\n+You can use `kubectl apply` to create or modify topics, and kubectl delete to delete existing topics.\n+\n+For example:\n+\n+* `kubectl apply -f <topic-config-file>`\n+* `kubectl delete KafkaTopic <topic-name>`\n+\n+This procedure shows how to create a topic with 10 partitions and 2 replicas.\n+\n+.Before you start\n+\n+It is important that you consider the following before making your changes:\n+\n+* Kafka does _not_ support making the following changes through the `KafkaTopic` resource:\n+** Changing topic names using `spec.topicName`\n+** Decreasing partition size using `spec.partitions`\n+* You cannot change the number of replicas initially specified using `spec.replicas`.\n+* Increasing `spec.partitions` for topics with keys will change how records are partitioned, which can be particularly problematic when the topic uses _semantic partitioning_.\n+\n+.Prerequisites\n+\n+* A running Kafka cluster xref:con-mutual-tls-authentication-deployment-configuration-kafka[configured with a Kafka broker listener using TLS authentication and encryption].\n+* A running Topic Operator (typically xref:assembly-kafka-entity-operator-deployment-configuration-kafka[deployed with the Entity Operator]).\n+* For deleting a topic, `delete.topic.enable=true` (default)", "originalCommit": "702061e71fc34388293430e481d35e3a2270bea2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIzNzIwMA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3072#discussion_r429237200", "bodyText": "For deleting a topic, delete.topic.enable=true (default) in the spec.kafka.config of the Kafka resource.", "author": "PaulRMellor", "createdAt": "2020-05-22T13:12:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAzODEzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAzODQxOQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3072#discussion_r429038419", "bodyText": "spec.topicName property", "author": "ppatierno", "createdAt": "2020-05-22T04:37:40Z", "path": "documentation/modules/ref-topic-operator.adoc", "diffHunk": "@@ -2,23 +2,32 @@\n //\n // topic-operator.adoc\n \n-[id='topic-operator-usage-recommendations-{context}']\n-= Topic Operator usage recommendations\n+[id='ref-topic-operator-{context}']\n+= Kafka topic resource\n \n-When working with topics, be consistent and always operate on either `KafkaTopic` resources or topics directly. Avoid routinely switching between both methods for a given topic.\n+The `KafkaTopic` resource is used to configure topics, including the number of partitions and replicas.\n+\n+The full schema for `KafkaTopic` is described in xref:type-KafkaTopic-reference[`KafkaTopic` schema reference].\n+\n+== Kafka topic usage recommendations\n+\n+When working with topics, be consistent.\n+Always operate on either `KafkaTopic` resources or topics directly in Kubernetes.\n+Avoid routinely switching between both methods for a given topic.\n \n Use topic names that reflect the nature of the topic, and remember that names cannot be changed later.\n \n-If creating a topic in Kafka, use a name that is a valid Kubernetes resource name, otherwise the Topic Operator will need to create the corresponding `KafkaTopic` with a name that conforms to the Kubernetes rules.\n+If creating a topic in Kafka, use a name that is a valid Kubernetes resource name,\n+otherwise the Topic Operator will need to create the corresponding `KafkaTopic` with a name that conforms to the Kubernetes rules.\n \n NOTE: Recommendations for identifiers and names in Kubernetes are outlined in link:https://github.com/kubernetes/community/blob/master/contributors/design-proposals/architecture/identifiers.md[Identifiers and Names in Kubernetes^] community article.\n \n-.Kafka topic naming conventions\n+== Kafka topic naming conventions\n \n Kafka and Kubernetes impose their own validation rules for the naming of topics in Kafka and `KafkaTopic.metadata.name` respectively.\n There are valid names for each which are invalid in the other.\n \n-Using the `spec.topicName property`, it is possible to create a valid topic in Kafka with a name that would be invalid for the KafkaTopic in Kubernetes.\n+Using the `spec.topicName property`, it is possible to create a valid topic in Kafka with a name that would be invalid for the Kafka topic in Kubernetes.", "originalCommit": "702061e71fc34388293430e481d35e3a2270bea2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "588193af111239832ec1c57abcf8069eb02ff808", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/588193af111239832ec1c57abcf8069eb02ff808", "message": "review edits PP\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-05-22T13:16:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMzODY4MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3072#discussion_r430338680", "bodyText": "Missing literals for second command.", "author": "laidan6000", "createdAt": "2020-05-26T11:20:16Z", "path": "documentation/modules/proc-configuring-kafka-topic.adoc", "diffHunk": "@@ -0,0 +1,58 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-topic-operator.adoc\n+\n+[id='proc-configuring-kafka-topic-{context}']\n+= Configuring a Kafka topic\n+\n+Use the properties of the `KafkaTopic` resource to configure a Kafka topic.\n+\n+You can use `kubectl apply` to create or modify topics, and kubectl delete to delete existing topics.", "originalCommit": "588193af111239832ec1c57abcf8069eb02ff808", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMzOTU2Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3072#discussion_r430339567", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * You cannot change the number of replicas initially specified using `spec.replicas`.\n          \n          \n            \n            * You cannot use `spec.replicas` to change the number of replicas that were initially specified.", "author": "laidan6000", "createdAt": "2020-05-26T11:22:12Z", "path": "documentation/modules/proc-configuring-kafka-topic.adoc", "diffHunk": "@@ -0,0 +1,58 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-topic-operator.adoc\n+\n+[id='proc-configuring-kafka-topic-{context}']\n+= Configuring a Kafka topic\n+\n+Use the properties of the `KafkaTopic` resource to configure a Kafka topic.\n+\n+You can use `kubectl apply` to create or modify topics, and kubectl delete to delete existing topics.\n+\n+For example:\n+\n+* `kubectl apply -f <topic-config-file>`\n+* `kubectl delete KafkaTopic <topic-name>`\n+\n+This procedure shows how to create a topic with 10 partitions and 2 replicas.\n+\n+.Before you start\n+\n+It is important that you consider the following before making your changes:\n+\n+* Kafka does _not_ support making the following changes through the `KafkaTopic` resource:\n+** Changing topic names using `spec.topicName`\n+** Decreasing partition size using `spec.partitions`\n+* You cannot change the number of replicas initially specified using `spec.replicas`.", "originalCommit": "588193af111239832ec1c57abcf8069eb02ff808", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6c1b7cf27d8b3eb0b627ac9b8114f352d1b8f93f", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6c1b7cf27d8b3eb0b627ac9b8114f352d1b8f93f", "message": "review edits DL\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-05-26T16:36:57Z", "type": "commit"}]}