{"pr_number": 3505, "pr_title": "Fix Prometheus additional configuration documentation", "pr_createdAt": "2020-08-13T09:39:14Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505", "timeline": [{"oid": "379b0467b575840c79ae971c8fc333aff759343a", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/379b0467b575840c79ae971c8fc333aff759343a", "message": "Fix Prometheus additional configuration documentation\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-08-13T09:37:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg1ODI1MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#discussion_r469858250", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This is because the Prometheus operator doesn't have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.\n          \n          \n            \n            This is because the Prometheus operator does not have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.", "author": "sknot-rh", "createdAt": "2020-08-13T10:36:05Z", "path": "documentation/modules/metrics/proc_metrics-deploying-prometheus.adoc", "diffHunk": "@@ -34,7 +34,10 @@ sed -i '' 's/namespace: .*/namespace: _my-namespace_/' prometheus.yaml\n . Edit the `PodMonitor` resource in `strimzi-pod-monitor.yaml` to define Prometheus jobs that will scrape the metrics data from pods.\n `PodMonitor` is used to scrape data directly from pods and is used for Apache Kafka, ZooKeeper, Operators, and Kafka Bridge. Update the `namespaceSelector.matchNames` property with the namespace where the pods to scrape the metrics from are running.\n \n-. To use another role:\n+. The provided Grafana dashboards show metrics about CPU, memory and volume disks usage.\n+These metrics come from cadvisor and kubelet directly on the nodes.\n+In order to have Prometheus scraping for these metrics, an additional configuration is needed.\n+This is because the Prometheus operator doesn't have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.", "originalCommit": "379b0467b575840c79ae971c8fc333aff759343a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg2MDI3MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#discussion_r469860271", "bodyText": "Thanks Standa!", "author": "ppatierno", "createdAt": "2020-08-13T10:40:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg1ODI1MA=="}], "type": "inlineReview"}, {"oid": "4b18657c97d51130cabdf4974e43597a77e06262", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4b18657c97d51130cabdf4974e43597a77e06262", "message": "Fix documentation check\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-08-13T10:39:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkzNTA4Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#discussion_r469935087", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            . The provided Grafana dashboards show metrics about CPU, memory and volume disks usage.\n          \n          \n            \n            These metrics come from cadvisor and kubelet directly on the nodes.\n          \n          \n            \n            In order to have Prometheus scraping for these metrics, an additional configuration is needed.\n          \n          \n            \n            This is because the Prometheus operator does not have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.\n          \n          \n            \n            +\n          \n          \n            \n            The Grafana dashboards provided show metrics for CPU, memory and disk volume usage,\n          \n          \n            \n            which come directly from the Kubernetes cAdvisor agent and kubelet on the nodes.\n          \n          \n            \n            The configuration is needed because the Prometheus operator does not have something like `PodMonitor` for scraping metrics directly from nodes.", "author": "PaulRMellor", "createdAt": "2020-08-13T13:04:28Z", "path": "documentation/modules/metrics/proc_metrics-deploying-prometheus.adoc", "diffHunk": "@@ -34,7 +34,10 @@ sed -i '' 's/namespace: .*/namespace: _my-namespace_/' prometheus.yaml\n . Edit the `PodMonitor` resource in `strimzi-pod-monitor.yaml` to define Prometheus jobs that will scrape the metrics data from pods.\n `PodMonitor` is used to scrape data directly from pods and is used for Apache Kafka, ZooKeeper, Operators, and Kafka Bridge. Update the `namespaceSelector.matchNames` property with the namespace where the pods to scrape the metrics from are running.\n \n-. To use another role:\n+. The provided Grafana dashboards show metrics about CPU, memory and volume disks usage.\n+These metrics come from cadvisor and kubelet directly on the nodes.\n+In order to have Prometheus scraping for these metrics, an additional configuration is needed.\n+This is because the Prometheus operator does not have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.", "originalCommit": "4b18657c97d51130cabdf4974e43597a77e06262", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkzNTYzMw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#discussion_r469935633", "bodyText": "I'm assuming this information relates to the step above: . Edit the PodMonitor resource", "author": "PaulRMellor", "createdAt": "2020-08-13T13:05:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkzNTA4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTk1MzE4NA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#discussion_r469953184", "bodyText": "No it's a step on its own.", "author": "ppatierno", "createdAt": "2020-08-13T13:32:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkzNTA4Nw=="}], "type": "inlineReview"}, {"oid": "94f3472648a23b2eb171ec226a48514c84e17577", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/94f3472648a23b2eb171ec226a48514c84e17577", "message": "Fixed comments\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>", "committedDate": "2020-08-13T13:40:10Z", "type": "commit"}]}