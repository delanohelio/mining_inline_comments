{"pr_number": 2870, "pr_title": "Add new stirmzi-view cluster role and configure aggregation to view, edit and admin roles", "pr_createdAt": "2020-04-21T23:01:33Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY4NTk5Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412685997", "bodyText": "\"allows users\" or \"is used\" ... there is a typo somewhere :-)", "author": "ppatierno", "createdAt": "2020-04-22T05:43:56Z", "path": "documentation/assemblies/assembly-getting-started-strimzi-admin.adoc", "diffHunk": "@@ -6,8 +6,13 @@\n = Strimzi Administrators\n \n {ProductName} includes several custom resources.\n-By default, permission to create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n-If you want to allow non-cluster administators to manage {ProductName} resources, you must assign them the Strimzi Administrator role.\n+By default, permission to view, create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n+{ProductName} provides two additional `ClusterRoles` which you can use to assign these rights also to other users.\n+The role `strimzi-view` allows used to view and list the {ProductName} resources.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY4NjI5Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412686297", "bodyText": "\"them\" is used twice here with different meanings, maybe it's better to specify \"users\" and \"{ProductName} resources\" ?", "author": "ppatierno", "createdAt": "2020-04-22T05:44:51Z", "path": "documentation/assemblies/assembly-getting-started-strimzi-admin.adoc", "diffHunk": "@@ -6,8 +6,13 @@\n = Strimzi Administrators\n \n {ProductName} includes several custom resources.\n-By default, permission to create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n-If you want to allow non-cluster administators to manage {ProductName} resources, you must assign them the Strimzi Administrator role.\n+By default, permission to view, create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n+{ProductName} provides two additional `ClusterRoles` which you can use to assign these rights also to other users.\n+The role `strimzi-view` allows used to view and list the {ProductName} resources.\n+The role `strimzi-admin` allows them to also create, edit or delete them.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcxNjQ4Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412716482", "bodyText": "Strimzi provides custom resources for configuration of your deployment.\nI actually deleted this assembly and moved the procedure into a pre-install prep assembly for the deployment guide PR. I also did some minor edits to the procedure\nWill need to make sure the changes in this PR are reflected.", "author": "PaulRMellor", "createdAt": "2020-04-22T06:51:44Z", "path": "documentation/assemblies/assembly-getting-started-strimzi-admin.adoc", "diffHunk": "@@ -6,8 +6,13 @@\n = Strimzi Administrators\n \n {ProductName} includes several custom resources.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcxODYzNQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412718635", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {ProductName} provides two additional `ClusterRoles` which you can use to assign these rights also to other users.\n          \n          \n            \n            {ProductName} provides two cluster roles, which you can use to assign these rights to other users:", "author": "PaulRMellor", "createdAt": "2020-04-22T06:55:38Z", "path": "documentation/assemblies/assembly-getting-started-strimzi-admin.adoc", "diffHunk": "@@ -6,8 +6,13 @@\n = Strimzi Administrators\n \n {ProductName} includes several custom resources.\n-By default, permission to create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n-If you want to allow non-cluster administators to manage {ProductName} resources, you must assign them the Strimzi Administrator role.\n+By default, permission to view, create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n+{ProductName} provides two additional `ClusterRoles` which you can use to assign these rights also to other users.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcxOTY3NQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412719675", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The role `strimzi-view` allows used to view and list the {ProductName} resources.\n          \n          \n            \n            * `strimzi-view` allows users to view and list {ProductName} resources.", "author": "PaulRMellor", "createdAt": "2020-04-22T06:57:26Z", "path": "documentation/assemblies/assembly-getting-started-strimzi-admin.adoc", "diffHunk": "@@ -6,8 +6,13 @@\n = Strimzi Administrators\n \n {ProductName} includes several custom resources.\n-By default, permission to create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n-If you want to allow non-cluster administators to manage {ProductName} resources, you must assign them the Strimzi Administrator role.\n+By default, permission to view, create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n+{ProductName} provides two additional `ClusterRoles` which you can use to assign these rights also to other users.\n+The role `strimzi-view` allows used to view and list the {ProductName} resources.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcyMDI4Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412720286", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The role `strimzi-admin` allows them to also create, edit or delete them.\n          \n          \n            \n            * `strimzi-admin` allows users to also create, edit or delete {ProductName} resources.", "author": "PaulRMellor", "createdAt": "2020-04-22T06:58:27Z", "path": "documentation/assemblies/assembly-getting-started-strimzi-admin.adoc", "diffHunk": "@@ -6,8 +6,13 @@\n = Strimzi Administrators\n \n {ProductName} includes several custom resources.\n-By default, permission to create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n-If you want to allow non-cluster administators to manage {ProductName} resources, you must assign them the Strimzi Administrator role.\n+By default, permission to view, create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n+{ProductName} provides two additional `ClusterRoles` which you can use to assign these rights also to other users.\n+The role `strimzi-view` allows used to view and list the {ProductName} resources.\n+The role `strimzi-admin` allows them to also create, edit or delete them.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcyMDkxMQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412720911", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When you install these roles, they will automatically add (aggregate) these rights to the default Kubernetes `ClusterRoles`.\n          \n          \n            \n            When you install these roles, they will automatically aggregate (add) these rights to the default Kubernetes cluster roles.", "author": "PaulRMellor", "createdAt": "2020-04-22T06:59:32Z", "path": "documentation/assemblies/assembly-getting-started-strimzi-admin.adoc", "diffHunk": "@@ -6,8 +6,13 @@\n = Strimzi Administrators\n \n {ProductName} includes several custom resources.\n-By default, permission to create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n-If you want to allow non-cluster administators to manage {ProductName} resources, you must assign them the Strimzi Administrator role.\n+By default, permission to view, create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n+{ProductName} provides two additional `ClusterRoles` which you can use to assign these rights also to other users.\n+The role `strimzi-view` allows used to view and list the {ProductName} resources.\n+The role `strimzi-admin` allows them to also create, edit or delete them.\n+When you install these roles, they will automatically add (aggregate) these rights to the default Kubernetes `ClusterRoles`.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcyMTI4Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412721287", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `strimzi-view` will aggregate to the `view` role and `strimzi-admin` to the `edit` and `admin` roles.\n          \n          \n            \n            `strimzi-view` aggregates to the `view` role, and `strimzi-admin` aggregates to the `edit` and `admin` roles.", "author": "PaulRMellor", "createdAt": "2020-04-22T07:00:16Z", "path": "documentation/assemblies/assembly-getting-started-strimzi-admin.adoc", "diffHunk": "@@ -6,8 +6,13 @@\n = Strimzi Administrators\n \n {ProductName} includes several custom resources.\n-By default, permission to create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n-If you want to allow non-cluster administators to manage {ProductName} resources, you must assign them the Strimzi Administrator role.\n+By default, permission to view, create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n+{ProductName} provides two additional `ClusterRoles` which you can use to assign these rights also to other users.\n+The role `strimzi-view` allows used to view and list the {ProductName} resources.\n+The role `strimzi-admin` allows them to also create, edit or delete them.\n+When you install these roles, they will automatically add (aggregate) these rights to the default Kubernetes `ClusterRoles`.\n+`strimzi-view` will aggregate to the `view` role and `strimzi-admin` to the `edit` and `admin` roles.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc0Mzk0Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412743947", "bodyText": "If needed? If we're designating strimzi admins, we would need to do this step, no?", "author": "PaulRMellor", "createdAt": "2020-04-22T07:36:32Z", "path": "documentation/modules/proc-designating-strimzi-administrators.adoc", "diffHunk": "@@ -11,14 +11,14 @@\n \n .Procedure\n \n-. Create the `strimzi-admin` cluster role in Kubernetes.\n+. Create the `strimzi-view` and `strimzi-admin` cluster roles in Kubernetes.\n +\n Use `kubectl apply`:\n [source,shell,subs=+quotes]\n kubectl apply -f install/strimzi-admin\n \n-. Assign the `strimzi-admin` `ClusterRole` to one or more existing users in the Kubernetes cluster.\n+. If needed, assign the roles to one or more existing users in the Kubernetes cluster.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc2NzM4Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412767382", "bodyText": "Because of the aggregation, even without this step the rights will be given to everyone with one of the default roles. So this step is now not mandatory.", "author": "scholzj", "createdAt": "2020-04-22T08:11:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc0Mzk0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgzMDA2NQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412830065", "bodyText": "Maybe it could be clearer. If needed, assign the roles that provide access rights to users that require them.", "author": "PaulRMellor", "createdAt": "2020-04-22T09:38:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc0Mzk0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg4MzkxMw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412883913", "bodyText": "Ok, fixed. Thanks", "author": "scholzj", "createdAt": "2020-04-22T11:01:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc0Mzk0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc0NDQ2MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2870#discussion_r412744460", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Thanks to the aggregation, you might not need to assign these roles to users who already have similar rights.\n          \n          \n            \n            Because of the aggregation, you might not need to assign these roles to users who already have similar rights.", "author": "PaulRMellor", "createdAt": "2020-04-22T07:37:18Z", "path": "documentation/assemblies/assembly-getting-started-strimzi-admin.adoc", "diffHunk": "@@ -6,8 +6,13 @@\n = Strimzi Administrators\n \n {ProductName} includes several custom resources.\n-By default, permission to create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n-If you want to allow non-cluster administators to manage {ProductName} resources, you must assign them the Strimzi Administrator role.\n+By default, permission to view, create, edit, and delete these resources is limited to Kubernetes cluster administrators.\n+{ProductName} provides two additional `ClusterRoles` which you can use to assign these rights also to other users.\n+The role `strimzi-view` allows used to view and list the {ProductName} resources.\n+The role `strimzi-admin` allows them to also create, edit or delete them.\n+When you install these roles, they will automatically add (aggregate) these rights to the default Kubernetes `ClusterRoles`.\n+`strimzi-view` will aggregate to the `view` role and `strimzi-admin` to the `edit` and `admin` roles.\n+Thanks to the aggregation, you might not need to assign these roles to users who already have similar rights.", "originalCommit": "39a49b946c5a5ff961d4aca9a7ea1e4ac1ce81b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2a2785fda3aa1db9b6262a2c674e1d3a6769c6fa", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2a2785fda3aa1db9b6262a2c674e1d3a6769c6fa", "message": "Add new stirmzi-view cluster role and configure aggregation to view, edit and admin roles\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-22T16:47:42Z", "type": "commit"}, {"oid": "4f353d25a541a63254e9ea578b7e80954ec9c1bc", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4f353d25a541a63254e9ea578b7e80954ec9c1bc", "message": "Review comments I\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-22T16:47:42Z", "type": "commit"}, {"oid": "f5ae150d56e0c93cbb3229ef7c3e766b03eb58cb", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f5ae150d56e0c93cbb3229ef7c3e766b03eb58cb", "message": "Review comments II\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-22T16:47:42Z", "type": "commit"}, {"oid": "f5ae150d56e0c93cbb3229ef7c3e766b03eb58cb", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f5ae150d56e0c93cbb3229ef7c3e766b03eb58cb", "message": "Review comments II\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-22T16:47:42Z", "type": "forcePushed"}, {"oid": "7031d19e5b696d079171d89f33641fb2117b8a08", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7031d19e5b696d079171d89f33641fb2117b8a08", "message": "Remove removed files\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-04-22T16:50:10Z", "type": "commit"}]}