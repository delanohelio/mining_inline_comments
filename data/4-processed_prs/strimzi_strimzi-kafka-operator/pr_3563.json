{"pr_number": 3563, "pr_title": "[DOC] Update to Overview for CORS and Metrics", "pr_createdAt": "2020-08-28T17:01:39Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563", "timeline": [{"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "message": "[DOC] Update to Overview for CORS and Metrics\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-08-28T16:59:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTA4Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479559082", "bodyText": "I'm not sure I would word it like this. We do not support any other use cases than rebalancing. This suggests we do.", "author": "scholzj", "createdAt": "2020-08-28T22:25:00Z", "path": "documentation/assemblies/overview/assembly-metrics-overview.adoc", "diffHunk": "@@ -16,22 +16,23 @@ Example metrics configuration files are provided with Strimzi.\n \n Distributed tracing complements the gathering of metrics data by providing a facility for end-to-end tracking of messages through Strimzi.\n \n+Cruise Control is used to monitor the workload of Kafka clusters, but it also automates the process of rebalancing. ", "originalCommit": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1NzI4NQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479957285", "bodyText": "Agree. We support the rebalancing feature only but of course, CC has to monitor the cluster workload for doing it.\nUsing \"automates\" sounds that it does rebalancing automatically while it's not supported, the user has to interact with CC using KafkaRebalance resource; there is no automatic rebalancing done by CC without user request/interaction.", "author": "ppatierno", "createdAt": "2020-08-31T07:49:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTA4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk1MTYwMg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r480951602", "bodyText": "How about:\n\nCruise Control provides support for rebalancing of Kafka clusters based on workload data.", "author": "PaulRMellor", "createdAt": "2020-09-01T08:07:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTA4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk1MjYxMQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r480952611", "bodyText": "+1", "author": "ppatierno", "createdAt": "2020-09-01T08:09:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTA4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTE3OQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479559179", "bodyText": "Again, maybe without monitoring it would be better?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * *Cruise Control* monitors and balances data across a Kafka cluster\n          \n          \n            \n            * *Cruise Control* balances data across a Kafka cluster", "author": "scholzj", "createdAt": "2020-08-28T22:25:26Z", "path": "documentation/assemblies/overview/assembly-metrics-overview.adoc", "diffHunk": "@@ -16,22 +16,23 @@ Example metrics configuration files are provided with Strimzi.\n \n Distributed tracing complements the gathering of metrics data by providing a facility for end-to-end tracking of messages through Strimzi.\n \n+Cruise Control is used to monitor the workload of Kafka clusters, but it also automates the process of rebalancing. \n+\n .Metrics and monitoring tools\n Strimzi can employ the following tools for metrics and monitoring:\n \n * *Prometheus* pulls metrics from Kafka, ZooKeeper and Kafka Connect clusters. The Prometheus *Alertmanager* plugin handles alerts and routes them to a notification service.\n * *Kafka Exporter* adds additional Prometheus metrics\n * *Grafana* provides dashboard visualizations of Prometheus metrics\n * *Jaeger* provides distributed tracing support to track transactions between applications\n+* *Cruise Control* monitors and balances data across a Kafka cluster", "originalCommit": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTMxOQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479559319", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To use Prometheus to obtain metrics data and provide notifications, Prometheus and the Prometheus Alertmanager plugin must be deployed.\n          \n          \n            \n            To use Prometheus to obtain metrics data and provide alerts, Prometheus and the Prometheus Alertmanager plugin must be deployed.", "author": "scholzj", "createdAt": "2020-08-28T22:25:58Z", "path": "documentation/modules/overview/con-metrics-overview-tools.adoc", "diffHunk": "@@ -0,0 +1,63 @@\n+// This module is included in:\n+//\n+// overview/assembly-metrics-overview.adoc\n+\n+[id=\"metrics-overview-tools-{context}\"]\n+= Prometheus\n+\n+Prometheus can extract metrics data from Kafka components and the Strimzi Operators.\n+\n+To use Prometheus to obtain metrics data and provide notifications, Prometheus and the Prometheus Alertmanager plugin must be deployed.", "originalCommit": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTQwNA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479559404", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Kafka resources must also be deployed or redeployed with Prometheus configuration to expose the metrics data.\n          \n          \n            \n            Kafka resources must also be deployed or redeployed with metrics configuration to expose the metrics data.", "author": "scholzj", "createdAt": "2020-08-28T22:26:16Z", "path": "documentation/modules/overview/con-metrics-overview-tools.adoc", "diffHunk": "@@ -0,0 +1,63 @@\n+// This module is included in:\n+//\n+// overview/assembly-metrics-overview.adoc\n+\n+[id=\"metrics-overview-tools-{context}\"]\n+= Prometheus\n+\n+Prometheus can extract metrics data from Kafka components and the Strimzi Operators.\n+\n+To use Prometheus to obtain metrics data and provide notifications, Prometheus and the Prometheus Alertmanager plugin must be deployed.\n+Kafka resources must also be deployed or redeployed with Prometheus configuration to expose the metrics data.", "originalCommit": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1NzkzMw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479957933", "bodyText": "mentioning an \"initial OPTIONS HTTP request\"", "author": "ppatierno", "createdAt": "2020-08-31T07:51:00Z", "path": "documentation/modules/overview/con-configuration-points-bridge.adoc", "diffHunk": "@@ -11,6 +11,18 @@ Kafka Bridge consumer and producer configuration is standard, as described in th\n \n HTTP-related configuration options set the port connection which the server listens on.\n \n+[discrete]\n+== CORS\n+\n+The Kafka Bridge supports the use of Cross-Origin Resource Sharing (CORS).\n+CORS is a HTTP mechanism that allows browser access to selected resources from more than one origin.\n+You can define a list of allowed resource origins and HTTP methods for interaction with the Kafka cluster.\n+\n+CORS allows for _simple_ and _preflighted_ requests between origin sources on different domains.\n+\n+* A simple request is a HTTP request that must have an allowed origin defined in its header.\n+* A preflighted request sends an initial HTTP request before the actual request to check that the origin and the method are allowed.", "originalCommit": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1ODY0Mw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479958643", "bodyText": "it should be \"alerts\" not \"notifications\".\nThen, not a native speaker but ... does the double \"issues\" (of course with different meanings) sound ok in English?", "author": "ppatierno", "createdAt": "2020-08-31T07:52:31Z", "path": "documentation/modules/overview/con-metrics-overview-tools.adoc", "diffHunk": "@@ -0,0 +1,63 @@\n+// This module is included in:\n+//\n+// overview/assembly-metrics-overview.adoc\n+\n+[id=\"metrics-overview-tools-{context}\"]\n+= Prometheus\n+\n+Prometheus can extract metrics data from Kafka components and the Strimzi Operators.\n+\n+To use Prometheus to obtain metrics data and provide notifications, Prometheus and the Prometheus Alertmanager plugin must be deployed.\n+Kafka resources must also be deployed or redeployed with Prometheus configuration to expose the metrics data.\n+\n+Prometheus scrapes the exposed metrics data for monitoring.\n+Alertmanager issues notifications on conditions that indicate potential issues based on pre-defined alerting rules.", "originalCommit": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDk2MjExNw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r480962117", "bodyText": "Yeah, the Issue/issue isn't great, particulalrly as we're conveying two meanings.\nChanged to:\n\nAlertmanager issues alerts when conditions indicate potential problems, based on pre-defined alerting rules.", "author": "PaulRMellor", "createdAt": "2020-09-01T08:25:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1ODY0Mw=="}], "type": "inlineReview"}, {"oid": "1a923c0085013b0b6147f22e100367793ad9f9fc", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1a923c0085013b0b6147f22e100367793ad9f9fc", "message": "review edits PP, JS\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-09-01T08:26:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk3MzkwNA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r481973904", "bodyText": "It's maybe worth stating that CORS is optional.", "author": "laidan6000", "createdAt": "2020-09-02T10:43:15Z", "path": "documentation/modules/overview/con-configuration-points-bridge.adoc", "diffHunk": "@@ -11,6 +11,18 @@ Kafka Bridge consumer and producer configuration is standard, as described in th\n \n HTTP-related configuration options set the port connection which the server listens on.\n \n+[discrete]\n+== CORS\n+", "originalCommit": "1a923c0085013b0b6147f22e100367793ad9f9fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg1NTc1Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r482855752", "bodyText": "Good idea. I've added If you choose to use CORS, ...", "author": "PaulRMellor", "createdAt": "2020-09-03T09:53:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk3MzkwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk3NTEyOA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r481975128", "bodyText": "Does the intended audience understand what is meant by an origin, in the context of HTTP requests? Consider adding an example, such as \"for example, a domain\".", "author": "laidan6000", "createdAt": "2020-09-02T10:45:25Z", "path": "documentation/modules/overview/con-configuration-points-bridge.adoc", "diffHunk": "@@ -11,6 +11,18 @@ Kafka Bridge consumer and producer configuration is standard, as described in th\n \n HTTP-related configuration options set the port connection which the server listens on.\n \n+[discrete]\n+== CORS\n+\n+The Kafka Bridge supports the use of Cross-Origin Resource Sharing (CORS).\n+CORS is a HTTP mechanism that allows browser access to selected resources from more than one origin.", "originalCommit": "1a923c0085013b0b6147f22e100367793ad9f9fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg2NTM0NA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r482865344", "bodyText": "Added:\n\n, for example, resources on different domains.", "author": "PaulRMellor", "createdAt": "2020-09-03T10:10:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk3NTEyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk3NTU5MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r481975590", "bodyText": "Explain where you can define the list of allowed origins.\nSuggested change:\nfor interaction with the Kafka cluster > for interaction with the Kafka cluster through the Kafka Bridge", "author": "laidan6000", "createdAt": "2020-09-02T10:46:14Z", "path": "documentation/modules/overview/con-configuration-points-bridge.adoc", "diffHunk": "@@ -11,6 +11,18 @@ Kafka Bridge consumer and producer configuration is standard, as described in th\n \n HTTP-related configuration options set the port connection which the server listens on.\n \n+[discrete]\n+== CORS\n+\n+The Kafka Bridge supports the use of Cross-Origin Resource Sharing (CORS).\n+CORS is a HTTP mechanism that allows browser access to selected resources from more than one origin.\n+You can define a list of allowed resource origins and HTTP methods for interaction with the Kafka cluster.", "originalCommit": "1a923c0085013b0b6147f22e100367793ad9f9fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg3NDgzNg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r482874836", "bodyText": "Updated:\n\nIf you choose to use CORS, you can define a list of allowed resource origins and HTTP methods for interaction with the Kafka cluster through the Kafka Bridge.\nThe lists are defined in the http specification of the Kafka Bridge configuration.", "author": "PaulRMellor", "createdAt": "2020-09-03T10:27:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk3NTU5MA=="}], "type": "inlineReview"}, {"oid": "a466dfb5958d355503d48c621765aab0e8e07d3c", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a466dfb5958d355503d48c621765aab0e8e07d3c", "message": "review edits DL\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-09-03T10:28:39Z", "type": "commit"}]}