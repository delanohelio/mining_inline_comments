{"pr_number": 3071, "pr_title": "[DOC] Additional mm2 config properties", "pr_createdAt": "2020-05-21T15:12:22Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3071", "timeline": [{"oid": "93df284a77b0a3fcb84b3c07ddf48af01789081e", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/93df284a77b0a3fcb84b3c07ddf48af01789081e", "message": "additional mm2 config properties\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-05-21T14:59:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0MTkwMg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3071#discussion_r428741902", "bodyText": "this 1 doesn't make sense here. It should be a callout I guess", "author": "ppatierno", "createdAt": "2020-05-21T15:47:47Z", "path": "documentation/modules/mirrormaker2/proc-mirrormaker-replication.adoc", "diffHunk": "@@ -116,6 +116,62 @@ spec:\n         checkpoints.topic.replication.factor: 1 <25>\n     topicsPattern: \".*\" <26>\n     groupsPattern: \"group1|group2|group3\" <27>\n+  resources: <28>\n+    requests:\n+      cpu: \"1\"\n+      memory: 2Gi\n+    limits:\n+      cpu: \"2\"\n+      memory: 2Gi\n+  logging: <29>\n+    type: inline\n+    loggers:\n+      connect.root.logger.level: \"INFO\"\n+  readinessProbe: <30>\n+    initialDelaySeconds: 15\n+    timeoutSeconds: 5\n+  livenessProbe:\n+    initialDelaySeconds: 15\n+    timeoutSeconds: 5\n+  jvmOptions: <31>\n+    \"-Xmx\": \"1g\"\n+    \"-Xms\": \"1g\"\n+  image: my-org/my-image:latest <32>\n+  template: <33>\n+    pod:\n+      affinity:\n+        podAntiAffinity:\n+          requiredDuringSchedulingIgnoredDuringExecution:\n+            - labelSelector:\n+                matchExpressions:\n+                  - key: application\n+                    operator: In\n+                    values:\n+                      - postgresql\n+                      - mongodb\n+              topologyKey: \"kubernetes.io/hostname\"\n+    connectContainer: 1", "originalCommit": "93df284a77b0a3fcb84b3c07ddf48af01789081e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxMDc4OQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3071#discussion_r429210789", "bodyText": "We talk about it in callout 33, but I've split into separate callouts", "author": "PaulRMellor", "createdAt": "2020-05-22T12:13:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0MTkwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0Mjg4NQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3071#discussion_r428742885", "bodyText": "\"... to Kafka Mirror Maker ...\"", "author": "ppatierno", "createdAt": "2020-05-21T15:48:53Z", "path": "documentation/modules/mirrormaker2/proc-mirrormaker-replication.adoc", "diffHunk": "@@ -146,6 +202,15 @@ Standard Apache Kafka configuration may be provided, restricted to those propert\n <26> Topic replication from the source cluster defined as regular expression patterns. Here we request all topics.\n <27> Consumer group replication from the source cluster defined as regular expression patterns. Here we request three consumer groups by name.\n You can use comma-separated lists.\n+<28> Requests for reservation of supported resources, currently `cpu` and `memory`, and limits to specify the maximum resources that can be consumed.\n+<29> Specified loggers and log levels added directly (`inline`) or indirectly (`external`) through a ConfigMap. A custom ConfigMap must be placed under the `log4j.properties` or `log4j2.properties` key. Kafka Connect has a single logger called `connect.root.logger.level`. You can set the log level to INFO, ERROR, WARN, TRACE, DEBUG, FATAL or OFF.\n+<30> Healthchecks to know when to restart a container (liveness) and when a container can accept traffic (readiness).\n+<31> JVM configuration options to optimize performance for the Virtual Machine (VM) running Kafka MirrorMaker.\n+<32> ADVANCED OPTION: Container image configuration, which is xref:con-configuring-container-images-deployment-configuration-kafka-mirror-maker[recommended only in special situations].\n+<33> xref:assembly-customizing-deployments-str[Template customization]. Here a pod is scheduled based with anti-affinity, so the pod is not scheduled on nodes with the same hostname.\n+Environment variables are also set for distributed tracing using Jaeger.\n+<34> xref:assembly-distributed-tracing-str[Distributed tracing is enabled for Jaeger].\n+<35> Kubernetes Secret mounted to Kafka Connect as an environment variable.", "originalCommit": "93df284a77b0a3fcb84b3c07ddf48af01789081e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0MzkzNQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3071#discussion_r428743935", "bodyText": "if adding Jaeger to MirrorMaker configuration, then you should add the env vars as well. Am I right @scholzj ?", "author": "ppatierno", "createdAt": "2020-05-21T15:50:07Z", "path": "documentation/modules/proc-configuring-mirror-maker.adoc", "diffHunk": "@@ -114,8 +114,9 @@ spec:\n                       - postgresql\n                       - mongodb\n               topologyKey: \"kubernetes.io/hostname\"\n+  tracing: <20>\n+    type: jaeger", "originalCommit": "93df284a77b0a3fcb84b3c07ddf48af01789081e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxNDQ1MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3071#discussion_r429214451", "bodyText": "I guess so. I've added, with link to tracing section.", "author": "PaulRMellor", "createdAt": "2020-05-22T12:22:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc0MzkzNQ=="}], "type": "inlineReview"}, {"oid": "15256a0b3aad0acec868c32b5c6a59135e90727a", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/15256a0b3aad0acec868c32b5c6a59135e90727a", "message": "review edits PP\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-05-22T12:30:22Z", "type": "commit"}, {"oid": "330a21351118ddfa067a4d385299d3f0aeb187cc", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/330a21351118ddfa067a4d385299d3f0aeb187cc", "message": "review edits PP\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-05-22T12:30:42Z", "type": "commit"}]}