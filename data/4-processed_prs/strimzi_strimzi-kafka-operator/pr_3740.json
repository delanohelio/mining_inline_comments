{"pr_number": 3740, "pr_title": "[DOC] note on naming of route listeners", "pr_createdAt": "2020-10-02T16:24:28Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740", "timeline": [{"oid": "da898a20cd3e678af12772610a8947261323beff", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/da898a20cd3e678af12772610a8947261323beff", "message": "[DOC] note on naming of route listeners\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-10-02T16:10:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NjE3MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r499156171", "bodyText": "Actually, the name of the listener is only up to 11 characters. The 63 characters is limit for the route name which includes namespace, name of the cluster, name of the listener etc. So it is a bit more complicated. I would maybe suggest more generic notice:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            WARNING: Make sure that the name of the listener does not exceed 63 characters.\n          \n          \n            \n            WARNING: The overall length of the OpenShift Route address might have a limited length. The Route address is based on the name of the Kafka cluster, name of the listener, and the name of the namespace they are created in. Please keep this in mind when naming the namespaces, Kafka clusters and listeners.", "author": "scholzj", "createdAt": "2020-10-03T15:15:08Z", "path": "documentation/modules/proc-accessing-kafka-using-routes.adoc", "diffHunk": "@@ -40,6 +40,8 @@ spec:\n   zookeeper:\n     # ...\n ----\n++\n+WARNING: Make sure that the name of the listener does not exceed 63 characters.", "originalCommit": "da898a20cd3e678af12772610a8947261323beff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ1MjE0Nw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r499452147", "bodyText": "It's a fairly complex idea to grasp. An example might help.", "author": "laidan6000", "createdAt": "2020-10-05T09:12:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NjE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY3NTc2OA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r499675768", "bodyText": "I've put the metadata in the example and updated the warning with example.\n@scholzj - I think it's useful to include the limit?\n\nFor example:\napiVersion: {KafkaApiVersion}\nkind: Kafka\nmetadata:\n  labels:\n    app: my-cluster\n  name: my-cluster\n  namespace: myproject\nspec:\n  kafka:\n    # ...\n    listeners:\n      - name: external\n        port: 9094\n        type: route\n        tls: true\n        # ...\n    # ...\n  zookeeper:\n    # ...\n\nWARNING: An OpenShift Route address comprises the name of the Kafka cluster, the name of the listener, and the name of the namespace it is created in. For example, my-cluster-external-myproject. Be careful with naming as the whole length of the address must not exceed 63 characters.", "author": "PaulRMellor", "createdAt": "2020-10-05T15:15:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NjE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY5NjE3OA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r499696178", "bodyText": "Which limit do you mean? The 11 characters? Or the 63 characters?", "author": "scholzj", "createdAt": "2020-10-05T15:44:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NjE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTcxMDU4OA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r499710588", "bodyText": "Actually both might be an idea.:\nWARNING: An OpenShift Route address comprises the name of the Kafka cluster, the name of the listener, and the name of the namespace it is created in. For example, my-cluster-external-myproject. Be careful with naming as the whole length of the address must not exceed 63 characters, with an 11-character limit for the listener name.", "author": "PaulRMellor", "createdAt": "2020-10-05T16:05:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NjE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1NTkxOQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r499755919", "bodyText": "Well, the 11 character limit is general. So I think if we want to mention it I would not cover it here but in some more general section (it is already in the API reference of course). I would maybe not put it here as I think it is too confusing if we don't want to go into all the details how the routes are named.", "author": "scholzj", "createdAt": "2020-10-05T17:23:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NjE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIzNTIwMA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r500235200", "bodyText": "Thanks. Let's remove the 11 character bit.\nThen we can have the note with or without the 63 char ref:\n\nWARNING: An OpenShift Route address comprises the name of the Kafka cluster, the name of the listener, and the name of the namespace it is created in. For example, my-cluster-external-myproject. Be careful that the whole length of the address does not exceed a maximum limit of 63 characters.\n\nOr\n\nWARNING: An OpenShift Route address comprises the name of the Kafka cluster, the name of the listener, and the name of the namespace it is created in. For example, my-cluster-external-myproject. Be careful that the whole length of the address does not exceed a maximum limit.", "author": "PaulRMellor", "createdAt": "2020-10-06T12:29:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NjE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM0MDcyMQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r500340721", "bodyText": "I'm not sure how often these two change ... but we can keep the 63 characters there I guess. Please also look at the other comment I left below.", "author": "scholzj", "createdAt": "2020-10-06T14:36:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NjE3MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQyOTExNA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r500429114", "bodyText": "Thanks. will keep 63 characters. I guess it's good practice to keep under that anyway", "author": "PaulRMellor", "createdAt": "2020-10-06T16:19:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTE1NjE3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ1MTA1MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r499451050", "bodyText": "I think this title is a bit too long when compared to the others. The chapter is a mixed bag; there are discussions of Secrets and keys as well as TLS certificates.\nAlternatives to consider:\nTLS encryption and authentication\nTLS encryption\nTLS and certificate management", "author": "laidan6000", "createdAt": "2020-10-05T09:10:20Z", "path": "documentation/assemblies/security/assembly-security.adoc", "diffHunk": "@@ -3,7 +3,7 @@\n // master.adoc\n \n [id='security-{context}']\n-= Security\n+= Managing TLS certificates for secure communication", "originalCommit": "da898a20cd3e678af12772610a8947261323beff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTcwNzYwOA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r499707608", "bodyText": "Thanks Daniel. It's all about maintaining certificates really, so I thought Managing TLS certificates", "author": "PaulRMellor", "createdAt": "2020-10-05T16:01:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ1MTA1MA=="}], "type": "inlineReview"}, {"oid": "53afba965a6a58e2e7f4e1298bef7dcb2e987ee4", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/53afba965a6a58e2e7f4e1298bef7dcb2e987ee4", "message": "review edits JS, DL\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-10-05T16:09:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIzNDY5NA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r500234694", "bodyText": "I think if we want the example, we should use my-cluster-kafka-listener1-bootstrap-myproject to make it more corresponding ... this would be the longest route name ... <cluster-name>-kafka-<listener-name>-bootstrap-<namespace>.", "author": "scholzj", "createdAt": "2020-10-06T12:28:30Z", "path": "documentation/modules/proc-accessing-kafka-using-routes.adoc", "diffHunk": "@@ -40,6 +45,9 @@ spec:\n   zookeeper:\n     # ...\n ----\n++\n+WARNING: An OpenShift Route address comprises the name of the Kafka cluster, the name of the listener, and the name of the namespace it is created in.\n+For example, `my-cluster-external-myproject`. Be careful with naming as the whole length of the address must not exceed 63 characters, with an 11-character limit for the listener name.", "originalCommit": "53afba965a6a58e2e7f4e1298bef7dcb2e987ee4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQzNzgxMA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3740#discussion_r500437810", "bodyText": "Okay. I've changed the examples in the metadata and updated to:\nWARNING: An OpenShift Route address comprises the name of the Kafka cluster, the name of the listener, and the name of the namespace it is created in. For example, my-cluster-kafka-listener1-bootstrap-myproject (CLUSTER-NAME-kafka-LISTENER-NAME-bootstrap-NAMESPACE). Be careful that the whole length of the address does not exceed a maximum limit of 63 characters.", "author": "PaulRMellor", "createdAt": "2020-10-06T16:32:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDIzNDY5NA=="}], "type": "inlineReview"}, {"oid": "3c3236607933dc0c59dfa5d912277641b0eb3091", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/3c3236607933dc0c59dfa5d912277641b0eb3091", "message": "review edits JS\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-10-06T16:33:12Z", "type": "commit"}, {"oid": "ffd87d2473e2b8633dac9cd36911a45168df85ca", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ffd87d2473e2b8633dac9cd36911a45168df85ca", "message": "review edits JS\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-10-06T16:35:09Z", "type": "commit"}, {"oid": "d556c4a1d6e19c8e5d2caac29f4abcd9cde187d6", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d556c4a1d6e19c8e5d2caac29f4abcd9cde187d6", "message": "review edits JS\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-10-06T16:37:41Z", "type": "commit"}]}