{"pr_number": 4115, "pr_title": "Add support for Kafka 2.7.0", "pr_createdAt": "2020-12-16T00:15:35Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115", "timeline": [{"oid": "1422566897a01cc9b94b69c18ad7091796892a86", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1422566897a01cc9b94b69c18ad7091796892a86", "message": "Add support for Kafka 2.7.0-RC5\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T16:23:30Z", "type": "commit"}, {"oid": "ee80317b5a5954d562cbc07bdb86b50a9ca8cd42", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ee80317b5a5954d562cbc07bdb86b50a9ca8cd42", "message": "Fix failing STs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T16:23:30Z", "type": "commit"}, {"oid": "45891a2bf7c6165fdb48801ecfe9613a188cbed8", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/45891a2bf7c6165fdb48801ecfe9613a188cbed8", "message": "Fix ZookeeperUpgrade tests\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T16:23:30Z", "type": "commit"}, {"oid": "c40885f02d87080b634b143e4a39966a3c83e016", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c40885f02d87080b634b143e4a39966a3c83e016", "message": "Fix imports\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T16:23:31Z", "type": "commit"}, {"oid": "69e8a4a101570d533844b5f513fc5372e7e6a785", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/69e8a4a101570d533844b5f513fc5372e7e6a785", "message": "Fix some more STs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T16:23:31Z", "type": "commit"}, {"oid": "5a786be077569a61358f2e725a5c8800b14cc027", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5a786be077569a61358f2e725a5c8800b14cc027", "message": "Move to final version\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T16:23:31Z", "type": "commit"}, {"oid": "25f8fc5c126d95559b98b139e0f528755bd92e8d", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/25f8fc5c126d95559b98b139e0f528755bd92e8d", "message": "Use the right Scala version\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T16:46:03Z", "type": "commit"}, {"oid": "25f8fc5c126d95559b98b139e0f528755bd92e8d", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/25f8fc5c126d95559b98b139e0f528755bd92e8d", "message": "Use the right Scala version\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-12-20T16:46:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NDg3OQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115#discussion_r546654879", "bodyText": "shouldn't we delete above 2.5.x? The same applies to the other env vars.", "author": "ppatierno", "createdAt": "2020-12-21T11:29:04Z", "path": "helm-charts/helm2/strimzi-kafka-operator/templates/_kafka_image_map.tpl", "diffHunk": "@@ -6,36 +6,41 @@\n {{/* Generate the kafka image map */}}\n {{- define \"strimzi.kafka.image.map\" }}\n             - name: STRIMZI_DEFAULT_TLS_SIDECAR_ENTITY_OPERATOR_IMAGE\n-              value: {{ default .Values.tlsSidecarEntityOperator.image.registry .Values.imageRegistryOverride }}/{{ default .Values.tlsSidecarEntityOperator.image.repository .Values.imageRepositoryOverride }}/{{ .Values.tlsSidecarEntityOperator.image.name }}:{{ default .Values.tlsSidecarEntityOperator.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+              value: {{ default .Values.tlsSidecarEntityOperator.image.registry .Values.imageRegistryOverride }}/{{ default .Values.tlsSidecarEntityOperator.image.repository .Values.imageRepositoryOverride }}/{{ .Values.tlsSidecarEntityOperator.image.name }}:{{ default .Values.tlsSidecarEntityOperator.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0\n             - name: STRIMZI_DEFAULT_KAFKA_EXPORTER_IMAGE\n-              value: {{ default .Values.kafkaExporter.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafkaExporter.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafkaExporter.image.name }}:{{ default .Values.kafkaExporter.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+              value: {{ default .Values.kafkaExporter.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafkaExporter.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafkaExporter.image.name }}:{{ default .Values.kafkaExporter.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0\n             - name: STRIMZI_DEFAULT_CRUISE_CONTROL_IMAGE\n-              value: {{ default .Values.cruiseControl.image.registry .Values.imageRegistryOverride }}/{{ default .Values.cruiseControl.image.repository .Values.imageRepositoryOverride }}/{{ .Values.cruiseControl.image.name }}:{{ default .Values.cruiseControl.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+              value: {{ default .Values.cruiseControl.image.registry .Values.imageRegistryOverride }}/{{ default .Values.cruiseControl.image.repository .Values.imageRepositoryOverride }}/{{ .Values.cruiseControl.image.name }}:{{ default .Values.cruiseControl.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0\n             - name: STRIMZI_DEFAULT_TLS_SIDECAR_CRUISE_CONTROL_IMAGE\n-              value: {{ default .Values.tlsSidecarCruiseControl.image.registry .Values.imageRegistryOverride }}/{{ default .Values.tlsSidecarCruiseControl.image.repository .Values.imageRepositoryOverride }}/{{ .Values.tlsSidecarCruiseControl.image.name }}:{{ default .Values.tlsSidecarCruiseControl.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+              value: {{ default .Values.tlsSidecarCruiseControl.image.registry .Values.imageRegistryOverride }}/{{ default .Values.tlsSidecarCruiseControl.image.repository .Values.imageRepositoryOverride }}/{{ .Values.tlsSidecarCruiseControl.image.name }}:{{ default .Values.tlsSidecarCruiseControl.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0\n             - name: STRIMZI_KAFKA_IMAGES\n               value: |                 \n                 2.5.0={{ default .Values.kafka.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafka.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafka.image.name }}:{{ default .Values.kafka.image.tagPrefix .Values.imageTagOverride }}-kafka-2.5.0\n                 2.5.1={{ default .Values.kafka.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafka.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafka.image.name }}:{{ default .Values.kafka.image.tagPrefix .Values.imageTagOverride }}-kafka-2.5.1\n                 2.6.0={{ default .Values.kafka.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafka.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafka.image.name }}:{{ default .Values.kafka.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+                2.7.0={{ default .Values.kafka.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafka.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafka.image.name }}:{{ default .Values.kafka.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0", "originalCommit": "25f8fc5c126d95559b98b139e0f528755bd92e8d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NzE5Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115#discussion_r546657196", "bodyText": "2.5.0 is still supported. I do not see any reason for removing it since so far there are no features implemented which would not support 2.5.0 / 2.5.1.", "author": "scholzj", "createdAt": "2020-12-21T11:34:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NDg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY2MDQzNw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115#discussion_r546660437", "bodyText": "it confuses me because in the upgrade doc we have a lower Kafka version as 2.6 so people coming from 2.5.x could be confused as well? So if I want to go from 2.5.x to 2.7.0 I should read about it in the doc?", "author": "ppatierno", "createdAt": "2020-12-21T11:42:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NDg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY4MTkyMw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115#discussion_r546681923", "bodyText": "If the upgrade docs talk about upgrade from 2.5 then the users upgrading from 2.6 will be confused. I think using the latest supported Kafka from previous version makes more sense in this context.", "author": "scholzj", "createdAt": "2020-12-21T12:35:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NDg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY4NTk0Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115#discussion_r546685946", "bodyText": "Anyway it's going to be confusing :)", "author": "ppatierno", "createdAt": "2020-12-21T12:45:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NDg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY4NjkyMg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115#discussion_r546686922", "bodyText": "It will ... but I think that keeping 2.5 is still more user-friendly then removing it to he the upgrade docs fit in 100% of cases. Thanks for approving.", "author": "scholzj", "createdAt": "2020-12-21T12:47:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NDg3OQ=="}], "type": "inlineReview"}]}