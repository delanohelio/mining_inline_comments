{"pr_number": 2863, "pr_title": "Maybe fix ZK leader test", "pr_createdAt": "2020-04-20T10:50:14Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2863", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA0MTk1Ng==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2863#discussion_r412041956", "bodyText": "It seems a bit weird/ugly to me that the text context can be completed in two different ways, one via completeNow(), if zks is empty, and the other by the checkpoints getting flagged when zks is nonempty. Is there a simple way we can just make the call to zk.stop() be synchronous? That way you could just call completeNow() after the loop, no matter the emptiness of zks.", "author": "tombentley", "createdAt": "2020-04-21T09:51:44Z", "path": "cluster-operator/src/test/java/io/strimzi/operator/cluster/operator/resource/ZookeeperLeaderFinderTest.java", "diffHunk": "@@ -190,9 +193,12 @@ public void stop() {\n     }\n \n     @AfterEach\n-    public void stopZks() {\n+    public void stopZks(VertxTestContext vertxTestContext) {\n+        if (zks.isEmpty()) {\n+            vertxTestContext.completeNow();\n+        }\n         for (FakeZk zk : zks) {\n-            zk.stop();\n+            zk.stop(vertxTestContext);\n         }", "originalCommit": "7921ec2424bbf1857839c33e73bc70939b1c0ea6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "678e656d4d38f524691b4e46419580fb40bfa932", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/678e656d4d38f524691b4e46419580fb40bfa932", "message": "WIP: Maybe fix ZK leader test\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>", "committedDate": "2020-04-21T11:38:44Z", "type": "commit"}, {"oid": "733b6916ba4ce02e274aec8d79a8ced2513605cd", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/733b6916ba4ce02e274aec8d79a8ced2513605cd", "message": "comment\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>", "committedDate": "2020-04-21T11:41:01Z", "type": "commit"}, {"oid": "733b6916ba4ce02e274aec8d79a8ced2513605cd", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/733b6916ba4ce02e274aec8d79a8ced2513605cd", "message": "comment\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>", "committedDate": "2020-04-21T11:41:01Z", "type": "forcePushed"}]}