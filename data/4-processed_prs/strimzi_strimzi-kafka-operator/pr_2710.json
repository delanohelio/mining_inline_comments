{"pr_number": 2710, "pr_title": "fix: Allow MM2 cluster with empty tls property", "pr_createdAt": "2020-03-17T22:57:31Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2710", "timeline": [{"oid": "c8199ffffb2000f72821cc80f9f2dc6788fbad47", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c8199ffffb2000f72821cc80f9f2dc6788fbad47", "message": "fix: Allow MM2 cluster with empty tls property\n\n - This commit updates the MirrorMaker 2.0 assembly operator to support\ncluster with empty tls properties (i.e. no trustedCertificates list).\nThis allows the MM2 operator to connect to clusters that use SSL without\nrequiring the server certificates.\n - It also fixes the Tini warning seen in the MM2 pod logs by exec'ing\nthe call to start Kafka Connect:\n```\n[WARN  tini (41)] Tini is not running as PID 1 and isn't registered as\na child subreaper. Zombie processes will not be re-parented to Tini, so\nzombie reaping won't work\n```\n\nSigned-off-by: Andrew Borley <borley@uk.ibm.com>", "committedDate": "2020-03-17T22:47:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE0NzA0MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2710#discussion_r394147040", "bodyText": "No tini?", "author": "tombentley", "createdAt": "2020-03-18T07:24:32Z", "path": "docker-images/kafka/scripts/kafka_mirror_maker_2_run.sh", "diffHunk": "@@ -63,4 +63,4 @@ if [ -n \"$STRIMZI_JAVA_SYSTEM_PROPERTIES\" ]; then\n     export KAFKA_OPTS=\"${KAFKA_OPTS} ${STRIMZI_JAVA_SYSTEM_PROPERTIES}\"\n fi\n \n-./kafka_connect_run.sh\n+exec ./kafka_connect_run.sh", "originalCommit": "c8199ffffb2000f72821cc80f9f2dc6788fbad47", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE4NjQwMg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2710#discussion_r394186402", "bodyText": "tini is used inside the kafka_connect_run.sh, isn't it enough?", "author": "ppatierno", "createdAt": "2020-03-18T08:50:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE0NzA0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE5NzYzOA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2710#discussion_r394197638", "bodyText": "Yep. The actual java process for Kafka connect is run in tini via the kafka_connect_run.sh script. When that script was being called directly (rather than being exec'd as in this fix) it was causing tini to be run as a child process, meaning tini would output the following warning in the logs:\n[WARN  tini (41)] Tini is not running as PID 1 and isn't registered as\na child subreaper. Zombie processes will not be re-parented to Tini, so\nzombie reaping won't work", "author": "ajborley", "createdAt": "2020-03-18T09:10:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE0NzA0MA=="}], "type": "inlineReview"}]}