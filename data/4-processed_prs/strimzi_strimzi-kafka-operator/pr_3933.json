{"pr_number": 3933, "pr_title": "[DOC] Add docs and CHANGELOG record for disabling ownerReference on CA secrets", "pr_createdAt": "2020-11-09T09:26:29Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3933", "timeline": [{"oid": "b054f8dcf0e88d47fda652ae70a534c55717c5b7", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b054f8dcf0e88d47fda652ae70a534c55717c5b7", "message": "Add docs and CHANGELOG record for disabling ownerReference on CA secrets\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>", "committedDate": "2020-11-09T09:25:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcxNzk3MQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3933#discussion_r519717971", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            By default, the CA secrets created by Strimzi will have the `ownerReference` field set to the `Kafka` custom resource.\n          \n          \n            \n            By default, the CA secrets created by Strimzi have an `ownerReference` property set to the `Kafka` custom resource.", "author": "PaulRMellor", "createdAt": "2020-11-09T10:52:39Z", "path": "documentation/modules/security/ref-certificates-and-secrets.adoc", "diffHunk": "@@ -162,6 +162,29 @@ NOTE: `_<cluster>_-clients-ca` is used to sign certificates of client applicatio\n It needs to be accessible to the Strimzi components and for administrative access if you are intending to issue application certificates without using the User Operator.\n You can enforce this using Kubernetes role-based access controls if necessary.\n \n+== Disabling `ownerReference` in the CA Secrets\n+\n+By default, the CA secrets created by Strimzi will have the `ownerReference` field set to the `Kafka` custom resource.", "originalCommit": "b054f8dcf0e88d47fda652ae70a534c55717c5b7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcxODUxMQ==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3933#discussion_r519718511", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This means that when the custom resource is deleted, the CA secrets will be garbage collected (deleted) by Kubernetes as well.\n          \n          \n            \n            This means that when the `Kafka` custom resource is deleted, the CA secrets are garbage collected (deleted) by Kubernetes as well.", "author": "PaulRMellor", "createdAt": "2020-11-09T10:53:31Z", "path": "documentation/modules/security/ref-certificates-and-secrets.adoc", "diffHunk": "@@ -162,6 +162,29 @@ NOTE: `_<cluster>_-clients-ca` is used to sign certificates of client applicatio\n It needs to be accessible to the Strimzi components and for administrative access if you are intending to issue application certificates without using the User Operator.\n You can enforce this using Kubernetes role-based access controls if necessary.\n \n+== Disabling `ownerReference` in the CA Secrets\n+\n+By default, the CA secrets created by Strimzi will have the `ownerReference` field set to the `Kafka` custom resource.\n+This means that when the custom resource is deleted, the CA secrets will be garbage collected (deleted) by Kubernetes as well.", "originalCommit": "b054f8dcf0e88d47fda652ae70a534c55717c5b7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcxOTI2Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3933#discussion_r519719262", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When disabled, the CA secrets will not be deleted by Kubernetes together with the corresponding `Kafka` custom resource.\n          \n          \n            \n            When disabled, CA secrets are not deleted by Kubernetes when the corresponding `Kafka` custom resource is deleted.", "author": "PaulRMellor", "createdAt": "2020-11-09T10:54:44Z", "path": "documentation/modules/security/ref-certificates-and-secrets.adoc", "diffHunk": "@@ -162,6 +162,29 @@ NOTE: `_<cluster>_-clients-ca` is used to sign certificates of client applicatio\n It needs to be accessible to the Strimzi components and for administrative access if you are intending to issue application certificates without using the User Operator.\n You can enforce this using Kubernetes role-based access controls if necessary.\n \n+== Disabling `ownerReference` in the CA Secrets\n+\n+By default, the CA secrets created by Strimzi will have the `ownerReference` field set to the `Kafka` custom resource.\n+This means that when the custom resource is deleted, the CA secrets will be garbage collected (deleted) by Kubernetes as well.\n+\n+If you want to re-use the CA for a new cluster, you can disable the `ownerReference`.\n+When disabled, the CA secrets will not be deleted by Kubernetes together with the corresponding `Kafka` custom resource.", "originalCommit": "b054f8dcf0e88d47fda652ae70a534c55717c5b7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcyMDIxMw==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3933#discussion_r519720213", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            .Example Kafka configuration with disabled `ownerReference` for Cluster and Client CAs\n          \n          \n            \n            .Example Kafka configuration with disabled `ownerReference` for cluster and client CAs", "author": "PaulRMellor", "createdAt": "2020-11-09T10:56:17Z", "path": "documentation/modules/security/ref-certificates-and-secrets.adoc", "diffHunk": "@@ -162,6 +162,29 @@ NOTE: `_<cluster>_-clients-ca` is used to sign certificates of client applicatio\n It needs to be accessible to the Strimzi components and for administrative access if you are intending to issue application certificates without using the User Operator.\n You can enforce this using Kubernetes role-based access controls if necessary.\n \n+== Disabling `ownerReference` in the CA Secrets\n+\n+By default, the CA secrets created by Strimzi will have the `ownerReference` field set to the `Kafka` custom resource.\n+This means that when the custom resource is deleted, the CA secrets will be garbage collected (deleted) by Kubernetes as well.\n+\n+If you want to re-use the CA for a new cluster, you can disable the `ownerReference`.\n+When disabled, the CA secrets will not be deleted by Kubernetes together with the corresponding `Kafka` custom resource.\n+\n+.Example Kafka configuration with disabled `ownerReference` for Cluster and Client CAs", "originalCommit": "b054f8dcf0e88d47fda652ae70a534c55717c5b7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcyMTM1NA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3933#discussion_r519721354", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you want to re-use the CA for a new cluster, you can disable the `ownerReference`.\n          \n          \n            \n            If you want to reuse the CA for a new cluster, you can disable the `ownerReference` by setting the `generateSecretOwnerReference` property for the cluster and client CAs to `false` in the `Kafka` configuration.", "author": "PaulRMellor", "createdAt": "2020-11-09T10:58:22Z", "path": "documentation/modules/security/ref-certificates-and-secrets.adoc", "diffHunk": "@@ -162,6 +162,29 @@ NOTE: `_<cluster>_-clients-ca` is used to sign certificates of client applicatio\n It needs to be accessible to the Strimzi components and for administrative access if you are intending to issue application certificates without using the User Operator.\n You can enforce this using Kubernetes role-based access controls if necessary.\n \n+== Disabling `ownerReference` in the CA Secrets\n+\n+By default, the CA secrets created by Strimzi will have the `ownerReference` field set to the `Kafka` custom resource.\n+This means that when the custom resource is deleted, the CA secrets will be garbage collected (deleted) by Kubernetes as well.\n+\n+If you want to re-use the CA for a new cluster, you can disable the `ownerReference`.", "originalCommit": "b054f8dcf0e88d47fda652ae70a534c55717c5b7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e56b235d04df8df5cc0a96c89b900f42d6a09181", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e56b235d04df8df5cc0a96c89b900f42d6a09181", "message": "Apply suggestions from code review\r\n\r\nSigned-off-by: Jakub Scholz <www@scholzj.com>\n\nCo-authored-by: PaulRMellor <47596553+PaulRMellor@users.noreply.github.com>", "committedDate": "2020-11-09T11:15:18Z", "type": "commit"}]}