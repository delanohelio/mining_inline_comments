{"pr_number": 3486, "pr_title": "[DOC] Remove the old certificates after a renewal of Cluster CA", "pr_createdAt": "2020-08-10T09:27:49Z", "pr_url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3486", "timeline": [{"oid": "33c872442ff30cd30b451da46d1e95b3c73882d3", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/33c872442ff30cd30b451da46d1e95b3c73882d3", "message": "[DOC] Remove the old certificates after a renewal of Cluster CA\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-08-10T09:25:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc4NjY3MA==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3486#discussion_r467786670", "bodyText": "Do we want a command here?", "author": "PaulRMellor", "createdAt": "2020-08-10T09:29:50Z", "path": "documentation/modules/security/proc-renewing-ca-certs-manually.adoc", "diffHunk": "@@ -27,16 +30,21 @@ A renewed certificate uses the same private key as the old certificate.\n \u00a6Annotate command\n \n \u00a6Cluster CA\n-\u00a6_<cluster-name>_-cluster-ca-cert\n-m\u00a6kubectl annotate secret _<cluster-name>_-cluster-ca-cert strimzi.io/force-renew=true\n+\u00a6_KAFKA-CLUSTER-NAME_-cluster-ca-cert\n+m\u00a6kubectl annotate secret _KAFKA-CLUSTER-NAME_-cluster-ca-cert strimzi.io/force-renew=true\n \n \u00a6Clients CA\n-\u00a6_<cluster-name>_-clients-ca-cert\n-m\u00a6kubectl annotate secret _<cluster-name>_-clients-ca-cert strimzi.io/force-renew=true\n+\u00a6_KAFKA-CLUSTER-NAME_-clients-ca-cert\n+m\u00a6kubectl annotate secret _KAFKA-CLUSTER-NAME_-clients-ca-cert strimzi.io/force-renew=true\n \n |===\n \n-At the next reconciliation the Cluster Operator will generate a new CA certificate for the `Secret` that you annotated. \n+. Delete old certificates from the Secret.\n++\n+When components are using the new certificates, older certificates might still be active.\n+Delete the old certificates to remove any potential security risk.", "originalCommit": "33c872442ff30cd30b451da46d1e95b3c73882d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE4MjEwMg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3486#discussion_r468182102", "bodyText": "I think this should only at the end of the file: before additional resources. Or it should be embedded as a NOTE: or something. Because this should be done only after the renewal etc.", "author": "scholzj", "createdAt": "2020-08-10T20:58:27Z", "path": "documentation/modules/security/proc-renewing-ca-certs-manually.adoc", "diffHunk": "@@ -27,16 +30,21 @@ A renewed certificate uses the same private key as the old certificate.\n \u00a6Annotate command\n \n \u00a6Cluster CA\n-\u00a6_<cluster-name>_-cluster-ca-cert\n-m\u00a6kubectl annotate secret _<cluster-name>_-cluster-ca-cert strimzi.io/force-renew=true\n+\u00a6_KAFKA-CLUSTER-NAME_-cluster-ca-cert\n+m\u00a6kubectl annotate secret _KAFKA-CLUSTER-NAME_-cluster-ca-cert strimzi.io/force-renew=true\n \n \u00a6Clients CA\n-\u00a6_<cluster-name>_-clients-ca-cert\n-m\u00a6kubectl annotate secret _<cluster-name>_-clients-ca-cert strimzi.io/force-renew=true\n+\u00a6_KAFKA-CLUSTER-NAME_-clients-ca-cert\n+m\u00a6kubectl annotate secret _KAFKA-CLUSTER-NAME_-clients-ca-cert strimzi.io/force-renew=true\n \n |===\n \n-At the next reconciliation the Cluster Operator will generate a new CA certificate for the `Secret` that you annotated. \n+. Delete old certificates from the Secret.\n++\n+When components are using the new certificates, older certificates might still be active.\n+Delete the old certificates to remove any potential security risk.", "originalCommit": "33c872442ff30cd30b451da46d1e95b3c73882d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg2ODI1Mg==", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3486#discussion_r469868252", "bodyText": "I think a proper step is less likely to be missed than a note. How about this:", "author": "PaulRMellor", "createdAt": "2020-08-13T10:56:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE4MjEwMg=="}], "type": "inlineReview"}, {"oid": "5da6598dffac14c338161c2ac90490688f3bec29", "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5da6598dffac14c338161c2ac90490688f3bec29", "message": "review edits JS\n\nSigned-off-by: prmellor <pmellor@redhat.com>", "committedDate": "2020-08-13T10:57:16Z", "type": "commit"}]}