{"pr_number": 1517, "pr_title": "Allow upgrade logic per page type", "pr_createdAt": "2020-12-29T20:08:00Z", "pr_url": "https://github.com/quran/quran_android/pull/1517", "timeline": [{"oid": "4a215203aa6357f5d4ce0cbb1e90bd291e7bff0a", "url": "https://github.com/quran/quran_android/commit/4a215203aa6357f5d4ce0cbb1e90bd291e7bff0a", "message": "Allow upgrade logic per page type\n\nToday, there's a lot of code within the initial data check and upgrade\npath that's specific to a certain page type - for example, the database\nis bundled for madani databases, the pages may be bundled in the future\nfor warsh databases, and so on.\n\nThis patch adds an interface wherein different page types can intercept\nand handle updates on their own before going to the server for data.", "committedDate": "2020-12-29T19:55:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgzMjM1MA==", "url": "https://github.com/quran/quran_android/pull/1517#discussion_r549832350", "bodyText": "one day, these will become suspending functions in sha' Allah...", "author": "ahmedre", "createdAt": "2020-12-29T20:09:04Z", "path": "common/data/src/main/java/com/quran/data/core/QuranFileManager.kt", "diffHunk": "@@ -0,0 +1,23 @@\n+package com.quran.data.core\n+\n+import androidx.annotation.WorkerThread\n+\n+interface QuranFileManager {\n+  @WorkerThread", "originalCommit": "4a215203aa6357f5d4ce0cbb1e90bd291e7bff0a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgzMjQxNg==", "url": "https://github.com/quran/quran_android/pull/1517#discussion_r549832416", "bodyText": "moved into the madani implementation as an upgrade", "author": "ahmedre", "createdAt": "2020-12-29T20:09:24Z", "path": "app/src/main/java/com/quran/labs/androidquran/presenter/data/QuranDataPresenter.kt", "diffHunk": "@@ -294,24 +277,6 @@ class QuranDataPresenter @Inject internal constructor(\n     return quranDataStatus\n   }\n \n-  @WorkerThread\n-  private fun copyArabicDatabaseIfNecessary() {", "originalCommit": "4a215203aa6357f5d4ce0cbb1e90bd291e7bff0a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgzMjQ4Mw==", "url": "https://github.com/quran/quran_android/pull/1517#discussion_r549832483", "bodyText": "was not used today - but was planning on using for warsh, so moved this as a warsh upgrade and removed from here.", "author": "ahmedre", "createdAt": "2020-12-29T20:09:47Z", "path": "app/src/main/java/com/quran/labs/androidquran/presenter/data/QuranDataPresenter.kt", "diffHunk": "@@ -98,20 +95,6 @@ class QuranDataPresenter @Inject internal constructor(\n     }\n   }\n \n-  private fun copyLocalDataIfNecessary(status: QuranDataStatus): Single<QuranDataStatus> {", "originalCommit": "4a215203aa6357f5d4ce0cbb1e90bd291e7bff0a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}