{"pr_number": 11328, "pr_title": "[FLINK-16455][hive] Introduce flink-sql-connector-hive modules to provide hive uber jars", "pr_createdAt": "2020-03-06T06:14:18Z", "pr_url": "https://github.com/apache/flink/pull/11328", "timeline": [{"oid": "d42e0ab290c177605a78eb5ceb9eacbc72e54a15", "url": "https://github.com/apache/flink/commit/d42e0ab290c177605a78eb5ceb9eacbc72e54a15", "message": "[FLINK-16455][hive] Introduce flink-sql-connector-hive modules to provide hive uber jars", "committedDate": "2020-03-06T06:09:09Z", "type": "commit"}, {"oid": "26ec0ffd7aa85f2b38f9742aca4d5ea112567081", "url": "https://github.com/apache/flink/commit/26ec0ffd7aa85f2b38f9742aca4d5ea112567081", "message": "Update document", "committedDate": "2020-03-09T08:14:18Z", "type": "commit"}, {"oid": "f1d94b9792a597e9b935fe08001930a3eb27d789", "url": "https://github.com/apache/flink/commit/f1d94b9792a597e9b935fe08001930a3eb27d789", "message": "Update document", "committedDate": "2020-03-09T08:25:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzMDY5NQ==", "url": "https://github.com/apache/flink/pull/11328#discussion_r389530695", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            There are two way to hive dependencies. First way, using bundled hive jar, providing multiple bundle\n          \n          \n            \n            hive jars that can cover all remote metastore versions. Second way, user defined dependencies, you\n          \n          \n            \n            can build your own dependencies if you need to. \n          \n          \n            \n            There are two ways to add Hive dependencies. First is to use Flink's bundled Hive jars. You can choose a bundled Hive jar according to the version of the metastore you use. Second is to add each of the required jars separately. The second way can be useful if the Hive version you're using is not listed here.", "author": "lirui-apache", "createdAt": "2020-03-09T09:01:36Z", "path": "docs/dev/table/hive/index.md", "diffHunk": "@@ -92,6 +92,34 @@ to make the integration work in Table API program or SQL in SQL Client.\n Alternatively, you can put these dependencies in a dedicated folder, and add them to classpath with the `-C`\n or `-l` option for Table API program or SQL Client respectively.\n \n+Apache Hive is built on Hadoop, so you need Hadoop dependency first, please refer to\n+[Providing Hadoop classes]({{ site.baseurl }}/ops/deployment/hadoop.html#providing-hadoop-classes).\n+\n+There are two way to hive dependencies. First way, using bundled hive jar, providing multiple bundle\n+hive jars that can cover all remote metastore versions. Second way, user defined dependencies, you\n+can build your own dependencies if you need to. ", "originalCommit": "f1d94b9792a597e9b935fe08001930a3eb27d789", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzMzA3NA==", "url": "https://github.com/apache/flink/pull/11328#discussion_r389533074", "bodyText": "I don't think the Dependency Version column is useful. We just need to let users know which jar to download (or which mvn dependency to use), given the version of their HMS.", "author": "lirui-apache", "createdAt": "2020-03-09T09:06:54Z", "path": "docs/dev/table/hive/index.md", "diffHunk": "@@ -92,6 +92,34 @@ to make the integration work in Table API program or SQL in SQL Client.\n Alternatively, you can put these dependencies in a dedicated folder, and add them to classpath with the `-C`\n or `-l` option for Table API program or SQL Client respectively.\n \n+Apache Hive is built on Hadoop, so you need Hadoop dependency first, please refer to\n+[Providing Hadoop classes]({{ site.baseurl }}/ops/deployment/hadoop.html#providing-hadoop-classes).\n+\n+There are two way to hive dependencies. First way, using bundled hive jar, providing multiple bundle\n+hive jars that can cover all remote metastore versions. Second way, user defined dependencies, you\n+can build your own dependencies if you need to. \n+\n+#### Using bundled hive jar\n+\n+The following tables list all available bundled hive jars. You can pick one to the `/lib/` directory in Flink distribution.\n+\n+{% if site.is_stable %}\n+\n+| Remote Metastore   | Dependency Version  | Maven dependency             | SQL Client JAR         |", "originalCommit": "f1d94b9792a597e9b935fe08001930a3eb27d789", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNTA1Ng==", "url": "https://github.com/apache/flink/pull/11328#discussion_r389535056", "bodyText": "I think providing an example for this would be more helpful", "author": "lirui-apache", "createdAt": "2020-03-09T09:11:22Z", "path": "docs/dev/table/hive/index.md", "diffHunk": "@@ -281,6 +261,11 @@ Please find the required dependencies for different Hive major versions below.\n </div>\n </div>\n \n+If you use the hive version of HDP or CDH, you need to refer to the dependency in the previous section and select a similar version.\n+\n+And you need to specify selected and supported \"hive-version\" in yaml, HiveCatalog and HiveModule.", "originalCommit": "f1d94b9792a597e9b935fe08001930a3eb27d789", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA1NDMyMg==", "url": "https://github.com/apache/flink/pull/11328#discussion_r390054322", "bodyText": "I don't want provide too detailed information. This is the home page of hive. These words should be enough.", "author": "JingsongLi", "createdAt": "2020-03-10T01:56:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNTA1Ng=="}], "type": "inlineReview"}, {"oid": "002438e9d9969f32d050cae3da8cf2bd93667d53", "url": "https://github.com/apache/flink/commit/002438e9d9969f32d050cae3da8cf2bd93667d53", "message": "Update docs/dev/table/hive/index.md\n\nCo-Authored-By: Rui Li <lirui@apache.org>", "committedDate": "2020-03-10T01:50:10Z", "type": "commit"}, {"oid": "b4a76d76d2c1e9722befabc03b2191d053c70fa8", "url": "https://github.com/apache/flink/commit/b4a76d76d2c1e9722befabc03b2191d053c70fa8", "message": "Fix comments", "committedDate": "2020-03-10T01:56:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDExMDAwMw==", "url": "https://github.com/apache/flink/pull/11328#discussion_r390110003", "bodyText": "what does this part mean? exclude all the dependencies?", "author": "bowenli86", "createdAt": "2020-03-10T06:04:48Z", "path": "flink-connectors/flink-sql-connector-hive-1.2.2/pom.xml", "diffHunk": "@@ -0,0 +1,142 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+\t\t xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\t\t xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+\n+\t<modelVersion>4.0.0</modelVersion>\n+\n+\t<parent>\n+\t\t<groupId>org.apache.flink</groupId>\n+\t\t<artifactId>flink-connectors</artifactId>\n+\t\t<version>1.11-SNAPSHOT</version>\n+\t\t<relativePath>..</relativePath>\n+\t</parent>\n+\n+\t<artifactId>flink-sql-connector-hive-1.2.2_${scala.binary.version}</artifactId>\n+\t<name>flink-sql-connector-hive-1.2.2</name>\n+\n+\t<packaging>jar</packaging>\n+\n+\t<dependencies>\n+\t\t<dependency>\n+\t\t\t<groupId>org.apache.flink</groupId>\n+\t\t\t<artifactId>flink-connector-hive_${scala.binary.version}</artifactId>\n+\t\t\t<version>${project.version}</version>\n+\t\t\t<exclusions>\n+\t\t\t\t<exclusion>\n+\t\t\t\t\t<groupId>*</groupId>\n+\t\t\t\t\t<artifactId>*</artifactId>", "originalCommit": "b4a76d76d2c1e9722befabc03b2191d053c70fa8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDExMjUyNw==", "url": "https://github.com/apache/flink/pull/11328#discussion_r390112527", "bodyText": "Yes, we only use explicit dependencies.", "author": "JingsongLi", "createdAt": "2020-03-10T06:15:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDExMDAwMw=="}], "type": "inlineReview"}]}