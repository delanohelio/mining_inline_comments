{"pr_number": 13940, "pr_title": "[FLINK-18546] Upgrade to Kafka Schema Registry Client 5.5.2", "pr_createdAt": "2020-11-05T09:36:21Z", "pr_url": "https://github.com/apache/flink/pull/13940", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkxNjQzMA==", "url": "https://github.com/apache/flink/pull/13940#discussion_r517916430", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - io.confluent:kafka-schema-registry-client:jar:5.5.2\n          \n          \n            \n            - org.apache.kafka:kafka-clients:jar:5.5.2-ccs\n          \n          \n            \n            - io.confluent:common-config:jar:5.5.2\n          \n          \n            \n            - io.confluent:common-utils:jar:5.5.2\n          \n          \n            \n            - org.glassfish.jersey.core:jersey-common:jar:2.30\n          \n          \n            \n            \n          \n          \n            \n            The binary distribution of this product bundles these dependencies under the Eclipse Public License - v 2.0 (https://www.eclipse.org/org/documents/epl-2.0/EPL-2.0.txt)\n          \n          \n            \n            \n          \n          \n            \n            - jakarta.annotation:jakarta.annotation-api:jar:1.3.5\n          \n          \n            \n            - jakarta.ws.rs:jakarta.ws.rs-api:jar:2.1.6\n          \n          \n            \n            - org.glassfish.hk2.external:jakarta.inject:jar:2.6.1\n          \n          \n            \n            - org.glassfish.hk2:osgi-resource-locator:jar:1.0.3\n          \n          \n            \n            - io.confluent:kafka-schema-registry-client:5.5.2\n          \n          \n            \n            - org.apache.kafka:kafka-clients:jar:5.5.2-ccs\n          \n          \n            \n            - io.confluent:common-config:5.5.2\n          \n          \n            \n            - io.confluent:common-utils:5.5.2\n          \n          \n            \n            - org.glassfish.jersey.core:jersey-common:2.30\n          \n          \n            \n            \n          \n          \n            \n            The binary distribution of this product bundles these dependencies under the Eclipse Public License - v 2.0 (https://www.eclipse.org/org/documents/epl-2.0/EPL-2.0.txt)\n          \n          \n            \n            \n          \n          \n            \n            - jakarta.annotation:jakarta.annotation-api:1.3.5\n          \n          \n            \n            - jakarta.ws.rs:jakarta.ws.rs-api:2.1.6\n          \n          \n            \n            - org.glassfish.hk2.external:jakarta.inject:2.6.1\n          \n          \n            \n            - org.glassfish.hk2:osgi-resource-locator:1.0.3", "author": "rmetzger", "createdAt": "2020-11-05T09:43:29Z", "path": "flink-formats/flink-sql-avro-confluent-registry/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -0,0 +1,25 @@\n+flink-sql-avro-confluent-registry\n+Copyright 2014-2020 The Apache Software Foundation\n+\n+This product includes software developed at\n+The Apache Software Foundation (http://www.apache.org/).\n+\n+This project bundles the following dependencies under the Apache Software License 2.0. (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- org.apache.avro:avro:1.10.0\n+- com.fasterxml.jackson.core:jackson-core:2.10.1\n+- com.fasterxml.jackson.core:jackson-databind:2.10.1\n+- com.fasterxml.jackson.core:jackson-annotations:2.10.1\n+- com.apache.commons:commons-compress:1.20\n+- io.confluent:kafka-schema-registry-client:jar:5.5.2\n+- org.apache.kafka:kafka-clients:jar:5.5.2-ccs\n+- io.confluent:common-config:jar:5.5.2\n+- io.confluent:common-utils:jar:5.5.2\n+- org.glassfish.jersey.core:jersey-common:jar:2.30\n+\n+The binary distribution of this product bundles these dependencies under the Eclipse Public License - v 2.0 (https://www.eclipse.org/org/documents/epl-2.0/EPL-2.0.txt)\n+\n+- jakarta.annotation:jakarta.annotation-api:jar:1.3.5\n+- jakarta.ws.rs:jakarta.ws.rs-api:jar:2.1.6\n+- org.glassfish.hk2.external:jakarta.inject:jar:2.6.1\n+- org.glassfish.hk2:osgi-resource-locator:jar:1.0.3", "originalCommit": "bf893aeeba444c5d0d41a50e4ced33256e46079b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "81ba55e52bfb04eaf42f4a7927074cfb12174501", "url": "https://github.com/apache/flink/commit/81ba55e52bfb04eaf42f4a7927074cfb12174501", "message": "[FLINK-18546] Upgrade to Kafka Schema Registry Client 5.5.2\n\nThe commit changes the packaging of flink-avro-confluent-registry module. We do no longer ship a fat-jar. Instead users should build the fat-jar themselves. It is because the upgraded version of registry client accesses fields from Avro of Jackson types. Because of the fact we can either bundle and shade both Avro and Jackson, or not shade Jackson. I decided it will be best not to ship a fat-jar and leave that decision to users.\n\nOn the other hand for the sql-client it is better to provide fat-jars, however because of 1. I added a separate flink-sql-avro-confluent-registry module that builds a fat-jar (including Avro, and shaded jackson).", "committedDate": "2020-11-05T09:44:50Z", "type": "commit"}, {"oid": "81ba55e52bfb04eaf42f4a7927074cfb12174501", "url": "https://github.com/apache/flink/commit/81ba55e52bfb04eaf42f4a7927074cfb12174501", "message": "[FLINK-18546] Upgrade to Kafka Schema Registry Client 5.5.2\n\nThe commit changes the packaging of flink-avro-confluent-registry module. We do no longer ship a fat-jar. Instead users should build the fat-jar themselves. It is because the upgraded version of registry client accesses fields from Avro of Jackson types. Because of the fact we can either bundle and shade both Avro and Jackson, or not shade Jackson. I decided it will be best not to ship a fat-jar and leave that decision to users.\n\nOn the other hand for the sql-client it is better to provide fat-jars, however because of 1. I added a separate flink-sql-avro-confluent-registry module that builds a fat-jar (including Avro, and shaded jackson).", "committedDate": "2020-11-05T09:44:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzkzNzIwOQ==", "url": "https://github.com/apache/flink/pull/13940#discussion_r517937209", "bodyText": "Sorry that I didn't catch this earlier.\nAre we shipping a copy of the license to our users already? Usually, dependencies with other licenses are shipped like this: https://github.com/apache/flink/tree/master/flink-connectors/flink-connector-kinesis/src/main/resources/META-INF/licenses", "author": "rmetzger", "createdAt": "2020-11-05T10:15:40Z", "path": "flink-formats/flink-sql-avro-confluent-registry/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -0,0 +1,25 @@\n+flink-sql-avro-confluent-registry\n+Copyright 2014-2020 The Apache Software Foundation\n+\n+This product includes software developed at\n+The Apache Software Foundation (http://www.apache.org/).\n+\n+This project bundles the following dependencies under the Apache Software License 2.0. (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- org.apache.avro:avro:1.10.0\n+- com.fasterxml.jackson.core:jackson-core:2.10.1\n+- com.fasterxml.jackson.core:jackson-databind:2.10.1\n+- com.fasterxml.jackson.core:jackson-annotations:2.10.1\n+- com.apache.commons:commons-compress:1.20\n+- io.confluent:kafka-schema-registry-client:5.5.2\n+- org.apache.kafka:kafka-clients:5.5.2-ccs\n+- io.confluent:common-config:5.5.2\n+- io.confluent:common-utils:5.5.2\n+- org.glassfish.jersey.core:jersey-common:2.30\n+\n+The binary distribution of this product bundles these dependencies under the Eclipse Public License - v 2.0 (https://www.eclipse.org/org/documents/epl-2.0/EPL-2.0.txt)", "originalCommit": "81ba55e52bfb04eaf42f4a7927074cfb12174501", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d8489a38ccbde05400d6500a3201aa68f9115440", "url": "https://github.com/apache/flink/commit/d8489a38ccbde05400d6500a3201aa68f9115440", "message": "Add license files", "committedDate": "2020-11-05T10:37:17Z", "type": "commit"}, {"oid": "e32e8e67136f0c460a52215d1f1e8fd6e524f34b", "url": "https://github.com/apache/flink/commit/e32e8e67136f0c460a52215d1f1e8fd6e524f34b", "message": "fix invalid mention in NOTICE", "committedDate": "2020-11-06T09:05:32Z", "type": "commit"}]}