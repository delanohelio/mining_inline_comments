{"pr_number": 12689, "pr_title": "[FLINK-18320][notice][hive] Merge hive-exec dependencies for hive uber 2.3.6 and 3.1.2", "pr_createdAt": "2020-06-17T04:50:35Z", "pr_url": "https://github.com/apache/flink/pull/12689", "timeline": [{"oid": "fcb7907dc31fc27756076404f60ab8fd50503f03", "url": "https://github.com/apache/flink/commit/fcb7907dc31fc27756076404f60ab8fd50503f03", "message": "[FLINK-18320][notice][hive] Merge hive-exec dependencies for hive uber 2.3.6 and 3.1.2", "committedDate": "2020-06-17T04:48:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyMzE0NQ==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442023145", "bodyText": "My maven-shade-plugin run said\n[INFO] Including com.tdunning:json:jar:1.8 in the shaded jar.", "author": "rmetzger", "createdAt": "2020-06-18T07:29:35Z", "path": "flink-connectors/flink-sql-connector-hive-2.3.6/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -7,3 +7,51 @@ The Apache Software Foundation (http://www.apache.org/).\n This project bundles the following dependencies under the Apache Software License 2.0. (http://www.apache.org/licenses/LICENSE-2.0.txt)\n \n - org.apache.hive:hive-exec:2.3.6\n+\n+The bundled Apache Hive org.apache.hive:hive-exec dependency bundles the following dependencies under\n+the Apache Software License 2.0 (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- com.google.guava:guava:14.0.1\n+- com.googlecode.javaewah:JavaEWAH:0.3.2\n+- com.tdunning:json:1.14", "originalCommit": "fcb7907dc31fc27756076404f60ab8fd50503f03", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAyNjQ0Mw==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442026443", "bodyText": "For some weird reason, my maven-shade plugin logged this\n[INFO] Including org.apache.hive:hive-storage-api:jar:2.4.0 in the shaded jar.", "author": "rmetzger", "createdAt": "2020-06-18T07:35:51Z", "path": "flink-connectors/flink-sql-connector-hive-2.3.6/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -7,3 +7,51 @@ The Apache Software Foundation (http://www.apache.org/).\n This project bundles the following dependencies under the Apache Software License 2.0. (http://www.apache.org/licenses/LICENSE-2.0.txt)\n \n - org.apache.hive:hive-exec:2.3.6\n+\n+The bundled Apache Hive org.apache.hive:hive-exec dependency bundles the following dependencies under\n+the Apache Software License 2.0 (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- com.google.guava:guava:14.0.1\n+- com.googlecode.javaewah:JavaEWAH:0.3.2\n+- com.tdunning:json:1.14\n+- commons-lang:commons-lang:2.6\n+- io.airlift:aircompressor:0.8\n+- javax.jdo:jdo-api:3.0.1\n+- joda-time:joda-time:2.8.1\n+- net.sf.opencsv:opencsv:2.3\n+- org.apache.avro:avro-mapred:1.7.7\n+- org.apache.avro:avro:1.7.7\n+- org.apache.commons:commons-lang3:3.1\n+- org.apache.hive.shims:hive-shims-0.23:2.3.6\n+- org.apache.hive.shims:hive-shims-common:2.3.6\n+- org.apache.hive:hive-common:2.3.6\n+- org.apache.hive:hive-llap-client:2.3.6\n+- org.apache.hive:hive-llap-common:2.3.6\n+- org.apache.hive:hive-metastore:2.3.6\n+- org.apache.hive:hive-serde:2.3.6\n+- org.apache.hive:hive-service-rpc:2.3.6\n+- org.apache.hive:hive-storage-api:2.3.6", "originalCommit": "fcb7907dc31fc27756076404f60ab8fd50503f03", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0MTI5Mw==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442041293", "bodyText": "com.esotericsoftware:reflectasm is listed twice, and not ASL2.0 licensed.", "author": "rmetzger", "createdAt": "2020-06-18T08:02:07Z", "path": "flink-connectors/flink-sql-connector-hive-3.1.2/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -8,3 +8,51 @@ This project bundles the following dependencies under the Apache Software Licens\n \n - org.apache.hive:hive-exec:3.1.2\n - org.apache.thrift:libfb303:0.9.3\n+\n+The bundled Apache Hive org.apache.hive:hive-exec dependency bundles the following dependencies under\n+the Apache Software License 2.0 (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- com.esotericsoftware:kryo-shaded:3.0.3\n+- com.esotericsoftware:minlog:1.3.0\n+- com.esotericsoftware:reflectasm:1.10.1", "originalCommit": "fcb7907dc31fc27756076404f60ab8fd50503f03", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0MjYzNw==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442042637", "bodyText": "where did you find this dependency listed? When I compiled hive 3.1.2, it wasn't listed by the shade plugin. However. there are indeed reflectasm classes in the final binary.", "author": "rmetzger", "createdAt": "2020-06-18T08:04:38Z", "path": "flink-connectors/flink-sql-connector-hive-3.1.2/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -8,3 +8,51 @@ This project bundles the following dependencies under the Apache Software Licens\n \n - org.apache.hive:hive-exec:3.1.2\n - org.apache.thrift:libfb303:0.9.3\n+\n+The bundled Apache Hive org.apache.hive:hive-exec dependency bundles the following dependencies under\n+the Apache Software License 2.0 (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- com.esotericsoftware:kryo-shaded:3.0.3\n+- com.esotericsoftware:minlog:1.3.0\n+- com.esotericsoftware:reflectasm:1.10.1\n+- com.google.guava:guava:19.0\n+- com.googlecode.javaewah:JavaEWAH:0.3.2\n+- com.tdunning:json:1.8\n+- commons-lang:commons-lang:2.6\n+- io.airlift:aircompressor:0.10\n+- javax.jdo:jdo-api:3.0.1\n+- joda-time:joda-time:2.9.9\n+- net.sf.opencsv:opencsv:2.3\n+- org.apache.avro:avro-mapred:1.8.2\n+- org.apache.avro:avro:1.8.2\n+- org.apache.commons:commons-lang3:3.3.2\n+- org.apache.hive.shims:hive-shims-0.23:3.1.2\n+- org.apache.hive.shims:hive-shims-common:3.1.2\n+- org.apache.hive:hive-common:3.1.2\n+- org.apache.hive:hive-llap-client:3.1.2\n+- org.apache.hive:hive-llap-common:3.1.2\n+- org.apache.hive:hive-metastore:3.1.2\n+- org.apache.hive:hive-serde:3.1.2\n+- org.apache.hive:hive-service-rpc:3.1.2\n+- org.apache.hive:hive-spark-client:3.1.2\n+- org.apache.hive:hive-standalone-metastore:3.1.2\n+- org.apache.hive:hive-storage-api:3.1.2\n+- org.apache.orc:orc-core:1.5.6\n+- org.apache.orc:orc-shims:1.5.6\n+- org.apache.orc:orc-tools:1.5.6\n+- org.apache.parquet:parquet-hadoop-bundle:1.10.0\n+- org.apache.parquet:parquet-jackson:1.10.0\n+- org.apache.thrift:libthrift:0.9.3\n+- org.codehaus.jackson:jackson-core-asl:2.9.5\n+- org.codehaus.jackson:jackson-mapper-asl:2.9.5\n+- org.objenesis:objenesis:2.1\n+\n+The bundled Apache Hive org.apache.hive:hive-exec dependency bundles the following dependencies under the BSD license.\n+See bundled license files for details.\n+\n+- com.esotericsoftware:kryo-shaded:3.0.3\n+- com.esotericsoftware:minlog:1.3.0\n+- com.esotericsoftware:reflectasm:1.10.1", "originalCommit": "fcb7907dc31fc27756076404f60ab8fd50503f03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA1MDE2NA==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442050164", "bodyText": "I found it by unzip -l flink-sql-connector-hive-3.1.2_2.11-1.12-SNAPSHOT.jar | grep pom...", "author": "JingsongLi", "createdAt": "2020-06-18T08:17:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0MjYzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0MzA5OA==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442043098", "bodyText": "[INFO] Including org.apache.avro:avro-mapred:jar:hadoop2:1.7.7 in the shaded jar.", "author": "rmetzger", "createdAt": "2020-06-18T08:05:28Z", "path": "flink-connectors/flink-sql-connector-hive-3.1.2/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -8,3 +8,51 @@ This project bundles the following dependencies under the Apache Software Licens\n \n - org.apache.hive:hive-exec:3.1.2\n - org.apache.thrift:libfb303:0.9.3\n+\n+The bundled Apache Hive org.apache.hive:hive-exec dependency bundles the following dependencies under\n+the Apache Software License 2.0 (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- com.esotericsoftware:kryo-shaded:3.0.3\n+- com.esotericsoftware:minlog:1.3.0\n+- com.esotericsoftware:reflectasm:1.10.1\n+- com.google.guava:guava:19.0\n+- com.googlecode.javaewah:JavaEWAH:0.3.2\n+- com.tdunning:json:1.8\n+- commons-lang:commons-lang:2.6\n+- io.airlift:aircompressor:0.10\n+- javax.jdo:jdo-api:3.0.1\n+- joda-time:joda-time:2.9.9\n+- net.sf.opencsv:opencsv:2.3\n+- org.apache.avro:avro-mapred:1.8.2", "originalCommit": "fcb7907dc31fc27756076404f60ab8fd50503f03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA1NDU0OQ==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442054549", "bodyText": "I think you are right, I am confused by the version passed from flink-parquet.(Which is from flink pom avro version)", "author": "JingsongLi", "createdAt": "2020-06-18T08:24:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0MzA5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA1NTA1Mg==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442055052", "bodyText": "org.apache.avro:avro-mapred:1.7.7 is enough? Do you we need hadoop2?", "author": "JingsongLi", "createdAt": "2020-06-18T08:25:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0MzA5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA2ODgzNA==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442068834", "bodyText": "I was wondering the same. I think it is fine to leave the \"hadoop2\" part out", "author": "rmetzger", "createdAt": "2020-06-18T08:47:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0MzA5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0MzkxOQ==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442043919", "bodyText": "I don't know what's going on with my maven\n[INFO] Including org.apache.hive:hive-storage-api:jar:2.7.0 in the shaded jar.", "author": "rmetzger", "createdAt": "2020-06-18T08:06:51Z", "path": "flink-connectors/flink-sql-connector-hive-3.1.2/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -8,3 +8,51 @@ This project bundles the following dependencies under the Apache Software Licens\n \n - org.apache.hive:hive-exec:3.1.2\n - org.apache.thrift:libfb303:0.9.3\n+\n+The bundled Apache Hive org.apache.hive:hive-exec dependency bundles the following dependencies under\n+the Apache Software License 2.0 (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- com.esotericsoftware:kryo-shaded:3.0.3\n+- com.esotericsoftware:minlog:1.3.0\n+- com.esotericsoftware:reflectasm:1.10.1\n+- com.google.guava:guava:19.0\n+- com.googlecode.javaewah:JavaEWAH:0.3.2\n+- com.tdunning:json:1.8\n+- commons-lang:commons-lang:2.6\n+- io.airlift:aircompressor:0.10\n+- javax.jdo:jdo-api:3.0.1\n+- joda-time:joda-time:2.9.9\n+- net.sf.opencsv:opencsv:2.3\n+- org.apache.avro:avro-mapred:1.8.2\n+- org.apache.avro:avro:1.8.2\n+- org.apache.commons:commons-lang3:3.3.2\n+- org.apache.hive.shims:hive-shims-0.23:3.1.2\n+- org.apache.hive.shims:hive-shims-common:3.1.2\n+- org.apache.hive:hive-common:3.1.2\n+- org.apache.hive:hive-llap-client:3.1.2\n+- org.apache.hive:hive-llap-common:3.1.2\n+- org.apache.hive:hive-metastore:3.1.2\n+- org.apache.hive:hive-serde:3.1.2\n+- org.apache.hive:hive-service-rpc:3.1.2\n+- org.apache.hive:hive-spark-client:3.1.2\n+- org.apache.hive:hive-standalone-metastore:3.1.2\n+- org.apache.hive:hive-storage-api:3.1.2", "originalCommit": "fcb7907dc31fc27756076404f60ab8fd50503f03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA1MTg2Mw==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442051863", "bodyText": "You are right, I made mistake.", "author": "JingsongLi", "createdAt": "2020-06-18T08:20:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0MzkxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0NTAxMw==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442045013", "bodyText": "parquet-jackson was not listed in my hive build", "author": "rmetzger", "createdAt": "2020-06-18T08:08:46Z", "path": "flink-connectors/flink-sql-connector-hive-3.1.2/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -8,3 +8,51 @@ This project bundles the following dependencies under the Apache Software Licens\n \n - org.apache.hive:hive-exec:3.1.2\n - org.apache.thrift:libfb303:0.9.3\n+\n+The bundled Apache Hive org.apache.hive:hive-exec dependency bundles the following dependencies under\n+the Apache Software License 2.0 (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- com.esotericsoftware:kryo-shaded:3.0.3\n+- com.esotericsoftware:minlog:1.3.0\n+- com.esotericsoftware:reflectasm:1.10.1\n+- com.google.guava:guava:19.0\n+- com.googlecode.javaewah:JavaEWAH:0.3.2\n+- com.tdunning:json:1.8\n+- commons-lang:commons-lang:2.6\n+- io.airlift:aircompressor:0.10\n+- javax.jdo:jdo-api:3.0.1\n+- joda-time:joda-time:2.9.9\n+- net.sf.opencsv:opencsv:2.3\n+- org.apache.avro:avro-mapred:1.8.2\n+- org.apache.avro:avro:1.8.2\n+- org.apache.commons:commons-lang3:3.3.2\n+- org.apache.hive.shims:hive-shims-0.23:3.1.2\n+- org.apache.hive.shims:hive-shims-common:3.1.2\n+- org.apache.hive:hive-common:3.1.2\n+- org.apache.hive:hive-llap-client:3.1.2\n+- org.apache.hive:hive-llap-common:3.1.2\n+- org.apache.hive:hive-metastore:3.1.2\n+- org.apache.hive:hive-serde:3.1.2\n+- org.apache.hive:hive-service-rpc:3.1.2\n+- org.apache.hive:hive-spark-client:3.1.2\n+- org.apache.hive:hive-standalone-metastore:3.1.2\n+- org.apache.hive:hive-storage-api:3.1.2\n+- org.apache.orc:orc-core:1.5.6\n+- org.apache.orc:orc-shims:1.5.6\n+- org.apache.orc:orc-tools:1.5.6\n+- org.apache.parquet:parquet-hadoop-bundle:1.10.0\n+- org.apache.parquet:parquet-jackson:1.10.0", "originalCommit": "fcb7907dc31fc27756076404f60ab8fd50503f03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA1ODQyNg==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442058426", "bodyText": "should come from parquet-hadoop-bundle, there are classes in shaded/parquet/org/codehaus/jackson.", "author": "JingsongLi", "createdAt": "2020-06-18T08:30:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0NTAxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA3NTg4Nw==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442075887", "bodyText": "ok", "author": "rmetzger", "createdAt": "2020-06-18T08:58:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0NTAxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA0NTM2Nw==", "url": "https://github.com/apache/flink/pull/12689#discussion_r442045367", "bodyText": "[INFO] Including org.codehaus.jackson:jackson-core-asl:jar:1.9.13 in the shaded jar.\n[INFO] Including org.codehaus.jackson:jackson-mapper-asl:jar:1.9.13 in the shaded jar.", "author": "rmetzger", "createdAt": "2020-06-18T08:09:24Z", "path": "flink-connectors/flink-sql-connector-hive-3.1.2/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -8,3 +8,51 @@ This project bundles the following dependencies under the Apache Software Licens\n \n - org.apache.hive:hive-exec:3.1.2\n - org.apache.thrift:libfb303:0.9.3\n+\n+The bundled Apache Hive org.apache.hive:hive-exec dependency bundles the following dependencies under\n+the Apache Software License 2.0 (http://www.apache.org/licenses/LICENSE-2.0.txt)\n+\n+- com.esotericsoftware:kryo-shaded:3.0.3\n+- com.esotericsoftware:minlog:1.3.0\n+- com.esotericsoftware:reflectasm:1.10.1\n+- com.google.guava:guava:19.0\n+- com.googlecode.javaewah:JavaEWAH:0.3.2\n+- com.tdunning:json:1.8\n+- commons-lang:commons-lang:2.6\n+- io.airlift:aircompressor:0.10\n+- javax.jdo:jdo-api:3.0.1\n+- joda-time:joda-time:2.9.9\n+- net.sf.opencsv:opencsv:2.3\n+- org.apache.avro:avro-mapred:1.8.2\n+- org.apache.avro:avro:1.8.2\n+- org.apache.commons:commons-lang3:3.3.2\n+- org.apache.hive.shims:hive-shims-0.23:3.1.2\n+- org.apache.hive.shims:hive-shims-common:3.1.2\n+- org.apache.hive:hive-common:3.1.2\n+- org.apache.hive:hive-llap-client:3.1.2\n+- org.apache.hive:hive-llap-common:3.1.2\n+- org.apache.hive:hive-metastore:3.1.2\n+- org.apache.hive:hive-serde:3.1.2\n+- org.apache.hive:hive-service-rpc:3.1.2\n+- org.apache.hive:hive-spark-client:3.1.2\n+- org.apache.hive:hive-standalone-metastore:3.1.2\n+- org.apache.hive:hive-storage-api:3.1.2\n+- org.apache.orc:orc-core:1.5.6\n+- org.apache.orc:orc-shims:1.5.6\n+- org.apache.orc:orc-tools:1.5.6\n+- org.apache.parquet:parquet-hadoop-bundle:1.10.0\n+- org.apache.parquet:parquet-jackson:1.10.0\n+- org.apache.thrift:libthrift:0.9.3\n+- org.codehaus.jackson:jackson-core-asl:2.9.5\n+- org.codehaus.jackson:jackson-mapper-asl:2.9.5", "originalCommit": "fcb7907dc31fc27756076404f60ab8fd50503f03", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4988db5e86c9f98063a9ad4c21e4dfad17383b91", "url": "https://github.com/apache/flink/commit/4988db5e86c9f98063a9ad4c21e4dfad17383b91", "message": "Fix comments", "committedDate": "2020-06-18T08:35:29Z", "type": "commit"}]}