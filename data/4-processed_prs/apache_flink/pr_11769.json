{"pr_number": 11769, "pr_title": "[FLINK-16766][python]Support create StreamTableEnvironment without pa\u2026", "pr_createdAt": "2020-04-16T08:00:56Z", "pr_url": "https://github.com/apache/flink/pull/11769", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTExNDUwMA==", "url": "https://github.com/apache/flink/pull/11769#discussion_r411114500", "bodyText": "BatchTableEnvironment => StreamTableEnvironment", "author": "hequn8128", "createdAt": "2020-04-20T06:03:52Z", "path": "flink-python/pyflink/table/table_environment.py", "diffHunk": "@@ -1154,26 +1154,28 @@ def connect(self, connector_descriptor):\n             self._j_tenv.connect(connector_descriptor._j_connector_descriptor))\n \n     @staticmethod\n-    def create(stream_execution_environment, table_config=None, environment_settings=None):\n+    def create(stream_execution_environment=None, table_config=None, environment_settings=None):\n         \"\"\"\n-        Creates a :class:`~pyflink.table.TableEnvironment` for a\n+        Creates a :class:`~pyflink.table.StreamTableEnvironment` for a\n         :class:`~pyflink.datastream.StreamExecutionEnvironment`.\n \n         Example:\n         ::\n \n+            # create with StreamExecutionEnvironment.\n             >>> env = StreamExecutionEnvironment.get_execution_environment()\n-            # create without optional parameters.\n             >>> table_env = StreamTableEnvironment.create(env)\n-            # create with TableConfig\n+            # create with StreamExecutionEnvironment and TableConfig.\n             >>> table_config = TableConfig()\n             >>> table_config.set_null_check(False)\n             >>> table_env = StreamTableEnvironment.create(env, table_config)\n-            # create with EnvrionmentSettings\n+            # create with StreamExecutionEnvironment and EnvironmentSettings.\n             >>> environment_settings = EnvironmentSettings.new_instance().use_blink_planner() \\\\\n             ...     .build()\n             >>> table_env = StreamTableEnvironment.create(\n             ...     env, environment_settings=environment_settings)\n+            # create with EnvironmentSettings.\n+            >>> table_env = BatchTableEnvironment.create(environment_settings=environment_settings)", "originalCommit": "91e11790567ac173db216ac8d0a4bae76d2b81ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEyOTk4NA==", "url": "https://github.com/apache/flink/pull/11769#discussion_r411129984", "bodyText": "Change to\nCreates a :class:`~pyflink.table.StreamTableEnvironment`.\n\nsince we can also create the TableEnvironment without the execution environment.", "author": "hequn8128", "createdAt": "2020-04-20T06:41:06Z", "path": "flink-python/pyflink/table/table_environment.py", "diffHunk": "@@ -1154,26 +1154,28 @@ def connect(self, connector_descriptor):\n             self._j_tenv.connect(connector_descriptor._j_connector_descriptor))\n \n     @staticmethod\n-    def create(stream_execution_environment, table_config=None, environment_settings=None):\n+    def create(stream_execution_environment=None, table_config=None, environment_settings=None):\n         \"\"\"\n-        Creates a :class:`~pyflink.table.TableEnvironment` for a\n+        Creates a :class:`~pyflink.table.StreamTableEnvironment` for a", "originalCommit": "91e11790567ac173db216ac8d0a4bae76d2b81ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEzMDE5NQ==", "url": "https://github.com/apache/flink/pull/11769#discussion_r411130195", "bodyText": "Revert the change as we can also create the TableEnvironment without the execution_environment.", "author": "hequn8128", "createdAt": "2020-04-20T06:41:35Z", "path": "flink-python/pyflink/table/table_environment.py", "diffHunk": "@@ -1280,7 +1297,8 @@ def connect(self, connector_descriptor):\n     @staticmethod\n     def create(execution_environment=None, table_config=None, environment_settings=None):\n         \"\"\"\n-        Creates a :class:`~pyflink.table.BatchTableEnvironment`.\n+        Creates a :class:`~pyflink.table.BatchTableEnvironment` for a", "originalCommit": "91e11790567ac173db216ac8d0a4bae76d2b81ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b052af39c5612f8ba67b3e650a3fdc3fdb8fdb9e", "url": "https://github.com/apache/flink/commit/b052af39c5612f8ba67b3e650a3fdc3fdb8fdb9e", "message": "[FLINK-16766][python]Support create StreamTableEnvironment without passing StreamExecutionEnvironment", "committedDate": "2020-04-22T03:56:36Z", "type": "commit"}, {"oid": "b052af39c5612f8ba67b3e650a3fdc3fdb8fdb9e", "url": "https://github.com/apache/flink/commit/b052af39c5612f8ba67b3e650a3fdc3fdb8fdb9e", "message": "[FLINK-16766][python]Support create StreamTableEnvironment without passing StreamExecutionEnvironment", "committedDate": "2020-04-22T03:56:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcyNTkyNg==", "url": "https://github.com/apache/flink/pull/11769#discussion_r412725926", "bodyText": "Would be great if we can also add tests for flink planner. FYI: test will be failed for flink planner with the current PR.", "author": "hequn8128", "createdAt": "2020-04-22T07:08:22Z", "path": "flink-python/pyflink/table/tests/test_table_environment_api.py", "diffHunk": "@@ -296,6 +296,15 @@ def test_create_table_environment_with_blink_planner(self):\n             planner.getClass().getName(),\n             \"org.apache.flink.table.planner.delegation.StreamPlanner\")\n \n+        t_env = StreamTableEnvironment.create(", "originalCommit": "b052af39c5612f8ba67b3e650a3fdc3fdb8fdb9e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2eafb3412af1d64f3dc5a6c5a489d9e3471fe542", "url": "https://github.com/apache/flink/commit/2eafb3412af1d64f3dc5a6c5a489d9e3471fe542", "message": "[FLINK-16766][python]Support create StreamTableEnvironment without passing StreamExecutionEnvironment", "committedDate": "2020-04-22T10:00:53Z", "type": "commit"}, {"oid": "f337d746222669bb65cf1c8823e6bbbcc86e4554", "url": "https://github.com/apache/flink/commit/f337d746222669bb65cf1c8823e6bbbcc86e4554", "message": "[FLINK-16766][python]Support create StreamTableEnvironment without passing StreamExecutionEnvironment", "committedDate": "2020-04-22T11:16:08Z", "type": "commit"}]}