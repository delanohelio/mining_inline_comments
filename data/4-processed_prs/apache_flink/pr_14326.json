{"pr_number": 14326, "pr_title": "[FLINK-20520][metrics][docs] Document metric name escaping", "pr_createdAt": "2020-12-07T14:24:54Z", "pr_url": "https://github.com/apache/flink/pull/14326", "timeline": [{"oid": "31040c23257ca83067dc8d32943e154d9ec54e5c", "url": "https://github.com/apache/flink/commit/31040c23257ca83067dc8d32943e154d9ec54e5c", "message": "[FLINK-20520][metrics][docs] Document metric name escaping", "committedDate": "2020-12-07T14:23:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODMwOTA1MA==", "url": "https://github.com/apache/flink/pull/14326#discussion_r538309050", "bodyText": "Maybe  \"`a_+_b`\" instead of `\"a_+_b`\"?", "author": "V1ncentzzZ", "createdAt": "2020-12-08T12:26:20Z", "path": "docs/ops/metrics.md", "diffHunk": "@@ -1654,6 +1654,9 @@ Request metrics aggregated over a subset of all entities of the respective type:\n   - `/jobs/metrics?jobs=D,E,F`\n   - `/jobs/<jobid>/vertices/<vertexid>/subtasks/metrics?subtask=1,2,3`\n \n+<span class=\"label label-danger\">Warning</span> Metric names can contain special characters (`?`, `&`, `$`, `+`, `/`, `,`, `:`, `=`, `@`, `%`) that you need to be escape when querying metrics.\n+For example, `\"a_+_b`\" would be escaped to \"`a_%2B_b`\".", "originalCommit": "31040c23257ca83067dc8d32943e154d9ec54e5c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODMwOTc3Mw==", "url": "https://github.com/apache/flink/pull/14326#discussion_r538309773", "bodyText": "Same problem as before.", "author": "V1ncentzzZ", "createdAt": "2020-12-08T12:27:20Z", "path": "docs/ops/metrics.zh.md", "diffHunk": "@@ -1654,6 +1654,9 @@ Request metrics aggregated over a subset of all entities of the respective type:\n   - `/jobs/metrics?jobs=D,E,F`\n   - `/jobs/<jobid>/vertices/<vertexid>/subtasks/metrics?subtask=1,2,3`\n \n+<span class=\"label label-danger\">Warning</span> Metric names can contain special characters (`?`, `&`, `$`, `+`, `/`, `,`, `:`, `=`, `@`, `%`) that you need to be escape when querying metrics.\n+For example, `\"a_+_b`\" would be escaped to \"`a_%2B_b`\".", "originalCommit": "31040c23257ca83067dc8d32943e154d9ec54e5c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "151212a9f3e2f4719d76ba45930aae2d7d5000a5", "url": "https://github.com/apache/flink/commit/151212a9f3e2f4719d76ba45930aae2d7d5000a5", "message": "address comments", "committedDate": "2020-12-08T16:12:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQwOTU2Ng==", "url": "https://github.com/apache/flink/pull/14326#discussion_r539409566", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <span class=\"label label-danger\">Warning</span> Metric names can contain special characters (`?`, `&`, `$`, `+`, `/`, `,`, `:`, `=`, `@`, `%`) that you need to be escape when querying metrics.\n          \n          \n            \n            <span class=\"label label-danger\">Warning</span> Metric names can contain special characters (`?`, `&`, `$`, `+`, `/`, `,`, `:`, `=`, `@`, `%`) that you need to escape when querying metrics.", "author": "tillrohrmann", "createdAt": "2020-12-09T15:36:14Z", "path": "docs/ops/metrics.md", "diffHunk": "@@ -1654,6 +1654,9 @@ Request metrics aggregated over a subset of all entities of the respective type:\n   - `/jobs/metrics?jobs=D,E,F`\n   - `/jobs/<jobid>/vertices/<vertexid>/subtasks/metrics?subtask=1,2,3`\n \n+<span class=\"label label-danger\">Warning</span> Metric names can contain special characters (`?`, `&`, `$`, `+`, `/`, `,`, `:`, `=`, `@`, `%`) that you need to be escape when querying metrics.", "originalCommit": "151212a9f3e2f4719d76ba45930aae2d7d5000a5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQxMTgzMA==", "url": "https://github.com/apache/flink/pull/14326#discussion_r539411830", "bodyText": "Can we link to the rules how to escape these characters, e.g. a table of URL Escape Characters?", "author": "tillrohrmann", "createdAt": "2020-12-09T15:38:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQwOTU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ5NDEzNw==", "url": "https://github.com/apache/flink/pull/14326#discussion_r539494137", "bodyText": "I had hoped that the example gives users enough of a reference to find a table.\nThe only official(?) reference I could find for which characters to escape is this RFC, but it's not as readable as I would like.\nThis page was the basis for which characters I explicitly listed, but it is not really consistent with the RFC.\nI originally did not want to list any characters at all, but with the RFC being eh and all other sources not being official I couldn't find solution I really liked.\nAs for how to escape, it is essentially just \"% + ascii_hex(character)\", which I can add.", "author": "zentol", "createdAt": "2020-12-09T17:17:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQwOTU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAyMzA3Nw==", "url": "https://github.com/apache/flink/pull/14326#discussion_r540023077", "bodyText": "Can we then maybe create the table for the characters you have listed?", "author": "tillrohrmann", "createdAt": "2020-12-10T09:47:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQwOTU2Ng=="}], "type": "inlineReview"}, {"oid": "6a8a7dfc3487620e4d5ec0c3636d9981813b45c0", "url": "https://github.com/apache/flink/commit/6a8a7dfc3487620e4d5ec0c3636d9981813b45c0", "message": "add table with escape characters", "committedDate": "2020-12-10T15:25:28Z", "type": "commit"}, {"oid": "9f7c4820f6a6b503c07929606468d94a68630009", "url": "https://github.com/apache/flink/commit/9f7c4820f6a6b503c07929606468d94a68630009", "message": "+", "committedDate": "2020-12-10T16:01:21Z", "type": "commit"}]}