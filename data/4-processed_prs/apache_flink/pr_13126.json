{"pr_number": 13126, "pr_title": "[FLINK-18888][python] Support execute_async for StreamExecutionEnviro\u2026", "pr_createdAt": "2020-08-12T06:59:38Z", "pr_url": "https://github.com/apache/flink/pull/13126", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1OTM3Mw==", "url": "https://github.com/apache/flink/pull/13126#discussion_r469059373", "bodyText": "Put the import in the right order.", "author": "hequn8128", "createdAt": "2020-08-12T07:27:31Z", "path": "flink-python/pyflink/datastream/stream_execution_environment.py", "diffHunk": "@@ -20,6 +20,8 @@\n \n from typing import List, Any\n \n+from pyflink.common.job_client import JobClient", "originalCommit": "37c2b844eff223c1eee14a83cf4ed1e295184af7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA2MzI1Mw==", "url": "https://github.com/apache/flink/pull/13126#discussion_r469063253", "bodyText": "Ok, I will make it right.", "author": "shuiqiangchen", "createdAt": "2020-08-12T07:34:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1OTM3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1OTkwOA==", "url": "https://github.com/apache/flink/pull/13126#discussion_r469059908", "bodyText": "This line is useless.", "author": "hequn8128", "createdAt": "2020-08-12T07:28:35Z", "path": "flink-python/pyflink/datastream/tests/test_stream_execution_environment.py", "diffHunk": "@@ -271,3 +271,16 @@ def test_read_text_file(self):\n         results.sort()\n         texts.sort()\n         self.assertEqual(texts, results)\n+\n+    def test_execute_async(self):\n+        ds = self.env.from_collection([(1, 'Hi', 'Hello'), (2, 'Hello', 'Hi')],\n+                                      type_info=Types.ROW(\n+                                          [Types.INT(), Types.STRING(), Types.STRING()]))\n+        test_sink = DataStreamTestSinkFunction()\n+        ds.add_sink(test_sink)\n+        job_client = self.env.execute_async(\"test execute async\")\n+        job_id = job_client.get_job_id()\n+        self.assertIsNotNone(job_id)\n+        execution_result = job_client.get_job_execution_result().result()\n+        self.assertEqual(str(job_id), str(execution_result.get_job_id()))\n+        test_sink.get_results()", "originalCommit": "37c2b844eff223c1eee14a83cf4ed1e295184af7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA2MzE4MA==", "url": "https://github.com/apache/flink/pull/13126#discussion_r469063180", "bodyText": "It's used for clearing the collected results maintained in DataStreamTestSinkFunction, otherwise, the following test cases that will use the DataStreamTestSinkFunction will also collect the remnant results, which will cause the result assertion fail.", "author": "shuiqiangchen", "createdAt": "2020-08-12T07:34:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1OTkwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA2NjU3OA==", "url": "https://github.com/apache/flink/pull/13126#discussion_r469066578", "bodyText": "Maybe we can use the clear() method. It just does what we need.", "author": "hequn8128", "createdAt": "2020-08-12T07:41:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1OTkwOA=="}], "type": "inlineReview"}, {"oid": "125532d42170dedc09b3319ffedc14178a2a54ff", "url": "https://github.com/apache/flink/commit/125532d42170dedc09b3319ffedc14178a2a54ff", "message": "[FLINK-18888][python] Support execute_async for StreamExecutionEnvironment.", "committedDate": "2020-08-12T08:10:53Z", "type": "commit"}, {"oid": "125532d42170dedc09b3319ffedc14178a2a54ff", "url": "https://github.com/apache/flink/commit/125532d42170dedc09b3319ffedc14178a2a54ff", "message": "[FLINK-18888][python] Support execute_async for StreamExecutionEnvironment.", "committedDate": "2020-08-12T08:10:53Z", "type": "forcePushed"}]}