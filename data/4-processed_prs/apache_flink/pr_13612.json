{"pr_number": 13612, "pr_title": "[FLINK-19587][table-planner-blink] Fix error result when casting binary as varchar", "pr_createdAt": "2020-10-13T10:39:42Z", "pr_url": "https://github.com/apache/flink/pull/13612", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzg1MzQyNw==", "url": "https://github.com/apache/flink/pull/13612#discussion_r503853427", "bodyText": "Could you add this test to ScalarOperatorsTest? Because cast is an operator.\nBesides, coul dyou add cast tests for binary and varbinary source fields?", "author": "wuchong", "createdAt": "2020-10-13T10:50:17Z", "path": "flink-table/flink-table-planner-blink/src/test/scala/org/apache/flink/table/planner/expressions/ScalarFunctionsTest.scala", "diffHunk": "@@ -4056,4 +4056,15 @@ class ScalarFunctionsTest extends ScalarTypesTestBase {\n       \"f55=f57\",\n       \"true\")\n   }\n+\n+  @Test\n+  def testCast(): Unit = {", "originalCommit": "0aeb2e48d1722fab6e1a52ab64d3c8bd5665048d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzkyMzIxMQ==", "url": "https://github.com/apache/flink/pull/13612#discussion_r503923211", "bodyText": "Yes, Thank you for reminder. I updated the test case.", "author": "wangxlong", "createdAt": "2020-10-13T12:50:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzg1MzQyNw=="}], "type": "inlineReview"}, {"oid": "09970816f805a2378d98fd11cd09ecaa674be1ed", "url": "https://github.com/apache/flink/commit/09970816f805a2378d98fd11cd09ecaa674be1ed", "message": "[FLINK-19587][table-planner-blink] Fix error result when casting binary as varchar", "committedDate": "2020-10-16T12:45:14Z", "type": "commit"}, {"oid": "ef4866ef2c4266a01d9a538a057b91c9af354d8b", "url": "https://github.com/apache/flink/commit/ef4866ef2c4266a01d9a538a057b91c9af354d8b", "message": "[FLINK-19587][table-planner-blink] Fix review comments", "committedDate": "2020-10-16T12:45:15Z", "type": "commit"}, {"oid": "a1a881b34bea5ede3b622e0d53c9728d232cb48c", "url": "https://github.com/apache/flink/commit/a1a881b34bea5ede3b622e0d53c9728d232cb48c", "message": "[FLINK-19587][table-planner-blink] Adjust the code", "committedDate": "2020-10-16T12:45:15Z", "type": "commit"}, {"oid": "a1a881b34bea5ede3b622e0d53c9728d232cb48c", "url": "https://github.com/apache/flink/commit/a1a881b34bea5ede3b622e0d53c9728d232cb48c", "message": "[FLINK-19587][table-planner-blink] Adjust the code", "committedDate": "2020-10-16T12:45:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQxMjYzNw==", "url": "https://github.com/apache/flink/pull/13612#discussion_r512412637", "bodyText": "Would be better to add a test for cast binary literal to varchar.", "author": "wuchong", "createdAt": "2020-10-27T04:40:28Z", "path": "flink-table/flink-table-planner-blink/src/test/scala/org/apache/flink/table/planner/expressions/ScalarOperatorsTest.scala", "diffHunk": "@@ -62,6 +62,26 @@ class ScalarOperatorsTest extends ScalarOperatorsTestBase {\n     )\n   }\n \n+  @Test\n+  def testCast(): Unit = {\n+\n+    // binary -> varchar\n+    testSqlApi(\n+      \"CAST (f18 as varchar)\",\n+      \"hello world\")\n+\n+    // varbinary -> varchar\n+    testSqlApi(\n+      \"CAST (f19 as varchar)\",\n+      \"hello flink\")\n+\n+    // null case\n+    testSqlApi(\"CAST (NULL AS INT)\", \"null\")\n+    testSqlApi(\n+      \"CAST (NULL AS VARCHAR) = ''\",\n+      \"null\")", "originalCommit": "a1a881b34bea5ede3b622e0d53c9728d232cb48c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjc3MzA4OQ==", "url": "https://github.com/apache/flink/pull/13612#discussion_r512773089", "bodyText": "Updated.", "author": "wangxlong", "createdAt": "2020-10-27T15:07:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQxMjYzNw=="}], "type": "inlineReview"}, {"oid": "046d675d2c1255d2f0c9cd919fe3abc065bdcf9a", "url": "https://github.com/apache/flink/commit/046d675d2c1255d2f0c9cd919fe3abc065bdcf9a", "message": "[FLINK-19587][table-planner-blink] Add binary literal cast test", "committedDate": "2020-10-27T14:46:39Z", "type": "commit"}]}