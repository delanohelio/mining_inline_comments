{"pr_number": 14399, "pr_title": "[FLINK-17827] [scala-shell] scala-shell.sh should fail early if no mo\u2026", "pr_createdAt": "2020-12-16T07:30:36Z", "pr_url": "https://github.com/apache/flink/pull/14399", "timeline": [{"oid": "b77668657f364d87999556ee746e5d995b79443f", "url": "https://github.com/apache/flink/commit/b77668657f364d87999556ee746e5d995b79443f", "message": "[FLINK-17827] [scala-shell] scala-shell.sh should fail early if no mode is specified, or have default logging settings", "committedDate": "2020-12-16T07:18:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDEzNTAwMw==", "url": "https://github.com/apache/flink/pull/14399#discussion_r550135003", "bodyText": "maybe we could simplify this further:\nif yarn {\n  use the session files\nelse {\n  use default files\n}", "author": "zentol", "createdAt": "2020-12-30T10:47:16Z", "path": "flink-scala-shell/start-script/start-scala-shell.sh", "diffHunk": "@@ -86,11 +86,15 @@ if [[ ($MODE = \"local\") || ($MODE = \"remote\") ]]\n then\n     LOG4J_CONFIG=log4j.properties\n     LOGBACK_CONFIG=logback.xml\n-elif [[ $1 = \"yarn\" ]]\n+elif [[ $MODE = \"yarn\" ]]", "originalCommit": "b77668657f364d87999556ee746e5d995b79443f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5d12faf957a2e129df5a32031e9a88e09f7b6ec7", "url": "https://github.com/apache/flink/commit/5d12faf957a2e129df5a32031e9a88e09f7b6ec7", "message": "[FLINK-17827] [scala-shell] scala-shell.sh should fail early if no mode is specified, or have default logging settings", "committedDate": "2020-12-31T07:27:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI3NzczMA==", "url": "https://github.com/apache/flink/pull/14399#discussion_r551277730", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tLOG4J_CONFIG=log4j-session.properties\n          \n          \n            \n                LOG4J_CONFIG=log4j-session.properties", "author": "zentol", "createdAt": "2021-01-04T12:04:49Z", "path": "flink-scala-shell/start-script/start-scala-shell.sh", "diffHunk": "@@ -82,15 +82,15 @@ fi\n MODE=$1\n LOG=$FLINK_LOG_DIR/flink-$FLINK_IDENT_STRING-scala-shell-$MODE-$HOSTNAME.log\n \n-if [[ ($MODE = \"local\") || ($MODE = \"remote\") ]]\n+if [[ $MODE = \"yarn\" ]]\n then\n-    LOG4J_CONFIG=log4j.properties\n-    LOGBACK_CONFIG=logback.xml\n-elif [[ $1 = \"yarn\" ]]\n-then\n-    LOG4J_CONFIG=log4j-session.properties\n+\tLOG4J_CONFIG=log4j-session.properties", "originalCommit": "5d12faf957a2e129df5a32031e9a88e09f7b6ec7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI3NzgwNg==", "url": "https://github.com/apache/flink/pull/14399#discussion_r551277806", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tLOG4J_CONFIG=log4j.properties\n          \n          \n            \n                LOG4J_CONFIG=log4j.properties", "author": "zentol", "createdAt": "2021-01-04T12:05:01Z", "path": "flink-scala-shell/start-script/start-scala-shell.sh", "diffHunk": "@@ -82,15 +82,15 @@ fi\n MODE=$1\n LOG=$FLINK_LOG_DIR/flink-$FLINK_IDENT_STRING-scala-shell-$MODE-$HOSTNAME.log\n \n-if [[ ($MODE = \"local\") || ($MODE = \"remote\") ]]\n+if [[ $MODE = \"yarn\" ]]\n then\n-    LOG4J_CONFIG=log4j.properties\n-    LOGBACK_CONFIG=logback.xml\n-elif [[ $1 = \"yarn\" ]]\n-then\n-    LOG4J_CONFIG=log4j-session.properties\n+\tLOG4J_CONFIG=log4j-session.properties\n     LOGBACK_CONFIG=logback-session.xml\n     FLINK_CLASSPATH=$FLINK_CLASSPATH:$HADOOP_CLASSPATH:$HADOOP_CONF_DIR:$YARN_CONF_DIR\n+else\n+\t# Set the default log config when MODE is something other than yarn. eg: local, remote or other invalid mode.\n+\tLOG4J_CONFIG=log4j.properties", "originalCommit": "5d12faf957a2e129df5a32031e9a88e09f7b6ec7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "91e6817de4241e28ed3fce17a737d651db577921", "url": "https://github.com/apache/flink/commit/91e6817de4241e28ed3fce17a737d651db577921", "message": "Update flink-scala-shell/start-script/start-scala-shell.sh", "committedDate": "2021-01-04T12:05:04Z", "type": "commit"}, {"oid": "26dc9b99a572a9c5d8db86cc829cf36fae3cd027", "url": "https://github.com/apache/flink/commit/26dc9b99a572a9c5d8db86cc829cf36fae3cd027", "message": "Update flink-scala-shell/start-script/start-scala-shell.sh", "committedDate": "2021-01-04T12:05:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI3ODA5OA==", "url": "https://github.com/apache/flink/pull/14399#discussion_r551278098", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t# Set the default log config when MODE is something other than yarn. eg: local, remote or other invalid mode.\n          \n          \n            \n                # Set the default log config when MODE is something other than yarn. eg: local, remote or other invalid mode.", "author": "zentol", "createdAt": "2021-01-04T12:05:43Z", "path": "flink-scala-shell/start-script/start-scala-shell.sh", "diffHunk": "@@ -82,15 +82,15 @@ fi\n MODE=$1\n LOG=$FLINK_LOG_DIR/flink-$FLINK_IDENT_STRING-scala-shell-$MODE-$HOSTNAME.log\n \n-if [[ ($MODE = \"local\") || ($MODE = \"remote\") ]]\n-then\n-    LOG4J_CONFIG=log4j.properties\n-    LOGBACK_CONFIG=logback.xml\n-elif [[ $1 = \"yarn\" ]]\n+if [[ $MODE = \"yarn\" ]]\n then\n     LOG4J_CONFIG=log4j-session.properties\n     LOGBACK_CONFIG=logback-session.xml\n     FLINK_CLASSPATH=$FLINK_CLASSPATH:$HADOOP_CLASSPATH:$HADOOP_CONF_DIR:$YARN_CONF_DIR\n+else\n+\t# Set the default log config when MODE is something other than yarn. eg: local, remote or other invalid mode.", "originalCommit": "26dc9b99a572a9c5d8db86cc829cf36fae3cd027", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ea85a4fc6bc8b036f434e5aeedbf04a062f9a793", "url": "https://github.com/apache/flink/commit/ea85a4fc6bc8b036f434e5aeedbf04a062f9a793", "message": "Update flink-scala-shell/start-script/start-scala-shell.sh", "committedDate": "2021-01-04T12:05:46Z", "type": "commit"}]}