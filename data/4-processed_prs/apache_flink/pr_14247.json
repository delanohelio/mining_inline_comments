{"pr_number": 14247, "pr_title": "[FLINK-20175][bp-1.11] Avro Confluent Registry SQL format does not support adding nullable columns", "pr_createdAt": "2020-11-27T09:41:21Z", "pr_url": "https://github.com/apache/flink/pull/14247", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5MTYwNg==", "url": "https://github.com/apache/flink/pull/14247#discussion_r531491606", "bodyText": "Use DataType directly. We should not advertise TableSchema anymore.", "author": "twalthr", "createdAt": "2020-11-27T09:49:32Z", "path": "flink-formats/flink-avro/src/test/java/org/apache/flink/formats/avro/typeutils/AvroSchemaConverterTest.java", "diffHunk": "@@ -54,6 +64,44 @@ public void testAvroSchemaConversion() {\n \t\tvalidateUserSchema(AvroSchemaConverter.convertToTypeInfo(schema));\n \t}\n \n+\t@Test\n+\tpublic void testAddingOptionalField() throws IOException {\n+\t\tSchema oldSchema = SchemaBuilder.record(\"record\")\n+\t\t\t.fields()\n+\t\t\t.requiredLong(\"category_id\")\n+\t\t\t.optionalString(\"name\")\n+\t\t\t.endRecord();\n+\n+\t\tSchema newSchema = AvroSchemaConverter.convertToSchema(\n+\t\t\tTableSchema.builder()", "originalCommit": "ab64e8547b2c75071536ea06594cca07c4a14bb2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "70cf3a3d81f9d5499e5008c5c5eca93a4cdb0c7b", "url": "https://github.com/apache/flink/commit/70cf3a3d81f9d5499e5008c5c5eca93a4cdb0c7b", "message": "[FLINK-20175] Avro Confluent Registry SQL format does not support adding nullable columns", "committedDate": "2020-11-27T13:35:00Z", "type": "commit"}, {"oid": "70cf3a3d81f9d5499e5008c5c5eca93a4cdb0c7b", "url": "https://github.com/apache/flink/commit/70cf3a3d81f9d5499e5008c5c5eca93a4cdb0c7b", "message": "[FLINK-20175] Avro Confluent Registry SQL format does not support adding nullable columns", "committedDate": "2020-11-27T13:35:00Z", "type": "forcePushed"}]}