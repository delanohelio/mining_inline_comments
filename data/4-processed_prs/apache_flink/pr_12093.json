{"pr_number": 12093, "pr_title": " [FLINK-17307] Add collector to deserialize method of DeserializationSchema", "pr_createdAt": "2020-05-12T07:18:52Z", "pr_url": "https://github.com/apache/flink/pull/12093", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4MTIxNg==", "url": "https://github.com/apache/flink/pull/12093#discussion_r423681216", "bodyText": "Is it ok that we now only \"break\" out of the loop after the autoAck handling?", "author": "aljoscha", "createdAt": "2020-05-12T12:08:22Z", "path": "flink-connectors/flink-connector-rabbitmq/src/main/java/org/apache/flink/streaming/connectors/rabbitmq/RMQSource.java", "diffHunk": "@@ -235,11 +230,44 @@ public void run(SourceContext<OUT> ctx) throws Exception {\n \t\t\t\t\tsessionIds.add(deliveryTag);\n \t\t\t\t}\n \n-\t\t\t\tctx.collect(result);\n+\t\t\t\tschema.deserialize(delivery.getBody(), collector);", "originalCommit": "d5c512da6104551adc64ef96643aaa185910c83e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4NDQ2Mw==", "url": "https://github.com/apache/flink/pull/12093#discussion_r423684463", "bodyText": "It is the same behaviour change as we did in Kafka. That we \"try\" to checkpoint the last element. Before as you are saying it was not checkpointed. Still the chances that it will actually be checkpointed are rather slim. Commiting of this acks happen on checkpoint. So the checkpoint would've to be triggered between breaking out of the loop and finishing the source task.\nThat said I think there should be no to minor implications of this change.", "author": "dawidwys", "createdAt": "2020-05-12T12:14:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4MTIxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4OTc0Nw==", "url": "https://github.com/apache/flink/pull/12093#discussion_r423689747", "bodyText": "Ok, thanks for the reminder!", "author": "aljoscha", "createdAt": "2020-05-12T12:23:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY4MTIxNg=="}], "type": "inlineReview"}, {"oid": "94b01f86573300d55eb6e18eaa0e02b0d0f1efe0", "url": "https://github.com/apache/flink/commit/94b01f86573300d55eb6e18eaa0e02b0d0f1efe0", "message": "[FLINK-17307] Add collector to deserialize method of DeserializationSchema", "committedDate": "2020-05-12T12:43:49Z", "type": "commit"}, {"oid": "259815f9f25947bc3a0426f988c4a81af8a126a8", "url": "https://github.com/apache/flink/commit/259815f9f25947bc3a0426f988c4a81af8a126a8", "message": "[FLINK-17307] Forward call to DeserializationSchema#collect with a\ncollector in KafkaDeserializationSchemaWrapper", "committedDate": "2020-05-12T12:43:49Z", "type": "commit"}, {"oid": "1159ea0a3f7dea7a887386224db7f37106090f82", "url": "https://github.com/apache/flink/commit/1159ea0a3f7dea7a887386224db7f37106090f82", "message": "[FLINK-17307] Add collector to deserialize in RMQ", "committedDate": "2020-05-12T12:43:49Z", "type": "commit"}, {"oid": "424fa6e7b916070d02452305766fd583a2055aea", "url": "https://github.com/apache/flink/commit/424fa6e7b916070d02452305766fd583a2055aea", "message": "[FLINK-17307] Check for deserialize method with a Collector in Kinesis consumer", "committedDate": "2020-05-12T12:43:49Z", "type": "commit"}, {"oid": "7fdbba2ed092a419bb6176ff5be5e91530ed0403", "url": "https://github.com/apache/flink/commit/7fdbba2ed092a419bb6176ff5be5e91530ed0403", "message": "[FLINK-17307] Add collector to deserialize in PubSub", "committedDate": "2020-05-12T12:43:49Z", "type": "forcePushed"}, {"oid": "7abf95e77ea4b57fef1683a70662d2c12e363426", "url": "https://github.com/apache/flink/commit/7abf95e77ea4b57fef1683a70662d2c12e363426", "message": "[FLINK-17307] Add collector to deserialize in PubSub", "committedDate": "2020-05-12T12:52:46Z", "type": "forcePushed"}, {"oid": "a164f63155ff1186da725900305572d73e8be05e", "url": "https://github.com/apache/flink/commit/a164f63155ff1186da725900305572d73e8be05e", "message": "[FLINK-17307] Add collector to deserialize in PubSub", "committedDate": "2020-05-12T15:20:53Z", "type": "forcePushed"}, {"oid": "047de7eb9bc15c15a4a0491686a87ee235867fde", "url": "https://github.com/apache/flink/commit/047de7eb9bc15c15a4a0491686a87ee235867fde", "message": "[FLINK-17307] Add collector to deserialize in PubSub", "committedDate": "2020-05-12T16:38:32Z", "type": "forcePushed"}, {"oid": "f2634d7b5d540e9615d149052d71f16d24fbd57e", "url": "https://github.com/apache/flink/commit/f2634d7b5d540e9615d149052d71f16d24fbd57e", "message": "[FLINK-17307] Add collector to deserialize in PubSub", "committedDate": "2020-05-12T17:33:31Z", "type": "commit"}, {"oid": "f2634d7b5d540e9615d149052d71f16d24fbd57e", "url": "https://github.com/apache/flink/commit/f2634d7b5d540e9615d149052d71f16d24fbd57e", "message": "[FLINK-17307] Add collector to deserialize in PubSub", "committedDate": "2020-05-12T17:33:31Z", "type": "forcePushed"}]}