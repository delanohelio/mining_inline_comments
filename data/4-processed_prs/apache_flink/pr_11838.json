{"pr_number": 11838, "pr_title": "[FLINK-16965] Convert Graphite reporter to plugin", "pr_createdAt": "2020-04-21T06:26:06Z", "pr_url": "https://github.com/apache/flink/pull/11838", "timeline": [{"oid": "9dd1c071e271de645564791bc9267551eb7021a2", "url": "https://github.com/apache/flink/commit/9dd1c071e271de645564791bc9267551eb7021a2", "message": "[FLINK-16965] Convert Graphite reporter to plugin", "committedDate": "2020-04-21T06:27:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTk4MjA2OQ==", "url": "https://github.com/apache/flink/pull/11838#discussion_r411982069", "bodyText": "we shouldn't be removing stuff", "author": "zentol", "createdAt": "2020-04-21T08:29:19Z", "path": "flink-metrics/flink-metrics-graphite/src/main/java/org/apache/flink/metrics/graphite/GraphiteReporter.java", "diffHunk": "@@ -32,7 +32,7 @@\n  * This class acts as a factory for the {@link com.codahale.metrics.graphite.GraphiteReporter} and allows using it as a\n  * Flink reporter.\n  */\n-@PublicEvolving", "originalCommit": "9dd1c071e271de645564791bc9267551eb7021a2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c2aeb8b4e003a0ed895019122114821ef2514546", "url": "https://github.com/apache/flink/commit/c2aeb8b4e003a0ed895019122114821ef2514546", "message": "[FLINK-16965] Convert Graphite reporter to plugin", "committedDate": "2020-04-21T09:48:33Z", "type": "forcePushed"}, {"oid": "a722129552523bfd0532d8b1e62a6093a05ba404", "url": "https://github.com/apache/flink/commit/a722129552523bfd0532d8b1e62a6093a05ba404", "message": "[FLINK-16965] Convert Graphite reporter to plugin", "committedDate": "2020-04-21T12:57:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgwMzQ1MQ==", "url": "https://github.com/apache/flink/pull/11838#discussion_r412803451", "bodyText": "these should also be removed", "author": "zentol", "createdAt": "2020-04-22T09:00:42Z", "path": "flink-metrics/flink-metrics-graphite/pom.xml", "diffHunk": "@@ -81,7 +81,6 @@ under the License.\n \t\t\t\t\t\t<configuration>\n \t\t\t\t\t\t\t<artifactSet>\n \t\t\t\t\t\t\t\t<includes>\n-\t\t\t\t\t\t\t\t\t<include>org.apache.flink:flink-metrics-dropwizard</include>\n \t\t\t\t\t\t\t\t\t<include>io.dropwizard.metrics:metrics-core</include>", "originalCommit": "a722129552523bfd0532d8b1e62a6093a05ba404", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjgwMzU3Mg==", "url": "https://github.com/apache/flink/pull/11838#discussion_r412803572", "bodyText": "revert", "author": "zentol", "createdAt": "2020-04-22T09:00:53Z", "path": "flink-metrics/flink-metrics-graphite/src/main/java/org/apache/flink/metrics/graphite/GraphiteReporter.java", "diffHunk": "@@ -29,10 +30,11 @@\n import java.util.concurrent.TimeUnit;\n \n /**\n- * This class acts as a factory for the {@link com.codahale.metrics.graphite.GraphiteReporter} and allows using it as a", "originalCommit": "a722129552523bfd0532d8b1e62a6093a05ba404", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f443c1371fa827b46d2f7f9bbc3929ce91563367", "url": "https://github.com/apache/flink/commit/f443c1371fa827b46d2f7f9bbc3929ce91563367", "message": "[FLINK-16965] Convert Graphite reporter to plugin", "committedDate": "2020-04-22T09:16:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMDQ2Nw==", "url": "https://github.com/apache/flink/pull/11838#discussion_r413020467", "bodyText": "ah, hold on, we do need this. Otherwise we aren't building a fat jar. Were we not relocating these? That's odd \ud83d\ude15", "author": "zentol", "createdAt": "2020-04-22T14:14:35Z", "path": "flink-metrics/flink-metrics-graphite/pom.xml", "diffHunk": "@@ -65,31 +65,4 @@ under the License.\n \t\t\t<version>${dropwizard.version}</version>\n \t\t</dependency>\n \t</dependencies>\n-\n-\t<build>\n-\t\t<plugins>\n-\t\t\t<plugin>\n-\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n-\t\t\t\t<artifactId>maven-shade-plugin</artifactId>\n-\t\t\t\t<executions>\n-\t\t\t\t\t<execution>\n-\t\t\t\t\t\t<id>shade-flink</id>\n-\t\t\t\t\t\t<phase>package</phase>\n-\t\t\t\t\t\t<goals>\n-\t\t\t\t\t\t\t<goal>shade</goal>\n-\t\t\t\t\t\t</goals>\n-\t\t\t\t\t\t<configuration>\n-\t\t\t\t\t\t\t<artifactSet>\n-\t\t\t\t\t\t\t\t<includes>\n-\t\t\t\t\t\t\t\t\t<include>org.apache.flink:flink-metrics-dropwizard</include>\n-\t\t\t\t\t\t\t\t\t<include>io.dropwizard.metrics:metrics-core</include>", "originalCommit": "f443c1371fa827b46d2f7f9bbc3929ce91563367", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ1MDk5OQ==", "url": "https://github.com/apache/flink/pull/11838#discussion_r413450999", "bodyText": "You mean we still need to shade \"io.dropwizard.metrics:metrics-core\" and \"io.dropwizard.metrics:metrics-graphite\", right?", "author": "KarmaGYZ", "createdAt": "2020-04-23T01:52:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMDQ2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1MDgxNA==", "url": "https://github.com/apache/flink/pull/11838#discussion_r413650814", "bodyText": "So this is where terminology is the name of the game. Forget the term \"shading\", because it is quite ambiguous.\nWe do not need to relocate any dependency, but we still want to bundle them in the jar.", "author": "zentol", "createdAt": "2020-04-23T09:14:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzAyMDQ2Nw=="}], "type": "inlineReview"}, {"oid": "cd4f2390481d8edcea676f07a6db2eafe0a4025c", "url": "https://github.com/apache/flink/commit/cd4f2390481d8edcea676f07a6db2eafe0a4025c", "message": "[FLINK-16965] Convert Graphite reporter to plugin", "committedDate": "2020-04-23T13:39:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg3NTI0Ng==", "url": "https://github.com/apache/flink/pull/11838#discussion_r413875246", "bodyText": "still need this too", "author": "zentol", "createdAt": "2020-04-23T15:03:36Z", "path": "flink-metrics/flink-metrics-graphite/pom.xml", "diffHunk": "@@ -81,7 +81,6 @@ under the License.\n \t\t\t\t\t\t<configuration>\n \t\t\t\t\t\t\t<artifactSet>\n \t\t\t\t\t\t\t\t<includes>\n-\t\t\t\t\t\t\t\t\t<include>org.apache.flink:flink-metrics-dropwizard</include>", "originalCommit": "cd4f2390481d8edcea676f07a6db2eafe0a4025c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b961c6a03d184e9a091b1513cb82f7aaa3956cf3", "url": "https://github.com/apache/flink/commit/b961c6a03d184e9a091b1513cb82f7aaa3956cf3", "message": "[FLINK-16965] Convert Graphite reporter to plugin", "committedDate": "2020-04-24T01:52:42Z", "type": "commit"}, {"oid": "b961c6a03d184e9a091b1513cb82f7aaa3956cf3", "url": "https://github.com/apache/flink/commit/b961c6a03d184e9a091b1513cb82f7aaa3956cf3", "message": "[FLINK-16965] Convert Graphite reporter to plugin", "committedDate": "2020-04-24T01:52:42Z", "type": "forcePushed"}]}