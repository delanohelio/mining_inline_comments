{"pr_number": 13757, "pr_title": "[FLINK-18117][e2e] Add debugging information for hadoop startup", "pr_createdAt": "2020-10-23T05:47:46Z", "pr_url": "https://github.com/apache/flink/pull/13757", "timeline": [{"oid": "b2cc9638a9d919e924a4a67b8d15e68e4dad530d", "url": "https://github.com/apache/flink/commit/b2cc9638a9d919e924a4a67b8d15e68e4dad530d", "message": "[FLINK-18117][e2e] Add debugging information for hadoop startup", "committedDate": "2020-10-23T05:45:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0MDQwNQ==", "url": "https://github.com/apache/flink/pull/13757#discussion_r510840405", "bodyText": "Are you sure that you want to use sudo -E sudo #...? I couldn't test it quickly but it looks strange.", "author": "XComp", "createdAt": "2020-10-23T12:13:36Z", "path": "flink-end-to-end-tests/test-scripts/docker-hadoop-secure-cluster/bootstrap.sh", "diffHunk": "@@ -92,7 +92,12 @@ if [ \"$1\" == \"--help\" -o \"$1\" == \"-h\" ]; then\n     exit 0\n elif [ \"$1\" == \"master\" ]; then\n     yes| sudo -E -u hdfs $HADOOP_PREFIX/bin/hdfs namenode -format\n-\n+    sudo -E sudo netstat -tulpn >> /var/log/hadoop/debugging.out\n+    echo \"--------------------\" >> /var/log/hadoop/debugging.out\n+    sudo -E sudo ps -aux >> /var/log/hadoop/debugging.out\n+    echo \"--------------------\" >> /var/log/hadoop/debugging.out\n+    sudo -E sudo jps -v >> /var/log/hadoop/debugging.out", "originalCommit": "b2cc9638a9d919e924a4a67b8d15e68e4dad530d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0NTczMg==", "url": "https://github.com/apache/flink/pull/13757#discussion_r510845732", "bodyText": "oh, that's clearly a mistake. Good catch! I'll fix it.", "author": "rmetzger", "createdAt": "2020-10-23T12:23:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0MDQwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0Mjg0Ng==", "url": "https://github.com/apache/flink/pull/13757#discussion_r510842846", "bodyText": "Just as a side-note: I usually added also -e as a parameter getting \"extended\" output. Not sure whether it helps in that case but it's just nice to read for someone who knows German: netstat -tulpen \ud83d\ude04", "author": "XComp", "createdAt": "2020-10-23T12:17:53Z", "path": "flink-end-to-end-tests/test-scripts/docker-hadoop-secure-cluster/bootstrap.sh", "diffHunk": "@@ -92,7 +92,12 @@ if [ \"$1\" == \"--help\" -o \"$1\" == \"-h\" ]; then\n     exit 0\n elif [ \"$1\" == \"master\" ]; then\n     yes| sudo -E -u hdfs $HADOOP_PREFIX/bin/hdfs namenode -format\n-\n+    sudo -E sudo netstat -tulpn >> /var/log/hadoop/debugging.out", "originalCommit": "b2cc9638a9d919e924a4a67b8d15e68e4dad530d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0NTU1NQ==", "url": "https://github.com/apache/flink/pull/13757#discussion_r510845555", "bodyText": "I tried the -e argument, but it only adds things like \"package count\" per port, which is not relevant for understanding who's allocating the port. (I copy pasted \"tulpn\" from somewhere, and also remembered the -e)", "author": "rmetzger", "createdAt": "2020-10-23T12:22:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg0Mjg0Ng=="}], "type": "inlineReview"}, {"oid": "6748cff26f3619285e65213570e61027f8d01796", "url": "https://github.com/apache/flink/commit/6748cff26f3619285e65213570e61027f8d01796", "message": "fixup", "committedDate": "2020-10-23T13:17:51Z", "type": "commit"}, {"oid": "6748cff26f3619285e65213570e61027f8d01796", "url": "https://github.com/apache/flink/commit/6748cff26f3619285e65213570e61027f8d01796", "message": "fixup", "committedDate": "2020-10-23T13:17:51Z", "type": "forcePushed"}]}