{"pr_number": 10861, "pr_title": "[FLINK-15558][Connector] Bump Elasticsearch version from 7.3.2 to 7.5.1 for es7 connector", "pr_createdAt": "2020-01-15T09:52:04Z", "pr_url": "https://github.com/apache/flink/pull/10861", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2MzAwMQ==", "url": "https://github.com/apache/flink/pull/10861#discussion_r367363001", "bodyText": "Why did you add mustache-client here? I think the rest of the dependencies look correct but about this one I don't know. It doesn't appear in the list of jars that are shaded in when I run mvn clean install -DskipTests -Dfast. In the ES7 SQL connector module.", "author": "aljoscha", "createdAt": "2020-01-16T11:18:06Z", "path": "flink-connectors/flink-sql-connector-elasticsearch7/src/main/resources/META-INF/NOTICE", "diffHunk": "@@ -15,31 +15,33 @@ This project bundles the following dependencies under the Apache Software Licens\n - org.apache.httpcomponents:httpasyncclient:4.1.4\n - org.apache.httpcomponents:httpclient:4.5.3\n - org.apache.httpcomponents:httpcore:4.4.6\n-- org.apache.httpcomponents:httpcore-nio:4.4.11\n+- org.apache.httpcomponents:httpcore-nio:4.4.12\n - org.apache.logging.log4j:log4j-api:2.11.1\n - org.apache.logging.log4j:log4j-to-slf4j:2.11.1\n-- org.apache.lucene:lucene-analyzers-common:8.1.0\n-- org.apache.lucene:lucene-backward-codecs:8.1.0\n-- org.apache.lucene:lucene-core:8.1.0\n-- org.apache.lucene:lucene-grouping:8.1.0\n-- org.apache.lucene:lucene-highlighter:8.1.0\n-- org.apache.lucene:lucene-join:8.1.0\n-- org.apache.lucene:lucene-memory:8.1.0\n-- org.apache.lucene:lucene-misc:8.1.0\n-- org.apache.lucene:lucene-queries:8.1.0\n-- org.apache.lucene:lucene-queryparser:8.1.0\n-- org.apache.lucene:lucene-sandbox:8.1.0\n-- org.apache.lucene:lucene-spatial:8.1.0\n-- org.apache.lucene:lucene-spatial-extras:8.1.0\n-- org.apache.lucene:lucene-spatial3d:8.1.0\n-- org.apache.lucene:lucene-suggest:8.1.0\n-- org.elasticsearch:elasticsearch:7.3.2\n-- org.elasticsearch:elasticsearch-cli:7.3.2\n-- org.elasticsearch:elasticsearch-core:7.3.2\n-- org.elasticsearch:elasticsearch-secure-sm:7.3.2\n-- org.elasticsearch:elasticsearch-x-content:7.3.2\n-- org.elasticsearch.client:elasticsearch-rest-client:7.3.2\n-- org.elasticsearch.client:elasticsearch-rest-high-level-client:7.3.2\n-- org.elasticsearch.plugin:aggs-matrix-stats-client:7.3.2\n-- org.elasticsearch.plugin:parent-join-client:7.3.2\n-- org.elasticsearch.plugin:rank-eval-client:7.3.2\n+- org.apache.lucene:lucene-analyzers-common:8.3.0\n+- org.apache.lucene:lucene-backward-codecs:8.3.0\n+- org.apache.lucene:lucene-core:8.3.0\n+- org.apache.lucene:lucene-grouping:8.3.0\n+- org.apache.lucene:lucene-highlighter:8.3.0\n+- org.apache.lucene:lucene-join:8.3.0\n+- org.apache.lucene:lucene-memory:8.3.0\n+- org.apache.lucene:lucene-misc:8.3.0\n+- org.apache.lucene:lucene-queries:8.3.0\n+- org.apache.lucene:lucene-queryparser:8.3.0\n+- org.apache.lucene:lucene-sandbox:8.3.0\n+- org.apache.lucene:lucene-spatial:8.3.0\n+- org.apache.lucene:lucene-spatial-extras:8.3.0\n+- org.apache.lucene:lucene-spatial3d:8.3.0\n+- org.apache.lucene:lucene-suggest:8.3.0\n+- org.elasticsearch:elasticsearch:7.5.1\n+- org.elasticsearch:elasticsearch-cli:7.5.1\n+- org.elasticsearch:elasticsearch-core:7.5.1\n+- org.elasticsearch:elasticsearch-secure-sm:7.5.1\n+- org.elasticsearch:elasticsearch-x-content:7.5.1\n+- org.elasticsearch.client:elasticsearch-rest-client:7.5.1\n+- org.elasticsearch.client:elasticsearch-rest-high-level-client:7.5.1\n+- org.elasticsearch.plugin:aggs-matrix-stats-client:7.5.1\n+- org.elasticsearch.plugin:lang-mustache-client:7.5.1", "originalCommit": "f4506ad0e9302a279940670fa90c305c240b3c12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2NjMyNw==", "url": "https://github.com/apache/flink/pull/10861#discussion_r367366327", "bodyText": "I run mvn dependency:tree and it shows this plugin.", "author": "yanghua", "createdAt": "2020-01-16T11:26:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2MzAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM4OTUzOQ==", "url": "https://github.com/apache/flink/pull/10861#discussion_r367389539", "bodyText": "But it's not in the resulting jar. If you run mvn clean install -DskipTests -Dfast in the ES7 SQL module you will get some output like this:\n[INFO] Including org.apache.flink:flink-connector-elasticsearch7_2.11:jar:1.11-SNAPSHOT in the shaded jar.\n[INFO] Including org.apache.flink:flink-connector-elasticsearch-base_2.11:jar:1.11-SNAPSHOT in the shaded jar.\n[INFO] Including org.elasticsearch.client:elasticsearch-rest-high-level-client:jar:7.5.1 in the shaded jar.\n[INFO] Including org.elasticsearch:elasticsearch:jar:7.5.1 in the shaded jar.\n[INFO] Including org.elasticsearch:elasticsearch-core:jar:7.5.1 in the shaded jar.\n[INFO] Including org.elasticsearch:elasticsearch-secure-sm:jar:7.5.1 in the shaded jar.\n[INFO] Including org.elasticsearch:elasticsearch-x-content:jar:7.5.1 in the shaded jar.\n[INFO] Excluding org.yaml:snakeyaml:jar:1.17 from the shaded jar.\n[INFO] Including com.fasterxml.jackson.core:jackson-core:jar:2.10.1 in the shaded jar.\n[INFO] Including com.fasterxml.jackson.dataformat:jackson-dataformat-smile:jar:2.8.11 in the shaded jar.\n[INFO] Including com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.8.11 in the shaded jar.\n[INFO] Including com.fasterxml.jackson.dataformat:jackson-dataformat-cbor:jar:2.8.11 in the shaded jar.\n[INFO] Excluding org.elasticsearch:elasticsearch-geo:jar:7.5.1 from the shaded jar.\n[INFO] Including org.apache.lucene:lucene-core:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-analyzers-common:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-backward-codecs:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-grouping:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-highlighter:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-join:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-memory:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-misc:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-queries:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-queryparser:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-sandbox:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-spatial:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-spatial-extras:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-spatial3d:jar:8.3.0 in the shaded jar.\n[INFO] Including org.apache.lucene:lucene-suggest:jar:8.3.0 in the shaded jar.\n[INFO] Including org.elasticsearch:elasticsearch-cli:jar:7.5.1 in the shaded jar.\n[INFO] Excluding net.sf.jopt-simple:jopt-simple:jar:5.0.2 from the shaded jar.\n[INFO] Excluding com.carrotsearch:hppc:jar:0.8.1 from the shaded jar.\n[INFO] Excluding joda-time:joda-time:jar:2.5 from the shaded jar.\n[INFO] Excluding com.tdunning:t-digest:jar:3.2 from the shaded jar.\n[INFO] Excluding org.hdrhistogram:HdrHistogram:jar:2.1.9 from the shaded jar.\n[INFO] Excluding org.elasticsearch:jna:jar:4.5.1 from the shaded jar.\n[INFO] Including org.elasticsearch.client:elasticsearch-rest-client:jar:7.5.1 in the shaded jar.\n[INFO] Including org.apache.httpcomponents:httpclient:jar:4.5.3 in the shaded jar.\n[INFO] Including org.apache.httpcomponents:httpcore:jar:4.4.6 in the shaded jar.\n[INFO] Including org.apache.httpcomponents:httpasyncclient:jar:4.1.4 in the shaded jar.\n[INFO] Including org.apache.httpcomponents:httpcore-nio:jar:4.4.12 in the shaded jar.\n[INFO] Including commons-codec:commons-codec:jar:1.10 in the shaded jar.\n[INFO] Including commons-logging:commons-logging:jar:1.1.3 in the shaded jar.\n[INFO] Including org.elasticsearch.plugin:mapper-extras-client:jar:7.5.1 in the shaded jar.\n[INFO] Including org.elasticsearch.plugin:parent-join-client:jar:7.5.1 in the shaded jar.\n[INFO] Including org.elasticsearch.plugin:aggs-matrix-stats-client:jar:7.5.1 in the shaded jar.\n[INFO] Including org.elasticsearch.plugin:rank-eval-client:jar:7.5.1 in the shaded jar.\n[INFO] Excluding org.elasticsearch.plugin:lang-mustache-client:jar:7.5.1 from the shaded jar.\n[INFO] Excluding com.github.spullara.mustache.java:compiler:jar:0.9.6 from the shaded jar.\n[INFO] Including org.apache.logging.log4j:log4j-to-slf4j:jar:2.11.1 in the shaded jar.\n[INFO] Including org.apache.logging.log4j:log4j-api:jar:2.11.1 in the shaded jar.\n[INFO] Including org.apache.flink:force-shading:jar:1.11-SNAPSHOT in the shaded jar.\n[INFO] No artifact matching filter io.netty:netty\n\nwhich tells you what is included in the jar.", "author": "aljoscha", "createdAt": "2020-01-16T12:24:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2MzAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM5MTE4Ng==", "url": "https://github.com/apache/flink/pull/10861#discussion_r367391186", "bodyText": "OK, Got it. I referenced the dependency tree before. Will remove it now.\n- org.elasticsearch.plugin:lang-mustache-client:7.5.1", "author": "yanghua", "createdAt": "2020-01-16T12:28:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2MzAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM5MjQyMA==", "url": "https://github.com/apache/flink/pull/10861#discussion_r367392420", "bodyText": "Done.", "author": "yanghua", "createdAt": "2020-01-16T12:32:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2MzAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM5MjY5NQ==", "url": "https://github.com/apache/flink/pull/10861#discussion_r367392695", "bodyText": "Thanks, I think this is good to merge now! \ud83c\udf75", "author": "aljoscha", "createdAt": "2020-01-16T12:33:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM2MzAwMQ=="}], "type": "inlineReview"}, {"oid": "c9d66ac0aa07caacebc732142862b7c71f74cac6", "url": "https://github.com/apache/flink/commit/c9d66ac0aa07caacebc732142862b7c71f74cac6", "message": "[FLINK-15558][Connector] Bump Elasticsearch version from 7.3.2 to 7.5.1 for es7 connector", "committedDate": "2020-01-16T12:31:18Z", "type": "commit"}, {"oid": "c9d66ac0aa07caacebc732142862b7c71f74cac6", "url": "https://github.com/apache/flink/commit/c9d66ac0aa07caacebc732142862b7c71f74cac6", "message": "[FLINK-15558][Connector] Bump Elasticsearch version from 7.3.2 to 7.5.1 for es7 connector", "committedDate": "2020-01-16T12:31:18Z", "type": "forcePushed"}]}