{"pr_number": 12602, "pr_title": "[FLINK-18140][doc][orc] Add documentation for ORC format", "pr_createdAt": "2020-06-11T10:33:32Z", "pr_url": "https://github.com/apache/flink/pull/12602", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzMzU1OQ==", "url": "https://github.com/apache/flink/pull/12602#discussion_r439233559", "bodyText": "Add {% if site.is_stable %} to show the link for stable release ?", "author": "danny0405", "createdAt": "2020-06-12T06:35:55Z", "path": "docs/dev/table/connectors/formats/orc.md", "diffHunk": "@@ -0,0 +1,183 @@\n+---\n+title: \"Orc Format\"\n+nav-title: Orc\n+nav-parent_id: sql-formats\n+nav-pos: 6\n+---\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<span class=\"label label-info\">Format: Serialization Schema</span>\n+<span class=\"label label-info\">Format: Deserialization Schema</span>\n+\n+* This will be replaced by the TOC\n+{:toc}\n+\n+The [Apache Orc](https://orc.apache.org/) format allows to read and write Orc data.\n+\n+Dependencies\n+------------\n+\n+In order to setup the Orc format, the following table provides dependency information for both\n+projects using a build automation tool (such as Maven or SBT) and SQL Client with SQL JAR bundles.\n+\n+| Maven dependency   | SQL Client JAR         |\n+| :----------------- | :----------------------|\n+| `flink-orc`        | [Download](https://repo.maven.apache.org/maven2/org/apache/flink/flink-orc{{site.scala_version_suffix}}/{{site.version}}/flink-orc{{site.scala_version_suffix}}-{{site.version}}-jar-with-dependencies.jar) |\n+", "originalCommit": "c139ede6cd628aac3b30405c63a738c9682007da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzNDMyNw==", "url": "https://github.com/apache/flink/pull/12602#discussion_r439234327", "bodyText": "Composite data type: Array, Map and Row are not supported.", "author": "danny0405", "createdAt": "2020-06-12T06:38:02Z", "path": "docs/dev/table/connectors/formats/orc.md", "diffHunk": "@@ -0,0 +1,183 @@\n+---\n+title: \"Orc Format\"\n+nav-title: Orc\n+nav-parent_id: sql-formats\n+nav-pos: 6\n+---\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<span class=\"label label-info\">Format: Serialization Schema</span>\n+<span class=\"label label-info\">Format: Deserialization Schema</span>\n+\n+* This will be replaced by the TOC\n+{:toc}\n+\n+The [Apache Orc](https://orc.apache.org/) format allows to read and write Orc data.\n+\n+Dependencies\n+------------\n+\n+In order to setup the Orc format, the following table provides dependency information for both\n+projects using a build automation tool (such as Maven or SBT) and SQL Client with SQL JAR bundles.\n+\n+| Maven dependency   | SQL Client JAR         |\n+| :----------------- | :----------------------|\n+| `flink-orc`        | [Download](https://repo.maven.apache.org/maven2/org/apache/flink/flink-orc{{site.scala_version_suffix}}/{{site.version}}/flink-orc{{site.scala_version_suffix}}-{{site.version}}-jar-with-dependencies.jar) |\n+\n+How to create a table with Orc format\n+----------------\n+\n+Here is an example to create a table using Filesystem connector and Orc format.\n+\n+<div class=\"codetabs\" markdown=\"1\">\n+<div data-lang=\"SQL\" markdown=\"1\">\n+{% highlight sql %}\n+CREATE TABLE user_behavior (\n+  user_id BIGINT,\n+  item_id BIGINT,\n+  category_id BIGINT,\n+  behavior STRING,\n+  ts TIMESTAMP(3),\n+  dt STRING\n+) PARTITIONED BY (dt) WITH (\n+ 'connector' = 'filesystem',\n+ 'path' = '/tmp/user_behavior',\n+ 'format' = 'orc'\n+)\n+{% endhighlight %}\n+</div>\n+</div>\n+\n+Format Options\n+----------------\n+\n+<table class=\"table table-bordered\">\n+    <thead>\n+      <tr>\n+        <th class=\"text-left\" style=\"width: 25%\">Option</th>\n+        <th class=\"text-center\" style=\"width: 8%\">Required</th>\n+        <th class=\"text-center\" style=\"width: 7%\">Default</th>\n+        <th class=\"text-center\" style=\"width: 10%\">Type</th>\n+        <th class=\"text-center\" style=\"width: 50%\">Description</th>\n+      </tr>\n+    </thead>\n+    <tbody>\n+    <tr>\n+      <td><h5>format</h5></td>\n+      <td>required</td>\n+      <td style=\"word-wrap: break-word;\">(none)</td>\n+      <td>String</td>\n+      <td>Specify what format to use, here should be 'orc'.</td>\n+    </tr>\n+    </tbody>\n+</table>\n+\n+Orc format also supports table properties from [Table properties](https://orc.apache.org/docs/hive-config.html#table-properties).\n+For example, you can configure `orc.compress=SNAPPY` to enable snappy compression.\n+\n+Data Type Mapping\n+----------------\n+\n+Orc format type mapping is compatible with Apache Hive.\n+The following table lists the type mapping from Flink type to Orc type.\n+\n+<table class=\"table table-bordered\">\n+    <thead>\n+      <tr>\n+        <th class=\"text-left\">Flink Data Type</th>\n+        <th class=\"text-center\">Orc physical type</th>\n+        <th class=\"text-center\">Orc logical type</th>\n+      </tr>\n+    </thead>\n+    <tbody>\n+    <tr>\n+      <td>CHAR</td>\n+      <td>bytes</td>\n+      <td>CHAR</td>\n+    </tr>\n+    <tr>\n+      <td>VARCHAR</td>\n+      <td>bytes</td>\n+      <td>VARCHAR</td>\n+    </tr>\n+    <tr>\n+      <td>STRING</td>\n+      <td>bytes</td>\n+      <td>STRING</td>\n+    </tr>\n+    <tr>\n+      <td>BOOLEAN</td>\n+      <td>long</td>\n+      <td>BOOLEAN</td>\n+    </tr>\n+    <tr>\n+      <td>BYTES</td>\n+      <td>bytes</td>\n+      <td>BINARY</td>\n+    </tr>\n+    <tr>\n+      <td>DECIMAL</td>\n+      <td>decimal</td>\n+      <td>DECIMAL</td>\n+    </tr>\n+    <tr>\n+      <td>TINYINT</td>\n+      <td>long</td>\n+      <td>BYTE</td>\n+    </tr>\n+    <tr>\n+      <td>SMALLINT</td>\n+      <td>long</td>\n+      <td>SHORT</td>\n+    </tr>\n+    <tr>\n+      <td>INT</td>\n+      <td>long</td>\n+      <td>INT</td>\n+    </tr>\n+    <tr>\n+      <td>BIGINT</td>\n+      <td>long</td>\n+      <td>LONG</td>\n+    </tr>\n+    <tr>\n+      <td>FLOAT</td>\n+      <td>double</td>\n+      <td>FLOAT</td>\n+    </tr>\n+    <tr>\n+      <td>DOUBLE</td>\n+      <td>double</td>\n+      <td>DOUBLE</td>\n+    </tr>\n+    <tr>\n+      <td>DATE</td>\n+      <td>long</td>\n+      <td>DATE</td>\n+    </tr>\n+    <tr>\n+      <td>TIMESTAMP</td>\n+      <td>timestamp</td>\n+      <td>TIMESTAMP</td>\n+    </tr>\n+    </tbody>\n+</table>\n+\n+<span class=\"label label-danger\">Attention</span> Not support complex data type like: Array, Map, Row.", "originalCommit": "c139ede6cd628aac3b30405c63a738c9682007da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2d4a08211af53289fc8324c0fd0b877960707466", "url": "https://github.com/apache/flink/commit/2d4a08211af53289fc8324c0fd0b877960707466", "message": "Fix link", "committedDate": "2020-06-12T07:08:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI4NzczOA==", "url": "https://github.com/apache/flink/pull/12602#discussion_r439287738", "bodyText": "I think it's better to provide the full coordinates of the maven artifact, e.g. org.apache.flink:flink-orc.... Or maybe something like\n\t\t<dependency>\n\t\t\t<groupId>org.apache.flink</groupId>\n\t\t\t<artifactId>flink-orc_{{site.scala_version_suffix}}</artifactId>\n\t\t\t<version>{{site.version}}</version>\n\t\t</dependency>\n\nThen users can simply copy it to their pom files.", "author": "lirui-apache", "createdAt": "2020-06-12T08:40:50Z", "path": "docs/dev/table/connectors/formats/orc.md", "diffHunk": "@@ -0,0 +1,183 @@\n+---\n+title: \"Orc Format\"\n+nav-title: Orc\n+nav-parent_id: sql-formats\n+nav-pos: 6\n+---\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<span class=\"label label-info\">Format: Serialization Schema</span>\n+<span class=\"label label-info\">Format: Deserialization Schema</span>\n+\n+* This will be replaced by the TOC\n+{:toc}\n+\n+The [Apache Orc](https://orc.apache.org/) format allows to read and write Orc data.\n+\n+Dependencies\n+------------\n+\n+In order to setup the Orc format, the following table provides dependency information for both\n+projects using a build automation tool (such as Maven or SBT) and SQL Client with SQL JAR bundles.\n+\n+| Maven dependency   | SQL Client JAR         |\n+| :----------------- | :----------------------|\n+| `flink-orc`        |{% if site.is_stable %} [Download](https://repo.maven.apache.org/maven2/org/apache/flink/flink-orc{{site.scala_version_suffix}}/{{site.version}}/flink-orc{{site.scala_version_suffix}}-{{site.version}}-jar-with-dependencies.jar) {% else %} Only available for stable releases {% endif %}|", "originalCommit": "9064e345ad710b98d63cf01843b6491325f1af38", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM1NjQ2Mw==", "url": "https://github.com/apache/flink/pull/12602#discussion_r439356463", "bodyText": "It is currently Flink dependency style.", "author": "JingsongLi", "createdAt": "2020-06-12T11:09:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI4NzczOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM1ODQ1Mg==", "url": "https://github.com/apache/flink/pull/12602#discussion_r439358452", "bodyText": "But I think we can add _{{site.scala_version_suffix}}", "author": "JingsongLi", "createdAt": "2020-06-12T11:13:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI4NzczOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI4OTk5Nw==", "url": "https://github.com/apache/flink/pull/12602#discussion_r439289997", "bodyText": "Shall we list all the supported properties? Or maybe we can add link to Orc doc if all the properties are supported.", "author": "lirui-apache", "createdAt": "2020-06-12T08:45:21Z", "path": "docs/dev/table/connectors/formats/orc.md", "diffHunk": "@@ -0,0 +1,183 @@\n+---\n+title: \"Orc Format\"\n+nav-title: Orc\n+nav-parent_id: sql-formats\n+nav-pos: 6\n+---\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+\n+<span class=\"label label-info\">Format: Serialization Schema</span>\n+<span class=\"label label-info\">Format: Deserialization Schema</span>\n+\n+* This will be replaced by the TOC\n+{:toc}\n+\n+The [Apache Orc](https://orc.apache.org/) format allows to read and write Orc data.\n+\n+Dependencies\n+------------\n+\n+In order to setup the Orc format, the following table provides dependency information for both\n+projects using a build automation tool (such as Maven or SBT) and SQL Client with SQL JAR bundles.\n+\n+| Maven dependency   | SQL Client JAR         |\n+| :----------------- | :----------------------|\n+| `flink-orc`        |{% if site.is_stable %} [Download](https://repo.maven.apache.org/maven2/org/apache/flink/flink-orc{{site.scala_version_suffix}}/{{site.version}}/flink-orc{{site.scala_version_suffix}}-{{site.version}}-jar-with-dependencies.jar) {% else %} Only available for stable releases {% endif %}|\n+\n+How to create a table with Orc format\n+----------------\n+\n+Here is an example to create a table using Filesystem connector and Orc format.\n+\n+<div class=\"codetabs\" markdown=\"1\">\n+<div data-lang=\"SQL\" markdown=\"1\">\n+{% highlight sql %}\n+CREATE TABLE user_behavior (\n+  user_id BIGINT,\n+  item_id BIGINT,\n+  category_id BIGINT,\n+  behavior STRING,\n+  ts TIMESTAMP(3),\n+  dt STRING\n+) PARTITIONED BY (dt) WITH (\n+ 'connector' = 'filesystem',\n+ 'path' = '/tmp/user_behavior',\n+ 'format' = 'orc'\n+)\n+{% endhighlight %}\n+</div>\n+</div>\n+\n+Format Options\n+----------------\n+\n+<table class=\"table table-bordered\">\n+    <thead>\n+      <tr>\n+        <th class=\"text-left\" style=\"width: 25%\">Option</th>\n+        <th class=\"text-center\" style=\"width: 8%\">Required</th>\n+        <th class=\"text-center\" style=\"width: 7%\">Default</th>\n+        <th class=\"text-center\" style=\"width: 10%\">Type</th>\n+        <th class=\"text-center\" style=\"width: 50%\">Description</th>\n+      </tr>\n+    </thead>\n+    <tbody>\n+    <tr>\n+      <td><h5>format</h5></td>\n+      <td>required</td>\n+      <td style=\"word-wrap: break-word;\">(none)</td>\n+      <td>String</td>\n+      <td>Specify what format to use, here should be 'orc'.</td>\n+    </tr>\n+    </tbody>\n+</table>\n+\n+Orc format also supports table properties from [Table properties](https://orc.apache.org/docs/hive-config.html#table-properties).\n+For example, you can configure `orc.compress=SNAPPY` to enable snappy compression.", "originalCommit": "9064e345ad710b98d63cf01843b6491325f1af38", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTM1NjgzNA==", "url": "https://github.com/apache/flink/pull/12602#discussion_r439356834", "bodyText": "We don't need add all orc properties. I have added Orc doc.", "author": "JingsongLi", "createdAt": "2020-06-12T11:10:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI4OTk5Nw=="}], "type": "inlineReview"}, {"oid": "366286c9bd4ae2ca448fa5e1baba2ff122def03c", "url": "https://github.com/apache/flink/commit/366286c9bd4ae2ca448fa5e1baba2ff122def03c", "message": "Fix comments", "committedDate": "2020-06-12T11:17:44Z", "type": "forcePushed"}, {"oid": "a86b9ba85d70f66969fc5c353c4c120f53edc066", "url": "https://github.com/apache/flink/commit/a86b9ba85d70f66969fc5c353c4c120f53edc066", "message": "[FLINK-18140][doc][orc] Add documentation for ORC format", "committedDate": "2020-06-15T01:57:55Z", "type": "commit"}, {"oid": "578d77398dd686494dcce49a37cffeee47e4438f", "url": "https://github.com/apache/flink/commit/578d77398dd686494dcce49a37cffeee47e4438f", "message": "Update index", "committedDate": "2020-06-15T01:57:55Z", "type": "commit"}, {"oid": "e01ca4674da6f8f0b77e44b7cd3d50a58fe5cfd3", "url": "https://github.com/apache/flink/commit/e01ca4674da6f8f0b77e44b7cd3d50a58fe5cfd3", "message": "Fix comments", "committedDate": "2020-06-15T01:57:55Z", "type": "commit"}, {"oid": "14b31676733f3f5c8b68afeeab86fb283e17b2e5", "url": "https://github.com/apache/flink/commit/14b31676733f3f5c8b68afeeab86fb283e17b2e5", "message": "Fix link", "committedDate": "2020-06-15T01:57:55Z", "type": "commit"}, {"oid": "6a3682a0783d65abdf377d5dc0066ccdceeb9443", "url": "https://github.com/apache/flink/commit/6a3682a0783d65abdf377d5dc0066ccdceeb9443", "message": "Fix link", "committedDate": "2020-06-15T01:57:55Z", "type": "commit"}, {"oid": "616ce701e56659bdf8480b5aca1d4b9a26f5aace", "url": "https://github.com/apache/flink/commit/616ce701e56659bdf8480b5aca1d4b9a26f5aace", "message": "Fix comments", "committedDate": "2020-06-15T01:57:55Z", "type": "commit"}, {"oid": "5cba9c0df7edd3146220c4d60d6d231bed5f71ff", "url": "https://github.com/apache/flink/commit/5cba9c0df7edd3146220c4d60d6d231bed5f71ff", "message": "Fix minor", "committedDate": "2020-06-15T02:03:24Z", "type": "commit"}, {"oid": "5cba9c0df7edd3146220c4d60d6d231bed5f71ff", "url": "https://github.com/apache/flink/commit/5cba9c0df7edd3146220c4d60d6d231bed5f71ff", "message": "Fix minor", "committedDate": "2020-06-15T02:03:24Z", "type": "forcePushed"}]}