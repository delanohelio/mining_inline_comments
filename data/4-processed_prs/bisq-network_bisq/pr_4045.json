{"pr_number": 4045, "pr_title": "Allow IPv6 connections to Bitcoin nodes", "pr_createdAt": "2020-03-11T04:04:14Z", "pr_url": "https://github.com/bisq-network/bisq/pull/4045", "timeline": [{"oid": "1d2f5be5bcd51b10707d76d546ca70f718600a3b", "url": "https://github.com/bisq-network/bisq/commit/1d2f5be5bcd51b10707d76d546ca70f718600a3b", "message": "fix #3990", "committedDate": "2020-03-16T15:29:04Z", "type": "forcePushed"}, {"oid": "d5c639e7305a987d63dda51b94f0ce71eea3a5e0", "url": "https://github.com/bisq-network/bisq/commit/d5c639e7305a987d63dda51b94f0ce71eea3a5e0", "message": "Allow IPv6 connections to Bitcoin nodes (fixes #3990)", "committedDate": "2020-03-16T15:33:09Z", "type": "forcePushed"}, {"oid": "f94f70efe9afd44ebff20953f62286b71bad70fa", "url": "https://github.com/bisq-network/bisq/commit/f94f70efe9afd44ebff20953f62286b71bad70fa", "message": "Allow IPv6 connections to Bitcoin nodes (fixes #3990)", "committedDate": "2020-03-17T15:12:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc2MDM0Mg==", "url": "https://github.com/bisq-network/bisq/pull/4045#discussion_r393760342", "bodyText": "Is there a drawback when we set this as default for all nodes?", "author": "ripcurlx", "createdAt": "2020-03-17T15:23:08Z", "path": "common/src/main/java/bisq/common/setup/CommonSetup.java", "diffHunk": "@@ -38,6 +38,9 @@ public static void setup(UncaughtExceptionHandler uncaughtExceptionHandler) {\n \n         if (Utilities.isLinux())\n             System.setProperty(\"prism.lcdtext\", \"false\");\n+\n+        // #3990 allow IPv6 custom Bitcoin node in settings by hostname\n+        System.setProperty(\"java.net.preferIPv6Addresses\", \"true\");", "originalCommit": "f94f70efe9afd44ebff20953f62286b71bad70fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc2MDk5NA==", "url": "https://github.com/bisq-network/bisq/pull/4045#discussion_r393760994", "bodyText": "Compared to doing it based on a user preference.", "author": "ripcurlx", "createdAt": "2020-03-17T15:24:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc2MDM0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc5NTM1Nw==", "url": "https://github.com/bisq-network/bisq/pull/4045#discussion_r393795357", "bodyText": "I have not seen any drawback from setting this, even if IPv6 is not available.  Here's a document on the subject, which mentions setting the property.  And another one which mentions that the setting has to be made very early in app startup.\nIf you think its too risky we can revert to choosing between IPv4 and IPv6 addresses in BtcNodeConverter where it creates a PeerAddress from hostname.", "author": "jmacxx", "createdAt": "2020-03-17T16:09:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzc2MDM0Mg=="}], "type": "inlineReview"}, {"oid": "26d34b7b6f504247c2d14547013418df9ed0f35d", "url": "https://github.com/bisq-network/bisq/commit/26d34b7b6f504247c2d14547013418df9ed0f35d", "message": "Allow IPv6 connections to Bitcoin nodes (fixes #3990)\n\nCurrently bisq desktop does not accept IPv6 addresses in the settings for\ncustom nodes or via the --btcNodes command line option.  The separation of\naddress and port is handled incorrectly in core / BtcNodes::fromFullAddress.\nThis results in IPv6 addresses being ignored.  Where Tor is enabled for\nBitcoin connections, we need to handle the IPv6 address response\nfrom Tor DNS lookup.  For clearnet use, we tell Java that IPv6 is prefered\nvia setting the property `java.net.preferIPv6Addresses`.", "committedDate": "2020-03-18T16:00:09Z", "type": "forcePushed"}, {"oid": "dd46bf8440aa322f38793b2be8dbc3168283a23b", "url": "https://github.com/bisq-network/bisq/commit/dd46bf8440aa322f38793b2be8dbc3168283a23b", "message": "Bugfix in detection of hostnames with port", "committedDate": "2020-03-18T18:12:35Z", "type": "forcePushed"}, {"oid": "098f4f479a97c087919bc639e52dd7850f05e535", "url": "https://github.com/bisq-network/bisq/commit/098f4f479a97c087919bc639e52dd7850f05e535", "message": "Allow IPv6 connections to Bitcoin nodes (fixes #3990)\n\nCurrently bisq desktop does not accept IPv6 addresses in the settings for\ncustom nodes or via the --btcNodes command line option.  The separation of\naddress and port is handled incorrectly in core / BtcNodes::fromFullAddress.\nThis results in IPv6 addresses being ignored.  Where Tor is enabled for\nBitcoin connections, we need to handle the IPv6 address response\nfrom Tor DNS lookup.  For clearnet use, we tell Java that IPv6 is prefered\nvia setting the property `java.net.preferIPv6Addresses`.", "committedDate": "2020-03-19T19:15:32Z", "type": "forcePushed"}, {"oid": "b1a8d944bf8e3561a79802c055d8325716b09983", "url": "https://github.com/bisq-network/bisq/commit/b1a8d944bf8e3561a79802c055d8325716b09983", "message": "Allow IPv6 connections to Bitcoin nodes\n\nCurrently bisq desktop does not accept IPv6 addresses in the settings for\ncustom nodes or via the --btcNodes command line option.  The separation of\naddress and port is handled incorrectly in core / BtcNodes::fromFullAddress.\nThis results in IPv6 addresses being ignored.  Where Tor is enabled for\nBitcoin connections, we need to handle the IPv6 address response\nfrom Tor DNS lookup.\n\nFixes #3990", "committedDate": "2020-03-19T19:20:50Z", "type": "commit"}, {"oid": "607dbec30c04752752150682362c0553d8a82a1f", "url": "https://github.com/bisq-network/bisq/commit/607dbec30c04752752150682362c0553d8a82a1f", "message": "Allow IPv6 connections to Bitcoin nodes\n\nCurrently bisq desktop does not accept IPv6 addresses in the settings for\ncustom nodes or via the --btcNodes command line option.  The separation of\naddress and port is handled incorrectly in core / BtcNodes::fromFullAddress.\nThis results in IPv6 addresses being ignored.  Where Tor is enabled for\nBitcoin connections, we need to handle the IPv6 address response\nfrom Tor DNS lookup.  For clearnet use, we tell Java that IPv6 is prefered\nvia setting the property `java.net.preferIPv6Addresses`.\n\nFixes #3990", "committedDate": "2020-03-19T19:17:57Z", "type": "forcePushed"}, {"oid": "b1a8d944bf8e3561a79802c055d8325716b09983", "url": "https://github.com/bisq-network/bisq/commit/b1a8d944bf8e3561a79802c055d8325716b09983", "message": "Allow IPv6 connections to Bitcoin nodes\n\nCurrently bisq desktop does not accept IPv6 addresses in the settings for\ncustom nodes or via the --btcNodes command line option.  The separation of\naddress and port is handled incorrectly in core / BtcNodes::fromFullAddress.\nThis results in IPv6 addresses being ignored.  Where Tor is enabled for\nBitcoin connections, we need to handle the IPv6 address response\nfrom Tor DNS lookup.\n\nFixes #3990", "committedDate": "2020-03-19T19:20:50Z", "type": "forcePushed"}]}