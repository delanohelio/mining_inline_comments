{"pr_number": 3985, "pr_title": "Monitoring install scripts", "pr_createdAt": "2020-02-18T11:18:14Z", "pr_url": "https://github.com/bisq-network/bisq/pull/3985", "timeline": [{"oid": "c94db5285bb7e7d87f7e1f7d00e750d78307d0c0", "url": "https://github.com/bisq-network/bisq/commit/c94db5285bb7e7d87f7e1f7d00e750d78307d0c0", "message": "Install script for collectd", "committedDate": "2020-02-18T11:34:10Z", "type": "commit"}, {"oid": "79eb3079effe83212532b3ed358fb372d344cd01", "url": "https://github.com/bisq-network/bisq/commit/79eb3079effe83212532b3ed358fb372d344cd01", "message": "Install script for network size metric", "committedDate": "2020-02-18T11:34:38Z", "type": "forcePushed"}, {"oid": "3d4ba9a95be5bcdb12912e21d67a581cffe8571e", "url": "https://github.com/bisq-network/bisq/commit/3d4ba9a95be5bcdb12912e21d67a581cffe8571e", "message": "Install script for network size metric", "committedDate": "2020-02-18T11:53:43Z", "type": "forcePushed"}, {"oid": "69df120db2c994872b055cca6db840e4503a1945", "url": "https://github.com/bisq-network/bisq/commit/69df120db2c994872b055cca6db840e4503a1945", "message": "Install script for network size metric", "committedDate": "2020-02-18T12:06:43Z", "type": "forcePushed"}, {"oid": "c090416c4c835d9d7c17140ddb7fd2f3d89f7bdb", "url": "https://github.com/bisq-network/bisq/commit/c090416c4c835d9d7c17140ddb7fd2f3d89f7bdb", "message": "Install script for network size metric", "committedDate": "2020-02-18T16:39:55Z", "type": "forcePushed"}, {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "url": "https://github.com/bisq-network/bisq/commit/0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "message": "Install script for network size metric", "committedDate": "2020-02-19T11:12:35Z", "type": "commit"}, {"oid": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "url": "https://github.com/bisq-network/bisq/commit/0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "message": "Install script for network size metric", "committedDate": "2020-02-19T11:12:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkzNzk0MA==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381937940", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            BISQ_REPO_URL=https://raw.githubusercontent.com/bisq-network/bisq\n          \n          \n            \n            BISQ_REPO_TAG=master", "author": "wiz", "createdAt": "2020-02-20T11:20:18Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+", "originalCommit": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkzODEzNA==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381938134", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG}", "author": "wiz", "createdAt": "2020-02-20T11:20:46Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"", "originalCommit": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkzODczMg==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381938732", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/nginx.conf > /tmp/nginx.conf\n          \n          \n            \n            curl -s \"${BISQ_REPO_URL}/${BISQ_REPO_TAG}/monitor/nginx.conf\" > /tmp/nginx.conf", "author": "wiz", "createdAt": "2020-02-20T11:22:02Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+sudo -H -i -u \"${ROOT_USER}\" sed -i -e '/JAVA_OPTS/ s/\"$/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=true -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false\"/' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+\n+echo \"[*] Installing Nginx config\"\n+sudo -H -i -u \"${ROOT_USER}\" openssl req -x509 -nodes -newkey rsa:2048 -keyout /etc/nginx/cert.key -out /etc/nginx/cert.crt -subj=\"/O=Bisq/OU=Bisq Infrastructure/CN=$onionaddress\"\n+curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/nginx.conf > /tmp/nginx.conf", "originalCommit": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTkzODk1OQ==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381938959", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/collectd.conf > /tmp/collectd.conf\n          \n          \n            \n            curl -s \"${BISQ_REPO_URL}/${BISQ_REPO_TAG}/monitor/collectd.conf\" > /tmp/collectd.conf", "author": "wiz", "createdAt": "2020-02-20T11:22:34Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+sudo -H -i -u \"${ROOT_USER}\" sed -i -e '/JAVA_OPTS/ s/\"$/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=true -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false\"/' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+\n+echo \"[*] Installing Nginx config\"\n+sudo -H -i -u \"${ROOT_USER}\" openssl req -x509 -nodes -newkey rsa:2048 -keyout /etc/nginx/cert.key -out /etc/nginx/cert.crt -subj=\"/O=Bisq/OU=Bisq Infrastructure/CN=$onionaddress\"\n+curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/nginx.conf > /tmp/nginx.conf\n+sudo -H -i -u \"${ROOT_USER}\" install -c -o \"${ROOT_USER}\" -g \"${ROOT_GROUP}\" -m 644 /tmp/nginx.conf /etc/nginx/nginx.conf\n+\n+echo \"[*] Installing collectd config\"\n+curl -s https://raw.githubusercontent.com/bisq-network/bisq/master/monitor/collectd.conf > /tmp/collectd.conf", "originalCommit": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk0MTA3Mw==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381941073", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ROOT_GROUP=root\n          \n          \n            \n            ROOT_GROUP=root\n          \n          \n            \n            ROOT_HOME=~root", "author": "wiz", "createdAt": "2020-02-20T11:27:02Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root", "originalCommit": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk1Mjg4OA==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381952888", "bodyText": "ROOT_HOME is not used in the script", "author": "freimair", "createdAt": "2020-02-20T11:53:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk0MTA3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk1OTExNw==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381959117", "bodyText": "It's used in the entropy seeding I added", "author": "wiz", "createdAt": "2020-02-20T12:07:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk0MTA3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk0MTM0NA==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381941344", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            echo \"[*] Seeding entropy from /dev/urandom\"\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" /bin/sh -c \"head -1500 /dev/urandom > ${ROOT_HOME}/.rnd\"", "author": "wiz", "createdAt": "2020-02-20T11:27:40Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+sudo -H -i -u \"${ROOT_USER}\" sed -i -e '/JAVA_OPTS/ s/\"$/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=true -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false\"/' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n+", "originalCommit": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk0NTg3Ng==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381945876", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" sed -i -e 's/ -Dcom.sun.management.jmxremote //g' -e 's/-Dcom.sun.management.jmxremote.local.only=true//g' -e 's/ -Dcom.sun.management.jmxremote.host=127.0.0.1//g' -e 's/ -Dcom.sun.management.jmxremote.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.rmi.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.ssl=false//g' -e 's/ -Dcom.sun.management.jmxremote.authenticate=false//g' \"${SYSTEMD_ENV_HOME}/bisq.env\"", "author": "wiz", "createdAt": "2020-02-20T11:38:09Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,62 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y \"${ROOT_PKG}\"\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i 's/ -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.host=127.0.0.1 -Dcom.sun.management.jmxremote.port=6969 -Dcom.sun.management.jmxremote.rmi.port=6969 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false//' \"${SYSTEMD_ENV_HOME}/bisq.env\"", "originalCommit": "0d17bb6e82f2d88141d3223a3c43f29ec021f6c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d41a4d220dc378cdb393a4737b456df5e8d92ab3", "url": "https://github.com/bisq-network/bisq/commit/d41a4d220dc378cdb393a4737b456df5e8d92ab3", "message": "Apply suggestions from code review\n\nCo-Authored-By: wiz <j@wiz.biz>", "committedDate": "2020-02-20T11:52:57Z", "type": "commit"}, {"oid": "257e9bb71fcad4a41744904a9ff05b93736e5b9b", "url": "https://github.com/bisq-network/bisq/commit/257e9bb71fcad4a41744904a9ff05b93736e5b9b", "message": "Update monitor/install_collectd_debian.sh\n\nCo-Authored-By: wiz <j@wiz.biz>", "committedDate": "2020-02-20T12:20:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk5MTk5Nw==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381991997", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            #!/bin/sh\n          \n          \n            \n            #!/bin/bash", "author": "wiz", "createdAt": "2020-02-20T13:19:03Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,66 @@\n+#!/bin/sh", "originalCommit": "257e9bb71fcad4a41744904a9ff05b93736e5b9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk5MjExNw==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381992117", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ROOT_PKG=\"nginx collectd openssl\"\n          \n          \n            \n            ROOT_PKG=(nginx collectd openssl)", "author": "wiz", "createdAt": "2020-02-20T13:19:19Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,66 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+BISQ_REPO_URL=https://raw.githubusercontent.com/bisq-network/bisq\n+BISQ_REPO_TAG=master\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_HOME=~root\n+ROOT_PKG=\"nginx collectd openssl\"", "originalCommit": "257e9bb71fcad4a41744904a9ff05b93736e5b9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk5MjIzNQ==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381992235", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG}\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG[@]}", "author": "wiz", "createdAt": "2020-02-20T13:19:34Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,66 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+BISQ_REPO_URL=https://raw.githubusercontent.com/bisq-network/bisq\n+BISQ_REPO_TAG=master\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_HOME=~root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG}", "originalCommit": "257e9bb71fcad4a41744904a9ff05b93736e5b9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTk5NDIwNA==", "url": "https://github.com/bisq-network/bisq/pull/3985#discussion_r381994204", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" sed -i -e 's/ -Dcom.sun.management.jmxremote //g' -e 's/-Dcom.sun.management.jmxremote.local.only=true//g' -e 's/ -Dcom.sun.management.jmxremote.host=127.0.0.1//g' -e 's/ -Dcom.sun.management.jmxremote.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.rmi.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.ssl=false//g' -e 's/ -Dcom.sun.management.jmxremote.authenticate=false//g' \"${SYSTEMD_ENV_HOME}/bisq.env\"\n          \n          \n            \n            sudo -H -i -u \"${ROOT_USER}\" sed -i -e 's/-Dcom.sun.management.jmxremote //g' -e 's/-Dcom.sun.management.jmxremote.local.only=true//g' -e 's/ -Dcom.sun.management.jmxremote.host=127.0.0.1//g' -e 's/ -Dcom.sun.management.jmxremote.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.rmi.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.ssl=false//g' -e 's/ -Dcom.sun.management.jmxremote.authenticate=false//g' \"${SYSTEMD_ENV_HOME}/bisq.env\"", "author": "wiz", "createdAt": "2020-02-20T13:23:22Z", "path": "monitor/install_collectd_debian.sh", "diffHunk": "@@ -0,0 +1,66 @@\n+#!/bin/sh\n+set -e\n+\n+echo \"[*] Bisq Server Monitoring installation script\"\n+\n+##### change paths if necessary for your system\n+BISQ_REPO_URL=https://raw.githubusercontent.com/bisq-network/bisq\n+BISQ_REPO_TAG=master\n+ROOT_USER=root\n+ROOT_GROUP=root\n+ROOT_HOME=~root\n+ROOT_PKG=\"nginx collectd openssl\"\n+\n+SYSTEMD_ENV_HOME=/etc/default\n+\n+#####\n+\n+echo \"[*] Gathering information\"\n+read -p \"Please provide the onion address of your service (eg. 3f3cu2yw7u457ztq): \" onionaddress\n+\n+echo \"[*] Updating apt repo sources\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get update -q\n+\n+echo \"[*] Upgrading OS packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get upgrade -qq -y\n+\n+echo \"[*] Installing base packages\"\n+sudo -H -i -u \"${ROOT_USER}\" DEBIAN_FRONTEND=noninteractive apt-get install -qq -y ${ROOT_PKG}\n+\n+echo \"[*] Preparing Bisq init script for monitoring\"\n+# remove stuff it it is there already\n+sudo -H -i -u \"${ROOT_USER}\" sed -i -e 's/ -Dcom.sun.management.jmxremote //g' -e 's/-Dcom.sun.management.jmxremote.local.only=true//g' -e 's/ -Dcom.sun.management.jmxremote.host=127.0.0.1//g' -e 's/ -Dcom.sun.management.jmxremote.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.rmi.port=6969//g' -e 's/ -Dcom.sun.management.jmxremote.ssl=false//g' -e 's/ -Dcom.sun.management.jmxremote.authenticate=false//g' \"${SYSTEMD_ENV_HOME}/bisq.env\"", "originalCommit": "257e9bb71fcad4a41744904a9ff05b93736e5b9b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1c83d09649b7033387cbf9040f52119a55bdc97f", "url": "https://github.com/bisq-network/bisq/commit/1c83d09649b7033387cbf9040f52119a55bdc97f", "message": "Apply suggestions from code review\n\nCo-Authored-By: wiz <j@wiz.biz>", "committedDate": "2020-02-20T13:30:14Z", "type": "commit"}]}