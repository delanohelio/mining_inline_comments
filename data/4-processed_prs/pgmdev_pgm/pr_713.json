{"pr_number": 713, "pr_title": "Re-introduce filtered respawn options", "pr_createdAt": "2020-11-15T01:03:59Z", "pr_url": "https://github.com/PGMDev/PGM/pull/713", "timeline": [{"oid": "f6fc7e97e97ea448a313a2d29e47582405c9138b", "url": "https://github.com/PGMDev/PGM/commit/f6fc7e97e97ea448a313a2d29e47582405c9138b", "message": "Re-introduce filtered respawn options\n\nSigned-off-by: Austin L Mayes <me@austinlm.me>", "committedDate": "2020-11-14T22:25:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU4OTMxMw==", "url": "https://github.com/PGMDev/PGM/pull/713#discussion_r525589313", "bodyText": "This is incorrect, there is not a single respawn child, there's N several respawn children that all generate a default respawn option.\nConsider this code the correct one:\nhttps://github.com/OvercastNetwork/ProjectAres/blob/master/PGM/src/main/java/tc/oc/pgm/spawns/SpawnModule.java#L106", "author": "Pablete1234", "createdAt": "2020-11-17T23:17:38Z", "path": "core/src/main/java/tc/oc/pgm/spawns/SpawnModule.java", "diffHunk": "@@ -68,29 +74,46 @@ public SpawnModule parse(MapFactory factory, Logger logger, Document doc)\n         throw new InvalidXMLException(\"map must have a single default spawn\", doc);\n       }\n \n-      return new SpawnModule(parser.getDefaultSpawn(), spawns, parseRespawnOptions(doc));\n-    }\n-  }\n+      List<RespawnOptions> respawnOptions = Lists.newArrayList();\n+\n+      for (Element elRespawn :\n+          XMLUtils.flattenElements(doc.getRootElement(), \"respawns\", \"respawn\")) {\n+        respawnOptions.add(parseOptions(elRespawn, true, false));\n+      }\n+\n+      respawnOptions.add(\n+          parseOptions(\n+              doc.getRootElement().getChild(\"respawn\"),\n+              false,\n+              doc.getRootElement().getChild(\"autorespawn\") == null));", "originalCommit": "f6fc7e97e97ea448a313a2d29e47582405c9138b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}