{"pr_number": 537, "pr_title": "Allow voting book to be forced open", "pr_createdAt": "2020-06-14T14:30:47Z", "pr_url": "https://github.com/PGMDev/PGM/pull/537", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU1Ng==", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439836556", "bodyText": "I don't think this needs to be a parameter for the command\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  @Switch('f') boolean force,", "author": "Pablete1234", "createdAt": "2020-06-14T14:40:04Z", "path": "core/src/main/java/tc/oc/pgm/command/MapPoolCommand.java", "diffHunk": "@@ -275,7 +275,11 @@ public static void skip(\n \n   @Command(aliases = \"votenext\", desc = \"Vote for the next map\", usage = \"map\")\n   public static void voteNext(\n-      MatchPlayer player, CommandSender sender, MapOrder mapOrder, @Text MapInfo map)\n+      MatchPlayer player,\n+      CommandSender sender,\n+      MapOrder mapOrder,\n+      @Switch('f') boolean force,", "originalCommit": "6a978c61c502990487162eda2b21b2e9788e2047", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzODE5OA==", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439838198", "bodyText": "If I do votenext The Nile I don't want the book to popup.", "author": "Pugzy", "createdAt": "2020-06-14T14:58:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg0MDQxMg==", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439840412", "bodyText": "Without seeing the book, you can't even know The Nile is an option, neither will you know if it's been voted for or against. The command is an implementation detail for how the book works, never intended to be used standalone. If you wish to make it a command make it so that skipping the -f flag will display voting messages in chat that can replace the functionality of the book.", "author": "Pablete1234", "createdAt": "2020-06-14T15:22:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU3OA==", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439836578", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                poll.sendBook(player, force);\n          \n          \n            \n                poll.sendBook(player, true);", "author": "Pablete1234", "createdAt": "2020-06-14T14:40:20Z", "path": "core/src/main/java/tc/oc/pgm/command/MapPoolCommand.java", "diffHunk": "@@ -291,7 +295,7 @@ public static void voteNext(\n             voteResult ? TextColor.GREEN : TextColor.RED,\n             map.getStyledName(MapNameStyle.COLOR));\n     player.sendMessage(voteAction);\n-    poll.sendBook(player);\n+    poll.sendBook(player, force);", "originalCommit": "6a978c61c502990487162eda2b21b2e9788e2047", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU5Nw==", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439836597", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    .clickEvent(ClickEvent.runCommand(\"/votenext -f \" + map.getName()))\n          \n          \n            \n                    .clickEvent(ClickEvent.runCommand(\"/votenext \" + map.getName()))", "author": "Pablete1234", "createdAt": "2020-06-14T14:40:39Z", "path": "core/src/main/java/tc/oc/pgm/rotation/MapPoll.java", "diffHunk": "@@ -180,7 +180,7 @@ private Component getMapBookComponent(MatchPlayer viewer, MapInfo map) {\n                 TextComponent.of(\n                     map.getTags().stream().map(MapTag::toString).collect(Collectors.joining(\" \")),\n                     TextColor.YELLOW)))\n-        .clickEvent(ClickEvent.runCommand(\"/votenext \" + map.getName()))\n+        .clickEvent(ClickEvent.runCommand(\"/votenext -f \" + map.getName()))", "originalCommit": "6a978c61c502990487162eda2b21b2e9788e2047", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg1NDE1NA==", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439854154", "bodyText": "How about -o for open. I think we may want to keep the flag, to allow running the command without opening the book.", "author": "Electroid", "createdAt": "2020-06-14T18:06:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjYyMw==", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439836623", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void sendBook(MatchPlayer viewer, boolean force) {\n          \n          \n            \n              public void sendBook(MatchPlayer viewer, boolean forceOpen) {\n          \n      \n    \n    \n  \n\nforce in this context could mean if the book is forced, i think making it more explicit can help", "author": "Pablete1234", "createdAt": "2020-06-14T14:40:52Z", "path": "core/src/main/java/tc/oc/pgm/rotation/MapPoll.java", "diffHunk": "@@ -136,7 +136,7 @@ private Component getMapChatComponent(MatchPlayer viewer, MapInfo map, boolean w\n         .build();\n   }\n \n-  public void sendBook(MatchPlayer viewer) {\n+  public void sendBook(MatchPlayer viewer, boolean force) {", "originalCommit": "6a978c61c502990487162eda2b21b2e9788e2047", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bd8af55d0038782849a8e66d16cb15490aaf0c80", "url": "https://github.com/PGMDev/PGM/commit/bd8af55d0038782849a8e66d16cb15490aaf0c80", "message": "Allow voting book to be forced open\n\nSigned-off-by: Pugzy <pugzy@mail.com>", "committedDate": "2020-06-14T15:10:03Z", "type": "forcePushed"}, {"oid": "089012c830267dc4d1c42e9fc52711548e1e597b", "url": "https://github.com/PGMDev/PGM/commit/089012c830267dc4d1c42e9fc52711548e1e597b", "message": "Allow voting book to be forced open\n\nSigned-off-by: Pugzy <pugzy@mail.com>", "committedDate": "2020-06-15T18:19:31Z", "type": "commit"}, {"oid": "089012c830267dc4d1c42e9fc52711548e1e597b", "url": "https://github.com/PGMDev/PGM/commit/089012c830267dc4d1c42e9fc52711548e1e597b", "message": "Allow voting book to be forced open\n\nSigned-off-by: Pugzy <pugzy@mail.com>", "committedDate": "2020-06-15T18:19:31Z", "type": "forcePushed"}]}