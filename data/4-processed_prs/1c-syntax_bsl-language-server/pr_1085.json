{"pr_number": 1085, "pr_title": "\u041f\u0435\u0440\u0435\u0445\u043e\u0434 \u043d\u0430 CLI \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 picocli", "pr_createdAt": "2020-04-17T10:37:49Z", "pr_url": "https://github.com/1c-syntax/bsl-language-server/pull/1085", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE0MjUyNQ==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r410142525", "bodyText": "commons-cli \u0442\u043e\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u0443\u0431\u0440\u0430\u0442\u044c?", "author": "nixel2007", "createdAt": "2020-04-17T10:43:05Z", "path": "build.gradle.kts", "diffHunk": "@@ -57,6 +57,10 @@ dependencies {\n \n     // https://mvnrepository.com/artifact/commons-cli/commons-cli\n     implementation(\"commons-cli\", \"commons-cli\", \"1.4\")", "originalCommit": "50dfe242098416c375bf088c77a7714607bdf748", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE4OTAxMQ==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r410189011", "bodyText": "\u043a\u0441\u0442\u0430\u0442\u0438 \u0434\u0430", "author": "theshadowco", "createdAt": "2020-04-17T12:28:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE0MjUyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE0NTE1OQ==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r410145159", "bodyText": "\u043c\u043e\u0436\u043d\u043e \u043b\u0438 \u0437\u0434\u0435\u0441\u044c (\u0438 \u0432 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\u0430\u0445) \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u0438\u043c\u044f \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438, \u0430 \u043d\u0435 FQN?", "author": "nixel2007", "createdAt": "2020-04-17T10:48:53Z", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/BSLLSPLauncher.java", "diffHunk": "@@ -22,135 +22,103 @@\n package com.github._1c_syntax.bsl.languageserver;\n \n import com.github._1c_syntax.bsl.languageserver.cli.AnalyzeCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.Command;\n import com.github._1c_syntax.bsl.languageserver.cli.FormatCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.HelpCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.LanguageServerStartCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.ParseExceptionCommand;\n import com.github._1c_syntax.bsl.languageserver.cli.VersionCommand;\n-import com.google.common.annotations.VisibleForTesting;\n-import org.apache.commons.cli.CommandLine;\n-import org.apache.commons.cli.CommandLineParser;\n-import org.apache.commons.cli.DefaultParser;\n-import org.apache.commons.cli.Option;\n-import org.apache.commons.cli.Options;\n-import org.apache.commons.cli.ParseException;\n+import com.github._1c_syntax.bsl.languageserver.configuration.LanguageServerConfiguration;\n+import lombok.extern.slf4j.Slf4j;\n+import org.eclipse.lsp4j.jsonrpc.Launcher;\n+import org.eclipse.lsp4j.launch.LSPLauncher;\n+import org.eclipse.lsp4j.services.LanguageClient;\n+import org.eclipse.lsp4j.services.LanguageClientAware;\n+import org.eclipse.lsp4j.services.LanguageServer;\n+import picocli.CommandLine;\n+\n+import java.io.File;\n+import java.io.FileNotFoundException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.io.PrintWriter;\n+import java.io.UnsupportedEncodingException;\n+import java.nio.charset.StandardCharsets;\n+import java.util.concurrent.Callable;\n+\n+@Slf4j\n+@picocli.CommandLine.Command(", "originalCommit": "50dfe242098416c375bf088c77a7714607bdf748", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5MzYxNg==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r410193616", "bodyText": "\u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c CommandLine.Command", "author": "theshadowco", "createdAt": "2020-04-17T12:37:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE0NTE1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5ODkwNA==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r410198904", "bodyText": "\u0445\u043e\u0442\u044f... \u0441\u0442\u0430\u0442\u0438\u043a \u0436\u0435\u0436", "author": "theshadowco", "createdAt": "2020-04-17T12:47:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE0NTE1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE0NTYyMw==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r410145623", "bodyText": "\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438, \u043f\u043b\u0437, \u0437\u0430\u0447\u0435\u043c \u0442\u044b \u0441\u043a\u043b\u0435\u0438\u043b \u0432 \u043e\u0434\u0438\u043d \u043a\u043b\u0430\u0441\u0441 \u0441\u0442\u0430\u0440\u0442\u0435\u0440 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0434\u0435\u0444\u043e\u043b\u0442\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u044b?\n(\u0434\u0430, \u044f \u0445\u043e\u0447\u0443 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0442\u043d\u043e :( )", "author": "nixel2007", "createdAt": "2020-04-17T10:49:58Z", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/BSLLSPLauncher.java", "diffHunk": "@@ -22,135 +22,103 @@\n package com.github._1c_syntax.bsl.languageserver;\n \n import com.github._1c_syntax.bsl.languageserver.cli.AnalyzeCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.Command;\n import com.github._1c_syntax.bsl.languageserver.cli.FormatCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.HelpCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.LanguageServerStartCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.ParseExceptionCommand;\n import com.github._1c_syntax.bsl.languageserver.cli.VersionCommand;\n-import com.google.common.annotations.VisibleForTesting;\n-import org.apache.commons.cli.CommandLine;\n-import org.apache.commons.cli.CommandLineParser;\n-import org.apache.commons.cli.DefaultParser;\n-import org.apache.commons.cli.Option;\n-import org.apache.commons.cli.Options;\n-import org.apache.commons.cli.ParseException;\n+import com.github._1c_syntax.bsl.languageserver.configuration.LanguageServerConfiguration;\n+import lombok.extern.slf4j.Slf4j;\n+import org.eclipse.lsp4j.jsonrpc.Launcher;\n+import org.eclipse.lsp4j.launch.LSPLauncher;\n+import org.eclipse.lsp4j.services.LanguageClient;\n+import org.eclipse.lsp4j.services.LanguageClientAware;\n+import org.eclipse.lsp4j.services.LanguageServer;\n+import picocli.CommandLine;\n+\n+import java.io.File;\n+import java.io.FileNotFoundException;\n+import java.io.InputStream;\n+import java.io.OutputStream;\n+import java.io.PrintWriter;\n+import java.io.UnsupportedEncodingException;\n+import java.nio.charset.StandardCharsets;\n+import java.util.concurrent.Callable;\n+\n+@Slf4j\n+@picocli.CommandLine.Command(\n+  name = \"\",\n+  description = \"BSL language server on LSP server mode\",\n+  subcommands = {\n+    AnalyzeCommand.class,\n+    FormatCommand.class,\n+    VersionCommand.class\n+  },\n+  usageHelpAutoWidth = true,\n+  synopsisSubcommandLabel = \"[COMMAND [ARGS]]\",\n+  footer = \"@|green Copyright(c) 2018-2020|@\",\n+  header = \"@|green BSL language server|@\")\n+public class BSLLSPLauncher implements Callable<Integer> {", "originalCommit": "50dfe242098416c375bf088c77a7714607bdf748", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE0Njc0MQ==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r410146741", "bodyText": "\u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0437\u0434\u0435\u0441\u044c \u0441\u0434\u0435\u043b\u0430\u0442\u044c star-import? \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u044d\u0442\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0433\u043e \u043f\u0435\u0440\u0435\u043a\u043b\u0430\u0434\u044b\u0432\u0430\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u0432 \u043f\u0430\u043a\u0435\u0442\u0435 \u0440\u0435\u043f\u043e\u0440\u0442\u0435\u0440, \u043d\u043e \u0437\u0430\u0442\u043e \u043d\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0431\u0430\u0435\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u044b\u0445 \u0440\u0435\u043f\u043e\u0440\u0442\u0435\u0440\u043e\u0432 \u0438 \u0434\u0430\u0434\u0438\u043c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c ad-hoc \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f.\n\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u0435\u0441\u043b\u0438 \u0432 \u0441\u0442\u0430\u0442\u0438\u043a-\u043a\u043b\u0430\u0441\u0441\u0435 ReporterKeys \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u044f\u0432\u043d\u043e\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u043a\u043b\u044e\u0447\u0435\u0439 \u043d\u0430 \u0440\u0435\u0444\u043b\u0435\u043a\u0441\u0438\u044e \u0438 \u043f\u043e\u0438\u0441\u043a \u043a\u043b\u0430\u0441\u0441\u043e\u0432, \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u044e\u0449\u0438\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441.", "author": "nixel2007", "createdAt": "2020-04-17T10:52:26Z", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/cli/AnalyzeCommand.java", "diffHunk": "@@ -28,23 +28,32 @@\n import com.github._1c_syntax.bsl.languageserver.diagnostics.DiagnosticSupplier;\n import com.github._1c_syntax.bsl.languageserver.diagnostics.FileInfo;\n import com.github._1c_syntax.bsl.languageserver.diagnostics.reporter.AnalysisInfo;\n+import com.github._1c_syntax.bsl.languageserver.diagnostics.reporter.ConsoleReporter;", "originalCommit": "50dfe242098416c375bf088c77a7714607bdf748", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIwMDkxNA==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r410200914", "bodyText": "\u0445\u043e\u0440\u043e\u0448\u0430 \u0438\u0434\u0435\u044f", "author": "theshadowco", "createdAt": "2020-04-17T12:51:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE0Njc0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjExNjMyNw==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r412116327", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                annotationProcessor(\"info.picocli\", \"picocli\", \"4.2.0\")\n          \n          \n            \n                annotationProcessor(\"info.picocli\", \"picocli-codegen\", \"4.2.0\")\n          \n      \n    \n    \n  \n\nhttps://github.com/remkop/picocli/tree/master/picocli-codegen#213-gradle", "author": "nixel2007", "createdAt": "2020-04-21T11:51:18Z", "path": "build.gradle.kts", "diffHunk": "@@ -55,8 +55,9 @@ dependencies {\n     // https://mvnrepository.com/artifact/org.languagetool/language-ru\n     implementation(\"org.languagetool\", \"language-ru\", \"4.2\")\n \n-    // https://mvnrepository.com/artifact/commons-cli/commons-cli\n-    implementation(\"commons-cli\", \"commons-cli\", \"1.4\")\n+    implementation(\"info.picocli\", \"picocli\", \"4.2.0\")\n+    annotationProcessor(\"info.picocli\", \"picocli\", \"4.2.0\")", "originalCommit": "22c4c678212bb082e4d4b4e7378dcef764b90104", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjExNzAyMA==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r412117020", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              name = \"bslls\",\n          \n          \n            \n              name = \"bsl-language-server\",", "author": "nixel2007", "createdAt": "2020-04-21T11:52:24Z", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/BSLLSPLauncher.java", "diffHunk": "@@ -22,135 +22,82 @@\n package com.github._1c_syntax.bsl.languageserver;\n \n import com.github._1c_syntax.bsl.languageserver.cli.AnalyzeCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.Command;\n import com.github._1c_syntax.bsl.languageserver.cli.FormatCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.HelpCommand;\n import com.github._1c_syntax.bsl.languageserver.cli.LanguageServerStartCommand;\n-import com.github._1c_syntax.bsl.languageserver.cli.ParseExceptionCommand;\n import com.github._1c_syntax.bsl.languageserver.cli.VersionCommand;\n-import com.google.common.annotations.VisibleForTesting;\n-import org.apache.commons.cli.CommandLine;\n-import org.apache.commons.cli.CommandLineParser;\n-import org.apache.commons.cli.DefaultParser;\n-import org.apache.commons.cli.Option;\n-import org.apache.commons.cli.Options;\n-import org.apache.commons.cli.ParseException;\n-\n-public class BSLLSPLauncher {\n-\n-  public static final String APP_NAME = \"BSL language server\";\n-\n-  private static final Options options = createOptions();\n+import org.jetbrains.annotations.NotNull;\n+import picocli.CommandLine;\n+import picocli.CommandLine.Option;\n+import picocli.CommandLine.ParameterException;\n+\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.concurrent.Callable;\n+\n+import static picocli.CommandLine.Command;\n+\n+@Command(\n+  name = \"bslls\",", "originalCommit": "22c4c678212bb082e4d4b4e7378dcef764b90104", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjExODY3NA==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r412118674", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              description = \"LSP server mode\",\n          \n          \n            \n              description = \"LSP server mode (default)\",", "author": "nixel2007", "createdAt": "2020-04-21T11:55:05Z", "path": "src/main/java/com/github/_1c_syntax/bsl/languageserver/cli/LanguageServerStartCommand.java", "diffHunk": "@@ -38,31 +37,45 @@\n import java.io.PrintWriter;\n import java.io.UnsupportedEncodingException;\n import java.nio.charset.StandardCharsets;\n+import java.util.concurrent.Callable;\n+\n+import static picocli.CommandLine.Command;\n+import static picocli.CommandLine.Option;\n \n /**\n  * \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 Language Server\n  * \u041a\u043b\u044e\u0447 \u043a\u043e\u043c\u0430\u043d\u0434\u044b:\n  *  \u0431\u0435\u0437 \u043a\u043b\u044e\u0447\u0430\n  * \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:\n- *  -c, (--configuration) &lt;arg&gt; - \u041f\u0443\u0442\u044c \u043a \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c\u0443 \u0444\u0430\u0439\u043b\u0443 BSL Language Server (.bsl-language-server.json).\n- *                                \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u0432 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e\u043c, \u0442\u0430\u043a \u0438 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u043c \u0432\u0438\u0434\u0435. \u0415\u0441\u043b\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043e\u043f\u0443\u0449\u0435\u043d,\n- *                                \u0442\u043e \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u044b \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.\n+ * -c, (--configuration) &lt;arg&gt; - \u041f\u0443\u0442\u044c \u043a \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c\u0443 \u0444\u0430\u0439\u043b\u0443 BSL Language Server (.bsl-language-server.json).\n+ *                                   \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043a\u0430\u043a \u0432 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e\u043c, \u0442\u0430\u043a \u0438 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u043c \u0432\u0438\u0434\u0435. \u0415\u0441\u043b\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043e\u043f\u0443\u0449\u0435\u043d,\n+ *                                   \u0442\u043e \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u044b \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.\n  * \u0412\u044b\u0432\u043e\u0434\u0438\u043c\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f:\n  *  \u0414\u0430\u043d\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 LSP.\n  */\n @Slf4j\n-public class LanguageServerStartCommand implements Command {\n-\n-  private final CommandLine cmd;\n-\n-  public LanguageServerStartCommand(CommandLine cmd) {\n-    this.cmd = cmd;\n-  }\n-\n-  @Override\n-  public int execute() {\n+@Command(\n+  name = \"lsp\",\n+  aliases = {\"--lsp\"},\n+  description = \"LSP server mode\",", "originalCommit": "22c4c678212bb082e4d4b4e7378dcef764b90104", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7caf3b04a49315c3900fadd39ab6791ff0d6cb1a", "url": "https://github.com/1c-syntax/bsl-language-server/commit/7caf3b04a49315c3900fadd39ab6791ff0d6cb1a", "message": "\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043d\u0430 picocli", "committedDate": "2020-04-22T05:37:51Z", "type": "commit"}, {"oid": "8957952db7241815b269d419ceaed82f48183ca2", "url": "https://github.com/1c-syntax/bsl-language-server/commit/8957952db7241815b269d419ceaed82f48183ca2", "message": "\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f", "committedDate": "2020-04-22T05:37:51Z", "type": "commit"}, {"oid": "7f08faaefc2c6c2732c225f50114df0ed610b478", "url": "https://github.com/1c-syntax/bsl-language-server/commit/7f08faaefc2c6c2732c225f50114df0ed610b478", "message": "\u0414\u041e\u0431\u0430\u0432\u0438\u043b \u0432\u0435\u0440\u0441\u0438\u044e \u043a\u0430\u043a \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u0443\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0438 \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u043b \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0434\u043e\u0430\u0432\u0431\u043b\u0435\u043d\u0438\u0435 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0432\u0435\u0440\u0441\u0438\u0438 \u0434\u043b\u044f \u043a\u043e\u043c\u0430\u043d\u0434", "committedDate": "2020-04-22T05:37:51Z", "type": "commit"}, {"oid": "696ba96d99c404fea614814e6b426c2895326815", "url": "https://github.com/1c-syntax/bsl-language-server/commit/696ba96d99c404fea614814e6b426c2895326815", "message": "\u0443\u0434\u0430\u043b\u0438\u043b \u043d\u0435 \u043d\u0443\u0436\u043d\u0443\u044e \u0431\u043e\u043b\u044c\u0448\u0435 \u0431\u0438\u0431\u0438\u043e\u0442\u0435\u043a\u0443 \u0438 \u043f\u043e\u043f\u0440\u0430\u0432\u0438\u043b \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438", "committedDate": "2020-04-22T05:37:51Z", "type": "commit"}, {"oid": "39771bf2fb5665720fe40443df941b4251b75336", "url": "https://github.com/1c-syntax/bsl-language-server/commit/39771bf2fb5665720fe40443df941b4251b75336", "message": "\u0412\u044b\u043d\u0435\u0441 \u0441\u0442\u0430\u0440\u0442\u043e\u0432\u0443\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e + \u0441\u0442\u0430\u0442\u0438\u043a \u0438\u043c\u043f\u043e\u0440\u0442\u044b \u0434\u043b\u044f \u0430\u043d\u043e\u0442\u0430\u0446\u0438\u0439", "committedDate": "2020-04-22T05:37:52Z", "type": "commit"}, {"oid": "eb18448fbcc43776a17badf1d8312138db3ff957", "url": "https://github.com/1c-syntax/bsl-language-server/commit/eb18448fbcc43776a17badf1d8312138db3ff957", "message": "\u041a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u0447\u0435\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0440\u0442\u0435\u0440\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438", "committedDate": "2020-04-22T05:37:52Z", "type": "commit"}, {"oid": "e1a58b1fedff01a3667026a8fd3244b9a3de102e", "url": "https://github.com/1c-syntax/bsl-language-server/commit/e1a58b1fedff01a3667026a8fd3244b9a3de102e", "message": "\u0414\u041e\u0431\u0430\u0432\u0438\u043b \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e", "committedDate": "2020-04-22T05:37:52Z", "type": "commit"}, {"oid": "2d788161ac3ef1bf7bab901e0018065c3b4e5bb3", "url": "https://github.com/1c-syntax/bsl-language-server/commit/2d788161ac3ef1bf7bab901e0018065c3b4e5bb3", "message": "\u0414\u041e\u0431\u0430\u0432\u0438\u043b \u0442\u0435\u0441\u0442\u043e\u0432", "committedDate": "2020-04-22T05:37:53Z", "type": "commit"}, {"oid": "3d8792915b34644855c40164e6ac047c8520cce1", "url": "https://github.com/1c-syntax/bsl-language-server/commit/3d8792915b34644855c40164e6ac047c8520cce1", "message": "Update build.gradle.kts\n\nCo-Authored-By: Nikita Gryzlov <nixel2007@gmail.com>", "committedDate": "2020-04-22T05:37:53Z", "type": "commit"}, {"oid": "9a17aa16f97c8f34996e55a28159ce9c1a1b6311", "url": "https://github.com/1c-syntax/bsl-language-server/commit/9a17aa16f97c8f34996e55a28159ce9c1a1b6311", "message": "Update src/main/java/com/github/_1c_syntax/bsl/languageserver/BSLLSPLauncher.java\n\nCo-Authored-By: Nikita Gryzlov <nixel2007@gmail.com>", "committedDate": "2020-04-22T05:37:53Z", "type": "commit"}, {"oid": "99474dc077880fa9efffe672df498baa3b38babf", "url": "https://github.com/1c-syntax/bsl-language-server/commit/99474dc077880fa9efffe672df498baa3b38babf", "message": "Update src/main/java/com/github/_1c_syntax/bsl/languageserver/cli/LanguageServerStartCommand.java\n\nCo-Authored-By: Nikita Gryzlov <nixel2007@gmail.com>", "committedDate": "2020-04-22T05:37:53Z", "type": "commit"}, {"oid": "99474dc077880fa9efffe672df498baa3b38babf", "url": "https://github.com/1c-syntax/bsl-language-server/commit/99474dc077880fa9efffe672df498baa3b38babf", "message": "Update src/main/java/com/github/_1c_syntax/bsl/languageserver/cli/LanguageServerStartCommand.java\n\nCo-Authored-By: Nikita Gryzlov <nixel2007@gmail.com>", "committedDate": "2020-04-22T05:37:53Z", "type": "forcePushed"}, {"oid": "d571681eabb5ab921b160ba9799a39c82c235b22", "url": "https://github.com/1c-syntax/bsl-language-server/commit/d571681eabb5ab921b160ba9799a39c82c235b22", "message": "\u0422\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442", "committedDate": "2020-04-22T05:55:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcwOTI0OQ==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r412709249", "bodyText": "q \u0441\u0431\u0435\u0436\u0430\u043b", "author": "asosnoviy", "createdAt": "2020-04-22T06:38:08Z", "path": "README.md", "diffHunk": "@@ -38,29 +38,43 @@\n ```sh\n java -jar bsl-language-server.jar --help\n \n-usage: BSL language server [-a] [-c <arg>] [-f] [-h] [-o <arg>] [-r <arg>] [-s <arg>]\n- -a,--analyze               Run analysis and get diagnostic info\n- -c,--configuration <arg>   Path to language server configuration file\n- -f,--format                Format files in source directory\n- -h,--help                  Show help.\n- -o,--outputDir <arg>       Output report directory\n- -r,--reporter <arg>        Reporter key\n- -s,--srcDir <arg>          Source directory\n- -v,--version               Version\n- -q,--silent                Silent mode\n+BSL language server\n+Usage:  [-h] [-c=<path>] [COMMAND [ARGS]]\n+BSL language server on LSP server mode\n+  -c, --configuration=<path>\n+               Path to language server configuration file\n+  -h, --help   Show this help message and exit\n+Commands:\n+  analyze, -a, --analyze  Run analysis and get diagnostic info\n+  format, -f, --format    Format files in source directory\n+  version, -v, --version  Print version\n ```\n \n-\u041f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 BSL Language Server \u0432 \u043e\u0431\u044b\u0447\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u0441\u0430\u043c Language Server, \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 [LSP](https://microsoft.github.io/language-server-protocol/). \u0414\u043b\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f stdin \u0438 stdout.\n+\u041f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 BSL Language Server \u0432 \u043e\u0431\u044b\u0447\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0443\u0449\u0435\u043d \u0441\u0430\u043c Language Server, \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 [LSP]([language server protocol](https://microsoft.github.io/language-server-protocol/)). \u0414\u043b\u044f \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f stdin \u0438 stdout.\n \n \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0442\u0435\u043a\u0441\u0442\u044b \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a \u0432\u044b\u0434\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435. \u0414\u043b\u044f \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u044f\u0437\u044b\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043e\u0442 \u0434\u0432\u0438\u0436\u043a\u0430 \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `diagnosticLanguage` \u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0438\u043b\u0438 \u0432\u044b\u0437\u0432\u0430\u0432 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 `workspace/didChangeConfiguration`:\n \n+<a id=\"analyze\"></a>\n+\n ## \u0417\u0430\u043f\u0443\u0441\u043a \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440\u0430\n \n-\u0414\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `--analyze` (\u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u043d\u043e `-a`). \u0414\u043b\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u043c\u044b\u0445 \u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `--srcDir` (\u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u043d\u043e `-s`), \u0437\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u0443\u0442\u044c (\u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0438\u043b\u0438 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u044b\u0439) \u043a \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443 \u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u043e\u0432.\n+\u0414\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `--analyze` (\u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u043d\u043e `-a`). \n \n-\u0414\u043b\u044f \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u0442\u0447\u0435\u0442\u0430 \u043e\u0431 \u0430\u043d\u0430\u043b\u0438\u0437\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u043b\u0438 \"\u0440\u0435\u043f\u043e\u0440\u0442\u0435\u0440\u043e\u0432\". \u0414\u043b\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0440\u0435\u043f\u043e\u0440\u0442\u0435\u0440\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 `--reporter` (\u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u043d\u043e `-r`), \u0437\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043a\u043b\u044e\u0447 \u0440\u0435\u043f\u043e\u0440\u0442\u0435\u0440\u0430. \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0435\u043f\u043e\u0440\u0442\u0435\u0440\u043e\u0432. \n+```sh\n+Usage:  analyze [-h] [--silent] [-c=<path>] [-o=<path>] [-s=<path>]\n+                [-r=<keys>]...\n+Run analysis and get diagnostic info\n+  -c, --configuration=<path>\n+                           Path to language server configuration file\n+  -h, --help               Show this help message and exit\n+  -o, --outputDir=<path>   Output report directory\n+  -r, --reporter=<keys>    Reporter key (console, json, junit, tslint, generic)\n+  -s, --srcDir=<path>      Source directory\n+      --silent             Silent mode", "originalCommit": "d571681eabb5ab921b160ba9799a39c82c235b22", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc2MDkwNg==", "url": "https://github.com/1c-syntax/bsl-language-server/pull/1085#discussion_r412760906", "bodyText": "\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043c\u043e\u0433\u043b\u0430 \u0431\u044b \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u043e\u0442 \u0442\u0430\u0441\u043a\u0438 delombok (\u043f\u043e \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0438 \u0441 javadoc), \u043d\u0443 \u0434\u0430 \u043b\u0430\u0434\u043d\u043e. \u043a\u043e\u0433\u0434\u0430/\u0435\u0441\u043b\u0438 \u0431\u0443\u0434\u0435\u043c \u0434\u0443\u043c\u0430\u0442\u044c \u043f\u043e \u043f\u043e\u0432\u043e\u0434\u0443 grail vm native image, \u0442\u043e\u0433\u0434\u0430 \u0438 \u0432\u0435\u0440\u043d\u0435\u043c\u0441\u044f \u043a \u044d\u0442\u043e\u043c\u0443 \u0432\u043e\u043f\u0440\u043e\u0441\u0443", "author": "nixel2007", "createdAt": "2020-04-22T08:01:32Z", "path": "build.gradle.kts", "diffHunk": "@@ -56,7 +56,6 @@ dependencies {\n     implementation(\"org.languagetool\", \"language-ru\", \"4.2\")\n \n     implementation(\"info.picocli\", \"picocli\", \"4.2.0\")\n-    annotationProcessor(\"info.picocli\", \"picocli-codegen\", \"4.2.0\")", "originalCommit": "d571681eabb5ab921b160ba9799a39c82c235b22", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0159fec2943fb466fc4a0f0bcc13474c756cb05e", "url": "https://github.com/1c-syntax/bsl-language-server/commit/0159fec2943fb466fc4a0f0bcc13474c756cb05e", "message": "\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0439 -q", "committedDate": "2020-04-23T09:45:26Z", "type": "commit"}, {"oid": "8e63625226f86276bf9c4af568b0ceeda7169ed2", "url": "https://github.com/1c-syntax/bsl-language-server/commit/8e63625226f86276bf9c4af568b0ceeda7169ed2", "message": "\u0414\u043e\u0431\u0430\u0432\u0438\u043b -c \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u0443\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443, \u0447\u0442\u043e\u0431\u044b \u0431\u044b\u043b\u0430 \u0447\u0435\u043b\u043e\u0432\u0435\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u043f\u0440\u0430\u0432\u043a\u0430", "committedDate": "2020-04-23T09:45:49Z", "type": "commit"}, {"oid": "437907c3f41fb90e04ca8a548be115518f1f92fc", "url": "https://github.com/1c-syntax/bsl-language-server/commit/437907c3f41fb90e04ca8a548be115518f1f92fc", "message": "\u041a\u0440\u0430\u0441\u0438\u0432\u043e\u0441\u0442\u0438 \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f", "committedDate": "2020-04-23T09:46:01Z", "type": "commit"}, {"oid": "7cb61c34a6ad021f878a9a453906e562f565ca39", "url": "https://github.com/1c-syntax/bsl-language-server/commit/7cb61c34a6ad021f878a9a453906e562f565ca39", "message": "\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d skipped-\u0442\u0435\u0441\u0442\n\n\u0412\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u0434\u0430 System.exit, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430\u0434\u043e \u043f\u0440\u0435\u0432\u0435\u043d\u0442\u0438\u0442\u044c.", "committedDate": "2020-04-23T10:04:10Z", "type": "commit"}]}