{"pr_number": 963, "pr_title": "Add a separate page for `ServiceDiscoverer` in docs", "pr_createdAt": "2020-03-10T23:23:33Z", "pr_url": "https://github.com/apple/servicetalk/pull/963", "timeline": [{"oid": "693ac7e5c98a8fa3f8b9f14a1559b1a1683e685b", "url": "https://github.com/apple/servicetalk/commit/693ac7e5c98a8fa3f8b9f14a1559b1a1683e685b", "message": "Add a separate page for `ServiceDiscoverer` in docs\n\nMotivation:\n\n`ServiceDiscoverer` is another core abstraction in ServiceTalk\nwhat does not coupled to any protocol and should be well documented.\n\nModifications:\n\n- Add a separate page for docs website about `ServiceDiscoverer`;\n- Update links in all other places to refer to this new page;\n- Describe how SD works, the default implementation, and how macOS\nusers may address DNS resolution issues;\n\nResult:\n\nBetter and more comprehensive doc for `ServiceDiscoverer`.", "committedDate": "2020-03-10T23:17:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTEzODQ3Nw==", "url": "https://github.com/apple/servicetalk/pull/963#discussion_r391138477", "bodyText": "It does not seem correct to have all docs related to Service Discovery under DNS as we may add more implementations for service discovery later. If you really want to extract Service Discovery into a separate doc then adding it to client-api would be more appropriate.\nI would suggest leaving this definition of Service Discovery in HTTP for now and add the doc describing DNS implementation here, optionally referring to the HTTP Service Discovery section in HTTP. On the other hand, if you want to move this definition under client-api, its fine by me.", "author": "NiteshKant", "createdAt": "2020-03-11T17:25:19Z", "path": "servicetalk-dns-discovery-netty/docs/modules/ROOT/pages/index.adoc", "diffHunk": "@@ -0,0 +1,71 @@\n+// Configure {source-root} values based on how this document is rendered: on GitHub or not\n+ifdef::env-github[]\n+:source-root:\n+endif::[]\n+ifndef::env-github[]\n+ifndef::source-root[:source-root: https://github.com/apple/servicetalk/blob/{page-origin-refname}]\n+endif::[]\n+\n+= Service Discovery", "originalCommit": "693ac7e5c98a8fa3f8b9f14a1559b1a1683e685b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTkzMTM5NQ==", "url": "https://github.com/apple/servicetalk/pull/963#discussion_r391931395", "bodyText": "\ud83d\udcaf client-api is a better place.", "author": "idelpivnitskiy", "createdAt": "2020-03-12T22:05:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTEzODQ3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTEzOTM5MQ==", "url": "https://github.com/apple/servicetalk/pull/963#discussion_r391139391", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Another core abstraction in ServiceTalk is its\n          \n          \n            \n            A core abstraction in ServiceTalk is its", "author": "NiteshKant", "createdAt": "2020-03-11T17:26:40Z", "path": "servicetalk-dns-discovery-netty/docs/modules/ROOT/pages/index.adoc", "diffHunk": "@@ -0,0 +1,71 @@\n+// Configure {source-root} values based on how this document is rendered: on GitHub or not\n+ifdef::env-github[]\n+:source-root:\n+endif::[]\n+ifndef::env-github[]\n+ifndef::source-root[:source-root: https://github.com/apple/servicetalk/blob/{page-origin-refname}]\n+endif::[]\n+\n+= Service Discovery\n+\n+Another core abstraction in ServiceTalk is its", "originalCommit": "693ac7e5c98a8fa3f8b9f14a1559b1a1683e685b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE0MDExNw==", "url": "https://github.com/apple/servicetalk/pull/963#discussion_r391140117", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            underpinning the various protocol _Clients_ (eg. HTTP/1.1, HTTP/2, gRPC, etc.).\n          \n          \n            \n            used by the protocol _Clients_ (eg. HTTP/1.1, HTTP/2, gRPC, etc.).", "author": "NiteshKant", "createdAt": "2020-03-11T17:27:31Z", "path": "servicetalk-dns-discovery-netty/docs/modules/ROOT/pages/index.adoc", "diffHunk": "@@ -0,0 +1,71 @@\n+// Configure {source-root} values based on how this document is rendered: on GitHub or not\n+ifdef::env-github[]\n+:source-root:\n+endif::[]\n+ifndef::env-github[]\n+ifndef::source-root[:source-root: https://github.com/apple/servicetalk/blob/{page-origin-refname}]\n+endif::[]\n+\n+= Service Discovery\n+\n+Another core abstraction in ServiceTalk is its\n+link:{source-root}/servicetalk-client-api/src/main/java/io/servicetalk/client/api/ServiceDiscoverer.java[ServiceDiscoverer]\n+underpinning the various protocol _Clients_ (eg. HTTP/1.1, HTTP/2, gRPC, etc.).", "originalCommit": "693ac7e5c98a8fa3f8b9f14a1559b1a1683e685b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE1MTQxNA==", "url": "https://github.com/apple/servicetalk/pull/963#discussion_r391151414", "bodyText": "\"location of remote servers\" and \"network topology\" terms are misleading here as an SD does not really have to know about network topology or physical server locations. As all clients in ST use service discovery I would suggest using the following language:\n\nA ServiceTalk client leverages ServiceDiscoverer to find server instances that it can use for processing requests. A  ServiceDiscoverer  finds server instances associated with a logical name<TODO: Add link to #discover() method>. Additionally, ServiceTalk assumes that the client operates in a dynamic ephemeral environment and the server instances associated with a logical name may change over time. So, a ServiceDiscoverer returns a Publisher of server instances and their current relationship to the logical name i.e. whether it is added or removed from the logical name. Using this information a Client can maintain an active collection of server instances that it can use.", "author": "NiteshKant", "createdAt": "2020-03-11T17:43:54Z", "path": "servicetalk-dns-discovery-netty/docs/modules/ROOT/pages/index.adoc", "diffHunk": "@@ -0,0 +1,71 @@\n+// Configure {source-root} values based on how this document is rendered: on GitHub or not\n+ifdef::env-github[]\n+:source-root:\n+endif::[]\n+ifndef::env-github[]\n+ifndef::source-root[:source-root: https://github.com/apple/servicetalk/blob/{page-origin-refname}]\n+endif::[]\n+\n+= Service Discovery\n+\n+Another core abstraction in ServiceTalk is its\n+link:{source-root}/servicetalk-client-api/src/main/java/io/servicetalk/client/api/ServiceDiscoverer.java[ServiceDiscoverer]\n+underpinning the various protocol _Clients_ (eg. HTTP/1.1, HTTP/2, gRPC, etc.).\n+\n+For scenarios where a client communicates with multiple homogeneous footnote:[belonging to the same service, providing\n+same capabilities] server instances, managing addresses of multiple server instances for each _Client_ is complex.\n+_ServiceDiscoverer_ makes this easy for users by transparently communicating with mechanisms that know about the actual\n+location of remote servers and may provide updates when the network topology is changing.", "originalCommit": "693ac7e5c98a8fa3f8b9f14a1559b1a1683e685b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTkzMTIwMQ==", "url": "https://github.com/apple/servicetalk/pull/963#discussion_r391931201", "bodyText": "<TODO: Add link to #discover() method>\n\nIt's hard to add a link to the line number of the source code file because the link will be broken when we update the source code. I slightly reworded your suggestion to include ServiceDiscovererEvents.", "author": "idelpivnitskiy", "createdAt": "2020-03-12T22:05:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE1MTQxNA=="}], "type": "inlineReview"}, {"oid": "07703e399102e912b0ffb9332c525d23a1583b32", "url": "https://github.com/apple/servicetalk/commit/07703e399102e912b0ffb9332c525d23a1583b32", "message": "Merge remote-tracking branch 'upstream/master' into sd-docs", "committedDate": "2020-03-12T21:21:22Z", "type": "commit"}, {"oid": "700008ee91a6ced7d468461ec1b8641b99f0831e", "url": "https://github.com/apple/servicetalk/commit/700008ee91a6ced7d468461ec1b8641b99f0831e", "message": "improve language", "committedDate": "2020-03-12T21:42:11Z", "type": "commit"}, {"oid": "6b7e13d9b7926079f5fe685d68f6719dabae9e70", "url": "https://github.com/apple/servicetalk/commit/6b7e13d9b7926079f5fe685d68f6719dabae9e70", "message": "Moved Service Discovery docs to servicetalk-client-api module", "committedDate": "2020-03-12T22:02:46Z", "type": "commit"}]}