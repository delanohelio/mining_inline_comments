{"pr_number": 984, "pr_title": "gRPC gradle plugin write script to buildDir", "pr_createdAt": "2020-03-26T05:01:06Z", "pr_url": "https://github.com/apple/servicetalk/pull/984", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NzE5Mg==", "url": "https://github.com/apple/servicetalk/pull/984#discussion_r398357192", "bodyText": "I am not a gradle export but just from the package name I would suspect this is not really something we should use. Is there nothing that we can use that is not in an internal package ?", "author": "normanmaurer", "createdAt": "2020-03-26T07:13:47Z", "path": "servicetalk-grpc-gradle-plugin/src/main/groovy/io/servicetalk/grpc/gradle/plugin/ServiceTalkGrpcPlugin.groovy", "diffHunk": "@@ -21,6 +21,7 @@ import org.gradle.api.InvalidUserDataException\n import org.gradle.api.Plugin\n import org.gradle.api.Project\n import org.gradle.api.Task\n+import org.gradle.internal.os.OperatingSystem", "originalCommit": "3bbe935f980f660a231b046dc21940c82db45015", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM3MzkzOQ==", "url": "https://github.com/apple/servicetalk/pull/984#discussion_r398373939", "bodyText": "Agreed, using gradle internal APIs is not ideal but was not newly introduced by this PR. We can consider improving in a followup PR after we get the build stable again.", "author": "Scottmitch", "createdAt": "2020-03-26T07:53:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NzE5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM3NTkzNQ==", "url": "https://github.com/apple/servicetalk/pull/984#discussion_r398375935", "bodyText": "actually looking at the internal code it is just using os.name ... let me try this quick replace for windows and not-windows.", "author": "Scottmitch", "createdAt": "2020-03-26T07:57:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1NzE5Mg=="}], "type": "inlineReview"}, {"oid": "a710bc4e6d31816bb3b156fed2af2de984f467b9", "url": "https://github.com/apple/servicetalk/commit/a710bc4e6d31816bb3b156fed2af2de984f467b9", "message": "gRPC gradle plugin write script to buildDir\n\nMotivation:\nservicetalk-grpc-gradle-plugin was writing the executable script files\nto the temp directory and not cleaning them up. There was also a bug in\na variable substitution which lead to compile errors.\n\nModifications:\n- Write to the buildDir instead of temp, and don't rewrite the file on\nevery build if it already exists since the version information is in the\nfile name.\n- Fix the variable naming bug\n\nResult:\nNo more temp files for servicetalk-grpc-gradle-plugin and one less\nvariable naming bug.", "committedDate": "2020-03-26T07:50:51Z", "type": "forcePushed"}, {"oid": "7bf180b157783e37c4852c90eb29ac8b047df17e", "url": "https://github.com/apple/servicetalk/commit/7bf180b157783e37c4852c90eb29ac8b047df17e", "message": "gRPC gradle plugin write script to buildDir\n\nMotivation:\nservicetalk-grpc-gradle-plugin was writing the executable script files\nto the temp directory and not cleaning them up. There was also a bug in\na variable substitution which lead to compile errors.\n\nModifications:\n- Write to the buildDir instead of temp, and don't rewrite the file on\nevery build if it already exists since the version information is in the\nfile name.\n- Fix the variable naming bug\n\nResult:\nNo more temp files for servicetalk-grpc-gradle-plugin and one less\nvariable naming bug.", "committedDate": "2020-03-26T07:55:51Z", "type": "forcePushed"}, {"oid": "0bf64ed97c3853f823f592d5756a07d60cc90f17", "url": "https://github.com/apple/servicetalk/commit/0bf64ed97c3853f823f592d5756a07d60cc90f17", "message": "gRPC gradle plugin write script to buildDir\n\nMotivation:\nservicetalk-grpc-gradle-plugin was writing the executable script files\nto the temp directory and not cleaning them up. There was also a bug in\na variable substitution which lead to compile errors.\n\nModifications:\n- Write to the buildDir instead of temp, and don't rewrite the file on\nevery build if it already exists since the version information is in the\nfile name.\n- Fix the variable naming bug\n\nResult:\nNo more temp files for servicetalk-grpc-gradle-plugin and one less\nvariable naming bug.", "committedDate": "2020-03-26T07:58:18Z", "type": "forcePushed"}, {"oid": "bcddfd0abc6d532959783bd0fe2dddcf02d3db9e", "url": "https://github.com/apple/servicetalk/commit/bcddfd0abc6d532959783bd0fe2dddcf02d3db9e", "message": "gRPC gradle plugin write script to buildDir\n\nMotivation:\nservicetalk-grpc-gradle-plugin was writing the executable script files\nto the temp directory and not cleaning them up. There was also a bug in\na variable substitution which lead to compile errors.\n\nModifications:\n- Write to the buildDir instead of temp, and don't rewrite the file on\nevery build if it already exists since the version information is in the\nfile name.\n- Fix the variable naming bug\n\nResult:\nNo more temp files for servicetalk-grpc-gradle-plugin and one less\nvariable naming bug.", "committedDate": "2020-03-26T07:58:54Z", "type": "commit"}, {"oid": "bcddfd0abc6d532959783bd0fe2dddcf02d3db9e", "url": "https://github.com/apple/servicetalk/commit/bcddfd0abc6d532959783bd0fe2dddcf02d3db9e", "message": "gRPC gradle plugin write script to buildDir\n\nMotivation:\nservicetalk-grpc-gradle-plugin was writing the executable script files\nto the temp directory and not cleaning them up. There was also a bug in\na variable substitution which lead to compile errors.\n\nModifications:\n- Write to the buildDir instead of temp, and don't rewrite the file on\nevery build if it already exists since the version information is in the\nfile name.\n- Fix the variable naming bug\n\nResult:\nNo more temp files for servicetalk-grpc-gradle-plugin and one less\nvariable naming bug.", "committedDate": "2020-03-26T07:58:54Z", "type": "forcePushed"}]}