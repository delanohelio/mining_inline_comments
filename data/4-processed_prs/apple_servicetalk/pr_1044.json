{"pr_number": 1044, "pr_title": "Release `DnsRawRecord`s after SRV response", "pr_createdAt": "2020-05-08T16:03:36Z", "pr_url": "https://github.com/apple/servicetalk/pull/1044", "timeline": [{"oid": "db4443bf978e1911471b07e3f7ad91a2d105692d", "url": "https://github.com/apple/servicetalk/commit/db4443bf978e1911471b07e3f7ad91a2d105692d", "message": "Release `DnsRawRecord`s after SRV response\n\nMotivation:\n\nSRV response returns a list of `DnsRawRecord`s that are\n`ByteBufHolder`s and contain reference counted content.\n\nModifications:\n\n- Release `DnsRawRecord`s after processing content;\n\nResult:\n\nNo memory leak in DNS client.", "committedDate": "2020-05-08T06:34:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NTAyNg==", "url": "https://github.com/apple/servicetalk/pull/1044#discussion_r422255026", "bodyText": "We have been favoring annotations for suppression instead of comments.", "author": "NiteshKant", "createdAt": "2020-05-08T16:56:45Z", "path": "servicetalk-dns-discovery-netty/src/main/java/io/servicetalk/dns/discovery/netty/DefaultDnsClient.java", "diffHunk": "@@ -254,9 +255,10 @@ protected AbstractDnsSubscription newSubscription(\n                                 } else {\n                                     final DnsAnswer<HostAndPort> dnsAnswer;\n                                     long minTTLSeconds = Long.MAX_VALUE;\n+                                    List<DnsRecord> dnsRecords = null;\n                                     try {\n-                                        @SuppressWarnings(\"unchecked\")\n-                                        final List<DnsRecord> dnsRecords = (List<DnsRecord>) completedFuture.getNow();\n+                                        //noinspection unchecked", "originalCommit": "db4443bf978e1911471b07e3f7ad91a2d105692d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NjYwNg==", "url": "https://github.com/apple/servicetalk/pull/1044#discussion_r422256606", "bodyText": "Annotation is allowed only when you define a new local variable. In this case, when I reassign a value, it's not allowed.", "author": "idelpivnitskiy", "createdAt": "2020-05-08T16:59:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NTAyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI2MzY5NA==", "url": "https://github.com/apple/servicetalk/pull/1044#discussion_r422263694", "bodyText": "Is this comment IDE specific? if so consider keeping the local variable to preserve the previous @ SuppressWarnings and re-assign to outer scope variable.", "author": "Scottmitch", "createdAt": "2020-05-08T17:14:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1NTAyNg=="}], "type": "inlineReview"}, {"oid": "9972fb430409458dbe099f9d1b11aa31005c33a3", "url": "https://github.com/apple/servicetalk/commit/9972fb430409458dbe099f9d1b11aa31005c33a3", "message": "address comments", "committedDate": "2020-05-08T17:21:12Z", "type": "commit"}]}