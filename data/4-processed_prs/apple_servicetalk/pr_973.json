{"pr_number": 973, "pr_title": "Enforce JDK8 when running `publish-docs.sh`", "pr_createdAt": "2020-03-18T18:20:22Z", "pr_url": "https://github.com/apple/servicetalk/pull/973", "timeline": [{"oid": "4eea46ca0887e5ce397f8e218d61f6f782c12098", "url": "https://github.com/apple/servicetalk/commit/4eea46ca0887e5ce397f8e218d61f6f782c12098", "message": "Enforce JDK8 when running `publish-docs.sh`\n\nMotivation:\n\nDifferent JDK versions produce different website style for\njavadoc.\n\nModifications:\n\n- Make sure the current Java version is 1.8 before running\n`publish-docs.sh`;\n\nResult:\n\nJavadoc website always published with the consistent format\nand style.", "committedDate": "2020-03-18T18:20:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczODQxOA==", "url": "https://github.com/apple/servicetalk/pull/973#discussion_r394738418", "bodyText": "As we use gradle to create javadocs, should we be considering if org.gradle.java.home is set?", "author": "NiteshKant", "createdAt": "2020-03-19T01:28:38Z", "path": "scripts/publish-docs.sh", "diffHunk": "@@ -48,6 +48,13 @@ function clean_up_gh_pages() {\n   rm -rf gh-pages\n }\n \n+# Enforce JDK8 to keep javadoc format consistent for all versions:\n+java_version=$(java -version 2>&1 | grep 'version' 2>&1 | awk -F\\\" '{ split($2,a,\".\"); print a[1]\".\"a[2]}')", "originalCommit": "4eea46ca0887e5ce397f8e218d61f6f782c12098", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI1ODk4NQ==", "url": "https://github.com/apple/servicetalk/pull/973#discussion_r395258985", "bodyText": "You are right, we need to extract the version of JVM that gradlew sees. I've updated the script to use ./gradlew -version.", "author": "idelpivnitskiy", "createdAt": "2020-03-19T19:10:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDczODQxOA=="}], "type": "inlineReview"}, {"oid": "0cc93ab961d43afa5aebca05457a69f919c5af23", "url": "https://github.com/apple/servicetalk/commit/0cc93ab961d43afa5aebca05457a69f919c5af23", "message": "Extract version from gradle output", "committedDate": "2020-03-19T19:08:24Z", "type": "commit"}]}