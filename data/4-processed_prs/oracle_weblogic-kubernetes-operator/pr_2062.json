{"pr_number": 2062, "pr_title": "Fix for mac os and validation error messages when no parameters are specified (OWLS-86060)", "pr_createdAt": "2020-11-18T22:36:02Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2062", "timeline": [{"oid": "f499bd7c0212c75a31f6710c79549cb18f94ba33", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f499bd7c0212c75a31f6710c79549cb18f94ba33", "message": "Fix for mac os and validation error messages when no parameters are specified (OWLS-86060)", "committedDate": "2020-11-18T22:33:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NDg4Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2062#discussion_r526474882", "bodyText": "the second sentence look like it should be removed (\"This script...\"), as the introspect job does not generate a domain resource...", "author": "tbarnes-us", "createdAt": "2020-11-18T22:47:54Z", "path": "kubernetes/samples/scripts/domain-lifecycle/startDomain.sh", "diffHunk": "@@ -67,13 +67,22 @@ function initialize {\n \n   validateKubernetesCliAvailable\n   validateJqAvailable\n+  validateYqAvailable\n+\n   failIfValidationErrors\n }\n \n initialize\n \n # Get the domain in json format\n-domainJson=$(${kubernetesCli} get domain ${domainUid} -n ${domainNamespace} -o json)\n+domainJson=$(${kubernetesCli} get domain ${domainUid} -n ${domainNamespace} -o json --ignore-not-found)\n+\n+if [ -z \"${domainJson}\" ]; then\n+  printError \"Domain resource for domain '${domainUid}' not found in namespace '${domainNamespace}'. \\\n+    This script requires that the introspector job for the specified domain ran \\\n+    successfully and generated the domain resource. Exiting.\"", "originalCommit": "f499bd7c0212c75a31f6710c79549cb18f94ba33", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NTQ2Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2062#discussion_r526475467", "bodyText": "(same problem  in 'stopDomain.sh' too)", "author": "tbarnes-us", "createdAt": "2020-11-18T22:49:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NDg4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3OTI3NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2062#discussion_r526479275", "bodyText": "Removed, thanks.", "author": "ankedia", "createdAt": "2020-11-18T22:57:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NDg4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NjEwMw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2062#discussion_r526476103", "bodyText": "This information is not needed.  The first statement ( Domain resource for domain '${domainUid}' not found in namespace '${domainNamespace} )  is sufficient convey the message.  Should we put internal detail about introspector job here ?", "author": "anpanigr", "createdAt": "2020-11-18T22:50:29Z", "path": "kubernetes/samples/scripts/domain-lifecycle/startDomain.sh", "diffHunk": "@@ -67,13 +67,22 @@ function initialize {\n \n   validateKubernetesCliAvailable\n   validateJqAvailable\n+  validateYqAvailable\n+\n   failIfValidationErrors\n }\n \n initialize\n \n # Get the domain in json format\n-domainJson=$(${kubernetesCli} get domain ${domainUid} -n ${domainNamespace} -o json)\n+domainJson=$(${kubernetesCli} get domain ${domainUid} -n ${domainNamespace} -o json --ignore-not-found)\n+\n+if [ -z \"${domainJson}\" ]; then\n+  printError \"Domain resource for domain '${domainUid}' not found in namespace '${domainNamespace}'. \\\n+    This script requires that the introspector job for the specified domain ran \\", "originalCommit": "f499bd7c0212c75a31f6710c79549cb18f94ba33", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NzA4MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2062#discussion_r526477080", "bodyText": "nope - i put in a similar comment two minutes before you - good catch", "author": "tbarnes-us", "createdAt": "2020-11-18T22:52:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NjEwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3OTM0OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2062#discussion_r526479348", "bodyText": "Done", "author": "ankedia", "createdAt": "2020-11-18T22:58:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NjEwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NjQwMA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2062#discussion_r526476400", "bodyText": "This information is not needed. The first statement ( Domain resource for domain '${domainUid}' not found in namespace '${domainNamespace} ) is sufficient convey the message. Should we put internal detail about introspector job here ?", "author": "anpanigr", "createdAt": "2020-11-18T22:51:08Z", "path": "kubernetes/samples/scripts/domain-lifecycle/stopDomain.sh", "diffHunk": "@@ -66,13 +66,21 @@ function initialize {\n \n   validateKubernetesCliAvailable\n   validateJqAvailable\n+  validateYqAvailable\n   failIfValidationErrors\n }\n \n initialize\n \n # Get the domain in json format\n-domainJson=$(${kubernetesCli} get domain ${domainUid} -n ${domainNamespace} -o json)\n+domainJson=$(${kubernetesCli} get domain ${domainUid} -n ${domainNamespace} -o json --ignore-not-found)\n+\n+if [ -z \"${domainJson}\" ]; then\n+  printError \"Domain resource for domain '${domainUid}' not found in namespace '${domainNamespace}'. \\\n+    This script requires that the introspector job for the specified domain ran \\", "originalCommit": "f499bd7c0212c75a31f6710c79549cb18f94ba33", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3OTQ0OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2062#discussion_r526479449", "bodyText": "Done.", "author": "ankedia", "createdAt": "2020-11-18T22:58:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NjQwMA=="}], "type": "inlineReview"}, {"oid": "9dc8f916719c990cd2b9d31ca686e46bbc0691ff", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9dc8f916719c990cd2b9d31ca686e46bbc0691ff", "message": "Fix error message", "committedDate": "2020-11-18T22:51:21Z", "type": "commit"}, {"oid": "c773615cf71c91c19d39edc14fb5383cb60d55a0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c773615cf71c91c19d39edc14fb5383cb60d55a0", "message": "Provide usage information when validation fails.", "committedDate": "2020-11-18T23:56:30Z", "type": "commit"}, {"oid": "82c987030d4a0a9ba63aa19a305aedc0484f8deb", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/82c987030d4a0a9ba63aa19a305aedc0484f8deb", "message": "Fix error message when domain resource not found.", "committedDate": "2020-11-19T05:44:52Z", "type": "commit"}, {"oid": "b0c86516c2a5bb8b229932e26510970c30fa8515", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b0c86516c2a5bb8b229932e26510970c30fa8515", "message": "Validate that domain resource exists before validating server/cluster name in config map.", "committedDate": "2020-11-19T18:48:42Z", "type": "commit"}, {"oid": "3d36645c166951e1ce18187de030a05a307014cd", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3d36645c166951e1ce18187de030a05a307014cd", "message": "Fix error message as per review comment.", "committedDate": "2020-11-19T20:05:52Z", "type": "commit"}, {"oid": "2bfdefa56cda9cfe2a1e1a685556830329008703", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2bfdefa56cda9cfe2a1e1a685556830329008703", "message": "Fixed error message.", "committedDate": "2020-11-19T20:10:15Z", "type": "commit"}]}