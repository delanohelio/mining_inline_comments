{"pr_number": 1502, "pr_title": "update ci/cd doc for mii", "pr_createdAt": "2020-03-26T19:25:35Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502", "timeline": [{"oid": "f2248c3d6a0550479766eeea894b918caaf5c507", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f2248c3d6a0550479766eeea894b918caaf5c507", "message": "update ci/cd doc for mii", "committedDate": "2020-03-26T19:23:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MTQ5OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r398841498", "bodyText": "Should we use FromModel or other enum throughout of the spelled out names?", "author": "jshum2479", "createdAt": "2020-03-26T19:37:04Z", "path": "docs-source/content/userguide/cicd/choose-an-approach.md", "diffHunk": "@@ -10,44 +10,69 @@ Let's review what we have discussed and talk about when we might want to use\n various approaches.  We can start by asking ourselves questions like these:\n \n \n-- *Can you make the desired change with a configuration override?*  \n-  The WebLogic Kubernetes Operator allows you to inject a number of [configuration\n+- *Can you make the desired change with a configuration override or Model in Image config map?*  \n+\n+  When your domain source type is Domain in PV or Domain in Image,\n+  the WebLogic Kubernetes Operator allows you to inject a number of [configuration\n   overrides]({{< relref \"/userguide/managing-domains/configoverrides/_index.md\" >}})\n-  into your pods before starting any servers in the domain.  This allows you to use \n-  the same image for multiple\n-  different configurations.  A good example would be changing the settings for a data\n-  source, for example. You may wish to have a larger connection pool in your production\n+  into your pods before starting any servers in the domain.  \n+\n+  When your domain\n+  source type is Model in Image you can ", "originalCommit": "f2248c3d6a0550479766eeea894b918caaf5c507", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAxODY3Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399018676", "bodyText": "I think that'd be too big of a change.  Domain in Image, etc, is the standard throughout entire doc set, and everyone on the project is already familiar with this terminology.", "author": "tbarnes-us", "createdAt": "2020-03-27T03:42:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MTQ5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAxODc0Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399018742", "bodyText": "@jshum2479 Please resolve if you agree, or comment otherwise.", "author": "tbarnes-us", "createdAt": "2020-03-27T03:42:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MTQ5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQxNzgxMg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399417812", "bodyText": "@rosemarymarano Any comment on this one?", "author": "tbarnes-us", "createdAt": "2020-03-27T17:12:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MTQ5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyMDExMg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399420112", "bodyText": "@tbarnes-us I don't understand the comment. Johnny is proposing to use some type of acronym for the domain home source types? If that's it, then I would say it's a bad idea.", "author": "rosemarymarano", "createdAt": "2020-03-27T17:16:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MTQ5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ0NjQ3MQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399446471", "bodyText": "Pretty sure that's what he's asking for.\nI'm going to resolve this one.", "author": "tbarnes-us", "createdAt": "2020-03-27T18:00:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0MTQ5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg4MjgzMA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r398882830", "bodyText": "It will be easier to read if we quote \"Domain in Image\"", "author": "jshum2479", "createdAt": "2020-03-26T20:49:49Z", "path": "docs-source/content/userguide/cicd/why-layering-matters.md", "diffHunk": "@@ -82,9 +85,10 @@ acceptable, or it may not.\n Another option is to find a way to keep the \"same\" domain, that is, the same domain\n encryption key, so that we can still roll the domain and there will be no conflicts.\n \n-#### Mutating the domain configuration without losing the encryption keys\n+#### Mutating Domain in Image domain home configuration without losing encryption keys\n \n-If we want to make a change in a lower layer without losing our domain encryption\n+If we want to make a change in a lower layer in Domain in Image domains", "originalCommit": "f2248c3d6a0550479766eeea894b918caaf5c507", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAyMTA2OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399021069", "bodyText": "Let's leave this up to @rosemarymarano - she's going to make an edit pass.\nI think unquoted is the general style throughout the docs.", "author": "tbarnes-us", "createdAt": "2020-03-27T03:52:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg4MjgzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI3NDM0Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399274342", "bodyText": "@jshum2479 Yes, unquoted is ok here.", "author": "rosemarymarano", "createdAt": "2020-03-27T13:45:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg4MjgzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg4NTQyNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r398885424", "bodyText": "I am not following the question and the answers provided.  \" Model in Image model updates, and such?\" and then the answer only talks about \"domain-in-image\"", "author": "jshum2479", "createdAt": "2020-03-26T20:54:52Z", "path": "docs-source/content/userguide/cicd/choose-an-approach.md", "diffHunk": "@@ -10,44 +10,69 @@ Let's review what we have discussed and talk about when we might want to use\n various approaches.  We can start by asking ourselves questions like these:\n \n \n-- *Can you make the desired change with a configuration override?*  \n-  The WebLogic Kubernetes Operator allows you to inject a number of [configuration\n+- *Can you make the desired change with a configuration override or Model in Image config map?*  \n+\n+  When your domain source type is Domain in PV or Domain in Image,\n+  the WebLogic Kubernetes Operator allows you to inject a number of [configuration\n   overrides]({{< relref \"/userguide/managing-domains/configoverrides/_index.md\" >}})\n-  into your pods before starting any servers in the domain.  This allows you to use \n-  the same image for multiple\n-  different configurations.  A good example would be changing the settings for a data\n-  source, for example. You may wish to have a larger connection pool in your production\n+  into your pods before starting any servers in the domain.  \n+\n+  When your domain\n+  source type is Model in Image you can \n+  [inject model updates]({{< relref \"/userguide/managing-domains/model-in-image/runtime-updates.md\" >}})\n+  before starting any servers in the domain for any type of update, or, even while your domain\n+  is running for most types of updates. Model in Image runtime model updates are propagated\n+  by [restarting]({{< relref \"/userguide/managing-domains/domain-lifecycle/restarting.md\" >}})\n+  (rolling) the running WebLogic servers.\n+\n+  A good example of a change would be changing the settings for a data\n+  source. For example, you may wish to have a larger connection pool in your production\n   environment than you do in your development/test environments.  You probably also\n   want to have different credentials.  You may want to change the service name, and\n-  so on.  All of these kinds of updates can be made with configuration overrides.\n+  so on. All of these kinds of updates can be made with configuration overrides\n+  for Domain in PV and Domain in Image, and with model updates for Model in Image.\n   These are placed in a Kubernetes config map, that is, they are outside of the image, so\n   they do not require rebuilding the Docker image.  If all of your changes fit into\n   this category, it is probably much better to just use configuration overrides\n   instead of building a new image.  \n+\n - *Are you only changing the WebLogic configuration, for example, deploying or updating an\n   application, changing a resource configuration in a way that is not supported by\n-  configuration overrides, and such?*  \n+  configuration overrides, Model in Image model updates, and such?*  ", "originalCommit": "f2248c3d6a0550479766eeea894b918caaf5c507", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg4ODc1NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r398888754", "bodyText": "General comment -  would it be easier to read if there is a table of 3 columns for DII, DOPV, MII and each list out the scenario or use case best fit?", "author": "jshum2479", "createdAt": "2020-03-26T21:01:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg4NTQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTAyMDc0NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399020744", "bodyText": "@jshum2479\nI'm inclined to leave it as is. That was my original inclination too, but it turns out that this is the style of the entire ci/cd doc set, as authored by Mark. My assumption is that the general idea is to help the reader gain an understanding of a somewhat difficult area using gentle yet persuasive conversational English.\nPlease resolve if you agree, or add further comments.", "author": "tbarnes-us", "createdAt": "2020-03-27T03:51:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg4NTQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyOTQ3NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399329475", "bodyText": "ok, we can leave it as is.", "author": "jshum2479", "createdAt": "2020-03-27T15:02:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg4NTQyNA=="}], "type": "inlineReview"}, {"oid": "6e608fbdf16772ddc9747c5468e9a1c024da152a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6e608fbdf16772ddc9747c5468e9a1c024da152a", "message": "first pass edits", "committedDate": "2020-03-27T13:54:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI3NzIwMg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399277202", "bodyText": "Not sure if this sentence still makes sense here, \"If all of your changes fit into this category, it is probably much better to just use configuration overrides instead of building a new image.\"", "author": "rosemarymarano", "createdAt": "2020-03-27T13:49:20Z", "path": "docs-source/content/userguide/cicd/choose-an-approach.md", "diffHunk": "@@ -10,44 +10,69 @@ Let's review what we have discussed and talk about when we might want to use\n various approaches.  We can start by asking ourselves questions like these:\n \n \n-- *Can you make the desired change with a configuration override?*  \n-  The WebLogic Kubernetes Operator allows you to inject a number of [configuration\n+- *Can you make the desired change with a configuration override or Model in Image config map?*  \n+\n+  When your domain source type is Domain in PV or Domain in Image,\n+  the WebLogic Kubernetes Operator allows you to inject a number of [configuration\n   overrides]({{< relref \"/userguide/managing-domains/configoverrides/_index.md\" >}})\n-  into your pods before starting any servers in the domain.  This allows you to use \n-  the same image for multiple\n-  different configurations.  A good example would be changing the settings for a data\n-  source, for example. You may wish to have a larger connection pool in your production\n+  into your pods before starting any servers in the domain.  \n+\n+  When your domain\n+  source type is Model in Image you can \n+  [inject model updates]({{< relref \"/userguide/managing-domains/model-in-image/runtime-updates.md\" >}})\n+  before starting any servers in the domain for any type of update, or, even while your domain\n+  is running for most types of updates. Model in Image runtime model updates are propagated\n+  by [restarting]({{< relref \"/userguide/managing-domains/domain-lifecycle/restarting.md\" >}})\n+  (rolling) the running WebLogic servers.\n+\n+  A good example of a change would be changing the settings for a data\n+  source. For example, you may wish to have a larger connection pool in your production\n   environment than you do in your development/test environments.  You probably also\n   want to have different credentials.  You may want to change the service name, and\n-  so on.  All of these kinds of updates can be made with configuration overrides.\n+  so on. All of these kinds of updates can be made with configuration overrides\n+  for Domain in PV and Domain in Image, and with model updates for Model in Image.\n   These are placed in a Kubernetes config map, that is, they are outside of the image, so\n   they do not require rebuilding the Docker image.  If all of your changes fit into\n   this category, it is probably much better to just use configuration overrides", "originalCommit": "f2248c3d6a0550479766eeea894b918caaf5c507", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI5ODQ3OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399298478", "bodyText": "Oops.  Good catch.  Cut and paste error.  I'll fix that.", "author": "tbarnes-us", "createdAt": "2020-03-27T14:20:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI3NzIwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyMTkyOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399421928", "bodyText": "@rosemarymarano I pushed a fix. Please resolve if you think its fine now, otherwise please comment.", "author": "tbarnes-us", "createdAt": "2020-03-27T17:19:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI3NzIwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQzNjI3NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399436275", "bodyText": "@tbarnes-us Not seeing the fix.", "author": "rosemarymarano", "createdAt": "2020-03-27T17:43:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI3NzIwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ1NTc0Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399455747", "bodyText": "@rosemarymarano Hmm.  I messed up in git somehow.  I started with a fresh branch and pushed a new change.  You should see it now.", "author": "tbarnes-us", "createdAt": "2020-03-27T18:16:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI3NzIwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ1Njg3OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399456879", "bodyText": "I do.", "author": "rosemarymarano", "createdAt": "2020-03-27T18:18:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI3NzIwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI4MDI3Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399280273", "bodyText": "I don't think this sections adds anything other than the x-ref to CI/CD, which I think is important but should provide some hint of how MII takes advantage of CI/CD. The content in the \"Always use external state\" section already exists in CI/CD/Copy domains.", "author": "rosemarymarano", "createdAt": "2020-03-27T13:53:59Z", "path": "docs-source/content/userguide/managing-domains/model-in-image/overview.md", "diffHunk": "@@ -50,10 +51,30 @@ When you deploy a Model in Image domain resource:\n \n Model updates can be applied at runtime by changing the image, secrets, or WDT model config map after initial deployment. If the image name changes, or the domain resource `restartVersion` changes, then this will cause the introspector to rerun and generate a new domain home, and subsequently the changed domain home will be propagated to the domain's WebLogic pods using a rolling upgrade (each pod restarting one at a time). See [Runtime updates]({{< relref \"/userguide/managing-domains/model-in-image/runtime-updates.md\" >}}).\n \n+#### Continuous integration and delivery 'CI/CD'", "originalCommit": "f2248c3d6a0550479766eeea894b918caaf5c507", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyNDE4Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399424183", "bodyText": "I don't think it hurts to repeat this stuff.  The idea is to call out important information for MII readers directly in the MII overview.", "author": "tbarnes-us", "createdAt": "2020-03-27T17:23:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI4MDI3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyNDYzNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399424637", "bodyText": "@rjeberhard or @markxnelson Can you weigh in here?", "author": "tbarnes-us", "createdAt": "2020-03-27T17:24:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI4MDI3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQyNTMxNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399425315", "bodyText": "yes, i will get to it...", "author": "markxnelson", "createdAt": "2020-03-27T17:25:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI4MDI3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQzMzY2OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399433668", "bodyText": "@tbarnes-us The repeated section is not that big of a problem. Perhaps, the more important point to be made here is the lack of explanation for the x-ref to CI/CD. It doesn't need much, maybe just something like, \"To understand how Model in Image works with CI/CD, see...\" If users only wanted a \"For a full discussion of CI/CD with the operator,\" they could have selected it from the menu.", "author": "rosemarymarano", "createdAt": "2020-03-27T17:38:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI4MDI3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ1OTEyMg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1502#discussion_r399459122", "bodyText": "@rosemarymarano Does this look right now?  Please resolve if so.", "author": "tbarnes-us", "createdAt": "2020-03-27T18:22:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI4MDI3Mw=="}], "type": "inlineReview"}, {"oid": "4cae5fa7d2514230877945a21c3b80da56379c8b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4cae5fa7d2514230877945a21c3b80da56379c8b", "message": "doc update", "committedDate": "2020-03-27T18:16:03Z", "type": "commit"}, {"oid": "5e98d47f0d2fe06eced811060887ae8a0cc437bd", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5e98d47f0d2fe06eced811060887ae8a0cc437bd", "message": "doc update", "committedDate": "2020-03-27T18:22:15Z", "type": "commit"}]}