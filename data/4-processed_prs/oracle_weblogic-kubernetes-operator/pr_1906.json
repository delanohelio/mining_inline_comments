{"pr_number": 1906, "pr_title": "fixing the mii domain and sample test after images have been updated", "pr_createdAt": "2020-09-08T15:07:24Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1906", "timeline": [{"oid": "06ebe8b3dfed3a4f8be9fa3bf72d810f9df1f7ca", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/06ebe8b3dfed3a4f8be9fa3bf72d810f9df1f7ca", "message": "fixing the mii domain and sample test after images have been updated", "committedDate": "2020-09-06T16:02:20Z", "type": "commit"}, {"oid": "c63e23f15aedb1db8ccd411f810d5c452418ca24", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/c63e23f15aedb1db8ccd411f810d5c452418ca24", "message": "Modified group name used to copy file to server pod jenkins-ignore", "committedDate": "2020-09-08T19:00:57Z", "type": "commit"}, {"oid": "4cd72dce489dde539c6dd03978ecf2ff8efb45d8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/4cd72dce489dde539c6dd03978ecf2ff8efb45d8", "message": "fix jrf test in mii samples not to change gid to root", "committedDate": "2020-09-08T23:34:02Z", "type": "commit"}, {"oid": "3521dc3a8f7c80e887272bda5b17404a6d957880", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3521dc3a8f7c80e887272bda5b17404a6d957880", "message": "fix typp, undo chown option- it was merged as a another PR", "committedDate": "2020-09-09T19:47:17Z", "type": "commit"}, {"oid": "ac4808cf91540a1130f2a9fadd98d2f54778ce1d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ac4808cf91540a1130f2a9fadd98d2f54778ce1d", "message": "adding the fix I had removed by mistake", "committedDate": "2020-09-09T21:12:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyNzU4NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1906#discussion_r485927584", "bodyText": "I assume this needs to be conditional on the domain type?\nSo at line 75, add lines\nif [ \"$WDT_DOMAIN_TYPE\" = \"WLS\" ]; then\n  CHOWN_ROOT=\"--chown:root\"\nfi\n\nand modify line 113 so it looks like:\ndryrun:  ${CHOWN_ROOT:+${CHOWN_ROOT}}\n\nThe \":+\" syntax says 'do nothing if CHOWN_ROOT before the :+ is undefined, otherwise substitute the contents after :+.", "author": "tbarnes-us", "createdAt": "2020-09-09T21:18:11Z", "path": "src/integration-tests/model-in-image/mii-sample-wrapper/build-model-image.sh", "diffHunk": "@@ -109,17 +109,71 @@ dryrun:  ${MODEL_YAML_FILES:+--wdtModel ${MODEL_YAML_FILES}} \\\\\n dryrun:  ${MODEL_VARIABLE_FILES:+--wdtVariables ${MODEL_VARIABLE_FILES}} \\\\\n dryrun:  ${MODEL_ARCHIVE_FILES:+--wdtArchive ${MODEL_ARCHIVE_FILES}} \\\\\n dryrun:  --wdtModelOnly \\\\\n-dryrun:  --wdtDomainType ${WDT_DOMAIN_TYPE}\n+dryrun:  --wdtDomainType ${WDT_DOMAIN_TYPE} \\\\\n+dryrun:  --chown oracle:root", "originalCommit": "3521dc3a8f7c80e887272bda5b17404a6d957880", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyODAzNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1906#discussion_r485928035", "bodyText": "(This is much less code than cutting and pasting the entire dryrun)", "author": "tbarnes-us", "createdAt": "2020-09-09T21:19:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyNzU4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyOTA2Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1906#discussion_r485929067", "bodyText": "There's a more compact way to do this than have have two versions of dryrun - see earlier comment.", "author": "tbarnes-us", "createdAt": "2020-09-09T21:21:26Z", "path": "src/integration-tests/model-in-image/mii-sample-wrapper/build-model-image.sh", "diffHunk": "@@ -146,7 +200,12 @@ else\n \n   tmpfil=\"$WORKDIR/$(basename $0).$CURPID.$PPID.$SECONDS.$RANDOM.sh\"\n \n-  output_dryrun | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil\n+  if [ \"${WDT_DOMAIN_TYPE}\" = \"JRF\" ]; then\n+    output_dryrun_JRF | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil\n+  else\n+    output_dryrun | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil\n+  fi\n+#  output_dryrun | grep \"^dryrun:\" | sed 's/^dryrun://' > $tmpfil", "originalCommit": "ac4808cf91540a1130f2a9fadd98d2f54778ce1d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkzMzc5Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1906#discussion_r485933797", "bodyText": "I agree. Thanks. Making the change now.", "author": "bhavaniravichandran", "createdAt": "2020-09-09T21:32:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyOTA2Nw=="}], "type": "inlineReview"}, {"oid": "a533288a79009e0e154dfd7c8b0d534624bfaa50", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a533288a79009e0e154dfd7c8b0d534624bfaa50", "message": "update after Tom's review comments", "committedDate": "2020-09-10T15:24:58Z", "type": "commit"}]}