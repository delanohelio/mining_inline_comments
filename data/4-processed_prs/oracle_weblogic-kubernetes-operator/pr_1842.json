{"pr_number": 1842, "pr_title": "Update the external client FAQ to discuss 'unknown host' handling, plus...", "pr_createdAt": "2020-07-30T20:49:29Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1842", "timeline": [{"oid": "28ae9d0ee16e4583bafaab3cfba034207269ce7b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/28ae9d0ee16e4583bafaab3cfba034207269ce7b", "message": "Update the external client FAQ to discuss 'unknown host' handling. Update the domain-resource doc to try make it easier to read.", "committedDate": "2020-07-30T20:46:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI2NzYwNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1842#discussion_r463267607", "bodyText": "or earlier -> 12.2.1.3 (PS3) since we only have patch for 12.2.1.4 and 12.2.1.3.\nThis section LGTM. @lennyphan could you also review this? Thanks.", "author": "alai8", "createdAt": "2020-07-30T20:58:52Z", "path": "docs-source/content/faq/external-clients.md", "diffHunk": "@@ -195,6 +234,23 @@ spec:\n |`spec.ports.nodePort`|The external port that clients will use. This must match the external port that's configured on the WebLogic configured channels/network access points. By default, Kubernetes requires that this value range from `30000` to `32767`.|\n |`spec.ports.port` and `spec.targetPort`|These must match the port that's configured on the WebLogic configured channel/network access points.|\n \n+#### Enabling unknown host access\n+\n+##### When is it necessary to enable unknown host access?\n+\n+If a source WebLogic Server attempts to initiate an EJB, JMS, or JTA connection with a target WebLogic Server, then the target WebLogic Server will reject the connection by default if it cannot find the source server's listen address in its DNS. Such a failed connection attempt can yield log messages or exceptions like \"...RJVM has already been shutdown...\" or \"...address was valid earlier, but now we get...\". \n+\n+This means that it's usually necessary to enable unknown host access on an external WebLogic Server so that it can support EJB, JMS, or JTA communication that is initated by an operator hosted WebLogic Server. For example, if an operator hosted WebLogic Server with service address 'mydomainuid-myservername' initiates a JMS connection to a remote WebLogic Server, then the remote server will implicitly attempt to lookup 'mydomainuid-myservername' in its DNS as part of the connection setup, and this lookup will typically fail.\n+\n+Similarly, this also means that it's necessary to enable unknown host access on an operator hosted WebLogic Server that accepts EJB or JMS connection requests from external WebLogic Servers when the external WebLogic Server's listen addresses cannot be resolved by the DNS running in the Kuberneters cluster.\n+\n+##### How to enable unknown host access\n+\n+To enable an 'unknown host' source WebLogic Server to initiate EJB, JMS, or JTA communication with a target WebLogic Server:\n+  * Set the `weblogic.rjvm.allowUnknownHost` Java system property to `true` on each target WebLogic Server.\n+    * For operator hosted WebLogic Servers, you can set this property by including `-Dweblogic.rjvm.allowUnknownHost=true` in the `JAVA_OPTIONS` [Domain environment variable]({{< relref \"/userguide/managing-domains/domain-resource#jvm-memory-and-java-option-environment-variables\" >}}) defined in the domain resource's `spec.serverPod.env` attribute.\n+  * Also apply patch 30656708 on each target WebLogic Server for versions 12.2.1.4 (PS4) or earlier.", "originalCommit": "28ae9d0ee16e4583bafaab3cfba034207269ce7b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI3MjA2MQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1842#discussion_r463272061", "bodyText": "@alai8 Can we leave it as 'or earlier'? Since the target WLS may be external to Kubernetes, it's very possible it'll be on an older version and the customer will therefore want a backport.", "author": "tbarnes-us", "createdAt": "2020-07-30T21:08:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzI2NzYwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MDYwNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1842#discussion_r463640605", "bodyText": "\"Additional steps are required for external clients beyond configuring the custom channel - see Approaches.\"  This x-ref is no longer correct. Not sure how you want to change it.", "author": "rosemarymarano", "createdAt": "2020-07-31T14:21:55Z", "path": "docs-source/content/faq/external-clients.md", "diffHunk": "@@ -131,6 +168,8 @@ In this example:\n \n - The operator will automatically create a Kubernetes Service named `DOMAIN_UID-cluster-cluster-1` for both the custom and default channel.\n \n+- The operator will automatically set the `ListenAddress` on each WebLogic Server for each of its channels.\n+", "originalCommit": "28ae9d0ee16e4583bafaab3cfba034207269ce7b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY4NDEwMw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1842#discussion_r463684103", "bodyText": "Fixed.", "author": "tbarnes-us", "createdAt": "2020-07-31T15:38:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MDYwNQ=="}], "type": "inlineReview"}, {"oid": "2a73f6a6a10a5e9eac78517f4c9591600da76e5f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2a73f6a6a10a5e9eac78517f4c9591600da76e5f", "message": "review and edit", "committedDate": "2020-07-31T15:05:39Z", "type": "commit"}, {"oid": "baf536ebcf08483214bf31803152c932a0eee6fb", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/baf536ebcf08483214bf31803152c932a0eee6fb", "message": "delete extraneous file", "committedDate": "2020-07-31T15:31:42Z", "type": "commit"}, {"oid": "0f5525e4753fa1db94fa8a56e0c5f34c9a44da8f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0f5525e4753fa1db94fa8a56e0c5f34c9a44da8f", "message": "minor doc tweaks", "committedDate": "2020-07-31T15:37:17Z", "type": "commit"}, {"oid": "f5df53888f0418e846e8476f9f4b29924213226e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/f5df53888f0418e846e8476f9f4b29924213226e", "message": "Merge branch 'remote-client-faq-update' of https://github.com/oracle/weblogic-kubernetes-operator into remote-client-faq-update", "committedDate": "2020-07-31T15:37:39Z", "type": "commit"}]}