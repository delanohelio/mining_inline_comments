{"pr_number": 1456, "pr_title": "Boot identity not valid FAQ", "pr_createdAt": "2020-03-02T21:14:51Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456", "timeline": [{"oid": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "message": "Boot identity not valid FAQ", "committedDate": "2020-03-02T21:13:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2NDYxNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386664617", "bodyText": "Operator -> operator (we use lower case except when referring to its full official title)", "author": "rosemarymarano", "createdAt": "2020-03-02T21:35:55Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1\n+---\n+\n+> One or more WebLogic Server instances in my domain will not start and I see errors in the server log like this:\n+>\n+> `<Feb 6, 2020 12:05:35,550 AM GMT> <Critical> <Security> <BEA-090402> <Authentication denied: Boot identity not valid. The user name or password or both from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updatedboot identity file is used to start the server, these new values are encrypted.>`\n+\n+When you see these kinds of errors, it means that either the user name and password provided in the `weblogicCredentialsSecret` are invalid\n+or that the WebLogic domain directory's security configuration files have changed in an incompatible way between when the Operator scanned", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2NjkxOQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386666919", "bodyText": "currently only happens -> currently happens only (Keep only close to that which it modifies to improve the clarity and accuracy of the sentence.)", "author": "rosemarymarano", "createdAt": "2020-03-02T21:40:29Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1\n+---\n+\n+> One or more WebLogic Server instances in my domain will not start and I see errors in the server log like this:\n+>\n+> `<Feb 6, 2020 12:05:35,550 AM GMT> <Critical> <Security> <BEA-090402> <Authentication denied: Boot identity not valid. The user name or password or both from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updatedboot identity file is used to start the server, these new values are encrypted.>`\n+\n+When you see these kinds of errors, it means that either the user name and password provided in the `weblogicCredentialsSecret` are invalid\n+or that the WebLogic domain directory's security configuration files have changed in an incompatible way between when the Operator scanned\n+the domain directory, which occurs during the \"introspection\" phase, and when the server instance attempted to start.\n+\n+First, always check that the user name and password credentials stored in the Kubernetes secret referenced by `weblogicCredentialsSecret` contain the expected values for an account with administrative privilege for the WebLogic domain.\n+\n+To understand the \"incompatible domain security configuration\" type of failure, it's important to review the contents of the\n+[WebLogic domain directory](https://docs.oracle.com/middleware/12213/wls/DOMCF/config_files.htm#DOMCF140). Each WebLogic\n+domain directory contains a \"security\" subdirectory that contains a file called \"SerializedSystemIni.dat\".  This file contains\n+security data to bootstrap the WebLogic domain, including a domain-specific encryption key.\n+\n+During introspection, the operator generates a Kubernetes job that runs a pod in the domain's Kubernetes namespace and with the\n+same Kubernetes service account that will be used later to run the Administration Server. This pod has access to the Kubernetes\n+secret referenced by `weblogicCredentialsSecret` and encrypts these values with the domain-specific encryption key so that the\n+secured value can be injected as the \"boot.properties\" contents when starting server instances.\n+\n+When the domain directory is changed such that the domain-specific encryption key is different, the \"boot.properties\" entries\n+generated during introspection will now be invalid.\n+\n+This can happen in a variety of ways, depending on the [model selected](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/choosing-a-model/):\n+\n+#### Domain in a Docker image and rolling to an image containing new or unrelated domain directory\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while rolling to a new Docker image that contains an entirely new or unrelated domain directory.\n+\n+The problem is that WebLogic cannot support server instances being part of the same WebLogic domain if the server instances do \n+not all share the same domain-specific encryption key and other bootstrapping security details. Additionally, operator introspection\n+currently only happens when starting servers following a total shutdown. Therefore, the \"boot.properites\" generated from", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2ODI1NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386668254", "bodyText": "is to either follow -> is to follow either", "author": "rosemarymarano", "createdAt": "2020-03-02T21:43:04Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1\n+---\n+\n+> One or more WebLogic Server instances in my domain will not start and I see errors in the server log like this:\n+>\n+> `<Feb 6, 2020 12:05:35,550 AM GMT> <Critical> <Security> <BEA-090402> <Authentication denied: Boot identity not valid. The user name or password or both from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updatedboot identity file is used to start the server, these new values are encrypted.>`\n+\n+When you see these kinds of errors, it means that either the user name and password provided in the `weblogicCredentialsSecret` are invalid\n+or that the WebLogic domain directory's security configuration files have changed in an incompatible way between when the Operator scanned\n+the domain directory, which occurs during the \"introspection\" phase, and when the server instance attempted to start.\n+\n+First, always check that the user name and password credentials stored in the Kubernetes secret referenced by `weblogicCredentialsSecret` contain the expected values for an account with administrative privilege for the WebLogic domain.\n+\n+To understand the \"incompatible domain security configuration\" type of failure, it's important to review the contents of the\n+[WebLogic domain directory](https://docs.oracle.com/middleware/12213/wls/DOMCF/config_files.htm#DOMCF140). Each WebLogic\n+domain directory contains a \"security\" subdirectory that contains a file called \"SerializedSystemIni.dat\".  This file contains\n+security data to bootstrap the WebLogic domain, including a domain-specific encryption key.\n+\n+During introspection, the operator generates a Kubernetes job that runs a pod in the domain's Kubernetes namespace and with the\n+same Kubernetes service account that will be used later to run the Administration Server. This pod has access to the Kubernetes\n+secret referenced by `weblogicCredentialsSecret` and encrypts these values with the domain-specific encryption key so that the\n+secured value can be injected as the \"boot.properties\" contents when starting server instances.\n+\n+When the domain directory is changed such that the domain-specific encryption key is different, the \"boot.properties\" entries\n+generated during introspection will now be invalid.\n+\n+This can happen in a variety of ways, depending on the [model selected](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/choosing-a-model/):\n+\n+#### Domain in a Docker image and rolling to an image containing new or unrelated domain directory\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while rolling to a new Docker image that contains an entirely new or unrelated domain directory.\n+\n+The problem is that WebLogic cannot support server instances being part of the same WebLogic domain if the server instances do \n+not all share the same domain-specific encryption key and other bootstrapping security details. Additionally, operator introspection\n+currently only happens when starting servers following a total shutdown. Therefore, the \"boot.properites\" generated from\n+introspecting the image containing the original domain directory will be invalid when used with a container started with\n+the updated Docker image containing the new or unrelated domain directory.\n+\n+The solution is to either follow the recommended [CI/CD guidelines](https://oracle.github.io/weblogic-kubernetes-operator/userguide/cicd/) so that the original and new Docker images contain domain directories", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2OTIzNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386669234", "bodyText": "directory then -> directory, then", "author": "rosemarymarano", "createdAt": "2020-03-02T21:45:05Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1\n+---\n+\n+> One or more WebLogic Server instances in my domain will not start and I see errors in the server log like this:\n+>\n+> `<Feb 6, 2020 12:05:35,550 AM GMT> <Critical> <Security> <BEA-090402> <Authentication denied: Boot identity not valid. The user name or password or both from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updatedboot identity file is used to start the server, these new values are encrypted.>`\n+\n+When you see these kinds of errors, it means that either the user name and password provided in the `weblogicCredentialsSecret` are invalid\n+or that the WebLogic domain directory's security configuration files have changed in an incompatible way between when the Operator scanned\n+the domain directory, which occurs during the \"introspection\" phase, and when the server instance attempted to start.\n+\n+First, always check that the user name and password credentials stored in the Kubernetes secret referenced by `weblogicCredentialsSecret` contain the expected values for an account with administrative privilege for the WebLogic domain.\n+\n+To understand the \"incompatible domain security configuration\" type of failure, it's important to review the contents of the\n+[WebLogic domain directory](https://docs.oracle.com/middleware/12213/wls/DOMCF/config_files.htm#DOMCF140). Each WebLogic\n+domain directory contains a \"security\" subdirectory that contains a file called \"SerializedSystemIni.dat\".  This file contains\n+security data to bootstrap the WebLogic domain, including a domain-specific encryption key.\n+\n+During introspection, the operator generates a Kubernetes job that runs a pod in the domain's Kubernetes namespace and with the\n+same Kubernetes service account that will be used later to run the Administration Server. This pod has access to the Kubernetes\n+secret referenced by `weblogicCredentialsSecret` and encrypts these values with the domain-specific encryption key so that the\n+secured value can be injected as the \"boot.properties\" contents when starting server instances.\n+\n+When the domain directory is changed such that the domain-specific encryption key is different, the \"boot.properties\" entries\n+generated during introspection will now be invalid.\n+\n+This can happen in a variety of ways, depending on the [model selected](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/choosing-a-model/):\n+\n+#### Domain in a Docker image and rolling to an image containing new or unrelated domain directory\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while rolling to a new Docker image that contains an entirely new or unrelated domain directory.\n+\n+The problem is that WebLogic cannot support server instances being part of the same WebLogic domain if the server instances do \n+not all share the same domain-specific encryption key and other bootstrapping security details. Additionally, operator introspection\n+currently only happens when starting servers following a total shutdown. Therefore, the \"boot.properites\" generated from\n+introspecting the image containing the original domain directory will be invalid when used with a container started with\n+the updated Docker image containing the new or unrelated domain directory.\n+\n+The solution is to either follow the recommended [CI/CD guidelines](https://oracle.github.io/weblogic-kubernetes-operator/userguide/cicd/) so that the original and new Docker images contain domain directories\n+with consistent domain-specific encryption keys and bootstrapping security details or to [perform a total shutdown](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/domain-lifecycle/startup/#starting-and-stopping-servers) of the domain so\n+that introspection reoccurs as servers are restarted.\n+\n+#### Domain in a Docker image after a full domain shutdown and restart\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while starting servers after a full domain shutdown. \n+\n+For this type of failure, it is even more probable that the user name and password specified in the Kubernertes secret referenced by\n+`weblogicCredentialsSecret` are wrong. However, there is another common cause. If your development model generates new Docker images\n+with new and unrelated domain directories and then tags those images with the same tag, then different Kubernetes worker nodes\n+may have different images under the same tag in their local Docker repositories.\n+\n+The simplest solution is to set `imagePullPolicy` to `Always`; however, the better solution would be to design your development\n+pipeline to generate new Docker image tags on every build and to never reuse an existing tag.\n+\n+#### Domain on a persistent volume and completely replacing the domain directory\n+\n+The domain is using the \"domain on a persistent volume\" model and the error occurs while starting servers when the domain directory\n+change was made while other servers were still running.\n+\n+If completely replacing the domain directory then you must [stop all running servers](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/domain-lifecycle/startup/#starting-and-stopping-servers).", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2OTg0NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386669845", "bodyText": "Since -> Because (since \u2013 don't use to mean for the reason of; use because. Use since only for matters of time, for example, since the last time the program was run.)", "author": "rosemarymarano", "createdAt": "2020-03-02T21:46:19Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1\n+---\n+\n+> One or more WebLogic Server instances in my domain will not start and I see errors in the server log like this:\n+>\n+> `<Feb 6, 2020 12:05:35,550 AM GMT> <Critical> <Security> <BEA-090402> <Authentication denied: Boot identity not valid. The user name or password or both from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updatedboot identity file is used to start the server, these new values are encrypted.>`\n+\n+When you see these kinds of errors, it means that either the user name and password provided in the `weblogicCredentialsSecret` are invalid\n+or that the WebLogic domain directory's security configuration files have changed in an incompatible way between when the Operator scanned\n+the domain directory, which occurs during the \"introspection\" phase, and when the server instance attempted to start.\n+\n+First, always check that the user name and password credentials stored in the Kubernetes secret referenced by `weblogicCredentialsSecret` contain the expected values for an account with administrative privilege for the WebLogic domain.\n+\n+To understand the \"incompatible domain security configuration\" type of failure, it's important to review the contents of the\n+[WebLogic domain directory](https://docs.oracle.com/middleware/12213/wls/DOMCF/config_files.htm#DOMCF140). Each WebLogic\n+domain directory contains a \"security\" subdirectory that contains a file called \"SerializedSystemIni.dat\".  This file contains\n+security data to bootstrap the WebLogic domain, including a domain-specific encryption key.\n+\n+During introspection, the operator generates a Kubernetes job that runs a pod in the domain's Kubernetes namespace and with the\n+same Kubernetes service account that will be used later to run the Administration Server. This pod has access to the Kubernetes\n+secret referenced by `weblogicCredentialsSecret` and encrypts these values with the domain-specific encryption key so that the\n+secured value can be injected as the \"boot.properties\" contents when starting server instances.\n+\n+When the domain directory is changed such that the domain-specific encryption key is different, the \"boot.properties\" entries\n+generated during introspection will now be invalid.\n+\n+This can happen in a variety of ways, depending on the [model selected](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/choosing-a-model/):\n+\n+#### Domain in a Docker image and rolling to an image containing new or unrelated domain directory\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while rolling to a new Docker image that contains an entirely new or unrelated domain directory.\n+\n+The problem is that WebLogic cannot support server instances being part of the same WebLogic domain if the server instances do \n+not all share the same domain-specific encryption key and other bootstrapping security details. Additionally, operator introspection\n+currently only happens when starting servers following a total shutdown. Therefore, the \"boot.properites\" generated from\n+introspecting the image containing the original domain directory will be invalid when used with a container started with\n+the updated Docker image containing the new or unrelated domain directory.\n+\n+The solution is to either follow the recommended [CI/CD guidelines](https://oracle.github.io/weblogic-kubernetes-operator/userguide/cicd/) so that the original and new Docker images contain domain directories\n+with consistent domain-specific encryption keys and bootstrapping security details or to [perform a total shutdown](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/domain-lifecycle/startup/#starting-and-stopping-servers) of the domain so\n+that introspection reoccurs as servers are restarted.\n+\n+#### Domain in a Docker image after a full domain shutdown and restart\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while starting servers after a full domain shutdown. \n+\n+For this type of failure, it is even more probable that the user name and password specified in the Kubernertes secret referenced by\n+`weblogicCredentialsSecret` are wrong. However, there is another common cause. If your development model generates new Docker images\n+with new and unrelated domain directories and then tags those images with the same tag, then different Kubernetes worker nodes\n+may have different images under the same tag in their local Docker repositories.\n+\n+The simplest solution is to set `imagePullPolicy` to `Always`; however, the better solution would be to design your development\n+pipeline to generate new Docker image tags on every build and to never reuse an existing tag.\n+\n+#### Domain on a persistent volume and completely replacing the domain directory\n+\n+The domain is using the \"domain on a persistent volume\" model and the error occurs while starting servers when the domain directory\n+change was made while other servers were still running.\n+\n+If completely replacing the domain directory then you must [stop all running servers](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/domain-lifecycle/startup/#starting-and-stopping-servers).\n+\n+Since all servers will already be stopped, there is no requirement that the new contents of the domain directory be related to", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY3MjU4MQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386672581", "bodyText": "\"while rolling to a new Docker image\" I would not have understood this phrase, perhaps, developers will.\nAre referring to using a rolling restart with a new Docker image?", "author": "rosemarymarano", "createdAt": "2020-03-02T21:51:46Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1\n+---\n+\n+> One or more WebLogic Server instances in my domain will not start and I see errors in the server log like this:\n+>\n+> `<Feb 6, 2020 12:05:35,550 AM GMT> <Critical> <Security> <BEA-090402> <Authentication denied: Boot identity not valid. The user name or password or both from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updatedboot identity file is used to start the server, these new values are encrypted.>`\n+\n+When you see these kinds of errors, it means that either the user name and password provided in the `weblogicCredentialsSecret` are invalid\n+or that the WebLogic domain directory's security configuration files have changed in an incompatible way between when the Operator scanned\n+the domain directory, which occurs during the \"introspection\" phase, and when the server instance attempted to start.\n+\n+First, always check that the user name and password credentials stored in the Kubernetes secret referenced by `weblogicCredentialsSecret` contain the expected values for an account with administrative privilege for the WebLogic domain.\n+\n+To understand the \"incompatible domain security configuration\" type of failure, it's important to review the contents of the\n+[WebLogic domain directory](https://docs.oracle.com/middleware/12213/wls/DOMCF/config_files.htm#DOMCF140). Each WebLogic\n+domain directory contains a \"security\" subdirectory that contains a file called \"SerializedSystemIni.dat\".  This file contains\n+security data to bootstrap the WebLogic domain, including a domain-specific encryption key.\n+\n+During introspection, the operator generates a Kubernetes job that runs a pod in the domain's Kubernetes namespace and with the\n+same Kubernetes service account that will be used later to run the Administration Server. This pod has access to the Kubernetes\n+secret referenced by `weblogicCredentialsSecret` and encrypts these values with the domain-specific encryption key so that the\n+secured value can be injected as the \"boot.properties\" contents when starting server instances.\n+\n+When the domain directory is changed such that the domain-specific encryption key is different, the \"boot.properties\" entries\n+generated during introspection will now be invalid.\n+\n+This can happen in a variety of ways, depending on the [model selected](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/choosing-a-model/):\n+\n+#### Domain in a Docker image and rolling to an image containing new or unrelated domain directory\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while rolling to a new Docker image that contains an entirely new or unrelated domain directory.", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4NTA1MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386685050", "bodyText": "Minor complaint:  There are already two other FAQ entries at weight 1. It'd be nice if the ordering of FAQ entries was more predictable.", "author": "tbarnes-us", "createdAt": "2020-03-02T22:18:16Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4NzE2MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386687160", "bodyText": "Theoretically, one won't see the above error if it came about because the domain secret changed.   If the domain secret changed, a different error is generated first and  the operator won't even attempt to start WLS.  The other error is: \" trace SEVERE \"Domain secret mismatch. The domain secret in 'DOMAIN_HOME/security/SerializedSystemIni.dat' where DOMAIN_HOME='$DOMAIN_HOME' does not match the domain secret found by the introspector job. WebLogic requires that all WebLogic servers in the same domain share the same domain secret. See 'Boot Identity Not Valid' in the operator FAQ (https://oracle.github.io/weblogic-kubernetes-operator/faq/boot-identity-not-valid/). MD5 checksum diff:\"\n\"...", "author": "tbarnes-us", "createdAt": "2020-03-02T22:22:44Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1\n+---\n+\n+> One or more WebLogic Server instances in my domain will not start and I see errors in the server log like this:\n+>\n+> `<Feb 6, 2020 12:05:35,550 AM GMT> <Critical> <Security> <BEA-090402> <Authentication denied: Boot identity not valid. The user name or password or both from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updatedboot identity file is used to start the server, these new values are encrypted.>`\n+", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjcwNzg2NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386707865", "bodyText": "Doesn't the fact that the server startup detecting the MD5 checksum has changed now change some of the FAQ content?\nIn other words, if you see the MD5 checksum error that means do X but if you still see Authentication Denied then do Y?", "author": "TheFrogPad", "createdAt": "2020-03-02T23:12:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4NzE2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ4NTY3MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r388485670", "bodyText": "Reformated to two different FAQ entries.", "author": "rjeberhard", "createdAt": "2020-03-05T18:39:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4NzE2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY4OTAzNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386689035", "bodyText": "and a \"details or to\" --> \"details, or to\".  (Makes it easier to understand what you meant by 'either' earlier in the sentence).", "author": "tbarnes-us", "createdAt": "2020-03-02T22:26:48Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1\n+---\n+\n+> One or more WebLogic Server instances in my domain will not start and I see errors in the server log like this:\n+>\n+> `<Feb 6, 2020 12:05:35,550 AM GMT> <Critical> <Security> <BEA-090402> <Authentication denied: Boot identity not valid. The user name or password or both from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updatedboot identity file is used to start the server, these new values are encrypted.>`\n+\n+When you see these kinds of errors, it means that either the user name and password provided in the `weblogicCredentialsSecret` are invalid\n+or that the WebLogic domain directory's security configuration files have changed in an incompatible way between when the Operator scanned\n+the domain directory, which occurs during the \"introspection\" phase, and when the server instance attempted to start.\n+\n+First, always check that the user name and password credentials stored in the Kubernetes secret referenced by `weblogicCredentialsSecret` contain the expected values for an account with administrative privilege for the WebLogic domain.\n+\n+To understand the \"incompatible domain security configuration\" type of failure, it's important to review the contents of the\n+[WebLogic domain directory](https://docs.oracle.com/middleware/12213/wls/DOMCF/config_files.htm#DOMCF140). Each WebLogic\n+domain directory contains a \"security\" subdirectory that contains a file called \"SerializedSystemIni.dat\".  This file contains\n+security data to bootstrap the WebLogic domain, including a domain-specific encryption key.\n+\n+During introspection, the operator generates a Kubernetes job that runs a pod in the domain's Kubernetes namespace and with the\n+same Kubernetes service account that will be used later to run the Administration Server. This pod has access to the Kubernetes\n+secret referenced by `weblogicCredentialsSecret` and encrypts these values with the domain-specific encryption key so that the\n+secured value can be injected as the \"boot.properties\" contents when starting server instances.\n+\n+When the domain directory is changed such that the domain-specific encryption key is different, the \"boot.properties\" entries\n+generated during introspection will now be invalid.\n+\n+This can happen in a variety of ways, depending on the [model selected](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/choosing-a-model/):\n+\n+#### Domain in a Docker image and rolling to an image containing new or unrelated domain directory\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while rolling to a new Docker image that contains an entirely new or unrelated domain directory.\n+\n+The problem is that WebLogic cannot support server instances being part of the same WebLogic domain if the server instances do \n+not all share the same domain-specific encryption key and other bootstrapping security details. Additionally, operator introspection\n+currently only happens when starting servers following a total shutdown. Therefore, the \"boot.properites\" generated from\n+introspecting the image containing the original domain directory will be invalid when used with a container started with\n+the updated Docker image containing the new or unrelated domain directory.\n+\n+The solution is to either follow the recommended [CI/CD guidelines](https://oracle.github.io/weblogic-kubernetes-operator/userguide/cicd/) so that the original and new Docker images contain domain directories\n+with consistent domain-specific encryption keys and bootstrapping security details or to [perform a total shutdown](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/domain-lifecycle/startup/#starting-and-stopping-servers) of the domain so", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY5MTMyOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386691328", "bodyText": "You have two causes and one solution here all kind of jammed together.  Make it easier on the reader by making a bullet list of two bullets, each with one cause and its associated solution. Perhaps:\nThe domain is using the \"domain in a Docker image\" model and the error occurs while starting servers after a full domain shutdown. For this type of failure, there are two potential causes:\n\n\nIt is most probable that the user name and password specified in the Kubernertes secret referenced by weblogicCredentialsSecret are wrong.\n\n\nIf your development model generates new Docker images with new and unrelated domain directories and then tags those images with the same tag, then different Kubernetes worker nodes may have different images under the same tag in their local Docker repositories. The simplest solution is to set imagePullPolicy to Always; however, the better solution would be to design your development pipeline to generate new Docker image tags on every build and to never reuse an existing tag.", "author": "tbarnes-us", "createdAt": "2020-03-02T22:31:56Z", "path": "docs-source/content/faq/boot-identity-not-valid.md", "diffHunk": "@@ -0,0 +1,71 @@\n+---\n+title: \"Boot Identity Not Valid\"\n+date: 2020-03-02T08:08:19-04:00\n+draft: false\n+weight: 1\n+---\n+\n+> One or more WebLogic Server instances in my domain will not start and I see errors in the server log like this:\n+>\n+> `<Feb 6, 2020 12:05:35,550 AM GMT> <Critical> <Security> <BEA-090402> <Authentication denied: Boot identity not valid. The user name or password or both from the boot identity file (boot.properties) is not valid. The boot identity may have been changed since the boot identity file was created. Please edit and update the boot identity file with the proper values of username and password. The first time the updatedboot identity file is used to start the server, these new values are encrypted.>`\n+\n+When you see these kinds of errors, it means that either the user name and password provided in the `weblogicCredentialsSecret` are invalid\n+or that the WebLogic domain directory's security configuration files have changed in an incompatible way between when the Operator scanned\n+the domain directory, which occurs during the \"introspection\" phase, and when the server instance attempted to start.\n+\n+First, always check that the user name and password credentials stored in the Kubernetes secret referenced by `weblogicCredentialsSecret` contain the expected values for an account with administrative privilege for the WebLogic domain.\n+\n+To understand the \"incompatible domain security configuration\" type of failure, it's important to review the contents of the\n+[WebLogic domain directory](https://docs.oracle.com/middleware/12213/wls/DOMCF/config_files.htm#DOMCF140). Each WebLogic\n+domain directory contains a \"security\" subdirectory that contains a file called \"SerializedSystemIni.dat\".  This file contains\n+security data to bootstrap the WebLogic domain, including a domain-specific encryption key.\n+\n+During introspection, the operator generates a Kubernetes job that runs a pod in the domain's Kubernetes namespace and with the\n+same Kubernetes service account that will be used later to run the Administration Server. This pod has access to the Kubernetes\n+secret referenced by `weblogicCredentialsSecret` and encrypts these values with the domain-specific encryption key so that the\n+secured value can be injected as the \"boot.properties\" contents when starting server instances.\n+\n+When the domain directory is changed such that the domain-specific encryption key is different, the \"boot.properties\" entries\n+generated during introspection will now be invalid.\n+\n+This can happen in a variety of ways, depending on the [model selected](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/choosing-a-model/):\n+\n+#### Domain in a Docker image and rolling to an image containing new or unrelated domain directory\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while rolling to a new Docker image that contains an entirely new or unrelated domain directory.\n+\n+The problem is that WebLogic cannot support server instances being part of the same WebLogic domain if the server instances do \n+not all share the same domain-specific encryption key and other bootstrapping security details. Additionally, operator introspection\n+currently only happens when starting servers following a total shutdown. Therefore, the \"boot.properites\" generated from\n+introspecting the image containing the original domain directory will be invalid when used with a container started with\n+the updated Docker image containing the new or unrelated domain directory.\n+\n+The solution is to either follow the recommended [CI/CD guidelines](https://oracle.github.io/weblogic-kubernetes-operator/userguide/cicd/) so that the original and new Docker images contain domain directories\n+with consistent domain-specific encryption keys and bootstrapping security details or to [perform a total shutdown](https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/domain-lifecycle/startup/#starting-and-stopping-servers) of the domain so\n+that introspection reoccurs as servers are restarted.\n+\n+#### Domain in a Docker image after a full domain shutdown and restart\n+\n+The domain is using the \"domain in a Docker image\" model and the error occurs while starting servers after a full domain shutdown. \n+\n+For this type of failure, it is even more probable that the user name and password specified in the Kubernertes secret referenced by", "originalCommit": "ce1554cbc3749f2cfcf587ca5efdd0b5bfdb5285", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjcxMzAxNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1456#discussion_r386713014", "bodyText": "Along these same lines for easier read and reference, what about having sections and sub section similar to:\n\nDomain In Image\n\nrolling to an image\n\nA\n\n\na full domain shutdown and restart\n\nA\nB\n\n\n\n\nDomain on a persistent volume\n\nreplacing the domain directory\n\nA", "author": "TheFrogPad", "createdAt": "2020-03-02T23:27:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY5MTMyOA=="}], "type": "inlineReview"}, {"oid": "6bcde125afa124aabae7bdd0ec721853094ad5d4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/6bcde125afa124aabae7bdd0ec721853094ad5d4", "message": "Review comments", "committedDate": "2020-03-05T18:38:54Z", "type": "commit"}, {"oid": "2526b0ed1d68305c4bbbaac3d8c089ef80328bd8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2526b0ed1d68305c4bbbaac3d8c089ef80328bd8", "message": "Change how to quote text to emphasize and to wrap", "committedDate": "2020-03-05T18:48:30Z", "type": "commit"}]}