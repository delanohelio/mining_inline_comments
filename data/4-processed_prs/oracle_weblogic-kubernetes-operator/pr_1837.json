{"pr_number": 1837, "pr_title": "added extra properties required for domain creation ", "pr_createdAt": "2020-07-29T15:48:49Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837", "timeline": [{"oid": "436e1cb805ae048e8df58504be6b2a6d027897e9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/436e1cb805ae048e8df58504be6b2a6d027897e9", "message": "added extra properties required for domain creation of Oracle Identity Governance", "committedDate": "2020-07-29T15:45:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwODg3OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837#discussion_r462408879", "bodyText": "(1) For this to work, I assume there needs to be a corresponding change in create-domain-job-template.yaml that references the %FRONTEND_HOST% and %FRONT_ENDPORT% macros? If the answer is yes. the change is missing from this pull.", "author": "tbarnes-us", "createdAt": "2020-07-29T15:57:03Z", "path": "kubernetes/samples/scripts/common/utility.sh", "diffHunk": "@@ -447,6 +447,8 @@ function createFiles {\n     sed -i -e \"s:%CUSTOM_RCUPREFIX%:${rcuSchemaPrefix}:g\" ${createJobOutput}\n     sed -i -e \"s|%CUSTOM_CONNECTION_STRING%|${rcuDatabaseURL}|g\" ${createJobOutput}\n     sed -i -e \"s:%EXPOSE_T3_CHANNEL_PREFIX%:${exposeAdminT3Channel}:g\" ${createJobOutput}\n+    sed -i -e \"s:%FRONTEND_HOST%:${frontEndHost}:g\" ${createJobOutput}\n+    sed -i -e \"s:%FRONTEND_PORT%:${frontEndPort}:g\" ${createJobOutput}", "originalCommit": "436e1cb805ae048e8df58504be6b2a6d027897e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMDM3MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837#discussion_r462410370", "bodyText": "(2) Are these properties for a narrow use case?  If so, can you use macro/setting names that's are more specific/descriptive than FRONTEND_HOST/FRONTEND_PORT/frontEndHost/frontEndPort?", "author": "tbarnes-us", "createdAt": "2020-07-29T15:59:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwODg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMzYxOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837#discussion_r462413618", "bodyText": "(3) Is the need to set these properties common? If so, the corresponding inputs file for the sample should be updated to include 'frontEndHost' and 'frontEndPort' (commented out, with a comment describing their purpose).", "author": "tbarnes-us", "createdAt": "2020-07-29T16:03:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwODg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxNjc0OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837#discussion_r462416748", "bodyText": "(1)\n\n(1) For this to work, I assume there needs to be a corresponding change in create-domain-job-template.yaml that references the %FRONTEND_HOST% and %FRONT_ENDPORT% macros? If the answer is yes. the change is missing from this pull.\n\nThis is part of IDM release. We are providing our samples and templates which include these properties.", "author": "tanmaygarg-oracle", "createdAt": "2020-07-29T16:08:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwODg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxNzQyOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837#discussion_r462417428", "bodyText": "(2) Are these properties for a narrow use case? If so, can you use macro/setting names that's are more specific/descriptive than FRONTEND_HOST/FRONTEND_PORT/frontEndHost/frontEndPort?\n\nThese are the standard documented properties used by IDM product", "author": "tanmaygarg-oracle", "createdAt": "2020-07-29T16:09:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwODg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxODM3OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837#discussion_r462418378", "bodyText": "(3) Is the need to set these properties common? If so, the corresponding inputs file for the sample should be updated to include 'frontEndHost' and 'frontEndPort' (commented out, with a comment describing their purpose).\n\nSimilar to point 1 input files will be shipped when idm samples will be pushed to the repo", "author": "tanmaygarg-oracle", "createdAt": "2020-07-29T16:10:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwODg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQzMDQzMA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837#discussion_r462430430", "bodyText": "(1)\n\n(1) For this to work, I assume there needs to be a corresponding change in create-domain-job-template.yaml that references the %FRONTEND_HOST% and %FRONT_ENDPORT% macros? If the answer is yes. the change is missing from this pull.\n\nThis is part of IDM release. We are providing our samples and templates which include these properties.\n\n(1A) Oh. The point still stands - the macro names should be less^H^H^H^H more specific.\n(1B) But, since this is for an external sample/product, I think this brings the entire pull into question.  IMO, external samples and products probably should not directly rely on WKO sample shell scripts and templates. I think the WKO samples and their internals aren't given the same 'backward compatibility' guarantees as WKO's public APIs.  They are not an API per se.   @rjeberhard @markxnelson Thoughts?\n(1C) If it turns out the pull's use case is still in play even after considering 1B, then I think a different approach may be advisable that supports a more custom 'future' proof method for handling arbitrary inputs from external use cases that want to fine tune a sample.  For example, we could document support for any input in the input file that begins with 'custom', and utility.sh could find every environment variable that starts with 'custom' and substitute the corresponding value in its target template(s).  Something like:\nfor env_var in $(env | grep '^_custom_'); do  sed -i -e \"s:%${env_var}%:${!env_var}:g\" ${createJobOutput} ; done\n(The '${!' syntax provides the value for a given macro name.)", "author": "tbarnes-us", "createdAt": "2020-07-29T16:29:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwODg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQzMzcxNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837#discussion_r462433715", "bodyText": "(1)\n\n(1) For this to work, I assume there needs to be a corresponding change in create-domain-job-template.yaml that references the %FRONTEND_HOST% and %FRONT_ENDPORT% macros? If the answer is yes. the change is missing from this pull.\n\nThis is part of IDM release. We are providing our samples and templates which include these properties.\n\n(1A) Oh. The point still stands - the macro names should be less^H^H^H^H more specific.\n(1B) But, since this is for an external sample/product, I think this brings the entire pull into question. IMO, external samples and products probably should not directly rely on WKO sample shell scripts and templates. I think the WKO samples and their internals aren't given the same 'backward compatibility' guarantees as WKO's public APIs. They are not an API per se. @rjeberhard @markxnelson Thoughts?\n(1C) If it turns out the pull's use case is still in play even after considering 1B, then I think a different approach may be advisable that supports a more custom 'future' proof method for handling arbitrary inputs from external use cases that want to fine tune a sample. For example, we could document support for any input in the input file that begins with 'custom', and utility.sh could find every environment variable that starts with 'custom' and substitute the corresponding value in its target template(s). Something like:\nfor env_var in $(env | grep '^_custom_'); do sed -i -e \"s:%${env_var}%:${!env_var}:g\" ${createJobOutput} ; done\n(The '${!' syntax provides the value for a given macro name.)\n\nWhat is the current recommendation if any new property needs to be added?", "author": "rishiagarwal-oracle", "createdAt": "2020-07-29T16:34:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwODg3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQzODMwNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1837#discussion_r462438305", "bodyText": "We can make the macro more specific to our product. We see properties already added for FMW infra domains under following comment.\nextra entries for FMW Infra domains\nAlso, in my opinion, point 1C will solve more of our future use cases as well", "author": "tanmaygarg-oracle", "createdAt": "2020-07-29T16:42:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwODg3OQ=="}], "type": "inlineReview"}]}