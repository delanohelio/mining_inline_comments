{"pr_number": 1957, "pr_title": "Owls-84294 handle missing sa in operator install/upgrade", "pr_createdAt": "2020-09-28T20:59:02Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957", "timeline": [{"oid": "5b7790c001a37514cf00d6cf0b12522a999d61dd", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/5b7790c001a37514cf00d6cf0b12522a999d61dd", "message": "check existence of sa in helm templates", "committedDate": "2020-09-22T14:33:59Z", "type": "commit"}, {"oid": "230b670d5d7d2855d1ff729a7a0e1b779cde4109", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/230b670d5d7d2855d1ff729a7a0e1b779cde4109", "message": "Merge remote-tracking branch 'origin/develop' into owls84294-missing-sa-upgrade", "committedDate": "2020-09-23T20:34:14Z", "type": "commit"}, {"oid": "db18d956168cec52c0b29f9846d1fb685ffddab9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/db18d956168cec52c0b29f9846d1fb685ffddab9", "message": "minor product change plus test changes", "committedDate": "2020-09-24T21:36:13Z", "type": "commit"}, {"oid": "255d4ce3b86fb4e22f5d29a6e63e56b352cb0e50", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/255d4ce3b86fb4e22f5d29a6e63e56b352cb0e50", "message": "Merge branch 'owls84294-missing-sa-upgrade' of https://github.com/oracle/weblogic-kubernetes-operator into owls84294-missing-sa-upgrade", "committedDate": "2020-09-24T21:40:39Z", "type": "commit"}, {"oid": "42989e151356f87633ab551ee12f8e7fa2a22d02", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/42989e151356f87633ab551ee12f8e7fa2a22d02", "message": "minor changes", "committedDate": "2020-09-24T22:20:40Z", "type": "commit"}, {"oid": "994e002e094ccaa01b1b111cc07818baac178ae3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/994e002e094ccaa01b1b111cc07818baac178ae3", "message": "more changes", "committedDate": "2020-09-25T17:19:38Z", "type": "commit"}, {"oid": "b1b8c8b46e9d77f7a71643cbaa39d81b05115a7b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b1b8c8b46e9d77f7a71643cbaa39d81b05115a7b", "message": "more doc change", "committedDate": "2020-09-25T17:35:42Z", "type": "commit"}, {"oid": "fc2e1e4b40859b10a5af6ac7b93dfd2f126759c3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fc2e1e4b40859b10a5af6ac7b93dfd2f126759c3", "message": "cleanup", "committedDate": "2020-09-28T02:33:55Z", "type": "commit"}, {"oid": "403c3b98f5aa63512ca28714fe398cebf54f4508", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/403c3b98f5aa63512ca28714fe398cebf54f4508", "message": "minor doc change", "committedDate": "2020-09-28T02:44:49Z", "type": "commit"}, {"oid": "9b12f92500057ade7c460046d8b4e6eab88617de", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9b12f92500057ade7c460046d8b4e6eab88617de", "message": "fine tune doc text", "committedDate": "2020-09-28T13:43:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI0MDczMQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496240731", "bodyText": "add message if it is null", "author": "marinakog", "createdAt": "2020-09-28T21:23:24Z", "path": "integration-tests/src/test/java/oracle/weblogic/kubernetes/ItUsabilityOperatorHelmChart.java", "diffHunk": "@@ -724,8 +730,9 @@ public void testNotPreexistedOpServiceAccountCreateOperatorNegativeInstall() {\n                   condition.getRemainingTimeInMS()))\n           .until(assertDoesNotThrow(() -> operatorIsReady(op2Namespace),\n               \"operatorIsReady failed with ApiException\"));\n-      //comment it out due OWLS-84294, helm does not report failed status\n-      //assertNull(errorMsg, errorMsg);\n+\n+      // Helm reports error message status\n+      assertNotNull(errorMsg);", "originalCommit": "9b12f92500057ade7c460046d8b4e6eab88617de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxMzQzNg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496713436", "bodyText": "done", "author": "doxiao", "createdAt": "2020-09-29T13:24:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI0MDczMQ=="}], "type": "inlineReview"}, {"oid": "1b94aaf4e4450a7935b593d144b1f636a1266fd4", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1b94aaf4e4450a7935b593d144b1f636a1266fd4", "message": "add error messagewq", "committedDate": "2020-09-29T13:22:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxMDk5OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496710998", "bodyText": "Did this cross-ref change? In the 3.0.2 docs, I see https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-operators/#install-helm-and-tiller", "author": "rosemarymarano", "createdAt": "2020-09-29T13:21:34Z", "path": "docs-source/content/security/service-accounts.md", "diffHunk": "@@ -33,5 +33,5 @@ look for the `serviceAccount` value using the Helm command:\n $ helm get values --all weblogic-operator\n ```\n #### Additional reading\n-* [Helm service account]({{<relref \"userguide/managing-operators/_index.md#install-helm-and-tiller\">}})\n+* [Helm service account]({{<relref \"userguide/managing-operators/_index.md#install-helm\">}})", "originalCommit": "9b12f92500057ade7c460046d8b4e6eab88617de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjczMjI1MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496732250", "bodyText": "there is no tiller now because only Helm V3 is supported.", "author": "doxiao", "createdAt": "2020-09-29T13:48:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxMDk5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjczNDQ2MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496734460", "bodyText": "ok, so has someone changed this heading, Install Helm and Tiller?", "author": "rosemarymarano", "createdAt": "2020-09-29T13:51:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxMDk5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc0MzI1NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496743254", "bodyText": "Someone has tried to remove references to tiller, but might have missed this one. The #install-helm-and-tiller section does not exist anymore.", "author": "doxiao", "createdAt": "2020-09-29T14:02:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxMDk5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc0NDU0OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496744548", "bodyText": "I searched the whole doc area and modified everything that still related to tiller. After the changes in this PR, there should not be references to tiller any more.", "author": "doxiao", "createdAt": "2020-09-29T14:04:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxMDk5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc0NTM5OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496745399", "bodyText": "Thank you. And, this section is removed? https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-operators/#install-helm-and-tiller", "author": "rosemarymarano", "createdAt": "2020-09-29T14:05:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxMDk5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgwNzU0OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496807548", "bodyText": "yes, in the develop branch, but I did not see it removed in any of the 3.x releases.", "author": "doxiao", "createdAt": "2020-09-29T15:21:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxMDk5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxODI1OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496718259", "bodyText": "Helm charts validation error.-> Helm chart validation error.", "author": "rosemarymarano", "createdAt": "2020-09-29T13:31:08Z", "path": "docs-source/content/userguide/managing-operators/using-the-operator/using-helm.md", "diffHunk": "@@ -76,6 +76,7 @@ This section describes the details of the operator Helm chart's available config\n \n ##### `serviceAccount`\n Specifies the name of the service account in the operator's namespace that the operator will use to make requests to the Kubernetes API server. You are responsible for creating the service account.\n+The `helm install` or `helm upgrade` command with a non-existing service account results in a Helm charts validation error.", "originalCommit": "9b12f92500057ade7c460046d8b4e6eab88617de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc0NjQ4OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1957#discussion_r496746488", "bodyText": "done", "author": "doxiao", "createdAt": "2020-09-29T14:06:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxODI1OQ=="}], "type": "inlineReview"}, {"oid": "8e71c81c5627c42631a486bedada8bd6fbb23959", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8e71c81c5627c42631a486bedada8bd6fbb23959", "message": "minor doc edit", "committedDate": "2020-09-29T14:06:13Z", "type": "commit"}]}