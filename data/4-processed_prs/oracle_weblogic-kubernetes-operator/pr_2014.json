{"pr_number": 2014, "pr_title": "OWLS 85530: OPERATOR INTROSPECTOR THROWS VALIDATION ERRORS FOR STATIC CLUSTER", "pr_createdAt": "2020-10-28T17:05:55Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2014", "timeline": [{"oid": "09b82d89b4eb5271ffd585733db2cebf8f846153", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/09b82d89b4eb5271ffd585733db2cebf8f846153", "message": "getDynamicServersOrNone doesn't throw exception with 14.1.1.0", "committedDate": "2020-10-26T17:38:53Z", "type": "commit"}, {"oid": "2fbcd68c070b8e771719fc9a72c7ae0437cafb90", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2fbcd68c070b8e771719fc9a72c7ae0437cafb90", "message": "check for ServerTemplate for Dynamic Servers", "committedDate": "2020-10-27T02:47:30Z", "type": "commit"}, {"oid": "2776b272f4a87a7aa37177c120474f9f49162fe1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2776b272f4a87a7aa37177c120474f9f49162fe1", "message": "Check if DynamicServers mbean exist", "committedDate": "2020-10-27T14:24:33Z", "type": "commit"}, {"oid": "d4e541af068cbdfca34dd305d8b156fdf44813bc", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d4e541af068cbdfca34dd305d8b156fdf44813bc", "message": "Add test to introspect configured cluster created by online WLST", "committedDate": "2020-10-28T16:37:43Z", "type": "commit"}, {"oid": "ca403ad56ec194a3d5f3a1b8bf2042b12d297af1", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ca403ad56ec194a3d5f3a1b8bf2042b12d297af1", "message": "Document configured cluster introspection test", "committedDate": "2020-10-28T16:55:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3MjkyNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2014#discussion_r513672924", "bodyText": "Please update the \"Usage:\" and \"Internal Test Flow\" sections of the README file for this test to reflect this check-in's additions.  Also, if it's not too much trouble, please also update the README to discuss the ISTIO_ENABLED flag (I don't recall who added that - maybe Johnny).", "author": "tbarnes-us", "createdAt": "2020-10-28T18:30:32Z", "path": "src/integration-tests/introspector/introspectTest.sh", "diffHunk": "@@ -39,6 +39,12 @@\n #     To check for ISTIO\n #         export ISTIO_ENABELD=true - this only test for Non Model in Image\n #\n+#     To check for introspection of configured clusters with WebLogic 14.1.1.0 image.\n+#     NOTE: Test for introspection of configured clusters only for Non Model in Image.\n+#\n+#         export WEBLOGIC_IMAGE_TAG=14.1.1.0\n+#         introspectTest.sh", "originalCommit": "ca403ad56ec194a3d5f3a1b8bf2042b12d297af1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc3MTk4NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2014#discussion_r513771985", "bodyText": "Looks good! Thanks!", "author": "tbarnes-us", "createdAt": "2020-10-28T21:28:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3MjkyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3OTA0NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2014#discussion_r513679045", "bodyText": "Does the static cluster in this test need to be dynamically added?  it could be added via off-line WLST in the existing wl-create-domain-pod.pyt file.  If that's fine, then there'd be no need for introspectTest.sh to be updated to rerun the introspector, and no need to run this file -- the first run of the introspector would cover the issue under test.", "author": "tbarnes-us", "createdAt": "2020-10-28T18:40:58Z", "path": "src/integration-tests/introspector/createStaticCluster.py", "diffHunk": "@@ -0,0 +1,50 @@\n+# Copyright (c) 2018, 2020, Oracle Corporation and/or its affiliates.", "originalCommit": "ca403ad56ec194a3d5f3a1b8bf2042b12d297af1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY5NjkyNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2014#discussion_r513696925", "bodyText": "The interesting thing is that creating a static cluster via off-line produces the following cluster configuration:\n<cluster>\n  <name>c1</name>\n  <cluster-messaging-mode>unicast</cluster-messaging-mode>\n</cluster>\n\nwhereas on-line WLST produces:\n<cluster>\n    <name>c1</name>\n    <cluster-messaging-mode>unicast</cluster-messaging-mode>\n    <dynamic-servers>\n      <maximum-dynamic-server-count>0</maximum-dynamic-server-count>\n    </dynamic-servers>\n  </cluster>\n\nThe call to ClusterMBean.getDynamicServers() returns a DynamicServersMBean.  Hence, the reason I created the cluster using on-line WLST and rerun the introspector in order to test this issue.", "author": "lennyphan", "createdAt": "2020-10-28T19:11:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3OTA0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzcwMjgyOQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2014#discussion_r513702829", "bodyText": "Oh. That's ugly and helps explain why we haven't seen the problem before. Sigh.\nTo prevent someone from mistakenly 'cleaning up' the test code in the future, please add a comment in this script and also in one or two key places in the main script.  The comment should be something like:\n// NOTE: The static cluster must be configured using on-line WLST instead of off-line WLST in order to reproduce OWLS 85530.", "author": "tbarnes-us", "createdAt": "2020-10-28T19:22:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3OTA0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc3MTg1Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2014#discussion_r513771853", "bodyText": "Looks good! Thanks.", "author": "tbarnes-us", "createdAt": "2020-10-28T21:27:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY3OTA0NQ=="}], "type": "inlineReview"}, {"oid": "0af280f3625176cfc03a21869ec6ecec594317c6", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/0af280f3625176cfc03a21869ec6ecec594317c6", "message": "documentation updates to README and referencing JIRA OWLS-85530", "committedDate": "2020-10-28T21:19:38Z", "type": "commit"}]}