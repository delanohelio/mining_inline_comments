{"pr_number": 2065, "pr_title": "Update the Default Voyager version from 10.0.0 to 12.0.0 ", "pr_createdAt": "2020-11-20T18:36:29Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065", "timeline": [{"oid": "1b329f5fbd5d8c7beb9160c0523b3cdce363264e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1b329f5fbd5d8c7beb9160c0523b3cdce363264e", "message": "Upgrade the default Voyager version to 12.0.0", "committedDate": "2020-11-19T03:18:33Z", "type": "commit"}, {"oid": "a6175fd8cbc08a34593e0442858066777a968d26", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/a6175fd8cbc08a34593e0442858066777a968d26", "message": "updated the doc", "committedDate": "2020-11-20T01:42:11Z", "type": "commit"}, {"oid": "d1079c16d4f7efd23c18e08eb81df201b1005745", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d1079c16d4f7efd23c18e08eb81df201b1005745", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into lb-update", "committedDate": "2020-11-20T18:26:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2Mzk5Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527963992", "bodyText": "This should be:\nif [ \"$(helm list --namespace $NSPACE| grep $NNAME |  wc -l)\" = 0 ]; then", "author": "xiancao", "createdAt": "2020-11-20T20:52:47Z", "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -216,7 +245,8 @@ function createNginx() {\n \n   if [ \"$(helm list --namespace $NNAME | grep $NNAME |  wc -l)\" = 0 ]; then", "originalCommit": "d1079c16d4f7efd23c18e08eb81df201b1005745", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODg2NDg2Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r528864863", "bodyText": "done", "author": "anpanigr", "createdAt": "2020-11-23T17:11:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2Mzk5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NDQyMQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527964421", "bodyText": "You can put these in one line", "author": "xiancao", "createdAt": "2020-11-20T20:53:48Z", "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -228,7 +258,9 @@ function createNginx() {\n   count=0\n   tpod=$(kubectl get po -n ${NSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${NSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${NSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')", "originalCommit": "d1079c16d4f7efd23c18e08eb81df201b1005745", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgzNjc1NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r528836754", "bodyText": "done", "author": "anpanigr", "createdAt": "2020-11-23T16:30:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NDQyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NDc4MQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527964781", "bodyText": "typo here:\ninginx -> nginx", "author": "xiancao", "createdAt": "2020-11-20T20:54:37Z", "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -264,7 +296,7 @@ function main() {\n     usage\n   fi\n   if [ \"$2\" != traefik ] && [ \"$2\" != voyager ] && [ \"$2\" != nginx ]; then\n-    echo \"[ERROR] The second  parameter MUST be either traefik or voyager or inginx \"\n+    echo \"[ERROR] The second parameter MUST be either traefik, voyager or inginx \"", "originalCommit": "d1079c16d4f7efd23c18e08eb81df201b1005745", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgzNjk3NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r528836975", "bodyText": "fixed the typo", "author": "anpanigr", "createdAt": "2020-11-23T16:31:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NDc4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NTA5NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527965094", "bodyText": "You can put these in one line", "author": "xiancao", "createdAt": "2020-11-20T20:55:14Z", "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -71,17 +72,43 @@ function createVoyager() {\n   count=0\n   vpod=$(kubectl get po -n ${VSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${VSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${VSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')", "originalCommit": "d1079c16d4f7efd23c18e08eb81df201b1005745", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgzNjQ2Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r528836466", "bodyText": "done", "author": "anpanigr", "createdAt": "2020-11-23T16:30:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NTA5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NTk0MQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527965941", "bodyText": "You can put these in one line", "author": "xiancao", "createdAt": "2020-11-20T20:57:08Z", "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -71,17 +72,43 @@ function createVoyager() {\n   count=0\n   vpod=$(kubectl get po -n ${VSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${VSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${VSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')\n+    if [ ${status} == \"1/1\" ]; then\n       echo \"Voyager operator pod is running now.\"\n       kubectl get pod/${vpod} -n ${VSPACE}\n-      exit 0;\n+      break;\n     fi\n     count=`expr $count + 1`\n     sleep 2\n   done\n-  echo \"ERROR: Voyager operator pod failed to start.\"\n-  kubectl describe pod/${vpod}  -n ${VSPACE}\n-  exit 1\n+  if test $count -eq $max; then\n+    echo \"ERROR: Voyager operator pod failed to start.\"\n+    exit 1\n+  fi\n+  kubectl describe pod/${vpod} -n ${VSPACE}\n+  helm list -n ${VSPACE}\n+  \n+  max=20\n+  count=0\n+  crd=\"ingresses.voyager.appscode.com\"\n+  echo \"Checking availability of Custom Resource Definition [${crd}]\"\n+  while test $count -lt $max; do\n+   obj=$(kubectl get crd ${crd} -n ${VSPACE} \\\n+          --no-headers 2>/dev/null | awk '{print $1}')", "originalCommit": "d1079c16d4f7efd23c18e08eb81df201b1005745", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgzNjUyNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r528836524", "bodyText": "done", "author": "anpanigr", "createdAt": "2020-11-23T16:30:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NTk0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NjE1MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527966150", "bodyText": "you can put these in one line", "author": "xiancao", "createdAt": "2020-11-20T20:57:37Z", "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -115,7 +142,9 @@ function createTraefik() {\n   count=0\n   tpod=$(kubectl get po -n ${TSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${TSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${TSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')", "originalCommit": "d1079c16d4f7efd23c18e08eb81df201b1005745", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgzNjYwMQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r528836601", "bodyText": "done", "author": "anpanigr", "createdAt": "2020-11-23T16:30:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2NjE1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2Njc0OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r527966749", "bodyText": "change this to:\nkubectl exec -it $tpod -n ${NSPACE} -- /nginx-ingress-controller --version``", "author": "xiancao", "createdAt": "2020-11-20T20:59:00Z", "path": "kubernetes/samples/charts/util/setupLoadBalancer.sh", "diffHunk": "@@ -228,7 +258,9 @@ function createNginx() {\n   count=0\n   tpod=$(kubectl get po -n ${NSPACE} --no-headers | awk '{print $1}')\n   while test $count -lt $max; do\n-    if test \"$(kubectl get po -n ${NSPACE} --no-headers | awk '{print $2}')\" = 1/1; then\n+    status=$(kubectl get po -n ${NSPACE} --no-headers 2> /dev/null \\\n+                | awk '{print $2}')\n+    if [ ${status} == \"1/1\" ]; then\n       echo \"Nginx operator pod is running now.\"\n       kubectl get pod/${tpod} -n ${NSPACE}\n       kubectl exec -it $tpod -n nginx -- /nginx-ingress-controller --version``", "originalCommit": "d1079c16d4f7efd23c18e08eb81df201b1005745", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODgzNjgyNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2065#discussion_r528836824", "bodyText": "done", "author": "anpanigr", "createdAt": "2020-11-23T16:30:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk2Njc0OQ=="}], "type": "inlineReview"}, {"oid": "3dcca4d2de6424847c8bdfe48ed6f9187e912f8d", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3dcca4d2de6424847c8bdfe48ed6f9187e912f8d", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into lb-update", "committedDate": "2020-11-23T15:17:26Z", "type": "commit"}, {"oid": "8814b385514b5f8d240e4f4afa1776aa44fd0531", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8814b385514b5f8d240e4f4afa1776aa44fd0531", "message": "address review comments", "committedDate": "2020-11-23T16:25:37Z", "type": "commit"}, {"oid": "50bdea540a03d2ac7eda1f8a3635e9c27eb47f9a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/50bdea540a03d2ac7eda1f8a3635e9c27eb47f9a", "message": "More change to script", "committedDate": "2020-11-23T17:09:51Z", "type": "commit"}]}