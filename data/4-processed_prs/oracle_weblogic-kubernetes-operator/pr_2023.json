{"pr_number": 2023, "pr_title": "Added maven profile to run a set of integration tests for the new image certification", "pr_createdAt": "2020-10-30T18:54:42Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023", "timeline": [{"oid": "75b961c1fedcf19227581248dfdde99aecbe21f9", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/75b961c1fedcf19227581248dfdde99aecbe21f9", "message": "Added maven profile to run a set of integration tests for the new image certification", "committedDate": "2020-10-30T18:41:47Z", "type": "commit"}, {"oid": "1295bff6ee9797ea52603bbf684fa38b13afbe73", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1295bff6ee9797ea52603bbf684fa38b13afbe73", "message": "Merge branch 'develop' of https://github.com/oracle/weblogic-kubernetes-operator into maven-image-verify", "committedDate": "2020-10-30T21:56:34Z", "type": "commit"}, {"oid": "051c8395577b047ee0d9cd0fee3df1bf96705dd3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/051c8395577b047ee0d9cd0fee3df1bf96705dd3", "message": "Enabled verify-images-tests in kindtest.sh", "committedDate": "2020-10-30T22:20:26Z", "type": "commit"}, {"oid": "9c922a556ddbd404df7a359e52a7c4979b351fd3", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9c922a556ddbd404df7a359e52a7c4979b351fd3", "message": "Changed the newly added option from boolean to string in kindtest.sh", "committedDate": "2020-11-02T20:02:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzMzczNQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r516933735", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            verify_image_run=\"false\"\n          \n          \n            \n            maven_profile_name=\"integration-tests\"", "author": "vanajamukkara", "createdAt": "2020-11-03T20:22:06Z", "path": "kindtest.sh", "diffHunk": "@@ -73,6 +75,7 @@ parallel_run=\"false\"\n threads=\"2\"\n wdt_download_url=\"https://github.com/oracle/weblogic-deploy-tooling/releases/latest\"\n wit_download_url=\"https://github.com/oracle/weblogic-image-tool/releases/latest\"\n+verify_image_run=\"false\"", "originalCommit": "9c922a556ddbd404df7a359e52a7c4979b351fd3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzAwNzgzOQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r517007839", "bodyText": "fixed", "author": "hzhao-github", "createdAt": "2020-11-03T23:06:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzMzczNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzMzkxMw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r516933913", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                m) verify_image_run=\"${OPTARG}\"\n          \n          \n            \n                m) maven_profile_name=\"${OPTARG}\"", "author": "vanajamukkara", "createdAt": "2020-11-03T20:22:27Z", "path": "kindtest.sh", "diffHunk": "@@ -94,6 +97,8 @@ while getopts \":h:n:o:t:v:c:x:p:d:i:\" opt; do\n     ;;\n     i) wit_download_url=\"${OPTARG}\"\n     ;;\n+    m) verify_image_run=\"${OPTARG}\"", "originalCommit": "9c922a556ddbd404df7a359e52a7c4979b351fd3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzAwNzkzNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r517007937", "bodyText": "fixed", "author": "hzhao-github", "createdAt": "2020-11-03T23:07:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzMzkxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzOTUyNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r516939527", "bodyText": "you don't need this condition, use ${maven_profile_name} in the mvn command", "author": "vanajamukkara", "createdAt": "2020-11-03T20:33:59Z", "path": "kindtest.sh", "diffHunk": "@@ -237,9 +242,19 @@ rm -rf \"${RESULT_ROOT:?}/*\"\n \n echo 'Run tests...'\n if [ \"${test_filter}\" = \"ItOperatorUpgrade\" ] || [ \"${parallel_run}\" = \"false\" ]; then\n-  echo \"Running mvn -Dit.test=${test_filter} -Dwdt.download.url=${wdt_download_url} -Dwit.download.url=${wit_download_url} -pl integration-tests -P integration-tests verify\"\n-  time mvn -Dit.test=\"${test_filter}\" -Dwdt.download.url=\"${wdt_download_url}\" -Dwit.download.url=\"${wit_download_url}\" -pl integration-tests -P integration-tests verify 2>&1 | tee \"${RESULT_ROOT}/kindtest.log\"\n+  if [ \"${verify_image_run}\" != \"verify-images-tests\" ]; then", "originalCommit": "9c922a556ddbd404df7a359e52a7c4979b351fd3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5NjkwOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r516996908", "bodyText": "true. Thanks", "author": "hzhao-github", "createdAt": "2020-11-03T22:38:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzOTUyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzAwNzk4Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r517007987", "bodyText": "fixed", "author": "hzhao-github", "createdAt": "2020-11-03T23:07:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjkzOTUyNw=="}], "type": "inlineReview"}, {"oid": "9c305b2e96b20a2ea999bd466cd58ed73ddbe517", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/9c305b2e96b20a2ea999bd466cd58ed73ddbe517", "message": "Added one more profile", "committedDate": "2020-11-03T22:37:18Z", "type": "commit"}, {"oid": "b7f97ec3c94a4808d4475c45fda3cf375bc34fb8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/b7f97ec3c94a4808d4475c45fda3cf375bc34fb8", "message": "Added one more profile", "committedDate": "2020-11-03T23:04:06Z", "type": "commit"}, {"oid": "ffd9ca6d9fc21c8b06d7cae5028194368009f412", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/ffd9ca6d9fc21c8b06d7cae5028194368009f412", "message": "Changed project name", "committedDate": "2020-11-05T03:11:26Z", "type": "commit"}, {"oid": "d8740ed958dd63e338c6ca41b097909e40e12140", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/d8740ed958dd63e338c6ca41b097909e40e12140", "message": "A small fix", "committedDate": "2020-11-05T18:23:44Z", "type": "commit"}, {"oid": "8935522ba193e9592072809700ad94d833de603b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8935522ba193e9592072809700ad94d833de603b", "message": "Changed test filter", "committedDate": "2020-11-06T05:19:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc5MDUyNg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r518790526", "bodyText": "if (maven_profile_name)  is not defined  (the current behaviour) what path it should follows ?  It should default to current behavior  where it does not take any maven profile.", "author": "anpanigr", "createdAt": "2020-11-06T14:36:01Z", "path": "kindtest.sh", "diffHunk": "@@ -235,11 +242,18 @@ export JAVA_HOME=\"${JAVA_HOME:-`type -p java|xargs readlink -f|xargs dirname|xar\n echo 'Clean up result root...'\n rm -rf \"${RESULT_ROOT:?}/*\"\n \n-echo 'Run tests...'\n+echo 'Determine test filter ...'\n+if [ \"${maven_profile_name}\" = \"wls-image-cert\" ]; then\n+  test_filter=\"${test_filter_wls}\"\n+elif [ \"${maven_profile_name}\" = \"fmw-image-cert\" ]; then\n+  test_filter=\"${test_filter_fmw}\"\n+fi", "originalCommit": "8935522ba193e9592072809700ad94d833de603b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg4ODMwMg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r518888302", "bodyText": "default is test_filter=\"**/It*\" in line 72", "author": "hzhao-github", "createdAt": "2020-11-06T17:11:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc5MDUyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg4MjgxOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/2023#discussion_r518882818", "bodyText": "these are defined in the profile, you don't have to set here", "author": "vanajamukkara", "createdAt": "2020-11-06T17:01:15Z", "path": "kindtest.sh", "diffHunk": "@@ -68,13 +70,16 @@ else\n   outdir=\"${WORKSPACE}/logdir/${BUILD_TAG}\"\n fi\n test_filter=\"**/It*\"\n+test_filter_wls=\"**/ItParameterizedDomain.java,**/ItServerStartPolicy.java,**/ItMiiUpdateDomainConfig.java,**/ItIntrospectVersion.java,**/ItMiiSample.java,**/ItJrfDomainInPV.java,**/ItStickySession.java,**/ItSessionMigration.java\"", "originalCommit": "8935522ba193e9592072809700ad94d833de603b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2fc8233a67ba984e23c65fe457547fd1818c940a", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/2fc8233a67ba984e23c65fe457547fd1818c940a", "message": "Debug", "committedDate": "2020-11-06T17:46:05Z", "type": "commit"}, {"oid": "09520e39774871ccf01e26a35f685966e5dc5cd8", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/09520e39774871ccf01e26a35f685966e5dc5cd8", "message": "Removed test filter for the profile", "committedDate": "2020-11-06T19:23:15Z", "type": "commit"}]}