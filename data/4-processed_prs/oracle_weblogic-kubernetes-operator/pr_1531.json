{"pr_number": 1531, "pr_title": "Merge from develop to model-in-image with conflict resolution", "pr_createdAt": "2020-04-03T16:30:14Z", "pr_url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531", "timeline": [{"oid": "bcad5af70b44a179cdc2ce3dceb45ad0a677ffb0", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/bcad5af70b44a179cdc2ce3dceb45ad0a677ffb0", "message": "OWLS-80522 Domain status ordering, OWLS-80144 Ordered rolling upgrade (#1503)\n\n* Domain.getServers() should return servers in order\r\n\r\n* ordered rolling upgrade\r\n\r\n* minor test fix\r\n\r\n* new RollingHelperTest\r\n\r\n* update getSortingString to handle up to 20 digits\r\n\r\n* rolling upgrade clusters sorted by cluster names\r\n\r\n* add isAdminServer to ServerStatus\r\n\r\n* ServerStatus isAdminServer excluded from json schema\r\n\r\n* ClusterStatus sorted by sorting name\r\n\r\n* getClusters returning sorted clusters\r\n\r\n* add unit tests\r\n\r\n* handle null map", "committedDate": "2020-03-28T17:49:23Z", "type": "commit"}, {"oid": "32136563c23002bd9e272db0ac8ad0ff574be85f", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/32136563c23002bd9e272db0ac8ad0ff574be85f", "message": "Enhance Helm chart deletion Logic in cleanup.sh Script   (#1517)\n\n* Enhance the clean up Script to support Helm 2/3\r\n\r\n* Addressed the review comment\r\n\r\nCo-authored-by: ANTARYAMI.PANIGRAHI@ORACLE.COM <anpanigr@anpanigr-1.subnet1ad2phx.devweblogicphx.oraclevcn.com>", "committedDate": "2020-03-31T00:48:57Z", "type": "commit"}, {"oid": "498c234c28490f4f6f66a38fcedbf8a456c68c6e", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/498c234c28490f4f6f66a38fcedbf8a456c68c6e", "message": "Added test for domainQualifier=true, added cleanup for intermittent failures (#1513)\n\n* added support for helm 3.0\r\n\r\n* added check for repo\r\n\r\n* moved from monitoring ns\r\n\r\n* added the test\r\n\r\n* fixed style\r\n\r\n* added missed file\r\n\r\n* added condition for ver\r\n\r\n* rework to avoid interm failures\r\n\r\n* fixed docs\r\n\r\n* updated version of MonExp", "committedDate": "2020-03-31T13:49:26Z", "type": "commit"}, {"oid": "fc82fa11955ab5f680d0029829fad19163d4488b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/fc82fa11955ab5f680d0029829fad19163d4488b", "message": "Stub the ApiClient in tests that get connections but where this was not already done. (#1519)", "committedDate": "2020-04-01T13:16:57Z", "type": "commit"}, {"oid": "3e2d1d6a0102281b9742bf1e7028c4ae1a7ba2c5", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/3e2d1d6a0102281b9742bf1e7028c4ae1a7ba2c5", "message": "Enhance the cleanup script to include deletion of few namesapce(s) created by Integration Tests (#1523)\n\nCo-authored-by: ANTARYAMI.PANIGRAHI@ORACLE.COM <anpanigr@anpanigr-1.subnet1ad2phx.devweblogicphx.oraclevcn.com>", "committedDate": "2020-04-01T13:23:20Z", "type": "commit"}, {"oid": "857bfc56efce18ea481cf709f83a008a26973d40", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/857bfc56efce18ea481cf709f83a008a26973d40", "message": "overall doc edits (#1518)\n\n* overall doc edits\r\n\r\n* fix a mistake I created\r\n\r\n* update Kubernetes prereqs\r\n\r\n* incorporate edits from Ryan and Mark\r\n\r\n* fix typo\r\n\r\n* fix my mistake\r\n\r\n* minor fixes", "committedDate": "2020-04-02T19:00:16Z", "type": "commit"}, {"oid": "103e0866de73a0235cc7b87a70fefa24b9479841", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/103e0866de73a0235cc7b87a70fefa24b9479841", "message": "Disable preserveUnknownFields", "committedDate": "2020-04-03T13:38:56Z", "type": "commit"}, {"oid": "8f9225247231add8fca45faf2ed746a03daa4586", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/8f9225247231add8fca45faf2ed746a03daa4586", "message": "Merge remote-tracking branch 'origin/develop' into develop-mii-merge", "committedDate": "2020-04-03T16:24:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODYxMA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403138610", "bodyText": "This is a side note for @rosemarymarano :    We know that this relref syntax doesn't quite work - it'll redirect to the top of the file instead of to the specified # location.   You need to pretend there's an \"_index.md\" file in the directory even if there isn't, and do this instead: /security/domain-security/image-protection/_index.md#weblogic-domain-in-docker-image-protection.", "author": "tbarnes-us", "createdAt": "2020-04-03T16:45:48Z", "path": "docs-source/content/samples/simple/domains/domain-home-in-image/_index.md", "diffHunk": "@@ -66,9 +66,8 @@ The script will perform the following steps:\n   in the registry (for example, Oracle Cloud Infrastructure Registry, Docker Hub, and such) as\n   this image contains sensitive information about the domain including keys and\n   credentials that are used to access external resources (for example, data source password).\n-  For more information about\n-  [domain home in image protection]({{<relref \"/security/domain-security/image-protection.md#weblogic-domain-in-docker-image-protection\">}}),\n-  see the ***Security*** section.\n+  For more information, see\n+  [WebLogic domain in Docker image protection]({{<relref \"/security/domain-security/image-protection.md#weblogic-domain-in-docker-image-protection\">}}).", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODg5NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403138894", "bodyText": "I saw a couple of others of these.  We should come up with a grep expression to suss them out and then fix 'em.", "author": "tbarnes-us", "createdAt": "2020-04-03T16:46:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODYxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE1MjAxOA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403152018", "bodyText": "you can just remove the .md after image-protection and it works fine", "author": "markxnelson", "createdAt": "2020-04-03T17:04:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODYxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE2OTA1Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403169052", "bodyText": "Okay, I'll test removing the \".md\" and do the grep.", "author": "rjeberhard", "createdAt": "2020-04-03T17:24:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODYxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzIxODk0Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403218947", "bodyText": "According to the documentation, you should use the \".md\"... https://gohugo.io/content-management/cross-references/#use-ref-and-relref", "author": "rjeberhard", "createdAt": "2020-04-03T18:21:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODYxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzIzMDk1OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403230959", "bodyText": "I've tested this here and cannot find a combination that works", "author": "rjeberhard", "createdAt": "2020-04-03T18:36:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODYxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzI0MjYzOQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403242639", "bodyText": "I'm not going to fix this in this PR as it's not working for me, so I can't test that I have it right :)", "author": "rjeberhard", "createdAt": "2020-04-03T18:52:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODYxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODIyMA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403138220", "bodyText": "what if it is an earlier version? this might give the wrong behavior", "author": "markxnelson", "createdAt": "2020-04-03T16:45:08Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/ItMonitoringExporter.java", "diffHunk": "@@ -677,9 +675,33 @@ private void test13_ReplaceMetricsNameSnakeCaseFalseConfiguration() throws Excep\n   }\n \n   /**\n-   * Try to change monitoring exporter configuration without authentication.\n+   * Test to replace monitoring exporter configuration with configuration file with\n+   * domainQualifier=true.\n    *\n-   * @throws Exception exception\n+   * @throws Exception if failed to apply configuration or check the expected values.\n+   */\n+  private void test19_ReplaceMetricsDomainQualifierTrueConfiguration() throws Exception {\n+    Assumptions.assumeTrue(FULLTEST);\n+    String testMethodName = new Object() {\n+    }.getClass().getEnclosingMethod().getName();\n+    logTestBegin(testMethodName);\n+    HtmlPage page =\n+        submitConfigureForm(exporterUrl, \"replace\", configPath + \"/rest_domainqualtrue.yml\");\n+    assertNotNull(page);\n+    LoggerHelper.getLocal().log(Level.INFO, \"page - \" + page.asText());\n+    assertTrue(page.asText().contains(\"domainQualifier\"));\n+    //1.1.1 does not contain the fix for parsing error in prometheus\n+    if (!MONITORING_EXPORTER_VERSION.equals(\"1.1.1\")) {", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzI0NTY2OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403245668", "bodyText": "@marinakog, can you please answer?", "author": "rjeberhard", "createdAt": "2020-04-03T18:57:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODIyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM0NDY2Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403344666", "bodyText": "https://jira.****/jira/browse/OWLS-80941", "author": "rjeberhard", "createdAt": "2020-04-03T21:27:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODIyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM0OTY3OA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403349678", "bodyText": "1.1.1 is earlier version of exporter , I put it because at that time the new release was not posted, to avoid develop breakage. For now the fix is in 1.1.2 so we can remove if condition .", "author": "marinakog", "createdAt": "2020-04-03T21:40:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODIyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODgwNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403138804", "bodyText": "this seems odd - why only retry once? does this fail often?", "author": "markxnelson", "createdAt": "2020-04-03T16:46:08Z", "path": "integration-tests/src/test/java/oracle/kubernetes/operator/ItMonitoringExporter.java", "diffHunk": "@@ -927,32 +949,31 @@ private void changeConfigNegativeAuth(\n       String effect, String configFile, String expectedErrorMsg, String username, String password)\n       throws Exception {\n     try {\n-      HtmlPage page = submitConfigureForm(exporterUrl, effect, configFile, username, password);\n+      final WebClient webClient = new WebClient();\n+      setCredentials(webClient, username, password);\n+      HtmlPage page = submitConfigureForm(exporterUrl, effect, configFile, webClient);\n       throw new RuntimeException(\"Expected exception was not thrown \");\n     } catch (FailingHttpStatusCodeException ex) {\n       assertTrue((ex.getMessage()).contains(expectedErrorMsg));\n     }\n   }\n \n-  private HtmlPage submitConfigureForm(\n-      String exporterUrl, String effect, String configFile, String username, String password)\n-      throws Exception {\n-    final WebClient webClient = new WebClient();\n-    setCredentials(webClient, username, password);\n-    return submitConfigureForm(exporterUrl, effect, configFile, webClient);\n-  }\n-\n   private HtmlPage submitConfigureForm(String exporterUrl, String effect, String configFile)\n       throws Exception {\n     final WebClient webClient = new WebClient();\n+    webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);\n     setCredentials(webClient);\n     return submitConfigureForm(exporterUrl, effect, configFile, webClient);\n   }\n \n   private HtmlPage submitConfigureForm(\n       String exporterUrl, String effect, String configFile, WebClient webClient) throws Exception {\n     // Get the first page\n-    final HtmlPage page1 = webClient.getPage(exporterUrl);\n+    HtmlPage page1 = webClient.getPage(exporterUrl);", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzI0NTc3MA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403245770", "bodyText": "@marinakog, can you please answer?", "author": "rjeberhard", "createdAt": "2020-04-03T18:57:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODgwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM0NTA4OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403345089", "bodyText": "https://jira.****/jira/browse/OWLS-80942", "author": "rjeberhard", "createdAt": "2020-04-03T21:28:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODgwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM0NzU1Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403347556", "bodyText": "it does not fail often, once in 2 weeks or so in the external Jen job, so added one more try if server is too busy", "author": "marinakog", "createdAt": "2020-04-03T21:34:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzODgwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzOTAwNA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403139004", "bodyText": "this appears to be a new file, so should only list 2020", "author": "markxnelson", "createdAt": "2020-04-03T16:46:30Z", "path": "integration-tests/src/test/resources/exporter/rest_domainqualtrue.yml", "diffHunk": "@@ -0,0 +1,23 @@\n+# Copyright (c) 2019, 2020, Oracle Corporation and/or its affiliates.", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzOTg4Mg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403139882", "bodyText": "might be nice to include a link to an explanation of this - i googled that phrase and found nothing that seemed related", "author": "markxnelson", "createdAt": "2020-04-03T16:48:11Z", "path": "operator/src/main/java/oracle/kubernetes/utils/OperatorUtils.java", "diffHunk": "@@ -19,4 +25,84 @@ public static String joinListGrammatically(final List<String> list) {\n             .concat(list.get(list.size() - 1))\n         : list.get(0);\n   }\n+\n+  /**\n+   * Create a Map using the elements from the given map, with their keys sorted\n+   * using the 'numero lexi sorting name'.", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE4NTg1NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403185854", "bodyText": "See pull #1503", "author": "tbarnes-us", "createdAt": "2020-04-03T17:43:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzOTg4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE4NjE1Mw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403186153", "bodyText": "It's a made up term.  Feel free to come up with a better one.", "author": "tbarnes-us", "createdAt": "2020-04-03T17:44:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzOTg4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzI0NjY5Nw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403246697", "bodyText": "Does it mean numbers and then letters?", "author": "rjeberhard", "createdAt": "2020-04-03T18:58:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzOTg4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM0NjA0OQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403346049", "bodyText": "https://jira.****/jira/browse/OWLS-80943", "author": "rjeberhard", "createdAt": "2020-04-03T21:30:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzOTg4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM1MzU0NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403353544", "bodyText": "there is some description in the comment of getSortingString method in the same class", "author": "alai8", "createdAt": "2020-04-03T21:50:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzEzOTg4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MDE0NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403140144", "bodyText": "2 -> two", "author": "markxnelson", "createdAt": "2020-04-03T16:48:37Z", "path": "operator/src/main/java/oracle/kubernetes/utils/OperatorUtils.java", "diffHunk": "@@ -19,4 +25,84 @@ public static String joinListGrammatically(final List<String> list) {\n             .concat(list.get(list.size() - 1))\n         : list.get(0);\n   }\n+\n+  /**\n+   * Create a Map using the elements from the given map, with their keys sorted\n+   * using the 'numero lexi sorting name'.\n+   *\n+   * @param map Map containing elements to be sorted by the keys\n+   * @param <T> Type of map entries\n+   * @return A sorted Map containing the elements from the give map\n+   */\n+  public static <T> Map<String, T> createSortedMap(Map<String, T> map) {\n+    if (map == null) {\n+      return Collections.emptyMap();\n+    }\n+    return map.entrySet()\n+        .stream()\n+        .sorted(Comparator\n+            .comparing((Entry<String, T> entry) -> getSortingString(entry.getKey())))\n+        .collect(Collectors.toMap(\n+            Map.Entry::getKey,\n+            Map.Entry::getValue,\n+            (oldValue, newValue) -> oldValue, LinkedHashMap::new));\n+  }\n+\n+  /**\n+   * Compare the 'numero lexi sorting name' as defined in {@link #getSortingString(String)} of the\n+   * given 2 Strings.", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MDQwNw==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403140407", "bodyText": "extra * in there -- is that an unintentional mistake?", "author": "markxnelson", "createdAt": "2020-04-03T16:49:06Z", "path": "operator/src/main/java/oracle/kubernetes/utils/OperatorUtils.java", "diffHunk": "@@ -19,4 +25,84 @@ public static String joinListGrammatically(final List<String> list) {\n             .concat(list.get(list.size() - 1))\n         : list.get(0);\n   }\n+\n+  /**\n+   * Create a Map using the elements from the given map, with their keys sorted\n+   * using the 'numero lexi sorting name'.\n+   *\n+   * @param map Map containing elements to be sorted by the keys\n+   * @param <T> Type of map entries\n+   * @return A sorted Map containing the elements from the give map\n+   */\n+  public static <T> Map<String, T> createSortedMap(Map<String, T> map) {\n+    if (map == null) {\n+      return Collections.emptyMap();\n+    }\n+    return map.entrySet()\n+        .stream()\n+        .sorted(Comparator\n+            .comparing((Entry<String, T> entry) -> getSortingString(entry.getKey())))\n+        .collect(Collectors.toMap(\n+            Map.Entry::getKey,\n+            Map.Entry::getValue,\n+            (oldValue, newValue) -> oldValue, LinkedHashMap::new));\n+  }\n+\n+  /**\n+   * Compare the 'numero lexi sorting name' as defined in {@link #getSortingString(String)} of the\n+   * given 2 Strings.\n+   *\n+   * @param str1 First string for comparison\n+   * @param str2 Second string for comparison\n+   * @return a negative integer, zero, or a positive integer as the sorting name of str1 * is less", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MDg4Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403140886", "bodyText": "i guess i would question if we really need to implement a sort algorithm???", "author": "markxnelson", "createdAt": "2020-04-03T16:49:58Z", "path": "operator/src/main/java/oracle/kubernetes/utils/OperatorUtils.java", "diffHunk": "@@ -19,4 +25,84 @@ public static String joinListGrammatically(final List<String> list) {\n             .concat(list.get(list.size() - 1))\n         : list.get(0);\n   }\n+\n+  /**\n+   * Create a Map using the elements from the given map, with their keys sorted\n+   * using the 'numero lexi sorting name'.\n+   *\n+   * @param map Map containing elements to be sorted by the keys\n+   * @param <T> Type of map entries\n+   * @return A sorted Map containing the elements from the give map\n+   */\n+  public static <T> Map<String, T> createSortedMap(Map<String, T> map) {\n+    if (map == null) {\n+      return Collections.emptyMap();\n+    }\n+    return map.entrySet()\n+        .stream()\n+        .sorted(Comparator\n+            .comparing((Entry<String, T> entry) -> getSortingString(entry.getKey())))\n+        .collect(Collectors.toMap(\n+            Map.Entry::getKey,\n+            Map.Entry::getValue,\n+            (oldValue, newValue) -> oldValue, LinkedHashMap::new));\n+  }\n+\n+  /**\n+   * Compare the 'numero lexi sorting name' as defined in {@link #getSortingString(String)} of the\n+   * given 2 Strings.\n+   *\n+   * @param str1 First string for comparison\n+   * @param str2 Second string for comparison\n+   * @return a negative integer, zero, or a positive integer as the sorting name of str1 * is less\n+   *     than, equal to, or greater than the sorting name of str2.\n+   */\n+  public static int compareSortingStrings(String str1, String str2) {\n+    if (str1 == null || str2 == null) {\n+      if (str2 != null) {\n+        return -1;\n+      } else if (str1 != null) {\n+        return 1;\n+      }\n+      return 0;\n+    }\n+    return getSortingString(str1).compareTo(getSortingString(str2));\n+  }\n+\n+  /**", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MTI4Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403141286", "bodyText": "did you write this, or copy it from somewhere? if you copied it, we need attribution, and we need to check licenses and copyrights.", "author": "markxnelson", "createdAt": "2020-04-03T16:50:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MDg4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE4MTcxMg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403181712", "bodyText": "This is new and it's definitely needed.\nThe domain status was listing information in a random order, and the rolls were in a random order.", "author": "tbarnes-us", "createdAt": "2020-04-03T17:39:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MDg4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE4MzYxMQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403183611", "bodyText": "It comes from pull OWLS-80522 Domain status ordering, OWLS-80144 Ordered rolling upgrade.  #1503", "author": "tbarnes-us", "createdAt": "2020-04-03T17:41:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MDg4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM0NjQ3NQ==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403346475", "bodyText": "https://jira.****/jira/browse/OWLS-80944", "author": "rjeberhard", "createdAt": "2020-04-03T21:31:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MDg4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MTgyNg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403141826", "bodyText": "thank you for putting a comment to explain that", "author": "markxnelson", "createdAt": "2020-04-03T16:51:46Z", "path": "operator/src/main/java/oracle/kubernetes/weblogic/domain/model/ServerStatus.java", "diffHunk": "@@ -46,6 +47,9 @@\n   @Valid\n   private ServerHealth health;\n \n+  // volatile so it will not be included in the json schema", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MzI5Ng==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403143296", "bodyText": "these asserts should probably have messages on them ?", "author": "markxnelson", "createdAt": "2020-04-03T16:54:18Z", "path": "operator/src/test/java/oracle/kubernetes/weblogic/domain/model/ServerStatusTest.java", "diffHunk": "@@ -0,0 +1,100 @@\n+// Copyright (c) 2020, Oracle Corporation and/or its affiliates.\n+// Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl.\n+\n+package oracle.kubernetes.weblogic.domain.model;\n+\n+import org.junit.Test;\n+\n+import static org.hamcrest.Matchers.equalTo;\n+import static org.hamcrest.Matchers.greaterThan;\n+import static org.hamcrest.Matchers.lessThan;\n+import static org.hamcrest.junit.MatcherAssert.assertThat;\n+\n+public class ServerStatusTest {\n+\n+  static ServerStatus cluster1Server1 = new ServerStatus().withClusterName(\"cluster-1\").withServerName(\"server1\");\n+  static ServerStatus cluster1Server2 = new ServerStatus().withClusterName(\"cluster-1\").withServerName(\"server2\");\n+  static ServerStatus cluster1Server10 = new ServerStatus().withClusterName(\"cluster-1\").withServerName(\"server10\");\n+\n+  static ServerStatus cluster2Server1 = new ServerStatus().withClusterName(\"cluster-2\").withServerName(\"server1\");\n+  static ServerStatus cluster10Server1 = new ServerStatus().withClusterName(\"cluster-10\").withServerName(\"server1\");\n+\n+  static ServerStatus standAloneServer1 = new ServerStatus().withServerName(\"server1\");\n+  static ServerStatus standAloneServer2 = new ServerStatus().withServerName(\"server2\");\n+  static ServerStatus standAloneServer10 = new ServerStatus().withServerName(\"server10\");\n+\n+  static ServerStatus adminServer = new ServerStatus().withServerName(\"admin-server\").withIsAdminServer(true);\n+  static ServerStatus cluster1ServerA = new ServerStatus().withClusterName(\"cluster-1\").withServerName(\"a\");\n+  static ServerStatus standAloneServerA = new ServerStatus().withServerName(\"a\");\n+\n+  static ServerStatus nullClusterNullServer = new ServerStatus();\n+\n+  @Test\n+  public void verify_Equal_compareTo() {\n+    assertThat(nullClusterNullServer.compareTo(nullClusterNullServer), equalTo(0));", "originalCommit": "8f9225247231add8fca45faf2ed746a03daa4586", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM0NjkxNg==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403346916", "bodyText": "https://jira.****/jira/browse/OWLS-80945", "author": "rjeberhard", "createdAt": "2020-04-03T21:32:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MzI5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzM1NDg3NA==", "url": "https://github.com/oracle/weblogic-kubernetes-operator/pull/1531#discussion_r403354874", "bodyText": "this method tests that compareTo should return 0 when comparing to the same object. The assertThat statement seems to be self explanatory.", "author": "alai8", "createdAt": "2020-04-03T21:54:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzE0MzI5Ng=="}], "type": "inlineReview"}, {"oid": "7bcd53d66efab573f0302382fe5a44248bb1bf66", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/7bcd53d66efab573f0302382fe5a44248bb1bf66", "message": "Update rest_domainqualtrue.yml", "committedDate": "2020-04-03T18:57:29Z", "type": "commit"}, {"oid": "1fba26b44cac5faa1670ea2f4cb3341031de8765", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/1fba26b44cac5faa1670ea2f4cb3341031de8765", "message": "Update OperatorUtils.java", "committedDate": "2020-04-03T18:58:54Z", "type": "commit"}, {"oid": "47b3a69883f9c734dde8558040b362830c2ca87b", "url": "https://github.com/oracle/weblogic-kubernetes-operator/commit/47b3a69883f9c734dde8558040b362830c2ca87b", "message": "Update OperatorUtils.java", "committedDate": "2020-04-03T19:00:13Z", "type": "commit"}]}