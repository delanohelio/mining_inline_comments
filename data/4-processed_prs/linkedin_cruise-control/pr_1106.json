{"pr_number": 1106, "pr_title": "Add capacity config documentation and expose hardcoded defaults for optional configs.", "pr_createdAt": "2020-02-18T17:48:07Z", "pr_url": "https://github.com/linkedin/cruise-control/pull/1106", "timeline": [{"oid": "5674265c89ed60acec514097398a122330abccd1", "url": "https://github.com/linkedin/cruise-control/commit/5674265c89ed60acec514097398a122330abccd1", "message": "Add capacity config documentation and expose hardcoded defaults for optional configs.", "committedDate": "2020-02-18T17:43:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAzMDQyNg==", "url": "https://github.com/linkedin/cruise-control/pull/1106#discussion_r381030426", "bodyText": "nit: capacity.config.file= -> capacity.config.file", "author": "kidkun", "createdAt": "2020-02-19T01:27:14Z", "path": "docs/wiki/User Guide/Configurations.md", "diffHunk": "@@ -208,9 +208,29 @@ We are still trying to improve cruise control. And following are some configurat\n | skip.sample.store.topic.rack.awareness.check    | Boolean |  N         |   false           | The config to skip rack awareness sanity check for sample store topics  |\n \n ### BrokerCapacityConfigurationFileResolver configurations\n-| Name                 | Type   | Required? | Default Value | Description                                                                        |\n-|----------------------|--------|-----------|---------------|------------------------------------------------------------------------------------|\n-| capacity.config.file | String | Y         |               | The path to the configuration JSON file that provides the capacity of the brokers. |\n+| Name                 | Type   | Required? | Default Value             | Description                                                                        |\n+|----------------------|--------|-----------|---------------------------|------------------------------------------------------------------------------------|\n+| capacity.config.file | String | Y         | config/capacityJBOD.json  | The path to the configuration JSON file that provides the capacity of the brokers. |\n+\n+#### Populating the Capacity Config File\n+`Option-1`: The following steps allow users to set the initial broker capacities or update capacities upon addition of \n+new brokers out-of-the-box:\n+1. Check `cruisecontrol.properties` file to verify that the `capacity.config.file=` config points to the file you are modifying.", "originalCommit": "5674265c89ed60acec514097398a122330abccd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAzMjA3Mw==", "url": "https://github.com/linkedin/cruise-control/pull/1106#discussion_r381032073", "bodyText": "I feel some context is missing here. option-1 is only relevant with the default implementation mentioned in option-2, should we first give some background first, then list two options\n\nstick with default resolver and config the capacity files.\nimplement your own resolver.", "author": "kidkun", "createdAt": "2020-02-19T01:33:09Z", "path": "docs/wiki/User Guide/Configurations.md", "diffHunk": "@@ -208,9 +208,29 @@ We are still trying to improve cruise control. And following are some configurat\n | skip.sample.store.topic.rack.awareness.check    | Boolean |  N         |   false           | The config to skip rack awareness sanity check for sample store topics  |\n \n ### BrokerCapacityConfigurationFileResolver configurations\n-| Name                 | Type   | Required? | Default Value | Description                                                                        |\n-|----------------------|--------|-----------|---------------|------------------------------------------------------------------------------------|\n-| capacity.config.file | String | Y         |               | The path to the configuration JSON file that provides the capacity of the brokers. |\n+| Name                 | Type   | Required? | Default Value             | Description                                                                        |\n+|----------------------|--------|-----------|---------------------------|------------------------------------------------------------------------------------|\n+| capacity.config.file | String | Y         | config/capacityJBOD.json  | The path to the configuration JSON file that provides the capacity of the brokers. |\n+\n+#### Populating the Capacity Config File\n+`Option-1`: The following steps allow users to set the initial broker capacities or update capacities upon addition of \n+new brokers out-of-the-box:\n+1. Check `cruisecontrol.properties` file to verify that the `capacity.config.file=` config points to the file you are modifying.\n+By default, this config is set to use `config/capacityJBOD.json`. If you have \n+    * a non-JBOD deployment, where each broker has the same number of cores, you may use `config/capacity.json`, or\n+    * a non-JBOD deployment, where brokers may have varying number of cores, you may use `config/capacityCores.json`\n+ and modify this file.\n+2. Ensure that the capacity file picked in `step-1` contains either a default capacity for missing broker ids, or \n+explicitly specifies capacities for brokers with specific ids provided by user.\n+3. Finally, bounce your Cruise Control instance.\n+\n+`Option-2`: `BrokerCapacityConfigResolver` is a pluggable component. Hence, you can write your own pluggable capacity ", "originalCommit": "5674265c89ed60acec514097398a122330abccd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6104099d304a4b41e67cbd9aadd27c2011d56207", "url": "https://github.com/linkedin/cruise-control/commit/6104099d304a4b41e67cbd9aadd27c2011d56207", "message": "Address the feedback.", "committedDate": "2020-02-20T22:38:04Z", "type": "commit"}]}