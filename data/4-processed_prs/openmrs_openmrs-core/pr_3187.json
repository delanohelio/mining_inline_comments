{"pr_number": 3187, "pr_title": "TRUNK-5115: Replace use of conditional logging with slf4j parameterized messages", "pr_createdAt": "2020-04-27T21:09:08Z", "pr_url": "https://github.com/openmrs/openmrs-core/pull/3187", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTcxNzY2OA==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r419717668", "bodyText": "Logger message should be the same . It should display the both concept id and locale . With your change it will log only the locale information", "author": "dilanthas", "createdAt": "2020-05-04T20:46:25Z", "path": "api/src/main/java/org/openmrs/Concept.java", "diffHunk": "@@ -652,9 +652,7 @@ public ConceptName getPreferredName(Locale forLocale) {\n \t\t}\n \t\t// fail early if this concept has no names defined\n \t\tif (getNames(forLocale).isEmpty()) {\n-\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\tlog.debug(\"there are no names defined for concept with id: \" + conceptId + \" in the  locale: \" + forLocale);\n-\t\t\t}\n+\t\t\tlog.debug(\"The locale is {}.\", forLocale);\n \t\t\treturn null;", "originalCommit": "acd7f53c338cff32bd1e31cca8e3394f397ba967", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ2MzUzNQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r423463535", "bodyText": "I don't see the new parameter used anywhere so my suggestion is to remove this and also seems this is the reason behind the build failure since the object param does not have a type.", "author": "deshankoswatte", "createdAt": "2020-05-12T05:03:10Z", "path": "api/src/main/java/org/openmrs/Concept.java", "diffHunk": "@@ -641,20 +641,20 @@ private ConceptName getNameInLocale(Locale locale) {\n \t * Returns the name which is explicitly marked as preferred for a given locale.\n \t * \n \t * @param forLocale locale for which to return a preferred name\n+\t * @param  \n \t * @return preferred name for the locale, or null if no preferred name is specified\n \t * @should return the concept name explicitly marked as locale preferred\n \t * @should return the fully specified name if no name is explicitly marked as locale preferred\n \t */\n-\tpublic ConceptName getPreferredName(Locale forLocale) {\n+\tpublic ConceptName getPreferredName(Locale forLocale, object ) {", "originalCommit": "60c71091108452be3bdb9fc09e17a9eab9f7f341", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ2Mzg5Mw==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r423463893", "bodyText": "I don't see the variable forconceptId declared and initialized.", "author": "deshankoswatte", "createdAt": "2020-05-12T05:04:49Z", "path": "api/src/main/java/org/openmrs/Concept.java", "diffHunk": "@@ -641,20 +641,20 @@ private ConceptName getNameInLocale(Locale locale) {\n \t * Returns the name which is explicitly marked as preferred for a given locale.\n \t * \n \t * @param forLocale locale for which to return a preferred name\n+\t * @param  \n \t * @return preferred name for the locale, or null if no preferred name is specified\n \t * @should return the concept name explicitly marked as locale preferred\n \t * @should return the fully specified name if no name is explicitly marked as locale preferred\n \t */\n-\tpublic ConceptName getPreferredName(Locale forLocale) {\n+\tpublic ConceptName getPreferredName(Locale forLocale, object ) {\n \t\t\n \t\tif (log.isDebugEnabled()) {\n \t\t\tlog.debug(\"Getting preferred conceptName for locale: \" + forLocale);\n \t\t}\n \t\t// fail early if this concept has no names defined\n \t\tif (getNames(forLocale).isEmpty()) {\n-\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\tlog.debug(\"there are no names defined for concept with id: \" + conceptId + \" in the  locale: \" + forLocale);\n-\t\t\t}\n+\t\t\tlog.debug(\"The ConceptId is {}.\", forconceptId);", "originalCommit": "60c71091108452be3bdb9fc09e17a9eab9f7f341", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYyMzA3Mw==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r423623073", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tlog.debug(\"The ConceptId is {}.\", forconceptId);\n          \n          \n            \n            \t\t\tlog.debug(\"The ConceptId is {}.\", conceptId);", "author": "sanjulamadurapperuma", "createdAt": "2020-05-12T10:17:15Z", "path": "api/src/main/java/org/openmrs/Concept.java", "diffHunk": "@@ -641,20 +641,20 @@ private ConceptName getNameInLocale(Locale locale) {\n \t * Returns the name which is explicitly marked as preferred for a given locale.\n \t * \n \t * @param forLocale locale for which to return a preferred name\n+\t * @param  \n \t * @return preferred name for the locale, or null if no preferred name is specified\n \t * @should return the concept name explicitly marked as locale preferred\n \t * @should return the fully specified name if no name is explicitly marked as locale preferred\n \t */\n-\tpublic ConceptName getPreferredName(Locale forLocale) {\n+\tpublic ConceptName getPreferredName(Locale forLocale, object ) {\n \t\t\n \t\tif (log.isDebugEnabled()) {\n \t\t\tlog.debug(\"Getting preferred conceptName for locale: \" + forLocale);\n \t\t}\n \t\t// fail early if this concept has no names defined\n \t\tif (getNames(forLocale).isEmpty()) {\n-\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\tlog.debug(\"there are no names defined for concept with id: \" + conceptId + \" in the  locale: \" + forLocale);\n-\t\t\t}\n+\t\t\tlog.debug(\"The ConceptId is {}.\", forconceptId);", "originalCommit": "60c71091108452be3bdb9fc09e17a9eab9f7f341", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYyNTgyNQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r423625825", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tlog.debug(\"The Locale is\" +  forLocale);\n          \n          \n            \n            \t\t\tlog.debug(\"The Locale is \" +  forLocale);", "author": "sanjulamadurapperuma", "createdAt": "2020-05-12T10:22:27Z", "path": "api/src/main/java/org/openmrs/Concept.java", "diffHunk": "@@ -641,20 +641,20 @@ private ConceptName getNameInLocale(Locale locale) {\n \t * Returns the name which is explicitly marked as preferred for a given locale.\n \t * \n \t * @param forLocale locale for which to return a preferred name\n+\t * @param  \n \t * @return preferred name for the locale, or null if no preferred name is specified\n \t * @should return the concept name explicitly marked as locale preferred\n \t * @should return the fully specified name if no name is explicitly marked as locale preferred\n \t */\n-\tpublic ConceptName getPreferredName(Locale forLocale) {\n+\tpublic ConceptName getPreferredName(Locale forLocale, object ) {\n \t\t\n \t\tif (log.isDebugEnabled()) {\n \t\t\tlog.debug(\"Getting preferred conceptName for locale: \" + forLocale);\n \t\t}\n \t\t// fail early if this concept has no names defined\n \t\tif (getNames(forLocale).isEmpty()) {\n-\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\tlog.debug(\"there are no names defined for concept with id: \" + conceptId + \" in the  locale: \" + forLocale);\n-\t\t\t}\n+\t\t\tlog.debug(\"The ConceptId is {}.\", forconceptId);\n+\t\t\tlog.debug(\"The Locale is\" +  forLocale);", "originalCommit": "60c71091108452be3bdb9fc09e17a9eab9f7f341", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYyNjc2Mg==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r423626762", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t * @param", "author": "sanjulamadurapperuma", "createdAt": "2020-05-12T10:24:19Z", "path": "api/src/main/java/org/openmrs/Concept.java", "diffHunk": "@@ -641,20 +641,20 @@ private ConceptName getNameInLocale(Locale locale) {\n \t * Returns the name which is explicitly marked as preferred for a given locale.\n \t * \n \t * @param forLocale locale for which to return a preferred name\n+\t * @param  ", "originalCommit": "60c71091108452be3bdb9fc09e17a9eab9f7f341", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYyNzUyMw==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r423627523", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tpublic ConceptName getPreferredName(Locale forLocale, object ) {\n          \n          \n            \n            \tpublic ConceptName getPreferredName(Locale forLocale) {", "author": "sanjulamadurapperuma", "createdAt": "2020-05-12T10:25:45Z", "path": "api/src/main/java/org/openmrs/Concept.java", "diffHunk": "@@ -641,20 +641,20 @@ private ConceptName getNameInLocale(Locale locale) {\n \t * Returns the name which is explicitly marked as preferred for a given locale.\n \t * \n \t * @param forLocale locale for which to return a preferred name\n+\t * @param  \n \t * @return preferred name for the locale, or null if no preferred name is specified\n \t * @should return the concept name explicitly marked as locale preferred\n \t * @should return the fully specified name if no name is explicitly marked as locale preferred\n \t */\n-\tpublic ConceptName getPreferredName(Locale forLocale) {\n+\tpublic ConceptName getPreferredName(Locale forLocale, object ) {", "originalCommit": "60c71091108452be3bdb9fc09e17a9eab9f7f341", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzAyMzMwMg==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r427023302", "bodyText": "The log message should stay the same as correctly pointed out by @dilanthas\nIn this particular case this means the change would be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tlog.debug(\"The ConceptId is {}.\", conceptId);\n          \n          \n            \n            \t\t\tlog.debug(\"The Locale is\" +  forLocale);\n          \n          \n            \n            \t\t\tlog.debug(\"there are no names defined for concept with id: {} in the locale: {}\", conceptId, forLocale);\n          \n      \n    \n    \n  \n\nThe example in the documentation of slf4j\nhttp://www.slf4j.org/faq.html#logging_performance\nlogger.debug(\"The new entry is \"+entry+\".\");\nlogger.debug(\"The new entry is {}.\", entry);\nexplains it well. The above two lines will lead to the same log message. Every variable like entry should be replaced by a placeholder {} inside the string (first parameter) which they call the formatting anchor. The variables that should be filled into the message by slf4j will then be passed as second, third, ... parameter.", "author": "teleivo", "createdAt": "2020-05-19T04:29:32Z", "path": "api/src/main/java/org/openmrs/Concept.java", "diffHunk": "@@ -652,9 +653,8 @@ public ConceptName getPreferredName(Locale forLocale) {\n \t\t}\n \t\t// fail early if this concept has no names defined\n \t\tif (getNames(forLocale).isEmpty()) {\n-\t\t\tif (log.isDebugEnabled()) {\n-\t\t\t\tlog.debug(\"there are no names defined for concept with id: \" + conceptId + \" in the  locale: \" + forLocale);\n-\t\t\t}\n+\t\t\tlog.debug(\"The ConceptId is {}.\", conceptId);\n+\t\t\tlog.debug(\"The Locale is\" +  forLocale);", "originalCommit": "844a9a5a392f45ae930ec2e35d47f5ba85e3c078", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE2MjQ1Nw==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r433162457", "bodyText": "Thanks @ivo. Changes have been made as recommended.", "author": "gracebish", "createdAt": "2020-06-01T10:40:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzAyMzMwMg=="}], "type": "inlineReview"}, {"oid": "c797fd39a8e69e5103531cfb6c8a3c2e0bfb765e", "url": "https://github.com/openmrs/openmrs-core/commit/c797fd39a8e69e5103531cfb6c8a3c2e0bfb765e", "message": "TRUNK-5115:Replace use of conditional logging with slf4j parameterized messages", "committedDate": "2020-05-19T20:06:30Z", "type": "commit"}, {"oid": "c797fd39a8e69e5103531cfb6c8a3c2e0bfb765e", "url": "https://github.com/openmrs/openmrs-core/commit/c797fd39a8e69e5103531cfb6c8a3c2e0bfb765e", "message": "TRUNK-5115:Replace use of conditional logging with slf4j parameterized messages", "committedDate": "2020-05-19T20:06:30Z", "type": "forcePushed"}, {"oid": "693be4ce783017869c1e51024374717cb29a9bf6", "url": "https://github.com/openmrs/openmrs-core/commit/693be4ce783017869c1e51024374717cb29a9bf6", "message": "TRUNK-5115: Replace use of conditional logging with slf4j parameterized messages", "committedDate": "2020-06-01T10:21:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE3MzU0MA==", "url": "https://github.com/openmrs/openmrs-core/pull/3187#discussion_r433173540", "bodyText": "can you please remove this newline you added", "author": "teleivo", "createdAt": "2020-06-01T11:07:57Z", "path": "api/src/main/java/org/openmrs/Concept.java", "diffHunk": "@@ -641,6 +641,7 @@ private ConceptName getNameInLocale(Locale locale) {\n \t * Returns the name which is explicitly marked as preferred for a given locale.\n \t * \n \t * @param forLocale locale for which to return a preferred name\n+\t ", "originalCommit": "693be4ce783017869c1e51024374717cb29a9bf6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f7d90195e8bac0127b3faba4a7753a93435083b4", "url": "https://github.com/openmrs/openmrs-core/commit/f7d90195e8bac0127b3faba4a7753a93435083b4", "message": "TRUNK-5115: replace use of conditional logging with slf4j parameterized messages", "committedDate": "2020-06-01T11:35:43Z", "type": "commit"}]}