{"pr_number": 3381, "pr_title": "TRUNK-5652:Add NestedOrderGroups to OrderGroup", "pr_createdAt": "2020-07-18T18:17:31Z", "pr_url": "https://github.com/openmrs/openmrs-core/pull/3381", "timeline": [{"oid": "6ac1b40957dfcc7310942efa3fe07bcb58d6e713", "url": "https://github.com/openmrs/openmrs-core/commit/6ac1b40957dfcc7310942efa3fe07bcb58d6e713", "message": "TRUNK-5652:fixing travis ci", "committedDate": "2020-07-20T11:53:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQxODkzMw==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457418933", "bodyText": "Was this also in the ticket description?", "author": "dkayiwa", "createdAt": "2020-07-20T14:07:44Z", "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -112,6 +112,25 @@\n \t\t\t\t\t\t\t\t referencedTableName=\"order_group\"\n \t\t\t\t\t\t\t\t referencedColumnNames=\"order_group_id\" />\n     </changeSet>\n+        \n+    <changeSet id=\"20190816-Trunk-5652\" author=\"gitacliff\">\n+\t\t<preConditions onFail=\"MARK_RAN\">\n+\t\t\t<not>", "originalCommit": "f1ba366fa63456a0759fa1fad3f0815422f38f17", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUwMTcxMQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457501711", "bodyText": "@dkayiwa  the Preconditions element can be attached to  a changeset to control the execution of an update based on the state of the database and in this case its housing the <not> element just like in the all other changesets adding new columns to the order_group table", "author": "gitcliff", "createdAt": "2020-07-20T15:36:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQxODkzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUwNDM1Ng==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457504356", "bodyText": "I mean the entire changeset.", "author": "dkayiwa", "createdAt": "2020-07-20T15:39:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQxODkzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY1NzU1MA==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457657550", "bodyText": "@dkayiwa i have made some changes ,,please review", "author": "gitcliff", "createdAt": "2020-07-20T19:59:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQxODkzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2MTAzMA==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457661030", "bodyText": "Do you need to touch this file in any way?", "author": "dkayiwa", "createdAt": "2020-07-20T20:05:59Z", "path": "api/src/main/resources/org/openmrs/liquibase/updates/liquibase-update-to-latest-2.4.x.xml", "diffHunk": "@@ -112,7 +112,7 @@\n \t\t\t\t\t\t\t\t referencedTableName=\"order_group\"\n \t\t\t\t\t\t\t\t referencedColumnNames=\"order_group_id\" />\n     </changeSet>\n-    ", "originalCommit": "fc2547525d927ddeeb8d8f7ede98e336e4017f03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk1NzIwNg==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r457957206", "bodyText": "i have fixed it,,thanks", "author": "gitcliff", "createdAt": "2020-07-21T09:20:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY2MTAzMA=="}], "type": "inlineReview"}, {"oid": "6655ae277cdb90955d3702488d963cb32e233075", "url": "https://github.com/openmrs/openmrs-core/commit/6655ae277cdb90955d3702488d963cb32e233075", "message": "TRUNK-5652:fixing changeset", "committedDate": "2020-07-21T07:36:36Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA2OTg2Ng==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r458069866", "bodyText": "What is in core is already 864. Can you increment this again?", "author": "dkayiwa", "createdAt": "2020-07-21T12:49:57Z", "path": "api/src/test/java/org/openmrs/util/DatabaseUpdaterDatabaseIT.java", "diffHunk": "@@ -29,7 +29,7 @@\n \t * \n \t * This constant needs to be updated when adding new Liquibase update files to openmrs-core.\n \t */\n-\tprivate static final int CHANGE_SET_COUNT_FOR_2_1_X = 863;\n+\tprivate static final int CHANGE_SET_COUNT_FOR_2_1_X = 864;", "originalCommit": "c110093ca77c51ad06e83cc05f239b39b65490d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA5NzM5OQ==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r458097399", "bodyText": "@dkayiwa  I have incremented", "author": "gitcliff", "createdAt": "2020-07-21T13:30:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA2OTg2Ng=="}], "type": "inlineReview"}, {"oid": "dd27899bbf447ae0cb708c9f845c7ccdc3e55070", "url": "https://github.com/openmrs/openmrs-core/commit/dd27899bbf447ae0cb708c9f845c7ccdc3e55070", "message": "TRUNK-5652:Add NestedOrderGroups to OrderGroup", "committedDate": "2020-07-21T13:17:25Z", "type": "commit"}, {"oid": "5638b50f1f742fd2d04fa6646e36ae549d3a335f", "url": "https://github.com/openmrs/openmrs-core/commit/5638b50f1f742fd2d04fa6646e36ae549d3a335f", "message": "TRUNK-5652:Savign nested order group", "committedDate": "2020-07-21T13:17:28Z", "type": "commit"}, {"oid": "1946e5afaacf5d8547e3a2b7901923c09af81b21", "url": "https://github.com/openmrs/openmrs-core/commit/1946e5afaacf5d8547e3a2b7901923c09af81b21", "message": "TRUNK-5652:fixing travis ci", "committedDate": "2020-07-21T13:17:29Z", "type": "commit"}, {"oid": "156653ebe7d0c21a8be1d466c292bd421a403be6", "url": "https://github.com/openmrs/openmrs-core/commit/156653ebe7d0c21a8be1d466c292bd421a403be6", "message": "TRUNK-5652:fixing formats", "committedDate": "2020-07-21T13:17:30Z", "type": "commit"}, {"oid": "51b5f575660bec1d1ffc0d3c642daaac4fe27f8b", "url": "https://github.com/openmrs/openmrs-core/commit/51b5f575660bec1d1ffc0d3c642daaac4fe27f8b", "message": "TRUNK-5652:fixing formats", "committedDate": "2020-07-21T13:17:31Z", "type": "commit"}, {"oid": "1a467e6d5b7f8d964fac61134f4517bf8af4a73e", "url": "https://github.com/openmrs/openmrs-core/commit/1a467e6d5b7f8d964fac61134f4517bf8af4a73e", "message": "TRUNK-5652:change the changeset", "committedDate": "2020-07-21T13:17:33Z", "type": "commit"}, {"oid": "35b03f737dd1dc0e97175881003ca20b1eef6aeb", "url": "https://github.com/openmrs/openmrs-core/commit/35b03f737dd1dc0e97175881003ca20b1eef6aeb", "message": "TRUNK-5652:fixing changeset", "committedDate": "2020-07-21T13:17:33Z", "type": "commit"}, {"oid": "979c119173134a042d12eff3fdb806014333c705", "url": "https://github.com/openmrs/openmrs-core/commit/979c119173134a042d12eff3fdb806014333c705", "message": "TRUNK-5652:fixing changeset", "committedDate": "2020-07-21T13:17:34Z", "type": "commit"}, {"oid": "bbb5768f2b92185964c7601d245811b6a4452141", "url": "https://github.com/openmrs/openmrs-core/commit/bbb5768f2b92185964c7601d245811b6a4452141", "message": "TRUNK-5652:fixing changeset", "committedDate": "2020-07-21T13:17:35Z", "type": "commit"}, {"oid": "f0ed0cc279388bfa9c9a13020d151d7494bab98c", "url": "https://github.com/openmrs/openmrs-core/commit/f0ed0cc279388bfa9c9a13020d151d7494bab98c", "message": "TRUNK-5652:fixing databaseUpdaterDatabaseIT", "committedDate": "2020-07-21T13:28:02Z", "type": "commit"}, {"oid": "f0ed0cc279388bfa9c9a13020d151d7494bab98c", "url": "https://github.com/openmrs/openmrs-core/commit/f0ed0cc279388bfa9c9a13020d151d7494bab98c", "message": "TRUNK-5652:fixing databaseUpdaterDatabaseIT", "committedDate": "2020-07-21T13:28:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEwMTkxNA==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r458101914", "bodyText": "This does not look like that in the commit that i linked in the ticket description.", "author": "dkayiwa", "createdAt": "2020-07-21T13:36:48Z", "path": "api/src/main/resources/org/openmrs/api/db/hibernate/OrderGroup.hbm.xml", "diffHunk": "@@ -72,6 +72,12 @@\n \t\t    not-null=\"false\" column=\"parent_order_group\" />\n \t\t<many-to-one name=\"orderGroupReason\" class=\"org.openmrs.Concept\"\n \t\t    not-null=\"false\" column=\"order_group_reason\" />\n+\t\t <!-- one-to-many association to all nested orderGroups in this grouping -->\n+        <set name=\"nestedOrderGroups\" inverse=\"true\" cascade=\"delete\" order-by=\"order_group_id\"\n+            access=\"field\" batch-size=\"25\">\n+            <key column=\"order_group_id\" />", "originalCommit": "f0ed0cc279388bfa9c9a13020d151d7494bab98c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODExMzU0MA==", "url": "https://github.com/openmrs/openmrs-core/pull/3381#discussion_r458113540", "bodyText": "i have fixed it", "author": "gitcliff", "createdAt": "2020-07-21T13:52:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEwMTkxNA=="}], "type": "inlineReview"}, {"oid": "a987c7691cd046e24ff1163f3484dd9eab1e4237", "url": "https://github.com/openmrs/openmrs-core/commit/a987c7691cd046e24ff1163f3484dd9eab1e4237", "message": "TRUNK-5652:fixing order_group hbm xml file", "committedDate": "2020-07-21T13:50:43Z", "type": "commit"}, {"oid": "91530eeb73c3a3ec96e3fc03eba8b72cce8ddc58", "url": "https://github.com/openmrs/openmrs-core/commit/91530eeb73c3a3ec96e3fc03eba8b72cce8ddc58", "message": "TRUNK-5652:adding changes", "committedDate": "2020-07-21T14:20:08Z", "type": "commit"}]}