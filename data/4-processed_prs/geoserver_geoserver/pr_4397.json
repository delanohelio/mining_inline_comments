{"pr_number": 4397, "pr_title": "[GEOS-9639] Add OGC URN synatax support for Native SRS selection", "pr_createdAt": "2020-07-08T10:04:38Z", "pr_url": "https://github.com/geoserver/geoserver/pull/4397", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng==", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451498666", "bodyText": "This looks messy, the text field now returns ids prefixed in some cases, but not in others? Can always you return the srs  with a prefix instead of duplicating prefixing logic around?", "author": "aaime", "createdAt": "2020-07-08T12:16:41Z", "path": "src/web/core/src/main/java/org/geoserver/web/wicket/CRSPanel.java", "diffHunk": "@@ -267,6 +268,11 @@ String toSRS(CoordinateReferenceSystem crs) {\n         try {\n             if (crs != null) {\n                 Integer epsgCode = CRS.lookupEpsgCode(crs, false);\n+                String srs = srsTextField.getModelObject();", "originalCommit": "428892d4fecc901cfc6534c48bafd5ac3601f6b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTUyODUyMA==", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451528520", "bodyText": "If I understood correctly, I should always return \"EPSG:XXXX\" even if it was initially an URN OGC?", "author": "imranrajjad", "createdAt": "2020-07-08T13:05:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU0NDk0Mw==", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451544943", "bodyText": "No, I just mean it would seem better if the text field either contained \"EPSG:XYZW\" or \"urn.....::XYZW\" but not just \"XYZW\", the prefixing logic I'm seeing seems to be caring for the last case.", "author": "aaime", "createdAt": "2020-07-08T13:29:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU1MDIyNA==", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451550224", "bodyText": "ok now I understood, so if its not a URN , we simply return the srs string if it is already prefixed with EPSG:", "author": "imranrajjad", "createdAt": "2020-07-08T13:37:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU1MTA2Mw==", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451551063", "bodyText": "so the condition\nsrs != null && srs.startsWith(BasicResourceConfig.URN_OGC_PREFIX)\nwill become\nsrs != null && (srs.startsWith(BasicResourceConfig.URN_OGC_PREFIX) || srs.startsWith(\"EPSG:\"))", "author": "imranrajjad", "createdAt": "2020-07-08T13:38:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU1MjM4Mw==", "url": "https://github.com/geoserver/geoserver/pull/4397#discussion_r451552383", "bodyText": "Yep. Uniform handling for the two cases (including a dedicated constant for the \"EPSG\" prefix):", "author": "aaime", "createdAt": "2020-07-08T13:40:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTQ5ODY2Ng=="}], "type": "inlineReview"}, {"oid": "b8cfe7bdcbbeaf574959b77be6c28917b0a07e10", "url": "https://github.com/geoserver/geoserver/commit/b8cfe7bdcbbeaf574959b77be6c28917b0a07e10", "message": "[GEOS-9639] Add OGC URN synatax support for Native SRS selection\n\n-added support for SRID in URN OGC format\n\n(e.g urn:ogc:def:crs:EPSG::4326)\n# Conflicts:\n#\tsrc/web/core/src/main/java/org/geoserver/web/wicket/SRSProvider.java\n#\tsrc/web/core/src/test/java/org/geoserver/web/data/resource/ResourceConfigurationPageTest.java", "committedDate": "2020-07-09T07:26:00Z", "type": "commit"}, {"oid": "8b99eac61831622012e89b2e75b03b59e1345047", "url": "https://github.com/geoserver/geoserver/commit/8b99eac61831622012e89b2e75b03b59e1345047", "message": "[GEOS-9639] address Andrea comments 1", "committedDate": "2020-07-09T07:26:11Z", "type": "commit"}, {"oid": "8489af71f381d65cc5a360b95cc4bedc834d8647", "url": "https://github.com/geoserver/geoserver/commit/8489af71f381d65cc5a360b95cc4bedc834d8647", "message": "[GEOS-9639] rebase with Marco work PR 4385", "committedDate": "2020-07-09T07:28:41Z", "type": "forcePushed"}, {"oid": "e0501d303bcf6f4cb2f5e1a4ee89a34d16b06fea", "url": "https://github.com/geoserver/geoserver/commit/e0501d303bcf6f4cb2f5e1a4ee89a34d16b06fea", "message": "[GEOS-9639] rebase with Marco work PR 4385", "committedDate": "2020-07-09T07:56:07Z", "type": "forcePushed"}, {"oid": "14ad9728f57ee252ad0c92af3912b50330b54e2b", "url": "https://github.com/geoserver/geoserver/commit/14ad9728f57ee252ad0c92af3912b50330b54e2b", "message": "[GEOS-9639] rebase with Marco work PR 4385", "committedDate": "2020-07-09T12:31:32Z", "type": "forcePushed"}, {"oid": "c761db062d79437c113fa6b16d2ec8399bc04343", "url": "https://github.com/geoserver/geoserver/commit/c761db062d79437c113fa6b16d2ec8399bc04343", "message": "[GEOS-9639] rebase with Marco work PR 4385", "committedDate": "2020-07-09T12:40:38Z", "type": "forcePushed"}, {"oid": "1954e269ef33faa18c8c41b81b0ce88d2d0ff4e6", "url": "https://github.com/geoserver/geoserver/commit/1954e269ef33faa18c8c41b81b0ce88d2d0ff4e6", "message": "[GEOS-9639] rebase with Marco work PR 4385", "committedDate": "2020-07-10T05:57:08Z", "type": "commit"}, {"oid": "1954e269ef33faa18c8c41b81b0ce88d2d0ff4e6", "url": "https://github.com/geoserver/geoserver/commit/1954e269ef33faa18c8c41b81b0ce88d2d0ff4e6", "message": "[GEOS-9639] rebase with Marco work PR 4385", "committedDate": "2020-07-10T05:57:08Z", "type": "forcePushed"}]}