{"pr_number": 4582, "pr_title": "Support decorations with multiple layers and legend styling in WPS downloads", "pr_createdAt": "2020-11-25T21:26:55Z", "pr_url": "https://github.com/geoserver/geoserver/pull/4582", "timeline": [{"oid": "c100b5a2a8cca15dc8c5a524e91f9a71012ae65f", "url": "https://github.com/geoserver/geoserver/commit/c100b5a2a8cca15dc8c5a524e91f9a71012ae65f", "message": "Support decorations with multiple layers in WPS downloads.\nHeader decoration detection. Extended formatting options for legends.\nNew vendor option for format_options in GetMap request.", "committedDate": "2020-11-25T15:20:10Z", "type": "commit"}, {"oid": "c1917174df5426f87e43a985b10a8d8233ca6f3e", "url": "https://github.com/geoserver/geoserver/commit/c1917174df5426f87e43a985b10a8d8233ca6f3e", "message": "Merge branch 'master' of https://github.com/geoserver/geoserver into multiple-layers-decoration-wps-downloadmap", "committedDate": "2020-11-25T15:28:17Z", "type": "commit"}, {"oid": "1b96d33e231857e30a98d03b7052e14fbadf739d", "url": "https://github.com/geoserver/geoserver/commit/1b96d33e231857e30a98d03b7052e14fbadf739d", "message": "New WPS gs:DownloadMap related documentation", "committedDate": "2020-11-25T21:09:08Z", "type": "commit"}, {"oid": "55c3d9e2c2a1d36b2b8d0d15aca628edaf3e4a3b", "url": "https://github.com/geoserver/geoserver/commit/55c3d9e2c2a1d36b2b8d0d15aca628edaf3e4a3b", "message": "Format rules compliance", "committedDate": "2020-11-26T12:41:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUwNDg5NQ==", "url": "https://github.com/geoserver/geoserver/pull/4582#discussion_r532504895", "bodyText": "May be interesting for a client interested in doing its own composing (e.g., control separately the transparency of map and decoration), but I would remove the comment about where and how it's used in GeoServer community modules.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * ``decorationsOnly`` (values = ``true``, ``false``): Disabled by default. When value is true, it allows to get a transparent sized image for the request on which maps are not rendered, but it keeps the decorations applied (if present). This parameter is internally used for WPS gs:DownloadMap when applying multiple legends decorations in the process.\n          \n          \n            \n            * ``decorationsOnly`` (values = ``true``, ``false``): Disabled by default. When value is true, it allows to get a transparent sized image for the request on which maps are not rendered, but it keeps the decorations applied (if present).", "author": "aaime", "createdAt": "2020-11-30T10:48:34Z", "path": "doc/en/user/source/services/wms/vendor.rst", "diffHunk": "@@ -153,6 +154,7 @@ The supported format options are:\n * ``kmlvisible`` (values = ``true``, ``false``): Indicates whether layers selected will default to enabled or not. Default behavior is enabled. This parameter primarily affects Google Earth rendering.\n * ``advancedProjectionHandling`` (values = ``true``, ``false``): Enable \\ Disable advanced projection handling, if it is enabled in the GUI. If it is disabled in the GUI, this option has no effect.\n * ``mapWrapping`` (values = ``true``, ``false``): Enable \\ Disable continuous map wrapping, if it is enabled in the GUI. If it is disabled in the GUI, this option has no effect. Continuous map wrapping will also be disabled if ``advancedProjectionHandling`` is disabled.\n+* ``decorationsOnly`` (values = ``true``, ``false``): Disabled by default. When value is true, it allows to get a transparent sized image for the request on which maps are not rendered, but it keeps the decorations applied (if present). This parameter is internally used for WPS gs:DownloadMap when applying multiple legends decorations in the process.", "originalCommit": "55c3d9e2c2a1d36b2b8d0d15aca628edaf3e4a3b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUwNTcxNQ==", "url": "https://github.com/geoserver/geoserver/pull/4582#discussion_r532505715", "bodyText": "So many white space changes... it's one of the reason why we adopted google-format, the structure is predictable and only actual changes show up in the diff. For this time, no problem, but for the future, please either avoid formatting changes in docs, or put them in a separate commit.", "author": "aaime", "createdAt": "2020-11-30T10:49:54Z", "path": "doc/en/user/source/services/wms/vendor.rst", "diffHunk": "@@ -358,7 +361,7 @@ An example with XML POST:\n       version=\"1.1.1\" service=\"WMS\" rootLayer=\"false\">\n    </ogc:GetCapabilities>\n \n-   \n+", "originalCommit": "55c3d9e2c2a1d36b2b8d0d15aca628edaf3e4a3b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUwNzQ5Mg==", "url": "https://github.com/geoserver/geoserver/pull/4582#discussion_r532507492", "bodyText": "Add javadoc for public constant.", "author": "aaime", "createdAt": "2020-11-30T10:52:46Z", "path": "src/wms/src/main/java/org/geoserver/wms/map/RenderedImageMapOutputFormat.java", "diffHunk": "@@ -160,6 +160,8 @@\n     private static final String DISABLE_DATELINE_WRAPPING_HEURISTIC_FORMAT_OPTION =\n             \"disableDatelineWrappingHeuristic\";\n \n+    public static final String DECORATIONS_ONLY_FORMAT_OPTION = \"decorationsOnly\";", "originalCommit": "55c3d9e2c2a1d36b2b8d0d15aca628edaf3e4a3b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "18d891e9657190a986091b5aa45e80219cdf11a6", "url": "https://github.com/geoserver/geoserver/commit/18d891e9657190a986091b5aa45e80219cdf11a6", "message": "Update doc/en/user/source/services/wms/vendor.rst\n\nCo-authored-by: Andrea Aime <andrea.aime@gmail.com>", "committedDate": "2020-11-30T19:12:41Z", "type": "commit"}, {"oid": "32fb8195c72a3d2045d4167f87461f248ad7febc", "url": "https://github.com/geoserver/geoserver/commit/32fb8195c72a3d2045d4167f87461f248ad7febc", "message": "Documentation adjustments based on PR feedback", "committedDate": "2020-11-30T20:11:52Z", "type": "commit"}]}