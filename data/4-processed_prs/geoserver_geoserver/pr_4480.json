{"pr_number": 4480, "pr_title": "[GEOS-9731] Wfs-templating allow Iterating Builder to handle also json array without source", "pr_createdAt": "2020-09-10T10:54:34Z", "pr_url": "https://github.com/geoserver/geoserver/pull/4480", "timeline": [{"oid": "04b965b05dd1fc86402aa7480c7c35a16cfe146a", "url": "https://github.com/geoserver/geoserver/commit/04b965b05dd1fc86402aa7480c7c35a16cfe146a", "message": "[GEOS-9731] Wfs-templating allow Iterating Builder to handle also json array without source", "committedDate": "2020-09-11T07:57:56Z", "type": "commit"}, {"oid": "04b965b05dd1fc86402aa7480c7c35a16cfe146a", "url": "https://github.com/geoserver/geoserver/commit/04b965b05dd1fc86402aa7480c7c35a16cfe146a", "message": "[GEOS-9731] Wfs-templating allow Iterating Builder to handle also json array without source", "committedDate": "2020-09-11T07:57:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkyMDA5Mg==", "url": "https://github.com/geoserver/geoserver/pull/4480#discussion_r486920092", "bodyText": "This formatting looks off.", "author": "nmco", "createdAt": "2020-09-11T09:41:32Z", "path": "doc/en/user/source/community/wfs-templating/querying.rst", "diffHunk": "@@ -36,9 +36,10 @@ Consider the following JSON-LD output example:\n                 \"http://vocabulary.odm2.org/samplingfeaturetype/mappedFeature\"\n             ],\n             \"name\": \"MERCIA MUDSTONE GROUP\",\n-            \"gsml:positionalAccuracy\": {\n-                \"value\": \"100.0\"\n-            },\n+            \"valueArray\": [", "originalCommit": "04b965b05dd1fc86402aa7480c7c35a16cfe146a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk0NjkxOA==", "url": "https://github.com/geoserver/geoserver/pull/4480#discussion_r486946918", "bodyText": "fixed", "author": "taba90", "createdAt": "2020-09-11T10:08:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkyMDA5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkyMTUwOQ==", "url": "https://github.com/geoserver/geoserver/pull/4480#discussion_r486921509", "bodyText": "So we can write a NULL key?", "author": "nmco", "createdAt": "2020-09-11T09:42:57Z", "path": "src/community/wfs-templating/src/main/java/org/geoserver/wfstemplating/builders/AbstractTemplateBuilder.java", "diffHunk": "@@ -94,7 +94,6 @@ public int getFilterContextPos() {\n     protected void writeKey(TemplateOutputWriter writer) throws IOException {\n         if (key != null && !key.evaluate(null).equals(\"\"))\n             writer.writeElementName(key.evaluate(null));\n-        else throw new RuntimeException(\"Cannot write null key value\");", "originalCommit": "04b965b05dd1fc86402aa7480c7c35a16cfe146a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njk0NzMxMQ==", "url": "https://github.com/geoserver/geoserver/pull/4480#discussion_r486947311", "bodyText": "evaluating on null since key might be an env function or a literal. In both cases the evaluate(Object o) method doesn't need any argument. I've added a clarifying comment.", "author": "taba90", "createdAt": "2020-09-11T10:09:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkyMTUwOQ=="}], "type": "inlineReview"}, {"oid": "84d340c8dd3f21bbc655632a4f5c7d522513d7c3", "url": "https://github.com/geoserver/geoserver/commit/84d340c8dd3f21bbc655632a4f5c7d522513d7c3", "message": "reviewer's suggestion applied", "committedDate": "2020-09-11T10:08:14Z", "type": "commit"}]}