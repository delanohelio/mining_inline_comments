{"pr_number": 4581, "pr_title": "migrate CI build to github actions", "pr_createdAt": "2020-11-25T08:35:59Z", "pr_url": "https://github.com/geoserver/geoserver/pull/4581", "timeline": [{"oid": "dc7c6dd8a99df4b1d407188a9db381e6de526747", "url": "https://github.com/geoserver/geoserver/commit/dc7c6dd8a99df4b1d407188a9db381e6de526747", "message": "Merge https://github.com/bradh/geoserver into ci_migration", "committedDate": "2020-11-26T07:10:51Z", "type": "forcePushed"}, {"oid": "54d1705f22d981c25df4dca3879526986c97342b", "url": "https://github.com/geoserver/geoserver/commit/54d1705f22d981c25df4dca3879526986c97342b", "message": "ci: migrate from travis build to github actions", "committedDate": "2020-11-26T09:07:08Z", "type": "commit"}, {"oid": "54d1705f22d981c25df4dca3879526986c97342b", "url": "https://github.com/geoserver/geoserver/commit/54d1705f22d981c25df4dca3879526986c97342b", "message": "ci: migrate from travis build to github actions", "committedDate": "2020-11-26T09:07:08Z", "type": "forcePushed"}, {"oid": "760c14ba04f70d71d787364ecb8d4d009e1778bb", "url": "https://github.com/geoserver/geoserver/commit/760c14ba04f70d71d787364ecb8d4d009e1778bb", "message": "ci: update documentation to reflect migration away from Travis CI", "committedDate": "2020-11-26T09:13:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ2OTAyNg==", "url": "https://github.com/geoserver/geoserver/pull/4581#discussion_r531469026", "bodyText": "Ah ha, found it, thanks!", "author": "aaime", "createdAt": "2020-11-27T09:09:02Z", "path": ".github/workflows/linux.yml", "diffHunk": "@@ -0,0 +1,85 @@\n+name: Linux with OpenJDK 11 GitHub CI\n+\n+on: [pull_request]\n+\n+env:\n+  MAVEN_OPTS: -Dmaven.wagon.httpconnectionManager.ttlSeconds=25 -Dmaven.wagon.http.retryHandler.count=3 -Xmx512m -Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss,SSS\n+  TAKARI_SMART_BUILDER_VERSION: 0.6.1\n+\n+jobs:\n+  openjdk11:\n+    runs-on: ubuntu-20.04\n+    steps:\n+    - uses: actions/checkout@v2\n+      with:\n+        # 500 commits, set to 0 to get all\n+        fetch-depth: 500\n+    - name: Set up JDK 11\n+      uses: actions/setup-java@v1\n+      with:\n+        java-version: 11\n+    - name: Set up Maven\n+      uses: stCarolas/setup-maven@v4\n+      with:\n+        maven-version: 3.6.3\n+    - name: Maven repository caching\n+      uses: actions/cache@v2\n+      with:\n+        path: ~/.m2/repository\n+        key: gs-${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+        restore-keys: |\n+          gs-${{ runner.os }}-maven-\n+    - name: Build with Maven\n+      run: mvn -B -U -T3 -fae -Dfmt.skip=true -Dall -T2 -Prelease -f src/pom.xml clean install\n+    - name: Build community modules\n+      run: mvn -nsu -B -U -T4 -fae -Dfmt.skip=true -DskipTests -Prelease -PcommunityRelease -f src/community/pom.xml clean install\n+    - name: Package", "originalCommit": "760c14ba04f70d71d787364ecb8d4d009e1778bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ2OTQ5Nw==", "url": "https://github.com/geoserver/geoserver/pull/4581#discussion_r531469497", "bodyText": "Seeing a mix of \"-T3\" and \"-T2\" here. Might have been already in the Travis build mind.", "author": "aaime", "createdAt": "2020-11-27T09:09:58Z", "path": ".github/workflows/linux.yml", "diffHunk": "@@ -0,0 +1,85 @@\n+name: Linux with OpenJDK 11 GitHub CI\n+\n+on: [pull_request]\n+\n+env:\n+  MAVEN_OPTS: -Dmaven.wagon.httpconnectionManager.ttlSeconds=25 -Dmaven.wagon.http.retryHandler.count=3 -Xmx512m -Dorg.slf4j.simpleLogger.showDateTime=true -Dorg.slf4j.simpleLogger.dateTimeFormat=HH:mm:ss,SSS\n+  TAKARI_SMART_BUILDER_VERSION: 0.6.1\n+\n+jobs:\n+  openjdk11:\n+    runs-on: ubuntu-20.04\n+    steps:\n+    - uses: actions/checkout@v2\n+      with:\n+        # 500 commits, set to 0 to get all\n+        fetch-depth: 500\n+    - name: Set up JDK 11\n+      uses: actions/setup-java@v1\n+      with:\n+        java-version: 11\n+    - name: Set up Maven\n+      uses: stCarolas/setup-maven@v4\n+      with:\n+        maven-version: 3.6.3\n+    - name: Maven repository caching\n+      uses: actions/cache@v2\n+      with:\n+        path: ~/.m2/repository\n+        key: gs-${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+        restore-keys: |\n+          gs-${{ runner.os }}-maven-\n+    - name: Build with Maven\n+      run: mvn -B -U -T3 -fae -Dfmt.skip=true -Dall -T2 -Prelease -f src/pom.xml clean install\n+    - name: Build community modules\n+      run: mvn -nsu -B -U -T4 -fae -Dfmt.skip=true -DskipTests -Prelease -PcommunityRelease -f src/community/pom.xml clean install\n+    - name: Package\n+      run: mvn -f src/pom.xml assembly:single -nsu -N\n+    - name: Package community modules\n+      run:  mvn -f src/community/pom.xml assembly:single -nsu -N\n+    - name: Remove SNAPSHOT jars from repository\n+      run: |\n+        find .m2/repository -name \"*SNAPSHOT*\" -type d | xargs rm -rf {}\n+\n+  QA:\n+    runs-on: ubuntu-20.04\n+    steps:\n+    - uses: actions/checkout@v2\n+      with:\n+        # 500 commits, set to 0 to get all\n+        fetch-depth: 500\n+    - name: Set up JDK 11\n+      uses: actions/setup-java@v1\n+      with:\n+        java-version: 11\n+    - name: Set up Maven\n+      uses: stCarolas/setup-maven@v4\n+      with:\n+        maven-version: 3.6.3\n+    - name: Maven repository caching\n+      uses: actions/cache@v2\n+      with:\n+        path: ~/.m2/repository\n+        key: gs-${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+        restore-keys: |\n+          gs-${{ runner.os }}-maven-\n+    - name: Build with Maven\n+      run: mvn -B -U -T3 -fae -Dfmt.action=check -Dqa -DskipTests=true -Dall -T2 -Prelease -f src/pom.xml clean install", "originalCommit": "760c14ba04f70d71d787364ecb8d4d009e1778bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTgwMzk5NA==", "url": "https://github.com/geoserver/geoserver/pull/4581#discussion_r531803994", "bodyText": "No, my bad.", "author": "bradh", "createdAt": "2020-11-27T23:05:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ2OTQ5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ3MDEyOQ==", "url": "https://github.com/geoserver/geoserver/pull/4581#discussion_r531470129", "bodyText": "Does not need to be trusty in particular. We just need a Java 8 build", "author": "aaime", "createdAt": "2020-11-27T09:11:06Z", "path": ".travis.yml", "diffHunk": "@@ -49,15 +45,3 @@ matrix:\n       dist: trusty", "originalCommit": "760c14ba04f70d71d787364ecb8d4d009e1778bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTc5Nzc2NQ==", "url": "https://github.com/geoserver/geoserver/pull/4581#discussion_r531797765", "bodyText": "Ack. Will move from oraclejdk8 to openjdk8 though.", "author": "bradh", "createdAt": "2020-11-27T22:18:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ3MDEyOQ=="}], "type": "inlineReview"}, {"oid": "90f239f5da2cbe7e5db7e9568583407f26094c46", "url": "https://github.com/geoserver/geoserver/commit/90f239f5da2cbe7e5db7e9568583407f26094c46", "message": "ci: migrate jdk8 to github actions", "committedDate": "2020-11-27T23:16:07Z", "type": "commit"}, {"oid": "dad1175130e677aefefac794c8de7c2c58b2e62c", "url": "https://github.com/geoserver/geoserver/commit/dad1175130e677aefefac794c8de7c2c58b2e62c", "message": "ci: Update display name for Linux Github Actions", "committedDate": "2020-11-27T23:23:27Z", "type": "commit"}]}