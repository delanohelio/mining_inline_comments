{"pr_number": 2436, "pr_title": "Improve running time of DefaultSharedIndexInformerTest", "pr_createdAt": "2020-08-25T12:26:02Z", "pr_url": "https://github.com/fabric8io/kubernetes-client/pull/2436", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ0MzM4NA==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#discussion_r476443384", "bodyText": "You should remove this comment ... as now Thread.sleep is passed 500 as value rather than the RESYNC_PERIOD value.", "author": "dev-gaur", "createdAt": "2020-08-25T13:21:57Z", "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/DefaultSharedIndexInformerTest.java", "diffHunk": "@@ -251,7 +250,7 @@ public void onDelete(Pod oldObj, boolean deletedFinalStateUnknown) { }\n     factory.startAllRegisteredInformers();\n \n     // Wait for resync period of pass", "originalCommit": "92bfea374d34c60667d71a096722bc195c6f598b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ0Mzk1Mw==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#discussion_r476443953", "bodyText": "Or maybe keep it as Thread.sleep(RESYNC_PERIOD) .. whatever is better", "author": "dev-gaur", "createdAt": "2020-08-25T13:22:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ0MzM4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ1MTM1NQ==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#discussion_r476451355", "bodyText": "The test needs to be refactored to remove any Thread.sleep invocation.\nFor the scope of the current PR, maybe just remove the misleading comment.", "author": "manusa", "createdAt": "2020-08-25T13:33:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ0MzM4NA=="}], "type": "inlineReview"}, {"oid": "0e89753de925d8582215228fbbcbc82846ce285c", "url": "https://github.com/fabric8io/kubernetes-client/commit/0e89753de925d8582215228fbbcbc82846ce285c", "message": "Improve running time of DefaultSharedIndexInformerTest", "committedDate": "2020-08-25T14:07:27Z", "type": "commit"}, {"oid": "0e89753de925d8582215228fbbcbc82846ce285c", "url": "https://github.com/fabric8io/kubernetes-client/commit/0e89753de925d8582215228fbbcbc82846ce285c", "message": "Improve running time of DefaultSharedIndexInformerTest", "committedDate": "2020-08-25T14:07:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQ4ODEzNg==", "url": "https://github.com/fabric8io/kubernetes-client/pull/2436#discussion_r476488136", "bodyText": "\u2764\ufe0f", "author": "manusa", "createdAt": "2020-08-25T14:22:02Z", "path": "kubernetes-tests/src/test/java/io/fabric8/kubernetes/client/mock/DefaultSharedIndexInformerTest.java", "diffHunk": "@@ -115,8 +116,9 @@ public void onDelete(Pod oldObj, boolean deletedFinalStateUnknown) { }\n     factory.startAllRegisteredInformers();\n \n     foundExistingPod.await(LATCH_AWAIT_PERIOD_IN_SECONDS, TimeUnit.SECONDS);\n-    waitUntilResourceVersionSynced();\n     assertEquals(0L, foundExistingPod.getCount());\n+    await().atMost(1, TimeUnit.SECONDS)\n+      .until(() -> podInformer.lastSyncResourceVersion().equals(endResourceVersion));", "originalCommit": "0e89753de925d8582215228fbbcbc82846ce285c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}