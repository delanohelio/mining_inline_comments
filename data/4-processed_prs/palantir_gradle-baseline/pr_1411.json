{"pr_number": 1411, "pr_title": "Improve gradle-baseline-java integration with IntelliJ import", "pr_createdAt": "2020-06-12T15:48:56Z", "pr_url": "https://github.com/palantir/gradle-baseline/pull/1411", "timeline": [{"oid": "7bc3228c4c1b8f9ea585b32720f9a2c549c74b9e", "url": "https://github.com/palantir/gradle-baseline/commit/7bc3228c4c1b8f9ea585b32720f9a2c549c74b9e", "message": "Improve gradle-baseline-java integration with IntelliJ import", "committedDate": "2020-06-12T15:27:52Z", "type": "commit"}, {"oid": "f724713d8942bd817677ea606eb5a2819aa10424", "url": "https://github.com/palantir/gradle-baseline/commit/f724713d8942bd817677ea606eb5a2819aa10424", "message": "Add generated changelog entries", "committedDate": "2020-06-12T15:12:08Z", "type": "commit"}, {"oid": "339b5f9afb156eef51f2ef2cc93d6e277590ed05", "url": "https://github.com/palantir/gradle-baseline/commit/339b5f9afb156eef51f2ef2cc93d6e277590ed05", "message": "Fix checkstyle", "committedDate": "2020-06-12T15:53:06Z", "type": "commit"}, {"oid": "bd58a9a66ac578e8d409f57b4cf36177918e15cd", "url": "https://github.com/palantir/gradle-baseline/commit/bd58a9a66ac578e8d409f57b4cf36177918e15cd", "message": "SpotlessApply", "committedDate": "2020-06-12T15:58:48Z", "type": "commit"}, {"oid": "692a046470332dd1202bb2c6b3c6027ca0abdba8", "url": "https://github.com/palantir/gradle-baseline/commit/692a046470332dd1202bb2c6b3c6027ca0abdba8", "message": "Rely on single-file style settings to generate new style files", "committedDate": "2020-06-12T16:59:43Z", "type": "commit"}, {"oid": "2c7854c6676498679005fd92a6f989cbc3ec5d84", "url": "https://github.com/palantir/gradle-baseline/commit/2c7854c6676498679005fd92a6f989cbc3ec5d84", "message": "Test potential fix", "committedDate": "2020-06-12T17:14:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIzNzA3Ng==", "url": "https://github.com/palantir/gradle-baseline/pull/1411#discussion_r440237076", "bodyText": "I'd flip this so it performs the action when (and if) the BaselineCheckstyle plugin is applied.\nIn the current state, you're dependent on the order of application, so if BaselineCheckstyle is applied later, intellij won't be configured correctly.\nproject.plugins.withType(BaselineCheckstyle) {\n  // rest of the function\n}", "author": "dansanduleac", "createdAt": "2020-06-15T14:56:21Z", "path": "gradle-baseline-java/src/main/groovy/com/palantir/baseline/plugins/BaselineIdea.groovy", "diffHunk": "@@ -203,6 +294,29 @@ class BaselineIdea extends AbstractBaselinePlugin {\n         }\n \n         project.logger.debug \"Baseline: Configuring Checkstyle for Idea\"\n+\n+        addCheckstyleNode(node)\n+        addCheckstyleExternalDependencies(node)\n+    }\n+\n+    private static void addCheckstyleIntellijImport(project) {\n+        def checkstyle = project.plugins.findPlugin(BaselineCheckstyle)\n+        if (checkstyle == null) {\n+            project.logger.debug \"Baseline: Skipping IDEA checkstyle configuration since baseline-checkstyle not applied\"\n+            return\n+        }", "originalCommit": "2c7854c6676498679005fd92a6f989cbc3ec5d84", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI1MTc3NA==", "url": "https://github.com/palantir/gradle-baseline/pull/1411#discussion_r440251774", "bodyText": "I copied this from the existing checkstyle application. Would you recommend I flip it for both then?", "author": "aldexis", "createdAt": "2020-06-15T15:16:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIzNzA3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMwMzg4MQ==", "url": "https://github.com/palantir/gradle-baseline/pull/1411#discussion_r440303881", "bodyText": "only for code paths that happen at configuration time", "author": "dansanduleac", "createdAt": "2020-06-15T16:36:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIzNzA3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgxNjg1NA==", "url": "https://github.com/palantir/gradle-baseline/pull/1411#discussion_r440816854", "bodyText": "I ended up flipping it for both addCheckstyle (called from within ideaRootModel.project.ipr.withXml so maybe that wasn't needed?) and addCheckstyleIntellijImport (mostly because I didn't see your edit before pushing, but I also think consistency is better - I'd even want to not have duplicate code but didn't find a nice way to do it because I'm not familiar enough with the code and how gradle configuration works yet)", "author": "aldexis", "createdAt": "2020-06-16T12:39:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIzNzA3Ng=="}], "type": "inlineReview"}, {"oid": "2f312b24944eb15558c61c2cddc7be8d9b1355ed", "url": "https://github.com/palantir/gradle-baseline/commit/2f312b24944eb15558c61c2cddc7be8d9b1355ed", "message": "Address comment", "committedDate": "2020-06-16T12:36:53Z", "type": "commit"}, {"oid": "4a794f5134f32ca62c9e8229b197776902d42a96", "url": "https://github.com/palantir/gradle-baseline/commit/4a794f5134f32ca62c9e8229b197776902d42a96", "message": "fix copyright re-adding block", "committedDate": "2020-06-17T14:58:37Z", "type": "commit"}, {"oid": "070ee37b5e68a6923e5e8a1c774dd26d1972c79c", "url": "https://github.com/palantir/gradle-baseline/commit/070ee37b5e68a6923e5e8a1c774dd26d1972c79c", "message": "add to existing code_scheme if exists", "committedDate": "2020-06-17T15:05:24Z", "type": "commit"}, {"oid": "beaf8abc3b62897fb37189c85598b9a19d0276e3", "url": "https://github.com/palantir/gradle-baseline/commit/beaf8abc3b62897fb37189c85598b9a19d0276e3", "message": "fix another double add", "committedDate": "2020-06-17T15:17:34Z", "type": "commit"}, {"oid": "34cdd353b6951709bbc525e20b6f5b7366147813", "url": "https://github.com/palantir/gradle-baseline/commit/34cdd353b6951709bbc525e20b6f5b7366147813", "message": "explanatory comment", "committedDate": "2020-06-17T15:23:38Z", "type": "commit"}, {"oid": "6ad4a82ad692937499f3f84bfb67ae9eb08f7d60", "url": "https://github.com/palantir/gradle-baseline/commit/6ad4a82ad692937499f3f84bfb67ae9eb08f7d60", "message": "fix setting default copyright too", "committedDate": "2020-06-17T15:26:30Z", "type": "commit"}]}