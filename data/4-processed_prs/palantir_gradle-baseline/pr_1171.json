{"pr_number": 1171, "pr_title": "Fix `LoggerEnclosingClass` edge cases for type parameters and anonymous classes", "pr_createdAt": "2020-01-16T13:09:43Z", "pr_url": "https://github.com/palantir/gradle-baseline/pull/1171", "timeline": [{"oid": "7ae23b72ec39d1c96f01de615fc9ee9ce4fc07b7", "url": "https://github.com/palantir/gradle-baseline/commit/7ae23b72ec39d1c96f01de615fc9ee9ce4fc07b7", "message": "Fix `LoggerEnclosingClass` edge cases for type parameters and anonymous classes", "committedDate": "2020-01-16T13:07:23Z", "type": "commit"}, {"oid": "1c232b677c7412ca6dc818f0bc960b0efa2c4414", "url": "https://github.com/palantir/gradle-baseline/commit/1c232b677c7412ca6dc818f0bc960b0efa2c4414", "message": "Add generated changelog entries", "committedDate": "2020-01-16T13:07:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQxMDAxMA==", "url": "https://github.com/palantir/gradle-baseline/pull/1171#discussion_r367410010", "bodyText": "I haven't encountered this in the wild (it's an odd thing to do) but fixed it while I'm here.", "author": "carterkozak", "createdAt": "2020-01-16T13:15:36Z", "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/LoggerEnclosingClass.java", "diffHunk": "@@ -83,8 +83,16 @@ public Description matchVariable(VariableTree tree, VisitorState state) {\n         return buildDescription(classArgument)\n                 .addFix(fix.replace(\n                         classArgument,\n-                        SuggestedFixes.prettyType(state, fix, enclosingClassSymbol.type) + \".class\")\n+                        enclosingClassSymbol.name + \".class\")\n                         .build())\n                 .build();\n     }\n+\n+    private static Symbol.ClassSymbol enclosingConcreteClass(Symbol.ClassSymbol input) {\n+        Symbol.ClassSymbol current = input;\n+        while (current != null && current.isAnonymous()) {\n+            current = ASTHelpers.enclosingClass(current);", "originalCommit": "1c232b677c7412ca6dc818f0bc960b0efa2c4414", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzQxMDM4Mw==", "url": "https://github.com/palantir/gradle-baseline/pull/1171#discussion_r367410383", "bodyText": "Simple name is sufficient here because the code we're updating is nested within the type -- the previous approach using prettyType wasn't necessary and included type parameters.", "author": "carterkozak", "createdAt": "2020-01-16T13:16:25Z", "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/LoggerEnclosingClass.java", "diffHunk": "@@ -83,8 +83,16 @@ public Description matchVariable(VariableTree tree, VisitorState state) {\n         return buildDescription(classArgument)\n                 .addFix(fix.replace(\n                         classArgument,\n-                        SuggestedFixes.prettyType(state, fix, enclosingClassSymbol.type) + \".class\")\n+                        enclosingClassSymbol.name + \".class\")", "originalCommit": "1c232b677c7412ca6dc818f0bc960b0efa2c4414", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}