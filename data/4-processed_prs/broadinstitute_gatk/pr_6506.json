{"pr_number": 6506, "pr_title": "Upgrade CNV WDLs to 1.0 spec", "pr_createdAt": "2020-03-16T22:55:32Z", "pr_url": "https://github.com/broadinstitute/gatk/pull/6506", "timeline": [{"oid": "7f84a7b6afab39712da2133da6d32da8544ac0b2", "url": "https://github.com/broadinstitute/gatk/commit/7f84a7b6afab39712da2133da6d32da8544ac0b2", "message": "Upgrade CNV wdls to 1.0", "committedDate": "2020-03-16T17:51:17Z", "type": "commit"}, {"oid": "7e6e54b95792858a0cd3c3c773ac54211d7e08ce", "url": "https://github.com/broadinstitute/gatk/commit/7e6e54b95792858a0cd3c3c773ac54211d7e08ce", "message": "Fix some dollar signs", "committedDate": "2020-03-16T17:51:17Z", "type": "commit"}, {"oid": "fe8c1ae8a4fd128c4603c9a8f8416b4af0de42e2", "url": "https://github.com/broadinstitute/gatk/commit/fe8c1ae8a4fd128c4603c9a8f8416b4af0de42e2", "message": "Fix funcotator json", "committedDate": "2020-03-16T20:12:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQzMzQ0Mw==", "url": "https://github.com/broadinstitute/gatk/pull/6506#discussion_r394433443", "bodyText": "Thanks for catching these!", "author": "samuelklee", "createdAt": "2020-03-18T15:27:08Z", "path": "scripts/cnv_wdl/cnv_common_tasks.wdl", "diffHunk": "@@ -47,49 +51,50 @@ task PreprocessIntervals {\n     }\n \n     output {\n-        File preprocessed_intervals = \"${base_filename}.preprocessed.interval_list\"\n+        File preprocessed_intervals = \"~{base_filename}.preprocessed.interval_list\"\n     }\n }\n \n task AnnotateIntervals {\n-    File intervals\n-    File ref_fasta\n-    File ref_fasta_fai\n-    File ref_fasta_dict\n-    File? mappability_track_bed\n-    File? mappability_track_bed_idx\n-    File? segmental_duplication_track_bed\n-    File? segmental_duplication_track_bed_idx\n-    Int? feature_query_lookahead\n-    File? gatk4_jar_override\n-\n-    # Runtime parameters\n-    String gatk_docker\n-    Int? mem_gb\n-    Int? disk_space_gb\n-    Boolean use_ssd = false\n-    Int? cpu\n-    Int? preemptible_attempts\n+    input {\n+      File intervals\n+      File ref_fasta\n+      File ref_fasta_fai\n+      File ref_fasta_dict\n+      File? mappability_track_bed\n+      File? mappability_track_bed_idx\n+      File? segmental_duplication_track_bed\n+      File? segmental_duplication_track_bed_idx\n+      Int? feature_query_lookahead\n+      File? gatk4_jar_override\n+\n+      # Runtime parameters\n+      String gatk_docker\n+      Int? mem_gb\n+      Int? disk_space_gb\n+      Boolean use_ssd = false\n+      Int? cpu\n+      Int? preemptible_attempts\n+    }\n \n     Int machine_mem_mb = select_first([mem_gb, 2]) * 1000\n     Int command_mem_mb = machine_mem_mb - 500\n     \n     # Determine output filename\n-    String filename = select_first([intervals, \"wgs.preprocessed\"])", "originalCommit": "fe8c1ae8a4fd128c4603c9a8f8416b4af0de42e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQzNTEwOQ==", "url": "https://github.com/broadinstitute/gatk/pull/6506#discussion_r394435109", "bodyText": "@ldgauthier noted we could remove this over in #6506.", "author": "samuelklee", "createdAt": "2020-03-18T15:29:14Z", "path": "scripts/cnv_wdl/cnv_common_tasks.wdl", "diffHunk": "@@ -1,20 +1,24 @@\n+version 1.0\n+\n task PreprocessIntervals {\n-    File? intervals\n-    File? blacklist_intervals\n-    File ref_fasta\n-    File ref_fasta_fai\n-    File ref_fasta_dict\n-    Int? padding\n-    Int? bin_length\n-    File? gatk4_jar_override\n-\n-    # Runtime parameters\n-    String gatk_docker\n-    Int? mem_gb\n-    Int? disk_space_gb\n-    Boolean use_ssd = false\n-    Int? cpu\n-    Int? preemptible_attempts\n+    input {\n+      File? intervals\n+      File? blacklist_intervals\n+      File ref_fasta\n+      File ref_fasta_fai\n+      File ref_fasta_dict", "originalCommit": "fe8c1ae8a4fd128c4603c9a8f8416b4af0de42e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUwOTIyOA==", "url": "https://github.com/broadinstitute/gatk/pull/6506#discussion_r394509228", "bodyText": "Oops, sorry, make that the closely named #6502.", "author": "samuelklee", "createdAt": "2020-03-18T17:11:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQzNTEwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUyMTUwMA==", "url": "https://github.com/broadinstitute/gatk/pull/6506#discussion_r394521500", "bodyText": "Sorry I just want to double-check what you meant. I just dug into the code path and saw that --sequence-dictionary is no longer required if --reference is supplied. However, the dictionary itself still needs to be there, ie if you have ref.fasta, then it expects ref.fasta.dict to exist as well. @ldgauthier can you clarify?", "author": "mwalker174", "createdAt": "2020-03-18T17:30:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQzNTEwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUyMjE3OQ==", "url": "https://github.com/broadinstitute/gatk/pull/6506#discussion_r394522179", "bodyText": "Ah, that sounds right.", "author": "samuelklee", "createdAt": "2020-03-18T17:31:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQzNTEwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYxNDQ4OA==", "url": "https://github.com/broadinstitute/gatk/pull/6506#discussion_r394614488", "bodyText": "Yes, it does still have to be in the input block so it gets localized since we don't implicitly localize any kind of indexes, but I see that you did take it out of the command line.  \ud83d\udc4d", "author": "ldgauthier", "createdAt": "2020-03-18T20:18:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQzNTEwOQ=="}], "type": "inlineReview"}, {"oid": "f357d409e911c6cef2574bbb7d49e611622a1504", "url": "https://github.com/broadinstitute/gatk/commit/f357d409e911c6cef2574bbb7d49e611622a1504", "message": "Remove unnecessary --sequence-dictionary arg in PreprocessIntervals", "committedDate": "2020-03-18T17:32:49Z", "type": "commit"}]}