{"pr_number": 5699, "pr_title": "Add syncBulkActions config to avoid the large amount of metrics data written ES in a single sync bulk request.", "pr_createdAt": "2020-10-20T10:08:19Z", "pr_url": "https://github.com/apache/skywalking/pull/5699", "timeline": [{"oid": "dabc3d574e8f6cf04b33b97b1f0f1530b273a658", "url": "https://github.com/apache/skywalking/commit/dabc3d574e8f6cf04b33b97b1f0f1530b273a658", "message": "Add syncBulkActions config.", "committedDate": "2020-10-20T10:02:00Z", "type": "commit"}, {"oid": "4949ef86d3cf8e12b2d14f1c72822129515d8149", "url": "https://github.com/apache/skywalking/commit/4949ef86d3cf8e12b2d14f1c72822129515d8149", "message": "Merge branch 'master' into master", "committedDate": "2020-10-20T12:09:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ2OTI5Nw==", "url": "https://github.com/apache/skywalking/pull/5699#discussion_r508469297", "bodyText": "Why put this in 10k? Is there any testing, which could prove this provides better performance?", "author": "wu-sheng", "createdAt": "2020-10-20T12:45:21Z", "path": "oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/StorageModuleElasticsearchConfig.java", "diffHunk": "@@ -52,6 +52,7 @@\n     private int superDatasetIndexShardsFactor = 5;\n     private int indexRefreshInterval = 2;\n     private int bulkActions = 2000;\n+    private int syncBulkActions = 10000;", "originalCommit": "4949ef86d3cf8e12b2d14f1c72822129515d8149", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU2NDIyNQ==", "url": "https://github.com/apache/skywalking/pull/5699#discussion_r508564225", "bodyText": "In our production environment, it's 100k. However, considering that most people try skywalking, the machine configuration is not so high, and this is a configurable item, so the initial value is set to 10k.", "author": "Ax1an", "createdAt": "2020-10-20T14:36:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ2OTI5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODkzOTk0MQ==", "url": "https://github.com/apache/skywalking/pull/5699#discussion_r508939941", "bodyText": "I am a little concern about the size, whether it is too big for a normal user.", "author": "wu-sheng", "createdAt": "2020-10-21T01:46:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ2OTI5Nw=="}], "type": "inlineReview"}, {"oid": "05d32e75e5d0288a5d67510222f66e67b42ad4b5", "url": "https://github.com/apache/skywalking/commit/05d32e75e5d0288a5d67510222f66e67b42ad4b5", "message": "Add change logs for 8.2.0", "committedDate": "2020-10-20T14:41:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODkxMTM0MA==", "url": "https://github.com/apache/skywalking/pull/5699#discussion_r508911340", "bodyText": "I think this description is not correct, you just separate the config, can't avoid that thing", "author": "wu-sheng", "createdAt": "2020-10-21T00:01:22Z", "path": "changes/changes-8.2.0.md", "diffHunk": "@@ -87,6 +87,7 @@\n * Fix end time bug in the query process.\n * Fix `Exporter INCREMENT mode` is not working.\n * Fix an error when executing startup.bat when the log directory exists\n+* Add syncBulkActions config to avoid the large amount of metrics data written ES in a single sync bulk request.", "originalCommit": "05d32e75e5d0288a5d67510222f66e67b42ad4b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk0MTM4Mg==", "url": "https://github.com/apache/skywalking/pull/5699#discussion_r508941382", "bodyText": "Could change this to\n\nAdd syncBulkActions configuration to set up the batch size of the metrics persistent.", "author": "wu-sheng", "createdAt": "2020-10-21T01:52:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODkxMTM0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk0MjkxMA==", "url": "https://github.com/apache/skywalking/pull/5699#discussion_r508942910", "bodyText": "Done.", "author": "Ax1an", "createdAt": "2020-10-21T01:57:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODkxMTM0MA=="}], "type": "inlineReview"}, {"oid": "b44a3424514df08bfa56c7d4dd456457beb7852d", "url": "https://github.com/apache/skywalking/commit/b44a3424514df08bfa56c7d4dd456457beb7852d", "message": "Update change logs for 8.2.0", "committedDate": "2020-10-21T01:56:58Z", "type": "commit"}, {"oid": "a72205090d14ee062ae73d9d780a2a23b82807a4", "url": "https://github.com/apache/skywalking/commit/a72205090d14ee062ae73d9d780a2a23b82807a4", "message": "Update documents and comments.", "committedDate": "2020-10-21T02:46:01Z", "type": "commit"}, {"oid": "47386e82639a38ba2268e7dada47ffc5272249c6", "url": "https://github.com/apache/skywalking/commit/47386e82639a38ba2268e7dada47ffc5272249c6", "message": "Merge branch 'master' into master", "committedDate": "2020-10-21T03:21:37Z", "type": "commit"}]}