{"pr_number": 5347, "pr_title": "Elastic job plugin use wrong span type", "pr_createdAt": "2020-08-18T09:01:22Z", "pr_url": "https://github.com/apache/skywalking/pull/5347", "timeline": [{"oid": "e50fe4f350e829b70284c6ca22f35871ccaddf92", "url": "https://github.com/apache/skywalking/commit/e50fe4f350e829b70284c6ca22f35871ccaddf92", "message": "fix", "committedDate": "2020-08-18T08:53:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAzNjg0OQ==", "url": "https://github.com/apache/skywalking/pull/5347#discussion_r472036849", "bodyText": "Do you want to analyze? If you want, add logic span tag.", "author": "wu-sheng", "createdAt": "2020-08-18T09:16:14Z", "path": "apm-sniffer/apm-sdk-plugin/elastic-job-3.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/elasticjob/ElasticJobExecutorInterceptor.java", "diffHunk": "@@ -36,7 +35,7 @@ public void beforeMethod(EnhancedInstance objInst, Method method, Object[] allAr\n         ShardingContexts shardingContexts = (ShardingContexts) allArguments[0];\n         Integer item = (Integer) allArguments[1];\n         String operateName = ComponentsDefine.ELASTIC_JOB.getName() + \"/\" + shardingContexts.getJobName();\n-        AbstractSpan span = ContextManager.createEntrySpan(operateName, new ContextCarrier());\n+        AbstractSpan span = ContextManager.createLocalSpan(operateName);", "originalCommit": "e50fe4f350e829b70284c6ca22f35871ccaddf92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI0NjIzMw==", "url": "https://github.com/apache/skywalking/pull/5347#discussion_r472246233", "bodyText": "@tristaZero @terrymanu After this is added, on the SkyWalking UI, you will have the job metrics, besides the traces, including\n\nExecution time, including avg, percentile\nSuccessful rate, determined through whether the main entrance has an exception\nWhat other endpoints(HTTP/gRPC) this task depends on.\n\nThis is a thing we called the logic endpoint.", "author": "wu-sheng", "createdAt": "2020-08-18T14:36:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAzNjg0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjc1NTYwMQ==", "url": "https://github.com/apache/skywalking/pull/5347#discussion_r472755601", "bodyText": "It sounds a great feature. Express my thinks to @zhaoyuguang and @wu-sheng .", "author": "tristaZero", "createdAt": "2020-08-19T06:28:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAzNjg0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjk0MDMwNA==", "url": "https://github.com/apache/skywalking/pull/5347#discussion_r472940304", "bodyText": "Elastic-job`s had specification logic-span", "author": "zhaoyuguang", "createdAt": "2020-08-19T10:53:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAzNjg0OQ=="}], "type": "inlineReview"}, {"oid": "b487c5d261770a8f4c09f6c5b050b9e52d545ed0", "url": "https://github.com/apache/skywalking/commit/b487c5d261770a8f4c09f6c5b050b9e52d545ed0", "message": "Merge branch 'master' into zhaoyuguang_0221", "committedDate": "2020-08-18T09:16:17Z", "type": "commit"}, {"oid": "cad8a1342cfcff71b2c37dba1537784f406d7d68", "url": "https://github.com/apache/skywalking/commit/cad8a1342cfcff71b2c37dba1537784f406d7d68", "message": "Normative logic-span", "committedDate": "2020-08-19T10:47:53Z", "type": "commit"}, {"oid": "76a3db856f9485da4f49b7a071f522da4b8a2771", "url": "https://github.com/apache/skywalking/commit/76a3db856f9485da4f49b7a071f522da4b8a2771", "message": "Merge branch 'zhaoyuguang_200819a' into zhaoyuguang_0221", "committedDate": "2020-08-19T10:50:22Z", "type": "commit"}, {"oid": "71d56e431721774ab0442b65ad30cd4ea65b02db", "url": "https://github.com/apache/skywalking/commit/71d56e431721774ab0442b65ad30cd4ea65b02db", "message": "fixed", "committedDate": "2020-08-19T10:59:42Z", "type": "commit"}, {"oid": "ef72c4a6a0e7474ce64c5e59261ac96d2230c408", "url": "https://github.com/apache/skywalking/commit/ef72c4a6a0e7474ce64c5e59261ac96d2230c408", "message": "fix", "committedDate": "2020-08-19T12:18:32Z", "type": "commit"}]}