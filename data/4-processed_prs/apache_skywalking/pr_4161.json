{"pr_number": 4161, "pr_title": "add Dynamic Configuration Consul AclToken ", "pr_createdAt": "2020-01-02T08:29:38Z", "pr_url": "https://github.com/apache/skywalking/pull/4161", "timeline": [{"oid": "69814b3a4b15565bcc7c35a42632aedfefb4861a", "url": "https://github.com/apache/skywalking/commit/69814b3a4b15565bcc7c35a42632aedfefb4861a", "message": "Update ConsulConfigurationCenterSettings.java\n\nadd aclTokne", "committedDate": "2020-01-02T06:05:07Z", "type": "commit"}, {"oid": "3dba2e15bd53e03bb31c765bd370d7598f7a41d3", "url": "https://github.com/apache/skywalking/commit/3dba2e15bd53e03bb31c765bd370d7598f7a41d3", "message": "Update ConsulConfigurationWatcherRegister.java\n\nadd aclToken", "committedDate": "2020-01-02T06:06:50Z", "type": "commit"}, {"oid": "ab991f2b37f7caa67d45ae875fd8290a6f17c3d9", "url": "https://github.com/apache/skywalking/commit/ab991f2b37f7caa67d45ae875fd8290a6f17c3d9", "message": "Update application.yml\n\nadd aclToken", "committedDate": "2020-01-02T06:10:07Z", "type": "commit"}, {"oid": "01d2a75621a9db74a693ce9a07ee8db8c75cf277", "url": "https://github.com/apache/skywalking/commit/01d2a75621a9db74a693ce9a07ee8db8c75cf277", "message": "Update ConsulConfigurationCenterSettings.java\n\nadd aclToken", "committedDate": "2020-01-02T07:06:35Z", "type": "commit"}, {"oid": "41720188c6c2f9e3ef4761356f44501ca9c4e860", "url": "https://github.com/apache/skywalking/commit/41720188c6c2f9e3ef4761356f44501ca9c4e860", "message": "Update application.yml\n\nadd aclToken", "committedDate": "2020-01-02T08:37:37Z", "type": "commit"}, {"oid": "aff505b2726665ad21359c3c5b5fc7c5eb29d890", "url": "https://github.com/apache/skywalking/commit/aff505b2726665ad21359c3c5b5fc7c5eb29d890", "message": "add aclToken", "committedDate": "2020-01-02T08:48:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwMjk1NA==", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362402954", "bodyText": "If you want this too, you miss some codes change in the configuration model. Your changes are only related to cluster model.", "author": "wu-sheng", "createdAt": "2020-01-02T08:56:29Z", "path": "oap-server/server-bootstrap/src/main/resources/application.yml", "diffHunk": "@@ -223,6 +225,8 @@ configuration:\n #    hostAndPorts: ${consul.address}\n #    # Sync period in seconds. Defaults to 60 seconds.\n #    period: 1\n+#    # Consul aclToken\n+#    #aclToken: ${consul.aclToken}", "originalCommit": "aff505b2726665ad21359c3c5b5fc7c5eb29d890", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwNDUzNA==", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362404534", "bodyText": "\u662f\u4e0d\u7528\u6539\u8fd9\u4e2a\u6587\u4ef6\u4e48\uff1f", "author": "web-xiaxia", "createdAt": "2020-01-02T09:04:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwMjk1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwODAzNQ==", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362408035", "bodyText": "English, please. You are changing two places, one is cluster model, the other is configuration model. Both of them have Consul implementations, but they are totally different.", "author": "wu-sheng", "createdAt": "2020-01-02T09:17:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwMjk1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwODYyNg==", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362408626", "bodyText": "configuration model  and cluster model  have changed", "author": "web-xiaxia", "createdAt": "2020-01-02T09:20:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQwMjk1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQxMzU3Mg==", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362413572", "bodyText": "Why do not you use !Strings.isNullOrEmpty(config.getAclToken())? I think that it is more readable.", "author": "dmsolr", "createdAt": "2020-01-02T09:39:31Z", "path": "oap-server/server-cluster-plugin/cluster-consul-plugin/src/main/java/org/apache/skywalking/oap/server/cluster/plugin/consul/ClusterModuleConsulProvider.java", "diffHunk": "@@ -76,6 +76,10 @@ public ClusterModuleConsulProvider() {\n //                    we should set this value or it will be blocked forever\n                     .withConnectTimeoutMillis(3000);\n \n+            if (config.getAclToken() != null && !config.getAclToken().isEmpty()) {", "originalCommit": "aff505b2726665ad21359c3c5b5fc7c5eb29d890", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQyNTc4Ng==", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362425786", "bodyText": "@web-xiaxia this should be fixed", "author": "wu-sheng", "createdAt": "2020-01-02T10:21:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQxMzU3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQzNjUwNg==", "url": "https://github.com/apache/skywalking/pull/4161#discussion_r362436506", "bodyText": "Replacement completed", "author": "web-xiaxia", "createdAt": "2020-01-02T11:01:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQxMzU3Mg=="}], "type": "inlineReview"}, {"oid": "8c0f035261d4f4b0ba8b7e036fa2724397832df3", "url": "https://github.com/apache/skywalking/commit/8c0f035261d4f4b0ba8b7e036fa2724397832df3", "message": "Replace with util", "committedDate": "2020-01-02T10:58:05Z", "type": "commit"}, {"oid": "db0016ce81081e495b0b06e387ac66beab28d808", "url": "https://github.com/apache/skywalking/commit/db0016ce81081e495b0b06e387ac66beab28d808", "message": "Replace with util", "committedDate": "2020-01-02T11:00:34Z", "type": "commit"}, {"oid": "84c971e7eff29fe654daccc4f1358e7b08cb2062", "url": "https://github.com/apache/skywalking/commit/84c971e7eff29fe654daccc4f1358e7b08cb2062", "message": "add consul aclToken", "committedDate": "2020-01-02T11:12:48Z", "type": "commit"}]}