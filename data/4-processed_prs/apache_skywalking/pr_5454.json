{"pr_number": 5454, "pr_title": "Parse TLS mode from ALS", "pr_createdAt": "2020-09-08T01:56:52Z", "pr_url": "https://github.com/apache/skywalking/pull/5454", "timeline": [{"oid": "1a10284271958424210bc5f35f964e477a092f03", "url": "https://github.com/apache/skywalking/commit/1a10284271958424210bc5f35f964e477a092f03", "message": "Parse tls mode from als\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-09-08T01:46:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY0MzMzMw==", "url": "https://github.com/apache/skywalking/pull/5454#discussion_r484643333", "bodyText": "We don't visualize tls in the current UI. Please remove them.", "author": "wu-sheng", "createdAt": "2020-09-08T04:29:00Z", "path": "oap-server/server-bootstrap/src/main/resources/oal/core.oal", "diffHunk": "@@ -69,6 +69,12 @@ database_access_sla = from(DatabaseAccess.*).percent(status == true);\n database_access_cpm = from(DatabaseAccess.*).cpm();\n database_access_percentile = from(DatabaseAccess.latency).percentile(10);\n \n+// Example of TLS related metric. Detected point was not distinguished, that means mTLS requests from both sides will be\n+// counted in.\n+//////////\n+// service_relation_mtls_cpm = from(ServiceRelation.*).filter(tlsMode == \"mTLS\").cpm();\n+// service_instance_relation_mtls_cpm = from(ServiceInstanceRelation.*).filter(tlsMode == \"mTLS\").cpm();", "originalCommit": "1a10284271958424210bc5f35f964e477a092f03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ4Mzk2Mg==", "url": "https://github.com/apache/skywalking/pull/5454#discussion_r487483962", "bodyText": "done", "author": "hanahmily", "createdAt": "2020-09-13T05:31:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY0MzMzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQ4Mzk4Mw==", "url": "https://github.com/apache/skywalking/pull/5454#discussion_r487483983", "bodyText": "done", "author": "hanahmily", "createdAt": "2020-09-13T05:32:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY0MzMzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg1OTg2Mw==", "url": "https://github.com/apache/skywalking/pull/5454#discussion_r484859863", "bodyText": "This and service relation source have been changed, scope-definitions.md doc should be updated.\n\nservice_relation_mtls_cpm = from(ServiceRelation.*).filter(tlsMode == \"mTLS\").cpm();\n\nThis example should belong to the doc I pointed to you.", "author": "wu-sheng", "createdAt": "2020-09-08T11:57:36Z", "path": "oap-server/server-core/src/main/java/org/apache/skywalking/oap/server/core/source/ServiceInstanceRelation.java", "diffHunk": "@@ -103,6 +103,9 @@ public String getEntityId() {\n     @Getter\n     @Setter\n     private DetectPoint detectPoint;\n+    @Getter\n+    @Setter\n+    private String tlsMode;", "originalCommit": "1a10284271958424210bc5f35f964e477a092f03", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a94799248c0e42176b4fbcd53b4695739868647a", "url": "https://github.com/apache/skywalking/commit/a94799248c0e42176b4fbcd53b4695739868647a", "message": "Polish code\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-09-09T00:05:40Z", "type": "commit"}, {"oid": "14b0956a03f0e4004a1b41588d83af422b9806b0", "url": "https://github.com/apache/skywalking/commit/14b0956a03f0e4004a1b41588d83af422b9806b0", "message": "Merge branch 'master' into source-tls", "committedDate": "2020-09-13T05:31:07Z", "type": "commit"}]}