{"pr_number": 5987, "pr_title": "Fix logger-plugin module directory structure problem(Maven cannot trigger junit testing).", "pr_createdAt": "2020-12-10T09:59:24Z", "pr_url": "https://github.com/apache/skywalking/pull/5987", "timeline": [{"oid": "542401cad2051988614d537c6752317fa3fb2e1d", "url": "https://github.com/apache/skywalking/commit/542401cad2051988614d537c6752317fa3fb2e1d", "message": "Fix logger-plugin directory structure problem(Maven cannot trigger junit testing).", "committedDate": "2020-12-10T09:51:00Z", "type": "commit"}, {"oid": "a8badae51e051578c74413e519756e51fdb1141e", "url": "https://github.com/apache/skywalking/commit/a8badae51e051578c74413e519756e51fdb1141e", "message": "Update CHANGES.md.", "committedDate": "2020-12-10T09:53:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAzNDM5Mw==", "url": "https://github.com/apache/skywalking/pull/5987#discussion_r540034393", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix logger-plugin module directory structure problem(Maven cannot trigger junit testing).\n          \n      \n    \n    \n  \n\nThis fix is not related to the changelog, as the bug codes were introduced in the master only. Please remove.", "author": "wu-sheng", "createdAt": "2020-12-10T10:03:11Z", "path": "CHANGES.md", "diffHunk": "@@ -12,6 +12,7 @@ Release Notes.\n * The operation name of quartz-scheduler plugin, has been changed as the `quartz-scheduler/${className}` format.\n * Fix jdk-http and okhttp-3.x plugin did not overwrite the old trace header.\n * Support collecting logs of log4j, log4j2, and logback in the tracing context with a new `logger-plugin`.\n+* Fix logger-plugin module directory structure problem(Maven cannot trigger junit testing).", "originalCommit": "a8badae51e051578c74413e519756e51fdb1141e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8e363bcd7aa9a0049cdfb53fb7821931f6cb3a06", "url": "https://github.com/apache/skywalking/commit/8e363bcd7aa9a0049cdfb53fb7821931f6cb3a06", "message": "Update CHANGES.md", "committedDate": "2020-12-10T10:03:35Z", "type": "commit"}, {"oid": "b1bbd33ea3ef8c88a29571a39a2e883ac1c5f8c7", "url": "https://github.com/apache/skywalking/commit/b1bbd33ea3ef8c88a29571a39a2e883ac1c5f8c7", "message": "Merge branch 'master' into logger-plugin_fix", "committedDate": "2020-12-10T10:03:43Z", "type": "commit"}, {"oid": "61931d6c5e9ed84a0cba32db2145b688b56dcedd", "url": "https://github.com/apache/skywalking/commit/61931d6c5e9ed84a0cba32db2145b688b56dcedd", "message": "Update CHANGES.md.", "committedDate": "2020-12-10T10:05:27Z", "type": "commit"}, {"oid": "8c1a965f2ded2d15e827a827db2492da0c43780c", "url": "https://github.com/apache/skywalking/commit/8c1a965f2ded2d15e827a827db2492da0c43780c", "message": "Merge remote-tracking branch 'origin/logger-plugin_fix' into logger-plugin_fix", "committedDate": "2020-12-10T10:05:44Z", "type": "commit"}, {"oid": "de6fe64534924ac5d2f950340dc7afad4c9141a4", "url": "https://github.com/apache/skywalking/commit/de6fe64534924ac5d2f950340dc7afad4c9141a4", "message": "Polishing.", "committedDate": "2020-12-10T15:21:44Z", "type": "commit"}, {"oid": "d594f726ccd3cd74eb008dd4c5e61bc7e7c6fc13", "url": "https://github.com/apache/skywalking/commit/d594f726ccd3cd74eb008dd4c5e61bc7e7c6fc13", "message": "Polishing.", "committedDate": "2020-12-11T04:49:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY5NjYyMQ==", "url": "https://github.com/apache/skywalking/pull/5987#discussion_r540696621", "bodyText": "@zifeihan Why we should write another method named getLastsConfig() for UT. It seems that when any UT starts, initContextConfig() will be executed. Just curious \ud83d\ude04", "author": "vcjmhg", "createdAt": "2020-12-11T05:17:03Z", "path": "apm-sniffer/optional-plugins/logger-plugin/src/test/java/org/apache/skywalking/apm/plugin/logger/ContextConfigDefaultTest.java", "diffHunk": "@@ -24,7 +25,7 @@\n public class ContextConfigDefaultTest {\n     @Test\n     public void testDefaultConfig() {\n-        ContextConfig config = ContextConfig.getInstance();\n+        ContextConfig config = ContextConfig.getLatestConfig();", "originalCommit": "d594f726ccd3cd74eb008dd4c5e61bc7e7c6fc13", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDcwMTg3OQ==", "url": "https://github.com/apache/skywalking/pull/5987#discussion_r540701879", "bodyText": "@vcjmhg Hello, because maven test is in a jvm instance, the loading configuration file content is in singleton mode, so if the file content is modified in the test case, it will not take effect.", "author": "zifeihan", "createdAt": "2020-12-11T05:33:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY5NjYyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDcwMzM3MA==", "url": "https://github.com/apache/skywalking/pull/5987#discussion_r540703370", "bodyText": "@vcjmhg you can test success for every UT by manual, but it will failed in maven automatic test.", "author": "zifeihan", "createdAt": "2020-12-11T05:38:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY5NjYyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDcxNDkwNw==", "url": "https://github.com/apache/skywalking/pull/5987#discussion_r540714907", "bodyText": "ok , I got it. Thank u!", "author": "vcjmhg", "createdAt": "2020-12-11T06:13:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY5NjYyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDcwODgwOQ==", "url": "https://github.com/apache/skywalking/pull/5987#discussion_r540708809", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static ContextConfig getLatestConfig() {\n          \n          \n            \n                /**\n          \n          \n            \n                 * For testing use only.\n          \n          \n            \n                 * Avoid to use config cache. Load the configuration every time. \n          \n          \n            \n                 */\n          \n          \n            \n                static ContextConfig getLatestConfig() {\n          \n      \n    \n    \n  \n\nShould like this?", "author": "wu-sheng", "createdAt": "2020-12-11T05:55:22Z", "path": "apm-sniffer/optional-plugins/logger-plugin/src/main/java/org/apache/skywalking/apm/plugin/logger/ContextConfig.java", "diffHunk": "@@ -58,6 +58,10 @@ public static ContextConfig getInstance() {\n         return HolderContextConfig.INSTANCE;\n     }\n \n+    public static ContextConfig getLatestConfig() {", "originalCommit": "d594f726ccd3cd74eb008dd4c5e61bc7e7c6fc13", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f56c7e0c81eb97171124dae3cb67b0fc1a7aacf1", "url": "https://github.com/apache/skywalking/commit/f56c7e0c81eb97171124dae3cb67b0fc1a7aacf1", "message": "Update apm-sniffer/optional-plugins/logger-plugin/src/main/java/org/apache/skywalking/apm/plugin/logger/ContextConfig.java\n\nCo-authored-by: \u5434\u665f Wu Sheng <wu.sheng@foxmail.com>", "committedDate": "2020-12-11T05:59:37Z", "type": "commit"}]}