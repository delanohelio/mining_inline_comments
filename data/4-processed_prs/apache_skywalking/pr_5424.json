{"pr_number": 5424, "pr_title": "Add superdataset replicas number config", "pr_createdAt": "2020-09-01T13:20:12Z", "pr_url": "https://github.com/apache/skywalking/pull/5424", "timeline": [{"oid": "19f9c1856569765467f5b56b8c0497fc1e265210", "url": "https://github.com/apache/skywalking/commit/19f9c1856569765467f5b56b8c0497fc1e265210", "message": "distinct the number of metrics or common record index with super dataset index.", "committedDate": "2020-09-01T13:14:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE1MjM4Mw==", "url": "https://github.com/apache/skywalking/pull/5424#discussion_r481152383", "bodyText": "As you moved all superset config in one place in the doc and config file, please do the same thing for the config class", "author": "wu-sheng", "createdAt": "2020-09-01T13:50:18Z", "path": "oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/StorageModuleElasticsearchConfig.java", "diffHunk": "@@ -38,6 +39,12 @@\n     private int superDatasetIndexShardsFactor = 5;\n     @Setter\n     private int indexReplicasNumber = 0;\n+    /**\n+     * @since 8.2.0, the replicas number is for super size dataset record replicas number\n+     * @see SuperDataset\n+     */\n+    @Setter\n+    private int superDatasetIndexReplicasNumber = 0;", "originalCommit": "19f9c1856569765467f5b56b8c0497fc1e265210", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE1OTQxMQ==", "url": "https://github.com/apache/skywalking/pull/5424#discussion_r481159411", "bodyText": "done", "author": "EvanLjp", "createdAt": "2020-09-01T14:00:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE1MjM4Mw=="}], "type": "inlineReview"}, {"oid": "c01a1fde99433a8ad01968080d1755cfa4b634bf", "url": "https://github.com/apache/skywalking/commit/c01a1fde99433a8ad01968080d1755cfa4b634bf", "message": "clear up StorageModuleElasticsearchConfig", "committedDate": "2020-09-01T13:59:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE2MTk0OQ==", "url": "https://github.com/apache/skywalking/pull/5424#discussion_r481161949", "bodyText": "As usual, don't change the default value, it used to be 1 replicate. Many new users even don't expect this.", "author": "wu-sheng", "createdAt": "2020-09-01T14:03:59Z", "path": "docs/en/setup/backend/configuration-vocabulary.md", "diffHunk": "@@ -74,12 +74,13 @@ core|default|role|Option values, `Mixed/Receiver/Aggregator`. **Receiver** mode\n | - | - | password | Password of ElasticSearch cluster | SW_ES_PASSWORD | - |\n | - | - | trustStorePath | Trust JKS file path. Only work when user name and password opened | SW_STORAGE_ES_SSL_JKS_PATH | - |\n | - | - | trustStorePass | Trust JKS file password. Only work when user name and password opened | SW_STORAGE_ES_SSL_JKS_PASS | - |\n-| - | - | indexShardsNumber | Shard number of new indexes | SW_STORAGE_ES_INDEX_SHARDS_NUMBER | 1 |\n | - | - | secretsManagementFile| Secrets management file in the properties format includes the username, password, which are managed by 3rd party tool. Provide the capability to update them in the runtime.|SW_ES_SECRETS_MANAGEMENT_FILE | - |\n | - | - | dayStep| Represent the number of days in the one minute/hour/day index.| SW_STORAGE_DAY_STEP | 1|\n | - | - | indexShardsNumber | Shard number of new indexes | SW_STORAGE_ES_INDEX_SHARDS_NUMBER | 1 |\n-| - | - | superDatasetIndexShardsFactor | Super data set has been defined in the codes, such as trace segments. This factor provides more shards for the super data set, shards number = indexShardsNumber * superDatasetIndexShardsFactor. Also, this factor effects Zipkin and Jaeger traces.|SW_STORAGE_ES_SUPER_DATASET_INDEX_SHARDS_FACTOR|5 |\n | - | - | indexReplicasNumber | Replicas number of new indexes | SW_STORAGE_ES_INDEX_REPLICAS_NUMBER | 0 |\n+| - | - | superDatasetDayStep | Represent the number of days in the super size dataset record index, the default value is the same as dayStep when the value is less than 0.|SW_SUPERDATASET_STORAGE_DAY_STEP|-1 |\n+| - | - | superDatasetIndexShardsFactor | Super data set has been defined in the codes, such as trace segments. This factor provides more shards for the super data set, shards number = indexShardsNumber * superDatasetIndexShardsFactor. Also, this factor effects Zipkin and Jaeger traces.|SW_STORAGE_ES_SUPER_DATASET_INDEX_SHARDS_FACTOR|5 |\n+| - | - | superDatasetIndexReplicasNumber | Represent the replicas number in the super size dataset record index.|SW_STORAGE_ES_SUPER_DATASET_INDEX_REPLICAS_NUMBER|0 |", "originalCommit": "c01a1fde99433a8ad01968080d1755cfa4b634bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE5NDE5Mw==", "url": "https://github.com/apache/skywalking/pull/5424#discussion_r481194193", "bodyText": "the config is change to 0 at 2020-03-15", "author": "EvanLjp", "createdAt": "2020-09-01T14:47:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE2MTk0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE5NDY3Ng==", "url": "https://github.com/apache/skywalking/pull/5424#discussion_r481194676", "bodyText": "i just sync  real config to doc", "author": "EvanLjp", "createdAt": "2020-09-01T14:47:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE2MTk0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIxMTIzMA==", "url": "https://github.com/apache/skywalking/pull/5424#discussion_r481211230", "bodyText": "Got it.", "author": "wu-sheng", "createdAt": "2020-09-01T15:05:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE2MTk0OQ=="}], "type": "inlineReview"}]}