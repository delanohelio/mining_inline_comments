{"pr_number": 4593, "pr_title": "[BugFix] Fix wrong H2 column type", "pr_createdAt": "2020-03-30T14:47:26Z", "pr_url": "https://github.com/apache/skywalking/pull/4593", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI1MjQ1Mg==", "url": "https://github.com/apache/skywalking/pull/4593#discussion_r400252452", "bodyText": "Why change this?", "author": "wu-sheng", "createdAt": "2020-03-30T14:48:59Z", "path": "oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2TableInstaller.java", "diffHunk": "@@ -92,7 +92,7 @@ protected String getColumnType(ModelColumn column) {\n         } else if (String.class.equals(type)) {\n             return \"VARCHAR(\" + column.getLength() + \")\";\n         } else if (IntKeyLongValueHashMap.class.equals(type)) {\n-            return \"MEDIUMTEXT\";\n+            return \"VARCHAR(20000)\";", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI1NDAwNQ==", "url": "https://github.com/apache/skywalking/pull/4593#discussion_r400254005", "bodyText": "Why change this?", "author": "kezhenxu94", "createdAt": "2020-03-30T14:50:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI1MjQ1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI1NTY4NA==", "url": "https://github.com/apache/skywalking/pull/4593#discussion_r400255684", "bodyText": "But e2e still passed?\nThen you can't change this only. You need to override this method in the MySQL installer. Otherwise, the size of row could be over-length easily.", "author": "wu-sheng", "createdAt": "2020-03-30T14:53:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI1MjQ1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI2NzgxMw==", "url": "https://github.com/apache/skywalking/pull/4593#discussion_r400267813", "bodyText": "But e2e still passed?\n\n#4594", "author": "kezhenxu94", "createdAt": "2020-03-30T15:08:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI1MjQ1Mg=="}], "type": "inlineReview"}, {"oid": "50b6809dc2f9da426fff07520c1401f58b45d475", "url": "https://github.com/apache/skywalking/commit/50b6809dc2f9da426fff07520c1401f58b45d475", "message": "Fix wrong H2 column type\n\nMEDIUMTEXT in H2 is CLOB in JDBC type, and casting it to `String` causes `ClassCastException`", "committedDate": "2020-03-30T14:53:45Z", "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "e0cceec1e05efdd0d07339465ba2a21440c0a73b", "url": "https://github.com/apache/skywalking/commit/e0cceec1e05efdd0d07339465ba2a21440c0a73b", "message": "Fix wrong H2 column type\n\nMEDIUMTEXT in H2 is CLOB in JDBC type, and casting it to `String` causes `ClassCastException`", "committedDate": "2020-03-30T15:20:28Z", "type": "commit"}, {"oid": "e0cceec1e05efdd0d07339465ba2a21440c0a73b", "url": "https://github.com/apache/skywalking/commit/e0cceec1e05efdd0d07339465ba2a21440c0a73b", "message": "Fix wrong H2 column type\n\nMEDIUMTEXT in H2 is CLOB in JDBC type, and casting it to `String` causes `ClassCastException`", "committedDate": "2020-03-30T15:20:28Z", "type": "forcePushed"}]}