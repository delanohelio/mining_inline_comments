{"pr_number": 5897, "pr_title": "Insert group name into services of so11y and istio relevant metrics", "pr_createdAt": "2020-11-25T22:49:31Z", "pr_url": "https://github.com/apache/skywalking/pull/5897", "timeline": [{"oid": "798385aca1f500d486bc516c803489211050ef47", "url": "https://github.com/apache/skywalking/commit/798385aca1f500d486bc516c803489211050ef47", "message": "Add Istio control plane otel MAL expressions and UI template\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-12T09:32:57Z", "type": "commit"}, {"oid": "876a9e5f194fb34e329abd319bcc8d4cea61f293", "url": "https://github.com/apache/skywalking/commit/876a9e5f194fb34e329abd319bcc8d4cea61f293", "message": "Remove OpenCensus receiver, add OpenTelemetry receiver\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-12T12:23:35Z", "type": "commit"}, {"oid": "e4b875d7ca2c5cb545de5060bb6a817b98ecc132", "url": "https://github.com/apache/skywalking/commit/e4b875d7ca2c5cb545de5060bb6a817b98ecc132", "message": "Sum trace count metrics\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-14T05:48:17Z", "type": "commit"}, {"oid": "043d9670c829acfa377a8c17c17a6a7a188ef2e0", "url": "https://github.com/apache/skywalking/commit/043d9670c829acfa377a8c17c17a6a7a188ef2e0", "message": "Merge branch 'master' into otel-istio", "committedDate": "2020-11-18T00:22:38Z", "type": "commit"}, {"oid": "260453dfb909e3b92ba9bdd7c91afb83d2df6b69", "url": "https://github.com/apache/skywalking/commit/260453dfb909e3b92ba9bdd7c91afb83d2df6b69", "message": "Transfer oc receiver to ot receiver\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-18T02:45:32Z", "type": "commit"}, {"oid": "853339cea4e56d4f4800ff35a30ed1f005dd12f6", "url": "https://github.com/apache/skywalking/commit/853339cea4e56d4f4800ff35a30ed1f005dd12f6", "message": "Merge remote-tracking branch 'origin/master' into otel-istio", "committedDate": "2020-11-18T02:45:50Z", "type": "commit"}, {"oid": "51251d5a7fba0ba56863eb8abb78c64cc2ed93d9", "url": "https://github.com/apache/skywalking/commit/51251d5a7fba0ba56863eb8abb78c64cc2ed93d9", "message": "Merge branch 'otel-istio' of github.com:apache/skywalking into otel-istio", "committedDate": "2020-11-18T02:49:01Z", "type": "commit"}, {"oid": "00b23cf5372224823ea51c46f173260fc40d2d4a", "url": "https://github.com/apache/skywalking/commit/00b23cf5372224823ea51c46f173260fc40d2d4a", "message": "Create indices on boot\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-18T13:47:33Z", "type": "commit"}, {"oid": "b3a6ba62e6b398e71c81de111f3504af5ee06f29", "url": "https://github.com/apache/skywalking/commit/b3a6ba62e6b398e71c81de111f3504af5ee06f29", "message": "Merge remote-tracking branch 'origin/master' into otel-istio", "committedDate": "2020-11-18T13:48:18Z", "type": "commit"}, {"oid": "9c336559fe1cff0a519a4f4288f1db2c121a8f02", "url": "https://github.com/apache/skywalking/commit/9c336559fe1cff0a519a4f4288f1db2c121a8f02", "message": "Merge branch 'master' into otel-istio", "committedDate": "2020-11-23T02:20:57Z", "type": "commit"}, {"oid": "6a7512419ac18560762c79c728d0fbfc77b91570", "url": "https://github.com/apache/skywalking/commit/6a7512419ac18560762c79c728d0fbfc77b91570", "message": "Document istio metrics and otel receiver\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-23T03:53:26Z", "type": "commit"}, {"oid": "3f3a8b6623523ba84db7f0bea9d114149e61673e", "url": "https://github.com/apache/skywalking/commit/3f3a8b6623523ba84db7f0bea9d114149e61673e", "message": "Update CHANGES.md\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-23T03:59:59Z", "type": "commit"}, {"oid": "75ed9e65ef671a5ce39606fcd0469578acb6e387", "url": "https://github.com/apache/skywalking/commit/75ed9e65ef671a5ce39606fcd0469578acb6e387", "message": "Fix potential NPE\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-23T04:05:46Z", "type": "commit"}, {"oid": "42fc31fbaa92638ceb55c0e851c08137dfb7783c", "url": "https://github.com/apache/skywalking/commit/42fc31fbaa92638ceb55c0e851c08137dfb7783c", "message": "Update docs/en/setup/istio/README.md\n\nCo-authored-by: \u5434\u665f Wu Sheng <wu.sheng@foxmail.com>", "committedDate": "2020-11-23T06:50:45Z", "type": "commit"}, {"oid": "ccd07bc915b76c4b9daf99d5c990da74337c9558", "url": "https://github.com/apache/skywalking/commit/ccd07bc915b76c4b9daf99d5c990da74337c9558", "message": "Add namespace to meter and cleanup istio mixer\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-23T23:58:49Z", "type": "commit"}, {"oid": "4129d4a601c46ac30e4e7be352e0122fc329db5b", "url": "https://github.com/apache/skywalking/commit/4129d4a601c46ac30e4e7be352e0122fc329db5b", "message": "Update CHANGES.md\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-24T00:12:19Z", "type": "commit"}, {"oid": "edf490e9ee3409fc8f05b5ba3b750db879bf27c5", "url": "https://github.com/apache/skywalking/commit/edf490e9ee3409fc8f05b5ba3b750db879bf27c5", "message": "Update e2e case due to the change of meter metric name\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-24T00:36:52Z", "type": "commit"}, {"oid": "1718f38250894ef5a45e5a168f5b5a2878b450d3", "url": "https://github.com/apache/skywalking/commit/1718f38250894ef5a45e5a168f5b5a2878b450d3", "message": "Tweat names and docs\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-24T01:41:10Z", "type": "commit"}, {"oid": "daeb03cd5ccf9244cf8aa856c523259c52434187", "url": "https://github.com/apache/skywalking/commit/daeb03cd5ccf9244cf8aa856c523259c52434187", "message": "Update prometheus fetcher config, fix sql builder issue of h2\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-24T02:07:19Z", "type": "commit"}, {"oid": "68cc1ddea0eaa110ab4275cbf4f0f81040c3f8fe", "url": "https://github.com/apache/skywalking/commit/68cc1ddea0eaa110ab4275cbf4f0f81040c3f8fe", "message": "Update test case\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-24T03:37:18Z", "type": "commit"}, {"oid": "c0b2f9e447621eb4a4822fec6e26a7a45d3a08c0", "url": "https://github.com/apache/skywalking/commit/c0b2f9e447621eb4a4822fec6e26a7a45d3a08c0", "message": "Update docs/en/setup/istio/README.md\n\nCo-authored-by: \u5434\u665f Wu Sheng <wu.sheng@foxmail.com>", "committedDate": "2020-11-24T07:19:58Z", "type": "commit"}, {"oid": "4f2e0671ab13efb8c4005425d76a8ddb27ea822d", "url": "https://github.com/apache/skywalking/commit/4f2e0671ab13efb8c4005425d76a8ddb27ea822d", "message": "More docs and dist configuration\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-24T07:27:41Z", "type": "commit"}, {"oid": "5bac7dc355468b7b8b272eb4e8cad132631c8ac0", "url": "https://github.com/apache/skywalking/commit/5bac7dc355468b7b8b272eb4e8cad132631c8ac0", "message": "Exclude otel-oc-rules\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-24T10:13:01Z", "type": "commit"}, {"oid": "bbd9e9344b6184bd7747efdc39d9aca039a1aeef", "url": "https://github.com/apache/skywalking/commit/bbd9e9344b6184bd7747efdc39d9aca039a1aeef", "message": "Merge remote-tracking branch 'origin/master' into group-in-action", "committedDate": "2020-11-24T22:05:17Z", "type": "commit"}, {"oid": "84c692169a4768d0a4814a73abea8fd1bdec3540", "url": "https://github.com/apache/skywalking/commit/84c692169a4768d0a4814a73abea8fd1bdec3540", "message": "Split group into two different items\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-25T02:08:06Z", "type": "commit"}, {"oid": "0d6a6e6750967cfe523864fa971b7edb782d7197", "url": "https://github.com/apache/skywalking/commit/0d6a6e6750967cfe523864fa971b7edb782d7197", "message": "Merge branch 'master' into group-in-action\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-25T21:41:55Z", "type": "commit"}, {"oid": "fdee4a6d3d29463f3c357fffb07819a7a22cb082", "url": "https://github.com/apache/skywalking/commit/fdee4a6d3d29463f3c357fffb07819a7a22cb082", "message": "Update UI submodule\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-25T21:47:10Z", "type": "commit"}, {"oid": "233a86de94245c9b81e27daf5caa658e1d7be794", "url": "https://github.com/apache/skywalking/commit/233a86de94245c9b81e27daf5caa658e1d7be794", "message": "Update docker-compose\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-25T22:16:10Z", "type": "commit"}, {"oid": "54958b599208a20661b00420e4f3b2baf8b6b7bf", "url": "https://github.com/apache/skywalking/commit/54958b599208a20661b00420e4f3b2baf8b6b7bf", "message": "Document\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-25T22:46:20Z", "type": "commit"}, {"oid": "8c71635346f7bf3e3f2531e121835898d1afbd51", "url": "https://github.com/apache/skywalking/commit/8c71635346f7bf3e3f2531e121835898d1afbd51", "message": "Update doc\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-25T22:51:38Z", "type": "commit"}, {"oid": "16386163a12301be3baf52a79ae69b4098ad4094", "url": "https://github.com/apache/skywalking/commit/16386163a12301be3baf52a79ae69b4098ad4094", "message": "Revert docker-compose\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-25T23:58:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDcwNDY2OQ==", "url": "https://github.com/apache/skywalking/pull/5897#discussion_r530704669", "bodyText": "Please update the changelog for UI to include all updates, NOTE, there is a new update in UI(bug fix), please re-sync.", "author": "wu-sheng", "createdAt": "2020-11-26T00:18:57Z", "path": "CHANGES.md", "diffHunk": "@@ -54,6 +54,7 @@ Release Notes.\n * Fix \"transaction too large error\" when use TiDB as storage.\n * Add otel rules to ui template to observe Istio control plane.\n * Remove istio mixer\n+* Insert group name into services of so11y and istio relevant metrics\n \n #### UI\n * Fix incorrect label in radial chart in topology.", "originalCommit": "16386163a12301be3baf52a79ae69b4098ad4094", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDcwNTk3NA==", "url": "https://github.com/apache/skywalking/pull/5897#discussion_r530705974", "bodyText": "done", "author": "hanahmily", "createdAt": "2020-11-26T00:24:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDcwNDY2OQ=="}], "type": "inlineReview"}, {"oid": "997d7dd2811f77a18c27d7658bed5afcf9bfd281", "url": "https://github.com/apache/skywalking/commit/997d7dd2811f77a18c27d7658bed5afcf9bfd281", "message": "Merge branch 'master' into group-in-action", "committedDate": "2020-11-26T00:20:04Z", "type": "commit"}, {"oid": "fc2076c05d20412b0bf44370c1e206c8cbd075cf", "url": "https://github.com/apache/skywalking/commit/fc2076c05d20412b0bf44370c1e206c8cbd075cf", "message": "Update CHANGES.md and sync with UI\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-26T00:23:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDcwNjYyMQ==", "url": "https://github.com/apache/skywalking/pull/5897#discussion_r530706621", "bodyText": "UI update includes\n\napache/skywalking-rocketbot-ui#383\napache/skywalking-rocketbot-ui#367", "author": "wu-sheng", "createdAt": "2020-11-26T00:27:17Z", "path": "CHANGES.md", "diffHunk": "@@ -54,10 +54,12 @@ Release Notes.\n * Fix \"transaction too large error\" when use TiDB as storage.\n * Add otel rules to ui template to observe Istio control plane.\n * Remove istio mixer\n+* Insert group name into services of so11y and istio relevant metrics\n \n #### UI\n * Fix incorrect label in radial chart in topology.\n * Replace node-sass with dart-sass.\n+* Replace serviceFilter with serviceGroup", "originalCommit": "fc2076c05d20412b0bf44370c1e206c8cbd075cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDcwODg0OA==", "url": "https://github.com/apache/skywalking/pull/5897#discussion_r530708848", "bodyText": "done", "author": "hanahmily", "createdAt": "2020-11-26T00:36:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDcwNjYyMQ=="}], "type": "inlineReview"}, {"oid": "8d5dbe7d100a67c165967579c65b7e167998fd9a", "url": "https://github.com/apache/skywalking/commit/8d5dbe7d100a67c165967579c65b7e167998fd9a", "message": "More CHANGES of UI\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-26T00:28:19Z", "type": "commit"}, {"oid": "1657bca33f5da266a9299dafe5d102f66f6fbc3e", "url": "https://github.com/apache/skywalking/commit/1657bca33f5da266a9299dafe5d102f66f6fbc3e", "message": "Update e2e\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-26T01:38:30Z", "type": "commit"}, {"oid": "5207a0a4bc4422fcd0d56da02f2b71c7ca77e591", "url": "https://github.com/apache/skywalking/commit/5207a0a4bc4422fcd0d56da02f2b71c7ca77e591", "message": "Update so11y service name\n\nSigned-off-by: Gao Hongtao <hanahmily@gmail.com>", "committedDate": "2020-11-26T03:34:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc1NTI4OQ==", "url": "https://github.com/apache/skywalking/pull/5897#discussion_r530755289", "bodyText": "@kezhenxu94 As a reminder, please consider to don't hardcode this kind of thing in the next-generation e2e framework. This is too tricky.", "author": "wu-sheng", "createdAt": "2020-11-26T03:36:54Z", "path": "test/e2e/e2e-test/src/test/java/org/apache/skywalking/e2e/PythonE2E.java", "diffHunk": "@@ -101,7 +101,7 @@ public void tearDown() {\n     @RetryableTest\n     void services() throws Exception {\n         List<Service> services = graphql.services(new ServicesQuery().start(startTime).end(now()));\n-        services = services.stream().filter(s -> !s.getLabel().equals(\"oap-server\")).collect(Collectors.toList());\n+        services = services.stream().filter(s -> !s.getLabel().equals(\"oap::oap-server\")).collect(Collectors.toList());", "originalCommit": "5207a0a4bc4422fcd0d56da02f2b71c7ca77e591", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc1ODQ2OA==", "url": "https://github.com/apache/skywalking/pull/5897#discussion_r530758468", "bodyText": "My preference is, so11y test cases should leverage the new group field to filter services in https://github.com/apache/skywalking-query-protocol/blob/d3608e86f7c9aaf54aa4ad2c8d2afd09d0680dd6/metadata.graphqls#L72.", "author": "hanahmily", "createdAt": "2020-11-26T03:50:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc1NTI4OQ=="}], "type": "inlineReview"}]}