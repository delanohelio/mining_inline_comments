{"pr_number": 6003, "pr_title": "Checkstyle plugin checks test codes", "pr_createdAt": "2020-12-14T07:07:42Z", "pr_url": "https://github.com/apache/skywalking/pull/6003", "timeline": [{"oid": "d111e5dadb7de8dcd8209f87a8813a50dcfe99e2", "url": "https://github.com/apache/skywalking/commit/d111e5dadb7de8dcd8209f87a8813a50dcfe99e2", "message": "Merge pull request #1 from apache/master\n\nramain the last", "committedDate": "2020-05-27T02:58:57Z", "type": "commit"}, {"oid": "ad67170d39f576e20f9bd4cb43bb8be4f18b4857", "url": "https://github.com/apache/skywalking/commit/ad67170d39f576e20f9bd4cb43bb8be4f18b4857", "message": "Merge pull request #2 from apache/master\n\nupdate localbase", "committedDate": "2020-07-01T09:39:53Z", "type": "commit"}, {"oid": "cd07f9b2980b4a3bab8f85cc9233c4e3f01a70b7", "url": "https://github.com/apache/skywalking/commit/cd07f9b2980b4a3bab8f85cc9233c4e3f01a70b7", "message": "Merge pull request #4 from apache/master\n\nupdate to date of time", "committedDate": "2020-08-28T02:05:29Z", "type": "commit"}, {"oid": "0e9e1264405eb5b08be73201f15305f1d122f5f4", "url": "https://github.com/apache/skywalking/commit/0e9e1264405eb5b08be73201f15305f1d122f5f4", "message": "Merge pull request #6 from apache/master\n\nupdate project", "committedDate": "2020-09-14T12:50:18Z", "type": "commit"}, {"oid": "46fa43aae633373c835d1252c5d100dd915eee91", "url": "https://github.com/apache/skywalking/commit/46fa43aae633373c835d1252c5d100dd915eee91", "message": "Merge pull request #10 from apache/master\n\nupdate from main base", "committedDate": "2020-12-01T11:20:46Z", "type": "commit"}, {"oid": "a8657af574ac8726b4915b2389fb9ad7e24009ed", "url": "https://github.com/apache/skywalking/commit/a8657af574ac8726b4915b2389fb9ad7e24009ed", "message": "Merge branch 'master' of https://github.com/vcjmhg/skywalking", "committedDate": "2020-12-11T05:01:49Z", "type": "commit"}, {"oid": "6668ba947e56517be2a08dbfb5b7d727fa12c3d7", "url": "https://github.com/apache/skywalking/commit/6668ba947e56517be2a08dbfb5b7d727fa12c3d7", "message": "Merge branch 'master' of https://github.com/apache/skywalking", "committedDate": "2020-12-12T08:13:59Z", "type": "commit"}, {"oid": "3983baa21730e75f5bd6e549504751463d634781", "url": "https://github.com/apache/skywalking/commit/3983baa21730e75f5bd6e549504751463d634781", "message": "Merge branch 'master' of https://github.com/apache/skywalking", "committedDate": "2020-12-13T09:06:42Z", "type": "commit"}, {"oid": "3b976cc939a2c133ae531214451a558cb4e487fa", "url": "https://github.com/apache/skywalking/commit/3b976cc939a2c133ae531214451a558cb4e487fa", "message": "add checkstyle plugin for test/plugin/pom.xml", "committedDate": "2020-12-13T12:08:59Z", "type": "commit"}, {"oid": "dba6f2a074da720fa1e220a547017457d165f530", "url": "https://github.com/apache/skywalking/commit/dba6f2a074da720fa1e220a547017457d165f530", "message": "remove unused imports", "committedDate": "2020-12-13T13:22:33Z", "type": "commit"}, {"oid": "e930b48621de36898c69276fad8f64c9bf80cd71", "url": "https://github.com/apache/skywalking/commit/e930b48621de36898c69276fad8f64c9bf80cd71", "message": "fix the problem of licence error for docker-compose-test.yaml", "committedDate": "2020-12-14T03:02:14Z", "type": "commit"}, {"oid": "be04c42daf92226bd86a1ef1076ff12d1f2ab8ca", "url": "https://github.com/apache/skywalking/commit/be04c42daf92226bd86a1ef1076ff12d1f2ab8ca", "message": "move the licence to first line for scenario.sh", "committedDate": "2020-12-14T03:06:20Z", "type": "commit"}, {"oid": "4294582740f63c51f06d3c2af61bdf5564a89db3", "url": "https://github.com/apache/skywalking/commit/4294582740f63c51f06d3c2af61bdf5564a89db3", "message": "Change the variable name to camel case name", "committedDate": "2020-12-14T03:08:24Z", "type": "commit"}, {"oid": "898a2c8a021594750adc3256b573a1ec8597c2e7", "url": "https://github.com/apache/skywalking/commit/898a2c8a021594750adc3256b573a1ec8597c2e7", "message": "modify pom.xml", "committedDate": "2020-12-14T05:41:21Z", "type": "commit"}, {"oid": "5d53fdb114feb07fbb676137fdf3842cd2512374", "url": "https://github.com/apache/skywalking/commit/5d53fdb114feb07fbb676137fdf3842cd2512374", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-14T05:52:24Z", "type": "commit"}, {"oid": "025e3785efc3b46154a9b43d5647e0e6d1b48d5f", "url": "https://github.com/apache/skywalking/commit/025e3785efc3b46154a9b43d5647e0e6d1b48d5f", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-15T03:17:21Z", "type": "commit"}, {"oid": "31b201a8e1d83fa435d4a9fa2a3aef916d92f2ed", "url": "https://github.com/apache/skywalking/commit/31b201a8e1d83fa435d4a9fa2a3aef916d92f2ed", "message": "[fix]make sure that depends_on can be set correctly", "committedDate": "2020-12-15T04:00:02Z", "type": "commit"}, {"oid": "780bf0f7a91d2d701dc7029c11c582a017d4accd", "url": "https://github.com/apache/skywalking/commit/780bf0f7a91d2d701dc7029c11c582a017d4accd", "message": "format apm-toolkit-trace-scenario", "committedDate": "2020-12-15T06:40:29Z", "type": "commit"}, {"oid": "9edf745fb14e0a8334036a68c25fc6dd7752f16b", "url": "https://github.com/apache/skywalking/commit/9edf745fb14e0a8334036a68c25fc6dd7752f16b", "message": "format baidu-brpc-scenario", "committedDate": "2020-12-15T07:04:04Z", "type": "commit"}, {"oid": "eb1bf09c0bbe5ea8fee061003f303f20ba15f3eb", "url": "https://github.com/apache/skywalking/commit/eb1bf09c0bbe5ea8fee061003f303f20ba15f3eb", "message": "format correlation-autotag-scenario", "committedDate": "2020-12-15T07:20:50Z", "type": "commit"}, {"oid": "d4fcd3574e14d6684cc8cfd1563a9220b75381e6", "url": "https://github.com/apache/skywalking/commit/d4fcd3574e14d6684cc8cfd1563a9220b75381e6", "message": "format customize-scenario", "committedDate": "2020-12-15T07:30:39Z", "type": "commit"}, {"oid": "8bb28b14e39f3e8080f5bd091b963cdd165a4922", "url": "https://github.com/apache/skywalking/commit/8bb28b14e39f3e8080f5bd091b963cdd165a4922", "message": "format cxf-scenario", "committedDate": "2020-12-15T07:47:26Z", "type": "commit"}, {"oid": "64484279723df0af7d75c93cf465bec16a98bccd", "url": "https://github.com/apache/skywalking/commit/64484279723df0af7d75c93cf465bec16a98bccd", "message": "format dubbo-2.5.x-scenario and dubbo-2.5.7.x-scenario", "committedDate": "2020-12-15T08:14:16Z", "type": "commit"}, {"oid": "349e38c4ed3bac464508b4d95fb1eeaa67f7e3f3", "url": "https://github.com/apache/skywalking/commit/349e38c4ed3bac464508b4d95fb1eeaa67f7e3f3", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-15T10:34:47Z", "type": "commit"}, {"oid": "0ae71d0251d4dc2335bc2a8e8d66d4354f44357a", "url": "https://github.com/apache/skywalking/commit/0ae71d0251d4dc2335bc2a8e8d66d4354f44357a", "message": "reformate dubbo-2.5.x-scenario and dubbo-2.5.7.x-scenario", "committedDate": "2020-12-16T03:05:44Z", "type": "commit"}, {"oid": "b47152de8f3946128205058f3e7e472adc6330ed", "url": "https://github.com/apache/skywalking/commit/b47152de8f3946128205058f3e7e472adc6330ed", "message": "formate elasticjob-2.x-scenario", "committedDate": "2020-12-16T03:11:29Z", "type": "commit"}, {"oid": "a5a34ddcc7404c9742395ef1fb8ab3a7c53b85a2", "url": "https://github.com/apache/skywalking/commit/a5a34ddcc7404c9742395ef1fb8ab3a7c53b85a2", "message": "format  elasticsearch-6.x-scenario and elasticsearch-7.x-scenario", "committedDate": "2020-12-16T03:29:12Z", "type": "commit"}, {"oid": "5a2adf4a54ecc936d5892bddd666a0890b5a56fa", "url": "https://github.com/apache/skywalking/commit/5a2adf4a54ecc936d5892bddd666a0890b5a56fa", "message": "Merge branch 'master' into f-checkstyle", "committedDate": "2020-12-16T04:49:31Z", "type": "commit"}, {"oid": "279427856e340ea3969fa345204ded895558587e", "url": "https://github.com/apache/skywalking/commit/279427856e340ea3969fa345204ded895558587e", "message": "format  dbcp-2.x-scenario", "committedDate": "2020-12-16T05:34:31Z", "type": "commit"}, {"oid": "bd385f28e75ef327c6e874153f35af34c43351b0", "url": "https://github.com/apache/skywalking/commit/bd385f28e75ef327c6e874153f35af34c43351b0", "message": "format  finagle-scenario", "committedDate": "2020-12-16T14:59:44Z", "type": "commit"}, {"oid": "0b7ab2dc2c34e8904d531ef184e31fc5c981dd12", "url": "https://github.com/apache/skywalking/commit/0b7ab2dc2c34e8904d531ef184e31fc5c981dd12", "message": "format  gateway-scenario", "committedDate": "2020-12-16T15:02:10Z", "type": "commit"}, {"oid": "96f6c91c257d9685abf9902ce2e0f14b565cc7ce", "url": "https://github.com/apache/skywalking/commit/96f6c91c257d9685abf9902ce2e0f14b565cc7ce", "message": "format grpc-scenario", "committedDate": "2020-12-17T02:31:46Z", "type": "commit"}, {"oid": "cb593cc1d6bb66ad0b55c38086dbfa16705066ec", "url": "https://github.com/apache/skywalking/commit/cb593cc1d6bb66ad0b55c38086dbfa16705066ec", "message": "format influxdb-scenario", "committedDate": "2020-12-17T02:40:57Z", "type": "commit"}, {"oid": "5816e9f2c411e76da4b41b4c03137b3dcf7b4cbc", "url": "https://github.com/apache/skywalking/commit/5816e9f2c411e76da4b41b4c03137b3dcf7b4cbc", "message": "format logger-scenario", "committedDate": "2020-12-17T02:51:54Z", "type": "commit"}, {"oid": "ecb3128835c43a0696d8f13040b0a768c04dba39", "url": "https://github.com/apache/skywalking/commit/ecb3128835c43a0696d8f13040b0a768c04dba39", "message": "format mariadb-scenario", "committedDate": "2020-12-17T02:56:14Z", "type": "commit"}, {"oid": "34260a86aae34a26b321c533c2df431a568cfdc4", "url": "https://github.com/apache/skywalking/commit/34260a86aae34a26b321c533c2df431a568cfdc4", "message": "format mongodb-scenario", "committedDate": "2020-12-17T03:03:38Z", "type": "commit"}, {"oid": "a327c2d107388b894ce2f469391db6d7b305db11", "url": "https://github.com/apache/skywalking/commit/a327c2d107388b894ce2f469391db6d7b305db11", "message": "format scheduler-2.x-scenario", "committedDate": "2020-12-17T03:10:46Z", "type": "commit"}, {"oid": "26d7c5c209fc2032315783e3e2c6e09b7337941a", "url": "https://github.com/apache/skywalking/commit/26d7c5c209fc2032315783e3e2c6e09b7337941a", "message": "format shardingsphere-scenario", "committedDate": "2020-12-17T06:13:46Z", "type": "commit"}, {"oid": "5f860003581674b3fe2804acfcefdb0cfe8ed14c", "url": "https://github.com/apache/skywalking/commit/5f860003581674b3fe2804acfcefdb0cfe8ed14c", "message": "format spring-scheduled-scenario", "committedDate": "2020-12-17T06:21:26Z", "type": "commit"}, {"oid": "38252b967bdebab75f3537dbb1e791d401afe20d", "url": "https://github.com/apache/skywalking/commit/38252b967bdebab75f3537dbb1e791d401afe20d", "message": "format thrift-scenario", "committedDate": "2020-12-17T06:24:14Z", "type": "commit"}, {"oid": "c6da05946423dc67a951f483d43a4eb0ad3d7519", "url": "https://github.com/apache/skywalking/commit/c6da05946423dc67a951f483d43a4eb0ad3d7519", "message": "format vertx-eventbus-scenario", "committedDate": "2020-12-17T06:28:08Z", "type": "commit"}, {"oid": "21e60edeaea85e46a7941bc9524f75eb87024fd5", "url": "https://github.com/apache/skywalking/commit/21e60edeaea85e46a7941bc9524f75eb87024fd5", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-17T06:39:34Z", "type": "commit"}, {"oid": "6ba8992bc74386a6e30ec0f1a8b32d5c769ab777", "url": "https://github.com/apache/skywalking/commit/6ba8992bc74386a6e30ec0f1a8b32d5c769ab777", "message": "format exception-checker-spring-scenario and exception-checker-tomcat-scenario", "committedDate": "2020-12-17T08:43:48Z", "type": "commit"}, {"oid": "1bbd52695fcd7deb32f1fbc7c383677d841ec4a1", "url": "https://github.com/apache/skywalking/commit/1bbd52695fcd7deb32f1fbc7c383677d841ec4a1", "message": "format jdk-threading-scenario", "committedDate": "2020-12-17T08:56:49Z", "type": "commit"}, {"oid": "6fdd5fadc284fbed44c31de2b16caab5836ac49e", "url": "https://github.com/apache/skywalking/commit/6fdd5fadc284fbed44c31de2b16caab5836ac49e", "message": "format kafka-scenario", "committedDate": "2020-12-17T09:01:04Z", "type": "commit"}, {"oid": "7ebe1ef851d6099d992befe996a018d92a2dd548", "url": "https://github.com/apache/skywalking/commit/7ebe1ef851d6099d992befe996a018d92a2dd548", "message": "format pulsar-scenario", "committedDate": "2020-12-17T09:09:39Z", "type": "commit"}, {"oid": "99779fbef260a9978fa46c66a4d46785b318aa6c", "url": "https://github.com/apache/skywalking/commit/99779fbef260a9978fa46c66a4d46785b318aa6c", "message": "format redisson-scenario", "committedDate": "2020-12-17T09:15:28Z", "type": "commit"}, {"oid": "01bbc937b2726e3bbc5dad4d7c53359451f66736", "url": "https://github.com/apache/skywalking/commit/01bbc937b2726e3bbc5dad4d7c53359451f66736", "message": "format retransform-scenario", "committedDate": "2020-12-17T09:18:22Z", "type": "commit"}, {"oid": "846a999d975474e01ad3b484e7571edc03071bae", "url": "https://github.com/apache/skywalking/commit/846a999d975474e01ad3b484e7571edc03071bae", "message": "format retransform-class-scenario", "committedDate": "2020-12-17T09:27:26Z", "type": "commit"}, {"oid": "97a91b03155ec7d07ab5ef71656c05efbfa21a91", "url": "https://github.com/apache/skywalking/commit/97a91b03155ec7d07ab5ef71656c05efbfa21a91", "message": "format spring-3.0.x-scenario", "committedDate": "2020-12-17T09:30:17Z", "type": "commit"}, {"oid": "2b5acb24bfbe7bde9a26edca9332300da13f8020", "url": "https://github.com/apache/skywalking/commit/2b5acb24bfbe7bde9a26edca9332300da13f8020", "message": "format spring-3.1.x-scenario", "committedDate": "2020-12-17T09:35:04Z", "type": "commit"}, {"oid": "1359039486cb0b133ac1410a6f25edbf5c947d53", "url": "https://github.com/apache/skywalking/commit/1359039486cb0b133ac1410a6f25edbf5c947d53", "message": "format spring-4.1.x-scenario", "committedDate": "2020-12-17T09:38:05Z", "type": "commit"}, {"oid": "dde08cdbb227a2d465e497d0e70bdee76158d76d", "url": "https://github.com/apache/skywalking/commit/dde08cdbb227a2d465e497d0e70bdee76158d76d", "message": "format spring-4.3.x-scenario", "committedDate": "2020-12-17T11:44:32Z", "type": "commit"}, {"oid": "407483f3d8174eae823ab44f402a15ec17cc0356", "url": "https://github.com/apache/skywalking/commit/407483f3d8174eae823ab44f402a15ec17cc0356", "message": "format spring-kafka-scenario", "committedDate": "2020-12-17T11:48:44Z", "type": "commit"}, {"oid": "54c55e1ab0817c193181416f66abaca0a16152d6", "url": "https://github.com/apache/skywalking/commit/54c55e1ab0817c193181416f66abaca0a16152d6", "message": "format spring-kafka-2.2.x-scenario", "committedDate": "2020-12-17T11:51:50Z", "type": "commit"}, {"oid": "f0a9d70bb3cb7062a2bb867c7c67f6ca4e666567", "url": "https://github.com/apache/skywalking/commit/f0a9d70bb3cb7062a2bb867c7c67f6ca4e666567", "message": "format spring-kafka-2.3.x-scenario", "committedDate": "2020-12-17T11:54:32Z", "type": "commit"}, {"oid": "602789b35ab6ed301e35999fc0644c3f41470643", "url": "https://github.com/apache/skywalking/commit/602789b35ab6ed301e35999fc0644c3f41470643", "message": "format spring-tx-scenario", "committedDate": "2020-12-17T11:58:04Z", "type": "commit"}, {"oid": "a82f917e994c5ba186d1b1c9f318685ab441c109", "url": "https://github.com/apache/skywalking/commit/a82f917e994c5ba186d1b1c9f318685ab441c109", "message": "format spring-job-2.x-scenario", "committedDate": "2020-12-17T12:00:21Z", "type": "commit"}, {"oid": "5783c50cb5a0df112dfceb32f6c22b08070b9cf9", "url": "https://github.com/apache/skywalking/commit/5783c50cb5a0df112dfceb32f6c22b08070b9cf9", "message": "check jdk14-with-gson-scenario independently", "committedDate": "2020-12-17T12:23:48Z", "type": "commit"}, {"oid": "549d86485dcac61661ddb24538b4e6159da25e26", "url": "https://github.com/apache/skywalking/commit/549d86485dcac61661ddb24538b4e6159da25e26", "message": "format hbase-scenario", "committedDate": "2020-12-17T12:44:09Z", "type": "commit"}, {"oid": "2d40dd9f5b9d97e938ae0989b0a99935383ffe35", "url": "https://github.com/apache/skywalking/commit/2d40dd9f5b9d97e938ae0989b0a99935383ffe35", "message": "modify generator.sh", "committedDate": "2020-12-17T14:30:33Z", "type": "commit"}, {"oid": "9ea2ed2af7cb28c59d36989813e1868a5b7ea0f4", "url": "https://github.com/apache/skywalking/commit/9ea2ed2af7cb28c59d36989813e1868a5b7ea0f4", "message": "Merge branch 'master' into f-checkstyle", "committedDate": "2020-12-19T12:04:57Z", "type": "commit"}, {"oid": "44be1d7d1d87fe5f411a01212c9174e7b2660b85", "url": "https://github.com/apache/skywalking/commit/44be1d7d1d87fe5f411a01212c9174e7b2660b85", "message": "reformate excpetion-checker-spring-scenario", "committedDate": "2020-12-19T12:41:00Z", "type": "commit"}, {"oid": "753c73ab8ba68717d67dfa5306a7d224a6f26805", "url": "https://github.com/apache/skywalking/commit/753c73ab8ba68717d67dfa5306a7d224a6f26805", "message": "Merge branch 'f-checkstyle' of https://github.com/vcjmhg/skywalking into f-checkstyle", "committedDate": "2020-12-19T12:41:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546236009", "bodyText": "Due to \n  \n    \n      skywalking/test/plugin/generator.sh\n    \n    \n        Lines 79 to 84\n      in\n      753c73a\n    \n    \n    \n    \n\n        \n          \n           # add scenario_name into plugin/pom.xml \n        \n\n        \n          \n           isWrite=$(cat ./pom.xml | grep $scenario_name) \n        \n\n        \n          \n           if [[ -z  $isWrite ]] \n        \n\n        \n          \n           then \n        \n\n        \n          \n             sed -i '/<\\/sourceDirectories>/i <sourceDirectory>'\"$scenario_name\"'<\\/sourceDirectory>' ./pom.xml \n        \n\n        \n          \n           fi \n        \n    \n  \n\n, could we give rid of this?", "author": "wu-sheng", "createdAt": "2020-12-19T13:01:20Z", "path": "test/plugin/pom.xml", "diffHunk": "@@ -99,6 +103,151 @@\n                     <encoding>${project.build.sourceEncoding}</encoding>\n                 </configuration>\n             </plugin>\n+            <plugin>\n+                <artifactId>maven-checkstyle-plugin</artifactId>\n+                <version>${maven-checkstyle-plugin.version}</version>\n+                <configuration>\n+                    <configLocation>${maven.multiModuleProjectDirectory}/apm-checkstyle/checkStyle.xml</configLocation>\n+                    <headerLocation>${maven.multiModuleProjectDirectory}/apm-checkstyle/CHECKSTYLE_HEAD</headerLocation>\n+                    <encoding>UTF-8</encoding>\n+                    <consoleOutput>true</consoleOutput>\n+                    <includeTestSourceDirectory>true</includeTestSourceDirectory>\n+                    <failOnViolation>${checkstyle.fails.on.error}</failOnViolation>\n+                    <sourceDirectories>\n+                        <sourceDirectory>${project.build.sourceDirectory}</sourceDirectory>", "originalCommit": "753c73ab8ba68717d67dfa5306a7d224a6f26805", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI0MTQwMA==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546241400", "bodyText": "Because scenarios is not a maven project, if only configure <sourceDirectory>${project.build.sourceDirectory}</sourceDirectory>, the maven project in scenarios can't  be checked.", "author": "vcjmhg", "createdAt": "2020-12-19T13:58:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI0Mjg4Mg==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546242882", "bodyText": "I know, I mean you are using this script to generate these configurations, right? But the hard-code configurations are still there, https://github.com/apache/skywalking/blob/753c73ab8b/test/plugin/pom.xml#L116-L222\nDo I misunderstand something?", "author": "wu-sheng", "createdAt": "2020-12-19T14:14:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI0NDI0Ng==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546244246", "bodyText": "The generator.sh is to generate NEW scenario project, and it will add a new line of that project to https://github.com/apache/skywalking/blob/753c73ab8b/test/plugin/pom.xml#L116-L222", "author": "kezhenxu94", "createdAt": "2020-12-19T14:27:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI0NDgzMA==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546244830", "bodyText": "Why limit it to new only? Why don't we do that before running the tests and check the code style first?", "author": "wu-sheng", "createdAt": "2020-12-19T14:34:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMxNjAzNQ==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546316035", "bodyText": "It will be ok to write this script into run.sh. If we do so, it will ensure that the code style is checked before running.", "author": "vcjmhg", "createdAt": "2020-12-20T03:40:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMxNjQwMQ==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546316401", "bodyText": "Yes, then this part could be removed and don't require the new contributor to add.", "author": "wu-sheng", "createdAt": "2020-12-20T03:45:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMyNzY1MQ==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546327651", "bodyText": "There are some problems that should be considered, if we write the scripts into run.sh:\n\nWe execute scenarios in a different order and the content of pom.xml may be different, which breaks idempotence and may cause conflicts when merging.\nSome scenarios may need to be handled separately to check the code style. For example jdk14-with-gson-scenario cannot be checked by adding its name in plugin/pom.xml because of different jdk version.", "author": "vcjmhg", "createdAt": "2020-12-20T06:07:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMzMjE1NA==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546332154", "bodyText": "The changed pom.xml wouldn't be submitted or merged. It is updated in the CI process only.\n\nAdd the scenario name into pom.xml before run, and delete the added content after execution. Is it like this?\n\nCould you be more clear about what does this mean? Why does code style relate to JDK version?\n\nWhen I add  <sourceDirectory>scenarios/jdk14-with-gson-scenario</sourceDirectory> into plugin/pom.xml, We can see the following verification results\uff1a\nFailed to execute goal org.apache.maven.plugins:maven-checkstyle-plugin:3.1.0:check (validate) on project apache-skywalking-test-plugin: Failed during checkstyle configuration \nSo, I guess the reason may be caused by different jdk versions and I handle it separately. If my understanding is wrong or you have a better solution please let me know", "author": "vcjmhg", "createdAt": "2020-12-20T06:58:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMzMzQ2Nw==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546333467", "bodyText": "With your description, how about adding the check style plugin into every scenario's pom.xml, rather than governing the parent pom.xml?", "author": "wu-sheng", "createdAt": "2020-12-20T07:12:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMzMzk4MQ==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546333981", "bodyText": "The generator.sh you changed clearly has the chance to add codestyle check when setting a new plugin test scenario, right?", "author": "wu-sheng", "createdAt": "2020-12-20T07:17:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM2NDc2Mg==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546364762", "bodyText": "Yes,  it will add <sourceDirectory>scenario_name<\\/sourceDirectory> into pom.xml . It works well when I test on my pc.", "author": "vcjmhg", "createdAt": "2020-12-20T11:40:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM2NzI3NA==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546367274", "bodyText": "I don't mean this, Yes, it will add <sourceDirectory>scenario_name<\\/sourceDirectory> into pom.xml.\nI prefer you consider to add the plugin configuration into file like this one, https://github.com/apache/skywalking/blob/9c48d0686a/test/plugin/scenarios/activemq-scenario/pom.xml", "author": "wu-sheng", "createdAt": "2020-12-20T12:02:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM4MzEyOQ==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r546383129", "bodyText": "ok\uff0cI got it. I will have a try!", "author": "vcjmhg", "createdAt": "2020-12-20T14:17:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIzNjAwOQ=="}], "type": "inlineReview"}, {"oid": "3b799957ece3f9fbb5250ae54205dfc7d37388d8", "url": "https://github.com/apache/skywalking/commit/3b799957ece3f9fbb5250ae54205dfc7d37388d8", "message": "format scenarios", "committedDate": "2020-12-19T14:25:34Z", "type": "commit"}, {"oid": "f9dd362fa9364f3daeff50f1d04f484019db7de8", "url": "https://github.com/apache/skywalking/commit/f9dd362fa9364f3daeff50f1d04f484019db7de8", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-19T14:25:51Z", "type": "commit"}, {"oid": "73fc0d5d45e405cc3ac1ab8319acab269aaffd50", "url": "https://github.com/apache/skywalking/commit/73fc0d5d45e405cc3ac1ab8319acab269aaffd50", "message": "format scenarios", "committedDate": "2020-12-19T14:31:18Z", "type": "commit"}, {"oid": "9c48d0686a71931384db1ec51b15ade97daa567e", "url": "https://github.com/apache/skywalking/commit/9c48d0686a71931384db1ec51b15ade97daa567e", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-20T11:32:27Z", "type": "commit"}, {"oid": "9c48d0686a71931384db1ec51b15ade97daa567e", "url": "https://github.com/apache/skywalking/commit/9c48d0686a71931384db1ec51b15ade97daa567e", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-20T11:32:27Z", "type": "forcePushed"}, {"oid": "a6ac5fd1ac17820eaef749152f7f1f8403aa4e17", "url": "https://github.com/apache/skywalking/commit/a6ac5fd1ac17820eaef749152f7f1f8403aa4e17", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-22T11:00:51Z", "type": "commit"}, {"oid": "67e31b1c84e4ccc571ba22b1879c741e46f10e5c", "url": "https://github.com/apache/skywalking/commit/67e31b1c84e4ccc571ba22b1879c741e46f10e5c", "message": "fix retransform-class-tomcat-scenario", "committedDate": "2020-12-22T14:07:17Z", "type": "commit"}, {"oid": "7f9e6e1b98d6cf89291a505be232735a05034e27", "url": "https://github.com/apache/skywalking/commit/7f9e6e1b98d6cf89291a505be232735a05034e27", "message": "Merge branch 'master' into f-checkstyle", "committedDate": "2020-12-22T14:11:27Z", "type": "commit"}, {"oid": "2e1c8dfa29262d49836828c895bed1a06e276d2b", "url": "https://github.com/apache/skywalking/commit/2e1c8dfa29262d49836828c895bed1a06e276d2b", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-22T14:12:26Z", "type": "commit"}, {"oid": "ed1005a8b2903b065096ea5157666a1aa1fbc882", "url": "https://github.com/apache/skywalking/commit/ed1005a8b2903b065096ea5157666a1aa1fbc882", "message": "fix retransform-class-tomcat-scenario", "committedDate": "2020-12-24T13:27:53Z", "type": "commit"}, {"oid": "0c92e66d554b6fef3cb7e9eb2a105c6a835a7b18", "url": "https://github.com/apache/skywalking/commit/0c92e66d554b6fef3cb7e9eb2a105c6a835a7b18", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-24T13:30:15Z", "type": "commit"}, {"oid": "9525050df9d6b4f44fe283c3cf51bd49cafc3e92", "url": "https://github.com/apache/skywalking/commit/9525050df9d6b4f44fe283c3cf51bd49cafc3e92", "message": "Merge remote-tracking branch 'origin/f-checkstyle' into f-checkstyle", "committedDate": "2020-12-24T13:31:13Z", "type": "commit"}, {"oid": "549ae616bad6d123a36060b033b675e4ed730bab", "url": "https://github.com/apache/skywalking/commit/549ae616bad6d123a36060b033b675e4ed730bab", "message": "fix code style", "committedDate": "2020-12-24T13:53:26Z", "type": "commit"}, {"oid": "7f209cc1ace713483934eafd7e8bbd476b070a30", "url": "https://github.com/apache/skywalking/commit/7f209cc1ace713483934eafd7e8bbd476b070a30", "message": "restore retransform-class-tomcat-scenario", "committedDate": "2020-12-26T12:41:18Z", "type": "commit"}, {"oid": "587f20b240f18e3ba1feff343176e7d83f50065b", "url": "https://github.com/apache/skywalking/commit/587f20b240f18e3ba1feff343176e7d83f50065b", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-26T12:41:39Z", "type": "commit"}, {"oid": "7695f95b037876cdccd9c1b632db8b38abfdc32b", "url": "https://github.com/apache/skywalking/commit/7695f95b037876cdccd9c1b632db8b38abfdc32b", "message": "add and delete checkstyle-plugin automatically", "committedDate": "2020-12-28T13:34:58Z", "type": "commit"}, {"oid": "2fcdd25b7f97eaa37d0596ec8383f37d95f36eda", "url": "https://github.com/apache/skywalking/commit/2fcdd25b7f97eaa37d0596ec8383f37d95f36eda", "message": "Merge branch 'master' of https://github.com/apache/skywalking into f-checkstyle", "committedDate": "2020-12-28T13:35:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTM1ODI4MQ==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r549358281", "bodyText": "I think you forget to remove this.", "author": "wu-sheng", "createdAt": "2020-12-28T14:01:54Z", "path": "test/plugin/generator.sh", "diffHunk": "@@ -74,4 +74,11 @@ ${MVNW} archetype:generate \\\n     -DarchetypeCatalog=local \\\n     -DinteractiveMode=false \\\n     -DarchetypeVersion=1.0.0 \\\n-    -Dpackage=${package}\n\\ No newline at end of file\n+    -Dpackage=${package}\n+\n+# add scenario_name into plugin/pom.xml\n+isWrite=$(cat ./pom.xml | grep $scenario_name)\n+if [[ -z  $isWrite ]]\n+then\n+  sed -i '/<\\/sourceDirectories>/i <sourceDirectory>'\"$scenario_name\"'<\\/sourceDirectory>' ./pom.xml\n+fi", "originalCommit": "2fcdd25b7f97eaa37d0596ec8383f37d95f36eda", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6b145d5fe7abc911814e1e0143fa09d01b9d0bff", "url": "https://github.com/apache/skywalking/commit/6b145d5fe7abc911814e1e0143fa09d01b9d0bff", "message": "restore generator.sh", "committedDate": "2020-12-29T03:04:11Z", "type": "commit"}, {"oid": "dbfed835c7cee7782778b5e0c3e5375e23b7a73a", "url": "https://github.com/apache/skywalking/commit/dbfed835c7cee7782778b5e0c3e5375e23b7a73a", "message": "add ci support", "committedDate": "2020-12-29T04:56:28Z", "type": "commit"}, {"oid": "1af27987b04eec76836e09f93ed9aed9ff963e31", "url": "https://github.com/apache/skywalking/commit/1af27987b04eec76836e09f93ed9aed9ff963e31", "message": "try to format retransform-class-scenario", "committedDate": "2020-12-29T06:12:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU5NjU2MA==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r549596560", "bodyText": "@kezhenxu94 @dmsolr Are you ok about this?", "author": "wu-sheng", "createdAt": "2020-12-29T07:19:28Z", "path": ".github/workflows/plugins-jdk14-test.0.yaml", "diffHunk": "@@ -53,6 +53,8 @@ jobs:\n       - uses: actions/setup-java@v1\n         with:\n           java-version: 8\n+      - name: Add checkstyle-plugin\n+        run: sed -i '/<\\/sourceDirectories>/i <sourceDirectory>scenarios\\/jdk14-with-gson-scenario<\\/sourceDirectory>' test/plugin/pom.xml", "originalCommit": "1af27987b04eec76836e09f93ed9aed9ff963e31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYwMjE4Ng==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r549602186", "bodyText": "@kezhenxu94 @dmsolr Are you ok about this?\n\nWorks for me", "author": "kezhenxu94", "createdAt": "2020-12-29T07:42:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU5NjU2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYxMjA5Mg==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r549612092", "bodyText": "@vcjmhg Could you change this yaml as a matrix based? In case we forget we hard coded jdk14-with-gson-scenario here.", "author": "wu-sheng", "createdAt": "2020-12-29T08:18:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU5NjU2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYxMzk3NQ==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r549613975", "bodyText": "ok", "author": "vcjmhg", "createdAt": "2020-12-29T08:25:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTU5NjU2MA=="}], "type": "inlineReview"}, {"oid": "8fda5241ac8f902e4569ec493f3e264a638d3aa9", "url": "https://github.com/apache/skywalking/commit/8fda5241ac8f902e4569ec493f3e264a638d3aa9", "message": " make plugins-jdk14-test.0.yaml as a matrix based", "committedDate": "2020-12-29T08:40:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYyOTQ4MA==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r549629480", "bodyText": "You inject the style check in the CI control file, what is the purpose of this?", "author": "wu-sheng", "createdAt": "2020-12-29T09:15:55Z", "path": "test/plugin/run.sh", "diffHunk": "@@ -140,11 +140,19 @@ if [[ ! -d ${agent_home} ]]; then\n     echo \"[WARN] SkyWalking Agent not exists\"\n     ${mvnw} --batch-mode -f ${home}/../../pom.xml -Pagent -DskipTests clean package\n fi\n+# if it fails last time, relevant information will be deleted\n+sed -i '/<sourceDirectory>scenarios\\/'\"$scenario_name\"'<\\/sourceDirectory>/d' ./pom.xml\n+# add scenario_name into plugin/pom.xml\n+echo check code with the checkstyle-plugin\n+sed -i '/<\\/sourceDirectories>/i <sourceDirectory>scenarios\\/'\"$scenario_name\"'<\\/sourceDirectory>' ./pom.xml\n+", "originalCommit": "8fda5241ac8f902e4569ec493f3e264a638d3aa9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTY0MDM4Mg==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r549640382", "bodyText": "It ensures that the code will be checked when we run the scenario locally. And after checking, the injected code will be deleted.", "author": "vcjmhg", "createdAt": "2020-12-29T09:50:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYyOTQ4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTY0MTI5MA==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r549641290", "bodyText": "I see. But I feel a little concern about the dirty config(added but not removed somehow) will be pushed.", "author": "wu-sheng", "createdAt": "2020-12-29T09:53:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYyOTQ4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMDI3NzEwMQ==", "url": "https://github.com/apache/skywalking/pull/6003#discussion_r600277101", "bodyText": "I check out the newest code, 8.5.0-SNAPSHOT.\nRun this script failed in my MacBook. How to fix it?\nref: local-test-and-pull-request-to-the-upstream\n\u279c  skywalking git:(master) bash ./test/plugin/run.sh hbase-scenario\n+++ dirname ./test/plugin/run.sh\n++ cd ./test/plugin\n++ pwd\n+ home=/Users/nisiyong/CodeProjects/skywalking/test/plugin\n+ scenario_name=\n+ force_build=off\n+ cleanup=off\n+ debug_mode=\n+ mvnw=/Users/nisiyong/CodeProjects/skywalking/test/plugin/../../mvnw\n+ agent_home=/Users/nisiyong/CodeProjects/skywalking/test/plugin/../../skywalking-agent\n+ jacoco_home=/Users/nisiyong/CodeProjects/skywalking/test/plugin/../jacoco\n+ scenarios_home=/Users/nisiyong/CodeProjects/skywalking/test/plugin/scenarios\n+ num_of_testcases=\n+ image_version=jdk8-1.0.0\n++ date +%s\n+ start_stamp=1616572417\n+ parse_commandline hbase-scenario\n+ test 1 -gt 0\n+ _key=hbase-scenario\n+ case \"$_key\" in\n+ scenario_name=hbase-scenario\n+ shift\n+ test 0 -gt 0\n+ [[ off == \\o\\n ]]\n+ test -z hbase-scenario\n+ [[ ! -d /Users/nisiyong/CodeProjects/skywalking/test/plugin/../../skywalking-agent ]]\n+ sed -i '/<sourceDirectory>scenarios\\/hbase-scenario<\\/sourceDirectory>/d' ./pom.xml\nsed: 1: \"./pom.xml\": invalid command code .", "author": "nisiyong", "createdAt": "2021-03-24T08:46:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYyOTQ4MA=="}], "type": "inlineReview"}]}