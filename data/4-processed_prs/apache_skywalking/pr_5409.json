{"pr_number": 5409, "pr_title": "Update configuration-vocabulary.md and trace-sampling.md", "pr_createdAt": "2020-08-29T05:02:32Z", "pr_url": "https://github.com/apache/skywalking/pull/5409", "timeline": [{"oid": "a5fb7b31cf5e7d673967e4d5d80488151fd75921", "url": "https://github.com/apache/skywalking/commit/a5fb7b31cf5e7d673967e4d5d80488151fd75921", "message": "Update configuration-vocabulary.md and trace-sampling.md", "committedDate": "2020-08-29T05:00:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYwOTEzOA==", "url": "https://github.com/apache/skywalking/pull/5409#discussion_r479609138", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | - | - |forceSampleErrorSegment|When sampling mechanism active, this config can open(true) force save some error segment. true is default.|SW_FORCE_SAMPLE_ERROR_SEGMENT|true|\n          \n          \n            \n            | - | - |forceSampleErrorSegment|When sampling mechanism activated, this config would  make the error status segment sampled, ignoring the sampling rate.|SW_FORCE_SAMPLE_ERROR_SEGMENT|true|", "author": "wu-sheng", "createdAt": "2020-08-29T05:11:08Z", "path": "docs/en/setup/backend/configuration-vocabulary.md", "diffHunk": "@@ -133,6 +133,7 @@ core|default|role|Option values, `Mixed/Receiver/Aggregator`. **Receiver** mode\n | agent-analyzer | default | Agent Analyzer. | SW_AGENT_ANALYZER | default |\n | - | -| sampleRate|Sampling rate for receiving trace. The precision is 1/10000. 10000 means 100% sample in default.|SW_TRACE_SAMPLE_RATE|10000|\n | - | - |slowDBAccessThreshold|The slow database access thresholds. Unit ms.|SW_SLOW_DB_THRESHOLD|default:200,mongodb:100|\n+| - | - |forceSampleErrorSegment|When sampling mechanism active, this config can open(true) force save some error segment. true is default.|SW_FORCE_SAMPLE_ERROR_SEGMENT|true|", "originalCommit": "a5fb7b31cf5e7d673967e4d5d80488151fd75921", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYwOTIxMQ==", "url": "https://github.com/apache/skywalking/pull/5409#discussion_r479609211", "bodyText": "And change the sampling doc when same way. The previous version has some grammar issue.", "author": "wu-sheng", "createdAt": "2020-08-29T05:12:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYwOTEzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYwOTI2MQ==", "url": "https://github.com/apache/skywalking/pull/5409#discussion_r479609261", "bodyText": "Why is this added in the sampling doc?", "author": "wu-sheng", "createdAt": "2020-08-29T05:13:18Z", "path": "docs/en/setup/backend/trace-sampling.md", "diffHunk": "@@ -15,10 +15,18 @@ agent-analyzer:\n   default:\n     ...\n     sampleRate: ${SW_TRACE_SAMPLE_RATE:1000} # The sample rate precision is 1/10000. 10000 means 100% sample in default.\n+    slowDBAccessThreshold: ${SW_SLOW_DB_THRESHOLD:default:200,mongodb:100} # The slow database access thresholds. Unit ms.", "originalCommit": "a5fb7b31cf5e7d673967e4d5d80488151fd75921", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYwOTI3NQ==", "url": "https://github.com/apache/skywalking/pull/5409#discussion_r479609275", "bodyText": "Same question here.", "author": "wu-sheng", "createdAt": "2020-08-29T05:13:28Z", "path": "docs/en/setup/backend/trace-sampling.md", "diffHunk": "@@ -15,10 +15,18 @@ agent-analyzer:\n   default:\n     ...\n     sampleRate: ${SW_TRACE_SAMPLE_RATE:1000} # The sample rate precision is 1/10000. 10000 means 100% sample in default.\n+    slowDBAccessThreshold: ${SW_SLOW_DB_THRESHOLD:default:200,mongodb:100} # The slow database access thresholds. Unit ms.\n+    forceSampleErrorSegment: ${SW_FORCE_SAMPLE_ERROR_SEGMENT:true} # When sampling mechanism active, this config can open(true) force save some error segment. true is default.\n ```\n \n-`sampleRate` is for you to set sample rate to this backend. \n-The sample rate precision is 1/10000. 10000 means 100% sample in default. \n+`sampleRate` is for you to set sample rate to this backend.\n+The sample rate precision is 1/10000. 10000 means 100% sample in default.\n+\n+`slowDBAccessThreshold` is for you to set slow database access thresholds.", "originalCommit": "a5fb7b31cf5e7d673967e4d5d80488151fd75921", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYwOTM4Mw==", "url": "https://github.com/apache/skywalking/pull/5409#discussion_r479609383", "bodyText": "We don't sample the segment if the statement is slow, right?", "author": "wu-sheng", "createdAt": "2020-08-29T05:14:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYwOTI3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYxMzM0Ng==", "url": "https://github.com/apache/skywalking/pull/5409#discussion_r479613346", "bodyText": "@wu-sheng yes, We don't sampled segment if the statement is slow.", "author": "zifeihan", "createdAt": "2020-08-29T06:04:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYwOTI3NQ=="}], "type": "inlineReview"}, {"oid": "17c287450489a823151d5684a2a459f7155576c2", "url": "https://github.com/apache/skywalking/commit/17c287450489a823151d5684a2a459f7155576c2", "message": "Update configuration-vocabulary.md and trace-sampling.md", "committedDate": "2020-08-29T05:59:16Z", "type": "commit"}]}