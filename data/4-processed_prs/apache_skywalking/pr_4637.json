{"pr_number": 4637, "pr_title": "support `java` -> `nginx` -> `java` e2e test, and v3 protocol", "pr_createdAt": "2020-04-11T12:45:40Z", "pr_url": "https://github.com/apache/skywalking/pull/4637", "timeline": [{"oid": "7077525606d1a8ad350257dbbd1fb38f3c655bf8", "url": "https://github.com/apache/skywalking/commit/7077525606d1a8ad350257dbbd1fb38f3c655bf8", "message": "support `java` -> `nginx` -> `java` e2e test, and v3 protocol", "committedDate": "2020-04-11T12:40:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2MzYyNg==", "url": "https://github.com/apache/skywalking/pull/4637#discussion_r407063626", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  - 9091\n          \n          \n            \n                  - 9090", "author": "kezhenxu94", "createdAt": "2020-04-11T13:24:06Z", "path": "test/e2e/e2e-test/docker/lua/docker-compose.yml", "diffHunk": "@@ -42,7 +42,27 @@ services:\n       oap:\n         condition: service_healthy\n \n-  provider:\n+  provider-entry:\n+    build:\n+      context: ../../../\n+      dockerfile: e2e-test/docker/Dockerfile.provider\n+    networks:\n+      - e2e\n+    expose:\n+      - 9091", "originalCommit": "7077525606d1a8ad350257dbbd1fb38f3c655bf8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2MzY1Mw==", "url": "https://github.com/apache/skywalking/pull/4637#discussion_r407063653", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  test: [\"CMD\", \"sh\", \"-c\", \"nc -z 127.0.0.1 9091\"]\n          \n          \n            \n                  test: [\"CMD\", \"sh\", \"-c\", \"nc -z 127.0.0.1 9090\"]", "author": "kezhenxu94", "createdAt": "2020-04-11T13:24:13Z", "path": "test/e2e/e2e-test/docker/lua/docker-compose.yml", "diffHunk": "@@ -42,7 +42,27 @@ services:\n       oap:\n         condition: service_healthy\n \n-  provider:\n+  provider-entry:\n+    build:\n+      context: ../../../\n+      dockerfile: e2e-test/docker/Dockerfile.provider\n+    networks:\n+      - e2e\n+    expose:\n+      - 9091\n+    environment:\n+      - SW_AGENT_COLLECTOR_BACKEND_SERVICES=oap:11800\n+      - SW_AGENT_NAME=e2e-service-entry-provider\n+    depends_on:\n+      oap:\n+        condition: service_healthy\n+    healthcheck:\n+      test: [\"CMD\", \"sh\", \"-c\", \"nc -z 127.0.0.1 9091\"]", "originalCommit": "7077525606d1a8ad350257dbbd1fb38f3c655bf8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2MzY4Ng==", "url": "https://github.com/apache/skywalking/pull/4637#discussion_r407063686", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @ContainerHostAndPort(name = \"provider-entry\", port = 8080)\n          \n          \n            \n                @ContainerHostAndPort(name = \"provider-entry\", port = 9090)", "author": "kezhenxu94", "createdAt": "2020-04-11T13:24:36Z", "path": "test/e2e/e2e-test/src/test/java/org/apache/skywalking/e2e/LuaE2E.java", "diffHunk": "@@ -77,17 +77,22 @@\n     @ContainerHostAndPort(name = \"ui\", port = 8080)\n     private HostAndPort swWebappHostPort;\n \n+    @SuppressWarnings(\"unused\")\n+    @ContainerHostAndPort(name = \"provider-entry\", port = 8080)", "originalCommit": "7077525606d1a8ad350257dbbd1fb38f3c655bf8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2MzgzNg==", "url": "https://github.com/apache/skywalking/pull/4637#discussion_r407063836", "bodyText": "Thanks for your help", "author": "mrproliu", "createdAt": "2020-04-11T13:26:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2MzY4Ng=="}], "type": "inlineReview"}, {"oid": "e9438323cc343fe5603dd97a9c0fa04da470154b", "url": "https://github.com/apache/skywalking/commit/e9438323cc343fe5603dd97a9c0fa04da470154b", "message": "fix wrong lua e2e container port define", "committedDate": "2020-04-11T13:27:41Z", "type": "commit"}, {"oid": "730bd53b0f30fac0ad6e04906fc4bba3608cceb9", "url": "https://github.com/apache/skywalking/commit/730bd53b0f30fac0ad6e04906fc4bba3608cceb9", "message": "fix e2e error", "committedDate": "2020-04-11T13:43:56Z", "type": "commit"}]}