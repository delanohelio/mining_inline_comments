{"pr_number": 157, "pr_title": "Add provisioning method support", "pr_createdAt": "2020-04-29T07:28:56Z", "pr_url": "https://github.com/wso2/identity-api-server/pull/157", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzExNzk0Ng==", "url": "https://github.com/wso2/identity-api-server/pull/157#discussion_r417117946", "bodyText": "wait until kernel and multi-tenancy release", "author": "nilasini", "createdAt": "2020-04-29T07:29:44Z", "path": "pom.xml", "diffHunk": "@@ -524,8 +524,8 @@\n         <identity.inbound.saml2.version>5.7.6</identity.inbound.saml2.version>\n         <commons.beanutils.version>1.9.4</commons.beanutils.version>\n         <mavan.findbugsplugin.exclude.file>findbugs-exclude-filter.xml</mavan.findbugsplugin.exclude.file>\n-        <carbon.kernel.version>4.6.1-m3</carbon.kernel.version>\n-        <carbon.multitenancy.version>4.8.4</carbon.multitenancy.version>\n+        <carbon.kernel.version>4.6.1-m4</carbon.kernel.version>", "originalCommit": "579e54e93e00cf54690e3707bc7b87094c28234c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE5Njk4Mg==", "url": "https://github.com/wso2/identity-api-server/pull/157#discussion_r417196982", "bodyText": "extract to a constant", "author": "IsuraD", "createdAt": "2020-04-29T09:54:07Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/v1/core/ServerTenantManagementService.java", "diffHunk": "@@ -196,6 +197,24 @@ private Tenant createTenantInfoBean(TenantModel tenantModel) throws TenantManage\n             tenant.setAdminFirstName(tenantModel.getOwners().get(0).getFirstname());\n             tenant.setAdminLastName(tenantModel.getOwners().get(0).getLastname());\n             tenant.setEmail(tenantModel.getOwners().get(0).getEmail());\n+            String provisioningMethod = tenantModel.getOwners().get(0).getProvisioningMethod();\n+            if (INLINE.equalsIgnoreCase(provisioningMethod) || \"invite-via-email\".", "originalCommit": "579e54e93e00cf54690e3707bc7b87094c28234c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE5ODUyMQ==", "url": "https://github.com/wso2/identity-api-server/pull/157#discussion_r417198521", "bodyText": "provisioningMethod should be extensible. We better not limit to INLINE and invite-via-email. We don't need to check this and throw an error. we can write customizations based on the parameter value.", "author": "IsuraD", "createdAt": "2020-04-29T09:56:54Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/java/org/wso2/carbon/identity/api/server/tenant/management/v1/core/ServerTenantManagementService.java", "diffHunk": "@@ -196,6 +197,24 @@ private Tenant createTenantInfoBean(TenantModel tenantModel) throws TenantManage\n             tenant.setAdminFirstName(tenantModel.getOwners().get(0).getFirstname());\n             tenant.setAdminLastName(tenantModel.getOwners().get(0).getLastname());\n             tenant.setEmail(tenantModel.getOwners().get(0).getEmail());\n+            String provisioningMethod = tenantModel.getOwners().get(0).getProvisioningMethod();\n+            if (INLINE.equalsIgnoreCase(provisioningMethod) || \"invite-via-email\".\n+                    equalsIgnoreCase(provisioningMethod)) {\n+                if (INLINE.equalsIgnoreCase(provisioningMethod)) {\n+                    String password = tenantModel.getOwners().get(0).getPassword();\n+                    if (StringUtils.isBlank(password)) {\n+                        throw new TenantManagementClientException(TenantConstants.ErrorMessage.\n+                                ERROR_CODE_MISSING_REQUIRED_PARAMETER.getCode(),\n+                                String.format(TenantConstants.ErrorMessage.\n+                                        ERROR_CODE_MISSING_REQUIRED_PARAMETER.getMessage(), \"password\"));\n+                    }\n+                    tenant.setAdminPassword(password);\n+                }\n+                tenant.setProvisioningMethod(provisioningMethod);\n+            } else {\n+                throw new TenantManagementClientException(TenantConstants.ErrorMessage.", "originalCommit": "579e54e93e00cf54690e3707bc7b87094c28234c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE5ODc4MQ==", "url": "https://github.com/wso2/identity-api-server/pull/157#discussion_r417198781", "bodyText": "lets put the sample as inline", "author": "IsuraD", "createdAt": "2020-04-29T09:57:19Z", "path": "components/org.wso2.carbon.identity.api.server.tenant.management/org.wso2.carbon.identity.api.server.tenant.management.v1/src/main/resources/tenant-management.yaml", "diffHunk": "@@ -451,6 +457,10 @@ components:\n           type: string\n           example: kim\n           description: Last name of the owner.\n+        provisioningMethod:\n+          type: string\n+          example: invite-via-email", "originalCommit": "579e54e93e00cf54690e3707bc7b87094c28234c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "eb637e8ccef4b44a2958c689ef1fbc0c9d061400", "url": "https://github.com/wso2/identity-api-server/commit/eb637e8ccef4b44a2958c689ef1fbc0c9d061400", "message": "Add provisioning method support", "committedDate": "2020-04-30T05:18:10Z", "type": "forcePushed"}, {"oid": "6bc9752424cadb7745eebe8e74f44afce1518b69", "url": "https://github.com/wso2/identity-api-server/commit/6bc9752424cadb7745eebe8e74f44afce1518b69", "message": "Add provisioning method support", "committedDate": "2020-04-30T06:07:16Z", "type": "commit"}, {"oid": "6bc9752424cadb7745eebe8e74f44afce1518b69", "url": "https://github.com/wso2/identity-api-server/commit/6bc9752424cadb7745eebe8e74f44afce1518b69", "message": "Add provisioning method support", "committedDate": "2020-04-30T06:07:16Z", "type": "forcePushed"}, {"oid": "d8b96d5c70f45ef01855d31f9c6f40e388fbbb9d", "url": "https://github.com/wso2/identity-api-server/commit/d8b96d5c70f45ef01855d31f9c6f40e388fbbb9d", "message": "Change version", "committedDate": "2020-04-30T19:24:07Z", "type": "commit"}, {"oid": "d8b96d5c70f45ef01855d31f9c6f40e388fbbb9d", "url": "https://github.com/wso2/identity-api-server/commit/d8b96d5c70f45ef01855d31f9c6f40e388fbbb9d", "message": "Change version", "committedDate": "2020-04-30T19:24:07Z", "type": "forcePushed"}]}