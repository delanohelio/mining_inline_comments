{"pr_number": 499, "pr_title": "Docker: Remove go dep from Dockerfiles", "pr_createdAt": "2020-11-18T22:23:03Z", "pr_url": "https://github.com/greenplum-db/pxf/pull/499", "timeline": [{"oid": "90a68f8ba8ca9f431612fd5f2bedf5e4c8a7aeb8", "url": "https://github.com/greenplum-db/pxf/commit/90a68f8ba8ca9f431612fd5f2bedf5e4c8a7aeb8", "message": "Docker: Remove go dep from Dockerfiles", "committedDate": "2020-11-18T22:22:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2MzYxMw==", "url": "https://github.com/greenplum-db/pxf/pull/499#discussion_r526463613", "bodyText": "We can get rid of this reference to dep.", "author": "bradfordb-vmware", "createdAt": "2020-11-18T22:24:21Z", "path": "README.md", "diffHunk": "@@ -91,7 +91,6 @@ To build PXF, you must have:\n     Once you have installed Go, you will need the `dep` and `ginkgo` tools, which install Go dependencies and run Go tests,", "originalCommit": "90a68f8ba8ca9f431612fd5f2bedf5e4c8a7aeb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2OTcxNQ==", "url": "https://github.com/greenplum-db/pxf/pull/499#discussion_r526469715", "bodyText": "good catch", "author": "frankgh", "createdAt": "2020-11-18T22:36:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2MzYxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2Njc5Nw==", "url": "https://github.com/greenplum-db/pxf/pull/499#discussion_r526466797", "bodyText": "Small suggestion: In make, either $(foo) or ${foo} is a valid reference. One convention that I have seen in practice is exclusively using $(foo) when foo is a variable defined by make (e.g., $(GO_MOD_CACHE)) and using ${foo} when foo is an environment variable (e.g., ${HOME}). It can be small visual clue where the variable is coming from.", "author": "bradfordb-vmware", "createdAt": "2020-11-18T22:30:38Z", "path": "cli/go/src/pxf-cli/Makefile", "diffHunk": "@@ -25,6 +26,10 @@ help:\n all: test stage install\n \n build:\n+\t@if [ -d $(HOME)/.go-dep-cached-sources ] && [ ! -d ${GO_MOD_CACHE}/mod ]; then \\", "originalCommit": "90a68f8ba8ca9f431612fd5f2bedf5e4c8a7aeb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3MDMxNg==", "url": "https://github.com/greenplum-db/pxf/pull/499#discussion_r526470316", "bodyText": "so these should be reversed?", "author": "frankgh", "createdAt": "2020-11-18T22:38:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2Njc5Nw=="}], "type": "inlineReview"}, {"oid": "8628f761c559c2beb7d8df74d6091014b70b1a14", "url": "https://github.com/greenplum-db/pxf/commit/8628f761c559c2beb7d8df74d6091014b70b1a14", "message": "Address PR feedback", "committedDate": "2020-11-18T22:40:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4MDU5MQ==", "url": "https://github.com/greenplum-db/pxf/pull/499#discussion_r526480591", "bodyText": "Is this for Ci to pick dependencies from pxf-build-dependencies extracted tarball ? Will it work for both dep and mod ? I guess I don't like .go-dep-cached-sources name if those are supposed to be modules, but if we have to support both PXF 5 and 6 with the same dependency cache artifacts, then it's ok.", "author": "denalex", "createdAt": "2020-11-18T23:01:17Z", "path": "cli/go/src/pxf-cli/Makefile", "diffHunk": "@@ -25,12 +26,16 @@ help:\n all: test stage install\n \n build:\n-\tgo build -v ${LDFLAGS}\n-\tgo install ${LDFLAGS}\n+\t@if [ -d ${HOME}/.go-dep-cached-sources ] && [ ! -d $(GO_MOD_CACHE)/mod ]; then \\\n+\t\tmkdir -p $(GO_MOD_CACHE); \\\n+\t\tln -s ${HOME}/.go-dep-cached-sources $(GO_MOD_CACHE)/mod; \\", "originalCommit": "8628f761c559c2beb7d8df74d6091014b70b1a14", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}