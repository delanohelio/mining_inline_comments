{"pr_number": 482, "pr_title": "docs - add upgrade steps for pxf v5.16", "pr_createdAt": "2020-11-05T18:47:19Z", "pr_url": "https://github.com/greenplum-db/pxf/pull/482", "timeline": [{"oid": "98923763ffae70a58af233fa55a9a612c130688f", "url": "https://github.com/greenplum-db/pxf/commit/98923763ffae70a58af233fa55a9a612c130688f", "message": "docs - add upgrade steps for pxf v5.16", "committedDate": "2020-11-05T18:27:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODMwMzgwNw==", "url": "https://github.com/greenplum-db/pxf/pull/482#discussion_r518303807", "bodyText": "not sure what a user should do with Keep this in mind instruction. what would change in their workflow when they create new servers ?", "author": "denalex", "createdAt": "2020-11-05T19:20:54Z", "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -88,6 +88,13 @@ After you install the new version of PXF, perform the following procedure:\n \n         3. Review any SQL scripts that you may have created that reference the PXF external table, and update column names if required.\n \n+4. **If you are upgrading from PXF version 5.15.x or earlier**:\n+\n+    1. The `pxf.service.user.name` property in the `pxf-site.xml` template file is now commented out by default. Keep this in mind when you configure new PXF servers.", "originalCommit": "98923763ffae70a58af233fa55a9a612c130688f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM1ODU5Mg==", "url": "https://github.com/greenplum-db/pxf/pull/482#discussion_r518358592", "bodyText": "i was trying to call out that there is a difference in behaviour, but i guess that i don't know what that really is.   previously, the property value was ${user.name}.  could the admin have been relying on that?  and now that the property is unset, they might need to change it?", "author": "lisakowen", "createdAt": "2020-11-05T20:54:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODMwMzgwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODMwNTg4MA==", "url": "https://github.com/greenplum-db/pxf/pull/482#discussion_r518305880", "bodyText": "we should also advise them to change the property value in pxf-site.xml if they do not want to modify the tables.", "author": "denalex", "createdAt": "2020-11-05T19:23:31Z", "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -88,6 +88,13 @@ After you install the new version of PXF, perform the following procedure:\n \n         3. Review any SQL scripts that you may have created that reference the PXF external table, and update column names if required.\n \n+4. **If you are upgrading from PXF version 5.15.x or earlier**:\n+\n+    1. The `pxf.service.user.name` property in the `pxf-site.xml` template file is now commented out by default. Keep this in mind when you configure new PXF servers.\n+    2. The default value for the `jdbc.pool.property.maximumPoolSize` property is now `15`. If you have previously configured a JDBC server(s) and want that server to use the new default value, you must manually change the property value in the server's `jdbc-site.xml` file.\n+    3. PXF 5.16 disallows specifying relative paths and environment variables in the `CREATE EXTERNAL TABLE` `LOCATION` clause file path. If you previously created any external tables that specified a relative path or environment variable, you must drop each external table, and then re-create it without these constructs.\n+    4. Filter pushdown is enabled by default for queries on external tables that specify the `Hive`, `HiveRC`, or `HiveORC` profiles. If you have previously created an external table that specifies one these profiles and queries are failing with PXF v5.16+, try disabling filter pushdown: drop the external table and re-create it, specifying the `&PPD=false` option in the `LOCATION` clause.", "originalCommit": "98923763ffae70a58af233fa55a9a612c130688f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cee3deaf4c290cbbc9e97d1902504b61da53317c", "url": "https://github.com/greenplum-db/pxf/commit/cee3deaf4c290cbbc9e97d1902504b61da53317c", "message": "two ways to disable pushdown", "committedDate": "2020-11-05T20:47:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgxNTI4Mw==", "url": "https://github.com/greenplum-db/pxf/pull/482#discussion_r518815283", "bodyText": "one these -> one of these", "author": "dyozie", "createdAt": "2020-11-06T15:13:59Z", "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -88,6 +88,25 @@ After you install the new version of PXF, perform the following procedure:\n \n         3. Review any SQL scripts that you may have created that reference the PXF external table, and update column names if required.\n \n+4. **If you are upgrading from PXF version 5.15.x or earlier**:\n+\n+    1. The `pxf.service.user.name` property in the `pxf-site.xml` template file is now commented out by default. Keep this in mind when you configure new PXF servers.\n+    2. The default value for the `jdbc.pool.property.maximumPoolSize` property is now `15`. If you have previously configured a JDBC server(s) and want that server to use the new default value, you must manually change the property value in the server's `jdbc-site.xml` file.\n+    3. PXF 5.16 disallows specifying relative paths and environment variables in the `CREATE EXTERNAL TABLE` `LOCATION` clause file path. If you previously created any external tables that specified a relative path or environment variable, you must drop each external table, and then re-create it without these constructs.\n+    4. Filter pushdown is enabled by default for queries on external tables that specify the `Hive`, `HiveRC`, or `HiveORC` profiles. If you have previously created an external table that specifies one these profiles and queries are failing with PXF v5.16+, you can disable filter pushdown at the external table-level or at the server level:", "originalCommit": "cee3deaf4c290cbbc9e97d1902504b61da53317c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4fa00f4c362cddda314fd0b6baff9cbb722af846", "url": "https://github.com/greenplum-db/pxf/commit/4fa00f4c362cddda314fd0b6baff9cbb722af846", "message": "add missing of", "committedDate": "2020-11-06T17:34:41Z", "type": "commit"}]}