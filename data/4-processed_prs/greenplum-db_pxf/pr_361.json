{"pr_number": 361, "pr_title": "added packaging README", "pr_createdAt": "2020-05-19T02:37:33Z", "pr_url": "https://github.com/greenplum-db/pxf/pull/361", "timeline": [{"oid": "7cc5b7e72e95f0f4725a54310a0e7958d7cff60a", "url": "https://github.com/greenplum-db/pxf/commit/7cc5b7e72e95f0f4725a54310a0e7958d7cff60a", "message": "added packaging README", "committedDate": "2020-05-19T02:36:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIwNzQxOQ==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427207419", "bodyText": "the -> to ?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * the install a newer RPM package for the same Greenplum major release, a user will have to upgrade the PXF RPM\n          \n          \n            \n            * to install a newer RPM package for the same Greenplum major release, a user will have to upgrade the PXF RPM", "author": "frankgh", "createdAt": "2020-05-19T10:48:39Z", "path": "package/README.md", "diffHunk": "@@ -0,0 +1,55 @@\n+PXF Packaging\n+============\n+\n+PXF consists of 3 groups of artifacts, each developed using a different underlying technology:\n+\n+* Greenplum extension -- written in C, represented by a `pxf.so` library and configuration files\n+* PXF Server -- written in Java, represented by a `pxf.war` file, Tomcat server, dependent JAR files, templates and scripts\n+* Script Cluster Plugin -- written in Go, represented by `pxf-cli` executable\n+\n+When packaged and shipped, PXF is represented by an RPM package on Centos platform and a DEB package on Ubuntu platform,\n+respectively. The package is different for every major Greenplum version that PXF has been compiled with. \n+\n+For example, `pxf-gp5-1.2.3-1.el7.x86_64.rpm` represents an RPM package of PXF version 1.2.3 intended to work with\n+Greenplum 5 on Centos / Redhat 7 operating systems.  \n+\n+\n+## RPM specification\n+On Centos platforms PXF product is packaged as an RPM. The specification on how to build the RPM is provided by the\n+`pxf-gpX.spec` files in this directory. The following key design decisions were made:\n+\n+* the name of the RPM package is `pxf-gpX`, where X is the major Greenplum version (e.g. `pxf-gp5`, `pxf-gp6`)\n+* the install a newer RPM package for the same Greenplum major release, a user will have to upgrade the PXF RPM", "originalCommit": "7cc5b7e72e95f0f4725a54310a0e7958d7cff60a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3NzA5MA==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427477090", "bodyText": "yes, package is a new dir, I think it is justifiable, as this is a project-level package build specifications and helper scripts", "author": "denalex", "createdAt": "2020-05-19T17:31:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIwNzQxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxMDM5OQ==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427410399", "bodyText": "what about replacing \", represented by\" with \"; when built, produces ...\"?", "author": "lisakowen", "createdAt": "2020-05-19T15:51:23Z", "path": "package/README.md", "diffHunk": "@@ -0,0 +1,55 @@\n+PXF Packaging\n+============\n+\n+PXF consists of 3 groups of artifacts, each developed using a different underlying technology:\n+\n+* Greenplum extension -- written in C, represented by a `pxf.so` library and configuration files", "originalCommit": "7cc5b7e72e95f0f4725a54310a0e7958d7cff60a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxODEwMg==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427418102", "bodyText": "seems like the info on this page is geared both towards the consumer of the packages and a developer who would be building the package on their own.  i might say \"The PXF packaging framework can build and generate an RPM package for CentOS platforms and a DEB package for the Ubuntu platform\".  or \"You can build an RPM ...\"", "author": "lisakowen", "createdAt": "2020-05-19T16:02:04Z", "path": "package/README.md", "diffHunk": "@@ -0,0 +1,55 @@\n+PXF Packaging\n+============\n+\n+PXF consists of 3 groups of artifacts, each developed using a different underlying technology:\n+\n+* Greenplum extension -- written in C, represented by a `pxf.so` library and configuration files\n+* PXF Server -- written in Java, represented by a `pxf.war` file, Tomcat server, dependent JAR files, templates and scripts\n+* Script Cluster Plugin -- written in Go, represented by `pxf-cli` executable\n+\n+When packaged and shipped, PXF is represented by an RPM package on Centos platform and a DEB package on Ubuntu platform,", "originalCommit": "7cc5b7e72e95f0f4725a54310a0e7958d7cff60a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ1NjUxMA==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427456510", "bodyText": "thanks, I will change to \"The PXF build system can create an RPM package ...\"", "author": "denalex", "createdAt": "2020-05-19T16:58:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxODEwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQxOTQ2Ng==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427419466", "bodyText": "how about something like \"PXF compiles against and generates a different package for every major Greenplum version.\"", "author": "lisakowen", "createdAt": "2020-05-19T16:03:56Z", "path": "package/README.md", "diffHunk": "@@ -0,0 +1,55 @@\n+PXF Packaging\n+============\n+\n+PXF consists of 3 groups of artifacts, each developed using a different underlying technology:\n+\n+* Greenplum extension -- written in C, represented by a `pxf.so` library and configuration files\n+* PXF Server -- written in Java, represented by a `pxf.war` file, Tomcat server, dependent JAR files, templates and scripts\n+* Script Cluster Plugin -- written in Go, represented by `pxf-cli` executable\n+\n+When packaged and shipped, PXF is represented by an RPM package on Centos platform and a DEB package on Ubuntu platform,\n+respectively. The package is different for every major Greenplum version that PXF has been compiled with. ", "originalCommit": "7cc5b7e72e95f0f4725a54310a0e7958d7cff60a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQyMjk3Mg==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427422972", "bodyText": "just curious, when would PXF release a package with -2?", "author": "lisakowen", "createdAt": "2020-05-19T16:08:51Z", "path": "package/README.md", "diffHunk": "@@ -0,0 +1,55 @@\n+PXF Packaging\n+============\n+\n+PXF consists of 3 groups of artifacts, each developed using a different underlying technology:\n+\n+* Greenplum extension -- written in C, represented by a `pxf.so` library and configuration files\n+* PXF Server -- written in Java, represented by a `pxf.war` file, Tomcat server, dependent JAR files, templates and scripts\n+* Script Cluster Plugin -- written in Go, represented by `pxf-cli` executable\n+\n+When packaged and shipped, PXF is represented by an RPM package on Centos platform and a DEB package on Ubuntu platform,\n+respectively. The package is different for every major Greenplum version that PXF has been compiled with. \n+\n+For example, `pxf-gp5-1.2.3-1.el7.x86_64.rpm` represents an RPM package of PXF version 1.2.3 intended to work with\n+Greenplum 5 on Centos / Redhat 7 operating systems.  \n+\n+\n+## RPM specification\n+On Centos platforms PXF product is packaged as an RPM. The specification on how to build the RPM is provided by the\n+`pxf-gpX.spec` files in this directory. The following key design decisions were made:\n+\n+* the name of the RPM package is `pxf-gpX`, where X is the major Greenplum version (e.g. `pxf-gp5`, `pxf-gp6`)\n+* the install a newer RPM package for the same Greenplum major release, a user will have to upgrade the PXF RPM\n+* the RPM installs PXF server into `/usr/local/pxf-gpX` directory (e.g. `/usr/local/pxf-gp6`)\n+* the RPM is relocatable, a user can specify --prefix option when installing the RPM to install the server into another directory\n+* the PXF greenplum extension is initially installed by RPM alongside the PXF server and is not initially active\n+* the PXF greenplum extension is copied into Greenplum install location during `pxf init` command issued by a user after the install\n+* the PXF RPM version number follows 3-number semantic versioning and must be provided during the RPM build process\n+* the PXF RPM release number is usually specified as `1`", "originalCommit": "7cc5b7e72e95f0f4725a54310a0e7958d7cff60a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ2NDY5MQ==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427464691", "bodyText": "probably never, release number is the RPM thing where each software version might have multiple releases (builds) that are available. Our dev team issues 1 artifact per version only and is not planning to use multiple release numbers. However, other vendors might decide otherwise.", "author": "denalex", "createdAt": "2020-05-19T17:12:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQyMjk3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQyNTM2Mg==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427425362", "bodyText": "so, the user wouldn't run yum to install the RPM?\nwill the user still need to install Java separately?", "author": "lisakowen", "createdAt": "2020-05-19T16:12:21Z", "path": "package/README.md", "diffHunk": "@@ -0,0 +1,55 @@\n+PXF Packaging\n+============\n+\n+PXF consists of 3 groups of artifacts, each developed using a different underlying technology:\n+\n+* Greenplum extension -- written in C, represented by a `pxf.so` library and configuration files\n+* PXF Server -- written in Java, represented by a `pxf.war` file, Tomcat server, dependent JAR files, templates and scripts\n+* Script Cluster Plugin -- written in Go, represented by `pxf-cli` executable\n+\n+When packaged and shipped, PXF is represented by an RPM package on Centos platform and a DEB package on Ubuntu platform,\n+respectively. The package is different for every major Greenplum version that PXF has been compiled with. \n+\n+For example, `pxf-gp5-1.2.3-1.el7.x86_64.rpm` represents an RPM package of PXF version 1.2.3 intended to work with\n+Greenplum 5 on Centos / Redhat 7 operating systems.  \n+\n+\n+## RPM specification\n+On Centos platforms PXF product is packaged as an RPM. The specification on how to build the RPM is provided by the\n+`pxf-gpX.spec` files in this directory. The following key design decisions were made:\n+\n+* the name of the RPM package is `pxf-gpX`, where X is the major Greenplum version (e.g. `pxf-gp5`, `pxf-gp6`)\n+* the install a newer RPM package for the same Greenplum major release, a user will have to upgrade the PXF RPM\n+* the RPM installs PXF server into `/usr/local/pxf-gpX` directory (e.g. `/usr/local/pxf-gp6`)\n+* the RPM is relocatable, a user can specify --prefix option when installing the RPM to install the server into another directory\n+* the PXF greenplum extension is initially installed by RPM alongside the PXF server and is not initially active\n+* the PXF greenplum extension is copied into Greenplum install location during `pxf init` command issued by a user after the install\n+* the PXF RPM version number follows 3-number semantic versioning and must be provided during the RPM build process\n+* the PXF RPM release number is usually specified as `1`\n+* example PXF RPM names are : `pxf-gp5-1.2.3-1.el6.x86_64.rpm` and `pxf-gp5-1.2.3-1.el7.x86_64.rpm` \n+\n+## RPM build process\n+\n+To build an RPM, follow these steps:\n+1. Install Greenplum database\n+2. Run `source $GPHOME/greenplum_path.sh` to configure your `PATH` to be able to find `pg_config` program\n+3. Run `make clean rpm` from the top-level directory to build artifacts and assemble the RPM\n+4. The RPM will be available in `build/rpmbuild/RPMS` directory\n+\n+\n+## RPM installation process\n+To install PXF from an RPM:\n+1. Build or download PXF RPM for the corresponding major version of Greenplum. The following example will assume\n+   that PXF version `1.2.3` will be installed to work with with Greenplum 5.\n+2. Decide which OS user will own the PXF installation. If PXF is installed alongside Greenplum, the user that owns the PXF\n+installation should either be the same as the one owning the Greenplum installation or have write privilleges to the\n+Greenplum installation directory. This is necessary to be able to register the PXF Greenplum extension with Greenplum.\n+3. If a previous PXF version has been installed, stop pxf server. \n+4. As a superuser, run `rpm -Uvh pxf-gp5-1.2.3-1.el7.x86_64.rpm` to install the RPM into `/usr/local/pxf-gp5`", "originalCommit": "7cc5b7e72e95f0f4725a54310a0e7958d7cff60a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ2NjE5Nw==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427466197", "bodyText": "they can run yum as well, let me add it, thanks for catching this. User will still have to install Java, correct, maybe I should mention this as well, however, I don't want to turn this into a detailed installation guide, since this is developer's documentation primarily", "author": "denalex", "createdAt": "2020-05-19T17:14:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQyNTM2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQyNjAwNw==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427426007", "bodyText": "does this mean that installing a PXF RPM removes the $GPHOME/pxf directory?", "author": "lisakowen", "createdAt": "2020-05-19T16:13:14Z", "path": "package/README.md", "diffHunk": "@@ -0,0 +1,55 @@\n+PXF Packaging\n+============\n+\n+PXF consists of 3 groups of artifacts, each developed using a different underlying technology:\n+\n+* Greenplum extension -- written in C, represented by a `pxf.so` library and configuration files\n+* PXF Server -- written in Java, represented by a `pxf.war` file, Tomcat server, dependent JAR files, templates and scripts\n+* Script Cluster Plugin -- written in Go, represented by `pxf-cli` executable\n+\n+When packaged and shipped, PXF is represented by an RPM package on Centos platform and a DEB package on Ubuntu platform,\n+respectively. The package is different for every major Greenplum version that PXF has been compiled with. \n+\n+For example, `pxf-gp5-1.2.3-1.el7.x86_64.rpm` represents an RPM package of PXF version 1.2.3 intended to work with\n+Greenplum 5 on Centos / Redhat 7 operating systems.  \n+\n+\n+## RPM specification\n+On Centos platforms PXF product is packaged as an RPM. The specification on how to build the RPM is provided by the\n+`pxf-gpX.spec` files in this directory. The following key design decisions were made:\n+\n+* the name of the RPM package is `pxf-gpX`, where X is the major Greenplum version (e.g. `pxf-gp5`, `pxf-gp6`)\n+* the install a newer RPM package for the same Greenplum major release, a user will have to upgrade the PXF RPM\n+* the RPM installs PXF server into `/usr/local/pxf-gpX` directory (e.g. `/usr/local/pxf-gp6`)\n+* the RPM is relocatable, a user can specify --prefix option when installing the RPM to install the server into another directory\n+* the PXF greenplum extension is initially installed by RPM alongside the PXF server and is not initially active\n+* the PXF greenplum extension is copied into Greenplum install location during `pxf init` command issued by a user after the install\n+* the PXF RPM version number follows 3-number semantic versioning and must be provided during the RPM build process\n+* the PXF RPM release number is usually specified as `1`\n+* example PXF RPM names are : `pxf-gp5-1.2.3-1.el6.x86_64.rpm` and `pxf-gp5-1.2.3-1.el7.x86_64.rpm` \n+\n+## RPM build process\n+\n+To build an RPM, follow these steps:\n+1. Install Greenplum database\n+2. Run `source $GPHOME/greenplum_path.sh` to configure your `PATH` to be able to find `pg_config` program\n+3. Run `make clean rpm` from the top-level directory to build artifacts and assemble the RPM\n+4. The RPM will be available in `build/rpmbuild/RPMS` directory\n+\n+\n+## RPM installation process\n+To install PXF from an RPM:\n+1. Build or download PXF RPM for the corresponding major version of Greenplum. The following example will assume\n+   that PXF version `1.2.3` will be installed to work with with Greenplum 5.\n+2. Decide which OS user will own the PXF installation. If PXF is installed alongside Greenplum, the user that owns the PXF\n+installation should either be the same as the one owning the Greenplum installation or have write privilleges to the\n+Greenplum installation directory. This is necessary to be able to register the PXF Greenplum extension with Greenplum.\n+3. If a previous PXF version has been installed, stop pxf server. \n+4. As a superuser, run `rpm -Uvh pxf-gp5-1.2.3-1.el7.x86_64.rpm` to install the RPM into `/usr/local/pxf-gp5`\n+5. As a superuser, run `chown gpadmin:gpadmin /usr/local/pxf-gp5` to change ownership of PXF installation to the user `gpadmin`.\n+Specify a different user other than `gpadmin`, if desired.\n+\n+\n+After these steps, the PXF product will be installed and is ready to be configured. If there was a previous installation of\n+PXF for the same major Greenplum version, the files and the runtime directories from the older version will be removed.", "originalCommit": "7cc5b7e72e95f0f4725a54310a0e7958d7cff60a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ3Mzk3Ng==", "url": "https://github.com/greenplum-db/pxf/pull/361#discussion_r427473976", "bodyText": "no, it does not remove it. But this guide assumes developer's focus going forward. Moving from non-RPM to RPM-based install belongs in migration guide that is not the focus here. \"older versions\" here are assumed to be installed by RPM as well.", "author": "denalex", "createdAt": "2020-05-19T17:27:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQyNjAwNw=="}], "type": "inlineReview"}, {"oid": "f9159231a2ee51c68d5b3220ab68e8b51500f0f5", "url": "https://github.com/greenplum-db/pxf/commit/f9159231a2ee51c68d5b3220ab68e8b51500f0f5", "message": "PR feedback on README", "committedDate": "2020-05-19T17:29:30Z", "type": "commit"}]}