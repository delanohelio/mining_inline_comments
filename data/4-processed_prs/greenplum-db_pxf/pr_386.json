{"pr_number": 386, "pr_title": "docs - updates for rpm install, upgrade, related edits and file delet\u2026", "pr_createdAt": "2020-06-17T17:54:37Z", "pr_url": "https://github.com/greenplum-db/pxf/pull/386", "timeline": [{"oid": "0ef858b927b435c301132630472a4a34968acd50", "url": "https://github.com/greenplum-db/pxf/commit/0ef858b927b435c301132630472a4a34968acd50", "message": "docs - updates for rpm install, upgrade, related edits and file deletions", "committedDate": "2020-06-17T16:10:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Njk2OQ==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441846969", "bodyText": "copying of the extension files depends on whether $GPHOME/bin is in the $PATH. If $GPHOME/bin is not in the path, a warning will displayed but the operation will succeed. I'm not sure how to put this in the documentation not to making too confusing", "author": "frankgh", "createdAt": "2020-06-17T21:33:37Z", "path": "docs/content/init_pxf.html.md.erb", "diffHunk": "@@ -47,7 +49,11 @@ Refer to [PXF User Configuration Directories](about_pxf_dir.html#usercfg) for a\n \n The PXF server runs on Java 8 or 11. You identify the PXF `$JAVA_HOME` and `$PXF_CONF` settings at PXF initialization time.\n \n-Initializing PXF creates the PXF Java web application, and generates PXF internal configuration files, setting default properties specific to your configuration.\n+Initializing PXF:\n+\n+- Copies PXF extension files from `$PXF_INSTALL_DIR/gpextable` to the Greenplum Database install directory `$GPHOME`.", "originalCommit": "0ef858b927b435c301132630472a4a34968acd50", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0NzMxNQ==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441847315", "bodyText": "maybe eventually we'll have instructions to install PXF outside of a greenplum cluster, and that would be easier?", "author": "frankgh", "createdAt": "2020-06-17T21:34:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Njk2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg2MjkyOA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441862928", "bodyText": "$GPHOME/bin, or $GPHOME - i thought that just $GPHOME needs to be set.\nwhen would the user want to init without copying over the extension files?  if there is a real use case here we should call it out.", "author": "lisakowen", "createdAt": "2020-06-17T22:12:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Njk2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTkyNDk1Nw==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441924957", "bodyText": "I think our goal is to eventually allow installation of PXF on any host. In that case, you would only want to install the server portion on the PXF host, and the extension portion on the greenplum host", "author": "frankgh", "createdAt": "2020-06-18T01:55:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Njk2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTkyNTE1Mg==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441925152", "bodyText": "I'm pretty sure that $GPHOME/bin needs to be on the path. Can @oliverralbertini or @denalex confirm?", "author": "frankgh", "createdAt": "2020-06-18T01:56:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Njk2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA4OTQ0NA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443089444", "bodyText": "It's just GPHOME, see here for details.", "author": "oliverralbertini", "createdAt": "2020-06-20T01:25:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Njk2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI1NDIxNA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443254214", "bodyText": "Apologies, I confused building the extension with installing the extension.", "author": "frankgh", "createdAt": "2020-06-21T20:30:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Njk2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Nzc5NQ==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441847795", "bodyText": "Ensure $GPHOME/bin is in the $PATH for the PXF extension to be installed.", "author": "frankgh", "createdAt": "2020-06-17T21:35:29Z", "path": "docs/content/init_pxf.html.md.erb", "diffHunk": "@@ -86,7 +92,7 @@ Perform the following procedure to initialize PXF on each segment host in your G\n 4. Run the `pxf cluster init` command to initialize the PXF service on the master, standby master, and on each segment host. For example, the following command specifies `/usr/local/greenplum-pxf` as the PXF user configuration directory for initialization:\n \n     ``` shell\n-    gpadmin@gpmaster$ PXF_CONF=/usr/local/greenplum-pxf $GPHOME/pxf/bin/pxf cluster init\n+    gpadmin@gpmaster$ PXF_CONF=/usr/local/greenplum-pxf pxf cluster init", "originalCommit": "0ef858b927b435c301132630472a4a34968acd50", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI1NDA5OA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443254098", "bodyText": "apologies, $GPHOME/bin is required for building, not installing the extension", "author": "frankgh", "createdAt": "2020-06-21T20:28:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0Nzc5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0OTIxNA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441849214", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            PXF does not remove the `$PXF_CONF` directory during a reset operation.\n          \n          \n            \n            PXF does not remove the `$PXF_CONF` directory during a reset operation nor does PXF removes the PXF extension files from the Greenplum Database installation .", "author": "frankgh", "createdAt": "2020-06-17T21:38:45Z", "path": "docs/content/init_pxf.html.md.erb", "diffHunk": "@@ -96,11 +102,11 @@ Perform the following procedure to initialize PXF on each segment host in your G\n \n Should you need to, you can reset PXF to its uninitialized state. You might choose to reset PXF if you specified an incorrect `PXF_CONF` directory, or if you want to start the initialization procedure from scratch.\n \n-When you reset PXF, PXF prompts you to confirm the operation. If you confirm, PXF removes the following runtime files and directories (where `PXF_HOME=$GPHOME/pxf`):\n+When you reset PXF, PXF prompts you to confirm the operation. If you confirm, PXF removes the following runtime files and directories:\n \n-- `$PXF_HOME/conf/pxf-private.classpath`\n-- `$PXF_HOME/pxf-service`\n-- `$PXF_HOME/run`\n+- `$PXF_INSTALL_DIR/conf/pxf-private.classpath`\n+- `$PXF_INSTALL_DIR/pxf-service`\n+- `$PXF_INSTALL_DIR/run`\n \n PXF does not remove the `$PXF_CONF` directory during a reset operation.", "originalCommit": "0ef858b927b435c301132630472a4a34968acd50", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MDgxNA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441850814", "bodyText": "can you downgrade your PXF version with an older version of the RPM?", "author": "frankgh", "createdAt": "2020-06-17T21:42:27Z", "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:", "originalCommit": "0ef858b927b435c301132630472a4a34968acd50", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg2NDg2MA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441864860", "bodyText": "there is only one version of the pxf rpm right now, so not possible to downgrade to an older \"pxf installed via rpm\".  will need to add these docs when we release the next version of the rpm.\nthat does bring up a good point, though.  can the user downgrade to an embedded pxf?  for sure not if they remove $GPHOME/pxf after installing the rpm.  even if they keep this directory around, the C library and extension files would not be recoverable from the current installation, right?", "author": "lisakowen", "createdAt": "2020-06-17T22:18:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MDgxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTkyNTg1Nw==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r441925857", "bodyText": "true, it doesn't make sense for us to have a downgrade section for this release. To downgrade to the PXF version installed from Greenplum they would need to\n\nbackup their extension files\nbackup their PXF server if they removed it previously\nRPM uninstall\nRestore files from 1  & 2", "author": "frankgh", "createdAt": "2020-06-18T01:58:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MDgxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI1OTgzNw==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442259837", "bodyText": "ok, in the pre-upgrade (step 1), lets have the user copy $GPHOME/pxf OR $PXF_INSTALL_DIR (depending on where pxf.current is located) and the PXF extension files somewhere.  they won't likely use them this release, but they will be available to downgrade to embedded pxf if they want to after first install of rpm.  what do you think about this?\nbut wouldn't downgrading pxf via rpm just involve removing current pxf rpm, install new pxf rpm, init, ...?  i.e. why would the user need to save anything?  maybe i am missing something?\nrelated:  what do you think is the best way to determine if pxf.current was installed via rpm or is embedded?  we can't necessarily go by existence of $GHOME/pxf.  and the user can install the pxf rpm in a location other than the default (/usr/local/pxf-gpX), so i can't just check for the existence of that directory.  i have been instructing the  user to run \"pxf version\", but that is kind of nebulous, too - assumes they added their pxf bin/ directory to PATH.", "author": "lisakowen", "createdAt": "2020-06-18T14:15:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MDgxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg5NDU1Mg==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442894552", "bodyText": "but wouldn't downgrading pxf via rpm just involve removing current pxf rpm, install new pxf rpm, init, ...? i.e. why would the user need to save anything? maybe i am missing something?\n\nIn my previous comment, I didn't mean for users to downgrade using an RPM, but rather what they would need to do to be able to restore their Greenplum + PXF installation after they have installed an RPM\n\nrelated: what do you think is the best way to determine if pxf.current was installed via rpm or is embedded? we can't necessarily go by existence of $GHOME/pxf. and the user can install the pxf rpm in a location other than the default (/usr/local/pxf-gpX), so i can't just check for the existence of that directory. i have been instructing the user to run \"pxf version\", but that is kind of nebulous, too - assumes they added their pxf bin/ directory to PATH.\n\nI guess two ways: 1. the pxf version approach which as you mention would require pxf to be on the $PATH. 2. Run some RPM query rpm -qi pxf-gp6 to determine if PXF was installed by RPM. This can bring some problems too, because even though you can have a PXF RPM installed, you can still be running the PXF version that was installed through a Greenplum installation.", "author": "frankgh", "createdAt": "2020-06-19T15:07:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1MDgxNA=="}], "type": "inlineReview"}, {"oid": "1358ddf7e2cd6ecb379f52b49086064500de37cc", "url": "https://github.com/greenplum-db/pxf/commit/1358ddf7e2cd6ecb379f52b49086064500de37cc", "message": "enhance reset description per comment from francisco", "committedDate": "2020-06-17T22:19:49Z", "type": "commit"}, {"oid": "72e9debd8488fe343b6639bda1512cc846264393", "url": "https://github.com/greenplum-db/pxf/commit/72e9debd8488fe343b6639bda1512cc846264393", "message": "init - clarify when extension files are copied", "committedDate": "2020-06-18T14:04:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzMjMwNw==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442332307", "bodyText": "To make these headers imperative and parallel, maybe do:  Complete Pre-Upgrade Actions and Upgrade PXF?", "author": "dyozie", "createdAt": "2020-06-18T15:55:58Z", "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:\n \n -   [Step 1: PXF Pre-Upgrade Actions](#pxfpre)\n--   Upgrade to a new Greenplum Database version\n--   [Step 2: Upgrading PXF](#pxfup)\n+-   Install the new version of PXF\n+-   [Step 2: Completing the PXF Upgrade](#pxfup)", "originalCommit": "72e9debd8488fe343b6639bda1512cc846264393", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzMjY3Ng==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442332676", "bodyText": "Can probably remove \"For example\" here.", "author": "dyozie", "createdAt": "2020-06-18T15:56:33Z", "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:\n \n -   [Step 1: PXF Pre-Upgrade Actions](#pxfpre)\n--   Upgrade to a new Greenplum Database version\n--   [Step 2: Upgrading PXF](#pxfup)\n+-   Install the new version of PXF\n+-   [Step 2: Completing the PXF Upgrade](#pxfup)\n \n \n ## <a id=\"pxfpre\"></a>Step 1: PXF Pre-Upgrade Actions\n \n-Perform this procedure before you upgrade to a new version of Greenplum Database:\n+Perform this procedure before you upgrade to a new version of PXF:\n \n 1. Log in to the Greenplum Database master node. For example:\n \n     ``` shell\n     $ ssh gpadmin@<gpmaster>\n     ```\n \n+2. Identify and note the version of PXF currently running in your Greenplum cluster. For example:", "originalCommit": "72e9debd8488fe343b6639bda1512cc846264393", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzMzgyNA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442333824", "bodyText": "Actually, now that I read this procedure it really doesn't seem significant enough to break into pre-upgrade/upgrade sections.  I'd suggest just combining these into one procedure so as not to make it seem too complicated.", "author": "dyozie", "createdAt": "2020-06-18T15:58:15Z", "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:\n \n -   [Step 1: PXF Pre-Upgrade Actions](#pxfpre)\n--   Upgrade to a new Greenplum Database version\n--   [Step 2: Upgrading PXF](#pxfup)\n+-   Install the new version of PXF\n+-   [Step 2: Completing the PXF Upgrade](#pxfup)\n \n \n ## <a id=\"pxfpre\"></a>Step 1: PXF Pre-Upgrade Actions\n \n-Perform this procedure before you upgrade to a new version of Greenplum Database:\n+Perform this procedure before you upgrade to a new version of PXF:\n \n 1. Log in to the Greenplum Database master node. For example:\n \n     ``` shell\n     $ ssh gpadmin@<gpmaster>\n     ```\n \n+2. Identify and note the version of PXF currently running in your Greenplum cluster. For example:\n+\n+    ``` shell\n+    gpadmin@gpmaster$ pxf version\n+    ```\n+\n 2. Stop PXF on each segment host as described in [Stopping PXF](cfginitstart_pxf.html#stop_pxf).\n \n-3. Upgrade to the new version of Greenplum Database and then continue your PXF upgrade with [Step 2: Upgrading PXF](#pxfup).\n+3. Install the new version of PXF, identify and note the new PXF version number, and then continue your PXF upgrade with [Step 2: Completing the PXF Upgrade](#pxfup).", "originalCommit": "72e9debd8488fe343b6639bda1512cc846264393", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzgxNTQ5Nw==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443815497", "bodyText": "true.  but there is at least one other entry point to the postupgrade section - the installing topic xrefs to the Step2: Completing ....", "author": "lisakowen", "createdAt": "2020-06-22T20:44:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzMzgyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzNTExNA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r442335114", "bodyText": "This sentence also suggests to me that the pre-upgrade steps has already upgraded PXF.", "author": "dyozie", "createdAt": "2020-06-18T16:00:04Z", "path": "docs/content/upgrade_pxf_rpm.html.md.erb", "diffHunk": "@@ -1,36 +1,40 @@\n ---\n-title: Upgrading PXF in Greenplum 6.x\n+title: Upgrading PXF\n ---\n \n-If you are using PXF in your current Greenplum Database 6.x installation, you must upgrade the PXF service when you upgrade to a newer version of Greenplum Database 6.x.\n+If you have installed the PXF `.rpm` and have initialized, configured, and are using PXF in your current Greenplum Database 5.21.2+ or 6.x installation, you must perform some upgrade actions when you install a new version of PXF.\n \n-The PXF upgrade procedure describes how to upgrade PXF in your Greenplum Database installation. This procedure uses *PXF.from* to refer to your currently-installed PXF version and *PXF.to* to refer to the PXF version installed when you upgrade to the new version of Greenplum Database.\n-\n-The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you upgrade to a new version of Greenplum Database:\n+The PXF upgrade procedure has two parts. You perform one procedure before, and one procedure after, you install a new version to upgrade PXF:\n \n -   [Step 1: PXF Pre-Upgrade Actions](#pxfpre)\n--   Upgrade to a new Greenplum Database version\n--   [Step 2: Upgrading PXF](#pxfup)\n+-   Install the new version of PXF\n+-   [Step 2: Completing the PXF Upgrade](#pxfup)\n \n \n ## <a id=\"pxfpre\"></a>Step 1: PXF Pre-Upgrade Actions\n \n-Perform this procedure before you upgrade to a new version of Greenplum Database:\n+Perform this procedure before you upgrade to a new version of PXF:\n \n 1. Log in to the Greenplum Database master node. For example:\n \n     ``` shell\n     $ ssh gpadmin@<gpmaster>\n     ```\n \n+2. Identify and note the version of PXF currently running in your Greenplum cluster. For example:\n+\n+    ``` shell\n+    gpadmin@gpmaster$ pxf version\n+    ```\n+\n 2. Stop PXF on each segment host as described in [Stopping PXF](cfginitstart_pxf.html#stop_pxf).\n \n-3. Upgrade to the new version of Greenplum Database and then continue your PXF upgrade with [Step 2: Upgrading PXF](#pxfup).\n+3. Install the new version of PXF, identify and note the new PXF version number, and then continue your PXF upgrade with [Step 2: Completing the PXF Upgrade](#pxfup).\n \n \n-## <a id=\"pxfup\"></a>Step 2: Upgrading PXF\n+## <a id=\"pxfup\"></a>Step 2: Completing the PXF Upgrade\n \n-After you upgrade to the new version of Greenplum Database, perform the following procedure to upgrade and configure the *PXF.to* software:\n+After you upgrade to the new version of PXF, perform the following procedure:", "originalCommit": "72e9debd8488fe343b6639bda1512cc846264393", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3MDI0OA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443670248", "bodyText": "I've been thinking of this directory as PXF_HOME still. I guess that's never been a part of the docs? Maybe we should align the docs with what we have in our README.", "author": "oliverralbertini", "createdAt": "2020-06-22T16:07:52Z", "path": "docs/content/about_pxf_dir.html.md.erb", "diffHunk": "@@ -2,24 +2,27 @@\n title: About the PXF Installation and Configuration Directories\n ---\n \n-PXF is installed on your master and segment nodes when you install Greenplum Database. \n+When you install the PXF `.rpm` package, PXF is installed to `/usr/local/pxf-gp<greenplum-major-version>`, or to a directory of your choosing. This documentation uses `$PXF_INSTALL_DIR` to refer to this directory.", "originalCommit": "72e9debd8488fe343b6639bda1512cc846264393", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzgxNjMwOA==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443816308", "bodyText": "can the user set PXF_HOME?  is this environment variable, that is set by PXF, available to the user?  if so, when does PXF set it?", "author": "lisakowen", "createdAt": "2020-06-22T20:46:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3MDI0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3Mjg4NQ==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443672885", "bodyText": "register also runs on the standby master.", "author": "oliverralbertini", "createdAt": "2020-06-22T16:12:10Z", "path": "docs/content/cfginitstart_pxf.html.md.erb", "diffHunk": "@@ -27,9 +27,11 @@ PXF provides two management commands:\n - `pxf cluster` - manage all PXF service instances in the Greenplum Database cluster\n - `pxf` - manage the PXF service instance on a specific Greenplum Database host\n \n-The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init` and `sync` commands on the standby master host.\n+The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, `register`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init` and `sync` commands on the standby master host.", "originalCommit": "72e9debd8488fe343b6639bda1512cc846264393", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzY3Mzg0Mw==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r443673843", "bodyText": "I really like this way of specifying the commands.", "author": "oliverralbertini", "createdAt": "2020-06-22T16:13:50Z", "path": "docs/content/cfginitstart_pxf.html.md.erb", "diffHunk": "@@ -78,10 +80,10 @@ Perform the following procedure to start PXF on each segment host in your Greenp\n     $ ssh gpadmin@<gpmaster>\n     ```\n \n-3. Run the `pxf cluster start` command to start PXF on each segment host. For example:\n+3. Run the `pxf cluster start` command to start PXF on each segment host:\n \n     ```shell\n-    gpadmin@gpmaster$ $GPHOME/pxf/bin/pxf cluster start\n+    gpadmin@gpmaster$ pxf cluster start", "originalCommit": "72e9debd8488fe343b6639bda1512cc846264393", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0ae3ced5505c36e8c426b1b916857b755faaf3cb", "url": "https://github.com/greenplum-db/pxf/commit/0ae3ced5505c36e8c426b1b916857b755faaf3cb", "message": "some upgrade topic edits requested by david", "committedDate": "2020-06-22T20:50:53Z", "type": "commit"}, {"oid": "80a748f05f49081064131ea6c0b118f8a7885851", "url": "https://github.com/greenplum-db/pxf/commit/80a748f05f49081064131ea6c0b118f8a7885851", "message": "register is also run on the standby", "committedDate": "2020-06-22T20:52:37Z", "type": "commit"}, {"oid": "9fee62844f991040a0ebc8df73dcddf5cd40f4c3", "url": "https://github.com/greenplum-db/pxf/commit/9fee62844f991040a0ebc8df73dcddf5cd40f4c3", "message": "add preupgrade step to backup embedded pxf", "committedDate": "2020-06-22T21:15:09Z", "type": "commit"}, {"oid": "4117a89d148e0dbd409868f409c99eaf6ca70d58", "url": "https://github.com/greenplum-db/pxf/commit/4117a89d148e0dbd409868f409c99eaf6ca70d58", "message": "replace PXF_INSTALL_DIR with PXF_HOME", "committedDate": "2020-06-23T20:09:50Z", "type": "commit"}, {"oid": "8cd813bd3eee3e64741fe148429392a76663130f", "url": "https://github.com/greenplum-db/pxf/commit/8cd813bd3eee3e64741fe148429392a76663130f", "message": "call pxf directly", "committedDate": "2020-06-23T20:10:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDk4NTU0Mg==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r444985542", "bodyText": "Typo introduced here:  registe", "author": "dyozie", "createdAt": "2020-06-24T15:34:44Z", "path": "docs/content/cfginitstart_pxf.html.md.erb", "diffHunk": "@@ -27,7 +27,7 @@ PXF provides two management commands:\n - `pxf cluster` - manage all PXF service instances in the Greenplum Database cluster\n - `pxf` - manage the PXF service instance on a specific Greenplum Database host\n \n-The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, `register`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init` and `sync` commands on the standby master host.\n+The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init`, `registe`, and `sync` commands on the standby master host.", "originalCommit": "80a748f05f49081064131ea6c0b118f8a7885851", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4253a56224dd20c6f0745fd66b53a0436bb8debb", "url": "https://github.com/greenplum-db/pxf/commit/4253a56224dd20c6f0745fd66b53a0436bb8debb", "message": "add missing r", "committedDate": "2020-06-24T15:45:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTIxNDYzNg==", "url": "https://github.com/greenplum-db/pxf/pull/386#discussion_r445214636", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init`, `register`, and `sync` commands on the standby master host.\n          \n          \n            \n            The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, `sync`, and `register` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init`, `register`, and `sync` commands on the standby master host.", "author": "frankgh", "createdAt": "2020-06-24T22:52:53Z", "path": "docs/content/cfginitstart_pxf.html.md.erb", "diffHunk": "@@ -27,9 +27,11 @@ PXF provides two management commands:\n - `pxf cluster` - manage all PXF service instances in the Greenplum Database cluster\n - `pxf` - manage the PXF service instance on a specific Greenplum Database host\n \n-The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init` and `sync` commands on the standby master host.\n+The [`pxf cluster`](ref/pxf-cluster.html) command supports `init`, `reset`, `start`, `restart`, `status`, `stop`, and `sync` subcommands. When you run a `pxf cluster` subcommand on the Greenplum Database master host, you perform the operation on all segment hosts in the Greenplum Database cluster. PXF also runs the `init`, `register`, and `sync` commands on the standby master host.", "originalCommit": "4253a56224dd20c6f0745fd66b53a0436bb8debb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}