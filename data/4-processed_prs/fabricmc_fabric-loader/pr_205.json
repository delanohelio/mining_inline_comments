{"pr_number": 205, "pr_title": "Remove uses of Guava", "pr_createdAt": "2020-02-17T09:29:36Z", "pr_url": "https://github.com/FabricMC/fabric-loader/pull/205", "timeline": [{"oid": "62766aa40c7f7d90539c6e68414c0f4f2127a410", "url": "https://github.com/FabricMC/fabric-loader/commit/62766aa40c7f7d90539c6e68414c0f4f2127a410", "message": "Remove uses of Guava", "committedDate": "2020-02-17T09:22:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE2MjI4OA==", "url": "https://github.com/FabricMC/fabric-loader/pull/205#discussion_r380162288", "bodyText": "Why not use Collections.singletonList ?", "author": "Pyrofab", "createdAt": "2020-02-17T12:47:45Z", "path": "src/main/java/net/fabricmc/loader/game/GameProviders.java", "diffHunk": "@@ -16,14 +16,13 @@\n \n package net.fabricmc.loader.game;\n \n-import com.google.common.collect.ImmutableList;\n-\n+import java.util.Arrays;\n import java.util.List;\n \n public final class GameProviders {\n \tprivate GameProviders() { }\n \n \tpublic static List<GameProvider> create() {\n-\t\treturn ImmutableList.of(new MinecraftGameProvider());\n+\t\treturn Arrays.asList(new MinecraftGameProvider());", "originalCommit": "62766aa40c7f7d90539c6e68414c0f4f2127a410", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIyNjkwMg==", "url": "https://github.com/FabricMC/fabric-loader/pull/205#discussion_r380226902", "bodyText": "Good point, will fix", "author": "sfPlayer1", "createdAt": "2020-02-17T14:54:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE2MjI4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE2MzY1Nw==", "url": "https://github.com/FabricMC/fabric-loader/pull/205#discussion_r380163657", "bodyText": "Could maybe use Collections.unmodifiableList to keep the same guarantees ?", "author": "Pyrofab", "createdAt": "2020-02-17T12:50:48Z", "path": "src/main/java/net/fabricmc/loader/entrypoint/EntrypointTransformer.java", "diffHunk": "@@ -39,7 +38,7 @@\n \tprivate boolean entrypointsLocated = false;\n \n \tpublic EntrypointTransformer(Function<EntrypointTransformer, List<EntrypointPatch>> patches) {\n-\t\tthis.patches = ImmutableList.copyOf(patches.apply(this));\n+\t\tthis.patches = patches.apply(this);", "originalCommit": "62766aa40c7f7d90539c6e68414c0f4f2127a410", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIyODI4OQ==", "url": "https://github.com/FabricMC/fabric-loader/pull/205#discussion_r380228289", "bodyText": "I don't see a point behind the copy or immutability, this should be all internal without anything encouraging modification.", "author": "sfPlayer1", "createdAt": "2020-02-17T14:57:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE2MzY1Nw=="}], "type": "inlineReview"}, {"oid": "bfef41d91a71452f0f0f22369b6e3a9792b6c7af", "url": "https://github.com/FabricMC/fabric-loader/commit/bfef41d91a71452f0f0f22369b6e3a9792b6c7af", "message": "Use Collections.singletonList for single element lists", "committedDate": "2020-02-17T15:03:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI3ODk4NA==", "url": "https://github.com/FabricMC/fabric-loader/pull/205#discussion_r380278984", "bodyText": "Why not String.join(\", \", missingMods)", "author": "liach", "createdAt": "2020-02-17T16:33:03Z", "path": "src/main/java/net/fabricmc/loader/discovery/ModResolver.java", "diffHunk": "@@ -253,7 +252,7 @@ private static IVecInt toVecInt(IntStream stream) {\n \t\tStringBuilder errorsSoft = new StringBuilder();\n \n \t\tif (!missingMods.isEmpty()) {\n-\t\t\terrorsHard.append(\"\\n - Missing mods: \").append(Joiner.on(\", \").join(missingMods));\n+\t\t\terrorsHard.append(\"\\n - Missing mods: \").append(missingMods.stream().collect(Collectors.joining(\", \")));", "originalCommit": "bfef41d91a71452f0f0f22369b6e3a9792b6c7af", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI4MDQ3Ng==", "url": "https://github.com/FabricMC/fabric-loader/pull/205#discussion_r380280476", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\terrorsHard.append(\"\\n - Missing mods: \").append(missingMods.stream().collect(Collectors.joining(\", \")));\n          \n          \n            \n            \t\t\terrorsHard.append(\"\\n - Missing mods: \").append(String.join(\", \", missingMods));", "author": "liach", "createdAt": "2020-02-17T16:36:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI3ODk4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE2ODI3Mw==", "url": "https://github.com/FabricMC/fabric-loader/pull/205#discussion_r381168273", "bodyText": "I replaced one with String.join (didn't know about that one yet..) and two that also had [] with Arrays.toString.", "author": "sfPlayer1", "createdAt": "2020-02-19T09:26:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI3ODk4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI3OTk1Nw==", "url": "https://github.com/FabricMC/fabric-loader/pull/205#discussion_r380279957", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t\t\t\t\treturn getModId() + \" @ [\" + Stream.of(matchers).collect(Collectors.joining(\", \")) + \"]\";\n          \n          \n            \n            \t\t\t\t\t\t\t\treturn getModId() + \" @ [\" + String.join(\", \", matchers) + \"]\";", "author": "liach", "createdAt": "2020-02-17T16:35:12Z", "path": "src/main/java/net/fabricmc/loader/metadata/ModMetadataV0.java", "diffHunk": "@@ -335,7 +335,7 @@ public String toString() {\n \t\t\t\t\t\t\t} else if (matchers.length == 1) {\n \t\t\t\t\t\t\t\treturn getModId() + \" @ \" + matchers[0];\n \t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\treturn getModId() + \" @ [\" + Joiner.on(\", \").join(Arrays.asList(matchers)) + \"]\";\n+\t\t\t\t\t\t\t\treturn getModId() + \" @ [\" + Stream.of(matchers).collect(Collectors.joining(\", \")) + \"]\";", "originalCommit": "bfef41d91a71452f0f0f22369b6e3a9792b6c7af", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3cf3d46159f256ffc2a69efaf9aef09b4c3c4655", "url": "https://github.com/FabricMC/fabric-loader/commit/3cf3d46159f256ffc2a69efaf9aef09b4c3c4655", "message": "Simplify some join ops", "committedDate": "2020-02-19T09:25:29Z", "type": "commit"}]}