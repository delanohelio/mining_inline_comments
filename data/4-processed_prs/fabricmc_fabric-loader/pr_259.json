{"pr_number": 259, "pr_title": "Handle up-coming pre-releases as beta not release candidate", "pr_createdAt": "2020-06-18T21:16:28Z", "pr_url": "https://github.com/FabricMC/fabric-loader/pull/259", "timeline": [{"oid": "0a463598470d268279e59fbfd5b79480b3fa903b", "url": "https://github.com/FabricMC/fabric-loader/commit/0a463598470d268279e59fbfd5b79480b3fa903b", "message": "Handle up-coming pre-releases as beta not release candidate", "committedDate": "2020-06-18T21:16:00Z", "type": "commit"}, {"oid": "307918201ecd4474131a8a87b5dedd5a4fc30c2c", "url": "https://github.com/FabricMC/fabric-loader/commit/307918201ecd4474131a8a87b5dedd5a4fc30c2c", "message": "Use semver to detect legacy versions.", "committedDate": "2020-06-18T22:08:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU0MDA3MQ==", "url": "https://github.com/FabricMC/fabric-loader/pull/259#discussion_r442540071", "bodyText": "the error should include the contents of the release var", "author": "sfPlayer1", "createdAt": "2020-06-18T22:42:33Z", "path": "src/main/java/net/fabricmc/loader/minecraft/McVersionLookup.java", "diffHunk": "@@ -290,7 +293,20 @@ private static String normalizeVersion(String name, String release) {\n \t\t\t\tmatcher = PRE_RELEASE_PATTERN.matcher(name);\n \n \t\t\t\tif (matcher.matches()) {\n-\t\t\t\t\tname = String.format(\"rc.%s\", matcher.group(1));\n+\t\t\t\t\tboolean legacyVersion;\n+\n+\t\t\t\t\ttry {\n+\t\t\t\t\t\tlegacyVersion = SemanticVersionPredicateParser.create(\"<=1.16\").test(new SemanticVersionImpl(release, false));\n+\t\t\t\t\t} catch (VersionParsingException e) {\n+\t\t\t\t\t\tthrow new RuntimeException(\"Failed to parse version\");", "originalCommit": "307918201ecd4474131a8a87b5dedd5a4fc30c2c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU0MDMxOQ==", "url": "https://github.com/FabricMC/fabric-loader/pull/259#discussion_r442540319", "bodyText": "except", "author": "sfPlayer1", "createdAt": "2020-06-18T22:43:26Z", "path": "src/main/java/net/fabricmc/loader/minecraft/McVersionLookup.java", "diffHunk": "@@ -290,7 +293,20 @@ private static String normalizeVersion(String name, String release) {\n \t\t\t\tmatcher = PRE_RELEASE_PATTERN.matcher(name);\n \n \t\t\t\tif (matcher.matches()) {\n-\t\t\t\t\tname = String.format(\"rc.%s\", matcher.group(1));\n+\t\t\t\t\tboolean legacyVersion;\n+\n+\t\t\t\t\ttry {\n+\t\t\t\t\t\tlegacyVersion = SemanticVersionPredicateParser.create(\"<=1.16\").test(new SemanticVersionImpl(release, false));\n+\t\t\t\t\t} catch (VersionParsingException e) {\n+\t\t\t\t\t\tthrow new RuntimeException(\"Failed to parse version\");\n+\t\t\t\t\t}\n+\n+\t\t\t\t\t// Mark pre-releases as beta expect for legacy versions where these were previously marked as rc", "originalCommit": "307918201ecd4474131a8a87b5dedd5a4fc30c2c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU1MzM3OA==", "url": "https://github.com/FabricMC/fabric-loader/pull/259#discussion_r442553378", "bodyText": "The entire comment could be clarified a bit:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t\t// Mark pre-releases as beta expect for legacy versions where these were previously marked as rc\n          \n          \n            \n            \t\t\t\t\t// Mark pre-releases as 'beta' versions, except for version 1.16 and before, where they are 'rc'", "author": "haykam821", "createdAt": "2020-06-18T23:28:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU0MDMxOQ=="}], "type": "inlineReview"}, {"oid": "5ad1301554b880964aa9e4e2e93cddfe53ae3ef7", "url": "https://github.com/FabricMC/fabric-loader/commit/5ad1301554b880964aa9e4e2e93cddfe53ae3ef7", "message": "feedback", "committedDate": "2020-06-23T16:33:45Z", "type": "commit"}]}