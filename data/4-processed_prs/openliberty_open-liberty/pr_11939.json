{"pr_number": 11939, "pr_title": "Issue #11938: Export jakarta annotation API", "pr_createdAt": "2020-04-27T04:54:18Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/11939", "timeline": [{"oid": "f27fa45e92ff865a10ccf407c80dbddab95d2b16", "url": "https://github.com/OpenLiberty/open-liberty/commit/f27fa45e92ff865a10ccf407c80dbddab95d2b16", "message": "Issue #11938: Export jakarta annotation API\n\nfeature com.ibm.websphere.appserver.anno-1.0 exports the\njavax.annotation API as a spec API to make it accessible\nto applications; the same needs to be done for jakarta.annotation.\n\ncreate new feature com.ibm.websphere.appserver.anno-2.0 to\nperform the export; updates other jakarta features to include\nthe new feature instead of the old, and updated container\nservices to tolerate either (not javax/jakarta dependent)", "committedDate": "2020-04-27T13:07:50Z", "type": "commit"}, {"oid": "f27fa45e92ff865a10ccf407c80dbddab95d2b16", "url": "https://github.com/OpenLiberty/open-liberty/commit/f27fa45e92ff865a10ccf407c80dbddab95d2b16", "message": "Issue #11938: Export jakarta annotation API\n\nfeature com.ibm.websphere.appserver.anno-1.0 exports the\njavax.annotation API as a spec API to make it accessible\nto applications; the same needs to be done for jakarta.annotation.\n\ncreate new feature com.ibm.websphere.appserver.anno-2.0 to\nperform the export; updates other jakarta features to include\nthe new feature instead of the old, and updated container\nservices to tolerate either (not javax/jakarta dependent)", "committedDate": "2020-04-27T13:07:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4Mjc0Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11939#discussion_r415882742", "bodyText": "I don't know much about javadoc in the product, but does this need to be updated to anno_2.0 as well?", "author": "brideck", "createdAt": "2020-04-27T14:53:54Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/com.ibm.websphere.appserver.anno-2.0.feature", "diffHunk": "@@ -0,0 +1,22 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=com.ibm.websphere.appserver.anno-2.0\n+IBM-API-Package: jakarta.annotation; type=\"spec\", \\\n+ jakarta.annotation.security; type=\"spec\", \\\n+ jakarta.annotation.sql; type=\"spec\"\n+IBM-SPI-Package: \\\n+ com.ibm.wsspi.anno.classsource, \\\n+ com.ibm.wsspi.anno.info, \\\n+ com.ibm.wsspi.anno.service, \\\n+ com.ibm.wsspi.anno.targets, \\\n+ com.ibm.wsspi.anno.util\n+Manifest-Version: 1.0\n+IBM-Process-Types: server, \\\n+ client\n+-features=com.ibm.websphere.appserver.artifact-1.0, \\\n+ com.ibm.websphere.appserver.jakarta.annotation-2.0\n+-bundles=com.ibm.ws.anno\n+-jars=com.ibm.websphere.appserver.spi.anno; location:=dev/spi/ibm/\n+-files=dev/spi/ibm/javadoc/com.ibm.websphere.appserver.spi.anno_1.1-javadoc.zip", "originalCommit": "f27fa45e92ff865a10ccf407c80dbddab95d2b16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkwMDg2OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11939#discussion_r415900869", "bodyText": "No, a new version of the anno SPI is not being provided.  The anno SPI remains unchanged at version 1.1.  When looking at wlp/dev/spi/ibm and wlp/dev/spi/ibm/javadoc there will still only be one JAR with the SPI and one javadoc.  Specifically:\n\ncom.ibm.websphere.appserver.spi.anno_1.1.40.jar\ncom.ibm.websphere.appserver.spi.anno_1.1-javadoc.zip\n\nThe only difference with the anno-2.0 feature is that it makes jakarta.annotation public rather than javax.annotation.  There is no change to the anno SPI.", "author": "tkburroughs", "createdAt": "2020-04-27T15:14:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4Mjc0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkwMzEwNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11939#discussion_r415903105", "bodyText": "Thy new feature name com.ibm.websphere.appserver.anno-2.0 is called 2.0 to be consistent with other feature upgrades for Jakarta, and also to enable other features that use the anno SPI but don't care about javax vs jakarta.... they can use tolerates and tolerate 1.0 and 2.0.", "author": "tkburroughs", "createdAt": "2020-04-27T15:17:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4Mjc0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk0MTYwNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11939#discussion_r415941604", "bodyText": "Thanks for the clarification.", "author": "brideck", "createdAt": "2020-04-27T16:01:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4Mjc0Mg=="}], "type": "inlineReview"}]}