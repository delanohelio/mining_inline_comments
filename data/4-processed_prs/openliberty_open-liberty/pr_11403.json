{"pr_number": 11403, "pr_title": "Enable jakartaee to JSON-B and JSON-P", "pr_createdAt": "2020-03-21T05:18:52Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/11403", "timeline": [{"oid": "219e71cf25181936a13195897430a3f491bfc01d", "url": "https://github.com/OpenLiberty/open-liberty/commit/219e71cf25181936a13195897430a3f491bfc01d", "message": "Enabling jakartaee to jsonb-2.0 feature", "committedDate": "2020-03-24T02:46:25Z", "type": "commit"}, {"oid": "787ecf0223fcd68e137c013f7b9608b4a3e4f7a4", "url": "https://github.com/OpenLiberty/open-liberty/commit/787ecf0223fcd68e137c013f7b9608b4a3e4f7a4", "message": "11278 Enable JSON-P features for Jakartaee9", "committedDate": "2020-03-24T02:46:25Z", "type": "commit"}, {"oid": "a9a33764e68ebce19c94949a221f71db54313953", "url": "https://github.com/OpenLiberty/open-liberty/commit/a9a33764e68ebce19c94949a221f71db54313953", "message": "Rearrange dependencies in alphabetical order", "committedDate": "2020-03-24T02:50:12Z", "type": "commit"}, {"oid": "b3f17e50bbbde9509f75a7b97ac9c2f814a2d5ce", "url": "https://github.com/OpenLiberty/open-liberty/commit/b3f17e50bbbde9509f75a7b97ac9c2f814a2d5ce", "message": "Add kind=noship in the features", "committedDate": "2020-03-24T02:50:14Z", "type": "commit"}, {"oid": "e5a8876437886f480723ff4175e454c920d6d226", "url": "https://github.com/OpenLiberty/open-liberty/commit/e5a8876437886f480723ff4175e454c920d6d226", "message": "Add jakarta.inject-api:2.0.0-RC2", "committedDate": "2020-03-24T05:30:30Z", "type": "forcePushed"}, {"oid": "0b8671e869f83bde0600b748d6bc13f38785eef7", "url": "https://github.com/OpenLiberty/open-liberty/commit/0b8671e869f83bde0600b748d6bc13f38785eef7", "message": "Add jakarta.inject-api:2.0.0-RC2", "committedDate": "2020-03-24T06:14:04Z", "type": "commit"}, {"oid": "0b8671e869f83bde0600b748d6bc13f38785eef7", "url": "https://github.com/OpenLiberty/open-liberty/commit/0b8671e869f83bde0600b748d6bc13f38785eef7", "message": "Add jakarta.inject-api:2.0.0-RC2", "committedDate": "2020-03-24T06:14:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkxODUwOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400918508", "bodyText": "The edition should be full for features that are kind=noship", "author": "aguibert", "createdAt": "2020-03-31T13:36:05Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jsonb-2.0/com.ibm.websphere.appserver.jsonb-2.0.feature", "diffHunk": "@@ -0,0 +1,16 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=com.ibm.websphere.appserver.jsonb-2.0\n+visibility=public\n+IBM-ShortName: jsonb-2.0\n+Subsystem-Name: JavaScript Object Notation Binding 2.0\n+IBM-API-Package: jakarta.json.bind; type=\"spec\", \\\n+ jakarta.json.bind.adapter; type=\"spec\", \\\n+ jakarta.json.bind.annotation; type=\"spec\", \\\n+ jakarta.json.bind.config; type=\"spec\", \\\n+ jakarta.json.bind.serializer; type=\"spec\", \\\n+ jakarta.json.bind.spi; type=\"spec\"\n+-features=com.ibm.websphere.appserver.jsonbInternal-2.0\n+-bundles=com.ibm.ws.jsonb.service\n+kind=noship\n+edition=core", "originalCommit": "0b8671e869f83bde0600b748d6bc13f38785eef7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc2NTA3MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r403765070", "bodyText": "Done", "author": "dazavala", "createdAt": "2020-04-05T22:22:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkxODUwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkxODkxMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400918911", "bodyText": "change \"Java API\" to \"Jakarta API\"", "author": "aguibert", "createdAt": "2020-03-31T13:36:41Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jsonb-2.0/resources/l10n/com.ibm.websphere.appserver.jsonb-2.0.properties", "diffHunk": "@@ -0,0 +1,18 @@\n+###############################################################################\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+###############################################################################\n+#\n+#ISMESSAGEFILE FALSE\n+#NLS_ENCODING=UNICODE\n+#NLS_MESSAGEFORMAT_NONE\n+#\n+\n+description=The Java API for JSON Binding (JSON-B) feature provides a standard for \\", "originalCommit": "0b8671e869f83bde0600b748d6bc13f38785eef7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkzNzczNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400937736", "bodyText": "That's an oversight.  We'll make the change.", "author": "dazavala", "createdAt": "2020-03-31T14:01:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkxODkxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc2NTQ0MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r403765440", "bodyText": "Done.", "author": "dazavala", "createdAt": "2020-04-05T22:26:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkxODkxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkxOTU4OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400919588", "bodyText": "why an empty tolerates clause here?", "author": "aguibert", "createdAt": "2020-03-31T13:37:39Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/com.ibm.websphere.appserver.jsonpInternal-2.0.feature", "diffHunk": "@@ -0,0 +1,7 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=com.ibm.websphere.appserver.jsonpInternal-2.0\n+visibility=private\n+-features=com.ibm.websphere.appserver.jsonpImpl-2.0.0; ibm.tolerates:=\"\"", "originalCommit": "0b8671e869f83bde0600b748d6bc13f38785eef7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk0MDE3Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400940176", "bodyText": "I left that on purpose to indicate no tolerations.  It is vestigial and I've no problem removing the clause.", "author": "dazavala", "createdAt": "2020-03-31T14:04:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkxOTU4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk0NDI1MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400944250", "bodyText": "Lets discuss this on our upcoming call, but I think we will still need to create a jsonpImpl-2.0.1 feature and have it tolerated", "author": "aguibert", "createdAt": "2020-03-31T14:10:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkxOTU4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQyNDA2OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r404424069", "bodyText": "Followed-up: This is not an issue.", "author": "dazavala", "createdAt": "2020-04-06T22:22:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkxOTU4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMDE2MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400920160", "bodyText": "perhaps now would be the time to create a javaeeCompatible-9.0 feature?", "author": "aguibert", "createdAt": "2020-03-31T13:38:22Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/com.ibm.websphere.appserver.jsonbImpl-2.0.0.feature", "diffHunk": "@@ -0,0 +1,14 @@\n+# This private impl feature corresponds to JSON-B 2.0 with the Yasson implementation\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=com.ibm.websphere.appserver.jsonbImpl-2.0.0\n+singleton=true\n+visibility=private\n+-features=com.ibm.websphere.appserver.jsonp-2.0, \\\n+  com.ibm.websphere.appserver.classloading-1.0, \\\n+  com.ibm.websphere.appserver.jakarta.cdi-3.0,\\\n+  com.ibm.websphere.appserver.javaeeCompatible-8.0", "originalCommit": "0b8671e869f83bde0600b748d6bc13f38785eef7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTAxOTczMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r401019732", "bodyText": "Yes.  Remember from previous meetings that the feature will be named eeCompatible-9.0.", "author": "dazavala", "createdAt": "2020-03-31T15:46:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMDE2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MDM4NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r403770385", "bodyText": "Yes.  Remember from previous meetings that the feature will be named eeCompatible-9.0.  The feature is added.  All jakarta features in the working branch to date that declared a dependency on javaeeCompatible-8.0 were changed to eeCompatible-9.0.", "author": "dazavala", "createdAt": "2020-04-05T23:09:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMDE2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMDY4Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400920683", "bodyText": "The version of Yasson that will support EE9 will be Yasson 2.0, so we can name the bundle accordingly: com.ibm.ws.org.eclipse.yasson.2.0", "author": "aguibert", "createdAt": "2020-03-31T13:39:06Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/com.ibm.websphere.appserver.jsonbImpl-2.0.0.feature", "diffHunk": "@@ -0,0 +1,14 @@\n+# This private impl feature corresponds to JSON-B 2.0 with the Yasson implementation\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=com.ibm.websphere.appserver.jsonbImpl-2.0.0\n+singleton=true\n+visibility=private\n+-features=com.ibm.websphere.appserver.jsonp-2.0, \\\n+  com.ibm.websphere.appserver.classloading-1.0, \\\n+  com.ibm.websphere.appserver.jakarta.cdi-3.0,\\\n+  com.ibm.websphere.appserver.javaeeCompatible-8.0\n+-bundles=com.ibm.ws.org.eclipse.yasson.1.0.jakarta, \\", "originalCommit": "0b8671e869f83bde0600b748d6bc13f38785eef7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk0NjA1NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400946055", "bodyText": "The yasson.1.0.jakarta bundle is the jakartaee-enabled bundle generated by the yasson.1.0/bnd.bnd file, below.  We'll revisit this.  If we can obtain a jakarta release of yasson, we'll add it to CNF, create a v2.0 bundle project, and modify this feature dependency accordingly.", "author": "dazavala", "createdAt": "2020-03-31T14:12:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMDY4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MDE2Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r403770166", "bodyText": "We'll do this when the jakarta yasson release candidate publishes.", "author": "dazavala", "createdAt": "2020-04-05T23:07:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMDY4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMjExMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400922110", "bodyText": "what does this do?", "author": "aguibert", "createdAt": "2020-03-31T13:41:04Z", "path": "dev/com.ibm.ws.org.eclipse.yasson.1.0/bnd.bnd", "diffHunk": "@@ -28,3 +28,5 @@ instrument.disabled: true\n     org.hamcrest:hamcrest-all;version=1.3, \\\n     org.jmock:jmock-junit4;strategy=exact;version=2.5.1, \\\n     org.jmock:jmock;strategy=exact;version=2.5.1\n+    \n+jakartaeeMe: true", "originalCommit": "0b8671e869f83bde0600b748d6bc13f38785eef7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk0MzQ2MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400943461", "bodyText": "jakartaeeMe causes the build to create the jakartaee-enabled version of the yasson-1.0 bundle, which is used by feature jsonbImpl-2.0.0.", "author": "dazavala", "createdAt": "2020-03-31T14:09:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMjExMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMzM3NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400923374", "bodyText": "This package export should be at version 2.0.0 instead of 1.0.17", "author": "aguibert", "createdAt": "2020-03-31T13:42:45Z", "path": "dev/com.ibm.ws.org.glassfish.json.2.0/bnd.overrides", "diffHunk": "@@ -0,0 +1,14 @@\n+-include= ~../cnf/resources/bnd/rejar.props\n+bVersion=1.0\n+\n+Bundle-SymbolicName: com.ibm.ws.org.glassfish.json.2.0\n+\n+Export-Package: \\\n+   org.glassfish.json.*;version=\"1.0.17\"", "originalCommit": "0b8671e869f83bde0600b748d6bc13f38785eef7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk1Mzg2MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r400953860", "bodyText": "Currently this bundle project is vestigial, fyi.  Changing the export to v2.0 at this time will cause wiring problems.  We need to change this after removing the jsonp-2.0 dependency on the transformed glassfish-1.0 bundle.", "author": "dazavala", "createdAt": "2020-03-31T14:22:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDkyMzM3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTA1ODI2MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r401058261", "bodyText": "Same comment as Andy's regarding jsonb.\nchange \"Java API\" to \"Jakarta API\"", "author": "nmittles", "createdAt": "2020-03-31T16:41:28Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jsonp-2.0/resources/l10n/com.ibm.websphere.appserver.jsonp-2.0.properties", "diffHunk": "@@ -0,0 +1,18 @@\n+###############################################################################\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+###############################################################################\n+#\n+#ISMESSAGEFILE FALSE\n+#NLS_ENCODING=UNICODE\n+#NLS_MESSAGEFORMAT_NONE\n+#\n+\n+description=The Java API for JSON Processing (JSON-P) feature provides a standardized method for \\\n+ constructing and manipulating data to be rendered in JavaScript Object Notation (JSON).", "originalCommit": "0b8671e869f83bde0600b748d6bc13f38785eef7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MDAyOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11403#discussion_r403770029", "bodyText": "Done", "author": "dazavala", "createdAt": "2020-04-05T23:06:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTA1ODI2MQ=="}], "type": "inlineReview"}]}