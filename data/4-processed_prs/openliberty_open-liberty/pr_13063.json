{"pr_number": 13063, "pr_title": "Feature 8960 lra", "pr_createdAt": "2020-07-16T12:56:59Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/13063", "timeline": [{"oid": "2939725c382ee64d40ef44f43fef7957cea22364", "url": "https://github.com/OpenLiberty/open-liberty/commit/2939725c382ee64d40ef44f43fef7957cea22364", "message": "New LRA feature. Noddy first commit", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "66d8440e3b7976d11fd38ede17ecbacabae01ac5", "url": "https://github.com/OpenLiberty/open-liberty/commit/66d8440e3b7976d11fd38ede17ecbacabae01ac5", "message": "Add new fat project for lra tck. very noddy atm.", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "775827bb6b05072d002e651e753e331f71501807", "url": "https://github.com/OpenLiberty/open-liberty/commit/775827bb6b05072d002e651e753e331f71501807", "message": "Add still quite broken fat test source", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "27341134dd2ab86396a4131bc06fa1102bb27b5f", "url": "https://github.com/OpenLiberty/open-liberty/commit/27341134dd2ab86396a4131bc06fa1102bb27b5f", "message": "Add a fat server definition based on fault tolerance", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "2f135db1d5084aaeefc6f17cb605984c01e63ee6", "url": "https://github.com/OpenLiberty/open-liberty/commit/2f135db1d5084aaeefc6f17cb605984c01e63ee6", "message": "Add distinctly dodgy publish directory", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "37d9565df63919fa5b063936fb7f8088b16553ba", "url": "https://github.com/OpenLiberty/open-liberty/commit/37d9565df63919fa5b063936fb7f8088b16553ba", "message": "Turn fault tolerance publish dir into lra publish dir\n\nsort of, hopefully. Probably needs more work", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "b2ab5381bd54b0deaa3bf8a849ce32cdd00343a8", "url": "https://github.com/OpenLiberty/open-liberty/commit/b2ab5381bd54b0deaa3bf8a849ce32cdd00343a8", "message": "Put in some comments about where to go next", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "5f13681c585235cc50e1980c7488e46e65910f06", "url": "https://github.com/OpenLiberty/open-liberty/commit/5f13681c585235cc50e1980c7488e46e65910f06", "message": "Tidy, and use junit not testng\n\nAs the tests use junit, and originally the pom.xml file was copied from\nfault tolerance which used testng", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "9caaecd3730769c5bcf233f3c0a7592801d27c7a", "url": "https://github.com/OpenLiberty/open-liberty/commit/9caaecd3730769c5bcf233f3c0a7592801d27c7a", "message": "Add jax-rs as a test dependency and scan for Tests\n\nInstead of *Test. The tck now runs and fails", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "e80679ff50fd503a1942e1ac6c151c9c10fe4a72", "url": "https://github.com/OpenLiberty/open-liberty/commit/e80679ff50fd503a1942e1ac6c151c9c10fe4a72", "message": "Set the lra.tck.base.url config property\n\nSo that the tests can find the application", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "181ed33613f46fb849bc7f5e866a9ccf34044e55", "url": "https://github.com/OpenLiberty/open-liberty/commit/181ed33613f46fb849bc7f5e866a9ccf34044e55", "message": "Add an arquillian extension and impl of LRARecoveryService\n\nThe arquillian extension means that LRARecoveryServiceImpl gets added to\nall the war files that arquillian creates.\n\nThe LRARecoveryServiceImpl is required for the tests to run, as it allows\nthe tests to poke the internals of the LRA co-ordinator. At this point\nthe impl is a noddy impl which just implements the interface and doesn't\ncommunicate with the co-ordinator at all.\n\nIf the co-ordinator becomes a liberty feature, then this arquillian\nextension will need to be dropped, and the LRARecoveryServiceImpl will\nhave to be included in a 'test only feature', so that it can talk to\nthe co-ordinator, and still be accessible to the test code", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "b618d98dcd474270a560fc18432adde6dd49e26d", "url": "https://github.com/OpenLiberty/open-liberty/commit/b618d98dcd474270a560fc18432adde6dd49e26d", "message": "Tidy up source comments and javadoc", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "84548e964b9858cc282fb0492c5ca33aa584d218", "url": "https://github.com/OpenLiberty/open-liberty/commit/84548e964b9858cc282fb0492c5ca33aa584d218", "message": "Minor tweaks", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "f69a942a8405351ddf04debc6fef23763e7e4291", "url": "https://github.com/OpenLiberty/open-liberty/commit/f69a942a8405351ddf04debc6fef23763e7e4291", "message": "Add new wrapper project for narayana-rts", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "3ea43644fc4390a36b562e0df9cbaa44d8cec60a", "url": "https://github.com/OpenLiberty/open-liberty/commit/3ea43644fc4390a36b562e0df9cbaa44d8cec60a", "message": "New wrapper project for microprofile lra api", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "3235a2e7699f0c88de0a4513e32903cd62888a31", "url": "https://github.com/OpenLiberty/open-liberty/commit/3235a2e7699f0c88de0a4513e32903cd62888a31", "message": "Use a valid version\n\nFor some reason, bnd doesn't like 1.0-RC1, but is happy with 1.0.0-RC1\nAnd this seems to match the correct maven artifact.", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "83d98263fb1d61ca3d814eeac0c667d873313346", "url": "https://github.com/OpenLiberty/open-liberty/commit/83d98263fb1d61ca3d814eeac0c667d873313346", "message": "Move the lra api jar to the api directory", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "5be908e983a18216b5f715847eb5d1b562247e5f", "url": "https://github.com/OpenLiberty/open-liberty/commit/5be908e983a18216b5f715847eb5d1b562247e5f", "message": "Add private feature for lra api", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "1a214cacefe1ea153e3108b41c973b158ba4a400", "url": "https://github.com/OpenLiberty/open-liberty/commit/1a214cacefe1ea153e3108b41c973b158ba4a400", "message": "Add lra api private feature to lra feature", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "d3aefb5ee5ec049ba08468af5a162af88afa7b43", "url": "https://github.com/OpenLiberty/open-liberty/commit/d3aefb5ee5ec049ba08468af5a162af88afa7b43", "message": "Make the private feature work properly", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "60f4dbb15496acbf3a6525b5278798fc1e4fee65", "url": "https://github.com/OpenLiberty/open-liberty/commit/60f4dbb15496acbf3a6525b5278798fc1e4fee65", "message": "Expose LRA api publicly from the lra-1.0 feature", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "391fc2bbc940dddc53dc6ba3ed97613c2cd9ce0c", "url": "https://github.com/OpenLiberty/open-liberty/commit/391fc2bbc940dddc53dc6ba3ed97613c2cd9ce0c", "message": "Add the narayana impl classes to the lra feature", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "8f0362be4db84368db806af514c26cb20c54b2fe", "url": "https://github.com/OpenLiberty/open-liberty/commit/8f0362be4db84368db806af514c26cb20c54b2fe", "message": "Need to undo this", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "9bfa394396a29381ae6e518ba6fc23631b6efeba", "url": "https://github.com/OpenLiberty/open-liberty/commit/9bfa394396a29381ae6e518ba6fc23631b6efeba", "message": "Add more dependencies to the narayana bundle\n\nAt this point, the lra feature will start, and can reference an lra api class", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "b07a8a39c97571201eb506ea31afb1f87d48c022", "url": "https://github.com/OpenLiberty/open-liberty/commit/b07a8a39c97571201eb506ea31afb1f87d48c022", "message": "Try to implement some filters", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "569384af7662ba07a1f101531cc44fd6a6271e38", "url": "https://github.com/OpenLiberty/open-liberty/commit/569384af7662ba07a1f101531cc44fd6a6271e38", "message": "Register the narayana jax-rs filters", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "374eab75357a6884ec6537fb769fe7e5468909d2", "url": "https://github.com/OpenLiberty/open-liberty/commit/374eab75357a6884ec6537fb769fe7e5468909d2", "message": "initial commit for narayana coordinator bundle", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "b8e76c2364b6afae52e69c8a2009c60db42b722a", "url": "https://github.com/OpenLiberty/open-liberty/commit/b8e76c2364b6afae52e69c8a2009c60db42b722a", "message": "new feature for lraCoordinator", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "fc6a18f4c291050b61dabf3c1ceeaf01415035f7", "url": "https://github.com/OpenLiberty/open-liberty/commit/fc6a18f4c291050b61dabf3c1ceeaf01415035f7", "message": "Remove coordinator feature as it doesn't compile\n\nIt will go back in when it does compile", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "3370c5dc8312658dc94ec240d32cd21d6792568d", "url": "https://github.com/OpenLiberty/open-liberty/commit/3370c5dc8312658dc94ec240d32cd21d6792568d", "message": "Tidy up 1.\n\nRename the component\nDelete the unneeded component\nFix copyright headers\nTidy up bnd.bnd to match", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "fc1c6931a9acc96d7d5c0a97bd79513a6ef2858a", "url": "https://github.com/OpenLiberty/open-liberty/commit/fc1c6931a9acc96d7d5c0a97bd79513a6ef2858a", "message": "Tidy 2 improve tracing", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "a7a22592902ec13fd66ce7b5c1c1aff4d2e64ca5", "url": "https://github.com/OpenLiberty/open-liberty/commit/a7a22592902ec13fd66ce7b5c1c1aff4d2e64ca5", "message": "Tidy 3: copyright dates and some comments", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "223469f1081571d7ff7c64491e2fa60d93f0fd29", "url": "https://github.com/OpenLiberty/open-liberty/commit/223469f1081571d7ff7c64491e2fa60d93f0fd29", "message": "Fix LRA SPI bean\n\nThis is the noddy bean impl just intended to get the tests running\n(not passing). It had a bug that meant the tests waited forever", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "a1daa7ccb0ef53d2eab26575c680ede4cbf2df25", "url": "https://github.com/OpenLiberty/open-liberty/commit/a1daa7ccb0ef53d2eab26575c680ede4cbf2df25", "message": "Add lite and full mode tests", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "c27f13713b31efa570411a3dff1491350d664ee4", "url": "https://github.com/OpenLiberty/open-liberty/commit/c27f13713b31efa570411a3dff1491350d664ee4", "message": "Tidy 4: remove last traces of the coordinator feature\n\nJust for the moment, it will come back later", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "62e37c1d8b95dd2a85a4fff1e467d2954d5e99eb", "url": "https://github.com/OpenLiberty/open-liberty/commit/62e37c1d8b95dd2a85a4fff1e467d2954d5e99eb", "message": "Rename feature to mpLRA-1.0", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "5cab4b2eb2e6c4a8da48818493dd82b7cb04f2e0", "url": "https://github.com/OpenLiberty/open-liberty/commit/5cab4b2eb2e6c4a8da48818493dd82b7cb04f2e0", "message": "Update lra tck to 1.0-M1\n\nfrom RC1 which is a bit old now", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "7698f9841350018a61a41a492893517989ceecf0", "url": "https://github.com/OpenLiberty/open-liberty/commit/7698f9841350018a61a41a492893517989ceecf0", "message": "Update narayana dependencies to 5.10.5", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "03c916f5912d8343747c7b815e5fa87b0bf2730b", "url": "https://github.com/OpenLiberty/open-liberty/commit/03c916f5912d8343747c7b815e5fa87b0bf2730b", "message": "Add host and port config to server.xml\n\nThat is, config for the participant to use to contact the\ncoordinator", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "c2a7e19331c53201a576d39f32d1fe8a3a5e644e", "url": "https://github.com/OpenLiberty/open-liberty/commit/c2a7e19331c53201a576d39f32d1fe8a3a5e644e", "message": "Add config for coord path and pass through to narayana", "committedDate": "2020-07-15T15:36:12Z", "type": "commit"}, {"oid": "788f1a77051741bac61c4cff96b4ca3e3ee14ed2", "url": "https://github.com/OpenLiberty/open-liberty/commit/788f1a77051741bac61c4cff96b4ca3e3ee14ed2", "message": "Have a go at updated exceptions and NLS messsages\n\neverything seems to compile, but the message key is not\nturned into the formated message. not sure why", "committedDate": "2020-07-15T15:53:13Z", "type": "commit"}, {"oid": "b7d8b0f4ab9ed9b24d633bbb8039a39e046de3e2", "url": "https://github.com/OpenLiberty/open-liberty/commit/b7d8b0f4ab9ed9b24d633bbb8039a39e046de3e2", "message": "Correct the message bundle name in package-info", "committedDate": "2020-07-16T12:54:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc4NjEwNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13063#discussion_r455786104", "bodyText": "Copywrite notice needed", "author": "yongja79", "createdAt": "2020-07-16T13:29:16Z", "path": "dev/com.ibm.ws.lra/bnd.bnd", "diffHunk": "@@ -0,0 +1,42 @@\n+# For information on bnd syntax, see http://was.pok.ibm.com/xwiki/bin/view/Liberty/UsingBnd", "originalCommit": "b7d8b0f4ab9ed9b24d633bbb8039a39e046de3e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc4NzgzNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13063#discussion_r455787836", "bodyText": "Copywrite notice needed", "author": "yongja79", "createdAt": "2020-07-16T13:31:52Z", "path": "dev/com.ibm.ws.lra/resources/com/ibm/ws/lra/resources/Lra.nlsprops", "diffHunk": "@@ -0,0 +1,7 @@\n+#ISMESSAGEFILE true", "originalCommit": "b7d8b0f4ab9ed9b24d633bbb8039a39e046de3e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "246edd17a93e76ca52b88b431da8eb1f2f1e9d96", "url": "https://github.com/OpenLiberty/open-liberty/commit/246edd17a93e76ca52b88b431da8eb1f2f1e9d96", "message": "Fix two copyright headers", "committedDate": "2020-07-16T13:52:51Z", "type": "commit"}]}