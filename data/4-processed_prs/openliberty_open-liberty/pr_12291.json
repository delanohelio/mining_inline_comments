{"pr_number": 12291, "pr_title": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "pr_createdAt": "2020-05-20T20:27:08Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12291", "timeline": [{"oid": "059acfc90b05e2900bebb93446bb80296282ec78", "url": "https://github.com/OpenLiberty/open-liberty/commit/059acfc90b05e2900bebb93446bb80296282ec78", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-05-28T16:12:09Z", "type": "forcePushed"}, {"oid": "28f650a43b90b3dc821aa84b5f1c72612b039a91", "url": "https://github.com/OpenLiberty/open-liberty/commit/28f650a43b90b3dc821aa84b5f1c72612b039a91", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-05-29T17:36:06Z", "type": "forcePushed"}, {"oid": "185c21c3e95ef68de3f417743218b69b0a761b16", "url": "https://github.com/OpenLiberty/open-liberty/commit/185c21c3e95ef68de3f417743218b69b0a761b16", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-05-29T18:16:12Z", "type": "forcePushed"}, {"oid": "00f32c373de2478583b023776dcb1e3638824281", "url": "https://github.com/OpenLiberty/open-liberty/commit/00f32c373de2478583b023776dcb1e3638824281", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-05-29T18:23:59Z", "type": "forcePushed"}, {"oid": "a1e6397a9f69629c8155fad35b74ac5af518330b", "url": "https://github.com/OpenLiberty/open-liberty/commit/a1e6397a9f69629c8155fad35b74ac5af518330b", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-05-29T18:24:45Z", "type": "forcePushed"}, {"oid": "5c1880fdbbc3f51090783bda1fef692c0e6f063e", "url": "https://github.com/OpenLiberty/open-liberty/commit/5c1880fdbbc3f51090783bda1fef692c0e6f063e", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-09T16:01:24Z", "type": "forcePushed"}, {"oid": "045ba2bc7582c01c7ce83acfe38d92f79e2668e3", "url": "https://github.com/OpenLiberty/open-liberty/commit/045ba2bc7582c01c7ce83acfe38d92f79e2668e3", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-11T23:18:57Z", "type": "forcePushed"}, {"oid": "cda354663c9541ad058debd97a09b8593e0b56a7", "url": "https://github.com/OpenLiberty/open-liberty/commit/cda354663c9541ad058debd97a09b8593e0b56a7", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-12T15:55:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg0NjY4Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443846687", "bodyText": "I don't think this should be noship.  I think it should stay to be ga.  I really don't get why this auto feature even exists though.  It seems that the feature, jar and files should just be added to the security-1.0 and 2.0 features.", "author": "jhanders34", "createdAt": "2020-06-22T21:52:02Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/com.ibm.websphere.appserver.autoSecurity-1.0.feature", "diffHunk": "@@ -3,10 +3,10 @@ symbolicName=com.ibm.websphere.appserver.autoSecurity-1.0\n visibility=private\n IBM-API-Package: com.ibm.wsspi.security.token; type=\"ibm-api\"\n IBM-Provision-Capability: \\\n- osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=com.ibm.websphere.appserver.security-1.0))\"\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(|(osgi.identity=com.ibm.websphere.appserver.security-1.0)(osgi.identity=io.openliberty.security-2.0)))\"\n IBM-Install-Policy: when-satisfied\n -features=com.ibm.websphere.appserver.autoSecurityS4U2-1.0\n -jars=com.ibm.websphere.appserver.api.security.spnego; location:=dev/api/ibm/\n -files=dev/api/ibm/javadoc/com.ibm.websphere.appserver.api.security.spnego_1.1-javadoc.zip\n-kind=ga\n+kind=noship", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3MTIwMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443871201", "bodyText": "I don't know what the heck i was doing here. It should still be ga.", "author": "jvanhill", "createdAt": "2020-06-22T23:03:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg0NjY4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg5OTYyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443899627", "bodyText": "Even better make it a private feature and have both security-1.0 and security-2.0 depend on it.", "author": "jhanders34", "createdAt": "2020-06-23T00:44:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg0NjY4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ0NDEzOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r444444139", "bodyText": "I changed this back to GA.\nAs for this being an being an auto-feature, while I agree I don't really want to change anything more for this PR than I have to. If you want me to get rid of this auto-feature, I can open another issue to do so.", "author": "jvanhill", "createdAt": "2020-06-23T19:04:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg0NjY4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg1MTI5NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443851294", "bodyText": "General comment throughout the changes.  noship features should be edition=full", "author": "jhanders34", "createdAt": "2020-06-22T22:03:39Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.webAppSecurity-2.0.feature", "diffHunk": "@@ -0,0 +1,18 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.webAppSecurity-2.0\n+IBM-App-ForceRestart: install, \\\n+ uninstall\n+IBM-API-Package: com.ibm.websphere.security.web; type=\"ibm-api\"\n+IBM-Provision-Capability: osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=com.ibm.websphere.appserver.servlet-5.0))\", \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.appSecurity-4.0))\"\n+IBM-Install-Policy: when-satisfied\n+-features=com.ibm.websphere.appserver.containerServices-1.0, \\\n+ io.openliberty.distributedMap-2.0\n+-bundles=com.ibm.ws.webcontainer.security.app, \\\n+ io.openliberty.webcontainer.security.internal; start-phase:=SERVICE_EARLY, \\\n+ com.ibm.ws.security.appbnd, \\\n+ io.openliberty.security.authentication.tai.internal\n+-jars=com.ibm.websphere.appserver.api.webcontainer.security.app; location:=dev/api/ibm/\n+-files=dev/api/ibm/javadoc/com.ibm.websphere.appserver.api.webcontainer.security.app_1.4-javadoc.zip\n+kind=noship\n+edition=core", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3MTI4NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443871284", "bodyText": "Ok. Didn't realize that. Will make that change.", "author": "jvanhill", "createdAt": "2020-06-22T23:03:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg1MTI5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg1NTQ2NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443855464", "bodyText": "Shouldn't this be io.openliberty.jaspic.2.0.spi?", "author": "jhanders34", "createdAt": "2020-06-22T22:14:53Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/appSecurity-4.0/io.openliberty.appSecurity-4.0.feature", "diffHunk": "@@ -0,0 +1,28 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.appSecurity-4.0\n+visibility=public\n+IBM-API-Package: jakarta.security.enterprise; type=\"spec\", \\\n+ jakarta.security.enterprise.authentication.mechanism.http; type=\"spec\", \\\n+ jakarta.security.enterprise.credential; type=\"spec\", \\\n+ jakarta.security.enterprise.identitystore; type=\"spec\", \\\n+ jakarta.security.auth.message; type=\"spec\", \\\n+ jakarta.security.auth.message.callback; type=\"spec\", \\\n+ jakarta.security.auth.message.config; type=\"spec\", \\\n+ jakarta.security.auth.message.module; type=\"spec\"\n+\n+IBM-ShortName: appSecurity-4.0\n+Subsystem-Name: Application Security 4.0\n+-features=io.openliberty.cdi-3.0, \\\n+ com.ibm.websphere.appserver.el-4.0, \\\n+ io.openliberty.security-2.0, \\\n+ com.ibm.websphere.appserver.servlet-5.0\n+-bundles=io.openliberty.jakarta.security.2.0; location:=dev/api/spec/; mavenCoordinates=\"jakarta.security.enterprise:jakarta.security.enterprise-api:2.0.0-RC2\", \\\n+ io.openliberty.security.jakartasec.2.0.internal, \\\n+ io.openliberty.security.jakartasec.2.0.cdi.internal, \\\n+ io.openliberty.security.authentication.tai.internal, \\\n+ io.openliberty.jakarta.jaspic.2.0; location:=dev/api/spec/; mavenCoordinates=\"jakarta.security.auth.message:jakarta.security.auth.message-api:2.0.0-RC1\", \\\n+ io.openliberty.security.jaspic.2.0.internal\n+kind=noship\n+edition=core\n+-jars=com.ibm.websphere.appserver.spi.jaspic; location:=dev/spi/ibm/", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU0NDk2MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r444544961", "bodyText": "Honestly I am not sure why these files are in appSecurity-3.0 (where i based appSecurity-4.0 off of). Seems they should just be in jaspic-1.1 / 2.0 (where they are indeed listed). I don't really feel comfortable removing the -jars, the jakarta.security.auth.message IBM-API-Package directives, or -files b/c this one does indeed load the jaspic API. I would be open to creating a new issue to do this if you wish.\nAnd since the SPI bundle is transformed using the jakartaee transformer, the bundle name is io.openliberty.jaspic.2.0.spi. I have updated the -jars entry to reflect that.", "author": "jvanhill", "createdAt": "2020-06-23T22:33:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg1NTQ2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg1NjYzNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443856634", "bodyText": "I think these should be internal.cdi and internal.tai", "author": "jhanders34", "createdAt": "2020-06-22T22:18:03Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/appSecurity-4.0/io.openliberty.appSecurity-4.0.feature", "diffHunk": "@@ -0,0 +1,28 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.appSecurity-4.0\n+visibility=public\n+IBM-API-Package: jakarta.security.enterprise; type=\"spec\", \\\n+ jakarta.security.enterprise.authentication.mechanism.http; type=\"spec\", \\\n+ jakarta.security.enterprise.credential; type=\"spec\", \\\n+ jakarta.security.enterprise.identitystore; type=\"spec\", \\\n+ jakarta.security.auth.message; type=\"spec\", \\\n+ jakarta.security.auth.message.callback; type=\"spec\", \\\n+ jakarta.security.auth.message.config; type=\"spec\", \\\n+ jakarta.security.auth.message.module; type=\"spec\"\n+\n+IBM-ShortName: appSecurity-4.0\n+Subsystem-Name: Application Security 4.0\n+-features=io.openliberty.cdi-3.0, \\\n+ com.ibm.websphere.appserver.el-4.0, \\\n+ io.openliberty.security-2.0, \\\n+ com.ibm.websphere.appserver.servlet-5.0\n+-bundles=io.openliberty.jakarta.security.2.0; location:=dev/api/spec/; mavenCoordinates=\"jakarta.security.enterprise:jakarta.security.enterprise-api:2.0.0-RC2\", \\\n+ io.openliberty.security.jakartasec.2.0.internal, \\\n+ io.openliberty.security.jakartasec.2.0.cdi.internal, \\\n+ io.openliberty.security.authentication.tai.internal, \\", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU2MTAwNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r444561005", "bodyText": "I have renamed them.", "author": "jvanhill", "createdAt": "2020-06-23T23:22:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg1NjYzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MDQyNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443860424", "bodyText": "This feature depends on appSecurity-4.0 that already exports these packages.  Either it is redundant that they are exported here, or they should not be exported in appSecurity-4.0.\nIn appSecurity-4.0 we do not export the IBM-SPI-Package.  So I believe we should either declare the SPIs in appSecurity-4.0 and remove the SPI package in here and remove the -jars and files or we should remove the -jar and files from appSecurity-4.0 and leave everything else as is.", "author": "jhanders34", "createdAt": "2020-06-22T22:29:21Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jaspic-2.0/io.openliberty.jaspic-2.0.feature", "diffHunk": "@@ -0,0 +1,23 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.jaspic-2.0\n+visibility=public\n+IBM-API-Package: \\\n+  jakarta.security.auth.message; type=\"spec\", \\\n+  jakarta.security.auth.message.callback; type=\"spec\", \\\n+  jakarta.security.auth.message.config; type=\"spec\", \\\n+  jakarta.security.auth.message.module; type=\"spec\"", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU1ODQyNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r444558424", "bodyText": "These are jaspic specific so I am not sure why they are exported in appSecurity-3.0 / 4.0. I don't know why someone using appSecurity-4.0, which does not depend on the jaspic-2.0 feature, would expect these artifacts and APIs to be there.\nBut again see the discussion under appSecurity-4.0.feature, I may just want to leave it like it was in appSecurity-3.0 and open an issue to address this after I make the initial merge.", "author": "jvanhill", "createdAt": "2020-06-23T23:14:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MDQyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MDY3Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443860673", "bodyText": "Similar to above if this -jars line is kept shouldn't it be io.openliberty.jaspic.2.0.spi?", "author": "jhanders34", "createdAt": "2020-06-22T22:30:08Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jaspic-2.0/io.openliberty.jaspic-2.0.feature", "diffHunk": "@@ -0,0 +1,23 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.jaspic-2.0\n+visibility=public\n+IBM-API-Package: \\\n+  jakarta.security.auth.message; type=\"spec\", \\\n+  jakarta.security.auth.message.callback; type=\"spec\", \\\n+  jakarta.security.auth.message.config; type=\"spec\", \\\n+  jakarta.security.auth.message.module; type=\"spec\"\n+IBM-ShortName: jaspic-2.0\n+IBM-SPI-Package: \\\n+  com.ibm.wsspi.security.jaspi; type=\"ibm-spi\"\n+Subsystem-Name: Jakarta Authentication SPI for Containers (JASPIC) 2.0\n+-features=\\\n+  io.openliberty.appSecurity-4.0, \\\n+  io.openliberty.jaxb-3.0, \\\n+  com.ibm.websphere.appserver.servlet-5.0\n+-bundles=\\\n+  io.openliberty.jakarta.jaspic.2.0; location:=dev/api/spec/; mavenCoordinates=\"jakarta.security.auth.message:jakarta.security.auth.message-api:2.0.0-RC1\", \\\n+  io.openliberty.security.jaspic.2.0.internal\n+kind=noship\n+edition=core\n+-jars=com.ibm.websphere.appserver.spi.jaspic; location:=dev/spi/ibm/", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDU1NjkzNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r444556937", "bodyText": "As I mentioned in the appSecurity-4.0 feature findings, I will update the -jars line to reflect the jakartaee'd SPI bundle.\nWhether I remove these lines form jaspic-2.0 or appSecurity-4.0 can be done in a follow up issue.", "author": "jvanhill", "createdAt": "2020-06-23T23:09:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MDY3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MTU3Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443861576", "bodyText": "Why did you remove this private package declaration?", "author": "jhanders34", "createdAt": "2020-06-22T22:32:40Z", "path": "dev/com.ibm.ws.security.jaspic/bnd.bnd", "diffHunk": "@@ -35,13 +44,10 @@ Import-Package: \\\n   javax.xml.bind;version=!,\\\n   javax.xml.bind.annotation;version=!,\\\n   *\n- \n-Private-Package: \\", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2OTg4NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443869884", "bodyText": "This was by accident. I noticed it in testing. Planned on fixing it when I merged. I will undo this change.", "author": "jvanhill", "createdAt": "2020-06-22T22:58:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MTU3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MzY0Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443863642", "bodyText": "Should these be 2.0.0 instead of 1.0.0?", "author": "jhanders34", "createdAt": "2020-06-22T22:38:48Z", "path": "dev/io.openliberty.jakarta.security.2.0/bnd.bnd", "diffHunk": "@@ -0,0 +1,32 @@\n+#*******************************************************************************\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+#*******************************************************************************\n+-include= ~../cnf/resources/bnd/bundle.props\n+bVersion=1.0\n+\n+Bundle-SymbolicName: io.openliberty.jakarta.security.2.0; singleton:=true\n+\n+Export-Package: \\\n+    jakarta.security.enterprise;version=\"1.0.0\", \\", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3MzA2OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443873068", "bodyText": "They are new packages. They don't need to match the bundle version as far as I know. I can make them match if you feel that is expected.", "author": "jvanhill", "createdAt": "2020-06-22T23:09:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MzY0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNTExNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r444525115", "bodyText": "Changed these to be 2.0.0 instead of 1.0.0 and updated the jakarta-versions.properties file as well (to address your comment there).", "author": "jvanhill", "createdAt": "2020-06-23T21:42:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MzY0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MzkzMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443863933", "bodyText": "Dynacache is not a Jakarta function so its description should not include the word Jakarta in it.", "author": "jhanders34", "createdAt": "2020-06-22T22:39:43Z", "path": "dev/wlp-jakartaee-transform/rules/jakarta-bundles.properties", "diffHunk": "@@ -1 +1,11 @@\n-*=*.jakarta,2.0,+\" Jakarta\",+\"; Jarkata Enabled\"\n\\ No newline at end of file\n+*=*.jakarta,2.0,+\" Jakarta\",+\"; Jarkata Enabled\"\n+\n+com.ibm.ws.security.authentication.tai=io.openliberty.security.authentication.tai.internal,2.0,\"Security TAI Authentication\",\"Security TAI Authentication; Jarkata Enabled\"\n+com.ibm.ws.security.jaspic.1.1=io.openliberty.security.jaspic.2.0.internal,2.0,\"Security JASPIC 2.0 Internal\",\"Security JASPIC 2.0 Internal; Jakarta Enabled\"\n+com.ibm.ws.security.javaeesec.1.0=io.openliberty.security.jakartasec.2.0.internal,2.0,\"Jakarta Security 2.0 Internal\",\"Jakarta Security 2.0 Internal\"\n+com.ibm.ws.security.javaeesec.cdi=io.openliberty.security.jakartasec.2.0.cdi.internal,2.0,\"Jakarta Security 2.0 CDI\",\"Jakarta Security 2.0 CDI\"\n+com.ibm.websphere.appserver.spi.jaspic=io.openliberty.jaspic.2.0.spi,2.0,\"Jakarta Authentication Service Provider Interface for Containers 2.0 SPI \",\"Jakarta Authentication Service Provider Interface for Containers 2.0 SPI\"\n+com.ibm.ws.security.jaas.common=io.openliberty.security.jaas.common.internal,2.0,\"Security JAAS Implementation\",\"Security JAAS Implementation\"\n+com.ibm.ws.security.authentication.builtin=io.openliberty.security.authentication.builtin.internal,2.0,\"Security Built-in Authentication Implementation\",\"Security Built-in Authentication Implementation; Jakarta Enabled\"\n+com.ibm.ws.webcontainer.security=io.openliberty.webcontainer.security.internal,2.0,\"Jakarta Webcontainer Security Collaborator internal\",\"Jakarta Webcontainer Security Collaborator internal\"\n+com.ibm.ws.dynacache=io.openliberty.dynacache.internal,2.0,\"Jakarta Dynacache\",\"Jakarta Dynacache Core cache capability in Liberty\"", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3MDI4Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443870282", "bodyText": "Yeah, i was trying to describe this as being jakarta compliant / capable.", "author": "jvanhill", "createdAt": "2020-06-22T23:00:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MzkzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUwODA0Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r444508042", "bodyText": "I changed the some of the bundles (that are not Jakarta specific specs) to have \"; Jakarta Enabled\" at the end of the description, the same as the transformation tool does by default.", "author": "jvanhill", "createdAt": "2020-06-23T21:05:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2MzkzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2NTU0Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443865547", "bodyText": "Instead of making a new version of distributedMap, it may be better to do auto features and pull in the right bundle depending on if servlet 5.0 is enabled or previous versions of servlet.  You could pull out the two classes that depend on servlet in com.ibm.ws.dynacache and put them in their own bundle with a different package name like com.ibm.ws.dynacache.feature and then just have that be jakarta-ized.", "author": "jhanders34", "createdAt": "2020-06-22T22:44:58Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/distributedMap-2.0/io.openliberty.distributedMap-2.0.feature", "diffHunk": "@@ -0,0 +1,26 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3MzE5Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443873193", "bodyText": "This sounds like a good idea. I will try to do this.", "author": "jvanhill", "createdAt": "2020-06-22T23:09:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2NTU0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDY3Mjg2NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r444672864", "bodyText": "So I think I did this a little different than you had suggested. I didn't move anything out of the dynacache bundle. I am keeping it jakartaee'd as before.\nI created two auto features, that are a singleton and different versions of the same feature. The distributedCache-1.0 feature, I removed the dynacache bundle and the private servlet feature (these will be provided by the two auto-features).\nThe first auto feature provides the javaee dynacache bundle and private javaee servlet feature(s).\n-include= ~${workspace}/cnf/resources/bnd/feature.props\nsymbolicName=io.openliberty.autoDistributedMap-1.0\nvisibility=private\nsingleton=true\nIBM-App-ForceRestart: install, \\\n uninstall\nSubsystem-Version: 1.0.0\nIBM-Provision-Capability: osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=com.ibm.websphere.appserver.distributedMap-1.0))\"\n-features=\\\n  com.ibm.websphere.appserver.javax.servlet-3.0; ibm.tolerates:=\"3.1,4.0\"\n-bundles=\\\n  com.ibm.ws.dynacache\nkind=ga\nedition=core\n\n\nThe second auto feature provides the jakartaee'd dynacache bundle and the private jakarta servlet-5.0 feature. Really, I am not sure that I need to depend on that feature since the auto-feature auto-provisions only when the public servlet-5.0 feature is enabled (which enables the private servlet-5.0 feature).\n-include= ~${workspace}/cnf/resources/bnd/feature.props\nsymbolicName=io.openliberty.autoDistributedMap-2.0\nvisibility=private\nsingleton=true\nIBM-App-ForceRestart: install, \\\n uninstall\nSubsystem-Version: 2.0.0\nIBM-Provision-Capability: osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=com.ibm.websphere.appserver.distributedMap-1.0))\",\\\n                          osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=com.ibm.websphere.appserver.servlet-5.0))\"\n-features=\\\n  io.openliberty.jakarta.servlet-5.0\n-bundles=\\\n  io.openliberty.dynacache.internal\nkind=noship\nedition=full\n\nLet me know what you think.", "author": "jvanhill", "createdAt": "2020-06-24T06:30:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2NTU0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc4ODMzNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r445788335", "bodyText": "The above did not work. I removed the javax compatible bundle and feature from the distributeMap-1.0 feature. I added a dependency on a io.openliberty.distributeMapPrivate-1.0 feature, and it tolerates version 2.0.\nThe private features have the dependencies on the javax (1.0) and jakarta (2.0) bundles and features.\nI also added dependencies on eeCompatible feature from both features to help resolve the javax and jakarta dependencies.", "author": "jvanhill", "createdAt": "2020-06-25T19:26:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2NTU0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTc4ODcwNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r445788707", "bodyText": "So in summary, the last comment describes the changes I made that appear to make this work.", "author": "jvanhill", "createdAt": "2020-06-25T19:26:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2NTU0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2Njk0Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443866943", "bodyText": "Should these be added as well to be 2.0,3?\njakarta.security.enterprise\njakarta.security.enterprise.authentication.mechanism.http\njakarta.security.enterprise.credential\njakarta.security.enterprise.identitystore", "author": "jhanders34", "createdAt": "2020-06-22T22:49:26Z", "path": "dev/wlp-jakartaee-transform/rules/jakarta-versions.properties", "diffHunk": "@@ -93,3 +93,8 @@ org.jboss.weld.serialization.spi=[4.0,5)\n org.jboss.weld.transaction.spi=[4.0,5)\n org.jboss.weld.util.collections=[4.0,5)\n org.jboss.weld=[4.0,5)\n+\n+jakarta.security.auth.message=[2.0,3)\n+jakarta.security.auth.message.callback=[2.0,3)\n+jakarta.security.auth.message.config=[2.0,3)\n+jakarta.security.auth.message.module=[2.0,3)", "originalCommit": "cda354663c9541ad058debd97a09b8593e0b56a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg3MzY1MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r443873650", "bodyText": "I think I just added these lines for packages I had issues with. I didn't do them for every package I created. I will need to look back at the reasoning.", "author": "jvanhill", "createdAt": "2020-06-22T23:11:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2Njk0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUxMzU2NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r444513564", "bodyText": "I modified the bnd.bnd for the io.openliberty.jakarta.security-2.0 bundle to use version 2.0.0 for the jakarta.security packages and then updated the file above to reflect those versions.", "author": "jvanhill", "createdAt": "2020-06-23T21:16:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg2Njk0Mw=="}], "type": "inlineReview"}, {"oid": "0b262a6b74511a1174e4b652135ee2bb36403180", "url": "https://github.com/OpenLiberty/open-liberty/commit/0b262a6b74511a1174e4b652135ee2bb36403180", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-25T20:49:04Z", "type": "forcePushed"}, {"oid": "a54fc919f30da3e7653d3d8a6a8627230140850c", "url": "https://github.com/OpenLiberty/open-liberty/commit/a54fc919f30da3e7653d3d8a6a8627230140850c", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-26T19:02:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyODU4MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446528581", "bodyText": "Why did you remove parallel activation?", "author": "jhanders34", "createdAt": "2020-06-27T13:48:44Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/distributedMap-1.0/com.ibm.websphere.appserver.distributedMap-1.0.feature", "diffHunk": "@@ -16,11 +16,8 @@ Subsystem-Name: Distributed Map interface for Dynamic Caching 1.0\n   com.ibm.websphere.appserver.jndi-1.0, \\\n   com.ibm.websphere.appserver.containerServices-1.0, \\\n   com.ibm.websphere.appserver.classloading-1.0, \\\n-  com.ibm.websphere.appserver.javax.servlet-3.0; ibm.tolerates:=\"3.1,4.0\"\n--bundles=\\\n-  com.ibm.ws.dynacache\n+  io.openliberty.distributedMapInternal-1.0; ibm.tolerates:=2.0\n -jars=com.ibm.websphere.appserver.api.distributedMap; location:=dev/api/ibm/\n -files=dev/api/ibm/javadoc/com.ibm.websphere.appserver.api.distributedMap_2.0-javadoc.zip\n kind=ga\n edition=core\n-WLP-Activation-Type: parallel", "originalCommit": "a54fc919f30da3e7653d3d8a6a8627230140850c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY2NTk1Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446665953", "bodyText": "I am not sure how this got removed. I will add this back. But this begs the question should the internal / private features that I added be parallel?", "author": "jvanhill", "createdAt": "2020-06-28T15:43:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyODU4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY2Njc4MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446666781", "bodyText": "You answered this in another comment. Making the change.", "author": "jvanhill", "createdAt": "2020-06-28T15:51:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyODU4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyODg3Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446528877", "bodyText": "I think this can be beta since servlet-5.0 is beta.  You may want to talk with the Dynacache guys.  They may want to enable some tests for EE9 before they want it to be enabled for beta.", "author": "jhanders34", "createdAt": "2020-06-27T13:51:33Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.distributedMapInternal-2.0.feature", "diffHunk": "@@ -0,0 +1,14 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.distributedMapInternal-2.0\n+visibility=private\n+singleton=true\n+IBM-App-ForceRestart: install, \\\n+ uninstall\n+Subsystem-Version: 2.0.0\n+-features=\\\n+  io.openliberty.jakarta.servlet-5.0,\\\n+  com.ibm.websphere.appserver.eeCompatible-9.0\n+-bundles=\\\n+  io.openliberty.dynacache.internal\n+kind=noship", "originalCommit": "a54fc919f30da3e7653d3d8a6a8627230140850c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY2NjM4Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446666387", "bodyText": "I would rather leave this for the dynacache guys. They didn't even realize they had work when i told them I was making this change. They are in the last wave anyways.", "author": "jvanhill", "createdAt": "2020-06-28T15:48:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyODg3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY2NjQxNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446666415", "bodyText": "(I will talk to them when we get things finalized here on what the status is)", "author": "jvanhill", "createdAt": "2020-06-28T15:48:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyODg3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyODk1MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446528950", "bodyText": "Please add parallel activation directive to this feature and the Internal-2.0 one as well.", "author": "jhanders34", "createdAt": "2020-06-27T13:52:32Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.distributedMapInternal-1.0.feature", "diffHunk": "@@ -0,0 +1,14 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.distributedMapInternal-1.0\n+visibility=private\n+singleton=true\n+IBM-App-ForceRestart: install, \\\n+ uninstall\n+Subsystem-Version: 1.0.0\n+-features=\\\n+  com.ibm.websphere.appserver.javax.servlet-3.0; ibm.tolerates:=\"3.1,4.0\",\\\n+  com.ibm.websphere.appserver.eeCompatible-6.0; ibm.tolerates:=\"7.0,8.0\"\n+-bundles=\\\n+  com.ibm.ws.dynacache\n+kind=ga\n+edition=core", "originalCommit": "a54fc919f30da3e7653d3d8a6a8627230140850c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY2NjQ2MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446666461", "bodyText": "And you answered my question from one of the other comments you made. I will do this.", "author": "jvanhill", "createdAt": "2020-06-28T15:49:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjUyODk1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NDIyNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446554225", "bodyText": "Since this is the only feature that is changed, should the security-1.0 feature just be updated to have builtinAuthentication-1.0 with tolerate 2.0?", "author": "jhanders34", "createdAt": "2020-06-27T18:34:41Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.security-2.0.feature", "diffHunk": "@@ -0,0 +1,20 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.security-2.0\n+IBM-API-Package: com.ibm.wsspi.security.tai; type=\"ibm-api\", \\\n+ com.ibm.wsspi.security.token; type=\"ibm-api\", \\\n+ com.ibm.wsspi.security.auth.callback; type=\"ibm-api\", \\\n+ com.ibm.wsspi.security.common.auth.module; type=\"ibm-api\", \\\n+ com.ibm.websphere.security.auth.callback; type=\"ibm-api\"\n+-features=com.ibm.websphere.appserver.ssl-1.0, \\\n+ com.ibm.websphere.appserver.securityInfrastructure-1.0, \\\n+ com.ibm.websphere.appserver.builtinAuthorization-1.0, \\\n+ com.ibm.websphere.appserver.ltpa-1.0, \\\n+ io.openliberty.builtinAuthentication-2.0, \\", "originalCommit": "a54fc919f30da3e7653d3d8a6a8627230140850c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY2NzI4Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446667282", "bodyText": "The builtin authentication feature was named io.openliberty.builtinAuthentication-2.0. If we would rather remove the private security-2.0 feature, I can rename that builtinAuthentication-2.0 feature to be com.ibm..... Your call.", "author": "jvanhill", "createdAt": "2020-06-28T15:56:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NDIyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1MTg3NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447351874", "bodyText": "I can live with it the way it is for now.  You can do it in the follow on feature.  Since it is a private feature I think you can rename builtinAuthentication-1.0 to io.openliberty as well.", "author": "jhanders34", "createdAt": "2020-06-30T01:22:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NDIyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3NDMxNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447374315", "bodyText": "I am going to need to change builtinAuthorization in the next feature (jaac / Jakarta Authorization) so I can handle this there if you are alright with it.\nIf I have to do another build, then I will do it under this one. So i will leave this open until the build results come back.", "author": "jvanhill", "createdAt": "2020-06-30T02:42:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NDIyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU4NjEyMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447586122", "bodyText": "I am fine with waiting for jaac feature.", "author": "jhanders34", "createdAt": "2020-06-30T10:39:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NDIyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc0NDIzMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447744233", "bodyText": "Took this as an action item and will address it in the authorization PR.", "author": "jvanhill", "createdAt": "2020-06-30T14:49:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NDIyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NDU5OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446554598", "bodyText": "This feature should have eeCompatible-9.0 feature added to it and appSecurity-3.0 should have eeCompatible-8.0 feature added.", "author": "jhanders34", "createdAt": "2020-06-27T18:38:24Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/appSecurity-4.0/io.openliberty.appSecurity-4.0.feature", "diffHunk": "@@ -0,0 +1,28 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.appSecurity-4.0\n+visibility=public\n+IBM-API-Package: jakarta.security.enterprise; type=\"spec\", \\\n+ jakarta.security.enterprise.authentication.mechanism.http; type=\"spec\", \\\n+ jakarta.security.enterprise.credential; type=\"spec\", \\\n+ jakarta.security.enterprise.identitystore; type=\"spec\", \\\n+ jakarta.security.auth.message; type=\"spec\", \\\n+ jakarta.security.auth.message.callback; type=\"spec\", \\\n+ jakarta.security.auth.message.config; type=\"spec\", \\\n+ jakarta.security.auth.message.module; type=\"spec\"\n+\n+IBM-ShortName: appSecurity-4.0\n+Subsystem-Name: Application Security 4.0\n+-features=io.openliberty.cdi-3.0, \\\n+ com.ibm.websphere.appserver.el-4.0, \\\n+ io.openliberty.security-2.0, \\\n+ com.ibm.websphere.appserver.servlet-5.0", "originalCommit": "a54fc919f30da3e7653d3d8a6a8627230140850c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY2NjAwNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446666004", "bodyText": "This feature should no longer be here. Deleting this file.", "author": "jvanhill", "createdAt": "2020-06-28T15:44:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NDU5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NzMyOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446557328", "bodyText": "I am wondering if this should be 6.0 and tolerate 7.0 and 8.0 since it is servlet 3.0 (EE 6), tolerates 3.1 (EE 7) and 4.0 (EE8).  I don't think you are supposed to mix the order with different features because it can cause issues.", "author": "jhanders34", "createdAt": "2020-06-27T19:07:26Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jaspic-1.1/com.ibm.websphere.appserver.jaspic-1.1.feature", "diffHunk": "@@ -13,7 +13,8 @@ Subsystem-Name: Java Authentication SPI for Containers 1.1\n -features=\\\n   com.ibm.websphere.appserver.appSecurity-2.0; ibm.tolerates:=3.0, \\\n   com.ibm.websphere.appserver.internal.optional.jaxb-2.2; ibm.tolerates:=2.3, \\\n-  com.ibm.websphere.appserver.servlet-3.0; ibm.tolerates:=\"3.1, 4.0\"\n+  com.ibm.websphere.appserver.servlet-3.0; ibm.tolerates:=\"3.1, 4.0\", \\\n+  com.ibm.websphere.appserver.eeCompatible-7.0; ibm.tolerates:=\"6.0,8.0\"", "originalCommit": "a54fc919f30da3e7653d3d8a6a8627230140850c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY2NTI5Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446665297", "bodyText": "Yes, it should be 6.0, tolerating 7 and 8. I will change this.", "author": "jvanhill", "createdAt": "2020-06-28T15:37:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NzMyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY2NjIwMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r446666201", "bodyText": "You are correct. I will change this.", "author": "jvanhill", "createdAt": "2020-06-28T15:46:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU1NzMyOA=="}], "type": "inlineReview"}, {"oid": "e73081ef323294b2b0d59765451fa0e90176bb93", "url": "https://github.com/OpenLiberty/open-liberty/commit/e73081ef323294b2b0d59765451fa0e90176bb93", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-28T15:57:48Z", "type": "forcePushed"}, {"oid": "31ca092184e1e0ef3f37f573c00e5dd10feb72c0", "url": "https://github.com/OpenLiberty/open-liberty/commit/31ca092184e1e0ef3f37f573c00e5dd10feb72c0", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-29T14:06:15Z", "type": "forcePushed"}, {"oid": "4f890876389e48807abf171e2c1a9086ba01f46b", "url": "https://github.com/OpenLiberty/open-liberty/commit/4f890876389e48807abf171e2c1a9086ba01f46b", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-29T21:03:13Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1Mjk3OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447352978", "bodyText": "Does this work correctly?  You said the jar file name doesn't change.  Does this use the file name or the bundle name?", "author": "jhanders34", "createdAt": "2020-06-30T01:25:50Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/appSecurity-4.0/io.openliberty.appSecurity-4.0.feature", "diffHunk": "@@ -0,0 +1,29 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.appSecurity-4.0\n+visibility=public\n+IBM-API-Package: jakarta.security.enterprise; type=\"spec\", \\\n+ jakarta.security.enterprise.authentication.mechanism.http; type=\"spec\", \\\n+ jakarta.security.enterprise.credential; type=\"spec\", \\\n+ jakarta.security.enterprise.identitystore; type=\"spec\", \\\n+ jakarta.security.auth.message; type=\"spec\", \\\n+ jakarta.security.auth.message.callback; type=\"spec\", \\\n+ jakarta.security.auth.message.config; type=\"spec\", \\\n+ jakarta.security.auth.message.module; type=\"spec\"\n+\n+IBM-ShortName: appSecurity-4.0\n+Subsystem-Name: Application Security 4.0\n+-features=io.openliberty.cdi-3.0, \\\n+ com.ibm.websphere.appserver.el-4.0, \\\n+ io.openliberty.security-2.0, \\\n+ com.ibm.websphere.appserver.servlet-5.0, \\\n+ com.ibm.websphere.appserver.eeCompatible-9.0\n+-bundles=io.openliberty.jakarta.security.2.0; location:=dev/api/spec/; mavenCoordinates=\"jakarta.security.enterprise:jakarta.security.enterprise-api:2.0.0-RC2\", \\\n+ io.openliberty.security.jakartasec.2.0.internal, \\\n+ io.openliberty.security.jakartasec.2.0.internal.cdi, \\\n+ io.openliberty.security.authentication.internal.tai, \\\n+ io.openliberty.jakarta.jaspic.2.0; location:=dev/api/spec/; mavenCoordinates=\"jakarta.security.auth.message:jakarta.security.auth.message-api:2.0.0-RC1\", \\\n+ io.openliberty.security.jaspic.2.0.internal\n+kind=noship\n+edition=full\n+-jars=io.openliberty.jaspic.2.0.spi; location:=dev/spi/ibm/", "originalCommit": "4f890876389e48807abf171e2c1a9086ba01f46b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1NTAxMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447355010", "bodyText": "Same goes for io.openliberty.jaspic-2.0.feature", "author": "jhanders34", "createdAt": "2020-06-30T01:33:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1Mjk3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3MDQ5Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447370493", "bodyText": "It uses the bundle name. When I used the JAR name the server package --include=minify would complain that it couldn't find the JAR.", "author": "jvanhill", "createdAt": "2020-06-30T02:27:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1Mjk3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1MzE0MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447353140", "bodyText": "Clearly this message is wrong.", "author": "jhanders34", "createdAt": "2020-06-30T01:26:22Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/appSecurity-4.0/resources/l10n/io.openliberty.appSecurity-4.0.properties", "diffHunk": "@@ -0,0 +1,18 @@\n+###############################################################################\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+###############################################################################\n+#\n+#ISMESSAGEFILE FALSE\n+#NLS_ENCODING=UNICODE\n+#NLS_MESSAGEFORMAT_NONE\n+#\n+\n+description=This feature enables support for securing the server runtime environment and applications \\\n+ using Security-1.0 as defined in JSR-375.", "originalCommit": "4f890876389e48807abf171e2c1a9086ba01f46b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3Mjc3Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447372776", "bodyText": "removed the JSR reference and re-wrote as: \"... using Jakarta Security-2.0.\"", "author": "jvanhill", "createdAt": "2020-06-30T02:36:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1MzE0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU3ODcxMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447578711", "bodyText": "Still appears to say Security-1.0 as defined in JSR-375", "author": "tevans78", "createdAt": "2020-06-30T10:25:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1MzE0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU4NDc1MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447584750", "bodyText": "He hasn't pushed the update yet.", "author": "jhanders34", "createdAt": "2020-06-30T10:36:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1MzE0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1NjU0OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447356548", "bodyText": "Jarkata should be Jakarta.  Same on line 1.", "author": "jhanders34", "createdAt": "2020-06-30T01:38:16Z", "path": "dev/wlp-jakartaee-transform/rules/jakarta-bundles.properties", "diffHunk": "@@ -1 +1,11 @@\n-*=*.jakarta,2.0,+\" Jakarta\",+\"; Jarkata Enabled\"\n\\ No newline at end of file\n+*=*.jakarta,2.0,+\" Jakarta\",+\"; Jarkata Enabled\"\n+\n+com.ibm.ws.security.authentication.tai=io.openliberty.security.authentication.internal.tai,,\"Security TAI Authentication\",\"Security TAI Authentication; Jarkata Enabled\"", "originalCommit": "4f890876389e48807abf171e2c1a9086ba01f46b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3MTIyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447371221", "bodyText": "potato, potatoe... jakarta, jarkarta... fixed.\nNotice that the first line (that I did not modify beyond the new line) has \"Jarkarta\". I fixed that too. That's what I get for copy / paste.", "author": "jvanhill", "createdAt": "2020-06-30T02:30:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM1NjU0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU4MTU0Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447581542", "bodyText": "Since this file has the same content as jakarta-cdiServletInitializer.properties, do we need two files? Ought to have a better naming strategy for these files too. Perhaps this is a change for a follow on PR?", "author": "tevans78", "createdAt": "2020-06-30T10:30:32Z", "path": "dev/wlp-jakartaee-transform/rules/jakarta-xml-servletContainerInitializer.properties", "diffHunk": "@@ -0,0 +1 @@\n+javax.servlet.ServletContainerInitializer=jakarta.servlet.ServletContainerInitializer", "originalCommit": "4f890876389e48807abf171e2c1a9086ba01f46b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzY3NTkwNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447675907", "bodyText": "Yeah, it has the same content and we don't need both. When you added CDI I didn't realize you added the cdi one. Do you mind if I remove one in Jakarta authorization PR?", "author": "jvanhill", "createdAt": "2020-06-30T13:20:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU4MTU0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc0Mzg4Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12291#discussion_r447743887", "bodyText": "Took this down as an action item and will do this in the authorization PR.", "author": "jvanhill", "createdAt": "2020-06-30T14:49:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU4MTU0Mg=="}], "type": "inlineReview"}, {"oid": "f2a91d7722b56fd385bde31bd9ade509ae29ea8e", "url": "https://github.com/OpenLiberty/open-liberty/commit/f2a91d7722b56fd385bde31bd9ade509ae29ea8e", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-30T13:23:11Z", "type": "commit"}, {"oid": "f2a91d7722b56fd385bde31bd9ade509ae29ea8e", "url": "https://github.com/OpenLiberty/open-liberty/commit/f2a91d7722b56fd385bde31bd9ade509ae29ea8e", "message": "Issue #11858: Create JakartaEE jaspic-2.0 feature.", "committedDate": "2020-06-30T13:23:11Z", "type": "forcePushed"}]}