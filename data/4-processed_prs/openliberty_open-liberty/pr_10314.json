{"pr_number": 10314, "pr_title": "Warn on duplicate use or multiple matching of auth filters", "pr_createdAt": "2020-01-07T18:23:53Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/10314", "timeline": [{"oid": "9e8cfe7b8af2aaacfc4cddd4cfd2ff1a8d1ba743", "url": "https://github.com/OpenLiberty/open-liberty/commit/9e8cfe7b8af2aaacfc4cddd4cfd2ff1a8d1ba743", "message": "first pass changes to detect duplicate use of auth filters", "committedDate": "2019-12-19T16:29:35Z", "type": "commit"}, {"oid": "a48ca04523f8c8b634fc8e238ba396f469c6076f", "url": "https://github.com/OpenLiberty/open-liberty/commit/a48ca04523f8c8b634fc8e238ba396f469c6076f", "message": "add warning msgs", "committedDate": "2020-01-07T15:01:31Z", "type": "commit"}, {"oid": "181dc16db022d784f5519964aef6c20945633dfb", "url": "https://github.com/OpenLiberty/open-liberty/commit/181dc16db022d784f5519964aef6c20945633dfb", "message": "add unit test and 2nd warning case", "committedDate": "2020-01-07T16:18:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNDAyMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364404020", "bodyText": "Change\n\"More than one OpenID Connect client configuration contains an authFilterRef attribute which refers to the same filter.\"\nTo\n\"More than one OpenID Connect client configuration contains an authFilterRef attribute that refers to the same filter.\"", "author": "Charlotte-Holt", "createdAt": "2020-01-08T19:28:57Z", "path": "dev/com.ibm.ws.security.openidconnect.client/resources/com/ibm/ws/security/openidconnect/client/internal/resources/OidcClientMessages.nlsprops", "diffHunk": "@@ -272,5 +272,14 @@ OIDC_CLIENT_DISCOVERY_NOT_UPDATED_CONFIG.useraction=Informational message. No ac\n CONFIG_REQUIRED_ATTRIBUTE_NULL=CWWKS1529E: The required [{0}] configuration attribute is missing or empty and a default value is not provided. Verify that the attribute is configured or discovered from the provider, that it is not empty, and that it does not consist of only white space characters.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.explanation=The specified configuration attribute might be missing from the server configuration. If a value is specified, white space at the beginning and end of the value is removed when the value is processed, so the value in the configuration might be empty or consist of only white space characters. If the discovery endpoint is specified to get this attribute value from the provider, then the discovery might have a problem.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.useraction=Ensure that the specified configuration attribute is configured, that it is not empty, and that it does not consist of only white space characters. If the discovery endpoint is configured to obtain this information, then make sure that there are no errors with the discovery request.\n- \n+\n+# do not translate authFilterRef\n+CONFIG_AUTHFILTER_NOTUNIQUE=CWWKS1530W: More than one OpenID Connect client configuration specifies the same authentication filter [{0}]. This can cause indeterminate behavior.\n+CONFIG_AUTHFILTER_NOTUNIQUE.explanation=More than one OpenID Connect client configuration contains an authFilterRef attribute which refers to the same filter. Any of these clients might process a request that matches the filter, leading to indeterminate behavior.  ", "originalCommit": "181dc16db022d784f5519964aef6c20945633dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg4NzY5NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364887694", "bodyText": "done", "author": "brutif", "createdAt": "2020-01-09T18:14:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNDAyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNDI2NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364404265", "bodyText": "Change\n\"Review server.xml and correct the configuration.\"\nTo\n\"Review the server.xml file and correct the configuration.\"", "author": "Charlotte-Holt", "createdAt": "2020-01-08T19:29:31Z", "path": "dev/com.ibm.ws.security.openidconnect.client/resources/com/ibm/ws/security/openidconnect/client/internal/resources/OidcClientMessages.nlsprops", "diffHunk": "@@ -272,5 +272,14 @@ OIDC_CLIENT_DISCOVERY_NOT_UPDATED_CONFIG.useraction=Informational message. No ac\n CONFIG_REQUIRED_ATTRIBUTE_NULL=CWWKS1529E: The required [{0}] configuration attribute is missing or empty and a default value is not provided. Verify that the attribute is configured or discovered from the provider, that it is not empty, and that it does not consist of only white space characters.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.explanation=The specified configuration attribute might be missing from the server configuration. If a value is specified, white space at the beginning and end of the value is removed when the value is processed, so the value in the configuration might be empty or consist of only white space characters. If the discovery endpoint is specified to get this attribute value from the provider, then the discovery might have a problem.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.useraction=Ensure that the specified configuration attribute is configured, that it is not empty, and that it does not consist of only white space characters. If the discovery endpoint is configured to obtain this information, then make sure that there are no errors with the discovery request.\n- \n+\n+# do not translate authFilterRef\n+CONFIG_AUTHFILTER_NOTUNIQUE=CWWKS1530W: More than one OpenID Connect client configuration specifies the same authentication filter [{0}]. This can cause indeterminate behavior.\n+CONFIG_AUTHFILTER_NOTUNIQUE.explanation=More than one OpenID Connect client configuration contains an authFilterRef attribute which refers to the same filter. Any of these clients might process a request that matches the filter, leading to indeterminate behavior.  \n+CONFIG_AUTHFILTER_NOTUNIQUE.useraction=Review server.xml and correct the configuration.", "originalCommit": "181dc16db022d784f5519964aef6c20945633dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg4Nzg5Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364887897", "bodyText": "done", "author": "brutif", "createdAt": "2020-01-09T18:15:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNDI2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNTAyNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364405025", "bodyText": "Change\n\"More than one OpenID Connect client authentication filter matches a request to URL [{0}].  The matching filters were [{1}].  This can cause indeterminate behavior.\"\nTo\n\"More than one OpenID Connect client authentication filter matches a request to [{0}] URL. The matching filters were [{1}]. This can cause indeterminate behavior.\"\n(Just one space between sentences.)", "author": "Charlotte-Holt", "createdAt": "2020-01-08T19:31:20Z", "path": "dev/com.ibm.ws.security.openidconnect.client/resources/com/ibm/ws/security/openidconnect/client/internal/resources/OidcClientMessages.nlsprops", "diffHunk": "@@ -272,5 +272,14 @@ OIDC_CLIENT_DISCOVERY_NOT_UPDATED_CONFIG.useraction=Informational message. No ac\n CONFIG_REQUIRED_ATTRIBUTE_NULL=CWWKS1529E: The required [{0}] configuration attribute is missing or empty and a default value is not provided. Verify that the attribute is configured or discovered from the provider, that it is not empty, and that it does not consist of only white space characters.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.explanation=The specified configuration attribute might be missing from the server configuration. If a value is specified, white space at the beginning and end of the value is removed when the value is processed, so the value in the configuration might be empty or consist of only white space characters. If the discovery endpoint is specified to get this attribute value from the provider, then the discovery might have a problem.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.useraction=Ensure that the specified configuration attribute is configured, that it is not empty, and that it does not consist of only white space characters. If the discovery endpoint is configured to obtain this information, then make sure that there are no errors with the discovery request.\n- \n+\n+# do not translate authFilterRef\n+CONFIG_AUTHFILTER_NOTUNIQUE=CWWKS1530W: More than one OpenID Connect client configuration specifies the same authentication filter [{0}]. This can cause indeterminate behavior.\n+CONFIG_AUTHFILTER_NOTUNIQUE.explanation=More than one OpenID Connect client configuration contains an authFilterRef attribute which refers to the same filter. Any of these clients might process a request that matches the filter, leading to indeterminate behavior.  \n+CONFIG_AUTHFILTER_NOTUNIQUE.useraction=Review server.xml and correct the configuration.\n+\n+AUTHFILTER_MULTIPLE_MATCHED=CWWKS1531W: More than one OpenID Connect client authentication filter matches a request to URL [{0}].  The matching filters were [{1}].  This can cause indeterminate behavior.", "originalCommit": "181dc16db022d784f5519964aef6c20945633dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg4ODMwNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364888306", "bodyText": "done", "author": "brutif", "createdAt": "2020-01-09T18:16:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNTAyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNTYyMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364405622", "bodyText": "Change\n\"Any client using one of these filters could process the request, leading to indeterminate behavior.\"\nTo\n\"Any client that uses one of these filters can process the request, leading to indeterminate behavior.\"", "author": "Charlotte-Holt", "createdAt": "2020-01-08T19:32:46Z", "path": "dev/com.ibm.ws.security.openidconnect.client/resources/com/ibm/ws/security/openidconnect/client/internal/resources/OidcClientMessages.nlsprops", "diffHunk": "@@ -272,5 +272,14 @@ OIDC_CLIENT_DISCOVERY_NOT_UPDATED_CONFIG.useraction=Informational message. No ac\n CONFIG_REQUIRED_ATTRIBUTE_NULL=CWWKS1529E: The required [{0}] configuration attribute is missing or empty and a default value is not provided. Verify that the attribute is configured or discovered from the provider, that it is not empty, and that it does not consist of only white space characters.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.explanation=The specified configuration attribute might be missing from the server configuration. If a value is specified, white space at the beginning and end of the value is removed when the value is processed, so the value in the configuration might be empty or consist of only white space characters. If the discovery endpoint is specified to get this attribute value from the provider, then the discovery might have a problem.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.useraction=Ensure that the specified configuration attribute is configured, that it is not empty, and that it does not consist of only white space characters. If the discovery endpoint is configured to obtain this information, then make sure that there are no errors with the discovery request.\n- \n+\n+# do not translate authFilterRef\n+CONFIG_AUTHFILTER_NOTUNIQUE=CWWKS1530W: More than one OpenID Connect client configuration specifies the same authentication filter [{0}]. This can cause indeterminate behavior.\n+CONFIG_AUTHFILTER_NOTUNIQUE.explanation=More than one OpenID Connect client configuration contains an authFilterRef attribute which refers to the same filter. Any of these clients might process a request that matches the filter, leading to indeterminate behavior.  \n+CONFIG_AUTHFILTER_NOTUNIQUE.useraction=Review server.xml and correct the configuration.\n+\n+AUTHFILTER_MULTIPLE_MATCHED=CWWKS1531W: More than one OpenID Connect client authentication filter matches a request to URL [{0}].  The matching filters were [{1}].  This can cause indeterminate behavior.\n+AUTHFILTER_MULTIPLE_MATCHED.explanation=More than one authentication filter matches an inbound request. Any client using one of these filters could process the request, leading to indeterminate behavior.  ", "originalCommit": "181dc16db022d784f5519964aef6c20945633dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg4ODU2Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364888567", "bodyText": "done", "author": "brutif", "createdAt": "2020-01-09T18:16:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNTYyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNTgxMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364405813", "bodyText": "Change\n\"Review server.xml and correct the configuration.\"\nTo\n\"Review the server.xml file and correct the configuration.\"", "author": "Charlotte-Holt", "createdAt": "2020-01-08T19:33:14Z", "path": "dev/com.ibm.ws.security.openidconnect.client/resources/com/ibm/ws/security/openidconnect/client/internal/resources/OidcClientMessages.nlsprops", "diffHunk": "@@ -272,5 +272,14 @@ OIDC_CLIENT_DISCOVERY_NOT_UPDATED_CONFIG.useraction=Informational message. No ac\n CONFIG_REQUIRED_ATTRIBUTE_NULL=CWWKS1529E: The required [{0}] configuration attribute is missing or empty and a default value is not provided. Verify that the attribute is configured or discovered from the provider, that it is not empty, and that it does not consist of only white space characters.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.explanation=The specified configuration attribute might be missing from the server configuration. If a value is specified, white space at the beginning and end of the value is removed when the value is processed, so the value in the configuration might be empty or consist of only white space characters. If the discovery endpoint is specified to get this attribute value from the provider, then the discovery might have a problem.\n CONFIG_REQUIRED_ATTRIBUTE_NULL.useraction=Ensure that the specified configuration attribute is configured, that it is not empty, and that it does not consist of only white space characters. If the discovery endpoint is configured to obtain this information, then make sure that there are no errors with the discovery request.\n- \n+\n+# do not translate authFilterRef\n+CONFIG_AUTHFILTER_NOTUNIQUE=CWWKS1530W: More than one OpenID Connect client configuration specifies the same authentication filter [{0}]. This can cause indeterminate behavior.\n+CONFIG_AUTHFILTER_NOTUNIQUE.explanation=More than one OpenID Connect client configuration contains an authFilterRef attribute which refers to the same filter. Any of these clients might process a request that matches the filter, leading to indeterminate behavior.  \n+CONFIG_AUTHFILTER_NOTUNIQUE.useraction=Review server.xml and correct the configuration.\n+\n+AUTHFILTER_MULTIPLE_MATCHED=CWWKS1531W: More than one OpenID Connect client authentication filter matches a request to URL [{0}].  The matching filters were [{1}].  This can cause indeterminate behavior.\n+AUTHFILTER_MULTIPLE_MATCHED.explanation=More than one authentication filter matches an inbound request. Any client using one of these filters could process the request, leading to indeterminate behavior.  \n+AUTHFILTER_MULTIPLE_MATCHED.useraction=Review server.xml and correct the configuration.", "originalCommit": "181dc16db022d784f5519964aef6c20945633dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDg4ODY1MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10314#discussion_r364888651", "bodyText": "done", "author": "brutif", "createdAt": "2020-01-09T18:16:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDQwNTgxMw=="}], "type": "inlineReview"}, {"oid": "d9dadfd38046c1a0478b4a6f67e1eebac32fb3d3", "url": "https://github.com/OpenLiberty/open-liberty/commit/d9dadfd38046c1a0478b4a6f67e1eebac32fb3d3", "message": "id changes, avoid duplicate warnings", "committedDate": "2020-01-09T18:18:25Z", "type": "commit"}, {"oid": "6685d18458be98ca6f34c2990c60cf0b9c29c57c", "url": "https://github.com/OpenLiberty/open-liberty/commit/6685d18458be98ca6f34c2990c60cf0b9c29c57c", "message": "remove runtime message supression cache", "committedDate": "2020-01-10T16:40:58Z", "type": "commit"}]}