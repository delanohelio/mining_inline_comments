{"pr_number": 10838, "pr_title": "Ensure SSL passwords are not logged in oracle connection properties", "pr_createdAt": "2020-02-11T19:11:36Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/10838", "timeline": [{"oid": "6a8af792622911fddaf02924be86ab441b632b2f", "url": "https://github.com/OpenLiberty/open-liberty/commit/6a8af792622911fddaf02924be86ab441b632b2f", "message": "Ensure connection property passwords are not logged.", "committedDate": "2020-02-11T18:50:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg3MDk0NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10838#discussion_r377870944", "bodyText": ".toLowerCase().contains(\"connectionProperties\") won't ever be true", "author": "njr-11", "createdAt": "2020-02-11T20:09:31Z", "path": "dev/com.ibm.ws.jdbc/src/com/ibm/ws/jdbc/internal/PropertyService.java", "diffHunk": "@@ -161,6 +172,8 @@ public int hashCode() {\n                 entry.setValue(\"******\");\n             else if(entry.getKey() instanceof String && entry.getValue() instanceof String && ((String) entry.getKey()).toLowerCase().contains(\"url\"))\n                 entry.setValue(filterURL((String) entry.getValue()));\n+            else if (entry.getKey() instanceof String && entry.getKey() instanceof String && ((String) entry.getKey()).toLowerCase().contains(\"connectionProperties\"))", "originalCommit": "6a8af792622911fddaf02924be86ab441b632b2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg3MzQ5OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10838#discussion_r377873498", "bodyText": "Rather than having separate patterns/matchers for keyStorePassword=..., you could use a single pattern for just Password=...", "author": "njr-11", "createdAt": "2020-02-11T20:15:29Z", "path": "dev/com.ibm.ws.jdbc/src/com/ibm/ws/jdbc/internal/PropertyService.java", "diffHunk": "@@ -194,6 +207,23 @@ public static String filterURL(String url) {\n         sb.append(\"****\");\n         return sb.toString();\n     }\n+    \n+    public static String filterConnectionProperties(String props) {\n+        final String keyStorePattern = \"javax\\\\.net\\\\.ssl\\\\.keyStorePassword\\\\s*=\\\\s*(.*?)\\\\s*(;|$)\";\n+        final String trustStorePattern = \"javax\\\\.net\\\\.ssl\\\\.trustStorePassword\\\\s*=\\\\s*(.*?)\\\\s*(;|$)\";", "originalCommit": "6a8af792622911fddaf02924be86ab441b632b2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ea7dd91584e1a76d0e588829ccb872fad2dd1be7", "url": "https://github.com/OpenLiberty/open-liberty/commit/ea7dd91584e1a76d0e588829ccb872fad2dd1be7", "message": "feedback changes", "committedDate": "2020-02-12T17:11:10Z", "type": "commit"}]}