{"pr_number": 14074, "pr_title": "Emit warning when SPNEGO auth used for an XA-capable datasource and no recovery auth is defined", "pr_createdAt": "2020-09-21T22:38:09Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14074", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNDcwNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14074#discussion_r492724704", "bodyText": "Suggested update\n\nA connection request for the {0} XA resource was made by using SPNEGO authentication, but no recovery authentication data alias was configured. The XA resource is not able to participate in automated XA recovery unless a recovery authentication data alias is configured.", "author": "Charlotte-Holt", "createdAt": "2020-09-22T13:17:11Z", "path": "dev/com.ibm.ws.jca.cm/resources/com/ibm/ws/j2c/resources/J2CAMessages.nlsprops", "diffHunk": "@@ -321,6 +321,11 @@ POOL_MANAGER_NOT_FOUND_J2CA0695=J2CA0695E: Unable to find primary pool manager d\n POOL_MANAGER_NOT_FOUND_J2CA0695.explanation=An internal error occurred during failover processing.\n POOL_MANAGER_NOT_FOUND_J2CA0695.useraction=CMSG0002\n \n+# ---------------------------------\n+SPNEGO_XA_RECOVERY_NOT_SUPPORTED_J2CA0695W=J2CA0695W: A connection request for XA resource {0} was made using SPNEGO authentication, but no recovery auth data alias was configured. The XA resource will not be able to participate in automated XA recovery unless a recovery auth data alias is configured.", "originalCommit": "e7cd27153b92a82838d5dac880bcd8af6ab72cba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNTQ0MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14074#discussion_r492725440", "bodyText": "Update\n\nAs a result, SPNEGO authentication can not be used for automatic XA recovery.\n\nTo\n\nAs a result, SPNEGO authentication can't be used for automatic XA recovery.", "author": "Charlotte-Holt", "createdAt": "2020-09-22T13:18:09Z", "path": "dev/com.ibm.ws.jca.cm/resources/com/ibm/ws/j2c/resources/J2CAMessages.nlsprops", "diffHunk": "@@ -321,6 +321,11 @@ POOL_MANAGER_NOT_FOUND_J2CA0695=J2CA0695E: Unable to find primary pool manager d\n POOL_MANAGER_NOT_FOUND_J2CA0695.explanation=An internal error occurred during failover processing.\n POOL_MANAGER_NOT_FOUND_J2CA0695.useraction=CMSG0002\n \n+# ---------------------------------\n+SPNEGO_XA_RECOVERY_NOT_SUPPORTED_J2CA0695W=J2CA0695W: A connection request for XA resource {0} was made using SPNEGO authentication, but no recovery auth data alias was configured. The XA resource will not be able to participate in automated XA recovery unless a recovery auth data alias is configured.\n+SPNEGO_XA_RECOVERY_NOT_SUPPORTED_J2CA0695W.explanation=XA recovery is an automated background process, but SPNEGO authentication typically requires manual user input. As a result, SPNEGO authentication can not be used for automatic XA recovery.", "originalCommit": "e7cd27153b92a82838d5dac880bcd8af6ab72cba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNTgwNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14074#discussion_r492725804", "bodyText": "Suggested update\n\nConfigure a recovery authentication data alias on the XA resource.", "author": "Charlotte-Holt", "createdAt": "2020-09-22T13:18:40Z", "path": "dev/com.ibm.ws.jca.cm/resources/com/ibm/ws/j2c/resources/J2CAMessages.nlsprops", "diffHunk": "@@ -321,6 +321,11 @@ POOL_MANAGER_NOT_FOUND_J2CA0695=J2CA0695E: Unable to find primary pool manager d\n POOL_MANAGER_NOT_FOUND_J2CA0695.explanation=An internal error occurred during failover processing.\n POOL_MANAGER_NOT_FOUND_J2CA0695.useraction=CMSG0002\n \n+# ---------------------------------\n+SPNEGO_XA_RECOVERY_NOT_SUPPORTED_J2CA0695W=J2CA0695W: A connection request for XA resource {0} was made using SPNEGO authentication, but no recovery auth data alias was configured. The XA resource will not be able to participate in automated XA recovery unless a recovery auth data alias is configured.\n+SPNEGO_XA_RECOVERY_NOT_SUPPORTED_J2CA0695W.explanation=XA recovery is an automated background process, but SPNEGO authentication typically requires manual user input. As a result, SPNEGO authentication can not be used for automatic XA recovery.\n+SPNEGO_XA_RECOVERY_NOT_SUPPORTED_J2CA0695W.useraction=Configure a recovery auth data alias on the XA resource.", "originalCommit": "e7cd27153b92a82838d5dac880bcd8af6ab72cba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjg5MjMxOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14074#discussion_r492892318", "bodyText": "Thanks for the comments @Charlotte-Holt. I'll update your other 2 suggestions, but I'm going to decline this one because I think \"auth data\" is more clear to the user, because in config what the user types in is actually <authData> or xxxAuthDataRef", "author": "aguibert", "createdAt": "2020-09-22T16:57:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNTgwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzEzNDYzNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14074#discussion_r493134637", "bodyText": "Got it. That makes sense. Thanks, @aguibert.", "author": "Charlotte-Holt", "createdAt": "2020-09-23T01:44:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNTgwNA=="}], "type": "inlineReview"}, {"oid": "2eebbadc037b953f2d0c9397a54d9a1ea343e74b", "url": "https://github.com/OpenLiberty/open-liberty/commit/2eebbadc037b953f2d0c9397a54d9a1ea343e74b", "message": "Emit warning when SPNEGO auth used for an XA-capable datasource and no recovery auth is defined", "committedDate": "2020-09-22T16:58:07Z", "type": "commit"}, {"oid": "2eebbadc037b953f2d0c9397a54d9a1ea343e74b", "url": "https://github.com/OpenLiberty/open-liberty/commit/2eebbadc037b953f2d0c9397a54d9a1ea343e74b", "message": "Emit warning when SPNEGO auth used for an XA-capable datasource and no recovery auth is defined", "committedDate": "2020-09-22T16:58:07Z", "type": "forcePushed"}]}