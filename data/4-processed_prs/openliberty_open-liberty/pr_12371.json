{"pr_number": 12371, "pr_title": "update Resteasy bundles to tolerate removed javax packages on java 8", "pr_createdAt": "2020-05-26T19:24:43Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12371", "timeline": [{"oid": "a0a1f2b4e4c45a65c35b058a8402a86711c48ac5", "url": "https://github.com/OpenLiberty/open-liberty/commit/a0a1f2b4e4c45a65c35b058a8402a86711c48ac5", "message": "update Resteasy bundles to tolerate removed javax packages on java 8", "committedDate": "2020-05-26T20:25:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MzAwOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12371#discussion_r430743009", "bodyText": "Should javax.annotation and maybe javax.annotation.security also be added?", "author": "jhanders34", "createdAt": "2020-05-26T22:30:38Z", "path": "dev/com.ibm.ws.org.jboss.resteasy.resteasy.core/bnd.bnd", "diffHunk": "@@ -37,7 +37,11 @@ Export-Package: \\\n   org.jboss.resteasy.util;version=4.5.2.Final, \\\n   org.jboss.resteasy.util.snapshot;version=4.5.2.Final\n \n+# Using version=! in order to not have a version attached to the import for packages that were removed\n+# from Java after Java 8.  Doing this keeps the import like before Java 11 support. It will get the\n+# packages from Java when using Java 8 or earlier and from the new shipped bundles for Java 9 and later.\n Import-Package: \\\n+  javax.activation;version=!, \\", "originalCommit": "a0a1f2b4e4c45a65c35b058a8402a86711c48ac5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc2ODYwOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12371#discussion_r430768608", "bodyText": "This bundle doesn't require it.\nDo I need to add them anyway \"just in case\"?", "author": "WhiteCat22", "createdAt": "2020-05-26T23:50:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MzAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc3ODY4OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12371#discussion_r430778688", "bodyText": "Why do you say it doesn't require it?  It is in the Imports in the manifest file when I look at it.", "author": "jhanders34", "createdAt": "2020-05-27T00:26:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MzAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDgwMjAyOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12371#discussion_r430802029", "bodyText": "When I start a server, the listed imports were the only issues. I resolved these and I started a server cleanly with Java 8. I suppose if it's in the manifest file I can add the ones you listed as well, but just starting a server isn't causing any issues with my proposed change.", "author": "WhiteCat22", "createdAt": "2020-05-27T01:26:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MzAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTA2MDgyMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12371#discussion_r431060823", "bodyText": "When processing annotations if they are not found, they are just ignored and do not produce an error, so you would not see an issue starting the server for missing annotation packages.", "author": "jhanders34", "createdAt": "2020-05-27T11:56:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MzAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI1MjI5NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12371#discussion_r431252294", "bodyText": "updated", "author": "WhiteCat22", "createdAt": "2020-05-27T15:54:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MzAwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MzEzNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12371#discussion_r430743136", "bodyText": "Shouldn't javax.annotation be added?", "author": "jhanders34", "createdAt": "2020-05-26T22:31:00Z", "path": "dev/com.ibm.ws.org.jboss.resteasy.resteasy.core.spi/bnd.bnd", "diffHunk": "@@ -28,7 +28,11 @@ Export-Package: \\\n   org.jboss.resteasy.spi.util;version=4.5.2.Final, \\\n   org.jboss.resteasy.spi.validation;version=4.5.2.Final\n \n+# Using version=! in order to not have a version attached to the import for packages that were removed\n+# from Java after Java 8.  Doing this keeps the import like before Java 11 support. It will get the\n+# packages from Java when using Java 8 or earlier and from the new shipped bundles for Java 9 and later.\n Import-Package: \\\n+  javax.xml.bind.annotation;version=!, \\", "originalCommit": "a0a1f2b4e4c45a65c35b058a8402a86711c48ac5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc2ODYyNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12371#discussion_r430768624", "bodyText": "Same as above", "author": "WhiteCat22", "createdAt": "2020-05-26T23:50:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MzEzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc3ODcyMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12371#discussion_r430778723", "bodyText": "Same as above", "author": "jhanders34", "createdAt": "2020-05-27T00:26:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc0MzEzNg=="}], "type": "inlineReview"}, {"oid": "e869c2803fe6467c79d8a07e151fc8aac8319468", "url": "https://github.com/OpenLiberty/open-liberty/commit/e869c2803fe6467c79d8a07e151fc8aac8319468", "message": "update Resteasy bundles to tolerate removed javax packages on java 8", "committedDate": "2020-05-27T15:54:13Z", "type": "commit"}, {"oid": "e869c2803fe6467c79d8a07e151fc8aac8319468", "url": "https://github.com/OpenLiberty/open-liberty/commit/e869c2803fe6467c79d8a07e151fc8aac8319468", "message": "update Resteasy bundles to tolerate removed javax packages on java 8", "committedDate": "2020-05-27T15:54:13Z", "type": "forcePushed"}]}