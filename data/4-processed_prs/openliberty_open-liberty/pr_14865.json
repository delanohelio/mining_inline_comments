{"pr_number": 14865, "pr_title": "Add eeCompatible features to private API features for EE", "pr_createdAt": "2020-11-06T16:36:52Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14865", "timeline": [{"oid": "104fa4effe8fdc291aa213026a4736f909f67552", "url": "https://github.com/OpenLiberty/open-liberty/commit/104fa4effe8fdc291aa213026a4736f909f67552", "message": "Add eeCompatible features to private API features for EE", "committedDate": "2020-11-06T16:41:07Z", "type": "forcePushed"}, {"oid": "270c8abe4de274202fbdf15e0035b5e0f7d244ef", "url": "https://github.com/OpenLiberty/open-liberty/commit/270c8abe4de274202fbdf15e0035b5e0f7d244ef", "message": "Add eeCompatible features to private API features for EE", "committedDate": "2020-11-09T14:45:58Z", "type": "forcePushed"}, {"oid": "c969f6a2aafc3c182c25202f11869a4b17d085f5", "url": "https://github.com/OpenLiberty/open-liberty/commit/c969f6a2aafc3c182c25202f11869a4b17d085f5", "message": "Remove MP Config private feature dependency\n\nInstead only pull in the bundle to avoid pulling in CDI API.", "committedDate": "2020-11-10T16:46:45Z", "type": "forcePushed"}, {"oid": "d8473efd8079656af8d20cf00a5492b433836dc5", "url": "https://github.com/OpenLiberty/open-liberty/commit/d8473efd8079656af8d20cf00a5492b433836dc5", "message": "Remove MP Config private feature dependency\n\nInstead only pull in the bundle to avoid pulling in CDI API.\nAlso make the import of CDI packages optional and dynamic", "committedDate": "2020-11-10T19:17:03Z", "type": "forcePushed"}, {"oid": "c5fb1dede4d8181fde62dc538340a2d046243a13", "url": "https://github.com/OpenLiberty/open-liberty/commit/c5fb1dede4d8181fde62dc538340a2d046243a13", "message": "Remove MP Config private feature dependency\n\nInstead only pull in the bundle to avoid pulling in CDI API.\nAlso make the import of CDI packages optional and dynamic", "committedDate": "2020-11-10T19:19:31Z", "type": "forcePushed"}, {"oid": "94fa69b78eb590723594ed74546036b448d28ab6", "url": "https://github.com/OpenLiberty/open-liberty/commit/94fa69b78eb590723594ed74546036b448d28ab6", "message": "Remove MP Config private feature dependency\n\nInstead only pull in the bundle to avoid pulling in CDI API.\nAlso make the import of CDI packages optional and dynamic", "committedDate": "2020-11-11T15:48:34Z", "type": "forcePushed"}, {"oid": "0901d8f16dee3f47339e6d7bf49e96f760bf165b", "url": "https://github.com/OpenLiberty/open-liberty/commit/0901d8f16dee3f47339e6d7bf49e96f760bf165b", "message": "Remove MP Config private feature dependency\n\nInstead only pull in the bundle to avoid pulling in CDI API.\nAlso make the import of CDI packages optional and dynamic", "committedDate": "2020-11-11T15:52:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ5NjM0Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r521496342", "bodyText": "Why do we add this package?", "author": "Emily-Jiang", "createdAt": "2020-11-11T16:51:22Z", "path": "dev/com.ibm.websphere.org.eclipse.microprofile/config.1.4.bnd", "diffHunk": "@@ -14,8 +14,10 @@ bVersion=1.0\n Bundle-SymbolicName: com.ibm.websphere.org.eclipse.microprofile.config.1.4; singleton:=true\n \n Import-Package: \\\n-  javax.enterprise.util; version=\"[1.1,3)\",\\\n+  javax.enterprise.util; version=\"[1.1,3)\"; resolution:=optional,\\\n+  javax.inject; version=\"[1.0,2)\"; resolution:=optional,\\", "originalCommit": "0901d8f16dee3f47339e6d7bf49e96f760bf165b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUwNjE1NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r521506155", "bodyText": "@tevans78 explained that it was in bnd import-package. I understood adding here is to add optional resolution.", "author": "Emily-Jiang", "createdAt": "2020-11-11T17:05:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTQ5NjM0Mg=="}], "type": "inlineReview"}, {"oid": "272be70f10a2289b8fe6c8b47d746e125c8a9e95", "url": "https://github.com/OpenLiberty/open-liberty/commit/272be70f10a2289b8fe6c8b47d746e125c8a9e95", "message": "Remove MP Config private feature dependency\n\nInstead only pull in the bundle to avoid pulling in CDI API.\nAlso make the import of CDI packages optional and dynamic", "committedDate": "2020-11-17T22:25:12Z", "type": "forcePushed"}, {"oid": "5a92829bfef62c59fa5308d2556bb3df8c87eb35", "url": "https://github.com/OpenLiberty/open-liberty/commit/5a92829bfef62c59fa5308d2556bb3df8c87eb35", "message": "Add eeCompatible features to private API features for EE", "committedDate": "2020-11-17T22:29:05Z", "type": "commit"}, {"oid": "f1b37ca04cc3fa6f05618848bfed810641fddc00", "url": "https://github.com/OpenLiberty/open-liberty/commit/f1b37ca04cc3fa6f05618848bfed810641fddc00", "message": "Remove MP Config private feature dependency\n\nInstead only pull in the bundle to avoid pulling in CDI API.\nAlso make the import of CDI packages optional and dynamic", "committedDate": "2020-11-17T22:29:05Z", "type": "commit"}, {"oid": "f1b37ca04cc3fa6f05618848bfed810641fddc00", "url": "https://github.com/OpenLiberty/open-liberty/commit/f1b37ca04cc3fa6f05618848bfed810641fddc00", "message": "Remove MP Config private feature dependency\n\nInstead only pull in the bundle to avoid pulling in CDI API.\nAlso make the import of CDI packages optional and dynamic", "committedDate": "2020-11-17T22:29:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM3NjMyNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526376324", "bodyText": "Should we make a activiation-1.1 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?", "author": "jhanders34", "createdAt": "2020-11-18T19:51:03Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.jakarta.activation-2.0.feature", "diffHunk": "@@ -7,8 +7,9 @@ IBM-Process-Types: client, server\n Subsystem-Name: Jakarta Activation 2.0\n IBM-API-Package: \\\n  jakarta.activation; type=\"spec\"\n+-features=com.ibm.websphere.appserver.eeCompatible-9.0", "originalCommit": "f1b37ca04cc3fa6f05618848bfed810641fddc00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3ODg1MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526478850", "bodyText": "Should we make a activiation-1.1 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?\n\nProbably.  I had assumed (incorrectly) that this was part of the Java SE.  But I forgot it is removed in Java 9+\nI think this can be done in a separate PR", "author": "tjwatson", "createdAt": "2020-11-18T22:57:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM3NjMyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA2NjA2NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r527066065", "bodyText": "Opened separate issue #15054", "author": "tjwatson", "createdAt": "2020-11-19T17:25:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM3NjMyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM4MjIwNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526382204", "bodyText": "Should we make a concurrent-1.0 or concurrency-1.0 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?", "author": "jhanders34", "createdAt": "2020-11-18T20:00:44Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.jakarta.concurrency-2.0.feature", "diffHunk": "@@ -2,6 +2,7 @@\n symbolicName=io.openliberty.jakarta.concurrency-2.0\n visibility=private\n singleton=true\n+-features=com.ibm.websphere.appserver.eeCompatible-9.0", "originalCommit": "f1b37ca04cc3fa6f05618848bfed810641fddc00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4MDg0OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526480849", "bodyText": "Should we make a concurrent-1.0 or concurrency-1.0 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?\n\nThat makes sense.  Should consider in another PR", "author": "tjwatson", "createdAt": "2020-11-18T23:01:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM4MjIwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ0NjczOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526446738", "bodyText": "Should we make a jaxb-2.2 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?", "author": "jhanders34", "createdAt": "2020-11-18T21:53:04Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.jakarta.jaxb-3.0.feature", "diffHunk": "@@ -9,7 +9,8 @@ IBM-Process-Types: client, \\\n Subsystem-Name: Jakarta XML Bindings 3.0\n -features=\\\n   com.ibm.websphere.appserver.classloading-1.0, \\\n-  io.openliberty.jakarta.activation-2.0\n+  io.openliberty.jakarta.activation-2.0, \\", "originalCommit": "f1b37ca04cc3fa6f05618848bfed810641fddc00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4MTkwMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526481903", "bodyText": "Should we make a jaxb-2.2 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?\n\nProbably, will create a new issue to gather up the requirements for these new private features.", "author": "tjwatson", "createdAt": "2020-11-18T23:04:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ0NjczOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ1MDQ0OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526450449", "bodyText": "Should com.ibm.websphere.appserver.internal.optional.jaxws-2.2 also be updated to have eeCompatible tolerates?  Would be good to update other features to use that feature possibly instead of pulling in the bundle unconditionally.  Can't remember if we wanted to pull it in unconditionally in some cases.  May want to have an API feature for the cases we want to pull it in unconditionally.", "author": "jhanders34", "createdAt": "2020-11-18T21:59:11Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.jakarta.jaxws-3.0.feature", "diffHunk": "@@ -1,7 +1,8 @@\n -include= ~${workspace}/cnf/resources/bnd/feature.props\n symbolicName=io.openliberty.jakarta.jaxws-3.0\n singleton=true\n--features=io.openliberty.jakarta.jaxb-3.0; apiJar=false\n+-features=io.openliberty.jakarta.jaxb-3.0; apiJar=false, \\", "originalCommit": "f1b37ca04cc3fa6f05618848bfed810641fddc00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4Mjc0MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526482741", "bodyText": "Should com.ibm.websphere.appserver.internal.optional.jaxws-2.2 also be updated to have eeCompatible tolerates? Would be good to update other features to use that feature possibly instead of pulling in the bundle unconditionally. Can't remember if we wanted to pull it in unconditionally in some cases. May want to have an API feature for the cases we want to pull it in unconditionally.\n\nProbably.  Another candidate for the separate issue.", "author": "tjwatson", "createdAt": "2020-11-18T23:06:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ1MDQ0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ1Mjc5NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526452795", "bodyText": "Should we make a jms-2.0 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?", "author": "jhanders34", "createdAt": "2020-11-18T22:03:20Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.jakarta.messaging-3.0.feature", "diffHunk": "@@ -2,6 +2,7 @@\n symbolicName=io.openliberty.jakarta.messaging-3.0\n singleton=true\n -bundles=io.openliberty.jakarta.messaging.3.0; location:=\"dev/api/spec/,lib/\"; mavenCoordinates=\"jakarta.jms:jakarta.jms-api:3.0.0\"\n+-features=com.ibm.websphere.appserver.eeCompatible-9.0", "originalCommit": "f1b37ca04cc3fa6f05618848bfed810641fddc00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4MzA0OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526483049", "bodyText": "Should we make a jms-2.0 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?\n\nProbably.  Will add to new issue to investigate.", "author": "tjwatson", "createdAt": "2020-11-18T23:07:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ1Mjc5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ1NTYzOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526455638", "bodyText": "Should we make a jaxrs-2.0 and 2.1 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?", "author": "jhanders34", "createdAt": "2020-11-18T22:08:50Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.jakarta.restfulWS-3.0.feature", "diffHunk": "@@ -8,7 +8,8 @@ IBM-Process-Types: client, \\\n  server\n Subsystem-Name: Jakarta RESTful Web Services 3.0\n -features=\\\n-  io.openliberty.jakarta.activation-2.0\n+  io.openliberty.jakarta.activation-2.0, \\", "originalCommit": "f1b37ca04cc3fa6f05618848bfed810641fddc00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ4MzI5Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526483292", "bodyText": "Should we make a jaxrs-2.0 and 2.1 API feature with eeCompatible in it and have features depend on it instead of pulling in the bundle directly?\n\nProbably, will add to the separate issue for private features.", "author": "tjwatson", "createdAt": "2020-11-18T23:08:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ1NTYzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2MDQ5OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526460498", "bodyText": "This is not from your change, but the maven coordinates seem wrong.", "author": "jhanders34", "createdAt": "2020-11-18T22:18:09Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/com.ibm.websphere.appserver.javax.annotation-1.1.feature", "diffHunk": "@@ -4,6 +4,7 @@ WLP-DisableAllFeatures-OnConflict: false\n singleton=true\n IBM-Process-Types: server, \\\n  client\n+-features=com.ibm.websphere.appserver.eeCompatible-6.0; ibm.tolerates:=\"7.0, 8.0\"\n -bundles=com.ibm.websphere.javaee.annotation.1.1; location:=\"dev/api/spec/,lib/\"; mavenCoordinates=\"javax.annotation:javax.annotation-api:1.2\"", "originalCommit": "f1b37ca04cc3fa6f05618848bfed810641fddc00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ3NTA0Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14865#discussion_r526475042", "bodyText": "This is not from your change, but the maven coordinates seem wrong.\n\nI agree, but don't plan to address in this PR", "author": "tjwatson", "createdAt": "2020-11-18T22:48:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2MDQ5OA=="}], "type": "inlineReview"}, {"oid": "01c429c76ef4ba231bc63b79daf51a5c08b2d959", "url": "https://github.com/OpenLiberty/open-liberty/commit/01c429c76ef4ba231bc63b79daf51a5c08b2d959", "message": "Add eeCompatible to private serlvet API features", "committedDate": "2020-11-18T23:17:14Z", "type": "commit"}]}