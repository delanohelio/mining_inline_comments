{"pr_number": 10386, "pr_title": "introspector for persistent executor", "pr_createdAt": "2020-01-10T22:05:19Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/10386", "timeline": [{"oid": "454fd1ff32a31930b976f6ad748fa81d36cba167", "url": "https://github.com/OpenLiberty/open-liberty/commit/454fd1ff32a31930b976f6ad748fa81d36cba167", "message": "Issue #8611 remove unused methods from DatabaseTaskStore", "committedDate": "2020-01-09T19:07:36Z", "type": "commit"}, {"oid": "b39a002895eb6104cb30dae315bd48f329b64c3f", "url": "https://github.com/OpenLiberty/open-liberty/commit/b39a002895eb6104cb30dae315bd48f329b64c3f", "message": "Issue #8611 add introspector for persistent executor", "committedDate": "2020-01-10T21:59:14Z", "type": "commit"}, {"oid": "e1e76e78e2e6ff1ef64620efcac234fa5fb3dd94", "url": "https://github.com/OpenLiberty/open-liberty/commit/e1e76e78e2e6ff1ef64620efcac234fa5fb3dd94", "message": "Issue #8611 initial test for persistent executor server dump output", "committedDate": "2020-01-10T22:03:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NDc5NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10386#discussion_r365454795", "bodyText": "Did you intend to leave System.out.println statements?", "author": "nmittles", "createdAt": "2020-01-10T22:25:22Z", "path": "dev/com.ibm.ws.concurrent.persistent/src/com/ibm/ws/concurrent/persistent/internal/PersistentExecutorIntrospector.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.concurrent.persistent.internal;\n+\n+import java.io.PrintWriter;\n+import java.security.AccessController;\n+\n+import org.osgi.framework.BundleContext;\n+import org.osgi.framework.FrameworkUtil;\n+import org.osgi.framework.ServiceReference;\n+import org.osgi.service.component.annotations.Component;\n+import org.osgi.service.component.annotations.ConfigurationPolicy;\n+\n+import com.ibm.websphere.concurrent.persistent.PersistentExecutor;\n+import com.ibm.websphere.ras.annotation.Trivial;\n+import com.ibm.ws.kernel.service.util.SecureAction;\n+import com.ibm.wsspi.logging.Introspector;\n+\n+/**\n+ * Introspector for persistent executors.\n+ */\n+@Component(configurationPolicy = ConfigurationPolicy.IGNORE)\n+public class PersistentExecutorIntrospector implements Introspector {\n+    @Override\n+    @Trivial\n+    public String getIntrospectorName() {\n+        System.out.println(\"getIntrospectorName\");", "originalCommit": "e1e76e78e2e6ff1ef64620efcac234fa5fb3dd94", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NjU5MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10386#discussion_r365456590", "bodyText": "good catch, those were just for debugging locally. I'll remove them.", "author": "njr-11", "createdAt": "2020-01-10T22:31:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NDc5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NDg3NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10386#discussion_r365454874", "bodyText": "Same question as above.", "author": "nmittles", "createdAt": "2020-01-10T22:25:40Z", "path": "dev/com.ibm.ws.concurrent.persistent/src/com/ibm/ws/concurrent/persistent/internal/PersistentExecutorIntrospector.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.concurrent.persistent.internal;\n+\n+import java.io.PrintWriter;\n+import java.security.AccessController;\n+\n+import org.osgi.framework.BundleContext;\n+import org.osgi.framework.FrameworkUtil;\n+import org.osgi.framework.ServiceReference;\n+import org.osgi.service.component.annotations.Component;\n+import org.osgi.service.component.annotations.ConfigurationPolicy;\n+\n+import com.ibm.websphere.concurrent.persistent.PersistentExecutor;\n+import com.ibm.websphere.ras.annotation.Trivial;\n+import com.ibm.ws.kernel.service.util.SecureAction;\n+import com.ibm.wsspi.logging.Introspector;\n+\n+/**\n+ * Introspector for persistent executors.\n+ */\n+@Component(configurationPolicy = ConfigurationPolicy.IGNORE)\n+public class PersistentExecutorIntrospector implements Introspector {\n+    @Override\n+    @Trivial\n+    public String getIntrospectorName() {\n+        System.out.println(\"getIntrospectorName\");\n+        return \"PersistentExecutorIntrospector\";\n+    }\n+\n+    @Override\n+    @Trivial\n+    public String getIntrospectorDescription() {\n+        System.out.println(\"getIntrospectorDescription\");\n+        return \"Persistent timers/tasks diagnostics\";\n+    }\n+\n+    @Override\n+    public void introspect(PrintWriter out) throws Exception {\n+        SecureAction priv = AccessController.doPrivileged(SecureAction.get());\n+        BundleContext bundleContext = priv.getBundleContext(FrameworkUtil.getBundle(getClass()));\n+\n+        for (ServiceReference<PersistentExecutor> ref : priv.getServiceReferences(bundleContext, PersistentExecutor.class, \"(!(com.ibm.wsspi.resource.ResourceFactory=true))\")) {\n+            System.out.println(\"Found service reference: \" + ref);", "originalCommit": "e1e76e78e2e6ff1ef64620efcac234fa5fb3dd94", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NjYxNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10386#discussion_r365456617", "bodyText": "good catch, those were just for debugging locally. I'll remove them.", "author": "njr-11", "createdAt": "2020-01-10T22:31:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1NDg3NA=="}], "type": "inlineReview"}, {"oid": "0bab90779e065b8e35bfb153a878fc37b6c262b1", "url": "https://github.com/OpenLiberty/open-liberty/commit/0bab90779e065b8e35bfb153a878fc37b6c262b1", "message": "Issue #8611 code review fixes", "committedDate": "2020-01-10T22:34:02Z", "type": "commit"}]}