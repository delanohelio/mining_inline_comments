{"pr_number": 15139, "pr_title": "Jakarta Batch 2.0 API and features", "pr_createdAt": "2020-12-01T01:38:28Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/15139", "timeline": [{"oid": "78ab0629891ac738e7d0bb8ef7386bc54dafddd4", "url": "https://github.com/OpenLiberty/open-liberty/commit/78ab0629891ac738e7d0bb8ef7386bc54dafddd4", "message": "Batch 2.0, batchManagement 2.0, and related features", "committedDate": "2020-12-01T03:33:00Z", "type": "forcePushed"}, {"oid": "c1daa97ef92ee4e021f19b4047c2b2a2366db41f", "url": "https://github.com/OpenLiberty/open-liberty/commit/c1daa97ef92ee4e021f19b4047c2b2a2366db41f", "message": "Batch 2.0, batchManagement 2.0, and related features", "committedDate": "2020-12-01T03:42:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU0MTA3Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533541076", "bodyText": "Please add a feature dependency for eeCompatible-9.0.  This is required in all public jakarta features so that WDT can quickly identify jakarta ee9 features.", "author": "dazavala", "createdAt": "2020-12-01T16:18:06Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batchManagement-2.0/io.openliberty.batchManagement-2.0.feature", "diffHunk": "@@ -0,0 +1,30 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batchManagement-2.0\n+singleton=true\n+visibility=public\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-API-Package: jakarta.batch.api; type=\"spec\", \\\n+ jakarta.batch.api.chunk; type=\"spec\", \\\n+ jakarta.batch.api.chunk.listener; type=\"spec\", \\\n+ jakarta.batch.api.listener; type=\"spec\", \\\n+ jakarta.batch.api.partition; type=\"spec\", \\\n+ jakarta.batch.operations; type=\"spec\", \\\n+ jakarta.batch.runtime; type=\"spec\", \\\n+ jakarta.batch.runtime.context; type=\"spec\"\n+IBM-ShortName: batchManagement-2.0\n+Subsystem-Name: Batch Management 2.0\n+-features=com.ibm.websphere.appserver.servlet-5.0, \\\n+  io.openliberty.batch-2.0, \\\n+  com.ibm.websphere.appserver.restHandler-1.0, \\\n+  com.ibm.websphere.appserver.jdbc-4.2; ibm.tolerates:=\"4.3, 4.1\", \\\n+  io.openliberty.jsonp-2.0, \\\n+  com.ibm.websphere.appserver.transaction-2.0", "originalCommit": "c1daa97ef92ee4e021f19b4047c2b2a2366db41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU0MzQxMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533543412", "bodyText": "Copyright statements in new feature sources should indicate 2020, only.  Please review the change set and revise the copyrights dates where appropriate.", "author": "dazavala", "createdAt": "2020-12-01T16:21:08Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batch-2.0/resources/l10n/io.openliberty.batch-2.0_cs.properties", "diffHunk": "@@ -0,0 +1,17 @@\n+###############################################################################", "originalCommit": "c1daa97ef92ee4e021f19b4047c2b2a2366db41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU0NzA3Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533547072", "bodyText": "I suspect the file name \"ManifestBuilder (3).launch\" is a mistake.  If so, please re-add the file with the correct name.", "author": "dazavala", "createdAt": "2020-12-01T16:25:56Z", "path": "dev/io.openliberty.jakarta.batch.2.0/.externalToolBuilders/org.eclipse.pde.ManifestBuilder (3).launch", "diffHunk": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?><launchConfiguration type=\"org.eclipse.ant.AntBuilderLaunchConfigurationType\">", "originalCommit": "c1daa97ef92ee4e021f19b4047c2b2a2366db41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU0NzgyNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533547825", "bodyText": "Change CR date to 2020.  I noticed at least two instances.  Please review the commit and the ensure CR dates in new sources is 2020.", "author": "dazavala", "createdAt": "2020-12-01T16:26:55Z", "path": "dev/io.openliberty.jakarta.batch.2.0/bnd.bnd", "diffHunk": "@@ -0,0 +1,47 @@\n+#*******************************************************************************", "originalCommit": "c1daa97ef92ee4e021f19b4047c2b2a2366db41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU1NDYwOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533554609", "bodyText": "CR dates!", "author": "dazavala", "createdAt": "2020-12-01T16:36:10Z", "path": "dev/io.openliberty.jakarta.batch.2.0/resources/com/ibm/jbatch/jakarta/batch/runtime/internal/resources/BatchMessages.nlsprops", "diffHunk": "@@ -0,0 +1,37 @@\n+###############################################################################", "originalCommit": "c1daa97ef92ee4e021f19b4047c2b2a2366db41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU4OTU2NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533589565", "bodyText": "Your original feature descriptor included feature io.openliberty.jakarta.jaxb-3.0.  Did you intend to change the included jaxb-3.0 feature?  I'm not sure this discrepancy is related to the MinJavaLevelTest failure, because I could not find jaxb-3.0 in the feature.java.levels.properties files.  These files seed the MinJavaLevelTest.  If you inadvertently changed the included feature, make the change and let's examine the next build.  Then either we fix the feature resolution error or we modify the test regarding batch-2.0.", "author": "dazavala", "createdAt": "2020-12-01T17:24:45Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batch-2.0/io.openliberty.batch-2.0.feature", "diffHunk": "@@ -0,0 +1,40 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batch-2.0\n+singleton=true\n+visibility=public\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-API-Package: \\\n+  jakarta.batch.api; type=\"spec\", \\\n+  jakarta.batch.api.chunk; type=\"spec\", \\\n+  jakarta.batch.api.chunk.listener; type=\"spec\", \\\n+  jakarta.batch.api.listener; type=\"spec\", \\\n+  jakarta.batch.api.partition; type=\"spec\", \\\n+  jakarta.batch.operations; type=\"spec\", \\\n+  jakarta.batch.runtime; type=\"spec\", \\\n+  jakarta.batch.runtime.context; type=\"spec\", \\\n+  jakarta.inject;  type=\"spec\"\n+IBM-ShortName: batch-2.0\n+Subsystem-Name: Jakarta Batch API 2.0\n+-features=\\\n+  io.openliberty.jaxb-3.0, \\", "originalCommit": "c1daa97ef92ee4e021f19b4047c2b2a2366db41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU5MzcyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533593721", "bodyText": "Reminder: CR date for new API sources is 2020.", "author": "dazavala", "createdAt": "2020-12-01T17:30:55Z", "path": "dev/io.openliberty.jakarta.batch.2.0/src/jakarta/batch/api/AbstractBatchlet.java", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright 2012, 2020 International Business Machines Corp.", "originalCommit": "c1daa97ef92ee4e021f19b4047c2b2a2366db41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1MzM5MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533853390", "bodyText": "If you were trying to do this auto feature like the previous one you would look at io.openliberty.messaging-3.0.internal instead of messagingClient and messagingServer.", "author": "jhanders34", "createdAt": "2020-12-02T02:26:32Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.batchManagement2.0-messaging3.0.feature", "diffHunk": "@@ -0,0 +1,13 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batchManagement2.0-messaging3.0\n+visibility=private\n+IBM-Provision-Capability: \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(|(osgi.identity=io.openliberty.messagingClient-3.0)(osgi.identity=io.openliberty.messagingServer-3.0)))\", \\", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1MzU4Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533853583", "bodyText": "You should not be bring in messaging-3.0 I don't think.  You indicate you only need client or server, but not only server.", "author": "jhanders34", "createdAt": "2020-12-02T02:27:12Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.batchManagement2.0-messaging3.0.feature", "diffHunk": "@@ -0,0 +1,13 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batchManagement2.0-messaging3.0\n+visibility=private\n+IBM-Provision-Capability: \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(|(osgi.identity=io.openliberty.messagingClient-3.0)(osgi.identity=io.openliberty.messagingServer-3.0)))\", \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.batchManagement-2.0))\"\n+-features=com.ibm.websphere.appserver.transaction-2.0,\\\n+ io.openliberty.messaging-3.0,\\", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1NDY1MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533854650", "bodyText": "The previous auto feature is weird and should be updated as well.  It shouldn't include feature com.ibm.websphere.appserver.internal.jms-2.0 in the -features section.  Since as the auto feature that is what it is depending on being enabled already.", "author": "jhanders34", "createdAt": "2020-12-02T02:30:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1MzU4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMyMjE3OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r534322179", "bodyText": "The same holds for transaction-2.0, which is included by batchManagement-2.0.", "author": "dazavala", "createdAt": "2020-12-02T16:50:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1MzU4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1NTIyMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533855220", "bodyText": "kind=noship should be in edition full.", "author": "jhanders34", "createdAt": "2020-12-02T02:32:27Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.batchManagement2.0-messaging3.0.feature", "diffHunk": "@@ -0,0 +1,13 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batchManagement2.0-messaging3.0\n+visibility=private\n+IBM-Provision-Capability: \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(|(osgi.identity=io.openliberty.messagingClient-3.0)(osgi.identity=io.openliberty.messagingServer-3.0)))\", \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.batchManagement-2.0))\"\n+-features=com.ibm.websphere.appserver.transaction-2.0,\\\n+ io.openliberty.messaging-3.0,\\\n+ io.openliberty.mdb-4.0\n+-bundles=com.ibm.ws.jbatch.jms.jakarta\n+IBM-Install-Policy: when-satisfied\n+kind=noship\n+edition=base", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1NTgyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533855821", "bodyText": "Unless you see a reason not to you should add:\nWLP-Activation-Type: parallel", "author": "jhanders34", "createdAt": "2020-12-02T02:34:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1NTIyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1NTU4NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533855584", "bodyText": "kind=noship should be in edition full.", "author": "jhanders34", "createdAt": "2020-12-02T02:33:40Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.batchSecurity-2.0.feature", "diffHunk": "@@ -0,0 +1,13 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batchSecurity-2.0\n+visibility=private\n+IBM-App-ForceRestart: install, \\\n+ uninstall\n+IBM-Provision-Capability: osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.appSecurity-4.0))\", \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.batch-2.0))\"\n+-features=com.ibm.websphere.appserver.servlet-5.0, \\\n+ com.ibm.wsspi.appserver.webBundleSecurity-1.0\n+-bundles=com.ibm.ws.jbatch.security.jakarta\n+IBM-Install-Policy: when-satisfied\n+kind=noship\n+edition=base", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1NTg4Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533855886", "bodyText": "Unless you see a reason not to you should add:\nWLP-Activation-Type: parallel", "author": "jhanders34", "createdAt": "2020-12-02T02:34:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1NTU4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1Njg1Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533856856", "bodyText": "kind=noship should be in edition full.\nUnless you see a reason not to you should add:\nWLP-Activation-Type: parallel", "author": "jhanders34", "createdAt": "2020-12-02T02:38:08Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.cdi3.0-batch2.0.feature", "diffHunk": "@@ -0,0 +1,11 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.cdi3.0-batch2.0\n+visibility=private\n+IBM-App-ForceRestart: install, \\\n+ uninstall\n+IBM-Provision-Capability: osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.cdi-3.0))\", \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.batch-2.0))\"\n+-bundles=com.ibm.ws.jbatch.cdi.jakarta\n+IBM-Install-Policy: when-satisfied\n+kind=noship\n+edition=base", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1ODM5Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533858397", "bodyText": "You are going to need to rebase.  This feature has been renamed.  It is io.openliberty.jakarta.xmlBinding-3.0 now.", "author": "jhanders34", "createdAt": "2020-12-02T02:43:03Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batch-2.0/io.openliberty.batch-2.0.feature", "diffHunk": "@@ -0,0 +1,40 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batch-2.0\n+singleton=true\n+visibility=public\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-API-Package: \\\n+  jakarta.batch.api; type=\"spec\", \\\n+  jakarta.batch.api.chunk; type=\"spec\", \\\n+  jakarta.batch.api.chunk.listener; type=\"spec\", \\\n+  jakarta.batch.api.listener; type=\"spec\", \\\n+  jakarta.batch.api.partition; type=\"spec\", \\\n+  jakarta.batch.operations; type=\"spec\", \\\n+  jakarta.batch.runtime; type=\"spec\", \\\n+  jakarta.batch.runtime.context; type=\"spec\", \\\n+  jakarta.inject;  type=\"spec\"\n+IBM-ShortName: batch-2.0\n+Subsystem-Name: Jakarta Batch API 2.0\n+-features=\\\n+  io.openliberty.jakarta.jaxb-3.0, \\", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg1OTkzMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533859931", "bodyText": "This should be jdbc-4.2 tolerates 4.3 I believe.  Jakarta 9 I don't believe will have jdbc-4.1 since the minimum JDK is Java 8 for Jakarta 9.  All other jakarta 9 features only have 4.2 tolerate 4.3.", "author": "jhanders34", "createdAt": "2020-12-02T02:48:03Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batch-2.0/io.openliberty.batch-2.0.feature", "diffHunk": "@@ -0,0 +1,40 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batch-2.0\n+singleton=true\n+visibility=public\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-API-Package: \\\n+  jakarta.batch.api; type=\"spec\", \\\n+  jakarta.batch.api.chunk; type=\"spec\", \\\n+  jakarta.batch.api.chunk.listener; type=\"spec\", \\\n+  jakarta.batch.api.listener; type=\"spec\", \\\n+  jakarta.batch.api.partition; type=\"spec\", \\\n+  jakarta.batch.operations; type=\"spec\", \\\n+  jakarta.batch.runtime; type=\"spec\", \\\n+  jakarta.batch.runtime.context; type=\"spec\", \\\n+  jakarta.inject;  type=\"spec\"\n+IBM-ShortName: batch-2.0\n+Subsystem-Name: Jakarta Batch API 2.0\n+-features=\\\n+  io.openliberty.jakarta.jaxb-3.0, \\\n+  io.openliberty.jakarta.cdi-3.0,\\\n+  com.ibm.websphere.appserver.jndi-1.0, \\\n+  com.ibm.websphere.appserver.servlet-5.0, \\\n+  io.openliberty.jakarta.annotation-2.0, \\\n+  io.openliberty.persistence-3.0, \\\n+  io.openliberty.persistenceService-2.0, \\\n+  com.ibm.websphere.appserver.contextService-1.0, \\\n+  com.ibm.websphere.appserver.jdbc-4.2; ibm.tolerates:=\"4.3, 4.1\", \\", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2MDQyNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533860425", "bodyText": "kind=noship should be in edition full.", "author": "jhanders34", "createdAt": "2020-12-02T02:49:22Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batch-2.0/io.openliberty.batch-2.0.feature", "diffHunk": "@@ -0,0 +1,40 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batch-2.0\n+singleton=true\n+visibility=public\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-API-Package: \\\n+  jakarta.batch.api; type=\"spec\", \\\n+  jakarta.batch.api.chunk; type=\"spec\", \\\n+  jakarta.batch.api.chunk.listener; type=\"spec\", \\\n+  jakarta.batch.api.listener; type=\"spec\", \\\n+  jakarta.batch.api.partition; type=\"spec\", \\\n+  jakarta.batch.operations; type=\"spec\", \\\n+  jakarta.batch.runtime; type=\"spec\", \\\n+  jakarta.batch.runtime.context; type=\"spec\", \\\n+  jakarta.inject;  type=\"spec\"\n+IBM-ShortName: batch-2.0\n+Subsystem-Name: Jakarta Batch API 2.0\n+-features=\\\n+  io.openliberty.jakarta.jaxb-3.0, \\\n+  io.openliberty.jakarta.cdi-3.0,\\\n+  com.ibm.websphere.appserver.jndi-1.0, \\\n+  com.ibm.websphere.appserver.servlet-5.0, \\\n+  io.openliberty.jakarta.annotation-2.0, \\\n+  io.openliberty.persistence-3.0, \\\n+  io.openliberty.persistenceService-2.0, \\\n+  com.ibm.websphere.appserver.contextService-1.0, \\\n+  com.ibm.websphere.appserver.jdbc-4.2; ibm.tolerates:=\"4.3, 4.1\", \\\n+  com.ibm.websphere.appserver.transaction-2.0, \\\n+  com.ibm.websphere.appserver.eeCompatible-9.0\n+-bundles=\\\n+  com.ibm.jbatch.spi, \\\n+  com.ibm.ws.security.credentials, \\\n+  com.ibm.websphere.security, \\\n+  com.ibm.jbatch.container.jakarta, \\\n+  io.openliberty.jakarta.batch-2.0; location:=\"dev/api/spec/,lib/\"; mavenCoordinates=\"jakarta.batch:jakarta.batch-api:2.0.0\"\n+  \n+kind=noship\n+edition=base", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2MTY1MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533861651", "bodyText": "This should just be jdbc 4.2 tolerate 4.3", "author": "jhanders34", "createdAt": "2020-12-02T02:53:23Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batchManagement-2.0/io.openliberty.batchManagement-2.0.feature", "diffHunk": "@@ -0,0 +1,31 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batchManagement-2.0\n+singleton=true\n+visibility=public\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-API-Package: jakarta.batch.api; type=\"spec\", \\\n+ jakarta.batch.api.chunk; type=\"spec\", \\\n+ jakarta.batch.api.chunk.listener; type=\"spec\", \\\n+ jakarta.batch.api.listener; type=\"spec\", \\\n+ jakarta.batch.api.partition; type=\"spec\", \\\n+ jakarta.batch.operations; type=\"spec\", \\\n+ jakarta.batch.runtime; type=\"spec\", \\\n+ jakarta.batch.runtime.context; type=\"spec\"\n+IBM-ShortName: batchManagement-2.0\n+Subsystem-Name: Batch Management 2.0\n+-features=com.ibm.websphere.appserver.servlet-5.0, \\\n+  io.openliberty.batch-2.0, \\\n+  com.ibm.websphere.appserver.restHandler-1.0, \\\n+  com.ibm.websphere.appserver.jdbc-4.2; ibm.tolerates:=\"4.3, 4.1\", \\", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2MjI0Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533862246", "bodyText": "kind=noship should be in edition full.\nUnless you see a reason not to you should add:\nWLP-Activation-Type: parallel", "author": "jhanders34", "createdAt": "2020-12-02T02:55:15Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batchManagement-2.0/io.openliberty.batchManagement-2.0.feature", "diffHunk": "@@ -0,0 +1,31 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batchManagement-2.0\n+singleton=true\n+visibility=public\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-API-Package: jakarta.batch.api; type=\"spec\", \\\n+ jakarta.batch.api.chunk; type=\"spec\", \\\n+ jakarta.batch.api.chunk.listener; type=\"spec\", \\\n+ jakarta.batch.api.listener; type=\"spec\", \\\n+ jakarta.batch.api.partition; type=\"spec\", \\\n+ jakarta.batch.operations; type=\"spec\", \\\n+ jakarta.batch.runtime; type=\"spec\", \\\n+ jakarta.batch.runtime.context; type=\"spec\"\n+IBM-ShortName: batchManagement-2.0\n+Subsystem-Name: Batch Management 2.0\n+-features=com.ibm.websphere.appserver.servlet-5.0, \\\n+  io.openliberty.batch-2.0, \\\n+  com.ibm.websphere.appserver.restHandler-1.0, \\\n+  com.ibm.websphere.appserver.jdbc-4.2; ibm.tolerates:=\"4.3, 4.1\", \\\n+  io.openliberty.jsonp-2.0, \\\n+  com.ibm.websphere.appserver.transaction-2.0, \\\n+  com.ibm.websphere.appserver.eeCompatible-9.0\n+-bundles=com.ibm.ws.jbatch.joblog.jakarta, \\\n+  com.ibm.ws.jbatch.rest.jakarta\n+-jars=com.ibm.ws.jbatch.utility\n+-files=bin/batchManager.bat, \\\n+ bin/batchManager; ibm.file.encoding:=ebcdic, \\\n+ bin/tools/ws-jbatchutil.jar\n+kind=noship\n+edition=base", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2MzEwMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533863103", "bodyText": "Ideally you would add feature dependency on eeCompatible-7.0 tolerate 8.0.", "author": "jhanders34", "createdAt": "2020-12-02T02:58:05Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batchManagement-1.0/com.ibm.websphere.appserver.batchManagement-1.0.feature", "diffHunk": "@@ -1,6 +1,7 @@\n -include= ~${workspace}/cnf/resources/bnd/feature.props\n symbolicName=com.ibm.websphere.appserver.batchManagement-1.0\n WLP-DisableAllFeatures-OnConflict: false\n+singleton:true\n visibility=public", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDUxNTYyOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r534515629", "bodyText": "You decided not to do this change?", "author": "jhanders34", "createdAt": "2020-12-02T22:10:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2MzEwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2NTQxOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533865419", "bodyText": "This probably should say 2.0 instead of 1.0", "author": "jhanders34", "createdAt": "2020-12-02T03:05:21Z", "path": "dev/io.openliberty.jakarta.batch.2.0/resources/com/ibm/jbatch/jakarta/batch/runtime/internal/resources/BatchMessages.nlsprops", "diffHunk": "@@ -0,0 +1,37 @@\n+###############################################################################\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+###############################################################################\n+# # {0} description of each insert field\n+# MSG_DESCRIPTIVE_NAME_CWSJX0000=CWSJX0000I: This is a message with inserts {0}\n+# MSG_DESCRIPTIVE_NAME_CWSJX0000.explanation=Explanation text for the message\n+# MSG_DESCRIPTIVE_NAME_CWSJX0000.useraction=User action text for the message\n+#\n+#CMVCPATHNAME jakarta.batch-1.0/resources/com/ibm/jbatch/jakarta/batch/runtime/internal/resources/BatchMessages.nlsprops", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2NjgxOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533866818", "bodyText": "Is this accurate?  I don't have group jakarta.inject with artifact jakarta.inject version 2 in maven.  Should it be group jakarta.inject with artifact jakarta.inject-api with a version of 2.0.0?", "author": "jhanders34", "createdAt": "2020-12-02T03:09:55Z", "path": "dev/io.openliberty.jakarta.batch.2.0/pom.xml", "diffHunk": "@@ -0,0 +1,134 @@\n+<!--\n+    Copyright (c) 2020 IBM Corporation and others.\n+    All rights reserved. This program and the accompanying materials\n+    are made available under the terms of the Eclipse Public License v1.0\n+    which accompanies this distribution, and is available at\n+    http://www.eclipse.org/legal/epl-v10.html\n+   \n+    Contributors:\n+        IBM Corporation - initial API and implementation\n+ -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+    <parent>\n+        <groupId>jakarta.batch</groupId>\n+        <artifactId>jbatch</artifactId>\n+        <version>2.0</version>\n+    </parent>\n+    <groupId>jakarta.batch</groupId>\n+    <artifactId>jakarta.batch-api</artifactId>\n+    <packaging>jar</packaging>\n+    <version>2.0.0</version>\n+    \n+    <properties>\n+    \t<non.final>false</non.final>\n+    \t<extension.name>jakarta.batch</extension.name>\n+    \t<spec.version>2.0.0</spec.version>\n+    </properties>\n+\n+\t<dependencies>\n+\t\t<dependency>\n+\t\t\t<groupId>jakarta.inject</groupId>", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2NzQzOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533867438", "bodyText": "Not required, but many teams switched their nls files to io.openliberty for new files.", "author": "jhanders34", "createdAt": "2020-12-02T03:12:02Z", "path": "dev/io.openliberty.jakarta.batch.2.0/bnd.bnd", "diffHunk": "@@ -0,0 +1,47 @@\n+#*******************************************************************************\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+#*******************************************************************************\n+-include= ~../cnf/resources/bnd/bundle.props\n+bVersion=1.0\n+\n+Bundle-Name: Java Batch 2.0 API\n+Bundle-SymbolicName: io.openliberty.jakarta.batch-2.0; singleton:=true\n+Bundle-Description: jakarta.batch 2.0 API (Reference Implementation)\n+\n+WS-TraceGroup: wsbatch\n+\n+Private-Package: \\\n+    com.ibm.jbatch.jakarta.batch.runtime.internal.*", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg2OTM0MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533869340", "bodyText": "Why is the entire set of API source file included in open liberty github instead of just the one or ones that need to be updated for open liberty?  This is an unusual way of building the API bundle.  If most classes are unchanged from the published API jar in maven, we should be able to only update the classes that need updating instead of all of them.  See io.openliberty.jakarta.ejb.4.0 for instance where we just update the one single class that needs to be different than what is published in maven central.  if you need help getting this working let me know.", "author": "jhanders34", "createdAt": "2020-12-02T03:18:58Z", "path": "dev/io.openliberty.jakarta.batch.2.0/bnd.bnd", "diffHunk": "@@ -0,0 +1,47 @@\n+#*******************************************************************************\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+#*******************************************************************************\n+-include= ~../cnf/resources/bnd/bundle.props\n+bVersion=1.0\n+\n+Bundle-Name: Java Batch 2.0 API\n+Bundle-SymbolicName: io.openliberty.jakarta.batch-2.0; singleton:=true\n+Bundle-Description: jakarta.batch 2.0 API (Reference Implementation)\n+", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg3MDYyNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533870626", "bodyText": "It should be jakarta after the equals sign, not javax", "author": "jhanders34", "createdAt": "2020-12-02T03:23:09Z", "path": "dev/wlp-jakartaee-transform/rules/jakarta-direct.properties", "diffHunk": "@@ -71,4 +71,16 @@ javax.faces.validator.beanValidator.ValidatorFactory=jakarta.faces.validator.bea\n /javax/servlet/resources/datatypes.dtd=/jakarta/servlet/resources/datatypes.dtd\n /javax/servlet/resources/j2ee_1_4.xsd=/jakarta/servlet/resources/j2ee_1_4.xsd\n /javax/servlet/resources/j2ee_web_services_client_1_1.xsd=/jakarta/servlet/resources/j2ee_web_services_client_1_1.xsd\n-/javax/servlet/resources/xml.xsd=/jakarta/servlet/resources/xml.xsd\n\\ No newline at end of file\n+/javax/servlet/resources/xml.xsd=/jakarta/servlet/resources/xml.xsd\n+\n+# Batch \n+# CDI types\n+javax.batch.api.BatchProperty=jakarta.batch.api.BatchProperty\n+javax.batch.runtime.context.JobContext=jakarta.batch.runtime.context.JobContext\n+javax.batch.runtime.context.StepContext=javax.batch.runtime.context.StepContext", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg3NDc0Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r533874743", "bodyText": "batch-2.0 brings in servlet-5.0 already.  Shouldn't need to bring it in as well.", "author": "jhanders34", "createdAt": "2020-12-02T03:36:30Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.batchSecurity-2.0.feature", "diffHunk": "@@ -0,0 +1,13 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.batchSecurity-2.0\n+visibility=private\n+IBM-App-ForceRestart: install, \\\n+ uninstall\n+IBM-Provision-Capability: osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.appSecurity-4.0))\", \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.batch-2.0))\"\n+-features=com.ibm.websphere.appserver.servlet-5.0, \\", "originalCommit": "7a4b79a2c3ee9606934ab0becfa5a303b3f219ed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMyNTU3Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r534325572", "bodyText": "Similar to the comment above, the previous auto feature (...batchSecurity-1.0) includes servlet-3.1(4.0), where batch-1.0 already includes servlet-3.1(4.0).  Begs the question whether to change the previous auto feature now.", "author": "dazavala", "createdAt": "2020-12-02T16:54:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg3NDc0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM1NjEyNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r534356126", "bodyText": "I didn't want to mess with the tolerates one in batch 1.0 because of the non transitive nature of tolerates.", "author": "jhanders34", "createdAt": "2020-12-02T17:37:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg3NDc0Mw=="}], "type": "inlineReview"}, {"oid": "fd60edb141f35d3765e94a38b7ac0a9526add1ac", "url": "https://github.com/OpenLiberty/open-liberty/commit/fd60edb141f35d3765e94a38b7ac0a9526add1ac", "message": "Code review changes from Jared", "committedDate": "2020-12-02T21:47:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTIwNDc3NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r535204774", "bodyText": "You need to put servlet-5.0 back here again because webBundleSecurity will need it to resolve correctly.", "author": "jhanders34", "createdAt": "2020-12-03T12:56:08Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.batchSecurity-2.0.feature", "diffHunk": "@@ -5,9 +5,9 @@ IBM-App-ForceRestart: install, \\\n  uninstall\n IBM-Provision-Capability: osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.appSecurity-4.0))\", \\\n  osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.batch-2.0))\"\n--features=com.ibm.websphere.appserver.servlet-5.0, \\\n- com.ibm.wsspi.appserver.webBundleSecurity-1.0\n+-features=com.ibm.wsspi.appserver.webBundleSecurity-1.0", "originalCommit": "fd60edb141f35d3765e94a38b7ac0a9526add1ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTIwNTMzNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15139#discussion_r535205337", "bodyText": "You will need to put servlet-5.0 back in here for resthandler to resolve correctly.", "author": "jhanders34", "createdAt": "2020-12-03T12:57:02Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/batchManagement-2.0/io.openliberty.batchManagement-2.0.feature", "diffHunk": "@@ -14,10 +14,9 @@ IBM-API-Package: jakarta.batch.api; type=\"spec\", \\\n  jakarta.batch.runtime.context; type=\"spec\"\n IBM-ShortName: batchManagement-2.0\n Subsystem-Name: Batch Management 2.0\n--features=com.ibm.websphere.appserver.servlet-5.0, \\\n-  io.openliberty.batch-2.0, \\\n+-features=io.openliberty.batch-2.0, \\", "originalCommit": "fd60edb141f35d3765e94a38b7ac0a9526add1ac", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "30c05cb7e17caf71727dbdc09c5fe3c0936ce259", "url": "https://github.com/OpenLiberty/open-liberty/commit/30c05cb7e17caf71727dbdc09c5fe3c0936ce259", "message": "Jakarta Batch 2.0 API", "committedDate": "2020-12-03T18:12:55Z", "type": "commit"}, {"oid": "cbeefeac70c16ec6990c7bba9375acba153baa6d", "url": "https://github.com/OpenLiberty/open-liberty/commit/cbeefeac70c16ec6990c7bba9375acba153baa6d", "message": "Batch 2.0, batchManagement 2.0, and related features", "committedDate": "2020-12-03T18:12:55Z", "type": "commit"}, {"oid": "4af60fcfed1f527938ea31f8796bdbcad183ba26", "url": "https://github.com/OpenLiberty/open-liberty/commit/4af60fcfed1f527938ea31f8796bdbcad183ba26", "message": "Code review changes from Dave Z", "committedDate": "2020-12-03T18:12:56Z", "type": "commit"}, {"oid": "e5525c2cd2c29a1473ca23c951d711d63f3ef264", "url": "https://github.com/OpenLiberty/open-liberty/commit/e5525c2cd2c29a1473ca23c951d711d63f3ef264", "message": "Code review changes from Jared", "committedDate": "2020-12-03T18:15:26Z", "type": "commit"}, {"oid": "d0e564266f031386cab528aa316151ac9ff26acf", "url": "https://github.com/OpenLiberty/open-liberty/commit/d0e564266f031386cab528aa316151ac9ff26acf", "message": "Additional 1.0 feature cleanup", "committedDate": "2020-12-03T18:15:27Z", "type": "commit"}, {"oid": "dac97347679ced2dbafa4bc06d03489dfc37e03d", "url": "https://github.com/OpenLiberty/open-liberty/commit/dac97347679ced2dbafa4bc06d03489dfc37e03d", "message": "Resolve feature loading errors", "committedDate": "2020-12-03T18:15:27Z", "type": "commit"}, {"oid": "dac97347679ced2dbafa4bc06d03489dfc37e03d", "url": "https://github.com/OpenLiberty/open-liberty/commit/dac97347679ced2dbafa4bc06d03489dfc37e03d", "message": "Resolve feature loading errors", "committedDate": "2020-12-03T18:15:27Z", "type": "forcePushed"}]}