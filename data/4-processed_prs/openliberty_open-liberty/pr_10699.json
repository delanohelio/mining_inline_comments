{"pr_number": 10699, "pr_title": "Fixing XA Recovery issue with Postgres and optimized creating table", "pr_createdAt": "2020-02-03T16:17:22Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/10699", "timeline": [{"oid": "022c28873c33987cb10384fea4c938d6f10e5e08", "url": "https://github.com/OpenLiberty/open-liberty/commit/022c28873c33987cb10384fea4c938d6f10e5e08", "message": "Fixing postgres issue during XA recovery", "committedDate": "2020-02-04T17:58:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDkzMjk1MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10699#discussion_r374932951", "bodyText": "What was behind moving derbyAuth1 from the datasource in server.xml to the resource reference in ibm-web-bnd.xml?  Is that part of the move to creating the table during init?", "author": "gjwatts", "createdAt": "2020-02-04T21:28:38Z", "path": "dev/com.ibm.ws.jdbc_fat/test-applications/basicfat/resources/WEB-INF/ibm-web-bnd.xml", "diffHunk": "@@ -5,6 +5,10 @@\n   <resource-ref name=\"jdbc/dsfat3\" binding-name=\"jdbc/dsfat3\">\n     <authentication-alias name=\"auth1\"/>\n   </resource-ref>\n+  \n+  <resource-ref name=\"jdbc/dsfat5ref1\" binding-name=\"jdbc/dsfat5\">\n+    <authentication-alias name=\"derbyAuth1\"/>\n+  </resource-ref>\n ", "originalCommit": "022c28873c33987cb10384fea4c938d6f10e5e08", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI5OTYwMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10699#discussion_r375299601", "bodyText": "So the reason I did this was so that I could use dsfat5 in the testConfigChangeAuthData test instead of dsfat6.  The main difference between the two, and why I wanted to change, was that dsfat6 uses connection pooling while dsfat5 does not.  Our continuous tests were experiencing an intermittent failure where the server was attempting to shutdown the connection pool just as dsfat6 was trying to get a connection for this test.  Since this test has nothing to do with connection pooling, I figured we could avoid this intermittent failure by using a datasource that does not use connection pooling. Defect: 263440", "author": "KyleAure", "createdAt": "2020-02-05T14:48:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDkzMjk1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM4MjE2Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10699#discussion_r375382167", "bodyText": "Thanks and good thinking!", "author": "gjwatts", "createdAt": "2020-02-05T16:57:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDkzMjk1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDk0MzMyOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/10699#discussion_r374943329", "bodyText": "typo: default", "author": "gjwatts", "createdAt": "2020-02-04T21:51:32Z", "path": "dev/com.ibm.ws.jdbc_fat/test-applications/basicfat/src/basicfat/DataSourceTestServlet.java", "diffHunk": "@@ -155,6 +160,9 @@\n     @Resource(lookup = \"jdbc/dsfat5\", shareable = false)\n     DataSource ds5u; // one-phase, default isolation, unsharable, Derby only\n \n+    @Resource(name = \"jdbc/dsfat5ref1\", lookup = \"jdbc/dsfat5\")\n+    DataSource ds5_1; //one-phase, defualt isolation, Derby Only, derbyAuth1 set as authentication alias", "originalCommit": "022c28873c33987cb10384fea4c938d6f10e5e08", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7bd2c6a5b5c75033e986727238836733c3d777fa", "url": "https://github.com/OpenLiberty/open-liberty/commit/7bd2c6a5b5c75033e986727238836733c3d777fa", "message": "Fixing postgres issue during XA recovery", "committedDate": "2020-02-05T14:50:55Z", "type": "forcePushed"}, {"oid": "a10e9c9c7886370ad3df258cc319d6685a7a0cbe", "url": "https://github.com/OpenLiberty/open-liberty/commit/a10e9c9c7886370ad3df258cc319d6685a7a0cbe", "message": "Fixing postgres issue during XA recovery", "committedDate": "2020-02-05T14:54:42Z", "type": "commit"}, {"oid": "a10e9c9c7886370ad3df258cc319d6685a7a0cbe", "url": "https://github.com/OpenLiberty/open-liberty/commit/a10e9c9c7886370ad3df258cc319d6685a7a0cbe", "message": "Fixing postgres issue during XA recovery", "committedDate": "2020-02-05T14:54:42Z", "type": "forcePushed"}]}