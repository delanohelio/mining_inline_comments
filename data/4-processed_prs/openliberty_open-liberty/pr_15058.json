{"pr_number": 15058, "pr_title": "Issue 14917: Clarify JWT message about JWE requirements and feature level required", "pr_createdAt": "2020-11-19T19:06:50Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/15058", "timeline": [{"oid": "96cf09f874423493736125b80d4cddfe7b2740b0", "url": "https://github.com/OpenLiberty/open-liberty/commit/96cf09f874423493736125b80d4cddfe7b2740b0", "message": "Issue 14917: Clarify JWT message about JWE requirements and feature level required", "committedDate": "2020-11-19T19:06:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg2NDgwMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15058#discussion_r527864803", "bodyText": "Change,\n\"If using the MicroProfile JWT feature, the 1.2 version or beyond of the feature must be configured to accept tokens in JWE format.\"\nto,\n\"If you use the MicroProfile JWT feature, the 1.2 version or beyond of the feature must be configured to accept tokens in JWE format.\"", "author": "ManasiGandhi", "createdAt": "2020-11-20T17:46:45Z", "path": "dev/com.ibm.ws.security.jwt/resources/com/ibm/ws/security/jwt/internal/resources/JWTMessages.nlsprops", "diffHunk": "@@ -371,8 +371,8 @@ DECRYPT_KEY_LOCATION_INLINE_KEY.useraction=Use a relative path or URL as the val\n # Do not translate \"mp.jwt.decrypt.key.location\", \"keyManagementKeyAlias\", \"Content Encryption Key\"\n # 0=JWT consumer config ID\n JWS_REQUIRED_BUT_TOKEN_NOT_JWS=CWWKS6063E: The token in the request is not in JSON Web Signature (JWS) format, but the [{0}] JWT consumer only accepts tokens that are in JWS format.\n-JWS_REQUIRED_BUT_TOKEN_NOT_JWS.explanation=The token in the request might be malformed or might be in JSON Web Encryption (JWE) format. Tokens must be in JWS format if the JWE decryption key location is not configured.\n-JWS_REQUIRED_BUT_TOKEN_NOT_JWS.useraction=To accept JWE tokens, configure the mp.jwt.decrypt.key.location MicroProfile Config property or the keyManagementKeyAlias attribute in the JWT consumer configuration. Otherwise, ensure that only JWS tokens are sent to this resource.\n+JWS_REQUIRED_BUT_TOKEN_NOT_JWS.explanation=The token in the request might be malformed or might be in JSON Web Encryption (JWE) format. Tokens must be in JWS format if the JWE decryption key location is not configured. If using the MicroProfile JWT feature, the 1.2 version or beyond of the feature must be configured to accept tokens in JWE format.", "originalCommit": "96cf09f874423493736125b80d4cddfe7b2740b0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODc0MTY5MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15058#discussion_r528741691", "bodyText": "Both usages updated.", "author": "ayoho", "createdAt": "2020-11-23T14:28:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg2NDgwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzg2NjA2OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15058#discussion_r527866068", "bodyText": "Change,\n\"If using the MicroProfile JWT feature, ensure that the 1.2 version or beyond is configured. \"\nto,\n\"If you use the MicroProfile JWT feature, ensure that the 1.2 version or beyond is configured. \"", "author": "ManasiGandhi", "createdAt": "2020-11-20T17:47:42Z", "path": "dev/com.ibm.ws.security.jwt/resources/com/ibm/ws/security/jwt/internal/resources/JWTMessages.nlsprops", "diffHunk": "@@ -371,8 +371,8 @@ DECRYPT_KEY_LOCATION_INLINE_KEY.useraction=Use a relative path or URL as the val\n # Do not translate \"mp.jwt.decrypt.key.location\", \"keyManagementKeyAlias\", \"Content Encryption Key\"\n # 0=JWT consumer config ID\n JWS_REQUIRED_BUT_TOKEN_NOT_JWS=CWWKS6063E: The token in the request is not in JSON Web Signature (JWS) format, but the [{0}] JWT consumer only accepts tokens that are in JWS format.\n-JWS_REQUIRED_BUT_TOKEN_NOT_JWS.explanation=The token in the request might be malformed or might be in JSON Web Encryption (JWE) format. Tokens must be in JWS format if the JWE decryption key location is not configured.\n-JWS_REQUIRED_BUT_TOKEN_NOT_JWS.useraction=To accept JWE tokens, configure the mp.jwt.decrypt.key.location MicroProfile Config property or the keyManagementKeyAlias attribute in the JWT consumer configuration. Otherwise, ensure that only JWS tokens are sent to this resource.\n+JWS_REQUIRED_BUT_TOKEN_NOT_JWS.explanation=The token in the request might be malformed or might be in JSON Web Encryption (JWE) format. Tokens must be in JWS format if the JWE decryption key location is not configured. If using the MicroProfile JWT feature, the 1.2 version or beyond of the feature must be configured to accept tokens in JWE format.\n+JWS_REQUIRED_BUT_TOKEN_NOT_JWS.useraction=To accept JWE tokens, configure the mp.jwt.decrypt.key.location MicroProfile Config property or the keyManagementKeyAlias attribute in the JWT consumer configuration. If using the MicroProfile JWT feature, ensure that the 1.2 version or beyond is configured. Otherwise, ensure that only JWS tokens are sent to this resource.", "originalCommit": "96cf09f874423493736125b80d4cddfe7b2740b0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e604532464dfe5e49bcd6bdea817cc2331c7683b", "url": "https://github.com/OpenLiberty/open-liberty/commit/e604532464dfe5e49bcd6bdea817cc2331c7683b", "message": "Issue 14917: Updates from ID review", "committedDate": "2020-11-20T17:51:35Z", "type": "commit"}]}