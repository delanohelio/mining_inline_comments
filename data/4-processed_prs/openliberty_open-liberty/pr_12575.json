{"pr_number": 12575, "pr_title": "Add servlet version check & javax, jakarta check in WebApp Handle Types Method", "pr_createdAt": "2020-06-11T13:19:30Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12575", "timeline": [{"oid": "002bf469ff2c81630bc6efe2ca3ddf3b2e15981a", "url": "https://github.com/OpenLiberty/open-liberty/commit/002bf469ff2c81630bc6efe2ca3ddf3b2e15981a", "message": "12574: Add servlet version check & javax, jakarta check", "committedDate": "2020-06-11T13:56:37Z", "type": "forcePushed"}, {"oid": "56acfb50caaa8c4fa82dea9f59950fdf8df2cc02", "url": "https://github.com/OpenLiberty/open-liberty/commit/56acfb50caaa8c4fa82dea9f59950fdf8df2cc02", "message": "12574: Add servlet version check & javax, jakarta check", "committedDate": "2020-06-30T20:39:47Z", "type": "forcePushed"}, {"oid": "fc3dab46b0c0417d76912c9522a6940e0fc71751", "url": "https://github.com/OpenLiberty/open-liberty/commit/fc3dab46b0c0417d76912c9522a6940e0fc71751", "message": "12574: Add servlet version check & javax, jakarta check", "committedDate": "2020-06-30T20:43:52Z", "type": "commit"}, {"oid": "fc3dab46b0c0417d76912c9522a6940e0fc71751", "url": "https://github.com/OpenLiberty/open-liberty/commit/fc3dab46b0c0417d76912c9522a6940e0fc71751", "message": "12574: Add servlet version check & javax, jakarta check", "committedDate": "2020-06-30T20:43:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTExMDY1Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12575#discussion_r449110652", "bodyText": "Can you use the constant instead: com.ibm.ws.webcontainer.osgi.WebContainer.SPEC_LEVEL_40", "author": "pnicolucci", "createdAt": "2020-07-02T15:49:30Z", "path": "dev/com.ibm.ws.webcontainer/src/com/ibm/ws/webcontainer/osgi/webapp/WebApp.java", "diffHunk": "@@ -1052,18 +1052,29 @@ protected void addClassToHandlesTypesStartupSet(String targetClassName, Set<Clas\n       \n       boolean enableTrace = ( com.ibm.ejs.ras.TraceComponent.isAnyTracingEnabled() && logger.isLoggable (Level.FINE) );\n \n+      int servletSpecLevel = com.ibm.ws.webcontainer.osgi.WebContainer.getServletContainerSpecLevel();\n       //check if excluded because the subclasses includes this... and could be more than we want\n       //might need to exclude something else like javax.* or java*\n-      if (targetClassName.startsWith(\"java\")) {\n-          if ((targetClassName.charAt(4) == '.') || (targetClassName.startsWith(\"javax.\"))) {\n-              if ( enableTrace ) { \n-                  logger.logp(Level.FINE, CLASS_NAME, methodName,\n-                              \"Internal class, {0}, is not added to the ServletContainerInitializers in the application: {1}\",\n-                              new Object[] { targetClassName, this.config.getDisplayName() });\n-              }\n-              return;\n+      if(servletSpecLevel <= 40){", "originalCommit": "1405f75d8870f987ce6a4212845871b5f3c755a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTEyMzcxOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12575#discussion_r449123718", "bodyText": "Changed", "author": "volosied", "createdAt": "2020-07-02T16:09:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTExMDY1Mg=="}], "type": "inlineReview"}, {"oid": "3fe3ad52f858b78f885e90a08542c556eceb49fe", "url": "https://github.com/OpenLiberty/open-liberty/commit/3fe3ad52f858b78f885e90a08542c556eceb49fe", "message": "mend", "committedDate": "2020-07-02T16:08:14Z", "type": "commit"}, {"oid": "3fe3ad52f858b78f885e90a08542c556eceb49fe", "url": "https://github.com/OpenLiberty/open-liberty/commit/3fe3ad52f858b78f885e90a08542c556eceb49fe", "message": "mend", "committedDate": "2020-07-02T16:08:14Z", "type": "forcePushed"}]}