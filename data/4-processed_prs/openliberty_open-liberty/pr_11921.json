{"pr_number": 11921, "pr_title": "Issue #11913: Add new endpoint to allow renewal of account key pair. \u2026", "pr_createdAt": "2020-04-24T02:44:05Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/11921", "timeline": [{"oid": "7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "url": "https://github.com/OpenLiberty/open-liberty/commit/7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "message": "Issue #11913: Add new endpoint to allow renewal of account key pair. Allow update of of account contacts. Add Boulder CA driver and new runBoulder gradle task.", "committedDate": "2020-04-24T13:03:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAxMzIzMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416013230", "bodyText": "Maybe change or the file's parent directory to or its parent directory to remove the apostrophe.", "author": "helyarp", "createdAt": "2020-04-27T17:36:34Z", "path": "dev/com.ibm.ws.security.acme/resources/com/ibm/ws/security/acme/resources/AcmeMessages.nlsprops", "diffHunk": "@@ -24,7 +24,7 @@\n # The URI parameter in these messages is for the ACME certificate authority, such as https://sampleCAProvider.org/directory\n \n FILE_NOT_READABLE=the file is not readable\n-FILE_NOT_WRITABLE=the file is not writable\n+FILE_NOT_WRITABLE=the file or the file's parent directory is not writable", "originalCommit": "7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkwMDY3NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416900674", "bodyText": "Agreed.", "author": "jvanhill", "createdAt": "2020-04-28T20:27:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAxMzIzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAxNDA0OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416014049", "bodyText": "Change could not load to did not load or to cannot load", "author": "helyarp", "createdAt": "2020-04-27T17:37:40Z", "path": "dev/com.ibm.ws.security.acme/resources/com/ibm/ws/security/acme/resources/AcmeMessages.nlsprops", "diffHunk": "@@ -122,13 +122,13 @@ CWPKI2024E=CWPKI2024E: The ACME service failed to revoke the requested certifica\n CWPKI2024E.explanation=A certificate revoke request failed. The certificate might not be revoked and could still be in use.\n CWPKI2024E.useraction=Review the error message for details on the failure.\n \n-CWPKI2025W=CWPKI2025W: The ACME service received a certificate revoke request, but the account key pair for the ACME certificate authority at the {0} URI could not be loaded.\n-CWPKI2025W.explanation=The certificate revoke request failed because the account key pair could not be loaded.\n-CWPKI2025W.useraction=Review the log for any earlier errors for details on the failure. Review the keystore file to verify that the certificate exists.\n+CWPKI2025W=CWPKI2025W: The ACME service could not load the account key pair for the ACME certificate authority at the {0} URI.", "originalCommit": "7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkwMTAxNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416901014", "bodyText": "Agreed.", "author": "jvanhill", "createdAt": "2020-04-28T20:28:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAxNDA0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAxNDY1Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416014652", "bodyText": "Change could not find to did not find or to cannot find", "author": "helyarp", "createdAt": "2020-04-27T17:38:24Z", "path": "dev/com.ibm.ws.security.acme/resources/com/ibm/ws/security/acme/resources/AcmeMessages.nlsprops", "diffHunk": "@@ -122,13 +122,13 @@ CWPKI2024E=CWPKI2024E: The ACME service failed to revoke the requested certifica\n CWPKI2024E.explanation=A certificate revoke request failed. The certificate might not be revoked and could still be in use.\n CWPKI2024E.useraction=Review the error message for details on the failure.\n \n-CWPKI2025W=CWPKI2025W: The ACME service received a certificate revoke request, but the account key pair for the ACME certificate authority at the {0} URI could not be loaded.\n-CWPKI2025W.explanation=The certificate revoke request failed because the account key pair could not be loaded.\n-CWPKI2025W.useraction=Review the log for any earlier errors for details on the failure. Review the keystore file to verify that the certificate exists.\n+CWPKI2025W=CWPKI2025W: The ACME service could not load the account key pair for the ACME certificate authority at the {0} URI.\n+CWPKI2025W.explanation=The request failed because the account key pair could not be loaded.\n+CWPKI2025W.useraction=Review the log for any earlier errors for details on the failure.\n \n-CWPKI2026W=CWPKI2026W: The ACME service received a certificate revoke request, but the account was not found at the ACME certificate authority at the {0} URI.\n-CWPKI2026W.explanation=The certificate revoke request failed because the account was not found.\n-CWPKI2026W.useraction=Review the certificate authority URI. Review the keystore file to verify that the certificate exists.\n+CWPKI2026W=CWPKI2026W: The ACME service could not find the account at the ACME certificate authority at the {0} URI.", "originalCommit": "7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkwMTMxMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416901311", "bodyText": "Agreed.", "author": "jvanhill", "createdAt": "2020-04-28T20:28:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAxNDY1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAxNTM4MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416015381", "bodyText": "Change could not update to did not update or to cannot update", "author": "helyarp", "createdAt": "2020-04-27T17:39:19Z", "path": "dev/com.ibm.ws.security.acme/resources/com/ibm/ws/security/acme/resources/AcmeMessages.nlsprops", "diffHunk": "@@ -154,9 +154,9 @@ CWPKI2032E=CWPKI2032E: The certificate subject alternative names in the default\n CWPKI2032E.explanation=The certificate is an invalid DER-encoded certificate or contains unsupported DER features.\n CWPKI2032E.useraction=Review the error message for details on the failure. Revoke or remove the invalid certificate.\n \n-#CWPKI2033E=CWPKI2033E: The ACME service could not find the certificate for the {0} alias in the {1} keystore. The error is ''{2}''.\n-#CWPKI2033E.explanation=A certificate authority signed certificate is stored in the default keystore and replaces any existing default certificate, but keystore or default certificate could not be accessed.\n-#CWPKI2033E.useraction=Review the error message for details on the failure.\n+CWPKI2033E=CWPKI2033E: The ACME service could not update the {0} account for the ACME certificate authority at the {1} URI. The error is ''{2}''.", "originalCommit": "7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkwMTcwMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416901700", "bodyText": "Agreed.", "author": "jvanhill", "createdAt": "2020-04-28T20:29:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjAxNTM4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA0MTc3Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416041773", "bodyText": "Try not to use \"could\" and explain why a new account key pair was not generated. The useraction suggests that the explanation might be \"A new account key pair was not generated because the directory that holds the account key pair file is not writable.\"", "author": "helyarp", "createdAt": "2020-04-27T18:16:25Z", "path": "dev/com.ibm.ws.security.acme/resources/com/ibm/ws/security/acme/resources/AcmeMessages.nlsprops", "diffHunk": "@@ -206,3 +206,23 @@ CWPKI2044E.useraction=Ensure that all the certificates in the certificate chain\n CWPKI2045W=CWPKI2045W: The certificate with {0} serial number that is signed by the ACME certificate authority at the {1} URI is not valid until {2}.\n CWPKI2045W.explanation=The valid period on the certificate is in the future. SSL/TLS requests fail until the current date and time are within the range that is specified by the valid period on the certificate.\n CWPKI2045W.useraction=Update the local time on the server if the time is incorrect.\n+\n+CWPKI2046E=CWPKI2046E: Failed to generate a new account key pair while refreshing the account key pair. The error is ''{0}''.\n+CWPKI2046E.explanation=Could not generate a new account key pair.", "originalCommit": "7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkxODU1OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416918559", "bodyText": "I realized this error message is not used. I have commented the lines out and removed the messages.", "author": "jvanhill", "createdAt": "2020-04-28T20:59:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA0MTc3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA0MzMzNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416043336", "bodyText": "Change \"has been\" to \"was\" or change the phrase to \"backup is the {0} file.", "author": "helyarp", "createdAt": "2020-04-27T18:18:49Z", "path": "dev/com.ibm.ws.security.acme/resources/com/ibm/ws/security/acme/resources/AcmeMessages.nlsprops", "diffHunk": "@@ -206,3 +206,23 @@ CWPKI2044E.useraction=Ensure that all the certificates in the certificate chain\n CWPKI2045W=CWPKI2045W: The certificate with {0} serial number that is signed by the ACME certificate authority at the {1} URI is not valid until {2}.\n CWPKI2045W.explanation=The valid period on the certificate is in the future. SSL/TLS requests fail until the current date and time are within the range that is specified by the valid period on the certificate.\n CWPKI2045W.useraction=Update the local time on the server if the time is incorrect.\n+\n+CWPKI2046E=CWPKI2046E: Failed to generate a new account key pair while refreshing the account key pair. The error is ''{0}''.\n+CWPKI2046E.explanation=Could not generate a new account key pair.\n+CWPKI2046E.useraction=Ensure that the directory that contains the existing account key pair file is writable. Review the error message for details on the failure.\n+\n+CWPKI2047E=CWPKI2047E: Failed to register the new account key pair with the ACME certificate authority. The error is ''{0}''.\n+CWPKI2047E.explanation=The ACME certificate authority returned an error while updating the account key pair.\n+CWPKI2047E.useraction=Ensure that the existing account key pair is valid. Review the error message for details on the failure. \n+\n+CWPKI2048I=CWPKI2048I: Successfully refreshed the account key pair. The old account key pair has been backed up to the {0} file.", "originalCommit": "7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkwMjg1OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416902858", "bodyText": "Agreed.", "author": "jvanhill", "createdAt": "2020-04-28T20:31:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA0MzMzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA0NDA2NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416044064", "bodyText": "Change \"has been\" to \"was\"", "author": "helyarp", "createdAt": "2020-04-27T18:19:53Z", "path": "dev/com.ibm.ws.security.acme/resources/com/ibm/ws/security/acme/resources/AcmeMessages.nlsprops", "diffHunk": "@@ -206,3 +206,23 @@ CWPKI2044E.useraction=Ensure that all the certificates in the certificate chain\n CWPKI2045W=CWPKI2045W: The certificate with {0} serial number that is signed by the ACME certificate authority at the {1} URI is not valid until {2}.\n CWPKI2045W.explanation=The valid period on the certificate is in the future. SSL/TLS requests fail until the current date and time are within the range that is specified by the valid period on the certificate.\n CWPKI2045W.useraction=Update the local time on the server if the time is incorrect.\n+\n+CWPKI2046E=CWPKI2046E: Failed to generate a new account key pair while refreshing the account key pair. The error is ''{0}''.\n+CWPKI2046E.explanation=Could not generate a new account key pair.\n+CWPKI2046E.useraction=Ensure that the directory that contains the existing account key pair file is writable. Review the error message for details on the failure.\n+\n+CWPKI2047E=CWPKI2047E: Failed to register the new account key pair with the ACME certificate authority. The error is ''{0}''.\n+CWPKI2047E.explanation=The ACME certificate authority returned an error while updating the account key pair.\n+CWPKI2047E.useraction=Ensure that the existing account key pair is valid. Review the error message for details on the failure. \n+\n+CWPKI2048I=CWPKI2048I: Successfully refreshed the account key pair. The old account key pair has been backed up to the {0} file.\n+CWPKI2048I.explanation=The previous account key pair is no longer associated with the account and has been backed up to a file. The new account key pair has replaced the old account key pair file.", "originalCommit": "7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkwMzEwNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416903104", "bodyText": "Agreed.", "author": "jvanhill", "createdAt": "2020-04-28T20:31:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA0NDA2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA0NDk3OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416044979", "bodyText": "Change \"could not be backed up\" to \"was not backed up\" or to \"cannot be backed up\"", "author": "helyarp", "createdAt": "2020-04-27T18:21:10Z", "path": "dev/com.ibm.ws.security.acme/resources/com/ibm/ws/security/acme/resources/AcmeMessages.nlsprops", "diffHunk": "@@ -206,3 +206,23 @@ CWPKI2044E.useraction=Ensure that all the certificates in the certificate chain\n CWPKI2045W=CWPKI2045W: The certificate with {0} serial number that is signed by the ACME certificate authority at the {1} URI is not valid until {2}.\n CWPKI2045W.explanation=The valid period on the certificate is in the future. SSL/TLS requests fail until the current date and time are within the range that is specified by the valid period on the certificate.\n CWPKI2045W.useraction=Update the local time on the server if the time is incorrect.\n+\n+CWPKI2046E=CWPKI2046E: Failed to generate a new account key pair while refreshing the account key pair. The error is ''{0}''.\n+CWPKI2046E.explanation=Could not generate a new account key pair.\n+CWPKI2046E.useraction=Ensure that the directory that contains the existing account key pair file is writable. Review the error message for details on the failure.\n+\n+CWPKI2047E=CWPKI2047E: Failed to register the new account key pair with the ACME certificate authority. The error is ''{0}''.\n+CWPKI2047E.explanation=The ACME certificate authority returned an error while updating the account key pair.\n+CWPKI2047E.useraction=Ensure that the existing account key pair is valid. Review the error message for details on the failure. \n+\n+CWPKI2048I=CWPKI2048I: Successfully refreshed the account key pair. The old account key pair has been backed up to the {0} file.\n+CWPKI2048I.explanation=The previous account key pair is no longer associated with the account and has been backed up to a file. The new account key pair has replaced the old account key pair file.\n+CWPKI2048I.useraction=No action is required.\n+\n+CWPKI2049E=CWPKI2049E: The account key pair refresh failed and was unable to restore the existing key pair file. Manually replace the {0} account key pair file with the {1} account key pair file.\n+CWPKI2049E.explanation=The key pair refresh failed and was unable to restore old key pair file.\n+CWPKI2049E.useraction=Manually replace the account key pair files as directed in the message.\n+\n+CWPKI2050E=CWPKI2050E: Failed to back up the existing account key pair file while refreshing the account key pair. The error is ''{0}''.\n+CWPKI2050E.explanation=The existing account key pair file could not be backed up. ", "originalCommit": "7e1ac59f0ff30ec1419f12ef21d40963b62f446c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkwMzMzNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/11921#discussion_r416903335", "bodyText": "Agreed", "author": "jvanhill", "createdAt": "2020-04-28T20:32:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA0NDk3OQ=="}], "type": "inlineReview"}, {"oid": "8bd49c301519caf4cd66ecaaa8efd8ba1ee5b452", "url": "https://github.com/OpenLiberty/open-liberty/commit/8bd49c301519caf4cd66ecaaa8efd8ba1ee5b452", "message": "Issue #11913: Add new endpoint to allow renewal of account key pair. Allow update of of account contacts. Add Boulder CA driver and new runBoulder gradle task.", "committedDate": "2020-04-28T20:58:05Z", "type": "forcePushed"}, {"oid": "93c48e20a6926b9abc942a2def336c8c556aafd3", "url": "https://github.com/OpenLiberty/open-liberty/commit/93c48e20a6926b9abc942a2def336c8c556aafd3", "message": "Issue #11913: Add new endpoint to allow renewal of account key pair. Allow update of of account contacts. Add Boulder CA driver and new runBoulder gradle task.", "committedDate": "2020-04-28T20:58:42Z", "type": "commit"}, {"oid": "93c48e20a6926b9abc942a2def336c8c556aafd3", "url": "https://github.com/OpenLiberty/open-liberty/commit/93c48e20a6926b9abc942a2def336c8c556aafd3", "message": "Issue #11913: Add new endpoint to allow renewal of account key pair. Allow update of of account contacts. Add Boulder CA driver and new runBoulder gradle task.", "committedDate": "2020-04-28T20:58:42Z", "type": "forcePushed"}]}