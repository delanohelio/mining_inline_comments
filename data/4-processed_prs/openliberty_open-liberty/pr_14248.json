{"pr_number": 14248, "pr_title": "Update WC property suppressHtmlRecursiveErrorOutput", "pr_createdAt": "2020-09-30T19:03:14Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14248", "timeline": [{"oid": "05d9332d8484670a9b502855fe3b07ed825afed2", "url": "https://github.com/OpenLiberty/open-liberty/commit/05d9332d8484670a9b502855fe3b07ed825afed2", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-09-30T19:06:45Z", "type": "forcePushed"}, {"oid": "1e42d53785558a7751b570a7d021573757eb6a9a", "url": "https://github.com/OpenLiberty/open-liberty/commit/1e42d53785558a7751b570a7d021573757eb6a9a", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-09-30T19:22:14Z", "type": "forcePushed"}, {"oid": "a2b1f926832d383ec1ac18339022a58c27dfcf30", "url": "https://github.com/OpenLiberty/open-liberty/commit/a2b1f926832d383ec1ac18339022a58c27dfcf30", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-10-02T18:28:42Z", "type": "forcePushed"}, {"oid": "b696758bf67fb0216bb8419f3409f88e93e67bf7", "url": "https://github.com/OpenLiberty/open-liberty/commit/b696758bf67fb0216bb8419f3409f88e93e67bf7", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-10-02T18:31:23Z", "type": "forcePushed"}, {"oid": "497fd1c7a5963d5c538d87bd8932bbdcc95090c4", "url": "https://github.com/OpenLiberty/open-liberty/commit/497fd1c7a5963d5c538d87bd8932bbdcc95090c4", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-10-02T18:32:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ2MzUyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r500463521", "bodyText": "change\nthe default value is true and no longer configurable.\nto\nthe default value is true and is no longer configurable.", "author": "jantley-ibm", "createdAt": "2020-10-06T17:13:28Z", "path": "dev/com.ibm.ws.webcontainer/resources/OSGI-INF/l10n/metatype.properties", "diffHunk": "@@ -64,7 +64,7 @@ decodeUrlPlusSign.name=Decode url plus sign\n decodeUrlPlusSign.desc=Decode the plus sign when it is part of the URL. The equivalent custom property in the full application server profile is com.ibm.ws.webcontainer.decodeurlplussign. For servlet-5.0 and newer Servlet features, the default value is false.\n \n suppressHtmlRecursiveErrorOutput.name=Suppress recursive exception in the HTML response\n-suppressHtmlRecursiveErrorOutput.desc=Suppresses the exception information from appearing in the HTML output when there is a recursive error that cannot be handled by an application's configured error page. The equivalent custom property in the full application server profile is com.ibm.ws.webcontainer.suppressHtmlRecursiveErrorOutput.\n+suppressHtmlRecursiveErrorOutput.desc=Suppresses the exception information from appearing in the HTML output when there is a recursive error that cannot be handled by an application's configured error page. The equivalent custom property in the full application server profile is com.ibm.ws.webcontainer.suppressHtmlRecursiveErrorOutput. For servlet-5.0 and newer Servlet features, the default value is true and no longer configurable.", "originalCommit": "497fd1c7a5963d5c538d87bd8932bbdcc95090c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ2NjUyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r500466527", "bodyText": "Also, it is no longer configurable via the property.", "author": "pnicolucci", "createdAt": "2020-10-06T17:18:13Z", "path": "dev/com.ibm.ws.webcontainer.servlet.4.0_fat/fat/src/com/ibm/ws/fat/wc/tests/WC5JakartaServletTest.java", "diffHunk": "@@ -76,23 +83,69 @@ public static void testCleanup() throws Exception {\n      * @throws Exception\n      */\n     @Test\n-    public void testSimple_Servlet50() throws Exception {\n-        String expectedResponse = \"END OF SNOOP 5. TEST PASS\";\n-        String url = \"http://\" + server.getHostname() + \":\" + server.getHttpDefaultPort() + \"/\" + APP_NAME + \"/snoop5\";\n+    public void test_Simple_Servlet50() throws Exception {\n+        requestHelper(\"http\", \"GET\", \"/\" + APP_NAME + \"/snoop5\", \"\", \"END OF SNOOP 5. TEST PASS\");\n+    }\n+\n+    /*\n+     * com.ibm.ws.webcontainer.suppresshtmlrecursiveerroroutput is set to true by default starting Servlet 5.\n+     * Also, it is not longer configurable via the property.", "originalCommit": "497fd1c7a5963d5c538d87bd8932bbdcc95090c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ2Nzc4MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r500467780", "bodyText": "Where did this JSP come from? Copyright? Seems to have more than necessary for the test at  first glance.", "author": "pnicolucci", "createdAt": "2020-10-06T17:20:13Z", "path": "dev/com.ibm.ws.webcontainer.servlet.4.0_fat/test-applications/Servlet5TestApp.war/resources/jsp/JSPErrorsGenerator.jsp", "diffHunk": "@@ -0,0 +1,48 @@\n+<%@ page  import=\"java.io.IOException\" %> ", "originalCommit": "497fd1c7a5963d5c538d87bd8932bbdcc95090c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ2ODEwOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r500468109", "bodyText": "copyright? Where did this come from? Is this from an existing app?", "author": "pnicolucci", "createdAt": "2020-10-06T17:20:48Z", "path": "dev/com.ibm.ws.webcontainer.servlet.4.0_fat/test-applications/Servlet5TestApp.war/resources/jsp/errorPage.jsp", "diffHunk": "@@ -0,0 +1,18 @@\n+<%@ page  import=\"java.io.IOException\" %>", "originalCommit": "497fd1c7a5963d5c538d87bd8932bbdcc95090c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ2ODQ4MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r500468480", "bodyText": "Should we just remove this from the metatype if we can't actually configure it?", "author": "pnicolucci", "createdAt": "2020-10-06T17:21:27Z", "path": "dev/com.ibm.ws.webcontainer/resources/OSGI-INF/metatype/metatype.xml", "diffHunk": "@@ -98,7 +98,7 @@\n         <AD id=\"suppressHtmlRecursiveErrorOutput\"\n             name=\"%suppressHtmlRecursiveErrorOutput.name\" \n             description=\"%suppressHtmlRecursiveErrorOutput.desc\" \n-            required=\"false\" type=\"Boolean\" default=\"false\" />\n+            required=\"false\" type=\"Boolean\" />", "originalCommit": "497fd1c7a5963d5c538d87bd8932bbdcc95090c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "228d2d1a1bf90582e7100136b136afa3e335886f", "url": "https://github.com/OpenLiberty/open-liberty/commit/228d2d1a1bf90582e7100136b136afa3e335886f", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-10-06T19:24:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMyNzc5NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r515327794", "bodyText": "We should be removing it from all of the translations as well.", "author": "pnicolucci", "createdAt": "2020-10-30T19:27:51Z", "path": "dev/com.ibm.ws.webcontainer/resources/OSGI-INF/l10n/metatype.properties", "diffHunk": "@@ -63,9 +63,6 @@ exposeWebInfOnDispatch.desc=If true, a servlet can access files in the WEB-INF d\n decodeUrlPlusSign.name=Decode url plus sign\n decodeUrlPlusSign.desc=Decode the plus sign when it is part of the URL. The equivalent custom property in the full application server profile is com.ibm.ws.webcontainer.decodeurlplussign. For servlet-5.0 and newer Servlet features, the default value is false.\n \n-suppressHtmlRecursiveErrorOutput.name=Suppress recursive exception in the HTML response\n-suppressHtmlRecursiveErrorOutput.desc=Suppresses the exception information from appearing in the HTML output when there is a recursive error that cannot be handled by an application's configured error page. The equivalent custom property in the full application server profile is com.ibm.ws.webcontainer.suppressHtmlRecursiveErrorOutput.\n-", "originalCommit": "228d2d1a1bf90582e7100136b136afa3e335886f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE3MTQ4MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r516171481", "bodyText": "from Phil,\nSimply remove it from the English, the build should notice the changed English file and package it up for me, I will then send it to translations in the next shipment (due late December) and the translation team will remove the message from the translated files.\nPhilip Nickoll\n(i.e just merge PR without any further action.)", "author": "pmd1nh", "createdAt": "2020-11-02T18:23:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMyNzc5NA=="}], "type": "inlineReview"}, {"oid": "21c154da8d6e0b3a855121138a6aefc81fc95b74", "url": "https://github.com/OpenLiberty/open-liberty/commit/21c154da8d6e0b3a855121138a6aefc81fc95b74", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-11-02T19:44:02Z", "type": "forcePushed"}, {"oid": "75300077d825ea201025ebabea76277f9fb2c905", "url": "https://github.com/OpenLiberty/open-liberty/commit/75300077d825ea201025ebabea76277f9fb2c905", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-11-03T20:43:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM3OTIzOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r517379239", "bodyText": "Should we also comment out this line?\npublic static boolean SUPPRESS_HTML_RECURSIVE_ERROR_OUTPUT;\nThis probably will also require a bundle version update I believe with feature checker since we're removing a public variable.\nThoughts?", "author": "pnicolucci", "createdAt": "2020-11-04T14:23:03Z", "path": "dev/com.ibm.ws.webcontainer/src/com/ibm/wsspi/webcontainer/WCCustomProperties.java", "diffHunk": "@@ -530,7 +530,7 @@ public static void setCustomPropertyVariables() {\n \n         ERROR_PAGE_COMPATIBILITY = customProps.getProperty(\"com.ibm.ws.webcontainer.contenttypecompatibility\");\n         MAP_FILTERS_TO_ASTERICK = Boolean.valueOf(customProps.getProperty(\"com.ibm.ws.webcontainer.mapfilterstoasterisk\")).booleanValue();\n-        SUPPRESS_HTML_RECURSIVE_ERROR_OUTPUT = Boolean.valueOf(customProps.getProperty(\"com.ibm.ws.webcontainer.suppresshtmlrecursiveerroroutput\")).booleanValue();\n+        //SUPPRESS_HTML_RECURSIVE_ERROR_OUTPUT = Boolean.valueOf(customProps.getProperty(\"com.ibm.ws.webcontainer.suppresshtmlrecursiveerroroutput\")).booleanValue(); // issue 14242", "originalCommit": "75300077d825ea201025ebabea76277f9fb2c905", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4MTczNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r539681736", "bodyText": "I think we can just leave it there for the future record.", "author": "pmd1nh", "createdAt": "2020-12-09T22:03:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM3OTIzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwNDkyMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14248#discussion_r540404923", "bodyText": "It's a public variable and this is exposed as an SPI so I think we should at the very least comment it out.", "author": "pnicolucci", "createdAt": "2020-12-10T18:35:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM3OTIzOQ=="}], "type": "inlineReview"}, {"oid": "bfc0070d21e7d1f79d2ccc8f2f4532d77c3ce024", "url": "https://github.com/OpenLiberty/open-liberty/commit/bfc0070d21e7d1f79d2ccc8f2f4532d77c3ce024", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-12-09T21:56:38Z", "type": "forcePushed"}, {"oid": "7105fcf50f2138fb1cd1a5025e5a7d16ad8c3155", "url": "https://github.com/OpenLiberty/open-liberty/commit/7105fcf50f2138fb1cd1a5025e5a7d16ad8c3155", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-12-09T22:04:07Z", "type": "forcePushed"}, {"oid": "c066513bf2179ab472667d399ba99191d46ca3bf", "url": "https://github.com/OpenLiberty/open-liberty/commit/c066513bf2179ab472667d399ba99191d46ca3bf", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-12-10T19:11:20Z", "type": "forcePushed"}, {"oid": "7ed6f159e75996c38ac2c77df40d0b87010175a6", "url": "https://github.com/OpenLiberty/open-liberty/commit/7ed6f159e75996c38ac2c77df40d0b87010175a6", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-12-14T00:50:27Z", "type": "forcePushed"}, {"oid": "3bec68a2dbf856ce94bd64481df4d3b8348993f8", "url": "https://github.com/OpenLiberty/open-liberty/commit/3bec68a2dbf856ce94bd64481df4d3b8348993f8", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2020-12-14T01:00:03Z", "type": "forcePushed"}, {"oid": "f5aaa9cbaefaa486a3a10de7d796dcaffec5dfd1", "url": "https://github.com/OpenLiberty/open-liberty/commit/f5aaa9cbaefaa486a3a10de7d796dcaffec5dfd1", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2021-01-20T20:26:19Z", "type": "forcePushed"}, {"oid": "abf740c27f5de86a029b477b61c2904383a071ce", "url": "https://github.com/OpenLiberty/open-liberty/commit/abf740c27f5de86a029b477b61c2904383a071ce", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2021-01-20T20:28:02Z", "type": "forcePushed"}, {"oid": "1db871fb416c53fafa07c246a2fa845b88a8946c", "url": "https://github.com/OpenLiberty/open-liberty/commit/1db871fb416c53fafa07c246a2fa845b88a8946c", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2021-01-20T20:30:29Z", "type": "forcePushed"}, {"oid": "7b7d2a81b5251e5fe9fe0fdf6e88925d33ca9893", "url": "https://github.com/OpenLiberty/open-liberty/commit/7b7d2a81b5251e5fe9fe0fdf6e88925d33ca9893", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2021-01-20T20:33:10Z", "type": "forcePushed"}, {"oid": "6dbb297e5e4d8aab0e604320b93fafa8411dbd7e", "url": "https://github.com/OpenLiberty/open-liberty/commit/6dbb297e5e4d8aab0e604320b93fafa8411dbd7e", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2021-01-20T20:36:22Z", "type": "forcePushed"}, {"oid": "7b7178b3fe0c0072bd31e7a7dab94f88a2854096", "url": "https://github.com/OpenLiberty/open-liberty/commit/7b7178b3fe0c0072bd31e7a7dab94f88a2854096", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2021-01-27T19:58:56Z", "type": "forcePushed"}, {"oid": "79dc9978cc1098ceefbf9697ff1fee1e87aa5c5a", "url": "https://github.com/OpenLiberty/open-liberty/commit/79dc9978cc1098ceefbf9697ff1fee1e87aa5c5a", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2021-01-27T20:23:27Z", "type": "forcePushed"}, {"oid": "f4a9477af00bf7b61182dd44086149034f63b07e", "url": "https://github.com/OpenLiberty/open-liberty/commit/f4a9477af00bf7b61182dd44086149034f63b07e", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2021-01-27T20:25:35Z", "type": "commit"}, {"oid": "f4a9477af00bf7b61182dd44086149034f63b07e", "url": "https://github.com/OpenLiberty/open-liberty/commit/f4a9477af00bf7b61182dd44086149034f63b07e", "message": "Servlet 5 Update WC property suppressHtmlRecursiveErrorOutput", "committedDate": "2021-01-27T20:25:35Z", "type": "forcePushed"}]}