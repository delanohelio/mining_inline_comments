{"pr_number": 13017, "pr_title": "Issue 12380: Changed error.getMessage() across multiple projects", "pr_createdAt": "2020-07-14T15:40:19Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/13017", "timeline": [{"oid": "a2f7bb2b3f289c3d3339049fa3a90ff1baa14bee", "url": "https://github.com/OpenLiberty/open-liberty/commit/a2f7bb2b3f289c3d3339049fa3a90ff1baa14bee", "message": "Issue 12380: Changed error.getMessage() across multiple projects to be more descriptive and avoid null as an error message", "committedDate": "2020-07-14T15:31:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQ2MzYzNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r454463634", "bodyText": "Looks like you accidentally took out the second insert - clientConfig.getClientId(). That needs to be put back.", "author": "ayoho", "createdAt": "2020-07-14T15:57:01Z", "path": "dev/com.ibm.ws.security.openidconnect.clients.common/src/com/ibm/ws/security/openidconnect/clients/common/AuthorizationCodeHandler.java", "diffHunk": "@@ -99,7 +99,7 @@ public ProviderAuthenticationResult handleAuthorizationCode(HttpServletRequest r\n             boolean throwExc = clientConfig.getTokenEndpointUrl() != null && clientConfig.getTokenEndpointUrl().startsWith(\"https\");\n             sslSocketFactory = new OidcClientHttpUtil().getSSLSocketFactory(clientConfig, sslSupport, throwExc, false);\n         } catch (SSLException e) {\n-            Tr.error(tc, \"OIDC_CLIENT_HTTPS_WITH_SSLCONTEXT_NULL\", new Object[] { e.getMessage() != null ? e.getMessage() : \"invalid ssl context\", clientConfig.getClientId() });\n+            Tr.error(tc, \"OIDC_CLIENT_HTTPS_WITH_SSLCONTEXT_NULL\", new Object[] { e });", "originalCommit": "a2f7bb2b3f289c3d3339049fa3a90ff1baa14bee", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "36508b77dfec4a305437a67b409d66bcce57608c", "url": "https://github.com/OpenLiberty/open-liberty/commit/36508b77dfec4a305437a67b409d66bcce57608c", "message": "Issue 12380: Made more changes and fixed a bug", "committedDate": "2020-07-14T18:15:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3NDAyOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r454574028", "bodyText": "These cases - where the exception object is of type SocialLoginException - are ones that I'd leave the call to getMessage() as it is.", "author": "ayoho", "createdAt": "2020-07-14T18:55:18Z", "path": "dev/com.ibm.ws.security.social/src/com/ibm/ws/security/social/twitter/TwitterTokenServices.java", "diffHunk": "@@ -86,7 +86,7 @@ public void getRequestToken(HttpServletRequest request, HttpServletResponse resp\n             try {\n                 SocialUtil.validateEndpointWithQuery(authzEndpoint);\n             } catch (SocialLoginException e) {\n-                Tr.error(tc, \"FAILED_TO_REDIRECT_TO_AUTHZ_ENDPOINT\", new Object[] { config.getUniqueId(), e.getMessage() });\n+                Tr.error(tc, \"FAILED_TO_REDIRECT_TO_AUTHZ_ENDPOINT\", new Object[] { config.getUniqueId(), e });", "originalCommit": "36508b77dfec4a305437a67b409d66bcce57608c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3NjU0OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r454576549", "bodyText": "The insert for this message actually looks like it should be a username, not an exception. The message is\nERROR_AUTHENTICATE=CWWKS6103E: A security subject cannot be created for the {0} user.\n\nI'm trying to decide if we should enhance the message to add an insert at the end that could be the Exception object.", "author": "ayoho", "createdAt": "2020-07-14T18:59:41Z", "path": "dev/com.ibm.ws.security.common/src/com/ibm/ws/security/common/token/propagation/TokenPropagationHelper.java", "diffHunk": "@@ -275,7 +275,7 @@ public static synchronized boolean pushSubject(String username) {\n             FFDCFilter.processException(e,\n                     TokenPropagationHelper.class.getName(), \"pushSubject\",\n                     new Object[] { username });\n-            Tr.error(tc, \"ERROR_AUTHENTICATE\", new Object[] { e.getMessage() }); // CWWKS6103E\n+            Tr.error(tc, \"ERROR_AUTHENTICATE\", new Object[] { e }); // CWWKS6103E", "originalCommit": "36508b77dfec4a305437a67b409d66bcce57608c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e1d88a95e7d977f9dc3bb5835467736373364df5", "url": "https://github.com/OpenLiberty/open-liberty/commit/e1d88a95e7d977f9dc3bb5835467736373364df5", "message": "fixed SocialLoginException and ErrorAuthenticate", "committedDate": "2020-07-16T21:28:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEwNzYxNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r456107617", "bodyText": "This one could have stayed as just e, but it's a debug statement so isn't a big deal.", "author": "ayoho", "createdAt": "2020-07-16T22:11:48Z", "path": "dev/com.ibm.ws.security.social/src/com/ibm/ws/security/social/tai/TAIWebUtils.java", "diffHunk": "@@ -189,7 +189,7 @@ String getBearerTokenFromCustomHeaderSegments(HttpServletRequest req, String hea\n         } catch (Exception e) {\n             //can be ignored\n             if (tc.isDebugEnabled()) {\n-                Tr.debug(tc, \"Fail to read Header Segments:\", e);\n+                Tr.debug(tc, \"Fail to read Header Segments:\", e.getMessage());", "originalCommit": "e1d88a95e7d977f9dc3bb5835467736373364df5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEwNzg0NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r456107845", "bodyText": "This one should stay as e since we don't know what kind of Exception we're catching here.", "author": "ayoho", "createdAt": "2020-07-16T22:12:28Z", "path": "dev/com.ibm.ws.security.social/src/com/ibm/ws/security/social/web/EndpointServices.java", "diffHunk": "@@ -106,7 +106,7 @@ void handleSocialLoginRequest(HttpServletRequest request, HttpServletResponse re\n                     doRedirect(request, response, config);\n                 }\n             } catch (Exception e) {\n-                throw new SocialLoginException(\"ERROR_PROCESSING_REDIRECT\", null, new Object[] { e });\n+                throw new SocialLoginException(\"ERROR_PROCESSING_REDIRECT\", null, new Object[] { e.getMessage() });", "originalCommit": "e1d88a95e7d977f9dc3bb5835467736373364df5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e8cec533c4a505d0f60e13226af3630aab71376b", "url": "https://github.com/OpenLiberty/open-liberty/commit/e8cec533c4a505d0f60e13226af3630aab71376b", "message": "fixed a couple of issues in security.social", "committedDate": "2020-07-16T22:20:43Z", "type": "commit"}]}