{"pr_number": 12833, "pr_title": "Port websocket fat", "pr_createdAt": "2020-06-30T04:49:51Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12833", "timeline": [{"oid": "00175661c705d82b3b597b1c3e03c4ed04a1222b", "url": "https://github.com/OpenLiberty/open-liberty/commit/00175661c705d82b3b597b1c3e03c4ed04a1222b", "message": "Updated test to work on Open Liberty\n- Built the test applications in the way open liberty does\n- Updated copyright with the correct open liberty copyrights", "committedDate": "2020-06-30T15:17:40Z", "type": "forcePushed"}, {"oid": "e453933667d8beae65bd100f652d1f73b64a46ac", "url": "https://github.com/OpenLiberty/open-liberty/commit/e453933667d8beae65bd100f652d1f73b64a46ac", "message": "Updated test to work on Open Liberty\n- Built the test applications in the way open liberty does\n- Updated copyright with the correct open liberty copyrights\n- Updated cnf for new jars added to artifactory", "committedDate": "2020-06-30T15:57:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyNjA0Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12833#discussion_r448526043", "bodyText": "Can you just clean up this white space difference ?", "author": "pnicolucci", "createdAt": "2020-07-01T17:53:53Z", "path": "dev/io.openliberty.wsoc.internal_fat/bnd.bnd", "diffHunk": "@@ -0,0 +1,45 @@\n+#*******************************************************************************\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+#*******************************************************************************\n+-include= ~../cnf/resources/bnd/bundle.props\n+bVersion=1.0\n+\n+src:\\\n+    fat/src,\\\n+    test-applications/basic.jar/src,\\\n+    test-applications/basic.war/src,\\\n+\ttest-applications/websocket11.war/src\n+", "originalCommit": "e453933667d8beae65bd100f652d1f73b64a46ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYzMTczMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12833#discussion_r448631731", "bodyText": "Sounds good, Ill make the change", "author": "isaacrivriv", "createdAt": "2020-07-01T21:43:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyNjA0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyNzI5Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12833#discussion_r448527296", "bodyText": "Is this necessary? I think we get junit for free for any FAT buckets, or is there something specific here for the websocket tests?", "author": "pnicolucci", "createdAt": "2020-07-01T17:56:08Z", "path": "dev/io.openliberty.wsoc.internal_fat/build.gradle", "diffHunk": "@@ -0,0 +1,43 @@\n+/*******************************************************************************\n+* Copyright (c) 2020 IBM Corporation and others.\n+* All rights reserved. This program and the accompanying materials\n+* are made available under the terms of the Eclipse Public License v1.0\n+* which accompanies this distribution, and is available at\n+* http://www.eclipse.org/legal/epl-v10.html\n+*\n+* Contributors:\n+*     IBM Corporation - initial API and implementation\n+*******************************************************************************/\n+\n+dependencies {\n+  requiredLibs 'net.sf.jtidy:jtidy:9.3.8',\n+    'org.eclipse.jetty.websocket:websocket-client:9.2.2.v20140723',\n+    'org.eclipse.jetty.websocket:websocket-api:9.2.2.v20140723',\n+    'org.eclipse.jetty.websocket:websocket-common:9.2.2.v20140723',\n+    'javax.websocket:javax.websocket-api:1.0',\n+    'commons-codec:commons-codec:1.11',\n+    'org.eclipse.jetty.websocket:javax-websocket-client-impl:9.2.2.v20140723',\n+    'org.eclipse.jetty:jetty-io:9.2.2.v20140723',\n+    'org.eclipse.jetty:jetty-util:9.2.2.v20140723',\n+    'org.apache.httpcomponents:httpclient:4.5.4',\n+    'commons-logging:commons-logging:1.1.3'\n+}\n+\n+addRequiredLibraries {\n+  doLast {\n+    // Define dependency groups\n+    configurations {\n+      junit\n+    }\n+    // Define G:A:V coordinates of each dependency\n+    dependencies {\n+      junit 'junit:junit:4.12'\n+    }\n+    // Copy the dependencies wherever they may be needed\n+    copy {\n+      // Copy junit jars into a specific folder so they can be referenced\n+      from configurations.junit\n+      into \"${buildDir}/autoFVT/test-applications/basic.war/resources/WEB-INF/lib\"\n+    }", "originalCommit": "e453933667d8beae65bd100f652d1f73b64a46ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYzMjkxMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12833#discussion_r448632912", "bodyText": "Yeah so we do get the junit file for free but inside the war app itself it needs the jar for some assertions it makes and other junit related functions. In CL it was already in the folder but we can't have that in OL so I removed it and add it when building the project and later the app gets build with it. If I just remove it the test fail with a class not found exception", "author": "isaacrivriv", "createdAt": "2020-07-01T21:45:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUyNzI5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUzMjk3OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12833#discussion_r448532978", "bodyText": "do we actually need jsp/el/servlet here?", "author": "pnicolucci", "createdAt": "2020-07-01T18:07:14Z", "path": "dev/io.openliberty.wsoc.internal_fat/bnd.bnd", "diffHunk": "@@ -0,0 +1,45 @@\n+#*******************************************************************************\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+#*******************************************************************************\n+-include= ~../cnf/resources/bnd/bundle.props\n+bVersion=1.0\n+\n+src:\\\n+    fat/src,\\\n+    test-applications/basic.jar/src,\\\n+    test-applications/basic.war/src,\\\n+\ttest-applications/websocket11.war/src\n+\n+fat.project: true\n+\n+# Define additional tested features that are NOT present any any XML files in this bucket.\n+#tested.features:\\\n+\n+\n+-buildpath: \\\n+    com.ibm.ws.junit.extensions;version=latest,\\\n+    com.ibm.ws.common.encoder;version=latest,\\\n+    com.ibm.websphere.javaee.ejb.3.1;version=latest,\\\n+    com.ibm.websphere.javaee.cdi.1.0;version=latest,\\\n+    com.ibm.websphere.javaee.servlet.3.1;version=latest,\\\n+    com.ibm.websphere.javaee.el.3.0;version=latest,\\\n+    com.ibm.websphere.javaee.jsp.2.3;version=latest,\\\n+    com.ibm.ws.jsp.2.3;version=latest,\\", "originalCommit": "e453933667d8beae65bd100f652d1f73b64a46ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYzMzM5Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12833#discussion_r448633392", "bodyText": "I was basing myself on what was included in the classpath of the wsoc test in CL. I tried leaving them out but got some errors about class not found exceptions. Ill try again to see if I run into the same errors", "author": "isaacrivriv", "createdAt": "2020-07-01T21:47:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUzMjk3OA=="}], "type": "inlineReview"}, {"oid": "efc1570192bc4304bc7b9174fc50b4b8a04a99b7", "url": "https://github.com/OpenLiberty/open-liberty/commit/efc1570192bc4304bc7b9174fc50b4b8a04a99b7", "message": "Initial port from Websphere Liberty to Open Liberty", "committedDate": "2020-07-02T16:33:22Z", "type": "commit"}, {"oid": "4c43bfe4de115dddce2a188fe2e54cd3742e0eca", "url": "https://github.com/OpenLiberty/open-liberty/commit/4c43bfe4de115dddce2a188fe2e54cd3742e0eca", "message": "Updated test to work on Open Liberty\n- Built the test applications in the way open liberty does\n- Updated copyright with the correct open liberty copyrights\n- Updated cnf for new jars added to artifactory", "committedDate": "2020-07-02T16:33:22Z", "type": "commit"}, {"oid": "4810fd77fe26473f650864c01b0636a6e40954a5", "url": "https://github.com/OpenLiberty/open-liberty/commit/4810fd77fe26473f650864c01b0636a6e40954a5", "message": "Made requested changes to spacing and build clean up", "committedDate": "2020-07-02T16:33:22Z", "type": "commit"}, {"oid": "4810fd77fe26473f650864c01b0636a6e40954a5", "url": "https://github.com/OpenLiberty/open-liberty/commit/4810fd77fe26473f650864c01b0636a6e40954a5", "message": "Made requested changes to spacing and build clean up", "committedDate": "2020-07-02T16:33:22Z", "type": "forcePushed"}]}