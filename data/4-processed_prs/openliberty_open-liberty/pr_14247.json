{"pr_number": 14247, "pr_title": "Issue #14198: Transform passwordUtilities-1.0 feature so it works wit\u2026", "pr_createdAt": "2020-09-30T18:52:55Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14247", "timeline": [{"oid": "088d64f5a62585f90797da1c3a17df3cf53f10b1", "url": "https://github.com/OpenLiberty/open-liberty/commit/088d64f5a62585f90797da1c3a17df3cf53f10b1", "message": "Issue #14198: Transform passwordUtilities-1.0 feature so it works with JakartaEE 9.", "committedDate": "2020-10-01T15:30:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkxNzI0NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r498917245", "bodyText": "Previously this only depended on the API feature and not the public feature.  So this should be io.openliberty.jakarta.connectors.", "author": "jhanders34", "createdAt": "2020-10-02T16:12:53Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.autoPasswordUtilities1.0.jakarta.feature", "diffHunk": "@@ -0,0 +1,14 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.autoPasswordUtilities1.0.jakarta\n+IBM-Provision-Capability: \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=com.ibm.websphere.appserver.passwordUtilities-1.0))\", \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=com.ibm.websphere.appserver.servlet-5.0))\"\n+IBM-Install-Policy: when-satisfied\n+-features=\\\n+ com.ibm.websphere.appserver.authData-2.0, \\\n+ io.openliberty.appSecurity-4.0, \\\n+ io.openliberty.appserver.connectors-2.0, \\", "originalCommit": "088d64f5a62585f90797da1c3a17df3cf53f10b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTAzMjcyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r499032727", "bodyText": "We want to use the protected io.openliberty.appserver.connectors-2.0 feature since it is the equivalent to the protected com.ibm.websphere.appserver.javax.connector-1.6/7 features used for java EE.", "author": "jvanhill", "createdAt": "2020-10-02T20:20:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkxNzI0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyMjQxMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r498922411", "bodyText": "Is this supposed to be commented out?", "author": "jhanders34", "createdAt": "2020-10-02T16:22:52Z", "path": "dev/com.ibm.websphere.security_fat.1/bnd.bnd", "diffHunk": "@@ -0,0 +1,37 @@\n+#*******************************************************************************\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+#\n+#*******************************************************************************\n+-include= ~../cnf/resources/bnd/bundle.props\n+bVersion=1.0\n+\n+src: \\\n+  fat/src,\\\n+  test-applications/WebsphereUserRegistry/src,\\\n+  test-applications/PasswordUtilAPI/src\n+\n+fat.project: true\n+\n+#tested.features: el-4.0, appsecurity-4.0, servlet-5.0, cdi-3.0, jsp-3.0, jaxb-3.0, jaspic-2.0, jacc-2.0", "originalCommit": "088d64f5a62585f90797da1c3a17df3cf53f10b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTAxNTEwOQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r499015109", "bodyText": "I can remove it. I had left it in expecting to have to put some in here, but for some reason it didn't require me to. Not quite sure why that is, b/c I can see it using some of the Jakarta features.", "author": "jvanhill", "createdAt": "2020-10-02T19:38:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyMjQxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyNjY2OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r498926669", "bodyText": "Should this say WAS or should it say Liberty?", "author": "jhanders34", "createdAt": "2020-10-02T16:31:18Z", "path": "dev/wlp-jakartaee-transform/rules/jakarta-bundles.properties", "diffHunk": "@@ -15,3 +15,4 @@ com.ibm.ws.security.authorization.jacc.ejb=io.openliberty.security.authorization\n com.ibm.ws.security.authorization.jacc.web=io.openliberty.security.authorization.internal.jacc.web,,\"Security Web support for JACC 2.0 Service\",\"Security Web support for JACC 2.0 Service\"\n com.ibm.websphere.appserver.api.jacc=io.openliberty.jacc.2.0,,\"JACC Service Provider Interface\",\"JACC Service Provider Interface, version 2.0\"\n com.ibm.ws.security.authentication.filter=io.openliberty.security.authentication.internal.filter,,\"Security Authentication filter\",\"Security Authentication filter\"\n+com.ibm.ws.security.auth.data=io.openliberty.security.auth.internal.data,,\"WAS Security Auth Data APIs\",\"WAS Security Auth Data APIs; Jakarta Enabled\"", "originalCommit": "088d64f5a62585f90797da1c3a17df3cf53f10b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTAzMjEzMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r499032132", "bodyText": "Removed \"WAS\" so that it reads \"Security Auth...\"", "author": "jvanhill", "createdAt": "2020-10-02T20:19:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyNjY2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyODI3Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r498928276", "bodyText": "Can you make this file and symbolic name be io.openliberty instead of com.ibm.websphere.appserver?", "author": "jhanders34", "createdAt": "2020-10-02T16:34:28Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/com.ibm.websphere.appserver.authData-2.0.feature", "diffHunk": "@@ -0,0 +1,12 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props", "originalCommit": "088d64f5a62585f90797da1c3a17df3cf53f10b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTAxNjI3OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r499016279", "bodyText": "I did originally name this one and the 1.0 with the io.openliberty prefix, but the build complained that some APIs were missing from the removed 1.0 feature. I talked to @tjwatson, and he said I could get around it by going to WS-CD-Open and changing some stuff over there and coming back and delivering this after, but to be honest, that seemed like a pain to simply rename a private feature and I didn't want the two version of the feature to have different long names.", "author": "jvanhill", "createdAt": "2020-10-02T19:40:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyODI3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTAxOTE1Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r499019152", "bodyText": "furthermore, you cannot have the two features use different names because then they would not collide with each other as singletons.", "author": "tjwatson", "createdAt": "2020-10-02T19:47:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyODI3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTEwOTA2MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r499109060", "bodyText": "Technically they do not need to be singletons, but am ok if this doesn't end up happening.", "author": "jhanders34", "createdAt": "2020-10-03T02:47:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkyODI3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkzMTk0MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r498931940", "bodyText": "This should be moved to the auto feature and the com.ibm.websphere.appserver.api.authData bundle should be transformed to have a jakarta version.  The transformed one would be in the jakarta auto feature of course.  Yeah I know the pom will be wrong, but that is something to be fixed later.", "author": "jhanders34", "createdAt": "2020-10-02T16:41:47Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/passwordUtilities-1.0/com.ibm.websphere.appserver.passwordUtilities-1.0.feature", "diffHunk": "@@ -2,18 +2,18 @@\n symbolicName=com.ibm.websphere.appserver.passwordUtilities-1.0\n visibility=public\n IBM-ShortName: passwordUtilities-1.0\n-IBM-API-Package: com.ibm.websphere.security.jca; type=\"ibm-api\", \\\n+IBM-API-Package: \\\n+ com.ibm.websphere.security.jca; type=\"ibm-api\", \\\n  com.ibm.websphere.crypto; type=\"ibm-api\", \\\n- com.ibm.websphere.security.auth.data; type=\"ibm-api\",\n+ com.ibm.websphere.security.auth.data; type=\"ibm-api\"\n Subsystem-Name: Password Utilities 1.0\n--features=com.ibm.websphere.appserver.authData-1.0, \\\n- com.ibm.websphere.appserver.appSecurity-1.0; ibm.tolerates:=\"2.0, 3.0\", \\\n- com.ibm.websphere.appserver.javax.connector-1.6; ibm.tolerates:=1.7, \\\n- com.ibm.websphere.appserver.servlet-3.0; ibm.tolerates:=\"3.1, 4.0\", \\\n- com.ibm.websphere.appserver.transaction-1.1; ibm.tolerates:=1.2\n--jars=com.ibm.websphere.appserver.api.authData; location:=dev/api/ibm/, \\\n+-features=\\\n+ com.ibm.websphere.appserver.servlet-3.0; ibm.tolerates:=\"3.1, 4.0, 5.0\"\n+-jars=\\\n+ com.ibm.websphere.appserver.api.authData; location:=dev/api/ibm/, \\", "originalCommit": "088d64f5a62585f90797da1c3a17df3cf53f10b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA1MDU0NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r499050544", "bodyText": "Agreed. Made the changes.", "author": "jvanhill", "createdAt": "2020-10-02T21:06:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkzMTk0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkzMjUyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r498932521", "bodyText": "Similar to the bundle the javadoc should be moved to the auto feature and a jakarta one created if we do that.  Not sure if we do yet.  If not maybe it can remain here for now.", "author": "jhanders34", "createdAt": "2020-10-02T16:43:01Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/passwordUtilities-1.0/com.ibm.websphere.appserver.passwordUtilities-1.0.feature", "diffHunk": "@@ -2,18 +2,18 @@\n symbolicName=com.ibm.websphere.appserver.passwordUtilities-1.0\n visibility=public\n IBM-ShortName: passwordUtilities-1.0\n-IBM-API-Package: com.ibm.websphere.security.jca; type=\"ibm-api\", \\\n+IBM-API-Package: \\\n+ com.ibm.websphere.security.jca; type=\"ibm-api\", \\\n  com.ibm.websphere.crypto; type=\"ibm-api\", \\\n- com.ibm.websphere.security.auth.data; type=\"ibm-api\",\n+ com.ibm.websphere.security.auth.data; type=\"ibm-api\"\n Subsystem-Name: Password Utilities 1.0\n--features=com.ibm.websphere.appserver.authData-1.0, \\\n- com.ibm.websphere.appserver.appSecurity-1.0; ibm.tolerates:=\"2.0, 3.0\", \\\n- com.ibm.websphere.appserver.javax.connector-1.6; ibm.tolerates:=1.7, \\\n- com.ibm.websphere.appserver.servlet-3.0; ibm.tolerates:=\"3.1, 4.0\", \\\n- com.ibm.websphere.appserver.transaction-1.1; ibm.tolerates:=1.2\n--jars=com.ibm.websphere.appserver.api.authData; location:=dev/api/ibm/, \\\n+-features=\\\n+ com.ibm.websphere.appserver.servlet-3.0; ibm.tolerates:=\"3.1, 4.0, 5.0\"\n+-jars=\\\n+ com.ibm.websphere.appserver.api.authData; location:=dev/api/ibm/, \\\n  com.ibm.websphere.appserver.api.passwordUtil; location:=dev/api/ibm/\n--files=dev/api/ibm/javadoc/com.ibm.websphere.appserver.api.authData_1.0-javadoc.zip, \\\n+-files=\\\n+ dev/api/ibm/javadoc/com.ibm.websphere.appserver.api.authData_1.0-javadoc.zip, \\", "originalCommit": "088d64f5a62585f90797da1c3a17df3cf53f10b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA1MDc3MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14247#discussion_r499050771", "bodyText": "We don't create the javadoc jar yet for Jakarta, but I removed the javadoc file for authData from here and put it in both auto features. We can update the jakarta autoFeature when we do create it.", "author": "jvanhill", "createdAt": "2020-10-02T21:07:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODkzMjUyMQ=="}], "type": "inlineReview"}, {"oid": "eb02b185ab672d4909d0e359983ebf95df2bff22", "url": "https://github.com/OpenLiberty/open-liberty/commit/eb02b185ab672d4909d0e359983ebf95df2bff22", "message": "Issue #14198: Transform passwordUtilities-1.0 feature so it works with JakartaEE 9.", "committedDate": "2020-10-02T22:55:45Z", "type": "commit"}, {"oid": "eb02b185ab672d4909d0e359983ebf95df2bff22", "url": "https://github.com/OpenLiberty/open-liberty/commit/eb02b185ab672d4909d0e359983ebf95df2bff22", "message": "Issue #14198: Transform passwordUtilities-1.0 feature so it works with JakartaEE 9.", "committedDate": "2020-10-02T22:55:45Z", "type": "forcePushed"}]}