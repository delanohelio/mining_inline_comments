{"pr_number": 15160, "pr_title": "Add expandLocation attribute for AutoExpand", "pr_createdAt": "2020-12-02T17:29:09Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/15160", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM5MjI5OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15160#discussion_r534392298", "bodyText": "The target directory needs to be set in 'modified()' too.. Given that this method is already calling modified it's probably best to move most of the activate method into the modified method", "author": "brenthdaniel", "createdAt": "2020-12-02T18:33:20Z", "path": "dev/com.ibm.ws.app.manager/src/com/ibm/ws/app/manager/ApplicationManager.java", "diffHunk": "@@ -113,6 +114,9 @@ protected void modified(ComponentContext compcontext, Map<String, Object> proper\n         setStopTimeout(stopTimeoutValue);\n         ApplicationStateCoordinator.setApplicationStartTimeout(startTimeoutValue);\n         ApplicationStateCoordinator.setApplicationStopTimeout(stopTimeoutValue);\n+\n+        String targetExpandDir = (String) properties.get(\"targetDir\");\n+        setTargetDir(targetExpandDir);", "originalCommit": "da6337e5044a3c136b7c2b9ee10798304d9b89a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM5MzE5MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15160#discussion_r534393190", "bodyText": "Use a default value here (equal to the current constant that we use for the expanded apps dir) so that you can get rid of all the null checking", "author": "brenthdaniel", "createdAt": "2020-12-02T18:34:43Z", "path": "dev/com.ibm.ws.app.manager/resources/OSGI-INF/metatype/metatype.xml", "diffHunk": "@@ -48,6 +48,7 @@\n \t\t<AD id=\"useJandex\" name=\"%appmgmt.useJandex\" description=\"%appmgmt.useJandex.desc\" required=\"false\" type=\"Boolean\"/>\n \t\t<AD id=\"startTimeout\" name=\"%appmgmt.startTimeout\" description=\"%appmgmt.startTimeout.desc\" required=\"false\" type=\"String\" default=\"30s\" ibm:type=\"duration(s)\" />\n \t\t<AD id=\"stopTimeout\" name=\"%appmgmt.stopTimeout\" description=\"%appmgmt.stopTimeout.desc\" required=\"false\" type=\"String\" default=\"30s\" ibm:type=\"duration(s)\" />\n+\t\t<AD id=\"targetDir\" name=\"%appmgmt.targetDir\" description=\"%appmgmt.targetDir.desc\" required=\"false\" type=\"String\" />", "originalCommit": "da6337e5044a3c136b7c2b9ee10798304d9b89a4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0NTE4NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15160#discussion_r535345184", "bodyText": "Added this as default=\"${server.config.dir}/apps/expanded/\"", "author": "hlhoots", "createdAt": "2020-12-03T15:41:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDM5MzE5MA=="}], "type": "inlineReview"}, {"oid": "40ace7f6f26d9b2ce112269abbdcf442efb9e8b5", "url": "https://github.com/OpenLiberty/open-liberty/commit/40ace7f6f26d9b2ce112269abbdcf442efb9e8b5", "message": "Add targetDir to AutoExpand", "committedDate": "2020-12-02T21:32:43Z", "type": "forcePushed"}, {"oid": "daa34f58ec121c9361dc40c3d92b666f63839100", "url": "https://github.com/OpenLiberty/open-liberty/commit/daa34f58ec121c9361dc40c3d92b666f63839100", "message": "Add targetDir to AutoExpand", "committedDate": "2020-12-03T14:20:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM4ODE0OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15160#discussion_r535388148", "bodyText": "Change,\n\"Allows the user to set the location where the autoExpanded application resides. The default location is ${server.config.dir}/apps/expanded/.\"\nto,\n\"The targetDir attribute allows a user to set the location where the autoExpanded application is located. The default location is ${server.config.dir}/apps/expanded/.\"", "author": "ManasiGandhi", "createdAt": "2020-12-03T16:31:50Z", "path": "dev/com.ibm.ws.app.manager/resources/OSGI-INF/l10n/metatype.properties", "diffHunk": "@@ -81,3 +81,6 @@ appmgmt.startAfter.desc=Specifies applications that are required to start before\n \n classloader.name=Classloader\n classloader.desc=Defines the settings for an application classloader.\n+\n+appmgmt.targetDir=Target Expansion Directory\n+appmgmt.targetDir.desc=Allows the user to set the location where the autoExpanded application resides. The default location is ${server.config.dir}/apps/expanded/.", "originalCommit": "daa34f58ec121c9361dc40c3d92b666f63839100", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI4NzkxMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15160#discussion_r536287912", "bodyText": "done.", "author": "hlhoots", "createdAt": "2020-12-04T18:16:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM4ODE0OA=="}], "type": "inlineReview"}, {"oid": "80372b3acd79a39bf72f72651b7c78ced4af9edd", "url": "https://github.com/OpenLiberty/open-liberty/commit/80372b3acd79a39bf72f72651b7c78ced4af9edd", "message": "Add targetDir to AutoExpand", "committedDate": "2020-12-03T16:39:52Z", "type": "forcePushed"}, {"oid": "080270b276858dde983a47d30e1a43d1859fe034", "url": "https://github.com/OpenLiberty/open-liberty/commit/080270b276858dde983a47d30e1a43d1859fe034", "message": "Add targetDir to AutoExpand", "committedDate": "2020-12-03T18:29:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU2Njk5NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15160#discussion_r537566994", "bodyText": "Replace \"allows\" with \"enables\" [\"allows\" confers permission and permission isn't needed here]", "author": "helyarp", "createdAt": "2020-12-07T14:51:33Z", "path": "dev/com.ibm.ws.app.manager/resources/OSGI-INF/l10n/metatype.properties", "diffHunk": "@@ -81,3 +81,6 @@ appmgmt.startAfter.desc=Specifies applications that are required to start before\n \n classloader.name=Classloader\n classloader.desc=Defines the settings for an application classloader.\n+\n+appmgmt.targetDir=Target expansion directory\n+appmgmt.targetDir.desc=The targetDir attribute allows a user to set the location where the autoExpanded application is located. The default location is ${server.config.dir}/apps/expanded/.", "originalCommit": "080270b276858dde983a47d30e1a43d1859fe034", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "433fc59f6b9a7eef54df44ceb53af5bbc82b263d", "url": "https://github.com/OpenLiberty/open-liberty/commit/433fc59f6b9a7eef54df44ceb53af5bbc82b263d", "message": "Add expandLocation to AutoExpand", "committedDate": "2020-12-09T16:56:10Z", "type": "forcePushed"}, {"oid": "4b24abb953bcf3444bdc9d19ba5f69cc197364cf", "url": "https://github.com/OpenLiberty/open-liberty/commit/4b24abb953bcf3444bdc9d19ba5f69cc197364cf", "message": "Add expandLocation to AutoExpand", "committedDate": "2020-12-09T17:00:26Z", "type": "forcePushed"}, {"oid": "05f7e69e913c9c8ab246648411ca178707d11ab6", "url": "https://github.com/OpenLiberty/open-liberty/commit/05f7e69e913c9c8ab246648411ca178707d11ab6", "message": "Add expandLocation to AutoExpand", "committedDate": "2021-01-05T21:21:39Z", "type": "forcePushed"}, {"oid": "8ab7d8ea5de25bc7478f3736e0eca3aff76d123d", "url": "https://github.com/OpenLiberty/open-liberty/commit/8ab7d8ea5de25bc7478f3736e0eca3aff76d123d", "message": "Add expandLocation for AutoExpand", "committedDate": "2021-01-11T21:51:57Z", "type": "commit"}, {"oid": "8ab7d8ea5de25bc7478f3736e0eca3aff76d123d", "url": "https://github.com/OpenLiberty/open-liberty/commit/8ab7d8ea5de25bc7478f3736e0eca3aff76d123d", "message": "Add expandLocation for AutoExpand", "committedDate": "2021-01-11T21:51:57Z", "type": "forcePushed"}]}