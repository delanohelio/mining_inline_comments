{"pr_number": 12414, "pr_title": "Add Jakarata JAX-B 3.0", "pr_createdAt": "2020-05-28T21:32:11Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12414", "timeline": [{"oid": "31406ef6da19b34c4e4384aec03e28916cc1b76f", "url": "https://github.com/OpenLiberty/open-liberty/commit/31406ef6da19b34c4e4384aec03e28916cc1b76f", "message": "add jakarta jaxb-3.0", "committedDate": "2020-05-28T21:33:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE1NzA0OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432157049", "bodyText": "This doesn't make sense.  Why is this feature called jakartaMail-1.6?  Why isn't it called 2.0?  The feature name should be io.openliberty.jakarta.activation.2.0.", "author": "jhanders34", "createdAt": "2020-05-28T22:22:49Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jakartaMail-1.6/com.ibm.websphere.appserver.jakartaMail-1.6.feature", "diffHunk": "@@ -6,6 +6,6 @@ IBM-ShortName: jakartaaMail-1.6\n Subsystem-Version: 1.6\n Subsystem-Name: JakartaMail 1.6\n -bundles=\\\n-  com.ibm.websphere.jakarta.activation.2.0; location:=\"dev/api/spec/,lib/\";mavenCoordinates=\"jakarta.activation:jakarta.activation-api:2.0\"\n+  io.openliberty.activation.2.0; location:=\"dev/api/spec/,lib/\";mavenCoordinates=\"jakarta.activation:jakarta.activation-api:2.0\"", "originalCommit": "a2f8ac308ec251c8166e111c1e0caeee32582286", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ2NTgxMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432465813", "bodyText": "I assume you are going to leave the JakartaMail version alone and let Mike change it to 2.0?", "author": "jhanders34", "createdAt": "2020-05-29T13:00:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE1NzA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU1NDI0Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432554243", "bodyText": "Correct, since he's actively working on the feature I'm going to pass it on to him to update it. @uberskigeek FYI", "author": "neuwerk", "createdAt": "2020-05-29T15:14:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE1NzA0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE1NzI4Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432157287", "bodyText": "Should this feature depend on the activation bundle or the activation feature?", "author": "jhanders34", "createdAt": "2020-05-28T22:23:31Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.jakarta.jaxb-3.0.feature", "diffHunk": "@@ -0,0 +1,18 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.jakarta.jaxb-3.0\n+visibility=private\n+singleton=true\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-Process-Types: client, \\\n+ server\n+Subsystem-Name: Jakarta XML Bindings 3.0\n+-features=\\\n+  com.ibm.websphere.appserver.classloading-1.0\n+-bundles=\\\n+  io.openliberty.jakarta.activation.2.0;  location:=\"dev/api/spec/,lib/\"; mavenCoordinates=\"jakarta.activation:jakarta.activation-api:2.0.0-RC3\", \\", "originalCommit": "a2f8ac308ec251c8166e111c1e0caeee32582286", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE1NzcwNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432157705", "bodyText": "This feature should have a dependency on the eeCompatible-9.0 feature.", "author": "jhanders34", "createdAt": "2020-05-28T22:24:43Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jaxb-3.0/io.openliberty.jaxb-3.0.feature", "diffHunk": "@@ -0,0 +1,30 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.jaxb-3.0\n+visibility=public\n+singleton=true\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-API-Package: \\\n+  jakarta.activation; type=\"spec\", \\\n+  jakarta.xml.bind;  type=\"spec\", \\\n+  jakarta.xml.bind.annotation;  type=\"spec\", \\\n+  jakarta.xml.bind.annotation.adapters;  type=\"spec\", \\\n+  jakarta.xml.bind.attachment;  type=\"spec\", \\\n+  jakarta.xml.bind.helpers;  type=\"spec\", \\\n+  jakarta.xml.bind.util;  type=\"spec\"\n+IBM-ShortName: jaxb-3.0\n+IBM-Process-Types: client, \\\n+ server\n+Subsystem-Name: Jakarta XML Bindings 3.0\n+-features=\\\n+  com.ibm.websphere.appserver.classloading-1.0, \\\n+  io.openliberty.jakarta.jaxb-3.0", "originalCommit": "a2f8ac308ec251c8166e111c1e0caeee32582286", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2MDU5Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432160597", "bodyText": "Should this project be io.openliberty.jaxb.3.0.internal.tools ?", "author": "jhanders34", "createdAt": "2020-05-28T22:33:02Z", "path": "dev/com.ibm.ws.jaxb.3.0.tools/.classpath", "diffHunk": "@@ -0,0 +1,7 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "originalCommit": "a2f8ac308ec251c8166e111c1e0caeee32582286", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2MTQ0NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432161444", "bodyText": "openliberty is spelled wrong here.", "author": "jhanders34", "createdAt": "2020-05-28T22:35:36Z", "path": "dev/com.ibm.ws.jaxb.3.0.tools/jaxb_xjc.bnd", "diffHunk": "@@ -0,0 +1,23 @@\n+#*******************************************************************************\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+#*******************************************************************************\n+-include= ~../cnf/resources/bnd/cmdline-subdir.props\n+bVersion=1.0\n+\n+\n+Bundle-Name: IBM JAXB XJC Tool\n+\n+Require-Compiler: true\n+\n+Require-Bundle: com.ibm.ws.jaxb.tools.3.0; version=\"[1,1.0.100)\", \\\n+ io.openlibert.jakarta.jaxb.3.0; version=\"[1,1.0.100)\"; location=\"dev/api/spec/\", \\ \\", "originalCommit": "a2f8ac308ec251c8166e111c1e0caeee32582286", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2NDgzOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432164838", "bodyText": "I thought this happened automatically with the EE9Actiion.", "author": "jhanders34", "createdAt": "2020-05-28T22:46:02Z", "path": "dev/com.ibm.ws.jaxb_fat/fat/src/com/ibm/ws/jaxb/fat/LibertyJAXBTest.java", "diffHunk": "@@ -35,6 +38,10 @@\n     @BeforeClass\n     public static void setUp() throws Exception {\n         ShrinkHelper.defaultDropinApp(server, APP_NAME, \"jaxb.web\");\n+        if (JakartaEE9Action.isActive()) {\n+            server.changeFeatures(Arrays.asList(\"jaxb-3.0\", \"servlet-5.0\", \"componenttest-2.0\"));", "originalCommit": "a2f8ac308ec251c8166e111c1e0caeee32582286", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ1NzI1Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432457253", "bodyText": "The EE9_FEATURES_ARRAY array in JakartaEE9Action doesn't have jaxb-3.0 listed in it.  I am thinking that needs to be updated for this PR.", "author": "jhanders34", "createdAt": "2020-05-29T12:44:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2NDgzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2NjAzMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432166033", "bodyText": "Shouldn't the deletion of the com.ibm.websphere.jakarta.activation.2.0 component be part of this PR?", "author": "jhanders34", "createdAt": "2020-05-28T22:49:53Z", "path": "dev/io.openliberty.jakarta.activation.2.0/.classpath", "diffHunk": "@@ -0,0 +1,6 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "originalCommit": "a2f8ac308ec251c8166e111c1e0caeee32582286", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ1NTUyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432455527", "bodyText": "This should be io.openliberty not io.open", "author": "jhanders34", "createdAt": "2020-05-29T12:40:36Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.jakarta.jaxb-3.0.feature", "diffHunk": "@@ -0,0 +1,18 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.jakarta.jaxb-3.0\n+visibility=private\n+singleton=true\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-Process-Types: client, \\\n+ server\n+Subsystem-Name: Jakarta XML Bindings 3.0\n+-features=\\\n+  com.ibm.websphere.appserver.classloading-1.0, \\\n+  io.openliberty.jakarta.activation-2.0\n+-bundles=\\\n+  io.openliberty.jakarta.jaxb.3.0; location:=\"dev/api/spec/,lib/\"; mavenCoordinates=\"jakarta.xml.bind:jakarta.xml.bind-api:3.0.0-RC3\", \\\n+  io.open.jaxb.3.0.internal.tools", "originalCommit": "c872a9b4bd270db4004a962a04de4e7d9d29620f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ2MDk1MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432460951", "bodyText": "Shouldn't the io.openliberty.jaxb.3.0.internal.tools bundle be in the public jaxb-3.0 feature instead of this feature?", "author": "jhanders34", "createdAt": "2020-05-29T12:51:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ1NTUyNw=="}], "type": "inlineReview"}, {"oid": "e73130b1493ba612f38cdd424881ae5e377b2d84", "url": "https://github.com/OpenLiberty/open-liberty/commit/e73130b1493ba612f38cdd424881ae5e377b2d84", "message": "add jakarta jaxb-3.0", "committedDate": "2020-05-29T16:29:22Z", "type": "commit"}, {"oid": "c50ff8bb8fff1fd5432586e8466a17aad15e16d7", "url": "https://github.com/OpenLiberty/open-liberty/commit/c50ff8bb8fff1fd5432586e8466a17aad15e16d7", "message": "fix some missed renames", "committedDate": "2020-05-29T16:29:23Z", "type": "commit"}, {"oid": "1a83e9ae00375a4a6400459e9fabb6abee7e1fb0", "url": "https://github.com/OpenLiberty/open-liberty/commit/1a83e9ae00375a4a6400459e9fabb6abee7e1fb0", "message": "Code review Changes", "committedDate": "2020-05-29T16:29:23Z", "type": "commit"}, {"oid": "98b5354da688f1e1600d7cda161604f940897dcb", "url": "https://github.com/OpenLiberty/open-liberty/commit/98b5354da688f1e1600d7cda161604f940897dcb", "message": "Add more code review changes", "committedDate": "2020-05-29T16:29:23Z", "type": "commit"}, {"oid": "d8080e9507408c60a40e6c0d4db8e3fbfd60ac70", "url": "https://github.com/OpenLiberty/open-liberty/commit/d8080e9507408c60a40e6c0d4db8e3fbfd60ac70", "message": "rename old com.ibm.ws packages to new io.openliberty", "committedDate": "2020-05-29T16:29:24Z", "type": "commit"}, {"oid": "d8080e9507408c60a40e6c0d4db8e3fbfd60ac70", "url": "https://github.com/OpenLiberty/open-liberty/commit/d8080e9507408c60a40e6c0d4db8e3fbfd60ac70", "message": "rename old com.ibm.ws packages to new io.openliberty", "committedDate": "2020-05-29T16:29:24Z", "type": "forcePushed"}, {"oid": "88f3ac38c8fc996e955488ba1b39b2c6fb414a58", "url": "https://github.com/OpenLiberty/open-liberty/commit/88f3ac38c8fc996e955488ba1b39b2c6fb414a58", "message": "Add more review updates", "committedDate": "2020-05-29T19:17:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc0NzE4Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432747182", "bodyText": "Having this extra space is bad", "author": "jhanders34", "createdAt": "2020-05-29T21:38:30Z", "path": "dev/io.openliberty.jaxb.3.0.internal.tools/bnd.bnd", "diffHunk": "@@ -35,7 +35,7 @@ Import-Package: \\\n   jakarta.xml.bind.*; version=\"[3.0,4.0]\", \\\n   com.sun.xml.tools.*, \\\n   com.ibm.wsspi.classloading, \\\n-  org.apache.xml.*; resolution:=optional, \\\n+  org.apache.xml.*; resolution:=optional, \\ ", "originalCommit": "88f3ac38c8fc996e955488ba1b39b2c6fb414a58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc1NTY1Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432755656", "bodyText": "You changed the name here, but you did not change the file directory structure in the resources directory.", "author": "jhanders34", "createdAt": "2020-05-29T21:51:39Z", "path": "dev/io.openliberty.jaxb.3.0.internal.tools/src/io/openliberty/jaxb/tools/internal/JaxbToolsConstants.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package io.openliberty.jaxb.tools.internal;\n+\n+import java.util.ResourceBundle;\n+\n+public class JaxbToolsConstants {\n+    public static final String PARAM_HELP = \"-help\";\n+\n+    public static final String PARAM_VERSION = \"-version\";\n+\n+    public static final String PARAM_TARGET = \"-target\";\n+\n+    public static final String TR_GROUP = \"JaxbTools\";\n+\n+    public static final String TR_RESOURCE_BUNDLE = \"io.openliberty.jaxb.tools.internal.resources.JaxbToolsMessages\";", "originalCommit": "88f3ac38c8fc996e955488ba1b39b2c6fb414a58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc1NTk2OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432755969", "bodyText": "The CMVCPATHNAME should change for all of these.", "author": "jhanders34", "createdAt": "2020-05-29T21:52:40Z", "path": "dev/io.openliberty.jaxb.3.0.internal.tools/resources/com/ibm/ws/jaxb/tools/internal/resources/JaxbToolsMessages.nlsprops", "diffHunk": "@@ -0,0 +1,25 @@\n+###############################################################################\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+###############################################################################\n+\n+# NLS_MESSAGEFORMAT_ALL\n+#\n+#CMVCPATHNAME com.ibm.ws.jaxws.ejb/resources/com/ibm/ws/jaxb/tools/internal/resources/JaxbToolsMessages.nlsprops", "originalCommit": "88f3ac38c8fc996e955488ba1b39b2c6fb414a58", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc2MTQwMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432761402", "bodyText": "Ah, I thought # made them a comment but I'll update them.", "author": "neuwerk", "createdAt": "2020-05-29T22:08:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc1NTk2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg0MzM0NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432843344", "bodyText": "It does make them a comment.  But it doesn't mean you shouldn't update it to be accurate.  I see that you have done so.  Marking it resolved.", "author": "jhanders34", "createdAt": "2020-05-30T13:53:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjc1NTk2OQ=="}], "type": "inlineReview"}, {"oid": "ee0df4985e926d723c87b5fb494612734fbeb7c0", "url": "https://github.com/OpenLiberty/open-liberty/commit/ee0df4985e926d723c87b5fb494612734fbeb7c0", "message": "More code review updates", "committedDate": "2020-05-29T22:13:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg3NTk2MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12414#discussion_r432875960", "bodyText": "I guess I am still struggling with how ws-schemagen.jakarta.jar and ws-xjc.jakarta.jar get created.  Also how there is a Java EE version and a Jakarta EE version.  How does the scripts know which one to use.  Didn't see any script stuff.  So part of why I am so confused.  Some of it has to do with I don't understand how the bnd files in io.openliberty.jaxb.3.0.internal.tools are used.", "author": "jhanders34", "createdAt": "2020-05-30T18:20:41Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jaxb-3.0/io.openliberty.jaxb-3.0.feature", "diffHunk": "@@ -0,0 +1,33 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.jaxb-3.0\n+visibility=public\n+singleton=true\n+IBM-App-ForceRestart: uninstall, \\\n+ install\n+IBM-API-Package: \\\n+  jakarta.activation; type=\"spec\", \\\n+  jakarta.xml.bind;  type=\"spec\", \\\n+  jakarta.xml.bind.annotation;  type=\"spec\", \\\n+  jakarta.xml.bind.annotation.adapters;  type=\"spec\", \\\n+  jakarta.xml.bind.attachment;  type=\"spec\", \\\n+  jakarta.xml.bind.helpers;  type=\"spec\", \\\n+  jakarta.xml.bind.util;  type=\"spec\"\n+IBM-ShortName: jaxb-3.0\n+IBM-Process-Types: client, \\\n+ server\n+Subsystem-Name: Jakarta XML Bindings 3.0\n+-features=\\\n+  com.ibm.websphere.appserver.classloading-1.0, \\\n+  com.ibm.websphere.appserver.eeCompatible-9.0, \\\n+  io.openliberty.jakarta.jaxb-3.0\n+-bundles=\\\n+  io.openliberty.jaxb.3.0.internal.tools\n+-files=\\\n+  bin/jaxb/xjc.bat, \\\n+  bin/jaxb/tools/ws-schemagen.jakarta.jar, \\", "originalCommit": "ee0df4985e926d723c87b5fb494612734fbeb7c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8480ddb89d29739ffaab1dd44754184164bd25e8", "url": "https://github.com/OpenLiberty/open-liberty/commit/8480ddb89d29739ffaab1dd44754184164bd25e8", "message": "Update feature to remove external files for now", "committedDate": "2020-06-01T16:10:36Z", "type": "commit"}, {"oid": "8dfcb77c85d237a196e00566836bf99fb63a411d", "url": "https://github.com/OpenLiberty/open-liberty/commit/8dfcb77c85d237a196e00566836bf99fb63a411d", "message": "Update bundle due to import failures in PB", "committedDate": "2020-06-02T02:20:41Z", "type": "commit"}]}