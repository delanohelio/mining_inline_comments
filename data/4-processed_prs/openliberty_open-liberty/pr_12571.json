{"pr_number": 12571, "pr_title": "Initial prototype of kerberos FAT", "pr_createdAt": "2020-06-11T04:06:19Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12571", "timeline": [{"oid": "3614eca54fedf63bee3a21aa5da13adf4070bafe", "url": "https://github.com/OpenLiberty/open-liberty/commit/3614eca54fedf63bee3a21aa5da13adf4070bafe", "message": "Initial version of kerberos FAT bucket", "committedDate": "2020-06-16T15:45:08Z", "type": "commit"}, {"oid": "c4e2c60fd7da1cbd38b5ff6f85554121b73890ad", "url": "https://github.com/OpenLiberty/open-liberty/commit/c4e2c60fd7da1cbd38b5ff6f85554121b73890ad", "message": "Temp hacks to get Liberty working on WSL", "committedDate": "2020-06-16T15:47:43Z", "type": "commit"}, {"oid": "3e076488749c0a2831c5714c34306bd5b9dfd49c", "url": "https://github.com/OpenLiberty/open-liberty/commit/3e076488749c0a2831c5714c34306bd5b9dfd49c", "message": "Initial progress on kerberos FAT", "committedDate": "2020-06-16T15:47:45Z", "type": "commit"}, {"oid": "4e3e33d58389d08563e0fd8779698215ec25607b", "url": "https://github.com/OpenLiberty/open-liberty/commit/4e3e33d58389d08563e0fd8779698215ec25607b", "message": "Tolerate running on Mac OS", "committedDate": "2020-06-16T15:47:45Z", "type": "commit"}, {"oid": "2fa914c039f86848013a922c3eaf6005e457783c", "url": "https://github.com/OpenLiberty/open-liberty/commit/2fa914c039f86848013a922c3eaf6005e457783c", "message": "Additional changes need to get successful connection between liberty and kerb", "committedDate": "2020-06-16T15:47:45Z", "type": "forcePushed"}, {"oid": "23fe2284a3860ca01f475ab9a7f610a30688a4f3", "url": "https://github.com/OpenLiberty/open-liberty/commit/23fe2284a3860ca01f475ab9a7f610a30688a4f3", "message": "Additional changes need to get successful connection between liberty and kerb", "committedDate": "2020-06-17T14:28:00Z", "type": "commit"}, {"oid": "23fe2284a3860ca01f475ab9a7f610a30688a4f3", "url": "https://github.com/OpenLiberty/open-liberty/commit/23fe2284a3860ca01f475ab9a7f610a30688a4f3", "message": "Additional changes need to get successful connection between liberty and kerb", "committedDate": "2020-06-17T14:28:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg3Mjk2Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12571#discussion_r442872966", "bodyText": "Is this here as an example of how a user would configure their options?  Or is this just left over from testing?", "author": "KyleAure", "createdAt": "2020-06-19T14:28:47Z", "path": "dev/com.ibm.ws.jdbc_fat_krb5/publish/servers/com.ibm.ws.jdbc.fat.krb5/server.xml", "diffHunk": "@@ -0,0 +1,65 @@\n+<server>\n+  <featureManager>\n+    <feature>componenttest-1.0</feature>\n+    <feature>servlet-4.0</feature>\n+    <feature>jdbc-4.2</feature>\n+    <feature>appSecurity-2.0</feature>\n+    <feature>jca-1.7</feature>\n+    <feature>cdi-2.0</feature>\n+  </featureManager>\n+    \n+  <include location=\"../fatTestPorts.xml\"/>\n+\n+  <webApplication location=\"db2fat.war\">\n+    <application-bnd>\n+      <security-role name=\"Manager\" id=\"Manager\">\n+        <user name=\"user1\"/>\n+      </security-role>\n+      <security-role name=\"Employee\" id=\"Employee\">\n+        <user name=\"user2\"/>\n+      </security-role>\n+    </application-bnd>\n+  </webApplication>\n+    \n+  <library id=\"DB2JCCLib\">\n+    <fileset dir=\"${server.config.dir}/db2\"/>\n+  </library>\n+  \n+  <!-- Dummy lib to satisfy login module config. This will be removed eventually -->\n+  <library id=\"loginLib\">\n+  </library>\n+  \n+  <basicRegistry realm=\"defaultRealm\">\n+    <user password=\"password\" name=\"user1\"/>\n+    <user password=\"password\" name=\"user2\" />\n+  </basicRegistry>\n+  \n+  <!-- Must be named JaasClient for the JCC driver -->\n+  <jaasLoginContextEntry id=\"JaasClient\" name=\"JaasClient\" loginModuleRef=\"krb5LoginModule\" />\n+    <!-- OpenJ9/Hotspot loginModule config -->\n+\t<jaasLoginModule id=\"krb5LoginModule\" className=\"com.sun.security.auth.module.Krb5LoginModule\" controlFlag=\"REQUIRED\" libraryRef=\"loginLib\">\n+    <options credsType=\"both\" useKeyTab=\"true\" keyTab=\"${server.config.dir}/security/krb5.keytab\" principal=\"${KRB5_USER}\" doNotPrompt=\"true\"/>\n+  </jaasLoginModule>\n+  \n+  <!-- IBM Java loginModule config -->\n+  <!-- \n+  <jaasLoginModule id=\"krb5LoginModule\" className=\"com.ibm.security.auth.module.Krb5LoginModule\" controlFlag=\"REQUIRED\" libraryRef=\"loginLib\">\n+    <options credsType=\"both\" useKeytab=\"/etc/krb5.keytab\" principal=\"db2user/websphere@EXAMPLE.COM\"/>", "originalCommit": "23fe2284a3860ca01f475ab9a7f610a30688a4f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg3OTgxNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12571#discussion_r442879817", "bodyText": "This is left as an example that I copied from Mark's repo for now. Which reminds me that this config only works for hotspot/J9, so I need to add a skip for IBM JDK since that will require different config (I'll do a separate PR for that)", "author": "aguibert", "createdAt": "2020-06-19T14:41:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjg3Mjk2Ng=="}], "type": "inlineReview"}, {"oid": "c20dfdc73a96d6276240128486aebe96ffe19de1", "url": "https://github.com/OpenLiberty/open-liberty/commit/c20dfdc73a96d6276240128486aebe96ffe19de1", "message": "Use skip rule for platforms that don't support kerberos", "committedDate": "2020-06-19T18:44:30Z", "type": "commit"}]}