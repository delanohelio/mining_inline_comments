{"pr_number": 12015, "pr_title": "set up Jakarta autofeatures for jdbc", "pr_createdAt": "2020-04-30T21:58:36Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12015", "timeline": [{"oid": "c015aeac3380c8d487ac194fe04ff45b0941698b", "url": "https://github.com/OpenLiberty/open-liberty/commit/c015aeac3380c8d487ac194fe04ff45b0941698b", "message": "Issue #11771 set up Jakarta autofeatures for jdbc", "committedDate": "2020-04-30T21:53:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MDA0NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418470044", "bodyText": "best switch to noship. i know it's an autofeature but it will get flagged up when we release", "author": "tevans78", "createdAt": "2020-05-01T09:02:20Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/com.ibm.websphere.appserver.connectionManagementJavaEE-1.0.feature", "diffHunk": "@@ -0,0 +1,10 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=com.ibm.websphere.appserver.connectionManagementJavaEE-1.0\n+IBM-Provision-Capability:\\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(|(osgi.identity=com.ibm.websphere.appserver.transaction-1.2)(osgi.identity=com.ibm.websphere.appserver.transaction-1.1)))\", \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=com.ibm.websphere.appserver.connectionManagement-1.0))\"\n+IBM-Install-Policy: when-satisfied\n+-features=com.ibm.websphere.appserver.javax.connector.internal-1.6; ibm.tolerates:=1.7\n+-bundles=com.ibm.ws.jca.cm\n+kind=ga", "originalCommit": "c015aeac3380c8d487ac194fe04ff45b0941698b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUzODE2Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418538167", "bodyText": "This is the Java EE autofeature. It would be a breaking change to make in nonship, in which case the existing jdbc, jca, and jms features would become unusable for Java EE.  Hopefully you just misread this as being a Jakarta autofeature.  The change you requested cannot be made.", "author": "njr-11", "createdAt": "2020-05-01T13:22:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MDA0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU1MjIxMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418552211", "bodyText": "OK, fair enough", "author": "tevans78", "createdAt": "2020-05-01T13:57:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MDA0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MDEyMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418470120", "bodyText": "noship please", "author": "tevans78", "createdAt": "2020-05-01T09:02:41Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/com.ibm.websphere.appserver.jdbcJavaEE-1.0.feature", "diffHunk": "@@ -0,0 +1,9 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=com.ibm.websphere.appserver.jdbcJavaEE-1.0\n+IBM-Provision-Capability:\\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(|(osgi.identity=com.ibm.websphere.appserver.transaction-1.2)(osgi.identity=com.ibm.websphere.appserver.transaction-1.1)))\", \\\n+ osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(|(osgi.identity=com.ibm.websphere.appserver.jdbc-4.3)(osgi.identity=com.ibm.websphere.appserver.jdbc-4.2)(osgi.identity=com.ibm.websphere.appserver.jdbc-4.1)(osgi.identity=com.ibm.websphere.appserver.jdbc-4.0)))\"\n+IBM-Install-Policy: when-satisfied\n+-bundles=com.ibm.ws.jdbc\n+kind=ga", "originalCommit": "c015aeac3380c8d487ac194fe04ff45b0941698b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUzODIyOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418538228", "bodyText": "This is the Java EE autofeature. It would be a breaking change to make in nonship, in which case the existing jdbc features would become unusable for Java EE.  Hopefully you just misread this as being a Jakarta autofeature.  The change you requested cannot be made.", "author": "njr-11", "createdAt": "2020-05-01T13:22:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MDEyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU1MjI0NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418552244", "bodyText": "OK, fair enough", "author": "tevans78", "createdAt": "2020-05-01T13:57:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MDEyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MTAyOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418471028", "bodyText": "i know i'm going to regret asking but why do we have a bundle with \".feature\" in it's name? That's a bit misleading isn't it?", "author": "tevans78", "createdAt": "2020-05-01T09:06:07Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/jdbc-4.0/com.ibm.websphere.appserver.jdbc-4.0.feature", "diffHunk": "@@ -5,14 +5,14 @@ singleton=true\n IBM-API-Package: com.ibm.wsspi.zos.tx; type=\"internal\"\n IBM-ShortName: jdbc-4.0\n Subsystem-Name: Java Database Connectivity 4.0\n--features=com.ibm.websphere.appserver.javax.connector.internal-1.6; ibm.tolerates:=1.7, \\\n+-features=\\\n  com.ibm.websphere.appserver.jndi-1.0, \\\n- com.ibm.websphere.appserver.transaction-1.1; ibm.tolerates:=1.2, \\\n+ com.ibm.websphere.appserver.transaction-1.1; ibm.tolerates:=\"1.2, 2.0\", \\\n  com.ibm.websphere.appserver.classloading-1.0, \\\n  com.ibm.websphere.appserver.appLifecycle-1.0, \\\n  com.ibm.websphere.appserver.connectionManagement-1.0, \\\n  com.ibm.websphere.appserver.requestProbes-1.0\n--bundles=com.ibm.ws.jdbc, \\\n+-bundles=\\\n  com.ibm.ws.jdbc.4.0.feature", "originalCommit": "c015aeac3380c8d487ac194fe04ff45b0941698b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU0MDUyMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418540522", "bodyText": "com.ibm.ws.jdbc.4.0.feature is pre-existing code.  I didn't write it, nor did I add/change usage of it under this pull request, so I can only speculate about the naming of it.  My best guess would be that it is named that way because that bundle contains function that is unique to the jdbc-4.0 feature.  Similarly, the com.ibm.ws.jdbc.4.1.feature bundle contains code that is unique to the jdbc-4.1 feature.  The com.ibm.ws.jdbc.4.2.feature bundle contains code that is unique to the jdbc-4.2 feature.  The com.ibm.ws.jdbc.4.3.feature bundle contains code that is unique to the jdbc-4.3 feature.  If you have a proposal for a better name, let's do that under a separate issue/pull. It isn't related to the Jakarta work.", "author": "njr-11", "createdAt": "2020-05-01T13:28:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MTAyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU1NDE3OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418554178", "bodyText": "It is a separate issue, it just struck me as odd when we also have bundles named com.ibm.ws.jdbc, com.ibm.ws.jdbc.4.1, com.ibm.ws.jdbc.4.2, and com.ibm.ws.jdbc.4.3", "author": "tevans78", "createdAt": "2020-05-01T14:02:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MTAyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODU1OTQzOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12015#discussion_r418559438", "bodyText": "Those bundles layer on additional function that is used by, for example, jdbc-4.1 onward.  It's no trivial task arranging the code to maintain compliant implementations of 4 different levels of the same spec at once.", "author": "njr-11", "createdAt": "2020-05-01T14:14:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3MTAyOA=="}], "type": "inlineReview"}, {"oid": "60f3b43296211952b278351ef5bf24913cbcb2fd", "url": "https://github.com/OpenLiberty/open-liberty/commit/60f3b43296211952b278351ef5bf24913cbcb2fd", "message": "Issue #11771 Jakarta updates for jcaSecurity feature", "committedDate": "2020-05-01T20:11:50Z", "type": "commit"}]}