{"pr_number": 14773, "pr_title": "Update to no longer synchronize on Integer objects", "pr_createdAt": "2020-10-30T18:19:25Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14773", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwOTQyOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773#discussion_r515309428", "bodyText": "could this be made a static class to reduce overhead of creating a new ZipFileHandleImpl (same comment applies to other instances of occurrences of non-static private lock classes)", "author": "aguibert", "createdAt": "2020-10-30T18:47:32Z", "path": "dev/com.ibm.ws.artifact.zip/src/com/ibm/ws/artifact/zip/cache/internal/ZipFileHandleImpl.java", "diffHunk": "@@ -88,7 +88,10 @@ public long getLastModified() {\n \n     //\n \n-    private final Integer zipFileLock = new Integer(0);\n+    private class ZipFileLock {", "originalCommit": "6c81ef4c3ef6a1f0f86552676cd6bacf2f4cd6a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMxMTg1OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773#discussion_r515311859", "bodyText": "I just put it back to what it was before, but sure, it makes sense to make them all static.", "author": "jhanders34", "createdAt": "2020-10-30T18:52:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwOTQyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwOTk3NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773#discussion_r515309974", "bodyText": "Why switching to new Object() here? AFAIK the new Object() constructor might be removed in a future Java release, so we should avoid new usages of this.", "author": "aguibert", "createdAt": "2020-10-30T18:48:40Z", "path": "dev/com.ibm.ws.channelfw/src/com/ibm/ws/bytebuffer/internal/WsByteBufferPoolManagerImpl.java", "diffHunk": "@@ -92,7 +92,7 @@\n     private long lastTimeCheck = 0L;\n     private int leakDetectionInterval = -1;\n     private String leakDetectionOutput = null;\n-    private final Integer leakDetectionSyncObject = new Integer(1);\n+    private final Object leakDetectionSyncObject = new Object() {};", "originalCommit": "6c81ef4c3ef6a1f0f86552676cd6bacf2f4cd6a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMxMjYyNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773#discussion_r515312625", "bodyText": "It is making an anonymous class that extends Object.  If that won't work, I can make it a static inner class like in the other classes.  I may have some additional classes to change if we want to remove creating anonymous inner classes that way.", "author": "jhanders34", "createdAt": "2020-10-30T18:54:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwOTk3NA=="}], "type": "inlineReview"}, {"oid": "4a312af6b018704b498119ae979ee7efebd3a2e7", "url": "https://github.com/OpenLiberty/open-liberty/commit/4a312af6b018704b498119ae979ee7efebd3a2e7", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer.", "committedDate": "2020-10-30T18:58:06Z", "type": "forcePushed"}, {"oid": "d6937ab8fe2c32657bd278a147b998fa84680b7e", "url": "https://github.com/OpenLiberty/open-liberty/commit/d6937ab8fe2c32657bd278a147b998fa84680b7e", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer.", "committedDate": "2020-10-30T20:03:01Z", "type": "forcePushed"}, {"oid": "f45aa026aa06d6fbd3fd9ac77c406b8da95e6047", "url": "https://github.com/OpenLiberty/open-liberty/commit/f45aa026aa06d6fbd3fd9ac77c406b8da95e6047", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer.", "committedDate": "2020-10-30T20:55:26Z", "type": "forcePushed"}, {"oid": "d464b21965189038f027dd57e19fbbe54085dc4f", "url": "https://github.com/OpenLiberty/open-liberty/commit/d464b21965189038f027dd57e19fbbe54085dc4f", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer.", "committedDate": "2020-10-30T20:58:41Z", "type": "forcePushed"}, {"oid": "65e88f75e2627c624579673a35f1b51491900fd9", "url": "https://github.com/OpenLiberty/open-liberty/commit/65e88f75e2627c624579673a35f1b51491900fd9", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer.", "committedDate": "2020-11-05T16:26:35Z", "type": "forcePushed"}, {"oid": "3a3f5437b2cd047868829bbfc90ec07306e542f7", "url": "https://github.com/OpenLiberty/open-liberty/commit/3a3f5437b2cd047868829bbfc90ec07306e542f7", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer.", "committedDate": "2021-03-23T10:25:39Z", "type": "commit"}, {"oid": "3a3f5437b2cd047868829bbfc90ec07306e542f7", "url": "https://github.com/OpenLiberty/open-liberty/commit/3a3f5437b2cd047868829bbfc90ec07306e542f7", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer.", "committedDate": "2021-03-23T10:25:39Z", "type": "forcePushed"}]}