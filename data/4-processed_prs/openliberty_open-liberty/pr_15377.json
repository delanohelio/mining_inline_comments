{"pr_number": 15377, "pr_title": "Privatized wsoc features", "pr_createdAt": "2020-12-28T14:04:44Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/15377", "timeline": [{"oid": "5cd3588d4b5620f6fb8f0744a8e20ba05bb6a588", "url": "https://github.com/OpenLiberty/open-liberty/commit/5cd3588d4b5620f6fb8f0744a8e20ba05bb6a588", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2020-12-30T13:30:40Z", "type": "forcePushed"}, {"oid": "540863d576ffb4596f56b69337195ac01e75ca4a", "url": "https://github.com/OpenLiberty/open-liberty/commit/540863d576ffb4596f56b69337195ac01e75ca4a", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-01-06T01:31:23Z", "type": "forcePushed"}, {"oid": "15cce1fc2fd350d4bccf5c9007e386419d9b6530", "url": "https://github.com/OpenLiberty/open-liberty/commit/15cce1fc2fd350d4bccf5c9007e386419d9b6530", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-01-11T20:20:21Z", "type": "forcePushed"}, {"oid": "211dd50b078f3c38a50f3697cfe9d5ed23ad2b9b", "url": "https://github.com/OpenLiberty/open-liberty/commit/211dd50b078f3c38a50f3697cfe9d5ed23ad2b9b", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-01-14T13:41:43Z", "type": "forcePushed"}, {"oid": "3b68d3a3ead7b2ef6c5a1c433d8a8188cfe8394b", "url": "https://github.com/OpenLiberty/open-liberty/commit/3b68d3a3ead7b2ef6c5a1c433d8a8188cfe8394b", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-01-17T06:42:30Z", "type": "forcePushed"}, {"oid": "eeb60b95609c272e36bf55f52b62fa59040bc993", "url": "https://github.com/OpenLiberty/open-liberty/commit/eeb60b95609c272e36bf55f52b62fa59040bc993", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-01-18T17:21:42Z", "type": "forcePushed"}, {"oid": "8173fb2e14d99f58d221f7010c17c810bf696490", "url": "https://github.com/OpenLiberty/open-liberty/commit/8173fb2e14d99f58d221f7010c17c810bf696490", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-01-25T02:17:01Z", "type": "forcePushed"}, {"oid": "0d24d7b2afd1a7be8d7d8b5d857afc7c4c42cc34", "url": "https://github.com/OpenLiberty/open-liberty/commit/0d24d7b2afd1a7be8d7d8b5d857afc7c4c42cc34", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-03-29T16:38:49Z", "type": "forcePushed"}, {"oid": "076938fb023c28a70d2dec3ccb59fc4a2200d4d4", "url": "https://github.com/OpenLiberty/open-liberty/commit/076938fb023c28a70d2dec3ccb59fc4a2200d4d4", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-03-29T16:45:37Z", "type": "forcePushed"}, {"oid": "ecbbe3ee9a85151f58ba9d7e4c988faf61e76abd", "url": "https://github.com/OpenLiberty/open-liberty/commit/ecbbe3ee9a85151f58ba9d7e4c988faf61e76abd", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-06-04T02:29:55Z", "type": "forcePushed"}, {"oid": "36a77c33cecf2c5ce0d76bcef39198e07a9f3467", "url": "https://github.com/OpenLiberty/open-liberty/commit/36a77c33cecf2c5ce0d76bcef39198e07a9f3467", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-06-04T02:48:25Z", "type": "forcePushed"}, {"oid": "7c784b2439c3490246421a646c488e47b1ee8163", "url": "https://github.com/OpenLiberty/open-liberty/commit/7c784b2439c3490246421a646c488e47b1ee8163", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-06-30T14:12:27Z", "type": "forcePushed"}, {"oid": "27e70c50bf153e3ae9fdff2da41e732fc4fe3b0a", "url": "https://github.com/OpenLiberty/open-liberty/commit/27e70c50bf153e3ae9fdff2da41e732fc4fe3b0a", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-07-12T12:31:00Z", "type": "forcePushed"}, {"oid": "fc3672db4cad8798821e2c95a0f1f61c8698ddb3", "url": "https://github.com/OpenLiberty/open-liberty/commit/fc3672db4cad8798821e2c95a0f1f61c8698ddb3", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-07-12T12:35:54Z", "type": "forcePushed"}, {"oid": "1c8561acf1c303eb01e5dae4a31850c4bf739215", "url": "https://github.com/OpenLiberty/open-liberty/commit/1c8561acf1c303eb01e5dae4a31850c4bf739215", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-07-14T16:00:45Z", "type": "commit"}, {"oid": "1c8561acf1c303eb01e5dae4a31850c4bf739215", "url": "https://github.com/OpenLiberty/open-liberty/commit/1c8561acf1c303eb01e5dae4a31850c4bf739215", "message": "Privatized wsoc features\n- Moved api bundles to their own privaate features for wsoc 1 and 1.1\n- Updated other features using the bundle to pull in the private feature instead", "committedDate": "2021-07-14T16:00:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMTEwNA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r670621104", "bodyText": "Why does this one not have WLP-Activation-Type: parallel ?", "author": "pnicolucci", "createdAt": "2021-07-15T16:24:00Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.javaee.websocket-1.0.feature", "diffHunk": "@@ -0,0 +1,8 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.javaee.websocket-1.0\n+WLP-DisableAllFeatures-OnConflict: false\n+singleton=true\n+-features=com.ibm.websphere.appserver.eeCompatible-7.0; ibm.tolerates:=\"6.0, 8.0\"\n+-bundles=com.ibm.websphere.javaee.websocket.1.0; location:=\"dev/api/spec/,lib/\"; mavenCoordinates=\"javax.websocket:javax.websocket-api:1.0\"\n+kind=ga\n+edition=core", "originalCommit": "1c8561acf1c303eb01e5dae4a31850c4bf739215", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDcwMTQwOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r670701408", "bodyText": "This was based off the public feature where the 1.1 included the header but 1.0 didn't. Let me investigate if there was a reason behind this. New features should include the header so we would potentially want to include it here as well if there isn't any conflict with the bundles", "author": "isaacrivriv", "createdAt": "2021-07-15T18:14:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMTEwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjU1NjIxNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r672556215", "bodyText": "Created issue #17894 to verify adding the header to the feature", "author": "isaacrivriv", "createdAt": "2021-07-19T19:04:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMTEwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMzI2NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r670623265", "bodyText": "Why remove the eecompatible feature here?", "author": "pnicolucci", "createdAt": "2021-07-15T16:26:26Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/websocket-1.1/com.ibm.websphere.appserver.websocket-1.1.feature", "diffHunk": "@@ -10,10 +10,9 @@ IBM-API-Package: javax.websocket; version=\"1.1\"; type=\"spec\", \\\n  com.ibm.websphere.wsoc; type=\"ibm-api\"\n IBM-ShortName: websocket-1.1\n Subsystem-Name: Java WebSocket 1.1\n--features=com.ibm.websphere.appserver.servlet-3.1; ibm.tolerates:=\"4.0\", \\\n-  com.ibm.websphere.appserver.eeCompatible-7.0; ibm.tolerates:=\"6.0,8.0\"", "originalCommit": "1c8561acf1c303eb01e5dae4a31850c4bf739215", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDcwMDQ0NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r670700445", "bodyText": "By including in the private feature and pulling in a single version of the private feature, it isn't necessary to include it in both public and private. When tolerating more versions of the private feature with different eeCompatible versions, then we would likely want to explicitly include it in the public feature as well. Since we only pull in one version of the private feature and dont tolerate any other we should be good to go", "author": "isaacrivriv", "createdAt": "2021-07-15T18:13:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMzI2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3Mjk2ODA3Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r672968072", "bodyText": "While i agree that at the moment it should work without eeCompatible, I think it would be better to leave it set in the public feature as well. I think that at the very least, keeping it in the public feature will make the potential error message slightly shorter (a shorter/clearer dependency chain). @jhanders34 and @tjwatson should be able to confirm.", "author": "tevans78", "createdAt": "2021-07-20T09:38:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMzI2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MzA0Mjc5OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r673042798", "bodyText": "In general I tried to have eeCompatible in ALL of the EE public features so that it was obvious to the user which feature combination caused the conflict.  So if you are removing it in this PR, I agree with Tom that it should be put back.", "author": "jhanders34", "createdAt": "2021-07-20T11:36:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMzI2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MzEwOTUyNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r673109525", "bodyText": "Ok sounds good Ill make the change to add it again.", "author": "isaacrivriv", "createdAt": "2021-07-20T13:13:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMzI2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMzM2NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r670623364", "bodyText": "Why remove the eecompatible feature here?", "author": "pnicolucci", "createdAt": "2021-07-15T16:26:32Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/websocket-1.0/com.ibm.websphere.appserver.websocket-1.0.feature", "diffHunk": "@@ -10,10 +10,9 @@ IBM-API-Package: javax.websocket; type=\"spec\", \\\n  com.ibm.websphere.wsoc; type=\"ibm-api\"\n IBM-ShortName: websocket-1.0\n Subsystem-Name: Java WebSocket 1.0\n--features=com.ibm.websphere.appserver.servlet-3.1; ibm.tolerates:=\"4.0\", \\\n-  com.ibm.websphere.appserver.eeCompatible-7.0; ibm.tolerates:=\"6.0,8.0\"", "originalCommit": "1c8561acf1c303eb01e5dae4a31850c4bf739215", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDcwMDUyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/15377#discussion_r670700527", "bodyText": "Same as above", "author": "isaacrivriv", "createdAt": "2021-07-15T18:13:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDYyMzM2NA=="}], "type": "inlineReview"}, {"oid": "836b3fa54650a0faf7f78e6a898987fe05a17f61", "url": "https://github.com/OpenLiberty/open-liberty/commit/836b3fa54650a0faf7f78e6a898987fe05a17f61", "message": "Added eeComp to both private and public features", "committedDate": "2021-07-20T13:34:10Z", "type": "commit"}]}