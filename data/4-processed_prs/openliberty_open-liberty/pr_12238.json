{"pr_number": 12238, "pr_title": "Issue 11916: Bean Validation 3.0 initial drop.", "pr_createdAt": "2020-05-18T18:52:58Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/12238", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ5Nzk5Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r427497992", "bodyText": "change\nannotation based\nto\nannotation-based", "author": "jantley-ibm", "createdAt": "2020-05-19T18:04:14Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/beanValidation-3.0/resources/l10n/com.ibm.websphere.appserver.beanValidation-3.0.properties", "diffHunk": "@@ -0,0 +1,19 @@\n+###############################################################################\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+###############################################################################\n+#\n+#ISMESSAGEFILE FALSE\n+#NLS_ENCODING=UNICODE\n+#NLS_MESSAGEFORMAT_NONE\n+#\n+\n+description=The Bean Validation 3.0 specification provides an annotation based model for validating \\", "originalCommit": "affb3dffee26cc661acfd4534c8f0ec55316cdb0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxNzE5OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432717198", "bodyText": "I've made the requested update.  The file has been renamed to:\ncom.ibm.websphere.appserver.features/visibility/public/beanValidation-3.0/resources/l10n/io.openliberty.beanValidation-3.0.properties", "author": "nmittles", "createdAt": "2020-05-29T20:22:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ5Nzk5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ5OTIyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r427499221", "bodyText": "change\nThis feature is built on top of the Hibernate Validator Engine.\nto\nThis feature is built on the Hibernate Validator Engine.", "author": "jantley-ibm", "createdAt": "2020-05-19T18:06:17Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/public/beanValidation-3.0/resources/l10n/com.ibm.websphere.appserver.beanValidation-3.0.properties", "diffHunk": "@@ -0,0 +1,19 @@\n+###############################################################################\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+###############################################################################\n+#\n+#ISMESSAGEFILE FALSE\n+#NLS_ENCODING=UNICODE\n+#NLS_MESSAGEFORMAT_NONE\n+#\n+\n+description=The Bean Validation 3.0 specification provides an annotation based model for validating \\\n+ JavaBeans.  It can be used to assert and maintain the integrity of data as it travels through \\\n+ an application. This feature is built on top of the Hibernate Validator Engine.", "originalCommit": "affb3dffee26cc661acfd4534c8f0ec55316cdb0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxNzI0Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432717246", "bodyText": "I've made the requested update.  The file has been renamed to:\ncom.ibm.websphere.appserver.features/visibility/public/beanValidation-3.0/resources/l10n/io.openliberty.beanValidation-3.0.properties", "author": "nmittles", "createdAt": "2020-05-29T20:22:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ5OTIyMQ=="}], "type": "inlineReview"}, {"oid": "91eca976b4859d1dcd0081fd012e231d4ea02438", "url": "https://github.com/OpenLiberty/open-liberty/commit/91eca976b4859d1dcd0081fd012e231d4ea02438", "message": "Issue 11916: Bean Validation 3.0 initial drop.", "committedDate": "2020-05-28T15:05:07Z", "type": "forcePushed"}, {"oid": "cf73e8e7333d18234461fa427ff004438103b514", "url": "https://github.com/OpenLiberty/open-liberty/commit/cf73e8e7333d18234461fa427ff004438103b514", "message": "Issue 11916: Bean Validation 3.0 initial drop.", "committedDate": "2020-05-28T15:23:03Z", "type": "forcePushed"}, {"oid": "1185e54cd20c744ca87cf9c4fdd34e1f61264429", "url": "https://github.com/OpenLiberty/open-liberty/commit/1185e54cd20c744ca87cf9c4fdd34e1f61264429", "message": "Issue 11916: Bean Validation 3.0 initial drop.", "committedDate": "2020-05-28T15:25:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2NjA2Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432166066", "bodyText": "should be kind=noship and edition=full\n(same comment applies for all other .feature files in this PR)", "author": "aguibert", "createdAt": "2020-05-28T22:49:59Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/auto/io.openliberty.beanValidationCDI-3.0.feature", "diffHunk": "@@ -0,0 +1,13 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.beanValidationCDI-3.0\n+visibility=private\n+IBM-App-ForceRestart: install, uninstall\n+IBM-Provision-Capability: \\\n+  osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.cdi-3.0))\", \\\n+  osgi.identity; filter:=\"(&(type=osgi.subsystem.feature)(osgi.identity=io.openliberty.beanValidation-3.0))\"\n+IBM-Install-Policy: when-satisfied\n+-bundles=\\\n+  com.ibm.ws.beanvalidation.v20.cdi.jakarta,\\\n+  io.openliberty.org.hibernate.validator.cdi.7.0\n+kind=ga", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjUzMTQ3Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432531473", "bodyText": "Done.", "author": "nmittles", "createdAt": "2020-05-29T14:38:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2NjA2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMTQ0Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432711442", "bodyText": "Features have been updated to noship/full.", "author": "nmittles", "createdAt": "2020-05-29T20:09:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2NjA2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2NjQyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432166427", "bodyText": "should this be 3.0 instead of 2.0?", "author": "aguibert", "createdAt": "2020-05-28T22:50:55Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/io.openliberty.beanValidationCore-2.0.feature", "diffHunk": "@@ -0,0 +1,19 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=io.openliberty.beanValidationCore-2.0", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ5OTM3MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432499370", "bodyText": "No 2.0 is correct, previously there was only beanValidationCore for bval 1.0, bval 1.1, and bval 2.0.", "author": "nmittles", "createdAt": "2020-05-29T13:56:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2NjQyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2ODMyMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432168322", "bodyText": "Are we tracking this in any github issues? Perhaps under the CDI epic for EE9?", "author": "aguibert", "createdAt": "2020-05-28T22:56:25Z", "path": "dev/com.ibm.ws.beanvalidation.v11_fat/fat/src/com/ibm/ws/beanvalidation/fat/cdi/BeanValidation20CDITest.java", "diffHunk": "@@ -33,6 +34,8 @@\n  */\n @RunWith(FATRunner.class)\n @MinimumJavaLevel(javaLevel = 8)\n+// TODO: Remove skip when injection is enabled for jakartaee9", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMTg0Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432711846", "bodyText": "Yes, #12434 and #12435", "author": "nmittles", "createdAt": "2020-05-29T20:10:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2ODMyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2ODYxNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432168615", "bodyText": "Perhaps a simpler way to do this check is:\nif (!JakartaEE9Action.isActive()) {", "author": "aguibert", "createdAt": "2020-05-28T22:57:17Z", "path": "dev/com.ibm.ws.beanvalidation.v11_fat/fat/src/com/ibm/ws/beanvalidation/fat/ejb/EJBModule_Common.java", "diffHunk": "@@ -36,6 +38,12 @@ public static void createAndExportEJBWARs(LibertyServer server) throws Exception\n         JavaArchive jar = ShrinkHelper.buildJavaArchive(\"EJBModule1EJB.jar\", \"beanvalidation.ejbmodule.*\");\n         JavaArchive jar2 = ShrinkHelper.buildJavaArchive(\"EJBModule2EJB.jar\", \"beanvalidation.ejbmodule2.ejb\");\n \n+        Set<String> features = server.getServerConfiguration().getFeatureManager().getFeatures();\n+        if (!(features.contains(\"beanValidation-1.0\") || features.contains(\"beanValidation-1.1\") || features.contains(\"beanValidation-2.0\"))) {", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ5NjU2MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432496561", "bodyText": "Thanks, that would be better.", "author": "nmittles", "createdAt": "2020-05-29T13:51:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2ODYxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTA3OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432169078", "bodyText": "The transformer tool should be automatically converting this sort of stuff. Can you check with @tbitonti to see if we can get this support added?", "author": "aguibert", "createdAt": "2020-05-28T22:58:42Z", "path": "dev/com.ibm.ws.beanvalidation.v11_fat/test-applications/EJBModule1EJB.jar/resources/META-INF/constraints-house_EE9.xml", "diffHunk": "@@ -0,0 +1,21 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<constraint-mappings xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+  xsi:schemaLocation=\"http://jboss.org/xml/ns/javax/validation/mapping validation-mapping-1.0.xsd\"\n+  xmlns=\"http://jboss.org/xml/ns/javax/validation/mapping\">\n+  <default-package>beanvalidation.ejbmodule.ejb</default-package>\n+\n+  <bean class=\"AValidationXMLTestBean\" ignore-annotations=\"true\">\n+    <field name=\"builder\">\n+      <constraint annotation=\"jakarta.validation.constraints.NotNull\" />", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTIyMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432169223", "bodyText": "Same comment applies to the other XML files in this PR that have been duplicated for EE9", "author": "aguibert", "createdAt": "2020-05-28T22:59:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTA3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ5NDAwNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432494006", "bodyText": "Is the transformer tool supposed to work with arbitrary xml file names?  These files could be named anything in theory. Otherwise we'd be adding FAT specific scanning to the tool. We could scan all XML for constraint-mappings, or add \"smarts\" to read the validation.xml and figured out what constraint mapping files it points to. I wasn't sure if that was in the scope of the tooling. @tbitonti Your thoughts?", "author": "nmittles", "createdAt": "2020-05-29T13:47:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTA3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjUyNTM5NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432525394", "bodyText": "Is constraints-house.xml an arbitrary name or a spec-defined name? The scanner tool is handing spec-defined XML files like web.xml and beans.xml, so it should also handle validation.xml's too", "author": "aguibert", "createdAt": "2020-05-29T14:30:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTA3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMjMwOA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432712308", "bodyText": "I've talked with Tom and opened issue #12431 .", "author": "nmittles", "createdAt": "2020-05-29T20:11:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE2OTA3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3MDUzNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432170536", "bodyText": "We don't want to disable these tests outright because we will lose coverage for bval-2.0 in the short term.\nInstead, can we just disable these tests using @SkipForRepeat on the test servlet class? Currently you can use @SkipForRepeat on test servlet methods, but not at the class level. It would be nice to have class-level support, but if that's too much work you could just add the annotation on each test servlet method instead", "author": "aguibert", "createdAt": "2020-05-28T23:02:58Z", "path": "dev/com.ibm.ws.beanvalidation.v20_fat/fat/src/com/ibm/ws/bval/v20/fat/BeanVal20Test.java", "diffHunk": "@@ -54,43 +40,52 @@\n     @Server(\"beanval.v20_fat\")\n     @TestServlets({\n                     @TestServlet(servlet = BeanVal20TestServlet.class, contextRoot = REG_APP),\n-                    @TestServlet(servlet = BeanValCDIServlet.class, contextRoot = CDI_APP),\n-                    @TestServlet(servlet = BeanValidationTestServlet.class, contextRoot = MULTI_VAL_APP),\n-                    @TestServlet(servlet = ValueExtractorServlet.class, contextRoot = VAL_EXT_APP),\n+                    //TODO: Once CDI 3.0 and EJBLite 4.0 are ready, enable these four applications for Jakarta EE 9.\n+//                    @TestServlet(servlet = BeanValCDIServlet.class, contextRoot = CDI_APP),", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ5MDIzMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432490230", "bodyText": "The tests are temporarily disabled here. They have been moved to their own test class that only runs for bval 1.1 and bval 2.0, so we don't lose coverage.", "author": "nmittles", "createdAt": "2020-05-29T13:41:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3MDUzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3MTc5NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432171795", "bodyText": "I guess this is a good compromise. If you are interested though, the class-level support for @SkipForRepeat on test servlets would be nice", "author": "aguibert", "createdAt": "2020-05-28T23:07:08Z", "path": "dev/com.ibm.ws.beanvalidation.v20_fat/fat/src/com/ibm/ws/bval/v20/fat/BeanVal20_CDI_EJB_Test.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.bval.v20.fat;\n+\n+import static com.ibm.websphere.simplicity.ShrinkHelper.addDirectory;\n+import static com.ibm.websphere.simplicity.ShrinkHelper.buildDefaultApp;\n+import static com.ibm.websphere.simplicity.ShrinkHelper.buildJavaArchive;\n+import static com.ibm.websphere.simplicity.ShrinkHelper.defaultDropinApp;\n+import static com.ibm.websphere.simplicity.ShrinkHelper.exportToServer;\n+\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.spec.EnterpriseArchive;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.junit.AfterClass;\n+import org.junit.Assert;\n+import org.junit.BeforeClass;\n+import org.junit.runner.RunWith;\n+\n+import com.ibm.websphere.simplicity.ShrinkHelper;\n+\n+import bval.v20.cdi.web.BeanValCDIServlet;\n+import bval.v20.customprovider.CustomProviderTestServlet;\n+import bval.v20.multixml.web.BeanValidationTestServlet;\n+import bval.v20.valueextractor.web.ValueExtractorServlet;\n+import componenttest.annotation.Server;\n+import componenttest.annotation.SkipForRepeat;\n+import componenttest.annotation.TestServlet;\n+import componenttest.annotation.TestServlets;\n+import componenttest.custom.junit.runner.FATRunner;\n+import componenttest.topology.impl.LibertyServer;\n+import componenttest.topology.utils.FATServletClient;\n+\n+//TODO: Delete this class and re-enable these tests in BeanVal20Test once CDI 3.0 and EJBLite 4.0 are ready.\n+@SkipForRepeat({ SkipForRepeat.EE9_FEATURES })\n+@RunWith(FATRunner.class)\n+public class BeanVal20_CDI_EJB_Test extends FATServletClient {", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQ4OTEzMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432489133", "bodyText": "I couldn't get the class-level support for the @SkipForRepeat to work since that required the applications to start, and these apps depend on CDI and EJB to start up.", "author": "nmittles", "createdAt": "2020-05-29T13:40:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3MTc5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3Mzg1NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432173854", "bodyText": "Maybe add a TODO to replace all of the jaxb related imports/dynamic-imports with standard imports for jaxb 3.0 (which should be getting delivered in liberty soon, not sure if bval supports it yet though)", "author": "aguibert", "createdAt": "2020-05-28T23:13:44Z", "path": "dev/io.openliberty.org.hibernate.validator.7.0/bnd.overrides", "diffHunk": "@@ -0,0 +1,87 @@\n+-include= ~../cnf/resources/bnd/rejar.props, \\\n+          ~../cnf/resources/bnd/app-resources.bnd\n+bVersion=1.0\n+bSymbolicName=io.openliberty.org.hibernate.validator.7.0\n+\n+Bundle-Name: Hibernate Validator Engine\n+Bundle-SymbolicName: io.openliberty.org.hibernate.validator.7.0\n+Bundle-Description: Hibernate's Bean Validation (JSR-380) reference implementation; version=7.0.0.Alpha2\n+\n+# Provide these as resources to applications\n+app-resources= \\\n+  META-INF/services/jakarta.validation.spi.ValidationProvider | \\\n+  META-INF/validation-mapping-1.0.xsd | \\\n+  META-INF/validation-configuration-1.0.xsd | \\\n+  META-INF/validation-mapping-1.1.xsd | \\\n+  META-INF/validation-configuration-1.1.xsd | \\\n+  META-INF/validation-mapping-2.0.xsd | \\\n+  META-INF/validation-configuration-2.0.xsd | \\\n+  META-INF/validation-mapping-3.0.xsd | \\\n+  META-INF/validation-configuration-3.0.xsd\n+\n+Export-Package: \\\n+  org.hibernate.validator.*;version=\"7.0.0.Alpha2\";thread-context=true\n+\n+Import-Package: \\\n+  !jakarta.persistence, \\\n+  jakarta.validation;version=\"[3.0.0,4.0.0)\", \\\n+  jakarta.validation.constraints;version=\"[3.0.0,4.0.0)\", \\\n+  jakarta.validation.constraintvalidation;version=\"[3.0.0,4.0.0)\", \\\n+  jakarta.validation.executable;version=\"[3.0.0,4.0.0)\", \\\n+  jakarta.validation.groups;version=\"[3.0.0,4.0.0)\", \\\n+  jakarta.validation.metadata;version=\"[3.0.0,4.0.0)\", \\\n+  jakarta.validation.spi;version=\"[3.0.0,4.0.0)\", \\\n+  jakarta.validation.valueextraction;version=\"[3.0.0,4.0.0)\", \\\n+  javax.script;version=0, \\\n+  !javax.xml.bind.*, \\\n+  javax.xml.namespace;version=0, \\\n+  javax.xml.stream;version=0, \\\n+  javax.xml.stream.events;version=0, \\\n+  javax.xml.transform;version=0, \\\n+  javax.xml.transform.stream;version=0, \\\n+  javax.xml.validation;version=0, \\\n+  jakarta.el;version=\"[4.0.0,5.0.0)\";resolution:=optional, \\\n+  org.xml.sax;version=0, \\\n+  org.jboss.logging;version=\"[3.1.0,4.0.0)\", \\\n+  com.fasterxml.classmate;version=\"[1.3,2.0.0)\", \\\n+  com.fasterxml.classmate.members;version=\"[1.3,2.0.0)\", \\\n+  org.joda.time;version=\"[2.0.0,3.0.0)\";resolution:=optional, \\\n+  org.jsoup;version=\"[1.5.2,2.0.0)\";resolution:=optional, \\\n+  org.jsoup.nodes;version=\"[1.5.2,2.0.0)\";resolution:=optional, \\\n+  org.jsoup.parser;version=\"[1.5.2,2.0.0)\";resolution:=optional, \\\n+  org.jsoup.safety;version=\"[1.5.2,2.0.0)\";resolution:=optional, \\\n+  javax.money;version=\"[1.0.0,2.0.0)\";resolution:=optional, \\\n+  com.thoughtworks.paranamer;version=\"[2.5.5,3.0.0)\";resolution:=optional, \\\n+  com.ibm.wsspi.classloading,\\\n+  org.apache.el\n+\n+# Use dynamicImport-Package for JAXB APIs, with this, Equonix will have a chance to wire\n+# those packages to the JAXB-2.2 API if the target bundle is started, or the one from system\n+# bundle will be always used due to JAXB 2.2 API is not resolved. Similarly, do the same\n+# with persistence because the open source optionally uses jpa if it is there for a customized\n+# TraversableRevolver implementation.\n+DynamicImport-Package: \\\n+ jakarta.persistence, \\\n+ javax.xml.bind, \\\n+ javax.xml.bind.annotation, \\\n+ javax.xml.bind.annotation.adapters, \\\n+ javax.xml.bind.attachment, \\\n+ javax.xml.bind.helpers, \\\n+ javax.xml.bind.util", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjUxNTc4Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432515786", "bodyText": "Added the following:\n# TODO: Replace all of the jaxb related dynamic-imports with standard imports for JAXB 3.0 once available.", "author": "nmittles", "createdAt": "2020-05-29T14:20:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3Mzg1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMzE4OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432713188", "bodyText": "Correction.  JAXB is no longer needed by Hibernate Validator.  I've cleaned up the bnd.overrides and feature accordingly.", "author": "nmittles", "createdAt": "2020-05-29T20:13:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3Mzg1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3NDM0MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432174340", "bodyText": "Is this clause intentionally left blank? If so, it can be removed", "author": "aguibert", "createdAt": "2020-05-28T23:15:09Z", "path": "dev/io.openliberty.org.hibernate.validator.cdi.7.0/bnd.overrides", "diffHunk": "@@ -0,0 +1,20 @@\n+-include= ~../cnf/resources/bnd/rejar.props\n+\n+bVersion=1.0\n+Bundle-SymbolicName: io.openliberty.org.hibernate.validator.cdi.7.0\n+\n+# Something that wildfly/thorntail apparently uses but blows up on Liberty\n+Fragment-Host:\n+\n+Import-Package: \\\n+  org.apache.el,\\\n+  *\n+\n+Export-Package: \\\n+  org.hibernate.validator.cdi.*;version=\"7.0.0.Alpha2\"\n+\n+Include-Resource: \\\n+  @${repo;org.hibernate.validator:hibernate-validator-cdi;7.0.0.Alpha2}!/META-INF/services/*,\\\n+  META-INF=resources/META-INF\n+\n+-cdiannotations:", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU2NzE3Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432567177", "bodyText": "It looks to be needed. I took it out and the Manifest changed.  Here is some of the background info I was given:\nWhen we updated to Bnd 4.3.1 the default behavior changed. Bnd is finding and processing CDI beans in  bundles. The default for Bnd is -cdiannotations: * which means process all classes for CDI beans. You can disable that if you don't use OSGi's CDI Integration spec by using -cdiannotations:", "author": "nmittles", "createdAt": "2020-05-29T15:34:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3NDM0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3NDY2NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432174665", "bodyText": "do we really need to list these packages for transform if they're not changing?", "author": "aguibert", "createdAt": "2020-05-28T23:16:13Z", "path": "dev/wlp-jakartaee-transform/rules/jakarta-renames.properties", "diffHunk": "@@ -79,3 +79,18 @@ javax.xml.bind.attachment=jakarta.xml.bind.attachment\n \n javax.transaction=jakarta.transaction\n \n+javax.validation=jakarta.validation\n+javax.validation.bootstrap=jakarta.validation.bootstrap\n+javax.validation.constraints=jakarta.validation.constraints\n+javax.validation.constraintvalidation=jakarta.validation.constraintvalidation\n+javax.validation.executable=jakarta.validation.executable\n+javax.validation.groups=jakarta.validation.groups\n+javax.validation.metadata=jakarta.validation.metadata\n+javax.validation.spi=jakarta.validation.spi\n+javax.validation.valueextraction=jakarta.validation.valueextraction\n+org.hibernate.validator=org.hibernate.validator\n+org.hibernate.validator.cdi.internal=org.hibernate.validator.cdi.internal\n+org.hibernate.validator.cdi=org.hibernate.validator.cdi\n+org.hibernate.validator.internal.engine.valueextraction=org.hibernate.validator.internal.engine.valueextraction\n+org.hibernate.validator.internal.util.privilegedactions=org.hibernate.validator.internal.util.privilegedactions\n+org.hibernate.validator.internal=org.hibernate.validator.internal", "originalCommit": "cd23f534df9249f6043b2270b20acf956c756e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjUwODE2Nw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432508167", "bodyText": "It was the only way I could get the package versions to be changed. Is there a better way?", "author": "nmittles", "createdAt": "2020-05-29T14:10:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3NDY2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjUyNzg0MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r432527841", "bodyText": "Ah ok, that's fine then. It seems kind of clunky that the tool requires packages that won't be renamed to be defined in this file and the version mapping props file, but that's an issue with the xformer tool, not this PR so lets ignore it", "author": "aguibert", "createdAt": "2020-05-29T14:32:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE3NDY2NQ=="}], "type": "inlineReview"}, {"oid": "14392b65d83122f9ec2ad759b5b6f67c720b39da", "url": "https://github.com/OpenLiberty/open-liberty/commit/14392b65d83122f9ec2ad759b5b6f67c720b39da", "message": "Code review updates.", "committedDate": "2020-05-29T20:15:27Z", "type": "forcePushed"}, {"oid": "95d21e6cc80ec2d63c293fc90d06acaffd75fd2a", "url": "https://github.com/OpenLiberty/open-liberty/commit/95d21e6cc80ec2d63c293fc90d06acaffd75fd2a", "message": "Code review updates.", "committedDate": "2020-05-29T20:21:51Z", "type": "forcePushed"}, {"oid": "9c09a4d569bf7abe8af12d2813217e484d94fcde", "url": "https://github.com/OpenLiberty/open-liberty/commit/9c09a4d569bf7abe8af12d2813217e484d94fcde", "message": "Minor fixes for feature checker and bvt tests.", "committedDate": "2020-06-08T15:22:49Z", "type": "forcePushed"}, {"oid": "4469f4a09cdc89d979b0531fdbbf54396380b61a", "url": "https://github.com/OpenLiberty/open-liberty/commit/4469f4a09cdc89d979b0531fdbbf54396380b61a", "message": "Minor fixes for feature checker and bvt tests.", "committedDate": "2020-06-08T15:43:31Z", "type": "forcePushed"}, {"oid": "7893ce83e68e12563ba69a802ec887af61b59336", "url": "https://github.com/OpenLiberty/open-liberty/commit/7893ce83e68e12563ba69a802ec887af61b59336", "message": "Cleanup ejbLite from EE8FeatureReplacementAction and EE7FeatureReplacementAction.", "committedDate": "2020-06-16T04:40:25Z", "type": "forcePushed"}, {"oid": "89975a34d20d80319950461844007b94825665bc", "url": "https://github.com/OpenLiberty/open-liberty/commit/89975a34d20d80319950461844007b94825665bc", "message": "com.ibm.websphere.appserver.jakarta.cdi-3.0 was renamed to io.openliberty...\ncdi-3.0 public feature now exists.", "committedDate": "2020-06-16T13:49:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg2OTQ3MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r440869471", "bodyText": "I really am going to write some gradle that fails the build if this file isn't kept alphabetical :-o", "author": "tevans78", "createdAt": "2020-06-16T13:55:25Z", "path": "dev/cnf/oss_dependencies.maven", "diffHunk": "@@ -153,6 +153,7 @@ jakarta.transaction:jakarta.transaction-api:2.0.0-RC1\n jakarta.xml.bind:jakarta.xml.bind-api:3.0.0-RC3\n jakarta.xml.soap:jakarta.xml.soap-api:2.0.0-RC3\n jakarta.xml.ws:jakarta.xml.ws-api:3.0.0-RC3\n+jakarta.validation:jakarta.validation-api:3.0.0-M1", "originalCommit": "89975a34d20d80319950461844007b94825665bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg4NTA2NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r440885065", "bodyText": "alphabetical please otherwise we end up with duplicates", "author": "tevans78", "createdAt": "2020-06-16T14:15:36Z", "path": "dev/wlp-jakartaee-transform/rules/jakarta-renames.properties", "diffHunk": "@@ -64,6 +64,15 @@ javax.xml.bind.helpers=jakarta.xml.bind.helpers\n javax.xml.bind.util=jakarta.xml.bind.util\n javax.xml.bind=jakarta.xml.bind\n javax.xml.ws=jakarta.xml.ws\n+javax.validation=jakarta.validation", "originalCommit": "89975a34d20d80319950461844007b94825665bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg4NTQyMQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/12238#discussion_r440885421", "bodyText": "alphabetical please otherwise we end up with duplicates", "author": "tevans78", "createdAt": "2020-06-16T14:16:03Z", "path": "dev/wlp-jakartaee-transform/rules/jakarta-versions.properties", "diffHunk": "@@ -93,3 +93,18 @@ org.jboss.weld.serialization.spi=[4.0,5)\n org.jboss.weld.transaction.spi=[4.0,5)\n org.jboss.weld.util.collections=[4.0,5)\n org.jboss.weld=[4.0,5)\n+jakarta.validation=[3.0,4)", "originalCommit": "89975a34d20d80319950461844007b94825665bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "373051a777868b004205fadb822ec47fc0991840", "url": "https://github.com/OpenLiberty/open-liberty/commit/373051a777868b004205fadb822ec47fc0991840", "message": "Interceptor-2.0 was renamed to jakarta naming scheme. Fixed alphabetization.", "committedDate": "2020-06-22T07:54:48Z", "type": "forcePushed"}, {"oid": "aa9cde33443517a50eccc404459422b985933c13", "url": "https://github.com/OpenLiberty/open-liberty/commit/aa9cde33443517a50eccc404459422b985933c13", "message": "Interceptor-2.0 was renamed to jakarta naming scheme. Fixed alphabetization.", "committedDate": "2020-06-24T19:12:29Z", "type": "forcePushed"}, {"oid": "7ede683b8694cd77fed9aedb694cf329ba83c040", "url": "https://github.com/OpenLiberty/open-liberty/commit/7ede683b8694cd77fed9aedb694cf329ba83c040", "message": "Interceptor-2.0 was renamed to jakarta naming scheme. Fixed alphabetization.", "committedDate": "2020-06-24T19:15:51Z", "type": "forcePushed"}, {"oid": "8c43c02fce278941366e515037211f7698698d38", "url": "https://github.com/OpenLiberty/open-liberty/commit/8c43c02fce278941366e515037211f7698698d38", "message": "Issue 11916: Bean Validation 3.0 initial drop.", "committedDate": "2020-06-25T13:20:58Z", "type": "commit"}, {"oid": "f2b4b76743c467923584a6098a1714a94c7bebbf", "url": "https://github.com/OpenLiberty/open-liberty/commit/f2b4b76743c467923584a6098a1714a94c7bebbf", "message": "Rename of bean validation bundle and features to io.openliberty scheme. Also added beanValidation-3.0 to jakartaeeClient-9.0 and webProfile-9.0.", "committedDate": "2020-06-25T13:20:59Z", "type": "commit"}, {"oid": "db92ec2e42fedf2e5757b9181596d2258c6fa377", "url": "https://github.com/OpenLiberty/open-liberty/commit/db92ec2e42fedf2e5757b9181596d2258c6fa377", "message": "Code review updates.", "committedDate": "2020-06-25T13:20:59Z", "type": "commit"}, {"oid": "2bfd6dcf8bf2be98d4f4c09423e61d5fc0b2cae9", "url": "https://github.com/OpenLiberty/open-liberty/commit/2bfd6dcf8bf2be98d4f4c09423e61d5fc0b2cae9", "message": "Minor fixes for feature checker and bvt tests.", "committedDate": "2020-06-25T13:20:59Z", "type": "commit"}, {"oid": "53b9ca9f5700d591ad3724779649a863c4039365", "url": "https://github.com/OpenLiberty/open-liberty/commit/53b9ca9f5700d591ad3724779649a863c4039365", "message": "Cleanup ejbLite from EE8FeatureReplacementAction and EE7FeatureReplacementAction.", "committedDate": "2020-06-25T13:21:00Z", "type": "commit"}, {"oid": "780970ebf10e76be384789103c6217d2fdeb544b", "url": "https://github.com/OpenLiberty/open-liberty/commit/780970ebf10e76be384789103c6217d2fdeb544b", "message": "com.ibm.websphere.appserver.jakarta.cdi-3.0 was renamed to io.openliberty...\ncdi-3.0 public feature now exists.", "committedDate": "2020-06-25T13:21:00Z", "type": "commit"}, {"oid": "2430ca4bef6b78176f099e2df4c7661da1795d50", "url": "https://github.com/OpenLiberty/open-liberty/commit/2430ca4bef6b78176f099e2df4c7661da1795d50", "message": "Interceptor-2.0 was renamed to jakarta naming scheme. Fixed alphabetization. Added CDI 3.0 support.", "committedDate": "2020-06-25T14:09:57Z", "type": "commit"}, {"oid": "2430ca4bef6b78176f099e2df4c7661da1795d50", "url": "https://github.com/OpenLiberty/open-liberty/commit/2430ca4bef6b78176f099e2df4c7661da1795d50", "message": "Interceptor-2.0 was renamed to jakarta naming scheme. Fixed alphabetization. Added CDI 3.0 support.", "committedDate": "2020-06-25T14:09:57Z", "type": "forcePushed"}]}