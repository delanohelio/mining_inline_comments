{"pr_number": 13736, "pr_title": "Re-integrate Persistence Service Jakarta EE/JPA 3.0 update with build\u2026", "pr_createdAt": "2020-08-31T19:38:04Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/13736", "timeline": [{"oid": "5fc6e73d739d16f20ee79764993f9692e94d99c8", "url": "https://github.com/OpenLiberty/open-liberty/commit/5fc6e73d739d16f20ee79764993f9692e94d99c8", "message": "Re-integrate Persistence Service Jakarta EE/JPA 3.0 update with build break fixes.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-09-01T14:17:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE3NDg2Mg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r481174862", "bodyText": "will that javadoc will be wrong?", "author": "tevans78", "createdAt": "2020-09-01T14:21:46Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/com.ibm.ws.persistence.jakarta-1.0.feature", "diffHunk": "@@ -0,0 +1,21 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=com.ibm.ws.persistence.jakarta-1.0\n+visibility=private\n+IBM-API-Package: com.ibm.websphere.persistence.mbean; type=\"ibm-api\"\n+-features=com.ibm.websphere.appserver.jndi-1.0, \\\n+ com.ibm.websphere.appserver.containerServices-1.0, \\\n+ io.openliberty.jakarta.annotation-2.0; apiJar=false, \\\n+ com.ibm.websphere.appserver.jdbc-4.1; ibm.tolerates:=\"4.0, 4.2, 4.3\", \\\n+ com.ibm.websphere.appserver.transaction-2.0, \\\n+ com.ibm.websphere.appserver.org.eclipse.persistence-3.0\n+-bundles=com.ibm.ws.persistence.jakarta, \\\n+ com.ibm.ws.persistence.mbean.jakarta\n+-jars=com.ibm.websphere.appserver.api.persistence.jakarta; location:=dev/api/ibm/, \\\n+ com.ibm.ws.persistence.utility.jakarta\n+-files=dev/api/ibm/javadoc/com.ibm.websphere.appserver.api.persistence_1.0-javadoc.zip, \\", "originalCommit": "5fc6e73d739d16f20ee79764993f9692e94d99c8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIxMDU5OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r481210599", "bodyText": "The javadoc, pom, and scripts are items which have yet to be addressed.", "author": "jgrassel", "createdAt": "2020-09-01T15:04:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE3NDg2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE1OTYxMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483159613", "bodyText": "@jhanders34 said that there is something in the works regarding pom files, javadocs, and scripts that are involved with jakarta transformed projects.  Hopefully some light can be shed on what is coming down the pipeline with that.", "author": "jgrassel", "createdAt": "2020-09-03T18:00:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE3NDg2Mg=="}], "type": "inlineReview"}, {"oid": "5588792090fca99fa21f4d61796e202d1f56223f", "url": "https://github.com/OpenLiberty/open-liberty/commit/5588792090fca99fa21f4d61796e202d1f56223f", "message": "Re-integrate Persistence Service Jakarta EE/JPA 3.0 update with build break fixes.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-09-01T15:03:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIxNjM1OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r481216359", "bodyText": "New features should not start with \"com.ibm.ws\"... nor should they include 'jakarta'.  'jakarta' was initially limited to the Jakarta API features, but those should now also be removed.\nI believe the desired feature name here would have been \"io.openliberty.persistence-2.0\", but this would be confusing with the new name that will be used for the API, which is \"io.openliberty.persistence.api-3.0\" (i.e. io.openliberty.jakarta.persistence-3.0 needs to be renamed to this).\nPerhaps this should get a more meaningful name like \"io.openliberty.persistenceService-2.0\"", "author": "tkburroughs", "createdAt": "2020-09-01T15:09:50Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/com.ibm.ws.persistence.jakarta-1.0.feature", "diffHunk": "@@ -0,0 +1,21 @@\n+-include= ~${workspace}/cnf/resources/bnd/feature.props\n+symbolicName=com.ibm.ws.persistence.jakarta-1.0", "originalCommit": "5588792090fca99fa21f4d61796e202d1f56223f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIzNTk4OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r481235988", "bodyText": "Yeah, and we might need to make a new pom file,t oo.  Perhaps just going with a new version is the better approach.", "author": "jgrassel", "createdAt": "2020-09-01T15:35:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIxNjM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM1MTEzNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r481351136", "bodyText": "Let me know what feature name you decide on -- or I'll just watch for a commit with the change -- so that I can update the corresponding persistent executor pull.  It was working well yesterday (that is, before the persistence service pull got backed out) and we were able to run two of our persistent executor buckets with Jakarta based on it.", "author": "njr-11", "createdAt": "2020-09-01T18:37:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIxNjM1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE2NzM4NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483167384", "bodyText": "renamed it to io.openliberty.persistenceService-2.0", "author": "jgrassel", "createdAt": "2020-09-03T18:15:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTIxNjM1OQ=="}], "type": "inlineReview"}, {"oid": "67e2ed612e799b5d618b249a79ec329c93498730", "url": "https://github.com/OpenLiberty/open-liberty/commit/67e2ed612e799b5d618b249a79ec329c93498730", "message": "Re-integrate Persistence Service Jakarta EE/JPA 3.0 update with build break fixes.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-09-01T20:07:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkxNDA0NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r482914044", "bodyText": "I would recommend starting everything off as noship, letting it go through a few builds, maybe an SOE ... then switch to beta.", "author": "tevans78", "createdAt": "2020-09-03T11:42:45Z", "path": "dev/com.ibm.websphere.appserver.features/visibility/private/com.ibm.websphere.appserver.org.eclipse.persistence-3.0.feature", "diffHunk": "@@ -5,6 +5,6 @@ IBM-Process-Types: server, \\\n  client\n -features=io.openliberty.jakarta.persistence.base-3.0\n -bundles=com.ibm.websphere.appserver.thirdparty.eclipselink.3.0; apiJar=false; location:=dev/api/third-party/; mavenCoordinates=\"org.eclipse.persistence:eclipselink:3.0.0\"\n-kind=noship\n-edition=full\n+kind=beta", "originalCommit": "67e2ed612e799b5d618b249a79ec329c93498730", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE3OTUxMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483179510", "bodyText": "Reverted back to noship/full", "author": "jgrassel", "createdAt": "2020-09-03T18:35:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkxNDA0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkxNjU3NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r482916574", "bodyText": "What do you want to do with the com.ibm.ws.i18n.conversion.tools package that is in this project but appears to be excluded from the bundle?", "author": "tevans78", "createdAt": "2020-09-03T11:47:39Z", "path": "dev/com.ibm.websphere.appserver.thirdparty.eclipselink.3.0/bnd.bnd", "diffHunk": "@@ -98,7 +99,7 @@ DynamicImport-Package: \\\n  javax.xml.bind.helpers, \\\n  javax.xml.bind.util\n \n-Private-Package: com.ibm.ws.eclipselink.osgi\n+Private-Package: io.openliberty.persistence.internal.helper", "originalCommit": "67e2ed612e799b5d618b249a79ec329c93498730", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE5NjE1OA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483196158", "bodyText": "Keep them there, they're tools used to generate nlsprops files from Eclipselink resource bundles.  They're not shipped with the product.", "author": "jgrassel", "createdAt": "2020-09-03T19:07:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkxNjU3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkyMDM1MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r482920351", "bodyText": "Why is this bundle named com.ibm.ws.jakartaee.persistence.3.0 and not something like io.openliberty.jakarta.persistence.3.0.internal?\nI am also then confused by com.ibm.ws.jakartaee.persistence.api.3.0. Is that the same as io.openliberty.jakarta.persistence.3.0?", "author": "tevans78", "createdAt": "2020-09-03T11:54:36Z", "path": "dev/com.ibm.ws.jakartaee.persistence.3.0/bnd.bnd", "diffHunk": "@@ -12,7 +12,8 @@\n bVersion=1.0\n \n Bundle-SymbolicName: com.ibm.ws.jakartaee.persistence.3.0; singleton:=true\n-#Bundle-Activator: com.ibm.ws.javaee.persistence.internal.HybridPersistenceActivator\n+", "originalCommit": "67e2ed612e799b5d618b249a79ec329c93498730", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE4MTM2MQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483181361", "bodyText": "It's because of the way the JPA APIs had to be structured to support the persistence service.\n1. com.ibm.websphere.appserver.javax.persistence.base-2.2 -> io.openliberty.jakarta.persistence.base-3.0\n2. com.ibm.websphere.appserver.javax.persistence-2.2 -> io.openliberty.jakarta.persistence-3.0\n3. com.ibm.websphere.appserver.org.eclipse.persistence-2.7 -> com.ibm.websphere.appserver.org.eclipse.persistence-3.0\n4. com.ibm.ws.persistence-1.0 -> io.openliberty.persistenceService-2.0", "author": "jgrassel", "createdAt": "2020-09-03T18:39:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkyMDM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzU5NDIzNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483594237", "bodyText": "would be io.openliberty.org.eclipse.persistence-3.0?", "author": "tevans78", "createdAt": "2020-09-04T12:49:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkyMDM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTEzNTA5Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r491135093", "bodyText": "I've renamed the feature. please review.", "author": "jgrassel", "createdAt": "2020-09-18T18:57:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkyMDM1MQ=="}], "type": "inlineReview"}, {"oid": "16c7e0b8a878cbdd5dcb1ce0007891425642f0ac", "url": "https://github.com/OpenLiberty/open-liberty/commit/16c7e0b8a878cbdd5dcb1ce0007891425642f0ac", "message": "Re-integrate Persistence Service Jakarta EE/JPA 3.0 update with build break fixes.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-09-03T18:35:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI4NDY1Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483284653", "bodyText": "Was this file/update accidentally checked in? It doesn't seem to have anything to do with JPA.", "author": "njr-11", "createdAt": "2020-09-03T22:21:37Z", "path": "dev/com.ibm.ws.grpc_fat/fat/src/com/ibm/ws/fat/grpc/FATSuite.java", "diffHunk": "@@ -16,7 +16,6 @@\n \n @RunWith(Suite.class)\n @SuiteClasses({\n-                ClientConfigTests.class,", "originalCommit": "16c7e0b8a878cbdd5dcb1ce0007891425642f0ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY0NjM5MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483646390", "bodyText": "Yeah I don't know where that crept in.  Fixed.", "author": "jgrassel", "createdAt": "2020-09-04T14:21:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI4NDY1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI4NzEyNw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483287127", "bodyText": "need to change \"ejbLite-4.0\" to \"enterpriseBeansLite-4.0\"", "author": "tkburroughs", "createdAt": "2020-09-03T22:28:55Z", "path": "dev/com.ibm.ws.persistence_fat/bnd.bnd", "diffHunk": "@@ -19,6 +19,7 @@ src: \\\n \ttest-applications/consumer/src\n \n fat.project: true\n+tested.features: jaxb-3.0, servlet-5.0, jpacontainer-3.0, jpa-3.0, ejblite-4.0", "originalCommit": "16c7e0b8a878cbdd5dcb1ce0007891425642f0ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY0MjcwNQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483642705", "bodyText": "addressed!", "author": "jgrassel", "createdAt": "2020-09-04T14:15:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI4NzEyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI4ODM5OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483288399", "bodyText": "Must change \"ejbLite-4.0\" to \"enterpriseBeansLite-4.0\"", "author": "tkburroughs", "createdAt": "2020-09-03T22:32:48Z", "path": "dev/com.ibm.ws.persistence_fat/publish/servers/com.ibm.ws.persistence.consumer.jpa30/server.xml", "diffHunk": "@@ -0,0 +1,35 @@\n+<server>\n+    <include location=\"../fatTestPorts.xml\" />\n+\n+    <featureManager>\n+        <feature>servlet-5.0</feature>\n+        <feature>jpa-3.0</feature>\n+        <feature>ejbLite-4.0</feature>", "originalCommit": "16c7e0b8a878cbdd5dcb1ce0007891425642f0ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzY0Mjc3MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/13736#discussion_r483642770", "bodyText": "Addressed!", "author": "jgrassel", "createdAt": "2020-09-04T14:15:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI4ODM5OQ=="}], "type": "inlineReview"}, {"oid": "f839988f86012a4cc22d56eb99076a4ff916295a", "url": "https://github.com/OpenLiberty/open-liberty/commit/f839988f86012a4cc22d56eb99076a4ff916295a", "message": "Address review comments for #13736\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-09-04T14:21:01Z", "type": "forcePushed"}, {"oid": "430feff1447a691c0b69f15e1ee5ab4ee0fb9578", "url": "https://github.com/OpenLiberty/open-liberty/commit/430feff1447a691c0b69f15e1ee5ab4ee0fb9578", "message": "Add temporary persistence service (jakarta) consumer for api checker.", "committedDate": "2020-09-14T16:17:01Z", "type": "forcePushed"}, {"oid": "10cdf692177ea632a02c4e39291a8e89d454349d", "url": "https://github.com/OpenLiberty/open-liberty/commit/10cdf692177ea632a02c4e39291a8e89d454349d", "message": "Add temporary persistence service (jakarta) consumer for api checker.", "committedDate": "2020-09-14T20:45:49Z", "type": "forcePushed"}, {"oid": "f5d1db109ada341e6af4ba85567dc38321738579", "url": "https://github.com/OpenLiberty/open-liberty/commit/f5d1db109ada341e6af4ba85567dc38321738579", "message": "Add temporary persistence service (jakarta) consumer for api checker.", "committedDate": "2020-09-14T22:32:01Z", "type": "forcePushed"}, {"oid": "77004257b47ff8db6f2a4201373e9413108b78e6", "url": "https://github.com/OpenLiberty/open-liberty/commit/77004257b47ff8db6f2a4201373e9413108b78e6", "message": "Add temporary persistence service (jakarta) consumer for api checker.", "committedDate": "2020-09-15T20:25:08Z", "type": "forcePushed"}, {"oid": "2963875932c3c5e2f6dab6afd6ab9030944d28a7", "url": "https://github.com/OpenLiberty/open-liberty/commit/2963875932c3c5e2f6dab6afd6ab9030944d28a7", "message": "Re-integrate Persistence Service Jakarta EE/JPA 3.0 update with build break fixes.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-09-16T14:13:35Z", "type": "commit"}, {"oid": "055eeb58b8a74b496580cc3cd33bf818778fe7cd", "url": "https://github.com/OpenLiberty/open-liberty/commit/055eeb58b8a74b496580cc3cd33bf818778fe7cd", "message": "Address review comments for #13736\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-09-16T14:14:03Z", "type": "commit"}, {"oid": "9c8ddf2c3ac52dbcdcaf707fa4cbc4b5af097507", "url": "https://github.com/OpenLiberty/open-liberty/commit/9c8ddf2c3ac52dbcdcaf707fa4cbc4b5af097507", "message": "Add temporary persistence service (jakarta) consumer for api checker.", "committedDate": "2020-09-16T14:14:03Z", "type": "commit"}, {"oid": "9c8ddf2c3ac52dbcdcaf707fa4cbc4b5af097507", "url": "https://github.com/OpenLiberty/open-liberty/commit/9c8ddf2c3ac52dbcdcaf707fa4cbc4b5af097507", "message": "Add temporary persistence service (jakarta) consumer for api checker.", "committedDate": "2020-09-16T14:14:03Z", "type": "forcePushed"}, {"oid": "d55258b62c25d1564fa67bd43b994cc77d35c0e0", "url": "https://github.com/OpenLiberty/open-liberty/commit/d55258b62c25d1564fa67bd43b994cc77d35c0e0", "message": "Rename com.ibm.ws.jakartaee.persistence.3.0 regarding review comments.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-09-18T18:56:20Z", "type": "commit"}]}