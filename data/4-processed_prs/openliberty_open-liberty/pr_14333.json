{"pr_number": 14333, "pr_title": "Update Eclipselink projects to use GAV format.", "pr_createdAt": "2020-10-05T22:55:37Z", "pr_url": "https://github.com/OpenLiberty/open-liberty/pull/14333", "timeline": [{"oid": "b63543b251fc3f380648ae3346f888273d4858b1", "url": "https://github.com/OpenLiberty/open-liberty/commit/b63543b251fc3f380648ae3346f888273d4858b1", "message": "Update Eclipselink projects to use GAV format.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-10-07T15:48:31Z", "type": "commit"}, {"oid": "b63543b251fc3f380648ae3346f888273d4858b1", "url": "https://github.com/OpenLiberty/open-liberty/commit/b63543b251fc3f380648ae3346f888273d4858b1", "message": "Update Eclipselink projects to use GAV format.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-10-07T15:48:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5NDEwMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501194100", "bodyText": "The new versions you have in here do not match the old versions.  When I look at the Bundle-Version in the MANIFEST.MF files the old values are right.  It would seem you need to do something similar to what you did in dev/com.ibm.websphere.appserver.thirdparty.eclipselink/bnd.bnd", "author": "jhanders34", "createdAt": "2020-10-07T17:40:06Z", "path": "dev/com.ibm.websphere.appserver.thirdparty.eclipselink.2.7/bnd.bnd", "diffHunk": "@@ -102,12 +108,12 @@ DynamicImport-Package: \\\n Private-Package: com.ibm.ws.eclipselink.osgi\n \n Include-Resource: \\\n-  @${repo;org.eclipse.persistence.antlr;3.5.2.v201711011707;EXACT}!/!META-INF/maven/*,\\\n-  @${repo;org.eclipse.persistence.asm;7.3.1.v202003311108;EXACT}!/!META-INF/maven/*,\\\n-  @${repo;org.eclipse.persistence.core;2.7.7.v20200504-69f2c2b80d;EXACT}!/!META-INF/maven/*,\\\n-  @${repo;org.eclipse.persistence.jpa.jpql;2.7.7.v20200504-69f2c2b80d;EXACT}!/!META-INF/maven/*,\\\n-  @${repo;org.eclipse.persistence.jpa.modelgen;2.7.7.v20200504-69f2c2b80d;EXACT}!/!META-INF/maven/*,\\\n-  @${repo;org.eclipse.persistence.jpa;2.7.7.v20200504-69f2c2b80d;EXACT}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.antlr;${eclFullVersion};EXACT}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.asm;${eclFullVersion};EXACT}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.core;${eclFullVersion};EXACT}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.jpa.jpql;${eclFullVersion};EXACT}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.jpa.modelgen;${eclFullVersion};EXACT}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.jpa;${eclFullVersion};EXACT}!/!META-INF/maven/*,\\", "originalCommit": "b63543b251fc3f380648ae3346f888273d4858b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI5NTI4NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501295285", "bodyText": "Original:\n`org.eclipse.persistence.core;2.7.7.v20200504-69f2c2b80d\nNew:\norg.eclipse.persistence.core;2.7.7.69f2c2b\nAlso, the ASM and ANTLR ones are really unique and don't change AS much. Maybe they can be left alone or get their own unique property? But if we are creating a property for exactly one use, we arent gaining much. Not sure which you like more.", "author": "dazey3", "createdAt": "2020-10-07T20:38:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5NDEwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5NTA4Mw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501195083", "bodyText": "Should eclFullVersion have a suffix like -M1 or -R1.5?", "author": "jhanders34", "createdAt": "2020-10-07T17:41:44Z", "path": "dev/com.ibm.websphere.appserver.thirdparty.eclipselink.3.0/bnd.bnd", "diffHunk": "@@ -11,6 +11,13 @@\n -include= ~../cnf/resources/bnd/bundle.props\n bVersion=1.0\n \n+# Eclipselink version info\n+eclVersion=3.0.0\n+#eclHash=69f2c2b\n+#eclFullVersion=${eclVersion}.${eclHash}\n+eclFullVersion=${eclVersion}", "originalCommit": "b63543b251fc3f380648ae3346f888273d4858b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTIxMDY3MA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501210670", "bodyText": "The current version that was dropped recently is -R1.5 (I got an earful for using a local sandbox build while using the regular published maven coordinates, when I should have used an obvious temp coordinate, already).  When ECL 3.0 starts going live, it'll be version coordinates like 3.0.0, 3.0.1, etc.", "author": "jgrassel", "createdAt": "2020-10-07T18:07:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5NTA4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5NjkwNg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501196906", "bodyText": "Ideally these Include-Resources would have the EXACT and would have the right full version.  Looks like it could be 3.0.0.M1 or 3.0.0.SNAPSHOT depending on which version of 3.0.0 is being used.", "author": "jhanders34", "createdAt": "2020-10-07T17:44:45Z", "path": "dev/com.ibm.websphere.appserver.thirdparty.eclipselink.3.0/bnd.bnd", "diffHunk": "@@ -102,11 +109,11 @@ DynamicImport-Package: \\\n Private-Package: io.openliberty.persistence.internal.helper\n \n Include-Resource: \\\n-  @${repo;org.eclipse.persistence.asm;3.0.0}!/!META-INF/maven/*,\\\n-  @${repo;org.eclipse.persistence.corba;3.0.0}!/!META-INF/maven/*,\\\n-  @${repo;org.eclipse.persistence.core;3.0.0}!/!META-INF/maven/*,\\\n-  @${repo;org.eclipse.persistence.jpa;3.0.0}!/!META-INF/maven/*,\\\n-  @${repo;org.eclipse.persistence.jpa.jpql;3.0.0}!/!META-INF/maven/*\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.asm;${eclFullVersion}}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.corba;${eclFullVersion}}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.core;${eclFullVersion}}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.jpa;${eclFullVersion}}!/!META-INF/maven/*,\\\n+  @${repo;org.eclipse.persistence:org.eclipse.persistence.jpa.jpql;${eclFullVersion}}!/!META-INF/maven/*", "originalCommit": "b63543b251fc3f380648ae3346f888273d4858b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkxMzYwMg==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501913602", "bodyText": "Yeah, I'm having some troubles getting this to work, might be because of how I built and generated the eclipselink 3.0 bundle.  I had overridden the file names maven generated to use a version of 3.0.0-R1.5, however I didn't realize until too late that the manifest file still listed a version of 3.0.0.SNAPSHOT.  I'm not sure that a bnd.bnd file change can work around this, might need to rebuild and reupload the eclipselink binary.", "author": "jgrassel", "createdAt": "2020-10-08T18:04:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5NjkwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5NzM0Ng==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501197346", "bodyText": "Should these have strategy=exact and reference the -R1.5 or -M1 like mentioned earlier.", "author": "jhanders34", "createdAt": "2020-10-07T17:45:25Z", "path": "dev/com.ibm.websphere.appserver.thirdparty.eclipselink.3.0/bnd.bnd", "diffHunk": "@@ -116,7 +123,11 @@ instrument.classesExcludes: \\\n   org/eclipse/persistence/internal/helper/*.class\n \n -buildpath: \\\n-    org.eclipse.persistence.core;version=3.0.0,\\\n-    org.eclipse.persistence.jpa;version=3.0.0,\\\n+    org.eclipse.persistence:org.eclipse.persistence.asm;version=${eclFullVersion},\\\n+    org.eclipse.persistence:org.eclipse.persistence.corba;version=${eclFullVersion},\\\n+    org.eclipse.persistence:org.eclipse.persistence.core;version=${eclFullVersion},\\\n+    org.eclipse.persistence:org.eclipse.persistence.jpa;version=${eclFullVersion},\\\n+    org.eclipse.persistence:org.eclipse.persistence.jpa.jpql;version=${eclFullVersion},\\\n+    org.eclipse.persistence:org.eclipse.persistence.jpa.modelgen;version=${eclFullVersion},\\", "originalCommit": "b63543b251fc3f380648ae3346f888273d4858b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5ODI2NQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501198265", "bodyText": "I assume you added these to the buildpath due to issues you ran into with the above comments for this file.", "author": "jhanders34", "createdAt": "2020-10-07T17:46:57Z", "path": "dev/com.ibm.websphere.appserver.thirdparty.eclipselink.2.7/bnd.bnd", "diffHunk": "@@ -118,8 +124,12 @@ instrument.classesExcludes: \\\n   org/eclipse/persistence/internal/helper/*.class\n \n -buildpath: \\\n-    org.eclipse.persistence.core;version=2.7.7.v20200504-69f2c2b80d;strategy=exact,\\\n-    org.eclipse.persistence.jpa;version=2.7.7.v20200504-69f2c2b80d;strategy=exact,\\\n+    org.eclipse.persistence:org.eclipse.persistence.antlr;version=${eclFullVersion};strategy=exact,\\\n+    org.eclipse.persistence:org.eclipse.persistence.asm;version=${eclFullVersion};strategy=exact,\\\n+    org.eclipse.persistence:org.eclipse.persistence.core;version=${eclFullVersion};strategy=exact,\\", "originalCommit": "b63543b251fc3f380648ae3346f888273d4858b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxNzEwMw==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501317103", "bodyText": "Correct me if I'm wrong, but the only reason to add to the -buildpath is if com.ibm.websphere.appserver.thirdparty.eclipselink.2.7\\src needs the imports and compile dependencies, right?", "author": "dazey3", "createdAt": "2020-10-07T21:21:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5ODI2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkxMjMxMA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501912310", "bodyText": "Removed the extra entries, they're not needed.", "author": "jgrassel", "createdAt": "2020-10-08T18:02:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5ODI2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5ODQ1OQ==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501198459", "bodyText": "I assume you added these to the buildpath due to issues you ran into with the above comments for this file.", "author": "jhanders34", "createdAt": "2020-10-07T17:47:17Z", "path": "dev/com.ibm.websphere.appserver.thirdparty.eclipselink.3.0/bnd.bnd", "diffHunk": "@@ -116,7 +123,11 @@ instrument.classesExcludes: \\\n   org/eclipse/persistence/internal/helper/*.class\n \n -buildpath: \\\n-    org.eclipse.persistence.core;version=3.0.0,\\\n-    org.eclipse.persistence.jpa;version=3.0.0,\\\n+    org.eclipse.persistence:org.eclipse.persistence.asm;version=${eclFullVersion},\\\n+    org.eclipse.persistence:org.eclipse.persistence.corba;version=${eclFullVersion},\\\n+    org.eclipse.persistence:org.eclipse.persistence.core;version=${eclFullVersion},\\", "originalCommit": "b63543b251fc3f380648ae3346f888273d4858b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkxMjU1NA==", "url": "https://github.com/OpenLiberty/open-liberty/pull/14333#discussion_r501912554", "bodyText": "Yeah, removing as well.", "author": "jgrassel", "createdAt": "2020-10-08T18:03:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE5ODQ1OQ=="}], "type": "inlineReview"}, {"oid": "c3d776266a6affd9fa04f00de15897712319839e", "url": "https://github.com/OpenLiberty/open-liberty/commit/c3d776266a6affd9fa04f00de15897712319839e", "message": "Address review comments for Update Eclipselink projects to use GAV format. #14333\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-10-12T21:31:34Z", "type": "commit"}, {"oid": "c3d776266a6affd9fa04f00de15897712319839e", "url": "https://github.com/OpenLiberty/open-liberty/commit/c3d776266a6affd9fa04f00de15897712319839e", "message": "Address review comments for Update Eclipselink projects to use GAV format. #14333\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>", "committedDate": "2020-10-12T21:31:34Z", "type": "forcePushed"}]}