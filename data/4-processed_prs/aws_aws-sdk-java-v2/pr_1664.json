{"pr_number": 1664, "pr_title": "First iteration of the BeanTableSchema implementation of TableSchema", "pr_createdAt": "2020-02-24T23:46:19Z", "pr_url": "https://github.com/aws/aws-sdk-java-v2/pull/1664", "timeline": [{"oid": "b7aba9eae85f8f16d8f3093f5ffa9de4cafd2e06", "url": "https://github.com/aws/aws-sdk-java-v2/commit/b7aba9eae85f8f16d8f3093f5ffa9de4cafd2e06", "message": "First iteration of the BeanTableSchema implementation of TableSchema", "committedDate": "2020-02-24T23:54:42Z", "type": "forcePushed"}, {"oid": "6c30acb2444f18bc1e1292a7561dd084ecf09925", "url": "https://github.com/aws/aws-sdk-java-v2/commit/6c30acb2444f18bc1e1292a7561dd084ecf09925", "message": "First iteration of the BeanTableSchema implementation of TableSchema", "committedDate": "2020-02-24T23:56:12Z", "type": "forcePushed"}, {"oid": "76c612bbfd38b5f30d0f131341902edb4abb1655", "url": "https://github.com/aws/aws-sdk-java-v2/commit/76c612bbfd38b5f30d0f131341902edb4abb1655", "message": "First iteration of the BeanTableSchema implementation of TableSchema", "committedDate": "2020-02-24T23:57:14Z", "type": "forcePushed"}, {"oid": "b343c3e5d9303965bd146c0c8857dc4da751a2e4", "url": "https://github.com/aws/aws-sdk-java-v2/commit/b343c3e5d9303965bd146c0c8857dc4da751a2e4", "message": "First iteration of the BeanTableSchema implementation of TableSchema", "committedDate": "2020-02-25T20:28:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE1NjA4NQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384156085", "bodyText": "Extra new line here", "author": "spfink", "createdAt": "2020-02-25T22:07:42Z", "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/annotations/BeanTableSchemaAttributeTag.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.annotations;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.extensions.dynamodb.mappingclient.staticmapper.AttributeTag;\n+\n+/**\n+ * This meta-annotation is not used directly in DynamoDb beans, it is used to annotate other annotations that are\n+ * used with DynamoDb beans. You should use this meta-annotation if you are creating new annotations for the\n+ * BeanTableSchema.\n+ *\n+ * Meta-annotation for BeanTableSchema annotations that are used to assign an {@link AttributeTag} to a property on the\n+ * bean. When an annotation that is annotated with this meta-annotation is found on a property being scanned by the\n+ * {@link software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.BeanTableSchema} then a static method\n+ * named 'attributeTagFor' will be invoked passing in a single argument which is the property annotation itself.\n+ */\n+@Target({ElementType.TYPE})\n+@Retention(RetentionPolicy.RUNTIME)\n+@SdkPublicApi\n+public @interface BeanTableSchemaAttributeTag {\n+    Class<?> value();\n+}\n+\n+", "originalCommit": "b343c3e5d9303965bd146c0c8857dc4da751a2e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE2MDc2Nw==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384160767", "bodyText": "Extra new line here", "author": "spfink", "createdAt": "2020-02-25T22:18:20Z", "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/BeanConstructor.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper;\n+\n+import java.lang.reflect.Constructor;\n+import java.util.function.Supplier;\n+\n+import software.amazon.awssdk.annotations.SdkInternalApi;\n+import software.amazon.awssdk.utils.Validate;\n+\n+@FunctionalInterface\n+@SdkInternalApi\n+@SuppressWarnings(\"unchecked\")\n+public interface BeanConstructor<BeanT> extends Supplier<BeanT> {\n+    static <BeanT> BeanConstructor<BeanT> create(Class<BeanT> beanClass, Constructor<BeanT> noArgsConstructor) {\n+        Validate.isTrue(noArgsConstructor.getParameterCount() == 0,\n+                        \"%s has no default constructor.\",\n+                        beanClass);\n+\n+        return LambdaToMethodBridgeBuilder.create(BeanConstructor.class)\n+                                          .lambdaMethodName(\"get\")\n+                                          .runtimeLambdaSignature(Object.class)\n+                                          .compileTimeLambdaSignature(beanClass)\n+                                          .targetMethod(noArgsConstructor)\n+                                          .build();\n+", "originalCommit": "b343c3e5d9303965bd146c0c8857dc4da751a2e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE2MjEzNA==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384162134", "bodyText": "Add javadoc here?", "author": "spfink", "createdAt": "2020-02-25T22:21:19Z", "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/annotations/DynamoDbAttribute.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.annotations;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+\n+/**\n+ * Used to explicitly designate a field or getter or setter to participate as an attribute in the mapped database\n+ * object with a custom name. A string value must be specified to specify a different name for the attribute than the\n+ * mapper would automatically infer using a naming strategy.\n+ */\n+@Target({ElementType.METHOD})\n+@Retention(RetentionPolicy.RUNTIME)\n+@SdkPublicApi\n+public @interface DynamoDbAttribute {\n+    String value();", "originalCommit": "b343c3e5d9303965bd146c0c8857dc4da751a2e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE2MjQ0NQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384162445", "bodyText": "Javadoc?", "author": "spfink", "createdAt": "2020-02-25T22:21:59Z", "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/annotations/DynamoDbSecondaryPartitionKey.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.annotations;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.BeanTableSchemaAttributeTags;\n+\n+/**\n+ * Denotes a partition key for a global secondary index. You must also specify at least one index name, although this\n+ * name is only referenced internally by the enhanced client to disambiguate the index and does not actually need to\n+ * match the real name of the index.\n+ */\n+@SdkPublicApi\n+@Target({ElementType.METHOD})\n+@Retention(RetentionPolicy.RUNTIME)\n+@BeanTableSchemaAttributeTag(BeanTableSchemaAttributeTags.class)\n+public @interface DynamoDbSecondaryPartitionKey {\n+    String[] indexNames();", "originalCommit": "b343c3e5d9303965bd146c0c8857dc4da751a2e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE2MjQ5OQ==", "url": "https://github.com/aws/aws-sdk-java-v2/pull/1664#discussion_r384162499", "bodyText": "Javadoc?", "author": "spfink", "createdAt": "2020-02-25T22:22:06Z", "path": "services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/extensions/dynamodb/mappingclient/beanmapper/annotations/DynamoDbSecondarySortKey.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *  http://aws.amazon.com/apache2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.annotations;\n+\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+import java.lang.annotation.Target;\n+\n+import software.amazon.awssdk.annotations.SdkPublicApi;\n+import software.amazon.awssdk.extensions.dynamodb.mappingclient.beanmapper.BeanTableSchemaAttributeTags;\n+\n+/**\n+ * Denotes an optional sort key for a global or local secondary index. You must also specify the index name which in the\n+ * case of a global secondary index must match the index name supplied with the secondary partition key for the same\n+ * index. This name is only referenced internally by the enhanced client to disambiguate the index and does not actually\n+ * need to match the real name of the index.\n+ */\n+@SdkPublicApi\n+@Target({ElementType.METHOD})\n+@Retention(RetentionPolicy.RUNTIME)\n+@BeanTableSchemaAttributeTag(BeanTableSchemaAttributeTags.class)\n+public @interface DynamoDbSecondarySortKey {\n+    String[] indexNames();", "originalCommit": "b343c3e5d9303965bd146c0c8857dc4da751a2e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "585e35982bde9a6e48a346b6accd2ff681315f4c", "url": "https://github.com/aws/aws-sdk-java-v2/commit/585e35982bde9a6e48a346b6accd2ff681315f4c", "message": "First iteration of the BeanTableSchema implementation of TableSchema", "committedDate": "2020-02-25T22:46:59Z", "type": "commit"}, {"oid": "585e35982bde9a6e48a346b6accd2ff681315f4c", "url": "https://github.com/aws/aws-sdk-java-v2/commit/585e35982bde9a6e48a346b6accd2ff681315f4c", "message": "First iteration of the BeanTableSchema implementation of TableSchema", "committedDate": "2020-02-25T22:46:59Z", "type": "forcePushed"}, {"oid": "a5a90c96f2c7a4e83a7acc5dbc1505e75e041461", "url": "https://github.com/aws/aws-sdk-java-v2/commit/a5a90c96f2c7a4e83a7acc5dbc1505e75e041461", "message": "Merge branch 'master' into bmaizels/ddbmapper-beantableschema", "committedDate": "2020-02-25T23:11:04Z", "type": "commit"}]}