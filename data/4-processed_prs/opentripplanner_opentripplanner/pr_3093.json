{"pr_number": 3093, "pr_title": "Updates to Entur sandbox modules: mode documentation, SiriSXUpdater bugfix, bikeRentalStations filter by id", "pr_createdAt": "2020-06-08T13:50:12Z", "pr_url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093", "timeline": [{"oid": "c41530a1c0789ee53636d1d9d94f9c489a38deba", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c41530a1c0789ee53636d1d9d94f9c489a38deba", "message": "Add graphql fields required for Entur client", "committedDate": "2020-06-08T13:46:55Z", "type": "commit"}, {"oid": "db35dfe88600436b48f5f2b809efe01c1a612abe", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/db35dfe88600436b48f5f2b809efe01c1a612abe", "message": "Fix SiriSX AlertPatchService not being initalized", "committedDate": "2020-06-08T13:46:55Z", "type": "commit"}, {"oid": "2755f41e6aeae6291c551229547d58700cab0c9e", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2755f41e6aeae6291c551229547d58700cab0c9e", "message": "Updated transmodel api doc", "committedDate": "2020-06-09T10:11:41Z", "type": "commit"}, {"oid": "2755f41e6aeae6291c551229547d58700cab0c9e", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2755f41e6aeae6291c551229547d58700cab0c9e", "message": "Updated transmodel api doc", "committedDate": "2020-06-09T10:11:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgyMzg0MQ==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#discussion_r438823841", "bodyText": "No need to use a local variable here?", "author": "t2gran", "createdAt": "2020-06-11T14:22:10Z", "path": "src/ext/java/org/opentripplanner/ext/siri/updater/SiriSXUpdater.java", "diffHunk": "@@ -82,6 +82,7 @@ public void setGraphUpdaterManager(GraphUpdaterManager updaterManager) {\n     @Override\n     public void setup(Graph graph) {\n         AlertPatchService alertPatchService = new AlertPatchServiceImpl(graph);\n+        this.alertPatchService = alertPatchService;", "originalCommit": "2755f41e6aeae6291c551229547d58700cab0c9e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c1e2a48c6d2c6e057d773c157d6046d10d23ed59", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c1e2a48c6d2c6e057d773c157d6046d10d23ed59", "message": "Remove redundant local variable", "committedDate": "2020-06-12T09:36:19Z", "type": "commit"}, {"oid": "5aa61e5a6f948b7127f0d36ffe003ca5a50abb82", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5aa61e5a6f948b7127f0d36ffe003ca5a50abb82", "message": "Merge branch 'dev-2.x' into otp2_sandbox_fixes", "committedDate": "2020-06-12T11:57:26Z", "type": "commit"}, {"oid": "c33ed322aeae7d622417a8613ffb5f0cccbb10b9", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c33ed322aeae7d622417a8613ffb5f0cccbb10b9", "message": "Add filtering by id to bikeRentalStations API call", "committedDate": "2020-06-17T10:03:46Z", "type": "commit"}, {"oid": "56194b8841f899160ca5afcd95b77a61ee068bb2", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/56194b8841f899160ca5afcd95b77a61ee068bb2", "message": "Merge branch 'dev-2.x' into otp2_sandbox_fixes", "committedDate": "2020-06-17T11:25:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3NTIzNg==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#discussion_r441475236", "bodyText": "Double ;;", "author": "t2gran", "createdAt": "2020-06-17T11:28:10Z", "path": "src/ext/java/org/opentripplanner/ext/siri/updater/SiriSXUpdater.java", "diffHunk": "@@ -81,7 +81,7 @@ public void setGraphUpdaterManager(GraphUpdaterManager updaterManager) {\n \n     @Override\n     public void setup(Graph graph) {\n-        AlertPatchService alertPatchService = new AlertPatchServiceImpl(graph);\n+        this.alertPatchService = new AlertPatchServiceImpl(graph);;", "originalCommit": "56194b8841f899160ca5afcd95b77a61ee068bb2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3NjI2MQ==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#discussion_r441476261", "bodyText": "FYI: This code is deleted in my PR - it is deprecated", "author": "t2gran", "createdAt": "2020-06-17T11:30:21Z", "path": "src/ext/java/org/opentripplanner/ext/transmodelapi/TransmodelIndexGraphQLSchema.java", "diffHunk": "@@ -1169,6 +1187,13 @@ public TransmodelIndexGraphQLSchema(Graph graph, RoutingRequest defaultRequest)\n                             }\n                         })\n                         .build())\n+                .field(GraphQLFieldDefinition.newFieldDefinition()\n+                        .name(\"infoLink\")\n+                        .type(Scalars.GraphQLString)\n+                        .deprecate(\"Use the attribute infoLinks instead.\")\n+                        .description(\"Url with more information\")\n+                        .dataFetcher(environment -> ((AlertPatch) environment.getSource()).getAlert().alertUrl)\n+                        .build())", "originalCommit": "56194b8841f899160ca5afcd95b77a61ee068bb2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3NjYyNw==", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#discussion_r441476627", "bodyText": "FYI: This code is deleted in my PR - it is deprecated", "author": "t2gran", "createdAt": "2020-06-17T11:31:06Z", "path": "src/ext/java/org/opentripplanner/ext/transmodelapi/TransmodelIndexGraphQLSchema.java", "diffHunk": "@@ -1153,6 +1154,23 @@ public TransmodelIndexGraphQLSchema(Graph graph, RoutingRequest defaultRequest)\n                             }\n                         })\n                         .build())\n+                .field(GraphQLFieldDefinition.newFieldDefinition()\n+                        .name(\"detail\")\n+                        .type(new GraphQLNonNull(new GraphQLList(new GraphQLNonNull(multilingualStringType))))\n+                        .description(\"Details of situation in all different translations available\")\n+                        .deprecate(\"Not allowed according to profile. Use \u00b4advice\u00b4 instead.\")\n+                        .dataFetcher(environment -> {\n+                            AlertPatch alertPatch = environment.getSource();\n+                            Alert alert = alertPatch.getAlert();\n+                            if (alert.alertDetailText instanceof TranslatedString) {\n+                                return ((TranslatedString) alert.alertDetailText).getTranslations();\n+                            } else if (alert.alertDetailText != null) {\n+                                return Arrays.asList(new AbstractMap.SimpleEntry<>(null, alert.alertDetailText.toString()));\n+                            } else {\n+                                return emptyList();\n+                            }\n+                        })\n+                        .build())", "originalCommit": "56194b8841f899160ca5afcd95b77a61ee068bb2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d6b7bd6d1c15093703b61811bd4b2048ee36cc63", "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d6b7bd6d1c15093703b61811bd4b2048ee36cc63", "message": "Merge fixes", "committedDate": "2020-06-17T11:46:56Z", "type": "commit"}]}