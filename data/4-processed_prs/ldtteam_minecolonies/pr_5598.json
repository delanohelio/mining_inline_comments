{"pr_number": 5598, "pr_title": "Bring skill effects into alignment with plan for crafters", "pr_createdAt": "2020-08-17T20:10:01Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5598", "timeline": [{"oid": "a69f928814c3798eb65af9618304c5c70c8ac12e", "url": "https://github.com/ldtteam/minecolonies/commit/a69f928814c3798eb65af9618304c5c70c8ac12e", "message": "rework skill effects for crafters", "committedDate": "2020-08-17T20:07:40Z", "type": "commit"}, {"oid": "c9cce0b77b216fe2707cbca646e0e2102377d007", "url": "https://github.com/ldtteam/minecolonies/commit/c9cce0b77b216fe2707cbca646e0e2102377d007", "message": "Let skill effect furnace burn speed for smelter", "committedDate": "2020-08-17T20:07:59Z", "type": "commit"}, {"oid": "58c3d996388cadc6022d11c262437e015757c885", "url": "https://github.com/ldtteam/minecolonies/commit/58c3d996388cadc6022d11c262437e015757c885", "message": "Fix the Crusher to respond to clay_ball requests", "committedDate": "2020-08-17T22:25:22Z", "type": "commit"}, {"oid": "23463cd17b076403b5b9e69c0bb297b4e21defd4", "url": "https://github.com/ldtteam/minecolonies/commit/23463cd17b076403b5b9e69c0bb297b4e21defd4", "message": "A couple of small recipe additions", "committedDate": "2020-08-17T22:25:38Z", "type": "commit"}, {"oid": "6167d9a721bb614c809524cc53dc2cc55b3397bc", "url": "https://github.com/ldtteam/minecolonies/commit/6167d9a721bb614c809524cc53dc2cc55b3397bc", "message": "Add colored to white wool recipe", "committedDate": "2020-08-18T02:35:12Z", "type": "commit"}, {"oid": "68c6dee44c915a9f9b6da2cf448d0d6da7889812", "url": "https://github.com/ldtteam/minecolonies/commit/68c6dee44c915a9f9b6da2cf448d0d6da7889812", "message": "formatting and cleanup", "committedDate": "2020-08-18T03:27:42Z", "type": "commit"}, {"oid": "1a558468b92384d419b3708dd3628743410c9505", "url": "https://github.com/ldtteam/minecolonies/commit/1a558468b92384d419b3708dd3628743410c9505", "message": "Resolve multiple recipes in the same crafter", "committedDate": "2020-08-18T03:28:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk5MDQxNg==", "url": "https://github.com/ldtteam/minecolonies/pull/5598#discussion_r471990416", "bodyText": "this should probably go into the crafter building", "author": "Raycoms", "createdAt": "2020-08-18T08:00:34Z", "path": "src/api/java/com/minecolonies/api/colony/buildings/IBuildingWorker.java", "diffHunk": "@@ -207,6 +207,20 @@\n     @NotNull\n     Skill getSecondarySkill();\n \n+    /**\n+     * Crafting Speed skill\n+     * @return the crafting speed skill\n+     */\n+    @NotNull\n+    Skill getCraftSpeedSkill();\n+\n+    /**\n+     *  Recipe Improvement skill getter\n+     * @return the recipe improvement skill\n+     */\n+    @NotNull\n+    Skill getRecipeImprovementSkill();\n+", "originalCommit": "1a558468b92384d419b3708dd3628743410c9505", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjMyNjA5Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/5598#discussion_r472326093", "bodyText": "done.", "author": "Mekle001", "createdAt": "2020-08-18T16:29:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk5MDQxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk5MjQxMw==", "url": "https://github.com/ldtteam/minecolonies/pull/5598#discussion_r471992413", "bodyText": "I think we should wait for the multithreaded simulation solution before doing this. This can get extremely expensive. If this is executed every call. The same thing for the \"inWarehouse\" general solution. I think we should wait for the threaded solution first before we take this step.", "author": "Raycoms", "createdAt": "2020-08-18T08:04:15Z", "path": "src/main/java/com/minecolonies/coremod/colony/buildings/workerbuildings/BuildingDyer.java", "diffHunk": "@@ -196,6 +208,68 @@ public void requestUpgrade(final PlayerEntity player, final BlockPos builder)\n         super.requestUpgrade(player, builder);\n     }\n \n+    @Override\n+    public IRecipeStorage getFirstRecipe(Predicate<ItemStack> stackPredicate)\n+    {\n+        IRecipeStorage recipe = super.getFirstRecipe(stackPredicate);\n+\n+        if(recipe == null && stackPredicate.test(new ItemStack(Items.WHITE_WOOL)))\n+        {\n+            final ResourceLocation wool = new ResourceLocation(\"minecraft\", \"wool\");\n+            final HashMap<ItemStorage, Integer> inventoryCounts = new HashMap<>();\n+\n+            final Set<IBuilding> wareHouses = colony.getBuildingManager().getBuildings().values().stream()\n+                                                    .filter(building -> building instanceof BuildingWareHouse)\n+                                                    .collect(Collectors.toSet());\n+            \n+            final List<ItemStorage> woolItems = ItemTags.getCollection().getOrCreate(wool).getAllElements().stream()", "originalCommit": "1a558468b92384d419b3708dd3628743410c9505", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI4NTM1Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/5598#discussion_r472285352", "bodyText": "It's actually pretty fast. In the dyer case it ONLY queries the warehouse when trying to produce white wool. And I just submitted a change to only query the warehouse in the general case when there are duplicate output recipes.", "author": "Mekle001", "createdAt": "2020-08-18T15:29:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTk5MjQxMw=="}], "type": "inlineReview"}, {"oid": "18647a8e865176e771a52fdd17a9135c59dbf70f", "url": "https://github.com/ldtteam/minecolonies/commit/18647a8e865176e771a52fdd17a9135c59dbf70f", "message": "Limit warehouse queries to only the duplicates", "committedDate": "2020-08-18T15:27:49Z", "type": "commit"}, {"oid": "065555c9a142e5801ca66bb00d09544ae24f7b51", "url": "https://github.com/ldtteam/minecolonies/commit/065555c9a142e5801ca66bb00d09544ae24f7b51", "message": "Move getCraftingSpeedSkill to Crafter Building", "committedDate": "2020-08-18T16:06:06Z", "type": "commit"}]}