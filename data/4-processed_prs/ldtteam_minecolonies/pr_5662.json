{"pr_number": 5662, "pr_title": "Show a tooltip on not yet researched hut blocks", "pr_createdAt": "2020-08-27T20:10:36Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5662", "timeline": [{"oid": "8ebe887e2e3c2bbd734b26c3df2d29d887b68848", "url": "https://github.com/ldtteam/minecolonies/commit/8ebe887e2e3c2bbd734b26c3df2d29d887b68848", "message": "Show a chat message when crafting a not yet researched hut block", "committedDate": "2020-08-27T20:07:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MjI2MA==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r478682260", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              \"com.minecolonies.coremod.research.crafted\": \"You just crafted the %s, to build it you need research it at the university first.\",\n          \n          \n            \n              \"com.minecolonies.coremod.research.crafted\": \"You just crafted the %s. To build it, you must first complete its research at the University.\",", "author": "ravenbuilder934", "createdAt": "2020-08-27T20:39:30Z", "path": "src/main/resources/assets/minecolonies/lang/en_us.json", "diffHunk": "@@ -1386,6 +1386,7 @@\n   \"com.minecolonies.coremod.research.requirementnotmet\": \"Minimum research requirement not met!\",\n   \"com.minecolonies.coremod.research.started\": \"Research successfully started!\",\n   \"com.minecolonies.coremod.research.havetounlock\": \"Build a University and research this hut to unlock it!\",\n+  \"com.minecolonies.coremod.research.crafted\": \"You just crafted the %s, to build it you need research it at the university first.\",", "originalCommit": "8ebe887e2e3c2bbd734b26c3df2d29d887b68848", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MzQ0Ng==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r478683446", "bodyText": "you could understand that as \"you have to research everything before you can build this\", as \"complete the research\" can mean \"finish researching this one thing\" or \"research everything\".", "author": "ToMe25", "createdAt": "2020-08-27T20:41:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MjI2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4NDA4NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r478684085", "bodyText": "I replaced 'complete the research' with 'complete its research.' Does that make more sense?", "author": "ravenbuilder934", "createdAt": "2020-08-27T20:43:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MjI2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4NDY0OA==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r478684648", "bodyText": "yes, this way i can't mean \"research everything\" anymore.", "author": "ToMe25", "createdAt": "2020-08-27T20:44:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MjI2MA=="}], "type": "inlineReview"}, {"oid": "2d9462b870b9a34c9d6ed32f6c042407f448f8e4", "url": "https://github.com/ldtteam/minecolonies/commit/2d9462b870b9a34c9d6ed32f6c042407f448f8e4", "message": "Update src/main/resources/assets/minecolonies/lang/en_us.json\r\n\r\nchange chat message\n\nCo-authored-by: ravenbuilder934 <sabrinajamie@outlook.com>", "committedDate": "2020-08-27T20:44:41Z", "type": "commit"}, {"oid": "cedf4e197ea588461238b856a1318f34a2888ccd", "url": "https://github.com/ldtteam/minecolonies/commit/cedf4e197ea588461238b856a1318f34a2888ccd", "message": "Merge branch 'version/1.15' into feature/research_crafting_message", "committedDate": "2020-08-28T09:13:30Z", "type": "commit"}, {"oid": "f3a9a98b774d7f1a8bf35bf8a7db93aeb0b1f478", "url": "https://github.com/ldtteam/minecolonies/commit/f3a9a98b774d7f1a8bf35bf8a7db93aeb0b1f478", "message": "Replace chat message with a tooltip\n\nThe way it checks all items isn't finished yet, its just this way to\ntest everything else, cause i can't seem to find a good way to do that.", "committedDate": "2020-08-28T14:05:13Z", "type": "commit"}, {"oid": "083d8994e9c36cbc5d1951f85f57ca5979718dee", "url": "https://github.com/ldtteam/minecolonies/commit/083d8994e9c36cbc5d1951f85f57ca5979718dee", "message": "Fix abstractBlockHut formatting", "committedDate": "2020-08-28T14:09:00Z", "type": "commit"}, {"oid": "a97d233a0a689fb262482bf16e49ff57bc24cd98", "url": "https://github.com/ldtteam/minecolonies/commit/a97d233a0a689fb262482bf16e49ff57bc24cd98", "message": "Move some item code to the block\n\nto remove the need for the item list.\nAlso add tooltips to some blocks i missed.", "committedDate": "2020-08-28T14:56:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyMDYxMA==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479420610", "bodyText": "formatting", "author": "Raycoms", "createdAt": "2020-08-28T16:46:45Z", "path": "src/api/java/com/minecolonies/api/blocks/AbstractBlockHut.java", "diffHunk": "@@ -269,4 +279,25 @@ public void onBlockPlacedByBuildTool(\n \n         onBlockPlacedBy(worldIn, pos, state, placer, stack);\n     }\n+\n+    /**\n+     * Checks whether this block is yet to be researched.\n+     * \n+     * @param colony the colony this is crafted in.\n+     * @return true if this block needs to be researched before building its hut.\n+     */\n+    public void checkResearch(final IColony colony)\n+    {\n+        needsResearch = false;\n+    }\n+\n+    @Override\n+    public void registerBlockItem(IForgeRegistry<Item> registry, net.minecraft.item.Item.Properties properties) {\n+        registry.register((new ItemBlockHut(this, properties)).setRegistryName(this.getRegistryName()));", "originalCommit": "a97d233a0a689fb262482bf16e49ff57bc24cd98", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQzNDY5MQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479434691", "bodyText": "sorry, missed that one.", "author": "ToMe25", "createdAt": "2020-08-28T17:14:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyMDYxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ0NjMxMQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479446311", "bodyText": "done.", "author": "ToMe25", "createdAt": "2020-08-28T17:38:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyMDYxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyMTI4OA==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479421288", "bodyText": "this will be done on each chunk a player enters, might be a bit too much?", "author": "Raycoms", "createdAt": "2020-08-28T16:48:12Z", "path": "src/main/java/com/minecolonies/coremod/colony/Colony.java", "diffHunk": "@@ -1482,6 +1484,7 @@ public void addVisitingPlayer(final PlayerEntity player)\n     @Override\n     public void removeVisitingPlayer(final PlayerEntity player)\n     {\n+        ItemBlockHut.checkResearch(null);", "originalCommit": "a97d233a0a689fb262482bf16e49ff57bc24cd98", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQzNDUxMQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479434511", "bodyText": "I think this will only be done once, when the player leaves the colony.", "author": "ToMe25", "createdAt": "2020-08-28T17:14:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyMTI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQzNTI5MQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479435291", "bodyText": "We do the list checks a lot here. So I'm not sure if this is called on every entry and exit of a chunk.", "author": "Raycoms", "createdAt": "2020-08-28T17:15:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyMTI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQzNzY0Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479437643", "bodyText": "I have looked at every method calling this, and to me it looks like this is only called if an entity leaves a chunk into one that is claimed by another colony(or none), and if a player leaves a dimension.", "author": "ToMe25", "createdAt": "2020-08-28T17:20:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyMTI4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQzOTQ5Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479439497", "bodyText": "Then it's fine.", "author": "Raycoms", "createdAt": "2020-08-28T17:24:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQyMTI4OA=="}], "type": "inlineReview"}, {"oid": "66a196bae3eaf513ad9d2c1e1a238ad712f11217", "url": "https://github.com/ldtteam/minecolonies/commit/66a196bae3eaf513ad9d2c1e1a238ad712f11217", "message": "Implement feedback\n\n * Fix AbstractBlockHut formatting\n * Add checkResearch(Colony, String) utility method\n * Move research rechecking in BuildingUniversity into the finished if", "committedDate": "2020-08-28T17:38:24Z", "type": "commit"}, {"oid": "f2ae707f11d9d6fcae3e1ca742d570f334a99c21", "url": "https://github.com/ldtteam/minecolonies/commit/f2ae707f11d9d6fcae3e1ca742d570f334a99c21", "message": "Add research name constants to the ResearchInitializer", "committedDate": "2020-08-28T18:52:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NTU2Ng==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479595566", "bodyText": "Remember that the Block classes are merely definitions, so this is defining whether research is needed for every AbstractHutBlock blockstate, everywhere, in every world.\nThis information must be stored per ItemStack in NBT. Then the check needs to search through all ItemStacks in the relevant player'/s inventory for a relevant Hut and update the stack NBT.", "author": "ShadowProtocol", "createdAt": "2020-08-29T02:21:38Z", "path": "src/api/java/com/minecolonies/api/blocks/AbstractBlockHut.java", "diffHunk": "@@ -72,6 +78,11 @@\n      */\n     private static final VoxelShape SHAPE = VoxelShapes.create(0.1, 0.1, 0.1, 0.9, 0.9, 0.9);\n \n+    /**\n+     * Whether this hut is yet to be researched in the current colony.\n+     */\n+    protected boolean needsResearch = false;", "originalCommit": "f2ae707f11d9d6fcae3e1ca742d570f334a99c21", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNjE0OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479626149", "bodyText": "I will look this up later, but isn't addInformation client side only?\nIn that case its perfectly fine if its the case for every instance of the block, because its only whether or not the tooltip gets rendered for this player.", "author": "ToMe25", "createdAt": "2020-08-29T08:35:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NTU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNzA5NA==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479627094", "bodyText": "I looked it up, and in BlockItem addInformation is @OnlyIn(Dist.CLIENT), so i think it should be fine on servers too.\nI will test whether it actually works on a dedicated server, but i don't know why it wouldn't.", "author": "ToMe25", "createdAt": "2020-08-29T08:47:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NTU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyNzg1NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479627855", "bodyText": "Finally figured out why it might not work xD\nIts because the colony check only works server side, but is nbt really the only solution?\nCouldn't the client store it somewhere, and it wouldn't be that much of a performance hit.\nThe client needs to know the researches anywhere anyways, can't i just use that for the check then?", "author": "ToMe25", "createdAt": "2020-08-29T08:55:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NTU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyODA3Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479628073", "bodyText": "The research effects are synched to the client afaik", "author": "Raycoms", "createdAt": "2020-08-29T08:58:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NTU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyODA3NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479628075", "bodyText": "I know that addInformation is Client only, that's not what I am referring to. It's the other stuff that isn't client side only that may cause problems, like the needsResearch variable on the server (which is not purely Client based). It will be reflected through all the other blockstates. Sorry if I'm not making sense, but this problem is probably not very obvious with only one player.", "author": "ShadowProtocol", "createdAt": "2020-08-29T08:59:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NTU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYyODU4Ng==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479628586", "bodyText": "this problem is probably not very obvious with only one player.\n\nIt is. I just tested it, and the tooltips just aren't showing up at all on a dedicated server.\n\nThe research effects are synched to the client afaik\n\nThx, i will look for them.", "author": "ToMe25", "createdAt": "2020-08-29T09:05:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NTU2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYzMTk0NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479631945", "bodyText": "The only thing not working with the new commit, is if you leave a colony into wilderness, it keeps all the tooltips, even after going into another world.", "author": "ToMe25", "createdAt": "2020-08-29T09:46:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NTU2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NjEyNg==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479596126", "bodyText": "You need to check this from the stack's NBT here, as it is the only thing that is actually representing the item \"instance\" the player is working with.", "author": "ShadowProtocol", "createdAt": "2020-08-29T02:27:54Z", "path": "src/main/java/com/minecolonies/coremod/items/ItemBlockHut.java", "diffHunk": "@@ -0,0 +1,58 @@\n+package com.minecolonies.coremod.items;\n+\n+import java.util.List;\n+\n+import com.minecolonies.api.blocks.AbstractBlockHut;\n+import com.minecolonies.api.blocks.ModBlocks;\n+import com.minecolonies.api.colony.IColony;\n+import com.minecolonies.api.util.constant.TranslationConstants;\n+\n+import net.minecraft.client.util.ITooltipFlag;\n+import net.minecraft.item.BlockItem;\n+import net.minecraft.item.ItemStack;\n+import net.minecraft.util.text.ITextComponent;\n+import net.minecraft.util.text.TranslationTextComponent;\n+import net.minecraft.world.World;\n+\n+/**\n+ * A custom item class for hut blocks.\n+ */\n+public class ItemBlockHut extends BlockItem\n+{\n+\n+\t/**\n+\t * This items block.\n+\t */\n+    private AbstractBlockHut<?> block;\n+\n+    public ItemBlockHut(AbstractBlockHut<?> block, Properties builder)\n+    {\n+        super(block, builder);\n+        this.block = block;\n+    }\n+\n+    @Override\n+    public void addInformation(ItemStack stack, World worldIn, List<ITextComponent> tooltip, ITooltipFlag flagIn)\n+    {\n+        super.addInformation(stack, worldIn, tooltip, flagIn);\n+        if (block.needsResearch())", "originalCommit": "f2ae707f11d9d6fcae3e1ca742d570f334a99c21", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYzMjQ3NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479632475", "bodyText": "I prefer solutions that don't require nbt on every itemstack, even the forge docu says something like \"don't use itemstack nbt if not absolutely necessary\".", "author": "ToMe25", "createdAt": "2020-08-29T09:53:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NjEyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTYzMjgwNw==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479632807", "bodyText": "Yeah, custom nbt data on stacks might cause numerous issues as they won't be accepted by the builder for example anymore", "author": "Raycoms", "createdAt": "2020-08-29T09:57:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU5NjEyNg=="}], "type": "inlineReview"}, {"oid": "12ce4c0d4c860ae50e3ab672c79975fc668b33be", "url": "https://github.com/ldtteam/minecolonies/commit/12ce4c0d4c860ae50e3ab672c79975fc668b33be", "message": "Make the tooltip work on dedicated servers", "committedDate": "2020-08-29T09:45:25Z", "type": "commit"}, {"oid": "4fa9789c36dc7eb6b6ff43af6e3c5d91b34696c2", "url": "https://github.com/ldtteam/minecolonies/commit/4fa9789c36dc7eb6b6ff43af6e3c5d91b34696c2", "message": "Merge branch 'version/1.15' into feature/research_crafting_message", "committedDate": "2020-08-29T09:48:03Z", "type": "commit"}, {"oid": "38b449e025f2022ad1ac0331e71677fa272a18c9", "url": "https://github.com/ldtteam/minecolonies/commit/38b449e025f2022ad1ac0331e71677fa272a18c9", "message": "Reset research messages on world unloading", "committedDate": "2020-08-29T10:34:43Z", "type": "commit"}, {"oid": "edc50f71a77d61024b2423b6dd90345cfe0043b5", "url": "https://github.com/ldtteam/minecolonies/commit/edc50f71a77d61024b2423b6dd90345cfe0043b5", "message": "Check whether the player is actually inside the colony\n\nbefore checking the tooltips", "committedDate": "2020-08-29T10:52:52Z", "type": "commit"}, {"oid": "83e9bc2a6521323f4351049930fe80e572e0f83b", "url": "https://github.com/ldtteam/minecolonies/commit/83e9bc2a6521323f4351049930fe80e572e0f83b", "message": "Add @OnlyIn(Dist.CLIENT) to all the client side only methods.\n\nadding it to the needsResearch field would cause the server to crash.", "committedDate": "2020-08-29T11:36:22Z", "type": "commit"}, {"oid": "9ff8a71b3d2405db83080a1691fdbaa18e2a9e28", "url": "https://github.com/ldtteam/minecolonies/commit/9ff8a71b3d2405db83080a1691fdbaa18e2a9e28", "message": "Merge branch 'version/1.15' into feature/research_crafting_message", "committedDate": "2020-08-29T18:04:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTcxODU4Nw==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479718587", "bodyText": "This is introducing a circular dependency. Maybe some of the research stuff can be boosted into the API?", "author": "ShadowProtocol", "createdAt": "2020-08-30T04:06:07Z", "path": "src/api/java/com/minecolonies/api/blocks/AbstractBlockHut.java", "diffHunk": "@@ -12,13 +12,17 @@\n import com.minecolonies.api.tileentities.AbstractTileEntityColonyBuilding;\n import com.minecolonies.api.tileentities.MinecoloniesTileEntities;\n import com.minecolonies.api.tileentities.TileEntityColonyBuilding;\n+import com.minecolonies.coremod.items.ItemBlockHut;\n+import com.minecolonies.coremod.research.UnlockBuildingResearchEffect;", "originalCommit": "9ff8a71b3d2405db83080a1691fdbaa18e2a9e28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTczMDMxOQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479730319", "bodyText": "The Item is necessary in this class, because this class is the one that needs to register it, also moving the item to the api shouldn't cause any problems.\nI am however not sure how to handle UnlockBuildingResearchEffect, as it would be possible to not use it in here by moving the checkResearch(IColony, String) method to a utility class.\nI don't think there is a utility class where it would fit tho.", "author": "ToMe25", "createdAt": "2020-08-30T06:48:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTcxODU4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTc5NzUxMg==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479797512", "bodyText": "This should be solved now.", "author": "ToMe25", "createdAt": "2020-08-30T17:52:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTcxODU4Nw=="}], "type": "inlineReview"}, {"oid": "40204496eb0b01612ee818de27f249c194eaca25", "url": "https://github.com/ldtteam/minecolonies/commit/40204496eb0b01612ee818de27f249c194eaca25", "message": "Merge branch 'version/1.15' into feature/research_crafting_message", "committedDate": "2020-08-30T06:48:20Z", "type": "commit"}, {"oid": "482135026cf00a427576ea05cbc6f9bb134ab727", "url": "https://github.com/ldtteam/minecolonies/commit/482135026cf00a427576ea05cbc6f9bb134ab727", "message": "Move ItemBlockHut to api", "committedDate": "2020-08-30T06:57:39Z", "type": "commit"}, {"oid": "ab94f52d36e56dd0ecc5b1ae6fcc5657e0052994", "url": "https://github.com/ldtteam/minecolonies/commit/ab94f52d36e56dd0ecc5b1ae6fcc5657e0052994", "message": "Add ItemBlockHut constructor javadoc", "committedDate": "2020-08-30T07:06:10Z", "type": "commit"}, {"oid": "b39accc371cdcec618063b9fa9d832a0d90136e6", "url": "https://github.com/ldtteam/minecolonies/commit/b39accc371cdcec618063b9fa9d832a0d90136e6", "message": "Change AbstractBlockHut UnlockBuildingResearchEffect references\n\nto AbstractResearchEffect.\nAlso change checkResearch IColony parameter to a IColonyView parameter", "committedDate": "2020-08-30T17:52:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg2MjMyNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479862325", "bodyText": "This is all looking good. My final nitpick, more of an opinion:\nSeeing as the building name is right above this message in the tool-tip, it doesn't need to be included again. Also I think we can get it on one line. My suggestion is \"Requires research at the University for hut construction\"\nEDIT: depending on how long that is in monospace it might still be better on two lines. shrugs however you think.", "author": "ShadowProtocol", "createdAt": "2020-08-31T02:51:49Z", "path": "src/main/resources/assets/minecolonies/lang/en_us.json", "diffHunk": "@@ -1387,6 +1387,8 @@\n   \"com.minecolonies.coremod.research.requirementnotmet\": \"Minimum research requirement not met!\",\n   \"com.minecolonies.coremod.research.started\": \"Research successfully started!\",\n   \"com.minecolonies.coremod.research.havetounlock\": \"Build a University and research this hut to unlock it!\",\n+  \"com.minecolonies.coremod.research.item1\": \"\u00a7cTo build the %s, you first need\",\n+  \"com.minecolonies.coremod.research.item2\": \"\u00a7cto complete its research in the University.\",", "originalCommit": "b39accc371cdcec618063b9fa9d832a0d90136e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1MTA5OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479951099", "bodyText": "While i would like a message that is short enough that it can reasonably be one line, i also like the name of the Hut being in the tooltip.\nNot sure what i will do about that yet.", "author": "ToMe25", "createdAt": "2020-08-31T07:37:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg2MjMyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk2NTMwNw==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479965307", "bodyText": "I tried shortening the tooltip until it could reasonably fit one line, but the shortest i could get it to still needs two lines to match the few vanilla tooltips.", "author": "ToMe25", "createdAt": "2020-08-31T08:05:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg2MjMyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk2NjI3Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479966273", "bodyText": "The name of the hut in the message is just unnecessary repetition, thus it is the least important piece of information in the tool-tip. The player will simply gloss over that information. But hey if you really want it there I suppose it makes very little difference either way.", "author": "ShadowProtocol", "createdAt": "2020-08-31T08:07:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg2MjMyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk2NzgzNw==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479967837", "bodyText": "I tried removing it, but imo that makes it too generic to fit what it should say.\nImo it stops mainly saying \"You need to research me\" and instead mainly says \"I am a generic tooltip most of these huts have\", thats why i feel like it should stay, even if it is unnecessary information.", "author": "ToMe25", "createdAt": "2020-08-31T08:10:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg2MjMyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk2ODk2Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479968963", "bodyText": "I think it might work if the tooltip was even shorter, but i don't think there is anything but the hut name that can be removed without changing the message.", "author": "ToMe25", "createdAt": "2020-08-31T08:13:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg2MjMyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk2OTQ5NQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479969495", "bodyText": "Fair enough, I can see that side of things.\nI mean for super bonus points you could say which research is required instead, but I don't think that's worth the effort \ud83d\ude04", "author": "ShadowProtocol", "createdAt": "2020-08-31T08:14:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg2MjMyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk3MTUzNg==", "url": "https://github.com/ldtteam/minecolonies/pull/5662#discussion_r479971536", "bodyText": "That would be nice, but the addInformation method doesn't have access to that.\nAlso the block currently can't really get that information either, because the effect doesn't seem to store that.\nAnd i don't think a solution that requires storing that in the block anyways is worth that much effort :)", "author": "ToMe25", "createdAt": "2020-08-31T08:18:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg2MjMyNQ=="}], "type": "inlineReview"}, {"oid": "dfb0d92eae3ad332470b4de10cf841976852f167", "url": "https://github.com/ldtteam/minecolonies/commit/dfb0d92eae3ad332470b4de10cf841976852f167", "message": "Merge branch 'version/1.15' into feature/research_crafting_message", "committedDate": "2020-08-31T07:37:18Z", "type": "commit"}, {"oid": "421ef4b8009a4e341bb0da0b0733678002582cd2", "url": "https://github.com/ldtteam/minecolonies/commit/421ef4b8009a4e341bb0da0b0733678002582cd2", "message": "Shorten the tooltip", "committedDate": "2020-08-31T08:04:20Z", "type": "commit"}, {"oid": "084960862dde11d01953291cf0ce90434760d8e3", "url": "https://github.com/ldtteam/minecolonies/commit/084960862dde11d01953291cf0ce90434760d8e3", "message": "Merge branch 'version/1.15' into feature/research_crafting_message", "committedDate": "2020-09-01T15:13:22Z", "type": "commit"}]}