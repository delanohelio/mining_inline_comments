{"pr_number": 4901, "pr_title": "Fix/miner", "pr_createdAt": "2020-05-06T11:00:24Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/4901", "timeline": [{"oid": "4fa1fc95a06ada853ea517450dd6974d1e110240", "url": "https://github.com/ldtteam/minecolonies/commit/4fa1fc95a06ada853ea517450dd6974d1e110240", "message": "Make miners repair their ladders", "committedDate": "2020-05-05T17:35:49Z", "type": "commit"}, {"oid": "77500aa75ea0b5ab418c4246665ff80782f81cf4", "url": "https://github.com/ldtteam/minecolonies/commit/77500aa75ea0b5ab418c4246665ff80782f81cf4", "message": "make miner build shafts always at the same heights\n\nfix ladder repair not removing torches and signs", "committedDate": "2020-05-06T10:57:25Z", "type": "commit"}, {"oid": "371c00dc755519f04b75a2e855f773a745121274", "url": "https://github.com/ldtteam/minecolonies/commit/371c00dc755519f04b75a2e855f773a745121274", "message": "Merge branch 'version/1.15' into fix/miner", "committedDate": "2020-05-06T11:02:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwODYxNA==", "url": "https://github.com/ldtteam/minecolonies/pull/4901#discussion_r420708614", "bodyText": "might make sense to put this in a utility functin that returns true if repair and else false", "author": "Raycoms", "createdAt": "2020-05-06T11:06:31Z", "path": "src/main/java/com/minecolonies/coremod/entity/ai/citizen/miner/EntityAIStructureMiner.java", "diffHunk": "@@ -398,17 +445,45 @@ private IAIState advanceLadder(final IAIState state)\n             return state;\n         }\n \n+        @NotNull final BlockPos nextLadder =\n+                new BlockPos(getOwnBuilding().getLadderLocation().getX(), getLastLadder(getOwnBuilding().getLadderLocation(), world) - 1, getOwnBuilding().getLadderLocation().getZ());\n+        final int xOffset = SHAFT_RADIUS * getOwnBuilding().getVectorX();\n+        final int zOffset = SHAFT_RADIUS * getOwnBuilding().getVectorZ();\n+        boolean repair = true;\n+\n+        if (world.getBlockState(nextLadder).getBlock() instanceof AirBlock)", "originalCommit": "371c00dc755519f04b75a2e855f773a745121274", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwOTQ0Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/4901#discussion_r420709443", "bodyText": "yes, but most of this stuff will get removed in the next commit.", "author": "ToMe25", "createdAt": "2020-05-06T11:08:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwODYxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwOTU3Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/4901#discussion_r420709572", "bodyText": "as it checked the wrong stuff", "author": "ToMe25", "createdAt": "2020-05-06T11:08:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwODYxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDczNTQ1Mg==", "url": "https://github.com/ldtteam/minecolonies/pull/4901#discussion_r420735452", "bodyText": "This should be solved now", "author": "ToMe25", "createdAt": "2020-05-06T12:00:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwODYxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDczNzA1Mw==", "url": "https://github.com/ldtteam/minecolonies/pull/4901#discussion_r420737053", "bodyText": "ok now i think i understand what you meant.\n\ni thought this was the other check that looks the same\nyes, i will probably do that.", "author": "ToMe25", "createdAt": "2020-05-06T12:03:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwODYxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgwNDEyNQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4901#discussion_r420804125", "bodyText": "ok i did this.", "author": "ToMe25", "createdAt": "2020-05-06T13:47:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwODYxNA=="}], "type": "inlineReview"}, {"oid": "08b9de9179e3d99544c2a10ed7299b55c901fd81", "url": "https://github.com/ldtteam/minecolonies/commit/08b9de9179e3d99544c2a10ed7299b55c901fd81", "message": "Fix ladder repairs removing higher platforms in the mineshaft\n\nalso hopefully fix build problems", "committedDate": "2020-05-06T12:00:18Z", "type": "commit"}, {"oid": "347a3ab90df369807708b876dbadc5232891d241", "url": "https://github.com/ldtteam/minecolonies/commit/347a3ab90df369807708b876dbadc5232891d241", "message": "Move ladder damaged check to its own method.", "committedDate": "2020-05-06T13:15:25Z", "type": "commit"}, {"oid": "a09faa69fa1ee6773881f98655f6adb0fabb0693", "url": "https://github.com/ldtteam/minecolonies/commit/a09faa69fa1ee6773881f98655f6adb0fabb0693", "message": "Fix ladder repairing not working at the height of a platform", "committedDate": "2020-05-06T13:47:14Z", "type": "commit"}, {"oid": "a8db7266da36afe69a970e29031c400bc4b283b9", "url": "https://github.com/ldtteam/minecolonies/commit/a8db7266da36afe69a970e29031c400bc4b283b9", "message": "Make ladder repair state repair the cobblestone behind the ladder.", "committedDate": "2020-05-06T14:24:52Z", "type": "commit"}, {"oid": "5dd39c4e8870d02751905a4a0a8aa48e49fd8ddb", "url": "https://github.com/ldtteam/minecolonies/commit/5dd39c4e8870d02751905a4a0a8aa48e49fd8ddb", "message": "Merge branch 'version/1.15' into fix/miner", "committedDate": "2020-05-06T15:08:37Z", "type": "commit"}, {"oid": "ea721afc4be07b95fc6b5136be63ec6cde6dc013", "url": "https://github.com/ldtteam/minecolonies/commit/ea721afc4be07b95fc6b5136be63ec6cde6dc013", "message": "Get rid of this cancer", "committedDate": "2020-05-06T21:05:55Z", "type": "commit"}, {"oid": "56d5e0c5c5f561b18065f9de7b9ff72e25fff98a", "url": "https://github.com/ldtteam/minecolonies/commit/56d5e0c5c5f561b18065f9de7b9ff72e25fff98a", "message": "Make the miner mine the blocks before replacing when repairing his\nladder", "committedDate": "2020-05-07T08:49:57Z", "type": "commit"}, {"oid": "8d421bb3284e3a8ed42d677e03c07a0e18cf31ad", "url": "https://github.com/ldtteam/minecolonies/commit/8d421bb3284e3a8ed42d677e03c07a0e18cf31ad", "message": "Merge branch 'version/1.15' into fix/miner", "committedDate": "2020-05-07T12:31:28Z", "type": "commit"}]}