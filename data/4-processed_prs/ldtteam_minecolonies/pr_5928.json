{"pr_number": 5928, "pr_title": "Serveral fixes", "pr_createdAt": "2020-10-15T13:21:59Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/5928", "timeline": [{"oid": "390670e03d362970fa029d47eacfbc3292ea13cd", "url": "https://github.com/ldtteam/minecolonies/commit/390670e03d362970fa029d47eacfbc3292ea13cd", "message": "Serveral fixes", "committedDate": "2020-10-15T13:10:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU0NDYyMQ==", "url": "https://github.com/ldtteam/minecolonies/pull/5928#discussion_r505544621", "bodyText": "maybe a constant?", "author": "Raycoms", "createdAt": "2020-10-15T13:32:29Z", "path": "src/main/java/com/minecolonies/coremod/entity/CustomArrowEntity.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package com.minecolonies.coremod.entity;\n+\n+import net.minecraft.entity.EntityType;\n+import net.minecraft.entity.LivingEntity;\n+import net.minecraft.entity.projectile.ArrowEntity;\n+import net.minecraft.util.math.EntityRayTraceResult;\n+import net.minecraft.world.World;\n+\n+/**\n+ * Custom arrow entity class which remove themselves when on the ground for a bit to not cause lag and they do not scale in damage with their motion.\n+ */\n+public class CustomArrowEntity extends ArrowEntity\n+{\n+    public CustomArrowEntity(final EntityType<? extends ArrowEntity> type, final World world)\n+    {\n+        super(type, world);\n+    }\n+\n+    @Override\n+    protected void arrowHit(LivingEntity target)\n+    {\n+        // TODO add enderman damage hit research here not that this is also used by mobs so check the shooter\n+        super.arrowHit(target);\n+    }\n+\n+    @Override\n+    protected void onEntityHit(EntityRayTraceResult traceResult)\n+    {\n+        final double prevDamage = getDamage();\n+\n+        // Reduce damage by motion before vanilla increases it by the same factor, so our damage stays.\n+        float f = (float) this.getMotion().length();\n+        if (f != 0)\n+        {\n+            setDamage(prevDamage / f);\n+        }\n+\n+        super.onEntityHit(traceResult);\n+\n+        // Set the old actual damage value back\n+        setDamage(prevDamage);\n+    }\n+\n+    @Override\n+    public void tick()\n+    {\n+        super.tick();\n+\n+        if (this.timeInGround > 10)", "originalCommit": "390670e03d362970fa029d47eacfbc3292ea13cd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "67766b4e403a592df6a022fcfd8629c211848792", "url": "https://github.com/ldtteam/minecolonies/commit/67766b4e403a592df6a022fcfd8629c211848792", "message": "Fix arrows\nFix close players not added after dim changes", "committedDate": "2020-10-15T15:14:37Z", "type": "commit"}]}