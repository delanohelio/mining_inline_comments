{"pr_number": 4968, "pr_title": "Allow certain requests to have a minimum count", "pr_createdAt": "2020-05-11T14:23:13Z", "pr_url": "https://github.com/ldtteam/minecolonies/pull/4968", "timeline": [{"oid": "530dcc6fe1f1df09d70da8a8a9aef687009bb5b7", "url": "https://github.com/ldtteam/minecolonies/commit/530dcc6fe1f1df09d70da8a8a9aef687009bb5b7", "message": "Allow certain requests to have a minimum count", "committedDate": "2020-05-11T14:21:34Z", "type": "commit"}, {"oid": "fc3e9866e1bc7c30c3be2ca2467e89102a54d900", "url": "https://github.com/ldtteam/minecolonies/commit/fc3e9866e1bc7c30c3be2ca2467e89102a54d900", "message": "fix for public crafting", "committedDate": "2020-05-11T19:23:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcwMTk4OQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4968#discussion_r423701989", "bodyText": "Please add the Empty initialization back. It just prevents errors and is just a safeguard no reason to remove it.", "author": "OrionDevelopment", "createdAt": "2020-05-12T12:43:31Z", "path": "src/api/java/com/minecolonies/api/colony/requestsystem/requestable/Stack.java", "diffHunk": "@@ -28,50 +30,58 @@\n     /**\n      * If meta should match.\n      */\n-    private boolean matchMeta = false;\n+    private boolean matchMeta;\n \n     /**\n      * If NBT should match.\n      */\n-    private boolean matchNBT = false;\n+    private boolean matchNBT;\n \n     /**\n      * If oredict should match.\n      */\n-    private boolean matchOreDic = false;\n+    private boolean matchOreDic;\n \n     /**\n      * The required count.\n      */\n-    private int count = 0;\n+    private int count;\n+\n+    /**\n+     * The required count.\n+     */\n+    private int minCount;\n \n     @NotNull\n-    private ItemStack result = ItemStackUtils.EMPTY;\n+    private ItemStack result;", "originalCommit": "fc3e9866e1bc7c30c3be2ca2467e89102a54d900", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcxNTE0MQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4968#discussion_r423715141", "bodyText": "I fixed up the logic, now all constructors always initialize it correctly such that I'm getting an intellij warning too.", "author": "Raycoms", "createdAt": "2020-05-12T13:03:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcwMTk4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcwMjMwMQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4968#discussion_r423702301", "bodyText": "Constant check.", "author": "OrionDevelopment", "createdAt": "2020-05-12T12:44:05Z", "path": "src/api/java/com/minecolonies/api/colony/requestsystem/requestable/Stack.java", "diffHunk": "@@ -153,10 +153,16 @@ public static Stack deserialize(final IFactoryController controller, final Compo\n         final boolean matchNBT = compound.getBoolean(NBT_MATCHNBT);\n         final boolean matchOreDic = compound.getBoolean(NBT_MATCHOREDIC);\n         final ItemStack result = compound.keySet().contains(NBT_RESULT) ? ItemStackUtils.deserializeFromNBT(compound.getCompound(NBT_RESULT)) : ItemStackUtils.EMPTY;\n-        final int size = compound.getInt(\"size\");\n-        final Stack theStack = new Stack(stack, matchMeta, matchNBT, matchOreDic, result);\n-        theStack.setCount(size);\n-        return theStack;\n+\n+        int count = compound.getInt(\"size\");", "originalCommit": "fc3e9866e1bc7c30c3be2ca2467e89102a54d900", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcxNTQwMw==", "url": "https://github.com/ldtteam/minecolonies/pull/4968#discussion_r423715403", "bodyText": "On purpose, this will be retired (old value) as soon as possible.", "author": "Raycoms", "createdAt": "2020-05-12T13:04:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcwMjMwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcwMzYxNg==", "url": "https://github.com/ldtteam/minecolonies/pull/4968#discussion_r423703616", "bodyText": "Please add a setter as well. Additionally use the given count as the default minimum count not 1.\nIf the builder then wants to override his special behaviour can then set the minimum count to what ever is handy.\nSetting the default to one for every request type changes the behaviour.", "author": "OrionDevelopment", "createdAt": "2020-05-12T12:46:11Z", "path": "src/api/java/com/minecolonies/api/colony/requestsystem/requestable/IDeliverable.java", "diffHunk": "@@ -21,10 +20,17 @@\n     /**\n      * Method called to get the amount of items that need to be in the stack.\n      *\n-     * @return The amount of items that\n+     * @return The amount of items.\n      */\n     int getCount();\n \n+    /**\n+     * Method called to get the minimum amount required to fulfill this request.\n+     *\n+     * @return the minimum amount.\n+     */\n+    int getMinimumCount();", "originalCommit": "fc3e9866e1bc7c30c3be2ca2467e89102a54d900", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcxNTg3MQ==", "url": "https://github.com/ldtteam/minecolonies/pull/4968#discussion_r423715871", "bodyText": "I wanted to avoid the previous behaviour we had with the setters all over the place. Thus, you initiate this with the value in the constructor (like all the other values) or you make a new one. No need for a setter here.", "author": "Raycoms", "createdAt": "2020-05-12T13:05:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcwMzYxNg=="}], "type": "inlineReview"}, {"oid": "795d071f84655d718044521013e177211c7c46ce", "url": "https://github.com/ldtteam/minecolonies/commit/795d071f84655d718044521013e177211c7c46ce", "message": "Merge branch 'version/1.15' into feature/min-count", "committedDate": "2020-05-12T13:05:13Z", "type": "commit"}, {"oid": "58d2cf07b2a7a5fba0800945c241c3d5c9666658", "url": "https://github.com/ldtteam/minecolonies/commit/58d2cf07b2a7a5fba0800945c241c3d5c9666658", "message": "Merge branch 'version/1.15' into feature/min-count", "committedDate": "2020-05-12T13:17:34Z", "type": "commit"}, {"oid": "c008c8879df88a21c0c6664c61ff2e0102977fa9", "url": "https://github.com/ldtteam/minecolonies/commit/c008c8879df88a21c0c6664c61ff2e0102977fa9", "message": "fix recipes", "committedDate": "2020-05-12T15:52:21Z", "type": "commit"}, {"oid": "cb32571ee4cc7377c8b4306ab0cc016a4d4de8ae", "url": "https://github.com/ldtteam/minecolonies/commit/cb32571ee4cc7377c8b4306ab0cc016a4d4de8ae", "message": "Merge remote-tracking branch 'origin/feature/min-count' into feature/min-count", "committedDate": "2020-05-12T15:52:27Z", "type": "commit"}]}