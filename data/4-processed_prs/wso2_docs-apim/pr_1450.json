{"pr_number": 1450, "pr_title": "Add instructions and Queries to alter Analytics Database prior to migrations.", "pr_createdAt": "2020-06-29T16:58:01Z", "pr_url": "https://github.com/wso2/docs-apim/pull/1450", "timeline": [{"oid": "f73fedc61f02b8fd34b340a55a4ff81d2f42f599", "url": "https://github.com/wso2/docs-apim/commit/f73fedc61f02b8fd34b340a55a4ff81d2f42f599", "message": "adding alter queries for analytics", "committedDate": "2020-06-29T13:17:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3ODYxNg==", "url": "https://github.com/wso2/docs-apim/pull/1450#discussion_r447378616", "bodyText": "Isn't it better to check whether the column name is already updated or not and ALTER table only if it was not updated yet?\nThen we can add these queries to the above set of queries too, without running separately.", "author": "rmsamitha", "createdAt": "2020-06-30T02:58:04Z", "path": "en/docs/install-and-setup/upgrading-wso2-api-manager/upgrading-from-260-to-310.md", "diffHunk": "@@ -2116,7 +2116,95 @@ Upgrade the WSO2 API Manager Analytics database from version 3.0.0 to version 3.\n     ALTER TABLE APILASTACCESSSUMMARY DROP CONSTRAINT APILASTACCESSSUMMARY_pkey;\n     ALTER TABLE APILASTACCESSSUMMARY ADD PRIMARY KEY (APINAME,APICREATOR,APIVERSION,APICREATORTENANTDOMAIN);\n     ```\n-\n+!!! note\n+    Type and name of a column of few tables were changed through WUM in version 2.6. It is important to add the above\n+    change into your database prior to migration. So execute the below query to \n+    confirm whether the above change is already available in your system.\n+    ", "originalCommit": "f73fedc61f02b8fd34b340a55a4ff81d2f42f599", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjc0NzMyNA==", "url": "https://github.com/wso2/docs-apim/pull/1450#discussion_r452747324", "bodyText": "This will be an improvement and will be addressed via another PR.", "author": "rmsamitha", "createdAt": "2020-07-10T09:58:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3ODYxNg=="}], "type": "inlineReview"}]}