{"pr_number": 798, "pr_title": "Bug Fixes and Doc Update", "pr_createdAt": "2020-03-03T08:37:07Z", "pr_url": "https://github.com/wso2/docs-apim/pull/798", "timeline": [{"oid": "ea46343477b33a099677dde92209cb4dd89de653", "url": "https://github.com/wso2/docs-apim/commit/ea46343477b33a099677dde92209cb4dd89de653", "message": "deleted distributed-deployment-of-api-manager.md based on Rukshan feeback", "committedDate": "2020-03-02T08:41:25Z", "type": "commit"}, {"oid": "b6ff0dd1e3a95966cc041013284f6e757d021cf7", "url": "https://github.com/wso2/docs-apim/commit/b6ff0dd1e3a95966cc041013284f6e757d021cf7", "message": "fix for https://github.com/wso2/docs-apim/issues/793 tuning-performance.md", "committedDate": "2020-03-03T04:09:24Z", "type": "commit"}, {"oid": "fe332da006acdd8974ffb8a695c112136e549171", "url": "https://github.com/wso2/docs-apim/commit/fe332da006acdd8974ffb8a695c112136e549171", "message": " formatted en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "committedDate": "2020-03-03T04:16:02Z", "type": "commit"}, {"oid": "f3554f601afaa936b181ba889fec2ee5a7a57ab8", "url": "https://github.com/wso2/docs-apim/commit/f3554f601afaa936b181ba889fec2ee5a7a57ab8", "message": "Reviewed and updated tuning-performance.md", "committedDate": "2020-03-03T08:21:27Z", "type": "commit"}, {"oid": "5e2f6331dc3f5172e301d1ab7f527d93146f6ce5", "url": "https://github.com/wso2/docs-apim/commit/5e2f6331dc3f5172e301d1ab7f527d93146f6ce5", "message": "Merge branch '3.0.0' of https://github.com/wso2/docs-apim into 3.0.0", "committedDate": "2020-03-03T08:23:31Z", "type": "commit"}, {"oid": "a46853b2ba8ca8d94613c45ff2b7a62324ed9966", "url": "https://github.com/wso2/docs-apim/commit/a46853b2ba8ca8d94613c45ff2b7a62324ed9966", "message": "Removed the change done for docs-apim/issues/793 as the WUM update is not applicable for 3.0.0", "committedDate": "2020-03-03T09:18:19Z", "type": "commit"}, {"oid": "21656b015870353cf39520a553d19d0ab240411f", "url": "https://github.com/wso2/docs-apim/commit/21656b015870353cf39520a553d19d0ab240411f", "message": "fix for https://github.com/wso2/docs-apim/issues/34 passing-enduser-attributes-to-the-backend-using-jwt.md", "committedDate": "2020-03-03T10:48:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NDgzNQ==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386944835", "bodyText": "Why don't we have these as points listed under a topic \"Recommendations\" ?", "author": "shaniR", "createdAt": "2020-03-03T10:59:51Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -1,6 +1,6 @@\n # Tuning Performance\n \n-This section describes some recommended performance tuning configurations to optimize the WSO2 API Manager. It assumes that you have set up the API Manager on Unix/Linux, which is recommended for a production deployment. We also recommend [a distributed API Manager setup]({{base_path}}/install-and-setup/deploying-wso2-api-manager/deployment-patterns/) for most production systems. Out of all components of an API Manager distributed setup, the API Gateway is the most critical, because\u00a0it handles all inbound calls to APIs. Therefore, we recommend you to have at least a 2-node cluster of API Gateways in a distributed setup.\n+This section describes some recommended performance tuning configurations to optimize WSO2 API Manager. It assumes that you have set up the API Manager on Unix/Linux, which is recommended for a production deployment. WSO2 also recommends [a distributed API Manager setup]({{base_path}}/install-and-setup/deploying-wso2-api-manager/deployment-patterns/) for most production systems. Out of all components of an API Manager distributed setup, the API Gateway is the most critical, because\u00a0it handles all inbound calls to APIs. Therefore, WSO2 recommends that you have at least a 2-node cluster of API Gateways in a distributed setup.", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk5MjY4OA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386992688", "bodyText": "There are only 2 point under the initial paragraph so it may not make sense to have a section saying recommendations, because after all the entire doc covers recommendations for performance tuning.\n@chamilaadhi / @bhathiya , what do you think?", "author": "Mariangela", "createdAt": "2020-03-03T12:40:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NDgzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2NDAxOQ==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387464019", "bodyText": "agree with @Mariangela", "author": "chamilaadhi", "createdAt": "2020-03-04T06:04:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NDgzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ3ODIwNg==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387478206", "bodyText": "Well yeah not a \"Recommendations\" section, but maybe deployment or something that suits it. Just that it doesn't look like a general introduction, but has important points. I don't actually see why we cannot have it in point form. It will increase readability IMO.", "author": "shaniR", "createdAt": "2020-03-04T06:56:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NDgzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzMzY5MA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387633690", "bodyText": "Removed the recommendations in the 7554bc2 fix and I also created #801 based on the discussion with Bhathiya.", "author": "Mariangela", "createdAt": "2020-03-04T12:27:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NDgzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NTUzNw==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386945537", "bodyText": "should \"not\" be in bold?", "author": "shaniR", "createdAt": "2020-03-03T11:01:09Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -32,81 +32,83 @@ Following are the configurations that can be applied to optimize the OS-level pe\n 1.  To optimize network and OS performance, configure the following settings in the `/etc/sysctl.conf` file of Linux. These settings specify a larger port range, a more effective TCP connection timeout value, and a number of other important parameters at the OS-level.\n \n     !!! info\n-            It is not recommended to use `net.ipv4.tcp_tw_recycle = 1` when working with network address translation (NAT), such as if you are deploying products in EC2 or any other environment configured with NAT.\n+        It is not recommended to use `net.ipv4.tcp_tw_recycle = 1` when working with network address translation (NAT), such as if you are deploying products in EC2 or any other environment configured with NAT.", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk5MDc2MA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386990760", "bodyText": "Fixed in 6bfe5e9", "author": "Mariangela", "createdAt": "2020-03-03T12:36:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NTUzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NTgwNg==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386945806", "bodyText": "Have we explained or given some reference to what these configurations mean?", "author": "shaniR", "createdAt": "2020-03-03T11:01:39Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -32,81 +32,83 @@ Following are the configurations that can be applied to optimize the OS-level pe\n 1.  To optimize network and OS performance, configure the following settings in the `/etc/sysctl.conf` file of Linux. These settings specify a larger port range, a more effective TCP connection timeout value, and a number of other important parameters at the OS-level.\n \n     !!! info\n-            It is not recommended to use `net.ipv4.tcp_tw_recycle = 1` when working with network address translation (NAT), such as if you are deploying products in EC2 or any other environment configured with NAT.\n+        It is not recommended to use `net.ipv4.tcp_tw_recycle = 1` when working with network address translation (NAT), such as if you are deploying products in EC2 or any other environment configured with NAT.\n \n \n     ``` java\n-     net.ipv4.tcp_fin_timeout = 30\n-     fs.file-max = 2097152\n-     net.ipv4.tcp_tw_recycle = 1\n-     net.ipv4.tcp_tw_reuse = 1\n-     net.core.rmem_default = 524288\n-     net.core.wmem_default = 524288\n-     net.core.rmem_max = 67108864\n-     net.core.wmem_max = 67108864\n-     net.ipv4.tcp_rmem = 4096 87380 16777216\n-     net.ipv4.tcp_wmem = 4096 65536 16777216\n-     net.ipv4.ip_local_port_range = 1024 65535      \n+    net.ipv4.tcp_fin_timeout = 30\n+    fs.file-max = 2097152\n+    net.ipv4.tcp_tw_recycle = 1\n+    net.ipv4.tcp_tw_reuse = 1\n+    net.core.rmem_default = 524288\n+    net.core.wmem_default = 524288\n+    net.core.rmem_max = 67108864\n+    net.core.wmem_max = 67108864\n+    net.ipv4.tcp_rmem = 4096 87380 16777216\n+    net.ipv4.tcp_wmem = 4096 65536 16777216\n+    net.ipv4.ip_local_port_range = 1024 65535      \n     ```", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk5MDcwMg==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386990702", "bodyText": "@chamilaadhi , please provide a reference to this configuration.", "author": "Mariangela", "createdAt": "2020-03-03T12:36:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NTgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ1OTM0NA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387459344", "bodyText": "https://wiki.archlinux.org/index.php/Sysctl", "author": "chamilaadhi", "createdAt": "2020-03-04T05:45:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NTgwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2NjIxNA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387466214", "bodyText": "Fixed in ad35368", "author": "Mariangela", "createdAt": "2020-03-04T06:13:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NTgwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NzkxNg==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386947916", "bodyText": "EI documentation -> WSO2 EI documentation?", "author": "shaniR", "createdAt": "2020-03-03T11:06:01Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -116,25 +118,26 @@ The following diagram shows the communication/network paths that occur when an A\n     If the Key Manager caching is enabled, the calls between the API Gateway and Key Manager are cached. As a result, the Key Manager is not invoked for each API call.\n \n -   **Client call API Gateway + API Gateway call Backend**\n-    For backend communication, the API Manager uses PassThrough transport. This is configured in the `<API-M_HOME>/repository/conf/deployment.toml` file. For more information, see [Configuring passthru properties](https://docs.wso2.com/display/EI650/Tuning+the+HTTP+Transport) in the EI\u00a0documentation. To configure socket timeout value, add following to the `deployment.toml`\n-            ```java\n-             [passthru_http]\n-             http.socket.timeout=180000\n+\n+    For backend communication, the API Manager uses PassThrough transport. This is configured in the `<API-M_HOME>/repository/conf/deployment.toml` file. For more information, see [Configuring passthru properties](https://docs.wso2.com/display/EI650/Tuning+the+HTTP+Transport) in the EI\u00a0documentation. Add the following section to the `deployment.toml` file to configure the Socket timeout value.", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk5MDI1OQ==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386990259", "bodyText": "Fixed in 6bfe5e9", "author": "Mariangela", "createdAt": "2020-03-03T12:35:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0NzkxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0ODE2Mw==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386948163", "bodyText": "any minimum value for this ?", "author": "shaniR", "createdAt": "2020-03-03T11:06:32Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -116,25 +118,26 @@ The following diagram shows the communication/network paths that occur when an A\n     If the Key Manager caching is enabled, the calls between the API Gateway and Key Manager are cached. As a result, the Key Manager is not invoked for each API call.\n \n -   **Client call API Gateway + API Gateway call Backend**\n-    For backend communication, the API Manager uses PassThrough transport. This is configured in the `<API-M_HOME>/repository/conf/deployment.toml` file. For more information, see [Configuring passthru properties](https://docs.wso2.com/display/EI650/Tuning+the+HTTP+Transport) in the EI\u00a0documentation. To configure socket timeout value, add following to the `deployment.toml`\n-            ```java\n-             [passthru_http]\n-             http.socket.timeout=180000\n+\n+    For backend communication, the API Manager uses PassThrough transport. This is configured in the `<API-M_HOME>/repository/conf/deployment.toml` file. For more information, see [Configuring passthru properties](https://docs.wso2.com/display/EI650/Tuning+the+HTTP+Transport) in the EI\u00a0documentation. Add the following section to the `deployment.toml` file to configure the Socket timeout value.\n+            ``` java\n+            [passthru_http]\n+            http.socket.timeout=180000", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk4MzM4Ng==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386983386", "bodyText": "The default value is mentioned in the infobox that follows this section. @shaniR , are we still missing anything?\n\"The default value for http.socket.timeout differs between WSO2 products. In WSO2 API-M, the default value for http.socket.timeout is 180000ms.\"", "author": "Mariangela", "createdAt": "2020-03-03T12:21:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0ODE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2NTMwNw==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387465307", "bodyText": "the minimum could be 0 but I think that is an obvious value because timeouts cannot be minus values so I don't think we need to specifically mention it.", "author": "chamilaadhi", "createdAt": "2020-03-04T06:09:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0ODE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU4NDY3NA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387584674", "bodyText": "That is not what I meant. This value should be greater than the value specified in worker_thread_keepalive_sec right?", "author": "shaniR", "createdAt": "2020-03-04T10:43:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0ODE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNDI2OA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387634268", "bodyText": "During an offline discussion, Bhathiya mentioned that this comment was not applicable.", "author": "Mariangela", "createdAt": "2020-03-04T12:28:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk0ODE2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MDY2Ng==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386950666", "bodyText": "what does it index? when you say registry indexing , that is an internal detail.. but for a user it is different, for e.g. APIs.", "author": "shaniR", "createdAt": "2020-03-03T11:11:45Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -384,28 +387,28 @@ validationQuery = \"SELECT 2\"\n </code></pre>\n </div>\n </div>\n-<p>Note that you set the <code>               &lt;testOnBorrow&gt;              </code> element to <code>               true              </code> and provide a validation query (e.g., in Oracle, <code>               SELECT 1 FROM DUAL              </code> ), which is run to refresh any stale connections in the connection pool. Set a suitable value for the <code>               &lt;validationInterval&gt;              </code> element, which defaults to 30000 milliseconds. It determines the time period after which the next iteration of the validation query will be run on a particular connection. It avoids excess validations and ensures better performance.</p>\n+<p>Note that you set the <code>               &lt;testOnBorrow&gt;              </code> element to <code>               true              </code> and provide a validation query (e.g., in Oracle, <code>               SELECT 1 FROM DUAL              </code> ), which is run to refresh any stale connections in the connection pool. Set a suitable value for the <code>               &lt;validationInterval&gt;              </code> element, which defaults to 30000 milliseconds. It determines the time period, after which the next iteration of the validation query will be run on a particular connection. It avoids excess validations and ensures better performance.</p>\n </div></td>\n </tr>\n </tbody>\n </table>\n \n-##### Registry indexing configurations\n+### Registry indexing configurations\n \n-The registry indexing process is only required to be run on the API Publisher and Developer Portal nodes. To disable the indexing process from running on the other nodes (Gateways and Key Managers), you need to following in the `<API-M_HOME>/repository/conf/deployment.toml` file.\n+The registry indexing process is only required to be run on the API Publisher and Developer Portal nodes. To disable the indexing process from running on the other nodes (Gateways and Key Managers), you need to add the following configuration section in the `<API-M_HOME>/repository/conf/deployment.toml` file.", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk5MDE1MA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386990150", "bodyText": "@chamilaadhi , please comment.", "author": "Mariangela", "createdAt": "2020-03-03T12:35:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MDY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2MDE0Mg==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387460142", "bodyText": "actually this is not related to user. this configuration is done by system admin who maintains the server and registry indexing should be a familiar concept for sysadmin who maintains a wso2 server", "author": "chamilaadhi", "createdAt": "2020-03-04T05:48:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MDY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYwNDI3MQ==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387604271", "bodyText": "but why do they need to know what gets indexed? What value addition does it give?", "author": "shaniR", "createdAt": "2020-03-04T11:22:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MDY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYzNDU2OQ==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387634569", "bodyText": "Updated in 7554bc2", "author": "Mariangela", "createdAt": "2020-03-04T12:28:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MDY2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MDg5Ng==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386950896", "bodyText": "We use the term rate-limiting in place of throttling.", "author": "shaniR", "createdAt": "2020-03-03T11:12:14Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -384,28 +387,28 @@ validationQuery = \"SELECT 2\"\n </code></pre>\n </div>\n </div>\n-<p>Note that you set the <code>               &lt;testOnBorrow&gt;              </code> element to <code>               true              </code> and provide a validation query (e.g., in Oracle, <code>               SELECT 1 FROM DUAL              </code> ), which is run to refresh any stale connections in the connection pool. Set a suitable value for the <code>               &lt;validationInterval&gt;              </code> element, which defaults to 30000 milliseconds. It determines the time period after which the next iteration of the validation query will be run on a particular connection. It avoids excess validations and ensures better performance.</p>\n+<p>Note that you set the <code>               &lt;testOnBorrow&gt;              </code> element to <code>               true              </code> and provide a validation query (e.g., in Oracle, <code>               SELECT 1 FROM DUAL              </code> ), which is run to refresh any stale connections in the connection pool. Set a suitable value for the <code>               &lt;validationInterval&gt;              </code> element, which defaults to 30000 milliseconds. It determines the time period, after which the next iteration of the validation query will be run on a particular connection. It avoids excess validations and ensures better performance.</p>\n </div></td>\n </tr>\n </tbody>\n </table>\n \n-##### Registry indexing configurations\n+### Registry indexing configurations\n \n-The registry indexing process is only required to be run on the API Publisher and Developer Portal nodes. To disable the indexing process from running on the other nodes (Gateways and Key Managers), you need to following in the `<API-M_HOME>/repository/conf/deployment.toml` file.\n+The registry indexing process is only required to be run on the API Publisher and Developer Portal nodes. To disable the indexing process from running on the other nodes (Gateways and Key Managers), you need to add the following configuration section in the `<API-M_HOME>/repository/conf/deployment.toml` file.\n \n ```java\n- [indexing]\n- enable = false\n+[indexing]\n+enable = false\n ```\n \n-#### Throttle data and Analytics-related settings\n+## Throttle data and Analytics-related settings\n \n-This section describes the parameters you need to configure to tune the performance of API-M Analytics and Throttling when it is affected by high load, network traffic etc. You need to tune these parameters based on the deployment environment.\n+This section describes the parameters you need to configure to tune the performance of API-M Analytics and Throttling when it is affected by high load, network traffic, etc. You need to tune these parameters based on the deployment environment.", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk5MDAwOA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386990008", "bodyText": "Fixed in 6bfe5e9", "author": "Mariangela", "createdAt": "2020-03-03T12:35:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MDg5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MTM1Ng==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386951356", "bodyText": "Throttling - > rate limiting.", "author": "shaniR", "createdAt": "2020-03-03T11:13:07Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -414,15 +417,15 @@ The following parameters should be configured in the `<API-M_HOME>/repository/co\n [transport.binary.agent]\n :\n ```\n-The Thrift section is related to Analytics and the Binary section is related to Throttling. Same set of parameters mentioned below can be found in both sections. The parameter descriptions and recommendations are intended towards the for performance tuning of Analytics, but the same recommendations are relevant for Throttling data related tuning in the Binary section.\u00a0Note that the section for Thrift is relevant only if Analytics is enabled.\n+The Thrift section is related to Analytics, and the Binary section is related to Throttling. The same set of parameters mentioned below can be found in both sections. The parameter descriptions and recommendations are intended towards the for performance tuning of Analytics, but the same recommendations are relevant for Throttling data related tuning in the Binary section.\u00a0Note that the section for Thrift is relevant only if Analytics is enabled.", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk4OTkzMg==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386989932", "bodyText": "Fixed in 6bfe5e9", "author": "Mariangela", "createdAt": "2020-03-03T12:35:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MTM1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MTkyNg==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386951926", "bodyText": "The parameter descriptions and recommendations are intended towards the performance tuning of Analytics", "author": "shaniR", "createdAt": "2020-03-03T11:14:20Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -414,15 +417,15 @@ The following parameters should be configured in the `<API-M_HOME>/repository/co\n [transport.binary.agent]\n :\n ```\n-The Thrift section is related to Analytics and the Binary section is related to Throttling. Same set of parameters mentioned below can be found in both sections. The parameter descriptions and recommendations are intended towards the for performance tuning of Analytics, but the same recommendations are relevant for Throttling data related tuning in the Binary section.\u00a0Note that the section for Thrift is relevant only if Analytics is enabled.\n+The Thrift section is related to Analytics, and the Binary section is related to Throttling. The same set of parameters mentioned below can be found in both sections. The parameter descriptions and recommendations are intended towards the for performance tuning of Analytics, but the same recommendations are relevant for Throttling data related tuning in the Binary section.\u00a0Note that the section for Thrift is relevant only if Analytics is enabled.", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk4OTgyOA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386989828", "bodyText": "Fixed in 6bfe5e9", "author": "Mariangela", "createdAt": "2020-03-03T12:34:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1MTkyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1NTQ0MQ==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386955441", "bodyText": "\"This value\" is repeated in each sentence. Can we use some other way to convey the message?", "author": "shaniR", "createdAt": "2020-03-03T11:21:56Z", "path": "en/docs/install-and-setup/perfromance-tuning-and-test-results/tuning-performance.md", "diffHunk": "@@ -445,7 +448,7 @@ The Thrift section is related to Analytics and the Binary section is related to\n <td><code>             batch_size            </code></td>\n <td>The WSO2 API-M statistical data sent to the Analytics Server to be published in the Analytics Dashboard are grouped into batches. This parameter specifies the number of requests to be included in a batch.</td>\n <td>200</td>\n-<td>This value should be tuned in proportion to the volume of requests sent from WSO2 API-M to the Analytics Server. This value should be reduced if you want to reduce the system overhead of the Analytics Server. This value should be increased if WSO2 API-M is generating a high amount of statistics and if the <code>             queue_size            </code> cannot be further increased without causing an overconsumption of memory.</td>\n+<td>This value should be tuned in proportion to the volume of requests sent from WSO2 API-M to the Analytics Server. This value should be reduced if you want to reduce the system overhead of the Analytics Server. This value should be increased if WSO2 API-M is generating a high amount of statistics and if the <code>             queue_size            </code> cannot be further increased without causing overconsumption of memory.</td>", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk4OTcyMg==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386989722", "bodyText": "Fixed in 6bfe5e9", "author": "Mariangela", "createdAt": "2020-03-03T12:34:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk1NTQ0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk2NDU3OA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386964578", "bodyText": "To get a list of users to be included in the JWT, simply uncomment this element after enabling the JWT -> I don't think this gets the list of users. Instead it gets the users claims?", "author": "shaniR", "createdAt": "2020-03-03T11:40:27Z", "path": "en/docs/learn/api-gateway/passing-end-user-attributes-to-the-backend/passing-enduser-attributes-to-the-backend-using-jwt.md", "diffHunk": "@@ -125,7 +125,7 @@ if the <code>getClaims</code> method returns <code>{email:user1@wso2.com, gender\n <td><pre><code>apim.jwt.claim_dialect</code></pre></td>\n <td><div class=\"content-wrapper\">\n <p>The dialect URI under which the user's claims are be looked for. Only works with the default value of the <code>apim.jwt.claims_extractor_impl</code> element defined above.</p>\n-<p>The JWT token contains all claims define in the <code>apim.jwt.claim_dialect</code> element. The default value of this element is <code>http://wso2.org/claims</code>. To get a list of users to be included in the JWT, simply uncomment this element after enabling the JWT. It will include all claims in <code>http://wso2.org/claims</code> to the JWT token.</p>\n+<p>The JWT token contains all claims that are defined in the <code>apim.jwt.claim_dialect</code> element. The default value of this element is <code>http://wso2.org/claims</code>. To get a list of users to be included in the JWT, simply uncomment this element after enabling the JWT. It will include all claims in <code>http://wso2.org/claims</code> to the JWT token.</p>", "originalCommit": "21656b015870353cf39520a553d19d0ab240411f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk4OTY2MQ==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r386989661", "bodyText": "@chamilaadhi , please comment.", "author": "Mariangela", "createdAt": "2020-03-03T12:34:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk2NDU3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2MDczOA==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387460738", "bodyText": "yeah that a mistake :D . need to fix it as claims", "author": "chamilaadhi", "createdAt": "2020-03-04T05:51:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk2NDU3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2NjI1Ng==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387466256", "bodyText": "Fixed in ad35368", "author": "Mariangela", "createdAt": "2020-03-04T06:13:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk2NDU3OA=="}], "type": "inlineReview"}, {"oid": "6bfe5e9a2ca27772e7c72e68aa1b679f54063c16", "url": "https://github.com/wso2/docs-apim/commit/6bfe5e9a2ca27772e7c72e68aa1b679f54063c16", "message": "Updated based on PR review comments", "committedDate": "2020-03-03T12:41:03Z", "type": "commit"}, {"oid": "ad35368762f90e93da8563604b42628e902ea243", "url": "https://github.com/wso2/docs-apim/commit/ad35368762f90e93da8563604b42628e902ea243", "message": "Updated based on PR review comments", "committedDate": "2020-03-04T06:11:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU4NTU4Nw==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387585587", "bodyText": "is it still a list of user claims? or a list of a particular user's claims?", "author": "shaniR", "createdAt": "2020-03-04T10:45:06Z", "path": "en/docs/learn/api-gateway/passing-end-user-attributes-to-the-backend/passing-enduser-attributes-to-the-backend-using-jwt.md", "diffHunk": "@@ -125,7 +125,7 @@ if the <code>getClaims</code> method returns <code>{email:user1@wso2.com, gender\n <td><pre><code>apim.jwt.claim_dialect</code></pre></td>\n <td><div class=\"content-wrapper\">\n <p>The dialect URI under which the user's claims are be looked for. Only works with the default value of the <code>apim.jwt.claims_extractor_impl</code> element defined above.</p>\n-<p>The JWT token contains all claims define in the <code>apim.jwt.claim_dialect</code> element. The default value of this element is <code>http://wso2.org/claims</code>. To get a list of users to be included in the JWT, simply uncomment this element after enabling the JWT. It will include all claims in <code>http://wso2.org/claims</code> to the JWT token.</p>\n+<p>The JWT token contains all claims that are defined in the <code>apim.jwt.claim_dialect</code> element. The default value of this element is <code>http://wso2.org/claims</code>. To get a list of user claims to be included in the JWT, simply uncomment this element after enabling the JWT. It will include all claims in <code>http://wso2.org/claims</code> to the JWT token.</p>", "originalCommit": "ad35368762f90e93da8563604b42628e902ea243", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU5NjY1OQ==", "url": "https://github.com/wso2/docs-apim/pull/798#discussion_r387596659", "bodyText": "Fixed in b2c420a", "author": "Mariangela", "createdAt": "2020-03-04T11:06:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU4NTU4Nw=="}], "type": "inlineReview"}, {"oid": "b2c420afb90302c4d2f7cdfcba6653e538abcf0a", "url": "https://github.com/wso2/docs-apim/commit/b2c420afb90302c4d2f7cdfcba6653e538abcf0a", "message": "Updated based on PR review", "committedDate": "2020-03-04T11:03:22Z", "type": "commit"}, {"oid": "7554bc2eb4e58f59fa40bf8df0f43fe9e5b78b7b", "url": "https://github.com/wso2/docs-apim/commit/7554bc2eb4e58f59fa40bf8df0f43fe9e5b78b7b", "message": "Updated based on discussion with Bhathiya and Shani on PR comments", "committedDate": "2020-03-04T12:19:18Z", "type": "commit"}]}