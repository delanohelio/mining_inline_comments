{"pr_number": 1554, "pr_title": "Adding stored procedures to update analytics db.", "pr_createdAt": "2020-07-21T18:02:02Z", "pr_url": "https://github.com/wso2/docs-apim/pull/1554", "timeline": [{"oid": "1a21f9a5ccf414134e7b0ff9d246de74e1e247ba", "url": "https://github.com/wso2/docs-apim/commit/1a21f9a5ccf414134e7b0ff9d246de74e1e247ba", "message": "adding stored procedures for update scripts", "committedDate": "2020-07-21T13:33:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxMzEzMQ==", "url": "https://github.com/wso2/docs-apim/pull/1554#discussion_r458513131", "bodyText": "Additional period (.)", "author": "rmsamitha", "createdAt": "2020-07-22T03:31:58Z", "path": "en/docs/install-and-setup/upgrading-wso2-api-manager/upgrading-from-260-to-310.md", "diffHunk": "@@ -2138,92 +2138,147 @@ Upgrade the WSO2 API Manager Analytics database from version 3.0.0 to version 3.\n     ALTER TABLE APILASTACCESSSUMMARY ADD PRIMARY KEY (APINAME,APICREATOR,APIVERSION,APICREATORTENANTDOMAIN);\n     ```\n !!! note\n-    Type and name of a column of few tables were changed through WUM in version 2.6. It is important to add the above\n-    change into your database prior to migration. So execute the below query to \n-    confirm whether the above change is already available in your system.\n-    \n-    ```\n-    select AGG_COUNT from GEOLOCATIONAGG_SECONDS;\n-    ```\n-    If the above query returns an error indicating that the intended column can not be found, then please execute the \n-    below queries according to your db type to add the above change.\n-    \n-    ```tab=\"H2\"\n-    ALTER TABLE GeoLocationAgg_DAYS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_HOURS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_MINUTES CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_MONTHS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_SECONDS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_YEARS CHANGE totalCount AGG_COUNT bigint(20);           \n-    ```\n+    Type and name of a column of few tables were changed through WUM in analytics version 2.6. It is important to \n+    add the above change into your database prior to migration. So execute the below queries which checks whether \n+    the above change is already available in your DB and if not it will add the relevant change. Ensure to replace \n+    \"<Enter Analytics DB name here>\" with the correct DB name in the scripts.   .", "originalCommit": "1a21f9a5ccf414134e7b0ff9d246de74e1e247ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxNTU0NQ==", "url": "https://github.com/wso2/docs-apim/pull/1554#discussion_r458515545", "bodyText": "And is this \"USE\" statement required? We don't specify the \"USE\" statements usually anywhere? Instead, we specify, to which DB we need to run the queries. That has been already specified on line 2103", "author": "rmsamitha", "createdAt": "2020-07-22T03:41:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxMzEzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxODUzNQ==", "url": "https://github.com/wso2/docs-apim/pull/1554#discussion_r458518535", "bodyText": "It was required only in MSSQL. it expects to specify the intended Database beore running the stored procedures. For other db types its not used.", "author": "shilmyhasan", "createdAt": "2020-07-22T03:54:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxMzEzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxMzM4OA==", "url": "https://github.com/wso2/docs-apim/pull/1554#discussion_r458513388", "bodyText": "Add a comma inn between as this. DB and if not, it will", "author": "rmsamitha", "createdAt": "2020-07-22T03:33:02Z", "path": "en/docs/install-and-setup/upgrading-wso2-api-manager/upgrading-from-260-to-310.md", "diffHunk": "@@ -2138,92 +2138,147 @@ Upgrade the WSO2 API Manager Analytics database from version 3.0.0 to version 3.\n     ALTER TABLE APILASTACCESSSUMMARY ADD PRIMARY KEY (APINAME,APICREATOR,APIVERSION,APICREATORTENANTDOMAIN);\n     ```\n !!! note\n-    Type and name of a column of few tables were changed through WUM in version 2.6. It is important to add the above\n-    change into your database prior to migration. So execute the below query to \n-    confirm whether the above change is already available in your system.\n-    \n-    ```\n-    select AGG_COUNT from GEOLOCATIONAGG_SECONDS;\n-    ```\n-    If the above query returns an error indicating that the intended column can not be found, then please execute the \n-    below queries according to your db type to add the above change.\n-    \n-    ```tab=\"H2\"\n-    ALTER TABLE GeoLocationAgg_DAYS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_HOURS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_MINUTES CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_MONTHS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_SECONDS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_YEARS CHANGE totalCount AGG_COUNT bigint(20);           \n-    ```\n+    Type and name of a column of few tables were changed through WUM in analytics version 2.6. It is important to \n+    add the above change into your database prior to migration. So execute the below queries which checks whether \n+    the above change is already available in your DB and if not it will add the relevant change. Ensure to replace ", "originalCommit": "1a21f9a5ccf414134e7b0ff9d246de74e1e247ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1c0e947628bae33a8b1003079b26d3949a0094a8", "url": "https://github.com/wso2/docs-apim/commit/1c0e947628bae33a8b1003079b26d3949a0094a8", "message": "Refactor description", "committedDate": "2020-07-22T03:49:47Z", "type": "commit"}]}