{"pr_number": 1298, "pr_title": "add mtls header base configuring doc", "pr_createdAt": "2020-06-04T17:51:19Z", "pr_url": "https://github.com/wso2/docs-apim/pull/1298", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ2MzA5OQ==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r435463099", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            -   [Invoke an API Secured with Mutual SSL from the Developer Portal](#SecuringAPIswithMutualSSL-InvokeanAPIsecuredwithMutualSSLfromtheDeveloperPortal)\n          \n          \n            \n            -   [Invoke an API Secured with Mutual SSL from Postman](#invoke-an-api-secured-with-mutual-ssl-using-postman)", "author": "bhathiya", "createdAt": "2020-06-04T18:27:13Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -6,7 +6,7 @@ This section explains how to APIs in WSO2 API Manager can be secured using mutua\n \n -   [Create an API Secured with Mutual SSL](#SecuringAPIswithMutualSSL-CreateanAPISecuredwithMutualSSL)\n -   [Invoke an API Secured with Mutual SSL from the Developer Portal](#SecuringAPIswithMutualSSL-InvokeanAPIsecuredwithMutualSSLfromtheDeveloperPortal)", "originalCommit": "d7286f1d570d33b75a0ed106e9ee9a86c5ff78e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ2NDQwNg==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r435464406", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            -   [Create an API Secured with Mutual SSL](#SecuringAPIswithMutualSSL-CreateanAPISecuredwithMutualSSL)\n          \n          \n            \n            -   [Create an API Secured with Mutual SSL](#create-an-api-secured-with-mutual-ssl)", "author": "bhathiya", "createdAt": "2020-06-04T18:29:00Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -6,7 +6,7 @@ This section explains how to APIs in WSO2 API Manager can be secured using mutua\n \n -   [Create an API Secured with Mutual SSL](#SecuringAPIswithMutualSSL-CreateanAPISecuredwithMutualSSL)", "originalCommit": "d7286f1d570d33b75a0ed106e9ee9a86c5ff78e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ3NjE2Ng==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r435476166", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### Invoke an API secured with Mutual SSL though SSL Terminated Load Balancer.\n          \n          \n            \n            ### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.", "author": "bhathiya", "createdAt": "2020-06-04T18:44:58Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -51,3 +51,28 @@ Listed below are the known limitations for this feature.\n -   Resource level security will not be applicable for the APIs that are only protected with mutual SSL.\n \n -   Scope level security will not be applicable for the APIs that are only protected with mutual SSL.\n+### Invoke an API secured with Mutual SSL though SSL Terminated Load Balancer.", "originalCommit": "d7286f1d570d33b75a0ed106e9ee9a86c5ff78e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ3NjU5MQ==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r435476591", "bodyText": "Also fix the link", "author": "bhathiya", "createdAt": "2020-06-04T18:45:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ3NjE2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ3NzQxOA==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r435477418", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When SSL Termination of invocation request happens at the loadbalancer, following prerequisites need to be met from the load balancer.\n          \n          \n            \n            When SSL Termination of invocation request happens at the loadbalancer/reverse proxy, the following prerequisites need to be met from the load balancer.", "author": "bhathiya", "createdAt": "2020-06-04T18:46:52Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -51,3 +51,28 @@ Listed below are the known limitations for this feature.\n -   Resource level security will not be applicable for the APIs that are only protected with mutual SSL.\n \n -   Scope level security will not be applicable for the APIs that are only protected with mutual SSL.\n+### Invoke an API secured with Mutual SSL though SSL Terminated Load Balancer.\n+\n+When SSL Termination of invocation request happens at the loadbalancer, following prerequisites need to be met from the load balancer.", "originalCommit": "d7286f1d570d33b75a0ed106e9ee9a86c5ff78e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ3Nzc1NA==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r435477754", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            -   Offload the Terminated SSL certficate from client into the Gateway in a Header.(eg: https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_client_certificate)\n          \n          \n            \n            -   Pass the client SSL certificate to the Gateway in an HTTP Header. ( eg: https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_client_certificate )", "author": "bhathiya", "createdAt": "2020-06-04T18:47:31Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -51,3 +51,28 @@ Listed below are the known limitations for this feature.\n -   Resource level security will not be applicable for the APIs that are only protected with mutual SSL.\n \n -   Scope level security will not be applicable for the APIs that are only protected with mutual SSL.\n+### Invoke an API secured with Mutual SSL though SSL Terminated Load Balancer.\n+\n+When SSL Termination of invocation request happens at the loadbalancer, following prerequisites need to be met from the load balancer.\n+\n+-   Terminate the mutual SSL connection from client\n+-   Offload the Terminated SSL certficate from client into the Gateway in a Header.(eg: https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_client_certificate)", "originalCommit": "d7286f1d570d33b75a0ed106e9ee9a86c5ff78e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ3ODUwNA==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r435478504", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Default WSO2 API Manager supports to retrieve Certificate from **X-WSO2-CLIENT-CERTIFICATE** header. In order to change the retrival header,\n          \n          \n            \n            follow the below instructions.\n          \n          \n            \n            By default, the WSO2 API Manager retrieves the client certificate from the **X-WSO2-CLIENT-CERTIFICATE** HTTP header. In order to change the header,", "author": "bhathiya", "createdAt": "2020-06-04T18:48:56Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -51,3 +51,28 @@ Listed below are the known limitations for this feature.\n -   Resource level security will not be applicable for the APIs that are only protected with mutual SSL.\n \n -   Scope level security will not be applicable for the APIs that are only protected with mutual SSL.\n+### Invoke an API secured with Mutual SSL though SSL Terminated Load Balancer.\n+\n+When SSL Termination of invocation request happens at the loadbalancer, following prerequisites need to be met from the load balancer.\n+\n+-   Terminate the mutual SSL connection from client\n+-   Offload the Terminated SSL certficate from client into the Gateway in a Header.(eg: https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_client_certificate)\n+\n+Below diagram show how MutualSSL works in such environment.\n+\n+![]({{base_path}}/assets/img/learn/mtls-loadbalancer.png)\n+\n+Default WSO2 API Manager supports to retrieve Certificate from **X-WSO2-CLIENT-CERTIFICATE** header. In order to change the retrival header,\n+follow the below instructions.", "originalCommit": "d7286f1d570d33b75a0ed106e9ee9a86c5ff78e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzNzkxNQ==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r439237915", "bodyText": "need a new line above this i think.", "author": "bhathiya", "createdAt": "2020-06-12T06:47:53Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -51,3 +54,27 @@ Listed below are the known limitations for this feature.\n -   Resource level security will not be applicable for the APIs that are only protected with mutual SSL.\n \n -   Scope level security will not be applicable for the APIs that are only protected with mutual SSL.\n+### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.", "originalCommit": "3feb1e655b0a9cae0131ba405ee55bb9a0097464", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzODY4Ng==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r439238686", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When SSL Termination of invocation request happens at the loadbalancer/reverse proxy,the following prerequisites need to be met from the load balancer.\n          \n          \n            \n            When SSL Termination of API requests happens at the loadbalancer/reverse proxy, the following prerequisites need to be met from the load balancer.", "author": "bhathiya", "createdAt": "2020-06-12T06:50:08Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -51,3 +54,27 @@ Listed below are the known limitations for this feature.\n -   Resource level security will not be applicable for the APIs that are only protected with mutual SSL.\n \n -   Scope level security will not be applicable for the APIs that are only protected with mutual SSL.\n+### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.\n+\n+When SSL Termination of invocation request happens at the loadbalancer/reverse proxy,the following prerequisites need to be met from the load balancer.", "originalCommit": "3feb1e655b0a9cae0131ba405ee55bb9a0097464", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzODgyNg==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r439238826", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Below diagram show how MutualSSL works in such environment.\n          \n          \n            \n            The below diagram shows how MutualSSL works in such environment.", "author": "bhathiya", "createdAt": "2020-06-12T06:50:32Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -51,3 +54,27 @@ Listed below are the known limitations for this feature.\n -   Resource level security will not be applicable for the APIs that are only protected with mutual SSL.\n \n -   Scope level security will not be applicable for the APIs that are only protected with mutual SSL.\n+### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.\n+\n+When SSL Termination of invocation request happens at the loadbalancer/reverse proxy,the following prerequisites need to be met from the load balancer.\n+\n+-   Terminate the mutual SSL connection from client\n+-   Pass the client SSL certificate to the Gateway in an HTTP Header. ( eg: https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_client_certificate )\n+\n+Below diagram show how MutualSSL works in such environment.", "originalCommit": "3feb1e655b0a9cae0131ba405ee55bb9a0097464", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzOTAxMQ==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r439239011", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            -  Configure the *certificate_header* under the [apimgt.mutual_ssl]. \n          \n          \n            \n            -  Configure the *certificate_header* under the [apimgt.mutual_ssl] configuration.", "author": "bhathiya", "createdAt": "2020-06-12T06:51:03Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -51,3 +54,27 @@ Listed below are the known limitations for this feature.\n -   Resource level security will not be applicable for the APIs that are only protected with mutual SSL.\n \n -   Scope level security will not be applicable for the APIs that are only protected with mutual SSL.\n+### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.\n+\n+When SSL Termination of invocation request happens at the loadbalancer/reverse proxy,the following prerequisites need to be met from the load balancer.\n+\n+-   Terminate the mutual SSL connection from client\n+-   Pass the client SSL certificate to the Gateway in an HTTP Header. ( eg: https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_client_certificate )\n+\n+Below diagram show how MutualSSL works in such environment.\n+\n+![]({{base_path}}/assets/img/learn/mtls-loadbalancer.png)\n+\n+By default, the WSO2 API Manager retrieves the client certificate from the **X-WSO2-CLIENT-CERTIFICATE** HTTP header. In order to change the header,\n+\n+-  Navigate to the `<API-M_HOME>/repository/conf/deployment.toml` file.\n+-  Configure the *certificate_header* under the [apimgt.mutual_ssl]. ", "originalCommit": "3feb1e655b0a9cae0131ba405ee55bb9a0097464", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzOTQwNQ==", "url": "https://github.com/wso2/docs-apim/pull/1298#discussion_r439239405", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.\n          \n          \n            \n            ### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.\n          \n      \n    \n    \n  \n\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.\n          \n          \n            \n            \n          \n          \n            \n            ### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.", "author": "bhathiya", "createdAt": "2020-06-12T06:52:10Z", "path": "en/docs/learn/api-security/api-authentication/secure-apis-using-mutual-ssl.md", "diffHunk": "@@ -51,3 +54,27 @@ Listed below are the known limitations for this feature.\n -   Resource level security will not be applicable for the APIs that are only protected with mutual SSL.\n \n -   Scope level security will not be applicable for the APIs that are only protected with mutual SSL.\n+### Handling MTLS when SSL is terminated by the loadbalancer/reverse proxy.", "originalCommit": "3feb1e655b0a9cae0131ba405ee55bb9a0097464", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b10b38069d7bd778db2ff18afc07e02d56da8b6f", "url": "https://github.com/wso2/docs-apim/commit/b10b38069d7bd778db2ff18afc07e02d56da8b6f", "message": "add mtls header base configuring doc", "committedDate": "2020-06-12T16:26:42Z", "type": "commit"}, {"oid": "94ddcc40cfc18c6628bd7e556aa80ac0a7e754fb", "url": "https://github.com/wso2/docs-apim/commit/94ddcc40cfc18c6628bd7e556aa80ac0a7e754fb", "message": "add reviewed fixes", "committedDate": "2020-06-12T16:29:25Z", "type": "commit"}, {"oid": "94ddcc40cfc18c6628bd7e556aa80ac0a7e754fb", "url": "https://github.com/wso2/docs-apim/commit/94ddcc40cfc18c6628bd7e556aa80ac0a7e754fb", "message": "add reviewed fixes", "committedDate": "2020-06-12T16:29:25Z", "type": "forcePushed"}]}