{"pr_number": 2269, "pr_title": "Add details to keep system roles without being deleted during the provisioning process", "pr_createdAt": "2020-11-19T10:00:29Z", "pr_url": "https://github.com/wso2/docs-apim/pull/2269", "timeline": [{"oid": "463de6532ad9d1b6b7471c1061f9931eb1e990f7", "url": "https://github.com/wso2/docs-apim/commit/463de6532ad9d1b6b7471c1061f9931eb1e990f7", "message": "Cleaned up doc", "committedDate": "2020-11-19T09:54:15Z", "type": "commit"}, {"oid": "4962dcc7091ebff60bee8166f97938d2ecaf1169", "url": "https://github.com/wso2/docs-apim/commit/4962dcc7091ebff60bee8166f97938d2ecaf1169", "message": "Change title", "committedDate": "2020-11-19T09:54:36Z", "type": "commit"}, {"oid": "69bb9b265d9b4b99266162e93ec09e71b3538718", "url": "https://github.com/wso2/docs-apim/commit/69bb9b265d9b4b99266162e93ec09e71b3538718", "message": "Clean up SAML doc", "committedDate": "2020-11-19T09:54:54Z", "type": "commit"}, {"oid": "8546f19d6f23850b2169ac78e1f4af1cf87510f8", "url": "https://github.com/wso2/docs-apim/commit/8546f19d6f23850b2169ac78e1f4af1cf87510f8", "message": "Change title in ToC", "committedDate": "2020-11-19T09:55:16Z", "type": "commit"}, {"oid": "2e43e5b49cc94a59da0b09e85f660614602d3dcc", "url": "https://github.com/wso2/docs-apim/commit/2e43e5b49cc94a59da0b09e85f660614602d3dcc", "message": "Add note", "committedDate": "2020-11-19T09:56:02Z", "type": "commit"}, {"oid": "cae1992a00549c79066a58054adc07c9d7123c00", "url": "https://github.com/wso2/docs-apim/commit/cae1992a00549c79066a58054adc07c9d7123c00", "message": "Add note in SSO doc", "committedDate": "2020-11-19T09:57:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDE1ODk5NA==", "url": "https://github.com/wso2/docs-apim/pull/2269#discussion_r530158994", "bodyText": "The above sentence, \"To preserve the user profile details without any changes you need to enable the 'SystemRolesRetainedProvisionHandler'.\" needs to be corrected as follows,\n\"To preserve previously assigned system roles (Application/, Workflow/) in the user profile, you need to enable the 'SystemRolesRetainedProvisionHandler'.\"", "author": "Prasadi-R", "createdAt": "2020-11-25T07:34:18Z", "path": "en/docs/develop/extending-api-manager/saml2-sso/configuring-identity-server-as-idp-for-sso.md", "diffHunk": "@@ -232,9 +232,17 @@ Similarly, add the Identity Server as an identity provider configurations in `ht\n \n 6.  If you sign in to the Publisher, then access the Developer Portal application, click **Login** and verify that the same user is already authenticated in the Developer Portal.\n \n+!!!info\n+    When Just-In-Time Provisioning is enabled, the user details will be saved in the API Manager user store. User profile details will be update via federation following each login event. To preserve the user profile details without any changes you need to enable the `SystemRolesRetainedProvisionHandler`.", "originalCommit": "cae1992a00549c79066a58054adc07c9d7123c00", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDE2MDk3MQ==", "url": "https://github.com/wso2/docs-apim/pull/2269#discussion_r530160971", "bodyText": "\"OKTA uses the email as a username by default\" -> OKTA uses the email as the username by default", "author": "Prasadi-R", "createdAt": "2020-11-25T07:38:51Z", "path": "en/docs/install-and-setup/setup/sso/okta-as-an-external-idp-using-oidc.md", "diffHunk": "@@ -1,65 +1,73 @@\n-In the following document we will explain how to connect OKTA as a third party Identity provier to WSO2 API-Manager. Before we start first make sure you have all the pre-requisites mentioned below.\n+# Using OKTA as an External IDP with OIDC\n+\n+This section explains how to connect OKTA as a third-party Identity provier to WSO2 API Manager.\n \n ### Pre-requisites\n \n+Before you begin, make sure you do the following.\n+\n 1. Create an account in [https://developer.okta.com/](https://developer.okta.com/)\n-2. Download the latest API-Manager distribution from [https://wso2.com/api-management/](https://wso2.com/api-management/)\n-3. Unzip the distribution and open the `deployment.toml` file located in `<APIM_HOME>/repository/conf/` and add the following configuration\n+2. Download the latest API Manager distribution from [https://wso2.com/api-management/](https://wso2.com/api-management/)\n+3. Unzip the distribution and open the `deployment.toml` file located in `<APIM_HOME>/repository/conf/` folder. Add the following configuration\n     ```\n     [tenant_mgt]\n     enable_email_domain= true\n     ```\n-    This is needed since OKTA uses the email as the username by default,  therefore to  use the email as the username in WSO2 API-Manager we have to enable it since it not enabled by default. Once enabled both email as username and normal usernames can be used.\n+    You need to enable this because OKTA uses the email as a username by default. To  use the email as the username in WSO2 API Manager you have to enable it, since it not enabled by default. Once enabled, you can use your email or a normal username as your username.", "originalCommit": "cae1992a00549c79066a58054adc07c9d7123c00", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDE2Mjc4NA==", "url": "https://github.com/wso2/docs-apim/pull/2269#discussion_r530162784", "bodyText": "The above sentence, \"To preserve the user profile details without any changes you need to enable the 'SystemRolesRetainedProvisionHandler'.\", needs to be corrected as follows,\n\"To preserve previously assigned system roles (Application/, Workflow/) in the user profile, you need to enable the 'SystemRolesRetainedProvisionHandler'.\"", "author": "Prasadi-R", "createdAt": "2020-11-25T07:42:52Z", "path": "en/docs/install-and-setup/setup/sso/okta-as-an-external-idp-using-oidc.md", "diffHunk": "@@ -183,28 +191,37 @@ In the following document we will explain how to connect OKTA as a third party I\n     </tbody>\n </table>\n \n-5. Expand Claim configuration -> Basic claim configuration and add the following claim configurations\n+5. Expand **Claim Configuration** -> **Basic Claim Configuration**. Add the claim configurations as shown in the image below.\n     [![]({{base_path}}/assets/img/learn/okta-apim-idp-claims-details.png)]({{base_path}}/assets/img/learn/okta-apim-idp-claims-details.png) \n \n-6. Expand Role configuration and add the following role. Here we check if the user that is being logged in has the role `any` and assign him the local role okta_role\n+6. Expand **Role configuration** and add `okta_role` as shown below. You can check if the user logged in has the role `any` and assign the local `okta_role`.\n \n     <img src=\"{{base_path}}/assets/img/learn/okta-apim-role-oidc-role-mapping.png\"/>\n \n-7. Enable Just in time provisioning so that the user will be saved in the API-Manager user store\n+7. Enable **Just-in-Time Provisioning** for the user to be saved in the API Manager user store.\n \n     <img src=\"{{base_path}}/assets/img/learn/okta-apim-role-oidc-jit.png\"/>\n \n-8. Navigate to Service providers -> list as shown below. There are two service providers created apim_publisher, apim_devportal. Click on edit on apim_publisher.\n+    !!!info\n+        When Just-In-Time Provisioning is enabled, the user details will be saved in the API Manager user store. User profile details will be update via federation following each login event. To preserve the user profile details without any changes you need to enable the `SystemRolesRetainedProvisionHandler`.", "originalCommit": "cae1992a00549c79066a58054adc07c9d7123c00", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0d39cd9ae93af35eed9f77475c09c1a7eabc372b", "url": "https://github.com/wso2/docs-apim/commit/0d39cd9ae93af35eed9f77475c09c1a7eabc372b", "message": "Merge branch '3.2.0' of https://github.com/wso2/docs-apim into 3.2.0-2257", "committedDate": "2020-12-02T16:47:00Z", "type": "commit"}, {"oid": "266f847a225e53481d24957b61eb79658b17035f", "url": "https://github.com/wso2/docs-apim/commit/266f847a225e53481d24957b61eb79658b17035f", "message": "Address comments", "committedDate": "2020-12-02T16:47:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODAyNzcyMA==", "url": "https://github.com/wso2/docs-apim/pull/2269#discussion_r538027720", "bodyText": "@ruthryi , can you please review this entire document and update it, because it is not structured properly. You can use the en/docs/install-and-setup/setup/sso/okta-as-an-external-idp-using-oidc.md document that I reviewed as an example.", "author": "Mariangela", "createdAt": "2020-12-08T04:34:23Z", "path": "en/docs/install-and-setup/setup/sso/okta-as-an-external-idp-using-saml.md", "diffHunk": "@@ -1,18 +1,22 @@\n-In the following document we will explain how to connect OKTA as a third party Identity provier to WSO2 API-Manager. Before we start first make sure you have all the pre-requisites mentioned below.\n+# Using OKTA as an External IDP with SAML\n+\n+In the following document we will explain how to connect OKTA as a third party Identity provier to WSO2 API Manager.", "originalCommit": "6c962da7b336218e3440b8581b3b6406ec4bb5eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "44b288d67a453e5bcd6da785a2f9d021a3aebf16", "url": "https://github.com/wso2/docs-apim/commit/44b288d67a453e5bcd6da785a2f9d021a3aebf16", "message": "Merge branch '3.2.0' of https://github.com/wso2/docs-apim into 3.2.0-2257", "committedDate": "2020-12-10T17:00:46Z", "type": "commit"}, {"oid": "45e898606612cb3d2f766a794a4dfdb356b6247a", "url": "https://github.com/wso2/docs-apim/commit/45e898606612cb3d2f766a794a4dfdb356b6247a", "message": "Update according to review comments", "committedDate": "2020-12-10T17:02:13Z", "type": "commit"}, {"oid": "45e898606612cb3d2f766a794a4dfdb356b6247a", "url": "https://github.com/wso2/docs-apim/commit/45e898606612cb3d2f766a794a4dfdb356b6247a", "message": "Update according to review comments", "committedDate": "2020-12-10T17:02:13Z", "type": "forcePushed"}]}