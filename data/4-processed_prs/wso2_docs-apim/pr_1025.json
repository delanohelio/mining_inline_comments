{"pr_number": 1025, "pr_title": "Add details on how to add scopes for a resource", "pr_createdAt": "2020-04-10T15:09:12Z", "pr_url": "https://github.com/wso2/docs-apim/pull/1025", "timeline": [{"oid": "2856b8e0572240a13de4222836bde90fbd65dd03", "url": "https://github.com/wso2/docs-apim/commit/2856b8e0572240a13de4222836bde90fbd65dd03", "message": "Add details on how to add scopes for a resource", "committedDate": "2020-04-10T15:22:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MDc1Ng==", "url": "https://github.com/wso2/docs-apim/pull/1025#discussion_r407070756", "bodyText": "Should this be indented?", "author": "malinthaprasan", "createdAt": "2020-04-11T14:32:37Z", "path": "en/docs/learn/api-controller/importing-apis-via-dev-first-approach.md", "diffHunk": "@@ -86,6 +86,57 @@ WSO2 API Controller, **apictl** allows to create and deploy APIs without using W\n                         `--oas` : Provide an OpenAPI specification file/URL for the API   \n                         `--force` or `-f` : To overwrite directory and create project \n \n+        !!! note\n+            You can define scopes for a resource when defining a Swagger2 or OpenAPI3 specification to generate an API.\n+\n+            !!! example\n+                ```yaml\n+                openapi: 3.0.0\n+                info:\n+                title: Online-Store\n+                version: v1.0.0\n+                description: This API contains operations related to online shopping store.\n+                x-wso2-basePath: /store/{version}\n+                x-wso2-production-endpoints:\n+                urls:\n+                    - http://products\n+                paths:\n+                /products:\n+                    get:\n+                    responses:\n+                        \"200\":\n+                        description: successful operation\n+                /products/{productId}:\n+                    get:\n+                    parameters:\n+                        - name: productId\n+                        in: path\n+                        required: true\n+                        schema:\n+                            type: string\n+                    security: \n+                        - \n+                        default: \n+                            - \"products:read\"\n+                    responses:\n+                        \"200\":\n+                        description: successful operation\n+                components: \n+                securitySchemes: \n+                    default: \n+                    type: \"oauth2\"\n+                    flows: \n+                        implicit: \n+                        authorizationUrl: \"https://test.com\"\n+                        scopes: \n+                            products:read: \"\"\n+                        x-scopes-bindings: \n+                            products:read: \"admin\"", "originalCommit": "2856b8e0572240a13de4222836bde90fbd65dd03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MDg1Ng==", "url": "https://github.com/wso2/docs-apim/pull/1025#discussion_r407070856", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                type: \"oauth2\"\n          \n          \n            \n                                flows: \n          \n          \n            \n                                    implicit: \n          \n          \n            \n                                    authorizationUrl: \"https://test.com\"\n          \n          \n            \n                                    scopes: \n          \n          \n            \n                                        products:read: \"\"\n          \n          \n            \n                                    x-scopes-bindings: \n          \n          \n            \n                                        products:read: \"admin\"\n          \n          \n            \n                                    type: \"oauth2\"\n          \n          \n            \n                                    flows: \n          \n          \n            \n                                        implicit: \n          \n          \n            \n                                        authorizationUrl: \"https://test.com\"\n          \n          \n            \n                                        scopes: \n          \n          \n            \n                                            products:read: \"\"\n          \n          \n            \n                                        x-scopes-bindings: \n          \n          \n            \n                                            products:read: \"admin\"", "author": "malinthaprasan", "createdAt": "2020-04-11T14:33:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MDc1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYzNTUxNg==", "url": "https://github.com/wso2/docs-apim/pull/1025#discussion_r408635516", "bodyText": "yes. will correct it.", "author": "npamudika", "createdAt": "2020-04-15T07:28:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MDc1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MTA2OA==", "url": "https://github.com/wso2/docs-apim/pull/1025#discussion_r407071068", "bodyText": "Let's remove this line if we fixed wso2/product-apim#7648", "author": "malinthaprasan", "createdAt": "2020-04-11T14:35:24Z", "path": "en/docs/learn/api-controller/importing-apis-via-dev-first-approach.md", "diffHunk": "@@ -86,6 +86,57 @@ WSO2 API Controller, **apictl** allows to create and deploy APIs without using W\n                         `--oas` : Provide an OpenAPI specification file/URL for the API   \n                         `--force` or `-f` : To overwrite directory and create project \n \n+        !!! note\n+            You can define scopes for a resource when defining a Swagger2 or OpenAPI3 specification to generate an API.\n+\n+            !!! example\n+                ```yaml\n+                openapi: 3.0.0\n+                info:\n+                title: Online-Store\n+                version: v1.0.0\n+                description: This API contains operations related to online shopping store.\n+                x-wso2-basePath: /store/{version}\n+                x-wso2-production-endpoints:\n+                urls:\n+                    - http://products\n+                paths:\n+                /products:\n+                    get:\n+                    responses:\n+                        \"200\":\n+                        description: successful operation\n+                /products/{productId}:\n+                    get:\n+                    parameters:\n+                        - name: productId\n+                        in: path\n+                        required: true\n+                        schema:\n+                            type: string\n+                    security: \n+                        - \n+                        default: \n+                            - \"products:read\"\n+                    responses:\n+                        \"200\":\n+                        description: successful operation\n+                components: \n+                securitySchemes: \n+                    default: \n+                    type: \"oauth2\"\n+                    flows: \n+                        implicit: \n+                        authorizationUrl: \"https://test.com\"\n+                        scopes: \n+                            products:read: \"\"\n+                        x-scopes-bindings: \n+                            products:read: \"admin\"\n+                ```\n+\n+            First you need to define the scope name (products:read) under `security > default` section inside the required resource and then define the role binding under the `securitySchemes` section.\n+\n+            Make sure to set the security name as **`default`** when defining the scopes.", "originalCommit": "2856b8e0572240a13de4222836bde90fbd65dd03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY1NzQwMA==", "url": "https://github.com/wso2/docs-apim/pull/1025#discussion_r408657400", "bodyText": "will be tracked via wso2/product-apim-tooling#271", "author": "npamudika", "createdAt": "2020-04-15T08:07:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MTA2OA=="}], "type": "inlineReview"}, {"oid": "d1ec10e51b5ca15bedc89afea454460eeaca89f4", "url": "https://github.com/wso2/docs-apim/commit/d1ec10e51b5ca15bedc89afea454460eeaca89f4", "message": "Add details on how to add scopes for a resource", "committedDate": "2020-04-15T08:10:06Z", "type": "commit"}, {"oid": "d1ec10e51b5ca15bedc89afea454460eeaca89f4", "url": "https://github.com/wso2/docs-apim/commit/d1ec10e51b5ca15bedc89afea454460eeaca89f4", "message": "Add details on how to add scopes for a resource", "committedDate": "2020-04-15T08:10:06Z", "type": "forcePushed"}]}