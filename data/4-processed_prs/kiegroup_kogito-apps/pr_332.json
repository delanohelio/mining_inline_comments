{"pr_number": 332, "pr_title": "KOGITO-2599: DataTable component API changes", "pr_createdAt": "2020-07-22T02:54:36Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/332", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyMTA5Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/332#discussion_r458621097", "bodyText": "@yzhao583 I think this shouldn't be pushed...", "author": "pefernan", "createdAt": "2020-07-22T08:23:03Z", "path": "ui-packages/yarn.lock", "diffHunk": "@@ -8277,9 +8277,9 @@ escape-string-regexp@1.0.5, escape-string-regexp@^1.0.2, escape-string-regexp@^1\n   resolved \"https://registry.yarnpkg.com/escape-string-regexp/-/escape-string-regexp-1.0.5.tgz#1b61c0562190a8dff6ae3bb2cf0200ca130b86d4\"\n   integrity sha1-G2HAViGQqN/2rjuyzwIAyhMLhtQ=\n \n-escodegen@^1.11.1:\n+escodegen@^1.11.1, escodegen@^1.8.1:", "originalCommit": "6d0738bf1f364a63b93a36c01ef889f6d929570f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODk5NDUxMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/332#discussion_r458994512", "bodyText": "@pefernan Thanks for the review. I just installed the \"jsonpath\" package, don't know why so many dependencies got updated as well....\nAre you suggesting not push local change of \"yarn.lock\"? Since I did not see it in the \".gitignore\", so just want to confirm. Thanks\n@cristianonicolai @AjayJagan @Sara4994", "author": "yzhao583", "createdAt": "2020-07-22T18:23:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyMTA5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI3NjU3MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/332#discussion_r459276570", "bodyText": "It is a transitive dependency of jsonpath - this line specifies what versions were required either directly or transitively, wherease the decisive part is the line below - version \"1.14.3\" that's what actually got resolved as matching to all the \"requirements\" from above. And that version didn't change, so we're still on the same one.\nBut we should stick to a single registry url in yarn.lock imo - please run\nyarn locktt --registry=https://registry.yarnpkg.com -s\nMore concerning is the esprima entry below - there we've added imo a second version of the same dependency.", "author": "jstastny-cz", "createdAt": "2020-07-23T08:00:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyMTA5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI4MzQ1MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/332#discussion_r459283451", "bodyText": "@jstastny-cz yea, I agree with the esprima.\n@yzhao583 I know I already asked some changes on the design. But I think that, since the nested properties aren't required for now, we could rollback the that part and remove the jsonpath dep for now. I don't think we waht to have different dep versions.", "author": "pefernan", "createdAt": "2020-07-23T08:14:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyMTA5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY0NTE5MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/332#discussion_r459645191", "bodyText": "@jstastny-cz @pefernan If the change of \"yarn.lock\" in this PR is discarded, will the issue be fixed?\n@pefernan I think the most important part of this PR is to support nested properties, if we decide to not have the feature for now, then I do not think it is necessary to have this PR opened.", "author": "yzhao583", "createdAt": "2020-07-23T18:27:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyMTA5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY3ODY2NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/332#discussion_r459678665", "bodyText": "@pefernan @jstastny-cz I did some research about the issue, looks like we are not the only one to have the pain..and \"esprima\" is not the only dependency got duplicated. In our case, we have many dependencies got duplicated, such as \"esutils\", \"eventemitter3\", \"extend-shallow\", etc.\nLooks like it is a issue has already been reported to yarn, here are some links to describe the issue:\nyarnpkg/yarn#3778\nhttps://medium.com/@scinos/de-duplicating-yarn-lock-ae30be4aa41a\nHere are some solutions I found maybe useful:\nhttps://medium.com/@bnaya/yarn-deduplicate-the-hero-we-need-f4497a362128\nhttps://github.com/atlassian/yarn-deduplicate\nIn conclusion, this is definitely a issue that need our attention, but I would suggest to have a seperated PR to fix this, since it is related to so many dependencies and may need thoroughly test after the fix.", "author": "yzhao583", "createdAt": "2020-07-23T19:28:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyMTA5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDc4NjMyMA==", "url": "https://github.com/kiegroup/kogito-apps/pull/332#discussion_r460786320", "bodyText": "@yzhao583 good point with https://github.com/atlassian/yarn-deduplicate.\nI already seen that we are facing this issue of dupplicated deps with different versions\n@jstastny-cz @cristianonicolai\nTo me I'd say that we should open a JIRA to fix that (. Seems like yarn deduplicate could solve the issue.) and continue with this PR.", "author": "pefernan", "createdAt": "2020-07-27T10:09:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyMTA5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY1MTEzNg==", "url": "https://github.com/kiegroup/kogito-apps/pull/332#discussion_r461651136", "bodyText": "+1 to create a JIRA to look into yarn-deduplicate. That might actually be related to the issues we see when building on #349.\nI'm really just not sure how there two versions of \"esprima\" can coexist. @yzhao583 can you maybe that a look if we can safely use both?", "author": "cristianonicolai", "createdAt": "2020-07-28T14:59:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyMTA5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE5NjkyNQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/332#discussion_r462196925", "bodyText": "Hi everyone, I was brought here by @cristianonicolai's PR mention.\nI want to reassure you about having multiple version of the same module in the lock file. It's not a big deal, actually that's quite common when the dependency list grows. If a package needs an older version of a module already installed, there's no other way then install it and add it to the lock (the esprima example).\nIt's yarn (npm) job to install different versions in the right place, nesting node_modules inside deps that have specific version requirements, so that they will resolve the correct one.\nThe downside is an increase in the bundle size. Besides that, there are generally no issues for transitive deps. There are some exceptions though, like with multiple version of react for example. But when eventual conflicts arise, they hardly go unnoticed.\nRegarding dedupe, its purpose is a bit different. yarn already takes care of de-duplication in most of the cases. Some special treatment is required when multiple versions of a specific module are resolved even when only one of them could suffice according to listed versions inside package.json . It could happen sometimes, especially for projects with a long lifetime (the order in which deps are added matters) and a high number of deps. Again, I don't think we should worry about it until we face a specific case requiring dedupe.\nThe only problem I see, already fixed, was the presence of npm registry urls inside yarn.lock.\nSorry for the intrusion :)", "author": "kelvah", "createdAt": "2020-07-29T10:24:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyMTA5Nw=="}], "type": "inlineReview"}, {"oid": "6d21170b70046da5ebc43f5ae0b3db4fb1ff8c9d", "url": "https://github.com/kiegroup/kogito-apps/commit/6d21170b70046da5ebc43f5ae0b3db4fb1ff8c9d", "message": "Modified API for DataTable component", "committedDate": "2020-07-29T17:49:19Z", "type": "commit"}, {"oid": "6d21170b70046da5ebc43f5ae0b3db4fb1ff8c9d", "url": "https://github.com/kiegroup/kogito-apps/commit/6d21170b70046da5ebc43f5ae0b3db4fb1ff8c9d", "message": "Modified API for DataTable component", "committedDate": "2020-07-29T17:49:19Z", "type": "forcePushed"}]}