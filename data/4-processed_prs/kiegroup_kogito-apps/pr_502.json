{"pr_number": 502, "pr_title": "KOGITO-3251: Job actions on timeline panel", "pr_createdAt": "2020-10-26T06:44:50Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/502", "timeline": [{"oid": "51fe411955792f9f6ad7fe9e2ac633bc1bd3824d", "url": "https://github.com/kiegroup/kogito-apps/commit/51fe411955792f9f6ad7fe9e2ac633bc1bd3824d", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-03T16:40:21Z", "type": "forcePushed"}, {"oid": "e78cb61362f26bece08adb5cecb2506bca0d2688", "url": "https://github.com/kiegroup/kogito-apps/commit/e78cb61362f26bece08adb5cecb2506bca0d2688", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-03T16:42:10Z", "type": "forcePushed"}, {"oid": "6a265677419ce729994b30f739360794bf483a89", "url": "https://github.com/kiegroup/kogito-apps/commit/6a265677419ce729994b30f739360794bf483a89", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-03T18:36:51Z", "type": "forcePushed"}, {"oid": "a8500d11ed97bc5433facb03b8c315cb9ba315d9", "url": "https://github.com/kiegroup/kogito-apps/commit/a8500d11ed97bc5433facb03b8c315cb9ba315d9", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-03T20:14:39Z", "type": "forcePushed"}, {"oid": "07cb0276e2bd8301096afca8b3d5ebc7a54b2095", "url": "https://github.com/kiegroup/kogito-apps/commit/07cb0276e2bd8301096afca8b3d5ebc7a54b2095", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-03T20:17:08Z", "type": "forcePushed"}, {"oid": "b465de5219046aa1474ab0099c9fbc5bdaed0311", "url": "https://github.com/kiegroup/kogito-apps/commit/b465de5219046aa1474ab0099c9fbc5bdaed0311", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-03T20:18:28Z", "type": "forcePushed"}, {"oid": "f2a2c3cdbf0b2b8fb39ff811ea0898e8c3245f97", "url": "https://github.com/kiegroup/kogito-apps/commit/f2a2c3cdbf0b2b8fb39ff811ea0898e8c3245f97", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-04T07:08:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE2OTI1MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/502#discussion_r517169251", "bodyText": "@Sara4994 maybe 'handleJobCancelAction'  to differentiate from node cancelation ?", "author": "nmirasch", "createdAt": "2020-11-04T08:27:29Z", "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsTimeline/ProcessDetailsTimeline.tsx", "diffHunk": "@@ -85,12 +107,122 @@ const ProcessDetailsTimeline: React.FC<IOwnProps & OUIAProps> = ({\n     setModalContent(content);\n     handleModalToggle();\n   };\n-  const dropdownItems = (processInstanceData, node) => {\n+  const handleJobDetails = (job: GraphQL.Job): void => {\n+    setSelectedJob(job);\n+    handleDetailsToggle();\n+  };\n+  const handleDetailsToggle = (): void => {\n+    setIsDetailsModalOpen(!isDetailsModalOpen);\n+  };\n+\n+  const handleJobReschedule = (job: GraphQL.Job): void => {\n+    setSelectedJob(job);\n+    handleRescheduleToggle();\n+  };\n+\n+  const handleCancelAction = (job: GraphQL.Job): void => {", "originalCommit": "f2a2c3cdbf0b2b8fb39ff811ea0898e8c3245f97", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE3NDMzNQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/502#discussion_r517174335", "bodyText": "@Sara4994 we are duplicating here again, the same calls for the different jobs related actions. Could we unify in one place, at least this calls?", "author": "nmirasch", "createdAt": "2020-11-04T08:36:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE2OTI1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE3MDAyMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/502#discussion_r517170021", "bodyText": "@Sara4994 I think we moved to eslint", "author": "nmirasch", "createdAt": "2020-11-04T08:28:50Z", "path": "ui-packages/packages/common/src/graphql/types.tsx", "diffHunk": "@@ -1,4 +1,4 @@\n-/* eslint-disable */\n+/* tslint:disable */", "originalCommit": "f2a2c3cdbf0b2b8fb39ff811ea0898e8c3245f97", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "934e1efd360f4199b3d34667655ba09d47443682", "url": "https://github.com/kiegroup/kogito-apps/commit/934e1efd360f4199b3d34667655ba09d47443682", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-04T11:12:53Z", "type": "forcePushed"}, {"oid": "347a6ae478827a71206b22cc4c4a38984d646a75", "url": "https://github.com/kiegroup/kogito-apps/commit/347a6ae478827a71206b22cc4c4a38984d646a75", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-04T14:15:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM4NzYyOQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/502#discussion_r517387629", "bodyText": "the jobResponse name is indicating it's a static entity - just response, but it has also refetch() function defined. Would a JobRequest would be more appropriate?\nAlso JobsPanelProps property should reflect the name - I would easily name this a request. -> getJobs indicate it's rather a function.", "author": "jstastny-cz", "createdAt": "2020-11-04T14:34:35Z", "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsJobsPanel/ProcessDetailsJobsPanel.tsx", "diffHunk": "@@ -19,12 +19,21 @@ import JobActionsKebab from '../../Atoms/JobActionsKebab/JobActionsKebab';\n import { OUIAProps, componentOuiaProps, GraphQL } from '@kogito-apps/common';\n import { JobsIconCreator } from '../../../utils/Utils';\n import { refetchContext } from '../../contexts';\n+\n+interface ResponseDataType {\n+  Jobs?: GraphQL.Job[];\n+}\n+interface jobResponse {\n+  data: ResponseDataType;\n+  loading: boolean;\n+  refetch: () => void;\n+}\n interface JobsPanelProps {\n-  processInstanceId: string;\n+  getJobs: jobResponse;", "originalCommit": "347a6ae478827a71206b22cc4c4a38984d646a75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM5Mzc2OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/502#discussion_r517393769", "bodyText": "same naming concern as in ProcessDetailsJobsPanel", "author": "jstastny-cz", "createdAt": "2020-11-04T14:42:52Z", "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsTimeline/ProcessDetailsTimeline.tsx", "diffHunk": "@@ -29,32 +31,52 @@ import {\n   handleSkip,\n   handleNodeInstanceRetrigger,\n   setTitle,\n-  handleNodeInstanceCancel\n+  handleNodeInstanceCancel,\n+  jobCancel\n } from '../../../utils/Utils';\n import ProcessInstance = GraphQL.ProcessInstance;\n import ProcessListModal from '../../Atoms/ProcessListModal/ProcessListModal';\n+import JobsPanelDetailsModal from '../../Atoms/JobsPanelDetailsModal/JobsPanelDetailsModal';\n+import JobsRescheduleModal from '../../Atoms/JobsRescheduleModal/JobsRescheduleModal';\n+import { refetchContext } from '../../contexts';\n+import JobsCancelModal from '../../Atoms/JobsCancelModal/JobsCancelModal';\n \n+interface jobResponse {\n+  data: any;\n+  loading: boolean;\n+  refetch: () => void;\n+}\n export interface IOwnProps {\n   data: Pick<\n     ProcessInstance,\n     'id' | 'nodes' | 'addons' | 'error' | 'serviceUrl' | 'processId' | 'state'\n   >;\n+  getJobs: jobResponse;\n }\n enum TitleType {\n   SUCCESS = 'success',\n   FAILURE = 'failure'\n }\n const ProcessDetailsTimeline: React.FC<IOwnProps & OUIAProps> = ({\n   data,\n+  getJobs,", "originalCommit": "347a6ae478827a71206b22cc4c4a38984d646a75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM5Mzk4NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/502#discussion_r517393985", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                setisRescheduleModalOpen(!isRescheduleModalOpen);\n          \n          \n            \n                setIsRescheduleModalOpen(!isRescheduleModalOpen);", "author": "jstastny-cz", "createdAt": "2020-11-04T14:43:11Z", "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsTimeline/ProcessDetailsTimeline.tsx", "diffHunk": "@@ -85,12 +107,109 @@ const ProcessDetailsTimeline: React.FC<IOwnProps & OUIAProps> = ({\n     setModalContent(content);\n     handleModalToggle();\n   };\n-  const dropdownItems = (processInstanceData, node) => {\n+  const handleJobDetails = (job: GraphQL.Job): void => {\n+    setSelectedJob(job);\n+    handleDetailsToggle();\n+  };\n+  const handleDetailsToggle = (): void => {\n+    setIsDetailsModalOpen(!isDetailsModalOpen);\n+  };\n+\n+  const handleJobReschedule = (job: GraphQL.Job): void => {\n+    setSelectedJob(job);\n+    handleRescheduleToggle();\n+  };\n+\n+  const handleCancelAction = (job: GraphQL.Job): void => {\n+    jobCancel(job, setCancelModalTitle, setModalContent, getJobs.refetch);\n+    handleCancelModalToggle();\n+  };\n+\n+  const handleRescheduleToggle = (): void => {\n+    setisRescheduleModalOpen(!isRescheduleModalOpen);", "originalCommit": "347a6ae478827a71206b22cc4c4a38984d646a75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM5NDg5NA==", "url": "https://github.com/kiegroup/kogito-apps/pull/502#discussion_r517394894", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                const dropdownItemsValue: any = dropdownItems(data, node);\n          \n          \n            \n                const dropdownItemsValue: JSX.Element[] = dropdownItems(data, node);", "author": "jstastny-cz", "createdAt": "2020-11-04T14:44:23Z", "path": "ui-packages/packages/management-console/src/components/Organisms/ProcessDetailsTimeline/ProcessDetailsTimeline.tsx", "diffHunk": "@@ -189,15 +310,19 @@ const ProcessDetailsTimeline: React.FC<IOwnProps & OUIAProps> = ({\n           Cancel node\n         </DropdownItem>\n       ];\n+      const items = renderJobActions(node.id, options);\n+      return items.flat();\n     } else {\n-      return [];\n+      const items = renderJobActions(node.id, []);\n+      return items.flat();\n     }\n   };\n-  const processManagementKebabButtons = (node, index) => {\n-    const dropdownItemsValue = dropdownItems(data, node);\n+  const processManagementKebabButtons = (node, index): JSX.Element => {\n+    const dropdownItemsValue: any = dropdownItems(data, node);", "originalCommit": "347a6ae478827a71206b22cc4c4a38984d646a75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dd47b5cba84a3416f8704e8b99c122d63fed6ec0", "url": "https://github.com/kiegroup/kogito-apps/commit/dd47b5cba84a3416f8704e8b99c122d63fed6ec0", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-05T11:00:14Z", "type": "forcePushed"}, {"oid": "20a09cd56bb668338e081d5e17605bc663f28911", "url": "https://github.com/kiegroup/kogito-apps/commit/20a09cd56bb668338e081d5e17605bc663f28911", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-05T11:12:17Z", "type": "forcePushed"}, {"oid": "a08d0b050e40cbc20c777882cfc6f49199d08864", "url": "https://github.com/kiegroup/kogito-apps/commit/a08d0b050e40cbc20c777882cfc6f49199d08864", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-05T14:58:59Z", "type": "commit"}, {"oid": "a08d0b050e40cbc20c777882cfc6f49199d08864", "url": "https://github.com/kiegroup/kogito-apps/commit/a08d0b050e40cbc20c777882cfc6f49199d08864", "message": "KOGITO-3251: Job actions on timeline panel", "committedDate": "2020-11-05T14:58:59Z", "type": "forcePushed"}]}