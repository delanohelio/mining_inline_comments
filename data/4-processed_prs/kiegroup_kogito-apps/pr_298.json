{"pr_number": 298, "pr_title": "KOGITO-1901: Manage columns enhancement", "pr_createdAt": "2020-06-28T09:55:35Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/298", "timeline": [{"oid": "5c2f013abfe22919e8908647439fe8fd2e5c9fd0", "url": "https://github.com/kiegroup/kogito-apps/commit/5c2f013abfe22919e8908647439fe8fd2e5c9fd0", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-28T18:37:48Z", "type": "forcePushed"}, {"oid": "884b0e4a23912a789996fde7d69e050babaff113", "url": "https://github.com/kiegroup/kogito-apps/commit/884b0e4a23912a789996fde7d69e050babaff113", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-28T18:46:19Z", "type": "forcePushed"}, {"oid": "09817e33f97bc64dda389c151a882a0819207615", "url": "https://github.com/kiegroup/kogito-apps/commit/09817e33f97bc64dda389c151a882a0819207615", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-28T19:00:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk0NDg3OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r446944879", "bodyText": "I think we can simplify the text, and we should make \"Manage columns\" a link. \"Manage columns to see content\"", "author": "srambach", "createdAt": "2020-06-29T12:49:29Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerTable/DomainExplorerTable.tsx", "diffHunk": "@@ -330,7 +331,7 @@ const DomainExplorerTable = ({\n                   No columns selected\n                 </Title>\n                 <EmptyStateBody>\n-                  Select columns from the dropdown to see content\n+                  Select columns from Manage Columns to see content", "originalCommit": "09817e33f97bc64dda389c151a882a0819207615", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA5NTAwNA==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447095004", "bodyText": "this is done", "author": "Sara4994", "createdAt": "2020-06-29T16:21:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk0NDg3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk1OTA3MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r446959071", "bodyText": "This should match the id of the label for the checkbox. This is important for screen readers to know what to read out for the checkbox.", "author": "srambach", "createdAt": "2020-06-29T13:11:26Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerManageColumns/DomainExplorerManageColumns.tsx", "diffHunk": "@@ -300,40 +189,107 @@ const DomainExplorerManageColumns: React.FC<IOwnProps> = ({\n                   return item;\n                 }\n               })\n-              .map(item => (\n-                <SelectOption\n-                  key={Math.random()}\n-                  value={item.name + title + group.name}\n-                >\n-                  {item.name}\n-                </SelectOption>\n-              ))}\n-          </SelectGroup>\n+              .map((item, _index) => {\n+                allSelections.push(item.name + '/' + title + '/' + group.name);\n+                return (\n+                  <DataListContent\n+                    aria-label=\"Primary Content Details\"\n+                    id=\"ex-expand1\"\n+                    isHidden={!expanded.includes(label.replace(/\\,/g, ''))}\n+                    className=\"kogito-common--manage-columns__data-list-content\"\n+                    key={Math.random()}\n+                  >\n+                    <DataListItemRow>\n+                      <DataListCheck\n+                        aria-labelledby=\"table-column-management-item2\"", "originalCommit": "09817e33f97bc64dda389c151a882a0819207615", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA3MTk3Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447071977", "bodyText": "done", "author": "Sara4994", "createdAt": "2020-06-29T15:47:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk1OTA3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk2MDg3Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r446960872", "bodyText": "ids need to be unique.", "author": "srambach", "createdAt": "2020-06-29T13:14:03Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerManageColumns/DomainExplorerManageColumns.tsx", "diffHunk": "@@ -343,31 +299,59 @@ const DomainExplorerManageColumns: React.FC<IOwnProps> = ({\n                       tempData.push(_v);\n                       childSelectionItems(tempData, group.name, item.name);\n                     } else {\n+                      /* istanbul ignore else */\n                       if (item.type.kind !== 'LIST') {\n                         return item;\n                       }\n                     }\n                   })\n-                  .map((item, _index) => (\n-                    <SelectOption key={_index} value={item.name + group.name}>\n-                      {item.name}\n-                    </SelectOption>\n-                  ))}\n-            </SelectGroup>\n+                  .map((item, _index) => {\n+                    allSelections.push(item.name + '/' + group.name);\n+                    return (\n+                      <DataListContent\n+                        aria-label=\"Primary Content Details\"\n+                        id=\"ex-expand1\"", "originalCommit": "09817e33f97bc64dda389c151a882a0819207615", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5950bf43d91f8843d9a490288d66075b971e88c5", "url": "https://github.com/kiegroup/kogito-apps/commit/5950bf43d91f8843d9a490288d66075b971e88c5", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-29T14:11:40Z", "type": "forcePushed"}, {"oid": "dd7667fe135ca03367f76bf9c4804d35d29f7c06", "url": "https://github.com/kiegroup/kogito-apps/commit/dd7667fe135ca03367f76bf9c4804d35d29f7c06", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-29T15:45:45Z", "type": "forcePushed"}, {"oid": "081e7c5893f97c1164845aa0811e91e97671be85", "url": "https://github.com/kiegroup/kogito-apps/commit/081e7c5893f97c1164845aa0811e91e97671be85", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-29T15:51:24Z", "type": "forcePushed"}, {"oid": "987571065970a3c0d785cdc8f6f40fdaafd56c96", "url": "https://github.com/kiegroup/kogito-apps/commit/987571065970a3c0d785cdc8f6f40fdaafd56c96", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-29T16:13:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA4MjY2Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447082667", "bodyText": "remove commented code.", "author": "jstastny-cz", "createdAt": "2020-06-29T16:02:47Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerManageColumns/tests/DomainExplorerManageColumns.test.tsx", "diffHunk": "@@ -166,15 +183,221 @@ describe('Domain Explorer manage columns component', () => {\n       setOffsetVal: jest.fn(),\n       setPageSize: jest.fn(),\n       setIsLoadingMore: jest.fn(),\n-      isLoadingMore: true\n+      isLoadingMore: true,\n+      metaData: {\n+        metadata: [\n+          {\n+            processInstances: [\n+              'id',\n+              'processName',\n+              'state',\n+              'start',\n+              'lastUpdate',\n+              'businessKey'\n+            ]\n+          }\n+        ]\n+      }\n     };\n-\n     const wrapper = mount(<DomainExplorerManageColumns {...props} />);\n     wrapper.update();\n     wrapper.setProps({});\n     expect(wrapper).toMatchSnapshot();\n   });\n-\n+  it('Test toggle selection', () => {\n+    const props = {\n+      columnPickerType: 'Travels',\n+      setColumnFilters: jest.fn(),\n+      setTableLoading: jest.fn(),\n+      getQueryTypes: {\n+        data: {\n+          __schema: {\n+            queryType: [\n+              {\n+                name: 'Address',\n+                kind: 'OBJECT',\n+                fields: [\n+                  {\n+                    name: 'city',\n+                    type: {\n+                      name: 'String',\n+                      kind: 'SCALAR'\n+                    }\n+                  },\n+                  {\n+                    name: 'country',\n+                    type: {\n+                      name: 'String',\n+                      kind: 'SCALAR'\n+                    }\n+                  },\n+                  {\n+                    name: 'location',\n+                    type: {\n+                      name: 'Test',\n+                      kind: 'OBJECT'\n+                    }\n+                  }\n+                ]\n+              },\n+              {\n+                name: 'Test',\n+                kind: 'OBJECT',\n+                fields: [\n+                  {\n+                    name: 'city',\n+                    type: {\n+                      name: 'String',\n+                      kind: 'SCALAR'\n+                    }\n+                  },\n+                  {\n+                    name: 'country',\n+                    type: {\n+                      name: 'String',\n+                      kind: 'SCALAR'\n+                    }\n+                  }\n+                ]\n+              }\n+            ]\n+          }\n+        },\n+        loading: false\n+      },\n+      setDisplayTable: jest.fn(),\n+      parameters: [{ flight: ['arrival'] }, { flight: ['departure'] }],\n+      setParameters: jest.fn(),\n+      selected: [],\n+      setSelected: jest.fn(),\n+      data: [\n+        {\n+          name: 'id',\n+          type: {\n+            fields: null,\n+            kind: 'SCALAR',\n+            name: 'String',\n+            __typename: '__Type'\n+          }\n+        },\n+        {\n+          name: 'flight',\n+          type: {\n+            name: 'Flight',\n+            fields: [\n+              {\n+                name: 'arrival',\n+                type: {\n+                  name: 'String',\n+                  kind: 'SCALAR'\n+                }\n+              },\n+              {\n+                name: 'departure',\n+                type: {\n+                  name: 'String',\n+                  kind: 'SCALAR'\n+                }\n+              }\n+            ],\n+            kind: 'OBJECT'\n+          }\n+        },\n+        {\n+          name: 'hotel',\n+          type: {\n+            name: 'Hotel',\n+            fields: [\n+              {\n+                name: 'address',\n+                type: {\n+                  name: 'Address',\n+                  kind: 'OBJECT',\n+                  fields: [\n+                    {\n+                      name: 'city',\n+                      type: {\n+                        name: 'String',\n+                        kind: 'SCALAR'\n+                      }\n+                    },\n+                    {\n+                      name: 'country',\n+                      type: {\n+                        name: 'String',\n+                        kind: 'SCALAR'\n+                      }\n+                    }\n+                  ]\n+                }\n+              },\n+              {\n+                name: 'bookingNumber',\n+                type: {\n+                  name: 'String',\n+                  kind: 'SCALAR'\n+                }\n+              }\n+            ],\n+            kind: 'OBJECT'\n+          }\n+        }\n+      ],\n+      getPicker: {\n+        data: {},\n+        loading: false\n+      },\n+      setError: jest.fn(),\n+      setDisplayEmptyState: jest.fn(),\n+      rememberedParams: [{ flight: ['arrival'] }, { flight: ['departure'] }],\n+      enableCache: false,\n+      setEnableCache: jest.fn(),\n+      pageSize: 10,\n+      offsetVal: 0,\n+      setOffsetVal: jest.fn(),\n+      setPageSize: jest.fn(),\n+      setIsLoadingMore: jest.fn(),\n+      isLoadingMore: true,\n+      metaData: {\n+        metadata: [\n+          {\n+            processInstances: [\n+              'id',\n+              'processName',\n+              'state',\n+              'start',\n+              'lastUpdate',\n+              'businessKey'\n+            ]\n+          }\n+        ]\n+      }\n+    };\n+    // const event = {", "originalCommit": "081e7c5893f97c1164845aa0811e91e97671be85", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE0NTQ0NA==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447145444", "bodyText": "done", "author": "Sara4994", "createdAt": "2020-06-29T17:46:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA4MjY2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA4Mjg5Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447082893", "bodyText": "remove commented code", "author": "jstastny-cz", "createdAt": "2020-06-29T16:03:09Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerManageColumns/tests/DomainExplorerManageColumns.test.tsx", "diffHunk": "@@ -166,15 +183,221 @@ describe('Domain Explorer manage columns component', () => {\n       setOffsetVal: jest.fn(),\n       setPageSize: jest.fn(),\n       setIsLoadingMore: jest.fn(),\n-      isLoadingMore: true\n+      isLoadingMore: true,\n+      metaData: {\n+        metadata: [\n+          {\n+            processInstances: [\n+              'id',\n+              'processName',\n+              'state',\n+              'start',\n+              'lastUpdate',\n+              'businessKey'\n+            ]\n+          }\n+        ]\n+      }\n     };\n-\n     const wrapper = mount(<DomainExplorerManageColumns {...props} />);\n     wrapper.update();\n     wrapper.setProps({});\n     expect(wrapper).toMatchSnapshot();\n   });\n-\n+  it('Test toggle selection', () => {\n+    const props = {\n+      columnPickerType: 'Travels',\n+      setColumnFilters: jest.fn(),\n+      setTableLoading: jest.fn(),\n+      getQueryTypes: {\n+        data: {\n+          __schema: {\n+            queryType: [\n+              {\n+                name: 'Address',\n+                kind: 'OBJECT',\n+                fields: [\n+                  {\n+                    name: 'city',\n+                    type: {\n+                      name: 'String',\n+                      kind: 'SCALAR'\n+                    }\n+                  },\n+                  {\n+                    name: 'country',\n+                    type: {\n+                      name: 'String',\n+                      kind: 'SCALAR'\n+                    }\n+                  },\n+                  {\n+                    name: 'location',\n+                    type: {\n+                      name: 'Test',\n+                      kind: 'OBJECT'\n+                    }\n+                  }\n+                ]\n+              },\n+              {\n+                name: 'Test',\n+                kind: 'OBJECT',\n+                fields: [\n+                  {\n+                    name: 'city',\n+                    type: {\n+                      name: 'String',\n+                      kind: 'SCALAR'\n+                    }\n+                  },\n+                  {\n+                    name: 'country',\n+                    type: {\n+                      name: 'String',\n+                      kind: 'SCALAR'\n+                    }\n+                  }\n+                ]\n+              }\n+            ]\n+          }\n+        },\n+        loading: false\n+      },\n+      setDisplayTable: jest.fn(),\n+      parameters: [{ flight: ['arrival'] }, { flight: ['departure'] }],\n+      setParameters: jest.fn(),\n+      selected: [],\n+      setSelected: jest.fn(),\n+      data: [\n+        {\n+          name: 'id',\n+          type: {\n+            fields: null,\n+            kind: 'SCALAR',\n+            name: 'String',\n+            __typename: '__Type'\n+          }\n+        },\n+        {\n+          name: 'flight',\n+          type: {\n+            name: 'Flight',\n+            fields: [\n+              {\n+                name: 'arrival',\n+                type: {\n+                  name: 'String',\n+                  kind: 'SCALAR'\n+                }\n+              },\n+              {\n+                name: 'departure',\n+                type: {\n+                  name: 'String',\n+                  kind: 'SCALAR'\n+                }\n+              }\n+            ],\n+            kind: 'OBJECT'\n+          }\n+        },\n+        {\n+          name: 'hotel',\n+          type: {\n+            name: 'Hotel',\n+            fields: [\n+              {\n+                name: 'address',\n+                type: {\n+                  name: 'Address',\n+                  kind: 'OBJECT',\n+                  fields: [\n+                    {\n+                      name: 'city',\n+                      type: {\n+                        name: 'String',\n+                        kind: 'SCALAR'\n+                      }\n+                    },\n+                    {\n+                      name: 'country',\n+                      type: {\n+                        name: 'String',\n+                        kind: 'SCALAR'\n+                      }\n+                    }\n+                  ]\n+                }\n+              },\n+              {\n+                name: 'bookingNumber',\n+                type: {\n+                  name: 'String',\n+                  kind: 'SCALAR'\n+                }\n+              }\n+            ],\n+            kind: 'OBJECT'\n+          }\n+        }\n+      ],\n+      getPicker: {\n+        data: {},\n+        loading: false\n+      },\n+      setError: jest.fn(),\n+      setDisplayEmptyState: jest.fn(),\n+      rememberedParams: [{ flight: ['arrival'] }, { flight: ['departure'] }],\n+      enableCache: false,\n+      setEnableCache: jest.fn(),\n+      pageSize: 10,\n+      offsetVal: 0,\n+      setOffsetVal: jest.fn(),\n+      setPageSize: jest.fn(),\n+      setIsLoadingMore: jest.fn(),\n+      isLoadingMore: true,\n+      metaData: {\n+        metadata: [\n+          {\n+            processInstances: [\n+              'id',\n+              'processName',\n+              'state',\n+              'start',\n+              'lastUpdate',\n+              'businessKey'\n+            ]\n+          }\n+        ]\n+      }\n+    };\n+    // const event = {\n+    // target: {\n+    //     name: 'id'\n+    //   }\n+    // } as React.ChangeEvent<HTMLInputElement>\n+    const event2 = { target: {} } as React.MouseEvent<HTMLInputElement>;\n+    const wrapper = mount(<DomainExplorerManageColumns {...props} />);\n+    wrapper.update();\n+    wrapper.setProps({});\n+    wrapper\n+      .find('#manage-columns-button')\n+      .first()\n+      .simulate('click');\n+    wrapper\n+      .find('DataListToggle')\n+      .first()\n+      .props()\n+      .onClick(event2);\n+    wrapper\n+      .find('DataListToggle')\n+      .at(2)\n+      .props()\n+      .onClick(event2);\n+    // wrapper.find('DataListCheck').first().props().onChange(event);", "originalCommit": "081e7c5893f97c1164845aa0811e91e97671be85", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE0NTUxNw==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447145517", "bodyText": "done", "author": "Sara4994", "createdAt": "2020-06-29T17:46:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA4Mjg5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA4MzkzMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447083932", "bodyText": "do we want to check what happened here? something appeared/hid or is this testing that #save-columns appeared after first click and can be clicked? If so, I'd check that the button hid again.", "author": "jstastny-cz", "createdAt": "2020-06-29T16:04:50Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerManageColumns/tests/DomainExplorerManageColumns.test.tsx", "diffHunk": "@@ -316,23 +553,31 @@ describe('Domain Explorer manage columns component', () => {\n       setOffsetVal: jest.fn(),\n       setPageSize: jest.fn(),\n       setIsLoadingMore: jest.fn(),\n-      isLoadingMore: true\n-    };\n-    const mGraphQLResponse = {\n-      data: {\n-        Travels: []\n-      },\n-      loading: false,\n-      errors: [],\n-      networkStatus: '',\n-      stale: true\n+      isLoadingMore: true,\n+      metaData: {\n+        metadata: [\n+          {\n+            processInstances: [\n+              'id',\n+              'processName',\n+              'state',\n+              'start',\n+              'lastUpdate',\n+              'businessKey'\n+            ]\n+          }\n+        ]\n+      }\n     };\n-\n-    client.query.mockReturnValueOnce(mGraphQLResponse);\n-    const wrapper = shallow(<DomainExplorerManageColumns {...props} />);\n-    wrapper.find('#refresh-button').simulate('click');\n-    wrapper.find('#apply-columns').simulate('click');\n-    await Promise.resolve();\n+    const wrapper = mount(<DomainExplorerManageColumns {...props} />);\n+    wrapper\n+      .find('#manage-columns-button')\n+      .first()\n+      .simulate('click');\n+    wrapper\n+      .find('#save-columns')\n+      .first()\n+      .simulate('click');", "originalCommit": "081e7c5893f97c1164845aa0811e91e97671be85", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE1MzA1Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447153053", "bodyText": "this click would trigger function a call which will in turn triggers query. have added some expect checks to it", "author": "Sara4994", "createdAt": "2020-06-29T17:59:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA4MzkzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA5NjExNQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447096115", "bodyText": "could we add comments on what is actually happening here? And potentially also expect checks of what actually happened?", "author": "jstastny-cz", "createdAt": "2020-06-29T16:23:13Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerManageColumns/tests/DomainExplorerManageColumns.test.tsx", "diffHunk": "@@ -716,47 +1020,85 @@ describe('Domain Explorer manage columns component', () => {\n       rememberedParams: [],\n       enableCache: false,\n       setEnableCache: jest.fn(),\n-      pageSize: 10,\n-      offsetVal: 0,\n+      pageSize: 2,\n+      offsetVal: 10,\n       setOffsetVal: jest.fn(),\n       setPageSize: jest.fn(),\n       setIsLoadingMore: jest.fn(),\n-      isLoadingMore: true\n-    };\n-    const obj = {\n-      target: { id: 'id' },\n-      nativeEvent: {\n-        target: {\n-          nextSibling: {\n-            innerText: ''\n-          },\n-          parentElement: {\n-            parentElement: {\n-              getAttribute: jest.fn(() => 'id')\n-            }\n+      isLoadingMore: true,\n+      metaData: {\n+        metadata: [\n+          {\n+            processInstances: [\n+              'id',\n+              'processName',\n+              'state',\n+              'start',\n+              'lastUpdate',\n+              'businessKey'\n+            ]\n           }\n-        }\n-      }\n+        ]\n+      },\n+      retryColumns: false,\n+      setRetryColumns: jest.fn()\n     };\n-    const wrapper = shallow(<DomainExplorerManageColumns {...props} />);\n-    wrapper.update();\n-\n-    wrapper.find('#columnPicker-dropdown').simulate('select', obj);\n-    expect(wrapper).toMatchSnapshot();\n+    const mGraphQLResponse = {\n+      data: {\n+        Travels: []\n+      },\n+      loading: false,\n+      errors: [],\n+      networkStatus: '',\n+      stale: true\n+    };\n+    const event = { target: {} } as React.ChangeEvent<HTMLInputElement>;\n+    client.query.mockReturnValueOnce(mGraphQLResponse);\n+    const wrapper = mount(<DomainExplorerManageColumns {...props} />);\n+    wrapper\n+      .find('#manage-columns-button')\n+      .first()\n+      .simulate('click');\n+    expect(wrapper.find('#selectAll-dropdown')).toBeTruthy();\n+    wrapper\n+      .find('#selectAll-dropdown')\n+      .first()\n+      .props()\n+      ['toggle']['props']['splitButtonItems'][0]['props']['onClick']();", "originalCommit": "987571065970a3c0d785cdc8f6f40fdaafd56c96", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE1MjQ2MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447152461", "bodyText": "added comments and some expect checks", "author": "Sara4994", "createdAt": "2020-06-29T17:58:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA5NjExNQ=="}], "type": "inlineReview"}, {"oid": "1a61006e5d04c7de341f77cdf20135dcc7d7faa1", "url": "https://github.com/kiegroup/kogito-apps/commit/1a61006e5d04c7de341f77cdf20135dcc7d7faa1", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-29T17:45:09Z", "type": "forcePushed"}, {"oid": "00c3b5cf847027332f6ffb8956e52f9bc0b27eb4", "url": "https://github.com/kiegroup/kogito-apps/commit/00c3b5cf847027332f6ffb8956e52f9bc0b27eb4", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-29T17:55:29Z", "type": "forcePushed"}, {"oid": "5d76c5abf5c3351d631867489976a8dcf1941a57", "url": "https://github.com/kiegroup/kogito-apps/commit/5d76c5abf5c3351d631867489976a8dcf1941a57", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-30T02:05:54Z", "type": "forcePushed"}, {"oid": "d46ad72f161038c28744ca603d26d4ed66c25b53", "url": "https://github.com/kiegroup/kogito-apps/commit/d46ad72f161038c28744ca603d26d4ed66c25b53", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-30T08:21:44Z", "type": "forcePushed"}, {"oid": "bb7508a992af2690f3379f6f387402b7a7b39f70", "url": "https://github.com/kiegroup/kogito-apps/commit/bb7508a992af2690f3379f6f387402b7a7b39f70", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-06-30T16:11:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc3MTExNg==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447771116", "bodyText": "can we have a variable to combine this. It seems to be recreated a few times and sometimes group.name comes first, then item.name. would make it consistent.", "author": "cristianonicolai", "createdAt": "2020-06-30T15:24:20Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerManageColumns/DomainExplorerManageColumns.tsx", "diffHunk": "@@ -300,40 +202,136 @@ const DomainExplorerManageColumns: React.FC<IOwnProps> = ({\n                   return item;\n                 }\n               })\n-              .map(item => (\n-                <SelectOption\n-                  key={Math.random()}\n-                  value={item.name + title + group.name}\n-                >\n-                  {item.name}\n-                </SelectOption>\n-              ))}\n-          </SelectGroup>\n+              .map((item, _index) => {\n+                allSelections.push(item.name + '/' + title + '/' + group.name);\n+                return (\n+                  <DataListContent\n+                    aria-label={\n+                      'Primary Content Details-' +\n+                      group.name +\n+                      '/' +\n+                      title +\n+                      '/' +\n+                      item.name", "originalCommit": "d46ad72f161038c28744ca603d26d4ed66c25b53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODExODYwNA==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r448118604", "bodyText": "done", "author": "Sara4994", "createdAt": "2020-07-01T05:10:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc3MTExNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc3MjQwMA==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447772400", "bodyText": "same here, create a variable to reuse this key, and I guess it should be group.name + '/' + item.name", "author": "cristianonicolai", "createdAt": "2020-06-30T15:25:55Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerManageColumns/DomainExplorerManageColumns.tsx", "diffHunk": "@@ -343,31 +341,71 @@ const DomainExplorerManageColumns: React.FC<IOwnProps> = ({\n                       tempData.push(_v);\n                       childSelectionItems(tempData, group.name, item.name);\n                     } else {\n+                      /* istanbul ignore else */\n                       if (item.type.kind !== 'LIST') {\n                         return item;\n                       }\n                     }\n                   })\n-                  .map((item, _index) => (\n-                    <SelectOption key={_index} value={item.name + group.name}>\n-                      {item.name}\n-                    </SelectOption>\n-                  ))}\n-            </SelectGroup>\n+                  .map((item, _index) => {\n+                    allSelections.push(item.name + '/' + group.name);", "originalCommit": "d46ad72f161038c28744ca603d26d4ed66c25b53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODExODY1MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r448118651", "bodyText": "done", "author": "Sara4994", "createdAt": "2020-07-01T05:10:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc3MjQwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc4MDE2OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447780169", "bodyText": "Isnt better to split there into two separeted functions? handleSelectNone and handleSelectAll ?", "author": "cristianonicolai", "createdAt": "2020-06-30T15:36:21Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerManageColumns/DomainExplorerManageColumns.tsx", "diffHunk": "@@ -379,61 +417,240 @@ const DomainExplorerManageColumns: React.FC<IOwnProps> = ({\n     return unique;\n   }\n \n+  useEffect(() => {\n+    /* istanbul ignore else */\n+    if (isLoadingMore) {\n+      generateQuery(parameters);\n+    }\n+  }, [isLoadingMore]);\n+\n+  useEffect(() => {\n+    /* istanbul ignore else */\n+    if (\n+      (rememberedParams.length === 0 && parameters.length !== 1) ||\n+      rememberedParams.length > 0\n+    ) {\n+      generateQuery(parameters);\n+    }\n+  }, [parameters.length > 1]);\n+\n+  async function generateQuery(paramFields) {\n+    setTableLoading(true);\n+    setEnableRefresh(true);\n+    if (columnPickerType && paramFields.length > 1) {\n+      const Query = query({\n+        operation: columnPickerType,\n+        fields: paramFields,\n+        variables: {\n+          pagination: {\n+            value: { offset: offsetVal, limit: pageSize },\n+            type: 'Pagination'\n+          }\n+        }\n+      });\n+      try {\n+        const response = await client.query({\n+          query: gql`\n+            ${Query.query}\n+          `,\n+          variables: Query.variables,\n+          fetchPolicy: enableCache ? 'cache-first' : 'network-only'\n+        });\n+        const firstKey = Object.keys(response.data)[0];\n+        if (response.data[firstKey].length > 0) {\n+          const resp = response.data;\n+          const respKeys = Object.keys(resp)[0];\n+          const tableContent = resp[respKeys];\n+          const finalResp = [];\n+          tableContent.map(content => {\n+            const finalObject = validateResponse(content, paramFields);\n+            finalResp.push(finalObject);\n+          });\n+          setColumnFilters(finalResp);\n+          setTableLoading(false);\n+          setDisplayTable(true);\n+          setEnableCache(false);\n+          setIsLoadingMore(false);\n+        } else {\n+          setTableLoading(false);\n+          setDisplayEmptyState(true);\n+          setEnableCache(false);\n+        }\n+      } catch (error) {\n+        setError(error);\n+      }\n+    } else {\n+      setTableLoading(false);\n+      setDisplayEmptyState(false);\n+      setDisplayTable(false);\n+    }\n+  }\n+\n+  const renderModal = () => {\n+    const numSelected = selected.length;\n+    const allSelected = numSelected === allSelections.length;\n+    const anySelected = numSelected > 0;\n+    const someChecked = anySelected ? null : false;\n+    const isChecked = allSelected ? true : someChecked;\n+\n+    const onDropDownToggle = isOpen => {\n+      setIsDropDownOpen(isOpen);\n+    };\n+\n+    const onDropDownSelect = event => {\n+      setIsDropDownOpen(!isDropDownOpen);\n+    };\n+\n+    const handleSelectClick = newState => {\n+      if (newState === 'none') {\n+        setSelected([]);\n+        setParameters([metaData]);\n+      } else {\n+        setSelected(allSelections);\n+        const selectionArray = allSelections.map(ele =>\n+          ele\n+            .split('/')\n+            .map(item => item.charAt(0).toLowerCase() + item.slice(1))\n+        );\n+        const finalObj = [];\n+        selectionArray.forEach(arr => {\n+          const objValue = arr.shift();\n+          const rest = filterColumnSelection(arr, objValue);\n+          finalObj.push(rest);\n+        });\n+        finalObj.push(metaData);\n+        setParameters(finalObj);\n+      }\n+    };\n+\n+    const items = [\n+      <DropdownItem key={0} onClick={() => handleSelectClick('none')}>", "originalCommit": "d46ad72f161038c28744ca603d26d4ed66c25b53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM3ODg5OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r448378899", "bodyText": "done", "author": "Sara4994", "createdAt": "2020-07-01T13:53:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc4MDE2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc4NjQ2MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r447786460", "bodyText": "could you just have a function here let's say onManageColumnsClick that is received as parameter that you don't need to do a set true?", "author": "cristianonicolai", "createdAt": "2020-06-30T15:45:19Z", "path": "ui-packages/packages/common/src/components/Molecules/DomainExplorerTable/DomainExplorerTable.tsx", "diffHunk": "@@ -330,7 +336,15 @@ const DomainExplorerTable = ({\n                   No columns selected\n                 </Title>\n                 <EmptyStateBody>\n-                  Select columns from the dropdown to see content\n+                  <Button\n+                    variant=\"link\"\n+                    id=\"retry-columns-button\"\n+                    onClick={handleRetry}", "originalCommit": "d46ad72f161038c28744ca603d26d4ed66c25b53", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM3ODk1Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/298#discussion_r448378952", "bodyText": "done", "author": "Sara4994", "createdAt": "2020-07-01T13:53:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc4NjQ2MA=="}], "type": "inlineReview"}, {"oid": "adf3774cf26e7afca0dc50d35e37b4c32ea40179", "url": "https://github.com/kiegroup/kogito-apps/commit/adf3774cf26e7afca0dc50d35e37b4c32ea40179", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-07-01T05:09:46Z", "type": "forcePushed"}, {"oid": "64561de542dafbd9a058f729b1f0965d0285b161", "url": "https://github.com/kiegroup/kogito-apps/commit/64561de542dafbd9a058f729b1f0965d0285b161", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-07-01T13:52:23Z", "type": "forcePushed"}, {"oid": "1c4991a73899e11913b933d65ed573c11b0083c8", "url": "https://github.com/kiegroup/kogito-apps/commit/1c4991a73899e11913b933d65ed573c11b0083c8", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-07-01T14:10:42Z", "type": "forcePushed"}, {"oid": "c20bbf9420a573bfed43f99ddc8f10c3a036b370", "url": "https://github.com/kiegroup/kogito-apps/commit/c20bbf9420a573bfed43f99ddc8f10c3a036b370", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-07-01T15:33:07Z", "type": "forcePushed"}, {"oid": "db87e573790c2321a6601a02d9d9a852935b20dc", "url": "https://github.com/kiegroup/kogito-apps/commit/db87e573790c2321a6601a02d9d9a852935b20dc", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-07-02T11:10:15Z", "type": "forcePushed"}, {"oid": "db359ca07baabd0b1365d79b331d9cc5e079c609", "url": "https://github.com/kiegroup/kogito-apps/commit/db359ca07baabd0b1365d79b331d9cc5e079c609", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-07-02T13:29:24Z", "type": "forcePushed"}, {"oid": "884208bc1dd12bbb6757088dbc37bba6398a81d9", "url": "https://github.com/kiegroup/kogito-apps/commit/884208bc1dd12bbb6757088dbc37bba6398a81d9", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-07-02T16:10:07Z", "type": "commit"}, {"oid": "884208bc1dd12bbb6757088dbc37bba6398a81d9", "url": "https://github.com/kiegroup/kogito-apps/commit/884208bc1dd12bbb6757088dbc37bba6398a81d9", "message": "KOGITO-1901: Manage columns enhancement", "committedDate": "2020-07-02T16:10:07Z", "type": "forcePushed"}]}