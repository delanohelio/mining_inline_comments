{"pr_number": 429, "pr_title": "FAI-250: [trusty-ui]: Move to kogito-tooling 0.6.1", "pr_createdAt": "2020-09-01T16:21:25Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/429", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTI3NTc4MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/429#discussion_r481275780", "bodyText": "I should be able to copy the envelope HTML and JS from @kogito-tooling/kie-bc-editors.\nI was going to add the PMML editor factory here too; but it's probably best I make a quick and easy \"host\" for the new editor until it's at a stage to be re-used in kogito's channels (including trusty). I'll update this PR... converting to draft.", "author": "manstis", "createdAt": "2020-09-01T16:25:06Z", "path": "ui-packages/packages/trusty/src/envelope/envelope.ts", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *        http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+import {\n+  ChannelType,\n+  getOperatingSystem\n+} from '@kogito-tooling/channel-common-api';\n+import * as EditorEnvelope from '@kogito-tooling/editor/dist/envelope';\n+import { EnvelopeBusMessage } from '@kogito-tooling/envelope-bus/dist/api';\n+import { GwtEditorWrapperFactory } from '@kogito-tooling/kie-bc-editors';\n+\n+EditorEnvelope.init({\n+  container: document.getElementById('envelope-app')!,\n+  bus: {\n+    postMessage<D, Type>(\n+      message: EnvelopeBusMessage<D, Type>,\n+      targetOrigin?: string,\n+      _?: any\n+    ) {\n+      window.parent.postMessage(message, '*', _);\n+    }\n+  },\n+  editorFactory: new EditorEnvelope.CompositeEditorFactory([", "originalCommit": "b3c486f946c33dd5b625cb7840a33505c9d80c98", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg5NzE1OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/429#discussion_r482897158", "bodyText": "Done.. ignore this comment.", "author": "manstis", "createdAt": "2020-09-03T11:10:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTI3NTc4MA=="}], "type": "inlineReview"}, {"oid": "f72aa0d5247a1bc0cf95f49feabfe158ad484ee7", "url": "https://github.com/kiegroup/kogito-apps/commit/f72aa0d5247a1bc0cf95f49feabfe158ad484ee7", "message": "FAI-250: [trusty-ui]: Move to kogito-tooling 0.6.1", "committedDate": "2020-09-01T18:09:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg3MTY3Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/429#discussion_r482871677", "bodyText": "I see you're setting up a context for i18n using the setup provided by kogito-tooling.\nI suppose the idea is to use it for the whole trusty app? I thought i18n could deserve a separate PR. Unless you cannot do without it with the editors.", "author": "kelvah", "createdAt": "2020-09-03T10:21:51Z", "path": "ui-packages/packages/trusty/src/components/Templates/TrustyApp/TrustyApp.tsx", "diffHunk": "@@ -17,13 +10,24 @@ import {\n   PageHeaderTools,\n   PageSidebar\n } from '@patternfly/react-core';\n-import AuditOverview from '../AuditOverview/AuditOverview';\n+import React, { useState } from 'react';\n+import {\n+  NavLink,\n+  Redirect,\n+  Route,\n+  Switch,\n+  useLocation\n+} from 'react-router-dom';\n import kogitoLogo from '../../../../static/images/kogitoLogo.svg';\n-import AuditDetail from '../AuditDetail/AuditDetail';\n import imgAvatar from '../../../../static/images/user.svg';\n+import { I18n } from \"../../../i18n/I18n\";\n import Breadcrumbs from '../../Organisms/Breadcrumbs/Breadcrumbs';\n+import AuditDetail from '../AuditDetail/AuditDetail';\n+import AuditOverview from '../AuditOverview/AuditOverview';\n import './TrustyApp.scss';\n \n+export const I18nContext = React.createContext<I18nContextType<I18n>>({} as any);", "originalCommit": "8d00a88e07bc94531a813df8e12b9607685f8ff9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg5Nzc0MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/429#discussion_r482897740", "bodyText": "I agree.. I was originally adding the basics to support i18n (using kogito-tooling) but it was turning into much more than I anticipated. I have now removed everything from this PR relating to i18n.", "author": "manstis", "createdAt": "2020-09-03T11:11:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg3MTY3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg3MjA1Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/429#discussion_r482872052", "bodyText": "Why are you adding chunks configuration?", "author": "kelvah", "createdAt": "2020-09-03T10:22:31Z", "path": "ui-packages/packages/trusty/webpack.common.js", "diffHunk": "@@ -15,7 +15,8 @@ module.exports = {\n   plugins: [\n     new HtmlWebpackPlugin({\n       template: path.resolve(__dirname, 'src', 'index.html'),\n-      favicon: 'src/favicon.ico'\n+      favicon: 'src/favicon.ico',\n+      chunks: ['app']", "originalCommit": "8d00a88e07bc94531a813df8e12b9607685f8ff9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg5OTAyNA==", "url": "https://github.com/kiegroup/kogito-apps/pull/429#discussion_r482899024", "bodyText": "Well...... when I add back a custom envelope.ts to include the PMML editor factory I need an additional entry in webpack.common.js to compile envelope/envelope.ts as a separate chunk to use soley from the IFRAME (and not in the main app chunk).. I was originally excluding envelope but thought it less error prone to specify what to include. However since I am now using the envelope.ts from a dependency and only have one chunk I can remove this...", "author": "manstis", "createdAt": "2020-09-03T11:14:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg3MjA1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg3Nzc3Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/429#discussion_r482877772", "bodyText": "I think it's a good idea if we use some kind of \"rules\" for sorting imports. Like app-wide requirements on top (react, routing etc), external components (patternfly or similar) and internal stuff (ui components, types etc.).\nWhat do you think? (I'm not saying I always ordered things properly but I try \ud83d\ude2c)\nI don't know if you changed the order manually of if it was your IDE.\nI think there are also ESLint rules that auto sort imports that we could use once we migrate to it.", "author": "kelvah", "createdAt": "2020-09-03T10:33:53Z", "path": "ui-packages/packages/trusty/src/components/Templates/TrustyApp/TrustyApp.tsx", "diffHunk": "@@ -1,11 +1,4 @@\n-import React, { useState } from 'react';\n-import {\n-  NavLink,\n-  Redirect,\n-  Route,\n-  Switch,\n-  useLocation\n-} from 'react-router-dom';\n+import { I18nContextType } from \"@kogito-tooling/i18n\";", "originalCommit": "8d00a88e07bc94531a813df8e12b9607685f8ff9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjkwMDYwNQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/429#discussion_r482900605", "bodyText": "I am formatting the imports according to the rules I have setup in my IDE.\nIIRC I acquired them from kogito-tooling.. but I would need to check where/how they are configured now..\nBut I agree with you re: standardising to avoid this type of white space commit.", "author": "manstis", "createdAt": "2020-09-03T11:17:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg3Nzc3Mg=="}], "type": "inlineReview"}, {"oid": "e86759e03b46721dcc642b2bb5784af3bd70dfcb", "url": "https://github.com/kiegroup/kogito-apps/commit/e86759e03b46721dcc642b2bb5784af3bd70dfcb", "message": "FAI-250: [trusty-ui]: Move to kogito-tooling 0.6.1", "committedDate": "2020-09-03T11:07:10Z", "type": "forcePushed"}, {"oid": "f94b21c8c5c79eedad5c487125448b37fa1a8dd8", "url": "https://github.com/kiegroup/kogito-apps/commit/f94b21c8c5c79eedad5c487125448b37fa1a8dd8", "message": "FAI-250: [trusty-ui]: Move to kogito-tooling 0.6.1", "committedDate": "2020-09-03T11:09:44Z", "type": "commit"}, {"oid": "f94b21c8c5c79eedad5c487125448b37fa1a8dd8", "url": "https://github.com/kiegroup/kogito-apps/commit/f94b21c8c5c79eedad5c487125448b37fa1a8dd8", "message": "FAI-250: [trusty-ui]: Move to kogito-tooling 0.6.1", "committedDate": "2020-09-03T11:09:44Z", "type": "forcePushed"}, {"oid": "58b4cf1cd9ef1e0e195984ba671a82d2affae4b5", "url": "https://github.com/kiegroup/kogito-apps/commit/58b4cf1cd9ef1e0e195984ba671a82d2affae4b5", "message": "Remove chunk usage", "committedDate": "2020-09-03T11:17:20Z", "type": "commit"}, {"oid": "51036fe2a1152ec8f4a4ca2c594229ecea3d2b15", "url": "https://github.com/kiegroup/kogito-apps/commit/51036fe2a1152ec8f4a4ca2c594229ecea3d2b15", "message": "Fix formatting", "committedDate": "2020-09-03T15:02:41Z", "type": "commit"}, {"oid": "3c7cf7bc8cb6ca0f89e7f909eca4e5464ee9075d", "url": "https://github.com/kiegroup/kogito-apps/commit/3c7cf7bc8cb6ca0f89e7f909eca4e5464ee9075d", "message": "Move to non-SNAPSHOT editor version.", "committedDate": "2020-09-04T12:26:18Z", "type": "commit"}]}