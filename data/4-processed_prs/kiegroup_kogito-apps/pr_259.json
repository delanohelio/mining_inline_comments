{"pr_number": 259, "pr_title": "KOGITO-2416 - Review KogitoEmptyState component for improved reusability", "pr_createdAt": "2020-06-09T03:31:19Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/259", "timeline": [{"oid": "c58e643c42213e47be19a41b76e7e884bbf7dfba", "url": "https://github.com/kiegroup/kogito-apps/commit/c58e643c42213e47be19a41b76e7e884bbf7dfba", "message": "Review KogitoEmptyState component for improved reusability", "committedDate": "2020-06-09T03:46:24Z", "type": "forcePushed"}, {"oid": "36e7060c96d8636b6b4983c65d3ecdabcbc0bcdd", "url": "https://github.com/kiegroup/kogito-apps/commit/36e7060c96d8636b6b4983c65d3ecdabcbc0bcdd", "message": "Review KogitoEmptyState component for improved reusability", "committedDate": "2020-06-10T15:18:14Z", "type": "forcePushed"}, {"oid": "61d497851141eeb444b03785b83e4086b17c6606", "url": "https://github.com/kiegroup/kogito-apps/commit/61d497851141eeb444b03785b83e4086b17c6606", "message": "KOGITO-2416 - Review KogitoEmptyState component for improved reusability", "committedDate": "2020-06-10T15:21:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyOTM2Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/259#discussion_r438329362", "bodyText": "the differentiation based on types is not visible in these shallow snapshots. Is it possible to use mount instead? Maybe we can even mock the EmptyStateIcon, but using mount we should see the actual icon passed to the component.", "author": "jstastny-cz", "createdAt": "2020-06-10T18:32:27Z", "path": "packages/common/src/components/Atoms/KogitoEmptyState/tests/__snapshots__/KogitoEmptyState.test.tsx.snap", "diffHunk": "@@ -1,6 +1,29 @@\n // Jest Snapshot v1, https://goo.gl/fbAQLP\n \n-exports[`Emptystate component tests snapshot testing 1`] = `\n+exports[`KogitoEmptyState component tests Info test 1`] = `\n+<Bullseye>\n+  <EmptyState\n+    variant=\"full\"\n+  >\n+    <EmptyStateIcon\n+      color=\"var(--pf-global--info-color--100)\"\n+      icon={[Function]}", "originalCommit": "61d497851141eeb444b03785b83e4086b17c6606", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU0Mjk3NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/259#discussion_r438542975", "bodyText": "yeah, makes sense. So now I changed to mount but I couldn't figure how to mock only the EmptyStateIcon. I could only mock the entire react-core module. @AjayJagan any tips on how to do that?\nThis fails with finding the module.\njest.mock('@patternfly/react-core/EmptyState/EmptyStateIcon');\nAnd this ends up mocking all components, then it stops at the Bullseye component which is not what we want.\njest.mock('@patternfly/react-core')", "author": "cristianonicolai", "createdAt": "2020-06-11T04:58:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyOTM2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU4NTUyMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/259#discussion_r438585522", "bodyText": "You can do this to mock just a single component from whole package:\nconst MockedComponent = (): React.ReactElement => {\n  return <></>;\n};\n\njest.mock('@patternfly/react-core', () => ({\n  ...jest.requireActual('@patternfly/react-core'),\n  EmptyStateIcon: () => {\n    return <MockedComponent />;\n  }\n}));", "author": "jstastny-cz", "createdAt": "2020-06-11T07:09:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyOTM2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODYzOTU5OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/259#discussion_r438639599", "bodyText": "mock works but then I get the following in the snapshot:\n<EmptyStateIcon\n            color=\"var(--pf-global--warning-color--100)\"\n            icon={[Function]}\n            size=\"sm\"\n          >\n        <EmptyStateIconMock />\n</EmptyStateIcon>", "author": "cristianonicolai", "createdAt": "2020-06-11T08:53:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyOTM2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc1MjkyNw==", "url": "https://github.com/kiegroup/kogito-apps/pull/259#discussion_r438752927", "bodyText": "ah, sorry, I didn't realize, so we can either keep it full or just mock the icons passed to EmptyStateIcon. That would mean mocking ''@patternfly/react-icons'' instead:\nconst MockedComponent = (): React.ReactElement => {\n  return <></>;\n};\n\njest.mock('@patternfly/react-icons', () => ({\n  ...jest.requireActual('@patternfly/react-icons'),\n  InfoCircleIcon: () => {\n    return <MockedComponent />;\n  },\n  ExclamationTriangleIcon: () => { return <MockedComponent /> },\n.\n.\n.\n}));", "author": "jstastny-cz", "createdAt": "2020-06-11T12:42:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyOTM2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc1NDAyMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/259#discussion_r438754021", "bodyText": "We'd still save ~80 lines out of 380 in the snapshots. And reducing the noise.", "author": "jstastny-cz", "createdAt": "2020-06-11T12:44:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyOTM2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTkwNjcwNA==", "url": "https://github.com/kiegroup/kogito-apps/pull/259#discussion_r439906704", "bodyText": "@jstastny-cz thanks that helped. Have a look now", "author": "cristianonicolai", "createdAt": "2020-06-15T02:54:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODMyOTM2Mg=="}], "type": "inlineReview"}, {"oid": "23d72dcac62e9804cd28dc8b26a3178334361f96", "url": "https://github.com/kiegroup/kogito-apps/commit/23d72dcac62e9804cd28dc8b26a3178334361f96", "message": "KOGITO-2416 - Review KogitoEmptyState component for improved reusability", "committedDate": "2020-06-11T04:53:43Z", "type": "forcePushed"}, {"oid": "e4a3b35362153e4bfd23060bfff79bb7f8c3928c", "url": "https://github.com/kiegroup/kogito-apps/commit/e4a3b35362153e4bfd23060bfff79bb7f8c3928c", "message": "KOGITO-2416 - Review KogitoEmptyState component for improved reusability", "committedDate": "2020-06-15T02:51:16Z", "type": "commit"}, {"oid": "e4a3b35362153e4bfd23060bfff79bb7f8c3928c", "url": "https://github.com/kiegroup/kogito-apps/commit/e4a3b35362153e4bfd23060bfff79bb7f8c3928c", "message": "KOGITO-2416 - Review KogitoEmptyState component for improved reusability", "committedDate": "2020-06-15T02:51:16Z", "type": "forcePushed"}]}