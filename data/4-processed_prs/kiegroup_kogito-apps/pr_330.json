{"pr_number": 330, "pr_title": "KOGITO-2775 Add trustyAI audit overview section", "pr_createdAt": "2020-07-20T09:58:02Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/330", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3NTY1MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457975650", "bodyText": "indent level is 2 spaces in the rest of js files, please keep it that way also here.", "author": "jstastny-cz", "createdAt": "2020-07-21T09:51:34Z", "path": "ui-packages/packages/trusty/api-mock/mocks/inputData.js", "diffHunk": "@@ -0,0 +1,282 @@\n+const inputData = [", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3MzkzOA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458673938", "bodyText": "Done. I forgot to run Prettier on the api-mock folder.", "author": "kelvah", "createdAt": "2020-07-22T09:51:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3NTY1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3NjU0OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457976548", "bodyText": "how many of these will be there? would it be worth introducing a 'reader' method forgetting the DMN contents from separate files and keeping those separately?", "author": "jstastny-cz", "createdAt": "2020-07-21T09:53:14Z", "path": "ui-packages/packages/trusty/api-mock/mocks/modelData.js", "diffHunk": "@@ -0,0 +1,303 @@\n+const executionIdBase = require(\"./executionIdBase\");\n+const DMN_1 = `", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA2MTcyMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458061722", "bodyText": "There will be no more. They are mocked data for when the UI is ran against a mock backend, api-mock.\nThe real service will exist in trusty-service and is part of https://issues.redhat.com/browse/FAI-215.\nI don't think there's much value added in improving the mock endpoint here.", "author": "manstis", "createdAt": "2020-07-21T12:36:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3NjU0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NDM0OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458674348", "bodyText": "I agree with @manstis", "author": "kelvah", "createdAt": "2020-07-22T09:52:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3NjU0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3ODAwMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457978002", "bodyText": "please adapt to #329", "author": "jstastny-cz", "createdAt": "2020-07-21T09:55:34Z", "path": "ui-packages/packages/trusty/package.json", "diffHunk": "@@ -4,20 +4,28 @@\n   \"main\": \"index.js\",\n   \"author\": \"\",\n   \"license\": \"Apache-2.0\",\n-\n   \"repository\": {\n     \"type\": \"git\",\n     \"url\": \"https://github.com/kiegroup/kogito-apps.git\"\n   },\n   \"dependencies\": {\n     \"@kogito-apps/common\": \"1.0.0\",\n-    \"@types/react\": \"16.9.0\",\n-    \"node-sass\": \"4.14.1\"\n+    \"@testing-library/react\": \"^10.4.7\",\n+    \"@testing-library/react-hooks\": \"^3.3.0\",\n+    \"date-fns\": \"^2.14.0\",\n+    \"flatpickr\": \"^4.6.3\",\n+    \"sass\": \"^1.26.10\",\n+    \"sass-loader\": \"^9.0.2\"\n   },\n   \"scripts\": {\n+    \"build:prod\": \"yarn run lint && webpack --config webpack.prod.js && yarn run test:coverage\",", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NDE2MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458674160", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-22T09:51:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3ODAwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3ODg1NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457978855", "bodyText": "what's the plan for UI e2e testing? to keep things in sync I'd argue for cypress - integration can be added in a separate PR.", "author": "jstastny-cz", "createdAt": "2020-07-21T09:56:59Z", "path": "ui-packages/packages/trusty/package.json", "diffHunk": "@@ -4,20 +4,28 @@\n   \"main\": \"index.js\",\n   \"author\": \"\",\n   \"license\": \"Apache-2.0\",\n-\n   \"repository\": {\n     \"type\": \"git\",\n     \"url\": \"https://github.com/kiegroup/kogito-apps.git\"\n   },\n   \"dependencies\": {\n     \"@kogito-apps/common\": \"1.0.0\",\n-    \"@types/react\": \"16.9.0\",\n-    \"node-sass\": \"4.14.1\"\n+    \"@testing-library/react\": \"^10.4.7\",\n+    \"@testing-library/react-hooks\": \"^3.3.0\",\n+    \"date-fns\": \"^2.14.0\",\n+    \"flatpickr\": \"^4.6.3\",\n+    \"sass\": \"^1.26.10\",\n+    \"sass-loader\": \"^9.0.2\"\n   },\n   \"scripts\": {\n+    \"build:prod\": \"yarn run lint && webpack --config webpack.prod.js && yarn run test:coverage\",\n+    \"lint\": \"tslint -c ./tslint.json --project . './src/**/*.ts{,x}'\",\n+    \"mock-server\": \"json-server --watch api-mock/db.js --routes api-mock/routes.json --port 1336 --delay 1000 --id executionId --middlewares api-mock/filterSingular.js\",\n     \"start\": \"webpack-dev-server --hot --color --progress --info=true --config webpack.dev.js\",\n-    \"build:prod\": \"yarn run lint && webpack --config webpack.prod.js\",\n-    \"lint\": \"tslint -c ./tslint.json --project . './src/**/*.ts{,x}'\"\n+    \"test\": \"jest --runInBand --ci --reporters=default --reporters=jest-junit\",\n+    \"test:coverage\": \"yarn run test --coverage\",\n+    \"test:report\": \"yarn run test --ci --reporters=jest-junit\",\n+    \"test:watch\": \"yarn run test --watch\"", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NDk1NA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458674954", "bodyText": "I am not sure there are already plans. I suppose it will be cypress too. I agree to add it with a separate PR.", "author": "kelvah", "createdAt": "2020-07-22T09:53:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3ODg1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk3OTc4Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457979783", "bodyText": "Please reach to me whenever you have time regarding the UI testing and writing testable components.", "author": "jstastny-cz", "createdAt": "2020-07-21T09:58:34Z", "path": "ui-packages/packages/trusty/src/components/Atoms/ExecutionStatus/ExecutionStatus.tsx", "diffHunk": "@@ -0,0 +1,30 @@\n+import { CheckCircleIcon, ErrorCircleOIcon } from '@patternfly/react-icons';\n+import React from 'react';\n+import './ExecutionStatus.scss';\n+\n+type ExecutionStatusProps = {\n+  result: boolean;\n+};\n+\n+const ExecutionStatus = (props: ExecutionStatusProps) => {", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4Mjc3Ng==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457982776", "bodyText": "this is new to me, I've usually seen\nconst FormattedDate: React.FC<FormattedDateProps> = ({date, preposition, position, fullDateAndTime}) => {\n\n}\n\nwhich I find more organized, is there some advantage of the approach here?", "author": "jstastny-cz", "createdAt": "2020-07-21T10:03:48Z", "path": "ui-packages/packages/trusty/src/components/Atoms/FormattedDate/FormattedDate.tsx", "diffHunk": "@@ -0,0 +1,48 @@\n+import React from 'react';\n+import { differenceInDays, format, formatDistanceToNowStrict } from 'date-fns';\n+import { Tooltip } from '@patternfly/react-core';\n+import { TooltipProps } from '@patternfly/react-core/dist/js/components/Tooltip/Tooltip';\n+\n+type FormattedDateProps = {\n+  date: string;\n+  preposition?: boolean;\n+  position?: TooltipProps['position'];\n+  fullDateAndTime?: boolean;\n+};\n+\n+const FormattedDate = (props: FormattedDateProps) => {", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwNTAxMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458705011", "bodyText": "I think there are no obvious advantages from using React.FC. It does type checking for propTypes and defaultProps, which we hardly use with typescript. It has an implicit definition for children (with an issue), but it's probably clearer to explicitly declare children anyway when a component relies on it.\nThere's no much difference in the end when using or not using React.FC.\nRegarding destructuring props inside the signature, it's just a personal preference. I find it more readable to have it inside the body.", "author": "kelvah", "createdAt": "2020-07-22T10:50:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4Mjc3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4NTI2Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457985267", "bodyText": "please try to refrain from having multiple return statements.", "author": "jstastny-cz", "createdAt": "2020-07-21T10:08:32Z", "path": "ui-packages/packages/trusty/src/components/Atoms/FormattedDate/FormattedDate.tsx", "diffHunk": "@@ -0,0 +1,48 @@\n+import React from 'react';\n+import { differenceInDays, format, formatDistanceToNowStrict } from 'date-fns';\n+import { Tooltip } from '@patternfly/react-core';\n+import { TooltipProps } from '@patternfly/react-core/dist/js/components/Tooltip/Tooltip';\n+\n+type FormattedDateProps = {\n+  date: string;\n+  preposition?: boolean;\n+  position?: TooltipProps['position'];\n+  fullDateAndTime?: boolean;\n+};\n+\n+const FormattedDate = (props: FormattedDateProps) => {\n+  const {\n+    date,\n+    preposition = false,\n+    position = 'auto',\n+    fullDateAndTime = false\n+  } = props;\n+  const difference = differenceInDays(new Date(date), new Date());\n+  const fullFormattedDate = format(new Date(date), 'PPpp');\n+  let formattedDate;\n+\n+  if (fullDateAndTime) {\n+    return <span>{fullFormattedDate}</span>;", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NjI1OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458676259", "bodyText": "Fixed to use a single return.", "author": "kelvah", "createdAt": "2020-07-22T09:55:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4NTI2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4NTcyMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457985722", "bodyText": "no snapshot for the component?", "author": "jstastny-cz", "createdAt": "2020-07-21T10:09:21Z", "path": "ui-packages/packages/trusty/src/components/Atoms/FormattedDate/tests/FormattedDate.test.tsx", "diffHunk": "@@ -0,0 +1,41 @@\n+import React from 'react';\n+import { shallow } from 'enzyme';\n+import FormattedDate from '../FormattedDate';\n+import { format } from 'date-fns';\n+\n+describe('FormattedDate', () => {", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NjQyMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458676421", "bodyText": "Snapshots added.", "author": "kelvah", "createdAt": "2020-07-22T09:55:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4NTcyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4NjgwMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457986801", "bodyText": "I'd argue for keeping the top part of the component definition for props and component definition, can you move this either below or elsewhere?", "author": "jstastny-cz", "createdAt": "2020-07-21T10:11:20Z", "path": "ui-packages/packages/trusty/src/components/Molecules/DatePicker/DatePicker.tsx", "diffHunk": "@@ -0,0 +1,71 @@\n+import React, { useEffect, useRef } from 'react';\n+import { InputGroup, TextInput } from '@patternfly/react-core';\n+import flatpickr from 'flatpickr';\n+import { Instance as flatpickrInstance } from 'flatpickr/dist/types/instance';\n+import './DatePicker.scss';\n+\n+flatpickr.l10ns.en.weekdays.shorthand.forEach((day, index, daysArray) => {", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NjY1MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458676651", "bodyText": "I agree. Moved them to the bottom.", "author": "kelvah", "createdAt": "2020-07-22T09:56:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk4NjgwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MDQ3MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457990470", "bodyText": "can't this be rather a component? otherwise I would expect for the file not to be placed under components (at least not having a separate skeletonRows folder there)", "author": "jstastny-cz", "createdAt": "2020-07-21T10:17:53Z", "path": "ui-packages/packages/trusty/src/components/Molecules/skeletonRows/skeletonRows.tsx", "diffHunk": "@@ -0,0 +1,35 @@\n+import React from 'react';\n+import { IRow } from '@patternfly/react-table';\n+import SkeletonStripe from './../../Atoms/SkeletonStripe/SkeletonStripe';\n+\n+/*\n+ * Based on a number of rows and columns, this function creates an array specifically intended\n+ * for the Patternfly Table component. Feeding the skeletons array to the table rows prop,\n+ * it will produce animated stripes to be displayed while loading real data\n+ * */\n+\n+const skeletonRows = (", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NzUxNg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458677516", "bodyText": "I was unsure about where to place it. Unfortunately it cannot be a component, given how PatternFly Table handles rows content. I moved it to the utils folder.", "author": "kelvah", "createdAt": "2020-07-22T09:57:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MDQ3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MTE0NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457991145", "bodyText": "previously the props were type, now interface, is there anything preventing us from unifying?", "author": "jstastny-cz", "createdAt": "2020-07-21T10:19:06Z", "path": "ui-packages/packages/trusty/src/components/Organisms/AuditToolbar/AuditToolbar.tsx", "diffHunk": "@@ -0,0 +1,152 @@\n+import React, { useRef } from 'react';\n+import {\n+  Button,\n+  ButtonVariant,\n+  DataToolbar,\n+  DataToolbarContent,\n+  DataToolbarItem,\n+  DataToolbarItemVariant,\n+  InputGroup,\n+  TextInput\n+} from '@patternfly/react-core';\n+import { SearchIcon, SyncIcon } from '@patternfly/react-icons';\n+import PaginationContainer from '../PaginationContainer/PaginationContainer';\n+import DatePicker from '../../Molecules/DatePicker/DatePicker';\n+\n+interface AuditToolbarBaseProps {\n+  page: number;\n+  pageSize: number;\n+  setPage: (page: number) => void;\n+  setPageSize: (pageSize: number) => void;\n+  total: number;\n+}\n+\n+interface AuditToolbarCompleteProps extends AuditToolbarBaseProps {", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3Nzg0NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458677845", "bodyText": "Switched to types for consistency.", "author": "kelvah", "createdAt": "2020-07-22T09:57:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MTE0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MzEwNw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457993107", "bodyText": "you could instead use\nconst wrapper = mount(<AuditToolbarTop {...{...defaultProps, onRefresh}}/>);\n\nand get rid of the renderAuditToolbarTop", "author": "jstastny-cz", "createdAt": "2020-07-21T10:22:40Z", "path": "ui-packages/packages/trusty/src/components/Organisms/AuditToolbar/tests/AuditToolbarTop.test.tsx", "diffHunk": "@@ -0,0 +1,103 @@\n+import React from 'react';\n+import { AuditToolbarTop } from '../AuditToolbar';\n+import { mount, shallow } from 'enzyme';\n+\n+describe('Audit top toolbar', () => {\n+  test('renders correctly', () => {\n+    const wrapper = renderAuditToolbarTop('shallow');\n+    expect(wrapper).toMatchSnapshot();\n+  });\n+\n+  test('allows search by ID', () => {\n+    const setSearchString = jest.fn();\n+    const searchString = '12345';\n+    const wrapper = renderAuditToolbarTop('mount', { setSearchString });\n+    const searchInput = wrapper.find('input#audit-search-input');\n+    const searchButton = wrapper.find('button#audit-search');\n+    const inputNode = searchInput.getDOMNode<HTMLInputElement>();\n+\n+    inputNode.value = searchString;\n+    searchButton.simulate('click');\n+\n+    expect(setSearchString).toBeCalledTimes(1);\n+    expect(setSearchString).toBeCalledWith(searchString);\n+\n+    // @ts-ignore\n+    searchInput.props().onKeyDown({ key: 'Enter', keyCode: 13, which: 13 });\n+\n+    expect(setSearchString).toBeCalledTimes(2);\n+    expect(setSearchString).toBeCalledWith(searchString);\n+  });\n+\n+  test('handles from date filter', () => {\n+    const setFromDate = jest.fn();\n+    const fromDate = '2020-02-01';\n+    const wrapper = renderAuditToolbarTop('mount', { setFromDate });\n+\n+    wrapper.props().setFromDate(fromDate);\n+\n+    expect(setFromDate).toBeCalledTimes(1);\n+    expect(setFromDate).toBeCalledWith(fromDate);\n+  });\n+\n+  test('handles to date filter', () => {\n+    const setToDate = jest.fn();\n+    const toDate = '2020-04-01';\n+    const wrapper = renderAuditToolbarTop('mount', { setToDate });\n+\n+    wrapper.props().setToDate(toDate);\n+\n+    expect(setToDate).toBeCalledTimes(1);\n+    expect(setToDate).toBeCalledWith(toDate);\n+  });\n+\n+  test('handles pagination', () => {\n+    const setPage = jest.fn();\n+    const setPageSize = jest.fn();\n+    const page = 2;\n+    const pageSize = 50;\n+    const wrapper = renderAuditToolbarTop('mount', {\n+      setPage,\n+      setPageSize\n+    });\n+\n+    wrapper.props().setPage(page);\n+    wrapper.props().setPageSize(pageSize);\n+\n+    expect(setPage).toBeCalledTimes(1);\n+    expect(setPage).toBeCalledWith(page);\n+    expect(setPageSize).toBeCalledTimes(1);\n+    expect(setPageSize).toBeCalledWith(pageSize);\n+  });\n+\n+  test('handles data refresh', () => {\n+    const onRefresh = jest.fn();\n+    const wrapper = renderAuditToolbarTop('mount', { onRefresh });\n+\n+    wrapper.find('button#executions-refresh').simulate('click');\n+\n+    expect(onRefresh).toBeCalledTimes(1);\n+  });\n+});\n+\n+const renderAuditToolbarTop = (method: 'shallow' | 'mount', props?: object) => {", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY4MDc5Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458680793", "bodyText": "Done. I am used to avoid using nested spread because it could get difficult to read. This example is simple enough I think.", "author": "kelvah", "createdAt": "2020-07-22T10:03:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5MzEwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5NDA0OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457994048", "bodyText": "move component definition to the top of the file", "author": "jstastny-cz", "createdAt": "2020-07-21T10:24:19Z", "path": "ui-packages/packages/trusty/src/components/Organisms/ExecutionTable/ExecutionTable.tsx", "diffHunk": "@@ -0,0 +1,158 @@\n+import React from 'react';\n+import { Link } from 'react-router-dom';\n+import { IRow, Table, TableBody, TableHeader } from '@patternfly/react-table';\n+import {\n+  Bullseye,\n+  EmptyState,\n+  EmptyStateBody,\n+  EmptyStateIcon,\n+  Title\n+} from '@patternfly/react-core';\n+import { SearchIcon, ExclamationCircleIcon } from '@patternfly/react-icons';\n+import ExecutionStatus from '../../Atoms/ExecutionStatus/ExecutionStatus';\n+import FormattedDate from '../../Atoms/FormattedDate/FormattedDate';\n+import skeletonRows from '../../Molecules/skeletonRows/skeletonRows';\n+import { IExecution, IExecutions, RemoteData } from '../../../types';\n+\n+type ExecutionTableProps = {\n+  data: RemoteData<Error, IExecutions>;\n+};\n+\n+const prepareExecutionTableRows = (rowData: IExecution[]) => {\n+  const rows: IRow[] = [];\n+\n+  rowData.forEach(item => {\n+    const row: IRow = {};\n+    const cells = [];\n+    cells.push({\n+      title: (\n+        <Link\n+          to={`/audit/${item.executionType.toLocaleLowerCase()}/${\n+            item.executionId\n+          }`}\n+        >\n+          {'#' + item.executionId.toUpperCase()}\n+        </Link>\n+      )\n+    });\n+    cells.push(item.executedModelName);\n+    cells.push(item.executorName);\n+    cells.push({\n+      title: <FormattedDate date={item.executionDate} />\n+    });\n+    cells.push({\n+      title: <ExecutionStatus result={item.executionSucceeded} />\n+    });\n+    row.cells = cells;\n+    row.decisionKey = 'key-' + item.executionId;\n+    rows.push(row);\n+  });\n+  return rows;\n+};\n+\n+const noExecutions = (colSpan: number) => {\n+  return [\n+    {\n+      heightAuto: true,\n+      decisionKey: 'no-results',\n+      cells: [\n+        {\n+          props: { colSpan },\n+          title: (\n+            <Bullseye>\n+              <EmptyState>\n+                <EmptyStateIcon icon={SearchIcon} />\n+                <Title headingLevel=\"h5\" size=\"lg\">\n+                  No executions found\n+                </Title>\n+                <EmptyStateBody>\n+                  No results match the filter criteria. Try removing all\n+                  filters.\n+                </EmptyStateBody>\n+              </EmptyState>\n+            </Bullseye>\n+          )\n+        }\n+      ]\n+    }\n+  ];\n+};\n+\n+const loadingError = (colSpan: number) => {\n+  return [\n+    {\n+      heightAuto: true,\n+      decisionKey: 'no-results',\n+      cells: [\n+        {\n+          props: { colSpan },\n+          title: (\n+            <Bullseye>\n+              <EmptyState>\n+                <EmptyStateIcon icon={ExclamationCircleIcon} color=\"#C9190B\" />\n+                <Title headingLevel=\"h5\" size=\"lg\">\n+                  Loading Error\n+                </Title>\n+                <EmptyStateBody>\n+                  We are unable to load data right now. Try again later.\n+                </EmptyStateBody>\n+              </EmptyState>\n+            </Bullseye>\n+          )\n+        }\n+      ]\n+    }\n+  ];\n+};\n+\n+const ExecutionTable = (props: ExecutionTableProps) => {", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY4MDk4NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458680985", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-22T10:03:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5NDA0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5NTM0MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457995340", "bodyText": "I'd argue to have just a single JSX Table element here and just prepare the columns and rows variables that would be passed there.", "author": "jstastny-cz", "createdAt": "2020-07-21T10:26:33Z", "path": "ui-packages/packages/trusty/src/components/Organisms/ExecutionTable/ExecutionTable.tsx", "diffHunk": "@@ -0,0 +1,158 @@\n+import React from 'react';\n+import { Link } from 'react-router-dom';\n+import { IRow, Table, TableBody, TableHeader } from '@patternfly/react-table';\n+import {\n+  Bullseye,\n+  EmptyState,\n+  EmptyStateBody,\n+  EmptyStateIcon,\n+  Title\n+} from '@patternfly/react-core';\n+import { SearchIcon, ExclamationCircleIcon } from '@patternfly/react-icons';\n+import ExecutionStatus from '../../Atoms/ExecutionStatus/ExecutionStatus';\n+import FormattedDate from '../../Atoms/FormattedDate/FormattedDate';\n+import skeletonRows from '../../Molecules/skeletonRows/skeletonRows';\n+import { IExecution, IExecutions, RemoteData } from '../../../types';\n+\n+type ExecutionTableProps = {\n+  data: RemoteData<Error, IExecutions>;\n+};\n+\n+const prepareExecutionTableRows = (rowData: IExecution[]) => {\n+  const rows: IRow[] = [];\n+\n+  rowData.forEach(item => {\n+    const row: IRow = {};\n+    const cells = [];\n+    cells.push({\n+      title: (\n+        <Link\n+          to={`/audit/${item.executionType.toLocaleLowerCase()}/${\n+            item.executionId\n+          }`}\n+        >\n+          {'#' + item.executionId.toUpperCase()}\n+        </Link>\n+      )\n+    });\n+    cells.push(item.executedModelName);\n+    cells.push(item.executorName);\n+    cells.push({\n+      title: <FormattedDate date={item.executionDate} />\n+    });\n+    cells.push({\n+      title: <ExecutionStatus result={item.executionSucceeded} />\n+    });\n+    row.cells = cells;\n+    row.decisionKey = 'key-' + item.executionId;\n+    rows.push(row);\n+  });\n+  return rows;\n+};\n+\n+const noExecutions = (colSpan: number) => {\n+  return [\n+    {\n+      heightAuto: true,\n+      decisionKey: 'no-results',\n+      cells: [\n+        {\n+          props: { colSpan },\n+          title: (\n+            <Bullseye>\n+              <EmptyState>\n+                <EmptyStateIcon icon={SearchIcon} />\n+                <Title headingLevel=\"h5\" size=\"lg\">\n+                  No executions found\n+                </Title>\n+                <EmptyStateBody>\n+                  No results match the filter criteria. Try removing all\n+                  filters.\n+                </EmptyStateBody>\n+              </EmptyState>\n+            </Bullseye>\n+          )\n+        }\n+      ]\n+    }\n+  ];\n+};\n+\n+const loadingError = (colSpan: number) => {\n+  return [\n+    {\n+      heightAuto: true,\n+      decisionKey: 'no-results',\n+      cells: [\n+        {\n+          props: { colSpan },\n+          title: (\n+            <Bullseye>\n+              <EmptyState>\n+                <EmptyStateIcon icon={ExclamationCircleIcon} color=\"#C9190B\" />\n+                <Title headingLevel=\"h5\" size=\"lg\">\n+                  Loading Error\n+                </Title>\n+                <EmptyStateBody>\n+                  We are unable to load data right now. Try again later.\n+                </EmptyStateBody>\n+              </EmptyState>\n+            </Bullseye>\n+          )\n+        }\n+      ]\n+    }\n+  ];\n+};\n+\n+const ExecutionTable = (props: ExecutionTableProps) => {\n+  const { data } = props;\n+  const columns = ['ID', 'Description', 'Executor', 'Date', 'Execution Status'];\n+\n+  return (\n+    <>\n+      {(data.status === 'LOADING' || data.status === 'NOT_ASKED') && (", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NTA5Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458675092", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-22T09:53:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5NTM0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5NjA1MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457996051", "bodyText": "can we set the type to the const data declaration already?", "author": "jstastny-cz", "createdAt": "2020-07-21T10:27:50Z", "path": "ui-packages/packages/trusty/src/components/Organisms/ExecutionTable/tests/ExecutionTable.test.tsx", "diffHunk": "@@ -0,0 +1,76 @@\n+import React from 'react';\n+import ExecutionTable from '../ExecutionTable';\n+import { shallow } from 'enzyme';\n+import { IExecutions, RemoteData } from '../../../../types';\n+\n+describe('Execution table', () => {\n+  test('renders loading skeletons when the data is not yet fetching', () => {\n+    const data = { status: 'NOT_ASKED' } as RemoteData<Error, IExecutions>;\n+    const wrapper = shallow(<ExecutionTable data={data} />);\n+    expect(wrapper).toMatchSnapshot();\n+  });\n+\n+  test('renders loading skeletons when the data is loading', () => {\n+    const data = { status: 'LOADING' } as RemoteData<Error, IExecutions>;\n+    const wrapper = shallow(<ExecutionTable data={data} />);\n+    expect(wrapper).toMatchSnapshot();\n+  });\n+\n+  test('renders a loading error message when data loading fails', () => {\n+    const data = {\n+      status: 'FAILURE',\n+      error: { name: '', message: '' }\n+    } as RemoteData<Error, IExecutions>;\n+    const wrapper = shallow(<ExecutionTable data={data} />);\n+    expect(wrapper).toMatchSnapshot();\n+  });\n+\n+  test('renders a list of executions', () => {\n+    const data = {\n+      status: 'SUCCESS',\n+      data: {\n+        total: 2,\n+        limit: 10,\n+        offset: 0,\n+        headers: [\n+          {\n+            executionId: 'b2b0ed8d-c1e2-46b5-ad4f-3ac54ff4beae',\n+            executionDate: '2020-06-01T12:33:57+0000',\n+            executionSucceeded: true,\n+            executorName: 'testUser',\n+            executedModelName: 'LoanEligibility',\n+            executionType: 'DECISION'\n+          },\n+          {\n+            executionId: 'b2b0ed8d-c1e2-46b5-ad4f-3hd83kidi4u74',\n+            executionDate: '2020-06-01T12:33:57+0000',\n+            executionSucceeded: true,\n+            executorName: 'testUser',\n+            executedModelName: 'LoanEligibility',\n+            executionType: 'DECISION'\n+          }\n+        ]\n+      }\n+    };\n+    const wrapper = shallow(\n+      <ExecutionTable data={data as RemoteData<Error, IExecutions>} />", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NTI1MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458675251", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-22T09:53:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5NjA1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5NzA5Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457997097", "bodyText": "it actually does not render the skeletons, so mount might be needed instead of shallow.", "author": "jstastny-cz", "createdAt": "2020-07-21T10:29:52Z", "path": "ui-packages/packages/trusty/src/components/Organisms/ExecutionTable/tests/__snapshots__/ExecutionTable.test.tsx.snap", "diffHunk": "@@ -0,0 +1,834 @@\n+// Jest Snapshot v1, https://goo.gl/fbAQLP\n+\n+exports[`Execution table renders a list of executions 1`] = `\n+<Fragment>\n+  <Component\n+    aria-label=\"Executions list\"\n+    cells={\n+      Array [\n+        \"ID\",\n+        \"Description\",\n+        \"Executor\",\n+        \"Date\",\n+        \"Execution Status\",\n+      ]\n+    }\n+    rows={\n+      Array [\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <Link\n+                to=\"/audit/decision/b2b0ed8d-c1e2-46b5-ad4f-3ac54ff4beae\"\n+              >\n+                #B2B0ED8D-C1E2-46B5-AD4F-3AC54FF4BEAE\n+              </Link>,\n+            },\n+            \"LoanEligibility\",\n+            \"testUser\",\n+            Object {\n+              \"title\": <FormattedDate\n+                date=\"2020-06-01T12:33:57+0000\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <ExecutionStatus\n+                result={true}\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"key-b2b0ed8d-c1e2-46b5-ad4f-3ac54ff4beae\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <Link\n+                to=\"/audit/decision/b2b0ed8d-c1e2-46b5-ad4f-3hd83kidi4u74\"\n+              >\n+                #B2B0ED8D-C1E2-46B5-AD4F-3HD83KIDI4U74\n+              </Link>,\n+            },\n+            \"LoanEligibility\",\n+            \"testUser\",\n+            Object {\n+              \"title\": <FormattedDate\n+                date=\"2020-06-01T12:33:57+0000\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <ExecutionStatus\n+                result={true}\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"key-b2b0ed8d-c1e2-46b5-ad4f-3hd83kidi4u74\",\n+        },\n+      ]\n+    }\n+  >\n+    <TableHeader />\n+    <TableBody\n+      rowKey=\"decisionKey\"\n+    />\n+  </Component>\n+</Fragment>\n+`;\n+\n+exports[`Execution table renders a loading error message when data loading fails 1`] = `\n+<Fragment>\n+  <Component\n+    aria-label=\"Executions list\"\n+    cells={\n+      Array [\n+        \"ID\",\n+        \"Description\",\n+        \"Executor\",\n+        \"Date\",\n+        \"Execution Status\",\n+      ]\n+    }\n+    rows={\n+      Array [\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"props\": Object {\n+                \"colSpan\": 5,\n+              },\n+              \"title\": <Bullseye>\n+                <EmptyState>\n+                  <EmptyStateIcon\n+                    color=\"#C9190B\"\n+                    icon={[Function]}\n+                  />\n+                  <Title\n+                    headingLevel=\"h5\"\n+                    size=\"lg\"\n+                  >\n+                    Loading Error\n+                  </Title>\n+                  <EmptyStateBody>\n+                    We are unable to load data right now. Try again later.\n+                  </EmptyStateBody>\n+                </EmptyState>\n+              </Bullseye>,\n+            },\n+          ],\n+          \"decisionKey\": \"no-results\",\n+          \"heightAuto\": true,\n+        },\n+      ]\n+    }\n+  >\n+    <TableHeader />\n+    <TableBody\n+      rowKey=\"decisionKey\"\n+    />\n+  </Component>\n+</Fragment>\n+`;\n+\n+exports[`Execution table renders loading skeletons when the data is loading 1`] = `\n+<Fragment>\n+  <Component\n+    aria-label=\"Executions list\"\n+    cells={\n+      Array [\n+        \"ID\",\n+        \"Description\",\n+        \"Executor\",\n+        \"Date\",\n+        \"Execution Status\",\n+      ]\n+    }\n+    rows={\n+      Array [\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-0\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-1\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-2\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-3\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-4\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-5\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-6\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-7\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-8\",\n+        },\n+        Object {\n+          \"cells\": Array [\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"md\"\n+              />,\n+            },\n+            Object {\n+              \"title\": <SkeletonStripe\n+                size=\"lg\"\n+              />,\n+            },\n+          ],\n+          \"decisionKey\": \"skeleton-9\",\n+        },\n+      ]\n+    }\n+  >\n+    <TableHeader />\n+    <TableBody", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwNzg5Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458707897", "bodyText": "I thought it was enough to be sure of setting up the table with the right data configuration.\nI avoided mount because we would end up rendering the whole PatternFly Table, which could be out of scope for this test. The snapshot would also contain dozens of thousands of lines, that are difficult to review when something changes.", "author": "kelvah", "createdAt": "2020-07-22T10:55:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5NzA5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5OTA1MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r457999050", "bodyText": "probably should end with period.", "author": "jstastny-cz", "createdAt": "2020-07-21T10:33:50Z", "path": "ui-packages/packages/trusty/src/components/Templates/AuditOverview/AuditOverview.tsx", "diffHunk": "@@ -0,0 +1,94 @@\n+import React, { useEffect, useState } from 'react';\n+import {\n+  PageSection,\n+  PageSectionVariants,\n+  Text,\n+  TextContent,\n+  Title\n+} from '@patternfly/react-core';\n+import {\n+  AuditToolbarTop,\n+  AuditToolbarBottom\n+} from '../../Organisms/AuditToolbar/AuditToolbar';\n+import ExecutionTable from '../../Organisms/ExecutionTable/ExecutionTable';\n+import useExecutions from './useExecutions';\n+import { formatISO, sub } from 'date-fns';\n+\n+type AuditOverviewProps = {\n+  dateRangePreset?: {\n+    fromDate: string;\n+    toDate: string;\n+  };\n+};\n+\n+const AuditOverview = (props: AuditOverviewProps) => {\n+  const { dateRangePreset } = props;\n+  const toPreset = dateRangePreset\n+    ? dateRangePreset.toDate\n+    : formatISO(new Date(), { representation: 'date' });\n+  const fromPreset = dateRangePreset\n+    ? dateRangePreset.fromDate\n+    : formatISO(sub(new Date(), { months: 1 }), { representation: 'date' });\n+  const [searchString, setSearchString] = useState('');\n+  const [fromDate, setFromDate] = useState(fromPreset);\n+  const [toDate, setToDate] = useState(toPreset);\n+  const [page, setPage] = useState(1);\n+  const [pageSize, setPageSize] = useState(10);\n+  const [total, setTotal] = useState(0);\n+  const { loadExecutions, executions } = useExecutions(\n+    searchString,\n+    fromDate,\n+    toDate,\n+    pageSize,\n+    pageSize * (page - 1)\n+  );\n+\n+  useEffect(() => {\n+    if (executions.status === 'SUCCESS') {\n+      setTotal(executions.data.total);\n+    }\n+  }, [executions]);\n+\n+  return (\n+    <>\n+      <PageSection variant={PageSectionVariants.light}>\n+        <TextContent>\n+          <Title size=\"3xl\" headingLevel=\"h2\">\n+            Audit Investigation\n+          </Title>\n+          <Text component=\"p\">\n+            Here you can retrieve all the available information about past cases", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY3NTU0OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458675548", "bodyText": "Ops. Done.", "author": "kelvah", "createdAt": "2020-07-22T09:54:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzk5OTA1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODAwMDc5OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458000799", "bodyText": "consider if the snapshot gives sufficient level of detail, if not use mount instead.", "author": "jstastny-cz", "createdAt": "2020-07-21T10:37:17Z", "path": "ui-packages/packages/trusty/src/components/Templates/AuditOverview/tests/__snapshots__/AuditOverview.test.tsx.snap", "diffHunk": "@@ -0,0 +1,68 @@\n+// Jest Snapshot v1, https://goo.gl/fbAQLP\n+\n+exports[`Audit overview renders correctly a list of executions 1`] = `\n+<Fragment>\n+  <PageSection\n+    variant=\"light\"\n+  >\n+    <TextContent>\n+      <Title\n+        headingLevel=\"h2\"\n+        size=\"3xl\"\n+      >\n+        Audit Investigation\n+      </Title>\n+      <Text\n+        component=\"p\"\n+      >\n+        Here you can retrieve all the available information about past cases\n+      </Text>\n+    </TextContent>\n+  </PageSection>\n+  <PageSection\n+    isFilled={true}\n+  >\n+    <Component", "originalCommit": "3dd8f022f1f9edf6e983b61badae2610217658ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODcwODc0OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r458708748", "bodyText": "I made the same considerations of the ExecutionTable test.", "author": "kelvah", "createdAt": "2020-07-22T10:57:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODAwMDc5OQ=="}], "type": "inlineReview"}, {"oid": "02b34c694c2583d7e52db8b7ba967e5b7cabfe3c", "url": "https://github.com/kiegroup/kogito-apps/commit/02b34c694c2583d7e52db8b7ba967e5b7cabfe3c", "message": "KOGITO-2755 - Imported trusty/audit-overview components", "committedDate": "2020-07-28T13:02:26Z", "type": "commit"}, {"oid": "b401cbf615c9e622f88456222e9d3a1b5a7e8df4", "url": "https://github.com/kiegroup/kogito-apps/commit/b401cbf615c9e622f88456222e9d3a1b5a7e8df4", "message": "KOGITO-2755 - Imported trusty/audit-overview tests", "committedDate": "2020-07-28T13:05:08Z", "type": "commit"}, {"oid": "0c901ed47038c06d777e45419a3d2942cfb15150", "url": "https://github.com/kiegroup/kogito-apps/commit/0c901ed47038c06d777e45419a3d2942cfb15150", "message": "KOGITO-2775 - Added test for useExecutions custom hook", "committedDate": "2020-07-28T13:06:03Z", "type": "commit"}, {"oid": "a78bc33422f59e1d8b456029f27abc57e97ec4d2", "url": "https://github.com/kiegroup/kogito-apps/commit/a78bc33422f59e1d8b456029f27abc57e97ec4d2", "message": "KOGITO-2775 - Updates following review", "committedDate": "2020-07-28T13:07:43Z", "type": "commit"}, {"oid": "a78bc33422f59e1d8b456029f27abc57e97ec4d2", "url": "https://github.com/kiegroup/kogito-apps/commit/a78bc33422f59e1d8b456029f27abc57e97ec4d2", "message": "KOGITO-2775 - Updates following review", "committedDate": "2020-07-28T13:07:43Z", "type": "forcePushed"}, {"oid": "d26e109310bf5abe161a067927dca6f0af0f71d4", "url": "https://github.com/kiegroup/kogito-apps/commit/d26e109310bf5abe161a067927dca6f0af0f71d4", "message": "KOGITO-2775 Added Jest timezone settings and updated snapshots", "committedDate": "2020-07-28T16:54:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4MTI3Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462281273", "bodyText": "You can change this type do \"success\" | \"failure\", for example. <ExecutationStatus result={\"success\"} /> seems more semantic than <ExecutationStatus result={true} />", "author": "tiagobento", "createdAt": "2020-07-29T13:04:31Z", "path": "ui-packages/packages/trusty/src/components/Atoms/ExecutionStatus/ExecutionStatus.tsx", "diffHunk": "@@ -0,0 +1,32 @@\n+import React from 'react';\n+import { CheckCircleIcon, ErrorCircleOIcon } from '@patternfly/react-icons';\n+import './ExecutionStatus.scss';\n+\n+type ExecutionStatusProps = {\n+  result: boolean;", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1MzMwMw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463553303", "bodyText": "I agree. Done.", "author": "kelvah", "createdAt": "2020-07-31T11:19:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4MTI3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4NDQ5Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462284493", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              let className = 'execution-status-badge execution-status-badge--';\n          \n          \n            \n              let statusDescription;\n          \n          \n            \n              let icon;\n          \n          \n            \n              if (result) {\n          \n          \n            \n                className += 'success';\n          \n          \n            \n                statusDescription = 'Completed';\n          \n          \n            \n                icon = <CheckCircleIcon className={className} />;\n          \n          \n            \n              } else {\n          \n          \n            \n                className += 'error';\n          \n          \n            \n                statusDescription = 'Error';\n          \n          \n            \n                icon = <ErrorCircleOIcon className={className} />;\n          \n          \n            \n              }\n          \n          \n            \n            \n          \n          \n            \n              return (\n          \n          \n            \n                <>\n          \n          \n            \n                  {icon}\n          \n          \n            \n                  <span>{statusDescription}</span>\n          \n          \n            \n                </>\n          \n          \n            \n              );\n          \n          \n            \n            };\n          \n          \n            \n              return (\n          \n          \n            \n                <>\n          \n          \n            \n                  {result === \"success\" && <>\n          \n          \n            \n                     <CheckCircleIcon className={'execution-status-badge execution-status-badge--success'} />;\n          \n          \n            \n                     <span>Completed</span>\n          \n          \n            \n                  </>}\n          \n          \n            \n                  {result === \"error\" && <>\n          \n          \n            \n                     <ErrorCircleOIcon className={'execution-status-badge execution-status-badge--error'} />;\n          \n          \n            \n                     <span>Error</span>\n          \n          \n            \n                  </>}\n          \n          \n            \n                </>\n          \n          \n            \n              );\n          \n          \n            \n            };", "author": "tiagobento", "createdAt": "2020-07-29T13:09:28Z", "path": "ui-packages/packages/trusty/src/components/Atoms/ExecutionStatus/ExecutionStatus.tsx", "diffHunk": "@@ -0,0 +1,32 @@\n+import React from 'react';\n+import { CheckCircleIcon, ErrorCircleOIcon } from '@patternfly/react-icons';\n+import './ExecutionStatus.scss';\n+\n+type ExecutionStatusProps = {\n+  result: boolean;\n+};\n+\n+const ExecutionStatus = (props: ExecutionStatusProps) => {\n+  const { result } = props;\n+  let className = 'execution-status-badge execution-status-badge--';\n+  let statusDescription;\n+  let icon;\n+  if (result) {\n+    className += 'success';\n+    statusDescription = 'Completed';\n+    icon = <CheckCircleIcon className={className} />;\n+  } else {\n+    className += 'error';\n+    statusDescription = 'Error';\n+    icon = <ErrorCircleOIcon className={className} />;\n+  }\n+\n+  return (\n+    <>\n+      {icon}\n+      <span>{statusDescription}</span>\n+    </>\n+  );\n+};", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1MzU2OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463553569", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-31T11:20:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4NDQ5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4NTQ2MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462285461", "bodyText": "This should be wrapped in a useMemo.", "author": "tiagobento", "createdAt": "2020-07-29T13:10:46Z", "path": "ui-packages/packages/trusty/src/components/Atoms/FormattedDate/FormattedDate.tsx", "diffHunk": "@@ -0,0 +1,50 @@\n+import React from 'react';\n+import { differenceInDays, format, formatDistanceToNowStrict } from 'date-fns';\n+import { Tooltip } from '@patternfly/react-core';\n+import { TooltipProps } from '@patternfly/react-core/dist/js/components/Tooltip/Tooltip';\n+\n+type FormattedDateProps = {\n+  date: string;\n+  preposition?: boolean;\n+  position?: TooltipProps['position'];\n+  fullDateAndTime?: boolean;\n+};\n+\n+const FormattedDate = (props: FormattedDateProps) => {\n+  const {\n+    date,\n+    preposition = false,\n+    position = 'auto',\n+    fullDateAndTime = false\n+  } = props;\n+  const difference = differenceInDays(new Date(date), Date.now());\n+  const fullFormattedDate = format(new Date(date), 'PPpp');\n+  let formattedDate;\n+\n+  if (difference === 0) {\n+    formattedDate = `${formatDistanceToNowStrict(new Date(date))} ago`;\n+  } else {\n+    const prefix = preposition ? 'on ' : '';\n+    formattedDate = `${prefix}${format(new Date(date), 'PP')}`;\n+  }", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4NTUxMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462285511", "bodyText": "This should be wrapped in a useMemo.", "author": "tiagobento", "createdAt": "2020-07-29T13:10:50Z", "path": "ui-packages/packages/trusty/src/components/Atoms/FormattedDate/FormattedDate.tsx", "diffHunk": "@@ -0,0 +1,50 @@\n+import React from 'react';\n+import { differenceInDays, format, formatDistanceToNowStrict } from 'date-fns';\n+import { Tooltip } from '@patternfly/react-core';\n+import { TooltipProps } from '@patternfly/react-core/dist/js/components/Tooltip/Tooltip';\n+\n+type FormattedDateProps = {\n+  date: string;\n+  preposition?: boolean;\n+  position?: TooltipProps['position'];\n+  fullDateAndTime?: boolean;\n+};\n+\n+const FormattedDate = (props: FormattedDateProps) => {\n+  const {\n+    date,\n+    preposition = false,\n+    position = 'auto',\n+    fullDateAndTime = false\n+  } = props;\n+  const difference = differenceInDays(new Date(date), Date.now());\n+  const fullFormattedDate = format(new Date(date), 'PPpp');", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4NTU0OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462285549", "bodyText": "This should be wrapped in a useMemo.", "author": "tiagobento", "createdAt": "2020-07-29T13:10:53Z", "path": "ui-packages/packages/trusty/src/components/Atoms/FormattedDate/FormattedDate.tsx", "diffHunk": "@@ -0,0 +1,50 @@\n+import React from 'react';\n+import { differenceInDays, format, formatDistanceToNowStrict } from 'date-fns';\n+import { Tooltip } from '@patternfly/react-core';\n+import { TooltipProps } from '@patternfly/react-core/dist/js/components/Tooltip/Tooltip';\n+\n+type FormattedDateProps = {\n+  date: string;\n+  preposition?: boolean;\n+  position?: TooltipProps['position'];\n+  fullDateAndTime?: boolean;\n+};\n+\n+const FormattedDate = (props: FormattedDateProps) => {\n+  const {\n+    date,\n+    preposition = false,\n+    position = 'auto',\n+    fullDateAndTime = false\n+  } = props;\n+  const difference = differenceInDays(new Date(date), Date.now());", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4Njk1Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462286953", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              const stripeDefaultStyle = {};\n          \n          \n            \n              const stripeStyle = customStyle\n          \n          \n            \n                ? Object.assign(customStyle, stripeDefaultStyle)\n          \n          \n            \n                : stripeDefaultStyle;\n          \n          \n            \n              const stripeStyle = useMemo(() => customStyle ?? {}, [customStyle]);", "author": "tiagobento", "createdAt": "2020-07-29T13:12:57Z", "path": "ui-packages/packages/trusty/src/components/Atoms/SkeletonStripe/SkeletonStripe.tsx", "diffHunk": "@@ -0,0 +1,27 @@\n+import React from 'react';\n+import './SkeletonStripe.scss';\n+\n+type SkeletonStripeProps = {\n+  customStyle?: React.CSSProperties;\n+  isInline?: boolean;\n+  size?: 'sm' | 'md' | 'lg';\n+};\n+\n+const SkeletonStripe = (props: SkeletonStripeProps) => {\n+  const { isInline = false, size = 'sm', customStyle } = props;\n+  const stripeDefaultStyle = {};\n+  const stripeStyle = customStyle\n+    ? Object.assign(customStyle, stripeDefaultStyle)\n+    : stripeDefaultStyle;", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NDg0Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463554842", "bodyText": "I am sure there were some default styles before. Forgot to cleanup.\nDone without nullish coalescing. The version of TypeScript we use doesn't support it yet. We are gradually updating everything. Now it's the turn of PatternFly. TypeScript could be next. I am considering updating it just for the trusty package to avoid refactoring though.", "author": "kelvah", "createdAt": "2020-07-31T11:23:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4Njk1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI4ODE5OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462288199", "bodyText": "This should be wrapped in a useMemo.", "author": "tiagobento", "createdAt": "2020-07-29T13:14:52Z", "path": "ui-packages/packages/trusty/src/components/Atoms/SkeletonStripe/SkeletonStripe.tsx", "diffHunk": "@@ -0,0 +1,27 @@\n+import React from 'react';\n+import './SkeletonStripe.scss';\n+\n+type SkeletonStripeProps = {\n+  customStyle?: React.CSSProperties;\n+  isInline?: boolean;\n+  size?: 'sm' | 'md' | 'lg';\n+};\n+\n+const SkeletonStripe = (props: SkeletonStripeProps) => {\n+  const { isInline = false, size = 'sm', customStyle } = props;\n+  const stripeDefaultStyle = {};\n+  const stripeStyle = customStyle\n+    ? Object.assign(customStyle, stripeDefaultStyle)\n+    : stripeDefaultStyle;\n+  let cssClasses = 'skeleton__stripe';\n+  if (isInline) {\n+    cssClasses += ' skeleton__stripe--inline';\n+  }\n+  if (size !== 'sm') {\n+    cssClasses += ` skeleton__stripe--${size}`;\n+  }", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5MDQwNw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462290407", "bodyText": "datePicker can never be falsy (you can see that from its type), you can only check for datePicker.current", "author": "tiagobento", "createdAt": "2020-07-29T13:17:59Z", "path": "ui-packages/packages/trusty/src/components/Molecules/DatePicker/DatePicker.tsx", "diffHunk": "@@ -0,0 +1,71 @@\n+import React, { useEffect, useRef } from 'react';\n+import { InputGroup, TextInput } from '@patternfly/react-core';\n+import flatpickr from 'flatpickr';\n+import { Instance as flatpickrInstance } from 'flatpickr/dist/types/instance';\n+import './DatePicker.scss';\n+\n+type DatePickerProps = {\n+  fromDate?: string;\n+  id: string;\n+  label?: string;\n+  minDate?: string;\n+  maxDate?: string;\n+  onDateUpdate: (date: string) => void;\n+  value?: string;\n+};\n+\n+const DatePicker = (props: DatePickerProps) => {\n+  const { fromDate, minDate, maxDate, value, onDateUpdate, id, label } = props;\n+  const datePicker = useRef<HTMLInputElement>(null);\n+\n+  useEffect(() => {\n+    let calendar: flatpickrInstance;\n+    const onChange = (selectedDates: Date[], dateStr: string) => {\n+      onDateUpdate(dateStr);\n+    };\n+    if (datePicker && datePicker.current) {", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NDkxOQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463554919", "bodyText": "You have a point. Done.", "author": "kelvah", "createdAt": "2020-07-31T11:23:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5MDQwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5MDgwOQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462290809", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              const datePicker = useRef<HTMLInputElement>(null);\n          \n          \n            \n              const datePicker = useRef<HTMLInputElement>();", "author": "tiagobento", "createdAt": "2020-07-29T13:18:34Z", "path": "ui-packages/packages/trusty/src/components/Molecules/DatePicker/DatePicker.tsx", "diffHunk": "@@ -0,0 +1,71 @@\n+import React, { useEffect, useRef } from 'react';\n+import { InputGroup, TextInput } from '@patternfly/react-core';\n+import flatpickr from 'flatpickr';\n+import { Instance as flatpickrInstance } from 'flatpickr/dist/types/instance';\n+import './DatePicker.scss';\n+\n+type DatePickerProps = {\n+  fromDate?: string;\n+  id: string;\n+  label?: string;\n+  minDate?: string;\n+  maxDate?: string;\n+  onDateUpdate: (date: string) => void;\n+  value?: string;\n+};\n+\n+const DatePicker = (props: DatePickerProps) => {\n+  const { fromDate, minDate, maxDate, value, onDateUpdate, id, label } = props;\n+  const datePicker = useRef<HTMLInputElement>(null);", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NDk2MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463554960", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-31T11:24:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5MDgwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5MjM4OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462292389", "bodyText": "This looks like an unexpected side effect. Every time this file is imported, this code will run, which is very hard to control and predict. It this change in configuration is important to your app, you should have an explicit call to a method that does that. On your application entry-point, you can call a function that executes this code. This way, it will be easier to understand why and when things were modified.", "author": "tiagobento", "createdAt": "2020-07-29T13:20:55Z", "path": "ui-packages/packages/trusty/src/components/Molecules/DatePicker/DatePicker.tsx", "diffHunk": "@@ -0,0 +1,71 @@\n+import React, { useEffect, useRef } from 'react';\n+import { InputGroup, TextInput } from '@patternfly/react-core';\n+import flatpickr from 'flatpickr';\n+import { Instance as flatpickrInstance } from 'flatpickr/dist/types/instance';\n+import './DatePicker.scss';\n+\n+type DatePickerProps = {\n+  fromDate?: string;\n+  id: string;\n+  label?: string;\n+  minDate?: string;\n+  maxDate?: string;\n+  onDateUpdate: (date: string) => void;\n+  value?: string;\n+};\n+\n+const DatePicker = (props: DatePickerProps) => {\n+  const { fromDate, minDate, maxDate, value, onDateUpdate, id, label } = props;\n+  const datePicker = useRef<HTMLInputElement>(null);\n+\n+  useEffect(() => {\n+    let calendar: flatpickrInstance;\n+    const onChange = (selectedDates: Date[], dateStr: string) => {\n+      onDateUpdate(dateStr);\n+    };\n+    if (datePicker && datePicker.current) {\n+      calendar = flatpickr(datePicker.current, {\n+        allowInput: true,\n+        altInput: true,\n+        altFormat: 'F j, Y',\n+        dateFormat: 'Y-m-d',\n+        defaultDate: value,\n+        minDate,\n+        maxDate,\n+        monthSelectorType: 'static',\n+        onChange,\n+        prevArrow: leftArrow,\n+        nextArrow: rightArrow,\n+        static: true\n+      });\n+    }\n+    return () => {\n+      calendar.destroy();\n+    };\n+  }, [fromDate, maxDate, onDateUpdate, minDate, value, id]);\n+\n+  return (\n+    <InputGroup>\n+      <TextInput\n+        name={id}\n+        id={id}\n+        type=\"date\"\n+        aria-label={label}\n+        ref={datePicker}\n+      />\n+    </InputGroup>\n+  );\n+};\n+\n+export default DatePicker;\n+\n+flatpickr.l10ns.en.weekdays.shorthand.forEach((day, index, daysArray) => {\n+  if (daysArray[index] === 'Thu' || daysArray[index] === 'Th') {\n+    daysArray[index] = 'Th';\n+  } else {\n+    daysArray[index] = daysArray[index].charAt(0);\n+  }\n+});", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NTk4Ng==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463555986", "bodyText": "Moved the configuration in the app initialization. I didn't dwell too much with this datepicker implementation because it was meant to be temporary while waiting for the release of the PatternFly one in June. Unfortunately it was not released like planned.", "author": "kelvah", "createdAt": "2020-07-31T11:26:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5MjM4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5MzE0MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462293140", "bodyText": "These images should be in their own file. You can use Webpack to load SVGs as strings if you need.", "author": "tiagobento", "createdAt": "2020-07-29T13:21:58Z", "path": "ui-packages/packages/trusty/src/components/Molecules/DatePicker/DatePicker.tsx", "diffHunk": "@@ -0,0 +1,71 @@\n+import React, { useEffect, useRef } from 'react';\n+import { InputGroup, TextInput } from '@patternfly/react-core';\n+import flatpickr from 'flatpickr';\n+import { Instance as flatpickrInstance } from 'flatpickr/dist/types/instance';\n+import './DatePicker.scss';\n+\n+type DatePickerProps = {\n+  fromDate?: string;\n+  id: string;\n+  label?: string;\n+  minDate?: string;\n+  maxDate?: string;\n+  onDateUpdate: (date: string) => void;\n+  value?: string;\n+};\n+\n+const DatePicker = (props: DatePickerProps) => {\n+  const { fromDate, minDate, maxDate, value, onDateUpdate, id, label } = props;\n+  const datePicker = useRef<HTMLInputElement>(null);\n+\n+  useEffect(() => {\n+    let calendar: flatpickrInstance;\n+    const onChange = (selectedDates: Date[], dateStr: string) => {\n+      onDateUpdate(dateStr);\n+    };\n+    if (datePicker && datePicker.current) {\n+      calendar = flatpickr(datePicker.current, {\n+        allowInput: true,\n+        altInput: true,\n+        altFormat: 'F j, Y',\n+        dateFormat: 'Y-m-d',\n+        defaultDate: value,\n+        minDate,\n+        maxDate,\n+        monthSelectorType: 'static',\n+        onChange,\n+        prevArrow: leftArrow,\n+        nextArrow: rightArrow,\n+        static: true\n+      });\n+    }\n+    return () => {\n+      calendar.destroy();\n+    };\n+  }, [fromDate, maxDate, onDateUpdate, minDate, value, id]);\n+\n+  return (\n+    <InputGroup>\n+      <TextInput\n+        name={id}\n+        id={id}\n+        type=\"date\"\n+        aria-label={label}\n+        ref={datePicker}\n+      />\n+    </InputGroup>\n+  );\n+};\n+\n+export default DatePicker;\n+\n+flatpickr.l10ns.en.weekdays.shorthand.forEach((day, index, daysArray) => {\n+  if (daysArray[index] === 'Thu' || daysArray[index] === 'Th') {\n+    daysArray[index] = 'Th';\n+  } else {\n+    daysArray[index] = daysArray[index].charAt(0);\n+  }\n+});\n+\n+const leftArrow = `<svg fill=\"currentColor\" height=\"1em\" width=\"1em\" viewBox=\"0 0 256 512\" aria-hidden=\"true\" role=\"img\" style=\"vertical-align: -0.125em;\"><path d=\"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z\" transform=\"\"/></svg>`;\n+const rightArrow = `<svg fill=\"currentColor\" height=\"1em\" width=\"1em\" viewBox=\"0 0 256 512\" aria-hidden=\"true\" role=\"img\" style=\"vertical-align: -0.125em;\"><path d=\"M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z\" transform=\"\"/></svg>`;", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NjA1Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463556052", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-31T11:26:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5MzE0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5NjM4Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462296387", "bodyText": "This should be wrapped in a useCallback.", "author": "tiagobento", "createdAt": "2020-07-29T13:26:29Z", "path": "ui-packages/packages/trusty/src/components/Organisms/AuditToolbar/AuditToolbar.tsx", "diffHunk": "@@ -0,0 +1,152 @@\n+import React, { useRef } from 'react';\n+import {\n+  Button,\n+  ButtonVariant,\n+  DataToolbar,\n+  DataToolbarContent,\n+  DataToolbarItem,\n+  DataToolbarItemVariant,\n+  InputGroup,\n+  TextInput\n+} from '@patternfly/react-core';\n+import { SearchIcon, SyncIcon } from '@patternfly/react-icons';\n+import PaginationContainer from '../PaginationContainer/PaginationContainer';\n+import DatePicker from '../../Molecules/DatePicker/DatePicker';\n+\n+type toolbarBaseProps = {\n+  page: number;\n+  pageSize: number;\n+  setPage: (page: number) => void;\n+  setPageSize: (pageSize: number) => void;\n+  total: number;\n+};\n+\n+type topToolbarProps = {\n+  setSearchString: (searchString: string) => void;\n+  fromDate: string;\n+  setFromDate: (fromDate: string) => void;\n+  toDate: string;\n+  setToDate: (toDate: string) => void;\n+  onRefresh: () => void;\n+};\n+\n+export const AuditToolbarTop = (props: toolbarBaseProps & topToolbarProps) => {\n+  const {\n+    setSearchString,\n+    fromDate,\n+    setFromDate,\n+    toDate,\n+    setToDate,\n+    total,\n+    pageSize,\n+    page,\n+    setPage,\n+    setPageSize,\n+    onRefresh\n+  } = props;\n+\n+  const searchField = useRef<HTMLInputElement>(null);\n+  const onSearchSubmit = (): void => {\n+    if (searchField && searchField.current) {\n+      setSearchString(searchField.current.value);\n+    }\n+  };\n+  const onSearchEnter = (event: React.KeyboardEvent): void => {\n+    if (searchField && searchField.current && event.key === 'Enter') {\n+      setSearchString(searchField.current.value);\n+    }\n+  };", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5NjU2Ng==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462296566", "bodyText": "This should be wrapped in a useCallback.", "author": "tiagobento", "createdAt": "2020-07-29T13:26:43Z", "path": "ui-packages/packages/trusty/src/components/Organisms/AuditToolbar/AuditToolbar.tsx", "diffHunk": "@@ -0,0 +1,152 @@\n+import React, { useRef } from 'react';\n+import {\n+  Button,\n+  ButtonVariant,\n+  DataToolbar,\n+  DataToolbarContent,\n+  DataToolbarItem,\n+  DataToolbarItemVariant,\n+  InputGroup,\n+  TextInput\n+} from '@patternfly/react-core';\n+import { SearchIcon, SyncIcon } from '@patternfly/react-icons';\n+import PaginationContainer from '../PaginationContainer/PaginationContainer';\n+import DatePicker from '../../Molecules/DatePicker/DatePicker';\n+\n+type toolbarBaseProps = {\n+  page: number;\n+  pageSize: number;\n+  setPage: (page: number) => void;\n+  setPageSize: (pageSize: number) => void;\n+  total: number;\n+};\n+\n+type topToolbarProps = {\n+  setSearchString: (searchString: string) => void;\n+  fromDate: string;\n+  setFromDate: (fromDate: string) => void;\n+  toDate: string;\n+  setToDate: (toDate: string) => void;\n+  onRefresh: () => void;\n+};\n+\n+export const AuditToolbarTop = (props: toolbarBaseProps & topToolbarProps) => {\n+  const {\n+    setSearchString,\n+    fromDate,\n+    setFromDate,\n+    toDate,\n+    setToDate,\n+    total,\n+    pageSize,\n+    page,\n+    setPage,\n+    setPageSize,\n+    onRefresh\n+  } = props;\n+\n+  const searchField = useRef<HTMLInputElement>(null);\n+  const onSearchSubmit = (): void => {\n+    if (searchField && searchField.current) {\n+      setSearchString(searchField.current.value);\n+    }\n+  };", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5NjYzOQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462296639", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              const searchField = useRef<HTMLInputElement>(null);\n          \n          \n            \n              const searchField = useRef<HTMLInputElement>();", "author": "tiagobento", "createdAt": "2020-07-29T13:26:48Z", "path": "ui-packages/packages/trusty/src/components/Organisms/AuditToolbar/AuditToolbar.tsx", "diffHunk": "@@ -0,0 +1,152 @@\n+import React, { useRef } from 'react';\n+import {\n+  Button,\n+  ButtonVariant,\n+  DataToolbar,\n+  DataToolbarContent,\n+  DataToolbarItem,\n+  DataToolbarItemVariant,\n+  InputGroup,\n+  TextInput\n+} from '@patternfly/react-core';\n+import { SearchIcon, SyncIcon } from '@patternfly/react-icons';\n+import PaginationContainer from '../PaginationContainer/PaginationContainer';\n+import DatePicker from '../../Molecules/DatePicker/DatePicker';\n+\n+type toolbarBaseProps = {\n+  page: number;\n+  pageSize: number;\n+  setPage: (page: number) => void;\n+  setPageSize: (pageSize: number) => void;\n+  total: number;\n+};\n+\n+type topToolbarProps = {\n+  setSearchString: (searchString: string) => void;\n+  fromDate: string;\n+  setFromDate: (fromDate: string) => void;\n+  toDate: string;\n+  setToDate: (toDate: string) => void;\n+  onRefresh: () => void;\n+};\n+\n+export const AuditToolbarTop = (props: toolbarBaseProps & topToolbarProps) => {\n+  const {\n+    setSearchString,\n+    fromDate,\n+    setFromDate,\n+    toDate,\n+    setToDate,\n+    total,\n+    pageSize,\n+    page,\n+    setPage,\n+    setPageSize,\n+    onRefresh\n+  } = props;\n+\n+  const searchField = useRef<HTMLInputElement>(null);", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NjMxMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463556312", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-31T11:27:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5NjYzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjI5NzI2Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462297267", "bodyText": "You can either inline that or wrap it in a useMemo.", "author": "tiagobento", "createdAt": "2020-07-29T13:27:45Z", "path": "ui-packages/packages/trusty/src/components/Organisms/ExecutionTable/ExecutionTable.tsx", "diffHunk": "@@ -0,0 +1,149 @@\n+import React, { useEffect, useState } from 'react';\n+import { Link } from 'react-router-dom';\n+import { IRow, Table, TableBody, TableHeader } from '@patternfly/react-table';\n+import {\n+  Bullseye,\n+  EmptyState,\n+  EmptyStateBody,\n+  EmptyStateIcon,\n+  Title\n+} from '@patternfly/react-core';\n+import { SearchIcon, ExclamationCircleIcon } from '@patternfly/react-icons';\n+import ExecutionStatus from '../../Atoms/ExecutionStatus/ExecutionStatus';\n+import FormattedDate from '../../Atoms/FormattedDate/FormattedDate';\n+import skeletonRows from '../../../utils/skeletonRows/skeletonRows';\n+import { IExecution, IExecutions, RemoteData } from '../../../types';\n+\n+type ExecutionTableProps = {\n+  data: RemoteData<Error, IExecutions>;\n+};\n+\n+const ExecutionTable = (props: ExecutionTableProps) => {\n+  const { data } = props;\n+  const columns = ['ID', 'Description', 'Executor', 'Date', 'Execution Status'];", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwMjk5OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462302999", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              const rows: IRow[] = [];\n          \n          \n            \n            \n          \n          \n            \n              rowData.forEach(item => {\n          \n          \n            \n                const row: IRow = {};\n          \n          \n            \n                const cells = [];\n          \n          \n            \n                cells.push({\n          \n          \n            \n                  title: (\n          \n          \n            \n                    <Link\n          \n          \n            \n                      to={`/audit/${item.executionType.toLocaleLowerCase()}/${\n          \n          \n            \n                        item.executionId\n          \n          \n            \n                      }`}\n          \n          \n            \n                    >\n          \n          \n            \n                      {'#' + item.executionId.toUpperCase()}\n          \n          \n            \n                    </Link>\n          \n          \n            \n                  )\n          \n          \n            \n                });\n          \n          \n            \n                cells.push(item.executedModelName);\n          \n          \n            \n                cells.push(item.executorName);\n          \n          \n            \n                cells.push({\n          \n          \n            \n                  title: <FormattedDate date={item.executionDate} />\n          \n          \n            \n                });\n          \n          \n            \n                cells.push({\n          \n          \n            \n                  title: <ExecutionStatus result={item.executionSucceeded} />\n          \n          \n            \n                });\n          \n          \n            \n                row.cells = cells;\n          \n          \n            \n                row.executionKey = 'key-' + item.executionId;\n          \n          \n            \n                rows.push(row);\n          \n          \n            \n              });\n          \n          \n            \n              return rows;\n          \n          \n            \n              return rowData.map(item => ({\n          \n          \n            \n                  executionKey: 'key-' + item.executionId,\n          \n          \n            \n                  cells: [\n          \n          \n            \n                    {\n          \n          \n            \n                      title: (\n          \n          \n            \n                        <Link to={`/audit/${item.executionType.toLocaleLowerCase()}/${item.executionId}`}>\n          \n          \n            \n                           {'#' + item.executionId.toUpperCase()}\n          \n          \n            \n                        </Link>)\n          \n          \n            \n                    },\n          \n          \n            \n                    item.executedModelName,\n          \n          \n            \n                    item.executorName,\n          \n          \n            \n                    { title: <FormattedDate date={item.executionDate} /> },\n          \n          \n            \n                    { title: <ExecutionStatus result={item.executionSucceeded} /> }\n          \n          \n            \n                 ]\n          \n          \n            \n                }));", "author": "tiagobento", "createdAt": "2020-07-29T13:35:58Z", "path": "ui-packages/packages/trusty/src/components/Organisms/ExecutionTable/ExecutionTable.tsx", "diffHunk": "@@ -0,0 +1,149 @@\n+import React, { useEffect, useState } from 'react';\n+import { Link } from 'react-router-dom';\n+import { IRow, Table, TableBody, TableHeader } from '@patternfly/react-table';\n+import {\n+  Bullseye,\n+  EmptyState,\n+  EmptyStateBody,\n+  EmptyStateIcon,\n+  Title\n+} from '@patternfly/react-core';\n+import { SearchIcon, ExclamationCircleIcon } from '@patternfly/react-icons';\n+import ExecutionStatus from '../../Atoms/ExecutionStatus/ExecutionStatus';\n+import FormattedDate from '../../Atoms/FormattedDate/FormattedDate';\n+import skeletonRows from '../../../utils/skeletonRows/skeletonRows';\n+import { IExecution, IExecutions, RemoteData } from '../../../types';\n+\n+type ExecutionTableProps = {\n+  data: RemoteData<Error, IExecutions>;\n+};\n+\n+const ExecutionTable = (props: ExecutionTableProps) => {\n+  const { data } = props;\n+  const columns = ['ID', 'Description', 'Executor', 'Date', 'Execution Status'];\n+  const [rows, setRows] = useState<IRow[]>(prepareRows(columns.length, data));\n+\n+  useEffect(() => {\n+    setRows(prepareRows(columns.length, data));\n+  }, [data.status]);\n+\n+  return (\n+    <Table cells={columns} rows={rows} aria-label=\"Executions list\">\n+      <TableHeader />\n+      <TableBody rowKey=\"executionKey\" />\n+    </Table>\n+  );\n+};\n+\n+const prepareRows = (\n+  columnsNumber: number,\n+  data: RemoteData<Error, IExecutions>\n+) => {\n+  let rows;\n+  switch (data.status) {\n+    case 'NOT_ASKED':\n+    case 'LOADING':\n+      rows = skeletonRows(columnsNumber, 10, 'executionKey');\n+      break;\n+    case 'SUCCESS':\n+      if (data.data.headers.length > 0) {\n+        rows = prepareExecutionsRows(data.data.headers);\n+      } else {\n+        rows = noExecutions(columnsNumber);\n+      }\n+      break;\n+    case 'FAILURE':\n+      rows = loadingError(columnsNumber);\n+      break;\n+  }\n+  return rows;\n+};\n+\n+const prepareExecutionsRows = (rowData: IExecution[]) => {\n+  const rows: IRow[] = [];\n+\n+  rowData.forEach(item => {\n+    const row: IRow = {};\n+    const cells = [];\n+    cells.push({\n+      title: (\n+        <Link\n+          to={`/audit/${item.executionType.toLocaleLowerCase()}/${\n+            item.executionId\n+          }`}\n+        >\n+          {'#' + item.executionId.toUpperCase()}\n+        </Link>\n+      )\n+    });\n+    cells.push(item.executedModelName);\n+    cells.push(item.executorName);\n+    cells.push({\n+      title: <FormattedDate date={item.executionDate} />\n+    });\n+    cells.push({\n+      title: <ExecutionStatus result={item.executionSucceeded} />\n+    });\n+    row.cells = cells;\n+    row.executionKey = 'key-' + item.executionId;\n+    rows.push(row);\n+  });\n+  return rows;", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NjUwNw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463556507", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-31T11:28:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwMjk5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNDIwNA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462304204", "bodyText": "This should be wrapped in a useCallback.", "author": "tiagobento", "createdAt": "2020-07-29T13:37:42Z", "path": "ui-packages/packages/trusty/src/components/Organisms/PaginationContainer/PaginationContainer.tsx", "diffHunk": "@@ -0,0 +1,42 @@\n+import React from 'react';\n+import { Pagination, PaginationVariant } from '@patternfly/react-core';\n+\n+type PaginationContainerProps = {\n+  total: number;\n+  page: number;\n+  pageSize: number;\n+  paginationId: string;\n+  onSetPage: (page: number) => void;\n+  onSetPageSize: (size: number) => void;\n+};\n+\n+const PaginationContainer = (props: PaginationContainerProps) => {\n+  const {\n+    total,\n+    page,\n+    pageSize,\n+    paginationId,\n+    onSetPage,\n+    onSetPageSize\n+  } = props;\n+\n+  const updatePage = (event: any, pageNumber: number) => {\n+    onSetPage(pageNumber);\n+  };", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNDI4NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462304285", "bodyText": "This should be wrapped in a useCallback.", "author": "tiagobento", "createdAt": "2020-07-29T13:37:48Z", "path": "ui-packages/packages/trusty/src/components/Organisms/PaginationContainer/PaginationContainer.tsx", "diffHunk": "@@ -0,0 +1,42 @@\n+import React from 'react';\n+import { Pagination, PaginationVariant } from '@patternfly/react-core';\n+\n+type PaginationContainerProps = {\n+  total: number;\n+  page: number;\n+  pageSize: number;\n+  paginationId: string;\n+  onSetPage: (page: number) => void;\n+  onSetPageSize: (size: number) => void;\n+};\n+\n+const PaginationContainer = (props: PaginationContainerProps) => {\n+  const {\n+    total,\n+    page,\n+    pageSize,\n+    paginationId,\n+    onSetPage,\n+    onSetPageSize\n+  } = props;\n+\n+  const updatePage = (event: any, pageNumber: number) => {\n+    onSetPage(pageNumber);\n+  };\n+  const updatePageSize = (event: any, pageNumber: number) => {\n+    onSetPageSize(pageNumber);\n+  };", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNTA4MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462305081", "bodyText": "This should be wrapped in a useMemo.", "author": "tiagobento", "createdAt": "2020-07-29T13:38:54Z", "path": "ui-packages/packages/trusty/src/components/Templates/AuditOverview/AuditOverview.tsx", "diffHunk": "@@ -0,0 +1,95 @@\n+import React, { useEffect, useState } from 'react';\n+import {\n+  PageSection,\n+  PageSectionVariants,\n+  Text,\n+  TextContent,\n+  Title\n+} from '@patternfly/react-core';\n+import {\n+  AuditToolbarTop,\n+  AuditToolbarBottom\n+} from '../../Organisms/AuditToolbar/AuditToolbar';\n+import ExecutionTable from '../../Organisms/ExecutionTable/ExecutionTable';\n+import useExecutions from './useExecutions';\n+import { formatISO, sub } from 'date-fns';\n+\n+type AuditOverviewProps = {\n+  dateRangePreset?: {\n+    fromDate: string;\n+    toDate: string;\n+  };\n+};\n+\n+const AuditOverview = (props: AuditOverviewProps) => {\n+  const { dateRangePreset } = props;\n+  const toPreset = dateRangePreset\n+    ? dateRangePreset.toDate\n+    : formatISO(new Date(), { representation: 'date' });", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNTE0Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462305147", "bodyText": "This should be wrapped in a useMemo.", "author": "tiagobento", "createdAt": "2020-07-29T13:39:00Z", "path": "ui-packages/packages/trusty/src/components/Templates/AuditOverview/AuditOverview.tsx", "diffHunk": "@@ -0,0 +1,95 @@\n+import React, { useEffect, useState } from 'react';\n+import {\n+  PageSection,\n+  PageSectionVariants,\n+  Text,\n+  TextContent,\n+  Title\n+} from '@patternfly/react-core';\n+import {\n+  AuditToolbarTop,\n+  AuditToolbarBottom\n+} from '../../Organisms/AuditToolbar/AuditToolbar';\n+import ExecutionTable from '../../Organisms/ExecutionTable/ExecutionTable';\n+import useExecutions from './useExecutions';\n+import { formatISO, sub } from 'date-fns';\n+\n+type AuditOverviewProps = {\n+  dateRangePreset?: {\n+    fromDate: string;\n+    toDate: string;\n+  };\n+};\n+\n+const AuditOverview = (props: AuditOverviewProps) => {\n+  const { dateRangePreset } = props;\n+  const toPreset = dateRangePreset\n+    ? dateRangePreset.toDate\n+    : formatISO(new Date(), { representation: 'date' });\n+  const fromPreset = dateRangePreset\n+    ? dateRangePreset.fromDate\n+    : formatISO(sub(new Date(), { months: 1 }), { representation: 'date' });", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNzM3Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462307373", "bodyText": "Since these parameters are all of primitive types, I feel like this custom Hook should have its signature improved by forcing \"named parameters\". If you create an object with these parameters, users will have to explicitly type the parameter name (which is only the property names of the parameter object). This will increase readability on places using this Hook.", "author": "tiagobento", "createdAt": "2020-07-29T13:41:55Z", "path": "ui-packages/packages/trusty/src/components/Templates/AuditOverview/useExecutions.tsx", "diffHunk": "@@ -0,0 +1,43 @@\n+import { useCallback, useEffect, useState } from 'react';\n+import { getExecutions } from '../../../utils/api/auditApi';\n+import { isCancelledRequest } from '../../../utils/api/httpClient';\n+import { RemoteData, IExecutions } from '../../../types';\n+\n+const useExecutions = (\n+  searchString: string,\n+  from: string,\n+  to: string,\n+  limit: number,\n+  offset: number\n+) => {", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NzQ3Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463557473", "bodyText": "I agree. I was used to some ESLint rule that warned you from adding more then 3 parameters to functions. Done.", "author": "kelvah", "createdAt": "2020-07-31T11:30:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNzM3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNzg1MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462307851", "bodyText": "You can inline this function call so you don't have to practically repeat the list of dependencies on the useCallback statement.", "author": "tiagobento", "createdAt": "2020-07-29T13:42:37Z", "path": "ui-packages/packages/trusty/src/components/Templates/AuditOverview/useExecutions.tsx", "diffHunk": "@@ -0,0 +1,43 @@\n+import { useCallback, useEffect, useState } from 'react';\n+import { getExecutions } from '../../../utils/api/auditApi';\n+import { isCancelledRequest } from '../../../utils/api/httpClient';\n+import { RemoteData, IExecutions } from '../../../types';\n+\n+const useExecutions = (\n+  searchString: string,\n+  from: string,\n+  to: string,\n+  limit: number,\n+  offset: number\n+) => {\n+  const [executions, setExecutions] = useState<RemoteData<Error, IExecutions>>({\n+    status: 'NOT_ASKED'\n+  });\n+\n+  const loadExecutions = useCallback(() => {\n+    let isMounted = true;\n+    setExecutions({ status: 'LOADING' });\n+    getExecutions(searchString, from, to, limit, offset)\n+      .then(response => {\n+        if (isMounted) {\n+          setExecutions({ status: 'SUCCESS', data: response.data });\n+        }\n+      })\n+      .catch(error => {\n+        if (!isCancelledRequest(error)) {\n+          setExecutions({ status: 'FAILURE', error });\n+        }\n+      });\n+    return () => {\n+      isMounted = false;\n+    };\n+  }, [searchString, from, to, limit, offset]);\n+\n+  useEffect(() => {\n+    loadExecutions();", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NzkxOQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463557919", "bodyText": "I am not sure about it. I am exporting the callback because it's needed for refreshing data. I am afraid I cannot inline it.", "author": "kelvah", "createdAt": "2020-07-31T11:31:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNzg1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMxMDY5Ng==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462310696", "bodyText": "Nice use of the isMounted variable check. If I can push a little bit, maybe you can create a custom Hook for all request types, so that you don't have to repeat this logic for every request.", "author": "tiagobento", "createdAt": "2020-07-29T13:46:27Z", "path": "ui-packages/packages/trusty/src/components/Templates/AuditOverview/useExecutions.tsx", "diffHunk": "@@ -0,0 +1,43 @@\n+import { useCallback, useEffect, useState } from 'react';\n+import { getExecutions } from '../../../utils/api/auditApi';\n+import { isCancelledRequest } from '../../../utils/api/httpClient';\n+import { RemoteData, IExecutions } from '../../../types';\n+\n+const useExecutions = (\n+  searchString: string,\n+  from: string,\n+  to: string,\n+  limit: number,\n+  offset: number\n+) => {\n+  const [executions, setExecutions] = useState<RemoteData<Error, IExecutions>>({\n+    status: 'NOT_ASKED'\n+  });\n+\n+  const loadExecutions = useCallback(() => {\n+    let isMounted = true;\n+    setExecutions({ status: 'LOADING' });\n+    getExecutions(searchString, from, to, limit, offset)\n+      .then(response => {\n+        if (isMounted) {\n+          setExecutions({ status: 'SUCCESS', data: response.data });\n+        }\n+      })\n+      .catch(error => {\n+        if (!isCancelledRequest(error)) {\n+          setExecutions({ status: 'FAILURE', error });\n+        }\n+      });\n+    return () => {\n+      isMounted = false;\n+    };", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMxMTAwMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462311002", "bodyText": "This is just a suggestion, though. I think it would improve readability of code making requests.", "author": "tiagobento", "createdAt": "2020-07-29T13:46:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMxMDY5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1ODk5NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463558995", "bodyText": "Yes, I've been thinking about it. I am moving ajax calls inside dedicated hooks while migrating the code for the PR's and it could help. I am also thinking about getting rid of the auditApi.ts wrappers if every ajax call will be confined in its custom hook. It seems a useless abstraction now.", "author": "kelvah", "createdAt": "2020-07-31T11:34:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMxMDY5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzODEzMw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462338133", "bodyText": "I see you reformatted the code here without changes. Could it be that you're not using Prettier as the formatter? I see that you have prettier configured for this repository. Please check that.", "author": "tiagobento", "createdAt": "2020-07-29T14:22:20Z", "path": "ui-packages/packages/trusty/src/index.css", "diffHunk": "@@ -1,18 +1,20 @@\n body {\n-    margin: 0;\n-    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\",\n-    \"Droid Sans\", \"Helvetica Neue\", sans-serif;\n-    -webkit-font-smoothing: antialiased;\n-    -moz-osx-font-smoothing: grayscale;\n+  margin: 0;\n+  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n+    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n+    sans-serif;\n+  -webkit-font-smoothing: antialiased;\n+  -moz-osx-font-smoothing: grayscale;\n }\n \n code {\n-    font-family: source-code-pro, Menlo, Monaco, Consolas, \"Courier New\", monospace;\n+  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n+    monospace;", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU2MjE5NA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463562194", "bodyText": "Probably index.css was not formatted on the first PR for some reason. Maybe I did not set Prettier to run on .css files from the start. Now it does.", "author": "kelvah", "createdAt": "2020-07-31T11:42:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzODEzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzODU4Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462338582", "bodyText": "Any particular reason for these not be called Execution and Executions?", "author": "tiagobento", "createdAt": "2020-07-29T14:22:57Z", "path": "ui-packages/packages/trusty/src/types.ts", "diffHunk": "@@ -0,0 +1,19 @@\n+export type RemoteData<E, D> =\n+  | { status: 'NOT_ASKED' }\n+  | { status: 'LOADING' }\n+  | { status: 'FAILURE'; error: E }\n+  | { status: 'SUCCESS'; data: D };\n+\n+export interface IExecution {\n+  executionId: string;\n+  executionDate: string;\n+  executedModelName: string;\n+  executionType: string;\n+  executionSucceeded: boolean;\n+  executorName: string;\n+}\n+\n+export interface IExecutions {\n+  headers: IExecution[];\n+  total: number;\n+}", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU2MjY0MA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463562640", "bodyText": "No particular reason. I was following some common pattern of prefixing interfaces with I. Which honestly I don't like. Changed as suggested.", "author": "kelvah", "createdAt": "2020-07-31T11:44:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzODU4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzODk5OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462338998", "bodyText": "You can inline that.", "author": "tiagobento", "createdAt": "2020-07-29T14:23:29Z", "path": "ui-packages/packages/trusty/src/utils/api/auditApi.ts", "diffHunk": "@@ -0,0 +1,25 @@\n+import { callOnce } from './httpClient';\n+import { AxiosRequestConfig } from 'axios';\n+\n+const EXECUTIONS_PATH = '/executions';\n+\n+export const getExecutions = (\n+  searchString: string,\n+  from: string,\n+  to: string,\n+  limit: number,\n+  offset: number\n+) => {\n+  const config: AxiosRequestConfig = {\n+    url: EXECUTIONS_PATH,\n+    method: 'get',\n+    params: {\n+      search: searchString,\n+      from,\n+      to,\n+      limit,\n+      offset\n+    }\n+  };", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU2MzE0Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463563143", "bodyText": "Done.", "author": "kelvah", "createdAt": "2020-07-31T11:45:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzODk5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzOTg2OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462339869", "bodyText": "I think this function can be inlined. This indirection causes code reading to be more difficult, since its a code of your application, people will expect extra-behaviour. Instead, this is only an \"alias\" for axios.isCancel.", "author": "tiagobento", "createdAt": "2020-07-29T14:24:38Z", "path": "ui-packages/packages/trusty/src/utils/api/httpClient.ts", "diffHunk": "@@ -0,0 +1,23 @@\n+import axios, { AxiosRequestConfig, CancelTokenSource } from 'axios';\n+\n+const httpClient = axios.create({\n+  baseURL: process.env.KOGITO_TRUSTY_API_HTTP_URL,\n+  timeout: 5000,\n+  headers: {}\n+});\n+\n+let call: CancelTokenSource;\n+\n+const callOnce = (config: AxiosRequestConfig) => {\n+  if (call) {\n+    call.cancel('Request superseded');\n+  }\n+  call = axios.CancelToken.source();\n+\n+  config.cancelToken = call.token;\n+  return httpClient(config);\n+};\n+\n+const isCancelledRequest = axios.isCancel;", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU4MTY5Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463581692", "bodyText": "I am afraid I cannot inline it because it depends on the Axios instance. For now it's just an alias. It will eventually be gone with the custom hooks I was referring in the previous comment.", "author": "kelvah", "createdAt": "2020-07-31T12:29:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzOTg2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1NTAyMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r464555021", "bodyText": "Since you're importing axios directly from the library, I think you could simply do that in other places too, but if you already have plans to improve that in the future, I'm ok with that atm :)", "author": "tiagobento", "createdAt": "2020-08-03T17:26:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzOTg2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM0MDExMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462340111", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              if (call) {\n          \n          \n            \n                call.cancel('Request superseded');\n          \n          \n            \n              }\n          \n          \n            \n              call?.cancel('Request superseded');", "author": "tiagobento", "createdAt": "2020-07-29T14:24:56Z", "path": "ui-packages/packages/trusty/src/utils/api/httpClient.ts", "diffHunk": "@@ -0,0 +1,23 @@\n+import axios, { AxiosRequestConfig, CancelTokenSource } from 'axios';\n+\n+const httpClient = axios.create({\n+  baseURL: process.env.KOGITO_TRUSTY_API_HTTP_URL,\n+  timeout: 5000,\n+  headers: {}\n+});\n+\n+let call: CancelTokenSource;\n+\n+const callOnce = (config: AxiosRequestConfig) => {\n+  if (call) {\n+    call.cancel('Request superseded');\n+  }", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU2MzY0Ng==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463563646", "bodyText": "Cannot do optional chaining with the available version of TypeScript, sadly.", "author": "kelvah", "createdAt": "2020-07-31T11:46:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM0MDExMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1NTEzMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r464555132", "bodyText": "Oh :( Ok.", "author": "tiagobento", "createdAt": "2020-08-03T17:27:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM0MDExMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM0MTgxMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r462341811", "bodyText": "This is a global variable. We should avoid that at all costs, since they can be dangerous. Can you explain why you need this to be global?", "author": "tiagobento", "createdAt": "2020-07-29T14:27:05Z", "path": "ui-packages/packages/trusty/src/utils/api/httpClient.ts", "diffHunk": "@@ -0,0 +1,23 @@\n+import axios, { AxiosRequestConfig, CancelTokenSource } from 'axios';\n+\n+const httpClient = axios.create({\n+  baseURL: process.env.KOGITO_TRUSTY_API_HTTP_URL,\n+  timeout: 5000,\n+  headers: {}\n+});\n+\n+let call: CancelTokenSource;", "originalCommit": "d26e109310bf5abe161a067927dca6f0af0f71d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU5Mjk4MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r463592981", "bodyText": "I agree a module scoped variable is not the best solution. I will rewrite that together with the Axios handling I mentioned in the following PR.", "author": "kelvah", "createdAt": "2020-07-31T12:54:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM0MTgxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1NTI2NA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r464555264", "bodyText": "Ok, thx for letting me know!", "author": "tiagobento", "createdAt": "2020-08-03T17:27:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM0MTgxMQ=="}], "type": "inlineReview"}, {"oid": "ac03bcb7dd1b6fad45fd7b70b2de625216661276", "url": "https://github.com/kiegroup/kogito-apps/commit/ac03bcb7dd1b6fad45fd7b70b2de625216661276", "message": "KOGITO-2775 - Updates following review", "committedDate": "2020-07-31T11:15:04Z", "type": "commit"}, {"oid": "44be1551a5e553e8703e559896b944548f90acf8", "url": "https://github.com/kiegroup/kogito-apps/commit/44be1551a5e553e8703e559896b944548f90acf8", "message": "Merge branch 'master' into KOGITO-2775-add-trusty-audit-overview-section", "committedDate": "2020-08-11T12:46:51Z", "type": "commit"}, {"oid": "28a760d929039d37adca235ca3344e2de02ec21b", "url": "https://github.com/kiegroup/kogito-apps/commit/28a760d929039d37adca235ca3344e2de02ec21b", "message": "KOGITO-2775 Update to PatternFly 4", "committedDate": "2020-08-11T13:57:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1MTY0MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r468651641", "bodyText": "these snapshots seem redundant as we're checking the span content below.", "author": "jstastny-cz", "createdAt": "2020-08-11T15:03:51Z", "path": "ui-packages/packages/trusty/src/components/Atoms/FormattedDate/tests/FormattedDate.test.tsx", "diffHunk": "@@ -0,0 +1,53 @@\n+import React from 'react';\n+import { shallow } from 'enzyme';\n+import FormattedDate from '../FormattedDate';\n+import { format } from 'date-fns';\n+\n+describe('FormattedDate', () => {\n+  test('displays a formatted date', () => {\n+    const wrapper = shallow(<FormattedDate date=\"2020-01-01\" />);\n+\n+    expect(wrapper).toMatchSnapshot();\n+    expect(wrapper.find('span').text()).toMatch('Jan 1, 2020');\n+  });\n+\n+  test('renders a tooltip with the complete date and time info', () => {\n+    const initialDate = '2020-01-01';\n+    const wrapper = shallow(<FormattedDate date={initialDate} />);\n+    const tooltip = wrapper.find('Tooltip');\n+    const fullDate = format(new Date(initialDate), 'PPpp');\n+\n+    expect(wrapper).toMatchSnapshot();\n+    expect(wrapper.find('span').text()).toMatch('Jan 1, 2020');\n+    expect(tooltip.length).toBe(1);\n+    expect(tooltip.props().content).toMatch(fullDate);\n+  });\n+\n+  test('displays the \"on\" preposition before the date when preposition prop is passed', () => {\n+    const wrapper = shallow(<FormattedDate date=\"2020-01-01\" preposition />);\n+\n+    expect(wrapper).toMatchSnapshot();\n+    expect(wrapper.find('span').text()).toMatch('on Jan 1, 2020');\n+  });\n+\n+  test('displays full date and time when fullDateAndTime prop is passed', () => {\n+    const wrapper = shallow(\n+      <FormattedDate date=\"2020-01-01\" fullDateAndTime />\n+    );\n+\n+    expect(wrapper).toMatchSnapshot();\n+    expect(wrapper.find('Tooltip').length).toBe(0);\n+    expect(wrapper.find('span').text()).toMatch('Jan 1, 2020, 12:00:00 AM');\n+  });\n+\n+  test('displays a relative timestamp if the date is in the last 24h', () => {\n+    const fixedDate = '2020-01-01T00:00:00.000Z';\n+    jest\n+      .spyOn(global.Date, 'now')\n+      .mockImplementation(() => new Date(fixedDate).getTime());\n+    const wrapper = shallow(<FormattedDate date={fixedDate} />);\n+\n+    expect(wrapper).toMatchSnapshot();", "originalCommit": "28a760d929039d37adca235ca3344e2de02ec21b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE2MzMyMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r469163322", "bodyText": "I added them following your comment above \ud83d\ude2c\nI agree they are redundant. Should I remove them all?", "author": "kelvah", "createdAt": "2020-08-12T10:31:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1MTY0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE2NjgwNg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r469166806", "bodyText": "Ah! My bad. I am sorry. Is there any benefit in let's say keeping just a single snapshot check? So that we notice the possible change in how component is rendered, but keep the snapshot file small.", "author": "jstastny-cz", "createdAt": "2020-08-12T10:38:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1MTY0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTIyMzAyNg==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r469223026", "bodyText": "Ok, let's keep the first one, just to track eventual PatternFly updates on the tooltip.", "author": "kelvah", "createdAt": "2020-08-12T12:30:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1MTY0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1NDUxMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r468654511", "bodyText": "Is this a distinction between Tuesday and Thursday? (that's the only possible explanation I could come up with) Shouldn't similar workaround apply to Saturday vs. Sunday?", "author": "jstastny-cz", "createdAt": "2020-08-11T15:07:51Z", "path": "ui-packages/packages/trusty/src/components/Molecules/DatePicker/DatePicker.tsx", "diffHunk": "@@ -0,0 +1,72 @@\n+import React, { useEffect, useRef } from 'react';\n+import { InputGroup, TextInput } from '@patternfly/react-core';\n+import flatpickr from 'flatpickr';\n+import { Instance as flatpickrInstance } from 'flatpickr/dist/types/instance';\n+import leftArrow from '../../../../static/images/leftArrow.svg';\n+import rightArrow from '../../../../static/images/rightArrow.svg';\n+import './DatePicker.scss';\n+\n+type DatePickerProps = {\n+  fromDate?: string;\n+  id: string;\n+  label?: string;\n+  minDate?: string;\n+  maxDate?: string;\n+  onDateUpdate: (date: string) => void;\n+  value?: string;\n+};\n+\n+const DatePicker = (props: DatePickerProps) => {\n+  const { fromDate, minDate, maxDate, value, onDateUpdate, id, label } = props;\n+  const datePicker = useRef<HTMLInputElement>();\n+\n+  useEffect(() => {\n+    let calendar: flatpickrInstance;\n+    const onChange = (selectedDates: Date[], dateStr: string) => {\n+      onDateUpdate(dateStr);\n+    };\n+    if (datePicker.current) {\n+      calendar = flatpickr(datePicker.current, {\n+        allowInput: true,\n+        altInput: true,\n+        altFormat: 'F j, Y',\n+        dateFormat: 'Y-m-d',\n+        defaultDate: value,\n+        minDate,\n+        maxDate,\n+        monthSelectorType: 'static',\n+        onChange,\n+        prevArrow: `<img alt=\"Prev\" src=\"${leftArrow}\">`,\n+        nextArrow: `<img alt=\"Next\" src=\"${rightArrow}\">`,\n+        static: true\n+      });\n+    }\n+    return () => {\n+      calendar.destroy();\n+    };\n+  }, [fromDate, maxDate, onDateUpdate, minDate, value, id]);\n+\n+  return (\n+    <InputGroup>\n+      <TextInput\n+        name={id}\n+        id={id}\n+        type=\"date\"\n+        aria-label={label}\n+        ref={datePicker}\n+      />\n+    </InputGroup>\n+  );\n+};\n+\n+export default DatePicker;\n+\n+export const datePickerSetup = () => {\n+  flatpickr.l10ns.en.weekdays.shorthand.forEach((day, index, daysArray) => {\n+    if (daysArray[index] === 'Thu' || daysArray[index] === 'Th') {", "originalCommit": "28a760d929039d37adca235ca3344e2de02ec21b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTIzMDI0OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/330#discussion_r469230248", "bodyText": "Yes, that's the reason. I don't know how I overlooked the same thing for Sat/Sun. Added disambiguation for that too.", "author": "kelvah", "createdAt": "2020-08-12T12:42:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODY1NDUxMQ=="}], "type": "inlineReview"}, {"oid": "51df921a90d9c5cd61fed016e5a45dcb871f3993", "url": "https://github.com/kiegroup/kogito-apps/commit/51df921a90d9c5cd61fed016e5a45dcb871f3993", "message": "KOGITO-2775 Updates following review", "committedDate": "2020-08-12T12:35:50Z", "type": "commit"}]}