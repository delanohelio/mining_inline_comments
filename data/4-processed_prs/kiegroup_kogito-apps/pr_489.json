{"pr_number": 489, "pr_title": "KOGITO-3138 Add job cancel option in jobs panel", "pr_createdAt": "2020-10-19T04:11:08Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/489", "timeline": [{"oid": "28c969840351a24180a6bac7c2f43cf2490a8fcd", "url": "https://github.com/kiegroup/kogito-apps/commit/28c969840351a24180a6bac7c2f43cf2490a8fcd", "message": "KOGITO-3138 Add job cancel option in jobs panel", "committedDate": "2020-10-19T06:22:48Z", "type": "commit"}, {"oid": "28c969840351a24180a6bac7c2f43cf2490a8fcd", "url": "https://github.com/kiegroup/kogito-apps/commit/28c969840351a24180a6bac7c2f43cf2490a8fcd", "message": "KOGITO-3138 Add job cancel option in jobs panel", "committedDate": "2020-10-19T06:22:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODY5MjM3Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/489#discussion_r508692377", "bodyText": "@AjayJagan Could be possible to unify the modals(at least for jobs, even I see this could be general purpose) as much as possible?  at least avoid to redefine the same header in every modal. Wdyt?", "author": "nmirasch", "createdAt": "2020-10-20T16:59:52Z", "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/JobsCancelModal.tsx", "diffHunk": "@@ -0,0 +1,57 @@\n+import React from 'react';\n+import {\n+  Modal,\n+  Title,\n+  Button,\n+  TextContent,\n+  Text,\n+  TitleSizes\n+} from '@patternfly/react-core';\n+import { OUIAProps, componentOuiaProps } from '@kogito-apps/common';\n+interface IOwnProps {\n+  actionType: string;\n+  modalTitle: JSX.Element;\n+  modalContent: string;\n+  handleModalToggle: () => void;\n+  isModalOpen: boolean;\n+}\n+const JobsCancelModal: React.FC<IOwnProps & OUIAProps> = ({\n+  actionType,\n+  modalContent,\n+  modalTitle,\n+  isModalOpen,\n+  handleModalToggle,\n+  ouiaId,\n+  ouiaSafe\n+}) => {\n+  return (\n+    <Modal\n+      variant=\"small\"\n+      title=\"\"\n+      header={\n+        <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>", "originalCommit": "28c969840351a24180a6bac7c2f43cf2490a8fcd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTIxMjMxMA==", "url": "https://github.com/kiegroup/kogito-apps/pull/489#discussion_r509212310", "bodyText": "@AjayJagan much better now, thanks!", "author": "nmirasch", "createdAt": "2020-10-21T11:49:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODY5MjM3Nw=="}], "type": "inlineReview"}, {"oid": "f08263934e5dff6898785bbc3920ba6d771211c9", "url": "https://github.com/kiegroup/kogito-apps/commit/f08263934e5dff6898785bbc3920ba6d771211c9", "message": "KOGITO-3138 added generic title component", "committedDate": "2020-10-21T08:53:12Z", "type": "forcePushed"}, {"oid": "f1fdc15dfb8cea7aad3c6091d24c4e51851a4317", "url": "https://github.com/kiegroup/kogito-apps/commit/f1fdc15dfb8cea7aad3c6091d24c4e51851a4317", "message": "KOGITO-3138 added generic title component", "committedDate": "2020-10-21T09:25:18Z", "type": "commit"}, {"oid": "f1fdc15dfb8cea7aad3c6091d24c4e51851a4317", "url": "https://github.com/kiegroup/kogito-apps/commit/f1fdc15dfb8cea7aad3c6091d24c4e51851a4317", "message": "KOGITO-3138 added generic title component", "committedDate": "2020-10-21T09:25:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkzOTEyNA==", "url": "https://github.com/kiegroup/kogito-apps/pull/489#discussion_r511939124", "bodyText": "further on we use spelling cancelled, it would be great to unify.", "author": "jstastny-cz", "createdAt": "2020-10-26T12:58:12Z", "path": "ui-packages/packages/management-console/server/MockData/controllers.js", "diffHunk": "@@ -167,5 +167,18 @@ module.exports = controller = {\n     } else {\n       res.send([])\n     }\n+  },\n+\n+  callJobCancel: (req, res) => {\n+    const mockFailedJobs = ['dad3aa88-5c1e-4858-a919-6123c675a0fa_0']\n+    const graphData = require('./graphql');\n+    const jobData = graphData.JobsData.filter(job => job.id === req.params.jobId);\n+    if (mockFailedJobs.includes(jobData[0].id) || jobData.length === 0) {\n+      res.status(404).send('job not found')\n+    } else {\n+      jobData[0].status = 'CANCELED';", "originalCommit": "f1fdc15dfb8cea7aad3c6091d24c4e51851a4317", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQwNTk3Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/489#discussion_r512405972", "bodyText": "changed the spelling", "author": "AjayJagan", "createdAt": "2020-10-27T04:12:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTkzOTEyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk0MDYyOA==", "url": "https://github.com/kiegroup/kogito-apps/pull/489#discussion_r511940628", "bodyText": "I would keep in sync with name of component.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  {...componentOuiaProps(ouiaId, 'job-cancel-modal', ouiaSafe)}\n          \n          \n            \n                  {...componentOuiaProps(ouiaId, 'jobs-cancel-modal', ouiaSafe)}", "author": "jstastny-cz", "createdAt": "2020-10-26T13:00:47Z", "path": "ui-packages/packages/management-console/src/components/Atoms/JobsCancelModal/JobsCancelModal.tsx", "diffHunk": "@@ -0,0 +1,46 @@\n+import React from 'react';\n+import { Modal, Button, TextContent, Text } from '@patternfly/react-core';\n+import { OUIAProps, componentOuiaProps } from '@kogito-apps/common';\n+interface IOwnProps {\n+  actionType: string;\n+  modalTitle: JSX.Element;\n+  modalContent: string;\n+  handleModalToggle: () => void;\n+  isModalOpen: boolean;\n+}\n+const JobsCancelModal: React.FC<IOwnProps & OUIAProps> = ({\n+  actionType,\n+  modalContent,\n+  modalTitle,\n+  isModalOpen,\n+  handleModalToggle,\n+  ouiaId,\n+  ouiaSafe\n+}) => {\n+  return (\n+    <Modal\n+      variant=\"small\"\n+      title=\"\"\n+      header={modalTitle}\n+      isOpen={isModalOpen}\n+      onClose={handleModalToggle}\n+      aria-label={`${actionType} Modal`}\n+      aria-labelledby={`${actionType} Modal`}\n+      actions={[\n+        <Button\n+          key=\"confirm-selection\"\n+          variant=\"primary\"\n+          onClick={handleModalToggle}\n+        >\n+          OK\n+        </Button>\n+      ]}\n+      {...componentOuiaProps(ouiaId, 'job-cancel-modal', ouiaSafe)}", "originalCommit": "f1fdc15dfb8cea7aad3c6091d24c4e51851a4317", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQwNTkzNw==", "url": "https://github.com/kiegroup/kogito-apps/pull/489#discussion_r512405937", "bodyText": "changed to jobs", "author": "AjayJagan", "createdAt": "2020-10-27T04:12:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk0MDYyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk0NDMyOQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/489#discussion_r511944329", "bodyText": "shouldn't we wrap the text at least to a span?", "author": "jstastny-cz", "createdAt": "2020-10-26T13:07:18Z", "path": "ui-packages/packages/management-console/src/utils/Utils.tsx", "diffHunk": "@@ -125,28 +126,33 @@ export const setTitle = (\n   titleStatus: string,\n   titleText: string\n ): JSX.Element => {\n+  let icon = null;\n+\n   switch (titleStatus) {\n     case 'success':\n-      return (\n-        <>\n-          <InfoCircleIcon\n-            className=\"pf-u-mr-sm\"\n-            color=\"var(--pf-global--info-color--100)\"\n-          />{' '}\n-          {titleText}{' '}\n-        </>\n+      icon = (\n+        <InfoCircleIcon\n+          className=\"pf-u-mr-sm\"\n+          color=\"var(--pf-global--info-color--100)\"\n+        />\n       );\n+      break;\n     case 'failure':\n-      return (\n-        <>\n-          <InfoCircleIcon\n-            className=\"pf-u-mr-sm\"\n-            color=\"var(--pf-global--danger-color--100)\"\n-          />{' '}\n-          {titleText}{' '}\n-        </>\n+      icon = (\n+        <InfoCircleIcon\n+          className=\"pf-u-mr-sm\"\n+          color=\"var(--pf-global--danger-color--100)\"\n+        />\n       );\n+      break;\n   }\n+\n+  return (\n+    <Title headingLevel=\"h1\" size={TitleSizes['2xl']}>\n+      {icon}\n+      {titleText}", "originalCommit": "f1fdc15dfb8cea7aad3c6091d24c4e51851a4317", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQwNTg4OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/489#discussion_r512405889", "bodyText": "wrapped in span :)", "author": "AjayJagan", "createdAt": "2020-10-27T04:11:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTk0NDMyOQ=="}], "type": "inlineReview"}, {"oid": "a1412ec990c80f4caab092b6003d2bacabfd81ff", "url": "https://github.com/kiegroup/kogito-apps/commit/a1412ec990c80f4caab092b6003d2bacabfd81ff", "message": "minor changes to improve code", "committedDate": "2020-10-27T04:10:29Z", "type": "commit"}]}