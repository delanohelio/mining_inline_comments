{"pr_number": 327, "pr_title": "KOGITO-2246: Add keycloak integration at quarkus management console App", "pr_createdAt": "2020-07-16T18:40:23Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/327", "timeline": [{"oid": "635cc56619e31da027c16c4e93b099e1d5d02f9b", "url": "https://github.com/kiegroup/kogito-apps/commit/635cc56619e31da027c16c4e93b099e1d5d02f9b", "message": "KOGITO-2246: Add keycloak integration at quarkus management console App", "committedDate": "2020-07-16T22:07:07Z", "type": "forcePushed"}, {"oid": "f51d0bbd6cd8b112f7f6a868304af3c4cb9be37f", "url": "https://github.com/kiegroup/kogito-apps/commit/f51d0bbd6cd8b112f7f6a868304af3c4cb9be37f", "message": "KOGITO-2246: Add keycloak integration at quarkus management console App", "committedDate": "2020-07-17T06:26:17Z", "type": "forcePushed"}, {"oid": "d6253cbb3ffa8c2885c7b2c1bbbb2c1794fb050c", "url": "https://github.com/kiegroup/kogito-apps/commit/d6253cbb3ffa8c2885c7b2c1bbbb2c1794fb050c", "message": "KOGITO-2246: Add keycloak integration at quarkus management console App", "committedDate": "2020-07-20T09:46:04Z", "type": "forcePushed"}, {"oid": "aa7b2e0bd7334648bb160994c93441aafffb77c2", "url": "https://github.com/kiegroup/kogito-apps/commit/aa7b2e0bd7334648bb160994c93441aafffb77c2", "message": "KOGITO-2246: Add keycloak integration at quarkus management console App", "committedDate": "2020-07-21T06:00:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU3Mzg2Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r459573862", "bodyText": "unsued?", "author": "cristianonicolai", "createdAt": "2020-07-23T16:24:32Z", "path": "management-console/src/main/java/org/kie/kogito/mgmt/VertxRouter.java", "diffHunk": "@@ -57,5 +77,8 @@ public void handle(RoutingContext context) {\n         }\n     }\n \n+    protected String getResource(){", "originalCommit": "aa7b2e0bd7334648bb160994c93441aafffb77c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU3NDc1Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r459574752", "bodyText": "@nmirasch do we need to redefine these properties here, but rely on default values instead?", "author": "cristianonicolai", "createdAt": "2020-07-23T16:25:51Z", "path": "management-console/src/main/resources/application.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+kogito.auth.enabled=false", "originalCommit": "aa7b2e0bd7334648bb160994c93441aafffb77c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "07bdff9b4a83220c2d5c1382c896d90f3b89cb6b", "url": "https://github.com/kiegroup/kogito-apps/commit/07bdff9b4a83220c2d5c1382c896d90f3b89cb6b", "message": "KOGITO-2246: removed keycloak conf parameters from application.properties. Added keycloakClient test check", "committedDate": "2020-07-24T08:40:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3MTQ0NA==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r464271444", "bodyText": "why \"kogito-quarkus-console\"? It sounds weird to me adding \"quarkus\", maybe just \"kogito-console\" or \"kogito-management-console\"?", "author": "Sgitario", "createdAt": "2020-08-03T08:36:47Z", "path": "config/kogito-realm.json", "diffHunk": "@@ -800,6 +800,63 @@\n         \"microprofile-jwt\"\n       ]\n     },\n+    {\n+      \"clientId\": \"kogito-quarkus-console\",", "originalCommit": "07bdff9b4a83220c2d5c1382c896d90f3b89cb6b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE0MjU5OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r465142599", "bodyText": "it's distinction between kogito-console client for react app and this one which is used when the react app is bundled into quarkus service. Would kogito-console-quarkus help?", "author": "jstastny-cz", "createdAt": "2020-08-04T15:36:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3MTQ0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3Mjc4Mw==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r464272783", "bodyText": "Missing the spaces after { and before }", "author": "Sgitario", "createdAt": "2020-08-03T08:39:29Z", "path": "ui-packages/packages/task-console/src/index.tsx", "diffHunk": "@@ -3,17 +3,16 @@ import ReactDOM from 'react-dom';\n import { BrowserRouter, Route, Switch } from 'react-router-dom';\n import ApolloClient from 'apollo-client';\n import { ApolloProvider } from 'react-apollo';\n-import Keycloak from 'keycloak-js';\n-import axios from 'axios';\n import '@patternfly/patternfly/patternfly.css';\n import { Nav, NavList, NavItem } from '@patternfly/react-core';\n import { HttpLink } from 'apollo-link-http';\n import { onError } from 'apollo-link-error';\n import { InMemoryCache, NormalizedCacheObject } from 'apollo-cache-inmemory';\n-import { ServerUnavailable } from '@kogito-apps/common';\n+import {appRenderWithAxiosInterceptorConfig, getToken, isAuthEnabled, ServerUnavailable} from '@kogito-apps/common';", "originalCommit": "07bdff9b4a83220c2d5c1382c896d90f3b89cb6b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3MjgzNA==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r464272834", "bodyText": "Missing the spaces after { and before }", "author": "Sgitario", "createdAt": "2020-08-03T08:39:36Z", "path": "ui-packages/packages/task-console/src/index.tsx", "diffHunk": "@@ -3,17 +3,16 @@ import ReactDOM from 'react-dom';\n import { BrowserRouter, Route, Switch } from 'react-router-dom';\n import ApolloClient from 'apollo-client';\n import { ApolloProvider } from 'react-apollo';\n-import Keycloak from 'keycloak-js';\n-import axios from 'axios';\n import '@patternfly/patternfly/patternfly.css';\n import { Nav, NavList, NavItem } from '@patternfly/react-core';\n import { HttpLink } from 'apollo-link-http';\n import { onError } from 'apollo-link-error';\n import { InMemoryCache, NormalizedCacheObject } from 'apollo-cache-inmemory';\n-import { ServerUnavailable } from '@kogito-apps/common';\n+import {appRenderWithAxiosInterceptorConfig, getToken, isAuthEnabled, ServerUnavailable} from '@kogito-apps/common';\n import PageLayout from './components/Templates/PageLayout/PageLayout';\n import TaskConsoleContextProvider from './context/TaskConsoleContext/TaskConsoleContextProvider';\n import taskConsoleLogo from './static/taskConsoleLogo.svg';\n+import {setContext} from \"apollo-link-context\";", "originalCommit": "07bdff9b4a83220c2d5c1382c896d90f3b89cb6b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3MzYwMQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r464273601", "bodyText": "Just a question, as part of this PR, I read kogito-management-console, kogito-task-console, kogito-quarkus-console and kogito-console, what is the difference among them? They are different names for the same compoment?", "author": "Sgitario", "createdAt": "2020-08-03T08:41:12Z", "path": "ui-packages/packages/task-console/webpack.common.js", "diffHunk": "@@ -17,7 +17,7 @@ module.exports = {\n       KOGITO_AUTH_ENABLED: false,\n       KOGITO_KEYCLOAK_REALM: 'kogito',\n       KOGITO_KEYCLOAK_URL: 'http://localhost:8280',\n-      KOGITO_KEYCLOAK_CLIENT_ID: 'kogito-task-console',\n+      KOGITO_KEYCLOAK_CLIENT_ID: 'kogito-console',", "originalCommit": "07bdff9b4a83220c2d5c1382c896d90f3b89cb6b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg1MjI2MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r464852261", "bodyText": "In this stage I keep two different clients for the consoles kogito-quarkus-console and kogito-console. The difference there is the port that they are able to manage:in  case of kogito-quarkus-console use http://localhost:8380 and the kogito-console use http://localhost:9000. As always, we are open to find a better naming that reflect this :-)", "author": "nmirasch", "createdAt": "2020-08-04T07:25:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3MzYwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE0OTc5MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r465149791", "bodyText": "I've already mentioned above, maybe kogito-console-quarkus would be a better choice for the latter.", "author": "jstastny-cz", "createdAt": "2020-08-04T15:46:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3MzYwMQ=="}], "type": "inlineReview"}, {"oid": "7ff43d575d2de8ff36928390f0b1ee11d527b9da", "url": "https://github.com/kiegroup/kogito-apps/commit/7ff43d575d2de8ff36928390f0b1ee11d527b9da", "message": "KOGITO-2246: Add keycloak integration at quarkus management console App", "committedDate": "2020-08-04T07:31:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE0NzI5OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/327#discussion_r465147299", "bodyText": "whitespace issues in those three lines around =", "author": "jstastny-cz", "createdAt": "2020-08-04T15:43:20Z", "path": "ui-packages/packages/management-console/src/index.html", "diffHunk": "@@ -9,6 +9,10 @@\n   </head>\n   <script>\n     window.DATA_INDEX_ENDPOINT = __DATA_INDEX_ENDPOINT__;\n+    window.KOGITO_AUTH_ENABLED = __KOGITO_AUTH_ENABLED__;\n+    window.KOGITO_AUTH_KEYCLOAK_REALM =__KOGITO_AUTH_KEYCLOAK_REALM__;\n+    window.KOGITO_AUTH_KEYCLOAK_URL=__KOGITO_AUTH_KEYCLOAK_URL__;\n+    window.KOGITO_AUTH_KEYCLOAK_CLIENT_ID=__KOGITO_AUTH_KEYCLOAK_CLIENT_ID__;", "originalCommit": "7ff43d575d2de8ff36928390f0b1ee11d527b9da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f05bbcd37db032651e8b109a764427d2b3e0e867", "url": "https://github.com/kiegroup/kogito-apps/commit/f05bbcd37db032651e8b109a764427d2b3e0e867", "message": "KOGITO-2246: Add keycloak integration at quarkus management console App", "committedDate": "2020-08-04T15:50:02Z", "type": "commit"}, {"oid": "bd400d40e351daa949a3fbf5710e3f7b1ea2ca6d", "url": "https://github.com/kiegroup/kogito-apps/commit/bd400d40e351daa949a3fbf5710e3f7b1ea2ca6d", "message": "KOGITO-2246: Rename keycloak clients and some whitespaces issues", "committedDate": "2020-08-04T16:04:10Z", "type": "commit"}, {"oid": "bd400d40e351daa949a3fbf5710e3f7b1ea2ca6d", "url": "https://github.com/kiegroup/kogito-apps/commit/bd400d40e351daa949a3fbf5710e3f7b1ea2ca6d", "message": "KOGITO-2246: Rename keycloak clients and some whitespaces issues", "committedDate": "2020-08-04T16:04:10Z", "type": "forcePushed"}]}