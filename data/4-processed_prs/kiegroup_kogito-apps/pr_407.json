{"pr_number": 407, "pr_title": "KOGITO-2174  implement sorting by column functionality for the generic task list component", "pr_createdAt": "2020-08-20T22:08:10Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/407", "timeline": [{"oid": "79a52dda5fd8f9a8c1d48b2d20af9160e7de2704", "url": "https://github.com/kiegroup/kogito-apps/commit/79a52dda5fd8f9a8c1d48b2d20af9160e7de2704", "message": "Implemented sorting by column functionality for DataTable component", "committedDate": "2020-08-20T21:12:45Z", "type": "commit"}, {"oid": "083c2591a3b82dbbfba15051272d886313f007f8", "url": "https://github.com/kiegroup/kogito-apps/commit/083c2591a3b82dbbfba15051272d886313f007f8", "message": "Clean up code format", "committedDate": "2020-08-20T21:13:54Z", "type": "commit"}, {"oid": "5490579a02243bf3a998102df81852119247687f", "url": "https://github.com/kiegroup/kogito-apps/commit/5490579a02243bf3a998102df81852119247687f", "message": "implement sorting functionality for DataTable component in Common module", "committedDate": "2020-08-20T21:15:37Z", "type": "commit"}, {"oid": "ad389f0ebb43f27cc839f6870ad6c8e8da1f1245", "url": "https://github.com/kiegroup/kogito-apps/commit/ad389f0ebb43f27cc839f6870ad6c8e8da1f1245", "message": "Update test cases", "committedDate": "2020-08-20T21:49:01Z", "type": "commit"}, {"oid": "bf0f210064f78f64d1df12610d65b7a1de714952", "url": "https://github.com/kiegroup/kogito-apps/commit/bf0f210064f78f64d1df12610d65b7a1de714952", "message": "update test cases", "committedDate": "2020-08-20T21:53:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM3MzcxMA==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r476373710", "bodyText": "I see here you are identifying the column by the target inner text, I think it reffers to the column label. Why not using the index to calculate the DataTableColumn from the cols and maybe pass that to the setOrderByObj func? Let's sync up today.", "author": "pefernan", "createdAt": "2020-08-25T11:25:47Z", "path": "ui-packages/packages/common/src/components/Organisms/DataTable/DataTable.tsx", "diffHunk": "@@ -116,6 +125,12 @@ const DataTable: React.FC<IOwnProps> = ({\n     }\n   }, [columnList]);\n \n+  const onSort = (event, index, direction) => {\n+    const sortingColumn = event.target.innerText.toLowerCase();", "originalCommit": "bf0f210064f78f64d1df12610d65b7a1de714952", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1MjI3OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r479452278", "bodyText": "@pefernan Thanks, I will do the change", "author": "yzhao583", "createdAt": "2020-08-28T17:51:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjM3MzcxMA=="}], "type": "inlineReview"}, {"oid": "a2ad7f10ef5df412bb6a14ada115633f737ff8d4", "url": "https://github.com/kiegroup/kogito-apps/commit/a2ad7f10ef5df412bb6a14ada115633f737ff8d4", "message": "Put sorting functionality into the container component", "committedDate": "2020-08-31T19:04:33Z", "type": "commit"}, {"oid": "31642c8d20cb3f3fa2c4665649b85fad3ceb9b12", "url": "https://github.com/kiegroup/kogito-apps/commit/31642c8d20cb3f3fa2c4665649b85fad3ceb9b12", "message": "Merge branch 'master' into KOGITO-2174--Implement-sorting-by-colum-functionality-for-the-Generic-Task-List-Component", "committedDate": "2020-08-31T19:20:35Z", "type": "commit"}, {"oid": "b9a4ca8440e946ab1eeb744e3062c376e03ef0d0", "url": "https://github.com/kiegroup/kogito-apps/commit/b9a4ca8440e946ab1eeb744e3062c376e03ef0d0", "message": "Reslove conflict", "committedDate": "2020-09-01T20:52:28Z", "type": "commit"}, {"oid": "3b432114fd442283febee4494acd07d29ee96bc0", "url": "https://github.com/kiegroup/kogito-apps/commit/3b432114fd442283febee4494acd07d29ee96bc0", "message": "update snapshot test", "committedDate": "2020-09-01T23:05:11Z", "type": "commit"}, {"oid": "89b516d04c021e67d249ae90fd9f44cd22d4947d", "url": "https://github.com/kiegroup/kogito-apps/commit/89b516d04c021e67d249ae90fd9f44cd22d4947d", "message": "Small modification and update snapshot tests", "committedDate": "2020-09-02T21:02:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQzMTA0MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r483431041", "bodyText": "there is no test for the component.", "author": "jstastny-cz", "createdAt": "2020-09-04T07:11:35Z", "path": "ui-packages/packages/task-console/src/components/Templates/DataListContainer/DataListContainer.tsx", "diffHunk": "@@ -0,0 +1,94 @@\n+import { Card, Grid, GridItem, PageSection } from '@patternfly/react-core';\n+import React, { useState, useEffect } from 'react';\n+import UserTaskPageHeader from '../../Molecules/UserTaskPageHeader/UserTaskPageHeader';\n+import DataToolbarComponent from '../../Molecules/DataListToolbar/DataListToolbar';\n+import './DataList.css';\n+import TaskList from '../../Organisms/TaskList/TaskList';\n+import {\n+  ouiaPageTypeAndObjectId,\n+  KogitoEmptyState,\n+  KogitoEmptyStateType,\n+  GraphQL,\n+  OUIAProps,\n+  componentOuiaProps\n+} from '@kogito-apps/common';\n+\n+const DataListContainer: React.FC<OUIAProps> = ({ ouiaId, ouiaSafe }) => {", "originalCommit": "89b516d04c021e67d249ae90fd9f44cd22d4947d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgxMDA1NA==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r485810054", "bodyText": "@jstastny-cz Thanks for the review! This is not a new component, and it will be deprecated soon. We will submit a PR to do the clean up once the Task Inbox is up.", "author": "yzhao583", "createdAt": "2020-09-09T17:56:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQzMTA0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQzMTgyMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r483431822", "bodyText": "I think the loading hasn't yet finished here, see the snapshot - it's in loading.", "author": "jstastny-cz", "createdAt": "2020-09-04T07:13:25Z", "path": "ui-packages/packages/task-console/src/components/Templates/UserTaskDataTableContainer/tests/UserTaskDataTableContainer.test.tsx", "diffHunk": "@@ -113,4 +114,32 @@ describe('UserTaskDataTableContainer component tests', () => {\n     expect(wrapper).toMatchSnapshot();\n     expect(GraphQL.useGetUserTasksByStatesQuery).toBeCalled();\n   });\n+\n+  it('The onSorting function should work correctly', async () => {\n+    GraphQL.useGetUserTasksByStatesQuery = jest.fn().mockReturnValue({\n+      loading: false,\n+      error: undefined,\n+      refetch: jest.fn(),\n+      networkStatus: 1\n+    });\n+\n+    const wrapper = await getWrapperAsync(\n+      <Router>\n+        <MockedProvider>\n+          <UserTaskDataTableContainer />\n+        </MockedProvider>\n+      </Router>,\n+      'UserTaskDataTableContainer'\n+    );\n+\n+    act(() => {\n+      wrapper\n+        .find(DataTable)\n+        .props()\n+        .onSorting(1, 'desc');\n+    });", "originalCommit": "89b516d04c021e67d249ae90fd9f44cd22d4947d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgxMDQzMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r485810432", "bodyText": "@jstastny-cz Oh thanks! I will update this.", "author": "yzhao583", "createdAt": "2020-09-09T17:57:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQzMTgyMg=="}], "type": "inlineReview"}, {"oid": "e790c0eb5cfd68f55444ee2d37bf2d7765425954", "url": "https://github.com/kiegroup/kogito-apps/commit/e790c0eb5cfd68f55444ee2d37bf2d7765425954", "message": "update snapshot tests", "committedDate": "2020-09-09T21:45:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIwMjA5MQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r486202091", "bodyText": "@yzhao583 looks like the KogitoSpiner isn't used on the test,", "author": "pefernan", "createdAt": "2020-09-10T09:36:14Z", "path": "ui-packages/packages/task-console/src/components/Templates/UserTaskDataTableContainer/tests/UserTaskDataTableContainer.test.tsx", "diffHunk": "@@ -1,8 +1,14 @@\n import React from 'react';\n import UserTaskDataTableContainer from '../UserTaskDataTableContainer';\n-import { getWrapperAsync, GraphQL } from '@kogito-apps/common';\n+import {\n+  getWrapperAsync,\n+  GraphQL,\n+  DataTable,\n+  KogitoSpinner", "originalCommit": "e790c0eb5cfd68f55444ee2d37bf2d7765425954", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU0Mzg4NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r486543885", "bodyText": "@pefernan Opps, sorry my bad. Updated.", "author": "yzhao583", "createdAt": "2020-09-10T18:19:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIwMjA5MQ=="}], "type": "inlineReview"}, {"oid": "2402199442be54ecd6372022b3a1d5655930b044", "url": "https://github.com/kiegroup/kogito-apps/commit/2402199442be54ecd6372022b3a1d5655930b044", "message": "Update snapshot test", "committedDate": "2020-09-10T18:18:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1OTYyMA==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r487759620", "bodyText": "@yzhao583 this changes should be also present on queries.tsx, otherwise they will be lost next time we run yarn codegen. I sent you instructions on the chat!", "author": "pefernan", "createdAt": "2020-09-14T09:02:15Z", "path": "ui-packages/packages/common/src/graphql/types.tsx", "diffHunk": "@@ -1677,8 +1678,11 @@ export namespace GraphQL {\n     GetInputFieldsFromTypeQueryVariables\n   >;\n   export const GetUserTasksByStatesDocument = gql`\n-    query getUserTasksByStates($state: [String!]) {\n-      UserTaskInstances(where: { state: { in: $state } }) {\n+    query getUserTasksByStates(\n+      $state: [String!]\n+      $orderBy: UserTaskInstanceOrderBy", "originalCommit": "2402199442be54ecd6372022b3a1d5655930b044", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIwNzcxOQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/407#discussion_r488207719", "bodyText": "@pefernan Thanks, the PR has been updated, please kindly review again.", "author": "yzhao583", "createdAt": "2020-09-14T20:42:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1OTYyMA=="}], "type": "inlineReview"}, {"oid": "76a23c65c1f725599d6aeef1bf69c515de02cb9b", "url": "https://github.com/kiegroup/kogito-apps/commit/76a23c65c1f725599d6aeef1bf69c515de02cb9b", "message": "modify query", "committedDate": "2020-09-14T20:40:55Z", "type": "commit"}]}