{"pr_number": 417, "pr_title": "KOGITO-2777 Add trustyAI input-data and model-lookup sections", "pr_createdAt": "2020-08-26T15:57:01Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/417", "timeline": [{"oid": "5778a78ab8687968cae67b30b83602609c805ba6", "url": "https://github.com/kiegroup/kogito-apps/commit/5778a78ab8687968cae67b30b83602609c805ba6", "message": "KOGITO-2777 Added InputData and ModelLookup routes and components", "committedDate": "2020-08-26T15:19:02Z", "type": "commit"}, {"oid": "fdb4f4e0b1771459a596d1c0fe0f0f04da3a3a45", "url": "https://github.com/kiegroup/kogito-apps/commit/fdb4f4e0b1771459a596d1c0fe0f0f04da3a3a45", "message": "KOGITO-2777 Added useModelData hook", "committedDate": "2020-08-26T15:19:05Z", "type": "commit"}, {"oid": "3e716ec51a50d31a4e49d6835f1a159643dbb715", "url": "https://github.com/kiegroup/kogito-apps/commit/3e716ec51a50d31a4e49d6835f1a159643dbb715", "message": "KOGITO-2777 Added ModelDiagram and pmml viewer", "committedDate": "2020-08-26T15:19:09Z", "type": "commit"}, {"oid": "ad2d3a900133a9ae5f0ce7322fedc66160c5abde", "url": "https://github.com/kiegroup/kogito-apps/commit/ad2d3a900133a9ae5f0ce7322fedc66160c5abde", "message": "KOGITO-2777 Added tests for ModelLookup", "committedDate": "2020-08-26T15:19:14Z", "type": "commit"}, {"oid": "b6f3b7950b7918c3e5bb05ef2603eaf942d60758", "url": "https://github.com/kiegroup/kogito-apps/commit/b6f3b7950b7918c3e5bb05ef2603eaf942d60758", "message": "KOGITO-2777 Updated prepare script and yarn.lock", "committedDate": "2020-08-26T15:49:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQzNTgyNg==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r477435826", "bodyText": "This really old PatternFly version is required by @kogito-tooling/embedded-editor. Its usage is confined to the iframe of the embedded editor.", "author": "kelvah", "createdAt": "2020-08-26T16:36:00Z", "path": "ui-packages/yarn.lock", "diffHunk": "@@ -2748,6 +2806,11 @@\n   dependencies:\n     \"@types/node\" \">= 8\"\n \n+\"@patternfly/patternfly@2.71.5\":\n+  version \"2.71.5\"\n+  resolved \"https://registry.yarnpkg.com/@patternfly/patternfly/-/patternfly-2.71.5.tgz#db096c07cf3478a3c05f9020e3cd16be9c098be2\"\n+  integrity sha512-kkPVr+B9UKDeko8F31RzO7g1ecMbp4rVVQhg6X95rrzPd9mqBC8TGuwhyXnnHCbSAyNyqsp+ldGhDMsN5yMPiw==\n+", "originalCommit": "b6f3b7950b7918c3e5bb05ef2603eaf942d60758", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODMzOTE5Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478339192", "bodyText": "We can probably move kogito-apps/ui-packages/packages/trusty to @kogito-tooling/embedded-editor@0.6.1\nThis uses @patternfly/patternfly@4.16.7 see here.\nI'll try it locally first.", "author": "manstis", "createdAt": "2020-08-27T11:14:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQzNTgyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMDg0Nw==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478420847", "bodyText": "Can you walk me through this? When is/should be the prepare script being used?", "author": "jstastny-cz", "createdAt": "2020-08-27T13:31:14Z", "path": "ui-packages/packages/trusty/package.json", "diffHunk": "@@ -27,9 +29,13 @@\n     \"test:coverage\": \"yarn test --coverage\",\n     \"test:watch\": \"jest --watch\",\n     \"lint\": \"tslint -c ./tslint.json --project . './src/**/*.ts{,x}'\",\n+    \"prepare\": \"yarn run copy-embedded-editor\",", "originalCommit": "b6f3b7950b7918c3e5bb05ef2603eaf942d60758", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODUwOTEyNg==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478509126", "bodyText": "The prepare script is one of the predefined npm life-cycle scripts. It gets executed automatically after the install script. Which is the right moment to extract the embedded editor.", "author": "kelvah", "createdAt": "2020-08-27T15:32:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMDg0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE0MzI5OQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r480143299", "bodyText": "Ah, so this will run on each build of the ui-packages maven module, right?\nThat might lead to excessive time needed for build of unrelated projects (e.g. management-console), when they're being run separately. I am not aware of the details here, regarding the size of downloaded artifact or how the changes affect the build speed - please provide your view.\nThe current setup is the following:\n\nui-packages - maven project to build ALL the UI packages using yarn\nquarkus-apps (e.g. kogito-apps/management-console) that take the bundle from ui-packages/packages/management-console/dist and creating a executable jar.\nthe quarkus app has maven dependency on ui-packages to build the react apps first when building just a single module instead of whole repo - that's when the build time takes the hit.\n\nIf we decide this change is affecting our build time in local dev workflow (not sure if anyone actually works with the project that way) we can deal with this in a separate enhancement.", "author": "jstastny-cz", "createdAt": "2020-08-31T13:48:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMDg0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDIwMDA4NA==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r480200084", "bodyText": "Yes, it will run on each build of ui-packages.\nI don't see any performance issue though. The prepare script is way faster then the install one for example.\nIt takes ~2s on my local env.", "author": "kelvah", "createdAt": "2020-08-31T15:17:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMDg0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDkyNDIxNg==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r480924216", "bodyText": "that might be due to the fact it is cached (maven command using -nsu).\nJust checked the PR check - in clean environment the kie-bc-editors-unpacked maven build takes  17.100 s , that seems reasonable. As I mentioned, it can be tweaked later.\nThanks for the explanation.", "author": "jstastny-cz", "createdAt": "2020-09-01T07:36:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMDg0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMjQzNw==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478422437", "bodyText": "Hm, is there any other reason for this pom than downloading the editor war file? Should the packaging be still jar? I'd say pom could be enough ...", "author": "jstastny-cz", "createdAt": "2020-08-27T13:33:36Z", "path": "ui-packages/packages/trusty/pom.xml", "diffHunk": "@@ -0,0 +1,159 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+  ~\n+  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n+  ~ you may not use this file except in compliance with the License.\n+  ~ You may obtain a copy of the License at\n+  ~\n+  ~        http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>kie-bc-editors-unpacked</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <packaging>jar</packaging>\n+    <version>0.0.0</version>", "originalCommit": "b6f3b7950b7918c3e5bb05ef2603eaf942d60758", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU4MDAxNQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478580015", "bodyText": "This copies the approach (100%) in kogito-tooling. See here. If there are recommendations to be made that can be applied across all of this type of use-case I think a JIRA reporting the issue and proposing a solution would be great.", "author": "manstis", "createdAt": "2020-08-27T17:26:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMjQzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNjE5NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478426195", "bodyText": "I don't see any particular problem right now, just such configuration can cause problems in future.", "author": "jstastny-cz", "createdAt": "2020-08-27T13:39:14Z", "path": "ui-packages/packages/trusty/pom.xml", "diffHunk": "@@ -0,0 +1,159 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+  ~\n+  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n+  ~ you may not use this file except in compliance with the License.\n+  ~ You may obtain a copy of the License at\n+  ~\n+  ~        http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>kie-bc-editors-unpacked</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <packaging>jar</packaging>\n+    <version>0.0.0</version>\n+\n+    <repositories>\n+        <repository>\n+            <id>JBoss Nexus</id>\n+            <url>https://repository.jboss.org/nexus/content/groups/public</url>", "originalCommit": "b6f3b7950b7918c3e5bb05ef2603eaf942d60758", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNzAwMA==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478427000", "bodyText": "this version needs to be explicitly updated, no automated update happens when the project moves between versions. Just checking if that's desirable.", "author": "jstastny-cz", "createdAt": "2020-08-27T13:40:28Z", "path": "ui-packages/packages/trusty/pom.xml", "diffHunk": "@@ -0,0 +1,159 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+  ~\n+  ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n+  ~ you may not use this file except in compliance with the License.\n+  ~ You may obtain a copy of the License at\n+  ~\n+  ~        http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>kie-bc-editors-unpacked</artifactId>\n+    <groupId>org.kie.kogito</groupId>\n+    <packaging>jar</packaging>\n+    <version>0.0.0</version>\n+\n+    <repositories>\n+        <repository>\n+            <id>JBoss Nexus</id>\n+            <url>https://repository.jboss.org/nexus/content/groups/public</url>\n+            <snapshots>\n+                <enabled>true</enabled>\n+                <updatePolicy>always</updatePolicy>\n+            </snapshots>\n+        </repository>\n+    </repositories>\n+\n+    <properties>\n+        <version.dmn.webapp>7.39.0-SNAPSHOT</version.dmn.webapp>", "originalCommit": "b6f3b7950b7918c3e5bb05ef2603eaf942d60758", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU4MTE3NA==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478581174", "bodyText": "Correct.. and it's probably not a bad thing; as trusty can tie itself to a stable editor release if needed.\nkogito-tooling takes an identical approach (updating the version as needed). See here.\nAdmittedly we could probably move to 7.42.0-SNAPSHOT in this PR.", "author": "manstis", "createdAt": "2020-08-27T17:28:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNzAwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDEzMzM4Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r480133382", "bodyText": "Thanks for clarifying, I'll leave to you the decision which version to have here.", "author": "jstastny-cz", "createdAt": "2020-08-31T13:32:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyNzAwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQzMDc5Ng==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478430796", "bodyText": "Please comment with any reservations to the current lint settings in KOGITO-3189.", "author": "jstastny-cz", "createdAt": "2020-08-27T13:45:41Z", "path": "ui-packages/packages/trusty/src/components/Organisms/ModelDiagram/pmml/LinearRegressionView.tsx", "diffHunk": "@@ -0,0 +1,133 @@\n+import React from 'react';\n+import {\n+  Chart,\n+  ChartLabel,\n+  ChartAxis,\n+  ChartGroup,\n+  ChartLine,\n+  ChartVoronoiContainer\n+} from '@patternfly/react-charts';\n+\n+class Line {\n+  // y=mx+c\n+  readonly m: number;\n+  readonly c: number;\n+  readonly title: string;\n+\n+  constructor(m: number, c: number, title: string) {\n+    this.m = m;\n+    this.c = c;\n+    this.title = title;\n+  }\n+}\n+\n+// tslint:disable-next-line:max-classes-per-file", "originalCommit": "b6f3b7950b7918c3e5bb05ef2603eaf942d60758", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ0Nzk3Ng==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478447976", "bodyText": "the status field is not from axios here? cause there it's defined as number ...", "author": "jstastny-cz", "createdAt": "2020-08-27T14:09:20Z", "path": "ui-packages/packages/trusty/src/components/Templates/InputData/useInputData.tsx", "diffHunk": "@@ -0,0 +1,35 @@\n+import { useEffect, useState } from 'react';\n+import { RemoteData, ItemObject } from '../../../types';\n+import { AxiosRequestConfig } from 'axios';\n+import { EXECUTIONS_PATH, httpClient } from '../../../utils/api/httpClient';\n+\n+const useInputData = (executionId: string) => {\n+  const [inputData, setInputData] = useState<RemoteData<Error, ItemObject[]>>({\n+    status: 'NOT_ASKED'\n+  });\n+\n+  useEffect(() => {\n+    let isMounted = true;\n+    const config: AxiosRequestConfig = {\n+      url: `${EXECUTIONS_PATH}/decisions/${executionId}/structuredInputs`,\n+      method: 'get'\n+    };\n+    setInputData({ status: 'LOADING' });\n+    httpClient(config)\n+      .then(response => {\n+        if (isMounted) {\n+          setInputData({ status: 'SUCCESS', data: response.data.inputs });", "originalCommit": "b6f3b7950b7918c3e5bb05ef2603eaf942d60758", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODUxMzAwNA==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r478513004", "bodyText": "Almost. Here the status field is a different one used to save the request status inside setInputData. The instruction is inside the then callback, which is executed when the request succeeds.", "author": "kelvah", "createdAt": "2020-08-27T15:37:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ0Nzk3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDEzMjY2NQ==", "url": "https://github.com/kiegroup/kogito-apps/pull/417#discussion_r480132665", "bodyText": "Ah, ok, resolving the comment then.", "author": "jstastny-cz", "createdAt": "2020-08-31T13:31:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ0Nzk3Ng=="}], "type": "inlineReview"}, {"oid": "79877a4ebd46bb4fa2754cbab2da432cdceb2b1b", "url": "https://github.com/kiegroup/kogito-apps/commit/79877a4ebd46bb4fa2754cbab2da432cdceb2b1b", "message": "KOGITO-2777 Updated @kogito-tooling/embedded-editor to latest version", "committedDate": "2020-08-27T15:26:25Z", "type": "commit"}, {"oid": "65f6995a83ba2e8e66b06a480912502d89965510", "url": "https://github.com/kiegroup/kogito-apps/commit/65f6995a83ba2e8e66b06a480912502d89965510", "message": "KOGITO-2777 Added prepare script to root package.json", "committedDate": "2020-08-27T15:26:52Z", "type": "commit"}, {"oid": "847a2c43f5a9182d4155fdec30eb52e0a191945f", "url": "https://github.com/kiegroup/kogito-apps/commit/847a2c43f5a9182d4155fdec30eb52e0a191945f", "message": "KOGITO-2777 Removed pmml linear regression model viewer", "committedDate": "2020-08-31T08:41:36Z", "type": "commit"}]}