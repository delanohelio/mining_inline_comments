{"pr_number": 107, "pr_title": "KOGITO-1293: Handled 404 error and URL parameters", "pr_createdAt": "2020-03-17T10:51:23Z", "pr_url": "https://github.com/kiegroup/kogito-apps/pull/107", "timeline": [{"oid": "625be3be3eaa51fb1413ab9eba272d9abdaa2cb7", "url": "https://github.com/kiegroup/kogito-apps/commit/625be3be3eaa51fb1413ab9eba272d9abdaa2cb7", "message": "KOGITO-1293: Handled 404 error and URL parameters", "committedDate": "2020-03-18T13:18:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2NDU3Mg==", "url": "https://github.com/kiegroup/kogito-apps/pull/107#discussion_r394764572", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          Go to process list\n          \n          \n            \n                          Go to Process Instances", "author": "cristianonicolai", "createdAt": "2020-03-19T03:00:57Z", "path": "packages/management-console/src/components/Molecules/ErrorComponent/ErrorComponent.tsx", "diffHunk": "@@ -1,52 +1,56 @@\n import React, { useState } from 'react';\n import {\n   PageSection,\n-  TextContent,\n-  Text,\n-  TextVariants,\n   Bullseye,\n+  EmptyState,\n+  EmptyStateIcon,\n+  EmptyStateVariant,\n   Button,\n-  Flex,\n-  FlexItem,\n-  FlexModifiers\n+  EmptyStateBody,\n+  Title\n } from '@patternfly/react-core';\n+import {\n+  ExclamationCircleIcon\n+} from '@patternfly/react-icons';\n import { Redirect } from 'react-router';\n \n-const ErrorComponent = () => {\n+const ErrorComponent = (props) => {\n+  let prevPath;\n+  if (props.location.state !== undefined) {\n+    prevPath = props.location.state.prev;\n+  } else {\n+    prevPath = '/ProcessInstances'\n+  }\n+\n+  const tempPath = prevPath.split('/');\n+  prevPath = tempPath.filter(item => item)\n+\n   const [isRedirect, setIsredirect] = useState(false);\n   const redirectHandler = () => {\n     setIsredirect(true);\n   };\n   return (\n     <>\n-      {isRedirect && <Redirect to=\"/DomainExplorer\" />}\n+      {isRedirect && <Redirect to={`/${prevPath[0]}`} />}\n       <PageSection variant=\"light\">\n         <Bullseye>\n-          <Flex breakpointMods={[{ modifier: FlexModifiers.column }]}>\n-            <FlexItem>\n-              <TextContent>\n-                <Text component={TextVariants.h1}>404 - PAGE NOT FOUND</Text>\n-                <br />\n-                <Text component={TextVariants.p}>\n-                  Oops! This page could not be found\n-                </Text>\n-                <Text component={TextVariants.small}>\n-                  Sorry you cannot view this page, as the URL you have enter is\n-                  incorrect\n-                </Text>\n-              </TextContent>\n-            </FlexItem>\n-            <br />\n-            <FlexItem>\n-              <Button variant=\"primary\" onClick={redirectHandler}>\n-                Go Back\n-              </Button>\n-            </FlexItem>\n-          </Flex>\n+          <EmptyState variant={EmptyStateVariant.full}>\n+            <EmptyStateIcon\n+              icon={ExclamationCircleIcon}\n+              size=\"md\"\n+              color=\"var(--pf-global--danger-color--100)\" />\n+            <Title headingLevel=\"h1\" size=\"4xl\">404\u00a0Error:\u00a0page\u00a0not\u00a0found</Title>\n+            <EmptyStateBody>\n+              This\u00a0page\u00a0could\u00a0not\u00a0be\u00a0found.\n+            </EmptyStateBody>\n+            <Button variant=\"primary\" onClick={redirectHandler}>\n+              Go to process list", "originalCommit": "625be3be3eaa51fb1413ab9eba272d9abdaa2cb7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2NDc1Ng==", "url": "https://github.com/kiegroup/kogito-apps/pull/107#discussion_r394764756", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      buttonText: 'Go to domain list'\n          \n          \n            \n                      buttonText: 'Go to Domain Explorer'", "author": "cristianonicolai", "createdAt": "2020-03-19T03:01:48Z", "path": "packages/management-console/src/components/Templates/DomainExplorerDashboard/DomainExplorerDashboard.tsx", "diffHunk": "@@ -184,7 +184,13 @@ const DomainExplorerDashboard = props => {\n \n   return (\n     <>\n-      {!props.domains.includes(domainName) && <Redirect to=\"/ErrorComponent\" />}\n+      {!props.domains.includes(domainName) && <Redirect to={{\n+        pathname: '/NoData', state: {\n+          prev: location.pathname,\n+          title: 'Domain\u00a0not\u00a0found', description: `Domain\u00a0with\u00a0the\u00a0name\u00a0${domainName}\u00a0not\u00a0found`,\n+          buttonText: 'Go to domain list'", "originalCommit": "625be3be3eaa51fb1413ab9eba272d9abdaa2cb7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2NDgzMg==", "url": "https://github.com/kiegroup/kogito-apps/pull/107#discussion_r394764832", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      buttonText: 'Go to process list'\n          \n          \n            \n                      buttonText: 'Go to Process Instances'", "author": "cristianonicolai", "createdAt": "2020-03-19T03:02:12Z", "path": "packages/management-console/src/components/Templates/ProcessDetailsPage/ProcessDetailsPage.tsx", "diffHunk": "@@ -23,6 +23,19 @@ const ProcessDetailsPage = ({ match }) => {\n     variables: { id }\n   });\n \n+  if (data) {\n+    const result = data.ProcessInstances;\n+    if (result.length === 0) {\n+      return <Redirect to={{\n+        pathname: '/NoData', state: {\n+          prev: location.pathname,\n+          title: 'Process\u00a0not\u00a0found', description: `Process\u00a0instance\u00a0with\u00a0the\u00a0id\u00a0${id}\u00a0not\u00a0found`,\n+          buttonText: 'Go to process list'", "originalCommit": "625be3be3eaa51fb1413ab9eba272d9abdaa2cb7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc2NDk0OA==", "url": "https://github.com/kiegroup/kogito-apps/pull/107#discussion_r394764948", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        {props.location.state? props.location.state.buttonText : 'Navigate\u00a0to\u00a0home'}\n          \n          \n            \n                                        {props.location.state? props.location.state.buttonText : 'Go to Process Instances'}", "author": "cristianonicolai", "createdAt": "2020-03-19T03:02:44Z", "path": "packages/management-console/src/components/Molecules/NoDataComponent/NoDataComponent.tsx", "diffHunk": "@@ -0,0 +1,53 @@\n+import React, { useState } from 'react';\n+import {\n+    PageSection,\n+    Bullseye,\n+    EmptyState,\n+    EmptyStateIcon,\n+    EmptyStateVariant,\n+    Button,\n+    EmptyStateBody,\n+    Title,\n+} from '@patternfly/react-core';\n+import {\n+    SearchIcon\n+} from '@patternfly/react-icons';\n+import { Redirect } from 'react-router';\n+\n+const NoDataComponent = (props) => {\n+    let prevPath;\n+    if (props.location.state !== undefined) {\n+        prevPath = props.location.state.prev;\n+    } else {\n+        prevPath = '/ProcessInstances'\n+    }\n+\n+    const tempPath = prevPath.split('/');\n+    prevPath = tempPath.filter(item => item)\n+\n+    const [isRedirect, setIsredirect] = useState(false);\n+    const redirectHandler = () => {\n+        setIsredirect(true);\n+    };\n+    return (\n+        <>\n+            {isRedirect && <Redirect to={`/${prevPath[0]}`} />}\n+            <PageSection isFilled={true}>\n+                <Bullseye>\n+                    <EmptyState variant={EmptyStateVariant.full}>\n+                        <EmptyStateIcon icon={SearchIcon} />\n+                        <Title headingLevel=\"h1\" size=\"4xl\">{props.location.state ? props.location.state.title : 'No\u00a0matches'}</Title>\n+                        <EmptyStateBody>\n+                            {props.location.state ? props.location.state.description : 'No\u00a0data\u00a0to\u00a0display'}\n+                        </EmptyStateBody>\n+                        <Button variant=\"primary\" onClick={redirectHandler}>\n+                            {props.location.state? props.location.state.buttonText : 'Navigate\u00a0to\u00a0home'}", "originalCommit": "625be3be3eaa51fb1413ab9eba272d9abdaa2cb7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "37cdf54d907788b608256ed6ee7fd979b604f9ed", "url": "https://github.com/kiegroup/kogito-apps/commit/37cdf54d907788b608256ed6ee7fd979b604f9ed", "message": "KOGITO-1293: Handled 404 error and URL parameters", "committedDate": "2020-03-19T05:09:45Z", "type": "forcePushed"}, {"oid": "b9eb86fe7fd6399259a7f498a51b914c3b4ae8da", "url": "https://github.com/kiegroup/kogito-apps/commit/b9eb86fe7fd6399259a7f498a51b914c3b4ae8da", "message": "KOGITO-1293: Handled 404 error and URL parameters", "committedDate": "2020-03-19T05:14:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDgxOTQxNA==", "url": "https://github.com/kiegroup/kogito-apps/pull/107#discussion_r394819414", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          Go to process instances\n          \n          \n            \n                          Go to Process Instances\n          \n      \n    \n    \n  \n\n@Sara4994 please review capital letter on the wording for all texts.", "author": "cristianonicolai", "createdAt": "2020-03-19T06:47:19Z", "path": "packages/management-console/src/components/Molecules/ErrorComponent/ErrorComponent.tsx", "diffHunk": "@@ -1,52 +1,56 @@\n import React, { useState } from 'react';\n import {\n   PageSection,\n-  TextContent,\n-  Text,\n-  TextVariants,\n   Bullseye,\n+  EmptyState,\n+  EmptyStateIcon,\n+  EmptyStateVariant,\n   Button,\n-  Flex,\n-  FlexItem,\n-  FlexModifiers\n+  EmptyStateBody,\n+  Title\n } from '@patternfly/react-core';\n+import {\n+  ExclamationCircleIcon\n+} from '@patternfly/react-icons';\n import { Redirect } from 'react-router';\n \n-const ErrorComponent = () => {\n+const ErrorComponent = (props) => {\n+  let prevPath;\n+  if (props.location.state !== undefined) {\n+    prevPath = props.location.state.prev;\n+  } else {\n+    prevPath = '/ProcessInstances'\n+  }\n+\n+  const tempPath = prevPath.split('/');\n+  prevPath = tempPath.filter(item => item)\n+\n   const [isRedirect, setIsredirect] = useState(false);\n   const redirectHandler = () => {\n     setIsredirect(true);\n   };\n   return (\n     <>\n-      {isRedirect && <Redirect to=\"/DomainExplorer\" />}\n+      {isRedirect && <Redirect to={`/${prevPath[0]}`} />}\n       <PageSection variant=\"light\">\n         <Bullseye>\n-          <Flex breakpointMods={[{ modifier: FlexModifiers.column }]}>\n-            <FlexItem>\n-              <TextContent>\n-                <Text component={TextVariants.h1}>404 - PAGE NOT FOUND</Text>\n-                <br />\n-                <Text component={TextVariants.p}>\n-                  Oops! This page could not be found\n-                </Text>\n-                <Text component={TextVariants.small}>\n-                  Sorry you cannot view this page, as the URL you have enter is\n-                  incorrect\n-                </Text>\n-              </TextContent>\n-            </FlexItem>\n-            <br />\n-            <FlexItem>\n-              <Button variant=\"primary\" onClick={redirectHandler}>\n-                Go Back\n-              </Button>\n-            </FlexItem>\n-          </Flex>\n+          <EmptyState variant={EmptyStateVariant.full}>\n+            <EmptyStateIcon\n+              icon={ExclamationCircleIcon}\n+              size=\"md\"\n+              color=\"var(--pf-global--danger-color--100)\" />\n+            <Title headingLevel=\"h1\" size=\"4xl\">404\u00a0Error:\u00a0page\u00a0not\u00a0found</Title>\n+            <EmptyStateBody>\n+              This\u00a0page\u00a0could\u00a0not\u00a0be\u00a0found.\n+            </EmptyStateBody>\n+            <Button variant=\"primary\" onClick={redirectHandler}>\n+              Go to process instances", "originalCommit": "b9eb86fe7fd6399259a7f498a51b914c3b4ae8da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f036d2f642416da44e2f7b8e6af713b795736c36", "url": "https://github.com/kiegroup/kogito-apps/commit/f036d2f642416da44e2f7b8e6af713b795736c36", "message": "KOGITO-1293: Handled 404 error and URL parameters", "committedDate": "2020-03-19T12:22:43Z", "type": "commit"}, {"oid": "f036d2f642416da44e2f7b8e6af713b795736c36", "url": "https://github.com/kiegroup/kogito-apps/commit/f036d2f642416da44e2f7b8e6af713b795736c36", "message": "KOGITO-1293: Handled 404 error and URL parameters", "committedDate": "2020-03-19T12:22:43Z", "type": "forcePushed"}]}