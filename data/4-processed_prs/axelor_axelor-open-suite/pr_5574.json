{"pr_number": 5574, "pr_title": "Wip 29314: Add partner and workshop list on company", "pr_createdAt": "2020-06-26T15:07:33Z", "pr_url": "https://github.com/axelor/axelor-open-suite/pull/5574", "timeline": [{"oid": "ca5a5e7be50b673ced8e0722d9bc3df874ee896a", "url": "https://github.com/axelor/axelor-open-suite/commit/ca5a5e7be50b673ced8e0722d9bc3df874ee896a", "message": "#29314: Add workshop and partner list to company", "committedDate": "2020-06-26T15:04:38Z", "type": "commit"}, {"oid": "6ee641fc274d9daf3c073e149370b0c9d00d3124", "url": "https://github.com/axelor/axelor-open-suite/commit/6ee641fc274d9daf3c073e149370b0c9d00d3124", "message": "Add changelog", "committedDate": "2020-06-26T15:06:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQ5NzYwNg==", "url": "https://github.com/axelor/axelor-open-suite/pull/5574#discussion_r447497606", "bodyText": "Why not simply write directly in the domain attribute ?", "author": "ale-axelor", "createdAt": "2020-06-30T08:15:55Z", "path": "axelor-base/src/main/resources/views/Company.xml", "diffHunk": "@@ -125,5 +128,13 @@\n   <action-method name=\"action-company-logo-onchange-update-dimension\">\n     <call class=\"com.axelor.apps.base.web.CompanyController\" method=\"updateDimension\"/>\n   </action-method>\n+  \n+  <action-attrs name=\"action-company-workshop-list-on-select\">\n+  \t<attribute name=\"domain\" for=\"workshopList\" expr=\"self.isWorkshop is true\"/>\n+  </action-attrs>\n+  \n+  <action-attrs name=\"action-company-partner-list-on-select\">\n+  \t<attribute name=\"domain\" for=\"partnerList\" expr=\"self.isInternal is true\"/>", "originalCommit": "6ee641fc274d9daf3c073e149370b0c9d00d3124", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQ5ODUyOQ==", "url": "https://github.com/axelor/axelor-open-suite/pull/5574#discussion_r447498529", "bodyText": "I think this field should only appears if the workshop configuration is enabled.", "author": "ale-axelor", "createdAt": "2020-06-30T08:17:21Z", "path": "axelor-base/src/main/resources/views/Company.xml", "diffHunk": "@@ -57,6 +57,9 @@\n \t    \t<panel name=\"informationsPanel\" title=\"Information\">\n \t      \t\t<field name=\"notes\" colSpan=\"12\"/>\n \t    \t\t<field name=\"companyDepartmentList\" grid-view=\"company-department-company-grid\" form-view=\"company-department-company-form\" canSelect=\"true\" domain=\"self.company IS NULL\" colSpan=\"12\"/>\n+    \t\t\t<field name=\"partnerList\" form-view=\"partner-form\" grid-view=\"partner-grid\" colSpan=\"12\" canNew=\"false\" canSelect=\"true\" onSelect=\"action-company-partner-list-on-select\"/>\n+\t\t    \t<field name=\"workshopList\" colSpan=\"12\" if-module=\"axelor-stock\" if=\"__config__.app.isApp('stock')\" canNew=\"false\" canSelect=\"true\" onSelect=\"action-company-workshop-list-on-select\"/>", "originalCommit": "6ee641fc274d9daf3c073e149370b0c9d00d3124", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "566b58dca4320270d28c7d5fa7c8ff9aad624eca", "url": "https://github.com/axelor/axelor-open-suite/commit/566b58dca4320270d28c7d5fa7c8ff9aad624eca", "message": "Remove actions and add domain directly on the field", "committedDate": "2020-06-30T08:51:56Z", "type": "commit"}, {"oid": "e636a8c6f23c51c049d652504bcf113ebd130eb5", "url": "https://github.com/axelor/axelor-open-suite/commit/e636a8c6f23c51c049d652504bcf113ebd130eb5", "message": "Move workshop field in production module", "committedDate": "2020-06-30T09:26:28Z", "type": "commit"}, {"oid": "c6928d1864a21d27f06d0745244d85ff22c124ac", "url": "https://github.com/axelor/axelor-open-suite/commit/c6928d1864a21d27f06d0745244d85ff22c124ac", "message": "Fix minor error", "committedDate": "2020-06-30T09:31:04Z", "type": "commit"}]}