{"pr_number": 5189, "pr_title": "Anomaly RM#26509: INVOICELINE : account not filtered depending on fix\u2026", "pr_createdAt": "2020-03-23T12:07:56Z", "pr_url": "https://github.com/axelor/axelor-open-suite/pull/5189", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjkwMTYzMg==", "url": "https://github.com/axelor/axelor-open-suite/pull/5189#discussion_r396901632", "bodyText": "Instead of static String literals use Constants from repository", "author": "cma-axelor", "createdAt": "2020-03-24T04:53:36Z", "path": "axelor-account/src/main/java/com/axelor/apps/account/web/InvoiceLineController.java", "diffHunk": "@@ -353,19 +356,22 @@ public void getAccount(ActionRequest request, ActionResponse response) {\n   public void filterAccount(ActionRequest request, ActionResponse response) throws AxelorException {\n     Context context = request.getContext();\n     Invoice invoice = this.getInvoice(context);\n+    InvoiceLine invoiceLine = request.getContext().asType(InvoiceLine.class);\n     if (invoice != null && invoice.getCompany() != null) {\n-      String domain = null;\n+      List<String> technicalTypeSelectList = new ArrayList<>();\n       if (InvoiceToolService.isPurchase(invoice)) {\n-        domain =\n-            \"self.company.id = \"\n-                + invoice.getCompany().getId()\n-                + \"AND self.accountType.technicalTypeSelect IN ('debt' , 'immobilisation' , 'charge')\";\n+        technicalTypeSelectList.addAll(Arrays.asList(\"'debt'\", \"'charge'\"));", "originalCommit": "b0688b8bff411ee8512f4433aaacf157683e3d31", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8476a09141994d05f076e74a521cf18ffb328097", "url": "https://github.com/axelor/axelor-open-suite/commit/8476a09141994d05f076e74a521cf18ffb328097", "message": "Anomaly RM#26509: INVOICELINE : account not filtered depending on fixedAssets boolean", "committedDate": "2020-03-24T07:05:14Z", "type": "commit"}, {"oid": "8476a09141994d05f076e74a521cf18ffb328097", "url": "https://github.com/axelor/axelor-open-suite/commit/8476a09141994d05f076e74a521cf18ffb328097", "message": "Anomaly RM#26509: INVOICELINE : account not filtered depending on fixedAssets boolean", "committedDate": "2020-03-24T07:05:14Z", "type": "forcePushed"}, {"oid": "e6cfc88a7a4fa07e1a8241415f2eab3bc6124097", "url": "https://github.com/axelor/axelor-open-suite/commit/e6cfc88a7a4fa07e1a8241415f2eab3bc6124097", "message": "Merge branch 'dev' into dev-26509", "committedDate": "2020-03-24T13:59:30Z", "type": "commit"}]}