{"pr_number": 10670, "pr_title": "cluescroll plugin: Clear stale location clue hint arrows ", "pr_createdAt": "2020-01-27T06:27:25Z", "pr_url": "https://github.com/runelite/runelite/pull/10670", "timeline": [{"oid": "60c3f1549565c48697b95b01bb24c5a4b6783f75", "url": "https://github.com/runelite/runelite/commit/60c3f1549565c48697b95b01bb24c5a4b6783f75", "message": "cluescroll plugin: Clear stale location clue hint arrows\n\nLocation clue scrolls added a hint arrow when the player was nearby one\nof the clue's locations. It did not, however clear that arrow if the\nlocations were changed and the previously-set hint arrow location was no\nlonger marked. This commit updates this behavior to clear the active\nhint arrow should that be the case. (and if no NPC hint arrows are set)\n\nFixes runelite/runelite#10370", "committedDate": "2020-01-27T06:27:39Z", "type": "forcePushed"}, {"oid": "f899fca10c33941e5ac35fff3b285d053cff530c", "url": "https://github.com/runelite/runelite/commit/f899fca10c33941e5ac35fff3b285d053cff530c", "message": "cluescroll plugin: Clear stale location clue hint arrows\n\nLocation clue scrolls added a hint arrow when the player was nearby one\nof the clue's locations. It did not, however clear that arrow if the\nlocations were changed and the previously-set hint arrow location was no\nlonger marked. This commit updates this behavior to clear the active\nhint arrow should that be the case. (and if no NPC hint arrows are set)\n\nFixes runelite/runelite#10370", "committedDate": "2020-02-01T07:38:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg2MDA2NQ==", "url": "https://github.com/runelite/runelite/pull/10670#discussion_r373860065", "bodyText": "can't you just move this up above L380 and avoid the whole \"addedHintArrow\" logic?", "author": "Adam-", "createdAt": "2020-02-02T16:57:18Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/cluescrolls/ClueScrollPlugin.java", "diffHunk": "@@ -398,6 +398,11 @@ public void onGameTick(final GameTick event)\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n+\n+\t\t\tif (!npcHintArrowMarked && !addedHintArrow)\n+\t\t\t{\n+\t\t\t\tclient.clearHintArrow();", "originalCommit": "f899fca10c33941e5ac35fff3b285d053cff530c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg2ODI5Mg==", "url": "https://github.com/runelite/runelite/pull/10670#discussion_r373868292", "bodyText": "I guess there's no harm in clearing the hint arrow each tick before resetting it. \ud83d\udc4d", "author": "Nightfirecat", "createdAt": "2020-02-02T19:17:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg2MDA2NQ=="}], "type": "inlineReview"}, {"oid": "c4aa397251b10922b36e4edfa39b3d62a374d340", "url": "https://github.com/runelite/runelite/commit/c4aa397251b10922b36e4edfa39b3d62a374d340", "message": "cluescroll plugin: Clear stale location clue hint arrows\n\nLocation clue scrolls added a hint arrow when the player was nearby one\nof the clue's locations. It did not, however clear that arrow if the\nlocations were changed and the previously-set hint arrow location was no\nlonger marked. This commit updates this behavior to clear the active\nhint arrow each game tick before re-adding any location hint arrows.\n(and if no NPC hint arrows are set)\n\nFixes runelite/runelite#10370", "committedDate": "2020-02-02T19:12:35Z", "type": "forcePushed"}, {"oid": "0939f60d5df96113bd0945f9807f888fb61122ce", "url": "https://github.com/runelite/runelite/commit/0939f60d5df96113bd0945f9807f888fb61122ce", "message": "cluescroll plugin: Clear stale location clue hint arrows\n\nLocation clue scrolls added a hint arrow when the player was nearby one\nof the clue's locations. It did not, however clear that arrow if the\nlocations were changed and the previously-set hint arrow location was no\nlonger marked. This commit updates this behavior to clear the active\nhint arrow each game tick before re-adding any location hint arrows.\n(and if no NPC hint arrows are set)\n\nFixes runelite/runelite#10370", "committedDate": "2020-02-02T19:14:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjczNzg1MQ==", "url": "https://github.com/runelite/runelite/pull/10670#discussion_r376737851", "bodyText": "We generally place this in @Before", "author": "Adam-", "createdAt": "2020-02-08T22:12:38Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/cluescrolls/ClueScrollPluginTest.java", "diffHunk": "@@ -61,4 +99,53 @@ public void getGetMirrorPoint()\n \t\tconverted = ClueScrollPlugin.getMirrorPoint(point, false);\n \t\tassertEquals(point, converted);\n \t}\n-}\n\\ No newline at end of file\n+\n+\t@Test\n+\tpublic void testLocationHintArrowCleared()\n+\t{\n+\t\tGuice.createInjector(BoundFieldModule.of(this)).injectMembers(this);", "originalCommit": "0939f60d5df96113bd0945f9807f888fb61122ce", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9cf1a0148f8ac065b63aade9ee93af9634fb6de2", "url": "https://github.com/runelite/runelite/commit/9cf1a0148f8ac065b63aade9ee93af9634fb6de2", "message": "cluescroll plugin: Clear stale location clue hint arrows\n\nLocation clue scrolls added a hint arrow when the player was nearby one\nof the clue's locations. It did not, however clear that arrow if the\nlocations were changed and the previously-set hint arrow location was no\nlonger marked. This commit updates this behavior to clear the active\nhint arrow each game tick before re-adding any location hint arrows.\n(and if no NPC hint arrows are set)\n\nFixes runelite/runelite#10370", "committedDate": "2020-02-10T03:41:12Z", "type": "forcePushed"}, {"oid": "0640d67f545670f30d06b877a47b92394bbfa3d6", "url": "https://github.com/runelite/runelite/commit/0640d67f545670f30d06b877a47b92394bbfa3d6", "message": "cluescroll plugin: Clear stale location clue hint arrows\n\nLocation clue scrolls added a hint arrow when the player was nearby one\nof the clue's locations. It did not, however clear that arrow if the\nlocations were changed and the previously-set hint arrow location was no\nlonger marked. This commit updates this behavior to clear the active\nhint arrow each game tick before re-adding any location hint arrows.\n(and if no NPC hint arrows are set)\n\nFixes runelite/runelite#10370", "committedDate": "2020-02-11T00:55:59Z", "type": "forcePushed"}, {"oid": "a0cdc23ad118d9f2e62e5885d18bed72e5a66f87", "url": "https://github.com/runelite/runelite/commit/a0cdc23ad118d9f2e62e5885d18bed72e5a66f87", "message": "cluescroll plugin: Clear stale location clue hint arrows\n\nLocation clue scrolls added a hint arrow when the player was nearby one\nof the clue's locations. It did not, however clear that arrow if the\nlocations were changed and the previously-set hint arrow location was no\nlonger marked. This commit updates this behavior to clear the active\nhint arrow each game tick before re-adding any location hint arrows.\n(and if no NPC hint arrows are set)\n\nFixes runelite/runelite#10370", "committedDate": "2020-02-20T20:10:08Z", "type": "commit"}, {"oid": "a0cdc23ad118d9f2e62e5885d18bed72e5a66f87", "url": "https://github.com/runelite/runelite/commit/a0cdc23ad118d9f2e62e5885d18bed72e5a66f87", "message": "cluescroll plugin: Clear stale location clue hint arrows\n\nLocation clue scrolls added a hint arrow when the player was nearby one\nof the clue's locations. It did not, however clear that arrow if the\nlocations were changed and the previously-set hint arrow location was no\nlonger marked. This commit updates this behavior to clear the active\nhint arrow each game tick before re-adding any location hint arrows.\n(and if no NPC hint arrows are set)\n\nFixes runelite/runelite#10370", "committedDate": "2020-02-20T20:10:08Z", "type": "forcePushed"}]}