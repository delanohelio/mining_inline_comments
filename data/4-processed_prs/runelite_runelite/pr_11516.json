{"pr_number": 11516, "pr_title": "Add 24h clock and clock tag to report button", "pr_createdAt": "2020-05-09T11:09:43Z", "pr_url": "https://github.com/runelite/runelite/pull/11516", "timeline": [{"oid": "5ae73b2a7b48659ddceee10312cbb8759b89cfdc", "url": "https://github.com/runelite/runelite/commit/5ae73b2a7b48659ddceee10312cbb8759b89cfdc", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-09T11:18:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU3NjI0Ng==", "url": "https://github.com/runelite/runelite/pull/11516#discussion_r422576246", "bodyText": "Positions aren't needed.", "author": "raiyni", "createdAt": "2020-05-10T03:02:23Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/reportbutton/ReportButtonConfig.java", "diffHunk": "@@ -34,10 +34,22 @@\n \t@ConfigItem(\n \t\tkeyName = \"time\",\n \t\tname = \"Display Options\",\n-\t\tdescription = \"Configures what text the report button shows.\"\n+\t\tdescription = \"Configures what text the report button shows.\",\n+\t\tposition = 1\n \t)\n \tdefault TimeStyle time()\n \t{\n \t\treturn TimeStyle.LOGIN_TIME;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"switchFormat\",\n+\t\tname = \"24 hour time format\",\n+\t\tdescription = \"Configures time to the 24 hour time format\",\n+\t\tposition = 2", "originalCommit": "5ae73b2a7b48659ddceee10312cbb8759b89cfdc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU3NjM5Mg==", "url": "https://github.com/runelite/runelite/pull/11516#discussion_r422576392", "bodyText": "This should only make a new formatter on config change.", "author": "raiyni", "createdAt": "2020-05-10T03:04:04Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/reportbutton/ReportButtonPlugin.java", "diffHunk": "@@ -156,6 +155,15 @@ private void updateReportButtonTime()\n \t\t\treturn;\n \t\t}\n \n+\t\tif (config.switchFormat())\n+\t\t{\n+\t\t\tformat = DateTimeFormatter.ofPattern(\"HH:mm:ss\");", "originalCommit": "5ae73b2a7b48659ddceee10312cbb8759b89cfdc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f1dc852f8eee1c4ebc7c17325d35900feeb93864", "url": "https://github.com/runelite/runelite/commit/f1dc852f8eee1c4ebc7c17325d35900feeb93864", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-10T09:29:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ1MTI1NQ==", "url": "https://github.com/runelite/runelite/pull/11516#discussion_r423451255", "bodyText": "This looks like it is not set if ConfigChanged is not fired? Also, why is this static?", "author": "Nightfirecat", "createdAt": "2020-05-12T04:14:02Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/reportbutton/ReportButtonPlugin.java", "diffHunk": "@@ -45,22 +45,22 @@\n import net.runelite.client.callback.ClientThread;\n import net.runelite.client.config.ConfigManager;\n import net.runelite.client.eventbus.Subscribe;\n+import net.runelite.client.events.ConfigChanged;\n import net.runelite.client.plugins.Plugin;\n import net.runelite.client.plugins.PluginDescriptor;\n import net.runelite.client.task.Schedule;\n \n @PluginDescriptor(\n \tname = \"Report Button\",\n \tdescription = \"Replace the text on the Report button with the current time\",\n-\ttags = {\"time\", \"utc\"}\n+\ttags = {\"time\", \"utc\", \"clock\"}\n )\n public class ReportButtonPlugin extends Plugin\n {\n \tprivate static final ZoneId UTC = ZoneId.of(\"UTC\");\n \tprivate static final ZoneId JAGEX = ZoneId.of(\"Europe/London\");\n-\n-\tprivate static final DateTimeFormatter DATE_TIME_FORMAT = DateTimeFormatter.ofLocalizedTime(FormatStyle.MEDIUM);\n \tprivate static final DateFormat DATE_FORMAT = new SimpleDateFormat(\"MMM. dd, yyyy\");\n+\tprivate static DateTimeFormatter format;", "originalCommit": "f1dc852f8eee1c4ebc7c17325d35900feeb93864", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ1MzA1MA==", "url": "https://github.com/runelite/runelite/pull/11516#discussion_r423453050", "bodyText": "This is static due to the methods using it being static, I have no idea why the methods were made static at one point.", "author": "melkypie", "createdAt": "2020-05-12T04:21:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ1MTI1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzgxNDM5Mw==", "url": "https://github.com/runelite/runelite/pull/11516#discussion_r423814393", "bodyText": "Because they didn't depend on the state of a variable.", "author": "raiyni", "createdAt": "2020-05-12T15:12:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzQ1MTI1NQ=="}], "type": "inlineReview"}, {"oid": "01fa777613b4ffc332e121884939bdd2e77ae951", "url": "https://github.com/runelite/runelite/commit/01fa777613b4ffc332e121884939bdd2e77ae951", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-12T17:06:58Z", "type": "forcePushed"}, {"oid": "e905f3fc32c7815b2cb0e9f1787cb7269dbed324", "url": "https://github.com/runelite/runelite/commit/e905f3fc32c7815b2cb0e9f1787cb7269dbed324", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-12T17:08:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzkwNTIyNA==", "url": "https://github.com/runelite/runelite/pull/11516#discussion_r423905224", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tprivate void checkFormat()\n          \n          \n            \n            \tprivate void updateFormat()", "author": "raiyni", "createdAt": "2020-05-12T17:22:52Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/reportbutton/ReportButtonPlugin.java", "diffHunk": "@@ -199,25 +210,37 @@ private String getGameTicks()\n \t\treturn Integer.toString(ticksSinceLogin);\n \t}\n \n-\tprivate static String getLocalTime()\n+\tprivate String getLocalTime()\n \t{\n-\t\treturn LocalTime.now().format(DATE_TIME_FORMAT);\n+\t\treturn LocalTime.now().format(format);\n \t}\n \n-\tprivate static String getUTCTime()\n+\tprivate String getUTCTime()\n \t{\n \t\tLocalTime time = LocalTime.now(UTC);\n-\t\treturn time.format(DATE_TIME_FORMAT);\n+\t\treturn time.format(format);\n \t}\n \n-\tprivate static String getJagexTime()\n+\tprivate String getJagexTime()\n \t{\n \t\tLocalTime time = LocalTime.now(JAGEX);\n-\t\treturn time.format(DATE_TIME_FORMAT);\n+\t\treturn time.format(format);\n \t}\n \n \tprivate static String getDate()\n \t{\n \t\treturn DATE_FORMAT.format(new Date());\n \t}\n+\n+\tprivate void checkFormat()", "originalCommit": "e905f3fc32c7815b2cb0e9f1787cb7269dbed324", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzkwNzQxNA==", "url": "https://github.com/runelite/runelite/pull/11516#discussion_r423907414", "bodyText": "Maybe this should be an enum to better convey the format?", "author": "raiyni", "createdAt": "2020-05-12T17:26:29Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/reportbutton/ReportButtonConfig.java", "diffHunk": "@@ -40,4 +40,14 @@ default TimeStyle time()\n \t{\n \t\treturn TimeStyle.LOGIN_TIME;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"switchFormat\",\n+\t\tname = \"24 hour time format\",\n+\t\tdescription = \"Configures time to the 24 hour time format\"\n+\t)\n+\tdefault boolean switchFormat()", "originalCommit": "e905f3fc32c7815b2cb0e9f1787cb7269dbed324", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ae1b3d243ad512e283635adda94effdbdb7e5248", "url": "https://github.com/runelite/runelite/commit/ae1b3d243ad512e283635adda94effdbdb7e5248", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-12T17:59:29Z", "type": "forcePushed"}, {"oid": "adfa09a5132a3b94dab4ba62db7dcdc89566530f", "url": "https://github.com/runelite/runelite/commit/adfa09a5132a3b94dab4ba62db7dcdc89566530f", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-12T18:01:56Z", "type": "forcePushed"}, {"oid": "0e5d4f5a2a5c86ccf488f333c05ba34811d19701", "url": "https://github.com/runelite/runelite/commit/0e5d4f5a2a5c86ccf488f333c05ba34811d19701", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-12T18:03:40Z", "type": "forcePushed"}, {"oid": "66a3c45355a5c01489515d0c1c51cfbc07d07d77", "url": "https://github.com/runelite/runelite/commit/66a3c45355a5c01489515d0c1c51cfbc07d07d77", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-12T18:03:59Z", "type": "forcePushed"}, {"oid": "70dd68bcac217076543bdc606265edad58420953", "url": "https://github.com/runelite/runelite/commit/70dd68bcac217076543bdc606265edad58420953", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-12T21:04:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDg2MjcxNQ==", "url": "https://github.com/runelite/runelite/pull/11516#discussion_r424862715", "bodyText": "Since only \"switchTimeFormat\" is acted upon here, check both the group and key.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tif (!event.getGroup().equals(\"reportButton\"))\n          \n          \n            \n            \t\t{\n          \n          \n            \n            \t\t\treturn;\n          \n          \n            \n            \t\t}\n          \n          \n            \n            \t\tupdateTimeFormat();\n          \n          \n            \n            \t\tif (event.getGroup().equals(\"reportButton\") && event.getKey().equals(\"switchTimeFormat\"))\n          \n          \n            \n            \t\t{\n          \n          \n            \n            \t\t\tupdateTimeFormat();\n          \n          \n            \n            \t\t}", "author": "Nightfirecat", "createdAt": "2020-05-14T04:22:15Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/reportbutton/ReportButtonPlugin.java", "diffHunk": "@@ -134,6 +135,16 @@ public void onGameTick(GameTick tick)\n \t\t}\n \t}\n \n+\t@Subscribe\n+\tpublic void onConfigChanged(ConfigChanged event)\n+\t{\n+\t\tif (!event.getGroup().equals(\"reportButton\"))\n+\t\t{\n+\t\t\treturn;\n+\t\t}\n+\t\tupdateTimeFormat();", "originalCommit": "ea8cf2ac7071a33d3132d738bba096d54a19b1f1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ccb308c50d28114661cb4ca108d2405dbca59420", "url": "https://github.com/runelite/runelite/commit/ccb308c50d28114661cb4ca108d2405dbca59420", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-14T06:28:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2NTIwNg==", "url": "https://github.com/runelite/runelite/pull/11516#discussion_r429565206", "bodyText": "What does this mean? Why isn't it just Time Format?", "author": "Adam-", "createdAt": "2020-05-23T17:50:49Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/reportbutton/ReportButtonConfig.java", "diffHunk": "@@ -40,4 +40,14 @@ default TimeStyle time()\n \t{\n \t\treturn TimeStyle.LOGIN_TIME;\n \t}\n+\n+\t@ConfigItem(\n+\t\tkeyName = \"switchTimeFormat\",\n+\t\tname = \"Switch time format\",", "originalCommit": "3eab26acc110116e9300433579e09611ccaf3cd8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "33feac8e3b13cc539c7661d89c8258023d839f00", "url": "https://github.com/runelite/runelite/commit/33feac8e3b13cc539c7661d89c8258023d839f00", "message": "report button: add ability to switch between 24h and 12h clock\n\nCo-authored-by: melkypie <5113962+melkypie@users.noreply.github.com>", "committedDate": "2020-05-23T17:54:26Z", "type": "commit"}, {"oid": "582798148aa6864c9230ce5d19e90f343c9933b5", "url": "https://github.com/runelite/runelite/commit/582798148aa6864c9230ce5d19e90f343c9933b5", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-23T17:54:32Z", "type": "commit"}, {"oid": "582798148aa6864c9230ce5d19e90f343c9933b5", "url": "https://github.com/runelite/runelite/commit/582798148aa6864c9230ce5d19e90f343c9933b5", "message": "report button: add clock tag\n\nCo-authored-by: Malfuryent <jossparla94@gmail.com>", "committedDate": "2020-05-23T17:54:32Z", "type": "forcePushed"}]}