{"pr_number": 2790, "pr_title": "DISPATCHER: Reintroduced configurable re-schedule interval", "pr_createdAt": "2020-07-15T09:12:43Z", "pr_url": "https://github.com/CESNET/perun/pull/2790", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEwOTcxMQ==", "url": "https://github.com/CESNET/perun/pull/2790#discussion_r458109711", "bodyText": "Probably just a typo here: \"toManyHoursAgo\" -> \"tooManyHoursAgo\".", "author": "mvocu", "createdAt": "2020-07-21T13:47:37Z", "path": "perun-dispatcher/src/main/java/cz/metacentrum/perun/dispatcher/scheduling/PropagationMaintainer.java", "diffHunk": "@@ -186,11 +191,11 @@ private void rescheduleErrorTasks() {\n \t\t\t\thowManyMinutesAgo = task.getDelay() + 1;\n \t\t\t}\n \n-\t\t\tlog.trace(\"[{}] Task in ERROR state completed {} minutes ago: {}.\", new Object[]{task.getId(), howManyMinutesAgo, task});\n+\t\t\tlog.trace(\"[{}] Task in ERROR state completed {} minutes ago: {}.\", task.getId(), howManyMinutesAgo, task);\n \n \t\t\t// If DELAY time has passed, we reschedule...\n \t\t\tint recurrence = task.getRecurrence() + 1;\n-\t\t\tLocalDateTime twoDaysAgo = LocalDateTime.now().minusDays(2);\n+\t\t\tLocalDateTime toManyHoursAgo = LocalDateTime.now().minusHours(oldRescheduleHours);", "originalCommit": "0063be93e9a1542a15dc4fe4018f4e71cf1699d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODI4ODA3Mw==", "url": "https://github.com/CESNET/perun/pull/2790#discussion_r458288073", "bodyText": "Thanks for noticing, fixed.", "author": "zlamalp", "createdAt": "2020-07-21T18:01:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODEwOTcxMQ=="}], "type": "inlineReview"}, {"oid": "01cb0a2f7a1dd2f67416c55e978b8dd0f59ec69a", "url": "https://github.com/CESNET/perun/commit/01cb0a2f7a1dd2f67416c55e978b8dd0f59ec69a", "message": "DISPATCHER: Reintroduced configurable re-schedule interval\n\n- If Tasks are DONE or ERROR for too many hours, they will\n  be re-scheduled. It was previously configurable, then we\n  switched to fixed \"two days\" period.\n  Now, it is configurable again, defaulting to two days\n  (setting is in hours in perun-dispatcher.properties).", "committedDate": "2020-07-21T17:59:07Z", "type": "commit"}, {"oid": "01cb0a2f7a1dd2f67416c55e978b8dd0f59ec69a", "url": "https://github.com/CESNET/perun/commit/01cb0a2f7a1dd2f67416c55e978b8dd0f59ec69a", "message": "DISPATCHER: Reintroduced configurable re-schedule interval\n\n- If Tasks are DONE or ERROR for too many hours, they will\n  be re-scheduled. It was previously configurable, then we\n  switched to fixed \"two days\" period.\n  Now, it is configurable again, defaulting to two days\n  (setting is in hours in perun-dispatcher.properties).", "committedDate": "2020-07-21T17:59:07Z", "type": "forcePushed"}]}