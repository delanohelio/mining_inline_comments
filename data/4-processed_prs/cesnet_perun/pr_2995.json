{"pr_number": 2995, "pr_title": "Perun core - updateSponsorshipValidity fix", "pr_createdAt": "2020-11-24T09:27:12Z", "pr_url": "https://github.com/CESNET/perun/pull/2995", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM1NjYzNg==", "url": "https://github.com/CESNET/perun/pull/2995#discussion_r529356636", "bodyText": "This will still fail, if the param is present, but the value is null, because of the way we parse date from the input.", "author": "zlamalp", "createdAt": "2020-11-24T09:38:21Z", "path": "perun-rpc/src/main/java/cz/metacentrum/perun/rpc/methods/MembersManagerMethod.java", "diffHunk": "@@ -383,7 +383,10 @@ public Void call(ApiCaller ac, Deserializer params) throws PerunException {\n \n \t\t\tMember sponsoredMember = ac.getMemberById(params.readInt(\"member\"));\n \t\t\tUser sponsor = ac.getUserById(params.readInt(\"sponsor\"));\n-\t\t\tLocalDate newValidity = params.readLocalDate(\"validityTo\");\n+\t\t\tLocalDate newValidity = null;\n+\t\t\tif (params.contains(\"validityTo\")) {\n+\t\t\t\tnewValidity = params.readLocalDate(\"validityTo\");", "originalCommit": "63b77b246e60afcafe5b9059dd432d7319fae473", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM4NjQ4NA==", "url": "https://github.com/CESNET/perun/pull/2995#discussion_r529386484", "bodyText": "You are right, I forget about that. It should be fixed now.", "author": "Vojtech-Sassmann", "createdAt": "2020-11-24T10:01:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTM1NjYzNg=="}], "type": "inlineReview"}, {"oid": "725550c6e8b505dcc0ee575808066aa34e22889e", "url": "https://github.com/CESNET/perun/commit/725550c6e8b505dcc0ee575808066aa34e22889e", "message": "Perun core - updateSponsorshipValidity fix\n\n* The updateSponsorshipValidity method used to force the validityTo\nparameter. Not, when not specified, it is used with the null value\n(which means that the sponsorship will not expire)\n* This was changed because the generated open api library in GUI was not\nable to pass the validityTo param with null value.", "committedDate": "2020-11-24T10:01:16Z", "type": "commit"}, {"oid": "725550c6e8b505dcc0ee575808066aa34e22889e", "url": "https://github.com/CESNET/perun/commit/725550c6e8b505dcc0ee575808066aa34e22889e", "message": "Perun core - updateSponsorshipValidity fix\n\n* The updateSponsorshipValidity method used to force the validityTo\nparameter. Not, when not specified, it is used with the null value\n(which means that the sponsorship will not expire)\n* This was changed because the generated open api library in GUI was not\nable to pass the validityTo param with null value.", "committedDate": "2020-11-24T10:01:16Z", "type": "forcePushed"}]}