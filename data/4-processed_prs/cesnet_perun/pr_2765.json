{"pr_number": 2765, "pr_title": "removed artificial limits on varchar lengths", "pr_createdAt": "2020-06-25T12:42:18Z", "pr_url": "https://github.com/CESNET/perun/pull/2765", "timeline": [{"oid": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb", "url": "https://github.com/CESNET/perun/commit/0a993f3498c4bdd4a4625b9cddb98138cbad85bb", "message": "removed artificial limits on varchar lengths", "committedDate": "2020-06-25T12:36:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3MzczNQ==", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r445973735", "bodyText": "Change varchar(1) to char(1) is missing in postgresql changelog. Also we should probably default to '0' (character not int) as other char columns do. It can be later updated to boolean, but I would like to have converts from char to boolean as a separate pull-request.", "author": "zlamalp", "createdAt": "2020-06-26T05:24:31Z", "path": "perun-db/postgres.sql", "diffHunk": "@@ -84,16 +84,16 @@ create table cabinet_publications (\n \tid integer not null,\n \texternalId integer not null, --identifier at externa pub. system\n \tpublicationSystemId integer not null, --identifier of external pub. system (cabinet_publication_systems.id) *)\n-\ttitle varchar(1024) not null,\n+\ttitle varchar not null,\n \tyear integer not null, --short title of publication\n-\tmain varchar(4000), --full cite of publication\n-\tisbn varchar(32),\n+\tmain varchar, --full cite of publication\n+\tisbn varchar,\n \tcategoryId integer not null, --identifier of category (cabinet_categories.id)\n-\tcreatedBy varchar(1300) default user not null,\n+\tcreatedBy varchar default user not null,\n \tcreatedDate timestamp not null,\n \trank numeric (38,1) default 0 not null,\n-\tdoi varchar(256),\n-\tlocked varchar(1) default 0 not null,\n+\tdoi varchar,\n+\tlocked char(1) default 0 not null,", "originalCommit": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA4NzM4NA==", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r446087384", "bodyText": "I omitted it on purpose, I think that we do not need to migrate this column in the existing databases, it will be changed to boolean anyway.", "author": "martin-kuba", "createdAt": "2020-06-26T09:55:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3MzczNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA5Mjk3Nw==", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r446092977", "bodyText": "ok", "author": "zlamalp", "createdAt": "2020-06-26T10:07:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3MzczNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3NDIwNg==", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r445974206", "bodyText": "Again this change is missing from postgresql changelog.", "author": "zlamalp", "createdAt": "2020-06-26T05:26:20Z", "path": "perun-db/postgres.sql", "diffHunk": "@@ -563,9 +563,9 @@ create table application_data (\n create table application_mails (\n \tid integer not null,\n \tform_id integer not null,       --identifier of form (application_form.id)\n-\tapp_type varchar(30) not null,  --application type (initial/extension)\n-\tmail_type varchar(30) not null, --type of mail (user/administrator)\n-\tsend varchar(1) not null,       --sent (Y/N)\n+\tapp_type varchar not null,  --application type (initial/extension)\n+\tmail_type varchar not null, --type of mail (user/administrator)\n+\tsend char(1) not null,       --sent (Y/N)", "originalCommit": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA4NzgxMw==", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r446087813", "bodyText": "The same, no need to migrate it in existing databases.", "author": "martin-kuba", "createdAt": "2020-06-26T09:56:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3NDIwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3NTQzOQ==", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r445975439", "bodyText": "Should be probably char(1) as in postgres.", "author": "zlamalp", "createdAt": "2020-06-26T05:31:27Z", "path": "perun-base/src/test/resources/test-schema.sql", "diffHunk": "@@ -567,9 +567,9 @@ create table application_data (\n create table application_mails (\n \tid integer not null,\n \tform_id integer not null,       --identifier of form (application_form.id)\n-\tapp_type varchar(30) not null,  --application type (initial/extension)\n-\tmail_type varchar(30) not null, --type of mail (user/administrator)\n-\tsend varchar(1) not null,       --sent (Y/N)\n+\tapp_type longvarchar not null,  --application type (initial/extension)\n+\tmail_type longvarchar not null, --type of mail (user/administrator)\n+\tsend longvarchar not null,       --sent (Y/N)", "originalCommit": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA4NzkxMw==", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r446087913", "bodyText": "fixed", "author": "martin-kuba", "createdAt": "2020-06-26T09:56:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3NTQzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3NTcyNA==", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r445975724", "bodyText": "Should be probably char(1) and default to '0' as in postgres.", "author": "zlamalp", "createdAt": "2020-06-26T05:32:26Z", "path": "perun-base/src/test/resources/test-schema.sql", "diffHunk": "@@ -88,16 +88,16 @@ create table cabinet_publications (\n \tid integer not null,\n \texternalId integer not null, --identifier at externa pub. system\n \tpublicationSystemId integer not null, --identifier of external pub. system (cabinet_publication_systems.id) *)\n-\ttitle varchar(1024) not null,\n+\ttitle longvarchar not null,\n \tyear integer not null, --short title of publication\n-\tmain varchar(4000), --full cite of publication\n-\tisbn varchar(32),\n+\tmain longvarchar, --full cite of publication\n+\tisbn longvarchar,\n \tcategoryId integer not null, --identifier of category (cabinet_categories.id)\n-\tcreatedBy varchar(1300) default user not null,\n+\tcreatedBy longvarchar default user not null,\n \tcreatedDate timestamp not null,\n \trank numeric (38,1) default 0 not null,\n-\tdoi varchar(256),\n-\tlocked varchar(1) default 0 not null,\n+\tdoi longvarchar,\n+\tlocked longvarchar default 0 not null,", "originalCommit": "0a993f3498c4bdd4a4625b9cddb98138cbad85bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA4ODg1MQ==", "url": "https://github.com/CESNET/perun/pull/2765#discussion_r446088851", "bodyText": "fixed", "author": "martin-kuba", "createdAt": "2020-06-26T09:58:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk3NTcyNA=="}], "type": "inlineReview"}, {"oid": "b04ee1d77d62ce735f942c871cdce0d63cee443b", "url": "https://github.com/CESNET/perun/commit/b04ee1d77d62ce735f942c871cdce0d63cee443b", "message": "fixed two char(1) representing booleans in test-schema.sql", "committedDate": "2020-06-26T10:09:14Z", "type": "commit"}]}