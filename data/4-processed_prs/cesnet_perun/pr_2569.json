{"pr_number": 2569, "pr_title": "OpenAPI authz resolver manager methods implementation", "pr_createdAt": "2020-02-19T12:30:50Z", "pr_url": "https://github.com/CESNET/perun/pull/2569", "timeline": [{"oid": "99ffff677c2b845ca15913a1ca72b07fe6bf12a9", "url": "https://github.com/CESNET/perun/commit/99ffff677c2b845ca15913a1ca72b07fe6bf12a9", "message": "OpenAPI authz resolver manager methods implementation\n\n* Added configurations for missing authz resolver manager methods in OpenAPI", "committedDate": "2020-02-19T13:01:32Z", "type": "forcePushed"}, {"oid": "fa3ba4d1b98481ab404db1254d66e0ee8b4ea7c4", "url": "https://github.com/CESNET/perun/commit/fa3ba4d1b98481ab404db1254d66e0ee8b4ea7c4", "message": "OpenAPI authz resolver manager methods implementation\n\n* Added configurations for missing authz resolver manager methods in OpenAPI", "committedDate": "2020-02-19T13:58:38Z", "type": "forcePushed"}, {"oid": "ce4e64033c71a7a647877c261fc529daee979c11", "url": "https://github.com/CESNET/perun/commit/ce4e64033c71a7a647877c261fc529daee979c11", "message": "OpenAPI authz resolver manager methods implementation\n\n* Added configurations for missing authz resolver manager methods in OpenAPI", "committedDate": "2020-02-19T14:29:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM4MDgxNg==", "url": "https://github.com/CESNET/perun/pull/2569#discussion_r381380816", "bodyText": "The type is no \"object\", but PerunBean.", "author": "martin-kuba", "createdAt": "2020-02-19T16:16:20Z", "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -1422,6 +1445,201 @@ paths:\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n \n+  /json/authzResolver/getRichAdmins:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getAuthzRichAdmins\n+      summary: Gets all rich admins\n+      description: Returns all managers for complementaryObject and role with specified attributes.\n+      parameters:\n+        - $ref: '#/components/parameters/role'\n+        - $ref: '#/components/parameters/complementaryObjectId'\n+        - $ref: '#/components/parameters/complementaryObjectName'\n+        - { name: specificAttributes,\n+            description: \"list of specified attributes which are needed in object richUser\",\n+            schema: {\n+              type: array,\n+              items: {\n+                type: string\n+              }\n+            },\n+            in: query,\n+            required: true\n+        }\n+        - { name: allUserAttributes,\n+            description: \"When true, do not specify attributes through list and return them all in objects richUser. Ignoring list of specific attributes\",\n+            schema: {\n+              type: boolean,\n+              default: false\n+            },\n+            in: query,\n+            required: false\n+        }\n+        - { name: onlyDirectAdmins,\n+            description: \"When true, return only direct users of the complementary object for role with specific attributes\",\n+            schema: {\n+              type: boolean,\n+              default: true\n+            },\n+            in: query,\n+            required: false\n+        }\n+      responses:\n+        '200':\n+          $ref: \"#/components/schemas/ListOfRichUsersResponse\"\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/authzResolver/getAdminGroups:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getAuthzAdminGroups\n+      summary: Get all groups of managers (authorizedGroups) for complementaryObject and role\n+      parameters:\n+        - $ref: '#/components/parameters/role'\n+        - $ref: '#/components/parameters/complementaryObjectId'\n+        - $ref: '#/components/parameters/complementaryObjectName'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfGroupsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/authzResolver/setRole/u-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: setRoleWithUserComplementaryObject\n+      summary: Set role for user and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: setRoleWithUserComplementaryObject\n+              description: \"input to setRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - users\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                users:\n+                  type: array\n+                  description: \"List of user ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}", "originalCommit": "ce4e64033c71a7a647877c261fc529daee979c11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM4MjAwMg==", "url": "https://github.com/CESNET/perun/pull/2569#discussion_r381382002", "bodyText": "The type is PerunBean.", "author": "martin-kuba", "createdAt": "2020-02-19T16:17:58Z", "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -1422,6 +1445,201 @@ paths:\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n \n+  /json/authzResolver/getRichAdmins:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getAuthzRichAdmins\n+      summary: Gets all rich admins\n+      description: Returns all managers for complementaryObject and role with specified attributes.\n+      parameters:\n+        - $ref: '#/components/parameters/role'\n+        - $ref: '#/components/parameters/complementaryObjectId'\n+        - $ref: '#/components/parameters/complementaryObjectName'\n+        - { name: specificAttributes,\n+            description: \"list of specified attributes which are needed in object richUser\",\n+            schema: {\n+              type: array,\n+              items: {\n+                type: string\n+              }\n+            },\n+            in: query,\n+            required: true\n+        }\n+        - { name: allUserAttributes,\n+            description: \"When true, do not specify attributes through list and return them all in objects richUser. Ignoring list of specific attributes\",\n+            schema: {\n+              type: boolean,\n+              default: false\n+            },\n+            in: query,\n+            required: false\n+        }\n+        - { name: onlyDirectAdmins,\n+            description: \"When true, return only direct users of the complementary object for role with specific attributes\",\n+            schema: {\n+              type: boolean,\n+              default: true\n+            },\n+            in: query,\n+            required: false\n+        }\n+      responses:\n+        '200':\n+          $ref: \"#/components/schemas/ListOfRichUsersResponse\"\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/authzResolver/getAdminGroups:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getAuthzAdminGroups\n+      summary: Get all groups of managers (authorizedGroups) for complementaryObject and role\n+      parameters:\n+        - $ref: '#/components/parameters/role'\n+        - $ref: '#/components/parameters/complementaryObjectId'\n+        - $ref: '#/components/parameters/complementaryObjectName'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfGroupsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/authzResolver/setRole/u-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: setRoleWithUserComplementaryObject\n+      summary: Set role for user and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: setRoleWithUserComplementaryObject\n+              description: \"input to setRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - users\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                users:\n+                  type: array\n+                  description: \"List of user ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}\n+\n+  /json/authzResolver/unsetRole/u-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: unsetRoleWithUserComplementaryObject\n+      summary: Unset role for user and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: unsetRoleWithUserComplementaryObject\n+              description: \"input to unsetRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - users\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                users:\n+                  type: array\n+                  description: \"List of user ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}", "originalCommit": "ce4e64033c71a7a647877c261fc529daee979c11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM4MjIxNw==", "url": "https://github.com/CESNET/perun/pull/2569#discussion_r381382217", "bodyText": "dtto", "author": "martin-kuba", "createdAt": "2020-02-19T16:18:14Z", "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -1422,6 +1445,201 @@ paths:\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n \n+  /json/authzResolver/getRichAdmins:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getAuthzRichAdmins\n+      summary: Gets all rich admins\n+      description: Returns all managers for complementaryObject and role with specified attributes.\n+      parameters:\n+        - $ref: '#/components/parameters/role'\n+        - $ref: '#/components/parameters/complementaryObjectId'\n+        - $ref: '#/components/parameters/complementaryObjectName'\n+        - { name: specificAttributes,\n+            description: \"list of specified attributes which are needed in object richUser\",\n+            schema: {\n+              type: array,\n+              items: {\n+                type: string\n+              }\n+            },\n+            in: query,\n+            required: true\n+        }\n+        - { name: allUserAttributes,\n+            description: \"When true, do not specify attributes through list and return them all in objects richUser. Ignoring list of specific attributes\",\n+            schema: {\n+              type: boolean,\n+              default: false\n+            },\n+            in: query,\n+            required: false\n+        }\n+        - { name: onlyDirectAdmins,\n+            description: \"When true, return only direct users of the complementary object for role with specific attributes\",\n+            schema: {\n+              type: boolean,\n+              default: true\n+            },\n+            in: query,\n+            required: false\n+        }\n+      responses:\n+        '200':\n+          $ref: \"#/components/schemas/ListOfRichUsersResponse\"\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/authzResolver/getAdminGroups:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getAuthzAdminGroups\n+      summary: Get all groups of managers (authorizedGroups) for complementaryObject and role\n+      parameters:\n+        - $ref: '#/components/parameters/role'\n+        - $ref: '#/components/parameters/complementaryObjectId'\n+        - $ref: '#/components/parameters/complementaryObjectName'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfGroupsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/authzResolver/setRole/u-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: setRoleWithUserComplementaryObject\n+      summary: Set role for user and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: setRoleWithUserComplementaryObject\n+              description: \"input to setRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - users\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                users:\n+                  type: array\n+                  description: \"List of user ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}\n+\n+  /json/authzResolver/unsetRole/u-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: unsetRoleWithUserComplementaryObject\n+      summary: Unset role for user and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: unsetRoleWithUserComplementaryObject\n+              description: \"input to unsetRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - users\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                users:\n+                  type: array\n+                  description: \"List of user ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}\n+\n+\n+  /json/authzResolver/setRole/g-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: setRoleWithGroupComplementaryObject\n+      summary: Set role for authorizedGroup and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: setRoleWithGroupComplementaryObject\n+              description: \"input to unsetRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - authorizedGroups\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                authorizedGroups:\n+                  type: array\n+                  description: \"List of authorizedGroups ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}", "originalCommit": "ce4e64033c71a7a647877c261fc529daee979c11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM4MjM1OA==", "url": "https://github.com/CESNET/perun/pull/2569#discussion_r381382358", "bodyText": "dtto", "author": "martin-kuba", "createdAt": "2020-02-19T16:18:24Z", "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -1422,6 +1445,201 @@ paths:\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n \n+  /json/authzResolver/getRichAdmins:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getAuthzRichAdmins\n+      summary: Gets all rich admins\n+      description: Returns all managers for complementaryObject and role with specified attributes.\n+      parameters:\n+        - $ref: '#/components/parameters/role'\n+        - $ref: '#/components/parameters/complementaryObjectId'\n+        - $ref: '#/components/parameters/complementaryObjectName'\n+        - { name: specificAttributes,\n+            description: \"list of specified attributes which are needed in object richUser\",\n+            schema: {\n+              type: array,\n+              items: {\n+                type: string\n+              }\n+            },\n+            in: query,\n+            required: true\n+        }\n+        - { name: allUserAttributes,\n+            description: \"When true, do not specify attributes through list and return them all in objects richUser. Ignoring list of specific attributes\",\n+            schema: {\n+              type: boolean,\n+              default: false\n+            },\n+            in: query,\n+            required: false\n+        }\n+        - { name: onlyDirectAdmins,\n+            description: \"When true, return only direct users of the complementary object for role with specific attributes\",\n+            schema: {\n+              type: boolean,\n+              default: true\n+            },\n+            in: query,\n+            required: false\n+        }\n+      responses:\n+        '200':\n+          $ref: \"#/components/schemas/ListOfRichUsersResponse\"\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/authzResolver/getAdminGroups:\n+    get:\n+      tags:\n+        - AuthzResolver\n+      operationId: getAuthzAdminGroups\n+      summary: Get all groups of managers (authorizedGroups) for complementaryObject and role\n+      parameters:\n+        - $ref: '#/components/parameters/role'\n+        - $ref: '#/components/parameters/complementaryObjectId'\n+        - $ref: '#/components/parameters/complementaryObjectName'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfGroupsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/authzResolver/setRole/u-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: setRoleWithUserComplementaryObject\n+      summary: Set role for user and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: setRoleWithUserComplementaryObject\n+              description: \"input to setRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - users\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                users:\n+                  type: array\n+                  description: \"List of user ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}\n+\n+  /json/authzResolver/unsetRole/u-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: unsetRoleWithUserComplementaryObject\n+      summary: Unset role for user and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: unsetRoleWithUserComplementaryObject\n+              description: \"input to unsetRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - users\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                users:\n+                  type: array\n+                  description: \"List of user ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}\n+\n+\n+  /json/authzResolver/setRole/g-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: setRoleWithGroupComplementaryObject\n+      summary: Set role for authorizedGroup and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: setRoleWithGroupComplementaryObject\n+              description: \"input to unsetRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - authorizedGroups\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                authorizedGroups:\n+                  type: array\n+                  description: \"List of authorizedGroups ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}\n+\n+  /json/authzResolver/unsetRole/g-co:\n+    post:\n+      tags:\n+        - AuthzResolver\n+      operationId: unsetRoleWithGroupComplementaryObject\n+      summary: Unset role for authorizedGroup and complementaryObject\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/VoidResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+      requestBody:\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              title: unsetRoleWithGroupComplementaryObject\n+              description: \"input to unsetRoleWithUserComplementaryObject\"\n+              type: object\n+              required:\n+                - role\n+                - authorizedGroups\n+                - complementaryObject\n+              properties:\n+                role: {type: string, nullable: false}\n+                authorizedGroups:\n+                  type: array\n+                  description: \"List of authorizedGroups ids\"\n+                  nullable: false\n+                  items:\n+                    type: integer\n+                complementaryObject: {type: object, description: \"Object (e.g.: vo | group | facility ) to associate role and user with.\", nullable: false}", "originalCommit": "ce4e64033c71a7a647877c261fc529daee979c11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "73e6397c637ccaa5fe2570f991a60bf7f7b64972", "url": "https://github.com/CESNET/perun/commit/73e6397c637ccaa5fe2570f991a60bf7f7b64972", "message": "OpenAPI authz resolver manager methods implementation\n\n* Added configurations for missing authz resolver manager methods in OpenAPI", "committedDate": "2020-02-19T16:27:40Z", "type": "commit"}, {"oid": "73e6397c637ccaa5fe2570f991a60bf7f7b64972", "url": "https://github.com/CESNET/perun/commit/73e6397c637ccaa5fe2570f991a60bf7f7b64972", "message": "OpenAPI authz resolver manager methods implementation\n\n* Added configurations for missing authz resolver manager methods in OpenAPI", "committedDate": "2020-02-19T16:27:40Z", "type": "forcePushed"}]}