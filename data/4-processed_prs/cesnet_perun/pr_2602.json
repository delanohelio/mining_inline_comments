{"pr_number": 2602, "pr_title": "OpenAPI - Tasks manager implemented", "pr_createdAt": "2020-03-03T14:43:37Z", "pr_url": "https://github.com/CESNET/perun/pull/2602", "timeline": [{"oid": "0d121711aba64f09ffa87f086a7441c8d3be4d75", "url": "https://github.com/CESNET/perun/commit/0d121711aba64f09ffa87f086a7441c8d3be4d75", "message": "OpenAPI - Tasks manager implemented\n* tasks manager methods implemented\n* added new schemas, responses, parameters\n* repaired documentation in TasksManagerMethod", "committedDate": "2020-03-03T14:41:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ4ODcwNg==", "url": "https://github.com/CESNET/perun/pull/2602#discussion_r387488706", "bodyText": "You can add here a link to the external docs. https://perun-aai.org/documentation/technical-documentation/rpc-api/rpc-javadoc-TasksManager.html", "author": "Vojtech-Sassmann", "createdAt": "2020-03-04T07:29:05Z", "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -1630,6 +1803,8 @@ tags:\n     description: VosManager RPC API in Perun\n     externalDocs:\n       url: https://perun-aai.org/documentation/technical-documentation/rpc-api/rpc-javadoc-VosManager.html\n+  - name: TasksManager\n+    description: TasksManager RPC API in Perun\n ", "originalCommit": "0d121711aba64f09ffa87f086a7441c8d3be4d75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5MDg0Ng==", "url": "https://github.com/CESNET/perun/pull/2602#discussion_r387490846", "bodyText": "This method actually takes a parameter with the name voId instead of vo.", "author": "Vojtech-Sassmann", "createdAt": "2020-03-04T07:35:35Z", "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -8900,3 +9075,265 @@ paths:\n           $ref: '#/components/responses/ListOfResourcesResponse'\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n+\n+  #################################################\n+  #                                               #\n+  # TasksManager                                  #\n+  #                                               #\n+  #################################################\n+\n+  /json/tasksManager/getTask:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTask\n+      summary: Returns a task.\n+      parameters:\n+        - $ref: '#/components/parameters/serviceId'\n+        - $ref: '#/components/parameters/facilityId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/TaskResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/listAllTasks:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: listAllTasks\n+      summary: Returns all tasks.\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTasksResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/listAllTasksForFacility:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: listAllTasksForFacility\n+      summary: Returns all tasks associated with selected facility.\n+      parameters:\n+        - $ref: '#/components/parameters/facilityId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTasksResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/isThereSuchTask:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: isThereSuchTask\n+      summary: Whether task exists.\n+      parameters:\n+        - $ref: '#/components/parameters/serviceId'\n+        - $ref: '#/components/parameters/facilityId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/IntegerResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/countTasks:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: countTasks\n+      summary: Returns the count of all tasks.\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/IntegerResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResults:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResults\n+      summary: Returns all task results.\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultsByTask:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultsByTask\n+      summary:  Return list of TaskResults by a Task.\n+      parameters:\n+        - $ref: '#/components/parameters/taskId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultsForGUIByTaskOnlyNewest:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultsForGUIByTaskOnlyNewest\n+      summary:  Return list of only newest TaskResults by a Task for GUI.\n+      parameters:\n+        - $ref: '#/components/parameters/taskId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultsForGUIByTaskAndDestination:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultsForGUIByTaskAndDestination\n+      summary:  Return list of TaskResults by a Task and destination for GUI.\n+      parameters:\n+        - $ref: '#/components/parameters/taskId'\n+        - $ref: '#/components/parameters/destinationId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultsForGUIByTask:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultsForGUIByTask\n+      summary:  Return list of TaskResults by a Task for GUI.\n+      parameters:\n+        - $ref: '#/components/parameters/taskId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultById:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultById\n+      summary:  Returns TaskResult by its id.\n+      parameters:\n+        - $ref: '#/components/parameters/taskResultId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/TaskResultResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskById:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskById\n+      summary:  Returns Task by its id\n+      parameters:\n+        - $ref: '#/components/parameters/id'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/TaskResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getFacilityState:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getFacilityState\n+      summary:   Return propagation status of facility.\n+      parameters:\n+        - $ref: '#/components/parameters/facilityId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/FacilityStateResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getAllFacilitiesStates:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getAllFacilitiesStates\n+      summary: Return propagation status of all facilities in Perun/Vo.\n+      parameters:\n+        - $ref: '#/components/parameters/optionalVoId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfFacilityStatesResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getAllResourcesState:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getAllResourcesState\n+      summary: Return propagation status of all resources related to VO.\n+      parameters:\n+        - $ref: '#/components/parameters/voId'", "originalCommit": "0d121711aba64f09ffa87f086a7441c8d3be4d75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ5MTMxOQ==", "url": "https://github.com/CESNET/perun/pull/2602#discussion_r387491319", "bodyText": "If you send a list of values in the URL parameters (and not in the request body), the name must end with the [] brackets.", "author": "Vojtech-Sassmann", "createdAt": "2020-03-04T07:36:53Z", "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -8900,3 +9075,265 @@ paths:\n           $ref: '#/components/responses/ListOfResourcesResponse'\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n+\n+  #################################################\n+  #                                               #\n+  # TasksManager                                  #\n+  #                                               #\n+  #################################################\n+\n+  /json/tasksManager/getTask:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTask\n+      summary: Returns a task.\n+      parameters:\n+        - $ref: '#/components/parameters/serviceId'\n+        - $ref: '#/components/parameters/facilityId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/TaskResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/listAllTasks:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: listAllTasks\n+      summary: Returns all tasks.\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTasksResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/listAllTasksForFacility:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: listAllTasksForFacility\n+      summary: Returns all tasks associated with selected facility.\n+      parameters:\n+        - $ref: '#/components/parameters/facilityId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTasksResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/isThereSuchTask:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: isThereSuchTask\n+      summary: Whether task exists.\n+      parameters:\n+        - $ref: '#/components/parameters/serviceId'\n+        - $ref: '#/components/parameters/facilityId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/IntegerResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/countTasks:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: countTasks\n+      summary: Returns the count of all tasks.\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/IntegerResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResults:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResults\n+      summary: Returns all task results.\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultsByTask:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultsByTask\n+      summary:  Return list of TaskResults by a Task.\n+      parameters:\n+        - $ref: '#/components/parameters/taskId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultsForGUIByTaskOnlyNewest:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultsForGUIByTaskOnlyNewest\n+      summary:  Return list of only newest TaskResults by a Task for GUI.\n+      parameters:\n+        - $ref: '#/components/parameters/taskId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultsForGUIByTaskAndDestination:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultsForGUIByTaskAndDestination\n+      summary:  Return list of TaskResults by a Task and destination for GUI.\n+      parameters:\n+        - $ref: '#/components/parameters/taskId'\n+        - $ref: '#/components/parameters/destinationId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultsForGUIByTask:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultsForGUIByTask\n+      summary:  Return list of TaskResults by a Task for GUI.\n+      parameters:\n+        - $ref: '#/components/parameters/taskId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfTaskResultsResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultById:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultById\n+      summary:  Returns TaskResult by its id.\n+      parameters:\n+        - $ref: '#/components/parameters/taskResultId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/TaskResultResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskById:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskById\n+      summary:  Returns Task by its id\n+      parameters:\n+        - $ref: '#/components/parameters/id'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/TaskResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getFacilityState:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getFacilityState\n+      summary:   Return propagation status of facility.\n+      parameters:\n+        - $ref: '#/components/parameters/facilityId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/FacilityStateResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getAllFacilitiesStates:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getAllFacilitiesStates\n+      summary: Return propagation status of all facilities in Perun/Vo.\n+      parameters:\n+        - $ref: '#/components/parameters/optionalVoId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfFacilityStatesResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getAllResourcesState:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getAllResourcesState\n+      summary: Return propagation status of all resources related to VO.\n+      parameters:\n+        - $ref: '#/components/parameters/voId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfResourceStatesResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n+\n+  /json/tasksManager/getTaskResultsForDestinations:\n+    get:\n+      tags:\n+        - TasksManager\n+      operationId: getTaskResultsForDestinations\n+      summary: Returns task results for defined destinations.\n+      parameters:\n+        - name: destinations", "originalCommit": "0d121711aba64f09ffa87f086a7441c8d3be4d75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "373cb9bd09e54cf25b8e362bf7e50a15bb257305", "url": "https://github.com/CESNET/perun/commit/373cb9bd09e54cf25b8e362bf7e50a15bb257305", "message": "OpenAPI - task manager implemented\n* changes according to review", "committedDate": "2020-03-04T14:43:43Z", "type": "commit"}]}