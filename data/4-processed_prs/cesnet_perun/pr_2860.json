{"pr_number": 2860, "pr_title": "Core - dont remove non-required u-f attributes", "pr_createdAt": "2020-08-18T13:09:37Z", "pr_url": "https://github.com/CESNET/perun/pull/2860", "timeline": [{"oid": "3af8f36167db6f75cbc54a0514f88d8603de41b3", "url": "https://github.com/CESNET/perun/commit/3af8f36167db6f75cbc54a0514f88d8603de41b3", "message": "Core - dont remove non-required u-f attributes\n\n* The old implementation of deleteMember was trying to find out, which\nattributes for corresponding user will not be required anymore, after the\nmember deletion. This is not something we want. We want to persist u-f\nattributes, even if they are not required, because the user might return\nto the facility and we want him to get the same attributes. Also, if the\nmember was at first manually removed from his groups, this would not\nhappen and all u-f would remain set.", "committedDate": "2020-08-18T13:19:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIxMzI1MA==", "url": "https://github.com/CESNET/perun/pull/2860#discussion_r472213250", "bodyText": "It seems that the user object is no longer needed, so you can remove also its initialization", "author": "balcirakpeter", "createdAt": "2020-08-18T13:51:56Z", "path": "perun-core/src/main/java/cz/metacentrum/perun/core/blImpl/MembersManagerBlImpl.java", "diffHunk": "@@ -138,15 +138,6 @@ public void deleteMember(PerunSession sess, Member member) throws MemberAlreadyR\n \t\t\tthrow new ConsistencyErrorException(\"Removing member who doesn't have corresponding user.\", e1);\n \t\t}\n \n-\t\tList<Facility> allowedFacilities = getPerunBl().getFacilitiesManagerBl().getAllowedFacilities(sess, user);", "originalCommit": "3af8f36167db6f75cbc54a0514f88d8603de41b3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg1NjEwNg==", "url": "https://github.com/CESNET/perun/pull/2860#discussion_r472856106", "bodyText": "You are right, I have removed it.", "author": "Vojtech-Sassmann", "createdAt": "2020-08-19T08:30:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIxMzI1MA=="}], "type": "inlineReview"}, {"oid": "0693ecbaa0cd8152ab8e872ee6f040b9c3d11eae", "url": "https://github.com/CESNET/perun/commit/0693ecbaa0cd8152ab8e872ee6f040b9c3d11eae", "message": "Core - dont remove non-required u-f attributes\n\n* The old implementation of deleteMember was trying to find out, which\nattributes for corresponding user will not be required anymore, after the\nmember deletion. This is not something we want. We want to persist u-f\nattributes, even if they are not required, because the user might return\nto the facility and we want him to get the same attributes. Also, if the\nmember was at first manually removed from his groups, this would not\nhappen and all u-f would remain set.", "committedDate": "2020-08-19T08:29:15Z", "type": "commit"}, {"oid": "0693ecbaa0cd8152ab8e872ee6f040b9c3d11eae", "url": "https://github.com/CESNET/perun/commit/0693ecbaa0cd8152ab8e872ee6f040b9c3d11eae", "message": "Core - dont remove non-required u-f attributes\n\n* The old implementation of deleteMember was trying to find out, which\nattributes for corresponding user will not be required anymore, after the\nmember deletion. This is not something we want. We want to persist u-f\nattributes, even if they are not required, because the user might return\nto the facility and we want him to get the same attributes. Also, if the\nmember was at first manually removed from his groups, this would not\nhappen and all u-f would remain set.", "committedDate": "2020-08-19T08:29:15Z", "type": "forcePushed"}]}