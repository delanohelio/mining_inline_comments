{"pr_number": 2570, "pr_title": "Openapi facility", "pr_createdAt": "2020-02-19T12:58:49Z", "pr_url": "https://github.com/CESNET/perun/pull/2570", "timeline": [{"oid": "9261c41a7f0502b5379f22b5e7d2cfe291db7e1a", "url": "https://github.com/CESNET/perun/commit/9261c41a7f0502b5379f22b5e7d2cfe291db7e1a", "message": "OpenAPI - facility manager implemented\n* added new descriptions of methods to the openApi\n* also added new schemas, responses and parameters where needed", "committedDate": "2020-02-19T12:03:40Z", "type": "commit"}, {"oid": "534cf23ca5bfde3f69e7d1e243f16668acc6b757", "url": "https://github.com/CESNET/perun/commit/534cf23ca5bfde3f69e7d1e243f16668acc6b757", "message": "OpenAPI - facility manager implemented\n* make different operationId of every operation", "committedDate": "2020-02-19T12:56:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM2NzM3MA==", "url": "https://github.com/CESNET/perun/pull/2570#discussion_r381367370", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    users: { type: array, items: { $ref: '#/components/schemas/User' } }\n          \n          \n            \n                    users: { type: array, items: { $ref: '#/components/schemas/RichUser' } }", "author": "martin-kuba", "createdAt": "2020-02-19T15:58:06Z", "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -430,6 +430,24 @@ components:\n               items:\n                 type: integer\n \n+    ContactGroup:\n+      type: object\n+      properties:\n+        name: { type: string }\n+        facility: { $ref: '#/components/schemas/Facility' }\n+        groups: { type: array, items: { $ref: '#/components/schemas/Group' } }\n+        owners: { type: array, items: { $ref: '#/components/schemas/Owner' } }\n+        users: { type: array, items: { $ref: '#/components/schemas/User' } }", "originalCommit": "534cf23ca5bfde3f69e7d1e243f16668acc6b757", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjUzOTU0NA==", "url": "https://github.com/CESNET/perun/pull/2570#discussion_r382539544", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              /json/facilitiesManager/getAllowedUsers:\n          \n          \n            \n              /json/facilitiesManager/getAllowedUsers/v-f-s:\n          \n      \n    \n    \n  \n\nThere are also other versions of this method and might be in the future added to this file.", "author": "Vojtech-Sassmann", "createdAt": "2020-02-21T11:46:31Z", "path": "perun-openapi/openapi.yml", "diffHunk": "@@ -5032,60 +5160,457 @@ paths:\n         default:\n           $ref: '#/components/responses/ExceptionResponse'\n \n+  /json/facilitiesManager/getFacilitiesWhereUserIsAdmin:\n+    get:\n+      tags:\n+        - FacilitiesManager\n+      operationId: getFacilitiesWhereUserIsAdmin\n+      summary: Returns list of Facilities, where the user is an Administrator.\n+      parameters:\n+        - $ref: '#/components/parameters/userId'\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfFacilitiesResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n \n-  #TODO getRichAdmins\n-\n-  #TODO getRichAdminsWithAttributes\n+  /json/facilitiesManager/getFacilitiesByHostName:\n+    get:\n+      tags:\n+        - FacilitiesManager\n+      operationId: getFacilitiesByHostName\n+      summary: Return all facilities where exists host with the specific hostname\n+      parameters:\n+        - { name: hostname, schema: { type: string }, in: query, required: true, description: \"specific hostname\"}\n+      responses:\n+        '200':\n+          $ref: '#/components/responses/ListOfFacilitiesResponse'\n+        default:\n+          $ref: '#/components/responses/ExceptionResponse'\n \n-  #TODO getRichAdminsWithSpecificAttributes\n+  /json/facilitiesManager/getAllowedUsers:", "originalCommit": "534cf23ca5bfde3f69e7d1e243f16668acc6b757", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjUzOTc5MQ==", "url": "https://github.com/CESNET/perun/pull/2570#discussion_r382539791", "bodyText": "You should also add a TODO mentioning that there are missing some versions of this method.", "author": "Vojtech-Sassmann", "createdAt": "2020-02-21T11:47:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjUzOTU0NA=="}], "type": "inlineReview"}, {"oid": "905fc2be1ef5c3c51ef0fddc8a0226d7199005bf", "url": "https://github.com/CESNET/perun/commit/905fc2be1ef5c3c51ef0fddc8a0226d7199005bf", "message": "OpenAPI - facility manager implemented\n* changes according to review", "committedDate": "2020-02-25T12:44:08Z", "type": "commit"}, {"oid": "7ae679d49434958fe1a423f51573a3b66292ef39", "url": "https://github.com/CESNET/perun/commit/7ae679d49434958fe1a423f51573a3b66292ef39", "message": "Merge branch 'master' into openapiFacility", "committedDate": "2020-02-28T09:09:30Z", "type": "commit"}]}