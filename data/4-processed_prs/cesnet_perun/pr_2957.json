{"pr_number": 2957, "pr_title": "Fix policies for sponsor methods", "pr_createdAt": "2020-10-28T19:51:08Z", "pr_url": "https://github.com/CESNET/perun/pull/2957", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzcyODg2OQ==", "url": "https://github.com/CESNET/perun/pull/2957#discussion_r513728869", "bodyText": "I do not think you want to split this policy into two. When you call method sponsorMember you don't have the SPONSORSHIP role with the member yet. therefore, what you want to use is this:\n  sponsor-sponsorMember_Member_User_LocalDate_policy:\n    policy_roles:\n      - SPONSOR: Vo\n        SELF: User\n    include_policies:\n      - default_policy", "author": "balcirakpeter", "createdAt": "2020-10-28T20:09:11Z", "path": "perun-base/src/main/resources/perun-roles.yml", "diffHunk": "@@ -2471,9 +2471,15 @@ perun_policies:\n     include_policies:\n       - default_policy\n \n-  sponsorMember_Member_User_LocalDate_policy:\n+  sponsored-sponsorMember_Member_User_LocalDate_policy:", "originalCommit": "ecc115319da95f6922131f98471c05733c0a8ddb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzczNDEyNw==", "url": "https://github.com/CESNET/perun/pull/2957#discussion_r513734127", "bodyText": "Actually, it has to be split. But the policy is wrong.", "author": "Vojtech-Sassmann", "createdAt": "2020-10-28T20:18:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzcyODg2OQ=="}], "type": "inlineReview"}, {"oid": "f7bcaba0bc641705a9645034c3df6e3590b3536d", "url": "https://github.com/CESNET/perun/commit/f7bcaba0bc641705a9645034c3df6e3590b3536d", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated. One\nwill be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them.", "committedDate": "2020-10-28T20:13:05Z", "type": "forcePushed"}, {"oid": "3c6805e840205b1244a8f30de75b6253151d351d", "url": "https://github.com/CESNET/perun/commit/3c6805e840205b1244a8f30de75b6253151d351d", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated. One\nwill be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them.", "committedDate": "2020-10-28T20:13:45Z", "type": "forcePushed"}, {"oid": "f3384b964a68279a0a5335a419fdade5e9690bab", "url": "https://github.com/CESNET/perun/commit/f3384b964a68279a0a5335a419fdade5e9690bab", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policy for the removeSponsors method has to be duplicated.\nOne will be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them.", "committedDate": "2020-10-28T20:14:04Z", "type": "forcePushed"}, {"oid": "d0e5393396d48f4ef0ba1116ec8c93426dd8a28b", "url": "https://github.com/CESNET/perun/commit/d0e5393396d48f4ef0ba1116ec8c93426dd8a28b", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated.\nOne will be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them.", "committedDate": "2020-10-28T20:17:20Z", "type": "commit"}, {"oid": "d0e5393396d48f4ef0ba1116ec8c93426dd8a28b", "url": "https://github.com/CESNET/perun/commit/d0e5393396d48f4ef0ba1116ec8c93426dd8a28b", "message": "Fix policies for sponsor methods\n\n* We wanted sponsors to be able call methods `removeSponsor` and\n`sponsorMember`. We also don't want VoAdmins to do this, this is\njob for sponsors.\n* However, the policies for these methods have to be duplicated.\nOne will be resolved with the sponsor and the other one with the sponored\nmember. Only this way we can define roles which should be relevant only\nto one of them.", "committedDate": "2020-10-28T20:17:20Z", "type": "forcePushed"}]}