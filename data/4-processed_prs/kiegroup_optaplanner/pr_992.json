{"pr_number": 992, "pr_title": "Add dependencies repository before mvn install", "pr_createdAt": "2020-10-27T08:10:45Z", "pr_url": "https://github.com/kiegroup/optaplanner/pull/992", "timeline": [{"oid": "cbb5578f11e056f28edcd3d6305d8ffb512f287f", "url": "https://github.com/kiegroup/optaplanner/commit/cbb5578f11e056f28edcd3d6305d8ffb512f287f", "message": "Add dependencies repository before mvn install", "committedDate": "2020-10-27T08:04:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQ5MDEzMA==", "url": "https://github.com/kiegroup/optaplanner/pull/992#discussion_r512490130", "bodyText": "Same comment => https://github.com/kiegroup/optaplanner/pull/993/files#r512489805", "author": "radtriste", "createdAt": "2020-10-27T08:17:33Z", "path": "Jenkinsfile.deploy", "diffHunk": "@@ -98,10 +98,7 @@ pipeline {\n                         sh \"echo '\\n-B -s ${MAVEN_SETTINGS_FILE}' | tee -a optaplanner/.mvn/maven.config\"\n                         if (params.MAVEN_DEPENDENCIES_REPOSITORY != '') {\n                             sh \"echo '\\n-Denforcer.skip=true' | tee -a optaplanner/.mvn/maven.config\"\n-                            sh \"sed -i 's|<repositories>|<repositories><repository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></repository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                            sh \"sed -i 's|<pluginRepositories>|<pluginRepositories><pluginRepository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></pluginRepository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                            sh \"sed -i 's|external:\\\\*|external:*,!staging|g' ${MAVEN_SETTINGS_FILE}\"\n-                            // Done to allow Maven to download release artifacts from MAVEN_DEPENDENCIES_REPOSITORY\n+                            addRepositoryToSettings(params.MAVEN_DEPENDENCIES_REPOSITORY, env.MAVEN_SETTINGS_FILE)", "originalCommit": "cbb5578f11e056f28edcd3d6305d8ffb512f287f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3f9efb5fa49bebe63b888ccdc2aa9da51433a5a0", "url": "https://github.com/kiegroup/optaplanner/commit/3f9efb5fa49bebe63b888ccdc2aa9da51433a5a0", "message": "Store settings in env variable", "committedDate": "2020-10-27T09:02:40Z", "type": "commit"}]}