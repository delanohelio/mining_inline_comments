{"pr_number": 873, "pr_title": "Upgrade Quarkus to 1.7.0.Final", "pr_createdAt": "2020-08-10T07:27:38Z", "pr_url": "https://github.com/kiegroup/optaplanner/pull/873", "timeline": [{"oid": "d2fc908c4a34ab7dc552ce510bc21b1af54b6cf4", "url": "https://github.com/kiegroup/optaplanner/commit/d2fc908c4a34ab7dc552ce510bc21b1af54b6cf4", "message": "Upgrade Quarkus to 1.7.0.Final", "committedDate": "2020-08-10T07:25:25Z", "type": "commit"}, {"oid": "e9d5dc77aba75ef3ce02600570a3209668893fb3", "url": "https://github.com/kiegroup/optaplanner/commit/e9d5dc77aba75ef3ce02600570a3209668893fb3", "message": "Remove obsolete version overrides", "committedDate": "2020-08-10T08:08:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzgxNTI2MA==", "url": "https://github.com/kiegroup/optaplanner/pull/873#discussion_r467815260", "bodyText": "The quarkus version should be defined in optaplanner-build-parent I think, but we can't import the quarkus-bom there, not even in depMgmt, because it's a platform bom (not a user bom), so it contains groupId's from other artifacts, messing up our dep tree.", "author": "ge0ffrey", "createdAt": "2020-08-10T10:29:38Z", "path": "optaplanner-quarkus-integration/pom.xml", "diffHunk": "@@ -24,43 +24,10 @@\n   <url>https://www.optaplanner.org</url>\n \n   <properties>\n-    <version.io.quarkus>1.6.0.Final</version.io.quarkus>\n-\n-    <!-- TODO remove if https://issues.redhat.com/browse/PLANNER-2005 is fixed for 8.x -->\n-    <!-- TODO Extending kie-parent 7 is extremely dangerous and messy because it's not aligned to quarkus -->\n-    <version.asm>7.3.1</version.asm>\n-    <version.commons-cli>1.4</version.commons-cli>\n-    <version.commons-codec>1.13</version.commons-codec>\n-    <version.com.google.guava>27.0.1-jre</version.com.google.guava>\n-    <version.com.google.inject.guice>4.2.1</version.com.google.inject.guice>\n-    <version.org.apache.httpcomponents.httpclient>4.5.12</version.org.apache.httpcomponents.httpclient>\n-    <version.org.apache.httpcomponents.httpcore>4.4.13</version.org.apache.httpcomponents.httpcore>\n-    <version.org.apache.maven>3.6.3</version.org.apache.maven>\n-    <version.org.apache.maven.plugin-tools>3.6.0</version.org.apache.maven.plugin-tools>\n-    <version.org.apache.maven.wagon>3.3.3</version.org.apache.maven.wagon>\n-    <version.org.codehaus.plexus.plexus-classworlds>2.6.0</version.org.codehaus.plexus.plexus-classworlds>\n-    <version.org.codehaus.plexus.plexus-containers>2.1.0</version.org.codehaus.plexus.plexus-containers>\n-    <version.org.codehaus.plexus.plexus-interpolation>1.25</version.org.codehaus.plexus.plexus-interpolation>\n-    <version.org.codehaus.plexus.plexus-utils>3.2.1</version.org.codehaus.plexus.plexus-utils>\n-    <version.org.eclipse.sisu>0.3.4</version.org.eclipse.sisu>\n-    <version.org.jsoup>1.11.3</version.org.jsoup>\n-    <version.org.junit>5.6.2</version.org.junit>\n-    <version.org.sonatype.plexus.plexus-sec-dispatcher>1.4</version.org.sonatype.plexus.plexus-sec-dispatcher>\n-    <version.org.wildfly.common>1.5.4.Final-format-001</version.org.wildfly.common>\n-    <version.org.ow2.asm>8.0.1</version.org.ow2.asm>\n-    <version.org.jboss.jandex>2.1.3.Final</version.org.jboss.jandex>\n-\n-\n-    <version.org.jboss.resteasy>4.5.3.Final</version.org.jboss.resteasy>\n-    <version.com.fasterxml.jackson>2.10.3</version.com.fasterxml.jackson>\n-    <version.com.fasterxml.jackson.databind>2.10.3</version.com.fasterxml.jackson.databind>\n+    <version.io.quarkus>1.7.0.Final</version.io.quarkus>", "originalCommit": "e9d5dc77aba75ef3ce02600570a3209668893fb3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzgxNTkxNQ==", "url": "https://github.com/kiegroup/optaplanner/pull/873#discussion_r467815915", "bodyText": "Great to see all these removed. Are we sure for each of these that our dependency tree if it contains it somewhere (for example optaplanner-jackson also depends on jackson) that it uses a version that is the same or higher (but not lower) than the versions we're removing here?", "author": "ge0ffrey", "createdAt": "2020-08-10T10:30:59Z", "path": "optaplanner-quarkus-integration/pom.xml", "diffHunk": "@@ -24,43 +24,10 @@\n   <url>https://www.optaplanner.org</url>\n \n   <properties>\n-    <version.io.quarkus>1.6.0.Final</version.io.quarkus>\n-\n-    <!-- TODO remove if https://issues.redhat.com/browse/PLANNER-2005 is fixed for 8.x -->\n-    <!-- TODO Extending kie-parent 7 is extremely dangerous and messy because it's not aligned to quarkus -->\n-    <version.asm>7.3.1</version.asm>\n-    <version.commons-cli>1.4</version.commons-cli>\n-    <version.commons-codec>1.13</version.commons-codec>\n-    <version.com.google.guava>27.0.1-jre</version.com.google.guava>\n-    <version.com.google.inject.guice>4.2.1</version.com.google.inject.guice>\n-    <version.org.apache.httpcomponents.httpclient>4.5.12</version.org.apache.httpcomponents.httpclient>\n-    <version.org.apache.httpcomponents.httpcore>4.4.13</version.org.apache.httpcomponents.httpcore>\n-    <version.org.apache.maven>3.6.3</version.org.apache.maven>\n-    <version.org.apache.maven.plugin-tools>3.6.0</version.org.apache.maven.plugin-tools>\n-    <version.org.apache.maven.wagon>3.3.3</version.org.apache.maven.wagon>\n-    <version.org.codehaus.plexus.plexus-classworlds>2.6.0</version.org.codehaus.plexus.plexus-classworlds>\n-    <version.org.codehaus.plexus.plexus-containers>2.1.0</version.org.codehaus.plexus.plexus-containers>\n-    <version.org.codehaus.plexus.plexus-interpolation>1.25</version.org.codehaus.plexus.plexus-interpolation>\n-    <version.org.codehaus.plexus.plexus-utils>3.2.1</version.org.codehaus.plexus.plexus-utils>\n-    <version.org.eclipse.sisu>0.3.4</version.org.eclipse.sisu>\n-    <version.org.jsoup>1.11.3</version.org.jsoup>\n-    <version.org.junit>5.6.2</version.org.junit>\n-    <version.org.sonatype.plexus.plexus-sec-dispatcher>1.4</version.org.sonatype.plexus.plexus-sec-dispatcher>\n-    <version.org.wildfly.common>1.5.4.Final-format-001</version.org.wildfly.common>\n-    <version.org.ow2.asm>8.0.1</version.org.ow2.asm>\n-    <version.org.jboss.jandex>2.1.3.Final</version.org.jboss.jandex>\n-\n-\n-    <version.org.jboss.resteasy>4.5.3.Final</version.org.jboss.resteasy>\n-    <version.com.fasterxml.jackson>2.10.3</version.com.fasterxml.jackson>\n-    <version.com.fasterxml.jackson.databind>2.10.3</version.com.fasterxml.jackson.databind>", "originalCommit": "e9d5dc77aba75ef3ce02600570a3209668893fb3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzg0NzIxMA==", "url": "https://github.com/kiegroup/optaplanner/pull/873#discussion_r467847210", "bodyText": "Checked with the dependency:tree; also tests passed (locally).", "author": "rsynek", "createdAt": "2020-08-10T11:41:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzgxNTkxNQ=="}], "type": "inlineReview"}, {"oid": "deec787013b17824016c1c401f8d7e2cf301b8b0", "url": "https://github.com/kiegroup/optaplanner/commit/deec787013b17824016c1c401f8d7e2cf301b8b0", "message": "Move quarkus version to the build parent pom", "committedDate": "2020-08-10T11:39:25Z", "type": "commit"}, {"oid": "fd9c17687719f2239b0a0e6741ce7f4f6bf73102", "url": "https://github.com/kiegroup/optaplanner/commit/fd9c17687719f2239b0a0e6741ce7f4f6bf73102", "message": "Update quarkus version in build.gradle", "committedDate": "2020-08-10T16:10:03Z", "type": "commit"}, {"oid": "fd9c17687719f2239b0a0e6741ce7f4f6bf73102", "url": "https://github.com/kiegroup/optaplanner/commit/fd9c17687719f2239b0a0e6741ce7f4f6bf73102", "message": "Update quarkus version in build.gradle", "committedDate": "2020-08-10T16:10:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM3NDQyMQ==", "url": "https://github.com/kiegroup/optaplanner/pull/873#discussion_r471374421", "bodyText": "What's the difference between \"enforcedPlatform\" and \"platform\"?", "author": "ge0ffrey", "createdAt": "2020-08-17T10:04:33Z", "path": "optaplanner-quickstarts/quarkus-school-timetabling/build.gradle", "diffHunk": "@@ -14,9 +14,10 @@ repositories {\n }\n \n dependencies {\n-    implementation enforcedPlatform(\"io.quarkus:quarkus-universe-bom:1.4.2.Final\")\n-    implementation 'io.quarkus:quarkus-optaplanner'\n-    implementation 'io.quarkus:quarkus-optaplanner-jackson'\n+    implementation platform(\"io.quarkus:quarkus-universe-bom:1.7.0.Final\")", "originalCommit": "fd9c17687719f2239b0a0e6741ce7f4f6bf73102", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM5NDg5NA==", "url": "https://github.com/kiegroup/optaplanner/pull/873#discussion_r471394894", "bodyText": "\"platform\" works pretty much the same way as importing a BOM in maven. \"enforcedPlatform\" overrides whatever is declared before or after that => the BOM always wins.", "author": "rsynek", "createdAt": "2020-08-17T10:43:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM3NDQyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM3NDk3Nw==", "url": "https://github.com/kiegroup/optaplanner/pull/873#discussion_r471374977", "bodyText": "The gradle build was broken due to this missing test dependency.\nYes, we need CI to somehow run the gradle build for the quickstarts too, maybe from a maven profile in the directory above? Separate issue/PR in any case. Quarkus will probably do that too, maybe we can learn from how they support both maven and gradle in their CI.\nIn any case, for us, our scope limited gradle only to the quickstarts (maven first, gradle second). We will not and must not use gradle anywhere else. So ideally, the gradle build verfication is part of the maven build.", "author": "ge0ffrey", "createdAt": "2020-08-17T10:05:33Z", "path": "optaplanner-quickstarts/quarkus-school-timetabling/build.gradle", "diffHunk": "@@ -14,9 +14,10 @@ repositories {\n }\n \n dependencies {\n-    implementation enforcedPlatform(\"io.quarkus:quarkus-universe-bom:1.4.2.Final\")\n-    implementation 'io.quarkus:quarkus-optaplanner'\n-    implementation 'io.quarkus:quarkus-optaplanner-jackson'\n+    implementation platform(\"io.quarkus:quarkus-universe-bom:1.7.0.Final\")\n+    implementation \"org.optaplanner:optaplanner-quarkus:${optaplannerVersion}\"\n+    implementation \"org.optaplanner:optaplanner-quarkus-jackson:${optaplannerVersion}\"\n+    implementation \"org.optaplanner:optaplanner-test:${optaplannerVersion}\"", "originalCommit": "fd9c17687719f2239b0a0e6741ce7f4f6bf73102", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM3NTQyMg==", "url": "https://github.com/kiegroup/optaplanner/pull/873#discussion_r471375422", "bodyText": "@rsynek This separate issue/PR, is this something you could take a look at some time? (no rush)", "author": "ge0ffrey", "createdAt": "2020-08-17T10:06:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM3NDk3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM5OTcyNg==", "url": "https://github.com/kiegroup/optaplanner/pull/873#discussion_r471399726", "bodyText": "Quarkus does it this way for their gradle support (the quarkus gradle plugin):\nhttps://github.com/quarkusio/quarkus/blob/master/devtools/gradle/pom.xml#L75\nFor quickstarts, they use only maven.", "author": "rsynek", "createdAt": "2020-08-17T10:54:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM3NDk3Nw=="}], "type": "inlineReview"}, {"oid": "b87209712c43fe0e5fee4ca6d3bcfbcde273a41c", "url": "https://github.com/kiegroup/optaplanner/commit/b87209712c43fe0e5fee4ca6d3bcfbcde273a41c", "message": "Remove deprecated quarkus-bom-deployment", "committedDate": "2020-08-18T07:46:52Z", "type": "commit"}]}