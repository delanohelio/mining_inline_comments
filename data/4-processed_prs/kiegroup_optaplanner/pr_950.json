{"pr_number": 950, "pr_title": "PLANNER-2187 Use java 11 minimum for OptaPlanner 8", "pr_createdAt": "2020-09-30T15:10:59Z", "pr_url": "https://github.com/kiegroup/optaplanner/pull/950", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg2MDQ0Mg==", "url": "https://github.com/kiegroup/optaplanner/pull/950#discussion_r498860442", "bodyText": "Nice one that this is cleaned up!", "author": "ge0ffrey", "createdAt": "2020-10-02T14:34:19Z", "path": "optaplanner-benchmark/src/main/java/org/optaplanner/benchmark/impl/DefaultPlannerBenchmark.java", "diffHunk": "@@ -140,14 +140,7 @@ private void warmUp() {\n         long timeLeftTotal = plannerBenchmarkResult.getWarmUpTimeMillisSpentLimit();\n         int parallelBenchmarkCount = plannerBenchmarkResult.getParallelBenchmarkCount();\n         int solverBenchmarkResultCount = plannerBenchmarkResult.getSolverBenchmarkResultList().size();\n-        /*\n-         * cyclesCount needs to be long, as opposed to its natural int,\n-         * otherwise JDK 11 compiler uses Math.floorDiv(long, int), which is only available on JDK 9+.\n-         * When such compiled code is then used on Java 8, there is a NoSuchMethodError.\n-         * All is fine When the code is compiled on JDK 8, the compiler will use the good old Math.floorDiv(long, long).\n-         * TODO Remove when JDK 8 is no longer supported.\n-         */\n-        long cyclesCount = ConfigUtils.ceilDivide(solverBenchmarkResultCount, parallelBenchmarkCount);\n+        int cyclesCount = ConfigUtils.ceilDivide(solverBenchmarkResultCount, parallelBenchmarkCount);", "originalCommit": "0430772d587484edc1c9e1cbf437e97aaf5b0e03", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg2MTE1OQ==", "url": "https://github.com/kiegroup/optaplanner/pull/950#discussion_r498861159", "bodyText": "Overwrite property <version.dependency.plugin> instead, just like we have this property:\n<version.surefire.plugin>2.22.2</version.surefire.plugin>", "author": "ge0ffrey", "createdAt": "2020-10-02T14:35:39Z", "path": "optaplanner-build-parent/pom.xml", "diffHunk": "@@ -356,6 +357,12 @@\n   <build>\n     <pluginManagement>\n       <plugins>\n+        <plugin>\n+          <groupId>org.apache.maven.plugins</groupId>\n+          <artifactId>maven-dependency-plugin</artifactId>\n+          <!-- The first version that supports analysis of classes compiled by Java 11. -->\n+          <version>3.1.2</version>", "originalCommit": "0430772d587484edc1c9e1cbf437e97aaf5b0e03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ0OTczNg==", "url": "https://github.com/kiegroup/optaplanner/pull/950#discussion_r499449736", "bodyText": "Good catch, thanks!", "author": "rsynek", "createdAt": "2020-10-05T09:08:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg2MTE1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg3MjkxMQ==", "url": "https://github.com/kiegroup/optaplanner/pull/950#discussion_r498872911", "bodyText": "How does this work?\nShould the master branch's file mention all branches?\nOr should each branch's file mention its own branch?", "author": "ge0ffrey", "createdAt": "2020-10-02T14:54:50Z", "path": ".github/workflows/jpa_integration_ci.yml", "diffHunk": "@@ -6,11 +6,9 @@ on:\n   push:\n     branches:\n       - master\n-      - 7.x", "originalCommit": "0430772d587484edc1c9e1cbf437e97aaf5b0e03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQ0NTAxNQ==", "url": "https://github.com/kiegroup/optaplanner/pull/950#discussion_r499445015", "bodyText": "Each branch should have its own .yaml file(s) with a filter for that particular branch. I think the multiple branches mentioned in the .yaml file on the master branch is a shortcut if you want to build multiple branches using the same workflow.\nI would rather keep the branches separated. This test repo proves that triggering the CI on branches with different workflow definitions works: https://github.com/rsynek/github-actions-test/actions", "author": "rsynek", "createdAt": "2020-10-05T08:59:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODg3MjkxMQ=="}], "type": "inlineReview"}, {"oid": "fbf720f88f4c1e9eda5bbd93ba004aa74c28189e", "url": "https://github.com/kiegroup/optaplanner/commit/fbf720f88f4c1e9eda5bbd93ba004aa74c28189e", "message": "PLANNER-2187 Use java 11 minimum for OptaPlanner 8", "committedDate": "2020-10-05T09:04:08Z", "type": "forcePushed"}, {"oid": "4bf934d4429deb45ccdad3339a8a39ad1a2c244e", "url": "https://github.com/kiegroup/optaplanner/commit/4bf934d4429deb45ccdad3339a8a39ad1a2c244e", "message": "PLANNER-2187 Use java 11 minimum for OptaPlanner 8", "committedDate": "2020-10-07T10:57:35Z", "type": "commit"}, {"oid": "4bf934d4429deb45ccdad3339a8a39ad1a2c244e", "url": "https://github.com/kiegroup/optaplanner/commit/4bf934d4429deb45ccdad3339a8a39ad1a2c244e", "message": "PLANNER-2187 Use java 11 minimum for OptaPlanner 8", "committedDate": "2020-10-07T10:57:35Z", "type": "forcePushed"}]}