{"pr_number": 838, "pr_title": "PLANNER-2048 Remove xStreamAnnotatedClass", "pr_createdAt": "2020-07-16T12:32:27Z", "pr_url": "https://github.com/kiegroup/optaplanner/pull/838", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc2MTk3NQ==", "url": "https://github.com/kiegroup/optaplanner/pull/838#discussion_r455761975", "bodyText": "Are these actually necessary? Maybe there are in the XML, but in the code, I was always able to get away with just using XStreamSolutionFileIO.", "author": "triceo", "createdAt": "2020-07-16T12:52:28Z", "path": "optaplanner-examples/src/main/java/org/optaplanner/examples/cloudbalancing/persistence/CloudBalanceSolutionFileIO.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.optaplanner.examples.cloudbalancing.persistence;\n+\n+import org.optaplanner.examples.cloudbalancing.domain.CloudBalance;\n+import org.optaplanner.persistence.xstream.impl.domain.solution.XStreamSolutionFileIO;\n+\n+public class CloudBalanceSolutionFileIO extends XStreamSolutionFileIO<CloudBalance> {", "originalCommit": "1985be11ae48686048d72c7140ba79e7f10dea78", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc3MzM2NA==", "url": "https://github.com/kiegroup/optaplanner/pull/838#discussion_r455773364", "bodyText": "If you use the XStreamSolutionFileIO directly to read a data set, sure. But the benchmark config instantiates the SolutionFileIO class itself.\nAs the constructor requires a user to pass classes that are supposed to be serialized:\nXStreamSolutionFileIO(Class... xStreamAnnotatedClasses)\n\nwe would need another config code that reads these classes. And again, we are coupling the benchmark with a subset of possible SolutionFileIO implementations.", "author": "rsynek", "createdAt": "2020-07-16T13:10:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc2MTk3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc2MjUxMQ==", "url": "https://github.com/kiegroup/optaplanner/pull/838#discussion_r455762511", "bodyText": "Can we make it a top-level class? This dollar syntax just makes it more confusing to me.\n(Although it's nice to see that it works.)", "author": "triceo", "createdAt": "2020-07-16T12:53:22Z", "path": "optaplanner-benchmark/src/test/resources/org/optaplanner/benchmark/config/testBenchmarkConfig.xml", "diffHunk": "@@ -44,7 +44,7 @@\n       </localSearch>\n     </solver>\n     <problemBenchmarks>\n-      <xStreamAnnotatedClass>org.optaplanner.core.impl.testdata.domain.TestdataSolution</xStreamAnnotatedClass>\n+      <solutionFileIOClass>org.optaplanner.benchmark.config.PlannerBenchmarkConfigTest$TestdataSolutionFileIO</solutionFileIOClass>", "originalCommit": "1985be11ae48686048d72c7140ba79e7f10dea78", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc2OTA1NQ==", "url": "https://github.com/kiegroup/optaplanner/pull/838#discussion_r455769055", "bodyText": "Sure we can, but the class has nothing to offer outside the test case. I already use several nested classes for the SolverConfigTest and would rather not make them standalone top-level classes, as they basically do nothing.", "author": "rsynek", "createdAt": "2020-07-16T13:03:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc2MjUxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc2MzE4OQ==", "url": "https://github.com/kiegroup/optaplanner/pull/838#discussion_r455763189", "bodyText": "These changes appear unnecessary.", "author": "triceo", "createdAt": "2020-07-16T12:54:27Z", "path": "optaplanner-examples/src/main/resources/org/optaplanner/examples/cloudbalancing/optional/benchmark/cloudBalancingBenchmarkConfig.xml", "diffHunk": "@@ -60,95 +60,95 @@\n   </solverBenchmarkBluePrint>\n \n   <!--<solverBenchmark>-->\n-    <!--<name>First Fit</name>-->\n-    <!--<solver>-->\n-      <!--<constructionHeuristic>-->\n-        <!--<constructionHeuristicType>FIRST_FIT</constructionHeuristicType>-->\n-      <!--</constructionHeuristic>-->\n-    <!--</solver>-->\n+  <!--<name>First Fit</name>-->\n+  <!--<solver>-->\n+  <!--<constructionHeuristic>-->\n+  <!--<constructionHeuristicType>FIRST_FIT</constructionHeuristicType>-->\n+  <!--</constructionHeuristic>-->\n+  <!--</solver>-->\n   <!--</solverBenchmark>-->\n   <!--<solverBenchmark>-->\n-    <!--<name>First Fit Decreasing</name>-->\n-    <!--<solver>-->\n-      <!--<constructionHeuristic>-->\n-        <!--<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>-->\n-      <!--</constructionHeuristic>-->\n-    <!--</solver>-->\n+  <!--<name>First Fit Decreasing</name>-->\n+  <!--<solver>-->\n+  <!--<constructionHeuristic>-->\n+  <!--<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>-->\n+  <!--</constructionHeuristic>-->\n+  <!--</solver>-->\n   <!--</solverBenchmark>-->\n \n   <!--<solverBenchmark>-->\n-    <!--<name>Tabu Search</name>-->\n-    <!--<solver>-->\n-      <!--<constructionHeuristic>-->\n-        <!--<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>-->\n-      <!--</constructionHeuristic>-->\n-      <!--<localSearch>-->\n-        <!--<unionMoveSelector>-->\n-          <!--<changeMoveSelector/>-->\n-          <!--<swapMoveSelector/>-->\n-          <!--<pillarChangeMoveSelector/>-->\n-          <!--<pillarSwapMoveSelector/>-->\n-        <!--</unionMoveSelector>-->\n-        <!--<acceptor>-->\n-          <!--<entityTabuSize>7</entityTabuSize>-->\n-        <!--</acceptor>-->\n-        <!--<forager>-->\n-          <!--<acceptedCountLimit>1000</acceptedCountLimit>-->\n-        <!--</forager>-->\n-      <!--</localSearch>-->\n-    <!--</solver>-->\n+  <!--<name>Tabu Search</name>-->\n+  <!--<solver>-->\n+  <!--<constructionHeuristic>-->\n+  <!--<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>-->\n+  <!--</constructionHeuristic>-->\n+  <!--<localSearch>-->\n+  <!--<unionMoveSelector>-->\n+  <!--<changeMoveSelector/>-->\n+  <!--<swapMoveSelector/>-->\n+  <!--<pillarChangeMoveSelector/>-->\n+  <!--<pillarSwapMoveSelector/>-->\n+  <!--</unionMoveSelector>-->\n+  <!--<acceptor>-->\n+  <!--<entityTabuSize>7</entityTabuSize>-->\n+  <!--</acceptor>-->\n+  <!--<forager>-->\n+  <!--<acceptedCountLimit>1000</acceptedCountLimit>-->\n+  <!--</forager>-->\n+  <!--</localSearch>-->\n+  <!--</solver>-->\n   <!--</solverBenchmark>-->\n   <!--<solverBenchmark>-->\n-    <!--<name>Simulated Annealing</name>-->\n-    <!--<solver>-->\n-      <!--<constructionHeuristic>-->\n-        <!--<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>-->\n-      <!--</constructionHeuristic>-->\n-      <!--<localSearch>-->\n-        <!--<unionMoveSelector>-->\n-          <!--<changeMoveSelector/>-->\n-          <!--<swapMoveSelector/>-->\n-          <!--<pillarChangeMoveSelector/>-->\n-          <!--<pillarSwapMoveSelector/>-->\n-        <!--</unionMoveSelector>-->\n-        <!--<acceptor>-->\n-          <!--<simulatedAnnealingStartingTemperature>0hard/400soft</simulatedAnnealingStartingTemperature>-->\n-        <!--</acceptor>-->\n-        <!--<forager>-->\n-          <!--<acceptedCountLimit>4</acceptedCountLimit>-->\n-        <!--</forager>-->\n-      <!--</localSearch>-->\n-    <!--</solver>-->\n+  <!--<name>Simulated Annealing</name>-->\n+  <!--<solver>-->\n+  <!--<constructionHeuristic>-->\n+  <!--<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>-->\n+  <!--</constructionHeuristic>-->\n+  <!--<localSearch>-->\n+  <!--<unionMoveSelector>-->\n+  <!--<changeMoveSelector/>-->\n+  <!--<swapMoveSelector/>-->\n+  <!--<pillarChangeMoveSelector/>-->\n+  <!--<pillarSwapMoveSelector/>-->\n+  <!--</unionMoveSelector>-->\n+  <!--<acceptor>-->\n+  <!--<simulatedAnnealingStartingTemperature>0hard/400soft</simulatedAnnealingStartingTemperature>-->\n+  <!--</acceptor>-->\n+  <!--<forager>-->\n+  <!--<acceptedCountLimit>4</acceptedCountLimit>-->\n+  <!--</forager>-->\n+  <!--</localSearch>-->\n+  <!--</solver>-->\n   <!--</solverBenchmark>-->\n   <!--<solverBenchmark>-->\n-    <!--<name>Late Acceptance</name>-->\n-    <!--<solver>-->\n-      <!--<constructionHeuristic>-->\n-        <!--<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>-->\n-      <!--</constructionHeuristic>-->\n-      <!--<localSearch>-->\n-        <!--<unionMoveSelector>-->\n-          <!--<changeMoveSelector/>-->\n-          <!--<swapMoveSelector/>-->\n-          <!--<pillarChangeMoveSelector/>-->\n-          <!--<pillarSwapMoveSelector/>-->\n-        <!--</unionMoveSelector>-->\n-        <!--<acceptor>-->\n-          <!--<lateAcceptanceSize>400</lateAcceptanceSize>-->\n-        <!--</acceptor>-->\n-        <!--<forager>-->\n-          <!--<acceptedCountLimit>4</acceptedCountLimit>-->\n-        <!--</forager>-->\n-      <!--</localSearch>-->\n-    <!--</solver>-->\n+  <!--<name>Late Acceptance</name>-->\n+  <!--<solver>-->\n+  <!--<constructionHeuristic>-->\n+  <!--<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>-->\n+  <!--</constructionHeuristic>-->\n+  <!--<localSearch>-->\n+  <!--<unionMoveSelector>-->\n+  <!--<changeMoveSelector/>-->\n+  <!--<swapMoveSelector/>-->\n+  <!--<pillarChangeMoveSelector/>-->\n+  <!--<pillarSwapMoveSelector/>-->\n+  <!--</unionMoveSelector>-->\n+  <!--<acceptor>-->\n+  <!--<lateAcceptanceSize>400</lateAcceptanceSize>-->\n+  <!--</acceptor>-->\n+  <!--<forager>-->\n+  <!--<acceptedCountLimit>4</acceptedCountLimit>-->\n+  <!--</forager>-->\n+  <!--</localSearch>-->\n+  <!--</solver>-->\n   <!--</solverBenchmark>-->\n \n   <!--<solverBenchmark>-->\n-    <!--<name>BRANCH_AND_BOUND</name>-->\n-    <!--<solver>-->\n-      <!--<exhaustiveSearch>-->\n-        <!--<exhaustiveSearchType>BRANCH_AND_BOUND</exhaustiveSearchType>-->\n-      <!--</exhaustiveSearch>-->\n-    <!--</solver>-->\n+  <!--<name>BRANCH_AND_BOUND</name>-->\n+  <!--<solver>-->\n+  <!--<exhaustiveSearch>-->\n+  <!--<exhaustiveSearchType>BRANCH_AND_BOUND</exhaustiveSearchType>-->\n+  <!--</exhaustiveSearch>-->\n+  <!--</solver>-->\n   <!--</solverBenchmark>-->", "originalCommit": "1985be11ae48686048d72c7140ba79e7f10dea78", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc2NTUzOA==", "url": "https://github.com/kiegroup/optaplanner/pull/838#discussion_r455765538", "bodyText": "Sorry, automatic formatting via IDE which escaped my attention. Will remove it.", "author": "rsynek", "createdAt": "2020-07-16T12:58:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc2MzE4OQ=="}], "type": "inlineReview"}, {"oid": "2435721ce2712eb0bf5fc35277d0d80bd3fb0a06", "url": "https://github.com/kiegroup/optaplanner/commit/2435721ce2712eb0bf5fc35277d0d80bd3fb0a06", "message": "PLANNER-2048 Remove xStreamAnnotatedClass", "committedDate": "2020-07-16T15:10:55Z", "type": "forcePushed"}, {"oid": "88e6d0b8beec4d88337b5f229e622e1aa86be9c7", "url": "https://github.com/kiegroup/optaplanner/commit/88e6d0b8beec4d88337b5f229e622e1aa86be9c7", "message": "PLANNER-2048 Remove xStreamAnnotatedClass", "committedDate": "2020-07-16T15:50:20Z", "type": "commit"}, {"oid": "88e6d0b8beec4d88337b5f229e622e1aa86be9c7", "url": "https://github.com/kiegroup/optaplanner/commit/88e6d0b8beec4d88337b5f229e622e1aa86be9c7", "message": "PLANNER-2048 Remove xStreamAnnotatedClass", "committedDate": "2020-07-16T15:50:20Z", "type": "forcePushed"}, {"oid": "e85aaa8044d154a7c63ad2339d1321ca8c50913e", "url": "https://github.com/kiegroup/optaplanner/commit/e85aaa8044d154a7c63ad2339d1321ca8c50913e", "message": "PLANNER-2048 Update documentation", "committedDate": "2020-07-16T16:04:26Z", "type": "commit"}]}