{"pr_number": 876, "pr_title": "PLANNER-496 Ensure that nearby selection code is correct", "pr_createdAt": "2020-08-11T14:58:42Z", "pr_url": "https://github.com/kiegroup/optaplanner/pull/876", "timeline": [{"oid": "ec81ce8876af772d9f0f5ee4c3348300b95c1f83", "url": "https://github.com/kiegroup/optaplanner/commit/ec81ce8876af772d9f0f5ee4c3348300b95c1f83", "message": "PLANNER-496 Ensure that nearby selection code is correct", "committedDate": "2020-08-11T14:54:32Z", "type": "commit"}, {"oid": "fc7d5861afbb35826008df1f143afee8a111712a", "url": "https://github.com/kiegroup/optaplanner/commit/fc7d5861afbb35826008df1f143afee8a111712a", "message": "Fix comment", "committedDate": "2020-08-12T08:03:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzA1MjgyMw==", "url": "https://github.com/kiegroup/optaplanner/pull/876#discussion_r473052823", "bodyText": "\"Programming error\" isn't a term we use often. It's not an \"impossible state\", I guess?", "author": "ge0ffrey", "createdAt": "2020-08-19T14:01:31Z", "path": "optaplanner-core/src/main/java/org/optaplanner/core/impl/heuristic/selector/entity/nearby/NearEntityNearbyEntitySelector.java", "diffHunk": "@@ -42,7 +43,12 @@\n     public NearEntityNearbyEntitySelector(EntitySelector childEntitySelector, EntitySelector originEntitySelector,\n             NearbyDistanceMeter nearbyDistanceMeter, NearbyRandom nearbyRandom, boolean randomSelection) {\n         this.childEntitySelector = childEntitySelector;\n-        this.originEntitySelector = originEntitySelector;\n+        if (!(originEntitySelector instanceof MimicReplayingEntitySelector)) {\n+            // In order to select a nearby entity, we must first have something to be near by.\n+            throw new IllegalStateException(\"Programming error: Nearby entity selector (\" + this +", "originalCommit": "fc7d5861afbb35826008df1f143afee8a111712a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "58a51bc5c4503a9e3ba0d352062fc1ea250a5f4e", "url": "https://github.com/kiegroup/optaplanner/commit/58a51bc5c4503a9e3ba0d352062fc1ea250a5f4e", "message": "Address review comment", "committedDate": "2020-08-19T14:52:05Z", "type": "commit"}]}