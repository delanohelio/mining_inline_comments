{"pr_number": 4229, "pr_title": "PLFM-6494", "pr_createdAt": "2020-11-05T16:33:36Z", "pr_url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4229", "timeline": [{"oid": "339b2c4fdb7b851c8e8740157ec5a461b532ed13", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/339b2c4fdb7b851c8e8740157ec5a461b532ed13", "message": "PLFM-6494 better error message on duplicate PAT name", "committedDate": "2020-10-30T14:15:56Z", "type": "commit"}, {"oid": "b72e97571066350715a3d377a9bce749c4ac48f2", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/b72e97571066350715a3d377a9bce749c4ac48f2", "message": "add missing mock", "committedDate": "2020-11-05T13:55:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODI5MjA5Mw==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4229#discussion_r518292093", "bodyText": "please chain your exceptions, i.e.\nthrow new IllegalArgumentException(DUPLICATE_TOKEN_NAME_MSG, e);", "author": "brucehoff", "createdAt": "2020-11-05T19:03:57Z", "path": "services/repository-managers/src/main/java/org/sagebionetworks/repo/manager/authentication/PersonalAccessTokenManagerImpl.java", "diffHunk": "@@ -120,7 +123,11 @@ public AccessTokenGenerationResponse issueToken(UserInfo userInfo, String access\n \t\trecord.setCreatedOn(now);\n \t\trecord.setLastUsed(now);\n \n-\t\trecord = personalAccessTokenDao.createTokenRecord(record);\n+\t\ttry {\n+\t\t\trecord = personalAccessTokenDao.createTokenRecord(record);\n+\t\t} catch (DuplicateKeyException e) {\n+\t\t\tthrow new IllegalArgumentException(DUPLICATE_TOKEN_NAME_MSG);", "originalCommit": "b72e97571066350715a3d377a9bce749c4ac48f2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0920ce3fb0eb69a743cf12593e1ed6165b984cd6", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/0920ce3fb0eb69a743cf12593e1ed6165b984cd6", "message": "Chain the exception", "committedDate": "2020-11-05T19:07:04Z", "type": "commit"}]}