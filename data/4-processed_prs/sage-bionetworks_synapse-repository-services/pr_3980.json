{"pr_number": 3980, "pr_title": "PLFM-6046", "pr_createdAt": "2020-03-26T02:28:51Z", "pr_url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980", "timeline": [{"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/28ebf39393f99064946971f17e6731d8cc5a4ef2", "message": "Remove sendAfterCommit() calls", "committedDate": "2020-03-26T00:07:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODc4NA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r398958784", "bodyText": "We should not remove this, the WIKI object type has a SNS topic in the stack builder.", "author": "marcomarasca", "createdAt": "2020-03-26T23:51:16Z", "path": "lib/jdomodels/src/main/java/org/sagebionetworks/repo/model/dbo/wikiV2/V2DBOWikiPageDaoImpl.java", "diffHunk": "@@ -359,8 +359,6 @@ public V2WikiPage updateWikiPage(V2WikiPage wikiPage,\n \t\t\tbasicDao.createBatch(attachmentsToInsert);\n \t\t}\n \t\t\n-\t\t// Send the change message\n-\t\ttransactionalMessenger.sendMessageAfterCommit(newDbo, ChangeType.UPDATE);", "originalCommit": "28ebf39393f99064946971f17e6731d8cc5a4ef2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODg0NA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r398958844", "bodyText": "We should not remove this, the WIKI object type has a SNS topic in the stack builder.", "author": "marcomarasca", "createdAt": "2020-03-26T23:51:28Z", "path": "lib/jdomodels/src/test/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImplTest.java", "diffHunk": "@@ -92,7 +92,6 @@ public void testLockActivityAndIncrementEtag() throws Exception {\n \t\t\n \t\tChangeType type = ChangeType.UPDATE;\n \t\tString returnedNewEtag = activityDao.lockActivityAndGenerateEtag(id.toString(), oldEtag, type);\n-\t\tverify(mockMessenger).sendMessageAfterCommit(eq(mockDbo), eq(type));", "originalCommit": "28ebf39393f99064946971f17e6731d8cc5a4ef2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTA4MzcxMQ==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r399083711", "bodyText": "This one still needed (activity)", "author": "xschildw", "createdAt": "2020-03-27T07:44:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODg0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTUxNDk4MA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r399514980", "bodyText": "Right, wrong class :)", "author": "marcomarasca", "createdAt": "2020-03-27T20:14:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODg0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2MDY4OA==", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r398960688", "bodyText": "We should also remove the message that is sent when deleting the activity", "author": "marcomarasca", "createdAt": "2020-03-26T23:57:20Z", "path": "lib/jdomodels/src/main/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImpl.java", "diffHunk": "@@ -136,7 +135,6 @@ public String lockActivityAndGenerateEtag(String id, String eTag, ChangeType cha\n \t\t// Get a new etag\n \t\tDBOActivity dbo = getDBO(id);\n \t\tdbo.seteTag(UUID.randomUUID().toString());\n-\t\ttransactionalMessenger.sendMessageAfterCommit(dbo, changeType);\n \t\treturn dbo.getEtag();\n \t}\n ", "originalCommit": "28ebf39393f99064946971f17e6731d8cc5a4ef2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7792405be9319e58884aeeffd72262f549940c2c", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/7792405be9319e58884aeeffd72262f549940c2c", "message": "Fix the mess...", "committedDate": "2020-03-27T07:45:55Z", "type": "commit"}, {"oid": "d5d5bf423d0fed30c2b47f580616d5c316721f28", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/d5d5bf423d0fed30c2b47f580616d5c316721f28", "message": "More cleanup", "committedDate": "2020-03-29T19:08:40Z", "type": "commit"}, {"oid": "9df07cc736bcb8a97183a83caef8548e168693af", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/9df07cc736bcb8a97183a83caef8548e168693af", "message": "Merge branch 'develop' into dev-plfm-6046", "committedDate": "2020-03-29T19:18:00Z", "type": "commit"}]}