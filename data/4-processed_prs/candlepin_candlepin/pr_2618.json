{"pr_number": 2618, "pr_title": "Adjust pom generation to handle spec-first changes", "pr_createdAt": "2020-02-18T19:01:42Z", "pr_url": "https://github.com/candlepin/candlepin/pull/2618", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxODAzOA==", "url": "https://github.com/candlepin/candlepin/pull/2618#discussion_r381518038", "bodyText": "Current master is using version 4.2.3", "author": "barnabycourt", "createdAt": "2020-02-19T20:12:43Z", "path": "build.gradle", "diffHunk": "@@ -262,6 +263,55 @@ project(\":api\") {\n         withXml = false\n     }\n \n+    task pom {\n+        doLast {\n+            conf2ScopeMappings.addMapping(MavenPlugin.COMPILE_PRIORITY + 1, configurations.implementation, 'compile')\n+            pom {\n+                project {\n+                    name \"Candlepin API\"\n+                    description \"OpenAPI-based API for Candlepin\"\n+                    parent {\n+                        groupId \"org.candlepin\"\n+                        artifactId \"candlepin-parent\"\n+                        version \"2.0\"\n+                        relativePath \"..\"\n+                    }\n+                    packaging \"jar\"\n+                    build([:]) {\n+                        plugins {\n+                            plugin {\n+                                groupId 'org.openapitools'\n+                                artifactId 'openapi-generator-maven-plugin'\n+                                version '4.0.2'", "originalCommit": "e7585973df9ad0c5ddbe4f6b2853d9109c556c23", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUzNzQ0Mg==", "url": "https://github.com/candlepin/candlepin/pull/2618#discussion_r381537442", "bodyText": "Ack, addressed by specifying a var in the buildscript section for openapi_version, and then referencing in buildscript and pom generation section. Also, rebased against master.", "author": "kahowell", "createdAt": "2020-02-19T20:53:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTUxODAzOA=="}], "type": "inlineReview"}, {"oid": "9509fcd54559828eeede17e31607048ebce53208", "url": "https://github.com/candlepin/candlepin/commit/9509fcd54559828eeede17e31607048ebce53208", "message": "Adjust pom generation to handle spec-first changes\n\nAdds a pom task to the api sub-project, which does the following:\n\n- uses openapi generator maven plugin to generate code\n- uses dependencyManagement gradle plugin to include dependencyManagement in the pom.\n\nApplies the spec version plugin to the API sub-project, so that the API version ends up with a proper version.\n\nUpdates generated pom.xml files.\n\nTo test:\n\n```\n./gradlew pom; mvn package\n```\n\nWithout this change, the above fails; with it, it succeeds.", "committedDate": "2020-02-19T20:50:24Z", "type": "commit"}, {"oid": "9509fcd54559828eeede17e31607048ebce53208", "url": "https://github.com/candlepin/candlepin/commit/9509fcd54559828eeede17e31607048ebce53208", "message": "Adjust pom generation to handle spec-first changes\n\nAdds a pom task to the api sub-project, which does the following:\n\n- uses openapi generator maven plugin to generate code\n- uses dependencyManagement gradle plugin to include dependencyManagement in the pom.\n\nApplies the spec version plugin to the API sub-project, so that the API version ends up with a proper version.\n\nUpdates generated pom.xml files.\n\nTo test:\n\n```\n./gradlew pom; mvn package\n```\n\nWithout this change, the above fails; with it, it succeeds.", "committedDate": "2020-02-19T20:50:24Z", "type": "forcePushed"}]}