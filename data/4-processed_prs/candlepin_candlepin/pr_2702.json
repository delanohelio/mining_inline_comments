{"pr_number": 2702, "pr_title": "ENT-1847: Port ActivationKeyResource to spec-first", "pr_createdAt": "2020-05-15T11:48:29Z", "pr_url": "https://github.com/candlepin/candlepin/pull/2702", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMwNDY5MA==", "url": "https://github.com/candlepin/candlepin/pull/2702#discussion_r427304690", "bodyText": "ID should be capitalized when used in a description or display message.", "author": "Ceiu", "createdAt": "2020-05-19T13:32:31Z", "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -30,6 +30,336 @@ paths:\n         default:\n           $ref: '#/components/responses/default'\n \n+  /activation_keys:\n+    get:\n+      description: Retrieves a list of activation keys\n+      tags:\n+        - Activation Key\n+      operationId: findActivationKey\n+      x-java-response:\n+        type: Iterable\n+        isContainer: true\n+      security: []\n+      responses:\n+        200:\n+          description: List of activation keys\n+          content:\n+            application/json:\n+              schema:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/ActivationKeyDTO'\n+        default:\n+          $ref: '#/components/responses/default'\n+\n+  /activation_keys/{activation_key_id}:\n+    get:\n+      description: Retrieves a single activation key\n+      tags:\n+        - Activation Key\n+      operationId: getActivationKey\n+      security: []\n+      parameters:\n+        - name: activation_key_id\n+          in: path\n+          description: The Id of activation key to retrieve", "originalCommit": "b51ce260d2de984d11b1d8643642efc36f5a1126", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc0NjM4Ng==", "url": "https://github.com/candlepin/candlepin/pull/2702#discussion_r427746386", "bodyText": "Done.", "author": "wolfdale", "createdAt": "2020-05-20T05:16:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMwNDY5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMwNTg1Mw==", "url": "https://github.com/candlepin/candlepin/pull/2702#discussion_r427305853", "bodyText": "There should be a comma somewhere in that list at the end. Any of the following would work, depending on your preference for the Oxford comma, and the intended coupling of \"null\" and \"empty\":\nActivation key ID is null, empty, or could not be found\nActivation key ID is null, empty or could not be found\nActivation key ID is null or empty, or could not be found", "author": "Ceiu", "createdAt": "2020-05-19T13:34:15Z", "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -30,6 +30,336 @@ paths:\n         default:\n           $ref: '#/components/responses/default'\n \n+  /activation_keys:\n+    get:\n+      description: Retrieves a list of activation keys\n+      tags:\n+        - Activation Key\n+      operationId: findActivationKey\n+      x-java-response:\n+        type: Iterable\n+        isContainer: true\n+      security: []\n+      responses:\n+        200:\n+          description: List of activation keys\n+          content:\n+            application/json:\n+              schema:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/ActivationKeyDTO'\n+        default:\n+          $ref: '#/components/responses/default'\n+\n+  /activation_keys/{activation_key_id}:\n+    get:\n+      description: Retrieves a single activation key\n+      tags:\n+        - Activation Key\n+      operationId: getActivationKey\n+      security: []\n+      parameters:\n+        - name: activation_key_id\n+          in: path\n+          description: The Id of activation key to retrieve\n+          required: true\n+          schema:\n+            type: string\n+      responses:\n+        200:\n+          description: Activation key\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ActivationKeyDTO'\n+        400:\n+          description: Activation key Id is null or empty or could not be found\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ExceptionMessage'\n+              example:\n+                displayMessage: Activation key Id is null or empty or could not be found", "originalCommit": "b51ce260d2de984d11b1d8643642efc36f5a1126", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc0NjQwNQ==", "url": "https://github.com/candlepin/candlepin/pull/2702#discussion_r427746405", "bodyText": "Done.", "author": "wolfdale", "createdAt": "2020-05-20T05:16:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMwNTg1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMwOTQ3Ng==", "url": "https://github.com/candlepin/candlepin/pull/2702#discussion_r427309476", "bodyText": "Lots of unnecessary capitalization here: \"Null,\" \"Empty,\" \"Unknown,\" and \"Activation key\" are not proper nouns and should not be capitalized. The service level/activation key name validation failure at the end is also a bit confusing, as it seems like it should be a separate message entirely with the way it's written.\nI'm assuming this is intending to collect information about every possible validation failure on the key as a whole, but that's likely going to date itself eventually. We should probably just focus on expressing that the validation failed somehow, and leave the details to the exception.", "author": "Ceiu", "createdAt": "2020-05-19T13:39:18Z", "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -30,6 +30,336 @@ paths:\n         default:\n           $ref: '#/components/responses/default'\n \n+  /activation_keys:\n+    get:\n+      description: Retrieves a list of activation keys\n+      tags:\n+        - Activation Key\n+      operationId: findActivationKey\n+      x-java-response:\n+        type: Iterable\n+        isContainer: true\n+      security: []\n+      responses:\n+        200:\n+          description: List of activation keys\n+          content:\n+            application/json:\n+              schema:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/ActivationKeyDTO'\n+        default:\n+          $ref: '#/components/responses/default'\n+\n+  /activation_keys/{activation_key_id}:\n+    get:\n+      description: Retrieves a single activation key\n+      tags:\n+        - Activation Key\n+      operationId: getActivationKey\n+      security: []\n+      parameters:\n+        - name: activation_key_id\n+          in: path\n+          description: The Id of activation key to retrieve\n+          required: true\n+          schema:\n+            type: string\n+      responses:\n+        200:\n+          description: Activation key\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ActivationKeyDTO'\n+        400:\n+          description: Activation key Id is null or empty or could not be found\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ExceptionMessage'\n+              example:\n+                displayMessage: Activation key Id is null or empty or could not be found\n+                requestUuid: c4347004-8792-41fe-a4d8-fccaa0d3898a\n+        default:\n+          $ref: '#/components/responses/default'\n+\n+    put:\n+      description: Updates an Activation Key\n+      tags:\n+        - Activation Key\n+      operationId: updateActivationKey\n+      security: []\n+      parameters:\n+        - name: activation_key_id\n+          in: path\n+          description: The Id of activation key to be updated\n+          required: true\n+          schema:\n+            type: string\n+      requestBody:\n+        description: Activation key to be updated\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              $ref: '#/components/schemas/ActivationKeyDTO'\n+      responses:\n+        200:\n+          description: Updated activation key\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ActivationKeyDTO'\n+        400:\n+          description: Validation failure, Null or Empty or Unknown Activation key Id. Either service level", "originalCommit": "b51ce260d2de984d11b1d8643642efc36f5a1126", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc0Njc3OQ==", "url": "https://github.com/candlepin/candlepin/pull/2702#discussion_r427746779", "bodyText": "Done", "author": "wolfdale", "createdAt": "2020-05-20T05:17:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMwOTQ3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMxMjE5MA==", "url": "https://github.com/candlepin/candlepin/pull/2702#discussion_r427312190", "bodyText": "This feels like another collection of all possible BadRequestExceptions. In this case it's better to be less explicit about any possible error (since that doesn't tell you anything anyway), and just focus on the type of issue it could be: invalid input or the pool could not be added.\nThough, honestly, this is a case where maybe we consider changing the exception type and http code for the rules exception, as those really aren't bad requests; but that's a separate discussion that would involve Katello.", "author": "Ceiu", "createdAt": "2020-05-19T13:42:51Z", "path": "api/candlepin-api-spec.yaml", "diffHunk": "@@ -30,6 +30,336 @@ paths:\n         default:\n           $ref: '#/components/responses/default'\n \n+  /activation_keys:\n+    get:\n+      description: Retrieves a list of activation keys\n+      tags:\n+        - Activation Key\n+      operationId: findActivationKey\n+      x-java-response:\n+        type: Iterable\n+        isContainer: true\n+      security: []\n+      responses:\n+        200:\n+          description: List of activation keys\n+          content:\n+            application/json:\n+              schema:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/ActivationKeyDTO'\n+        default:\n+          $ref: '#/components/responses/default'\n+\n+  /activation_keys/{activation_key_id}:\n+    get:\n+      description: Retrieves a single activation key\n+      tags:\n+        - Activation Key\n+      operationId: getActivationKey\n+      security: []\n+      parameters:\n+        - name: activation_key_id\n+          in: path\n+          description: The Id of activation key to retrieve\n+          required: true\n+          schema:\n+            type: string\n+      responses:\n+        200:\n+          description: Activation key\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ActivationKeyDTO'\n+        400:\n+          description: Activation key Id is null or empty or could not be found\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ExceptionMessage'\n+              example:\n+                displayMessage: Activation key Id is null or empty or could not be found\n+                requestUuid: c4347004-8792-41fe-a4d8-fccaa0d3898a\n+        default:\n+          $ref: '#/components/responses/default'\n+\n+    put:\n+      description: Updates an Activation Key\n+      tags:\n+        - Activation Key\n+      operationId: updateActivationKey\n+      security: []\n+      parameters:\n+        - name: activation_key_id\n+          in: path\n+          description: The Id of activation key to be updated\n+          required: true\n+          schema:\n+            type: string\n+      requestBody:\n+        description: Activation key to be updated\n+        required: true\n+        content:\n+          application/json:\n+            schema:\n+              $ref: '#/components/schemas/ActivationKeyDTO'\n+      responses:\n+        200:\n+          description: Updated activation key\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ActivationKeyDTO'\n+        400:\n+          description: Validation failure, Null or Empty or Unknown Activation key Id. Either service level\n+            or activation key name validation failure.\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ExceptionMessage'\n+              example:\n+                displayMessage: Validation failure, Null or Empty or Unknown Activation key Id.\n+                  Either service level or activation key name validation failure.\n+                requestUuid: c4347004-8792-41fe-a4d8-fccaa0d3898a\n+        default:\n+          $ref: '#/components/responses/default'\n+\n+    delete:\n+      description: Deletes an activation key\n+      tags:\n+        - Activation Key\n+      operationId: deleteActivationKey\n+      security: []\n+      parameters:\n+        - name: activation_key_id\n+          in: path\n+          description: The Id of activation key to be deleted\n+          required: true\n+          schema:\n+            type: string\n+      responses:\n+        204:\n+          description: A successful operation\n+        400:\n+          description: Activation key Id is null or empty or could not be found\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ExceptionMessage'\n+              example:\n+                displayMessage: Activation key Id is null or empty or could not be found\n+                requestUuid: c4347004-8792-41fe-a4d8-fccaa0d3898a\n+        default:\n+          $ref: '#/components/responses/default'\n+\n+  /activation_keys/{activation_key_id}/pools:\n+    get:\n+      description: Retrieves a list of pools based on the Activation Key\n+      tags:\n+        - Activation Key\n+      operationId: getActivationKeyPools\n+      security: []\n+      parameters:\n+        - name: activation_key_id\n+          in: path\n+          description: The Id of activation key\n+          required: true\n+          schema:\n+            type: string\n+      x-java-response:\n+        type: Iterable\n+        isContainer: true\n+      responses:\n+        200:\n+          description: List of pools based on the Activation Key\n+          content:\n+            application/json:\n+              schema:\n+                type: array\n+                items:\n+                  $ref: '#/components/schemas/PoolDTO'\n+        400:\n+          description: Activation key Id is null or empty or could not be found\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ExceptionMessage'\n+              example:\n+                displayMessage: Activation key Id is null or empty or could not be found\n+                requestUuid: c4347004-8792-41fe-a4d8-fccaa0d3898a\n+        default:\n+          $ref: '#/components/responses/default'\n+\n+  /activation_keys/{activation_key_id}/pools/{pool_id}:\n+    post:\n+      description: Adds a Pool to an Activation Key\n+      tags:\n+        - Activation Key\n+      operationId: addPoolToKey\n+      security: []\n+      parameters:\n+        - in: path\n+          name: activation_key_id\n+          description: Id of an activation key\n+          required: true\n+          schema:\n+            type: string\n+        - in: path\n+          name: pool_id\n+          description: Id of pool\n+          required: true\n+          schema:\n+            type: string\n+        - in: query\n+          name: quantity\n+          schema:\n+            type: integer\n+            format: int64\n+      responses:\n+        200:\n+          description: Pool added to activation key\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ActivationKeyDTO'\n+        400:\n+          description: Activation key Id is null or empty or either pool or activation key could not be", "originalCommit": "b51ce260d2de984d11b1d8643642efc36f5a1126", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc0Njc2NQ==", "url": "https://github.com/candlepin/candlepin/pull/2702#discussion_r427746765", "bodyText": "Simplified the description.", "author": "wolfdale", "createdAt": "2020-05-20T05:17:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMxMjE5MA=="}], "type": "inlineReview"}, {"oid": "d99bf0a7773ed3ffe286fad1ec75e8204af856f9", "url": "https://github.com/candlepin/candlepin/commit/d99bf0a7773ed3ffe286fad1ec75e8204af856f9", "message": "ENT-1847: Port ActivationKeyResource to spec-first", "committedDate": "2020-05-20T05:10:04Z", "type": "commit"}, {"oid": "d99bf0a7773ed3ffe286fad1ec75e8204af856f9", "url": "https://github.com/candlepin/candlepin/commit/d99bf0a7773ed3ffe286fad1ec75e8204af856f9", "message": "ENT-1847: Port ActivationKeyResource to spec-first", "committedDate": "2020-05-20T05:10:04Z", "type": "forcePushed"}]}