{"pr_number": 2711, "pr_title": "[F] Ported OwnerContentResource to spec-first (ENT-1878)", "pr_createdAt": "2020-05-26T18:20:20Z", "pr_url": "https://github.com/candlepin/candlepin/pull/2711", "timeline": [{"oid": "d00e8c0495c518db4f6060c92776c74ff6414db4", "url": "https://github.com/candlepin/candlepin/commit/d00e8c0495c518db4f6060c92776c74ff6414db4", "message": "Ported OwnerContentResource to spec-first\n\n- Changed the method name listContent to listOwnerContent and getContent to getOwnerContent\n- Changed the OwnerContentResourceTest file to test the right methods as above\n- Made changes in candlepin-api-spec for OwnerContentResource", "committedDate": "2020-05-26T18:02:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE2OTgyNw==", "url": "https://github.com/candlepin/candlepin/pull/2711#discussion_r431169827", "bodyText": "There is a couple of dependencies which are no longer used. We should remove them.", "author": "Januson", "createdAt": "2020-05-27T14:20:44Z", "path": "server/src/main/java/org/candlepin/resource/OwnerContentResource.java", "diffHunk": "@@ -51,26 +44,13 @@\n import java.util.LinkedList;\n import java.util.List;\n \n-import javax.ws.rs.Consumes;\n-import javax.ws.rs.DELETE;\n-import javax.ws.rs.GET;\n-import javax.ws.rs.POST;\n-import javax.ws.rs.PUT;\n-import javax.ws.rs.Path;\n-import javax.ws.rs.PathParam;\n-import javax.ws.rs.Produces;\n-import javax.ws.rs.core.MediaType;\n-\n-\n-\n /**\n  * OwnerContentResource\n  *\n  * Manage the content that exists in an organization.\n  */\n-@Path(\"/owners/{owner_key}/content\")\n-@Api(value = \"owners\", authorizations = { @Authorization(\"basic\") })\n-public class OwnerContentResource {\n+\n+public class OwnerContentResource implements OwnersApi {\n     private static Logger log = LoggerFactory.getLogger(OwnerContentResource.class);\n \n     private ContentCurator contentCurator;", "originalCommit": "d00e8c0495c518db4f6060c92776c74ff6414db4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg0NDYwMA==", "url": "https://github.com/candlepin/candlepin/pull/2711#discussion_r431844600", "bodyText": "I have removed the unused dependencies..", "author": "AmitMandliya", "createdAt": "2020-05-28T13:43:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE2OTgyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE5MTI0NA==", "url": "https://github.com/candlepin/candlepin/pull/2711#discussion_r431191244", "bodyText": "Unfortunately our resources do not trigger validation of incoming DTOs. We should inject DTOValidator and validate the DTOs. Take a look on DistributorVersionResource for example to see how it's used.", "author": "Januson", "createdAt": "2020-05-27T14:42:21Z", "path": "server/src/main/java/org/candlepin/resource/OwnerContentResource.java", "diffHunk": "@@ -226,12 +199,8 @@ private Content createContentImpl(Owner owner, ContentDTO content) {\n         return entity;\n     }\n \n-    @ApiOperation(notes = \"Creates a Content\", value = \"createContent\")\n-    @POST\n-    @Produces(MediaType.APPLICATION_JSON)\n-    @Consumes(MediaType.APPLICATION_JSON)\n-    public ContentDTO createContent(@PathParam(\"owner_key\") String ownerKey,\n-        @ApiParam(name = \"content\", required = true) ContentDTO content) {\n+    @Override\n+    public ContentDTO createContent(String ownerKey, ContentDTO content) {", "originalCommit": "d00e8c0495c518db4f6060c92776c74ff6414db4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTYwMDcyMA==", "url": "https://github.com/candlepin/candlepin/pull/2711#discussion_r431600720", "bodyText": "I have added validations in ContentDTO, the unit tests ran fine in my machine. However, the PR is failing with unittests:\n[1BCreating network \"unit-tests-jenkins-candlepin-candlepin-pullrequest-unittests-3264_default\" with driver \"bridge\" Couldn't connect to Docker daemon at http+docker://localhost - is it running?\nI am looking into the issue.", "author": "AmitMandliya", "createdAt": "2020-05-28T06:06:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE5MTI0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjA0MjUzNg==", "url": "https://github.com/candlepin/candlepin/pull/2711#discussion_r432042536", "bodyText": "Validations has been added in update and createBatchContent methods.", "author": "AmitMandliya", "createdAt": "2020-05-28T18:38:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE5MTI0NA=="}], "type": "inlineReview"}, {"oid": "236b7820c614377a1e15c6462e82c9d9539a12a4", "url": "https://github.com/candlepin/candlepin/commit/236b7820c614377a1e15c6462e82c9d9539a12a4", "message": "Added Validations to ContentDTO\n\n- Added Vvalidations to ContentDTO in createContent method", "committedDate": "2020-05-28T05:43:23Z", "type": "commit"}, {"oid": "6ee692ba7ca29929fa4268d52a280f95ea6bcc14", "url": "https://github.com/candlepin/candlepin/commit/6ee692ba7ca29929fa4268d52a280f95ea6bcc14", "message": "Added ContentDTO validations\n\nAdded validations in updateContent and createBatchContent", "committedDate": "2020-05-28T17:32:58Z", "type": "commit"}]}