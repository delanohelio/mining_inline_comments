{"pr_number": 2572, "pr_title": "Add custom openapi vendor extension to override collection type", "pr_createdAt": "2020-01-16T16:35:25Z", "pr_url": "https://github.com/candlepin/candlepin/pull/2572", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzU0Nzc4NA==", "url": "https://github.com/candlepin/candlepin/pull/2572#discussion_r367547784", "bodyText": "We can do something like:\n{{container_type}}{{^container_type}}java.util.List{{/container_type}}\nto have a default value of List so the standard behavior is retained, while still allowing us to provide our own containers for arrays.", "author": "Ceiu", "createdAt": "2020-01-16T17:18:47Z", "path": "buildSrc/src/main/resources/templates/returnTypeInterface.mustache", "diffHunk": "@@ -0,0 +1 @@\n+{{#vendorExtensions.x-java-response-stream-type}}java.util.stream.Stream<{{vendorExtensions.x-java-response-stream-type}}>{{/vendorExtensions.x-java-response-stream-type}}{{^vendorExtensions.x-java-response-stream-type}}{{{returnType}}}{{/vendorExtensions.x-java-response-stream-type}}", "originalCommit": "e7b834320939abd6f06adabfbca6094f2d089334", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzU5MDMwNQ==", "url": "https://github.com/candlepin/candlepin/pull/2572#discussion_r367590305", "bodyText": "@Ceiu I reworked a bit, now x-java-response-container-type specifies the container type (leave off to get List.", "author": "kahowell", "createdAt": "2020-01-16T18:52:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzU0Nzc4NA=="}], "type": "inlineReview"}, {"oid": "abdfa061678a56190503e9bc91dc777937977519", "url": "https://github.com/candlepin/candlepin/commit/abdfa061678a56190503e9bc91dc777937977519", "message": "Add custom openapi vendor extension to override collection type\n\nThis makes it so that if for an operation you specify a line such as:\n\n```yaml\nx-java-response-container-type: java.util.stream.Stream\n```\n\non an operation with a response return type of\n\n```yaml\nresponses:\n  200:\n    description: OK\n    content:\n      application/json:\n        schema:\n          type: array\n          items:\n            $ref: '#/components/schemas/Link'\n```\n\nthen the generated return type becomes `java.util.stream.Stream<Link>`\n\nSpecifically, this goes at the same level as `operationId`, because\nthere is not a easy way to get the vendor extension for a response\nincorporated into the return type.", "committedDate": "2020-01-16T18:47:21Z", "type": "commit"}, {"oid": "abdfa061678a56190503e9bc91dc777937977519", "url": "https://github.com/candlepin/candlepin/commit/abdfa061678a56190503e9bc91dc777937977519", "message": "Add custom openapi vendor extension to override collection type\n\nThis makes it so that if for an operation you specify a line such as:\n\n```yaml\nx-java-response-container-type: java.util.stream.Stream\n```\n\non an operation with a response return type of\n\n```yaml\nresponses:\n  200:\n    description: OK\n    content:\n      application/json:\n        schema:\n          type: array\n          items:\n            $ref: '#/components/schemas/Link'\n```\n\nthen the generated return type becomes `java.util.stream.Stream<Link>`\n\nSpecifically, this goes at the same level as `operationId`, because\nthere is not a easy way to get the vendor extension for a response\nincorporated into the return type.", "committedDate": "2020-01-16T18:47:21Z", "type": "forcePushed"}, {"oid": "24d4e3d242d514c787198701fe8220b38717ffc7", "url": "https://github.com/candlepin/candlepin/commit/24d4e3d242d514c787198701fe8220b38717ffc7", "message": "Specify template directory relative to $rootDir", "committedDate": "2020-01-16T18:57:00Z", "type": "commit"}]}