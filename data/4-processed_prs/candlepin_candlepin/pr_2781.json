{"pr_number": 2781, "pr_title": "org_migrator to python 3 and pipenv", "pr_createdAt": "2020-08-25T12:44:18Z", "pr_url": "https://github.com/candlepin/candlepin/pull/2781", "timeline": [{"oid": "b3635851cc48f23860f007c350ed13f3d9ab5bed", "url": "https://github.com/candlepin/candlepin/commit/b3635851cc48f23860f007c350ed13f3d9ab5bed", "message": "Migrate org_migrator to pipenv + python3", "committedDate": "2020-08-25T15:18:15Z", "type": "commit"}, {"oid": "b3635851cc48f23860f007c350ed13f3d9ab5bed", "url": "https://github.com/candlepin/candlepin/commit/b3635851cc48f23860f007c350ed13f3d9ab5bed", "message": "Migrate org_migrator to pipenv + python3", "committedDate": "2020-08-25T15:18:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU1MTIxNg==", "url": "https://github.com/candlepin/candlepin/pull/2781#discussion_r476551216", "bodyText": "We are still limited to Python2 in some environments, so this change can't go through. But we can make it compatible with python3 by changing it to:\nprint(\"Available orgs: %s\" % (list_orgs(db)))", "author": "Ceiu", "createdAt": "2020-08-25T15:46:36Z", "path": "server/bin/org_migrator/org_migrator.py", "diffHunk": "@@ -926,7 +926,7 @@ def main():\n                 log.error(\"No such org: %s\", args[0])\n \n         elif options.act_list:\n-            print \"Available orgs: %s\" % (list_orgs(db))\n+            print(f\"Available orgs: {list_orgs(db)}\")", "originalCommit": "b3635851cc48f23860f007c350ed13f3d9ab5bed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjU2MTA4Mw==", "url": "https://github.com/candlepin/candlepin/pull/2781#discussion_r476561083", "bodyText": "In line with the other Python2 compat change, can we keep the buffer type present? I've also added some warning output and a handler in the event the type isn't present:\n    def data_converter(obj):\n        if isinstance(obj, (bytearray, buffer, memoryview)):\n            return binascii.b2a_base64(obj)\n        if isinstance(obj, datetime.datetime):\n            return str(obj)\n\n        raise TypeError(\"Unexpected type: %s\" % (type(obj)))", "author": "Ceiu", "createdAt": "2020-08-25T16:00:55Z", "path": "server/bin/org_migrator/org_migrator.py", "diffHunk": "@@ -64,7 +64,7 @@ def list_orgs(db):\n \n def jsonify(data):\n     def data_converter(obj):\n-        if isinstance(obj, bytearray) or isinstance(obj, buffer):\n+        if isinstance(obj, (bytearray, memoryview)):", "originalCommit": "b3635851cc48f23860f007c350ed13f3d9ab5bed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}