{"pr_number": 2770, "pr_title": "ENT-2703: Jenkins isn't running unit tests of common package", "pr_createdAt": "2020-08-04T07:37:56Z", "pr_url": "https://github.com/candlepin/candlepin/pull/2770", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg3MDg0OQ==", "url": "https://github.com/candlepin/candlepin/pull/2770#discussion_r464870849", "bodyText": "Instead of doing cd everywhere, we should simplify things, and just run .gradlew test from the root directory.\nSo here this if block would become:\n    if [ -f ./gradlew ]; then\n        ./gradlew test\n\nand later on (right before we run the unit tests), we don't cd into server/ , but cd into the root dir (so cd $PROJECT_DIR turns into cd $CP_HOME. And we only do a cd $PROJECT_DIR later, once the unit tests are finished and before we setup qpid", "author": "nikosmoum", "createdAt": "2020-08-04T08:00:08Z", "path": "docker/candlepin-base/cp-test", "diffHunk": "@@ -45,6 +45,13 @@ build_lint() {\n build_unittest() {\n     UTCMD=$1\n     if [ -f ../gradlew ]; then\n+\n+        # set project to run units from the candlepin-common project\n+        cd ../common/\n+        ../gradlew test\n+\n+        # set project back to server\n+        cd ../server/", "originalCommit": "9a4fa33fec347803637e7e290756fac8f0110ff0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDkyNDk1OQ==", "url": "https://github.com/candlepin/candlepin/pull/2770#discussion_r464924959", "bodyText": "Agreed, simplified the code.", "author": "sonalidhome", "createdAt": "2020-08-04T09:33:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg3MDg0OQ=="}], "type": "inlineReview"}, {"oid": "5971dd67ba669fecc8ad3641d4f9c59c190a13b4", "url": "https://github.com/candlepin/candlepin/commit/5971dd67ba669fecc8ad3641d4f9c59c190a13b4", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence added the path of commons package to execute\n   the test of commons.", "committedDate": "2020-08-04T09:31:42Z", "type": "forcePushed"}, {"oid": "b833ff7d3c55bf4bf24508dc209aaafddbe0ad01", "url": "https://github.com/candlepin/candlepin/commit/b833ff7d3c55bf4bf24508dc209aaafddbe0ad01", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence directed to project path and executed\n   the test of all sub projects.", "committedDate": "2020-08-04T11:42:22Z", "type": "forcePushed"}, {"oid": "c893a8463803bf2145443ee16c4e6a3ca1ee602b", "url": "https://github.com/candlepin/candlepin/commit/c893a8463803bf2145443ee16c4e6a3ca1ee602b", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence directed to project path and executed\n   the test of all sub projects.", "committedDate": "2020-08-04T11:46:35Z", "type": "commit"}, {"oid": "c893a8463803bf2145443ee16c4e6a3ca1ee602b", "url": "https://github.com/candlepin/candlepin/commit/c893a8463803bf2145443ee16c4e6a3ca1ee602b", "message": "ENT-2703: Jenkins isn't running unit tests of common package\n - The project directory path is set to the server package.\n   This leads to execute the test only from the server package.\n   Hence directed to project path and executed\n   the test of all sub projects.", "committedDate": "2020-08-04T11:46:35Z", "type": "forcePushed"}]}