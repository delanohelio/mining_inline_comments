{"pr_number": 2978, "pr_title": "NMS-12650: Restart documentation", "pr_createdAt": "2020-04-16T21:17:03Z", "pr_url": "https://github.com/OpenNMS/opennms/pull/2978", "timeline": [{"oid": "4197cd5eb45e77033a1637d1654b690df81b6cf6", "url": "https://github.com/OpenNMS/opennms/commit/4197cd5eb45e77033a1637d1654b690df81b6cf6", "message": "NMS-12650/NMS-12588: Restart and thresholding documentation\n\nRestart/shutdown documentation\nUpdated thresholding to address formatting issues.", "committedDate": "2020-05-04T15:56:35Z", "type": "commit"}, {"oid": "5c35ec0d3628f6c820f6e2c58686da61490f42df", "url": "https://github.com/OpenNMS/opennms/commit/5c35ec0d3628f6c820f6e2c58686da61490f42df", "message": "NMS-12650: Updated restart.adoc\n\nIndicates that the procedure is an example of how to shutdown and restart.", "committedDate": "2020-05-04T15:58:27Z", "type": "commit"}, {"oid": "68cdbff087b8553c59261146507217a2573a638a", "url": "https://github.com/OpenNMS/opennms/commit/68cdbff087b8553c59261146507217a2573a638a", "message": "NMS-12599: Adding PDF dashboard document update\n\nAdded information on configuring Grafana endpoints.", "committedDate": "2020-05-04T16:00:43Z", "type": "commit"}, {"oid": "68cdbff087b8553c59261146507217a2573a638a", "url": "https://github.com/OpenNMS/opennms/commit/68cdbff087b8553c59261146507217a2573a638a", "message": "NMS-12599: Adding PDF dashboard document update\n\nAdded information on configuring Grafana endpoints.", "committedDate": "2020-05-04T16:00:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU5NzY3MA==", "url": "https://github.com/OpenNMS/opennms/pull/2978#discussion_r419597670", "bodyText": "I couldn't find this image here", "author": "indigo423", "createdAt": "2020-05-04T17:20:36Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/database-reports/database.adoc", "diffHunk": "@@ -278,3 +278,73 @@ WARNING: If `org.opennms.netmgt.jasper.measurement.ssl.enable` is set to `false`\n \n  * Only a _JDBC Datasource_ to the _{opennms-product-name} Database connection_ can be passed to a report, or no datasource at all.\n    One does not have to use the datasource, though.\n+\n+=== Creating PDF Reports from Grafana Dashboards Using {opennms-product-name}\n+\n+{opennms-product-name} provides three templates to create a PDF report from an existing Grafana dashboard. \n+You can also schedule and email these PDF reports to anyone:\n+\n+* Keep staff without access to {opennms-product-name} informed about network performance for improved capacity planning\n+* Create a permanent record of strategic information and progress over a long period of time\n+\n+The PDF report displays each of the panels from the specified dashboard, with one, two, or four panels per page, depending on the selected template. \n+\n+Dashboard to PDF:\n+\n+image:database-reports/dashboard-pdf.png[PDF report, 600]\n+\n+==== Before You Begin\n+\n+This feature requires {opennms-product-name} and an instance of Grafana with at least one dashboard and panel. OpenNMS allows you to create a report for any Grafana dashboard, not just those created using link:http://docs.opennms.org/helm/branches/master/helm/latest/welcome/index.html[OpenNMS Helm].\n+\n+You must set up Grafana as a datasource by xref:grafana-ednpoint[configuring the Grafana endpoint] in {opennms-product-name}. \n+\n+[[grafana-endpoint]]\n+==== Configure the Grafana Endpoint\n+\n+Configuring the Grafana endpoint sets up Grafana as the datasource for the dashboards from which you create PDFs. \n+\n+. Login to your Grafana instance.\n+. Choose **Configuration > API Keys** and click **New API Key**. \n+. Specify a key name and \"Viewer\" role and click **Add**.\n+.. Leave the time to live blank so that the key never expires. \n+. Copy the key so that you can paste it into the {opennms-product-name} UI. \n++\n+image:database-reports/API-Key.png[Grafana API, 400]\n+\n+.. If desired, test the key using the Curl command provided oi the API key dialog. \n+. In OpenNMS, click *Please add a Grafana endpoint*:\n+\n++\n+image:database-reports/grafana-endpoint.png[Endpoint, 400]\n+\n+. In the *Endpoint Configuration* screen click the plus sign on the right to add a new endpoint.\n+. Fill in the information and click *Test Connection*.\n+. Click *Create*.\n+\n+You can now use {opennms-product-name} to create PDF reports of Grafana dashboards. \n+\n+==== Creating a PDF of a Grafana Dashboard\n+\n+. In the {opennms-product-name} UI, choose `Reports>Database Reports`.\n+. In the `Report Templates` area, click `Grafana Dashboard Report <Xppp>`, where `<Xppp>` represents the number of panels per page you want to display. \n+. In the `Report Parameters` area, specify the appropriate information.\n+.. Note that `Grafana Endpoint` is the datasource. Select a Grafana dashboard from the drop-down list. \n+.. You can also specify CSV for report type. \n+. Click `Create Report`. \n+.. You are prompted to save the report locally or open it.\n+The file is saved to a folder on the {opennms-product-name} Server. \n+It also appears in the UI in the `Persisted Reports` tab. \n+. To send the report to someone, click `Deliver this report`.\n+. Fill out the `Report Delivery Options`.\n+.. If you select `Email report`, specify the recipient\u2019s email address in the `Recipient` field. \n+Separate multiple recipient emails with a comma. \n+.. Webhook allows you to post the generated report to the specified URL. \n+. Click `Deliver Report`.\n+. To schedule the report for regular delivery, click `Schedule this report`.\n+. Specify the report frequency (daily, days per week, etc.) and interval of the report.\n+. Click `Schedule Report`.\n+\n+Scheduled reports appear in the `Report Schedules` tab, where you can edit or delete them:\n+\n+image::database-reports/PDF-Report.png[pdf report, 600]", "originalCommit": "68cdbff087b8553c59261146507217a2573a638a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYxMjk2NQ==", "url": "https://github.com/OpenNMS/opennms/pull/2978#discussion_r419612965", "bodyText": "I couldn't find this image here\nAdded image.", "author": "Bonrob2", "createdAt": "2020-05-04T17:45:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTU5NzY3MA=="}], "type": "inlineReview"}, {"oid": "789f4855942e59cd1c8cacc938850a98790d9c64", "url": "https://github.com/OpenNMS/opennms/commit/789f4855942e59cd1c8cacc938850a98790d9c64", "message": "NMS-12599 PDF documentation\n\nNSM-12599 PDF documentation. Added missing graphic.", "committedDate": "2020-05-04T17:44:23Z", "type": "commit"}, {"oid": "9ce4d7dd77b8a9cf3b23ee508a2e8e7994fd6607", "url": "https://github.com/OpenNMS/opennms/commit/9ce4d7dd77b8a9cf3b23ee508a2e8e7994fd6607", "message": "NMS-12650: Add empty line to fix imagesdir entries appear in text", "committedDate": "2020-05-04T19:26:04Z", "type": "commit"}, {"oid": "0c4ca75cffa9c5a38ce15cbf2a01982337cc0865", "url": "https://github.com/OpenNMS/opennms/commit/0c4ca75cffa9c5a38ce15cbf2a01982337cc0865", "message": "NMS-12650: Add larger screenshots to fill 100% width", "committedDate": "2020-05-04T19:45:47Z", "type": "commit"}]}