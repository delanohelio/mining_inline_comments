{"pr_number": 3038, "pr_title": "NMS-12731: ResourceDao performance enhancements for the Time Series Storage API - Part 3", "pr_createdAt": "2020-06-14T22:51:41Z", "pr_url": "https://github.com/OpenNMS/opennms/pull/3038", "timeline": [{"oid": "6f59ffa5d507c4b467cd86cf4842f50ea0b00fd5", "url": "https://github.com/OpenNMS/opennms/commit/6f59ffa5d507c4b467cd86cf4842f50ea0b00fd5", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer:     NMS-12758 Review documentation", "committedDate": "2020-06-17T19:20:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3NDIxNw==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441774217", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You might need to tune the cache settings to suit your needs, see parameters above.\n          \n          \n            \n            You might need to tune the cache settings to suit your needs. See parameters above.", "author": "Bonrob2", "createdAt": "2020-06-17T19:11:20Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -44,45 +44,53 @@ Additional configuration options are presented in the next section.\n \n The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Timeseries Integration Layer_.\n \n-[[ga-opennms-operation-newts-properties-general]]\n+[[ga-opennms-operation-timeseries-properties-general]]\n ====== General\n [options=\"header, autowidth\"]\n |===\n | Name                                            | Default              | Description\n-| `org.opennms.timeseries.max_batch_size`       | `16`                 | Maximum number of records to insert in a single transaction. Limited by the size of the Cassandra cluster's batch_size_fail_threshold_in_kb property.\n | `org.opennms.timeseries.ring_buffer_size`     | `8192`               | Maximum number of records that can be held in the ring buffer. Must be a power of two.\n-| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into Newts.\n+| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Timeseries Database.\n | `org.opennms.timeseries.query.minimum_step`          | `300000`             | Minimum step size in milliseconds. Used to prevent large queries.\n | `org.opennms.timeseries.query.interval_divider`      | `2`                  | If no interval is specified in the query, the step will be divided into this many intervals when aggregating values.\n | `org.opennms.timeseries.query.heartbeat`             | `450000`             | Duration in milliseconds. Used when no heartbeat is specified. Should generally be 1.5x your largest collection interval.\n | `org.opennms.timeseries.query.parallelism`           | Number of cores      | Maximum number of threads that can be used to compute aggregates. Defaults to the number of available cores.\n-| `org.opennms.timeseries.config.cache.strategy`       | See below           | Canonical name of the class used for resource level caching. See the table bellow for all of the available options.\n-| `org.opennms.timeseries.config.cache.max_entries`    | `8192`               | Maximum number of records to keep in the cache when using an in-memory caching strategy.\n-|===\n \n-Available caching strategies include:\n+| `cache.timeseriesPersisterMetaTagCache.expireAfterRead`    | `300`               | Expiry time in seconds for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.maximumSize`        | `8192`              | Maximum size for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for MetaTagCache?\n \n-[options=\"header, autowidth, footer\"]\n-|===\n-| Name                        | Class                                                                   | Default\n-| In-Memory Cache             | `org.opennms.netmgt.timeseries.support.GuavaSearchableResourceMetadataCache` | Y\n+| `cache.timeseriesSearcherCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.maximumSize`        | `8192`              | Maximum size for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesSearcherCache?\n+\n+| `cache.timeseriesMetaDataCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.maximumSize`        | `8192`              | Maximum size for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesMetaDataCache?\n |===\n \n+[[ga-opennms-operation-timeseries-properties-recommendations]]\n ===== Recommendations\n+Caches have been introduced to improve performance.\n+You might need to tune the cache settings to suit your needs, see parameters above.", "originalCommit": "8b1b66eaea68909900fdb1ada34c55a6695e51c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3NTA5OQ==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441775099", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | TimeseriesMetaDataCache          | Caches meta data that uses _{opennms-product-name}_  internally.\n          \n          \n            \n            | TimeseriesMetaDataCache          | Caches metadata that uses _{opennms-product-name}_  internally.", "author": "Bonrob2", "createdAt": "2020-06-17T19:13:03Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -44,45 +44,53 @@ Additional configuration options are presented in the next section.\n \n The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Timeseries Integration Layer_.\n \n-[[ga-opennms-operation-newts-properties-general]]\n+[[ga-opennms-operation-timeseries-properties-general]]\n ====== General\n [options=\"header, autowidth\"]\n |===\n | Name                                            | Default              | Description\n-| `org.opennms.timeseries.max_batch_size`       | `16`                 | Maximum number of records to insert in a single transaction. Limited by the size of the Cassandra cluster's batch_size_fail_threshold_in_kb property.\n | `org.opennms.timeseries.ring_buffer_size`     | `8192`               | Maximum number of records that can be held in the ring buffer. Must be a power of two.\n-| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into Newts.\n+| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Timeseries Database.\n | `org.opennms.timeseries.query.minimum_step`          | `300000`             | Minimum step size in milliseconds. Used to prevent large queries.\n | `org.opennms.timeseries.query.interval_divider`      | `2`                  | If no interval is specified in the query, the step will be divided into this many intervals when aggregating values.\n | `org.opennms.timeseries.query.heartbeat`             | `450000`             | Duration in milliseconds. Used when no heartbeat is specified. Should generally be 1.5x your largest collection interval.\n | `org.opennms.timeseries.query.parallelism`           | Number of cores      | Maximum number of threads that can be used to compute aggregates. Defaults to the number of available cores.\n-| `org.opennms.timeseries.config.cache.strategy`       | See below           | Canonical name of the class used for resource level caching. See the table bellow for all of the available options.\n-| `org.opennms.timeseries.config.cache.max_entries`    | `8192`               | Maximum number of records to keep in the cache when using an in-memory caching strategy.\n-|===\n \n-Available caching strategies include:\n+| `cache.timeseriesPersisterMetaTagCache.expireAfterRead`    | `300`               | Expiry time in seconds for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.maximumSize`        | `8192`              | Maximum size for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for MetaTagCache?\n \n-[options=\"header, autowidth, footer\"]\n-|===\n-| Name                        | Class                                                                   | Default\n-| In-Memory Cache             | `org.opennms.netmgt.timeseries.support.GuavaSearchableResourceMetadataCache` | Y\n+| `cache.timeseriesSearcherCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.maximumSize`        | `8192`              | Maximum size for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesSearcherCache?\n+\n+| `cache.timeseriesMetaDataCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.maximumSize`        | `8192`              | Maximum size for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesMetaDataCache?\n |===\n \n+[[ga-opennms-operation-timeseries-properties-recommendations]]\n ===== Recommendations\n+Caches have been introduced to improve performance.\n+You might need to tune the cache settings to suit your needs, see parameters above.\n \n-You will likely want to change the values of `cache.max_entries` and the `ring_buffer_size` to suit your installation.\n-\n-Meta-data related to resources are cached in order to avoid writing redundant records.\n-If you are collecting data from a large number of resources, you should increase the `cache.max_entries` to reflect the number of resources you are collecting from, with a suitable buffer.\n+[options=\"header, autowidth\"]\n+|===\n+| Name                             | Description\n+| TimeseriesMetaDataCache          | Caches meta data that uses _{opennms-product-name}_  internally.", "originalCommit": "8b1b66eaea68909900fdb1ada34c55a6695e51c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3NTI2Mg==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441775262", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | TimeseriesSearcherCache          | Caches Metrics by tag to improve the resource lookup.\n          \n          \n            \n            | TimeseriesSearcherCache          | Caches metrics by tag to improve the resource lookup.", "author": "Bonrob2", "createdAt": "2020-06-17T19:13:20Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -44,45 +44,53 @@ Additional configuration options are presented in the next section.\n \n The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Timeseries Integration Layer_.\n \n-[[ga-opennms-operation-newts-properties-general]]\n+[[ga-opennms-operation-timeseries-properties-general]]\n ====== General\n [options=\"header, autowidth\"]\n |===\n | Name                                            | Default              | Description\n-| `org.opennms.timeseries.max_batch_size`       | `16`                 | Maximum number of records to insert in a single transaction. Limited by the size of the Cassandra cluster's batch_size_fail_threshold_in_kb property.\n | `org.opennms.timeseries.ring_buffer_size`     | `8192`               | Maximum number of records that can be held in the ring buffer. Must be a power of two.\n-| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into Newts.\n+| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Timeseries Database.\n | `org.opennms.timeseries.query.minimum_step`          | `300000`             | Minimum step size in milliseconds. Used to prevent large queries.\n | `org.opennms.timeseries.query.interval_divider`      | `2`                  | If no interval is specified in the query, the step will be divided into this many intervals when aggregating values.\n | `org.opennms.timeseries.query.heartbeat`             | `450000`             | Duration in milliseconds. Used when no heartbeat is specified. Should generally be 1.5x your largest collection interval.\n | `org.opennms.timeseries.query.parallelism`           | Number of cores      | Maximum number of threads that can be used to compute aggregates. Defaults to the number of available cores.\n-| `org.opennms.timeseries.config.cache.strategy`       | See below           | Canonical name of the class used for resource level caching. See the table bellow for all of the available options.\n-| `org.opennms.timeseries.config.cache.max_entries`    | `8192`               | Maximum number of records to keep in the cache when using an in-memory caching strategy.\n-|===\n \n-Available caching strategies include:\n+| `cache.timeseriesPersisterMetaTagCache.expireAfterRead`    | `300`               | Expiry time in seconds for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.maximumSize`        | `8192`              | Maximum size for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for MetaTagCache?\n \n-[options=\"header, autowidth, footer\"]\n-|===\n-| Name                        | Class                                                                   | Default\n-| In-Memory Cache             | `org.opennms.netmgt.timeseries.support.GuavaSearchableResourceMetadataCache` | Y\n+| `cache.timeseriesSearcherCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.maximumSize`        | `8192`              | Maximum size for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesSearcherCache?\n+\n+| `cache.timeseriesMetaDataCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.maximumSize`        | `8192`              | Maximum size for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesMetaDataCache?\n |===\n \n+[[ga-opennms-operation-timeseries-properties-recommendations]]\n ===== Recommendations\n+Caches have been introduced to improve performance.\n+You might need to tune the cache settings to suit your needs, see parameters above.\n \n-You will likely want to change the values of `cache.max_entries` and the `ring_buffer_size` to suit your installation.\n-\n-Meta-data related to resources are cached in order to avoid writing redundant records.\n-If you are collecting data from a large number of resources, you should increase the `cache.max_entries` to reflect the number of resources you are collecting from, with a suitable buffer.\n+[options=\"header, autowidth\"]\n+|===\n+| Name                             | Description\n+| TimeseriesMetaDataCache          | Caches meta data that uses _{opennms-product-name}_  internally.\n+| TimeseriesSearcherCache          | Caches Metrics by tag to improve the resource lookup.", "originalCommit": "8b1b66eaea68909900fdb1ada34c55a6695e51c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3NTk5OQ==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441775999", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | TimeseriesPersisterMetaTagCache  | Caches all additionally configured and resolved meta tag values by resource\n          \n          \n            \n            | TimeseriesPersisterMetaTagCache  | Caches all additionally configured and resolved meta-tag values by resource.", "author": "Bonrob2", "createdAt": "2020-06-17T19:14:41Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -44,45 +44,53 @@ Additional configuration options are presented in the next section.\n \n The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Timeseries Integration Layer_.\n \n-[[ga-opennms-operation-newts-properties-general]]\n+[[ga-opennms-operation-timeseries-properties-general]]\n ====== General\n [options=\"header, autowidth\"]\n |===\n | Name                                            | Default              | Description\n-| `org.opennms.timeseries.max_batch_size`       | `16`                 | Maximum number of records to insert in a single transaction. Limited by the size of the Cassandra cluster's batch_size_fail_threshold_in_kb property.\n | `org.opennms.timeseries.ring_buffer_size`     | `8192`               | Maximum number of records that can be held in the ring buffer. Must be a power of two.\n-| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into Newts.\n+| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Timeseries Database.\n | `org.opennms.timeseries.query.minimum_step`          | `300000`             | Minimum step size in milliseconds. Used to prevent large queries.\n | `org.opennms.timeseries.query.interval_divider`      | `2`                  | If no interval is specified in the query, the step will be divided into this many intervals when aggregating values.\n | `org.opennms.timeseries.query.heartbeat`             | `450000`             | Duration in milliseconds. Used when no heartbeat is specified. Should generally be 1.5x your largest collection interval.\n | `org.opennms.timeseries.query.parallelism`           | Number of cores      | Maximum number of threads that can be used to compute aggregates. Defaults to the number of available cores.\n-| `org.opennms.timeseries.config.cache.strategy`       | See below           | Canonical name of the class used for resource level caching. See the table bellow for all of the available options.\n-| `org.opennms.timeseries.config.cache.max_entries`    | `8192`               | Maximum number of records to keep in the cache when using an in-memory caching strategy.\n-|===\n \n-Available caching strategies include:\n+| `cache.timeseriesPersisterMetaTagCache.expireAfterRead`    | `300`               | Expiry time in seconds for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.maximumSize`        | `8192`              | Maximum size for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for MetaTagCache?\n \n-[options=\"header, autowidth, footer\"]\n-|===\n-| Name                        | Class                                                                   | Default\n-| In-Memory Cache             | `org.opennms.netmgt.timeseries.support.GuavaSearchableResourceMetadataCache` | Y\n+| `cache.timeseriesSearcherCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.maximumSize`        | `8192`              | Maximum size for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesSearcherCache?\n+\n+| `cache.timeseriesMetaDataCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.maximumSize`        | `8192`              | Maximum size for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesMetaDataCache?\n |===\n \n+[[ga-opennms-operation-timeseries-properties-recommendations]]\n ===== Recommendations\n+Caches have been introduced to improve performance.\n+You might need to tune the cache settings to suit your needs, see parameters above.\n \n-You will likely want to change the values of `cache.max_entries` and the `ring_buffer_size` to suit your installation.\n-\n-Meta-data related to resources are cached in order to avoid writing redundant records.\n-If you are collecting data from a large number of resources, you should increase the `cache.max_entries` to reflect the number of resources you are collecting from, with a suitable buffer.\n+[options=\"header, autowidth\"]\n+|===\n+| Name                             | Description\n+| TimeseriesMetaDataCache          | Caches meta data that uses _{opennms-product-name}_  internally.\n+| TimeseriesSearcherCache          | Caches Metrics by tag to improve the resource lookup.\n+| TimeseriesPersisterMetaTagCache  | Caches all additionally configured and resolved meta tag values by resource", "originalCommit": "8b1b66eaea68909900fdb1ada34c55a6695e51c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3NzE0OQ==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441777149", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Therefore additional meta tags can be configured via `${OPENNMS_HOME}/etc/opennms.properties`.\n          \n          \n            \n            Configure additional meta tags via `${OPENNMS_HOME}/etc/opennms.properties`.", "author": "Bonrob2", "createdAt": "2020-06-17T19:16:57Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -44,45 +44,53 @@ Additional configuration options are presented in the next section.\n \n The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Timeseries Integration Layer_.\n \n-[[ga-opennms-operation-newts-properties-general]]\n+[[ga-opennms-operation-timeseries-properties-general]]\n ====== General\n [options=\"header, autowidth\"]\n |===\n | Name                                            | Default              | Description\n-| `org.opennms.timeseries.max_batch_size`       | `16`                 | Maximum number of records to insert in a single transaction. Limited by the size of the Cassandra cluster's batch_size_fail_threshold_in_kb property.\n | `org.opennms.timeseries.ring_buffer_size`     | `8192`               | Maximum number of records that can be held in the ring buffer. Must be a power of two.\n-| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into Newts.\n+| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Timeseries Database.\n | `org.opennms.timeseries.query.minimum_step`          | `300000`             | Minimum step size in milliseconds. Used to prevent large queries.\n | `org.opennms.timeseries.query.interval_divider`      | `2`                  | If no interval is specified in the query, the step will be divided into this many intervals when aggregating values.\n | `org.opennms.timeseries.query.heartbeat`             | `450000`             | Duration in milliseconds. Used when no heartbeat is specified. Should generally be 1.5x your largest collection interval.\n | `org.opennms.timeseries.query.parallelism`           | Number of cores      | Maximum number of threads that can be used to compute aggregates. Defaults to the number of available cores.\n-| `org.opennms.timeseries.config.cache.strategy`       | See below           | Canonical name of the class used for resource level caching. See the table bellow for all of the available options.\n-| `org.opennms.timeseries.config.cache.max_entries`    | `8192`               | Maximum number of records to keep in the cache when using an in-memory caching strategy.\n-|===\n \n-Available caching strategies include:\n+| `cache.timeseriesPersisterMetaTagCache.expireAfterRead`    | `300`               | Expiry time in seconds for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.maximumSize`        | `8192`              | Maximum size for MetaTagCache.\n+| `cache.timeseriesPersisterMetaTagCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for MetaTagCache?\n \n-[options=\"header, autowidth, footer\"]\n-|===\n-| Name                        | Class                                                                   | Default\n-| In-Memory Cache             | `org.opennms.netmgt.timeseries.support.GuavaSearchableResourceMetadataCache` | Y\n+| `cache.timeseriesSearcherCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.maximumSize`        | `8192`              | Maximum size for TimeseriesSearcherCache.\n+| `cache.timeseriesSearcherCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesSearcherCache?\n+\n+| `cache.timeseriesMetaDataCache.expireAfterRead`    | `300`               | Expiry time in seconds for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.maximumSize`        | `8192`              | Maximum size for TimeseriesMetaDataCache.\n+| `cache.timeseriesMetaDataCache.recordStats`        | `true`              | Should cache statistics be exposed via JMX for TimeseriesMetaDataCache?\n |===\n \n+[[ga-opennms-operation-timeseries-properties-recommendations]]\n ===== Recommendations\n+Caches have been introduced to improve performance.\n+You might need to tune the cache settings to suit your needs, see parameters above.\n \n-You will likely want to change the values of `cache.max_entries` and the `ring_buffer_size` to suit your installation.\n-\n-Meta-data related to resources are cached in order to avoid writing redundant records.\n-If you are collecting data from a large number of resources, you should increase the `cache.max_entries` to reflect the number of resources you are collecting from, with a suitable buffer.\n+[options=\"header, autowidth\"]\n+|===\n+| Name                             | Description\n+| TimeseriesMetaDataCache          | Caches meta data that uses _{opennms-product-name}_  internally.\n+| TimeseriesSearcherCache          | Caches Metrics by tag to improve the resource lookup.\n+| TimeseriesPersisterMetaTagCache  | Caches all additionally configured and resolved meta tag values by resource\n+|===\n \n The samples gathered by the collectors are temporarily stored in a ring buffer before they are persisted to the _Timeseries Integration Layer_.\n The value of the `ring_buffer_size` should be increased if you expect large peaks of collectors returning at once or latency in persisting these.\n However, note that the memory used by the ring buffer is reserved, and larger values may require an increased heap size.\n \n-===== Expose additional tags\n+[[ga-opennms-operation-timeseries-properties-meta-tags]]\n+===== Expose additional meta tags\n Metrics that are stored via the timeseries plugin contain the minimal set of tags for _{opennms-product-name}_ to work.\n This might not be sufficient if the data is used outside of _{opennms-product-name}_ as well.\n-Therefore additional meta tags be configured via `${OPENNMS_HOME}/etc/opennms.properties`.\n+Therefore additional meta tags can be configured via `${OPENNMS_HOME}/etc/opennms.properties`.", "originalCommit": "8b1b66eaea68909900fdb1ada34c55a6695e51c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3NzQzNg==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441777436", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Categories can be exposed by setting `org.opennms.timeseries.tin.metatags.exposeCategories` to `true`\n          \n          \n            \n            Expose categories by setting `org.opennms.timeseries.tin.metatags.exposeCategories` to `true`.", "author": "Bonrob2", "createdAt": "2020-06-17T19:17:30Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -95,10 +103,7 @@ Examples:\n `org.opennms.timeseries.tin.metatags.tag.nodelabel=${node:label}`\n `org.opennms.timeseries.tin.metatags.tag.sysObjectID=${node:sys-object-id}`\n \n-Categories can be exposed with a similar mechanism.\n-All categories that are configured via the property\n-`org.opennms.timeseries.tin.metatags.categories`\n-will be exposed as cat_CategoryName=CategoryName\n+Categories can be exposed by setting `org.opennms.timeseries.tin.metatags.exposeCategories` to `true`", "originalCommit": "8b1b66eaea68909900fdb1ada34c55a6695e51c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3ODE3MQ==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441778171", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            With the rise of many new time series databases we want to provide an easy way to support other timseries databases with minimal effort.\n          \n          \n            \n            With the rise of many new time series databases, we want to provide an easy way to support other time series databases with minimal effort.", "author": "Bonrob2", "createdAt": "2020-06-17T19:18:56Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/introduction.adoc", "diffHunk": "@@ -7,10 +7,11 @@ This section describes how to configure _{opennms-product-name}_ to use the _Tim\n Traditionally _{opennms-product-name}_ supports storing timeseries data in _RRD_ files on disk or via _Newts_ in _Cassandra_.\n These implementations require a deep knowledge of OpenNMS. It is hard to add another time series database.\n \n-With the rise of many new time series databases we want to provide an easy way to support another timseries database with minimal effort.\n+With the rise of many new time series databases we want to provide an easy way to support other timseries databases with minimal effort.", "originalCommit": "8b1b66eaea68909900fdb1ada34c55a6695e51c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3ODcxMg==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441778712", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The  _Timeseries Integration Layer_ allows to integrate a new timeseries database via osgi plugin.\n          \n          \n            \n            The  _Timeseries Integration Layer_ allows users to integrate a new time series database via OSGi plugin.", "author": "Bonrob2", "createdAt": "2020-06-17T19:20:05Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/introduction.adoc", "diffHunk": "@@ -7,10 +7,11 @@ This section describes how to configure _{opennms-product-name}_ to use the _Tim\n Traditionally _{opennms-product-name}_ supports storing timeseries data in _RRD_ files on disk or via _Newts_ in _Cassandra_.\n These implementations require a deep knowledge of OpenNMS. It is hard to add another time series database.\n \n-With the rise of many new time series databases we want to provide an easy way to support another timseries database with minimal effort.\n+With the rise of many new time series databases we want to provide an easy way to support other timseries databases with minimal effort.\n This lead to the development of the _Timeseries Integration Layer_.\n \n-The  _Timeseries Integration Layer_ allows to integrate a new timeseries database vis osgi plugin.\n+The  _Timeseries Integration Layer_ allows to integrate a new timeseries database via osgi plugin.", "originalCommit": "8b1b66eaea68909900fdb1ada34c55a6695e51c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3OTA0OA==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441779048", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Examples of timeseries plugins:\n          \n          \n            \n            Examples of time series plugins:", "author": "Bonrob2", "createdAt": "2020-06-17T19:20:45Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/introduction.adoc", "diffHunk": "@@ -7,10 +7,11 @@ This section describes how to configure _{opennms-product-name}_ to use the _Tim\n Traditionally _{opennms-product-name}_ supports storing timeseries data in _RRD_ files on disk or via _Newts_ in _Cassandra_.\n These implementations require a deep knowledge of OpenNMS. It is hard to add another time series database.\n \n-With the rise of many new time series databases we want to provide an easy way to support another timseries database with minimal effort.\n+With the rise of many new time series databases we want to provide an easy way to support other timseries databases with minimal effort.\n This lead to the development of the _Timeseries Integration Layer_.\n \n-The  _Timeseries Integration Layer_ allows to integrate a new timeseries database vis osgi plugin.\n+The  _Timeseries Integration Layer_ allows to integrate a new timeseries database via osgi plugin.\n+\n Examples of timeseries plugins:", "originalCommit": "8b1b66eaea68909900fdb1ada34c55a6695e51c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc4MTQ5Nw==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441781497", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Timeseries Database.\n          \n          \n            \n            | `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Time Series Database.", "author": "Bonrob2", "createdAt": "2020-06-17T19:25:25Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -44,45 +44,53 @@ Additional configuration options are presented in the next section.\n \n The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Timeseries Integration Layer_.\n \n-[[ga-opennms-operation-newts-properties-general]]\n+[[ga-opennms-operation-timeseries-properties-general]]\n ====== General\n [options=\"header, autowidth\"]\n |===\n | Name                                            | Default              | Description\n-| `org.opennms.timeseries.max_batch_size`       | `16`                 | Maximum number of records to insert in a single transaction. Limited by the size of the Cassandra cluster's batch_size_fail_threshold_in_kb property.\n | `org.opennms.timeseries.ring_buffer_size`     | `8192`               | Maximum number of records that can be held in the ring buffer. Must be a power of two.\n-| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into Newts.\n+| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Timeseries Database.", "originalCommit": "6f59ffa5d507c4b467cd86cf4842f50ea0b00fd5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc4NTQ2MQ==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441785461", "bodyText": "@Bonrob2 do you suggest to use the two words Time Series instead of the one word Timeseries? If so I think we should change it everywhere?", "author": "patrick-schweizer", "createdAt": "2020-06-17T19:32:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc4MTQ5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc4NjU1OA==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441786558", "bodyText": "Yes, two words in prose would be better, but I am aware that it is inconsistent with the rest of the documentation. This is something I'll update with the doc revamp for 27.0. If it's a lot of work right now, just leave it as one word, as long as it's one word consistently. I can note to update it in 27.0.", "author": "Bonrob2", "createdAt": "2020-06-17T19:35:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc4MTQ5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTgyMDg5OQ==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r441820899", "bodyText": "I can update it in the time series integration layer and make it here consistent.", "author": "patrick-schweizer", "createdAt": "2020-06-17T20:40:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc4MTQ5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwMzQ3Mg==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442503472", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ===== Enabling Time series Integration Layer\n          \n          \n            \n            ===== Enabling Time Series Integration Layer", "author": "Bonrob2", "createdAt": "2020-06-18T21:08:18Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -3,18 +3,18 @@\n :imagesdir: ../../../images\n ==== Configuration\n \n-===== Enabling Timeseries Integration Layer\n+===== Enabling Time series Integration Layer", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwMzU2Mw==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442503563", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            _{opennms-product-name}_ can be configured to use the Time series Integration Layer by setting the following property in `${OPENNMS_HOME}/etc/opennms.properties`:\n          \n          \n            \n            _{opennms-product-name}_ can be configured to use the Time Series Integration Layer by setting the following property in `${OPENNMS_HOME}/etc/opennms.properties`:", "author": "Bonrob2", "createdAt": "2020-06-18T21:08:32Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -3,18 +3,18 @@\n :imagesdir: ../../../images\n ==== Configuration\n \n-===== Enabling Timeseries Integration Layer\n+===== Enabling Time series Integration Layer\n \n-_{opennms-product-name}_ can be configured to use the Timeseries Integration Layer by setting the following property in `${OPENNMS_HOME}/etc/opennms.properties`:\n+_{opennms-product-name}_ can be configured to use the Time series Integration Layer by setting the following property in `${OPENNMS_HOME}/etc/opennms.properties`:", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwMzcwMg==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442503702", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            After activating the _Time series Integration Layer_, you need to start an actual implementation.\n          \n          \n            \n            After activating the _Time Series Integration Layer_, you need to start an actual implementation.", "author": "Bonrob2", "createdAt": "2020-06-18T21:08:51Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -3,18 +3,18 @@\n :imagesdir: ../../../images\n ==== Configuration\n \n-===== Enabling Timeseries Integration Layer\n+===== Enabling Time series Integration Layer\n \n-_{opennms-product-name}_ can be configured to use the Timeseries Integration Layer by setting the following property in `${OPENNMS_HOME}/etc/opennms.properties`:\n+_{opennms-product-name}_ can be configured to use the Time series Integration Layer by setting the following property in `${OPENNMS_HOME}/etc/opennms.properties`:\n \n [source]\n ----\n org.opennms.timeseries.strategy=integration\n ----\n \n-After activating the _Timeseries Integration Layer_, you need to start an actual implementation.\n+After activating the _Time series Integration Layer_, you need to start an actual implementation.", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwMzc4OA==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442503788", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            We also highly recommend that you reference resources stored in the _Time series Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.\n          \n          \n            \n            We also highly recommend that you reference resources stored in the _Time Series Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.", "author": "Bonrob2", "createdAt": "2020-06-18T21:09:03Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -28,29 +28,29 @@ bundle:install -s mvn:org.opennms.plugins.timeseries.inmemory/timeseries-inmemor\n \n For specific instructions, check your plugin description.\n \n-We also highly recommend that you reference resources stored in the _Timeseries Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.\n+We also highly recommend that you reference resources stored in the _Time series Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwMzg4Mw==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442503883", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            With these set, _{opennms-product-name}_ will begin persisting metrics using the _Time series Integration Layer_ when restarted.\n          \n          \n            \n            With these set, _{opennms-product-name}_ will begin persisting metrics using the _Time Series Integration Layer_ when restarted.", "author": "Bonrob2", "createdAt": "2020-06-18T21:09:14Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -28,29 +28,29 @@ bundle:install -s mvn:org.opennms.plugins.timeseries.inmemory/timeseries-inmemor\n \n For specific instructions, check your plugin description.\n \n-We also highly recommend that you reference resources stored in the _Timeseries Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.\n+We also highly recommend that you reference resources stored in the _Time series Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.\n To this end, set the following property in the same file:\n \n [source]\n ----\n org.opennms.rrd.storeByForeignSource=true\n ----\n \n-With these set, _{opennms-product-name}_ will begin persisting metrics using the _Timeseries Integration Layer_ when restarted.\n+With these set, _{opennms-product-name}_ will begin persisting metrics using the _Time series Integration Layer_ when restarted.", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwMzk4NA==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442503984", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Time series Integration Layer_.\n          \n          \n            \n            The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Time Series Integration Layer_.", "author": "Bonrob2", "createdAt": "2020-06-18T21:09:27Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -28,29 +28,29 @@ bundle:install -s mvn:org.opennms.plugins.timeseries.inmemory/timeseries-inmemor\n \n For specific instructions, check your plugin description.\n \n-We also highly recommend that you reference resources stored in the _Timeseries Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.\n+We also highly recommend that you reference resources stored in the _Time series Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.\n To this end, set the following property in the same file:\n \n [source]\n ----\n org.opennms.rrd.storeByForeignSource=true\n ----\n \n-With these set, _{opennms-product-name}_ will begin persisting metrics using the _Timeseries Integration Layer_ when restarted.\n+With these set, _{opennms-product-name}_ will begin persisting metrics using the _Time series Integration Layer_ when restarted.\n \n Additional configuration options are presented in the next section.\n \n ===== Configuration Reference\n \n-The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Timeseries Integration Layer_.\n+The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Time series Integration Layer_.", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwNDEyNQ==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442504125", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Time series Database.\n          \n          \n            \n            | `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Time Series Database.", "author": "Bonrob2", "createdAt": "2020-06-18T21:09:44Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -28,29 +28,29 @@ bundle:install -s mvn:org.opennms.plugins.timeseries.inmemory/timeseries-inmemor\n \n For specific instructions, check your plugin description.\n \n-We also highly recommend that you reference resources stored in the _Timeseries Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.\n+We also highly recommend that you reference resources stored in the _Time series Integration Layer_ by their foreign source and foreign ID, as opposed to their database ID.\n To this end, set the following property in the same file:\n \n [source]\n ----\n org.opennms.rrd.storeByForeignSource=true\n ----\n \n-With these set, _{opennms-product-name}_ will begin persisting metrics using the _Timeseries Integration Layer_ when restarted.\n+With these set, _{opennms-product-name}_ will begin persisting metrics using the _Time series Integration Layer_ when restarted.\n \n Additional configuration options are presented in the next section.\n \n ===== Configuration Reference\n \n-The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Timeseries Integration Layer_.\n+The following properties, found in `${OPENNMS_HOME}/etc/opennms.properties`, can be used to configure and tune the _Time series Integration Layer_.\n \n [[ga-opennms-operation-timeseries-properties-general]]\n ====== General\n [options=\"header, autowidth\"]\n |===\n | Name                                            | Default              | Description\n | `org.opennms.timeseries.ring_buffer_size`     | `8192`               | Maximum number of records that can be held in the ring buffer. Must be a power of two.\n-| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Time Series Database.\n+| `org.opennms.timeseries.config.writer_threads`       | `16`                 | Number of threads used to pull samples from the ring buffer and insert them into the Time series Database.", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwNDE5OA==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442504198", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The samples gathered by the collectors are temporarily stored in a ring buffer before they are persisted to the _Time series Integration Layer_.\n          \n          \n            \n            The samples gathered by the collectors are temporarily stored in a ring buffer before they are persisted to the _Time Series Integration Layer_.", "author": "Bonrob2", "createdAt": "2020-06-18T21:09:55Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/configuration.adoc", "diffHunk": "@@ -82,13 +82,13 @@ You might need to tune the cache settings to suit your needs. See parameters abo\n | TimeseriesPersisterMetaTagCache  | Caches all additionally configured and resolved meta-tag values by resource.\n |===\n \n-The samples gathered by the collectors are temporarily stored in a ring buffer before they are persisted to the _Timeseries Integration Layer_.\n+The samples gathered by the collectors are temporarily stored in a ring buffer before they are persisted to the _Time series Integration Layer_.", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwNDMxMw==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442504313", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This section describes how to configure _{opennms-product-name}_ to use the _Time series Integration Layer_.\n          \n          \n            \n            This section describes how to configure _{opennms-product-name}_ to use the _Time Series Integration Layer_.", "author": "Bonrob2", "createdAt": "2020-06-18T21:10:10Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/introduction.adoc", "diffHunk": "@@ -2,15 +2,15 @@\n // Allow GitHub image rendering\n :imagesdir: ../../../images\n \n-This section describes how to configure _{opennms-product-name}_ to use the _Timeseries Integration Layer_.\n+This section describes how to configure _{opennms-product-name}_ to use the _Time series Integration Layer_.", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwNDQxMg==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442504412", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This lead to the development of the _Time series Integration Layer_.\n          \n          \n            \n            This lead to the development of the _Time Series Integration Layer_.", "author": "Bonrob2", "createdAt": "2020-06-18T21:10:21Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/introduction.adoc", "diffHunk": "@@ -2,15 +2,15 @@\n // Allow GitHub image rendering\n :imagesdir: ../../../images\n \n-This section describes how to configure _{opennms-product-name}_ to use the _Timeseries Integration Layer_.\n+This section describes how to configure _{opennms-product-name}_ to use the _Time series Integration Layer_.\n \n-Traditionally _{opennms-product-name}_ supports storing timeseries data in _RRD_ files on disk or via _Newts_ in _Cassandra_.\n+Traditionally _{opennms-product-name}_ supports storing time series data in _RRD_ files on disk or via _Newts_ in _Cassandra_.\n These implementations require a deep knowledge of OpenNMS. It is hard to add another time series database.\n \n With the rise of many new time series databases, we want to provide an easy way to support other time series databases with minimal effort.\n-This lead to the development of the _Timeseries Integration Layer_.\n+This lead to the development of the _Time series Integration Layer_.", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUwNDUwMA==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r442504500", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The  _Time series Integration Layer_ allows users to integrate a new time series database via OSGi plugin.\n          \n          \n            \n            The  _Time Series Integration Layer_ allows users to integrate a new time series database via OSGi plugin.", "author": "Bonrob2", "createdAt": "2020-06-18T21:10:32Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/operation/timeseries/introduction.adoc", "diffHunk": "@@ -2,15 +2,15 @@\n // Allow GitHub image rendering\n :imagesdir: ../../../images\n \n-This section describes how to configure _{opennms-product-name}_ to use the _Timeseries Integration Layer_.\n+This section describes how to configure _{opennms-product-name}_ to use the _Time series Integration Layer_.\n \n-Traditionally _{opennms-product-name}_ supports storing timeseries data in _RRD_ files on disk or via _Newts_ in _Cassandra_.\n+Traditionally _{opennms-product-name}_ supports storing time series data in _RRD_ files on disk or via _Newts_ in _Cassandra_.\n These implementations require a deep knowledge of OpenNMS. It is hard to add another time series database.\n \n With the rise of many new time series databases, we want to provide an easy way to support other time series databases with minimal effort.\n-This lead to the development of the _Timeseries Integration Layer_.\n+This lead to the development of the _Time series Integration Layer_.\n \n-The  _Timeseries Integration Layer_ allows users to integrate a new time series database via OSGi plugin.\n+The  _Time series Integration Layer_ allows users to integrate a new time series database via OSGi plugin.", "originalCommit": "a3656d2435bfa10927b5f8ae0e7082db6c5b7efa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "94a6fbdd60751495736d95c982479d835793d314", "url": "https://github.com/OpenNMS/opennms/commit/94a6fbdd60751495736d95c982479d835793d314", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer:     NMS-12758 Review documentation: fix test", "committedDate": "2020-06-20T22:22:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg1OTI2Nw==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r448859267", "bodyText": "Why implement this as a seperate free-standing function and not as part of the class it's comparing?", "author": "fooker", "createdAt": "2020-07-02T09:06:59Z", "path": "features/timeseries/src/main/java/org/opennms/netmgt/timeseries/util/Utils.java", "diffHunk": "@@ -43,4 +46,18 @@\n         }\n         return map;\n     }\n+\n+    public static boolean equals(final FetchResults results1, final FetchResults results2) {", "originalCommit": "2f05779add064141e938a3365d778fbfecfe9067", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTE1MTM4MQ==", "url": "https://github.com/OpenNMS/opennms/pull/3038#discussion_r449151381", "bodyText": "Hm good question. The method was also not used anymore. I guess some leftover from refactoring... I ended up deleting the whole class :-)", "author": "patrick-schweizer", "createdAt": "2020-07-02T16:57:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODg1OTI2Nw=="}], "type": "inlineReview"}, {"oid": "34fab6727f505449f7f7e11f4a469f4df9f4b005", "url": "https://github.com/OpenNMS/opennms/commit/34fab6727f505449f7f7e11f4a469f4df9f4b005", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer: NMS-12751: Clean up package structure", "committedDate": "2020-07-02T20:07:55Z", "type": "commit"}, {"oid": "38ebd3f82458888ab29872adc0e4e255a39fe298", "url": "https://github.com/OpenNMS/opennms/commit/38ebd3f82458888ab29872adc0e4e255a39fe298", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer: NMS-12751: Clean up package structure", "committedDate": "2020-07-02T20:07:55Z", "type": "commit"}, {"oid": "c9ea7b81e8143e58c2cb9c218c7d284fd23c743a", "url": "https://github.com/OpenNMS/opennms/commit/c9ea7b81e8143e58c2cb9c218c7d284fd23c743a", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer: NMS-12751: Clean up package structure: remove CommonTagNames.java", "committedDate": "2020-07-02T20:07:55Z", "type": "commit"}, {"oid": "764904776f9f32bd84e1bc5ff9fa22baba6d31e5", "url": "https://github.com/OpenNMS/opennms/commit/764904776f9f32bd84e1bc5ff9fa22baba6d31e5", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer: NMS-12751: Clean up package structure", "committedDate": "2020-07-02T20:07:55Z", "type": "commit"}, {"oid": "794057c7435b5a21e35bbfe2efc816cc18f58c27", "url": "https://github.com/OpenNMS/opennms/commit/794057c7435b5a21e35bbfe2efc816cc18f58c27", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer: NMS-12751: Clean up package structure: clean up", "committedDate": "2020-07-02T20:07:56Z", "type": "commit"}, {"oid": "440d84d50a1b915e3b775db48f6032f0ea91e460", "url": "https://github.com/OpenNMS/opennms/commit/440d84d50a1b915e3b775db48f6032f0ea91e460", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer: NMS-12751: Clean up package structure: clean up properties", "committedDate": "2020-07-02T20:07:56Z", "type": "commit"}, {"oid": "43196b73da3967301fb47209c3b791dc4053961c", "url": "https://github.com/OpenNMS/opennms/commit/43196b73da3967301fb47209c3b791dc4053961c", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer:     NMS-12758 Review documentation", "committedDate": "2020-07-02T20:07:56Z", "type": "commit"}, {"oid": "d51edeeb4e2ddb3c5bc441ab05526d57bdb0d987", "url": "https://github.com/OpenNMS/opennms/commit/d51edeeb4e2ddb3c5bc441ab05526d57bdb0d987", "message": "NMS-12758: Review documentation\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>", "committedDate": "2020-07-02T20:07:56Z", "type": "commit"}, {"oid": "5c8d1c1fd8cefe9ab5daaba337ab197f989f131d", "url": "https://github.com/OpenNMS/opennms/commit/5c8d1c1fd8cefe9ab5daaba337ab197f989f131d", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer:     NMS-12758 Review documentation: make writing of \"time series\" consistent", "committedDate": "2020-07-02T20:07:56Z", "type": "commit"}, {"oid": "e6e0575fd89a9305fbd0b28d92e446ca07fdc57a", "url": "https://github.com/OpenNMS/opennms/commit/e6e0575fd89a9305fbd0b28d92e446ca07fdc57a", "message": "NMS-12758: Review documentation\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>", "committedDate": "2020-07-02T20:07:56Z", "type": "commit"}, {"oid": "44f88e900776881e782cae8e52094d8bf5b45cae", "url": "https://github.com/OpenNMS/opennms/commit/44f88e900776881e782cae8e52094d8bf5b45cae", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer:     NMS-12758 Review documentation: fix test", "committedDate": "2020-07-02T20:07:56Z", "type": "commit"}, {"oid": "79e9ef6df0734467eae526232ce264e8e1551029", "url": "https://github.com/OpenNMS/opennms/commit/79e9ef6df0734467eae526232ce264e8e1551029", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer: remove special character from wildcard index", "committedDate": "2020-07-02T20:07:56Z", "type": "commit"}, {"oid": "519ac9294d5bafbc9c548c67c2df695dbb4d0598", "url": "https://github.com/OpenNMS/opennms/commit/519ac9294d5bafbc9c548c67c2df695dbb4d0598", "message": "NMS-12731 Optimize Performance of Timeseries Integration Layer: address PR comments", "committedDate": "2020-07-02T20:10:50Z", "type": "commit"}, {"oid": "5cc396ded98fc3ee66856b594debb4143d8b08ba", "url": "https://github.com/OpenNMS/opennms/commit/5cc396ded98fc3ee66856b594debb4143d8b08ba", "message": "NMS-12731: ResourceDao performance enhancements for the Time Series Storage: fix rebase problem", "committedDate": "2020-07-02T20:16:33Z", "type": "commit"}, {"oid": "5cc396ded98fc3ee66856b594debb4143d8b08ba", "url": "https://github.com/OpenNMS/opennms/commit/5cc396ded98fc3ee66856b594debb4143d8b08ba", "message": "NMS-12731: ResourceDao performance enhancements for the Time Series Storage: fix rebase problem", "committedDate": "2020-07-02T20:16:33Z", "type": "forcePushed"}]}