{"pr_number": 3134, "pr_title": "NMS-12788: fully enable NTLMv2; get SMBv2 by move to jcifs-ng and j-interop-ng", "pr_createdAt": "2020-08-27T19:07:11Z", "pr_url": "https://github.com/OpenNMS/opennms/pull/3134", "timeline": [{"oid": "5f20d264455946ad26a29b03c96f3678906bf7c6", "url": "https://github.com/OpenNMS/opennms/commit/5f20d264455946ad26a29b03c96f3678906bf7c6", "message": "NMS-12788: fully enable NTLMv2; get SMBv2 by move to jcifs-ng and j-interop-ng", "committedDate": "2020-07-02T20:28:06Z", "type": "commit"}, {"oid": "f41897650fdf459b16ea37f458c7eca4e8c75551", "url": "https://github.com/OpenNMS/opennms/commit/f41897650fdf459b16ea37f458c7eca4e8c75551", "message": "well they changed the API anyway so let's go all the way to latest\njcifs-ng; fix tests", "committedDate": "2020-07-02T23:04:05Z", "type": "commit"}, {"oid": "76e339c8c977b1b6ae4e39a6bfb1f14116785e94", "url": "https://github.com/OpenNMS/opennms/commit/76e339c8c977b1b6ae4e39a6bfb1f14116785e94", "message": "oops a space", "committedDate": "2020-07-03T01:56:48Z", "type": "commit"}, {"oid": "7d6b30b3b5abb77d211bb29783701bb263fe7c60", "url": "https://github.com/OpenNMS/opennms/commit/7d6b30b3b5abb77d211bb29783701bb263fe7c60", "message": "Update protocols/cifs/src/main/java/org/opennms/netmgt/poller/monitors/JCifsMonitor.java\n\nCo-authored-by: Jesse White <jwhite08@gmail.com>", "committedDate": "2020-07-17T17:39:57Z", "type": "commit"}, {"oid": "ef7601000c73754b1ea82f2472934eeceba97e9b", "url": "https://github.com/OpenNMS/opennms/commit/ef7601000c73754b1ea82f2472934eeceba97e9b", "message": "use SingletonContext if config of timeout fails", "committedDate": "2020-07-17T19:13:45Z", "type": "commit"}, {"oid": "25d0b3f7cf082e2de34a88e32e22dd93bae87c45", "url": "https://github.com/OpenNMS/opennms/commit/25d0b3f7cf082e2de34a88e32e22dd93bae87c45", "message": "Merge branch 'jira/NMS-12788' of github.com:dschlenk/opennms into jira/NMS-12788", "committedDate": "2020-07-17T19:14:52Z", "type": "commit"}, {"oid": "4eb2c7cdf9fad05c59036e3847d065215f526f4e", "url": "https://github.com/OpenNMS/opennms/commit/4eb2c7cdf9fad05c59036e3847d065215f526f4e", "message": "maybe it should compile", "committedDate": "2020-07-17T19:31:48Z", "type": "commit"}, {"oid": "c93021adb04c4ca1bc5c8b2c8a95c4f7cc7872fa", "url": "https://github.com/OpenNMS/opennms/commit/c93021adb04c4ca1bc5c8b2c8a95c4f7cc7872fa", "message": "bump bcprov to latest", "committedDate": "2020-07-17T20:13:14Z", "type": "commit"}, {"oid": "965242055e53174ad3dcd4deaf461d5073555205", "url": "https://github.com/OpenNMS/opennms/commit/965242055e53174ad3dcd4deaf461d5073555205", "message": "Merge remote-tracking branch 'origin/develop' into jira/NMS-12788", "committedDate": "2020-08-27T16:49:14Z", "type": "commit"}, {"oid": "11ddf00dfa81f05de151c2fd7424fee958c34e57", "url": "https://github.com/OpenNMS/opennms/commit/11ddf00dfa81f05de151c2fd7424fee958c34e57", "message": "bc security provider preventing karaf shell from starting", "committedDate": "2020-08-28T17:22:28Z", "type": "commit"}, {"oid": "a140e06920403af1c70689daf4c98a734145ba1b", "url": "https://github.com/OpenNMS/opennms/commit/a140e06920403af1c70689daf4c98a734145ba1b", "message": "call the correct method for the cast to work", "committedDate": "2020-09-14T22:07:49Z", "type": "commit"}, {"oid": "b67b51c81614864397ce9fb1f459262814baa569", "url": "https://github.com/OpenNMS/opennms/commit/b67b51c81614864397ce9fb1f459262814baa569", "message": "Merge remote-tracking branch 'origin/develop' into jira/NMS-12788", "committedDate": "2020-09-14T22:07:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk5MTQxNQ==", "url": "https://github.com/OpenNMS/opennms/pull/3134#discussion_r496991415", "bodyText": "Looks like this  is already bundle. Don't need to wrap it.", "author": "cgorantla", "createdAt": "2020-09-29T19:29:52Z", "path": "container/features/src/main/resources/features.xml", "diffHunk": "@@ -186,7 +189,8 @@\n         <bundle>mvn:org.eclipse.persistence/org.eclipse.persistence.antlr/${eclipselinkVersion}</bundle>\n     </feature>\n     <feature name=\"jcifs\" version=\"${jcifsVersion}\" description=\"jcifs\">\n-        <bundle>wrap:mvn:org.samba.jcifs/jcifs/${jcifsVersion}</bundle>\n+        <feature>bcprov</feature>\n+        <bundle>wrap:mvn:eu.agno3.jcifs/jcifs-ng/${jcifsVersion}</bundle>", "originalCommit": "b67b51c81614864397ce9fb1f459262814baa569", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2e4a373bf62262bd979150d5c102ebf328c7b8a3", "url": "https://github.com/OpenNMS/opennms/commit/2e4a373bf62262bd979150d5c102ebf328c7b8a3", "message": "no need to wrap this one", "committedDate": "2020-09-30T20:21:06Z", "type": "commit"}, {"oid": "3bff2de31ee5c2aa24fb3a603de37ceada08aed0", "url": "https://github.com/OpenNMS/opennms/commit/3bff2de31ee5c2aa24fb3a603de37ceada08aed0", "message": "getting NoClassDefFoundError for two classes in two of these packages, and they were not added to the Import-Package list by the wrap feature so hoping this resolves it.", "committedDate": "2020-10-01T02:02:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQzMzQ5Nw==", "url": "https://github.com/OpenNMS/opennms/pull/3134#discussion_r498433497", "bodyText": "Update these bundles with com.github.skyghis/j-interop-ng  and com.github.skyghis/j-interop-ng-deps", "author": "cgorantla", "createdAt": "2020-10-01T18:19:43Z", "path": "container/features/src/main/resources/features.xml", "diffHunk": "@@ -805,7 +809,8 @@\n         <feature>commons-cli</feature>\n         <feature>opennms-collection-api</feature>\n         <feature>opennms-provisioning-api</feature>\n-        <bundle dependency=\"true\">wrap:mvn:org.jinterop/j-interop/${jinteropVersion}</bundle>\n+        <feature>jcifs</feature>\n+        <bundle dependency=\"true\">wrap:mvn:org.jinterop/j-interop/${jinteropVersion}$Import-Package=jcifs,jcifs.smb,jcifs.util,jcifs.netbios,ndr,rpc,rpc.core,rpc.ncacn_np,rpc.pdu,rpc.security.ntlm</bundle>", "originalCommit": "3bff2de31ee5c2aa24fb3a603de37ceada08aed0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0c5d65288ad484561f407ab0d144262dec190ef2", "url": "https://github.com/OpenNMS/opennms/commit/0c5d65288ad484561f407ab0d144262dec190ef2", "message": "use the correct group / artifact for j-interop 3", "committedDate": "2020-10-05T14:20:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY0OTQzMg==", "url": "https://github.com/OpenNMS/opennms/pull/3134#discussion_r499649432", "bodyText": "Still need this system property ?", "author": "cgorantla", "createdAt": "2020-10-05T14:39:50Z", "path": "container/karaf/src/main/filtered-resources/etc/system.properties", "diffHunk": "@@ -177,10 +177,13 @@ karaf.handle.sigterm = false\n # @see https://issues.opennms.org/browse/NMS-9416\n # @see https://github.com/apache/mina-sshd/blob/master/sshd-core/src/main/java/org/apache/sshd/common/util/security/SecurityUtils.java\n #\n+# The WMI enhancements of NMS-12788 require Bouncy Castle in the system classpath, so the change is now configured by default.\n+# @see https://issues.opennms.org/browse/NMS-12788\n+\n # Original:\n #org.apache.sshd.security.registrars = \\\n #  org.apache.sshd.common.util.security.bouncycastle.BouncyCastleSecurityProviderRegistrar,\\\n #  org.apache.sshd.common.util.security.eddsa.EdDSASecurityProviderRegistrar\n #\n # Edited:\n-#org.apache.sshd.security.registrars = org.apache.sshd.common.util.security.eddsa.EdDSASecurityProviderRegistrar\n+org.apache.sshd.security.registrars = org.apache.sshd.common.util.security.eddsa.EdDSASecurityProviderRegistrar", "originalCommit": "0c5d65288ad484561f407ab0d144262dec190ef2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY1MTIzNw==", "url": "https://github.com/OpenNMS/opennms/pull/3134#discussion_r499651237", "bodyText": "Yes - the SSH bundle won't start in the main OpenNMS karaf container without it.", "author": "dschlenk", "createdAt": "2020-10-05T14:42:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY0OTQzMg=="}], "type": "inlineReview"}]}