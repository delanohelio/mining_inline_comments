{"pr_number": 3227, "pr_title": "NMS-12967: Correcting clock misconfiguration", "pr_createdAt": "2020-11-26T23:04:40Z", "pr_url": "https://github.com/OpenNMS/opennms/pull/3227", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQzMzc0Nw==", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531433747", "bodyText": "typo, should be foreignId", "author": "christianpape", "createdAt": "2020-11-27T07:56:37Z", "path": "features/flows/kafka-persistence/src/main/java/org/opennms/netmgt/flows/persistence/model/NodeInfoOrBuilder.java", "diffHunk": "@@ -37,44 +37,55 @@\n \n   /**\n    * <code>string foreign_source = 1;</code>\n+   * @return The foreignSource.\n    */\n   java.lang.String getForeignSource();\n   /**\n    * <code>string foreign_source = 1;</code>\n+   * @return The bytes for foreignSource.\n    */\n   com.google.protobuf.ByteString\n       getForeignSourceBytes();\n \n   /**\n    * <code>string foregin_id = 2;</code>\n+   * @return The foreginId.", "originalCommit": "bb097b753e43102c9456cc975ced651308471c86", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUxMDM5Mg==", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531510392", "bodyText": "The typo was not introduced by me - I've just regenerated the file from protobuf. I fixed it now but I'm uncertain if this wil break eternal users or is fine as the field ID is still the same?", "author": "fooker", "createdAt": "2020-11-27T10:22:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQzMzc0Nw=="}], "type": "inlineReview"}, {"oid": "ef2c46288b928181277fc9fada71abfc765b4059", "url": "https://github.com/OpenNMS/opennms/commit/ef2c46288b928181277fc9fada71abfc765b4059", "message": "NMS-12967: Adding docs", "committedDate": "2020-11-27T11:51:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU5ODU3MA==", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531598570", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Flow analyses uses timestamps exposed by the underlying flow management protocol.\n          \n          \n            \n            Flow analyses use timestamps exposed by the underlying flow management protocol.", "author": "Bonrob2", "createdAt": "2020-11-27T13:21:25Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/flows/setup.adoc", "diffHunk": "@@ -216,3 +216,25 @@ admin@opennms()> config:edit org.opennms.features.flows.persistence.kafka\n admin@opennms()> config:property-set bootstrap.servers 127.0.0.1:9092\n admin@opennms()> config:update\n ----\n+\n+=== Correcting clock skew\n+\n+Flow analyses uses timestamps exposed by the underlying flow management protocol.", "originalCommit": "ef2c46288b928181277fc9fada71abfc765b4059", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU5OTIwOA==", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531599208", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If the routers clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.\n          \n          \n            \n            If the router's clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.", "author": "Bonrob2", "createdAt": "2020-11-27T13:22:37Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/flows/setup.adoc", "diffHunk": "@@ -216,3 +216,25 @@ admin@opennms()> config:edit org.opennms.features.flows.persistence.kafka\n admin@opennms()> config:property-set bootstrap.servers 127.0.0.1:9092\n admin@opennms()> config:update\n ----\n+\n+=== Correcting clock skew\n+\n+Flow analyses uses timestamps exposed by the underlying flow management protocol.\n+These timestamps will be set depending on the clock of the exporting router.\n+If the routers clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.", "originalCommit": "ef2c46288b928181277fc9fada71abfc765b4059", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU5OTgwOA==", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531599808", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To do so, it compares the current time of the exporting device wit tha actual time when the packet has been received.\n          \n          \n            \n            To do so, it compares the current time of the exporting device with the actual time when the packet has been received.", "author": "Bonrob2", "createdAt": "2020-11-27T13:23:52Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/flows/setup.adoc", "diffHunk": "@@ -216,3 +216,25 @@ admin@opennms()> config:edit org.opennms.features.flows.persistence.kafka\n admin@opennms()> config:property-set bootstrap.servers 127.0.0.1:9092\n admin@opennms()> config:update\n ----\n+\n+=== Correcting clock skew\n+\n+Flow analyses uses timestamps exposed by the underlying flow management protocol.\n+These timestamps will be set depending on the clock of the exporting router.\n+If the routers clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.\n+\n+_{opennms-product-name}_ can correct the timestamps of a received flow.\n+To do so, it compares the current time of the exporting device wit tha actual time when the packet has been received.", "originalCommit": "ef2c46288b928181277fc9fada71abfc765b4059", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTYwMDAwNA==", "url": "https://github.com/OpenNMS/opennms/pull/3227#discussion_r531600004", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If these times differ by a certain amount, the receive-time will be considered more correct and all timestamps of the flow will be adapted.\n          \n          \n            \n            If these times differ by a certain amount, the receive time will be considered more correct and all timestamps of the flow will be adapted.", "author": "Bonrob2", "createdAt": "2020-11-27T13:24:16Z", "path": "opennms-doc/guide-admin/src/asciidoc/text/flows/setup.adoc", "diffHunk": "@@ -216,3 +216,25 @@ admin@opennms()> config:edit org.opennms.features.flows.persistence.kafka\n admin@opennms()> config:property-set bootstrap.servers 127.0.0.1:9092\n admin@opennms()> config:update\n ----\n+\n+=== Correcting clock skew\n+\n+Flow analyses uses timestamps exposed by the underlying flow management protocol.\n+These timestamps will be set depending on the clock of the exporting router.\n+If the routers clock differs from the actual time, this will be reflected in received flows and therefore skew up further analysis and aggregation.\n+\n+_{opennms-product-name}_ can correct the timestamps of a received flow.\n+To do so, it compares the current time of the exporting device wit tha actual time when the packet has been received.\n+If these times differ by a certain amount, the receive-time will be considered more correct and all timestamps of the flow will be adapted.", "originalCommit": "ef2c46288b928181277fc9fada71abfc765b4059", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8a3280e2851caa883484a6f58f618c6e531f4148", "url": "https://github.com/OpenNMS/opennms/commit/8a3280e2851caa883484a6f58f618c6e531f4148", "message": "NSM-12967: Fix doc typos\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>", "committedDate": "2020-11-30T10:28:39Z", "type": "forcePushed"}, {"oid": "bf32db09d791037700d5d6f5d307df85cd4a6f89", "url": "https://github.com/OpenNMS/opennms/commit/bf32db09d791037700d5d6f5d307df85cd4a6f89", "message": "NMS-12973: Correct clock skew", "committedDate": "2020-11-30T11:15:19Z", "type": "commit"}, {"oid": "1efee95703dcbe1e30831b5fb00e3909672d77c4", "url": "https://github.com/OpenNMS/opennms/commit/1efee95703dcbe1e30831b5fb00e3909672d77c4", "message": "NMS-12967: Adding docs", "committedDate": "2020-11-30T11:15:19Z", "type": "commit"}, {"oid": "82e8c86a07b6cd6bf8a7596b362f417097dd8ee2", "url": "https://github.com/OpenNMS/opennms/commit/82e8c86a07b6cd6bf8a7596b362f417097dd8ee2", "message": "NSM-12967: Fix doc typos\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>", "committedDate": "2020-11-30T11:15:19Z", "type": "commit"}, {"oid": "82e8c86a07b6cd6bf8a7596b362f417097dd8ee2", "url": "https://github.com/OpenNMS/opennms/commit/82e8c86a07b6cd6bf8a7596b362f417097dd8ee2", "message": "NSM-12967: Fix doc typos\n\nCo-authored-by: Bonrob2 <59453630+Bonrob2@users.noreply.github.com>", "committedDate": "2020-11-30T11:15:19Z", "type": "forcePushed"}, {"oid": "5f976d40f07496f3a1571e40fd41eb2fc0155109", "url": "https://github.com/OpenNMS/opennms/commit/5f976d40f07496f3a1571e40fd41eb2fc0155109", "message": "fixup! NMS-12973: Correct clock skew", "committedDate": "2020-11-30T13:20:50Z", "type": "commit"}]}