{"pr_number": 3072, "pr_title": "NMS-12769: fix pid file handling", "pr_createdAt": "2020-07-17T20:44:54Z", "pr_url": "https://github.com/OpenNMS/opennms/pull/3072", "timeline": [{"oid": "573407123f6a811dd0a21f62568bdc84a6d23c82", "url": "https://github.com/OpenNMS/opennms/commit/573407123f6a811dd0a21f62568bdc84a6d23c82", "message": "NMS-12769: write PID from Java and notify Systemd", "committedDate": "2020-07-17T20:48:26Z", "type": "forcePushed"}, {"oid": "0d6fabcde74b225ec03129edf8fcb96840f491c7", "url": "https://github.com/OpenNMS/opennms/commit/0d6fabcde74b225ec03129edf8fcb96840f491c7", "message": "NMS-12769: write PID from Java and notify Systemd", "committedDate": "2020-07-23T20:15:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NzU0OQ==", "url": "https://github.com/OpenNMS/opennms/pull/3072#discussion_r459597549", "bodyText": "If we're changing back to Type=forking, I think we need to change the flag to ExecStart from -f (for \"foreground\") to -Q or just no flags at all. Otherwise Systemd has the wrong expectation.", "author": "jeffgdotorg", "createdAt": "2020-07-23T17:03:56Z", "path": "opennms-base-assembly/src/main/filtered/etc/opennms.service", "diffHunk": "@@ -8,7 +8,7 @@ After=${install.postgresql.service}.service postgresql-10.service postgresql-11.\n User=root\n Environment=\"OPENNMS_HOME=${install.dir}\"\n \n-Type=simple\n+Type=forking\n PIDFile=${install.pid.file}\n \n ExecStart=${install.init.dir}/opennms -f start", "originalCommit": "573407123f6a811dd0a21f62568bdc84a6d23c82", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDE1NTMzNQ==", "url": "https://github.com/OpenNMS/opennms/pull/3072#discussion_r460155335", "bodyText": "Last commit implemented requested change.", "author": "jeffgdotorg", "createdAt": "2020-07-24T16:20:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5NzU0OQ=="}], "type": "inlineReview"}, {"oid": "fb6669112147055811834740fa2cdbcf7f5f0560", "url": "https://github.com/OpenNMS/opennms/commit/fb6669112147055811834740fa2cdbcf7f5f0560", "message": "NMS-12769: just let the first one check instead", "committedDate": "2020-08-12T21:16:14Z", "type": "forcePushed"}, {"oid": "5b31c0c3fa8c172e0ececda589250419ffe716fa", "url": "https://github.com/OpenNMS/opennms/commit/5b31c0c3fa8c172e0ececda589250419ffe716fa", "message": "NMS-12769: delete, rather than just blanking out, the PID files", "committedDate": "2020-08-13T15:20:14Z", "type": "forcePushed"}, {"oid": "ed518a44e682383c068ac2e61206ace4b10d0fad", "url": "https://github.com/OpenNMS/opennms/commit/ed518a44e682383c068ac2e61206ace4b10d0fad", "message": "NMS-12769: delete, rather than just blanking out, the PID files", "committedDate": "2020-08-13T15:29:58Z", "type": "forcePushed"}, {"oid": "9304ff1cd8076bf113de44353512efe33276bb63", "url": "https://github.com/OpenNMS/opennms/commit/9304ff1cd8076bf113de44353512efe33276bb63", "message": "NMS-12769: delete, rather than just blanking out, the PID files", "committedDate": "2020-08-13T16:09:20Z", "type": "forcePushed"}, {"oid": "1047adfb8ed45084d092425c3ffba948b66f52c6", "url": "https://github.com/OpenNMS/opennms/commit/1047adfb8ed45084d092425c3ffba948b66f52c6", "message": "NMS-12769: write PID from Java and notify Systemd", "committedDate": "2020-08-19T19:30:05Z", "type": "forcePushed"}, {"oid": "06d43c0fbb490e40d7e8535c94d31570f399f137", "url": "https://github.com/OpenNMS/opennms/commit/06d43c0fbb490e40d7e8535c94d31570f399f137", "message": "NMS-12769: put karaf.pid in the log directory", "committedDate": "2020-08-19T20:01:05Z", "type": "commit"}, {"oid": "4c8a32ccfc706dd48fea38d2efbbce4875d7f23e", "url": "https://github.com/OpenNMS/opennms/commit/4c8a32ccfc706dd48fea38d2efbbce4875d7f23e", "message": "NMS-12769: write PID from Java and notify Systemd", "committedDate": "2020-08-19T20:01:05Z", "type": "commit"}, {"oid": "e10a561271120b5f8c4ea0efad04583ed4abf4aa", "url": "https://github.com/OpenNMS/opennms/commit/e10a561271120b5f8c4ea0efad04583ed4abf4aa", "message": "clean up some formatting", "committedDate": "2020-08-19T20:01:05Z", "type": "commit"}, {"oid": "5851e52a5554a7f28a715f7d36cdd0d8dd0bf6b4", "url": "https://github.com/OpenNMS/opennms/commit/5851e52a5554a7f28a715f7d36cdd0d8dd0bf6b4", "message": "NMS-12769: only write PID on startup", "committedDate": "2020-08-19T20:01:05Z", "type": "commit"}, {"oid": "09d30b79de66e1d39a9fcdaf0b582352ab5e4859", "url": "https://github.com/OpenNMS/opennms/commit/09d30b79de66e1d39a9fcdaf0b582352ab5e4859", "message": "NMS-12769: delete, rather than just blanking out, the PID files", "committedDate": "2020-08-19T20:01:05Z", "type": "commit"}, {"oid": "2733b14672389df526c51f895462a50ae4be1d34", "url": "https://github.com/OpenNMS/opennms/commit/2733b14672389df526c51f895462a50ae4be1d34", "message": "fix systemd on Debian systems", "committedDate": "2020-08-20T01:13:14Z", "type": "commit"}, {"oid": "2733b14672389df526c51f895462a50ae4be1d34", "url": "https://github.com/OpenNMS/opennms/commit/2733b14672389df526c51f895462a50ae4be1d34", "message": "fix systemd on Debian systems", "committedDate": "2020-08-20T01:13:14Z", "type": "forcePushed"}]}