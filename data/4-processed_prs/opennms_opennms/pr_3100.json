{"pr_number": 3100, "pr_title": "NMS-12838: Add events for new Application Model", "pr_createdAt": "2020-08-06T15:16:12Z", "pr_url": "https://github.com/OpenNMS/opennms/pull/3100", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg0ODQ4OA==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r466848488", "bodyText": "We need something similar here, that reacts to APPLICATION_CREATED_EVENT_UEI, APPLICATION_DELETED_EVENT_UEI and APPLICATION_CHANGED_EVENT_UEI and creates / reschedule / cancels only the affected and not the entire set of polling jobs, e.g. handleConfigurationChangedForApplication().", "author": "christianpape", "createdAt": "2020-08-07T06:34:39Z", "path": "features/remotepollerng/daemon/src/main/java/org/opennms/netmgt/remotepollerng/RemotePollerd.java", "diffHunk": "@@ -498,15 +496,4 @@ public void afterPropertiesSet() throws Exception {\n     public void reloadDaemonConfig(final IEvent e) {\n         DaemonTools.handleReloadEvent(e, RemotePollerd.NAME, (event) -> handleConfigurationChanged());\n     }\n-\n-    @EventHandler(uei = EventConstants.POLLER_PACKAGE_LOCATION_ASSOCIATION_CHANGED_EVENT_UEI)\n-    public void reloadDaemonConfigForLocation(final IEvent e) {", "originalCommit": "0d23955e2e31133b384ead8a37e8feb7e6c03198", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA1NTQ0Mg==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r467055442", "bodyText": "if I understood @fooker correctly this ticket was only about creating the events, not listening to them. Having said that I can ad this of course as well. @fooker what do you think?", "author": "patrick-schweizer", "createdAt": "2020-08-07T13:54:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg0ODQ4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTIyNzkyOA==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r469227928", "bodyText": "That's right. I'm currently refactoring this anyways. So no need to implement the receiving side (right now).", "author": "fooker", "createdAt": "2020-08-12T12:38:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg0ODQ4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTIzMDI2Nw==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r469230267", "bodyText": "Ok, makes sense.", "author": "christianpape", "createdAt": "2020-08-12T12:42:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg0ODQ4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg0OTAwNw==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r466849007", "bodyText": "see above, the behavior for the partial reschedule of jobs for an application should be tested here.", "author": "christianpape", "createdAt": "2020-08-07T06:35:55Z", "path": "features/remotepollerng/daemon/src/test/java/org/opennms/netmgt/remotepollerng/RemotePollerdIT.java", "diffHunk": "@@ -208,9 +208,10 @@ private void changePollingPackages(final String locationName, final String ... p\n     }\n \n     private void sendPollingPackageAssociationChanged(final String locationName) {\n-        final EventBuilder ebldr = new EventBuilder(EventConstants.POLLER_PACKAGE_LOCATION_ASSOCIATION_CHANGED_EVENT_UEI, \"test\");\n-        ebldr.addParam(EventConstants.PARM_LOCATION, locationName);\n-        this.eventIpcManager.sendNow(ebldr.getEvent());\n+        // TODO Patrick: do we need to send a different event?", "originalCommit": "0d23955e2e31133b384ead8a37e8feb7e6c03198", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg1MTU1Nw==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r466851557", "bodyText": "There are events sent for creation and deletion of an application but not for changing an application, right? Or am I missing something?", "author": "christianpape", "createdAt": "2020-08-07T06:42:52Z", "path": "opennms-webapp-rest/src/main/java/org/opennms/web/rest/v2/ApplicationRestService.java", "diffHunk": "@@ -58,8 +68,17 @@\n @Transactional\n public class ApplicationRestService extends AbstractDaoRestService<OnmsApplication,OnmsApplication,Integer,Integer> {", "originalCommit": "0d23955e2e31133b384ead8a37e8feb7e6c03198", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA1Mzg2Ng==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r467053866", "bodyText": "That is correct. The ApplicationRestService has no changeApplication method? In opennms-web-api/src/main/java/org/opennms/web/svclayer/support/DefaultAdminApplicationService.java we have the edit method that is sending a CHANGED event.", "author": "patrick-schweizer", "createdAt": "2020-08-07T13:51:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg1MTU1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUzNTg0Mg==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r469535842", "bodyText": "@christianpape I checked again. No edit method (the default implementation doesn't support edit).", "author": "patrick-schweizer", "createdAt": "2020-08-12T20:44:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg1MTU1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTcxNjM2MQ==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r469716361", "bodyText": "OK", "author": "christianpape", "createdAt": "2020-08-13T06:05:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njg1MTU1Nw=="}], "type": "inlineReview"}, {"oid": "41f1a24ecdeb631207c0358516052629fbf01ca6", "url": "https://github.com/OpenNMS/opennms/commit/41f1a24ecdeb631207c0358516052629fbf01ca6", "message": "NMS-12838: Add events for new Application Model: fixed spelling", "committedDate": "2020-08-12T20:41:55Z", "type": "forcePushed"}, {"oid": "a126da7bf02bf5c596c224b4fd0bbafc61519496", "url": "https://github.com/OpenNMS/opennms/commit/a126da7bf02bf5c596c224b4fd0bbafc61519496", "message": "NMS-12838: Add events for new Application Model", "committedDate": "2020-08-13T15:22:18Z", "type": "commit"}, {"oid": "749aa38d741be90fd5d51d0f6448f30a9b3da742", "url": "https://github.com/OpenNMS/opennms/commit/749aa38d741be90fd5d51d0f6448f30a9b3da742", "message": "NMS-12838: Add events for new Application Model: remove POLLER_PACKAGE_LOCATION_ASSOCIATION_CHANGED_EVENT_UEI", "committedDate": "2020-08-13T15:22:18Z", "type": "commit"}, {"oid": "d40196482025e4b52f5368118aee72ef72ce1153", "url": "https://github.com/OpenNMS/opennms/commit/d40196482025e4b52f5368118aee72ef72ce1153", "message": "NMS-12838: Add events for new Application Model: implement events in ApplicationRestService", "committedDate": "2020-08-13T15:22:18Z", "type": "commit"}, {"oid": "fb290eda33cfdfded7c707934f626b0bd755fa08", "url": "https://github.com/OpenNMS/opennms/commit/fb290eda33cfdfded7c707934f626b0bd755fa08", "message": "NMS-12838: Add events for new Application Model: add missing copyright", "committedDate": "2020-08-13T15:22:18Z", "type": "commit"}, {"oid": "de18ee56c66eca3f60cf422e837bac1c02dbf097", "url": "https://github.com/OpenNMS/opennms/commit/de18ee56c66eca3f60cf422e837bac1c02dbf097", "message": "NMS-12838: Add events for new Application Model: fixed spelling", "committedDate": "2020-08-13T15:22:18Z", "type": "commit"}, {"oid": "41449fbd486b91ddf45b93f74c33fa0872716666", "url": "https://github.com/OpenNMS/opennms/commit/41449fbd486b91ddf45b93f74c33fa0872716666", "message": "NMS-12842: Remote Poller: add remote outages to UI: add events to more places.", "committedDate": "2020-08-13T15:22:18Z", "type": "commit"}, {"oid": "41449fbd486b91ddf45b93f74c33fa0872716666", "url": "https://github.com/OpenNMS/opennms/commit/41449fbd486b91ddf45b93f74c33fa0872716666", "message": "NMS-12842: Remote Poller: add remote outages to UI: add events to more places.", "committedDate": "2020-08-13T15:22:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE4NzEyMA==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470187120", "bodyText": "Better call it sendEvent, 'sent' is past.", "author": "christianpape", "createdAt": "2020-08-13T19:12:57Z", "path": "opennms-web-api/src/main/java/org/opennms/web/svclayer/support/DefaultAdminApplicationService.java", "diffHunk": "@@ -307,12 +325,25 @@ public void performEditLocations(final String applicationIdString, final String\n         }\n     }\n \n+    private void sentEvent(final OnmsApplication application, final String uei) {", "originalCommit": "41449fbd486b91ddf45b93f74c33fa0872716666", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5NjE0NQ==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470296145", "bodyText": "\ud83d\udc4d", "author": "patrick-schweizer", "createdAt": "2020-08-13T23:05:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE4NzEyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5MDQyOA==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470190428", "bodyText": "Same must be done in the performEditLocations() method, since the application is also saved there.", "author": "christianpape", "createdAt": "2020-08-13T19:18:20Z", "path": "opennms-web-api/src/main/java/org/opennms/web/svclayer/support/DefaultAdminApplicationService.java", "diffHunk": "@@ -203,9 +219,10 @@ public void performEditServices(String applicationIdString, String editAction, S\n                 \n                 service.addApplication(application);\n                 m_monitoredServiceDao.save(service);\n+                sentEvent(application, EventConstants.APPLICATION_CHANGED_EVENT_UEI);", "originalCommit": "41449fbd486b91ddf45b93f74c33fa0872716666", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI5NjU1Nw==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470296557", "bodyText": "fixed.", "author": "patrick-schweizer", "createdAt": "2020-08-13T23:07:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5MDQyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5MDY5NA==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470190694", "bodyText": "Same must be done in the performEditLocations() method, since the application is also saved there.", "author": "christianpape", "createdAt": "2020-08-13T19:18:48Z", "path": "opennms-web-api/src/main/java/org/opennms/web/svclayer/support/DefaultAdminApplicationService.java", "diffHunk": "@@ -237,6 +254,7 @@ public void performEditServices(String applicationIdString, String editAction, S\n             }\n \n             m_applicationDao.save(application);\n+            sentEvent(application, EventConstants.APPLICATION_CHANGED_EVENT_UEI);", "originalCommit": "41449fbd486b91ddf45b93f74c33fa0872716666", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDMzNTEyMg==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470335122", "bodyText": "\ud83d\udc4d done.", "author": "patrick-schweizer", "createdAt": "2020-08-14T00:38:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5MDY5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5MTgwMg==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470191802", "bodyText": "Same here 'sendEvent' is better.", "author": "christianpape", "createdAt": "2020-08-13T19:20:36Z", "path": "opennms-webapp-rest/src/main/java/org/opennms/web/rest/v2/ApplicationRestService.java", "diffHunk": "@@ -104,11 +123,25 @@ protected OnmsApplication doGet(UriInfo uriInfo, Integer id) {\n     @Override\n     public Response doCreate(final SecurityContext securityContext, final UriInfo uriInfo, final OnmsApplication object) {\n         final Integer id = getDao().save(object);\n+        sentEvent(object, EventConstants.APPLICATION_CREATED_EVENT_UEI);\n         return Response.created(RedirectHelper.getRedirectUri(uriInfo, id)).build();\n     }\n \n     @Override\n     protected void doDelete(SecurityContext securityContext, UriInfo uriInfo, OnmsApplication object) {\n         getDao().delete(object);\n+        sentEvent(object, EventConstants.APPLICATION_DELETED_EVENT_UEI);\n+    }\n+\n+    private void sentEvent(final OnmsApplication application, final String uei) {", "originalCommit": "41449fbd486b91ddf45b93f74c33fa0872716666", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDMzNTU5NQ==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470335595", "bodyText": "\ud83d\udc4d fixed.", "author": "patrick-schweizer", "createdAt": "2020-08-14T00:38:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5MTgwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5MjIyNw==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470192227", "bodyText": "shouldSendEvents...", "author": "christianpape", "createdAt": "2020-08-13T19:21:27Z", "path": "opennms-web-api/src/test/java/org/opennms/web/svclayer/support/DefaultAdminApplicationServiceTest.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*******************************************************************************\n+ * This file is part of OpenNMS(R).\n+ *\n+ * Copyright (C) 2006-2014 The OpenNMS Group, Inc.\n+ * OpenNMS(R) is Copyright (C) 1999-2014 The OpenNMS Group, Inc.\n+ *\n+ * OpenNMS(R) is a registered trademark of The OpenNMS Group, Inc.\n+ *\n+ * OpenNMS(R) is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as published\n+ * by the Free Software Foundation, either version 3 of the License,\n+ * or (at your option) any later version.\n+ *\n+ * OpenNMS(R) is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with OpenNMS(R).  If not, see:\n+ *      http://www.gnu.org/licenses/\n+ *\n+ * For more information contact:\n+ *     OpenNMS(R) Licensing <license@opennms.org>\n+ *     http://www.opennms.org/\n+ *     http://www.opennms.com/\n+ *******************************************************************************/\n+\n+package org.opennms.web.svclayer.support;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.mockito.Matchers.anyInt;\n+import static org.mockito.Mockito.times;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.verifyNoMoreInteractions;\n+import static org.mockito.Mockito.when;\n+\n+import org.junit.Test;\n+import org.mockito.ArgumentCaptor;\n+import org.mockito.Mockito;\n+import org.opennms.netmgt.dao.api.ApplicationDao;\n+import org.opennms.netmgt.dao.api.MonitoredServiceDao;\n+import org.opennms.netmgt.dao.mock.MockApplicationDao;\n+import org.opennms.netmgt.events.api.EventConstants;\n+import org.opennms.netmgt.events.api.EventProxy;\n+import org.opennms.netmgt.events.api.EventProxyException;\n+import org.opennms.netmgt.model.OnmsMonitoredService;\n+import org.opennms.netmgt.xml.event.Event;\n+\n+public class DefaultAdminApplicationServiceTest {\n+\n+    @Test\n+    public void shouldSentEventsForApplication() throws EventProxyException {", "originalCommit": "41449fbd486b91ddf45b93f74c33fa0872716666", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDMzNjI3Mw==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470336273", "bodyText": "\ud83d\udc4d fixed.", "author": "patrick-schweizer", "createdAt": "2020-08-14T00:39:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5MjIyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5Mzc4Mw==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470193783", "bodyText": "Why not static?", "author": "christianpape", "createdAt": "2020-08-13T19:23:53Z", "path": "opennms-webapp-rest/src/main/java/org/opennms/web/rest/v2/ApplicationEventUtil.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*******************************************************************************\n+ * This file is part of OpenNMS(R).\n+ *\n+ * Copyright (C) 2008-2020 The OpenNMS Group, Inc.\n+ * OpenNMS(R) is Copyright (C) 1999-2020 The OpenNMS Group, Inc.\n+ *\n+ * OpenNMS(R) is a registered trademark of The OpenNMS Group, Inc.\n+ *\n+ * OpenNMS(R) is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as published\n+ * by the Free Software Foundation, either version 3 of the License,\n+ * or (at your option) any later version.\n+ *\n+ * OpenNMS(R) is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with OpenNMS(R).  If not, see:\n+ *      http://www.gnu.org/licenses/\n+ *\n+ * For more information contact:\n+ *     OpenNMS(R) Licensing <license@opennms.org>\n+ *     http://www.opennms.org/\n+ *     http://www.opennms.com/\n+ *******************************************************************************/\n+\n+package org.opennms.web.rest.v2;\n+\n+import static org.opennms.netmgt.events.api.EventConstants.APPLICATION_CHANGED_EVENT_UEI;\n+import static org.opennms.netmgt.events.api.EventConstants.PARM_APPLICATION_ID;\n+import static org.opennms.netmgt.events.api.EventConstants.PARM_APPLICATION_NAME;\n+\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.List;\n+\n+import org.opennms.netmgt.model.OnmsApplication;\n+import org.opennms.netmgt.model.events.EventBuilder;\n+import org.opennms.netmgt.xml.event.Event;\n+\n+public class ApplicationEventUtil {\n+\n+    public List<Event> getApplicationChangedEvents(final Collection<OnmsApplication> applications) {", "originalCommit": "41449fbd486b91ddf45b93f74c33fa0872716666", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM0MDE2Mw==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470340163", "bodyText": "sure. Fixed.", "author": "patrick-schweizer", "createdAt": "2020-08-14T00:45:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5Mzc4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5NDI0Mw==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470194243", "bodyText": "Is there a reason why the method is not static?", "author": "christianpape", "createdAt": "2020-08-13T19:24:36Z", "path": "opennms-webapp-rest/src/main/java/org/opennms/web/rest/v2/NodeMonitoredServiceRestService.java", "diffHunk": "@@ -159,6 +164,8 @@ protected Response doCreate(SecurityContext securityContext, UriInfo uriInfo, On\n         final Event e = EventUtils.createNodeGainedServiceEvent(\"ReST\", iface.getNode().getId(), iface.getIpAddress(), service.getServiceName(), iface.getNode().getLabel(),\n                                                                 iface.getNode().getLabelSource(), iface.getNode().getSysName(), iface.getNode().getSysDescription());\n         sendEvent(e);\n+        new ApplicationEventUtil().getApplicationChangedEvents(service.getApplications()).forEach(this::sendEvent);", "originalCommit": "41449fbd486b91ddf45b93f74c33fa0872716666", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM0MDQwOQ==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470340409", "bodyText": "its static now.", "author": "patrick-schweizer", "createdAt": "2020-08-14T00:46:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5NDI0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5NDcwNQ==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470194705", "bodyText": "Again, use 'send' instead of 'sent'", "author": "christianpape", "createdAt": "2020-08-13T19:25:21Z", "path": "opennms-webapp-rest/src/test/java/org/opennms/web/rest/v2/ApplicationRestServiceTest.java", "diffHunk": "@@ -0,0 +1,258 @@\n+/*******************************************************************************\n+ * This file is part of OpenNMS(R).\n+ *\n+ * Copyright (C) 2008-2020 The OpenNMS Group, Inc.\n+ * OpenNMS(R) is Copyright (C) 1999-2020 The OpenNMS Group, Inc.\n+ *\n+ * OpenNMS(R) is a registered trademark of The OpenNMS Group, Inc.\n+ *\n+ * OpenNMS(R) is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as published\n+ * by the Free Software Foundation, either version 3 of the License,\n+ * or (at your option) any later version.\n+ *\n+ * OpenNMS(R) is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with OpenNMS(R).  If not, see:\n+ *      http://www.gnu.org/licenses/\n+ *\n+ * For more information contact:\n+ *     OpenNMS(R) Licensing <license@opennms.org>\n+ *     http://www.opennms.org/\n+ *     http://www.opennms.com/\n+ *******************************************************************************/\n+\n+package org.opennms.web.rest.v2;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.times;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+\n+import java.lang.reflect.Method;\n+import java.net.URI;\n+import java.net.URISyntaxException;\n+import java.util.Map;\n+\n+import javax.ws.rs.core.SecurityContext;\n+import javax.ws.rs.core.UriBuilder;\n+import javax.ws.rs.core.UriBuilderException;\n+import javax.ws.rs.core.UriInfo;\n+\n+import org.junit.Test;\n+import org.mockito.ArgumentCaptor;\n+import org.opennms.netmgt.dao.api.ApplicationDao;\n+import org.opennms.netmgt.dao.mock.MockApplicationDao;\n+import org.opennms.netmgt.events.api.EventConstants;\n+import org.opennms.netmgt.events.api.EventProxy;\n+import org.opennms.netmgt.events.api.EventProxyException;\n+import org.opennms.netmgt.model.OnmsApplication;\n+import org.opennms.netmgt.xml.event.Event;\n+\n+public class ApplicationRestServiceTest {\n+    @Test\n+    public void shouldSentEvents() throws EventProxyException {", "originalCommit": "41449fbd486b91ddf45b93f74c33fa0872716666", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM0Mjc5Ng==", "url": "https://github.com/OpenNMS/opennms/pull/3100#discussion_r470342796", "bodyText": "\ud83d\udc4d fixed", "author": "patrick-schweizer", "createdAt": "2020-08-14T00:49:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE5NDcwNQ=="}], "type": "inlineReview"}, {"oid": "dcd4afd666bd3828d0b8dc8c27f97308835de19e", "url": "https://github.com/OpenNMS/opennms/commit/dcd4afd666bd3828d0b8dc8c27f97308835de19e", "message": "NMS-12842: Remote Poller: add remote outages to UI: address PR comments", "committedDate": "2020-08-14T00:49:32Z", "type": "commit"}]}