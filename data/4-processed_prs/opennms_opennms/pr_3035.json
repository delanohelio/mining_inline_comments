{"pr_number": 3035, "pr_title": "NMS-12750: Fix delta switched for Netflow5", "pr_createdAt": "2020-06-11T16:21:17Z", "pr_url": "https://github.com/OpenNMS/opennms/pull/3035", "timeline": [{"oid": "25946e07ffe9128494e5bb3a4cb9144c085ba036", "url": "https://github.com/OpenNMS/opennms/commit/25946e07ffe9128494e5bb3a4cb9144c085ba036", "message": "NMS-12750: Fix delta switched for Netflow5", "committedDate": "2020-06-11T15:49:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAzNjAwNQ==", "url": "https://github.com/OpenNMS/opennms/pull/3035#discussion_r440036005", "bodyText": "Maybe we can always use this as an fallback for deltaSwitchen without making it protocol specific", "author": "fooker", "createdAt": "2020-06-15T09:10:08Z", "path": "features/telemetry/protocols/netflow/adapter/src/main/java/org/opennms/netmgt/telemetry/protocols/netflow/adapter/common/NetflowMessage.java", "diffHunk": "@@ -110,6 +110,9 @@ public Integer getEngineType() {\n \n     @Override\n     public Long getDeltaSwitched() {\n+        if (getNetflowVersion().equals(NetflowVersion.V5)) {\n+            return flowMessageProto.hasFirstSwitched() ? flowMessageProto.getFirstSwitched().getValue() : null;", "originalCommit": "25946e07ffe9128494e5bb3a4cb9144c085ba036", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDEzNDc3OQ==", "url": "https://github.com/OpenNMS/opennms/pull/3035#discussion_r440134779", "bodyText": "Yeah, If you think that would be correct protocol wise, I can change that.", "author": "cgorantla", "createdAt": "2020-06-15T12:18:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAzNjAwNQ=="}], "type": "inlineReview"}, {"oid": "3b43d3e396175db77a0a7301046a02fd69ced4f4", "url": "https://github.com/OpenNMS/opennms/commit/3b43d3e396175db77a0a7301046a02fd69ced4f4", "message": "NMS-12750: Update delta switched to fall back to first swtiched always", "committedDate": "2020-06-15T17:55:31Z", "type": "commit"}, {"oid": "3b43d3e396175db77a0a7301046a02fd69ced4f4", "url": "https://github.com/OpenNMS/opennms/commit/3b43d3e396175db77a0a7301046a02fd69ced4f4", "message": "NMS-12750: Update delta switched to fall back to first swtiched always", "committedDate": "2020-06-15T17:55:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MTE3Ng==", "url": "https://github.com/OpenNMS/opennms/pull/3035#discussion_r440371176", "bodyText": "I don't think the extra boxing with new Long is necessary here.", "author": "fooker", "createdAt": "2020-06-15T18:38:19Z", "path": "features/telemetry/protocols/netflow/adapter/src/main/java/org/opennms/netmgt/telemetry/protocols/netflow/adapter/common/NetflowMessage.java", "diffHunk": "@@ -110,7 +110,7 @@ public Integer getEngineType() {\n \n     @Override\n     public Long getDeltaSwitched() {\n-        return flowMessageProto.hasDeltaSwitched() ? flowMessageProto.getDeltaSwitched().getValue() : null;\n+        return flowMessageProto.hasDeltaSwitched() ? new Long(flowMessageProto.getDeltaSwitched().getValue()) : getFirstSwitched();", "originalCommit": "3b43d3e396175db77a0a7301046a02fd69ced4f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM4Njc0NQ==", "url": "https://github.com/OpenNMS/opennms/pull/3035#discussion_r440386745", "bodyText": "ternary operator tries to auto unbox null and encounters NPE.  WIth boxing the first expression it doesn't unbox the second expression.", "author": "cgorantla", "createdAt": "2020-06-15T19:07:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM3MTE3Ng=="}], "type": "inlineReview"}, {"oid": "1a86d4c59cbb218d688b16301bb6d6ccf481f1c9", "url": "https://github.com/OpenNMS/opennms/commit/1a86d4c59cbb218d688b16301bb6d6ccf481f1c9", "message": "Merge branch 'release-26.x' into jira/NMS-12750", "committedDate": "2020-06-19T14:20:22Z", "type": "commit"}, {"oid": "dd75c6f2dd2e0124b3db76ad3df548aace2d6b32", "url": "https://github.com/OpenNMS/opennms/commit/dd75c6f2dd2e0124b3db76ad3df548aace2d6b32", "message": "Merge branch 'release-26.x' into jira/NMS-12750", "committedDate": "2020-06-19T19:29:58Z", "type": "commit"}]}