{"pr_number": 3470, "pr_title": "[Bug-3466][Worker]Fix zookeeper path end with / character error", "pr_createdAt": "2020-08-12T02:42:37Z", "pr_url": "https://github.com/apache/dolphinscheduler/pull/3470", "timeline": [{"oid": "e6fdfe991abcb9512d234be2ccac6e03d8718c34", "url": "https://github.com/apache/dolphinscheduler/commit/e6fdfe991abcb9512d234be2ccac6e03d8718c34", "message": "fix zk path error", "committedDate": "2020-08-12T02:40:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1MjYzOQ==", "url": "https://github.com/apache/dolphinscheduler/pull/3470#discussion_r469052639", "bodyText": "@CalvinKirs Please check if remove this SLASH, will the weight load balance produce error?\nI understand that ZK path is only used to distinguish workers. We only need to use host and port to uniquely determine a worker. If we add weight information, the following situations may occur:\nds/worker/default/122.2.2.2:1:100\nds/worker/default/122.2.2.2:1:200\nSo will it better to add the weight to heartbeatinfo, not in the zk path?", "author": "yangyichao-mango", "createdAt": "2020-08-12T07:14:16Z", "path": "dolphinscheduler-server/src/main/java/org/apache/dolphinscheduler/server/worker/registry/WorkerRegistry.java", "diffHunk": "@@ -152,7 +152,7 @@ public void unRegistry() {\n             // trim and lower case is need\n             workerZkPathBuilder.append(workGroup.trim().toLowerCase()).append(SLASH);\n             workerZkPathBuilder.append(address);\n-            workerZkPathBuilder.append(weight).append(SLASH);\n+            workerZkPathBuilder.append(weight);", "originalCommit": "e6fdfe991abcb9512d234be2ccac6e03d8718c34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTExMDk5NA==", "url": "https://github.com/apache/dolphinscheduler/pull/3470#discussion_r469110994", "bodyText": "It is not very good to put in heartbeatinfo, maybe we should extract all the metadata information and report it to zk separately, which may be better", "author": "CalvinKirs", "createdAt": "2020-08-12T08:58:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1MjYzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTEyMDk3MQ==", "url": "https://github.com/apache/dolphinscheduler/pull/3470#discussion_r469120971", "bodyText": "@yangyichao-mango Yes, I also think it's better to separate them", "author": "gabrywu", "createdAt": "2020-08-12T09:15:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1MjYzOQ=="}], "type": "inlineReview"}]}