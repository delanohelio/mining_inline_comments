{"pr_number": 2396, "pr_title": "[optimization]\uff1aprevent repeated database updates", "pr_createdAt": "2020-04-10T05:31:42Z", "pr_url": "https://github.com/apache/dolphinscheduler/pull/2396", "timeline": [{"oid": "a3126e6c26b76794c6ef7678292820509a6d6d01", "url": "https://github.com/apache/dolphinscheduler/commit/a3126e6c26b76794c6ef7678292820509a6d6d01", "message": "sqlTask failed to run", "committedDate": "2020-03-21T07:19:47Z", "type": "commit"}, {"oid": "5d1c6e9a3380f03367ba7f6e0e4cc31175227505", "url": "https://github.com/apache/dolphinscheduler/commit/5d1c6e9a3380f03367ba7f6e0e4cc31175227505", "message": "Merge remote-tracking branch 'upstream/dev' into dev", "committedDate": "2020-03-24T17:27:11Z", "type": "commit"}, {"oid": "145f13f084cb3ab3b9efaf3cfc8bbd7aa5912139", "url": "https://github.com/apache/dolphinscheduler/commit/145f13f084cb3ab3b9efaf3cfc8bbd7aa5912139", "message": "Merge remote-tracking branch 'upstream/dev' into dev", "committedDate": "2020-03-28T02:17:17Z", "type": "commit"}, {"oid": "99c099947d226b53c44fc47b63a19f0018ccc152", "url": "https://github.com/apache/dolphinscheduler/commit/99c099947d226b53c44fc47b63a19f0018ccc152", "message": "Merge remote-tracking branch 'upstream/dev' into merge4", "committedDate": "2020-04-09T12:05:57Z", "type": "commit"}, {"oid": "17199ee98f0cc4fdd0f962239f0287094f5b5c03", "url": "https://github.com/apache/dolphinscheduler/commit/17199ee98f0cc4fdd0f962239f0287094f5b5c03", "message": "prevent repeated database updates", "committedDate": "2020-04-10T03:36:30Z", "type": "commit"}, {"oid": "5b4a93acda89e14534dee19175ae85132a547f8e", "url": "https://github.com/apache/dolphinscheduler/commit/5b4a93acda89e14534dee19175ae85132a547f8e", "message": "prevent repeated database updates", "committedDate": "2020-04-10T03:43:18Z", "type": "commit"}, {"oid": "04f5b331e92ddf39773691e46ea4e8625a7f7565", "url": "https://github.com/apache/dolphinscheduler/commit/04f5b331e92ddf39773691e46ea4e8625a7f7565", "message": "Merge remote-tracking branch 'upstream/dev' into merge4", "committedDate": "2020-04-10T05:19:44Z", "type": "commit"}, {"oid": "b9eb134d6829159ccfe9d973017336cb78ebfd7a", "url": "https://github.com/apache/dolphinscheduler/commit/b9eb134d6829159ccfe9d973017336cb78ebfd7a", "message": "prevent repeated database updates", "committedDate": "2020-04-10T05:27:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc5Mzc3Ng==", "url": "https://github.com/apache/dolphinscheduler/pull/2396#discussion_r406793776", "bodyText": "method name called updateProcessInstanceState maybe better\uff1f because changed the database state\uff0chow do you think ?", "author": "dailidong", "createdAt": "2020-04-10T14:54:11Z", "path": "dolphinscheduler-api/src/main/java/org/apache/dolphinscheduler/api/service/ExecutorService.java", "diffHunk": "@@ -308,22 +302,27 @@ private boolean checkTenantSuitable(ProcessDefinition processDefinition) {\n     }\n \n     /**\n-     * update process instance state\n+     *  prepare to update process instance command type and status\n      *\n-     * @param processInstanceId process instance id\n+     * @param processInstance process instance\n+     * @param commandType command type\n      * @param executionStatus execute status\n      * @return update result\n      */\n-    private Map<String, Object> updateProcessInstanceState(Integer processInstanceId, ExecutionStatus executionStatus) {\n+    private Map<String, Object> updateProcessInstancePrepare(ProcessInstance processInstance, CommandType commandType, ExecutionStatus executionStatus) {", "originalCommit": "b9eb134d6829159ccfe9d973017336cb78ebfd7a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE0NjkxNw==", "url": "https://github.com/apache/dolphinscheduler/pull/2396#discussion_r407146917", "bodyText": "OK\uff0ci agree", "author": "songquanhe-gitstudy", "createdAt": "2020-04-12T05:05:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjc5Mzc3Ng=="}], "type": "inlineReview"}, {"oid": "26581544a1000d0c29f9bad076084978ab620a60", "url": "https://github.com/apache/dolphinscheduler/commit/26581544a1000d0c29f9bad076084978ab620a60", "message": "Merge branch 'dev' into merge4", "committedDate": "2020-04-16T10:26:43Z", "type": "commit"}]}