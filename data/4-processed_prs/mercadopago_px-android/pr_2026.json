{"pr_number": 2026, "pr_title": "[enhancement] improve esc availability", "pr_createdAt": "2020-01-24T22:33:33Z", "pr_url": "https://github.com/mercadopago/px-android/pull/2026", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MjU2OA==", "url": "https://github.com/mercadopago/px-android/pull/2026#discussion_r370872568", "bodyText": "Esto se mueve afuera del if ya que hubo casos recientemente donde agregan nuevos posibles errores en la api de tokenizacion y no podiamos handlear bien esos casos por el if con c\u00f3digos hardcodeados", "author": "cgaggino", "createdAt": "2020-01-24T22:36:20Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/TokenizeService.java", "diffHunk": "@@ -62,10 +62,11 @@ public void success(final Token token) {\n \n             @Override\n             public void failure(final ApiException apiException) {\n-                //TODO move to esc manager  / Token repo\n+                //TODO move to esc manager / Token repo\n+                paymentSettingRepository.configure((Token) null);", "originalCommit": "9616b15e161313ad7fcc0b59d0b9bed7f928c255", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3Mjg2MQ==", "url": "https://github.com/mercadopago/px-android/pull/2026#discussion_r370872861", "bodyText": "Idem al anterior, se mueve afuera del if ya que hubo casos recientemente donde agregan nuevos posibles errores en la api de tokenizacion y no podiamos handlear bien esos casos por el if con c\u00f3digos hardcodeados. Podria quedar en un retry infinito. Por lo mismo se borra el flujo de recover de este caso", "author": "cgaggino", "createdAt": "2020-01-24T22:37:18Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/cardvault/CardVaultPresenter.java", "diffHunk": "@@ -271,28 +257,20 @@ public void onSuccess(final Token token) {\n             @Override\n             public void onFailure(final MercadoPagoError error) {\n                 if (error.isApiException() && EscUtil.isInvalidEscForApiException(error.getApiException())) {\n+                    // Just limit the tracking to esc api exception\n                     EscFrictionEventTracker.create(escCardToken.getCardId(), esc, error.getApiException()).track();\n-                    escManagerBehaviour.deleteESCWith(escCardToken.getCardId());\n-                    esc = null;\n-                    //Start CVV screen if fail\n-                    if (isViewAttached()) {\n-                        getView().startSecurityCodeActivity(Reason.SAVED_CARD);\n-                    }\n-                } else {\n-                    //Retry with error screen\n-                    recoverCreateESCToken(error);\n+                }\n+\n+                escManagerBehaviour.deleteESCWith(escCardToken.getCardId());", "originalCommit": "9616b15e161313ad7fcc0b59d0b9bed7f928c255", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ad1832a0451a450f94f8c6aba4328a090fc277cb", "url": "https://github.com/mercadopago/px-android/commit/ad1832a0451a450f94f8c6aba4328a090fc277cb", "message": "* Improved esc availability with minor changes", "committedDate": "2020-01-27T01:28:32Z", "type": "forcePushed"}, {"oid": "9b407f688a7f5bac0e6698491eb572d1168ed5c0", "url": "https://github.com/mercadopago/px-android/commit/9b407f688a7f5bac0e6698491eb572d1168ed5c0", "message": "* Improved esc availability with minor changes", "committedDate": "2020-01-27T02:36:17Z", "type": "commit"}, {"oid": "9b407f688a7f5bac0e6698491eb572d1168ed5c0", "url": "https://github.com/mercadopago/px-android/commit/9b407f688a7f5bac0e6698491eb572d1168ed5c0", "message": "* Improved esc availability with minor changes", "committedDate": "2020-01-27T02:36:17Z", "type": "forcePushed"}, {"oid": "b28ce58ba68631e0e07196e058d01c5365b63f07", "url": "https://github.com/mercadopago/px-android/commit/b28ce58ba68631e0e07196e058d01c5365b63f07", "message": "update esc status, test", "committedDate": "2020-02-05T14:06:19Z", "type": "commit"}, {"oid": "09195e1ad81c71af73ad98b854692d42e1f52c31", "url": "https://github.com/mercadopago/px-android/commit/09195e1ad81c71af73ad98b854692d42e1f52c31", "message": "refactor CustomSearchItem", "committedDate": "2020-02-06T18:26:48Z", "type": "commit"}]}