{"pr_number": 2375, "pr_title": "[Feature] Autoreturn and dynamic congrats buttons from backend", "pr_createdAt": "2020-11-05T23:01:59Z", "pr_url": "https://github.com/mercadopago/px-android/pull/2375", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQyMjc4OQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r518422789", "bodyText": "Ojo", "author": "guchito9", "createdAt": "2020-11-05T23:02:30Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/CongratsRepositoryImpl.kt", "diffHunk": "@@ -54,20 +54,20 @@ class CongratsRepositoryImpl(\n                 }\n             }\n             withContext(Dispatchers.Main) {\n-                handleResult(payment, paymentResult, paymentReward, remediesResponse, paymentSetting.currency, callback)\n+                handleResult(payment, paymentResult, congratsResponse, remediesResponse, paymentSetting.currency, callback)\n             }\n         }\n     }\n \n-    private suspend fun getPaymentReward(payment: IPaymentDescriptor, paymentResult: PaymentResult) =\n+    private suspend fun getCongratsResponse(payment: IPaymentDescriptor, paymentResult: PaymentResult) =\n         try {\n             val joinedPaymentIds = TextUtil.join(payment.paymentIds)\n             val joinedPaymentMethodsIds = paymentResult.paymentDataList\n                 .joinToString(TextUtil.CSV_DELIMITER) { p -> (p.paymentMethod.id) }\n             val campaignId = paymentResult.paymentData.campaign?.run { id } ?: \"\"\n-            congratsService.getCongrats(BuildConfig.API_ENVIRONMENT, privateKey!!,\n+            congratsService.getCongrats(\"alpha\", privateKey!!,", "originalCommit": "b528e4b93f59e9539b4b410cde9b7b6ba0163d77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9884c2d91895178ce047694397d3f0cbb80031f8", "url": "https://github.com/mercadopago/px-android/commit/9884c2d91895178ce047694397d3f0cbb80031f8", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-05T23:10:36Z", "type": "forcePushed"}, {"oid": "718def909a1f29e726feebf5c3bedcbbb387056f", "url": "https://github.com/mercadopago/px-android/commit/718def909a1f29e726feebf5c3bedcbbb387056f", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-06T15:54:00Z", "type": "forcePushed"}, {"oid": "52d1d60787ca77e165bbf3692c4e273e04acedc0", "url": "https://github.com/mercadopago/px-android/commit/52d1d60787ca77e165bbf3692c4e273e04acedc0", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-06T22:24:47Z", "type": "forcePushed"}, {"oid": "d365d54b632b505e2126530733622e753e5b8682", "url": "https://github.com/mercadopago/px-android/commit/d365d54b632b505e2126530733622e753e5b8682", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-09T14:45:00Z", "type": "forcePushed"}, {"oid": "6f469e680249fe2f6e20b44f4630502f7ebbf2fb", "url": "https://github.com/mercadopago/px-android/commit/6f469e680249fe2f6e20b44f4630502f7ebbf2fb", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-09T14:48:09Z", "type": "forcePushed"}, {"oid": "c00dbe6899a139d17053d5c5bfe4063d620963ee", "url": "https://github.com/mercadopago/px-android/commit/c00dbe6899a139d17053d5c5bfe4063d620963ee", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-09T14:49:42Z", "type": "forcePushed"}, {"oid": "18fb3c347c8bf541a9859ee59a0e2faaebe8842d", "url": "https://github.com/mercadopago/px-android/commit/18fb3c347c8bf541a9859ee59a0e2faaebe8842d", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-09T14:53:44Z", "type": "forcePushed"}, {"oid": "5c86b9fed8aabcf484a6f597ab5a267f23039976", "url": "https://github.com/mercadopago/px-android/commit/5c86b9fed8aabcf484a6f597ab5a267f23039976", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-09T14:57:07Z", "type": "forcePushed"}, {"oid": "44f170988c1185b09b3894a07723ea3060f571f6", "url": "https://github.com/mercadopago/px-android/commit/44f170988c1185b09b3894a07723ea3060f571f6", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-09T14:59:44Z", "type": "forcePushed"}, {"oid": "8c46111d03d66d6a6bca68312c14a12995af8302", "url": "https://github.com/mercadopago/px-android/commit/8c46111d03d66d6a6bca68312c14a12995af8302", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-09T18:32:42Z", "type": "forcePushed"}, {"oid": "10c6343af2053c8b5d04368a4a3abf75f9994145", "url": "https://github.com/mercadopago/px-android/commit/10c6343af2053c8b5d04368a4a3abf75f9994145", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-09T18:50:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDczMDY4NA==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520730684", "bodyText": "Esto lo vamos a dejar as\u00ed o lo vamos a revertir? si queda as\u00ed pongamosle un nombre representativo a cada key", "author": "cgaggino", "createdAt": "2020-11-10T17:13:35Z", "path": "example/src/main/java/com/mercadopago/android/px/utils/OneTapSamples.java", "diffHunk": "@@ -177,9 +175,9 @@ public static void addAll(final Collection<Pair<String, MercadoPagoCheckout.Buil\n             .setExpressPaymentEnable(true)\n             .build();\n \n-        return new MercadoPagoCheckout.Builder(ONE_TAP_DIRECT_DISCOUNT_MERCHANT_PUBLIC_KEY, preference,\n+        return new MercadoPagoCheckout.Builder(\"APP_USR-073af6f6-9b85-414f-8bc1-4792a0568a62\", \"506902649-2140324c-55c5-4f0a-a1bb-15666443f215\"/*preference*/,", "originalCommit": "10c6343af2053c8b5d04368a4a3abf75f9994145", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc2NTY2MA==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520765660", "bodyText": "Lo vamos a revertir", "author": "guchito9", "createdAt": "2020-11-10T18:06:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDczMDY4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDczMTY3Ng==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520731676", "bodyText": "A esta altura estoy pensando que podriamos mandar el status detail por par\u00e1metro y que cada ejemplo use el rejected que quiera", "author": "cgaggino", "createdAt": "2020-11-10T17:14:58Z", "path": "example/src/main/java/com/mercadopago/android/px/utils/PaymentUtils.java", "diffHunk": "@@ -36,7 +37,7 @@ public static IParcelablePaymentDescriptor getGenericPaymentApproved() {\n     public static IParcelablePaymentDescriptor getGenericPaymentRejected() {\n         return GenericPaymentDescriptor.with(new GenericPayment.Builder(\n             Payment.StatusCodes.STATUS_REJECTED,\n-            Payment.StatusDetail.STATUS_DETAIL_CC_REJECTED_HIGH_RISK\n+            Payment.StatusDetail.STATUS_DETAIL_CC_REJECTED_CARD_DISABLED", "originalCommit": "10c6343af2053c8b5d04368a4a3abf75f9994145", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc2NTk1OA==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520765958", "bodyText": "Es buena esa", "author": "guchito9", "createdAt": "2020-11-10T18:06:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDczMTY3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDczMjk3OQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520732979", "bodyText": "Es un feature que no se tiene en cuenta para pref abierta, verdad?", "author": "cgaggino", "createdAt": "2020-11-10T17:16:50Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/CongratsRepositoryImpl.kt", "diffHunk": "@@ -54,20 +54,20 @@ class CongratsRepositoryImpl(\n                 }\n             }\n             withContext(Dispatchers.Main) {\n-                handleResult(payment, paymentResult, paymentReward, remediesResponse, paymentSetting.currency, callback)\n+                handleResult(payment, paymentResult, congratsResponse, remediesResponse, paymentSetting.currency, callback)\n             }\n         }\n     }\n \n-    private suspend fun getPaymentReward(payment: IPaymentDescriptor, paymentResult: PaymentResult) =\n+    private suspend fun getCongratsResponse(payment: IPaymentDescriptor, paymentResult: PaymentResult) =\n         try {\n             val joinedPaymentIds = TextUtil.join(payment.paymentIds)\n             val joinedPaymentMethodsIds = paymentResult.paymentDataList\n                 .joinToString(TextUtil.CSV_DELIMITER) { p -> (p.paymentMethod.id) }\n             val campaignId = paymentResult.paymentData.campaign?.run { id } ?: \"\"\n-            congratsService.getCongrats(BuildConfig.API_ENVIRONMENT, privateKey!!,\n+            congratsService.getCongrats(\"alpha\", privateKey!!,\n                 joinedPaymentIds, platform, campaignId, payerComplianceRepository.turnedIFPECompliant(),\n-                joinedPaymentMethodsIds, trackingRepository.flowId)\n+                joinedPaymentMethodsIds, trackingRepository.flowId, paymentSetting.checkoutPreference?.id)", "originalCommit": "10c6343af2053c8b5d04368a4a3abf75f9994145", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc2NjEyNA==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520766124", "bodyText": "As\u00ed es", "author": "guchito9", "createdAt": "2020-11-10T18:07:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDczMjk3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDczMzQwNg==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520733406", "bodyText": "Excelente estos contratos :D", "author": "cgaggino", "createdAt": "2020-11-10T17:17:29Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/extensions/BaseExtensions.kt", "diffHunk": "@@ -3,8 +3,26 @@ package com.mercadopago.android.px.internal.extensions\n import android.app.Activity\n import android.graphics.Rect\n import androidx.fragment.app.Fragment\n+import kotlin.contracts.ExperimentalContracts\n+import kotlin.contracts.contract\n \n-internal fun CharSequence?.isNotNullNorEmpty() = !isNullOrEmpty()\n+@UseExperimental(ExperimentalContracts::class)", "originalCommit": "10c6343af2053c8b5d04368a4a3abf75f9994145", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc2Njc5Ng==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520766796", "bodyText": ":D", "author": "guchito9", "createdAt": "2020-11-10T18:08:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDczMzQwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc0NDUxOQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520744519", "bodyText": "El getter esta declarado como nullable, o lo contemplamos ac\u00e1 como tal o cambiar\u00eda el getter a boolean primitivo o non-null", "author": "cgaggino", "createdAt": "2020-11-10T17:33:42Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultMapper.kt", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.mercadopago.android.px.internal.features.business_result\n+\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.CongratsViewModelMapper\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsModel\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsModel.CongratsType\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsResponse\n+import com.mercadopago.android.px.internal.features.payment_result.CongratsAutoReturn\n+import com.mercadopago.android.px.internal.features.payment_result.presentation.PaymentResultButton\n+import com.mercadopago.android.px.internal.features.payment_result.presentation.PaymentResultFooter\n+import com.mercadopago.android.px.internal.view.PaymentResultBody\n+import com.mercadopago.android.px.internal.view.PaymentResultHeader\n+import com.mercadopago.android.px.internal.view.PaymentResultMethod\n+import com.mercadopago.android.px.internal.viewmodel.GenericLocalized\n+import com.mercadopago.android.px.internal.viewmodel.PaymentResultType\n+import com.mercadopago.android.px.internal.viewmodel.mappers.Mapper\n+import java.util.*\n+\n+internal class BusinessPaymentResultMapper : Mapper<PaymentCongratsModel, BusinessPaymentResultViewModel>() {\n+\n+    override fun map(model: PaymentCongratsModel): BusinessPaymentResultViewModel {\n+        return BusinessPaymentResultViewModel(\n+            getHeaderModel(model),\n+            getBodyModel(model),\n+            getFooterModel(model),\n+            getAutoReturnModel(model.paymentCongratsResponse?.autoReturn)\n+        )\n+    }\n+\n+    private fun getBodyModel(model: PaymentCongratsModel): PaymentResultBody.Model {\n+        val methodModels: MutableList<PaymentResultMethod.Model> = ArrayList()\n+        if (model.shouldShowPaymentMethod!!) {", "originalCommit": "10c6343af2053c8b5d04368a4a3abf75f9994145", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc2OTExNQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520769115", "bodyText": "Lo contemplo", "author": "guchito9", "createdAt": "2020-11-10T18:12:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc0NDUxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc0OTkxOQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520749919", "bodyText": "Podemos meter un with builder o algo asi, creo que podria quedar mas verbose", "author": "cgaggino", "createdAt": "2020-11-10T17:41:49Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultMapper.kt", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.mercadopago.android.px.internal.features.business_result\n+\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.CongratsViewModelMapper\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsModel\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsModel.CongratsType\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsResponse\n+import com.mercadopago.android.px.internal.features.payment_result.CongratsAutoReturn\n+import com.mercadopago.android.px.internal.features.payment_result.presentation.PaymentResultButton\n+import com.mercadopago.android.px.internal.features.payment_result.presentation.PaymentResultFooter\n+import com.mercadopago.android.px.internal.view.PaymentResultBody\n+import com.mercadopago.android.px.internal.view.PaymentResultHeader\n+import com.mercadopago.android.px.internal.view.PaymentResultMethod\n+import com.mercadopago.android.px.internal.viewmodel.GenericLocalized\n+import com.mercadopago.android.px.internal.viewmodel.PaymentResultType\n+import com.mercadopago.android.px.internal.viewmodel.mappers.Mapper\n+import java.util.*\n+\n+internal class BusinessPaymentResultMapper : Mapper<PaymentCongratsModel, BusinessPaymentResultViewModel>() {\n+\n+    override fun map(model: PaymentCongratsModel): BusinessPaymentResultViewModel {\n+        return BusinessPaymentResultViewModel(\n+            getHeaderModel(model),\n+            getBodyModel(model),\n+            getFooterModel(model),\n+            getAutoReturnModel(model.paymentCongratsResponse?.autoReturn)\n+        )\n+    }\n+\n+    private fun getBodyModel(model: PaymentCongratsModel): PaymentResultBody.Model {\n+        val methodModels: MutableList<PaymentResultMethod.Model> = ArrayList()\n+        if (model.shouldShowPaymentMethod!!) {\n+            for (paymentInfo in model.paymentsInfo) {\n+                methodModels.add(PaymentResultMethod.Model.with(paymentInfo,\n+                    model.statementDescription))\n+            }\n+        }\n+        val type = model.congratsType\n+        return PaymentResultBody.Model.Builder()\n+            .setMethodModels(methodModels)\n+            .apply { model.paymentCongratsResponse?.let {\n+                setCongratsViewModel(CongratsViewModelMapper(BusinessPaymentResultTracker()).map(it))\n+            }}\n+            .apply {\n+                if (type == CongratsType.APPROVED && model.shouldShowReceipt == true) setReceiptId(model.paymentId.toString())\n+            }\n+            .setHelp(model.help)\n+            .setStatement(model.statementDescription)\n+            .setTopFragment(model.topFragment)\n+            .setBottomFragment(model.bottomFragment)\n+            .setImportantFragment(model.importantFragment)\n+            .build()\n+    }\n+\n+    private fun getHeaderModel(model: PaymentCongratsModel): PaymentResultHeader.Model {\n+        val builder = PaymentResultHeader.Model.Builder()\n+        builder.setIconImage(if (model.iconId == 0) R.drawable.px_icon_product else model.iconId)\n+        builder.setIconUrl(model.imageUrl)\n+        val type = PaymentResultType.from(model.congratsType)\n+        return builder", "originalCommit": "10c6343af2053c8b5d04368a4a3abf75f9994145", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc3MjIwNg==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520772206", "bodyText": "Qued\u00f3 horrible ese m\u00e9todo, ahora lo reajusto", "author": "guchito9", "createdAt": "2020-11-10T18:17:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc0OTkxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1NzA0Mw==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520757043", "bodyText": "Esto me sigue sin convencer, por que mapPaymentModel hace tantas cosas no relacionadas al mapeo?", "author": "cgaggino", "createdAt": "2020-11-10T17:52:41Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultPresenter.java", "diffHunk": "@@ -78,35 +76,44 @@ public void onAbort() {\n         getView().processCustomExit();\n     }\n \n-    @Override\n-    public void dispatch(final Action action) {\n-        if (action instanceof ExitAction) {\n-            if (action instanceof PrimaryExitAction) {\n-                new PrimaryActionEvent(viewTracker).track();\n-            } else if (action instanceof SecondaryExitAction) {\n-                new SecondaryActionEvent(viewTracker).track();\n-            }\n-            getView().processCustomExit((ExitAction) action);\n-        } else {\n-            throw new UnsupportedOperationException(\"this Action class can't be executed in this screen\");\n-        }\n-    }\n-\n     private void mapPaymentModel() {\n         final BusinessPaymentResultViewModel viewModel = new BusinessPaymentResultMapper().map(model);\n-        getView().configureViews(viewModel, this);\n-        getView().setStatusBarColor(viewModel.headerModel.getBackgroundColor());\n-        initAutoReturn(viewModel.shouldAutoReturn);\n+        getView().configureViews(viewModel, this, new PaymentResultFooter.Listener() {", "originalCommit": "10c6343af2053c8b5d04368a4a3abf75f9994145", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc2ODQyOQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520768429", "bodyText": "Reviso el flujo como viene y lo cambio. Tiene pinta igual de que un cambio de nombre alcanzar\u00eda", "author": "guchito9", "createdAt": "2020-11-10T18:11:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1NzA0Mw=="}], "type": "inlineReview"}, {"oid": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "url": "https://github.com/mercadopago/px-android/commit/35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-10T18:20:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1MzYzMw==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520753633", "bodyText": "Hacer que para business payment result sea siempre visible y que los condicionales de mostrar o no el footer est\u00e9n el generic payment result.", "author": "jorGonzalez291292", "createdAt": "2020-11-10T17:47:27Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultActivity.java", "diffHunk": "@@ -39,6 +42,8 @@ protected boolean shouldHaltSession(@NonNull final Session.State state) {\n     @Override\n     protected void onCreated(@Nullable final Bundle savedInstanceState) {\n         setContentView(R.layout.px_activity_payment_result);\n+        footer = findViewById(R.id.footer);\n+        footer.setVisibility(View.VISIBLE);", "originalCommit": "10c6343af2053c8b5d04368a4a3abf75f9994145", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDc1ODA2OQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r520758069", "bodyText": "Ac\u00e1 no pod\u00edamos user el apply como el caso de arriba para no declarar una val builder?", "author": "jorGonzalez291292", "createdAt": "2020-11-10T17:54:17Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultMapper.kt", "diffHunk": "@@ -0,0 +1,84 @@\n+package com.mercadopago.android.px.internal.features.business_result\n+\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.CongratsViewModelMapper\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsModel\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsModel.CongratsType\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsResponse\n+import com.mercadopago.android.px.internal.features.payment_result.CongratsAutoReturn\n+import com.mercadopago.android.px.internal.features.payment_result.presentation.PaymentResultButton\n+import com.mercadopago.android.px.internal.features.payment_result.presentation.PaymentResultFooter\n+import com.mercadopago.android.px.internal.view.PaymentResultBody\n+import com.mercadopago.android.px.internal.view.PaymentResultHeader\n+import com.mercadopago.android.px.internal.view.PaymentResultMethod\n+import com.mercadopago.android.px.internal.viewmodel.GenericLocalized\n+import com.mercadopago.android.px.internal.viewmodel.PaymentResultType\n+import com.mercadopago.android.px.internal.viewmodel.mappers.Mapper\n+import java.util.*\n+\n+internal class BusinessPaymentResultMapper : Mapper<PaymentCongratsModel, BusinessPaymentResultViewModel>() {\n+\n+    override fun map(model: PaymentCongratsModel): BusinessPaymentResultViewModel {\n+        return BusinessPaymentResultViewModel(\n+            getHeaderModel(model),\n+            getBodyModel(model),\n+            getFooterModel(model),\n+            getAutoReturnModel(model.paymentCongratsResponse?.autoReturn)\n+        )\n+    }\n+\n+    private fun getBodyModel(model: PaymentCongratsModel): PaymentResultBody.Model {\n+        val methodModels: MutableList<PaymentResultMethod.Model> = ArrayList()\n+        if (model.shouldShowPaymentMethod!!) {\n+            for (paymentInfo in model.paymentsInfo) {\n+                methodModels.add(PaymentResultMethod.Model.with(paymentInfo,\n+                    model.statementDescription))\n+            }\n+        }\n+        val type = model.congratsType\n+        return PaymentResultBody.Model.Builder()\n+            .setMethodModels(methodModels)\n+            .apply { model.paymentCongratsResponse?.let {\n+                setCongratsViewModel(CongratsViewModelMapper(BusinessPaymentResultTracker()).map(it))\n+            }}\n+            .apply {\n+                if (type == CongratsType.APPROVED && model.shouldShowReceipt == true) setReceiptId(model.paymentId.toString())\n+            }\n+            .setHelp(model.help)\n+            .setStatement(model.statementDescription)\n+            .setTopFragment(model.topFragment)\n+            .setBottomFragment(model.bottomFragment)\n+            .setImportantFragment(model.importantFragment)\n+            .build()\n+    }\n+\n+    private fun getHeaderModel(model: PaymentCongratsModel): PaymentResultHeader.Model {\n+        val builder = PaymentResultHeader.Model.Builder()\n+        builder.setIconImage(if (model.iconId == 0) R.drawable.px_icon_product else model.iconId)\n+        builder.setIconUrl(model.imageUrl)\n+        val type = PaymentResultType.from(model.congratsType)", "originalCommit": "10c6343af2053c8b5d04368a4a3abf75f9994145", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTI5NjE5Ng==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r521296196", "bodyText": "Esto cap\u00e1z podr\u00edas cambiarlo por:\nCongratsAutoReturn.Model().takeif { \n    RedirectHelper.shouldAutoReturn(autoReturnFromPreference, paymentStatus) \n}", "author": "jorGonzalez291292", "createdAt": "2020-11-11T11:34:06Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_result/mappers/CongratsAutoReturnMapper.kt", "diffHunk": "@@ -0,0 +1,22 @@\n+package com.mercadopago.android.px.internal.features.payment_result.mappers\n+\n+import com.mercadopago.android.px.internal.features.dummy_result.RedirectHelper\n+import com.mercadopago.android.px.internal.features.payment_result.CongratsAutoReturn\n+import com.mercadopago.android.px.internal.viewmodel.mappers.Mapper\n+import com.mercadopago.android.px.model.internal.CongratsResponse\n+\n+internal class CongratsAutoReturnMapper(private val autoReturnFromPreference: String?, private val paymentStatus: String)\n+    : Mapper<CongratsResponse.AutoReturn?, CongratsAutoReturn.Model?>() {\n+\n+    override fun map(autoReturn: CongratsResponse.AutoReturn?): CongratsAutoReturn.Model? {\n+        return autoReturn?.let {\n+            CongratsAutoReturn.Model(it.label, it.seconds)\n+        } ?: run {", "originalCommit": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwMDkwMA==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r521300900", "bodyText": "Empezar\u00eda a usar las extensions View.visible() y View.gone()", "author": "jorGonzalez291292", "createdAt": "2020-11-11T11:43:41Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_result/presentation/PaymentResultFooter.kt", "diffHunk": "@@ -0,0 +1,104 @@\n+package com.mercadopago.android.px.internal.features.payment_result.presentation\n+\n+import android.content.Context\n+import android.os.Parcelable\n+import android.util.AttributeSet\n+import android.view.View\n+import android.widget.LinearLayout\n+import android.widget.TextView\n+import com.mercadolibre.android.andesui.button.AndesButton\n+import com.mercadolibre.android.andesui.button.hierarchy.AndesButtonHierarchy\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.extensions.isNotNull\n+import com.mercadopago.android.px.internal.extensions.isNotNullNorEmpty\n+import com.mercadopago.android.px.model.ExitAction\n+import kotlinx.android.parcel.Parcelize\n+\n+internal class PaymentResultFooter(context: Context, attrs: AttributeSet?, defStyleAttr: Int) :\n+    LinearLayout(context, attrs, defStyleAttr) {\n+\n+    init {\n+        configureView(context)\n+    }\n+\n+    constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, 0)\n+    constructor(context: Context) : this(context, null)\n+\n+    private lateinit var primaryButton: AndesButton\n+    private lateinit var secondaryButton: AndesButton\n+    private lateinit var payButtonContainer: View\n+    private lateinit var autoReturn: View\n+    private lateinit var autoReturnLabel: TextView\n+    private lateinit var separator: View\n+\n+    private fun configureView(context: Context) {\n+        orientation = VERTICAL\n+        inflate(context, R.layout.px_payment_result_footer, this)\n+        primaryButton = findViewById(R.id.primary_button)\n+        secondaryButton = findViewById(R.id.secondary_button)\n+        payButtonContainer = findViewById(R.id.pay_button)\n+        autoReturn = findViewById(R.id.auto_return)\n+        autoReturnLabel = autoReturn.findViewById(R.id.label)\n+        separator = findViewById(R.id.separator)\n+    }\n+\n+    fun init(model: Model, listener: Listener) {\n+        applyButtonConfig(primaryButton, model.primaryButton, listener)\n+        applyButtonConfig(secondaryButton, model.secondaryButton, listener)\n+        payButtonContainer.visibility = if (model.showPayButton) View.VISIBLE else View.GONE\n+        if (model.primaryButton == null && model.secondaryButton.isNotNull() &&\n+            model.secondaryButton.type == PaymentResultButton.Type.TRANSPARENT) {\n+            separator.visibility = VISIBLE", "originalCommit": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwMjEwNg==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r521302106", "bodyText": "idem en todos los lugares que cambiamos la visibilidad :P", "author": "jorGonzalez291292", "createdAt": "2020-11-11T11:45:59Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_result/presentation/PaymentResultFooter.kt", "diffHunk": "@@ -0,0 +1,104 @@\n+package com.mercadopago.android.px.internal.features.payment_result.presentation\n+\n+import android.content.Context\n+import android.os.Parcelable\n+import android.util.AttributeSet\n+import android.view.View\n+import android.widget.LinearLayout\n+import android.widget.TextView\n+import com.mercadolibre.android.andesui.button.AndesButton\n+import com.mercadolibre.android.andesui.button.hierarchy.AndesButtonHierarchy\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.extensions.isNotNull\n+import com.mercadopago.android.px.internal.extensions.isNotNullNorEmpty\n+import com.mercadopago.android.px.model.ExitAction\n+import kotlinx.android.parcel.Parcelize\n+\n+internal class PaymentResultFooter(context: Context, attrs: AttributeSet?, defStyleAttr: Int) :\n+    LinearLayout(context, attrs, defStyleAttr) {\n+\n+    init {\n+        configureView(context)\n+    }\n+\n+    constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, 0)\n+    constructor(context: Context) : this(context, null)\n+\n+    private lateinit var primaryButton: AndesButton\n+    private lateinit var secondaryButton: AndesButton\n+    private lateinit var payButtonContainer: View\n+    private lateinit var autoReturn: View\n+    private lateinit var autoReturnLabel: TextView\n+    private lateinit var separator: View\n+\n+    private fun configureView(context: Context) {\n+        orientation = VERTICAL\n+        inflate(context, R.layout.px_payment_result_footer, this)\n+        primaryButton = findViewById(R.id.primary_button)\n+        secondaryButton = findViewById(R.id.secondary_button)\n+        payButtonContainer = findViewById(R.id.pay_button)\n+        autoReturn = findViewById(R.id.auto_return)\n+        autoReturnLabel = autoReturn.findViewById(R.id.label)\n+        separator = findViewById(R.id.separator)\n+    }\n+\n+    fun init(model: Model, listener: Listener) {\n+        applyButtonConfig(primaryButton, model.primaryButton, listener)\n+        applyButtonConfig(secondaryButton, model.secondaryButton, listener)\n+        payButtonContainer.visibility = if (model.showPayButton) View.VISIBLE else View.GONE\n+        if (model.primaryButton == null && model.secondaryButton.isNotNull() &&\n+            model.secondaryButton.type == PaymentResultButton.Type.TRANSPARENT) {\n+            separator.visibility = VISIBLE\n+        } else {\n+            separator.visibility = GONE\n+        }\n+    }\n+\n+    fun showAutoReturn() {\n+        autoReturn.visibility = VISIBLE\n+    }\n+\n+    fun updateAutoReturnLabel(label: String) {\n+        autoReturnLabel.text = label\n+    }\n+\n+    fun hideSecondaryButton() {\n+        secondaryButton.visibility = View.GONE\n+    }\n+\n+    fun showSecondaryButton() {\n+        secondaryButton.visibility = View.VISIBLE", "originalCommit": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwMjQ4NQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r521302485", "bodyText": "deber\u00eda ser internal?", "author": "jorGonzalez291292", "createdAt": "2020-11-11T11:46:45Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_result/presentation/PaymentResultFooter.kt", "diffHunk": "@@ -0,0 +1,104 @@\n+package com.mercadopago.android.px.internal.features.payment_result.presentation\n+\n+import android.content.Context\n+import android.os.Parcelable\n+import android.util.AttributeSet\n+import android.view.View\n+import android.widget.LinearLayout\n+import android.widget.TextView\n+import com.mercadolibre.android.andesui.button.AndesButton\n+import com.mercadolibre.android.andesui.button.hierarchy.AndesButtonHierarchy\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.extensions.isNotNull\n+import com.mercadopago.android.px.internal.extensions.isNotNullNorEmpty\n+import com.mercadopago.android.px.model.ExitAction\n+import kotlinx.android.parcel.Parcelize\n+\n+internal class PaymentResultFooter(context: Context, attrs: AttributeSet?, defStyleAttr: Int) :\n+    LinearLayout(context, attrs, defStyleAttr) {\n+\n+    init {\n+        configureView(context)\n+    }\n+\n+    constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, 0)\n+    constructor(context: Context) : this(context, null)\n+\n+    private lateinit var primaryButton: AndesButton\n+    private lateinit var secondaryButton: AndesButton\n+    private lateinit var payButtonContainer: View\n+    private lateinit var autoReturn: View\n+    private lateinit var autoReturnLabel: TextView\n+    private lateinit var separator: View\n+\n+    private fun configureView(context: Context) {\n+        orientation = VERTICAL\n+        inflate(context, R.layout.px_payment_result_footer, this)\n+        primaryButton = findViewById(R.id.primary_button)\n+        secondaryButton = findViewById(R.id.secondary_button)\n+        payButtonContainer = findViewById(R.id.pay_button)\n+        autoReturn = findViewById(R.id.auto_return)\n+        autoReturnLabel = autoReturn.findViewById(R.id.label)\n+        separator = findViewById(R.id.separator)\n+    }\n+\n+    fun init(model: Model, listener: Listener) {\n+        applyButtonConfig(primaryButton, model.primaryButton, listener)\n+        applyButtonConfig(secondaryButton, model.secondaryButton, listener)\n+        payButtonContainer.visibility = if (model.showPayButton) View.VISIBLE else View.GONE\n+        if (model.primaryButton == null && model.secondaryButton.isNotNull() &&\n+            model.secondaryButton.type == PaymentResultButton.Type.TRANSPARENT) {\n+            separator.visibility = VISIBLE\n+        } else {\n+            separator.visibility = GONE\n+        }\n+    }\n+\n+    fun showAutoReturn() {\n+        autoReturn.visibility = VISIBLE\n+    }\n+\n+    fun updateAutoReturnLabel(label: String) {\n+        autoReturnLabel.text = label\n+    }\n+\n+    fun hideSecondaryButton() {\n+        secondaryButton.visibility = View.GONE\n+    }\n+\n+    fun showSecondaryButton() {\n+        secondaryButton.visibility = View.VISIBLE\n+    }\n+\n+    private fun applyButtonConfig(button: AndesButton, model: PaymentResultButton?, listener: Listener) {\n+        with(button) {\n+            model?.let { model ->\n+                visibility = View.VISIBLE\n+                text = model.label.get(context).toString()\n+                hierarchy = AndesButtonHierarchy.fromString(model.type.name)\n+                setOnClickListener {\n+                    when {\n+                        model.exitAction.isNotNull() -> listener.onClick(model.exitAction)\n+                        model.target.isNotNullNorEmpty() -> listener.onClick(model.target)\n+                        model.action.isNotNull() -> listener.onClick(model.action)\n+                    }\n+                }\n+            } ?: run {\n+                visibility = View.GONE\n+            }\n+        }\n+    }\n+\n+    interface Listener {", "originalCommit": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE3NTIxOQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r522175219", "bodyText": "Ya es internal la clase padre, por lo que es internal entonces :P", "author": "guchito9", "createdAt": "2020-11-12T15:05:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwMjQ4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwMzQ4Ng==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r521303486", "bodyText": "Pens\u00e9 que serv\u00eda solo para los data class", "author": "jorGonzalez291292", "createdAt": "2020-11-11T11:48:45Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/viewmodel/LazyString.kt", "diffHunk": "@@ -1,19 +1,15 @@\n package com.mercadopago.android.px.internal.viewmodel\n \n import android.content.Context\n-import android.os.Parcel\n+import android.os.Parcelable\n import com.mercadopago.android.px.internal.extensions.orIfEmpty\n-import com.mercadopago.android.px.internal.util.KParcelable\n import com.mercadopago.android.px.internal.util.TextUtil\n-import com.mercadopago.android.px.internal.util.parcelableCreator\n+import kotlinx.android.parcel.Parcelize\n \n-internal class LazyString(private val text: CharSequence?, private val resId: Int?, private vararg val args: String) : KParcelable {\n+@Parcelize", "originalCommit": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE2MTI3OA==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r522161278", "bodyText": "Parece que no (?)", "author": "guchito9", "createdAt": "2020-11-12T14:47:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwMzQ4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwNDYyMQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r521304621", "bodyText": "Esto puede ser internal?", "author": "jorGonzalez291292", "createdAt": "2020-11-11T11:51:02Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/viewmodel/mappers/CacheableMapper.kt", "diffHunk": "@@ -0,0 +1,28 @@\n+package com.mercadopago.android.px.internal.viewmodel.mappers\n+\n+abstract class CacheableMapper<T, V, K> : Mapper<T, V>() {", "originalCommit": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwNTgzNA==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r521305834", "bodyText": "Puede ser internal?", "author": "jorGonzalez291292", "createdAt": "2020-11-11T11:53:32Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/viewmodel/mappers/Mapper.kt", "diffHunk": "@@ -0,0 +1,14 @@\n+package com.mercadopago.android.px.internal.viewmodel.mappers\n+\n+abstract class Mapper<T, V> {", "originalCommit": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMwNjc3Nw==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r521306777", "bodyText": "idem que el anterior", "author": "jorGonzalez291292", "createdAt": "2020-11-11T11:55:19Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/viewmodel/mappers/NonNullMapper.kt", "diffHunk": "@@ -0,0 +1,18 @@\n+package com.mercadopago.android.px.internal.viewmodel.mappers\n+\n+import com.mercadopago.android.px.internal.extensions.isNotNull\n+import java.util.*\n+\n+abstract class NonNullMapper<T, V> : Mapper<T, V>() {", "originalCommit": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTYyMzU3OQ==", "url": "https://github.com/mercadopago/px-android/pull/2375#discussion_r521623579", "bodyText": "podemos declararlo fuera del when y reutilizarlo en vez de declararlo dos veces? si vale la pena", "author": "cgaggino", "createdAt": "2020-11-11T20:36:51Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_result/mappers/PaymentResultFooterModelMapper.kt", "diffHunk": "@@ -1,22 +1,51 @@\n package com.mercadopago.android.px.internal.features.payment_result.mappers\n \n import com.mercadopago.android.px.R\n-import com.mercadopago.android.px.internal.features.payment_result.remedies.RemedyButton\n-import com.mercadopago.android.px.internal.features.payment_result.remedies.view.PaymentResultFooter\n+import com.mercadopago.android.px.internal.extensions.isNotNull\n+import com.mercadopago.android.px.internal.features.payment_result.presentation.PaymentResultButton\n+import com.mercadopago.android.px.internal.features.payment_result.presentation.PaymentResultFooter\n import com.mercadopago.android.px.internal.viewmodel.LazyString\n+import com.mercadopago.android.px.internal.viewmodel.PaymentModel\n import com.mercadopago.android.px.internal.viewmodel.mappers.Mapper\n-import com.mercadopago.android.px.model.internal.remedies.RemediesResponse\n+import com.mercadopago.android.px.internal.viewmodel.mappers.PaymentResultButtonMapper\n+import com.mercadopago.android.px.model.internal.CongratsResponse\n \n-internal object PaymentResultFooterModelMapper : Mapper<RemediesResponse, PaymentResultFooter.Model>() {\n-    override fun map(response: RemediesResponse): PaymentResultFooter.Model {\n+internal object PaymentResultFooterModelMapper : Mapper<PaymentModel, PaymentResultFooter.Model?>() {\n+\n+    override fun map(model: PaymentModel): PaymentResultFooter.Model? {\n+        val remedies = model.remedies\n+        val congrats = model.congratsResponse\n         return when {\n-            response.suggestedPaymentMethod != null || response.cvv != null -> PaymentResultFooter.Model(null,\n-                RemedyButton(LazyString(R.string.px_change_payment), RemedyButton.Action.CHANGE_PM))\n-            response.highRisk != null -> PaymentResultFooter.Model(\n-                RemedyButton(LazyString(response.highRisk!!.actionLoud.label), RemedyButton.Action.KYC),\n-                RemedyButton(LazyString(R.string.px_change_payment), RemedyButton.Action.CHANGE_PM), false\n+            remedies.suggestedPaymentMethod.isNotNull() || remedies.cvv.isNotNull() -> PaymentResultFooter.Model(\n+                null,\n+                PaymentResultButton(\n+                    PaymentResultButton.Type.QUIET,\n+                    LazyString(R.string.px_change_payment),\n+                    PaymentResultButton.Action.CHANGE_PM\n+                ),\n+                showPayButton = true\n+            )\n+            remedies.highRisk.isNotNull() -> PaymentResultFooter.Model(\n+                PaymentResultButton(\n+                    PaymentResultButton.Type.LOUD,\n+                    LazyString(remedies.highRisk!!.actionLoud.label),\n+                    PaymentResultButton.Action.KYC\n+                ),\n+                PaymentResultButton(", "originalCommit": "35fb91d8f9da80f2c6a9bc0affdae5793a1d98eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b3af27923c3ad09df4a0f7b16c2fefdea2e432f4", "url": "https://github.com/mercadopago/px-android/commit/b3af27923c3ad09df4a0f7b16c2fefdea2e432f4", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-12T14:41:26Z", "type": "forcePushed"}, {"oid": "082123a2841c0ed53abd29bb4fad3138cc71a516", "url": "https://github.com/mercadopago/px-android/commit/082123a2841c0ed53abd29bb4fad3138cc71a516", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-12T14:59:24Z", "type": "forcePushed"}, {"oid": "10a9580d2be11f341f57ac1cb4fc5adfaae5bb1d", "url": "https://github.com/mercadopago/px-android/commit/10a9580d2be11f341f57ac1cb4fc5adfaae5bb1d", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-12T15:09:44Z", "type": "forcePushed"}, {"oid": "31b97be4910475211d3802c03c5ebb85df9e515a", "url": "https://github.com/mercadopago/px-android/commit/31b97be4910475211d3802c03c5ebb85df9e515a", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-12T15:14:15Z", "type": "forcePushed"}, {"oid": "920640c83707d52ca2e62386cd13e3ddd77f431b", "url": "https://github.com/mercadopago/px-android/commit/920640c83707d52ca2e62386cd13e3ddd77f431b", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-12T15:41:34Z", "type": "commit"}, {"oid": "920640c83707d52ca2e62386cd13e3ddd77f431b", "url": "https://github.com/mercadopago/px-android/commit/920640c83707d52ca2e62386cd13e3ddd77f431b", "message": "Autoreturn and dynamic congrats buttons from backend", "committedDate": "2020-11-12T15:41:34Z", "type": "forcePushed"}]}