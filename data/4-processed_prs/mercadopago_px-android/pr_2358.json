{"pr_number": 2358, "pr_title": "[Fix] Front location cvv on one tap and security code fragments", "pr_createdAt": "2020-10-16T21:33:06Z", "pr_url": "https://github.com/mercadopago/px-android/pull/2358", "timeline": [{"oid": "f29e06e9092041516589f35e9a84e81a90b6d689", "url": "https://github.com/mercadopago/px-android/commit/f29e06e9092041516589f35e9a84e81a90b6d689", "message": "Fix front location cvv on one tap and security code fragments", "committedDate": "2020-10-19T15:14:23Z", "type": "forcePushed"}, {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb", "url": "https://github.com/mercadopago/px-android/commit/81b760e33d4e64892586f65b98b524d5ce0261eb", "message": "Fix front location cvv on one tap and security code fragments", "committedDate": "2020-10-19T15:18:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1MjM1OQ==", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507852359", "bodyText": "Con el is no te lo casteo? es por el <*>?", "author": "jorGonzalez291292", "createdAt": "2020-10-19T15:37:25Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/BaseFragment.kt", "diffHunk": "@@ -18,4 +18,10 @@ abstract class BaseFragment : Fragment() {\n         super.onDetach()\n         fragmentCommunicationViewModel = null\n     }\n+\n+    protected fun forceDoBackPressed() {\n+        if (context is PXActivity<*>) {\n+            (context as PXActivity<*>).forceDoBackPressed()", "originalCommit": "81b760e33d4e64892586f65b98b524d5ce0261eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5NjYzMw==", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507896633", "bodyText": "Por algo de context en si, no s\u00e9 si es una variable p\u00fablica o que", "author": "guchito9", "createdAt": "2020-10-19T16:39:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1MjM1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1NTk0MA==", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507855940", "bodyText": "Porque siempre es true? No deber\u00edamos devolver payButtonFragment.isExploding()?", "author": "jorGonzalez291292", "createdAt": "2020-10-19T15:42:13Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/security_code/SecurityCodeFragment.kt", "diffHunk": "@@ -273,10 +256,16 @@ internal class SecurityCodeFragment : BaseFragment(), PayButton.Handler, BackHan\n \n     override fun onCvvRequested() = PayButton.CvvRequestedModel(fragmentContainer, renderMode)\n \n-    override fun handleBack() = payButtonFragment.isExploding().also { isExploding ->\n-        if (!isExploding) {\n+    override fun handleBack(): Boolean {\n+        if (backEnabled && !payButtonFragment.isExploding()) {\n             securityCodeViewModel.onBack()\n+            transition.prepareForExit()\n+            ViewUtils.hideKeyboard(activity)\n+            postDelayed(100) {\n+                forceDoBackPressed()\n+            }\n         }\n+        return true", "originalCommit": "81b760e33d4e64892586f65b98b524d5ce0261eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5NjgxNA==", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507896814", "bodyText": "Ahora se handlea siempre siempre ac\u00e1", "author": "guchito9", "createdAt": "2020-10-19T16:40:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1NTk0MA=="}], "type": "inlineReview"}, {"oid": "aa04d62da1583abf97994f406aa1f0ec52db61cb", "url": "https://github.com/mercadopago/px-android/commit/aa04d62da1583abf97994f406aa1f0ec52db61cb", "message": "Fix front location cvv on one tap and security code fragments", "committedDate": "2020-10-19T16:38:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkxNzI0NQ==", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507917245", "bodyText": "Est\u00e1 perfectamente dise\u00f1ado! solo cambiaria un poco los nombres\nonBackPressed()\nforceBack()\nprivate doBack()\ndoBack tiene toda la logica de lo que es hacer back, onBackPressed ahora ejecuta un doBack en vez de un forceDoBackPressed y por ultimo matamos este ultimo nombre que es bastante confuso", "author": "cgaggino", "createdAt": "2020-10-19T17:12:27Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/PXActivity.java", "diffHunk": "@@ -56,6 +56,10 @@ public void attachBaseContext(@NonNull final Context context) {\n \n     @Override\n     public void onBackPressed() {\n+        forceDoBackPressed();\n+    }\n+\n+    public final void forceDoBackPressed() {", "originalCommit": "aa04d62da1583abf97994f406aa1f0ec52db61cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk0NTY2NA==", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507945664", "bodyText": "Bueno, dale, compro", "author": "guchito9", "createdAt": "2020-10-19T17:50:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkxNzI0NQ=="}], "type": "inlineReview"}, {"oid": "e4cacffb6eae3c62fac25dbd45265c4ec1dceb38", "url": "https://github.com/mercadopago/px-android/commit/e4cacffb6eae3c62fac25dbd45265c4ec1dceb38", "message": "Fix front location cvv on one tap and security code fragments", "committedDate": "2020-10-19T17:59:03Z", "type": "commit"}, {"oid": "e4cacffb6eae3c62fac25dbd45265c4ec1dceb38", "url": "https://github.com/mercadopago/px-android/commit/e4cacffb6eae3c62fac25dbd45265c4ec1dceb38", "message": "Fix front location cvv on one tap and security code fragments", "committedDate": "2020-10-19T17:59:03Z", "type": "forcePushed"}]}