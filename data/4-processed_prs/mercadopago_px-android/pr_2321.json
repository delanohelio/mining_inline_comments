{"pr_number": 2321, "pr_title": "[Feature] Retries and error handling", "pr_createdAt": "2020-09-10T19:12:17Z", "pr_url": "https://github.com/mercadopago/px-android/pull/2321", "timeline": [{"oid": "28c2e4fac90ed596193b7e1ad95a413b79641cb0", "url": "https://github.com/mercadopago/px-android/commit/28c2e4fac90ed596193b7e1ad95a413b79641cb0", "message": "init feature branch", "committedDate": "2020-08-23T14:58:20Z", "type": "commit"}, {"oid": "82cb7b8cd4fb64f9e42d40854d85f880956dbd74", "url": "https://github.com/mercadopago/px-android/commit/82cb7b8cd4fb64f9e42d40854d85f880956dbd74", "message": "security code fragment added", "committedDate": "2020-08-31T11:50:47Z", "type": "commit"}, {"oid": "769960d27b06ddae9581551b4e069398c5284144", "url": "https://github.com/mercadopago/px-android/commit/769960d27b06ddae9581551b4e069398c5284144", "message": "Merge branch 'master' of github.com:mercadopago/px-android into feature/new-cvv-screen", "committedDate": "2020-08-31T11:53:03Z", "type": "commit"}, {"oid": "be68dd58df70ccf5317ebf1bb4786fdf0b6b5d84", "url": "https://github.com/mercadopago/px-android/commit/be68dd58df70ccf5317ebf1bb4786fdf0b6b5d84", "message": "viewmodel created", "committedDate": "2020-09-01T14:41:35Z", "type": "commit"}, {"oid": "3c31e23d507d035c82f47793415037217608fc2e", "url": "https://github.com/mercadopago/px-android/commit/3c31e23d507d035c82f47793415037217608fc2e", "message": "paylogic added", "committedDate": "2020-09-02T14:01:59Z", "type": "commit"}, {"oid": "2007e41be0c724b30b7550dec14057d61fdecdfc", "url": "https://github.com/mercadopago/px-android/commit/2007e41be0c724b30b7550dec14057d61fdecdfc", "message": "paylogic with paymentrecovery", "committedDate": "2020-09-03T18:19:21Z", "type": "commit"}, {"oid": "471a31738d0a9703820dcc597593098865e62692", "url": "https://github.com/mercadopago/px-android/commit/471a31738d0a9703820dcc597593098865e62692", "message": "refactor ciew model factory", "committedDate": "2020-09-03T19:22:44Z", "type": "commit"}, {"oid": "5a848d10f0e21412eca04d4c0b10853577b844a1", "url": "https://github.com/mercadopago/px-android/commit/5a848d10f0e21412eca04d4c0b10853577b844a1", "message": "merge master", "committedDate": "2020-09-03T19:45:28Z", "type": "commit"}, {"oid": "f0736150868f79f236616c9470832693fe6adcf0", "url": "https://github.com/mercadopago/px-android/commit/f0736150868f79f236616c9470832693fe6adcf0", "message": "revert change", "committedDate": "2020-09-03T20:19:25Z", "type": "commit"}, {"oid": "686ebe01c123c898fa30c34f39fd22c77afb4ed5", "url": "https://github.com/mercadopago/px-android/commit/686ebe01c123c898fa30c34f39fd22c77afb4ed5", "message": "revert change in samples", "committedDate": "2020-09-03T20:22:04Z", "type": "commit"}, {"oid": "4c7fbb5ac3c2468e0cfc3c8c4fc6e26658e27dfe", "url": "https://github.com/mercadopago/px-android/commit/4c7fbb5ac3c2468e0cfc3c8c4fc6e26658e27dfe", "message": "refactor", "committedDate": "2020-09-03T20:57:11Z", "type": "commit"}, {"oid": "11ac243d0c1a1d5cff982a0e2c7ff4cc0a359709", "url": "https://github.com/mercadopago/px-android/commit/11ac243d0c1a1d5cff982a0e2c7ff4cc0a359709", "message": "review changes", "committedDate": "2020-09-03T21:51:29Z", "type": "commit"}, {"oid": "10dc1e18846efee072bcb12b79242503eb2342a1", "url": "https://github.com/mercadopago/px-android/commit/10dc1e18846efee072bcb12b79242503eb2342a1", "message": "add resource string", "committedDate": "2020-09-04T17:37:56Z", "type": "commit"}, {"oid": "7b22ca7591720cddcbf84ac98614fa3c1937bfa4", "url": "https://github.com/mercadopago/px-android/commit/7b22ca7591720cddcbf84ac98614fa3c1937bfa4", "message": "translation resource added", "committedDate": "2020-09-04T18:06:13Z", "type": "commit"}, {"oid": "7c869ba4448f9fa02996a04359baa6ab6cde7922", "url": "https://github.com/mercadopago/px-android/commit/7c869ba4448f9fa02996a04359baa6ab6cde7922", "message": "test fixed", "committedDate": "2020-09-04T18:58:59Z", "type": "commit"}, {"oid": "23c082a4c974c3de3fafe440a1616836c5d3868c", "url": "https://github.com/mercadopago/px-android/commit/23c082a4c974c3de3fafe440a1616836c5d3868c", "message": "retries with snackbar", "committedDate": "2020-09-08T20:27:20Z", "type": "commit"}, {"oid": "de45027e4d12cbb74757866326df96bba146d07b", "url": "https://github.com/mercadopago/px-android/commit/de45027e4d12cbb74757866326df96bba146d07b", "message": "review changes", "committedDate": "2020-09-08T21:36:36Z", "type": "commit"}, {"oid": "1db09895b41eca4fdf6f41ad6681aaea17166230", "url": "https://github.com/mercadopago/px-android/commit/1db09895b41eca4fdf6f41ad6681aaea17166230", "message": "merge", "committedDate": "2020-09-08T21:42:40Z", "type": "commit"}, {"oid": "2e6e3e19ada54d3fd49d2af23ee161c857bd81c0", "url": "https://github.com/mercadopago/px-android/commit/2e6e3e19ada54d3fd49d2af23ee161c857bd81c0", "message": "snackbar error with action added", "committedDate": "2020-09-09T15:20:42Z", "type": "commit"}, {"oid": "0b6a3ed02e4f17dd508bb8ae3670c608e24575c8", "url": "https://github.com/mercadopago/px-android/commit/0b6a3ed02e4f17dd508bb8ae3670c608e24575c8", "message": "review changes", "committedDate": "2020-09-09T16:31:15Z", "type": "commit"}, {"oid": "3c0c37a44fa56b4e93f8312244acacb77d3e38ed", "url": "https://github.com/mercadopago/px-android/commit/3c0c37a44fa56b4e93f8312244acacb77d3e38ed", "message": "merge", "committedDate": "2020-09-09T18:27:02Z", "type": "commit"}, {"oid": "5a0770fa1e5c60de2dd94b9211d3499f6c2c34e7", "url": "https://github.com/mercadopago/px-android/commit/5a0770fa1e5c60de2dd94b9211d3499f6c2c34e7", "message": "review changes", "committedDate": "2020-09-09T18:44:42Z", "type": "commit"}, {"oid": "9d13d59112c8a5aeffafaec314919b91c303d8c1", "url": "https://github.com/mercadopago/px-android/commit/9d13d59112c8a5aeffafaec314919b91c303d8c1", "message": "Merge branch 'feature/paylogic' of github.com:mercadopago/px-android into feature/error_retries", "committedDate": "2020-09-09T18:49:22Z", "type": "commit"}, {"oid": "37754437552198465b613366fa1f24b330b7ff62", "url": "https://github.com/mercadopago/px-android/commit/37754437552198465b613366fa1f24b330b7ff62", "message": "SingleLiveData created", "committedDate": "2020-09-09T20:25:30Z", "type": "commit"}, {"oid": "06bee422dd622403fd2d542f3ff878c7582202b4", "url": "https://github.com/mercadopago/px-android/commit/06bee422dd622403fd2d542f3ff878c7582202b4", "message": "MutableSingleLiveData created", "committedDate": "2020-09-09T20:26:17Z", "type": "commit"}, {"oid": "9f06dda5dad04d2bdc05ec27d3eb2d27324fc737", "url": "https://github.com/mercadopago/px-android/commit/9f06dda5dad04d2bdc05ec27d3eb2d27324fc737", "message": "add tab", "committedDate": "2020-09-09T20:28:29Z", "type": "commit"}, {"oid": "92be8e5ad2f5ff0f682abddf9c7b3cb2ad95f5fc", "url": "https://github.com/mercadopago/px-android/commit/92be8e5ad2f5ff0f682abddf9c7b3cb2ad95f5fc", "message": "merge", "committedDate": "2020-09-10T11:55:42Z", "type": "commit"}, {"oid": "ec18cade1bb34463e3d10017ebe3f2926fbc2c7d", "url": "https://github.com/mercadopago/px-android/commit/ec18cade1bb34463e3d10017ebe3f2926fbc2c7d", "message": "refactor code", "committedDate": "2020-09-10T15:47:33Z", "type": "commit"}, {"oid": "a1783924fa107a1e7c2ca57dbdc8c5b9bc8bba6c", "url": "https://github.com/mercadopago/px-android/commit/a1783924fa107a1e7c2ca57dbdc8c5b9bc8bba6c", "message": "merge with cvv-screen", "committedDate": "2020-09-10T16:35:12Z", "type": "commit"}, {"oid": "768d637491b7e89cc2c323e8465d02caf5f6d05f", "url": "https://github.com/mercadopago/px-android/commit/768d637491b7e89cc2c323e8465d02caf5f6d05f", "message": "revert changes", "committedDate": "2020-09-10T17:03:25Z", "type": "commit"}, {"oid": "7efe1577aa8fd2c124d55c0c1954f62dce94417f", "url": "https://github.com/mercadopago/px-android/commit/7efe1577aa8fd2c124d55c0c1954f62dce94417f", "message": "test fixed", "committedDate": "2020-09-10T17:11:18Z", "type": "commit"}, {"oid": "2c11400b8e57b4b2cb1bc2cf434a97cf6ae076b1", "url": "https://github.com/mercadopago/px-android/commit/2c11400b8e57b4b2cb1bc2cf434a97cf6ae076b1", "message": "refactor code", "committedDate": "2020-09-10T19:05:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU4MzY1MQ==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r486583651", "bodyText": "Ojo, medio side effect el enable, show no implica que el bot\u00f3n tiene que estar habilitado", "author": "guchito9", "createdAt": "2020-09-10T19:27:34Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/pay_button/PayButtonFragment.kt", "diffHunk": "@@ -214,27 +206,32 @@ class PayButtonFragment : Fragment(), PayButton.View, SecurityValidationHandler\n     }\n \n     private fun restoreStatusBar() {\n-        activity?.let {\n-            ViewUtils.setStatusBarColor(ContextCompat.getColor(it, R.color.px_colorPrimaryDark), it.window)\n-        }\n+        activity?.let { ViewUtils.setStatusBarColor(ContextCompat.getColor(it, R.color.px_colorPrimaryDark), it.window) }\n     }\n \n     private fun hideConfirmButton() {\n-        button.clearAnimation()\n-        button.visibility = INVISIBLE\n+        with(button) {\n+            clearAnimation()\n+            visibility = INVISIBLE\n+        }\n     }\n \n     private fun showConfirmButton() {\n-        button.clearAnimation()\n-        button.visibility = VISIBLE\n+        enable()", "originalCommit": "2c11400b8e57b4b2cb1bc2cf434a97cf6ae076b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA3ODQxNQ==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r487078415", "bodyText": "Lo reviso!", "author": "jorGonzalez291292", "createdAt": "2020-09-11T14:21:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU4MzY1MQ=="}], "type": "inlineReview"}, {"oid": "077f9f7267e3b1edc0e8e488389fe60f0f67eaa7", "url": "https://github.com/mercadopago/px-android/commit/077f9f7267e3b1edc0e8e488389fe60f0f67eaa7", "message": "handle back fixed", "committedDate": "2020-09-10T20:29:27Z", "type": "commit"}, {"oid": "d0b9665d832ebbba5741152d158ec6d82748862a", "url": "https://github.com/mercadopago/px-android/commit/d0b9665d832ebbba5741152d158ec6d82748862a", "message": "refactor", "committedDate": "2020-09-10T21:08:45Z", "type": "commit"}, {"oid": "7a2dda307b2e8089cea1fd2924d7007d8a7b0638", "url": "https://github.com/mercadopago/px-android/commit/7a2dda307b2e8089cea1fd2924d7007d8a7b0638", "message": "review change", "committedDate": "2020-09-14T19:02:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUyMjIzOA==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r489522238", "bodyText": "Esto ya lo metimos en master, habr\u00eda que sacarlo", "author": "guchito9", "createdAt": "2020-09-16T15:20:28Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/checkout/CheckoutActivity.java", "diffHunk": "@@ -174,7 +174,7 @@ public void onBackPressed() {\n     }\n \n     private boolean earlyExitFromBackHandler(@Nullable final Fragment fragment) {\n-        if (fragment instanceof BackHandler) {\n+        if (fragment instanceof BackHandler && fragment.isAdded()) {", "originalCommit": "7a2dda307b2e8089cea1fd2924d7007d8a7b0638", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDIwNjM0MA==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490206340", "bodyText": "Dale", "author": "jorGonzalez291292", "createdAt": "2020-09-17T12:33:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUyMjIzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUyNjYyMg==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r489526622", "bodyText": "No deber\u00eda ser recuperable un error de conexi\u00f3n?", "author": "guchito9", "createdAt": "2020-09-16T15:26:19Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/pay_button/PayButtonViewModel.kt", "diffHunk": "@@ -217,16 +221,20 @@ internal class PayButtonViewModel(\n     }\n \n     private fun manageNoConnection() {\n-        val exception = NoConnectivityException()\n-        val apiException = ApiUtil.getApiException(exception)\n-        val error = MercadoPagoError(apiException, null)\n-        noRecoverableError(error)\n+        trackNoRecoverableFriction(connectivityError)", "originalCommit": "7a2dda307b2e8089cea1fd2924d7007d8a7b0638", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDIwNTY2Nw==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490205667", "bodyText": "Solo update el nombre del m\u00e9todo que se usaba noRecoverableError para hacer el track. En todo caso lo cambiar\u00eda a trackFriction().", "author": "jorGonzalez291292", "createdAt": "2020-09-17T12:31:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUyNjYyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM3ODE4OQ==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490378189", "bodyText": "me gusta trackFriction", "author": "cgaggino", "createdAt": "2020-09-17T16:12:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUyNjYyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM5NzM3NA==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490397374", "bodyText": "Lo cambio en el PR de tracks.", "author": "jorGonzalez291292", "createdAt": "2020-09-17T16:27:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTUyNjYyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTYwMjk3MQ==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r489602971", "bodyText": "No hay retryCounter++ en Kotlin? D:", "author": "guchito9", "createdAt": "2020-09-16T17:26:44Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/security_code/SecurityCodeFragment.kt", "diffHunk": "@@ -113,30 +129,63 @@ internal class SecurityCodeFragment : Fragment(), PayButton.Handler, BackHandler\n         securityCodeViewModel.enqueueOnExploding(cvvEditText.text.toString(), callback)\n     }\n \n+    override fun resolvePaymentError(error: MercadoPagoError): Boolean {\n+        payButtonFragment.enable()\n+        when {\n+            error.isNoConnectivityError -> resolveConnectionError()\n+            !error.isPaymentProcessing -> {\n+                val action = AndesSnackbarAction(\n+                    getString(R.string.px_snackbar_error_action),\n+                    View.OnClickListener { activity?.onBackPressed() }\n+                )\n+                view.showSnackBar(getString(R.string.px_error_title), andesSnackbarAction = action)\n+            }\n+        }\n+        return true\n+    }\n+\n+    private fun resolveConnectionError() {\n+        if (retryCounter < MAXIMUM_RETRIES) {\n+            retryCounter += 1", "originalCommit": "7a2dda307b2e8089cea1fd2924d7007d8a7b0638", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDIwMjY1Ng==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490202656", "bodyText": "jaja modificado :P", "author": "jorGonzalez291292", "createdAt": "2020-09-17T12:26:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTYwMjk3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTcxOTc4Ng==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r489719786", "bodyText": "Che y esto donde qued\u00f3? Por ahi se me pas\u00f3 pero :/", "author": "guchito9", "createdAt": "2020-09-16T19:58:17Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/util/TokenCreationWrapper.kt", "diffHunk": "@@ -72,68 +73,21 @@ internal class TokenCreationWrapper private constructor(builder: Builder) {\n         return true\n     }\n \n-    private suspend fun createESCToken(savedESCCardToken: SavedESCCardToken): Token {\n-        return suspendCoroutine {cont ->\n-            cardTokenRepository\n-                .createToken(savedESCCardToken).enqueue(object : TaggedCallback<Token>(ApiUtil.RequestOrigin.CREATE_TOKEN) {\n-                    override fun onSuccess(token: Token) {\n-                        if (Reason.ESC_CAP == reason) { // Remove previous esc for tracking purpose", "originalCommit": "7a2dda307b2e8089cea1fd2924d7007d8a7b0638", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDIxMjE3MA==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490212170", "bodyText": "Me lo comi, agregado.", "author": "jorGonzalez291292", "createdAt": "2020-09-17T12:42:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTcxOTc4Ng=="}], "type": "inlineReview"}, {"oid": "34a006f21976d846950826c2a59565cdea0db6d8", "url": "https://github.com/mercadopago/px-android/commit/34a006f21976d846950826c2a59565cdea0db6d8", "message": "error handler fixed", "committedDate": "2020-09-17T12:26:16Z", "type": "commit"}, {"oid": "9aea8661634f2e58e290d7831d31b190dc4ea576", "url": "https://github.com/mercadopago/px-android/commit/9aea8661634f2e58e290d7831d31b190dc4ea576", "message": "revert change", "committedDate": "2020-09-17T12:32:38Z", "type": "commit"}, {"oid": "8b8b997ef408ee10390a354d4e947349e246da05", "url": "https://github.com/mercadopago/px-android/commit/8b8b997ef408ee10390a354d4e947349e246da05", "message": "clear cap added", "committedDate": "2020-09-17T12:43:24Z", "type": "commit"}, {"oid": "c5c56be4bf89fff89b05f639dae63b8af2edf9ad", "url": "https://github.com/mercadopago/px-android/commit/c5c56be4bf89fff89b05f639dae63b8af2edf9ad", "message": "test fixed", "committedDate": "2020-09-17T12:52:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM3MjgxOQ==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490372819", "bodyText": "todo lo que es retry en el fragment qued\u00f3 de m\u00e1s?", "author": "cgaggino", "createdAt": "2020-09-17T16:07:50Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/pay_button/PayButtonFragment.kt", "diffHunk": "@@ -246,6 +271,8 @@ class PayButtonFragment : Fragment(), PayButton.View, SecurityValidationHandler\n \n     companion object {\n         const val TAG = \"TAG_BUTTON_FRAGMENT\"\n+        private const val MAXIMUM_RETRIES = 3", "originalCommit": "c5c56be4bf89fff89b05f639dae63b8af2edf9ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM5NzgyMQ==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490397821", "bodyText": "Sip, no se estaba usando. Lo borro.", "author": "jorGonzalez291292", "createdAt": "2020-09-17T16:28:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM3MjgxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM3NTQyMw==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490375423", "bodyText": "por que no hacemos la asignaci\u00f3n directamente en vez de declarar un get?\nquizas hasta nos ahorra guardar el retries count como un val", "author": "cgaggino", "createdAt": "2020-09-17T16:10:17Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/pay_button/PayButtonState.kt", "diffHunk": "@@ -20,9 +20,20 @@ internal open class UIResult : PayButtonState() {\n     object VisualProcessorResult : UIResult()\n     data class PaymentResult(val model: PaymentModel) : UIResult()\n     data class BusinessPaymentResult(val model: BusinessPaymentModel) : UIResult()\n-    data class NoCongratsResult(val model : PaymentModel) : UIResult()\n+    data class NoCongratsResult(val model: PaymentModel) : UIResult()\n }\n \n-internal open class UIError(val message: String, val detail: String) : PayButtonState() {\n-    class ConnectionError(error: MercadoPagoError) : UIError(error.message.orEmpty(), error.errorDetail.orEmpty())\n+internal open class UIError : PayButtonState() {\n+    class ConnectionError(private val retriesCount: Int): UIError() {\n+        private val maxRetries = 3\n+        private val neutralMessage = R.string.px_connectivity_neutral_error\n+        private val errorMessage = R.string.px_connectivity_error\n+\n+        val message: Int\n+            get() = if (retriesCount <= maxRetries) neutralMessage else errorMessage", "originalCommit": "c5c56be4bf89fff89b05f639dae63b8af2edf9ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQwMzI1Ng==", "url": "https://github.com/mercadopago/px-android/pull/2321#discussion_r490403256", "bodyText": "lo cambio", "author": "jorGonzalez291292", "createdAt": "2020-09-17T16:37:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM3NTQyMw=="}], "type": "inlineReview"}, {"oid": "67a72c6ffce4ef9e6b243dcb07cd3757067b178d", "url": "https://github.com/mercadopago/px-android/commit/67a72c6ffce4ef9e6b243dcb07cd3757067b178d", "message": "refactor ConnectionError", "committedDate": "2020-09-17T16:41:07Z", "type": "commit"}, {"oid": "f49c25b14f59a063b83f2c4cd545aae0093a7870", "url": "https://github.com/mercadopago/px-android/commit/f49c25b14f59a063b83f2c4cd545aae0093a7870", "message": "remove values from paybutton", "committedDate": "2020-09-17T16:44:10Z", "type": "commit"}]}