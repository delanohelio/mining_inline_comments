{"pr_number": 2172, "pr_title": "[enhancement] amount and callback from biometrics", "pr_createdAt": "2020-06-02T21:44:34Z", "pr_url": "https://github.com/mercadopago/px-android/pull/2172", "timeline": [{"oid": "18de18265f3b1eedbd2fce0f7160ce1e71eea413", "url": "https://github.com/mercadopago/px-android/commit/18de18265f3b1eedbd2fce0f7160ce1e71eea413", "message": "* Add amount to security validation data\n* Take security requested from callback", "committedDate": "2020-06-02T21:52:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NzMxNw==", "url": "https://github.com/mercadopago/px-android/pull/2172#discussion_r434197317", "bodyText": "Te falta @nonnull ?", "author": "guchito9", "createdAt": "2020-06-02T21:55:09Z", "path": "px-addons/src/main/java/com/mercadopago/android/px/addons/SecurityBehaviour.java", "diffHunk": "@@ -34,4 +34,9 @@ void startValidation(@NonNull final Activity activity,\n      */\n     void startValidation(@NonNull final Fragment fragment,\n         @NonNull final SecurityValidationData data, final int requestCode);\n+\n+    /**\n+     * @return the key to get the result from intent when validation finished\n+     */\n+    String getExtraResultKey();", "originalCommit": "18de18265f3b1eedbd2fce0f7160ce1e71eea413", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5ODMxNA==", "url": "https://github.com/mercadopago/px-android/pull/2172#discussion_r434198314", "bodyText": "El run parece estar al pedo", "author": "guchito9", "createdAt": "2020-06-02T21:57:47Z", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/pay_button/PayButtonViewModel.kt", "diffHunk": "@@ -92,12 +95,14 @@ internal class PayButtonViewModel(\n         this.paymentConfiguration = paymentConfiguration\n         this.confirmTrackerData = confirmTrackerData\n         val data: SecurityValidationData = SecurityValidationDataFactory\n-            .create(productIdProvider, paymentConfiguration)\n+            .create(productIdProvider, paymentSettingRepository.checkoutPreference!!.totalAmount, paymentConfiguration)\n         stateUILiveData.value = FingerprintRequired(data)\n     }\n \n-    override fun handleBiometricsResult(isSuccess: Boolean) {\n+    override fun handleBiometricsResult(isSuccess: Boolean, securityRequested: Boolean) {\n         if (isSuccess) {\n+            paymentSettingRepository.configure(\n+                SecurityType.SECOND_FACTOR.takeIf { securityRequested } ?: run { SecurityType.NONE })", "originalCommit": "18de18265f3b1eedbd2fce0f7160ce1e71eea413", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7090a01c80c47059fc65ef9ac9a0d6011c473354", "url": "https://github.com/mercadopago/px-android/commit/7090a01c80c47059fc65ef9ac9a0d6011c473354", "message": "* Add amount to security validation data\n* Take security requested from callback", "committedDate": "2020-06-02T22:07:57Z", "type": "forcePushed"}, {"oid": "623652e7c87cb6946e835e520c2473f99d578f35", "url": "https://github.com/mercadopago/px-android/commit/623652e7c87cb6946e835e520c2473f99d578f35", "message": "* Add amount to security validation data\n* Take security requested from callback", "committedDate": "2020-06-03T11:53:21Z", "type": "commit"}, {"oid": "623652e7c87cb6946e835e520c2473f99d578f35", "url": "https://github.com/mercadopago/px-android/commit/623652e7c87cb6946e835e520c2473f99d578f35", "message": "* Add amount to security validation data\n* Take security requested from callback", "committedDate": "2020-06-03T11:53:21Z", "type": "forcePushed"}]}