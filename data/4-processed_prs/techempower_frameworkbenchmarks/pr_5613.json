{"pr_number": 5613, "pr_title": "actix: update json benchmarks", "pr_createdAt": "2020-04-18T05:01:25Z", "pr_url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5613", "timeline": [{"oid": "d925b62298b53ea8e6fff62fc193a5bb961dd385", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/d925b62298b53ea8e6fff62fc193a5bb961dd385", "message": "actix: use simd-json for json serialization", "committedDate": "2020-04-18T05:00:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcxNzU3Nw==", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5613#discussion_r410717577", "bodyText": "it would be better to use simd-json-derive::Serialize and message.json_write it is 2-3x faster then serde::Serialize.\nsimd_json::to_writer is a compatibility method that implements the slower serde-trait for drop-in replacement w/o code changes. Given it's a benchmark code changes are OK I think especially if it's about 2 lines :D.\nThat said the simd-json-derive::Serialize is still young and only exists as a git dependency, not as a crate yet.", "author": "Licenser", "createdAt": "2020-04-18T16:16:39Z", "path": "frameworks/Rust/actix/src/main.rs", "diffHunk": "@@ -20,7 +20,7 @@ async fn json() -> HttpResponse {\n         message: \"Hello, World!\",\n     };\n     let mut body = BytesMut::with_capacity(SIZE);\n-    serde_json::to_writer(Writer(&mut body), &message).unwrap();\n+    simd_json::to_writer(Writer(&mut body), &message).unwrap();", "originalCommit": "d925b62298b53ea8e6fff62fc193a5bb961dd385", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcxOTI2NA==", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5613#discussion_r410719264", "bodyText": "@Licenser thanks for the tip!", "author": "fafhrd91", "createdAt": "2020-04-18T16:30:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcxNzU3Nw=="}], "type": "inlineReview"}, {"oid": "2c501b7121ba61a5c89a4adaa15b4a4108b8d82f", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/2c501b7121ba61a5c89a4adaa15b4a4108b8d82f", "message": "use simd-json Serialize trait", "committedDate": "2020-04-18T16:31:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDczNzIzNA==", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5613#discussion_r410737234", "bodyText": "This should work with the crate :) it's compatible with the derive\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            simd-json = { git = \"https://github.com/simd-lite/simd-json.git\" }\n          \n          \n            \n            simd-json = \"0.3\"", "author": "Licenser", "createdAt": "2020-04-18T19:01:46Z", "path": "frameworks/Rust/actix/Cargo.toml", "diffHunk": "@@ -44,6 +44,8 @@ bytes = \"0.5.3\"\n num_cpus = \"1.0\"\n futures = \"0.3.1\"\n http = \"0.2\"\n+simd-json = { git = \"https://github.com/simd-lite/simd-json.git\" }", "originalCommit": "2c501b7121ba61a5c89a4adaa15b4a4108b8d82f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d46d4e742384b09ac29b052c51a4a95a0a1cc84e", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/d46d4e742384b09ac29b052c51a4a95a0a1cc84e", "message": "use crates version", "committedDate": "2020-04-18T19:03:17Z", "type": "commit"}]}