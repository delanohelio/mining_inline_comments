{"pr_number": 5470, "pr_title": "Actix: use snmalloc allocator", "pr_createdAt": "2020-02-07T08:16:06Z", "pr_url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5470", "timeline": [{"oid": "38892c7e978a6f89622afa142f2a5d994ac2dd43", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/38892c7e978a6f89622afa142f2a5d994ac2dd43", "message": "use snmalloc allocator", "committedDate": "2020-02-07T09:20:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUwNDY5MQ==", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5470#discussion_r376504691", "bodyText": "Note that most of our snmalloc perf work has been done assuming that it is compiled with clang or Visual Studio (and some of it is susceptible to inlining decisions).  I have no idea how this changes when you compile with gcc instead.  If you have comparison numbers for snmalloc compiled with clang vs gcc, I would be interested in them.", "author": "davidchisnall", "createdAt": "2020-02-07T17:08:42Z", "path": "frameworks/Rust/actix/actix-core.dockerfile", "diffHunk": "@@ -1,4 +1,6 @@\n-FROM rust:1.40\n+FROM rust:1.41\n+\n+RUN apt update -yqq && apt install -yqq cmake g++", "originalCommit": "38892c7e978a6f89622afa142f2a5d994ac2dd43", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUwOTM2NA==", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5470#discussion_r376509364", "bodyText": "It looks as if the fast path on rust_alloc and rust_dealloc are one instruction longer with gcc (16 vs 15, 26 vs 25 x86-64 instructions), but with a quite different instruction mix so this is not necessarily slower.", "author": "davidchisnall", "createdAt": "2020-02-07T17:19:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUwNDY5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgzMzMwNw==", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5470#discussion_r376833307", "bodyText": "i dont think we would notice 16 vs 15 instructions difference for io workload. but from what i've read snmalloc perfectly match actix, actix is single threaded.", "author": "fafhrd91", "createdAt": "2020-02-10T00:45:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjUwNDY5MQ=="}], "type": "inlineReview"}]}