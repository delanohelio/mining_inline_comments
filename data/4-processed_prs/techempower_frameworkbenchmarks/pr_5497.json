{"pr_number": 5497, "pr_title": "Upgraded version of ffead-cpp with latest changes", "pr_createdAt": "2020-02-18T18:00:23Z", "pr_url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5497", "timeline": [{"oid": "6b66a0b03351d781bdfe0d8600df8ff9321008ac", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/6b66a0b03351d781bdfe0d8600df8ff9321008ac", "message": "Upgraded version of ffead-cpp with latest changes", "committedDate": "2020-02-18T17:55:40Z", "type": "commit"}, {"oid": "6919287f9e51b650b154106f76f1bbcd8099dfa6", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/6919287f9e51b650b154106f76f1bbcd8099dfa6", "message": "Fixed cached tests", "committedDate": "2020-02-21T10:14:19Z", "type": "commit"}, {"oid": "04dcc52cda030588beaac0d7c3a8e31cec5dd92d", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/04dcc52cda030588beaac0d7c3a8e31cec5dd92d", "message": "Disable apache tests", "committedDate": "2020-02-21T11:14:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjY0MjMwNw==", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/pull/5497#discussion_r382642307", "bodyText": "If the randomNumber is 1, this will set it to 0 and cause an error in the verification. This would be rare, but it could happen during an official run.", "author": "nbrady-techempower", "createdAt": "2020-02-21T15:25:44Z", "path": "frameworks/C++/ffead-cpp/te-benchmark-um/src/TeBkUm.cpp", "diffHunk": "@@ -0,0 +1,312 @@\n+/*\n+ * TeBkUmUm.cpp\n+ *\n+ *  Created on: 03-Feb-2020\n+ *      Author: sumeetc\n+ */\n+#include \"TeBkUm.h\"\n+\n+int TeBkUmFortune::getId() const {\n+\treturn id;\n+}\n+\n+void TeBkUmFortune::setId(int id) {\n+\tthis->id = id;\n+}\n+\n+const std::string& TeBkUmFortune::getMessage() const {\n+\treturn message;\n+}\n+\n+void TeBkUmFortune::setMessage(const std::string& message) {\n+\tthis->message = message;\n+}\n+\n+TeBkUmFortune::TeBkUmFortune() {\n+\tid = 0;\n+}\n+\n+TeBkUmFortune::~TeBkUmFortune() {\n+}\n+\n+bool TeBkUmFortune::operator < (const TeBkUmFortune& other) const {\n+\treturn message.compare(other.message)<0;\n+}\n+\n+TeBkUmMessage::~TeBkUmMessage() {\n+}\n+\n+const std::string& TeBkUmMessage::getMessage() const {\n+\treturn message;\n+}\n+\n+void TeBkUmMessage::setMessage(const std::string& message) {\n+\tthis->message = message;\n+}\n+\n+const std::string TeBkUmRouter::HELLO_WORLD = \"Hello, World!\";\n+std::string TeBkUmRouter::WORLD = \"world\";\n+\n+void TeBkUmRouter::db(TeBkUmWorld& w) {\n+\tDataSourceInterface* sqli = DataSourceManager::getImpl();\n+\tint rid = rand() % 10000 + 1;\n+\tGenericObject id;\n+\tid << rid;\n+\ttry {\n+\t\tw = sqli->get<TeBkUmWorld>(id);\n+\t\tdelete sqli;\n+\t} catch(const std::exception& e) {\n+\t\tdelete sqli;\n+\t\tthrow e;\n+\t}\n+}\n+\n+void TeBkUmRouter::queries(const char* q, int ql, std::vector<TeBkUmWorld>& wlst) {\n+\tint queryCount = 0;\n+\tstrToNum(q, ql, queryCount);\n+\tif(queryCount<1)queryCount=1;\n+\telse if(queryCount>500)queryCount=500;\n+\n+\tDataSourceInterface* sqli = DataSourceManager::getImpl();\n+\n+\ttry {\n+\t\tsqli->startSession(&WORLD);\n+\t\tfor (int c = 0; c < queryCount; ++c) {\n+\t\t\tint rid = rand() % 10000 + 1;\n+\t\t\tGenericObject id;\n+\t\t\tid << rid;\n+\t\t\tTeBkUmWorld w = sqli->get<TeBkUmWorld>(id);\n+\t\t\twlst.push_back(w);\n+\t\t}\n+\t\tsqli->endSession();\n+\t\tdelete sqli;\n+\t} catch(const std::exception& e) {\n+\t\tdelete sqli;\n+\t\tthrow e;\n+\t}\n+}\n+\n+void TeBkUmRouter::updates(const char* q, int ql, std::vector<TeBkUmWorld>& wlst) {\n+\tint queryCount = 0;\n+\tstrToNum(q, ql, queryCount);\n+\tif(queryCount<1)queryCount=1;\n+\telse if(queryCount>500)queryCount=500;\n+\n+\tDataSourceInterface* sqli = DataSourceManager::getImpl();\n+\n+\ttry {\n+\t\tsqli->startSession(&WORLD);\n+\t\tfor (int c = 0; c < queryCount; ++c) {\n+\t\t\tint rid = rand() % 10000 + 1;\n+\t\t\tGenericObject id;\n+\t\t\tid << rid;\n+\t\t\tTeBkUmWorld w = sqli->get<TeBkUmWorld>(id);\n+\t\t\tint newRandomNumber = rand() % 10000 + 1;\n+\t\t\tif(w.getRandomNumber() == newRandomNumber) {\n+\t\t\t\tnewRandomNumber -= 1;", "originalCommit": "04dcc52cda030588beaac0d7c3a8e31cec5dd92d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c9a5c8faf6b25120e5b5869f1d2e87a6da046502", "url": "https://github.com/TechEmpower/FrameworkBenchmarks/commit/c9a5c8faf6b25120e5b5869f1d2e87a6da046502", "message": "Fixed edge case test scenario", "committedDate": "2020-02-22T16:37:57Z", "type": "commit"}]}