{"pr_number": 431, "pr_title": ".circleci: Add initial circleci configuration", "pr_createdAt": "2020-06-03T22:08:50Z", "pr_url": "https://github.com/pytorch/serve/pull/431", "timeline": [{"oid": "045440a0f8e3bff28f09cfaa9b91244925e3e139", "url": "https://github.com/pytorch/serve/commit/045440a0f8e3bff28f09cfaa9b91244925e3e139", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:09:09Z", "type": "forcePushed"}, {"oid": "972b9a893687055952505ea883472280587fab2b", "url": "https://github.com/pytorch/serve/commit/972b9a893687055952505ea883472280587fab2b", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:10:16Z", "type": "forcePushed"}, {"oid": "25898bfc860f0d1db66e91f862bd1e758093c74a", "url": "https://github.com/pytorch/serve/commit/25898bfc860f0d1db66e91f862bd1e758093c74a", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:10:46Z", "type": "forcePushed"}, {"oid": "dab2f1b4c1dad047687de5a3af08b4c0b7a10510", "url": "https://github.com/pytorch/serve/commit/dab2f1b4c1dad047687de5a3af08b4c0b7a10510", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:11:41Z", "type": "forcePushed"}, {"oid": "208f8f56a8aebdae20ee5e7b84fc70c805b22f8f", "url": "https://github.com/pytorch/serve/commit/208f8f56a8aebdae20ee5e7b84fc70c805b22f8f", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:13:52Z", "type": "forcePushed"}, {"oid": "770101573baafbcae12c6eae2a6b8f446ff3b613", "url": "https://github.com/pytorch/serve/commit/770101573baafbcae12c6eae2a6b8f446ff3b613", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:15:30Z", "type": "forcePushed"}, {"oid": "aeb234303a5fb3668d0f30752f717a4486b20c36", "url": "https://github.com/pytorch/serve/commit/aeb234303a5fb3668d0f30752f717a4486b20c36", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:16:47Z", "type": "forcePushed"}, {"oid": "5f24df0a88585bbf0c21de9468bae59e2a23706d", "url": "https://github.com/pytorch/serve/commit/5f24df0a88585bbf0c21de9468bae59e2a23706d", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:18:03Z", "type": "forcePushed"}, {"oid": "535b22ee4190b113776f5db4fba22fcb2a4c2e5c", "url": "https://github.com/pytorch/serve/commit/535b22ee4190b113776f5db4fba22fcb2a4c2e5c", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:19:06Z", "type": "forcePushed"}, {"oid": "0ff2fb62cf127cad5fd9e607c0e6c3cad64710b6", "url": "https://github.com/pytorch/serve/commit/0ff2fb62cf127cad5fd9e607c0e6c3cad64710b6", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:22:48Z", "type": "forcePushed"}, {"oid": "5634f250975fdbc807156881d492c2b39ad3a059", "url": "https://github.com/pytorch/serve/commit/5634f250975fdbc807156881d492c2b39ad3a059", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-03T22:32:40Z", "type": "forcePushed"}, {"oid": "af4736ad5d6fd125121ab8eddcd8a8f959a7da31", "url": "https://github.com/pytorch/serve/commit/af4736ad5d6fd125121ab8eddcd8a8f959a7da31", "message": ".git: Add gitignore\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-04T17:55:23Z", "type": "forcePushed"}, {"oid": "04659924b993da056352db72c260ef2d16e87d8e", "url": "https://github.com/pytorch/serve/commit/04659924b993da056352db72c260ef2d16e87d8e", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-04T18:29:40Z", "type": "forcePushed"}, {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "url": "https://github.com/pytorch/serve/commit/52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-04T19:06:21Z", "type": "commit"}, {"oid": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "url": "https://github.com/pytorch/serve/commit/52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "message": ".circleci: Add initial circleci configuration\n\nSigned-off-by: Eli Uriegas <eliuriegas@fb.com>", "committedDate": "2020-06-04T19:06:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU5NDQzMQ==", "url": "https://github.com/pytorch/serve/pull/431#discussion_r435594431", "bodyText": "@seemethere Will this only run on CPU machines? How are we planning to generate binaries for GPUs?", "author": "chauhang", "createdAt": "2020-06-04T22:49:43Z", "path": ".circleci/Dockerfile", "diffHunk": "@@ -0,0 +1,6 @@\n+FROM ubuntu:18.04 as dev\n+RUN apt-get update && apt-get install -y openjdk-11-jdk\n+COPY --from=continuumio/miniconda3:4.8.2 /opt/conda /opt/conda\n+ENV PATH=\"/opt/conda/bin/:${PATH}\"\n+ARG PYTORCH_CHANNEL=pytorch\n+RUN conda install -c \"${PYTORCH_CHANNEL}\" -c powerai -y pytorch torchvision torchtext cpuonly psutil", "originalCommit": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAyMzQ5NA==", "url": "https://github.com/pytorch/serve/pull/431#discussion_r436023494", "bodyText": "Does building with CUDA enabled binaries actually matter for using torchserve binaries with GPUs?\nI'm unaware if it actually does.", "author": "seemethere", "createdAt": "2020-06-05T16:13:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU5NDQzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjA2NDYyNQ==", "url": "https://github.com/pytorch/serve/pull/431#discussion_r436064625", "bodyText": "You are right, TorchServe binaries are not dependent on Cuda. We just need to verify that the generated binaries work for both CPU and GPU deployments", "author": "chauhang", "createdAt": "2020-06-05T17:33:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU5NDQzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzNjQ0MQ==", "url": "https://github.com/pytorch/serve/pull/431#discussion_r435636441", "bodyText": "https://github.com/pytorch/serve/pull/431/files#r435594431\nseems to use Ubuntu 18.04 docker image and build on top.\nI'm not sure what the image: tag is for or what the naming convention used?\nubuntu-1604:201903-01", "author": "mycpuorg", "createdAt": "2020-06-05T01:04:00Z", "path": ".circleci/config.yml", "diffHunk": "@@ -0,0 +1,74 @@\n+version: 2.1\n+\n+jobs:\n+    build_docker_environment:\n+        parameters:\n+            pytorch_channel:\n+                type: string\n+                default: \"pytorch\"\n+        machine:\n+            image: ubuntu-1604:201903-01", "originalCommit": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAyMjgyMw==", "url": "https://github.com/pytorch/serve/pull/431#discussion_r436022823", "bodyText": "These are related to circleci's base image and although they look similar do not relate to docker images.\nsee https://circleci.com/docs/2.0/configuration-reference/#available-machine-images", "author": "seemethere", "createdAt": "2020-06-05T16:12:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzNjQ0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzNzM3Mw==", "url": "https://github.com/pytorch/serve/pull/431#discussion_r435637373", "bodyText": "same question here", "author": "mycpuorg", "createdAt": "2020-06-05T01:07:42Z", "path": ".circleci/config.yml", "diffHunk": "@@ -0,0 +1,74 @@\n+version: 2.1\n+\n+jobs:\n+    build_docker_environment:\n+        parameters:\n+            pytorch_channel:\n+                type: string\n+                default: \"pytorch\"\n+        machine:\n+            image: ubuntu-1604:201903-01\n+        environment:\n+            - DOCKER_BUILDKIT=1\n+        steps:\n+            - checkout\n+            - run:\n+                name: Building docker image\n+                command: |\n+                    cat .circleci/Dockerfile | docker build \\\n+                        -t pytorch/serve-circleci-dev \\\n+                        --progress=plain \\\n+                        --build-arg PYTORCH_CHANNEL=\"<< parameters.pytorch_channel >>\" -\n+            - run:\n+                name: Save docker image to archive\n+                command: mkdir /tmp/workspace && docker image save pytorch/serve-circleci-dev -o /tmp/workspace/dev-image.tar\n+            - persist_to_workspace:\n+                root: /tmp/workspace\n+                paths:\n+                    - dev-image.tar\n+    build_wheel:\n+        parameters:\n+            build_directory:\n+                type: string\n+                default: \".\"\n+        machine:\n+            image: ubuntu-1604:201903-01", "originalCommit": "52b097492b4fa3f2b638089b2ad7dcef03d64ebe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}