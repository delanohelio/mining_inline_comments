{"pr_number": 228, "pr_title": "Moved python dependency packages to requirements.txt", "pr_createdAt": "2020-04-20T16:39:45Z", "pr_url": "https://github.com/pytorch/serve/pull/228", "timeline": [{"oid": "6732abbd01e56be4b690963026da92f23e05c995", "url": "https://github.com/pytorch/serve/commit/6732abbd01e56be4b690963026da92f23e05c995", "message": "moved python dependency packages to requirements.txt", "committedDate": "2020-04-20T16:31:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjU3NTkwNw==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r412575907", "bodyText": "Does this work when requirements.txt is in the root dir not /ci?", "author": "aaronmarkham", "createdAt": "2020-04-22T00:09:48Z", "path": "ci/buildspec.yml", "diffHunk": "@@ -8,14 +8,7 @@ phases:\n       - apt-get update\n       - apt-get install -y curl\n       - pip install pip -U\n-      - pip install future\n-      - pip install Pillow\n-      - pip install pytest\n-      - pip install wheel\n-      - pip install twine\n-      - pip install pytest-mock -U\n-      - pip install requests\n-      - pip install psutil\n+      - pip install -r requirements.txt", "originalCommit": "6732abbd01e56be4b690963026da92f23e05c995", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQyNTUwNA==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r418425504", "bodyText": "Moved the requirements.txt to ci directory", "author": "harshbafna", "createdAt": "2020-05-01T05:43:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjU3NTkwNw=="}], "type": "inlineReview"}, {"oid": "cea00412c1d8f9ce1b8ab54d83b45cb00845ecf4", "url": "https://github.com/pytorch/serve/commit/cea00412c1d8f9ce1b8ab54d83b45cb00845ecf4", "message": "moved requirements.txt to ci", "committedDate": "2020-05-01T05:26:25Z", "type": "commit"}, {"oid": "ad1a1c9a103f1121165839a30173c91870ea10ee", "url": "https://github.com/pytorch/serve/commit/ad1a1c9a103f1121165839a30173c91870ea10ee", "message": "merged master", "committedDate": "2020-05-01T05:28:28Z", "type": "commit"}, {"oid": "a3919babb8be99bd35031b1713af3e2bb6bb8549", "url": "https://github.com/pytorch/serve/commit/a3919babb8be99bd35031b1713af3e2bb6bb8549", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-01T05:45:08Z", "type": "commit"}, {"oid": "928271a94ba2ebda4b44d2ac48b0c3cf0d622328", "url": "https://github.com/pytorch/serve/commit/928271a94ba2ebda4b44d2ac48b0c3cf0d622328", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-04T17:35:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r419609053", "bodyText": "Missing torch requirements.\ntorchtext, torchvision etc.. ?", "author": "mycpuorg", "createdAt": "2020-05-04T17:38:51Z", "path": "ci/requirements.txt", "diffHunk": "@@ -0,0 +1,10 @@\n+Pillow", "originalCommit": "928271a94ba2ebda4b44d2ac48b0c3cf0d622328", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYxMTM4Mw==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r419611383", "bodyText": "The torch package installation command is different for CPU and GPU and should not be part of requirements.txt. Also this is CI specific and the torch packages are installed through the codebuild docker files.", "author": "harshbafna", "createdAt": "2020-05-04T17:42:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYyODU0Nw==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r419628547", "bodyText": "what would happen if I tried installing with just instructions based on requirements.txt ? I would fail to run examples etc. correct?", "author": "mycpuorg", "createdAt": "2020-05-04T18:10:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzMTA3Ng==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r419631076", "bodyText": "This reqirements.txt is specific to CI build and code_coverage where the torch related packages are taken care by docker files. However, for manually running torchserve_sanity.sh script, the torch packages will need to be installed separately.", "author": "harshbafna", "createdAt": "2020-05-04T18:14:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYzNTIyOQ==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r420635229", "bodyText": "Updated documentation to install torchserve pre-requisites before running sanity script.", "author": "harshbafna", "createdAt": "2020-05-06T08:47:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM5NTM3Ng==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r423395376", "bodyText": "Why do we need a requirements.txt then?\nWhy are you saying this txt file is specific to CI build or code coverage ? What prevents us from using it everywhere?\nThe main point of using requirements.txt is to have one central place where we list all the dependencies. It doesn't matter what we have today in ci scripts, sanity scripts etc.\nLet's list all the deps in one single place (requirements.txt) and install it from different scripts. This will be used by pip, conda etc.\nThe idea is not to miss any installations that we are experiencing.", "author": "mycpuorg", "createdAt": "2020-05-12T00:30:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMxMjgxOQ==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r424312819", "bodyText": "@mycpuorg : The only reason to keep torch related packages away from the requirements.txt file is the fact that PyTorch's official documentation provides different set of installation commands for torch packages based on the environment like Linux/Mac, CPU/GPU, Pip/Conda etc. Following are some combination which we generally use :\n\n\n\nEnvironment\nInstallation command\n\n\n\n\nLinux + Pip + Cuda\npip install torch torchvision\n\n\nLinux + Pip\npip install torch==1.5.0+cpu torchvision==0.6.0+cpu -f https://download.pytorch.org/whl/torch_stable.html\n\n\nLinux + Conda\nconda install pytorch torchvision cpuonly -c pytorch\n\n\nLinux + Conda + Cuda\nconda install pytorch torchvision cudatoolkit=10.2 -c pytorch\n\n\nMac + Pip\npip install torch torchvision\n\n\nMac + Conda\nconda install pytorch torchvision -c pytorch\n\n\n\nReference : https://pytorch.org/get-started/locally/\nIn case of CI build the torch packages are installed as part of the docker image used for CodeBuild and this requirements.txt was introduced initially to freeze all the python packages being used at the time of CI build.\nAlso, following packages are required only while executing test suites or python linting on the backend source code and model-archiver source code and not required for installing TorchServe from source :\nmock\npytest\npylint\npytest-mock\npytest-cov\n\nNote that the pytest suite is currently not executed as a part of build process.\nFor this we can split the requirements.txt into multiple parts like this :\n|-- requirements\n|   |-- common.txt\n|   |-- dev.txt\n|   `-- prod.txt\n`-- requirements.txt\n\ncommon.txt\n## contains common packages like\nfuture\npsutil\nwheel\nrequests\n\ndev.txt\n## replicates the common.txt and adds dev specific packages like :\n-r common.txt\nmock\npytest\npylint\npytest-mock\npytest-cov\n\nprod.txt\n## replicates common.txt\n-r common.txt\n\nrequirements.txt\n## replicates prod.txt\n-r prod.txt\n\nPlease let us know your thoughts and how should we handle the different installation commands provided by PyTorch for torch packages.", "author": "harshbafna", "createdAt": "2020-05-13T09:48:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc0ODU1OA==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r424748558", "bodyText": "Thanks. I like the idea of modularizing the installation. But it's not clear what the expectation is for installing torch (specific) packages. The whole issue that we are trying to solve is to list and install the dep packages from one central place. Is something breaking when we do this?", "author": "mycpuorg", "createdAt": "2020-05-13T21:43:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc0OTUyNg==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r424749526", "bodyText": "Also, please describe what your proposal is and how the installation commands would look afterwards (forget CI, Dockerfiles, sanity scripts). Just list down the commands that an end user would be typing into the CLI after these requirements.txt changes are merged.", "author": "mycpuorg", "createdAt": "2020-05-13T21:45:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI4MTMxNg==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r425281316", "bodyText": "@mycpuorg :\nThe idea here is to use 2 different requirements.txt for installing the environment specific packages for production and development envs.\nFor production environment we will use :\npip install -r requirements.txt\nThis will install all the common packages and anything specific to production environment.\nFor dev environment or CI builds we will use\npip install -r requirements/dev_requirements.txt\nwhich will install all the common packages along with the UT specific python packages.\nRegarding the torch related packages :\nThe installation works fine on normal python environments with the following pip install command which is being currently used in the installation scripts :\npip install torch torchtext torchvision\nHowever, given the different commands recommended by PyTorch for different environments, this will require more exhaustive testing on different environments using different models to be sure we can use one common command for all the environments.", "author": "harshbafna", "createdAt": "2020-05-14T16:43:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU3ODM1NQ==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r425578355", "bodyText": "@harshbafna @mycpuorg What is the final resolution of this discussion? What is being proposed now and what has to be done as a future step?", "author": "chauhang", "createdAt": "2020-05-15T05:45:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgwNTU0Ng==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r425805546", "bodyText": "@chauhang @mycpuorg\nI have tested the install_from_source_ubuntu script and verified all the default handlers on EC2 with CPU/GPU and Pip/Conda combination. Based on this testing we should be good to go ahead with the above mentioned approach of modularized requirements.txt which is also a best practice for keeping the production environment independent of development related.\nPlease refer the attached excel sheet for detailed report.\nTorch Package Installation Testing.xlsx", "author": "harshbafna", "createdAt": "2020-05-15T13:34:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYwOTA1Mw=="}], "type": "inlineReview"}, {"oid": "53d7eac113be7d4448569c500b21760acfd295b9", "url": "https://github.com/pytorch/serve/commit/53d7eac113be7d4448569c500b21760acfd295b9", "message": "updated documentation to run torchserve_sanity script", "committedDate": "2020-05-06T08:23:35Z", "type": "commit"}, {"oid": "e23b9569fd875a4b627fb029f68f5fc0052590fe", "url": "https://github.com/pytorch/serve/commit/e23b9569fd875a4b627fb029f68f5fc0052590fe", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-07T02:58:35Z", "type": "commit"}, {"oid": "b8bcaac95c7676612919b5a526bf6e2f4aa4597e", "url": "https://github.com/pytorch/serve/commit/b8bcaac95c7676612919b5a526bf6e2f4aa4597e", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-13T04:20:16Z", "type": "commit"}, {"oid": "2d398d2b99696d8209c0f93f7b3bd805687b80e5", "url": "https://github.com/pytorch/serve/commit/2d398d2b99696d8209c0f93f7b3bd805687b80e5", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-14T03:49:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU3NzkyOQ==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r425577929", "bodyText": "Line #10 above is already doing cd ... do we need this again?", "author": "chauhang", "createdAt": "2020-05-15T05:43:51Z", "path": "docs/code_coverage.md", "diffHunk": "@@ -2,11 +2,20 @@\n \n ## Prerequisites\n \n-You need some additional Python modules to run the unit tests and linting.\n+* Install all `TorchServe` prerequisites. For detailed steps refer [TorchServe installation documentation](../README.md#install-torchserve).\n+\n+* Install additional Python modules to run the unit tests and linting using following commands\n+\n+```bash\n+cd <path_to_serve>\n+pip install -r ci/requirements.txt\n+```\n+\n+\n+## Run sanity script\n \n ```bash\n-pip install mock pytest pylint pytest-mock pytest-cov\n-cd serve\n+cd <path_to_serve>", "originalCommit": "2d398d2b99696d8209c0f93f7b3bd805687b80e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzAxNDk1NA==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r427014954", "bodyText": "removed.", "author": "harshbafna", "createdAt": "2020-05-19T03:51:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU3NzkyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU3ODExMQ==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r425578111", "bodyText": "Is there any reason for changing this from cd serve to cd <path_to_serve>", "author": "chauhang", "createdAt": "2020-05-15T05:44:32Z", "path": "docs/code_coverage.md", "diffHunk": "@@ -2,11 +2,20 @@\n \n ## Prerequisites\n \n-You need some additional Python modules to run the unit tests and linting.\n+* Install all `TorchServe` prerequisites. For detailed steps refer [TorchServe installation documentation](../README.md#install-torchserve).\n+\n+* Install additional Python modules to run the unit tests and linting using following commands\n+\n+```bash\n+cd <path_to_serve>", "originalCommit": "2d398d2b99696d8209c0f93f7b3bd805687b80e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc1NTk1Mg==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r425755952", "bodyText": "User could be anywhere on the terminal, just making sure we are at the correct path before executing the next command.", "author": "harshbafna", "createdAt": "2020-05-15T12:05:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU3ODExMQ=="}], "type": "inlineReview"}, {"oid": "a41b5d4efa117f229441581aa47fbf192d0cbbe6", "url": "https://github.com/pytorch/serve/commit/a41b5d4efa117f229441581aa47fbf192d0cbbe6", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-18T08:21:44Z", "type": "commit"}, {"oid": "2f81f9bf17b46ce87e401790cfea6fdc9f8a16ad", "url": "https://github.com/pytorch/serve/commit/2f81f9bf17b46ce87e401790cfea6fdc9f8a16ad", "message": "added requirements.txt", "committedDate": "2020-05-18T08:35:41Z", "type": "commit"}, {"oid": "8212a93557255c907ccfb7ae3c451314188d93e6", "url": "https://github.com/pytorch/serve/commit/8212a93557255c907ccfb7ae3c451314188d93e6", "message": "removed old ci specific requirements.txt and corresponding reference in buildspec.yaml", "committedDate": "2020-05-18T08:36:57Z", "type": "commit"}, {"oid": "9dd1651b6ef00881b1e875b426c5cd20deab2a8c", "url": "https://github.com/pytorch/serve/commit/9dd1651b6ef00881b1e875b426c5cd20deab2a8c", "message": "pylint changes per latest release", "committedDate": "2020-05-18T08:50:47Z", "type": "commit"}, {"oid": "4dfd607372f8c3372e8f2c6fb58efcf13bb1f03f", "url": "https://github.com/pytorch/serve/commit/4dfd607372f8c3372e8f2c6fb58efcf13bb1f03f", "message": "updated documentation", "committedDate": "2020-05-18T11:50:29Z", "type": "commit"}, {"oid": "89c748332e436307ebb822e46d063d869973bb13", "url": "https://github.com/pytorch/serve/commit/89c748332e436307ebb822e46d063d869973bb13", "message": "updated code coverage doc", "committedDate": "2020-05-18T12:02:45Z", "type": "commit"}, {"oid": "703eaa59b6e4190ac9d1862b6025209010e6a748", "url": "https://github.com/pytorch/serve/commit/703eaa59b6e4190ac9d1862b6025209010e6a748", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-18T21:57:33Z", "type": "commit"}, {"oid": "bd25e0377e96e0600f93dd52b20e5903803e2e40", "url": "https://github.com/pytorch/serve/commit/bd25e0377e96e0600f93dd52b20e5903803e2e40", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-19T03:52:01Z", "type": "commit"}, {"oid": "d9fc7322b1718ff2fafb114d7b1981691cc02219", "url": "https://github.com/pytorch/serve/commit/d9fc7322b1718ff2fafb114d7b1981691cc02219", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-21T00:37:12Z", "type": "commit"}, {"oid": "6c6baee3bc3c6490394bbde659b3b2a9c0d168a9", "url": "https://github.com/pytorch/serve/commit/6c6baee3bc3c6490394bbde659b3b2a9c0d168a9", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-21T17:23:20Z", "type": "commit"}, {"oid": "c24083ee9d9547cbc1f0532e8a1d32cd2ed2e3b5", "url": "https://github.com/pytorch/serve/commit/c24083ee9d9547cbc1f0532e8a1d32cd2ed2e3b5", "message": "merged statging and resolved conflicts", "committedDate": "2020-05-22T08:23:41Z", "type": "commit"}, {"oid": "d4c1239a8120a2ec3a0a5ab34f9197ef9f9d489d", "url": "https://github.com/pytorch/serve/commit/d4c1239a8120a2ec3a0a5ab34f9197ef9f9d489d", "message": "fixed requirement installation order", "committedDate": "2020-05-22T13:24:49Z", "type": "commit"}, {"oid": "df673e3e6d6df0b216fe0f355d803a4d9200bed2", "url": "https://github.com/pytorch/serve/commit/df673e3e6d6df0b216fe0f355d803a4d9200bed2", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-22T17:01:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2ODMzNg==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r429368336", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    except RuntimeError as e: # pylint: disable=unused-variable\n          \n          \n            \n                    except RuntimeError:", "author": "maaquib", "createdAt": "2020-05-22T17:25:00Z", "path": "ts/torch_handler/base_handler.py", "diffHunk": "@@ -44,7 +44,7 @@ def initialize(self, ctx):\n         try:\n             logger.debug('Loading torchscript model')\n             self.model = torch.jit.load(model_pt_path)\n-        except RuntimeError as e:\n+        except RuntimeError as e: # pylint: disable=unused-variable", "originalCommit": "df673e3e6d6df0b216fe0f355d803a4d9200bed2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2OTY2MQ==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r429369661", "bodyText": "Whats the diff b/w the UT and IT coverage reports? Should these be written to two separate files, to avoid UT coverage being overwritten by IT coverage", "author": "maaquib", "createdAt": "2020-05-22T17:28:02Z", "path": "docs/code_coverage.md", "diffHunk": "@@ -1,30 +1,54 @@\n-# Execute unit testing and generate a code coverage report\n-\n-## Prerequisites\n-\n-You need some additional Python modules to run the unit tests and linting.\n+## To check branch stability run the sanity suite as follows\n \n ```bash\n-pip install mock pytest pylint pytest-mock pytest-cov\n-cd serve\n ./torchserve_sanity.sh\n ```\n \n-**The above command executes the following**\n+## To run frontend build suite run following command\n+\n+```bash\n+frontend/gradlew -p frontend clean build\n+```\n \n-* TorchServe frontend build suite which consists of :\n+TorchServe frontend build suite consists of :\n \n   * checkstyle\n   * findbugs\n   * PMD\n   * UT\n+  \n+The reports are generated at following path : `frontend/server/build/reports`\n \n-* TorchServe backend pytest suite\n+## To run backend pytest suite run following command\n \n-* torch-model-archive pytest suite\n+```bash\n+python -m pytest --cov-report html:htmlcov --cov=ts/ ts/tests/unit_tests/\n+```\n+\n+The reports are generated at following path : `htmlcov/`\n+\n+## To run python linting on `ts` package run following command\n+\n+```bash\n+pylint -rn --rcfile=./ts/tests/pylintrc ts/.;\n+```\n+\n+## To run pytest suite on model-archiver run following command\n+\n+```bash\n+python -m pytest --cov-report html:htmlcov --cov=model_archiver/ model_archiver/tests/unit_tests/\n+```\n+\n+The reports are generated at following path : `model-archiver/htmlcov/`\n+\n+## To run IT suite on model-archiver run following command\n+\n+```bash\n+cd model-archiver\n+pip install .\n+python -m pytest --cov-report html:htmlcov --cov=model_archiver/ model_archiver/tests/integ_tests/\n+```\n \n-The reports can be accessed at the following paths:\n+The reports are generated at following path : `model-archiver/htmlcov/`", "originalCommit": "df673e3e6d6df0b216fe0f355d803a4d9200bed2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg3NDI3OA==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r429874278", "bodyText": "Done.", "author": "harshbafna", "createdAt": "2020-05-25T11:01:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2OTY2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM3MTk3Mg==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r429371972", "bodyText": "We should not remove the Conda install instructions for Linux and Mac", "author": "maaquib", "createdAt": "2020-05-22T17:33:01Z", "path": "README.md", "diffHunk": "@@ -13,86 +13,38 @@ TorchServe is a flexible and easy to use tool for serving PyTorch models.\n \n ## Install TorchServe\n \n-Conda instructions are provided in more detail, but you may also use `pip` and `virtualenv` if that is your preference.\n-**Note:** Java 11 is required. Instructions for installing Java 11 for Ubuntu or macOS are provided in the [Install with Conda](#install-with-conda) section.\n-\n-### Install with pip\n-\n-1. Install Java 11\n-\n-    ```bash\n-    sudo apt-get install openjdk-11-jdk\n-    ```\n-\n-1. Use `pip` to install TorchServe and the model archiver:\n-\n-    ``` bash\n-    pip install torch torchtext torchvision sentencepiece psutil future\n-    pip install torchserve torch-model-archiver\n-    ```\n-\n-### Install with Conda\n-**Note:** For Conda, Python 3.8 is required to run Torchserve\n-\n-#### Ubuntu\n-\n 1. Install Java 11\n \n+    For Ubuntu\n     ```bash\n     sudo apt-get install openjdk-11-jdk\n     ```\n-\n-1. Install Conda (https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html)", "originalCommit": "df673e3e6d6df0b216fe0f355d803a4d9200bed2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTUxNTE3MQ==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r429515171", "bodyText": "@maaquib : We have tried to simplify the installation steps as much as possible.\n\ninstall java\n\nThis step is independent of python environment\n\n\ninstall python dependencies through requirements.txt\n\nThis will always install the dependencies using pip irrespective of the conda or pip environment.\n\n\ninstall torchserve and torch-model-archiver from conda/PyPi repo based on your environment.\n\nThis is the only step which requires conda/pip specific commands which we have added.\n\n\n\nGuide to install conda only provides steps for setting up a python virtual environment which should not be a part of torchserve installation doc. Or Else we should have a separate section for setting up a virtual env using conda/pyenv/virtualenv/venv etc.\nThoughts?", "author": "harshbafna", "createdAt": "2020-05-23T05:08:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM3MTk3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2ODQ4Mg==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r429568482", "bodyText": "@harshbafna Just added review comment. That should be good enough. Let me know what you think.", "author": "maaquib", "createdAt": "2020-05-23T18:36:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM3MTk3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg2MjU2Nw==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r429862567", "bodyText": "@maaquib : merged the review comments, resolving this conversation.", "author": "harshbafna", "createdAt": "2020-05-25T10:31:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM3MTk3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU2ODMyOQ==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r429568329", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                For Conda\n          \n          \n            \n                For [Conda](https://docs.conda.io/projects/conda/en/latest/user-guide/install)", "author": "maaquib", "createdAt": "2020-05-23T18:34:57Z", "path": "README.md", "diffHunk": "@@ -13,86 +13,38 @@ TorchServe is a flexible and easy to use tool for serving PyTorch models.\n \n ## Install TorchServe\n \n-Conda instructions are provided in more detail, but you may also use `pip` and `virtualenv` if that is your preference.\n-**Note:** Java 11 is required. Instructions for installing Java 11 for Ubuntu or macOS are provided in the [Install with Conda](#install-with-conda) section.\n-\n-### Install with pip\n-\n-1. Install Java 11\n-\n-    ```bash\n-    sudo apt-get install openjdk-11-jdk\n-    ```\n-\n-1. Use `pip` to install TorchServe and the model archiver:\n-\n-    ``` bash\n-    pip install torch torchtext torchvision sentencepiece psutil future\n-    pip install torchserve torch-model-archiver\n-    ```\n-\n-### Install with Conda\n-**Note:** For Conda, Python 3.8 is required to run Torchserve\n-\n-#### Ubuntu\n-\n 1. Install Java 11\n \n+    For Ubuntu\n     ```bash\n     sudo apt-get install openjdk-11-jdk\n     ```\n-\n-1. Install Conda (https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html)\n-1. Create an environment and install torchserve and torch-model-archiver\n-    For CPU\n-\n-    ```bash\n-    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch torchtext torchvision -c pytorch -c powerai\n-    ```\n-\n-    For GPU\n-\n-    ```bash\n-    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch torchtext torchvision cudatoolkit=10.1 -c pytorch -c powerai\n-    ```\n-\n-1. Activate the environment\n-\n-    ```bash\n-    source activate torchserve\n-    ```\n-\n-2. Optional if using torchtext models\n-    ```bash\n-    pip install sentencepiece\n-    ```\n-\n-#### macOS\n-\n-1. Install Java 11\n-\n+   \n+   For Mac\n     ```bash\n     brew tap AdoptOpenJDK/openjdk\n     brew cask install adoptopenjdk11\n     ```\n \n-1. Install Conda (https://docs.conda.io/projects/conda/en/latest/user-guide/install/macos.html)\n-1. Create an environment and install torchserve and torch-model-archiver\n+2. Install python pre-requisite packages\n \n     ```bash\n-    conda create --name torchserve torchserve torch-model-archiver psutil future pytorch torchtext torchvision -c pytorch -c powerai\n+    pip install -U -r requirements.txt\n     ```\n \n-1. Activate the environment\n+3. Install torchserve and torch-model-archiver\n \n-    ```bash\n-    source activate torchserve\n+    For Conda", "originalCommit": "df673e3e6d6df0b216fe0f355d803a4d9200bed2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "96c2c3f9a3c70b72be69b0e42784e94978e169f4", "url": "https://github.com/pytorch/serve/commit/96c2c3f9a3c70b72be69b0e42784e94978e169f4", "message": "Incorporated code review comments\n\nCo-authored-by: Aaqib <maaquib@gmail.com>", "committedDate": "2020-05-25T10:09:53Z", "type": "commit"}, {"oid": "5123d926f663ec649533315bd4ab534b35615cfb", "url": "https://github.com/pytorch/serve/commit/5123d926f663ec649533315bd4ab534b35615cfb", "message": "renamed report generation directory for model-archiver ut and it", "committedDate": "2020-05-25T11:01:21Z", "type": "commit"}, {"oid": "97c33ed9c32d6ce5ab1e816c1b543cb717216b88", "url": "https://github.com/pytorch/serve/commit/97c33ed9c32d6ce5ab1e816c1b543cb717216b88", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-25T11:02:49Z", "type": "commit"}, {"oid": "bb6786d4205e63ca4da7e1f94e6304459acd6940", "url": "https://github.com/pytorch/serve/commit/bb6786d4205e63ca4da7e1f94e6304459acd6940", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-27T17:18:43Z", "type": "commit"}, {"oid": "4c52bb88b22eaec2280480377b40d6d9ce94fec9", "url": "https://github.com/pytorch/serve/commit/4c52bb88b22eaec2280480377b40d6d9ce94fec9", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-05-28T04:15:41Z", "type": "commit"}, {"oid": "500b3e5e3a581b278f0dad7bacc77685326fc589", "url": "https://github.com/pytorch/serve/commit/500b3e5e3a581b278f0dad7bacc77685326fc589", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-06-04T17:05:38Z", "type": "commit"}, {"oid": "88402c27c6fd57c3362634e2723eb14db3dfc1d4", "url": "https://github.com/pytorch/serve/commit/88402c27c6fd57c3362634e2723eb14db3dfc1d4", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-06-06T03:15:27Z", "type": "commit"}, {"oid": "171b6478b644723fa64a878ed4f564d10b86e1d9", "url": "https://github.com/pytorch/serve/commit/171b6478b644723fa64a878ed4f564d10b86e1d9", "message": "Merge branch 'staging_0_1_1' into issue_222", "committedDate": "2020-06-10T03:02:28Z", "type": "commit"}, {"oid": "c7a2bba0b5d81a0a7f3c621012aa8b926b8246d3", "url": "https://github.com/pytorch/serve/commit/c7a2bba0b5d81a0a7f3c621012aa8b926b8246d3", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-06-19T06:01:54Z", "type": "commit"}, {"oid": "bd5f4ab022620855717cddd77a14d2e60523f57c", "url": "https://github.com/pytorch/serve/commit/bd5f4ab022620855717cddd77a14d2e60523f57c", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-06-24T17:50:44Z", "type": "commit"}, {"oid": "61f2f2f81e10ac0cc56377fed2622de94a3d3fe6", "url": "https://github.com/pytorch/serve/commit/61f2f2f81e10ac0cc56377fed2622de94a3d3fe6", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-06-26T11:34:53Z", "type": "commit"}, {"oid": "6429ea1ffe6eb7a0135f49b9f2800220b31bb616", "url": "https://github.com/pytorch/serve/commit/6429ea1ffe6eb7a0135f49b9f2800220b31bb616", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-03T08:15:18Z", "type": "commit"}, {"oid": "130ee4e41d0e020e696765231a3c24c6748af799", "url": "https://github.com/pytorch/serve/commit/130ee4e41d0e020e696765231a3c24c6748af799", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-07T03:28:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE2OTY3OQ==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r451169679", "bodyText": "What's the reason for reverting this?", "author": "maaquib", "createdAt": "2020-07-07T22:03:01Z", "path": "test/regression_tests.sh", "diffHunk": "@@ -28,9 +28,6 @@ install_torchserve_from_source() {\n   cd serve\n   echo \"Installing torchserve torch-model-archiver from source\"\n   ./scripts/install_from_src_ubuntu\n-  echo \"TS Branch : \" $(git rev-parse --abbrev-ref HEAD) >> $3\n-  echo \"TS Branch Commit Id : \" $(git rev-parse HEAD) >> $3\n-  echo \"Build date : \" $(date) >> $3", "originalCommit": "130ee4e41d0e020e696765231a3c24c6748af799", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI2OTE2Ng==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r451269166", "bodyText": "This got introduced while rebasing from staging_0_1_1 branch to master and didn't show up as a conflict, reverted these unwanted changes.", "author": "harshbafna", "createdAt": "2020-07-08T04:01:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE2OTY3OQ=="}], "type": "inlineReview"}, {"oid": "bf2e9655f82d34ce9b4fddb58b6d72c097130380", "url": "https://github.com/pytorch/serve/commit/bf2e9655f82d34ce9b4fddb58b6d72c097130380", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-08T03:53:19Z", "type": "commit"}, {"oid": "ebd2083eb190e79dfb0709e45d92366034c2a89d", "url": "https://github.com/pytorch/serve/commit/ebd2083eb190e79dfb0709e45d92366034c2a89d", "message": "removed unwanted changes", "committedDate": "2020-07-08T03:57:39Z", "type": "commit"}, {"oid": "727073753229a65b65cb24bdeac98f20006dc992", "url": "https://github.com/pytorch/serve/commit/727073753229a65b65cb24bdeac98f20006dc992", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-15T05:47:37Z", "type": "commit"}, {"oid": "3eed31c3f0e605c24367299388add630688ea92d", "url": "https://github.com/pytorch/serve/commit/3eed31c3f0e605c24367299388add630688ea92d", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-18T01:56:57Z", "type": "commit"}, {"oid": "ee8a8bab1a4920adbe0add3f3b92f4ff26894151", "url": "https://github.com/pytorch/serve/commit/ee8a8bab1a4920adbe0add3f3b92f4ff26894151", "message": "resolved conflicts with master", "committedDate": "2020-07-21T15:12:11Z", "type": "commit"}, {"oid": "3e2e03fcf42985f40133f2d651ed6d4b9b53f517", "url": "https://github.com/pytorch/serve/commit/3e2e03fcf42985f40133f2d651ed6d4b9b53f517", "message": "fixed run command", "committedDate": "2020-07-21T15:18:21Z", "type": "commit"}, {"oid": "ef5706fa091efdd539609508bf7400105171ca15", "url": "https://github.com/pytorch/serve/commit/ef5706fa091efdd539609508bf7400105171ca15", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-21T15:20:30Z", "type": "commit"}, {"oid": "6808e205385f5193ace27d8795eded1145d84e94", "url": "https://github.com/pytorch/serve/commit/6808e205385f5193ace27d8795eded1145d84e94", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-22T12:55:35Z", "type": "commit"}, {"oid": "257b2e0e86a5681c1d849834e77ca77c7b8cb420", "url": "https://github.com/pytorch/serve/commit/257b2e0e86a5681c1d849834e77ca77c7b8cb420", "message": "removed unused docker files", "committedDate": "2020-07-22T13:11:50Z", "type": "commit"}, {"oid": "6eb4cacc06d7b847c019084fd529818a90420901", "url": "https://github.com/pytorch/serve/commit/6eb4cacc06d7b847c019084fd529818a90420901", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-22T15:07:05Z", "type": "commit"}, {"oid": "a8ee55048b3a70a37c1ac4b4449683792212eb18", "url": "https://github.com/pytorch/serve/commit/a8ee55048b3a70a37c1ac4b4449683792212eb18", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-22T19:40:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA3MDk5Nw==", "url": "https://github.com/pytorch/serve/pull/228#discussion_r459070997", "bodyText": "NIT:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For the latest version, you can use the `latest-gpu` tag:\n          \n          \n            \n            For the latest version, you can use the `gpu-latest` tag:", "author": "maaquib", "createdAt": "2020-07-22T20:42:50Z", "path": "docker/README.md", "diffHunk": "@@ -63,7 +63,7 @@ docker run --rm -it --gpus all -p 8080:8080 -p 8081:8081 pytorch/torchserve:0.1.\n \n For the latest version, you can use the `latest-gpu` tag:", "originalCommit": "a8ee55048b3a70a37c1ac4b4449683792212eb18", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "37f67a114d78781be5e27aaec8f1c1d6f7be97f0", "url": "https://github.com/pytorch/serve/commit/37f67a114d78781be5e27aaec8f1c1d6f7be97f0", "message": "Merge branch 'master' into issue_222", "committedDate": "2020-07-23T15:34:04Z", "type": "commit"}]}