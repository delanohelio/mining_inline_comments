{"pr_number": 176, "pr_title": "doc review of default_handlers and logging", "pr_createdAt": "2020-04-09T21:11:05Z", "pr_url": "https://github.com/pytorch/serve/pull/176", "timeline": [{"oid": "4355518182639b559a4d576d1beebd728f1c8ed9", "url": "https://github.com/pytorch/serve/commit/4355518182639b559a4d576d1beebd728f1c8ed9", "message": "doc review of defulat_handlers and logging", "committedDate": "2020-04-09T21:09:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg4NTY0NA==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406885644", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Description : Handles image classification models trained on imagenet dataset.\n          \n          \n            \n            * Description : Handles image classification models trained on the ImageNet dataset.", "author": "aaronmarkham", "createdAt": "2020-04-10T18:30:58Z", "path": "docs/default_handlers.md", "diffHunk": "@@ -1,36 +1,35 @@\n # TorchServe default inference handlers\n \n-TorchServe provides following inference handlers out of box :\n+TorchServe provides following inference handlers out of box:\n \n ## image_classifier\n \n- * Description : Handles image classification models trained on imagenet dataset.\n- * Input : RGB image\n- * Output : Top 5 predictions and their respective probability of the image\n+* Description : Handles image classification models trained on imagenet dataset.", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg4OTM2NA==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406889364", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Description : Handles image segmentation models trained on imagenet dataset.\n          \n          \n            \n            * Description : Handles image segmentation models trained on the ImageNet dataset.", "author": "aaronmarkham", "createdAt": "2020-04-10T18:39:56Z", "path": "docs/default_handlers.md", "diffHunk": "@@ -1,36 +1,35 @@\n # TorchServe default inference handlers\n \n-TorchServe provides following inference handlers out of box :\n+TorchServe provides following inference handlers out of box:\n \n ## image_classifier\n \n- * Description : Handles image classification models trained on imagenet dataset.\n- * Input : RGB image\n- * Output : Top 5 predictions and their respective probability of the image\n+* Description : Handles image classification models trained on imagenet dataset.\n+* Input : RGB image\n+* Output : Top 5 predictions and their respective probability of the image\n+\n+For more details see [examples](../examples/image_classifier)\n \n-For more details refer [examples](../examples/image_classifier)\n- \n ## image_segmenter\n \n- * Description : Handles image segmentation models trained on imagenet dataset.\n- * Input : RGB image\n- * Output : Output shape as [CL H W], CL - number of classes, H - height and W - width.\n+* Description : Handles image segmentation models trained on imagenet dataset.", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5MDI3Nw==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406890277", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Description : Handles models trained on imagenet dataset.\n          \n          \n            \n            * Description : Handles models trained on the ImageNet dataset.", "author": "aaronmarkham", "createdAt": "2020-04-10T18:42:09Z", "path": "docs/default_handlers.md", "diffHunk": "@@ -1,36 +1,35 @@\n # TorchServe default inference handlers\n \n-TorchServe provides following inference handlers out of box :\n+TorchServe provides following inference handlers out of box:\n \n ## image_classifier\n \n- * Description : Handles image classification models trained on imagenet dataset.\n- * Input : RGB image\n- * Output : Top 5 predictions and their respective probability of the image\n+* Description : Handles image classification models trained on imagenet dataset.\n+* Input : RGB image\n+* Output : Top 5 predictions and their respective probability of the image\n+\n+For more details see [examples](../examples/image_classifier)\n \n-For more details refer [examples](../examples/image_classifier)\n- \n ## image_segmenter\n \n- * Description : Handles image segmentation models trained on imagenet dataset.\n- * Input : RGB image\n- * Output : Output shape as [CL H W], CL - number of classes, H - height and W - width.\n+* Description : Handles image segmentation models trained on imagenet dataset.\n+* Input : RGB image\n+* Output : Output shape as [CL H W], CL - number of classes, H - height and W - width.\n \n-For more details refer [examples](../examples/image_segmenter)\n+For more details see [examples](../examples/image_segmenter)\n \n ## object_detector\n \n- * Description : Handles object detection models.\n- * Input : RGB image\n- * Output : List of detected classes and bounding boxes respectively \n+* Description : Handles object detection models.\n+* Input : RGB image\n+* Output : List of detected classes and bounding boxes respectively \n \n-For more details refer [examples](../examples/object_detector) \n+For more details see [examples](../examples/object_detector) \n \n ## text_classifier\n \n- * Description : Handles models trained on imagenet dataset.\n- * Input : text file\n- * Output : Class of input text\n- \n-For more details refer [examples](../examples/text_classification)\n- \n+* Description : Handles models trained on imagenet dataset.", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5MDc4NA==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406890784", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Output : Output shape as [CL H W], CL - number of classes, H - height and W - width.\n          \n          \n            \n            * Output : Output shape as [CL H W], CL - number of classes, H - height and W - width.\n          \n      \n    \n    \n  \n\nI don't get this. It should be the identified class or class ID, not number of total classes.", "author": "aaronmarkham", "createdAt": "2020-04-10T18:43:28Z", "path": "docs/default_handlers.md", "diffHunk": "@@ -1,36 +1,35 @@\n # TorchServe default inference handlers\n \n-TorchServe provides following inference handlers out of box :\n+TorchServe provides following inference handlers out of box:\n \n ## image_classifier\n \n- * Description : Handles image classification models trained on imagenet dataset.\n- * Input : RGB image\n- * Output : Top 5 predictions and their respective probability of the image\n+* Description : Handles image classification models trained on imagenet dataset.\n+* Input : RGB image\n+* Output : Top 5 predictions and their respective probability of the image\n+\n+For more details see [examples](../examples/image_classifier)\n \n-For more details refer [examples](../examples/image_classifier)\n- \n ## image_segmenter\n \n- * Description : Handles image segmentation models trained on imagenet dataset.\n- * Input : RGB image\n- * Output : Output shape as [CL H W], CL - number of classes, H - height and W - width.\n+* Description : Handles image segmentation models trained on imagenet dataset.\n+* Input : RGB image\n+* Output : Output shape as [CL H W], CL - number of classes, H - height and W - width.", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkxNDM3MQ==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406914371", "bodyText": "I believe this is correct as is. Let' talk offline.", "author": "eslesar-aws", "createdAt": "2020-04-10T19:47:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5MDc4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5MTA1Ng==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406891056", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Be familiar with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by orchServe.\n          \n          \n            \n            * Be familiar with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by TorchServe.", "author": "aaronmarkham", "createdAt": "2020-04-10T18:44:05Z", "path": "docs/logging.md", "diffHunk": "@@ -1,20 +1,26 @@\n-# Logging on Torchserve\n+# Logging in Torchserve\n \n-In this document we will go through logging mechanism in TorchServe. We will also go over how to modify the behavior of logging in model-server. Logging in TorchServe also covers\n-metrics, as metrics are logged into a file. To further understand how to customize metrics or define custom logging layouts, refer to the [metrics document](metrics.md)\n+In this document we explain logging in TorchServe. We also explain how to modify the behavior of logging in the model server.\n+Logging in TorchServe also covers metrics, as metrics are logged into a file.\n+To further understand how to customize metrics or define custom logging layouts, see [Metrics on TorchServe](metrics.md)\n \n-# Pre-requisites\n-Before getting into this tutorials, you must familiarize yourself with log4j configuration properties. Refer to this online [document](https://logging.apache.org/log4j/2.x/manual/configuration.html)\n-on how to configure the log4j parameters. Similarly, familiarize yourself with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by \n-TorchServe. \n+## Pre-requisites\n+\n+* Be familiar with log4j configuration properties.\n+For information on how to configure log4j parameters, see [Logging Services](https://logging.apache.org/log4j/2.x/manual/configuration.html).\n+* Be familiar with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by orchServe.", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5MTE4Mg==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406891182", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            1. Access Logs.\n          \n          \n            \n            1. Access logs", "author": "aaronmarkham", "createdAt": "2020-04-10T18:44:26Z", "path": "docs/logging.md", "diffHunk": "@@ -1,20 +1,26 @@\n-# Logging on Torchserve\n+# Logging in Torchserve\n \n-In this document we will go through logging mechanism in TorchServe. We will also go over how to modify the behavior of logging in model-server. Logging in TorchServe also covers\n-metrics, as metrics are logged into a file. To further understand how to customize metrics or define custom logging layouts, refer to the [metrics document](metrics.md)\n+In this document we explain logging in TorchServe. We also explain how to modify the behavior of logging in the model server.\n+Logging in TorchServe also covers metrics, as metrics are logged into a file.\n+To further understand how to customize metrics or define custom logging layouts, see [Metrics on TorchServe](metrics.md)\n \n-# Pre-requisites\n-Before getting into this tutorials, you must familiarize yourself with log4j configuration properties. Refer to this online [document](https://logging.apache.org/log4j/2.x/manual/configuration.html)\n-on how to configure the log4j parameters. Similarly, familiarize yourself with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by \n-TorchServe. \n+## Pre-requisites\n+\n+* Be familiar with log4j configuration properties.\n+For information on how to configure log4j parameters, see [Logging Services](https://logging.apache.org/log4j/2.x/manual/configuration.html).\n+* Be familiar with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by orchServe.\n \n # Types of logs\n-Torchserve currently provides three types of logs.\n+\n+TorchServe currently provides the following types of logs\n+\n 1. Access Logs.", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5MTI1Ng==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406891256", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            1. TorchServe Logs.\n          \n          \n            \n            1. TorchServe logs", "author": "aaronmarkham", "createdAt": "2020-04-10T18:44:40Z", "path": "docs/logging.md", "diffHunk": "@@ -1,20 +1,26 @@\n-# Logging on Torchserve\n+# Logging in Torchserve\n \n-In this document we will go through logging mechanism in TorchServe. We will also go over how to modify the behavior of logging in model-server. Logging in TorchServe also covers\n-metrics, as metrics are logged into a file. To further understand how to customize metrics or define custom logging layouts, refer to the [metrics document](metrics.md)\n+In this document we explain logging in TorchServe. We also explain how to modify the behavior of logging in the model server.\n+Logging in TorchServe also covers metrics, as metrics are logged into a file.\n+To further understand how to customize metrics or define custom logging layouts, see [Metrics on TorchServe](metrics.md)\n \n-# Pre-requisites\n-Before getting into this tutorials, you must familiarize yourself with log4j configuration properties. Refer to this online [document](https://logging.apache.org/log4j/2.x/manual/configuration.html)\n-on how to configure the log4j parameters. Similarly, familiarize yourself with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by \n-TorchServe. \n+## Pre-requisites\n+\n+* Be familiar with log4j configuration properties.\n+For information on how to configure log4j parameters, see [Logging Services](https://logging.apache.org/log4j/2.x/manual/configuration.html).\n+* Be familiar with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by orchServe.\n \n # Types of logs\n-Torchserve currently provides three types of logs.\n+\n+TorchServe currently provides the following types of logs\n+\n 1. Access Logs.\n 1. TorchServe Logs.", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5MTM4Mg==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406891382", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            These logs collect the access pattern to Torchserve. The configuration for access logs are as follows:\n          \n          \n            \n            These logs collect the access pattern to TorchServe. The configuration for access logs are as follows:", "author": "aaronmarkham", "createdAt": "2020-04-10T18:44:56Z", "path": "docs/logging.md", "diffHunk": "@@ -1,20 +1,26 @@\n-# Logging on Torchserve\n+# Logging in Torchserve\n \n-In this document we will go through logging mechanism in TorchServe. We will also go over how to modify the behavior of logging in model-server. Logging in TorchServe also covers\n-metrics, as metrics are logged into a file. To further understand how to customize metrics or define custom logging layouts, refer to the [metrics document](metrics.md)\n+In this document we explain logging in TorchServe. We also explain how to modify the behavior of logging in the model server.\n+Logging in TorchServe also covers metrics, as metrics are logged into a file.\n+To further understand how to customize metrics or define custom logging layouts, see [Metrics on TorchServe](metrics.md)\n \n-# Pre-requisites\n-Before getting into this tutorials, you must familiarize yourself with log4j configuration properties. Refer to this online [document](https://logging.apache.org/log4j/2.x/manual/configuration.html)\n-on how to configure the log4j parameters. Similarly, familiarize yourself with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by \n-TorchServe. \n+## Pre-requisites\n+\n+* Be familiar with log4j configuration properties.\n+For information on how to configure log4j parameters, see [Logging Services](https://logging.apache.org/log4j/2.x/manual/configuration.html).\n+* Be familiar with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by orchServe.\n \n # Types of logs\n-Torchserve currently provides three types of logs.\n+\n+TorchServe currently provides the following types of logs\n+\n 1. Access Logs.\n 1. TorchServe Logs.\n \n-## Access Logs:\n-These logs collect the access pattern to Torchserve. The configuration pertaining to access logs are as follows,\n+## Access Logs\n+\n+These logs collect the access pattern to Torchserve. The configuration for access logs are as follows:", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5MzY0Ng==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406893646", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You might want to log custom logs into the log files. This could be for debug purposes or to log any errors.\n          \n          \n            \n            You might want to generate custom logs. This could be for debugging purposes or to log any errors.", "author": "aaronmarkham", "createdAt": "2020-04-10T18:50:53Z", "path": "docs/logging.md", "diffHunk": "@@ -51,55 +61,63 @@ log4j.appender.ts_log.layout = org.apache.log4j.PatternLayout\n log4j.appender.ts_log.layout.ConversionPattern = %d{ISO8601} [%-5p] %t %c - %m%n\n ```\n \n-This configuration by default dumps all the logs above `DEBUG` level. \n+This configuration by default dumps all the logs above `DEBUG` level.\n \n ### Generating and logging custom logs\n-As a user of TorchServe, you might want to log custom logs into the log files. This could be for debug purposes or\n-to log any errors. To accomplish this, simply print the required logs to `stdout/stderr`. TorchServe will capture the logs generated by the \n-backend workers and log it into the log file. Some examples of logs are as follows\n \n-1. Messages printed to stderr \n+You might want to log custom logs into the log files. This could be for debug purposes or to log any errors.", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5NDEzMQ==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406894131", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Modifying the behavior of the logs\n          \n          \n            \n            ## Modify the behavior of the logs", "author": "aaronmarkham", "createdAt": "2020-04-10T18:52:08Z", "path": "docs/logging.md", "diffHunk": "@@ -51,55 +61,63 @@ log4j.appender.ts_log.layout = org.apache.log4j.PatternLayout\n log4j.appender.ts_log.layout.ConversionPattern = %d{ISO8601} [%-5p] %t %c - %m%n\n ```\n \n-This configuration by default dumps all the logs above `DEBUG` level. \n+This configuration by default dumps all the logs above `DEBUG` level.\n \n ### Generating and logging custom logs\n-As a user of TorchServe, you might want to log custom logs into the log files. This could be for debug purposes or\n-to log any errors. To accomplish this, simply print the required logs to `stdout/stderr`. TorchServe will capture the logs generated by the \n-backend workers and log it into the log file. Some examples of logs are as follows\n \n-1. Messages printed to stderr \n+You might want to log custom logs into the log files. This could be for debug purposes or to log any errors.\n+To do this, print the required logs to `stdout/stderr`.\n+TorchServe captures the logs generated by the backend workers and logs it into the log file. Some examples of logs are as follows:\n+\n+1. Messages printed to stderr:\n+\n ```text\n 2018-10-14 16:46:51,656 [WARN ] W-9000-stderr org.pytorch.serve.wlm.WorkerLifeCycle - [16:46:51] src/nnvm/legacy_json_util.cc:209: Loading symbol saved by previous version v0.8.0. Attempting to upgrad\\\n e...\n 2018-10-14 16:46:51,657 [WARN ] W-9000-stderr org.pytorch.serve.wlm.WorkerLifeCycle - [16:46:51] src/nnvm/legacy_json_util.cc:217: Symbol successfully upgraded!\n ```\n- \n-1. Messages printed to stdout \n+\n+1. Messages printed to stdout:\n+\n ```text\n 2018-10-14 16:59:59,926 [INFO ] W-9000-stdout org.pytorch.serve.wlm.WorkerLifeCycle - preprocess time: 3.60\n 2018-10-14 16:59:59,926 [INFO ] W-9000-stdout org.pytorch.serve.wlm.WorkerLifeCycle - inference time: 117.31\n 2018-10-14 16:59:59,926 [INFO ] W-9000-stdout org.pytorch.serve.wlm.WorkerLifeCycle - postprocess time: 8.52\n ```\n \n-# Modifying the behavior of the logs\n-In order to modify the default behavior of the logging, you could define `log4j.properties` file. There are two ways of starting\n-TorchServe with custom logs\n+## Modifying the behavior of the logs", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5NDIxNA==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406894214", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### Generating and logging custom logs\n          \n          \n            \n            ## Generate custom logs", "author": "aaronmarkham", "createdAt": "2020-04-10T18:52:21Z", "path": "docs/logging.md", "diffHunk": "@@ -51,55 +61,63 @@ log4j.appender.ts_log.layout = org.apache.log4j.PatternLayout\n log4j.appender.ts_log.layout.ConversionPattern = %d{ISO8601} [%-5p] %t %c - %m%n\n ```\n \n-This configuration by default dumps all the logs above `DEBUG` level. \n+This configuration by default dumps all the logs above `DEBUG` level.\n \n ### Generating and logging custom logs", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5NDQwNw==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406894407", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Types of logs\n          \n          \n            \n            ## Types of logs", "author": "aaronmarkham", "createdAt": "2020-04-10T18:52:52Z", "path": "docs/logging.md", "diffHunk": "@@ -1,20 +1,26 @@\n-# Logging on Torchserve\n+# Logging in Torchserve\n \n-In this document we will go through logging mechanism in TorchServe. We will also go over how to modify the behavior of logging in model-server. Logging in TorchServe also covers\n-metrics, as metrics are logged into a file. To further understand how to customize metrics or define custom logging layouts, refer to the [metrics document](metrics.md)\n+In this document we explain logging in TorchServe. We also explain how to modify the behavior of logging in the model server.\n+Logging in TorchServe also covers metrics, as metrics are logged into a file.\n+To further understand how to customize metrics or define custom logging layouts, see [Metrics on TorchServe](metrics.md)\n \n-# Pre-requisites\n-Before getting into this tutorials, you must familiarize yourself with log4j configuration properties. Refer to this online [document](https://logging.apache.org/log4j/2.x/manual/configuration.html)\n-on how to configure the log4j parameters. Similarly, familiarize yourself with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by \n-TorchServe. \n+## Pre-requisites\n+\n+* Be familiar with log4j configuration properties.\n+For information on how to configure log4j parameters, see [Logging Services](https://logging.apache.org/log4j/2.x/manual/configuration.html).\n+* Be familiar with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by orchServe.\n \n # Types of logs", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5NDQ5Nw==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406894497", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Access Logs\n          \n          \n            \n            ### Access Logs", "author": "aaronmarkham", "createdAt": "2020-04-10T18:53:06Z", "path": "docs/logging.md", "diffHunk": "@@ -1,20 +1,26 @@\n-# Logging on Torchserve\n+# Logging in Torchserve\n \n-In this document we will go through logging mechanism in TorchServe. We will also go over how to modify the behavior of logging in model-server. Logging in TorchServe also covers\n-metrics, as metrics are logged into a file. To further understand how to customize metrics or define custom logging layouts, refer to the [metrics document](metrics.md)\n+In this document we explain logging in TorchServe. We also explain how to modify the behavior of logging in the model server.\n+Logging in TorchServe also covers metrics, as metrics are logged into a file.\n+To further understand how to customize metrics or define custom logging layouts, see [Metrics on TorchServe](metrics.md)\n \n-# Pre-requisites\n-Before getting into this tutorials, you must familiarize yourself with log4j configuration properties. Refer to this online [document](https://logging.apache.org/log4j/2.x/manual/configuration.html)\n-on how to configure the log4j parameters. Similarly, familiarize yourself with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by \n-TorchServe. \n+## Pre-requisites\n+\n+* Be familiar with log4j configuration properties.\n+For information on how to configure log4j parameters, see [Logging Services](https://logging.apache.org/log4j/2.x/manual/configuration.html).\n+* Be familiar with the default [log4j.properties](../frontend/server/src/main/resources/log4j.properties) used by orchServe.\n \n # Types of logs\n-Torchserve currently provides three types of logs.\n+\n+TorchServe currently provides the following types of logs\n+\n 1. Access Logs.\n 1. TorchServe Logs.\n \n-## Access Logs:\n-These logs collect the access pattern to Torchserve. The configuration pertaining to access logs are as follows,\n+## Access Logs", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5NDYxMg==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406894612", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## TorchServe Logs\n          \n          \n            \n            ### TorchServe Logs", "author": "aaronmarkham", "createdAt": "2020-04-10T18:53:23Z", "path": "docs/logging.md", "diffHunk": "@@ -27,18 +33,22 @@ log4j.appender.access_log.layout = org.apache.log4j.PatternLayout\n log4j.appender.access_log.layout.ConversionPattern = %d{ISO8601} - %m%n\n ```\n \n-As defined in the properties file, the access logs are collected in {LOG_LOCATION}/access_log.log file. When we load the TorchServe\n-with a model and run inference against the server, the following logs are collected into the access_log.log\n+As defined in the properties file, the access logs are collected in {LOG_LOCATION}/access_log.log file.\n+When you load TorchServe with a model and run inference against the server, the following logs are collected into the access_log.log:\n+\n ```text\n 2018-10-15 13:56:18,976 [INFO ] BackendWorker-9000 ACCESS_LOG - /127.0.0.1:64003 \"POST /predictions/resnet-18 HTTP/1.1\" 200 118\n ```\n+\n The above log tells us that a successful `POST` call to `/predictions/resnet-18` was made by remote host `127.0.0.1:64003` it took `118`ms to complete this request.\n \n These logs are useful to determine the current performance of the model-server as well as understand the requests received by model-server.\n \n ## TorchServe Logs", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg5NTE5OA==", "url": "https://github.com/pytorch/serve/pull/176#discussion_r406895198", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### Provide with CLI\n          \n          \n            \n            ## Log with the TorchServe CLI", "author": "aaronmarkham", "createdAt": "2020-04-10T18:54:45Z", "path": "docs/logging.md", "diffHunk": "@@ -51,55 +61,63 @@ log4j.appender.ts_log.layout = org.apache.log4j.PatternLayout\n log4j.appender.ts_log.layout.ConversionPattern = %d{ISO8601} [%-5p] %t %c - %m%n\n ```\n \n-This configuration by default dumps all the logs above `DEBUG` level. \n+This configuration by default dumps all the logs above `DEBUG` level.\n \n ### Generating and logging custom logs\n-As a user of TorchServe, you might want to log custom logs into the log files. This could be for debug purposes or\n-to log any errors. To accomplish this, simply print the required logs to `stdout/stderr`. TorchServe will capture the logs generated by the \n-backend workers and log it into the log file. Some examples of logs are as follows\n \n-1. Messages printed to stderr \n+You might want to log custom logs into the log files. This could be for debug purposes or to log any errors.\n+To do this, print the required logs to `stdout/stderr`.\n+TorchServe captures the logs generated by the backend workers and logs it into the log file. Some examples of logs are as follows:\n+\n+1. Messages printed to stderr:\n+\n ```text\n 2018-10-14 16:46:51,656 [WARN ] W-9000-stderr org.pytorch.serve.wlm.WorkerLifeCycle - [16:46:51] src/nnvm/legacy_json_util.cc:209: Loading symbol saved by previous version v0.8.0. Attempting to upgrad\\\n e...\n 2018-10-14 16:46:51,657 [WARN ] W-9000-stderr org.pytorch.serve.wlm.WorkerLifeCycle - [16:46:51] src/nnvm/legacy_json_util.cc:217: Symbol successfully upgraded!\n ```\n- \n-1. Messages printed to stdout \n+\n+1. Messages printed to stdout:\n+\n ```text\n 2018-10-14 16:59:59,926 [INFO ] W-9000-stdout org.pytorch.serve.wlm.WorkerLifeCycle - preprocess time: 3.60\n 2018-10-14 16:59:59,926 [INFO ] W-9000-stdout org.pytorch.serve.wlm.WorkerLifeCycle - inference time: 117.31\n 2018-10-14 16:59:59,926 [INFO ] W-9000-stdout org.pytorch.serve.wlm.WorkerLifeCycle - postprocess time: 8.52\n ```\n \n-# Modifying the behavior of the logs\n-In order to modify the default behavior of the logging, you could define `log4j.properties` file. There are two ways of starting\n-TorchServe with custom logs\n+## Modifying the behavior of the logs\n+\n+To modify the default logging behavior, define a `log4j.properties` file. There are two ways of starting TorchServe with custom logs:\n \n ### Provide with config.properties\n- Once you define custom `log4j.properties`, add this to the \n-`config.properties` file as follows\n+\n+ After you define a custom `log4j.properties` file, add the following to the `config.properties` file:\n \n ```properties\n vmargs=-Dlog4j.configuration=file:///path/to/custom/log4j.properties\n ```\n-Then start the TorchServe as follows\n+\n+Then start TorchServe as follows:\n+\n ```bash\n-$ torchserve --start --model-store /models --ts-config /path/to/config.properties\n+$ torchserve --start --ts-config /path/to/config.properties\n ```\n-### Provide with CLI \n+\n+### Provide with CLI", "originalCommit": "4355518182639b559a4d576d1beebd728f1c8ed9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "de91cb8d9b2092218f6e20e9cf7216ada650f281", "url": "https://github.com/pytorch/serve/commit/de91cb8d9b2092218f6e20e9cf7216ada650f281", "message": "Apply suggestions from code review\r\n\r\nAccepting suggestions.\n\nCo-Authored-By: Aaron Markham <markhama@amazon.com>", "committedDate": "2020-04-10T19:29:47Z", "type": "commit"}]}