{"pr_number": 585, "pr_title": "Batch inference hf handler", "pr_createdAt": "2020-08-03T20:07:40Z", "pr_url": "https://github.com/pytorch/serve/pull/585", "timeline": [{"oid": "6364a441048d184a86a7e56f23ea18ff691a663b", "url": "https://github.com/pytorch/serve/commit/6364a441048d184a86a7e56f23ea18ff691a663b", "message": "Added batch inference", "committedDate": "2020-08-03T03:43:07Z", "type": "commit"}, {"oid": "174af0e4295cad71394ad0df06558b2c22ed7e96", "url": "https://github.com/pytorch/serve/commit/174af0e4295cad71394ad0df06558b2c22ed7e96", "message": "added the batch inference support", "committedDate": "2020-08-03T18:45:05Z", "type": "commit"}, {"oid": "6d7195a4148b8994cb4ccf71089fb0b2339897ca", "url": "https://github.com/pytorch/serve/commit/6d7195a4148b8994cb4ccf71089fb0b2339897ca", "message": "duplicated file", "committedDate": "2020-08-03T18:49:54Z", "type": "commit"}, {"oid": "3b3aed714c441bed17baa69231e6156f0b37efdb", "url": "https://github.com/pytorch/serve/commit/3b3aed714c441bed17baa69231e6156f0b37efdb", "message": "batch inference text example", "committedDate": "2020-08-03T18:50:50Z", "type": "commit"}, {"oid": "a5c1b8d9a5c0fc0dc893f1b187cd5c68169a6bf3", "url": "https://github.com/pytorch/serve/commit/a5c1b8d9a5c0fc0dc893f1b187cd5c68169a6bf3", "message": "batch inference text example", "committedDate": "2020-08-03T18:51:02Z", "type": "commit"}, {"oid": "717fdef4f092682de790c019d657fc03fb11d2b5", "url": "https://github.com/pytorch/serve/commit/717fdef4f092682de790c019d657fc03fb11d2b5", "message": "batch inference text example", "committedDate": "2020-08-03T18:51:10Z", "type": "commit"}, {"oid": "877a982eef5a9c9b84d3bc28d71bfad072b8a7b7", "url": "https://github.com/pytorch/serve/commit/877a982eef5a9c9b84d3bc28d71bfad072b8a7b7", "message": "batch inference text example", "committedDate": "2020-08-03T18:51:18Z", "type": "commit"}, {"oid": "963c3187312cb3f4071b763875a986602b914f72", "url": "https://github.com/pytorch/serve/commit/963c3187312cb3f4071b763875a986602b914f72", "message": "batch inference text example", "committedDate": "2020-08-03T18:51:28Z", "type": "commit"}, {"oid": "cb06d7ca1621341c8f891091280d865cd755cc39", "url": "https://github.com/pytorch/serve/commit/cb06d7ca1621341c8f891091280d865cd755cc39", "message": "batch inference text example", "committedDate": "2020-08-03T18:51:38Z", "type": "commit"}, {"oid": "5f8fe4f9864158998300ae0c300b5f5bae078100", "url": "https://github.com/pytorch/serve/commit/5f8fe4f9864158998300ae0c300b5f5bae078100", "message": "batch inference text example", "committedDate": "2020-08-03T18:52:16Z", "type": "commit"}, {"oid": "2cc6029cf54dc71f6f162163277a36151cad3c10", "url": "https://github.com/pytorch/serve/commit/2cc6029cf54dc71f6f162163277a36151cad3c10", "message": "batch inference text example", "committedDate": "2020-08-03T18:52:40Z", "type": "commit"}, {"oid": "97671b25e986fe8f3f696cb59283674ce6db3167", "url": "https://github.com/pytorch/serve/commit/97671b25e986fe8f3f696cb59283674ce6db3167", "message": "batch inference text example", "committedDate": "2020-08-03T18:53:29Z", "type": "commit"}, {"oid": "d374153d88621ec7cdf7b2bf9dd6bc637267f04a", "url": "https://github.com/pytorch/serve/commit/d374153d88621ec7cdf7b2bf9dd6bc637267f04a", "message": "batch inference text example", "committedDate": "2020-08-03T18:53:37Z", "type": "commit"}, {"oid": "a955f55338748a4c81b0f5ad35976102cfc29015", "url": "https://github.com/pytorch/serve/commit/a955f55338748a4c81b0f5ad35976102cfc29015", "message": "batch inference text example", "committedDate": "2020-08-03T18:53:50Z", "type": "commit"}, {"oid": "3fb77e4182334d1204be2cd67ce4ff774fdf80e6", "url": "https://github.com/pytorch/serve/commit/3fb77e4182334d1204be2cd67ce4ff774fdf80e6", "message": "batch inference text example", "committedDate": "2020-08-03T18:53:59Z", "type": "commit"}, {"oid": "a1c902ab553fbbfb66f5252f4889aba49367fe41", "url": "https://github.com/pytorch/serve/commit/a1c902ab553fbbfb66f5252f4889aba49367fe41", "message": "batch inference text example", "committedDate": "2020-08-03T18:54:14Z", "type": "commit"}, {"oid": "0b1bbcf16badc5f50d2e4bf2a5f78d3364c05b61", "url": "https://github.com/pytorch/serve/commit/0b1bbcf16badc5f50d2e4bf2a5f78d3364c05b61", "message": "batch inference text example", "committedDate": "2020-08-03T18:54:21Z", "type": "commit"}, {"oid": "c0c23833ed265c21ee4aeabe7a2b02fd68388876", "url": "https://github.com/pytorch/serve/commit/c0c23833ed265c21ee4aeabe7a2b02fd68388876", "message": "batch inference text example", "committedDate": "2020-08-03T18:54:29Z", "type": "commit"}, {"oid": "04e29312f9f4e93c108eb8adb3e21237ed15ed69", "url": "https://github.com/pytorch/serve/commit/04e29312f9f4e93c108eb8adb3e21237ed15ed69", "message": "batch inference text example", "committedDate": "2020-08-03T18:54:40Z", "type": "commit"}, {"oid": "5e246af488cff0e77a70e614f9459b21005540ee", "url": "https://github.com/pytorch/serve/commit/5e246af488cff0e77a70e614f9459b21005540ee", "message": "clean up", "committedDate": "2020-08-03T18:56:29Z", "type": "commit"}, {"oid": "50c30c79e04e082db908ebf9fbeaf9e60e50a6ac", "url": "https://github.com/pytorch/serve/commit/50c30c79e04e082db908ebf9fbeaf9e60e50a6ac", "message": "adding support for batch inference", "committedDate": "2020-08-03T19:05:52Z", "type": "commit"}, {"oid": "a18c470ed4592dbcb340ca70f50a09e8d762fae8", "url": "https://github.com/pytorch/serve/commit/a18c470ed4592dbcb340ca70f50a09e8d762fae8", "message": "add example", "committedDate": "2020-08-04T04:47:02Z", "type": "commit"}, {"oid": "30217e2a97793d445a62b0a71fb397e0c5267f93", "url": "https://github.com/pytorch/serve/commit/30217e2a97793d445a62b0a71fb397e0c5267f93", "message": "add logs to server side for output tensors from model", "committedDate": "2020-08-04T04:47:41Z", "type": "commit"}, {"oid": "898086a436f5a802b4733e4a764cfc18902c2c7e", "url": "https://github.com/pytorch/serve/commit/898086a436f5a802b4733e4a764cfc18902c2c7e", "message": "Merge branch 'master' into batch_inference_HF_Handler", "committedDate": "2020-08-04T15:58:38Z", "type": "commit"}, {"oid": "480586f01377bf2f1b4da99118e024920e20d5b3", "url": "https://github.com/pytorch/serve/commit/480586f01377bf2f1b4da99118e024920e20d5b3", "message": "Merge branch 'master' into batch_inference_HF_Handler", "committedDate": "2020-08-04T17:07:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIxMTUxNA==", "url": "https://github.com/pytorch/serve/pull/585#discussion_r465211514", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -X POST \"localhost:8081/models?model_name=BERT_seq_Classification&url=BERT_seq_Classification.mar&batch_size=4&max_batch_delay=5000&initial_workers=3&synchronous=true\"\n          \n          \n            \n            curl -X POST \"localhost:8081/models?model_name=BERT_seq_Classification&url=BERTSeqClassification.mar&batch_size=4&max_batch_delay=5000&initial_workers=3&synchronous=true\"", "author": "maaquib", "createdAt": "2020-08-04T17:26:10Z", "path": "examples/Huggingface_Transformers/README.md", "diffHunk": "@@ -133,3 +133,19 @@ torchserve --start --model-store model_store --models my_tc=BERTSeqClassificatio\n ```\n \n - To run the inference using our registered model, open a new terminal and run: `curl -X POST http://127.0.0.1:8080/predictions/my_tc -T ./Seq_classification_artifacts/sample_text.txt`\n+\n+### Registering the Model on TorchServe and Running batch Inference\n+\n+The following uses .mar file created from  model packaging using pretrained for save_mode to register the model for batch inference on sequence classification, by setting the batch_size when registering the model.\n+\n+```\n+mkdir model_store\n+mv BERTSeqClassification.mar model_store/\n+torchserve --start --model-store model_store \n+\n+curl -X POST \"localhost:8081/models?model_name=BERT_seq_Classification&url=BERT_seq_Classification.mar&batch_size=4&max_batch_delay=5000&initial_workers=3&synchronous=true\"", "originalCommit": "480586f01377bf2f1b4da99118e024920e20d5b3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bb0134cd0fed3da1924246977ff142d64c9a14f3", "url": "https://github.com/pytorch/serve/commit/bb0134cd0fed3da1924246977ff142d64c9a14f3", "message": "Update examples/Huggingface_Transformers/README.md\n\nCo-authored-by: Aaqib <maaquib@gmail.com>", "committedDate": "2020-08-04T17:39:52Z", "type": "commit"}]}