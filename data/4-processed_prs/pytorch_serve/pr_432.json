{"pr_number": 432, "pr_title": "Refactor base and default handlers and restructure custom handler doc", "pr_createdAt": "2020-06-04T12:33:05Z", "pr_url": "https://github.com/pytorch/serve/pull/432", "timeline": [{"oid": "dbbef9299c3853f269a55ab0df2f6400049bde92", "url": "https://github.com/pytorch/serve/commit/dbbef9299c3853f269a55ab0df2f6400049bde92", "message": "- updated image classifier default handler\n- updated custom resnet and mnist handlers\n- update docs", "committedDate": "2020-06-04T06:24:04Z", "type": "commit"}, {"oid": "c6e69a5d40834c19a750f0c470a7daf6b8e2f444", "url": "https://github.com/pytorch/serve/commit/c6e69a5d40834c19a750f0c470a7daf6b8e2f444", "message": "documentation update\n- removed stale Transformer_readme.md", "committedDate": "2020-06-04T09:34:49Z", "type": "commit"}, {"oid": "35d0813100b52c6cc6ff09b95be5a1c802122425", "url": "https://github.com/pytorch/serve/commit/35d0813100b52c6cc6ff09b95be5a1c802122425", "message": "updated docs", "committedDate": "2020-06-04T11:42:33Z", "type": "commit"}, {"oid": "b193fbb3c6ff5e1771c9633f2f660906c724d3de", "url": "https://github.com/pytorch/serve/commit/b193fbb3c6ff5e1771c9633f2f660906c724d3de", "message": "Merge branch 'staging_0_1_1' into issue_411", "committedDate": "2020-06-08T13:54:13Z", "type": "commit"}, {"oid": "94c6851f4fe27a556e7a6d75920439b8159d7935", "url": "https://github.com/pytorch/serve/commit/94c6851f4fe27a556e7a6d75920439b8159d7935", "message": "Merge branch 'staging_0_1_1' into issue_411", "committedDate": "2020-06-10T03:04:12Z", "type": "commit"}, {"oid": "5929cde1f651e363b3517d14b5b6861eb2e31c75", "url": "https://github.com/pytorch/serve/commit/5929cde1f651e363b3517d14b5b6861eb2e31c75", "message": "merged master branch, resolved conflicts", "committedDate": "2020-06-11T06:08:50Z", "type": "commit"}, {"oid": "3abffbfe886aa5f9b78979b7cd3fdf32d06c450a", "url": "https://github.com/pytorch/serve/commit/3abffbfe886aa5f9b78979b7cd3fdf32d06c450a", "message": "Doc restructure and code fixes", "committedDate": "2020-06-15T18:15:55Z", "type": "commit"}, {"oid": "270c7cedff35e2c839f79f52f980a34d976a0d24", "url": "https://github.com/pytorch/serve/commit/270c7cedff35e2c839f79f52f980a34d976a0d24", "message": "Updated example as per fix in default handlers", "committedDate": "2020-06-15T18:23:40Z", "type": "commit"}, {"oid": "38488506e65ddc2ac5ef65b94bf1594022f80788", "url": "https://github.com/pytorch/serve/commit/38488506e65ddc2ac5ef65b94bf1594022f80788", "message": "Enhanced base and custom handler examples", "committedDate": "2020-06-16T05:49:31Z", "type": "commit"}, {"oid": "8cd6722e47fb1dc203ed3cb7d9611c11fd5030ca", "url": "https://github.com/pytorch/serve/commit/8cd6722e47fb1dc203ed3cb7d9611c11fd5030ca", "message": "Missing checking for manifest", "committedDate": "2020-06-16T15:07:48Z", "type": "commit"}, {"oid": "0012ffc23af828493da1b9bfc145c4bea2894f59", "url": "https://github.com/pytorch/serve/commit/0012ffc23af828493da1b9bfc145c4bea2894f59", "message": "Fixed some typos", "committedDate": "2020-06-16T17:09:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM0MjExOQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442342119", "bodyText": "Much of the initialize code seems to replicate what's in BaseHandler -- e.g. loading the model, pushing it to a device, etc. Could you call super().initialize(ctx) before adding in the rest?\nAs a side note, we should probably standardize a way to customize the handlers' behavior.", "author": "htappen", "createdAt": "2020-06-18T16:10:54Z", "path": "examples/Huggingface_Transformers/Transformer_handler_generalized.py", "diffHunk": "@@ -142,27 +141,3 @@ def inference(self, inputs):\n             logger.info(\"Model predicted: '%s'\", prediction)\n \n         return [prediction]\n-", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM0MjY1Ng==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442342656", "bodyText": "Much improved! Thank you!", "author": "htappen", "createdAt": "2020-06-18T16:11:45Z", "path": "examples/image_classifier/mnist/mnist_handler.py", "diffHunk": "@@ -1,55 +1,23 @@\n import io\n-import logging\n-import numpy as np\n-import os\n-import torch\n+\n from PIL import Image\n-from torch.autograd import Variable\n from torchvision import transforms\n \n-logger = logging.getLogger(__name__)\n+from ts.torch_handler.image_classifier import ImageClassifier\n \n \n-class MNISTDigitClassifier(object):\n-    \"\"\"\n-    MNISTDigitClassifier handler class. This handler takes a greyscale image\n-    and returns the digit in that image.\n+class MNISTDigitClassifier(ImageClassifier):\n     \"\"\"\n+    MNISTDigitClassifier handler class. This handler extends class ImageClassifier from image_classifier.py, a\n+    default handler. This handler takes an image and returns the number in that image.\n \n-    def __init__(self):", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM0NTQyMw==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442345423", "bodyText": "This can be part of another change, but it would be good to refactor BaseHandler to handle batching in preprocess & inference. I would suggest we make the assumption that all models used (speaking of the torch.nn.Module) support batch inputs, and offer an opt-out option to those that can;t.", "author": "htappen", "createdAt": "2020-06-18T16:16:07Z", "path": "examples/image_classifier/resnet_152_batch/resnet152_handler.py", "diffHunk": "@@ -1,93 +1,25 @@\n-import io\n-import logging\n-import numpy as np\n-import os\n import torch\n-from PIL import Image\n-from torch.autograd import Variable\n-from torchvision import transforms\n \n-logger = logging.getLogger(__name__)\n+from ts.torch_handler.image_classifier import ImageClassifier\n \n \n-class BatchImageClassifier(object):\n+class BatchImageClassifier(ImageClassifier):\n     \"\"\"", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEwNDA1Mw==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444104053", "bodyText": "@htappen Yes, as commented on your proposal #434, it can be taken up.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-23T09:53:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM0NTQyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM0ODIxNA==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442348214", "bodyText": "Similar story here with initialize: can we defer the basic model loading to super().initialize()?", "author": "htappen", "createdAt": "2020-06-18T16:20:29Z", "path": "examples/text_to_speech_synthesizer/waveglow_handler.py", "diffHunk": "@@ -6,11 +6,12 @@\n import zipfile\n from waveglow_model import WaveGlow\n from scipy.io.wavfile import write, read\n+from ts.torch_handler.base_handler import BaseHandler\n \n logger = logging.getLogger(__name__)\n \n \n-class WaveGlowSpeechSynthesizer(object):\n+class WaveGlowSpeechSynthesizer(BaseHandler):\n \n     def __init__(self):", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM0ODU4Ng==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442348586", "bodyText": "Are you going to remove this code?", "author": "htappen", "createdAt": "2020-06-18T16:21:06Z", "path": "ts/model_loader.py", "diffHunk": "@@ -115,16 +114,18 @@ def load(self, model_name, model_dir, handler, gpu_id, batch_size):\n             service = Service(model_name, model_dir, manifest, model_service.handle, gpu_id, batch_size)\n             initialize = getattr(model_service, \"initialize\")\n             if initialize is not None:\n-                # noinspection PyBroadException\n-                try:\n-                    model_service.initialize(service.context)\n+                # # noinspection PyBroadException\n+                # try:\n+                model_service.initialize(service.context)\n                     # pylint: disable=broad-except\n-                except Exception:\n-                    # noinspection PyBroadException\n-                    try:\n-                        sys.exc_clear()\n-                        # pylint: disable=broad-except\n-                    except Exception:\n-                        pass\n+                # except Exception:", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEwNjI3OA==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444106278", "bodyText": "Yes.  Done", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-23T09:57:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM0ODU4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1Mjg3OQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442352879", "bodyText": "Will this even work in any cases without preprocessing being overridden? self.model will need a torch.Tensor in the next step.\nThe goal should be to minimize the number of methods a user has to override, and for the purpose of each override to be crystal clear. In order to do that, BaseHandler needs to have a clean, obvious implementation that could function if the model doesn't need special preprocessing. Check out https://github.com/htappen/serve/blob/master/ts/torch_handler/base_handler.py#L144 -- that implements a pipeline of these steps:\n\nPreprocess: convert from list to Tensor\nInference: run model, accepting a Tensor and returning a Tensor\nPostprocess: convert from Tensor back to list", "author": "htappen", "createdAt": "2020-06-18T16:27:59Z", "path": "ts/torch_handler/base_handler.py", "diffHunk": "@@ -77,14 +77,40 @@ def initialize(self, ctx):\n \n         self.initialized = True\n \n-    @abc.abstractmethod\n     def preprocess(self, data):\n-        pass\n+        \"\"\"", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEzMTQ3Mw==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444131473", "bodyText": "See my response in your next comment.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-23T10:44:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1Mjg3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1Mzk4Ng==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442353986", "bodyText": "Do you still need this override, or can this functionality be moved into BaseHandler? It seems generic to any forward pass.", "author": "htappen", "createdAt": "2020-06-18T16:29:43Z", "path": "ts/torch_handler/image_classifier.py", "diffHunk": "@@ -39,24 +47,34 @@ def preprocess(self, data):\n         ])\n         image = Image.open(io.BytesIO(image))\n         image = my_preprocess(image)\n+\n+        # Convert 2D image to 1D vector\n+        image = image.unsqueeze(0)\n+\n         return image\n \n     def inference(self, data):\n         ''' Predict the class (or classes) of an image using a trained deep learning model.\n         '''\n-        # Convert 2D image to 1D vector\n-        topk = 5\n-        data = np.expand_dims(data, 0)\n-        data = torch.from_numpy(data)\n-\n         inputs = Variable(data).to(self.device)", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEzMTgzNg==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444131836", "bodyText": "Yes, this can be removed.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-23T10:44:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1Mzk4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg4MTEzNg==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r446881136", "bodyText": "Will make this and other default handler related changes once your PR for improved base handler is merged to this branch/issue_411. As indicated, please create PR against this issue_411 branch for base handler improvements.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-29T09:47:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1Mzk4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1NDUxMA==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442354510", "bodyText": "Same comment as ImageClassifier: the inference override seems generic to any model pass that the code should be moved into BaseHandler.", "author": "htappen", "createdAt": "2020-06-18T16:30:33Z", "path": "ts/torch_handler/image_segmenter.py", "diffHunk": "@@ -47,26 +47,3 @@ def inference(self, data):\n ", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEzMjQwMQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444132401", "bodyText": "Yes, it can be cleaned.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-23T10:45:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1NDUxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1NjYwMA==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442356600", "bodyText": "The inference override should be removed. First, these lines are generic to any model serving and should be moved to BaseHandler:\ninputs = Variable(data).to(self.device)\noutput = self.model.forward(inputs, torch.tensor([0]).to(self.device))\nNext, these bits should be in postprocess:\noutput = output.argmax(1).item() + 1\nif self.mapping:\n    output = self.mapping[str(output)]\nThe conditional should also be in BaseHandler.", "author": "htappen", "createdAt": "2020-06-18T16:33:52Z", "path": "ts/torch_handler/text_classifier.py", "diffHunk": "@@ -61,26 +61,3 @@ def inference(self, data):\n \n     def postprocess(self, data):", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEzMjk2Nw==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444132967", "bodyText": "Agreed.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-23T10:46:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1NjYwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1ODU3OA==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442358578", "bodyText": "The inference code here is generic to all models and should move to BaseHandler.", "author": "htappen", "createdAt": "2020-06-18T16:37:19Z", "path": "ts/torch_handler/image_segmenter.py", "diffHunk": "@@ -47,26 +47,3 @@ def inference(self, data):\n \n     def postprocess(self, data):", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEzMjUyMQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444132521", "bodyText": "Sure.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-23T10:46:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1ODU3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1OTEzMQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442359131", "bodyText": "This lookup of classes seems generic to ANY classifier model. Consider moving it into BaseHandler. See https://github.com/htappen/serve/blob/master/ts/torch_handler/base_handler.py#L107 for an example.", "author": "htappen", "createdAt": "2020-06-18T16:38:09Z", "path": "ts/torch_handler/image_classifier.py", "diffHunk": "@@ -39,24 +47,34 @@ def preprocess(self, data):\n         ])\n         image = Image.open(io.BytesIO(image))\n         image = my_preprocess(image)\n+\n+        # Convert 2D image to 1D vector\n+        image = image.unsqueeze(0)\n+\n         return image\n \n     def inference(self, data):\n         ''' Predict the class (or classes) of an image using a trained deep learning model.\n         '''\n-        # Convert 2D image to 1D vector\n-        topk = 5\n-        data = np.expand_dims(data, 0)\n-        data = torch.from_numpy(data)\n-\n         inputs = Variable(data).to(self.device)\n         outputs = self.model.forward(inputs)\n+        return outputs\n \n-        ps = F.softmax(outputs, dim=1)\n-        topk = getattr(ps, self.device.type)().topk(topk)\n+    def postprocess(self, data):", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEzMjE2OQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444132169", "bodyText": "Please refer my above comments related to postprocessing->mapping.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-23T10:45:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1OTEzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMyMTQ2OA==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444321468", "bodyText": "Replied above. It's generic and repeated code that it should at least be moved into a helper method that an overriding \"postprocess\" calls.", "author": "htappen", "createdAt": "2020-06-23T15:40:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM1OTEzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2MTE3Mw==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442361173", "bodyText": "The interface (a) is still unclear and (b) requires an override almost always of pre- and post-process. Instead, provide a default implementation that clarifies what a developer should do in each step AND could work without any of the other steps being overridden.\nHow about this interface?\n\npreprocess: accepts list, returns Tensor\ninference: accepts Tensor, returns Tensor\npostprocess: accepts Tensor, returns list\n\nSee https://github.com/htappen/serve/blob/master/ts/torch_handler/base_handler.py#L144", "author": "htappen", "createdAt": "2020-06-18T16:41:29Z", "path": "ts/torch_handler/base_handler.py", "diffHunk": "@@ -77,14 +77,40 @@ def initialize(self, ctx):\n \n         self.initialized = True\n \n-    @abc.abstractmethod\n     def preprocess(self, data):\n-        pass\n+        \"\"\"\n+        Override to customize the pre-processing\n+        :param data: input data\n+        :return: input data\n+        \"\"\"\n+        return data\n \n-    @abc.abstractmethod\n     def inference(self, data):\n-        pass\n+        \"\"\"", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDEzMTA5Mw==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444131093", "bodyText": "preprocess - agreed!\n\n\ninference - Can't we just replace torch.as_tensor(data) with torch.as_tensor(data, device=self.device) in preprocess itself? Thus we will be left with\n\n\nresults = self.model(torch_data)\nmarshalled_results = results.to('cpu')\n\n\nposprocess - BaseHandler is generic handler and we should assume that it will be only/related to classification hence topk is not required at basehandler.  In fact, it is part of image_classification in this PR and user has ability to override that class/topk.  Regarding mapping, this can be model specific and may/may not required mapping. Hence it should be part of specific handlers. Thats why we were just loading it as json file.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-23T10:43:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2MTE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMyMTAxMw==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r444321013", "bodyText": "RE (2): I'd suggest we don't require users to marshal to a certain device. The device initialization code is, as it should be, handled automatically in \"initialize\". Most users, then, might not be aware of the need to put the data to a certain device. So, let's keep the step in (2) of copying the tensor to the GPU. Note: if the user does already move it to the device in preprocess, then as_tensor(...) becomes a no-op (PyTorch handles that)\nRE (3): I can get behind making topk and mapping not included in postprocess, but they do need to be refactored into helper methods as part of BaseHandler, given how many of the example classes use them.", "author": "htappen", "createdAt": "2020-06-23T15:39:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2MTE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg1Mjk3OQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r446852979", "bodyText": "@htappen Can you make these changes and create PR against this branch (issue_411). Then I will go ahead and merge your changes to this branch.", "author": "dhaniram-kshirsagar", "createdAt": "2020-06-29T08:21:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2MTE3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2MTM4OQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442361389", "bodyText": "Do you plan to remove this code?", "author": "htappen", "createdAt": "2020-06-18T16:41:49Z", "path": "ts/model_loader.py", "diffHunk": "@@ -115,16 +114,18 @@ def load(self, model_name, model_dir, handler, gpu_id, batch_size):\n             service = Service(model_name, model_dir, manifest, model_service.handle, gpu_id, batch_size)\n             initialize = getattr(model_service, \"initialize\")\n             if initialize is not None:\n-                # noinspection PyBroadException\n-                try:\n-                    model_service.initialize(service.context)\n+                # # noinspection PyBroadException\n+                # try:\n+                model_service.initialize(service.context)\n                     # pylint: disable=broad-except\n-                except Exception:\n-                    # noinspection PyBroadException\n-                    try:\n-                        sys.exc_clear()\n-                        # pylint: disable=broad-except\n-                    except Exception:\n-                        pass\n+                # except Exception:", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2MjExNQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r442362115", "bodyText": "Some of the code in initialize duplicates what's in BaseHandler. Call super().initialize(context) instead of repeating the same code about loading models.", "author": "htappen", "createdAt": "2020-06-18T16:42:44Z", "path": "examples/text_to_speech_synthesizer/waveglow_handler.py", "diffHunk": "@@ -101,20 +102,3 @@ def postprocess(self, inference_output):\n             data = output.read()\n         os.remove(path)\n         return [data]", "originalCommit": "0012ffc23af828493da1b9bfc145c4bea2894f59", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e0d9d26956d0c6c066e3aa0102bfdfea8c5f1ea1", "url": "https://github.com/pytorch/serve/commit/e0d9d26956d0c6c066e3aa0102bfdfea8c5f1ea1", "message": "Removed commented code", "committedDate": "2020-06-23T09:57:03Z", "type": "commit"}, {"oid": "bfed825ff1c86a472cb4173c90a350ba5589e926", "url": "https://github.com/pytorch/serve/commit/bfed825ff1c86a472cb4173c90a350ba5589e926", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-06T12:16:33Z", "type": "commit"}, {"oid": "b6f5e5480124dd0df92e137a29d6a9e1e4d54a3a", "url": "https://github.com/pytorch/serve/commit/b6f5e5480124dd0df92e137a29d6a9e1e4d54a3a", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-07T06:33:28Z", "type": "commit"}, {"oid": "0982cecab6dc5ca3512669aa3b792ba5fbe1e9cf", "url": "https://github.com/pytorch/serve/commit/0982cecab6dc5ca3512669aa3b792ba5fbe1e9cf", "message": "Refactor BaseHandler", "committedDate": "2020-07-07T13:23:35Z", "type": "commit"}, {"oid": "5c9acb4a8b6d0b7bea2f1f2a825f2d842e3655b0", "url": "https://github.com/pytorch/serve/commit/5c9acb4a8b6d0b7bea2f1f2a825f2d842e3655b0", "message": "Adding in unit tests", "committedDate": "2020-07-07T14:19:30Z", "type": "commit"}, {"oid": "3cfe6199f1ec3ac72f69f494ecc5c59d70b6843b", "url": "https://github.com/pytorch/serve/commit/3cfe6199f1ec3ac72f69f494ecc5c59d70b6843b", "message": "Fixed gitignore in this branch", "committedDate": "2020-07-07T14:24:16Z", "type": "commit"}, {"oid": "c5aadbc706c0ab65eb1b8ada0cc721446ced5bc5", "url": "https://github.com/pytorch/serve/commit/c5aadbc706c0ab65eb1b8ada0cc721446ced5bc5", "message": "Fix a bug with Image Segmenter", "committedDate": "2020-07-07T16:52:28Z", "type": "commit"}, {"oid": "fd2b428920e12e57bbe5f63fc87cbd2e8ca4869f", "url": "https://github.com/pytorch/serve/commit/fd2b428920e12e57bbe5f63fc87cbd2e8ca4869f", "message": "Updated Object Detector to reuse functionality; consistency", "committedDate": "2020-07-07T19:14:48Z", "type": "commit"}, {"oid": "5ebbd9fd9441e0c6cace142cc19aad2cc46190f3", "url": "https://github.com/pytorch/serve/commit/5ebbd9fd9441e0c6cace142cc19aad2cc46190f3", "message": "Fix pylint errors", "committedDate": "2020-07-08T00:26:33Z", "type": "commit"}, {"oid": "61d447117e21bb942aec0b7a6ceb72e329385cbe", "url": "https://github.com/pytorch/serve/commit/61d447117e21bb942aec0b7a6ceb72e329385cbe", "message": "Backwards compat for index_names.json", "committedDate": "2020-07-08T02:25:46Z", "type": "commit"}, {"oid": "7b7743c558652a240963a1e1dda804be7014a4b4", "url": "https://github.com/pytorch/serve/commit/7b7743c558652a240963a1e1dda804be7014a4b4", "message": "Fixed Image Segmenter again", "committedDate": "2020-07-08T04:52:27Z", "type": "commit"}, {"oid": "45ac4999fb081a97de0a3d80b2fb095e5e74b126", "url": "https://github.com/pytorch/serve/commit/45ac4999fb081a97de0a3d80b2fb095e5e74b126", "message": "Made the compat layer in text actually compat.", "committedDate": "2020-07-08T14:58:39Z", "type": "commit"}, {"oid": "7e6619a78ef420e29fe4b83e6f26c017221663a3", "url": "https://github.com/pytorch/serve/commit/7e6619a78ef420e29fe4b83e6f26c017221663a3", "message": "Removed batching from text classifier", "committedDate": "2020-07-08T16:47:12Z", "type": "commit"}, {"oid": "59e7add4998d97b1cf5d9b3cfa0d046c49fb896a", "url": "https://github.com/pytorch/serve/commit/59e7add4998d97b1cf5d9b3cfa0d046c49fb896a", "message": "Adding comments per review.", "committedDate": "2020-07-09T03:58:58Z", "type": "commit"}, {"oid": "0b90357124daa6bea47fc6161f554b92b8855f6d", "url": "https://github.com/pytorch/serve/commit/0b90357124daa6bea47fc6161f554b92b8855f6d", "message": "Fixing doc feedback.", "committedDate": "2020-07-09T16:39:05Z", "type": "commit"}, {"oid": "c60e08dc6c7f8dea1907b1a187452cd7202f9dc3", "url": "https://github.com/pytorch/serve/commit/c60e08dc6c7f8dea1907b1a187452cd7202f9dc3", "message": "Updating docs about batching.", "committedDate": "2020-07-09T16:56:06Z", "type": "commit"}, {"oid": "26e372a8da91690d8e5d1a25394fc90078ad34d3", "url": "https://github.com/pytorch/serve/commit/26e372a8da91690d8e5d1a25394fc90078ad34d3", "message": "Merge pull request #502 from htappen/issue_411\n\nRefactor BaseHandler", "committedDate": "2020-07-10T15:36:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5NDM2NQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r456894365", "bodyText": "@shivamshriwas Is the --handler value correct? Shouldn't it be the actual file path for the handler .py file?", "author": "chauhang", "createdAt": "2020-07-19T11:03:19Z", "path": "examples/image_classifier/resnet_152_batch/README.md", "diffHunk": "@@ -55,7 +55,7 @@ curl http://127.0.0.1:8080/predictions/resnet152 -T ./serve/examples/image_class\n \n     ```bash\n \n-    torch-model-archiver --model-name resnet-152-batch --version 1.0  --serialized-file resnet-152-batch.pt --extra-files serve/examples/image_classifier/index_to_name.json  --handler serve/examples/image_classifier/resnet_152_batch/resnet152_handler.py\n+    torch-model-archiver --model-name resnet-152-batch --version 1.0  --serialized-file resnet-152-batch.pt --extra-files serve/examples/image_classifier/index_to_name.json  --handler image_classifier", "originalCommit": "26e372a8da91690d8e5d1a25394fc90078ad34d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMyODc4OQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r457328789", "bodyText": "@chauhang Due to batch support in default handler's [with this PR], resnet152_handler handler became redundant and hence same has been removed and replaced with default handler image_classifier.", "author": "dhaniram-kshirsagar", "createdAt": "2020-07-20T12:16:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5NDM2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5NDM4MA==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r456894380", "bodyText": "@shivamshriwas Is the --handler value correct? Shouldn't it be the actual file path for the handler .py file", "author": "chauhang", "createdAt": "2020-07-19T11:03:28Z", "path": "examples/image_classifier/resnet_152_batch/README.md", "diffHunk": "@@ -3,7 +3,7 @@ Run the commands given in following steps from the parent directory of the root\n \n ```bash\n wget https://download.pytorch.org/models/resnet152-b121ed2d.pth\n-torch-model-archiver --model-name resnet-152-batch --version 1.0 --model-file ./serve/examples/image_classifier/resnet_152_batch/model.py --serialized-file resnet152-b121ed2d.pth --handler ./serve/examples/image_classifier/resnet_152_batch/resnet152_handler.py --extra-files ./serve/examples/image_classifier/index_to_name.json\n+torch-model-archiver --model-name resnet-152-batch --version 1.0 --model-file ./serve/examples/image_classifier/resnet_152_batch/model.py --serialized-file resnet152-b121ed2d.pth --handler image_classifier --extra-files ./serve/examples/image_classifier/index_to_name.json", "originalCommit": "26e372a8da91690d8e5d1a25394fc90078ad34d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMzMDYwOQ==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r457330609", "bodyText": "@chauhang  resnet152_handler has been removed due to batch support in default handlers. Hence the above change", "author": "dhaniram-kshirsagar", "createdAt": "2020-07-20T12:18:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5NDM4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5NjYyOA==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r456896628", "bodyText": "@shivamshriwas Can you please clarify where the preprocess() function was overriden? I am seeing only the image_processing getting set, which is used in the VisualHandler base class as part of the preprocess() functions. Please update the comments accordingly for users to get clarity about this", "author": "chauhang", "createdAt": "2020-07-19T11:27:09Z", "path": "examples/image_classifier/mnist/mnist_handler.py", "diffHunk": "@@ -1,99 +1,23 @@\n import io\n-import logging\n-import numpy as np\n-import os\n-import torch\n+\n from PIL import Image\n-from torch.autograd import Variable\n from torchvision import transforms\n \n-logger = logging.getLogger(__name__)\n+from ts.torch_handler.image_classifier import ImageClassifier\n \n \n-class MNISTDigitClassifier(object):\n-    \"\"\"\n-    MNISTDigitClassifier handler class. This handler takes a greyscale image\n-    and returns the digit in that image.\n+class MNISTDigitClassifier(ImageClassifier):\n     \"\"\"\n+    MNISTDigitClassifier handler class. This handler extends class ImageClassifier from image_classifier.py, a\n+    default handler. This handler takes an image and returns the number in that image.\n \n-    def __init__(self):\n-        self.model = None\n-        self.mapping = None\n-        self.device = None\n-        self.initialized = False\n-\n-    def initialize(self, ctx):\n-        \"\"\"First try to load torchscript else load eager mode state_dict based model\"\"\"\n-\n-        properties = ctx.system_properties\n-        self.device = torch.device(\"cuda:\" + str(properties.get(\"gpu_id\")) if torch.cuda.is_available() else \"cpu\")\n-        model_dir = properties.get(\"model_dir\")\n-\n-        # Read model serialize/pt file\n-        model_pt_path = os.path.join(model_dir, \"mnist_cnn.pt\")\n-        # Read model definition file\n-        model_def_path = os.path.join(model_dir, \"mnist.py\")\n-        if not os.path.isfile(model_def_path):\n-            raise RuntimeError(\"Missing the model definition file\")\n-\n-        from mnist import Net\n-        state_dict = torch.load(model_pt_path, map_location=self.device)\n-        self.model = Net()\n-        self.model.load_state_dict(state_dict)\n-        self.model.to(self.device)\n-        self.model.eval()\n-\n-        logger.debug('Model file {0} loaded successfully'.format(model_pt_path))\n-        self.initialized = True\n-\n-    def preprocess(self, data):\n-        \"\"\"\n-         Scales, crops, and normalizes a PIL image for a MNIST model,\n-         returns an Numpy array\n-        \"\"\"\n-        image = data[0].get(\"data\")\n-        if image is None:\n-            image = data[0].get(\"body\")\n-\n-        mnist_transform = transforms.Compose([\n-            transforms.ToTensor(),\n-            transforms.Normalize((0.1307,), (0.3081,))\n-        ])\n-        image = Image.open(io.BytesIO(image))\n-        image = mnist_transform(image)\n-        return image\n-\n-    def inference(self, img, topk=5):\n-        ''' Predict the class (or classes) of an image using a trained deep learning model.\n-        '''\n-        # Convert 2D image to 1D vector\n-        img = np.expand_dims(img, 0)\n-        img = torch.from_numpy(img)\n-\n-        self.model.eval()\n-        inputs = Variable(img).to(self.device)\n-        outputs = self.model.forward(inputs)\n-\n-        _, y_hat = outputs.max(1)\n-        predicted_idx = str(y_hat.item())\n-        return [predicted_idx]\n-\n-    def postprocess(self, inference_output):\n-        return inference_output\n-\n-\n-_service = MNISTDigitClassifier()\n-\n-\n-def handle(data, context):\n-    if not _service.initialized:\n-        _service.initialize(context)\n-\n-    if data is None:\n-        return None\n+    Here methods preprocess() and postprocess() have been overridden while others are reused from parent class.", "originalCommit": "26e372a8da91690d8e5d1a25394fc90078ad34d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzM1NDk3MA==", "url": "https://github.com/pytorch/serve/pull/432#discussion_r457354970", "bodyText": "Removed redundant comments. The preprocess method is not getting overridden.", "author": "dhaniram-kshirsagar", "createdAt": "2020-07-20T12:52:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Njg5NjYyOA=="}], "type": "inlineReview"}, {"oid": "f8fff504f90eaa1fa6d3d5c3fb21080b243274b8", "url": "https://github.com/pytorch/serve/commit/f8fff504f90eaa1fa6d3d5c3fb21080b243274b8", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-20T12:29:46Z", "type": "commit"}, {"oid": "7fe011b3a18f11e07baa8afece9b506ae0734815", "url": "https://github.com/pytorch/serve/commit/7fe011b3a18f11e07baa8afece9b506ae0734815", "message": "Fixed error introduced due to conflict resolution via web based merge tool", "committedDate": "2020-07-20T12:44:41Z", "type": "commit"}, {"oid": "ae2ef1b17e1653d7abcb4a2fd47d721d422474b0", "url": "https://github.com/pytorch/serve/commit/ae2ef1b17e1653d7abcb4a2fd47d721d422474b0", "message": "Corrected code comment", "committedDate": "2020-07-20T12:51:05Z", "type": "commit"}, {"oid": "42dd10cba0c85b3bcf0bf60b691c4a2aca567106", "url": "https://github.com/pytorch/serve/commit/42dd10cba0c85b3bcf0bf60b691c4a2aca567106", "message": "- Updated Object detection & text classification handlers\n- updated docs", "committedDate": "2020-07-21T16:54:30Z", "type": "commit"}, {"oid": "20079b00ed257a20ce7fa7770a01ca8302d13b5f", "url": "https://github.com/pytorch/serve/commit/20079b00ed257a20ce7fa7770a01ca8302d13b5f", "message": "fixed python linting errors", "committedDate": "2020-07-21T18:09:04Z", "type": "commit"}, {"oid": "bdc14715c4bf04c51d051b3a563473f2a9a5b4b0", "url": "https://github.com/pytorch/serve/commit/bdc14715c4bf04c51d051b3a563473f2a9a5b4b0", "message": "updated index to name json text classifier", "committedDate": "2020-07-21T19:23:01Z", "type": "commit"}, {"oid": "ced7b926e66b88cfe5e8ac582459c97b735507ef", "url": "https://github.com/pytorch/serve/commit/ced7b926e66b88cfe5e8ac582459c97b735507ef", "message": "Merge branch 'issue_411' of https://github.com/pytorch/serve into issue_411", "committedDate": "2020-07-21T19:23:36Z", "type": "commit"}, {"oid": "1c2474cde1e08b9d6030b5e47f54deb45f871d89", "url": "https://github.com/pytorch/serve/commit/1c2474cde1e08b9d6030b5e47f54deb45f871d89", "message": "fixed object detector handler for batch support", "committedDate": "2020-07-22T13:01:26Z", "type": "commit"}, {"oid": "4ac516621d40f0bbca44164b7030516dc46059cd", "url": "https://github.com/pytorch/serve/commit/4ac516621d40f0bbca44164b7030516dc46059cd", "message": "Fix conflicts", "committedDate": "2020-07-22T16:52:20Z", "type": "commit"}, {"oid": "16d438b561bb6b6401f94634c481d2bc959a0078", "url": "https://github.com/pytorch/serve/commit/16d438b561bb6b6401f94634c481d2bc959a0078", "message": "Fixed the batch inference output", "committedDate": "2020-07-22T17:21:56Z", "type": "commit"}, {"oid": "9e3828fc96215878db2cddc0fab83a711f1ef749", "url": "https://github.com/pytorch/serve/commit/9e3828fc96215878db2cddc0fab83a711f1ef749", "message": "update expected output as per new handler changes", "committedDate": "2020-07-22T17:23:03Z", "type": "commit"}, {"oid": "422f293d161ed02efc8901d3c5d0af6e0008b6b7", "url": "https://github.com/pytorch/serve/commit/422f293d161ed02efc8901d3c5d0af6e0008b6b7", "message": "Merge branch 'issue_411' of https://github.com/pytorch/serve into issue_411", "committedDate": "2020-07-22T17:24:18Z", "type": "commit"}, {"oid": "8fd7a5b654059c47197bbba39f4f2ea2564a17ff", "url": "https://github.com/pytorch/serve/commit/8fd7a5b654059c47197bbba39f4f2ea2564a17ff", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-22T19:31:21Z", "type": "commit"}, {"oid": "448dee90a3f7022a1a2426cf2834f11218a63665", "url": "https://github.com/pytorch/serve/commit/448dee90a3f7022a1a2426cf2834f11218a63665", "message": "updated text classification mar name in sanity suite", "committedDate": "2020-07-22T20:05:01Z", "type": "commit"}, {"oid": "137e40aeadd051301863f945c24eb1f6fdb3eacb", "url": "https://github.com/pytorch/serve/commit/137e40aeadd051301863f945c24eb1f6fdb3eacb", "message": "updated text classifier mar name and removed bert scripted models", "committedDate": "2020-07-22T20:07:55Z", "type": "commit"}, {"oid": "735ff503524ae39af281921abd4ae54973733a6a", "url": "https://github.com/pytorch/serve/commit/735ff503524ae39af281921abd4ae54973733a6a", "message": "updated model zoo with new text classification url", "committedDate": "2020-07-22T20:24:42Z", "type": "commit"}, {"oid": "14ce6a1273f4187b62808dd222fa63e049814d8e", "url": "https://github.com/pytorch/serve/commit/14ce6a1273f4187b62808dd222fa63e049814d8e", "message": "added model_name in while registering model in sanity suite", "committedDate": "2020-07-22T20:36:07Z", "type": "commit"}, {"oid": "e3030b0dffb5b8c8e556a9af2245f74cdb1e4c0d", "url": "https://github.com/pytorch/serve/commit/e3030b0dffb5b8c8e556a9af2245f74cdb1e4c0d", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-23T02:32:08Z", "type": "commit"}, {"oid": "2f94c8a0ffbe415c673472a023f45a00a4e1791a", "url": "https://github.com/pytorch/serve/commit/2f94c8a0ffbe415c673472a023f45a00a4e1791a", "message": "updated text classification model name", "committedDate": "2020-07-23T02:44:15Z", "type": "commit"}, {"oid": "24ba4f84e60f20845f62ef4b9d03e2a3b0808cf9", "url": "https://github.com/pytorch/serve/commit/24ba4f84e60f20845f62ef4b9d03e2a3b0808cf9", "message": "added upgrade option for installing python dependencies in install utils", "committedDate": "2020-07-23T11:20:18Z", "type": "commit"}, {"oid": "a77c44d8544b43def33237685341cb24b30e8b0a", "url": "https://github.com/pytorch/serve/commit/a77c44d8544b43def33237685341cb24b30e8b0a", "message": "added upgrade option for installing python dependencies and extra numpy package in regression suite", "committedDate": "2020-07-23T11:21:24Z", "type": "commit"}, {"oid": "82600266a11e83b5464217a99c42eeb6690bddc4", "url": "https://github.com/pytorch/serve/commit/82600266a11e83b5464217a99c42eeb6690bddc4", "message": "refectored pytests in regression suite for better performance and reporting", "committedDate": "2020-07-23T11:21:58Z", "type": "commit"}, {"oid": "c8e7aeafdac2e0928b2447a7268d489de784f82e", "url": "https://github.com/pytorch/serve/commit/c8e7aeafdac2e0928b2447a7268d489de784f82e", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-24T04:03:22Z", "type": "commit"}, {"oid": "a5aff7b17d773d439956162f114ee60c16775f1f", "url": "https://github.com/pytorch/serve/commit/a5aff7b17d773d439956162f114ee60c16775f1f", "message": "minor fix in torch-archiver command", "committedDate": "2020-07-27T12:10:12Z", "type": "commit"}, {"oid": "ca3e64dcc8d0073e04dd2f63f379202049edb809", "url": "https://github.com/pytorch/serve/commit/ca3e64dcc8d0073e04dd2f63f379202049edb809", "message": "reverted postprocess removal", "committedDate": "2020-07-27T12:10:41Z", "type": "commit"}, {"oid": "fb80537dd96ea13405cd08cc0f8a7a1dfee91a8b", "url": "https://github.com/pytorch/serve/commit/fb80537dd96ea13405cd08cc0f8a7a1dfee91a8b", "message": "updated mar files in model zoo to use updated handlers", "committedDate": "2020-07-28T06:48:22Z", "type": "commit"}, {"oid": "34aab6f12c783f3a97f8471161b945c76d5fb660", "url": "https://github.com/pytorch/serve/commit/34aab6f12c783f3a97f8471161b945c76d5fb660", "message": "updated regression suite to use updated mar files", "committedDate": "2020-07-28T06:50:06Z", "type": "commit"}, {"oid": "7c9402a141200e1621ee485244b2983cfc109753", "url": "https://github.com/pytorch/serve/commit/7c9402a141200e1621ee485244b2983cfc109753", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-29T11:05:13Z", "type": "commit"}, {"oid": "ebebb17edc8b887d694100c7caa64397b9d4a427", "url": "https://github.com/pytorch/serve/commit/ebebb17edc8b887d694100c7caa64397b9d4a427", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-29T12:04:24Z", "type": "commit"}, {"oid": "bb15cdf54e0e13632593fc17053f4b099b4a62b8", "url": "https://github.com/pytorch/serve/commit/bb15cdf54e0e13632593fc17053f4b099b4a62b8", "message": "suppressed pylint warning in UT", "committedDate": "2020-07-29T12:39:17Z", "type": "commit"}, {"oid": "a0b85010b4d1b3c8aeba5b779b6bb4a6275f4f6a", "url": "https://github.com/pytorch/serve/commit/a0b85010b4d1b3c8aeba5b779b6bb4a6275f4f6a", "message": "fixed resnet-152 mar name and expected output", "committedDate": "2020-07-29T17:55:56Z", "type": "commit"}, {"oid": "1e412be73cc9e874540cc78900e78e4a445d20ef", "url": "https://github.com/pytorch/serve/commit/1e412be73cc9e874540cc78900e78e4a445d20ef", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-31T17:27:36Z", "type": "commit"}, {"oid": "f852aeab22ad62acdc11902a4084be2e2e15a62b", "url": "https://github.com/pytorch/serve/commit/f852aeab22ad62acdc11902a4084be2e2e15a62b", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-07-31T19:53:48Z", "type": "commit"}, {"oid": "937281e58131721e8cc5acfc284982e04261d9db", "url": "https://github.com/pytorch/serve/commit/937281e58131721e8cc5acfc284982e04261d9db", "message": "updated inference tests data\n- added tolerence value for resent152 models", "committedDate": "2020-08-03T20:02:59Z", "type": "commit"}, {"oid": "51d5de4002a745b8c6cda6d68301ab99666d7103", "url": "https://github.com/pytorch/serve/commit/51d5de4002a745b8c6cda6d68301ab99666d7103", "message": "Added custom handler in vgg11 example (#559)\n\n* added custom handler for vgg11\r\n\r\n* added readme for vgg11 example\r\n\r\n* fixed typo in readme\r\n\r\n* updated model zoo\r\n\r\n* reverted back changes for scripted vgg11 mar file\r\n\r\n* added vgg11 model to regression test suite\r\n\r\n* disabled pylint check in UT\r\n\r\n* updated expected response for vgg11 inference in regression suite\r\n\r\n* updated expected response for vgg11 inference in regression suite", "committedDate": "2020-08-04T03:24:03Z", "type": "commit"}, {"oid": "b5e424a8302ef452e255ee6f1028a23975751bbd", "url": "https://github.com/pytorch/serve/commit/b5e424a8302ef452e255ee6f1028a23975751bbd", "message": "conflict resolution", "committedDate": "2020-08-04T19:21:19Z", "type": "commit"}, {"oid": "5bab8e9123851114c68cc97a991d3e5987ddee71", "url": "https://github.com/pytorch/serve/commit/5bab8e9123851114c68cc97a991d3e5987ddee71", "message": "conflict resolution", "committedDate": "2020-08-04T19:28:04Z", "type": "commit"}, {"oid": "4eb2eaf0644f6bfd7f7b5c9e97457ddff4fd738d", "url": "https://github.com/pytorch/serve/commit/4eb2eaf0644f6bfd7f7b5c9e97457ddff4fd738d", "message": "updated expected for densenet scripted", "committedDate": "2020-08-05T15:46:34Z", "type": "commit"}, {"oid": "03d8bf25ce7b89993e5d1a0fe73aee7109ec3e36", "url": "https://github.com/pytorch/serve/commit/03d8bf25ce7b89993e5d1a0fe73aee7109ec3e36", "message": "Merge branch 'master' into issue_411", "committedDate": "2020-08-06T18:09:52Z", "type": "commit"}]}