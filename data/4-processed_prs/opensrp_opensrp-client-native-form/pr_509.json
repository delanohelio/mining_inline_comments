{"pr_number": 509, "pr_title": "Added implementation to make the onFocusChange listener as optional", "pr_createdAt": "2020-11-03T08:52:43Z", "pr_url": "https://github.com/opensrp/opensrp-client-native-form/pull/509", "timeline": [{"oid": "e5cdc3362c4e4a6a664db1ab64bab9bb8ed51ae4", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/e5cdc3362c4e4a6a664db1ab64bab9bb8ed51ae4", "message": "Added implementation to make the onFocusChange and auto expanding on repeating group as optional", "committedDate": "2020-11-03T08:51:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjYxODUwMA==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/509#discussion_r516618500", "bodyText": "Could we use underscores instead of camelCase for the field? That is more consistent with other fields in native form widgets.", "author": "vincent-karuri", "createdAt": "2020-11-03T12:06:37Z", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/constants/JsonFormConstants.java", "diffHunk": "@@ -143,6 +143,7 @@\n     public static final String MIN_DATE = \"min_date\";\n     public static final String MAX_DATE = \"max_date\";\n     public static final String EXPANDED = \"expanded\";\n+    public static final String EXPAND_ON_TEXT_CHANGE = \"expandOnTextChange\";", "originalCommit": "e5cdc3362c4e4a6a664db1ab64bab9bb8ed51ae4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjYxOTUyMw==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/509#discussion_r516619523", "bodyText": "You can always get the jsonObject from widgetArgs so no need to have an extra variable.", "author": "vincent-karuri", "createdAt": "2020-11-03T12:08:40Z", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactory.java", "diffHunk": "@@ -102,13 +100,16 @@\n         final String referenceEditTextHint = jsonObject.optString(REFERENCE_EDIT_TEXT_HINT, context.getString(R.string.enter_number_of_repeating_group_items));\n         final String repeatingGroupLabel = jsonObject.optString(REPEATING_GROUP_LABEL, context.getString(R.string.repeating_group_item));\n         String remoteReferenceEditText = jsonObject.optString(REFERENCE_EDIT_TEXT);\n-\n+        boolean expandOnTextChange = false;", "originalCommit": "e5cdc3362c4e4a6a664db1ab64bab9bb8ed51ae4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "069a9900d5ed9db3601db1679043629eb1949e0e", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/069a9900d5ed9db3601db1679043629eb1949e0e", "message": "Removed onFocusChanged listener\nAttached repeating group on afterTextChanged if \"expand_on_text_change\" is set to true in an implementation\nMinor Ux fixes", "committedDate": "2020-11-03T14:22:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE0ODA1Nw==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/509#discussion_r517148057", "bodyText": "We can simplify to optBoolean(JsonFormConstants.EXPAND_ON_TEXT_CHANGE) instead of optBoolean(JsonFormConstants.EXPAND_ON_TEXT_CHANGE, false)).", "author": "vincent-karuri", "createdAt": "2020-11-04T07:44:08Z", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactory.java", "diffHunk": "@@ -338,7 +335,8 @@ public void onTextChanged(CharSequence s, int start, int before, int count) {\n             @Override\n             public void afterTextChanged(Editable s) {\n                 doneButton.setImageResource(R.drawable.ic_done_grey);\n-                addOnDoneAction(referenceEditText, doneButton, widgetArgs);\n+                if (widgetArgs.getJsonObject().optBoolean(JsonFormConstants.EXPAND_ON_TEXT_CHANGE, false))", "originalCommit": "069a9900d5ed9db3601db1679043629eb1949e0e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ad0d4cf1aadbd01833a7c54df4225da607d0b382", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/ad0d4cf1aadbd01833a7c54df4225da607d0b382", "message": "Added keyboard done action for default behavior\nMinor code refactoring", "committedDate": "2020-11-04T13:04:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM0MDU4MQ==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/509#discussion_r517340581", "bodyText": "Could this moved into this if block https://github.com/OpenSRP/opensrp-client-native-form/pull/509/files#diff-5faa6441c13d21a9d335d1851497f620c839a7c50ec84a6b1b77b96892e94d1aL344.\nUnless the entry is valid, we should not generate repeating groups.", "author": "vincent-karuri", "createdAt": "2020-11-04T13:26:45Z", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactory.java", "diffHunk": "@@ -338,7 +349,8 @@ public void onTextChanged(CharSequence s, int start, int before, int count) {\n             @Override\n             public void afterTextChanged(Editable s) {\n                 doneButton.setImageResource(R.drawable.ic_done_grey);\n-                addOnDoneAction(referenceEditText, doneButton, widgetArgs);\n+                if (widgetArgs.getJsonObject().optBoolean(JsonFormConstants.EXPAND_ON_TEXT_CHANGE))", "originalCommit": "ad0d4cf1aadbd01833a7c54df4225da607d0b382", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5a3d1f74eaee2f3288018b20a00145769a07d218", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/5a3d1f74eaee2f3288018b20a00145769a07d218", "message": "Added validation status check before generating repeating groups", "committedDate": "2020-11-05T06:25:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgzNTExMg==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/509#discussion_r517835112", "bodyText": "I think it's better to simply move 5a3d1f7#diff-5faa6441c13d21a9d335d1851497f620c839a7c50ec84a6b1b77b96892e94d1aL352 into this if block 5a3d1f7#diff-5faa6441c13d21a9d335d1851497f620c839a7c50ec84a6b1b77b96892e94d1aR356.", "author": "vincent-karuri", "createdAt": "2020-11-05T07:17:12Z", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactory.java", "diffHunk": "@@ -349,10 +349,10 @@ public void onTextChanged(CharSequence s, int start, int before, int count) {\n             @Override\n             public void afterTextChanged(Editable s) {\n                 doneButton.setImageResource(R.drawable.ic_done_grey);\n-                if (widgetArgs.getJsonObject().optBoolean(JsonFormConstants.EXPAND_ON_TEXT_CHANGE))\n-                    addOnDoneAction(referenceEditText, doneButton, widgetArgs);\n                 ValidationStatus validationStatus = JsonFormFragmentPresenter\n                         .validate(widgetArgs.getFormFragment(), referenceEditText, false);\n+                if (widgetArgs.getJsonObject().optBoolean(JsonFormConstants.EXPAND_ON_TEXT_CHANGE) && validationStatus.isValid())", "originalCommit": "5a3d1f74eaee2f3288018b20a00145769a07d218", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "279494136ee63249c58d64d882a56447535023d5", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/279494136ee63249c58d64d882a56447535023d5", "message": "code refactoring", "committedDate": "2020-11-05T08:26:20Z", "type": "commit"}, {"oid": "0e5dc755e515d7906b648cd881739a416d235035", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/0e5dc755e515d7906b648cd881739a416d235035", "message": "Merge branch 'master' into repeating_grp_text_change_optional", "committedDate": "2020-11-05T11:44:24Z", "type": "commit"}, {"oid": "181acce23bd6c3179a56d3a37c04cd22ed982497", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/181acce23bd6c3179a56d3a37c04cd22ed982497", "message": "Added new test case", "committedDate": "2020-11-06T07:02:08Z", "type": "commit"}, {"oid": "5383862f1dee2ebb59da461dffa1b84c0b391932", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/5383862f1dee2ebb59da461dffa1b84c0b391932", "message": "Merge remote-tracking branch 'origin/repeating_grp_text_change_optional' into repeating_grp_text_change_optional", "committedDate": "2020-11-06T07:03:00Z", "type": "commit"}, {"oid": "708022fd5551aa941b74c4997a8fef1d647cbc40", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/708022fd5551aa941b74c4997a8fef1d647cbc40", "message": "Added new test case", "committedDate": "2020-11-06T07:48:03Z", "type": "commit"}, {"oid": "1808cdc5c82f64bbbdc579d180aee79e8799ea90", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/1808cdc5c82f64bbbdc579d180aee79e8799ea90", "message": "Merge branch 'master' into repeating_grp_text_change_optional", "committedDate": "2020-11-06T07:59:10Z", "type": "commit"}, {"oid": "ffe8bc73e8b5e7ceabdc84ed7adfd869baccdf21", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/ffe8bc73e8b5e7ceabdc84ed7adfd869baccdf21", "message": "Added new test case", "committedDate": "2020-11-06T14:41:58Z", "type": "commit"}, {"oid": "23c7437c6ae4a1d5716a64399b07d22d419d3687", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/23c7437c6ae4a1d5716a64399b07d22d419d3687", "message": "Merge remote-tracking branch 'origin/repeating_grp_text_change_optional' into repeating_grp_text_change_optional", "committedDate": "2020-11-06T14:43:18Z", "type": "commit"}, {"oid": "bf13cf67740daef295132e7f45200db2cf226ccd", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/bf13cf67740daef295132e7f45200db2cf226ccd", "message": "Fixed codacy issues", "committedDate": "2020-11-09T06:30:54Z", "type": "commit"}, {"oid": "c88bf15cf3c2c737c0956d04418a64183ce9efd1", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/c88bf15cf3c2c737c0956d04418a64183ce9efd1", "message": "Merge branch 'master' into repeating_grp_text_change_optional", "committedDate": "2020-11-09T06:31:22Z", "type": "commit"}, {"oid": "a7c37885903234e72fa17a46a1475d8e91d7b38c", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/a7c37885903234e72fa17a46a1475d8e91d7b38c", "message": "Revert methods to private - should not modify scope for testing", "committedDate": "2020-11-16T09:21:25Z", "type": "commit"}]}