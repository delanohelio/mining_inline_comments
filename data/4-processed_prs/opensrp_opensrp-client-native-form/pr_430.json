{"pr_number": 430, "pr_title": "Testing tuesday", "pr_createdAt": "2020-06-09T08:52:43Z", "pr_url": "https://github.com/opensrp/opensrp-client-native-form/pull/430", "timeline": [{"oid": "81f95601079c7307d6f0b2ca02cf673c9002fddd", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/81f95601079c7307d6f0b2ca02cf673c9002fddd", "message": ":zap: add tests", "committedDate": "2020-06-09T08:51:15Z", "type": "commit"}, {"oid": "2bfa9ddd711d481af9c4eb90cf23aba27a932912", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/2bfa9ddd711d481af9c4eb90cf23aba27a932912", "message": ":zap: uncomment configs", "committedDate": "2020-06-09T08:51:50Z", "type": "commit"}, {"oid": "71f9c36e3e2b2ddb0c20a1c3ba5cef696830a5c7", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/71f9c36e3e2b2ddb0c20a1c3ba5cef696830a5c7", "message": "Merge branch 'master' of github.com:OpenSRP/opensrp-client-native-form into feature/testing_tuesday", "committedDate": "2020-06-09T08:53:02Z", "type": "commit"}, {"oid": "730ab58c8855f05bc3503213794344877f29e0b0", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/730ab58c8855f05bc3503213794344877f29e0b0", "message": "Merge branch 'master' into feature/testing_tuesday", "committedDate": "2020-06-15T12:43:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE0OTgwNg==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/430#discussion_r440149806", "bodyText": "could you catch a more specific exception?", "author": "bennsimon", "createdAt": "2020-06-15T12:46:53Z", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/TimePickerFactory.java", "diffHunk": "@@ -78,12 +83,17 @@\n             views.add(dateViewRelativeLayout);\n \n         } catch (Exception e) {", "originalCommit": "730ab58c8855f05bc3503213794344877f29e0b0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1MTk2Mg==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/430#discussion_r440151962", "bodyText": "Could you catch a more specific exception?", "author": "bennsimon", "createdAt": "2020-06-15T12:50:29Z", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/TimePickerFactory.java", "diffHunk": "@@ -133,77 +143,19 @@ public boolean onLongClick(View v) {\n             addRefreshLogicView(context, editText, relevance, constraints, calculations);\n             editText.setFocusable(false);\n         } catch (Exception e) {\n-            e.printStackTrace();\n-        }\n-\n-    }\n-\n-    private void addRefreshLogicView(Context context, MaterialEditText editText, String relevance, String constraints,\n-                                     String calculations) {\n-        if (!TextUtils.isEmpty(relevance) && context instanceof JsonApi) {\n-            editText.setTag(R.id.relevance, relevance);\n-            ((JsonApi) context).addSkipLogicView(editText);\n-        }\n-\n-        if (!TextUtils.isEmpty(constraints) && context instanceof JsonApi) {\n-            editText.setTag(R.id.constraints, constraints);\n-            ((JsonApi) context).addConstrainedView(editText);\n-        }\n-\n-        if (!TextUtils.isEmpty(calculations) && context instanceof JsonApi) {\n-            editText.setTag(R.id.calculation, calculations);\n-            ((JsonApi) context).addCalculationLogicView(editText);\n-        }\n-    }\n-\n-    @NonNull\n-    private GenericTextWatcher getGenericTextWatcher(String stepName, final Activity context, JsonFormFragment formFragment,\n-                                                     final MaterialEditText editText,\n-                                                     final TimePickerDialog timePickerDialog) {\n-        GenericTextWatcher genericTextWatcher = new GenericTextWatcher(stepName, formFragment, editText);\n-        genericTextWatcher.addOnFocusChangeListener(new View.OnFocusChangeListener() {\n-            @Override\n-            public void onFocusChange(View v, boolean hasFocus) {\n-                if (hasFocus) {\n-                    showTimePickerDialog(context, timePickerDialog);\n-                }\n-            }\n-        });\n-        return genericTextWatcher;\n-    }\n-\n-    private static void showTimePickerDialog(Activity context,\n-                                             TimePickerDialog timePickerDialog\n-    ) {\n-        FragmentTransaction ft = context.getFragmentManager().beginTransaction();\n-        Fragment prev = context.getFragmentManager().findFragmentByTag(TAG);\n-        if (prev != null) {\n-            ft.remove(prev);\n+            Timber.e(e);", "originalCommit": "730ab58c8855f05bc3503213794344877f29e0b0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1NDQwMA==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/430#discussion_r440154400", "bodyText": "Is this necessary?", "author": "bennsimon", "createdAt": "2020-06-15T12:54:44Z", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/CountDownTimerFactoryTest.java", "diffHunk": "@@ -0,0 +1,90 @@\n+package com.vijay.jsonwizard.widgets;\n+\n+import android.content.res.Resources;\n+import android.util.DisplayMetrics;\n+import android.view.View;\n+import android.widget.TextView;\n+\n+import com.emredavarci.circleprogressbar.CircleProgressBar;\n+import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.R;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+import com.vijay.jsonwizard.utils.FormUtils;\n+\n+import org.json.JSONObject;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+import org.powermock.reflect.Whitebox;\n+\n+import java.util.List;\n+\n+public class CountDownTimerFactoryTest extends BaseTest {\n+    private CountDownTimerFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+\n+    @Mock\n+    private JsonFormFragment formFragment;\n+\n+    @Mock\n+    private Resources resources;\n+\n+    @Mock\n+    private CommonListener listener;\n+\n+    @Mock\n+    private View rootLayout;\n+\n+    @Mock\n+    private TextView labelView;\n+    @Mock\n+    private CircleProgressBar progressBar;\n+\n+    @Before\n+    public void setUp() {\n+        MockitoAnnotations.initMocks(this);\n+        factory = new CountDownTimerFactory();\n+    }\n+\n+    @Test\n+    public void testCountDownTimerFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);", "originalCommit": "730ab58c8855f05bc3503213794344877f29e0b0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1NDY4Ng==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/430#discussion_r440154686", "bodyText": "Is this necessary?", "author": "bennsimon", "createdAt": "2020-06-15T12:55:11Z", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/CountDownTimerFactoryTest.java", "diffHunk": "@@ -0,0 +1,90 @@\n+package com.vijay.jsonwizard.widgets;\n+\n+import android.content.res.Resources;\n+import android.util.DisplayMetrics;\n+import android.view.View;\n+import android.widget.TextView;\n+\n+import com.emredavarci.circleprogressbar.CircleProgressBar;\n+import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.R;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+import com.vijay.jsonwizard.utils.FormUtils;\n+\n+import org.json.JSONObject;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+import org.powermock.reflect.Whitebox;\n+\n+import java.util.List;\n+\n+public class CountDownTimerFactoryTest extends BaseTest {\n+    private CountDownTimerFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+\n+    @Mock\n+    private JsonFormFragment formFragment;\n+\n+    @Mock\n+    private Resources resources;\n+\n+    @Mock\n+    private CommonListener listener;\n+\n+    @Mock\n+    private View rootLayout;\n+\n+    @Mock\n+    private TextView labelView;\n+    @Mock\n+    private CircleProgressBar progressBar;\n+\n+    @Before\n+    public void setUp() {\n+        MockitoAnnotations.initMocks(this);\n+        factory = new CountDownTimerFactory();\n+    }\n+\n+    @Test\n+    public void testCountDownTimerFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        CountDownTimerFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        FormUtils formUtils = new FormUtils();\n+        FormUtils formUtilsSpy = Mockito.spy(formUtils);\n+        Assert.assertNotNull(formUtilsSpy);", "originalCommit": "730ab58c8855f05bc3503213794344877f29e0b0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "654ff26875b9322cb45619d7af0e0c00f4c12758", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/654ff26875b9322cb45619d7af0e0c00f4c12758", "message": ":ok_hand: fix code review requests", "committedDate": "2020-06-16T03:06:37Z", "type": "commit"}, {"oid": "68b65b29028b32fd206a9a5c8d55693e990e3433", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/68b65b29028b32fd206a9a5c8d55693e990e3433", "message": "Merge branch 'feature/testing_tuesday' of github.com:OpenSRP/opensrp-client-native-form into feature/testing_tuesday", "committedDate": "2020-06-16T03:07:26Z", "type": "commit"}, {"oid": "7ddb022ea3942982f225d879e3a712b4d3d97f27", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/7ddb022ea3942982f225d879e3a712b4d3d97f27", "message": ":ok_hand: fix code review requests", "committedDate": "2020-06-16T03:10:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYwODQxMw==", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/430#discussion_r440608413", "bodyText": "is this necessary?", "author": "bennsimon", "createdAt": "2020-06-16T06:14:05Z", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/TimePickerFactoryTest.java", "diffHunk": "@@ -0,0 +1,103 @@\n+package com.vijay.jsonwizard.widgets;\n+\n+import android.content.res.Resources;\n+import android.text.Editable;\n+import android.view.View;\n+import android.widget.RelativeLayout;\n+import android.widget.TextView;\n+\n+import com.rengwuxian.materialedittext.MaterialEditText;\n+import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.R;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+\n+import org.json.JSONObject;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.ArgumentMatchers;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+import org.powermock.reflect.Whitebox;\n+\n+import java.util.List;\n+import java.util.Locale;\n+import java.util.Set;\n+\n+public class TimePickerFactoryTest extends BaseTest {\n+    private TimePickerFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+\n+    @Mock\n+    private JsonFormFragment formFragment;\n+\n+    @Mock\n+    private Resources resources;\n+\n+    @Mock\n+    private CommonListener listener;\n+\n+    @Mock\n+    private RelativeLayout rootLayout;\n+\n+    @Mock\n+    private MaterialEditText editText;\n+\n+    @Mock\n+    private TextView duration;\n+\n+    @Before\n+    public void setUp() {\n+        MockitoAnnotations.initMocks(this);\n+        factory = new TimePickerFactory();\n+    }\n+\n+    @Test\n+    public void testTimePickerFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        TimePickerFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);", "originalCommit": "7ddb022ea3942982f225d879e3a712b4d3d97f27", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dfc1ae1cf8d816a28edd25c95ff1c662a12bb74e", "url": "https://github.com/opensrp/opensrp-client-native-form/commit/dfc1ae1cf8d816a28edd25c95ff1c662a12bb74e", "message": ":ok_hand: address code review requests", "committedDate": "2020-06-16T07:03:15Z", "type": "commit"}]}