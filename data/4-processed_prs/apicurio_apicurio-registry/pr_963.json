{"pr_number": 963, "pr_title": "Added docs for configuring default global rules", "pr_createdAt": "2020-10-29T12:45:12Z", "pr_url": "https://github.com/Apicurio/apicurio-registry/pull/963", "timeline": [{"oid": "fd1f44c45ffe1e09542ef1a51026d0fc7528ae91", "url": "https://github.com/Apicurio/apicurio-registry/commit/fd1f44c45ffe1e09542ef1a51026d0fc7528ae91", "message": "Added docs for configuring default global rules", "committedDate": "2020-10-29T12:37:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI5MzE1NA==", "url": "https://github.com/Apicurio/apicurio-registry/pull/963#discussion_r514293154", "bodyText": "Suggest \"you can configure the application...\" for active voice", "author": "smccarthy-ie", "createdAt": "2020-10-29T14:17:06Z", "path": "docs/modules/ROOT/partials/getting-started/con-registry-rules.adoc", "diffHunk": "@@ -27,9 +27,71 @@ NOTE: If no rules are configured for an artifact, the set of currently configure\n \n [id=\"registry-rules-work\"]\n = How rules work\n-Each rule has a name and optional configuration information. The registry storage maintains the list of rules for each artifact and the list of global rules. Each rule in the list consists of a name and a set of configuration properties, which are specific to the rule implementation. \n+Each rule has a name and optional configuration information. The registry storage maintains the list of rules for each artifact and the list of global rules. Each rule in the list consists of a name and a set of configuration properties, which are specific to the rule implementation.\n \n A rule is provided with the content of the current version of the artifact (if one exists) and the new version of the artifact being added. The rule implementation returns true or false depending on whether the artifact passes the rule. If not, the registry reports the reason why in an HTTP error response. Some rules might not use the previous version of the content. For example, compatibility rules use previous versions, but syntax or semantic validity rules do not.\n \n .Additional resources\n For more details, see {registry-rule-types} and {registry-rule-maturity-matrix}.\n+\n+[id=\"registry-rules-config\"]\n+= Configuring rules\n+You can configure rules individually for each artifact, as well as globally.  {registry} applies the rules configured\n+for the specific artifact, but if no rules are configured at that level it applies the globally configured rules.  If\n+no global rules are configured then no rules are applied.\n+\n+== Configuring artifact rules\n+You can configure artifact rules using the REST API or the web console.  See the relevant documentation sections\n+for more information.\n+\n+== Configuring global rules\n+You can configure global rules in several ways:\n+\n+* Use the `/rules` operations in the REST API\n+* Use the web console\n+* Set default global rules using {registry} application properties\n+\n+.Default global rules\n+When deploying {registry} it is possible to configure the application itself to enable or disable global rules.  This", "originalCommit": "fd1f44c45ffe1e09542ef1a51026d0fc7528ae91", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDUwMzkyNQ==", "url": "https://github.com/Apicurio/apicurio-registry/pull/963#discussion_r514503925", "bodyText": "I can make this change, it was just getting repetitive because the previous three sections all begin with \"You can configure...\"\nDespite that do you still recommend the change?", "author": "EricWittmann", "createdAt": "2020-10-29T19:12:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI5MzE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA2MDQwMg==", "url": "https://github.com/Apicurio/apicurio-registry/pull/963#discussion_r515060402", "bodyText": "Yes, repetition is good, especially for non-native English speakers.\nIf you go with \"When deploying {registry}, you can configure...\" it will be slightly different :)", "author": "smccarthy-ie", "createdAt": "2020-10-30T12:23:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI5MzE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI1Mzc1NA==", "url": "https://github.com/Apicurio/apicurio-registry/pull/963#discussion_r515253754", "bodyText": "OK that's good feedback, thanks.  I'll try to think more in terms of technical writing and less in terms of ... whatever I was doing before.  :)", "author": "EricWittmann", "createdAt": "2020-10-30T17:16:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI5MzE1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDI5NDU3MA==", "url": "https://github.com/Apicurio/apicurio-registry/pull/963#discussion_r514294570", "bodyText": "Suggest \"You can configure these application properties as Java system properties or include them in the Quarkus application.properties file.\" (active voice)", "author": "smccarthy-ie", "createdAt": "2020-10-29T14:19:08Z", "path": "docs/modules/ROOT/partials/getting-started/con-registry-rules.adoc", "diffHunk": "@@ -27,9 +27,71 @@ NOTE: If no rules are configured for an artifact, the set of currently configure\n \n [id=\"registry-rules-work\"]\n = How rules work\n-Each rule has a name and optional configuration information. The registry storage maintains the list of rules for each artifact and the list of global rules. Each rule in the list consists of a name and a set of configuration properties, which are specific to the rule implementation. \n+Each rule has a name and optional configuration information. The registry storage maintains the list of rules for each artifact and the list of global rules. Each rule in the list consists of a name and a set of configuration properties, which are specific to the rule implementation.\n \n A rule is provided with the content of the current version of the artifact (if one exists) and the new version of the artifact being added. The rule implementation returns true or false depending on whether the artifact passes the rule. If not, the registry reports the reason why in an HTTP error response. Some rules might not use the previous version of the content. For example, compatibility rules use previous versions, but syntax or semantic validity rules do not.\n \n .Additional resources\n For more details, see {registry-rule-types} and {registry-rule-maturity-matrix}.\n+\n+[id=\"registry-rules-config\"]\n+= Configuring rules\n+You can configure rules individually for each artifact, as well as globally.  {registry} applies the rules configured\n+for the specific artifact, but if no rules are configured at that level it applies the globally configured rules.  If\n+no global rules are configured then no rules are applied.\n+\n+== Configuring artifact rules\n+You can configure artifact rules using the REST API or the web console.  See the relevant documentation sections\n+for more information.\n+\n+== Configuring global rules\n+You can configure global rules in several ways:\n+\n+* Use the `/rules` operations in the REST API\n+* Use the web console\n+* Set default global rules using {registry} application properties\n+\n+.Default global rules\n+When deploying {registry} it is possible to configure the application itself to enable or disable global rules.  This\n+allows configuring of these global rules at installation time without any need for post-install configuration.  You\n+can use the following application property format:\n+\n+`registry.rules.global.<ruleName>`\n+\n+The following rule names are currently supported:\n+\n+* `compatibility`\n+* `validity`\n+\n+The value of the application property must be a valid configuration option that is specific to the rule being\n+configured.  The following is a table of valid values for each rule:\n+\n+[%header,cols=2*]\n+|===\n+|Rule\n+|Value\n+|*Validity*\n+a| `FULL`\n+|\n+a| `SYNTAX_ONLY`\n+|\n+a| `NONE`\n+|*Compatibility*\n+a| `BACKWARD`\n+|\n+a| `BACKWARD_TRANSITIVE`\n+|\n+a| `FORWARD`\n+|\n+a| `FORWARD_TRANSITIVE`\n+|\n+a| `FULL`\n+|\n+a| `FULL_TRANSITIVE`\n+|\n+a| `NONE`\n+|===\n+\n+NOTE: These application properties can be configured as Java system properties or included in the Quarkus\n+`application.properties` file.  See more information about configuring {registry} elsewhere in this\n+documentation and also in https://quarkus.io/guides/config#overriding-properties-at-runtime[Quarkus documentation].", "originalCommit": "fd1f44c45ffe1e09542ef1a51026d0fc7528ae91", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c7b4e7a00f8a0d7acc686fc9fcd42b2f59c01edf", "url": "https://github.com/Apicurio/apicurio-registry/commit/c7b4e7a00f8a0d7acc686fc9fcd42b2f59c01edf", "message": "changes based on review feedback", "committedDate": "2020-10-29T19:15:34Z", "type": "commit"}, {"oid": "becb3fd39077bb6622e725ca3d60f9a93bbeadfb", "url": "https://github.com/Apicurio/apicurio-registry/commit/becb3fd39077bb6622e725ca3d60f9a93bbeadfb", "message": "added feedback from review", "committedDate": "2020-10-30T17:18:29Z", "type": "commit"}]}