{"pr_number": 779, "pr_title": "Feature/GitHub actions - update release workflow to verify release was successful", "pr_createdAt": "2020-08-19T19:42:54Z", "pr_url": "https://github.com/Apicurio/apicurio-registry/pull/779", "timeline": [{"oid": "17b006cf32e8d354752f97c20b3bc01be7133a70", "url": "https://github.com/Apicurio/apicurio-registry/commit/17b006cf32e8d354752f97c20b3bc01be7133a70", "message": "Workflow enhancements\n\nExtracted out Integration tests as a separate worflow\nChanged runner OS from 'ubuntu-latest' to 'ubuntu-18.04'", "committedDate": "2020-08-19T08:59:01Z", "type": "commit"}, {"oid": "af426efe6e7ea3feaee794ff79f2918a45cb377f", "url": "https://github.com/Apicurio/apicurio-registry/commit/af426efe6e7ea3feaee794ff79f2918a45cb377f", "message": "add new job to verify-release", "committedDate": "2020-08-19T19:41:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzI3OTk1OA==", "url": "https://github.com/Apicurio/apicurio-registry/pull/779#discussion_r473279958", "bodyText": "@EricWittmann In general, if there are multiple jobs present within a single GitHub action workflow, then all the job runs in parallel. However, we can control this behavior using the needs keyword. It basically accepts an array where we can specify the job-names. This will prevent the job from running parallelly with other jobs, instead it will wait for the specified jobs to complete and will start running only if the specified jobs have completed successfully.", "author": "riprasad", "createdAt": "2020-08-19T19:50:36Z", "path": ".github/workflows/release.yaml", "diffHunk": "@@ -157,3 +157,38 @@ jobs:\n           git add -f _data/registry/releases/$FILENAME.json    #ignored due to .gitignore config\n           git commit -m \"Automated Update For Apicurio Registry Release Version: ${{steps.metadata.outputs.release-version}}\"\n           git push\n+\n+  verify-release:\n+    runs-on: ubuntu-18.04\n+    needs: [\"release\"]   # The Job gets triggered only after the \"release\" job has successfully completed. The job doesn't run in case the \"release\" job fails", "originalCommit": "af426efe6e7ea3feaee794ff79f2918a45cb377f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzI4NzY5NQ==", "url": "https://github.com/Apicurio/apicurio-registry/pull/779#discussion_r473287695", "bodyText": "Also, I decided not to have a separate workflow for this because the step that verifies the maven deploy requires us to pass the release version at runtime. We fetch this information from project.yaml. However, the GitHub action that we use to fetch the metadata from the 'project.yaml' file works only with the pull request event. This would mean that the trigger for the workflow must be the pull-request event. Another thing is, on the pull request event, both the release and verify-release workflow will get triggered simultaneously. But we want the 'verify-release' workflow to get triggered only after the release has been made otherwise it will fail.", "author": "riprasad", "createdAt": "2020-08-19T20:05:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzI3OTk1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkxNDkzNA==", "url": "https://github.com/Apicurio/apicurio-registry/pull/779#discussion_r473914934", "bodyText": "Thanks for the extra info, @riprasad !", "author": "EricWittmann", "createdAt": "2020-08-20T11:57:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzI3OTk1OA=="}], "type": "inlineReview"}, {"oid": "abb7d83c3b214b7875b0e61e6f17755dc94a62d2", "url": "https://github.com/Apicurio/apicurio-registry/commit/abb7d83c3b214b7875b0e61e6f17755dc94a62d2", "message": "Merge branch 'master' into feature/github-actions", "committedDate": "2020-08-20T09:04:59Z", "type": "commit"}, {"oid": "e1119b039de8dbe2179b5265896d3b6668b25b7e", "url": "https://github.com/Apicurio/apicurio-registry/commit/e1119b039de8dbe2179b5265896d3b6668b25b7e", "message": "Name Correction", "committedDate": "2020-08-20T09:44:16Z", "type": "commit"}, {"oid": "62aced5978e2fdde298483da10f1c96d42264513", "url": "https://github.com/Apicurio/apicurio-registry/commit/62aced5978e2fdde298483da10f1c96d42264513", "message": "Update pom.xml", "committedDate": "2020-08-20T13:34:22Z", "type": "commit"}, {"oid": "8865427ee44f898aca4dfd6190af25754b83dc15", "url": "https://github.com/Apicurio/apicurio-registry/commit/8865427ee44f898aca4dfd6190af25754b83dc15", "message": "Merge branch 'master' into feature/github-actions", "committedDate": "2020-08-20T13:34:49Z", "type": "commit"}]}