{"pr_number": 291, "pr_title": "Minor IoUtil fix, client-side deprecation warning", "pr_createdAt": "2020-02-25T12:55:36Z", "pr_url": "https://github.com/Apicurio/apicurio-registry/pull/291", "timeline": [{"oid": "ff7f68eaab4ba0a71e7045b1dbc381f9c0e94fda", "url": "https://github.com/Apicurio/apicurio-registry/commit/ff7f68eaab4ba0a71e7045b1dbc381f9c0e94fda", "message": "Bump avro from 1.9.1 to 1.9.2 (#275)\n\nBumps avro from 1.9.1 to 1.9.2.\r\n\r\nSigned-off-by: dependabot-preview[bot] <support@dependabot.com>", "committedDate": "2020-02-25T12:50:55Z", "type": "commit"}, {"oid": "a57199847328cfb41c08f56c14132c35724a4ccf", "url": "https://github.com/Apicurio/apicurio-registry/commit/a57199847328cfb41c08f56c14132c35724a4ccf", "message": "Bump json-schema-validator from 1.0.29 to 1.0.31 (#285)\n\nBumps [json-schema-validator](https://github.com/networknt/json-schema-validator) from 1.0.29 to 1.0.31.\r\n- [Release notes](https://github.com/networknt/json-schema-validator/releases)\r\n- [Changelog](https://github.com/networknt/json-schema-validator/blob/master/CHANGELOG.md)\r\n- [Commits](https://github.com/networknt/json-schema-validator/compare/1.0.29...1.0.31)\r\n\r\nSigned-off-by: dependabot-preview[bot] <support@dependabot.com>", "committedDate": "2020-02-25T12:50:55Z", "type": "commit"}, {"oid": "f4ad6339b3d44e6995d2d67f3238d4b28135859d", "url": "https://github.com/Apicurio/apicurio-registry/commit/f4ad6339b3d44e6995d2d67f3238d4b28135859d", "message": "Use IoUtil - to get uniform handling of encoding.", "committedDate": "2020-02-25T12:50:55Z", "type": "commit"}, {"oid": "d6102547848aa26469a8da18e473f64612caa96f", "url": "https://github.com/Apicurio/apicurio-registry/commit/d6102547848aa26469a8da18e473f64612caa96f", "message": "Handle deprecated artifacts on client side.", "committedDate": "2020-02-25T12:58:39Z", "type": "commit"}, {"oid": "d6102547848aa26469a8da18e473f64612caa96f", "url": "https://github.com/Apicurio/apicurio-registry/commit/d6102547848aa26469a8da18e473f64612caa96f", "message": "Handle deprecated artifacts on client side.", "committedDate": "2020-02-25T12:58:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkyODUwMg==", "url": "https://github.com/Apicurio/apicurio-registry/pull/291#discussion_r383928502", "bodyText": "Why add the artifactId and version as well?  Is this so it's available for inclusion in the log message?", "author": "EricWittmann", "createdAt": "2020-02-25T14:53:57Z", "path": "common/src/main/java/io/apicurio/registry/rest/Headers.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * Copyright 2020 Red Hat\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.apicurio.registry.rest;\n+\n+import io.apicurio.registry.types.ArtifactState;\n+\n+import java.util.function.Supplier;\n+import javax.ws.rs.core.Response;\n+\n+/**\n+ * @author Ales Justin\n+ */\n+public interface Headers {\n+    String ARTIFACT_ID = \"X-Registry-ArtifactId\";\n+    String VERSION = \"X-Registry-Version\";\n+\n+    String DEPRECATED = \"X-Registry-Deprecated\";\n+\n+    default void checkIfDeprecated(\n+        Supplier<ArtifactState> stateSupplier,\n+        String artifactId,\n+        Number version,\n+        Response.ResponseBuilder builder\n+    ) {\n+        if (stateSupplier.get() == ArtifactState.DEPRECATED) {\n+            builder.header(Headers.DEPRECATED, true);\n+            builder.header(Headers.ARTIFACT_ID, artifactId);", "originalCommit": "d6102547848aa26469a8da18e473f64612caa96f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzk0MzYyMg==", "url": "https://github.com/Apicurio/apicurio-registry/pull/291#discussion_r383943622", "bodyText": "Yes.\nSo that any client can grab that info easily from response.\nYou do already have that info in some cases, when you explicitly call for a id,version tuple,\nbut not for latest and per-globalId.", "author": "alesj", "createdAt": "2020-02-25T15:16:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzkyODUwMg=="}], "type": "inlineReview"}]}