{"pr_number": 243, "pr_title": "Distribution package for apicurio Connect converter", "pr_createdAt": "2020-01-28T10:29:52Z", "pr_url": "https://github.com/Apicurio/apicurio-registry/pull/243", "timeline": [{"oid": "8112b2cc2fd5cfe041ab2181861cf4d70aed6c23", "url": "https://github.com/Apicurio/apicurio-registry/commit/8112b2cc2fd5cfe041ab2181861cf4d70aed6c23", "message": "Distribution package for apicurio Connect converter", "committedDate": "2020-01-28T13:28:22Z", "type": "commit"}, {"oid": "8112b2cc2fd5cfe041ab2181861cf4d70aed6c23", "url": "https://github.com/Apicurio/apicurio-registry/commit/8112b2cc2fd5cfe041ab2181861cf4d70aed6c23", "message": "Distribution package for apicurio Connect converter", "committedDate": "2020-01-28T13:28:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgwODM2MQ==", "url": "https://github.com/Apicurio/apicurio-registry/pull/243#discussion_r371808361", "bodyText": "Shouldn't this be inlined with what we have in top pom.xml ?", "author": "alesj", "createdAt": "2020-01-28T13:43:23Z", "path": "distro/connect-converter/pom.xml", "diffHunk": "@@ -0,0 +1,125 @@\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>io.apicurio</groupId>\n+        <artifactId>apicurio-registry-distro</artifactId>\n+        <version>1.1.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <artifactId>apicurio-registry-distro-connect-converter</artifactId>\n+    <name>apicurio-registry-distro-connect-converter</name>\n+\n+    <properties>\n+        <assembly.descriptor>converter-distribution</assembly.descriptor>\n+        <version.jersey>2.29.1</version.jersey>\n+        <version.geronimo.config>1.2.2</version.geronimo.config>\n+        <distro.version.kafka>2.4.0</distro.version.kafka>\n+    </properties>\n+\n+    <dependencyManagement>\n+        <dependencies>\n+            <dependency>\n+                <groupId>org.apache.kafka</groupId>\n+                <artifactId>connect-json</artifactId>\n+                <version>${distro.version.kafka}</version>", "originalCommit": "8112b2cc2fd5cfe041ab2181861cf4d70aed6c23", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgxMzE1OQ==", "url": "https://github.com/Apicurio/apicurio-registry/pull/243#discussion_r371813159", "bodyText": "@alesj No, this is intentional as this depends on to what Kafka Connect version you want to deploy. Moreover you have desynced Kakfa and Kafka Connect. Kafka clients are brought from Quarkus in version 2.3.x and you are using Connect in version 2.2.x\nIt is not possible to align both on the same version -even if it is desirable as you are using Connect 2.2.x specific API and upgrading breaks the build.", "author": "jpechane", "createdAt": "2020-01-28T13:51:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgwODM2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgxNTUzMQ==", "url": "https://github.com/Apicurio/apicurio-registry/pull/243#discussion_r371815531", "bodyText": "@jpechane OK, I see ...\nYeah, we depend on Quarkus ... so we can move the Connect to the same 2.3.x ?", "author": "alesj", "createdAt": "2020-01-28T13:56:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgwODM2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgyMTY1MA==", "url": "https://github.com/Apicurio/apicurio-registry/pull/243#discussion_r371821650", "bodyText": "@alesj You can but the code needs to be updated then - the file io/apicurio/registry/connector/ConnectorApplication.java.\nJust a sidenote, maybe you can look at io.debezium.embedded.EmbeddedEngine there might be a place for cooperation", "author": "jpechane", "createdAt": "2020-01-28T14:07:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgwODM2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgwOTUzMw==", "url": "https://github.com/Apicurio/apicurio-registry/pull/243#discussion_r371809533", "bodyText": "Is this really needed?\nDo we run this plugin all the time?", "author": "alesj", "createdAt": "2020-01-28T13:45:33Z", "path": "distro/connect-converter/pom.xml", "diffHunk": "@@ -0,0 +1,125 @@\n+<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"\n+         xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <parent>\n+        <groupId>io.apicurio</groupId>\n+        <artifactId>apicurio-registry-distro</artifactId>\n+        <version>1.1.0-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <artifactId>apicurio-registry-distro-connect-converter</artifactId>\n+    <name>apicurio-registry-distro-connect-converter</name>\n+\n+    <properties>\n+        <assembly.descriptor>converter-distribution</assembly.descriptor>\n+        <version.jersey>2.29.1</version.jersey>\n+        <version.geronimo.config>1.2.2</version.geronimo.config>\n+        <distro.version.kafka>2.4.0</distro.version.kafka>\n+    </properties>\n+\n+    <dependencyManagement>\n+        <dependencies>\n+            <dependency>\n+                <groupId>org.apache.kafka</groupId>\n+                <artifactId>connect-json</artifactId>\n+                <version>${distro.version.kafka}</version>\n+            </dependency>\n+        </dependencies>\n+    </dependencyManagement>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>io.apicurio</groupId>\n+            <artifactId>apicurio-registry-utils-converter</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>io.apicurio</groupId>\n+            <artifactId>apicurio-registry-client</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>org.jboss.resteasy</groupId>\n+                    <artifactId>resteasy-client-microprofile</artifactId>\n+                </exclusion>\n+            </exclusions>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.glassfish.jersey.ext.microprofile</groupId>\n+            <artifactId>jersey-mp-rest-client</artifactId>\n+            <version>${version.jersey}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.glassfish.jersey.ext.microprofile</groupId>\n+            <artifactId>jersey-mp-config</artifactId>\n+            <version>${version.jersey}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.geronimo.config</groupId>\n+            <artifactId>geronimo-config-impl</artifactId>\n+            <version>${version.geronimo.config}</version>\n+        </dependency>\n+    </dependencies>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-assembly-plugin</artifactId>\n+                <version>${version.assembly.plugin}</version>\n+                <executions>\n+                    <execution>\n+                        <id>default</id>\n+                        <phase>package</phase>\n+                        <goals>\n+                            <goal>single</goal>\n+                        </goals>\n+                        <configuration>\n+                            <finalName>apicurio-kafka-connect-converter-${project.version}</finalName>\n+                            <attach>true</attach>  <!-- we want attach & deploy these to Maven -->\n+                            <descriptors>\n+                                <descriptor>src/assembly/${assembly.descriptor}.xml</descriptor>\n+                            </descriptors>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <!-- We don't want to run this -->\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-source-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>attach-sources</id>\n+                        <phase>non-existant</phase>\n+                    </execution>\n+                    <execution>\n+                        <id>attach-test-sources</id>\n+                        <phase>non-existant</phase>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <configuration>\n+                    <skip>true</skip>\n+                </configuration>\n+            </plugin>\n+            <plugin>", "originalCommit": "8112b2cc2fd5cfe041ab2181861cf4d70aed6c23", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgyMzI0OQ==", "url": "https://github.com/Apicurio/apicurio-registry/pull/243#discussion_r371823249", "bodyText": "Right now it is run whenever the main project is built.", "author": "jpechane", "createdAt": "2020-01-28T14:10:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgwOTUzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgxMDE1MQ==", "url": "https://github.com/Apicurio/apicurio-registry/pull/243#discussion_r371810151", "bodyText": "Didn't we use assembly plugin before?", "author": "alesj", "createdAt": "2020-01-28T13:46:38Z", "path": "pom.xml", "diffHunk": "@@ -146,6 +146,7 @@\n \t\t<version.checkstyle.plugin>3.1.0</version.checkstyle.plugin>\n         <version.properties.plugin>1.0.0</version.properties.plugin>\n         <version.dependency.plugin>3.1.1</version.dependency.plugin>\n+        <version.assembly.plugin>3.1.1</version.assembly.plugin>", "originalCommit": "8112b2cc2fd5cfe041ab2181861cf4d70aed6c23", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgxODgyMw==", "url": "https://github.com/Apicurio/apicurio-registry/pull/243#discussion_r371818823", "bodyText": "It is in version2.2-beta-5 and the version is defined out of the scope of the project. I think this should be definel locally.", "author": "jpechane", "createdAt": "2020-01-28T14:02:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgxMDE1MQ=="}], "type": "inlineReview"}, {"oid": "eb39eed3d00130c33d6b5b6e32c3d13ea1b0e36b", "url": "https://github.com/Apicurio/apicurio-registry/commit/eb39eed3d00130c33d6b5b6e32c3d13ea1b0e36b", "message": "Merge branch 'master' into connect-plugin", "committedDate": "2020-01-30T04:52:51Z", "type": "commit"}]}