{"pr_number": 964, "pr_title": "Various maven related documentation changes", "pr_createdAt": "2020-10-29T14:51:47Z", "pr_url": "https://github.com/Apicurio/apicurio-registry/pull/964", "timeline": [{"oid": "0bd0a0dfc8c1f8b04c0b01c5e7d8d667a9f0e1bd", "url": "https://github.com/Apicurio/apicurio-registry/commit/0bd0a0dfc8c1f8b04c0b01c5e7d8d667a9f0e1bd", "message": "re-organized the maven plugin docs a bit and added some info about \"test-update\" and file extensions", "committedDate": "2020-10-29T14:45:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDMzNTgyOA==", "url": "https://github.com/Apicurio/apicurio-registry/pull/964#discussion_r514335828", "bodyText": "Suggest \"even if your test passes..\" or \"even if your artifact content passes\" to be more clear?", "author": "smccarthy-ie", "createdAt": "2020-10-29T15:10:41Z", "path": "docs/modules/ROOT/partials/getting-started/proc-managing-artifacts-using-maven-plugin.adoc", "diffHunk": "@@ -12,67 +12,111 @@\n * {registry} must be installed and running in your environment\n * Maven must be installed and configured in your environment\n \n-.Procedure\n+== Registering an artifact using the Maven plug-in\n+\n+Probably the most common use case for the Maven plug-in is registering artifacts during a build.  You can accomplish\n+this by using the `register` goal provided.  Simply update your Maven `pom.xml` file to use the\n+`apicurio-registry-maven-plugin` to upload an artifact to {registry}.\n+\n+The following example shows registering an Apache Avro schema artifact:\n \n-. Update your Maven `pom.xml` file to use the `apicurio-registry-maven-plugin` to upload an artifact to {registry}. The following example shows registering an Apache Avro schema artifact:\n-+\n [source,xml]\n ----\n <plugin>\n-<groupId>io.apicurio</groupId>\n-<artifactId>apicurio-registry-maven-plugin</artifactId>\n-<version>${registry.version}</version>\n-<executions>\n-  <execution>\n-    <phase>generate-sources</phase>\n-    <goals>\n-      <goal>register</goal> <1>\n-    </goals>\n-    <configuration>\n-      <registryUrl>http://my-cluster-service-registry-myproject.example.com/api</registryUrl> <2>\n-      <artifactType>AVRO</artifactType> \n-      <artifacts>\n-        <schema1>${project.basedir}/schemas/schema1.avsc</schema1> <3>\n-      </artifacts>\n-    </configuration>\n-  </execution>\n-</executions>\n+  <groupId>io.apicurio</groupId>\n+  <artifactId>apicurio-registry-maven-plugin</artifactId>\n+  <version>${registry.version}</version>\n+  <executions>\n+    <execution>\n+      <phase>generate-sources</phase>\n+      <goals>\n+        <goal>register</goal> <1>\n+      </goals>\n+      <configuration>\n+        <registryUrl>http://my-cluster-service-registry-myproject.example.com/api</registryUrl> <2>\n+        <artifactType>AVRO</artifactType>\n+        <artifacts>\n+          <schema1>${project.basedir}/schemas/schema1.avsc</schema1> <3>\n+        </artifacts>\n+      </configuration>\n+    </execution>\n+  </executions>\n </plugin>\n ----\n-+\n <1> Specify `register` as the execution goal to upload an artifact to the registry.\n <2> You must specify the {registry} URL with the `/api` endpoint.\n-<3> You can upload multiple artifacts using the artifact ID and location. \n+<3> You can upload multiple artifacts using the artifact ID and location.\n+\n+== Downloading an artifact using the Maven plug-in\n+You can also use the Maven plug-in to download artifacts from {registry}.  This is often useful, for example, when\n+generating code from a registered schema.\n+\n+The following example shows downloading a single schema by its artifact ID.\n \n-. You can also update your Maven `pom.xml` file to download a previously registered artifact from {registry}:\n-+\n [source,xml]\n ----\n <plugin>\n <groupId>io.apicurio</groupId>\n <artifactId>apicurio-registry-maven-plugin</artifactId>\n <version>${registry.version}</version>\n-<executions>   \n+<executions>\n   <execution>\n-    <phase>generate-sources</phase> \n+    <phase>generate-sources</phase>\n     <goals>\n       <goal>download</goal> <1>\n     </goals>\n     <configuration>\n       <registryUrl>http://my-cluster-service-registry-myproject.example.com/api</registryUrl> <2>\n-          <ids>\n-            <param1>schema1</param1> <3>\n-          </ids>\n+      <ids>\n+        <param1>schema1</param1> <3>\n+      </ids>\n+      <artifactExtension>.avsc</artifactExtension> <4>\n       <outputDirectory>${project.build.directory}</outputDirectory>\n    </configuration>\n  </execution>\n-</executions>   \n+</executions>\n </plugin>\n ----\n-+\n <1> Specify `download` as the execution goal.\n <2> You must specify the {registry} URL with the `/api` endpoint.\n <3> You can download multiple artifacts to a specified directory using the artifact ID.\n+<4> The plug-in will automatically (try to) choose an appropriate file extension, but you can override it using `<artifactExtension>`.\n+\n+== Testing an artifact\n+You may want to simply verify that an artifact can be registered without actually making any changes.  This is most\n+often useful when rules have been configured in {registry}.  Testing the artifact will result in a failure if the\n+artifact content violates any of the configured rules.\n+\n+NOTE: No content will be added to {registry} even if it passes all of the configured rules.", "originalCommit": "0bd0a0dfc8c1f8b04c0b01c5e7d8d667a9f0e1bd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDM0MjUyNw==", "url": "https://github.com/Apicurio/apicurio-registry/pull/964#discussion_r514342527", "bodyText": "Suggest removing parentheses: \"automatically try to choose...\"", "author": "smccarthy-ie", "createdAt": "2020-10-29T15:19:08Z", "path": "docs/modules/ROOT/partials/getting-started/proc-managing-artifacts-using-maven-plugin.adoc", "diffHunk": "@@ -12,67 +12,111 @@\n * {registry} must be installed and running in your environment\n * Maven must be installed and configured in your environment\n \n-.Procedure\n+== Registering an artifact using the Maven plug-in\n+\n+Probably the most common use case for the Maven plug-in is registering artifacts during a build.  You can accomplish\n+this by using the `register` goal provided.  Simply update your Maven `pom.xml` file to use the\n+`apicurio-registry-maven-plugin` to upload an artifact to {registry}.\n+\n+The following example shows registering an Apache Avro schema artifact:\n \n-. Update your Maven `pom.xml` file to use the `apicurio-registry-maven-plugin` to upload an artifact to {registry}. The following example shows registering an Apache Avro schema artifact:\n-+\n [source,xml]\n ----\n <plugin>\n-<groupId>io.apicurio</groupId>\n-<artifactId>apicurio-registry-maven-plugin</artifactId>\n-<version>${registry.version}</version>\n-<executions>\n-  <execution>\n-    <phase>generate-sources</phase>\n-    <goals>\n-      <goal>register</goal> <1>\n-    </goals>\n-    <configuration>\n-      <registryUrl>http://my-cluster-service-registry-myproject.example.com/api</registryUrl> <2>\n-      <artifactType>AVRO</artifactType> \n-      <artifacts>\n-        <schema1>${project.basedir}/schemas/schema1.avsc</schema1> <3>\n-      </artifacts>\n-    </configuration>\n-  </execution>\n-</executions>\n+  <groupId>io.apicurio</groupId>\n+  <artifactId>apicurio-registry-maven-plugin</artifactId>\n+  <version>${registry.version}</version>\n+  <executions>\n+    <execution>\n+      <phase>generate-sources</phase>\n+      <goals>\n+        <goal>register</goal> <1>\n+      </goals>\n+      <configuration>\n+        <registryUrl>http://my-cluster-service-registry-myproject.example.com/api</registryUrl> <2>\n+        <artifactType>AVRO</artifactType>\n+        <artifacts>\n+          <schema1>${project.basedir}/schemas/schema1.avsc</schema1> <3>\n+        </artifacts>\n+      </configuration>\n+    </execution>\n+  </executions>\n </plugin>\n ----\n-+\n <1> Specify `register` as the execution goal to upload an artifact to the registry.\n <2> You must specify the {registry} URL with the `/api` endpoint.\n-<3> You can upload multiple artifacts using the artifact ID and location. \n+<3> You can upload multiple artifacts using the artifact ID and location.\n+\n+== Downloading an artifact using the Maven plug-in\n+You can also use the Maven plug-in to download artifacts from {registry}.  This is often useful, for example, when\n+generating code from a registered schema.\n+\n+The following example shows downloading a single schema by its artifact ID.\n \n-. You can also update your Maven `pom.xml` file to download a previously registered artifact from {registry}:\n-+\n [source,xml]\n ----\n <plugin>\n <groupId>io.apicurio</groupId>\n <artifactId>apicurio-registry-maven-plugin</artifactId>\n <version>${registry.version}</version>\n-<executions>   \n+<executions>\n   <execution>\n-    <phase>generate-sources</phase> \n+    <phase>generate-sources</phase>\n     <goals>\n       <goal>download</goal> <1>\n     </goals>\n     <configuration>\n       <registryUrl>http://my-cluster-service-registry-myproject.example.com/api</registryUrl> <2>\n-          <ids>\n-            <param1>schema1</param1> <3>\n-          </ids>\n+      <ids>\n+        <param1>schema1</param1> <3>\n+      </ids>\n+      <artifactExtension>.avsc</artifactExtension> <4>\n       <outputDirectory>${project.build.directory}</outputDirectory>\n    </configuration>\n  </execution>\n-</executions>   \n+</executions>\n </plugin>\n ----\n-+\n <1> Specify `download` as the execution goal.\n <2> You must specify the {registry} URL with the `/api` endpoint.\n <3> You can download multiple artifacts to a specified directory using the artifact ID.\n+<4> The plug-in will automatically (try to) choose an appropriate file extension, but you can override it using `<artifactExtension>`.\n+", "originalCommit": "0bd0a0dfc8c1f8b04c0b01c5e7d8d667a9f0e1bd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "60be406a861edf4752b9bfcb668c2cb1fa218557", "url": "https://github.com/Apicurio/apicurio-registry/commit/60be406a861edf4752b9bfcb668c2cb1fa218557", "message": "incorporate feedback from review", "committedDate": "2020-10-29T19:11:33Z", "type": "commit"}]}