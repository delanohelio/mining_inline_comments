{"pr_number": 799, "pr_title": "Build registry docs as part of release script", "pr_createdAt": "2020-08-31T20:10:21Z", "pr_url": "https://github.com/Apicurio/apicurio-registry/pull/799", "timeline": [{"oid": "c4ebf7204e7b9235b50993a4cbcaa997a5b6a23c", "url": "https://github.com/Apicurio/apicurio-registry/commit/c4ebf7204e7b9235b50993a4cbcaa997a5b6a23c", "message": "updated the release script to also automate the building and releasing of the documentation", "committedDate": "2020-08-31T20:09:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg4ODEyMg==", "url": "https://github.com/Apicurio/apicurio-registry/pull/799#discussion_r481888122", "bodyText": "@EricWittmann Github Actions doesn't support interactive mode yet and bash cannot allocate a tty. Hence, It will fail with the error the input device is not a TTY. If we need an interactive terminal and aren't running in a terminal on Linux or macOS, we need to use a different command-line interface. PowerShell is reported to include this support on Windows.\nThe simplest solution would be to remove the -it option from the docker run command to make it non-interactive and remove the TTY", "author": "riprasad", "createdAt": "2020-09-02T08:33:55Z", "path": ".github/workflows/release.yaml", "diffHunk": "@@ -136,20 +151,21 @@ jobs:\n         run: |\n           cd registry\n           mvn versions:set -DnewVersion=${{steps.metadata.outputs.snapshot-version}} -DgenerateBackupPoms=false -DprocessAllModules=true\n+          sed -i  \"s/version\\:\\s.*/version: \\'master\\'/g\" .antora/antora.yml\n       - name: Commit Snapshot Version ${{steps.metadata.outputs.snapshot-version}}\n         run: |\n           cd registry\n           git add .\n           git commit -m\"Automated update to next Snapshot Version: ${{steps.metadata.outputs.snapshot-version}}\"\n           git push\n-      # - name: Tweet About The Release\n-      #   uses: ethomson/send-tweet-action@v1\n-      #   with:\n-      #     status: \"${{steps.metadata.outputs.project-name}} version ${{steps.metadata.outputs.release-version}} is out!  Check out the release notes here: ${{ steps.create_release.outputs.html_url }}\"\n-      #     consumer-key: ${{ secrets.TWITTER_CONSUMER_API_KEY }}\n-      #     consumer-secret: ${{ secrets.TWITTER_CONSUMER_API_SECRET }}\n-      #     access-token: ${{ secrets.TWITTER_ACCESS_TOKEN }}\n-      #     access-token-secret: ${{ secrets.TWITTER_ACCESS_TOKEN_SECRET }}\n+      - name: Generate Project Documentation for Website\n+        run: |\n+          echo \"********** Building Registry Documentation using Antora **********\"\n+          cd docs-playbook\n+          docker pull apicurio/apicurio-docs-builder:latest\n+          docker run -v $(pwd):/apicurio-docs-playbook -it apicurio/apicurio-docs-builder:latest", "originalCommit": "c4ebf7204e7b9235b50993a4cbcaa997a5b6a23c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjAzNzk1OQ==", "url": "https://github.com/Apicurio/apicurio-registry/pull/799#discussion_r482037959", "bodyText": "Good catch - it does not need to be interactive.  I'll remove that.", "author": "EricWittmann", "createdAt": "2020-09-02T12:43:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg4ODEyMg=="}], "type": "inlineReview"}, {"oid": "29cb33905e0b110b460b681047298ab6983b1f48", "url": "https://github.com/Apicurio/apicurio-registry/commit/29cb33905e0b110b460b681047298ab6983b1f48", "message": "Update release.yaml", "committedDate": "2020-09-02T12:45:04Z", "type": "commit"}, {"oid": "cc51aca2f8012c7e3ae96b08b81ac5efbf0b6618", "url": "https://github.com/Apicurio/apicurio-registry/commit/cc51aca2f8012c7e3ae96b08b81ac5efbf0b6618", "message": "Moved the antora.yml file", "committedDate": "2020-09-09T17:12:31Z", "type": "commit"}]}