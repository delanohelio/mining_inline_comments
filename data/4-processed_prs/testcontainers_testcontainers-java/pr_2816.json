{"pr_number": 2816, "pr_title": "Update Windows docs for WSL2", "pr_createdAt": "2020-05-29T20:51:39Z", "pr_url": "https://github.com/testcontainers/testcontainers-java/pull/2816", "timeline": [{"oid": "61c0b3ebb94f62b673af8cc87604438cee354bfe", "url": "https://github.com/testcontainers/testcontainers-java/commit/61c0b3ebb94f62b673af8cc87604438cee354bfe", "message": "Update tags in GenericContainerRuleTest\n\nThis will fix incompatibility of Docker with WSL2 backend with outdated images.", "committedDate": "2020-05-29T20:47:57Z", "type": "commit"}, {"oid": "9ef8bbdd4bf5d35c74d9203bac880ec08ef95320", "url": "https://github.com/testcontainers/testcontainers-java/commit/9ef8bbdd4bf5d35c74d9203bac880ec08ef95320", "message": "Update tag in SimpleMariaDBTest\n\nAlso add section about WSL2 to docs.", "committedDate": "2020-05-29T22:02:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxMDU5Mw==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2816#discussion_r432810593", "bodyText": "I wonder - should we take the opportunity to clean up this test class a bit?\nWay back at the beginning of the project I wanted to test/demonstrate that diverse images could be used - partly to serve as documentation. Now, though, I think these are no longer truly necessary and just add extra image pull time to our build.\nThoughts?", "author": "rnorth", "createdAt": "2020-05-30T04:53:52Z", "path": "core/src/test/java/org/testcontainers/junit/GenericContainerRuleTest.java", "diffHunk": "@@ -61,21 +61,21 @@ public static void setupContent() throws FileNotFoundException {\n      * Redis\n      */\n     @ClassRule\n-    public static GenericContainer redis = new GenericContainer(\"redis:3.0.2\")\n+    public static GenericContainer redis = new GenericContainer(\"redis:6.0.4\")\n             .withExposedPorts(REDIS_PORT);\n \n     /**\n      * RabbitMQ\n      */\n     @ClassRule\n-    public static GenericContainer rabbitMq = new GenericContainer(\"rabbitmq:3.5.3\")\n+    public static GenericContainer rabbitMq = new GenericContainer(\"rabbitmq:3.8.4\")\n             .withExposedPorts(RABBITMQ_PORT);\n \n     /**\n      * MongoDB\n      */\n     @ClassRule\n-    public static GenericContainer mongo = new GenericContainer(\"mongo:3.1.5\")\n+    public static GenericContainer mongo = new GenericContainer(\"mongo:4.2.7\")\n             .withExposedPorts(MONGO_PORT);", "originalCommit": "9ef8bbdd4bf5d35c74d9203bac880ec08ef95320", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxNjI0Nw==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2816#discussion_r432816247", "bodyText": "I believe this would help reducing the tests time a lot \ud83d\udc4d", "author": "bsideup", "createdAt": "2020-05-30T06:37:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxMDU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxOTQzNA==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2816#discussion_r432819434", "bodyText": "Was thinking the same when touching this class. Maybe the class as a whole is nowadays redundant.", "author": "kiview", "createdAt": "2020-05-30T07:33:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxMDU5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgyNTc4OQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2816#discussion_r432825789", "bodyText": "Since this is not really related anymore, I will rever this changes and we can do it in a separate cleanup PR.", "author": "kiview", "createdAt": "2020-05-30T09:18:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxMDU5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxMDcxNA==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2816#discussion_r432810714", "bodyText": "I think we should be clearer to give people confidence: either we should work out why these old images aren't working and declare a specific limitation, or tell people what to look out for (or both!)\nWe should probably also attach a 'beta' label to WSL2 compatibility.", "author": "rnorth", "createdAt": "2020-05-30T04:56:14Z", "path": "docs/supported_docker_environment/windows.md", "diffHunk": "@@ -23,6 +23,12 @@ effort.\n \n * WCOW is currently not supported, since Testcontainers uses auxiliary Linux containers for certain tasks and Docker for Windows does not support hybrid engine mode at the time of writing.\n \n+## Docker for Windows with WSL2 backend\n+\n+WSL2 should work out of the box.\n+\n+However, we have observed some problems using Docker for Windows with WSL2 backend with regards to very old images from the Docker Hub that would not start, so some caution when upgrading might be in order.", "originalCommit": "9ef8bbdd4bf5d35c74d9203bac880ec08ef95320", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxOTM0NA==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2816#discussion_r432819344", "bodyText": "Yep, both sounds good.\nI am also confident that we might fight a corresponding issue in Docker or WSL repo somewhere that we can reference.", "author": "kiview", "createdAt": "2020-05-30T07:32:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxMDcxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgyNTczMQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2816#discussion_r432825731", "bodyText": "See the last comment for the reason of the images failing. I will update docs accordingly.", "author": "kiview", "createdAt": "2020-05-30T09:17:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjgxMDcxNA=="}], "type": "inlineReview"}, {"oid": "de1f111a16aae6947e069941a9ca537ed8ca8d17", "url": "https://github.com/testcontainers/testcontainers-java/commit/de1f111a16aae6947e069941a9ca537ed8ca8d17", "message": "Update Docs", "committedDate": "2020-05-30T09:32:45Z", "type": "commit"}, {"oid": "99a705b8bb42e0dc2c411ee2257bf4c668eed683", "url": "https://github.com/testcontainers/testcontainers-java/commit/99a705b8bb42e0dc2c411ee2257bf4c668eed683", "message": "Revert code changes", "committedDate": "2020-05-30T09:38:45Z", "type": "commit"}]}