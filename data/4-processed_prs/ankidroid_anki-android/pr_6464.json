{"pr_number": 6464, "pr_title": "Shrink published APK by ~3MB w/ABI splits", "pr_createdAt": "2020-06-15T01:55:44Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6464", "timeline": [{"oid": "afa68b3f9b7f4b2e5c46a57e15cf028d5c7f2f23", "url": "https://github.com/ankidroid/Anki-Android/commit/afa68b3f9b7f4b2e5c46a57e15cf028d5c7f2f23", "message": "Bumped version to 2.12alpha7\n@branch-specific", "committedDate": "2020-06-15T01:38:52Z", "type": "commit"}, {"oid": "217e0b0f6bfc5dc365b14f055399d676be875f02", "url": "https://github.com/ankidroid/Anki-Android/commit/217e0b0f6bfc5dc365b14f055399d676be875f02", "message": "Implement ABI splits for release builds\n\nThis reduces built APK to 7.5MB vs 10.4MB\n\nCareful consideration was taken to version range space so we won't exhaust it\n\nManual downloads (github attachments, mostly) are configured as armv7 since no\none uses x86 in real devices anymore - and armv8 devices can run armv7 code", "committedDate": "2020-06-15T01:46:23Z", "type": "commit"}, {"oid": "cb7730d5f501f3721d3fe77b3bad7bc2723426b0", "url": "https://github.com/ankidroid/Anki-Android/commit/cb7730d5f501f3721d3fe77b3bad7bc2723426b0", "message": "Bumped version to 2.12alpha8\n@branch-specific", "committedDate": "2020-06-15T01:50:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMDI1MQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6464#discussion_r440000251", "bodyText": "Is it worth putting the fat apk for public download?", "author": "david-allison-1", "createdAt": "2020-06-15T08:08:37Z", "path": "tools/parallel-package-release.sh", "diffHunk": "@@ -34,5 +34,5 @@ for BUILD in $BUILDNAMES; do\n     LCBUILD=`tr '[:upper:]' '[:lower:]' <<< $BUILD`\n     ./tools/parallel-package-name.sh com.ichi2.anki.$LCBUILD AnkiDroid.$BUILD\n     ./gradlew assembleRelease\n-    cp AnkiDroid/build/outputs/apk/release/AnkiDroid-release.apk ../AnkiDroid-$TAG.parallel.$BUILD.apk\n+    cp AnkiDroid/build/outputs/apk/release/AnkiDroid-armeabi-v7a-release.apk ../AnkiDroid-$TAG.parallel.$BUILD.apk", "originalCommit": "cb7730d5f501f3721d3fe77b3bad7bc2723426b0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDAwMTQ3Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/6464#discussion_r440001476", "bodyText": "universalApk seems to be set to false, where is it generated?", "author": "david-allison-1", "createdAt": "2020-06-15T08:10:50Z", "path": "AnkiDroid/build.gradle", "diffHunk": "@@ -66,6 +91,49 @@ android {\n         }\n     }\n \n+    /**\n+     * Set this to true to create five separate APKs instead of one:\n+     *   - 2 APKs that only work on ARM/ARM64 devices\n+     *   - 2 APKs that only works on x86/x86_64 devices\n+     *   - a universal APK that works on all devices", "originalCommit": "cb7730d5f501f3721d3fe77b3bad7bc2723426b0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}