{"pr_number": 7974, "pr_title": "Field name", "pr_createdAt": "2020-12-28T05:18:21Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/7974", "timeline": [{"oid": "a2221d70113fe1378241dde09ede95f7318e9908", "url": "https://github.com/ankidroid/Anki-Android/commit/a2221d70113fe1378241dde09ede95f7318e9908", "message": "Remove :, {, }, \" in field name when they are changed\n\nIn Anki, currently, those symbols are removed during database check. This will come in ankidroid when we have rust\nback-end. While we wait for back-end, and to ensure that users gets quick feedback in the list of field, this remove the\nsymbols directly", "committedDate": "2020-12-28T05:02:34Z", "type": "commit"}, {"oid": "7ee6d3a44ad1b11c328c8888f7f44c07ffa1fa6c", "url": "https://github.com/ankidroid/Anki-Android/commit/7ee6d3a44ad1b11c328c8888f7f44c07ffa1fa6c", "message": "Remove #, ^, /, tab, space from start of field name\n\nCurrently, Anki does this stripping during database check, so that there is no problem in template. We will get this\nwhen we get rust. While waiting, this ensure that user get direct feedback in the UI of the field name they enters", "committedDate": "2020-12-28T05:12:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTM1NTQzNw==", "url": "https://github.com/ankidroid/Anki-Android/pull/7974#discussion_r549355437", "bodyText": "I think if the initial change had a unit test you would have seen this expectation fail on whitespace-only field names since the trim had not happened yet, I can see you removed the trim below and the second commit puts it in a place before this empty check", "author": "mikehardy", "createdAt": "2020-12-28T13:52:50Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/ModelFieldEditor.java", "diffHunk": "@@ -177,7 +177,7 @@ private void setupLabels() {\n      */\n     private @Nullable String _uniqueName(@NonNull EditText mFieldNameInput) {\n         String input = mFieldNameInput.getText().toString()\n-                .replaceAll(\"[\\\\n\\\\r]\", \"\");\n+                .replaceAll(\"[\\\\n\\\\r{}:\\\"]\", \"\");\n         if (input.length() == 0) {", "originalCommit": "a2221d70113fe1378241dde09ede95f7318e9908", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}