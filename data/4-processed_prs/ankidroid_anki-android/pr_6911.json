{"pr_number": 6911, "pr_title": "Don't offer to type answer if there is no front", "pr_createdAt": "2020-08-18T08:56:42Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6911", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIyNjc1OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6911#discussion_r472226759", "bodyText": "The rest seems fine but I do not understand this import, it does not appear to be used in this PR, either this commit or following ones?", "author": "mikehardy", "createdAt": "2020-08-18T14:10:35Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Card.java", "diffHunk": "@@ -22,6 +22,7 @@\n import android.database.Cursor;\n import android.text.TextUtils;\n \n+import com.ichi2.anki.cardviewer.CardAppearance;", "originalCommit": "44fa5768a4e8ad703d8b5af028c93c1cb1741f7e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI2NjU3MQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6911#discussion_r472266571", "bodyText": "Probably imported automatically because of a typo. I'll delete", "author": "Arthur-Milchior", "createdAt": "2020-08-18T15:03:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIyNjc1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI2NzA0OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6911#discussion_r472267049", "bodyText": "Probably imported automatically because of a typo. I'll delete later", "author": "Arthur-Milchior", "createdAt": "2020-08-18T15:03:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjIyNjc1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA2MjYwOQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6911#discussion_r472062609", "bodyText": "This is duplicated", "author": "david-allison-1", "createdAt": "2020-08-18T10:00:38Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -1956,36 +1956,43 @@ protected void displayCardQuestion() {\n         jsApiInit();\n     }\n \n-    protected void displayCardQuestion(boolean reload) {\n-        Timber.d(\"displayCardQuestion()\");\n-        sDisplayAnswer = false;\n-\n-        setInterface();\n-\n-        String question;\n-        String displayString = \"\";\n+    private String displayString(boolean reload) {\n         if (mCurrentCard.isEmpty()) {\n-            displayString = getResources().getString(R.string.empty_card_warning);\n+            return getResources().getString(R.string.empty_card_warning);\n         } else {\n-            question = mCurrentCard.q(reload);\n+            String question = mCurrentCard.q(reload);\n             question = getCol().getMedia().escapeImages(question);\n             question = typeAnsQuestionFilter(question);\n \n             Timber.v(\"question: '%s'\", question);\n-            // Show text entry based on if the user wants to write the answer\n-            if (typeAnswer()) {\n-                mAnswerField.setVisibility(View.VISIBLE);\n-            } else {\n-                mAnswerField.setVisibility(View.GONE);\n-            }\n \n-            displayString = CardAppearance.enrichWithQADiv(question, false);\n+            return CardAppearance.enrichWithQADiv(question, false);\n \n             //if (mSpeakText) {", "originalCommit": "83647dd633e1c58c8529e2da515cebfd8053da70", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA2Mjc2NA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6911#discussion_r472062764", "bodyText": "This is not required", "author": "david-allison-1", "createdAt": "2020-08-18T10:00:54Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Card.java", "diffHunk": "@@ -22,6 +22,7 @@\n import android.database.Cursor;\n import android.text.TextUtils;\n \n+import com.ichi2.anki.cardviewer.CardAppearance;", "originalCommit": "83647dd633e1c58c8529e2da515cebfd8053da70", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA2NTA1OA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6911#discussion_r472065058", "bodyText": "Could you comment what this is for", "author": "david-allison-1", "createdAt": "2020-08-18T10:05:16Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -1956,30 +1956,40 @@ protected void displayCardQuestion() {\n         jsApiInit();\n     }\n \n-    protected void displayCardQuestion(boolean reload) {\n-        Timber.d(\"displayCardQuestion()\");\n-        sDisplayAnswer = false;\n-\n-        setInterface();\n-\n-        String displayString = \"\";\n+    private String displayString(boolean reload) {", "originalCommit": "44fa5768a4e8ad703d8b5af028c93c1cb1741f7e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM3MjE3MA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6911#discussion_r472372170", "bodyText": "I added what it does.\nCurrently, the only reason to separate this method is to move a part of the logic of the code in a separate function.\nOn longer term, the goal is to compute as much as possible in background, so that the card content can be shown immediately, instead of needing time to load the webview. But I don't expect that this explanation should appear in the code comment right now", "author": "Arthur-Milchior", "createdAt": "2020-08-18T17:43:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA2NTA1OA=="}], "type": "inlineReview"}, {"oid": "f1e08a2b1bdcdefb81c07d032af0c12ea9cbecfa", "url": "https://github.com/ankidroid/Anki-Android/commit/f1e08a2b1bdcdefb81c07d032af0c12ea9cbecfa", "message": "Empty card don't show answer field", "committedDate": "2020-08-18T17:42:06Z", "type": "forcePushed"}, {"oid": "1293974fef9afe05cdabef7b933c87ed4870f3c0", "url": "https://github.com/ankidroid/Anki-Android/commit/1293974fef9afe05cdabef7b933c87ed4870f3c0", "message": "NF: move declaration in block", "committedDate": "2020-09-07T17:17:04Z", "type": "commit"}, {"oid": "688904f213dce6a0fec0ca94d5d767f248933e3b", "url": "https://github.com/ankidroid/Anki-Android/commit/688904f213dce6a0fec0ca94d5d767f248933e3b", "message": "NF: displayString as a separate method", "committedDate": "2020-09-07T17:17:55Z", "type": "commit"}, {"oid": "f638d1025008989c883aa0e726985bd128174442", "url": "https://github.com/ankidroid/Anki-Android/commit/f638d1025008989c883aa0e726985bd128174442", "message": "Empty card don't show answer field", "committedDate": "2020-09-07T17:17:55Z", "type": "commit"}, {"oid": "f638d1025008989c883aa0e726985bd128174442", "url": "https://github.com/ankidroid/Anki-Android/commit/f638d1025008989c883aa0e726985bd128174442", "message": "Empty card don't show answer field", "committedDate": "2020-09-07T17:17:55Z", "type": "forcePushed"}]}