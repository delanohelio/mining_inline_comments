{"pr_number": 5733, "pr_title": "Added review options related to the automatic showing of answer specific to a group of decks", "pr_createdAt": "2020-02-01T15:16:36Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/5733", "timeline": [{"oid": "3bed58fa34cc4de9a34a9be3df36da70b5397b72", "url": "https://github.com/ankidroid/Anki-Android/commit/3bed58fa34cc4de9a34a9be3df36da70b5397b72", "message": "Added review options related to the automatic showing of answer specific to a group of decks", "committedDate": "2020-02-01T14:48:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgwMTI4Mw==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373801283", "bodyText": "this needs to be a string in the translations area - just adding it to the primary one (english) is sufficient, the rest will be handled by crowdin / community translators", "author": "mikehardy", "createdAt": "2020-02-01T20:40:55Z", "path": "AnkiDroid/src/main/res/xml/deck_options.xml", "diffHunk": "@@ -135,6 +135,33 @@\n                 android:key=\"revBury\"\n                 android:summary=\"@string/deck_conf_rev_bury_summ\"\n                 android:title=\"@string/deck_conf_rev_bury\" />\n+\n+            <CheckBoxPreference\n+                android:defaultValue=\"true\"\n+                android:disableDependentsState=\"true\"\n+                android:key=\"revUseGeneralTimeoutSettings\"\n+                android:title=\"Use general 'Automatic display answer' settings\" />", "originalCommit": "3bed58fa34cc4de9a34a9be3df36da70b5397b72", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgwMTM0Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373801346", "bodyText": "I am going to assume (without actually knowing) that the number 20 was chosen on purpose, and in any case it was 20 before, if it stayed at 20 then your change adds a feature without changing current experience for people, and that has value. I think it's in about 3 places, could you change all the 6's to 20s to match current default setting?", "author": "mikehardy", "createdAt": "2020-02-01T20:42:07Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -1715,8 +1728,8 @@ protected SharedPreferences restorePreferences() {\n         mRelativeButtonSize = preferences.getInt(\"answerButtonSize\", 100);\n         mSpeakText = preferences.getBoolean(\"tts\", false);\n         mPrefUseTimer = preferences.getBoolean(\"timeoutAnswer\", false);\n-        mWaitAnswerSecond = preferences.getInt(\"timeoutAnswerSeconds\", 20);\n-        mWaitQuestionSecond = preferences.getInt(\"timeoutQuestionSeconds\", 60);\n+        mPrefWaitAnswerSecond = preferences.getInt(\"timeoutAnswerSeconds\", 6);", "originalCommit": "3bed58fa34cc4de9a34a9be3df36da70b5397b72", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7b86ec777a26531d1bfe874189e761f8fda22952", "url": "https://github.com/ankidroid/Anki-Android/commit/7b86ec777a26531d1bfe874189e761f8fda22952", "message": "Option string moved to xml translations file\nChanged the default value to 20 for all of the timeoutAnswer related variables", "committedDate": "2020-02-01T22:41:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTQxOQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851419", "bodyText": "down to just whitespace things now, not sure why this did not trigger our codacy rules - I'll check that separately\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (mOptUseGeneralTimerSettings){\n          \n          \n            \n                    if (mOptUseGeneralTimerSettings) {", "author": "mikehardy", "createdAt": "2020-02-02T14:46:28Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -1945,8 +1966,19 @@ protected void displayCardQuestion() {\n         updateCard(displayString);\n         hideEaseButtons();\n \n+        // Check if it should use the general 'Timeout settings' or the ones specific to this deck\n+        if (mOptUseGeneralTimerSettings){", "originalCommit": "7b86ec777a26531d1bfe874189e761f8fda22952", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTQ0OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851449", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    }else{\n          \n          \n            \n                    } else {", "author": "mikehardy", "createdAt": "2020-02-02T14:46:40Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -1945,8 +1966,19 @@ protected void displayCardQuestion() {\n         updateCard(displayString);\n         hideEaseButtons();\n \n+        // Check if it should use the general 'Timeout settings' or the ones specific to this deck\n+        if (mOptUseGeneralTimerSettings){\n+            mUseTimer = mPrefUseTimer;\n+            mWaitAnswerSecond = mPrefWaitAnswerSecond;\n+            mWaitQuestionSecond = mPrefWaitQuestionSecond;\n+        }else{", "originalCommit": "7b86ec777a26531d1bfe874189e761f8fda22952", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTUzNQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851535", "bodyText": "This will be clobbered and in fact mess with our translation push/pull scripts to/from crowdin - you must only add strings to the default strings file, not any translations - can you remove these lines?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\'</string>", "author": "mikehardy", "createdAt": "2020-02-02T14:48:14Z", "path": "AnkiDroid/src/main/res/values-pt-rPT/10-preferences.xml", "diffHunk": "@@ -221,6 +221,8 @@\n     <string name=\"deck_conf_new_bury_summ\">As fichas novas relacionadas s\u00e3o ocultadas at\u00e9 ao dia seguinte</string>\n     <string name=\"deck_conf_rev_bury\">Ocultar revis\u00f5es relacionadas</string>\n     <string name=\"deck_conf_rev_bury_summ\">As revis\u00f5es relacionadas s\u00e3o ocultadas at\u00e9 ao dia seguinte</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\'</string>", "originalCommit": "7b86ec777a26531d1bfe874189e761f8fda22952", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MzgzMw==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373853833", "bodyText": "Ok, I'll remove them and paste them in here so that you can use them in anyway you want:\nUtilizar as defini\u00e7\u00f5es gerais para 'Mostrar resposta automaticamente'\nUtilizar as defini\u00e7\u00f5es gerais para 'Mostrar resposta automaticamente' em vez de utilizar as defini\u00e7\u00f5es deste grupo.", "author": "correia55", "createdAt": "2020-02-02T15:22:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTUzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTU1MA==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851550", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings_summ\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\' em vez de utilizar as defini\u00e7\u00f5es deste grupo</string>", "author": "mikehardy", "createdAt": "2020-02-02T14:48:26Z", "path": "AnkiDroid/src/main/res/values-pt-rPT/10-preferences.xml", "diffHunk": "@@ -221,6 +221,8 @@\n     <string name=\"deck_conf_new_bury_summ\">As fichas novas relacionadas s\u00e3o ocultadas at\u00e9 ao dia seguinte</string>\n     <string name=\"deck_conf_rev_bury\">Ocultar revis\u00f5es relacionadas</string>\n     <string name=\"deck_conf_rev_bury_summ\">As revis\u00f5es relacionadas s\u00e3o ocultadas at\u00e9 ao dia seguinte</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\'</string>\n+    <string name=\"deck_conf_use_general_timeout_settings_summ\">Utilizar as defini\u00e7\u00f5es gerais para \\'Mostrar resposta automaticamente\\' em vez de utilizar as defini\u00e7\u00f5es deste grupo</string>", "originalCommit": "7b86ec777a26531d1bfe874189e761f8fda22952", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTYyMw==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851623", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            --><resources xmlns:tools=\"http://schemas.android.com/tools\">\n          \n          \n            \n            --><resources>\n          \n      \n    \n    \n  \n\nnone of the other translations do this, so I'd like to keep this PR focused vs changing unrelated styles of doing things", "author": "mikehardy", "createdAt": "2020-02-02T14:49:39Z", "path": "AnkiDroid/src/main/res/values/10-preferences.xml", "diffHunk": "@@ -17,7 +17,7 @@\n ~\n ~ You should have received a copy of the GNU General Public License along with\n ~ this program.  If not, see <http://www.gnu.org/licenses/>.\n---><resources>\n+--><resources xmlns:tools=\"http://schemas.android.com/tools\">", "originalCommit": "7b86ec777a26531d1bfe874189e761f8fda22952", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1NDA3NQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373854075", "bodyText": "I've only added them because Android Studio suggested as a correction to the missing translations, but I'll remove them.", "author": "correia55", "createdAt": "2020-02-02T15:25:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTYyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1NzgwNQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373857805", "bodyText": "Yeah - I think it might be the right move really, but as policy here (and most open source projects really) all PRs should be laser-focused on one thing and follow local style on the way to that one thing. Style changes should be handled separately - keeps things on track", "author": "mikehardy", "createdAt": "2020-02-02T16:23:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTYyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTY0Mw==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851643", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings</string>\n          \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\">Use general \\'Automatic display answer\\' settings</string>", "author": "mikehardy", "createdAt": "2020-02-02T14:50:05Z", "path": "AnkiDroid/src/main/res/values/10-preferences.xml", "diffHunk": "@@ -204,6 +204,8 @@\n     <string name=\"deck_conf_new_bury_summ\">Related new cards are buried until the next day</string>\n     <string name=\"deck_conf_rev_bury\">Bury related reviews</string>\n     <string name=\"deck_conf_rev_bury_summ\">Related reviews are buried until the next day</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings</string>", "originalCommit": "7b86ec777a26531d1bfe874189e761f8fda22952", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1MTY1Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373851656", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings_summ\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings instead of using the settings for this group</string>\n          \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings_summ\">Use general \\'Automatic display answer\\' settings instead of using the settings for this group</string>", "author": "mikehardy", "createdAt": "2020-02-02T14:50:23Z", "path": "AnkiDroid/src/main/res/values/10-preferences.xml", "diffHunk": "@@ -204,6 +204,8 @@\n     <string name=\"deck_conf_new_bury_summ\">Related new cards are buried until the next day</string>\n     <string name=\"deck_conf_rev_bury\">Bury related reviews</string>\n     <string name=\"deck_conf_rev_bury_summ\">Related reviews are buried until the next day</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings</string>\n+    <string name=\"deck_conf_use_general_timeout_settings_summ\" tools:ignore=\"MissingTranslation\">Use general \\'Automatic display answer\\' settings instead of using the settings for this group</string>", "originalCommit": "7b86ec777a26531d1bfe874189e761f8fda22952", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "445b368e15da37f4b2b17fa53730d6e7a4e0c968", "url": "https://github.com/ankidroid/Anki-Android/commit/445b368e15da37f4b2b17fa53730d6e7a4e0c968", "message": "Fixed code style\nRemoved ignore missing translations\nRemoved portuguese translations for timeout", "committedDate": "2020-02-02T15:39:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1NzY1Mg==", "url": "https://github.com/ankidroid/Anki-Android/pull/5733#discussion_r373857652", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\">Use general \\'Automatic display answer\\' settings</string>\n          \n          \n            \n                <string name=\"deck_conf_use_general_timeout_settings\">Use general settings</string>\n          \n      \n    \n    \n  \n\nThanks for posting the screenshot! I just realized this was long enough it would face ellision so I think it is better to shorten the non-wrappable heading", "author": "mikehardy", "createdAt": "2020-02-02T16:20:35Z", "path": "AnkiDroid/src/main/res/values/10-preferences.xml", "diffHunk": "@@ -204,6 +204,8 @@\n     <string name=\"deck_conf_new_bury_summ\">Related new cards are buried until the next day</string>\n     <string name=\"deck_conf_rev_bury\">Bury related reviews</string>\n     <string name=\"deck_conf_rev_bury_summ\">Related reviews are buried until the next day</string>\n+    <string name=\"deck_conf_use_general_timeout_settings\">Use general \\'Automatic display answer\\' settings</string>", "originalCommit": "445b368e15da37f4b2b17fa53730d6e7a4e0c968", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7d39a7780d9bd621d98370abedbf76baf2480a83", "url": "https://github.com/ankidroid/Anki-Android/commit/7d39a7780d9bd621d98370abedbf76baf2480a83", "message": "Changed use general settings option title\n\nCo-Authored-By: Mike Hardy <github@mikehardy.net>", "committedDate": "2020-02-02T19:02:48Z", "type": "commit"}]}