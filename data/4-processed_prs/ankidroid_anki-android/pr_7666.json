{"pr_number": 7666, "pr_title": "Warn on Protocol-relative URLs", "pr_createdAt": "2020-11-13T04:50:59Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/7666", "timeline": [{"oid": "d00c5f217945a05bc49c7720314f95ec8de7bec1", "url": "https://github.com/ankidroid/Anki-Android/commit/d00c5f217945a05bc49c7720314f95ec8de7bec1", "message": "Warn on Protocol-relative URLs\n\nWe add a snackbar to warn the user and explain how to fix this.\n\nIn Anki, protocol-relative URLS are converted to https://\nIn AnkIDroid, they're converted to file://\n\nfile:// fails to load the image - we can't redirect from shouldInterceptRequest\nLoading synchronously is not viable, so all we can do is use a snackbar.\n\nFixes 6102", "committedDate": "2020-11-13T04:46:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjcxNDE2OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/7666#discussion_r522714169", "bodyText": "We don\u2019t expectbto translate faq ?\nIf so it\u2019s not a constant", "author": "Arthur-Milchior", "createdAt": "2020-11-13T07:14:08Z", "path": "AnkiDroid/src/main/res/values/constants.xml", "diffHunk": "@@ -153,6 +153,7 @@\n     <string name=\"link_manual_note_format_toolbar\">https://docs.ankidroid.org/manual.html#noteFormatToolbar</string>\n     <string name=\"link_faq_tts\">https://github.com/ankidroid/Anki-Android/wiki/FAQ#tts--text-to-speech-is-not-speaking</string>\n     <string name=\"link_faq_missing_media\" tools:ignore=\"Typos\">https://github.com/ankidroid/Anki-Android/wiki/FAQ#why-doesnt-my-sound-or-image-work-on-ankidroid</string>\n+    <string name=\"link_faq_invalid_protocol_relative\">https://github.com/ankidroid/Anki-Android/wiki/FAQ#why-do-my-images-need-a-protocol</string>", "originalCommit": "d00c5f217945a05bc49c7720314f95ec8de7bec1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjcyNzkwNw==", "url": "https://github.com/ankidroid/Anki-Android/pull/7666#discussion_r522727907", "bodyText": "For discussion (or a future issue), but for now, no, keep it consistent with the other FAQ entries.\nSee also:\n\n  \n    \n      Anki-Android/AnkiDroid/src/main/java/com/ichi2/anki/AnkiDroidApp.java\n    \n    \n        Lines 576 to 592\n      in\n      cbd99ed\n    \n    \n    \n    \n\n        \n          \n               /** \n        \n\n        \n          \n                * Get the url for the feedback page \n        \n\n        \n          \n                * @return \n        \n\n        \n          \n                */ \n        \n\n        \n          \n               public static String getFeedbackUrl() { \n        \n\n        \n          \n                   //TODO actually this can be done by translating \"link_help\" string for each language when the App is \n        \n\n        \n          \n                   // properly translated \n        \n\n        \n          \n                   if (isCurrentLanguage(\"ja\")) { \n        \n\n        \n          \n                       return getAppResources().getString(R.string.link_help_ja); \n        \n\n        \n          \n                   } else if (isCurrentLanguage(\"zh\")) { \n        \n\n        \n          \n                       return getAppResources().getString(R.string.link_help_zh); \n        \n\n        \n          \n                   } else if (isCurrentLanguage(\"ar\")) { \n        \n\n        \n          \n                       return getAppResources().getString(R.string.link_help_ar); \n        \n\n        \n          \n                   } else { \n        \n\n        \n          \n                       return getAppResources().getString(R.string.link_help); \n        \n\n        \n          \n                   } \n        \n\n        \n          \n               } \n        \n    \n  \n\n\n#7665 - we might need to rethink the FAQ structure, or wait for older versions of Android to fall out of fashion.", "author": "david-allison-1", "createdAt": "2020-11-13T07:28:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjcxNDE2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjk2OTM3Mw==", "url": "https://github.com/ankidroid/Anki-Android/pull/7666#discussion_r522969373", "bodyText": "yeah we just went through this - right now help and FAQ are not translated, because they refer to URLs and we (in RFC language) MUST be sure that a translator does not accidentally submit a broken link when trying to translate the URL. The translations are not quality controlled so that could slip through easily. So, constants.", "author": "mikehardy", "createdAt": "2020-11-13T14:04:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjcxNDE2OQ=="}], "type": "inlineReview"}]}