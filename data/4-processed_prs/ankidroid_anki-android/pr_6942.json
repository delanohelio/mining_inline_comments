{"pr_number": 6942, "pr_title": "NF: Time abstraction used everywhere", "pr_createdAt": "2020-08-21T19:39:56Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6942", "timeline": [{"oid": "a1487da46efd469834dd5b4b9342980e6588bc72", "url": "https://github.com/ankidroid/Anki-Android/commit/a1487da46efd469834dd5b4b9342980e6588bc72", "message": "NF: change sched ver in test does not change time", "committedDate": "2020-08-21T21:15:19Z", "type": "forcePushed"}, {"oid": "79e75492c0ae485b7f46d468174be9294092bfa9", "url": "https://github.com/ankidroid/Anki-Android/commit/79e75492c0ae485b7f46d468174be9294092bfa9", "message": "NF: change sched ver in test does not change time\n\nInstead, I find more reassuring to ensure taht when a scheduler is changed, the time remains the same", "committedDate": "2020-08-21T21:15:26Z", "type": "forcePushed"}, {"oid": "ef5f739c88df2c93bcbe78e032a79d66cbab49f5", "url": "https://github.com/ankidroid/Anki-Android/commit/ef5f739c88df2c93bcbe78e032a79d66cbab49f5", "message": "time everywhere", "committedDate": "2020-08-22T02:59:44Z", "type": "forcePushed"}, {"oid": "4f11d5d833b0c8516e9f7093b3efa73060602e11", "url": "https://github.com/ankidroid/Anki-Android/commit/4f11d5d833b0c8516e9f7093b3efa73060602e11", "message": "time everywhere", "committedDate": "2020-08-22T03:09:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTAzMQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075031", "bodyText": "? why?", "author": "david-allison-1", "createdAt": "2020-08-22T10:09:21Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/BackupManager.java", "diffHunk": "@@ -111,7 +111,7 @@ private static boolean performBackupInBackground(final String colPath, int inter\n \n         SimpleDateFormat df = new SimpleDateFormat(\"yyyy-MM-dd-HH-mm\", Locale.US);\n         Calendar cal = new GregorianCalendar();\n-        cal.setTimeInMillis(System.currentTimeMillis());\n+        cal.setTimeInMillis(System.currentTimeMillis()); // Uses real time, no col accessible", "originalCommit": "4f11d5d833b0c8516e9f7093b3efa73060602e11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTUzNw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075537", "bodyText": "I decided to save time as a member of col.\nThe trouble is that some classes such as backupmanager do not have access to col. That's normal since they actually need to manipulate files directly and not the logic behind it. So I can not keep this logic while saving time in Col.\nI could save time as a static member somewhere, but it feels like a bad idea; it seems to me that accessing it through the collection shows that it's the collection time and not current time.\nI could also give the Timer to the methods who does not have access to col. But it did not seems worth it", "author": "Arthur-Milchior", "createdAt": "2020-08-22T10:15:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTAzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NjMzMw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475076333", "bodyText": "At this point - it'd be best to have BackupManager methods accept a Time - let's go all the way.", "author": "david-allison-1", "createdAt": "2020-08-22T10:26:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTAzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTU4OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075589", "bodyText": "Can we flag this for refactoring? It'll likely be slow", "author": "david-allison-1", "createdAt": "2020-08-22T10:15:59Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/utils/Time.java", "diffHunk": "@@ -16,14 +16,52 @@\n \n package com.ichi2.libanki.utils;\n \n+import com.ichi2.libanki.DB;\n+\n+import java.util.Calendar;\n import java.util.Date;\n+import java.util.GregorianCalendar;\n \n /** Allows injection of time dependencies */\n-public interface Time {\n-    long time();\n-    Date getCurrentDate();\n+public abstract class Time {\n+    public abstract Date getCurrentDate();\n     /**The time in integer seconds. */\n-    long intTime();\n+    public abstract long intTime();\n     /**The time in integer seconds. */\n-    double now();\n+    public abstract double now();\n+\n+    public abstract long intTimeMS();\n+\n+    public Calendar calendar() {\n+        Calendar cal = Calendar.getInstance();\n+        cal.setTime(getCurrentDate());\n+        return cal;\n+    }\n+\n+    public GregorianCalendar gregorianCalendar() {\n+        GregorianCalendar cal = new GregorianCalendar();\n+        cal.setTime(getCurrentDate());\n+        return cal;\n+    }\n+\n+    /** Return a non-conflicting timestamp for table. */\n+    public long timestampID(DB db, String table) {\n+        // be careful not to create multiple objects without flushing them, or they\n+        // may share an ID.\n+        long t = intTimeMS();\n+        while (db.queryScalar(\"SELECT id FROM \" + table + \" WHERE id = ?\", t) != 0) {", "originalCommit": "4f11d5d833b0c8516e9f7093b3efa73060602e11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTgzNQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075835", "bodyText": "I am against it for two reason.\nFirst, this is exactly how it is done above. I only changed the method from one class to another for logic purpose.\nSecondly, because this test whether current time in milisecond is already in the database. This should almost always return false except by a very strange coincidence. So in practice, there is no reason to expect it to be slow", "author": "Arthur-Milchior", "createdAt": "2020-08-22T10:19:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTU4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NjE3Nw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475076177", "bodyText": "That's fair - would have been useful to just add a note to confirm this code doesn't hit a slow path regularly.", "author": "david-allison-1", "createdAt": "2020-08-22T10:24:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTU4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTY0Mw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075643", "bodyText": "just pass in a Time as the second argument", "author": "david-allison-1", "createdAt": "2020-08-22T10:16:44Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/stats/AdvancedStatistics.java", "diffHunk": "@@ -659,14 +659,14 @@ public void close() {\n                 queryBaseYoungMature\n                         + \"where type=\" + Consts.CARD_TYPE_LRN + \" and lastIvl >= 21;\";\n \n-        public EaseClassifier(SupportSQLiteDatabase db) {\n+        public EaseClassifier(Collection col, SupportSQLiteDatabase db) {", "originalCommit": "4f11d5d833b0c8516e9f7093b3efa73060602e11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NjgyMA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475076820", "bodyText": "Makes sens", "author": "Arthur-Milchior", "createdAt": "2020-08-22T10:32:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTY0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTczOQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075739", "bodyText": "? Why", "author": "david-allison-1", "createdAt": "2020-08-22T10:18:05Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Storage.java", "diffHunk": "@@ -318,7 +326,7 @@ private static void _setColVars(DB db) {\n         g.put(\"id\", 1);\n         g.put(\"name\", \"Default\");\n         g.put(\"conf\", 1);\n-        g.put(\"mod\", Utils.intTime());\n+        g.put(\"mod\", Utils.intTime()); // Uses real time, so can't be tested with mocked time", "originalCommit": "4f11d5d833b0c8516e9f7093b3efa73060602e11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NjAyMg==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475076022", "bodyText": "Same reason as above. I don't have easy access to the mock object here since I have chosen to put it into the collection. This choice can be discussed, but that did seems mostly okay.\nI can change that", "author": "Arthur-Milchior", "createdAt": "2020-08-22T10:21:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTczOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTc1OA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075758", "bodyText": "Again, why can't we pass in a Time?", "author": "david-allison-1", "createdAt": "2020-08-22T10:18:26Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Storage.java", "diffHunk": "@@ -305,7 +313,7 @@ private static void _addSchema(DB db, boolean setColConf) {\n         db.execute(\"create table if not exists graves (\" + \"    usn             integer not null,\"\n                 + \"    oid             integer not null,\" + \"    type            integer not null\" + \")\");\n         db.execute(\"INSERT OR IGNORE INTO col VALUES(1,0,0,\" +\n-                Utils.intTime(1000) + \",\" + Consts.SCHEMA_VERSION +\n+                Utils.intTime(1000) + \",\" + Consts.SCHEMA_VERSION + // Use real time, because no access to col", "originalCommit": "4f11d5d833b0c8516e9f7093b3efa73060602e11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NjYyNw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475076627", "bodyText": "I guess that now that Collection's creator take a time object, I can give a time object here", "author": "Arthur-Milchior", "createdAt": "2020-08-22T10:30:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTc1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTg5Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475075896", "bodyText": "needs to check for a null time here", "author": "david-allison-1", "createdAt": "2020-08-22T10:20:11Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java", "diffHunk": "@@ -162,21 +170,27 @@\n     private static final int UNDO_SIZE_MAX = 20;\n \n     public Collection(Context context, DB db, String path, boolean server, boolean log) {\n+        this(context, db, path, server, log, new SystemTime());\n+    }\n+\n+    @VisibleForTesting\n+    public Collection(Context context, DB db, String path, boolean server, boolean log, Time time) {", "originalCommit": "4f11d5d833b0c8516e9f7093b3efa73060602e11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NjMyNw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475076327", "bodyText": "Oops.. I added the test in Storage.collection instead of real collection constructor. Nice catch. Sorry", "author": "Arthur-Milchior", "createdAt": "2020-08-22T10:26:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTg5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NjM4OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475076389", "bodyText": "Oops.. I added the test in Storage.collection instead of real collection constructor. Nice catch. Sorry", "author": "Arthur-Milchior", "createdAt": "2020-08-22T10:26:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA3NTg5Ng=="}], "type": "inlineReview"}, {"oid": "763bc206f36232588232492673de73293f19372e", "url": "https://github.com/ankidroid/Anki-Android/commit/763bc206f36232588232492673de73293f19372e", "message": "NF: performBackupInBackground takse time", "committedDate": "2020-08-22T10:35:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA4ODcxOA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475088718", "bodyText": "Why?", "author": "david-allison-1", "createdAt": "2020-08-22T13:07:46Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/BackupManager.java", "diffHunk": "@@ -124,7 +126,7 @@ private static boolean performBackupInBackground(final String colPath, int inter\n                 lastBackupDate = null;\n             }\n         }\n-        if (lastBackupDate != null && lastBackupDate.getTime() + interval * 3600000L > Utils.intTime(1000) && !force) {\n+        if (lastBackupDate != null && lastBackupDate.getTime() + interval * 3600000L > Utils.intTime(1000) && !force) { // Uses real time, not collection ones", "originalCommit": "763bc206f36232588232492673de73293f19372e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA5MjUzNw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475092537", "bodyText": "I thought I corrected this one with your previous remark. Not sure why it's still here", "author": "Arthur-Milchior", "createdAt": "2020-08-22T13:42:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA4ODcxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA4ODc4Nw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475088787", "bodyText": "Why? Shouldn't we pin all operations off the time dependency", "author": "david-allison-1", "createdAt": "2020-08-22T13:08:52Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/dialogs/DialogHandler.java", "diffHunk": "@@ -120,7 +120,7 @@ public void run() {\n             SharedPreferences preferences = AnkiDroidApp.getSharedPrefs(mActivity.get());\n             Resources res = mActivity.get().getResources();\n             String hkey = preferences.getString(\"hkey\", \"\");\n-            long millisecondsSinceLastSync = Utils.intTime(1000) - preferences.getLong(\"lastSyncTime\", 0);\n+            long millisecondsSinceLastSync = Utils.intTime(1000) - preferences.getLong(\"lastSyncTime\", 0); // Uses real time, not collection's one.", "originalCommit": "763bc206f36232588232492673de73293f19372e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA5MjUwOA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6942#discussion_r475092508", "bodyText": "I saw the col being accessed nowhere else. I suspected that, during sync, the col may actually nov even be loaded. That would at least be the case for full sync. So it did seem risky. I corrected it", "author": "Arthur-Milchior", "createdAt": "2020-08-22T13:42:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTA4ODc4Nw=="}], "type": "inlineReview"}, {"oid": "0cd4cd3bfc88ede23801165a1674d84efacce4dd", "url": "https://github.com/ankidroid/Anki-Android/commit/0cd4cd3bfc88ede23801165a1674d84efacce4dd", "message": "NF: mock time: add time", "committedDate": "2020-08-22T13:41:33Z", "type": "forcePushed"}, {"oid": "3aa0dd1788b7ff0e6f8f5c83a47ef4f2b5b3e86e", "url": "https://github.com/ankidroid/Anki-Android/commit/3aa0dd1788b7ff0e6f8f5c83a47ef4f2b5b3e86e", "message": "NF: change sched ver in test does not change time\n\nInstead, I find more reassuring to ensure taht when a scheduler is changed, the time remains the same", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "0234a477f7751298a75dee65b113561c2454a37c", "url": "https://github.com/ankidroid/Anki-Android/commit/0234a477f7751298a75dee65b113561c2454a37c", "message": "NF: mTime->getTime()", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "6cca81508c9a8d9e1b93d855f087264dc602b18f", "url": "https://github.com/ankidroid/Anki-Android/commit/6cca81508c9a8d9e1b93d855f087264dc602b18f", "message": "NF: time is saved in Col and not sched\n\nThis ensure that time does not change when changing sched, and can be used otherwhere", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "d2919d37b5b20fef53c114a1c0a0f12d21b4b0d1", "url": "https://github.com/ankidroid/Anki-Android/commit/d2919d37b5b20fef53c114a1c0a0f12d21b4b0d1", "message": "NF: intTimeMS()", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "b1edb3411467a905f0e53470734b07f42d5c32e8", "url": "https://github.com/ankidroid/Anki-Android/commit/b1edb3411467a905f0e53470734b07f42d5c32e8", "message": "NF: timeToCalendar", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "d68771eccceabbb8500cb7f1199ed0e7cef3b293", "url": "https://github.com/ankidroid/Anki-Android/commit/d68771eccceabbb8500cb7f1199ed0e7cef3b293", "message": "NF: crtCalendar", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "cebd38237fcef9bdd2048c25fbce07be12c58308", "url": "https://github.com/ankidroid/Anki-Android/commit/cebd38237fcef9bdd2048c25fbce07be12c58308", "message": "NF: comment mock test", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "0f6fbb0718b819bd787948028eb3eec77f9b09ff", "url": "https://github.com/ankidroid/Anki-Android/commit/0f6fbb0718b819bd787948028eb3eec77f9b09ff", "message": "NF: calendar in time", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "1d3b5b367d9a103ee2dcda0b53c9eb601e0e1005", "url": "https://github.com/ankidroid/Anki-Android/commit/1d3b5b367d9a103ee2dcda0b53c9eb601e0e1005", "message": "NF: explain why real time is used", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "dbf1568d4e39b616616b21df22ce2e5b034bb93d", "url": "https://github.com/ankidroid/Anki-Android/commit/dbf1568d4e39b616616b21df22ce2e5b034bb93d", "message": "NF: uses col's time everywhere", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "19778c0149bdba66bb0101ab097f111121fea4a2", "url": "https://github.com/ankidroid/Anki-Android/commit/19778c0149bdba66bb0101ab097f111121fea4a2", "message": "NF: moving timestampID and maxID to Time", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "e00d0eb8a903367f74ee47a59b8422fe5adefdf3", "url": "https://github.com/ankidroid/Anki-Android/commit/e00d0eb8a903367f74ee47a59b8422fe5adefdf3", "message": "NF: getCol() -> col", "committedDate": "2020-08-22T15:35:47Z", "type": "commit"}, {"oid": "d2dc14e573b5f28257f6366d81a7b3c072ae5a8f", "url": "https://github.com/ankidroid/Anki-Android/commit/d2dc14e573b5f28257f6366d81a7b3c072ae5a8f", "message": "NF: mock time: add time", "committedDate": "2020-08-22T15:38:16Z", "type": "forcePushed"}, {"oid": "14786f5b68da39b764c827782eca7db05f7b2174", "url": "https://github.com/ankidroid/Anki-Android/commit/14786f5b68da39b764c827782eca7db05f7b2174", "message": "NF: test uses mock time", "committedDate": "2020-08-22T17:14:57Z", "type": "commit"}, {"oid": "41031b1d53d3684cd3fa72aebdd8183f503f2a1f", "url": "https://github.com/ankidroid/Anki-Android/commit/41031b1d53d3684cd3fa72aebdd8183f503f2a1f", "message": "NF: time is used even when there is no col", "committedDate": "2020-08-22T17:15:07Z", "type": "commit"}, {"oid": "20111696d8d316f7d64ae0a8ddb6d07399095c75", "url": "https://github.com/ankidroid/Anki-Android/commit/20111696d8d316f7d64ae0a8ddb6d07399095c75", "message": "NF: create db uses time", "committedDate": "2020-08-22T17:15:20Z", "type": "commit"}, {"oid": "f2e9fc408bb7efe0316dcb460c8123d5b800510a", "url": "https://github.com/ankidroid/Anki-Android/commit/f2e9fc408bb7efe0316dcb460c8123d5b800510a", "message": "NF: performBackupInBackground takse time", "committedDate": "2020-08-22T17:15:20Z", "type": "commit"}, {"oid": "94776009bd975ef8c1dd760edb37de18478c1635", "url": "https://github.com/ankidroid/Anki-Android/commit/94776009bd975ef8c1dd760edb37de18478c1635", "message": "NF: time method moved to System time\n\nThis ensure noone will uses Utils by accident. Especially in already existing PR, if one uses Util we'll directly see an error", "committedDate": "2020-08-22T17:15:20Z", "type": "commit"}, {"oid": "264fb0a1d81e7ffeb2ea9194f33bacdaacc9d4b6", "url": "https://github.com/ankidroid/Anki-Android/commit/264fb0a1d81e7ffeb2ea9194f33bacdaacc9d4b6", "message": "NF: remove unused constructor", "committedDate": "2020-08-22T17:15:20Z", "type": "commit"}, {"oid": "03039275a00d0477617d07e4e2f1bf50f3664358", "url": "https://github.com/ankidroid/Anki-Android/commit/03039275a00d0477617d07e4e2f1bf50f3664358", "message": "NF: Collection parametrized by time\n\nIn most of the code that makes no difference. It allows to ensure that test gets a mock time, which can then be\nmanipulated.", "committedDate": "2020-08-22T17:15:21Z", "type": "commit"}, {"oid": "88e23c287a851ade52f09f70c96a4aee94c50b37", "url": "https://github.com/ankidroid/Anki-Android/commit/88e23c287a851ade52f09f70c96a4aee94c50b37", "message": "NF: mock time: add time", "committedDate": "2020-08-22T17:15:21Z", "type": "commit"}, {"oid": "88e23c287a851ade52f09f70c96a4aee94c50b37", "url": "https://github.com/ankidroid/Anki-Android/commit/88e23c287a851ade52f09f70c96a4aee94c50b37", "message": "NF: mock time: add time", "committedDate": "2020-08-22T17:15:21Z", "type": "forcePushed"}]}