{"pr_number": 6635, "pr_title": "Split reset", "pr_createdAt": "2020-07-05T20:45:50Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6635", "timeline": [{"oid": "69cb920908d4f6eff278d4a85c839239f65ef9c6", "url": "https://github.com/ankidroid/Anki-Android/commit/69cb920908d4f6eff278d4a85c839239f65ef9c6", "message": "NF: replace reset by resetCounts\n\nCounts being the only required value here", "committedDate": "2020-07-05T23:31:04Z", "type": "forcePushed"}, {"oid": "eb6db1c092ffaaaaa9fcccbf6f36ad52b657c942", "url": "https://github.com/ankidroid/Anki-Android/commit/eb6db1c092ffaaaaa9fcccbf6f36ad52b657c942", "message": "NF: replace reset by resetCounts\n\nCounts being the only required value here", "committedDate": "2020-07-05T23:34:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTIzNjQ1NA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6635#discussion_r451236454", "bodyText": "Question: do we need a updateCutoff here, as the counts methods use mToday", "author": "david-allison-1", "createdAt": "2020-07-08T01:50:09Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sched/SchedV2.java", "diffHunk": "@@ -199,17 +205,31 @@ public void deferReset(){\n \n     public void reset() {\n         _updateCutoff();\n-        _resetLrn();\n-        _resetRev();\n-        _resetNew();\n-        mHaveQueues = true;\n+        resetCounts();\n+        resetQueues();\n+    }\n+\n+    @Override\n+    public void resetCounts() {\n+        _resetLrnCount();", "originalCommit": "eb6db1c092ffaaaaa9fcccbf6f36ad52b657c942", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI0NTIxOA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6635#discussion_r451245218", "bodyText": "Right.\nI didn't put it in both resets to avoid executing updateCutoff twice. But that was a mistake if I decide to do resetCounts otherwhere", "author": "Arthur-Milchior", "createdAt": "2020-07-08T02:24:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTIzNjQ1NA=="}], "type": "inlineReview"}, {"oid": "e966805b0445f5fe9215999534b4bfad25aa6c17", "url": "https://github.com/ankidroid/Anki-Android/commit/e966805b0445f5fe9215999534b4bfad25aa6c17", "message": "NF: replace reset by resetCounts\n\nCounts being the only required value here", "committedDate": "2020-07-08T02:23:16Z", "type": "forcePushed"}, {"oid": "9e744bd2c733ab8f35fc426843a95a22ebbbb5d7", "url": "https://github.com/ankidroid/Anki-Android/commit/9e744bd2c733ab8f35fc426843a95a22ebbbb5d7", "message": "NF: split resets in queue and counts", "committedDate": "2020-08-07T15:41:21Z", "type": "commit"}, {"oid": "28f703f6cbef4c60011bcd5b0021fa7b96e833ea", "url": "https://github.com/ankidroid/Anki-Android/commit/28f703f6cbef4c60011bcd5b0021fa7b96e833ea", "message": "NF. move _updateLrnCutoff(true) to _resetLrnCount", "committedDate": "2020-08-07T15:41:21Z", "type": "commit"}, {"oid": "d40e7b1b940a0d0ad1d22dfa6194235e632c89e5", "url": "https://github.com/ankidroid/Anki-Android/commit/d40e7b1b940a0d0ad1d22dfa6194235e632c89e5", "message": "NF: remove duplicate method", "committedDate": "2020-08-07T15:41:21Z", "type": "commit"}, {"oid": "9ba96fb4f3dec5321d9b39c8fd7a7a11f90269da", "url": "https://github.com/ankidroid/Anki-Android/commit/9ba96fb4f3dec5321d9b39c8fd7a7a11f90269da", "message": "NF: add mHaveCounts", "committedDate": "2020-08-07T15:41:21Z", "type": "commit"}, {"oid": "03762ba1e6fb8ea0fb3430f8d5e9203174620592", "url": "https://github.com/ankidroid/Anki-Android/commit/03762ba1e6fb8ea0fb3430f8d5e9203174620592", "message": "NF: replace resetFoo by their definition", "committedDate": "2020-08-07T15:41:21Z", "type": "commit"}, {"oid": "927416b9e77d9886954c708507693884762339b3", "url": "https://github.com/ankidroid/Anki-Android/commit/927416b9e77d9886954c708507693884762339b3", "message": "NF: reorder reset\n\nCounts never depends on queue", "committedDate": "2020-08-07T15:41:21Z", "type": "commit"}, {"oid": "700ee3364ce3991a61891d035fdeedee838ae418", "url": "https://github.com/ankidroid/Anki-Android/commit/700ee3364ce3991a61891d035fdeedee838ae418", "message": "NF: split reset in counts and queue", "committedDate": "2020-08-07T15:41:32Z", "type": "commit"}, {"oid": "5e9a2529b69f43a406801820e15514cfcbc9c3ee", "url": "https://github.com/ankidroid/Anki-Android/commit/5e9a2529b69f43a406801820e15514cfcbc9c3ee", "message": "NF: getCard reset only the required part\n\n_checkDay already deal with day, so no immediate need fo _updateCutoff.", "committedDate": "2020-08-07T15:41:33Z", "type": "commit"}, {"oid": "a5615e90626758904e60f9ced760dcb042fc4e6b", "url": "https://github.com/ankidroid/Anki-Android/commit/a5615e90626758904e60f9ced760dcb042fc4e6b", "message": "NF: replace reset by resetCounts\n\nCounts being the only required value here", "committedDate": "2020-08-07T15:41:33Z", "type": "commit"}, {"oid": "a5615e90626758904e60f9ced760dcb042fc4e6b", "url": "https://github.com/ankidroid/Anki-Android/commit/a5615e90626758904e60f9ced760dcb042fc4e6b", "message": "NF: replace reset by resetCounts\n\nCounts being the only required value here", "committedDate": "2020-08-07T15:41:33Z", "type": "forcePushed"}]}