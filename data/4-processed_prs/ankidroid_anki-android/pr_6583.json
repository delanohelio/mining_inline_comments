{"pr_number": 6583, "pr_title": "NF: Decrement moved to decrementCount", "pr_createdAt": "2020-06-29T15:43:22Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6583", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzEyNTI2Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/6583#discussion_r447125266", "bodyText": "Make it obvious to match the two lines, and add a comment on decrementCount explaining why\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            /* upstream decrease mLrnCount. We do it in\n          \n          \n            \n                            // mLrnCount -= card.getLeft() / 1000; See decrementCount()", "author": "david-allison-1", "createdAt": "2020-06-29T17:11:15Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sched/Sched.java", "diffHunk": "@@ -438,7 +438,8 @@ protected Card _getLrnCard(boolean collapse) {\n             if (mLrnQueue.getFirst()[0] < cutoff) {\n                 long id = mLrnQueue.remove()[1];\n                 Card card = mCol.getCard(id);\n-                mLrnCount -= card.getLeft() / 1000;\n+                /* upstream decrease mLrnCount. We do it in", "originalCommit": "5dabb7487ef0abfed87fb75b4cea681eecddb510", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE3Njc3NA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6583#discussion_r447176774", "bodyText": "Gah... GitHub's UI changes are terrible, sorry about that\nCould you also perform this change for the other line comments", "author": "david-allison-1", "createdAt": "2020-06-29T18:41:51Z", "path": "AnkiDroid/src/main/java/com/ichi2/libanki/sched/Sched.java", "diffHunk": "@@ -438,7 +438,8 @@ protected Card _getLrnCard(boolean collapse) {\n             if (mLrnQueue.getFirst()[0] < cutoff) {\n                 long id = mLrnQueue.remove()[1];\n                 Card card = mCol.getCard(id);\n-                mLrnCount -= card.getLeft() / 1000;\n+                // mLrnCount -= card.getLeft() / 1000; See decrementCount()\n+                 * decrementCount once the card is returned.*/", "originalCommit": "bc49548260197d74a22db34061f67f43fecaf272", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "85f94eb66ba5103d570d19c2d5608f016904423a", "url": "https://github.com/ankidroid/Anki-Android/commit/85f94eb66ba5103d570d19c2d5608f016904423a", "message": "NF: Decrement moved to decrementCount\n\nThis allow in future commit to precompute the next card without\nchanging the count; the counts being changed only when getCard\nactually return a card.\n\nThis would also avoid the code duplication of\n```\ncard.getLeft() / 1000;\n```\nExcept that instead we get comment duplication.", "committedDate": "2020-06-29T18:42:05Z", "type": "commit"}, {"oid": "85f94eb66ba5103d570d19c2d5608f016904423a", "url": "https://github.com/ankidroid/Anki-Android/commit/85f94eb66ba5103d570d19c2d5608f016904423a", "message": "NF: Decrement moved to decrementCount\n\nThis allow in future commit to precompute the next card without\nchanging the count; the counts being changed only when getCard\nactually return a card.\n\nThis would also avoid the code duplication of\n```\ncard.getLeft() / 1000;\n```\nExcept that instead we get comment duplication.", "committedDate": "2020-06-29T18:42:05Z", "type": "forcePushed"}]}