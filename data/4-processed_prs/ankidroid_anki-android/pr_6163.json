{"pr_number": 6163, "pr_title": "Block file import if no storage permissions ", "pr_createdAt": "2020-05-13T15:42:37Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6163", "timeline": [{"oid": "a5034c158c5462b5b3f3fb5df8a55637fc745e4f", "url": "https://github.com/ankidroid/Anki-Android/commit/a5034c158c5462b5b3f3fb5df8a55637fc745e4f", "message": "NF: Extract launchDeckPickerIfNoOtherTasks", "committedDate": "2020-05-13T15:09:25Z", "type": "commit"}, {"oid": "c2dedc65fe38c0f0f3c902e2e7dbe966a1a54df2", "url": "https://github.com/ankidroid/Anki-Android/commit/c2dedc65fe38c0f0f3c902e2e7dbe966a1a54df2", "message": "NF: Extract handleFileImport", "committedDate": "2020-05-13T15:22:46Z", "type": "commit"}, {"oid": "a48f36c7be84f4d7e4b06394ccc043a251cf3f66", "url": "https://github.com/ankidroid/Anki-Android/commit/a48f36c7be84f4d7e4b06394ccc043a251cf3f66", "message": "NF: Extract handleSyncIntent", "committedDate": "2020-05-13T15:23:08Z", "type": "commit"}, {"oid": "26b292df05e7b2b0747e75fa1141ffc5f0d44983", "url": "https://github.com/ankidroid/Anki-Android/commit/26b292df05e7b2b0747e75fa1141ffc5f0d44983", "message": "NF: Extract handleReviewIntent", "committedDate": "2020-05-13T15:23:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU1MjgzNQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6163#discussion_r424552835", "bodyText": "Altered to be more of a status report (as opposed to something that sounds like they actively did it) and pairing with the specific actions we want them to take - should take users through it with less cognitive load, what do you think?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"intent_handler_failed_no_storage_permission\">Storage permission denied. Unable to perform action.</string>\n          \n          \n            \n                <string name=\"intent_handler_failed_no_storage_permission\">Missing required storage permission. Please grant storage permission then retry your action.</string>", "author": "mikehardy", "createdAt": "2020-05-13T16:00:05Z", "path": "AnkiDroid/src/main/res/values/03-dialogs.xml", "diffHunk": "@@ -184,4 +184,7 @@\n     <string name=\"error_selecting_image\">Error selecting image. Please see manual. %s</string>\n     <string name=\"error_deleting_image\">Error deleting image</string>\n     <string name=\"failed_to_apply_background_image\">Failed to apply background image %s</string>\n+\n+    <!-- Global Intent handler -->\n+    <string name=\"intent_handler_failed_no_storage_permission\">Storage permission denied. Unable to perform action.</string>", "originalCommit": "1eab9abaad752a0ca39421993deda27abb147d49", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU2MjExNA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6163#discussion_r424562114", "bodyText": "Looks better to me. Will rebase this in in about 10 mins", "author": "david-allison-1", "createdAt": "2020-05-13T16:13:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU1MjgzNQ=="}], "type": "inlineReview"}, {"oid": "c573280228701a21ff117276a6cfb605312d01ec", "url": "https://github.com/ankidroid/Anki-Android/commit/c573280228701a21ff117276a6cfb605312d01ec", "message": "Block file import if no storage permissions\n\nThis displayed a dialog before we requested permissions, clicking \"Add\"\ncrashes, as we had no storage permissions.\n\nWe could do it better in the DeckPicker handler and persist the\noperation, but we're somewhat constrained for time, and asking the user\nto perform the operation again isn't a huge ask\n\nFixes #6157", "committedDate": "2020-05-13T16:19:41Z", "type": "commit"}, {"oid": "c573280228701a21ff117276a6cfb605312d01ec", "url": "https://github.com/ankidroid/Anki-Android/commit/c573280228701a21ff117276a6cfb605312d01ec", "message": "Block file import if no storage permissions\n\nThis displayed a dialog before we requested permissions, clicking \"Add\"\ncrashes, as we had no storage permissions.\n\nWe could do it better in the DeckPicker handler and persist the\noperation, but we're somewhat constrained for time, and asking the user\nto perform the operation again isn't a huge ask\n\nFixes #6157", "committedDate": "2020-05-13T16:19:41Z", "type": "forcePushed"}]}