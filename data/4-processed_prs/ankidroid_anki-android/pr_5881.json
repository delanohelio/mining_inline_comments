{"pr_number": 5881, "pr_title": "Various Renderer Crash Improvements", "pr_createdAt": "2020-03-31T09:41:51Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/5881", "timeline": [{"oid": "840b1132f70960bada4c000d3fb0854d9ccf9824", "url": "https://github.com/ankidroid/Anki-Android/commit/840b1132f70960bada4c000d3fb0854d9ccf9824", "message": "Fix Race condition on mCardFrame\n\nThere was a period of time where mCardFrame as null, this caused a NPE\nwhen the AnswerCardHandler called blockControls()", "committedDate": "2020-03-30T07:46:12Z", "type": "commit"}, {"oid": "84996bcaafe75f581340ff127d7b3229a3b06fa8", "url": "https://github.com/ankidroid/Anki-Android/commit/84996bcaafe75f581340ff127d7b3229a3b06fa8", "message": "Added solid reference to mCardFrameParent\n\nTo fix any race conditions by obtaining mCardFrame.getParent()", "committedDate": "2020-03-30T07:54:07Z", "type": "commit"}, {"oid": "e8dca0637b01c267cf5f36db03dc79e61ceac336", "url": "https://github.com/ankidroid/Anki-Android/commit/e8dca0637b01c267cf5f36db03dc79e61ceac336", "message": "NF: Extract handleHardwareScrollButtons", "committedDate": "2020-03-30T08:03:00Z", "type": "commit"}, {"oid": "cdb28f917b1c762cb8ae40553db8187ed0019a2f", "url": "https://github.com/ankidroid/Anki-Android/commit/cdb28f917b1c762cb8ae40553db8187ed0019a2f", "message": "NF: Extract webView Parameter", "committedDate": "2020-03-30T08:06:08Z", "type": "commit"}, {"oid": "aa3b843af577dcc040d563760676e4e37279d20d", "url": "https://github.com/ankidroid/Anki-Android/commit/aa3b843af577dcc040d563760676e4e37279d20d", "message": "WebView Render Crash: Preemptively remove views\n\nAdditional hardening against a crash by removing references to the\nWebView", "committedDate": "2020-03-30T09:29:55Z", "type": "commit"}, {"oid": "00f19645757c9314fe8ec3ed63076a0e93f6c94e", "url": "https://github.com/ankidroid/Anki-Android/commit/00f19645757c9314fe8ec3ed63076a0e93f6c94e", "message": "WebView Render Dialog: Disable \"Cancel\"\n\nA user could cancel the dialog, leaving the reviewer in an inconsistent\nstate", "committedDate": "2020-03-30T09:33:09Z", "type": "commit"}, {"oid": "e876d5f9067000f78183cd1d8eb903635c0f4ddc", "url": "https://github.com/ankidroid/Anki-Android/commit/e876d5f9067000f78183cd1d8eb903635c0f4ddc", "message": "Allow failure in destroyWebView\n\nWe won't lock on the variable on dispose (in case of secondary failure)\nso allow for an exception", "committedDate": "2020-03-30T09:36:07Z", "type": "commit"}, {"oid": "11967bbd05471105359166eb9cf0221fd6c90d1c", "url": "https://github.com/ankidroid/Anki-Android/commit/11967bbd05471105359166eb9cf0221fd6c90d1c", "message": "NF: Extract loadContentIntoCard", "committedDate": "2020-03-30T09:39:13Z", "type": "commit"}, {"oid": "d46eb58708c4902e31202ccf0432b0106ca68316", "url": "https://github.com/ankidroid/Anki-Android/commit/d46eb58708c4902e31202ccf0432b0106ca68316", "message": "NF: Extract loadUrlInViewer", "committedDate": "2020-03-30T09:41:39Z", "type": "commit"}, {"oid": "75c58ac42eb130b24f85f1bc6c3efd50a7f660e1", "url": "https://github.com/ankidroid/Anki-Android/commit/75c58ac42eb130b24f85f1bc6c3efd50a7f660e1", "message": "Reorder disposal operations to avoid warning", "committedDate": "2020-03-30T10:52:04Z", "type": "commit"}, {"oid": "dab29a1128e8473fdce7998f99c15b95e3ca4b42", "url": "https://github.com/ankidroid/Anki-Android/commit/dab29a1128e8473fdce7998f99c15b95e3ca4b42", "message": "Restore gestures after WebView crash", "committedDate": "2020-03-30T10:53:00Z", "type": "commit"}, {"oid": "8890c196afc8459452d3425d3d0f925294115afe", "url": "https://github.com/ankidroid/Anki-Android/commit/8890c196afc8459452d3425d3d0f925294115afe", "message": "Added lock on mCard to disallow null\n\nPreviously, mCard could temporarily be null when the render process was\nbeing reset. We use a lock to guard against this.\n\nSince we're a reader/writer lock, heavy on the read side, we only block\nthe UI thread in an exceptional circumstance (when the render process\ncrashes).", "committedDate": "2020-03-31T09:40:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDc3OTYyNg==", "url": "https://github.com/ankidroid/Anki-Android/pull/5881#discussion_r400779626", "bodyText": "Issue found: The method 'updateCard(String)' has an NPath complexity of 7680", "author": "timrae", "createdAt": "2020-03-31T09:44:37Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java", "diffHunk": "@@ -2242,30 +2303,30 @@ private void addAnswerSounds(String answer) {\n     }\n \n \n-    private void updateCard(String content) {\n+    private void updateCard(final String newContent) {", "originalCommit": "8890c196afc8459452d3425d3d0f925294115afe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}