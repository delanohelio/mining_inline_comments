{"pr_number": 5871, "pr_title": "Fix Fullscreen (No Answer Buttons) Reviewer Gestures", "pr_createdAt": "2020-03-27T21:52:58Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/5871", "timeline": [{"oid": "89bf07e9ef381566e7b169a233ff1fa061a35239", "url": "https://github.com/ankidroid/Anki-Android/commit/89bf07e9ef381566e7b169a233ff1fa061a35239", "message": "NF: Added UI visibility logging", "committedDate": "2020-03-27T21:05:13Z", "type": "commit"}, {"oid": "988d2e06ab6ab597a811e9daf8c0ae2f976269cc", "url": "https://github.com/ankidroid/Anki-Android/commit/988d2e06ab6ab597a811e9daf8c0ae2f976269cc", "message": "Added Margin on Fling Gesture\n\nFixes #5741\n\nA user has reported that they can no longer access the status bar as it\nwas treated as a gesture and quickly hid the menu.\n\nWe fix this by defining a margin, and not processing gestures within the\nmargin.", "committedDate": "2020-03-27T21:08:27Z", "type": "commit"}, {"oid": "741627fd370b43e506314c9563c36bff6cf57e67", "url": "https://github.com/ankidroid/Anki-Android/commit/741627fd370b43e506314c9563c36bff6cf57e67", "message": "Whiteboard: Continue Drawing if UI is shown\n\nWhen testing a fix for #5741, it was discovered that showing the\nsystem UI in the whiteboard via a swipe down triggered a gesture.\n\nThis was because the whiteboard took focus of the touch events\nuntil the system UI was shown.\n\nWhen the system UI was shown, drawing was cancelled, and an event where\nthe system UI was visible started. This caused the gesture listener to\nfire.\n\nAs the gesture listener is started when the System UI is shown, it\ndoesn't have context on the true start position of the fling event\n, so we can't say that it was from the status bar.\n\nTo fix this, we block all gestures in fullscreen when the whiteboard is\nshown until the whiteboard has stopped drawing.", "committedDate": "2020-03-28T07:44:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY4MTI2Mw==", "url": "https://github.com/ankidroid/Anki-Android/pull/5871#discussion_r399681263", "bodyText": "just noting the import move is gratuitous", "author": "mikehardy", "createdAt": "2020-03-28T16:29:47Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Whiteboard.java", "diffHunk": "@@ -36,6 +35,8 @@\n import java.lang.ref.WeakReference;\n import java.util.Stack;\n \n+import androidx.core.content.ContextCompat;", "originalCommit": "741627fd370b43e506314c9563c36bff6cf57e67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "193dbccb5b8df372be066b6ea98e6b25ee4a418f", "url": "https://github.com/ankidroid/Anki-Android/commit/193dbccb5b8df372be066b6ea98e6b25ee4a418f", "message": "Whiteboard: Continue Drawing if UI is shown\n\nWhen testing a fix for #5741, it was discovered that showing the\nsystem UI in the whiteboard via a swipe down triggered a gesture.\n\nThis was because the whiteboard took focus of the touch events\nuntil the system UI was shown.\n\nWhen the system UI was shown, drawing was cancelled, and an event where\nthe system UI was visible started. This caused the gesture listener to\nfire.\n\nAs the gesture listener is started when the System UI is shown, it\ndoesn't have context on the true start position of the fling event\n, so we can't say that it was from the status bar.\n\nTo fix this, we block all gestures in fullscreen when the whiteboard is\nshown until the whiteboard has stopped drawing.", "committedDate": "2020-03-28T22:23:58Z", "type": "commit"}, {"oid": "193dbccb5b8df372be066b6ea98e6b25ee4a418f", "url": "https://github.com/ankidroid/Anki-Android/commit/193dbccb5b8df372be066b6ea98e6b25ee4a418f", "message": "Whiteboard: Continue Drawing if UI is shown\n\nWhen testing a fix for #5741, it was discovered that showing the\nsystem UI in the whiteboard via a swipe down triggered a gesture.\n\nThis was because the whiteboard took focus of the touch events\nuntil the system UI was shown.\n\nWhen the system UI was shown, drawing was cancelled, and an event where\nthe system UI was visible started. This caused the gesture listener to\nfire.\n\nAs the gesture listener is started when the System UI is shown, it\ndoesn't have context on the true start position of the fling event\n, so we can't say that it was from the status bar.\n\nTo fix this, we block all gestures in fullscreen when the whiteboard is\nshown until the whiteboard has stopped drawing.", "committedDate": "2020-03-28T22:23:58Z", "type": "forcePushed"}]}