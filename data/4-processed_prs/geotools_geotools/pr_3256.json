{"pr_number": 3256, "pr_title": "GEOT-6755 New factory HTTPClientFactory and library gt-http", "pr_createdAt": "2020-12-08T14:10:11Z", "pr_url": "https://github.com/geotools/geotools/pull/3256", "timeline": [{"oid": "a3b82c11f37501b6c28417789ed441530da63fd0", "url": "https://github.com/geotools/geotools/commit/a3b82c11f37501b6c28417789ed441530da63fd0", "message": "New project gt-http and namespace org.geotools.http\n\nA new project under library gt-http.\nMoved some classes in namespace org.geotools.data.ows from gt-main to gt-http unchanged.\nCreated HTTPClientFactory and included it in CommonFactoryFinder.", "committedDate": "2020-12-08T08:52:31Z", "type": "commit"}, {"oid": "7b7a6ca1d50e9700b0685e325f44424183120416", "url": "https://github.com/geotools/geotools/commit/7b7a6ca1d50e9700b0685e325f44424183120416", "message": "Usage of gt-http for mbstyle", "committedDate": "2020-12-08T08:53:12Z", "type": "commit"}, {"oid": "07ed78222ab5799126daaad8a9bc073c790ccbf6", "url": "https://github.com/geotools/geotools/commit/07ed78222ab5799126daaad8a9bc073c790ccbf6", "message": "Usage of gt-http for gt-tile-client", "committedDate": "2020-12-08T08:53:41Z", "type": "commit"}, {"oid": "24c4ddb9b16bf0868b3da305a9dd1957486dce7c", "url": "https://github.com/geotools/geotools/commit/24c4ddb9b16bf0868b3da305a9dd1957486dce7c", "message": "Usage of gt-http for gt-wms", "committedDate": "2020-12-08T08:54:02Z", "type": "commit"}, {"oid": "673bd06edf02605472e903d916df9306a2247bf9", "url": "https://github.com/geotools/geotools/commit/673bd06edf02605472e903d916df9306a2247bf9", "message": "Usage of gt-http for gt-wmts", "committedDate": "2020-12-08T08:54:32Z", "type": "commit"}, {"oid": "6478dc2f74a8a6a432f756b7499dbfbbd23a43f0", "url": "https://github.com/geotools/geotools/commit/6478dc2f74a8a6a432f756b7499dbfbbd23a43f0", "message": "Usage of gt-http for gt-mongodb", "committedDate": "2020-12-08T08:55:03Z", "type": "commit"}, {"oid": "f0211a91866a82599a4923bcb04ca1069cb22f0b", "url": "https://github.com/geotools/geotools/commit/f0211a91866a82599a4923bcb04ca1069cb22f0b", "message": "Usage of gt-http for gt-wfs-ng", "committedDate": "2020-12-08T08:59:28Z", "type": "commit"}, {"oid": "4516acefe56fa2211b84a97d6073ac0276d3bf37", "url": "https://github.com/geotools/geotools/commit/4516acefe56fa2211b84a97d6073ac0276d3bf37", "message": "Usage of gt-http for gt-wps", "committedDate": "2020-12-08T08:59:54Z", "type": "commit"}, {"oid": "4f023ad4b7c67dd5fd458e74d87a5fc3a1665102", "url": "https://github.com/geotools/geotools/commit/4f023ad4b7c67dd5fd458e74d87a5fc3a1665102", "message": "Added MultithreadedHttpClient to gt-http\n\nBased on the one in gt-wms", "committedDate": "2020-12-08T09:57:23Z", "type": "commit"}, {"oid": "db89c5290e1d3f48276ba72dac7c090a30e4c821", "url": "https://github.com/geotools/geotools/commit/db89c5290e1d3f48276ba72dac7c090a30e4c821", "message": "Deprecated MultithreadedHttpClient in gt-wms", "committedDate": "2020-12-08T09:58:41Z", "type": "commit"}, {"oid": "ef3a6bc76f80d28617a111942e967353eebd4fc6", "url": "https://github.com/geotools/geotools/commit/ef3a6bc76f80d28617a111942e967353eebd4fc6", "message": "Deprecated MultithreadedHttpClient in gt-wfs-ng", "committedDate": "2020-12-08T09:59:10Z", "type": "commit"}, {"oid": "77068e65da5935c7b882a5758884ddc591bab0e0", "url": "https://github.com/geotools/geotools/commit/77068e65da5935c7b882a5758884ddc591bab0e0", "message": "Added hint HTTP_LOGGING", "committedDate": "2020-12-08T11:36:50Z", "type": "commit"}, {"oid": "8207fbbfb1486be824dd5d85b644689174b7a5e2", "url": "https://github.com/geotools/geotools/commit/8207fbbfb1486be824dd5d85b644689174b7a5e2", "message": "Fixed pom", "committedDate": "2020-12-08T22:24:37Z", "type": "commit"}, {"oid": "90fc5878ebdc714eb78d1d67fd7e01dd6e23c124", "url": "https://github.com/geotools/geotools/commit/90fc5878ebdc714eb78d1d67fd7e01dd6e23c124", "message": "Fixed formatting", "committedDate": "2020-12-09T07:15:44Z", "type": "commit"}, {"oid": "deaa2d092dd8fb61f7139be6778aaaa80182b191", "url": "https://github.com/geotools/geotools/commit/deaa2d092dd8fb61f7139be6778aaaa80182b191", "message": "Avoid instance variables in factory class", "committedDate": "2020-12-09T09:19:27Z", "type": "commit"}, {"oid": "7c8a872ee69474d147e9645ccb5f834f21646fb6", "url": "https://github.com/geotools/geotools/commit/7c8a872ee69474d147e9645ccb5f834f21646fb6", "message": "Missing a *", "committedDate": "2020-12-09T09:44:07Z", "type": "commit"}, {"oid": "a878dd5b6fadcc518ece47920c2c6f242871f0f4", "url": "https://github.com/geotools/geotools/commit/a878dd5b6fadcc518ece47920c2c6f242871f0f4", "message": "Now it seems correct", "committedDate": "2020-12-09T09:54:54Z", "type": "commit"}, {"oid": "1d660ef2020840b78e40f6d84addd7d12c8ae73e", "url": "https://github.com/geotools/geotools/commit/1d660ef2020840b78e40f6d84addd7d12c8ae73e", "message": "After running QA locally", "committedDate": "2020-12-09T11:56:08Z", "type": "commit"}, {"oid": "19040d0ebd71e6cc3c1e3e50375d971d52be060e", "url": "https://github.com/geotools/geotools/commit/19040d0ebd71e6cc3c1e3e50375d971d52be060e", "message": "Set HTTP_LOGGING and HTTP_CLIENT by system properties", "committedDate": "2020-12-10T20:41:02Z", "type": "commit"}, {"oid": "8fcb97e4d492a18a1945bf55803abe9c33bc97d0", "url": "https://github.com/geotools/geotools/commit/8fcb97e4d492a18a1945bf55803abe9c33bc97d0", "message": "Reversal of MultithreadedHttpClient", "committedDate": "2020-12-10T20:41:40Z", "type": "commit"}, {"oid": "3c14aa96bb6cd9aa496adab9f9acaa5c2107e16a", "url": "https://github.com/geotools/geotools/commit/3c14aa96bb6cd9aa496adab9f9acaa5c2107e16a", "message": "Documentation", "committedDate": "2020-12-10T22:03:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA0MjM2Mg==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r542042362", "bodyText": "Just reviewing now, a shame we did not have this to discuss at our bi-weekly meeting as it is an interesting topic.\nI think if we adopt this functionality it would end up going into a core library such as metadata or referencing (rather than introducing new jars / dependencies).", "author": "jodygarnett", "createdAt": "2020-12-14T00:30:35Z", "path": "modules/library/http/pom.xml", "diffHunk": "@@ -0,0 +1,63 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!-- =======================================================================    \n+        Maven Project Configuration File                                        \n+                                                                                \n+        The Geotools Project                                                    \n+            http://www.geotools.org/                                            \n+                                                                                \n+        Version: $Id$              \n+     ======================================================================= -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>library</artifactId>\n+        <groupId>org.geotools</groupId>\n+        <version>25-SNAPSHOT</version>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+    <artifactId>gt-http</artifactId>", "originalCommit": "3c14aa96bb6cd9aa496adab9f9acaa5c2107e16a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2MzY1Nw==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r542163657", "bodyText": "It was discussed in the open already, bug tracker and list, and we suggested to move it to a separate module, to avoid adding a new dependency (commons http client) to all geotools modules.", "author": "aaime", "createdAt": "2020-12-14T07:27:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA0MjM2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE3NzgyNQ==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r542177825", "bodyText": "I feel that this functionality has been somewhat hidden away in Geotools. And as #2804 suggest, there are more usages of http-calls than I've handled.\nI think it would've been great if all http traffic is handled likewise throughout Geotools. Then it would be easier to deal with bug's regarding https / proxy, and add functionality like logging and url-controlling (ref. #2804 ).\nWhether that would be in a new namespace within gt-main, moved to a different library as gt-referencing or gt-metadata (of which I would prefer gt-metadata), or as a separate module in gt-http isn't up to me to decide.\nIt's perfectly fine for me to wait for the next bi-weekly meeting.", "author": "roarbra", "createdAt": "2020-12-14T07:57:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA0MjM2Mg=="}], "type": "inlineReview"}, {"oid": "44df3f19c534eda5a3241d08ccb9eb3b8738d292", "url": "https://github.com/geotools/geotools/commit/44df3f19c534eda5a3241d08ccb9eb3b8738d292", "message": "Reworked on tests for gt-mbstyle, gt-wfs-ng, gt-wmts\n\nTried to minimize Mock-classes.\nAvoid subclasses just for the purpose of injecting a mock client.", "committedDate": "2020-12-18T15:23:18Z", "type": "commit"}, {"oid": "36c5a9015f56fdab663d016418859c423ba4fd6b", "url": "https://github.com/geotools/geotools/commit/36c5a9015f56fdab663d016418859c423ba4fd6b", "message": "Fixed pom of gt-main", "committedDate": "2020-12-19T00:53:06Z", "type": "commit"}, {"oid": "cecd562c0f6295b82085888a9f08620fa995980f", "url": "https://github.com/geotools/geotools/commit/cecd562c0f6295b82085888a9f08620fa995980f", "message": "Revert \"Fixed pom of gt-main\"\n\nThis reverts commit 36c5a9015f56fdab663d016418859c423ba4fd6b.", "committedDate": "2020-12-19T07:10:13Z", "type": "commit"}, {"oid": "09aa1e0f4c8c16a90ab0508d3f32b6237ae3b43d", "url": "https://github.com/geotools/geotools/commit/09aa1e0f4c8c16a90ab0508d3f32b6237ae3b43d", "message": "Verbose fmt-maven-plugin", "committedDate": "2020-12-21T22:47:52Z", "type": "commit"}, {"oid": "7ccf6572a21de70ad9c29f3db61bed996c413ee3", "url": "https://github.com/geotools/geotools/commit/7ccf6572a21de70ad9c29f3db61bed996c413ee3", "message": "Merge remote-tracking branch 'upstream/master' into http-creation", "committedDate": "2020-12-21T23:00:21Z", "type": "commit"}, {"oid": "7ab69a9efbcbf16d59237a3e2fa82742077ccc7d", "url": "https://github.com/geotools/geotools/commit/7ab69a9efbcbf16d59237a3e2fa82742077ccc7d", "message": "Revert \"Verbose fmt-maven-plugin\"\n\nThis reverts commit 09aa1e0f4c8c16a90ab0508d3f32b6237ae3b43d.", "committedDate": "2020-12-22T07:01:51Z", "type": "commit"}, {"oid": "82a3c3c2cd286e2288938f93ed18d671e30bc996", "url": "https://github.com/geotools/geotools/commit/82a3c3c2cd286e2288938f93ed18d671e30bc996", "message": "Created plugin gt-http-commons with MultithreadedHttpClient\n\nCopied class from gt-wms with some functionality from gt-wfs-ng. Deprecated both MultithreadedHttpClient's within gt-wms and gt-wfs-ng", "committedDate": "2020-12-23T09:32:30Z", "type": "commit"}, {"oid": "4f92eeb8f2a942567415d02bbf784c2fbb08428c", "url": "https://github.com/geotools/geotools/commit/4f92eeb8f2a942567415d02bbf784c2fbb08428c", "message": "Changed from TestHttpResponse to MockHttpResponse in gt-http", "committedDate": "2020-12-23T09:33:07Z", "type": "commit"}, {"oid": "048dc7b28f74480524c26d6dcd538bff816813e0", "url": "https://github.com/geotools/geotools/commit/048dc7b28f74480524c26d6dcd538bff816813e0", "message": "Changed MockHttpClient and MockHttpResponse to gt-http", "committedDate": "2020-12-23T10:36:52Z", "type": "commit"}, {"oid": "41fbc9f98d27b634279c0a20a0bae8d05203301e", "url": "https://github.com/geotools/geotools/commit/41fbc9f98d27b634279c0a20a0bae8d05203301e", "message": "Changed MultithreadedHttpClient to gt-http-commons", "committedDate": "2020-12-23T10:37:16Z", "type": "commit"}, {"oid": "f2879f9e0fbd0958936f8a63de362b6824865d82", "url": "https://github.com/geotools/geotools/commit/f2879f9e0fbd0958936f8a63de362b6824865d82", "message": "Revert \"Changed from TestHttpResponse to MockHttpResponse in gt-http\"\n\nThis reverts commit 4f92eeb8f2a942567415d02bbf784c2fbb08428c.", "committedDate": "2020-12-24T06:29:26Z", "type": "commit"}, {"oid": "d4a234d6426171ffba8703c5ac859bbb55ee7969", "url": "https://github.com/geotools/geotools/commit/d4a234d6426171ffba8703c5ac859bbb55ee7969", "message": "Charset should be set as an argument for the constructor", "committedDate": "2020-12-28T09:08:48Z", "type": "commit"}, {"oid": "a3e3c0c38a8941812000e398445007c7fb220f91", "url": "https://github.com/geotools/geotools/commit/a3e3c0c38a8941812000e398445007c7fb220f91", "message": "Charset as an argument for the constructor", "committedDate": "2020-12-28T09:16:35Z", "type": "commit"}, {"oid": "157a9c07083fe7b748ed995db6fc5877457b3bf8", "url": "https://github.com/geotools/geotools/commit/157a9c07083fe7b748ed995db6fc5877457b3bf8", "message": "Extracted some inner classes from WFSTestData", "committedDate": "2020-12-28T09:17:43Z", "type": "commit"}, {"oid": "f515f8c7ff03755e9a7b6f07b07a7bf0ac0c4ced", "url": "https://github.com/geotools/geotools/commit/f515f8c7ff03755e9a7b6f07b07a7bf0ac0c4ced", "message": "TestHttpResponse and TestHttpClient based on abstract classes instead of interface", "committedDate": "2020-12-28T14:38:44Z", "type": "commit"}, {"oid": "2b1503da6a85e60ffd17d26f04695965cb1ee3d7", "url": "https://github.com/geotools/geotools/commit/2b1503da6a85e60ffd17d26f04695965cb1ee3d7", "message": "Reworked how TestWFSClient handles mock up responses", "committedDate": "2020-12-29T12:02:15Z", "type": "commit"}, {"oid": "360960647789ad8f606f6bd5821fb2b2fd09295f", "url": "https://github.com/geotools/geotools/commit/360960647789ad8f606f6bd5821fb2b2fd09295f", "message": "Change from CommonFactoryFinder to HTTPFactoryFinder\n\nRemoved the new functions from CommonFactoryFinder and instead created a new class HTTPFactoryFinder within gt-http.", "committedDate": "2021-01-06T09:08:02Z", "type": "commit"}, {"oid": "9fb80eb0d2be2a0908c12801bf018c7a627b1e69", "url": "https://github.com/geotools/geotools/commit/9fb80eb0d2be2a0908c12801bf018c7a627b1e69", "message": "Avoid Spotbugs failure", "committedDate": "2021-01-06T12:37:37Z", "type": "commit"}, {"oid": "c9b2358923d66ec47280c670b54255f23f2b8956", "url": "https://github.com/geotools/geotools/commit/c9b2358923d66ec47280c670b54255f23f2b8956", "message": "Changing namespace from org.geotools.data.ows to org.geotools.http\n\nThe change is done for these types:\nAbstractHttpClient\nDelegateHTTPClient\nDelegateHTTPResponse\nHTTPClient\nHTTPResponse\nLoggingHTTPClient\nSimpleHttpClient\nMockHttpClient\nMockHttpResponse\n\nThe original versions remains as deprecated.\n\nSome temporary classes was added, for handling certain method signatures:\nDelegateOldHTTPClient\nDelegateOldHTTPResponse", "committedDate": "2021-01-07T11:20:21Z", "type": "commit"}, {"oid": "cf62dc887d21a5c43e2dcf826c6f6affe1697b4a", "url": "https://github.com/geotools/geotools/commit/cf62dc887d21a5c43e2dcf826c6f6affe1697b4a", "message": "Merge remote-tracking branch 'upstream/master' into http-creation", "committedDate": "2021-01-07T14:02:23Z", "type": "commit"}, {"oid": "75e38021e6cb8afa02e471f1cc6b0f5c531c04fb", "url": "https://github.com/geotools/geotools/commit/75e38021e6cb8afa02e471f1cc6b0f5c531c04fb", "message": "Fixed warnings caused of deprecation", "committedDate": "2021-01-09T13:01:43Z", "type": "commit"}, {"oid": "ecec6294286e98ecf7e896dc1f45ead3b88981ce", "url": "https://github.com/geotools/geotools/commit/ecec6294286e98ecf7e896dc1f45ead3b88981ce", "message": "Avoid import of deprecated classes", "committedDate": "2021-01-09T21:58:57Z", "type": "commit"}, {"oid": "a60c0a6b7ff318b6fb70250357e06b2dc7c36778", "url": "https://github.com/geotools/geotools/commit/a60c0a6b7ff318b6fb70250357e06b2dc7c36778", "message": "Fixed formatting", "committedDate": "2021-01-10T00:11:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkxODUxMQ==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r554918511", "bodyText": "Good work on the documentation. One important bit seems missing though, upgrade instructions.\nI've noticed classes have been moved out of gt-main, and then in another package (which is a good thing, Java 11 does not like having classes in the same package spread across different jars). However, this is also a breaking change that might affect downstream users (as it's a public class).\nNow, what we normally do in these cases, it's to move the class, and then create a new one in the old places, that extends from the one moved, and deprecate it. This way users get a deprecation warning and have some time to migrate their software.\nNow, in this case I've seen there are several classes moved:\n\nI'm not going to ask to create new subclasses for all of them, but at minimum, the upgrade.rst should  contain instructions on how to migrate existing client code (new dependencies, package switch, whatever else is necessary)", "author": "aaime", "createdAt": "2021-01-11T09:35:52Z", "path": "docs/user/library/index.rst", "diffHunk": "@@ -21,3 +21,4 @@ support for common spatial formats such as shapefiles.\n    cql/index\n    xml/index\n    render/index\n+   http/index", "originalCommit": "a60c0a6b7ff318b6fb70250357e06b2dc7c36778", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDk0ODk4NA==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r554948984", "bodyText": "I'm also confused as to how moving and deprecation have been managed, I'm seeing a mix of classes getting moved, and others getting deprecated, with no other code changes, but having a copy in gt-http (e..g, MockHttpClient). Can you clarify?", "author": "aaime", "createdAt": "2021-01-11T10:28:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkxODUxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTU5ODQ3Mg==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r555598472", "bodyText": "@aaime Here is a table with the deprecated classes and their replacement. I see from the commit history that it isn't easy to follow along which files went where. Some of the files were also changed before I decided to deprecate them.\n\n\n\nDeprecated class\nModule (original module)\nReplacement (other module)\n\n\n\n\norg.geotools.data.ows.AbstractHttpClient\ngt-http (gt-main)\norg.geotools.http.AbstractHttpClient\n\n\norg.geotools.data.ows.MockHttpClient\ngt-http (gt-main)\norg.geotools.http.MockHttpClient\n\n\norg.geotools.data.ows.MockHttpResponse\ngt-http (gt-main)\norg.geotools.http.MockHttpResponse\n\n\norg.geotools.data.ows.DelegateHTTPClient\ngt-http (gt-main)\norg.geotools.http.DelegateHTTPClient\n\n\norg.geotools.data.ows.DelegateHTTPResponse\ngt-http (gt-main)\norg.geotools.http.DelegateHTTPResponse\n\n\norg.geotools.data.ows.HTTPClient\ngt-http (gt-main)\norg.geotools.http.HTTPClient\n\n\norg.geotools.data.ows.HTTPResponse\ngt-http (gt-main)\norg.geotools.http.HTTPResponse\n\n\norg.geotools.data.ows.LoggingHTTPClient\ngt-http (gt-main)\norg.geotools.http.LoggingHTTPClient\n\n\norg.geotools.data.ows.SimpleHttpClient\ngt-http (gt-main)\norg.geotools.http.SimpleHttpClient\n\n\norg.geotools.ows.wms.MultithreadedHttpClient\ngt-wms\norg.geotools.http.MultithreadedHttpClient (gt-http-commons)\n\n\norg.geotools.ows.MockHttpClient\ngt-wms\norg.geotools.http.MockHttpClient\n\n\norg.geotools.ows.MockHttpResponse\ngt-wms\norg.geotools.http.MockHttpResponse\n\n\norg.geotools.ows.wmts.MockHttpClient\ngt-wmts\norg.geotools.http.AbstractHttpClient\n\n\norg.geotools.data.mongodb.MockHTTPClient\ngt-mongodb\norg.geotools.http.MockHttpClient\n\n\norg.geotools.data.mongodb.MockHttpResponse\ngt-mongodb\norg.geotools.http.MockHttpResponse\n\n\norg.geotools.ows.wfs.MultithreadedHttpClient\ngt-wfs-ng\norg.geotools.http.MultithreadedHttpClient (gt-http-commons)\n\n\norg.geotools.ows.wfs.AbstractTestHTTPClient\ngt-wfs-ng\norg.geotools.http.AbstractHttpClient\n\n\norg.geotools.data.Base64\ngt-main\norg.geotools.util.Base64 (gt-metadata)", "author": "roarbra", "createdAt": "2021-01-12T08:43:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkxODUxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODY0MTY2Mw==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r558641663", "bodyText": "Adding this table to the documentation.", "author": "jodygarnett", "createdAt": "2021-01-15T23:07:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkxODUxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyMDcxNw==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r554920717", "bodyText": "This surprised me, I was expecting a different relationship, with gt-http being a light module with minimal dependencies, focused on being just a HTTP client, with gt-main depending on it. I'm guessing that user modules already depend on gt-main for other reasons, so it does not change things much GeoTools wise, but it would be relevant if others want to use the gt-http module downstreams.\nIt this due to the \"ows\" classes being moved here? Why was that done?", "author": "aaime", "createdAt": "2021-01-11T09:39:49Z", "path": "modules/plugin/http-commons/pom.xml", "diffHunk": "@@ -0,0 +1,106 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!-- =======================================================================\n+        Maven Project Configuration File\n+\n+        The Geotools Project\n+            http://www.geotools.org/\n+\n+        Version: $Id\n+     ======================================================================= -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+           xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+           xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\n+                               http://maven.apache.org/maven-v4_0_0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <parent>\n+    <groupId>org.geotools</groupId>\n+    <artifactId>plugin</artifactId>\n+    <version>25-SNAPSHOT</version>\n+  </parent>\n+\n+  <!-- =========================================================== -->\n+  <!--     Module Description                                      -->\n+  <!-- =========================================================== -->\n+    <groupId>org.geotools</groupId>\n+    <artifactId>gt-http-commons</artifactId>\n+    <packaging>jar</packaging>\n+    <name>HTTP Client based on Apache Commons HttpClient</name>\n+\n+    <description>\n+    Provides HTTPClient with support for Multithreading.\n+    </description>\n+\n+    <licenses>\n+        <license>\n+            <name>Lesser General Public License (LGPL)</name>\n+            <url>http://www.gnu.org/copyleft/lesser.txt</url>\n+            <distribution>repo</distribution>\n+        </license>\n+    </licenses>\n+\n+\n+  <!-- =========================================================== -->\n+  <!--     Developers and Contributors                             -->\n+  <!-- =========================================================== -->\n+    <developers>\n+        <developer>\n+        <name>Roar Br&#230;nden</name>\n+        <email>roar.brenden.no@gmail.com</email>\n+            <roles>\n+                <role>Module Maintainer</role>\n+                <role>Java Developer</role>\n+            </roles>\n+        </developer>\n+    </developers>\n+\n+    <dependencies>\n+        <dependency>\n+          <groupId>org.geotools</groupId>", "originalCommit": "a60c0a6b7ff318b6fb70250357e06b2dc7c36778", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyMTkzMQ==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r554921931", "bodyText": "This dependency surprised me, I was expecting a different relationship, with gt-http being a light module with minimal dependencies, focused on being just a HTTP client, with gt-main depending on it. I'm guessing that user modules already depend on gt-main for other reasons, so it does not change things much GeoTools wise, but it would be relevant if others want to use the gt-http module downstreams.\nIt this due to the \"ows\" classes being moved here? Why was that done, it makes the module less of  a pure HTTP client and more of a base module for implementing OWS clients.", "author": "aaime", "createdAt": "2021-01-11T09:42:04Z", "path": "modules/library/http/pom.xml", "diffHunk": "@@ -0,0 +1,88 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!-- =======================================================================    \n+        Maven Project Configuration File                                        \n+                                                                                \n+        The Geotools Project                                                    \n+            http://www.geotools.org/                                            \n+                                                                                \n+        Version: $Id$              \n+     ======================================================================= -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>library</artifactId>\n+        <groupId>org.geotools</groupId>\n+        <version>25-SNAPSHOT</version>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+    <artifactId>gt-http</artifactId>\n+    <name>HTTP Clients</name>\n+    <description>A set of Http clients created by a factory method.</description>\n+    \n+  <licenses>\n+    <license>\n+      <name>Lesser General Public License (LGPL)</name>\n+      <url>http://www.gnu.org/copyleft/lesser.txt</url>\n+      <distribution>repo</distribution>\n+    </license>\n+  </licenses>\n+  \n+  \n+  <!-- =========================================================== -->\n+  <!--     Developers and Contributors                             -->\n+  <!-- =========================================================== -->\n+  <developers>\n+    <developer>\n+      <name>Roar Br&#230;nden</name>\n+      <email>roar.brenden.no@gmail.com</email>\n+      <roles>\n+        <role>Java Developer</role>\n+        <role>Module Maintainer</role>\n+      </roles>\n+    </developer>\n+  </developers>\n+\n+\n+  <!-- =========================================================== -->\n+  <!--     Dependency Management                                   -->\n+  <!-- =========================================================== -->\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.geotools</groupId>\n+            <artifactId>gt-main</artifactId>", "originalCommit": "a60c0a6b7ff318b6fb70250357e06b2dc7c36778", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTAzOTk0OQ==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r555039949", "bodyText": "@aaime Good point! I didn't see that gt-main could depend on gt-http. That way I wouldn't have to move all those classes in \"ows\".\nThere are only one problem SimpleHttpClient is using the class org.geotools.data.Base64 which lives in gt-main. How could I solve that problem? I think SimpleHttpClient should live in gt-http.", "author": "roarbra", "createdAt": "2021-01-11T13:18:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyMTkzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTA0MjY0Ng==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r555042646", "bodyText": "I guess Base64 could be moved in gt-metadata, \"org.geotools.util\" package, and the existing class can become a deprecated subclass of the one in gt-metadata. gt-http will have to depend on gt-metadata anyways due to logging dependencies.", "author": "aaime", "createdAt": "2021-01-11T13:23:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyMTkzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTA0NjE0MQ==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r555046141", "bodyText": "I see that solution. Base64 seems unrelated to the other classes of org.geotools.data, but should that be done in a separate PR?", "author": "roarbra", "createdAt": "2021-01-11T13:29:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyMTkzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTA0ODA0NA==", "url": "https://github.com/geotools/geotools/pull/3256#discussion_r555048044", "bodyText": "Hmmm... the move makes sense in the context of this PR though. I'd make it here and be done with it.", "author": "aaime", "createdAt": "2021-01-11T13:32:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDkyMTkzMQ=="}], "type": "inlineReview"}, {"oid": "1b759bb7937a5b897b882eac0fd6b88ecd7e64fe", "url": "https://github.com/geotools/geotools/commit/1b759bb7937a5b897b882eac0fd6b88ecd7e64fe", "message": "Moved org.geotools.data.Base64 to org.geotools.util.Base64\n\nDeprecated in old namespace in gt-main, and copied to new namespace in gt-metadata", "committedDate": "2021-01-11T13:57:00Z", "type": "commit"}, {"oid": "b68c4e66452192d6df1fc25e0844d4669db6eb3c", "url": "https://github.com/geotools/geotools/commit/b68c4e66452192d6df1fc25e0844d4669db6eb3c", "message": "Switched dependency for gt-main and gt-http\n\nMoved deprecated classes implementing org.geotools.data.ows.HTTPClient and HTTPResponse to gt-http.\nMoved classes depending on org.geotools.http.HTTPClient and HTTPResponse back to gt-main.", "committedDate": "2021-01-11T14:23:31Z", "type": "commit"}, {"oid": "b78635a78cda5bab682446339da2b03012708fd9", "url": "https://github.com/geotools/geotools/commit/b78635a78cda5bab682446339da2b03012708fd9", "message": "Too early to commons-httpclient", "committedDate": "2021-01-11T15:53:05Z", "type": "commit"}, {"oid": "ee1ef4ee558d1f1fc183958dfa277c34693fca5b", "url": "https://github.com/geotools/geotools/commit/ee1ef4ee558d1f1fc183958dfa277c34693fca5b", "message": "Documentation in upgrade.rst", "committedDate": "2021-01-12T09:22:44Z", "type": "commit"}, {"oid": "955dfac136be5b4750ad0e636c25b291f0b2ec32", "url": "https://github.com/geotools/geotools/commit/955dfac136be5b4750ad0e636c25b291f0b2ec32", "message": "Avoid excessive log-messages", "committedDate": "2021-01-15T16:20:26Z", "type": "commit"}, {"oid": "c070d8830a169c021e7fbf2623ac38ac3f91e05e", "url": "https://github.com/geotools/geotools/commit/c070d8830a169c021e7fbf2623ac38ac3f91e05e", "message": "Merge remote-tracking branch 'upstream/master' into http-creation", "committedDate": "2021-01-15T21:12:12Z", "type": "commit"}, {"oid": "923342c02e86b37da9377b007502c986b2b73a95", "url": "https://github.com/geotools/geotools/commit/923342c02e86b37da9377b007502c986b2b73a95", "message": "Merge remote-tracking branch 'upstream/master' into http-creation", "committedDate": "2021-01-17T08:01:52Z", "type": "commit"}, {"oid": "25915a9032d9b42079ebb7814e40d8343d2d3bcc", "url": "https://github.com/geotools/geotools/commit/25915a9032d9b42079ebb7814e40d8343d2d3bcc", "message": "Refactor namespace in http-commons", "committedDate": "2021-01-17T08:03:05Z", "type": "commit"}, {"oid": "7b1212526681a1e6e5a8ae621bbc7dedcd253e58", "url": "https://github.com/geotools/geotools/commit/7b1212526681a1e6e5a8ae621bbc7dedcd253e58", "message": "Avoid split package", "committedDate": "2021-01-18T17:14:12Z", "type": "commit"}, {"oid": "0c3ec771841282668d109e3cf138b9b3de67bffa", "url": "https://github.com/geotools/geotools/commit/0c3ec771841282668d109e3cf138b9b3de67bffa", "message": "Factory for each http client\n\nAlmost same approach as earlier to create, but calling directly:\nHTTPFactoryFinder.getClient()\nHTTPFactoryFinder.getClient(hints)", "committedDate": "2021-01-19T20:21:53Z", "type": "commit"}, {"oid": "16fe1799cf15f02b6ed68aa98a97681531e4f599", "url": "https://github.com/geotools/geotools/commit/16fe1799cf15f02b6ed68aa98a97681531e4f599", "message": "Moved scanForPluginsIfNeeded to deepest method", "committedDate": "2021-01-19T20:43:56Z", "type": "commit"}, {"oid": "5dcb83892559828cbc46b80f893b4a50cf8eefba", "url": "https://github.com/geotools/geotools/commit/5dcb83892559828cbc46b80f893b4a50cf8eefba", "message": "Revert to original FactoryRegistry", "committedDate": "2021-01-19T21:00:28Z", "type": "commit"}, {"oid": "6aac3fcbc2df14b08bd0b0cdccc15b2b8e6de3c7", "url": "https://github.com/geotools/geotools/commit/6aac3fcbc2df14b08bd0b0cdccc15b2b8e6de3c7", "message": "HTTPClientFactory can create different clients", "committedDate": "2021-01-19T22:54:49Z", "type": "commit"}, {"oid": "79b5f80fd8d76b78bd0430681a005efac09cb8cf", "url": "https://github.com/geotools/geotools/commit/79b5f80fd8d76b78bd0430681a005efac09cb8cf", "message": "Break out headings and before / after code examples", "committedDate": "2021-01-20T06:45:03Z", "type": "commit"}, {"oid": "03f3a18515e8a71a7491068f549165bf2f24b13c", "url": "https://github.com/geotools/geotools/commit/03f3a18515e8a71a7491068f549165bf2f24b13c", "message": "Renamed HTTPFactoryFinder.getClient to createClient", "committedDate": "2021-01-20T08:07:28Z", "type": "commit"}, {"oid": "56a849ef1c55bb5f205856ba4a88dde759ad4e56", "url": "https://github.com/geotools/geotools/commit/56a849ef1c55bb5f205856ba4a88dde759ad4e56", "message": "HTTPConnectionPooling and logging MultithreadedHttpClient will work", "committedDate": "2021-01-21T14:17:49Z", "type": "commit"}, {"oid": "4331fd5f803fdbcbfcea455637968d3602f62c6a", "url": "https://github.com/geotools/geotools/commit/4331fd5f803fdbcbfcea455637968d3602f62c6a", "message": "Now formatted gt-wfs-ng as well", "committedDate": "2021-01-21T14:46:55Z", "type": "commit"}, {"oid": "c70918f27af6aaa825c05c27aec5451503efe992", "url": "https://github.com/geotools/geotools/commit/c70918f27af6aaa825c05c27aec5451503efe992", "message": "Renamed HTTPFactoryFinder to HTTPClientFinder", "committedDate": "2021-01-25T06:05:17Z", "type": "commit"}, {"oid": "b1d0eb8972a36923719f367cabb7abca0edf46e3", "url": "https://github.com/geotools/geotools/commit/b1d0eb8972a36923719f367cabb7abca0edf46e3", "message": "HTTPConnectionPooling extends Closeable", "committedDate": "2021-01-25T07:11:15Z", "type": "commit"}, {"oid": "af7b3295f166c42e7cea786eac72dba2bada6afb", "url": "https://github.com/geotools/geotools/commit/af7b3295f166c42e7cea786eac72dba2bada6afb", "message": "Added HTTPBehavior and HTTPClientFinder.createClient(behaviors)", "committedDate": "2021-01-25T17:18:22Z", "type": "commit"}, {"oid": "fb175b89c9502af7cd392f5ddb7d48b94c73ec9e", "url": "https://github.com/geotools/geotools/commit/fb175b89c9502af7cd392f5ddb7d48b94c73ec9e", "message": "Update HTTPBehavior.java", "committedDate": "2021-01-25T17:19:43Z", "type": "commit"}, {"oid": "7208d38a3628cad95de415ff9a967a31fdac0f6b", "url": "https://github.com/geotools/geotools/commit/7208d38a3628cad95de415ff9a967a31fdac0f6b", "message": "Update SpriteMockHttpClientFactory.java", "committedDate": "2021-01-25T20:53:57Z", "type": "commit"}, {"oid": "daffcbcdb88c727a8c0a7e0e6d60de7793fbdc93", "url": "https://github.com/geotools/geotools/commit/daffcbcdb88c727a8c0a7e0e6d60de7793fbdc93", "message": "Fixed failing test", "committedDate": "2021-01-25T22:02:51Z", "type": "commit"}, {"oid": "729f5bfdb6e7b4dcaff226601cc502721978a734", "url": "https://github.com/geotools/geotools/commit/729f5bfdb6e7b4dcaff226601cc502721978a734", "message": "Removed charset as an alternative in HTTP_LOGGING", "committedDate": "2021-01-26T09:34:27Z", "type": "commit"}, {"oid": "47af1afa97a245cb4ccded141d48eb8c6c14a455", "url": "https://github.com/geotools/geotools/commit/47af1afa97a245cb4ccded141d48eb8c6c14a455", "message": "Added a default createClient", "committedDate": "2021-01-27T13:50:37Z", "type": "commit"}]}