{"pr_number": 3213, "pr_title": "[GEOT-6739] GroupCandidateSelectionProcess should return feature with null attribute", "pr_createdAt": "2020-11-16T11:59:55Z", "pr_url": "https://github.com/geotools/geotools/pull/3213", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQwMDUyNQ==", "url": "https://github.com/geotools/geotools/pull/3213#discussion_r524400525", "bodyText": "So,\nif (value == null) return best;\nelse if (bestValue == null) return f;\n\ndoes the same as those three ifs.", "author": "aaime", "createdAt": "2020-11-16T16:30:29Z", "path": "modules/unsupported/process-feature/src/main/java/org/geotools/process/vector/GroupCandidateSelectionProcess.java", "diffHunk": "@@ -343,23 +342,26 @@ else if (groupingValues != null\n         }\n \n         private Feature updateBestFeature(Feature best, Feature f) {\n+            Comparable bestValue = getComparableFromEvaluation(best);\n+            Comparable value = getComparableFromEvaluation(f);\n+            if (bestValue == null && value == null) return best;", "originalCommit": "d891097a16d7f4fc41942b0cf0042bb6f0d76eaf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQxNDE4NQ==", "url": "https://github.com/geotools/geotools/pull/3213#discussion_r524414185", "bodyText": "fixed", "author": "taba90", "createdAt": "2020-11-16T16:47:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQwMDUyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQwMjMzNA==", "url": "https://github.com/geotools/geotools/pull/3213#discussion_r524402334", "bodyText": "Is it just me, or there is no group with all values at null? I can only see groups with a mix of nulls and non nulls (which needs to be tested for sure, but the title talks about features with null attribute).", "author": "aaime", "createdAt": "2020-11-16T16:32:56Z", "path": "modules/unsupported/process-feature/src/test/resources/org/geotools/process/vector/test-data/featuresToGroupWithGroupAllNull.properties", "diffHunk": "@@ -0,0 +1,13 @@\n+_=the_geom:MultiPolygon:srid=4326,cat:java.lang.Long,group:String,group2:String,numericVal:java.lang.Integer\n+features.1=MULTIPOLYGON(((2 2,2 3,3 3,3 2,2 2)), ((3 9,3 12,5 12,5 9,3 9)))|10|group1|secondGroup1|null", "originalCommit": "d891097a16d7f4fc41942b0cf0042bb6f0d76eaf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQxMjQ1MA==", "url": "https://github.com/geotools/geotools/pull/3213#discussion_r524412450", "bodyText": "on line 6 and 7 the numericAttribute is null for both. In the test groups are defined for two attributes group and group2. So the group defined with the two attribute with values group2 and secondGroup1  will have all the features with null operationAttribute.\n66e8776#diff-fbdc0405479cc71d3a8eaa2aae0635d50e8f3bb4645b919c70f5a755dfb4889bR6", "author": "taba90", "createdAt": "2020-11-16T16:46:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQwMjMzNA=="}], "type": "inlineReview"}, {"oid": "66e8776545f9ab544b9b9da40b570d3d6f1f0df2", "url": "https://github.com/geotools/geotools/commit/66e8776545f9ab544b9b9da40b570d3d6f1f0df2", "message": "[GEOT-6739] GroupCandidateSelectionProcess should return feature with null attribute", "committedDate": "2020-11-16T16:36:33Z", "type": "commit"}, {"oid": "66e8776545f9ab544b9b9da40b570d3d6f1f0df2", "url": "https://github.com/geotools/geotools/commit/66e8776545f9ab544b9b9da40b570d3d6f1f0df2", "message": "[GEOT-6739] GroupCandidateSelectionProcess should return feature with null attribute", "committedDate": "2020-11-16T16:36:33Z", "type": "forcePushed"}]}