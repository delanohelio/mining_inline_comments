{"pr_number": 3169, "pr_title": "[GEOT-6715]: COG Support in GeoTIFF", "pr_createdAt": "2020-10-05T13:21:03Z", "pr_url": "https://github.com/geotools/geotools/pull/3169", "timeline": [{"oid": "e343fbb515cd6d699c450c87004359d0f464101a", "url": "https://github.com/geotools/geotools/commit/e343fbb515cd6d699c450c87004359d0f464101a", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-05T13:24:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU5NjE3NQ==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r499596175", "bodyText": "This is temporary for a first review of the PR.", "author": "dromagnoli", "createdAt": "2020-10-05T13:25:34Z", "path": "pom.xml", "diffHunk": "@@ -89,10 +89,11 @@\n     <test.forkMode>once</test.forkMode>\n     <test.args></test.args>\n     <src.output>${basedir}/target</src.output>\n-    <imageio.ext.version>1.3.2</imageio.ext.version>\n+    <imageio.ext.version>1.3-SNAPSHOT</imageio.ext.version>", "originalCommit": "e343fbb515cd6d699c450c87004359d0f464101a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU5NzIxNA==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r499597214", "bodyText": "What happened here? :-D", "author": "aaime", "createdAt": "2020-10-05T13:27:02Z", "path": "modules/library/coverage/pom.xml", "diffHunk": "@@ -122,7 +122,6 @@\n   \t  <artifactId>imageio-ext-tiff</artifactId>\n       <!-- The version number is specified in the parent POM. -->      \n     </dependency>\n-    ", "originalCommit": "e343fbb515cd6d699c450c87004359d0f464101a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwOTEwNw==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r499609107", "bodyText": "I was getting a transitive dependency POM error so I played a bit with the poms.\nlooks like the reset to its original version didn't worked fine. Will fix it", "author": "dromagnoli", "createdAt": "2020-10-05T13:44:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU5NzIxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwMzQzMA==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r499603430", "bodyText": "Why duplicate fields, if the readingAccessObject (ugly name btw) already has them and it's a field, best to remove the other 3 no?", "author": "aaime", "createdAt": "2020-10-05T13:35:55Z", "path": "modules/library/coverage/src/main/java/org/geotools/coverage/grid/io/imageio/MaskOverviewProvider.java", "diffHunk": "@@ -787,16 +803,15 @@ public SpiHelper(\n             }\n         }\n \n-        public boolean isMultidim() {\n-            return isMultidim;\n+        public SpiHelper(ReadingAccessObject readObject) throws IOException {\n+            this.readingAccessObject = readObject;", "originalCommit": "e343fbb515cd6d699c450c87004359d0f464101a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3ODkxMA==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r500178910", "bodyText": "done. also renamed the base classes\n(see geosolutions-it/imageio-ext#228)", "author": "dromagnoli", "createdAt": "2020-10-06T10:47:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwMzQzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwMzk3NQ==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r499603975", "bodyText": "Is this dependency big? Would it make sense to make it optional here in GeoTools, maybe not everyone needs to read COGs. Could be part of the standard deps in GeoServer, or maybe even better a plugin (if memory serves me right, S3 deps are really big, though maybe this cog-reader artifact does not depend on them directly).", "author": "aaime", "createdAt": "2020-10-05T13:36:46Z", "path": "modules/plugin/geotiff/pom.xml", "diffHunk": "@@ -119,7 +119,12 @@\n       <groupId>it.geosolutions.imageio-ext</groupId>\n   \t  <artifactId>imageio-ext-tiff</artifactId>\n       <!-- The version number is specified in the parent POM. -->      \n-    </dependency>   \n+    </dependency>\n+    <dependency>", "originalCommit": "e343fbb515cd6d699c450c87004359d0f464101a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3NDMwNA==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r500174304", "bodyText": "Actually, the S3-range-reader (and related aws deps) is not a dependency of the reader", "author": "dromagnoli", "createdAt": "2020-10-06T10:38:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwMzk3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwNzU0Mg==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r499607542", "bodyText": "This is an online test, may not work all the time. Does image mosaic already have a \"online\" test category/profile?", "author": "aaime", "createdAt": "2020-10-05T13:41:59Z", "path": "modules/plugin/geotiff/src/test/java/org/geotools/gce/geotiff/GeoTiffReaderTest.java", "diffHunk": "@@ -1310,6 +1313,32 @@ public void testRescaleWithNodataFloat() throws IOException {\n         }\n     }\n \n+    @Test\n+    public void testCOGRead() throws URISyntaxException, IOException {\n+        String url =", "originalCommit": "e343fbb515cd6d699c450c87004359d0f464101a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3OTI5Mw==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r500179293", "bodyText": "I have moved that test in a self contained XOnlineTest class so that it will be excluded when not using the online profile", "author": "dromagnoli", "createdAt": "2020-10-06T10:48:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwNzU0Mg=="}], "type": "inlineReview"}, {"oid": "e751f7949ba1938a336c7c45dbb0fa690ec3eb61", "url": "https://github.com/geotools/geotools/commit/e751f7949ba1938a336c7c45dbb0fa690ec3eb61", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-06T10:32:42Z", "type": "forcePushed"}, {"oid": "1d651ef1d7a7972618f0902ef0aa14bab0982ac9", "url": "https://github.com/geotools/geotools/commit/1d651ef1d7a7972618f0902ef0aa14bab0982ac9", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-06T10:35:25Z", "type": "forcePushed"}, {"oid": "ecd25b198f2fd5e4b37a48138700adb78207f160", "url": "https://github.com/geotools/geotools/commit/ecd25b198f2fd5e4b37a48138700adb78207f160", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-06T10:40:15Z", "type": "forcePushed"}, {"oid": "629412dc45493c13f21717300238d929601c1b19", "url": "https://github.com/geotools/geotools/commit/629412dc45493c13f21717300238d929601c1b19", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-06T10:41:25Z", "type": "forcePushed"}, {"oid": "7838492d2a59f900a7800f4a6015f9ea668820e9", "url": "https://github.com/geotools/geotools/commit/7838492d2a59f900a7800f4a6015f9ea668820e9", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-07T10:54:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDkyMDAwOQ==", "url": "https://github.com/geotools/geotools/pull/3169#discussion_r500920009", "bodyText": "temporary too for the draft PR. It will be removed on the final PR", "author": "dromagnoli", "createdAt": "2020-10-07T10:55:54Z", "path": "pom.xml", "diffHunk": "@@ -2310,6 +2321,12 @@\n       <url>https://repo.osgeo.org/repository/snapshot/</url>\n       <snapshots><enabled>true</enabled></snapshots>\n       <releases><enabled>false</enabled></releases>\n+    </repository>\n+\t<repository>\n+      <id>geosolutions</id>\n+      <name>GeoSolutions libraries repository</name>\n+      <url>https://maven.geo-solutions.it/</url>\n+\t  <snapshots><enabled>true</enabled></snapshots>", "originalCommit": "7838492d2a59f900a7800f4a6015f9ea668820e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fe4dd534d2f7ae61594a0e898a3ee71bb83cc1e1", "url": "https://github.com/geotools/geotools/commit/fe4dd534d2f7ae61594a0e898a3ee71bb83cc1e1", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-08T15:14:34Z", "type": "forcePushed"}, {"oid": "bad933c44eadc477c1211fd597c45b3df495e86a", "url": "https://github.com/geotools/geotools/commit/bad933c44eadc477c1211fd597c45b3df495e86a", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-20T13:36:52Z", "type": "forcePushed"}, {"oid": "70818041a6da3dc9c2e78d2c85b20e00fc2fb3a6", "url": "https://github.com/geotools/geotools/commit/70818041a6da3dc9c2e78d2c85b20e00fc2fb3a6", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-20T13:59:48Z", "type": "commit"}, {"oid": "70818041a6da3dc9c2e78d2c85b20e00fc2fb3a6", "url": "https://github.com/geotools/geotools/commit/70818041a6da3dc9c2e78d2c85b20e00fc2fb3a6", "message": "[GEOT-6715]: COG Support in GeoTIFF", "committedDate": "2020-10-20T13:59:48Z", "type": "forcePushed"}]}