{"pr_number": 3201, "pr_title": "Resolve various Maven warnings", "pr_createdAt": "2020-11-06T11:52:26Z", "pr_url": "https://github.com/geotools/geotools/pull/3201", "timeline": [{"oid": "aa4b36fcaad10f29ff95521d0588cdb044dce25b", "url": "https://github.com/geotools/geotools/commit/aa4b36fcaad10f29ff95521d0588cdb044dce25b", "message": "Resolve various Maven warnings", "committedDate": "2020-11-06T13:42:58Z", "type": "commit"}, {"oid": "aa4b36fcaad10f29ff95521d0588cdb044dce25b", "url": "https://github.com/geotools/geotools/commit/aa4b36fcaad10f29ff95521d0588cdb044dce25b", "message": "Resolve various Maven warnings", "committedDate": "2020-11-06T13:42:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NDY1MQ==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r518764651", "bodyText": "Wondering why scope test has been removed. Has the module runtime dependencies to junit?", "author": "fgdrf", "createdAt": "2020-11-06T13:53:22Z", "path": "modules/ogc/net.opengis.wfs/pom.xml", "diffHunk": "@@ -34,14 +34,9 @@\n       <artifactId>gt-main</artifactId>\n       <version>${project.version}</version>\n     </dependency>\n-    <dependency>\n-       <groupId>junit</groupId>\n-       <artifactId>junit</artifactId>\n-    </dependency>\n     <dependency>\n       <groupId>junit</groupId>\n       <artifactId>junit</artifactId>\n-      <scope>test</scope>", "originalCommit": "aa4b36fcaad10f29ff95521d0588cdb044dce25b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc3NDg1NQ==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r518774855", "bodyText": "scope test is already specified in the parent pom so it is inherited by any child module:\n\n  \n    \n      geotools/pom.xml\n    \n    \n        Lines 1619 to 1629\n      in\n      821d9ad\n    \n    \n    \n    \n\n        \n          \n           <!-- =========================================================== --> \n        \n\n        \n          \n           <!--     Dependencies to be inherited by all modules.            --> \n        \n\n        \n          \n           <!-- =========================================================== --> \n        \n\n        \n          \n           <dependencies> \n        \n\n        \n          \n             <dependency> \n        \n\n        \n          \n               <groupId>junit</groupId> \n        \n\n        \n          \n               <artifactId>junit</artifactId> \n        \n\n        \n          \n               <!-- The version number is specified above. --> \n        \n\n        \n          \n               <scope>test</scope> \n        \n\n        \n          \n             </dependency> \n        \n\n        \n          \n            </dependencies>", "author": "mprins", "createdAt": "2020-11-06T14:10:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NDY1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NTQ3NA==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r518765474", "bodyText": "What is the reaseon behind removin the version from pluginManagement section for checkstyle plugin?", "author": "fgdrf", "createdAt": "2020-11-06T13:54:46Z", "path": "pom.xml", "diffHunk": "@@ -407,7 +408,6 @@\n            <plugin>\n               <groupId>org.apache.maven.plugins</groupId>\n               <artifactId>maven-checkstyle-plugin</artifactId>\n-              <version>3.1.1</version>", "originalCommit": "aa4b36fcaad10f29ff95521d0588cdb044dce25b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc4MzY1NQ==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r518783655", "bodyText": "Version is specified in the pluginManagement section of the default build, actual use is in the build of the \"checkstyle\" profile and in the default build  of the Elasticsearch plugin, which has a specific configuration to only check GeoTools sources/test-sources and not anything extracted from the elasticsearch libraries (which don't comply checkstyle wise):\n\n  \n    \n      geotools/modules/unsupported/elasticsearch/pom.xml\n    \n    \n        Lines 227 to 238\n      in\n      821d9ad\n    \n    \n    \n    \n\n        \n          \n              <plugin> \n        \n\n        \n          \n                 <groupId>org.apache.maven.plugins</groupId> \n        \n\n        \n          \n                 <artifactId>maven-checkstyle-plugin</artifactId> \n        \n\n        \n          \n                 <configuration> \n        \n\n        \n          \n                   <sourceDirectories> \n        \n\n        \n          \n                     <sourceDirectory>${project.build.sourceDirectory}</sourceDirectory> \n        \n\n        \n          \n                     <sourceDirectory>${project.build.testSourceDirectory}</sourceDirectory> \n        \n\n        \n          \n                   </sourceDirectories> \n        \n\n        \n          \n                 </configuration> \n        \n\n        \n          \n              </plugin> \n        \n\n        \n          \n             </plugins> \n        \n\n        \n          \n           </build> \n        \n    \n  \n\n\nand\n\n  \n    \n      geotools/modules/unsupported/elasticsearch/pom.xml\n    \n    \n        Lines 194 to 204\n      in\n      821d9ad\n    \n    \n    \n    \n\n        \n          \n                           <artifactItem> \n        \n\n        \n          \n                             <groupId>org.elasticsearch</groupId> \n        \n\n        \n          \n                             <artifactId>elasticsearch</artifactId> \n        \n\n        \n          \n                             <!-- Use Elasticsearch Joda time parser and formatter to enable support for time formats found in mappings. \n        \n\n        \n          \n                             Use v6.4.3 to avoid extra dependencies added in later versions to keep ElasticGeo jar small. --> \n        \n\n        \n          \n                             <version>6.4.3</version> \n        \n\n        \n          \n                             <includes>**/Joda.java,**/FormatDateTimeFormatter.java,**/StrictISODateTimeFormat.java</includes> \n        \n\n        \n          \n                             <outputDirectory>${project.build.directory}/generated-sources</outputDirectory> \n        \n\n        \n          \n                             <classifier>sources</classifier> \n        \n\n        \n          \n                           </artifactItem> \n        \n\n        \n          \n                         </artifactItems>", "author": "mprins", "createdAt": "2020-11-06T14:25:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NTQ3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NTkxNQ==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r518765915", "bodyText": "is the maven-checkstyle-plugin listed twice?", "author": "fgdrf", "createdAt": "2020-11-06T13:55:32Z", "path": "pom.xml", "diffHunk": "@@ -1677,6 +1677,11 @@\n             <artifactId>fmt-maven-plugin</artifactId>\n             <version>2.4.0</version>\n         </plugin>\n+        <plugin>\n+          <groupId>org.apache.maven.plugins</groupId>\n+          <artifactId>maven-checkstyle-plugin</artifactId>", "originalCommit": "aa4b36fcaad10f29ff95521d0588cdb044dce25b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc4Mzk5Mg==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r518783992", "bodyText": "yes, see above, correct indentation over all the pom files would make this clear at first sight", "author": "mprins", "createdAt": "2020-11-06T14:25:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NTkxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTY4MjIzMQ==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r519682231", "bodyText": "Yeah, pom files are a formatting mess. I was looking at plugins that could work like the java formatter, format by default, check in server side builds. This one seemed promising, but I did not try it out, sharing the link in case  wants like to give it a try:\nhttps://acegi.github.io/xml-format-maven-plugin/\nIt can format any XML file, but hopefully it can be limited to the pom.xml... and in GeoServer it could be used to reformat also the Spring config files.\nI did also find this one, but does not seem to have a recent release: https://www.mojohaus.org/tidy-maven-plugin/", "author": "aaime", "createdAt": "2020-11-09T09:56:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NTkxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTY4OTc2NA==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r519689764", "bodyText": "I've used the tidy-maven-plugin for some projects in the past, it's very opnionated (not necessarily a bad thing) and rewrites the whole pom file, in complex projects that can have side effects in artifact resolution.", "author": "mprins", "createdAt": "2020-11-09T10:07:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NTkxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTUwMjUwNA==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r559502504", "bodyText": "opened geoserver/geoserver#4663 as a POC for fomatting", "author": "mprins", "createdAt": "2021-01-18T11:33:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NTkxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NjUxOA==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r518766518", "bodyText": "Maybe its worth to use a property for version of plugin maven-checkstyle-plugin as well?", "author": "fgdrf", "createdAt": "2020-11-06T13:56:36Z", "path": "pom.xml", "diffHunk": "@@ -1677,6 +1677,11 @@\n             <artifactId>fmt-maven-plugin</artifactId>\n             <version>2.4.0</version>\n         </plugin>\n+        <plugin>\n+          <groupId>org.apache.maven.plugins</groupId>\n+          <artifactId>maven-checkstyle-plugin</artifactId>\n+          <version>3.1.1</version>", "originalCommit": "aa4b36fcaad10f29ff95521d0588cdb044dce25b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc4NDc0MA==", "url": "https://github.com/geotools/geotools/pull/3201#discussion_r518784740", "bodyText": "we might still have to do that as some versions of Maven don't carry over plugin versions from the default pluginManagement", "author": "mprins", "createdAt": "2020-11-06T14:26:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc2NjUxOA=="}], "type": "inlineReview"}]}