{"pr_number": 3166, "pr_title": "[GEOT-6714] Invalid URN parsing of version less URN SRS (urn:ogc:def:crs:EPSG::4326)", "pr_createdAt": "2020-10-02T14:23:50Z", "pr_url": "https://github.com/geotools/geotools/pull/3166", "timeline": [{"oid": "d4095142e08310efd6ee44f39a0890dc1bbeb3fe", "url": "https://github.com/geotools/geotools/commit/d4095142e08310efd6ee44f39a0890dc1bbeb3fe", "message": "[GEOT-6714] Invalid URN parsing of version less URN SRS\n\n(urn:ogc:def:crs:EPSG::4326)\n- fixed URN parser\n- empty version is treated as NULL", "committedDate": "2020-10-02T14:21:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUwMzY5Mg==", "url": "https://github.com/geotools/geotools/pull/3166#discussion_r499503692", "bodyText": "Works in the context where it's used, but it's odd. Drawing a parallel to strings, one normally checks if they are null or empty, e.g.: http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#isEmpty-java.lang.CharSequence-\nI would do the same here, the end result should not change, but the code is less surprising.", "author": "aaime", "createdAt": "2020-10-05T10:39:31Z", "path": "modules/library/referencing/src/main/java/org/geotools/referencing/factory/URN_Parser.java", "diffHunk": "@@ -119,4 +121,9 @@ public static URN_Parser buildParser(final String urn) throws NoSuchAuthorityCod\n         throw new NoSuchAuthorityCodeException(\n                 Errors.format(ErrorKeys.ILLEGAL_IDENTIFIER_$1, type), \"urn:ogc:def\", type);\n     }\n+\n+    private static boolean versionIsEmpty(Version urnVersion) {\n+        if (urnVersion == null) return false;", "originalCommit": "d4095142e08310efd6ee44f39a0890dc1bbeb3fe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUwNjYxMg==", "url": "https://github.com/geotools/geotools/pull/3166#discussion_r499506612", "bodyText": "@aaime understood, will use this function", "author": "imranrajjad", "createdAt": "2020-10-05T10:45:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTUwMzY5Mg=="}], "type": "inlineReview"}, {"oid": "be3f4ab3d48a33dffbb89d10c60eecce5f2f9fe6", "url": "https://github.com/geotools/geotools/commit/be3f4ab3d48a33dffbb89d10c60eecce5f2f9fe6", "message": "[GEOT-6714] Andrea requested changes\n\n- using StringUtils method to identify empty version", "committedDate": "2020-10-05T11:06:02Z", "type": "commit"}, {"oid": "be3f4ab3d48a33dffbb89d10c60eecce5f2f9fe6", "url": "https://github.com/geotools/geotools/commit/be3f4ab3d48a33dffbb89d10c60eecce5f2f9fe6", "message": "[GEOT-6714] Andrea requested changes\n\n- using StringUtils method to identify empty version", "committedDate": "2020-10-05T11:06:02Z", "type": "forcePushed"}]}