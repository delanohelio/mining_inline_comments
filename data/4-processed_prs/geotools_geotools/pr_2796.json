{"pr_number": 2796, "pr_title": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4", "pr_createdAt": "2020-02-05T17:07:52Z", "pr_url": "https://github.com/geotools/geotools/pull/2796", "timeline": [{"oid": "f1858845b4d0667fa72aa9be4fc940e962a5ce01", "url": "https://github.com/geotools/geotools/commit/f1858845b4d0667fa72aa9be4fc940e962a5ce01", "message": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4\n\nThis change migrates code inside Geotools itself, as well as updating\nApache Commons Digester to the first newer version that doesn't depend\non Apache Commons Collections v3 directly anymore.\n\n(Apache Commons Digester still depends on Apache Commons Collections v3\nvia Apache Commons BeanUtils, but this will be fixable in the future\nafter Apache Commons BeanUtils v2 (which depends on Apache Commons\nCollections v4) is released.", "committedDate": "2020-02-05T17:09:47Z", "type": "forcePushed"}, {"oid": "9181ef46bc9cbd5e75a4409a4790dedb7660c5cf", "url": "https://github.com/geotools/geotools/commit/9181ef46bc9cbd5e75a4409a4790dedb7660c5cf", "message": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4\n\nThis change migrates code inside Geotools itself, as well as updating\nApache Commons Digester to the first newer version that doesn't depend\non Apache Commons Collections v3 directly anymore.\n\n(Apache Commons Digester still depends on Apache Commons Collections v3\nvia Apache Commons BeanUtils, but this will be fixable in the future\nafter Apache Commons BeanUtils v2 (which depends on Apache Commons\nCollections v4) is released.", "committedDate": "2020-02-05T19:40:21Z", "type": "forcePushed"}, {"oid": "5e94c06f9a6d66efdbb38f0b4a683f8685f2c27a", "url": "https://github.com/geotools/geotools/commit/5e94c06f9a6d66efdbb38f0b4a683f8685f2c27a", "message": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4\n\nThis change migrates code inside Geotools itself, as well as updating\nApache Commons Digester to the first newer version that doesn't depend\non Apache Commons Collections v3 directly anymore.\n\n(Apache Commons Digester still depends on Apache Commons Collections v3\nvia Apache Commons BeanUtils, but this will be fixable in the future\nafter Apache Commons BeanUtils v2 (which depends on Apache Commons\nCollections v4) is released.", "committedDate": "2020-02-05T20:13:50Z", "type": "forcePushed"}, {"oid": "490825a5b0125cdc62e34d7edbb716ce07a8552b", "url": "https://github.com/geotools/geotools/commit/490825a5b0125cdc62e34d7edbb716ce07a8552b", "message": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4\n\nThis change migrates code inside Geotools itself, as well as updating\nApache Commons Digester to the first newer version that doesn't depend\non Apache Commons Collections v3 directly anymore.\n\n(Apache Commons Digester still depends on Apache Commons Collections v3\nvia Apache Commons BeanUtils, but this will be fixable in the future\nafter Apache Commons BeanUtils v2 (which depends on Apache Commons\nCollections v4) is released.", "committedDate": "2020-02-14T15:11:39Z", "type": "forcePushed"}, {"oid": "2ed0f9d15a0df4cd6fef78ad3808b5d6443cd2a7", "url": "https://github.com/geotools/geotools/commit/2ed0f9d15a0df4cd6fef78ad3808b5d6443cd2a7", "message": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4\n\nThis change migrates code inside Geotools itself, as well as updating\nApache Commons Digester to the first newer version that doesn't depend\non Apache Commons Collections v3 directly anymore.\n\n(Apache Commons Digester still depends on Apache Commons Collections v3\nvia Apache Commons BeanUtils, but this will be fixable in the future\nafter Apache Commons BeanUtils v2 (which depends on Apache Commons\nCollections v4) is released.", "committedDate": "2020-02-14T15:49:13Z", "type": "forcePushed"}, {"oid": "916ac908a18c1d67428bf14d1bba656490457697", "url": "https://github.com/geotools/geotools/commit/916ac908a18c1d67428bf14d1bba656490457697", "message": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4\n\nThis change migrates code inside Geotools itself, as well as updating\nApache Commons Digester to the first newer version that doesn't depend\non Apache Commons Collections v3 directly anymore.\n\n(Apache Commons Digester still depends on Apache Commons Collections v3\nvia Apache Commons BeanUtils, but this will be fixable in the future\nafter Apache Commons BeanUtils v2 (which depends on Apache Commons\nCollections v4) is released.", "committedDate": "2020-02-14T19:01:07Z", "type": "forcePushed"}, {"oid": "09075887e14bd21498be4aebec0638753c58618f", "url": "https://github.com/geotools/geotools/commit/09075887e14bd21498be4aebec0638753c58618f", "message": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4\n\nThis change migrates code inside Geotools itself, as well as updating\nApache Commons Digester to the first newer version that doesn't depend\non Apache Commons Collections v3 directly anymore.\n\n(Apache Commons Digester still depends on Apache Commons Collections v3\nvia Apache Commons BeanUtils, but this will be fixable in the future\nafter Apache Commons BeanUtils v2 (which depends on Apache Commons\nCollections v4) is released.", "committedDate": "2020-02-16T19:56:45Z", "type": "forcePushed"}, {"oid": "26dc31aa9b29b32749681ebc4d47922fb95a03a7", "url": "https://github.com/geotools/geotools/commit/26dc31aa9b29b32749681ebc4d47922fb95a03a7", "message": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4\n\nThis change migrates code inside Geotools itself, as well as updating\nApache Commons Digester to the first newer version that doesn't depend\non Apache Commons Collections v3 directly anymore.\n\n(Apache Commons Digester still depends on Apache Commons Collections v3\nvia Apache Commons BeanUtils, but this will be fixable in the future\nafter Apache Commons BeanUtils v2 (which depends on Apache Commons\nCollections v4) is released.", "committedDate": "2020-02-16T20:00:47Z", "type": "commit"}, {"oid": "26dc31aa9b29b32749681ebc4d47922fb95a03a7", "url": "https://github.com/geotools/geotools/commit/26dc31aa9b29b32749681ebc4d47922fb95a03a7", "message": "[GEOT-6510] Upgrade Apache Commons Collections from v3 to v4\n\nThis change migrates code inside Geotools itself, as well as updating\nApache Commons Digester to the first newer version that doesn't depend\non Apache Commons Collections v3 directly anymore.\n\n(Apache Commons Digester still depends on Apache Commons Collections v3\nvia Apache Commons BeanUtils, but this will be fixable in the future\nafter Apache Commons BeanUtils v2 (which depends on Apache Commons\nCollections v4) is released.", "committedDate": "2020-02-16T20:00:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQyOTk5Ng==", "url": "https://github.com/geotools/geotools/pull/2796#discussion_r422429996", "bodyText": "why change to a keyset if you are going to do a map.get(key) later anyways?", "author": "jodygarnett", "createdAt": "2020-05-09T00:29:07Z", "path": "modules/extension/xsd/xsd-core/src/main/java/org/geotools/xsd/impl/BindingPropertyExtractor.java", "diffHunk": "@@ -116,28 +115,28 @@ public List properties(Object object, XSDElementDeclaration element) {\n                 // turn each map entry into a particle\n                 HashMap particles = new HashMap();\n \n-                for (Iterator e = map.entrySet().iterator(); e.hasNext(); ) {\n-                    Map.Entry entry = (Map.Entry) e.next();\n+                for (Iterator e = map.keySet().iterator(); e.hasNext(); ) {", "originalCommit": "26dc31aa9b29b32749681ebc4d47922fb95a03a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQzMjUwMQ==", "url": "https://github.com/geotools/geotools/pull/2796#discussion_r422432501", "bodyText": "The new Map type doesn't have an entrySet() method, and this was the least ugly way to do it. mapIterator for example has different semantics. I'm not too sure on the details anymore, but I remember spending some time pulling my hair out on this change.", "author": "soc", "createdAt": "2020-05-09T00:43:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQyOTk5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzA0NTYzNQ==", "url": "https://github.com/geotools/geotools/pull/2796#discussion_r423045635", "bodyText": "As an alternative, the MultiValuedMap can return a MapIterator, which returns the key when calling \"next\", and has a dedicated \"getValue\" method to fetch the value associated to the current entry.", "author": "aaime", "createdAt": "2020-05-11T13:38:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQyOTk5Ng=="}], "type": "inlineReview"}]}