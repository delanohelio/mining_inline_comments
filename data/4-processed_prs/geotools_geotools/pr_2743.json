{"pr_number": 2743, "pr_title": "[GEOT-6494] MBStyle extension", "pr_createdAt": "2020-01-13T07:49:55Z", "pr_url": "https://github.com/geotools/geotools/pull/2743", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcwMzc4OA==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r365703788", "bodyText": "\"does not\" I suppose?", "author": "aaime", "createdAt": "2020-01-13T09:25:21Z", "path": "modules/unsupported/mbstyle/src/main/java/org/geotools/mbstyle/layer/CircleMBLayer.java", "diffHunk": "@@ -285,7 +285,7 @@ public Color getCircleStrokeColor() throws MBFormatException {\n      * Access circle-stroke-color as literal or function expression, defaults to black.\n      *\n      * @return The color of the circle stroke.\n-     * @throws MBFormatException\n+     * @throws MBFormatException JSON provided does conform to specification", "originalCommit": "094ce93c9dbb02c2fed36e4edd8883a274f9ccb1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY2NTE3Mg==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r377665172", "bodyText": "changed to JSON provided inconsistent with specificaiton", "author": "jodygarnett", "createdAt": "2020-02-11T14:24:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcwMzc4OA=="}], "type": "inlineReview"}, {"oid": "fcf2ea7d3170ca0e0af578c6befabf6fafa5e7bc", "url": "https://github.com/geotools/geotools/commit/fcf2ea7d3170ca0e0af578c6befabf6fafa5e7bc", "message": "[GEOT-6494]  addressing javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-01-31T21:31:09Z", "type": "forcePushed"}, {"oid": "bd649fb1d79b177c94e9559cb08a9e51f34f1f4d", "url": "https://github.com/geotools/geotools/commit/bd649fb1d79b177c94e9559cb08a9e51f34f1f4d", "message": "Formatting clean up\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-01-31T21:51:40Z", "type": "forcePushed"}, {"oid": "dc46d3d4db6818d0d9aa32979eebb94feb0935a3", "url": "https://github.com/geotools/geotools/commit/dc46d3d4db6818d0d9aa32979eebb94feb0935a3", "message": "cleaning up javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-08T16:15:46Z", "type": "commit"}, {"oid": "cb5eb11a582a90c32de2e7785acd16cd0874b338", "url": "https://github.com/geotools/geotools/commit/cb5eb11a582a90c32de2e7785acd16cd0874b338", "message": "[GEOT-6494] updated test coverage instructions\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-08T16:15:46Z", "type": "commit"}, {"oid": "b871343b6ad8f3952ae96fb9c8d832836c7cc229", "url": "https://github.com/geotools/geotools/commit/b871343b6ad8f3952ae96fb9c8d832836c7cc229", "message": "[GEOT-6494]  addressing javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-08T16:15:46Z", "type": "commit"}, {"oid": "edfa57a6c55bc7f0266e5312c43549cfe47adbb8", "url": "https://github.com/geotools/geotools/commit/edfa57a6c55bc7f0266e5312c43549cfe47adbb8", "message": "Formatting clean up\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-08T16:15:46Z", "type": "commit"}, {"oid": "a6b1fc89573635f4966667b477346de289286b65", "url": "https://github.com/geotools/geotools/commit/a6b1fc89573635f4966667b477346de289286b65", "message": "javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-08T16:15:46Z", "type": "commit"}, {"oid": "a6b1fc89573635f4966667b477346de289286b65", "url": "https://github.com/geotools/geotools/commit/a6b1fc89573635f4966667b477346de289286b65", "message": "javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-08T16:15:46Z", "type": "forcePushed"}, {"oid": "874d4a013a7aa896f0c87a273187231159a7b49f", "url": "https://github.com/geotools/geotools/commit/874d4a013a7aa896f0c87a273187231159a7b49f", "message": "initial move of mbstyle extension and documentation\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-09T17:09:48Z", "type": "commit"}, {"oid": "7cdbcef444fd6b7e6bca9b8368366cbe7c5f1b0d", "url": "https://github.com/geotools/geotools/commit/7cdbcef444fd6b7e6bca9b8368366cbe7c5f1b0d", "message": "fix build\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-09T17:28:45Z", "type": "commit"}, {"oid": "fd6541da0a696c10912131a197e22db8b049d939", "url": "https://github.com/geotools/geotools/commit/fd6541da0a696c10912131a197e22db8b049d939", "message": "break spec into pages\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-09T17:28:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgwMDYzOA==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r376800638", "bodyText": "@tbarsballe this section has some duplication with spec/types.rst, do you know any background to untangle?\nReading the content, it looks like this was an earlier summary of the specification", "author": "jodygarnett", "createdAt": "2020-02-09T17:31:43Z", "path": "docs/user/extension/mbstyle/index.rst", "diffHunk": "@@ -43,18 +43,19 @@ Zoom level tuning\n \n The mapping between zoom levels and scale denominators is performed assuming, by default, a 512 pixels\n root tile at zoom level zero. This matches the usage of vector tiles client side.\n-If a different value is to be used, it's possible to set a system variable to change the default.\n+If a different value is to be used, it's possible to set a system property to change the default.\n E.g., the following would match \"x4\" tiles:\n \n .. code-block:: java\n \n-    System.setSystemProperty(\"MBSTYLE_ROOT_TILE_PIXELS\", \"1024\") \n+   System.setSystemProperty(\"MBSTYLE_ROOT_TILE_PIXELS\", \"1024\") \n \n MapBox Types\n ^^^^^^^^^^^^\n-  copied from the `MapBox Style Specification <https://www.mapbox.com/mapbox-gl-js/style-spec/>`_\n \n-  Color\n+Quoting `MapBox Style Specification <https://www.mapbox.com/mapbox-gl-js/style-spec/>`__ :\n+\n+  ``Color``", "originalCommit": "fd6541da0a696c10912131a197e22db8b049d939", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE3OTMxNg==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r377179316", "bodyText": "spec/*.rst is a direct copy of the MapBox spect with GeoTools supported version added.\nThis index page tries to provide a more concise overview / quickstart, and pulls some of the more top-level information from the spec. It could maybe do with some rewording, but should still keep all that info in it.", "author": "tbarsballe", "createdAt": "2020-02-10T16:40:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgwMDYzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzY2NTU1OQ==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r377665559", "bodyText": "okay I removed the duplication, and made this focus on the example snippets", "author": "jodygarnett", "createdAt": "2020-02-11T14:25:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgwMDYzOA=="}], "type": "inlineReview"}, {"oid": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4", "url": "https://github.com/geotools/geotools/commit/52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4", "message": "Clean up license references in documentation\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-09T21:13:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgxNjczMw==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r376816733", "bodyText": "Moved this to the respective headings.", "author": "jodygarnett", "createdAt": "2020-02-09T21:24:55Z", "path": "docs/user/welcome/license.rst", "diffHunk": "@@ -5,12 +5,6 @@ The GeoTools project is a member of the Open Source Geospatial Foundation; the f\n \n As an open source project GeoTools is made available to you using an open source (LGPL) license as described below.\n \n-A few select files have additional license:\n-\n-* Code contributed by government members is often contributed as public domain\n-* To facilitate adopting of the GeoTools library the example code used in the\n-  user guide is also public domain\n-", "originalCommit": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk3MDg3MQ==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r376970871", "bodyText": "So this change kicked geopkg out of the build? Ideally a module promotion should just do that, promote the module, all the other improvements should be in a different commit (if not different PR), because they are not related, and are easy to get lost in the movement of so many files (github reports 200+ files changed in this PR). Thankfully I spotted this one at the source...", "author": "aaime", "createdAt": "2020-02-10T10:14:00Z", "path": "modules/plugin/pom.xml", "diffHunk": "@@ -59,14 +62,10 @@\n     <module>imagemosaic-jdbc</module>\n     <module>jdbc</module>\n     <module>jp2k</module>\n+    <module>mongodb</module>\n     <module>property</module>\n     <module>shapefile</module>\n     <module>svg</module>\n-    <module>coverage-multidim</module>\n-    <module>geopkg</module>", "originalCommit": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU3MzE3Mg==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r377573172", "bodyText": "Thanks for the catch Andrea, I appreciate it.\nI initially tried moving this to plugin, but it did not fit (since it defines new API).", "author": "jodygarnett", "createdAt": "2020-02-11T11:16:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk3MDg3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk3MTk5Mw==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r376971993", "bodyText": "Ah, so mbstyle is using json-simple to parse JSON? The library is completely dead, has not seen releases since 2012.\nNot holding it as a blocker for the module, but wondering, is there any plan to switch to something supported? (it would not be the first dependency having this issue mind, I'm really just asking).", "author": "aaime", "createdAt": "2020-02-10T10:16:13Z", "path": "pom.xml", "diffHunk": "@@ -1577,6 +1577,13 @@\n         <artifactId>jt-shadedrelief</artifactId>\n         <version>${jaiext.version}</version>\n       </dependency>\n+      \n+      <!-- Third-party -->\n+      <dependency>", "originalCommit": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU3NDQxMg==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r377574412", "bodyText": "I am not aware why this was chosen, just annoyed it was not in the dependency management section.\nDidn't we talk this out with GeoMesa folks to select a decent JSON library?", "author": "jodygarnett", "createdAt": "2020-02-11T11:19:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk3MTk5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU3NTEzMQ==", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r377575131", "bodyText": "There was a discussion on dependencies for gt-main, and we ended up using jackson for that. But mbstyles is older, and used the same library as the semi-defunct gt-geojson (which I hope is gonna be replaced by the gt-jacksondatastore one day or the other...)", "author": "aaime", "createdAt": "2020-02-11T11:20:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk3MTk5Mw=="}], "type": "inlineReview"}, {"oid": "9fea6a40dbb98c76f615d1235de30d2289eef8f2", "url": "https://github.com/geotools/geotools/commit/9fea6a40dbb98c76f615d1235de30d2289eef8f2", "message": "revise based on feedback\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-11T14:25:52Z", "type": "commit"}, {"oid": "d468fc4993afd809de3512fb6a457cebf334ed21", "url": "https://github.com/geotools/geotools/commit/d468fc4993afd809de3512fb6a457cebf334ed21", "message": "remove toctree caption\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>", "committedDate": "2020-02-11T19:17:41Z", "type": "commit"}]}