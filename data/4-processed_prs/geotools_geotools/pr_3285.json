{"pr_number": 3285, "pr_title": "[GEOT-6769] Refact ClippingFeatureCollection", "pr_createdAt": "2020-12-23T08:22:29Z", "pr_url": "https://github.com/geotools/geotools/pull/3285", "timeline": [{"oid": "8926709c90a1a3c6da7e967fe05cb75226980569", "url": "https://github.com/geotools/geotools/commit/8926709c90a1a3c6da7e967fe05cb75226980569", "message": "[GEOT-6769] Add new ClipIntersectsFeatureCollection", "committedDate": "2020-12-28T14:54:38Z", "type": "forcePushed"}, {"oid": "76dca4534b4c1b5f5b10b7032eecdd42ca9c202f", "url": "https://github.com/geotools/geotools/commit/76dca4534b4c1b5f5b10b7032eecdd42ca9c202f", "message": "[GEOT-6769] Add new ClipIntersectsFeatureCollection", "committedDate": "2020-12-28T15:24:59Z", "type": "forcePushed"}, {"oid": "d67159a478962cb5d9ecfb1f2d84d34f9e413cb9", "url": "https://github.com/geotools/geotools/commit/d67159a478962cb5d9ecfb1f2d84d34f9e413cb9", "message": "[GEOT-6769] Add new ClipIntersectsFeatureCollection", "committedDate": "2021-01-05T20:18:38Z", "type": "forcePushed"}, {"oid": "5ae96ff73be6286d368e581323f49fa434a162e5", "url": "https://github.com/geotools/geotools/commit/5ae96ff73be6286d368e581323f49fa434a162e5", "message": "[GEOT-6769] Add new ClipIntersectsFeatureCollection", "committedDate": "2021-01-05T21:13:25Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDA3NzMwMw==", "url": "https://github.com/geotools/geotools/pull/3285#discussion_r554077303", "bodyText": "I'm confused as to why we need both.. filtering by intersection is just a filter, FilteringFeatureCollection can be used for the task without creating a dedicated collection for that functionality? Also, the filter is best sent down to the data source.\nSo it should be merged with other filters coming from the current request, if possible. Thinking about a WFS/WMS case for example, say the WMS bbox and the intersects filter have a small intersection, working at the filter level would allow to load only the features in the intersection between the two, loading significantly less data. And if the intersection is empty, maybe don't load data at all.", "author": "aaime", "createdAt": "2021-01-08T17:09:40Z", "path": "modules/library/main/src/main/java/org/geotools/feature/collection/ClipIntersectsFeatureCollection.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ *    GeoTools - The Open Source Java GIS Toolkit\n+ *    http://geotools.org\n+ *\n+ *    (C) 2020, Open Source Geospatial Foundation (OSGeo)\n+ *\n+ *    This library is free software; you can redistribute it and/or\n+ *    modify it under the terms of the GNU Lesser General Public\n+ *    License as published by the Free Software Foundation;\n+ *    version 2.1 of the License.\n+ *\n+ *    This library is distributed in the hope that it will be useful,\n+ *    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ *    Lesser General Public License for more details.\n+ */\n+package org.geotools.feature.collection;\n+\n+import org.geotools.data.simple.SimpleFeatureCollection;\n+import org.geotools.data.simple.SimpleFeatureIterator;\n+import org.locationtech.jts.geom.Geometry;\n+import org.opengis.feature.simple.SimpleFeatureType;\n+\n+/**\n+ * A SimpleFeatureCollection that can filter features' geometries by a clip (crop) spatialFilter and", "originalCommit": "5ae96ff73be6286d368e581323f49fa434a162e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ0NTg4Ng==", "url": "https://github.com/geotools/geotools/pull/3285#discussion_r554445886", "bodyText": "thanks for your point @aaime  please check this comment on the related gs pr geoserver/geoserver#4627 (comment)", "author": "taba90", "createdAt": "2021-01-09T16:37:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDA3NzMwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDg3MDQwNQ==", "url": "https://github.com/geotools/geotools/pull/3285#discussion_r560870405", "bodyText": "@aaime  I changed the pr and the jira ticket to simply refact the ClipCollection, and moved the IntersectClipCollection to geoserver", "author": "taba90", "createdAt": "2021-01-20T10:57:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDA3NzMwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzU1NTk1Mw==", "url": "https://github.com/geotools/geotools/pull/3285#discussion_r563555953", "bodyText": "Thanks!", "author": "aaime", "createdAt": "2021-01-25T09:00:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDA3NzMwMw=="}], "type": "inlineReview"}, {"oid": "6cfe52c0f133c37838b37bed6fe0a7ed6362d9cb", "url": "https://github.com/geotools/geotools/commit/6cfe52c0f133c37838b37bed6fe0a7ed6362d9cb", "message": "[GEOT-6769] Refact ClippingFeatureCollection", "committedDate": "2021-01-15T01:38:39Z", "type": "commit"}, {"oid": "6cfe52c0f133c37838b37bed6fe0a7ed6362d9cb", "url": "https://github.com/geotools/geotools/commit/6cfe52c0f133c37838b37bed6fe0a7ed6362d9cb", "message": "[GEOT-6769] Refact ClippingFeatureCollection", "committedDate": "2021-01-15T01:38:39Z", "type": "forcePushed"}]}