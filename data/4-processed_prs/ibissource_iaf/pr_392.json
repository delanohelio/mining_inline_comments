{"pr_number": 392, "pr_title": "Xml schema11 compliancy", "pr_createdAt": "2020-01-31T10:53:12Z", "pr_url": "https://github.com/ibissource/iaf/pull/392", "timeline": [{"oid": "711ff29704d49975fbe971d75662fe3b0f211f85", "url": "https://github.com/ibissource/iaf/commit/711ff29704d49975fbe971d75662fe3b0f211f85", "message": "Delete old xerces implementations for Ibis.", "committedDate": "2019-12-17T10:56:32Z", "type": "commit"}, {"oid": "24cf3161a9dbb45ed4477a4308edab94610ff6e8", "url": "https://github.com/ibissource/iaf/commit/24cf3161a9dbb45ed4477a4308edab94610ff6e8", "message": "Add an option for setting xsd processor version.", "committedDate": "2019-12-17T10:57:51Z", "type": "commit"}, {"oid": "0201838e315afad5e37dfb2ada406472a459ddd0", "url": "https://github.com/ibissource/iaf/commit/0201838e315afad5e37dfb2ada406472a459ddd0", "message": "Add new tests for xerces for xsd 1.1", "committedDate": "2019-12-20T10:58:22Z", "type": "commit"}, {"oid": "dfb53d88049af845e01dcc240a26a229b9868863", "url": "https://github.com/ibissource/iaf/commit/dfb53d88049af845e01dcc240a26a229b9868863", "message": "Add new dependencies.", "committedDate": "2019-12-20T13:47:05Z", "type": "commit"}, {"oid": "46a70b3fb0a84bf8cc976f8a01066f5b8b35f5f2", "url": "https://github.com/ibissource/iaf/commit/46a70b3fb0a84bf8cc976f8a01066f5b8b35f5f2", "message": "Make initial changes to preparse with xsd 1.1", "committedDate": "2019-12-20T13:48:06Z", "type": "commit"}, {"oid": "2efb31f89e583174dff3cf5fc9b6b5a94377451b", "url": "https://github.com/ibissource/iaf/commit/2efb31f89e583174dff3cf5fc9b6b5a94377451b", "message": "Fix assertion tests.", "committedDate": "2019-12-23T10:56:13Z", "type": "commit"}, {"oid": "58e91133e0586c1ec164f68ecdfcb0f77b282ee1", "url": "https://github.com/ibissource/iaf/commit/58e91133e0586c1ec164f68ecdfcb0f77b282ee1", "message": "Implement validating using validators that support xsd1.1", "committedDate": "2019-12-23T11:00:23Z", "type": "commit"}, {"oid": "4c4a90f2f0dea5495c62578d358067b0093e3f88", "url": "https://github.com/ibissource/iaf/commit/4c4a90f2f0dea5495c62578d358067b0093e3f88", "message": "Use ValidatorHandler to validate inputs.", "committedDate": "2019-12-23T14:49:10Z", "type": "commit"}, {"oid": "61be32a12ed88c20d67ce06d4e72227a6514ba29", "url": "https://github.com/ibissource/iaf/commit/61be32a12ed88c20d67ce06d4e72227a6514ba29", "message": "Clean up the code.", "committedDate": "2019-12-23T15:14:18Z", "type": "commit"}, {"oid": "16356e2a0a5eb185794a5db0ce4ac2da5f0dfa11", "url": "https://github.com/ibissource/iaf/commit/16356e2a0a5eb185794a5db0ce4ac2da5f0dfa11", "message": "Merge branch 'master' into xerces-1.1", "committedDate": "2019-12-23T15:16:38Z", "type": "commit"}, {"oid": "33ec13e740a0a42eb183416dc78389906977ccf6", "url": "https://github.com/ibissource/iaf/commit/33ec13e740a0a42eb183416dc78389906977ccf6", "message": "Use better version of eclipse xpath2.", "committedDate": "2019-12-24T09:55:00Z", "type": "commit"}, {"oid": "57ea0e0ec51396b4ba36e41a218e3846f5594526", "url": "https://github.com/ibissource/iaf/commit/57ea0e0ec51396b4ba36e41a218e3846f5594526", "message": "Cleanup code and remove unnecessary repository.", "committedDate": "2019-12-24T10:05:37Z", "type": "commit"}, {"oid": "5b03dd69b3cb989100a34ae45d38980bb8970ab4", "url": "https://github.com/ibissource/iaf/commit/5b03dd69b3cb989100a34ae45d38980bb8970ab4", "message": "Add IbisDoc for version on xmlvalidator.", "committedDate": "2019-12-24T10:37:34Z", "type": "commit"}, {"oid": "66d1bbe5904d7cafa93dd718ad1fc1471286f6e4", "url": "https://github.com/ibissource/iaf/commit/66d1bbe5904d7cafa93dd718ad1fc1471286f6e4", "message": "Remove xpath2 dependency.", "committedDate": "2020-01-02T09:27:02Z", "type": "commit"}, {"oid": "d31738d7c246ffb8fb1c06981c40aa1ec566bb4f", "url": "https://github.com/ibissource/iaf/commit/d31738d7c246ffb8fb1c06981c40aa1ec566bb4f", "message": "Use getinputSource to create source for input.", "committedDate": "2020-01-02T09:34:42Z", "type": "commit"}, {"oid": "84e61940855943f66a482da8a10284428f3bc5cd", "url": "https://github.com/ibissource/iaf/commit/84e61940855943f66a482da8a10284428f3bc5cd", "message": "Restructure validators and replace parsers with validatorhandlers.", "committedDate": "2020-01-03T15:22:43Z", "type": "commit"}, {"oid": "a92738fe0757e7e16c66d1559a29f91d07da9863", "url": "https://github.com/ibissource/iaf/commit/a92738fe0757e7e16c66d1559a29f91d07da9863", "message": "Debug external entity resolving.", "committedDate": "2020-01-03T17:24:37Z", "type": "commit"}, {"oid": "42592091b698cd1fb5f007a95feaf48642a10c4f", "url": "https://github.com/ibissource/iaf/commit/42592091b698cd1fb5f007a95feaf48642a10c4f", "message": "Move validate function to the abstract validator.", "committedDate": "2020-01-08T14:19:03Z", "type": "commit"}, {"oid": "66ca3d157efbb938a19566bf2d41d445e76fa48f", "url": "https://github.com/ibissource/iaf/commit/66ca3d157efbb938a19566bf2d41d445e76fa48f", "message": "Replace validatorHandlerImpl with validatorHandler.", "committedDate": "2020-01-15T09:37:04Z", "type": "commit"}, {"oid": "0f5afdd60c28e64f7142552b06a618e548e5420d", "url": "https://github.com/ibissource/iaf/commit/0f5afdd60c28e64f7142552b06a618e548e5420d", "message": "Remove unnecessary spaces.", "committedDate": "2020-01-15T09:40:14Z", "type": "commit"}, {"oid": "9cc43dbcf7244fe5a0d5be5c004e193fbedf446f", "url": "https://github.com/ibissource/iaf/commit/9cc43dbcf7244fe5a0d5be5c004e193fbedf446f", "message": "Change version after using the source instead of dev branch", "committedDate": "2020-01-15T10:31:23Z", "type": "commit"}, {"oid": "765bfae88c6c12cbafb24564671bf68f7bed9be4", "url": "https://github.com/ibissource/iaf/commit/765bfae88c6c12cbafb24564671bf68f7bed9be4", "message": "Remove modified Xerces 2_11 code", "committedDate": "2020-01-30T14:14:10Z", "type": "commit"}, {"oid": "90bd5641768af96c36e023ba42144cbfd7c558b0", "url": "https://github.com/ibissource/iaf/commit/90bd5641768af96c36e023ba42144cbfd7c558b0", "message": "Merge branch 'xerces-1.1' into XmlSchema11Compliancy\n\nConflicts:\n\tcore/src/main/java/nl/nn/adapterframework/pipes/XmlValidator.java\n\tcore/src/main/java/nl/nn/adapterframework/validation/XercesXmlValidator.java", "committedDate": "2020-01-30T15:30:21Z", "type": "commit"}, {"oid": "0ebac464395c980db053522a2e30c0ad29811d4f", "url": "https://github.com/ibissource/iaf/commit/0ebac464395c980db053522a2e30c0ad29811d4f", "message": "Fix pom and imports", "committedDate": "2020-01-30T15:58:58Z", "type": "commit"}, {"oid": "716f66cb944bee0879647007757d936a58240ee1", "url": "https://github.com/ibissource/iaf/commit/716f66cb944bee0879647007757d936a58240ee1", "message": "Support for XmlSchema 1.1 validation", "committedDate": "2020-01-31T10:52:32Z", "type": "commit"}, {"oid": "a55ce112572e9810983c9dd113a8fb159c0984f9", "url": "https://github.com/ibissource/iaf/commit/a55ce112572e9810983c9dd113a8fb159c0984f9", "message": "Improve error message when correct Xerces is not found", "committedDate": "2020-01-31T14:36:01Z", "type": "commit"}, {"oid": "015497607f85a8cfb1e06290f801620222cb3874", "url": "https://github.com/ibissource/iaf/commit/015497607f85a8cfb1e06290f801620222cb3874", "message": "Improve error message when proper Xerces appears to be not found", "committedDate": "2020-01-31T14:38:29Z", "type": "commit"}, {"oid": "2453c7fef74c9ee06de088c2b142a58032c85af7", "url": "https://github.com/ibissource/iaf/commit/2453c7fef74c9ee06de088c2b142a58032c85af7", "message": "Add feature to RELEASES.md", "committedDate": "2020-02-03T08:23:03Z", "type": "commit"}, {"oid": "4939d45320e38fae05592983c147cdfe6d1e0b31", "url": "https://github.com/ibissource/iaf/commit/4939d45320e38fae05592983c147cdfe6d1e0b31", "message": "Update ibis-xerces version to 1.12.1-xml-schema-1.1", "committedDate": "2020-02-03T15:21:45Z", "type": "commit"}, {"oid": "cf4b6ee4e223c49413685caae8cfa371ddf76e96", "url": "https://github.com/ibissource/iaf/commit/cf4b6ee4e223c49413685caae8cfa371ddf76e96", "message": "Fix Codacy issues", "committedDate": "2020-02-03T15:30:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE4MjQ0Nw==", "url": "https://github.com/ibissource/iaf/pull/392#discussion_r374182447", "bodyText": "Eentje mag weg :)", "author": "nielsm5", "createdAt": "2020-02-03T15:53:07Z", "path": "core/src/main/java/nl/nn/adapterframework/validation/XercesXmlValidator.java", "diffHunk": "@@ -274,6 +304,15 @@ public ValidatorHandler getValidatorHandler(IPipeLineSession session, Validation\n \t\t\tvalidatorHandler.setFeature(VALIDATION_FEATURE_ID, true);\n \t\t\tvalidatorHandler.setFeature(SCHEMA_VALIDATION_FEATURE_ID, true);\n \t\t\tvalidatorHandler.setFeature(SCHEMA_FULL_CHECKING_FEATURE_ID, isFullSchemaChecking());\n+\t\t\tvalidatorHandler.setFeature(SCHEMA_VALIDATION_FEATURE_ID, true);\n+\t\t\tvalidatorHandler.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);", "originalCommit": "cf4b6ee4e223c49413685caae8cfa371ddf76e96", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDE4NTc2MQ==", "url": "https://github.com/ibissource/iaf/pull/392#discussion_r374185761", "bodyText": "Dit mag een message worden... die is veel mooier :)", "author": "nielsm5", "createdAt": "2020-02-03T15:58:19Z", "path": "core/src/main/java/nl/nn/adapterframework/validation/AbstractXmlValidator.java", "diffHunk": "@@ -273,22 +225,59 @@ public void setSchemasProvider(SchemasProvider schemasProvider) {\n \t\tthis.schemasProvider = schemasProvider;\n \t}\n \n-\tprotected String getLogPrefix(IPipeLineSession session){\n+\tprotected String getLogPrefix(IPipeLineSession session) {\n \t\tStringBuilder sb = new StringBuilder();\n \t\tsb.append(ClassUtils.nameOf(this)).append(' ');\n-\t\tif(this instanceof INamedObject) {\n+\t\tif (this instanceof INamedObject) {\n \t\t\tsb.append(\"[\").append(((INamedObject) this).getName()).append(\"] \");\n \t\t}\n-\t\tif(session != null) {\n+\t\tif (session != null) {\n \t\t\tsb.append(\"msgId [\").append(session.getMessageId()).append(\"] \");\n \t\t}\n \t\treturn sb.toString();\n \t}\n \n+\tprotected InputSource getInputSource(Object input) throws XmlValidatorException {\n+\t\tVariant in = new Variant(input);", "originalCommit": "cf4b6ee4e223c49413685caae8cfa371ddf76e96", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "29dbc63c01b71ac25ea0013c1ed63af589402903", "url": "https://github.com/ibissource/iaf/commit/29dbc63c01b71ac25ea0013c1ed63af589402903", "message": "Replace Variant with Message", "committedDate": "2020-02-03T16:14:35Z", "type": "commit"}, {"oid": "201c7e586895ba869e32056600f3517d1b1ca90f", "url": "https://github.com/ibissource/iaf/commit/201c7e586895ba869e32056600f3517d1b1ca90f", "message": "remove duplicate feature setting", "committedDate": "2020-02-03T16:15:00Z", "type": "commit"}]}