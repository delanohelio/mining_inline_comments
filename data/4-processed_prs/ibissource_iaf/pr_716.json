{"pr_number": 716, "pr_title": "Merge 4 Util test classes", "pr_createdAt": "2020-05-14T08:35:45Z", "pr_url": "https://github.com/ibissource/iaf/pull/716", "timeline": [{"oid": "f923a6756882aa8f22776ce84ff8532c8bc9dcfb", "url": "https://github.com/ibissource/iaf/commit/f923a6756882aa8f22776ce84ff8532c8bc9dcfb", "message": "[maven-release-plugin] prepare release v7.5-RC1", "committedDate": "2020-02-18T13:56:47Z", "type": "commit"}, {"oid": "bab86966e83621208227871eafc4504bdc6d2d21", "url": "https://github.com/ibissource/iaf/commit/bab86966e83621208227871eafc4504bdc6d2d21", "message": "[maven-release-plugin] prepare for next development iteration", "committedDate": "2020-02-18T13:56:48Z", "type": "commit"}, {"oid": "331ffb127fa2c18b59892b4d9de013b87ae57f6c", "url": "https://github.com/ibissource/iaf/commit/331ffb127fa2c18b59892b4d9de013b87ae57f6c", "message": "Update releases.md", "committedDate": "2020-02-18T15:44:41Z", "type": "commit"}, {"oid": "ef4d497de45dc4bd07cbd86d9547167a37db93e2", "url": "https://github.com/ibissource/iaf/commit/ef4d497de45dc4bd07cbd86d9547167a37db93e2", "message": "Fix for #426: null sender result throws NPE in MessageSendingPipe (#431)", "committedDate": "2020-02-19T11:10:42Z", "type": "commit"}, {"oid": "39a54bd2ea32632918c676d60c0c66669c1b1e3d", "url": "https://github.com/ibissource/iaf/commit/39a54bd2ea32632918c676d60c0c66669c1b1e3d", "message": "Fix version dependency in iaf-test (#430)", "committedDate": "2020-02-19T11:11:44Z", "type": "commit"}, {"oid": "2b7842eb9f04547575f7d222233ff8e222ea67f9", "url": "https://github.com/ibissource/iaf/commit/2b7842eb9f04547575f7d222233ff8e222ea67f9", "message": "Fix for #425: Nested stacktrace ends at ForEachChildElementPipe (#429)", "committedDate": "2020-02-19T11:57:40Z", "type": "commit"}, {"oid": "e9a3ed66855c3030e7b3e5bc00e1b83117205984", "url": "https://github.com/ibissource/iaf/commit/e9a3ed66855c3030e7b3e5bc00e1b83117205984", "message": "Make sure the proper SpringBus is passed through to the IbisContext #445 (#446)", "committedDate": "2020-02-21T13:27:26Z", "type": "commit"}, {"oid": "0c022e55e45569932581e0fb37ac823d01d42c28", "url": "https://github.com/ibissource/iaf/commit/0c022e55e45569932581e0fb37ac823d01d42c28", "message": "Add timeout to window reload", "committedDate": "2020-03-02T11:04:38Z", "type": "commit"}, {"oid": "c8d68ed98409cf3c5285d5e1a32c105e99cf2f80", "url": "https://github.com/ibissource/iaf/commit/c8d68ed98409cf3c5285d5e1a32c105e99cf2f80", "message": "Add confirm when removing schedules", "committedDate": "2020-03-02T11:05:22Z", "type": "commit"}, {"oid": "195654e097893ac580592a1f882d4d1ed586af0c", "url": "https://github.com/ibissource/iaf/commit/195654e097893ac580592a1f882d4d1ed586af0c", "message": "Move menu expand button", "committedDate": "2020-03-02T15:12:45Z", "type": "commit"}, {"oid": "fc409974d2461da5609e24ebaad1696bd07a1b1a", "url": "https://github.com/ibissource/iaf/commit/fc409974d2461da5609e24ebaad1696bd07a1b1a", "message": "Fix security role bindings not being displayed", "committedDate": "2020-03-02T16:26:47Z", "type": "commit"}, {"oid": "278971105b5d310a0512c036984be0d92ce7df18", "url": "https://github.com/ibissource/iaf/commit/278971105b5d310a0512c036984be0d92ce7df18", "message": "Make sure menu item and breadcrum are consistent #448", "committedDate": "2020-03-02T17:07:09Z", "type": "commit"}, {"oid": "8e64a6b4ee0da568939e053aa1ad66765c22c361", "url": "https://github.com/ibissource/iaf/commit/8e64a6b4ee0da568939e053aa1ad66765c22c361", "message": "Add ladda and log full stacktrace #450", "committedDate": "2020-03-03T10:14:44Z", "type": "commit"}, {"oid": "6616ff4d8e841cb50169f430ae4b3a2deb0a4c70", "url": "https://github.com/ibissource/iaf/commit/6616ff4d8e841cb50169f430ae4b3a2deb0a4c70", "message": "Remove formatted strings in IAF API #443", "committedDate": "2020-03-03T13:31:04Z", "type": "commit"}, {"oid": "d6a910f179fa3b260c13353e219fca74b2ef41fc", "url": "https://github.com/ibissource/iaf/commit/d6a910f179fa3b260c13353e219fca74b2ef41fc", "message": "fix conflicts", "committedDate": "2020-05-14T08:20:24Z", "type": "commit"}, {"oid": "0b702386fcadd7779591e9fc76091006853c34d9", "url": "https://github.com/ibissource/iaf/commit/0b702386fcadd7779591e9fc76091006853c34d9", "message": "add 4 UtilTest files", "committedDate": "2020-05-14T08:32:52Z", "type": "commit"}, {"oid": "e5305ed0215649467f4e47d00e51ac579b43eec4", "url": "https://github.com/ibissource/iaf/commit/e5305ed0215649467f4e47d00e51ac579b43eec4", "message": "add tabs and spaces to changed files", "committedDate": "2020-05-14T08:56:20Z", "type": "commit"}, {"oid": "d2240df43859781c98a00ec2e15820c20f92fd06", "url": "https://github.com/ibissource/iaf/commit/d2240df43859781c98a00ec2e15820c20f92fd06", "message": "improve code quality", "committedDate": "2020-05-14T12:28:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5OTU1MQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r425799551", "bodyText": "code style dictates that the closing bracket, when present should be on a new line.\nApplies in multiple tests", "author": "nielsm5", "createdAt": "2020-05-15T13:25:02Z", "path": "core/src/test/java/nl/nn/adapterframework/util/CounterStatisticTest.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * CounterStatistic Tester.\n+ *\n+ * @author <Sina Sen>\n+\n+ */\n+public class CounterStatisticTest {\n+\n+\n+    /**\n+     *\n+     * Method: performAction(int action)\n+     *\n+     */\n+    @Test\n+    public void testPerformAction01() throws Exception {\n+        CounterStatistic cs = new CounterStatistic(10);\n+        cs.performAction(0);\n+        assertEquals(cs.getValue(), 10);\n+    }\n+\n+    /**\n+     *\n+     * Method: performAction(int action)\n+     *\n+     */\n+    @Test\n+    public void testPerformAction2() throws Exception {\n+        CounterStatistic cs = new CounterStatistic(10);\n+        cs.performAction(2);\n+        assertEquals(cs.getValue(), 0);    }\n+\n+    /**\n+     *\n+     * Method: performAction(int action)\n+     *\n+     */\n+    @Test\n+    public void testPerformAction34() throws Exception {\n+        CounterStatistic cs = new CounterStatistic(10);\n+        cs.performAction(3);\n+        assertEquals(cs.getValue(), 10);    }", "originalCommit": "d2240df43859781c98a00ec2e15820c20f92fd06", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODY5NTk3Nw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r428695977", "bodyText": "changed it", "author": "sinasen2000", "createdAt": "2020-05-21T14:43:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5OTU1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgwMDc4MQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r425800781", "bodyText": "Try to also test the function of this class. set a limit, add limit +1 messages to the vector.\nTest the size\nTest that the first item has been removed", "author": "nielsm5", "createdAt": "2020-05-15T13:26:56Z", "path": "core/src/test/java/nl/nn/adapterframework/util/SizeLimitedVectorTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+import static org.junit.Assert.assertEquals;\n+\n+/**\n+ * SizeLimitedVector Tester.\n+ *\n+ * @author <Sina Sen>\n+\n+ */\n+public class SizeLimitedVectorTest {\n+\n+\n+    /**\n+     *\n+     * Method: add(Object o)\n+     *\n+     */\n+    @Test\n+    public void testAdd() throws Exception {\n+        SizeLimitedVector slv = new SizeLimitedVector(10);\n+        slv.add(\"testString\");\n+        assertEquals(slv.getMaxSize(), 10);\n+        assertEquals(slv.get(0), \"testString\");\n+    }\n+\n+    /**\n+     *\n+     * Method: setMaxSize(int maxSize)\n+     *\n+     */\n+    @Test\n+    public void testSetMaxSize() throws Exception {\n+        SizeLimitedVector slv = new SizeLimitedVector(10);\n+        slv.setMaxSize(14);\n+        assertEquals(slv.getMaxSize(), 14);\n+    }\n+\n+\n+}", "originalCommit": "d2240df43859781c98a00ec2e15820c20f92fd06", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODY5NjIyMw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r428696223", "bodyText": "If I understood what you meant correctly, now it is tested", "author": "sinasen2000", "createdAt": "2020-05-21T14:43:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgwMDc4MQ=="}], "type": "inlineReview"}, {"oid": "fa03bfc34db5e5ee02ab6e1e77c0f4cdfd600ff0", "url": "https://github.com/ibissource/iaf/commit/fa03bfc34db5e5ee02ab6e1e77c0f4cdfd600ff0", "message": "fix merge request", "committedDate": "2020-05-21T14:04:28Z", "type": "commit"}, {"oid": "9dc5e8ba14e5217e8fea4051ebabd63fe18d94eb", "url": "https://github.com/ibissource/iaf/commit/9dc5e8ba14e5217e8fea4051ebabd63fe18d94eb", "message": "fix merge request", "committedDate": "2020-05-21T14:06:18Z", "type": "commit"}, {"oid": "46f778aad12f5858e1d552b1f8a4449c392f2ae9", "url": "https://github.com/ibissource/iaf/commit/46f778aad12f5858e1d552b1f8a4449c392f2ae9", "message": ".", "committedDate": "2020-05-21T14:07:28Z", "type": "commit"}, {"oid": "f7bcb9bae655532a24f62dd5725429d1bf331e97", "url": "https://github.com/ibissource/iaf/commit/f7bcb9bae655532a24f62dd5725429d1bf331e97", "message": "fix merge request", "committedDate": "2020-05-21T14:09:48Z", "type": "commit"}, {"oid": "cad1d4df905fdb6d15a6045cabc60cd6da0a21a3", "url": "https://github.com/ibissource/iaf/commit/cad1d4df905fdb6d15a6045cabc60cd6da0a21a3", "message": "fix mr", "committedDate": "2020-05-21T14:11:34Z", "type": "commit"}, {"oid": "1204c629d33153debc35e7dc1d0117b8bbdee598", "url": "https://github.com/ibissource/iaf/commit/1204c629d33153debc35e7dc1d0117b8bbdee598", "message": "fix mr", "committedDate": "2020-05-21T14:12:34Z", "type": "commit"}, {"oid": "566f3650ca9919002073f484a54daf93547107fa", "url": "https://github.com/ibissource/iaf/commit/566f3650ca9919002073f484a54daf93547107fa", "message": "added test cases and refactored code", "committedDate": "2020-05-21T14:42:17Z", "type": "commit"}, {"oid": "14126dbdf9c525dd3e00d3c01b7ab42a8c676f89", "url": "https://github.com/ibissource/iaf/commit/14126dbdf9c525dd3e00d3c01b7ab42a8c676f89", "message": "Fix codacy error", "committedDate": "2020-05-21T14:46:47Z", "type": "commit"}, {"oid": "3b922bf6feadbd0f72d9976523e7ea7877a4474f", "url": "https://github.com/ibissource/iaf/commit/3b922bf6feadbd0f72d9976523e7ea7877a4474f", "message": "rerun CI in github", "committedDate": "2020-05-21T14:54:38Z", "type": "commit"}, {"oid": "abc300d7801ef7bf9ea17139ca601989742b67ab", "url": "https://github.com/ibissource/iaf/commit/abc300d7801ef7bf9ea17139ca601989742b67ab", "message": "Add FileNameUtils Test\n\ntested all the methods, all 29 tests passing, did not spot any issues.", "committedDate": "2020-05-22T11:35:42Z", "type": "commit"}, {"oid": "236e3082633a26c4c8398a5741446b70c232f3c1", "url": "https://github.com/ibissource/iaf/commit/236e3082633a26c4c8398a5741446b70c232f3c1", "message": "Improve code quality", "committedDate": "2020-05-22T11:38:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE5OTE1Nw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r429199157", "bodyText": "What exactly are you testing here? this catch clause should never happen?\nMaybe add some test assertions :)", "author": "nielsm5", "createdAt": "2020-05-22T11:44:26Z", "path": "core/src/test/java/nl/nn/adapterframework/util/SizeLimitedVectorTest.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.fail;\n+\n+/**\n+ * SizeLimitedVector Tester.\n+ *\n+ * @author <Sina Sen>\n+\n+ */\n+public class SizeLimitedVectorTest {\n+\n+\n+    /**\n+     *\n+     * Method: add(Object o)\n+     *\n+     */\n+    @Test\n+    public void testAdd() throws ArrayIndexOutOfBoundsException {\n+        SizeLimitedVector slv = new SizeLimitedVector(10);\n+        slv.add(\"testString\");\n+        assertEquals(slv.getMaxSize(), 10);\n+        assertEquals(slv.get(0), \"testString\");\n+\n+    }\n+\n+\n+    @Test\n+    public void testMaxSizePassed() throws ArrayIndexOutOfBoundsException {\n+        try{SizeLimitedVector slv = new SizeLimitedVector(1);\n+        slv.add(13);\n+        slv.add(14);\n+        }\n+        catch (ArrayIndexOutOfBoundsException e) {\n+            fail(\"array capacity is passed, capacity was 1, but 2 elements got added\");\n+        }", "originalCommit": "236e3082633a26c4c8398a5741446b70c232f3c1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIwMTAxNQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r429201015", "bodyText": "why shouldn't the catch clause happen? The second add operation passes the size of the vector thus raises and AIOoBounds exception. I'm testing the case that if one adds more items to the vector than the size obliges, what happens next. In the original method .add there was not such a case that raises an expception so I used my own one.", "author": "sinasen2000", "createdAt": "2020-05-22T11:49:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE5OTE1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0MTczOQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r430241739", "bodyText": "The whole point of the SizeLimitedVector is that you can append as many things to it as you like but it only stores the last X amount.", "author": "nielsm5", "createdAt": "2020-05-26T08:27:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE5OTE1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkwNDUwMw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r433904503", "bodyText": "yes, I changed the test accordingly.", "author": "sinasen2000", "createdAt": "2020-06-02T14:06:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE5OTE1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE5OTU5Mg==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r429199592", "bodyText": "This class didn't require any tests. It's a utilities class copied from apache commons io.\nThe only reason it's here is in order to avoid websphere compilations and runtime issues.", "author": "nielsm5", "createdAt": "2020-05-22T11:45:27Z", "path": "core/src/test/java/nl/nn/adapterframework/util/FilenameUtilsTest.java", "diffHunk": "@@ -0,0 +1,272 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotEquals;\n+\n+/**\n+ * FilenameUtils Tester.\n+ *\n+ * @author <Sina Sen>\n+ */\n+public class FilenameUtilsTest {", "originalCommit": "236e3082633a26c4c8398a5741446b70c232f3c1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkwNDE2Nw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r433904167", "bodyText": "okay, more communication will be assured on testing new classes.", "author": "sinasen2000", "createdAt": "2020-06-02T14:06:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE5OTU5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE5OTc3Mw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r429199773", "bodyText": "You might run on windows, but many of our servers do not :) this will fail on Travis and Jenkins", "author": "nielsm5", "createdAt": "2020-05-22T11:45:52Z", "path": "core/src/test/java/nl/nn/adapterframework/util/FilenameUtilsTest.java", "diffHunk": "@@ -0,0 +1,272 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotEquals;\n+\n+/**\n+ * FilenameUtils Tester.\n+ *\n+ * @author <Sina Sen>\n+ */\n+public class FilenameUtilsTest {\n+\n+\n+\n+    /**\n+     * Method: isSystemWindows()\n+     */\n+    @Test\n+    public void testIsSystemWindows() throws Exception {\n+        assertEquals(FilenameUtils.isSystemWindows(), true);\n+    }", "originalCommit": "236e3082633a26c4c8398a5741446b70c232f3c1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIwMjUxMw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r429202513", "bodyText": "yes indeed, I removed this test case.", "author": "sinasen2000", "createdAt": "2020-05-22T11:52:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTE5OTc3Mw=="}], "type": "inlineReview"}, {"oid": "3eb6a4889391ade0fd586aae484ec15b986e5d4e", "url": "https://github.com/ibissource/iaf/commit/3eb6a4889391ade0fd586aae484ec15b986e5d4e", "message": "Fix testing errors", "committedDate": "2020-05-22T11:52:09Z", "type": "commit"}, {"oid": "88b24b93afb78d5645b992d2324ec0d927ad19d7", "url": "https://github.com/ibissource/iaf/commit/88b24b93afb78d5645b992d2324ec0d927ad19d7", "message": "Fix build error on method testConcat", "committedDate": "2020-05-22T11:56:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0MjgyMw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r430242823", "bodyText": "Please also add 14+1 elements and verify more then just the setter being changed.\ne.g. calling getSize or capacity to verify the contents of the vector.", "author": "nielsm5", "createdAt": "2020-05-26T08:29:36Z", "path": "core/src/test/java/nl/nn/adapterframework/util/SizeLimitedVectorTest.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.fail;\n+\n+/**\n+ * SizeLimitedVector Tester.\n+ *\n+ * @author <Sina Sen>\n+\n+ */\n+public class SizeLimitedVectorTest {\n+\n+\n+    /**\n+     *\n+     * Method: add(Object o)\n+     *\n+     */\n+    @Test\n+    public void testAdd() throws ArrayIndexOutOfBoundsException {\n+        SizeLimitedVector slv = new SizeLimitedVector(10);\n+        slv.add(\"testString\");\n+        assertEquals(slv.getMaxSize(), 10);\n+        assertEquals(slv.get(0), \"testString\");\n+\n+    }\n+\n+\n+    @Test\n+    public void testMaxSizePassed() throws ArrayIndexOutOfBoundsException {\n+        try{SizeLimitedVector slv = new SizeLimitedVector(1);\n+        slv.add(13);\n+        slv.add(14);\n+        }\n+        catch (ArrayIndexOutOfBoundsException e) {\n+            fail(\"array capacity is passed, capacity was 1, but 2 elements got added\");\n+        }\n+\n+    }\n+    /**\n+     *\n+     * Method: setMaxSize(int maxSize)\n+     *\n+     */\n+    @Test\n+    public void testSetMaxSize() throws Exception {\n+        SizeLimitedVector slv = new SizeLimitedVector(10);\n+        slv.setMaxSize(14);\n+        assertEquals(slv.getMaxSize(), 14);", "originalCommit": "88b24b93afb78d5645b992d2324ec0d927ad19d7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0MzQ2Ng==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r430243466", "bodyText": "You dont have to declare this RuntimeException here do you? Non of the functions are throwing any exceptions", "author": "nielsm5", "createdAt": "2020-05-26T08:30:42Z", "path": "core/src/test/java/nl/nn/adapterframework/util/SizeLimitedVectorTest.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.fail;\n+\n+/**\n+ * SizeLimitedVector Tester.\n+ *\n+ * @author <Sina Sen>\n+\n+ */\n+public class SizeLimitedVectorTest {\n+\n+\n+    /**\n+     *\n+     * Method: add(Object o)\n+     *\n+     */\n+    @Test\n+    public void testAdd() throws ArrayIndexOutOfBoundsException {", "originalCommit": "88b24b93afb78d5645b992d2324ec0d927ad19d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0ODcxNg==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r430248716", "bodyText": "Yes. I am going to remove it, thanks for pointing out.", "author": "sinasen2000", "createdAt": "2020-05-26T08:39:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0MzQ2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0Mzk5Nw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r430243997", "bodyText": "Try to use more descriptive names.  testAction1, testAction2, etc. is a bit vague when you're going through the log files :)", "author": "nielsm5", "createdAt": "2020-05-26T08:31:34Z", "path": "core/src/test/java/nl/nn/adapterframework/util/CounterStatisticTest.java", "diffHunk": "@@ -0,0 +1,67 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+import static org.junit.Assert.assertEquals;\n+\n+/**\n+ * CounterStatistic Tester.\n+ *\n+ * @author <Sina Sen>\n+\n+ */\n+public class CounterStatisticTest {\n+\n+\n+    /**\n+     *\n+     * Method: performAction(int action)\n+     *\n+     */\n+    @Test\n+    public void testPerformAction01() throws Exception {\n+        CounterStatistic cs = new CounterStatistic(10);\n+        cs.performAction(0);\n+        assertEquals(cs.getValue(), 10);\n+    }\n+\n+    /**\n+     *\n+     * Method: performAction(int action)\n+     *\n+     */\n+    @Test\n+    public void testPerformAction2() throws Exception {\n+        CounterStatistic cs = new CounterStatistic(10);\n+        cs.performAction(2);\n+        assertEquals(cs.getValue(), 0);\n+    }\n+    \n+\n+    /**\n+     *\n+     * Method: performAction(int action)\n+     *\n+     */\n+    @Test\n+    public void testPerformAction34() throws Exception {", "originalCommit": "88b24b93afb78d5645b992d2324ec0d927ad19d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0OTYxNA==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r430249614", "bodyText": "Indeed, the naming I used looks terrible, I used numbers to reflect the action with number given in the CounterStatistic class, however using the action names rather than the number will be more descriptive. I am changing that.", "author": "sinasen2000", "createdAt": "2020-05-26T08:40:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0Mzk5Nw=="}], "type": "inlineReview"}, {"oid": "0a4ddb46cadfb92c502c7e911c83d32a5d1b571c", "url": "https://github.com/ibissource/iaf/commit/0a4ddb46cadfb92c502c7e911c83d32a5d1b571c", "message": "Add MiscTest\n\nAdd the finished MiscTest. However, some tests still have issues to be resolved with respect to methods like filetowriter, filetostream, etc.", "committedDate": "2020-05-27T13:24:50Z", "type": "commit"}, {"oid": "bfc5a37328ad82d08cca3a038954de36496f6cee", "url": "https://github.com/ibissource/iaf/commit/bfc5a37328ad82d08cca3a038954de36496f6cee", "message": "Update the misc test with all working test cases.", "committedDate": "2020-06-02T11:50:57Z", "type": "commit"}, {"oid": "4814066dc9c929774917cde983a368740d179da6", "url": "https://github.com/ibissource/iaf/commit/4814066dc9c929774917cde983a368740d179da6", "message": "Resolve ci/cd errors", "committedDate": "2020-06-02T11:58:24Z", "type": "commit"}, {"oid": "45cb5ff3ff55d31d312ee35842c2bbc4539736c3", "url": "https://github.com/ibissource/iaf/commit/45cb5ff3ff55d31d312ee35842c2bbc4539736c3", "message": "Fix CI/CD errors", "committedDate": "2020-06-02T12:03:40Z", "type": "commit"}, {"oid": "c9e02d86fb564088ddaa6be78f44bcd301e81f35", "url": "https://github.com/ibissource/iaf/commit/c9e02d86fb564088ddaa6be78f44bcd301e81f35", "message": "Fix build errors", "committedDate": "2020-06-02T12:22:12Z", "type": "commit"}, {"oid": "2a1b7d6dc16fafba8ed570956eb27705fc37a97c", "url": "https://github.com/ibissource/iaf/commit/2a1b7d6dc16fafba8ed570956eb27705fc37a97c", "message": "Fix travis build.", "committedDate": "2020-06-02T12:30:44Z", "type": "commit"}, {"oid": "2206044153fbfd0962e04963b8d9252ccce7e397", "url": "https://github.com/ibissource/iaf/commit/2206044153fbfd0962e04963b8d9252ccce7e397", "message": "Improve code quality of the pr.", "committedDate": "2020-06-02T12:40:13Z", "type": "commit"}, {"oid": "bdbab891359f2c93a8afaccf933ad9ce64055138", "url": "https://github.com/ibissource/iaf/commit/bdbab891359f2c93a8afaccf933ad9ce64055138", "message": "Convert paths to work on any filesystem.", "committedDate": "2020-06-02T12:46:00Z", "type": "commit"}, {"oid": "43b3faa1a9ee577e90629a2e5808c8bb449a8d49", "url": "https://github.com/ibissource/iaf/commit/43b3faa1a9ee577e90629a2e5808c8bb449a8d49", "message": "Improve code quality.", "committedDate": "2020-06-02T12:51:26Z", "type": "commit"}, {"oid": "8310239fdacef147a117abb15b945149e78a2bb9", "url": "https://github.com/ibissource/iaf/commit/8310239fdacef147a117abb15b945149e78a2bb9", "message": "Make changes w.r.t Niels' feedback on the pr", "committedDate": "2020-06-02T13:55:20Z", "type": "commit"}, {"oid": "8f1918e5d970105ae1103607fb3ccf1a3923cebd", "url": "https://github.com/ibissource/iaf/commit/8f1918e5d970105ae1103607fb3ccf1a3923cebd", "message": "Fix build errors", "committedDate": "2020-06-02T14:00:56Z", "type": "commit"}, {"oid": "b0c8fdaf839a94c4e4d4cff1b89184e32ec81d9b", "url": "https://github.com/ibissource/iaf/commit/b0c8fdaf839a94c4e4d4cff1b89184e32ec81d9b", "message": "Increase code coverage", "committedDate": "2020-06-03T09:23:57Z", "type": "commit"}, {"oid": "153939b9289d701449b013f3672af19127c0e2fb", "url": "https://github.com/ibissource/iaf/commit/153939b9289d701449b013f3672af19127c0e2fb", "message": "Fix build error", "committedDate": "2020-06-03T09:29:18Z", "type": "commit"}, {"oid": "de8c74960b4a2926132b0c198bcf49d0a6e21fab", "url": "https://github.com/ibissource/iaf/commit/de8c74960b4a2926132b0c198bcf49d0a6e21fab", "message": "Fix build error.", "committedDate": "2020-06-03T09:29:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyMzM4NA==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r435923384", "bodyText": "\ud83d\udc4d", "author": "nielsm5", "createdAt": "2020-06-05T13:33:08Z", "path": "core/src/test/java/nl/nn/adapterframework/util/SizeLimitedVectorTest.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+import static org.junit.Assert.assertEquals;\n+\n+/**\n+ * SizeLimitedVector Tester.\n+ *\n+ * @author <Sina Sen>\n+\n+ */\n+public class SizeLimitedVectorTest {\n+\n+\n+    /**\n+     *\n+     * Method: add(Object o)\n+     *\n+     */\n+    @Test\n+    public void testAdd() {\n+        SizeLimitedVector slv = new SizeLimitedVector(10);\n+        slv.add(\"testString\");\n+        assertEquals(slv.getMaxSize(), 10);\n+        assertEquals(slv.get(0), \"testString\");\n+\n+    }\n+\n+\n+    @Test\n+    public void testMaxSizePassed() throws ArrayIndexOutOfBoundsException {\n+        SizeLimitedVector slv = new SizeLimitedVector(1);\n+        slv.add(13);\n+        slv.add(14);\n+        assertEquals(slv.get(0), 14);\n+\n+    }\n+    /**\n+     *\n+     * Method: setMaxSize(int maxSize)\n+     *\n+     */\n+    @Test\n+    public void testSetMaxSize() throws Exception {\n+        SizeLimitedVector slv = new SizeLimitedVector(5);\n+        slv.setMaxSize(6);\n+        slv.add(1); slv.add(2); slv.add(3); slv.add(4); slv.add(5); slv.add(6); slv.add(7);\n+        assertEquals(slv.getMaxSize(), 6);\n+        assertEquals(slv.capacity(), 10);\n+        assertEquals(slv.size(), 6);\n+        assertEquals(slv.get(0), 2);", "originalCommit": "de8c74960b4a2926132b0c198bcf49d0a6e21fab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyNTU0Mw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r435925543", "bodyText": "You are testing the actions here, instead of using the integer values, 123, could you use the more descriptive HasStatistics integer fields? So action 2 would become HasStatistics.STATISTICS_ACTION_RESET.\nMaybe you could also write 2 more tests for action 3 and 4 (mark main and mark full)", "author": "nielsm5", "createdAt": "2020-06-05T13:36:37Z", "path": "core/src/test/java/nl/nn/adapterframework/util/CounterStatisticTest.java", "diffHunk": "@@ -0,0 +1,67 @@\n+package nl.nn.adapterframework.util;\n+\n+import org.junit.Test;\n+import static org.junit.Assert.assertEquals;\n+\n+/**\n+ * CounterStatistic Tester.\n+ *\n+ * @author <Sina Sen>\n+\n+ */\n+public class CounterStatisticTest {\n+\n+\n+    /**\n+     *\n+     * Method: performAction(int action)\n+     *\n+     */\n+    @Test\n+    public void testPerformActionSummaryOrFull() throws Exception {\n+        CounterStatistic cs = new CounterStatistic(10);\n+        cs.performAction(0);\n+        assertEquals(cs.getValue(), 10);\n+    }\n+\n+    /**\n+     *\n+     * Method: performAction(int action)\n+     *\n+     */\n+    @Test\n+    public void testPerformActionReset() throws Exception {\n+        CounterStatistic cs = new CounterStatistic(10);\n+        cs.performAction(2);\n+        assertEquals(cs.getValue(), 0);\n+    }\n+    \n+\n+    /**\n+     *\n+     * Method: performAction(int action)\n+     *\n+     */\n+    @Test\n+    public void testPerformActionMarkMainOrFull() throws Exception {\n+        CounterStatistic cs = new CounterStatistic(10);\n+        cs.performAction(3);\n+        assertEquals(cs.getValue(), 10);\n+    }", "originalCommit": "de8c74960b4a2926132b0c198bcf49d0a6e21fab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzIxMDk0NA==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r437210944", "bodyText": "will add.", "author": "sinasen2000", "createdAt": "2020-06-09T07:59:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyNTU0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI5NjUzMw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r437296533", "bodyText": "added", "author": "sinasen2000", "createdAt": "2020-06-09T10:09:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyNTU0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyNzk4OA==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r435927988", "bodyText": "You're not testing the endOfLineString string here?", "author": "nielsm5", "createdAt": "2020-06-05T13:40:30Z", "path": "core/src/test/java/nl/nn/adapterframework/util/MiscTest.java", "diffHunk": "@@ -1,43 +1,610 @@\n package nl.nn.adapterframework.util;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotEquals;\n import static org.junit.Assert.assertTrue;\n \n+import java.io.BufferedReader;\n import java.io.ByteArrayInputStream;\n+import java.io.ByteArrayOutputStream;\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileWriter;\n import java.io.FilterInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.io.OutputStream;\n+import java.io.Reader;\n+import java.io.StringReader;\n+import java.io.StringWriter;\n+import java.io.Writer;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n \n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n \n+\n+/**\n+ * Misc Tester.\n+ *\n+ * @author <Sina Sen>\n+ */\n public class MiscTest {\n \n-\t@Test\n-\tpublic void testStreamToString() throws IOException {\n-\t\tString tekst = \"dit is een string\";\n-\t\tByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n-\t\t\n-\t\tCloseChecker closeChecker = new CloseChecker(bais); \n-\t\tString actual = Misc.streamToString(closeChecker);\n-\t\t\n-\t\tassertEquals(tekst, actual);\n-\t\tassertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n-\t}\n-\t\n-\tprivate class CloseChecker extends FilterInputStream {\n-\n-\t\tboolean inputStreamClosed;\n-\t\t\n-\t\tpublic CloseChecker(InputStream arg0) {\n-\t\t\tsuper(arg0);\n-\t\t}\n-\n-\t\t@Override\n-\t\tpublic void close() throws IOException {\n-\t\t\tinputStreamClosed=true;;\n-\t\t\tsuper.close();\n-\t\t}\n-\t\t\n-\t\t\n-\t}\n+    @ClassRule\n+    public static TemporaryFolder testFolder = new TemporaryFolder();\n+    private static String sourceFolderPath;\n+\n+    private static File file;\n+\n+    private String pathSeperator = File.separator;\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException {\n+        sourceFolderPath = testFolder.getRoot().getPath();\n+        file = testFolder.newFile(\"lebron.txt\");\n+        Writer w = new FileWriter(file.getName());\n+        w.write(\"inside the lebron file\");\n+        w.close();\n+    }\n+\n+    @AfterClass\n+    public static void cleanUp() {\n+        File f = new File(\"lebron.txt\");\n+        f.delete();\n+    }\n+\n+\n+    @Test\n+    public void testStreamToString() throws IOException {\n+        String tekst = \"dit is een string\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n+\n+        CloseChecker closeChecker = new CloseChecker(bais);\n+        String actual = Misc.streamToString(closeChecker);\n+\n+        assertEquals(tekst, actual);\n+        assertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n+    }\n+\n+    private class CloseChecker extends FilterInputStream {\n+\n+        boolean inputStreamClosed;\n+\n+        public CloseChecker(InputStream arg0) {\n+            super(arg0);\n+        }\n+\n+        @Override\n+        public void close() throws IOException {\n+            inputStreamClosed = true;\n+\n+            super.close();\n+        }\n+    }\n+\n+    /**\n+     * Method: createSimpleUUID()\n+     */\n+    @Test\n+    public void testCreateSimpleUUID() throws Exception {\n+        String uuid = Misc.createSimpleUUID();\n+        assertFalse(sourceFolderPath.isEmpty()); // for avoiding code quality warnings\n+        assertEquals(uuid.substring(8, 9), \"-\");\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+    /**\n+     * Method: createRandomUUID(boolean removeDashes)\n+     */\n+    @Test\n+    public void testCreateRandomUUIDRemoveDashes() throws Exception {\n+        String uuid = Misc.createRandomUUID(true);\n+        assertNotEquals(uuid.substring(8, 9), \"-\"); // assert that dashes are removed\n+        assertEquals(uuid.length(), 32);\n+    }\n+\n+    @Test\n+    public void testCreateRandomUUID() throws Exception {\n+        String uuid = Misc.createRandomUUID();\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+\n+    /**\n+     * Method: asHex(byte[] buf)\n+     */\n+    @Test\n+    public void testAsHex() throws Exception {\n+        String test = \"test\";\n+        String hex = Misc.asHex(test.getBytes());\n+        assertEquals(hex, \"74657374\");\n+    }\n+\n+    /**\n+     * Method: createNumericUUID()\n+     */\n+    @Test\n+    public void testCreateNumericUUID() throws Exception {\n+        String uuid = Misc.createNumericUUID();\n+        assertEquals(uuid.length(), 31);    //Unique string is <ipaddress with length 4*3><currentTime with length 13><hashcode with length 6>\n+    }\n+\n+    /**\n+     * Method: unsignedByteToInt(byte b)\n+     */\n+    @Test\n+    public void testUnsignedByteToInt() throws Exception {\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"-12\")), 244);\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"12\")), 12);\n+\n+    }\n+\n+\n+    /**\n+     * Method: fileToWriter(String filename, Writer writer)\n+     */\n+    @Test\n+    public void testFileToWriter() throws Exception {\n+        Writer writer = new StringWriter();\n+        Misc.fileToWriter(file.getName(), writer);\n+        assertEquals(writer.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: fileToStream(String filename, OutputStream output)\n+     */\n+    @Test\n+    public void testFileToStream() throws Exception {\n+        OutputStream os = new ByteArrayOutputStream();\n+        Misc.fileToStream(file.getName(), os);\n+        assertEquals(os.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output, boolean closeInput)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutputCloseInput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos, true);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToFile(InputStream inputStream, File file)\n+     */\n+    @Test\n+    public void testStreamToFile() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        Misc.streamToFile(bais, file);\n+\n+        // to read from the file\n+        InputStream is = new FileInputStream(file);\n+        BufferedReader buf = new BufferedReader(new InputStreamReader(is));\n+\n+        String line = buf.readLine();\n+        StringBuilder sb = new StringBuilder();\n+\n+        while (line != null) {\n+            sb.append(line).append(\"\\n\");\n+            line = buf.readLine();\n+        }\n+\n+        String fileAsString = sb.toString();\n+        assertEquals(fileAsString, \"test\\n\");\n+    }\n+\n+    /**\n+     * Method: streamToBytes(InputStream inputStream)\n+     */\n+    @Test\n+    public void testStreamToBytes() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        byte[] arr = Misc.streamToBytes(bais);\n+        assertEquals(new String(arr, StandardCharsets.UTF_8), \"test\");\n+    }\n+\n+    /**\n+     * Method: readerToWriter(Reader reader, Writer writer)\n+     */\n+    @Test\n+    public void testReaderToWriterForReaderWriter() throws Exception {\n+        Reader reader = new StringReader(\"test\");\n+        Writer writer = new StringWriter();\n+        Misc.readerToWriter(reader, writer);\n+        assertEquals(writer.toString(), \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: fileToString(String fileName)\n+     */\n+    @Test\n+    public void testFileToStringFileName() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName()), \"inside the lebron file\");\n+    }\n+    @Test\n+    public void testFileToStringFileNameEndLine() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName(), \" the end\"), \"inside the lebron file\");", "originalCommit": "de8c74960b4a2926132b0c198bcf49d0a6e21fab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyODcxNA==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r435928714", "bodyText": "I see you're testing it in another test, maybe to not confuse things leave it blank or null instead :)", "author": "nielsm5", "createdAt": "2020-06-05T13:41:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyNzk4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMwMDgwNQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r437300805", "bodyText": "I removed this test. It was not testing anything unique.", "author": "sinasen2000", "createdAt": "2020-06-09T10:17:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyNzk4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyOTU2OQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r435929569", "bodyText": "Maybe also test the compressed variant to validate if it has actually been compressed", "author": "nielsm5", "createdAt": "2020-06-05T13:43:05Z", "path": "core/src/test/java/nl/nn/adapterframework/util/MiscTest.java", "diffHunk": "@@ -1,43 +1,610 @@\n package nl.nn.adapterframework.util;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotEquals;\n import static org.junit.Assert.assertTrue;\n \n+import java.io.BufferedReader;\n import java.io.ByteArrayInputStream;\n+import java.io.ByteArrayOutputStream;\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileWriter;\n import java.io.FilterInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.io.OutputStream;\n+import java.io.Reader;\n+import java.io.StringReader;\n+import java.io.StringWriter;\n+import java.io.Writer;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n \n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n \n+\n+/**\n+ * Misc Tester.\n+ *\n+ * @author <Sina Sen>\n+ */\n public class MiscTest {\n \n-\t@Test\n-\tpublic void testStreamToString() throws IOException {\n-\t\tString tekst = \"dit is een string\";\n-\t\tByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n-\t\t\n-\t\tCloseChecker closeChecker = new CloseChecker(bais); \n-\t\tString actual = Misc.streamToString(closeChecker);\n-\t\t\n-\t\tassertEquals(tekst, actual);\n-\t\tassertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n-\t}\n-\t\n-\tprivate class CloseChecker extends FilterInputStream {\n-\n-\t\tboolean inputStreamClosed;\n-\t\t\n-\t\tpublic CloseChecker(InputStream arg0) {\n-\t\t\tsuper(arg0);\n-\t\t}\n-\n-\t\t@Override\n-\t\tpublic void close() throws IOException {\n-\t\t\tinputStreamClosed=true;;\n-\t\t\tsuper.close();\n-\t\t}\n-\t\t\n-\t\t\n-\t}\n+    @ClassRule\n+    public static TemporaryFolder testFolder = new TemporaryFolder();\n+    private static String sourceFolderPath;\n+\n+    private static File file;\n+\n+    private String pathSeperator = File.separator;\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException {\n+        sourceFolderPath = testFolder.getRoot().getPath();\n+        file = testFolder.newFile(\"lebron.txt\");\n+        Writer w = new FileWriter(file.getName());\n+        w.write(\"inside the lebron file\");\n+        w.close();\n+    }\n+\n+    @AfterClass\n+    public static void cleanUp() {\n+        File f = new File(\"lebron.txt\");\n+        f.delete();\n+    }\n+\n+\n+    @Test\n+    public void testStreamToString() throws IOException {\n+        String tekst = \"dit is een string\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n+\n+        CloseChecker closeChecker = new CloseChecker(bais);\n+        String actual = Misc.streamToString(closeChecker);\n+\n+        assertEquals(tekst, actual);\n+        assertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n+    }\n+\n+    private class CloseChecker extends FilterInputStream {\n+\n+        boolean inputStreamClosed;\n+\n+        public CloseChecker(InputStream arg0) {\n+            super(arg0);\n+        }\n+\n+        @Override\n+        public void close() throws IOException {\n+            inputStreamClosed = true;\n+\n+            super.close();\n+        }\n+    }\n+\n+    /**\n+     * Method: createSimpleUUID()\n+     */\n+    @Test\n+    public void testCreateSimpleUUID() throws Exception {\n+        String uuid = Misc.createSimpleUUID();\n+        assertFalse(sourceFolderPath.isEmpty()); // for avoiding code quality warnings\n+        assertEquals(uuid.substring(8, 9), \"-\");\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+    /**\n+     * Method: createRandomUUID(boolean removeDashes)\n+     */\n+    @Test\n+    public void testCreateRandomUUIDRemoveDashes() throws Exception {\n+        String uuid = Misc.createRandomUUID(true);\n+        assertNotEquals(uuid.substring(8, 9), \"-\"); // assert that dashes are removed\n+        assertEquals(uuid.length(), 32);\n+    }\n+\n+    @Test\n+    public void testCreateRandomUUID() throws Exception {\n+        String uuid = Misc.createRandomUUID();\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+\n+    /**\n+     * Method: asHex(byte[] buf)\n+     */\n+    @Test\n+    public void testAsHex() throws Exception {\n+        String test = \"test\";\n+        String hex = Misc.asHex(test.getBytes());\n+        assertEquals(hex, \"74657374\");\n+    }\n+\n+    /**\n+     * Method: createNumericUUID()\n+     */\n+    @Test\n+    public void testCreateNumericUUID() throws Exception {\n+        String uuid = Misc.createNumericUUID();\n+        assertEquals(uuid.length(), 31);    //Unique string is <ipaddress with length 4*3><currentTime with length 13><hashcode with length 6>\n+    }\n+\n+    /**\n+     * Method: unsignedByteToInt(byte b)\n+     */\n+    @Test\n+    public void testUnsignedByteToInt() throws Exception {\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"-12\")), 244);\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"12\")), 12);\n+\n+    }\n+\n+\n+    /**\n+     * Method: fileToWriter(String filename, Writer writer)\n+     */\n+    @Test\n+    public void testFileToWriter() throws Exception {\n+        Writer writer = new StringWriter();\n+        Misc.fileToWriter(file.getName(), writer);\n+        assertEquals(writer.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: fileToStream(String filename, OutputStream output)\n+     */\n+    @Test\n+    public void testFileToStream() throws Exception {\n+        OutputStream os = new ByteArrayOutputStream();\n+        Misc.fileToStream(file.getName(), os);\n+        assertEquals(os.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output, boolean closeInput)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutputCloseInput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos, true);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToFile(InputStream inputStream, File file)\n+     */\n+    @Test\n+    public void testStreamToFile() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        Misc.streamToFile(bais, file);\n+\n+        // to read from the file\n+        InputStream is = new FileInputStream(file);\n+        BufferedReader buf = new BufferedReader(new InputStreamReader(is));\n+\n+        String line = buf.readLine();\n+        StringBuilder sb = new StringBuilder();\n+\n+        while (line != null) {\n+            sb.append(line).append(\"\\n\");\n+            line = buf.readLine();\n+        }\n+\n+        String fileAsString = sb.toString();\n+        assertEquals(fileAsString, \"test\\n\");\n+    }\n+\n+    /**\n+     * Method: streamToBytes(InputStream inputStream)\n+     */\n+    @Test\n+    public void testStreamToBytes() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        byte[] arr = Misc.streamToBytes(bais);\n+        assertEquals(new String(arr, StandardCharsets.UTF_8), \"test\");\n+    }\n+\n+    /**\n+     * Method: readerToWriter(Reader reader, Writer writer)\n+     */\n+    @Test\n+    public void testReaderToWriterForReaderWriter() throws Exception {\n+        Reader reader = new StringReader(\"test\");\n+        Writer writer = new StringWriter();\n+        Misc.readerToWriter(reader, writer);\n+        assertEquals(writer.toString(), \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: fileToString(String fileName)\n+     */\n+    @Test\n+    public void testFileToStringFileName() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName()), \"inside the lebron file\");\n+    }\n+    @Test\n+    public void testFileToStringFileNameEndLine() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName(), \" the end\"), \"inside the lebron file\");\n+    }\n+\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringNoXMLEncode() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", false);\n+        assertEquals(s, \"<root> 23    <name>GeeksforGeeks</name> 23    <address> 23        <sector>142</sector> 23        <location>Noida</location> 23    </address> 23</root> r\");\n+    }\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringXMLEncode() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", true);\n+        assertEquals(s, \"&lt;root&gt; 23    &lt;name&gt;GeeksforGeeks&lt;/name&gt; 23    &lt;address&gt; 23        &lt;sector&gt;142&lt;/sector&gt; 23        &lt;location&gt;Noida&lt;/location&gt; 23    &lt;/address&gt; 23&lt;/root&gt; r\");\n+    }\n+\n+\n+\n+    /**\n+     * Method: replace(String source, String from, String to)\n+     */\n+    @Test\n+    public void testReplace() throws Exception {\n+        String a = \"Kobe\";\n+        String res = Misc.replace(a, \"Ko\", \"Phoe\");\n+        assertEquals(res, \"Phoebe\");\n+    }\n+\n+    /**\n+     * Method: concatStrings(String part1, String separator, String part2)\n+     */\n+    @Test\n+    public void testConcatStrings() throws Exception {\n+        String a = \"LeBron\";\n+        String b = \"James\";\n+        String seperator = \"//\";\n+        String res = Misc.concatStrings(a, seperator, b);\n+        assertEquals(res, \"LeBron//James\");\n+    }\n+\n+    /**\n+     * Method: hide(String string)\n+     */\n+    @Test\n+    public void testHideString() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a);\n+        assertEquals(res, \"****\");\n+    }\n+\n+    /**\n+     * Method: hide(String string, int mode)\n+     */\n+    @Test\n+    public void testHideForStringMode() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a, 1);\n+        assertEquals(res, \"t**t\");\n+    }\n+\n+    /**\n+     * Method: byteArrayToString(byte[] input, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testByteArrayToString() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        String res = Misc.byteArrayToString(arr, \"\", true);\n+        assertEquals(res, s);\n+    }\n+\n+    /**\n+     * Method: gzip(String input)\n+     */\n+    @Test\n+    public void testGzipGUnzipInput() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        byte[] zipped = Misc.gzip(arr);\n+        assertEquals(Misc.gunzipToString(zipped), \"test\");\n+    }\n+\n+    @Test\n+    public void testGzipString() throws Exception {\n+        String s = \"you deserved this\";\n+        byte[] zipped = Misc.gzip(s);\n+        assertEquals(Misc.gunzipToString(zipped), \"you deserved this\");\n+\n+    }\n+\n+    /**\n+     * Method: compress(String input)\n+     */\n+    @Test\n+    public void testCompressDecompressInput() throws Exception {\n+        String s = \"test\";\n+        byte[] compressed = Misc.compress(s);\n+        String decompressed = Misc.decompressToString(compressed);\n+        assertEquals(decompressed, \"test\");\n+    }", "originalCommit": "de8c74960b4a2926132b0c198bcf49d0a6e21fab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODAxOTMxMQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r438019311", "bodyText": "I didn't see this yesterday, will take a look at it now.", "author": "sinasen2000", "createdAt": "2020-06-10T10:22:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyOTU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA2NjM1Nw==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r438066357", "bodyText": "I added a case that tests if the string is compressed. However, I did this by testing the first two indexes of the compressed byte array, which was the same for all compressed Strings, so I assumed this is a sign that it is compressed. Am I correct? Is there another way of testing if it is actually compressed? @nielsm5", "author": "sinasen2000", "createdAt": "2020-06-10T11:58:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyOTU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExNzcwMg==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r438117702", "bodyText": "I would say when the size of the bytearray is less then the original string and the content is not equal to the string it must be compressed :)", "author": "nielsm5", "createdAt": "2020-06-10T13:23:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyOTU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyMDM1MQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r438120351", "bodyText": "I checked the first thing you said, but the size of the byte array was always bigger than the length of the string.", "author": "sinasen2000", "createdAt": "2020-06-10T13:27:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkyOTU2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkzMDMzMA==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r435930330", "bodyText": "In stead of using a big concatinated string, it might be easier and more readable to use TestFileUtils.getResource and read the contents from a file instead", "author": "nielsm5", "createdAt": "2020-06-05T13:44:23Z", "path": "core/src/test/java/nl/nn/adapterframework/util/MiscTest.java", "diffHunk": "@@ -1,43 +1,610 @@\n package nl.nn.adapterframework.util;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotEquals;\n import static org.junit.Assert.assertTrue;\n \n+import java.io.BufferedReader;\n import java.io.ByteArrayInputStream;\n+import java.io.ByteArrayOutputStream;\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileWriter;\n import java.io.FilterInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.io.OutputStream;\n+import java.io.Reader;\n+import java.io.StringReader;\n+import java.io.StringWriter;\n+import java.io.Writer;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n \n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n \n+\n+/**\n+ * Misc Tester.\n+ *\n+ * @author <Sina Sen>\n+ */\n public class MiscTest {\n \n-\t@Test\n-\tpublic void testStreamToString() throws IOException {\n-\t\tString tekst = \"dit is een string\";\n-\t\tByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n-\t\t\n-\t\tCloseChecker closeChecker = new CloseChecker(bais); \n-\t\tString actual = Misc.streamToString(closeChecker);\n-\t\t\n-\t\tassertEquals(tekst, actual);\n-\t\tassertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n-\t}\n-\t\n-\tprivate class CloseChecker extends FilterInputStream {\n-\n-\t\tboolean inputStreamClosed;\n-\t\t\n-\t\tpublic CloseChecker(InputStream arg0) {\n-\t\t\tsuper(arg0);\n-\t\t}\n-\n-\t\t@Override\n-\t\tpublic void close() throws IOException {\n-\t\t\tinputStreamClosed=true;;\n-\t\t\tsuper.close();\n-\t\t}\n-\t\t\n-\t\t\n-\t}\n+    @ClassRule\n+    public static TemporaryFolder testFolder = new TemporaryFolder();\n+    private static String sourceFolderPath;\n+\n+    private static File file;\n+\n+    private String pathSeperator = File.separator;\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException {\n+        sourceFolderPath = testFolder.getRoot().getPath();\n+        file = testFolder.newFile(\"lebron.txt\");\n+        Writer w = new FileWriter(file.getName());\n+        w.write(\"inside the lebron file\");\n+        w.close();\n+    }\n+\n+    @AfterClass\n+    public static void cleanUp() {\n+        File f = new File(\"lebron.txt\");\n+        f.delete();\n+    }\n+\n+\n+    @Test\n+    public void testStreamToString() throws IOException {\n+        String tekst = \"dit is een string\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n+\n+        CloseChecker closeChecker = new CloseChecker(bais);\n+        String actual = Misc.streamToString(closeChecker);\n+\n+        assertEquals(tekst, actual);\n+        assertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n+    }\n+\n+    private class CloseChecker extends FilterInputStream {\n+\n+        boolean inputStreamClosed;\n+\n+        public CloseChecker(InputStream arg0) {\n+            super(arg0);\n+        }\n+\n+        @Override\n+        public void close() throws IOException {\n+            inputStreamClosed = true;\n+\n+            super.close();\n+        }\n+    }\n+\n+    /**\n+     * Method: createSimpleUUID()\n+     */\n+    @Test\n+    public void testCreateSimpleUUID() throws Exception {\n+        String uuid = Misc.createSimpleUUID();\n+        assertFalse(sourceFolderPath.isEmpty()); // for avoiding code quality warnings\n+        assertEquals(uuid.substring(8, 9), \"-\");\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+    /**\n+     * Method: createRandomUUID(boolean removeDashes)\n+     */\n+    @Test\n+    public void testCreateRandomUUIDRemoveDashes() throws Exception {\n+        String uuid = Misc.createRandomUUID(true);\n+        assertNotEquals(uuid.substring(8, 9), \"-\"); // assert that dashes are removed\n+        assertEquals(uuid.length(), 32);\n+    }\n+\n+    @Test\n+    public void testCreateRandomUUID() throws Exception {\n+        String uuid = Misc.createRandomUUID();\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+\n+    /**\n+     * Method: asHex(byte[] buf)\n+     */\n+    @Test\n+    public void testAsHex() throws Exception {\n+        String test = \"test\";\n+        String hex = Misc.asHex(test.getBytes());\n+        assertEquals(hex, \"74657374\");\n+    }\n+\n+    /**\n+     * Method: createNumericUUID()\n+     */\n+    @Test\n+    public void testCreateNumericUUID() throws Exception {\n+        String uuid = Misc.createNumericUUID();\n+        assertEquals(uuid.length(), 31);    //Unique string is <ipaddress with length 4*3><currentTime with length 13><hashcode with length 6>\n+    }\n+\n+    /**\n+     * Method: unsignedByteToInt(byte b)\n+     */\n+    @Test\n+    public void testUnsignedByteToInt() throws Exception {\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"-12\")), 244);\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"12\")), 12);\n+\n+    }\n+\n+\n+    /**\n+     * Method: fileToWriter(String filename, Writer writer)\n+     */\n+    @Test\n+    public void testFileToWriter() throws Exception {\n+        Writer writer = new StringWriter();\n+        Misc.fileToWriter(file.getName(), writer);\n+        assertEquals(writer.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: fileToStream(String filename, OutputStream output)\n+     */\n+    @Test\n+    public void testFileToStream() throws Exception {\n+        OutputStream os = new ByteArrayOutputStream();\n+        Misc.fileToStream(file.getName(), os);\n+        assertEquals(os.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output, boolean closeInput)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutputCloseInput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos, true);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToFile(InputStream inputStream, File file)\n+     */\n+    @Test\n+    public void testStreamToFile() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        Misc.streamToFile(bais, file);\n+\n+        // to read from the file\n+        InputStream is = new FileInputStream(file);\n+        BufferedReader buf = new BufferedReader(new InputStreamReader(is));\n+\n+        String line = buf.readLine();\n+        StringBuilder sb = new StringBuilder();\n+\n+        while (line != null) {\n+            sb.append(line).append(\"\\n\");\n+            line = buf.readLine();\n+        }\n+\n+        String fileAsString = sb.toString();\n+        assertEquals(fileAsString, \"test\\n\");\n+    }\n+\n+    /**\n+     * Method: streamToBytes(InputStream inputStream)\n+     */\n+    @Test\n+    public void testStreamToBytes() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        byte[] arr = Misc.streamToBytes(bais);\n+        assertEquals(new String(arr, StandardCharsets.UTF_8), \"test\");\n+    }\n+\n+    /**\n+     * Method: readerToWriter(Reader reader, Writer writer)\n+     */\n+    @Test\n+    public void testReaderToWriterForReaderWriter() throws Exception {\n+        Reader reader = new StringReader(\"test\");\n+        Writer writer = new StringWriter();\n+        Misc.readerToWriter(reader, writer);\n+        assertEquals(writer.toString(), \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: fileToString(String fileName)\n+     */\n+    @Test\n+    public void testFileToStringFileName() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName()), \"inside the lebron file\");\n+    }\n+    @Test\n+    public void testFileToStringFileNameEndLine() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName(), \" the end\"), \"inside the lebron file\");\n+    }\n+\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringNoXMLEncode() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", false);\n+        assertEquals(s, \"<root> 23    <name>GeeksforGeeks</name> 23    <address> 23        <sector>142</sector> 23        <location>Noida</location> 23    </address> 23</root> r\");\n+    }\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringXMLEncode() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", true);\n+        assertEquals(s, \"&lt;root&gt; 23    &lt;name&gt;GeeksforGeeks&lt;/name&gt; 23    &lt;address&gt; 23        &lt;sector&gt;142&lt;/sector&gt; 23        &lt;location&gt;Noida&lt;/location&gt; 23    &lt;/address&gt; 23&lt;/root&gt; r\");\n+    }\n+\n+\n+\n+    /**\n+     * Method: replace(String source, String from, String to)\n+     */\n+    @Test\n+    public void testReplace() throws Exception {\n+        String a = \"Kobe\";\n+        String res = Misc.replace(a, \"Ko\", \"Phoe\");\n+        assertEquals(res, \"Phoebe\");\n+    }\n+\n+    /**\n+     * Method: concatStrings(String part1, String separator, String part2)\n+     */\n+    @Test\n+    public void testConcatStrings() throws Exception {\n+        String a = \"LeBron\";\n+        String b = \"James\";\n+        String seperator = \"//\";\n+        String res = Misc.concatStrings(a, seperator, b);\n+        assertEquals(res, \"LeBron//James\");\n+    }\n+\n+    /**\n+     * Method: hide(String string)\n+     */\n+    @Test\n+    public void testHideString() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a);\n+        assertEquals(res, \"****\");\n+    }\n+\n+    /**\n+     * Method: hide(String string, int mode)\n+     */\n+    @Test\n+    public void testHideForStringMode() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a, 1);\n+        assertEquals(res, \"t**t\");\n+    }\n+\n+    /**\n+     * Method: byteArrayToString(byte[] input, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testByteArrayToString() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        String res = Misc.byteArrayToString(arr, \"\", true);\n+        assertEquals(res, s);\n+    }\n+\n+    /**\n+     * Method: gzip(String input)\n+     */\n+    @Test\n+    public void testGzipGUnzipInput() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        byte[] zipped = Misc.gzip(arr);\n+        assertEquals(Misc.gunzipToString(zipped), \"test\");\n+    }\n+\n+    @Test\n+    public void testGzipString() throws Exception {\n+        String s = \"you deserved this\";\n+        byte[] zipped = Misc.gzip(s);\n+        assertEquals(Misc.gunzipToString(zipped), \"you deserved this\");\n+\n+    }\n+\n+    /**\n+     * Method: compress(String input)\n+     */\n+    @Test\n+    public void testCompressDecompressInput() throws Exception {\n+        String s = \"test\";\n+        byte[] compressed = Misc.compress(s);\n+        String decompressed = Misc.decompressToString(compressed);\n+        assertEquals(decompressed, \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: copyContext(String keys, Map<String,Object> from, Map<String,Object> to)\n+     */\n+    @Test\n+    public void testCopyContext() throws Exception {\n+        Map<String, Object> context1 = new HashMap<>();\n+        Map<String, Object> context2 = new HashMap<>();\n+        String keys = \"a,b\";\n+        context1.put(\"a\", 15);\n+        context1.put(\"b\", 16);\n+        Misc.copyContext(keys, context1, context2);\n+        assertTrue(context1.equals(context2));\n+    }\n+\n+    /**\n+     * Method: toFileSize(String value, long defaultValue)\n+     */\n+    @Test\n+    public void testToFileSizeForValueDefaultValue() throws Exception {\n+        long res = Misc.toFileSize(\"14GB\", 20);\n+        assertEquals(Long.toString(res), \"15032385536\");\n+    }\n+\n+    /**\n+     * Method: toFileSize(long value)\n+     */\n+    @Test\n+    public void testToFileSizeValue() throws Exception {\n+        String kb = Misc.toFileSize(150000, false, true);\n+        String mb = Misc.toFileSize(15000000, true);\n+        String gb = Misc.toFileSize(Long.parseLong(\"3221225472\"));\n+        assertEquals(gb, \"3GB\");\n+        assertEquals(mb, \"14 MB\");\n+        assertEquals(kb, \"146KB\");\n+    }\n+\n+\n+    @Test\n+    public void testListToStringWithStringList() {\n+        List list = new ArrayList<Integer>();\n+        list.add(\"bailar\");\n+        list.add(\"besos\");\n+        String res = Misc.listToString(list);\n+        assertEquals(res, \"bailarbesos\");\n+    }\n+\n+    /**\n+     * Method: addItemsToList(Collection<String> collection, String list, String collectionDescription, boolean lowercase)\n+     */\n+    @Test\n+    public void testAddItemsToList() throws Exception {\n+        List<String> stringCollection = new ArrayList<>();\n+        String list = \"a,b,C\";\n+        String collectionDescription = \"First 3 letters of the alphabet\";\n+        Misc.addItemsToList(stringCollection, list, collectionDescription, true);\n+        ArrayList<String> arrayList = new ArrayList<>();\n+        arrayList.add(\"a\");  arrayList.add(\"b\"); arrayList.add(\"c\");\n+        assertTrue(stringCollection.size() == 3);\n+        assertEquals(stringCollection.get(stringCollection.size()-1), \"c\");\n+    }\n+\n+    /**\n+     * Method: getFileSystemTotalSpace()\n+     */\n+    @Test\n+    public void testGetFileSystemTotalSpace() throws Exception {\n+assertFalse(Misc.getFileSystemTotalSpace().isEmpty());    }\n+\n+    /**\n+     * Method: getFileSystemFreeSpace()\n+     */\n+    @Test\n+    public void testGetFileSystemFreeSpace() throws Exception {\n+assertFalse(Misc.getFileSystemFreeSpace().isEmpty());    }\n+\n+    /**\n+     * Method: getAge(long value)\n+     */\n+    @Test\n+    public void testGetAge() throws Exception {\n+        assertFalse(Misc.getAge(1).isEmpty());\n+    }\n+    /**\n+     * Method: getDurationInMs(long value)\n+     */\n+    @Test\n+    public void testGetDurationInMs() throws Exception {\n+        assertFalse(Misc.getDurationInMs(14).isEmpty());\n+    }\n+\n+    /**\n+     * Method: parseAge(String value, long defaultValue)\n+     */\n+    @Test\n+    public void testParseAge() throws Exception {\n+        long res = Misc.parseAge(\"2D\", 100);\n+        assertEquals(res, 172800000);\n+    }\n+\n+    /**\n+     * Method: cleanseMessage(String inputString, String hideRegex, String hideMethod)\n+     */\n+    @Test\n+    public void testCleanseMessage() throws Exception {\n+        String s = \"Donald Duck 23  Hey hey  14  Wooo\";\n+        String regex = \"\\\\d\";\n+        String res = Misc.cleanseMessage(s, regex, \" does not matter\");\n+        assertEquals(res, \"Donald Duck **  Hey hey  **  Wooo\");\n+        }\n+\n+    /**\n+     * Method: hideFirstHalf(String inputString, String regex)\n+     */\n+    @Test\n+    public void testHideFirstHalf() throws Exception {\n+        String s = \"Donald Duck     Hey hey     Wooo\";\n+        String hideRegex = \"[^\\\\s*].*[^\\\\s*]\";\n+        String res = Misc.hideFirstHalf(s, hideRegex);\n+        assertEquals(res, \"****************Hey hey     Wooo\");\n+\n+    }\n+\n+\n+    /**\n+     * Method: getBuildOutputDirectory()\n+     */\n+    @Test\n+    public void testGetBuildOutputDirectory() throws Exception {\n+        String outputDirectory = Misc.getBuildOutputDirectory();\n+assertEquals(outputDirectory.substring(outputDirectory.length()-29, outputDirectory.length()), pathSeperator+\"iaf\"+pathSeperator+\"core\"+pathSeperator+\"target\"+pathSeperator+\"test-classes\");    }\n+\n+    /**\n+     * Method: getProjectBaseDir()\n+     */\n+    @Test\n+    public void testGetProjectBaseDir() throws Exception {\n+        String baseDir = Misc.getBuildOutputDirectory();\n+        assertEquals(baseDir.substring(baseDir.length()-29, baseDir.length()), pathSeperator+\"iaf\"+pathSeperator+\"core\"+pathSeperator+\"target\"+pathSeperator+\"test-classes\");\n+    }\n+\n+    /**\n+     * Method: toSortName(String name)\n+     */\n+    @Test\n+    public void testToSortName() throws Exception {\n+assertEquals(Misc.toSortName(\"new_name\"), \"NEW*NAME\");    }\n+\n+    /**\n+     * Method: countRegex(String string, String regex)\n+     */\n+    @Test\n+    public void testCountRegex() throws Exception {\n+String s = \"12ab34\";\n+    String regex = \"\\\\d\";\n+    int regexCount = Misc.countRegex(s, regex);\n+    assertEquals(regexCount, 4);\n+    }\n+\n+    /**\n+     * Method: resourceToString(URL resource)\n+     */\n+    @Test\n+    public void testResourceToStringResource() throws Exception {\n+        URL resource = new URL(\"http://example.com/\");\n+        String s1 = Misc.resourceToString(resource);\n+        assertEquals(s1, \"<!doctype html>\\n\" +\n+                \"<html>\\n\" +\n+                \"<head>\\n\" +\n+                \"    <title>Example Domain</title>\\n\" +\n+                \"\\n\" +\n+                \"    <meta charset=\\\"utf-8\\\" />\\n\" +\n+                \"    <meta http-equiv=\\\"Content-type\\\" content=\\\"text/html; charset=utf-8\\\" />\\n\" +\n+                \"    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />\\n\" +\n+                \"    <style type=\\\"text/css\\\">\\n\" +\n+                \"    body {\\n\" +\n+                \"        background-color: #f0f0f2;\\n\" +\n+                \"        margin: 0;\\n\" +\n+                \"        padding: 0;\\n\" +\n+                \"        font-family: -apple-system, system-ui, BlinkMacSystemFont, \\\"Segoe UI\\\", \\\"Open Sans\\\", \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n\" +\n+                \"        \\n\" +\n+                \"    }\\n\" +\n+                \"    div {\\n\" +\n+                \"        width: 600px;\\n\" +\n+                \"        margin: 5em auto;\\n\" +\n+                \"        padding: 2em;\\n\" +\n+                \"        background-color: #fdfdff;\\n\" +\n+                \"        border-radius: 0.5em;\\n\" +\n+                \"        box-shadow: 2px 3px 7px 2px rgba(0,0,0,0.02);\\n\" +\n+                \"    }\\n\" +\n+                \"    a:link, a:visited {\\n\" +\n+                \"        color: #38488f;\\n\" +\n+                \"        text-decoration: none;\\n\" +\n+                \"    }\\n\" +\n+                \"    @media (max-width: 700px) {\\n\" +\n+                \"        div {\\n\" +\n+                \"            margin: 0 auto;\\n\" +\n+                \"            width: auto;\\n\" +\n+                \"        }\\n\" +\n+                \"    }\\n\" +\n+                \"    </style>    \\n\" +\n+                \"</head>\\n\" +\n+                \"\\n\" +\n+                \"<body>\\n\" +\n+                \"<div>\\n\" +\n+                \"    <h1>Example Domain</h1>\\n\" +\n+                \"    <p>This domain is for use in illustrative examples in documents. You may use this\\n\" +\n+                \"    domain in literature without prior coordination or asking for permission.</p>\\n\" +\n+                \"    <p><a href=\\\"https://www.iana.org/domains/example\\\">More information...</a></p>\\n\" +\n+                \"</div>\\n\" +\n+                \"</body>\\n\" +\n+                \"</html>\\n\");", "originalCommit": "de8c74960b4a2926132b0c198bcf49d0a6e21fab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzMxNDkzMg==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r437314932", "bodyText": "I assumed you meant TestFileUtils.getTestFile which uses getResource. So I'm using this method.", "author": "sinasen2000", "createdAt": "2020-06-09T10:44:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkzMDMzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkzMDY2Mg==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r435930662", "bodyText": "In stead of using a big concatinated string, it might be easier and more readable to use TestFileUtils.getResource and read the contents from a file instead", "author": "nielsm5", "createdAt": "2020-06-05T13:44:55Z", "path": "core/src/test/java/nl/nn/adapterframework/util/MiscTest.java", "diffHunk": "@@ -1,43 +1,610 @@\n package nl.nn.adapterframework.util;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotEquals;\n import static org.junit.Assert.assertTrue;\n \n+import java.io.BufferedReader;\n import java.io.ByteArrayInputStream;\n+import java.io.ByteArrayOutputStream;\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileWriter;\n import java.io.FilterInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.io.OutputStream;\n+import java.io.Reader;\n+import java.io.StringReader;\n+import java.io.StringWriter;\n+import java.io.Writer;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n \n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n \n+\n+/**\n+ * Misc Tester.\n+ *\n+ * @author <Sina Sen>\n+ */\n public class MiscTest {\n \n-\t@Test\n-\tpublic void testStreamToString() throws IOException {\n-\t\tString tekst = \"dit is een string\";\n-\t\tByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n-\t\t\n-\t\tCloseChecker closeChecker = new CloseChecker(bais); \n-\t\tString actual = Misc.streamToString(closeChecker);\n-\t\t\n-\t\tassertEquals(tekst, actual);\n-\t\tassertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n-\t}\n-\t\n-\tprivate class CloseChecker extends FilterInputStream {\n-\n-\t\tboolean inputStreamClosed;\n-\t\t\n-\t\tpublic CloseChecker(InputStream arg0) {\n-\t\t\tsuper(arg0);\n-\t\t}\n-\n-\t\t@Override\n-\t\tpublic void close() throws IOException {\n-\t\t\tinputStreamClosed=true;;\n-\t\t\tsuper.close();\n-\t\t}\n-\t\t\n-\t\t\n-\t}\n+    @ClassRule\n+    public static TemporaryFolder testFolder = new TemporaryFolder();\n+    private static String sourceFolderPath;\n+\n+    private static File file;\n+\n+    private String pathSeperator = File.separator;\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException {\n+        sourceFolderPath = testFolder.getRoot().getPath();\n+        file = testFolder.newFile(\"lebron.txt\");\n+        Writer w = new FileWriter(file.getName());\n+        w.write(\"inside the lebron file\");\n+        w.close();\n+    }\n+\n+    @AfterClass\n+    public static void cleanUp() {\n+        File f = new File(\"lebron.txt\");\n+        f.delete();\n+    }\n+\n+\n+    @Test\n+    public void testStreamToString() throws IOException {\n+        String tekst = \"dit is een string\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n+\n+        CloseChecker closeChecker = new CloseChecker(bais);\n+        String actual = Misc.streamToString(closeChecker);\n+\n+        assertEquals(tekst, actual);\n+        assertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n+    }\n+\n+    private class CloseChecker extends FilterInputStream {\n+\n+        boolean inputStreamClosed;\n+\n+        public CloseChecker(InputStream arg0) {\n+            super(arg0);\n+        }\n+\n+        @Override\n+        public void close() throws IOException {\n+            inputStreamClosed = true;\n+\n+            super.close();\n+        }\n+    }\n+\n+    /**\n+     * Method: createSimpleUUID()\n+     */\n+    @Test\n+    public void testCreateSimpleUUID() throws Exception {\n+        String uuid = Misc.createSimpleUUID();\n+        assertFalse(sourceFolderPath.isEmpty()); // for avoiding code quality warnings\n+        assertEquals(uuid.substring(8, 9), \"-\");\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+    /**\n+     * Method: createRandomUUID(boolean removeDashes)\n+     */\n+    @Test\n+    public void testCreateRandomUUIDRemoveDashes() throws Exception {\n+        String uuid = Misc.createRandomUUID(true);\n+        assertNotEquals(uuid.substring(8, 9), \"-\"); // assert that dashes are removed\n+        assertEquals(uuid.length(), 32);\n+    }\n+\n+    @Test\n+    public void testCreateRandomUUID() throws Exception {\n+        String uuid = Misc.createRandomUUID();\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+\n+    /**\n+     * Method: asHex(byte[] buf)\n+     */\n+    @Test\n+    public void testAsHex() throws Exception {\n+        String test = \"test\";\n+        String hex = Misc.asHex(test.getBytes());\n+        assertEquals(hex, \"74657374\");\n+    }\n+\n+    /**\n+     * Method: createNumericUUID()\n+     */\n+    @Test\n+    public void testCreateNumericUUID() throws Exception {\n+        String uuid = Misc.createNumericUUID();\n+        assertEquals(uuid.length(), 31);    //Unique string is <ipaddress with length 4*3><currentTime with length 13><hashcode with length 6>\n+    }\n+\n+    /**\n+     * Method: unsignedByteToInt(byte b)\n+     */\n+    @Test\n+    public void testUnsignedByteToInt() throws Exception {\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"-12\")), 244);\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"12\")), 12);\n+\n+    }\n+\n+\n+    /**\n+     * Method: fileToWriter(String filename, Writer writer)\n+     */\n+    @Test\n+    public void testFileToWriter() throws Exception {\n+        Writer writer = new StringWriter();\n+        Misc.fileToWriter(file.getName(), writer);\n+        assertEquals(writer.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: fileToStream(String filename, OutputStream output)\n+     */\n+    @Test\n+    public void testFileToStream() throws Exception {\n+        OutputStream os = new ByteArrayOutputStream();\n+        Misc.fileToStream(file.getName(), os);\n+        assertEquals(os.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output, boolean closeInput)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutputCloseInput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos, true);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToFile(InputStream inputStream, File file)\n+     */\n+    @Test\n+    public void testStreamToFile() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        Misc.streamToFile(bais, file);\n+\n+        // to read from the file\n+        InputStream is = new FileInputStream(file);\n+        BufferedReader buf = new BufferedReader(new InputStreamReader(is));\n+\n+        String line = buf.readLine();\n+        StringBuilder sb = new StringBuilder();\n+\n+        while (line != null) {\n+            sb.append(line).append(\"\\n\");\n+            line = buf.readLine();\n+        }\n+\n+        String fileAsString = sb.toString();\n+        assertEquals(fileAsString, \"test\\n\");\n+    }\n+\n+    /**\n+     * Method: streamToBytes(InputStream inputStream)\n+     */\n+    @Test\n+    public void testStreamToBytes() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        byte[] arr = Misc.streamToBytes(bais);\n+        assertEquals(new String(arr, StandardCharsets.UTF_8), \"test\");\n+    }\n+\n+    /**\n+     * Method: readerToWriter(Reader reader, Writer writer)\n+     */\n+    @Test\n+    public void testReaderToWriterForReaderWriter() throws Exception {\n+        Reader reader = new StringReader(\"test\");\n+        Writer writer = new StringWriter();\n+        Misc.readerToWriter(reader, writer);\n+        assertEquals(writer.toString(), \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: fileToString(String fileName)\n+     */\n+    @Test\n+    public void testFileToStringFileName() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName()), \"inside the lebron file\");\n+    }\n+    @Test\n+    public void testFileToStringFileNameEndLine() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName(), \" the end\"), \"inside the lebron file\");\n+    }\n+\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringNoXMLEncode() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", false);\n+        assertEquals(s, \"<root> 23    <name>GeeksforGeeks</name> 23    <address> 23        <sector>142</sector> 23        <location>Noida</location> 23    </address> 23</root> r\");\n+    }\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringXMLEncode() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", true);\n+        assertEquals(s, \"&lt;root&gt; 23    &lt;name&gt;GeeksforGeeks&lt;/name&gt; 23    &lt;address&gt; 23        &lt;sector&gt;142&lt;/sector&gt; 23        &lt;location&gt;Noida&lt;/location&gt; 23    &lt;/address&gt; 23&lt;/root&gt; r\");\n+    }\n+\n+\n+\n+    /**\n+     * Method: replace(String source, String from, String to)\n+     */\n+    @Test\n+    public void testReplace() throws Exception {\n+        String a = \"Kobe\";\n+        String res = Misc.replace(a, \"Ko\", \"Phoe\");\n+        assertEquals(res, \"Phoebe\");\n+    }\n+\n+    /**\n+     * Method: concatStrings(String part1, String separator, String part2)\n+     */\n+    @Test\n+    public void testConcatStrings() throws Exception {\n+        String a = \"LeBron\";\n+        String b = \"James\";\n+        String seperator = \"//\";\n+        String res = Misc.concatStrings(a, seperator, b);\n+        assertEquals(res, \"LeBron//James\");\n+    }\n+\n+    /**\n+     * Method: hide(String string)\n+     */\n+    @Test\n+    public void testHideString() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a);\n+        assertEquals(res, \"****\");\n+    }\n+\n+    /**\n+     * Method: hide(String string, int mode)\n+     */\n+    @Test\n+    public void testHideForStringMode() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a, 1);\n+        assertEquals(res, \"t**t\");\n+    }\n+\n+    /**\n+     * Method: byteArrayToString(byte[] input, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testByteArrayToString() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        String res = Misc.byteArrayToString(arr, \"\", true);\n+        assertEquals(res, s);\n+    }\n+\n+    /**\n+     * Method: gzip(String input)\n+     */\n+    @Test\n+    public void testGzipGUnzipInput() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        byte[] zipped = Misc.gzip(arr);\n+        assertEquals(Misc.gunzipToString(zipped), \"test\");\n+    }\n+\n+    @Test\n+    public void testGzipString() throws Exception {\n+        String s = \"you deserved this\";\n+        byte[] zipped = Misc.gzip(s);\n+        assertEquals(Misc.gunzipToString(zipped), \"you deserved this\");\n+\n+    }\n+\n+    /**\n+     * Method: compress(String input)\n+     */\n+    @Test\n+    public void testCompressDecompressInput() throws Exception {\n+        String s = \"test\";\n+        byte[] compressed = Misc.compress(s);\n+        String decompressed = Misc.decompressToString(compressed);\n+        assertEquals(decompressed, \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: copyContext(String keys, Map<String,Object> from, Map<String,Object> to)\n+     */\n+    @Test\n+    public void testCopyContext() throws Exception {\n+        Map<String, Object> context1 = new HashMap<>();\n+        Map<String, Object> context2 = new HashMap<>();\n+        String keys = \"a,b\";\n+        context1.put(\"a\", 15);\n+        context1.put(\"b\", 16);\n+        Misc.copyContext(keys, context1, context2);\n+        assertTrue(context1.equals(context2));\n+    }\n+\n+    /**\n+     * Method: toFileSize(String value, long defaultValue)\n+     */\n+    @Test\n+    public void testToFileSizeForValueDefaultValue() throws Exception {\n+        long res = Misc.toFileSize(\"14GB\", 20);\n+        assertEquals(Long.toString(res), \"15032385536\");\n+    }\n+\n+    /**\n+     * Method: toFileSize(long value)\n+     */\n+    @Test\n+    public void testToFileSizeValue() throws Exception {\n+        String kb = Misc.toFileSize(150000, false, true);\n+        String mb = Misc.toFileSize(15000000, true);\n+        String gb = Misc.toFileSize(Long.parseLong(\"3221225472\"));\n+        assertEquals(gb, \"3GB\");\n+        assertEquals(mb, \"14 MB\");\n+        assertEquals(kb, \"146KB\");\n+    }\n+\n+\n+    @Test\n+    public void testListToStringWithStringList() {\n+        List list = new ArrayList<Integer>();\n+        list.add(\"bailar\");\n+        list.add(\"besos\");\n+        String res = Misc.listToString(list);\n+        assertEquals(res, \"bailarbesos\");\n+    }\n+\n+    /**\n+     * Method: addItemsToList(Collection<String> collection, String list, String collectionDescription, boolean lowercase)\n+     */\n+    @Test\n+    public void testAddItemsToList() throws Exception {\n+        List<String> stringCollection = new ArrayList<>();\n+        String list = \"a,b,C\";\n+        String collectionDescription = \"First 3 letters of the alphabet\";\n+        Misc.addItemsToList(stringCollection, list, collectionDescription, true);\n+        ArrayList<String> arrayList = new ArrayList<>();\n+        arrayList.add(\"a\");  arrayList.add(\"b\"); arrayList.add(\"c\");\n+        assertTrue(stringCollection.size() == 3);\n+        assertEquals(stringCollection.get(stringCollection.size()-1), \"c\");\n+    }\n+\n+    /**\n+     * Method: getFileSystemTotalSpace()\n+     */\n+    @Test\n+    public void testGetFileSystemTotalSpace() throws Exception {\n+assertFalse(Misc.getFileSystemTotalSpace().isEmpty());    }\n+\n+    /**\n+     * Method: getFileSystemFreeSpace()\n+     */\n+    @Test\n+    public void testGetFileSystemFreeSpace() throws Exception {\n+assertFalse(Misc.getFileSystemFreeSpace().isEmpty());    }\n+\n+    /**\n+     * Method: getAge(long value)\n+     */\n+    @Test\n+    public void testGetAge() throws Exception {\n+        assertFalse(Misc.getAge(1).isEmpty());\n+    }\n+    /**\n+     * Method: getDurationInMs(long value)\n+     */\n+    @Test\n+    public void testGetDurationInMs() throws Exception {\n+        assertFalse(Misc.getDurationInMs(14).isEmpty());\n+    }\n+\n+    /**\n+     * Method: parseAge(String value, long defaultValue)\n+     */\n+    @Test\n+    public void testParseAge() throws Exception {\n+        long res = Misc.parseAge(\"2D\", 100);\n+        assertEquals(res, 172800000);\n+    }\n+\n+    /**\n+     * Method: cleanseMessage(String inputString, String hideRegex, String hideMethod)\n+     */\n+    @Test\n+    public void testCleanseMessage() throws Exception {\n+        String s = \"Donald Duck 23  Hey hey  14  Wooo\";\n+        String regex = \"\\\\d\";\n+        String res = Misc.cleanseMessage(s, regex, \" does not matter\");\n+        assertEquals(res, \"Donald Duck **  Hey hey  **  Wooo\");\n+        }\n+\n+    /**\n+     * Method: hideFirstHalf(String inputString, String regex)\n+     */\n+    @Test\n+    public void testHideFirstHalf() throws Exception {\n+        String s = \"Donald Duck     Hey hey     Wooo\";\n+        String hideRegex = \"[^\\\\s*].*[^\\\\s*]\";\n+        String res = Misc.hideFirstHalf(s, hideRegex);\n+        assertEquals(res, \"****************Hey hey     Wooo\");\n+\n+    }\n+\n+\n+    /**\n+     * Method: getBuildOutputDirectory()\n+     */\n+    @Test\n+    public void testGetBuildOutputDirectory() throws Exception {\n+        String outputDirectory = Misc.getBuildOutputDirectory();\n+assertEquals(outputDirectory.substring(outputDirectory.length()-29, outputDirectory.length()), pathSeperator+\"iaf\"+pathSeperator+\"core\"+pathSeperator+\"target\"+pathSeperator+\"test-classes\");    }\n+\n+    /**\n+     * Method: getProjectBaseDir()\n+     */\n+    @Test\n+    public void testGetProjectBaseDir() throws Exception {\n+        String baseDir = Misc.getBuildOutputDirectory();\n+        assertEquals(baseDir.substring(baseDir.length()-29, baseDir.length()), pathSeperator+\"iaf\"+pathSeperator+\"core\"+pathSeperator+\"target\"+pathSeperator+\"test-classes\");\n+    }\n+\n+    /**\n+     * Method: toSortName(String name)\n+     */\n+    @Test\n+    public void testToSortName() throws Exception {\n+assertEquals(Misc.toSortName(\"new_name\"), \"NEW*NAME\");    }\n+\n+    /**\n+     * Method: countRegex(String string, String regex)\n+     */\n+    @Test\n+    public void testCountRegex() throws Exception {\n+String s = \"12ab34\";\n+    String regex = \"\\\\d\";\n+    int regexCount = Misc.countRegex(s, regex);\n+    assertEquals(regexCount, 4);\n+    }\n+\n+    /**\n+     * Method: resourceToString(URL resource)\n+     */\n+    @Test\n+    public void testResourceToStringResource() throws Exception {\n+        URL resource = new URL(\"http://example.com/\");\n+        String s1 = Misc.resourceToString(resource);\n+        assertEquals(s1, \"<!doctype html>\\n\" +\n+                \"<html>\\n\" +\n+                \"<head>\\n\" +\n+                \"    <title>Example Domain</title>\\n\" +\n+                \"\\n\" +\n+                \"    <meta charset=\\\"utf-8\\\" />\\n\" +\n+                \"    <meta http-equiv=\\\"Content-type\\\" content=\\\"text/html; charset=utf-8\\\" />\\n\" +\n+                \"    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />\\n\" +\n+                \"    <style type=\\\"text/css\\\">\\n\" +\n+                \"    body {\\n\" +\n+                \"        background-color: #f0f0f2;\\n\" +\n+                \"        margin: 0;\\n\" +\n+                \"        padding: 0;\\n\" +\n+                \"        font-family: -apple-system, system-ui, BlinkMacSystemFont, \\\"Segoe UI\\\", \\\"Open Sans\\\", \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n\" +\n+                \"        \\n\" +\n+                \"    }\\n\" +\n+                \"    div {\\n\" +\n+                \"        width: 600px;\\n\" +\n+                \"        margin: 5em auto;\\n\" +\n+                \"        padding: 2em;\\n\" +\n+                \"        background-color: #fdfdff;\\n\" +\n+                \"        border-radius: 0.5em;\\n\" +\n+                \"        box-shadow: 2px 3px 7px 2px rgba(0,0,0,0.02);\\n\" +\n+                \"    }\\n\" +\n+                \"    a:link, a:visited {\\n\" +\n+                \"        color: #38488f;\\n\" +\n+                \"        text-decoration: none;\\n\" +\n+                \"    }\\n\" +\n+                \"    @media (max-width: 700px) {\\n\" +\n+                \"        div {\\n\" +\n+                \"            margin: 0 auto;\\n\" +\n+                \"            width: auto;\\n\" +\n+                \"        }\\n\" +\n+                \"    }\\n\" +\n+                \"    </style>    \\n\" +\n+                \"</head>\\n\" +\n+                \"\\n\" +\n+                \"<body>\\n\" +\n+                \"<div>\\n\" +\n+                \"    <h1>Example Domain</h1>\\n\" +\n+                \"    <p>This domain is for use in illustrative examples in documents. You may use this\\n\" +\n+                \"    domain in literature without prior coordination or asking for permission.</p>\\n\" +\n+                \"    <p><a href=\\\"https://www.iana.org/domains/example\\\">More information...</a></p>\\n\" +\n+                \"</div>\\n\" +\n+                \"</body>\\n\" +\n+                \"</html>\\n\");\n+    }\n+\n+    /**\n+     * Method: resourceToString(URL resource, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testResourceToStringForResourceEndOfLineStringXmlEncode() throws Exception {\n+        URL resource = new URL(\"http://example.com/\");\n+        String s1 = Misc.resourceToString(resource, \"end of the page\", true);\n+        assertEquals(s1, \"&lt;!doctype html&gt;end of the page&lt;html&gt;end of the page&lt;head&gt;end of the page    &lt;title&gt;Example Domain&lt;/title&gt;end of the pageend of the page    &lt;meta charset=&quot;utf-8&quot; /&gt;end of the page    &lt;meta http-equiv=&quot;Content-type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;end of the page    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;end of the page    &lt;style type=&quot;text/css&quot;&gt;end of the page    body {end of the page        background-color: #f0f0f2;end of the page        margin: 0;end of the page        padding: 0;end of the page        font-family: -apple-system, system-ui, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;end of the page        end of the page    }end of the page    div {end of the page        width: 600px;end of the page        margin: 5em auto;end of the page        padding: 2em;end of the page        background-color: #fdfdff;end of the page        border-radius: 0.5em;end of the page        box-shadow: 2px 3px 7px 2px rgba(0,0,0,0.02);end of the page    }end of the page    a:link, a:visited {end of the page        color: #38488f;end of the page        text-decoration: none;end of the page    }end of the page    @media (max-width: 700px) {end of the page        div {end of the page            margin: 0 auto;end of the page            width: auto;end of the page        }end of the page    }end of the page    &lt;/style&gt;    end of the page&lt;/head&gt;end of the pageend of the page&lt;body&gt;end of the page&lt;div&gt;end of the page    &lt;h1&gt;Example Domain&lt;/h1&gt;end of the page    &lt;p&gt;This domain is for use in illustrative examples in documents. You may use thisend of the page    domain in literature without prior coordination or asking for permission.&lt;/p&gt;end of the page    &lt;p&gt;&lt;a href=&quot;https://www.iana.org/domains/example&quot;&gt;More information...&lt;/a&gt;&lt;/p&gt;end of the page&lt;/div&gt;end of the page&lt;/body&gt;end of the page&lt;/html&gt;end of the page\");\n+    }", "originalCommit": "de8c74960b4a2926132b0c198bcf49d0a6e21fab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzM1OTYzNQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r437359635", "bodyText": "done", "author": "sinasen2000", "createdAt": "2020-06-09T12:12:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkzMDY2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkzMDcyMQ==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r435930721", "bodyText": "In stead of using a big concatinated string, it might be easier and more readable to use TestFileUtils.getResource and read the contents from a file instead", "author": "nielsm5", "createdAt": "2020-06-05T13:44:59Z", "path": "core/src/test/java/nl/nn/adapterframework/util/MiscTest.java", "diffHunk": "@@ -1,43 +1,610 @@\n package nl.nn.adapterframework.util;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotEquals;\n import static org.junit.Assert.assertTrue;\n \n+import java.io.BufferedReader;\n import java.io.ByteArrayInputStream;\n+import java.io.ByteArrayOutputStream;\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileWriter;\n import java.io.FilterInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.io.OutputStream;\n+import java.io.Reader;\n+import java.io.StringReader;\n+import java.io.StringWriter;\n+import java.io.Writer;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n \n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n \n+\n+/**\n+ * Misc Tester.\n+ *\n+ * @author <Sina Sen>\n+ */\n public class MiscTest {\n \n-\t@Test\n-\tpublic void testStreamToString() throws IOException {\n-\t\tString tekst = \"dit is een string\";\n-\t\tByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n-\t\t\n-\t\tCloseChecker closeChecker = new CloseChecker(bais); \n-\t\tString actual = Misc.streamToString(closeChecker);\n-\t\t\n-\t\tassertEquals(tekst, actual);\n-\t\tassertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n-\t}\n-\t\n-\tprivate class CloseChecker extends FilterInputStream {\n-\n-\t\tboolean inputStreamClosed;\n-\t\t\n-\t\tpublic CloseChecker(InputStream arg0) {\n-\t\t\tsuper(arg0);\n-\t\t}\n-\n-\t\t@Override\n-\t\tpublic void close() throws IOException {\n-\t\t\tinputStreamClosed=true;;\n-\t\t\tsuper.close();\n-\t\t}\n-\t\t\n-\t\t\n-\t}\n+    @ClassRule\n+    public static TemporaryFolder testFolder = new TemporaryFolder();\n+    private static String sourceFolderPath;\n+\n+    private static File file;\n+\n+    private String pathSeperator = File.separator;\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException {\n+        sourceFolderPath = testFolder.getRoot().getPath();\n+        file = testFolder.newFile(\"lebron.txt\");\n+        Writer w = new FileWriter(file.getName());\n+        w.write(\"inside the lebron file\");\n+        w.close();\n+    }\n+\n+    @AfterClass\n+    public static void cleanUp() {\n+        File f = new File(\"lebron.txt\");\n+        f.delete();\n+    }\n+\n+\n+    @Test\n+    public void testStreamToString() throws IOException {\n+        String tekst = \"dit is een string\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n+\n+        CloseChecker closeChecker = new CloseChecker(bais);\n+        String actual = Misc.streamToString(closeChecker);\n+\n+        assertEquals(tekst, actual);\n+        assertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n+    }\n+\n+    private class CloseChecker extends FilterInputStream {\n+\n+        boolean inputStreamClosed;\n+\n+        public CloseChecker(InputStream arg0) {\n+            super(arg0);\n+        }\n+\n+        @Override\n+        public void close() throws IOException {\n+            inputStreamClosed = true;\n+\n+            super.close();\n+        }\n+    }\n+\n+    /**\n+     * Method: createSimpleUUID()\n+     */\n+    @Test\n+    public void testCreateSimpleUUID() throws Exception {\n+        String uuid = Misc.createSimpleUUID();\n+        assertFalse(sourceFolderPath.isEmpty()); // for avoiding code quality warnings\n+        assertEquals(uuid.substring(8, 9), \"-\");\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+    /**\n+     * Method: createRandomUUID(boolean removeDashes)\n+     */\n+    @Test\n+    public void testCreateRandomUUIDRemoveDashes() throws Exception {\n+        String uuid = Misc.createRandomUUID(true);\n+        assertNotEquals(uuid.substring(8, 9), \"-\"); // assert that dashes are removed\n+        assertEquals(uuid.length(), 32);\n+    }\n+\n+    @Test\n+    public void testCreateRandomUUID() throws Exception {\n+        String uuid = Misc.createRandomUUID();\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+\n+    /**\n+     * Method: asHex(byte[] buf)\n+     */\n+    @Test\n+    public void testAsHex() throws Exception {\n+        String test = \"test\";\n+        String hex = Misc.asHex(test.getBytes());\n+        assertEquals(hex, \"74657374\");\n+    }\n+\n+    /**\n+     * Method: createNumericUUID()\n+     */\n+    @Test\n+    public void testCreateNumericUUID() throws Exception {\n+        String uuid = Misc.createNumericUUID();\n+        assertEquals(uuid.length(), 31);    //Unique string is <ipaddress with length 4*3><currentTime with length 13><hashcode with length 6>\n+    }\n+\n+    /**\n+     * Method: unsignedByteToInt(byte b)\n+     */\n+    @Test\n+    public void testUnsignedByteToInt() throws Exception {\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"-12\")), 244);\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"12\")), 12);\n+\n+    }\n+\n+\n+    /**\n+     * Method: fileToWriter(String filename, Writer writer)\n+     */\n+    @Test\n+    public void testFileToWriter() throws Exception {\n+        Writer writer = new StringWriter();\n+        Misc.fileToWriter(file.getName(), writer);\n+        assertEquals(writer.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: fileToStream(String filename, OutputStream output)\n+     */\n+    @Test\n+    public void testFileToStream() throws Exception {\n+        OutputStream os = new ByteArrayOutputStream();\n+        Misc.fileToStream(file.getName(), os);\n+        assertEquals(os.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output, boolean closeInput)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutputCloseInput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos, true);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToFile(InputStream inputStream, File file)\n+     */\n+    @Test\n+    public void testStreamToFile() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        Misc.streamToFile(bais, file);\n+\n+        // to read from the file\n+        InputStream is = new FileInputStream(file);\n+        BufferedReader buf = new BufferedReader(new InputStreamReader(is));\n+\n+        String line = buf.readLine();\n+        StringBuilder sb = new StringBuilder();\n+\n+        while (line != null) {\n+            sb.append(line).append(\"\\n\");\n+            line = buf.readLine();\n+        }\n+\n+        String fileAsString = sb.toString();\n+        assertEquals(fileAsString, \"test\\n\");\n+    }\n+\n+    /**\n+     * Method: streamToBytes(InputStream inputStream)\n+     */\n+    @Test\n+    public void testStreamToBytes() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        byte[] arr = Misc.streamToBytes(bais);\n+        assertEquals(new String(arr, StandardCharsets.UTF_8), \"test\");\n+    }\n+\n+    /**\n+     * Method: readerToWriter(Reader reader, Writer writer)\n+     */\n+    @Test\n+    public void testReaderToWriterForReaderWriter() throws Exception {\n+        Reader reader = new StringReader(\"test\");\n+        Writer writer = new StringWriter();\n+        Misc.readerToWriter(reader, writer);\n+        assertEquals(writer.toString(), \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: fileToString(String fileName)\n+     */\n+    @Test\n+    public void testFileToStringFileName() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName()), \"inside the lebron file\");\n+    }\n+    @Test\n+    public void testFileToStringFileNameEndLine() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName(), \" the end\"), \"inside the lebron file\");\n+    }\n+\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringNoXMLEncode() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", false);\n+        assertEquals(s, \"<root> 23    <name>GeeksforGeeks</name> 23    <address> 23        <sector>142</sector> 23        <location>Noida</location> 23    </address> 23</root> r\");\n+    }\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringXMLEncode() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", true);\n+        assertEquals(s, \"&lt;root&gt; 23    &lt;name&gt;GeeksforGeeks&lt;/name&gt; 23    &lt;address&gt; 23        &lt;sector&gt;142&lt;/sector&gt; 23        &lt;location&gt;Noida&lt;/location&gt; 23    &lt;/address&gt; 23&lt;/root&gt; r\");\n+    }\n+\n+\n+\n+    /**\n+     * Method: replace(String source, String from, String to)\n+     */\n+    @Test\n+    public void testReplace() throws Exception {\n+        String a = \"Kobe\";\n+        String res = Misc.replace(a, \"Ko\", \"Phoe\");\n+        assertEquals(res, \"Phoebe\");\n+    }\n+\n+    /**\n+     * Method: concatStrings(String part1, String separator, String part2)\n+     */\n+    @Test\n+    public void testConcatStrings() throws Exception {\n+        String a = \"LeBron\";\n+        String b = \"James\";\n+        String seperator = \"//\";\n+        String res = Misc.concatStrings(a, seperator, b);\n+        assertEquals(res, \"LeBron//James\");\n+    }\n+\n+    /**\n+     * Method: hide(String string)\n+     */\n+    @Test\n+    public void testHideString() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a);\n+        assertEquals(res, \"****\");\n+    }\n+\n+    /**\n+     * Method: hide(String string, int mode)\n+     */\n+    @Test\n+    public void testHideForStringMode() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a, 1);\n+        assertEquals(res, \"t**t\");\n+    }\n+\n+    /**\n+     * Method: byteArrayToString(byte[] input, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testByteArrayToString() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        String res = Misc.byteArrayToString(arr, \"\", true);\n+        assertEquals(res, s);\n+    }\n+\n+    /**\n+     * Method: gzip(String input)\n+     */\n+    @Test\n+    public void testGzipGUnzipInput() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        byte[] zipped = Misc.gzip(arr);\n+        assertEquals(Misc.gunzipToString(zipped), \"test\");\n+    }\n+\n+    @Test\n+    public void testGzipString() throws Exception {\n+        String s = \"you deserved this\";\n+        byte[] zipped = Misc.gzip(s);\n+        assertEquals(Misc.gunzipToString(zipped), \"you deserved this\");\n+\n+    }\n+\n+    /**\n+     * Method: compress(String input)\n+     */\n+    @Test\n+    public void testCompressDecompressInput() throws Exception {\n+        String s = \"test\";\n+        byte[] compressed = Misc.compress(s);\n+        String decompressed = Misc.decompressToString(compressed);\n+        assertEquals(decompressed, \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: copyContext(String keys, Map<String,Object> from, Map<String,Object> to)\n+     */\n+    @Test\n+    public void testCopyContext() throws Exception {\n+        Map<String, Object> context1 = new HashMap<>();\n+        Map<String, Object> context2 = new HashMap<>();\n+        String keys = \"a,b\";\n+        context1.put(\"a\", 15);\n+        context1.put(\"b\", 16);\n+        Misc.copyContext(keys, context1, context2);\n+        assertTrue(context1.equals(context2));\n+    }\n+\n+    /**\n+     * Method: toFileSize(String value, long defaultValue)\n+     */\n+    @Test\n+    public void testToFileSizeForValueDefaultValue() throws Exception {\n+        long res = Misc.toFileSize(\"14GB\", 20);\n+        assertEquals(Long.toString(res), \"15032385536\");\n+    }\n+\n+    /**\n+     * Method: toFileSize(long value)\n+     */\n+    @Test\n+    public void testToFileSizeValue() throws Exception {\n+        String kb = Misc.toFileSize(150000, false, true);\n+        String mb = Misc.toFileSize(15000000, true);\n+        String gb = Misc.toFileSize(Long.parseLong(\"3221225472\"));\n+        assertEquals(gb, \"3GB\");\n+        assertEquals(mb, \"14 MB\");\n+        assertEquals(kb, \"146KB\");\n+    }\n+\n+\n+    @Test\n+    public void testListToStringWithStringList() {\n+        List list = new ArrayList<Integer>();\n+        list.add(\"bailar\");\n+        list.add(\"besos\");\n+        String res = Misc.listToString(list);\n+        assertEquals(res, \"bailarbesos\");\n+    }\n+\n+    /**\n+     * Method: addItemsToList(Collection<String> collection, String list, String collectionDescription, boolean lowercase)\n+     */\n+    @Test\n+    public void testAddItemsToList() throws Exception {\n+        List<String> stringCollection = new ArrayList<>();\n+        String list = \"a,b,C\";\n+        String collectionDescription = \"First 3 letters of the alphabet\";\n+        Misc.addItemsToList(stringCollection, list, collectionDescription, true);\n+        ArrayList<String> arrayList = new ArrayList<>();\n+        arrayList.add(\"a\");  arrayList.add(\"b\"); arrayList.add(\"c\");\n+        assertTrue(stringCollection.size() == 3);\n+        assertEquals(stringCollection.get(stringCollection.size()-1), \"c\");\n+    }\n+\n+    /**\n+     * Method: getFileSystemTotalSpace()\n+     */\n+    @Test\n+    public void testGetFileSystemTotalSpace() throws Exception {\n+assertFalse(Misc.getFileSystemTotalSpace().isEmpty());    }\n+\n+    /**\n+     * Method: getFileSystemFreeSpace()\n+     */\n+    @Test\n+    public void testGetFileSystemFreeSpace() throws Exception {\n+assertFalse(Misc.getFileSystemFreeSpace().isEmpty());    }\n+\n+    /**\n+     * Method: getAge(long value)\n+     */\n+    @Test\n+    public void testGetAge() throws Exception {\n+        assertFalse(Misc.getAge(1).isEmpty());\n+    }\n+    /**\n+     * Method: getDurationInMs(long value)\n+     */\n+    @Test\n+    public void testGetDurationInMs() throws Exception {\n+        assertFalse(Misc.getDurationInMs(14).isEmpty());\n+    }\n+\n+    /**\n+     * Method: parseAge(String value, long defaultValue)\n+     */\n+    @Test\n+    public void testParseAge() throws Exception {\n+        long res = Misc.parseAge(\"2D\", 100);\n+        assertEquals(res, 172800000);\n+    }\n+\n+    /**\n+     * Method: cleanseMessage(String inputString, String hideRegex, String hideMethod)\n+     */\n+    @Test\n+    public void testCleanseMessage() throws Exception {\n+        String s = \"Donald Duck 23  Hey hey  14  Wooo\";\n+        String regex = \"\\\\d\";\n+        String res = Misc.cleanseMessage(s, regex, \" does not matter\");\n+        assertEquals(res, \"Donald Duck **  Hey hey  **  Wooo\");\n+        }\n+\n+    /**\n+     * Method: hideFirstHalf(String inputString, String regex)\n+     */\n+    @Test\n+    public void testHideFirstHalf() throws Exception {\n+        String s = \"Donald Duck     Hey hey     Wooo\";\n+        String hideRegex = \"[^\\\\s*].*[^\\\\s*]\";\n+        String res = Misc.hideFirstHalf(s, hideRegex);\n+        assertEquals(res, \"****************Hey hey     Wooo\");\n+\n+    }\n+\n+\n+    /**\n+     * Method: getBuildOutputDirectory()\n+     */\n+    @Test\n+    public void testGetBuildOutputDirectory() throws Exception {\n+        String outputDirectory = Misc.getBuildOutputDirectory();\n+assertEquals(outputDirectory.substring(outputDirectory.length()-29, outputDirectory.length()), pathSeperator+\"iaf\"+pathSeperator+\"core\"+pathSeperator+\"target\"+pathSeperator+\"test-classes\");    }\n+\n+    /**\n+     * Method: getProjectBaseDir()\n+     */\n+    @Test\n+    public void testGetProjectBaseDir() throws Exception {\n+        String baseDir = Misc.getBuildOutputDirectory();\n+        assertEquals(baseDir.substring(baseDir.length()-29, baseDir.length()), pathSeperator+\"iaf\"+pathSeperator+\"core\"+pathSeperator+\"target\"+pathSeperator+\"test-classes\");\n+    }\n+\n+    /**\n+     * Method: toSortName(String name)\n+     */\n+    @Test\n+    public void testToSortName() throws Exception {\n+assertEquals(Misc.toSortName(\"new_name\"), \"NEW*NAME\");    }\n+\n+    /**\n+     * Method: countRegex(String string, String regex)\n+     */\n+    @Test\n+    public void testCountRegex() throws Exception {\n+String s = \"12ab34\";\n+    String regex = \"\\\\d\";\n+    int regexCount = Misc.countRegex(s, regex);\n+    assertEquals(regexCount, 4);\n+    }\n+\n+    /**\n+     * Method: resourceToString(URL resource)\n+     */\n+    @Test\n+    public void testResourceToStringResource() throws Exception {\n+        URL resource = new URL(\"http://example.com/\");\n+        String s1 = Misc.resourceToString(resource);\n+        assertEquals(s1, \"<!doctype html>\\n\" +\n+                \"<html>\\n\" +\n+                \"<head>\\n\" +\n+                \"    <title>Example Domain</title>\\n\" +\n+                \"\\n\" +\n+                \"    <meta charset=\\\"utf-8\\\" />\\n\" +\n+                \"    <meta http-equiv=\\\"Content-type\\\" content=\\\"text/html; charset=utf-8\\\" />\\n\" +\n+                \"    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />\\n\" +\n+                \"    <style type=\\\"text/css\\\">\\n\" +\n+                \"    body {\\n\" +\n+                \"        background-color: #f0f0f2;\\n\" +\n+                \"        margin: 0;\\n\" +\n+                \"        padding: 0;\\n\" +\n+                \"        font-family: -apple-system, system-ui, BlinkMacSystemFont, \\\"Segoe UI\\\", \\\"Open Sans\\\", \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n\" +\n+                \"        \\n\" +\n+                \"    }\\n\" +\n+                \"    div {\\n\" +\n+                \"        width: 600px;\\n\" +\n+                \"        margin: 5em auto;\\n\" +\n+                \"        padding: 2em;\\n\" +\n+                \"        background-color: #fdfdff;\\n\" +\n+                \"        border-radius: 0.5em;\\n\" +\n+                \"        box-shadow: 2px 3px 7px 2px rgba(0,0,0,0.02);\\n\" +\n+                \"    }\\n\" +\n+                \"    a:link, a:visited {\\n\" +\n+                \"        color: #38488f;\\n\" +\n+                \"        text-decoration: none;\\n\" +\n+                \"    }\\n\" +\n+                \"    @media (max-width: 700px) {\\n\" +\n+                \"        div {\\n\" +\n+                \"            margin: 0 auto;\\n\" +\n+                \"            width: auto;\\n\" +\n+                \"        }\\n\" +\n+                \"    }\\n\" +\n+                \"    </style>    \\n\" +\n+                \"</head>\\n\" +\n+                \"\\n\" +\n+                \"<body>\\n\" +\n+                \"<div>\\n\" +\n+                \"    <h1>Example Domain</h1>\\n\" +\n+                \"    <p>This domain is for use in illustrative examples in documents. You may use this\\n\" +\n+                \"    domain in literature without prior coordination or asking for permission.</p>\\n\" +\n+                \"    <p><a href=\\\"https://www.iana.org/domains/example\\\">More information...</a></p>\\n\" +\n+                \"</div>\\n\" +\n+                \"</body>\\n\" +\n+                \"</html>\\n\");\n+    }\n+\n+    /**\n+     * Method: resourceToString(URL resource, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testResourceToStringForResourceEndOfLineStringXmlEncode() throws Exception {\n+        URL resource = new URL(\"http://example.com/\");\n+        String s1 = Misc.resourceToString(resource, \"end of the page\", true);\n+        assertEquals(s1, \"&lt;!doctype html&gt;end of the page&lt;html&gt;end of the page&lt;head&gt;end of the page    &lt;title&gt;Example Domain&lt;/title&gt;end of the pageend of the page    &lt;meta charset=&quot;utf-8&quot; /&gt;end of the page    &lt;meta http-equiv=&quot;Content-type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;end of the page    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;end of the page    &lt;style type=&quot;text/css&quot;&gt;end of the page    body {end of the page        background-color: #f0f0f2;end of the page        margin: 0;end of the page        padding: 0;end of the page        font-family: -apple-system, system-ui, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;end of the page        end of the page    }end of the page    div {end of the page        width: 600px;end of the page        margin: 5em auto;end of the page        padding: 2em;end of the page        background-color: #fdfdff;end of the page        border-radius: 0.5em;end of the page        box-shadow: 2px 3px 7px 2px rgba(0,0,0,0.02);end of the page    }end of the page    a:link, a:visited {end of the page        color: #38488f;end of the page        text-decoration: none;end of the page    }end of the page    @media (max-width: 700px) {end of the page        div {end of the page            margin: 0 auto;end of the page            width: auto;end of the page        }end of the page    }end of the page    &lt;/style&gt;    end of the page&lt;/head&gt;end of the pageend of the page&lt;body&gt;end of the page&lt;div&gt;end of the page    &lt;h1&gt;Example Domain&lt;/h1&gt;end of the page    &lt;p&gt;This domain is for use in illustrative examples in documents. You may use thisend of the page    domain in literature without prior coordination or asking for permission.&lt;/p&gt;end of the page    &lt;p&gt;&lt;a href=&quot;https://www.iana.org/domains/example&quot;&gt;More information...&lt;/a&gt;&lt;/p&gt;end of the page&lt;/div&gt;end of the page&lt;/body&gt;end of the page&lt;/html&gt;end of the page\");\n+    }\n+\n+    @Test\n+    public void testResourceToStringForResourceEndOfLineString() throws Exception {\n+        URL resource = new URL(\"http://example.com/\");\n+        String s1 = Misc.resourceToString(resource, \"end of the page\");\n+        assertEquals(s1, \"<!doctype html>end of the page<html>end of the page<head>end of the page    <title>Example Domain</title>end of the pageend of the page    <meta charset=\\\"utf-8\\\" />end of the page    <meta http-equiv=\\\"Content-type\\\" content=\\\"text/html; charset=utf-8\\\" />end of the page    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\" />end of the page    <style type=\\\"text/css\\\">end of the page    body {end of the page        background-color: #f0f0f2;end of the page        margin: 0;end of the page        padding: 0;end of the page        font-family: -apple-system, system-ui, BlinkMacSystemFont, \\\"Segoe UI\\\", \\\"Open Sans\\\", \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;end of the page        end of the page    }end of the page    div {end of the page        width: 600px;end of the page        margin: 5em auto;end of the page        padding: 2em;end of the page        background-color: #fdfdff;end of the page        border-radius: 0.5em;end of the page        box-shadow: 2px 3px 7px 2px rgba(0,0,0,0.02);end of the page    }end of the page    a:link, a:visited {end of the page        color: #38488f;end of the page        text-decoration: none;end of the page    }end of the page    @media (max-width: 700px) {end of the page        div {end of the page            margin: 0 auto;end of the page            width: auto;end of the page        }end of the page    }end of the page    </style>    end of the page</head>end of the pageend of the page<body>end of the page<div>end of the page    <h1>Example Domain</h1>end of the page    <p>This domain is for use in illustrative examples in documents. You may use thisend of the page    domain in literature without prior coordination or asking for permission.</p>end of the page    <p><a href=\\\"https://www.iana.org/domains/example\\\">More information...</a></p>end of the page</div>end of the page</body>end of the page</html>end of the page\");\n+    }", "originalCommit": "de8c74960b4a2926132b0c198bcf49d0a6e21fab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzM1OTcyMA==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r437359720", "bodyText": "done", "author": "sinasen2000", "createdAt": "2020-06-09T12:12:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkzMDcyMQ=="}], "type": "inlineReview"}, {"oid": "2b475c62416a09a8db4aa24e78438ea64ee92923", "url": "https://github.com/ibissource/iaf/commit/2b475c62416a09a8db4aa24e78438ea64ee92923", "message": "Refactor test class.\n\nRefactored with respect to the requests of Niels.", "committedDate": "2020-06-09T12:20:47Z", "type": "commit"}, {"oid": "e9b50396efd18aa056dc32571078b85c7c0b5f5e", "url": "https://github.com/ibissource/iaf/commit/e9b50396efd18aa056dc32571078b85c7c0b5f5e", "message": "Add test case to test compression", "committedDate": "2020-06-10T11:56:05Z", "type": "commit"}, {"oid": "16ad3021f7d70d8ffff1498d3c580b16a3151ba0", "url": "https://github.com/ibissource/iaf/commit/16ad3021f7d70d8ffff1498d3c580b16a3151ba0", "message": "Change testing for resource to string method, and compression method", "committedDate": "2020-06-10T14:27:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxMjMyMg==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r438212322", "bodyText": "Travis is failing :O MiscTest.testResourceToStringResource:571 \u00bb StringIndexOutOfBounds String inde...", "author": "nielsm5", "createdAt": "2020-06-10T15:26:44Z", "path": "core/src/test/java/nl/nn/adapterframework/util/MiscTest.java", "diffHunk": "@@ -1,43 +1,590 @@\n package nl.nn.adapterframework.util;\n \n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertNotEquals;\n import static org.junit.Assert.assertTrue;\n \n+import java.io.BufferedReader;\n import java.io.ByteArrayInputStream;\n+import java.io.ByteArrayOutputStream;\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.FileWriter;\n import java.io.FilterInputStream;\n import java.io.IOException;\n import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.io.OutputStream;\n+import java.io.Reader;\n+import java.io.StringReader;\n+import java.io.StringWriter;\n+import java.io.Writer;\n+import java.net.URL;\n+import java.nio.charset.StandardCharsets;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n \n+import nl.nn.adapterframework.testutil.TestFileUtils;\n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n \n+\n+/**\n+ * Misc Tester.\n+ *\n+ * @author <Sina Sen>\n+ */\n public class MiscTest {\n \n-\t@Test\n-\tpublic void testStreamToString() throws IOException {\n-\t\tString tekst = \"dit is een string\";\n-\t\tByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n-\t\t\n-\t\tCloseChecker closeChecker = new CloseChecker(bais); \n-\t\tString actual = Misc.streamToString(closeChecker);\n-\t\t\n-\t\tassertEquals(tekst, actual);\n-\t\tassertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n-\t}\n-\t\n-\tprivate class CloseChecker extends FilterInputStream {\n-\n-\t\tboolean inputStreamClosed;\n-\t\t\n-\t\tpublic CloseChecker(InputStream arg0) {\n-\t\t\tsuper(arg0);\n-\t\t}\n-\n-\t\t@Override\n-\t\tpublic void close() throws IOException {\n-\t\t\tinputStreamClosed=true;;\n-\t\t\tsuper.close();\n-\t\t}\n-\t\t\n-\t\t\n-\t}\n+    @ClassRule\n+    public static TemporaryFolder testFolder = new TemporaryFolder();\n+    private static String sourceFolderPath;\n+\n+    private static File file;\n+\n+    private String pathSeperator = File.separator;\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException {\n+        sourceFolderPath = testFolder.getRoot().getPath();\n+        file = testFolder.newFile(\"lebron.txt\");\n+        Writer w = new FileWriter(file.getName());\n+        w.write(\"inside the lebron file\");\n+        w.close();\n+    }\n+\n+    @AfterClass\n+    public static void cleanUp() {\n+        File f = new File(\"lebron.txt\");\n+        f.delete();\n+    }\n+\n+\n+    @Test\n+    public void testStreamToString() throws IOException {\n+        String tekst = \"dit is een string\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(tekst.getBytes());\n+\n+        CloseChecker closeChecker = new CloseChecker(bais);\n+        String actual = Misc.streamToString(closeChecker);\n+\n+        assertEquals(tekst, actual);\n+        assertTrue(\"inputstream was not closed\", closeChecker.inputStreamClosed);\n+    }\n+\n+    private class CloseChecker extends FilterInputStream {\n+\n+        boolean inputStreamClosed;\n+\n+        public CloseChecker(InputStream arg0) {\n+            super(arg0);\n+        }\n+\n+        @Override\n+        public void close() throws IOException {\n+            inputStreamClosed = true;\n+\n+            super.close();\n+        }\n+    }\n+\n+    /**\n+     * Method: createSimpleUUID()\n+     */\n+    @Test\n+    public void testCreateSimpleUUID() throws Exception {\n+        String uuid = Misc.createSimpleUUID();\n+        assertFalse(sourceFolderPath.isEmpty()); // for avoiding code quality warnings\n+        assertEquals(uuid.substring(8, 9), \"-\");\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+    /**\n+     * Method: createRandomUUID(boolean removeDashes)\n+     */\n+    @Test\n+    public void testCreateRandomUUIDRemoveDashes() throws Exception {\n+        String uuid = Misc.createRandomUUID(true);\n+        assertNotEquals(uuid.substring(8, 9), \"-\"); // assert that dashes are removed\n+        assertEquals(uuid.length(), 32);\n+    }\n+\n+    @Test\n+    public void testCreateRandomUUID() throws Exception {\n+        String uuid = Misc.createRandomUUID();\n+        assertFalse(uuid.isEmpty());\n+    }\n+\n+\n+    /**\n+     * Method: asHex(byte[] buf)\n+     */\n+    @Test\n+    public void testAsHex() throws Exception {\n+        String test = \"test\";\n+        String hex = Misc.asHex(test.getBytes());\n+        assertEquals(hex, \"74657374\");\n+    }\n+\n+    /**\n+     * Method: createNumericUUID()\n+     */\n+    @Test\n+    public void testCreateNumericUUID() throws Exception {\n+        String uuid = Misc.createNumericUUID();\n+        assertEquals(uuid.length(), 31);    //Unique string is <ipaddress with length 4*3><currentTime with length 13><hashcode with length 6>\n+    }\n+\n+    /**\n+     * Method: unsignedByteToInt(byte b)\n+     */\n+    @Test\n+    public void testUnsignedByteToInt() throws Exception {\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"-12\")), 244);\n+        assertEquals(Misc.unsignedByteToInt(new Byte(\"12\")), 12);\n+\n+    }\n+\n+\n+    /**\n+     * Method: fileToWriter(String filename, Writer writer)\n+     */\n+    @Test\n+    public void testFileToWriter() throws Exception {\n+        Writer writer = new StringWriter();\n+        Misc.fileToWriter(file.getName(), writer);\n+        assertEquals(writer.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: fileToStream(String filename, OutputStream output)\n+     */\n+    @Test\n+    public void testFileToStream() throws Exception {\n+        OutputStream os = new ByteArrayOutputStream();\n+        Misc.fileToStream(file.getName(), os);\n+        assertEquals(os.toString(), \"inside the lebron file\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToStream(InputStream input, OutputStream output, boolean closeInput)\n+     */\n+    @Test\n+    public void testStreamToStreamForInputOutputCloseInput() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        OutputStream baos = new ByteArrayOutputStream();\n+        Misc.streamToStream(bais, baos, true);\n+        assertEquals(baos.toString(), \"test\");\n+    }\n+\n+    /**\n+     * Method: streamToFile(InputStream inputStream, File file)\n+     */\n+    @Test\n+    public void testStreamToFile() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        Misc.streamToFile(bais, file);\n+\n+        // to read from the file\n+        InputStream is = new FileInputStream(file);\n+        BufferedReader buf = new BufferedReader(new InputStreamReader(is));\n+\n+        String line = buf.readLine();\n+        StringBuilder sb = new StringBuilder();\n+\n+        while (line != null) {\n+            sb.append(line).append(\"\\n\");\n+            line = buf.readLine();\n+        }\n+\n+        String fileAsString = sb.toString();\n+        assertEquals(fileAsString, \"test\\n\");\n+    }\n+\n+    /**\n+     * Method: streamToBytes(InputStream inputStream)\n+     */\n+    @Test\n+    public void testStreamToBytes() throws Exception {\n+        String test = \"test\";\n+        ByteArrayInputStream bais = new ByteArrayInputStream(test.getBytes());\n+        byte[] arr = Misc.streamToBytes(bais);\n+        assertEquals(new String(arr, StandardCharsets.UTF_8), \"test\");\n+    }\n+\n+    /**\n+     * Method: readerToWriter(Reader reader, Writer writer)\n+     */\n+    @Test\n+    public void testReaderToWriterForReaderWriter() throws Exception {\n+        Reader reader = new StringReader(\"test\");\n+        Writer writer = new StringWriter();\n+        Misc.readerToWriter(reader, writer);\n+        assertEquals(writer.toString(), \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: fileToString(String fileName)\n+     */\n+    @Test\n+    public void testFileToStringFileName() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName()), \"inside the lebron file\");\n+    }\n+\n+    @Test\n+    public void testFileToStringFileNameEndLine() throws Exception {\n+        //Misc.resourceToString()\n+        assertEquals(Misc.fileToString(file.getName(), \" the end\"), \"inside the lebron file\");\n+    }\n+\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringNoXMLEncode() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", false);\n+        assertEquals(s, \"<root> 23    <name>GeeksforGeeks</name> 23    <address> 23        <sector>142</sector> 23        <location>Noida</location> 23    </address> 23</root> r\");\n+    }\n+\n+    /**\n+     * Method: readerToString(Reader reader, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testReaderToStringXMLEncodeWithEndOfLineString() throws Exception {\n+        Reader r = new StringReader(\"<root> \\n\" +\n+                \"    <name>GeeksforGeeks</name> \\n\" +\n+                \"    <address> \\n\" +\n+                \"        <sector>142</sector> \\n\" +\n+                \"        <location>Noida</location> \\n\" +\n+                \"    </address> \\n\" +\n+                \"</root> r\");\n+        String s = Misc.readerToString(r, \"23\", true);\n+        assertEquals(s, \"&lt;root&gt; 23    &lt;name&gt;GeeksforGeeks&lt;/name&gt; 23    &lt;address&gt; 23        &lt;sector&gt;142&lt;/sector&gt; 23        &lt;location&gt;Noida&lt;/location&gt; 23    &lt;/address&gt; 23&lt;/root&gt; r\");\n+    }\n+\n+\n+    /**\n+     * Method: replace(String source, String from, String to)\n+     */\n+    @Test\n+    public void testReplace() throws Exception {\n+        String a = \"Kobe\";\n+        String res = Misc.replace(a, \"Ko\", \"Phoe\");\n+        assertEquals(res, \"Phoebe\");\n+    }\n+\n+    /**\n+     * Method: concatStrings(String part1, String separator, String part2)\n+     */\n+    @Test\n+    public void testConcatStrings() throws Exception {\n+        String a = \"LeBron\";\n+        String b = \"James\";\n+        String seperator = \"//\";\n+        String res = Misc.concatStrings(a, seperator, b);\n+        assertEquals(res, \"LeBron//James\");\n+    }\n+\n+    /**\n+     * Method: hide(String string)\n+     */\n+    @Test\n+    public void testHideString() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a);\n+        assertEquals(res, \"****\");\n+    }\n+\n+    /**\n+     * Method: hide(String string, int mode)\n+     */\n+    @Test\n+    public void testHideForStringMode() throws Exception {\n+        String a = \"test\";\n+        String res = Misc.hide(a, 1);\n+        assertEquals(res, \"t**t\");\n+    }\n+\n+    /**\n+     * Method: byteArrayToString(byte[] input, String endOfLineString, boolean xmlEncode)\n+     */\n+    @Test\n+    public void testByteArrayToString() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        String res = Misc.byteArrayToString(arr, \"\", true);\n+        assertEquals(res, s);\n+    }\n+\n+    /**\n+     * Method: gzip(String input)\n+     */\n+    @Test\n+    public void testGzipGUnzipInput() throws Exception {\n+        String s = \"test\";\n+        byte[] arr = s.getBytes();\n+        byte[] zipped = Misc.gzip(arr);\n+        assertEquals(Misc.gunzipToString(zipped), \"test\");\n+    }\n+\n+    @Test\n+    public void testGzipString() throws Exception {\n+        String s = \"you deserved this\";\n+        byte[] zipped = Misc.gzip(s);\n+        assertEquals(Misc.gunzipToString(zipped), \"you deserved this\");\n+\n+    }\n+\n+    /**\n+     * Method: compress(String input)\n+     */\n+    @Test\n+    public void testCompressed() throws Exception {\n+        String s = \"#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$#!@#$\";\n+        String s1 = \"teststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststeststests\";\n+        String s3 = \"123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123\";\n+        byte[] compressedSymbols = Misc.compress(s);\n+        byte[] compressedText = Misc.compress(s1);\n+        byte[] compressedNumbers = Misc.compress(s3);\n+        assertTrue(compressedNumbers.length < s3.length());\n+        assertEquals(compressedNumbers[0], 120);\n+        assertEquals(compressedNumbers[1], -38);\n+        assertTrue(compressedText.length < s1.length());\n+        assertEquals(compressedText[0], 120);\n+        assertEquals(compressedText[1], -38);\n+        assertTrue(compressedSymbols.length < s.length());\n+        assertEquals(compressedSymbols[0], 120);\n+        assertEquals(compressedSymbols[1], -38);\n+    }\n+\n+    @Test\n+    public void testCompressDecompressInput() throws Exception {\n+        String s = \"test\";\n+        byte[] compressed = Misc.compress(s);\n+        String decompressed = Misc.decompressToString(compressed);\n+        assertEquals(decompressed, \"test\");\n+    }\n+\n+\n+    /**\n+     * Method: copyContext(String keys, Map<String,Object> from, Map<String,Object> to)\n+     */\n+    @Test\n+    public void testCopyContext() throws Exception {\n+        Map<String, Object> context1 = new HashMap<>();\n+        Map<String, Object> context2 = new HashMap<>();\n+        String keys = \"a,b\";\n+        context1.put(\"a\", 15);\n+        context1.put(\"b\", 16);\n+        Misc.copyContext(keys, context1, context2);\n+        assertTrue(context1.equals(context2));\n+    }\n+\n+    /**\n+     * Method: toFileSize(String value, long defaultValue)\n+     */\n+    @Test\n+    public void testToFileSizeForValueDefaultValue() throws Exception {\n+        long res = Misc.toFileSize(\"14GB\", 20);\n+        assertEquals(Long.toString(res), \"15032385536\");\n+    }\n+\n+    /**\n+     * Method: toFileSize(long value)\n+     */\n+    @Test\n+    public void testToFileSizeValue() throws Exception {\n+        String kb = Misc.toFileSize(150000, false, true);\n+        String mb = Misc.toFileSize(15000000, true);\n+        String gb = Misc.toFileSize(Long.parseLong(\"3221225472\"));\n+        assertEquals(gb, \"3GB\");\n+        assertEquals(mb, \"14 MB\");\n+        assertEquals(kb, \"146KB\");\n+    }\n+\n+\n+    @Test\n+    public void testListToStringWithStringList() {\n+        List list = new ArrayList<Integer>();\n+        list.add(\"bailar\");\n+        list.add(\"besos\");\n+        String res = Misc.listToString(list);\n+        assertEquals(res, \"bailarbesos\");\n+    }\n+\n+    /**\n+     * Method: addItemsToList(Collection<String> collection, String list, String collectionDescription, boolean lowercase)\n+     */\n+    @Test\n+    public void testAddItemsToList() throws Exception {\n+        List<String> stringCollection = new ArrayList<>();\n+        String list = \"a,b,C\";\n+        String collectionDescription = \"First 3 letters of the alphabet\";\n+        Misc.addItemsToList(stringCollection, list, collectionDescription, true);\n+        ArrayList<String> arrayList = new ArrayList<>();\n+        arrayList.add(\"a\");\n+        arrayList.add(\"b\");\n+        arrayList.add(\"c\");\n+        assertTrue(stringCollection.size() == 3);\n+        assertEquals(stringCollection.get(stringCollection.size() - 1), \"c\");\n+    }\n+\n+    /**\n+     * Method: getFileSystemTotalSpace()\n+     */\n+    @Test\n+    public void testGetFileSystemTotalSpace() throws Exception {\n+        assertFalse(Misc.getFileSystemTotalSpace().isEmpty());\n+    }\n+\n+    /**\n+     * Method: getFileSystemFreeSpace()\n+     */\n+    @Test\n+    public void testGetFileSystemFreeSpace() throws Exception {\n+        assertFalse(Misc.getFileSystemFreeSpace().isEmpty());\n+    }\n+\n+    /**\n+     * Method: getAge(long value)\n+     */\n+    @Test\n+    public void testGetAge() throws Exception {\n+        assertFalse(Misc.getAge(1).isEmpty());\n+    }\n+\n+    /**\n+     * Method: getDurationInMs(long value)\n+     */\n+    @Test\n+    public void testGetDurationInMs() throws Exception {\n+        assertFalse(Misc.getDurationInMs(14).isEmpty());\n+    }\n+\n+    /**\n+     * Method: parseAge(String value, long defaultValue)\n+     */\n+    @Test\n+    public void testParseAge() throws Exception {\n+        long res = Misc.parseAge(\"2D\", 100);\n+        assertEquals(res, 172800000);\n+    }\n+\n+    /**\n+     * Method: cleanseMessage(String inputString, String hideRegex, String hideMethod)\n+     */\n+    @Test\n+    public void testCleanseMessage() throws Exception {\n+        String s = \"Donald Duck 23  Hey hey  14  Wooo\";\n+        String regex = \"\\\\d\";\n+        String res = Misc.cleanseMessage(s, regex, \" does not matter\");\n+        assertEquals(res, \"Donald Duck **  Hey hey  **  Wooo\");\n+    }\n+\n+    /**\n+     * Method: hideFirstHalf(String inputString, String regex)\n+     */\n+    @Test\n+    public void testHideFirstHalf() throws Exception {\n+        String s = \"Donald Duck     Hey hey     Wooo\";\n+        String hideRegex = \"[^\\\\s*].*[^\\\\s*]\";\n+        String res = Misc.hideFirstHalf(s, hideRegex);\n+        assertEquals(res, \"****************Hey hey     Wooo\");\n+    }\n+\n+\n+    /**\n+     * Method: getBuildOutputDirectory()\n+     */\n+    @Test\n+    public void testGetBuildOutputDirectory() throws Exception {\n+        String outputDirectory = Misc.getBuildOutputDirectory();\n+        assertEquals(outputDirectory.substring(outputDirectory.length() - 29, outputDirectory.length()), pathSeperator + \"iaf\" + pathSeperator + \"core\" + pathSeperator + \"target\" + pathSeperator + \"test-classes\");\n+    }\n+\n+    /**\n+     * Method: getProjectBaseDir()\n+     */\n+    @Test\n+    public void testGetProjectBaseDir() throws Exception {\n+        String baseDir = Misc.getBuildOutputDirectory();\n+        assertEquals(baseDir.substring(baseDir.length() - 29, baseDir.length()), pathSeperator + \"iaf\" + pathSeperator + \"core\" + pathSeperator + \"target\" + pathSeperator + \"test-classes\");\n+    }\n+\n+    /**\n+     * Method: toSortName(String name)\n+     */\n+    @Test\n+    public void testToSortName() throws Exception {\n+        assertEquals(Misc.toSortName(\"new_name\"), \"NEW*NAME\");\n+    }\n+\n+    /**\n+     * Method: countRegex(String string, String regex)\n+     */\n+    @Test\n+    public void testCountRegex() throws Exception {\n+        String s = \"12ab34\";\n+        String regex = \"\\\\d\";\n+        int regexCount = Misc.countRegex(s, regex);\n+        assertEquals(regexCount, 4);\n+    }\n+\n+    /**\n+     * Method: resourceToString(URL resource)\n+     */\n+    @Test\n+    public void testResourceToStringResource() throws Exception {\n+        URL resource = TestFileUtils.getTestFileURL(\"/Misc/test_file_for_resource_to_string_misc.txt\");\n+        String s1 = Misc.resourceToString(resource);\n+        assertEquals(s1.substring(0, 62), \"<!doctype txt>this is a text file.\\r\\nnew line in the text file.\");\n+    }\n+", "originalCommit": "16ad3021f7d70d8ffff1498d3c580b16a3151ba0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxOTE2OA==", "url": "https://github.com/ibissource/iaf/pull/716#discussion_r438219168", "bodyText": "See: https://travis-ci.org/github/ibissource/iaf/builds/696874345", "author": "nielsm5", "createdAt": "2020-06-10T15:36:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxMjMyMg=="}], "type": "inlineReview"}, {"oid": "29bba0026b7102857941c119901fb2d8023b0b5d", "url": "https://github.com/ibissource/iaf/commit/29bba0026b7102857941c119901fb2d8023b0b5d", "message": "Fix build errror", "committedDate": "2020-06-10T18:26:03Z", "type": "commit"}, {"oid": "c40b7e86126f0ce76a173ee6b45f84fa2ed2c1a6", "url": "https://github.com/ibissource/iaf/commit/c40b7e86126f0ce76a173ee6b45f84fa2ed2c1a6", "message": "Fix build error.", "committedDate": "2020-06-10T18:48:56Z", "type": "commit"}, {"oid": "475b59d239c47ee341787a76de3cf141e5b581a5", "url": "https://github.com/ibissource/iaf/commit/475b59d239c47ee341787a76de3cf141e5b581a5", "message": "Fix build error", "committedDate": "2020-06-10T18:59:01Z", "type": "commit"}, {"oid": "fc82ddda395181b7a012e3ac2a9d0bbcf5342341", "url": "https://github.com/ibissource/iaf/commit/fc82ddda395181b7a012e3ac2a9d0bbcf5342341", "message": "Fix build error.", "committedDate": "2020-06-16T08:45:36Z", "type": "commit"}, {"oid": "503e83d01af2e7a5280c2d9b090fe5176d9dd9ca", "url": "https://github.com/ibissource/iaf/commit/503e83d01af2e7a5280c2d9b090fe5176d9dd9ca", "message": "Verify build passes.", "committedDate": "2020-06-16T08:52:07Z", "type": "commit"}, {"oid": "f8bf9f52e50c6c043533a09e954b36515480a35f", "url": "https://github.com/ibissource/iaf/commit/f8bf9f52e50c6c043533a09e954b36515480a35f", "message": "Use assertEqualsIgnoreWhitespaces instead of dealing with whitespaces", "committedDate": "2020-06-16T09:12:52Z", "type": "commit"}, {"oid": "2964734773879fdf9a8c2fb19b8203e854f70a99", "url": "https://github.com/ibissource/iaf/commit/2964734773879fdf9a8c2fb19b8203e854f70a99", "message": "Remove Codacy warning by adding an assertFalse.", "committedDate": "2020-06-16T09:16:44Z", "type": "commit"}]}