{"pr_number": 730, "pr_title": "Larva resolve properties", "pr_createdAt": "2020-05-19T09:21:05Z", "pr_url": "https://github.com/ibissource/iaf/pull/730", "timeline": [{"oid": "1a796ab7fb1cea386835b88ee9b4f26c485e3b94", "url": "https://github.com/ibissource/iaf/commit/1a796ab7fb1cea386835b88ee9b4f26c485e3b94", "message": "Merge pull request #1 from ibissource/master\n\nMerge", "committedDate": "2020-03-26T15:21:19Z", "type": "commit"}, {"oid": "b5e578e45a7c0bf1e4846e16136e04be3a9d4b15", "url": "https://github.com/ibissource/iaf/commit/b5e578e45a7c0bf1e4846e16136e04be3a9d4b15", "message": "Merge branch 'master' of https://github.com/ibissource/iaf", "committedDate": "2020-04-01T12:46:06Z", "type": "commit"}, {"oid": "d966ccbf341d3335ef99b5877912f31085fd529b", "url": "https://github.com/ibissource/iaf/commit/d966ccbf341d3335ef99b5877912f31085fd529b", "message": "Merge branch 'master' of https://github.com/ibissource/iaf", "committedDate": "2020-04-16T16:42:40Z", "type": "commit"}, {"oid": "3363f89d543ae2127cb39ba6863c8c8189c41857", "url": "https://github.com/ibissource/iaf/commit/3363f89d543ae2127cb39ba6863c8c8189c41857", "message": "Merge branch 'master' of https://github.com/ibissource/iaf", "committedDate": "2020-04-29T14:39:29Z", "type": "commit"}, {"oid": "c99cb5b06b2663ad013f4b31552b4ca606ebc370", "url": "https://github.com/ibissource/iaf/commit/c99cb5b06b2663ad013f4b31552b4ca606ebc370", "message": "Merge branch 'master' of https://github.com/ibissource/iaf", "committedDate": "2020-05-19T09:02:57Z", "type": "commit"}, {"oid": "f28222809e081f11734d10b6962fc21b80727335", "url": "https://github.com/ibissource/iaf/commit/f28222809e081f11734d10b6962fc21b80727335", "message": "Make it possible to resolve properties from appconstants in Larva scenario's", "committedDate": "2020-05-19T09:12:02Z", "type": "commit"}, {"oid": "8992c42b4af32cd00fa2be71952f8448c4de87c9", "url": "https://github.com/ibissource/iaf/commit/8992c42b4af32cd00fa2be71952f8448c4de87c9", "message": "Fix tabs", "committedDate": "2020-05-19T09:20:18Z", "type": "commit"}, {"oid": "821e5a8298b4bcd641e4d66256fc6bfd5fb29661", "url": "https://github.com/ibissource/iaf/commit/821e5a8298b4bcd641e4d66256fc6bfd5fb29661", "message": "Prevent nullpointers", "committedDate": "2020-05-19T10:18:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIyNTIwNQ==", "url": "https://github.com/ibissource/iaf/pull/730#discussion_r427225205", "bodyText": "Kan je niet gewoon een ignore zetten op de content die dynamisch is?\nJe kan ook replaces doen? Nu gaat de save functionaliteit kapot?", "author": "nielsm5", "createdAt": "2020-05-19T11:21:33Z", "path": "larva/src/main/java/nl/nn/adapterframework/testtool/TestTool.java", "diffHunk": "@@ -2857,6 +2857,14 @@ public static int executeStep(String step, Properties properties, String stepDis\n \t\t\tif (fileContent == null) {\n \t\t\t\terrorMessage(\"Could not read file '\" + fileName + \"'\", writers);\n \t\t\t} else {\n+\n+\t\t\t\tString resolveProperties = properties.getProperty(\"scenario.resolveProperties\");\n+\n+                if( resolveProperties == null || !resolveProperties.equalsIgnoreCase(\"false\") ){\n+                    AppConstants appConstants = AppConstants.getInstance();\n+                    fileContent = StringResolver.substVars(fileContent, appConstants);\n+                }\n+", "originalCommit": "821e5a8298b4bcd641e4d66256fc6bfd5fb29661", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIzMDgyNQ==", "url": "https://github.com/ibissource/iaf/pull/730#discussion_r427230825", "bodyText": "Het gaat onder andere ook om input files, zoals voor de Navigator gebruiken we dit als input voor een adapter, waar dus een file path in staat.\nDit moet dynamisch in de XML komen te staan anders kan de adapter simpelweg niet getest worden.\n<ConvertDocument> <documentId>1</documentId> <documentLocation>${larva.staging.folder}MSG bestanden.eml</documentLocation> <fileName>MSG bestanden.eml</fileName> <GUID>ABC</GUID> <metaDataSchemaName/> <notificationAddress/> <documentSource>client</documentSource> <sourceDocumentId/> <sourceTransactionId/> <principal>KD05RX</principal> </ConvertDocument>", "author": "Laurens-makel", "createdAt": "2020-05-19T11:32:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIyNTIwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgwMzIzNQ==", "url": "https://github.com/ibissource/iaf/pull/730#discussion_r427803235", "bodyText": "Ok, zullen we dan doen dat de input wel dynamisch mag zijn, maar de output niet?", "author": "nielsm5", "createdAt": "2020-05-20T07:40:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIyNTIwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgzMzgxMw==", "url": "https://github.com/ibissource/iaf/pull/730#discussion_r427833813", "bodyText": "Kan ik mij helemaal in vinden.\nIk zal later vandaag even de tijd zoeken om het PR aan te passen.", "author": "Laurens-makel", "createdAt": "2020-05-20T08:32:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzIyNTIwNQ=="}], "type": "inlineReview"}, {"oid": "99060ac14269df82d9579d960f85b95ce9af3e49", "url": "https://github.com/ibissource/iaf/commit/99060ac14269df82d9579d960f85b95ce9af3e49", "message": "Only resolve properties in .write files (input files)", "committedDate": "2020-05-20T14:27:01Z", "type": "commit"}]}