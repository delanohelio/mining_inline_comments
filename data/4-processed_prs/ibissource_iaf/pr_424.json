{"pr_number": 424, "pr_title": "Improve AdapterFramework.xsd and enable it to be found by digester", "pr_createdAt": "2020-02-18T15:19:27Z", "pr_url": "https://github.com/ibissource/iaf/pull/424", "timeline": [{"oid": "712b97d9c9a4c515806d5bc07af807e042734601", "url": "https://github.com/ibissource/iaf/commit/712b97d9c9a4c515806d5bc07af807e042734601", "message": "Improve AdapterFramework.xsd and enable it to be found by digester", "committedDate": "2020-02-18T15:19:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTE0NzI2Ng==", "url": "https://github.com/ibissource/iaf/pull/424#discussion_r399147266", "bodyText": "We moeten, nu, gaan afdwingen dat men nu hier het juiste element neerzetten. Ik zie te veel combinaties\n\nroot\nibis\nmodule\nIOS-Adaptering\n\nVoordat het helemaal uit de hand loopt, dus een beslissing hier over maken en een grote melding in de console wanneer het fout is.", "author": "nielsm5", "createdAt": "2020-03-27T09:50:25Z", "path": "core/src/main/resources/AdapterFramework.xsd", "diffHunk": "@@ -1,4 +1,136 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n <xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" elementFormDefault=\"qualified\" attributeFormDefault=\"unqualified\">\n-\t<xsd:element name=\"IOS-Adaptering\" type=\"xsd:anyType\"/>\n+\t<xsd:element name=\"configuration\" type=\"ConfigurationType\"/>\n+\t<xsd:element name=\"IOS-Adaptering\" type=\"ConfigurationType\"/>\n+\t<xsd:element name=\"module\" type=\"ConfigurationType\"/>", "originalCommit": "712b97d9c9a4c515806d5bc07af807e042734601", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUyMDk4Ng==", "url": "https://github.com/ibissource/iaf/pull/424#discussion_r418520986", "bodyText": "Voor de IbisDoc xsd heb ik destijds een keuze gemaakt. Die volgen? Gaan we op termijn niet tegen de IbisDoc xsd aan valideren? Als mensen hun IDE koppelen aan de IbisDoc xsd zou het niet uit de hand moeten lopen. Is nu ook beschreven in de manual:\nhttps://frank-manual.readthedocs.io/en/latest/gettingStarted/configurationSyntaxChecking.html?highlight=completion#syntax-checking-and-the-frank-doc\nIk zou nog graag een standardisatie doorvoeren over waar we de ibisdoc xsd te zetten en hoe we die noemen want ik zie nu allerlei mensen ze op allerlei plekken zetten. Heb daarvoor Chakir gevraagd dit te doen:\n#261\nHet idee is dat na opstarten deze adapter wordt afgetrapt om de xsd in de configurations folder te zetten en een .gitignore aan te maken zodat die niet gecommit wordt. Ontwikkelaars kunnen dan altijd naar de xsd verwijzen met ../ibisdoc.xsd (of hoe we hem dan ook gaan noemen).", "author": "jacodg", "createdAt": "2020-05-01T12:27:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTE0NzI2Ng=="}], "type": "inlineReview"}, {"oid": "d5955704946e60b9789ed789ce47f839175d7a57", "url": "https://github.com/ibissource/iaf/commit/d5955704946e60b9789ed789ce47f839175d7a57", "message": "Merge branch 'master' into EnableConfigurationSchemaChecking", "committedDate": "2020-04-28T10:08:37Z", "type": "commit"}, {"oid": "c61a17045fa6bd0fe67a05876cf18d26f9c07be4", "url": "https://github.com/ibissource/iaf/commit/c61a17045fa6bd0fe67a05876cf18d26f9c07be4", "message": "Activate configuration validation, rename uglify to canonicalize", "committedDate": "2020-04-28T14:22:14Z", "type": "commit"}, {"oid": "54f0047f8804c377649ae853e7d2f0cba184b114", "url": "https://github.com/ibissource/iaf/commit/54f0047f8804c377649ae853e7d2f0cba184b114", "message": "revert format of monitoring config", "committedDate": "2020-04-28T14:24:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3OTU5Nw==", "url": "https://github.com/ibissource/iaf/pull/424#discussion_r418479597", "bodyText": "Zullen we getTweakedConfiguration ook hernoemen? Hij Tweaked niets?", "author": "nielsm5", "createdAt": "2020-05-01T09:39:18Z", "path": "core/src/main/java/nl/nn/adapterframework/configuration/ConfigurationUtils.java", "diffHunk": "@@ -99,13 +99,11 @@ public static String getActivatedConfiguration(Configuration configuration, Stri\n \t\treturn getTweakedConfiguration(configuration, originalConfig, ACTIVE_XSLT, null);\n \t}\n \n-\tpublic static String getUglifiedConfiguration(Configuration configuration, String originalConfig) throws ConfigurationException {\n-\t\treturn getTweakedConfiguration(configuration, originalConfig, UGLIFY_XSLT, null);\n+\tpublic static String getCanonicalizedConfiguration(Configuration configuration, String originalConfig) throws ConfigurationException {\n+\t\treturn getTweakedConfiguration(configuration, originalConfig, CANONINICALIZE_XSLT, null);", "originalCommit": "54f0047f8804c377649ae853e7d2f0cba184b114", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUxODk0MQ==", "url": "https://github.com/ibissource/iaf/pull/424#discussion_r418518941", "bodyText": "De getStubbedConfiguration, getActivatedConfiguration en getUglifiedConfiguration zijn min of meer voorbeelden van tweaks. De term is ontstaan toen we voor HEC migratie custom tweaks op de configs toe pasten. Het idee was/is om er iets generieks van te maken en ontwikkelaars in staat te stellen 1 of meerdere tweaks op hun configuratie te doen. De getStubbedConfiguration, getActivatedConfiguration en getUglifiedConfiguration zijn dan standaard/ingebouwde tweaks maar een Frank! ontwikkelaar zou zijn eigen tweak ook nog toe kunnen voegen.", "author": "jacodg", "createdAt": "2020-05-01T12:19:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3OTU5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYzNzQ0NA==", "url": "https://github.com/ibissource/iaf/pull/424#discussion_r418637444", "bodyText": "Mijn idee was ook om bij de show configuration alle verschillende transformaties te laten zien, dus niet alleen Original Configuration en Loaded Configuration maar een tabje voor het restultaat van iedere \"ConfigTweak\".", "author": "jacodg", "createdAt": "2020-05-01T17:09:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3OTU5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ3OTY1OA==", "url": "https://github.com/ibissource/iaf/pull/424#discussion_r418479658", "bodyText": "NINI ?", "author": "nielsm5", "createdAt": "2020-05-01T09:39:35Z", "path": "core/src/main/java/nl/nn/adapterframework/configuration/ConfigurationUtils.java", "diffHunk": "@@ -72,7 +72,7 @@\n \tprivate static final String STUB4TESTTOOL_VALIDATORS_DISABLED_KEY = \"validators.disabled\";\n \tprivate static final String STUB4TESTTOOL_XSLT = \"/xml/xsl/stub4testtool.xsl\";\n \tprivate static final String ACTIVE_XSLT = \"/xml/xsl/active.xsl\";\n-\tprivate static final String UGLIFY_XSLT = \"/xml/xsl/uglify.xsl\";\n+\tprivate static final String CANONINICALIZE_XSLT = \"/xml/xsl/canonicalize.xsl\";", "originalCommit": "54f0047f8804c377649ae853e7d2f0cba184b114", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "daa5eab776c5786e368177b5d8b728fa037aaeff", "url": "https://github.com/ibissource/iaf/commit/daa5eab776c5786e368177b5d8b728fa037aaeff", "message": "fix typo, rename getTweakedConfiguaration into transformConfiguration", "committedDate": "2020-05-01T10:19:08Z", "type": "commit"}]}