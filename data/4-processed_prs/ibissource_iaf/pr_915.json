{"pr_number": 915, "pr_title": "Make framework webapps runnable with Frank!Runner", "pr_createdAt": "2020-07-07T15:57:50Z", "pr_url": "https://github.com/ibissource/iaf/pull/915", "timeline": [{"oid": "36d3dfed28ab0a6b4c38391ada08bf5a2e3df951", "url": "https://github.com/ibissource/iaf/commit/36d3dfed28ab0a6b4c38391ada08bf5a2e3df951", "message": "Make framework webapps runnable with Frank!Runner", "committedDate": "2020-07-07T15:55:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwNjY1Mw==", "url": "https://github.com/ibissource/iaf/pull/915#discussion_r451006653", "bodyText": "Ik denk dat de bedoeling van deze file is om te voorkomen dat kopi\u00ebn van files die vanuit /iaf/webapp in een root folder terecht komen, niet ingecheckt worden. Dan is het goed om dat als commentaar in de file te vermelden, want je leest zomaar over die slashes aan het begin heen.\nHet lijkt alsof er source files ge-ignored moeten worden voor git, en dat is niet het geval.", "author": "gvanbrakel", "createdAt": "2020-07-07T16:51:40Z", "path": "test/src/main/webapp/.gitignore", "diffHunk": "@@ -1,2 +1,13 @@\n-META-INF/maven\n-META-INF/MANIFEST.MF\n\\ No newline at end of file\n+/iaf/\n+/images/\n+/js/\n+/jsp/\n+/larva/\n+/META-INF/maven/\n+/META-INF/MANIFEST.MF\n+/WEB-INF/\n+/body.css\n+/favicon.ico\n+/ie4.css\n+/ie55.css\n+/testtool", "originalCommit": "36d3dfed28ab0a6b4c38391ada08bf5a2e3df951", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM1MjUzNg==", "url": "https://github.com/ibissource/iaf/pull/915#discussion_r451352536", "bodyText": "Ik kan inderdaad wel even een comment toevoegen", "author": "jacodg", "createdAt": "2020-07-08T07:54:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwNjY1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwNzE0Nw==", "url": "https://github.com/ibissource/iaf/pull/915#discussion_r451007147", "bodyText": "Ik vind het niet heel charmant dat je de configuratie van DeploymentSpecifics.properties hier nog eens over moet doen.\nKan dat niet anders?", "author": "gvanbrakel", "createdAt": "2020-07-07T16:52:29Z", "path": "test/build.xml", "diffHunk": "@@ -0,0 +1,26 @@\n+<project default=\"restart-iaf-test\">\n+\t<target name=\"restart-iaf-test\">\n+\t\t<exec executable=\"../../frank-runner/restart.bat\" vmlauncher=\"false\" failonerror=\"true\">\n+\t\t\t<arg value=\"-Dproject.dir=iaf/test\"/>\n+\t\t\t<!--\n+\t\t\tOptionally change application.server.type.custom as described in StageSpecifics_LOC.properties\n+\t\t\tPlease note that ACTIVEMQ requires extra jar files that the Frank!Runner doesn't download yet, see:\n+\t\t\thttps://github.com/ibissource/iaf/blob/master/TESTING_WITH_IAF-TEST.md#1-proprietary-modules-and-jar-dependencies\n+\t\t\t<arg value=\"-Dapplication.server.type.custom=ACTIVEMQ\"/>\n+\t\t\t-->\n+\t\t\t<!-- Set .configurationFile and .basePath properties specified in DeploymentSpecifics.properties back to default values -->\n+\t\t\t<arg value=\"-Dconfigurations.MainConfig.configurationFile=Configuration.xml\"/>\n+\t\t\t<arg value=\"-Dconfigurations.MainConfig.basePath=MainConfig\"/>\n+\t\t\t<arg value=\"-Dconfigurations.HTTP.configurationFile=Configuration.xml\"/>\n+\t\t\t<arg value=\"-Dconfigurations.HTTP.basePath=HTTP\"/>\n+\t\t\t<arg value=\"-Dconfigurations.UTIL.configurationFile=Configuration.xml\"/>\n+\t\t\t<arg value=\"-Dconfigurations.UTIL.basePath=UTIL\"/>\n+\t\t\t<arg value=\"-Dconfigurations.TX.configurationFile=Configuration.xml\"/>\n+\t\t\t<arg value=\"-Dconfigurations.TX.basePath=TX\"/>\n+\t\t\t<arg value=\"-Dconfigurations.JDBC.configurationFile=Configuration.xml\"/>\n+\t\t\t<arg value=\"-Dconfigurations.JDBC.basePath=JDBC\"/>\n+\t\t\t<arg value=\"-Dconfigurations.JMS.configurationFile=Configuration.xml\"/>\n+\t\t\t<arg value=\"-Dconfigurations.JMS.basePath=JMS\"/>", "originalCommit": "36d3dfed28ab0a6b4c38391ada08bf5a2e3df951", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM2MTY5MQ==", "url": "https://github.com/ibissource/iaf/pull/915#discussion_r451361691", "bodyText": "Als die regels uit de DeploymentSpecifics.properties worden verwijderd (zodat de framework defaults worden gebruikt) dan zijn deze regels ook niet in de build.xml nodig. Ik weet niet direct waarom er voor is gekozen het op deze manier in de DeploymentSpecifics.properties te zetten, wilde dat niet zomaar aanpassen zodat ook de bestaande werkwijze in Eclipse blijft werken. Maar nu ik er nog even naar kijk, misschien kunnen we het volgende in de pom.xml:\n\t\t\t\t\t\t<directory>src/main/configurations</directory>\n\t\t\t\t\t\t<targetPath>WEB-INF/classes/configurations</targetPath>\n\nAanpassen naar:\n\t\t\t\t\t\t<directory>src/main/configurations</directory>\n\t\t\t\t\t\t<targetPath>WEB-INF/classes</targetPath>\n\nDan zijn de regels in de DeploymentSpecifics.properties volgens mij niet meer nodig.\nHet valt wel op dat niet voor alle configuraties hetzelfde is gedaan in de DeploymentSpecifics.properties. Sommige hebben een aangepast basePath en sommige niet. Is dat bewust om verschillende manieren te testen? En willen we dat blijven testen? Of is het gewoon niet zo consequent ingesteld en kunnen we het verwijderen (terug gaan naar defaults)?\nEen andere optie zou zijn om de Frank!Runner de regels in de DeploymentSpecifics.properties te laten gebruiken maar dan worden de configuraties geladen uit het classpath (wat voor draaien op DEV wel handig is) maar dan moet je bij iedere config aanpassing een herstart doen. De Frank!Runner zorgt er zoals het nu is gedaan voor dat er directory classloaders worden gebruikt zodat je de config in je project aan kan passen en dan een reload in de console kan doen.", "author": "jacodg", "createdAt": "2020-07-08T08:10:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwNzE0Nw=="}], "type": "inlineReview"}, {"oid": "46295269a724d53e8b222c12b05df32a99d4fbe9", "url": "https://github.com/ibissource/iaf/commit/46295269a724d53e8b222c12b05df32a99d4fbe9", "message": "Add comment to gitignore", "committedDate": "2020-07-08T16:30:27Z", "type": "commit"}, {"oid": "b14b9129962c62c78ed1668f889276bc30e58e7d", "url": "https://github.com/ibissource/iaf/commit/b14b9129962c62c78ed1668f889276bc30e58e7d", "message": "Use default configurationFile and basePath for configurations", "committedDate": "2020-07-08T16:33:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY2MTg0NQ==", "url": "https://github.com/ibissource/iaf/pull/915#discussion_r452661845", "bodyText": "Volgens mij stond dit juist hier zo om de verschillende manieren van configureren te testen", "author": "gvanbrakel", "createdAt": "2020-07-10T07:08:13Z", "path": "test/src/main/resources/DeploymentSpecifics.properties", "diffHunk": "@@ -25,15 +25,6 @@ manageDatabase.active=true\n manageDatabase.webServiceListener.active=false\n \n configurations.names=${instance.name},MainConfig,HTTP,UTIL,TX,JDBC,JMS\n-configurations.MainConfig.configurationFile=configurations/MainConfig/Configuration.xml\n-configurations.HTTP.configurationFile=configurations/HTTP/Configuration.xml\n-configurations.UTIL.configurationFile=Configuration.xml\n-configurations.UTIL.basePath=configurations/UTIL/\n-configurations.TX.configurationFile=configurations/TX/Configuration.xml\n-configurations.JDBC.configurationFile=configurations/JDBC/Configuration.xml\n-configurations.JDBC.basePath=configurations/JDBC/\n-#configurations.JMS.configurationFile=configurations/JMS/Configuration.xml\n-configurations.JMS.basePath=configurations/JMS/", "originalCommit": "b14b9129962c62c78ed1668f889276bc30e58e7d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg0NTAwNA==", "url": "https://github.com/ibissource/iaf/pull/915#discussion_r452845004", "bodyText": "Mocht je alles via een DirectoryClassLoader will doen, kan je ook de configurations.directory property zetten en configurations.directory.autoLoad=true gebruiken, dan hoef je niet alles expliciet te zetten..", "author": "nielsm5", "createdAt": "2020-07-10T13:31:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY2MTg0NQ=="}], "type": "inlineReview"}, {"oid": "ce93cb0bebaec9e099df5b9ca485bb73b42998c5", "url": "https://github.com/ibissource/iaf/commit/ce93cb0bebaec9e099df5b9ca485bb73b42998c5", "message": "Use custom configurations.dir instead of default configurationFile and basePath", "committedDate": "2020-07-13T12:59:10Z", "type": "commit"}]}