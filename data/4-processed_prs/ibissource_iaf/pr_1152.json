{"pr_number": 1152, "pr_title": "Fix IbisDoc Larva tests", "pr_createdAt": "2020-10-15T17:35:22Z", "pr_url": "https://github.com/ibissource/iaf/pull/1152", "timeline": [{"oid": "65b315f2d6435191a4a051d6ee4d829a1a90274e", "url": "https://github.com/ibissource/iaf/commit/65b315f2d6435191a4a051d6ee4d829a1a90274e", "message": "Work in progress - fixing the IbisDoc tests", "committedDate": "2020-10-15T13:48:06Z", "type": "commit"}, {"oid": "40c29efcc360da6d1d7b29a2d4b4efc6e75f8c31", "url": "https://github.com/ibissource/iaf/commit/40c29efcc360da6d1d7b29a2d4b4efc6e75f8c31", "message": "Finish fixing the IbisDoc Larva tests", "committedDate": "2020-10-15T17:27:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE1NzcyNg==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506157726", "bodyText": "Hier verander je puur en import, dit vervuilt die git history en maakt git-blame onoverzichtelijker. Omdat er verder niets anders veranderd is in dit bestand, zou jij dit terug kunnen draaien?", "author": "nielsm5", "createdAt": "2020-10-16T08:18:03Z", "path": "core/src/main/java/nl/nn/adapterframework/doc/InfoBuilderSource.java", "diffHunk": "@@ -42,8 +42,8 @@\n import org.springframework.util.Assert;\n import org.xml.sax.SAXException;\n \n-import nl.nn.adapterframework.doc.objects.IbisBean;\n import nl.nn.adapterframework.doc.objects.ChildIbisBeanMapping;\n+import nl.nn.adapterframework.doc.objects.IbisBean;", "originalCommit": "40c29efcc360da6d1d7b29a2d4b4efc6e75f8c31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjMwNDU4OQ==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506304589", "bodyText": "Dit is ontstaan door Ctrl-Shift-O in Eclipse. Als jullie deze omwisseling van imports nu accepteren, dan kan iedere developer na mij vrijelijk editen, Ctrl-Shift-O doen en edits ongedaan maken zonder dat dit probleem weer optreedt. Wat vind je daarvan?", "author": "mhdirkse", "createdAt": "2020-10-16T11:12:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE1NzcyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQyMDYyNQ==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506420625", "bodyText": "Er komen wijzigingen bij. Wordt het dan acceptabel om de Ctrl-Shift-O te laten passeren?", "author": "mhdirkse", "createdAt": "2020-10-16T13:28:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE1NzcyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE1OTQxMA==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506159410", "bodyText": "Gelieve geen proprietary dependencies in de parent pom. Deze dependency is zeer specifiek voor de IFSA module, dat hoort hij dan ook thuis.", "author": "nielsm5", "createdAt": "2020-10-16T08:19:51Z", "path": "pom.xml", "diffHunk": "@@ -67,6 +67,12 @@\n         <artifactId>ibis-adapterframework-ifsa</artifactId>\n         <version>7.6-SNAPSHOT</version>\n       </dependency>\n+      <dependency>\n+        <groupId>com.ing</groupId>\n+        <artifactId>ifsa-jms-xa</artifactId>\n+        <version>22.10.055</version>\n+        <scope>provided</scope>\n+      </dependency>", "originalCommit": "40c29efcc360da6d1d7b29a2d4b4efc6e75f8c31", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE2MDk2NA==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506160964", "bodyText": "Dit moet je niet standaard in de project file opnemen. Het is een proprietary module! (en de naam klopt ook niet, dan zou het iaf-ifsa moeten zijn?)", "author": "nielsm5", "createdAt": "2020-10-16T08:21:26Z", "path": "test/.project", "diffHunk": "@@ -4,6 +4,7 @@\n \t<comment></comment>\n \t<projects>\n \t\t<project>iaf-core</project>\n+\t\t<project>ibis-adapterframework-ifsa</project>", "originalCommit": "40c29efcc360da6d1d7b29a2d4b4efc6e75f8c31", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE2MjIyNg==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506162226", "bodyText": "Er is een proprietary profiel dat alle proprietary modules aanzet, een van die modules is IFSA, daar komt deze dependency uit. Waarom heb je deze hier los ingezet?", "author": "nielsm5", "createdAt": "2020-10-16T08:22:37Z", "path": "test/pom.xml", "diffHunk": "@@ -154,5 +154,15 @@\n \t\t\t\t</dependency>\n \t\t </dependencies>\n \t\t</profile>\n+\t\t<profile>\n+\t\t\t<id>proprietary</id>\n+\t\t\t<dependencies>\n+\t\t\t\t<dependency>\n+\t\t\t\t\t<groupId>com.ing</groupId>\n+\t\t\t\t\t<artifactId>ifsa-jms-xa</artifactId>\n+\t\t\t\t\t<scope>runtime</scope>\n+\t\t\t\t</dependency>\n+\t\t\t</dependencies>\n+\t\t</profile>", "originalCommit": "40c29efcc360da6d1d7b29a2d4b4efc6e75f8c31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjI2MDM1MQ==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506260351", "bodyText": "Deze dependency ifsa-jms-xa staat in de pom.xml van ons WeAreFrank! Ifsa project. Maar hij staat daar met scope \"provided\". Daardoor werd deze .jar niet opgenomen in de Ibis4Test war. Onze IbisDoc code produceert daardoor een exception als hij voor een van onze IfsaProviderListener classes \"Class.forName()\" doet. Ik denk dat er Aspect Oriented Programming is gebruikt en dat we Ladybug aanroepen bij het laden van IfsaProviderListener. Het betreffende advice zou dan proberen een Ifsa class te laden, resulterend in de exception.\nDeze fix verandert de scope van de Ifsa dependency van \"provided\" naar \"runtime\", waardoor hij in de ibis4test .war komt. Door deze noemen we de Ifsa dependency op verschillende plaaten: hier in de Ibis4Test pom en in ons Ifsa project. We willen de versie \"22.10.055\" niet twee keer noemen, vandaar dat ik de dependencyManagement van de parent pom heb aangepast.", "author": "mhdirkse", "createdAt": "2020-10-16T10:18:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE2MjIyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE2MzQxNw==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506163417", "bodyText": "Er zitten nu ook geen SAP/Coolgen/IBM/Tibco modules in de standaard IbisDoc. IFSA hoeft er ook niet in.", "author": "nielsm5", "createdAt": "2020-10-16T08:23:45Z", "path": "test/src/test/resources/TestTool/IbisDoc/all.html", "diffHunk": "@@ -17,7 +17,9 @@\n <a href='JmsListener.html' target='contentFrame'>JmsListener</a>&nbsp;[<a href='https://javadoc.ibissource.org/latest/nl/nn/adapterframework/jms/JmsListener.html' target='contentFrame'>javadoc</a>]<br/>\n <a href='MessageStoreListener.html' target='contentFrame'>MessageStoreListener</a>&nbsp;[<a href='https://javadoc.ibissource.org/latest/nl/nn/adapterframework/jdbc/MessageStoreListener.html' target='contentFrame'>javadoc</a>]<br/>\n <a href='MqttListener.html' target='contentFrame'>MqttListener</a>&nbsp;[<a href='https://javadoc.ibissource.org/latest/nl/nn/adapterframework/extensions/mqtt/MqttListener.html' target='contentFrame'>javadoc</a>]<br/>\n+<a href='PullingIfsaProviderListener.html' target='contentFrame'>PullingIfsaProviderListener</a>&nbsp;[<a href='https://javadoc.ibissource.org/latest/nl/nn/adapterframework/extensions/ifsa/jms/PullingIfsaProviderListener.html' target='contentFrame'>javadoc</a>]<br/>\n <a href='PullingJmsListener.html' target='contentFrame'>PullingJmsListener</a>&nbsp;[<a href='https://javadoc.ibissource.org/latest/nl/nn/adapterframework/jms/PullingJmsListener.html' target='contentFrame'>javadoc</a>]<br/>\n+<a href='PushingIfsaProviderListener.html' target='contentFrame'>PushingIfsaProviderListener</a>&nbsp;[<a href='https://javadoc.ibissource.org/latest/nl/nn/adapterframework/extensions/ifsa/jms/PushingIfsaProviderListener.html' target='contentFrame'>javadoc</a>]<br/>", "originalCommit": "40c29efcc360da6d1d7b29a2d4b4efc6e75f8c31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjI2MzY0NA==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506263644", "bodyText": "Als alle IFSA uit syntax 2 mag, dan weet ik een simpele fix. We kunnen hem excluden bij het zoeken van de Spring Beans. Dan  is er geen reden meer om de Ifsa dependency binnen te halen zoals je hierboven becritiseert. We zijn dan ook van een warning af dat IbisProviderListener niet geladen kan worden. Wil je dat?", "author": "mhdirkse", "createdAt": "2020-10-16T10:22:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjE2MzQxNw=="}], "type": "inlineReview"}, {"oid": "f085b18612869c967d79a04b16fd22f0c6d00f51", "url": "https://github.com/ibissource/iaf/commit/f085b18612869c967d79a04b16fd22f0c6d00f51", "message": "Undo unwanted changes and add more excludes to avoid Ifsa in docs", "committedDate": "2020-10-16T13:24:35Z", "type": "commit"}, {"oid": "2b0022d9721ac3e44e66ad2d011606e88597c4ff", "url": "https://github.com/ibissource/iaf/commit/2b0022d9721ac3e44e66ad2d011606e88597c4ff", "message": "Undo changes of .project", "committedDate": "2020-10-16T13:25:55Z", "type": "commit"}, {"oid": "b8550782686dc82d4a3d13264ccb5851e0dc41c2", "url": "https://github.com/ibissource/iaf/commit/b8550782686dc82d4a3d13264ccb5851e0dc41c2", "message": "Undo change of test/.project", "committedDate": "2020-10-16T13:29:56Z", "type": "commit"}, {"oid": "45ee0ad7abee6f7dd5f32b36b8e28f137aa5a59c", "url": "https://github.com/ibissource/iaf/commit/45ee0ad7abee6f7dd5f32b36b8e28f137aa5a59c", "message": "Add backwards compatible deprecated setProxyUserName()", "committedDate": "2020-10-16T13:54:05Z", "type": "commit"}, {"oid": "e1218f43e0da85a7a22a0a9f76e53abdc59caec3", "url": "https://github.com/ibissource/iaf/commit/e1218f43e0da85a7a22a0a9f76e53abdc59caec3", "message": "Accept FrankDoc results as they are now", "committedDate": "2020-10-16T15:33:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU2MDkxNg==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506560916", "bodyText": "Hier moet niet de IfsaProviderListener er helemaal uit vallen, maar vervangen worden door nl.nn.adapterframework.extensions.ifsa.jms.IfsaProviderListener.", "author": "gvanbrakel", "createdAt": "2020-10-16T15:45:49Z", "path": "core/src/main/resources/xml/xsl/uglify_lookup.xml", "diffHunk": "@@ -49,11 +49,6 @@\n     <Type>listener</Type>\n     <ClassName>nl.nn.adapterframework.http.HttpListener</ClassName>\n   </Element>\n-  <Element>\n-    <Name>IfsaProviderListener</Name>\n-    <Type>listener</Type>\n-    <ClassName>nl.nn.adapterframework.extensions.ifsa.ejb.IfsaProviderListener</ClassName>\n-  </Element>", "originalCommit": "e1218f43e0da85a7a22a0a9f76e53abdc59caec3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzUzMTg5OA==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r507531898", "bodyText": "uglify_lookup.xml is generated, like ibisdoc.xsd is. In an earlier version of this pull request, I could get IfsaProviderListener included, but I did so by unwanted changes to the pom.xml files. Gerrit, we had a phone call about this. You said you agree now that IfsaProviderListener is omitted.", "author": "mhdirkse", "createdAt": "2020-10-19T07:35:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU2MDkxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU2NDA4OA==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506564088", "bodyText": "Ik denk niet dat het nodig is om deze ifsa classes expliciet te excluden. Het is niet erg als ze niet gevonden worden, maar helemaal onderdrukken hoeft ook niet.", "author": "gvanbrakel", "createdAt": "2020-10-16T15:49:27Z", "path": "core/src/main/java/nl/nn/adapterframework/doc/InfoBuilderSource.java", "diffHunk": "@@ -122,7 +122,12 @@\n \tstatic {\n \t\t// Exclude classes that will give conflicts with existing, non-compatible bean definition of same name and class\n \t\texcludeFilters.add(\"nl\\\\.nn\\\\.adapterframework\\\\.extensions\\\\.esb\\\\.WsdlGeneratorPipe\");\n+\t\texcludeFilters.add(\"nl\\\\.nn\\\\.adapterframework\\\\.extensions\\\\.ifsa\\\\.jms\\\\.IfsaFacade\");\n+\t\texcludeFilters.add(\"nl\\\\.nn\\\\.adapterframework\\\\.extensions\\\\.ifsa\\\\.jms\\\\.IfsaRequesterSender\");\n \t\texcludeFilters.add(\"nl\\\\.nn\\\\.adapterframework\\\\.extensions\\\\.ifsa\\\\.IfsaRequesterSender\");\n+\t\texcludeFilters.add(\"nl\\\\.nn\\\\.adapterframework\\\\.extensions\\\\.ifsa\\\\.jms\\\\.PullingIfsaProviderListener\");\n+\t\texcludeFilters.add(\"nl\\\\.nn\\\\.adapterframework\\\\.extensions\\\\.ifsa\\\\.jms\\\\.PushingIfsaProviderListener\");\n+\t\texcludeFilters.add(\"nl\\\\.nn\\\\.adapterframework\\\\.extensions\\\\.ifsa\\\\.jms.IfsaProviderListener\");", "originalCommit": "e1218f43e0da85a7a22a0a9f76e53abdc59caec3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjU2NTI1NQ==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r506565255", "bodyText": "Hier kan je ook nog wel een proxyUsername toevoegen", "author": "gvanbrakel", "createdAt": "2020-10-16T15:50:45Z", "path": "cmis/src/main/java/nl/nn/adapterframework/extensions/cmis/CmisHttpInvoker.java", "diffHunk": "@@ -69,7 +69,7 @@ private CmisHttpSender getInstance(BindingSession session) throws SenderExceptio\n \t\t\t\tif(session.get(\"proxyPort\") != null)\n \t\t\t\t\tsender.setProxyPort(Integer.parseInt((String) session.get(\"proxyPort\")));\n \t\t\t\tif(session.get(\"proxyUserName\") != null)\n-\t\t\t\t\tsender.setProxyUserName((String) session.get(\"proxyUserName\"));", "originalCommit": "e1218f43e0da85a7a22a0a9f76e53abdc59caec3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4b05ccd9656ad5a6950ac693ca5a484c182aed3b", "url": "https://github.com/ibissource/iaf/commit/4b05ccd9656ad5a6950ac693ca5a484c182aed3b", "message": "Follow-up review comments, not yet tested", "committedDate": "2020-10-19T08:00:06Z", "type": "commit"}, {"oid": "e7db6f596837c0e5c99f3efd2d2765267714db37", "url": "https://github.com/ibissource/iaf/commit/e7db6f596837c0e5c99f3efd2d2765267714db37", "message": "Forgot a local variable username instead of userName", "committedDate": "2020-10-19T08:19:04Z", "type": "commit"}, {"oid": "cc294b1bd0fad9c8c60d768ee84d93f93107524d", "url": "https://github.com/ibissource/iaf/commit/cc294b1bd0fad9c8c60d768ee84d93f93107524d", "message": "Fix expected ibisdoc.xsd", "committedDate": "2020-10-19T08:28:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2ODg2Mw==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r508268863", "bodyText": "De attributen die Frank!Ontwikkelaars zetten hebben geen set prefix, zou jij de naam aan kunnen passen door set weg te laten?", "author": "nielsm5", "createdAt": "2020-10-20T07:27:26Z", "path": "core/src/main/java/nl/nn/adapterframework/http/HttpSenderBase.java", "diffHunk": "@@ -894,9 +895,14 @@ public String getProxyAuthAlias() {\n \t}\n \n \t@IbisDoc({\"33\", \"proxy username\", \" \"})\n-\tpublic void setProxyUserName(String string) {\n+\tpublic void setProxyUsername(String string) {\n \t\tproxyUserName = string;\n \t}\n+\t@Deprecated\n+\t@ConfigurationWarning(\"Please use \\\"setProxyUsername\\\" instead\")", "originalCommit": "cc294b1bd0fad9c8c60d768ee84d93f93107524d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxMDI3Ng==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r508310276", "bodyText": "Gedaan.", "author": "mhdirkse", "createdAt": "2020-10-20T08:31:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI2ODg2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MDAzMQ==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r508270031", "bodyText": "Het zou mooi zijn als je de getter ook gelijk update", "author": "nielsm5", "createdAt": "2020-10-20T07:29:21Z", "path": "core/src/main/java/nl/nn/adapterframework/http/HttpSenderBase.java", "diffHunk": "@@ -894,9 +895,14 @@ public String getProxyAuthAlias() {\n \t}\n \n \t@IbisDoc({\"33\", \"proxy username\", \" \"})\n-\tpublic void setProxyUserName(String string) {\n+\tpublic void setProxyUsername(String string) {\n \t\tproxyUserName = string;\n \t}\n+\t@Deprecated\n+\t@ConfigurationWarning(\"Please use \\\"setProxyUsername\\\" instead\")\n+\tpublic void setProxyUserName(String string) {\n+\t\tsetProxyUsername(string);\n+\t}\n \tpublic String getProxyUserName() {", "originalCommit": "cc294b1bd0fad9c8c60d768ee84d93f93107524d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMwOTk1Mg==", "url": "https://github.com/ibissource/iaf/pull/1152#discussion_r508309952", "bodyText": "Gedaan.", "author": "mhdirkse", "createdAt": "2020-10-20T08:30:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI3MDAzMQ=="}], "type": "inlineReview"}, {"oid": "b37f049c151609e1d9ff14d82ea0975060f0d1f7", "url": "https://github.com/ibissource/iaf/commit/b37f049c151609e1d9ff14d82ea0975060f0d1f7", "message": "Follow Niels' review comments", "committedDate": "2020-10-20T08:27:12Z", "type": "commit"}]}