{"pr_number": 6260, "pr_title": "docs: docs for new KEY_FORMAT property and associated server configs", "pr_createdAt": "2020-09-18T20:37:57Z", "pr_url": "https://github.com/confluentinc/ksql/pull/6260", "timeline": [{"oid": "cb3082bed5577a0063a7c1a046af8b23a4ff93b9", "url": "https://github.com/confluentinc/ksql/commit/cb3082bed5577a0063a7c1a046af8b23a4ff93b9", "message": "docs: docs for new KEY_FORMAT property and associated server configs", "committedDate": "2020-09-18T20:26:20Z", "type": "commit"}, {"oid": "740907004b2fab59960d709ecfa3f81454e27eff", "url": "https://github.com/confluentinc/ksql/commit/740907004b2fab59960d709ecfa3f81454e27eff", "message": "docs: add KEY_FORMAT examples", "committedDate": "2020-09-18T20:26:20Z", "type": "commit"}, {"oid": "af4f1105a2b1eb725fe43289e3990a18938b9773", "url": "https://github.com/confluentinc/ksql/commit/af4f1105a2b1eb725fe43289e3990a18938b9773", "message": "docs: feedback", "committedDate": "2020-09-18T20:26:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzODA2OQ==", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r491938069", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n          \n          \n            \n            | VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n          \n          \n            \n            | KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the left-most input stream/table is used. |\n          \n          \n            \n            | VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the left-most input stream/table is used. |", "author": "big-andy-coates", "createdAt": "2020-09-21T10:25:23Z", "path": "docs/developer-guide/ksqldb-reference/create-stream-as-select.md", "diffHunk": "@@ -75,7 +75,9 @@ The WITH clause for the result supports the following properties:\n |     Property      |                                             Description                                              |\n | ----------------- | ---------------------------------------------------------------------------------------------------- |\n | KAFKA_TOPIC       | The name of the Kafka topic that backs this stream. If this property is not set, then the name of the stream in upper case will be used as default. |\n-| VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format of the input stream/table is used. |\n+| KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n+| VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |", "originalCommit": "af4f1105a2b1eb725fe43289e3990a18938b9773", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzODI4OQ==", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r491938289", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n          \n          \n            \n            | VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n          \n          \n            \n            | KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the left-most input stream/table is used. |\n          \n          \n            \n            | VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the left-most input stream/table is used. |", "author": "big-andy-coates", "createdAt": "2020-09-21T10:25:51Z", "path": "docs/developer-guide/ksqldb-reference/create-table-as-select.md", "diffHunk": "@@ -79,7 +79,9 @@ The WITH clause supports the following properties:\n |     Property      |                                             Description                                              |\n | ----------------- | ---------------------------------------------------------------------------------------------------- |\n | KAFKA_TOPIC       | The name of the Kafka topic that backs this table. If this property is not set, then the name of the table will be used as default. |\n-| VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, then the format of the input stream/table is used. |\n+| KEY_FORMAT        | Specifies the serialization format of the message key in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |\n+| VALUE_FORMAT      | Specifies the serialization format of the message value in the topic. For supported formats, see [Serialization Formats](../serialization.md#serialization-formats). If this property is not set, the format from the input stream/table is used. |", "originalCommit": "af4f1105a2b1eb725fe43289e3990a18938b9773", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzOTE2Nw==", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r491939167", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The default value for this configuration is `KAFKA`.\n          \n          \n            \n            The default value for this configuration is `KAFKA`.\n          \n          \n            \n            \n          \n          \n            \n            If not set and no explicit format is provided in the statement, via either the `KEY_FORMAT` or the `FORMAT` property, the statement will be rejected as invalid.", "author": "big-andy-coates", "createdAt": "2020-09-21T10:27:46Z", "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -282,6 +282,29 @@ The corresponding environment variable in the\n [ksqlDB Server image](https://hub.docker.com/r/confluentinc/ksqldb-server/)\n is `KSQL_KSQL_FUNCTIONS_SUBSTRING_LEGACY_ARGS`.\n \n+### ksql.persistence.default.format.key\n+\n+Sets the default value for the `KEY_FORMAT` property if one is\n+not supplied explicitly in [CREATE TABLE](../../../developer-guide/ksqldb-reference/create-table.md)\n+or [CREATE STREAM](../../../developer-guide/ksqldb-reference/create-stream.md)\n+statements.\n+\n+The default value for this configuration is `KAFKA`.", "originalCommit": "af4f1105a2b1eb725fe43289e3990a18938b9773", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzOTMxNA==", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r491939314", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If not set and no explicit value is provided in the statement, via either the `VALUE_FORMAT` or the\n          \n          \n            \n            `FORMAT` property, an error will be thrown.\n          \n          \n            \n            If not set and no explicit value is provided in the statement, via either the `VALUE_FORMAT` or the\n          \n          \n            \n            `FORMAT` property, the statement will be rejected as invalid.", "author": "big-andy-coates", "createdAt": "2020-09-21T10:28:01Z", "path": "docs/operate-and-deploy/installation/server-config/config-reference.md", "diffHunk": "@@ -282,6 +282,29 @@ The corresponding environment variable in the\n [ksqlDB Server image](https://hub.docker.com/r/confluentinc/ksqldb-server/)\n is `KSQL_KSQL_FUNCTIONS_SUBSTRING_LEGACY_ARGS`.\n \n+### ksql.persistence.default.format.key\n+\n+Sets the default value for the `KEY_FORMAT` property if one is\n+not supplied explicitly in [CREATE TABLE](../../../developer-guide/ksqldb-reference/create-table.md)\n+or [CREATE STREAM](../../../developer-guide/ksqldb-reference/create-stream.md)\n+statements.\n+\n+The default value for this configuration is `KAFKA`.\n+\n+For supported formats, see [Serialization Formats](../../../developer-guide/serialization.md#serialization-formats).\n+\n+### ksql.persistence.default.format.value\n+\n+Sets the default value for the `VALUE_FORMAT` property if one is\n+not supplied explicitly in [CREATE TABLE](../../../developer-guide/ksqldb-reference/create-table.md)\n+or [CREATE STREAM](../../../developer-guide/ksqldb-reference/create-stream.md)\n+statements.\n+\n+If not set and no explicit value is provided in the statement, via either the `VALUE_FORMAT` or the\n+`FORMAT` property, an error will be thrown.", "originalCommit": "af4f1105a2b1eb725fe43289e3990a18938b9773", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjMwNjkyMw==", "url": "https://github.com/confluentinc/ksql/pull/6260#discussion_r492306923", "bodyText": "Ah sorry, not sure how I lost this comment from your last round of reviews. Fixed!", "author": "vcrfxia", "createdAt": "2020-09-21T19:49:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkzOTMxNA=="}], "type": "inlineReview"}, {"oid": "8ab1774b8b6d1425981b2557463bd3ed867eb772", "url": "https://github.com/confluentinc/ksql/commit/8ab1774b8b6d1425981b2557463bd3ed867eb772", "message": "Merge branch 'master' into key-format-docs", "committedDate": "2020-09-21T19:45:28Z", "type": "commit"}, {"oid": "b254fb1c0fed35a52cf3d8b6e79f72ca604eabf9", "url": "https://github.com/confluentinc/ksql/commit/b254fb1c0fed35a52cf3d8b6e79f72ca604eabf9", "message": "docs: feedback", "committedDate": "2020-09-21T19:48:56Z", "type": "commit"}, {"oid": "070dca0d79562eeff732c4b0a3e1ba2d19bccdf0", "url": "https://github.com/confluentinc/ksql/commit/070dca0d79562eeff732c4b0a3e1ba2d19bccdf0", "message": "docs: update create-a-stream and create-a-table", "committedDate": "2020-09-23T13:27:14Z", "type": "commit"}]}