{"pr_number": 4626, "pr_title": "docs: document healthcheck for ksqlDB headless containers (DOCS-3066)", "pr_createdAt": "2020-02-25T18:16:34Z", "pr_url": "https://github.com/confluentinc/ksql/pull/4626", "timeline": [{"oid": "131017bf9446ef0dafed0340bcb220450efeb5ca", "url": "https://github.com/confluentinc/ksql/commit/131017bf9446ef0dafed0340bcb220450efeb5ca", "message": "docs: document healthcheck for ksqlDB headless containers (DOCS-3066)", "committedDate": "2020-02-25T18:05:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA2NDI1MQ==", "url": "https://github.com/confluentinc/ksql/pull/4626#discussion_r384064251", "bodyText": "Is this recommendation Docker-specific? Seems like it would be applicable for native deployments as well.", "author": "mikebin", "createdAt": "2020-02-25T19:03:55Z", "path": "docs-md/operate-and-deploy/installation/check-ksqldb-server-health.md", "diffHunk": "@@ -80,4 +80,29 @@ If you're running ksqlDB server in a Docker container, run the\n the `ksql-server` container is `Up`. Check the health of the process in\n the container by running `docker logs <ksql-server-container-id>`.\n \n-Page last revised on: {{ git_revision_date }}\n+Check a headless ksqlDB Server running in a Docker Container ", "originalCommit": "131017bf9446ef0dafed0340bcb220450efeb5ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE3MDQzOQ==", "url": "https://github.com/confluentinc/ksql/pull/4626#discussion_r384170439", "bodyText": "@mikebin I reworked this section to be more general.", "author": "JimGalasyn", "createdAt": "2020-02-25T22:40:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA2NDI1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA3NDU2NA==", "url": "https://github.com/confluentinc/ksql/pull/4626#discussion_r384074564", "bodyText": "Would using the built in script ksql-print-metrics <port=NNNN> be an alternative? Not sure it's any better, but it's an out-of-the-box option to consider.", "author": "mikebin", "createdAt": "2020-02-25T19:23:42Z", "path": "docs-md/operate-and-deploy/installation/check-ksqldb-server-health.md", "diffHunk": "@@ -80,4 +80,29 @@ If you're running ksqlDB server in a Docker container, run the\n the `ksql-server` container is `Up`. Check the health of the process in\n the container by running `docker logs <ksql-server-container-id>`.\n \n-Page last revised on: {{ git_revision_date }}\n+Check a headless ksqlDB Server running in a Docker Container \n+------------------------------------------------------------\n+\n+A headless deployment of ksqlDB Server doesn't have a REST server that you can\n+query for health. Instead, you can probe the JMX port for liveness. A JMX probe\n+is the most reliable way to determine readiness of a headless deployment.\n+\n+The following command probes the JMX port by using the Netcat utility.\n+\n+```bash\n+nc -z <ksql-node>:1099", "originalCommit": "131017bf9446ef0dafed0340bcb220450efeb5ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDE3MDY5NA==", "url": "https://github.com/confluentinc/ksql/pull/4626#discussion_r384170694", "bodyText": "@mikebin I made this more prominent earlier in the topic.", "author": "JimGalasyn", "createdAt": "2020-02-25T22:40:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA3NDU2NA=="}], "type": "inlineReview"}, {"oid": "1eb54d87937c6a77d24e64206797741b658ea3a8", "url": "https://github.com/confluentinc/ksql/commit/1eb54d87937c6a77d24e64206797741b658ea3a8", "message": "docs: incorporate feedback and refactor topic a bit", "committedDate": "2020-02-25T22:39:18Z", "type": "commit"}]}