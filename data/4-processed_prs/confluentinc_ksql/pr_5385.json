{"pr_number": 5385, "pr_title": "feat: INSTR function #881", "pr_createdAt": "2020-05-18T10:53:33Z", "pr_url": "https://github.com/confluentinc/ksql/pull/5385", "timeline": [{"oid": "123fa34b6e176b22ccdc8f52b583b2b4264e7a79", "url": "https://github.com/confluentinc/ksql/commit/123fa34b6e176b22ccdc8f52b583b2b4264e7a79", "message": "feat: INSTR function #881\n\nAdds implementation of INSTR function", "committedDate": "2020-05-18T10:48:55Z", "type": "commit"}, {"oid": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "url": "https://github.com/confluentinc/ksql/commit/ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "message": "Implements #881: additiona unit tests, fixed implementation, functional tests and documentation", "committedDate": "2020-05-19T09:53:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxODA1Mg==", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427518052", "bodyText": "we should specify here what it means to have negative position", "author": "agavra", "createdAt": "2020-05-19T18:37:45Z", "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).\n+If `position` is given search starts from that position. ", "originalCommit": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxODY3MQ==", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427518671", "bodyText": "let's fill this out \ud83d\ude02", "author": "agavra", "createdAt": "2020-05-19T18:38:48Z", "path": "ksqldb-engine/src/main/java/io/confluent/ksql/function/udf/string/Instr.java", "diffHunk": "@@ -0,0 +1,66 @@\n+/*\n+ * Copyright 2018 Confluent Inc.\n+ *\n+ * Licensed under the Confluent Community License (the \"License\"); you may not use\n+ * this file except in compliance with the License.  You may obtain a copy of the\n+ * License at\n+ *\n+ * http://www.confluent.io/confluent-community-license\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OF ANY KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations under the License.\n+ */\n+\n+package io.confluent.ksql.function.udf.string;\n+\n+import static org.apache.commons.lang3.StringUtils.ordinalIndexOf;\n+import static org.apache.commons.lang3.StringUtils.substring;\n+\n+import io.confluent.ksql.function.udf.Udf;\n+import io.confluent.ksql.function.udf.UdfDescription;\n+import io.confluent.ksql.util.KsqlConstants;\n+import org.apache.commons.lang3.StringUtils;\n+\n+@UdfDescription(name = \"instr\",\n+    author = KsqlConstants.CONFLUENT_AUTHOR,\n+    description = \"PROPER DESCRIPTION\")", "originalCommit": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgzNDYwMA==", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427834600", "bodyText": ":)", "author": "mateuszmrozewski", "createdAt": "2020-05-20T08:33:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUxODY3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0MzYxOA==", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427543618", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Returns a position of `substring` in `string` (first character is at position 1).\n          \n          \n            \n            Returns the position of `substring` in `string`. The first character is at position 1.", "author": "JimGalasyn", "createdAt": "2020-05-19T19:21:36Z", "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).", "originalCommit": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0Mzg0Ng==", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427543846", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If `position` is given search starts from that position. \n          \n          \n            \n            If `position` is provided, search starts from the specified position.", "author": "JimGalasyn", "createdAt": "2020-05-19T19:22:00Z", "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).\n+If `position` is given search starts from that position. ", "originalCommit": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0NDE2Mg==", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427544162", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If `occurrence` is given position of n-th occurrence is returned.\n          \n          \n            \n            If `occurrence` is provided, the position of the *n*-th occurrence is returned.", "author": "JimGalasyn", "createdAt": "2020-05-19T19:22:31Z", "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).\n+If `position` is given search starts from that position. \n+If `occurrence` is given position of n-th occurrence is returned.", "originalCommit": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU0NDQxNw==", "url": "https://github.com/confluentinc/ksql/pull/5385#discussion_r427544417", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If `substring` is not found the return value is 0.\n          \n          \n            \n            If `substring` is not found, the return value is 0.", "author": "JimGalasyn", "createdAt": "2020-05-19T19:22:58Z", "path": "docs/developer-guide/ksqldb-reference/scalar-functions.md", "diffHunk": "@@ -316,6 +317,30 @@ INITCAP\n Capitalize the first letter in each word and convert all other letters\n to lowercase. Words are delimited by whitespace.\n \n+INSTR\n+-----\n+\n+`INSTR(string, substring, [position], [occurrence])`\n+\n+Returns a position of `substring` in `string` (first character is at position 1).\n+If `position` is given search starts from that position. \n+If `occurrence` is given position of n-th occurrence is returned.\n+\n+Negative `position` causes the search to work from end to start of `string`.\n+\n+If `substring` is not found the return value is 0.", "originalCommit": "ec5cd775b44d481e4cfe12898711e0ab8b3f9328", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "16a565c9ae182cbd63226380124d60162667c3fc", "url": "https://github.com/confluentinc/ksql/commit/16a565c9ae182cbd63226380124d60162667c3fc", "message": "Implements #881\n\nAdding generated test topologies.\nImprovements in documentation based on code review.", "committedDate": "2020-05-20T08:32:48Z", "type": "commit"}]}