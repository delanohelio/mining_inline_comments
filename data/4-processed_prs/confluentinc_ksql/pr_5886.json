{"pr_number": 5886, "pr_title": "docs: how-to guide to control casing (DOCS-4102)", "pr_createdAt": "2020-07-27T21:14:21Z", "pr_url": "https://github.com/confluentinc/ksql/pull/5886", "timeline": [{"oid": "74b5f756ba01d0bb295227418c61fdae82ad9023", "url": "https://github.com/confluentinc/ksql/commit/74b5f756ba01d0bb295227418c61fdae82ad9023", "message": "docs: how-to guide to control casing", "committedDate": "2020-07-27T21:11:27Z", "type": "commit"}, {"oid": "a869ae3b87626998d84d5641f96f5853173893f3", "url": "https://github.com/confluentinc/ksql/commit/a869ae3b87626998d84d5641f96f5853173893f3", "message": "docs: update index", "committedDate": "2020-07-27T21:15:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NjY4MA==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461176680", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            UDFs, see the struct section of the [<span class=\"x x-first x-last\">wow</span> to create a user-defined\n          \n          \n            \n            UDFs, see the struct section of the [<span class=\"x x-first x-last\">how</span> to create a user-defined", "author": "JimGalasyn", "createdAt": "2020-07-27T21:19:47Z", "path": "docs/how-to-guides/control-the-case-of-identifiers.md", "diffHunk": "@@ -0,0 +1,103 @@\n+# How to control the case of identifiers\n+\n+## Context\n+\n+You have identifiers, like row names, that will be used outside of\n+ksqlDB. You want to control the exact casing (capitalization) of how\n+they are represented to make them consumable by downstream\n+programs. Because ksqlDB uppercases all identifiers by default, you\n+need to use backticks to preserve the desired casing.\n+\n+## In action\n+\n+```sql\n+CREATE STREAM `s1` (\n+    `a` VARCHAR KEY,\n+    `B` INT,\n+    `c` VARCHAR\n+) WITH (\n+    kafka_topic = 's1',\n+    partitions = 1,\n+    value_format = 'avro'\n+);\n+```\n+\n+## Backticks\n+\n+Begin by telling ksqlDB to start all queries from the earliest point\n+in each topic.\n+\n+```sql\n+SET 'auto.offset.reset' = 'earliest';\n+```\n+\n+Declare a new stream named `s2`. In this example, you override\n+ksqlDB's default behavior to uppercase all identifiers. Use backticks\n+to control the casing of the stream name and two of the column names,\n+`a` and `B`. `c` receives the default behavior of uppercasing.\n+\n+```sql\n+CREATE STREAM `s2` (\n+    `a` VARCHAR KEY,\n+    `B` INT,\n+    c VARCHAR\n+) WITH (\n+    kafka_topic = 's2',\n+    partitions = 1,\n+    value_format = 'avro'\n+);\n+```\n+\n+Insert some rows into `s2`. Notice how you need to use backticks each\n+time to reference a field that doesn't have the default casing:\n+\n+```sql\n+INSERT INTO `s2` (`a`, `B`, c) VALUES ('k1', 1, 'x');\n+INSERT INTO `s2` (`a`, `B`, c) VALUES ('k2', 2, 'y');\n+INSERT INTO `s2` (`a`, `B`, c) VALUES ('k3', 3, 'z');\n+```\n+\n+Issue a push query to select the rows. The relevant identifiers are\n+again surrounded with backticks:\n+\n+```sql\n+select `a`, `B`, c from `s2` emit changes;\n+```\n+\n+Your output should resemble the following. Notice the casing of the\n+headers that ksqlDB prints:\n+\n+```\n++----------------------------------------+----------------------------------------+----------------------------------------+\n+|a                                       |B                                       |C                                       |\n++----------------------------------------+----------------------------------------+----------------------------------------+\n+|k1                                      |1                                       |x                                       |\n+|k2                                      |2                                       |y                                       |\n+|k3                                      |3                                       |z                                       |\n+```\n+\n+\n+## User-defined functions\n+\n+Another area where casing is important is user-defined functions\n+(UDFs) that work with struct parameters. This is the case whenever you\n+use a UDF that either receives an incoming struct or returns a custom\n+struct. Any references to struct fields must exactly match the casing\n+ksqlDB expects. ksqlDB will reject any UDF invocations that do not\n+match it.\n+\n+Here is a quick example of using backticks in a UDF that returns a\n+custom struct. The first two fields override the default behavior. The\n+last uses the default casing. That means that when you work with the\n+data returned from the UDF in ksqlDB, all select statements must use\n+this exact casing. For more information on working with structs in\n+UDFs, see the struct section of the [wow to create a user-defined", "originalCommit": "a869ae3b87626998d84d5641f96f5853173893f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3ODk0Ng==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461178946", "bodyText": "wow \ud83d\ude0d", "author": "MichaelDrogalis", "createdAt": "2020-07-27T21:24:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NjY4MA=="}], "type": "inlineReview"}, {"oid": "dbbf7847a52dc1db604085e746556a8c68edbb93", "url": "https://github.com/confluentinc/ksql/commit/dbbf7847a52dc1db604085e746556a8c68edbb93", "message": "Update docs/how-to-guides/control-the-case-of-identifiers.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-07-27T21:24:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4MTA5NQ==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461181095", "bodyText": "unless it's all uppercase \ud83d\ude02 you could reference B without quotes. might be good to have an example with mixed case (`Dog`)", "author": "agavra", "createdAt": "2020-07-27T21:28:59Z", "path": "docs/how-to-guides/control-the-case-of-identifiers.md", "diffHunk": "@@ -0,0 +1,103 @@\n+# How to control the case of identifiers\n+\n+## Context\n+\n+You have identifiers, like row names, that will be used outside of\n+ksqlDB. You want to control the exact casing (capitalization) of how\n+they are represented to make them consumable by downstream\n+programs. Because ksqlDB uppercases all identifiers by default, you\n+need to use backticks to preserve the desired casing.\n+\n+## In action\n+\n+```sql\n+CREATE STREAM `s1` (\n+    `a` VARCHAR KEY,\n+    `B` INT,\n+    `c` VARCHAR\n+) WITH (\n+    kafka_topic = 's1',\n+    partitions = 1,\n+    value_format = 'avro'\n+);\n+```\n+\n+## Backticks\n+\n+Begin by telling ksqlDB to start all queries from the earliest point\n+in each topic.\n+\n+```sql\n+SET 'auto.offset.reset' = 'earliest';\n+```\n+\n+Declare a new stream named `s2`. In this example, you override\n+ksqlDB's default behavior to uppercase all identifiers. Use backticks\n+to control the casing of the stream name and two of the column names,\n+`a` and `B`. `c` receives the default behavior of uppercasing.\n+\n+```sql\n+CREATE STREAM `s2` (\n+    `a` VARCHAR KEY,\n+    `B` INT,\n+    c VARCHAR\n+) WITH (\n+    kafka_topic = 's2',\n+    partitions = 1,\n+    value_format = 'avro'\n+);\n+```\n+\n+Insert some rows into `s2`. Notice how you need to use backticks each\n+time to reference a field that doesn't have the default casing:", "originalCommit": "dbbf7847a52dc1db604085e746556a8c68edbb93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4MjkwOA==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461182908", "bodyText": "also if you have `B` and `b` as two different fields, b would resolve to `B` and `b` would resolve to `b` (correctly)", "author": "agavra", "createdAt": "2020-07-27T21:32:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4MTA5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIxODEyNg==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461218126", "bodyText": "I think I covered this without making it too confusing. See what you think.", "author": "MichaelDrogalis", "createdAt": "2020-07-27T23:00:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4MTA5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4MTM0MA==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461181340", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            INSERT INTO `s2` (`a`, `B`, <span class=\"x x-first x-last\">c</span>) VALUES ('k2', 2, 'y');\n          \n          \n            \n            INSERT INTO `s2` (`a`, `B`, <span class=\"x x-first x-last\">C</span>) VALUES ('k2', 2, 'y');\n          \n      \n    \n    \n  \n\nto illustrate that unquoted cols are case-insensitive", "author": "agavra", "createdAt": "2020-07-27T21:29:26Z", "path": "docs/how-to-guides/control-the-case-of-identifiers.md", "diffHunk": "@@ -0,0 +1,103 @@\n+# How to control the case of identifiers\n+\n+## Context\n+\n+You have identifiers, like row names, that will be used outside of\n+ksqlDB. You want to control the exact casing (capitalization) of how\n+they are represented to make them consumable by downstream\n+programs. Because ksqlDB uppercases all identifiers by default, you\n+need to use backticks to preserve the desired casing.\n+\n+## In action\n+\n+```sql\n+CREATE STREAM `s1` (\n+    `a` VARCHAR KEY,\n+    `B` INT,\n+    `c` VARCHAR\n+) WITH (\n+    kafka_topic = 's1',\n+    partitions = 1,\n+    value_format = 'avro'\n+);\n+```\n+\n+## Backticks\n+\n+Begin by telling ksqlDB to start all queries from the earliest point\n+in each topic.\n+\n+```sql\n+SET 'auto.offset.reset' = 'earliest';\n+```\n+\n+Declare a new stream named `s2`. In this example, you override\n+ksqlDB's default behavior to uppercase all identifiers. Use backticks\n+to control the casing of the stream name and two of the column names,\n+`a` and `B`. `c` receives the default behavior of uppercasing.\n+\n+```sql\n+CREATE STREAM `s2` (\n+    `a` VARCHAR KEY,\n+    `B` INT,\n+    c VARCHAR\n+) WITH (\n+    kafka_topic = 's2',\n+    partitions = 1,\n+    value_format = 'avro'\n+);\n+```\n+\n+Insert some rows into `s2`. Notice how you need to use backticks each\n+time to reference a field that doesn't have the default casing:\n+\n+```sql\n+INSERT INTO `s2` (`a`, `B`, c) VALUES ('k1', 1, 'x');\n+INSERT INTO `s2` (`a`, `B`, c) VALUES ('k2', 2, 'y');", "originalCommit": "dbbf7847a52dc1db604085e746556a8c68edbb93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIxNzkwNg==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461217906", "bodyText": "Good suggestion. Handled it differently in the last patch.", "author": "MichaelDrogalis", "createdAt": "2020-07-27T22:59:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4MTM0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4MTg4MQ==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461181881", "bodyText": "might be good to have a struct example where the fields in the struct are cased (and link it to the example below)", "author": "agavra", "createdAt": "2020-07-27T21:30:39Z", "path": "docs/how-to-guides/control-the-case-of-identifiers.md", "diffHunk": "@@ -0,0 +1,103 @@\n+# How to control the case of identifiers\n+\n+## Context\n+\n+You have identifiers, like row names, that will be used outside of\n+ksqlDB. You want to control the exact casing (capitalization) of how\n+they are represented to make them consumable by downstream\n+programs. Because ksqlDB uppercases all identifiers by default, you\n+need to use backticks to preserve the desired casing.\n+\n+## In action\n+\n+```sql\n+CREATE STREAM `s1` (\n+    `a` VARCHAR KEY,\n+    `B` INT,\n+    `c` VARCHAR\n+) WITH (\n+    kafka_topic = 's1',\n+    partitions = 1,\n+    value_format = 'avro'\n+);\n+```\n+\n+## Backticks\n+\n+Begin by telling ksqlDB to start all queries from the earliest point\n+in each topic.\n+\n+```sql\n+SET 'auto.offset.reset' = 'earliest';\n+```\n+\n+Declare a new stream named `s2`. In this example, you override\n+ksqlDB's default behavior to uppercase all identifiers. Use backticks\n+to control the casing of the stream name and two of the column names,\n+`a` and `B`. `c` receives the default behavior of uppercasing.\n+\n+```sql\n+CREATE STREAM `s2` (\n+    `a` VARCHAR KEY,\n+    `B` INT,\n+    c VARCHAR", "originalCommit": "dbbf7847a52dc1db604085e746556a8c68edbb93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIxNzI5OA==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461217298", "bodyText": "Great call.", "author": "MichaelDrogalis", "createdAt": "2020-07-27T22:57:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4MTg4MQ=="}], "type": "inlineReview"}, {"oid": "22efb8d3d7cac7943c7ce07b597d3e1a22cb0771", "url": "https://github.com/confluentinc/ksql/commit/22efb8d3d7cac7943c7ce07b597d3e1a22cb0771", "message": "docs: integrated suggestions", "committedDate": "2020-07-27T22:57:38Z", "type": "commit"}, {"oid": "612b51ba08b7c5be57fb4a8dabb3af8803052b67", "url": "https://github.com/confluentinc/ksql/commit/612b51ba08b7c5be57fb4a8dabb3af8803052b67", "message": "docs: fix merge conflict", "committedDate": "2020-07-27T22:58:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIyMTExMQ==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461221111", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            this behavior, `<span class=\"x x-first x-last\">quz</span>` is declared without backticks to demonstrate\n          \n          \n            \n            this behavior, `<span class=\"x x-first x-last\">qux</span>` is declared without backticks to demonstrate", "author": "agavra", "createdAt": "2020-07-27T23:08:30Z", "path": "docs/how-to-guides/control-the-case-of-identifiers.md", "diffHunk": "@@ -0,0 +1,134 @@\n+# How to control the case of identifiers\n+\n+## Context\n+\n+You have identifiers, like row names, that will be used outside of\n+ksqlDB. You want to control the exact casing (capitalization) of how\n+they are represented to make them consumable by downstream\n+programs. Because ksqlDB uppercases all identifiers by default, you\n+need to use backticks to preserve the desired casing.\n+\n+## In action\n+\n+```sql\n+CREATE STREAM `s1` (\n+    `foo` VARCHAR KEY,\n+    `BAR` INT,\n+    `Baz` VARCHAR\n+) WITH (\n+    kafka_topic = 's1',\n+    partitions = 1,\n+    value_format = 'avro'\n+);\n+```\n+\n+## Backticks\n+\n+Begin by telling ksqlDB to start all queries from the earliest point\n+in each topic.\n+\n+```sql\n+SET 'auto.offset.reset' = 'earliest';\n+```\n+\n+Declare a new stream named `s2`. In this example, you override\n+ksqlDB's default behavior to uppercase all identifiers. Use backticks\n+to control the casing of the stream name and column names. To contrast\n+this behavior, `quz` is declared without backticks to demonstrate", "originalCommit": "612b51ba08b7c5be57fb4a8dabb3af8803052b67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIyMTQ3OQ==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461221479", "bodyText": "out of interest, where did you come up with these? \ud83d\ude02", "author": "agavra", "createdAt": "2020-07-27T23:09:37Z", "path": "docs/how-to-guides/control-the-case-of-identifiers.md", "diffHunk": "@@ -0,0 +1,134 @@\n+# How to control the case of identifiers\n+\n+## Context\n+\n+You have identifiers, like row names, that will be used outside of\n+ksqlDB. You want to control the exact casing (capitalization) of how\n+they are represented to make them consumable by downstream\n+programs. Because ksqlDB uppercases all identifiers by default, you\n+need to use backticks to preserve the desired casing.\n+\n+## In action\n+\n+```sql\n+CREATE STREAM `s1` (\n+    `foo` VARCHAR KEY,\n+    `BAR` INT,\n+    `Baz` VARCHAR\n+) WITH (\n+    kafka_topic = 's1',\n+    partitions = 1,\n+    value_format = 'avro'\n+);\n+```\n+\n+## Backticks\n+\n+Begin by telling ksqlDB to start all queries from the earliest point\n+in each topic.\n+\n+```sql\n+SET 'auto.offset.reset' = 'earliest';\n+```\n+\n+Declare a new stream named `s2`. In this example, you override\n+ksqlDB's default behavior to uppercase all identifiers. Use backticks\n+to control the casing of the stream name and column names. To contrast\n+this behavior, `quz` is declared without backticks to demonstrate\n+the default behavior of uppercasing.\n+\n+```sql\n+CREATE STREAM `s2` (\n+    `foo` VARCHAR KEY,\n+    `BAR` INT,\n+    `Baz` VARCHAR,\n+    `grault` STRUCT<\n+        `Corge` VARCHAR,\n+        `garply` INT", "originalCommit": "612b51ba08b7c5be57fb4a8dabb3af8803052b67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIyMjQ5Mw==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461222493", "bodyText": "elementary, my dear Watson: https://en.wikipedia.org/wiki/Metasyntactic_variable", "author": "agavra", "createdAt": "2020-07-27T23:12:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIyMTQ3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIyMzIzOA==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461223238", "bodyText": "we should add franz to our standard canon of metasyntactic variables", "author": "agavra", "createdAt": "2020-07-27T23:15:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIyMTQ3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY4MjA4Nw==", "url": "https://github.com/confluentinc/ksql/pull/5886#discussion_r461682087", "bodyText": "Hah, you found it. :) I ran out of names and googled \"foo bar baz qux\" and clicked the first link. Glad there's more, my choices would have been terrible. \ud83d\ude02", "author": "MichaelDrogalis", "createdAt": "2020-07-28T15:42:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIyMTQ3OQ=="}], "type": "inlineReview"}, {"oid": "7d3518b54bbde991ece870b7c9886bcca40a7965", "url": "https://github.com/confluentinc/ksql/commit/7d3518b54bbde991ece870b7c9886bcca40a7965", "message": "Update docs/how-to-guides/control-the-case-of-identifiers.md\n\nCo-authored-by: Almog Gavra <almog@confluent.io>", "committedDate": "2020-07-28T15:41:18Z", "type": "commit"}]}