{"pr_number": 5826, "pr_title": "chore: add validation to the metastore for create or replace", "pr_createdAt": "2020-07-14T22:40:11Z", "pr_url": "https://github.com/confluentinc/ksql/pull/5826", "timeline": [{"oid": "fcf8e476f732310486bc813db906cd1b73097fa9", "url": "https://github.com/confluentinc/ksql/commit/fcf8e476f732310486bc813db906cd1b73097fa9", "message": "chore: add validation to the metastore for create or replace", "committedDate": "2020-07-14T22:38:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY4NjA1Mg==", "url": "https://github.com/confluentinc/ksql/pull/5826#discussion_r454686052", "bodyText": "this is just a minor refactor that will help me in the next PR, but since the next one is bigger figured I'd just add it here", "author": "agavra", "createdAt": "2020-07-14T22:40:37Z", "path": "ksqldb-engine/src/main/java/io/confluent/ksql/engine/EngineExecutor.java", "diffHunk": "@@ -102,17 +102,20 @@ static EngineExecutor create(\n     return new EngineExecutor(engineContext, serviceContext, ksqlConfig, overriddenProperties);\n   }\n \n-  @SuppressWarnings(\"OptionalGetWithoutIsPresent\") // Known to be non-empty\n   ExecuteResult execute(final KsqlPlan plan) {\n-    final Optional<String> ddlResult = plan.getDdlCommand()\n-        .map(ddl -> executeDdl(ddl, plan.getStatementText(), plan.getQueryPlan().isPresent()));\n-\n-    final Optional<PersistentQueryMetadata> queryMetadata = plan.getQueryPlan()\n-        .map(qp -> executePersistentQuery(qp, plan.getStatementText()));\n+    if (!plan.getQueryPlan().isPresent()) {", "originalCommit": "fcf8e476f732310486bc813db906cd1b73097fa9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cd12db768c06cb970a703d027b068519ef9a7d4a", "url": "https://github.com/confluentinc/ksql/commit/cd12db768c06cb970a703d027b068519ef9a7d4a", "message": "chore: immutability fixes", "committedDate": "2020-07-15T00:04:27Z", "type": "commit"}]}