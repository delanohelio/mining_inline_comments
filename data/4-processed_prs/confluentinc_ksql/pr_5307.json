{"pr_number": 5307, "pr_title": "docs: fix basic auth docs example to pass required jar", "pr_createdAt": "2020-05-07T18:28:01Z", "pr_url": "https://github.com/confluentinc/ksql/pull/5307", "timeline": [{"oid": "12f00d13b5e6f909cbdf7f20a2e2e5bb5f496ebf", "url": "https://github.com/confluentinc/ksql/commit/12f00d13b5e6f909cbdf7f20a2e2e5bb5f496ebf", "message": "docs: fix basic auth docs example to pass required jar", "committedDate": "2020-05-07T18:24:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwOTExMw==", "url": "https://github.com/confluentinc/ksql/pull/5307#discussion_r421709113", "bodyText": "Do we think it's worthwhile to also show what this looks like via docker? It might not be clear to some users that these options should be passed in the environment section, and how to mount the jar as a volume.\nThis relates to the larger issue that our recommended deployment model for ksqlDB is docker yet many of docs are written without docker as the focus. It's not clear to me whether we should rewrite the docs to be docker-focused, or to have two versions (docker and non-docker) for examples such as this one.", "author": "vcrfxia", "createdAt": "2020-05-07T18:30:46Z", "path": "docs/operate-and-deploy/installation/server-config/security.md", "diffHunk": "@@ -156,22 +150,31 @@ KsqlServer-Props {\n };\n ```\n \n-The example `jaas_config.file` above uses the Jetty\n-`PropertyFileLoginModule`, which itself authenticates users by checking\n-for their credentials in a password file.\n-\n-Assign the `KsqlServer-Props` section to the `authentication.realm`\n-config setting:\n+In this example, the `authentication.realm` config should be set to `KsqlServer-Props`:\n \n ```properties\n authentication.realm=KsqlServer-Props\n ```\n \n+The example `jaas_config.file` above uses the Jetty\n+`PropertyFileLoginModule`, which itself authenticates users by checking\n+for their credentials in a password file.\n+\n You can also use other implementations of the standard Java\n `LoginModule` interface, such as `JDBCLoginModule` for reading\n credentials from a database or the `LdapLoginModule`.\n \n-The file parameter is the location of the password file. The format is:\n+The JAAS config file should be passed as a JVM option during server start,\n+and the LoginModule implementation should provided to the server as well:\n+\n+```bash\n+export KSQL_OPTS=-Djava.security.auth.login.config=/path/to/the/jaas_config.file\n+export KSQL_CLASSPATH=<path-to-login-module-jar>/jetty-jaas-9.4.24.v20191120.jar", "originalCommit": "12f00d13b5e6f909cbdf7f20a2e2e5bb5f496ebf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0NDg3MA==", "url": "https://github.com/confluentinc/ksql/pull/5307#discussion_r421744870", "bodyText": "I'm always eager to keep parity in the Docker content. I tried to factor out the non-Docker content from docs.ksqldb.io, but there are still some islands of CP-ish content remaining. Maybe we could add this somewhere in here: https://docs.ksqldb.io/en/latest/operate-and-deploy/installation/install-ksqldb-with-docker/", "author": "JimGalasyn", "createdAt": "2020-05-07T19:34:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwOTExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc4MzcwNg==", "url": "https://github.com/confluentinc/ksql/pull/5307#discussion_r421783706", "bodyText": "Not sure I follow. True parity would mean having two versions of each example in the docs, one for Docker and one for non-Docker, right? Having a separate page that acts as a cheatsheet for \"how to do the equivalent things (set properties, load UDFs, connectors, jars, etc) in Docker\" seems like a good short-term solution so Docker users can make sense of the existing docs with non-Docker examples, but it doesn't seem great in the long run, especially since we recommend installing via Docker.", "author": "vcrfxia", "createdAt": "2020-05-07T20:47:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwOTExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc4NDYxMw==", "url": "https://github.com/confluentinc/ksql/pull/5307#discussion_r421784613", "bodyText": "Maybe we could add this somewhere in here: https://docs.ksqldb.io/en/latest/operate-and-deploy/installation/install-ksqldb-with-docker/\n\nI see the page already has a section on setting system properties, so I assume you're suggesting we add a note about KSQL_CLASSPATH into that section, and add a new section on how to mount volumes (for UDFs, connectors and other custom JARs)? If so, SGTM!", "author": "vcrfxia", "createdAt": "2020-05-07T20:48:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwOTExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgzMzI3Ng==", "url": "https://github.com/confluentinc/ksql/pull/5307#discussion_r421833276", "bodyText": "@vcrfxia We do need to keep two separate docs sets, one for ksqlDB Standalone and the other for ksqlDB Enterprise. Ideally, we'll have Docker-only workflows on docs.ksqldb.io and CP-only workflows on docs.confluent.io, but it would be good to have a mapping between the two somewhere. Currently, we have a very clumsy duct-tape solution that we need to fix.", "author": "JimGalasyn", "createdAt": "2020-05-07T22:35:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwOTExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgzNjA5OQ==", "url": "https://github.com/confluentinc/ksql/pull/5307#discussion_r421836099", "bodyText": "Makes sense. Thanks for the context!\nShall we file tickets to track the improvements you mentioned (adding a note about KSQL_CLASSPATH into that docker system properties section, and adding a new section on how to mount volumes (for UDFs, connectors and other custom JARs))? I can file them if you're swamped.", "author": "vcrfxia", "createdAt": "2020-05-07T22:43:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwOTExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgzODQ0OQ==", "url": "https://github.com/confluentinc/ksql/pull/5307#discussion_r421838449", "bodyText": "That would be great, thanks!", "author": "JimGalasyn", "createdAt": "2020-05-07T22:50:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTcwOTExMw=="}], "type": "inlineReview"}]}