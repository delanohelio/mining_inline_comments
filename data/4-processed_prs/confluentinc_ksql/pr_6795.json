{"pr_number": 6795, "pr_title": "chore: clarify single key unwrapping during schema inference (MINOR)", "pr_createdAt": "2020-12-16T23:34:09Z", "pr_url": "https://github.com/confluentinc/ksql/pull/6795", "timeline": [{"oid": "4f45511772c0129baee9e2db547633b58a9e0b51", "url": "https://github.com/confluentinc/ksql/commit/4f45511772c0129baee9e2db547633b58a9e0b51", "message": "chore: clarify single key unwrapping during schema inference (MINOR)", "committedDate": "2020-12-16T23:33:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcwNjA0OA==", "url": "https://github.com/confluentinc/ksql/pull/6795#discussion_r544706048", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                will always be unwrapped. If your key is contained in an outer record or object, the\n          \n          \n            \n                is always unwrapped. If your key is contained in an outer record or object, the", "author": "JimGalasyn", "createdAt": "2020-12-16T23:49:46Z", "path": "docs/concepts/schemas.md", "diffHunk": "@@ -104,13 +104,21 @@ don't supply one the stream is created without a key column.\n \r\n The following example statements show how to create streams and tables that have \r\n Avro-formatted data. If you want to use Protobuf- or JSON-formatted data,\r\n-substitute `PROTOBUF`, `JSON` or `JSON_SR` for `AVRO` in each statement.\r\n+substitute `PROTOBUF` or `JSON_SR` for `AVRO` in each statement.\r\n \r\n !!! note\r\n     ksqlDB handles the `JSON` and `JSON_SR` formats differently. `JSON_SR` reads and \r\n     registers new schemas with {{ site.sr }} as necessary, while `JSON` requires you\r\n     to specify the schema. Data formatted with `JSON_SR` is not binary compatible with\r\n     the `JSON` format.\r\n+    \r\n+!!! note\r\n+    When performing schema inference to infer value schemas, ksqlDB takes user-specified\r\n+    [single field (un)wrapping](../developer-guide/serialization.md#single-field-unwrapping) \r\n+    into account. When performing schema inference on key schemas, the resulting key schema\r\n+    will always be unwrapped. If your key is contained in an outer record or object, the\r", "originalCommit": "4f45511772c0129baee9e2db547633b58a9e0b51", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcwNjExNg==", "url": "https://github.com/confluentinc/ksql/pull/6795#discussion_r544706116", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                inferred key will be represented as a `STRUCT`. You can access individual fields within\n          \n          \n            \n                inferred key is represented as a `STRUCT`. You can access individual fields within", "author": "JimGalasyn", "createdAt": "2020-12-16T23:50:00Z", "path": "docs/concepts/schemas.md", "diffHunk": "@@ -104,13 +104,21 @@ don't supply one the stream is created without a key column.\n \r\n The following example statements show how to create streams and tables that have \r\n Avro-formatted data. If you want to use Protobuf- or JSON-formatted data,\r\n-substitute `PROTOBUF`, `JSON` or `JSON_SR` for `AVRO` in each statement.\r\n+substitute `PROTOBUF` or `JSON_SR` for `AVRO` in each statement.\r\n \r\n !!! note\r\n     ksqlDB handles the `JSON` and `JSON_SR` formats differently. `JSON_SR` reads and \r\n     registers new schemas with {{ site.sr }} as necessary, while `JSON` requires you\r\n     to specify the schema. Data formatted with `JSON_SR` is not binary compatible with\r\n     the `JSON` format.\r\n+    \r\n+!!! note\r\n+    When performing schema inference to infer value schemas, ksqlDB takes user-specified\r\n+    [single field (un)wrapping](../developer-guide/serialization.md#single-field-unwrapping) \r\n+    into account. When performing schema inference on key schemas, the resulting key schema\r\n+    will always be unwrapped. If your key is contained in an outer record or object, the\r\n+    inferred key will be represented as a `STRUCT`. You can access individual fields within\r", "originalCommit": "4f45511772c0129baee9e2db547633b58a9e0b51", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcwNjIwNw==", "url": "https://github.com/confluentinc/ksql/pull/6795#discussion_r544706207", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                the `STRUCT` via [STRUCT dereference](../developer-guide/ksqldb-reference/operators.md#struct-dereference).\n          \n          \n            \n                the `STRUCT` by using [STRUCT dereference](../developer-guide/ksqldb-reference/operators.md#struct-dereference).", "author": "JimGalasyn", "createdAt": "2020-12-16T23:50:13Z", "path": "docs/concepts/schemas.md", "diffHunk": "@@ -104,13 +104,21 @@ don't supply one the stream is created without a key column.\n \r\n The following example statements show how to create streams and tables that have \r\n Avro-formatted data. If you want to use Protobuf- or JSON-formatted data,\r\n-substitute `PROTOBUF`, `JSON` or `JSON_SR` for `AVRO` in each statement.\r\n+substitute `PROTOBUF` or `JSON_SR` for `AVRO` in each statement.\r\n \r\n !!! note\r\n     ksqlDB handles the `JSON` and `JSON_SR` formats differently. `JSON_SR` reads and \r\n     registers new schemas with {{ site.sr }} as necessary, while `JSON` requires you\r\n     to specify the schema. Data formatted with `JSON_SR` is not binary compatible with\r\n     the `JSON` format.\r\n+    \r\n+!!! note\r\n+    When performing schema inference to infer value schemas, ksqlDB takes user-specified\r\n+    [single field (un)wrapping](../developer-guide/serialization.md#single-field-unwrapping) \r\n+    into account. When performing schema inference on key schemas, the resulting key schema\r\n+    will always be unwrapped. If your key is contained in an outer record or object, the\r\n+    inferred key will be represented as a `STRUCT`. You can access individual fields within\r\n+    the `STRUCT` via [STRUCT dereference](../developer-guide/ksqldb-reference/operators.md#struct-dereference).\r", "originalCommit": "4f45511772c0129baee9e2db547633b58a9e0b51", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "21e5607730c53a25821918577dbca98b5305fb59", "url": "https://github.com/confluentinc/ksql/commit/21e5607730c53a25821918577dbca98b5305fb59", "message": "chore: feedback and touchups", "committedDate": "2020-12-17T00:15:20Z", "type": "commit"}]}