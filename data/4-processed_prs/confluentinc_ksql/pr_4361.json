{"pr_number": 4361, "pr_title": "docs: add note about ksqlDB headless mode and Avro schemas (DOCS-1487)", "pr_createdAt": "2020-01-21T21:40:57Z", "pr_url": "https://github.com/confluentinc/ksql/pull/4361", "timeline": [{"oid": "723c1f9512061aaee565a61ee895fcf130cc075c", "url": "https://github.com/confluentinc/ksql/commit/723c1f9512061aaee565a61ee895fcf130cc075c", "message": "docs: add note about ksqlDB headless mode and Avro schemas (DOCS-1487)", "committedDate": "2020-01-21T21:39:38Z", "type": "commit"}, {"oid": "6a33826161a965ded46b1035c62b3ab464973568", "url": "https://github.com/confluentinc/ksql/commit/6a33826161a965ded46b1035c62b3ab464973568", "message": "docs: use KSQL in rst version of topic", "committedDate": "2020-01-21T21:42:11Z", "type": "commit"}, {"oid": "a2401ce4d3968e83acb41f4e7d7f7c1ca5b29ad2", "url": "https://github.com/confluentinc/ksql/commit/a2401ce4d3968e83acb41f4e7d7f7c1ca5b29ad2", "message": "docs: use another KSQL in rst version of topic", "committedDate": "2020-01-21T21:42:48Z", "type": "commit"}, {"oid": "c4e77287344c2f3ec4ac50590996d71c0c06a006", "url": "https://github.com/confluentinc/ksql/commit/c4e77287344c2f3ec4ac50590996d71c0c06a006", "message": "docs: rework SR section per feedback (DOCS-1487)", "committedDate": "2020-01-23T23:50:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1MzE5Nw==", "url": "https://github.com/confluentinc/ksql/pull/4361#discussion_r371453197", "bodyText": "Out of whack with the change above:  non-interactive does talk to SR.", "author": "big-andy-coates", "createdAt": "2020-01-27T20:01:07Z", "path": "docs/installation/server-config/index.rst", "diffHunk": "@@ -236,6 +236,10 @@ server is running a predefined script, it will automatically disable its REST en\n \n .. tip:: When both the ``ksql.queries.file`` property and the ``--queries-file`` argument are present, the ``--queries-file`` argument will take precedence.\n \n+When you run a KSQL application that uses Avro in interactive mode, KSQL\n+infers schemas from |sr| automatically, but in non-interactive mode,\n+you must provide schemas manually.", "originalCommit": "c4e77287344c2f3ec4ac50590996d71c0c06a006", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1NDYxNg==", "url": "https://github.com/confluentinc/ksql/pull/4361#discussion_r371454616", "bodyText": "OR they can choose to explicitly provide the schema.  This is safer if the schema may evolve.\nThis is the github issue that is tracking the feature for headless mode, if you want to reference it?\n#1530", "author": "big-andy-coates", "createdAt": "2020-01-27T20:04:23Z", "path": "docs-md/operate-and-deploy/installation/server-config/index.md", "diffHunk": "@@ -252,6 +252,23 @@ REST endpoint and interactive use.\n     argument are present, the `--queries-file` argument takes\n     precedence.\n \n+### Schema resolution\n+\n+When you run a ksqlDB application that uses Avro, ksqlDB infers schemas from\n+{{ site.sr }} automatically, but the behavior after restarting ksqlDB Server\n+differs between interactive and non-interactive mode.\n+\n+- **Interactive mode:** after ksqlDB Server restarts, it doesn't contact\n+  {{ site.sr }} again to resolve schemas, because it has previously persisted\n+  the information to the command topic.\n+- **Non-interactive mode**: after ksqlDB Server restarts, it *does* contact\n+  {{ site.sr }} again to resolve schemas. If schemas have changed, unexpected\n+  behavior in your ksqlDB applications may occur.\n+\n+!!! important\n+    If your ksqlDB applications use Avro and you run them in non-interactive\n+    mode, ensure that the schemas don't change between ksqlDB Server restarts.", "originalCommit": "c4e77287344c2f3ec4ac50590996d71c0c06a006", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a936b105649e6c46c2b4d862f614f3c1e5748e4a", "url": "https://github.com/confluentinc/ksql/commit/a936b105649e6c46c2b4d862f614f3c1e5748e4a", "message": "docs: incorporate feedback", "committedDate": "2020-02-03T23:10:08Z", "type": "commit"}]}