{"pr_number": 4686, "pr_title": "docs: update docs inline latest syntax changes", "pr_createdAt": "2020-03-03T09:49:31Z", "pr_url": "https://github.com/confluentinc/ksql/pull/4686", "timeline": [{"oid": "80b36e57188bb864e03af1ef1161c0a9af5bfb28", "url": "https://github.com/confluentinc/ksql/commit/80b36e57188bb864e03af1ef1161c0a9af5bfb28", "message": "docs: update inline with ability for arbitrary key column names", "committedDate": "2020-03-03T09:48:28Z", "type": "commit"}, {"oid": "753adc015a67e40fd32279f61d41786ac4450c8f", "url": "https://github.com/confluentinc/ksql/commit/753adc015a67e40fd32279f61d41786ac4450c8f", "message": "Merge branch 'master' into any_key_docs", "committedDate": "2020-03-03T11:01:55Z", "type": "commit"}, {"oid": "97ea2534eb7c14eae32880f9a2ba0ecb48b5706a", "url": "https://github.com/confluentinc/ksql/commit/97ea2534eb7c14eae32880f9a2ba0ecb48b5706a", "message": "docs: update help docs in code", "committedDate": "2020-03-03T11:02:22Z", "type": "commit"}, {"oid": "0789f1d26ec6abbf50b26dc754f5d4bfa41e41a6", "url": "https://github.com/confluentinc/ksql/commit/0789f1d26ec6abbf50b26dc754f5d4bfa41e41a6", "message": "docs: meh", "committedDate": "2020-06-16T14:21:45Z", "type": "commit"}, {"oid": "7041be4a90ca88aaf31b05454138c205232e3dee", "url": "https://github.com/confluentinc/ksql/commit/7041be4a90ca88aaf31b05454138c205232e3dee", "message": "chore: merge from master", "committedDate": "2020-06-16T14:27:39Z", "type": "commit"}, {"oid": "995c147e0147176a1f0f29c22aa1cea519e12bd1", "url": "https://github.com/confluentinc/ksql/commit/995c147e0147176a1f0f29c22aa1cea519e12bd1", "message": "docs: update with latest syntax", "committedDate": "2020-06-18T13:30:46Z", "type": "commit"}, {"oid": "ea29249c48d425b0fa7b861d24bd8ed737638859", "url": "https://github.com/confluentinc/ksql/commit/ea29249c48d425b0fa7b861d24bd8ed737638859", "message": "docs: add AS_VALUE", "committedDate": "2020-06-18T13:36:37Z", "type": "commit"}, {"oid": "924faea82b766af4018f3e833199386894e14ead", "url": "https://github.com/confluentinc/ksql/commit/924faea82b766af4018f3e833199386894e14ead", "message": "test: update tests inline with doc changes", "committedDate": "2020-06-18T15:33:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzMjUyNQ==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442432525", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            It's important that the columns we've defined match the data in the existing topic.\n          \n          \n            \n            It's important that the columns you define match the data in the existing topic.", "author": "JimGalasyn", "createdAt": "2020-06-18T18:48:58Z", "path": "docs/concepts/collections/streams.md", "diffHunk": "@@ -53,14 +57,36 @@ Internally, ksqlDB simply registers the topic with the provided schema\n and doesn't create anything new. \n \n ```sql\n-CREATE STREAM publications (author VARCHAR, title VARCHAR)\n-    WITH (kafka_topic = 'publication_events',\n-          value_format = 'avro');\n+CREATE STREAM publications (\n+    author VARCHAR KEY, \n+    title VARCHAR\n+  ) WITH (\n+    kafka_topic = 'publication_events',\n+    value_format = 'avro'\n+  );\n ```\n \n-Because the topic already exists, you can't specify the number of partitions.\n-The key shouldn't be set here either, because any data that already exists in\n-the same topic has a given key.\n+Because the topic already exists, you do not need to specify the number of partitions.\n+\n+It's important that the columns we've defined match the data in the existing topic.", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzMjk5MA==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442432990", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If both the `author` and `title` columns where in the message value we could write: \n          \n          \n            \n            If both the `author` and `title` columns are in the message value, you can write:", "author": "JimGalasyn", "createdAt": "2020-06-18T18:49:50Z", "path": "docs/concepts/collections/streams.md", "diffHunk": "@@ -53,14 +57,36 @@ Internally, ksqlDB simply registers the topic with the provided schema\n and doesn't create anything new. \n \n ```sql\n-CREATE STREAM publications (author VARCHAR, title VARCHAR)\n-    WITH (kafka_topic = 'publication_events',\n-          value_format = 'avro');\n+CREATE STREAM publications (\n+    author VARCHAR KEY, \n+    title VARCHAR\n+  ) WITH (\n+    kafka_topic = 'publication_events',\n+    value_format = 'avro'\n+  );\n ```\n \n-Because the topic already exists, you can't specify the number of partitions.\n-The key shouldn't be set here either, because any data that already exists in\n-the same topic has a given key.\n+Because the topic already exists, you do not need to specify the number of partitions.\n+\n+It's important that the columns we've defined match the data in the existing topic.\n+In this case, the message would need a `KAFKA` serialized `VARCHAR` in the message key\n+and an `AVRO` serialized record containing a `title` field in the message value.\n+\n+If both the `author` and `title` columns where in the message value we could write: ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzMzQ4Mg==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442433482", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            It's important that the columns we've defined match the data in the existing topic.\n          \n          \n            \n            It's important that the columns you define match the data in the existing topic.", "author": "JimGalasyn", "createdAt": "2020-06-18T18:50:41Z", "path": "docs/concepts/collections/tables.md", "diffHunk": "@@ -69,14 +73,21 @@ Internally, ksqlDB simply registers the topic with the provided schema\n and doesn't create anything new. \n \n ```sql\n-CREATE TABLE movies (title VARCHAR, release_year INT)\n-    WITH (kafka_topic = 'movies',\n-          value_format = 'avro');\n+CREATE TABLE movies (\n+    title VARCHAR PRIMARY KEY, \n+    release_year INT\n+  ) WITH (\n+    kafka_topic = 'movies',\n+    value_format = 'avro'\n+  );\n ```\n \n-Because the topic already exists, you can't specify the number of partitions.\n-The key shouldn't be set here either, because any data that already exists in\n-the same topic has a given key.\n+Because the topic already exists, you do not need to specify the number of partitions.\n+\n+It's important that the columns we've defined match the data in the existing topic.", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzMzgxNg==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442433816", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - WHERE clauses can only have constrains on the key column for non-windowed tables.\n          \n          \n            \n            - WHERE clauses can only have constraints on the key column for non-windowed tables.", "author": "JimGalasyn", "createdAt": "2020-06-18T18:51:16Z", "path": "docs/concepts/queries/pull.md", "diffHunk": "@@ -36,8 +36,8 @@ Pull query features and limitations\n   with a GROUP BY clause.\r\n - For non-windowed aggregations, pull queries only support looking up events\r\n   by key.\r\n-- WHERE clauses can only have `ROWKEY=x`-style bounds for non-windowed tables.\r\n-- Windowed tables support bounds on WINDOWSTART using operators\r\n+- WHERE clauses can only have constrains on the key column for non-windowed tables.\r", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzNTc5OQ==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442435799", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `pageviews` topic: `viewtime`, `userid`, and `pageid`. All these columns will be loaded from the \n          \n          \n            \n            `pageviews` topic: `viewtime`, `userid`, and `pageid`. All of these columns are loaded from the", "author": "JimGalasyn", "createdAt": "2020-06-18T18:54:59Z", "path": "docs/developer-guide/create-a-stream.md", "diffHunk": "@@ -30,26 +30,26 @@ named `pageviews`.\n ### Create a Stream with Selected Columns\n \n The following example creates a stream that has three columns from the\n-`pageviews` topic: `viewtime`, `userid`, and `pageid`.\n+`pageviews` topic: `viewtime`, `userid`, and `pageid`. All these columns will be loaded from the ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzNjE3MA==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442436170", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {{ site.ak }} topic message value. If you wish to access data in your message key see \n          \n          \n            \n            {{ site.ak }} topic message value. To access data in your message key, see", "author": "JimGalasyn", "createdAt": "2020-06-18T18:55:32Z", "path": "docs/developer-guide/create-a-stream.md", "diffHunk": "@@ -30,26 +30,26 @@ named `pageviews`.\n ### Create a Stream with Selected Columns\n \n The following example creates a stream that has three columns from the\n-`pageviews` topic: `viewtime`, `userid`, and `pageid`.\n+`pageviews` topic: `viewtime`, `userid`, and `pageid`. All these columns will be loaded from the \n+{{ site.ak }} topic message value. If you wish to access data in your message key see ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzNjg4MQ==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442436881", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This will create the pageviews topics for you with the supplied partition and replica count. The \n          \n          \n            \n            This statement creates the `pageviews` topic for you with the supplied partition and replica count. The", "author": "JimGalasyn", "createdAt": "2020-06-18T18:56:47Z", "path": "docs/developer-guide/create-a-stream.md", "diffHunk": "@@ -193,17 +202,21 @@ Kafka topic does not already exist, you can create the stream by pasting\n the following CREATE STREAM statement into the CLI:\n \n ```sql\n-CREATE STREAM pageviews\n-  (viewtime BIGINT KEY,\n-   userid VARCHAR,\n-   pageid VARCHAR)\n-  WITH (KAFKA_TOPIC='pageviews',\n-        PARTITIONS=4,\n-        REPLICAS=3\n-        VALUE_FORMAT='DELIMITED')\n-```\n-\n-This will create the pageviews topics for you with the supplied partition and replica count.\n+CREATE STREAM pageviews(\n+    viewtime BIGINT KEY,\n+    userid VARCHAR,\n+    pageid VARCHAR\n+  ) WITH (\n+    KAFKA_TOPIC='pageviews',\n+    VALUE_FORMAT='DELIMITED',\n+    PARTITIONS=4,\n+    REPLICAS=3\n+  );\n+```\n+\n+This will create the pageviews topics for you with the supplied partition and replica count. The ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzNzA5NA==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442437094", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            value of `viewTime` will be stored in the {{ site.ak }} topic message key. If you wish to store\n          \n          \n            \n            value of `viewTime` is stored in the {{ site.ak }} topic message key. To store", "author": "JimGalasyn", "createdAt": "2020-06-18T18:57:10Z", "path": "docs/developer-guide/create-a-stream.md", "diffHunk": "@@ -193,17 +202,21 @@ Kafka topic does not already exist, you can create the stream by pasting\n the following CREATE STREAM statement into the CLI:\n \n ```sql\n-CREATE STREAM pageviews\n-  (viewtime BIGINT KEY,\n-   userid VARCHAR,\n-   pageid VARCHAR)\n-  WITH (KAFKA_TOPIC='pageviews',\n-        PARTITIONS=4,\n-        REPLICAS=3\n-        VALUE_FORMAT='DELIMITED')\n-```\n-\n-This will create the pageviews topics for you with the supplied partition and replica count.\n+CREATE STREAM pageviews(\n+    viewtime BIGINT KEY,\n+    userid VARCHAR,\n+    pageid VARCHAR\n+  ) WITH (\n+    KAFKA_TOPIC='pageviews',\n+    VALUE_FORMAT='DELIMITED',\n+    PARTITIONS=4,\n+    REPLICAS=3\n+  );\n+```\n+\n+This will create the pageviews topics for you with the supplied partition and replica count. The \n+value of `viewTime` will be stored in the {{ site.ak }} topic message key. If you wish to store", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzNzE4NA==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442437184", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            the column in the message value, simple remove `KEY` from the column definition.\n          \n          \n            \n            the column in the message value, simply remove `KEY` from the column definition.", "author": "JimGalasyn", "createdAt": "2020-06-18T18:57:20Z", "path": "docs/developer-guide/create-a-stream.md", "diffHunk": "@@ -193,17 +202,21 @@ Kafka topic does not already exist, you can create the stream by pasting\n the following CREATE STREAM statement into the CLI:\n \n ```sql\n-CREATE STREAM pageviews\n-  (viewtime BIGINT KEY,\n-   userid VARCHAR,\n-   pageid VARCHAR)\n-  WITH (KAFKA_TOPIC='pageviews',\n-        PARTITIONS=4,\n-        REPLICAS=3\n-        VALUE_FORMAT='DELIMITED')\n-```\n-\n-This will create the pageviews topics for you with the supplied partition and replica count.\n+CREATE STREAM pageviews(\n+    viewtime BIGINT KEY,\n+    userid VARCHAR,\n+    pageid VARCHAR\n+  ) WITH (\n+    KAFKA_TOPIC='pageviews',\n+    VALUE_FORMAT='DELIMITED',\n+    PARTITIONS=4,\n+    REPLICAS=3\n+  );\n+```\n+\n+This will create the pageviews topics for you with the supplied partition and replica count. The \n+value of `viewTime` will be stored in the {{ site.ak }} topic message key. If you wish to store\n+the column in the message value, simple remove `KEY` from the column definition.", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzNzc3Nw==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442437777", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The `userid` column is the primary key of the table. This means it is loaded from the Kafka message\n          \n          \n            \n            The `userid` column is the primary key of the table. This means that it's loaded from the {{ site.ak }} message", "author": "JimGalasyn", "createdAt": "2020-06-18T18:58:25Z", "path": "docs/developer-guide/create-a-table.md", "diffHunk": "@@ -30,32 +30,32 @@ named `users`.\n ### Create a Table with Selected Columns\n \n The following example creates a table that has four columns from the\n-`users` topic: `registertime`, `userid`, `gender`, and `regionid`. Also,\n-the `userid` field is assigned as the table's KEY property.\n-\n-!!! note\n-      The KEY field is optional. For more information, see\n-      [Key Requirements](syntax-reference.md#key-requirements).\n+`users` topic: `registertime`, `userid`, `gender`, and `regionid`. \n+The `userid` column is the primary key of the table. This means it is loaded from the Kafka message", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzNzk4MQ==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442437981", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            key. Primary key columns can not be `NULL`.\n          \n          \n            \n            key. Primary key columns can't be `NULL`.", "author": "JimGalasyn", "createdAt": "2020-06-18T18:58:46Z", "path": "docs/developer-guide/create-a-table.md", "diffHunk": "@@ -30,32 +30,32 @@ named `users`.\n ### Create a Table with Selected Columns\n \n The following example creates a table that has four columns from the\n-`users` topic: `registertime`, `userid`, `gender`, and `regionid`. Also,\n-the `userid` field is assigned as the table's KEY property.\n-\n-!!! note\n-      The KEY field is optional. For more information, see\n-      [Key Requirements](syntax-reference.md#key-requirements).\n+`users` topic: `registertime`, `userid`, `gender`, and `regionid`. \n+The `userid` column is the primary key of the table. This means it is loaded from the Kafka message\n+key. Primary key columns can not be `NULL`.", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzOTEyMA==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442439120", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            KsqlDB attempts to process both sides of a join in event-time order, \n          \n          \n            \n            ksqlDB attempts to process both sides of a join in event-time order,", "author": "JimGalasyn", "createdAt": "2020-06-18T19:00:44Z", "path": "docs/developer-guide/joins/join-streams-and-tables.md", "diffHunk": "@@ -232,14 +230,19 @@ the key from the table. Tombstones don't trigger the join.\n | 14        |             | d                |            |           |\n | 15        | D           |                  | [D, d]     | [D, d]    |\n \n-For stream-table joins, ksqlDB assumes that the joining stream and table\n-follow the event-time ordering exactly. Follow these steps to ensure\n-that joins are synchronized:\n+Notice that the INNER JOIN doesn't result in any output if the table-side\n+does not already contain a value for the key, even if the table-side is\n+later populated. For the LEFT JOIN the same scenario results in an output \n+of leftRecord-NULL.  It is therefore important that the table data is \n+loaded _before_ the stream event is received. \n \n-1.  Start the query, which starts consumers.\n-2.  Populate the table completely. This ensures that the table items\n-    exist when the stream events come in to trigger the join.\n-3.  Populate the stream completely.\n+KsqlDB attempts to process both sides of a join in event-time order, ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzOTQyNg==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442439426", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            but can not offer strong guarantees, especially in the presence of \n          \n          \n            \n            but it can't offer strong guarantees, especially in the presence of", "author": "JimGalasyn", "createdAt": "2020-06-18T19:01:17Z", "path": "docs/developer-guide/joins/join-streams-and-tables.md", "diffHunk": "@@ -232,14 +230,19 @@ the key from the table. Tombstones don't trigger the join.\n | 14        |             | d                |            |           |\n | 15        | D           |                  | [D, d]     | [D, d]    |\n \n-For stream-table joins, ksqlDB assumes that the joining stream and table\n-follow the event-time ordering exactly. Follow these steps to ensure\n-that joins are synchronized:\n+Notice that the INNER JOIN doesn't result in any output if the table-side\n+does not already contain a value for the key, even if the table-side is\n+later populated. For the LEFT JOIN the same scenario results in an output \n+of leftRecord-NULL.  It is therefore important that the table data is \n+loaded _before_ the stream event is received. \n \n-1.  Start the query, which starts consumers.\n-2.  Populate the table completely. This ensures that the table items\n-    exist when the stream events come in to trigger the join.\n-3.  Populate the stream completely.\n+KsqlDB attempts to process both sides of a join in event-time order, \n+but can not offer strong guarantees, especially in the presence of ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQzOTY5MA==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442439690", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            source topic, the query is running and the ksqlDB has had enough time to process \n          \n          \n            \n            source topic, the query is running, and ksqlDB has had enough time to process", "author": "JimGalasyn", "createdAt": "2020-06-18T19:01:47Z", "path": "docs/developer-guide/joins/join-streams-and-tables.md", "diffHunk": "@@ -232,14 +230,19 @@ the key from the table. Tombstones don't trigger the join.\n | 14        |             | d                |            |           |\n | 15        | D           |                  | [D, d]     | [D, d]    |\n \n-For stream-table joins, ksqlDB assumes that the joining stream and table\n-follow the event-time ordering exactly. Follow these steps to ensure\n-that joins are synchronized:\n+Notice that the INNER JOIN doesn't result in any output if the table-side\n+does not already contain a value for the key, even if the table-side is\n+later populated. For the LEFT JOIN the same scenario results in an output \n+of leftRecord-NULL.  It is therefore important that the table data is \n+loaded _before_ the stream event is received. \n \n-1.  Start the query, which starts consumers.\n-2.  Populate the table completely. This ensures that the table items\n-    exist when the stream events come in to trigger the join.\n-3.  Populate the stream completely.\n+KsqlDB attempts to process both sides of a join in event-time order, \n+but can not offer strong guarantees, especially in the presence of \n+out-of-order rows. \n+\n+To maximise join predictability, ensure historic table data is available in the \n+source topic, the query is running and the ksqlDB has had enough time to process ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ0MDI5OQ==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442440299", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Streams, on the other hand, do not have primary keys. However, they do have an optional `KEY` \n          \n          \n            \n            Streams don't have primary keys, but they do have an optional `KEY`", "author": "JimGalasyn", "createdAt": "2020-06-18T19:03:01Z", "path": "docs/developer-guide/joins/partition-data.md", "diffHunk": "@@ -19,13 +19,15 @@ coincide with the column that the sources are partitioned by.\n Keys\n ----\n \n-A *key*, when present, defines the partitioning column. Tables are\n-always partitioned by their primary key, and ksqlDB doesn't allow repartitioning\n-of tables, so you can only use a table's primary key as a join column.\n+Tables are always partitioned by their `PRIMARY KEY`, and ksqlDB doesn't allow repartitioning\n+of tables, meaning you can only use a table's primary key as a join column.\n \n-Streams, on the other hand, may not have a defined key or may have a key that\n-differs from the join column. In these cases, ksqlDB internally repartitions\n-the stream, which implicitly defines the correct key for it.\n+Streams, on the other hand, do not have primary keys. However, they do have an optional `KEY` ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ0MDQ1Ng==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442440456", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Streams allow joins on expressions other than their key column. When the join criteria differs \n          \n          \n            \n            Streams allow joins on expressions other than their key column. When the join criteria differ", "author": "JimGalasyn", "createdAt": "2020-06-18T19:03:19Z", "path": "docs/developer-guide/joins/partition-data.md", "diffHunk": "@@ -19,13 +19,15 @@ coincide with the column that the sources are partitioned by.\n Keys\n ----\n \n-A *key*, when present, defines the partitioning column. Tables are\n-always partitioned by their primary key, and ksqlDB doesn't allow repartitioning\n-of tables, so you can only use a table's primary key as a join column.\n+Tables are always partitioned by their `PRIMARY KEY`, and ksqlDB doesn't allow repartitioning\n+of tables, meaning you can only use a table's primary key as a join column.\n \n-Streams, on the other hand, may not have a defined key or may have a key that\n-differs from the join column. In these cases, ksqlDB internally repartitions\n-the stream, which implicitly defines the correct key for it.\n+Streams, on the other hand, do not have primary keys. However, they do have an optional `KEY` \n+column. A `KEY` column, when present, defines the partitioning column.\n+\n+Streams allow joins on expressions other than their key column. When the join criteria differs ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ0MDgzNQ==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442440835", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            As the KAFKA format does not support serialize the column name within the data the key column name is \n          \n          \n            \n            The KAFKA format doesn't support serializing the column name within the data, so the key column name is", "author": "JimGalasyn", "createdAt": "2020-06-18T19:04:04Z", "path": "docs/developer-guide/joins/partition-data.md", "diffHunk": "@@ -35,61 +37,48 @@ the stream, which implicitly defines the correct key for it.\n \n ksqlDB requires keys to use the `KAFKA` format. For more information, see\n [Serialization Formats](../serialization.md#serialization-formats). If internally\n-repartitioning, ksqlDB uses the correct format.\n-\n-Because you can only use the primary key of a table as a joining column, it's\n-important to understand how keys are defined.\n-\n-When you create a table by using a CREATE TABLE statement you define the key in the schema and\n-it must be the same as that of the records in the underlying {{ site.ak }} topic. As the\n-KAFKA format does not support named fields that key has no implicit name, so the key can be\n-given any name in the schema definition.\n-\n-When you create a table by using a CREATE TABLE AS SELECT statement, the key of\n-the resulting table is determined as follows:\n-\n-- If the statement contains neither a JOIN nor GROUP BY clause, the key type of the resulting\n-  table matches the key type of the source table, and the name matches the source unless the\n-  projection defines an alias for the column.\n-- If the statement contains a JOIN and no GROUP BY clause, the key type of the resulting table\n-  matches the type of the join columns. The key name is defined by these conditions:\n-    - FULL OUTER joins and joins on expressions other than column references have a\n-      system-generated name in the form `KSQL_COL_n`, where `n` is a positive integer,\n-      unless the projection defines an alias for the column.\n-    - For other joins that contain at least one column reference in their join criteria,\n-      the name matches the leftmost column reference in the join criteria.\n-- If the statement contains a GROUP BY clause, the grouping columns determine the key\n-  of the resulting table.\n-    - When grouping by a single column or STRUCT field, the name of the key column in the\n-      resulting table matches the name of the column or field, unless the projection includes\n-      an alias for the column or field. The type of the key column matches the column or field.\n-    - When grouping by a single expression that is not a column or STRUCT field, the resulting table\n-      has a system-generated key column name in the form `KSQL_COL_n`, where `n` is a positive\n-      integer, unless the projection contains an alias for the expression. The type of the\n-      column matches the result of the expression.\n-    - When grouping by multiple expressions, the resulting table has a system-generated key\n-      name in the form `KSQL_COL_n`, where `n` is a positive integer. The type of the column is\n-      a [SQL `STRING`](../../concepts/schemas), containing the grouping expressions concatenated\n-      together.\n+repartitioning, ksqlDB uses the correct format. If the data in your {{ site.ak }} topics \n+does not have a suitable key format, see [Key Requirements](syntax-reference.md#key-requirements).\n+\n+As the KAFKA format does not support serialize the column name within the data the key column name is ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ0MTI5Nw==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442441297", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            not important when it comes to joins. The key column type is important: for the join to be valid\n          \n          \n            \n            not important for joins. The key column type is important: for the join to be valid,", "author": "JimGalasyn", "createdAt": "2020-06-18T19:05:01Z", "path": "docs/developer-guide/joins/partition-data.md", "diffHunk": "@@ -35,61 +37,48 @@ the stream, which implicitly defines the correct key for it.\n \n ksqlDB requires keys to use the `KAFKA` format. For more information, see\n [Serialization Formats](../serialization.md#serialization-formats). If internally\n-repartitioning, ksqlDB uses the correct format.\n-\n-Because you can only use the primary key of a table as a joining column, it's\n-important to understand how keys are defined.\n-\n-When you create a table by using a CREATE TABLE statement you define the key in the schema and\n-it must be the same as that of the records in the underlying {{ site.ak }} topic. As the\n-KAFKA format does not support named fields that key has no implicit name, so the key can be\n-given any name in the schema definition.\n-\n-When you create a table by using a CREATE TABLE AS SELECT statement, the key of\n-the resulting table is determined as follows:\n-\n-- If the statement contains neither a JOIN nor GROUP BY clause, the key type of the resulting\n-  table matches the key type of the source table, and the name matches the source unless the\n-  projection defines an alias for the column.\n-- If the statement contains a JOIN and no GROUP BY clause, the key type of the resulting table\n-  matches the type of the join columns. The key name is defined by these conditions:\n-    - FULL OUTER joins and joins on expressions other than column references have a\n-      system-generated name in the form `KSQL_COL_n`, where `n` is a positive integer,\n-      unless the projection defines an alias for the column.\n-    - For other joins that contain at least one column reference in their join criteria,\n-      the name matches the leftmost column reference in the join criteria.\n-- If the statement contains a GROUP BY clause, the grouping columns determine the key\n-  of the resulting table.\n-    - When grouping by a single column or STRUCT field, the name of the key column in the\n-      resulting table matches the name of the column or field, unless the projection includes\n-      an alias for the column or field. The type of the key column matches the column or field.\n-    - When grouping by a single expression that is not a column or STRUCT field, the resulting table\n-      has a system-generated key column name in the form `KSQL_COL_n`, where `n` is a positive\n-      integer, unless the projection contains an alias for the expression. The type of the\n-      column matches the result of the expression.\n-    - When grouping by multiple expressions, the resulting table has a system-generated key\n-      name in the form `KSQL_COL_n`, where `n` is a positive integer. The type of the column is\n-      a [SQL `STRING`](../../concepts/schemas), containing the grouping expressions concatenated\n-      together.\n+repartitioning, ksqlDB uses the correct format. If the data in your {{ site.ak }} topics \n+does not have a suitable key format, see [Key Requirements](syntax-reference.md#key-requirements).\n+\n+As the KAFKA format does not support serialize the column name within the data the key column name is \n+not important when it comes to joins. The key column type is important: for the join to be valid", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQ0MTY0OQ==", "url": "https://github.com/confluentinc/ksql/pull/4686#discussion_r442441649", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `id`, of the same SQL type. The `clicks` stream  doesn't have a defined key, \n          \n          \n            \n            `id`, of the same SQL type. The `clicks` stream doesn't have a defined key,", "author": "JimGalasyn", "createdAt": "2020-06-18T19:05:42Z", "path": "docs/developer-guide/joins/partition-data.md", "diffHunk": "@@ -35,61 +37,48 @@ the stream, which implicitly defines the correct key for it.\n \n ksqlDB requires keys to use the `KAFKA` format. For more information, see\n [Serialization Formats](../serialization.md#serialization-formats). If internally\n-repartitioning, ksqlDB uses the correct format.\n-\n-Because you can only use the primary key of a table as a joining column, it's\n-important to understand how keys are defined.\n-\n-When you create a table by using a CREATE TABLE statement you define the key in the schema and\n-it must be the same as that of the records in the underlying {{ site.ak }} topic. As the\n-KAFKA format does not support named fields that key has no implicit name, so the key can be\n-given any name in the schema definition.\n-\n-When you create a table by using a CREATE TABLE AS SELECT statement, the key of\n-the resulting table is determined as follows:\n-\n-- If the statement contains neither a JOIN nor GROUP BY clause, the key type of the resulting\n-  table matches the key type of the source table, and the name matches the source unless the\n-  projection defines an alias for the column.\n-- If the statement contains a JOIN and no GROUP BY clause, the key type of the resulting table\n-  matches the type of the join columns. The key name is defined by these conditions:\n-    - FULL OUTER joins and joins on expressions other than column references have a\n-      system-generated name in the form `KSQL_COL_n`, where `n` is a positive integer,\n-      unless the projection defines an alias for the column.\n-    - For other joins that contain at least one column reference in their join criteria,\n-      the name matches the leftmost column reference in the join criteria.\n-- If the statement contains a GROUP BY clause, the grouping columns determine the key\n-  of the resulting table.\n-    - When grouping by a single column or STRUCT field, the name of the key column in the\n-      resulting table matches the name of the column or field, unless the projection includes\n-      an alias for the column or field. The type of the key column matches the column or field.\n-    - When grouping by a single expression that is not a column or STRUCT field, the resulting table\n-      has a system-generated key column name in the form `KSQL_COL_n`, where `n` is a positive\n-      integer, unless the projection contains an alias for the expression. The type of the\n-      column matches the result of the expression.\n-    - When grouping by multiple expressions, the resulting table has a system-generated key\n-      name in the form `KSQL_COL_n`, where `n` is a positive integer. The type of the column is\n-      a [SQL `STRING`](../../concepts/schemas), containing the grouping expressions concatenated\n-      together.\n+repartitioning, ksqlDB uses the correct format. If the data in your {{ site.ak }} topics \n+does not have a suitable key format, see [Key Requirements](syntax-reference.md#key-requirements).\n+\n+As the KAFKA format does not support serialize the column name within the data the key column name is \n+not important when it comes to joins. The key column type is important: for the join to be valid\n+both sides must have a key with the same SQL type.\n \n The following example shows a `users` table joined with a `clicks` stream\n-on the `userId` column. The `users` table has the correct primary key\n-`userId` that coincides with the joining column. But the `clicks` stream\n-doesn't have a defined key, so ksqlDB repartitions it on the joining\n-column (`userId`) to assign the key before performing the join.\n+on the click's `userId` column. The `users` table has a correct primary key,\n+`id`, of the same SQL type. The `clicks` stream  doesn't have a defined key, ", "originalCommit": "924faea82b766af4018f3e833199386894e14ead", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "80d328ff08edc79145236bcf21de4f9a9a5599b7", "url": "https://github.com/confluentinc/ksql/commit/80d328ff08edc79145236bcf21de4f9a9a5599b7", "message": "Update docs/concepts/collections/streams.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:46:40Z", "type": "commit"}, {"oid": "5ac786ecb33cf674d85066011598a28c5520c03b", "url": "https://github.com/confluentinc/ksql/commit/5ac786ecb33cf674d85066011598a28c5520c03b", "message": "Update docs/concepts/collections/streams.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:46:48Z", "type": "commit"}, {"oid": "451615ea4237a398c4f42bbeff05c06f2a45fcd2", "url": "https://github.com/confluentinc/ksql/commit/451615ea4237a398c4f42bbeff05c06f2a45fcd2", "message": "Update docs/concepts/collections/tables.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:46:56Z", "type": "commit"}, {"oid": "060edd1789406683b212644e3857365006b8c689", "url": "https://github.com/confluentinc/ksql/commit/060edd1789406683b212644e3857365006b8c689", "message": "Update docs/concepts/queries/pull.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:47:04Z", "type": "commit"}, {"oid": "fd2d69c3aba86b8988bab290ffda163f83ee11c3", "url": "https://github.com/confluentinc/ksql/commit/fd2d69c3aba86b8988bab290ffda163f83ee11c3", "message": "Update docs/developer-guide/create-a-stream.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:47:12Z", "type": "commit"}, {"oid": "07b6592af47bb677a55c7b5ff9ed2f900ddcd618", "url": "https://github.com/confluentinc/ksql/commit/07b6592af47bb677a55c7b5ff9ed2f900ddcd618", "message": "Update docs/developer-guide/create-a-stream.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:47:19Z", "type": "commit"}, {"oid": "5ee0ea0c1c27c6d38a6b1114761244e63b9d236c", "url": "https://github.com/confluentinc/ksql/commit/5ee0ea0c1c27c6d38a6b1114761244e63b9d236c", "message": "Update docs/developer-guide/create-a-stream.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:47:26Z", "type": "commit"}, {"oid": "6d73b57a2aad90a24a353510ca75d83f27a14c11", "url": "https://github.com/confluentinc/ksql/commit/6d73b57a2aad90a24a353510ca75d83f27a14c11", "message": "Update docs/developer-guide/create-a-stream.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:47:34Z", "type": "commit"}, {"oid": "6fef855378fb1f4350661b13d50d4365d2a3b3e5", "url": "https://github.com/confluentinc/ksql/commit/6fef855378fb1f4350661b13d50d4365d2a3b3e5", "message": "Update docs/developer-guide/create-a-stream.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:47:42Z", "type": "commit"}, {"oid": "64679b77579ac3d147137a582ec9df62d330ba94", "url": "https://github.com/confluentinc/ksql/commit/64679b77579ac3d147137a582ec9df62d330ba94", "message": "Update docs/developer-guide/create-a-table.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:47:49Z", "type": "commit"}, {"oid": "bf26e26fc3b1ae38a87dc2466b28042f729ebc22", "url": "https://github.com/confluentinc/ksql/commit/bf26e26fc3b1ae38a87dc2466b28042f729ebc22", "message": "Update docs/developer-guide/create-a-table.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:47:56Z", "type": "commit"}, {"oid": "a4ed114cada9d06a23a5fd83ca5694ae446ad962", "url": "https://github.com/confluentinc/ksql/commit/a4ed114cada9d06a23a5fd83ca5694ae446ad962", "message": "Update docs/developer-guide/joins/join-streams-and-tables.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:48:04Z", "type": "commit"}, {"oid": "1e539269247696e5ee92986048b423358052bafa", "url": "https://github.com/confluentinc/ksql/commit/1e539269247696e5ee92986048b423358052bafa", "message": "Update docs/developer-guide/joins/join-streams-and-tables.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:56:56Z", "type": "commit"}, {"oid": "e8d13bc76e34dd862c07360adbaff6a888715577", "url": "https://github.com/confluentinc/ksql/commit/e8d13bc76e34dd862c07360adbaff6a888715577", "message": "Update docs/developer-guide/joins/join-streams-and-tables.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:57:03Z", "type": "commit"}, {"oid": "8144661c694a109fc530d4bda93ba70ee014ac01", "url": "https://github.com/confluentinc/ksql/commit/8144661c694a109fc530d4bda93ba70ee014ac01", "message": "Update docs/developer-guide/joins/partition-data.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:57:11Z", "type": "commit"}, {"oid": "3b0b76718a0366beff5254639fcdeb190d0b6446", "url": "https://github.com/confluentinc/ksql/commit/3b0b76718a0366beff5254639fcdeb190d0b6446", "message": "Update docs/developer-guide/joins/partition-data.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:57:18Z", "type": "commit"}, {"oid": "a8873086e883458c21468344bc97d4ed472ec7b6", "url": "https://github.com/confluentinc/ksql/commit/a8873086e883458c21468344bc97d4ed472ec7b6", "message": "Update docs/developer-guide/joins/partition-data.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:57:25Z", "type": "commit"}, {"oid": "6afb78fcba4ce886254b3735bbcf8d5836a6a8b7", "url": "https://github.com/confluentinc/ksql/commit/6afb78fcba4ce886254b3735bbcf8d5836a6a8b7", "message": "Update docs/developer-guide/joins/partition-data.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:57:31Z", "type": "commit"}, {"oid": "2c10886fab24384598329252cc6022ed7d50fdcb", "url": "https://github.com/confluentinc/ksql/commit/2c10886fab24384598329252cc6022ed7d50fdcb", "message": "Update docs/developer-guide/joins/partition-data.md\n\nCo-authored-by: Jim Galasyn <jim.galasyn@confluent.io>", "committedDate": "2020-06-18T19:57:38Z", "type": "commit"}]}