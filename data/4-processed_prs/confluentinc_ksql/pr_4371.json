{"pr_number": 4371, "pr_title": "fix: delimiters reset across non-delimited types (reverts #4366)", "pr_createdAt": "2020-01-23T17:13:43Z", "pr_url": "https://github.com/confluentinc/ksql/pull/4371", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDI0NzgxNA==", "url": "https://github.com/confluentinc/ksql/pull/4371#discussion_r370247814", "bodyText": "I added this so that I can get a green build - will remove before merging (separate PR to fix this - see #4373)", "author": "agavra", "createdAt": "2020-01-23T17:14:05Z", "path": "ksql-engine/src/test/java/io/confluent/ksql/integration/SecureIntegrationTest.java", "diffHunk": "@@ -153,6 +152,7 @@ public void after() {\n     }\n   }\n \n+  @SuppressWarnings(\"deprecation\")", "originalCommit": "fd29e4fab6c5a712c157559229dfee301b03df3c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b537f708bbb64e2c264203e2e44d5313d2064c4d", "url": "https://github.com/confluentinc/ksql/commit/b537f708bbb64e2c264203e2e44d5313d2064c4d", "message": "fix: delimiters reset across non-delimited types (reverts #4366)", "committedDate": "2020-01-23T18:16:10Z", "type": "commit"}, {"oid": "b537f708bbb64e2c264203e2e44d5313d2064c4d", "url": "https://github.com/confluentinc/ksql/commit/b537f708bbb64e2c264203e2e44d5313d2064c4d", "message": "fix: delimiters reset across non-delimited types (reverts #4366)", "committedDate": "2020-01-23T18:16:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQyNjYyOQ==", "url": "https://github.com/confluentinc/ksql/pull/4371#discussion_r370426629", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // will use the default limiter, as opposed to |)\n          \n          \n            \n                    // will use the default delimiter, as opposed to |)\n          \n      \n    \n    \n  \n\nnit: typo", "author": "vcrfxia", "createdAt": "2020-01-24T00:36:59Z", "path": "ksql-engine/src/main/java/io/confluent/ksql/analyzer/Analyzer.java", "diffHunk": "@@ -258,6 +258,16 @@ private Format getValueFormat(final Sink sink) {\n     }\n \n     private Optional<Delimiter> getValueDelimiter(final Sink sink) {\n+      if (getValueFormat(sink) != Format.DELIMITED) {\n+        // the delimiter is not inherited across non-delimited types\n+        // (e.g. if source A is DELIMITED with |, and I create sink B\n+        // with JSON from A and then sink C with DELIMITED from B, C\n+        // will use the default limiter, as opposed to |)", "originalCommit": "b537f708bbb64e2c264203e2e44d5313d2064c4d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7810185c6e19db55c011c16312015e0c5347b13e", "url": "https://github.com/confluentinc/ksql/commit/7810185c6e19db55c011c16312015e0c5347b13e", "message": "chore: fix typo\n\nCo-Authored-By: Victoria Xia <victoria.f.xia281@gmail.com>", "committedDate": "2020-01-24T00:38:34Z", "type": "commit"}]}