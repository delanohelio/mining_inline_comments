{"pr_number": 4729, "pr_title": "feat: add confluent-hub to ksqlDB docker image", "pr_createdAt": "2020-03-06T21:35:24Z", "pr_url": "https://github.com/confluentinc/ksql/pull/4729", "timeline": [{"oid": "95d54296704004c4da8f115582cd469451dcadda", "url": "https://github.com/confluentinc/ksql/commit/95d54296704004c4da8f115582cd469451dcadda", "message": "feat: add confluent-hub to ksqlDB docker image", "committedDate": "2020-03-06T21:31:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NjU2OQ==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389156569", "bodyText": "@JimGalasyn the changes in this file should not go live until the next released version of ksqlDB, as version 0.7.0 does not contain confluent-hub (but 0.8.0 will). Is targeting master appropriate, or should I hold off on merging until the next ksqlDB release?", "author": "vcrfxia", "createdAt": "2020-03-06T21:37:36Z", "path": "docs-md/tutorials/embedded-connect.md", "diffHunk": "@@ -136,15 +136,18 @@ services:\n 2. Get the JDBC connector\n -------------------------\n \n-[Download the JDBC connector](https://www.confluent.io/hub/confluentinc/kafka-connect-jdbc)\n-to your local working directory. Next, unzip the downloaded archive:\n+The easiest way to download connectors for use in ksqlDB with embedded {{ site.kconnect }}", "originalCommit": "95d54296704004c4da8f115582cd469451dcadda", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1OTMyNA==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389159324", "bodyText": "We should set the local directory to be whatever Compose will mount.", "author": "MichaelDrogalis", "createdAt": "2020-03-06T21:44:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE3MDI4Mg==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389170282", "bodyText": "We should set the local directory to be whatever Compose will mount.\n\nDo you mean setting the value for /path/to/local/dir in both the docker-compose and in the confluent-hub command, in order to remove the need for the user to manually uncomment the volume mount and update the directory in both places?\nThat makes sense to me assuming there's a directory we're always guaranteed to be able to download to, but I couldn't think of one since only absolute paths are allowed in the volume mount.", "author": "vcrfxia", "createdAt": "2020-03-06T22:15:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE3MTUxNg==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389171516", "bodyText": "I think you can do ./local-path/here/.", "author": "MichaelDrogalis", "createdAt": "2020-03-06T22:18:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE3MzA4Nw==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389173087", "bodyText": "Doesn't work for me locally:\n$ docker run -v ./plugins:/share/confluent-hub-components <test image> confluent-hub install --no-prompt confluentinc/kafka-connect-datagen:0.2.0\ndocker: Error response from daemon: create ./plugins: \"./plugins\" includes invalid characters for a local volume name, only \"[a-zA-Z0-9][a-zA-Z0-9_.-]\" are allowed. If you intended to pass a host directory, use absolute path.\nSee 'docker run --help'.\n\nAm I doing something wrong?", "author": "vcrfxia", "createdAt": "2020-03-06T22:23:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE3NTMxNg==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389175316", "bodyText": "Resolved offline. Compose has different behavior than Docker :( docker/cli#1203", "author": "MichaelDrogalis", "createdAt": "2020-03-06T22:30:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE3ODAwNQ==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389178005", "bodyText": "Updated with a workaround.", "author": "vcrfxia", "createdAt": "2020-03-06T22:38:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNTY1MQ==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389215651", "bodyText": "@vcrfxia iiuc, 0.8.0 goes out with CP 5.5, so if you retarget this PR to the 5.5.x branch, it will go live when CP 5.5 goes live..", "author": "JimGalasyn", "createdAt": "2020-03-07T01:47:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NjU2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNzc5MQ==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389217791", "bodyText": "Ah hm. I wasn't planning to backport to 5.5.x since it's past feature freeze, so it sounds like I should just merge to master and let the change be picked up when the 0.8.0 docs branch is cut. Thanks for clarifying!", "author": "vcrfxia", "createdAt": "2020-03-07T02:08:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NjU2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1Njg0Mg==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389156842", "bodyText": "5.4.1 is the current latest version of the JDBC Connector, but how should we keep this version up to date as newer versions are released?", "author": "vcrfxia", "createdAt": "2020-03-06T21:38:12Z", "path": "docs-md/tutorials/embedded-connect.md", "diffHunk": "@@ -136,15 +136,18 @@ services:\n 2. Get the JDBC connector\n -------------------------\n \n-[Download the JDBC connector](https://www.confluent.io/hub/confluentinc/kafka-connect-jdbc)\n-to your local working directory. Next, unzip the downloaded archive:\n+The easiest way to download connectors for use in ksqlDB with embedded {{ site.kconnect }}\n+is via the [Confluent Hub Client](https://docs.confluent.io/current/connect/managing/confluent-hub/client.html)\n+included in the `ksqlDB-server` Docker image.\n \n+To download the JDBC connector, use the following command:\n ```bash\n-unzip confluentinc-kafka-connect-jdbc-*.zip\n+docker run -v /path/to/local/dir:/share/confluent-hub-components confluentinc/ksqldb-server:0.7.0 confluent-hub install --no-prompt confluentinc/kafka-connect-jdbc:5.4.1", "originalCommit": "95d54296704004c4da8f115582cd469451dcadda", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxNzQ0Nw==", "url": "https://github.com/confluentinc/ksql/pull/4729#discussion_r389217447", "bodyText": "Updated the version to {{ site.cprelease }} as discussed offline.", "author": "vcrfxia", "createdAt": "2020-03-07T02:05:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1Njg0Mg=="}], "type": "inlineReview"}, {"oid": "5e27502d68f2e770ea97c01706d93f6d1f2ebe10", "url": "https://github.com/confluentinc/ksql/commit/5e27502d68f2e770ea97c01706d93f6d1f2ebe10", "message": "docs: remove need to uncomment volume mount", "committedDate": "2020-03-06T22:37:35Z", "type": "commit"}, {"oid": "8ebaaab726bdefb6d3ac953ecd17f7b953d768fb", "url": "https://github.com/confluentinc/ksql/commit/8ebaaab726bdefb6d3ac953ecd17f7b953d768fb", "message": "docs: replace connector version with macro", "committedDate": "2020-03-07T02:04:33Z", "type": "commit"}]}