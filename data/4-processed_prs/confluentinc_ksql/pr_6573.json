{"pr_number": 6573, "pr_title": "fix: cannot reference variables in DEFINE statement", "pr_createdAt": "2020-11-04T16:34:18Z", "pr_url": "https://github.com/confluentinc/ksql/pull/6573", "timeline": [{"oid": "6712abce98e9e8de3f71867716b9c9785bdeb719", "url": "https://github.com/confluentinc/ksql/commit/6712abce98e9e8de3f71867716b9c9785bdeb719", "message": "fix: cannot reference variables in DEFINE statement", "committedDate": "2020-11-05T15:31:19Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2OTUxNA==", "url": "https://github.com/confluentinc/ksql/pull/6573#discussion_r518169514", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you want to escape a variable reference, so it is not substituted, then use double `$$` characters.\n          \n          \n            \n            To escape a variable reference, so it isn't substituted, use double dollar-sign characters, `$$`. The following example shows how to escape a variable named `format`.", "author": "JimGalasyn", "createdAt": "2020-11-05T16:07:02Z", "path": "docs/developer-guide/variable-substitution.md", "diffHunk": "@@ -86,6 +86,16 @@ ksqlDB doesn't add single-quotes to values during variable substitution. Also, y\n !!! note\n     Variables are case-insensitive. A reference to `${replicas}` is the same as `${REPLICAS}`.\n \n+Escape substitution variables\n+-----------------------------\n+\n+If you want to escape a variable reference, so it is not substituted, then use double `$$` characters.", "originalCommit": "ca9884ae54066337c8add1acae1c53ced5dc36ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODE2OTk2Mw==", "url": "https://github.com/confluentinc/ksql/pull/6573#discussion_r518169963", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The above query will become `SELECT '${format}' FROM stream`\n          \n          \n            \n            ksqlDB converts the previous query to `SELECT '${format}' FROM stream`.", "author": "JimGalasyn", "createdAt": "2020-11-05T16:07:37Z", "path": "docs/developer-guide/variable-substitution.md", "diffHunk": "@@ -86,6 +86,16 @@ ksqlDB doesn't add single-quotes to values during variable substitution. Also, y\n !!! note\n     Variables are case-insensitive. A reference to `${replicas}` is the same as `${REPLICAS}`.\n \n+Escape substitution variables\n+-----------------------------\n+\n+If you want to escape a variable reference, so it is not substituted, then use double `$$` characters.\n+```\n+DEFINE format = 'AVRO';\n+SELECT '$${format}' FROM stream;\n+```\n+The above query will become `SELECT '${format}' FROM stream`", "originalCommit": "ca9884ae54066337c8add1acae1c53ced5dc36ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "989013d3443e4edbd073ae5a4cc9ab9bbf4ba14a", "url": "https://github.com/confluentinc/ksql/commit/989013d3443e4edbd073ae5a4cc9ab9bbf4ba14a", "message": "fix: cannot reference variables in DEFINE statement", "committedDate": "2020-11-10T18:39:48Z", "type": "commit"}, {"oid": "dcfb41abaaad1f546fd61397c145502e8b5f1227", "url": "https://github.com/confluentinc/ksql/commit/dcfb41abaaad1f546fd61397c145502e8b5f1227", "message": "test: add test to check escaped variable references", "committedDate": "2020-11-10T18:39:48Z", "type": "commit"}, {"oid": "091e22965094ac9953506955365c5217209f02d4", "url": "https://github.com/confluentinc/ksql/commit/091e22965094ac9953506955365c5217209f02d4", "message": "docs: update docs to show how to escape variables", "committedDate": "2020-11-10T18:39:48Z", "type": "commit"}, {"oid": "eeab91a18b5933f9152ed997c57981a7057c892e", "url": "https://github.com/confluentinc/ksql/commit/eeab91a18b5933f9152ed997c57981a7057c892e", "message": "test: add more tests", "committedDate": "2020-11-10T18:39:48Z", "type": "commit"}, {"oid": "eeab91a18b5933f9152ed997c57981a7057c892e", "url": "https://github.com/confluentinc/ksql/commit/eeab91a18b5933f9152ed997c57981a7057c892e", "message": "test: add more tests", "committedDate": "2020-11-10T18:39:48Z", "type": "forcePushed"}]}