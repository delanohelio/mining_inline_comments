{"pr_number": 781, "pr_title": "Fix msal issue 862", "pr_createdAt": "2020-01-16T23:37:55Z", "pr_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/781", "timeline": [{"oid": "9f76b411a2e4f4512cfad9f21470b00372dd4d10", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/9f76b411a2e4f4512cfad9f21470b00372dd4d10", "message": "Fix msal issue 862", "committedDate": "2020-01-16T23:37:07Z", "type": "commit"}, {"oid": "4e887c088c50f5a5d7069da0d0d36aba8c21d43e", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/4e887c088c50f5a5d7069da0d0d36aba8c21d43e", "message": "Merge branch 'dev' into shahzaibj/fix-msal-issue-862", "committedDate": "2020-01-17T18:02:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODExNzU5MA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/781#discussion_r368117590", "bodyText": "should we do this in getAuthorizationRequest() above? (adding claims as part of the AuthorizationRequest object through its builder, then use those values to construct TokenRequest in strategy.createTokenRequest()).\nLengthier solution, but I think it fits with the pattern we have here better.", "author": "rpdome", "createdAt": "2020-01-17T20:14:27Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/controllers/BaseController.java", "diffHunk": "@@ -186,6 +186,11 @@ protected TokenResult performTokenRequest(@NonNull final OAuth2Strategy strategy\n         HttpWebRequest.throwIfNetworkNotAvailable(parameters.getAppContext());\n \n         TokenRequest tokenRequest = strategy.createTokenRequest(request, response);\n+\n+        if (tokenRequest instanceof MicrosoftTokenRequest) {", "originalCommit": "4e887c088c50f5a5d7069da0d0d36aba8c21d43e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODExODY3Mg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/781#discussion_r368118672", "bodyText": "Actually... I just noticed that we already set the claims over there (line 154). Therefore the bug should be in strategy.createTokenRequest(s).", "author": "rpdome", "createdAt": "2020-01-17T20:17:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODExNzU5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODE4MDM1Ng==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/781#discussion_r368180356", "bodyText": "Addressed", "author": "shahzaibj", "createdAt": "2020-01-17T23:45:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODExNzU5MA=="}], "type": "inlineReview"}, {"oid": "abe841a49b80962e53e42cdefe0edbaf2e84ce47", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/abe841a49b80962e53e42cdefe0edbaf2e84ce47", "message": "Address comment", "committedDate": "2020-01-17T23:44:56Z", "type": "commit"}, {"oid": "ed3a0e0f92bb95954b94cd32e433d5ad04d6d408", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/ed3a0e0f92bb95954b94cd32e433d5ad04d6d408", "message": "Merge branch 'dev' into shahzaibj/fix-msal-issue-862", "committedDate": "2020-01-18T01:14:46Z", "type": "commit"}]}