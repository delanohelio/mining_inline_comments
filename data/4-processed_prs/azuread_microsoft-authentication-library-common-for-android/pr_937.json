{"pr_number": 937, "pr_title": "Log additional information when attempting to redirect.", "pr_createdAt": "2020-06-16T17:15:28Z", "pr_url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937", "timeline": [{"oid": "abda453ed6c1b706b436ba197caa0f1b9ef85630", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/abda453ed6c1b706b436ba197caa0f1b9ef85630", "message": "Log additional information when attempting to redirect.\n\nThe redirect uri, when invalid, will fail to load.  We should log some of that value.", "committedDate": "2020-06-16T17:07:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MDQwNQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441090405", "bodyText": "nit: final", "author": "shahzaibj", "createdAt": "2020-06-16T19:26:36Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -326,6 +339,7 @@ public void run() {\n     }\n \n     private boolean processInvalidUrl(@NonNull final WebView view, @NonNull final String url) {\n+        String lowerCaseUrl = url.toLowerCase(Locale.US);", "originalCommit": "abda453ed6c1b706b436ba197caa0f1b9ef85630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NzU5MQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441097591", "bodyText": "finalized.", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T19:40:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MDQwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MDczOQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441090739", "bodyText": "nit: final", "author": "shahzaibj", "createdAt": "2020-06-16T19:27:14Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -337,28 +351,32 @@ private boolean processInvalidUrl(@NonNull final WebView view, @NonNull final St\n             return true;\n         }\n \n-        if (url.toLowerCase(Locale.US).equals(\"about:blank\")) {\n+        if (\"about:blank\".equals(lowerCaseUrl)) {\n             Logger.verbose(TAG, \"It is an blank page request\");\n             return true;\n         }\n \n-        if (!url.toLowerCase(Locale.US).startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n-            String redactedUrl = \"redacted\";\n-            try {\n-                redactedUrl = StringExtensions.removeQueryParameterFromUrl(url);\n-            } catch (final URISyntaxException e) {\n-                // Best effort.\n-            }\n+        if (!lowerCaseUrl.startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n+            String redactedUrl = removeQueryParameters(url);", "originalCommit": "abda453ed6c1b706b436ba197caa0f1b9ef85630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwODM4NA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441108384", "bodyText": "added qualifier", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T20:00:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MDczOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MzM0OA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441093348", "bodyText": "Let's replace code with auth code", "author": "shahzaibj", "createdAt": "2020-06-16T19:32:14Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java", "diffHunk": "@@ -185,10 +185,11 @@ private void checkStartUrl(final String url) {\n             Logger.info(TAG, \"onPageStarted: Non-hierarchical loading uri.\");\n             Logger.infoPII(TAG, \"start url: \" + url);\n         } else if (StringUtil.isEmpty(uri.getQueryParameter(AuthenticationConstants.OAuth2.CODE))) {\n-            Logger.infoPII(TAG, \"Host: \" + uri.getHost() + \" Path: \" + uri.getPath());\n+            Logger.info(TAG, \"onPageStarted: URI has no code query parameter.\");", "originalCommit": "abda453ed6c1b706b436ba197caa0f1b9ef85630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwODQ0NA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441108444", "bodyText": "done", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T20:01:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MzM0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MzcxOQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441093719", "bodyText": "can be final", "author": "shahzaibj", "createdAt": "2020-06-16T19:32:56Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -337,28 +351,32 @@ private boolean processInvalidUrl(@NonNull final WebView view, @NonNull final St\n             return true;\n         }\n \n-        if (url.toLowerCase(Locale.US).equals(\"about:blank\")) {\n+        if (\"about:blank\".equals(lowerCaseUrl)) {\n             Logger.verbose(TAG, \"It is an blank page request\");\n             return true;\n         }\n \n-        if (!url.toLowerCase(Locale.US).startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n-            String redactedUrl = \"redacted\";\n-            try {\n-                redactedUrl = StringExtensions.removeQueryParameterFromUrl(url);\n-            } catch (final URISyntaxException e) {\n-                // Best effort.\n-            }\n+        if (!lowerCaseUrl.startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n+            String redactedUrl = removeQueryParameters(url);\n \n             Logger.error(TAG, \"The webView was redirected to an unsafe URL: \" + redactedUrl, null);\n             returnError(ErrorStrings.WEBVIEW_REDIRECTURL_NOT_SSL_PROTECTED, \"The webView was redirected to an unsafe URL.\");\n             view.stopLoading();\n             return true;\n         }\n-\n+        Logger.infoPII(TAG,\"We are declining to override loading and redirect to invalid URL: '\"\n+                + removeQueryParameters(url) + \"' the user's url pattern is '\" + mRedirectUrl + \"'\");\n         return false;\n     }\n \n+    private String removeQueryParameters(@NonNull String url) {", "originalCommit": "abda453ed6c1b706b436ba197caa0f1b9ef85630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwODUyOA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441108528", "bodyText": "added qualifier", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T20:01:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MzcxOQ=="}], "type": "inlineReview"}, {"oid": "69aa41ff8f39ee85419b84ff73d9c0ae7e051e24", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/69aa41ff8f39ee85419b84ff73d9c0ae7e051e24", "message": "Log additional information when attempting to redirect.\n\nThe redirect uri, when invalid, will fail to load.  We should log some of that value.", "committedDate": "2020-06-16T19:32:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MzcyNw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441093727", "bodyText": "we can log an error message here about the exception, in the rarest case we hit this", "author": "kreedula", "createdAt": "2020-06-16T19:32:58Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -337,28 +351,32 @@ private boolean processInvalidUrl(@NonNull final WebView view, @NonNull final St\n             return true;\n         }\n \n-        if (url.toLowerCase(Locale.US).equals(\"about:blank\")) {\n+        if (\"about:blank\".equals(lowerCaseUrl)) {\n             Logger.verbose(TAG, \"It is an blank page request\");\n             return true;\n         }\n \n-        if (!url.toLowerCase(Locale.US).startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n-            String redactedUrl = \"redacted\";\n-            try {\n-                redactedUrl = StringExtensions.removeQueryParameterFromUrl(url);\n-            } catch (final URISyntaxException e) {\n-                // Best effort.\n-            }\n+        if (!lowerCaseUrl.startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n+            String redactedUrl = removeQueryParameters(url);\n \n             Logger.error(TAG, \"The webView was redirected to an unsafe URL: \" + redactedUrl, null);\n             returnError(ErrorStrings.WEBVIEW_REDIRECTURL_NOT_SSL_PROTECTED, \"The webView was redirected to an unsafe URL.\");\n             view.stopLoading();\n             return true;\n         }\n-\n+        Logger.infoPII(TAG,\"We are declining to override loading and redirect to invalid URL: '\"\n+                + removeQueryParameters(url) + \"' the user's url pattern is '\" + mRedirectUrl + \"'\");\n         return false;\n     }\n \n+    private String removeQueryParameters(@NonNull String url) {\n+        try {\n+            return StringExtensions.removeQueryParameterFromUrl(url);\n+        } catch (final URISyntaxException e) {\n+            return \"redacted\";", "originalCommit": "abda453ed6c1b706b436ba197caa0f1b9ef85630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDY3Nw==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441094677", "bodyText": "Yes.  Particularly since we started this process with a URI object.", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T19:34:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MzcyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwODA2NQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441108065", "bodyText": "log line added.", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T20:00:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MzcyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwOTQwMQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441109401", "bodyText": "Log line added.", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T20:03:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MzcyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDM1MA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441094350", "bodyText": "The method name can be a bit confusing since if we hit the catch block then we are not returning a URL with query parameters removed instead we are returning a pre-defined String", "author": "shahzaibj", "createdAt": "2020-06-16T19:34:13Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -337,28 +351,32 @@ private boolean processInvalidUrl(@NonNull final WebView view, @NonNull final St\n             return true;\n         }\n \n-        if (url.toLowerCase(Locale.US).equals(\"about:blank\")) {\n+        if (\"about:blank\".equals(lowerCaseUrl)) {\n             Logger.verbose(TAG, \"It is an blank page request\");\n             return true;\n         }\n \n-        if (!url.toLowerCase(Locale.US).startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n-            String redactedUrl = \"redacted\";\n-            try {\n-                redactedUrl = StringExtensions.removeQueryParameterFromUrl(url);\n-            } catch (final URISyntaxException e) {\n-                // Best effort.\n-            }\n+        if (!lowerCaseUrl.startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n+            String redactedUrl = removeQueryParameters(url);\n \n             Logger.error(TAG, \"The webView was redirected to an unsafe URL: \" + redactedUrl, null);\n             returnError(ErrorStrings.WEBVIEW_REDIRECTURL_NOT_SSL_PROTECTED, \"The webView was redirected to an unsafe URL.\");\n             view.stopLoading();\n             return true;\n         }\n-\n+        Logger.infoPII(TAG,\"We are declining to override loading and redirect to invalid URL: '\"\n+                + removeQueryParameters(url) + \"' the user's url pattern is '\" + mRedirectUrl + \"'\");\n         return false;\n     }\n \n+    private String removeQueryParameters(@NonNull String url) {", "originalCommit": "abda453ed6c1b706b436ba197caa0f1b9ef85630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5OTgxOA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441099818", "bodyText": "removeQueryParametersOrRedact?", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T19:44:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDM1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwMDQ2Mg==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441100462", "bodyText": "Yup, that sounds good!", "author": "shahzaibj", "createdAt": "2020-06-16T19:45:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDM1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwODY1OA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441108658", "bodyText": "changed.", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T20:01:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDM1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDgxMA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441094810", "bodyText": "Should we log the actual url here? I mean the one with the query parameters still there", "author": "shahzaibj", "createdAt": "2020-06-16T19:35:08Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -337,28 +351,32 @@ private boolean processInvalidUrl(@NonNull final WebView view, @NonNull final St\n             return true;\n         }\n \n-        if (url.toLowerCase(Locale.US).equals(\"about:blank\")) {\n+        if (\"about:blank\".equals(lowerCaseUrl)) {\n             Logger.verbose(TAG, \"It is an blank page request\");\n             return true;\n         }\n \n-        if (!url.toLowerCase(Locale.US).startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n-            String redactedUrl = \"redacted\";\n-            try {\n-                redactedUrl = StringExtensions.removeQueryParameterFromUrl(url);\n-            } catch (final URISyntaxException e) {\n-                // Best effort.\n-            }\n+        if (!lowerCaseUrl.startsWith(AuthenticationConstants.Broker.REDIRECT_SSL_PREFIX)) {\n+            String redactedUrl = removeQueryParameters(url);\n \n             Logger.error(TAG, \"The webView was redirected to an unsafe URL: \" + redactedUrl, null);\n             returnError(ErrorStrings.WEBVIEW_REDIRECTURL_NOT_SSL_PROTECTED, \"The webView was redirected to an unsafe URL.\");\n             view.stopLoading();\n             return true;\n         }\n-\n+        Logger.infoPII(TAG,\"We are declining to override loading and redirect to invalid URL: '\"\n+                + removeQueryParameters(url) + \"' the user's url pattern is '\" + mRedirectUrl + \"'\");", "originalCommit": "abda453ed6c1b706b436ba197caa0f1b9ef85630", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5ODIyNA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441098224", "bodyText": "I saw that we didn't to it above, and was just following that pattern.  Should we?", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T19:41:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDgxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwMjE1Ng==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441102156", "bodyText": "I think it's better not too as we are not sure what data the qp's can have here, since this url is not known to us. Logging this invalid url should give us good info on what's wrong anyways.", "author": "kreedula", "createdAt": "2020-06-16T19:49:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDgxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEwOTI1MA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441109250", "bodyText": "I think that we should be OK without it, so I'm leaving it out.", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T20:02:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDgxMA=="}], "type": "inlineReview"}, {"oid": "7021c206a23fd946fa2718d2f1e0417375aac721", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/7021c206a23fd946fa2718d2f1e0417375aac721", "message": "Log additional information when attempting to redirect.\n\nThe redirect uri, when invalid, will fail to load.  We should log some of that value.", "committedDate": "2020-06-16T19:58:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTExMDMzNA==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441110334", "bodyText": "Let's add a new line at the end of this file", "author": "shahzaibj", "createdAt": "2020-06-16T20:05:14Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/OAuth2WebViewClient.java", "diffHunk": "@@ -185,10 +185,14 @@ private void checkStartUrl(final String url) {\n             Logger.info(TAG, \"onPageStarted: Non-hierarchical loading uri.\");\n             Logger.infoPII(TAG, \"start url: \" + url);\n         } else if (StringUtil.isEmpty(uri.getQueryParameter(AuthenticationConstants.OAuth2.CODE))) {\n-            Logger.infoPII(TAG, \"Host: \" + uri.getHost() + \" Path: \" + uri.getPath());\n+            Logger.info(TAG, \"onPageStarted: URI has no auth code ('\"\n+                    + AuthenticationConstants.OAuth2.CODE + \"') query parameter.\");\n+            Logger.infoPII(TAG, \"Scheme:\" + uri.getScheme() + \" Host: \" + uri.getHost()\n+                    + \" Path: \" + uri.getPath());\n         } else {\n             Logger.info(TAG, \"Auth code is returned for the loading url.\");\n-            Logger.infoPII(TAG, \"Host: \" + uri.getHost() + \" Path: \" + uri.getPath());\n+            Logger.infoPII(TAG, \"Scheme:\" + uri.getScheme() + \" Host: \" + uri.getHost()\n+                    + \" Path: \" + uri.getPath());\n         }\n     }\n }", "originalCommit": "7021c206a23fd946fa2718d2f1e0417375aac721", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTExMzYzNQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441113635", "bodyText": "Added.", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T20:12:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTExMDMzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTExMDUyMQ==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441110521", "bodyText": "Let's run formatter on this file", "author": "shahzaibj", "createdAt": "2020-06-16T20:05:39Z", "path": "common/src/main/java/com/microsoft/identity/common/internal/ui/webview/AzureActiveDirectoryWebViewClient.java", "diffHunk": "@@ -118,6 +118,19 @@ public boolean shouldOverrideUrlLoading(final WebView view, final WebResourceReq\n         return handleUrl(view, requestUrl.toString());\n     }\n \n+    /**\n+     * Interpret and take action on a redirect url.\n+     * This function will return true in every case save 1.  That is, when the URL is none of:\n+     * <ul><li>A urn containing an authorization challenge (starts with \"urn:http-auth:PKeyAuth\")</li>\n+     * <li>A url that starts with the same prefix as the tenant's redirect url</li>\n+     * <li>An explicit request to open the browser (starts with \"browser://\")</li>\n+     * <li>A request to install the auth broker (starts with \"msauth://\")</li>\n+     * <li>It is a request that has the intent of starting the broker and the url starts with \"browser://\"</li>\n+     * <li>It <strong>does not</strong> begin with \"https://\".</li></ul>\n+     * @param view The WebView that is initiating the callback.\n+     * @param url  The string representation of the url.\n+     * @return false if we will not take action on the url.\n+     */", "originalCommit": "7021c206a23fd946fa2718d2f1e0417375aac721", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTExMzU4Ng==", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/pull/937#discussion_r441113586", "bodyText": "Formatted.", "author": "AdamBJohnsonx", "createdAt": "2020-06-16T20:11:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTExMDUyMQ=="}], "type": "inlineReview"}, {"oid": "e254e5eb571a48b7354be815d5f47c2460190629", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/e254e5eb571a48b7354be815d5f47c2460190629", "message": "Formatting changes.", "committedDate": "2020-06-16T20:10:29Z", "type": "commit"}, {"oid": "e3e32e9b8e0b9d3940f253062086dd3976b36710", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/e3e32e9b8e0b9d3940f253062086dd3976b36710", "message": "Undo changes to misc.xml.", "committedDate": "2020-06-16T20:15:20Z", "type": "commit"}, {"oid": "cbba9d3fd71a59e607bfc3c16ab14d44042671c3", "url": "https://github.com/AzureAD/microsoft-authentication-library-common-for-android/commit/cbba9d3fd71a59e607bfc3c16ab14d44042671c3", "message": "Merge branch 'dev' into icm190584567", "committedDate": "2020-06-16T20:19:19Z", "type": "commit"}]}