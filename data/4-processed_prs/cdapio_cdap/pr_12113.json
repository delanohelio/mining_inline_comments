{"pr_number": 12113, "pr_title": "[CDAP-16621] Remove export modal when exporting pipeline JSON", "pr_createdAt": "2020-04-23T17:02:20Z", "pr_url": "https://github.com/cdapio/cdap/pull/12113", "timeline": [{"oid": "cee0ee57cee9f73e78371894b75642c049d5686e", "url": "https://github.com/cdapio/cdap/commit/cee0ee57cee9f73e78371894b75642c049d5686e", "message": "Add state to actions popover to allow closing popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component", "committedDate": "2020-04-23T17:31:12Z", "type": "forcePushed"}, {"oid": "9ba0efeeb65651535f35cc7a2589eca04b08bb76", "url": "https://github.com/cdapio/cdap/commit/9ba0efeeb65651535f35cc7a2589eca04b08bb76", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus", "committedDate": "2020-04-23T17:59:32Z", "type": "forcePushed"}, {"oid": "660e37b4911b2fdba7f44b692f2d2713de3ba0e6", "url": "https://github.com/cdapio/cdap/commit/660e37b4911b2fdba7f44b692f2d2713de3ba0e6", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus", "committedDate": "2020-04-23T18:12:35Z", "type": "forcePushed"}, {"oid": "af48ba244105946bc0621e127248794d5805b4be", "url": "https://github.com/cdapio/cdap/commit/af48ba244105946bc0621e127248794d5805b4be", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus", "committedDate": "2020-04-23T19:41:01Z", "type": "forcePushed"}, {"oid": "9d26fe66d86a5cb769ee932d186d6f5640fa9ae9", "url": "https://github.com/cdapio/cdap/commit/9d26fe66d86a5cb769ee932d186d6f5640fa9ae9", "message": "Add state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus", "committedDate": "2020-04-23T19:57:07Z", "type": "forcePushed"}, {"oid": "6d94b9a4abeaf5e8483372b95db631f0ecf46b7f", "url": "https://github.com/cdapio/cdap/commit/6d94b9a4abeaf5e8483372b95db631f0ecf46b7f", "message": "Fix widget e2e tests to see pipeline export modal", "committedDate": "2020-04-23T21:16:36Z", "type": "forcePushed"}, {"oid": "69d7f4a8234978c239203b37f5a00438c4459c6d", "url": "https://github.com/cdapio/cdap/commit/69d7f4a8234978c239203b37f5a00438c4459c6d", "message": "Fix widget e2e tests to see pipeline export modal", "committedDate": "2020-04-23T21:35:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUzMzc1Ng==", "url": "https://github.com/cdapio/cdap/pull/12113#discussion_r418533756", "bodyText": "This could be Window.Cypress check. That would help us confirm if we are running tests.", "author": "ajainarayanan", "createdAt": "2020-05-01T13:09:36Z", "path": "cdap-ui/app/cdap/components/PipelineDetails/PipelineDetailsTopPanel/PipelineDetailsDetailsActions/PipelineDetailsActionsButton/index.js", "diffHunk": "@@ -129,6 +130,18 @@ export default class PipelineDetailsActionsButton extends Component {\n     );\n   };\n \n+  handlePipelineExport = () => {\n+    if (window.sessionStorage.getItem('pipelineConfigTesting')) {", "originalCommit": "69d7f4a8234978c239203b37f5a00438c4459c6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY2MDM5MA==", "url": "https://github.com/cdapio/cdap/pull/12113#discussion_r419660390", "bodyText": "Were you thinking the Window.Cypress check be in addition to (&&), instead of (completely replace current check), or an alternative to (||) looking for the token?", "author": "yukiej", "createdAt": "2020-05-04T19:03:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUzMzc1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIxOTcwOA==", "url": "https://github.com/cdapio/cdap/pull/12113#discussion_r420219708", "bodyText": "I think we can replace this check with Window.Cypress check. Thats the pattern that we follow in other places.", "author": "ajainarayanan", "createdAt": "2020-05-05T15:56:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUzMzc1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODUzNjIwOA==", "url": "https://github.com/cdapio/cdap/pull/12113#discussion_r418536208", "bodyText": "Can we make this generic like\ndownloadFile({fileContents, filename, onDownload }) {\n  ...\n}\n\nThis way it can be reused anywhere in UI", "author": "ajainarayanan", "createdAt": "2020-05-01T13:16:54Z", "path": "cdap-ui/app/cdap/services/download-pipeline.js", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+ function DownloadPipeline(pipelineConfig, postExportCb) {", "originalCommit": "69d7f4a8234978c239203b37f5a00438c4459c6d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6cb3efde6b5f7db024b6366a07d324a396739fa1", "url": "https://github.com/cdapio/cdap/commit/6cb3efde6b5f7db024b6366a07d324a396739fa1", "message": "Change to more generic download-file for reusability", "committedDate": "2020-05-04T19:07:35Z", "type": "forcePushed"}, {"oid": "ba58c54184e47214d2431b4e925da7b91a7af008", "url": "https://github.com/cdapio/cdap/commit/ba58c54184e47214d2431b4e925da7b91a7af008", "message": "Update check for when to show modal", "committedDate": "2020-05-14T00:51:10Z", "type": "forcePushed"}, {"oid": "2fc8c1f36233250e9a10ccef4074938632546ac3", "url": "https://github.com/cdapio/cdap/commit/2fc8c1f36233250e9a10ccef4074938632546ac3", "message": "Only so export pipeline JSON modal when running Cypress tests\n\nModify test to get modal when running integration test\n\nShow export modal for canvas actions test\n\nShow export modal for pipeline test\n\nAdd alignment step when selecting multiple nodes with mousedown (plus automated linting changes)\n\nFactor out helper pipeline download function\n\nUpdate export in actions menu to directly download from deployed and draft list views\n\nAdd state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus", "committedDate": "2020-05-15T22:12:53Z", "type": "forcePushed"}, {"oid": "fd6068213d7e1a7c31fc7437f4438ed825b1f170", "url": "https://github.com/cdapio/cdap/commit/fd6068213d7e1a7c31fc7437f4438ed825b1f170", "message": "Only so export pipeline JSON modal when running Cypress tests\n\nModify test to get modal when running integration test\n\nShow export modal for canvas actions test\n\nShow export modal for pipeline test\n\nAdd alignment step when selecting multiple nodes with mousedown (plus automated linting changes)\n\nFactor out helper pipeline download function\n\nUpdate export in actions menu to directly download from deployed and draft list views\n\nAdd state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus", "committedDate": "2020-05-18T17:56:53Z", "type": "commit"}, {"oid": "fd6068213d7e1a7c31fc7437f4438ed825b1f170", "url": "https://github.com/cdapio/cdap/commit/fd6068213d7e1a7c31fc7437f4438ed825b1f170", "message": "Only so export pipeline JSON modal when running Cypress tests\n\nModify test to get modal when running integration test\n\nShow export modal for canvas actions test\n\nShow export modal for pipeline test\n\nAdd alignment step when selecting multiple nodes with mousedown (plus automated linting changes)\n\nFactor out helper pipeline download function\n\nUpdate export in actions menu to directly download from deployed and draft list views\n\nAdd state to actions popover and  close  popover when Export is clicked\n\nUndo changes to pipeline export modal service\n\nUpdate popover state from deployed actions component\n\nAdd updating showPopover for draft and deployed actions menus", "committedDate": "2020-05-18T17:56:53Z", "type": "forcePushed"}]}