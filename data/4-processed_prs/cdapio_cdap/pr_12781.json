{"pr_number": 12781, "pr_title": "[CDAP-17283] Fixes the name of record type to conform to Avro Schema spec", "pr_createdAt": "2020-09-22T05:31:41Z", "pr_url": "https://github.com/cdapio/cdap/pull/12781", "timeline": [{"oid": "a999faa28254713b0dfa5ea9520d5ac667a151ea", "url": "https://github.com/cdapio/cdap/commit/a999faa28254713b0dfa5ea9520d5ac667a151ea", "message": "[CDAP-17283] Fixes the name of record type to conform to Avro Schema spec", "committedDate": "2020-09-22T05:24:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ4NDIwMw==", "url": "https://github.com/cdapio/cdap/pull/12781#discussion_r492484203", "bodyText": "we might want to only do this replace if we were the one generating the name. If it's the user, such as a nested record schema that already have the currentNode.name, this might overwrite what they put, and there might be some database that actually support - in the column name", "author": "elfenheart", "createdAt": "2020-09-22T05:39:17Z", "path": "cdap-ui/app/cdap/components/AbstractWidget/SchemaEditor/Context/SchemaGenerator.ts", "diffHunk": "@@ -123,9 +123,10 @@ function generateEnumType(children: IOrderedChildren, currentNode: INode, nullab\n function generateRecordType(children: IOrderedChildren, currentNode: INode, nullable: boolean) {\n   const finalType: IRecordField = {\n     type: AvroSchemaTypesEnum.RECORD,\n-    name: currentNode.name || `name-${uuidV4()}`,\n+    name: currentNode.name || `name_${uuidV4()}`,\n     fields: [],\n   };\n+  finalType.name = finalType.name.replace(/-/g, '');", "originalCommit": "a999faa28254713b0dfa5ea9520d5ac667a151ea", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ4NTQ0NA==", "url": "https://github.com/cdapio/cdap/pull/12781#discussion_r492485444", "bodyText": "Avro Schema specification doesn't allow -s in names. https://avro.apache.org/docs/current/spec.html#names. This is the record name. Not sure how this will be related to databases.", "author": "ajainarayanan", "createdAt": "2020-09-22T05:43:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQ4NDIwMw=="}], "type": "inlineReview"}]}