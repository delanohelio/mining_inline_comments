{"pr_number": 11892, "pr_title": "[UI]Fixes asserting \"Dashboard\" feature doesn't exist in navbar", "pr_createdAt": "2020-02-26T06:26:05Z", "pr_url": "https://github.com/cdapio/cdap/pull/11892", "timeline": [{"oid": "7d848b1a9a8da1286cbb9ad6a9602feb931f77e8", "url": "https://github.com/cdapio/cdap/commit/7d848b1a9a8da1286cbb9ad6a9602feb931f77e8", "message": "Fixes asserting \"Dashboard\" feature doesn't exist in navbar\n\nLong version:\n- Previously we used to show the page even before we fetch any namespaces\n- This allowed quickly to assert the non-existance of \"Dashboard\" feature in navbar as it won't be there in the light theme.\n- This was ok as we didn't load the HomeAction screen before asserting for Dashboard feature non-existance\n    (meaning we check if the page contains \"Dashboard\" text. This won't be present as we don't wait for everything to be loaded)\n- Now we changed that behavior to show a loading icon for the entire page until the namespace is fetched.\n- This way when we get the anything in the page, we made sure everything is loaded.\n- This caused the failure of test case because the HomeAction link actually has a \"Dashboard\" link\n\nFix:\n- Fix was to set the right subject (navbar) before checking if \"Dashboard\" exists.", "committedDate": "2020-02-28T23:50:37Z", "type": "commit"}, {"oid": "7d848b1a9a8da1286cbb9ad6a9602feb931f77e8", "url": "https://github.com/cdapio/cdap/commit/7d848b1a9a8da1286cbb9ad6a9602feb931f77e8", "message": "Fixes asserting \"Dashboard\" feature doesn't exist in navbar\n\nLong version:\n- Previously we used to show the page even before we fetch any namespaces\n- This allowed quickly to assert the non-existance of \"Dashboard\" feature in navbar as it won't be there in the light theme.\n- This was ok as we didn't load the HomeAction screen before asserting for Dashboard feature non-existance\n    (meaning we check if the page contains \"Dashboard\" text. This won't be present as we don't wait for everything to be loaded)\n- Now we changed that behavior to show a loading icon for the entire page until the namespace is fetched.\n- This way when we get the anything in the page, we made sure everything is loaded.\n- This caused the failure of test case because the HomeAction link actually has a \"Dashboard\" link\n\nFix:\n- Fix was to set the right subject (navbar) before checking if \"Dashboard\" exists.", "committedDate": "2020-02-28T23:50:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk3MzU2Mw==", "url": "https://github.com/cdapio/cdap/pull/11892#discussion_r385973563", "bodyText": "nit: missing the close double paren", "author": "yukiej", "createdAt": "2020-02-28T23:54:33Z", "path": "cdap-ui/cypress/integration/navbar.spec.ts", "diffHunk": "@@ -94,7 +94,7 @@ describe('Navbar tests', () => {\n     });\n   });\n   it('Should have right features enabled/disabled in light theme', () => {\n-    cy.contains(Theme.featureNames.dashboard).should('not.exist');\n+    cy.get(`[data-cy=\"${Theme.featureNames.dashboard}`).should('not.exist');", "originalCommit": "7d848b1a9a8da1286cbb9ad6a9602feb931f77e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}