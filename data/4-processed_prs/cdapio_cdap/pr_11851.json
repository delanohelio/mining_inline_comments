{"pr_number": 11851, "pr_title": "[CDAP-16130] Adds the ability to multiselect nodes + context menu to nodes & canvas in pipeline studio", "pr_createdAt": "2020-02-05T06:29:38Z", "pr_url": "https://github.com/cdapio/cdap/pull/11851", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjAzODg2Mw==", "url": "https://github.com/cdapio/cdap/pull/11851#discussion_r376038863", "bodyText": "nit: clear the timeout on $destroy", "author": "elfenheart", "createdAt": "2020-02-06T19:33:48Z", "path": "cdap-ui/app/directives/dag-plus/my-dag-ctrl.js", "diffHunk": "@@ -222,6 +227,7 @@ angular.module(PKG.name + '.commons')\n       vm.instance.unbind('click');\n       vm.instance.detachEveryConnection();\n       init();\n+      $timeout(() => vm.highlightSelectedNodeConnections());", "originalCommit": "1e5f82a7f9a8b334212c2c48112d69b4edb66db7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "47e5bb63c936c4b44ee4126f05970ea22235f4d9", "url": "https://github.com/cdapio/cdap/commit/47e5bb63c936c4b44ee4126f05970ea22235f4d9", "message": "Highlights newly copied nodes", "committedDate": "2020-02-06T20:17:38Z", "type": "forcePushed"}, {"oid": "3c9979ce1b0ecb101b986a0c826681296bbeecdf", "url": "https://github.com/cdapio/cdap/commit/3c9979ce1b0ecb101b986a0c826681296bbeecdf", "message": "[CDAP-16130] Adds the ability to multiselect nodes + context menu to nodes & canvas in pipeline studio\n\n  - [CDAP-15081] Fix dragging comments in canvas + actually shows comments from pipeline drafts\n\n  Add multiselect copy paste pipeline studio\n\n - Adds an onUnmount flag to dataprep onSubmit handler. This is to differentiate between close button vs apply button.\n - Removes user-select css to avoid user accidentally selecting text when multi-selecting nodes in canvas\n - Fix imported pipeline json to strip off invalid characters from name which is used for id in html\n - Modifies dag directive to handle multi-select + right click to add context menu for pipeline and plugins\n - Updates node selection based on the usage of 'selected' from selection-js\n\n  Add selection box component for multi-select nodes\n\n  - Adds generic SelectionBox component to drag-n-select things\n  - Adds a generic Clipboard api to copy-paste things from and to clipboard\n  - Adds selection-js npm module + playground to play\n  - Fixes selection box to use selected nodes instead of added and removed nodes\n  - Adds generic ContextMenu component to be reused for multiple elements in pipelines\n  - Adds PipelineContextMenu component with WranglerConnection to be used in pipeline studio canvas\n  - Adds PluginContextMenu to be used for plugins in pipeline studio\n  - Fixes the way select connections on clicking endpoint + replace space in node name to avoid html ids with spaces\n\n  Adds e2e tests for multi-select + context menus in pipelines\n\n  - Adds css class for selected connections\n  - Highlights newly copied nodes\n  - Applies dumb logic to make sure start & move events happen in sequence while selecting things in canvas\n  - Adds command to select everything between two nodes\n  - Adds e2e tests for multiselect feature in pipeline canvas\n  - Adds e2e test for pipeline context menu\n  - Fixes functional errors\n     - Fixes the case of copy-pasting nodes in the same studio to not result in js error\n     - Fixes copy/paste of nodes/connections to be in history to be able to do undo/redo\n     - Adds icons to context menus in pipeline\n     - Fixes the options in hamburger menu for nodes.\n     - Removes the usage of copytoclipboard from angular & replaces it with new utility function\n  - Adds e2e test for hamburger menu options", "committedDate": "2020-02-07T04:48:05Z", "type": "commit"}, {"oid": "3c9979ce1b0ecb101b986a0c826681296bbeecdf", "url": "https://github.com/cdapio/cdap/commit/3c9979ce1b0ecb101b986a0c826681296bbeecdf", "message": "[CDAP-16130] Adds the ability to multiselect nodes + context menu to nodes & canvas in pipeline studio\n\n  - [CDAP-15081] Fix dragging comments in canvas + actually shows comments from pipeline drafts\n\n  Add multiselect copy paste pipeline studio\n\n - Adds an onUnmount flag to dataprep onSubmit handler. This is to differentiate between close button vs apply button.\n - Removes user-select css to avoid user accidentally selecting text when multi-selecting nodes in canvas\n - Fix imported pipeline json to strip off invalid characters from name which is used for id in html\n - Modifies dag directive to handle multi-select + right click to add context menu for pipeline and plugins\n - Updates node selection based on the usage of 'selected' from selection-js\n\n  Add selection box component for multi-select nodes\n\n  - Adds generic SelectionBox component to drag-n-select things\n  - Adds a generic Clipboard api to copy-paste things from and to clipboard\n  - Adds selection-js npm module + playground to play\n  - Fixes selection box to use selected nodes instead of added and removed nodes\n  - Adds generic ContextMenu component to be reused for multiple elements in pipelines\n  - Adds PipelineContextMenu component with WranglerConnection to be used in pipeline studio canvas\n  - Adds PluginContextMenu to be used for plugins in pipeline studio\n  - Fixes the way select connections on clicking endpoint + replace space in node name to avoid html ids with spaces\n\n  Adds e2e tests for multi-select + context menus in pipelines\n\n  - Adds css class for selected connections\n  - Highlights newly copied nodes\n  - Applies dumb logic to make sure start & move events happen in sequence while selecting things in canvas\n  - Adds command to select everything between two nodes\n  - Adds e2e tests for multiselect feature in pipeline canvas\n  - Adds e2e test for pipeline context menu\n  - Fixes functional errors\n     - Fixes the case of copy-pasting nodes in the same studio to not result in js error\n     - Fixes copy/paste of nodes/connections to be in history to be able to do undo/redo\n     - Adds icons to context menus in pipeline\n     - Fixes the options in hamburger menu for nodes.\n     - Removes the usage of copytoclipboard from angular & replaces it with new utility function\n  - Adds e2e test for hamburger menu options", "committedDate": "2020-02-07T04:48:05Z", "type": "forcePushed"}]}