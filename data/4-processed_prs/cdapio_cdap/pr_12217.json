{"pr_number": 12217, "pr_title": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)", "pr_createdAt": "2020-05-28T16:14:02Z", "pr_url": "https://github.com/cdapio/cdap/pull/12217", "timeline": [{"oid": "32ec3b54dadc351e0ef5c43f04dc1ad2d3236978", "url": "https://github.com/cdapio/cdap/commit/32ec3b54dadc351e0ef5c43f04dc1ad2d3236978", "message": "[CDAP-16871] Configure widget-attributes for each property (widget JSON creator)", "committedDate": "2020-05-28T16:24:19Z", "type": "forcePushed"}, {"oid": "f1bba4bdece934742d490362160433532e4ba361", "url": "https://github.com/cdapio/cdap/commit/f1bba4bdece934742d490362160433532e4ba361", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)", "committedDate": "2020-06-01T20:36:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMDI0Nw==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434310247", "bodyText": "These two imports can be combined.", "author": "ajainarayanan", "createdAt": "2020-06-03T05:07:26Z", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput/index.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { withStyles } from '@material-ui/core';", "originalCommit": "f1bba4bdece934742d490362160433532e4ba361", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkwODQyOQ==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r435908429", "bodyText": "Resolved", "author": "jennac3", "createdAt": "2020-06-05T13:07:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMDI0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMDkxMQ==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434310911", "bodyText": "Can we break this if..else condition blocks to single level? Too many levels makes it hard to read and grasp the logic right away.", "author": "ajainarayanan", "createdAt": "2020-06-03T05:09:53Z", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput/index.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { withStyles } from '@material-ui/core';\n+import { StyleRules } from '@material-ui/core/styles';\n+import If from 'components/If';\n+import KeyValuePairs from 'components/KeyValuePairs';\n+import { COMMON_DELIMITER } from 'components/PluginJSONCreator/constants';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import * as React from 'react';\n+\n+export enum SupportedType {\n+  String = 'string',\n+  Number = 'number',\n+  ValueLabelPair = 'Value-Label pair',\n+  IDLabelPair = 'ID-Label pair',\n+}\n+\n+const styles = (): StyleRules => {\n+  return {\n+    typeSelectInput: {\n+      marginTop: '5px',\n+      marginBottom: '5px',\n+      width: '20%',\n+    },\n+  };\n+};\n+\n+export const processSupportedTypes = (types: string[]) => {\n+  const allTypes = new Set();\n+  types.forEach((type) => {\n+    switch (type) {\n+      case 'string[]':\n+        allTypes.add(SupportedType.String);\n+        break;\n+      case 'number[]':\n+        allTypes.add(SupportedType.Number);\n+        break;\n+      case 'IOption[]':\n+        allTypes.add(SupportedType.IDLabelPair);\n+        break;\n+      case 'IDropdownOption[]':\n+        allTypes.add(SupportedType.String);\n+        allTypes.add(SupportedType.Number);\n+        allTypes.add(SupportedType.ValueLabelPair);\n+        break;\n+      case 'ISelectOptions[]':\n+        allTypes.add(SupportedType.ValueLabelPair);\n+        break;\n+      case 'FilterOption[]':\n+        allTypes.add(SupportedType.String);\n+        allTypes.add(SupportedType.IDLabelPair);\n+        break;\n+      default:\n+        break;\n+    }\n+  });\n+  return allTypes;\n+};\n+\n+const AttributeMultipleValuesInputView = ({\n+  classes,\n+  supportedTypes,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+  widgetID,\n+  field,\n+}) => {\n+  const cleanSupportedTypes = Array.from(processSupportedTypes(supportedTypes).values());\n+  const [selectedType, setSelectedType] = React.useState(null);\n+  const [currentInput, setCurrentInput] = React.useState(null);\n+\n+  React.useEffect(() => {\n+    const initialType = getInitialType();\n+    setSelectedType(initialType);\n+    setCurrentInput(getUpdatedCurrentInput(initialType));\n+  }, []);\n+\n+  function getInitialType() {\n+    const widgetAttributes = widgetToAttributes[widgetID][field];\n+    let newType;\n+    if (!widgetAttributes || widgetAttributes.length === 0) {\n+      newType = cleanSupportedTypes[0];\n+    } else if (widgetAttributes[0].value) {\n+      newType = SupportedType.ValueLabelPair;\n+    } else if (widgetAttributes[0].id) {\n+      newType = SupportedType.IDLabelPair;\n+    } else {\n+      newType = SupportedType.String;\n+    }\n+    return newType;\n+  }\n+\n+  function getUpdatedCurrentInput(newType) {\n+    const widgetAttributes = widgetToAttributes[widgetID][field];\n+    if (!newType) {", "originalCommit": "f1bba4bdece934742d490362160433532e4ba361", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkwOTU5OQ==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r435909599", "bodyText": "I broke them down to functions and added some comments.", "author": "jennac3", "createdAt": "2020-06-05T13:09:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMDkxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMTM1OA==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434311358", "bodyText": "I am not sure what this type is intended for? Can you add some comments about it. I am trying to understand how this is related to multiple-values input and what Value-Label pair and ID-Label pair mean here.", "author": "ajainarayanan", "createdAt": "2020-06-03T05:11:34Z", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput/index.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { withStyles } from '@material-ui/core';\n+import { StyleRules } from '@material-ui/core/styles';\n+import If from 'components/If';\n+import KeyValuePairs from 'components/KeyValuePairs';\n+import { COMMON_DELIMITER } from 'components/PluginJSONCreator/constants';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import * as React from 'react';\n+\n+export enum SupportedType {", "originalCommit": "f1bba4bdece934742d490362160433532e4ba361", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkxMDQwMA==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r435910400", "bodyText": "I have added comments at the top of this file. I hope that this is helpful.", "author": "jennac3", "createdAt": "2020-06-05T13:10:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMTM1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMTU5OA==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434311598", "bodyText": "Can this be a switch?", "author": "ajainarayanan", "createdAt": "2020-06-03T05:12:32Z", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput/index.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { withStyles } from '@material-ui/core';\n+import { StyleRules } from '@material-ui/core/styles';\n+import If from 'components/If';\n+import KeyValuePairs from 'components/KeyValuePairs';\n+import { COMMON_DELIMITER } from 'components/PluginJSONCreator/constants';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import * as React from 'react';\n+\n+export enum SupportedType {\n+  String = 'string',\n+  Number = 'number',\n+  ValueLabelPair = 'Value-Label pair',\n+  IDLabelPair = 'ID-Label pair',\n+}\n+\n+const styles = (): StyleRules => {\n+  return {\n+    typeSelectInput: {\n+      marginTop: '5px',\n+      marginBottom: '5px',\n+      width: '20%',\n+    },\n+  };\n+};\n+\n+export const processSupportedTypes = (types: string[]) => {\n+  const allTypes = new Set();\n+  types.forEach((type) => {\n+    switch (type) {\n+      case 'string[]':\n+        allTypes.add(SupportedType.String);\n+        break;\n+      case 'number[]':\n+        allTypes.add(SupportedType.Number);\n+        break;\n+      case 'IOption[]':\n+        allTypes.add(SupportedType.IDLabelPair);\n+        break;\n+      case 'IDropdownOption[]':\n+        allTypes.add(SupportedType.String);\n+        allTypes.add(SupportedType.Number);\n+        allTypes.add(SupportedType.ValueLabelPair);\n+        break;\n+      case 'ISelectOptions[]':\n+        allTypes.add(SupportedType.ValueLabelPair);\n+        break;\n+      case 'FilterOption[]':\n+        allTypes.add(SupportedType.String);\n+        allTypes.add(SupportedType.IDLabelPair);\n+        break;\n+      default:\n+        break;\n+    }\n+  });\n+  return allTypes;\n+};\n+\n+const AttributeMultipleValuesInputView = ({\n+  classes,\n+  supportedTypes,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+  widgetID,\n+  field,\n+}) => {\n+  const cleanSupportedTypes = Array.from(processSupportedTypes(supportedTypes).values());\n+  const [selectedType, setSelectedType] = React.useState(null);\n+  const [currentInput, setCurrentInput] = React.useState(null);\n+\n+  React.useEffect(() => {\n+    const initialType = getInitialType();\n+    setSelectedType(initialType);\n+    setCurrentInput(getUpdatedCurrentInput(initialType));\n+  }, []);\n+\n+  function getInitialType() {\n+    const widgetAttributes = widgetToAttributes[widgetID][field];\n+    let newType;\n+    if (!widgetAttributes || widgetAttributes.length === 0) {\n+      newType = cleanSupportedTypes[0];\n+    } else if (widgetAttributes[0].value) {\n+      newType = SupportedType.ValueLabelPair;\n+    } else if (widgetAttributes[0].id) {\n+      newType = SupportedType.IDLabelPair;\n+    } else {\n+      newType = SupportedType.String;\n+    }\n+    return newType;\n+  }\n+\n+  function getUpdatedCurrentInput(newType) {\n+    const widgetAttributes = widgetToAttributes[widgetID][field];\n+    if (!newType) {\n+      return '';\n+    } else if (newType === SupportedType.Number || newType === SupportedType.String) {\n+      return widgetAttributes ? widgetAttributes.join(COMMON_DELIMITER) : '';\n+    } else {\n+      if (widgetAttributes && widgetAttributes.length > 0) {\n+        return {\n+          pairs: widgetAttributes.map((keyvalue) => {\n+            if (keyvalue.id) {\n+              return {\n+                key: keyvalue.id,\n+                value: keyvalue.label,\n+              };\n+            } else {\n+              return {\n+                key: keyvalue.value,\n+                value: keyvalue.label,\n+              };\n+            }\n+          }),\n+        };\n+      } else {\n+        return { pairs: [{ key: '', value: '' }] };\n+      }\n+    }\n+  }\n+\n+  const switchInputType = (newType) => {\n+    setSelectedType(newType);\n+    setCurrentInput(getUpdatedCurrentInput(newType));\n+    setWidgetToAttributes((prevObjs) => ({\n+      ...prevObjs,\n+      [widgetID]: { ...prevObjs[widgetID], [field]: [] },\n+    }));\n+  };\n+\n+  const onAttributeChange = (newVal) => {\n+    setCurrentInput(newVal);\n+    setWidgetToAttributes((prevObjs) => ({\n+      ...prevObjs,\n+      [widgetID]: { ...prevObjs[widgetID], [field]: newVal.split(COMMON_DELIMITER) },\n+    }));\n+  };\n+\n+  const onKeyValueAttributeChange = (keyvalue, type: SupportedType) => {\n+    if (type === SupportedType.ValueLabelPair) {\n+      const keyvaluePairs = keyvalue.pairs.map((pair) => {\n+        return { value: pair.key, label: pair.value };\n+      });\n+      setWidgetToAttributes((prevObjs) => ({\n+        ...prevObjs,\n+        [widgetID]: { ...prevObjs[widgetID], [field]: keyvaluePairs },\n+      }));\n+    } else {\n+      const keyvaluePairs = keyvalue.pairs.map((pair) => {\n+        return { id: pair.key, label: pair.value };\n+      });\n+      setWidgetToAttributes((prevObjs) => ({\n+        ...prevObjs,\n+        [widgetID]: { ...prevObjs[widgetID], [field]: keyvaluePairs },\n+      }));\n+    }\n+  };\n+\n+  const renderAttributeMultipleValuesInput = () => {\n+    if (selectedType === SupportedType.ValueLabelPair) {", "originalCommit": "f1bba4bdece934742d490362160433532e4ba361", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkxMTg4NQ==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r435911885", "bodyText": "resolved", "author": "jennac3", "createdAt": "2020-06-05T13:13:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMTU5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjM2NQ==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434312365", "bodyText": "Can we inverse the logic and have the switch outside of the if...else condition block?\nif (isMultipleInput) {\n  return (\n    <AttributeMultipleValuesInput\n      supportedTypes={supportedTypes}\n      widgetToAttributes={widgetToAttributes}\n      setWidgetToAttributes={setWidgetToAttributes}\n      widgetID={widgetID}\n      field={field}\n    />\n  );\n}\n\nswitch (fieldInfo.type) {\n  ...\n}", "author": "ajainarayanan", "createdAt": "2020-06-03T05:15:13Z", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/index.tsx", "diffHunk": "@@ -0,0 +1,156 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import WidgetWrapper from 'components/ConfigurationGroup/WidgetWrapper';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import AttributeKeyValueInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeKeyValueInput';\n+import AttributeMultipleValuesInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput';\n+import * as React from 'react';\n+\n+const WidgetAttributeInput = ({\n+  field,\n+  fieldInfo,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+  widgetID,\n+  widgetType,\n+}) => {\n+  const onAttributeChange = (newVal) => {\n+    setWidgetToAttributes((prevObjs) => ({\n+      ...prevObjs,\n+      [widgetID]: { ...prevObjs[widgetID], [field]: newVal },\n+    }));\n+  };\n+\n+  const renderAttributeInput = () => {\n+    if (!fieldInfo) {\n+      return;\n+    }\n+    const codeEditors = [\n+      'javascript-editor',\n+      'json-editor',\n+      'python-editor',\n+      'scala-editor',\n+      'sql-editor',\n+    ];\n+    if (field === 'default' && codeEditors.includes(widgetType)) {\n+      return (\n+        <WidgetWrapper\n+          widgetProperty={{\n+            field,\n+            name: field,\n+            'widget-type': widgetType,\n+            'widget-attributes': {},\n+          }}\n+          pluginProperty={{\n+            required: fieldInfo.required,\n+            name: 'code-editor',\n+          }}\n+          value={widgetToAttributes[widgetID][field]}\n+          onChange={onAttributeChange}\n+        />\n+      );\n+    }\n+\n+    const isMultipleInput = fieldInfo.type.includes('[]');\n+    const supportedTypes = fieldInfo.type.split('|');\n+    if (!isMultipleInput) {", "originalCommit": "f1bba4bdece934742d490362160433532e4ba361", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkxMTk2NQ==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r435911965", "bodyText": "Resolved", "author": "jennac3", "createdAt": "2020-06-05T13:13:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjM2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjY3Ng==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434312676", "bodyText": "All the cases seem to use the same component and same props. Can we have a helper function that will generate these props based on the field type and remove this switch entirely?", "author": "ajainarayanan", "createdAt": "2020-06-03T05:16:15Z", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/index.tsx", "diffHunk": "@@ -0,0 +1,156 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import WidgetWrapper from 'components/ConfigurationGroup/WidgetWrapper';\n+import PluginInput from 'components/PluginJSONCreator/Create/Content/PluginInput';\n+import AttributeKeyValueInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeKeyValueInput';\n+import AttributeMultipleValuesInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput/AttributeMultipleValuesInput';\n+import * as React from 'react';\n+\n+const WidgetAttributeInput = ({\n+  field,\n+  fieldInfo,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+  widgetID,\n+  widgetType,\n+}) => {\n+  const onAttributeChange = (newVal) => {\n+    setWidgetToAttributes((prevObjs) => ({\n+      ...prevObjs,\n+      [widgetID]: { ...prevObjs[widgetID], [field]: newVal },\n+    }));\n+  };\n+\n+  const renderAttributeInput = () => {\n+    if (!fieldInfo) {\n+      return;\n+    }\n+    const codeEditors = [\n+      'javascript-editor',\n+      'json-editor',\n+      'python-editor',\n+      'scala-editor',\n+      'sql-editor',\n+    ];\n+    if (field === 'default' && codeEditors.includes(widgetType)) {\n+      return (\n+        <WidgetWrapper\n+          widgetProperty={{\n+            field,\n+            name: field,\n+            'widget-type': widgetType,\n+            'widget-attributes': {},\n+          }}\n+          pluginProperty={{\n+            required: fieldInfo.required,\n+            name: 'code-editor',\n+          }}\n+          value={widgetToAttributes[widgetID][field]}\n+          onChange={onAttributeChange}\n+        />\n+      );\n+    }\n+\n+    const isMultipleInput = fieldInfo.type.includes('[]');\n+    const supportedTypes = fieldInfo.type.split('|');\n+    if (!isMultipleInput) {\n+      switch (fieldInfo.type) {\n+        case 'string':\n+          return (\n+            <PluginInput\n+              widgetType={'textbox'}", "originalCommit": "f1bba4bdece934742d490362160433532e4ba361", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkxMjU2OA==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r435912568", "bodyText": "I made a helper function named generateAttributeInput to generate these props based on the field type.\nResolved.", "author": "jennac3", "createdAt": "2020-06-05T13:15:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjY3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjc1OQ==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434312759", "bodyText": "nit: import from specific submodules.", "author": "ajainarayanan", "createdAt": "2020-06-03T05:16:36Z", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/index.tsx", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Dialog, DialogContent, DialogTitle, IconButton } from '@material-ui/core';", "originalCommit": "f1bba4bdece934742d490362160433532e4ba361", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkxMjgyNA==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r435912824", "bodyText": "Resolved.", "author": "jennac3", "createdAt": "2020-06-05T13:15:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjc1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjg3Mw==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434312873", "bodyText": "As mentioned in other PRs, please avoid this. It will lead to regressions in unintended places tomorrow if we change anything here.", "author": "ajainarayanan", "createdAt": "2020-06-03T05:17:09Z", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/index.tsx", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Dialog, DialogContent, DialogTitle, IconButton } from '@material-ui/core';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import CloseIcon from '@material-ui/icons/Close';\n+import If from 'components/If';\n+import { h2Styles } from 'components/Markdown/MarkdownHeading';\n+import { WIDGET_TYPE_TO_ATTRIBUTES } from 'components/PluginJSONCreator/constants';\n+import WidgetAttributeInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput';\n+import WidgetInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetInput';\n+import { ICreateContext } from 'components/PluginJSONCreator/CreateContextConnect';\n+import * as React from 'react';\n+\n+const styles = (theme): StyleRules => {\n+  return {\n+    widgetAttributeInput: {\n+      '& > *': {", "originalCommit": "f1bba4bdece934742d490362160433532e4ba361", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkxMjk0Ng==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r435912946", "bodyText": "Resolved.", "author": "jennac3", "createdAt": "2020-06-05T13:15:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMjg3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMzQ2Ng==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r434313466", "bodyText": "We should use the standard modal we have within cdap. I don't believe we have this modal ported to css-in-js yet but it should be easy to add that. IT is a simple modal with dark blue backeground and white text for heading. Like this,", "author": "ajainarayanan", "createdAt": "2020-06-03T05:19:24Z", "path": "cdap-ui/app/cdap/components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/index.tsx", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import { Dialog, DialogContent, DialogTitle, IconButton } from '@material-ui/core';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import CloseIcon from '@material-ui/icons/Close';\n+import If from 'components/If';\n+import { h2Styles } from 'components/Markdown/MarkdownHeading';\n+import { WIDGET_TYPE_TO_ATTRIBUTES } from 'components/PluginJSONCreator/constants';\n+import WidgetAttributeInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetAttributesCollection/WidgetAttributeInput';\n+import WidgetInput from 'components/PluginJSONCreator/Create/Content/WidgetCollection/WidgetInput';\n+import { ICreateContext } from 'components/PluginJSONCreator/CreateContextConnect';\n+import * as React from 'react';\n+\n+const styles = (theme): StyleRules => {\n+  return {\n+    widgetAttributeInput: {\n+      '& > *': {\n+        width: '100%',\n+        marginTop: '10px',\n+        marginBottom: '10px',\n+      },\n+    },\n+    widgetAttributesTitle: {\n+      marginTop: '15px',\n+      marginBottom: '15px',\n+    },\n+    h2Title: {\n+      ...h2Styles(theme).root,\n+      marginBottom: '5px',\n+    },\n+  };\n+};\n+\n+interface IWidgetAttributesCollectionProps extends WithStyles<typeof styles>, ICreateContext {\n+  widgetAttributesOpen: boolean;\n+  onWidgetAttributesClose: () => void;\n+  widgetID: number;\n+}\n+\n+const WidgetAttributesCollectionView: React.FC<IWidgetAttributesCollectionProps> = ({\n+  classes,\n+  widgetAttributesOpen,\n+  onWidgetAttributesClose,\n+  widgetID,\n+  widgetToInfo,\n+  setWidgetToInfo,\n+  widgetToAttributes,\n+  setWidgetToAttributes,\n+}) => {\n+  const widget = widgetToInfo[widgetID];\n+  const widgetType = widget ? widget.widgetType : null;\n+  const attributeFields =\n+    widgetToAttributes && widgetToAttributes[widgetID]\n+      ? Object.keys(widgetToAttributes[widgetID])\n+      : [];\n+  return (\n+    <div>\n+      <Dialog", "originalCommit": "f1bba4bdece934742d490362160433532e4ba361", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTkxMTYxMw==", "url": "https://github.com/cdapio/cdap/pull/12217#discussion_r435911613", "bodyText": "Sounds good. I'll be adding a separate PR to add this modal, since this will involve changing code outside of the current project.", "author": "jennac3", "createdAt": "2020-06-05T13:13:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMxMzQ2Ng=="}], "type": "inlineReview"}, {"oid": "e0e661e4103791e61d809488fe45111bba142f47", "url": "https://github.com/cdapio/cdap/commit/e0e661e4103791e61d809488fe45111bba142f47", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)", "committedDate": "2020-06-03T22:16:00Z", "type": "forcePushed"}, {"oid": "93144cd795d1220c8fa062139d3f01a13babe544", "url": "https://github.com/cdapio/cdap/commit/93144cd795d1220c8fa062139d3f01a13babe544", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)", "committedDate": "2020-06-03T22:20:08Z", "type": "forcePushed"}, {"oid": "df6c85b9d2bdb7e9dbc8a0aaa5faa3c782d4d7e0", "url": "https://github.com/cdapio/cdap/commit/df6c85b9d2bdb7e9dbc8a0aaa5faa3c782d4d7e0", "message": "[CDAP-16871] Configure widget-attributes for each property (plugin JSON creator)", "committedDate": "2020-06-04T13:26:53Z", "type": "commit"}, {"oid": "63d36937192f3499531228fb3ef9c778510a93d5", "url": "https://github.com/cdapio/cdap/commit/63d36937192f3499531228fb3ef9c778510a93d5", "message": "address comments", "committedDate": "2020-06-04T13:37:20Z", "type": "commit"}, {"oid": "294db0ac5807397d4870a43c805c7db7ca3754bf", "url": "https://github.com/cdapio/cdap/commit/294db0ac5807397d4870a43c805c7db7ca3754bf", "message": "further fix additional stuff", "committedDate": "2020-06-04T13:41:14Z", "type": "commit"}, {"oid": "8a5a0186be7e6a10441920e56c9e70f2701cbdfb", "url": "https://github.com/cdapio/cdap/commit/8a5a0186be7e6a10441920e56c9e70f2701cbdfb", "message": "address comments", "committedDate": "2020-06-04T15:11:01Z", "type": "commit"}, {"oid": "8a5a0186be7e6a10441920e56c9e70f2701cbdfb", "url": "https://github.com/cdapio/cdap/commit/8a5a0186be7e6a10441920e56c9e70f2701cbdfb", "message": "address comments", "committedDate": "2020-06-04T15:11:01Z", "type": "forcePushed"}, {"oid": "4d7f7371c7654147959aafbd9e67600591220a55", "url": "https://github.com/cdapio/cdap/commit/4d7f7371c7654147959aafbd9e67600591220a55", "message": "address comments", "committedDate": "2020-06-04T15:50:12Z", "type": "commit"}, {"oid": "4d7f7371c7654147959aafbd9e67600591220a55", "url": "https://github.com/cdapio/cdap/commit/4d7f7371c7654147959aafbd9e67600591220a55", "message": "address comments", "committedDate": "2020-06-04T15:50:12Z", "type": "forcePushed"}]}