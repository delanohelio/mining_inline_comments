{"pr_number": 11882, "pr_title": "Feature release/cdap 16308 preview perf", "pr_createdAt": "2020-02-24T02:13:20Z", "pr_url": "https://github.com/cdapio/cdap/pull/11882", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA2NTc5Mw==", "url": "https://github.com/cdapio/cdap/pull/11882#discussion_r383065793", "bodyText": "appRequest should be marked Nullable", "author": "yaojiefeng", "createdAt": "2020-02-24T02:16:24Z", "path": "cdap-app-fabric/src/main/java/io/cdap/cdap/app/preview/PreviewRequest.java", "diffHunk": "@@ -19,15 +19,20 @@\n import io.cdap.cdap.proto.artifact.AppRequest;\n import io.cdap.cdap.proto.id.ProgramId;\n \n+import javax.annotation.Nullable;\n+\n /**\n  * Represents the preview application request.\n- * @param <T> the type of application config\n  */\n-public class PreviewRequest<T> {\n+public class PreviewRequest {\n   private final ProgramId program;\n-  private final AppRequest<T> appRequest;\n+  private final AppRequest<?> appRequest;\n+\n+  public PreviewRequest(ProgramId program) {\n+    this(program, null);\n+  }\n \n-  public PreviewRequest(ProgramId program, AppRequest<T> appRequest) {\n+  public PreviewRequest(ProgramId program, AppRequest<?> appRequest) {", "originalCommit": "cd67961bf149da28d67c72e71cda08e5b0524e02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA2ODA1Mw==", "url": "https://github.com/cdapio/cdap/pull/11882#discussion_r383068053", "bodyText": "fixed", "author": "chtyim", "createdAt": "2020-02-24T02:34:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA2NTc5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA2NTkwMA==", "url": "https://github.com/cdapio/cdap/pull/11882#discussion_r383065900", "bodyText": "Can you explain a bit why make PreviewRequest non-parameterized will help the preview perf?", "author": "yaojiefeng", "createdAt": "2020-02-24T02:17:00Z", "path": "cdap-app-fabric/src/main/java/io/cdap/cdap/app/preview/PreviewRequest.java", "diffHunk": "@@ -19,15 +19,20 @@\n import io.cdap.cdap.proto.artifact.AppRequest;\n import io.cdap.cdap.proto.id.ProgramId;\n \n+import javax.annotation.Nullable;\n+\n /**\n  * Represents the preview application request.\n- * @param <T> the type of application config\n  */\n-public class PreviewRequest<T> {\n+public class PreviewRequest {", "originalCommit": "cd67961bf149da28d67c72e71cda08e5b0524e02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA2NjU4OA==", "url": "https://github.com/cdapio/cdap/pull/11882#discussion_r383066588", "bodyText": "It doesn't. But it is never get used. So it is useless to be parameterized.", "author": "chtyim", "createdAt": "2020-02-24T02:22:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA2NTkwMA=="}], "type": "inlineReview"}, {"oid": "911c958246cc09b1c989db65c1062fbdee5ffa47", "url": "https://github.com/cdapio/cdap/commit/911c958246cc09b1c989db65c1062fbdee5ffa47", "message": "(CDAP-16308) Make preview start more responsive\n\n- Reduced the synchronized block scope on preview start\n  so that it only blocks on injector creation.\n- Refactoring\n-- Remove usage on the ProgramStore\n-- Make PreviewRequest to be non-parameterized", "committedDate": "2020-02-24T09:56:53Z", "type": "commit"}, {"oid": "911c958246cc09b1c989db65c1062fbdee5ffa47", "url": "https://github.com/cdapio/cdap/commit/911c958246cc09b1c989db65c1062fbdee5ffa47", "message": "(CDAP-16308) Make preview start more responsive\n\n- Reduced the synchronized block scope on preview start\n  so that it only blocks on injector creation.\n- Refactoring\n-- Remove usage on the ProgramStore\n-- Make PreviewRequest to be non-parameterized", "committedDate": "2020-02-24T09:56:53Z", "type": "forcePushed"}]}