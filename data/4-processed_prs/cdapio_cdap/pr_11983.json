{"pr_number": 11983, "pr_title": "[CDAP-16384] Improve handling of 404 when last completed preview is missing", "pr_createdAt": "2020-03-19T06:12:08Z", "pr_url": "https://github.com/cdapio/cdap/pull/11983", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI3MTE0MQ==", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395271141", "bodyText": "why do we have to pass in this.bindings? i think just passing this.bindings[hash] is good enough, or even just the hash", "author": "elfenheart", "createdAt": "2020-03-19T19:32:43Z", "path": "cdap-ui/app/cdap/services/datasource/index.js", "diffHunk": "@@ -89,7 +89,7 @@ export default class Datasource {\n         delete this.bindings[hash];\n       } else {\n         if (this.bindings[hash] && this.bindings[hash].type === 'POLL') {\n-          this.bindings[hash].resource.interval = this.startClientPoll(hash, this.bindings[hash].resource.intervalTime);\n+          this.bindings[hash].resource.interval = this.startClientPoll(hash, this.bindings, this.bindings[hash].resource.intervalTime);", "originalCommit": "6b5d9ff149ed69b9ecef2c0d274d01a53e475032", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI5ODEzOA==", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395298138", "bodyText": "We need access to bindings[resourceId].resource for the socket requests. @ajainarayanan is there any context I'm missing here?", "author": "yukiej", "createdAt": "2020-03-19T20:23:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI3MTE0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMxNzQ2Nw==", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395317467", "bodyText": "Actually you are right, we only need the hash. Have made changes accordingly!", "author": "yukiej", "createdAt": "2020-03-19T21:01:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTI3MTE0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMyODcyNw==", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395328727", "bodyText": "Need to make the same change as the one in React", "author": "elfenheart", "createdAt": "2020-03-19T21:25:40Z", "path": "cdap-ui/app/services/cask-angular-socket-datasource/datasource.js", "diffHunk": "@@ -211,7 +211,7 @@ var socketDataSource = angular.module(PKG.name+'.services');\n         Object.keys(bindings)\n           .filter(resourceId => bindings[resourceId].type === 'POLL')\n           .forEach(resourceId => {\n-            bindings[resourceId].resource.interval = startClientPoll(resourceId, bindings[resourceId].resource);\n+            bindings[resourceId].resource.interval = startClientPoll(resourceId, bindings, bindings[resourceId].resource);", "originalCommit": "6866f9e844950b3ee132c64dc80e80d1e1df40c3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMzNTM5Mw==", "url": "https://github.com/cdapio/cdap/pull/11983#discussion_r395335393", "bodyText": "disregard", "author": "elfenheart", "createdAt": "2020-03-19T21:40:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMyODcyNw=="}], "type": "inlineReview"}, {"oid": "286635c905cb57977fcb99092f01f7328b5c3dbd", "url": "https://github.com/cdapio/cdap/commit/286635c905cb57977fcb99092f01f7328b5c3dbd", "message": "Add missing argument to startClientPoll and improve error msg on 404", "committedDate": "2020-03-19T22:58:33Z", "type": "commit"}, {"oid": "286635c905cb57977fcb99092f01f7328b5c3dbd", "url": "https://github.com/cdapio/cdap/commit/286635c905cb57977fcb99092f01f7328b5c3dbd", "message": "Add missing argument to startClientPoll and improve error msg on 404", "committedDate": "2020-03-19T22:58:33Z", "type": "forcePushed"}]}