{"pr_number": 12938, "pr_title": "[CDAP-17470] Replication address UX review", "pr_createdAt": "2020-12-16T23:38:29Z", "pr_url": "https://github.com/cdapio/cdap/pull/12938", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNTE2OA==", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544715168", "bodyText": "TIL: you can use ? to specify optional field without a type!. Nice, but looks like incomplete ternary operator or null coalescing \ud83d\ude04", "author": "ajainarayanan", "createdAt": "2020-12-17T00:13:04Z", "path": "cdap-ui/app/cdap/components/Replicator/Create/Content/Assessment/TablesAssessment/Mappings/index.tsx", "diffHunk": "@@ -173,7 +176,7 @@ const MappingsView: React.FC<IMappingsProps> = ({\n   const [loading, setLoading] = React.useState(true);\n   const [rerunAssessment, setRerunAssessment] = React.useState(false);\n \n-  function assessTable() {\n+  function assessTable(updatedColumns?) {", "originalCommit": "b4319478719d24194e4ca9b695f886df3c4d4dd0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcyMDc5Nw==", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544720797", "bodyText": "with the new null coalescing, the code make it seemed like the programmer is unsure about everything with question marks everywhere \ud83d\ude02", "author": "elfenheart", "createdAt": "2020-12-17T00:27:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNTE2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNzg4NQ==", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544717885", "bodyText": "We can import the colors from colors.ts?", "author": "ajainarayanan", "createdAt": "2020-12-17T00:20:17Z", "path": "cdap-ui/app/cdap/components/Replicator/Detail/Monitoring/TableScatterPlotGraph/scatterPlot.ts", "diffHunk": "@@ -24,6 +24,8 @@ export const COLOR_MAP = {\n   activeOutline: '#9FC0FB',\n   inactive: '#999999',\n   inactiveOutline: '#686868',\n+  error: '#D40001',", "originalCommit": "b4319478719d24194e4ca9b695f886df3c4d4dd0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcyMDA4MQ==", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r544720081", "bodyText": "These are custom colors for the graphs. Once we settled on these colors variance for graphs, I will move them into colors.ts and have graph specific colors there", "author": "elfenheart", "createdAt": "2020-12-17T00:26:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcxNzg4NQ=="}], "type": "inlineReview"}, {"oid": "5221d138aed1f6abdd7aec11e63a49d88ce5a2d5", "url": "https://github.com/cdapio/cdap/commit/5221d138aed1f6abdd7aec11e63a49d88ce5a2d5", "message": "[CDAP-17470] Replication address UX review", "committedDate": "2020-12-17T06:34:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ4OTQwNg==", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r545489406", "bodyText": "Seems like there is a similar function added to the replication utility. May be merge them?", "author": "ajainarayanan", "createdAt": "2020-12-18T00:14:27Z", "path": "cdap-ui/app/cdap/components/Replicator/Detail/Monitoring/Metrics/index.tsx", "diffHunk": "@@ -102,31 +124,65 @@ const MetricsView: React.FC<WithStyles<typeof styles>> = ({ classes }) => {\n     );\n   }, [timeRange, tables]);\n \n+  const parsedLatency = parseLatencySeconds(data.latency);\n+\n   return (\n     <div className={classes.root}>\n       <div className={`${classes.grid} ${classes.header}`}>\n         <div>Data replicated</div>\n-        <div>Throughput events per min</div>\n+        <div>Throughput</div>\n         <div>Avg latency</div>\n-        <div>Pipeline errors</div>\n+        <div>Errors</div>\n         <div>Total events</div>\n         <div>Inserts</div>\n         <div>Updates</div>\n         <div>Deletes</div>\n       </div>\n       <div className={`${classes.grid} ${classes.metricContent}`}>\n         <div>{data.dataReplicated}</div>\n-        <div>{data.eventsPerMin}</div>\n-        <div>{data.latency}</div>\n+        <div>{truncateNumber(data.eventsPerMin, PRECISION)}</div>\n+        <div>\n+          <span>{parsedLatency.minutes}</span>\n+          <span className={`${classes.latencyLabel} ${classes.marginRight}`}>min</span>\n+          <span>{parsedLatency.seconds}</span>\n+          <span className={classes.latencyLabel}>sec</span>\n+        </div>\n         <div className={classes.error}>{data.errors}</div>\n-        <div>{data.totalEvents}</div>\n-        <div>{data.inserts}</div>\n-        <div>{data.updates}</div>\n-        <div>{data.deletes}</div>\n+        <div>{formatNumberDisplay(data.totalEvents)}</div>\n+        <div>{formatNumberDisplay(data.inserts)}</div>\n+        <div>{formatNumberDisplay(data.updates)}</div>\n+        <div>{formatNumberDisplay(data.deletes)}</div>\n+      </div>\n+      <div className={`${classes.grid} ${classes.unit}`}>\n+        <div />\n+        <div>events/min</div>\n+        <div />\n+        <div />\n+        <div />\n+        <div />\n+        <div />\n+        <div />\n       </div>\n     </div>\n   );\n };\n \n+function parseLatencySeconds(latency) {\n+  const minutes = Math.floor(latency / ONE_MIN_SECONDS);\n+  const seconds = latency % ONE_MIN_SECONDS;\n+\n+  return {\n+    minutes,\n+    seconds,\n+  };\n+}\n+\n+function formatNumberDisplay(num) {", "originalCommit": "0444e4d1fc4917fc32a41753e9ae7d9e15dd68df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ4OTUxMg==", "url": "https://github.com/cdapio/cdap/pull/12938#discussion_r545489512", "bodyText": "nit: remove?", "author": "ajainarayanan", "createdAt": "2020-12-18T00:14:45Z", "path": "cdap-ui/app/cdap/components/Replicator/Detail/TopPanel/ActionButtons/Configure/ConfigureModeless.tsx", "diffHunk": "@@ -47,10 +49,21 @@ const styles = (theme): StyleRules => {\n       alignItems: 'center',\n       paddingLeft: '15px',\n     },\n-    content: {\n-      height: '400px',\n+    taskMemory: {\n+      width: '200px',\n+      margin: '15px 0 25px',\n+    },\n+    body: {\n       padding: '10px 15px',\n     },\n+    content: {\n+      height: '300px',\n+      // padding: '10px 15px',", "originalCommit": "0444e4d1fc4917fc32a41753e9ae7d9e15dd68df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0b5299b5860f7a1c82d34c64e89745a8afdba99a", "url": "https://github.com/cdapio/cdap/commit/0b5299b5860f7a1c82d34c64e89745a8afdba99a", "message": "[CDAP-17470] Replication address UX review", "committedDate": "2020-12-18T00:49:12Z", "type": "commit"}, {"oid": "0b5299b5860f7a1c82d34c64e89745a8afdba99a", "url": "https://github.com/cdapio/cdap/commit/0b5299b5860f7a1c82d34c64e89745a8afdba99a", "message": "[CDAP-17470] Replication address UX review", "committedDate": "2020-12-18T00:49:12Z", "type": "forcePushed"}]}