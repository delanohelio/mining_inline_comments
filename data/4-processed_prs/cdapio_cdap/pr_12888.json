{"pr_number": 12888, "pr_title": "[CDAP-17282] Update UI to use new Drafts API + manages existing drafts in user store", "pr_createdAt": "2020-12-07T23:03:25Z", "pr_url": "https://github.com/cdapio/cdap/pull/12888", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTg0NzM3Mw==", "url": "https://github.com/cdapio/cdap/pull/12888#discussion_r539847373", "bodyText": "nit: is there a need for the extra div?", "author": "elfenheart", "createdAt": "2020-12-10T05:03:18Z", "path": "cdap-ui/app/cdap/components/PipelineList/DraftPipelineView/DraftTable/DraftTableRow.tsx", "diffHunk": "@@ -31,20 +31,23 @@ export default class DraftTableRow extends React.PureComponent<IProps> {\n   public render() {\n     const draft = this.props.draft;\n     const namespace = getCurrentNamespace();\n-    const lastSaved = humanReadableDate(draft.__ui__.lastSaved, true);\n+    const lastSaved = humanReadableDate(\n+      draft.needsUpgrade ? draft.__ui__.lastSaved : draft.updatedTimeMillis,\n+      true\n+    );\n \n     const link = window.getHydratorUrl({\n       stateName: 'hydrator.create',\n       stateParams: {\n         namespace,\n-        draftId: draft.__ui__.draftId,\n+        draftId: draft.needsUpgrade ? draft.__ui__.draftId : draft.id,\n       },\n     });\n \n     return (\n       <a href={link} className=\"grid-row\" data-cy={`draft-${draft.name}`}>\n         <div className=\"name\" title={draft.name}>\n-          {draft.name}\n+          <div>{draft.name}</div>", "originalCommit": "a5f1428dc1f1edc74a4d433b5a6bb00029f83a52", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ddcb3a80496dd9116af40152770f41a42844dc45", "url": "https://github.com/cdapio/cdap/commit/ddcb3a80496dd9116af40152770f41a42844dc45", "message": "[CDAP-17282] Update UI to use new Drafts API + manages existing drafts in user store\n\n  - Adds pipeline api for draft management on react side\n  - Adds pipeline api for draft management on angular side\n  - Updates Pipeline drafts list view to handle listing old and new drafts + upgrade old drafts to use new api\n  - Fixes pipeline studio to save to use new drafts API + manage editing and publishing pipelines from old drafts\n  - Fixes one click pipeline deploy to use new draft api\n  - Adds e2e test for migrating away to new draft UI from UI", "committedDate": "2020-12-15T19:09:56Z", "type": "commit"}, {"oid": "ddcb3a80496dd9116af40152770f41a42844dc45", "url": "https://github.com/cdapio/cdap/commit/ddcb3a80496dd9116af40152770f41a42844dc45", "message": "[CDAP-17282] Update UI to use new Drafts API + manages existing drafts in user store\n\n  - Adds pipeline api for draft management on react side\n  - Adds pipeline api for draft management on angular side\n  - Updates Pipeline drafts list view to handle listing old and new drafts + upgrade old drafts to use new api\n  - Fixes pipeline studio to save to use new drafts API + manage editing and publishing pipelines from old drafts\n  - Fixes one click pipeline deploy to use new draft api\n  - Adds e2e test for migrating away to new draft UI from UI", "committedDate": "2020-12-15T19:09:56Z", "type": "forcePushed"}]}