{"pr_number": 11893, "pr_title": "Fixes asserting \"Dashboard\" feature doesn't exist in navbar", "pr_createdAt": "2020-02-26T06:30:45Z", "pr_url": "https://github.com/cdapio/cdap/pull/11893", "timeline": [{"oid": "ad393432e8cb4483b59456f78535a904a607384b", "url": "https://github.com/cdapio/cdap/commit/ad393432e8cb4483b59456f78535a904a607384b", "message": "Fixes asserting \"Dashboard\" feature doesn't exist in navbar\n\nLong version:\n- Previously we used to show the page even before we fetch any namespaces\n- This allowed quickly to assert the non-existance of \"Dashboard\" feature in navbar as it won't be there in the light theme.\n- This was ok as we didn't load the HomeAction screen before asserting for Dashboard feature non-existance\n    (meaning we check if the page contains \"Dashboard\" text. This won't be present as we don't wait for everything to be loaded)\n- Now we changed that behavior to show a loading icon for the entire page until the namespace is fetched.\n- This way when we get the anything in the page, we made sure everything is loaded.\n- This caused the failure of test case because the HomeAction link actually has a \"Dashboard\" link\n\nFix:\n- Fix was to set the right subject (navbar) before checking if \"Dashboard\" exists.", "committedDate": "2020-02-28T23:51:39Z", "type": "commit"}, {"oid": "ad393432e8cb4483b59456f78535a904a607384b", "url": "https://github.com/cdapio/cdap/commit/ad393432e8cb4483b59456f78535a904a607384b", "message": "Fixes asserting \"Dashboard\" feature doesn't exist in navbar\n\nLong version:\n- Previously we used to show the page even before we fetch any namespaces\n- This allowed quickly to assert the non-existance of \"Dashboard\" feature in navbar as it won't be there in the light theme.\n- This was ok as we didn't load the HomeAction screen before asserting for Dashboard feature non-existance\n    (meaning we check if the page contains \"Dashboard\" text. This won't be present as we don't wait for everything to be loaded)\n- Now we changed that behavior to show a loading icon for the entire page until the namespace is fetched.\n- This way when we get the anything in the page, we made sure everything is loaded.\n- This caused the failure of test case because the HomeAction link actually has a \"Dashboard\" link\n\nFix:\n- Fix was to set the right subject (navbar) before checking if \"Dashboard\" exists.", "committedDate": "2020-02-28T23:51:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk3MzgwMg==", "url": "https://github.com/cdapio/cdap/pull/11893#discussion_r385973802", "bodyText": "nit: missing closing double paren", "author": "yukiej", "createdAt": "2020-02-28T23:55:42Z", "path": "cdap-ui/cypress/integration/navbar.spec.ts", "diffHunk": "@@ -94,7 +94,7 @@ describe('Navbar tests', () => {\n     });\n   });\n   it('Should have right features enabled/disabled in light theme', () => {\n-    cy.contains(Theme.featureNames.dashboard).should('not.exist');\n+    cy.get(`[data-cy=\"${Theme.featureNames.dashboard}`).should('not.exist');", "originalCommit": "ad393432e8cb4483b59456f78535a904a607384b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}