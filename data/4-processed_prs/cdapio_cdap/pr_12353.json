{"pr_number": 12353, "pr_title": "[CDAP-16993] Stringify fields that are byte and other object types", "pr_createdAt": "2020-06-17T00:46:36Z", "pr_url": "https://github.com/cdapio/cdap/pull/12353", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2Njg4Ng==", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441266886", "bodyText": "Do we need to format the headers? Aren't these just column names?", "author": "ajainarayanan", "createdAt": "2020-06-17T03:59:30Z", "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -121,7 +130,9 @@ const DataTableView: React.FC<IDataTableProps> = ({\n               <TableRow className={classes.row} key={`tr-${j}`}>\n                 {headers.map((fieldName, k) => {\n                   return (\n-                    <CustomTableCell key={`table-cell-${k}`}>{record[fieldName]}</CustomTableCell>\n+                    <CustomTableCell key={`table-cell-${k}`}>\n+                      {format(record[fieldName])}", "originalCommit": "10ff6b418398405f1748e8da1d1c3a6a269b2e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU4NTk1NA==", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441585954", "bodyText": "I thought there was a small chance the column names could also be objects, in the case of nested schemas.", "author": "yukiej", "createdAt": "2020-06-17T14:24:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2Njg4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0MzQwMA==", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441843400", "bodyText": "Hhmm I am not sure if thats how nested schema column names would be. It will most likely be a single column whose values could be tables. We can leave this as is here until we manually verify nested schemas.", "author": "ajainarayanan", "createdAt": "2020-06-17T21:25:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2Njg4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg1NTI3OA==", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441855278", "bodyText": "I will add a comment for context.", "author": "yukiej", "createdAt": "2020-06-17T21:53:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2Njg4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczNjI2MQ==", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441736261", "bodyText": "might have to test this with undefined and null values to make sure it renders ok", "author": "elfenheart", "createdAt": "2020-06-17T18:13:13Z", "path": "cdap-ui/app/cdap/components/PreviewData/Table.tsx", "diffHunk": "@@ -97,6 +97,13 @@ const DataTableView: React.FC<IDataTableProps> = ({\n     return msg;\n   };\n \n+  const format = (field: any) => {\n+    if (typeof field === 'object') {", "originalCommit": "10ff6b418398405f1748e8da1d1c3a6a269b2e69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg0NTA1OA==", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441845058", "bodyText": "I think either should be ok as react can render both null and undefined. Although in this case it will render empty value and \"null\" as string", "author": "ajainarayanan", "createdAt": "2020-06-17T21:29:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczNjI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3NzE0Ng==", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441877146", "bodyText": "Both null and undefined get rendered as empty values because the backend returns undefined for both (even if the value was null in the original dataset).", "author": "yukiej", "createdAt": "2020-06-17T22:55:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczNjI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3NzYyOA==", "url": "https://github.com/cdapio/cdap/pull/12353#discussion_r441877628", "bodyText": "More specifically: For fields that have values of undefined or null, the backend doesn't return anything in the record for that field, so when the UI checks for the value of the field in that record, it returns \"undefined.\"", "author": "yukiej", "createdAt": "2020-06-17T22:57:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTczNjI2MQ=="}], "type": "inlineReview"}, {"oid": "44967ebed2bc74e9d0de7fbf29de1e38658b8754", "url": "https://github.com/cdapio/cdap/commit/44967ebed2bc74e9d0de7fbf29de1e38658b8754", "message": "Handle field names and values that are objects in data view\n\nAdd comment regarding need for stringifying field names", "committedDate": "2020-06-17T23:44:19Z", "type": "commit"}, {"oid": "44967ebed2bc74e9d0de7fbf29de1e38658b8754", "url": "https://github.com/cdapio/cdap/commit/44967ebed2bc74e9d0de7fbf29de1e38658b8754", "message": "Handle field names and values that are objects in data view\n\nAdd comment regarding need for stringifying field names", "committedDate": "2020-06-17T23:44:19Z", "type": "forcePushed"}]}