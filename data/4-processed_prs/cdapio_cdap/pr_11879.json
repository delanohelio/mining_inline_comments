{"pr_number": 11879, "pr_title": "[UI] Plugin configuration title + logviewer changes", "pr_createdAt": "2020-02-21T22:07:50Z", "pr_url": "https://github.com/cdapio/cdap/pull/11879", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NDA4OQ==", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387364089", "bodyText": "nit: use StyleRules", "author": "elfenheart", "createdAt": "2020-03-03T23:51:11Z", "path": "cdap-ui/app/cdap/components/Markdown/MarkdownHeading.tsx", "diffHunk": "@@ -19,6 +19,13 @@ import withStyles, { WithStyles } from '@material-ui/core/styles/withStyles';\n import Heading, { IHeadingProps } from 'components/Heading';\n import ThemeWrapper from 'components/ThemeWrapper';\n \n+export const h2Styles = (theme) => ({\n+  fontSize: '1.4rem !important',\n+  fontWeight: 'bold' as 'bold',", "originalCommit": "471001a5814289005332011497a3d798b546a41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NTEzNg==", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387365136", "bodyText": "does this need to be in another hook? Can this be clubbed with the on-mount hook that initializes the selection instance?", "author": "elfenheart", "createdAt": "2020-03-03T23:54:29Z", "path": "cdap-ui/app/cdap/components/SelectionBox/index.tsx", "diffHunk": "@@ -63,54 +63,48 @@ export default function SelectionBox(props: ISelectionBoxProps) {\n     );\n   }, []);\n \n-  React.useEffect(\n-    () => {\n-      if (!selection) {\n-        return;\n+  React.useEffect(() => {\n+    if (!selection) {\n+      return;\n+    }\n+    if (toggleSelection) {\n+      selection.enable();\n+    } else {\n+      selection.disable();\n+    }\n+  }, [toggleSelection]);\n+\n+  React.useEffect(() => {\n+    if (!selection) {\n+      return;\n+    }\n+\n+    selection.on('start', () => {\n+      if (onSelectionStart) {\n+        onSelectionStart();\n       }\n-      if (toggleSelection) {\n-        selection.enable();\n-      } else {\n-        selection.disable();\n+    });\n+    selection.on('move', ({ selected, changed: { added, removed } }) => {\n+      const selectedNodes = [];\n+      for (const el of selected) {\n+        selectedNodes.push(el.id);\n       }\n-    },\n-    [toggleSelection]\n-  );\n-\n-  React.useEffect(\n-    () => {\n-      if (!selection) {\n-        return;\n+      if (onSelectionMove && (added.length > 0 || removed.length > 0)) {\n+        onSelectionMove({ selected: selectedNodes });\n       }\n+    });\n+    selection.on('stop', () => {\n+      if (onSelectionEnd) {\n+        onSelectionEnd();\n+      }\n+    });\n \n-      selection.on('start', () => {\n-        if (onSelectionStart) {\n-          onSelectionStart();\n-        }\n-      });\n-      selection.on('move', ({ selected, changed: { added, removed } }) => {\n-        const selectedNodes = [];\n-        for (const el of selected) {\n-          selectedNodes.push(el.id);\n-        }\n-        if (onSelectionMove && (added.length > 0 || removed.length > 0)) {\n-          onSelectionMove({ selected: selectedNodes });\n-        }\n-      });\n-      selection.on('stop', () => {\n-        if (onSelectionEnd) {\n-          onSelectionEnd();\n-        }\n-      });\n-\n-      return () => {\n-        if (selection) {\n-          selection.destroy();\n-        }\n-      };\n-    },\n-    [selection]\n-  );\n+    return () => {\n+      if (selection) {\n+        selection.destroy();\n+      }\n+    };\n+  }, [selection]);", "originalCommit": "471001a5814289005332011497a3d798b546a41f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2Nzk4MA==", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387467980", "bodyText": "It can be in the same hook. Just made it into two to make sure it is clear that one is onmount and the other is the regular hook listening on selection.", "author": "ajainarayanan", "createdAt": "2020-03-04T06:19:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NTEzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NTQ2OQ==", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387365469", "bodyText": "nit: newline", "author": "elfenheart", "createdAt": "2020-03-03T23:55:32Z", "path": "cdap-ui/cypress/fixtures/example-transform-1.1.0-SNAPSHOT.json", "diffHunk": "@@ -0,0 +1,10 @@\n+{\n+  \"properties\": {\n+    \"widgets.ExampleTransform-transform\": \"{\\n  \\\"outputs\\\": [{\\n    \\\"name\\\": \\\"schema\\\",\\n    \\\"widget-type\\\": \\\"schema\\\",\\n    \\\"label\\\": \\\"schema\\\"\\n  }],\\n  \\\"metadata\\\": {\\\"spec-version\\\": \\\"1.4\\\"},\\n  \\\"configuration-groups\\\": [{\\n    \\\"label\\\": \\\"Transform Configuration\\\",\\n    \\\"properties\\\": [\\n      {\\n        \\\"widget-type\\\": \\\"textbox\\\",\\n        \\\"name\\\": \\\"myOption\\\",\\n        \\\"label\\\": \\\"My Option\\\",\\n        \\\"widget-attributes\\\": {\\n          \\\"default\\\": \\\"an example default value\\\",\\n          \\\"width\\\": \\\"large\\\"\\n        }\\n      },\\n      {\\n        \\\"widget-type\\\": \\\"textbox\\\",\\n        \\\"name\\\": \\\"myOptionalOption\\\",\\n        \\\"label\\\": \\\"My Optional Option\\\",\\n        \\\"widget-attributes\\\": {\\\"width\\\": \\\"large\\\"}\\n      }\\n    ]\\n  }]\\n}\",\n+    \"doc.ExampleTransform-transform\": \"# Example Transform\\n\\nInsert documentation about your plugin in this file.\\nThe UI will display the contents in the reference section of your plugin,\\nassuming this file is named following a convention of ``[plugin-name]-transform.md``.\\nThe plugin name is case sensitive.\\n\\nFor examples of plugin documentation, see the\\n[Hydrator documentation](https://github.com/caskdata/hydrator-plugins/tree/develop/core-plugins/docs).\\n\"\n+  },\n+  \"parents\": [\n+    \"system:cdap-data-pipeline[6.0.0,10.0.0-SNAPSHOT)\",\n+    \"system:cdap-data-streams[6.0.0,10.0.0-SNAPSHOT)\"\n+  ]\n+}", "originalCommit": "471001a5814289005332011497a3d798b546a41f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NjA1NA==", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387366054", "bodyText": "do any of the stylings have to be updated to account for one less column?", "author": "elfenheart", "createdAt": "2020-03-03T23:57:21Z", "path": "cdap-ui/app/directives/log-viewer/log-viewer.html", "diffHunk": "@@ -184,10 +179,6 @@\n                 </span>\n             </td>\n \n-            <td class=\"source\"", "originalCommit": "471001a5814289005332011497a3d798b546a41f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2ODIwNw==", "url": "https://github.com/cdapio/cdap/pull/11879#discussion_r387468207", "bodyText": "No. It was not needed. One thing good about logviewer \ud83d\ude11 . Since the columns are collapsible removing one column didn't need any styling changes.", "author": "ajainarayanan", "createdAt": "2020-03-04T06:20:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM2NjA1NA=="}], "type": "inlineReview"}, {"oid": "ae056e63df8e88f2fa4e8f5382ec0e7e84fda877", "url": "https://github.com/cdapio/cdap/commit/ae056e63df8e88f2fa4e8f5382ec0e7e84fda877", "message": "Addressed review comments", "committedDate": "2020-03-04T06:18:37Z", "type": "forcePushed"}, {"oid": "03e25567915ab6eb88315355cfad47fc714edc57", "url": "https://github.com/cdapio/cdap/commit/03e25567915ab6eb88315355cfad47fc714edc57", "message": "Addressed review comments", "committedDate": "2020-03-04T06:21:37Z", "type": "forcePushed"}, {"oid": "051f4e7ffb983fb771a9267dd2407f50b6bff1e2", "url": "https://github.com/cdapio/cdap/commit/051f4e7ffb983fb771a9267dd2407f50b6bff1e2", "message": "[CDAP-16327][CDAP-16315][UI] Plugin configuration title + logviewer changes\n\n - Removes classname column from logviewer + removes systemlogs to be included by default\n - Fixes usage of FileDnD after library upgrade\n - Fixes plugin configuration title & subtitle to be concise\n - Upgrades cypress to 4.0.2\n - Adds generic upload command to upload any file using upload wizard (react-dropzone)\n - Adds example jar and json files for testing upload\n - Adds plugin upload spec\n - Adds data-cy attributes to necessary files to test plugin upload wizard\n - Swaps react-cookie with universal-cookie in dll file to correctly build dll files\n - Builds dlls based on newly added package (universal-cookie)\n - Removes unused routes from express", "committedDate": "2020-03-10T01:10:56Z", "type": "commit"}, {"oid": "051f4e7ffb983fb771a9267dd2407f50b6bff1e2", "url": "https://github.com/cdapio/cdap/commit/051f4e7ffb983fb771a9267dd2407f50b6bff1e2", "message": "[CDAP-16327][CDAP-16315][UI] Plugin configuration title + logviewer changes\n\n - Removes classname column from logviewer + removes systemlogs to be included by default\n - Fixes usage of FileDnD after library upgrade\n - Fixes plugin configuration title & subtitle to be concise\n - Upgrades cypress to 4.0.2\n - Adds generic upload command to upload any file using upload wizard (react-dropzone)\n - Adds example jar and json files for testing upload\n - Adds plugin upload spec\n - Adds data-cy attributes to necessary files to test plugin upload wizard\n - Swaps react-cookie with universal-cookie in dll file to correctly build dll files\n - Builds dlls based on newly added package (universal-cookie)\n - Removes unused routes from express", "committedDate": "2020-03-10T01:10:56Z", "type": "forcePushed"}, {"oid": "43f02fc351325a84c6e035e6149a132c35a61784", "url": "https://github.com/cdapio/cdap/commit/43f02fc351325a84c6e035e6149a132c35a61784", "message": "Upgrades cypress node packages", "committedDate": "2020-03-10T16:49:11Z", "type": "commit"}, {"oid": "3a89121aadc4f4575ae19a16395ee43d0ca40c3e", "url": "https://github.com/cdapio/cdap/commit/3a89121aadc4f4575ae19a16395ee43d0ca40c3e", "message": "Fixes context menu spec to look for right label", "committedDate": "2020-03-10T21:20:08Z", "type": "commit"}, {"oid": "dd28e95822984ce83585d0d3381110ecd0c924d6", "url": "https://github.com/cdapio/cdap/commit/dd28e95822984ce83585d0d3381110ecd0c924d6", "message": "Increases timeout for checking pipeline succeeded status check to 12 mins", "committedDate": "2020-03-10T23:43:55Z", "type": "commit"}]}