{"pr_number": 11815, "pr_title": "[CDAP-16198] Add Multi Row Integration Tests", "pr_createdAt": "2020-01-09T00:59:18Z", "pr_url": "https://github.com/cdapio/cdap/pull/11815", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyMjQyNw==", "url": "https://github.com/cdapio/cdap/pull/11815#discussion_r365022427", "bodyText": "Any reason why you're using className instead of data-cy here and in other places in this PR?", "author": "itsanudeep", "createdAt": "2020-01-10T00:19:13Z", "path": "cdap-ui/app/cdap/components/AbstractWidget/AbstractMultiRowWidget/AbstractRow.tsx", "diffHunk": "@@ -87,26 +88,27 @@ export default class AbstractRow<\n   };\n \n   public render() {\n-    const { errors, value } = this.props;\n+    const { errors, value, dataCy, index } = this.props;\n     let errorMsg = null;\n     if (errors && value) {\n       const errorObj = errors.find((error: IErrorObj) => error.element === value);\n       if (errorObj) {\n         errorMsg = errorObj.msg;\n       }\n     }\n+\n     return (\n       <React.Fragment>\n-        <div className={this.props.classes.root}>\n+        <div className={this.props.classes.root} data-cy={`${index}`}>\n           {this.renderInput()}\n \n           <If condition={!this.props.disabled}>\n             <React.Fragment>\n-              <IconButton onClick={this.props.addRow}>\n+              <IconButton onClick={this.props.addRow} className=\"add-row\">", "originalCommit": "be10cbbf538f273026a76edf069fd1c880dba952", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAyMzUyMw==", "url": "https://github.com/cdapio/cdap/pull/11815#discussion_r365023523", "bodyText": "I like this function! \ud83d\ude04\nDo you think renaming this to something that says this is data-cy selector would be helpful? When I first read the function name earlier in this PR, I thought this would select a plugin property.", "author": "itsanudeep", "createdAt": "2020-01-10T00:23:47Z", "path": "cdap-ui/cypress/support/MultiRowWidgets/utilities.ts", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+export function propertySelector(property) {\n+  return `[data-cy=\"${property}\"]`;", "originalCommit": "be10cbbf538f273026a76edf069fd1c880dba952", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ0MDQzNA==", "url": "https://github.com/cdapio/cdap/pull/11815#discussion_r365440434", "bodyText": "@elfenheart I am adding this as a cypress command to be used across all the tests. https://github.com/cdapio/cdap/pull/11814/files#diff-3f1be9a94ccb41c3adcaa145f1dbdc11R420-R435. Do you mind waiting for my PR to use the cypress command?", "author": "ajainarayanan", "createdAt": "2020-01-10T21:37:32Z", "path": "cdap-ui/cypress/support/MultiRowWidgets/utilities.ts", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+export function propertySelector(property) {\n+  return `[data-cy=\"${property}\"]`;\n+}\n+\n+export function rowSelector(property, index) {\n+  return `${propertySelector(property)} [data-cy=\"${index}\"]`;\n+}\n+\n+export function openPropertyModal() {\n+  // open plugin properties\n+  cy.get('[data-cy=\"plugin-node-Projection-transform-0\"] .node .node-configure-btn')\n+    .invoke('show')\n+    .click();\n+}\n+\n+export function getExportProperties(stageName) {", "originalCommit": "be10cbbf538f273026a76edf069fd1c880dba952", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ0MDU2NQ==", "url": "https://github.com/cdapio/cdap/pull/11815#discussion_r365440565", "bodyText": "This would also be a good cypress command. Almost all the pipeline studio tests will use this.", "author": "ajainarayanan", "createdAt": "2020-01-10T21:37:56Z", "path": "cdap-ui/cypress/support/MultiRowWidgets/utilities.ts", "diffHunk": "@@ -0,0 +1,52 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+export function propertySelector(property) {\n+  return `[data-cy=\"${property}\"]`;\n+}\n+\n+export function rowSelector(property, index) {\n+  return `${propertySelector(property)} [data-cy=\"${index}\"]`;\n+}\n+\n+export function openPropertyModal() {\n+  // open plugin properties", "originalCommit": "be10cbbf538f273026a76edf069fd1c880dba952", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6460c7e1a91997a91a83354a4fd7d9beaed9b9fc", "url": "https://github.com/cdapio/cdap/commit/6460c7e1a91997a91a83354a4fd7d9beaed9b9fc", "message": "update cy selector in multi row widgets", "committedDate": "2020-01-15T23:45:10Z", "type": "forcePushed"}, {"oid": "642d0f48ff3fece49159b6148337ec1d91cf18f0", "url": "https://github.com/cdapio/cdap/commit/642d0f48ff3fece49159b6148337ec1d91cf18f0", "message": "update cy selector in multi row widgets", "committedDate": "2020-01-16T01:14:45Z", "type": "forcePushed"}, {"oid": "f549f30b0262dd637f020a50d797df0dfadedb93", "url": "https://github.com/cdapio/cdap/commit/f549f30b0262dd637f020a50d797df0dfadedb93", "message": "[CDAP-16198] Add Multi Row Integration Tests", "committedDate": "2020-01-23T00:18:12Z", "type": "commit"}, {"oid": "f549f30b0262dd637f020a50d797df0dfadedb93", "url": "https://github.com/cdapio/cdap/commit/f549f30b0262dd637f020a50d797df0dfadedb93", "message": "[CDAP-16198] Add Multi Row Integration Tests", "committedDate": "2020-01-23T00:18:12Z", "type": "forcePushed"}]}