{"pr_number": 11844, "pr_title": "[CDAP-14284] Adds pan/zoom feature to pipeline canvas.", "pr_createdAt": "2020-02-04T20:25:15Z", "pr_url": "https://github.com/cdapio/cdap/pull/11844", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU0NTM3OQ==", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437545379", "bodyText": "Should this be equals instead of not equals?", "author": "yukiej", "createdAt": "2020-06-09T16:01:20Z", "path": "cdap-ui/app/cdap/components/DAG/DAGProvider.tsx", "diffHunk": "@@ -66,8 +69,11 @@ export class DAGProvider extends React.Component<any, IDagProviderState> {\n     });\n   };\n   private removeNode = (nodeId: string) => {\n+    const newNodes = this.state.nodes.delete(\n+      this.state.nodes.findIndex((node: INode) => node.get('id') !== nodeId)", "originalCommit": "ad90804a141cf94cfa6c80940b2154bf1566b4df", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODIxOTE0OQ==", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r438219149", "bodyText": "Hmmm good catch. Since this is not yet used this piece of code was not verified.", "author": "ajainarayanan", "createdAt": "2020-06-10T15:36:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU0NTM3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU0NTY5NQ==", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437545695", "bodyText": "Same as above - should these be equals instead of not equals?", "author": "yukiej", "createdAt": "2020-06-09T16:01:46Z", "path": "cdap-ui/app/cdap/components/DAG/DAGProvider.tsx", "diffHunk": "@@ -86,31 +92,48 @@ export class DAGProvider extends React.Component<any, IDagProviderState> {\n     });\n   };\n   private removeConnection = (connectionObj: IConnection) => {\n-    const newConnections = this.state.connections.filter(\n-      (connection: IConnection) =>\n-        connection.get('from') !== connectionObj.get('from') &&\n-        connection.get('to') !== connectionObj.get('to')\n-    ) as List<IConnection>;\n+    const newConnections = this.state.connections.delete(\n+      this.state.connections.findIndex(\n+        (connection: IConnection) =>\n+          connection.get('from') !== connectionObj.get('from') &&", "originalCommit": "ad90804a141cf94cfa6c80940b2154bf1566b4df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2MzAzNw==", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437563037", "bodyText": "Can we get the color from theme.palette here too? And same for the other colors in these styles.", "author": "yukiej", "createdAt": "2020-06-09T16:28:24Z", "path": "cdap-ui/app/cdap/components/DAG/Nodes/SplitterNode/PortPopover.tsx", "diffHunk": "@@ -0,0 +1,171 @@\n+/*\n+ * Copyright \u00a9 2020 Cask Data, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+import * as React from 'react';\n+import withStyles, { StyleRules, WithStyles } from '@material-ui/core/styles/withStyles';\n+import { IEndPointArgs } from 'components/DAG/DAGRenderer';\n+import { IPort } from 'components/DAG/Nodes/SplitterNode';\n+import { AbstractNode } from 'components/DAG/Nodes/AbstractNode';\n+import { endpointCircle, endpointCaret } from 'components/DAG/Nodes/utilities';\n+import xorWith from 'lodash/xorWith';\n+import isEqual from 'lodash/isEqual';\n+import isEmpty from 'lodash/isEmpty';\n+\n+const styles = (theme): StyleRules => {\n+  const endpointCircleStyles = endpointCircle(theme);\n+  return {\n+    endpointCircle: {\n+      ...endpointCircleStyles.root,\n+    },\n+    regularEndpointCircle: {\n+      ...endpointCircleStyles.regularEndpointCircle,\n+    },\n+    endpointCaret: {\n+      ...endpointCaret(theme).root,\n+    },\n+    root: {\n+      display: 'block',\n+      backgroundColor: theme.palette.grey[500],\n+    },\n+    portContainer: {\n+      display: 'block',\n+      backgroundColor: '#dbdbdb',", "originalCommit": "ad90804a141cf94cfa6c80940b2154bf1566b4df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NTY5NQ==", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437565695", "bodyText": "Where do these numbers come from? Maybe we can elaborate with a comment.", "author": "yukiej", "createdAt": "2020-06-09T16:32:45Z", "path": "cdap-ui/app/cdap/components/DAG/Nodes/utilities.ts", "diffHunk": "@@ -108,6 +108,10 @@ const endpointCircle = (theme): StyleRules => {\n       bottom: `-${ENDPOINT_RADIUS}px`,\n       left: `${ENDPOINT_RADIUS * 7}px`,\n     },\n+    conditionNoEndpointCircle: {\n+      bottom: `-${ENDPOINT_RADIUS}px`,\n+      left: `${105 / 2 - 7}px`,", "originalCommit": "ad90804a141cf94cfa6c80940b2154bf1566b4df", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI5OTk3NQ==", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r438299975", "bodyText": "Have added comments for reference.", "author": "ajainarayanan", "createdAt": "2020-06-10T17:41:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NTY5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NjI5OQ==", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437566299", "bodyText": "colors from theme.palette?", "author": "yukiej", "createdAt": "2020-06-09T16:33:52Z", "path": "cdap-ui/app/cdap/components/DAG/index.tsx", "diffHunk": "@@ -48,11 +52,14 @@ const registerTypes = {\n   endpoints: {},\n };\n \n-const styles = () => {\n+const styles = (): StyleRules => {", "originalCommit": "ad90804a141cf94cfa6c80940b2154bf1566b4df", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2Nzc2MA==", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r437567760", "bodyText": "Are there any limits on the values of zoom?", "author": "yukiej", "createdAt": "2020-06-09T16:36:10Z", "path": "cdap-ui/app/cdap/components/DAG/index.tsx", "diffHunk": "@@ -111,6 +170,97 @@ class DAG extends React.PureComponent<IDAGProps> {\n       {label}\n     </Button>\n   );\n+\n+  public zoomIn = () => {\n+    this.setState({\n+      zoom: this.state.zoom + 0.1,", "originalCommit": "ad90804a141cf94cfa6c80940b2154bf1566b4df", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI5ODE0MQ==", "url": "https://github.com/cdapio/cdap/pull/11844#discussion_r438298141", "bodyText": "No. We can zoom in to any level.", "author": "ajainarayanan", "createdAt": "2020-06-10T17:38:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2Nzc2MA=="}], "type": "inlineReview"}, {"oid": "3bffea11e48d072fff9e9bdee9ebadef617c627d", "url": "https://github.com/cdapio/cdap/commit/3bffea11e48d072fff9e9bdee9ebadef617c627d", "message": "Address review comments", "committedDate": "2020-06-10T17:41:07Z", "type": "forcePushed"}, {"oid": "95e590479088c30705a25f3d460080d66bd310d5", "url": "https://github.com/cdapio/cdap/commit/95e590479088c30705a25f3d460080d66bd310d5", "message": "Address review comments", "committedDate": "2020-06-10T18:05:34Z", "type": "forcePushed"}, {"oid": "1084ac3fa86ea8040142d0a36ac56564e810c69e", "url": "https://github.com/cdapio/cdap/commit/1084ac3fa86ea8040142d0a36ac56564e810c69e", "message": "Initial version of pan & zoom from react-pan-zoom npm package", "committedDate": "2020-06-15T23:51:34Z", "type": "commit"}, {"oid": "1084ac3fa86ea8040142d0a36ac56564e810c69e", "url": "https://github.com/cdapio/cdap/commit/1084ac3fa86ea8040142d0a36ac56564e810c69e", "message": "Initial version of pan & zoom from react-pan-zoom npm package", "committedDate": "2020-06-15T23:51:34Z", "type": "forcePushed"}]}