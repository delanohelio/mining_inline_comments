{"pr_number": 7902, "pr_title": "IGNITE-13051 check mvcc configuration after register caches futu\u2026", "pr_createdAt": "2020-06-05T06:35:52Z", "pr_url": "https://github.com/apache/ignite/pull/7902", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTczMTg0MQ==", "url": "https://github.com/apache/ignite/pull/7902#discussion_r435731841", "bodyText": "looks like a 90% duplication of testMvccEnabledForClientMode", "author": "anton-vinogradov", "createdAt": "2020-06-05T07:14:49Z", "path": "modules/core/src/test/java/org/apache/ignite/internal/processors/cache/mvcc/CacheMvccConfigurationValidationTest.java", "diffHunk": "@@ -352,6 +353,37 @@ public void testMvccEnabledForClientMode() throws Exception {\n         assertTrue(node.context().coordinators().mvccEnabled());\n     }\n \n+    /**\n+     * Check that node in client mode (filtered by AttributeNodeFilter) correctly works with MVCC.\n+     */\n+    @SuppressWarnings(\"unchecked\")\n+    @Test\n+    public void testMvccEnabledForClientModeAfterTriggeringGlobalState() throws Exception {", "originalCommit": "a082bb641e1f000de1793cb5b31f53bf01a65822", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyODU2OQ==", "url": "https://github.com/apache/ignite/pull/7902#discussion_r435828569", "bodyText": "Move to another class to move some code duplication, and add more tests", "author": "timoninmaxim", "createdAt": "2020-06-05T10:18:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTczMTg0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTczMjQ2Mg==", "url": "https://github.com/apache/ignite/pull/7902#discussion_r435732462", "bodyText": "Such renaming just increases changes amount without real profit", "author": "anton-vinogradov", "createdAt": "2020-06-05T07:16:12Z", "path": "modules/core/src/main/java/org/apache/ignite/internal/processors/cache/distributed/dht/preloader/GridDhtPartitionsExchangeFuture.java", "diffHunk": "@@ -346,7 +346,7 @@\n     private final GridDhtPartitionsStateValidator validator;\n \n     /** Register caches future. Initialized on exchange init. Must be waited on exchange end. */\n-    private IgniteInternalFuture<?> registerCachesFuture;\n+    private IgniteInternalFuture<?> registerCachesFut;", "originalCommit": "a082bb641e1f000de1793cb5b31f53bf01a65822", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc0MDk3OQ==", "url": "https://github.com/apache/ignite/pull/7902#discussion_r435740979", "bodyText": "this is about abbr fix: Future -> Fut to decrease amount of warnings. I rely on this object, so picked the moment to fix this. Is there a process how to provide such fixes right way?", "author": "timoninmaxim", "createdAt": "2020-06-05T07:34:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTczMjQ2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTc2NjUxNQ==", "url": "https://github.com/apache/ignite/pull/7902#discussion_r435766515", "bodyText": "Such fixes snatch code ownership (git annotations), so they should be performed only in case you really changing something.", "author": "anton-vinogradov", "createdAt": "2020-06-05T08:24:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTczMjQ2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTgyODIwMg==", "url": "https://github.com/apache/ignite/pull/7902#discussion_r435828202", "bodyText": "Got it. Fixed with re-push to keep the ownership", "author": "timoninmaxim", "createdAt": "2020-06-05T10:17:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTczMjQ2Mg=="}], "type": "inlineReview"}, {"oid": "bfb9bdabe26950ee5ef688b858583dffb519b9f4", "url": "https://github.com/apache/ignite/commit/bfb9bdabe26950ee5ef688b858583dffb519b9f4", "message": "IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-05T10:06:15Z", "type": "commit"}, {"oid": "bfb9bdabe26950ee5ef688b858583dffb519b9f4", "url": "https://github.com/apache/ignite/commit/bfb9bdabe26950ee5ef688b858583dffb519b9f4", "message": "IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-05T10:06:15Z", "type": "forcePushed"}, {"oid": "74284bad607fde4d8a243a55f1a17d0f418c1bfd", "url": "https://github.com/apache/ignite/commit/74284bad607fde4d8a243a55f1a17d0f418c1bfd", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-05T10:16:23Z", "type": "commit"}, {"oid": "4023c3f5d164e6bb6d2cb3138796350879b8705b", "url": "https://github.com/apache/ignite/commit/4023c3f5d164e6bb6d2cb3138796350879b8705b", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-05T11:57:59Z", "type": "commit"}, {"oid": "4023c3f5d164e6bb6d2cb3138796350879b8705b", "url": "https://github.com/apache/ignite/commit/4023c3f5d164e6bb6d2cb3138796350879b8705b", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-05T11:57:59Z", "type": "forcePushed"}, {"oid": "8383b236046ac0c53745dd30dc8a6e02d389ac08", "url": "https://github.com/apache/ignite/commit/8383b236046ac0c53745dd30dc8a6e02d389ac08", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-17T16:17:10Z", "type": "forcePushed"}, {"oid": "be041541aaecbc831a029741cd0f5391b65776a8", "url": "https://github.com/apache/ignite/commit/be041541aaecbc831a029741cd0f5391b65776a8", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-17T16:41:27Z", "type": "forcePushed"}, {"oid": "d0b08a2f2a9962e5ea24baa47e4f1b51b5fab461", "url": "https://github.com/apache/ignite/commit/d0b08a2f2a9962e5ea24baa47e4f1b51b5fab461", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-18T10:18:28Z", "type": "forcePushed"}, {"oid": "26597105f3cc8bd7d474b8d22ba367766a07b22d", "url": "https://github.com/apache/ignite/commit/26597105f3cc8bd7d474b8d22ba367766a07b22d", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-18T10:19:26Z", "type": "commit"}, {"oid": "26597105f3cc8bd7d474b8d22ba367766a07b22d", "url": "https://github.com/apache/ignite/commit/26597105f3cc8bd7d474b8d22ba367766a07b22d", "message": "fixup! IGNITE-13051 fix: check mvcc configuration after register caches future completion", "committedDate": "2020-06-18T10:19:26Z", "type": "forcePushed"}]}