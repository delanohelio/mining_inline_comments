{"pr_number": 8154, "pr_title": "Ducktape Service Specs", "pr_createdAt": "2020-08-14T13:53:43Z", "pr_url": "https://github.com/apache/ignite/pull/8154", "timeline": [{"oid": "b8a34450e89f6d4921b76ae36737680ba741a2d8", "url": "https://github.com/apache/ignite/commit/b8a34450e89f6d4921b76ae36737680ba741a2d8", "message": "INJECT", "committedDate": "2020-08-14T12:58:23Z", "type": "commit"}, {"oid": "e98457a7230097958bdf9cd515fdf5318562b3e2", "url": "https://github.com/apache/ignite/commit/e98457a7230097958bdf9cd515fdf5318562b3e2", "message": "Prepare ignitetest distribution for external usage", "committedDate": "2020-08-14T13:48:46Z", "type": "commit"}, {"oid": "0ffeae213d3904e61f4976ac5a83ea15c95c7edc", "url": "https://github.com/apache/ignite/commit/0ffeae213d3904e61f4976ac5a83ea15c95c7edc", "message": "fixup! INJECT", "committedDate": "2020-08-17T07:41:21Z", "type": "commit"}, {"oid": "0ffeae213d3904e61f4976ac5a83ea15c95c7edc", "url": "https://github.com/apache/ignite/commit/0ffeae213d3904e61f4976ac5a83ea15c95c7edc", "message": "fixup! INJECT", "committedDate": "2020-08-17T07:41:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTMwNjkxMA==", "url": "https://github.com/apache/ignite/pull/8154#discussion_r471306910", "bodyText": "As for me, monotonic is install_required, and pytest and mock is not needed at all", "author": "ivandasch", "createdAt": "2020-08-17T07:59:24Z", "path": "modules/ducktests/tests/setup.py", "diffHunk": "@@ -14,46 +14,22 @@\n # limitations under the License.\n \n import re\n-import sys\n-\n from setuptools import find_packages, setup\n-from setuptools.command.test import test as TestCommand\n \n-version = ''\n+\n with open('ignitetest/__init__.py', 'r') as fd:\n     version = re.search(r'^__version__\\s*=\\s*[\\'\"]([^\\'\"]*)[\\'\"]', fd.read(), re.MULTILINE).group(1)\n \n \n-class PyTest(TestCommand):\n-    user_options = [('pytest-args=', 'a', \"Arguments to pass to py.test\")]\n-\n-    def initialize_options(self):\n-        TestCommand.initialize_options(self)\n-        self.pytest_args = []\n-\n-    def finalize_options(self):\n-        TestCommand.finalize_options(self)\n-        self.test_args = []\n-        self.test_suite = True\n-\n-    def run_tests(self):\n-        # import here, cause outside the eggs aren't loaded\n-        import pytest\n-        print(self.pytest_args)\n-        errno = pytest.main(self.pytest_args)\n-        sys.exit(errno)\n-\n-\n # Note: when changing the version of ducktape, also revise tests/docker/Dockerfile\n setup(name=\"ignitetest\",\n       version=version,\n       description=\"Apache Ignite System Tests\",\n       author=\"Apache Ignite\",\n       platforms=[\"any\"],\n       license=\"apache2.0\",\n-      packages=find_packages(),\n+      packages=find_packages(exclude=[\"ignitetest.tests\", \"ignitetest.tests.*\"]),\n       include_package_data=True,\n-      install_requires=[\"ducktape==0.7.8\", \"requests==2.20.0\"],\n-      tests_require=[\"pytest\", \"mock\", \"monotonic\"],\n-      cmdclass={'test': PyTest}\n+      install_requires=[\"ducktape==0.7.8\", \"requests==2.22.0\"],\n+      tests_require=[\"pytest\", \"mock\", \"monotonic\"]\n )", "originalCommit": "0ffeae213d3904e61f4976ac5a83ea15c95c7edc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQzNjA4Mg==", "url": "https://github.com/apache/ignite/pull/8154#discussion_r471436082", "bodyText": "fixed", "author": "timoninmaxim", "createdAt": "2020-08-17T12:11:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTMwNjkxMA=="}], "type": "inlineReview"}, {"oid": "d039bd86b2db870260907b24ec932b57607922ee", "url": "https://github.com/apache/ignite/commit/d039bd86b2db870260907b24ec932b57607922ee", "message": "fixup! Prepare ignitetest distribution for external usage", "committedDate": "2020-08-17T12:11:30Z", "type": "commit"}]}