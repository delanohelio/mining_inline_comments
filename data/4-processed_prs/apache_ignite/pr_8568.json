{"pr_number": 8568, "pr_title": "IGNITE-12824 .NET: Add BinaryConfiguration.TimestampConverter", "pr_createdAt": "2020-12-11T13:06:40Z", "pr_url": "https://github.com/apache/ignite/pull/8568", "timeline": [{"oid": "d5254a107d58e491cedd993b5e64df714d76dd1d", "url": "https://github.com/apache/ignite/commit/d5254a107d58e491cedd993b5e64df714d76dd1d", "message": "IGNITE-12824: WIP", "committedDate": "2020-12-11T13:05:53Z", "type": "commit"}, {"oid": "ca3cc3a3f73ae779f1bd7d48ec3d3d73b5d4047f", "url": "https://github.com/apache/ignite/commit/ca3cc3a3f73ae779f1bd7d48ec3d3d73b5d4047f", "message": "IGNITE-12824: WIP", "committedDate": "2020-12-11T14:14:29Z", "type": "commit"}, {"oid": "063b6f0a20bf6e705fdfe5aeb5146d85f5f49da0", "url": "https://github.com/apache/ignite/commit/063b6f0a20bf6e705fdfe5aeb5146d85f5f49da0", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net", "committedDate": "2020-12-14T14:06:46Z", "type": "commit"}, {"oid": "24a89edebbac56753c732068459da61ec38755c0", "url": "https://github.com/apache/ignite/commit/24a89edebbac56753c732068459da61ec38755c0", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net", "committedDate": "2020-12-14T16:57:36Z", "type": "commit"}, {"oid": "17ffb017959cf262ec97672358e6eaa6d8122293", "url": "https://github.com/apache/ignite/commit/17ffb017959cf262ec97672358e6eaa6d8122293", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net", "committedDate": "2020-12-14T16:58:44Z", "type": "commit"}, {"oid": "317a6662433c73e7f31f1e0f0c5f36b685553339", "url": "https://github.com/apache/ignite/commit/317a6662433c73e7f31f1e0f0c5f36b685553339", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net", "committedDate": "2020-12-14T17:00:02Z", "type": "commit"}, {"oid": "2086fbf5f20bfc1b649620ceae4634a876d9298b", "url": "https://github.com/apache/ignite/commit/2086fbf5f20bfc1b649620ceae4634a876d9298b", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net", "committedDate": "2020-12-14T17:01:20Z", "type": "commit"}, {"oid": "d0514d34ca9d1e857ff4c302b15a7b8c88f7c9c7", "url": "https://github.com/apache/ignite/commit/d0514d34ca9d1e857ff4c302b15a7b8c88f7c9c7", "message": "IGNITE-12824: Fix of writing dates to the cache from the .Net", "committedDate": "2020-12-14T17:04:27Z", "type": "commit"}, {"oid": "03469e9e7a9f77d370313c54581e0f86c7ee1db9", "url": "https://github.com/apache/ignite/commit/03469e9e7a9f77d370313c54581e0f86c7ee1db9", "message": "IGNITE-12824: Tests fix.", "committedDate": "2020-12-14T17:11:16Z", "type": "commit"}, {"oid": "58254afb18d441ef9e827ceaa329100189a677ef", "url": "https://github.com/apache/ignite/commit/58254afb18d441ef9e827ceaa329100189a677ef", "message": "Merge branch 'master' into IGNITE-12824", "committedDate": "2020-12-16T12:59:49Z", "type": "commit"}, {"oid": "75ee2ceb9888bba5f2d04f2e9f5a44cd9a282733", "url": "https://github.com/apache/ignite/commit/75ee2ceb9888bba5f2d04f2e9f5a44cd9a282733", "message": "IGNITE-12824: Test update", "committedDate": "2020-12-16T14:33:42Z", "type": "commit"}, {"oid": "5b196fe75331c092fe83d4e6ac538a543a0e2692", "url": "https://github.com/apache/ignite/commit/5b196fe75331c092fe83d4e6ac538a543a0e2692", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java", "committedDate": "2020-12-16T14:46:39Z", "type": "commit"}, {"oid": "a06e4a3bc9da5a534069c23371e0979b2bc9643a", "url": "https://github.com/apache/ignite/commit/a06e4a3bc9da5a534069c23371e0979b2bc9643a", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java", "committedDate": "2020-12-16T14:59:43Z", "type": "commit"}, {"oid": "18795944b37a8c714c023c93b3c9b6baad904028", "url": "https://github.com/apache/ignite/commit/18795944b37a8c714c023c93b3c9b6baad904028", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java", "committedDate": "2020-12-16T15:01:23Z", "type": "commit"}, {"oid": "e08e09ab3564f3ca9d7c2b021892190237db2368", "url": "https://github.com/apache/ignite/commit/e08e09ab3564f3ca9d7c2b021892190237db2368", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java", "committedDate": "2020-12-16T15:05:34Z", "type": "commit"}, {"oid": "ef420dac3c47b5694b8b5803ab799dd2da83b533", "url": "https://github.com/apache/ignite/commit/ef420dac3c47b5694b8b5803ab799dd2da83b533", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java", "committedDate": "2020-12-16T15:23:48Z", "type": "commit"}, {"oid": "7ac33e711f17f4ef6916bef733e27cf4fef63aea", "url": "https://github.com/apache/ignite/commit/7ac33e711f17f4ef6916bef733e27cf4fef63aea", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java", "committedDate": "2020-12-17T15:42:26Z", "type": "commit"}, {"oid": "af92eb45cc27b155794f05bfbd990dbb3d4d942f", "url": "https://github.com/apache/ignite/commit/af92eb45cc27b155794f05bfbd990dbb3d4d942f", "message": "IGNITE-13865: Support of DateTime as a key or value in .Net and Java", "committedDate": "2020-12-17T15:48:56Z", "type": "commit"}, {"oid": "e99e251eef5b666d35ba3f156668a3db892c20e0", "url": "https://github.com/apache/ignite/commit/e99e251eef5b666d35ba3f156668a3db892c20e0", "message": "Merge branch 'master' into IGNITE-12824", "committedDate": "2020-12-18T21:28:34Z", "type": "commit"}, {"oid": "3fb26e168dabd7d77712e9f0d1ce1cc1ccc8b9da", "url": "https://github.com/apache/ignite/commit/3fb26e168dabd7d77712e9f0d1ce1cc1ccc8b9da", "message": "IGNITE-12824: Test update", "committedDate": "2020-12-18T21:31:10Z", "type": "commit"}, {"oid": "d84249a0ac41644744737c9d05e4b81604c25985", "url": "https://github.com/apache/ignite/commit/d84249a0ac41644744737c9d05e4b81604c25985", "message": "IGNITE-12824: Update of the date conversion(works on Mac)", "committedDate": "2020-12-19T19:05:05Z", "type": "commit"}, {"oid": "0b0af6fbfd5f316892c99cb10959ce8483609b22", "url": "https://github.com/apache/ignite/commit/0b0af6fbfd5f316892c99cb10959ce8483609b22", "message": "IGNITE-12824: Allows local dates only for `ForceTimestamp` mode.", "committedDate": "2020-12-20T08:34:00Z", "type": "commit"}, {"oid": "e3ecbaaa1a8069db9ae79f65e87a6d789dca4171", "url": "https://github.com/apache/ignite/commit/e3ecbaaa1a8069db9ae79f65e87a6d789dca4171", "message": "IGNITE-12824: Allows local dates only for `ForceTimestamp` mode.", "committedDate": "2020-12-20T08:57:10Z", "type": "commit"}, {"oid": "332eb0667acc619f53222f2fb26994fe7852d9e8", "url": "https://github.com/apache/ignite/commit/332eb0667acc619f53222f2fb26994fe7852d9e8", "message": "IGNITE-12824: Allows local dates only for `ForceTimestamp` mode.", "committedDate": "2020-12-20T08:59:05Z", "type": "commit"}, {"oid": "1d1dc8642b107458957e60d26f3bd5a617f33fff", "url": "https://github.com/apache/ignite/commit/1d1dc8642b107458957e60d26f3bd5a617f33fff", "message": "IGNITE-12824: Allows local dates only for `ForceTimestamp` mode.", "committedDate": "2020-12-20T09:53:46Z", "type": "commit"}, {"oid": "c8462970a27527f98f3c19e2cb9c692b87258bba", "url": "https://github.com/apache/ignite/commit/c8462970a27527f98f3c19e2cb9c692b87258bba", "message": "IGNITE-12824: Allows usages of Local dates but only for .NetCore applications.", "committedDate": "2020-12-20T10:03:44Z", "type": "commit"}, {"oid": "2e5edb30b5b8e04d5826edb6360a05cf270125d2", "url": "https://github.com/apache/ignite/commit/2e5edb30b5b8e04d5826edb6360a05cf270125d2", "message": "IGNITE-12824: Allows usages of Local dates but only for .NetCore applications.", "committedDate": "2020-12-20T10:09:56Z", "type": "commit"}, {"oid": "2e5edb30b5b8e04d5826edb6360a05cf270125d2", "url": "https://github.com/apache/ignite/commit/2e5edb30b5b8e04d5826edb6360a05cf270125d2", "message": "IGNITE-12824: Allows usages of Local dates but only for .NetCore applications.", "committedDate": "2020-12-20T10:09:56Z", "type": "forcePushed"}, {"oid": "078b658c8fac220512ca60d05ed033759f696db1", "url": "https://github.com/apache/ignite/commit/078b658c8fac220512ca60d05ed033759f696db1", "message": "IGNITE-12824: IDateTimeConverter implemented", "committedDate": "2020-12-21T17:29:26Z", "type": "commit"}, {"oid": "969e5c517ef6dff61d7919bb559fe84ab3f25ff5", "url": "https://github.com/apache/ignite/commit/969e5c517ef6dff61d7919bb559fe84ab3f25ff5", "message": "IGNITE-12824: IDateTimeConverter implemented", "committedDate": "2020-12-21T17:35:42Z", "type": "commit"}, {"oid": "14b44568f6bd87e01a81fd87320e4ccb6fb40773", "url": "https://github.com/apache/ignite/commit/14b44568f6bd87e01a81fd87320e4ccb6fb40773", "message": "IGNITE-12824: IDateTimeConverter implemented", "committedDate": "2020-12-21T17:36:47Z", "type": "commit"}, {"oid": "a93dc9fc934889630bbfd881c10a7bb8af3bd883", "url": "https://github.com/apache/ignite/commit/a93dc9fc934889630bbfd881c10a7bb8af3bd883", "message": "IGNITE-12824: License fix.", "committedDate": "2020-12-22T06:53:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE3NzU0NQ==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547177545", "bodyText": "Avoid object allocation and call ReadTimestamp directly:\nres = TypeCaster<T>.Cast(BinaryUtils.ReadTimestamp(ctx.Stream, ctx.Marshaller.DateTimeConverter));\nreturn true;", "author": "ptupitsyn", "createdAt": "2020-12-22T09:50:52Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Binary/BinarySystemHandlers.cs", "diffHunk": "@@ -258,8 +255,16 @@ public static bool TryReadSystemType<T>(byte typeId, BinaryReader ctx, out T res\n \n             if (handler == null)\n             {\n-                res = default(T);\n-                return false;\n+                if (typeId == BinaryTypeId.Timestamp)\n+                {\n+                    // Date.\n+                    handler = new BinarySystemReader<DateTime?>(stream => BinaryUtils.ReadTimestamp(stream, ctx.Marshaller.DateTimeConverter));", "originalCommit": "a93dc9fc934889630bbfd881c10a7bb8af3bd883", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE3ODUwMA==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547178500", "bodyText": "Convert -> Converts, here and below", "author": "ptupitsyn", "createdAt": "2020-12-22T09:52:48Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/IDateTimeConverter.cs", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Binary\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Converter for DateTime objects.\n+    /// </summary>\n+    public interface IDateTimeConverter\n+    {\n+        /// <summary>Convert date to Java ticks.</summary>", "originalCommit": "a93dc9fc934889630bbfd881c10a7bb8af3bd883", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE3ODkwOQ==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547178909", "bodyText": "Converts <see cref=\"DateTime\"/> values to Java Timestamp and back.", "author": "ptupitsyn", "createdAt": "2020-12-22T09:53:34Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/IDateTimeConverter.cs", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Binary\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Converter for DateTime objects.", "originalCommit": "a93dc9fc934889630bbfd881c10a7bb8af3bd883", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MDcyNw==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547180727", "bodyText": "Since we decided to operate on Java-specific Timestamp format here, I think a better name would be ITimestampConverter. It is also consistent with WriteTimestamp / ReadTimestamp methods.", "author": "ptupitsyn", "createdAt": "2020-12-22T09:56:59Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/IDateTimeConverter.cs", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+namespace Apache.Ignite.Core.Binary\n+{\n+    using System;\n+\n+    /// <summary>\n+    /// Converter for DateTime objects.\n+    /// </summary>\n+    public interface IDateTimeConverter", "originalCommit": "a93dc9fc934889630bbfd881c10a7bb8af3bd883", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzIwNzU4NQ==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547207585", "bodyText": "Renamed", "author": "nizhikov", "createdAt": "2020-12-22T10:50:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MDcyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MTczMQ==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547181731", "bodyText": "See above - let's rename to ITimestampConverter TimestampConverter", "author": "ptupitsyn", "createdAt": "2020-12-22T09:58:59Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/BinaryConfiguration.cs", "diffHunk": "@@ -136,6 +137,11 @@ public BinaryConfiguration(params Type[] binaryTypes)\n         /// </summary>\n         public IBinarySerializer Serializer { get; set; }\n \n+        /// <summary>\n+        /// Default date time converter.\n+        /// </summary>\n+        public IDateTimeConverter DateTimeConverter { get; set; }", "originalCommit": "a93dc9fc934889630bbfd881c10a7bb8af3bd883", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzIwNzY2Mg==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547207662", "bodyText": "Renamed", "author": "nizhikov", "createdAt": "2020-12-22T10:51:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MTczMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MzQ1OA==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547183458", "bodyText": "/// <summary>\n        /// Gets or sets a converter between <see cref=\"DateTime\"/> and Java Timestamp.\n        /// Called from <see cref=\"IBinaryWriter.WriteTimestamp\"/>, <see cref=\"IBinaryWriter.WriteTimestampArray\"/>,\n        /// <see cref=\"IBinaryReader.ReadTimestamp\"/>, <see cref=\"IBinaryReader.ReadTimestampArray\"/>.\n        /// <para />\n        /// See also <see cref=\"ForceTimestamp\"/>.\n        /// </summary>", "author": "ptupitsyn", "createdAt": "2020-12-22T10:02:39Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Binary/BinaryConfiguration.cs", "diffHunk": "@@ -136,6 +137,11 @@ public BinaryConfiguration(params Type[] binaryTypes)\n         /// </summary>\n         public IBinarySerializer Serializer { get; set; }\n \n+        /// <summary>\n+        /// Default date time converter.\n+        /// </summary>", "originalCommit": "a93dc9fc934889630bbfd881c10a7bb8af3bd883", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4NDU4NQ==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547184585", "bodyText": "Also please update the doc for ForceTimestamp below like this:\nOnly UTC values are supported in Timestamp format. Other values will cause an exception on write, unless <see cref=\"TimestampConverter\"/> is provided.", "author": "ptupitsyn", "createdAt": "2020-12-22T10:04:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MzQ1OA=="}], "type": "inlineReview"}, {"oid": "8a481daff50310133edfe82384404872294c35a4", "url": "https://github.com/apache/ignite/commit/8a481daff50310133edfe82384404872294c35a4", "message": "IGNITE-12824: Code review fixes.", "committedDate": "2020-12-22T11:05:31Z", "type": "commit"}, {"oid": "e63549543e1e55b59b437770654039a940d0715c", "url": "https://github.com/apache/ignite/commit/e63549543e1e55b59b437770654039a940d0715c", "message": "IGNITE-12824: Code review fixes.", "committedDate": "2020-12-22T12:24:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQyMzg5NQ==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547423895", "bodyText": "I think this test will work on .NET Framework too (and we should have a test that works on .NET Framework).", "author": "ptupitsyn", "createdAt": "2020-12-22T18:08:31Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core.Tests/Binary/BinaryDateTimeTest.cs", "diffHunk": "@@ -110,6 +111,34 @@ public void TestClassAttributes()\n             AssertTimestampField<DateTimeClassAttribute2>((o, d) => o.Value = d, o => o.Value, \"Value\");\n         }\n \n+#if NETCOREAPP", "originalCommit": "e63549543e1e55b59b437770654039a940d0715c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc0MjkwMQ==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547742901", "bodyText": "Fixed.", "author": "nizhikov", "createdAt": "2020-12-23T07:16:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQyMzg5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQyNDUyOQ==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547424529", "bodyText": "Unused variable ex.\n\"Converter Error!\" is a message that will be displayed on assertion failure. I think the intent here is to check the exception message instead. To do that, add Assert.AreEqual(\"Converter Error!\", ex.Message).", "author": "ptupitsyn", "createdAt": "2020-12-22T18:09:56Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core.Tests/Binary/BinaryDateTimeTest.cs", "diffHunk": "@@ -110,6 +111,34 @@ public void TestClassAttributes()\n             AssertTimestampField<DateTimeClassAttribute2>((o, d) => o.Value = d, o => o.Value, \"Value\");\n         }\n \n+#if NETCOREAPP\n+        /// <summary>\n+        /// Tests custom timestamp converter.\n+        /// </summary>\n+        [Test]\n+        public void TestCustomTimestampConverter()\n+        {\n+            var cfg =  new IgniteConfiguration(TestUtils.GetTestConfiguration(name: \"ignite-1\"))\n+            {\n+                BinaryConfiguration = new BinaryConfiguration()\n+                {\n+                    ForceTimestamp = true, \n+                    TimestampConverter = new TimestampConverter()\n+                }\n+            };\n+            var ignite = Ignition.Start(cfg);\n+            var binary = ignite.GetBinary();\n+ \n+            // Check config.\n+            Assert.NotNull(ignite.GetConfiguration().BinaryConfiguration.TimestampConverter);\n+\n+            AssertTimestampField<DateTimeObj2>((o, d) => o.Value = d, o => o.Value, \"Value\");\n+\n+            var ex = Assert.Throws<BinaryObjectException>(() => binary.ToBinary<IBinaryObject>(new DateTime(1997, 8, 29)), \n+                \"Converter Error!\");", "originalCommit": "e63549543e1e55b59b437770654039a940d0715c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzc0MzA5OA==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r547743098", "bodyText": "Thanks! Fixed", "author": "nizhikov", "createdAt": "2020-12-23T07:17:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQyNDUyOQ=="}], "type": "inlineReview"}, {"oid": "f7fe8cd1f32d1c03fa72c812d416d71bf3ce1ec7", "url": "https://github.com/apache/ignite/commit/f7fe8cd1f32d1c03fa72c812d416d71bf3ce1ec7", "message": "Merge branch 'master' into IGNITE-12824", "committedDate": "2020-12-23T07:10:48Z", "type": "commit"}, {"oid": "c66a2f1968633600ff79627bcb9158dfa5f2d8f6", "url": "https://github.com/apache/ignite/commit/c66a2f1968633600ff79627bcb9158dfa5f2d8f6", "message": "IGNITE-12824: Code review fixes.", "committedDate": "2020-12-23T08:37:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODEzMTkyNA==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r548131924", "bodyText": "Let's extract a constant to avoid repeating \"ToJavaTicks Error!\" value.", "author": "ptupitsyn", "createdAt": "2020-12-23T18:45:51Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core.Tests/Binary/BinaryDateTimeTest.cs", "diffHunk": "@@ -134,10 +133,22 @@ public void TestCustomTimestampConverter()\n \n             AssertTimestampField<DateTimeObj2>((o, d) => o.Value = d, o => o.Value, \"Value\");\n \n-            var ex = Assert.Throws<BinaryObjectException>(() => binary.ToBinary<IBinaryObject>(new DateTime(1997, 8, 29)), \n-                \"Converter Error!\");\n+            var dt1 = new DateTime(1997, 8, 29, 0, 0, 0, DateTimeKind.Utc);\n+\n+            var ex = Assert.Throws<BinaryObjectException>(() => binary.ToBinary<DateTime>(dt1));\n+            Assert.AreEqual(\"ToJavaTicks Error!\", ex.Message);", "originalCommit": "c66a2f1968633600ff79627bcb9158dfa5f2d8f6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODIzNTI1Mw==", "url": "https://github.com/apache/ignite/pull/8568#discussion_r548235253", "bodyText": "Fixed.", "author": "nizhikov", "createdAt": "2020-12-23T21:03:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODEzMTkyNA=="}], "type": "inlineReview"}, {"oid": "be9a7dfa476419786db09818806e4d78dcb68baf", "url": "https://github.com/apache/ignite/commit/be9a7dfa476419786db09818806e4d78dcb68baf", "message": "IGNITE-12824: Code review fixes.", "committedDate": "2020-12-23T21:12:41Z", "type": "commit"}, {"oid": "05a244b5d872eb9fa7a1138bdc9ac10fb64e6aa8", "url": "https://github.com/apache/ignite/commit/05a244b5d872eb9fa7a1138bdc9ac10fb64e6aa8", "message": "IGNITE-12824: Code review fixes.", "committedDate": "2020-12-24T08:21:53Z", "type": "commit"}, {"oid": "9500998923e0e725bf636696178888bcc7a6fa83", "url": "https://github.com/apache/ignite/commit/9500998923e0e725bf636696178888bcc7a6fa83", "message": "IGNITE-12824: Code review fixes.", "committedDate": "2020-12-24T08:24:46Z", "type": "commit"}, {"oid": "fc2b7b185e99855dc974fb773a6aeac91303026e", "url": "https://github.com/apache/ignite/commit/fc2b7b185e99855dc974fb773a6aeac91303026e", "message": "Add TestAddYearTimestampConverter", "committedDate": "2020-12-24T09:25:38Z", "type": "commit"}, {"oid": "ae70be9ac28b6f4bf14deadfc0f9a5128a77055c", "url": "https://github.com/apache/ignite/commit/ae70be9ac28b6f4bf14deadfc0f9a5128a77055c", "message": "Add TestAddYearTimestampConverter", "committedDate": "2020-12-24T09:38:42Z", "type": "commit"}]}