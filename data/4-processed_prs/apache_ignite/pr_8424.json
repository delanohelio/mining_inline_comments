{"pr_number": 8424, "pr_title": "IGNITE-13663 : Represent in the documenttion affection of several node addresses on failure detection v2.", "pr_createdAt": "2020-11-03T16:46:30Z", "pr_url": "https://github.com/apache/ignite/pull/8424", "timeline": [{"oid": "fa0902f5187e15f670b73599d9e181a0d094774d", "url": "https://github.com/apache/ignite/commit/fa0902f5187e15f670b73599d9e181a0d094774d", "message": "First impl.", "committedDate": "2020-11-03T16:37:30Z", "type": "commit"}, {"oid": "ba5d51896f0066d1c54918d49ae4b3c2a6826321", "url": "https://github.com/apache/ignite/commit/ba5d51896f0066d1c54918d49ae4b3c2a6826321", "message": "Minor fix.", "committedDate": "2020-11-03T16:40:22Z", "type": "commit"}, {"oid": "12e44079eb7aac3972cbd10c1551f9a04c90d58f", "url": "https://github.com/apache/ignite/commit/12e44079eb7aac3972cbd10c1551f9a04c90d58f", "message": "fix", "committedDate": "2020-11-03T18:17:46Z", "type": "commit"}, {"oid": "dbd2cbe3bab71aa4acb8b44ec6b02e96855ce9f8", "url": "https://github.com/apache/ignite/commit/dbd2cbe3bab71aa4acb8b44ec6b02e96855ce9f8", "message": "Merge branch 'master' into IGNITE-13663", "committedDate": "2020-11-11T15:33:59Z", "type": "commit"}, {"oid": "e18287311a91ec914b3c3fed2e201ed4d898672f", "url": "https://github.com/apache/ignite/commit/e18287311a91ec914b3c3fed2e201ed4d898672f", "message": "Text fix. Merged master.", "committedDate": "2020-11-11T15:42:51Z", "type": "commit"}, {"oid": "4894b99d0d740b9d145a877544e16930d03a9850", "url": "https://github.com/apache/ignite/commit/4894b99d0d740b9d145a877544e16930d03a9850", "message": "Shorten text.", "committedDate": "2020-11-11T15:47:06Z", "type": "commit"}, {"oid": "5945fd59db3dcae89aaeb53d72fc30177ecd49fa", "url": "https://github.com/apache/ignite/commit/5945fd59db3dcae89aaeb53d72fc30177ecd49fa", "message": "Looks good.", "committedDate": "2020-11-11T16:14:20Z", "type": "commit"}, {"oid": "553c440156cbbfd0f3f717f1913050e97684240a", "url": "https://github.com/apache/ignite/commit/553c440156cbbfd0f3f717f1913050e97684240a", "message": "Merge branch 'master' into IGNITE-13663", "committedDate": "2020-11-12T17:43:06Z", "type": "commit"}, {"oid": "7f6f55918218544a7a59df1169539e4154f47397", "url": "https://github.com/apache/ignite/commit/7f6f55918218544a7a59df1169539e4154f47397", "message": "Fix.", "committedDate": "2020-11-12T17:44:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3NTExNA==", "url": "https://github.com/apache/ignite/pull/8424#discussion_r524775114", "bodyText": "Vlad,\nGood explanation, crystal clear and straight to the point. I made some tweaks. Please use this final version below and see if we need to mention TcpCommunicationSpi.localAddress along with TcpDiscoverySpi.localAddress\nYou should initialize the IgniteConfiguration.localHost or TcpDiscoverySpi.localAddress parameter only with those network interfaces that will be used for inter-node communication. By default, a node binds to and listens on all available IP addresses of an environment it's running on. It can prolong node failures detection if some of the node's addresses are not reachable from other cluster nodes.", "author": "dmagda", "createdAt": "2020-11-16T23:55:17Z", "path": "docs/_docs/clustering/network-configuration.adoc", "diffHunk": "@@ -49,10 +49,18 @@ tab:C++[unsupported]\n The following table describes some most important properties of `TcpDiscoverySpi`.\n You can find the complete list of properties in the javadoc:org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi[] javadoc.\n \n+[CAUTION]\n+====\n+You should assign `IgniteConfiguration.localHost` or `TcpDiscoverySpi.localAddress`.", "originalCommit": "7f6f55918218544a7a59df1169539e4154f47397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM0Njg1Nw==", "url": "https://github.com/apache/ignite/pull/8424#discussion_r526346857", "bodyText": "Fixed with the exception we can bind only to one net. interface currently. Or automatically to all.", "author": "Vladsz83", "createdAt": "2020-11-18T19:02:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3NTExNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3NzA5OQ==", "url": "https://github.com/apache/ignite/pull/8424#discussion_r524777099", "bodyText": "Please adjust to the following:\n... If set, overrides the IgniteConfiguration.localHost setting. | By default, a node binds to all available network addresses. If there is a non-loopback address available, then java.net.InetAddress.getLocalHost() is used.", "author": "dmagda", "createdAt": "2020-11-16T23:57:19Z", "path": "docs/_docs/clustering/network-configuration.adoc", "diffHunk": "@@ -49,10 +49,18 @@ tab:C++[unsupported]\n The following table describes some most important properties of `TcpDiscoverySpi`.\n You can find the complete list of properties in the javadoc:org.apache.ignite.spi.discovery.tcp.TcpDiscoverySpi[] javadoc.\n \n+[CAUTION]\n+====\n+You should assign `IgniteConfiguration.localHost` or `TcpDiscoverySpi.localAddress`.\n+By default, node obtains all available IP addresses. Several node addresses can prolong detection of node failure.\n+You should not allow node bind to multiple ip addresses until they represent some real physical connections which can\n+give you more reliability.\n+====\n+\n [cols=\"1,2,1\",opts=\"header\"]\n |===\n |Property | Description| Default Value\n-| `localAddress`| Local host IP address used for discovery. | By default, the node uses the first non-loopback address it finds. If there is no non-loopback address available, then `java.net.InetAddress.getLocalHost()` is used.\n+| `localAddress`| Local host IP address used for discovery. Prevails over `IgniteConfiguration.localHost`. | By default, all available addresses are assigned to node. If there is no non-loopback address available, then `java.net.InetAddress.getLocalHost()` is used.", "originalCommit": "7f6f55918218544a7a59df1169539e4154f47397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM0NjkyOA==", "url": "https://github.com/apache/ignite/pull/8424#discussion_r526346928", "bodyText": "Fixed.", "author": "Vladsz83", "createdAt": "2020-11-18T19:02:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3NzA5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3NzcyMg==", "url": "https://github.com/apache/ignite/pull/8424#discussion_r524777722", "bodyText": "Please update to:\n... If set, overrides the IgniteConfiguration.localHost setting.", "author": "dmagda", "createdAt": "2020-11-16T23:57:56Z", "path": "docs/_docs/clustering/network-configuration.adoc", "diffHunk": "@@ -111,7 +119,7 @@ You can find the list of all properties in the javadoc:org.apache.ignite.spi.com\n [cols=\"1,2,1\",opts=\"header\"]\n |===\n |Property | Description| Default Value\n-| `localAddress` | The local address for the communication SPI to bind to. |\n+| `localAddress` | The local address for the communication SPI to bind to. Prevails over `IgniteConfiguration.localHost`. |", "originalCommit": "7f6f55918218544a7a59df1169539e4154f47397", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjM0Njk5MQ==", "url": "https://github.com/apache/ignite/pull/8424#discussion_r526346991", "bodyText": "Fixed.", "author": "Vladsz83", "createdAt": "2020-11-18T19:03:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc3NzcyMg=="}], "type": "inlineReview"}, {"oid": "0a9c68333a469147d0cfd0babe1cf8f5910ca4bc", "url": "https://github.com/apache/ignite/commit/0a9c68333a469147d0cfd0babe1cf8f5910ca4bc", "message": "Merge branch 'master' into IGNITE-13663", "committedDate": "2020-11-18T18:52:54Z", "type": "commit"}, {"oid": "49714ac3355fdfea4bb78420d7618eb7a7157d98", "url": "https://github.com/apache/ignite/commit/49714ac3355fdfea4bb78420d7618eb7a7157d98", "message": "Fix", "committedDate": "2020-11-18T19:01:35Z", "type": "commit"}]}