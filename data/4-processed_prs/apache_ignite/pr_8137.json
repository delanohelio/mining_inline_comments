{"pr_number": 8137, "pr_title": "Ignite ducktape test decorators", "pr_createdAt": "2020-08-11T07:03:42Z", "pr_url": "https://github.com/apache/ignite/pull/8137", "timeline": [{"oid": "13254a1cdffc8bf28f78561ee760503fc7512f77", "url": "https://github.com/apache/ignite/commit/13254a1cdffc8bf28f78561ee760503fc7512f77", "message": "Add version_if test method decorator. Fix some minors.", "committedDate": "2020-08-11T07:03:08Z", "type": "commit"}, {"oid": "0146cf7c0da9f22a2cdc0cb708acaa7f69dc53e1", "url": "https://github.com/apache/ignite/commit/0146cf7c0da9f22a2cdc0cb708acaa7f69dc53e1", "message": "Remove unnecessary version.", "committedDate": "2020-08-11T07:05:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQyOTU0MA==", "url": "https://github.com/apache/ignite/pull/8137#discussion_r468429540", "bodyText": "match variable redefinition makes code unreadable for me.", "author": "anton-vinogradov", "createdAt": "2020-08-11T08:56:01Z", "path": "modules/ducktests/tests/ignitetest/services/utils/control_utility.py", "diffHunk": "@@ -105,18 +105,22 @@ def deactivate(self):\n \n     @staticmethod\n     def __parse_cluster_state(output):\n-        state_pattern = re.compile(\"Cluster state: ([^\\\\s]+)\")\n-        topology_pattern = re.compile(\"Current topology version: (\\\\d+)\")\n-        baseline_pattern = re.compile(\"Consistent(Id|ID)=([^\\\\s]+),\\\\sS(tate|TATE)=([^\\\\s]+),?(\\\\sOrder=(\\\\d+))?\")\n+        state_pattern = re.compile(\"Cluster state: (?P<cluster_state>[^\\\\s]+)\")\n+        topology_pattern = re.compile(\"Current topology version: (?P<topology_version>\\\\d+)\")\n+        baseline_pattern = re.compile(\"Consistent(Id|ID)=(?P<consistent_id>[^\\\\s]+),\\\\sS(tate|TATE)=(?P<state>[^\\\\s]+),\"\n+                                      \"?(\\\\sOrder=(?P<order>\\\\d+))?\")\n \n         match = state_pattern.search(output)\n-        state = match.group(1) if match else None\n+        state = match.group(\"cluster_state\") if match else None\n \n         match = topology_pattern.search(output)\n-        topology = int(match.group(1)) if match else None\n+        topology = int(match.group(\"topology_version\")) if match else None\n \n-        baseline = [BaselineNode(consistent_id=m[1], state=m[3], order=int(m[5]) if m[5] else None)\n-                    for m in baseline_pattern.findall(output)]\n+        baseline = []\n+        for match in baseline_pattern.finditer(output):", "originalCommit": "0146cf7c0da9f22a2cdc0cb708acaa7f69dc53e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ1MDI5NA==", "url": "https://github.com/apache/ignite/pull/8137#discussion_r468450294", "bodyText": "There are several matches above. This is the same type Match, so what's the problem.", "author": "ivandasch", "createdAt": "2020-08-11T09:31:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQyOTU0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ2MjIzOA==", "url": "https://github.com/apache/ignite/pull/8137#discussion_r468462238", "bodyText": "you changing the type and content.\nbrief reading may (will) confuse the reader.", "author": "anton-vinogradov", "createdAt": "2020-08-11T09:52:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQyOTU0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ3NjMzMQ==", "url": "https://github.com/apache/ignite/pull/8137#discussion_r468476331", "bodyText": "No, you are not right. Type is the same (see docs to finditer, it returns iterator of Match object)", "author": "ivandasch", "createdAt": "2020-08-11T10:19:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQyOTU0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ3OTU4Ng==", "url": "https://github.com/apache/ignite/pull/8137#discussion_r468479586", "bodyText": "variables should be immutable.\nyou already have a 'match' variable, what's the reason to reassign it with other value?\nwhy not use a new name?", "author": "anton-vinogradov", "createdAt": "2020-08-11T10:25:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQyOTU0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ4NTg0NA==", "url": "https://github.com/apache/ignite/pull/8137#discussion_r468485844", "bodyText": "LOLWUT? Reference should be immutable? Are we using Haskell or Scala?\nAs for me, your proposition sounds like let's create mess with dozens variables, that do the same and have similar semantic.\nI disagree, so I'd better close my PR, I'm tired of this.", "author": "ivandasch", "createdAt": "2020-08-11T10:37:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQyOTU0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxODI5Mg==", "url": "https://github.com/apache/ignite/pull/8137#discussion_r468518292", "bodyText": "No chances %)", "author": "anton-vinogradov", "createdAt": "2020-08-11T11:44:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQyOTU0MA=="}], "type": "inlineReview"}]}