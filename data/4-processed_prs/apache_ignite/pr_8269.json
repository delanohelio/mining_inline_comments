{"pr_number": 8269, "pr_title": "IGNITE-13459 Document new building process of Ignite C++ (CMake)", "pr_createdAt": "2020-09-22T15:13:25Z", "pr_url": "https://github.com/apache/ignite/pull/8269", "timeline": [{"oid": "643a84bd03aaf37db7cafc0ccf3efb1f98ff3a3b", "url": "https://github.com/apache/ignite/commit/643a84bd03aaf37db7cafc0ccf3efb1f98ff3a3b", "message": "IGNITE-13459 Document new build process on linux (CMake)", "committedDate": "2020-09-22T15:11:13Z", "type": "commit"}, {"oid": "2eaccb626717506e751d79a1d445b520219c2abc", "url": "https://github.com/apache/ignite/commit/2eaccb626717506e751d79a1d445b520219c2abc", "message": "WIP", "committedDate": "2020-09-22T15:11:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5MDU1NQ==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r493890555", "bodyText": "I would slightly rephrase the sentence:\n\nThe JDK is used only during the build process and not being by the ODBC driver itself\"", "author": "dmagda", "createdAt": "2020-09-23T20:57:16Z", "path": "docs/_docs/SQL/ODBC/odbc-driver.adoc", "diffHunk": "@@ -201,21 +201,38 @@ As a result, `ignite-odbc-amd64.msi` and `ignite-odbc-x86.msi` files should appe\n \n On a Linux-based operating system, you will need to install an ODBC Driver Manager of your choice to be able to build and use the Ignite ODBC Driver. The ODBC Driver has been tested with link:http://www.unixodbc.org[UnixODBC].\n \n-Additionally, you will need `GCC`, `G++`, and `make` to build the driver and its dependencies.\n+==== Prerequisites\n+include::includes/cpp-linux-build-prerequisites.adoc[]\n \n-Once all the above mentioned are installed, you can build the Ignite ODBC driver:\n+NOTE: JDK is needed currently only for building, odbc driver binary doesn't depend on it.", "originalCommit": "2eaccb626717506e751d79a1d445b520219c2abc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3MDMyNA==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r494370324", "bodyText": "Fixed.", "author": "ivandasch", "createdAt": "2020-09-24T14:34:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5MDU1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5NDU2NQ==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r493894565", "bodyText": "I would update the steps this way if you don't mind:\n\nCreate a build directory for CMake. We'll refer to it as to {CPP_BUILD_DIR}.\n(Optional) Select the prefix of the installation directory which defaults to /usr/local if nothing is set. We'll refer to this directory as to {CPP_INSTALL_DIR}.\nBuild and install the driver by executing the following commands:", "author": "dmagda", "createdAt": "2020-09-23T21:05:00Z", "path": "docs/_docs/SQL/ODBC/odbc-driver.adoc", "diffHunk": "@@ -201,21 +201,38 @@ As a result, `ignite-odbc-amd64.msi` and `ignite-odbc-x86.msi` files should appe\n \n On a Linux-based operating system, you will need to install an ODBC Driver Manager of your choice to be able to build and use the Ignite ODBC Driver. The ODBC Driver has been tested with link:http://www.unixodbc.org[UnixODBC].\n \n-Additionally, you will need `GCC`, `G++`, and `make` to build the driver and its dependencies.\n+==== Prerequisites\n+include::includes/cpp-linux-build-prerequisites.adoc[]\n \n-Once all the above mentioned are installed, you can build the Ignite ODBC driver:\n+NOTE: JDK is needed currently only for building, odbc driver binary doesn't depend on it.\n \n-[source,shell]\n+==== Building ODBC driver\n+- Create build directory for cmake. We'll refer to this as `{CPP_BUILD_DIR}`", "originalCommit": "2eaccb626717506e751d79a1d445b520219c2abc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3MTA1NQ==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r494371055", "bodyText": "Fixed", "author": "ivandasch", "createdAt": "2020-09-24T14:35:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5NDU2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5NTc2OQ==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r493895769", "bodyText": "\"Should\" or \"need to be\" (aka. must) installed?\nShould imply that something is optional.", "author": "dmagda", "createdAt": "2020-09-23T21:07:19Z", "path": "docs/_docs/includes/cpp-linux-build-prerequisites.adoc", "diffHunk": "@@ -0,0 +1,31 @@\n+The following packages should be installed:", "originalCommit": "2eaccb626717506e751d79a1d445b520219c2abc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3MDQyNw==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r494370427", "bodyText": "Fixed.", "author": "ivandasch", "createdAt": "2020-09-24T14:34:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5NTc2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3MTE5Mg==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r494371192", "bodyText": "Fixed.", "author": "ivandasch", "createdAt": "2020-09-24T14:35:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5NTc2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5NjYyMw==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r493896623", "bodyText": "You can remove the \"a directory\". See how these installation steps are described here:\nhttps://ignite.apache.org/docs/2.9.0/installation/installing-using-zip#installing-using-zip-archive", "author": "dmagda", "createdAt": "2020-09-23T21:09:04Z", "path": "docs/_docs/quick-start/cpp.adoc", "diffHunk": "@@ -51,30 +44,62 @@ For information about the {cpp} thin client, see link:thin-clients/cpp-thin-clie\n On unix systems, you can use the command line to build and run the examples included in the Ignite distribution.\n \n === Prerequisites\n-The following packages should be installed:\n-- C++ compiler\n-- libssl\n-- autotools\n-- automake\n-- libtool\n+include::includes/cpp-linux-build-prerequisites.adoc[]\n \n === Building C++ Ignite\n \n-. Download and unzip the Ignite binary release into a directory. We'll refer to this as `{IGNITE_HOME}`.\n-. `cd {IGNITE_HOME}/platforms/cpp`\n-. `libtoolize && aclocal && autoheader && automake --add-missing && autoreconf`\n-. `./configure`\n-. `make`\n-\n-=== Running the Thick Client Example\n-\n-. `cd {IGNITE_HOME}/platforms/cpp/examples`\n-. `libtoolize && aclocal && autoheader && automake --add-missing && autoreconf`\n-. `./configure`\n-. `cd put-get-example`\n-. `make`\n-. `./ignite-put-get-example`\n-\n+- Download and unzip the Ignite binary release into a directory. We'll refer to this as `{IGNITE_HOME}`.", "originalCommit": "2eaccb626717506e751d79a1d445b520219c2abc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3MDU0NA==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r494370544", "bodyText": "Fixed.", "author": "ivandasch", "createdAt": "2020-09-24T14:34:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5NjYyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5Njc3MA==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r493896770", "bodyText": "\"Create a build directory for CMake\"", "author": "dmagda", "createdAt": "2020-09-23T21:09:21Z", "path": "docs/_docs/quick-start/cpp.adoc", "diffHunk": "@@ -51,30 +44,62 @@ For information about the {cpp} thin client, see link:thin-clients/cpp-thin-clie\n On unix systems, you can use the command line to build and run the examples included in the Ignite distribution.\n \n === Prerequisites\n-The following packages should be installed:\n-- C++ compiler\n-- libssl\n-- autotools\n-- automake\n-- libtool\n+include::includes/cpp-linux-build-prerequisites.adoc[]\n \n === Building C++ Ignite\n \n-. Download and unzip the Ignite binary release into a directory. We'll refer to this as `{IGNITE_HOME}`.\n-. `cd {IGNITE_HOME}/platforms/cpp`\n-. `libtoolize && aclocal && autoheader && automake --add-missing && autoreconf`\n-. `./configure`\n-. `make`\n-\n-=== Running the Thick Client Example\n-\n-. `cd {IGNITE_HOME}/platforms/cpp/examples`\n-. `libtoolize && aclocal && autoheader && automake --add-missing && autoreconf`\n-. `./configure`\n-. `cd put-get-example`\n-. `make`\n-. `./ignite-put-get-example`\n-\n+- Download and unzip the Ignite binary release into a directory. We'll refer to this as `{IGNITE_HOME}`.\n+- Create build directory for cmake. We'll refer to this as `{CPP_BUILD_DIR}`", "originalCommit": "2eaccb626717506e751d79a1d445b520219c2abc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3MDYzMA==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r494370630", "bodyText": "Fixed", "author": "ivandasch", "createdAt": "2020-09-24T14:34:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5Njc3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5Nzg3MQ==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r493897871", "bodyText": "\"Use the commands below to build and install Ignite C++\" - or you can use a shorter version. The point is that I would say that the reader needs to \"use the commands\" to do X.", "author": "dmagda", "createdAt": "2020-09-23T21:11:27Z", "path": "docs/_docs/quick-start/cpp.adoc", "diffHunk": "@@ -51,30 +44,62 @@ For information about the {cpp} thin client, see link:thin-clients/cpp-thin-clie\n On unix systems, you can use the command line to build and run the examples included in the Ignite distribution.\n \n === Prerequisites\n-The following packages should be installed:\n-- C++ compiler\n-- libssl\n-- autotools\n-- automake\n-- libtool\n+include::includes/cpp-linux-build-prerequisites.adoc[]\n \n === Building C++ Ignite\n \n-. Download and unzip the Ignite binary release into a directory. We'll refer to this as `{IGNITE_HOME}`.\n-. `cd {IGNITE_HOME}/platforms/cpp`\n-. `libtoolize && aclocal && autoheader && automake --add-missing && autoreconf`\n-. `./configure`\n-. `make`\n-\n-=== Running the Thick Client Example\n-\n-. `cd {IGNITE_HOME}/platforms/cpp/examples`\n-. `libtoolize && aclocal && autoheader && automake --add-missing && autoreconf`\n-. `./configure`\n-. `cd put-get-example`\n-. `make`\n-. `./ignite-put-get-example`\n-\n+- Download and unzip the Ignite binary release into a directory. We'll refer to this as `{IGNITE_HOME}`.\n+- Create build directory for cmake. We'll refer to this as `{CPP_BUILD_DIR}`\n+- Do the folowing:", "originalCommit": "2eaccb626717506e751d79a1d445b520219c2abc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5ODI0Mw==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r493898243", "bodyText": "Same feedback as above, you need to put articles in some places. Just adjust the way you would adjust the instructions above.", "author": "dmagda", "createdAt": "2020-09-23T21:12:08Z", "path": "docs/_docs/quick-start/cpp.adoc", "diffHunk": "@@ -51,30 +44,62 @@ For information about the {cpp} thin client, see link:thin-clients/cpp-thin-clie\n On unix systems, you can use the command line to build and run the examples included in the Ignite distribution.\n \n === Prerequisites\n-The following packages should be installed:\n-- C++ compiler\n-- libssl\n-- autotools\n-- automake\n-- libtool\n+include::includes/cpp-linux-build-prerequisites.adoc[]\n \n === Building C++ Ignite\n \n-. Download and unzip the Ignite binary release into a directory. We'll refer to this as `{IGNITE_HOME}`.\n-. `cd {IGNITE_HOME}/platforms/cpp`\n-. `libtoolize && aclocal && autoheader && automake --add-missing && autoreconf`\n-. `./configure`\n-. `make`\n-\n-=== Running the Thick Client Example\n-\n-. `cd {IGNITE_HOME}/platforms/cpp/examples`\n-. `libtoolize && aclocal && autoheader && automake --add-missing && autoreconf`\n-. `./configure`\n-. `cd put-get-example`\n-. `make`\n-. `./ignite-put-get-example`\n-\n+- Download and unzip the Ignite binary release into a directory. We'll refer to this as `{IGNITE_HOME}`.\n+- Create build directory for cmake. We'll refer to this as `{CPP_BUILD_DIR}`\n+- Do the folowing:\n+\n+[tabs]\n+--\n+tab:Ubuntu[]\n+[source,bash,subs=\"attributes,specialchars\"]\n+----\n+cd ${CPP_BUILD_DIR}\n+cmake -DCMAKE_BUILD_TYPE=Release -DWITH_ODBC=ON -DWITH_THIN_CLIENT=ON ${IGNITE_HOME}/platforms/cpp \n+make\n+sudo make install\n+----\n+\n+tab:CentOS/RHEL[]\n+[source,shell,subs=\"attributes,specialchars\"]\n+----\n+cd ${CPP_BUILD_DIR}\n+cmake3 -DCMAKE_BUILD_TYPE=Release -DWITH_ODBC=ON -DWITH_THIN_CLIENT=ON ${IGNITE_HOME}/platforms/cpp \n+make \n+sudo make install\n+----\n+\n+--\n+\n+\n+=== Building and running the Thick Client Example\n+- Create build directory for cmake. We'll refer to this as `{CPP_EXAMPLES_BUILD_DIR}`", "originalCommit": "2eaccb626717506e751d79a1d445b520219c2abc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3MDc3NQ==", "url": "https://github.com/apache/ignite/pull/8269#discussion_r494370775", "bodyText": "Fixed", "author": "ivandasch", "createdAt": "2020-09-24T14:35:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzg5ODI0Mw=="}], "type": "inlineReview"}, {"oid": "44e48d316c8de33688ee46dcde4222b7cfd01834", "url": "https://github.com/apache/ignite/commit/44e48d316c8de33688ee46dcde4222b7cfd01834", "message": "IGNITE-13459 Review fixes", "committedDate": "2020-09-24T14:32:31Z", "type": "commit"}, {"oid": "debbb9f6db2cc3c9884f31df0da12ee949c69371", "url": "https://github.com/apache/ignite/commit/debbb9f6db2cc3c9884f31df0da12ee949c69371", "message": "IGNITE-13459 Review fixes", "committedDate": "2020-09-24T14:33:55Z", "type": "commit"}]}