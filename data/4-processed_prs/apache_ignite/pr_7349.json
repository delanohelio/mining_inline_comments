{"pr_number": 7349, "pr_title": "IGNITE-12383 Add distances measures between two vectors", "pr_createdAt": "2020-02-02T19:53:21Z", "pr_url": "https://github.com/apache/ignite/pull/7349", "timeline": [{"oid": "8b865cf28fa2ae43221a78b12c39cb49b52a5023", "url": "https://github.com/apache/ignite/commit/8b865cf28fa2ae43221a78b12c39cb49b52a5023", "message": "IGNITE-12383 Add Chebyshev distance?", "committedDate": "2019-12-17T19:25:56Z", "type": "commit"}, {"oid": "75a39498b2004f730fa02bcc4dc637356680d1db", "url": "https://github.com/apache/ignite/commit/75a39498b2004f730fa02bcc4dc637356680d1db", "message": "IGNITE-12383 Add Minkowski distance", "committedDate": "2019-12-17T19:34:58Z", "type": "commit"}, {"oid": "cb775f6f13ba87a5f8402c996211e5d7f25064fd", "url": "https://github.com/apache/ignite/commit/cb775f6f13ba87a5f8402c996211e5d7f25064fd", "message": "IGNITE-12383 Add Java docs", "committedDate": "2019-12-17T19:36:26Z", "type": "commit"}, {"oid": "d1474335e84dc93c870b36dbb9431218334e7255", "url": "https://github.com/apache/ignite/commit/d1474335e84dc93c870b36dbb9431218334e7255", "message": "IGNITE-12383 Refactoring", "committedDate": "2019-12-17T20:31:44Z", "type": "commit"}, {"oid": "5f5b1e6c02bb638526a9cd23399ef599818fe7d2", "url": "https://github.com/apache/ignite/commit/5f5b1e6c02bb638526a9cd23399ef599818fe7d2", "message": "IGNITE-12383 Add asserts", "committedDate": "2019-12-17T20:34:37Z", "type": "commit"}, {"oid": "a153dc4412fcc2707a1cf113e0c8103c9e652945", "url": "https://github.com/apache/ignite/commit/a153dc4412fcc2707a1cf113e0c8103c9e652945", "message": "IGNITE-12383 Add cosine similarity", "committedDate": "2019-12-20T23:26:31Z", "type": "commit"}, {"oid": "ce31bc113450ce814c38da17df11cf3678624910", "url": "https://github.com/apache/ignite/commit/ce31bc113450ce814c38da17df11cf3678624910", "message": "IGNITE-12383 Add cosine similarity", "committedDate": "2020-01-30T20:21:54Z", "type": "commit"}, {"oid": "41f3530ce252fdfd7b23efa6b3f251e14739fb6e", "url": "https://github.com/apache/ignite/commit/41f3530ce252fdfd7b23efa6b3f251e14739fb6e", "message": "IGNITE-12383 Add jaccard index", "committedDate": "2020-01-30T21:26:13Z", "type": "commit"}, {"oid": "2ef432d2898a3be1a616aa505f7b1440e1c49997", "url": "https://github.com/apache/ignite/commit/2ef432d2898a3be1a616aa505f7b1440e1c49997", "message": "IGNITE-12383 Refactoring", "committedDate": "2020-01-31T18:27:50Z", "type": "commit"}, {"oid": "1e0193e974a139a3e62b07f83318299b9bb2497d", "url": "https://github.com/apache/ignite/commit/1e0193e974a139a3e62b07f83318299b9bb2497d", "message": "IGNITE-12383 Refactoring", "committedDate": "2020-02-01T20:33:10Z", "type": "commit"}, {"oid": "e530ad249eef857a8a57f736f7eada48614c7eea", "url": "https://github.com/apache/ignite/commit/e530ad249eef857a8a57f736f7eada48614c7eea", "message": "IGNITE-12383 Add javadoc", "committedDate": "2020-02-01T20:40:14Z", "type": "commit"}, {"oid": "0e2d83ed7004a806d664250caf1bed975548a3a1", "url": "https://github.com/apache/ignite/commit/0e2d83ed7004a806d664250caf1bed975548a3a1", "message": "IGNITE-12383 Add javadoc", "committedDate": "2020-02-01T20:49:16Z", "type": "commit"}, {"oid": "87a20d7a5e888f73be114c52b34dd8d9bac3b8a7", "url": "https://github.com/apache/ignite/commit/87a20d7a5e888f73be114c52b34dd8d9bac3b8a7", "message": "IGNITE-12383 Refactoring", "committedDate": "2020-02-01T20:53:45Z", "type": "commit"}, {"oid": "0d95b7bca04fd72304d23037b541d5e5c8751cf8", "url": "https://github.com/apache/ignite/commit/0d95b7bca04fd72304d23037b541d5e5c8751cf8", "message": "IGNITE-12383 Add tests", "committedDate": "2020-02-01T21:29:25Z", "type": "commit"}, {"oid": "fcfd43f0906baf7c7c9864441155a9402e9d7da6", "url": "https://github.com/apache/ignite/commit/fcfd43f0906baf7c7c9864441155a9402e9d7da6", "message": "IGNITE-12383 Add property tests", "committedDate": "2020-02-01T21:39:11Z", "type": "commit"}, {"oid": "ebdb38c31961549790f8dc009bece5800e80d5a6", "url": "https://github.com/apache/ignite/commit/ebdb38c31961549790f8dc009bece5800e80d5a6", "message": "IGNITE-12383 Extract jaccard index to a separate test", "committedDate": "2020-02-01T21:44:05Z", "type": "commit"}, {"oid": "f9175e18863beacfb7c91590f44d734693d3bf84", "url": "https://github.com/apache/ignite/commit/f9175e18863beacfb7c91590f44d734693d3bf84", "message": "IGNITE-12383 Fix checkstyle", "committedDate": "2020-02-02T19:37:37Z", "type": "commit"}, {"oid": "551f4ea3fdfa653185053d23cca690e294ba413a", "url": "https://github.com/apache/ignite/commit/551f4ea3fdfa653185053d23cca690e294ba413a", "message": "IGNITE-12383 Fix typo and formatting", "committedDate": "2020-02-02T19:58:00Z", "type": "commit"}, {"oid": "12015d608608e703da86902d68c41d0990b60448", "url": "https://github.com/apache/ignite/commit/12015d608608e703da86902d68c41d0990b60448", "message": "IGNITE-12383 Add a newline", "committedDate": "2020-02-02T19:58:36Z", "type": "commit"}, {"oid": "faa5301abe30f070a029cd7397dda3a3733be7dd", "url": "https://github.com/apache/ignite/commit/faa5301abe30f070a029cd7397dda3a3733be7dd", "message": "Merge branch 'master' into IGNITE-12383-add-distances-between-two-vectors", "committedDate": "2020-02-06T21:20:38Z", "type": "commit"}, {"oid": "1a167bf4821589f5b83fe4bee74ebb32a5aff4f7", "url": "https://github.com/apache/ignite/commit/1a167bf4821589f5b83fe4bee74ebb32a5aff4f7", "message": "IGNITE-12383 Add license javadocs", "committedDate": "2020-02-06T21:26:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MDg4Mg==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379890882", "bodyText": "remove this line", "author": "zaleslaw", "createdAt": "2020-02-16T10:04:36Z", "path": "modules/ml/src/main/java/org/apache/ignite/ml/math/distances/CosineSimilarity.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.ignite.ml.math.distances;\n+\n+import org.apache.ignite.ml.math.exceptions.math.CardinalityException;\n+import org.apache.ignite.ml.math.primitives.vector.Vector;\n+import org.apache.ignite.ml.math.util.MatrixUtil;\n+\n+/**\n+ * Calculates the {@code A * B / (|A| * |B|)} (Cosine similarity) distance between two points.\n+ */\n+public class CosineSimilarity implements DistanceMeasure {\n+\n+    /** {@inheritDoc} */\n+    @Override\n+    public double compute(Vector a, Vector b) throws CardinalityException {\n+        return MatrixUtil.localCopyOf(a).dot(b) / (a.kNorm(2d) * b.kNorm(2d));\n+    }\n+", "originalCommit": "1a167bf4821589f5b83fe4bee74ebb32a5aff4f7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MDg5Mg==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379890892", "bodyText": "remove this line", "author": "zaleslaw", "createdAt": "2020-02-16T10:04:49Z", "path": "modules/ml/src/main/java/org/apache/ignite/ml/math/distances/ChebyshevDistance.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.ignite.ml.math.distances;\n+\n+import org.apache.ignite.ml.math.exceptions.math.CardinalityException;\n+import org.apache.ignite.ml.math.primitives.vector.Vector;\n+import org.apache.ignite.ml.math.util.MatrixUtil;\n+\n+/**\n+ * Calculates the {@code max(x_i - y_i)} (Chebyshev) distance between two points.\n+ */\n+public class ChebyshevDistance implements DistanceMeasure {\n+", "originalCommit": "1a167bf4821589f5b83fe4bee74ebb32a5aff4f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyMzI5MQ==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379923291", "bodyText": "removed", "author": "dehasi", "createdAt": "2020-02-16T18:30:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MDg5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MDkwNQ==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379890905", "bodyText": "remove this line", "author": "zaleslaw", "createdAt": "2020-02-16T10:04:59Z", "path": "modules/ml/src/main/java/org/apache/ignite/ml/math/distances/CosineSimilarity.java", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.ignite.ml.math.distances;\n+\n+import org.apache.ignite.ml.math.exceptions.math.CardinalityException;\n+import org.apache.ignite.ml.math.primitives.vector.Vector;\n+import org.apache.ignite.ml.math.util.MatrixUtil;\n+\n+/**\n+ * Calculates the {@code A * B / (|A| * |B|)} (Cosine similarity) distance between two points.\n+ */\n+public class CosineSimilarity implements DistanceMeasure {\n+", "originalCommit": "1a167bf4821589f5b83fe4bee74ebb32a5aff4f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyMzMyMQ==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379923321", "bodyText": "Removed", "author": "dehasi", "createdAt": "2020-02-16T18:31:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MDkwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MTAyMg==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379891022", "bodyText": "remove this line", "author": "zaleslaw", "createdAt": "2020-02-16T10:06:25Z", "path": "modules/ml/src/main/java/org/apache/ignite/ml/math/distances/JaccardIndex.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.ignite.ml.math.distances;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+import org.apache.ignite.ml.math.exceptions.math.CardinalityException;\n+import org.apache.ignite.ml.math.primitives.vector.Vector;\n+\n+/**\n+ * Calculates {@code J = |A \\cap B| / |A \\cup B| } (Jaccard index) distance between two points.\n+ */\n+public class JaccardIndex implements DistanceMeasure {\n+", "originalCommit": "1a167bf4821589f5b83fe4bee74ebb32a5aff4f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyMzI5Ng==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379923296", "bodyText": "removed.", "author": "dehasi", "createdAt": "2020-02-16T18:31:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MTAyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MTA3Mw==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379891073", "bodyText": "rename the variable to something meaningful", "author": "zaleslaw", "createdAt": "2020-02-16T10:07:00Z", "path": "modules/ml/src/main/java/org/apache/ignite/ml/math/distances/JaccardIndex.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.ignite.ml.math.distances;\n+\n+import java.util.HashSet;\n+import java.util.Set;\n+import org.apache.ignite.ml.math.exceptions.math.CardinalityException;\n+import org.apache.ignite.ml.math.primitives.vector.Vector;\n+\n+/**\n+ * Calculates {@code J = |A \\cap B| / |A \\cup B| } (Jaccard index) distance between two points.\n+ */\n+public class JaccardIndex implements DistanceMeasure {\n+\n+    @Override\n+    public double compute(Vector a, Vector b) throws CardinalityException {\n+        Set<Double> aSet = new HashSet<>();", "originalCommit": "1a167bf4821589f5b83fe4bee74ebb32a5aff4f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyMzQ1Mw==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379923453", "bodyText": "It's hard :) I renamed aSet -> uniqueValues. If you have any better idea please, let me know.", "author": "dehasi", "createdAt": "2020-02-16T18:33:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MTA3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MTE2Ng==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379891166", "bodyText": "Did you add these tests to the common suite?", "author": "zaleslaw", "createdAt": "2020-02-16T10:08:48Z", "path": "modules/ml/src/test/java/org/apache/ignite/ml/math/distances/JaccardIndexTest.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.ignite.ml.math.distances;\n+\n+import org.apache.ignite.ml.math.primitives.vector.Vector;\n+import org.apache.ignite.ml.math.primitives.vector.impl.DenseVector;\n+import org.junit.Test;\n+\n+import static org.junit.Assert.assertEquals;\n+\n+/** Test for {@code JaccardIndex}. */\n+public class JaccardIndexTest {", "originalCommit": "1a167bf4821589f5b83fe4bee74ebb32a5aff4f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyMzI1OA==", "url": "https://github.com/apache/ignite/pull/7349#discussion_r379923258", "bodyText": "I added both JaccardIndexTest and CosineSimilarityTest to MathImplLocalTestSuite. Thank you for reminding.", "author": "dehasi", "createdAt": "2020-02-16T18:30:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg5MTE2Ng=="}], "type": "inlineReview"}, {"oid": "44ebc678bd71e38bb86e6ebe970056a6edcfbbdb", "url": "https://github.com/apache/ignite/commit/44ebc678bd71e38bb86e6ebe970056a6edcfbbdb", "message": "IGNITE-12383 Remove blank lines", "committedDate": "2020-02-16T18:18:29Z", "type": "commit"}, {"oid": "bafb8dc21ac5dc20ff627eb6fb0474c409a54f96", "url": "https://github.com/apache/ignite/commit/bafb8dc21ac5dc20ff627eb6fb0474c409a54f96", "message": "IGNITE-12383 Rename set", "committedDate": "2020-02-16T18:20:05Z", "type": "commit"}, {"oid": "9477149f753b787579a72684f40c0c27d2900db7", "url": "https://github.com/apache/ignite/commit/9477149f753b787579a72684f40c0c27d2900db7", "message": "IGNITE-12383 Add tests to a test suite", "committedDate": "2020-02-16T18:27:30Z", "type": "commit"}, {"oid": "eed1a78a5a7e613cb838d3066d1ba769bce7aee3", "url": "https://github.com/apache/ignite/commit/eed1a78a5a7e613cb838d3066d1ba769bce7aee3", "message": "Merge branch 'master' into IGNITE-12383-add-distances-between-two-vectors", "committedDate": "2020-05-21T16:11:04Z", "type": "commit"}, {"oid": "7f10abfd8fac64f514680964c78551ae9bef3743", "url": "https://github.com/apache/ignite/commit/7f10abfd8fac64f514680964c78551ae9bef3743", "message": "IGNITE-12383 Fix checkstyle", "committedDate": "2020-05-21T20:54:11Z", "type": "commit"}, {"oid": "9e4f550946a9f2a142aabd92330f7375c137ae0f", "url": "https://github.com/apache/ignite/commit/9e4f550946a9f2a142aabd92330f7375c137ae0f", "message": "IGNITE-12383 Fix checkstyle", "committedDate": "2020-05-22T06:24:45Z", "type": "commit"}, {"oid": "b1392a51c310d68c859c354eaa8eed4b8ae60f08", "url": "https://github.com/apache/ignite/commit/b1392a51c310d68c859c354eaa8eed4b8ae60f08", "message": "IGNITE-12383 Test checkstyle fix", "committedDate": "2020-05-22T17:49:57Z", "type": "commit"}, {"oid": "27517a91e67410f83f4bba103bd738f5c1fc5dd9", "url": "https://github.com/apache/ignite/commit/27517a91e67410f83f4bba103bd738f5c1fc5dd9", "message": "IGNITE-12383 Checkstyle fix", "committedDate": "2020-05-31T08:13:45Z", "type": "commit"}]}