{"pr_number": 8627, "pr_title": "IGNITE-13883 .NET: Simplify and optimize TryReadSystemType", "pr_createdAt": "2020-12-29T19:11:06Z", "pr_url": "https://github.com/apache/ignite/pull/8627", "timeline": [{"oid": "8352697ef9c41f2664ad8ead8c8c1e59aebc5b03", "url": "https://github.com/apache/ignite/commit/8352697ef9c41f2664ad8ead8c8c1e59aebc5b03", "message": "wip", "committedDate": "2020-12-29T13:36:49Z", "type": "commit"}, {"oid": "c9f7c01592295bd0db44710fc48a35b89be5ab32", "url": "https://github.com/apache/ignite/commit/c9f7c01592295bd0db44710fc48a35b89be5ab32", "message": "Add BinarySystemTypeReadBenchmark", "committedDate": "2020-12-29T14:06:03Z", "type": "commit"}, {"oid": "c8f86c6cf485aa3a85116e063f634b9b9355f035", "url": "https://github.com/apache/ignite/commit/c8f86c6cf485aa3a85116e063f634b9b9355f035", "message": "Add BinarySystemTypeReadBenchmark - fix assembly signing", "committedDate": "2020-12-29T14:08:47Z", "type": "commit"}, {"oid": "dee47114f978688b8813fad28623c528020cb5e5", "url": "https://github.com/apache/ignite/commit/dee47114f978688b8813fad28623c528020cb5e5", "message": "Add BinarySystemTypeReadBenchmark - wip", "committedDate": "2020-12-29T14:13:15Z", "type": "commit"}, {"oid": "5a89924c26eb9124150116e0b0d1575a1164f05c", "url": "https://github.com/apache/ignite/commit/5a89924c26eb9124150116e0b0d1575a1164f05c", "message": "Add BinarySystemTypeReadBenchmark - wip", "committedDate": "2020-12-29T16:29:19Z", "type": "commit"}, {"oid": "f36961f826dec9fa3d8d3f2085e142a3e025e7bb", "url": "https://github.com/apache/ignite/commit/f36961f826dec9fa3d8d3f2085e142a3e025e7bb", "message": "Add BinarySystemTypeReadBenchmark - wip", "committedDate": "2020-12-29T16:30:34Z", "type": "commit"}, {"oid": "a37486c2d3154eb4da3588dd0ba39562c8318f22", "url": "https://github.com/apache/ignite/commit/a37486c2d3154eb4da3588dd0ba39562c8318f22", "message": "Add BinarySystemTypeReadBenchmark - wip", "committedDate": "2020-12-29T16:31:40Z", "type": "commit"}, {"oid": "e21dd77467bd3a0af7035deb2c919d92b7aeef24", "url": "https://github.com/apache/ignite/commit/e21dd77467bd3a0af7035deb2c919d92b7aeef24", "message": "Add BinarySystemTypeReadBenchmark - wip", "committedDate": "2020-12-29T16:32:45Z", "type": "commit"}, {"oid": "c28270da2588ac8c8b5ab3b49999387cfa101da4", "url": "https://github.com/apache/ignite/commit/c28270da2588ac8c8b5ab3b49999387cfa101da4", "message": "Add BinarySystemTypeReadBenchmark - ForceTimestamp", "committedDate": "2020-12-29T16:37:02Z", "type": "commit"}, {"oid": "758cf04d5c1176c486e31215e7a722d35e58b1ad", "url": "https://github.com/apache/ignite/commit/758cf04d5c1176c486e31215e7a722d35e58b1ad", "message": "Add BinarySystemTypeReadBenchmark - fix arrays", "committedDate": "2020-12-29T16:42:54Z", "type": "commit"}, {"oid": "66ff74293690265c4afc11beb88ef078dab269d6", "url": "https://github.com/apache/ignite/commit/66ff74293690265c4afc11beb88ef078dab269d6", "message": "Add BinarySystemTypeReadBenchmark - update results", "committedDate": "2020-12-29T16:47:00Z", "type": "commit"}, {"oid": "6647ae8760572e6fcc39fd6bc190c4ea5db7c25a", "url": "https://github.com/apache/ignite/commit/6647ae8760572e6fcc39fd6bc190c4ea5db7c25a", "message": "Refactor BinarySystemHandlers.TryReadSystemType - use a switcj", "committedDate": "2020-12-29T16:53:14Z", "type": "commit"}, {"oid": "bce7aba2a8ef5660f957ecbb6a773e86cc748f6f", "url": "https://github.com/apache/ignite/commit/bce7aba2a8ef5660f957ecbb6a773e86cc748f6f", "message": "Refactor BinarySystemHandlers.TryReadSystemType - use a switch - wip", "committedDate": "2020-12-29T17:05:24Z", "type": "commit"}, {"oid": "9792267ad45ba60d92b14891200f494f726ab7da", "url": "https://github.com/apache/ignite/commit/9792267ad45ba60d92b14891200f494f726ab7da", "message": "Refactor BinarySystemHandlers.TryReadSystemType - use a switch - wip", "committedDate": "2020-12-29T17:07:20Z", "type": "commit"}, {"oid": "a10481e99045d8a522f9afd6cff0f3cf986cecff", "url": "https://github.com/apache/ignite/commit/a10481e99045d8a522f9afd6cff0f3cf986cecff", "message": "Refactor BinarySystemHandlers.TryReadSystemType - use a switch - wip", "committedDate": "2020-12-29T17:35:17Z", "type": "commit"}, {"oid": "165f8da5c9ae88827d92d4e75d0195b8c8ba8dc8", "url": "https://github.com/apache/ignite/commit/165f8da5c9ae88827d92d4e75d0195b8c8ba8dc8", "message": "Refactor BinarySystemHandlers.TryReadSystemType - use a switch - wip", "committedDate": "2020-12-29T17:38:12Z", "type": "commit"}, {"oid": "a2f5478c5b037cfcec8320ece55dea77514a4ee6", "url": "https://github.com/apache/ignite/commit/a2f5478c5b037cfcec8320ece55dea77514a4ee6", "message": "Refactor BinarySystemHandlers.TryReadSystemType - use a switch - wip", "committedDate": "2020-12-29T17:40:05Z", "type": "commit"}, {"oid": "b0233460f8cba18800671639fc9f4f54e31bd21b", "url": "https://github.com/apache/ignite/commit/b0233460f8cba18800671639fc9f4f54e31bd21b", "message": "Refactor BinarySystemHandlers.TryReadSystemType - use a switch - done", "committedDate": "2020-12-29T17:42:11Z", "type": "commit"}, {"oid": "feeab51d9b88e6bd2b942ac92688f97c48cabb9d", "url": "https://github.com/apache/ignite/commit/feeab51d9b88e6bd2b942ac92688f97c48cabb9d", "message": "Fixing signed/unsigned types handling", "committedDate": "2020-12-29T18:16:23Z", "type": "commit"}, {"oid": "59f06a41b19779eafb667f4a4295843735f9ecbb", "url": "https://github.com/apache/ignite/commit/59f06a41b19779eafb667f4a4295843735f9ecbb", "message": "Fixing signed/unsigned types handling", "committedDate": "2020-12-29T18:17:12Z", "type": "commit"}, {"oid": "682bd6569875edfeeb5e78fda211c3cb0ae32a41", "url": "https://github.com/apache/ignite/commit/682bd6569875edfeeb5e78fda211c3cb0ae32a41", "message": "Fix OptimizedMarshallerObject reading", "committedDate": "2020-12-29T18:22:47Z", "type": "commit"}, {"oid": "b250d3ec6a23d002309403d44e4a9b002c29d909", "url": "https://github.com/apache/ignite/commit/b250d3ec6a23d002309403d44e4a9b002c29d909", "message": "Update benchmark results", "committedDate": "2020-12-29T18:28:38Z", "type": "commit"}, {"oid": "fe9a22c54fae7d25a9ac433339c496373f41043d", "url": "https://github.com/apache/ignite/commit/fe9a22c54fae7d25a9ac433339c496373f41043d", "message": "Improve benchmark: remove all extra code for more precise results", "committedDate": "2020-12-29T18:37:59Z", "type": "commit"}, {"oid": "13b350379d8f571463110402cc3632fefa5b710f", "url": "https://github.com/apache/ignite/commit/13b350379d8f571463110402cc3632fefa5b710f", "message": "Improve benchmark: remove all extra code for more precise results", "committedDate": "2020-12-29T18:40:43Z", "type": "commit"}, {"oid": "434f269d254d5b4ecb640badfd3749377e169ed1", "url": "https://github.com/apache/ignite/commit/434f269d254d5b4ecb640badfd3749377e169ed1", "message": "Update benchmark results", "committedDate": "2020-12-29T18:45:49Z", "type": "commit"}, {"oid": "737e8596462ad8eb2dcd4d75a447adc53016b238", "url": "https://github.com/apache/ignite/commit/737e8596462ad8eb2dcd4d75a447adc53016b238", "message": "Update benchmark results", "committedDate": "2020-12-29T18:50:50Z", "type": "commit"}, {"oid": "76d80e215dc1da35e74079c830bd26bcc43c31c2", "url": "https://github.com/apache/ignite/commit/76d80e215dc1da35e74079c830bd26bcc43c31c2", "message": "Fix bench", "committedDate": "2020-12-29T18:55:12Z", "type": "commit"}, {"oid": "3ed81ce08de47e38b318405646a24d1eddbbcf3c", "url": "https://github.com/apache/ignite/commit/3ed81ce08de47e38b318405646a24d1eddbbcf3c", "message": "Fix bench", "committedDate": "2020-12-29T18:59:57Z", "type": "commit"}, {"oid": "bbae903d3efd2305ec066e5eed332b67c3d3ed9d", "url": "https://github.com/apache/ignite/commit/bbae903d3efd2305ec066e5eed332b67c3d3ed9d", "message": "cleanup", "committedDate": "2020-12-29T19:02:53Z", "type": "commit"}, {"oid": "13ee7a278e9507b79a6147a32c0c03d523b56799", "url": "https://github.com/apache/ignite/commit/13ee7a278e9507b79a6147a32c0c03d523b56799", "message": "minor cleanup", "committedDate": "2020-12-29T19:05:43Z", "type": "commit"}, {"oid": "932c348adaa4ee98586814b9beb45e7341d0df44", "url": "https://github.com/apache/ignite/commit/932c348adaa4ee98586814b9beb45e7341d0df44", "message": "Merge remote-tracking branch 'origin/master' into ignite-13883\n\n# Conflicts:\n#\tmodules/platforms/dotnet/Apache.Ignite.Core.Tests/Services/Model.cs", "committedDate": "2020-12-29T19:16:42Z", "type": "commit"}, {"oid": "5da91c393f627378c95358c0eec77e0610cf065c", "url": "https://github.com/apache/ignite/commit/5da91c393f627378c95358c0eec77e0610cf065c", "message": "minor cleanup", "committedDate": "2020-12-29T19:16:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgyNjE3MQ==", "url": "https://github.com/apache/ignite/pull/8627#discussion_r549826171", "bodyText": "Should not we at least assert here that header is HdrString, if not HdrNull?", "author": "isapego", "createdAt": "2020-12-29T19:46:22Z", "path": "modules/platforms/dotnet/Apache.Ignite.Core/Impl/Binary/BinaryUtils.cs", "diffHunk": "@@ -1170,6 +1170,38 @@ public static T[] ReadArray<T>(BinaryReader ctx, bool typed)\n             return vals;\n         }\n \n+        /// <summary>\n+        /// Read string array.\n+        /// </summary>\n+        /// <param name=\"stream\">Stream</param>\n+        /// <returns>String array.</returns>\n+        public static string[] ReadStringArray(IBinaryStream stream)\n+        {\n+            var len = stream.ReadInt();\n+            var res = new string[len];\n+\n+            for (var i = 0; i < len; i++)\n+                res[i] = stream.ReadByte() == HdrNull ? null : ReadString(stream);", "originalCommit": "5da91c393f627378c95358c0eec77e0610cf065c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTg1NjQ1MA==", "url": "https://github.com/apache/ignite/pull/8627#discussion_r549856450", "bodyText": "Good point, added header checks to this and related methods.", "author": "ptupitsyn", "createdAt": "2020-12-29T21:30:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTgyNjE3MQ=="}], "type": "inlineReview"}]}