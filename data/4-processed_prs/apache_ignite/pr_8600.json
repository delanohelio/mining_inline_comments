{"pr_number": 8600, "pr_title": "IGNITE-13882 Add parametrization to ducktape install_root and persistence_root", "pr_createdAt": "2020-12-23T06:31:03Z", "pr_url": "https://github.com/apache/ignite/pull/8600", "timeline": [{"oid": "1dd66ee080c818b1b337c8a64b61f20d0236d2f0", "url": "https://github.com/apache/ignite/commit/1dd66ee080c818b1b337c8a64b61f20d0236d2f0", "message": "WIP. First attempt to parametrize", "committedDate": "2020-12-21T16:37:32Z", "type": "commit"}, {"oid": "4b1a5ce96c7ad341ff08fb765b940290c4ff12f8", "url": "https://github.com/apache/ignite/commit/4b1a5ce96c7ad341ff08fb765b940290c4ff12f8", "message": "Merge remote-tracking branch 'origin/ignite-ducktape' into ducktape-parametrize-path\n\n# Conflicts:\n#\tmodules/ducktests/tests/ignitetest/services/ignite.py\n#\tmodules/ducktests/tests/ignitetest/services/ignite_app.py\n#\tmodules/ducktests/tests/ignitetest/services/utils/ignite_aware.py\n#\tmodules/ducktests/tests/ignitetest/services/utils/ignite_persistence.py\n#\tmodules/ducktests/tests/ignitetest/services/utils/ignite_spec.py", "committedDate": "2020-12-22T06:50:15Z", "type": "commit"}, {"oid": "150c85602a798c40cf607a8cb46919ff69fab7cc", "url": "https://github.com/apache/ignite/commit/150c85602a798c40cf607a8cb46919ff69fab7cc", "message": "IGNITE-13882 Add parametrization to ducktape install_root and persistence_root", "committedDate": "2020-12-23T06:29:02Z", "type": "commit"}, {"oid": "76e54c27204e04ca6260d2222155bd7605acabe0", "url": "https://github.com/apache/ignite/commit/76e54c27204e04ca6260d2222155bd7605acabe0", "message": "IGNITE-13882 Add self test for file rotation.", "committedDate": "2020-12-23T08:19:41Z", "type": "commit"}, {"oid": "b2a65b404c982bd8dc7a6afef0cf447e47649ed5", "url": "https://github.com/apache/ignite/commit/b2a65b404c982bd8dc7a6afef0cf447e47649ed5", "message": "remove empty file for rat.", "committedDate": "2020-12-23T08:32:30Z", "type": "commit"}, {"oid": "ceaf6238dd0d09b8c6e601e9f7a42b9229bf8b44", "url": "https://github.com/apache/ignite/commit/ceaf6238dd0d09b8c6e601e9f7a42b9229bf8b44", "message": "remove from recreation from tox", "committedDate": "2020-12-23T08:43:20Z", "type": "commit"}, {"oid": "cdb6aabfd6ddf4ebaa4a033c7238c40140e0fc12", "url": "https://github.com/apache/ignite/commit/cdb6aabfd6ddf4ebaa4a033c7238c40140e0fc12", "message": "remove sudo for rm", "committedDate": "2020-12-23T12:27:11Z", "type": "commit"}, {"oid": "a65401838aba0a66b082a2395e4b67b80a3dc8b3", "url": "https://github.com/apache/ignite/commit/a65401838aba0a66b082a2395e4b67b80a3dc8b3", "message": "add useful flag -- to rm", "committedDate": "2020-12-24T14:28:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODc0MTU2NA==", "url": "https://github.com/apache/ignite/pull/8600#discussion_r548741564", "bodyText": "Why did you change that? It was exactly like we discussed in Sergey PR?", "author": "timoninmaxim", "createdAt": "2020-12-24T20:02:53Z", "path": "modules/ducktests/tests/ignitetest/services/utils/ignite_aware.py", "diffHunk": "@@ -359,8 +378,13 @@ def __update_node_log_file(self, node):\n         \"\"\"\n         Update the node log file.\n         \"\"\"\n-        cnt = list(node.account.ssh_capture(f'ls {self.LOGS_DIR} | '\n-                                            f'grep -E \"^console_[0-9]*.log$\" | '\n+        cnt = list(node.account.ssh_capture(f'ls {self.log_dir} | '\n+                                            f'grep -E \"^console(_[0-9]+){{0,1}}.log$\" | '\n                                             f'wc -l', callback=int))[0]\n \n-        node.log_file = self.STDOUT_STDERR_CAPTURE.replace('.log', f'_{cnt + 1}.log')\n+        node.log_file = os.path.join(self.log_dir, f\"console{'_' + str(cnt) if cnt > 0 else ''}.log\")\n+\n+        if cnt > 0:\n+            self.logger.debug(f\"rotating logs, now logging to {node.log_file} on {node.name}\")\n+        else:\n+            self.logger.debug(f\"logging to {node.log_file} on {node.name}\")", "originalCommit": "a65401838aba0a66b082a2395e4b67b80a3dc8b3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODc0MjM5Ng==", "url": "https://github.com/apache/ignite/pull/8600#discussion_r548742396", "bodyText": "Let's mark this method and def module as private.", "author": "timoninmaxim", "createdAt": "2020-12-24T20:09:29Z", "path": "modules/ducktests/tests/ignitetest/services/utils/ignite_spec.py", "diffHunk": "@@ -74,8 +76,22 @@ def config_template(self):\n             return IgniteClientConfigTemplate()\n         return IgniteServerConfigTemplate()\n \n+    def home(self, version=None):", "originalCommit": "a65401838aba0a66b082a2395e4b67b80a3dc8b3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5212b07c481e13d88b68cc20025525d4e9bd9513", "url": "https://github.com/apache/ignite/commit/5212b07c481e13d88b68cc20025525d4e9bd9513", "message": "chang log rotation", "committedDate": "2020-12-25T07:09:44Z", "type": "commit"}]}