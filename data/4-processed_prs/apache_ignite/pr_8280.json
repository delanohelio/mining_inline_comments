{"pr_number": 8280, "pr_title": "KILL commands docs added.", "pr_createdAt": "2020-09-25T09:28:11Z", "pr_url": "https://github.com/apache/ignite/pull/8280", "timeline": [{"oid": "2ab4655eab68f5caa532527ec482e03632a4c0d4", "url": "https://github.com/apache/ignite/commit/2ab4655eab68f5caa532527ec482e03632a4c0d4", "message": "KILL commands docs added.", "committedDate": "2020-09-25T09:27:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIzMjM2Ng==", "url": "https://github.com/apache/ignite/pull/8280#discussion_r496232366", "bodyText": "Could you please wrap this command example (and all others down below) up with the ascii [tabs] tag? Where the first tab shows the snipped for Unix systems (control.sh) while the second is dedicated for Windows users (control.bat)?\nHere is an example:\nhttps://github.com/apache/ignite/blame/IGNITE-7595/docs/_docs/includes/starting-node.adoc#L10", "author": "dmagda", "createdAt": "2020-09-28T21:06:04Z", "path": "docs/_docs/sql-reference/operational-commands.adoc", "diffHunk": "@@ -113,3 +113,120 @@ After executing the above command and *closing the JDBC connection*, all data wi\n image::images/set-streaming.png[]\n \n \n+== KILL QUERY\n+\n+The `KILL QUERY` command allows you to cancel a running query.\n+\n+[source,sql]\n+----\n+KILL QUERY {ASYNC} '<query_id>'\n+----\n+\n+=== Description\n+`ASYNC` is an optional parameter which returns control immediately without waiting for the cancellation to finish, and `query_id` can be retrieved via the `SQL_QUERIES` view.\n+\n+When a query cancelled via the `KILL` command, all parts of the query running on all other nodes are cancelled.\n+\n+This command available via JMX and CMD, also:\n+\n+- `QueryMXBean#cancelSQL`", "originalCommit": "2ab4655eab68f5caa532527ec482e03632a4c0d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ1NTk5Ng==", "url": "https://github.com/apache/ignite/pull/8280#discussion_r497455996", "bodyText": "Fixed.", "author": "nizhikov", "createdAt": "2020-09-30T12:06:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIzMjM2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIzMjYxNQ==", "url": "https://github.com/apache/ignite/pull/8280#discussion_r496232615", "bodyText": "I would add a paragraph saying how to find the \"query_id\" parameter.", "author": "dmagda", "createdAt": "2020-09-28T21:06:34Z", "path": "docs/_docs/sql-reference/operational-commands.adoc", "diffHunk": "@@ -113,3 +113,120 @@ After executing the above command and *closing the JDBC connection*, all data wi\n image::images/set-streaming.png[]\n \n \n+== KILL QUERY\n+\n+The `KILL QUERY` command allows you to cancel a running query.\n+\n+[source,sql]\n+----\n+KILL QUERY {ASYNC} '<query_id>'\n+----\n+\n+=== Description\n+`ASYNC` is an optional parameter which returns control immediately without waiting for the cancellation to finish, and `query_id` can be retrieved via the `SQL_QUERIES` view.\n+\n+When a query cancelled via the `KILL` command, all parts of the query running on all other nodes are cancelled.\n+\n+This command available via JMX and CMD, also:\n+\n+- `QueryMXBean#cancelSQL`\n+- `./control.sh --kill SQL query_id`", "originalCommit": "2ab4655eab68f5caa532527ec482e03632a4c0d4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIzMjg1Mg==", "url": "https://github.com/apache/ignite/pull/8280#discussion_r496232852", "bodyText": "I would add an explanation on how to find the \"xid\" that needs to be passed into this command.", "author": "dmagda", "createdAt": "2020-09-28T21:07:02Z", "path": "docs/_docs/sql-reference/operational-commands.adoc", "diffHunk": "@@ -113,3 +113,120 @@ After executing the above command and *closing the JDBC connection*, all data wi\n image::images/set-streaming.png[]\n \n \n+== KILL QUERY\n+\n+The `KILL QUERY` command allows you to cancel a running query.\n+\n+[source,sql]\n+----\n+KILL QUERY {ASYNC} '<query_id>'\n+----\n+\n+=== Description\n+`ASYNC` is an optional parameter which returns control immediately without waiting for the cancellation to finish, and `query_id` can be retrieved via the `SQL_QUERIES` view.\n+\n+When a query cancelled via the `KILL` command, all parts of the query running on all other nodes are cancelled.\n+\n+This command available via JMX and CMD, also:\n+\n+- `QueryMXBean#cancelSQL`\n+- `./control.sh --kill SQL query_id`\n+\n+== KILL TRANSACTION\n+\n+The `KILL TRANSACTION` command allows you to cancel a running transaction.\n+\n+[source,sql]\n+----\n+KILL TRANSACTION 'xid'\n+----\n+\n+=== Description\n+`xid` of the transaction can be retrived via the `TRANSACTIONS` view.\n+\n+This command available via JMX and CMD, also:\n+\n+- `TransactionMXBean#cancel`\n+- `./control.sh --kill TRANSACTION xid`", "originalCommit": "2ab4655eab68f5caa532527ec482e03632a4c0d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzM5NDI0MA==", "url": "https://github.com/apache/ignite/pull/8280#discussion_r497394240", "bodyText": "I explained it few lines above:\nxid of the transaction can be retrived via the TRANSACTIONS view.", "author": "nizhikov", "createdAt": "2020-09-30T10:07:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIzMjg1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIzMzM0OQ==", "url": "https://github.com/apache/ignite/pull/8280#discussion_r496233349", "bodyText": "Same here. Let's explain how to find the \"session_id\" and the \"routine_id\" for the continuous query-specific command below.", "author": "dmagda", "createdAt": "2020-09-28T21:08:01Z", "path": "docs/_docs/sql-reference/operational-commands.adoc", "diffHunk": "@@ -113,3 +113,120 @@ After executing the above command and *closing the JDBC connection*, all data wi\n image::images/set-streaming.png[]\n \n \n+== KILL QUERY\n+\n+The `KILL QUERY` command allows you to cancel a running query.\n+\n+[source,sql]\n+----\n+KILL QUERY {ASYNC} '<query_id>'\n+----\n+\n+=== Description\n+`ASYNC` is an optional parameter which returns control immediately without waiting for the cancellation to finish, and `query_id` can be retrieved via the `SQL_QUERIES` view.\n+\n+When a query cancelled via the `KILL` command, all parts of the query running on all other nodes are cancelled.\n+\n+This command available via JMX and CMD, also:\n+\n+- `QueryMXBean#cancelSQL`\n+- `./control.sh --kill SQL query_id`\n+\n+== KILL TRANSACTION\n+\n+The `KILL TRANSACTION` command allows you to cancel a running transaction.\n+\n+[source,sql]\n+----\n+KILL TRANSACTION 'xid'\n+----\n+\n+=== Description\n+`xid` of the transaction can be retrived via the `TRANSACTIONS` view.\n+\n+This command available via JMX and CMD, also:\n+\n+- `TransactionMXBean#cancel`\n+- `./control.sh --kill TRANSACTION xid`\n+\n+== KILL SCAN\n+\n+The `KILL SCAN` command allows you to cancel a running scan query.\n+\n+[source,sql]\n+----\n+KILL SCAN 'origin_node_id' 'cache_name' query_id\n+----\n+\n+=== Description\n+`origin_node_id`, `cache_name`, `query_id` parameters can be retrived via the `SCAN_QUERIES`.\n+\n+This command available via JMX and CMD, also:\n+\n+- `QueryMXBean#cancelScan`\n+- `./control.sh --kill SCAN origin_node_id cache_name query_id`\n+\n+=== Example\n+\n+[source,sql]\n+----\n+KILL SCAN '6fa749ee-7cf8-4635-be10-36a1c75267a7_54321' 'cache-name' 1\n+----\n+\n+== KILL COMPUTE\n+\n+The `KILL COMPUTE` command allows you to cancel a running compute.\n+\n+[source,sql]\n+----\n+KILL COMPUTE 'session_id'\n+----\n+\n+=== Description\n+`session_id` parameter can be retrived via the `TASKS` or `JOBS` view.\n+\n+This command available via JMX and CMD, also:\n+\n+- `ComputeMXBean#cancel`\n+- `./control.sh --kill COMPUTE session_id`", "originalCommit": "2ab4655eab68f5caa532527ec482e03632a4c0d4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzM5NTczOA==", "url": "https://github.com/apache/ignite/pull/8280#discussion_r497395738", "bodyText": "These parameters are the same as in SQL command.\nAnd I explained how to find it in the system views.", "author": "nizhikov", "createdAt": "2020-09-30T10:10:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIzMzM0OQ=="}], "type": "inlineReview"}, {"oid": "b1fd1095354bb7deb8755020a8fd4e1957354a41", "url": "https://github.com/apache/ignite/commit/b1fd1095354bb7deb8755020a8fd4e1957354a41", "message": "KILL commands docs added.", "committedDate": "2020-09-30T10:11:28Z", "type": "commit"}, {"oid": "75e4adc8969d3b8981e07d388d542eab36f5e59e", "url": "https://github.com/apache/ignite/commit/75e4adc8969d3b8981e07d388d542eab36f5e59e", "message": "Code review fixes.", "committedDate": "2020-09-30T11:55:40Z", "type": "commit"}]}