{"pr_number": 8259, "pr_title": "IGNITE-13434 add assertion test", "pr_createdAt": "2020-09-21T10:46:45Z", "pr_url": "https://github.com/apache/ignite/pull/8259", "timeline": [{"oid": "1970170b23d3292ce41b462cc85d9a83dc841c3f", "url": "https://github.com/apache/ignite/commit/1970170b23d3292ce41b462cc85d9a83dc841c3f", "message": "IGNITE-13434 add assertion test", "committedDate": "2020-09-21T10:42:49Z", "type": "commit"}, {"oid": "4abf8332d7cea5f1b18e4b44986a95c923f5053c", "url": "https://github.com/apache/ignite/commit/4abf8332d7cea5f1b18e4b44986a95c923f5053c", "message": "IGNITE-13434 add timeout check", "committedDate": "2020-09-21T13:58:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUxODcyOA==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492518728", "bodyText": "Please rename it as test suite with this name already exist. SmokeSelfTest for example.", "author": "timoninmaxim", "createdAt": "2020-09-22T07:15:03Z", "path": "modules/ducktests/tests/ignitetest/tests/assertion_test.py", "diffHunk": "@@ -0,0 +1,73 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\"\"\"\n+This module contains smoke tests that checks that services work\n+\"\"\"\n+\n+import datetime\n+\n+from ducktape.mark.resource import cluster\n+\n+from ignitetest.services.ignite import IgniteService\n+from ignitetest.services.ignite_app import IgniteApplicationService\n+from ignitetest.services.utils.ignite_configuration.discovery import from_ignite_cluster\n+from ignitetest.services.utils.ignite_configuration import IgniteConfiguration\n+from ignitetest.utils import ignite_versions\n+from ignitetest.utils.ignite_test import IgniteTest\n+from ignitetest.utils.version import DEV_BRANCH, IgniteVersion\n+\n+\n+# pylint: disable=W0223\n+class SmokeServicesTest(IgniteTest):", "originalCommit": "4abf8332d7cea5f1b18e4b44986a95c923f5053c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0NjIwNA==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492546204", "bodyText": "Done", "author": "oleg-ostanin", "createdAt": "2020-09-22T08:06:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUxODcyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUzNTAwMQ==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492535001", "bodyText": "You can make it server and avoid using additional node.", "author": "timoninmaxim", "createdAt": "2020-09-22T07:47:13Z", "path": "modules/ducktests/tests/ignitetest/tests/assertion_test.py", "diffHunk": "@@ -0,0 +1,73 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\"\"\"\n+This module contains smoke tests that checks that services work\n+\"\"\"\n+\n+import datetime\n+\n+from ducktape.mark.resource import cluster\n+\n+from ignitetest.services.ignite import IgniteService\n+from ignitetest.services.ignite_app import IgniteApplicationService\n+from ignitetest.services.utils.ignite_configuration.discovery import from_ignite_cluster\n+from ignitetest.services.utils.ignite_configuration import IgniteConfiguration\n+from ignitetest.utils import ignite_versions\n+from ignitetest.utils.ignite_test import IgniteTest\n+from ignitetest.utils.version import DEV_BRANCH, IgniteVersion\n+\n+\n+# pylint: disable=W0223\n+class SmokeServicesTest(IgniteTest):\n+    \"\"\"\n+    Tests services implementations\n+    \"\"\"\n+\n+    @cluster(num_nodes=2)\n+    @ignite_versions(str(DEV_BRANCH))\n+    def test_ignite_app_start_stop(self, ignite_version):\n+        \"\"\"\n+        Test to make sure Java assertions are converted to python exceptions\n+        \"\"\"\n+        server_configuration = IgniteConfiguration(version=IgniteVersion(ignite_version))\n+\n+        ignite = IgniteService(self.test_context, server_configuration, num_nodes=1)\n+\n+        client_configuration = server_configuration._replace(client_mode=True,\n+                                                             discovery_spi=from_ignite_cluster(ignite))\n+        app = IgniteApplicationService(", "originalCommit": "4abf8332d7cea5f1b18e4b44986a95c923f5053c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0ODUwNg==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492548506", "bodyText": "Done.", "author": "oleg-ostanin", "createdAt": "2020-09-22T08:10:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUzNTAwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUzNzg4Mg==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492537882", "bodyText": "You don't need stop there, as exception is thrown due to start(). So move stop() to finally block.", "author": "timoninmaxim", "createdAt": "2020-09-22T07:52:22Z", "path": "modules/ducktests/tests/ignitetest/tests/assertion_test.py", "diffHunk": "@@ -0,0 +1,73 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\"\"\"\n+This module contains smoke tests that checks that services work\n+\"\"\"\n+\n+import datetime\n+\n+from ducktape.mark.resource import cluster\n+\n+from ignitetest.services.ignite import IgniteService\n+from ignitetest.services.ignite_app import IgniteApplicationService\n+from ignitetest.services.utils.ignite_configuration.discovery import from_ignite_cluster\n+from ignitetest.services.utils.ignite_configuration import IgniteConfiguration\n+from ignitetest.utils import ignite_versions\n+from ignitetest.utils.ignite_test import IgniteTest\n+from ignitetest.utils.version import DEV_BRANCH, IgniteVersion\n+\n+\n+# pylint: disable=W0223\n+class SmokeServicesTest(IgniteTest):\n+    \"\"\"\n+    Tests services implementations\n+    \"\"\"\n+\n+    @cluster(num_nodes=2)\n+    @ignite_versions(str(DEV_BRANCH))\n+    def test_ignite_app_start_stop(self, ignite_version):\n+        \"\"\"\n+        Test to make sure Java assertions are converted to python exceptions\n+        \"\"\"\n+        server_configuration = IgniteConfiguration(version=IgniteVersion(ignite_version))\n+\n+        ignite = IgniteService(self.test_context, server_configuration, num_nodes=1)\n+\n+        client_configuration = server_configuration._replace(client_mode=True,\n+                                                             discovery_spi=from_ignite_cluster(ignite))\n+        app = IgniteApplicationService(\n+            self.test_context,\n+            client_configuration,\n+            java_class_name=\"org.apache.ignite.internal.ducktest.tests.smoke_test.AssertionApplication\")\n+\n+        ignite.start()\n+\n+        ts = int(round(datetime.datetime.now().timestamp() * 1000))\n+\n+        try:\n+            app.start()\n+            app.stop()", "originalCommit": "4abf8332d7cea5f1b18e4b44986a95c923f5053c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU1MTM2OQ==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492551369", "bodyText": "If I move app.stop() to finally block, the test fails on that line. So I simply removed app.stop() line.", "author": "oleg-ostanin", "createdAt": "2020-09-22T08:15:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUzNzg4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU4NzQ2Nw==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492587467", "bodyText": "It's a bad solution. We should invoke app.stop() if test doesn't throw AssertionException.", "author": "timoninmaxim", "createdAt": "2020-09-22T09:13:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjUzNzg4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0MzcxOQ==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492543719", "bodyText": "Checking exception string with assertion is enough. Please remove check timestamps.", "author": "timoninmaxim", "createdAt": "2020-09-22T08:02:20Z", "path": "modules/ducktests/tests/ignitetest/tests/assertion_test.py", "diffHunk": "@@ -0,0 +1,73 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\"\"\"\n+This module contains smoke tests that checks that services work\n+\"\"\"\n+\n+import datetime\n+\n+from ducktape.mark.resource import cluster\n+\n+from ignitetest.services.ignite import IgniteService\n+from ignitetest.services.ignite_app import IgniteApplicationService\n+from ignitetest.services.utils.ignite_configuration.discovery import from_ignite_cluster\n+from ignitetest.services.utils.ignite_configuration import IgniteConfiguration\n+from ignitetest.utils import ignite_versions\n+from ignitetest.utils.ignite_test import IgniteTest\n+from ignitetest.utils.version import DEV_BRANCH, IgniteVersion\n+\n+\n+# pylint: disable=W0223\n+class SmokeServicesTest(IgniteTest):\n+    \"\"\"\n+    Tests services implementations\n+    \"\"\"\n+\n+    @cluster(num_nodes=2)\n+    @ignite_versions(str(DEV_BRANCH))\n+    def test_ignite_app_start_stop(self, ignite_version):\n+        \"\"\"\n+        Test to make sure Java assertions are converted to python exceptions\n+        \"\"\"\n+        server_configuration = IgniteConfiguration(version=IgniteVersion(ignite_version))\n+\n+        ignite = IgniteService(self.test_context, server_configuration, num_nodes=1)\n+\n+        client_configuration = server_configuration._replace(client_mode=True,\n+                                                             discovery_spi=from_ignite_cluster(ignite))\n+        app = IgniteApplicationService(\n+            self.test_context,\n+            client_configuration,\n+            java_class_name=\"org.apache.ignite.internal.ducktest.tests.smoke_test.AssertionApplication\")\n+\n+        ignite.start()\n+\n+        ts = int(round(datetime.datetime.now().timestamp() * 1000))\n+\n+        try:\n+            app.start()\n+            app.stop()\n+        except Exception as e:\n+            assert str(e) == \"Java application execution failed. java.lang.AssertionError\"\n+\n+            \"\"\"\n+            Check the test timeout is not exceeded\n+            \"\"\"\n+            assert int(round(datetime.datetime.now().timestamp() * 1000)) - ts < IgniteTest.timeout()", "originalCommit": "4abf8332d7cea5f1b18e4b44986a95c923f5053c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU1MjkyMg==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492552922", "bodyText": "Done.", "author": "oleg-ostanin", "createdAt": "2020-09-22T08:18:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0MzcxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0NDU2MA==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492544560", "bodyText": "Add markInitialized() after assertion, in case of \"-ea\" is disabled ducktape hungs while waiting service.", "author": "timoninmaxim", "createdAt": "2020-09-22T08:03:58Z", "path": "modules/ducktests/src/main/java/org/apache/ignite/internal/ducktest/tests/smoke_test/AssertionApplication.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.ducktest.tests.smoke_test;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import java.util.UUID;\n+import org.apache.ignite.IgniteCache;\n+import org.apache.ignite.internal.IgniteInterruptedCheckedException;\n+import org.apache.ignite.internal.ducktest.utils.IgniteAwareApplication;\n+import org.apache.ignite.internal.util.typedef.internal.U;\n+\n+/**\n+ * Simple application that used in smoke tests\n+ */\n+public class AssertionApplication extends IgniteAwareApplication {\n+    /** {@inheritDoc} */\n+    @Override public void run(JsonNode jsonNode) {\n+        assert false;", "originalCommit": "4abf8332d7cea5f1b18e4b44986a95c923f5053c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0NjY4OA==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492546688", "bodyText": "And then markFinished(). To avoid waiting while app.stop() is running", "author": "timoninmaxim", "createdAt": "2020-09-22T08:07:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0NDU2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3MjAwNw==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492572007", "bodyText": "Done.", "author": "oleg-ostanin", "createdAt": "2020-09-22T08:48:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0NDU2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3MjUyMA==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492572520", "bodyText": "markFinished?", "author": "timoninmaxim", "createdAt": "2020-09-22T08:49:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU0NDU2MA=="}], "type": "inlineReview"}, {"oid": "11749d51aa2fafdff32afdd0d34bb4c8d14bc0bf", "url": "https://github.com/apache/ignite/commit/11749d51aa2fafdff32afdd0d34bb4c8d14bc0bf", "message": "IGNITE-13434 fix review issues", "committedDate": "2020-09-22T08:47:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3Mjc4Ng==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492572786", "bodyText": "You don't need IgniteService at all.", "author": "timoninmaxim", "createdAt": "2020-09-22T08:50:00Z", "path": "modules/ducktests/tests/ignitetest/tests/assertion_test.py", "diffHunk": "@@ -0,0 +1,59 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\"\"\"\n+This module contains smoke tests that checks that services work\n+\"\"\"\n+\n+from ducktape.mark.resource import cluster\n+\n+from ignitetest.services.ignite import IgniteService\n+from ignitetest.services.ignite_app import IgniteApplicationService\n+from ignitetest.services.utils.ignite_configuration import IgniteConfiguration\n+from ignitetest.utils import ignite_versions\n+from ignitetest.utils.ignite_test import IgniteTest\n+from ignitetest.utils.version import DEV_BRANCH, IgniteVersion\n+\n+# pylint: disable=W0223\n+class SmokeSelfTest(IgniteTest):\n+    \"\"\"\n+    Tests services implementations\n+    \"\"\"\n+\n+    @cluster(num_nodes=2)\n+    @ignite_versions(str(DEV_BRANCH))\n+    def test_ignite_app_start_stop(self, ignite_version):\n+        \"\"\"\n+        Test to make sure Java assertions are converted to python exceptions\n+        \"\"\"\n+        server_configuration = IgniteConfiguration(version=IgniteVersion(ignite_version))\n+\n+        ignite = IgniteService(self.test_context, server_configuration, num_nodes=1)", "originalCommit": "11749d51aa2fafdff32afdd0d34bb4c8d14bc0bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU5NDU3Ng==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492594576", "bodyText": "Removed.", "author": "oleg-ostanin", "createdAt": "2020-09-22T09:25:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3Mjc4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3MjkzMA==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492572930", "bodyText": "app.stop()?", "author": "timoninmaxim", "createdAt": "2020-09-22T08:50:12Z", "path": "modules/ducktests/tests/ignitetest/tests/assertion_test.py", "diffHunk": "@@ -0,0 +1,59 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\"\"\"\n+This module contains smoke tests that checks that services work\n+\"\"\"\n+\n+from ducktape.mark.resource import cluster\n+\n+from ignitetest.services.ignite import IgniteService\n+from ignitetest.services.ignite_app import IgniteApplicationService\n+from ignitetest.services.utils.ignite_configuration import IgniteConfiguration\n+from ignitetest.utils import ignite_versions\n+from ignitetest.utils.ignite_test import IgniteTest\n+from ignitetest.utils.version import DEV_BRANCH, IgniteVersion\n+\n+# pylint: disable=W0223\n+class SmokeSelfTest(IgniteTest):\n+    \"\"\"\n+    Tests services implementations\n+    \"\"\"\n+\n+    @cluster(num_nodes=2)\n+    @ignite_versions(str(DEV_BRANCH))\n+    def test_ignite_app_start_stop(self, ignite_version):\n+        \"\"\"\n+        Test to make sure Java assertions are converted to python exceptions\n+        \"\"\"\n+        server_configuration = IgniteConfiguration(version=IgniteVersion(ignite_version))\n+\n+        ignite = IgniteService(self.test_context, server_configuration, num_nodes=1)\n+\n+        app = IgniteApplicationService(\n+            self.test_context,\n+            server_configuration,\n+            java_class_name=\"org.apache.ignite.internal.ducktest.tests.smoke_test.AssertionApplication\")\n+\n+        ignite.start()\n+\n+        try:\n+            app.start()\n+        except Exception as e:\n+            assert str(e) == \"Java application execution failed. java.lang.AssertionError\"\n+        else:\n+            assert False\n+        finally:\n+            ignite.stop()", "originalCommit": "11749d51aa2fafdff32afdd0d34bb4c8d14bc0bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU5NDQxMA==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492594410", "bodyText": "Removed app.stop() completely.", "author": "oleg-ostanin", "createdAt": "2020-09-22T09:25:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3MjkzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3MzA1Mw==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492573053", "bodyText": "remote this method", "author": "timoninmaxim", "createdAt": "2020-09-22T08:50:26Z", "path": "modules/ducktests/tests/ignitetest/utils/ignite_test.py", "diffHunk": "@@ -40,3 +40,7 @@ def monotonic():\n             so that only the difference between the results of consecutive calls is valid.\n         \"\"\"\n         return monotonic()\n+\n+    @staticmethod", "originalCommit": "11749d51aa2fafdff32afdd0d34bb4c8d14bc0bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU5NDk1Ng==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r492594956", "bodyText": "Removed.", "author": "oleg-ostanin", "createdAt": "2020-09-22T09:26:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3MzA1Mw=="}], "type": "inlineReview"}, {"oid": "40ee21f13ad5a61cb24cc4dee740fa1c2004bac3", "url": "https://github.com/apache/ignite/commit/40ee21f13ad5a61cb24cc4dee740fa1c2004bac3", "message": "IGNITE-13434 fix review issues again", "committedDate": "2020-09-22T09:26:51Z", "type": "commit"}, {"oid": "b70ca23924ef13a2dac2a4df144257ca31ed2c4d", "url": "https://github.com/apache/ignite/commit/b70ca23924ef13a2dac2a4df144257ca31ed2c4d", "message": "IGNITE-13434 fix review issues again", "committedDate": "2020-09-22T09:43:34Z", "type": "commit"}, {"oid": "a7143c20027a29c422089dfec23cdb8bb4d65431", "url": "https://github.com/apache/ignite/commit/a7143c20027a29c422089dfec23cdb8bb4d65431", "message": "IGNITE-13434 fix review issues again", "committedDate": "2020-09-22T10:14:13Z", "type": "commit"}, {"oid": "b24cdb3fca2e1ade983aa67ce7a9a1532f31496b", "url": "https://github.com/apache/ignite/commit/b24cdb3fca2e1ade983aa67ce7a9a1532f31496b", "message": "IGNITE-13434 add decorator", "committedDate": "2020-09-22T10:54:09Z", "type": "commit"}, {"oid": "7ece730f5c097c2183175b4efaa8dae139fbd3e4", "url": "https://github.com/apache/ignite/commit/7ece730f5c097c2183175b4efaa8dae139fbd3e4", "message": "IGNITE-13434 add cluster import", "committedDate": "2020-09-22T13:45:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzIxMzAxMA==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r493213010", "bodyText": "Please, provide docs that related to this class.", "author": "timoninmaxim", "createdAt": "2020-09-23T05:50:48Z", "path": "modules/ducktests/tests/ignitetest/tests/assertion_test.py", "diffHunk": "@@ -0,0 +1,53 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\"\"\"\n+This module contains smoke tests that checks that ducktape works as expected\n+\"\"\"\n+\n+from ducktape.mark.resource import cluster\n+\n+from ignitetest.services.ignite_app import IgniteApplicationService\n+from ignitetest.services.utils.ignite_configuration import IgniteConfiguration\n+from ignitetest.utils import ignite_versions\n+from ignitetest.utils.ignite_test import IgniteTest\n+from ignitetest.utils.version import DEV_BRANCH, IgniteVersion\n+\n+# pylint: disable=W0223\n+class SmokeSelfTest(IgniteTest):\n+    \"\"\"\n+    Tests services implementations", "originalCommit": "7ece730f5c097c2183175b4efaa8dae139fbd3e4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDEyMjI0NQ==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r494122245", "bodyText": "Done", "author": "oleg-ostanin", "createdAt": "2020-09-24T08:12:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzIxMzAxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzIxMzEwNQ==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r493213105", "bodyText": "Please, provide docs that related to this class", "author": "timoninmaxim", "createdAt": "2020-09-23T05:51:04Z", "path": "modules/ducktests/src/main/java/org/apache/ignite/internal/ducktest/tests/smoke_test/AssertionApplication.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.ignite.internal.ducktest.tests.smoke_test;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import org.apache.ignite.internal.ducktest.utils.IgniteAwareApplication;\n+\n+/**\n+ * Simple application that used in smoke tests", "originalCommit": "7ece730f5c097c2183175b4efaa8dae139fbd3e4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDEyMjEwMg==", "url": "https://github.com/apache/ignite/pull/8259#discussion_r494122102", "bodyText": "Done", "author": "oleg-ostanin", "createdAt": "2020-09-24T08:11:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzIxMzEwNQ=="}], "type": "inlineReview"}, {"oid": "d4510fed59a80c46ef4186462402cf257e3e0dac", "url": "https://github.com/apache/ignite/commit/d4510fed59a80c46ef4186462402cf257e3e0dac", "message": "IGNITE-13434 fix codestyle", "committedDate": "2020-09-23T06:07:16Z", "type": "commit"}, {"oid": "02fce3ff9dda856e9df71def7b9c0071e0f96e27", "url": "https://github.com/apache/ignite/commit/02fce3ff9dda856e9df71def7b9c0071e0f96e27", "message": "IGNITE-13434 fix codestyle", "committedDate": "2020-09-23T09:14:56Z", "type": "commit"}, {"oid": "5fa15d8bd3c6f2df39d99bd43b2d6ddae138a773", "url": "https://github.com/apache/ignite/commit/5fa15d8bd3c6f2df39d99bd43b2d6ddae138a773", "message": "IGNITE-13434 add new exception", "committedDate": "2020-09-23T10:02:17Z", "type": "commit"}, {"oid": "145e104e781602c45a8bc17443e0153cc9783827", "url": "https://github.com/apache/ignite/commit/145e104e781602c45a8bc17443e0153cc9783827", "message": "IGNITE-13434 add docs", "committedDate": "2020-09-23T12:19:34Z", "type": "commit"}, {"oid": "d89878670bb3ba6addb641e103bdc8d110bff859", "url": "https://github.com/apache/ignite/commit/d89878670bb3ba6addb641e103bdc8d110bff859", "message": "IGNITE-13434 fix codestyle", "committedDate": "2020-09-23T14:12:59Z", "type": "commit"}, {"oid": "cf0148674af546e4055c1f42487ed49b72ae09a8", "url": "https://github.com/apache/ignite/commit/cf0148674af546e4055c1f42487ed49b72ae09a8", "message": "IGNITE-13434 fix codestyle", "committedDate": "2020-09-23T14:34:38Z", "type": "commit"}, {"oid": "a41e4d4a3ffe719e1c90400e35bc98128bf8ea9d", "url": "https://github.com/apache/ignite/commit/a41e4d4a3ffe719e1c90400e35bc98128bf8ea9d", "message": "IGNITE-13434 fix comment", "committedDate": "2020-09-24T06:57:14Z", "type": "commit"}]}