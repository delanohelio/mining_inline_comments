{"pr_number": 2933, "pr_title": "Update to jQuery 1.12.4 and jQuery Migrate 1.4.1 - fixes 2932", "pr_createdAt": "2020-07-14T03:11:26Z", "pr_url": "https://github.com/OpenRefine/OpenRefine/pull/2933", "timeline": [{"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f", "url": "https://github.com/OpenRefine/OpenRefine/commit/a39845ab871f543fea9ec7dba43caa8b85e4a72f", "message": "Use prop() instead of attr() to set 'selected'", "committedDate": "2020-07-28T18:29:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NzgwNw==", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462077807", "bodyText": "This removes support for descriptions in suggested items.", "author": "wetneb", "createdAt": "2020-07-29T06:54:02Z", "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -724,11 +727,7 @@\n       var css = this.options.css;\n       var li = $(\"<li>\").addClass(css.item);\n       var label = $(\"<label>\").text(data.name);\n-      var div = $(\"<div>\").addClass(css.item_name).append(label);\n-      if(data.description) {\n-          div.append($('<span></span>').text(data.description));\n-      }\n-      li.append(div);", "originalCommit": "a39845ab871f543fea9ec7dba43caa8b85e4a72f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzMzQwNg==", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462333406", "bodyText": "Isn't the description rendered in the preview pane (aka flyout)? Does this change cause it to show up twice?", "author": "tfmorris", "createdAt": "2020-07-29T14:16:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NzgwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM1NDM3Nw==", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462354377", "bodyText": "This is a description that is rendered in suggest items by default, without needing to hover the item. You are correct that it is redundant with the flyout service - I have introduced it a while ago as a replacement for flyouts because it gives a better user experience (having to hover one item at a time to find the right one is not really workable). Services can decide not to return descriptions and use flyouts, or the converse. (The Wikidata service currently uses both, but the flyouts should just be removed wetneb/openrefine-wikibase#77)", "author": "wetneb", "createdAt": "2020-07-29T14:42:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NzgwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM4MzAwMA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462383000", "bodyText": "I don't think I agree, but my intent was not remove local changes. It turns out that there were only a couple of changes in SVN, one of which was the one needed for jQuery compatibility, so I just integrated those by diffing against the base version before we applied our local changes.", "author": "tfmorris", "createdAt": "2020-07-29T15:20:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NzgwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3ODAyMg==", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462078022", "bodyText": "Those are also changes we made locally that I would keep.", "author": "wetneb", "createdAt": "2020-07-29T06:54:32Z", "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -1294,23 +1293,6 @@\n           type.text(data.id);\n       }\n       name.prepend(type);\n-      if(data.description) {\n-          name.append($(\"<span></span>\").text(data.description));\n-      }\n-\n-      // If we know of a view URL for this suggest service,\n-      // clicking with the middle button sends the user to\n-      // the view page.\n-      if('view_url' in this.options && data.id) {\n-        var view_url = this.options.view_url.replace('{{id}}', data.id).replace('${id}', data.id);\n-        li.on('mousedown', function(e) {\n-           if (e.which == 2) {\n-              var win = window.open(view_url, '_blank');\n-              win.focus();\n-              e.preventDefault();\n-           }\n-        });\n-      }", "originalCommit": "a39845ab871f543fea9ec7dba43caa8b85e4a72f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3ODMzNw==", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462078337", "bodyText": "This is also necessary for CORS support.", "author": "wetneb", "createdAt": "2020-07-29T06:55:11Z", "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -1508,7 +1490,7 @@\n             xhr.getResponseHeader(\"X-Metaweb-TID\"));\n           }\n         },\n-        dataType: o.access === undefined ? \"jsonp\" : o.access,", "originalCommit": "a39845ab871f543fea9ec7dba43caa8b85e4a72f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3ODU5NQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462078595", "bodyText": "That looks like something worth keeping.", "author": "wetneb", "createdAt": "2020-07-29T06:55:46Z", "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -1475,7 +1457,7 @@\n \n       //this.flyoutpane.hide();\n       var flyout_id = data.id;\n-      var url = this.flyout_url.replace(/\\$\\{id\\}/g, encodeURIComponent(data.id));", "originalCommit": "a39845ab871f543fea9ec7dba43caa8b85e4a72f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "723a4bdc80442305b50146a4f0e3bdeb7694c9d8", "url": "https://github.com/OpenRefine/OpenRefine/commit/723a4bdc80442305b50146a4f0e3bdeb7694c9d8", "message": "Use prop() instead of attr() to set 'selected'", "committedDate": "2020-07-29T14:52:27Z", "type": "forcePushed"}, {"oid": "b933b001b11c532083a4d2788cf544100263d679", "url": "https://github.com/OpenRefine/OpenRefine/commit/b933b001b11c532083a4d2788cf544100263d679", "message": "Refactor module wiring to reduce redundancy", "committedDate": "2020-08-01T19:46:37Z", "type": "commit"}, {"oid": "17d5df9258154afc9f3b055d60209c8c55c7f28f", "url": "https://github.com/OpenRefine/OpenRefine/commit/17d5df9258154afc9f3b055d60209c8c55c7f28f", "message": "Update to jQuery 1.12.4 & jQuery Migrate 1.4.1 - fixes #2932\n\nThis updates to the latest jQuery 1.x and jQuery Migrate 1.x,\nthe first step in upgrading to a modern jQuery.", "committedDate": "2020-08-01T19:47:59Z", "type": "commit"}, {"oid": "2f5f682e6fb082c54aae0d8a90050efcaa00a86a", "url": "https://github.com/OpenRefine/OpenRefine/commit/2f5f682e6fb082c54aae0d8a90050efcaa00a86a", "message": "Add a couple of bug fixes from Google Code SVN\n\nThis is an unrelease version from the Google Code freebase-site\nrepo which only has a few changes from the v4.3 release, but\none of them is removing the `browser.msie` reference that\njQuery Migrate is complaining about.", "committedDate": "2020-08-01T19:47:59Z", "type": "commit"}, {"oid": "82c32dc97e0444615b19d9f869c61447f350c3f1", "url": "https://github.com/OpenRefine/OpenRefine/commit/82c32dc97e0444615b19d9f869c61447f350c3f1", "message": "Use prop() for 'checked' and 'disabled'", "committedDate": "2020-08-01T19:48:00Z", "type": "commit"}, {"oid": "aff7acb3b2bd9c629e12553e7fba9bef4a30fe82", "url": "https://github.com/OpenRefine/OpenRefine/commit/aff7acb3b2bd9c629e12553e7fba9bef4a30fe82", "message": "Patch for jQuery >1.9", "committedDate": "2020-08-01T19:48:52Z", "type": "forcePushed"}, {"oid": "c7119ba853e13f24c50de273003d6eb43db82187", "url": "https://github.com/OpenRefine/OpenRefine/commit/c7119ba853e13f24c50de273003d6eb43db82187", "message": "Update jQuery 'value' property setting code to use val()", "committedDate": "2020-08-01T23:49:45Z", "type": "commit"}, {"oid": "4b9184eab296d07ee4e6c1b159678855addc9f43", "url": "https://github.com/OpenRefine/OpenRefine/commit/4b9184eab296d07ee4e6c1b159678855addc9f43", "message": "Use prop() instead of attr() to set 'selected'", "committedDate": "2020-08-01T23:49:45Z", "type": "commit"}, {"oid": "970be4a40f4b62ac54ad7921f40140c82b1ed504", "url": "https://github.com/OpenRefine/OpenRefine/commit/970be4a40f4b62ac54ad7921f40140c82b1ed504", "message": "Patch for jQuery >1.9", "committedDate": "2020-08-01T23:49:45Z", "type": "commit"}, {"oid": "970be4a40f4b62ac54ad7921f40140c82b1ed504", "url": "https://github.com/OpenRefine/OpenRefine/commit/970be4a40f4b62ac54ad7921f40140c82b1ed504", "message": "Patch for jQuery >1.9", "committedDate": "2020-08-01T23:49:45Z", "type": "forcePushed"}]}