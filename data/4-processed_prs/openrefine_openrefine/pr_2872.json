{"pr_number": 2872, "pr_title": "Fix race condition in service manifest fetching", "pr_createdAt": "2020-07-03T14:12:06Z", "pr_url": "https://github.com/OpenRefine/OpenRefine/pull/2872", "timeline": [{"oid": "bb27974b56ce975f6b0590e6f7652a9b5566869e", "url": "https://github.com/OpenRefine/OpenRefine/commit/bb27974b56ce975f6b0590e6f7652a9b5566869e", "message": "Fix race condition in service manifest fetching. Fixes #2803", "committedDate": "2020-07-03T14:11:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTY1MTE3Mg==", "url": "https://github.com/OpenRefine/OpenRefine/pull/2872#discussion_r449651172", "bodyText": "This is depending on Wikidata being the default reconciliation service which is true today (and this patch doesn't change this aspect of the behavior), but it seems like the Wikidata extension should know the address of its own reconciliation service.\nAlso, using the ensureDefaultServicePresent function to fetch this seems rather roundabout.", "author": "tfmorris", "createdAt": "2020-07-03T16:21:05Z", "path": "extensions/wikidata/module/scripts/dialogs/schema-alignment-dialog.js", "diffHunk": "@@ -148,10 +145,16 @@ SchemaAlignmentDialog.setUpTabs = function() {\n \n   this._previewPanes = $(\".schema-alignment-dialog-preview\");\n \n-  // Load the existing schema\n-  this._reset(theProject.overlayModels.wikibaseSchema);\n-  // Perform initial preview\n-  this.preview();\n+  var url = ReconciliationManager.ensureDefaultServicePresent();", "originalCommit": "bb27974b56ce975f6b0590e6f7652a9b5566869e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "60a9d14871f3360a6255642fc568562878740f50", "url": "https://github.com/OpenRefine/OpenRefine/commit/60a9d14871f3360a6255642fc568562878740f50", "message": "Set own recon endpoint for Wikidata extension", "committedDate": "2020-08-15T09:55:35Z", "type": "commit"}]}