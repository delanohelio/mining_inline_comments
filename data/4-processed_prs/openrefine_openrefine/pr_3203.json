{"pr_number": 3203, "pr_title": "Docs > Wikidata", "pr_createdAt": "2020-09-22T20:15:20Z", "pr_url": "https://github.com/OpenRefine/OpenRefine/pull/3203", "timeline": [{"oid": "133bfe191bcc30d87d754de59f56833e25cfe78d", "url": "https://github.com/OpenRefine/OpenRefine/commit/133bfe191bcc30d87d754de59f56833e25cfe78d", "message": "Docs > Wikidata", "committedDate": "2020-09-22T20:10:53Z", "type": "commit"}, {"oid": "865472505bafc62b75c4317bdc55633c581aaf35", "url": "https://github.com/OpenRefine/OpenRefine/commit/865472505bafc62b75c4317bdc55633c581aaf35", "message": "Cleaning up some egregious formatting", "committedDate": "2020-09-22T20:26:35Z", "type": "commit"}, {"oid": "bf44722c9368e83da00e0b811ec181036b80b79c", "url": "https://github.com/OpenRefine/OpenRefine/commit/bf44722c9368e83da00e0b811ec181036b80b79c", "message": "Add section about terms in schemas", "committedDate": "2020-09-22T21:06:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1MzQ5Mg==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r494453492", "bodyText": "The folder should be named lower case wikidata", "author": "ostephens", "createdAt": "2020-09-24T16:28:38Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,251 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `Wikidata` folder inside. ", "originalCommit": "bf44722c9368e83da00e0b811ec181036b80b79c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1NDQ5OA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r494454498", "bodyText": "To avoid us having to update this (and have any discussions about what \"most powerful\" means in this context), can we just state the functions it supports?", "author": "ostephens", "createdAt": "2020-09-24T16:30:10Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,251 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `Wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+## Reconciling with Wikidata\n \n+Wikidata is, at this time, the most powerful [reconciliation service](reconciling) for OpenRefine. [It supports](https://reconciliation-api.github.io/testbench/):", "originalCommit": "bf44722c9368e83da00e0b811ec181036b80b79c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1NTAwNg==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r494455006", "bodyText": "Should we clarify that this means augmenting your dataset within OpenRefine? Or is that obvious from context?", "author": "ostephens", "createdAt": "2020-09-24T16:30:59Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,251 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `Wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+## Reconciling with Wikidata\n \n+Wikidata is, at this time, the most powerful [reconciliation service](reconciling) for OpenRefine. [It supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your dataset with more information pulled from Wikidata ", "originalCommit": "bf44722c9368e83da00e0b811ec181036b80b79c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1ODE2MA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r494458160", "bodyText": "Is there any other way of getting the language code? A list would be an easier reference point (and would avoid mentioning Wikipedia here which could be potentially confusing in the context of wikidata)", "author": "ostephens", "createdAt": "2020-09-24T16:36:09Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,251 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `Wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+## Reconciling with Wikidata\n \n+Wikidata is, at this time, the most powerful [reconciliation service](reconciling) for OpenRefine. [It supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your dataset with more information pulled from Wikidata \n \n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n+### Language settings\n \n-## More resources\n+You can install a version of the Wikidata reconciliation service that uses your language.\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+First, you need your language code: this is the two-letter code in the domain name of your Wikipedia (for instance \"fr\" if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).", "originalCommit": "bf44722c9368e83da00e0b811ec181036b80b79c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1OTA3Nw==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r494459077", "bodyText": "This seems like quite a lot of detail - do we want to go into this level of detail about wikidata ontology structure?", "author": "ostephens", "createdAt": "2020-09-24T16:37:40Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,251 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `Wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+## Reconciling with Wikidata\n \n+Wikidata is, at this time, the most powerful [reconciliation service](reconciling) for OpenRefine. [It supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your dataset with more information pulled from Wikidata \n \n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n+### Language settings\n \n-## More resources\n+You can install a version of the Wikidata reconciliation service that uses your language.\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+First, you need your language code: this is the two-letter code in the domain name of your Wikipedia (for instance \"fr\" if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation dialog and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \"fr\" is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), which is witnessed by a statement on [Q1377](https://www.wikidata.org/wiki/Q1377) using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property.\n+\n+Types are organized into an ontology, by specifying which types are subclasses of the others, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918).\n+\n+One useful tool to visualize the subclasses of a given type is the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). For instance, here are [all the subclasses of academic institution (Q4671277)](https://angryloki.github.io/wikidata-graph-builder/?property=P279&item=Q4671277&mode=reverse).", "originalCommit": "bf44722c9368e83da00e0b811ec181036b80b79c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ2MzQzOA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r494463438", "bodyText": "I know we've discussed this already but I think this is lacking a bit of context - I'd suggest that we explain what might happen if you use invalid identifiers rather than saying \"false positives\" which not everyone will understand", "author": "ostephens", "createdAt": "2020-09-24T16:44:48Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,251 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `Wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+## Reconciling with Wikidata\n \n+Wikidata is, at this time, the most powerful [reconciliation service](reconciling) for OpenRefine. [It supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your dataset with more information pulled from Wikidata \n \n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n+### Language settings\n \n-## More resources\n+You can install a version of the Wikidata reconciliation service that uses your language.\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+First, you need your language code: this is the two-letter code in the domain name of your Wikipedia (for instance \"fr\" if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation dialog and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \"fr\" is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), which is witnessed by a statement on [Q1377](https://www.wikidata.org/wiki/Q1377) using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property.\n+\n+Types are organized into an ontology, by specifying which types are subclasses of the others, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918).\n+\n+One useful tool to visualize the subclasses of a given type is the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). For instance, here are [all the subclasses of academic institution (Q4671277)](https://angryloki.github.io/wikidata-graph-builder/?property=P279&item=Q4671277&mode=reverse).\n+\n+The reconciliation window allows you to select a type for your rows. This will restrict the matches to items that are instances of any subclass of the given type. For instance, if you select [public institution (Q875538)](https://www.wikidata.org/wiki/Q875538), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match, because of the path above.\n+\n+By default, OpenRefine will propose you some types based on the first few items of your dataset. It is quite likely that these types will be too specific for your needs. You can specify a broader type that will encompass more items. For instance, if you have a dataset of universities, it might be better to pick [educational institution (Q2385804)](https://www.wikidata.org/wiki/Q2385804) rather than [university (Q3918)](https://www.wikidata.org/wiki/Q3918), for instance if some entry happens to be marked as a [college (Q189004)](https://www.wikidata.org/wiki/Q189004) in Wikidata.\n+\n+Some items are not marked as the instances of anything, because no one has taken the time to add these statements yet. If you restrict the reconciliation to a type, these items will not appear in the results, except when no items of the given type could be found for the particular name. In this case, items with no type can be returned: they will have a low score and will not be matched automatically.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but these strings will not be \"reconciled\" against the external dataset. Matching identifiers does not validate them. \n+\n+Apply the operation \u201cReconcile\u201d \u2192 \u201cUse values as identifiers\u201d on your column of identifiers. All cells will appear as dark blue \"confirmed\" matches. You should check before this operation that the identifiers in the column exist on the target service.\n+\n+You may get false positives, which you will need to hover over or click on to identify.", "originalCommit": "bf44722c9368e83da00e0b811ec181036b80b79c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA2MDAyMQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r495060021", "bodyText": "Instead of explicating this too much here, I think we can just link to the equivalent section on the Reconciliation page?\n\nYou can supply a column of unique identifiers directly to Wikidata in order to pull more data, but these strings will not be \"reconciled\" against the external dataset. These identifiers will not be validated.\nApply the operation \u201cReconcile\u201d \u2192 \u201cUse values as identifiers\u201d on your column of identifiers. All cells will appear as dark blue \"confirmed\" matches. Some of the \"matches\" may be errors, which you will need to hover over or click on to identify.", "author": "allanaaa", "createdAt": "2020-09-25T15:19:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ2MzQzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3MDYwOA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r494470608", "bodyText": "Do we need to be clear here that this is only true when you use the function to use the identifiers (i.e. by passing reconciliation)?", "author": "ostephens", "createdAt": "2020-09-24T16:56:21Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,251 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `Wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+## Reconciling with Wikidata\n \n+Wikidata is, at this time, the most powerful [reconciliation service](reconciling) for OpenRefine. [It supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your dataset with more information pulled from Wikidata \n \n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n+### Language settings\n \n-## More resources\n+You can install a version of the Wikidata reconciliation service that uses your language.\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+First, you need your language code: this is the two-letter code in the domain name of your Wikipedia (for instance \"fr\" if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation dialog and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \"fr\" is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), which is witnessed by a statement on [Q1377](https://www.wikidata.org/wiki/Q1377) using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property.\n+\n+Types are organized into an ontology, by specifying which types are subclasses of the others, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918).\n+\n+One useful tool to visualize the subclasses of a given type is the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). For instance, here are [all the subclasses of academic institution (Q4671277)](https://angryloki.github.io/wikidata-graph-builder/?property=P279&item=Q4671277&mode=reverse).\n+\n+The reconciliation window allows you to select a type for your rows. This will restrict the matches to items that are instances of any subclass of the given type. For instance, if you select [public institution (Q875538)](https://www.wikidata.org/wiki/Q875538), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match, because of the path above.\n+\n+By default, OpenRefine will propose you some types based on the first few items of your dataset. It is quite likely that these types will be too specific for your needs. You can specify a broader type that will encompass more items. For instance, if you have a dataset of universities, it might be better to pick [educational institution (Q2385804)](https://www.wikidata.org/wiki/Q2385804) rather than [university (Q3918)](https://www.wikidata.org/wiki/Q3918), for instance if some entry happens to be marked as a [college (Q189004)](https://www.wikidata.org/wiki/Q189004) in Wikidata.\n+\n+Some items are not marked as the instances of anything, because no one has taken the time to add these statements yet. If you restrict the reconciliation to a type, these items will not appear in the results, except when no items of the given type could be found for the particular name. In this case, items with no type can be returned: they will have a low score and will not be matched automatically.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but these strings will not be \"reconciled\" against the external dataset. Matching identifiers does not validate them. \n+\n+Apply the operation \u201cReconcile\u201d \u2192 \u201cUse values as identifiers\u201d on your column of identifiers. All cells will appear as dark blue \"confirmed\" matches. You should check before this operation that the identifiers in the column exist on the target service.\n+\n+You may get false positives, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n+\n+### Property paths\n+\n+This feature is specific to the reconciliation interface for Wikidata.\n+\n+Sometimes, when including extra columns as properties in reconciliation, the relation between the reconciled item and the disambiguating column is not direct - it is not represented as a property itself. For example, take this dataset of cities:\n+\n+|City|Country|\n+|---|---|\n+|Oxford|GB|\n+|Paris|FR|\n+|Geneva|CH|\n+|Cambridge|GB|\n+|Cambridge|US|\n+|London|CA|\n+|London|GB|\n+\n+To fetch the country code from an item representing a city, you need to follow two properties. First, follow [country (P17)](https://www.wikidata.org/wiki/Property:P17) to get to the item for the country in which this city is located, then follow [ISO 3166-1 alpha-2 code (P297)](https://www.wikidata.org/wiki/Property:P297) to get the two-letter code string.\n+\n+This is supported by the reconciliation interface, with a syntax inspired by [SPARQL property paths](https://www.w3.org/TR/sparql11-property-paths/): include the \"country\" column, and for \"As Property\" enter the sequence of property identifiers separated by slashes: \"P17/P297\".\n+\n+This additional information can allow OpenRefine to disambiguate namesakes, at least to the country level. \"Cambridge, US\" is still ambiguous, so there will be multiple items with a perfect matching score, but \"Oxford, GB\" successfully disambiguates one particular city from other \"Oxfords.\" \n+\n+The endpoint currently supports two property combinators: /, to concatenate two paths as above, and |, to compute the union of the values yielded by two paths. Concatenation / has precedence over disjunction |. The dot character . can be used to denote the empty path. For instance, the following property paths are equivalent:\n+*   P17|P749/P17\n+*   P17|(P749/P17)\n+*   (.|P749)/P17\n+\n+They fetch the [country (P17)](https://www.wikidata.org/wiki/Property:P17) of an item or that of its [parent organization (P749)](https://www.wikidata.org/wiki/Property:P17).\n+\n+### Terms: labels, descriptions, aliases, and sitelinks\n+\n+Entities on Wikidata have \"terms:\" labels, descriptions, aliases, and sitelinks. Each entity has human-readable preferred names (labels) in one or more languages. Each label comes with a description field, and a space for alternative labels in that language. Entities also can have a link to the related Wikipedia page in one or more langauges. \n+\n+For example, [Q5](https://www.wikidata.org/wiki/Q5) has the English label \"human\" and the aliases \"person\" and \"people,\" with a description including \"common name of Homo sapiens;\" it also has the Italian label \"umano\" and the alias \"persona\" with a description \"specie a cui appartiene il genere umano.\" The English sitelink is \"https://en&#46;wikipedia.org/wiki/Human\" but Italian Wikipedia has no equivalent article attached to Q5. Not every language will have values, but these terms can still be useful for reconciling. \n+\n+After reconciliation, you can extend your data with these terms. You can fetch aliases for a given term, or labels in another languages, by using <span class=\"menuItems\">Edit column</span> \u2192 <span class=\"menuItems\">Add columns from reconciled values....</span>. \n+\n+You can refer to a term in a specific language by manually entering in a three-letter code. The first letter is the term (\"L\" for label, \"D\" for description, \"A\" for aliases, \"S\" for sitelink) and the next two are the language code. For example:\n+\n+*   `Len` for Label in English\n+*   `Dfi` for Description in Finnish\n+*   `Apt` for Alias in Portuguese\n+*   `Sde` for Sitelink in German\n+\n+Enter in the three-letter code manually in the <span class=\"menuItems\">Add Property</span> field. You can manually enter as many term/language combinations as you require. \n+\n+No language fall-back is performed when retrieving the values.\n+\n+### Comparing values\n+\n+By default, data in OpenRefine and entities in Wikidata are compared by string fuzzy-matching. There are some exceptions to this:\n+*   If the value is an identifier, then it confirms the exact string without matching.", "originalCommit": "bf44722c9368e83da00e0b811ec181036b80b79c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3MTA5Mw==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r494471093", "bodyText": "This is really useful information but I wonder if it should be in the OpenRefine docs or whether we should have a pointer to external documentation on the Wikidata reconciliation service?", "author": "ostephens", "createdAt": "2020-09-24T16:57:08Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,251 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `Wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+## Reconciling with Wikidata\n \n+Wikidata is, at this time, the most powerful [reconciliation service](reconciling) for OpenRefine. [It supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your dataset with more information pulled from Wikidata \n \n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n+### Language settings\n \n-## More resources\n+You can install a version of the Wikidata reconciliation service that uses your language.\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+First, you need your language code: this is the two-letter code in the domain name of your Wikipedia (for instance \"fr\" if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation dialog and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \"fr\" is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), which is witnessed by a statement on [Q1377](https://www.wikidata.org/wiki/Q1377) using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property.\n+\n+Types are organized into an ontology, by specifying which types are subclasses of the others, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918).\n+\n+One useful tool to visualize the subclasses of a given type is the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). For instance, here are [all the subclasses of academic institution (Q4671277)](https://angryloki.github.io/wikidata-graph-builder/?property=P279&item=Q4671277&mode=reverse).\n+\n+The reconciliation window allows you to select a type for your rows. This will restrict the matches to items that are instances of any subclass of the given type. For instance, if you select [public institution (Q875538)](https://www.wikidata.org/wiki/Q875538), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match, because of the path above.\n+\n+By default, OpenRefine will propose you some types based on the first few items of your dataset. It is quite likely that these types will be too specific for your needs. You can specify a broader type that will encompass more items. For instance, if you have a dataset of universities, it might be better to pick [educational institution (Q2385804)](https://www.wikidata.org/wiki/Q2385804) rather than [university (Q3918)](https://www.wikidata.org/wiki/Q3918), for instance if some entry happens to be marked as a [college (Q189004)](https://www.wikidata.org/wiki/Q189004) in Wikidata.\n+\n+Some items are not marked as the instances of anything, because no one has taken the time to add these statements yet. If you restrict the reconciliation to a type, these items will not appear in the results, except when no items of the given type could be found for the particular name. In this case, items with no type can be returned: they will have a low score and will not be matched automatically.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but these strings will not be \"reconciled\" against the external dataset. Matching identifiers does not validate them. \n+\n+Apply the operation \u201cReconcile\u201d \u2192 \u201cUse values as identifiers\u201d on your column of identifiers. All cells will appear as dark blue \"confirmed\" matches. You should check before this operation that the identifiers in the column exist on the target service.\n+\n+You may get false positives, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n+\n+### Property paths\n+\n+This feature is specific to the reconciliation interface for Wikidata.\n+\n+Sometimes, when including extra columns as properties in reconciliation, the relation between the reconciled item and the disambiguating column is not direct - it is not represented as a property itself. For example, take this dataset of cities:\n+\n+|City|Country|\n+|---|---|\n+|Oxford|GB|\n+|Paris|FR|\n+|Geneva|CH|\n+|Cambridge|GB|\n+|Cambridge|US|\n+|London|CA|\n+|London|GB|\n+\n+To fetch the country code from an item representing a city, you need to follow two properties. First, follow [country (P17)](https://www.wikidata.org/wiki/Property:P17) to get to the item for the country in which this city is located, then follow [ISO 3166-1 alpha-2 code (P297)](https://www.wikidata.org/wiki/Property:P297) to get the two-letter code string.\n+\n+This is supported by the reconciliation interface, with a syntax inspired by [SPARQL property paths](https://www.w3.org/TR/sparql11-property-paths/): include the \"country\" column, and for \"As Property\" enter the sequence of property identifiers separated by slashes: \"P17/P297\".\n+\n+This additional information can allow OpenRefine to disambiguate namesakes, at least to the country level. \"Cambridge, US\" is still ambiguous, so there will be multiple items with a perfect matching score, but \"Oxford, GB\" successfully disambiguates one particular city from other \"Oxfords.\" \n+\n+The endpoint currently supports two property combinators: /, to concatenate two paths as above, and |, to compute the union of the values yielded by two paths. Concatenation / has precedence over disjunction |. The dot character . can be used to denote the empty path. For instance, the following property paths are equivalent:\n+*   P17|P749/P17\n+*   P17|(P749/P17)\n+*   (.|P749)/P17\n+\n+They fetch the [country (P17)](https://www.wikidata.org/wiki/Property:P17) of an item or that of its [parent organization (P749)](https://www.wikidata.org/wiki/Property:P17).\n+\n+### Terms: labels, descriptions, aliases, and sitelinks\n+\n+Entities on Wikidata have \"terms:\" labels, descriptions, aliases, and sitelinks. Each entity has human-readable preferred names (labels) in one or more languages. Each label comes with a description field, and a space for alternative labels in that language. Entities also can have a link to the related Wikipedia page in one or more langauges. \n+\n+For example, [Q5](https://www.wikidata.org/wiki/Q5) has the English label \"human\" and the aliases \"person\" and \"people,\" with a description including \"common name of Homo sapiens;\" it also has the Italian label \"umano\" and the alias \"persona\" with a description \"specie a cui appartiene il genere umano.\" The English sitelink is \"https://en&#46;wikipedia.org/wiki/Human\" but Italian Wikipedia has no equivalent article attached to Q5. Not every language will have values, but these terms can still be useful for reconciling. \n+\n+After reconciliation, you can extend your data with these terms. You can fetch aliases for a given term, or labels in another languages, by using <span class=\"menuItems\">Edit column</span> \u2192 <span class=\"menuItems\">Add columns from reconciled values....</span>. \n+\n+You can refer to a term in a specific language by manually entering in a three-letter code. The first letter is the term (\"L\" for label, \"D\" for description, \"A\" for aliases, \"S\" for sitelink) and the next two are the language code. For example:\n+\n+*   `Len` for Label in English\n+*   `Dfi` for Description in Finnish\n+*   `Apt` for Alias in Portuguese\n+*   `Sde` for Sitelink in German\n+\n+Enter in the three-letter code manually in the <span class=\"menuItems\">Add Property</span> field. You can manually enter as many term/language combinations as you require. \n+\n+No language fall-back is performed when retrieving the values.\n+\n+### Comparing values\n+\n+By default, data in OpenRefine and entities in Wikidata are compared by string fuzzy-matching. There are some exceptions to this:\n+*   If the value is an identifier, then it confirms the exact string without matching.\n+*   If the values are integers, exact equality between integers is used.\n+*   If the values are floating point numbers, the score is 100 if they are equal and decreases towards 0 as their absolute difference increases.\n+*   If the values are coordinates (specified in the \"lat,lng\" format on OpenRefine's side), then the matching score is 100 when they are equal and decreases as their distance increases. Currently a score of 0 is reached when the points are 1 kilometre away from each other.\n+\n+Sometimes, we need a more specific matching on sub-parts of these values. It is possible to select these parts for matching by appending a modifier at the end of the property path:", "originalCommit": "bf44722c9368e83da00e0b811ec181036b80b79c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3NDE4OA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r494474188", "bodyText": "That makes sense, it should be documented externally indeed.", "author": "wetneb", "createdAt": "2020-09-24T17:02:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3MTA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA2Mjc1MA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r495062750", "bodyText": "Do you mean drop the text into someplace like https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine#Wikidata_reconciliation? It doesn't have much space to explicate, at present.\nOr somewhere like https://wikidata.reconci.link/? That just points back to our wiki, and to https://github.com/wetneb/openrefine-wikibase - which is another potential place to document it.", "author": "allanaaa", "createdAt": "2020-09-25T15:24:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3MTA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA2MzY5NQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r495063695", "bodyText": "Sorry, I should've started with: I can't find this documented anywhere else on the web except in our own wiki.", "author": "allanaaa", "createdAt": "2020-09-25T15:25:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3MTA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2MzA5OA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499863098", "bodyText": "Yes it should be documented in https://github.com/wetneb/openrefine-wikibase, or perhaps on the web service itself, https://wikidata.reconci.link/", "author": "wetneb", "createdAt": "2020-10-05T20:47:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3MTA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY0MjQ2MQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r521642461", "bodyText": "@wetneb has put a version of this information here: https://wikidata.reconci.link/#documentation\nIt looks like it's just copied from the original wiki text. I have an updated version of the same text, but I've now removed it from this draft and saved it elsewhere. If we'd like to update the text on that page, we can take care of it another time.", "author": "allanaaa", "createdAt": "2020-11-11T21:14:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3MTA5Mw=="}], "type": "inlineReview"}, {"oid": "7852758e8853e4892e27b5c2362441a043da7470", "url": "https://github.com/OpenRefine/OpenRefine/commit/7852758e8853e4892e27b5c2362441a043da7470", "message": "Resolving some of Owen's comments", "committedDate": "2020-09-25T15:12:17Z", "type": "commit"}, {"oid": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "url": "https://github.com/OpenRefine/OpenRefine/commit/70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "message": "Update wikidata.md", "committedDate": "2020-10-05T19:22:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2OTEyOA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499869128", "bodyText": "The sentence stops in the middle, but a) the Wikidata reconciliation service is an external offering, not a Wikibase/Wikidata thing and b) even if it were part of the standard offering, individual Wikibase admins could presumably choose not to run it.", "author": "tfmorris", "createdAt": "2020-10-05T20:59:12Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, ", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ0ODYwNQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r500448605", "bodyText": "Whoops! We left off on our discussion of this because the wikibase connections are in flux right now (https://phabricator.wikimedia.org/T197588).\nI think we may leave this bit off for now.", "author": "allanaaa", "createdAt": "2020-10-06T16:49:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg2OTEyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3MTI4NQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499871285", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you upload edits that are redundant (that is, all the statements you want to make have already been made), nothing will happen. If you upload edits that conflict with existing information (such as a different birthdate than one already in Wikidata), it will be added as a second statement. OpenRefine produces no warnings as to whether your data replicates or conflicts existing Wikidata elements. \n          \n          \n            \n            If you upload edits that are redundant (that is, all the statements you want to make have already been made), nothing will happen. If you upload edits that conflict with existing information (such as a different birthdate than one already in Wikidata), it will be added as a second statement. OpenRefine produces no warnings as to whether your data replicates or conflicts with existing Wikidata elements.", "author": "tfmorris", "createdAt": "2020-10-05T21:03:29Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, \n \n+## Reconciling with Wikidata\n \n+The [Wikidata reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n-## More resources\n+### Language settings\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter WP code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. \n+Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of identifiers. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n+\n+### Property paths\n+\n+This feature is specific to the reconciliation interface for Wikidata. Sometimes, when including extra columns as properties in reconciliation, the relation between the reconciled item and the disambiguating column is not direct - it is not represented as a property itself. For example, take this dataset of cities:\n+\n+|City|Country|\n+|---|---|\n+|Oxford|GB|\n+|Paris|FR|\n+|Geneva|CH|\n+|Cambridge|GB|\n+|Cambridge|US|\n+|London|CA|\n+|London|GB|\n+\n+To fetch the country code from an item representing a city, you need to follow two properties. First, follow [country (P17)](https://www.wikidata.org/wiki/Property:P17) to get to the item for the country in which this city is located, then follow [ISO 3166-1 alpha-2 code (P297)](https://www.wikidata.org/wiki/Property:P297) to get the two-letter code string.\n+\n+This is supported by the reconciliation interface, with a syntax inspired by [SPARQL property paths](https://www.w3.org/TR/sparql11-property-paths/): include the \u201ccountry\u201d column, and for <span class=\"menuItems\">As Property</span> enter the sequence of property identifiers separated by slashes: \u201cP17/P297.\u201d\n+\n+This additional information can allow OpenRefine to disambiguate namesakes, at least to the country level. \u201cCambridge, US\u201d is still ambiguous, so there will be multiple items with a perfect matching score, but \u201cOxford, GB\u201d successfully disambiguates one particular city from other \u201cOxfords.\u201d \n+\n+The endpoint currently supports two property combinators: /, to concatenate two paths as above, and |, to compute the union of the values yielded by two paths. Concatenation / has precedence over disjunction |. The dot character . can be used to denote the empty path. For instance, the following property paths are equivalent:\n+*   P17|P749/P17\n+*   P17|(P749/P17)\n+*   (.|P749)/P17\n+\n+They fetch the [country (P17)](https://www.wikidata.org/wiki/Property:P17) of an item or that of its [parent organization (P749)](https://www.wikidata.org/wiki/Property:P17).\n+\n+### Terms: labels, descriptions, aliases, and sitelinks\n+\n+Entities on Wikidata have what they call \u201cterms:\u201d labels, descriptions, aliases, and sitelinks. Each entity has human-readable preferred names (labels) in one or more languages. Each label comes with a description field, and a space for alternative labels in that language. Entities also can have a link to the related Wikipedia page in one or more langauges. \n+\n+For example, [Q5](https://www.wikidata.org/wiki/Q5) has the English label \u201chuman\u201d and the aliases \u201cperson\u201d and \u201cpeople,\u201d with a description including \u201ccommon name of Homo sapiens;\u201d it also has the Italian label \u201cumano\u201d and the alias \u201cpersona\u201d with a description \u201cspecie a cui appartiene il genere umano.\u201d The English sitelink is \u201chttps://en&#46;wikipedia.org/wiki/Human\u201d but Italian Wikipedia has no equivalent article attached to Q5. Not every language will have values, but these terms can still be useful for reconciling. \n+\n+After reconciliation, you can extend your data with these terms. You can fetch aliases for a given term, or labels in another languages, by using <span class=\"menuItems\">Edit column</span> \u2192 <span class=\"menuItems\">Add columns from reconciled values....</span>. \n+\n+You can refer to a term in a specific language by manually entering in a three-letter code. The first letter is the term (\u201cL\u201d for label, \u201cD\u201d for description, \u201cA\u201d for aliases, \u201cS\u201d for sitelink) and the next two are the language code. For example:\n+\n+*   `Len` for Label in English\n+*   `Dfi` for Description in Finnish\n+*   `Apt` for Alias in Portuguese\n+*   `Sde` for Sitelink in German\n+\n+Enter in the three-letter code manually in the <span class=\"menuItems\">Add Property</span> field. You can manually enter as many term/language combinations as you require. \n+\n+No language fall-back is performed when retrieving the values.\n+\n+### Comparing values\n+\n+By default, data in OpenRefine and entities in Wikidata are compared by string fuzzy-matching. There are some exceptions to this:\n+*   If you are [reconciling by unique identifiers](#reconciling-with-unique-identifiers), then it confirms the exact strings without matching.\n+*   If the values are integers, exact equality between integers is used.\n+*   If the values are floating point numbers, the score is 100 if they are equal and decreases towards 0 as their absolute difference increases.\n+*   If the values are coordinates (specified in the \u201clat,lng\u201d format on OpenRefine's side), then the matching score is 100 when they are equal and decreases as their distance increases. Currently a score of 0 is reached when the points are 1 kilometre away from each other.\n+\n+Sometimes, we need a more specific matching on sub-parts of these values. It is possible to select these parts for matching by appending a modifier at the end of the property path:\n+*   @lat and @lng: latitude and longitude of geographical coordinates (float)\n+*   @year, @month, @day, @hour, @minute and @second: parts of a time value (integer). They are returned only if the precision of the Wikidata value is good enough to define them.\n+*   @isodate: returns a date in the ISO format 1987-08-23 (string). A value is always returned.\n+*   @iso: returns the date and time in the ISO format 1996-03-17T04:15:00+00:00. A value is always returned. \n+*   @urlscheme (\u201chttps\u201d), @netloc (\u201cwww&#46;wikidata.org\u201d) and @urlpath (\u201c/wiki/Q42\u201d) can be used to perform exact matching on parts of URLs.\n+\n+For times and dates, all values are returned in the UTC time zone.\n+\n+For instance, if you want to reconcile people by their birthdates, but you only have the month and day, split the birthday dates into two columns, for month and day. Then reconcile using the [date of birth (P569)](https://www.wikidata.org/wiki/Property:P569) property using the  parameters `P569@month` and `P569@day` with your included columns.\n+\n+## Editing Wikidata with OpenRefine\n+\n+The best resource is the [Editing section](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) on Wikidata.\n+\n+As a user-maintained data source, Wikidata can be edited by anyone. OpenRefine makes it simple to upload information in bulk. You simply need to get your information into the correct format, and ensure that it is new (not redundant to information already on Wikidata) and does not conflict with existing Wikidata information.\n+\n+Wikidata is built by creating entities (such as people, organizations, or places, identified with unique numbers starting with Q), defining properties (unique numbers starting with P), and using properties to define relationships between entities (a Q has a property P, with a value of another Q). \n+\n+For example, you may wish to create entities for local authors and the books they've set in your community. Each writer will be an entity with the occupation [author (Q482980)](https://www.wikidata.org/wiki/Q482980), each book will be an entity with  [literary work (Q7725634)](https://www.wikidata.org/wiki/Q7725634), and books will be related to authors through a property [author (P50)](https://www.wikidata.org/wiki/Property:P50). Books can have places where they are set, with [setting (Q617332)](https://www.wikidata.org/wiki/Q617332). In OpenRefine, you'll need a column of publication titles that you have reconciled (and then created new items where needed); each publication will have one or more locations in a \u201csetting\u201d column, which is also reconciled to municipalities or regions where they exist (and have new items where needed). Then you can add those new relationships to each book, and create new entities for both books and places.\n+\n+There is a list of [tutorials and walkthroughs on Wikidata](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) that will allow you to see the full process. You can save your schemas and drafts in OpenRefine, and your progress stays in draft until you are sure you\u2019re ready to upload it to Wikidata. You can also find information on [how to design a schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) and [how OpenRefine evaluates your proposed edits for issues](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Quality_assurance).\n+\n+Batches of edits to Wikidata that are created with OpenRefine can be undone. You can test out the uploading process by reconciling to several \u201csandbox\u201d entities created specifically for drafting edits and learning about Wikidata:\n+* https://www.wikidata.org/wiki/Q4115189\n+* https://www.wikidata.org/wiki/Q13406268\n+* https://www.wikidata.org/wiki/Q15397819\n+* https://www.wikidata.org/wiki/Q64768399\n+\n+If you upload edits that are redundant (that is, all the statements you want to make have already been made), nothing will happen. If you upload edits that conflict with existing information (such as a different birthdate than one already in Wikidata), it will be added as a second statement. OpenRefine produces no warnings as to whether your data replicates or conflicts existing Wikidata elements. ", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3MzMzNw==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499873337", "bodyText": "I'm not sure people will know what this means, but since it's something that's not done, does it even need to be mentioned?", "author": "tfmorris", "createdAt": "2020-10-05T21:07:54Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, \n \n+## Reconciling with Wikidata\n \n+The [Wikidata reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n-## More resources\n+### Language settings\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter WP code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. \n+Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of identifiers. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n+\n+### Property paths\n+\n+This feature is specific to the reconciliation interface for Wikidata. Sometimes, when including extra columns as properties in reconciliation, the relation between the reconciled item and the disambiguating column is not direct - it is not represented as a property itself. For example, take this dataset of cities:\n+\n+|City|Country|\n+|---|---|\n+|Oxford|GB|\n+|Paris|FR|\n+|Geneva|CH|\n+|Cambridge|GB|\n+|Cambridge|US|\n+|London|CA|\n+|London|GB|\n+\n+To fetch the country code from an item representing a city, you need to follow two properties. First, follow [country (P17)](https://www.wikidata.org/wiki/Property:P17) to get to the item for the country in which this city is located, then follow [ISO 3166-1 alpha-2 code (P297)](https://www.wikidata.org/wiki/Property:P297) to get the two-letter code string.\n+\n+This is supported by the reconciliation interface, with a syntax inspired by [SPARQL property paths](https://www.w3.org/TR/sparql11-property-paths/): include the \u201ccountry\u201d column, and for <span class=\"menuItems\">As Property</span> enter the sequence of property identifiers separated by slashes: \u201cP17/P297.\u201d\n+\n+This additional information can allow OpenRefine to disambiguate namesakes, at least to the country level. \u201cCambridge, US\u201d is still ambiguous, so there will be multiple items with a perfect matching score, but \u201cOxford, GB\u201d successfully disambiguates one particular city from other \u201cOxfords.\u201d \n+\n+The endpoint currently supports two property combinators: /, to concatenate two paths as above, and |, to compute the union of the values yielded by two paths. Concatenation / has precedence over disjunction |. The dot character . can be used to denote the empty path. For instance, the following property paths are equivalent:\n+*   P17|P749/P17\n+*   P17|(P749/P17)\n+*   (.|P749)/P17\n+\n+They fetch the [country (P17)](https://www.wikidata.org/wiki/Property:P17) of an item or that of its [parent organization (P749)](https://www.wikidata.org/wiki/Property:P17).\n+\n+### Terms: labels, descriptions, aliases, and sitelinks\n+\n+Entities on Wikidata have what they call \u201cterms:\u201d labels, descriptions, aliases, and sitelinks. Each entity has human-readable preferred names (labels) in one or more languages. Each label comes with a description field, and a space for alternative labels in that language. Entities also can have a link to the related Wikipedia page in one or more langauges. \n+\n+For example, [Q5](https://www.wikidata.org/wiki/Q5) has the English label \u201chuman\u201d and the aliases \u201cperson\u201d and \u201cpeople,\u201d with a description including \u201ccommon name of Homo sapiens;\u201d it also has the Italian label \u201cumano\u201d and the alias \u201cpersona\u201d with a description \u201cspecie a cui appartiene il genere umano.\u201d The English sitelink is \u201chttps://en&#46;wikipedia.org/wiki/Human\u201d but Italian Wikipedia has no equivalent article attached to Q5. Not every language will have values, but these terms can still be useful for reconciling. \n+\n+After reconciliation, you can extend your data with these terms. You can fetch aliases for a given term, or labels in another languages, by using <span class=\"menuItems\">Edit column</span> \u2192 <span class=\"menuItems\">Add columns from reconciled values....</span>. \n+\n+You can refer to a term in a specific language by manually entering in a three-letter code. The first letter is the term (\u201cL\u201d for label, \u201cD\u201d for description, \u201cA\u201d for aliases, \u201cS\u201d for sitelink) and the next two are the language code. For example:\n+\n+*   `Len` for Label in English\n+*   `Dfi` for Description in Finnish\n+*   `Apt` for Alias in Portuguese\n+*   `Sde` for Sitelink in German\n+\n+Enter in the three-letter code manually in the <span class=\"menuItems\">Add Property</span> field. You can manually enter as many term/language combinations as you require. \n+\n+No language fall-back is performed when retrieving the values.", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3NTkzNg==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499875936", "bodyText": "This is presumably talking about external identifiers like VIAF, ORCID, etc. It would useful to include that context and also mention that it only works for identifiers which have an associated Wikidata property.", "author": "tfmorris", "createdAt": "2020-10-05T21:13:36Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, \n \n+## Reconciling with Wikidata\n \n+The [Wikidata reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n-## More resources\n+### Language settings\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter WP code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. \n+Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of identifiers. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify.", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM2NTMyNQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r500365325", "bodyText": "No, this is definitely about Wikidata.", "author": "allanaaa", "createdAt": "2020-10-06T15:01:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3NTkzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQzMzAyMQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r500433021", "bodyText": "Perhaps then call them \"Wikidata identifiers\" instead of generically \"unique identifiers.\"", "author": "tfmorris", "createdAt": "2020-10-06T16:25:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3NTkzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3NjgyNg==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499876826", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n          \n          \n            \n            If the same external identifier is assigned to multiple Wikidata items, all of the items are returned as candidates, with none automatically matched.", "author": "tfmorris", "createdAt": "2020-10-05T21:15:33Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, \n \n+## Reconciling with Wikidata\n \n+The [Wikidata reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n-## More resources\n+### Language settings\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter WP code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. \n+Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of identifiers. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3Nzk4Mw==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499877983", "bodyText": "This seems very obscure. I know that's not the docs fault, but perhaps we should see if we can improve it.", "author": "tfmorris", "createdAt": "2020-10-05T21:18:13Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, \n \n+## Reconciling with Wikidata\n \n+The [Wikidata reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n-## More resources\n+### Language settings\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter WP code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. \n+Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of identifiers. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n+\n+### Property paths\n+\n+This feature is specific to the reconciliation interface for Wikidata. Sometimes, when including extra columns as properties in reconciliation, the relation between the reconciled item and the disambiguating column is not direct - it is not represented as a property itself. For example, take this dataset of cities:\n+\n+|City|Country|\n+|---|---|\n+|Oxford|GB|\n+|Paris|FR|\n+|Geneva|CH|\n+|Cambridge|GB|\n+|Cambridge|US|\n+|London|CA|\n+|London|GB|\n+\n+To fetch the country code from an item representing a city, you need to follow two properties. First, follow [country (P17)](https://www.wikidata.org/wiki/Property:P17) to get to the item for the country in which this city is located, then follow [ISO 3166-1 alpha-2 code (P297)](https://www.wikidata.org/wiki/Property:P297) to get the two-letter code string.\n+\n+This is supported by the reconciliation interface, with a syntax inspired by [SPARQL property paths](https://www.w3.org/TR/sparql11-property-paths/): include the \u201ccountry\u201d column, and for <span class=\"menuItems\">As Property</span> enter the sequence of property identifiers separated by slashes: \u201cP17/P297.\u201d\n+\n+This additional information can allow OpenRefine to disambiguate namesakes, at least to the country level. \u201cCambridge, US\u201d is still ambiguous, so there will be multiple items with a perfect matching score, but \u201cOxford, GB\u201d successfully disambiguates one particular city from other \u201cOxfords.\u201d \n+\n+The endpoint currently supports two property combinators: /, to concatenate two paths as above, and |, to compute the union of the values yielded by two paths. Concatenation / has precedence over disjunction |. The dot character . can be used to denote the empty path. For instance, the following property paths are equivalent:\n+*   P17|P749/P17\n+*   P17|(P749/P17)\n+*   (.|P749)/P17\n+\n+They fetch the [country (P17)](https://www.wikidata.org/wiki/Property:P17) of an item or that of its [parent organization (P749)](https://www.wikidata.org/wiki/Property:P17).\n+\n+### Terms: labels, descriptions, aliases, and sitelinks\n+\n+Entities on Wikidata have what they call \u201cterms:\u201d labels, descriptions, aliases, and sitelinks. Each entity has human-readable preferred names (labels) in one or more languages. Each label comes with a description field, and a space for alternative labels in that language. Entities also can have a link to the related Wikipedia page in one or more langauges. \n+\n+For example, [Q5](https://www.wikidata.org/wiki/Q5) has the English label \u201chuman\u201d and the aliases \u201cperson\u201d and \u201cpeople,\u201d with a description including \u201ccommon name of Homo sapiens;\u201d it also has the Italian label \u201cumano\u201d and the alias \u201cpersona\u201d with a description \u201cspecie a cui appartiene il genere umano.\u201d The English sitelink is \u201chttps://en&#46;wikipedia.org/wiki/Human\u201d but Italian Wikipedia has no equivalent article attached to Q5. Not every language will have values, but these terms can still be useful for reconciling. \n+\n+After reconciliation, you can extend your data with these terms. You can fetch aliases for a given term, or labels in another languages, by using <span class=\"menuItems\">Edit column</span> \u2192 <span class=\"menuItems\">Add columns from reconciled values....</span>. \n+\n+You can refer to a term in a specific language by manually entering in a three-letter code. The first letter is the term (\u201cL\u201d for label, \u201cD\u201d for description, \u201cA\u201d for aliases, \u201cS\u201d for sitelink) and the next two are the language code. For example:", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3OTIxNw==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499879217", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Wikidata is unlike Wikipedia in that there are fewer editors supervising consistency. Many entities' discussion pages are not used; rather, discussion happens on individual users' pages and on project pages. \n          \n      \n    \n    \n  \n\nThis doesn't have anything to do with OpenRefine", "author": "tfmorris", "createdAt": "2020-10-05T21:20:47Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, \n \n+## Reconciling with Wikidata\n \n+The [Wikidata reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n-## More resources\n+### Language settings\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter WP code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. \n+Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of identifiers. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n+\n+### Property paths\n+\n+This feature is specific to the reconciliation interface for Wikidata. Sometimes, when including extra columns as properties in reconciliation, the relation between the reconciled item and the disambiguating column is not direct - it is not represented as a property itself. For example, take this dataset of cities:\n+\n+|City|Country|\n+|---|---|\n+|Oxford|GB|\n+|Paris|FR|\n+|Geneva|CH|\n+|Cambridge|GB|\n+|Cambridge|US|\n+|London|CA|\n+|London|GB|\n+\n+To fetch the country code from an item representing a city, you need to follow two properties. First, follow [country (P17)](https://www.wikidata.org/wiki/Property:P17) to get to the item for the country in which this city is located, then follow [ISO 3166-1 alpha-2 code (P297)](https://www.wikidata.org/wiki/Property:P297) to get the two-letter code string.\n+\n+This is supported by the reconciliation interface, with a syntax inspired by [SPARQL property paths](https://www.w3.org/TR/sparql11-property-paths/): include the \u201ccountry\u201d column, and for <span class=\"menuItems\">As Property</span> enter the sequence of property identifiers separated by slashes: \u201cP17/P297.\u201d\n+\n+This additional information can allow OpenRefine to disambiguate namesakes, at least to the country level. \u201cCambridge, US\u201d is still ambiguous, so there will be multiple items with a perfect matching score, but \u201cOxford, GB\u201d successfully disambiguates one particular city from other \u201cOxfords.\u201d \n+\n+The endpoint currently supports two property combinators: /, to concatenate two paths as above, and |, to compute the union of the values yielded by two paths. Concatenation / has precedence over disjunction |. The dot character . can be used to denote the empty path. For instance, the following property paths are equivalent:\n+*   P17|P749/P17\n+*   P17|(P749/P17)\n+*   (.|P749)/P17\n+\n+They fetch the [country (P17)](https://www.wikidata.org/wiki/Property:P17) of an item or that of its [parent organization (P749)](https://www.wikidata.org/wiki/Property:P17).\n+\n+### Terms: labels, descriptions, aliases, and sitelinks\n+\n+Entities on Wikidata have what they call \u201cterms:\u201d labels, descriptions, aliases, and sitelinks. Each entity has human-readable preferred names (labels) in one or more languages. Each label comes with a description field, and a space for alternative labels in that language. Entities also can have a link to the related Wikipedia page in one or more langauges. \n+\n+For example, [Q5](https://www.wikidata.org/wiki/Q5) has the English label \u201chuman\u201d and the aliases \u201cperson\u201d and \u201cpeople,\u201d with a description including \u201ccommon name of Homo sapiens;\u201d it also has the Italian label \u201cumano\u201d and the alias \u201cpersona\u201d with a description \u201cspecie a cui appartiene il genere umano.\u201d The English sitelink is \u201chttps://en&#46;wikipedia.org/wiki/Human\u201d but Italian Wikipedia has no equivalent article attached to Q5. Not every language will have values, but these terms can still be useful for reconciling. \n+\n+After reconciliation, you can extend your data with these terms. You can fetch aliases for a given term, or labels in another languages, by using <span class=\"menuItems\">Edit column</span> \u2192 <span class=\"menuItems\">Add columns from reconciled values....</span>. \n+\n+You can refer to a term in a specific language by manually entering in a three-letter code. The first letter is the term (\u201cL\u201d for label, \u201cD\u201d for description, \u201cA\u201d for aliases, \u201cS\u201d for sitelink) and the next two are the language code. For example:\n+\n+*   `Len` for Label in English\n+*   `Dfi` for Description in Finnish\n+*   `Apt` for Alias in Portuguese\n+*   `Sde` for Sitelink in German\n+\n+Enter in the three-letter code manually in the <span class=\"menuItems\">Add Property</span> field. You can manually enter as many term/language combinations as you require. \n+\n+No language fall-back is performed when retrieving the values.\n+\n+### Comparing values\n+\n+By default, data in OpenRefine and entities in Wikidata are compared by string fuzzy-matching. There are some exceptions to this:\n+*   If you are [reconciling by unique identifiers](#reconciling-with-unique-identifiers), then it confirms the exact strings without matching.\n+*   If the values are integers, exact equality between integers is used.\n+*   If the values are floating point numbers, the score is 100 if they are equal and decreases towards 0 as their absolute difference increases.\n+*   If the values are coordinates (specified in the \u201clat,lng\u201d format on OpenRefine's side), then the matching score is 100 when they are equal and decreases as their distance increases. Currently a score of 0 is reached when the points are 1 kilometre away from each other.\n+\n+Sometimes, we need a more specific matching on sub-parts of these values. It is possible to select these parts for matching by appending a modifier at the end of the property path:\n+*   @lat and @lng: latitude and longitude of geographical coordinates (float)\n+*   @year, @month, @day, @hour, @minute and @second: parts of a time value (integer). They are returned only if the precision of the Wikidata value is good enough to define them.\n+*   @isodate: returns a date in the ISO format 1987-08-23 (string). A value is always returned.\n+*   @iso: returns the date and time in the ISO format 1996-03-17T04:15:00+00:00. A value is always returned. \n+*   @urlscheme (\u201chttps\u201d), @netloc (\u201cwww&#46;wikidata.org\u201d) and @urlpath (\u201c/wiki/Q42\u201d) can be used to perform exact matching on parts of URLs.\n+\n+For times and dates, all values are returned in the UTC time zone.\n+\n+For instance, if you want to reconcile people by their birthdates, but you only have the month and day, split the birthday dates into two columns, for month and day. Then reconcile using the [date of birth (P569)](https://www.wikidata.org/wiki/Property:P569) property using the  parameters `P569@month` and `P569@day` with your included columns.\n+\n+## Editing Wikidata with OpenRefine\n+\n+The best resource is the [Editing section](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) on Wikidata.\n+\n+As a user-maintained data source, Wikidata can be edited by anyone. OpenRefine makes it simple to upload information in bulk. You simply need to get your information into the correct format, and ensure that it is new (not redundant to information already on Wikidata) and does not conflict with existing Wikidata information.\n+\n+Wikidata is built by creating entities (such as people, organizations, or places, identified with unique numbers starting with Q), defining properties (unique numbers starting with P), and using properties to define relationships between entities (a Q has a property P, with a value of another Q). \n+\n+For example, you may wish to create entities for local authors and the books they've set in your community. Each writer will be an entity with the occupation [author (Q482980)](https://www.wikidata.org/wiki/Q482980), each book will be an entity with  [literary work (Q7725634)](https://www.wikidata.org/wiki/Q7725634), and books will be related to authors through a property [author (P50)](https://www.wikidata.org/wiki/Property:P50). Books can have places where they are set, with [setting (Q617332)](https://www.wikidata.org/wiki/Q617332). In OpenRefine, you'll need a column of publication titles that you have reconciled (and then created new items where needed); each publication will have one or more locations in a \u201csetting\u201d column, which is also reconciled to municipalities or regions where they exist (and have new items where needed). Then you can add those new relationships to each book, and create new entities for both books and places.\n+\n+There is a list of [tutorials and walkthroughs on Wikidata](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) that will allow you to see the full process. You can save your schemas and drafts in OpenRefine, and your progress stays in draft until you are sure you\u2019re ready to upload it to Wikidata. You can also find information on [how to design a schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) and [how OpenRefine evaluates your proposed edits for issues](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Quality_assurance).\n+\n+Batches of edits to Wikidata that are created with OpenRefine can be undone. You can test out the uploading process by reconciling to several \u201csandbox\u201d entities created specifically for drafting edits and learning about Wikidata:\n+* https://www.wikidata.org/wiki/Q4115189\n+* https://www.wikidata.org/wiki/Q13406268\n+* https://www.wikidata.org/wiki/Q15397819\n+* https://www.wikidata.org/wiki/Q64768399\n+\n+If you upload edits that are redundant (that is, all the statements you want to make have already been made), nothing will happen. If you upload edits that conflict with existing information (such as a different birthdate than one already in Wikidata), it will be added as a second statement. OpenRefine produces no warnings as to whether your data replicates or conflicts existing Wikidata elements. \n+\n+You can use OpenRefine's previews to look at the target Wikidata elements and see what information they already have, and whether the elements' histories have had similar edits reverted in the past. \n+\n+Wikidata is unlike Wikipedia in that there are fewer editors supervising consistency. Many entities' discussion pages are not used; rather, discussion happens on individual users' pages and on project pages. ", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ0NzM1MA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r500447350", "bodyText": "I don't think that alone is sufficient criteria to exclude information.\nAlthough I suppose since someone has to have 50 manual wikidata edits before they can use OpenRefine to edit it, they will likely be familiar with the culture and workflow already.", "author": "allanaaa", "createdAt": "2020-10-06T16:47:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3OTIxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg4MDM1MA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499880350", "bodyText": "I suspect these criteria are subject to change, so probably best to just point to wherever it's defined on Wikidata.", "author": "tfmorris", "createdAt": "2020-10-05T21:23:19Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, \n \n+## Reconciling with Wikidata\n \n+The [Wikidata reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n-## More resources\n+### Language settings\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter WP code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. \n+Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of identifiers. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n+\n+### Property paths\n+\n+This feature is specific to the reconciliation interface for Wikidata. Sometimes, when including extra columns as properties in reconciliation, the relation between the reconciled item and the disambiguating column is not direct - it is not represented as a property itself. For example, take this dataset of cities:\n+\n+|City|Country|\n+|---|---|\n+|Oxford|GB|\n+|Paris|FR|\n+|Geneva|CH|\n+|Cambridge|GB|\n+|Cambridge|US|\n+|London|CA|\n+|London|GB|\n+\n+To fetch the country code from an item representing a city, you need to follow two properties. First, follow [country (P17)](https://www.wikidata.org/wiki/Property:P17) to get to the item for the country in which this city is located, then follow [ISO 3166-1 alpha-2 code (P297)](https://www.wikidata.org/wiki/Property:P297) to get the two-letter code string.\n+\n+This is supported by the reconciliation interface, with a syntax inspired by [SPARQL property paths](https://www.w3.org/TR/sparql11-property-paths/): include the \u201ccountry\u201d column, and for <span class=\"menuItems\">As Property</span> enter the sequence of property identifiers separated by slashes: \u201cP17/P297.\u201d\n+\n+This additional information can allow OpenRefine to disambiguate namesakes, at least to the country level. \u201cCambridge, US\u201d is still ambiguous, so there will be multiple items with a perfect matching score, but \u201cOxford, GB\u201d successfully disambiguates one particular city from other \u201cOxfords.\u201d \n+\n+The endpoint currently supports two property combinators: /, to concatenate two paths as above, and |, to compute the union of the values yielded by two paths. Concatenation / has precedence over disjunction |. The dot character . can be used to denote the empty path. For instance, the following property paths are equivalent:\n+*   P17|P749/P17\n+*   P17|(P749/P17)\n+*   (.|P749)/P17\n+\n+They fetch the [country (P17)](https://www.wikidata.org/wiki/Property:P17) of an item or that of its [parent organization (P749)](https://www.wikidata.org/wiki/Property:P17).\n+\n+### Terms: labels, descriptions, aliases, and sitelinks\n+\n+Entities on Wikidata have what they call \u201cterms:\u201d labels, descriptions, aliases, and sitelinks. Each entity has human-readable preferred names (labels) in one or more languages. Each label comes with a description field, and a space for alternative labels in that language. Entities also can have a link to the related Wikipedia page in one or more langauges. \n+\n+For example, [Q5](https://www.wikidata.org/wiki/Q5) has the English label \u201chuman\u201d and the aliases \u201cperson\u201d and \u201cpeople,\u201d with a description including \u201ccommon name of Homo sapiens;\u201d it also has the Italian label \u201cumano\u201d and the alias \u201cpersona\u201d with a description \u201cspecie a cui appartiene il genere umano.\u201d The English sitelink is \u201chttps://en&#46;wikipedia.org/wiki/Human\u201d but Italian Wikipedia has no equivalent article attached to Q5. Not every language will have values, but these terms can still be useful for reconciling. \n+\n+After reconciliation, you can extend your data with these terms. You can fetch aliases for a given term, or labels in another languages, by using <span class=\"menuItems\">Edit column</span> \u2192 <span class=\"menuItems\">Add columns from reconciled values....</span>. \n+\n+You can refer to a term in a specific language by manually entering in a three-letter code. The first letter is the term (\u201cL\u201d for label, \u201cD\u201d for description, \u201cA\u201d for aliases, \u201cS\u201d for sitelink) and the next two are the language code. For example:\n+\n+*   `Len` for Label in English\n+*   `Dfi` for Description in Finnish\n+*   `Apt` for Alias in Portuguese\n+*   `Sde` for Sitelink in German\n+\n+Enter in the three-letter code manually in the <span class=\"menuItems\">Add Property</span> field. You can manually enter as many term/language combinations as you require. \n+\n+No language fall-back is performed when retrieving the values.\n+\n+### Comparing values\n+\n+By default, data in OpenRefine and entities in Wikidata are compared by string fuzzy-matching. There are some exceptions to this:\n+*   If you are [reconciling by unique identifiers](#reconciling-with-unique-identifiers), then it confirms the exact strings without matching.\n+*   If the values are integers, exact equality between integers is used.\n+*   If the values are floating point numbers, the score is 100 if they are equal and decreases towards 0 as their absolute difference increases.\n+*   If the values are coordinates (specified in the \u201clat,lng\u201d format on OpenRefine's side), then the matching score is 100 when they are equal and decreases as their distance increases. Currently a score of 0 is reached when the points are 1 kilometre away from each other.\n+\n+Sometimes, we need a more specific matching on sub-parts of these values. It is possible to select these parts for matching by appending a modifier at the end of the property path:\n+*   @lat and @lng: latitude and longitude of geographical coordinates (float)\n+*   @year, @month, @day, @hour, @minute and @second: parts of a time value (integer). They are returned only if the precision of the Wikidata value is good enough to define them.\n+*   @isodate: returns a date in the ISO format 1987-08-23 (string). A value is always returned.\n+*   @iso: returns the date and time in the ISO format 1996-03-17T04:15:00+00:00. A value is always returned. \n+*   @urlscheme (\u201chttps\u201d), @netloc (\u201cwww&#46;wikidata.org\u201d) and @urlpath (\u201c/wiki/Q42\u201d) can be used to perform exact matching on parts of URLs.\n+\n+For times and dates, all values are returned in the UTC time zone.\n+\n+For instance, if you want to reconcile people by their birthdates, but you only have the month and day, split the birthday dates into two columns, for month and day. Then reconcile using the [date of birth (P569)](https://www.wikidata.org/wiki/Property:P569) property using the  parameters `P569@month` and `P569@day` with your included columns.\n+\n+## Editing Wikidata with OpenRefine\n+\n+The best resource is the [Editing section](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) on Wikidata.\n+\n+As a user-maintained data source, Wikidata can be edited by anyone. OpenRefine makes it simple to upload information in bulk. You simply need to get your information into the correct format, and ensure that it is new (not redundant to information already on Wikidata) and does not conflict with existing Wikidata information.\n+\n+Wikidata is built by creating entities (such as people, organizations, or places, identified with unique numbers starting with Q), defining properties (unique numbers starting with P), and using properties to define relationships between entities (a Q has a property P, with a value of another Q). \n+\n+For example, you may wish to create entities for local authors and the books they've set in your community. Each writer will be an entity with the occupation [author (Q482980)](https://www.wikidata.org/wiki/Q482980), each book will be an entity with  [literary work (Q7725634)](https://www.wikidata.org/wiki/Q7725634), and books will be related to authors through a property [author (P50)](https://www.wikidata.org/wiki/Property:P50). Books can have places where they are set, with [setting (Q617332)](https://www.wikidata.org/wiki/Q617332). In OpenRefine, you'll need a column of publication titles that you have reconciled (and then created new items where needed); each publication will have one or more locations in a \u201csetting\u201d column, which is also reconciled to municipalities or regions where they exist (and have new items where needed). Then you can add those new relationships to each book, and create new entities for both books and places.\n+\n+There is a list of [tutorials and walkthroughs on Wikidata](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) that will allow you to see the full process. You can save your schemas and drafts in OpenRefine, and your progress stays in draft until you are sure you\u2019re ready to upload it to Wikidata. You can also find information on [how to design a schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) and [how OpenRefine evaluates your proposed edits for issues](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Quality_assurance).\n+\n+Batches of edits to Wikidata that are created with OpenRefine can be undone. You can test out the uploading process by reconciling to several \u201csandbox\u201d entities created specifically for drafting edits and learning about Wikidata:\n+* https://www.wikidata.org/wiki/Q4115189\n+* https://www.wikidata.org/wiki/Q13406268\n+* https://www.wikidata.org/wiki/Q15397819\n+* https://www.wikidata.org/wiki/Q64768399\n+\n+If you upload edits that are redundant (that is, all the statements you want to make have already been made), nothing will happen. If you upload edits that conflict with existing information (such as a different birthdate than one already in Wikidata), it will be added as a second statement. OpenRefine produces no warnings as to whether your data replicates or conflicts existing Wikidata elements. \n+\n+You can use OpenRefine's previews to look at the target Wikidata elements and see what information they already have, and whether the elements' histories have had similar edits reverted in the past. \n+\n+Wikidata is unlike Wikipedia in that there are fewer editors supervising consistency. Many entities' discussion pages are not used; rather, discussion happens on individual users' pages and on project pages. \n+\n+### Edit Wikidata schema\n+\n+The best resource is the [Schema alignment page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) on Wikidata.\n+\n+A [schema](https://en.wikipedia.org/wiki/Database_schema) is the plan for how to structure information in a database. In OpenRefine, the schema operates as a template for how Wikidata edits should be applied: how to translate your tabular data into statements. With a schema, you can:\n+*   preview the Wikidata edits and inspect them manually;\n+*   analyze and fix any issues raised automatically by the tool;\n+*   upload your changes to Wikidata by logging in with your own account;\n+*   export the changes to the QuickStatements v1 format.\n+\n+For example, if your dataset has columns for authors, publication titles, and publication years, your schema can be conceptualized as: [publication title] has the author [author], and was published in [publication year]. To establish these facts, you need to establish one or more columns as \u201citems,\u201d for which you will make \u201cstatements\u201d that relate them to other columns. \n+\n+You can export any schema you create, and import an existing schema for use with a new dataset. This can help you work in batches on a large amount of data with a minimum of redundant labor.\n+\n+Once you select <span class=\"menuItems\">Edit Wikidata schema</span> under the <span class=\"menuItems\">Extensions</span> dropdown menu, your project interface will change. You\u2019ll see new tabs added to the right of \u201cX rows/records\" in the grid header: \u201cSchema,\u201d \u201cIssues,\u201d and \u201cPreview.\u201d You can now flip between the tabular grid format of your dataset, or the screens that allow you to prepare data for uploading. \n+\n+OpenRefine presents you with an easy visual way to map out the relationships in your dataset. Each of the columns of your project will appear at the top of the sceren, and you can simply drag and drop them into the appropriate slots. To get start, select one column as an item. \n+\n+![A screenshot of the schema construction window in OpenRefine.](/img/wikidata-schema.png)\n+\n+There is [a Wikidata tutorial on how OpenRefine handles Wikidata schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Tutorials/Basic_editing).\n+\n+#### Editing terms with your schema\n+\n+You may wish to include edits to [terms](#terms-labels-descriptions-aliases-and-sitelinks) (labels, aliases, descriptions, or sitelinks) as well as establishing relationships between entities. \n+\n+For example, you may wish to upload pseudonyms, pen names, maiden or married names for historical authors. You can do so by putting the preferred names in one column of your dataset and alternative names in another column. In the schema interface, add an item for the preferred values, then click \u201cAdd term\u201d on the right-hand side of the screen. Select \u201cAlias\u201d from the dropdown, enter in \u201cEnglish\u201d in the language field, and drop your alternative names column into the space. \n+\n+Terms must always have a language selected. You cannot edit multiple languages at once, unless you drop a suitable column into the \u201clanguage\u201d field. For example, if you had translated publication titles, with data in the format\n+\n+|English title|Translated title|Translation language|\n+|---|---|---|\n+|Possession|Besessen|German|\n+||\u041e\u0431\u043b\u0430\u0434\u0430\u0442\u044c|Russian|\n+|Disgrace|Disgr\u00e2ce|French|\n+||Vergogna|Italian|\n+|Wolf Hall|En la corte del lobo|Spanish|\n+||\u30a6\u30eb\u30d5\u30fb\u30db\u30fc\u30eb|Japanese|\n+\n+You could upload translated titles to \u201cLabel\u201d with the language from \u201cTranslation language.\u201d You may wish to fetch the two-letter language code and use that instead for better language matches.\n+\n+### Manage Wikidata account\n+\n+To edit Wikidata directly from OpenRefine, you must have a Wikidata account and log in with it in OpenRefine. OpenRefine can only upload edits with Wikidata user accounts that are \u201c[autoconfirmed](https://www.wikidata.org/wiki/Wikidata:Autoconfirmed_users)\u201d - that is, accounts that have more than 50 edits and have existed for longer than four days. ", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ0NDUxMg==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r500444512", "bodyText": "Not since 2013. But I can add in \"as of the time of writing.\"", "author": "allanaaa", "createdAt": "2020-10-06T16:42:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg4MDM1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg4MDc5NQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499880795", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For security reasons, you may not wish to use your usual account authorization with OpenRefine. Wikidata allows you to set special passwords to access your account through software. You can find this setting for your account at [https://www.wikidata.org/wiki/Special:BotPasswords](https://www.wikidata.org/wiki/Special:BotPasswords) once logged in. Creating bot access will prompt you for a unique name, and allow you to enable the following required settings:\n          \n          \n            \n            For security reasons, it is suggested that you not use your main account authorization with OpenRefine. Wikidata allows you to set special passwords to access your account through software. You can find this setting for your account at [https://www.wikidata.org/wiki/Special:BotPasswords](https://www.wikidata.org/wiki/Special:BotPasswords) once logged in. Creating bot access will prompt you for a unique name, and allow you to enable the following required settings:", "author": "tfmorris", "createdAt": "2020-10-05T21:24:16Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, \n \n+## Reconciling with Wikidata\n \n+The [Wikidata reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n-## More resources\n+### Language settings\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter WP code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. \n+Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of identifiers. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n+\n+### Property paths\n+\n+This feature is specific to the reconciliation interface for Wikidata. Sometimes, when including extra columns as properties in reconciliation, the relation between the reconciled item and the disambiguating column is not direct - it is not represented as a property itself. For example, take this dataset of cities:\n+\n+|City|Country|\n+|---|---|\n+|Oxford|GB|\n+|Paris|FR|\n+|Geneva|CH|\n+|Cambridge|GB|\n+|Cambridge|US|\n+|London|CA|\n+|London|GB|\n+\n+To fetch the country code from an item representing a city, you need to follow two properties. First, follow [country (P17)](https://www.wikidata.org/wiki/Property:P17) to get to the item for the country in which this city is located, then follow [ISO 3166-1 alpha-2 code (P297)](https://www.wikidata.org/wiki/Property:P297) to get the two-letter code string.\n+\n+This is supported by the reconciliation interface, with a syntax inspired by [SPARQL property paths](https://www.w3.org/TR/sparql11-property-paths/): include the \u201ccountry\u201d column, and for <span class=\"menuItems\">As Property</span> enter the sequence of property identifiers separated by slashes: \u201cP17/P297.\u201d\n+\n+This additional information can allow OpenRefine to disambiguate namesakes, at least to the country level. \u201cCambridge, US\u201d is still ambiguous, so there will be multiple items with a perfect matching score, but \u201cOxford, GB\u201d successfully disambiguates one particular city from other \u201cOxfords.\u201d \n+\n+The endpoint currently supports two property combinators: /, to concatenate two paths as above, and |, to compute the union of the values yielded by two paths. Concatenation / has precedence over disjunction |. The dot character . can be used to denote the empty path. For instance, the following property paths are equivalent:\n+*   P17|P749/P17\n+*   P17|(P749/P17)\n+*   (.|P749)/P17\n+\n+They fetch the [country (P17)](https://www.wikidata.org/wiki/Property:P17) of an item or that of its [parent organization (P749)](https://www.wikidata.org/wiki/Property:P17).\n+\n+### Terms: labels, descriptions, aliases, and sitelinks\n+\n+Entities on Wikidata have what they call \u201cterms:\u201d labels, descriptions, aliases, and sitelinks. Each entity has human-readable preferred names (labels) in one or more languages. Each label comes with a description field, and a space for alternative labels in that language. Entities also can have a link to the related Wikipedia page in one or more langauges. \n+\n+For example, [Q5](https://www.wikidata.org/wiki/Q5) has the English label \u201chuman\u201d and the aliases \u201cperson\u201d and \u201cpeople,\u201d with a description including \u201ccommon name of Homo sapiens;\u201d it also has the Italian label \u201cumano\u201d and the alias \u201cpersona\u201d with a description \u201cspecie a cui appartiene il genere umano.\u201d The English sitelink is \u201chttps://en&#46;wikipedia.org/wiki/Human\u201d but Italian Wikipedia has no equivalent article attached to Q5. Not every language will have values, but these terms can still be useful for reconciling. \n+\n+After reconciliation, you can extend your data with these terms. You can fetch aliases for a given term, or labels in another languages, by using <span class=\"menuItems\">Edit column</span> \u2192 <span class=\"menuItems\">Add columns from reconciled values....</span>. \n+\n+You can refer to a term in a specific language by manually entering in a three-letter code. The first letter is the term (\u201cL\u201d for label, \u201cD\u201d for description, \u201cA\u201d for aliases, \u201cS\u201d for sitelink) and the next two are the language code. For example:\n+\n+*   `Len` for Label in English\n+*   `Dfi` for Description in Finnish\n+*   `Apt` for Alias in Portuguese\n+*   `Sde` for Sitelink in German\n+\n+Enter in the three-letter code manually in the <span class=\"menuItems\">Add Property</span> field. You can manually enter as many term/language combinations as you require. \n+\n+No language fall-back is performed when retrieving the values.\n+\n+### Comparing values\n+\n+By default, data in OpenRefine and entities in Wikidata are compared by string fuzzy-matching. There are some exceptions to this:\n+*   If you are [reconciling by unique identifiers](#reconciling-with-unique-identifiers), then it confirms the exact strings without matching.\n+*   If the values are integers, exact equality between integers is used.\n+*   If the values are floating point numbers, the score is 100 if they are equal and decreases towards 0 as their absolute difference increases.\n+*   If the values are coordinates (specified in the \u201clat,lng\u201d format on OpenRefine's side), then the matching score is 100 when they are equal and decreases as their distance increases. Currently a score of 0 is reached when the points are 1 kilometre away from each other.\n+\n+Sometimes, we need a more specific matching on sub-parts of these values. It is possible to select these parts for matching by appending a modifier at the end of the property path:\n+*   @lat and @lng: latitude and longitude of geographical coordinates (float)\n+*   @year, @month, @day, @hour, @minute and @second: parts of a time value (integer). They are returned only if the precision of the Wikidata value is good enough to define them.\n+*   @isodate: returns a date in the ISO format 1987-08-23 (string). A value is always returned.\n+*   @iso: returns the date and time in the ISO format 1996-03-17T04:15:00+00:00. A value is always returned. \n+*   @urlscheme (\u201chttps\u201d), @netloc (\u201cwww&#46;wikidata.org\u201d) and @urlpath (\u201c/wiki/Q42\u201d) can be used to perform exact matching on parts of URLs.\n+\n+For times and dates, all values are returned in the UTC time zone.\n+\n+For instance, if you want to reconcile people by their birthdates, but you only have the month and day, split the birthday dates into two columns, for month and day. Then reconcile using the [date of birth (P569)](https://www.wikidata.org/wiki/Property:P569) property using the  parameters `P569@month` and `P569@day` with your included columns.\n+\n+## Editing Wikidata with OpenRefine\n+\n+The best resource is the [Editing section](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) on Wikidata.\n+\n+As a user-maintained data source, Wikidata can be edited by anyone. OpenRefine makes it simple to upload information in bulk. You simply need to get your information into the correct format, and ensure that it is new (not redundant to information already on Wikidata) and does not conflict with existing Wikidata information.\n+\n+Wikidata is built by creating entities (such as people, organizations, or places, identified with unique numbers starting with Q), defining properties (unique numbers starting with P), and using properties to define relationships between entities (a Q has a property P, with a value of another Q). \n+\n+For example, you may wish to create entities for local authors and the books they've set in your community. Each writer will be an entity with the occupation [author (Q482980)](https://www.wikidata.org/wiki/Q482980), each book will be an entity with  [literary work (Q7725634)](https://www.wikidata.org/wiki/Q7725634), and books will be related to authors through a property [author (P50)](https://www.wikidata.org/wiki/Property:P50). Books can have places where they are set, with [setting (Q617332)](https://www.wikidata.org/wiki/Q617332). In OpenRefine, you'll need a column of publication titles that you have reconciled (and then created new items where needed); each publication will have one or more locations in a \u201csetting\u201d column, which is also reconciled to municipalities or regions where they exist (and have new items where needed). Then you can add those new relationships to each book, and create new entities for both books and places.\n+\n+There is a list of [tutorials and walkthroughs on Wikidata](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) that will allow you to see the full process. You can save your schemas and drafts in OpenRefine, and your progress stays in draft until you are sure you\u2019re ready to upload it to Wikidata. You can also find information on [how to design a schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) and [how OpenRefine evaluates your proposed edits for issues](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Quality_assurance).\n+\n+Batches of edits to Wikidata that are created with OpenRefine can be undone. You can test out the uploading process by reconciling to several \u201csandbox\u201d entities created specifically for drafting edits and learning about Wikidata:\n+* https://www.wikidata.org/wiki/Q4115189\n+* https://www.wikidata.org/wiki/Q13406268\n+* https://www.wikidata.org/wiki/Q15397819\n+* https://www.wikidata.org/wiki/Q64768399\n+\n+If you upload edits that are redundant (that is, all the statements you want to make have already been made), nothing will happen. If you upload edits that conflict with existing information (such as a different birthdate than one already in Wikidata), it will be added as a second statement. OpenRefine produces no warnings as to whether your data replicates or conflicts existing Wikidata elements. \n+\n+You can use OpenRefine's previews to look at the target Wikidata elements and see what information they already have, and whether the elements' histories have had similar edits reverted in the past. \n+\n+Wikidata is unlike Wikipedia in that there are fewer editors supervising consistency. Many entities' discussion pages are not used; rather, discussion happens on individual users' pages and on project pages. \n+\n+### Edit Wikidata schema\n+\n+The best resource is the [Schema alignment page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) on Wikidata.\n+\n+A [schema](https://en.wikipedia.org/wiki/Database_schema) is the plan for how to structure information in a database. In OpenRefine, the schema operates as a template for how Wikidata edits should be applied: how to translate your tabular data into statements. With a schema, you can:\n+*   preview the Wikidata edits and inspect them manually;\n+*   analyze and fix any issues raised automatically by the tool;\n+*   upload your changes to Wikidata by logging in with your own account;\n+*   export the changes to the QuickStatements v1 format.\n+\n+For example, if your dataset has columns for authors, publication titles, and publication years, your schema can be conceptualized as: [publication title] has the author [author], and was published in [publication year]. To establish these facts, you need to establish one or more columns as \u201citems,\u201d for which you will make \u201cstatements\u201d that relate them to other columns. \n+\n+You can export any schema you create, and import an existing schema for use with a new dataset. This can help you work in batches on a large amount of data with a minimum of redundant labor.\n+\n+Once you select <span class=\"menuItems\">Edit Wikidata schema</span> under the <span class=\"menuItems\">Extensions</span> dropdown menu, your project interface will change. You\u2019ll see new tabs added to the right of \u201cX rows/records\" in the grid header: \u201cSchema,\u201d \u201cIssues,\u201d and \u201cPreview.\u201d You can now flip between the tabular grid format of your dataset, or the screens that allow you to prepare data for uploading. \n+\n+OpenRefine presents you with an easy visual way to map out the relationships in your dataset. Each of the columns of your project will appear at the top of the sceren, and you can simply drag and drop them into the appropriate slots. To get start, select one column as an item. \n+\n+![A screenshot of the schema construction window in OpenRefine.](/img/wikidata-schema.png)\n+\n+There is [a Wikidata tutorial on how OpenRefine handles Wikidata schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Tutorials/Basic_editing).\n+\n+#### Editing terms with your schema\n+\n+You may wish to include edits to [terms](#terms-labels-descriptions-aliases-and-sitelinks) (labels, aliases, descriptions, or sitelinks) as well as establishing relationships between entities. \n+\n+For example, you may wish to upload pseudonyms, pen names, maiden or married names for historical authors. You can do so by putting the preferred names in one column of your dataset and alternative names in another column. In the schema interface, add an item for the preferred values, then click \u201cAdd term\u201d on the right-hand side of the screen. Select \u201cAlias\u201d from the dropdown, enter in \u201cEnglish\u201d in the language field, and drop your alternative names column into the space. \n+\n+Terms must always have a language selected. You cannot edit multiple languages at once, unless you drop a suitable column into the \u201clanguage\u201d field. For example, if you had translated publication titles, with data in the format\n+\n+|English title|Translated title|Translation language|\n+|---|---|---|\n+|Possession|Besessen|German|\n+||\u041e\u0431\u043b\u0430\u0434\u0430\u0442\u044c|Russian|\n+|Disgrace|Disgr\u00e2ce|French|\n+||Vergogna|Italian|\n+|Wolf Hall|En la corte del lobo|Spanish|\n+||\u30a6\u30eb\u30d5\u30fb\u30db\u30fc\u30eb|Japanese|\n+\n+You could upload translated titles to \u201cLabel\u201d with the language from \u201cTranslation language.\u201d You may wish to fetch the two-letter language code and use that instead for better language matches.\n+\n+### Manage Wikidata account\n+\n+To edit Wikidata directly from OpenRefine, you must have a Wikidata account and log in with it in OpenRefine. OpenRefine can only upload edits with Wikidata user accounts that are \u201c[autoconfirmed](https://www.wikidata.org/wiki/Wikidata:Autoconfirmed_users)\u201d - that is, accounts that have more than 50 edits and have existed for longer than four days. \n+\n+Use the Extensions menu to select <span class=\"menuItems\">Manage Wikidata account</span> and you will be presented with the following window:\n+\n+![The Wikidata authorization window in OpenRefine.](/img/wikidata-login.png)\n+\n+For security reasons, you may not wish to use your usual account authorization with OpenRefine. Wikidata allows you to set special passwords to access your account through software. You can find this setting for your account at [https://www.wikidata.org/wiki/Special:BotPasswords](https://www.wikidata.org/wiki/Special:BotPasswords) once logged in. Creating bot access will prompt you for a unique name, and allow you to enable the following required settings:", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg4MjA3MA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r499882070", "bodyText": "All of the QuickStatements specific stuff can be removed. The relevant OpenRefine piece is that we can generate data for it and it's in \"v1\" format.", "author": "tfmorris", "createdAt": "2020-10-05T21:27:21Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,240 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine includes powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to upload your cleaned dataset to Wikidata, you will need to register an account, and authorize OpenRefine with that account. \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This has tutorials, guidelines on editing, and spaces for discussion and help.\n \n-## Features\n+Everything true about the way OpenRefine works with Wikidata is also true about any other Wikibase. Anything built on the same Wikibase platform will offer a reconciliation endpoint that works the same. To find a Wikibase reconciliation URL, \n \n+## Reconciling with Wikidata\n \n+The [Wikidata reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+You can find the documentation and further resources [here](https://wikidata.reconci.link/).\n \n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n-## More resources\n+### Language settings\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter WP code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is replaced by your language code.\n+\n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. \n+Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of identifiers. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify.\n+\n+Sometimes the same external identifier is assigned to different Wikidata items (in which case the conflict will be flagged in Wikidata as a uniqueness constraint violation). In this case, all of the matching items are returned as candidates, but are not automatically matched.\n+\n+### Property paths\n+\n+This feature is specific to the reconciliation interface for Wikidata. Sometimes, when including extra columns as properties in reconciliation, the relation between the reconciled item and the disambiguating column is not direct - it is not represented as a property itself. For example, take this dataset of cities:\n+\n+|City|Country|\n+|---|---|\n+|Oxford|GB|\n+|Paris|FR|\n+|Geneva|CH|\n+|Cambridge|GB|\n+|Cambridge|US|\n+|London|CA|\n+|London|GB|\n+\n+To fetch the country code from an item representing a city, you need to follow two properties. First, follow [country (P17)](https://www.wikidata.org/wiki/Property:P17) to get to the item for the country in which this city is located, then follow [ISO 3166-1 alpha-2 code (P297)](https://www.wikidata.org/wiki/Property:P297) to get the two-letter code string.\n+\n+This is supported by the reconciliation interface, with a syntax inspired by [SPARQL property paths](https://www.w3.org/TR/sparql11-property-paths/): include the \u201ccountry\u201d column, and for <span class=\"menuItems\">As Property</span> enter the sequence of property identifiers separated by slashes: \u201cP17/P297.\u201d\n+\n+This additional information can allow OpenRefine to disambiguate namesakes, at least to the country level. \u201cCambridge, US\u201d is still ambiguous, so there will be multiple items with a perfect matching score, but \u201cOxford, GB\u201d successfully disambiguates one particular city from other \u201cOxfords.\u201d \n+\n+The endpoint currently supports two property combinators: /, to concatenate two paths as above, and |, to compute the union of the values yielded by two paths. Concatenation / has precedence over disjunction |. The dot character . can be used to denote the empty path. For instance, the following property paths are equivalent:\n+*   P17|P749/P17\n+*   P17|(P749/P17)\n+*   (.|P749)/P17\n+\n+They fetch the [country (P17)](https://www.wikidata.org/wiki/Property:P17) of an item or that of its [parent organization (P749)](https://www.wikidata.org/wiki/Property:P17).\n+\n+### Terms: labels, descriptions, aliases, and sitelinks\n+\n+Entities on Wikidata have what they call \u201cterms:\u201d labels, descriptions, aliases, and sitelinks. Each entity has human-readable preferred names (labels) in one or more languages. Each label comes with a description field, and a space for alternative labels in that language. Entities also can have a link to the related Wikipedia page in one or more langauges. \n+\n+For example, [Q5](https://www.wikidata.org/wiki/Q5) has the English label \u201chuman\u201d and the aliases \u201cperson\u201d and \u201cpeople,\u201d with a description including \u201ccommon name of Homo sapiens;\u201d it also has the Italian label \u201cumano\u201d and the alias \u201cpersona\u201d with a description \u201cspecie a cui appartiene il genere umano.\u201d The English sitelink is \u201chttps://en&#46;wikipedia.org/wiki/Human\u201d but Italian Wikipedia has no equivalent article attached to Q5. Not every language will have values, but these terms can still be useful for reconciling. \n+\n+After reconciliation, you can extend your data with these terms. You can fetch aliases for a given term, or labels in another languages, by using <span class=\"menuItems\">Edit column</span> \u2192 <span class=\"menuItems\">Add columns from reconciled values....</span>. \n+\n+You can refer to a term in a specific language by manually entering in a three-letter code. The first letter is the term (\u201cL\u201d for label, \u201cD\u201d for description, \u201cA\u201d for aliases, \u201cS\u201d for sitelink) and the next two are the language code. For example:\n+\n+*   `Len` for Label in English\n+*   `Dfi` for Description in Finnish\n+*   `Apt` for Alias in Portuguese\n+*   `Sde` for Sitelink in German\n+\n+Enter in the three-letter code manually in the <span class=\"menuItems\">Add Property</span> field. You can manually enter as many term/language combinations as you require. \n+\n+No language fall-back is performed when retrieving the values.\n+\n+### Comparing values\n+\n+By default, data in OpenRefine and entities in Wikidata are compared by string fuzzy-matching. There are some exceptions to this:\n+*   If you are [reconciling by unique identifiers](#reconciling-with-unique-identifiers), then it confirms the exact strings without matching.\n+*   If the values are integers, exact equality between integers is used.\n+*   If the values are floating point numbers, the score is 100 if they are equal and decreases towards 0 as their absolute difference increases.\n+*   If the values are coordinates (specified in the \u201clat,lng\u201d format on OpenRefine's side), then the matching score is 100 when they are equal and decreases as their distance increases. Currently a score of 0 is reached when the points are 1 kilometre away from each other.\n+\n+Sometimes, we need a more specific matching on sub-parts of these values. It is possible to select these parts for matching by appending a modifier at the end of the property path:\n+*   @lat and @lng: latitude and longitude of geographical coordinates (float)\n+*   @year, @month, @day, @hour, @minute and @second: parts of a time value (integer). They are returned only if the precision of the Wikidata value is good enough to define them.\n+*   @isodate: returns a date in the ISO format 1987-08-23 (string). A value is always returned.\n+*   @iso: returns the date and time in the ISO format 1996-03-17T04:15:00+00:00. A value is always returned. \n+*   @urlscheme (\u201chttps\u201d), @netloc (\u201cwww&#46;wikidata.org\u201d) and @urlpath (\u201c/wiki/Q42\u201d) can be used to perform exact matching on parts of URLs.\n+\n+For times and dates, all values are returned in the UTC time zone.\n+\n+For instance, if you want to reconcile people by their birthdates, but you only have the month and day, split the birthday dates into two columns, for month and day. Then reconcile using the [date of birth (P569)](https://www.wikidata.org/wiki/Property:P569) property using the  parameters `P569@month` and `P569@day` with your included columns.\n+\n+## Editing Wikidata with OpenRefine\n+\n+The best resource is the [Editing section](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) on Wikidata.\n+\n+As a user-maintained data source, Wikidata can be edited by anyone. OpenRefine makes it simple to upload information in bulk. You simply need to get your information into the correct format, and ensure that it is new (not redundant to information already on Wikidata) and does not conflict with existing Wikidata information.\n+\n+Wikidata is built by creating entities (such as people, organizations, or places, identified with unique numbers starting with Q), defining properties (unique numbers starting with P), and using properties to define relationships between entities (a Q has a property P, with a value of another Q). \n+\n+For example, you may wish to create entities for local authors and the books they've set in your community. Each writer will be an entity with the occupation [author (Q482980)](https://www.wikidata.org/wiki/Q482980), each book will be an entity with  [literary work (Q7725634)](https://www.wikidata.org/wiki/Q7725634), and books will be related to authors through a property [author (P50)](https://www.wikidata.org/wiki/Property:P50). Books can have places where they are set, with [setting (Q617332)](https://www.wikidata.org/wiki/Q617332). In OpenRefine, you'll need a column of publication titles that you have reconciled (and then created new items where needed); each publication will have one or more locations in a \u201csetting\u201d column, which is also reconciled to municipalities or regions where they exist (and have new items where needed). Then you can add those new relationships to each book, and create new entities for both books and places.\n+\n+There is a list of [tutorials and walkthroughs on Wikidata](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) that will allow you to see the full process. You can save your schemas and drafts in OpenRefine, and your progress stays in draft until you are sure you\u2019re ready to upload it to Wikidata. You can also find information on [how to design a schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) and [how OpenRefine evaluates your proposed edits for issues](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Quality_assurance).\n+\n+Batches of edits to Wikidata that are created with OpenRefine can be undone. You can test out the uploading process by reconciling to several \u201csandbox\u201d entities created specifically for drafting edits and learning about Wikidata:\n+* https://www.wikidata.org/wiki/Q4115189\n+* https://www.wikidata.org/wiki/Q13406268\n+* https://www.wikidata.org/wiki/Q15397819\n+* https://www.wikidata.org/wiki/Q64768399\n+\n+If you upload edits that are redundant (that is, all the statements you want to make have already been made), nothing will happen. If you upload edits that conflict with existing information (such as a different birthdate than one already in Wikidata), it will be added as a second statement. OpenRefine produces no warnings as to whether your data replicates or conflicts existing Wikidata elements. \n+\n+You can use OpenRefine's previews to look at the target Wikidata elements and see what information they already have, and whether the elements' histories have had similar edits reverted in the past. \n+\n+Wikidata is unlike Wikipedia in that there are fewer editors supervising consistency. Many entities' discussion pages are not used; rather, discussion happens on individual users' pages and on project pages. \n+\n+### Edit Wikidata schema\n+\n+The best resource is the [Schema alignment page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) on Wikidata.\n+\n+A [schema](https://en.wikipedia.org/wiki/Database_schema) is the plan for how to structure information in a database. In OpenRefine, the schema operates as a template for how Wikidata edits should be applied: how to translate your tabular data into statements. With a schema, you can:\n+*   preview the Wikidata edits and inspect them manually;\n+*   analyze and fix any issues raised automatically by the tool;\n+*   upload your changes to Wikidata by logging in with your own account;\n+*   export the changes to the QuickStatements v1 format.\n+\n+For example, if your dataset has columns for authors, publication titles, and publication years, your schema can be conceptualized as: [publication title] has the author [author], and was published in [publication year]. To establish these facts, you need to establish one or more columns as \u201citems,\u201d for which you will make \u201cstatements\u201d that relate them to other columns. \n+\n+You can export any schema you create, and import an existing schema for use with a new dataset. This can help you work in batches on a large amount of data with a minimum of redundant labor.\n+\n+Once you select <span class=\"menuItems\">Edit Wikidata schema</span> under the <span class=\"menuItems\">Extensions</span> dropdown menu, your project interface will change. You\u2019ll see new tabs added to the right of \u201cX rows/records\" in the grid header: \u201cSchema,\u201d \u201cIssues,\u201d and \u201cPreview.\u201d You can now flip between the tabular grid format of your dataset, or the screens that allow you to prepare data for uploading. \n+\n+OpenRefine presents you with an easy visual way to map out the relationships in your dataset. Each of the columns of your project will appear at the top of the sceren, and you can simply drag and drop them into the appropriate slots. To get start, select one column as an item. \n+\n+![A screenshot of the schema construction window in OpenRefine.](/img/wikidata-schema.png)\n+\n+There is [a Wikidata tutorial on how OpenRefine handles Wikidata schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Tutorials/Basic_editing).\n+\n+#### Editing terms with your schema\n+\n+You may wish to include edits to [terms](#terms-labels-descriptions-aliases-and-sitelinks) (labels, aliases, descriptions, or sitelinks) as well as establishing relationships between entities. \n+\n+For example, you may wish to upload pseudonyms, pen names, maiden or married names for historical authors. You can do so by putting the preferred names in one column of your dataset and alternative names in another column. In the schema interface, add an item for the preferred values, then click \u201cAdd term\u201d on the right-hand side of the screen. Select \u201cAlias\u201d from the dropdown, enter in \u201cEnglish\u201d in the language field, and drop your alternative names column into the space. \n+\n+Terms must always have a language selected. You cannot edit multiple languages at once, unless you drop a suitable column into the \u201clanguage\u201d field. For example, if you had translated publication titles, with data in the format\n+\n+|English title|Translated title|Translation language|\n+|---|---|---|\n+|Possession|Besessen|German|\n+||\u041e\u0431\u043b\u0430\u0434\u0430\u0442\u044c|Russian|\n+|Disgrace|Disgr\u00e2ce|French|\n+||Vergogna|Italian|\n+|Wolf Hall|En la corte del lobo|Spanish|\n+||\u30a6\u30eb\u30d5\u30fb\u30db\u30fc\u30eb|Japanese|\n+\n+You could upload translated titles to \u201cLabel\u201d with the language from \u201cTranslation language.\u201d You may wish to fetch the two-letter language code and use that instead for better language matches.\n+\n+### Manage Wikidata account\n+\n+To edit Wikidata directly from OpenRefine, you must have a Wikidata account and log in with it in OpenRefine. OpenRefine can only upload edits with Wikidata user accounts that are \u201c[autoconfirmed](https://www.wikidata.org/wiki/Wikidata:Autoconfirmed_users)\u201d - that is, accounts that have more than 50 edits and have existed for longer than four days. \n+\n+Use the Extensions menu to select <span class=\"menuItems\">Manage Wikidata account</span> and you will be presented with the following window:\n+\n+![The Wikidata authorization window in OpenRefine.](/img/wikidata-login.png)\n+\n+For security reasons, you may not wish to use your usual account authorization with OpenRefine. Wikidata allows you to set special passwords to access your account through software. You can find this setting for your account at [https://www.wikidata.org/wiki/Special:BotPasswords](https://www.wikidata.org/wiki/Special:BotPasswords) once logged in. Creating bot access will prompt you for a unique name, and allow you to enable the following required settings:\n+* High-volume editing\n+* Edit existing pages\n+* Create, edit, and move pages\n+\n+It will then generate a username (in the form of \u201cyourwikidatausername@yourbotname\u201d) and password for you to use with OpenRefine.\n+\n+If your account or your bot is not properly authorized, OpenRefine will not display a warning or error when you try to upload your edits.\n+\n+You may also wish to store your unencrypted username and password in OpenRefine, saved locally to your computer. For security reasons, you may wish to leave this box unchecked. You can save your OpenRefine-specific bot password in your browser or with a password management tool. \n+\n+### Import and export schema\n+\n+You can save time on repetitive processes by defining a schema on one project, then exporting it and importing for use on new datasets in the future. Or you and your colleagues can share a schema with each other to coordinate your work. \n+\n+You can export a schema from a project using <span class=\"menuItems\">Export</span> \u2192 <span class=\"menuItems\">Wikidata schema</span>, or by using <span class=\"menuItems\">Extensions</span> \u2192 <span class=\"menuItems\">Export schema</span>. OpenRefine will generate a JSON file for you to save and share. You may experience issues with pop-up windows in your browser: consider allowing pop-ups for the OpenRefine URL (`127.0.0.1`) from now on.\n+\n+You can import a schema using <span class=\"menuItems\">Extensions</span> \u2192 <span class=\"menuItems\">Import schema</span>. You can upload a JSON file, or paste JSON statements directly into a field in the window. An imported schema will look for columns with the same names, and you will see an error message if your project doesn't contain matching columns.\n+\n+### Upload edits to Wikidata\n+\n+The best resource is the [Uploading page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Uploading) on Wikidata.\n+\n+There are two menu option for applying your edits to Wikidata. Under <span class=\"menuItems\">Export</span> you will see <span class=\"menuItems\">Wikidata edits...</span> and under <span class=\"menuItems\">Extensions</span> you will see <span class=\"menuItems\">Upload edits to Wikidata</span>. Both will bring up the same window for you to [log in with your Wikidata account](#manage-wikidata-account). \n+\n+Once you are authorized, you will see a window with any outstanding issues. You can ignore these issues, but we recommend you resolve them. \n+\n+If you are ready to upload your edits, you can provide an \u201cEdit summary\u201d - a short message describing the batch of edits you are making. It can be helpful to leave notes for yourself, such as \u201cbatch 1: authors A-G\u201d or other indicators of your workflow progress. OpenRefine will show the progress of the upload as it is happening, but does not show a confirmaton window. \n+\n+If you have made edits successfully, you will see them on [your Wikidata user contributions page](https://www.wikidata.org/wiki/Special:Contributions/), and on the [Edit groups page](https://editgroups.toolforge.org/). \n+\n+All edits can be undone from this interface.\n+\n+### QuickStatements export\n+\n+Your OpenRefine data can be exported in a format recognized by [QuickStatements](https://www.wikidata.org/wiki/Help:QuickStatements), a tool that creates Wikidata edits using text commands. OpenRefine generates \u201cversion 1\u201d QuickStatements commands. In order to use QuickStatements, you must authorize it with a Wikidata account (it may appear as \u201cMediaWiki\u201d when you authorize). \n+\n+Any dataset can be converted into QuickStatements text commands. You can follow the steps listed on [this page](https://www.wikidata.org/wiki/Help:QuickStatements#Running_QuickStatements). \n+\n+Under the <span class=\"menuItems\">Export</span> menu, look for <span class=\"menuItems\">QuickStatements file</span>; under <span class=\"menuItems\">Extensions</span> look for <span class=\"menuItems\">Export to QuickStatements</span>. Exporting your schema from OpenRefine will generated a text file called `statements.txt` by default. Paste the contents of the text file into a new QuickStatements batch using version 1. You can find version 1 of the tool (no longer maintained) [here](https://wikidata-todo.toolforge.org/quick_statements.php). The text commands will be processed into Wikidata edits and previewed for you to review before submitting. \n+\n+There are advantages to using QuickStatements rather than uploading your edits directly to Wikidata, including the way QuickStatements resolves duplicates and redundancies. You can learn more on QuickStatements' [Help page](https://www.wikidata.org/wiki/Help:QuickStatements), and on OpenRefine's [Uploading page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Uploading).\n+", "originalCommit": "70f30d1232b1db087ef2c8c6c56f6150e7c74fba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ0NTU2MQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r500445561", "bodyText": "I don't think this is an excessive amount of information so I'd leave it as is.", "author": "allanaaa", "createdAt": "2020-10-06T16:44:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg4MjA3MA=="}], "type": "inlineReview"}, {"oid": "c37aed3d72bd00e018db87f1ab094a22cb878990", "url": "https://github.com/OpenRefine/OpenRefine/commit/c37aed3d72bd00e018db87f1ab094a22cb878990", "message": "Update docs/docs/manual/wikidata.md\n\nCo-authored-by: Tom Morris <tfmorris@gmail.com>", "committedDate": "2020-10-06T15:00:09Z", "type": "commit"}, {"oid": "ca5dd8899d9070ca2e11c596a39d97d43bb9b5f3", "url": "https://github.com/OpenRefine/OpenRefine/commit/ca5dd8899d9070ca2e11c596a39d97d43bb9b5f3", "message": "Update docs/docs/manual/wikidata.md\n\nCo-authored-by: Tom Morris <tfmorris@gmail.com>", "committedDate": "2020-10-06T15:00:56Z", "type": "commit"}, {"oid": "a626c16f965f12f3f98dd76ac858ecb863fd8856", "url": "https://github.com/OpenRefine/OpenRefine/commit/a626c16f965f12f3f98dd76ac858ecb863fd8856", "message": "Update docs/docs/manual/wikidata.md\n\nCo-authored-by: Tom Morris <tfmorris@gmail.com>", "committedDate": "2020-10-06T15:02:12Z", "type": "commit"}, {"oid": "0a8b0abcd3de1981b9d08622aabc0b5db5f619fb", "url": "https://github.com/OpenRefine/OpenRefine/commit/0a8b0abcd3de1981b9d08622aabc0b5db5f619fb", "message": "Update wikidata.md", "committedDate": "2020-10-06T16:44:56Z", "type": "commit"}, {"oid": "373901d0e32fd238af4d52474c93ab5adc95c1f2", "url": "https://github.com/OpenRefine/OpenRefine/commit/373901d0e32fd238af4d52474c93ab5adc95c1f2", "message": "Remove wikibase bit for now", "committedDate": "2020-10-06T16:50:36Z", "type": "commit"}, {"oid": "ea8072100eea336264b5795c59006691c6117a1e", "url": "https://github.com/OpenRefine/OpenRefine/commit/ea8072100eea336264b5795c59006691c6117a1e", "message": "Update docs/docs/manual/wikidata.md\n\nCo-authored-by: Tom Morris <tfmorris@gmail.com>", "committedDate": "2020-10-06T19:12:47Z", "type": "commit"}, {"oid": "20fdfe61ef19c09290634deeeddbbf18fdf10040", "url": "https://github.com/OpenRefine/OpenRefine/commit/20fdfe61ef19c09290634deeeddbbf18fdf10040", "message": "Add image, small fixes", "committedDate": "2020-10-08T14:58:52Z", "type": "commit"}, {"oid": "9ae95cd6463d548dd1a94a09077a65d4518b7c42", "url": "https://github.com/OpenRefine/OpenRefine/commit/9ae95cd6463d548dd1a94a09077a65d4518b7c42", "message": "Removing material", "committedDate": "2020-11-11T21:12:03Z", "type": "commit"}, {"oid": "62925ac48391685e520967e08f2f6465443e0461", "url": "https://github.com/OpenRefine/OpenRefine/commit/62925ac48391685e520967e08f2f6465443e0461", "message": "Cleanup and tweaks", "committedDate": "2020-11-11T21:49:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI0NDUwOQ==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r522244509", "bodyText": "I'd simplify that a bit:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n          \n          \n            \n            OpenRefine\u2019s connections to Wikidata is supplied by an extension that is available by default in OpenRefine. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside.", "author": "wetneb", "createdAt": "2020-11-12T16:33:41Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,184 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine provides powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. ", "originalCommit": "62925ac48391685e520967e08f2f6465443e0461", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI0NTc1NA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r522245754", "bodyText": "On the long term I'd prefer to maintain this documentation here rather than on Wikidata, especially since we have now generalized this integration to other Wikibase instances (so it really ought to be documented in OpenRefine's docs directly).", "author": "wetneb", "createdAt": "2020-11-12T16:35:14Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,184 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine provides powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to [upload your cleaned dataset to Wikidata](#editing-wikidata-with-openrefine), you will need an [autoconfirmed](https://www.wikidata.org/wiki/Wikidata:Autoconfirmed_users) account, and you must [authorize OpenRefine with that account](#manage-wikidata-account). \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This section has tutorials, guidelines on editing, and spaces for discussion and help. The following text reviews the basics and can help you get set up, but the Wikidata help page is more regularly updated when technology or policies change.\n \n-## Features\n+## Reconciling with Wikidata\n \n+The Wikidata [reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n+You can find documentation and further resources on the reconciliation API [here](https://wikidata.reconci.link/).\n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n+### Language settings\n \n-## More resources\n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is your desired language code.\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all of its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match, though that item isn't directly linked to Q3918.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers (in the form \"Q###\" for entities) directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of QIDs. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify. You cannot use this to reconcile properties (in the form \"P###\").\n+\n+If the identifier you submit is assigned to multiple Wikidata items (because Wikidata is crowdsourced), all of the items are returned as candidates, with none automatically matched.\n+\n+### Property paths, special properties, and subfields\n+\n+Wikidata's hierarchical property structure can be called by using property paths (using |, /, and . symbols). Labels, aliases, descriptions, and sitelinks can also be accessed. You can also match values against subfields, such as latitude and longitude subfields of a geographical coordinate.\n+\n+For information on how to do this, read the documentation and further resources [here](https://wikidata.reconci.link/#documentation).\n+\n+## Editing Wikidata with OpenRefine\n+\n+The best resource is the [Editing section](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) on Wikidata.\n+\n+As a user-maintained data source, Wikidata can be edited by anyone. OpenRefine makes it simple to upload information in bulk. You simply need to get your information into the correct format, and ensure that it is new (not redundant to information already on Wikidata) and does not conflict with existing Wikidata information.\n+\n+Wikidata is built by creating entities (such as people, organizations, or places, identified with unique numbers starting with Q), defining properties (unique numbers starting with P), and using properties to define relationships between entities (a Q has a property P, with a value of another Q). \n+\n+For example, you may wish to create entities for local authors and the books they've set in your community. Each writer will be an entity with the occupation [author (Q482980)](https://www.wikidata.org/wiki/Q482980), each book will be an entity with [literary work (Q7725634)](https://www.wikidata.org/wiki/Q7725634), and books will be related to authors through a property [author (P50)](https://www.wikidata.org/wiki/Property:P50). Books can have places where they are set, with [setting (Q617332)](https://www.wikidata.org/wiki/Q617332). In OpenRefine, you'll need a column of publication titles that you have reconciled (and create new items where needed); each publication will have one or more locations in a \u201csetting\u201d column, which is also reconciled to municipalities or regions where they exist (and create new items where needed). Then you can add those new relationships to each book, and create new entities for both books and places.\n+\n+There is a list of [tutorials and walkthroughs on Wikidata](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) that will allow you to see the full process. You can save your schemas and drafts in OpenRefine, and your progress stays in draft until you are sure you\u2019re ready to upload it to Wikidata. You can also find information on [how to design a schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) and [how OpenRefine evaluates your proposed edits for issues](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Quality_assurance).\n+\n+Batches of edits to Wikidata that are created with OpenRefine can be undone. You can test out the uploading process by reconciling to several \u201csandbox\u201d entities created specifically for drafting edits and learning about Wikidata:\n+* https://www.wikidata.org/wiki/Q4115189\n+* https://www.wikidata.org/wiki/Q13406268\n+* https://www.wikidata.org/wiki/Q15397819\n+* https://www.wikidata.org/wiki/Q64768399\n+\n+If you upload edits that are redundant (that is, all the statements you want to make have already been made), nothing will happen. If you upload edits that conflict with existing information (such as a different birthdate than one already in Wikidata), it will be added as a second statement. OpenRefine produces no warnings as to whether your data replicates or conflicts with existing Wikidata elements. \n+\n+You can use OpenRefine's reconciliation preview to look at the target Wikidata elements and see what information they already have, and whether the elements' histories have had similar edits reverted in the past. \n+\n+### Edit Wikidata schema\n+\n+The best resource is the [Schema alignment page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) on Wikidata.\n+\n+A [schema](https://en.wikipedia.org/wiki/Database_schema) is the plan for how to structure information in a database. In OpenRefine, the schema operates as a template for how Wikidata edits should be applied: how to translate your tabular data into statements. With a schema, you can:\n+*   preview the Wikidata edits and inspect them manually;\n+*   analyze and fix any issues raised automatically by the tool;\n+*   upload your changes to Wikidata by logging in with your own account;\n+*   export the changes to the QuickStatements v1 format.\n+\n+For example, if your dataset has columns for authors, publication titles, and publication years, your schema can be conceptualized as: [publication title] has the author [author], and was published in [publication year]. To establish these facts, you need to establish one or more columns as \u201citems,\u201d for which you will make \u201cstatements\u201d that relate them to other columns. \n+\n+You can export any schema you create, and import an existing schema for use with a new dataset. This can help you work in batches on a large amount of data with a minimum of redundant labor.\n+\n+Once you select <span class=\"menuItems\">Edit Wikidata schema</span> under the <span class=\"menuItems\">Extensions</span> dropdown menu, your project interface will change. You\u2019ll see new tabs added to the right of \u201cX rows/records\" in the grid header: \u201cSchema,\u201d \u201cIssues,\u201d and \u201cPreview.\u201d You can now switch between the tabular grid format of your dataset and the screens that allow you to prepare data for uploading. \n+\n+OpenRefine presents you with an easy visual way to map out the relationships in your dataset. Each of the columns of your project will appear at the top of the sceren, and you can simply drag and drop them into the appropriate slots. To get start, select one column as an item. \n+\n+![A screenshot of the schema construction window in OpenRefine.](/img/wikidata-schema.png)\n+\n+There is [a Wikidata tutorial on how OpenRefine handles Wikidata schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Tutorials/Basic_editing).\n+\n+#### Editing terms with your schema\n+\n+You may wish to include edits to terms (labels, aliases, descriptions, or sitelinks) as well as establishing relationships between entities. \n+\n+For example, you may wish to upload pseudonyms, pen names, maiden or married names for historical authors. You can do so by putting the preferred names in one column of your dataset and alternative names in another column. In the schema interface, add an item for the preferred values, then click \u201cAdd term\u201d on the right-hand side of the screen. Select \u201cAlias\u201d from the dropdown, enter in \u201cEnglish\u201d in the language field, and drop your alternative names column into the space. \n+\n+Terms must always have a language selected. You cannot edit multiple languages at once, unless you drop a suitable column into the \u201clanguage\u201d field. For example, if you had translated publication titles, with data in the format\n+\n+|English title|Translated title|Translation language|\n+|---|---|---|\n+|Possession|Besessen|German|\n+||\u041e\u0431\u043b\u0430\u0434\u0430\u0442\u044c|Russian|\n+|Disgrace|Disgr\u00e2ce|French|\n+||Vergogna|Italian|\n+|Wolf Hall|En la corte del lobo|Spanish|\n+||\u30a6\u30eb\u30d5\u30fb\u30db\u30fc\u30eb|Japanese|\n+\n+You could upload translated titles to \u201cLabel\u201d with the language from \u201cTranslation language.\u201d You may wish to fetch the two-letter language code and use that instead for better language matches.\n+\n+![Constructing a schema with aliases and languages.](/img/wikidata-translated.png)\n+\n+### Manage Wikidata account\n+\n+To edit Wikidata directly from OpenRefine, you must have a Wikidata account and log into it in OpenRefine. OpenRefine can only upload edits with Wikidata user accounts that are \u201c[autoconfirmed](https://www.wikidata.org/wiki/Wikidata:Autoconfirmed_users)\u201d - at this time, that means accounts that have more than 50 edits and have existed for longer than four days. \n+\n+Use the Extensions menu to select <span class=\"menuItems\">Manage Wikidata account</span> and you will be presented with the following window:\n+\n+![The Wikidata authorization window in OpenRefine.](/img/wikidata-login.png)\n+\n+For security reasons, it is suggested that you not use your main account authorization with OpenRefine. Wikidata allows you to set special passwords to access your account through software. You can find this setting for your account at [https://www.wikidata.org/wiki/Special:BotPasswords](https://www.wikidata.org/wiki/Special:BotPasswords) once logged in. Creating bot access will prompt you for a unique name, and allow you to enable the following required settings:\n+* High-volume editing\n+* Edit existing pages\n+* Create, edit, and move pages\n+\n+It will then generate a username (in the form of \u201cyourwikidatausername@yourbotname\u201d) and password for you to use with OpenRefine.\n+\n+If your account or your bot is not properly authorized, OpenRefine will not display a warning or error when you try to upload your edits.\n+\n+You may also wish to store your unencrypted username and password in OpenRefine, saved locally to your computer. For security reasons, you may wish to leave this box unchecked. You can save your OpenRefine-specific bot password in your browser or with a password management tool. \n+\n+### Import and export schema\n+\n+You can save time on repetitive processes by defining a schema on one project, then exporting it and importing for use on new datasets in the future. Or you and your colleagues can share a schema with each other to coordinate your work. \n+\n+You can export a schema from a project using <span class=\"menuItems\">Export</span> \u2192 <span class=\"menuItems\">Wikidata schema</span>, or by using <span class=\"menuItems\">Extensions</span> \u2192 <span class=\"menuItems\">Export schema</span>. OpenRefine will generate a JSON file for you to save and share. You may experience issues with pop-up windows in your browser: consider allowing pop-ups for the OpenRefine URL (`127.0.0.1`) from now on.\n+\n+You can import a schema using <span class=\"menuItems\">Extensions</span> \u2192 <span class=\"menuItems\">Import schema</span>. You can upload a JSON file, or paste JSON statements directly into a field in the window. An imported schema will look for columns with the same names, and you will see an error message if your project doesn't contain matching columns.\n+\n+### Upload edits to Wikidata\n+\n+The best resource is the [Uploading page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Uploading) on Wikidata.\n+\n+There are two menu options in OpenRefine for applying your edits to Wikidata. Under <span class=\"menuItems\">Export</span> you will see <span class=\"menuItems\">Wikidata edits...</span> and under <span class=\"menuItems\">Extensions</span> you will see <span class=\"menuItems\">Upload edits to Wikidata</span>. Both will bring up the same window for you to [log in with your Wikidata account](#manage-wikidata-account). \n+\n+Once you are authorized, you will see a window with any outstanding issues. You can ignore these issues, but we recommend you resolve them. \n+\n+If you are ready to upload your edits, you can provide an \u201cEdit summary\u201d - a short message describing the batch of edits you are making. It can be helpful to leave notes for yourself, such as \u201cbatch 1: authors A-G\u201d or other indicators of your workflow progress. OpenRefine will show the progress of the upload as it is happening, but does not show a confirmaton window. \n+\n+If you have made edits successfully, you will see them on [your Wikidata user contributions page](https://www.wikidata.org/wiki/Special:Contributions/), and on the [Edit groups page](https://editgroups.toolforge.org/). \n+\n+All edits can be undone from this interface.\n+\n+### QuickStatements export\n+\n+Your OpenRefine data can be exported in a format recognized by [QuickStatements](https://www.wikidata.org/wiki/Help:QuickStatements), a tool that creates Wikidata edits using text commands. OpenRefine generates \u201cversion 1\u201d QuickStatements commands. In order to use QuickStatements, you must authorize it with a Wikidata account that is [autoconfirmed](https://www.wikidata.org/wiki/Wikidata:Autoconfirmed_users) (it may appear as \u201cMediaWiki\u201d when you authorize). \n+\n+Any dataset can be converted into QuickStatements text commands. You can follow the steps listed on [this page](https://www.wikidata.org/wiki/Help:QuickStatements#Running_QuickStatements). \n+\n+Under the <span class=\"menuItems\">Export</span> menu, look for <span class=\"menuItems\">QuickStatements file</span>; under <span class=\"menuItems\">Extensions</span> look for <span class=\"menuItems\">Export to QuickStatements</span>. Exporting your schema from OpenRefine will generated a text file called `statements.txt` by default. Paste the contents of the text file into a new QuickStatements batch using version 1. You can find version 1 of the tool (no longer maintained) [here](https://wikidata-todo.toolforge.org/quick_statements.php). The text commands will be processed into Wikidata edits and previewed for you to review before submitting. \n+\n+There are advantages to using QuickStatements rather than uploading your edits directly to Wikidata, including the way QuickStatements resolves duplicates and redundancies. You can learn more on QuickStatements' [Help page](https://www.wikidata.org/wiki/Help:QuickStatements), and on OpenRefine's [Uploading page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Uploading).\n+\n+### Schema alignment\n+\n+The best resource is the [Schema alignment page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) on Wikidata.", "originalCommit": "62925ac48391685e520967e08f2f6465443e0461", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjI0NTg3MA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3203#discussion_r522245870", "bodyText": "Same here (and other places).", "author": "wetneb", "createdAt": "2020-11-12T16:35:23Z", "path": "docs/docs/manual/wikidata.md", "diffHunk": "@@ -6,28 +6,184 @@ sidebar_label: Wikidata\n \n ## Overview\n \n+OpenRefine provides powerful ways to both pull data from Wikidata and add data to it. \n \n+OpenRefine\u2019s connections to Wikidata were formerly an optional extension, but are now installed automatically with the downloadable package. The Wikidata extension can be removed manually by navigating to your OpenRefine installation folder, and then looking inside `webapp/extensions/` and deleting the `wikidata` folder inside. \n \n-*   Former extension, now core [but you can remove it].\n-*   Account required\n+You do not need a Wikidata account to reconcile your local OpenRefine project to Wikidata. If you wish to [upload your cleaned dataset to Wikidata](#editing-wikidata-with-openrefine), you will need an [autoconfirmed](https://www.wikidata.org/wiki/Wikidata:Autoconfirmed_users) account, and you must [authorize OpenRefine with that account](#manage-wikidata-account). \n \n+The best source for information about how OpenRefine works with Wikidata is [on Wikidata itself, under Tools](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine). This section has tutorials, guidelines on editing, and spaces for discussion and help. The following text reviews the basics and can help you get set up, but the Wikidata help page is more regularly updated when technology or policies change.\n \n-## Features\n+## Reconciling with Wikidata\n \n+The Wikidata [reconciliation service](reconciling) for OpenRefine [supports](https://reconciliation-api.github.io/testbench/):\n+*   A large number of potential types to reconcile against\n+*   Previewing and viewing entities\n+*   Suggesting entities, types, and properties\n+*   Augmenting your project with more information pulled from Wikidata. \n \n+You can find documentation and further resources on the reconciliation API [here](https://wikidata.reconci.link/).\n \n-*   Edit Wikidata schema\n-*   Manage Wikidata account\n-*   Import schema\n-*   Export schema\n-*   Uploading edits to Wikidata\n-*   QuickStatements export\n-*   Schema alignment\n-*   Issue detection\n+For the most part, Wikidata reconciliation behaves the same way other reconciliation processes do, but there are a few processes and features specific to Wikidata. \n \n+### Language settings\n \n-## More resources\n+You can install a version of the Wikidata reconciliation service that uses your language. First, you need the language code: this is the [two-letter code found on this list](https://en.wikipedia.org/wiki/List_of_Wikipedias), or in the domain name of the desired Wikipedia (for instance, \u201cfr\u201d if your Wikipedia is [https://fr.wikipedia.org/wiki/](https://fr.wikipedia.org/wiki/)).\n \n-[https://wdreconcile.toolforge.org/](https://wdreconcile.toolforge.org/) \n+Then, open the reconciliation window (under <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Start reconciling...</span>) and click <span class=\"menuItems\">Add Standard Service</span>. The URL is `https://openrefine-wikidata.toolforge.org/fr/api` where \u201cfr\u201d is your desired language code.\n \n-[https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine) \n+When reconciling using this interface, items and properties will be displayed in your language if a translation is available. The matching score of the reconciliation is not influenced by your choice of language: items are matched by considering all labels and keeping the best possible match. So the language of your dataset is irrelevant to the choice of the language for the reconciliation interface.\n+\n+### Restricting matches by type\n+\n+In Wikidata, types are items themselves. For instance, the [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) has the type [public university (Q875538)](https://www.wikidata.org/wiki/Q875538), using the [instance of (P31)](https://www.wikidata.org/wiki/Property:P31) property. Types can be subclasses of other types, using the [subclass of (P279)](https://www.wikidata.org/wiki/Property:P279) property. For instance, [public university (Q875538)](https://www.wikidata.org/wiki/Q875538) is a subclass of [university (Q3918)](https://www.wikidata.org/wiki/Q3918). You can visualize these structures with the [Wikidata Graph Builder](https://angryloki.github.io/wikidata-graph-builder/). \n+\n+When you select or enter a type for reconciliation, OpenRefine will include that type and all of its subtypes. For instance, if you select [university (Q3918)](https://www.wikidata.org/wiki/Q3918), then [university of Ljubljana (Q1377)](https://www.wikidata.org/wiki/Q1377) will be a possible match, though that item isn't directly linked to Q3918.\n+\n+Some items may not yet be set as an instance of anything, because Wikidata is crowdsourced. If you restrict reconciliation to a type, these items will not appear in the results, except as a fallback, and will have a lower score.\n+\n+### Reconciling via unique identifiers\n+\n+You can supply a column of unique identifiers (in the form \"Q###\" for entities) directly to Wikidata in order to pull more data, but [these strings will not be \u201creconciled\u201d against the external dataset](reconciling#reconciling-with-unique-identifiers). Apply the operation <span class=\"menuItems\">Reconcile</span> \u2192 <span class=\"menuItems\">Use values as identifiers</span> on your column of QIDs. All cells will appear as dark blue \u201cconfirmed\u201d matches. Some of the \u201cmatches\u201d may be errors, which you will need to hover over or click on to identify. You cannot use this to reconcile properties (in the form \"P###\").\n+\n+If the identifier you submit is assigned to multiple Wikidata items (because Wikidata is crowdsourced), all of the items are returned as candidates, with none automatically matched.\n+\n+### Property paths, special properties, and subfields\n+\n+Wikidata's hierarchical property structure can be called by using property paths (using |, /, and . symbols). Labels, aliases, descriptions, and sitelinks can also be accessed. You can also match values against subfields, such as latitude and longitude subfields of a geographical coordinate.\n+\n+For information on how to do this, read the documentation and further resources [here](https://wikidata.reconci.link/#documentation).\n+\n+## Editing Wikidata with OpenRefine\n+\n+The best resource is the [Editing section](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) on Wikidata.\n+\n+As a user-maintained data source, Wikidata can be edited by anyone. OpenRefine makes it simple to upload information in bulk. You simply need to get your information into the correct format, and ensure that it is new (not redundant to information already on Wikidata) and does not conflict with existing Wikidata information.\n+\n+Wikidata is built by creating entities (such as people, organizations, or places, identified with unique numbers starting with Q), defining properties (unique numbers starting with P), and using properties to define relationships between entities (a Q has a property P, with a value of another Q). \n+\n+For example, you may wish to create entities for local authors and the books they've set in your community. Each writer will be an entity with the occupation [author (Q482980)](https://www.wikidata.org/wiki/Q482980), each book will be an entity with [literary work (Q7725634)](https://www.wikidata.org/wiki/Q7725634), and books will be related to authors through a property [author (P50)](https://www.wikidata.org/wiki/Property:P50). Books can have places where they are set, with [setting (Q617332)](https://www.wikidata.org/wiki/Q617332). In OpenRefine, you'll need a column of publication titles that you have reconciled (and create new items where needed); each publication will have one or more locations in a \u201csetting\u201d column, which is also reconciled to municipalities or regions where they exist (and create new items where needed). Then you can add those new relationships to each book, and create new entities for both books and places.\n+\n+There is a list of [tutorials and walkthroughs on Wikidata](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing) that will allow you to see the full process. You can save your schemas and drafts in OpenRefine, and your progress stays in draft until you are sure you\u2019re ready to upload it to Wikidata. You can also find information on [how to design a schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) and [how OpenRefine evaluates your proposed edits for issues](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Quality_assurance).\n+\n+Batches of edits to Wikidata that are created with OpenRefine can be undone. You can test out the uploading process by reconciling to several \u201csandbox\u201d entities created specifically for drafting edits and learning about Wikidata:\n+* https://www.wikidata.org/wiki/Q4115189\n+* https://www.wikidata.org/wiki/Q13406268\n+* https://www.wikidata.org/wiki/Q15397819\n+* https://www.wikidata.org/wiki/Q64768399\n+\n+If you upload edits that are redundant (that is, all the statements you want to make have already been made), nothing will happen. If you upload edits that conflict with existing information (such as a different birthdate than one already in Wikidata), it will be added as a second statement. OpenRefine produces no warnings as to whether your data replicates or conflicts with existing Wikidata elements. \n+\n+You can use OpenRefine's reconciliation preview to look at the target Wikidata elements and see what information they already have, and whether the elements' histories have had similar edits reverted in the past. \n+\n+### Edit Wikidata schema\n+\n+The best resource is the [Schema alignment page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) on Wikidata.\n+\n+A [schema](https://en.wikipedia.org/wiki/Database_schema) is the plan for how to structure information in a database. In OpenRefine, the schema operates as a template for how Wikidata edits should be applied: how to translate your tabular data into statements. With a schema, you can:\n+*   preview the Wikidata edits and inspect them manually;\n+*   analyze and fix any issues raised automatically by the tool;\n+*   upload your changes to Wikidata by logging in with your own account;\n+*   export the changes to the QuickStatements v1 format.\n+\n+For example, if your dataset has columns for authors, publication titles, and publication years, your schema can be conceptualized as: [publication title] has the author [author], and was published in [publication year]. To establish these facts, you need to establish one or more columns as \u201citems,\u201d for which you will make \u201cstatements\u201d that relate them to other columns. \n+\n+You can export any schema you create, and import an existing schema for use with a new dataset. This can help you work in batches on a large amount of data with a minimum of redundant labor.\n+\n+Once you select <span class=\"menuItems\">Edit Wikidata schema</span> under the <span class=\"menuItems\">Extensions</span> dropdown menu, your project interface will change. You\u2019ll see new tabs added to the right of \u201cX rows/records\" in the grid header: \u201cSchema,\u201d \u201cIssues,\u201d and \u201cPreview.\u201d You can now switch between the tabular grid format of your dataset and the screens that allow you to prepare data for uploading. \n+\n+OpenRefine presents you with an easy visual way to map out the relationships in your dataset. Each of the columns of your project will appear at the top of the sceren, and you can simply drag and drop them into the appropriate slots. To get start, select one column as an item. \n+\n+![A screenshot of the schema construction window in OpenRefine.](/img/wikidata-schema.png)\n+\n+There is [a Wikidata tutorial on how OpenRefine handles Wikidata schema](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Tutorials/Basic_editing).\n+\n+#### Editing terms with your schema\n+\n+You may wish to include edits to terms (labels, aliases, descriptions, or sitelinks) as well as establishing relationships between entities. \n+\n+For example, you may wish to upload pseudonyms, pen names, maiden or married names for historical authors. You can do so by putting the preferred names in one column of your dataset and alternative names in another column. In the schema interface, add an item for the preferred values, then click \u201cAdd term\u201d on the right-hand side of the screen. Select \u201cAlias\u201d from the dropdown, enter in \u201cEnglish\u201d in the language field, and drop your alternative names column into the space. \n+\n+Terms must always have a language selected. You cannot edit multiple languages at once, unless you drop a suitable column into the \u201clanguage\u201d field. For example, if you had translated publication titles, with data in the format\n+\n+|English title|Translated title|Translation language|\n+|---|---|---|\n+|Possession|Besessen|German|\n+||\u041e\u0431\u043b\u0430\u0434\u0430\u0442\u044c|Russian|\n+|Disgrace|Disgr\u00e2ce|French|\n+||Vergogna|Italian|\n+|Wolf Hall|En la corte del lobo|Spanish|\n+||\u30a6\u30eb\u30d5\u30fb\u30db\u30fc\u30eb|Japanese|\n+\n+You could upload translated titles to \u201cLabel\u201d with the language from \u201cTranslation language.\u201d You may wish to fetch the two-letter language code and use that instead for better language matches.\n+\n+![Constructing a schema with aliases and languages.](/img/wikidata-translated.png)\n+\n+### Manage Wikidata account\n+\n+To edit Wikidata directly from OpenRefine, you must have a Wikidata account and log into it in OpenRefine. OpenRefine can only upload edits with Wikidata user accounts that are \u201c[autoconfirmed](https://www.wikidata.org/wiki/Wikidata:Autoconfirmed_users)\u201d - at this time, that means accounts that have more than 50 edits and have existed for longer than four days. \n+\n+Use the Extensions menu to select <span class=\"menuItems\">Manage Wikidata account</span> and you will be presented with the following window:\n+\n+![The Wikidata authorization window in OpenRefine.](/img/wikidata-login.png)\n+\n+For security reasons, it is suggested that you not use your main account authorization with OpenRefine. Wikidata allows you to set special passwords to access your account through software. You can find this setting for your account at [https://www.wikidata.org/wiki/Special:BotPasswords](https://www.wikidata.org/wiki/Special:BotPasswords) once logged in. Creating bot access will prompt you for a unique name, and allow you to enable the following required settings:\n+* High-volume editing\n+* Edit existing pages\n+* Create, edit, and move pages\n+\n+It will then generate a username (in the form of \u201cyourwikidatausername@yourbotname\u201d) and password for you to use with OpenRefine.\n+\n+If your account or your bot is not properly authorized, OpenRefine will not display a warning or error when you try to upload your edits.\n+\n+You may also wish to store your unencrypted username and password in OpenRefine, saved locally to your computer. For security reasons, you may wish to leave this box unchecked. You can save your OpenRefine-specific bot password in your browser or with a password management tool. \n+\n+### Import and export schema\n+\n+You can save time on repetitive processes by defining a schema on one project, then exporting it and importing for use on new datasets in the future. Or you and your colleagues can share a schema with each other to coordinate your work. \n+\n+You can export a schema from a project using <span class=\"menuItems\">Export</span> \u2192 <span class=\"menuItems\">Wikidata schema</span>, or by using <span class=\"menuItems\">Extensions</span> \u2192 <span class=\"menuItems\">Export schema</span>. OpenRefine will generate a JSON file for you to save and share. You may experience issues with pop-up windows in your browser: consider allowing pop-ups for the OpenRefine URL (`127.0.0.1`) from now on.\n+\n+You can import a schema using <span class=\"menuItems\">Extensions</span> \u2192 <span class=\"menuItems\">Import schema</span>. You can upload a JSON file, or paste JSON statements directly into a field in the window. An imported schema will look for columns with the same names, and you will see an error message if your project doesn't contain matching columns.\n+\n+### Upload edits to Wikidata\n+\n+The best resource is the [Uploading page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Uploading) on Wikidata.\n+\n+There are two menu options in OpenRefine for applying your edits to Wikidata. Under <span class=\"menuItems\">Export</span> you will see <span class=\"menuItems\">Wikidata edits...</span> and under <span class=\"menuItems\">Extensions</span> you will see <span class=\"menuItems\">Upload edits to Wikidata</span>. Both will bring up the same window for you to [log in with your Wikidata account](#manage-wikidata-account). \n+\n+Once you are authorized, you will see a window with any outstanding issues. You can ignore these issues, but we recommend you resolve them. \n+\n+If you are ready to upload your edits, you can provide an \u201cEdit summary\u201d - a short message describing the batch of edits you are making. It can be helpful to leave notes for yourself, such as \u201cbatch 1: authors A-G\u201d or other indicators of your workflow progress. OpenRefine will show the progress of the upload as it is happening, but does not show a confirmaton window. \n+\n+If you have made edits successfully, you will see them on [your Wikidata user contributions page](https://www.wikidata.org/wiki/Special:Contributions/), and on the [Edit groups page](https://editgroups.toolforge.org/). \n+\n+All edits can be undone from this interface.\n+\n+### QuickStatements export\n+\n+Your OpenRefine data can be exported in a format recognized by [QuickStatements](https://www.wikidata.org/wiki/Help:QuickStatements), a tool that creates Wikidata edits using text commands. OpenRefine generates \u201cversion 1\u201d QuickStatements commands. In order to use QuickStatements, you must authorize it with a Wikidata account that is [autoconfirmed](https://www.wikidata.org/wiki/Wikidata:Autoconfirmed_users) (it may appear as \u201cMediaWiki\u201d when you authorize). \n+\n+Any dataset can be converted into QuickStatements text commands. You can follow the steps listed on [this page](https://www.wikidata.org/wiki/Help:QuickStatements#Running_QuickStatements). \n+\n+Under the <span class=\"menuItems\">Export</span> menu, look for <span class=\"menuItems\">QuickStatements file</span>; under <span class=\"menuItems\">Extensions</span> look for <span class=\"menuItems\">Export to QuickStatements</span>. Exporting your schema from OpenRefine will generated a text file called `statements.txt` by default. Paste the contents of the text file into a new QuickStatements batch using version 1. You can find version 1 of the tool (no longer maintained) [here](https://wikidata-todo.toolforge.org/quick_statements.php). The text commands will be processed into Wikidata edits and previewed for you to review before submitting. \n+\n+There are advantages to using QuickStatements rather than uploading your edits directly to Wikidata, including the way QuickStatements resolves duplicates and redundancies. You can learn more on QuickStatements' [Help page](https://www.wikidata.org/wiki/Help:QuickStatements), and on OpenRefine's [Uploading page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Uploading).\n+\n+### Schema alignment\n+\n+The best resource is the [Schema alignment page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Schema_alignment) on Wikidata.\n+\n+### Issue detection\n+\n+The best resource is the [Quality assurance page](https://www.wikidata.org/wiki/Wikidata:Tools/OpenRefine/Editing/Quality_assurance) on Wikidata.", "originalCommit": "62925ac48391685e520967e08f2f6465443e0461", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ffde0ba7c078398d5e1701d72bece69dcec83c5e", "url": "https://github.com/OpenRefine/OpenRefine/commit/ffde0ba7c078398d5e1701d72bece69dcec83c5e", "message": "Update docs/docs/manual/wikidata.md\n\nCo-authored-by: Antonin Delpeuch <antonin@delpeuch.eu>", "committedDate": "2020-11-12T16:53:54Z", "type": "commit"}]}