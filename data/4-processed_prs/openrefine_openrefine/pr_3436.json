{"pr_number": 3436, "pr_title": "Added confirm dialog for starred expression remove links #501", "pr_createdAt": "2020-12-23T18:20:57Z", "pr_url": "https://github.com/OpenRefine/OpenRefine/pull/3436", "timeline": [{"oid": "c31a6a11fefcde6df12d3bf7e9448c9a0b79d3fe", "url": "https://github.com/OpenRefine/OpenRefine/commit/c31a6a11fefcde6df12d3bf7e9448c9a0b79d3fe", "message": "Updated 'remove' link for starred expressions to include a confirm dialog", "committedDate": "2020-12-22T23:41:10Z", "type": "commit"}, {"oid": "e3d31fdc467ac78aebf52833b3afbd2fc261d802", "url": "https://github.com/OpenRefine/OpenRefine/commit/e3d31fdc467ac78aebf52833b3afbd2fc261d802", "message": "bring remove expression dialog dismissal inline with other dialog dismissal", "committedDate": "2020-12-23T18:14:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODg5MTU1Ng==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3436#discussion_r548891556", "bodyText": "Thanks for your attempt to reuse existing translations! However, we cannot do something like $.i18n('core-dialogs/remove') + \" \" + $.i18n('core-dialogs/expression') + \"?\" because that assumes that word order and punctuation remain identical in all languages. For instance in German you want to have the noun before the verb in this context. Or in French you want to have a space before the ? and also an article before \"expression\". So you should introduce a new bit of UI text in this context. You can add it to the English file only, and translators will take care of adding it to other languages.", "author": "wetneb", "createdAt": "2020-12-25T16:43:34Z", "path": "main/webapp/modules/core/scripts/dialogs/expression-preview-dialog.js", "diffHunk": "@@ -350,15 +350,30 @@ ExpressionPreviewDialog.Widget.prototype._renderStarredExpressions = function(da\n         var o = Scripting.parse(entry.code);\n         \n         $('<a href=\"javascript:{}\">'+$.i18n('core-dialogs/remove')+'</a>').appendTo(tr.insertCell(0)).click(function() {\n-            Refine.postCSRF(\n-                \"command/core/toggle-starred-expression\",\n-                { expression: entry.code, returnList: true },\n-                function(data) {\n-                    self._renderStarredExpressions(data);\n-                    self._renderExpressionHistoryTab();\n-                },\n-                \"json\"\n-            );\n+            var removeExpression = DialogSystem.createDialog();\n+                removeExpression.width(\"250px\");\n+            var removeExpressionHead = $('<div></div>').addClass(\"dialog-header\").text($.i18n('core-dialogs/remove') + \" \" + $.i18n('core-dialogs/expression') + \"?\")", "originalCommit": "e3d31fdc467ac78aebf52833b3afbd2fc261d802", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6221ab4a1b6802838e81e901bc6583dbeb293378", "url": "https://github.com/OpenRefine/OpenRefine/commit/6221ab4a1b6802838e81e901bc6583dbeb293378", "message": "Changed 'unstar expression?' in translation-en.json to allow better translation.", "committedDate": "2020-12-25T18:24:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc4MjAwNg==", "url": "https://github.com/OpenRefine/OpenRefine/pull/3436#discussion_r550782006", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                \"core-dialogs/unstar-expression\": \"Unstar Expression?\",\n          \n          \n            \n                \"core-dialogs/unstar-expression\": \"Unstar expression?\",\n          \n      \n    \n    \n  \n\nWe are in the process of normalizing the case of all text in the UI (#3363), so let's get this one right from the start.", "author": "wetneb", "createdAt": "2021-01-01T16:12:21Z", "path": "main/webapp/modules/core/langs/translation-en.json", "diffHunk": "@@ -244,6 +244,7 @@\n     \"core-dialogs/sql-exporter\": \"SQL Exporter\",\n     \"core-dialogs/custom-tab-exp\": \"Custom Tabular Exporter\",\n     \"core-dialogs/select-columns-dialog\": \"Select columns\",\n+    \"core-dialogs/unstar-expression\": \"Unstar Expression?\",", "originalCommit": "6221ab4a1b6802838e81e901bc6583dbeb293378", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e783f1cb71fb8fa7fc2191175aae2bcf2e01f522", "url": "https://github.com/OpenRefine/OpenRefine/commit/e783f1cb71fb8fa7fc2191175aae2bcf2e01f522", "message": "Update main/webapp/modules/core/langs/translation-en.json\n\nCo-authored-by: Antonin Delpeuch <antonin@delpeuch.eu>", "committedDate": "2021-01-02T05:44:45Z", "type": "commit"}]}