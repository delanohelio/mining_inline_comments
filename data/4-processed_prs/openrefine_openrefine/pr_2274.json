{"pr_number": 2274, "pr_title": "Standardise 'edit' cell dialogue with 'toNumber()' when parsing String to Number", "pr_createdAt": "2020-01-07T02:31:13Z", "pr_url": "https://github.com/OpenRefine/OpenRefine/pull/2274", "timeline": [{"oid": "5afd93e2d157e7a2e02b00d99dcd502a4ae11e70", "url": "https://github.com/OpenRefine/OpenRefine/commit/5afd93e2d157e7a2e02b00d99dcd502a4ae11e70", "message": "Standardise 'edit' cell dialogue with 'toNumber()' behavior", "committedDate": "2020-01-07T02:09:28Z", "type": "commit"}, {"oid": "67b62c5c1679ecbdf82a93b15646b26f7fc03f8e", "url": "https://github.com/OpenRefine/OpenRefine/commit/67b62c5c1679ecbdf82a93b15646b26f7fc03f8e", "message": "EditOneCellCommandTests: Add number parsing tests", "committedDate": "2020-01-08T01:55:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAzODAwMA==", "url": "https://github.com/OpenRefine/OpenRefine/pull/2274#discussion_r364038000", "bodyText": "wonder if I should still check for the other cells.", "author": "jamessspanggg", "createdAt": "2020-01-08T02:13:48Z", "path": "main/tests/server/src/com/google/refine/commands/cell/EditOneCellCommandTests.java", "diffHunk": "@@ -62,6 +65,42 @@ public void testEditOneCell() throws ServletException, IOException {\n \t\tassertEquals(\"d\", project.rows.get(1).cells.get(1).value);\n \t}\n \t\n+\t@Test\n+\tpublic void testNumberParsing_parsableLong() throws ServletException, IOException {\n+\t\twhen(request.getParameter(\"project\")).thenReturn(Long.toString(project.id));\n+\t\twhen(request.getParameter(\"row\")).thenReturn(\"1\");\n+\t\twhen(request.getParameter(\"cell\")).thenReturn(\"0\");\n+\t\twhen(request.getParameter(\"type\")).thenReturn(\"number\");\n+\t\twhen(request.getParameter(\"value\")).thenReturn(PARSABLE_LONG_NUMBER);\n+\t\twhen(request.getParameter(\"csrf_token\")).thenReturn(Command.csrfFactory.getFreshToken());\n+\n+\t\tcommand.doPost(request, response);\n+\n+\t\tassertEquals(\"a\", project.rows.get(0).cells.get(0).value);", "originalCommit": "67b62c5c1679ecbdf82a93b15646b26f7fc03f8e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}