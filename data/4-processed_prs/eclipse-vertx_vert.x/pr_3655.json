{"pr_number": 3655, "pr_title": "Replace SystemUtils.IS_OS_LINUX", "pr_createdAt": "2020-11-18T15:53:51Z", "pr_url": "https://github.com/eclipse-vertx/vert.x/pull/3655", "timeline": [{"oid": "015b1e618d37474da967a4fb4258ae208a3e041e", "url": "https://github.com/eclipse-vertx/vert.x/commit/015b1e618d37474da967a4fb4258ae208a3e041e", "message": "Replace SystemUtils.IS_OS_LINUX\n\nSystemUtils cannot instantiate when running under\nWindows and Java 11:\n\n```\njava.lang.ExceptionInInitializerError: null\n        at java.base/java.lang.String.checkBoundsBeginEnd(String.java:3319)\n        at java.base/java.lang.String.substring(String.java:1874)\n        at org.apache.commons.lang.SystemUtils.getJavaVersionAsFloat(SystemUtils.java:1133)\n        at org.apache.commons.lang.SystemUtils.<clinit>(SystemUtils.java:818)\n```\n\nThe replacement uses the same os.name string comparison:\nhttps://commons.apache.org/proper/commons-lang/javadocs/api-2.6/src-html/org/apache/commons/lang/SystemUtils.html#line.1153\n\nSigned-off-by: Julian Ladisch <eclipse.org-rtn@ladisch.de>", "committedDate": "2020-11-18T15:46:56Z", "type": "commit"}, {"oid": "262c23b8578812684231d31be672d99be76a5433", "url": "https://github.com/eclipse-vertx/vert.x/commit/262c23b8578812684231d31be672d99be76a5433", "message": "Move os.name detection code into Utils\n\nSigned-off-by: Julian Ladisch <eclipse.org-rtn@ladisch.de>", "committedDate": "2020-11-18T17:09:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY1NTgxOQ==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3655#discussion_r526655819", "bodyText": "can you instead use Netty's PlatformDependant util class ?", "author": "vietj", "createdAt": "2020-11-19T07:51:31Z", "path": "src/test/java/io/vertx/core/eventbus/ClusterHostTest.java", "diffHunk": "@@ -14,16 +14,24 @@\n import io.vertx.core.VertxOptions;\n import io.vertx.test.core.VertxTestBase;\n import io.vertx.test.fakecluster.FakeClusterManager;\n-import org.apache.commons.lang.SystemUtils;\n import org.junit.Assume;\n import org.junit.Test;\n \n public class ClusterHostTest extends VertxTestBase {\n+  private static final String OS_NAME = getOsName();\n \n   @Override\n   public void setUp() throws Exception {\n     super.setUp();\n-    Assume.assumeTrue(SystemUtils.IS_OS_LINUX);\n+    Assume.assumeTrue(OS_NAME.startsWith(\"Linux\") || OS_NAME.startsWith(\"LINUX\"));\n+  }\n+", "originalCommit": "015b1e618d37474da967a4fb4258ae208a3e041e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjcwNTQzMg==", "url": "https://github.com/eclipse-vertx/vert.x/pull/3655#discussion_r526705432", "bodyText": "Yes, done.", "author": "julianladisch", "createdAt": "2020-11-19T09:17:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY1NTgxOQ=="}], "type": "inlineReview"}, {"oid": "4a21dca0c9dab90207b008307177f7e3c7c0392c", "url": "https://github.com/eclipse-vertx/vert.x/commit/4a21dca0c9dab90207b008307177f7e3c7c0392c", "message": "Use Netty's PlatformDependant util class\n\nSigned-off-by: Julian Ladisch <eclipse.org-rtn@ladisch.de>", "committedDate": "2020-11-19T09:16:37Z", "type": "commit"}, {"oid": "e05d5e0a0b6795afc0ae2f9879d3471f0fabe2cc", "url": "https://github.com/eclipse-vertx/vert.x/commit/e05d5e0a0b6795afc0ae2f9879d3471f0fabe2cc", "message": "Merge branch 'master' into replace-SystemUtils.IS_OS_LINUX\n\nSigned-off-by: Julian Ladisch <eclipse.org-rtn@ladisch.de>", "committedDate": "2020-11-27T14:38:41Z", "type": "commit"}]}