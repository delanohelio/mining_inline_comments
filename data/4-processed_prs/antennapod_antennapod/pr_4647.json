{"pr_number": 4647, "pr_title": "Use of ViewBinding in AddFeedFragment", "pr_createdAt": "2020-11-04T21:25:06Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4647", "timeline": [{"oid": "a465c44163aedebbb1f11800bed5ea6e0a334365", "url": "https://github.com/AntennaPod/AntennaPod/commit/a465c44163aedebbb1f11800bed5ea6e0a334365", "message": "Use of ViewBinding in AddFeedFragment", "committedDate": "2020-11-04T21:10:07Z", "type": "commit"}, {"oid": "d925722edaf05b715282bade5db0758ac52e7aa6", "url": "https://github.com/AntennaPod/AntennaPod/commit/d925722edaf05b715282bade5db0758ac52e7aa6", "message": "Minor Fixes", "committedDate": "2020-11-04T21:33:47Z", "type": "commit"}, {"oid": "6559cb084602529cea0a8ea0d1f0dc34c99c6484", "url": "https://github.com/AntennaPod/AntennaPod/commit/6559cb084602529cea0a8ea0d1f0dc34c99c6484", "message": "Minor Fixes", "committedDate": "2020-11-04T21:39:20Z", "type": "commit"}, {"oid": "12b50f9a07d7aea8c508bb2897921702259375ba", "url": "https://github.com/AntennaPod/AntennaPod/commit/12b50f9a07d7aea8c508bb2897921702259375ba", "message": "Minor Fixes", "committedDate": "2020-11-04T21:50:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYyOTY0Ng==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4647#discussion_r518629646", "bodyText": "I think this variable can be moved to the method that actually uses it. There is no need to have it accessible in the whole class.", "author": "ByteHamster", "createdAt": "2020-11-06T09:35:07Z", "path": "app/src/main/java/de/danoeh/antennapod/fragment/AddFeedFragment.java", "diffHunk": "@@ -50,38 +52,41 @@\n     private static final int REQUEST_CODE_CHOOSE_OPML_IMPORT_PATH = 1;\n     private static final int REQUEST_CODE_ADD_LOCAL_FOLDER = 2;\n \n-    private EditText combinedFeedSearchBox;\n     private MainActivity activity;\n \n+    private AddfeedBinding viewBinding;\n+    private EditTextDialogBinding alertViewBinding;", "originalCommit": "12b50f9a07d7aea8c508bb2897921702259375ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODczNTYwOA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4647#discussion_r518735608", "bodyText": "should I name both as viewBinding?", "author": "mohitshah3111999", "createdAt": "2020-11-06T12:59:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYyOTY0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc0MDc1Mg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4647#discussion_r518740752", "bodyText": "I would use different names. Otherwise, it could be confusing when looking at the code and not realizing that there is a second variable with the same name.", "author": "ByteHamster", "createdAt": "2020-11-06T13:10:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYyOTY0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYzMDQ1Mw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4647#discussion_r518630453", "bodyText": "I think that line should use alertViewBinding.getRoot() instead", "author": "ByteHamster", "createdAt": "2020-11-06T09:36:30Z", "path": "app/src/main/java/de/danoeh/antennapod/fragment/AddFeedFragment.java", "diffHunk": "@@ -104,25 +110,27 @@ public View onCreateView(@NonNull LayoutInflater inflater,\n             }\n         });\n         if (Build.VERSION.SDK_INT < 21) {\n-            root.findViewById(R.id.btn_add_local_folder).setVisibility(View.GONE);\n+            viewBinding.addLocalFolderButton.setVisibility(View.GONE);\n         }\n-        root.findViewById(R.id.search_icon).setOnClickListener(view -> performSearch());\n-        return root;\n+        viewBinding.searchButton.setOnClickListener(view -> performSearch());\n+        return viewBinding.getRoot();\n     }\n \n     private void showAddViaUrlDialog() {\n         AlertDialog.Builder builder = new AlertDialog.Builder(getContext());\n         builder.setTitle(R.string.add_podcast_by_url);\n         View content = View.inflate(getContext(), R.layout.edit_text_dialog, null);\n-        EditText editText = content.findViewById(R.id.text);\n-        editText.setHint(R.string.add_podcast_by_url_hint);\n+        alertViewBinding = EditTextDialogBinding.bind(content);\n+        alertViewBinding.urlEditText.setHint(R.string.add_podcast_by_url_hint);\n+\n         ClipboardManager clipboard = (ClipboardManager) getContext().getSystemService(Context.CLIPBOARD_SERVICE);\n         String clipboardContent = clipboard.getText() != null ? clipboard.getText().toString() : \"\";\n         if (clipboardContent.trim().startsWith(\"http\")) {\n-            editText.setText(clipboardContent.trim());\n+            alertViewBinding.urlEditText.setText(clipboardContent.trim());\n         }\n         builder.setView(content);", "originalCommit": "12b50f9a07d7aea8c508bb2897921702259375ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYzMTI2NQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4647#discussion_r518631265", "bodyText": "That layout is also used in the edit feed dialog, which now crashes because it does not find the view. Could you please migrate that dialog to ViewBinding, too?", "author": "ByteHamster", "createdAt": "2020-11-06T09:37:55Z", "path": "app/src/main/res/layout/edit_text_dialog.xml", "diffHunk": "@@ -10,6 +10,6 @@\n             android:layout_height=\"wrap_content\"\n             android:inputType=\"text\"\n             android:ems=\"10\"\n-            android:id=\"@+id/text\" />\n+            android:id=\"@+id/urlEditText\" />", "originalCommit": "12b50f9a07d7aea8c508bb2897921702259375ba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYzOTcxNA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4647#discussion_r518639714", "bodyText": "I'm sorry, I actually didn't run this on emulator. Will check and update soon", "author": "mohitshah3111999", "createdAt": "2020-11-06T09:52:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYzMTI2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTI5OTAyMQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4647#discussion_r519299021", "bodyText": "Sorry, I have to be more precise. It's in the rename feed dialog", "author": "ByteHamster", "createdAt": "2020-11-08T08:46:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYzMTI2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYzMTg2Ng==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4647#discussion_r518631866", "bodyText": "This line needs to be updated with the new ID, too.", "author": "ByteHamster", "createdAt": "2020-11-06T09:39:02Z", "path": "app/src/androidTest/java/de/test/antennapod/ui/MainActivityTest.java", "diffHunk": "@@ -75,7 +75,7 @@ public void testAddFeed() throws Exception {\n         final Feed feed = uiTestUtils.hostedFeeds.get(0);\n         openNavDrawer();\n         onView(withText(R.string.add_feed_label)).perform(click());\n-        onView(withId(R.id.btn_add_via_url)).perform(scrollTo(), click());\n+        onView(withId(R.id.addViaUrlButton)).perform(scrollTo(), click());\n         onView(withId(R.id.text)).perform(replaceText(feed.getDownload_url()));", "originalCommit": "12b50f9a07d7aea8c508bb2897921702259375ba", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "81607ef4e5ccd49e606888364a1d6803665c0ae7", "url": "https://github.com/AntennaPod/AntennaPod/commit/81607ef4e5ccd49e606888364a1d6803665c0ae7", "message": "Minor Fixes", "committedDate": "2020-11-07T21:33:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTI5Nzg0NA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4647#discussion_r519297844", "bodyText": "Could you please make this one single line? Same for the other ViewBinding\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    AddfeedBinding viewBinding;\n          \n          \n            \n            \n          \n          \n            \n                    viewBinding = AddfeedBinding.inflate(getLayoutInflater());\n          \n          \n            \n                    AddfeedBinding viewBinding = AddfeedBinding.inflate(getLayoutInflater());", "author": "ByteHamster", "createdAt": "2020-11-08T08:43:49Z", "path": "app/src/main/java/de/danoeh/antennapod/fragment/AddFeedFragment.java", "diffHunk": "@@ -59,29 +60,33 @@ public View onCreateView(@NonNull LayoutInflater inflater,\n                              @Nullable ViewGroup container,\n                              @Nullable Bundle savedInstanceState) {\n         super.onCreateView(inflater, container, savedInstanceState);\n-        View root = inflater.inflate(R.layout.addfeed, container, false);\n+        AddfeedBinding viewBinding;\n+\n+        viewBinding = AddfeedBinding.inflate(getLayoutInflater());", "originalCommit": "81607ef4e5ccd49e606888364a1d6803665c0ae7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d4b9082a0783360070d606df01a1711f3f552557", "url": "https://github.com/AntennaPod/AntennaPod/commit/d4b9082a0783360070d606df01a1711f3f552557", "message": "Minor Fixes", "committedDate": "2020-11-08T09:59:14Z", "type": "commit"}]}