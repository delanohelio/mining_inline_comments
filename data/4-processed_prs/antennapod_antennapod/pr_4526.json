{"pr_number": 4526, "pr_title": "Move notification settings to their own screen", "pr_createdAt": "2020-10-14T06:29:08Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4526", "timeline": [{"oid": "f8339413e15b598ee1b43a2a7403cab04edf00c7", "url": "https://github.com/AntennaPod/AntennaPod/commit/f8339413e15b598ee1b43a2a7403cab04edf00c7", "message": "commit 1\nadded a new fragment named \"notification manager\"\nreplaced all settings related into this fragment", "committedDate": "2020-10-14T06:21:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU4Nzg1OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504587859", "bodyText": "Please rename the xml file to preferences_notifications (plural). I think that reads a bit better. The Java class name is fine as-is", "author": "ByteHamster", "createdAt": "2020-10-14T11:00:54Z", "path": "app/src/main/java/de/danoeh/antennapod/fragment/preferences/NotificationPreferencesFragment.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package de.danoeh.antennapod.fragment.preferences;\n+\n+import android.os.Bundle;\n+import androidx.preference.PreferenceFragmentCompat;\n+import de.danoeh.antennapod.R;\n+import de.danoeh.antennapod.activity.PreferenceActivity;\n+import de.danoeh.antennapod.core.preferences.GpodnetPreferences;\n+\n+public class NotificationPreferencesFragment extends PreferenceFragmentCompat {\n+\n+    private static final String TAG = \"NotificationPrefFragment\";\n+    private static final String PREF_GPODNET_NOTIFICATIONS = \"pref_gpodnet_notifications\";\n+\n+    @Override\n+    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {\n+        addPreferencesFromResource(R.xml.preferences_notification);", "originalCommit": "f8339413e15b598ee1b43a2a7403cab04edf00c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgxNDA5Ng==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504814096", "bodyText": "renamed as preferences_notifications", "author": "chrk2205", "createdAt": "2020-10-14T16:28:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU4Nzg1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU4ODc1NA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504588754", "bodyText": "Please use plural here and move the setting above the statistics screen. Also, having an icon would be great :) I think the bell icon that is already shipped with Android Studio would work (new->Vector asset).", "author": "ByteHamster", "createdAt": "2020-10-14T11:02:33Z", "path": "app/src/main/res/xml/preferences.xml", "diffHunk": "@@ -44,6 +44,10 @@\n             android:title=\"@string/statistics_label\"\n             android:icon=\"?attr/statistics\" />\n \n+    <Preference\n+            android:key=\"notification\"", "originalCommit": "f8339413e15b598ee1b43a2a7403cab04edf00c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgxMzgxNQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504813815", "bodyText": "added two new vector asset(filled bell icon) for dark and light modes", "author": "chrk2205", "createdAt": "2020-10-14T16:28:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU4ODc1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU4OTEwNQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504589105", "bodyText": "Please delete instead of commenting. The setting is no longer used in the old location, so the code does not have to be kept either.", "author": "ByteHamster", "createdAt": "2020-10-14T11:03:13Z", "path": "app/src/main/res/xml/preferences_gpodder.xml", "diffHunk": "@@ -26,10 +26,10 @@\n     <Preference\n             android:key=\"pref_gpodnet_hostname\"\n             android:title=\"@string/pref_gpodnet_sethostname_title\"/>\n-    <SwitchPreferenceCompat\n+<!--    <SwitchPreferenceCompat", "originalCommit": "f8339413e15b598ee1b43a2a7403cab04edf00c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgxMzI0MQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504813241", "bodyText": "removed all the commented code.", "author": "chrk2205", "createdAt": "2020-10-14T16:27:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU4OTEwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU4OTQwMg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504589402", "bodyText": "I would rather call this simply \"Notifications\" (not manager).", "author": "ByteHamster", "createdAt": "2020-10-14T11:03:47Z", "path": "core/src/main/res/values/strings.xml", "diffHunk": "@@ -30,6 +30,7 @@\n     <string name=\"episode_cache_full_message\">The episode cache limit has been reached. You can increase the cache size in the Settings.</string>\n     <string name=\"playback_statistics_label\">Playback</string>\n     <string name=\"download_statistics_label\">Downloads</string>\n+    <string name=\"notification_pref_fragment\">Notification Manager</string>", "originalCommit": "f8339413e15b598ee1b43a2a7403cab04edf00c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgxMjY1Ng==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504812656", "bodyText": "changed the name to Notifications", "author": "chrk2205", "createdAt": "2020-10-14T16:26:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU4OTQwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU5Mjc3NQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504592775", "bodyText": "I think some of the titles can be simplified, now that it is its own screen. Instead of\n== Notifications ==\nShow download report\nShow auto download report\nShow notifications on sync errors\n\nI would suggest something like\n== Notifications ==\nAutomatic download completed\nDownload errors\nSynchronization errors\n\n@keunes thoughts?", "author": "ByteHamster", "createdAt": "2020-10-14T11:10:00Z", "path": "app/src/main/res/xml/preferences_notification.xml", "diffHunk": "@@ -0,0 +1,22 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<PreferenceScreen\n+    xmlns:android=\"http://schemas.android.com/apk/res/android\">\n+\n+    <SwitchPreferenceCompat\n+        android:defaultValue=\"true\"\n+        android:enabled=\"true\"\n+        android:key=\"prefShowDownloadReport\"\n+        android:summary=\"@string/pref_showDownloadReport_sum\"\n+        android:title=\"@string/pref_showDownloadReport_title\" />\n+    <SwitchPreferenceCompat\n+        android:defaultValue=\"false\"\n+        android:enabled=\"true\"\n+        android:key=\"prefShowAutoDownloadReport\"\n+        android:summary=\"@string/pref_showAutoDownloadReport_sum\"\n+        android:title=\"@string/pref_showAutoDownloadReport_title\" />\n+    <SwitchPreferenceCompat\n+        android:defaultValue=\"true\"\n+        android:key=\"pref_gpodnet_notifications\"\n+        android:summary=\"@string/pref_gpodnet_notifications_sum\"\n+        android:title=\"@string/pref_gpodnet_notifications_title\" />", "originalCommit": "f8339413e15b598ee1b43a2a7403cab04edf00c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg3NzQ2MQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504877461", "bodyText": "Good idea. Thinking about it for a while, I think it'd be good to unify their form (include the verb). And maybe add an explanatory text above, to give some context? (just extended the list to show how it could work when more notification options are added)\n== Notifications ==\n\nShow a notification for the following events:\n\nnew episode available (-> open new screen with 'all' switch & list of per podcast-settings below)\nautomatic download completed\ndownload (of what?) failed\nsynchronization failed\nautomatic back-up failed", "author": "keunes", "createdAt": "2020-10-14T18:14:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU5Mjc3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg4OTMyMg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504889322", "bodyText": "download (of what?) failed\n\nEpisodes or feeds. The same notification is used for both.", "author": "ByteHamster", "createdAt": "2020-10-14T18:33:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU5Mjc3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQxMDAxMA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r505410010", "bodyText": "And what do you think of adding that extra sentence? Or is something like that already in place?", "author": "keunes", "createdAt": "2020-10-15T09:48:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU5Mjc3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQxODgwNg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r505418806", "bodyText": "It's not in place but starting with Android 8.0, the system manages notification settings like those. I wouldn't spend too much time on the UI here because I want to rather show the system settings and use that screen as a fall-back for older devices. System settings have a lot more options than just enable/disable.", "author": "ByteHamster", "createdAt": "2020-10-15T10:01:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU5Mjc3NQ=="}], "type": "inlineReview"}, {"oid": "caa9019868a94a17ac834fa48334bf6f6fdbac68", "url": "https://github.com/AntennaPod/AntennaPod/commit/caa9019868a94a17ac834fa48334bf6f6fdbac68", "message": "commit 2\nchanges requested", "committedDate": "2020-10-14T16:25:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwOTg2NQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r504909865", "bodyText": "Please set android:fillColor to #FFFFFFFF instead of using android:tint. I know that Android Studio does that but I think using the colour directly is more clean :)", "author": "ByteHamster", "createdAt": "2020-10-14T19:09:39Z", "path": "core/src/main/res/drawable/ic_notifications_white.xml", "diffHunk": "@@ -0,0 +1,5 @@\n+<vector android:height=\"24dp\" android:tint=\"#FFFFFF\"\n+    android:viewportHeight=\"24.0\" android:viewportWidth=\"24.0\"\n+    android:width=\"24dp\" xmlns:android=\"http://schemas.android.com/apk/res/android\">\n+    <path android:fillColor=\"#FF000000\" android:pathData=\"M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.89,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32L13.5,4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z\"/>", "originalCommit": "caa9019868a94a17ac834fa48334bf6f6fdbac68", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE4MjYxOA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r505182618", "bodyText": "@ByteHamster\nfor all the remaining icons used it is filled with \"#FF000000\" so i think its fine to use it for this icon as well!!\ndone!!", "author": "chrk2205", "createdAt": "2020-10-15T05:59:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDkwOTg2NQ=="}], "type": "inlineReview"}, {"oid": "726bc0dd3c266d7b86ece3c82a3375b95afa62f0", "url": "https://github.com/AntennaPod/AntennaPod/commit/726bc0dd3c266d7b86ece3c82a3375b95afa62f0", "message": "commit 3", "committedDate": "2020-10-15T06:17:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI5NDk2Ng==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r505294966", "bodyText": "Please use the same indention as the rest of the file (12 spaces instead of 8)", "author": "ByteHamster", "createdAt": "2020-10-15T07:54:43Z", "path": "app/src/main/res/xml/preferences.xml", "diffHunk": "@@ -39,6 +39,11 @@\n             android:summary=\"@string/storage_sum\"\n             android:icon=\"?attr/storage\" />\n \n+    <Preference\n+        android:key=\"notifications\"\n+        android:title=\"@string/notification_pref_fragment\"\n+        android:icon=\"?attr/ic_notifications\"/>", "originalCommit": "726bc0dd3c266d7b86ece3c82a3375b95afa62f0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTMzNjQzMw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r505336433", "bodyText": "done!!\nthankyou\n@ByteHamster", "author": "chrk2205", "createdAt": "2020-10-15T08:29:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI5NDk2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTgzNzAxNQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r505837015", "bodyText": "Looks like you indented the other file but not this file. The other file was fine like it was (but it's also fine like it is now). What I wanted to achieve is consistency within one file. The lines above are indented differently than the other preferences in the same file.", "author": "ByteHamster", "createdAt": "2020-10-15T20:49:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI5NDk2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODcyNzQyMQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4526#discussion_r508727421", "bodyText": "@ByteHamster\nDone!!", "author": "chrk2205", "createdAt": "2020-10-20T17:56:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI5NDk2Ng=="}], "type": "inlineReview"}, {"oid": "3984152457a27738cbab0289e7b35f563eda83fd", "url": "https://github.com/AntennaPod/AntennaPod/commit/3984152457a27738cbab0289e7b35f563eda83fd", "message": "commit 4", "committedDate": "2020-10-15T08:26:14Z", "type": "commit"}, {"oid": "2d710d1db9ffecb0d24f77ab28a169f1e84c9c8c", "url": "https://github.com/AntennaPod/AntennaPod/commit/2d710d1db9ffecb0d24f77ab28a169f1e84c9c8c", "message": "commit 5", "committedDate": "2020-10-20T17:49:54Z", "type": "commit"}]}