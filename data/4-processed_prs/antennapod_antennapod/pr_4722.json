{"pr_number": 4722, "pr_title": "Handle bluetooth and headphone disconnect", "pr_createdAt": "2020-11-28T04:07:32Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4722", "timeline": [{"oid": "a4a01b99fc5aa19a84bfdc9baa20b034ab3dfb2e", "url": "https://github.com/AntennaPod/AntennaPod/commit/a4a01b99fc5aa19a84bfdc9baa20b034ab3dfb2e", "message": "handle bluetooth and headphone disconnect", "committedDate": "2020-11-28T04:06:26Z", "type": "commit"}, {"oid": "b4bad030029236225d314e0a74f6a609a566c0b4", "url": "https://github.com/AntennaPod/AntennaPod/commit/b4bad030029236225d314e0a74f6a609a566c0b4", "message": "handle when there is an internal zoom/whatsapp/wechat happening", "committedDate": "2020-11-28T18:25:02Z", "type": "commit"}, {"oid": "d7bfe38bdb8faad213deb6ca8d93f8f6aeb1a9f4", "url": "https://github.com/AntennaPod/AntennaPod/commit/d7bfe38bdb8faad213deb6ca8d93f8f6aeb1a9f4", "message": "checkstyle", "committedDate": "2020-11-28T22:31:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUwMTk3NQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r532501975", "bodyText": "Could you please change this to an enum?", "author": "ByteHamster", "createdAt": "2020-11-30T10:44:03Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -1465,7 +1464,7 @@ public void onReceive(Context context, Intent intent) {\n             Log.d(TAG, \"Received Auto Connection update: \" + status);\n             if (!isConnectedToCar) {\n                 Log.d(TAG, \"Car was unplugged during playback.\");\n-                pauseIfPauseOnDisconnect();\n+                pauseIfPauseOnDisconnect(\"bluetooth\");", "originalCommit": "d7bfe38bdb8faad213deb6ca8d93f8f6aeb1a9f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYzNDg0NA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r532634844", "bodyText": "ready for a review", "author": "tonytamsf", "createdAt": "2020-11-30T14:26:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUwMTk3NQ=="}], "type": "inlineReview"}, {"oid": "97f5170b4da4c168922cc6fca10feda7c205b1a0", "url": "https://github.com/AntennaPod/AntennaPod/commit/97f5170b4da4c168922cc6fca10feda7c205b1a0", "message": "use enum", "committedDate": "2020-11-30T14:25:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI4NjEwNw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r548286107", "bodyText": "Why does this need to be executed even when the player is not actually paused? I did not try to do it but I could imagine a scenario where the headset is unplugged and plugged in while playing with Bluetooth. It then has  transientPause set to true. When then pausing manually, the flag is still true. Wouldn't re-connecting then assume a wrong state?", "author": "ByteHamster", "createdAt": "2020-12-23T22:14:21Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -1534,19 +1538,25 @@ public void onReceive(Context context, Intent intent) {\n         public void onReceive(Context context, Intent intent) {\n             // sound is about to change, eg. bluetooth -> speaker\n             Log.d(TAG, \"Pausing playback because audio is becoming noisy\");\n-            pauseIfPauseOnDisconnect();\n+            pauseIfPauseOnDisconnect(AudioOutputMode.PHONE_SPEAKER);\n         }\n         // android.media.AUDIO_BECOMING_NOISY\n     };\n \n     /**\n      * Pauses playback if PREF_PAUSE_ON_HEADSET_DISCONNECT was set to true.\n      */\n-    private void pauseIfPauseOnDisconnect() {\n-        if (UserPreferences.isPauseOnHeadsetDisconnect() && !isCasting()) {\n-            if (mediaPlayer.getPlayerStatus() == PlayerStatus.PLAYING) {\n-                transientPause = true;\n-            }\n+    private void pauseIfPauseOnDisconnect(AudioOutputMode outputMode) {\n+        Log.d(TAG, \"pauseIfPauseOnDisconnect() \" + outputMode);\n+        // If bluetooth is playing, headset is plugged in, headset unplugged, bluetooth should continue\n+        // If headset is playing, bluetooth is connected, bluetooth is unplugged, headset should continue\n+        // If headset or bluetooth is unplugged (the speaker should not be playing)\n+        if (mediaPlayer.getPlayerStatus() == PlayerStatus.PLAYING) {\n+            transientPause = true;", "originalCommit": "97f5170b4da4c168922cc6fca10feda7c205b1a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDI4MDYyMg==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r550280622", "bodyText": "@ByteHamster\nPlease go ahead and test it.   I tested your scenario and it works as expected (correctly)\ntransientPause = true is needed because unpauseIfPauseOnDisconnect() will set it to false later and it will be in the right state\nMaybe the code could be done to be more understandable, let me know if you want me to document it better", "author": "tonytamsf", "createdAt": "2020-12-30T18:06:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI4NjEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzMwMDY3OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r563300679", "bodyText": "Sorry for the late reply. I can confirm that it works but I am still wondering why it is necessary to always set it to true. Is it because the Android system pauses playback automatically and we want it to resume? What would break if the assignment was moved down inside the if statement next to mediaPlayer.pause?", "author": "ByteHamster", "createdAt": "2021-01-24T14:28:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI4NjEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzM3MTc2OA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r567371768", "bodyText": "@ByteHamster yup, your suggestion works.", "author": "tonytamsf", "createdAt": "2021-01-31T06:05:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODI4NjEwNw=="}], "type": "inlineReview"}, {"oid": "ae11204daf29a4bbc607864bdaa4d25c4a5dc547", "url": "https://github.com/AntennaPod/AntennaPod/commit/ae11204daf29a4bbc607864bdaa4d25c4a5dc547", "message": "Trigger Build", "committedDate": "2021-01-20T07:03:18Z", "type": "commit"}, {"oid": "9a4b863a1a5354037232ab45b39c0a74bbdea91f", "url": "https://github.com/AntennaPod/AntennaPod/commit/9a4b863a1a5354037232ab45b39c0a74bbdea91f", "message": "remove extra code", "committedDate": "2021-01-31T05:37:59Z", "type": "commit"}, {"oid": "daeb207dbeed0013ff786ee9f8f71d995b43248f", "url": "https://github.com/AntennaPod/AntennaPod/commit/daeb207dbeed0013ff786ee9f8f71d995b43248f", "message": "fix disconnect+connect for streaming", "committedDate": "2021-01-31T06:04:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzQ5MTg5NA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r567491894", "bodyText": "Could you please revert this line change to keep the git history clean?", "author": "ByteHamster", "createdAt": "2021-01-31T22:09:24Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/LocalPSMP.java", "diffHunk": "@@ -299,7 +299,6 @@ public void resume() {\n     private void resumeSync() {\n         if (playerStatus == PlayerStatus.PAUSED || playerStatus == PlayerStatus.PREPARED) {\n             int focusGained = AudioManagerCompat.requestAudioFocus(audioManager, audioFocusRequest);\n-", "originalCommit": "daeb207dbeed0013ff786ee9f8f71d995b43248f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzUwODY0Nw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r567508647", "bodyText": "done", "author": "tonytamsf", "createdAt": "2021-02-01T00:18:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzQ5MTg5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzUwMzkzMQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r567503931", "bodyText": "Note to reviewer: If there is a phone call, do not unpause", "author": "tonytamsf", "createdAt": "2021-01-31T23:43:02Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -1534,27 +1538,31 @@ public void onReceive(Context context, Intent intent) {\n         public void onReceive(Context context, Intent intent) {\n             // sound is about to change, eg. bluetooth -> speaker\n             Log.d(TAG, \"Pausing playback because audio is becoming noisy\");\n-            pauseIfPauseOnDisconnect();\n+            pauseIfPauseOnDisconnect(AudioOutputMode.PHONE_SPEAKER);\n         }\n-        // android.media.AUDIO_BECOMING_NOISY\n     };\n \n     /**\n      * Pauses playback if PREF_PAUSE_ON_HEADSET_DISCONNECT was set to true.\n      */\n-    private void pauseIfPauseOnDisconnect() {\n-        if (UserPreferences.isPauseOnHeadsetDisconnect() && !isCasting()) {\n-            if (mediaPlayer.getPlayerStatus() == PlayerStatus.PLAYING) {\n-                transientPause = true;\n-            }\n-            mediaPlayer.pause(!UserPreferences.isPersistNotify(), true);\n+    private void pauseIfPauseOnDisconnect(AudioOutputMode outputMode) {\n+        Log.d(TAG, \"pauseIfPauseOnDisconnect() \" + outputMode);\n+        if (UserPreferences.isPauseOnHeadsetDisconnect()\n+                && outputMode == AudioOutputMode.PHONE_SPEAKER\n+                && !isCasting()) {\n+            transientPause = true;\n+            mediaPlayer.pause(!UserPreferences.isPersistNotify(), false);\n         }\n     }\n \n     /**\n      * @param bluetooth true if the event for unpausing came from bluetooth\n      */\n     private void unpauseIfPauseOnDisconnect(boolean bluetooth) {\n+        if (mediaPlayer.isAudioChannelInUse()) {\n+            Log.d(TAG, \"unpauseIfPauseOnDisconnect() audio is in use\");\n+            return;\n+        }", "originalCommit": "daeb207dbeed0013ff786ee9f8f71d995b43248f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzUwNDA5Mw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r567504093", "bodyText": "note for reviewer: When headphone is disconnected, and the output is going to the phone speaker, then pause.  This would allow us to continue playing if the output would go to bluetooth", "author": "tonytamsf", "createdAt": "2021-01-31T23:44:39Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -1534,27 +1538,31 @@ public void onReceive(Context context, Intent intent) {\n         public void onReceive(Context context, Intent intent) {\n             // sound is about to change, eg. bluetooth -> speaker\n             Log.d(TAG, \"Pausing playback because audio is becoming noisy\");\n-            pauseIfPauseOnDisconnect();\n+            pauseIfPauseOnDisconnect(AudioOutputMode.PHONE_SPEAKER);\n         }\n-        // android.media.AUDIO_BECOMING_NOISY\n     };\n \n     /**\n      * Pauses playback if PREF_PAUSE_ON_HEADSET_DISCONNECT was set to true.\n      */\n-    private void pauseIfPauseOnDisconnect() {\n-        if (UserPreferences.isPauseOnHeadsetDisconnect() && !isCasting()) {\n-            if (mediaPlayer.getPlayerStatus() == PlayerStatus.PLAYING) {\n-                transientPause = true;\n-            }\n-            mediaPlayer.pause(!UserPreferences.isPersistNotify(), true);\n+    private void pauseIfPauseOnDisconnect(AudioOutputMode outputMode) {\n+        Log.d(TAG, \"pauseIfPauseOnDisconnect() \" + outputMode);\n+        if (UserPreferences.isPauseOnHeadsetDisconnect()\n+                && outputMode == AudioOutputMode.PHONE_SPEAKER\n+                && !isCasting()) {\n+            transientPause = true;\n+            mediaPlayer.pause(!UserPreferences.isPersistNotify(), false);", "originalCommit": "daeb207dbeed0013ff786ee9f8f71d995b43248f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzUwNDI5NQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r567504295", "bodyText": "note for reviewer: Switching from true to false would allow us to continue when the headphone is plug back in, when we were streaming when we unpluged", "author": "tonytamsf", "createdAt": "2021-01-31T23:46:15Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -1534,27 +1538,31 @@ public void onReceive(Context context, Intent intent) {\n         public void onReceive(Context context, Intent intent) {\n             // sound is about to change, eg. bluetooth -> speaker\n             Log.d(TAG, \"Pausing playback because audio is becoming noisy\");\n-            pauseIfPauseOnDisconnect();\n+            pauseIfPauseOnDisconnect(AudioOutputMode.PHONE_SPEAKER);\n         }\n-        // android.media.AUDIO_BECOMING_NOISY\n     };\n \n     /**\n      * Pauses playback if PREF_PAUSE_ON_HEADSET_DISCONNECT was set to true.\n      */\n-    private void pauseIfPauseOnDisconnect() {\n-        if (UserPreferences.isPauseOnHeadsetDisconnect() && !isCasting()) {\n-            if (mediaPlayer.getPlayerStatus() == PlayerStatus.PLAYING) {\n-                transientPause = true;\n-            }\n-            mediaPlayer.pause(!UserPreferences.isPersistNotify(), true);\n+    private void pauseIfPauseOnDisconnect(AudioOutputMode outputMode) {\n+        Log.d(TAG, \"pauseIfPauseOnDisconnect() \" + outputMode);\n+        if (UserPreferences.isPauseOnHeadsetDisconnect()\n+                && outputMode == AudioOutputMode.PHONE_SPEAKER\n+                && !isCasting()) {\n+            transientPause = true;\n+            mediaPlayer.pause(!UserPreferences.isPersistNotify(), false);", "originalCommit": "daeb207dbeed0013ff786ee9f8f71d995b43248f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "86f62283f5e4602ee853456b1aae0c603e7ff3f5", "url": "https://github.com/AntennaPod/AntennaPod/commit/86f62283f5e4602ee853456b1aae0c603e7ff3f5", "message": "revert", "committedDate": "2021-02-01T00:08:50Z", "type": "commit"}, {"oid": "c7209c3e259e1c36579f9c11f68d60f5af15a5fa", "url": "https://github.com/AntennaPod/AntennaPod/commit/c7209c3e259e1c36579f9c11f68d60f5af15a5fa", "message": "ws", "committedDate": "2021-02-01T00:12:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTU0MDg3NQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r601540875", "bodyText": "How about trying \" Play AntennaPod, unplug headphone, start Phone call, plug in headaphone - podcast should not start.\"\n\nHmm, when doing an actual phone call, AntennaPod does not start to play on my device, even without your PR. When executing the same steps with a music player, AntennaPod \"steals\" the audio focus. I think that's pretty unexpected too, so how about doing something like this?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    int mode = audioManager.getMode();\n          \n          \n            \n            \n          \n          \n            \n                    return (mode != AudioManager.MODE_NORMAL);\n          \n          \n            \n                    return (audioManager.getMode() != AudioManager.MODE_NORMAL || audioManager.isMusicActive());", "author": "ByteHamster", "createdAt": "2021-03-25T14:30:53Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackServiceMediaPlayer.java", "diffHunk": "@@ -335,6 +336,13 @@ final synchronized void setPlayerStatus(@NonNull PlayerStatus newStatus, Playabl\n         callback.statusChanged(new PSMPInfo(oldPlayerStatus, playerStatus, getPlayable()));\n     }\n \n+    public boolean isAudioChannelInUse() {\n+        AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);\n+        int mode = audioManager.getMode();\n+\n+        return (mode != AudioManager.MODE_NORMAL);", "originalCommit": "c7209c3e259e1c36579f9c11f68d60f5af15a5fa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTU0OTY0Mw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r601549643", "bodyText": "Can't this call actually be removed? It doesn't do anything internally, now.", "author": "ByteHamster", "createdAt": "2021-03-25T14:40:30Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -1499,11 +1503,11 @@ public void onReceive(Context context, Intent intent) {\n \n             if (TextUtils.equals(intent.getAction(), Intent.ACTION_HEADSET_PLUG)) {\n                 int state = intent.getIntExtra(\"state\", -1);\n+                Log.d(TAG, \"Headset plug event. State is \" + state);\n                 if (state != -1) {\n-                    Log.d(TAG, \"Headset plug event. State is \" + state);\n                     if (state == UNPLUGGED) {\n                         Log.d(TAG, \"Headset was unplugged during playback.\");\n-                        pauseIfPauseOnDisconnect();\n+                        pauseIfPauseOnDisconnect(AudioOutputMode.HEADPHONE);", "originalCommit": "c7209c3e259e1c36579f9c11f68d60f5af15a5fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTM3NTIyNA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r605375224", "bodyText": "I thought it would still be good to call the function in case there is a change to our logic in pauseIfPauseOnDisconnect() I can remove this if you wanted", "author": "tonytamsf", "createdAt": "2021-04-01T04:56:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTU0OTY0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1MTE5NjU1OA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r651196558", "bodyText": "Sorry for the long delay, I somehow forgot about this PR. I think it would be better to remove it. Produces less \"dead\" code.", "author": "ByteHamster", "createdAt": "2021-06-14T18:54:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTU0OTY0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NzM1NjA2Nw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r667356067", "bodyText": "removed the line that doesn't do anything", "author": "tonytamsf", "createdAt": "2021-07-10T16:03:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTU0OTY0Mw=="}], "type": "inlineReview"}, {"oid": "7deee0fe00cf74dbcd0607d69ecff4481532d95b", "url": "https://github.com/AntennaPod/AntennaPod/commit/7deee0fe00cf74dbcd0607d69ecff4481532d95b", "message": "Update core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackServiceMediaPlayer.java\n\nCo-authored-by: ByteHamster <ByteHamster@users.noreply.github.com>", "committedDate": "2021-04-01T04:57:15Z", "type": "commit"}, {"oid": "046a833c526d570c0552bcc70684c47fdddea57a", "url": "https://github.com/AntennaPod/AntennaPod/commit/046a833c526d570c0552bcc70684c47fdddea57a", "message": "Trigger Build", "committedDate": "2021-07-09T16:31:01Z", "type": "commit"}, {"oid": "763eddf75ecd9d5c6e2d118c6789c7b0d7c1ffd3", "url": "https://github.com/AntennaPod/AntennaPod/commit/763eddf75ecd9d5c6e2d118c6789c7b0d7c1ffd3", "message": "remove unused lines when we detect headphone unplugged", "committedDate": "2021-07-10T16:01:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NzM3NTc0OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r667375749", "bodyText": "Isn't this one not doing anything, too?", "author": "ByteHamster", "createdAt": "2021-07-10T19:20:37Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -1465,7 +1469,7 @@ public void onReceive(Context context, Intent intent) {\n             Log.d(TAG, \"Received Auto Connection update: \" + status);\n             if (!isConnectedToCar) {\n                 Log.d(TAG, \"Car was unplugged during playback.\");\n-                pauseIfPauseOnDisconnect();\n+                pauseIfPauseOnDisconnect(AudioOutputMode.BLUETOOTH);", "originalCommit": "763eddf75ecd9d5c6e2d118c6789c7b0d7c1ffd3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NzQxNDA1NA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r667414054", "bodyText": "removed, thanks", "author": "tonytamsf", "createdAt": "2021-07-11T03:13:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NzM3NTc0OQ=="}], "type": "inlineReview"}, {"oid": "dce17163ae062b6c6ed45a7408fba0c899921026", "url": "https://github.com/AntennaPod/AntennaPod/commit/dce17163ae062b6c6ed45a7408fba0c899921026", "message": "remove code that does not do anything", "committedDate": "2021-07-11T03:13:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NzQzMjkzOA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4722#discussion_r667432938", "bodyText": "I don't think we need this one either, now. Only SPEAKER is ever used.", "author": "ByteHamster", "createdAt": "2021-07-11T06:55:57Z", "path": "core/src/main/java/de/danoeh/antennapod/core/service/playback/PlaybackService.java", "diffHunk": "@@ -219,6 +218,11 @@\n \n     private String autoSkippedFeedMediaId = null;\n \n+    private enum AudioOutputMode {\n+        BLUETOOTH,\n+        HEADPHONE,\n+        PHONE_SPEAKER\n+    }\n     /**", "originalCommit": "dce17163ae062b6c6ed45a7408fba0c899921026", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6e2aeb15a3a4a97e74df2fd5dbc9e9a5b61171ca", "url": "https://github.com/AntennaPod/AntennaPod/commit/6e2aeb15a3a4a97e74df2fd5dbc9e9a5b61171ca", "message": "Merge branch 'develop' into bluetooth-headset-disconnect", "committedDate": "2021-07-11T16:58:07Z", "type": "commit"}, {"oid": "317291a334cddbfb6e1627da2864d07a73e9b6c2", "url": "https://github.com/AntennaPod/AntennaPod/commit/317291a334cddbfb6e1627da2864d07a73e9b6c2", "message": "Removed more unused code", "committedDate": "2021-07-11T17:00:02Z", "type": "commit"}]}