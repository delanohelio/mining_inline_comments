{"pr_number": 4411, "pr_title": "Close keyboard when dialogs were dismissed", "pr_createdAt": "2020-09-08T14:41:51Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4411", "timeline": [{"oid": "9e1c50ea637819e5bbb1dcb457b2299d48d20846", "url": "https://github.com/AntennaPod/AntennaPod/commit/9e1c50ea637819e5bbb1dcb457b2299d48d20846", "message": "change stateHidden to stateAlwaysHidden", "committedDate": "2020-09-08T14:30:09Z", "type": "commit"}, {"oid": "22e9a9af7e0931fd558066c6ea1bab6aa8237013", "url": "https://github.com/AntennaPod/AntennaPod/commit/22e9a9af7e0931fd558066c6ea1bab6aa8237013", "message": "close keyboard when sleep time has been selected", "committedDate": "2020-09-08T14:34:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkwMTc2OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4411#discussion_r485901769", "bodyText": "Is this still needed even when the manifest is changed?", "author": "ByteHamster", "createdAt": "2020-09-09T20:26:53Z", "path": "app/src/main/java/de/danoeh/antennapod/dialog/SleepTimerDialog.java", "diffHunk": "@@ -153,4 +155,9 @@ private void updateTime() {\n         timeDisplay.setVisibility(controller.sleepTimerActive() ? View.VISIBLE : View.GONE);\n         time.setText(Converter.getDurationStringLong((int) controller.getSleepTimerTimeLeft()));\n     }\n+\n+    private void closeKeyboard(View content) {\n+        InputMethodManager imm = (InputMethodManager) getContext().getSystemService(Activity.INPUT_METHOD_SERVICE);\n+        imm.hideSoftInputFromWindow(content.getWindowToken(), 0);", "originalCommit": "22e9a9af7e0931fd558066c6ea1bab6aa8237013", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMwNzk5Ng==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4411#discussion_r486307996", "bodyText": "Yes, because if you start the sleep timer, the dialog is not dismissed, which means we have to manual hide the keyboard.", "author": "asdoi", "createdAt": "2020-09-10T12:48:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkwMTc2OQ=="}], "type": "inlineReview"}, {"oid": "0adee1ef585159631a04deee9ed43486bae67b24", "url": "https://github.com/AntennaPod/AntennaPod/commit/0adee1ef585159631a04deee9ed43486bae67b24", "message": "Merge branch 'develop' into dialog_keyboard", "committedDate": "2020-09-10T12:47:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjQ2Nw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4411#discussion_r486436467", "bodyText": "The  documentation says:\n \"stateAlwaysHidden\" \tThe soft keyboard is always hidden when the activity's main window has input focus.\nAs all search actions, or actions where the user has to input some text, were handled by fragments, the activity's main window does not get the focus and so the keyboard does not hide.\nAnyway after dismissing a dialog the main window gets the focus again and the keyboard will hide.", "author": "asdoi", "createdAt": "2020-09-10T15:30:17Z", "path": "app/src/main/AndroidManifest.xml", "diffHunk": "@@ -80,7 +80,7 @@\n         <activity\n             android:name=\".activity.MainActivity\"\n             android:configChanges=\"keyboardHidden|orientation|screenSize|smallestScreenSize|screenLayout|density|uiMode|keyboard|navigation\"\n-            android:windowSoftInputMode=\"stateHidden\"\n+            android:windowSoftInputMode=\"stateAlwaysHidden\"", "originalCommit": "0adee1ef585159631a04deee9ed43486bae67b24", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}