{"pr_number": 4388, "pr_title": "Fix a few more deprecations, tiny cleanup", "pr_createdAt": "2020-08-31T00:23:54Z", "pr_url": "https://github.com/AntennaPod/AntennaPod/pull/4388", "timeline": [{"oid": "ff34117c8ffd9eae43c5f1ec2509bce241cf5981", "url": "https://github.com/AntennaPod/AntennaPod/commit/ff34117c8ffd9eae43c5f1ec2509bce241cf5981", "message": "Fix an integer division in a floating-point context", "committedDate": "2020-08-31T00:02:06Z", "type": "commit"}, {"oid": "af9640eb3e39813c8158e6b065d92df0be72d6aa", "url": "https://github.com/AntennaPod/AntennaPod/commit/af9640eb3e39813c8158e6b065d92df0be72d6aa", "message": "Fix redundant casts", "committedDate": "2020-08-31T00:04:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMzA0Nw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4388#discussion_r479913047", "bodyText": "I think this class should also filter calls to deprecated methods. Does the old method internally call the new method?", "author": "ByteHamster", "createdAt": "2020-08-31T06:08:45Z", "path": "app/src/main/java/de/danoeh/antennapod/view/LockableBottomSheetBehavior.java", "diffHunk": "@@ -47,28 +47,28 @@ public boolean onTouchEvent(CoordinatorLayout parent, V child, MotionEvent event\n \n     @Override\n     public boolean onStartNestedScroll(CoordinatorLayout coordinatorLayout, V child, View directTargetChild,\n-                                       View target, int nestedScrollAxes) {\n+                                       View target, int axes, int type) {\n         boolean handled = false;\n \n         if (!isLocked) {\n-            handled = super.onStartNestedScroll(coordinatorLayout, child, directTargetChild, target, nestedScrollAxes);\n+            handled = super.onStartNestedScroll(coordinatorLayout, child, directTargetChild, target, axes, type);", "originalCommit": "be0f86b434d4f5c5879a217fb0ee4f1e84dcd4a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ4OTE5Mw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4388#discussion_r481489193", "bodyText": "Does the old method internally call the new method?\n\nNope.", "author": "TacoTheDank", "createdAt": "2020-09-01T23:34:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMzA0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTE2MDg2Nw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4388#discussion_r491160867", "bodyText": "What if a library function on the outside still calls the old method? It is then no longer blocked properly. Have you tested the change?", "author": "ByteHamster", "createdAt": "2020-09-18T19:55:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMzA0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc1MDYxMw==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4388#discussion_r491750613", "bodyText": "That isn't possible as far as I know. The old methods are only called if the type is ViewCompat.TYPE_TOUCH, which isn't used anywhere in the project.\nAs a side note, the old methods are in AndroidX CoordinatorLayout, while the new ones are in the Google Material library (in BottomSheetBehavior).\nI've fixed this deprecation before in Slide; I tested and everything worked as it was supposed to (though YMMV).", "author": "TacoTheDank", "createdAt": "2020-09-20T23:56:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMzA0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMzc1OA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4388#discussion_r479913758", "bodyText": "I think this lead to problems with notification icons in the past. Could you please test this on old Android versions or research in the git history if it was there at some point and then removed?", "author": "ByteHamster", "createdAt": "2020-08-31T06:10:39Z", "path": "core/build.gradle", "diffHunk": "@@ -8,6 +8,8 @@ android {\n         targetSdkVersion rootProject.ext.targetSdkVersion\n \n         multiDexEnabled false\n+        vectorDrawables.useSupportLibrary true\n+        vectorDrawables.generatedDensities = []", "originalCommit": "be0f86b434d4f5c5879a217fb0ee4f1e84dcd4a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ5MDY2OQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4388#discussion_r481490669", "bodyText": "I can't run an emulator and I have no older Android device to test on, so I guess I'll remove it. I don't see anything in the git history either.", "author": "TacoTheDank", "createdAt": "2020-09-01T23:39:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxMzc1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxNDYyNA==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4388#discussion_r479914624", "bodyText": "Are you sure that this works on all Android versions? Widgets use RemoteViews and I am not sure if that is compatible with srcCompat.", "author": "ByteHamster", "createdAt": "2020-08-31T06:13:15Z", "path": "core/src/main/res/layout/player_widget.xml", "diffHunk": "@@ -22,7 +23,7 @@\n             android:background=\"?android:attr/selectableItemBackground\"\n             android:scaleType=\"fitCenter\"\n             android:padding=\"8dp\"\n-            android:src=\"@drawable/ic_av_play_white_24dp\" />\n+            app:srcCompat=\"@drawable/ic_av_play_white_24dp\" />", "originalCommit": "be0f86b434d4f5c5879a217fb0ee4f1e84dcd4a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ5MDcxMQ==", "url": "https://github.com/AntennaPod/AntennaPod/pull/4388#discussion_r481490711", "bodyText": "See above.", "author": "TacoTheDank", "createdAt": "2020-09-01T23:39:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxNDYyNA=="}], "type": "inlineReview"}, {"oid": "f8fca275616d5a55c8b9ce00f0327db5719bb621", "url": "https://github.com/AntennaPod/AntennaPod/commit/f8fca275616d5a55c8b9ce00f0327db5719bb621", "message": "Fix a lambda", "committedDate": "2020-09-01T23:40:44Z", "type": "commit"}, {"oid": "e75b98f474c49cafd5c79e2f58bcd502d18a2030", "url": "https://github.com/AntennaPod/AntennaPod/commit/e75b98f474c49cafd5c79e2f58bcd502d18a2030", "message": "Remove a piece of unnecessary code", "committedDate": "2020-09-01T23:41:02Z", "type": "commit"}, {"oid": "a37b36fa3e194ac6020914fa94546868b8b9e9a5", "url": "https://github.com/AntennaPod/AntennaPod/commit/a37b36fa3e194ac6020914fa94546868b8b9e9a5", "message": "Fix scroll and MenuItemCompat deprecations", "committedDate": "2020-09-01T23:41:26Z", "type": "commit"}]}