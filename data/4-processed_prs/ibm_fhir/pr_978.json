{"pr_number": 978, "pr_title": "issue #977 remove derby config from bulkdata.xml", "pr_createdAt": "2020-04-23T15:51:57Z", "pr_url": "https://github.com/IBM/FHIR/pull/978", "timeline": [{"oid": "75f100357456c6f1a44217c825307fda0d68e46c", "url": "https://github.com/IBM/FHIR/commit/75f100357456c6f1a44217c825307fda0d68e46c", "message": "issue #977 remove derby config from bulkdata.xml\n\nSigned-off-by: Albert Wang <xuwang@us.ibm.com>", "committedDate": "2020-04-23T15:51:26Z", "type": "commit"}, {"oid": "4a331f008ffa0626bf4a77c4b4948dc3247b5921", "url": "https://github.com/IBM/FHIR/commit/4a331f008ffa0626bf4a77c4b4948dc3247b5921", "message": "issue #977 update comments\n\nSigned-off-by: Albert Wang <xuwang@us.ibm.com>", "committedDate": "2020-04-23T15:56:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk4NDUzMA==", "url": "https://github.com/IBM/FHIR/pull/978#discussion_r413984530", "bodyText": "so it doesn't complain that fhirbatchDS doesn't exist by default?", "author": "lmsurpre", "createdAt": "2020-04-23T17:25:20Z", "path": "fhir-server/liberty-config/configDropins/defaults/bulkdata.xml", "diffHunk": "@@ -41,15 +44,21 @@\n             portNumber=\"50001\"\n             securityMechanism=\"15\"\n             serverName=\"${env.BATCH_DB_HOSTNAME}\"\n-            sslConnection=\"true\" /> -->\n-        <!-- <properties.postgresql\n+            sslConnection=\"true\" />\n+    </dataSource>\n+     -->\n+   \n+   <!-- Use postgresql for job repository  \n+    <dataSource id=\"fhirbatchDS\" jndiName=\"jdbc/fhirbatchDB\">\n+        <jdbcDriver libraryRef=\"fhirSharedLib\"/>\n+        <properties.postgresql\n             databaseName=\"jobdb\"\n             portNumber=\"5432\"\n             serverName=\"localhost\"\n             user=\"javabatch\"\n-            password=\"change-password\" /> -->\n-        <properties.derby.embedded createDatabase=\"create\" databaseName=\"derby/fhirDB\"/>\n+            password=\"change-password\" />\n     </dataSource>\n+    -->\n \n     <batchPersistence jobStoreRef=\"BatchDatabaseStore\"/>\n     <databaseStore dataSourceRef=\"fhirbatchDS\" id=\"BatchDatabaseStore\" schema=\"JBATCH\" tablePrefix=\"\"/>", "originalCommit": "4a331f008ffa0626bf4a77c4b4948dc3247b5921", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk5MTE4NQ==", "url": "https://github.com/IBM/FHIR/pull/978#discussion_r413991185", "bodyText": "yes, it doesn't complaint on these 2 lines, so I kept them here, and so only need to define the datasource in the overrides", "author": "albertwang-ibm", "createdAt": "2020-04-23T17:34:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk4NDUzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk5MjU0NA==", "url": "https://github.com/IBM/FHIR/pull/978#discussion_r413992544", "bodyText": "and yes, I verified that derby is used in this case. the job id is always 1 after each restart of the server.", "author": "albertwang-ibm", "createdAt": "2020-04-23T17:36:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk4NDUzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDEwOTU4OA==", "url": "https://github.com/IBM/FHIR/pull/978#discussion_r414109588", "bodyText": "OK, I havn't quite got around to test bulk export locally, but I'll take your word for it :-)", "author": "lmsurpre", "createdAt": "2020-04-23T20:41:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk4NDUzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDIxNzkwNw==", "url": "https://github.com/IBM/FHIR/pull/978#discussion_r414217907", "bodyText": "thanks! :)", "author": "albertwang-ibm", "createdAt": "2020-04-24T00:46:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk4NDUzMA=="}], "type": "inlineReview"}]}