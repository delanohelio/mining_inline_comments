{"pr_number": 1043, "pr_title": "Issue #1041, Issue #1042 - IG fixes / improvements", "pr_createdAt": "2020-05-07T19:07:41Z", "pr_url": "https://github.com/IBM/FHIR/pull/1043", "timeline": [{"oid": "c77bb7d82286d720ac07ef01f6a3012b3207b440", "url": "https://github.com/IBM/FHIR/commit/c77bb7d82286d720ac07ef01f6a3012b3207b440", "message": "Issue #1041, Issue #1042 - IG fixes / improvements\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-05-07T19:07:19Z", "type": "commit"}, {"oid": "714c7034584ad2209028fc4700ee5c6872743346", "url": "https://github.com/IBM/FHIR/commit/714c7034584ad2209028fc4700ee5c6872743346", "message": "Issue #1042 - updated FHIRValidationGuide.md\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-05-07T20:25:53Z", "type": "commit"}, {"oid": "5947eee093dd5bea48c47ed17057c8d71608679f", "url": "https://github.com/IBM/FHIR/commit/5947eee093dd5bea48c47ed17057c8d71608679f", "message": "Update readme.md #1041\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-05-08T10:26:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExMjc4Ng==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422112786", "bodyText": "Is it any different then our other IndexGenerators?  I'm wondering if this utility should be move to the base instead of copied to each IG.", "author": "lmsurpre", "createdAt": "2020-05-08T12:23:45Z", "path": "fhir-ig-davinci-pdex-plan-net/src/main/java/com/ibm/fhir/ig/davinci/pdex/plan/net/util/IndexGenerator.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * (C) Copyright IBM Corp. 2020\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.ibm.fhir.ig.davinci.pdex.plan.net.util;\n+\n+import java.io.File;\n+import java.io.FileOutputStream;\n+import java.io.FileReader;\n+import java.io.OutputStream;\n+\n+import com.ibm.fhir.model.format.Format;\n+import com.ibm.fhir.model.parser.FHIRParser;\n+import com.ibm.fhir.model.parser.exception.FHIRParserException;\n+import com.ibm.fhir.model.resource.Resource;\n+import com.ibm.fhir.registry.util.Index;\n+import com.ibm.fhir.registry.util.Index.Entry;\n+\n+public class IndexGenerator {", "originalCommit": "5947eee093dd5bea48c47ed17057c8d71608679f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExNzMyMg==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422117322", "bodyText": "Or, if you keep a separate copy in each ig module, maybe move them to src/test/java so they don't go in the actual jar.", "author": "lmsurpre", "createdAt": "2020-05-08T12:34:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExMjc4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjEzMjAzNw==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422132037", "bodyText": "I don't think it should go in tests. I will investigate making it a utility but there isn't a great place for it to go because it is reading from the local file system and anything outside of the project will lead to some wonky path resolution (though I'm sure it's doable).", "author": "JohnTimm", "createdAt": "2020-05-08T13:07:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExMjc4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExMzM4MA==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422113380", "bodyText": "I know its not a test, but maybe we should move it to src/test/java so that its not included in the actual Jar", "author": "lmsurpre", "createdAt": "2020-05-08T12:25:13Z", "path": "fhir-ig-davinci-pdex-plan-net/src/main/java/com/ibm/fhir/ig/davinci/pdex/plan/net/util/ResourceProcessor.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * (C) Copyright IBM Corp. 2020\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.ibm.fhir.ig.davinci.pdex.plan.net.util;\n+\n+import java.io.BufferedReader;\n+import java.io.File;\n+import java.io.FileReader;\n+import java.io.FileWriter;\n+\n+import javax.json.Json;\n+import javax.json.JsonBuilderFactory;\n+import javax.json.JsonObject;\n+import javax.json.JsonObjectBuilder;\n+import javax.json.JsonReader;\n+import javax.json.JsonReaderFactory;\n+import javax.json.JsonWriter;\n+import javax.json.JsonWriterFactory;\n+\n+/**\n+ * This class fixes two issues with the packaged DaVinci PDEX Plan Net artifacts:\n+ * <ol>\n+ * <li>The provided structure definitions contain invalid XHTML</li>\n+ * <li>The provided structure definitions do not contain a version element</li>\n+ * </ol>\n+ */\n+public class ResourceProcessor {", "originalCommit": "5947eee093dd5bea48c47ed17057c8d71608679f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjEzMDc1Mw==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422130753", "bodyText": "If we update the artifacts in the future, then I think it makes sense to keep it in the main src folder tree because we will run it again and it seems more like main code than test code in that regard.", "author": "JohnTimm", "createdAt": "2020-05-08T13:04:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExMzM4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExNTA0MA==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422115040", "bodyText": "Thanks for documenting what you did to change it.\nWe also have https://ibm.github.io/FHIR/Conformance#hl7-fhir-r4-v401-errata as a place to capture erratta like this, but presently its empty.\nDo you think it makes sense to find all our little CHANGELOG things like this and link to them from there?", "author": "lmsurpre", "createdAt": "2020-05-08T12:29:09Z", "path": "fhir-ig-us-core/CHANGELOG", "diffHunk": "@@ -0,0 +1 @@\n+Changed constraint provenance-1 in StructureDefinition-us-core-provenance.json from: ($this.agent.who.resolve().is Practitioner or Device) implies exists() to: ($this.agent.who.resolve().is(Practitioner) or $this.agent.who.resolve().is(Device)) implies exists() to correct a FHIRPath syntax error", "originalCommit": "5947eee093dd5bea48c47ed17057c8d71608679f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExNzcxOQ==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422117719", "bodyText": "I'd also like to get into the habit of including a link to a corresponding ticket from jira.hl7.org ...do we have one for this yet?", "author": "lmsurpre", "createdAt": "2020-05-08T12:35:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExNTA0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjEzMjE4Mw==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422132183", "bodyText": "I don't have Jira issue yet but should have one today.", "author": "JohnTimm", "createdAt": "2020-05-08T13:07:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExNTA0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI5MzU1OA==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422293558", "bodyText": "Opened issue: https://jira.hl7.org/browse/FHIR-27065", "author": "JohnTimm", "createdAt": "2020-05-08T18:14:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjExNTA0MA=="}], "type": "inlineReview"}, {"oid": "81c3b9a58079ee57da10d5b58a7e6793b6d72ff4", "url": "https://github.com/IBM/FHIR/commit/81c3b9a58079ee57da10d5b58a7e6793b6d72ff4", "message": "Issue #1041, Issue #1042 - minor tweaks\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-05-08T13:00:36Z", "type": "commit"}, {"oid": "72b11402ad062583255d5757da60332980b09542", "url": "https://github.com/IBM/FHIR/commit/72b11402ad062583255d5757da60332980b09542", "message": "Merge branch 'johntimm-master' of https://github.com/IBM/FHIR into johntimm-master", "committedDate": "2020-05-08T13:01:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE1NDQyNQ==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422154425", "bodyText": "pretty minor, but i'd have prefered PlanNetResourceProvider", "author": "lmsurpre", "createdAt": "2020-05-08T13:50:45Z", "path": "fhir-ig-davinci-pdex-plan-net/src/main/java/com/ibm/fhir/ig/davinci/pdex/plan/net/NetResourceProvider.java", "diffHunk": "@@ -0,0 +1,16 @@\n+/*\n+ * (C) Copyright IBM Corp. 2020\n+ *\n+ * SPDX-License-Identifier: Apache-2.0\n+ */\n+\n+package com.ibm.fhir.ig.davinci.pdex.plan.net;\n+\n+import com.ibm.fhir.registry.util.PackageRegistryResourceProvider;\n+\n+public class NetResourceProvider extends PackageRegistryResourceProvider {", "originalCommit": "72b11402ad062583255d5757da60332980b09542", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIwOTYwMA==", "url": "https://github.com/IBM/FHIR/pull/1043#discussion_r422209600", "bodyText": "I'm happy to acquiesce to your naming preferences.", "author": "JohnTimm", "createdAt": "2020-05-08T15:29:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE1NDQyNQ=="}], "type": "inlineReview"}, {"oid": "0f073c57f4cca910886b50095dababb263ac6d51", "url": "https://github.com/IBM/FHIR/commit/0f073c57f4cca910886b50095dababb263ac6d51", "message": "Issue #1041, Issue #1042, Issue #1051 - tests and minor changes\n\nSigned-off-by: John T.E. Timm <johntimm@us.ibm.com>", "committedDate": "2020-05-08T18:14:03Z", "type": "commit"}]}