{"pr_number": 1048, "pr_title": "Document the Export Import Usage #1047", "pr_createdAt": "2020-05-08T14:16:06Z", "pr_url": "https://github.com/IBM/FHIR/pull/1048", "timeline": [{"oid": "102fd919cb4bd6bb838bcbff4c8a34099998079a", "url": "https://github.com/IBM/FHIR/commit/102fd919cb4bd6bb838bcbff4c8a34099998079a", "message": "Document the Export Import Usage #1047\n\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-05-08T14:12:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIxODM2Nw==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422218367", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - An instance level execution, Obtain a set of resources pertaining to all patients. exports to an S3-compatible data store.\n          \n          \n            \n            - [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - Obtain a set of resources pertaining to all patients. Exports to an S3-compatible data store.", "author": "lmsurpre", "createdAt": "2020-05-08T15:45:40Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - An instance level execution, Obtain a set of resources pertaining to all patients. exports to an S3-compatible data store.", "originalCommit": "102fd919cb4bd6bb838bcbff4c8a34099998079a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMDE2Mg==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422220162", "bodyText": "totally just a preference thing, but i prefer the -k to be the first flag so its more prominent (since its not great practice...but so handy)\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n          \n          \n            \n            curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n          \n      \n    \n    \n  \n\nTotally feel free to close/ignore this.", "author": "lmsurpre", "createdAt": "2020-05-08T15:49:17Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - An instance level execution, Obtain a set of resources pertaining to all patients. exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v", "originalCommit": "102fd919cb4bd6bb838bcbff4c8a34099998079a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyMDU4OA==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422220588", "bodyText": "same as above\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n          \n          \n            \n            curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{", "author": "lmsurpre", "createdAt": "2020-05-08T15:50:00Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - An instance level execution, Obtain a set of resources pertaining to all patients. exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{", "originalCommit": "102fd919cb4bd6bb838bcbff4c8a34099998079a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "38f59e5dc743699b189cb41be535df71bdf87d5b", "url": "https://github.com/IBM/FHIR/commit/38f59e5dc743699b189cb41be535df71bdf87d5b", "message": "Apply suggestions from code review\n\nSigned-off-by: Paul Bastide pbastide@us.ibm.com\n\nCo-authored-by: Lee Surprenant <lmsurpre@us.ibm.com>\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-05-08T15:57:48Z", "type": "commit"}, {"oid": "38f59e5dc743699b189cb41be535df71bdf87d5b", "url": "https://github.com/IBM/FHIR/commit/38f59e5dc743699b189cb41be535df71bdf87d5b", "message": "Apply suggestions from code review\n\nSigned-off-by: Paul Bastide pbastide@us.ibm.com\n\nCo-authored-by: Lee Surprenant <lmsurpre@us.ibm.com>\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>", "committedDate": "2020-05-08T15:57:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyNTI4MA==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422225280", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n          \n          \n            \n            To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each input url in the request is limited to a single resource type.", "author": "lmsurpre", "createdAt": "2020-05-08T15:58:44Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - An instance level execution, Obtain a set of resources pertaining to all patients. exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.", "originalCommit": "102fd919cb4bd6bb838bcbff4c8a34099998079a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyNTg1Mw==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422225853", "bodyText": "Should be case-insenstivite, but I think I usually see it like Content-Location\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            content-location: https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=JKyViJ5Y0zcqQ2Uv1aBSMw%3D%3D\n          \n          \n            \n            Content-Location: https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=JKyViJ5Y0zcqQ2Uv1aBSMw%3D%3D", "author": "lmsurpre", "createdAt": "2020-05-08T15:59:57Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - An instance level execution, Obtain a set of resources pertaining to all patients. exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.\n+\n+The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.\n+\n+#### Example Request\n+The following is a request to load data from the IBM COS endpoint into the IBM FHIR Server.\n+\n+``` sh\n+curl -k -v -X POST -u \"fhiruser:change-password\" -H 'Content-Type: application/fhir+json' 'https://localhost:9443/fhir-server/api/v4/$import' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"30321130-5032-49fb-be54-9b8b82b2445a\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"inputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"inputSource\",\n+            \"valueUri\": \"https://localhost:9443/source-fhir-server\"\n+        },\n+        {\n+            \"name\": \"input\",\n+            \"part\": [\n+                {\n+                    \"name\": \"type\",\n+                    \"valueString\": \"Patient\"\n+                },\n+                {\n+                    \"name\": \"url\",\n+                    \"valueUrl\": \"test-import.ndjson\"\n+                }\n+            ]\n+        },\n+        {\n+            \"name\": \"storageDetail\",\n+            \"valueString\": \"ibm-cos\"\n+        }\n+    ]\n+}'\n+```\n+\n+#### Example Response\n+The response body is populated only on error, the response status code is 202 and the `content-location` is populated with the polling location, such as the response header:\n+\n+``` sh\n+content-location: https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=JKyViJ5Y0zcqQ2Uv1aBSMw%3D%3D", "originalCommit": "102fd919cb4bd6bb838bcbff4c8a34099998079a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyNjUwNQ==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422226505", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The response body is populated only on error, the response status code is 202 and the `content-location` is populated with the polling location, such as the response header:\n          \n          \n            \n            The response body is populated only on error, the response status code is 202 and the `content-location` is populated with the polling location in a response header:", "author": "lmsurpre", "createdAt": "2020-05-08T16:01:11Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - An instance level execution, Obtain a set of resources pertaining to all patients. exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.\n+\n+The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.\n+\n+#### Example Request\n+The following is a request to load data from the IBM COS endpoint into the IBM FHIR Server.\n+\n+``` sh\n+curl -k -v -X POST -u \"fhiruser:change-password\" -H 'Content-Type: application/fhir+json' 'https://localhost:9443/fhir-server/api/v4/$import' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"30321130-5032-49fb-be54-9b8b82b2445a\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"inputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"inputSource\",\n+            \"valueUri\": \"https://localhost:9443/source-fhir-server\"\n+        },\n+        {\n+            \"name\": \"input\",\n+            \"part\": [\n+                {\n+                    \"name\": \"type\",\n+                    \"valueString\": \"Patient\"\n+                },\n+                {\n+                    \"name\": \"url\",\n+                    \"valueUrl\": \"test-import.ndjson\"\n+                }\n+            ]\n+        },\n+        {\n+            \"name\": \"storageDetail\",\n+            \"valueString\": \"ibm-cos\"\n+        }\n+    ]\n+}'\n+```\n+\n+#### Example Response\n+The response body is populated only on error, the response status code is 202 and the `content-location` is populated with the polling location, such as the response header:", "originalCommit": "102fd919cb4bd6bb838bcbff4c8a34099998079a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyNzE1NQ==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422227155", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The response returned is 200 if the job is the job is completed.\n          \n          \n            \n            The response returned is 200 if the job is completed.", "author": "lmsurpre", "createdAt": "2020-05-08T16:02:26Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - An instance level execution, Obtain a set of resources pertaining to all patients. exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -u \"fhiruser:change-password\" -k -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.\n+\n+The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.\n+\n+#### Example Request\n+The following is a request to load data from the IBM COS endpoint into the IBM FHIR Server.\n+\n+``` sh\n+curl -k -v -X POST -u \"fhiruser:change-password\" -H 'Content-Type: application/fhir+json' 'https://localhost:9443/fhir-server/api/v4/$import' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"30321130-5032-49fb-be54-9b8b82b2445a\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"inputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"inputSource\",\n+            \"valueUri\": \"https://localhost:9443/source-fhir-server\"\n+        },\n+        {\n+            \"name\": \"input\",\n+            \"part\": [\n+                {\n+                    \"name\": \"type\",\n+                    \"valueString\": \"Patient\"\n+                },\n+                {\n+                    \"name\": \"url\",\n+                    \"valueUrl\": \"test-import.ndjson\"\n+                }\n+            ]\n+        },\n+        {\n+            \"name\": \"storageDetail\",\n+            \"valueString\": \"ibm-cos\"\n+        }\n+    ]\n+}'\n+```\n+\n+#### Example Response\n+The response body is populated only on error, the response status code is 202 and the `content-location` is populated with the polling location, such as the response header:\n+\n+``` sh\n+content-location: https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=JKyViJ5Y0zcqQ2Uv1aBSMw%3D%3D\n+```\n+\n+## Status Operation: $bulkdata-status\n+The `StatusOperation` is a BulkData Management endpoint, which uses the `Content-Location`'s http query parameter value for job to manage the Bulk Data job request.\n+\n+There are two custom features - *Poll Job* and *Delete Job*.\n+\n+### **$bulkdata-status: Poll Job**\n+The response returned is 202 if the job is queued or not yet complete.\n+The response returned is 200 if the job is the job is completed.", "originalCommit": "102fd919cb4bd6bb838bcbff4c8a34099998079a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyOTU1Ng==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422229556", "bodyText": "same as above\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl 'https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=FvHrLGPv0oKZNyLzBnY5iA%3D%3D' -k -u \"fhiruser:change-password\" -v\n          \n          \n            \n            curl -k -v -u \"fhiruser:change-password\" 'https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=FvHrLGPv0oKZNyLzBnY5iA%3D%3D'", "author": "lmsurpre", "createdAt": "2020-05-08T16:07:05Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - Obtain a set of resources pertaining to all patients. Exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.\n+\n+The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.\n+\n+#### Example Request\n+The following is a request to load data from the IBM COS endpoint into the IBM FHIR Server.\n+\n+``` sh\n+curl -k -v -X POST -u \"fhiruser:change-password\" -H 'Content-Type: application/fhir+json' 'https://localhost:9443/fhir-server/api/v4/$import' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"30321130-5032-49fb-be54-9b8b82b2445a\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"inputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"inputSource\",\n+            \"valueUri\": \"https://localhost:9443/source-fhir-server\"\n+        },\n+        {\n+            \"name\": \"input\",\n+            \"part\": [\n+                {\n+                    \"name\": \"type\",\n+                    \"valueString\": \"Patient\"\n+                },\n+                {\n+                    \"name\": \"url\",\n+                    \"valueUrl\": \"test-import.ndjson\"\n+                }\n+            ]\n+        },\n+        {\n+            \"name\": \"storageDetail\",\n+            \"valueString\": \"ibm-cos\"\n+        }\n+    ]\n+}'\n+```\n+\n+#### Example Response\n+The response body is populated only on error, the response status code is 202 and the `content-location` is populated with the polling location, such as the response header:\n+\n+``` sh\n+content-location: https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=JKyViJ5Y0zcqQ2Uv1aBSMw%3D%3D\n+```\n+\n+## Status Operation: $bulkdata-status\n+The `StatusOperation` is a BulkData Management endpoint, which uses the `Content-Location`'s http query parameter value for job to manage the Bulk Data job request.\n+\n+There are two custom features - *Poll Job* and *Delete Job*.\n+\n+### **$bulkdata-status: Poll Job**\n+The response returned is 202 if the job is queued or not yet complete.\n+The response returned is 200 if the job is the job is completed.\n+\n+#### Example\n+- Request\n+```sh\n+curl 'https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=FvHrLGPv0oKZNyLzBnY5iA%3D%3D' -k -u \"fhiruser:change-password\" -v", "originalCommit": "38f59e5dc743699b189cb41be535df71bdf87d5b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "da95e534c5080f6788d8c010767c35915c23ba31", "url": "https://github.com/IBM/FHIR/commit/da95e534c5080f6788d8c010767c35915c23ba31", "message": "Apply suggestions from code review\r\n\r\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>\n\nCo-authored-by: Lee Surprenant <lmsurpre@us.ibm.com>", "committedDate": "2020-05-08T16:09:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMTE2MQ==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422231161", "bodyText": "do we always get OperationOutcome for successfully-imported resources?", "author": "lmsurpre", "createdAt": "2020-05-08T16:10:15Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - Obtain a set of resources pertaining to all patients. Exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.\n+\n+The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.\n+\n+#### Example Request\n+The following is a request to load data from the IBM COS endpoint into the IBM FHIR Server.\n+\n+``` sh\n+curl -k -v -X POST -u \"fhiruser:change-password\" -H 'Content-Type: application/fhir+json' 'https://localhost:9443/fhir-server/api/v4/$import' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"30321130-5032-49fb-be54-9b8b82b2445a\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"inputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"inputSource\",\n+            \"valueUri\": \"https://localhost:9443/source-fhir-server\"\n+        },\n+        {\n+            \"name\": \"input\",\n+            \"part\": [\n+                {\n+                    \"name\": \"type\",\n+                    \"valueString\": \"Patient\"\n+                },\n+                {\n+                    \"name\": \"url\",\n+                    \"valueUrl\": \"test-import.ndjson\"\n+                }\n+            ]\n+        },\n+        {\n+            \"name\": \"storageDetail\",\n+            \"valueString\": \"ibm-cos\"\n+        }\n+    ]\n+}'\n+```\n+\n+#### Example Response\n+The response body is populated only on error, the response status code is 202 and the `content-location` is populated with the polling location, such as the response header:\n+\n+``` sh\n+content-location: https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=JKyViJ5Y0zcqQ2Uv1aBSMw%3D%3D\n+```\n+\n+## Status Operation: $bulkdata-status\n+The `StatusOperation` is a BulkData Management endpoint, which uses the `Content-Location`'s http query parameter value for job to manage the Bulk Data job request.\n+\n+There are two custom features - *Poll Job* and *Delete Job*.\n+\n+### **$bulkdata-status: Poll Job**\n+The response returned is 202 if the job is queued or not yet complete.\n+The response returned is 200 if the job is the job is completed.\n+\n+#### Example\n+- Request\n+```sh\n+curl 'https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=FvHrLGPv0oKZNyLzBnY5iA%3D%3D' -k -u \"fhiruser:change-password\" -v\n+```\n+- Response for `$import` or `$export` not yet complete\n+The response code is 202.\n+\n+- Response for $export upon completion\n+```sh\n+{\n+\"transactionTime\": \"2020/01/20 16:53:41.160 -0500\",\n+\"request\": \"/$export?_type=Patient\",\n+\"requiresAccessToken\": false,\n+\"output\" : [\n+  { \"type\" : \"AllergyIntolerance\",\n+      \"url\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud/fhir-bulkimexport-connectathon/6SfXzbGvYl1nTjGbf5qeqJDFNjyljiGdKxXEJb4yJn8=/AllergyIntolerance_1.ndjson\",\n+    \"count\": 20},\n+  { \"type\" : \"AllergyIntolerance\",\n+      \"url\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud/fhir-bulkimexport-connectathon/6SfXzbGvYl1nTjGbf5qeqJDFNjyljiGdKxXEJb4yJn8=/AllergyIntolerance_2.ndjson\",\n+    \"count\": 8},\n+  { \"type\" : \"Observation\",\n+      \"url\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud/fhir-bulkimexport-connectathon/6SfXzbGvYl1nTjGbf5qeqJDFNjyljiGdKxXEJb4yJn8=/Observation_1.ndjson\",\n+    \"count\": 234},\n+  { \"type\" : \"Observation\",\n+      \"url\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud/fhir-bulkimexport-connectathon/6SfXzbGvYl1nTjGbf5qeqJDFNjyljiGdKxXEJb4yJn8=/Observation_2.ndjson\",\n+    \"count\": 81}]\n+}\n+```\n+\n+- Response for $import upon completion\n+```sh\n+{\n+    \"transactionTime\": \"2020-04-28T13:13:01.366-04:00\",\n+    \"request\": \"$import\",\n+    \"requiresAccessToken\": false,\n+    \"output\": [\n+        {\n+            \"type\": \"OperationOutcome\",\n+            \"url\": \"test-import.ndjson_oo_success.ndjson\",\n+            \"count\": 3", "originalCommit": "38f59e5dc743699b189cb41be535df71bdf87d5b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzNzY0Mw==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422237643", "bodyText": "Yes, as I understand they do.  Yet, I haven't seen it successfully written, I think it's a policy on the bucket/user I setup.", "author": "prb112", "createdAt": "2020-05-08T16:23:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMTE2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjMzMDIzOQ==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422330239", "bodyText": "We agreed to verify this as part of #1054", "author": "lmsurpre", "createdAt": "2020-05-08T19:28:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMTE2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMTUxNQ==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422231515", "bodyText": "same\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -X DELETE 'https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=k%2Fd8cTAU%2BUeVEwqURPZ3oA%3D%3D' -k -u \"fhiruser:change-password\" -v\n          \n          \n            \n            curl -k -v -u \"fhiruser:change-password\" -X DELETE 'https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=k%2Fd8cTAU%2BUeVEwqURPZ3oA%3D%3D'", "author": "lmsurpre", "createdAt": "2020-05-08T16:10:55Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - Obtain a set of resources pertaining to all patients. Exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.\n+\n+The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.\n+\n+#### Example Request\n+The following is a request to load data from the IBM COS endpoint into the IBM FHIR Server.\n+\n+``` sh\n+curl -k -v -X POST -u \"fhiruser:change-password\" -H 'Content-Type: application/fhir+json' 'https://localhost:9443/fhir-server/api/v4/$import' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"30321130-5032-49fb-be54-9b8b82b2445a\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"inputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"inputSource\",\n+            \"valueUri\": \"https://localhost:9443/source-fhir-server\"\n+        },\n+        {\n+            \"name\": \"input\",\n+            \"part\": [\n+                {\n+                    \"name\": \"type\",\n+                    \"valueString\": \"Patient\"\n+                },\n+                {\n+                    \"name\": \"url\",\n+                    \"valueUrl\": \"test-import.ndjson\"\n+                }\n+            ]\n+        },\n+        {\n+            \"name\": \"storageDetail\",\n+            \"valueString\": \"ibm-cos\"\n+        }\n+    ]\n+}'\n+```\n+\n+#### Example Response\n+The response body is populated only on error, the response status code is 202 and the `content-location` is populated with the polling location, such as the response header:\n+\n+``` sh\n+content-location: https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=JKyViJ5Y0zcqQ2Uv1aBSMw%3D%3D\n+```\n+\n+## Status Operation: $bulkdata-status\n+The `StatusOperation` is a BulkData Management endpoint, which uses the `Content-Location`'s http query parameter value for job to manage the Bulk Data job request.\n+\n+There are two custom features - *Poll Job* and *Delete Job*.\n+\n+### **$bulkdata-status: Poll Job**\n+The response returned is 202 if the job is queued or not yet complete.\n+The response returned is 200 if the job is the job is completed.\n+\n+#### Example\n+- Request\n+```sh\n+curl 'https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=FvHrLGPv0oKZNyLzBnY5iA%3D%3D' -k -u \"fhiruser:change-password\" -v\n+```\n+- Response for `$import` or `$export` not yet complete\n+The response code is 202.\n+\n+- Response for $export upon completion\n+```sh\n+{\n+\"transactionTime\": \"2020/01/20 16:53:41.160 -0500\",\n+\"request\": \"/$export?_type=Patient\",\n+\"requiresAccessToken\": false,\n+\"output\" : [\n+  { \"type\" : \"AllergyIntolerance\",\n+      \"url\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud/fhir-bulkimexport-connectathon/6SfXzbGvYl1nTjGbf5qeqJDFNjyljiGdKxXEJb4yJn8=/AllergyIntolerance_1.ndjson\",\n+    \"count\": 20},\n+  { \"type\" : \"AllergyIntolerance\",\n+      \"url\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud/fhir-bulkimexport-connectathon/6SfXzbGvYl1nTjGbf5qeqJDFNjyljiGdKxXEJb4yJn8=/AllergyIntolerance_2.ndjson\",\n+    \"count\": 8},\n+  { \"type\" : \"Observation\",\n+      \"url\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud/fhir-bulkimexport-connectathon/6SfXzbGvYl1nTjGbf5qeqJDFNjyljiGdKxXEJb4yJn8=/Observation_1.ndjson\",\n+    \"count\": 234},\n+  { \"type\" : \"Observation\",\n+      \"url\": \"https://s3.us-south.cloud-object-storage.appdomain.cloud/fhir-bulkimexport-connectathon/6SfXzbGvYl1nTjGbf5qeqJDFNjyljiGdKxXEJb4yJn8=/Observation_2.ndjson\",\n+    \"count\": 81}]\n+}\n+```\n+\n+- Response for $import upon completion\n+```sh\n+{\n+    \"transactionTime\": \"2020-04-28T13:13:01.366-04:00\",\n+    \"request\": \"$import\",\n+    \"requiresAccessToken\": false,\n+    \"output\": [\n+        {\n+            \"type\": \"OperationOutcome\",\n+            \"url\": \"test-import.ndjson_oo_success.ndjson\",\n+            \"count\": 3\n+        }\n+    ],\n+    \"error\": [\n+        {\n+            \"type\": \"OperationOutcome\",\n+            \"url\": \"test-import.ndjson_oo_errors.ndjson\",\n+            \"count\": 0\n+        }\n+    ]\n+}\n+```\n+\n+### **$bulkdata-status: Delete Job**\n+The Bulk Data Request is deleted using the Content-Location and executing the `DELETE` method. The deletion of a job is asynchronous - the job is stopped and subsequently deleted.  The data is not cleaned up from the destination storage location - e.g. partially imported data or partially exported data is not cleaned up. \n+\n+- Request\n+```sh\n+curl -X DELETE 'https://localhost:9443/fhir-server/api/v4/$bulkdata-status?job=k%2Fd8cTAU%2BUeVEwqURPZ3oA%3D%3D' -k -u \"fhiruser:change-password\" -v", "originalCommit": "38f59e5dc743699b189cb41be535df71bdf87d5b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMzIwMw==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422233203", "bodyText": "I still think it would be nice if we supported many more inputs in a request and had the smarts to just do 5 at a time... do we have an issue open for that?", "author": "lmsurpre", "createdAt": "2020-05-08T16:14:10Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - Obtain a set of resources pertaining to all patients. Exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.", "originalCommit": "38f59e5dc743699b189cb41be535df71bdf87d5b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzNjI2NA==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422236264", "bodyText": "Yes - #948 - my thought is to split them into separate job paramters", "author": "prb112", "createdAt": "2020-05-08T16:20:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMzIwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjI1MzEyNQ==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422253125", "bodyText": "perfect, just wanted to make sure we were tracking it.", "author": "lmsurpre", "createdAt": "2020-05-08T16:53:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMzIwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMzU0Ng==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422233546", "bodyText": "are there any other types supported?", "author": "lmsurpre", "createdAt": "2020-05-08T16:14:52Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - Obtain a set of resources pertaining to all patients. Exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.\n+\n+The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.", "originalCommit": "38f59e5dc743699b189cb41be535df71bdf87d5b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzNjkzMw==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422236933", "bodyText": "Yes,\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.\n          \n          \n            \n            The IBM FHIR Server supports `storageDetail.type` with the value of `ibm-cos`, `https` and `aws-s3`.", "author": "prb112", "createdAt": "2020-05-08T16:21:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMzU0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzNzAxNQ==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422237015", "bodyText": "clarified", "author": "prb112", "createdAt": "2020-05-08T16:21:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMzU0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMzkwMQ==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422233901", "bodyText": "I think its worth mentioning that the server administrator can whitelist base urls to import from...maybe with a link to the corresponding section from the User's Guide", "author": "lmsurpre", "createdAt": "2020-05-08T16:15:37Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - Obtain a set of resources pertaining to all patients. Exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.\n+\n+The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.", "originalCommit": "38f59e5dc743699b189cb41be535df71bdf87d5b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzODkyMA==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422238920", "bodyText": "done", "author": "prb112", "createdAt": "2020-05-08T16:25:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzMzkwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIzODg3MQ==", "url": "https://github.com/IBM/FHIR/pull/1048#discussion_r422238871", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            To import using the $import on https, one must additionally configure the fhirServer/bulkdata/validBaseUrls. For example, if one stores bulkdata on https://test-url.ibm.com/folder1 and https://test-url.ibm.com/folder2 you must specify both baseUrls. Please refer to the [IBM FHIR Server User's Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#410-bulk-data-operations)", "author": "prb112", "createdAt": "2020-05-08T16:25:23Z", "path": "docs/src/pages/guides/FHIRBulkOperations.md", "diffHunk": "@@ -0,0 +1,193 @@\n+---\n+layout: post\n+title: FHIR Bulk Data Guide\n+description: FHIR Bulk Data Guide\n+date:   2020-05-08 09:00:00 -0500\n+permalink: /FHIRBulkOperations/\n+---\n+\n+# Overview\n+\n+The IBM FHIR Server has extended operations for Bulk Data `$import` and `$export`, which are implemented in the modules: \n+\n+|Module|Description|\n+|---|---|\n+|[fhir-operation-bulkdata](https://github.com/IBM/FHIR/tree/master/fhir-operation-bulkdata)|Implements the FHIR Operations `$import` and `$export` and translate bulk data requests into JSR352 Java Batch jobs|\n+|[fhir-bulkimportexport-webapp](https://github.com/IBM/FHIR/tree/master/fhir-bulkimportexport-webapp)|Standalone web application to process bulk data requests as JSR352 Java Batch jobs|\n+\n+The IBM FHIR Server bulk data module configuration is described in more detail at the [FHIR Server Users Guide](https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide/#410-bulk-data-operations).\n+\n+## Export Operation: $export\n+The `$export` operation uses three OperationDefinition: \n+- [System](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-export.html) - Export data from the server. Exports to an S3-compatible data store.\n+- [Patient](http://hl7.org/fhir/uv/bulkdata/STU1/OperationDefinition-patient-export.html) - Obtain a set of resources pertaining to all patients. Exports to an S3-compatible data store.\n+- [Group](http://hl7.org/fhir/uv/bulkdata/STU1/ OperationDefinition-group-export.html) - Obtain a set resources pertaining to patients in a specific Group. Only supports static membership; does not resolve inclusion/exclusion criteria.\n+\n+### **$export: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each request is limited to a single resource type in each imported or referenced file.\n+\n+#### Example Request - GET\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using GET.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X GET 'https://localhost:9443/fhir-server/api/v4/$export?_outputFormat=application/fhir%2Bndjson&_type=Patient' -v\n+```\n+\n+#### Example Request - POST\n+The following is a request to export data to the IBM COS endpoint from the IBM FHIR Server using POST and FHIR Resource Parameters.\n+\n+```sh\n+curl -k -u \"fhiruser:change-password\" -H \"Content-Type: application/fhir+json\" -X POST 'https://localhost:9443/fhir-server/api/v4/$export' -d '{\n+    \"resourceType\": \"Parameters\",\n+    \"id\": \"e33a6a4e-29b5-4f62-a3e9-8d09f50ae54d\",\n+    \"parameter\": [\n+        {\n+            \"name\": \"_outputFormat\",\n+            \"valueString\": \"application/fhir+ndjson\"\n+        },\n+        {\n+            \"name\": \"_since\",\n+            \"valueInstant\": \"2019-01-01T08:21:26.94-04:00\"\n+        },\n+        {\n+            \"name\": \"_type\",\n+            \"valueString\": \"Observation,Condition\"\n+        }\n+    ]\n+}'\n+```\n+\n+## Import Operation: $import\n+\n+The `$import` operation is System operation are invoked at `[base]/$import`.  The Import Operation uses a custom crafted OperationDefinition [link](https://github.com/IBM/FHIR/blob/master/fhir-operation-bulkdata/src/main/resources/import.json), which follows the proposal from [Smart-on-FHIR: import.md](https://github.com/smart-on-fhir/bulk-import/blob/master/import.md).\n+\n+### **$import: Create a Bulk Data Request**\n+To create an import request, the IBM FHIR Server requires the body fields of the request object to be a FHIR Resource `Parameters` JSON Object.  The request must be posted to the server using `POST`. Each input url in the request is limited to a single resource type.\n+\n+The IBM FHIR Server limits the number of inputs per each `$import` request based on `fhirServer/bulkdata/maxInputPerRequest`, which defaults to 5 input entries.\n+\n+The IBM FHIR Server supports an additional `storageDetail.type` with the value of `ibm-cos`.\n+", "originalCommit": "da95e534c5080f6788d8c010767c35915c23ba31", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "24866bb2b8bacf466d32326a623e3b3b1add8277", "url": "https://github.com/IBM/FHIR/commit/24866bb2b8bacf466d32326a623e3b3b1add8277", "message": "Apply suggestions from code review\r\n\r\nSigned-off-by: Paul Bastide <pbastide@us.ibm.com>\n\nCo-authored-by: Lee Surprenant <lmsurpre@us.ibm.com>", "committedDate": "2020-05-08T16:25:46Z", "type": "commit"}]}