{"pr_number": 2187, "pr_title": "bugfix: fix the wrong rollback sequence caused by the same record request from different transaction branches on different servers", "pr_createdAt": "2020-01-15T10:31:59Z", "pr_url": "https://github.com/seata/seata/pull/2187", "timeline": [{"oid": "bda572b65b074a874351ec0e2e3d17fa1f91c2af", "url": "https://github.com/seata/seata/commit/bda572b65b074a874351ec0e2e3d17fa1f91c2af", "message": "bugfix: fix the wrong rollback sequence caused by the same record request from different transaction branches on different servers\n\nSigned-off-by: slievrly <slievrly@163.com>", "committedDate": "2020-01-15T10:30:13Z", "type": "commit"}, {"oid": "782e96bd6d82ef71edea5f7187a9d4477a66cd1c", "url": "https://github.com/seata/seata/commit/782e96bd6d82ef71edea5f7187a9d4477a66cd1c", "message": "Merge remote-tracking branch 'upstream/develop' into samedata_diffbranch_rollback", "committedDate": "2020-01-15T10:33:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTMzNTkzOA==", "url": "https://github.com/seata/seata/pull/2187#discussion_r369335938", "bodyText": "Verified that the index has no effect on sorting.", "author": "zjinlei", "createdAt": "2020-01-22T01:52:35Z", "path": "script/server/db/mysql.sql", "diffHunk": "@@ -31,10 +31,11 @@ CREATE TABLE IF NOT EXISTS `branch_table`\n     `status`            TINYINT,\n     `client_id`         VARCHAR(64),\n     `application_data`  VARCHAR(2000),\n-    `gmt_create`        DATETIME,\n-    `gmt_modified`      DATETIME,\n+    `gmt_create`        DATETIME(6),\n+    `gmt_modified`      DATETIME(6),\n     PRIMARY KEY (`branch_id`),\n-    KEY `idx_xid` (`xid`)\n+    KEY `idx_xid` (`xid`),\n+    KEY `idx_gmt_create` (`gmt_create`)", "originalCommit": "bda572b65b074a874351ec0e2e3d17fa1f91c2af", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzkwNzMzMA==", "url": "https://github.com/seata/seata/pull/2187#discussion_r373907330", "bodyText": "already remove gmt_create index.", "author": "slievrly", "createdAt": "2020-02-03T03:09:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTMzNTkzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM0MzUyNg==", "url": "https://github.com/seata/seata/pull/2187#discussion_r369343526", "bodyText": "Milliseconds is enough.\nUser upgrades may forget this, might be better to add a long type timestamp column.", "author": "zjinlei", "createdAt": "2020-01-22T02:28:01Z", "path": "script/server/db/mysql.sql", "diffHunk": "@@ -31,10 +31,11 @@ CREATE TABLE IF NOT EXISTS `branch_table`\n     `status`            TINYINT,\n     `client_id`         VARCHAR(64),\n     `application_data`  VARCHAR(2000),\n-    `gmt_create`        DATETIME,\n-    `gmt_modified`      DATETIME,\n+    `gmt_create`        DATETIME(6),", "originalCommit": "bda572b65b074a874351ec0e2e3d17fa1f91c2af", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzkwMTQyMA==", "url": "https://github.com/seata/seata/pull/2187#discussion_r373901420", "bodyText": "I think the long type is less readable.", "author": "slievrly", "createdAt": "2020-02-03T02:29:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM0MzUyNg=="}], "type": "inlineReview"}, {"oid": "d739ca377377637b39df27e46c8c534d1003b10a", "url": "https://github.com/seata/seata/commit/d739ca377377637b39df27e46c8c534d1003b10a", "message": "Merge branch 'develop' into samedata_diffbranch_rollback", "committedDate": "2020-01-22T15:47:59Z", "type": "commit"}, {"oid": "bf1961d05bcb906f26fba13afd21b643e96e7b7c", "url": "https://github.com/seata/seata/commit/bf1961d05bcb906f26fba13afd21b643e96e7b7c", "message": "Merge branch 'develop' into samedata_diffbranch_rollback", "committedDate": "2020-01-23T15:59:49Z", "type": "commit"}, {"oid": "35569c76fa126e5bd9a7db75a6658f3b2b065691", "url": "https://github.com/seata/seata/commit/35569c76fa126e5bd9a7db75a6658f3b2b065691", "message": "Merge branch 'develop' into samedata_diffbranch_rollback", "committedDate": "2020-02-03T02:26:22Z", "type": "commit"}, {"oid": "7c60ef6208200943b6bb8c28ab3f25a2832908d2", "url": "https://github.com/seata/seata/commit/7c60ef6208200943b6bb8c28ab3f25a2832908d2", "message": "remove gmt_create index\n\nSigned-off-by: slievrly <slievrly@163.com>", "committedDate": "2020-02-03T03:05:44Z", "type": "commit"}, {"oid": "fc520675e99203ac97beedbd135ce919060102e9", "url": "https://github.com/seata/seata/commit/fc520675e99203ac97beedbd135ce919060102e9", "message": "Merge remote-tracking branch 'origin/samedata_diffbranch_rollback' into samedata_diffbranch_rollback", "committedDate": "2020-02-03T03:07:29Z", "type": "commit"}, {"oid": "9b4325ed64bb0317c8b9292d7c00fb150b9258a6", "url": "https://github.com/seata/seata/commit/9b4325ed64bb0317c8b9292d7c00fb150b9258a6", "message": "Merge branch 'develop' into samedata_diffbranch_rollback", "committedDate": "2020-02-03T05:27:25Z", "type": "commit"}]}