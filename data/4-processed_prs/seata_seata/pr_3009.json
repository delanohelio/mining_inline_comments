{"pr_number": 3009, "pr_title": "feature: support server start with springboot and config with application.yaml", "pr_createdAt": "2020-08-12T05:45:52Z", "pr_url": "https://github.com/seata/seata/pull/3009", "timeline": [{"oid": "b32d6a27a4440ddfd25568d1669f9de94b669ef9", "url": "https://github.com/seata/seata/commit/b32d6a27a4440ddfd25568d1669f9de94b669ef9", "message": "make server to support srpingboot and config with application.yaml", "committedDate": "2020-08-12T05:30:23Z", "type": "commit"}, {"oid": "f3185dddd2340b1e37b2928e8c5cc58364f9c473", "url": "https://github.com/seata/seata/commit/f3185dddd2340b1e37b2928e8c5cc58364f9c473", "message": "checkStyle fix", "committedDate": "2020-08-12T06:12:44Z", "type": "commit"}, {"oid": "8d456e503a5cb4e8590c9de748355ff59244c673", "url": "https://github.com/seata/seata/commit/8d456e503a5cb4e8590c9de748355ff59244c673", "message": "bug fix:fix checkstyle UnusedImports", "committedDate": "2020-08-12T06:25:27Z", "type": "commit"}, {"oid": "efcdd1e47e965ed36544e2d0bfd937662a14da07", "url": "https://github.com/seata/seata/commit/efcdd1e47e965ed36544e2d0bfd937662a14da07", "message": "feature: create a new module with name server-starter for support springboot", "committedDate": "2020-09-30T10:44:50Z", "type": "commit"}, {"oid": "df0ef8409c6632878e58f4b815fbc41cb6039468", "url": "https://github.com/seata/seata/commit/df0ef8409c6632878e58f4b815fbc41cb6039468", "message": "Merge branch 'develop' into server-boot", "committedDate": "2020-10-15T02:11:32Z", "type": "commit"}, {"oid": "115dc74ab602d246b3ddca2e967028f40436af20", "url": "https://github.com/seata/seata/commit/115dc74ab602d246b3ddca2e967028f40436af20", "message": "Merge remote-tracking branch 'ups/develop' into server-boot", "committedDate": "2020-10-18T05:51:31Z", "type": "commit"}, {"oid": "0f0fd689fd99b13f8518c68b1c8f87a057c2a8d2", "url": "https://github.com/seata/seata/commit/0f0fd689fd99b13f8518c68b1c8f87a057c2a8d2", "message": "server-boot: resolve code conflicts", "committedDate": "2020-10-18T06:11:59Z", "type": "commit"}, {"oid": "1f1e19cc83864f3a2972b2fbd8f1ec81662c5f2e", "url": "https://github.com/seata/seata/commit/1f1e19cc83864f3a2972b2fbd8f1ec81662c5f2e", "message": "Merge branch 'develop' into server-boot", "committedDate": "2020-10-18T13:03:49Z", "type": "commit"}, {"oid": "51b546ae944bc489807cdb1d51ba92458bd9a5a4", "url": "https://github.com/seata/seata/commit/51b546ae944bc489807cdb1d51ba92458bd9a5a4", "message": "bind git user.name to github account", "committedDate": "2020-10-19T05:06:41Z", "type": "commit"}, {"oid": "48a883079ffb9df98afdc01b94e81aa81acb7276", "url": "https://github.com/seata/seata/commit/48a883079ffb9df98afdc01b94e81aa81acb7276", "message": "bugfix:resolve code conflict with server-boot and develop", "committedDate": "2020-11-24T02:29:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDgwNTcxOQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r534805719", "bodyText": "\u8fd9\u4e2afile.conf\u7684\u7248\u672c\u662f\u4e0d\u662f\u6709\u70b9\u65e7\u4e86\uff1f", "author": "caohdgege", "createdAt": "2020-12-03T07:27:39Z", "path": "server-starter/src/test/resources/file.conf", "diffHunk": "@@ -0,0 +1,44 @@\n+#reduce delay for test", "originalCommit": "48a883079ffb9df98afdc01b94e81aa81acb7276", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjExMjM3Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r542112373", "bodyText": "\u8fd9\u4e2a\u6587\u4ef6\u5df2\u7ecf\u6ca1\u7528\u4e86\uff0c\u6211\u5c06\u5220\u9664\u5b83", "author": "spilledyear", "createdAt": "2020-12-14T04:59:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDgwNTcxOQ=="}], "type": "inlineReview"}, {"oid": "8c9dd9c8d33d9b619c7cc52fb0c308c15cd7c44f", "url": "https://github.com/seata/seata/commit/8c9dd9c8d33d9b619c7cc52fb0c308c15cd7c44f", "message": "Merge remote-tracking branch 'ups/develop' into server-boot", "committedDate": "2020-12-14T04:53:57Z", "type": "commit"}, {"oid": "0db82fbd70ff62f90b368e62c593014151e31c37", "url": "https://github.com/seata/seata/commit/0db82fbd70ff62f90b368e62c593014151e31c37", "message": "fix #3009 delete no use config file", "committedDate": "2020-12-14T05:01:05Z", "type": "commit"}, {"oid": "494cebee27039ecc346b25a296e9b233761b3d5f", "url": "https://github.com/seata/seata/commit/494cebee27039ecc346b25a296e9b233761b3d5f", "message": "fix #3009 add health check api for server-starter", "committedDate": "2020-12-14T05:43:10Z", "type": "commit"}, {"oid": "c30e2ff0f9d061067807ca768c409d9f2b185bbc", "url": "https://github.com/seata/seata/commit/c30e2ff0f9d061067807ca768c409d9f2b185bbc", "message": "fix #3009 add statement for new file", "committedDate": "2020-12-14T05:57:47Z", "type": "commit"}, {"oid": "bbdb04024404bc0181f6e9fff31ec1ba7029b1a9", "url": "https://github.com/seata/seata/commit/bbdb04024404bc0181f6e9fff31ec1ba7029b1a9", "message": "fix #3009 delete unused import", "committedDate": "2020-12-14T05:58:48Z", "type": "commit"}, {"oid": "4249bcf0b258d96af46f3a8568b1ba9f61a274c2", "url": "https://github.com/seata/seata/commit/4249bcf0b258d96af46f3a8568b1ba9f61a274c2", "message": "fix #3009 delete unused tests", "committedDate": "2020-12-14T06:21:17Z", "type": "commit"}, {"oid": "3a628c8d7e24ac77c8501fc466fbd8ae0077d5d1", "url": "https://github.com/seata/seata/commit/3a628c8d7e24ac77c8501fc466fbd8ae0077d5d1", "message": "fix #3009 unnecessary parentheses", "committedDate": "2020-12-14T06:49:30Z", "type": "commit"}, {"oid": "929e2f2ceb7b8815a475deb93c6741796dabfffb", "url": "https://github.com/seata/seata/commit/929e2f2ceb7b8815a475deb93c6741796dabfffb", "message": "fix #3009 unnecessary parentheses", "committedDate": "2020-12-14T06:49:44Z", "type": "commit"}, {"oid": "bb16215b4768442091c244e03f945e09371c64ce", "url": "https://github.com/seata/seata/commit/bb16215b4768442091c244e03f945e09371c64ce", "message": "feature #3009: resolve code conflicts", "committedDate": "2021-01-03T11:15:15Z", "type": "commit"}, {"oid": "d9d901d6ce939f91e5e296f5555d657200ac3f94", "url": "https://github.com/seata/seata/commit/d9d901d6ce939f91e5e296f5555d657200ac3f94", "message": "feature #3009: remove server-starter module and server module support springboot", "committedDate": "2021-01-03T11:43:45Z", "type": "commit"}, {"oid": "99be383ca29fa93c12b2e889a57f3f938b41924c", "url": "https://github.com/seata/seata/commit/99be383ca29fa93c12b2e889a57f3f938b41924c", "message": "feature #3009: add properties of server", "committedDate": "2021-01-10T07:27:43Z", "type": "commit"}, {"oid": "df85601eb494853ad3d3707a74514abc71735513", "url": "https://github.com/seata/seata/commit/df85601eb494853ad3d3707a74514abc71735513", "message": "feature #3009: fix code style", "committedDate": "2021-01-10T07:50:21Z", "type": "commit"}, {"oid": "4473f139ec10a6002af50992793ec8437faffba1", "url": "https://github.com/seata/seata/commit/4473f139ec10a6002af50992793ec8437faffba1", "message": "feature #3009: build package fix", "committedDate": "2021-01-10T09:09:41Z", "type": "commit"}, {"oid": "26a010d8e923d302d8c16caeb691c5f74f303ce3", "url": "https://github.com/seata/seata/commit/26a010d8e923d302d8c16caeb691c5f74f303ce3", "message": "Merge remote-tracking branch 'ups/develop' into server-boot", "committedDate": "2021-01-17T07:05:27Z", "type": "commit"}, {"oid": "ee786e5f9fe4c1ca126044cde8f06b829ffde71e", "url": "https://github.com/seata/seata/commit/ee786e5f9fe4c1ca126044cde8f06b829ffde71e", "message": "feature #3009: build package fix", "committedDate": "2021-01-17T07:24:53Z", "type": "commit"}, {"oid": "243d827daf92a3a52a7cc7547acb71008bab2d01", "url": "https://github.com/seata/seata/commit/243d827daf92a3a52a7cc7547acb71008bab2d01", "message": "feature #3009: build package fix", "committedDate": "2021-01-17T07:52:20Z", "type": "commit"}, {"oid": "c7443f966c797dc61643ac44b603a7bc4b5278b4", "url": "https://github.com/seata/seata/commit/c7443f966c797dc61643ac44b603a7bc4b5278b4", "message": "feature #3009: add a  doc for build package", "committedDate": "2021-01-17T08:40:03Z", "type": "commit"}, {"oid": "6da49a049eab19a43ce8950720126f3d28a45f15", "url": "https://github.com/seata/seata/commit/6da49a049eab19a43ce8950720126f3d28a45f15", "message": "feature #3009: fix seata-server.sh", "committedDate": "2021-01-17T09:25:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzI2MjY2NQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r563262665", "bodyText": "english description", "author": "a364176773", "createdAt": "2021-01-24T09:18:10Z", "path": "distribution/release-seata.xml", "diffHunk": "@@ -45,18 +45,20 @@\n \n         <fileSet>\n             <includes>\n-                <include>lib/**</include>\n+                <include>logs/**</include>\n             </includes>\n-            <excludes>\n-                <exclude>lib/mysql-connector-java-*.jar</exclude>\n-            </excludes>\n         </fileSet>\n     </fileSets>\n     <files>\n         <file>\n             <source>LICENSE-BIN</source>\n             <destName>LICENSE</destName>\n         </file>\n+        <file>\n+            <!--\u6253\u597d\u7684jar\u5305\u540d\u79f0\u548c\u653e\u7f6e\u76ee\u5f55-->", "originalCommit": "6da49a049eab19a43ce8950720126f3d28a45f15", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTE3MTI0Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r581171243", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-02-23T16:08:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzI2MjY2NQ=="}], "type": "inlineReview"}, {"oid": "9bd0dcd693166fdebd097d0dd757bd5d1ba21fcd", "url": "https://github.com/seata/seata/commit/9bd0dcd693166fdebd097d0dd757bd5d1ba21fcd", "message": "feature #3009: Resolve code conflicts", "committedDate": "2021-02-23T16:10:27Z", "type": "commit"}, {"oid": "054784c1161ae49aa0a25378e14365880a7414f4", "url": "https://github.com/seata/seata/commit/054784c1161ae49aa0a25378e14365880a7414f4", "message": "feature #3009: seata-spring-autoconfigure spearation", "committedDate": "2021-02-23T17:20:58Z", "type": "commit"}, {"oid": "7526e8d2031024b7bc0f79ca97b9d66ce51e50f3", "url": "https://github.com/seata/seata/commit/7526e8d2031024b7bc0f79ca97b9d66ce51e50f3", "message": "feature #3009: bug fix seata-spring-autoconfigure", "committedDate": "2021-02-25T15:46:19Z", "type": "commit"}, {"oid": "53ff452a4d4f31dfc0ae80f474011e5873ddb375", "url": "https://github.com/seata/seata/commit/53ff452a4d4f31dfc0ae80f474011e5873ddb375", "message": "feature #3009: seata-spring-autoconfigure check-style fix", "committedDate": "2021-02-25T16:04:46Z", "type": "commit"}, {"oid": "0db7c3433506c92eeb921efcd194289e4989555c", "url": "https://github.com/seata/seata/commit/0db7c3433506c92eeb921efcd194289e4989555c", "message": "feature #3009: seata-spring-autoconfigure check-style fix", "committedDate": "2021-02-25T16:12:44Z", "type": "commit"}, {"oid": "0aeeb578e6c0cc4b64c218540c5e19b9fdc2bb3a", "url": "https://github.com/seata/seata/commit/0aeeb578e6c0cc4b64c218540c5e19b9fdc2bb3a", "message": "feature #3009: add testcase for seata-spring-autoconfigure", "committedDate": "2021-02-25T16:32:02Z", "type": "commit"}, {"oid": "a0506d5c9d674bc9b5810e40769b92e09b76aaa8", "url": "https://github.com/seata/seata/commit/a0506d5c9d674bc9b5810e40769b92e09b76aaa8", "message": "feature #3009: seata-spring-autoconfigure check-style fix", "committedDate": "2021-02-25T16:33:05Z", "type": "commit"}, {"oid": "f26a0aa2fca0f27da48d13198be157bb6818ec45", "url": "https://github.com/seata/seata/commit/f26a0aa2fca0f27da48d13198be157bb6818ec45", "message": "feature #3009: update notation", "committedDate": "2021-03-13T12:44:16Z", "type": "commit"}, {"oid": "ebe5f7a5113127dae92e118e3393175023a6c3bc", "url": "https://github.com/seata/seata/commit/ebe5f7a5113127dae92e118e3393175023a6c3bc", "message": "feature #3009: resolve conflicts", "committedDate": "2021-03-26T11:36:49Z", "type": "commit"}, {"oid": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "url": "https://github.com/seata/seata/commit/d9afba0b8b92f4868e6fecd85a8da24392c206e1", "message": "feature #3009: check-style", "committedDate": "2021-03-26T11:46:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MTU1Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611061553", "bodyText": "import static", "author": "a364176773", "createdAt": "2021-04-10T15:59:00Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/java/io/seata/spring/boot/autoconfigure/properties/SeataProperties.java", "diffHunk": "@@ -16,17 +16,17 @@\n package io.seata.spring.boot.autoconfigure.properties;\n \n import io.seata.common.DefaultValues;\n+import io.seata.spring.boot.autoconfigure.StarterConstants;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.boot.context.properties.ConfigurationProperties;\n import org.springframework.stereotype.Component;\n \n-import static io.seata.spring.boot.autoconfigure.StarterConstants.SEATA_PREFIX;\n \n /**\n  * @author xingfudeshi@gmail.com\n  */\n @Component\n-@ConfigurationProperties(prefix = SEATA_PREFIX)\n+@ConfigurationProperties(prefix = StarterConstants.SEATA_PREFIX)", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyNzQwOQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612227409", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:13:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MTU1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MTc5Mg==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611061792", "bodyText": "please restore the code formatting style", "author": "a364176773", "createdAt": "2021-04-10T16:00:44Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/java/io/seata/spring/boot/autoconfigure/provider/SpringBootConfigurationProvider.java", "diffHunk": "@@ -32,6 +26,12 @@\n import org.springframework.cglib.proxy.MethodProxy;\n import org.springframework.context.ApplicationContext;\n \n+import java.lang.reflect.Field;", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyNzQ5MA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612227490", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:13:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MTc5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjE1Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611062153", "bodyText": "please add private", "author": "a364176773", "createdAt": "2021-04-10T16:04:59Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/MetricsProperties.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.METRICS_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = METRICS_PREFIX)\n+public class MetricsProperties {\n+    Boolean enabled = false;", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyNzU1NQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612227555", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:13:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjE1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjE4NQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611062185", "bodyText": "please add private", "author": "a364176773", "createdAt": "2021-04-10T16:05:27Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/ServerProperties.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import java.time.Duration;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.SERVER_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = SERVER_PREFIX)\n+public class ServerProperties {\n+    Duration maxCommitRetryTimeout = Duration.ofMillis(-1);", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyNzYyMA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612227620", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:13:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjE4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjI0MA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611062240", "bodyText": "please add private", "author": "a364176773", "createdAt": "2021-04-10T16:05:40Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/ServerRecoveryProperties.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.SERVER_RECOVERY_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = SERVER_RECOVERY_PREFIX)\n+public class ServerRecoveryProperties {\n+    Integer committingRetryPeriod = 1000;", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyNzg0MQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612227841", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:14:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjI0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjI1Ng==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611062256", "bodyText": "please add private", "author": "a364176773", "createdAt": "2021-04-10T16:05:46Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/ServerUndoProperties.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.SERVER_UNDO_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = SERVER_UNDO_PREFIX)\n+public class ServerUndoProperties {\n+    Integer logSaveDays = 7;", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjM0Ng==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611062346", "bodyText": "please add private", "author": "a364176773", "createdAt": "2021-04-10T16:06:26Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/store/StoreDBProperties.java", "diffHunk": "@@ -0,0 +1,159 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server.store;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.STORE_DB_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = STORE_DB_PREFIX)\n+public class StoreDBProperties {\n+    String datasource = \"druid\";", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjQwNw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611062407", "bodyText": "please add private", "author": "a364176773", "createdAt": "2021-04-10T16:07:01Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/store/StoreFileProperties.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server.store;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.STORE_FILE_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = STORE_FILE_PREFIX)\n+public class StoreFileProperties {\n+    String dir = \"sessionStore\";", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyNzg4Ng==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612227886", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:14:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjQwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjQzNA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611062434", "bodyText": "please add private", "author": "a364176773", "createdAt": "2021-04-10T16:07:14Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/store/StoreProperties.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server.store;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.STORE_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = STORE_PREFIX)\n+public class StoreProperties {\n+    /**\n+     * file, db, redis\n+     */\n+    private String mode = \"file\";", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyODAzMQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612228031", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:14:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjQzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjU3OA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611062578", "bodyText": "please add private", "author": "a364176773", "createdAt": "2021-04-10T16:07:55Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/store/StoreRedisProperties.java", "diffHunk": "@@ -0,0 +1,160 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server.store;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.STORE_REDIS_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.STORE_REDIS_SINGLE_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.STORE_REDIS_SENTINEL_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = STORE_REDIS_PREFIX)\n+public class StoreRedisProperties {\n+    /**\n+     * single, sentinel\n+     */\n+    String mode = \"single\";", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyODExOA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612228118", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:14:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MjU3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2Mjk5OQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611062999", "bodyText": "private static final", "author": "a364176773", "createdAt": "2021-04-10T16:11:44Z", "path": "server/src/main/java/io/seata/server/controller/HealthController.java", "diffHunk": "@@ -0,0 +1,49 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.server.controller;\n+\n+import io.seata.server.ServerRunner;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Controller;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.ResponseBody;\n+\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Controller\n+@RequestMapping\n+public class HealthController {\n+    private Logger logger = LoggerFactory.getLogger(HealthController.class);", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyODE3Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612228173", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:14:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2Mjk5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MzA2Nw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611063067", "bodyText": "started = Boolean.FALSE;", "author": "a364176773", "createdAt": "2021-04-10T16:12:22Z", "path": "server/src/main/java/io/seata/server/ServerRunner.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.server;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.boot.CommandLineRunner;\n+import org.springframework.stereotype.Component;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+public class ServerRunner implements CommandLineRunner {\n+\n+    final Logger logger = LoggerFactory.getLogger(ServerRunner.class);\n+\n+    private Boolean started = Boolean.FALSE;\n+\n+\n+    @Override\n+    public void run(String... args) {\n+        try {\n+            long start = System.currentTimeMillis();\n+            Server.main(args);\n+            started = true;\n+\n+            long cost = System.currentTimeMillis() - start;\n+            logger.info(\"seata server started in {} millSeconds\", cost);\n+        } catch (Throwable e) {\n+            logger.error(\"seata server start error: {} \", e.getMessage(), e);", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyODIzOQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612228239", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:14:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTA2MzA2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTE5MDc1NQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r611190755", "bodyText": "application: \"seata-server\"", "author": "a364176773", "createdAt": "2021-04-11T13:42:41Z", "path": "server/src/main/resources/application.yaml", "diffHunk": "@@ -0,0 +1,134 @@\n+server:\n+  port: 9098\n+\n+logging:\n+  config: classpath:logback.xml\n+  file:\n+    path: ${user.home}/logs\n+\n+seata:\n+  config:\n+    type: file\n+    file:\n+      name: file.conf\n+    apollo:\n+      appId: seata-server\n+      apolloMeta: http://localhost:8801\n+      namespace: application\n+    nacos:\n+      serverAddr: 127.0.0.1:8848\n+      namespace:\n+      group: SEATA_GROUP\n+      username:\n+      password:\n+    consul:\n+      serverAddr: 127.0.0.1:8500\n+    zk:\n+      serverAddr: 127.0.0.1:2181\n+      sessionTimeout: 6000\n+      connectTimeout: 2000\n+      username:\n+      password:\n+    etcd3:\n+      serverAddr: http://localhost:2379\n+  registry:\n+    type: file\n+    file:\n+      name: file.conf\n+    zk:\n+      cluster: default\n+      serverAddr: 127.0.0.1:2181\n+      sessionTimeout: 6000\n+      connectTimeout: 2000\n+      username: \"\"\n+      password: \"\"\n+    nacos:\n+      application:", "originalCommit": "d9afba0b8b92f4868e6fecd85a8da24392c206e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjIyODMxNQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612228315", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T08:14:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTE5MDc1NQ=="}], "type": "inlineReview"}, {"oid": "c1ddbee6a4573581ce5d39e3c11006e6530b065e", "url": "https://github.com/seata/seata/commit/c1ddbee6a4573581ce5d39e3c11006e6530b065e", "message": "Merge branch 'develop' into server-boot", "committedDate": "2021-04-13T05:12:20Z", "type": "commit"}, {"oid": "054e6a2a5f3b4a4033b3cf29da70a9fb90959344", "url": "https://github.com/seata/seata/commit/054e6a2a5f3b4a4033b3cf29da70a9fb90959344", "message": "feature #3009: seata-server springboot support", "committedDate": "2021-04-13T08:11:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjQ5NDA4NA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612494084", "bodyText": "\u9488\u5bf9\u8fd9\u4e9b\u914d\u7f6e\u5e94\u8be5\u5199\u4e00\u4e2aapplication.yaml.example", "author": "a364176773", "createdAt": "2021-04-13T14:22:28Z", "path": "server/src/main/resources/application.yaml", "diffHunk": "@@ -0,0 +1,138 @@\n+server:\n+  port: 9091\n+\n+logging:\n+  config: classpath:logback.xml\n+  file:\n+    path: ${user.home}/logs\n+\n+seata:\n+  config:\n+    type: file\n+    nacos:\n+      serverAddr: 127.0.0.1:8848\n+      namespace:\n+      group: SEATA_GROUP\n+      username:\n+      password:\n+      dataId: seataServer.properties\n+    consul:\n+      serverAddr: 127.0.0.1:8500\n+      aclToken:\n+    apollo:\n+      appId: seata-server\n+      apolloMeta: http://192.168.1.204:8801\n+      apolloConfigService: http://192.168.1.204:8080\n+      namespace: application\n+      apolloAccesskeySecret:\n+      cluster: seata\n+    zk:\n+      serverAddr: 127.0.0.1:2181\n+      sessionTimeout: 6000\n+      connectTimeout: 2000\n+      username:\n+      password:\n+      nodePath: /seata/seata.properties\n+    etcd3:\n+      serverAddr: http://localhost:2379\n+  registry:\n+    type: file\n+    nacos:\n+      application: seata-server\n+      serverAddr: 127.0.0.1:8848\n+      group: SEATA_GROUP\n+      namespace:\n+      cluster: default\n+      username:\n+      password:\n+    eureka:\n+      serviceUrl: http://localhost:8761/eureka\n+      application: default\n+      weight: 1\n+    redis:\n+      serverAddr: localhost:6379\n+      db: 0\n+      password:\n+      cluster: default\n+      timeout: 0\n+    zk:\n+      cluster: default\n+      serverAddr: 127.0.0.1:2181\n+      sessionTimeout: 6000\n+      connectTimeout: 2000\n+      username: \"\"\n+      password: \"\"\n+    consul:\n+      cluster: default\n+      serverAddr: 127.0.0.1:8500\n+      aclToken:\n+    etcd3:\n+      cluster: default\n+      serverAddr: http://localhost:2379\n+    sofa:\n+      serverAddr: 127.0.0.1:9603\n+      application: default\n+      region: DEFAULT_ZONE\n+      datacenter: DefaultDataCenter\n+      cluster: default\n+      group: SEATA_GROUP\n+      addressWaitTime: 3000\n+\n+  server:\n+    maxCommitRetryTimeout: -1\n+    maxRollbackRetryTimeout: -1\n+    rollbackRetryTimeoutUnlockEnable: false\n+    recovery:\n+      rollbackingRetryPeriod: 1000\n+      timeoutRetryPeriod: 1000\n+    undo:\n+      logSaveDays: 7\n+      logDeletePeriod: 86400000\n+  store:\n+    mode: file\n+    file:\n+      dir: sessionStore", "originalCommit": "054e6a2a5f3b4a4033b3cf29da70a9fb90959344", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjU4ODY3NA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612588674", "bodyText": "added", "author": "spilledyear", "createdAt": "2021-04-13T16:11:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjQ5NDA4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMzMyMDI3Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r613320273", "bodyText": "added\n\n\u4e2a\u4eba\u8ba4\u4e3aseata\u76f8\u5173\u914d\u7f6e\u4ec5\u9700\u7559seata: store: mode: file ,\u5176\u4f59\u90fd\u53ef\u4ee5\u653e\u5230example\u4e2d\u5373\u53ef,\u4fdd\u6301\u7cbe\u7b80", "author": "a364176773", "createdAt": "2021-04-14T14:52:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjQ5NDA4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjUwMDk4MQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612500981", "bodyText": "SeataClientPropertiesAutoConfiguration", "author": "a364176773", "createdAt": "2021-04-13T14:29:52Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/spring.factories", "diffHunk": "@@ -0,0 +1,2 @@\n+# Auto Configure\n+org.springframework.boot.autoconfigure.EnableAutoConfiguration=io.seata.spring.boot.autoconfigure.SeataServerPropertiesAutoConfiguration", "originalCommit": "054e6a2a5f3b4a4033b3cf29da70a9fb90959344", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjU4Nzc5Nw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r612587797", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-13T16:10:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMjUwMDk4MQ=="}], "type": "inlineReview"}, {"oid": "e639b2e338677eb81615649cab3e0a84acb73a21", "url": "https://github.com/seata/seata/commit/e639b2e338677eb81615649cab3e0a84acb73a21", "message": "feature #3009: server boot support", "committedDate": "2021-04-13T16:02:52Z", "type": "commit"}, {"oid": "07eb6e5d098f6ed4af2e91dd59687527ea4ee23e", "url": "https://github.com/seata/seata/commit/07eb6e5d098f6ed4af2e91dd59687527ea4ee23e", "message": "feature #3009: server boot support", "committedDate": "2021-04-13T16:08:48Z", "type": "commit"}, {"oid": "1e77f29e80f56c376eaf5abafdc2ae3604390a25", "url": "https://github.com/seata/seata/commit/1e77f29e80f56c376eaf5abafdc2ae3604390a25", "message": "feature #3009: fix spring-configuration-metadata", "committedDate": "2021-04-13T16:23:28Z", "type": "commit"}, {"oid": "00d8cb755584ea8b17b9c6e1c2f7dadf5ac39d4e", "url": "https://github.com/seata/seata/commit/00d8cb755584ea8b17b9c6e1c2f7dadf5ac39d4e", "message": "feature #3009: test case", "committedDate": "2021-04-13T16:25:32Z", "type": "commit"}, {"oid": "d0abcaa4bb908bf9304f46b9097202bd5b914599", "url": "https://github.com/seata/seata/commit/d0abcaa4bb908bf9304f46b9097202bd5b914599", "message": "feature #3009: server boot support", "committedDate": "2021-04-15T10:46:22Z", "type": "commit"}, {"oid": "c82013376b242d6abf128da13d98c7e0d87b16e2", "url": "https://github.com/seata/seata/commit/c82013376b242d6abf128da13d98c7e0d87b16e2", "message": "feature #3009: server boot support", "committedDate": "2021-04-15T10:51:51Z", "type": "commit"}, {"oid": "6288c8db69b1e4ac256325b8011f6b396a33a96b", "url": "https://github.com/seata/seata/commit/6288c8db69b1e4ac256325b8011f6b396a33a96b", "message": "feature #3009: test case", "committedDate": "2021-04-15T14:22:28Z", "type": "commit"}, {"oid": "ca428694f4c22bcdb59a8a63766e54de74f54342", "url": "https://github.com/seata/seata/commit/ca428694f4c22bcdb59a8a63766e54de74f54342", "message": "feature #3009: bat fix", "committedDate": "2021-04-15T15:27:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDEzMDgzNg==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614130836", "bodyText": "simple to return serverRunner.started() ? OK : NOT_OK; ?", "author": "caohdgege", "createdAt": "2021-04-15T14:40:27Z", "path": "server/src/main/java/io/seata/server/controller/HealthController.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.server.controller;\n+\n+import io.seata.server.ServerRunner;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Controller;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.ResponseBody;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Controller\n+@RequestMapping\n+public class HealthController {\n+\n+    private static final String OK = \"ok\";\n+    private static final String NOT_OK = \"not_ok\";\n+\n+    @Autowired\n+    private ServerRunner serverRunner;\n+\n+\n+    @RequestMapping(\"/health\")\n+    @ResponseBody\n+    String healthCheck() {\n+        boolean started = serverRunner.started();", "originalCommit": "6288c8db69b1e4ac256325b8011f6b396a33a96b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDU4MjcwNg==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614582706", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-16T06:06:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDEzMDgzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE0MTQzOA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614141438", "bodyText": "\u6839\u636e\u4f20\u7edf\uff0clogger->LOGGER", "author": "caohdgege", "createdAt": "2021-04-15T14:52:34Z", "path": "server/src/main/java/io/seata/server/ServerRunner.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.server;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.boot.CommandLineRunner;\n+import org.springframework.stereotype.Component;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+public class ServerRunner implements CommandLineRunner {\n+\n+    final Logger logger = LoggerFactory.getLogger(ServerRunner.class);", "originalCommit": "6288c8db69b1e4ac256325b8011f6b396a33a96b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDU4MjczMA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614582730", "bodyText": "fixed", "author": "spilledyear", "createdAt": "2021-04-16T06:06:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE0MTQzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE0MjEwNg==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614142106", "bodyText": "Boolean or boolean ?", "author": "caohdgege", "createdAt": "2021-04-15T14:53:23Z", "path": "server/src/main/java/io/seata/server/ServerRunner.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.server;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.springframework.boot.CommandLineRunner;\n+import org.springframework.stereotype.Component;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+public class ServerRunner implements CommandLineRunner {\n+\n+    final Logger logger = LoggerFactory.getLogger(ServerRunner.class);\n+\n+    private Boolean started = Boolean.FALSE;", "originalCommit": "6288c8db69b1e4ac256325b8011f6b396a33a96b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDU4MjgzMQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614582831", "bodyText": "boolean fixed", "author": "spilledyear", "createdAt": "2021-04-16T06:07:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE0MjEwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2MTIwMQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614161201", "bodyText": "./mvnw ?", "author": "caohdgege", "createdAt": "2021-04-15T15:15:29Z", "path": "server/src/main/resources/README-zh.md", "diffHunk": "@@ -28,3 +28,5 @@\n - etcd3: \u7528\u4e8e\u5411 Etcd3 \u4e2d\u6dfb\u52a0\u914d\u7f6e\n - consul: \u7528\u4e8e\u5411 consul \u4e2d\u6dfb\u52a0\u914d\u7f6e\n \n+## \u6253\u5305\n+mvn -Prelease-seata -Dmaven.test.skip=true clean install -U", "originalCommit": "6288c8db69b1e4ac256325b8011f6b396a33a96b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDU4Mjg2Nw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614582867", "bodyText": "down", "author": "spilledyear", "createdAt": "2021-04-16T06:07:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2MTIwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2MzM5Nw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614163397", "bodyText": "\u6839\u636eSpringBoot\u7684\u4f7f\u7528\u4e60\u60ef\u4e0a\u662f\u4e0d\u662f\u5e94\u8be5\u7528-\u800c\u4e0d\u662f\u5c0f\u5199\u9a7c\u5cf0\uff1f", "author": "caohdgege", "createdAt": "2021-04-15T15:18:04Z", "path": "server/src/main/resources/application.example.yaml", "diffHunk": "@@ -0,0 +1,134 @@\n+server:\n+  port: 9091\n+\n+logging:\n+  config: classpath:logback.xml\n+  file:\n+    path: ${user.home}/logs\n+\n+seata:\n+  config:\n+    type: file\n+    nacos:\n+      serverAddr: 127.0.0.1:8848\n+      namespace:\n+      group: SEATA_GROUP\n+      username:\n+      password:\n+      dataId: seataServer.properties\n+    consul:\n+      serverAddr: 127.0.0.1:8500\n+      aclToken:\n+    apollo:\n+      appId: seata-server\n+      apolloMeta: http://192.168.1.204:8801\n+      apolloConfigService: http://192.168.1.204:8080\n+      namespace: application\n+      apolloAccesskeySecret:\n+      cluster: seata\n+    zk:\n+      serverAddr: 127.0.0.1:2181\n+      sessionTimeout: 6000\n+      connectTimeout: 2000\n+      username:\n+      password:\n+      nodePath: /seata/seata.properties\n+    etcd3:\n+      serverAddr: http://localhost:2379\n+  registry:\n+    type: file\n+    nacos:\n+      application: seata-server\n+      serverAddr: 127.0.0.1:8848\n+      group: SEATA_GROUP\n+      namespace:\n+      cluster: default\n+      username:\n+      password:\n+    eureka:\n+      serviceUrl: http://localhost:8761/eureka\n+      application: default\n+      weight: 1\n+    redis:\n+      serverAddr: localhost:6379\n+      db: 0\n+      password:\n+      cluster: default\n+      timeout: 0\n+    zk:\n+      cluster: default\n+      serverAddr: 127.0.0.1:2181\n+      sessionTimeout: 6000\n+      connectTimeout: 2000\n+      username: \"\"\n+      password: \"\"\n+    consul:\n+      cluster: default\n+      serverAddr: 127.0.0.1:8500\n+      aclToken:\n+    etcd3:\n+      cluster: default\n+      serverAddr: http://localhost:2379\n+    sofa:\n+      serverAddr: 127.0.0.1:9603\n+      application: default\n+      region: DEFAULT_ZONE\n+      datacenter: DefaultDataCenter\n+      cluster: default\n+      group: SEATA_GROUP\n+      addressWaitTime: 3000\n+\n+  server:\n+    maxCommitRetryTimeout: -1\n+    maxRollbackRetryTimeout: -1\n+    rollbackRetryTimeoutUnlockEnable: false\n+    recovery:\n+      committingRetryPeriod: 1000\n+      asynCommittingRetryPeriod: 1000\n+      rollbackingRetryPeriod: 1000\n+      timeoutRetryPeriod: 1000\n+    undo:\n+      logSaveDays: 7\n+      logDeletePeriod: 86400000\n+  store:\n+    mode: file\n+    file:\n+      dir: sessionStore\n+      maxBranchSessionSize: 16384", "originalCommit": "6288c8db69b1e4ac256325b8011f6b396a33a96b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDU4MjkwMQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614582901", "bodyText": "down", "author": "spilledyear", "createdAt": "2021-04-16T06:07:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2MzM5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2MzU1OQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614163559", "bodyText": "./mvnw ?", "author": "caohdgege", "createdAt": "2021-04-15T15:18:17Z", "path": "server/src/main/resources/README.md", "diffHunk": "@@ -28,3 +28,6 @@\n - etcd3: Initialize script for Etcd3\n - consul: Initialize script for consul\n \n+## build packege \n+mvn -Prelease-seata -Dmaven.test.skip=true clean install -U", "originalCommit": "6288c8db69b1e4ac256325b8011f6b396a33a96b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDU4Mjk5Ng==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614582996", "bodyText": "down", "author": "spilledyear", "createdAt": "2021-04-16T06:07:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2MzU1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2NTU5Nw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614165597", "bodyText": "com.mysql.jdbc.Driver \u5e94\u8be5\u8ddfapplication.example.yaml\u540c\u6b65", "author": "caohdgege", "createdAt": "2021-04-15T15:20:50Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/store/StoreDBProperties.java", "diffHunk": "@@ -0,0 +1,159 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server.store;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.STORE_DB_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = STORE_DB_PREFIX)\n+public class StoreDBProperties {\n+    private String datasource = \"druid\";\n+    private String dbType = \"mysql\";\n+    private String driverClassName = \"com.mysql.cj.jdbc.Driver\";", "originalCommit": "6288c8db69b1e4ac256325b8011f6b396a33a96b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDU4MzAzNg==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614583036", "bodyText": "down", "author": "spilledyear", "createdAt": "2021-04-16T06:07:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2NTU5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2NTk4Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614165983", "bodyText": "jdbc:mysql://127.0.0.1:3306/seata?rewriteBatchedStatements=true \u4e0b\u540c", "author": "caohdgege", "createdAt": "2021-04-15T15:21:19Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/store/StoreDBProperties.java", "diffHunk": "@@ -0,0 +1,159 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server.store;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.STORE_DB_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = STORE_DB_PREFIX)\n+public class StoreDBProperties {\n+    private String datasource = \"druid\";\n+    private String dbType = \"mysql\";\n+    private String driverClassName = \"com.mysql.cj.jdbc.Driver\";\n+    private String url = \"jdbc:mysql://localhost:3306/seata?useUnicode=true\";", "originalCommit": "6288c8db69b1e4ac256325b8011f6b396a33a96b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDU4MzA3OA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614583078", "bodyText": "down", "author": "spilledyear", "createdAt": "2021-04-16T06:07:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDE2NTk4Mw=="}], "type": "inlineReview"}, {"oid": "af9e258a66572214e6c5737501a9e8b7e235172d", "url": "https://github.com/seata/seata/commit/af9e258a66572214e6c5737501a9e8b7e235172d", "message": "feature #3009: Code optimization", "committedDate": "2021-04-16T06:03:18Z", "type": "commit"}, {"oid": "6c78b80aa5496f1e55c5a3b494b6350bc046b311", "url": "https://github.com/seata/seata/commit/6c78b80aa5496f1e55c5a3b494b6350bc046b311", "message": "Merge remote-tracking branch 'ups/develop' into server-boot", "committedDate": "2021-04-16T06:03:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDYxNDkzMQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614614931", "bodyText": "Where s the groupId and version?", "author": "l81893521", "createdAt": "2021-04-16T07:17:10Z", "path": "server/pom.xml", "diffHunk": "@@ -136,213 +162,61 @@\n         </dependency>\n     </dependencies>\n \n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-assembly-plugin</artifactId>\n+                <version>3.0.0</version>\n+                <configuration>\n+                    <archive>\n+                        <manifest>\n+                            <mainClass>io.seata.server.ServerApplication</mainClass>\n+                        </manifest>\n+                    </archive>\n+                    <descriptorRefs>\n+                        <descriptorRef>jar-with-dependencies</descriptorRef>\n+                    </descriptorRefs>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n     <profiles>\n         <profile>\n             <id>release-seata</id>\n             <build>\n+                <finalName>seata-server</finalName>\n                 <plugins>\n                     <plugin>\n-                        <groupId>org.apache.maven.plugins</groupId>\n-                        <artifactId>maven-clean-plugin</artifactId>\n-                        <version>3.0.0</version>\n+                        <artifactId>maven-jar-plugin</artifactId>", "originalCommit": "6c78b80aa5496f1e55c5a3b494b6350bc046b311", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDg4OTcwNw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614889707", "bodyText": "added", "author": "spilledyear", "createdAt": "2021-04-16T14:37:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDYxNDkzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDY4MTM2Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614681363", "bodyText": "I think can remove\naddDefaultImplementationEntries\n\nand\naddDefaultSpecificationEntries", "author": "l81893521", "createdAt": "2021-04-16T09:03:28Z", "path": "server/pom.xml", "diffHunk": "@@ -136,213 +162,61 @@\n         </dependency>\n     </dependencies>\n \n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-assembly-plugin</artifactId>\n+                <version>3.0.0</version>\n+                <configuration>\n+                    <archive>\n+                        <manifest>\n+                            <mainClass>io.seata.server.ServerApplication</mainClass>\n+                        </manifest>\n+                    </archive>\n+                    <descriptorRefs>\n+                        <descriptorRef>jar-with-dependencies</descriptorRef>\n+                    </descriptorRefs>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n     <profiles>\n         <profile>\n             <id>release-seata</id>\n             <build>\n+                <finalName>seata-server</finalName>\n                 <plugins>\n                     <plugin>\n-                        <groupId>org.apache.maven.plugins</groupId>\n-                        <artifactId>maven-clean-plugin</artifactId>\n-                        <version>3.0.0</version>\n+                        <artifactId>maven-jar-plugin</artifactId>\n                         <configuration>\n-                            <excludeDefaultDirectories>false</excludeDefaultDirectories>\n-                            <filesets>\n-                                <fileset>\n-                                    <directory>../distribution</directory>\n-                                    <includes>\n-                                        <include>bin/**</include>\n-                                        <include>conf/**</include>\n-                                        <include>logs/**</include>\n-                                        <include>lib/**</include>\n-                                        <include>seata-server-${revision}/**</include>\n-                                    </includes>\n-                                </fileset>\n-                            </filesets>\n+                            <archive>\n+                                <manifest>\n+                                    <addDefaultImplementationEntries>true</addDefaultImplementationEntries>", "originalCommit": "6c78b80aa5496f1e55c5a3b494b6350bc046b311", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDg5MDEyNQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r614890125", "bodyText": "removed", "author": "spilledyear", "createdAt": "2021-04-16T14:38:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNDY4MTM2Mw=="}], "type": "inlineReview"}, {"oid": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "url": "https://github.com/seata/seata/commit/a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "message": "feature #3009: maven-jar-plugin", "committedDate": "2021-04-16T14:36:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU2MjE0Ng==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627562146", "bodyText": "\u8fd9\u4e2a\u4e0d\u7528\u6ce8\u91ca\u5427\u3002\u65b0\u65e7\u7248\u672c\u7684\u5206\u652f\u5207\u6362\u6765\u5207\u6362\u53bb\uff0c\u65e7\u7248\u672c\u7684\u6253\u5305\u8fc7\uff0c\u5207\u6362\u5230\u65b0\u7248\u672c\u5206\u652f\u7684\u65f6\u5019\uff0c\u90a3\u4e9b\u65e7\u7248\u672c\u6253\u5305\u751f\u6210\u51fa\u6765\u7684\u6587\u4ef6\u4f1a\u63d0\u793a\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:07:15Z", "path": ".gitignore", "diffHunk": "@@ -26,8 +26,8 @@ dependency-reduced-pom.xml\n *.diff\n *.patch\n *.tmp\n-/distribution/bin/\n-/distribution/conf/\n+#/distribution/bin/\n+#/distribution/conf/", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5MjU4NA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627592584", "bodyText": "\u8fd9\u4e2a\u662f\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:36:03Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -0,0 +1,230 @@\n+{\n+  \"groups\": [],\n+  \"properties\": [\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.application-id\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5MjY1Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627592653", "bodyText": "\u8fd9\u4e2a\u662f\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:36:08Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -0,0 +1,230 @@\n+{\n+  \"groups\": [],\n+  \"properties\": [\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.application-id\",\n+      \"type\": \"java.lang.String\",\n+      \"description\": \"The application id, default value if '${spring.application.name}'.\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n+      \"defaultValue\": \"${spring.application.name:}\",\n+      \"deprecation\": {\n+        \"level\": \"warning\",\n+        \"replacement\": \"seata.application-id\",\n+        \"reason\": \"It may be removed in a future release, please configure to 'seata.application-id'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.tx-service-group\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5Mjc2Mg==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627592762", "bodyText": "\u8fd9\u4e2a\u662f\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:36:19Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -0,0 +1,230 @@\n+{\n+  \"groups\": [],\n+  \"properties\": [\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.application-id\",\n+      \"type\": \"java.lang.String\",\n+      \"description\": \"The application id, default value if '${spring.application.name}'.\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n+      \"defaultValue\": \"${spring.application.name:}\",\n+      \"deprecation\": {\n+        \"level\": \"warning\",\n+        \"replacement\": \"seata.application-id\",\n+        \"reason\": \"It may be removed in a future release, please configure to 'seata.application-id'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.tx-service-group\",\n+      \"type\": \"java.lang.String\",\n+      \"description\": \"The tx-service-group.\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n+      \"deprecation\": {\n+        \"level\": \"warning\",\n+        \"replacement\": \"seata.tx-service-group\",\n+        \"reason\": \"It may be removed in a future release, please configure to 'seata.tx-service-group'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"seata.application-id\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5Mjg1Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627592853", "bodyText": "\u8fd9\u4e2a\u662f\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:36:27Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -0,0 +1,230 @@\n+{\n+  \"groups\": [],\n+  \"properties\": [\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.application-id\",\n+      \"type\": \"java.lang.String\",\n+      \"description\": \"The application id, default value if '${spring.application.name}'.\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n+      \"defaultValue\": \"${spring.application.name:}\",\n+      \"deprecation\": {\n+        \"level\": \"warning\",\n+        \"replacement\": \"seata.application-id\",\n+        \"reason\": \"It may be removed in a future release, please configure to 'seata.application-id'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.tx-service-group\",\n+      \"type\": \"java.lang.String\",\n+      \"description\": \"The tx-service-group.\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n+      \"deprecation\": {\n+        \"level\": \"warning\",\n+        \"replacement\": \"seata.tx-service-group\",\n+        \"reason\": \"It may be removed in a future release, please configure to 'seata.tx-service-group'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"seata.application-id\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n+      \"defaultValue\": \"${spring.application.name:}\"\n+    },\n+    {\n+      \"name\": \"seata.data-source-proxy-mode\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5MzM4NA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627593384", "bodyText": "\u8fd9\u4e2a\u662f\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:37:15Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -0,0 +1,230 @@\n+{\n+  \"groups\": [],\n+  \"properties\": [\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.application-id\",\n+      \"type\": \"java.lang.String\",\n+      \"description\": \"The application id, default value if '${spring.application.name}'.\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n+      \"defaultValue\": \"${spring.application.name:}\",\n+      \"deprecation\": {\n+        \"level\": \"warning\",\n+        \"replacement\": \"seata.application-id\",\n+        \"reason\": \"It may be removed in a future release, please configure to 'seata.application-id'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.tx-service-group\",\n+      \"type\": \"java.lang.String\",\n+      \"description\": \"The tx-service-group.\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n+      \"deprecation\": {\n+        \"level\": \"warning\",\n+        \"replacement\": \"seata.tx-service-group\",\n+        \"reason\": \"It may be removed in a future release, please configure to 'seata.tx-service-group'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"seata.application-id\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n+      \"defaultValue\": \"${spring.application.name:}\"\n+    },\n+    {\n+      \"name\": \"seata.data-source-proxy-mode\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n+      \"defaultValue\": \"AT\"\n+    },\n+    {\n+      \"name\": \"seata.transport.heartbeat\",\n+      \"type\": \"java.lang.Boolean\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.TransportProperties\",\n+      \"defaultValue\": true\n+    },\n+    {\n+      \"name\": \"seata.transport.enable-client-batch-send-request\",\n+      \"type\": \"java.lang.Boolean\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.TransportProperties\",\n+      \"defaultValue\": true\n+    },\n+    {\n+      \"name\": \"seata.transport.shutdown.wait\",\n+      \"type\": \"java.lang.Integer\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ShutdownProperties\",\n+      \"defaultValue\": 3\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.boss-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyBoss\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.worker-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyServerNIOWorker\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.server-executor-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyServerBizHandler\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.client-selector-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyClientSelector\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.client-selector-thread-size\",\n+      \"type\": \"java.lang.Integer\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": 1\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.client-worker-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyClientWorkerThread\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.worker-thread-size\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"Default\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.boss-thread-size\",\n+      \"type\": \"java.lang.Integer\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": 1\n+    },\n+    {\n+      \"name\": \"seata.registry.load-balance\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.registry.RegistryProperties\",\n+      \"defaultValue\": \"RandomLoadBalance\",\n+      \"deprecation\": {\n+        \"level\": \"error\",\n+        \"replacement\": \"seata.client.load-balance.type\",\n+        \"reason\": \"Please configure to 'seata.client.load-balance.type'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"seata.registry.load-balance-virtual-nodes\",\n+      \"type\": \"java.lang.Integer\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.registry.RegistryProperties\",\n+      \"defaultValue\": 10,\n+      \"deprecation\": {\n+        \"level\": \"error\",\n+        \"replacement\": \"seata.client.load-balance.virtual-nodes\",\n+        \"reason\": \"Please configure to 'seata.client.load-balance.virtual-nodes'.\"\n+      }\n+    }\n+  ],\n+  \"hints\": [\n+    {\n+      \"name\": \"seata.config.type\",\n+      \"providers\": [\n+        {\n+          \"name\": \"handle-as\",\n+          \"parameters\": {\n+            \"target\": \"io.seata.config.ConfigType\"\n+          }\n+        }\n+      ]\n+    },\n+    {\n+      \"name\": \"seata.registry.type\",\n+      \"providers\": [\n+        {\n+          \"name\": \"handle-as\",\n+          \"parameters\": {\n+            \"target\": \"io.seata.discovery.registry.RegistryType\"\n+          }\n+        }\n+      ]\n+    },\n+    {\n+      \"name\": \"seata.data-source-proxy-mode\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5MzUyNA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627593524", "bodyText": "\u8fd9\u4e2a\u662f\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:37:26Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -0,0 +1,230 @@\n+{\n+  \"groups\": [],\n+  \"properties\": [\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.application-id\",\n+      \"type\": \"java.lang.String\",\n+      \"description\": \"The application id, default value if '${spring.application.name}'.\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n+      \"defaultValue\": \"${spring.application.name:}\",\n+      \"deprecation\": {\n+        \"level\": \"warning\",\n+        \"replacement\": \"seata.application-id\",\n+        \"reason\": \"It may be removed in a future release, please configure to 'seata.application-id'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"spring.cloud.alibaba.seata.tx-service-group\",\n+      \"type\": \"java.lang.String\",\n+      \"description\": \"The tx-service-group.\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n+      \"deprecation\": {\n+        \"level\": \"warning\",\n+        \"replacement\": \"seata.tx-service-group\",\n+        \"reason\": \"It may be removed in a future release, please configure to 'seata.tx-service-group'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"seata.application-id\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n+      \"defaultValue\": \"${spring.application.name:}\"\n+    },\n+    {\n+      \"name\": \"seata.data-source-proxy-mode\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n+      \"defaultValue\": \"AT\"\n+    },\n+    {\n+      \"name\": \"seata.transport.heartbeat\",\n+      \"type\": \"java.lang.Boolean\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.TransportProperties\",\n+      \"defaultValue\": true\n+    },\n+    {\n+      \"name\": \"seata.transport.enable-client-batch-send-request\",\n+      \"type\": \"java.lang.Boolean\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.TransportProperties\",\n+      \"defaultValue\": true\n+    },\n+    {\n+      \"name\": \"seata.transport.shutdown.wait\",\n+      \"type\": \"java.lang.Integer\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ShutdownProperties\",\n+      \"defaultValue\": 3\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.boss-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyBoss\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.worker-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyServerNIOWorker\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.server-executor-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyServerBizHandler\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.client-selector-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyClientSelector\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.client-selector-thread-size\",\n+      \"type\": \"java.lang.Integer\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": 1\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.client-worker-thread-prefix\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"NettyClientWorkerThread\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.worker-thread-size\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": \"Default\"\n+    },\n+    {\n+      \"name\": \"seata.transport.thread-factory.boss-thread-size\",\n+      \"type\": \"java.lang.Integer\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.ThreadFactoryProperties\",\n+      \"defaultValue\": 1\n+    },\n+    {\n+      \"name\": \"seata.registry.load-balance\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.registry.RegistryProperties\",\n+      \"defaultValue\": \"RandomLoadBalance\",\n+      \"deprecation\": {\n+        \"level\": \"error\",\n+        \"replacement\": \"seata.client.load-balance.type\",\n+        \"reason\": \"Please configure to 'seata.client.load-balance.type'.\"\n+      }\n+    },\n+    {\n+      \"name\": \"seata.registry.load-balance-virtual-nodes\",\n+      \"type\": \"java.lang.Integer\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.registry.RegistryProperties\",\n+      \"defaultValue\": 10,\n+      \"deprecation\": {\n+        \"level\": \"error\",\n+        \"replacement\": \"seata.client.load-balance.virtual-nodes\",\n+        \"reason\": \"Please configure to 'seata.client.load-balance.virtual-nodes'.\"\n+      }\n+    }\n+  ],\n+  \"hints\": [\n+    {\n+      \"name\": \"seata.config.type\",\n+      \"providers\": [\n+        {\n+          \"name\": \"handle-as\",\n+          \"parameters\": {\n+            \"target\": \"io.seata.config.ConfigType\"\n+          }\n+        }\n+      ]\n+    },\n+    {\n+      \"name\": \"seata.registry.type\",\n+      \"providers\": [\n+        {\n+          \"name\": \"handle-as\",\n+          \"parameters\": {\n+            \"target\": \"io.seata.discovery.registry.RegistryType\"\n+          }\n+        }\n+      ]\n+    },\n+    {\n+      \"name\": \"seata.data-source-proxy-mode\",\n+      \"values\": [\n+        {\n+          \"value\": \"AT\",\n+          \"description\": \"the default mode.\"\n+        },\n+        {\n+          \"value\": \"XA\"\n+        }\n+      ]\n+    },\n+    {\n+      \"name\": \"seata.excludes-for-auto-proxying\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5NTI4Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627595283", "bodyText": "\u89e3\u51b3\u51b2\u7a81\u65f6\uff0c\u5f04\u9519\u4e86\u5427\u3002\n\u8fd9\u4e2a\u539f\u56e0\u63cf\u8ff0\u7b80\u5316\u6389\u4e86\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:40:09Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -187,7 +152,7 @@\n       \"deprecation\": {\n         \"level\": \"error\",\n         \"replacement\": \"seata.log.exception-rate\",\n-        \"reason\": \"Please configure to 'seata.log.exception-rate'.\"\n+        \"reason\": \"The location of this configuration has been changed to 'seata.log.exception-rate'.\"", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5NTc2NA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627595764", "bodyText": "\u4ee5\u4e0a4\u4e2a\u662f\u5c5e\u4e8eclient\u7684\uff0c\u65e0\u9700\u79fb\u9664\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:40:49Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -1,41 +1,6 @@\n {\n   \"groups\": [],\n   \"properties\": [\n-    {\n-      \"name\": \"spring.cloud.alibaba.seata.application-id\",\n-      \"type\": \"java.lang.String\",\n-      \"description\": \"The application id, default value if '${spring.application.name}'.\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n-      \"defaultValue\": \"${spring.application.name:}\",\n-      \"deprecation\": {\n-        \"level\": \"warning\",\n-        \"replacement\": \"seata.application-id\",\n-        \"reason\": \"It may be removed in a future release, please configure to 'seata.application-id'.\"\n-      }\n-    },\n-    {\n-      \"name\": \"spring.cloud.alibaba.seata.tx-service-group\",\n-      \"type\": \"java.lang.String\",\n-      \"description\": \"The tx-service-group.\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration\",\n-      \"deprecation\": {\n-        \"level\": \"warning\",\n-        \"replacement\": \"seata.tx-service-group\",\n-        \"reason\": \"It may be removed in a future release, please configure to 'seata.tx-service-group'.\"\n-      }\n-    },\n-    {\n-      \"name\": \"seata.application-id\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n-      \"defaultValue\": \"${spring.application.name:}\"\n-    },\n-    {\n-      \"name\": \"seata.data-source-proxy-mode\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n-      \"defaultValue\": \"AT\"\n-    },", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5NjE5Mg==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627596192", "bodyText": "\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:41:24Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -202,130 +167,20 @@\n       \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ServiceProperties\",\n       \"defaultValue\": false\n     },\n-    {\n-      \"name\": \"seata.transport.heartbeat\",\n-      \"type\": \"java.lang.Boolean\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.TransportProperties\",\n-      \"defaultValue\": true\n-    },\n-    {\n-      \"name\": \"seata.transport.enable-client-batch-send-request\",\n-      \"type\": \"java.lang.Boolean\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.TransportProperties\",\n-      \"defaultValue\": true\n-    },\n-    {\n-      \"name\": \"seata.transport.shutdown.wait\",\n-      \"type\": \"java.lang.Integer\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ShutdownProperties\",\n-      \"defaultValue\": 3\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.boss-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyBoss\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.worker-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyServerNIOWorker\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.server-executor-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyServerBizHandler\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.client-selector-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyClientSelector\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.client-selector-thread-size\",\n-      \"type\": \"java.lang.Integer\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": 1\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.client-worker-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyClientWorkerThread\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.worker-thread-size\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"Default\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.boss-thread-size\",\n-      \"type\": \"java.lang.Integer\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": 1\n-    },\n-    {\n-      \"name\": \"seata.registry.load-balance\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5NjI0NA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627596244", "bodyText": "\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:41:29Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -202,130 +167,20 @@\n       \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ServiceProperties\",\n       \"defaultValue\": false\n     },\n-    {\n-      \"name\": \"seata.transport.heartbeat\",\n-      \"type\": \"java.lang.Boolean\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.TransportProperties\",\n-      \"defaultValue\": true\n-    },\n-    {\n-      \"name\": \"seata.transport.enable-client-batch-send-request\",\n-      \"type\": \"java.lang.Boolean\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.TransportProperties\",\n-      \"defaultValue\": true\n-    },\n-    {\n-      \"name\": \"seata.transport.shutdown.wait\",\n-      \"type\": \"java.lang.Integer\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ShutdownProperties\",\n-      \"defaultValue\": 3\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.boss-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyBoss\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.worker-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyServerNIOWorker\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.server-executor-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyServerBizHandler\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.client-selector-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyClientSelector\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.client-selector-thread-size\",\n-      \"type\": \"java.lang.Integer\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": 1\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.client-worker-thread-prefix\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"NettyClientWorkerThread\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.worker-thread-size\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": \"Default\"\n-    },\n-    {\n-      \"name\": \"seata.transport.thread-factory.boss-thread-size\",\n-      \"type\": \"java.lang.Integer\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ThreadFactoryProperties\",\n-      \"defaultValue\": 1\n-    },\n-    {\n-      \"name\": \"seata.registry.load-balance\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.registry.RegistryProperties\",\n-      \"defaultValue\": \"RandomLoadBalance\",\n-      \"deprecation\": {\n-        \"level\": \"error\",\n-        \"replacement\": \"seata.client.load-balance.type\",\n-        \"reason\": \"Please configure to 'seata.client.load-balance.type'.\"\n-      }\n-    },\n-    {\n-      \"name\": \"seata.registry.load-balance-virtual-nodes\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5NjQ3OQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627596479", "bodyText": "\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:41:48Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -344,29 +199,6 @@\n         }\n       ]\n     },\n-    {\n-      \"name\": \"seata.data-source-proxy-mode\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU5NjU1Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627596553", "bodyText": "\u5c5e\u4e8eclient\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-06T16:41:52Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -344,29 +199,6 @@\n         }\n       ]\n     },\n-    {\n-      \"name\": \"seata.data-source-proxy-mode\",\n-      \"values\": [\n-        {\n-          \"value\": \"AT\",\n-          \"description\": \"the default mode.\"\n-        },\n-        {\n-          \"value\": \"XA\"\n-        }\n-      ]\n-    },\n-    {\n-      \"name\": \"seata.excludes-for-auto-proxying\",", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzYwMzgyMw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627603823", "bodyText": "Before\u79fb\u9664\u4e86\u3002\n\u90a3\u4e48\u9700\u8981\u5728SeataAutoConfiguration\u548cSeataDataSourceAutoConfiguration\u4e2d\u90fd\u8981\u6dfb\u52a0\n@AutoConfigureAfter({SeataCorePropertiesAutoConfiguration.class, SeataClientPropertiesAutoConfiguration.class})", "author": "wangliang181230", "createdAt": "2021-05-06T16:52:17Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/java/io/seata/spring/boot/autoconfigure/SeataCorePropertiesAutoConfiguration.java", "diffHunk": "@@ -44,72 +36,54 @@\n import io.seata.spring.boot.autoconfigure.properties.registry.RegistryRedisProperties;\n import io.seata.spring.boot.autoconfigure.properties.registry.RegistrySofaProperties;\n import io.seata.spring.boot.autoconfigure.properties.registry.RegistryZooKeeperProperties;\n-import io.seata.spring.boot.autoconfigure.properties.registry.LoadBalanceProperties;\n-import org.springframework.boot.autoconfigure.AutoConfigureBefore;\n+import io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider;\n+\n import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\n import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;\n+import org.springframework.boot.context.properties.EnableConfigurationProperties;\n import org.springframework.context.annotation.Bean;\n import org.springframework.context.annotation.ComponentScan;\n+import org.springframework.context.annotation.Configuration;\n \n import static io.seata.common.Constants.BEAN_NAME_SPRING_APPLICATION_CONTEXT_PROVIDER;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.CLIENT_RM_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.CLIENT_TM_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.COMPRESS_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_APOLLO_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_CONSUL_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_CUSTOM_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_ETCD3_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.PROPERTY_BEAN_MAP;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.SEATA_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_FILE_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_NACOS_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_CONSUL_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_ZK_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.LOCK_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.LOG_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.PROPERTY_BEAN_MAP;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_APOLLO_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_ETCD3_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.CONFIG_CUSTOM_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_CONSUL_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_CUSTOM_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_ETCD3_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_EUREKA_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_NACOS_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_REDIS_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_SOFA_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_ZK_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.SEATA_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.SERVICE_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.SHUTDOWN_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.REGISTRY_CUSTOM_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.THREAD_FACTORY_PREFIX;\n import static io.seata.spring.boot.autoconfigure.StarterConstants.TRANSPORT_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.UNDO_PREFIX;\n-import static io.seata.spring.boot.autoconfigure.StarterConstants.LOAD_BALANCE_PREFIX;\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.SHUTDOWN_PREFIX;\n \n /**\n- * The type Seata properties auto configuration\n- *\n  * @author xingfudeshi@gmail.com\n  */\n @ConditionalOnProperty(prefix = SEATA_PREFIX, name = \"enabled\", havingValue = \"true\", matchIfMissing = true)\n @ComponentScan(basePackages = \"io.seata.spring.boot.autoconfigure.properties\")\n-@AutoConfigureBefore({SeataAutoConfiguration.class, SeataDataSourceAutoConfiguration.class})", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzg2NDE2Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627864163", "bodyText": "\u5347\u7ea7\u52302.3.10.RELEASE\u5427\uff0c\u4fee\u590d\u8fc7\u6ee1\u591aBUG\u7684\u3002", "author": "wangliang181230", "createdAt": "2021-05-07T01:27:13Z", "path": "server/pom.xml", "diffHunk": "@@ -28,11 +28,36 @@\n     <name>seata-server ${project.version}</name>\n \n     <properties>\n+        <spring-boot.version>2.3.2.RELEASE</spring-boot.version>", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzg3ODY2NQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627878665", "bodyText": "LogProperties\u662f\u901a\u7528\u7684\u3002\u76f8\u5173\u4ee3\u7801\u8bf7\u8f6c\u79fb\u5230core\u4e2d\u3002", "author": "wangliang181230", "createdAt": "2021-05-07T02:19:01Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/test/java/io/seata/spring/boot/autoconfigure/ClientPropertiesTest.java", "diffHunk": "@@ -0,0 +1,112 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure;\n+\n+import java.util.Map;\n+\n+import io.seata.spring.boot.autoconfigure.properties.client.LockProperties;\n+import io.seata.spring.boot.autoconfigure.properties.client.LogProperties;\n+import io.seata.spring.boot.autoconfigure.properties.client.RmProperties;\n+import io.seata.spring.boot.autoconfigure.properties.client.ServiceProperties;\n+import io.seata.spring.boot.autoconfigure.properties.client.TmProperties;\n+import io.seata.spring.boot.autoconfigure.properties.client.UndoProperties;\n+import io.seata.spring.boot.autoconfigure.properties.client.LoadBalanceProperties;\n+\n+import org.junit.jupiter.api.AfterAll;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+import org.springframework.context.annotation.AnnotationConfigApplicationContext;\n+\n+import static io.seata.common.DefaultValues.DEFAULT_GLOBAL_TRANSACTION_TIMEOUT;\n+import static io.seata.common.DefaultValues.DEFAULT_TM_COMMIT_RETRY_COUNT;\n+import static io.seata.common.DefaultValues.DEFAULT_TM_ROLLBACK_RETRY_COUNT;\n+import static io.seata.common.DefaultValues.DEFAULT_TRANSACTION_UNDO_LOG_TABLE;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertFalse;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+/**\n+ * @author xingfudeshi@gmail.com\n+ */\n+public class ClientPropertiesTest {\n+    private static AnnotationConfigApplicationContext context;\n+\n+    @BeforeAll\n+    public static void initContext() {\n+        context = new AnnotationConfigApplicationContext(\"io.seata.spring.boot.autoconfigure.properties\");\n+    }\n+\n+    @Test\n+    public void testLockProperties() {\n+        assertEquals(10, context.getBean(LockProperties.class).getRetryInterval());\n+        assertEquals(30, context.getBean(LockProperties.class).getRetryTimes());\n+        assertTrue(context.getBean(LockProperties.class).isRetryPolicyBranchRollbackOnConflict());\n+    }\n+\n+    @Test\n+    public void testLogProperties() {\n+        assertEquals(100, context.getBean(LogProperties.class).getExceptionRate());\n+    }", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzg4NDUwNA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r627884504", "bodyText": "\u8fd9\u4e2a\u6a21\u5757\u4e0d\u9700\u8981deploy\u5427\uff1f\u4e3a\u4ec0\u4e48\u8981\u628a\u8fd9\u4e2askip\u79fb\u9664\u6389\uff1f", "author": "wangliang181230", "createdAt": "2021-05-07T02:40:39Z", "path": "distribution/pom.xml", "diffHunk": "@@ -101,16 +70,4 @@\n             </build>\n         </profile>\n     </profiles>\n-    <build>\n-        <plugins>\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-deploy-plugin</artifactId>", "originalCommit": "a09f31e01d26ff5a36dee520b1dda4ca5e1b6c4f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3dd35ee9f4870de4db05cd40ced39b33bddf1613", "url": "https://github.com/seata/seata/commit/3dd35ee9f4870de4db05cd40ced39b33bddf1613", "message": "feature #3009: Resolve code conflicts", "committedDate": "2021-05-12T04:10:25Z", "type": "commit"}, {"oid": "6b1f7d1aa0e8f6afd6a052b4fd9b337f692f1b67", "url": "https://github.com/seata/seata/commit/6b1f7d1aa0e8f6afd6a052b4fd9b337f692f1b67", "message": "feature #3009: add maven-deploy-plugin for seata-distribution", "committedDate": "2021-05-12T05:01:50Z", "type": "commit"}, {"oid": "0dbb13d74f7c5866d4fd32c29dcdc64f30116b40", "url": "https://github.com/seata/seata/commit/0dbb13d74f7c5866d4fd32c29dcdc64f30116b40", "message": "Resolve code conflicts", "committedDate": "2021-05-12T07:31:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDgxMTAxMw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r630811013", "bodyText": "\u52a0\u4e00\u884cchcp 65001\u5427\u3002\u8868\u793a\u7f16\u7801\u8f6c\u4e3aUTF-8\uff0c\u907f\u514d\u4e2d\u6587\u4e71\u7801\u3002", "author": "wangliang181230", "createdAt": "2021-05-12T07:57:10Z", "path": "distribution/bin/seata-server.bat", "diffHunk": "@@ -0,0 +1,120 @@\n+@REM ----------------------------------------------------------------------------\n+@REM  Copyright 2001-2006 The Apache Software Foundation.\n+@REM\n+@REM  Licensed under the Apache License, Version 2.0 (the \"License\");\n+@REM  you may not use this file except in compliance with the License.\n+@REM  You may obtain a copy of the License at\n+@REM\n+@REM       http://www.apache.org/licenses/LICENSE-2.0\n+@REM\n+@REM  Unless required by applicable law or agreed to in writing, software\n+@REM  distributed under the License is distributed on an \"AS IS\" BASIS,\n+@REM  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+@REM  See the License for the specific language governing permissions and\n+@REM  limitations under the License.\n+@REM ----------------------------------------------------------------------------\n+@REM\n+@REM   Copyright (c) 2001-2006 The Apache Software Foundation.  All rights\n+@REM   reserved.\n+\n+@echo off\n+", "originalCommit": "0dbb13d74f7c5866d4fd32c29dcdc64f30116b40", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMDk1MDY5Mw==", "url": "https://github.com/seata/seata/pull/3009#discussion_r630950693", "bodyText": "Where s the enableCheckAuth and retryDeadThreshold?", "author": "l81893521", "createdAt": "2021-05-12T11:19:51Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-server/src/main/java/io/seata/spring/boot/autoconfigure/properties/server/ServerProperties.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ *  Copyright 1999-2019 Seata.io Group.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+package io.seata.spring.boot.autoconfigure.properties.server;\n+\n+import org.springframework.boot.context.properties.ConfigurationProperties;\n+import org.springframework.stereotype.Component;\n+\n+import java.time.Duration;\n+\n+import static io.seata.spring.boot.autoconfigure.StarterConstants.SERVER_PREFIX;\n+\n+/**\n+ * @author spilledyear@outlook.com\n+ */\n+@Component\n+@ConfigurationProperties(prefix = SERVER_PREFIX)\n+public class ServerProperties {\n+    private Duration maxCommitRetryTimeout = Duration.ofMillis(-1);", "originalCommit": "0dbb13d74f7c5866d4fd32c29dcdc64f30116b40", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "14a74fbcefe6509b9974248f6b797976228e05cd", "url": "https://github.com/seata/seata/commit/14a74fbcefe6509b9974248f6b797976228e05cd", "message": "feature #3009: add Properties", "committedDate": "2021-05-12T14:02:15Z", "type": "commit"}, {"oid": "3a783bb41fd64fd080512ab65bc3cea112aa42e6", "url": "https://github.com/seata/seata/commit/3a783bb41fd64fd080512ab65bc3cea112aa42e6", "message": "feature #3009: delete no use files", "committedDate": "2021-05-12T14:15:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTcyMzgwOQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r631723809", "bodyText": "Is necessary add more properties of SeataProperties?", "author": "l81893521", "createdAt": "2021-05-13T10:46:12Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -1,6 +1,18 @@\n {\n   \"groups\": [],\n   \"properties\": [\n+    {\n+      \"name\": \"seata.application-id\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n+      \"defaultValue\": \"${spring.application.name:}\"\n+    },\n+    {\n+      \"name\": \"seata.data-source-proxy-mode\",\n+      \"type\": \"java.lang.String\",\n+      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n+      \"defaultValue\": \"AT\"\n+    },", "originalCommit": "3a783bb41fd64fd080512ab65bc3cea112aa42e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNTU1NTI3NQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r635555275", "bodyText": "\u5176\u4ed6\u5c5e\u6027\u4f1a\u901a\u8fc7<artifactId>spring-boot-configuration-processor</artifactId>\u81ea\u52a8\u751f\u6210\u3002\n\u6dfb\u52a0\u8fd9\u4e2a\u662f\u56e0\u4e3a\u9ed8\u8ba4\u503c\u4f7f\u7528\u5e38\u91cf\u65f6\uff0c <artifactId>spring-boot-configuration-processor</artifactId>\u89e3\u6790\u4e0d\u4e86\u3002\n\u4e0d\u4f7f\u7528\u5e38\u91cf\u65f6\uff0c\u8fde\u8fd9\u4e2a\u5c5e\u6027\u90fd\u4e0d\u7528\u6dfb\u52a0\u5230additional-xxxxxx.json\u4e2d\u4e86\u3002", "author": "wangliang181230", "createdAt": "2021-05-19T20:17:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTcyMzgwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTcyNjQyMA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r631726420", "bodyText": "Look like lack of tableMetaCheckerInterval", "author": "l81893521", "createdAt": "2021-05-13T10:51:40Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -24,18 +36,7 @@\n         \"reason\": \"It may be removed in a future release, please configure to 'seata.tx-service-group'.\"\n       }\n     },\n-    {\n-      \"name\": \"seata.application-id\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n-      \"defaultValue\": \"${spring.application.name:}\"\n-    },\n-    {\n-      \"name\": \"seata.data-source-proxy-mode\",\n-      \"type\": \"java.lang.String\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.SeataProperties\",\n-      \"defaultValue\": \"AT\"\n-    },\n+\n     {\n       \"name\": \"seata.client.rm.async-commit-buffer-limit\",", "originalCommit": "3a783bb41fd64fd080512ab65bc3cea112aa42e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzNTU2MTIxMQ==", "url": "https://github.com/seata/seata/pull/3009#discussion_r635561211", "bodyText": "+1", "author": "wangliang181230", "createdAt": "2021-05-19T20:27:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTcyNjQyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTczNTAzNA==", "url": "https://github.com/seata/seata/pull/3009#discussion_r631735034", "bodyText": "And please check ServiceProperties.", "author": "l81893521", "createdAt": "2021-05-13T11:09:45Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-client/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -192,93 +193,23 @@\n       \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.UndoCompressProperties\",\n       \"defaultValue\": \"64k\"\n     },\n-    {\n-      \"name\": \"seata.client.log.exception-rate\",\n-      \"type\": \"java.lang.Integer\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.LogProperties\",\n-      \"deprecation\": {\n-        \"level\": \"error\",\n-        \"replacement\": \"seata.log.exception-rate\",\n-        \"reason\": \"Please configure to 'seata.log.exception-rate'.\"\n-      }\n-    },\n-    {\n-      \"name\": \"seata.log.exception-rate\",\n-      \"type\": \"java.lang.Integer\",\n-      \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.LogProperties\",\n-      \"defaultValue\": 100\n-    },\n     {\n       \"name\": \"seata.service.disable-global-transaction\",\n       \"type\": \"java.lang.Boolean\",\n       \"sourceType\": \"io.seata.spring.boot.autoconfigure.properties.client.ServiceProperties\",", "originalCommit": "3a783bb41fd64fd080512ab65bc3cea112aa42e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMTczNjgzNg==", "url": "https://github.com/seata/seata/pull/3009#discussion_r631736836", "bodyText": "And check this file make sure each properties is right.", "author": "l81893521", "createdAt": "2021-05-13T11:13:38Z", "path": "seata-spring-autoconfigure/seata-spring-autoconfigure-core/src/main/resources/META-INF/additional-spring-configuration-metadata.json", "diffHunk": "@@ -0,0 +1,166 @@\n+{", "originalCommit": "3a783bb41fd64fd080512ab65bc3cea112aa42e6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "af1652e3e0c83792e42da1e8b25e22c351910c27", "url": "https://github.com/seata/seata/commit/af1652e3e0c83792e42da1e8b25e22c351910c27", "message": "resolve the conflict", "committedDate": "2021-05-20T15:11:34Z", "type": "commit"}]}