{"pr_number": 2179, "pr_title": "bugfix:fix type casting problem when using redis as registry ", "pr_createdAt": "2020-01-14T01:16:58Z", "pr_url": "https://github.com/seata/seata/pull/2179", "timeline": [{"oid": "0079dcacef100281ef08d7a9afc8e2e95611a5e8", "url": "https://github.com/seata/seata/commit/0079dcacef100281ef08d7a9afc8e2e95611a5e8", "message": "#fix \u4fee\u590dspring-redis \u6ce8\u518c\u5668 \u81ea\u52a8\u6ce8\u5165\u62a5\u9519\u95ee\u9898 https://github.com/seata/seata/issues/2160", "committedDate": "2020-01-13T10:40:16Z", "type": "commit"}, {"oid": "62ac72e2aa57d8da48b635be3fa64a38e28332fa", "url": "https://github.com/seata/seata/commit/62ac72e2aa57d8da48b635be3fa64a38e28332fa", "message": "Merge branch 'develop' into develop", "committedDate": "2020-01-14T01:25:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE0MzA0OA==", "url": "https://github.com/seata/seata/pull/2179#discussion_r366143048", "bodyText": "@guojingyinan219 Can you adapt other attributes of redis?\n\nThis pr is also good, other attributes are not optional.", "author": "slievrly", "createdAt": "2020-01-14T03:58:06Z", "path": "seata-spring-boot-starter/src/main/java/io/seata/spring/boot/autoconfigure/properties/registry/RegistryRedisProperties.java", "diffHunk": "@@ -27,7 +27,11 @@\n @ConfigurationProperties(prefix = REGISTRY_REDIS_PREFIX)\n public class RegistryRedisProperties {\n     private String serverAddr = \"localhost:6379\";\n-    private String db = \"0\";\n+    private int db = 0;", "originalCommit": "62ac72e2aa57d8da48b635be3fa64a38e28332fa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "97ba5a5c47e398f41fe38b5f8ece16e001c97a35", "url": "https://github.com/seata/seata/commit/97ba5a5c47e398f41fe38b5f8ece16e001c97a35", "message": "Merge branch 'develop' into develop", "committedDate": "2020-01-14T14:43:06Z", "type": "commit"}, {"oid": "3c03a122c404784d7f6a625083ab65abc2293298", "url": "https://github.com/seata/seata/commit/3c03a122c404784d7f6a625083ab65abc2293298", "message": "Merge branch 'develop' into develop", "committedDate": "2020-01-15T03:10:07Z", "type": "commit"}, {"oid": "795bc5bdff6398b00d54609ebd3528db0cc366a7", "url": "https://github.com/seata/seata/commit/795bc5bdff6398b00d54609ebd3528db0cc366a7", "message": "#add add https://github.com/seata/seata/issues/2160 Unit Test", "committedDate": "2020-01-15T05:36:30Z", "type": "commit"}, {"oid": "4e48ed1705f13fb229aa3737d797bc46b0830305", "url": "https://github.com/seata/seata/commit/4e48ed1705f13fb229aa3737d797bc46b0830305", "message": "Merge branch 'develop' of github.com:guojingyinan219/seata into develop", "committedDate": "2020-01-15T05:36:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcwODM3Ng==", "url": "https://github.com/seata/seata/pull/2179#discussion_r366708376", "bodyText": "@guojingyinan219 remove to test/resource ?", "author": "slievrly", "createdAt": "2020-01-15T06:07:53Z", "path": "seata-spring-boot-starter/src/main/resources/spring/redis_auto_injectio_test.xml", "diffHunk": "@@ -0,0 +1,35 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+\n+<!--\n+  ~  Copyright 1999-2019 Seata.io Group.\n+  ~\n+  ~  Licensed under the Apache License, Version 2.0 (the \"License\");\n+  ~  you may not use this file except in compliance with the License.\n+  ~  You may obtain a copy of the License at\n+  ~\n+  ~       http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~  Unless required by applicable law or agreed to in writing, software\n+  ~  distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~  See the License for the specific language governing permissions and\n+  ~  limitations under the License.\n+  -->\n+\n+<beans xmlns=\"http://www.springframework.org/schema/beans\"\n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xmlns:context=\"http://www.springframework.org/schema/context\"\n+       xsi:schemaLocation=\"\n+\t   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n+       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\">\n+\n+\n+    <bean id=\"registryRedisProperties\"", "originalCommit": "4e48ed1705f13fb229aa3737d797bc46b0830305", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4979ac7cef30359c929d46039253e62d23540fc5", "url": "https://github.com/seata/seata/commit/4979ac7cef30359c929d46039253e62d23540fc5", "message": "#fix fix  https://github.com/seata/seata/issues/2160 Unit Test", "committedDate": "2020-01-15T06:27:39Z", "type": "commit"}, {"oid": "e06ff9406a40a005d7cf0058fde514226e3b3964", "url": "https://github.com/seata/seata/commit/e06ff9406a40a005d7cf0058fde514226e3b3964", "message": "#fix fix  https://github.com/seata/seata/issues/2160 Unit Test", "committedDate": "2020-01-15T06:33:24Z", "type": "commit"}, {"oid": "cf9d2eb4758bf21e8ee76e8d01bcae3b81167601", "url": "https://github.com/seata/seata/commit/cf9d2eb4758bf21e8ee76e8d01bcae3b81167601", "message": "Merge branch 'develop' into develop", "committedDate": "2020-01-16T04:02:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI1Njk5Nw==", "url": "https://github.com/seata/seata/pull/2179#discussion_r367256997", "bodyText": "Please add these config items into files under script folder.", "author": "xingfudeshi", "createdAt": "2020-01-16T06:55:55Z", "path": "seata-spring-boot-starter/src/main/java/io/seata/spring/boot/autoconfigure/properties/registry/RegistryRedisProperties.java", "diffHunk": "@@ -27,7 +27,11 @@\n @ConfigurationProperties(prefix = REGISTRY_REDIS_PREFIX)\n public class RegistryRedisProperties {\n     private String serverAddr = \"localhost:6379\";\n-    private String db = \"0\";\n+    private int db = 0;\n+    private String password;\n+    private String cluster;\n+    private int timeout = 0;", "originalCommit": "cf9d2eb4758bf21e8ee76e8d01bcae3b81167601", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI2NDQ5Mg==", "url": "https://github.com/seata/seata/pull/2179#discussion_r368264492", "bodyText": "https://github.com/seata/seata/blob/develop/script/client/conf/registry.conf\nhttps://github.com/seata/seata/tree/develop/script/client/spring", "author": "slievrly", "createdAt": "2020-01-19T04:16:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzI1Njk5Nw=="}], "type": "inlineReview"}, {"oid": "2341768e64290dcf30827a37c15bd8c12ea9190d", "url": "https://github.com/seata/seata/commit/2341768e64290dcf30827a37c15bd8c12ea9190d", "message": "Merge branch 'develop' into develop", "committedDate": "2020-01-19T04:48:48Z", "type": "commit"}, {"oid": "d8029c444db009dc1d96a6455fe35d138a548c66", "url": "https://github.com/seata/seata/commit/d8029c444db009dc1d96a6455fe35d138a548c66", "message": "#add add redis config items into files under script folder", "committedDate": "2020-01-19T07:11:35Z", "type": "commit"}, {"oid": "505eae794a1e1db5dbafb5270095d4479f322a8e", "url": "https://github.com/seata/seata/commit/505eae794a1e1db5dbafb5270095d4479f322a8e", "message": "Merge branch 'develop' of github.com:guojingyinan219/seata into develop", "committedDate": "2020-01-19T07:11:44Z", "type": "commit"}, {"oid": "ba7115177bb044df8634e606d27f6cb9c2f6ed75", "url": "https://github.com/seata/seata/commit/ba7115177bb044df8634e606d27f6cb9c2f6ed75", "message": "Merge branch 'develop' into develop", "committedDate": "2020-01-22T00:41:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTMyMzIyNA==", "url": "https://github.com/seata/seata/pull/2179#discussion_r369323224", "bodyText": "Please remove annotations other than @Author.Thank u.", "author": "xingfudeshi", "createdAt": "2020-01-22T00:56:50Z", "path": "seata-spring-boot-starter/src/test/java/io/seata/spring/boot/autoconfigure/RedisAutoInjectionTypeConvertTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package io.seata.spring.boot.autoconfigure;\n+\n+import io.seata.common.loader.EnhancedServiceLoader;\n+import io.seata.config.Configuration;\n+import io.seata.config.ExtConfigurationProvider;\n+import io.seata.config.FileConfiguration;\n+import io.seata.spring.boot.autoconfigure.properties.registry.RegistryRedisProperties;\n+import org.junit.jupiter.api.Assertions;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Test;\n+import org.springframework.boot.autoconfigure.SpringBootApplication;\n+import org.springframework.context.ApplicationContext;\n+import org.springframework.context.support.ClassPathXmlApplicationContext;\n+\n+import static org.mockito.Mockito.mock;\n+\n+/**\n+ * @version 1.0\n+ * @ClassName RedisAutoInjectionTypeConvertTest\n+ * @Description\n+ * @Author zhangheng\n+ * @Date 2020/1/14 17:09", "originalCommit": "ba7115177bb044df8634e606d27f6cb9c2f6ed75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f876035b4fdeed5316466ec0c6eb944d35e798bc", "url": "https://github.com/seata/seata/commit/f876035b4fdeed5316466ec0c6eb944d35e798bc", "message": "remove unnecessary annotations", "committedDate": "2020-01-22T01:04:07Z", "type": "commit"}]}