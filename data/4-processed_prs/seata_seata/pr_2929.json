{"pr_number": 2929, "pr_title": "bugfix: fix the application was configured to degrade at startup and can't be dynamically switch to upgraded", "pr_createdAt": "2020-07-27T04:40:18Z", "pr_url": "https://github.com/seata/seata/pull/2929", "timeline": [{"oid": "8a4b5595d0c43a82363c5318f493f7a6a55dc6de", "url": "https://github.com/seata/seata/commit/8a4b5595d0c43a82363c5318f493f7a6a55dc6de", "message": "bugfix: fix the application was configured to degrade at startup and can't be dynamically switch to upgraded\n\nSigned-off-by: slievrly <slievrly@163.com>", "committedDate": "2020-07-27T04:34:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY2MTkyNA==", "url": "https://github.com/seata/seata/pull/2929#discussion_r460661924", "bodyText": "DISABLE_GLOBAL_TRANSACTION \u5df2\u7ecf\u88ab\u8ba2\u9605\u4e86\uff0c\u6b64\u7c7b\u5e76\u672a\u6709\u5176\u4ed6\u9700\u8981\u76d1\u542c\u5904\u7406\u7684\u4e1a\u52a1\uff0c\u4e3a\u4f55\u4e0d\u76f4\u63a5\u521b\u5efa\u4f4d\u5c40\u90e8\u53d8\u91cf\uff0c\u8fdb\u884cgetBoolean\uff1f", "author": "a364176773", "createdAt": "2020-07-27T05:56:45Z", "path": "spring/src/main/java/io/seata/spring/tcc/TccActionInterceptor.java", "diffHunk": "@@ -32,17 +36,22 @@\n import java.lang.reflect.Method;\n import java.util.Map;\n \n+import static io.seata.core.constants.DefaultValues.DEFAULT_DISABLE_GLOBAL_TRANSACTION;\n+\n /**\n  * TCC Interceptor\n  *\n  * @author zhangsen\n  */\n-public class TccActionInterceptor implements MethodInterceptor {\n+public class TccActionInterceptor implements MethodInterceptor, ConfigurationChangeListener {\n \n     private static final Logger LOGGER = LoggerFactory.getLogger(TccActionInterceptor.class);\n \n     private ActionInterceptorHandler actionInterceptorHandler = new ActionInterceptorHandler();\n \n+    private boolean disable = ConfigurationFactory.getInstance().getBoolean(ConfigurationKeys.DISABLE_GLOBAL_TRANSACTION,", "originalCommit": "8a4b5595d0c43a82363c5318f493f7a6a55dc6de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTAyMzUwNw==", "url": "https://github.com/seata/seata/pull/2929#discussion_r491023507", "bodyText": "for the upgrade and downgrade functions\uff0cneeds to be explicitly printed in the log.", "author": "slievrly", "createdAt": "2020-09-18T15:23:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY2MTkyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTIyNjA2Mw==", "url": "https://github.com/seata/seata/pull/2929#discussion_r491226063", "bodyText": "volatile", "author": "wangliang181230", "createdAt": "2020-09-18T22:50:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY2MTkyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI2OTc4Nw==", "url": "https://github.com/seata/seata/pull/2929#discussion_r478269787", "bodyText": "volatile ?", "author": "wangliang181230", "createdAt": "2020-08-27T09:06:41Z", "path": "spring/src/main/java/io/seata/spring/annotation/GlobalTransactionScanner.java", "diffHunk": "@@ -78,8 +80,9 @@\n     private final String applicationId;\n     private final String txServiceGroup;\n     private final int mode;\n-    private final boolean disableGlobalTransaction = ConfigurationFactory.getInstance().getBoolean(\n+    private boolean disableGlobalTransaction = ConfigurationFactory.getInstance().getBoolean(", "originalCommit": "daf20f73eb237cf098d988ab6794118a06b729b2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTAyMTM4Mw==", "url": "https://github.com/seata/seata/pull/2929#discussion_r491021383", "bodyText": "done", "author": "slievrly", "createdAt": "2020-09-18T15:19:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI2OTc4Nw=="}], "type": "inlineReview"}, {"oid": "84629c5303da8f796993723594162fe7baf13728", "url": "https://github.com/seata/seata/commit/84629c5303da8f796993723594162fe7baf13728", "message": "fix conflicts\n\nSigned-off-by: slievrly <slievrly@163.com>", "committedDate": "2020-09-18T15:17:49Z", "type": "commit"}, {"oid": "84629c5303da8f796993723594162fe7baf13728", "url": "https://github.com/seata/seata/commit/84629c5303da8f796993723594162fe7baf13728", "message": "fix conflicts\n\nSigned-off-by: slievrly <slievrly@163.com>", "committedDate": "2020-09-18T15:17:49Z", "type": "forcePushed"}, {"oid": "ee480af5290ba447ea33b5b803351b708ab87049", "url": "https://github.com/seata/seata/commit/ee480af5290ba447ea33b5b803351b708ab87049", "message": "fix review\n\nSigned-off-by: slievrly <slievrly@163.com>", "committedDate": "2020-09-18T15:20:25Z", "type": "commit"}, {"oid": "f2a3a6bee61842e6a158272d2984ae39014a6a54", "url": "https://github.com/seata/seata/commit/f2a3a6bee61842e6a158272d2984ae39014a6a54", "message": "fix ci\n\nSigned-off-by: slievrly <slievrly@163.com>", "committedDate": "2020-09-21T03:08:43Z", "type": "commit"}, {"oid": "e13383968d437cdf04866e35c74b8c89eccff50d", "url": "https://github.com/seata/seata/commit/e13383968d437cdf04866e35c74b8c89eccff50d", "message": "fix review\n\nSigned-off-by: slievrly <slievrly@163.com>", "committedDate": "2020-09-21T03:22:45Z", "type": "commit"}, {"oid": "396f33ccfedf7a2e250f0dba4c1331e7d9a0f2c8", "url": "https://github.com/seata/seata/commit/396f33ccfedf7a2e250f0dba4c1331e7d9a0f2c8", "message": "Merge branch 'develop' of github.com:seata/seata into disable\n\nSigned-off-by: slievrly <slievrly@163.com>\n\n# Conflicts:\n#\tspring/src/main/java/io/seata/spring/tcc/TccActionInterceptor.java", "committedDate": "2020-09-23T14:11:14Z", "type": "commit"}, {"oid": "df2e20dcd86907fd2cd8b4940c927ca138c32485", "url": "https://github.com/seata/seata/commit/df2e20dcd86907fd2cd8b4940c927ca138c32485", "message": "Merge branch 'develop' of github.com:seata/seata into disable\n\nSigned-off-by: slievrly <slievrly@163.com>\n\n# Conflicts:\n#\tspring/src/main/java/io/seata/spring/tcc/TccActionInterceptor.java", "committedDate": "2020-10-10T08:07:20Z", "type": "commit"}, {"oid": "d8f14cd0b03b1332f2ab2526876ac558b57017d6", "url": "https://github.com/seata/seata/commit/d8f14cd0b03b1332f2ab2526876ac558b57017d6", "message": "Merge branch 'develop' into disable", "committedDate": "2020-10-10T10:14:27Z", "type": "commit"}]}