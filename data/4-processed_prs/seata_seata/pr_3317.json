{"pr_number": 3317, "pr_title": "feature:Support to obtain multiple configurations through a single node in zookeeper", "pr_createdAt": "2020-11-30T08:12:38Z", "pr_url": "https://github.com/seata/seata/pull/3317", "timeline": [{"oid": "98456a68f245fed40a48062359576b1bb835a535", "url": "https://github.com/seata/seata/commit/98456a68f245fed40a48062359576b1bb835a535", "message": "\u6dfb\u52a0\u4ecenacos\u5355\u4e00dataId\u83b7\u53d6\u591a\u6761\u914d\u7f6e\u529f\u80fd\uff0cregistry.conf\u6587\u4ef6\u6dfb\u52a0config.nacos.dataId\u5c5e\u6027\u7528\u4e8e\u6307\u5b9anacos\u4e2d\u7684dataId", "committedDate": "2020-04-09T09:18:48Z", "type": "commit"}, {"oid": "9b5083e413dfb2c2f078207714a2b0c131211414", "url": "https://github.com/seata/seata/commit/9b5083e413dfb2c2f078207714a2b0c131211414", "message": "Merge branch 'develop' into develop", "committedDate": "2020-04-09T09:38:16Z", "type": "commit"}, {"oid": "7898c09047ebe5b2b81554a00cc578eeada975a0", "url": "https://github.com/seata/seata/commit/7898c09047ebe5b2b81554a00cc578eeada975a0", "message": "Merge branch 'develop' into develop", "committedDate": "2020-04-10T02:48:55Z", "type": "commit"}, {"oid": "449fe1f20a2c18588de0eddae3beb8b138b2c7b7", "url": "https://github.com/seata/seata/commit/449fe1f20a2c18588de0eddae3beb8b138b2c7b7", "message": "Merge branch 'develop' into develop", "committedDate": "2020-04-20T06:33:44Z", "type": "commit"}, {"oid": "0838750d0f103ab6c968af6452f8fb535904350e", "url": "https://github.com/seata/seata/commit/0838750d0f103ab6c968af6452f8fb535904350e", "message": "\u6dfb\u52a0\u4ecenacos\u5355\u4e00dataId\u83b7\u53d6\u591a\u6761\u914d\u7f6e\u529f\u80fd\uff0cregistry.conf\u6587\u4ef6\u6dfb\u52a0config.nacos.dataId\u5c5e\u6027\u7528\u4e8e\u6307\u5b9anacos\u4e2d\u7684dataId", "committedDate": "2020-11-20T07:40:26Z", "type": "commit"}, {"oid": "5fc4f8f5828e19e10f74e511658d0cdeede345da", "url": "https://github.com/seata/seata/commit/5fc4f8f5828e19e10f74e511658d0cdeede345da", "message": "Merge remote-tracking branch 'origin/develop' into develop\n\n# Conflicts:\n#\tconfig/seata-config-nacos/src/main/java/io/seata/config/nacos/NacosConfiguration.java", "committedDate": "2020-11-20T07:47:48Z", "type": "commit"}, {"oid": "824657f72283586b369861a1b55c5831e58aac43", "url": "https://github.com/seata/seata/commit/824657f72283586b369861a1b55c5831e58aac43", "message": "\u9002\u914d\u65b0\u7684\u914d\u7f6e\u65b9\u5f0f\u7684\u76d1\u542c\u5668\u529f\u80fd\uff0c\u5b9e\u73b0\u52a8\u6001\u914d\u7f6e", "committedDate": "2020-11-24T03:47:29Z", "type": "commit"}, {"oid": "ca1e1caa9e9529957d6c0ad7f21ec41a6d450e7e", "url": "https://github.com/seata/seata/commit/ca1e1caa9e9529957d6c0ad7f21ec41a6d450e7e", "message": "Merge branch 'develop' into develop", "committedDate": "2020-11-24T09:08:19Z", "type": "commit"}, {"oid": "07e52d22e28c2af4837a3b7c134ec1a69d85b30f", "url": "https://github.com/seata/seata/commit/07e52d22e28c2af4837a3b7c134ec1a69d85b30f", "message": "checkout\u89c4\u8303", "committedDate": "2020-11-24T09:36:23Z", "type": "commit"}, {"oid": "f1469db3b7be5cedaadb4f6eca84ec2d9dcc1032", "url": "https://github.com/seata/seata/commit/f1469db3b7be5cedaadb4f6eca84ec2d9dcc1032", "message": "Merge remote-tracking branch 'origin/develop' into develop", "committedDate": "2020-11-24T09:36:42Z", "type": "commit"}, {"oid": "bad38c0dc00ad5b9879e3a107bb7a6ea2aa3f7f4", "url": "https://github.com/seata/seata/commit/bad38c0dc00ad5b9879e3a107bb7a6ea2aa3f7f4", "message": "\u4fee\u6539\u4fee\u9970\u7b26", "committedDate": "2020-11-25T02:39:32Z", "type": "commit"}, {"oid": "27b09beabc02d9d2fe25893f1213c1aef7e3794e", "url": "https://github.com/seata/seata/commit/27b09beabc02d9d2fe25893f1213c1aef7e3794e", "message": "\u6dfb\u52a0\u8bfb\u914d\u7f6e\u65f6\u7684\u7f16\u7801\u8bbe\u7f6e\u4ee5\u53ca\u89e3\u51b3\u6d41\u5173\u95ed\u95ee\u9898", "committedDate": "2020-11-25T07:52:23Z", "type": "commit"}, {"oid": "d6e00cef37129662b5d617cef46b40005caea94e", "url": "https://github.com/seata/seata/commit/d6e00cef37129662b5d617cef46b40005caea94e", "message": "\u6dfb\u52a0put\u548cremove\u65b9\u6cd5\u7684\u65e7\u7248\u672c\u517c\u5bb9", "committedDate": "2020-11-25T09:27:09Z", "type": "commit"}, {"oid": "de1347fde01beea5d21413ceccc75720a21723df", "url": "https://github.com/seata/seata/commit/de1347fde01beea5d21413ceccc75720a21723df", "message": "\u6dfb\u52a0consul\u65b0\u914d\u7f6e\u65b9\u5f0f", "committedDate": "2020-11-27T02:24:58Z", "type": "commit"}, {"oid": "b0f43d76444a8bca0e6a1a4b9ea8cadefa291216", "url": "https://github.com/seata/seata/commit/b0f43d76444a8bca0e6a1a4b9ea8cadefa291216", "message": "\u6dfb\u52a0zookeeper\u65b0\u914d\u7f6e\u65b9\u5f0f", "committedDate": "2020-11-30T08:01:23Z", "type": "commit"}, {"oid": "d74c6533ef81d3dcf28076f0c6c008dee1e6f6c7", "url": "https://github.com/seata/seata/commit/d74c6533ef81d3dcf28076f0c6c008dee1e6f6c7", "message": "\u4fee\u6539zookeeper\u914d\u7f6e\u8282\u70b9\u4e0d\u5b58\u5728\u62a5\u9519\u63d0\u793a", "committedDate": "2020-12-21T07:22:43Z", "type": "commit"}, {"oid": "b75900fdfb15625e474761ef07c230bc98b24535", "url": "https://github.com/seata/seata/commit/b75900fdfb15625e474761ef07c230bc98b24535", "message": "\u5220\u9664\u5176\u4ed6\u5206\u652f\u7684\u4ee3\u7801", "committedDate": "2021-01-09T06:11:35Z", "type": "commit"}, {"oid": "10154c434dea534df2871162067c5468a08c7588", "url": "https://github.com/seata/seata/commit/10154c434dea534df2871162067c5468a08c7588", "message": "\u5220\u9664\u5176\u4ed6\u5206\u652f\u7684\u4ee3\u7801", "committedDate": "2021-01-09T06:16:27Z", "type": "commit"}, {"oid": "f870b991375e6cea40fe470c781401899e5216f4", "url": "https://github.com/seata/seata/commit/f870b991375e6cea40fe470c781401899e5216f4", "message": "\u5220\u9664\u5176\u4ed6\u5206\u652f\u7684\u4ee3\u7801", "committedDate": "2021-01-09T06:23:38Z", "type": "commit"}, {"oid": "81610be49329a2c252bf26bddc1ec515fa0a2dac", "url": "https://github.com/seata/seata/commit/81610be49329a2c252bf26bddc1ec515fa0a2dac", "message": "Merge branch 'develop' of https://github.com/seata/seata into zookeeperConfig\n\n\u0001 Conflicts:\n\u0001\tscript/server/config/registry.yml", "committedDate": "2021-01-09T06:40:00Z", "type": "commit"}, {"oid": "7785bc5d595dad9743d9f63fc43da7fe4d23a842", "url": "https://github.com/seata/seata/commit/7785bc5d595dad9743d9f63fc43da7fe4d23a842", "message": "\u6dfb\u52a0\u4fee\u6539\u65e5\u5fd7", "committedDate": "2021-01-09T06:55:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU2NjA4MQ==", "url": "https://github.com/seata/seata/pull/3317#discussion_r554566081", "bodyText": "not compatible with previous version", "author": "a364176773", "createdAt": "2021-01-10T13:14:52Z", "path": "config/seata-config-zk/src/main/java/io/seata/config/zk/ZookeeperConfiguration.java", "diffHunk": "@@ -132,6 +154,12 @@ public String getLatestConfig(String dataId, String defaultValue, long timeoutMi\n \n     @Override\n     public boolean putConfig(String dataId, String content, long timeoutMills) {\n+        if (!seataConfig.isEmpty()) {\n+            seataConfig.setProperty(dataId, content);\n+            zkClient.writeData(getConfigPath(), getSeataConfigStr());\n+            return true;", "originalCommit": "7785bc5d595dad9743d9f63fc43da7fe4d23a842", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDU2NjA4Ng==", "url": "https://github.com/seata/seata/pull/3317#discussion_r554566086", "bodyText": "not compatible with previous version", "author": "a364176773", "createdAt": "2021-01-10T13:14:56Z", "path": "config/seata-config-zk/src/main/java/io/seata/config/zk/ZookeeperConfiguration.java", "diffHunk": "@@ -158,6 +186,12 @@ public boolean putConfigIfAbsent(String dataId, String content, long timeoutMill\n \n     @Override\n     public boolean removeConfig(String dataId, long timeoutMills) {\n+        if (!seataConfig.isEmpty()) {\n+            seataConfig.remove(dataId);\n+            zkClient.writeData(getConfigPath(), getSeataConfigStr());\n+            return true;", "originalCommit": "7785bc5d595dad9743d9f63fc43da7fe4d23a842", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "90522e408796415838ae8211de8b39d902f2df11", "url": "https://github.com/seata/seata/commit/90522e408796415838ae8211de8b39d902f2df11", "message": "Merge branch 'develop' into zookeeperConfig", "committedDate": "2021-03-15T01:43:07Z", "type": "commit"}]}