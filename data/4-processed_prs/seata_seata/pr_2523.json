{"pr_number": 2523, "pr_title": "optimize: abnormal global transactions, output logs according to frequency", "pr_createdAt": "2020-04-09T03:45:25Z", "pr_url": "https://github.com/seata/seata/pull/2523", "timeline": [{"oid": "53a37773873e6453f685128834f04663458ae049", "url": "https://github.com/seata/seata/commit/53a37773873e6453f685128834f04663458ae049", "message": "optimize log output when rm client disconnects abnormally", "committedDate": "2020-04-09T03:43:37Z", "type": "commit"}, {"oid": "7756b663c8de2d2a48df3c968c96504b6a45c62b", "url": "https://github.com/seata/seata/commit/7756b663c8de2d2a48df3c968c96504b6a45c62b", "message": "Merge branch 'develop' into optimize_rm_not_connected", "committedDate": "2020-04-10T03:18:31Z", "type": "commit"}, {"oid": "e2418261414865db9a47475de44fb405755e57bf", "url": "https://github.com/seata/seata/commit/e2418261414865db9a47475de44fb405755e57bf", "message": "Merge branch 'develop' into optimize_rm_not_connected", "committedDate": "2020-04-10T09:15:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE3MjAzMw==", "url": "https://github.com/seata/seata/pull/2523#discussion_r407172033", "bodyText": "If these two rows are the same, why don't we just format them once?", "author": "slievrly", "createdAt": "2020-04-12T09:29:40Z", "path": "core/src/main/java/io/seata/core/rpc/netty/RpcServer.java", "diffHunk": "@@ -109,9 +111,9 @@ public Object sendSyncRequest(String resourceId, String clientId, Object message\n                                   long timeout) throws TimeoutException {\n         Channel clientChannel = ChannelManager.getChannel(resourceId, clientId);\n         if (clientChannel == null) {\n-            throw new RuntimeException(\"rm client is not connected. dbkey:\" + resourceId\n-                + \",clientId:\" + clientId);\n-\n+            StackTraceLogger.warn(LOGGER,\n+                new RuntimeException(\"rm client is not connected. dbkey:\" + resourceId + \",clientId:\" + clientId),", "originalCommit": "e2418261414865db9a47475de44fb405755e57bf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE3MjMwMQ==", "url": "https://github.com/seata/seata/pull/2523#discussion_r407172301", "bodyText": "can this logic continue?", "author": "slievrly", "createdAt": "2020-04-12T09:32:26Z", "path": "core/src/main/java/io/seata/core/rpc/netty/RpcServer.java", "diffHunk": "@@ -109,9 +111,9 @@ public Object sendSyncRequest(String resourceId, String clientId, Object message\n                                   long timeout) throws TimeoutException {\n         Channel clientChannel = ChannelManager.getChannel(resourceId, clientId);\n         if (clientChannel == null) {\n-            throw new RuntimeException(\"rm client is not connected. dbkey:\" + resourceId\n-                + \",clientId:\" + clientId);\n-\n+            StackTraceLogger.warn(LOGGER,\n+                new RuntimeException(\"rm client is not connected. dbkey:\" + resourceId + \",clientId:\" + clientId),\n+                \"rm client is not connected. dbkey: {},clientId: {}\", new String[] {resourceId, clientId});", "originalCommit": "e2418261414865db9a47475de44fb405755e57bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE4ODMyMQ==", "url": "https://github.com/seata/seata/pull/2523#discussion_r407188321", "bodyText": "PTAL @slievrly", "author": "a364176773", "createdAt": "2020-04-12T12:00:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzE3MjMwMQ=="}], "type": "inlineReview"}, {"oid": "4ae665fc86cb676f168fd6a2c74b8c5e82f2f345", "url": "https://github.com/seata/seata/commit/4ae665fc86cb676f168fd6a2c74b8c5e82f2f345", "message": "delete redundant changes", "committedDate": "2020-04-12T11:51:17Z", "type": "commit"}, {"oid": "4ae665fc86cb676f168fd6a2c74b8c5e82f2f345", "url": "https://github.com/seata/seata/commit/4ae665fc86cb676f168fd6a2c74b8c5e82f2f345", "message": "delete redundant changes", "committedDate": "2020-04-12T11:51:17Z", "type": "forcePushed"}, {"oid": "85bb13713bb6b6db0f38928c788c4c75b75ce158", "url": "https://github.com/seata/seata/commit/85bb13713bb6b6db0f38928c788c4c75b75ce158", "message": "Roll back the code", "committedDate": "2020-04-12T11:59:24Z", "type": "commit"}, {"oid": "2e92031bff7dc9dc174f215a7b37eaef8b89475d", "url": "https://github.com/seata/seata/commit/2e92031bff7dc9dc174f215a7b37eaef8b89475d", "message": "Merge branch 'develop' into optimize_rm_not_connected", "committedDate": "2020-04-12T12:00:12Z", "type": "commit"}, {"oid": "b8ee7a776214a3a4f7b5fd7a3639677c3d7d3022", "url": "https://github.com/seata/seata/commit/b8ee7a776214a3a4f7b5fd7a3639677c3d7d3022", "message": "optimize", "committedDate": "2020-04-12T12:35:42Z", "type": "commit"}, {"oid": "268ec10ad465c064187bc4e87a32cd891f90b8c8", "url": "https://github.com/seata/seata/commit/268ec10ad465c064187bc4e87a32cd891f90b8c8", "message": "Merge branch 'develop' into optimize_rm_not_connected", "committedDate": "2020-04-13T11:34:37Z", "type": "commit"}, {"oid": "90585e78666c820e6af17dff26d6c5db4b914eba", "url": "https://github.com/seata/seata/commit/90585e78666c820e6af17dff26d6c5db4b914eba", "message": "Merge branch 'develop' into optimize_rm_not_connected", "committedDate": "2020-04-14T03:38:09Z", "type": "commit"}, {"oid": "791caab7be8df93df82d2e89572b8644cd556e20", "url": "https://github.com/seata/seata/commit/791caab7be8df93df82d2e89572b8644cd556e20", "message": "Merge branch 'develop' into optimize_rm_not_connected", "committedDate": "2020-04-14T03:52:38Z", "type": "commit"}]}