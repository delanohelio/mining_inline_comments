{"pr_number": 17950, "pr_title": "Sending the full container path to the UI", "pr_createdAt": "2020-02-04T20:06:30Z", "pr_url": "https://github.com/dotCMS/core/pull/17950", "timeline": [{"oid": "8f110f1d1d960141068c2dae087bec826296fa04", "url": "https://github.com/dotCMS/core/commit/8f110f1d1d960141068c2dae087bec826296fa04", "message": "Sending the full container path to the UI", "committedDate": "2020-02-04T19:49:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODI1Mg==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898252", "bodyText": "Issue found: Ensure that resources like this InputStream object are closed after use", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:01Z", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/ContainerLoaderTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+package com.dotcms.rendering.velocity.services;\n+\n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.repackage.org.apache.commons.io.IOUtils;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n+import com.dotmarketing.portlets.containers.model.Container;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.util.PageMode;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.charset.StandardCharsets;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+public class ContainerLoaderTest {\n+\n+    @BeforeClass\n+    public static void prepare () throws Exception {\n+\n+        //Setting web app environment\n+        IntegrationTestInitService.getInstance().init();\n+    }\n+\n+    /**\n+     * Method to test: {@link ContainerLoader#writeObject(VelocityResourceKey)}\n+     * when: the File Container's html is build\n+     * Should: return a div with the File Comntainer's id\n+     */\n+    @Test\n+    public void aaa() throws DotDataException, DotSecurityException, IOException {\n+\n+        final Host host = new SiteDataGen().nextPersisted();\n+\n+        final FileAssetContainer fileAssetContainer = new ContainerAsFileDataGen()\n+                .host(host)\n+                .nextPersisted();\n+\n+        final FileAssetContainer container = (FileAssetContainer) APILocator.getContainerAPI()\n+                .find(fileAssetContainer.getInode(), APILocator.systemUser(), true);\n+\n+        final ContainerLoader containerLoader = new ContainerLoader();\n+\n+        final VelocityResourceKey velocityResourceKey = new VelocityResourceKey(fileAssetContainer, PageMode.EDIT_MODE);\n+        final InputStream inputStream = containerLoader.writeObject(velocityResourceKey);", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODI2Mw==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898263", "bodyText": "Issue found: Avoid unused imports such as 'com.dotmarketing.portlets.folders.model.Folder'", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:03Z", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,49 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;\n import com.dotcms.datagen.SiteDataGen;\n import com.dotmarketing.beans.Host;\n import com.dotmarketing.business.APILocator;\n import com.dotmarketing.portlets.ContentletBaseTest;\n+import com.dotmarketing.portlets.containers.model.Container;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.portlets.folders.model.Folder;", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODI3OA==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898278", "bodyText": "Issue found: Avoid unused imports such as 'java.util.Optional'", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:04Z", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,49 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;\n import com.dotcms.datagen.SiteDataGen;\n import com.dotmarketing.beans.Host;\n import com.dotmarketing.business.APILocator;\n import com.dotmarketing.portlets.ContentletBaseTest;\n+import com.dotmarketing.portlets.containers.model.Container;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.portlets.folders.model.Folder;\n+import com.dotmarketing.util.Constants;\n+import com.dotmarketing.util.HostUtil;\n import org.junit.Assert;\n import org.junit.Test;\n \n+import java.util.Optional;", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODI4NQ==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898285", "bodyText": "Issue found: Avoid unused imports such as 'com.dotmarketing.util.Constants'", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:05Z", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,49 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;\n import com.dotcms.datagen.SiteDataGen;\n import com.dotmarketing.beans.Host;\n import com.dotmarketing.business.APILocator;\n import com.dotmarketing.portlets.ContentletBaseTest;\n+import com.dotmarketing.portlets.containers.model.Container;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.portlets.folders.model.Folder;\n+import com.dotmarketing.util.Constants;", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODMwMA==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898300", "bodyText": "Issue found: Avoid unused imports such as 'com.dotmarketing.util.HostUtil'", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:06Z", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,49 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;\n import com.dotcms.datagen.SiteDataGen;\n import com.dotmarketing.beans.Host;\n import com.dotmarketing.business.APILocator;\n import com.dotmarketing.portlets.ContentletBaseTest;\n+import com.dotmarketing.portlets.containers.model.Container;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.portlets.folders.model.Folder;\n+import com.dotmarketing.util.Constants;\n+import com.dotmarketing.util.HostUtil;", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODMxMw==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898313", "bodyText": "Issue found: Avoid unused imports such as 'com.dotcms.datagen.FolderDataGen'", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:08Z", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,49 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODMyNA==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898324", "bodyText": "Issue found: Avoid unused imports such as 'com.dotmarketing.portlets.containers.model.Container'", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:08Z", "path": "dotCMS/src/integration-test/java/com/dotmarketing/portlets/containers/business/FileAssetContainerUtilTest.java", "diffHunk": "@@ -1,14 +1,49 @@\n package com.dotmarketing.portlets.containers.business;\n \n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.FolderDataGen;\n import com.dotcms.datagen.SiteDataGen;\n import com.dotmarketing.beans.Host;\n import com.dotmarketing.business.APILocator;\n import com.dotmarketing.portlets.ContentletBaseTest;\n+import com.dotmarketing.portlets.containers.model.Container;", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODMyOA==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898328", "bodyText": "Issue found: A method/constructor should not explicitly throw java.lang.Exception", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:09Z", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/ContainerLoaderTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+package com.dotcms.rendering.velocity.services;\n+\n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.repackage.org.apache.commons.io.IOUtils;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n+import com.dotmarketing.portlets.containers.model.Container;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.util.PageMode;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.charset.StandardCharsets;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+public class ContainerLoaderTest {\n+\n+    @BeforeClass\n+    public static void prepare () throws Exception {", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODM0NA==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898344", "bodyText": "Issue found: Avoid unused imports such as 'com.dotmarketing.portlets.containers.model.Container'", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:10Z", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/ContainerLoaderTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+package com.dotcms.rendering.velocity.services;\n+\n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.repackage.org.apache.commons.io.IOUtils;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n+import com.dotmarketing.portlets.containers.model.Container;", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg5ODM1MQ==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r374898351", "bodyText": "Issue found: Avoid unused imports such as 'org.junit.Assert.assertEquals'", "author": "dev-dotcms", "createdAt": "2020-02-04T20:14:11Z", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/ContainerLoaderTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+package com.dotcms.rendering.velocity.services;\n+\n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.repackage.org.apache.commons.io.IOUtils;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n+import com.dotmarketing.portlets.containers.model.Container;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.util.PageMode;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.charset.StandardCharsets;\n+\n+import static org.junit.Assert.assertEquals;", "originalCommit": "8f110f1d1d960141068c2dae087bec826296fa04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3f3afe40874de34e31ec89925284c9a1fe3764e3", "url": "https://github.com/dotCMS/core/commit/3f3afe40874de34e31ec89925284c9a1fe3764e3", "message": "codacy refactoring", "committedDate": "2020-02-05T14:12:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI5Mjg5NA==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r375292894", "bodyText": "please rename this test", "author": "nollymar", "createdAt": "2020-02-05T14:37:56Z", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/ContainerLoaderTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+package com.dotcms.rendering.velocity.services;\n+\n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.repackage.org.apache.commons.io.IOUtils;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.util.PageMode;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.charset.StandardCharsets;\n+\n+import static org.junit.Assert.assertTrue;\n+\n+public class ContainerLoaderTest {\n+\n+    @BeforeClass\n+    public static void prepare () throws Exception {\n+\n+        //Setting web app environment\n+        IntegrationTestInitService.getInstance().init();\n+    }\n+\n+    /**\n+     * Method to test: {@link ContainerLoader#writeObject(VelocityResourceKey)}\n+     * when: the File Container's html is build\n+     * Should: return a div with the File Comntainer's id\n+     */\n+    @Test\n+    public void aaa() throws DotDataException, DotSecurityException, IOException {", "originalCommit": "3f3afe40874de34e31ec89925284c9a1fe3764e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwMjQ3Mw==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r375302473", "bodyText": "done e8ef923#diff-90a1b8ea255c50a142e8987ff9b84049R37", "author": "freddyucv", "createdAt": "2020-02-05T14:53:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI5Mjg5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI5NDYyOQ==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r375294629", "bodyText": "this InputStream should be closed in a finally statement or in a try with resources", "author": "nollymar", "createdAt": "2020-02-05T14:40:49Z", "path": "dotCMS/src/integration-test/java/com/dotcms/rendering/velocity/services/ContainerLoaderTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+package com.dotcms.rendering.velocity.services;\n+\n+import com.dotcms.datagen.ContainerAsFileDataGen;\n+import com.dotcms.datagen.SiteDataGen;\n+import com.dotcms.repackage.org.apache.commons.io.IOUtils;\n+import com.dotcms.util.IntegrationTestInitService;\n+import com.dotmarketing.beans.Host;\n+import com.dotmarketing.business.APILocator;\n+import com.dotmarketing.exception.DotDataException;\n+import com.dotmarketing.exception.DotSecurityException;\n+import com.dotmarketing.portlets.containers.model.FileAssetContainer;\n+import com.dotmarketing.util.PageMode;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.nio.charset.StandardCharsets;\n+\n+import static org.junit.Assert.assertTrue;\n+\n+public class ContainerLoaderTest {\n+\n+    @BeforeClass\n+    public static void prepare () throws Exception {\n+\n+        //Setting web app environment\n+        IntegrationTestInitService.getInstance().init();\n+    }\n+\n+    /**\n+     * Method to test: {@link ContainerLoader#writeObject(VelocityResourceKey)}\n+     * when: the File Container's html is build\n+     * Should: return a div with the File Comntainer's id\n+     */\n+    @Test\n+    public void aaa() throws DotDataException, DotSecurityException, IOException {\n+\n+        final Host host = new SiteDataGen().nextPersisted();\n+\n+        final FileAssetContainer fileAssetContainer = new ContainerAsFileDataGen()\n+                .host(host)\n+                .nextPersisted();\n+\n+        final FileAssetContainer container = (FileAssetContainer) APILocator.getContainerAPI()\n+                .find(fileAssetContainer.getInode(), APILocator.systemUser(), true);\n+\n+        final ContainerLoader containerLoader = new ContainerLoader();\n+\n+        final VelocityResourceKey velocityResourceKey = new VelocityResourceKey(fileAssetContainer, PageMode.EDIT_MODE);\n+        final InputStream inputStream = containerLoader.writeObject(velocityResourceKey);", "originalCommit": "3f3afe40874de34e31ec89925284c9a1fe3764e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMwMjcwMw==", "url": "https://github.com/dotCMS/core/pull/17950#discussion_r375302703", "bodyText": "done e8ef923#diff-90a1b8ea255c50a142e8987ff9b84049R52", "author": "freddyucv", "createdAt": "2020-02-05T14:53:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI5NDYyOQ=="}], "type": "inlineReview"}, {"oid": "e8ef923ad798cfa1c6428e2516f90183bcd40a4e", "url": "https://github.com/dotCMS/core/commit/e8ef923ad798cfa1c6428e2516f90183bcd40a4e", "message": "renaming test method and close resource correctly", "committedDate": "2020-02-05T14:49:57Z", "type": "commit"}]}