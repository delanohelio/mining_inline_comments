{"pr_number": 18240, "pr_title": "#18194  fix NPE on site_search_audit.jsp", "pr_createdAt": "2020-04-01T06:05:20Z", "pr_url": "https://github.com/dotCMS/core/pull/18240", "timeline": [{"oid": "b9d49c32ec7cf4cf5caf0deddad937fdccfba534", "url": "https://github.com/dotCMS/core/commit/b9d49c32ec7cf4cf5caf0deddad937fdccfba534", "message": "#18194  fix NPE on site_search_audit.jsp", "committedDate": "2020-04-01T05:57:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5MDMyNw==", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401390327", "bodyText": "rename to hostId", "author": "jdotcms", "createdAt": "2020-04-01T06:48:10Z", "path": "dotCMS/src/main/webapp/html/portlet/ext/sitesearch/site_search_audit.jsp", "diffHunk": "@@ -57,11 +56,19 @@\n     </tr>\n     <% for(SiteSearchAudit a : recents) { %>\n     <%\n-        StringBuilder hostList=new StringBuilder();\n-        for(String hid : a.getHostList().split(\",\")) {\n-            if(UtilMethods.isSet(hid))\n-                hostList.append(APILocator.getHostAPI().find(hid, APILocator.getUserAPI().getSystemUser(), false).getHostname())\n-                        .append(\"  \");\n+        final StringBuilder hostList = new StringBuilder();\n+        final String [] sites = a.getHostList().split(\",\");\n+        if(UtilMethods.isSet(sites) ){\n+            if (\"empty\".equalsIgnoreCase(sites[0])) {\n+                hostList.append(LanguageUtil.get(pageContext, \"All\")).append(\"  \");\n+            } else {\n+                for (String hid : sites) {", "originalCommit": "b9d49c32ec7cf4cf5caf0deddad937fdccfba534", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5MDM3Ng==", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401390376", "bodyText": "set to final", "author": "jdotcms", "createdAt": "2020-04-01T06:48:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5MDMyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTYxNDU4MQ==", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401614581", "bodyText": "done", "author": "fabrizzio-dotCMS", "createdAt": "2020-04-01T13:28:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5MDMyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5MDUxNA==", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401390514", "bodyText": "sites must check if size is >= 1", "author": "jdotcms", "createdAt": "2020-04-01T06:48:37Z", "path": "dotCMS/src/main/webapp/html/portlet/ext/sitesearch/site_search_audit.jsp", "diffHunk": "@@ -57,11 +56,19 @@\n     </tr>\n     <% for(SiteSearchAudit a : recents) { %>\n     <%\n-        StringBuilder hostList=new StringBuilder();\n-        for(String hid : a.getHostList().split(\",\")) {\n-            if(UtilMethods.isSet(hid))\n-                hostList.append(APILocator.getHostAPI().find(hid, APILocator.getUserAPI().getSystemUser(), false).getHostname())\n-                        .append(\"  \");\n+        final StringBuilder hostList = new StringBuilder();\n+        final String [] sites = a.getHostList().split(\",\");\n+        if(UtilMethods.isSet(sites) ){", "originalCommit": "b9d49c32ec7cf4cf5caf0deddad937fdccfba534", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTYxNDQ5NQ==", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401614495", "bodyText": "UtilMethods.isSet(String) checks is size is > 0.\nI care it at least holds 1 entry. So that's good enough.", "author": "fabrizzio-dotCMS", "createdAt": "2020-04-01T13:28:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTM5MDUxNA=="}], "type": "inlineReview"}, {"oid": "d583a3a5356711e56bc854e7e38268b4bb1fe52e", "url": "https://github.com/dotCMS/core/commit/d583a3a5356711e56bc854e7e38268b4bb1fe52e", "message": "#18194 feedback", "committedDate": "2020-04-01T13:31:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY0NzM0Nw==", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401647347", "bodyText": "what is it happen if getHostList return null?", "author": "freddyucv", "createdAt": "2020-04-01T14:13:07Z", "path": "dotCMS/src/main/webapp/html/portlet/ext/sitesearch/site_search_audit.jsp", "diffHunk": "@@ -57,11 +56,19 @@\n     </tr>\n     <% for(SiteSearchAudit a : recents) { %>\n     <%\n-        StringBuilder hostList=new StringBuilder();\n-        for(String hid : a.getHostList().split(\",\")) {\n-            if(UtilMethods.isSet(hid))\n-                hostList.append(APILocator.getHostAPI().find(hid, APILocator.getUserAPI().getSystemUser(), false).getHostname())\n-                        .append(\"  \");\n+        final StringBuilder hostList = new StringBuilder();\n+        final String [] sites = a.getHostList().split(\",\");", "originalCommit": "d583a3a5356711e56bc854e7e38268b4bb1fe52e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcwMjI5OA==", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401702298", "bodyText": "shouldn't return null. The Audit data table demands something is written into that field at all times.", "author": "fabrizzio-dotCMS", "createdAt": "2020-04-01T15:25:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY0NzM0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY1MTc0NA==", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401651744", "bodyText": "where is hostList use?", "author": "freddyucv", "createdAt": "2020-04-01T14:19:11Z", "path": "dotCMS/src/main/webapp/html/portlet/ext/sitesearch/site_search_audit.jsp", "diffHunk": "@@ -57,11 +56,19 @@\n     </tr>\n     <% for(SiteSearchAudit a : recents) { %>\n     <%\n-        StringBuilder hostList=new StringBuilder();\n-        for(String hid : a.getHostList().split(\",\")) {\n-            if(UtilMethods.isSet(hid))\n-                hostList.append(APILocator.getHostAPI().find(hid, APILocator.getUserAPI().getSystemUser(), false).getHostname())\n-                        .append(\"  \");\n+        final StringBuilder hostList = new StringBuilder();", "originalCommit": "d583a3a5356711e56bc854e7e38268b4bb1fe52e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcwMjc4Mg==", "url": "https://github.com/dotCMS/core/pull/18240#discussion_r401702782", "bodyText": "hostList is used downstream in the jsp to print the host names", "author": "fabrizzio-dotCMS", "createdAt": "2020-04-01T15:25:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY1MTc0NA=="}], "type": "inlineReview"}]}