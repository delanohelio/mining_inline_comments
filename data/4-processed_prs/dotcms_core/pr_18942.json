{"pr_number": 18942, "pr_title": "Issue 18686 apps select fields", "pr_createdAt": "2020-07-22T15:14:37Z", "pr_url": "https://github.com/dotCMS/core/pull/18942", "timeline": [{"oid": "408687826ebc2fb86049530a5d040cdf5765b402", "url": "https://github.com/dotCMS/core/commit/408687826ebc2fb86049530a5d040cdf5765b402", "message": "#18686 adding support for select fields", "committedDate": "2020-07-17T17:02:51Z", "type": "commit"}, {"oid": "ba20076176b16a707e9985b88f6ff4d1567f9fda", "url": "https://github.com/dotCMS/core/commit/ba20076176b16a707e9985b88f6ff4d1567f9fda", "message": "#18686 apps support for select like fields", "committedDate": "2020-07-22T15:10:12Z", "type": "commit"}, {"oid": "de9f99a723d0232b3be58ff787cbf22e720857a8", "url": "https://github.com/dotCMS/core/commit/de9f99a723d0232b3be58ff787cbf22e720857a8", "message": "#18686  codacy feedback", "committedDate": "2020-07-22T17:16:47Z", "type": "commit"}, {"oid": "509a914b7c7837721016b429e8c8367b133ad81e", "url": "https://github.com/dotCMS/core/commit/509a914b7c7837721016b429e8c8367b133ad81e", "message": "#18686 fix side-effect", "committedDate": "2020-07-22T20:17:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MTUyNA==", "url": "https://github.com/dotCMS/core/pull/18942#discussion_r459061524", "bodyText": "Codacy found an issue: The String literal \"selectParam\" appears 4 times in this file; the first occurrence is on line 795", "author": "dev-dotcms", "createdAt": "2020-07-22T20:24:51Z", "path": "dotCMS/src/integration-test/java/com/dotcms/rest/api/v1/apps/AppsResourceTest.java", "diffHunk": "@@ -773,6 +773,92 @@ public void Test_Secret_Serializer_Returned_Values_Match_Descriptor_Verify_Hidde\n         }\n     }\n \n+    /**\n+     * Test we save a secret that is described as a Select List\n+     * Given scenario: We create a secret then we update the select value sending one of the values\n+     * Expected Result: Only the public value  was supposed to be updated. The other 2 hidden fields should remain the same since we sent a bunch of *****\n+     * @throws IOException\n+     */\n+    @Test\n+    public void Test_Select_List_Param()\n+            throws IOException {\n+       //Select list definition\n+       final List<Map<String,String>> list = ImmutableList.of(\n+           ImmutableMap.of(\"label\",\"-\",\"value\",\"\"),\n+           ImmutableMap.of(\"label\",\"uno\",\"value\",\"1\"),\n+           ImmutableMap.of(\"label\",\"dos\",\"value\",\"2\",\"selected\",\"true\"),\n+           ImmutableMap.of(\"label\",\"tres\",\"value\",\"3\")\n+       );\n+\n+        final AppDescriptorDataGen dataGen = new AppDescriptorDataGen()\n+                .stringParam(\"param1\", false,  true)\n+                .selectParam(\"selectParam\", true, list)", "originalCommit": "509a914b7c7837721016b429e8c8367b133ad81e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MTUzMg==", "url": "https://github.com/dotCMS/core/pull/18942#discussion_r459061532", "bodyText": "Codacy found an issue: The String literal \"label\" appears 4 times in this file; the first occurrence is on line 787", "author": "dev-dotcms", "createdAt": "2020-07-22T20:24:52Z", "path": "dotCMS/src/integration-test/java/com/dotcms/rest/api/v1/apps/AppsResourceTest.java", "diffHunk": "@@ -773,6 +773,92 @@ public void Test_Secret_Serializer_Returned_Values_Match_Descriptor_Verify_Hidde\n         }\n     }\n \n+    /**\n+     * Test we save a secret that is described as a Select List\n+     * Given scenario: We create a secret then we update the select value sending one of the values\n+     * Expected Result: Only the public value  was supposed to be updated. The other 2 hidden fields should remain the same since we sent a bunch of *****\n+     * @throws IOException\n+     */\n+    @Test\n+    public void Test_Select_List_Param()\n+            throws IOException {\n+       //Select list definition\n+       final List<Map<String,String>> list = ImmutableList.of(\n+           ImmutableMap.of(\"label\",\"-\",\"value\",\"\"),", "originalCommit": "509a914b7c7837721016b429e8c8367b133ad81e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MTU0MQ==", "url": "https://github.com/dotCMS/core/pull/18942#discussion_r459061541", "bodyText": "Codacy found an issue: Useless parentheses.", "author": "dev-dotcms", "createdAt": "2020-07-22T20:24:53Z", "path": "dotCMS/src/main/java/com/dotcms/security/apps/AppsAPIImpl.java", "diffHunk": "@@ -610,6 +611,45 @@ private void removeDescriptor(final AppDescriptor descriptor) throws DotDataExce\n         return emptyMap();\n     }\n \n+    /**\n+     * Condition check This verifies the descriptor demands the param to be required but.. No default value is provided and the secret neither has a stored value\n+     * @param descriptor ParamDescriptor\n+     * @param secret stored secret\n+     * @return\n+     */\n+    private boolean isRequiredWithNoDefaultValue(final ParamDescriptor descriptor, final Secret secret ){\n+        //Verify we have a param marked required and no default Value\n+        final boolean isRequiredWithNoDefaultParam = (descriptor.isRequired() && isEmpty(descriptor.getValue()));\n+        //Verify the secret is empty\n+        final boolean isSecretWithEmptyValue = (null == secret || isNotSet(secret.getValue()));", "originalCommit": "509a914b7c7837721016b429e8c8367b133ad81e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA2MTU0NQ==", "url": "https://github.com/dotCMS/core/pull/18942#discussion_r459061545", "bodyText": "Codacy found an issue: Useless parentheses.", "author": "dev-dotcms", "createdAt": "2020-07-22T20:24:54Z", "path": "dotCMS/src/main/java/com/dotcms/security/apps/AppsAPIImpl.java", "diffHunk": "@@ -610,6 +611,45 @@ private void removeDescriptor(final AppDescriptor descriptor) throws DotDataExce\n         return emptyMap();\n     }\n \n+    /**\n+     * Condition check This verifies the descriptor demands the param to be required but.. No default value is provided and the secret neither has a stored value\n+     * @param descriptor ParamDescriptor\n+     * @param secret stored secret\n+     * @return\n+     */\n+    private boolean isRequiredWithNoDefaultValue(final ParamDescriptor descriptor, final Secret secret ){\n+        //Verify we have a param marked required and no default Value\n+        final boolean isRequiredWithNoDefaultParam = (descriptor.isRequired() && isEmpty(descriptor.getValue()));", "originalCommit": "509a914b7c7837721016b429e8c8367b133ad81e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}