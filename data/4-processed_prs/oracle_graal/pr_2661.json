{"pr_number": 2661, "pr_title": "Add compilation directory to debug info", "pr_createdAt": "2020-07-08T20:09:41Z", "pr_url": "https://github.com/oracle/graal/pull/2661", "timeline": [{"oid": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625", "url": "https://github.com/oracle/graal/commit/ad3de084bbddf7dd05cfaa6818e583b6d70b7625", "message": "Removes explicit addition of source cache from in debuginfotest", "committedDate": "2020-07-08T21:43:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEzOTU3MQ==", "url": "https://github.com/oracle/graal/pull/2661#discussion_r452139571", "bodyText": "I think this would be clearer:\nBy default will look employ the three local directory roots sources/{jdk,graal,src} to locate the source files for your app classes, Graal classes and JDK runtime classes. If the sources cache is not located in the directory in which you run gdb you can configure the required paths using the following command:\n(gdb) set ...", "author": "adinn", "createdAt": "2020-07-09T11:07:28Z", "path": "substratevm/DEBUGINFO.md", "diffHunk": "@@ -174,37 +174,41 @@ configure extra source search paths (see below).\n Configuring source paths in gdb\n -------------------------------\n \n-In order for gdb to be able to locate the source files for your app\n-classes, Graal classes and JDK runtime classes you need to provide gdb\n-with a list of source root dirs using the 'set directories' command:\n+By default gdb will look into `/path/to/sources/{jdk,graal,src}` directories to", "originalCommit": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE0NDQ4MQ==", "url": "https://github.com/oracle/graal/pull/2661#discussion_r452144481", "bodyText": "This should now be resolved", "author": "zakkak", "createdAt": "2020-07-09T11:17:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEzOTU3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE0Mjk4OA==", "url": "https://github.com/oracle/graal/pull/2661#discussion_r452142988", "bodyText": "This name seems wrong as the value is not actually anything to do with compilation. I understand that it is used to populate the comp_dir DWARF property but that use is incidental to its origin -- which I think it is more helpful to signal. So I'd prefer to use field name cachePath and modifying the getter accordingly.", "author": "adinn", "createdAt": "2020-07-09T11:15:04Z", "path": "substratevm/src/com.oracle.objectfile/src/com/oracle/objectfile/debugentry/Range.java", "diffHunk": "@@ -36,6 +36,7 @@\n  */\n \n public class Range {\n+    private final String compilationDirectory;", "originalCommit": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE0ODQ1NA==", "url": "https://github.com/oracle/graal/pull/2661#discussion_r452148454", "bodyText": "I agree. This should now be fixed all the way to com.oracle.objectfile.elf.dwarf.DwarfInfoSectionImpl#writeCU.", "author": "zakkak", "createdAt": "2020-07-09T11:26:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE0Mjk4OA=="}], "type": "inlineReview"}, {"oid": "80ad096e0d1d90be3c86a15a233ccc28caa26e94", "url": "https://github.com/oracle/graal/commit/80ad096e0d1d90be3c86a15a233ccc28caa26e94", "message": "Removes explicit addition of source cache from in debuginfotest", "committedDate": "2020-07-09T11:17:14Z", "type": "forcePushed"}, {"oid": "4f231abdcb1b44ea570aef3acfbbe2f3d34e4898", "url": "https://github.com/oracle/graal/commit/4f231abdcb1b44ea570aef3acfbbe2f3d34e4898", "message": "Adds DW_AT_comp_dir attribute to debug info\n\nThis patch adds the DW_AT_comp_dir attribute to debug info, making it\npoint to the appropriate source file cache. This removes the need of\nusing `set directores sources/jdk:sources/graal:sources/src` in gdb.", "committedDate": "2020-07-09T11:22:42Z", "type": "commit"}, {"oid": "dd1c0aa3a0ca6fdc0385e875bdfa9a107e5fe6cb", "url": "https://github.com/oracle/graal/commit/dd1c0aa3a0ca6fdc0385e875bdfa9a107e5fe6cb", "message": "Update DEBUGINFO.md to reflect addition of DW_AT_comp_dir", "committedDate": "2020-07-09T11:22:45Z", "type": "commit"}, {"oid": "a5390a291df12560aa7b8b623a693809e1640f09", "url": "https://github.com/oracle/graal/commit/a5390a291df12560aa7b8b623a693809e1640f09", "message": "Removes explicit addition of source cache from in debuginfotest", "committedDate": "2020-07-09T11:22:45Z", "type": "commit"}, {"oid": "a5390a291df12560aa7b8b623a693809e1640f09", "url": "https://github.com/oracle/graal/commit/a5390a291df12560aa7b8b623a693809e1640f09", "message": "Removes explicit addition of source cache from in debuginfotest", "committedDate": "2020-07-09T11:22:45Z", "type": "forcePushed"}]}