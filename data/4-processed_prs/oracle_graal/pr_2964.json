{"pr_number": 2964, "pr_title": "Make `buildArgs` a list to allow reusability from parent POMs", "pr_createdAt": "2020-11-04T10:17:13Z", "pr_url": "https://github.com/oracle/graal/pull/2964", "timeline": [{"oid": "4852db730e8f56feb0ae69820a99fc7362be1d28", "url": "https://github.com/oracle/graal/commit/4852db730e8f56feb0ae69820a99fc7362be1d28", "message": "Make  a list to allow reusability from parent POMs", "committedDate": "2020-11-04T10:12:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwMzAzMA==", "url": "https://github.com/oracle/graal/pull/2964#discussion_r517303030", "bodyText": "Please keep those examples as they are. We want to show that it is possible to have individual options in separate lines. This is useful to be able to get reasonable diffs in version control if changes are made in <buildArg>-elements.", "author": "olpaw", "createdAt": "2020-11-04T12:18:33Z", "path": "substratevm/NativeImageMavenPlugin.md", "diffHunk": "@@ -25,7 +25,7 @@ separate step. It is sufficient to add `native-image-maven-plugin` into the\n         <skip>false</skip>\n         <imageName>example</imageName>\n         <buildArgs>\n-            --no-fallback\n+            <buildArg>--no-fallback</buildArg>", "originalCommit": "4852db730e8f56feb0ae69820a99fc7362be1d28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMxODIwMA==", "url": "https://github.com/oracle/graal/pull/2964#discussion_r517318200", "bodyText": "Also it would be nice to explain how to do reusability from a parent pom as you show in #2950 (comment)", "author": "olpaw", "createdAt": "2020-11-04T12:47:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwMzAzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQzNzYxOA==", "url": "https://github.com/oracle/graal/pull/2964#discussion_r517437618", "bodyText": "Done.", "author": "alvarosanchez", "createdAt": "2020-11-04T15:42:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwMzAzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwNzA2Mw==", "url": "https://github.com/oracle/graal/pull/2964#discussion_r517307063", "bodyText": "You should not need these dependencies. They are provided transitively via org.graalvm.nativeimage:svm-driver.", "author": "olpaw", "createdAt": "2020-11-04T12:25:51Z", "path": "substratevm/src/native-image-maven-plugin/pom_template.xml", "diffHunk": "@@ -78,6 +78,16 @@\n             <artifactId>svm-driver</artifactId>\n             <version><svmVersion/></version>\n         </dependency>\n+        <dependency>", "originalCommit": "4852db730e8f56feb0ae69820a99fc7362be1d28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ0MDg4Nw==", "url": "https://github.com/oracle/graal/pull/2964#discussion_r517440887", "bodyText": "I had to. The POM of my ~.m2/repository version of org.graalvm.nativeimage:svm-driver is empty:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n  <modelVersion>4.0.0</modelVersion>\n  <groupId>org.graalvm.nativeimage</groupId>\n  <artifactId>svm-driver</artifactId>\n  <version>21.0.0-SNAPSHOT</version>\n  <description>POM was created from install:install-file</description>\n</project>\nI ran mx build, mx ideinit and mx maven-install.\nBut if you are really sure it's not needed, I'll remove them.", "author": "alvarosanchez", "createdAt": "2020-11-04T15:46:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwNzA2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ0MzM2NA==", "url": "https://github.com/oracle/graal/pull/2964#discussion_r517443364", "bodyText": "The trick is to run mx maven-plugin-install --deploy-dependencies. This will ensure you have all you need in your ~.m2/repository.", "author": "olpaw", "createdAt": "2020-11-04T15:50:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwNzA2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ4MTc1Ng==", "url": "https://github.com/oracle/graal/pull/2964#discussion_r517481756", "bodyText": "Thanks, that makes a difference.\nThis subproject could clearly benefit from a README or CONTRIBUTING.md where you put the secret sauce \ud83d\ude09", "author": "alvarosanchez", "createdAt": "2020-11-04T16:43:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwNzA2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwNzM5OQ==", "url": "https://github.com/oracle/graal/pull/2964#discussion_r517307399", "bodyText": "LGTM", "author": "olpaw", "createdAt": "2020-11-04T12:26:32Z", "path": "substratevm/src/native-image-maven-plugin/src/main/java/com/oracle/substratevm/NativeImageMojo.java", "diffHunk": "@@ -367,7 +367,9 @@ private String getConfigurationNodeValue(ConfigurationContainer container, Strin\n \n         List<String> list = new ArrayList<>();\n         if (buildArgs != null && !buildArgs.isEmpty()) {\n-            list.addAll(Arrays.asList(buildArgs.split(\"\\\\s+\")));\n+            for (String buildArg : buildArgs) {", "originalCommit": "4852db730e8f56feb0ae69820a99fc7362be1d28", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "327b3c797534318e161be61aee66db8970619a20", "url": "https://github.com/oracle/graal/commit/327b3c797534318e161be61aee66db8970619a20", "message": "Addressing PR feedback", "committedDate": "2020-11-04T15:41:50Z", "type": "commit"}, {"oid": "1bc3358ceb09b262a36dd80ee9ab7546a95f402e", "url": "https://github.com/oracle/graal/commit/1bc3358ceb09b262a36dd80ee9ab7546a95f402e", "message": "Removing unnecessary dependencies", "committedDate": "2020-11-04T16:42:17Z", "type": "commit"}]}