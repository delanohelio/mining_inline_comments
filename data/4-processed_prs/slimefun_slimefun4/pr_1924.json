{"pr_number": 1924, "pr_title": "Fix compatibility with other plugins / Explosive Pickaxe", "pr_createdAt": "2020-05-22T03:30:24Z", "pr_url": "https://github.com/Slimefun/Slimefun4/pull/1924", "timeline": [{"oid": "388ed255b89c4ecf9dada3997a95cfef0f2b6526", "url": "https://github.com/Slimefun/Slimefun4/commit/388ed255b89c4ecf9dada3997a95cfef0f2b6526", "message": "Fix compatibility with other plugins firing bukkit explosion event to do not drop near blocks on pickaxe area if the block was removed from explosion event.", "committedDate": "2020-05-22T03:24:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAyNTk2NA==", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#discussion_r429025964", "bodyText": "Not a fan of EntityExplodeEvent, this should b BlockExplodeEvent with the actual broken block.\nThis is gonna lead to weird behaviour by plugins.", "author": "WalshyDev", "createdAt": "2020-05-22T03:36:24Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosivePickaxe.java", "diffHunk": "@@ -63,11 +67,18 @@ public boolean onBlockBreak(BlockBreakEvent e, ItemStack item, int fortune, List\n                                         continue;\n                                     }\n \n-                                    Block b = e.getBlock().getRelative(x, y, z);\n-                                    breakBlock(e.getPlayer(), item, b, fortune, drops);\n+                                    blocks.add(e.getBlock().getRelative(x, y, z));\n                                 }\n                             }\n                         }\n+\n+                        EntityExplodeEvent entityExplodeEvent = new EntityExplodeEvent(e.getPlayer(), e.getBlock().getLocation(), blocks, 0);", "originalCommit": "388ed255b89c4ecf9dada3997a95cfef0f2b6526", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAyOTQ3MA==", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#discussion_r429029470", "bodyText": "Thats right, ill change and test.", "author": "FabioZumbi12", "createdAt": "2020-05-22T03:54:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAyNTk2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAyODkyNA==", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#discussion_r429028924", "bodyText": "Shouldn't use curly brace for lambda with one line.", "author": "WalshyDev", "createdAt": "2020-05-22T03:51:30Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosivePickaxe.java", "diffHunk": "@@ -63,11 +67,18 @@ public boolean onBlockBreak(BlockBreakEvent e, ItemStack item, int fortune, List\n                                         continue;\n                                     }\n \n-                                    Block b = e.getBlock().getRelative(x, y, z);\n-                                    breakBlock(e.getPlayer(), item, b, fortune, drops);\n+                                    blocks.add(e.getBlock().getRelative(x, y, z));\n                                 }\n                             }\n                         }\n+\n+                        EntityExplodeEvent entityExplodeEvent = new EntityExplodeEvent(e.getPlayer(), e.getBlock().getLocation(), blocks, 0);\n+                        Bukkit.getServer().getPluginManager().callEvent(entityExplodeEvent);\n+                        if (!entityExplodeEvent.isCancelled()) {\n+                            entityExplodeEvent.blockList().forEach(b -> {", "originalCommit": "388ed255b89c4ecf9dada3997a95cfef0f2b6526", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAyOTUwNQ==", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#discussion_r429029505", "bodyText": "IDE completing! Ill change ;)", "author": "FabioZumbi12", "createdAt": "2020-05-22T03:54:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAyODkyNA=="}], "type": "inlineReview"}, {"oid": "d1a968d4ff48b20ade2d14f9f71e2d11b94a000d", "url": "https://github.com/Slimefun/Slimefun4/commit/d1a968d4ff48b20ade2d14f9f71e2d11b94a000d", "message": "Changed to Block explode, and added the event to Explosive Shovel", "committedDate": "2020-05-22T04:07:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAzMjg4Nw==", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#discussion_r429032887", "bodyText": "Missing space at start of line", "author": "WalshyDev", "createdAt": "2020-05-22T04:10:44Z", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosiveShovel.java", "diffHunk": "@@ -57,31 +61,38 @@ public boolean onBlockBreak(BlockBreakEvent e, ItemStack item, int fortune, List\n                         e.getBlock().getWorld().createExplosion(e.getBlock().getLocation(), 0.0F);\n                         e.getBlock().getWorld().playSound(e.getBlock().getLocation(), Sound.ENTITY_GENERIC_EXPLODE, 0.3F, 1F);\n \n+                        List<Block> blocks = new ArrayList<>();\n                         for (int x = -1; x <= 1; x++) {\n                             for (int y = -1; y <= 1; y++) {\n                                 for (int z = -1; z <= 1; z++) {\n                                     if (x == 0 && y == 0 && z == 0) {\n                                         continue;\n                                     }\n \n-                                    Block b = e.getBlock().getRelative(x, y, z);\n+                                   blocks.add(e.getBlock().getRelative(x, y, z));", "originalCommit": "d1a968d4ff48b20ade2d14f9f71e2d11b94a000d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7a6e6cd8ebbeb2a2c683637f65c0d6b5d6b59dc1", "url": "https://github.com/Slimefun/Slimefun4/commit/7a6e6cd8ebbeb2a2c683637f65c0d6b5d6b59dc1", "message": "Missing space on line", "committedDate": "2020-05-22T04:13:59Z", "type": "commit"}]}