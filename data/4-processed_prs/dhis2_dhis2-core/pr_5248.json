{"pr_number": 5248, "pr_title": "fix: Ensure UID is used when enrolling TEIs in SMS", "pr_createdAt": "2020-04-01T13:52:11Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/5248", "timeline": [{"oid": "3f6bf26a9472ecc021eda9e40ec94c6958fb5ef0", "url": "https://github.com/dhis2/dhis2-core/commit/3f6bf26a9472ecc021eda9e40ec94c6958fb5ef0", "message": "fix: ensure UID is used when enrolling TEIs in SMS", "committedDate": "2020-04-01T13:51:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjEwOTI5MQ==", "url": "https://github.com/dhis2/dhis2-core/pull/5248#discussion_r402109291", "bodyText": "Could we use .getUid() here?", "author": "larshelge", "createdAt": "2020-04-02T07:36:39Z", "path": "dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/sms/listener/EnrollmentSMSListener.java", "diffHunk": "@@ -182,7 +182,7 @@ protected SMSResponse postProcess( IncomingSms sms, SMSSubmission submission )\n         else\n         {\n             enrollment = programInstanceService.enrollTrackedEntityInstance( tei, program, enrollmentDate, incidentDate,\n-                orgUnit );\n+                orgUnit, enrollmentid.uid );", "originalCommit": "3f6bf26a9472ecc021eda9e40ec94c6958fb5ef0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjcyMDk5NQ==", "url": "https://github.com/dhis2/dhis2-core/pull/5248#discussion_r402720995", "bodyText": "enrollmentid is a class called UID from the SMS compression library: https://github.com/dhis2/sms-compression/blob/master/src/main/java/org/hisp/dhis/smscompression/models/UID.java\nIt has a toString() method we can use but it can potentially return a hash of the UID if the actual UID is null.\nIt feels like it's probably worthwhile me adding a getUid() to the class.", "author": "JasperTimm", "createdAt": "2020-04-03T03:45:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjEwOTI5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc0NzAyNw==", "url": "https://github.com/dhis2/dhis2-core/pull/5248#discussion_r402747027", "bodyText": "this is an external library (sms-compression). Another approach would be to have getUid() in the upcoming versions of sms-compression library.", "author": "zubaira", "createdAt": "2020-04-03T05:39:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjEwOTI5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjc5MDU1Mw==", "url": "https://github.com/dhis2/dhis2-core/pull/5248#discussion_r402790553", "bodyText": "Yes let's provide public get methods for the methods we would like to callers (instead of using internal properties directly). Change the properties to be private.", "author": "larshelge", "createdAt": "2020-04-03T07:36:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjEwOTI5MQ=="}], "type": "inlineReview"}]}