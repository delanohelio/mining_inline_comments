{"pr_number": 4961, "pr_title": "fix: Fix weakness in analytics cache through named properties [DHIS2-8371]", "pr_createdAt": "2020-02-26T12:42:22Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/4961", "timeline": [{"oid": "8b7812f48b48ce7be772d414bd3030d5acdfbb3b", "url": "https://github.com/dhis2/dhis2-core/commit/8b7812f48b48ce7be772d414bd3030d5acdfbb3b", "message": "Set SchedulingType", "committedDate": "2020-01-21T07:34:48Z", "type": "commit"}, {"oid": "d3100d88fc788c62e0594dcdf1742c99ebed4be4", "url": "https://github.com/dhis2/dhis2-core/commit/d3100d88fc788c62e0594dcdf1742c99ebed4be4", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-21T07:47:58Z", "type": "commit"}, {"oid": "e3887d2d7d8cc69e71c364f65eda2c9dcb02d4ed", "url": "https://github.com/dhis2/dhis2-core/commit/e3887d2d7d8cc69e71c364f65eda2c9dcb02d4ed", "message": "Generics", "committedDate": "2020-01-21T08:00:52Z", "type": "commit"}, {"oid": "aae3258f4c6471154f3e86a80c9fac3080424f3a", "url": "https://github.com/dhis2/dhis2-core/commit/aae3258f4c6471154f3e86a80c9fac3080424f3a", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-21T08:44:32Z", "type": "commit"}, {"oid": "a38abe94bf641408d9cba1cd6fe2799ad13e48b0", "url": "https://github.com/dhis2/dhis2-core/commit/a38abe94bf641408d9cba1cd6fe2799ad13e48b0", "message": "Error codes in analytics", "committedDate": "2020-01-21T10:07:29Z", "type": "commit"}, {"oid": "b92e5e3f70fa50527b12b6cec74e086778f1514a", "url": "https://github.com/dhis2/dhis2-core/commit/b92e5e3f70fa50527b12b6cec74e086778f1514a", "message": "Tests", "committedDate": "2020-01-21T10:33:54Z", "type": "commit"}, {"oid": "8c912e90c930da307505ab929d647718958fa605", "url": "https://github.com/dhis2/dhis2-core/commit/8c912e90c930da307505ab929d647718958fa605", "message": "Merge with master", "committedDate": "2020-01-21T10:35:47Z", "type": "commit"}, {"oid": "4d37a3f368fc6cae51ea5f28194dc3e0eb71d264", "url": "https://github.com/dhis2/dhis2-core/commit/4d37a3f368fc6cae51ea5f28194dc3e0eb71d264", "message": "Docs", "committedDate": "2020-01-21T10:40:31Z", "type": "commit"}, {"oid": "b6a3be0d4ecc9e5cd209d074c65c87c8097bcabd", "url": "https://github.com/dhis2/dhis2-core/commit/b6a3be0d4ecc9e5cd209d074c65c87c8097bcabd", "message": "Minor", "committedDate": "2020-01-21T11:13:20Z", "type": "commit"}, {"oid": "25df7eee822c4fffc4a91e62d0823007b04edf9a", "url": "https://github.com/dhis2/dhis2-core/commit/25df7eee822c4fffc4a91e62d0823007b04edf9a", "message": "Minor", "committedDate": "2020-01-21T11:15:26Z", "type": "commit"}, {"oid": "0763b08b210cf436fc8fa3ef5f9d904ae3bfe8bf", "url": "https://github.com/dhis2/dhis2-core/commit/0763b08b210cf436fc8fa3ef5f9d904ae3bfe8bf", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-21T11:42:04Z", "type": "commit"}, {"oid": "938c548f5d8b31013bed2d43028b72827bdcdb1c", "url": "https://github.com/dhis2/dhis2-core/commit/938c548f5d8b31013bed2d43028b72827bdcdb1c", "message": "Refactor", "committedDate": "2020-01-22T10:52:45Z", "type": "commit"}, {"oid": "92b5f20a2391545034bbd0a66c13dcb279c1662b", "url": "https://github.com/dhis2/dhis2-core/commit/92b5f20a2391545034bbd0a66c13dcb279c1662b", "message": "Test", "committedDate": "2020-01-22T11:01:23Z", "type": "commit"}, {"oid": "7dbfffad66be7e575eed686d5c8c0934932d1adf", "url": "https://github.com/dhis2/dhis2-core/commit/7dbfffad66be7e575eed686d5c8c0934932d1adf", "message": "Minor", "committedDate": "2020-01-22T11:02:50Z", "type": "commit"}, {"oid": "6eb90650f7b0faef1094b66b3a5b5f27b9601a65", "url": "https://github.com/dhis2/dhis2-core/commit/6eb90650f7b0faef1094b66b3a5b5f27b9601a65", "message": "Add job type info", "committedDate": "2020-01-22T11:45:20Z", "type": "commit"}, {"oid": "cdb8b55f940a670a6fd675e693efc71cb6283a61", "url": "https://github.com/dhis2/dhis2-core/commit/cdb8b55f940a670a6fd675e693efc71cb6283a61", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-22T11:46:45Z", "type": "commit"}, {"oid": "3ea03582fa6e8c1d9c2a653f1e1d3d3365963dd5", "url": "https://github.com/dhis2/dhis2-core/commit/3ea03582fa6e8c1d9c2a653f1e1d3d3365963dd5", "message": "License", "committedDate": "2020-01-22T11:48:42Z", "type": "commit"}, {"oid": "5a54646f3886d0d31721dc8dad9b7bfb45c2a254", "url": "https://github.com/dhis2/dhis2-core/commit/5a54646f3886d0d31721dc8dad9b7bfb45c2a254", "message": "Javadoc", "committedDate": "2020-01-22T11:53:40Z", "type": "commit"}, {"oid": "78600593d8f49722a40d1f3869df86e906449a65", "url": "https://github.com/dhis2/dhis2-core/commit/78600593d8f49722a40d1f3869df86e906449a65", "message": "Javadoc", "committedDate": "2020-01-22T11:54:01Z", "type": "commit"}, {"oid": "f16280b14a1a2bdfb0cf137c5c504a97d69caa47", "url": "https://github.com/dhis2/dhis2-core/commit/f16280b14a1a2bdfb0cf137c5c504a97d69caa47", "message": "Job types", "committedDate": "2020-01-22T12:23:57Z", "type": "commit"}, {"oid": "f85583ec6f00bfffaaeed06792f9678a9fab05ed", "url": "https://github.com/dhis2/dhis2-core/commit/f85583ec6f00bfffaaeed06792f9678a9fab05ed", "message": "Docs", "committedDate": "2020-01-22T12:25:40Z", "type": "commit"}, {"oid": "cebea17bc02fa7cc853eca20bbd1c24be0becaf4", "url": "https://github.com/dhis2/dhis2-core/commit/cebea17bc02fa7cc853eca20bbd1c24be0becaf4", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-22T13:29:49Z", "type": "commit"}, {"oid": "a9afdcfe1afdbb3de691722b36dc4b40c0c2cbce", "url": "https://github.com/dhis2/dhis2-core/commit/a9afdcfe1afdbb3de691722b36dc4b40c0c2cbce", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-22T20:00:29Z", "type": "commit"}, {"oid": "a53610fbed5c7fab391a10b623b2be3d6f11563a", "url": "https://github.com/dhis2/dhis2-core/commit/a53610fbed5c7fab391a10b623b2be3d6f11563a", "message": "Clean up", "committedDate": "2020-01-23T09:04:02Z", "type": "commit"}, {"oid": "bb786f1c7730acf364a903cc5659844d808c9ec1", "url": "https://github.com/dhis2/dhis2-core/commit/bb786f1c7730acf364a903cc5659844d808c9ec1", "message": "Cleanup", "committedDate": "2020-01-23T09:16:55Z", "type": "commit"}, {"oid": "2cf442f6421c0b9cc038b60109e3786517d3040e", "url": "https://github.com/dhis2/dhis2-core/commit/2cf442f6421c0b9cc038b60109e3786517d3040e", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-23T10:00:57Z", "type": "commit"}, {"oid": "0e673b2b823cef4e4f1845dc46cb7a8fb19736ec", "url": "https://github.com/dhis2/dhis2-core/commit/0e673b2b823cef4e4f1845dc46cb7a8fb19736ec", "message": "Cleanup", "committedDate": "2020-01-23T10:26:38Z", "type": "commit"}, {"oid": "047a7240c2952183597193bb13824154c1b747d4", "url": "https://github.com/dhis2/dhis2-core/commit/047a7240c2952183597193bb13824154c1b747d4", "message": "Minor", "committedDate": "2020-01-23T10:59:01Z", "type": "commit"}, {"oid": "2ff43d3dc2cd2514e64093e8a76925d74e5a611e", "url": "https://github.com/dhis2/dhis2-core/commit/2ff43d3dc2cd2514e64093e8a76925d74e5a611e", "message": "Test", "committedDate": "2020-01-23T11:33:56Z", "type": "commit"}, {"oid": "e545c949932ee77dd93ff2ceceb3817252ac4f6d", "url": "https://github.com/dhis2/dhis2-core/commit/e545c949932ee77dd93ff2ceceb3817252ac4f6d", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-23T11:35:03Z", "type": "commit"}, {"oid": "96dc7e6ea1cd3ce8a133d94b4b2e18c800164917", "url": "https://github.com/dhis2/dhis2-core/commit/96dc7e6ea1cd3ce8a133d94b4b2e18c800164917", "message": "Add back getMultipleApprovalPermissions", "committedDate": "2020-01-23T16:12:11Z", "type": "commit"}, {"oid": "f1376e5829efac0f047b9983cd96b8bf5472ca49", "url": "https://github.com/dhis2/dhis2-core/commit/f1376e5829efac0f047b9983cd96b8bf5472ca49", "message": "Cleanup", "committedDate": "2020-01-23T16:26:52Z", "type": "commit"}, {"oid": "a23269fe2cead1df6f932f895b468be90b2919bf", "url": "https://github.com/dhis2/dhis2-core/commit/a23269fe2cead1df6f932f895b468be90b2919bf", "message": "Approval", "committedDate": "2020-01-23T21:04:54Z", "type": "commit"}, {"oid": "2f534c85d9922e80478d92f784017a018c3b0711", "url": "https://github.com/dhis2/dhis2-core/commit/2f534c85d9922e80478d92f784017a018c3b0711", "message": "Json", "committedDate": "2020-01-23T21:07:49Z", "type": "commit"}, {"oid": "f3792ddd3d50a31c8eb54fb020a36647d263d041", "url": "https://github.com/dhis2/dhis2-core/commit/f3792ddd3d50a31c8eb54fb020a36647d263d041", "message": "Minor", "committedDate": "2020-01-23T21:11:37Z", "type": "commit"}, {"oid": "2baddcf39b97b94c9ed3aed4cd69907b0e69b5d5", "url": "https://github.com/dhis2/dhis2-core/commit/2baddcf39b97b94c9ed3aed4cd69907b0e69b5d5", "message": "Minor", "committedDate": "2020-01-23T21:12:18Z", "type": "commit"}, {"oid": "8f7c468906434ba3bad968fd18449359010fa1d9", "url": "https://github.com/dhis2/dhis2-core/commit/8f7c468906434ba3bad968fd18449359010fa1d9", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-24T08:45:41Z", "type": "commit"}, {"oid": "fbc51fca50d3bb784bb432aeb01e974aa7cfd9fd", "url": "https://github.com/dhis2/dhis2-core/commit/fbc51fca50d3bb784bb432aeb01e974aa7cfd9fd", "message": "Password", "committedDate": "2020-01-24T13:21:50Z", "type": "commit"}, {"oid": "231e01d4cca4015990341d573c259c5c589bc065", "url": "https://github.com/dhis2/dhis2-core/commit/231e01d4cca4015990341d573c259c5c589bc065", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-01-24T20:52:03Z", "type": "commit"}, {"oid": "a664fc9534e070665498a9e750e0a260dedb0a62", "url": "https://github.com/dhis2/dhis2-core/commit/a664fc9534e070665498a9e750e0a260dedb0a62", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-02-10T10:55:12Z", "type": "commit"}, {"oid": "0904b5de641e3a8811f52aa6cc518c090f2197c9", "url": "https://github.com/dhis2/dhis2-core/commit/0904b5de641e3a8811f52aa6cc518c090f2197c9", "message": "Minor", "committedDate": "2020-02-20T11:49:06Z", "type": "commit"}, {"oid": "5fd5a6be10e312a26a77882c9698c7b1b7f8d02f", "url": "https://github.com/dhis2/dhis2-core/commit/5fd5a6be10e312a26a77882c9698c7b1b7f8d02f", "message": "Default rendering", "committedDate": "2020-02-20T13:04:26Z", "type": "commit"}, {"oid": "e78fa13d483df0f47039bec2e7a587da43377e15", "url": "https://github.com/dhis2/dhis2-core/commit/e78fa13d483df0f47039bec2e7a587da43377e15", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-02-20T13:08:53Z", "type": "commit"}, {"oid": "86dcf93d26b1550b08e0b436fc61422a7add1622", "url": "https://github.com/dhis2/dhis2-core/commit/86dcf93d26b1550b08e0b436fc61422a7add1622", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-02-20T13:16:52Z", "type": "commit"}, {"oid": "b572582fa50a23437019be43674341c77f7ee3e9", "url": "https://github.com/dhis2/dhis2-core/commit/b572582fa50a23437019be43674341c77f7ee3e9", "message": "Minor", "committedDate": "2020-02-20T17:16:47Z", "type": "commit"}, {"oid": "80a647bb8411d81127bc1be8a775ef735198bd0d", "url": "https://github.com/dhis2/dhis2-core/commit/80a647bb8411d81127bc1be8a775ef735198bd0d", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-02-20T17:17:43Z", "type": "commit"}, {"oid": "e13b5786f9ebc0f78270a38d0a0d0a9cdfd16d06", "url": "https://github.com/dhis2/dhis2-core/commit/e13b5786f9ebc0f78270a38d0a0d0a9cdfd16d06", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-02-20T18:18:49Z", "type": "commit"}, {"oid": "b03e56614fb72192db279f9c841660cc1bdccd1f", "url": "https://github.com/dhis2/dhis2-core/commit/b03e56614fb72192db279f9c841660cc1bdccd1f", "message": "Approval app", "committedDate": "2020-02-20T19:52:41Z", "type": "commit"}, {"oid": "a73a03472acdd0cd0213fee71ba2f5d05329ab28", "url": "https://github.com/dhis2/dhis2-core/commit/a73a03472acdd0cd0213fee71ba2f5d05329ab28", "message": "Minor", "committedDate": "2020-02-20T20:00:46Z", "type": "commit"}, {"oid": "0ba5aa9cd0033e6259bd2f5e01d9d7ea1e481d84", "url": "https://github.com/dhis2/dhis2-core/commit/0ba5aa9cd0033e6259bd2f5e01d9d7ea1e481d84", "message": "Minor", "committedDate": "2020-02-20T20:11:58Z", "type": "commit"}, {"oid": "2484f4b8865258d24eca5615ab2ce300fd7c6b5e", "url": "https://github.com/dhis2/dhis2-core/commit/2484f4b8865258d24eca5615ab2ce300fd7c6b5e", "message": "Icon", "committedDate": "2020-02-20T20:14:29Z", "type": "commit"}, {"oid": "d5ab948ec9e86645c7919bfb9125faf9891383ff", "url": "https://github.com/dhis2/dhis2-core/commit/d5ab948ec9e86645c7919bfb9125faf9891383ff", "message": "Data set report", "committedDate": "2020-02-20T20:22:31Z", "type": "commit"}, {"oid": "9c70f7dc4ec54dd88cb8b3439e97281f0d4ef5d2", "url": "https://github.com/dhis2/dhis2-core/commit/9c70f7dc4ec54dd88cb8b3439e97281f0d4ef5d2", "message": "Translation", "committedDate": "2020-02-20T20:55:37Z", "type": "commit"}, {"oid": "772a35c26522da90b9260f44a076ec9d857f6f81", "url": "https://github.com/dhis2/dhis2-core/commit/772a35c26522da90b9260f44a076ec9d857f6f81", "message": "Rename folder", "committedDate": "2020-02-20T21:00:56Z", "type": "commit"}, {"oid": "88697881b29e9a397164d2d417d6849499301b6a", "url": "https://github.com/dhis2/dhis2-core/commit/88697881b29e9a397164d2d417d6849499301b6a", "message": "Add back data set report", "committedDate": "2020-02-21T07:07:37Z", "type": "commit"}, {"oid": "92c99c52588cb0c5be5901ec9a2e0a221541ee73", "url": "https://github.com/dhis2/dhis2-core/commit/92c99c52588cb0c5be5901ec9a2e0a221541ee73", "message": "Data set report", "committedDate": "2020-02-21T07:31:03Z", "type": "commit"}, {"oid": "8f6e173ae313b3298b4fd8bb40b19d7f0a9378b8", "url": "https://github.com/dhis2/dhis2-core/commit/8f6e173ae313b3298b4fd8bb40b19d7f0a9378b8", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-02-21T10:15:42Z", "type": "commit"}, {"oid": "38da12efc83a91d75c15fc7f495707a99d7ecc7a", "url": "https://github.com/dhis2/dhis2-core/commit/38da12efc83a91d75c15fc7f495707a99d7ecc7a", "message": "Merge branch 'master' into lars-dev", "committedDate": "2020-02-26T11:09:29Z", "type": "commit"}, {"oid": "ea310bc51eb8006b5d356593c15d9e316af807b8", "url": "https://github.com/dhis2/dhis2-core/commit/ea310bc51eb8006b5d356593c15d9e316af807b8", "message": "Add property to query key", "committedDate": "2020-02-26T12:07:29Z", "type": "commit"}, {"oid": "00d6375361e2e4fd78694e0ed6bebb6c2d25a840", "url": "https://github.com/dhis2/dhis2-core/commit/00d6375361e2e4fd78694e0ed6bebb6c2d25a840", "message": "Add query key tests", "committedDate": "2020-02-26T12:27:06Z", "type": "commit"}, {"oid": "e716e02f453023c3c83b4562fcd990314acbe2fa", "url": "https://github.com/dhis2/dhis2-core/commit/e716e02f453023c3c83b4562fcd990314acbe2fa", "message": "Add license", "committedDate": "2020-02-26T12:44:05Z", "type": "commit"}, {"oid": "9a3c534e6d24de859352d9f28bcd4dc41bcf6cf7", "url": "https://github.com/dhis2/dhis2-core/commit/9a3c534e6d24de859352d9f28bcd4dc41bcf6cf7", "message": "Add test", "committedDate": "2020-02-26T12:58:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ4MTQ1Mg==", "url": "https://github.com/dhis2/dhis2-core/pull/4961#discussion_r384481452", "bodyText": "My only comment is regarding all the strings used through these changes.\nMaybe we should use enums or constants to make them more consistent and easier to maintain.", "author": "maikelarabori", "createdAt": "2020-02-26T13:10:56Z", "path": "dhis-2/dhis-api/src/main/java/org/hisp/dhis/common/BaseDimensionalObject.java", "diffHunk": "@@ -256,14 +256,14 @@ public String getKey()\n     {\n         QueryKey key = new QueryKey();\n \n-        key.add( getDimension() );\n-        getItems().forEach( e -> key.add( e.getDimensionItem() ) );\n+        key.add( \"dimension\", getDimension() );", "originalCommit": "9a3c534e6d24de859352d9f28bcd4dc41bcf6cf7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ4NTkxNg==", "url": "https://github.com/dhis2/dhis2-core/pull/4961#discussion_r384485916", "bodyText": "Right. The only issue is that we would need one for each property of data query and event query objects. It would tightly couple the QueryKey directly to the analytics objects. I think it is more viable to decouple it and accept strings.", "author": "larshelge", "createdAt": "2020-02-26T13:19:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ4MTQ1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ5MDU2Nw==", "url": "https://github.com/dhis2/dhis2-core/pull/4961#discussion_r384490567", "bodyText": "Revolving the conversation. No changes required.", "author": "maikelarabori", "createdAt": "2020-02-26T13:28:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ4MTQ1Mg=="}], "type": "inlineReview"}]}