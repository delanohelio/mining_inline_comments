{"pr_number": 5948, "pr_title": "feat: disallow user field expansion for metadata", "pr_createdAt": "2020-08-18T08:24:46Z", "pr_url": "https://github.com/dhis2/dhis2-core/pull/5948", "timeline": [{"oid": "306d789da52c84ad47843c7d6b49fdf4dd6945f7", "url": "https://github.com/dhis2/dhis2-core/commit/306d789da52c84ad47843c7d6b49fdf4dd6945f7", "message": "fix: don't expose uuid in json/xml for now", "committedDate": "2020-08-18T08:24:06Z", "type": "commit"}, {"oid": "6cc5d4c41b7f27e9dba46c18cdb299a3dfa3fe10", "url": "https://github.com/dhis2/dhis2-core/commit/6cc5d4c41b7f27e9dba46c18cdb299a3dfa3fe10", "message": "fix: switch from uuid => uid for UserDto, adds code", "committedDate": "2020-08-18T08:26:56Z", "type": "commit"}, {"oid": "f657d88eada77de6013d6632a60f6da9a85e9cb6", "url": "https://github.com/dhis2/dhis2-core/commit/f657d88eada77de6013d6632a60f6da9a85e9cb6", "message": "fix: check for uid instead of uuid in tests", "committedDate": "2020-08-18T08:43:04Z", "type": "commit"}, {"oid": "830605d9c2856dab5d6aff0c7183b4ec82ac031a", "url": "https://github.com/dhis2/dhis2-core/commit/830605d9c2856dab5d6aff0c7183b4ec82ac031a", "message": "test: check for uid", "committedDate": "2020-08-18T08:53:08Z", "type": "commit"}, {"oid": "016ef7a7662eb20b3db515358291de3eab5fcbbe", "url": "https://github.com/dhis2/dhis2-core/commit/016ef7a7662eb20b3db515358291de3eab5fcbbe", "message": "fix: use stable uuid for admin user", "committedDate": "2020-08-18T08:56:06Z", "type": "commit"}, {"oid": "eaab38f29a6a6ddf8eb985ca9b61d66269397efc", "url": "https://github.com/dhis2/dhis2-core/commit/eaab38f29a6a6ddf8eb985ca9b61d66269397efc", "message": "feat: wip support collections and UserPropertyTransformer", "committedDate": "2020-08-18T10:13:54Z", "type": "commit"}, {"oid": "e79dd9b781ad199a97d23777871867780de88a11", "url": "https://github.com/dhis2/dhis2-core/commit/e79dd9b781ad199a97d23777871867780de88a11", "message": "fix: npe check for user serialize", "committedDate": "2020-08-18T13:25:51Z", "type": "commit"}, {"oid": "7c307a693dd40ee19a9e5cc4c47b6f50f8c990e4", "url": "https://github.com/dhis2/dhis2-core/commit/7c307a693dd40ee19a9e5cc4c47b6f50f8c990e4", "message": "fix: update tracker validation test uids to be valid", "committedDate": "2020-08-18T14:27:11Z", "type": "commit"}, {"oid": "542ce522b516f7df81a0604ba33c6ceae9374fab", "url": "https://github.com/dhis2/dhis2-core/commit/542ce522b516f7df81a0604ba33c6ceae9374fab", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750", "committedDate": "2020-08-19T07:07:44Z", "type": "commit"}, {"oid": "d422bf5b14176e167477dc026cd9d5fae6f54c36", "url": "https://github.com/dhis2/dhis2-core/commit/d422bf5b14176e167477dc026cd9d5fae6f54c36", "message": "test: property transformer collection tests", "committedDate": "2020-08-19T15:31:17Z", "type": "commit"}, {"oid": "870eede3cbd1a2a87cc7d0c44d1e16872dc8b4f9", "url": "https://github.com/dhis2/dhis2-core/commit/870eede3cbd1a2a87cc7d0c44d1e16872dc8b4f9", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750", "committedDate": "2020-08-19T15:31:31Z", "type": "commit"}, {"oid": "dd14c720a91fe4c54ee8a4081038845a2f13f401", "url": "https://github.com/dhis2/dhis2-core/commit/dd14c720a91fe4c54ee8a4081038845a2f13f401", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750", "committedDate": "2020-08-20T07:50:39Z", "type": "commit"}, {"oid": "3f0e32f3ca19cc078d792e985ed50b5ba96b05b4", "url": "https://github.com/dhis2/dhis2-core/commit/3f0e32f3ca19cc078d792e985ed50b5ba96b05b4", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750", "committedDate": "2020-08-21T15:08:42Z", "type": "commit"}, {"oid": "19a636d4d8416a84ce93e21a1c9355eddd95e063", "url": "https://github.com/dhis2/dhis2-core/commit/19a636d4d8416a84ce93e21a1c9355eddd95e063", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750", "committedDate": "2020-08-24T07:41:19Z", "type": "commit"}, {"oid": "9579fb5a66b92b58727b921b2054153438319ab3", "url": "https://github.com/dhis2/dhis2-core/commit/9579fb5a66b92b58727b921b2054153438319ab3", "message": "test: transform collection tests, including hack to make it kinda of work", "committedDate": "2020-08-24T14:54:01Z", "type": "commit"}, {"oid": "4681f41276dc3979d2de556627896f97edaea58e", "url": "https://github.com/dhis2/dhis2-core/commit/4681f41276dc3979d2de556627896f97edaea58e", "message": "fix: remove hack for transformed collections", "committedDate": "2020-08-25T06:53:31Z", "type": "commit"}, {"oid": "c0a1a32fb809efac1e3a69f642970e416a91cb7b", "url": "https://github.com/dhis2/dhis2-core/commit/c0a1a32fb809efac1e3a69f642970e416a91cb7b", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750", "committedDate": "2020-08-25T06:58:07Z", "type": "commit"}, {"oid": "ffe8b534c676e99da0fc9ac4bdb62273e1a60352", "url": "https://github.com/dhis2/dhis2-core/commit/ffe8b534c676e99da0fc9ac4bdb62273e1a60352", "message": "fix: remove collection transformer test for now", "committedDate": "2020-08-25T08:56:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzMTE4MA==", "url": "https://github.com/dhis2/dhis2-core/pull/5948#discussion_r476631180", "bodyText": "commented line", "author": "luciano-fiandesio", "createdAt": "2020-08-25T17:49:02Z", "path": "dhis-2/dhis-api/src/test/java/org/hisp/dhis/schema/transformer/UserPropertyTransformerTest.java", "diffHunk": "@@ -59,7 +59,8 @@ public void testUserTransform()\n         UserPropertyTransformer transformer = new UserPropertyTransformer();\n         UserPropertyTransformer.UserDto userDto = (UserPropertyTransformer.UserDto) transformer.transform( user );\n \n-        assertEquals( uuid.toString(), userDto.getId() );\n+        // assertEquals( uuid.toString(), userDto.getId() );", "originalCommit": "ffe8b534c676e99da0fc9ac4bdb62273e1a60352", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzODM5Nw==", "url": "https://github.com/dhis2/dhis2-core/pull/5948#discussion_r476638397", "bodyText": "Yes, we will enable this in 2.36 when users are only using uuid as identifiers.", "author": "mortenoh", "createdAt": "2020-08-25T18:01:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzMTE4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzMTcyNA==", "url": "https://github.com/dhis2/dhis2-core/pull/5948#discussion_r476631724", "bodyText": "commented out code", "author": "luciano-fiandesio", "createdAt": "2020-08-25T17:49:54Z", "path": "dhis-2/dhis-services/dhis-service-core/src/test/java/org/hisp/dhis/schema/transformers/UserPropertyTransformerTest.java", "diffHunk": "@@ -118,13 +136,53 @@ public void testJsonSerializer() throws JsonProcessingException\n \n         assertEquals( \"usernamea\", simple.getUser().getUserCredentials().getUsername() );\n         assertEquals( uuid, simple.getUser().getUserCredentials().getUuid() );\n+\n+        assertNotNull( simple.getUsers() );\n+        assertEquals( 4, simple.getUsers().size() );\n+\n+        /*\n+        FieldFilterParams params = new FieldFilterParams(", "originalCommit": "ffe8b534c676e99da0fc9ac4bdb62273e1a60352", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzODY3Mw==", "url": "https://github.com/dhis2/dhis2-core/pull/5948#discussion_r476638673", "bodyText": "Still working on this one :) was commented out to get it in before the soft freeze (this is for property transfor for collections)", "author": "mortenoh", "createdAt": "2020-08-25T18:01:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjYzMTcyNA=="}], "type": "inlineReview"}, {"oid": "11d924992dfab1f7e9a2b06b328064bb0a1eda03", "url": "https://github.com/dhis2/dhis2-core/commit/11d924992dfab1f7e9a2b06b328064bb0a1eda03", "message": "Merge remote-tracking branch 'origin/master' into DHIS2-8750", "committedDate": "2020-08-26T07:11:06Z", "type": "commit"}]}