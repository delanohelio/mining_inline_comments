{"pr_number": 4820, "pr_title": "Add BlockFailedDispenseEvent", "pr_createdAt": "2020-11-28T23:43:17Z", "pr_url": "https://github.com/PaperMC/Paper/pull/4820", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMDY4Mg==", "url": "https://github.com/PaperMC/Paper/pull/4820#discussion_r532120682", "bodyText": "Would personally move that to a protected method that returns if it should play the effect.\nprotected boolean triggerBlockFailedDispenseEvent(BlockPosition blockPosition)..\nAnd call it in the BlockDropper as well.", "author": "yannicklamprecht", "createdAt": "2020-11-28T23:53:55Z", "path": "Spigot-Server-Patches/0604-Implemented-BlockFailedDispenseEvent.patch", "diffHunk": "@@ -0,0 +1,46 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: TheViperShow <29604693+TheViperShow@users.noreply.github.com>\n+Date: Wed, 22 Apr 2020 09:40:38 +0200\n+Subject: [PATCH] Implemented BlockFailedDispenseEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/BlockDispenser.java b/src/main/java/net/minecraft/server/BlockDispenser.java\n+index c239265581972d67c7567d7545d62499ebadd195..08f16fe32c12cb22ee5d793ac40b83c9398faf74 100644\n+--- a/src/main/java/net/minecraft/server/BlockDispenser.java\n++++ b/src/main/java/net/minecraft/server/BlockDispenser.java\n+@@ -48,7 +48,14 @@ public class BlockDispenser extends BlockTileEntity {\n+         int i = tileentitydispenser.h();\n+ \n+         if (i < 0) {\n+-            worldserver.triggerEffect(1001, blockposition, 0);\n++            // Paper start - BlockFailedDispenseEvent is called here\n++            org.bukkit.block.Block block = worldserver.getWorld().getBlockAt(blockposition.getX(), blockposition.getY(), blockposition.getZ());", "originalCommit": "b3241e58ffe8daa417d485041a43e95d8df7d3ed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzI0ODA5MA==", "url": "https://github.com/PaperMC/Paper/pull/4820#discussion_r533248090", "bodyText": "yeah right, this should go into CraftEventFactory, will do that later", "author": "MiniDigger", "createdAt": "2020-12-01T09:52:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjEyMDY4Mg=="}], "type": "inlineReview"}, {"oid": "79067c9aff5fd1cb81f9455d60bb795b8fccf182", "url": "https://github.com/PaperMC/Paper/commit/79067c9aff5fd1cb81f9455d60bb795b8fccf182", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>", "committedDate": "2020-12-02T23:36:18Z", "type": "forcePushed"}, {"oid": "3d076eed418e40de90771933563f2d273f629bbe", "url": "https://github.com/PaperMC/Paper/commit/3d076eed418e40de90771933563f2d273f629bbe", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>", "committedDate": "2021-01-03T19:30:20Z", "type": "forcePushed"}, {"oid": "c5da794766ffa280add97ec759ffff7d67be3eb7", "url": "https://github.com/PaperMC/Paper/commit/c5da794766ffa280add97ec759ffff7d67be3eb7", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>", "committedDate": "2021-01-03T19:35:30Z", "type": "commit"}, {"oid": "c5da794766ffa280add97ec759ffff7d67be3eb7", "url": "https://github.com/PaperMC/Paper/commit/c5da794766ffa280add97ec759ffff7d67be3eb7", "message": "Add BlockFailedDispenseEvent\n\nCo-authored-by: MiniDigger <admin@minidigger.me>", "committedDate": "2021-01-03T19:35:30Z", "type": "forcePushed"}]}