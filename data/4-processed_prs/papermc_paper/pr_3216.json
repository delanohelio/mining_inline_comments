{"pr_number": 3216, "pr_title": "Fix Potion#toItemStack swapping the extended and upgraded constructor values", "pr_createdAt": "2020-04-24T22:56:10Z", "pr_url": "https://github.com/PaperMC/Paper/pull/3216", "timeline": [{"oid": "41191e90927b29dcc5f8b8b8dd61a126167d3e55", "url": "https://github.com/PaperMC/Paper/commit/41191e90927b29dcc5f8b8b8dd61a126167d3e55", "message": "Fix Potion#toItemStack swapping the extended and upgraded constructor values", "committedDate": "2020-04-24T22:54:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwNzQ5Mw==", "url": "https://github.com/PaperMC/Paper/pull/3216#discussion_r414907493", "bodyText": "// Paper", "author": "electronicboy", "createdAt": "2020-04-24T22:57:48Z", "path": "Spigot-API-Patches/0199-Fix-Potion-toItemStack-swapping-the-extended-and-upg.patch", "diffHunk": "@@ -0,0 +1,24 @@\n+From 18d5937e2112275841eabeabf264404b31c0a687 Mon Sep 17 00:00:00 2001\n+From: Wesley Smith <me@wesjd.net>\n+Date: Fri, 24 Apr 2020 18:30:26 -0400\n+Subject: [PATCH] Fix Potion#toItemStack swapping the extended and upgraded\n+ constructor values.\n+\n+While the Potion class is deprecated, it is still used in some plugins for cross-version potion handling. This issue has existed for a long time, and has caused many heaches along the way.\n+\n+diff --git a/src/main/java/org/bukkit/potion/Potion.java b/src/main/java/org/bukkit/potion/Potion.java\n+index b9dbbfd0..b9fcda22 100644\n+--- a/src/main/java/org/bukkit/potion/Potion.java\n++++ b/src/main/java/org/bukkit/potion/Potion.java\n+@@ -267,7 +267,7 @@ public class Potion {\n+         }\n+         ItemStack itemStack = new ItemStack(material, amount);\n+         PotionMeta meta = (PotionMeta) itemStack.getItemMeta();\n+-        meta.setBasePotionData(new PotionData(type, level == 2, extended));\n++        meta.setBasePotionData(new PotionData(type, extended, level == 2));", "originalCommit": "41191e90927b29dcc5f8b8b8dd61a126167d3e55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "894a431699d71a7c984aab72de3ee3b742117fb2", "url": "https://github.com/PaperMC/Paper/commit/894a431699d71a7c984aab72de3ee3b742117fb2", "message": "add paper comment", "committedDate": "2020-04-24T23:00:13Z", "type": "commit"}]}