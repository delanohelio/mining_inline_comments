{"pr_number": 2819, "pr_title": "Add effect to block break naturally", "pr_createdAt": "2020-01-02T18:39:29Z", "pr_url": "https://github.com/PaperMC/Paper/pull/2819", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjU4MTQyMw==", "url": "https://github.com/PaperMC/Paper/pull/2819#discussion_r362581423", "bodyText": "magic numbers are pretty scary", "author": "Spottedleaf", "createdAt": "2020-01-02T18:40:51Z", "path": "Spigot-Server-Patches/0420-Add-effect-to-block-break-naturally.patch", "diffHunk": "@@ -0,0 +1,34 @@\n+From f59a300db3dba8d827fe78eb0207fb7a32cbf612 Mon Sep 17 00:00:00 2001\n+From: William Blake Galbreath <Blake.Galbreath@GMail.com>\n+Date: Thu, 2 Jan 2020 12:25:07 -0600\n+Subject: [PATCH] Add effect to block break naturally\n+\n+\n+diff --git a/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java b/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java\n+index a667e58ed..f6aa78e9e 100644\n+--- a/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java\n++++ b/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java\n+@@ -607,12 +607,20 @@ public class CraftBlock implements Block {\n+ \n+     @Override\n+     public boolean breakNaturally(ItemStack item) {\n++        // Paper start\n++        return breakNaturally(item, false);\n++    }\n++\n++    @Override\n++    public boolean breakNaturally(ItemStack item, boolean triggerEffect) {\n++        // Paper end\n+         // Order matters here, need to drop before setting to air so skulls can get their data\n+         net.minecraft.server.Block block = this.getNMSBlock();\n+         boolean result = false;\n+ \n+         if (block != null && block != Blocks.AIR) {\n+             net.minecraft.server.Block.dropItems(getNMS(), world.getMinecraftWorld(), position, world.getTileEntity(position), null, CraftItemStack.asNMSCopy(item));\n++            if (triggerEffect) world.triggerEffect(2001, position, net.minecraft.server.Block.getCombinedId(block.getBlockData())); // Paper", "originalCommit": "9b72f34c100933655e74316c4d0a8003cc27f00f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "daccd672b1ec6792920f0ef084d2a47d680929d3", "url": "https://github.com/PaperMC/Paper/commit/daccd672b1ec6792920f0ef084d2a47d680929d3", "message": "Add effect to block break naturally", "committedDate": "2020-01-19T02:05:24Z", "type": "commit"}, {"oid": "e96f0de586c15fb15fd5dffb78e60c08060135a3", "url": "https://github.com/PaperMC/Paper/commit/e96f0de586c15fb15fd5dffb78e60c08060135a3", "message": "Magic numbers are scary", "committedDate": "2020-01-19T02:07:29Z", "type": "commit"}]}