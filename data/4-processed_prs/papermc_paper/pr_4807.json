{"pr_number": 4807, "pr_title": "Added PlayerLoomPatternSelectEvent", "pr_createdAt": "2020-11-26T00:37:58Z", "pr_url": "https://github.com/PaperMC/Paper/pull/4807", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg3MzQ0MA==", "url": "https://github.com/PaperMC/Paper/pull/4807#discussion_r530873440", "bodyText": "can we get an obf helper here?", "author": "MiniDigger", "createdAt": "2020-11-26T09:06:53Z", "path": "Spigot-Server-Patches/0602-Added-PlayerLoomPatternSelectEvent.patch", "diffHunk": "@@ -0,0 +1,54 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: Jake Potrebic <jake.m.potrebic@gmail.com>\n+Date: Wed, 25 Nov 2020 16:33:27 -0800\n+Subject: [PATCH] Added PlayerLoomPatternSelectEvent\n+\n+\n+diff --git a/src/main/java/net/minecraft/server/ContainerLoom.java b/src/main/java/net/minecraft/server/ContainerLoom.java\n+index 1fe21ca13a1eecb64cb2d3f4f18993e181d26ae2..b497af67338fc78121ad05bf00ac2f30c4712d88 100644\n+--- a/src/main/java/net/minecraft/server/ContainerLoom.java\n++++ b/src/main/java/net/minecraft/server/ContainerLoom.java\n+@@ -6,6 +6,7 @@ import org.bukkit.craftbukkit.inventory.CraftInventoryLoom;\n+ import org.bukkit.craftbukkit.inventory.CraftInventoryView;\n+ import org.bukkit.entity.Player;\n+ // CraftBukkit end\n++import io.papermc.paper.event.player.PlayerLoomPatternSelectEvent; // Paper\n+ \n+ public class ContainerLoom extends Container {\n+ \n+@@ -144,7 +145,22 @@ public class ContainerLoom extends Container {\n+     @Override\n+     public boolean a(EntityHuman entityhuman, int i) {\n+         if (i > 0 && i <= EnumBannerPatternType.R) {\n+-            this.d.set(i);\n++            // Paper start\n++            int enumBannerPatternTypeOrdinal = i;\n++            PlayerLoomPatternSelectEvent event = new PlayerLoomPatternSelectEvent((Player) entityhuman.getBukkitEntity(), ((CraftInventoryLoom) getBukkitView().getTopInventory()), org.bukkit.block.banner.PatternType.getByIdentifier(EnumBannerPatternType.values()[i].getIdentifier()));\n++            if (!event.callEvent()) {\n++                ((Player) entityhuman.getBukkitEntity()).updateInventory();\n++                return false;\n++            }\n++            for (EnumBannerPatternType nms : EnumBannerPatternType.values()) {\n++                if (event.getPatternType().getIdentifier().equals(nms.getIdentifier())) {\n++                    enumBannerPatternTypeOrdinal = nms.ordinal();\n++                    break;\n++                }\n++            }\n++            ((Player) entityhuman.getBukkitEntity()).updateInventory();\n++            this.d.set(enumBannerPatternTypeOrdinal);", "originalCommit": "82c531166ca4ceba301f4dfcc39daeaa6c204701", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTIxMzc4Mw==", "url": "https://github.com/PaperMC/Paper/pull/4807#discussion_r531213783", "bodyText": "Done", "author": "Machine-Maker", "createdAt": "2020-11-26T20:23:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDg3MzQ0MA=="}], "type": "inlineReview"}, {"oid": "8ee2d2ac779251bb0995e980cab6f673575bee01", "url": "https://github.com/PaperMC/Paper/commit/8ee2d2ac779251bb0995e980cab6f673575bee01", "message": "Added PlayerLoomPatternSelectEvent", "committedDate": "2021-01-04T19:33:39Z", "type": "commit"}, {"oid": "8ee2d2ac779251bb0995e980cab6f673575bee01", "url": "https://github.com/PaperMC/Paper/commit/8ee2d2ac779251bb0995e980cab6f673575bee01", "message": "Added PlayerLoomPatternSelectEvent", "committedDate": "2021-01-04T19:33:39Z", "type": "forcePushed"}]}