{"pr_number": 3129, "pr_title": "Add API MinecraftServer#isStopping", "pr_createdAt": "2020-04-11T01:58:52Z", "pr_url": "https://github.com/PaperMC/Paper/pull/3129", "timeline": [{"oid": "6771c682ab48892578ed2a62c2511cb2bc6e7769", "url": "https://github.com/PaperMC/Paper/commit/6771c682ab48892578ed2a62c2511cb2bc6e7769", "message": "Expose MinecraftServer#isRunning", "committedDate": "2020-04-11T01:42:15Z", "type": "commit"}, {"oid": "09c8f0273dce5ce1c8e9c2faa737d55ee825591d", "url": "https://github.com/PaperMC/Paper/commit/09c8f0273dce5ce1c8e9c2faa737d55ee825591d", "message": "License under MIT", "committedDate": "2020-04-11T02:01:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwMzY2NA==", "url": "https://github.com/PaperMC/Paper/pull/3129#discussion_r407003664", "bodyText": "Since this is on the Server interface. This seems redundant to me. isRunning() - I think would be sufficient.\n(I have no problem with it mentioning Server in the Bukkit class though.)", "author": "chickeneer", "createdAt": "2020-04-11T02:05:04Z", "path": "Spigot-API-Patches/0193-Expose-MinecraftServer-isRunning.patch", "diffHunk": "@@ -0,0 +1,47 @@\n+From 0f38ed2b2376a7728b1251f5ef0fd80bde967e70 Mon Sep 17 00:00:00 2001\n+From: JRoy <joshroy126@gmail.com>\n+Date: Fri, 10 Apr 2020 21:24:35 -0400\n+Subject: [PATCH] Expose MinecraftServer#isRunning\n+\n+This allows for plugins to detect if the server is actually turning off in onDisable rather than just plugins reloading.\n+\n+diff --git a/src/main/java/org/bukkit/Bukkit.java b/src/main/java/org/bukkit/Bukkit.java\n+index b9973406..791ce81a 100644\n+--- a/src/main/java/org/bukkit/Bukkit.java\n++++ b/src/main/java/org/bukkit/Bukkit.java\n+@@ -1661,6 +1661,15 @@ public final class Bukkit {\n+     public static int getCurrentTick() {\n+         return server.getCurrentTick();\n+     }\n++\n++    /**\n++     * Checks if the server is still running (not being shutdown).\n++     *\n++     * @return true if server is not in the process of being shutdown\n++     */\n++    public static boolean isServerRunning() {\n++        return server.isServerRunning();\n++    }\n+     // Paper end\n+ \n+     @NotNull\n+diff --git a/src/main/java/org/bukkit/Server.java b/src/main/java/org/bukkit/Server.java\n+index 80f9abdc..14c266fa 100644\n+--- a/src/main/java/org/bukkit/Server.java\n++++ b/src/main/java/org/bukkit/Server.java\n+@@ -1455,5 +1455,12 @@ public interface Server extends PluginMessageRecipient {\n+      * @return Current tick\n+      */\n+     int getCurrentTick();\n++\n++    /**\n++     * Checks if the server is still running (not being shutdown).\n++     *\n++     * @return true if server is not in the process of being shutdown\n++     */\n++    boolean isServerRunning();", "originalCommit": "6771c682ab48892578ed2a62c2511cb2bc6e7769", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwMzg3NA==", "url": "https://github.com/PaperMC/Paper/pull/3129#discussion_r407003874", "bodyText": "Fair", "author": "JRoy", "createdAt": "2020-04-11T02:07:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwMzY2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwNjQzNw==", "url": "https://github.com/PaperMC/Paper/pull/3129#discussion_r407006437", "bodyText": "Actually you can't have this because for some reason you're required to have the same method name in both classes", "author": "JRoy", "createdAt": "2020-04-11T02:33:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwMzY2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwNjcyNw==", "url": "https://github.com/PaperMC/Paper/pull/3129#discussion_r407006727", "bodyText": "Yes they must match. If you want it to be called isRunning, it must be the same on both.", "author": "zachbr", "createdAt": "2020-04-11T02:36:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwMzY2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwNjgyNw==", "url": "https://github.com/PaperMC/Paper/pull/3129#discussion_r407006827", "bodyText": "In that case, isServerRunning sounds better to make it clear what's running", "author": "JRoy", "createdAt": "2020-04-11T02:37:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwMzY2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwNjgzOA==", "url": "https://github.com/PaperMC/Paper/pull/3129#discussion_r407006838", "bodyText": "I'll let someone else weigh in from here. I would still rather it be isRunning than isServerRunning. But I am just one.", "author": "chickeneer", "createdAt": "2020-04-11T02:37:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwMzY2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAxMDUzMw==", "url": "https://github.com/PaperMC/Paper/pull/3129#discussion_r407010533", "bodyText": "I can appreciate wanting to be clear with isServerRunning however Bukkit/Server already sort of imply that, so I think I'm leaning towards isRunning. Open to thoughts.\nEdit, ignore me.\n[10:21 PM] Z750: tbh, isStopping is the case that you'd want to change behavior for right?\n[10:22 PM] Z750: 9/10 times you care if its stopping, because most of the time its running\n[10:22 PM] Z750: by that metric, isStopping is the better name", "author": "zachbr", "createdAt": "2020-04-11T03:20:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAwMzY2NA=="}], "type": "inlineReview"}, {"oid": "d033359b4b31790d15e838f29f5931fc49736a7c", "url": "https://github.com/PaperMC/Paper/commit/d033359b4b31790d15e838f29f5931fc49736a7c", "message": "Rename method in Server", "committedDate": "2020-04-11T02:20:43Z", "type": "commit"}, {"oid": "871399a0d44e899a78109604d5f31569c633278e", "url": "https://github.com/PaperMC/Paper/commit/871399a0d44e899a78109604d5f31569c633278e", "message": "Revert \"Rename method in Server\"\n\nThis reverts commit d033359b4b31790d15e838f29f5931fc49736a7c.", "committedDate": "2020-04-11T02:31:23Z", "type": "commit"}, {"oid": "390e4f9f0a9080f305c1dffa3bad0ff31830d946", "url": "https://github.com/PaperMC/Paper/commit/390e4f9f0a9080f305c1dffa3bad0ff31830d946", "message": "Rename method again but this time it's a good name", "committedDate": "2020-04-11T03:31:26Z", "type": "commit"}, {"oid": "f7cabb54e0c08f0b607d5e2bddf0568c9301b55f", "url": "https://github.com/PaperMC/Paper/commit/f7cabb54e0c08f0b607d5e2bddf0568c9301b55f", "message": "Merge branch 'master' into feature/isServerRunning", "committedDate": "2020-04-11T05:50:50Z", "type": "commit"}]}