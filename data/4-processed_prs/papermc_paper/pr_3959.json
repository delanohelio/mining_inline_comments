{"pr_number": 3959, "pr_title": "Use title packet for actionbar methods", "pr_createdAt": "2020-07-19T21:16:22Z", "pr_url": "https://github.com/PaperMC/Paper/pull/3959", "timeline": [{"oid": "b1cc59a85b7e79a8a75bbad11a1147d759db6ba2", "url": "https://github.com/PaperMC/Paper/commit/b1cc59a85b7e79a8a75bbad11a1147d759db6ba2", "message": "Use title packet for actionbar methods", "committedDate": "2020-07-22T06:26:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODU3NzAzNw==", "url": "https://github.com/PaperMC/Paper/pull/3959#discussion_r458577037", "bodyText": "This is an API break. it should be CraftChatMessage.fromString() instead.", "author": "aikar", "createdAt": "2020-07-22T07:01:48Z", "path": "Spigot-Server-Patches/0131-String-based-Action-Bar-API.patch", "diffHunk": "@@ -18,17 +18,23 @@ index 275c1d2d1eb2649de9a9b5aece6e88c21362efba..d72ba7f76c42fd525a5b59a999a0c08e\n  \n      public static <K, V> Collector<Entry<? extends K, ? extends V>, ?, Map<K, V>> a() {\n diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java\n-index 9e9d054ed9d345eb7ab76ad9c3526889aeb220e3..e7c42fb4fd1235a934c16f4cccc1b1a66b3672a0 100644\n+index 9e9d054ed9d345eb7ab76ad9c3526889aeb220e3..abaeeea8ce0712d6ac8af938f2132a6e2afd7f45 100644\n --- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java\n +++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java\n-@@ -221,6 +221,18 @@ public class CraftPlayer extends CraftHumanEntity implements Player {\n+@@ -221,6 +221,24 @@ public class CraftPlayer extends CraftHumanEntity implements Player {\n      }\n  \n      // Paper start\n +    @Override\n++    public void sendActionBar(BaseComponent[] message) {\n++        if (getHandle().playerConnection == null) return;\n++        getHandle().playerConnection.sendPacket(new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.ACTIONBAR, message, -1, -1, -1));\n++    }\n++\n++    @Override\n +    public void sendActionBar(String message) {\n +        if (getHandle().playerConnection == null || message == null || message.isEmpty()) return;\n-+        getHandle().playerConnection.sendPacket(new PacketPlayOutChat(new net.minecraft.server.ChatComponentText(message), net.minecraft.server.ChatMessageType.GAME_INFO, SystemUtils.getNullUUID()));\n++        getHandle().playerConnection.sendPacket(new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.ACTIONBAR, new net.minecraft.server.ChatComponentText(message)));", "originalCommit": "b1cc59a85b7e79a8a75bbad11a1147d759db6ba2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7ab01faf751dcfbfc6b3d5ae22913edb7b9acb62", "url": "https://github.com/PaperMC/Paper/commit/7ab01faf751dcfbfc6b3d5ae22913edb7b9acb62", "message": "Use title packet for actionbar methods", "committedDate": "2020-07-22T07:51:35Z", "type": "commit"}, {"oid": "7ab01faf751dcfbfc6b3d5ae22913edb7b9acb62", "url": "https://github.com/PaperMC/Paper/commit/7ab01faf751dcfbfc6b3d5ae22913edb7b9acb62", "message": "Use title packet for actionbar methods", "committedDate": "2020-07-22T07:51:35Z", "type": "forcePushed"}]}