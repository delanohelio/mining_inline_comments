{"pr_number": 4590, "pr_title": "MC-29274: Fix Wither hostility towards players", "pr_createdAt": "2020-09-30T17:20:42Z", "pr_url": "https://github.com/PaperMC/Paper/pull/4590", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ1MTY4MQ==", "url": "https://github.com/PaperMC/Paper/pull/4590#discussion_r523451681", "bodyText": "Bottom of file", "author": "Proximyst", "createdAt": "2020-11-14T19:04:23Z", "path": "Spigot-Server-Patches/0582-MC-29274-Fix-Wither-hostility-towards-players.patch", "diffHunk": "@@ -0,0 +1,35 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: TheShermanTanker <tanksherman27@gmail.com>\n+Date: Thu, 1 Oct 2020 01:11:03 +0800\n+Subject: [PATCH] MC-29274: Fix Wither hostility towards players\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+index fbfea9e981bdc90d679d315b5e75ba01d3d396a0..9da5a43f14a66b9d7f56e21c168b8e0472d2e1e0 100644\n+--- a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n++++ b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+@@ -342,6 +342,12 @@ public class PaperWorldConfig {\n+         log(\"Parrots are unaffected by player movement: \" + parrotsHangOnBetter);\n+     }\n+\n++    public boolean fixWitherTargetingBug = false;", "originalCommit": "7d7fc1227c7263fcfdb9826b6b6692f7d68c920c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ1MTcxOA==", "url": "https://github.com/PaperMC/Paper/pull/4590#discussion_r523451718", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            +        log(\"Withers properly target Players: \" + fixWitherTargetingBug);\n          \n          \n            \n            +        log(\"Withers properly target players: \" + fixWitherTargetingBug);\n          \n      \n    \n    \n  \n\ninline change, you can commit via github UI", "author": "Proximyst", "createdAt": "2020-11-14T19:04:44Z", "path": "Spigot-Server-Patches/0582-MC-29274-Fix-Wither-hostility-towards-players.patch", "diffHunk": "@@ -0,0 +1,35 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: TheShermanTanker <tanksherman27@gmail.com>\n+Date: Thu, 1 Oct 2020 01:11:03 +0800\n+Subject: [PATCH] MC-29274: Fix Wither hostility towards players\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+index fbfea9e981bdc90d679d315b5e75ba01d3d396a0..9da5a43f14a66b9d7f56e21c168b8e0472d2e1e0 100644\n+--- a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n++++ b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+@@ -342,6 +342,12 @@ public class PaperWorldConfig {\n+         log(\"Parrots are unaffected by player movement: \" + parrotsHangOnBetter);\n+     }\n+\n++    public boolean fixWitherTargetingBug = false;\n++    private void witherSettings() {\n++        fixWitherTargetingBug = getBoolean(\"fix-wither-targeting-bug\", false);\n++        log(\"Withers properly target Players: \" + fixWitherTargetingBug);", "originalCommit": "7d7fc1227c7263fcfdb9826b6b6692f7d68c920c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ1MTczNw==", "url": "https://github.com/PaperMC/Paper/pull/4590#discussion_r523451737", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            +        if(this.world.paperConfig.fixWitherTargetingBug) this.targetSelector.a(2, new PathfinderGoalNearestAttackableTarget<>(this, EntityHuman.class, 0, false, false, null)); //Paper - Fix MC-29274\n          \n          \n            \n            +        if(this.world.paperConfig.fixWitherTargetingBug) this.targetSelector.a(2, new PathfinderGoalNearestAttackableTarget<>(this, EntityHuman.class, 0, false, false, null)); // Paper - Fix MC-29274", "author": "Proximyst", "createdAt": "2020-11-14T19:04:55Z", "path": "Spigot-Server-Patches/0582-MC-29274-Fix-Wither-hostility-towards-players.patch", "diffHunk": "@@ -0,0 +1,35 @@\n+From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001\n+From: TheShermanTanker <tanksherman27@gmail.com>\n+Date: Thu, 1 Oct 2020 01:11:03 +0800\n+Subject: [PATCH] MC-29274: Fix Wither hostility towards players\n+\n+\n+diff --git a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+index fbfea9e981bdc90d679d315b5e75ba01d3d396a0..9da5a43f14a66b9d7f56e21c168b8e0472d2e1e0 100644\n+--- a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n++++ b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java\n+@@ -342,6 +342,12 @@ public class PaperWorldConfig {\n+         log(\"Parrots are unaffected by player movement: \" + parrotsHangOnBetter);\n+     }\n+\n++    public boolean fixWitherTargetingBug = false;\n++    private void witherSettings() {\n++        fixWitherTargetingBug = getBoolean(\"fix-wither-targeting-bug\", false);\n++        log(\"Withers properly target Players: \" + fixWitherTargetingBug);\n++    }\n++\n+     public boolean disableCreeperLingeringEffect;\n+     private void setDisableCreeperLingeringEffect() {\n+         disableCreeperLingeringEffect = getBoolean(\"disable-creeper-lingering-effect\", false);\n+diff --git a/src/main/java/net/minecraft/server/EntityWither.java b/src/main/java/net/minecraft/server/EntityWither.java\n+index 29bb74e51e73ab5b1ccc814b6599e0baf4d8094c..0614f3cc8a31198e49c5e3a8563c79a9f9ce6fc9 100644\n+--- a/src/main/java/net/minecraft/server/EntityWither.java\n++++ b/src/main/java/net/minecraft/server/EntityWither.java\n+@@ -49,6 +49,7 @@ public class EntityWither extends EntityMonster implements IRangedEntity {\n+         this.goalSelector.a(6, new PathfinderGoalLookAtPlayer(this, EntityHuman.class, 8.0F));\n+         this.goalSelector.a(7, new PathfinderGoalRandomLookaround(this));\n+         this.targetSelector.a(1, new PathfinderGoalHurtByTarget(this, new Class[0]));\n++        if(this.world.paperConfig.fixWitherTargetingBug) this.targetSelector.a(2, new PathfinderGoalNearestAttackableTarget<>(this, EntityHuman.class, 0, false, false, null)); //Paper - Fix MC-29274", "originalCommit": "7d7fc1227c7263fcfdb9826b6b6692f7d68c920c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0e24a7993830d76cd2681e35fbb828b2e1a27cf1", "url": "https://github.com/PaperMC/Paper/commit/0e24a7993830d76cd2681e35fbb828b2e1a27cf1", "message": "MC-29274: Fix Wither hostility towards players", "committedDate": "2021-03-03T20:31:59Z", "type": "commit"}]}