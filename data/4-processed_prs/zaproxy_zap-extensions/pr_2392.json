{"pr_number": 2392, "pr_title": "Create Common Library add-on", "pr_createdAt": "2020-05-14T22:59:57Z", "pr_url": "https://github.com/zaproxy/zap-extensions/pull/2392", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3NzAzNQ==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425477035", "bodyText": "Start with 1.0.0 already?", "author": "thc202", "createdAt": "2020-05-14T23:02:24Z", "path": "addOns/commonlib/commonlib.gradle.kts", "diffHunk": "@@ -0,0 +1,128 @@\n+import org.zaproxy.gradle.addon.AddOnStatus\n+\n+plugins {\n+    `maven-publish`\n+    signing\n+}\n+\n+group = \"org.zaproxy.addon\"\n+\n+version = \"0.1.0\"", "originalCommit": "a1ccb6bdfc61e2965ae4ea1933598a486339b8d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3OTU1Nw==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425479557", "bodyText": "I think it'd be fine to start with 1.0.0", "author": "kingthorin", "createdAt": "2020-05-14T23:10:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3NzAzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3NzA5MA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425477090", "bodyText": "Does it really matter for this add-on? Should be changed to release?", "author": "thc202", "createdAt": "2020-05-14T23:02:33Z", "path": "addOns/commonlib/commonlib.gradle.kts", "diffHunk": "@@ -0,0 +1,128 @@\n+import org.zaproxy.gradle.addon.AddOnStatus\n+\n+plugins {\n+    `maven-publish`\n+    signing\n+}\n+\n+group = \"org.zaproxy.addon\"\n+\n+version = \"0.1.0\"\n+description = \"A common library, for use by other add-ons.\"\n+\n+zapAddOn {\n+    addOnName.set(\"Common Library\")\n+    addOnStatus.set(AddOnStatus.ALPHA)", "originalCommit": "a1ccb6bdfc61e2965ae4ea1933598a486339b8d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3OTYzNg==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425479636", "bodyText": "+1 for release", "author": "kingthorin", "createdAt": "2020-05-14T23:11:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3NzA5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3NzM3Mg==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425477372", "bodyText": "This is using the version that was in the sharedutils project, should we bump to 2.9.0?", "author": "thc202", "createdAt": "2020-05-14T23:03:22Z", "path": "addOns/commonlib/commonlib.gradle.kts", "diffHunk": "@@ -0,0 +1,128 @@\n+import org.zaproxy.gradle.addon.AddOnStatus\n+\n+plugins {\n+    `maven-publish`\n+    signing\n+}\n+\n+group = \"org.zaproxy.addon\"\n+\n+version = \"0.1.0\"\n+description = \"A common library, for use by other add-ons.\"\n+\n+zapAddOn {\n+    addOnName.set(\"Common Library\")\n+    addOnStatus.set(AddOnStatus.ALPHA)\n+    zapVersion.set(\"2.9.0\")\n+\n+    manifest {\n+        author.set(\"ZAP Dev Team\")\n+\n+        helpSet {\n+            baseName.set(\"help%LC%.helpset\")\n+            localeToken.set(\"%LC%\")\n+        }\n+    }\n+}\n+\n+dependencies {\n+    zap(\"org.zaproxy:zap:2.7.0\")", "originalCommit": "a1ccb6bdfc61e2965ae4ea1933598a486339b8d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3OTc2Mw==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425479763", "bodyText": "I think that was just a timing thing. I'm fine with going to 2.9.0", "author": "kingthorin", "createdAt": "2020-05-14T23:11:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3NzM3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3NzUzMA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425477530", "bodyText": "Some classes lack JavaDoc, should we document all of them?", "author": "thc202", "createdAt": "2020-05-14T23:03:58Z", "path": "addOns/commonlib/commonlib.gradle.kts", "diffHunk": "@@ -0,0 +1,128 @@\n+import org.zaproxy.gradle.addon.AddOnStatus\n+\n+plugins {\n+    `maven-publish`\n+    signing\n+}\n+\n+group = \"org.zaproxy.addon\"\n+\n+version = \"0.1.0\"\n+description = \"A common library, for use by other add-ons.\"\n+\n+zapAddOn {\n+    addOnName.set(\"Common Library\")\n+    addOnStatus.set(AddOnStatus.ALPHA)\n+    zapVersion.set(\"2.9.0\")\n+\n+    manifest {\n+        author.set(\"ZAP Dev Team\")\n+\n+        helpSet {\n+            baseName.set(\"help%LC%.helpset\")\n+            localeToken.set(\"%LC%\")\n+        }\n+    }\n+}\n+\n+dependencies {\n+    zap(\"org.zaproxy:zap:2.7.0\")\n+\n+    implementation(\"commons-io:commons-io:2.6\")\n+    implementation(\"org.apache.commons:commons-csv:1.8\")\n+    implementation(\"org.apache.commons:commons-collections4:4.4\")\n+\n+    testImplementation(project(\":testutils\"))\n+}\n+\n+\n+val sourceSets = extensions.getByName(\"sourceSets\") as SourceSetContainer\n+\n+tasks.register<Jar>(\"javadocJar\") {", "originalCommit": "a1ccb6bdfc61e2965ae4ea1933598a486339b8d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3OTk0OA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425479948", "bodyText": "I guess all the public methods at least.\nI'm happy to do some of that after this is merged.", "author": "kingthorin", "createdAt": "2020-05-14T23:12:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3NzUzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjAzMjY2NA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r426032664", "bodyText": "There weren't that many, all public methods/classes should have JavaDoc also added the since tag.", "author": "thc202", "createdAt": "2020-05-15T20:31:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3NzUzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3ODQwOA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425478408", "bodyText": "Happy to revert these changes (just wanted to make BinList a singleton and thus default constructor private).", "author": "thc202", "createdAt": "2020-05-14T23:06:56Z", "path": "addOns/commonlib/src/main/java/org/zaproxy/addon/commonlib/PiiUtils.java", "diffHunk": "@@ -52,14 +47,4 @@ public static boolean isValidLuhn(String inStr) {\n         return (sum % 10) == 0;\n     }\n \n-    private static BinList getBinList() {", "originalCommit": "a1ccb6bdfc61e2965ae4ea1933598a486339b8d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ4MDMzMQ==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425480331", "bodyText": "That's totally fine with me. I did think about using some kind of Singleton pattern when I was building it but we've also had people rant about Singleton use within ZAP....<shrug> Guess I should have asked.", "author": "kingthorin", "createdAt": "2020-05-14T23:13:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3ODQwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg4ODM1MA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2392#discussion_r425888350", "bodyText": "In sharedutils it would have made no difference though, each add-on would have its own.\nProbably my rants, Control and friends? :)", "author": "thc202", "createdAt": "2020-05-15T15:43:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ3ODQwOA=="}], "type": "inlineReview"}, {"oid": "8eec3d63e6b83e3e17df9c516ef82a08f76d7e4a", "url": "https://github.com/zaproxy/zap-extensions/commit/8eec3d63e6b83e3e17df9c516ef82a08f76d7e4a", "message": "Create Common Library add-on\n\nMove the project `sharedutils` to an add-on to allow any ZAP add-on to\nuse/depend on it and to avoid duplicating the classes/resources/libs in\nall of them.\nMake classes that are not intended to be extended final and make some\nfields private final.\nChange `BinList` to a singleton and let it be accessed directly.\nAdd minimal help.\n\nThe add-on will be published to Maven Central with the following\ngroup/id:\n - Group: `org.zaproxy.addon`;\n - Id: `commonlib` (same as the add-on ID).\n\nUpdate add-ons that were already using the `sharedutils` project to\nuse/depend on the add-on.\n\nSigned-off-by: thc202 <thc202@gmail.com>", "committedDate": "2020-05-15T16:00:34Z", "type": "forcePushed"}, {"oid": "70ea3db9f08c7eedb5a4b6f603c61ae285658de1", "url": "https://github.com/zaproxy/zap-extensions/commit/70ea3db9f08c7eedb5a4b6f603c61ae285658de1", "message": "Create Common Library add-on\n\nMove the project `sharedutils` to an add-on to allow any ZAP add-on to\nuse/depend on it and to avoid duplicating the classes/resources/libs in\nall of them.\nMake classes that are not intended to be extended final and make some\nfields private final.\nChange `BinList` to a singleton and let it be accessed directly.\nAdd minimal help.\nRemove `SetCookieUtils`, a subset of `CookieUtils`.\nAdd JavaDoc to some classes/methods and add since JavaDoc tag.\n\nThe add-on will be published to Maven Central with the following\ngroup/id:\n - Group: `org.zaproxy.addon`;\n - Id: `commonlib` (same as the add-on ID).\n\nUpdate add-ons that were already using the `sharedutils` project to\nuse/depend on the add-on.\n\nSigned-off-by: thc202 <thc202@gmail.com>", "committedDate": "2020-05-15T20:27:56Z", "type": "forcePushed"}, {"oid": "f152667df3d17f177c7ee28b9de2d3593df3c0cd", "url": "https://github.com/zaproxy/zap-extensions/commit/f152667df3d17f177c7ee28b9de2d3593df3c0cd", "message": "Create Common Library add-on\n\nMove the project `sharedutils` to an add-on to allow any ZAP add-on to\nuse/depend on it and to avoid duplicating the classes/resources/libs in\nall of them.\nMake classes that are not intended to be extended final and make some\nfields private final.\nChange `BinList` to a singleton and let it be accessed directly.\nAdd minimal help.\nRemove `SetCookieUtils`, a subset of `CookieUtils`.\nAdd JavaDoc to some classes/methods and add since JavaDoc tag.\n\nThe add-on will be published to Maven Central with the following\ngroup/id:\n - Group: `org.zaproxy.addon`;\n - Id: `commonlib` (same as the add-on ID).\n\nUpdate add-ons that were already using the `sharedutils` project to\nuse/depend on the add-on.\n\nSigned-off-by: thc202 <thc202@gmail.com>", "committedDate": "2020-05-15T20:35:03Z", "type": "commit"}, {"oid": "f152667df3d17f177c7ee28b9de2d3593df3c0cd", "url": "https://github.com/zaproxy/zap-extensions/commit/f152667df3d17f177c7ee28b9de2d3593df3c0cd", "message": "Create Common Library add-on\n\nMove the project `sharedutils` to an add-on to allow any ZAP add-on to\nuse/depend on it and to avoid duplicating the classes/resources/libs in\nall of them.\nMake classes that are not intended to be extended final and make some\nfields private final.\nChange `BinList` to a singleton and let it be accessed directly.\nAdd minimal help.\nRemove `SetCookieUtils`, a subset of `CookieUtils`.\nAdd JavaDoc to some classes/methods and add since JavaDoc tag.\n\nThe add-on will be published to Maven Central with the following\ngroup/id:\n - Group: `org.zaproxy.addon`;\n - Id: `commonlib` (same as the add-on ID).\n\nUpdate add-ons that were already using the `sharedutils` project to\nuse/depend on the add-on.\n\nSigned-off-by: thc202 <thc202@gmail.com>", "committedDate": "2020-05-15T20:35:03Z", "type": "forcePushed"}]}