{"pr_number": 2580, "pr_title": "Added usage message in httpsinfo extension", "pr_createdAt": "2020-10-20T08:36:18Z", "pr_url": "https://github.com/zaproxy/zap-extensions/pull/2580", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzE3OA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r511037178", "bodyText": "This should be reverted, you might need to configure the IDE to not automatically do this change.", "author": "thc202", "createdAt": "2020-10-23T17:37:01Z", "path": "addOns/httpsInfo/src/main/java/org/zaproxy/zap/extension/httpsinfo/ExtensionHttpsInfo.java", "diffHunk": "@@ -19,22 +19,17 @@\n  */\n package org.zaproxy.zap.extension.httpsinfo;\n \n-import java.awt.CardLayout;\n-import java.awt.Component;\n+import java.awt.*;", "originalCommit": "854886335ef68ca5fee1dcb695c34d0ea7813ad4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTgyODk3MQ==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r511828971", "bodyText": "Okay I will correct these mistakes soon.", "author": "Infernalbronco", "createdAt": "2020-10-26T09:40:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzE3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzUxNw==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r511037517", "bodyText": "It's simpler if the same panel is returned for both cases, we can make use of the CardLayout to swap between the usage and the results panels. In which case we would no longer need UsagePanel, it would be simply a JPanel.\nThe usage should be shown after a new session.", "author": "thc202", "createdAt": "2020-10-23T17:37:39Z", "path": "addOns/httpsInfo/src/main/java/org/zaproxy/zap/extension/httpsinfo/ExtensionHttpsInfo.java", "diffHunk": "@@ -119,13 +134,18 @@ public void setVisible(Component component, boolean visible) {\n     }\n \n     protected AbstractPanel getHttpsInfoPanel() {\n-        if (httpsInfoPanel == null) {\n+        if (httpsInfoPanel == null && neededUsage) {", "originalCommit": "854886335ef68ca5fee1dcb695c34d0ea7813ad4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTgzMTAwOA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r511831008", "bodyText": "Okay could you elaborate more about the \"swap between usage and results panel\"? Do you want to have a tab for usage like other info tabs?", "author": "Infernalbronco", "createdAt": "2020-10-26T09:43:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzMyNDY0NQ==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r513324645", "bodyText": "No, the usage would only be shown when there are no results. The CardLayout allows a container to have several panels with only one being shown at a single time, that means you can easily swap between httpsInfoTabsPanel and usagePanel when needed (by using, e.g. CardLayout#next(Container)), rather than manually remove the current panel and add the other one.", "author": "thc202", "createdAt": "2020-10-28T10:13:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAzNzYwMw==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r514037603", "bodyText": "Initially when I start the httpsInfo extension it looks like this.\nThen when a user starts a scan then it is replaced by the result tab like below.\n\nIsn't this what are you trying to say?", "author": "Infernalbronco", "createdAt": "2020-10-29T07:01:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDA3MTg1NQ==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r514071855", "bodyText": "Yes, but the CardLayout comment is not about the behaviour itself but how it is implemented, making use of the CardLayout simplifies the swaps. (Note that we should also show the usage panel when the session is changed, as is it would mean removing and adding the panels again, instead of just calling next.)", "author": "thc202", "createdAt": "2020-10-29T08:12:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDExNDIzNA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r514114234", "bodyText": "Okay so do you want me to remove the getUsagePanel() and just add a text area in line 142?", "author": "Infernalbronco", "createdAt": "2020-10-29T09:23:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzUxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTExMTUzNA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r515111534", "bodyText": "The getter can be kept (and changed to use a plain JPanel). Yes, both panels should be added to the httpsInfoPanel at the same time (with usage added later), then show the next one (e.g. ((CardLayout) getHttpsInfoPanel().getLayout()).next(getHttpsInfoPanel())). In addTab and sessionChanged show/hide the usage panel accordingly (by calling the next method).", "author": "thc202", "createdAt": "2020-10-30T13:51:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzUxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzYzMA==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r511037630", "bodyText": "This needs to be internationalised, i.e. add the message to the Messages.properties file and then get it with Constant.messages.getString(...).", "author": "thc202", "createdAt": "2020-10-23T17:37:51Z", "path": "addOns/httpsInfo/src/main/java/org/zaproxy/zap/extension/httpsinfo/UsagePanel.java", "diffHunk": "@@ -0,0 +1,73 @@\n+/*\n+ * Zed Attack Proxy (ZAP) and its related class files.\n+ *\n+ * ZAP is an HTTP/HTTPS proxy for assessing web application security.\n+ *\n+ * Copyright 2020 The ZAP Development Team\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.zaproxy.zap.extension.httpsinfo;\n+\n+import java.awt.*;\n+import javax.swing.*;\n+import org.parosproxy.paros.extension.AbstractPanel;\n+import org.parosproxy.paros.extension.ViewDelegate;\n+import org.parosproxy.paros.model.Model;\n+import org.parosproxy.paros.view.View;\n+\n+public class UsagePanel extends AbstractPanel {\n+\n+    private static final long serialVersionUID = 2L;\n+    private final ViewDelegate view;\n+    private JPanel panel;\n+    private JTextArea tf;\n+\n+    public UsagePanel(View view) {\n+        super();\n+        this.view = view;\n+        initialize();\n+    }\n+\n+    private void initialize() {\n+        this.setLayout(new BorderLayout());\n+        if (Model.getSingleton().getOptionsParam().getViewParam().getWmUiHandlingOption() == 0) {\n+            this.setSize(600, 200);\n+        }\n+        this.add(getHistoryPanel(), java.awt.BorderLayout.CENTER);\n+    }\n+\n+    private javax.swing.JPanel getHistoryPanel() {\n+        if (panel == null) {\n+\n+            panel = new javax.swing.JPanel();\n+            panel.setLayout(new java.awt.BorderLayout());\n+            panel.setName(\"HTTPSInfo\");\n+\n+            panel.add(this.getTextArea());\n+        }\n+        return panel;\n+    }\n+\n+    private JTextArea getTextArea() {\n+        if (tf == null) {\n+            tf =\n+                    new JTextArea(\n+                            \"To start an HTTPS assessment choose 'Scan HTTPS Configuration' from the context menu (right click) on a Sites Tree or History entry\");", "originalCommit": "854886335ef68ca5fee1dcb695c34d0ea7813ad4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTgyOTQ3Mw==", "url": "https://github.com/zaproxy/zap-extensions/pull/2580#discussion_r511829473", "bodyText": "Okay I understand this and will make the changes and commit them soon.", "author": "Infernalbronco", "createdAt": "2020-10-26T09:41:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAzNzYzMA=="}], "type": "inlineReview"}, {"oid": "37dc92827eeb12485df9c8cf6542e9d383c56eb8", "url": "https://github.com/zaproxy/zap-extensions/commit/37dc92827eeb12485df9c8cf6542e9d383c56eb8", "message": "Added usage message in Httpsinfo extension\n\nShow panel with usage message when there are no results shown.\n\nSigned-off-by: Infernalbronco <akshay.98mall@gmail.com>", "committedDate": "2021-04-16T13:19:26Z", "type": "forcePushed"}, {"oid": "991065fc3a014eec75abb785f2112a4f2a472d6c", "url": "https://github.com/zaproxy/zap-extensions/commit/991065fc3a014eec75abb785f2112a4f2a472d6c", "message": "Added usage message in Httpsinfo extension\n\nShow panel with usage message when there are no results shown.\n\nSigned-off-by: Infernalbronco <akshay.98mall@gmail.com>", "committedDate": "2021-04-16T13:21:38Z", "type": "forcePushed"}, {"oid": "8cee4409e9dbec464d9687f1224d6f4891fa77af", "url": "https://github.com/zaproxy/zap-extensions/commit/8cee4409e9dbec464d9687f1224d6f4891fa77af", "message": "Added usage message in Httpsinfo extension\n\nShow panel with usage message when there are no results shown.\n\nSigned-off-by: Infernalbronco <akshay.98mall@gmail.com>", "committedDate": "2021-04-16T13:41:48Z", "type": "commit"}, {"oid": "8cee4409e9dbec464d9687f1224d6f4891fa77af", "url": "https://github.com/zaproxy/zap-extensions/commit/8cee4409e9dbec464d9687f1224d6f4891fa77af", "message": "Added usage message in Httpsinfo extension\n\nShow panel with usage message when there are no results shown.\n\nSigned-off-by: Infernalbronco <akshay.98mall@gmail.com>", "committedDate": "2021-04-16T13:41:48Z", "type": "forcePushed"}]}