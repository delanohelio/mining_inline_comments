{"pr_number": 1929, "pr_title": "LUCENE-9548: Apache repository publishing", "pr_createdAt": "2020-09-29T08:23:41Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1929", "timeline": [{"oid": "53a9b8ef750632a8d046f90902effe6f8e880a0f", "url": "https://github.com/apache/lucene-solr/commit/53a9b8ef750632a8d046f90902effe6f8e880a0f", "message": "LUCENE-9546: Configure Nori and Kuromoji generation lazily when java plugin is applied to the projects", "committedDate": "2020-09-29T07:41:36Z", "type": "commit"}, {"oid": "babe261d2a4aa0cb00931aab23769f4d84c7d1ca", "url": "https://github.com/apache/lucene-solr/commit/babe261d2a4aa0cb00931aab23769f4d84c7d1ca", "message": "Remove unused imports.", "committedDate": "2020-09-29T07:41:53Z", "type": "commit"}, {"oid": "83ccd7151836fb1e4a82b56e87263f1e5db182ab", "url": "https://github.com/apache/lucene-solr/commit/83ccd7151836fb1e4a82b56e87263f1e5db182ab", "message": "LUCENE-9547: Race condition in maven artifact configuration results in wrong group/ artifact name", "committedDate": "2020-09-29T07:42:56Z", "type": "commit"}, {"oid": "4e29942bec64d1822b6f0ef3a75f9bc01214910e", "url": "https://github.com/apache/lucene-solr/commit/4e29942bec64d1822b6f0ef3a75f9bc01214910e", "message": "LUCENE-9548: Apache repository publishing.", "committedDate": "2020-09-29T08:23:11Z", "type": "commit"}, {"oid": "60abdb93153069619be04a95774172b02bded5de", "url": "https://github.com/apache/lucene-solr/commit/60abdb93153069619be04a95774172b02bded5de", "message": "Merge remote-tracking branch 'origin/master' into LUCENE-9548", "committedDate": "2020-09-29T08:25:48Z", "type": "commit"}, {"oid": "8d97a43d2f687ebfcb95ab557ae87e71c78c717c", "url": "https://github.com/apache/lucene-solr/commit/8d97a43d2f687ebfcb95ab557ae87e71c78c717c", "message": "Add remaining POM information.", "committedDate": "2020-09-29T08:55:51Z", "type": "commit"}, {"oid": "c4f230aebbf25c29fc37de6dbded609945e91bec", "url": "https://github.com/apache/lucene-solr/commit/c4f230aebbf25c29fc37de6dbded609945e91bec", "message": "Merge remote-tracking branch 'origin/master' into LUCENE-9548", "committedDate": "2020-09-30T07:19:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzcyMDY0Mw==", "url": "https://github.com/apache/lucene-solr/pull/1929#discussion_r497720643", "bodyText": "This should be split by project?", "author": "madrob", "createdAt": "2020-09-30T18:36:25Z", "path": "gradle/maven/defaults-maven.gradle", "diffHunk": "@@ -102,29 +123,74 @@ configure(subprojects.findAll { it.path in rootProject.published }) { prj ->\n     gradle.projectsEvaluated {\n       publishing {\n         def configurePom = {\n-          name = \"Apache Solr/Lucene (${project.name})\"\n+          if (project.path.startsWith(\":solr\")) {\n+            name = \"Apache Solr (module: ${project.name})\"\n+            description = name\n+            url = 'https://lucene.apache.org/solr/'\n+          } else {\n+            name = \"Apache Lucene (module: ${project.name})\"\n+            description = name\n+            url = 'https://lucene.apache.org/'\n+          }\n+\n           licenses {\n             license {\n               name = 'Apache 2'\n               url = 'http://www.apache.org/licenses/LICENSE-2.0.txt'\n             }\n           }\n-        }\n \n-        publications {\n-          // JARS and sources, no javadocs (for local inspection only).\n-          jars(MavenPublication) {\n-            from components.java\n-            groupId = project.group\n-            artifactId = project.archivesBaseName\n+          inceptionYear = \"2000\"\n \n-            artifact sourcesJar\n+          issueManagement {\n+            system = \"JIRA\"\n+            url = \"https://issues.apache.org/jira/browse/LUCENE\"", "originalCommit": "c4f230aebbf25c29fc37de6dbded609945e91bec", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzc1NDI2Mg==", "url": "https://github.com/apache/lucene-solr/pull/1929#discussion_r497754262", "bodyText": "All of it should be project-dependent, really... But yes -- feel free to commit a patch.", "author": "dweiss", "createdAt": "2020-09-30T19:37:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzcyMDY0Mw=="}], "type": "inlineReview"}, {"oid": "a8b3624b004e5baa7f333036d8d8c924f02cc0c0", "url": "https://github.com/apache/lucene-solr/commit/a8b3624b004e5baa7f333036d8d8c924f02cc0c0", "message": "Merge remote-tracking branch 'origin/master' into LUCENE-9548", "committedDate": "2020-10-02T06:22:35Z", "type": "commit"}, {"oid": "d80a03e35d7c235706236f16a5910be1407e8552", "url": "https://github.com/apache/lucene-solr/commit/d80a03e35d7c235706236f16a5910be1407e8552", "message": "Split POM configuration into Solr and Lucene-specific parts. Changed Nexus credential access properties to those aligned with: https://cwiki.apache.org/confluence/display/INFRA/Gradle+Installations", "committedDate": "2020-10-02T06:32:38Z", "type": "commit"}, {"oid": "d6380a395aa733330e0c95d0066412a9a7a6e0d1", "url": "https://github.com/apache/lucene-solr/commit/d6380a395aa733330e0c95d0066412a9a7a6e0d1", "message": "Added shorter task aliases for publishing to local maven repository, local build folder (for inspection) and Apache snapshots repository.", "committedDate": "2020-10-02T06:56:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI0NjI5Nw==", "url": "https://github.com/apache/lucene-solr/pull/1929#discussion_r499246297", "bodyText": "Can't use the property defined before?: apacheNexusUrl", "author": "uschindler", "createdAt": "2020-10-04T13:22:46Z", "path": "gradle/maven/defaults-maven.gradle", "diffHunk": "@@ -76,7 +78,26 @@ configure(subprojects.findAll { it.path in rootProject.published }) { prj ->\n   apply plugin: 'signing'\n \n   publishing {\n-    // TODO: Add publishing repository details.\n+    repositories {\n+      maven {\n+        name = \"ApacheSnapshots\"\n+        url = \"https://repository.apache.org/content/repositories/snapshots\"", "originalCommit": "d6380a395aa733330e0c95d0066412a9a7a6e0d1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI0NjM0NA==", "url": "https://github.com/apache/lucene-solr/pull/1929#discussion_r499246344", "bodyText": "Maybe put this into separate file like maven-local.gradle?", "author": "uschindler", "createdAt": "2020-10-04T13:23:18Z", "path": "gradle/maven/defaults-maven.gradle", "diffHunk": "@@ -137,8 +254,17 @@ configure(subprojects.findAll { it.path in rootProject.published }) { prj ->\n         }\n       }\n \n+      // Add aliases of convention tasks with shorter names.\n+      task mavenToApacheSnapshots() {", "originalCommit": "d6380a395aa733330e0c95d0066412a9a7a6e0d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI2ODI5Ng==", "url": "https://github.com/apache/lucene-solr/pull/1929#discussion_r499268296", "bodyText": "Don't know if it makes sense. The \"local\" maven gradle config is there mostly so that I could review the artifacts without polluting my local Maven repo. It could be removed later. The rest of maven config does make sense as a single unit. Let's leave it for now and try to publish those snapshots. If needed, we can always change later.", "author": "dweiss", "createdAt": "2020-10-04T17:18:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI0NjM0NA=="}], "type": "inlineReview"}, {"oid": "a8a16fffca7e105e77d58044b9fcf0d16040cb14", "url": "https://github.com/apache/lucene-solr/commit/a8a16fffca7e105e77d58044b9fcf0d16040cb14", "message": "Merge remote-tracking branch 'origin/master' into LUCENE-9548", "committedDate": "2020-10-04T17:04:15Z", "type": "commit"}, {"oid": "fbe414dea91db8767166d4e236bfdae83ea81ed9", "url": "https://github.com/apache/lucene-solr/commit/fbe414dea91db8767166d4e236bfdae83ea81ed9", "message": "Use property for Apache Nexus repo.", "committedDate": "2020-10-04T17:05:57Z", "type": "commit"}]}