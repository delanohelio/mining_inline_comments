{"pr_number": 1288, "pr_title": "SOLR-14281: Make sharedLib configurable through SysProp", "pr_createdAt": "2020-02-25T23:15:19Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1288", "timeline": [{"oid": "16416da3f45085c6b40f873ba5563d709a97541a", "url": "https://github.com/apache/lucene-solr/commit/16416da3f45085c6b40f873ba5563d709a97541a", "message": "SOLR-14281: Make sharedLib configurable through SysProp and allow multiple comma separated paths", "committedDate": "2020-02-25T23:13:11Z", "type": "commit"}, {"oid": "c88ba714437620e80267c8bfa5449fcca4f1ff13", "url": "https://github.com/apache/lucene-solr/commit/c88ba714437620e80267c8bfa5449fcca4f1ff13", "message": "Various fixes", "committedDate": "2020-02-26T00:33:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ5ODE2Mg==", "url": "https://github.com/apache/lucene-solr/pull/1288#discussion_r384498162", "bodyText": "SysProp should by \"sys-prop\" or system property.  The way you capitalized it makes it seem like some class.", "author": "dsmiley", "createdAt": "2020-02-26T13:42:14Z", "path": "solr/CHANGES.txt", "diffHunk": "@@ -110,6 +110,9 @@ Improvements\n \n * SOLR-14114: Add WARN to Solr log that embedded ZK is not supported in production (janhoy)\n \n+* SOLR-14281: Make sharedLib configurable through SysProp and allow multiple comma separated paths.", "originalCommit": "c88ba714437620e80267c8bfa5449fcca4f1ff13", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgwNjU2Mg==", "url": "https://github.com/apache/lucene-solr/pull/1288#discussion_r384806562", "bodyText": "Re-phrased", "author": "janhoy", "createdAt": "2020-02-26T22:28:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ5ODE2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ5OTEyNA==", "url": "https://github.com/apache/lucene-solr/pull/1288#discussion_r384499124", "bodyText": "I'm almost certain we've got a utility that does this so that you don't have to define your regexp", "author": "dsmiley", "createdAt": "2020-02-26T13:43:55Z", "path": "solr/core/src/java/org/apache/solr/core/CoreContainer.java", "diffHunk": "@@ -607,19 +609,31 @@ public PackageStoreAPI getPackageStoreAPI() {\n   public void load() {\n     log.debug(\"Loading cores into CoreContainer [instanceDir={}]\", loader.getInstancePath());\n \n+    // Always add $SOLR_HOME/lib to the shared resource loader\n+    Set<String> libDirs = new HashSet<>();\n+    libDirs.add(\"lib\");\n+\n+    if (!StringUtils.isBlank(cfg.getSharedLibDirectory())) {\n+      List<String> sharedLibs = Arrays.asList(cfg.getSharedLibDirectory().split(\"\\\\s*,\\\\s*\"));", "originalCommit": "c88ba714437620e80267c8bfa5449fcca4f1ff13", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgwNzExMg==", "url": "https://github.com/apache/lucene-solr/pull/1288#discussion_r384807112", "bodyText": "I tried StrUtils.splitSmart() but we don't need the smartness of not splitting inside quotes etc, and it does not trim whitespace around comma. So I'll keep this unless you know about a better split-util somewhere.", "author": "janhoy", "createdAt": "2020-02-26T22:29:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ5OTEyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQ5OTUwNg==", "url": "https://github.com/apache/lucene-solr/pull/1288#discussion_r384499506", "bodyText": "Use LinkedHashSet", "author": "dsmiley", "createdAt": "2020-02-26T13:44:37Z", "path": "solr/core/src/java/org/apache/solr/core/CoreContainer.java", "diffHunk": "@@ -607,19 +609,31 @@ public PackageStoreAPI getPackageStoreAPI() {\n   public void load() {\n     log.debug(\"Loading cores into CoreContainer [instanceDir={}]\", loader.getInstancePath());\n \n+    // Always add $SOLR_HOME/lib to the shared resource loader\n+    Set<String> libDirs = new HashSet<>();", "originalCommit": "c88ba714437620e80267c8bfa5449fcca4f1ff13", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "125c9048da912194f295f13b0f8ae188f4834a95", "url": "https://github.com/apache/lucene-solr/commit/125c9048da912194f295f13b0f8ae188f4834a95", "message": "Address review comments", "committedDate": "2020-02-26T22:27:57Z", "type": "commit"}, {"oid": "3787e143a09f11c55b85ab785aac219aac246a2f", "url": "https://github.com/apache/lucene-solr/commit/3787e143a09f11c55b85ab785aac219aac246a2f", "message": "Fix precommit", "committedDate": "2020-02-27T07:54:41Z", "type": "commit"}, {"oid": "fb849d6d310fb59db6488a2e9dda3670897adcd4", "url": "https://github.com/apache/lucene-solr/commit/fb849d6d310fb59db6488a2e9dda3670897adcd4", "message": "Merge branch 'master' into SOLR-14281-sharedLib\n\n# Conflicts:\n#\tsolr/CHANGES.txt", "committedDate": "2020-02-27T08:47:24Z", "type": "commit"}, {"oid": "559861fd9b7cad7299c309ccf6b5d96e485a4808", "url": "https://github.com/apache/lucene-solr/commit/559861fd9b7cad7299c309ccf6b5d96e485a4808", "message": "Merge branch 'master' into SOLR-14281-sharedLib", "committedDate": "2020-02-27T13:00:43Z", "type": "commit"}]}