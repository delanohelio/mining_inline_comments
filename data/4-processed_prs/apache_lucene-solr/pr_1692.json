{"pr_number": 1692, "pr_title": "SOLR-14581 Document the way auto commits work in SolrCloud", "pr_createdAt": "2020-07-24T19:22:22Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1692", "timeline": [{"oid": "55db208af9da2269d85f146a6e88c861c8bd5925", "url": "https://github.com/apache/lucene-solr/commit/55db208af9da2269d85f146a6e88c861c8bd5925", "message": "provide some detail on eventually consistent code", "committedDate": "2020-07-23T22:18:27Z", "type": "commit"}, {"oid": "c673162ce8ab47575e0cf43a6e0faa93d2edfdf7", "url": "https://github.com/apache/lucene-solr/commit/c673162ce8ab47575e0cf43a6e0faa93d2edfdf7", "message": "small tweak to language", "committedDate": "2020-07-24T19:58:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDI4NjUxMg==", "url": "https://github.com/apache/lucene-solr/pull/1692#discussion_r460286512", "bodyText": "\"auto soft commit\"\nIDK whether it's worth including hard-commit-with-opensearcher=true\n\"across NRT replicas\"\nSame thing happens with TLOG/PULL replicas. The followers' polling time may expire at skewed times. Maybe just take the \"NRT\" out?\n\"when there is sharding.\"\nI think it would be reassuring to say that the document will become visible even in this case. Perhaps add a sentence like: \"The document will become visible on all replicas of a shard after the next auto commit or commitWithin interval expires.\".", "author": "ErickErickson", "createdAt": "2020-07-24T21:01:48Z", "path": "solr/solr-ref-guide/src/shards-and-indexing-data-in-solrcloud.adoc", "diffHunk": "@@ -122,6 +122,8 @@ More details on how to use shard splitting is in the section on the Collection A\n \n In most cases, when running in SolrCloud mode, indexing client applications should not send explicit commit requests. Rather, you should configure auto commits with `openSearcher=false` and auto soft-commits to make recent updates visible in search requests. This ensures that auto commits occur on a regular schedule in the cluster.\n \n+NOTE: Using auto soft commit or commitWithin requires the client app to embrace the realities of \"eventual consistency\". Solr will make documents searchable at _roughly_ the same time across NRT replicas of a collection but there are no hard guarantees. Consequently, in rare cases, it's possible for a document to show up in one search only for it not to appear in a subsequent search occurring immediately after when the second search is routed to a different replica. Also, documents added in a particular order (even in the same batch) might become searchable out of the order of submission when there is sharding.", "originalCommit": "c673162ce8ab47575e0cf43a6e0faa93d2edfdf7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzA2MDA4Ng==", "url": "https://github.com/apache/lucene-solr/pull/1692#discussion_r463060086", "bodyText": "I've made some edits on your second two points.   I don't know that I'm comfortable enough with all the semantics to tackle your hard-commit-with-opensearch=true variant.   Please do update the branch however!   Otherwise, I'd like to commit this early next week.", "author": "epugh", "createdAt": "2020-07-30T14:58:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDI4NjUxMg=="}], "type": "inlineReview"}, {"oid": "c877d99348247736e8d71fd1afa00c68bf5c6c3c", "url": "https://github.com/apache/lucene-solr/commit/c877d99348247736e8d71fd1afa00c68bf5c6c3c", "message": "respond to comments and word smithing", "committedDate": "2020-07-30T14:55:42Z", "type": "commit"}]}