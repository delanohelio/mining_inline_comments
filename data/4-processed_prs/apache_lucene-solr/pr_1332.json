{"pr_number": 1332, "pr_title": "SOLR-14254: Docs for text tagger: FST50 trade-off", "pr_createdAt": "2020-03-09T17:36:40Z", "pr_url": "https://github.com/apache/lucene-solr/pull/1332", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU1NjE5NA==", "url": "https://github.com/apache/lucene-solr/pull/1332#discussion_r390556194", "bodyText": "[Q] Interesting.  I didn't realize that the FST50 vs default performance decreased the smaller the individual document size was.  Did you do a particular performance test to bear this out, or are you just intuiting that behavior from knowing how postingsFormats work?\nIs the performance comparable even if numTweets or whatever gets large and the posting-lists grow due to the sheer number of tiny docs?", "author": "gerlowskija", "createdAt": "2020-03-10T19:22:54Z", "path": "solr/solr-ref-guide/src/the-tagger-handler.adoc", "diffHunk": "@@ -271,11 +271,12 @@ The response should be this (the QTime may vary):\n   }}\n ----\n \n-== Tagger Tips\n+== Tagger Performance Tips\n \n-Performance Tips:\n-\n-* Follow the recommended configuration field settings, especially `postingsFormat=FST50`.\n+* Follow the recommended configuration field settings above.\n+Additionally, for the best tagger performance, set `postingsFormat=FST50`.\n+However, non-default postings formats have no backwards-compatibility guarantees, and so if you upgrade Solr then you may find a nasty exception on startup as it fails to read the older index.\n+If the input text to be tagged is small (e.g. you are tagging queries or tweets) then the postings format choice isn't as important.", "originalCommit": "f82d3e6fd31b0d61f2e55b449caaf50e35b43bd3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU4MTgxMw==", "url": "https://github.com/apache/lucene-solr/pull/1332#discussion_r390581813", "bodyText": "I didn't realize that the FST50 vs default performance decreased the smaller the individual document size was\n\nThe tagger works by looping over each token from the input and doing a term dictionary lookup on the local index.  Logically, if your input text is small then there is less work to do than for large input text.  Knowing this requires tagger knowledge but not how any particular postings format works.  See?  No I didn't benchmark this ;-).", "author": "dsmiley", "createdAt": "2020-03-10T20:11:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU1NjE5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcyMTM1Nw==", "url": "https://github.com/apache/lucene-solr/pull/1332#discussion_r390721357", "bodyText": "FYI the SolrTextTagger was benchmarked a couple years ago to compare the old \"Memory\" PF and FST50 -- OpenSextant/SolrTextTagger#38 (comment)   we never tried the default (blocktree).  I believe the input data in that experiment were whole articles, and thus would be impacted by the postings format choice.", "author": "dsmiley", "createdAt": "2020-03-11T02:59:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU1NjE5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0MDgxNA==", "url": "https://github.com/apache/lucene-solr/pull/1332#discussion_r390940814", "bodyText": "Makes sense.\nI ran into that old perf-test comment back when I was raising SOLR-14254, but wasn't sure how relevant it was.  The situation user's face today is very different: \"memory\" (the most performant option) is gone entirely and the test doesn't even try to cover blocktree.\nBut that's independent of this PR.  These docs are worth getting in as-is.  If one of us (or someone else entirely) is able to shed more light on blocktree performance in the future, docs can be updated at that point.  No reason to let the perfect get in the way of the good.", "author": "gerlowskija", "createdAt": "2020-03-11T12:38:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU1NjE5NA=="}], "type": "inlineReview"}, {"oid": "7438ea575f940427885bf71fd1ab8b071991433a", "url": "https://github.com/apache/lucene-solr/commit/7438ea575f940427885bf71fd1ab8b071991433a", "message": "SOLR-14254: Docs for text tagger: FST50 trade-off", "committedDate": "2020-03-11T21:30:28Z", "type": "commit"}, {"oid": "57d91188b715408a882759c2d46a6adc9326e1ce", "url": "https://github.com/apache/lucene-solr/commit/57d91188b715408a882759c2d46a6adc9326e1ce", "message": "solr-upgrade-notes as well", "committedDate": "2020-03-11T21:43:50Z", "type": "commit"}, {"oid": "57d91188b715408a882759c2d46a6adc9326e1ce", "url": "https://github.com/apache/lucene-solr/commit/57d91188b715408a882759c2d46a6adc9326e1ce", "message": "solr-upgrade-notes as well", "committedDate": "2020-03-11T21:43:50Z", "type": "forcePushed"}]}