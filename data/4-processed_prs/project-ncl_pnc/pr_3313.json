{"pr_number": 3313, "pr_title": "[NCL-5918]Announcement Banner for global notice", "pr_createdAt": "2020-09-16T11:43:24Z", "pr_url": "https://github.com/project-ncl/pnc/pull/3313", "timeline": [{"oid": "7a3ac3b6acea1e68a7075cb371a44b84c473deb4", "url": "https://github.com/project-ncl/pnc/commit/7a3ac3b6acea1e68a7075cb371a44b84c473deb4", "message": "[NCL-5918]Announcement Banner for global notice", "committedDate": "2020-09-16T11:40:32Z", "type": "commit"}, {"oid": "d594601545649691c67e457c1ec127d5e1a6978b", "url": "https://github.com/project-ncl/pnc/commit/d594601545649691c67e457c1ec127d5e1a6978b", "message": "[NCL-5918]some ui fix for Announcement Banner for global notice", "committedDate": "2020-09-16T11:47:38Z", "type": "commit"}, {"oid": "e36943a06d75c229fe176973bf869dae3803a08f", "url": "https://github.com/project-ncl/pnc/commit/e36943a06d75c229fe176973bf869dae3803a08f", "message": "[NCL-5918]some ui fix for Announcement Banner for global notice", "committedDate": "2020-09-17T23:43:30Z", "type": "commit"}, {"oid": "cfe88d8f566a8d635235da41e0432faec2f26472", "url": "https://github.com/project-ncl/pnc/commit/cfe88d8f566a8d635235da41e0432faec2f26472", "message": "[NCL-5918]some ui fix -- maintenance notification issue for Announcement Banner global notice", "committedDate": "2020-09-18T00:13:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDg3NTMyNQ==", "url": "https://github.com/project-ncl/pnc/pull/3313#discussion_r490875325", "bodyText": "use const instead of var", "author": "matedo1", "createdAt": "2020-09-18T11:12:28Z", "path": "ui/app/common/components/pnc-admin-panel/pncAdminPanel.js", "diffHunk": "@@ -127,10 +137,17 @@\n \n \n     $ctrl.$onInit = function () {\n-      GenericSetting.inMaintenanceMode().then(function (res) {\n+      GenericSetting.inMaintenanceMode().then(res => {\n         changeMaintenanceSwitch(res.data);\n       });\n \n+      GenericSetting.getAnnouncementBanner().then(res => {\n+        var message = res.data.banner;", "originalCommit": "cfe88d8f566a8d635235da41e0432faec2f26472", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDg3NzUxNg==", "url": "https://github.com/project-ncl/pnc/pull/3313#discussion_r490877516", "bodyText": "please let be more strict about formatting to keep the same indentations for the same levels", "author": "matedo1", "createdAt": "2020-09-18T11:16:44Z", "path": "ui/app/common/pnc-client/message-bus/messageBus.js", "diffHunk": "@@ -61,6 +61,14 @@\n         }\n       });\n \n+      messageBus.onGenericSettingNewAnnouncement(notification => {\n+        if (notification.message) {\n+          let message = JSON.parse(notification.message);\n+            $rootScope.$broadcast(events.NEW_ANNOUNCEMENT, message);", "originalCommit": "cfe88d8f566a8d635235da41e0432faec2f26472", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDg3ODU1MQ==", "url": "https://github.com/project-ncl/pnc/pull/3313#discussion_r490878551", "bodyText": "empty then() seems to be unnecessary", "author": "matedo1", "createdAt": "2020-09-18T11:18:57Z", "path": "ui/app/common/components/pnc-admin-panel/pncAdminPanel.js", "diffHunk": "@@ -77,6 +79,13 @@\n       }\n     };\n \n+    /**\n+     * Update the Announcement banner\n+     */\n+    $ctrl.updateAnnouncement = function () {\n+        GenericSetting.setAnnouncementBanner($ctrl.message).then();", "originalCommit": "cfe88d8f566a8d635235da41e0432faec2f26472", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cf3d41d5a2a06d83e2fcef9b2bb38e95564bf2bf", "url": "https://github.com/project-ncl/pnc/commit/cf3d41d5a2a06d83e2fcef9b2bb38e95564bf2bf", "message": "[NCL-5918]UI fix for announcement bar", "committedDate": "2020-09-21T13:01:18Z", "type": "commit"}]}