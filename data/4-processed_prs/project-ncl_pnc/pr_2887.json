{"pr_number": 2887, "pr_title": "Rename CUSTOM_PME_PARAMETERS to ALIGNMENT_PARAMETERS, add endpoint fo\u2026", "pr_createdAt": "2020-02-28T00:00:02Z", "pr_url": "https://github.com/project-ncl/pnc/pull/2887", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2MjY2OQ==", "url": "https://github.com/project-ncl/pnc/pull/2887#discussion_r385662669", "bodyText": "Clean the code", "author": "jbartece", "createdAt": "2020-02-28T12:12:34Z", "path": "moduleconfig/src/main/java/org/jboss/pnc/common/json/moduleconfig/AlignmentConfig.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/**\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2014-2019 Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.jboss.pnc.common.json.moduleconfig;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import org.jboss.pnc.common.json.AbstractModuleConfig;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+public class AlignmentConfig extends AbstractModuleConfig {\n+\n+    private final static Logger log = LoggerFactory.getLogger(AlignmentConfig.class);\n+\n+//    private List<String> mavenParameters;\n+//\n+//    private List<String> npmParameters;\n+//\n+//    private List<String> gradleParameters;\n+", "originalCommit": "94839d4ad2885566e9b1f28bad510f49ca383bda", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2Mjc1NA==", "url": "https://github.com/project-ncl/pnc/pull/2887#discussion_r385662754", "bodyText": "Same here.", "author": "jbartece", "createdAt": "2020-02-28T12:12:47Z", "path": "moduleconfig/src/main/java/org/jboss/pnc/common/json/moduleconfig/AlignmentConfig.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/**\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2014-2019 Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.jboss.pnc.common.json.moduleconfig;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import org.jboss.pnc.common.json.AbstractModuleConfig;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+public class AlignmentConfig extends AbstractModuleConfig {\n+\n+    private final static Logger log = LoggerFactory.getLogger(AlignmentConfig.class);\n+\n+//    private List<String> mavenParameters;\n+//\n+//    private List<String> npmParameters;\n+//\n+//    private List<String> gradleParameters;\n+\n+    private Map<String, List<String>> alignmentParameters;\n+\n+    public AlignmentConfig(\n+//            @JsonProperty(\"mavenParameters\") List<String> mavenParameters,\n+//            @JsonProperty(\"npmParameters\") List<String> npmParameters,\n+//            @JsonProperty(\"gradleParameters\") List<String> gradleParameters\n+            @JsonProperty(\"alignmentParameters\") Map<String, List<String>> alignmentParameters) {\n+//        this.mavenParameters = mavenParameters;\n+//        this.npmParameters = npmParameters;\n+//        this.gradleParameters = gradleParameters;", "originalCommit": "94839d4ad2885566e9b1f28bad510f49ca383bda", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2MzAwNQ==", "url": "https://github.com/project-ncl/pnc/pull/2887#discussion_r385663005", "bodyText": "Document the expected values in the Map, please.", "author": "jbartece", "createdAt": "2020-02-28T12:13:25Z", "path": "moduleconfig/src/main/java/org/jboss/pnc/common/json/moduleconfig/AlignmentConfig.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/**\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2014-2019 Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.jboss.pnc.common.json.moduleconfig;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import org.jboss.pnc.common.json.AbstractModuleConfig;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+public class AlignmentConfig extends AbstractModuleConfig {\n+\n+    private final static Logger log = LoggerFactory.getLogger(AlignmentConfig.class);\n+\n+//    private List<String> mavenParameters;\n+//\n+//    private List<String> npmParameters;\n+//\n+//    private List<String> gradleParameters;\n+\n+    private Map<String, List<String>> alignmentParameters;", "originalCommit": "94839d4ad2885566e9b1f28bad510f49ca383bda", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2MzU3Ng==", "url": "https://github.com/project-ncl/pnc/pull/2887#discussion_r385663576", "bodyText": "We store the generic parameters as a single String in the DB and also will provide it as one String in the UI.\nI think is should be just a Map<String, String>.", "author": "jbartece", "createdAt": "2020-02-28T12:14:48Z", "path": "moduleconfig/src/main/java/org/jboss/pnc/common/json/moduleconfig/AlignmentConfig.java", "diffHunk": "@@ -0,0 +1,54 @@\n+/**\n+ * JBoss, Home of Professional Open Source.\n+ * Copyright 2014-2019 Red Hat, Inc., and individual contributors\n+ * as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.jboss.pnc.common.json.moduleconfig;\n+\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import org.jboss.pnc.common.json.AbstractModuleConfig;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.Map;\n+\n+public class AlignmentConfig extends AbstractModuleConfig {\n+\n+    private final static Logger log = LoggerFactory.getLogger(AlignmentConfig.class);\n+\n+//    private List<String> mavenParameters;\n+//\n+//    private List<String> npmParameters;\n+//\n+//    private List<String> gradleParameters;\n+\n+    private Map<String, List<String>> alignmentParameters;\n+\n+    public AlignmentConfig(\n+//            @JsonProperty(\"mavenParameters\") List<String> mavenParameters,\n+//            @JsonProperty(\"npmParameters\") List<String> npmParameters,\n+//            @JsonProperty(\"gradleParameters\") List<String> gradleParameters\n+            @JsonProperty(\"alignmentParameters\") Map<String, List<String>> alignmentParameters) {", "originalCommit": "94839d4ad2885566e9b1f28bad510f49ca383bda", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY2NDY1OA==", "url": "https://github.com/project-ncl/pnc/pull/2887#discussion_r385664658", "bodyText": "\"set in resource config file\" - it is implementation detail, which shouldn't be on the REST API. The important information is, that these strings are the default params.", "author": "jbartece", "createdAt": "2020-02-28T12:17:44Z", "path": "rest-api/src/main/java/org/jboss/pnc/rest/api/endpoints/BuildConfigurationEndpoint.java", "diffHunk": "@@ -380,4 +378,16 @@ BuildConfiguration restoreRevision(\n     @Path(\"/supported-parameters\")\n     Set<org.jboss.pnc.dto.response.Parameter> getSupportedParameters();\n \n+    @Operation(summary = \"Provides list of default alignment parameters according to build type.\",\n+            description = \"Provides default parameters for build configuration set in resource config file.\",", "originalCommit": "94839d4ad2885566e9b1f28bad510f49ca383bda", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "71f2fb42eaa894a7ecfa2250359d68fb108d5674", "url": "https://github.com/project-ncl/pnc/commit/71f2fb42eaa894a7ecfa2250359d68fb108d5674", "message": "Rename CUSTOM_PME_PARAMETERS to ALIGNMENT_PARAMETERS, add endpoint for retrieving default alignment parameters for build types", "committedDate": "2020-03-02T11:48:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM1MzUxMg==", "url": "https://github.com/project-ncl/pnc/pull/2887#discussion_r386353512", "bodyText": "I think it should be: according to a build type chosen by a user", "author": "jbartece", "createdAt": "2020-03-02T12:03:20Z", "path": "rest-api/src/main/java/org/jboss/pnc/rest/api/endpoints/BuildConfigurationEndpoint.java", "diffHunk": "@@ -380,4 +378,16 @@ BuildConfiguration restoreRevision(\n     @Path(\"/supported-parameters\")\n     Set<org.jboss.pnc.dto.response.Parameter> getSupportedParameters();\n \n+    @Operation(summary = \"Provides string of default alignment parameters.\",\n+            description = \"Provides default parameters for build configuration according to build type chosen by user.\",", "originalCommit": "71f2fb42eaa894a7ecfa2250359d68fb108d5674", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1b90273d23661d2f22668f6872a78d9312f8dfb3", "url": "https://github.com/project-ncl/pnc/commit/1b90273d23661d2f22668f6872a78d9312f8dfb3", "message": "Rename CUSTOM_PME_PARAMETERS to ALIGNMENT_PARAMETERS, add endpoint for retrieving default alignment parameters for build types", "committedDate": "2020-03-02T12:16:29Z", "type": "commit"}, {"oid": "1b90273d23661d2f22668f6872a78d9312f8dfb3", "url": "https://github.com/project-ncl/pnc/commit/1b90273d23661d2f22668f6872a78d9312f8dfb3", "message": "Rename CUSTOM_PME_PARAMETERS to ALIGNMENT_PARAMETERS, add endpoint for retrieving default alignment parameters for build types", "committedDate": "2020-03-02T12:16:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM4NDU0Mg==", "url": "https://github.com/project-ncl/pnc/pull/2887#discussion_r386384542", "bodyText": "CUSTOM_PROJECT_MANIPULATOR_PARAMETERS should have been removed as ALIGNMENT_PARAMETERS replaces it, right?", "author": "pkocandr", "createdAt": "2020-03-02T13:14:50Z", "path": "facade/src/main/resources/buildConfigurationSupportedGenericParameters.properties", "diffHunk": "@@ -16,7 +16,7 @@\n # limitations under the License.\n #\n \n-CUSTOM_PME_PARAMETERS=Additional parameters, which will be passed to the PME CLI executable during the alignment before the build. The format is as you would enter them on a command line, and each MUST start with a dash.\n+ALIGNMENT_PARAMETERS=Additional parameters, which will be passed to the PME CLI executable during the alignment before the build. The format is as you would enter them on a command line, and each MUST start with a dash.\n BREW_BUILD_NAME=Specify the Brew build name of the build configuration. This is used to override the default value, and can be useful for builds that disable PME. For Maven builds the format should be '<groupid>:<artifactid>'.\n CUSTOM_PROJECT_MANIPULATOR_PARAMETERS=Additional parameters, which will be passed to the Project Manipulator CLI executable during the alignment (NPM, etc, non-Maven projects) before the build. The format is as you would enter them on a command line, and each MUST start with a dash.", "originalCommit": "1b90273d23661d2f22668f6872a78d9312f8dfb3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQzMTQ4OA==", "url": "https://github.com/project-ncl/pnc/pull/2887#discussion_r386431488", "bodyText": "Correct. I missed that. Thanks @pkocandr\n@dominikbrazdil Please create a new PR to fix it.", "author": "jbartece", "createdAt": "2020-03-02T14:41:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM4NDU0Mg=="}], "type": "inlineReview"}]}