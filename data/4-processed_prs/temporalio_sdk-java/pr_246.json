{"pr_number": 246, "pr_title": "Added dump of all workflow thread to the deadlock detector", "pr_createdAt": "2020-11-07T02:28:40Z", "pr_url": "https://github.com/temporalio/sdk-java/pull/246", "timeline": [{"oid": "4a6911ca2e0206cc5e7e24474317b67b7fe2f8ee", "url": "https://github.com/temporalio/sdk-java/commit/4a6911ca2e0206cc5e7e24474317b67b7fe2f8ee", "message": "Added dump of all workflow thread to the deadlock detector", "committedDate": "2020-11-07T02:27:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTA4NDMyMA==", "url": "https://github.com/temporalio/sdk-java/pull/246#discussion_r519084320", "bodyText": "Should we add thread names too?", "author": "vitarb", "createdAt": "2020-11-07T02:33:43Z", "path": "temporal-sdk/src/main/java/io/temporal/internal/sync/DeterministicRunnerImpl.java", "diffHunk": "@@ -297,6 +297,18 @@ public void runUntilAllBlocked(long deadlockDetectionTimeout) {\n           threads.add(c);\n         }\n       } while (progress && !threads.isEmpty());\n+    } catch (PotentialDeadlockException e) {\n+      StringBuilder dump = new StringBuilder();\n+      for (WorkflowThread t : threads) {\n+        if (t.getWorkflowThreadContext() != e.getWorkflowThreadContext()) {\n+          if (dump.length() > 0) {\n+            dump.append(\"\\n\");\n+          }\n+          dump.append(t.getStackTrace());", "originalCommit": "4a6911ca2e0206cc5e7e24474317b67b7fe2f8ee", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5fccc01bb575e955fcb9c8f1f1b967a8b634476e", "url": "https://github.com/temporalio/sdk-java/commit/5fccc01bb575e955fcb9c8f1f1b967a8b634476e", "message": "Added thread names to the deadlock detector dump", "committedDate": "2020-11-07T02:43:24Z", "type": "commit"}, {"oid": "1d07428a70873f0c1b64e5a93f446bf86f0179ae", "url": "https://github.com/temporalio/sdk-java/commit/1d07428a70873f0c1b64e5a93f446bf86f0179ae", "message": "Merge branch 'master' of github.com:temporalio/temporal-java-sdk into deadlock-thread-dump", "committedDate": "2020-11-07T02:45:18Z", "type": "commit"}]}