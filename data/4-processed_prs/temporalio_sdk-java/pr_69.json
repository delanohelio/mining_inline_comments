{"pr_number": 69, "pr_title": "Added support for consistent query", "pr_createdAt": "2020-04-19T21:42:50Z", "pr_url": "https://github.com/temporalio/sdk-java/pull/69", "timeline": [{"oid": "259f2091423c2c25ded06a5bfe4d5dc2b37139ca", "url": "https://github.com/temporalio/sdk-java/commit/259f2091423c2c25ded06a5bfe4d5dc2b37139ca", "message": "Converted QueryStatus to WorkflowQueryRejectedException", "committedDate": "2020-04-12T23:17:36Z", "type": "commit"}, {"oid": "283405d84ffa9669087af614a6e6795d6c7b5e49", "url": "https://github.com/temporalio/sdk-java/commit/283405d84ffa9669087af614a6e6795d6c7b5e49", "message": "Test service query and long poll timeouts", "committedDate": "2020-04-13T22:53:15Z", "type": "commit"}, {"oid": "d7280011735e5ec92d006016b32a455f821ef063", "url": "https://github.com/temporalio/sdk-java/commit/d7280011735e5ec92d006016b32a455f821ef063", "message": "open workflow consistent query", "committedDate": "2020-04-14T04:41:42Z", "type": "commit"}, {"oid": "20841cb33a0786d802937d2479bb8095c6361f35", "url": "https://github.com/temporalio/sdk-java/commit/20841cb33a0786d802937d2479bb8095c6361f35", "message": "Fixed closed workflow query", "committedDate": "2020-04-14T04:46:07Z", "type": "commit"}, {"oid": "747a69fca03382fd3e625a08d239f959c454c883", "url": "https://github.com/temporalio/sdk-java/commit/747a69fca03382fd3e625a08d239f959c454c883", "message": "work in progress", "committedDate": "2020-04-17T15:47:08Z", "type": "commit"}, {"oid": "ea1625c420e910673000f866e3c57fc52154fa50", "url": "https://github.com/temporalio/sdk-java/commit/ea1625c420e910673000f866e3c57fc52154fa50", "message": "progress...", "committedDate": "2020-04-17T21:16:20Z", "type": "commit"}, {"oid": "4101c6dc8caac43330f4b08a69091c56c5d76e51", "url": "https://github.com/temporalio/sdk-java/commit/4101c6dc8caac43330f4b08a69091c56c5d76e51", "message": "Merge branch 'master' into consistent_query", "committedDate": "2020-04-18T02:59:34Z", "type": "commit"}, {"oid": "55b60b91296a30c7d0624e2f1a895c58b88e1131", "url": "https://github.com/temporalio/sdk-java/commit/55b60b91296a30c7d0624e2f1a895c58b88e1131", "message": "WorkflowTest.testSignalUntyped passes", "committedDate": "2020-04-18T16:32:32Z", "type": "commit"}, {"oid": "d9d2d5fa8178b9349303770d2adf843648b848b1", "url": "https://github.com/temporalio/sdk-java/commit/d9d2d5fa8178b9349303770d2adf843648b848b1", "message": "Added consistent query support", "committedDate": "2020-04-19T21:15:00Z", "type": "commit"}, {"oid": "e009b091392c9f5711996e70bdd033bd75b0ac57", "url": "https://github.com/temporalio/sdk-java/commit/e009b091392c9f5711996e70bdd033bd75b0ac57", "message": "unit test improved", "committedDate": "2020-04-19T21:41:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3MTE2OA==", "url": "https://github.com/temporalio/sdk-java/pull/69#discussion_r412471168", "bodyText": "Could we just use a json serializer for .ToString?", "author": "shawnhathaway", "createdAt": "2020-04-21T20:32:21Z", "path": "src/main/java/io/temporal/internal/replay/QueryWorkflowParameters.java", "diffHunk": "@@ -105,26 +122,35 @@ public QueryWorkflowParameters withQueryRejectCondition(\n     return this;\n   }\n \n-  @Override\n-  public String toString() {\n-    StringBuilder sb = new StringBuilder();\n-    sb.append(\"{\");\n-    sb.append(\"QueryName: \" + queryType + \", \");\n-    sb.append(\"Input: \" + new String(input, 0, 512, StandardCharsets.UTF_8) + \", \");\n-    sb.append(\"WorkflowId: \" + workflowId + \", \");\n-    sb.append(\"RunId: \" + runId + \", \");\n-    sb.append(\"QueryRejectCondition: \" + queryRejectCondition + \", \");\n-    sb.append(\"}\");\n-    return sb.toString();\n-  }\n-\n   public QueryWorkflowParameters copy() {\n     QueryWorkflowParameters result = new QueryWorkflowParameters();\n     result.setInput(input);\n     result.setRunId(runId);\n     result.setQueryType(queryType);\n     result.setWorkflowId(workflowId);\n     result.setQueryRejectCondition(queryRejectCondition);\n+    result.setQueryConsistencyLevel(queryConsistencyLevel);\n     return result;\n   }\n+\n+  @Override\n+  public String toString() {\n+    return \"QueryWorkflowParameters{\"", "originalCommit": "e009b091392c9f5711996e70bdd033bd75b0ac57", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}