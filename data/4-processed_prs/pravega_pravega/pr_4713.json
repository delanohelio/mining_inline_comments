{"pr_number": 4713, "pr_title": "Issue 4712: Make configuration keys consistent and uniform", "pr_createdAt": "2020-04-21T09:22:36Z", "pr_url": "https://github.com/pravega/pravega/pull/4713", "timeline": [{"oid": "7853ba2a2c4b6c4464ceb7f1b63401791ba01fac", "url": "https://github.com/pravega/pravega/commit/7853ba2a2c4b6c4464ceb7f1b63401791ba01fac", "message": "Update controller config keys\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-21T09:20:36Z", "type": "commit"}, {"oid": "201244143a844d83982a18725ad99060883d7806", "url": "https://github.com/pravega/pravega/commit/201244143a844d83982a18725ad99060883d7806", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-04-21T09:22:56Z", "type": "commit"}, {"oid": "2c0cacf7d7f6c2be58e7c5312f0e4dc14e2ee57b", "url": "https://github.com/pravega/pravega/commit/2c0cacf7d7f6c2be58e7c5312f0e4dc14e2ee57b", "message": "Update segment store config keys, plus one of the controller config keys\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-21T13:11:56Z", "type": "commit"}, {"oid": "e98453c10a39e39e183287458fe0d98a83b90613", "url": "https://github.com/pravega/pravega/commit/e98453c10a39e39e183287458fe0d98a83b90613", "message": "Merge branch 'config-consistency' of https://github.com/ravisharda/pravega into config-consistency", "committedDate": "2020-04-21T13:13:04Z", "type": "commit"}, {"oid": "c5fc20fb47823b5c3c5425a11386922a83b6a3c0", "url": "https://github.com/pravega/pravega/commit/c5fc20fb47823b5c3c5425a11386922a83b6a3c0", "message": "Update controller config\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-22T06:49:56Z", "type": "commit"}, {"oid": "57ba9d7699996b549fa288ce41d7766626dba480", "url": "https://github.com/pravega/pravega/commit/57ba9d7699996b549fa288ce41d7766626dba480", "message": "Update pravegaservice config\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-22T07:07:51Z", "type": "commit"}, {"oid": "59f0e91fcd4503f635d95ba1e4dd40686289f248", "url": "https://github.com/pravega/pravega/commit/59f0e91fcd4503f635d95ba1e4dd40686289f248", "message": "add service as prefix for service config\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-22T07:12:02Z", "type": "commit"}, {"oid": "c2603b7d6ab7aae170a418cefe880ce25873d778", "url": "https://github.com/pravega/pravega/commit/c2603b7d6ab7aae170a418cefe880ce25873d778", "message": "Make some more config consistent\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-22T07:58:23Z", "type": "commit"}, {"oid": "2d10cdf36e55f3613cc6e871d07b239191f7a6e9", "url": "https://github.com/pravega/pravega/commit/2d10cdf36e55f3613cc6e871d07b239191f7a6e9", "message": "Update config\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-22T08:18:16Z", "type": "commit"}, {"oid": "38736ef3c25c6590c861a43c1095aad28d4f1255", "url": "https://github.com/pravega/pravega/commit/38736ef3c25c6590c861a43c1095aad28d4f1255", "message": "Update some more\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-22T10:20:43Z", "type": "commit"}, {"oid": "63931c0ae0da5090f69cf3a1ef0d6488175b9b50", "url": "https://github.com/pravega/pravega/commit/63931c0ae0da5090f69cf3a1ef0d6488175b9b50", "message": "Add support for backward compatibility\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-24T07:30:48Z", "type": "commit"}, {"oid": "82b1e117fdbf39a91b9b5fcb1fc6a8b2149746a7", "url": "https://github.com/pravega/pravega/commit/82b1e117fdbf39a91b9b5fcb1fc6a8b2149746a7", "message": "Update some more config files\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-24T10:14:25Z", "type": "commit"}, {"oid": "25852d907fd273acd66b52e564631f536f5cec11", "url": "https://github.com/pravega/pravega/commit/25852d907fd273acd66b52e564631f536f5cec11", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-04-24T10:14:59Z", "type": "commit"}, {"oid": "f87bb8f677f685af1d7b24848634e28fcf8a21b7", "url": "https://github.com/pravega/pravega/commit/f87bb8f677f685af1d7b24848634e28fcf8a21b7", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-04-27T04:32:45Z", "type": "commit"}, {"oid": "a79a9ad4c09fb36f7633d80320d94f740d28dc1a", "url": "https://github.com/pravega/pravega/commit/a79a9ad4c09fb36f7633d80320d94f740d28dc1a", "message": "Update Pravega standalone config\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-27T08:17:30Z", "type": "commit"}, {"oid": "4222243ed1c62d5156ed632a650ebc84887712ac", "url": "https://github.com/pravega/pravega/commit/4222243ed1c62d5156ed632a650ebc84887712ac", "message": "Fix some config items\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-27T08:47:26Z", "type": "commit"}, {"oid": "05ba54735b9acb65bf0b8e3d8202d705d3ad37a2", "url": "https://github.com/pravega/pravega/commit/05ba54735b9acb65bf0b8e3d8202d705d3ad37a2", "message": "Update config files and fix some items\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-27T10:58:20Z", "type": "commit"}, {"oid": "27f32c002049f1395f3405aa80faeffc3c5e0b82", "url": "https://github.com/pravega/pravega/commit/27f32c002049f1395f3405aa80faeffc3c5e0b82", "message": "Update testing properties for Controller\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-27T13:03:55Z", "type": "commit"}, {"oid": "4e649333f3b6d3a5f433b6229a16d13e7d5edef1", "url": "https://github.com/pravega/pravega/commit/4e649333f3b6d3a5f433b6229a16d13e7d5edef1", "message": "Merge branch 'master' into config-consistency\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-04-28T04:20:18Z", "type": "commit"}, {"oid": "d040c3b0fd779fe7f9e0702dfabe60396be4cf4c", "url": "https://github.com/pravega/pravega/commit/d040c3b0fd779fe7f9e0702dfabe60396be4cf4c", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-04-29T03:55:56Z", "type": "commit"}, {"oid": "48c80f9f2458f12754b77eaff12a2e618e032d31", "url": "https://github.com/pravega/pravega/commit/48c80f9f2458f12754b77eaff12a2e618e032d31", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-04-30T03:16:47Z", "type": "commit"}, {"oid": "7df82d1018224704c5b84743f2af842c0a084b36", "url": "https://github.com/pravega/pravega/commit/7df82d1018224704c5b84743f2af842c0a084b36", "message": "Use new config params\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-04T07:47:29Z", "type": "commit"}, {"oid": "314fb7da25e44be16682891685397aeadfed2e7b", "url": "https://github.com/pravega/pravega/commit/314fb7da25e44be16682891685397aeadfed2e7b", "message": "Use the HDFS version in current use\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-04T08:59:52Z", "type": "commit"}, {"oid": "4ea6fb1aea949a7c9904bd4bc98d188080e0f851", "url": "https://github.com/pravega/pravega/commit/4ea6fb1aea949a7c9904bd4bc98d188080e0f851", "message": "Fix a config param name\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-04T11:38:19Z", "type": "commit"}, {"oid": "95f58dca41cd7abf08f5098c87f3ae4fb3d3c101", "url": "https://github.com/pravega/pravega/commit/95f58dca41cd7abf08f5098c87f3ae4fb3d3c101", "message": "Adapt container configuration to use new params\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-04T11:38:59Z", "type": "commit"}, {"oid": "a4d74deed3dfc9f6e0f8d9cd9bc35cb97456f14d", "url": "https://github.com/pravega/pravega/commit/a4d74deed3dfc9f6e0f8d9cd9bc35cb97456f14d", "message": "Merge branch 'config-consistency' of https://github.com/ravisharda/pravega into config-consistency", "committedDate": "2020-05-04T11:39:29Z", "type": "commit"}, {"oid": "56a5d87e5d5782556a9d1381bb807862ec521f6c", "url": "https://github.com/pravega/pravega/commit/56a5d87e5d5782556a9d1381bb807862ec521f6c", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-05T02:47:52Z", "type": "commit"}, {"oid": "1ed200680e48f4508cea94923f0597efc3cda7c5", "url": "https://github.com/pravega/pravega/commit/1ed200680e48f4508cea94923f0597efc3cda7c5", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-06T07:04:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU4NTQzNQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r420585435", "bodyText": "write here seems to refer to an IO write, should it be writer instead? Also, is it related to the previous configuration option above such that we need to add .noOp. there too?", "author": "fpj", "createdAt": "2020-05-06T07:10:03Z", "path": "config/config.properties", "diffHunk": "@@ -29,82 +29,82 @@\n \n # Name of the cluster to which this instance of the SegmentStore belongs.\n # Required.\n-pravegaservice.clusterName=pravega-cluster\n+pravegaservice.cluster.name=pravega-cluster\n \n # Number of Segment Containers in the system. This value must be the same across all SegmentStore instances in this cluster.\n # This value cannot be changed dynamically, it will require special administrative tasks when changing. See documentation\n # for details.\n # Valid values: Positive integer.\n # Required.\n-pravegaservice.containerCount=4\n+pravegaservice.container.count=4\n \n # Maximum number of threads in the Core SegmentStore Thread Pool. This pool is used for all SegmentStore-related\n # activities, except Netty-related tasks and Tier2 Storage activities. Examples include: handling inbound requests,\n # processing reads, background maintenance operations and background operation processing.\n # Valid values: Positive integer.\n # Recommended setting: 2 * Number of containers per node, minimum 20.\n-#pravegaservice.threadPoolSize=30\n+#pravegaservice.threadPool.size=30\n \n # Maximum number of threads in the Thread Pool used for Tier2 tasks (reading, writing, create, delete, etc.).\n # Valid values: Positive integer.\n # Recommended setting: reasonably large number which does not cause thrashing, minimum 20, recommended value 200.\n-#pravegaservice.storageThreadPoolSize=200\n+#pravegaservice.storageThreadPool.size=200\n \n # TCP port where the SegmentStore will be listening for incoming requests.\n # Valid values: Positive integer in the valid TCP port ranges.\n-pravegaservice.listeningPort=12345\n+pravegaservice.service.listener.port=12345\n \n # Full URL (host:port) where to find a ZooKeeper that can be used for coordinating this Pravega Cluster.\n # Required.\n-pravegaservice.zkURL=localhost:2181\n+pravegaservice.zk.connect.uri=localhost:2181\n \n # Number of milliseconds to wait between ZooKeeper retries.\n # Valid values: Positive integer.\n # Recommended values: Between 5000 and 10000 (too high will cause failover delays).\n-#pravegaservice.zkRetrySleepMs=5000\n+#pravegaservice.zk.connect.retries.interval.milliseconds=5000\n \n # Number of times to retry a failed attempt to contact ZooKeeper.\n # Valid values: Positive integer.\n # Recommended values: Between 3 and 5.\n-#pravegaservice.zkRetryCount=5\n+#pravegaservice.zk.connect.retries.count.max=5\n \n # Session timeout for ZooKeeper.\n # Valid values: Positive integer.\n-#pravegaservice.zkSessionTimeoutMs=10000\n+#pravegaservice.zk.connect.sessionTimeout.milliseconds=10000\n \n # Enable security for the ZK client.\n-#pravegaservice.secureZK=false\n+#pravegaservice.zk.connect.security.enable=false\n \n # Location of trust store for secure connection to ZK.\n-#pravegaservice.zkTrustStore=\n+#pravegaservice.zk.connect.security.tls.trustStore.location=\n \n #Location of password file to access the trust store.\n-#pravegaservice.zkTrustStorePasswordPath=\n+#pravegaservice.zk.connect.security.tls.trustStore.pwd.location=\n \n # DataLog implementation for Tier 1 storage.\n # Valid values: BOOKKEEPER, INMEMORY.\n # Default value: BOOKKEEPER\n-pravegaservice.dataLogImplementation=BOOKKEEPER\n+pravegaservice.dataLog.impl.name=BOOKKEEPER\n \n # Storage implementation for Tier 2 storage.\n # Valid values: HDFS, FILESYSTEM, EXTENDEDS3, INMEMORY.\n # Default value: HDFS\n-# pravegaservice.storageImplementation=HDFS\n+# pravegaservice.storage.impl.name=HDFS\n \n # Storage NO-OP Mode: in No-Op mode, user stream segment writing is no-oped; user stream segment reading is not supported.\n # This mode is used to avoid storage interference in testing while still keep the system functioning as usual.\n # NOTE: pravegaservice.storageImplementation is still used to store metadata and system segments, which are required for the functioning of the Pravega Cluster.\n # WARNING: Do NOT set NO-OP Mode to true in production environment! Data loss will happen!\n # Valid values: true, false\n # Default value: false\n-#storageextra.storageNoOpMode=false\n+#storageextra.noOpMode.enable=false\n \n # When Storage NO-OP Mode is true, storageWriteNoOpModeLatencyMillis is applied to write operation.\n # It is used to compensate the supposed latency if the storage is in operation, in order to make the test as real as possible.\n # This latency has no effect if storage is not in No-Op mode.\n # Valid values: non-negative integer\n # Default vale: 20 (milliseconds)\n-#storageextra.storageWriteNoOpLatencyMillis=20\n+#storageextra.write.noOp.latency.milliseconds=20", "originalCommit": "1ed200680e48f4508cea94923f0597efc3cda7c5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg1NzE1OQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r420857159", "bodyText": "@andreipaduroiu could you please clarify the purpose of this configuration item? Could you also suggest a better name for this (according to the new configuration guidelines referenced in the description)?", "author": "ravisharda", "createdAt": "2020-05-06T14:55:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU4NTQzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE2ODE4Mg==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422168182", "bodyText": "@kevinhan88 wrote this thing. I would drop the write and just emphasize `noOp.", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:15:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU4NTQzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3MDc2Nw==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422170767", "bodyText": "Actually, please be consistent with the above property. You use noOpMode and here you use noOp.", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:20:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU4NTQzNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE2NTgyOQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r430165829", "bodyText": "Fixed. Also, I left the write in the name as it is apparently referring to write latency.", "author": "ravisharda", "createdAt": "2020-05-26T05:37:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU4NTQzNQ=="}], "type": "inlineReview"}, {"oid": "66e434e18da4f4a206c43147496a201a5986ea50", "url": "https://github.com/pravega/pravega/commit/66e434e18da4f4a206c43147496a201a5986ea50", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-08T06:06:56Z", "type": "commit"}, {"oid": "cdcaef043f581671611256d73945acd7e3ce4847", "url": "https://github.com/pravega/pravega/commit/cdcaef043f581671611256d73945acd7e3ce4847", "message": "Update config\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-08T08:44:24Z", "type": "commit"}, {"oid": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "url": "https://github.com/pravega/pravega/commit/394d86efe232b01d9bac3e95595ea0ff8ca18555", "message": "Update documentation\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-08T09:07:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE2ODczOA==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422168738", "bodyText": "Javadoc", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:16:44Z", "path": "common/src/main/java/io/pravega/common/util/Property.java", "diffHunk": "@@ -45,7 +47,11 @@\n      * @return A new instance of the Property class with the given default value.\n      */\n     public static <T> Property<T> named(String name, T defaultValue) {\n-        return new Property<>(name, defaultValue);\n+        return new Property<>(name, defaultValue, null);\n+    }\n+\n+    public static <T> Property<T> named(String name, T defaultValue, String legacyName) {", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxNDg5Mw==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r426814893", "bodyText": "Done.", "author": "ravisharda", "createdAt": "2020-05-18T18:24:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE2ODczOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE2ODg0NQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422168845", "bodyText": "Javadoc", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:16:58Z", "path": "common/src/main/java/io/pravega/common/util/Property.java", "diffHunk": "@@ -55,6 +61,10 @@ boolean hasDefaultValue() {\n         return this.defaultValue != null;\n     }\n \n+    boolean hasLegacyName() {", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxNTA1OQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r426815059", "bodyText": "Added.", "author": "ravisharda", "createdAt": "2020-05-18T18:25:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE2ODg0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE2OTQyNA==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422169424", "bodyText": "pravegaservice.threadPool.storage.size", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:18:00Z", "path": "config/config.properties", "diffHunk": "@@ -29,82 +29,82 @@\n \n # Name of the cluster to which this instance of the SegmentStore belongs.\n # Required.\n-pravegaservice.clusterName=pravega-cluster\n+pravegaservice.cluster.name=pravega-cluster\n \n # Number of Segment Containers in the system. This value must be the same across all SegmentStore instances in this cluster.\n # This value cannot be changed dynamically, it will require special administrative tasks when changing. See documentation\n # for details.\n # Valid values: Positive integer.\n # Required.\n-pravegaservice.containerCount=4\n+pravegaservice.container.count=4\n \n # Maximum number of threads in the Core SegmentStore Thread Pool. This pool is used for all SegmentStore-related\n # activities, except Netty-related tasks and Tier2 Storage activities. Examples include: handling inbound requests,\n # processing reads, background maintenance operations and background operation processing.\n # Valid values: Positive integer.\n # Recommended setting: 2 * Number of containers per node, minimum 20.\n-#pravegaservice.threadPoolSize=30\n+#pravegaservice.threadPool.size=30\n \n # Maximum number of threads in the Thread Pool used for Tier2 tasks (reading, writing, create, delete, etc.).\n # Valid values: Positive integer.\n # Recommended setting: reasonably large number which does not cause thrashing, minimum 20, recommended value 200.\n-#pravegaservice.storageThreadPoolSize=200\n+#pravegaservice.storageThreadPool.size=200", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxNDU4Mw==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r426814583", "bodyText": "Done.", "author": "ravisharda", "createdAt": "2020-05-18T18:24:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE2OTQyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE2OTUzMw==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422169533", "bodyText": "pravegaservice.threadPool.core.size", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:18:11Z", "path": "config/config.properties", "diffHunk": "@@ -29,82 +29,82 @@\n \n # Name of the cluster to which this instance of the SegmentStore belongs.\n # Required.\n-pravegaservice.clusterName=pravega-cluster\n+pravegaservice.cluster.name=pravega-cluster\n \n # Number of Segment Containers in the system. This value must be the same across all SegmentStore instances in this cluster.\n # This value cannot be changed dynamically, it will require special administrative tasks when changing. See documentation\n # for details.\n # Valid values: Positive integer.\n # Required.\n-pravegaservice.containerCount=4\n+pravegaservice.container.count=4\n \n # Maximum number of threads in the Core SegmentStore Thread Pool. This pool is used for all SegmentStore-related\n # activities, except Netty-related tasks and Tier2 Storage activities. Examples include: handling inbound requests,\n # processing reads, background maintenance operations and background operation processing.\n # Valid values: Positive integer.\n # Recommended setting: 2 * Number of containers per node, minimum 20.\n-#pravegaservice.threadPoolSize=30\n+#pravegaservice.threadPool.size=30", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3MDMyOQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422170329", "bodyText": "Since you are editing this file, can you please replace Tier 2 with Long Term Storage here and Tier 1 with DurableDataLog. We have recently consolidated our naming to follow what is in the code.", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:19:30Z", "path": "config/config.properties", "diffHunk": "@@ -29,82 +29,82 @@\n \n # Name of the cluster to which this instance of the SegmentStore belongs.\n # Required.\n-pravegaservice.clusterName=pravega-cluster\n+pravegaservice.cluster.name=pravega-cluster\n \n # Number of Segment Containers in the system. This value must be the same across all SegmentStore instances in this cluster.\n # This value cannot be changed dynamically, it will require special administrative tasks when changing. See documentation\n # for details.\n # Valid values: Positive integer.\n # Required.\n-pravegaservice.containerCount=4\n+pravegaservice.container.count=4\n \n # Maximum number of threads in the Core SegmentStore Thread Pool. This pool is used for all SegmentStore-related\n # activities, except Netty-related tasks and Tier2 Storage activities. Examples include: handling inbound requests,\n # processing reads, background maintenance operations and background operation processing.\n # Valid values: Positive integer.\n # Recommended setting: 2 * Number of containers per node, minimum 20.\n-#pravegaservice.threadPoolSize=30\n+#pravegaservice.threadPool.size=30\n \n # Maximum number of threads in the Thread Pool used for Tier2 tasks (reading, writing, create, delete, etc.).\n # Valid values: Positive integer.\n # Recommended setting: reasonably large number which does not cause thrashing, minimum 20, recommended value 200.\n-#pravegaservice.storageThreadPoolSize=200\n+#pravegaservice.storageThreadPool.size=200\n \n # TCP port where the SegmentStore will be listening for incoming requests.\n # Valid values: Positive integer in the valid TCP port ranges.\n-pravegaservice.listeningPort=12345\n+pravegaservice.service.listener.port=12345\n \n # Full URL (host:port) where to find a ZooKeeper that can be used for coordinating this Pravega Cluster.\n # Required.\n-pravegaservice.zkURL=localhost:2181\n+pravegaservice.zk.connect.uri=localhost:2181\n \n # Number of milliseconds to wait between ZooKeeper retries.\n # Valid values: Positive integer.\n # Recommended values: Between 5000 and 10000 (too high will cause failover delays).\n-#pravegaservice.zkRetrySleepMs=5000\n+#pravegaservice.zk.connect.retries.interval.milliseconds=5000\n \n # Number of times to retry a failed attempt to contact ZooKeeper.\n # Valid values: Positive integer.\n # Recommended values: Between 3 and 5.\n-#pravegaservice.zkRetryCount=5\n+#pravegaservice.zk.connect.retries.count.max=5\n \n # Session timeout for ZooKeeper.\n # Valid values: Positive integer.\n-#pravegaservice.zkSessionTimeoutMs=10000\n+#pravegaservice.zk.connect.sessionTimeout.milliseconds=10000\n \n # Enable security for the ZK client.\n-#pravegaservice.secureZK=false\n+#pravegaservice.zk.connect.security.enable=false\n \n # Location of trust store for secure connection to ZK.\n-#pravegaservice.zkTrustStore=\n+#pravegaservice.zk.connect.security.tls.trustStore.location=\n \n #Location of password file to access the trust store.\n-#pravegaservice.zkTrustStorePasswordPath=\n+#pravegaservice.zk.connect.security.tls.trustStore.pwd.location=\n \n # DataLog implementation for Tier 1 storage.\n # Valid values: BOOKKEEPER, INMEMORY.\n # Default value: BOOKKEEPER\n-pravegaservice.dataLogImplementation=BOOKKEEPER\n+pravegaservice.dataLog.impl.name=BOOKKEEPER\n \n # Storage implementation for Tier 2 storage.", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE2NTk3MQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r430165971", "bodyText": "I made the changes in the comments everywhere in this file, as suggested.", "author": "ravisharda", "createdAt": "2020-05-26T05:38:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3MDMyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3MDUzMA==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422170530", "bodyText": "Did you fix this reference? There may be others, so please check this file for references in the comments.", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:19:52Z", "path": "config/config.properties", "diffHunk": "@@ -29,82 +29,82 @@\n \n # Name of the cluster to which this instance of the SegmentStore belongs.\n # Required.\n-pravegaservice.clusterName=pravega-cluster\n+pravegaservice.cluster.name=pravega-cluster\n \n # Number of Segment Containers in the system. This value must be the same across all SegmentStore instances in this cluster.\n # This value cannot be changed dynamically, it will require special administrative tasks when changing. See documentation\n # for details.\n # Valid values: Positive integer.\n # Required.\n-pravegaservice.containerCount=4\n+pravegaservice.container.count=4\n \n # Maximum number of threads in the Core SegmentStore Thread Pool. This pool is used for all SegmentStore-related\n # activities, except Netty-related tasks and Tier2 Storage activities. Examples include: handling inbound requests,\n # processing reads, background maintenance operations and background operation processing.\n # Valid values: Positive integer.\n # Recommended setting: 2 * Number of containers per node, minimum 20.\n-#pravegaservice.threadPoolSize=30\n+#pravegaservice.threadPool.size=30\n \n # Maximum number of threads in the Thread Pool used for Tier2 tasks (reading, writing, create, delete, etc.).\n # Valid values: Positive integer.\n # Recommended setting: reasonably large number which does not cause thrashing, minimum 20, recommended value 200.\n-#pravegaservice.storageThreadPoolSize=200\n+#pravegaservice.storageThreadPool.size=200\n \n # TCP port where the SegmentStore will be listening for incoming requests.\n # Valid values: Positive integer in the valid TCP port ranges.\n-pravegaservice.listeningPort=12345\n+pravegaservice.service.listener.port=12345\n \n # Full URL (host:port) where to find a ZooKeeper that can be used for coordinating this Pravega Cluster.\n # Required.\n-pravegaservice.zkURL=localhost:2181\n+pravegaservice.zk.connect.uri=localhost:2181\n \n # Number of milliseconds to wait between ZooKeeper retries.\n # Valid values: Positive integer.\n # Recommended values: Between 5000 and 10000 (too high will cause failover delays).\n-#pravegaservice.zkRetrySleepMs=5000\n+#pravegaservice.zk.connect.retries.interval.milliseconds=5000\n \n # Number of times to retry a failed attempt to contact ZooKeeper.\n # Valid values: Positive integer.\n # Recommended values: Between 3 and 5.\n-#pravegaservice.zkRetryCount=5\n+#pravegaservice.zk.connect.retries.count.max=5\n \n # Session timeout for ZooKeeper.\n # Valid values: Positive integer.\n-#pravegaservice.zkSessionTimeoutMs=10000\n+#pravegaservice.zk.connect.sessionTimeout.milliseconds=10000\n \n # Enable security for the ZK client.\n-#pravegaservice.secureZK=false\n+#pravegaservice.zk.connect.security.enable=false\n \n # Location of trust store for secure connection to ZK.\n-#pravegaservice.zkTrustStore=\n+#pravegaservice.zk.connect.security.tls.trustStore.location=\n \n #Location of password file to access the trust store.\n-#pravegaservice.zkTrustStorePasswordPath=\n+#pravegaservice.zk.connect.security.tls.trustStore.pwd.location=\n \n # DataLog implementation for Tier 1 storage.\n # Valid values: BOOKKEEPER, INMEMORY.\n # Default value: BOOKKEEPER\n-pravegaservice.dataLogImplementation=BOOKKEEPER\n+pravegaservice.dataLog.impl.name=BOOKKEEPER\n \n # Storage implementation for Tier 2 storage.\n # Valid values: HDFS, FILESYSTEM, EXTENDEDS3, INMEMORY.\n # Default value: HDFS\n-# pravegaservice.storageImplementation=HDFS\n+# pravegaservice.storage.impl.name=HDFS\n \n # Storage NO-OP Mode: in No-Op mode, user stream segment writing is no-oped; user stream segment reading is not supported.\n # This mode is used to avoid storage interference in testing while still keep the system functioning as usual.\n # NOTE: pravegaservice.storageImplementation is still used to store metadata and system segments, which are required for the functioning of the Pravega Cluster.", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE2NzUzNg==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r430167536", "bodyText": "Fixed.", "author": "ravisharda", "createdAt": "2020-05-26T05:44:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3MDUzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3MjU3OA==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422172578", "bodyText": "index.page should be one word.", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:23:38Z", "path": "config/config.properties", "diffHunk": "@@ -542,12 +542,12 @@ extendeds3.configUri=http://localhost:9020?identity=user&secretKey=password\n # Recommended values: 16KB. Various load tests showed that this maximum page size produces the smallest B+Tree index\n # segment when loaded with either sequential values (very rare) or arbitrary values in arbitrary order (most common); this\n # value also produces the best balance between read/write performance and index fragmentation.\n-#attributeindex.maxIndexPageSizeBytes=32767\n+#attributeindex.index.page.size.bytes.max=32767", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxNDIzOA==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r426814238", "bodyText": "Done.", "author": "ravisharda", "createdAt": "2020-05-18T18:23:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3MjU3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3Mzk2Nw==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422173967", "bodyText": "Please do not sneak in changes like this. If you want to upgrade dependencies, do it in another PR.", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:25:55Z", "path": "docker/compose/docker-compose.yml", "diffHunk": "@@ -7,10 +7,10 @@\n #\n #     http://www.apache.org/licenses/LICENSE-2.0\n #\n-version: '2'\n+version: '3'\n services:\n   zookeeper:\n-    image: zookeeper:3.5.4-beta", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ0NTg3Nw==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422445877", "bodyText": "The Zookeeper operator for K8s upgraded Zookeeper to 3.5.5 in Oct 2019: pravega/zookeeper-operator#83. I noticed this anomaly where these Compose files still refer to an older/beta version of Zookeeper, and so I made this change. If you guys prefer, I can raise another PR.", "author": "ravisharda", "createdAt": "2020-05-09T03:03:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3Mzk2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3NDEzOQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422174139", "bodyText": "Why did you remove this?", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:26:11Z", "path": "docker/compose/docker-compose.yml", "diffHunk": "@@ -72,8 +72,7 @@ services:\n       ZK_URL: zookeeper:2181\n       REST_SERVER_PORT: 10080\n       JAVA_OPTS: |\n-        -Dcontroller.service.port=9090\n-        -Dconfig.controller.metricenableCSVReporter=false", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ0MzQ5NQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422443495", "bodyText": "Here's the reason:\n\nI didn't find config.controller.metricenableCSVReporter config param anywhere. So, I assume this is not used.\ncontroller.service.port is replaced by controller.service.rpc.listener.port.", "author": "ravisharda", "createdAt": "2020-05-09T02:33:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3NDEzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3NDMzMA==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422174330", "bodyText": "and this?", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:26:31Z", "path": "docker/compose/docker-compose.yml", "diffHunk": "@@ -96,11 +95,10 @@ services:\n       ZK_URL: zookeeper:2181\n       CONTROLLER_URL: tcp://${HOST_IP}:9090\n       JAVA_OPTS: |\n-        -Dmetrics.enableCSVReporter=false", "originalCommit": "394d86efe232b01d9bac3e95595ea0ff8ca18555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ0MzY0NA==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r422443644", "bodyText": "I don't see metrics.enableCSVReporter in MetricsConfig. So, I am assuming this is unused.", "author": "ravisharda", "createdAt": "2020-05-09T02:35:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3NDMzMA=="}], "type": "inlineReview"}, {"oid": "1aed6db7b54ccb5e4e3c85b957a147a1926b4dc6", "url": "https://github.com/pravega/pravega/commit/1aed6db7b54ccb5e4e3c85b957a147a1926b4dc6", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-15T02:36:26Z", "type": "commit"}, {"oid": "6c86d94330009c8e4dd1fc5abaa081fd80982c85", "url": "https://github.com/pravega/pravega/commit/6c86d94330009c8e4dd1fc5abaa081fd80982c85", "message": "Address review comments and revert clustername in serviceconfig\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-18T18:17:39Z", "type": "commit"}, {"oid": "a9c0db407a8c0b33671d4ac895d7e6bfc55d1b2b", "url": "https://github.com/pravega/pravega/commit/a9c0db407a8c0b33671d4ac895d7e6bfc55d1b2b", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-19T03:36:55Z", "type": "commit"}, {"oid": "e7556f989d890085771bebcde09a26411587743b", "url": "https://github.com/pravega/pravega/commit/e7556f989d890085771bebcde09a26411587743b", "message": "Add a comment to explain why `pravegaservice.clusterName` property key wasn't modified\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-19T05:04:45Z", "type": "commit"}, {"oid": "4d0477d00263cce4b5169050a6b77f9399843251", "url": "https://github.com/pravega/pravega/commit/4d0477d00263cce4b5169050a6b77f9399843251", "message": "Merge branch 'config-consistency' of https://github.com/ravisharda/pravega into config-consistency", "committedDate": "2020-05-19T05:08:40Z", "type": "commit"}, {"oid": "daec678b6f234788398d2a31380010f966ec8da5", "url": "https://github.com/pravega/pravega/commit/daec678b6f234788398d2a31380010f966ec8da5", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-26T04:19:31Z", "type": "commit"}, {"oid": "b97aa9fe9679777232fa9358297bddb5de248728", "url": "https://github.com/pravega/pravega/commit/b97aa9fe9679777232fa9358297bddb5de248728", "message": "Fix a merge issue and address review comments.\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-26T05:35:56Z", "type": "commit"}, {"oid": "be2b1be9d048d8adca022653a9a41dc94d444159", "url": "https://github.com/pravega/pravega/commit/be2b1be9d048d8adca022653a9a41dc94d444159", "message": "Modify references in documentation to the new properties\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-05-26T05:43:11Z", "type": "commit"}, {"oid": "c760cb9f14eabeeac12401d96e2d7d4c0e19a5f4", "url": "https://github.com/pravega/pravega/commit/c760cb9f14eabeeac12401d96e2d7d4c0e19a5f4", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-27T06:19:05Z", "type": "commit"}, {"oid": "f9f459620ad569079b04814d46b1be65940e7684", "url": "https://github.com/pravega/pravega/commit/f9f459620ad569079b04814d46b1be65940e7684", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-27T15:47:15Z", "type": "commit"}, {"oid": "30c336313970ccd5cd7f67907a2b06f774ea7db3", "url": "https://github.com/pravega/pravega/commit/30c336313970ccd5cd7f67907a2b06f774ea7db3", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-28T01:47:11Z", "type": "commit"}, {"oid": "1f586e451805b9d84c02befb156b0d05b5ea627a", "url": "https://github.com/pravega/pravega/commit/1f586e451805b9d84c02befb156b0d05b5ea627a", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-29T02:52:57Z", "type": "commit"}, {"oid": "8c78990ec8d1aa876513e4f261c93b8102d7818b", "url": "https://github.com/pravega/pravega/commit/8c78990ec8d1aa876513e4f261c93b8102d7818b", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-05-29T07:38:48Z", "type": "commit"}, {"oid": "0b052e95e03bf2ad27ca2bf409df2dc650dc0123", "url": "https://github.com/pravega/pravega/commit/0b052e95e03bf2ad27ca2bf409df2dc650dc0123", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-01T03:45:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyOTQ2Mw==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r433129463", "bodyText": "Since this was introduced, I think that this could me more understandable as pravegaservice.storage.noOp.mode.enable.", "author": "RaulGracia", "createdAt": "2020-06-01T09:20:53Z", "path": "config/config.properties", "diffHunk": "@@ -20,162 +20,162 @@\n #    values for those settings based on desired use cases.\n #\n # Each of these settings can be overridden from the command like by specifying a Java System Property.\n-# Example: setting 'pravegaservice.listeningPort' has a default value of 12345, but it can be overridden to a different\n+# Example: setting 'pravegaservice.service.listener.port' has a default value of 12345, but it can be overridden to a different\n #          value via the command-line:\n-#                java -Dpravegaservice.listeningPort=5689 ...\n+#                java -Dpravegaservice.service.listener.port=5689 ...\n #          which will set the value for that setting to 5689, regardless of what this file contains.\n \n ##region General Segment Store Settings\n \n # Name of the cluster to which this instance of the SegmentStore belongs.\n # Required.\n-pravegaservice.clusterName=pravega-cluster\n+pravegaservice.cluster.name=pravega-cluster\n \n # Number of Segment Containers in the system. This value must be the same across all SegmentStore instances in this cluster.\n # This value cannot be changed dynamically, it will require special administrative tasks when changing. See documentation\n # for details.\n # Valid values: Positive integer.\n # Required.\n-pravegaservice.containerCount=4\n+pravegaservice.container.count=4\n \n # Maximum number of threads in the Core SegmentStore Thread Pool. This pool is used for all SegmentStore-related\n-# activities, except Netty-related tasks and Tier2 Storage activities. Examples include: handling inbound requests,\n+# activities, except Netty-related tasks and Long Term Storage activities. Examples include: handling inbound requests,\n # processing reads, background maintenance operations and background operation processing.\n # Valid values: Positive integer.\n # Recommended setting: 2 * Number of containers per node, minimum 20.\n-#pravegaservice.threadPoolSize=30\n+#pravegaservice.threadPool.core.size=30\n \n-# Maximum number of threads in the Thread Pool used for Tier2 tasks (reading, writing, create, delete, etc.).\n+# Maximum number of threads in the Thread Pool used for Long Term Storage tasks (reading, writing, create, delete, etc.).\n # Valid values: Positive integer.\n # Recommended setting: reasonably large number which does not cause thrashing, minimum 20, recommended value 200.\n-#pravegaservice.storageThreadPoolSize=200\n+#pravegaservice.threadPool.storage.size=200\n \n # TCP port where the SegmentStore will be listening for incoming requests.\n # Valid values: Positive integer in the valid TCP port ranges.\n-pravegaservice.listeningPort=12345\n+pravegaservice.service.listener.port=12345\n \n # Full URL (host:port) where to find a ZooKeeper that can be used for coordinating this Pravega Cluster.\n # Required.\n-pravegaservice.zkURL=localhost:2181\n+pravegaservice.zk.connect.uri=localhost:2181\n \n # Number of milliseconds to wait between ZooKeeper retries.\n # Valid values: Positive integer.\n # Recommended values: Between 5000 and 10000 (too high will cause failover delays).\n-#pravegaservice.zkRetrySleepMs=5000\n+#pravegaservice.zk.connect.retries.interval.milliseconds=5000\n \n # Number of times to retry a failed attempt to contact ZooKeeper.\n # Valid values: Positive integer.\n # Recommended values: Between 3 and 5.\n-#pravegaservice.zkRetryCount=5\n+#pravegaservice.zk.connect.retries.count.max=5\n \n # Session timeout for ZooKeeper.\n # Valid values: Positive integer.\n-#pravegaservice.zkSessionTimeoutMs=10000\n+#pravegaservice.zk.connect.sessionTimeout.milliseconds=10000\n \n # Enable security for the ZK client.\n-#pravegaservice.secureZK=false\n+#pravegaservice.zk.connect.security.enable=false\n \n # Location of trust store for secure connection to ZK.\n-#pravegaservice.zkTrustStore=\n+#pravegaservice.zk.connect.security.tls.trustStore.location=\n \n #Location of password file to access the trust store.\n-#pravegaservice.zkTrustStorePasswordPath=\n+#pravegaservice.zk.connect.security.tls.trustStore.pwd.location=\n \n-# DataLog implementation for Tier 1 storage.\n+# DataLog implementation for Durable Data Log Storage.\n # Valid values: BOOKKEEPER, INMEMORY.\n # Default value: BOOKKEEPER\n-pravegaservice.dataLogImplementation=BOOKKEEPER\n+pravegaservice.dataLog.impl.name=BOOKKEEPER\n \n-# Storage implementation for Tier 2 storage.\n+# Storage implementation for Long-Term Storage.\n # Valid values: HDFS, FILESYSTEM, EXTENDEDS3, INMEMORY.\n # Default value: HDFS\n-# pravegaservice.storageImplementation=HDFS\n+# pravegaservice.storage.impl.name=HDFS\n \n # Storage NO-OP Mode: in No-Op mode, user stream segment writing is no-oped; user stream segment reading is not supported.\n # This mode is used to avoid storage interference in testing while still keep the system functioning as usual.\n-# NOTE: pravegaservice.storageImplementation is still used to store metadata and system segments, which are required for the functioning of the Pravega Cluster.\n+# NOTE: pravegaservice.storage.impl.name is still used to store metadata and system segments, which are required for the functioning of the Pravega Cluster.\n # WARNING: Do NOT set NO-OP Mode to true in production environment! Data loss will happen!\n # Valid values: true, false\n # Default value: false\n-#storageextra.storageNoOpMode=false\n+#storageextra.noOp.mode.enable=false", "originalCommit": "0b052e95e03bf2ad27ca2bf409df2dc650dc0123", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5MzU1Mg==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r434293552", "bodyText": "This config property is defined in StorageExtraConfig.java that has a component code storageextra, which is resulting in the storageextra prefix. Refactoring it to bring it under pravegservice (ServiceConfig.java) would require kind of changes that are out-of-scope of this PR. We only intend to change configuration property keys/names here, and that too in a backward compatible manner.", "author": "ravisharda", "createdAt": "2020-06-03T03:54:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEyOTQ2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMDA4NA==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r433130084", "bodyText": "Why this does not have the same structure as the previous property? It refers to the same, so I think the structure should be the same: storageextra.noOp.write.latency.milliseconds (unless you replace storageextra -> pravegaservice.storage, which I think it is easier to understand)", "author": "RaulGracia", "createdAt": "2020-06-01T09:22:22Z", "path": "config/config.properties", "diffHunk": "@@ -20,162 +20,162 @@\n #    values for those settings based on desired use cases.\n #\n # Each of these settings can be overridden from the command like by specifying a Java System Property.\n-# Example: setting 'pravegaservice.listeningPort' has a default value of 12345, but it can be overridden to a different\n+# Example: setting 'pravegaservice.service.listener.port' has a default value of 12345, but it can be overridden to a different\n #          value via the command-line:\n-#                java -Dpravegaservice.listeningPort=5689 ...\n+#                java -Dpravegaservice.service.listener.port=5689 ...\n #          which will set the value for that setting to 5689, regardless of what this file contains.\n \n ##region General Segment Store Settings\n \n # Name of the cluster to which this instance of the SegmentStore belongs.\n # Required.\n-pravegaservice.clusterName=pravega-cluster\n+pravegaservice.cluster.name=pravega-cluster\n \n # Number of Segment Containers in the system. This value must be the same across all SegmentStore instances in this cluster.\n # This value cannot be changed dynamically, it will require special administrative tasks when changing. See documentation\n # for details.\n # Valid values: Positive integer.\n # Required.\n-pravegaservice.containerCount=4\n+pravegaservice.container.count=4\n \n # Maximum number of threads in the Core SegmentStore Thread Pool. This pool is used for all SegmentStore-related\n-# activities, except Netty-related tasks and Tier2 Storage activities. Examples include: handling inbound requests,\n+# activities, except Netty-related tasks and Long Term Storage activities. Examples include: handling inbound requests,\n # processing reads, background maintenance operations and background operation processing.\n # Valid values: Positive integer.\n # Recommended setting: 2 * Number of containers per node, minimum 20.\n-#pravegaservice.threadPoolSize=30\n+#pravegaservice.threadPool.core.size=30\n \n-# Maximum number of threads in the Thread Pool used for Tier2 tasks (reading, writing, create, delete, etc.).\n+# Maximum number of threads in the Thread Pool used for Long Term Storage tasks (reading, writing, create, delete, etc.).\n # Valid values: Positive integer.\n # Recommended setting: reasonably large number which does not cause thrashing, minimum 20, recommended value 200.\n-#pravegaservice.storageThreadPoolSize=200\n+#pravegaservice.threadPool.storage.size=200\n \n # TCP port where the SegmentStore will be listening for incoming requests.\n # Valid values: Positive integer in the valid TCP port ranges.\n-pravegaservice.listeningPort=12345\n+pravegaservice.service.listener.port=12345\n \n # Full URL (host:port) where to find a ZooKeeper that can be used for coordinating this Pravega Cluster.\n # Required.\n-pravegaservice.zkURL=localhost:2181\n+pravegaservice.zk.connect.uri=localhost:2181\n \n # Number of milliseconds to wait between ZooKeeper retries.\n # Valid values: Positive integer.\n # Recommended values: Between 5000 and 10000 (too high will cause failover delays).\n-#pravegaservice.zkRetrySleepMs=5000\n+#pravegaservice.zk.connect.retries.interval.milliseconds=5000\n \n # Number of times to retry a failed attempt to contact ZooKeeper.\n # Valid values: Positive integer.\n # Recommended values: Between 3 and 5.\n-#pravegaservice.zkRetryCount=5\n+#pravegaservice.zk.connect.retries.count.max=5\n \n # Session timeout for ZooKeeper.\n # Valid values: Positive integer.\n-#pravegaservice.zkSessionTimeoutMs=10000\n+#pravegaservice.zk.connect.sessionTimeout.milliseconds=10000\n \n # Enable security for the ZK client.\n-#pravegaservice.secureZK=false\n+#pravegaservice.zk.connect.security.enable=false\n \n # Location of trust store for secure connection to ZK.\n-#pravegaservice.zkTrustStore=\n+#pravegaservice.zk.connect.security.tls.trustStore.location=\n \n #Location of password file to access the trust store.\n-#pravegaservice.zkTrustStorePasswordPath=\n+#pravegaservice.zk.connect.security.tls.trustStore.pwd.location=\n \n-# DataLog implementation for Tier 1 storage.\n+# DataLog implementation for Durable Data Log Storage.\n # Valid values: BOOKKEEPER, INMEMORY.\n # Default value: BOOKKEEPER\n-pravegaservice.dataLogImplementation=BOOKKEEPER\n+pravegaservice.dataLog.impl.name=BOOKKEEPER\n \n-# Storage implementation for Tier 2 storage.\n+# Storage implementation for Long-Term Storage.\n # Valid values: HDFS, FILESYSTEM, EXTENDEDS3, INMEMORY.\n # Default value: HDFS\n-# pravegaservice.storageImplementation=HDFS\n+# pravegaservice.storage.impl.name=HDFS\n \n # Storage NO-OP Mode: in No-Op mode, user stream segment writing is no-oped; user stream segment reading is not supported.\n # This mode is used to avoid storage interference in testing while still keep the system functioning as usual.\n-# NOTE: pravegaservice.storageImplementation is still used to store metadata and system segments, which are required for the functioning of the Pravega Cluster.\n+# NOTE: pravegaservice.storage.impl.name is still used to store metadata and system segments, which are required for the functioning of the Pravega Cluster.\n # WARNING: Do NOT set NO-OP Mode to true in production environment! Data loss will happen!\n # Valid values: true, false\n # Default value: false\n-#storageextra.storageNoOpMode=false\n+#storageextra.noOp.mode.enable=false\n \n # When Storage NO-OP Mode is true, storageWriteNoOpModeLatencyMillis is applied to write operation.\n # It is used to compensate the supposed latency if the storage is in operation, in order to make the test as real as possible.\n # This latency has no effect if storage is not in No-Op mode.\n # Valid values: non-negative integer\n # Default vale: 20 (milliseconds)\n-#storageextra.storageWriteNoOpLatencyMillis=20\n+#noOp.write.latency.milliseconds=20", "originalCommit": "0b052e95e03bf2ad27ca2bf409df2dc650dc0123", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk3MTIxMg==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r433971212", "bodyText": "This smells like a bug. This value won't be picked up by the code.", "author": "andreipaduroiu", "createdAt": "2020-06-02T15:37:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMDA4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5ODc0Mw==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r434298743", "bodyText": "Yes, that's indeed a bug. I've fixed it now. Thanks for spotting it in this commit.", "author": "ravisharda", "createdAt": "2020-06-03T04:18:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMDA4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMDkyNA==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r433130924", "bodyText": "I'm aware that is better to replace Tier 2 -> Long Term Storage for clarity. But I'm not sure whether making Tier 1 to disappear as well is making things clearer or not (is an open question).", "author": "RaulGracia", "createdAt": "2020-06-01T09:24:33Z", "path": "config/config.properties", "diffHunk": "@@ -469,13 +469,13 @@ extendeds3.configUri=http://localhost:9020?identity=user&secretKey=password\n \n ##region DurableLog Settings\n \n-# A Metadata Checkpoint is a special internal write inside the DurableLog (persisted to Tier1 DurableDataLog) that takes\n+# A Metadata Checkpoint is a special internal write inside the DurableLog (persisted to Durable Data Log) that takes", "originalCommit": "0b052e95e03bf2ad27ca2bf409df2dc650dc0123", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzk3MDg3Ng==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r433970876", "bodyText": "We've agreed to eliminate the Tier 1 term as well. DurableLog/DurableDataLog is the term to use to be consistent with the code.", "author": "andreipaduroiu", "createdAt": "2020-06-02T15:37:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMDkyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5OTAzNw==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r434299037", "bodyText": "So, I'm leaving it as is. @RaulGracia / @andreipaduroiu hope that is OK.", "author": "ravisharda", "createdAt": "2020-06-03T04:20:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMDkyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMjczNg==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r433132736", "bodyText": "Now that you are addressing the configuration of Pravega, I ask the following: could we get rid of this file completely? I mean, I have always wondered why are there 2 separate files for configuration, one for the Segment Store and another for the Controller. Would it be better to have a single file with different \"sections\"? Maybe this is something to discuss with @shiveshr and @andreipaduroiu, but from an usability perspective, I don't know if doubling the number of configuration files is going to make things better for users.", "author": "RaulGracia", "createdAt": "2020-06-01T09:28:26Z", "path": "controller/src/test/resources/controller.config.properties", "diffHunk": "@@ -12,38 +12,38 @@\n # The commented out settings are not different than the hardcoded defaults in Config.java.\n \n \n-controller.containerCount=4", "originalCommit": "0b052e95e03bf2ad27ca2bf409df2dc650dc0123", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5NjkzMg==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r434296932", "bodyText": "At the outset, I think its a good idea to have a single config file. I've created a separate issue #4843 for this item, as I don't think its in the scope of this PR.", "author": "ravisharda", "createdAt": "2020-06-03T04:10:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMjczNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMzQ5Mg==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r433133492", "bodyText": "Same here as in the previous comment related to split controller and Segment Store config in different files.", "author": "RaulGracia", "createdAt": "2020-06-01T09:30:15Z", "path": "controller/src/conf/controller.config.properties", "diffHunk": "@@ -18,49 +18,52 @@\n #                java -Dcontroller.service.port=5689 ...\n #          which will set the value for that setting to 5689, regardless of what this file contains.\n \n+controller.cluster.name=${CLUSTER_NAME}\n+controller.container.count=${CONTAINER_COUNT}\n+controller.hostMonitor.enable=${HOST_MONITOR_ENABLE}\n+controller.rebalance.interval.seconds.min=${CLUSTER_MIN_REBALANCE_INTERVAL}\n \n-controller.containerCount=${CONTAINER_COUNT}", "originalCommit": "0b052e95e03bf2ad27ca2bf409df2dc650dc0123", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI5NzEzMQ==", "url": "https://github.com/pravega/pravega/pull/4713#discussion_r434297131", "bodyText": "#4713 (comment)", "author": "ravisharda", "createdAt": "2020-06-03T04:11:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzEzMzQ5Mg=="}], "type": "inlineReview"}, {"oid": "5481973b7a13aae092d96fa652a9032df33e7074", "url": "https://github.com/pravega/pravega/commit/5481973b7a13aae092d96fa652a9032df33e7074", "message": "Fix a bug\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-06-03T04:13:24Z", "type": "commit"}, {"oid": "86b1506fd59b4bd53c34762c106c099bcb42f5e9", "url": "https://github.com/pravega/pravega/commit/86b1506fd59b4bd53c34762c106c099bcb42f5e9", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-03T04:17:55Z", "type": "commit"}, {"oid": "30831b8dc76ef3110ad5d38640dbef9c87a9caaf", "url": "https://github.com/pravega/pravega/commit/30831b8dc76ef3110ad5d38640dbef9c87a9caaf", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-04T02:59:09Z", "type": "commit"}, {"oid": "313109dedd9f06e9ae9e3ba897216640b4c53007", "url": "https://github.com/pravega/pravega/commit/313109dedd9f06e9ae9e3ba897216640b4c53007", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-04T15:11:05Z", "type": "commit"}, {"oid": "759e74657aa5cec9365967d84db6e8fae8a76a47", "url": "https://github.com/pravega/pravega/commit/759e74657aa5cec9365967d84db6e8fae8a76a47", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-05T04:47:23Z", "type": "commit"}, {"oid": "c23b6d5359bdff95218332820f68be1496815adf", "url": "https://github.com/pravega/pravega/commit/c23b6d5359bdff95218332820f68be1496815adf", "message": "Remove hard-coded strings and fix a Bookkeeper config key\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-06-05T06:11:50Z", "type": "commit"}, {"oid": "6326c63058985b388a3ba217e2414f31915e50df", "url": "https://github.com/pravega/pravega/commit/6326c63058985b388a3ba217e2414f31915e50df", "message": "Address review comments\n\nSigned-off-by: Ravi Sharda <ravi.sharda@emc.com>", "committedDate": "2020-06-05T09:06:21Z", "type": "commit"}, {"oid": "f43daa4d3925a457790b65dade49f600d3974ecd", "url": "https://github.com/pravega/pravega/commit/f43daa4d3925a457790b65dade49f600d3974ecd", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-05T09:07:48Z", "type": "commit"}, {"oid": "58b8c95752d4f0def681eb3f51392d1e50ca38b7", "url": "https://github.com/pravega/pravega/commit/58b8c95752d4f0def681eb3f51392d1e50ca38b7", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-08T03:05:54Z", "type": "commit"}, {"oid": "175a275754c136dafeb1d24dcc05832262796ec7", "url": "https://github.com/pravega/pravega/commit/175a275754c136dafeb1d24dcc05832262796ec7", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-08T10:26:21Z", "type": "commit"}, {"oid": "c692e793dd6c7bc9ada80f74555bb2b457a68a0c", "url": "https://github.com/pravega/pravega/commit/c692e793dd6c7bc9ada80f74555bb2b457a68a0c", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-08T15:32:44Z", "type": "commit"}, {"oid": "743d0a9d69359caeefa97619db7af44c9a83caf5", "url": "https://github.com/pravega/pravega/commit/743d0a9d69359caeefa97619db7af44c9a83caf5", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-08T15:42:44Z", "type": "commit"}, {"oid": "0753a6eadd9532b9592ab656cedac1e105f4cc40", "url": "https://github.com/pravega/pravega/commit/0753a6eadd9532b9592ab656cedac1e105f4cc40", "message": "Merge branch 'master' into config-consistency", "committedDate": "2020-06-08T17:14:28Z", "type": "commit"}]}