{"pr_number": 5094, "pr_title": "Issue 5093: validate internal and external names", "pr_createdAt": "2020-08-24T06:47:35Z", "pr_url": "https://github.com/pravega/pravega/pull/5094", "timeline": [{"oid": "1cdb3508440c032bae89c8967ae17684a6e36b99", "url": "https://github.com/pravega/pravega/commit/1cdb3508440c032bae89c8967ae17684a6e36b99", "message": "validate name\n\nSigned-off-by: Ravi Rajamani <ravi.rajamani@emc.com>", "committedDate": "2020-08-24T06:43:20Z", "type": "commit"}, {"oid": "0a3f9f87e68471acfd29ec91ee66322f3250ba61", "url": "https://github.com/pravega/pravega/commit/0a3f9f87e68471acfd29ec91ee66322f3250ba61", "message": "checkstylemain\n\nSigned-off-by: Ravi Rajamani <ravi.rajamani@emc.com>", "committedDate": "2020-08-24T09:22:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY2NDY0Mg==", "url": "https://github.com/pravega/pravega/pull/5094#discussion_r475664642", "bodyText": "Use <= to avoid having to do arithmetic every time this executes.\nDo not use String.format. If you check the syntax of Preconditions.checkArgument, you'll see that it already takes a formatted string as arg.", "author": "andreipaduroiu", "createdAt": "2020-08-24T14:44:32Z", "path": "shared/protocol/src/main/java/io/pravega/shared/NameUtils.java", "diffHunk": "@@ -624,7 +638,7 @@ public static String getStreamForReaderGroup(String groupNameName) {\n      */\n     public static String validateUserStreamName(String name) {\n         Preconditions.checkNotNull(name);\n-        Preconditions.checkArgument(name.length() < 256, \"Name must have less than 256 characters\");\n+        Preconditions.checkArgument(name.length() < MAX_GIVEN_NAME_SIZE + 1, String.format(\"Name cannot exceed %d characters\", MAX_GIVEN_NAME_SIZE));", "originalCommit": "0a3f9f87e68471acfd29ec91ee66322f3250ba61", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTY2NDc4MA==", "url": "https://github.com/pravega/pravega/pull/5094#discussion_r475664780", "bodyText": "same here", "author": "andreipaduroiu", "createdAt": "2020-08-24T14:44:44Z", "path": "shared/protocol/src/main/java/io/pravega/shared/NameUtils.java", "diffHunk": "@@ -649,7 +663,7 @@ public static String validateStreamName(String name) {\n \n         // In addition to user stream names, pravega internally created stream have a special prefix.\n         final String matcher = \"[\" + INTERNAL_NAME_PREFIX + \"]?[\\\\p{Alnum}\\\\.\\\\-]+\";\n-        Preconditions.checkArgument(name.length() < 256, \"Name must have less than 256 characters\");\n+        Preconditions.checkArgument(name.length() < MAX_NAME_SIZE + 1, String.format(\"Name cannot exceed %d characters\", MAX_NAME_SIZE));", "originalCommit": "0a3f9f87e68471acfd29ec91ee66322f3250ba61", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d2ad93cf91d79cd51c025fb6119654e057e5d2b5", "url": "https://github.com/pravega/pravega/commit/d2ad93cf91d79cd51c025fb6119654e057e5d2b5", "message": "allow scope name to be longer than stream name\n\nSigned-off-by: Ravi Rajamani <ravi.rajamani@emc.com>", "committedDate": "2020-08-24T16:31:32Z", "type": "commit"}]}