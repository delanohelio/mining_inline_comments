{"pr_number": 5148, "pr_title": "Issue 5147: Added check for service in init_kubernetes.sh script", "pr_createdAt": "2020-09-06T10:19:34Z", "pr_url": "https://github.com/pravega/pravega/pull/5148", "timeline": [{"oid": "7a25b2eae4eebcc0b446c93a7de0a84e0bbd1a42", "url": "https://github.com/pravega/pravega/commit/7a25b2eae4eebcc0b446c93a7de0a84e0bbd1a42", "message": "added check for service in init_kubernetes.sh script\n\nSigned-off-by: prabhaker24 <prabhaker.saxena@dell.com>", "committedDate": "2020-09-06T10:11:59Z", "type": "commit"}, {"oid": "183fe83d0a598a19f01f1c9ff8f916e0ccc02c2f", "url": "https://github.com/pravega/pravega/commit/183fe83d0a598a19f01f1c9ff8f916e0ccc02c2f", "message": "made service variable local\n\nSigned-off-by: prabhaker24 <prabhaker.saxena@dell.com>", "committedDate": "2020-09-06T10:43:54Z", "type": "commit"}, {"oid": "b6eea95da722eb471ecb13d0717fd5d64d6b6762", "url": "https://github.com/pravega/pravega/commit/b6eea95da722eb471ecb13d0717fd5d64d6b6762", "message": "changed indentation\n\nSigned-off-by: prabhaker24 <prabhaker.saxena@dell.com>", "committedDate": "2020-09-07T04:19:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDE4ODE4Mg==", "url": "https://github.com/pravega/pravega/pull/5148#discussion_r484188182", "bodyText": "as discussed with Ravi, I see this as a Precondition check before starting Segment store. And the startup  on k8s should not happen if the precondition fails.", "author": "shrids", "createdAt": "2020-09-07T05:21:13Z", "path": "docker/pravega/scripts/init_kubernetes.sh", "diffHunk": "@@ -47,6 +47,13 @@ init_kubernetes() {\n         local podname=${POD_NAME}\n         export PUBLISHED_ADDRESS=\"\"\n         export PUBLISHED_PORT=\"\"\n+        local service=$( k8 \"${ns}\" \"services\" \"${podname}\" .kind )\n+\n+        while [[  \"$service\" != \"Service\" ]]; ", "originalCommit": "b6eea95da722eb471ecb13d0717fd5d64d6b6762", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIwNTkxMg==", "url": "https://github.com/pravega/pravega/pull/5148#discussion_r484205912", "bodyText": "I have removed the loop and have added exit condition now.", "author": "Prabhaker24", "createdAt": "2020-09-07T06:23:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDE4ODE4Mg=="}], "type": "inlineReview"}, {"oid": "c0cd9b1a8f0cdd84e5086f59758cfcaf314be905", "url": "https://github.com/pravega/pravega/commit/c0cd9b1a8f0cdd84e5086f59758cfcaf314be905", "message": "removed loop and added exit condition\n\nSigned-off-by: prabhaker24 <prabhaker.saxena@dell.com>", "committedDate": "2020-09-07T05:46:16Z", "type": "commit"}, {"oid": "90d4f324c7670f9472a6bf830b8e92a6eadc8b6d", "url": "https://github.com/pravega/pravega/commit/90d4f324c7670f9472a6bf830b8e92a6eadc8b6d", "message": "removed loop added exit statement\n\nSigned-off-by: prabhaker24 <prabhaker.saxena@dell.com>", "committedDate": "2020-09-07T06:12:39Z", "type": "commit"}]}