{"pr_number": 4593, "pr_title": "Issue 4591: Fixed ExtendedS3 exists()", "pr_createdAt": "2020-03-03T23:56:50Z", "pr_url": "https://github.com/pravega/pravega/pull/4593", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzNjk0OA==", "url": "https://github.com/pravega/pravega/pull/4593#discussion_r387436948", "bodyText": "streamSegmentName is actually a stream segment name but do we actually create objects with such names? I thought   for each segment there will be objects like streamSegmentName$header or streamSegmentName$attributes. So if we simple check for presence of an object with streamSegmentName we always get object not found. Am i missing something here?", "author": "medvedevigorek", "createdAt": "2020-03-04T03:55:49Z", "path": "bindings/src/main/java/io/pravega/storage/extendeds3/ExtendedS3Storage.java", "diffHunk": "@@ -263,18 +262,10 @@ private StreamSegmentInformation doGetStreamSegmentInfo(String streamSegmentName\n \n     private boolean doExists(String streamSegmentName) {\n         try {\n-            ListObjectsResult result = client.listObjects(config.getBucket(), config.getPrefix() + streamSegmentName);\n-            return !result.getObjects().isEmpty();\n+            S3ObjectMetadata result = client.getObjectMetadata(config.getBucket(),\n+                    config.getPrefix() + streamSegmentName);", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ0NjkzOQ==", "url": "https://github.com/pravega/pravega/pull/4593#discussion_r387446939", "bodyText": "The layer above this component (RollingStorage) passes the names like streamSegmentName$header or streamSegmentName$attributes to this component.", "author": "sachin-j-joshi", "createdAt": "2020-03-04T04:47:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQzNjk0OA=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "9e92c2b52930c2dc9c0063bf4f9ce17682494f8b", "url": "https://github.com/pravega/pravega/commit/9e92c2b52930c2dc9c0063bf4f9ce17682494f8b", "message": "Issue 4591: Fix incorrect implementation of exists in ExtendedS3Storage.\n\nSigned-off-by: Sachin Joshi <sachin.joshi@emc.com>", "committedDate": "2020-03-04T22:27:05Z", "type": "commit"}, {"oid": "f5b67c54f66372df28ac9409e2e8dd4b5fe6dc30", "url": "https://github.com/pravega/pravega/commit/f5b67c54f66372df28ac9409e2e8dd4b5fe6dc30", "message": "Issue 4591: Unit tests.\n\nSigned-off-by: Sachin Joshi <sachin.joshi@emc.com>", "committedDate": "2020-03-04T22:27:05Z", "type": "commit"}, {"oid": "f5b67c54f66372df28ac9409e2e8dd4b5fe6dc30", "url": "https://github.com/pravega/pravega/commit/f5b67c54f66372df28ac9409e2e8dd4b5fe6dc30", "message": "Issue 4591: Unit tests.\n\nSigned-off-by: Sachin Joshi <sachin.joshi@emc.com>", "committedDate": "2020-03-04T22:27:05Z", "type": "forcePushed"}]}