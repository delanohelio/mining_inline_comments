{"pr_number": 4776, "pr_title": "Issue 4775: Add snapshot stage for all release branches", "pr_createdAt": "2020-05-08T06:33:05Z", "pr_url": "https://github.com/pravega/pravega/pull/4776", "timeline": [{"oid": "c42f4fa34e021e7a1cde7789eb59b636b3b283c4", "url": "https://github.com/pravega/pravega/commit/c42f4fa34e021e7a1cde7789eb59b636b3b283c4", "message": "[issue-4775] Add snapshot stage for all release branches\n\nSigned-off-by: Brian Zhou <brian.zhou@emc.com>", "committedDate": "2020-05-08T06:28:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjAzNjg4MA==", "url": "https://github.com/pravega/pravega/pull/4776#discussion_r422036880", "bodyText": "I'm not sure this is going to work. If we merge it to master, then builds of the release branches are not going to have this change. Instead, for each for which you want snapshots from, we need to change .travis.yml.", "author": "fpj", "createdAt": "2020-05-08T09:13:40Z", "path": ".travis.yml", "diffHunk": "@@ -34,7 +34,7 @@ jobs:\n       script: ./gradlew javadocs\n \n     - stage: snapshot\n-      if: branch = master AND NOT (type = pull_request)\n+      if: (branch = master OR branch =~ /^r[0-9]\\.[0-9]/) AND NOT (type = pull_request)", "originalCommit": "c42f4fa34e021e7a1cde7789eb59b636b3b283c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA0MDQxNQ==", "url": "https://github.com/pravega/pravega/pull/4776#discussion_r422040415", "bodyText": "Yes, this change targetting master branch is really for the future releases, i.e. when we have cut branch for r0.8 and we can have 0.8.1 snapshot versions. I'm not sure if it should be cherry-picked to r0.7 branch because it is now code freeze for release candidate.", "author": "crazyzhou", "createdAt": "2020-05-08T09:21:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjAzNjg4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE3NTk0OQ==", "url": "https://github.com/pravega/pravega/pull/4776#discussion_r422175949", "bodyText": "Nothing will get cherrypicked in 0.7.1 at this point unless it's a critical bug. RC0 went out on Wednesday and it's about to be promoted to a full release in the next couple of days.", "author": "andreipaduroiu", "createdAt": "2020-05-08T14:29:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjAzNjg4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ0ODE2OA==", "url": "https://github.com/pravega/pravega/pull/4776#discussion_r422448168", "bodyText": "That's fine. If this goes into master, the future release branches will be cut with this change, then this will still benefit the releases after 0.8 in the future.", "author": "crazyzhou", "createdAt": "2020-05-09T03:36:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjAzNjg4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjkzMTk2OA==", "url": "https://github.com/pravega/pravega/pull/4776#discussion_r422931968", "bodyText": "Is this regex going to fail if we ever have multiple digits per version? E.g., r0.10 or r.10.0. I think it will match the former, but not the latter. Not that we are any close to such an example... :-)", "author": "fpj", "createdAt": "2020-05-11T10:09:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjAzNjg4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjkzNTI2MQ==", "url": "https://github.com/pravega/pravega/pull/4776#discussion_r422935261", "bodyText": "Yes, that's right. I only considered single digit, I will make the change to /^r[0-9]*\\.[0-9]*/.", "author": "crazyzhou", "createdAt": "2020-05-11T10:15:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjAzNjg4MA=="}], "type": "inlineReview"}, {"oid": "08b8d534fd920946522578b080bc90361acd7727", "url": "https://github.com/pravega/pravega/commit/08b8d534fd920946522578b080bc90361acd7727", "message": "Add support for multiple digits\n\nSigned-off-by: Brian Zhou <brian.zhou@emc.com>", "committedDate": "2020-05-11T11:01:40Z", "type": "commit"}, {"oid": "4af180062b30782c6aef5712c849d1da735e8e87", "url": "https://github.com/pravega/pravega/commit/4af180062b30782c6aef5712c849d1da735e8e87", "message": "Merge branch 'master' into issue-4775-add-snapshot-stage", "committedDate": "2020-05-12T10:43:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzOTIyOA==", "url": "https://github.com/pravega/pravega/pull/4776#discussion_r423639228", "bodyText": "It should be + , not * as we want at least one digit.", "author": "fpj", "createdAt": "2020-05-12T10:47:28Z", "path": ".travis.yml", "diffHunk": "@@ -34,7 +34,7 @@ jobs:\n       script: ./gradlew javadocs\n \n     - stage: snapshot\n-      if: branch = master AND NOT (type = pull_request)\n+      if: (branch = master OR branch =~ /^r[0-9]*\\.[0-9]*/) AND NOT (type = pull_request)", "originalCommit": "4af180062b30782c6aef5712c849d1da735e8e87", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDEyMTc0OQ==", "url": "https://github.com/pravega/pravega/pull/4776#discussion_r424121749", "bodyText": "Fixed as suggestions", "author": "crazyzhou", "createdAt": "2020-05-13T01:24:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzOTIyOA=="}], "type": "inlineReview"}, {"oid": "5fd8df2f6fdbbdbbc992b951f676022691880e8d", "url": "https://github.com/pravega/pravega/commit/5fd8df2f6fdbbdbbc992b951f676022691880e8d", "message": "Fix for at least one digit\n\nSigned-off-by: Brian Zhou <brian.zhou@emc.com>", "committedDate": "2020-05-13T01:23:37Z", "type": "commit"}, {"oid": "36e1b89ebb32e57a1ba52e51eeb23f7492bd35c0", "url": "https://github.com/pravega/pravega/commit/36e1b89ebb32e57a1ba52e51eeb23f7492bd35c0", "message": "Merge branch 'master' into issue-4775-add-snapshot-stage", "committedDate": "2020-06-04T21:39:52Z", "type": "commit"}, {"oid": "f5149a2f3791d4c7c3b9083f79c24c701c00bbb7", "url": "https://github.com/pravega/pravega/commit/f5149a2f3791d4c7c3b9083f79c24c701c00bbb7", "message": "Merge branch 'master' into issue-4775-add-snapshot-stage", "committedDate": "2020-07-13T14:33:35Z", "type": "commit"}, {"oid": "c52076774f9f804cef2365980efb7e56726d52f9", "url": "https://github.com/pravega/pravega/commit/c52076774f9f804cef2365980efb7e56726d52f9", "message": "Merge branch 'master' into issue-4775-add-snapshot-stage", "committedDate": "2020-07-20T21:19:56Z", "type": "commit"}, {"oid": "d6e927868b4a8bf8be3b9429d7fa4f6749f89948", "url": "https://github.com/pravega/pravega/commit/d6e927868b4a8bf8be3b9429d7fa4f6749f89948", "message": "Merge branch 'master' into issue-4775-add-snapshot-stage", "committedDate": "2020-07-23T07:49:02Z", "type": "commit"}, {"oid": "fc50ce34de3a1784af359e138a3e8d4dd6fca6fa", "url": "https://github.com/pravega/pravega/commit/fc50ce34de3a1784af359e138a3e8d4dd6fca6fa", "message": "Merge branch 'master' into issue-4775-add-snapshot-stage", "committedDate": "2020-08-03T07:05:10Z", "type": "commit"}, {"oid": "b78957e2175b6966cd3f4050e623b4e2ec57e578", "url": "https://github.com/pravega/pravega/commit/b78957e2175b6966cd3f4050e623b4e2ec57e578", "message": "Merge branch 'master' into issue-4775-add-snapshot-stage", "committedDate": "2020-08-05T15:30:00Z", "type": "commit"}, {"oid": "16dbfae3308c45d6375a5c7ab05c8f46f42d55ca", "url": "https://github.com/pravega/pravega/commit/16dbfae3308c45d6375a5c7ab05c8f46f42d55ca", "message": "Merge branch 'master' into issue-4775-add-snapshot-stage", "committedDate": "2020-08-27T03:47:05Z", "type": "commit"}]}