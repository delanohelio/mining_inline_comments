{"pr_number": 1009, "pr_title": "Tsk 1180", "pr_createdAt": "2020-04-09T14:00:15Z", "pr_url": "https://github.com/Taskana/taskana/pull/1009", "timeline": [{"oid": "ed9bae9a83aabda72f1dda54b111575717e16d01", "url": "https://github.com/Taskana/taskana/commit/ed9bae9a83aabda72f1dda54b111575717e16d01", "message": "TSK-1080: fixed archunit tests which failed due to rebase", "committedDate": "2020-04-09T20:38:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY2MDkyNA==", "url": "https://github.com/Taskana/taskana/pull/1009#discussion_r406660924", "bodyText": "any idea why this is/was commented out?", "author": "mustaphazorgati", "createdAt": "2020-04-10T08:31:11Z", "path": "lib/taskana-core/src/test/java/acceptance/classification/GetClassificationAccTest.java", "diffHunk": "@@ -91,55 +91,53 @@ void testGetClassificationAsSummary() throws ClassificationNotFoundException {\n         classificationService\n             .getClassification(\"CLI:100000000000000000000000000000000011\")\n             .asSummary();\n-    assertNotNull(classification);\n-    assertEquals(\"T6310\", classification.getKey());\n-    assertEquals(\"\", classification.getParentId());\n-    assertEquals(\"AUTOMATIC\", classification.getCategory());\n-    assertEquals(\"TASK\", classification.getType());\n-    assertEquals(\"DOMAIN_A\", classification.getDomain());\n-    assertEquals(\"T-GUK Honorarrechnung erstellen\", classification.getName());\n-    // assertEquals(\"Generali Unterst\u00fctzungskasse Honorar wird f\u00e4llig\",\n-    // classification.getDescription());\n-    assertEquals(2, classification.getPriority());\n-    assertEquals(\"P2D\", classification.getServiceLevel());\n+    assertThat(classification).isNotNull();\n+    assertThat(classification.getKey()).isEqualTo(\"T6310\");\n+    assertThat(classification.getParentId()).isEqualTo(\"\");\n+    assertThat(classification.getCategory()).isEqualTo(\"AUTOMATIC\");\n+    assertThat(classification.getType()).isEqualTo(\"TASK\");\n+    assertThat(classification.getDomain()).isEqualTo(\"DOMAIN_A\");\n+    assertThat(classification.getName()).isEqualTo(\"T-GUK Honorarrechnung erstellen\");\n+    //    assertThat(classification.getDescription())", "originalCommit": "ed9bae9a83aabda72f1dda54b111575717e16d01", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA4MDAwMg==", "url": "https://github.com/Taskana/taskana/pull/1009#discussion_r408080002", "bodyText": "It seems that getDescription() is not in the classification class. Maybe it was planned to add the method, or it was removed before. I decided to not remove the comented code for one of these reasons.", "author": "sfrevel", "createdAt": "2020-04-14T11:59:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY2MDkyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2ODY5Ng==", "url": "https://github.com/Taskana/taskana/pull/1009#discussion_r407068696", "bodyText": "Can be removed", "author": "mustaphazorgati", "createdAt": "2020-04-11T14:12:51Z", "path": "lib/taskana-core/src/test/java/acceptance/classification/QueryClassificationAccTest.java", "diffHunk": "@@ -198,83 +170,72 @@ void testGetClassificationsWithParentKey() {\n             .parentKeyIn(\"L10000\", \"T2100\", \"T6310\")\n             .domainIn(\"DOMAIN_A\")\n             .list();\n-    assertNotNull(classifications);\n-    assertEquals(2, classifications.size());\n+    assertThat(classifications).isNotNull().hasSize(2);\n   }\n \n   @Test\n   void testGetClassificationsWithCustom1() throws InvalidArgumentException {\n-    ClassificationService classificationService = taskanaEngine.getClassificationService();\n     List<ClassificationSummary> classifications =\n         classificationService\n             .createClassificationQuery()\n             .customAttributeIn(\"1\", \"VNR,RVNR,KOLVNR\", \"VNR\")\n             .domainIn(\"DOMAIN_A\")\n             .list();\n-    assertNotNull(classifications);\n-    assertEquals(14, classifications.size());\n+    assertThat(classifications).isNotNull().hasSize(14);\n   }\n \n   @Test\n   void testGetClassificationsWithCustom1Like() throws InvalidArgumentException {\n-    ClassificationService classificationService = taskanaEngine.getClassificationService();\n     List<ClassificationSummary> classifications =\n         classificationService\n             .createClassificationQuery()\n             .customAttributeLike(\"1\", \"%RVNR%\")\n             .domainIn(\"DOMAIN_A\")\n             .typeIn(\"TASK\")\n             .list();\n-    assertNotNull(classifications);\n-    assertEquals(13, classifications.size());\n+    assertThat(classifications).isNotNull().hasSize(13);\n   }\n \n   @Test\n   void testGetClassificationsWithParentAndCustom2() throws InvalidArgumentException {\n-    ClassificationService classificationService = taskanaEngine.getClassificationService();\n     List<ClassificationSummary> classifications =\n         classificationService\n             .createClassificationQuery()\n             .parentIdIn(\"CLI:100000000000000000000000000000000004\")\n             .customAttributeIn(\"2\", \"TEXT_1\", \"TEXT_2\")\n             .list();\n     // zwei tests", "originalCommit": "93aec17907d494b6c45df3c5735f7095b8c0f18f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2ODkzMg==", "url": "https://github.com/Taskana/taskana/pull/1009#discussion_r407068932", "bodyText": "hasSize() implicitly tests NotNull. Please remove", "author": "mustaphazorgati", "createdAt": "2020-04-11T14:14:28Z", "path": "lib/taskana-core/src/test/java/acceptance/classification/QueryClassificationAccTest.java", "diffHunk": "@@ -198,83 +170,72 @@ void testGetClassificationsWithParentKey() {\n             .parentKeyIn(\"L10000\", \"T2100\", \"T6310\")\n             .domainIn(\"DOMAIN_A\")\n             .list();\n-    assertNotNull(classifications);\n-    assertEquals(2, classifications.size());\n+    assertThat(classifications).isNotNull().hasSize(2);\n   }\n \n   @Test\n   void testGetClassificationsWithCustom1() throws InvalidArgumentException {\n-    ClassificationService classificationService = taskanaEngine.getClassificationService();\n     List<ClassificationSummary> classifications =\n         classificationService\n             .createClassificationQuery()\n             .customAttributeIn(\"1\", \"VNR,RVNR,KOLVNR\", \"VNR\")\n             .domainIn(\"DOMAIN_A\")\n             .list();\n-    assertNotNull(classifications);\n-    assertEquals(14, classifications.size());\n+    assertThat(classifications).isNotNull().hasSize(14);\n   }\n \n   @Test\n   void testGetClassificationsWithCustom1Like() throws InvalidArgumentException {\n-    ClassificationService classificationService = taskanaEngine.getClassificationService();\n     List<ClassificationSummary> classifications =\n         classificationService\n             .createClassificationQuery()\n             .customAttributeLike(\"1\", \"%RVNR%\")\n             .domainIn(\"DOMAIN_A\")\n             .typeIn(\"TASK\")\n             .list();\n-    assertNotNull(classifications);\n-    assertEquals(13, classifications.size());\n+    assertThat(classifications).isNotNull().hasSize(13);\n   }\n \n   @Test\n   void testGetClassificationsWithParentAndCustom2() throws InvalidArgumentException {\n-    ClassificationService classificationService = taskanaEngine.getClassificationService();\n     List<ClassificationSummary> classifications =\n         classificationService\n             .createClassificationQuery()\n             .parentIdIn(\"CLI:100000000000000000000000000000000004\")\n             .customAttributeIn(\"2\", \"TEXT_1\", \"TEXT_2\")\n             .list();\n     // zwei tests\n-    assertNotNull(classifications);\n-    assertEquals(3, classifications.size());\n+    assertThat(classifications).isNotNull().hasSize(3);\n   }\n \n   @Test\n   void testFindClassificationsByCreatedTimestamp() {\n-    ClassificationService classificationService = taskanaEngine.getClassificationService();\n     List<ClassificationSummary> classificationSummaryList =\n         classificationService\n             .createClassificationQuery()\n             .domainIn(\"DOMAIN_A\")\n             .createdWithin(todaysInterval())\n             .list();\n \n-    assertNotNull(classificationSummaryList);\n-    assertEquals(17, classificationSummaryList.size());\n+    assertThat(classificationSummaryList).isNotNull().hasSize(17);", "originalCommit": "93aec17907d494b6c45df3c5735f7095b8c0f18f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2OTQyNw==", "url": "https://github.com/Taskana/taskana/pull/1009#discussion_r407069427", "bodyText": "can be improved.", "author": "mustaphazorgati", "createdAt": "2020-04-11T14:19:41Z", "path": "lib/taskana-core/src/test/java/acceptance/classification/UpdateClassificationAccTest.java", "diffHunk": "@@ -82,11 +77,11 @@ public void testUpdateClassification()\n     // Get and check the new value\n     Classification updatedClassification =\n         classificationService.getClassification(\"T2100\", \"DOMAIN_A\");\n-    assertNotNull(updatedClassification);\n-    assertThat(updatedClassification.getName(), equalTo(newName));\n-    assertThat(updatedClassification.getApplicationEntryPoint(), equalTo(newEntryPoint));\n-    assertThat(updatedClassification.getCreated(), equalTo(createdBefore));\n-    assertTrue(modifiedBefore.isBefore(updatedClassification.getModified()));\n+    assertThat(updatedClassification).isNotNull();\n+    assertThat(updatedClassification.getName()).isEqualTo(newName);\n+    assertThat(updatedClassification.getApplicationEntryPoint()).isEqualTo(newEntryPoint);\n+    assertThat(updatedClassification.getCreated()).isEqualTo(createdBefore);\n+    assertThat(modifiedBefore.isBefore(updatedClassification.getModified())).isTrue();", "originalCommit": "93aec17907d494b6c45df3c5735f7095b8c0f18f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2OTQ3NQ==", "url": "https://github.com/Taskana/taskana/pull/1009#discussion_r407069475", "bodyText": "assertThat(modifiedBefore).isBefore(updatedClassification.getModified());", "author": "mustaphazorgati", "createdAt": "2020-04-11T14:20:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA2OTQyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA5ODQ2OA==", "url": "https://github.com/Taskana/taskana/pull/1009#discussion_r407098468", "bodyText": "assertThat(modifiedBefore).isBeforeOrEqualTo(updatedClassification.getModified());", "author": "mustaphazorgati", "createdAt": "2020-04-11T18:57:13Z", "path": "lib/taskana-core/src/test/java/acceptance/classification/UpdateClassificationAccTest.java", "diffHunk": "@@ -139,20 +133,18 @@ public void testUpdateTaskOnClassificationKeyCategoryChange() throws Exception {\n     TaskImpl updatedTask =\n         (TaskImpl)\n             taskanaEngine.getTaskService().getTask(\"TKI:000000000000000000000000000000000000\");\n-    assertThat(\n-        updatedTask.getClassificationCategory(),\n-        not(equalTo(beforeTask.getClassificationCategory())));\n-    assertThat(\n-        updatedTask.getClassificationSummary().getCategory(),\n-        not(equalTo(beforeTask.getClassificationSummary().getCategory())));\n-    assertThat(updatedTask.getClassificationCategory(), equalTo(\"PROCESS\"));\n-    assertThat(updatedTask.getClassificationSummary().getCategory(), equalTo(\"PROCESS\"));\n-\n-    assertThat(classification.getCreated(), equalTo(createdBefore));\n+    assertThat(beforeTask.getClassificationCategory())\n+        .isNotEqualTo(updatedTask.getClassificationCategory());\n+    assertThat(beforeTask.getClassificationSummary().getCategory())\n+        .isNotEqualTo(updatedTask.getClassificationSummary().getCategory());\n+    assertThat(updatedTask.getClassificationCategory()).isEqualTo(\"PROCESS\");\n+    assertThat(updatedTask.getClassificationSummary().getCategory()).isEqualTo(\"PROCESS\");\n+    assertThat(classification.getCreated()).isEqualTo(createdBefore);\n     // isBeforeOrEquals in case of too fast execution\n-    assertTrue(\n-        modifiedBefore.isBefore(classification.getModified())\n-            || modifiedBefore.equals(classification.getModified()));\n+    assertThat(", "originalCommit": "93aec17907d494b6c45df3c5735f7095b8c0f18f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cb37351207d72d68973f57ee76ccbf26c5183109", "url": "https://github.com/Taskana/taskana/commit/cb37351207d72d68973f57ee76ccbf26c5183109", "message": "TSK-1180: migrate from JUnit 5 assertions to assertJ assertions\n\nTSK-1180: remove hemcrest dependency\n\nTSK-1180: convertes junit Assertions.ThrownBy to assertJ style\n\nTSK-1180: add archUnit rule for checking if org.junit.jupiter.api.Assertions is used in classes\n\nTSK-1080: fixed archunit tests which failed due to rebase\n\ntest\n\nfixed order problem with H2 database -> set collation to DEFAULT_de_DE\n\ndisabled test with collation problems, readded old style assrtj test", "committedDate": "2020-04-17T17:17:38Z", "type": "forcePushed"}, {"oid": "f000aebca6cf62e02ce4bdd17679a4892ebcb47e", "url": "https://github.com/Taskana/taskana/commit/f000aebca6cf62e02ce4bdd17679a4892ebcb47e", "message": "TSK-1180: migrate from JUnit 5 assertions to assertJ assertions\n\nTSK-1180: remove hemcrest dependency\n\nTSK-1180: convertes junit Assertions.ThrownBy to assertJ style\n\nTSK-1180: add archUnit rule for checking if org.junit.jupiter.api.Assertions is used in classes\n\nTSK-1080: fixed archunit tests which failed due to rebase\n\ntest\n\nfixed order problem with H2 database -> set collation to DEFAULT_de_DE\n\ndisabled test with collation problems, readded old style assrtj test", "committedDate": "2020-04-20T05:25:31Z", "type": "commit"}, {"oid": "f000aebca6cf62e02ce4bdd17679a4892ebcb47e", "url": "https://github.com/Taskana/taskana/commit/f000aebca6cf62e02ce4bdd17679a4892ebcb47e", "message": "TSK-1180: migrate from JUnit 5 assertions to assertJ assertions\n\nTSK-1180: remove hemcrest dependency\n\nTSK-1180: convertes junit Assertions.ThrownBy to assertJ style\n\nTSK-1180: add archUnit rule for checking if org.junit.jupiter.api.Assertions is used in classes\n\nTSK-1080: fixed archunit tests which failed due to rebase\n\ntest\n\nfixed order problem with H2 database -> set collation to DEFAULT_de_DE\n\ndisabled test with collation problems, readded old style assrtj test", "committedDate": "2020-04-20T05:25:31Z", "type": "forcePushed"}]}