{"pr_number": 1240, "pr_title": "TSK-1376: Fixed taskana admin not displaying correctly when using custom domain", "pr_createdAt": "2020-08-24T10:39:55Z", "pr_url": "https://github.com/Taskana/taskana/pull/1240", "timeline": [{"oid": "9f46febac996425553784171fdd2f082d9133133", "url": "https://github.com/Taskana/taskana/commit/9f46febac996425553784171fdd2f082d9133133", "message": "TSK-1376: fixed issues where custom domain is loaded after the webapp is finished initializing", "committedDate": "2020-08-24T10:37:35Z", "type": "commit"}, {"oid": "f43ff8799d1d27b54abbd221782099cebf7adc11", "url": "https://github.com/Taskana/taskana/commit/f43ff8799d1d27b54abbd221782099cebf7adc11", "message": "TSK-1376: remove custom rest urls in environment-information.json", "committedDate": "2020-08-24T10:39:22Z", "type": "commit"}, {"oid": "9feb6c91ae1bad4ba060356c41c2e4047262b82f", "url": "https://github.com/Taskana/taskana/commit/9feb6c91ae1bad4ba060356c41c2e4047262b82f", "message": "TSK-1376: fixed failing unit tests", "committedDate": "2020-08-24T11:01:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTUzOTE1NA==", "url": "https://github.com/Taskana/taskana/pull/1240#discussion_r475539154", "bodyText": "Add a comment why this is done this way. So that others won't refactor this", "author": "mustaphazorgati", "createdAt": "2020-08-24T11:40:07Z", "path": "web/src/app/administration/services/classification-definition.service.ts", "diffHunk": "@@ -1,14 +1,17 @@\n import { Injectable } from '@angular/core';\n import { HttpClient } from '@angular/common/http';\n-import { environment } from 'app/../environments/environment';\n import { TaskanaDate } from 'app/shared/util/taskana.date';\n import { BlobGenerator } from 'app/shared/util/blob-generator';\n import { Classification } from '../../shared/models/classification';\n+import { StartupService } from '../../shared/services/startup/startup.service';\n \n @Injectable()\n export class ClassificationDefinitionService {\n-  url = `${environment.taskanaRestUrl}/v1/classification-definitions`;\n-  constructor(private httpClient: HttpClient) {}\n+  constructor(private httpClient: HttpClient, private startupService: StartupService) {}\n+\n+  get url(): string {", "originalCommit": "9feb6c91ae1bad4ba060356c41c2e4047262b82f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cbfd210c1a32ead05cfcbd99a595bfe8c511064d", "url": "https://github.com/Taskana/taskana/commit/cbfd210c1a32ead05cfcbd99a595bfe8c511064d", "message": "TSK-1376: added comment explaining", "committedDate": "2020-08-24T12:55:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU4NDYzMg==", "url": "https://github.com/Taskana/taskana/pull/1240#discussion_r475584632", "bodyText": "Do we need this?", "author": "Tristan2357", "createdAt": "2020-08-24T13:04:08Z", "path": "web/src/environments/data-sources/environment-information.json", "diffHunk": "@@ -1,4 +1,4 @@\n {\n-  \"taskanaRestUrl\": \"\",\n+  \"taskanaRestUrl\":   \"\",", "originalCommit": "9feb6c91ae1bad4ba060356c41c2e4047262b82f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU5MDExNA==", "url": "https://github.com/Taskana/taskana/pull/1240#discussion_r475590114", "bodyText": "Yes we do", "author": "cnguyen-de", "createdAt": "2020-08-24T13:13:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU4NDYzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU4NzcxNw==", "url": "https://github.com/Taskana/taskana/pull/1240#discussion_r475587717", "bodyText": "Why do we need this now?", "author": "Tristan2357", "createdAt": "2020-08-24T13:09:40Z", "path": "web/src/app/administration/components/access-items-management/access-items-management.component.spec.ts", "diffHunk": "@@ -109,7 +112,10 @@ describe('AccessItemsManagementComponent', () => {\n         { provide: FormsValidatorService, useClass: formValidatorServiceSpy },\n         { provide: NotificationService, useClass: notificationServiceSpy },\n         RequestInProgressService,\n-        ClassificationCategoriesService\n+        ClassificationCategoriesService,\n+        StartupService,\n+        TaskanaEngineService,\n+        WindowRefService", "originalCommit": "9feb6c91ae1bad4ba060356c41c2e4047262b82f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU4OTU3Mw==", "url": "https://github.com/Taskana/taskana/pull/1240#discussion_r475589573", "bodyText": "Because startupService uses those services", "author": "cnguyen-de", "createdAt": "2020-08-24T13:12:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTU4NzcxNw=="}], "type": "inlineReview"}, {"oid": "bdb92c53d91c0f300f5135929b83b9d5bdb1dcfa", "url": "https://github.com/Taskana/taskana/commit/bdb92c53d91c0f300f5135929b83b9d5bdb1dcfa", "message": "TSK-1376: webapp now uses values from environment-information.json as default data", "committedDate": "2020-08-24T14:09:07Z", "type": "commit"}, {"oid": "4cefb82e6fbf452a33d823c83835d41133de1953", "url": "https://github.com/Taskana/taskana/commit/4cefb82e6fbf452a33d823c83835d41133de1953", "message": "Merge branch 'master' into TSK-1376-Taskana-admin-not-displaying-correctly-when-using-custom-domain", "committedDate": "2020-08-24T15:02:45Z", "type": "commit"}, {"oid": "62de5ea053db18f9375fd7b247a5f0f54b56c6e4", "url": "https://github.com/Taskana/taskana/commit/62de5ea053db18f9375fd7b247a5f0f54b56c6e4", "message": "TSK-1376: fixed issues where custom domain is loaded after the webapp is finished initializing", "committedDate": "2020-08-24T15:16:35Z", "type": "commit"}, {"oid": "c7456a370c0d9eab550a4dc5e50cc44393b37839", "url": "https://github.com/Taskana/taskana/commit/c7456a370c0d9eab550a4dc5e50cc44393b37839", "message": "TSK-1376: remove custom rest urls in environment-information.json", "committedDate": "2020-08-24T15:16:35Z", "type": "commit"}, {"oid": "25104c6c22a45d63c985a3a34989b03fb0ce699d", "url": "https://github.com/Taskana/taskana/commit/25104c6c22a45d63c985a3a34989b03fb0ce699d", "message": "TSK-1376: fixed failing unit tests", "committedDate": "2020-08-24T15:17:06Z", "type": "commit"}, {"oid": "78921f37639b6bb13e36089e6593e3c75735610d", "url": "https://github.com/Taskana/taskana/commit/78921f37639b6bb13e36089e6593e3c75735610d", "message": "TSK-1376: added comment explaining", "committedDate": "2020-08-24T15:17:06Z", "type": "commit"}, {"oid": "45cfd52d7aa1ec9dc6cab61c3f75b1f0a6097387", "url": "https://github.com/Taskana/taskana/commit/45cfd52d7aa1ec9dc6cab61c3f75b1f0a6097387", "message": "TSK-1376: webapp now uses values from environment-information.json as default data", "committedDate": "2020-08-24T15:17:06Z", "type": "commit"}, {"oid": "0b0bd862a16ed3f3f40a26f647fb5966ceb145d1", "url": "https://github.com/Taskana/taskana/commit/0b0bd862a16ed3f3f40a26f647fb5966ceb145d1", "message": "TSK-1376: merge with master", "committedDate": "2020-08-24T15:19:06Z", "type": "commit"}, {"oid": "d5c659d4d2d59fa112b21b23cd31eeed54fda385", "url": "https://github.com/Taskana/taskana/commit/d5c659d4d2d59fa112b21b23cd31eeed54fda385", "message": "Merge branch 'TSK-1376-Taskana-admin-not-displaying-correctly-when-using-custom-domain' of https://github.com/cnguyen-de/taskana into TSK-1376-Taskana-admin-not-displaying-correctly-when-using-custom-domain", "committedDate": "2020-08-24T15:19:30Z", "type": "commit"}, {"oid": "ee2dd14ff64fd9fe3b072a4ceb27b63cf5a0d842", "url": "https://github.com/Taskana/taskana/commit/ee2dd14ff64fd9fe3b072a4ceb27b63cf5a0d842", "message": "TSK-1376: removed duplicated imports resulting from merge", "committedDate": "2020-08-24T15:29:45Z", "type": "commit"}]}