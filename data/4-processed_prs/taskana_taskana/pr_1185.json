{"pr_number": 1185, "pr_title": "TSK-1085: Hateoas self-links which contain variables are not working \u2026", "pr_createdAt": "2020-07-21T23:10:53Z", "pr_url": "https://github.com/Taskana/taskana/pull/1185", "timeline": [{"oid": "63bb46b11e452def85fc8a9dce0a4455ac8efbe1", "url": "https://github.com/Taskana/taskana/commit/63bb46b11e452def85fc8a9dce0a4455ac8efbe1", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding", "committedDate": "2020-07-22T09:09:59Z", "type": "forcePushed"}, {"oid": "4de6bdbe5c676ba3029ebbee5d0b46909695542c", "url": "https://github.com/Taskana/taskana/commit/4de6bdbe5c676ba3029ebbee5d0b46909695542c", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding", "committedDate": "2020-07-22T09:44:16Z", "type": "forcePushed"}, {"oid": "fe4691f6cb148137cc7fb5c4e5a9d0b96049f960", "url": "https://github.com/Taskana/taskana/commit/fe4691f6cb148137cc7fb5c4e5a9d0b96049f960", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding", "committedDate": "2020-07-22T09:56:54Z", "type": "forcePushed"}, {"oid": "e5107be6ac7d1d43c65e42910aaf34a97e95f22e", "url": "https://github.com/Taskana/taskana/commit/e5107be6ac7d1d43c65e42910aaf34a97e95f22e", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* remove AbstractRessourcesAssembler.java\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding", "committedDate": "2020-07-23T09:21:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3ODIyMg==", "url": "https://github.com/Taskana/taskana/pull/1185#discussion_r459378222", "bodyText": "Wouldn't it be better to refactor this assembler like the workbasket assembler and get rid of the old paging style?", "author": "holgerhagen", "createdAt": "2020-07-23T11:19:53Z", "path": "history/taskana-simplehistory-rest-spring/src/main/java/pro/taskana/simplehistory/rest/resource/TaskHistoryEventListResourceAssembler.java", "diffHunk": "@@ -4,56 +4,74 @@\n \n import java.util.ArrayList;\n import java.util.List;\n+import java.util.Map;\n+import javax.servlet.http.HttpServletRequest;\n import org.springframework.hateoas.IanaLinkRelations;\n import org.springframework.hateoas.Link;\n import org.springframework.hateoas.PagedModel.PageMetadata;\n+import org.springframework.web.context.request.RequestContextHolder;\n+import org.springframework.web.context.request.ServletRequestAttributes;\n+import org.springframework.web.servlet.support.ServletUriComponentsBuilder;\n+import org.springframework.web.util.UriComponentsBuilder;\n \n-import pro.taskana.resource.rest.AbstractRessourcesAssembler;\n+import pro.taskana.common.rest.models.PagedResources;\n import pro.taskana.simplehistory.impl.HistoryEventImpl;\n import pro.taskana.simplehistory.rest.TaskHistoryEventController;\n \n-/** Mapper to convert from a list of HistoryEventImpl to a TaskHistoryEventResource. */\n-public class TaskHistoryEventListResourceAssembler extends AbstractRessourcesAssembler {\n-\n-  public TaskHistoryEventListResource toResources(\n-      List<HistoryEventImpl> historyEvents, PageMetadata pageMetadata) {\n+/**\n+ * Mapper to convert from a list of HistoryEventImpl to a TaskHistoryEventResource.\n+ */\n+public class TaskHistoryEventListResourceAssembler {", "originalCommit": "e5107be6ac7d1d43c65e42910aaf34a97e95f22e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQwNDM3OA==", "url": "https://github.com/Taskana/taskana/pull/1185#discussion_r459404378", "bodyText": "Definitely.\nBut this is part of the follow up ticket, where we're going to refactor the aspect and not only fixing the bug.\nSadly this change is not related to the bug and was commited, because i cherry-picked the wrong commit.", "author": "nkolytschew", "createdAt": "2020-07-23T12:15:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3ODIyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU0NTMwMA==", "url": "https://github.com/Taskana/taskana/pull/1185#discussion_r462545300", "bodyText": "won't fix!\nNot part of the Bugfix.", "author": "nkolytschew", "createdAt": "2020-07-29T19:45:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM3ODIyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQyMDc4NA==", "url": "https://github.com/Taskana/taskana/pull/1185#discussion_r459420784", "bodyText": "please also remove this dependency ;)", "author": "mustaphazorgati", "createdAt": "2020-07-23T12:45:33Z", "path": "rest/taskana-rest-spring/src/main/java/pro/taskana/resource/rest/AbstractRessourcesAssembler.java", "diffHunk": "@@ -1,68 +0,0 @@\n-package pro.taskana.resource.rest;\n-\n-import java.util.Map;\n-import javax.servlet.http.HttpServletRequest;\n-import org.springframework.hateoas.Link;\n-import org.springframework.hateoas.PagedModel.PageMetadata;\n-import org.springframework.web.context.request.RequestContextHolder;\n-import org.springframework.web.context.request.ServletRequestAttributes;\n-import org.springframework.web.servlet.support.ServletUriComponentsBuilder;\n-import org.springframework.web.util.UriComponentsBuilder;\n-\n-import pro.taskana.common.rest.models.PagedResources;\n-\n-/**\n- * Abstract resources assembler for taskana REST controller with pageable resources. This method is\n- * deprecated, it can be removed after fixing taskana-simple-history references\n- */\n-// TODO: @Deprecated\n-// TODO: please remove spring-webmvc dependency", "originalCommit": "e5107be6ac7d1d43c65e42910aaf34a97e95f22e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUwMzEzMg==", "url": "https://github.com/Taskana/taskana/pull/1185#discussion_r459503132", "bodyText": "Won't fix due to \"import org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler;\" dependency in \"TaskanaRestExceptionHandler\"", "author": "nkolytschew", "createdAt": "2020-07-23T14:43:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQyMDc4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkzMTY0NA==", "url": "https://github.com/Taskana/taskana/pull/1185#discussion_r459931644", "bodyText": "Oh. missed that. thanks!", "author": "mustaphazorgati", "createdAt": "2020-07-24T08:56:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQyMDc4NA=="}], "type": "inlineReview"}, {"oid": "b3cc7dcb46ab223392b3bfeb23b5b56894cdf4ba", "url": "https://github.com/Taskana/taskana/commit/b3cc7dcb46ab223392b3bfeb23b5b56894cdf4ba", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding", "committedDate": "2020-07-29T19:38:25Z", "type": "commit"}, {"oid": "b3cc7dcb46ab223392b3bfeb23b5b56894cdf4ba", "url": "https://github.com/Taskana/taskana/commit/b3cc7dcb46ab223392b3bfeb23b5b56894cdf4ba", "message": "TSK-1085: Hateoas self-links which contain variables are not working for Paged representationmodels\n\nBug Fix\n* update Aspect\n* update unit-test and test \"href-self\" part of json\n* fix checkstyl-finding", "committedDate": "2020-07-29T19:38:25Z", "type": "forcePushed"}]}