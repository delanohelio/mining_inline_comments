{"pr_number": 953, "pr_title": "TSK-1147 Replaced getRestTemplate() by constant TEMPLATE", "pr_createdAt": "2020-02-27T10:46:13Z", "pr_url": "https://github.com/Taskana/taskana/pull/953", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2Mjk5MA==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r385262990", "bodyText": "Maybe we can use containsOnly?", "author": "mustaphazorgati", "createdAt": "2020-02-27T17:33:53Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/rest/TaskanaEngineControllerIntTest.java", "diffHunk": "@@ -49,9 +47,9 @@ void testClassificationTypes() {\n             HttpMethod.GET,\n             restHelper.defaultRequest(),\n             ParameterizedTypeReference.forType(List.class));\n-    assertTrue(response.getBody().contains(\"TASK\"));\n-    assertTrue(response.getBody().contains(\"DOCUMENT\"));\n-    assertFalse(response.getBody().contains(\"UNKNOWN\"));\n+    assertThat(response.getBody().contains(\"TASK\")).isTrue();", "originalCommit": "0206334604a59ef9f6e5dd2e9de6befc36f666d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYyODE4Ng==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r385628186", "bodyText": "why \"containsOnly\"? I think it should be \"contains\" from assertJ ListAssert", "author": "sofie29", "createdAt": "2020-02-28T10:48:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2Mjk5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY4MTUzOQ==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r385681539", "bodyText": "well if we only use the contains operator the actual list could contain additional values. Using containsOnly we can verify that only those values are values of that list", "author": "mustaphazorgati", "createdAt": "2020-02-28T12:58:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2Mjk5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2MzAyMg==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r385263022", "bodyText": "Maybe we can use containsOnly?", "author": "mustaphazorgati", "createdAt": "2020-02-27T17:33:57Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/rest/TaskanaEngineControllerIntTest.java", "diffHunk": "@@ -62,11 +60,11 @@ void testClassificationCategories() {\n             HttpMethod.GET,\n             restHelper.defaultRequest(),\n             ParameterizedTypeReference.forType(List.class));\n-    assertTrue(response.getBody().contains(\"MANUAL\"));\n-    assertTrue(response.getBody().contains(\"EXTERNAL\"));\n-    assertTrue(response.getBody().contains(\"AUTOMATIC\"));\n-    assertTrue(response.getBody().contains(\"PROCESS\"));\n-    assertFalse(response.getBody().contains(\"UNKNOWN\"));\n+    assertThat(response.getBody().contains(\"MANUAL\")).isTrue();", "originalCommit": "0206334604a59ef9f6e5dd2e9de6befc36f666d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2NTg5Mw==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r385265893", "bodyText": "as is wrong. (As far as I understand it.) Please use isEqualTo()", "author": "mustaphazorgati", "createdAt": "2020-02-27T17:39:32Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/rest/TestSchemaNameCustomizable.java", "diffHunk": "@@ -57,7 +58,7 @@ void checkCustomSchemaNameIsDefined_Postgres() throws SQLException {\n           String tableName = rs.getString(\"tablename\");\n           tablefound = tableName.equals(\"workbasket\");\n         }\n-        Assertions.assertTrue(tablefound, \"Table workbasket should be there ...\");\n+        assertThat(tablefound).as(\"Table workbasket should be there ...\").isTrue();", "originalCommit": "0206334604a59ef9f6e5dd2e9de6befc36f666d3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc2NDIxNQ==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r385764215", "bodyText": "tablefound is a boolean, that's why I don't understand why I should use isEqualTo(). As far as I can see, we obtain the same results with the old and the new expression... am I wrong? the String is shown in case the boolean is false.", "author": "sofie29", "createdAt": "2020-02-28T15:37:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2NTg5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTc3MDA1Ng==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r385770056", "bodyText": "nevermind.. I was wrong. Thanks!", "author": "mustaphazorgati", "createdAt": "2020-02-28T15:46:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2NTg5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2NTkzMw==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r385265933", "bodyText": "Same as above", "author": "mustaphazorgati", "createdAt": "2020-02-27T17:39:37Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/rest/TestSchemaNameCustomizable.java", "diffHunk": "@@ -78,7 +79,7 @@ void checkCustomSchemaNameIsDefined_OtherDb() throws SQLException {\n           String tableName = rs.getString(\"TABLE_NAME\");\n           tablefound = tableName.equals(\"WORKBASKET\");\n         }\n-        Assertions.assertTrue(tablefound, \"Table WORKBASKET should be there ...\");\n+        assertThat(tablefound).as(\"Table WORKBASKET should be there ...\").isTrue();", "originalCommit": "0206334604a59ef9f6e5dd2e9de6befc36f666d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI2NzI4Nw==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r385267287", "bodyText": "assertThat(\nresponse2.getBody().getContent().stream().map(DistributionTargetResource::getWorkbasketId).noneMatch(\"WBI:...\")).isTrue()\nwhat do u think?", "author": "mustaphazorgati", "createdAt": "2020-02-27T17:42:00Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/rest/WorkbasketControllerIntTest.java", "diffHunk": "@@ -214,9 +212,8 @@ void testRemoveWorkbasketAsDistributionTarget() {\n             restHelper.defaultRequest(),\n             ParameterizedTypeReference.forType(DistributionTargetListResource.class));\n     assertThat(response2.getStatusCode()).isEqualTo(HttpStatus.OK);\n-    Iterator<DistributionTargetResource> iterator = response2.getBody().getContent().iterator();\n-    while (iterator.hasNext()) {\n-      assertThat(iterator.next().getWorkbasketId())\n+    for (DistributionTargetResource distributionTargetResource : response2.getBody().getContent()) {", "originalCommit": "0206334604a59ef9f6e5dd2e9de6befc36f666d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgyODI2MQ==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r386828261", "bodyText": "The main benefit of using containsOnly is that we don't have to do additional checks like this one. Since the list contains only TASK and DOCUMENT", "author": "mustaphazorgati", "createdAt": "2020-03-03T06:56:03Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/rest/TaskanaEngineControllerIntTest.java", "diffHunk": "@@ -49,9 +47,8 @@ void testClassificationTypes() {\n             HttpMethod.GET,\n             restHelper.defaultRequest(),\n             ParameterizedTypeReference.forType(List.class));\n-    assertTrue(response.getBody().contains(\"TASK\"));\n-    assertTrue(response.getBody().contains(\"DOCUMENT\"));\n-    assertFalse(response.getBody().contains(\"UNKNOWN\"));\n+    assertThat(response.getBody()).containsOnly(\"TASK\", \"DOCUMENT\");\n+    assertThat(response.getBody()).doesNotContain(\"UNKNOWN\");", "originalCommit": "521e4124be0d403f5b89020d10cf61f4c084567f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgyODI5Ng==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r386828296", "bodyText": "see above", "author": "mustaphazorgati", "createdAt": "2020-03-03T06:56:11Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/rest/TaskanaEngineControllerIntTest.java", "diffHunk": "@@ -62,11 +59,8 @@ void testClassificationCategories() {\n             HttpMethod.GET,\n             restHelper.defaultRequest(),\n             ParameterizedTypeReference.forType(List.class));\n-    assertTrue(response.getBody().contains(\"MANUAL\"));\n-    assertTrue(response.getBody().contains(\"EXTERNAL\"));\n-    assertTrue(response.getBody().contains(\"AUTOMATIC\"));\n-    assertTrue(response.getBody().contains(\"PROCESS\"));\n-    assertFalse(response.getBody().contains(\"UNKNOWN\"));\n+    assertThat(response.getBody()).containsOnly(\"MANUAL\", \"EXTERNAL\", \"AUTOMATIC\", \"PROCESS\");\n+    assertThat(response.getBody()).doesNotContain(\"UNKNOWN\");", "originalCommit": "521e4124be0d403f5b89020d10cf61f4c084567f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b0b004373ddcb6e623f0a7dd4f754d10e6e701eb", "url": "https://github.com/Taskana/taskana/commit/b0b004373ddcb6e623f0a7dd4f754d10e6e701eb", "message": "TSK-1147 Replaced getRestTemplate() by constant TEMPLATE\n\nTSK-1147 Usage of AssertJ ListAsserts\n\nTSK-1147 Usage of AssertJ ListAssert\n\nTSK-1147 Removed doesNotContain", "committedDate": "2020-03-03T09:57:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjkzMTY0MA==", "url": "https://github.com/Taskana/taskana/pull/953#discussion_r386931640", "bodyText": "We forgot this one here.", "author": "mustaphazorgati", "createdAt": "2020-03-03T10:36:41Z", "path": "rest/taskana-rest-spring/src/test/java/pro/taskana/rest/TaskanaEngineControllerIntTest.java", "diffHunk": "@@ -77,9 +69,9 @@ void testGetCurrentUserInfo() {\n             HttpMethod.GET,\n             restHelper.defaultRequest(),\n             ParameterizedTypeReference.forType(TaskanaUserInfoResource.class));\n-    assertEquals(\"teamlead_1\", response.getBody().getUserId());\n-    assertTrue(response.getBody().getGroupIds().contains(\"businessadmin\"));\n-    assertTrue(response.getBody().getRoles().contains(TaskanaRole.BUSINESS_ADMIN));\n-    assertFalse(response.getBody().getRoles().contains(TaskanaRole.ADMIN));\n+    assertThat(response.getBody().getUserId()).isEqualTo(\"teamlead_1\");\n+    assertThat(response.getBody().getGroupIds()).contains(\"businessadmin\");\n+    assertThat(response.getBody().getRoles()).contains(TaskanaRole.BUSINESS_ADMIN);\n+    assertThat(response.getBody().getRoles()).doesNotContain(TaskanaRole.ADMIN);", "originalCommit": "b0b004373ddcb6e623f0a7dd4f754d10e6e701eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}