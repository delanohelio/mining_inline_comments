{"pr_number": 1354, "pr_title": "TSK-1478: Move access items filter to front-end ", "pr_createdAt": "2020-11-24T08:25:49Z", "pr_url": "https://github.com/Taskana/taskana/pull/1354", "timeline": [{"oid": "b2ae07c6494626f67bc157c458266b5c29f8a733", "url": "https://github.com/Taskana/taskana/commit/b2ae07c6494626f67bc157c458266b5c29f8a733", "message": "TSK-1478: Move filter to front-end", "committedDate": "2020-11-24T08:18:10Z", "type": "commit"}, {"oid": "15210b4c4bbfa0ba3029df2634525bdc0cefaa1f", "url": "https://github.com/Taskana/taskana/commit/15210b4c4bbfa0ba3029df2634525bdc0cefaa1f", "message": "TSK-1478: remove unused variable", "committedDate": "2020-11-24T08:25:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU3Nzg5Mw==", "url": "https://github.com/Taskana/taskana/pull/1354#discussion_r532577893", "bodyText": "It seems to me that this method is written much more complicated than it actually is. By removing the negation of the first two conditions, you can delete the whole 'else' in the end.\n    if (this.accessItemsForm.value.workbasketKeyFilter) {\n      this.accessItems = this.accessItems.filter((value) =>\n        value.workbasketKey.toLowerCase().includes(this.accessItemsForm.value.workbasketKeyFilter)\n      );\n    }\n    if (this.accessItemsForm.value.accessIdFilter) {\n      this.accessItems = this.accessItems.filter((value) =>\n        value.accessName.toLowerCase().includes(this.accessItemsForm.value.accessIdFilter)\n      );\n    }", "author": "sofie29", "createdAt": "2020-11-30T12:58:42Z", "path": "web/src/app/administration/components/access-items-management/access-items-management.component.ts", "diffHunk": "@@ -119,6 +111,29 @@ export class AccessItemsManagementComponent implements OnInit {\n     if (!this.accessItemsForm.value.accessIdFilter) {\n       this.accessItemsForm.addControl('accessIdFilter', new FormControl());\n     }\n+    this.accessItems = accessItems;\n+    if (this.accessItemsForm.value.workbasketKeyFilter || this.accessItemsForm.value.accessIdFilter) {\n+      this.filterAccessItems();\n+    }\n+  }\n+\n+  filterAccessItems() {\n+    if (!this.accessItemsForm.value.accessIdFilter) {\n+      this.accessItems = this.accessItems.filter((value) =>\n+        value.workbasketKey.toLowerCase().includes(this.accessItemsForm.value.workbasketKeyFilter)\n+      );\n+    } else if (!this.accessItemsForm.value.workbasketKeyFilter) {\n+      this.accessItems = this.accessItems.filter((value) =>\n+        value.accessName.toLowerCase().includes(this.accessItemsForm.value.accessIdFilter)\n+      );\n+    } else {\n+      this.accessItems = this.accessItems.filter((value) =>\n+        value.workbasketKey.toLowerCase().includes(this.accessItemsForm.value.workbasketKeyFilter)\n+      );\n+      this.accessItems = this.accessItems.filter((value) =>\n+        value.accessName.toLowerCase().includes(this.accessItemsForm.value.accessIdFilter)\n+      );\n+    }", "originalCommit": "15210b4c4bbfa0ba3029df2634525bdc0cefaa1f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU4MjkwOA==", "url": "https://github.com/Taskana/taskana/pull/1354#discussion_r532582908", "bodyText": "Is it possible to determine a type?", "author": "sofie29", "createdAt": "2020-11-30T13:07:09Z", "path": "web/src/app/administration/components/access-items-management/access-items-management.component.ts", "diffHunk": "@@ -40,7 +39,7 @@ export class AccessItemsManagementComponent implements OnInit {\n     ['workbasket-key', 'Workbasket Key']\n   ]);\n   sortModel: Sorting = new Sorting('access-id', Direction.DESC);\n-  isGroup: boolean = false;\n+  accessItems: any[];", "originalCommit": "15210b4c4bbfa0ba3029df2634525bdc0cefaa1f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU5Mzg4OQ==", "url": "https://github.com/Taskana/taskana/pull/1354#discussion_r532593889", "bodyText": "and 'isGroup' is used in html line 121.", "author": "sofie29", "createdAt": "2020-11-30T13:25:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU4MjkwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTk1NzMzNw==", "url": "https://github.com/Taskana/taskana/pull/1354#discussion_r535957337", "bodyText": "If I set the accessItems to type accessItemWorkbasket, what it's supposed to be, an error occurs and thus it doesn't recognizes the belonging parameters anymore (I have no idea why). since the name of the variable is already quite meaningful, I would maybe just stick with the type any?", "author": "Franzi321", "createdAt": "2020-12-04T09:28:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU4MjkwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjEwODAwOA==", "url": "https://github.com/Taskana/taskana/pull/1354#discussion_r536108008", "bodyText": "Should every object from the class AccessItemWorkbasket have the attribute accessName? If this is the case, we should add the attribute accessName to the class AccessItemWorkbasket.", "author": "sofie29", "createdAt": "2020-12-04T13:42:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU4MjkwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU4ODQ2Ng==", "url": "https://github.com/Taskana/taskana/pull/1354#discussion_r532588466", "bodyText": "Now, the action GetAccessItems contains logic which is never used (the filter). In case we are sure that we don't need this again, the action GetAccessItems could be modified. We could also create a new ticket and modify this after the redesign.", "author": "sofie29", "createdAt": "2020-11-30T13:16:34Z", "path": "web/src/app/administration/components/access-items-management/access-items-management.component.ts", "diffHunk": "@@ -83,14 +81,7 @@ export class AccessItemsManagementComponent implements OnInit {\n   searchForAccessItemsWorkbaskets() {\n     this.removeFocus();\n     this.store\n-      .dispatch(\n-        new GetAccessItems(\n-          [this.accessId, ...this.groups],\n-          this.accessItemsForm ? this.accessItemsForm.value.accessIdFilter : undefined,\n-          this.accessItemsForm ? this.accessItemsForm.value.workbasketKeyFilter : undefined,\n-          this.sortModel\n-        )\n-      )\n+      .dispatch(new GetAccessItems([this.accessId, ...this.groups], '', '', this.sortModel))", "originalCommit": "15210b4c4bbfa0ba3029df2634525bdc0cefaa1f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f056578ecc19851c794b8f789d7223da1dd36db6", "url": "https://github.com/Taskana/taskana/commit/f056578ecc19851c794b8f789d7223da1dd36db6", "message": "TSK-1478: adapt requested changes", "committedDate": "2020-12-04T08:17:43Z", "type": "commit"}, {"oid": "d830ff75964d98424949b7df0ae9ccaf468b3380", "url": "https://github.com/Taskana/taskana/commit/d830ff75964d98424949b7df0ae9ccaf468b3380", "message": "TSK-1478: remove unnecessary models", "committedDate": "2020-12-09T12:12:29Z", "type": "commit"}, {"oid": "802c6781444fd72a9c6485706b2940c24dcf3635", "url": "https://github.com/Taskana/taskana/commit/802c6781444fd72a9c6485706b2940c24dcf3635", "message": "TSK-1316: Replaced local progress bars by global one\nTSK-1316: Replaced local progress bars by global one in workplace\nTSK-1316: Rework of progress-bar component\n\n\nTSK-1316: Renamed progress-bar component\n\n\nTSK-1316: Changed progress-bar mode\nTSK-1316: Updated tests", "committedDate": "2020-12-09T12:30:51Z", "type": "commit"}, {"oid": "ecd18ecc2b327a932dee442eeefa557fc5e8a7f9", "url": "https://github.com/Taskana/taskana/commit/ecd18ecc2b327a932dee442eeefa557fc5e8a7f9", "message": "TSK-1412: Distribution targets MD (#1365)\n\n* TSK-1412: Refactor workbasket dual list to workbasket distribution targets list\r\n\r\n* TSK-1412: Refactor workbasket dual list to workbasket distribution targets list\r\n\r\n* TSK-1412: rework css layout to be more dynamic and resilient\r\n\r\n* TSK-1412: new list, new dialog, new action bar\r\n\r\n* TSK-1412: Refactor workbasket dual list to workbasket distribution targets list\r\n\r\n* TSK-1412: rework css layout to be more dynamic and resilient\r\n\r\n* TSK-1412: new list, new dialog, new action bar\r\n\r\n* TSK-1412: update new workbasket distribution target list to load data internally\r\n\r\n* TSK-1412: update distribution targets\r\n\r\n* TSK-1421: enable multiple selection\r\n\r\n* TSK-1412: Updated angular theme to match with taskana\r\n\r\n* TSK-1412: quick bug fixes\r\n\r\n* TSK-1412: Rework how workbasket distribution targets list behaves\r\n\r\n* TSK-1412: Update workbasket distribution target list to new design\r\n\r\n* TSK-1412: fixed filter function in distribution targets\r\n\r\n* TSK-1412: remove unused component, rename correct CSS names\r\n\r\n* TSK-1412: clean up code in workbasket distribution targets\r\n\r\n* TSK-1412: fix bugs, rename variables\r\n\r\n* TSK-1412: finalized jest tests\r\n\r\n* TSK-1412: fix all other jest tests\r\n\r\n* TSK-1412: disable devmode\r\n\r\n* TSK-1412: remove unused imports, add tooltips", "committedDate": "2020-12-09T12:30:51Z", "type": "commit"}, {"oid": "78f68f377459ab3fc4d6ea154fb18ba7f0dec59c", "url": "https://github.com/Taskana/taskana/commit/78f68f377459ab3fc4d6ea154fb18ba7f0dec59c", "message": "TSK-1477: Update workbasket information layout (#1364)\n\n* TSK-1477: Update workbasket information layout\r\n\r\n* TSK-1477: rearrange error message for description field\r\n\r\nCo-authored-by: Chi Nguyen <c.nguyen.prog@gmail.com>", "committedDate": "2020-12-09T12:30:51Z", "type": "commit"}, {"oid": "91560a6bbc3af42752261646926eda12b53fdea5", "url": "https://github.com/Taskana/taskana/commit/91560a6bbc3af42752261646926eda12b53fdea5", "message": "TSK-1474: Update classification details layout (#1358)\n\nCo-authored-by: Chi Nguyen <c.nguyen.prog@gmail.com>", "committedDate": "2020-12-09T12:30:51Z", "type": "commit"}, {"oid": "34a724fccb0762afe005453ff84a8390346f9aed", "url": "https://github.com/Taskana/taskana/commit/34a724fccb0762afe005453ff84a8390346f9aed", "message": "TSK-1473: Always display classification and workbasket filter (#1357)\n\n* TSK-1473: Always display classification and workbasket filter\r\n\r\n* TSK-1473: fix jest test\r\n\r\nCo-authored-by: Chi Nguyen <c.nguyen.prog@gmail.com>", "committedDate": "2020-12-09T12:30:51Z", "type": "commit"}, {"oid": "2691519742f1d30bd76d103a425b511cfc92099a", "url": "https://github.com/Taskana/taskana/commit/2691519742f1d30bd76d103a425b511cfc92099a", "message": "TSK-1484: Fixed bug int page size is overflow and all workbaskets are requested (#1367)", "committedDate": "2020-12-09T12:30:51Z", "type": "commit"}]}